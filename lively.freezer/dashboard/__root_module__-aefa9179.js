System.register(["kld-intersections"],function(Da,Bb){var Qb;return{setters:[function(hc){Qb=hc.default}],execute:function(){function hc(d,c,h){h=h||0;var f=[];if(d<=c)for(0>=h&&(h=-h||1);d<=c;d+=h)f.push(d);else for(0<=h&&(h=-h||-1);d>=c;d+=h)f.push(d);return f}function ac(d,c){for(var h=Array(d);0<d;)h[--d]=c;return h}function be(d,c){for(var h=Array(d);0<d;)h[--d]=c(d);return h}function bd(d,c,h){for(var f=[],k=0;k<d.length;k++){var n=d[k];c.call(h,n)&&f.push(n)}return f}function Sd(d,c){var h;
d.find(function(f,k){return h=c(f,k)});return h}function ed(d,c){return d.filter(function(h){return!!h[c]})}function Mc(d,c,h){"string"===typeof c&&(c=new RegExp(c,"i"));return Rb.filter(d,Rb.filter.test.bind(c))}function pd(d,c){return Rb.filter(d,function(h,f){return!!c[f]})}function Dd(d,c,h){return Rb.filter(d,function(f,k){return!c.call(h,f,k)})}function ke(d,c){return Rb.filter(d,function(h){return!h[c]})}function Kd(d,c){return Rb.filter(d,function(h){return h!==c})}function jd(d,c){return Rb.filter(d,
function(h){return-1===c.indexOf(h)})}function cb(d,c){if(!d.length)return d;var h=[d[0]];if(c)for(c=1;c<d.length;c++){var f=d[c];f!==h[h.length]&&h.push(f)}else for(c=1;c<d.length;c++)f=d[c],-1===h.indexOf(f)&&h.push(f);return h}function Ab(d,c,h){for(var f=d.slice(),k=f.length;k--;)for(var n=d[k],b=k+1;b<f.length;b++)c.call(h,n,f[b])&&f.splice(b--,1);return f}function Yb(d,c){for(var h={},f=[],k=0;k<d.length;k++){var n=d[k];h[n[c]]||(h[n[c]]=!0,f.push(n))}return f}function gc(d){return Rb.filter(d,
Boolean)}function dd(d){for(var c=0,h=0,f=d.length;c<f;)d.hasOwnProperty(c)&&(d[h++]=d[c]),c++;for(;h++<f;)d.pop();return d}function Zd(d,c,h){return d.forEach(c,h)}function Wb(){var d=Array.from(arguments),c=d.shift(),h="function"===typeof Rb.last(d)?d.pop():function(k){return k},f=[c].concat(d).map(function(k){return Array.from(k)});return c.map(function(k,n){return h(Rb.pluck(f,n),n)})}function oc(d,c){if("number"===typeof c){if(0>=c)return d;c--}return d.reduce(function(h,f){return h.concat(Array.isArray(f)?
oc(f,c):[f])},[])}function Lb(d,c,h){for(var f=[],k=0;k<d.length;k++)f.push.apply(f,c.call(h,d[k],k));return f}function Bc(d,c){return d.reduce(function(h,f){0<h.length&&h.push(c);h.push(f);return h},[])}function Sc(d,c){return Rb.interpose(d,c)}function Yc(d,c,h){return d.map(c,h)}function Xb(d,c,h,f,k,n,b,e){return d.map(function(m){return m[c](h,f,k,n,b,e)})}function qb(d,c){return d.map(function(h){return h[c]})}function uc(d,c,h,f){return d.reduce(c,h,f)}function Hc(d,c,h,f){return d.reduceRight(c,
h,f)}function Ia(d,c,h){return d.some(c,h)}function Va(d,c,h){return d.every(c,h)}function tb(d,c){var h=d.length;if(!c||h!==c.length)return!1;for(var f=0;f<h;f++){if(d[f]&&c[f]&&d[f].equals&&c[f].equals)if(d[f].equals(c[f]))continue;else return!1;if(d[f]!=c[f])return!1}return!0}function Jb(d,c){var h=d.length;if(!c||h!==c.length)return!1;for(var f=0;f<h;f++)if(!Rb.objectEquals(d[f],c[f]))return!1;return!0}function Ib(d,c){if(c)for(c=1;c<d.length;c++){if(d[c-1]<d[c])return!1}else for(c=1;c<d.length;c++)if(d[c-
1]>d[c])return!1;return!0}function ib(d,c){return d.sort(c)}function jb(d,c,h){return Rb.pluck(d.map(function(f,k){return{value:f,criteria:c.call(h,f,k)}}).sort(function(f,k){f=f.criteria;k=k.criteria;return f<k?-1:f>k?1:0}),"value")}function Fb(d,c){return Rb.sortBy(d,function(h){return h[c]})}function rc(d){return d.reverse()}function Ic(d){return d.slice().reverse()}function ec(d,c,h){h=h||String;return d.map(function(f){return h(f).match(c)})}function Pc(d){return d[0]}function Q(d){return d[d.length-
1]}function ha(d,c){return Rb.filter(Rb.uniq(d),function(h){return-1<c.indexOf(h)})}function Ha(d,c){d=d.slice();for(var h=0;h<c.length;h++){var f=c[h];-1===d.indexOf(f)&&d.push(f)}return d}function Pa(d,c,h){d.splice(h,0,c)}function bc(d,c){d.splice(c,1)}function ic(d,c){var h=d.indexOf(c);0<=h&&Rb.removeAt(d,h);return c}function Ra(d,c){d.push.apply(d,c);return d}function tc(d,c,h){d.splice.apply(d,[h,0].concat(c))}function Qd(d,c){d.includes(c)||d.push(c)}function md(d,c,h){d.splice(h,1,c)}function $c(d){d.length=
0;return d}function Wa(d,c){for(var h=0;h<d.length;h++)if(!c.includes(d[h]))return!1;return!0}function fd(d,c,h,f){h=h||Rb.NullFunction;f=f||Rb.GLOBAL;c=c||function(k,n,b){n.call(f,k,b)};return d.reduceRight(function(k,n,b){return function(){c.call(f,k,n,b)}},h)()}function lb(d,c,h,f,k,n){f=f||function(){};return d.clone().reverse().reduce(function(b,e,m){return function(){c.call(k||Rb.GLOBAL,e,m);n&&0!==m%n?b():b.delay(h)}},f)()}function Hd(){var d=Array.from(arguments),c=d.shift(),h=c.length,f=
!1;if(1===d.length){var k=d[0].progressBar;var n=d[0].iterator;var b=d[0].labelFunction;var e=d[0].whenDone;var m=d[0].context}else k=d[0],n=d[1],b=d[2],e=d[3],m=d[4];m||(m="undefined"!==typeof window?window:global);b||(b=function(a){return a});k||(f=!0,k=(d=("undefined"!==typeof window?window:global).lively&&lively.morphic&&lively.morphic.World.current())?d.addProgressBar():{value:null,label:null,remove:function(){}});k.value=0;c.reduceRight(function(a,g,l){return function(){try{k.value=l/h,b&&(k.label=
b.call(m,g,l)),n.call(m,g,l)}catch(r){console.error("Error in forEachShowingProgress at %s (%s)\n%s\n%s",l,g,r,r.stack)}Rb.delay(a,0)}},function(){k.value=1;f&&function(){k.remove()}.delay(0);e&&e.call(m)})();return c}function db(d,c,h){0>c&&(c=d.length+c);0>h&&(h=d.length+h);var f=d[c];d[c]=d[h];d[h]=f;return d}function rb(d,c){c=c||1;return d.slice(c).concat(d.slice(0,c))}function vb(d,c,h){return Rb.Group.fromArray(d,c,h)}function vd(d,c){return Rb.groupBy(d,function(h){return h[c]})}function me(d,
c,h){c=c||function(n){return n};var f=[],k=[];d.forEach(function(n,b){(c.call(h,n,b)?f:k).push(n)});return[f,k]}function ye(d,c,h){function f(n,b){if(!b.length)return[n,[]];var e=b[0];b=b.slice(1);var m=n.concat([e]);if(c.call(h,m))return f(m,b);n=f(n,b);return[n[0],[e].concat(n[1])]}function k(n,b){if(!b.length)return n;b=f([],b);if(!b[0].length)throw Error("Batchify constrained does not ensure consumption of at least one item per batch!");return k(n.concat([b[0]]),b[1])}return k([],d)}function Pe(d,
c){c=c||1;return Rb.range(0,Math.ceil(d.length/c)-1).map(function(h){return d.slice(h*c,h*c+c)},d)}function Tc(d,c){for(var h=d.map(function(b,e){return b[c[e]]}),f=c.slice(),k=d.length;k--;0<=k){var n=f[k]+1;if(d[k][n]){f[k]=n;break}else if(0===k){f=void 0;break}else f[k]=0}return[h,f]}function re(d){for(var c=d.reduce(function(n,b){return n*b.length},1),h=d.map(function(n){return 0}),f=Array(c),k=0;k<c;k++)h=Rb.combinationsPick(d,h),f[k]=h[0],h=h[1];return f}function Ed(d,c){return d.slice(0,c)}
function Nb(d,c){return d.slice(c)}function wa(d,c,h){for(var f=0;f<d.length&&c.call(h,d[f],f);f++);return d.slice(0,f)}function Ba(d,c,h){for(var f=0;f<d.length&&c.call(h,d[f],f);f++);return d.slice(f)}function Mb(d){for(var c=Rb.range(0,d.length-1),h=Array(d.length),f=0;f<d.length;f++){var k=c.splice(Math.round(Math.random()*(c.length-1)),1);h[k]=d[f]}return h}function P(d,c,h){c=c||function(k){return k};var f;d.reduce(function(k,n,b){b=c.call(h,n,b);if("number"!==typeof b||b<=k)return k;f=n;return b},
-Infinity);return f}function ya(d,c,h){c=c||function(f){return f};return Rb.max(d,function(f,k){return-c.call(h,f,k)})}function Ua(d){for(var c=0,h=0;h<d.length;h++)c+=d[h];return c}function Eb(d,c){return d.reduce(function(h,f){return f===c?h+1:h},0)}function Cc(d){return d.length}function cd(d,c){if("undefined"===typeof c||"number"===typeof c){var h=c||Math.ceil(Math.log(d.length)/Math.log(2)+1),f=Math.ceil(Math.round(d.length/h));return Rb.range(0,h-1).map(function(k){return d.slice(k*f,(k+1)*
f)})}if(c instanceof Array)return d.reduce(function(k,n){if(n<c[1])return k[0].push(n),k;for(var b=1;b<c.length;b++)if(n>=c[b]&&(!c[b+1]||n<=c[b+1]))return k[b].push(n),k;throw Error("Histogram creation: Cannot group data "+n+" into thresholds "+c);},Rb.range(1,c.length).map(function(){return[]}))}function ee(d){return[].concat(d)}function Vd(d){return Rb.from(d)}function Ze(d,c,h){return d.forEach(c,h)}function Wd(d,c,h){return d.every(c,h)}function Be(d,c,h){return d.some(c,h)}function Qe(d,c,h){return d.map(c,
h)}function rf(d,c,h){return Rb.filter(d,c,h)}function cg(d,c,h,f){f&&(h=h.bind(f));return d.reduce(h,c)}function Ef(d,c,h){function f(b,e){if(!n&&(b||e)){n=!0;try{h(b,k)}catch(m){console.error("Error in mapAsyncSeries - callback invocation error:\n"+(m.stack||m))}}}var k=[],n=!1;return d.reduceRight(function(b,e,m){if(!n)return function(a,g){if(a)return f(a);0<m&&k.push(g);try{c(e,m,Rb.once(b))}catch(l){f(l)}}},function(b,e){k.push(e);f(b,!0)})()}function Oc(d,c,h,f){function k(){for(;g<c.parallel&&
a<d.length;)l[a++]()}function n(r,v){if(!(-1<e.indexOf(r)||(e.push(r),g--,m)))if(!v&&e.length<d.length)k();else{m=!0;try{f&&f(v,b)}catch(y){console.error("Error in mapAsync - main callback invocation error:\n"+(y.stack||y))}}}"function"===typeof c&&(f=h,h=c,c=null);c=c||{};if(!d.length)return f&&f(null,[]);c.parallel||(c.parallel=Infinity);var b=[],e=[],m=!1,a=0,g=0,l=d.map(function(r,v){return function(){g++;try{h(r,v,Rb.once(function(y,A){b[v]=y||A;n(v,y)}))}catch(y){n(v,y)}}});return k()}function Af(){return function(){}}
function qg(){return function(d){return d}}function sg(){return function(){return null}}function ff(){return function(){return!1}}function Ja(){return function(){return!0}}function ab(){return function(){throw Error("Not yet implemented");}}function Cb(d){var c=[],h;for(h in d)d.__lookupGetter__(h)||"function"!==typeof d[h]||c.push(h);return c}function ba(d){var c=[],h;for(h in d)!d.__lookupGetter__(h)&&d.hasOwnProperty(h)&&"function"===typeof d[h]&&c.push(h);return c}function Ka(d){if(d.superclass)return[];
var c=d.toString();d="";var h=c.match(/(?:\(([^\)]*)\)|([^\(\)-+!]+))\s*=>/);h?d=h[1]||h[2]||"":(c=c.match(/^[\s\(]*function[^(]*\(([^)]*)\)/))&&c[1]&&(d=c[1]);return d.replace(/\/\/.*?[\r\n]|\/\*(?:.|[\r\n])*?\*\//g,"").replace(/\s+/g,"").split(",").map(function(f){return f.trim()}).filter(function(f){return!!f})}function nb(d){var c="";d.declaredClass?c+=d.declaredClass+">>":d.declaredObject&&(c+=d.declaredObject+".");return c+(d.methodName||d.displayName||d.name||"anonymous")}function xb(d){d=
String(d).replace(/^function[^\{]+\{\s*/,"").replace(/\}$/,"").trim();for(var c=d.split(/\n|\r/),h=void 0,f=0;f<c.length;f++){var k=c[f].match(/^(\s+)[^\s]/);k&&(void 0===h||k[1].length<h.length)&&(h=k[1])}return h?d.replace(new RegExp("^"+h,"gm"),""):d}function Dc(d){var c=Date.now();d();return Date.now()-c}function Fc(d,c){for(var h=Date.now(),f=0;f<c;f++)d();return(Date.now()-h)/c}function ud(d,c){var h=Array.prototype.slice.call(arguments),f=h.shift();c=1E3*h.shift();return setTimeout(function(){return f.apply(f,
h)},c)}function td(d,c){var h,f,k,n,b,e,m=zd.debounce(c,function(){b=n=!1});return function(){h=this;f=arguments;k||(k=setTimeout(function(){k=null;b&&d.apply(h,f);m()},c));n?b=!0:e=d.apply(h,f);m();n=!0;return e}}function rd(d,c,h){var f;return function(){var k=this,n=arguments;h&&!f&&c.apply(k,n);clearTimeout(f);f=setTimeout(function(){f=null;h||c.apply(k,n)},d)}}function zf(d,c,h){var f=zd._throttledByName;return f[d]?f[d]:f[d]=zd.throttle(function(){zd.debounceNamed(d,c,function(){delete f[d]})();
h.apply(this,arguments)},c)}function Ye(d,c,h,f){var k=zd._debouncedByName;return k[d]?k[d]:k[d]=zd.debounce(c,function(){delete k[d];h.apply(this,arguments)},f)}function Zf(d,c){var h=zd._queues,f=h[d]||(h[d]={_workerActive:!1,worker:c,tasks:[],drain:null,push:function(k){f.tasks.push(k);f._workerActive||f.activateWorker()},pushAll:function(k){k.forEach(function(n){f.tasks.push(n)});f._workerActive||f.activateWorker()},pushNoActivate:function(k){f.tasks.push(k)},handleError:function(k){k&&console.error("Error in queue: "+
k)},activateWorker:function(){function k(e){f.handleError(e);f.activateWorker()}var n=f.tasks,b=f._workerActive;if(0===n.length)b&&(f._workerActive=!1,"function"===typeof f.drain&&f.drain()),delete h[d];else{b||(f._workerActive=!0);try{f.worker(n.shift(),k)}catch(e){k(e)}}}});return f}function vh(d,c,h){function f(){a&&clearTimeout(a);e=!0;delete n[d]}function k(g){e||(f(),b.callbacks.forEach(function(l){try{l.apply(null,g)}catch(r){console.error("Error when invoking callbacks in queueUntil ["+d+
"]:\n"+String(r.stack||r))}}))}var n=zd._queueUntilCallbacks,b=n[d];if(b)return b;var e=!1,m=!1;if(h)var a=setTimeout(function(){e||k([Error("timeout")])},h);b=n[d]={callbacks:[],cancel:function(){m=!0;f()},whenDone:function(g){b.callbacks.push(g);return b}};setTimeout(function(){if(!m)try{c(function(){k(arguments)})}catch(g){k([g])}},0);return b}function Hi(){var d=Array.prototype.slice,c=d.call(arguments),h=zd._composeAsyncDefaultEndCallback,f=h,k,n,b=new Promise(function(e,m){k=e;n=m});return c.reverse().reduce(function(e,
m,a){var g=!1;return function(){function l(){g=!0;var y=d.call(arguments),A=y.shift();A?(f(A),n(A)):e.apply(null,y)}var r=d.call(arguments);if(f===h&&a===c.length-1){for(;r.length&&"function"!==typeof r[r.length-1];)r.pop();"function"===typeof r[r.length-1]&&(f=r.pop())}if("function"===typeof m)try{var v=m.apply(this,r.concat([l]));v&&"function"===typeof v.then&&"function"===typeof v.catch&&v.then(function(y){return l(null,y)}).catch(function(y){return l(y)})}catch(y){console.error("composeAsync: ",
y.stack||y),g||(f(y),n(y))}else m&&"function"===typeof m.then&&"function"===typeof m.catch?m.then(function(y){l(null,y)}).catch(function(y){l(y)}):(r=Error("Invalid argument to composeAsync: "+m),f(r),n(r));return b}},function(){var e=d.call(arguments);f.apply(null,[null].concat(e));k(e[0])})}function Nh(){return Array.prototype.slice.call(arguments).reverse().reduce(function(d,c){return function(){return d(c.apply(this,arguments))}},function(d){return d})}function pj(d){return function(){var c=Array.prototype.slice.call(arguments);
c=[c[1],c[0]].concat(c.slice(2));return d.apply(null,c)}}function Gh(d){d=d||function(){};return function(){var c=zd.arr.from(arguments);d.apply(null,[null].concat(c))}}function xk(d,c,h){var f=Date.now(),k=50;h||(h=c,c=d,d=void 0);(function b(){if(c())return h();if(d){var e=Date.now()-f;e=d-e;if(0>=e)return h(Error("timeout"));e<k&&(k=e)}setTimeout(b,k)})()}function Ng(d,c,h){function f(b,e,m,a){if(n.length){var g=null;b=n.indexOf(b);-1<b&&n.splice(b,1);m?(n.length=0,g=Error("in waitForAll at"+("number"===
typeof e?" "+e:"")+": \n"+(m.stack||String(m)))):a&&(k[e]=a);n.length||setTimeout(function(){h(g,k)},0)}}h||(h=c,c=d,d=null);d=d||{};var k=c.map(function(){return null});if(c.length){var n=Array.prototype.slice.call(c);c.forEach(function(b,e){try{b(function(){var m=Array.prototype.slice.call(arguments),a=m.shift();f(b,e,a,m)})}catch(m){f(b,e,m,null)}});d.timeout&&setTimeout(function(){if(n.length){var b=k.map(function(e,m){return null===e&&m}).filter(function(e){return"number"===typeof e}).join(", ");
f(null,null,Error("waitForAll timed out, functions at "+b+" not done"),null)}},d.timeout)}else h(null,k)}function fk(d,c,h,f){function k(){return d.apply(this,n.concat(Array.prototype.slice.call(arguments)))}if(1>=arguments.length)return arguments[0];var n=Array.prototype.slice.call(arguments);d=n.shift();k.isWrapper=!0;k.originalFunction=d;return k}function Sh(d,c){var h=function(){var f=Array.prototype.slice.call(arguments);f=c.isWrapper?f:[d.bind(this)].concat(f);return c.apply(this,f)};h.isWrapper=
!0;h.originalFunction=d;return h}function Oj(d){for(;d.originalFunction;)d=d.originalFunction;return d}function Zj(d){var c=[];do c.push(d),d=d.originalFunction;while(d);return c}function Ql(d,c,h){h.originalFunction=d[c];var f=d.hasOwnProperty(c);d[c]=function(){f?d[c]=h.originalFunction:delete d[c];return h.apply(this,arguments)};return d}function Tk(d){if(d){if("function"!==typeof d)throw Error("once() expecting a function");var c=!1,h;return function(){if(c)return h;c=!0;return h=d.apply(this,
arguments)}}}function ok(){var d=!1;return Array.prototype.slice.call(arguments).map(function(c){return function(){if(!d)return d=!0,c.apply(this,arguments)}})}function Rl(d,c){var h=Array.prototype.slice.call(arguments),f=zd._eitherNameRegistry;d=h.shift();var k=f[d]||(f[d]={wasCalled:!1,callsLeft:0});k.callsLeft++;return function(){k.callsLeft--;0>=k.callsLeft&&delete f[d];if(!k.wasCalled)return k.wasCalled=!0,c.apply(this,arguments)}}function Gj(d){return eval(d)}function dk(d){return zd.evalJS("("+
d.toString()+");")}function Ln(d,c){return zd.Closure.fromFunction(d,c).recreateFunc()}function Of(d,c,h,f){var k=h||d.name;if(!k)throw Error("Function that wants to be a script needs a name: "+this);h=Object.getPrototypeOf(c);var n={"this":c};f&&(n=zd.objectMerge([n,f]));h&&h[k]&&(n.$super=zd.Closure.fromFunction(function(){try{return Object.getPrototypeOf(c)[k].apply(c,arguments)}catch(b){return"undefined"!==typeof $world?$world.logError(b,"Error in $super call"):console.error("Error in $super call: "+
b+"\n"+b.stack),null}},{obj:c,name:k}).recreateFunc());return zd.addToObject(zd.asScript(d,n),c,k)}function Vk(d,c,h){d.displayName=h;var f=c.attributeConnections?c.attributeConnections.filter(function(k){return"update"===k.getSourceAttrName()}):[];f&&f.forEach(function(k){k.disconnect()});c[h]=d;typeof c&&(d.declaredObject=zd.safeToString(c));"undefined"!==typeof lively&&c&&lively.Tracing&&lively.Tracing.stackTracingEnabled&&lively.Tracing.instrumentMethod(c,h,{declaredObject:zd.safeToString(c)});
f&&f.forEach(function(k){k.connect()});return d}function Tb(d,c){return zd.Closure.fromFunction(d,c||{}).recreateFunc()}function qd(d,c,h){d.hasLivelyClosure&&(d.livelyClosure.funcProperties[c]=h)}function te(d){return d.hasLivelyClosure?d.livelyClosure.varMapping:d.isWrapper?d.originalFunction.varMapping:d.varMapping?d.varMapping:{}}function lc(d,c,h){d[c]=h;d.hasLivelyClosure&&(d.livelyClosure.funcProperties[c]=h)}function zg(d){for(var c=[],h=d.prototype;h;)c=Object.keys(h).reduce(function(f,k){"function"===
typeof h[k]&&-1===f.indexOf(k)&&f.push(k);return f},c),h=Object.getPrototypeOf(h);return c}function Vg(d){return Object.keys(d.prototype).filter(function(c){return"function"===typeof d.prototype[c]})}function qj(d,c){var h=function(f){var k=Array.prototype.slice.call(arguments);k.shift();try{return f.apply(d,k)}catch(n){if("undefined"!==typeof lively&&lively.morphic&&lively.morphic.World&&lively.morphic.World.current())throw lively.morphic.World.current().logError(n),n;c?console.warn("ERROR: %s.%s(%s): err: %s %s",
d,c,k,n,n.stack||""):console.warn("ERROR: %s %s",n,n.stack||"");throw n;}};h.methodName="$logErrorsAdvice";h=zd.wrap(d,h);h.originalFunction=d;h.methodName="$logErrorsWrapper";return h}function Jn(d,c){var h=function(f){var k=Array.prototype.slice.call(arguments);k.shift();try{var n=f.apply(d,k)}catch(b){throw console.warn("failed to load "+c+": "+b),"undefined"!==typeof lively&&lively.lang.Execution&&lively.lang.Execution.showStack(),b;}console.log("completed "+c);return n};h.methodName="$logCompletionAdvice::"+
c;h=zd.wrap(d,h);h.methodName="$logCompletionWrapper::"+c;h.originalFunction=d;return h}function qo(d,c){var h=function(k){var n=Array.prototype.slice.call(arguments);n.shift();f=k.apply(d,n);c?console.warn("%s(%s) -> %s",zd.qualifiedMethodName(d),n,f):console.log("%s(%s) -> %s",zd.qualifiedMethodName(d),n,f);return f};h.methodName="$logCallsAdvice::"+zd.qualifiedMethodName(d);var f=zd.wrap(d,h);f.originalFunction=d;f.methodName="$logCallsWrapper::"+zd.qualifiedMethodName(d);return f}function Mo(d,
c){return zd.wrap(d,function(h){var f=Array.prototype.slice.call(arguments);f.shift();c.push(f);f=h.apply(d,f);c.pop();return f})}function Hn(){try{throw Error();}catch(d){return String(d.stack).split(/\n/).slice(2).map(function(c){return c.replace(/^\s*at\s*([^\s]+).*/,"$1")}).join("\n")}}function en(d){if(d&&Array.isArray(d))return"["+d.map(en)+"]";if("string"!==typeof d)return String(d);d=String(d);d=d.replace(/\n/g,"\\n\\\n");d=d.replace(/(")/g,"\\$1");return'"'+d+'"'}function Uk(d){return Array.isArray(d)}
function Fj(d){return d&&1==d.nodeType}function ro(d){return d instanceof Function}function gn(d){return"boolean"==typeof d}function vm(d){return"string"==typeof d}function No(d){return"number"==typeof d}function fn(d){return"undefined"==typeof d}function em(d){return d instanceof RegExp}function Lk(d){return"object"==typeof d}function Lm(d){if(!d)return!0;switch(typeof d){case "string":case "number":case "boolean":return!0}return!1}function ol(d){for(var c in d)if(d.hasOwnProperty(c))return!1;return!0}
function wg(d,c){if(d===c)return!0;if(!d||!c)return d==c;if(Array.isArray(d))return ue.arrayDeepEquals(d,c);switch(d.constructor){case String:case Date:case Boolean:case Number:return d==c}if("function"===typeof d.isEqualNode)return d.isEqualNode(c);if("function"===typeof d.equals)return d.equals(c);var h=[],f;for(f in d)if(h.push(f),"function"!==typeof d[f]&&!wg(d[f],c[f]))return!1;for(f in c)if(-1===h.indexOf(f)&&"function"!==typeof c[f]&&!wg(c[f],d[f]))return!1;return!0}function hn(d){return d?
Object.keys(d).map(function(c){return d[c]}):[]}function In(d,c){for(var h={},f=0;f<c.length;f++)h[c[f]]=d[c[f]];return h}function Sl(d,c){d=d||{};d=ue.getOwnPropertyDescriptors(d);for(var h=0;h<c.length;h++)c[h]in d&&delete d[c[h]];return Object.defineProperties({},d)}function ig(d,c,h,f){c=ue.functionFromString(c);return ue.asScriptOf(c,d,h,f)}function Mm(d,c){for(var h=null,f=1;f<arguments.length;f++)if("string"==typeof arguments[f])h=arguments[f],d.categories||(d.categories={}),d.categories[h]||
(d.categories[h]=[]),h=d.categories[h];else{c=arguments[f];for(var k in c){var n=c.__lookupGetter__(k),b=c.__lookupSetter__(k);n&&d.__defineGetter__(k,n);b&&d.__defineSetter__(k,b);n||b||(n=c[k],d[k]=n,h&&h.push(k),"function"===typeof n&&(n.displayName||(n.displayName=k),"undefined"!==typeof lively&&lively.Module&&lively.Module.current&&(n.sourceModule=lively.Module.current())))}}return d}function nl(d){if(ue.isPrimitive(d))return d;if(Array.isArray(d))return Array.prototype.slice.call(d);var c={},
h;for(h in d)d.hasOwnProperty(h)&&(c[h]=d[h]);return c}function ek(d,c,h){for(var f={},k=0;k<c.length;k++)c[k]in d&&(f[c[k]]=h?h(c[k],d[c[k]]):d[c[k]]);return f}function Gi(d,c,h){c=c||{};h=h||0;if(c.customPrinter){var f=c._ignoreSignal||(c._ignoreSignal={}),k=c.customPrinter(d,f,function(r){return Gi(r,c,h+1)});if(k!==f)return k}if(!d)return ue.print(d);if("function"===typeof d)return c.printFunctionSource?String(d):"function"+(d.name?" "+d.name:"")+"("+ue.argumentNames(d).join(",")+") {/*...*/}";
switch(d.constructor){case String:case Boolean:case RegExp:case Number:return ue.print(d)}if("function"===typeof d.serializeExpr)return d.serializeExpr();var n=d&&Array.isArray(d);f=n?"[":"{";k=n?"]":"}";if(c.maxDepth&&h>=c.maxDepth)return f+"/*...*/"+k;var b=[];if(n)b=d.map(function(r){return Gi(r,c,h+1)});else for(var e=Object.keys(d).sort(function(r,v){var y="function"===typeof d[r];return y===("function"===typeof d[v])?r<v?-1:r>v?1:0:y?1:-1}),m=0;m<e.length;m++){if(m>(c.maxNumberOfKeys||Infinity)){e=
e.length-m;b.push("..."+e+" hidden "+(1<e?"entries":"entry")+"...");break}var a=e[m];n&&Gi(d[a],c,h+1);var g=Gi(d[a],c,h+1);b.push((c.escapeKeys?JSON.stringify(a):a)+": "+g)}if(0===b.length)return f+k;e=b.join(", ");m=(!n||c.newLineInArrays)&&(!c.minLengthForNewLine||e.length>=c.minLengthForNewLine);var l=ue.indent("",c.indent||"  ",h);a=ue.indent("",c.indent||"  ",h+1);g=m&&!n?"\n"+a:"";n=m&&!n?"\n"+l:"";m&&(e=b.join(","+(m?"\n"+a:"")));return f+g+e+n+k}function wm(d){return 1<arguments.length?wm(Array.prototype.slice.call(arguments)):
Array.isArray(d[0])?Array.prototype.concat.apply([],d):d.reduce(function(c,h){for(var f in h)h.hasOwnProperty(f)&&(c[f]=h[f]);return c},{})}function Mk(d,c){if(!d)return c;if(!c)return d;if(Array.isArray(d)){if(!Array.isArray(c))return c;var h=d.map(function(f,k){return Mk(f,c[k])});c.length>d.length&&(h=h.concat(c.slice(d.length)));return h}return"object"!==typeof d||"object"!==typeof c?c:Object.keys(d).concat(Object.keys(c)).reduce(function(f,k){f[k]=d[k]?c[k]?"object"!==typeof d[k]||"object"!==
typeof c[k]?c[k]:Mk(d[k],c[k]):d[k]:c[k];return f},{})}function $e(d,c){c=[];for(var h in d){var f=d[h],k=f.hasOwnProperty("before")?f.before:f.before=[];f=f.hasOwnProperty("after")?f.after:f.after=[];for(var n=k.length;n--;){var b=k[n],e=d[b];e?(e.hasOwnProperty("after")||(e.after=[]),e.after.push(h)):(console.warn("[initializeProperties] "+this+" sortProperties: Property "+(h+" requires to be initialized before "+b+" but that property cannot be found.")),k.splice(n,1))}for(k=f.length;k--;)n=f[k],
d[n]||(console.warn("[initializeProperties] "+this+" sortProperties: Property "+(h+" requires to be initialized after "+n+" but that property cannot be found.")),f.splice(k,1));c.push(h)}h=[];f=[];for(k=c.length+1;c.length;){if(k===c.length)throw Error("Circular dependencies in handler order, could not resolve properties "+c.map(function(m){var a=d[m].before,g=d[m].after;if(!(a&&a.length||g&&g.length))return"";m+="\n";a&&a.length&&(m+="  - before "+a.join(",")+"\n");g&&g.length&&(m+="  - after "+
g.join(",")+"\n");return m}).join(""));k=c.length;n=[];for(b=c.length;b--;)e=c[b],ue.isSubset(d[e].after,f)&&(c.splice(b,1),f.push(e),n.push(e));h.push(n)}return ue.flatten(h,1)}function fm(d){return Object.create(d)}function Oo(d,c){for(var h=[];d;)d.hasOwnProperty(c)&&h.unshift(d[c]),d=Object.getPrototypeOf(d);return h}function Kn(d,c){return ue.merge(ue.valuesInPropertyHierarchy(d,c))}function Tl(d){if(!d||"object"!==typeof d||d instanceof RegExp)return d;var c=Array.isArray(d)?Array(d.length):
{},h;for(h in d)d.hasOwnProperty(h)&&(c[h]=Tl(d[h]));return c}function mp(d){return null===d?"null":"undefined"===typeof d?"undefined":d.constructor.name}function so(d){function c(f,k,n,b){if(f.constructor.name===k){h+=n;if(f.length||Object.keys(f).length)h+="...";h+=b}}if(!ue.isMutableType(d))return ue.safeToString(d);if("Object"!==d.constructor.name&&!Array.isArray(d)&&d.constructor.name)return d.constructor.name?d.constructor.name:Object.prototype.toString.call(d).split(" ")[1].split("]")[0];var h=
"";c(d,"Object","{","}");c(d,"Array","[","]");return h}function np(d){return-1===["null","undefined","Boolean","Number","String"].indexOf(ue.typeStringOf(d))}function Fh(d){try{return(d?d.toString():String(d)).replace("\n","")}catch(c){return"<error printing object>"}}function op(d){switch(typeof d){case "string":return new String(d);case "boolean":return new Boolean(d);case "number":return new Number(d);default:return d}}function jn(d,c){c=void 0===c?"_":c;var h=1;do var f=c+"-"+h++;while(f in d);
return f}function xm(){return Wc.formatFromArray(Array.prototype.slice.call(arguments))}function um(d){function c(r,v){return""+r}function h(r,v){return r.toString()}function f(r,v){return Wc.inspectObject(r)}var k=d.shift();k||console.log("Error in Strings>>formatFromArray, first arg is undefined");var n={s:c,d:h,i:h,f:function(r,v,y){return-1<y?r.toFixed(y):r.toString()},o:f},b=/((^%|[^\\]%)(\d+)?(\.)([a-zA-Z]))|((^%|[^\\]%)([a-zA-Z]))/;k=function(r){for(var v=[],y=b.exec(r);y;y=b.exec(r)){var A=
y[8]||y[5];A=A in n?n[A]:f;var E=y[3]?parseInt(y[3]):"."==y[4]?-1:0;v.push(r.substr(0,"%"==y[0][0]?y.index:y.index+1));v.push({appender:A,precision:E});r=r.substr(y.index+y[0].length)}r&&v.push(r.toString());return v}(k);for(var e="",m=0,a=0;a<k.length;++a){var g=k[a];if(g&&"object"==typeof g){var l=d[m++];e+=(g.appender||c)(l,e,g.precision)}else e+=""+g}return e}function cl(d,c,h){if(!h||0>=h)return d;for(var f="";0<h;)h--,f+=c;return Wc.lines(d).map(function(k){return f+k}).join("\n")}function yl(d,
c){c||(c="  ");return Wc.min(d.match(new RegExp("^("+c+")*","gm")).map(function(h){return Math.floor(h.length/c.length)}))}function zl(d,c,h){c||(c="  ");h||(h=0);var f=Wc.minIndent(d,c);if(f===h)return d;if(f<h)return Wc.indent(d,c,h-f);var k=c.repeat(f-h);return Wc.lines(d).map(function(n){return n.slice(k.length)}).join("\n")}function kn(d){return'"'+d.replace(/"/g,'\\"')+'"'}function ra(d){if(d&&Array.isArray(d))return"["+d.map(ra)+"]";if("string"!==typeof d)return String(d);d=String(d);d=d.replace(/\n/g,
"\\n\\\n");d=d.replace(/(")/g,"\\$1");return'"'+d+'"'}function La(d,c){c=c||0;return d.reduce(function(h,f){return h+(Array.isArray(f)?La(f,c+1):Wc.indent(f+"\n","  ",c))},"")}function ob(d,c,h){return h?" ".repeat(c)+d:d+" ".repeat(c)}function Oa(d,c){function h(e){return n?!1:b?!0:c&&Array.isArray(c.align)&&"right"===c.align[e]}var f=[],k=c&&c.separator||" ",n=!c||!c.align||"left"===c.align,b=c&&"right"===c.align;d.forEach(function(e){e.forEach(function(m,a){void 0===f[a]&&(f[a]=0);f[a]=Math.max(f[a],
String(m).length)})});return d.map(function(e){return e.map(function(m,a){m=String(m);return Wc.pad(m,f[a]-m.length,h(a))}).join(k)}).join("\n")}function mc(d,c,h,f){function k(b,e,m){n[e]=f.repeat(b)+c(m,b);m=h(m,b);var a=e+1;if(!m||!m.length)return a;var g=a,l=m.length-1;m.forEach(function(r,v){a=k(b+1,a,r);r=l===v;var y=n[g].split(""),A=b*f.length+f.length;for(v=b*f.length+1;v<A;v++)y[v]="-";r&&(y[b*f.length]="\\");n[g]=y.join("");r||n.slice(g,a).forEach(function(E,F){E=E.split("");E[b*f.length]=
"|";n[g+F]=E.join("")});g=a});return a}var n=[];f=f||"  ";k(0,0,d);return n.join("\n")}function fc(d){return d.split("")}function zc(d){return d.split(/\n\r?/)}function Kc(d,c){var h=c?c.sep:"\n\n";return c&&c.keepEmptyLines?d.split("\n").concat("").reduce(function(f,k){var n=f[0];f=f[1];/^\s*$/.test(f)===/^\s*$/.test(k)?f+="\n"+k:(f.length&&n.push(f),f=k);return[n,f]},[[],""])[0]:d.split(new RegExp(h+"+"))}function Nd(d){return Wc.lines(d).compact()}function Df(d,c){return d.split(c||/\s+/).filter(function(h){return!/^\s*$/.test(h)})}
function Nf(d,c){c=c||{};var h=c.cellSplitter||/\s+/,f=/^\s*$/;c=c.hasOwnProperty("convertTypes")?!!c.convertTypes:!0;d=Wc.lines(d);for(var k=[],n=0;n<d.length;n++){var b=Wc.tokens(d[n],h);c&&(b=b.map(function(e){if(e.match(f))return e;var m=Number(e);if(!isNaN(m))return m;m=new Date(e);return isNaN(+m)?e.trim():m}));0<b.length&&k.push(b)}return k}function ld(d){if("undefined"===typeof document)throw Error("Cannot unescapeCharacterEntities");var c=document.createElement("div");c.innerHTML=d;return c.textContent}
function vg(d,c){return(d=d.trim().match(/([^?#]*)(#.*)?$/))?d[1].split(c||"&").inject({},function(h,f){if((f=f.split("="))[0]){var k=decodeURIComponent(f.shift());f=1<f.length?f.join("="):f[0];void 0!=f&&(f=decodeURIComponent(f));k in h?(Array.isArray(h[k])||(h[k]=[h[k]]),h[k].push(f)):h[k]=f}return h}):{}}function rg(d){return btoa(encodeURIComponent(d).replace(/%([0-9A-F]{2})/g,function(c,h){return String.fromCharCode("0x"+h)}))}function Pj(d){return decodeURIComponent(atob(d).split("").map(function(c){return"%"+
("00"+c.charCodeAt(0).toString(16)).slice(-2)}).join(""))}function bl(d){var c=d.match(Wc.urlStartRe),h=(c=c?c[0]:null)?d.slice(c.length):d;do d=h,h=d.replace(Wc.pathDoubleDotRe,"");while(h!=d);h=h.replace(Wc.pathDoubleSlashRe,"$1/");h=h.replace(Wc.pathDotRe,"/");c&&(h=c+h);return h}function lp(){return Wc.normalizePath(Array.prototype.slice.call(arguments).reduce(function(d,c){return"string"===typeof c?d.replace(/\/*$/,"")+"/"+c.replace(/^\/*/,""):d}))}function Km(){return Wc.newUUIDTemplate.replace(Wc.newUUIDRe,
Wc.newUUIDReplacer).toUpperCase()}function Er(d,c){return"data:"+(c||"text/plain")+";base64,"+Wc.base64EncodeUnicode(d)}function Ms(d){var c=0,h=d.length;if(0==h)return c;for(var f=0;f<h;f++){var k=d.charCodeAt(f);c=(c<<5)-c+k;c&=c}return c}function Jq(d){function c(m,a,g,l,r,v){a=b(b(a,m),b(l,v));return b(a<<r|a>>>32-r,g)}function h(m,a,g,l,r,v,y){return c(a&g|~a&l,m,a,r,v,y)}function f(m,a,g,l,r,v,y){return c(a&l|g&~l,m,a,r,v,y)}function k(m,a,g,l,r,v,y){return c(g^(a|~l),m,a,r,v,y)}function n(m,
a){var g=m[0],l=m[1],r=m[2],v=m[3];g=h(g,l,r,v,a[0],7,-680876936);v=h(v,g,l,r,a[1],12,-389564586);r=h(r,v,g,l,a[2],17,606105819);l=h(l,r,v,g,a[3],22,-1044525330);g=h(g,l,r,v,a[4],7,-176418897);v=h(v,g,l,r,a[5],12,1200080426);r=h(r,v,g,l,a[6],17,-1473231341);l=h(l,r,v,g,a[7],22,-45705983);g=h(g,l,r,v,a[8],7,1770035416);v=h(v,g,l,r,a[9],12,-1958414417);r=h(r,v,g,l,a[10],17,-42063);l=h(l,r,v,g,a[11],22,-1990404162);g=h(g,l,r,v,a[12],7,1804603682);v=h(v,g,l,r,a[13],12,-40341101);r=h(r,v,g,l,a[14],17,
-1502002290);l=h(l,r,v,g,a[15],22,1236535329);g=f(g,l,r,v,a[1],5,-165796510);v=f(v,g,l,r,a[6],9,-1069501632);r=f(r,v,g,l,a[11],14,643717713);l=f(l,r,v,g,a[0],20,-373897302);g=f(g,l,r,v,a[5],5,-701558691);v=f(v,g,l,r,a[10],9,38016083);r=f(r,v,g,l,a[15],14,-660478335);l=f(l,r,v,g,a[4],20,-405537848);g=f(g,l,r,v,a[9],5,568446438);v=f(v,g,l,r,a[14],9,-1019803690);r=f(r,v,g,l,a[3],14,-187363961);l=f(l,r,v,g,a[8],20,1163531501);g=f(g,l,r,v,a[13],5,-1444681467);v=f(v,g,l,r,a[2],9,-51403784);r=f(r,v,g,l,
a[7],14,1735328473);l=f(l,r,v,g,a[12],20,-1926607734);g=c(l^r^v,g,l,a[5],4,-378558);v=c(g^l^r,v,g,a[8],11,-2022574463);r=c(v^g^l,r,v,a[11],16,1839030562);l=c(r^v^g,l,r,a[14],23,-35309556);g=c(l^r^v,g,l,a[1],4,-1530992060);v=c(g^l^r,v,g,a[4],11,1272893353);r=c(v^g^l,r,v,a[7],16,-155497632);l=c(r^v^g,l,r,a[10],23,-1094730640);g=c(l^r^v,g,l,a[13],4,681279174);v=c(g^l^r,v,g,a[0],11,-358537222);r=c(v^g^l,r,v,a[3],16,-722521979);l=c(r^v^g,l,r,a[6],23,76029189);g=c(l^r^v,g,l,a[9],4,-640364487);v=c(g^l^r,
v,g,a[12],11,-421815835);r=c(v^g^l,r,v,a[15],16,530742520);l=c(r^v^g,l,r,a[2],23,-995338651);g=k(g,l,r,v,a[0],6,-198630844);v=k(v,g,l,r,a[7],10,1126891415);r=k(r,v,g,l,a[14],15,-1416354905);l=k(l,r,v,g,a[5],21,-57434055);g=k(g,l,r,v,a[12],6,1700485571);v=k(v,g,l,r,a[3],10,-1894986606);r=k(r,v,g,l,a[10],15,-1051523);l=k(l,r,v,g,a[1],21,-2054922799);g=k(g,l,r,v,a[8],6,1873313359);v=k(v,g,l,r,a[15],10,-30611744);r=k(r,v,g,l,a[6],15,-1560198380);l=k(l,r,v,g,a[13],21,1309151649);g=k(g,l,r,v,a[4],6,-145523070);
v=k(v,g,l,r,a[11],10,-1120210379);r=k(r,v,g,l,a[2],15,718787259);l=k(l,r,v,g,a[9],21,-343485551);m[0]=b(g,m[0]);m[1]=b(l,m[1]);m[2]=b(r,m[2]);m[3]=b(v,m[3])}var b=function(m,a){var g=(m&65535)+(a&65535);return(m>>16)+(a>>16)+(g>>16)<<16|g&65535},e="0123456789abcdef".split("");return function(m){for(var a=m.length,g=0;g<a;g++){for(var l=g,r=m[g],v="",y=0;4>y;y++)v+=e[r>>8*y+4&15]+e[r>>8*y&15];m[l]=v}return m.join("")}(function(m){var a=m.length,g=[1732584193,-271733879,-1732584194,271733878],l;for(l=
64;l<=a;l+=64){var r,v=m.substring(l-64,l),y=[];for(r=0;64>r;r+=4)y[r>>2]=v.charCodeAt(r)+(v.charCodeAt(r+1)<<8)+(v.charCodeAt(r+2)<<16)+(v.charCodeAt(r+3)<<24);n(g,y)}m=m.substring(l-64);r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];v=m.length;for(l=0;l<v;l++)r[l>>2]|=m.charCodeAt(l)<<(l%4<<3);r[l>>2]|=128<<(l%4<<3);if(55<l)for(n(g,r),l=16;l--;)r[l]=0;r[14]=8*a;n(g,r);return g}(d))}function pp(d,c){var h=[];d.replace(c,function(f,k){h.push({match:f,start:k,end:k+f.length})});return h}function Kq(d,c,h){function f(b,
e){if(e.constructor!==RegExp){if(0===b.indexOf(e))return{match:e,rest:b.slice(e.length)};for(var m=0;m<e.length;m++)if(e[m]!=b[m])return{match:null,pos:m};return{match:null}}return(e=Wc.reMatches(b,e))&&e.length&&0===e[0].start?{match:e[0].match,rest:b.slice(e[0].end)}:{match:null}}function k(b){var e=Wc.reMatches(b,/__\//g),m=Wc.reMatches(b,/\/__/g);if(e.length!==m.length)throw Error("pattern invalid: "+b+" cannot be split into __/.../__ embedded RegExps\nstarts: "+JSON.stringify(e)+"\nvs ends:\n"+
JSON.stringify(m));var a=0;return e.reduce(function(g,l,r){var v=m[r];r=g.pop();l=l.start-a;v=v.end-a;var y;var A=y=3;r=[r.slice(0,l),r.slice(l+y,v-A),r.slice(v)];r[0].length&&(g.push(r[0]),a+=r[0].length);try{r[1].length&&(g.push(new RegExp(r[1])),a+=r[1].length+3+3)}catch(E){throw Error("Cannot create pattern re from: "+Wc.inspectObject(r));}r[2].length&&g.push(r[2]);return g},[b])}function n(b,e){e=k(e);a:{for(var m=b,a=0,g=0;g<e.length;g++){var l=e[g];m=f(m,l);if(!m.match){e={matched:!1,pos:a+
(m.pos||0),pattern:l};break a}a+=m.match.length;m=m.rest}e=m.length?{matched:!1,pos:a}:{matched:!0}}if(e.matched)return e;e.error=b.slice(0,e.pos)+"<--UNMATCHED--\x3e"+b.slice(e.pos);return e}h=h||{};h.normalizeWhiteSpace&&(d=d.replace(/\s+/g," "));h.ignoreIndent&&(d=d.replace(/^\s+/gm,""),c=c.replace(/^\s+/gm,""));return d==c?{matched:!0}:n(d,c)}function Al(d,c,h){d=d.slice(c);return"string"===typeof h?(d=d.indexOf(h),-1===d?null:d+c):h.constructor===RegExp?(c=Wc.reMatches(d,h),c[0]?c[0].start:null):
null}function Fr(d,c,h){d=d.slice(0,c);return"string"===typeof h?(d=d.lastIndexOf(h),-1===d?null:d):h.constructor===RegExp?(d=Wc.reMatches(d,h),Wc.last(d)?Wc.last(d).start:null):null}function gm(d){var c=Wc.lineRanges(d);return function(h){for(var f=0;f<c.length;f++){var k=c[f];if(h>=k[0]&&h<k[1])return f}return-1}}function sf(d){return function(c){return Wc.lineRanges(d)[c]}}function Gr(d){for(var c=0,h=Wc.lines(d),f=[],k=0;k<h.length;k++)d=c+h[k].length+1,f.push([c,d]),c=d;return f}function Bl(d,
c){var h=d.length;if(0===h)return-1;for(var f=0;;){var k=f+Math.floor((h-f)/2),n=$jscomp.makeIterator(d[k]),b=n.next().value;n=n.next().value;if(c<b){if(0===k)break;h=k}else if(c>n)f=k;else return k}return-1}function Cl(d,c,h){h=void 0===h?0:h;d=this.substring(h||0).search(c);return 0<=d?d+(h||0):d}function Lq(d,c,h){h=void 0===h?d.length:h;c=c.global?c:new RegExp(c.source,"g"+(c.ignoreCase?"i":"")+(c.multiLine?"m":""));d=this.substring(0,h+1);h=-1;for(var f=0,k;null!=(k=c.exec(d));)h=k.index,c.lastIndex=
++f;return h}function Xp(d,c){return"undefined"===typeof JsDiff?"diff not supported":JsDiff.convertChangesToXML(JsDiff.diffWordsWithSpace(d,c))}function Yp(d){return""==d}function dl(d){d=d[0];return"A"===d||"E"===d||"I"===d||"O"===d||"U"===d||"a"===d||"e"===d||"i"===d||"o"===d||"u"===d||!1}function qp(d,c){var h=parseFloat(d);return isNaN(h)?d:h.toFixed(c)}function Mq(d){return d.length?d.charAt(0).toUpperCase()+d.slice(1):d}function Nq(d){return d.split(" ").map(Wc.capitalize).join("")}function rp(d){var c=
d.split("-"),h=c.length;if(1==h)return c[0];d="-"==d.charAt(0)?c[0].charAt(0).toUpperCase()+c[0].substring(1):c[0];for(var f=1;f<h;f++)d+=c[f].charAt(0).toUpperCase()+c[f].substring(1);return d}function Zp(d,c,h){c=c||30;h=void 0===h?"...":h;return d.length>c?d.slice(0,c-h.length)+h:String(d)}function ne(d,c,h){c=c||30;return d.length>c?(void 0===h?"...":h)+d.slice(-c):String(d)}function Dl(d){return d.replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")}function Ns(d){return d.slice(0,
d.length-1)+String.fromCharCode(d.charCodeAt(d.length-1)+1)}function Nk(d){return d.charCodeAt(0)-48}function Oq(d,c){for(var h=[],f=0;f<d.length;f++){h[f]=[];for(var k=0;k<c.length;k++)h[f][k]=0}for(f=0;f<d.length;f++)h[f][0]=0;for(f=1;f<d.length;f++)for(k=1;k<c.length;k++)h[f][k]=d[f-1]==c[k-1]?h[f-1][k-1]+1:0;for(var n=k=f=-1,b=0;b<d.length;b++)for(var e=0;e<c.length;e++){var m=h[b][e];f<m&&(f=m,k=b-m,n=e-m)}return{length:f,indexA:k,indexB:n,string:0<f?d.slice(k,k+f):""}}function Os(d,c){return"insert"===
c.action?d.slice(0,c.start)+c.lines.join("\n")+d.slice(c.start):"remove"===c.action?d.slice(0,c.start)+d.slice(c.end):d}function Ps(d,c){return c.reduce(function(h,f){return Wc.applyChange(d,f)},d)}function to(d,c){if(0===d.length)return c.length;if(0===c.length)return d.length;var h;if(d.length>c.length){var f=d;d=c;c=f}var k=Array(d.length+1);for(f=0;f<=d.length;f++)k[f]=f;for(f=1;f<=c.length;f++){var n=f;for(h=1;h<=d.length;h++){var b=c[f-1]===d[h-1]?k[h-1]:Math.min(k[h-1]+1,Math.min(n+1,k[h]+
1));k[h-1]=n;n=b}k[d.length]=n}return k[d.length]}function Hr(d,c){d=d||0;return Math.round(Math.random()*((c||100)-d)+d)}function Ir(d){return Math.floor(Math.random()*d)}function Pq(d){if(1E3>d)return String(Math.round(100*d)/100)+"B";d/=1024;return 1E3>d?String(Math.round(100*d)/100)+"KB":String(Math.round(d/1024*100)/100)+"MB"}function Qs(d){return d.reduce(function(c,h){return c+h},0)/d.length}function Po(d,c,h){return(d-c)/h+c}function hu(d){var c=d.sort(function(h,f){return f-h});d=d.length;
return 0===d%2?.5*(c[d/2-1]+c[d/2]):c[(d-1)/2]}function Jg(d,c,h,f){f=f||0;if(c<h)var k=h;else k=c,c=h;return 0<=k-d+f&&0>=c-d-f}function Pi(d,c,h){return Math.max(c,Math.min(h,d))}function R(d){return d.sort(function(c,h){return c-h})}function ia(d,c){c=c||"px";if((d=d.match(/([0-9\.]+)\s*(.*)/))&&d[1]){var h=parseFloat(d[1]);return Qg.convertLength(h,d[2],c)}}function Ea(d,c){c=1/c;return Math.round(d*c)/c}function sb(d,c,h,f){var k=Qg.roundTo(d,h);return Math.abs(d-k)<c/2?k:f?d:k+(d-(d<k?k-c/2:
k+c/2))*h/(h-c)}function Zb(d){return 180*d/Math.PI%360}function Vc(d){return d/180*Math.PI}function Yd(d,c,h){c=void 0===c?5:c;h=void 0===h?3E4:h;d=Math.min(h,c*Math.pow(2,d));return Math.min(h,c+Math.random()*(3*(d/2+Math.round(d/2*Math.random()))-c))}function ce(d,c,h){return c+d*(h-c)}function ve(d,c){var h=[],f;for(f in d)(d.__lookupGetter__(f)||"function"!==typeof d[f])&&(c?c(f,d):1)&&h.push(f);return h}function wf(d,c){return Object.getOwnPropertyNames(d).reduce(function(h,f){(c?c(d,f):1)&&
h.push(f);return h},[])}function lg(d){var c=[],h;for(h in d)d.hasOwnProperty(h)&&(d.__lookupGetter__(h)||"function"!==d[h])&&c.push(h);return c}function vi(d,c,h){var f=[],k;for(k in d)if(d.hasOwnProperty(k)){var n=d[k];"function"!==n&&f.push(c.call(h||this,k,n))}return f}function Ii(d,c){for(var h in d)if(d[h]===c)return h}function Ok(d){var c=[],h;for(h in d)c.push(d[h]);return c}function Qo(d){var c=[],h;for(h in d)d.hasOwnProperty(h)&&c.push(d[h]);return c}function Ro(d,c){for(var h in d)if(c(d,
h))return!0;return!1}function Mn(d,c){var h=[],f;for(f in d)(c?c(d,f):1)&&h.push(f);return h}function Nn(d){return Object.keys(d).sort().join("").hashCode()}function $p(d,c,h){return aq.dateFormat(d,c,h)}function ln(d,c){return c&&c instanceof Date&&c.getTime()===d.getTime()}function iu(d,c,h){h=void 0===h?{}:h;if(!(c instanceof Date)||c<d)return"";if(c===d)return"now";var f="min",k="sec",n="hour",b="day",e=Math.round((c-d)/1E3);d=e%60;c=Math.floor(e/60)%60;var m=Math.floor(e/60/60)%24;e=Math.floor(e/
60/60/24);var a=[];0<e&&(a.push(e),1<e&&(b+="s"),a.push(b));if(h.forceHours||0<m&&2>e)a.push(m),1<m&&(n+="s"),a.push(n);if(h.forceMinutes||0<c&&3>m&&0===e)a.push(c),1<c&&(f+="s"),a.push(f);if(h.forceSeconds||0<d&&3>c&&0===m&&0===e)a.push(d),1<d&&(k+="s"),a.push(k);return a.join(" ")}function zh(d){return"function"===typeof d?zh.convertCallbackFun(d):Promise.resolve(d)}function ju(d,c){return new Promise(function(h){return setTimeout(h,d,c)})}function ku(d,c){return new Promise(function(h,f){return setTimeout(f,
d,c)})}function Rv(d,c){return new Promise(function(h,f){var k=!1;setTimeout(function(){return!k&&(k=!0)&&f(Error("Promise timed out"))},d);c.then(function(n){return!k&&(k=!0)&&h(n)},function(n){return!k&&(k=!0)&&f(n)})})}function lu(d){var c=Date.now();return Promise.resolve(d).then(function(){return Date.now()-c})}function Rs(d,c,h){"function"===typeof d&&(c=d,d=void 0);return new Promise(function(f,k){var n=!1,b=!1,e=void 0,m=void 0,a=setInterval(function(){if(n)return clearInterval(a);try{m=c()}catch(g){e=
g}if(m||e||b)return n=!0,clearInterval(a),e?k(e):b?"undefined"===typeof h?k(Error("timeout")):f(h):f(m)},10);"number"===typeof d&&setTimeout(function(){return b=!0},d)})}function Qq(){var d,c,h=new Promise(function(f,k){d=f;c=k});return{resolve:d,reject:c,promise:h}}function Sv(d){return function(){var c=Array.from(arguments),h=this;return new Promise(function(f,k){c.push(function(n,b){return n?k(n):f(b)});d.apply(h,c)})}}function Ss(d){return function(){var c=Array.from(arguments),h=this;return new Promise(function(f,
k){c.push(function(){var n=Array.from(arguments),b=n.shift();return b?k(b):f(n)});d.apply(h,c)})}}function ox(d,c,h,f,k){var n=d.shift();if(n)try{Promise.resolve(n(c,h)).then(function(b){return ox(d,b,h,f,k)}).catch(function(b){k(b)})}catch(b){k(b)}else f(c)}function Rq(d){return new Promise(function(c,h){return ii._chainResolveNext(d.slice(),void 0,{},c,h)})}function px(d,c){return Promise.resolve(d).then(function(h){try{c()}catch(f){console.error("Error in promise finally: "+f.stack||f)}return h}).catch(function(h){try{c()}catch(f){console.error("Error in promise finally: "+
f.stack||f)}throw h;})}function mu(d,c){function h(){c--;try{var g=b++;d[g]().then(function(l){c++;k[g]=l;0===--e?m():f()}).catch(function(l){return a(l)})}catch(l){a(l)}}function f(){for(;!n&&0<e&&b<d.length&&0<c;)h()}c=void 0===c?Infinity:c;if(!d.length)return Promise.resolve([]);var k=[],n=null,b=0,e=d.length,m,a;return new Promise(function(g,l){m=function(){return g(k)};a=function(r){return l(n=r)};f()})}function Ah(d,c){if(d instanceof Ah)return d;if(!(this instanceof Ah))return new Ah(d,c);
this.setSplitter(c||".");this.fromPath(d)}function nu(d){var c={},h;for(h in d)c[h]=d[h].slice();return c}function qx(d,c){var h={},f;for(f in d)if(!c.includes(f)){h[f]=[];for(var k=d[f],n=0;n<k.length;n++){var b=k[n];c.includes(b)||h[f].push(b)}}return h}function Tv(d,c,h,f){h=void 0===h?[]:h;f=void 0===f?Infinity:f;if(!Array.isArray(d[c]))return[];for(var k=[],n={},b={},e=0;e<h.length;e++)b[h[e]]=!0;c=d[c].slice();e={};for(var m=c.length;m--;){var a=c[m];a in b?c.splice(m,1):e[a]=1}if(h)for(;0!==
c.length;)for(h=0;h<c.length;h++)if(a=c.shift(),!(a in n||a in b)&&(m=e[a]||0,!(m>f)&&(k.push(a),n[a]=!0,a=d[a])))for(var g=0;g<a.length;g++){var l=a[g];l in n||l in e||(e[l]=m+1,c.push(l))}return k}function ou(d,c,h,f){f=void 0===f?Infinity:f;h&&(d=Hj.without(d,h));c=[c];h=0;for(var k={};c.length&&h++<f;){var n=c.shift();if(!k[n]){var b=d[n]||[];k[n]=b;c.push.apply(c,$jscomp.arrayFromIterable(b))}}return k}function rx(d){var c={},h;for(h in d)for(var f=d[h],k=0;k<f.length;k++){var n=f[k];c[n]?c[n].push(h):
c[n]=[h]}return c}function Uv(d,c){c=[];var h={},f={},k={};for(g in d){h.hasOwnProperty(g)||(h[g]=!0,c.push(g));var n=d[g],b={};if(n){f[g]=[];n=$jscomp.makeIterator(n);for(var e=n.next();!e.done;e=n.next())if(e=e.value,!b.hasOwnProperty(e)&&g!==e){var m=k[e]||(k[e]=[]);m.includes(g)||m.push(g);b[e]=!0;f[g].push(e);h.hasOwnProperty(e)||(h[e]=!0,c.push(e))}}}for(d=[];c.length;){h=Infinity;var a=[];b=[];n=[];for(e=0;e<c.length;e++){var g=c[e];m=f[g]||[];m.length>h||(m.length!==h||m.some(function(l){return a.includes(l)})?
(h=m.length,a=[g],b=[e],n=(k[g]||[]).slice()):(a.push(g),b.push(e),n.push.apply(n,$jscomp.arrayFromIterable(k[g]||[]))))}for(e=b.length;e--;)g=c[b[e]],k[g]=[],c.splice(b[e],1);h=$jscomp.makeIterator(n);for(g=h.next();!g.done;g=h.next())g=g.value,f[g]=f[g].filter(function(l){return!a.includes(l)});d.push(a)}return d}function Ts(d,c,h,f,k,n){function b(a){-1<e.indexOf(a)||(f=d.call(n,f,a,m++),e=e.concat([a]),Hj.withoutAll(c[a]||[],e).forEach(function(g){return b(g)}))}var e=k||[],m=0;b(h);return f}
function bq(d){d=void 0===d?10:d;for(var c={},h=Hj.range(1,d).map(String),f=0;f<h.length;f++){var k=Math.floor(Math.random()*d);c[h[f]]=Hj.shuffle(h).slice(0,k)}return c}function pu(d){return Array.isArray(d)&&2<=d.length&&d[0]<=d[1]}function qu(d){return d.sort(wi.compare)}function sp(d,c){return d[0]<c[0]?d[1]<c[0]?-3:d[1]===c[0]?-2:-1:d[0]===c[0]?d[1]===c[1]?0:d[1]<c[1]?-1:1:-1*sp(c,d)}function cq(d,c,h){switch(this.compare(d,c)){case -3:case 3:return null;case 0:return h&&h(d,c,d),d;case 2:case 1:var f=
d;d=c;c=f;case -2:case -1:return f=[d[0],Math.max(d[1],c[1])],h&&h(d,c,f),f;default:throw Error("Interval compare failed");}}function Jr(d,c){for(var h=[],f=d.length;0<f;){var k=d.shift();f--;for(var n=0;n<f;n++){var b=wi.coalesce(k,d[n],c);b&&(k=b,d.splice(n,1),f--,n--)}h.push(k)}return this.sort(h)}function ru(d,c,h){for(var f=[];0<d.length;){var k=d.shift(),n=c.map(function(b){b=wi.compare(k,b);return-1===b||0===b||1===b});f.push(h(k,n[0]));f.push(k)}return f}function su(d,c,h,f,k,n){n=n||wi.GLOBAL;
h=this.sort(h);for(var b,e=[];b=h.shift();)if(!(b[1]<d)){b[0]<d&&(b=Array.prototype.slice.call(b),b[0]=d);var m=c<b[0]?c:b[0];d<m&&e.push(f.call(n,[d,m],!0));c<b[1]&&(b=Array.prototype.slice.call(b),b[1]=c);if(b[0]===b[1]){var a;k&&(a=e.slice(-1)[0])&&k.call(n,a,b,a)}else e.push(f.call(n,b,!1));d=b[1];if(d>=c)break}d<c&&e.push(f.call(n,[d,c],!0));return e}function sx(d,c,h){return wi.intervalsInRangeDo(d,c,wi.coalesceOverlapping(Array.prototype.slice.call(h)),function(f,k){return k?f:null}).filter(Boolean)}
function Sq(d,c){var h=0,f,k;return c.map(function(n){for(;k=d[h];)if(k[0]<n[0])h++;else break;if(k&&k[0]===n[0]){for(f=h;k=d[f];)if(k[1]<n[1])f++;else break;if(k&&k[1]===n[1])return wi.range(h,f)}return[]})}function tu(d,c,h){h=h||0;h+c>d.length&&(h-=h+c-d.length);return{array:d,from:h,to:h+c}}function uu(d){return d.array.slice(d.from,d.to)}function Vv(d,c){return c<d.from||c>=d.to?null:c-d.from}function Ul(d,c){return 0>c||c>d.to-d.from?null:d.from+c}function Us(d,c){if(!(c in d.array))return null;
var h=0;c<d.from&&(h=-d.from+c);c>=d.to&&(h=c-d.to+1);return 0===h?d:So.create(d.array,d.to-d.from,d.from+h)}function vu(d,c,h){return(d=d[c])?d[h]:void 0}function da(d,c,h,f){(d=d[c])&&(d[h]=f);return f}function xa(d,c){return d[c]}function hb(d,c,h){return d[c]=h}function Gb(d,c){return d.reduce(function(h,f){h.push(f[c]);return h},[])}function sc(d,c,h){return d.map(function(f,k){return f[c]?f[c]=h[k]:void 0})}function Xc(d,c,h){for(var f=Array(d);0<d;)f[--d]=Hh.arrayWithN(c,h);return f}function he(d,
c,h,f){for(var k=Array(d),n=0;n<d;n++){k[n]=Array(c);for(var b=0;b<c;b++)k[n][b]=h.call(f||this,n,b)}return k}function We(d,c,h){d.forEach(function(f,k){f.forEach(function(n,b){c.call(h||this,n,k,b)})})}function uf(d,c,h){var f=Array(d.length);d.forEach(function(k,n){f[n]=Array(k.length);k.forEach(function(b,e){f[n][e]=c.call(h||this,b,n,e)})});return f}function mg(d){for(var c=d[0],h=Array(d.length-1),f=1;f<d.length;f++)for(var k=h[f-1]={},n=0;n<c.length;n++)k[c[n]]=d[f][n];return h}function yf(d,
c){Array.isArray(d)||(d=[d]);var h=[[]],f=h[0],k=d.reduce(function(n,b){return n.concat([Object.keys(b).reduce(function(e,m){var a=f.indexOf(m);-1===a&&(a=f.length,f.push(m));e[a]=b[m];return e},[])])},[]);c=1===arguments.length?null:c;k.forEach(function(n){for(var b=0;b<f.length;b++)n[b]||(n[b]=c)});return h.concat(k)}function Bh(d,c,h,f,k){f=void 0===f?{i:0}:f;k=void 0===k?0:k;var n=f.i++;c(d,n,k);(h(d,n,k)||[]).forEach(function(b){return Bh(b,c,h,f,k+1)})}function Kg(d,c,h,f,k){f=void 0===f?{i:0}:
f;k=void 0===k?0:k;var n=f.i++;(h(d,n,k)||[]).forEach(function(b){return Kg(b,c,h,f,k)});c(d,n,k)}function oi(d,c,h){if(c(d))return d;if((d=h(d))&&d.length)for(var f=0;f<d.length;f++){var k=oi(d[f],c,h);if(k)return k}}function pl(d,c,h){var f=[];c(d)&&f.push(d);return f.concat(el.flatten((h(d)||[]).map(function(k){return pl(k,c,h)})))}function hm(d,c,h,f){f=void 0===f?0:f;return[c(d,f)].concat(el.flatten((h(d)||[]).map(function(k){return hm(k,c,h,f+1)})))}function On(d,c,h,f){f=void 0===f?0:f;var k=
(h(d)||[]).map(function(n){return On(n,c,h,f+1)});return c(d,k,f)}function Vl(d){var c=[{name:"send",args:["msg","callback"]},{name:"listen",args:["messenger","callback"]},{name:"close",args:["messenger","callback"]},{name:"isOnline",args:[]}],h=c.map(function(b){return b.name}).concat("id sendHeartbeat heartbeatInterval ignoreUnknownMessages allowConcurrentSends sendTimeout services".split(" "));c.forEach(function(b){if(!d[b.name])throw b="message implementation needs function "+b.name+"("+b.args.join(",")+
")",Error(b);});c=d.sendHeartbeat&&(d.heartbeatInterval||1E3);var f=d.hasOwnProperty("ignoreUnknownMessages")?d.ignoreUnknownMessages:!1,k={_outgoing:[],_inflight:[],_id:d.id||im.newUUID(),_ignoreUnknownMessages:f,_services:{},_messageCounter:0,_messageResponseCallbacks:{},_whenOnlineCallbacks:[],_statusWatcherProc:null,_startHeartbeatProcessProc:null,_listenInProgress:null,_heartbeatInterval:c,_status:im.OFFLINE,_runWhenOnlineCallbacks:function(){var b=k._whenOnlineCallbacks.slice();k._whenOnlineCallbacks=
[];b.forEach(function(e){try{e.call(null,null,k)}catch(m){console.error("error in _runWhenOnlineCallbacks: %s",m)}})},_ensureStatusWatcher:function(){k._statusWatcherProc||(k._statusWatcherProc=setInterval(function(){k.isOnline()&&k._whenOnlineCallbacks.length&&k._runWhenOnlineCallbacks();var b=k._status;k._status=k.isOnline()?im.ONLINE:im.OFFLINE;k._status!==im.ONLINE&&k._statusWatcherProc&&k.reconnect();if(k._status!==b&&k.onStatusChange)k.onStatusChange()},20))},_addMissingData:function(b){if(!b.target)throw Error("Message needs target!");
if(!b.action)throw Error("Message needs action!");b.data||(b.data=null);b.messageId||(b.messageId=im.newUUID());b.sender=k.id();b.messageIndex=k._messageCounter++;return b},_queueSend:function(b,e){if(e&&"function"!==typeof e)throw Error("Expecing a when send callback, got: "+e);k._outgoing.push([b,e])},_deliverMessageQueue:function(){function b(a){if(-1!==k._inflight.indexOf(a)){var g=a[0],l=a[1];l&&(k._messageResponseCallbacks[g.messageId]=l);d.send.call(k,g,function(r){im.remove(k._inflight,a);
r&&e(r,a);k._deliverMessageQueue()})}}function e(a,g){var l=g[1];delete k._messageResponseCallbacks[g[0].messageId];console.error(a);l&&l(a)}if(d.allowConcurrentSends||!k._inflight.length){var m=k._outgoing.shift();m&&(k._inflight.push(m),k.isOnline()?b(m):k.whenOnline(function(){b(m)}),function(a){"number"===typeof d.sendTimeout&&setTimeout(function(){-1!==k._inflight.indexOf(a)&&(im.remove(k._inflight,a),e(Error("Timeout sending message"),a),k._deliverMessageQueue())},d.sendTimeout)}(m),d.allowConcurrentSends&&
k._outgoing.length&&k._deliverMessageQueue())}},_startHeartbeatProcess:function(){k._startHeartbeatProcessProc||(k._startHeartbeatProcessProc=setTimeout(function(){d.sendHeartbeat.call(k,function(b,e){k._startHeartbeatProcessProc=null;k._startHeartbeatProcess()})},k._heartbeatInterval))},id:function(){return k._id},isOnline:function(){return d.isOnline.call(k)},heartbeatEnabled:function(){return"number"===typeof k._heartbeatInterval},listen:function(b){if(!k._listenInProgress)return k._listenInProgress=
!0,k._ensureStatusWatcher(),d.listen.call(k,function(e){k._listenInProgress=null;b&&b(e);k.heartbeatEnabled()&&k._startHeartbeatProcess()})},reconnect:function(){if(k._status!==im.ONLINE)return k.listen(),k},send:function(b,e){k._addMissingData(b);k._queueSend(b,e);k._deliverMessageQueue();return b},sendTo:function(b,e,m,a){return k.send({target:b,action:e,data:m},a)},onMessage:function(b){k.emit("message",b);if(b.inResponseTo){var e=k._messageResponseCallbacks[b.inResponseTo];e&&!b.expectMoreResponses&&
delete k._messageResponseCallbacks[b.inResponseTo];e&&e(null,b)}else if(e=k._services[b.action])try{e.call(null,b,k)}catch(m){e=String(m.stack||m),console.error("Error invoking service: "+e),k.answer(b,{error:e})}else k._ignoreUnknownMessages||k.answer(b,{error:String(Error("messageNotUnderstood: "+b.action))})},answer:function(b,e,m,a){"function"===typeof m&&(a=m,m=!1);b={target:b.sender,action:b.action+"Result",inResponseTo:b.messageId,data:e};m&&(b.expectMoreResponses=!0);return k.send(b,a)},close:function(b){clearInterval(k._statusWatcherProc);
k._statusWatcherProc=null;d.close.call(k,function(e){k._status=im.OFFLINE;b&&b(e)});return k},whenOnline:function(b){k._whenOnlineCallbacks.push(b);k.isOnline()&&k._runWhenOnlineCallbacks();return k},outgoingMessages:function(){return im.pluck(k._inflight.concat(k._outgoing),0)},addServices:function(b){Object.assign(k._services,b);return k}};d.services&&k.addServices(d.services);im.makeEmitter(k);for(var n in d)-1===h.indexOf(n)&&d.hasOwnProperty(n)&&(k[n]=d[n]);return k}function nh(d,c,h){h||(h=
c,c=d,d=null);d=d||{};var f=d.args||[];d=Ih.create(d);d.run.apply(d,[c].concat(f).concat(h));return d}function Qj(d){d=d||{};d.useMessenger=!0;var c=d.workerId||Ih.newUUID(),h=Ih.messengerCreate({sendTimeout:5E3,send:function(f,k){h.worker.postMessage(f);k()},listen:function(f){var k=h.worker=Ih.isNodejs?Ih.NodejsWorker.create(d):Ih.BrowserWorker.create(d);k.on("message",function(n){h.onMessage(n)});k.on("ready",function(){Ih.NodejsWorker.debug&&console.log("WORKER READY!!!")});k.on("close",function(){Ih.NodejsWorker.debug&&
console.log("WORKER CLOSED...!!!")});k.once("ready",f)},close:function(f){return h.worker.ready?h.sendTo(c,"close",{},function(k,n){(k=k||n.data.error)&&console.error("Error in worker messenger close: "+k.stack||k);if(k)f(k);else{var b=!1;h.worker.once("close",function(){b=!0});Ih.waitFor(1E3,function(){return!!b},f)}}):f(null)},isOnline:function(){return h.worker&&h.worker.ready}});Object.assign(h,{eval:function(f,k){h.sendTo(c,"remoteEval",{expr:f},function(n,b){k(n,b?b.data.result:null)})},run:function(){var f=
Array.prototype.slice.call(arguments),k=f.shift(),n=f.pop();if("function"!==typeof k)throw Error("run: no function that should run in worker passed");if("function"!==typeof n)throw Error("run: no callback passed");return h.sendTo(c,"run",{func:String(k),args:f},function(b,e){n(b||e.data.error,e?e.data.result:null)})}});h.listen();return h}function uo(){if(!pe.isNode||pe.GLOBAL.lively||pe.GLOBAL.lively)if(pe.livelyLang._prevLivelyGlobal=pe.GLOBAL.lively,pe.GLOBAL.lively||(pe.GLOBAL.lively={}),pe.GLOBAL.lively.lang)for(var d in pe.livelyLang)pe.GLOBAL.lively.lang[d]=
pe.livelyLang[d];else pe.GLOBAL.lively.lang=pe.livelyLang}function ym(d){if(!d)return d;if(Array.isArray(d))return pe.createChain(pe.arr,d);if("Date"===d.constructor.name)return pe.createChain(pe.date,d);switch(typeof d){case "string":return pe.createChain(pe.string,d);case "object":return pe.createChain(pe.obj,d);case "function":return pe.createChain(pe.fun,d);case "number":return pe.createChain(pe.num,d)}throw Error("Chain for object "+d+" ("+d.constructor.name+") no supported");}function tp(){pe.isNode||
(pe.livelyLang._prevLivelyGlobal?delete pe.GLOBAL.lively.lang:delete pe.GLOBAL.lively);return pe.livelyLang}function tx(){Object.assign(pe.livelyLang,{worker:YE,messenger:ZE,events:vz,tree:wu,grid:wz,arrayProjection:$E,interval:aF,graph:xu,date:yu,properties:up,obj:Ag,arr:$f,fun:Pn,num:Nm,string:pi,Closure:Rj,promise:zh,Path:Ah,Group:Qn});pe.globalInterfaceSpec.forEach(function(d){if("installMethods"===d.action){var c=pe.Path(d.target);c.isIn(pe.GLOBAL)||c.set(pe.GLOBAL,{},!0);var h=pe.Path(d.sources[0]);
d.methods.forEach(function(f){pe.installProperty(h.concat([f]),c.concat([f]))});d.alias&&d.alias.forEach(function(f){pe.installProperty(h.concat([f[1]]),c.concat([f[0]]))})}else if("installObject"===d.action)c=pe.Path(d.target),d=pe.Path(d.source).get(pe.livelyLang),c.set(pe.GLOBAL,d,!0);else throw Error("Cannot deal with global setup action: "+d.action);})}function Th(){pe.globalInterfaceSpec.forEach(function(d){if("installMethods"===d.action){var c=pe.Path(d.target),h=pe.Path(d.source).get(pe.livelyLang),
f=c.get(pe.GLOBAL);f&&(d.methods.filter(function(k){return h===f[k]}).forEach(function(k){delete f[k]}),d.alias&&d.alias.filter(function(k){return h===f[k]}).forEach(function(k){delete f[k[0]]}))}else if("installObject"===d.action)c=pe.Path(d.target),c.del(pe.GLOBAL);else throw Error("Cannot deal with global setup action: "+d.action);})}function Ch(d){return function(c,h,f,k){null==f&&(f=d);null==k&&(k=f);null==h&&(h=Ui.unit(c));var n=Ui.unit(c);if(n===h)return c;var b=Ui.unitLess(c);"px"!==Ui.unit(f)&&
console.warn("Parameter fromContext must resolve to a value in pixel units.");"px"!==Ui.unit(k)&&console.warn("Parameter toContext must resolve to a value in pixel units.");if("px"!==n)if("em"===n)b=Ui.unitLess(c)*Ui.unitLess(f);else if("rem"===n)b=Ui.unitLess(c)*Ui.unitLess(d);else if("ex"===n)b=Ui.unitLess(c)*Ui.unitLess(f)*2;else return"ch"===n||"vw"===n||"vh"===n||"vmin"===n?console.warn(n+" units can't be reliably converted; Returning original value."):console.warn(n+" is an unknown or unsupported length unit; Returning original value."),
c;f=b;if("px"!==h)if("em"===h)f=b/Ui.unitLess(k);else if("rem"===h)f=b/Ui.unitLess(d);else if("ex"===h)f=b/Ui.unitLess(k)/2;else return"ch"===h||"vw"===h||"vh"===h||"vmin"===h?console.warn(h+" units can't be reliably converted; Returning original value."):console.warn(h+" is an unknown or unsupported length unit; Returning original value."),c;return parseFloat(f.toFixed(5))+h}}function Wv(d){return Number(Ui.parseCssLength(d,"px").slice(0,-2))}function zm(d,c,h,f){if("number"===typeof d){var k=d;
d=c;c=f}else k=d.x,d=d.y,h=c.x-k,c=c.y-d;return new ge.Rectangle(k,d,h,c)}function xi(d,c){return new ge.Point(d,c)}function Xv(d){d=new Rd.Color(d);return{red:d.red()/255,green:d.green()/255,blue:d.blue()/255,alpha:d.alpha()}}function mn(d){return(d=d.match(CX))?{scheme:d[1],auth:d[2],host:d[3],port:d[4],path:d[5]}:null}function zu(d){var c="";d.scheme&&(c+=d.scheme+":");c+="//";d.auth&&(c+=d.auth+"@");d.host&&(c+=d.host);d.port&&(c+=":"+d.port);d.path&&(c+=d.path);return c}function ux(d){var c=
d,h=mn(d);if(h){if(!h.path)return d;c=h.path}d=nn.isAbsolute(c);c=c.split(/\/+/);for(var f,k=0,n=c.length-1;0<=n;n--)f=c[n],"."===f?c.splice(n,1):".."===f?k++:0<k&&(""===f?(c.splice(n+1,k),k=0):(c.splice(n,2),k--));c=c.join("/");""===c&&(c=d?"/":".");return h?(h.path=c,zu(h)):c}function bF(d,c){""===d&&(d=".");""===c&&(c=".");var h=mn(c),f=mn(d);f&&(d=f.path||"/");if(h&&!h.scheme)return f&&(h.scheme=f.scheme),zu(h);if(h||c.match(Naa))return c;if(f&&!f.host&&!f.path)return f.host=c,zu(f);d="/"===c.charAt(0)?
c:ux(d.replace(/\/+$/,"")+"/"+c);return f?(f.path=d,zu(f)):d}function II(d){return d}function JI(d){return cF(d)?"$"+d:d}function Vs(d){return cF(d)?d.slice(1):d}function cF(d){if(!d)return!1;var c=d.length;if(9>c||95!==d.charCodeAt(c-1)||95!==d.charCodeAt(c-2)||111!==d.charCodeAt(c-3)||116!==d.charCodeAt(c-4)||111!==d.charCodeAt(c-5)||114!==d.charCodeAt(c-6)||112!==d.charCodeAt(c-7)||95!==d.charCodeAt(c-8)||95!==d.charCodeAt(c-9))return!1;for(c-=10;0<=c;c--)if(36!==d.charCodeAt(c))return!1;return!0}
function Au(d,c){return d===c?0:null===d?1:null===c?-1:d>c?1:-1}function Om(){(this||vo)._array=[];(this||vo)._set=xz?new Map:Object.create(null)}function yz(){(this||Kr)._array=[];(this||Kr)._sorted=!0;(this||Kr)._last={generatedLine:-1,generatedColumn:0}}function vp(d){d||(d={});(this||qi)._file=Pm.getArg(d,"file",null);(this||qi)._sourceRoot=Pm.getArg(d,"sourceRoot",null);(this||qi)._skipValidation=Pm.getArg(d,"skipValidation",!1);(this||qi)._sources=new KI;(this||qi)._names=new KI;(this||qi)._mappings=
new Oaa;(this||qi)._sourcesContents=null}function WB(d,c,h,f,k,n){var b=Math.floor((c-d)/2)+d,e=k(h,f[b],!0);return 0===e?b:0<e?1<c-b?WB(b,c,h,f,k,n):n==LI.LEAST_UPPER_BOUND?c<f.length?c:-1:b:1<b-d?WB(d,b,h,f,k,n):n==LI.LEAST_UPPER_BOUND?b:0>d?-1:d}function fl(d,c,h){var f=d[c];d[c]=d[h];d[h]=f}function dq(d,c,h,f){if(h<f){var k=h-1;fl(d,Math.round(h+Math.random()*(f-h)),f);for(var n=d[f],b=h;b<f;b++)0>=c(d[b],n)&&(k+=1,fl(d,k,b));fl(d,k+1,b);k+=1;dq(d,c,h,k-1);dq(d,c,k+1,f)}}function Zi(d,c){var h=
d;"string"===typeof d&&(h=Cg.parseSourceMapInput(d));return null!=h.sections?new eq(h,c):new Am(h,c)}function Am(d,c){var h=d;"string"===typeof d&&(h=Cg.parseSourceMapInput(d));d=Cg.getArg(h,"version");var f=Cg.getArg(h,"sources"),k=Cg.getArg(h,"names",[]),n=Cg.getArg(h,"sourceRoot",null),b=Cg.getArg(h,"sourcesContent",null),e=Cg.getArg(h,"mappings");h=Cg.getArg(h,"file",null);if(d!=(this||jf)._version)throw Error("Unsupported version: "+d);n&&(n=Cg.normalize(n));f=f.map(String).map(Cg.normalize).map(function(m){return n&&
Cg.isAbsolute(n)&&Cg.isAbsolute(m)?Cg.relative(n,m):m});(this||jf)._names=XB.fromArray(k.map(String),!0);(this||jf)._sources=XB.fromArray(f,!0);(this||jf)._absoluteSources=(this||jf)._sources.toArray().map(function(m){return Cg.computeSourceURL(n,m,c)});(this||jf).sourceRoot=n;(this||jf).sourcesContent=b;(this||jf)._mappings=e;(this||jf)._sourceMapURL=c;(this||jf).file=h}function YB(){(this||jf).generatedLine=0;(this||jf).generatedColumn=0;(this||jf).source=null;(this||jf).originalLine=null;(this||
jf).originalColumn=null;(this||jf).name=null}function eq(d,c){var h=d;"string"===typeof d&&(h=Cg.parseSourceMapInput(d));d=Cg.getArg(h,"version");h=Cg.getArg(h,"sections");if(d!=(this||jf)._version)throw Error("Unsupported version: "+d);(this||jf)._sources=new XB;(this||jf)._names=new XB;var f={line:-1,column:0};(this||jf)._sections=h.map(function(k){if(k.url)throw Error("Support for url field in sections not implemented.");var n=Cg.getArg(k,"offset"),b=Cg.getArg(n,"line"),e=Cg.getArg(n,"column");
if(b<f.line||b===f.line&&e<f.column)throw Error("Section offsets must be ordered and non-overlapping.");f=n;return{generatedOffset:{generatedLine:b+1,generatedColumn:e+1},consumer:new Zi(Cg.getArg(k,"map"),c)}})}function wo(d,c,h,f,k){(this||rj).children=[];(this||rj).sourceContents={};(this||rj).line=null==d?null:d;(this||rj).column=null==c?null:c;(this||rj).source=null==h?null:h;(this||rj).name=null==k?null:k;(this||rj).$$$isSourceNode$$$=!0;null!=f&&this.add(f)}function Uh(d,c){c=void 0===c?{}:
c;var h=Object.assign({indent:{style:"  ",base:0,adjustMultilineComment:!1,optsIndent:c&&c.format&&c.format.indent||{}},quotes:"double"},Tq.obj.dissoc(c&&c.format||{},["indent"]));c=Object.assign({format:h,comment:!1},Tq.obj.dissoc(c,["format"]));return Tq.es.generate(d,c)}function Uq(d,c){for(var h=65536,f=0;f<c.length;f+=2){h+=c[f];if(h>d)return!1;h+=c[f+1];if(h>=d)return!0}}function Lr(d,c){return 65>d?36===d:91>d?!0:97>d?95===d:123>d?!0:65535>=d?170<=d&&Paa.test(String.fromCharCode(d)):!1===c?
!1:Uq(d,DX)}function Bu(d,c){return 48>d?36===d:58>d?!0:65>d?!1:91>d?!0:97>d?95===d:123>d?!0:65535>=d?170<=d&&Qaa.test(String.fromCharCode(d)):!1===c?!1:Uq(d,DX)||Uq(d,Raa)}function Qm(d,c){return new Sj(d,{beforeExpr:!0,binop:c})}function $i(d,c){void 0===c&&(c={});c.keyword=d;return MI[d]=new Sj(d,c)}function yi(d,c){return 10===d||13===d||!c&&(8232===d||8233===d)}function sj(d){return new RegExp("^(?:"+d.replace(/ /g,"|")+")$")}function fq(d,c){for(var h=1,f=0;;){vx.lastIndex=f;var k=vx.exec(d);
if(k&&k.index<c)++h,f=k.index+k[0].length;else return new ZB(h,c-f)}}function gl(d){var c={},h;for(h in dF)c[h]=d&&NI.call(d,h)?d[h]:dF[h];"latest"===c.ecmaVersion?c.ecmaVersion=1E8:null==c.ecmaVersion?(!EX&&"object"===typeof console&&console.warn&&(EX=!0,console.warn("Since Acorn 8.0.0, options.ecmaVersion is required.\nDefaulting to 2020, but this will stop working in the future.")),c.ecmaVersion=11):2015<=c.ecmaVersion&&(c.ecmaVersion-=2009);null==c.allowReserved&&(c.allowReserved=5>c.ecmaVersion);
if(FX(c.onToken)){var f=c.onToken;c.onToken=function(k){return f.push(k)}}FX(c.onComment)&&(c.onComment=eF(c,c.onComment));return c}function eF(d,c){return function(h,f,k,n,b,e){h={type:h?"Block":"Line",value:f,start:k,end:n};d.locations&&(h.loc=new zz(this,b,e));d.ranges&&(h.range=[k,n]);c.push(h)}}function sd(){this.shorthandAssign=this.trailingComma=this.parenthesizedAssign=this.parenthesizedBind=this.doubleProto=-1}function To(d,c,h,f){d.type=c;d.end=h;this.options.locations&&(d.loc.end=f);this.options.ranges&&
(d.range[1]=h);return d}function Vq(d){d=GX[d]={binary:sj(Saa[d]+" Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu"),
nonBinary:{General_Category:sj("Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu"),
Script:sj(Taa[d])}};d.nonBinary.Script_Extensions=d.nonBinary.Script;d.nonBinary.gc=d.nonBinary.General_Category;d.nonBinary.sc=d.nonBinary.Script;d.nonBinary.scx=d.nonBinary.Script_Extensions}function Cu(d){if(65535>=d)return String.fromCharCode(d);d-=65536;return String.fromCharCode((d>>10)+55296,(d&1023)+56320)}function Du(d){return 36===d||40<=d&&43>=d||46===d||63===d||91<=d&&94>=d||123<=d&&125>=d}function wx(d){return 65<=d&&90>=d||97<=d&&122>=d||95===d}function Ws(d){return wx(d)||Wq(d)}function Wq(d){return 48<=
d&&57>=d}function Az(d){return 48<=d&&57>=d||65<=d&&70>=d||97<=d&&102>=d}function $B(d){return 65<=d&&70>=d?10+(d-65):97<=d&&102>=d?10+(d-97):d-48}function aC(d){return"function"!==typeof BigInt?null:BigInt(d.replace(/_/g,""))}function xx(d){if(65535>=d)return String.fromCharCode(d);d-=65536;return String.fromCharCode((d>>10)+55296,(d&1023)+56320)}function Yv(d){return"string"===typeof d?function(c){return c===d}:d?d:function(){return!0}}function Zv(d,c){c=Uaa(c||Bf);for(var h in d)c[h]=d[h];return c}
function yx(d,c,h){h(d,c)}function wp(d,c,h){}function Uo(d){return"\u2716"===d.name}function Eu(){}function Qi(d){return 14>d&&8<d||32===d||160===d||yi(d)}function xp(d,c,h,f){var k=[];f=f||xf.walk.make(xf.custom.withMemberExpression);Object.keys(xf.walk.base).forEach(function(n){var b=f[n];f[n]=function(e,m,a){xf.arr.pushIfNotIncluded(k,e);return b(e,m,a)}});f.Property=function(n,b,e){xf.arr.pushIfNotIncluded(k,n);e(n.key,b,"Expression");e(n.value,b,"Expression")};f.LabeledStatement=function(n,
b,e){n.label&&e(n.label,b,"Expression");e(n.body,b,"Statement")};xf.walk.findNodeAround(d,c,h,f);return k}function Rm(d,c){function h(k){return null===k?null:f[k.type](k,h)}var f=xf.obj.extend({Program:function(k,n){return{start:k.start,end:k.end,type:"Program",body:k.body.map(n),source:k.source,astIndex:k.astIndex}},FunctionDeclaration:function(k,n){return{start:k.start,end:k.end,type:"FunctionDeclaration",id:n(k.id),params:k.params.map(n),body:n(k.body),source:k.source,astIndex:k.astIndex}},BlockStatement:function(k,
n){return{start:k.start,end:k.end,type:"BlockStatement",body:k.body.map(n),source:k.source,astIndex:k.astIndex}},ExpressionStatement:function(k,n){return{start:k.start,end:k.end,type:"ExpressionStatement",expression:n(k.expression),source:k.source,astIndex:k.astIndex}},CallExpression:function(k,n){return{start:k.start,end:k.end,type:"CallExpression",callee:n(k.callee),arguments:k.arguments.map(n),source:k.source,astIndex:k.astIndex}},MemberExpression:function(k,n){return{start:k.start,end:k.end,type:"MemberExpression",
object:n(k.object),property:n(k.property),computed:k.computed,source:k.source,astIndex:k.astIndex}},NewExpression:function(k,n){return{start:k.start,end:k.end,type:"NewExpression",callee:n(k.callee),arguments:k.arguments.map(n),source:k.source,astIndex:k.astIndex}},VariableDeclaration:function(k,n){return{start:k.start,end:k.end,type:"VariableDeclaration",declarations:k.declarations.map(n),kind:k.kind,source:k.source,astIndex:k.astIndex}},VariableDeclarator:function(k,n){return{start:k.start,end:k.end,
type:"VariableDeclarator",id:n(k.id),init:n(k.init),source:k.source,astIndex:k.astIndex}},FunctionExpression:function(k,n){return{start:k.start,end:k.end,type:"FunctionExpression",id:n(k.id),params:k.params.map(n),body:n(k.body),source:k.source,astIndex:k.astIndex}},IfStatement:function(k,n){return{start:k.start,end:k.end,type:"IfStatement",test:n(k.test),consequent:n(k.consequent),alternate:n(k.alternate),source:k.source,astIndex:k.astIndex}},ConditionalExpression:function(k,n){return{start:k.start,
end:k.end,type:"ConditionalExpression",test:n(k.test),consequent:n(k.consequent),alternate:n(k.alternate),source:k.source,astIndex:k.astIndex}},SwitchStatement:function(k,n){return{start:k.start,end:k.end,type:"SwitchStatement",discriminant:n(k.discriminant),cases:k.cases.map(n),source:k.source,astIndex:k.astIndex}},SwitchCase:function(k,n){return{start:k.start,end:k.end,type:"SwitchCase",test:n(k.test),consequent:k.consequent.map(n),source:k.source,astIndex:k.astIndex}},BreakStatement:function(k,
n){return{start:k.start,end:k.end,type:"BreakStatement",label:k.label,source:k.source,astIndex:k.astIndex}},ContinueStatement:function(k,n){return{start:k.start,end:k.end,type:"ContinueStatement",label:k.label,source:k.source,astIndex:k.astIndex}},TryStatement:function(k,n){return{start:k.start,end:k.end,type:"TryStatement",block:n(k.block),handler:n(k.handler),finalizer:n(k.finalizer),guardedHandlers:k.guardedHandlers.map(n),source:k.source,astIndex:k.astIndex}},CatchClause:function(k,n){return{start:k.start,
end:k.end,type:"CatchClause",param:n(k.param),guard:n(k.guard),body:n(k.body),source:k.source,astIndex:k.astIndex}},ThrowStatement:function(k,n){return{start:k.start,end:k.end,type:"ThrowStatement",argument:n(k.argument),source:k.source,astIndex:k.astIndex}},ForStatement:function(k,n){return{start:k.start,end:k.end,type:"ForStatement",init:n(k.init),test:n(k.test),update:n(k.update),body:n(k.body),source:k.source,astIndex:k.astIndex}},ForInStatement:function(k,n){return{start:k.start,end:k.end,type:"ForInStatement",
left:n(k.left),right:n(k.right),body:n(k.body),source:k.source,astIndex:k.astIndex}},WhileStatement:function(k,n){return{start:k.start,end:k.end,type:"WhileStatement",test:n(k.test),body:n(k.body),source:k.source,astIndex:k.astIndex}},DoWhileStatement:function(k,n){return{start:k.start,end:k.end,type:"DoWhileStatement",test:n(k.test),body:n(k.body),source:k.source,astIndex:k.astIndex}},WithStatement:function(k,n){return{start:k.start,end:k.end,type:"WithStatement",object:n(k.object),body:n(k.body),
source:k.source,astIndex:k.astIndex}},UnaryExpression:function(k,n){return{start:k.start,end:k.end,type:"UnaryExpression",argument:n(k.argument),operator:k.operator,prefix:k.prefix,source:k.source,astIndex:k.astIndex}},BinaryExpression:function(k,n){return{start:k.start,end:k.end,type:"BinaryExpression",left:n(k.left),operator:k.operator,right:n(k.right),source:k.source,astIndex:k.astIndex}},LogicalExpression:function(k,n){return{start:k.start,end:k.end,type:"LogicalExpression",left:n(k.left),operator:k.operator,
right:n(k.right),source:k.source,astIndex:k.astIndex}},AssignmentExpression:function(k,n){return{start:k.start,end:k.end,type:"AssignmentExpression",left:n(k.left),operator:k.operator,right:n(k.right),source:k.source,astIndex:k.astIndex}},UpdateExpression:function(k,n){return{start:k.start,end:k.end,type:"UpdateExpression",argument:n(k.argument),operator:k.operator,prefix:k.prefix,source:k.source,astIndex:k.astIndex}},ReturnStatement:function(k,n){return{start:k.start,end:k.end,type:"ReturnStatement",
argument:n(k.argument),source:k.source,astIndex:k.astIndex}},Identifier:function(k,n){return{start:k.start,end:k.end,type:"Identifier",name:k.name,source:k.source,astIndex:k.astIndex}},Literal:function(k,n){return{start:k.start,end:k.end,type:"Literal",value:k.value,raw:k.raw,source:k.source,astIndex:k.astIndex}},ObjectExpression:function(k,n){return{start:k.start,end:k.end,type:"ObjectExpression",properties:k.properties.map(function(b){return{key:n(b.key),value:n(b.value),kind:b.kind}}),source:k.source,
astIndex:k.astIndex}},ArrayExpression:function(k,n){return{start:k.start,end:k.end,type:"ArrayExpression",elements:k.elements.map(n),source:k.source,astIndex:k.astIndex}},SequenceExpression:function(k,n){return{start:k.start,end:k.end,type:"SequenceExpression",expressions:k.expressions.map(n),source:k.source,astIndex:k.astIndex}},EmptyStatement:function(k,n){return{start:k.start,end:k.end,type:"EmptyStatement",source:k.source,astIndex:k.astIndex}},ThisExpression:function(k,n){return{start:k.start,
end:k.end,type:"ThisExpression",source:k.source,astIndex:k.astIndex}},DebuggerStatement:function(k,n){return{start:k.start,end:k.end,type:"DebuggerStatement",source:k.source,astIndex:k.astIndex}},LabeledStatement:function(k,n){return{start:k.start,end:k.end,type:"LabeledStatement",label:k.label,body:n(k.body),source:k.source,astIndex:k.astIndex}}},c||{});return h(d)}function Xs(d,c,h){if(!c)return[];d=xf.findNodesIncluding(d,c.start);var f=d.indexOf(c);d=d.slice(0,f);d=xf.arr.detect(d.reverse(),function(k){return Array.isArray(k.body)}).body;
if(!h)return xf.arr.without(d,c);c=d.indexOf(c);return"before"===h?d.slice(0,c):d.slice(c+1)}function Ys(d,c,h){d.astIndex||null!=h&&!h||xf.addAstIndex(d);var f=null;xf.withMozillaAstDo(d,null,function(k,n,b){f||n.astIndex<c||(n.astIndex===c?f=n:k())});return f}function Fu(d,c,h){h||(h=c,c=d,d=null);d||(d={});c.astIndex||xf.addAstIndex(c);var f,k=!1,n="EmptyStatement BlockStatement ExpressionStatement IfStatement LabeledStatement BreakStatement ContinueStatement WithStatement SwitchStatement ReturnStatement ThrowStatement TryStatement WhileStatement DoWhileStatement ForStatement ForInStatement DebuggerStatement FunctionDeclaration VariableDeclaration ClassDeclaration".split(" ");
xf.withMozillaAstDo(c,{},function(b,e,m,a){if(!(k||e.astIndex<h.astIndex)){if(e===h||e.astIndex===h.astIndex)if(k=!0,d.asPath)f=a;else{e=xf.Path(a);do f=e.get(c),e=e.slice(0,e.size()-1);while(-1==n.indexOf(f.type)&&0<e.size())}!k&&b()}});return f}function yp(d){xf.withMozillaAstDo(d,{index:0},function(c,h,f){c();h.astIndex=f.index++});return d}function za(d,c){"string"===typeof d&&(c=d,d=Jh.parse(d));c&&Jh.AllNodesVisitor.run(d,function(h,f,k){return!h.source&&(h.source=c.slice(h.start,h.end))});
return d}function Rn(d,c){c=void 0===c?{}:c;var h=Jh.parse("("+d+")",c);Jh.AllNodesVisitor.run(h,function(f,k,n){if(!f._positionFixed){f._positionFixed=!0;if(f.start||0===f.start)f.start+=-1,f.end+=-1;c.addSource&&!f.source&&(f.source=d.slice(f.start,f.end))}});return h.body[0].expression}function Pk(d,c){c=c||{};c.ecmaVersion=c.ecmaVersion||11;c.sourceType=c.sourceType||"module";c.plugins=c.plugins||{};c.plugins.jsx=c.plugins.hasOwnProperty("jsx")?c.plugins.jsx:!0;c.plugins.asyncawait=c.plugins.hasOwnProperty("asyncawait")?
c.plugins.asyncawait:{inAsyncFunction:!0};c.plugins.objectSpread=c.plugins.hasOwnProperty("objectSpread")?c.plugins.objectSpread:!0;var h;"LabeledStatement"===c.type&&(h="$={"+d+"}");try{var f=Jh.parse(h||d,c);h?f=null:c.addSource&&Jh.addSource(f,d)}catch(n){var k=n}k&&void 0!==k.raisedAt?(h&&(k.pos-=3,k.raisedAt-=3,k.loc.column-=3),h=""+d.slice(k.raisedAt-20,k.raisedAt),h=h+"<-error->"+d.slice(k.raisedAt,k.raisedAt+20),c.verbose&&console.log("parse error: "+h),k.parseErrorSource=h):k&&c.verbose&&
console.log(""+k+k.stack);f||(f=Jh.loose.parse(d,c),c.addSource&&Jh.addSource(f,d),f.isFuzzy=!0,f.parseError=k);return f}function ak(d,c){function h(l){l=k(f(l));b.allComments=l.comments}function f(l){n.forEach(function(r){var v=Jh.arr.detect(Jh.nodesAt(r.start,b).reverse(),function(y){return"BlockStatement"===y.type||"Program"===y.type});v||(v=b);v.comments||(v.comments=[]);v.comments.push(r);l.nodesWithComments.push(v)});return l}function k(l){l.nodesWithComments.forEach(function(r){Jh.arr.clone(r.comments).reduce(function(v,
y){if(y.isBlock)return v.lastComment=null,v;if(!v.lastComment)return v.lastComment=y,v;var A=v.lastComment;if(Jh.arr.detect(r.body,function(F){return F.start>=A.end&&F.end<=y.start}))return v.lastComment=y,v;var E=d.slice(A.end,y.start);if(/[\n\r][\n\r]+/.test(E))return v.lastComment=y,v;A.text+="\n"+y.text;A.end=y.end;Jh.arr.remove(r.comments,y);Jh.arr.remove(l.comments,y);return v},{lastComment:null})});return l}c=c||{};c.ecmaVersion=c.ecmaVersion||11;c.allowAwaitOutsideFunction=!0;c.sourceType=
c.sourceType||"module";c.hasOwnProperty("allowImportExportEverywhere")||(c.allowImportExportEverywhere=!0);c.plugins=c.plugins||{};c.plugins.jsx=c.plugins.hasOwnProperty("jsx")?c.plugins.jsx:!0;c.plugins.asyncawait=c.plugins.hasOwnProperty("asyncawait")?c.plugins.asyncawait:{inAsyncFunction:!0};c.plugins.objectSpread=c.plugins.hasOwnProperty("objectSpread")?c.plugins.objectSpread:!0;if(c.withComments){delete c.withComments;var n=[];c.onComment=function(l,r,v,y,A,E){n.push({isBlock:l,text:r,node:null,
start:v,end:y,line:A,column:E})}}try{var b=Jh.acorn.parse(d,c)}catch(l){if("undefined"!==typeof SyntaxError&&l instanceof SyntaxError&&l.loc){var e=d.split("\n"),m=l,a=m.loc;c=a.line;a=a.column;var g=m.pos;e=e[c-1];m="Syntax error at line "+c+" column "+a+" (index "+g+') "'+m.message+'"\nsource: '+e.slice(0,a)+"<--SyntaxError--\x3e"+e.slice(a);m=new SyntaxError(m);m.loc={line:c,column:a};m.pos=g;throw m;}throw l;}c.addSource&&Jh.addSource(b,d);c.addAstIndex&&!b.hasOwnProperty("astIndex")&&Jh.addAstIndex(b);
b&&n&&h({ast:b,comments:n,nodesWithComments:[]});return b}function Mr(d){return of.identifierRe.test(d)&&-1===d.indexOf("-")}function De(d){return"this"===d?{type:"ThisExpression"}:{name:String(d),type:"Identifier"}}function If(d){return{type:"Literal",value:d}}function Xa(d){return{type:"ExpressionStatement",expression:d}}function Bm(d){return{type:"ReturnStatement",argument:d}}function gq(){return{type:"EmptyStatement"}}function Zs(d,c,h){return{left:d,right:h,operator:c,type:"BinaryExpression"}}
function $v(d,c,h){for(var f=[],k=2;k<arguments.length;++k)f[k-2]=arguments[k];k=d.arrow;var n=d.id,b=d.expression,e=d.generator;c=void 0===c?[]:c;c=c.map(function(m){return"string"===typeof m?of.id(m):m});return{type:(k?"Arrow":"")+"FunctionExpression",id:n?"string"===typeof n?of.id(n):n:void 0,params:c,body:b&&1===f.length?f[0]:{body:f,type:"BlockStatement"},expression:b||!1,generator:e||!1}}function aw(d,c){for(var h=[],f=1;f<arguments.length;++f)h[f-1]=arguments[f];"string"===typeof d&&(d=of.id(d));
return{type:"CallExpression",callee:d,arguments:h}}function bw(d,c,h){"string"===typeof d&&(d={name:d,type:"Identifier"});return{type:"VariableDeclaration",kind:h||"var",declarations:[{type:"VariableDeclarator",id:d,init:c}]}}function Nr(d,c,h){"string"===typeof d&&(d=of.id(d));"string"===typeof c?(h||of.isIdentifier(c)||(h=!0),c=h?of.literal(c):of.id(c)):"number"===typeof c?(c=of.literal(c),h=!0):"Literal"===c.type&&(h=!0);return{type:"MemberExpression",computed:!!h,object:d,property:c}}function Ij(d,
c){for(var h=[],f=1;f<arguments.length;++f)h[f-1]=arguments[f];return h.reduce(function(k,n){return of.member(k,n)},"object"===typeof d?d:of.id(d))}function hq(d,c){return{type:"AssignmentExpression",operator:"=",right:c?"string"===typeof c?of.id(c):c:of.id("undefined"),left:"string"===typeof d?of.id(d):d}}function hl(d){for(var c=[],h=0;h<arguments.length;++h)c[h-0]=arguments[h];return{body:Array.isArray(c[0])?c[0]:c,type:"BlockStatement"}}function iq(d){for(var c=[],h=0;h<arguments.length;++h)c[h-
0]=arguments[h];return Object.assign(of.block.apply(of,$jscomp.arrayFromIterable(c)),{sourceType:"module",type:"Program"})}function Vo(d,c,h,f){for(var k=[],n=3;n<arguments.length;++n)k[n-3]=arguments[n];Array.isArray(h)||(k.unshift(h),h=null);return{block:of.block(k),finalizer:h?of.block(h):null,handler:{body:of.block(c),param:of.id(d),type:"CatchClause"},type:"TryStatement"}}function cw(d,c){return{type:"Property",key:d,computed:"Identifier"!==d.type,shorthand:!1,value:c}}function on(d){for(var c=
[],h=0;h<d.length;h+=2){var f=d[h];"string"===typeof f&&(f=of.id(f));c.push(of.prop(f,d[h+1]))}return{properties:c,type:"ObjectExpression"}}function zx(d,c,h){c=void 0===c?of.block():c;h=void 0===h?of.block():h;return{consequent:c,alternate:h,test:d,type:"IfStatement"}}function Sn(d,c,h){return{type:"ForInStatement",left:"string"===typeof d?of.varDecl(d):d,right:"string"===typeof c?of.id(c):c,body:h}}function Sm(d,c,h){c=void 0===c?of.id("undefined"):c;h=void 0===h?of.id("undefined"):h;return{consequent:c,
alternate:h,test:d,type:"ConditionalExpression"}}function Gu(d,c,h){return{operator:d,left:c,right:h,type:"LogicalExpression"}}function Or(d){var c=new $d.ScopeVisitor,h=c.newScope(d,null);c.accept(d,h,[]);return h}function Bz(d,c){return $d.withMozillaAstDo(d,[],function(h,f,k){f.start<=c&&c<=f.end&&(k.push(f),h());return k})}function Cz(d,c){return $d.tree.filter($d.scopes(d),function(h){h=h.node;var f=h.start,k=h.end;"FunctionDeclaration"===h.type&&(f=h.params.length?h.params[0].start:h.body.start,
k=h.body.end);return f<=c&&c<=k},function(h){return h.subScopes})}function bC(d,c){return $d.arr.last($d.scopesAtIndex(d,c))}function Ji(d,c){return $d.arr.filter($d.nodesAt(d,c),function(h){return"Program"===h.type||"FunctionDeclaration"===h.type||"FunctionExpression"===h.type})}function cC(d){return $d.withMozillaAstDo(d,{root:d,result:[]},function(c,h,f){f.result.push(h);if(h!==f.root&&("Program"===h.type||"FunctionDeclaration"===h.type||"FunctionExpression"===h.type))return f;c();return f}).result}
function dC(d,c,h){h=void 0===h?[]:h;c&&d.node.id&&d.node.id.name&&h.push(d.node.id);$d.helpers.declIds(d.params,h);for(c=0;c<d.funcDecls.length;c++){var f=d.funcDecls[c].id;f&&h.push(f)}$d.helpers.varDeclIds(d,h);h.push.apply(h,$jscomp.arrayFromIterable(d.catches));for(c=0;c<d.classDecls.length;c++)(f=d.classDecls[c].id)&&h.push(f);h.push.apply(h,$jscomp.arrayFromIterable(d.importSpecifiers));return h}function $s(d,c){for(var h=[],f=$jscomp.makeIterator($d.declarationsOfScope(d,!0)),k=f.next();!k.done;k=
f.next())h.push(k.value.name);c&&$d._findJsLintGlobalDeclarations("Program"===d.node.type?d.node:d.node.body,h);return h}function eC(d,c){c=void 0===c?[]:c;if(!d||!d.comments)return c;d=$jscomp.makeIterator(d.comments);for(var h=d.next();!h.done;h=d.next())if(h=h.value.text.trim(),h.startsWith("global")){h=$jscomp.makeIterator(h.replace($d.globalDeclRe,"").split(","));for(var f=h.next();!f.done;f=h.next())c.push(f.value.trim())}return c}function Xq(d){return $d.FindToplevelFuncDeclVisitor.run(d)}
function Pr(d,c){if(0==c.length)return[null,null];var h=$jscomp.makeIterator(c);c=h.next().value;h=$jscomp.arrayFromIterator(h);var f=c.decls||$d.declarationsWithIdsOfScope(c);c.decls=f;return f.find(function(k){k=$jscomp.makeIterator(k);k.next();return k.next().value.name==d})||Pr(d,h)}function Qr(d){function c(f,k){var n=[f].concat(k);f.refs.forEach(function(b){var e=$jscomp.makeIterator($d.resolveReference(b.name,n)),m=e.next().value;e=e.next().value;h.set(b,{decl:m,declId:e,ref:b})});f.subScopes.forEach(function(b){return c(b,
n)})}if(d.referencesResolvedSafely)return d;var h=d.resolvedRefMap||(d.resolvedRefMap=new Map);c(d,[]);d.referencesResolvedSafely=!0;return d}function zp(d,c){c=$jscomp.makeIterator(c.resolvedRefMap.values());for(var h=c.next();!h.done;h=c.next()){h=h.value;var f=h.ref,k=f.end;if(f.start<=d&&d<=k)return h}}function Cm(d,c){function h(b){var e=$d._declaredVarNames(b,f);return $d.arr.filter(b.subScopes.map(h).reduce(function(m,a){return m.concat(a)},b.refs),function(m){return-1===e.indexOf(m.name)})}
c=c||{};c.withComments=!0;"string"===typeof d&&(d=$d.parse(d,c));d=$d.scopes(d);var f=!!c.jslintGlobalComment;c=$d._declaredVarNames(d,f);var k=d.refs.concat($d.arr.flatten(d.subScopes.map(h))),n=$d.arr.withoutAll(k.map(function(b){return b.name}),c);return{scope:d,varDecls:d.varDecls,funcDecls:$d.arr.filter(d.funcDecls,function(b){return b.id}),classDecls:$d.arr.filter(d.classDecls,function(b){return b.id}),declaredNames:c,undeclaredNames:n,refs:k,thisRefs:d.thisRefs}}function fC(d,c){d=$d.topLevelDeclsAndRefs(d,
c);var h=d.declaredNames.concat($d.knownGlobals);return $d.arr.filter(d.refs,function(f){return-1===h.indexOf(f.name)})}function Tn(d,c,h,f){if(!c&&!d)throw Error("Need at least ast or code");c=c?c:$d.stringify(d);d=d&&d.loc?d:$d.parse(c,{locations:!0});return $d.withMozillaAstDo(d,[],function(k,n,b){h.every(function(e){return $d.num.between(e,n.loc.start.line,n.loc.end.line)})&&($d.arr.pushIfNotIncluded(b,n),k());return b})}function yk(d,c,h,f){h=void 0===h?!0:h;f=void 0===f?{refs:[],decls:[]}:f;
if("this"===c)return f.refs.push.apply(f.refs,$jscomp.arrayFromIterable(d.thisRefs)),f;var k=$d.__varDeclIdsFor(d,c);if(!h&&k.length)return f;h=$jscomp.makeIterator(d.refs);for(var n=h.next();!n.done;n=h.next())n=n.value,n.name===c&&f.refs.push(n);f.decls.push.apply(f.decls,$jscomp.arrayFromIterable(k));d=$jscomp.makeIterator(d.subScopes);for(k=d.next();!k.done;k=d.next())yk(k.value,c,!1,f);return f}function Ax(d,c,h){var f=null;$d.arr.detect($d.scopesAtIndex(d,h).reverse(),function(k){k=$d.declarationsOfScope(k,
!0);var n=$d.arr.pluck(k,"name").indexOf(c);if(-1===n)return!1;f=k[n];return!0});return f}function at(d,c){c="string"===typeof c?$d.parse(c):c;return $d.custom.findNodesIncluding(c,d)}function dw(d,c,h){var f=$d.nodesAt(c.start,d).reverse().find(function(n){return $d.arr.include($d._stmtTypes,n.type)});if(h&&h.asPath){c=new $d.BaseVisitor;var k;c.accept=$d.fun.wrap(c.accept,function(n,b,e,m){if(b===f)throw k=m,Error("stop search");return n(b,e,m)});try{c.accept(d,{},[])}catch(n){}return k}return f}
function Hu(d){var c=[];d=d.node.body||[];for(var h=0;h<d.length;h++){var f=d[h];if("ImportDeclaration"===f.type)if(0===f.specifiers.length)c.push({local:null,imported:null,fromModule:f.source.value,node:f});else{var k=f.source?f.source.value:"unknown module";c.push.apply(c,$jscomp.arrayFromIterable(f.specifiers.map(function(n){return{local:n.local?n.local.name:null,imported:"ImportNamespaceSpecifier"===n.type?"*":"ImportDefaultSpecifier"===n.type?"default":"ImportSpecifier"===n.type?n.imported.name:
null,fromModule:k,node:f}})))}}return c}function Wo(d,c){(void 0===c?0:c)&&$d.resolveReferences(d);c=[];for(var h={},f=$jscomp.makeIterator(d.exportDecls),k=f.next();!k.done;h={$jscomp$loop$prop$node$2202:h.$jscomp$loop$prop$node$2202},k=f.next()){h.$jscomp$loop$prop$node$2202=k.value;var n=$d.statementOf(d.node,h.$jscomp$loop$prop$node$2202);if(n){var b=n.source?n.source.value:null;"ExportAllDeclaration"===n.type?c.push({local:null,exported:"*",imported:"*",fromModule:b,node:h.$jscomp$loop$prop$node$2202,
type:"all"}):"ExportDefaultDeclaration"===n.type?$d.helpers.isDeclaration(n.declaration)?c.push({local:n.declaration.id?n.declaration.id.name:null,exported:"default",type:"FunctionDeclaration"===n.declaration.type?"function":"ClassDeclaration"===n.declaration.type?"class":null,fromModule:null,node:h.$jscomp$loop$prop$node$2202,decl:n.declaration,declId:n.declaration.id}):"Identifier"===n.declaration.type?(k=d.resolvedRefMap.get(n.declaration)||{},c.push({local:n.declaration.name,exported:"default",
fromModule:null,node:h.$jscomp$loop$prop$node$2202,type:"id",decl:k.decl,declId:k.declId})):c.push({local:null,exported:"default",fromModule:null,node:h.$jscomp$loop$prop$node$2202,type:"expr",decl:n.declaration,declId:n.declaration}):n.specifiers&&n.specifiers.length?c.push.apply(c,$jscomp.arrayFromIterable(n.specifiers.map(function(e){return function(m){if(b){var a=e.$jscomp$loop$prop$node$2202;var g=m.exported}else m.local&&(a=(g=d.resolvedRefMap.get(m.local))?g.decl:null,g=g?g.declId:null);return{local:!b&&
m.local?m.local.name:null,exported:m.exported?m.exported.name:null,imported:b&&m.local?m.local.name:null,fromModule:b||null,type:"id",node:e.$jscomp$loop$prop$node$2202,decl:a,declId:g}}}(h)))):n.declaration&&n.declaration.declarations?c.push.apply(c,$jscomp.arrayFromIterable(n.declaration.declarations.map(function(e){return function(m){return{local:m.id?m.id.name:"default",exported:m.id?m.id.name:"default",type:n.declaration.kind,fromModule:null,node:e.$jscomp$loop$prop$node$2202,decl:m,declId:m.id}}}(h)))):
n.declaration&&c.push({local:n.declaration.id?n.declaration.id.name:"default",exported:n.declaration.id?n.declaration.id.name:"default",type:"FunctionDeclaration"===n.declaration.type?"function":"ClassDeclaration"===n.declaration.type?"class":null,fromModule:null,node:h.$jscomp$loop$prop$node$2202,decl:n.declaration,declId:n.declaration.id})}}return $d.arr.uniqBy(c,function(e,m){return e.local==m.local&&e.exported==m.exported&&e.fromModule==m.fromModule})}function Ap(d){return(new Yq.ObjectSpreadTransformer).accept(d,
{},[])}function ew(d,c){if(d.start===c.start&&d.end===c.end)return 0;if(d.end<=c.start)return-1;if(d.start>=c.end||d.start<=c.start&&d.end>=c.end)return 1;if(c.start<=d.start&&c.end>=d.end)return-1;throw Error("Comparing nodes");}function Dz(d,c,h){h="object"===typeof h?h:{changes:[],source:h};var f=!1,k=h.changes.reduce(function(b,e){if(b.end<e.pos)return b;var m=e.pos<b.start;f=f||e.pos>=b.start&&e.pos<=b.end;if("add"===e.type)return{start:m?b.start+e.string.length:b.start,end:b.end+e.string.length};
if("del"===e.type)return{start:m?b.start-e.length:b.start,end:b.end-e.length};throw Error("Cannot deal with change "+we.obj.inspect(e));},{start:d.start,end:d.end}),n=h.source;d=c(d,n.slice(k.start,k.end),f);d="string"===typeof d?d:Array.isArray(d)?d.map(we._node2string).join("\n"+we._findIndentAt(n,k.start)):d=we._node2string(d);k=[{type:"del",pos:k.start,length:k.end-k.start},{type:"add",pos:k.start,string:d}];return{changes:h.changes.concat(k),source:we._applyChanges(k,n)}}function Tm(d,c){d=d.sort(function(k,
n){return we._compareNodesForReplacement(k.target,n.target)});c="object"===typeof c?c:{changes:[],source:c};for(var h=0;h<d.length;h++){var f=d[h];c=we.replaceNode(f.target,f.replacementFunc,c)}return c}function Rr(d,c,h,f){f="object"===typeof d?d:null;d="string"===typeof d?d:f.source||we._node2string(f);return we.replaceNode(c,h,d)}function OI(d,c){c=void 0===c?[]:c;c.push.apply(c,$jscomp.arrayFromIterable(d.varDecls));d=$jscomp.makeIterator(d.subScopes);for(var h=d.next();!h.done;h=d.next())OI(h.value,
c);return c}function gC(d){var c="object"===typeof d?d:we.parse(d);d="string"===typeof d?d:c.source||we._node2string(c);c=we.scopes(c);var h=we.__findVarDecls(c);c=[];h=$jscomp.makeIterator(h);for(var f=h.next();!f.done;f=h.next())c.push({target:f.value,replacementFunc:function(k,n,b){b&&(k=we.parse(n).body[0]);return k.declarations.map(function(e){return{type:"VariableDeclaration",kind:"var",declarations:[e]}})}});return we.replaceNodes(c,d)}function hC(d){var c="object"===typeof d?d:we.parse(d);
d="string"===typeof d?d:c.source||we._node2string(c);c=we.scopes(c);var h=we.__findVarDecls(c);c=[];h=$jscomp.makeIterator(h);for(var f=h.next();!f.done;f=h.next())c.push({target:f.value,replacementFunc:function(k,n,b){b&&(k=we.parse(n).body[0]);n=[];k=$jscomp.makeIterator(k.declarations);for(b=k.next();!b.done;b=k.next()){var e=b.value;b={type:"Identifier",name:"__temp"};n.push({type:"VariableDeclaration",kind:"var",declarations:[{type:"VariableDeclarator",id:b,init:e.init}]});e=$jscomp.makeIterator(we.helpers.objPropertiesAsList(e.id,
[],!1));for(var m=e.next();!m.done;m=e.next())m=m.value.key,n.push(we.varDecl(m[m.length-2],we.memberChain.apply(we,[b.name].concat($jscomp.arrayFromIterable(m))),"var"))}return n}});return we.replaceNodes(c,d)}function jq(d,c){c=c||{};var h=we.parse(d,c),f=we.arr.last(h.body);if("ExpressionStatement"!==f.type)return c.asAST?h:d;h.body.splice(h.body.length-1,1,we.returnStmt(f.expression));return c.asAST?h:we.stringify(h)}function Bx(d,c){c=c||{};d=we.returnLastStatement(d,c);return c.asAST?we.program(we.funcExpr.apply(we,
[{id:c.id||void 0},[]].concat($jscomp.arrayFromIterable(d.body)))):"function"+(c.id?" "+c.id:"")+"() {\n"+d+"\n}"}function fw(d,c){"string"===typeof d&&(d=we.parse(d));c=c||{};var h="Program"===d.type,f=c.startFuncNode||we.id("__start_execution");c=c.endFuncNode||we.id("__end_execution");var k=we.topLevelFuncDecls(d),n=d.body,b=[];k.forEach(function(e){var m=e.node;we.Path(e.path).set(d,we.exprStmt(m.id));b.push(m)});n.unshift(we.exprStmt(we.funcCall(f)));f=we.arr.last(n);"ExpressionStatement"===
f.type?(n.pop(),n.push(we.exprStmt(we.funcCall(c,we.id("null"),f.expression)))):"VariableDeclaration"===f.type&&"Identifier"===we.arr.last(f.declarations).id.type?n.push(we.exprStmt(we.funcCall(c,we.id("null"),we.arr.last(f.declarations).id))):n.push(we.exprStmt(we.funcCall(c,we.id("null"),we.id("undefined"))));b.push(we.tryStmt.apply(we,["err",[we.exprStmt(we.funcCall(c,we.id("err"),we.id("undefined")))]].concat($jscomp.arrayFromIterable(n))));return h?we.program.apply(we,$jscomp.arrayFromIterable(b)):
we.block.apply(we,$jscomp.arrayFromIterable(b))}function Cx(d){if(!we.isProbablySingleExpressionRe.test(d)||30<d.split("\n").length)return d;try{var c=we.fuzzyParse(d);1===c.body.length&&("FunctionDeclaration"===c.body[0].type||"BlockStatement"===c.body[0].type&&"LabeledStatement"===c.body[0].body[0].type)&&(d="("+d.replace(/;\s*$/,"")+")")}catch(h){"undefined"!==typeof $world?$world.logError(h):console.error("Eval preprocess error: %s",h.stack||h)}return d}function iC(d,c){var h=ng.statementOf(d,
c,{asPath:!0}).slice(0,-2);h=ng.Path(h).get(d);return h.comments&&h.comments.length?ng.chain(ng.extractComments(d)).reversed().detect(function(f){return f.followingNode===c}).value():null}function Ez(d,c){function h(v){return ng.arr.detect(v.node.body,function(y){return y.start>v.comment.end})}function f(v){return{type:"unknown",comment:v.comment.text}}function k(v){v=ng.Path(v.path.slice(0,-1)).get(g);return{name:v.id?v.id.name:"<error: no name for function>",args:ng.arr.pluck(v.params,"name")}}
function n(v){for(var y=ng.Path(v.path.slice(0,-2)).get(g),A=y.key?y.key.name:"<error: no name for method>",E=v.path.slice(),F="<error: no object found for method>";E.length&&"init"!==ng.arr.last(E);)E.pop();E.length&&(F=ng.Path(E.slice(0,-1).concat(["id","name"])).get(g));if(ng.string.startsWith(F,"<error")){for(E=v.path.slice();E.length&&"right"!==ng.arr.last(E);)E.pop();E.length&&(F=ng.Path(E.slice(0,-1).concat(["left"])).get(g),F=l.slice(F.start,F.end))}ng.string.startsWith(F,"<error")&&(E=v.path.slice(),
(v=(v=ng.Path(E.slice(0,-6)).get(g))&&"CallExpression"===v.type&&v.arguments[0])&&(F=l.slice(v.start,v.end)));return{name:A,args:ng.arr.pluck(y.value.params,"name"),objectName:F}}function b(v){v=ng.Path(v.path.slice(0,-1)).get(g);if("FunctionExpression"!==v.type&&"FunctionDeclaration"!==v.type)return{};var y=ng.statementOf(g,v);if("ExpressionStatement"!==y.type||"AssignmentExpression"!==y.expression.type)return{};var A=l.slice(y.expression.left.object.start,y.expression.left.object.end);return{name:l.slice(y.expression.left.property.start,
y.expression.left.property.end),objectName:A,args:ng.arr.pluck(v.params,"name")}}function e(v){var y=v.path.slice(0,-3);var A=ng.Path(y).get(g);if(A&&"Property"===A.type){var E=ng.arr.pluck(A.value.callee.params,"name");var F=A.key?A.key.name:"<error: no name for method>"}F||(y=v.path.slice(0,-2),(A=ng.Path(y).get(g))&&"Property"===A.type&&(E=ng.arr.pluck(A.value.params,"name"),F=A.key?A.key.name:"<error: no name for method>"));F||(F="<error: no name for method>",E=[],y=v.path);A=ng.arr.clone(y);
for(v="<error: no object found for method>";A.length&&"init"!==ng.arr.last(A);)A.pop();A.length&&(v=ng.Path(A.slice(0,-1).concat(["id","name"])).get(g));if(ng.string.startsWith(v,"<error")){for(A=ng.arr.clone(y);A.length&&"right"!==ng.arr.last(A);)A.pop();A.length&&(v=ng.Path(A.slice(0,-1).concat(["left"])).get(g),v=l.slice(v.start,v.end))}ng.string.startsWith(v,"<error")&&(A=ng.arr.clone(y),(y=(y=ng.Path(A.slice(0,-4)).get(g))&&"CallExpression"===y.type&&y.arguments[0])&&(v=l.slice(y.start,y.end)));
return{name:F,args:E,objectName:v}}function m(v){return v&&"VariableDeclaration"===v.type&&1===v.declarations.length}function a(v){return"AssignmentExpression"!==v.type?!1:"ObjectExpression"===v.right.type?!0:"AssignmentExpression"===v.right.type?a(v.right):!1}var g="string"===typeof d?ng.parse(d,{withComments:!0}):d,l=c?c:"string"===typeof d?d:ng.stringify(d),r=ng.arr.sortBy(function(v){var y=[],A=new ng.Visitor;A.accept=ng.fun.wrap(A.accept,function(E,F,H,I){F.comments&&ng.arr.pushAll(y,F.comments.map(function(M){return{path:I,
comment:M,node:F}}));return E(F,H,I)});A.accept(v,y,[]);return y}(g),function(v){return v.comment.start});return r.map(function(v,y){if(ng.arr.equals(v.path.slice(-2),["value","body"]))return ng.obj.merge([v,v.comment,{type:"method",comment:v.comment.text},n(v)]);var A=v.path.slice(-5);ng.arr.removeAt(A,1);if(ng.arr.equals(A,["properties","value","callee","body"]))return ng.obj.merge([v,v.comment,{type:"method",comment:v.comment.text},e(v)]);if((A=ng.Path(v.path.slice(0,-1)).get(g))&&"FunctionDeclaration"===
A.type)return ng.obj.merge([v,v.comment,{type:"function",comment:v.comment.text},k(v)]);if(ng.arr.equals(v.path.slice(-2),["right","body"]))return ng.obj.merge([v,v.comment,{type:"method",comment:v.comment.text},b(v)]);A=h(v);return A?(y=r[y+1])&&y.comment.start<=A.start?ng.obj.merge([v,v.comment,{followingNode:A},f(v)]):m(A)&&("ObjectExpression"===A.declarations[0].init.type||a(A.declarations[0].init))?ng.obj.merge([v,v.comment,{followingNode:A},{type:"object",comment:v.comment.text},{name:A.declarations[0].id.name}]):
m(A)?ng.obj.merge([v,v.comment,{followingNode:A},{type:"var",comment:v.comment.text},{name:A.declarations[0].id.name}]):ng.obj.merge([v,v.comment,{followingNode:A},f(v)]):ng.obj.merge([v,v.comment,{followingNode:A},f(v)])})}function bt(d,c){c=c||ci.obj.merge({hideOneLiners:!1},c);"string"===typeof d&&(d=ci.parse(d,{addSource:!0}));for(var h=[],f=$jscomp.makeIterator("Program"===d.type?d.body:d.body.body),k=f.next();!k.done;k=f.next()){k=k.value;k=ci.unwrapExport(k);var n=ci.functionWrapper(k,c)||
ci.varDefs(k)||ci.funcDef(k)||ci.es6ClassDef(k)||ci.someObjectExpressionCall(k);if(n){if(c.hideOneLiners)if(d.loc)n=ci.arr.filter(n,function(e){return!e.node.loc||e.node.loc.start.line!==e.node.loc.end.line});else if(d.source){k=[];n=$jscomp.makeIterator(n);for(var b=n.next();!b.done;b=n.next())b=b.value,(b.parent&&k.includes(b.parent)||(b.node.source||"").includes("\n"))&&k.push(b);n=k}h.push.apply(h,$jscomp.arrayFromIterable(n))}}return h}function Iu(d){return ci.arr.flatmap(d,function(c){return c?
"Identifier"===c.type?[c]:"RestElement"===c.type?[c.argument]:"ObjectPattern"===c.type?Iu(ci.arr.pluck(c.properties,"value")):"ArrayPattern"===c.type?Iu(c.elements):[]:[]})}function Sr(d){return Dg.isValidIdentifierRe.test(d)}function xo(){return"undefined"!==typeof System?System.global:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof Global?Global:"undefined"!==typeof self?self:function(){return this}()}function jC(d,c){c=String(c).match(/function\s*[a-zA-Z0-9_$]*\s*\(([^\)]*)\)/);
return d+"("+(c&&c[1]||"")+")"}function Bp(d){return d===d||d===Array||d===Function||d===String||d===Boolean||d===Date||d===RegExp||d===Number||d===Promise?!0:d instanceof Function&&(void 0!==d.superclass||void 0!==d._superclass)}function ct(d,c){return d.map(function(h){return h[c]})}function dt(d){if(Symbol.keyFor(d))return'Symbol.for("'+Symbol.keyFor(d)+'")';if(di.knownSymbols.get(d))return di.knownSymbols.get(d);String(d).match(di.symMatcher);return String(d)}function Zq(d){if(!d)return String(d);
if(Array.isArray(d))return"["+d.map(Zq).join(",")+"]";if("symbol"===typeof d)return di.printSymbol(d);try{return String(d)}catch(c){throw Error("Cannot print object: "+c.stack);}}function kq(d,c){c=void 0===c?{}:c;var h=d.value,f=d.isPromise,k=d.promisedValue,n=d.promiseStatus;return d.isError||h instanceof Error?(c=String(h),(k=h.stack||"")&&h.message!==h.stack&&(k=String(k),0===k.indexOf(c)&&(k=k.slice(c.length)),c+="\n"+k),c):f?(d=di.string.print(n),c="pending"===n?void 0:kq({value:k},c),"Promise({status: "+
d+", "+(void 0===h?"":"value: "+c)+"})"):h instanceof Promise?'Promise({status: "unknown"})':c.inspect?di.printInspectEvalValue(h,c.inspectDepth||2):String(h)}function gw(d,c){var h="";return Promise.resolve().then(function(){var f=c.lastIndexOf(".");0<=f?(h=c.slice(f+1),c=c.slice(0,f)):(h=c,c='(typeof window === "undefined" ? global : window)');return d(c)}).then(function(f){return{evalResult:f,startLetters:h,code:c}})}function et(d,c,h){d=Ri.getObjectForCompletion(d,c).then(function(f){var k=f.evalResult;
f={completions:Ri.descriptorsOfObjAndProtoProperties(k&&k.isEvalResult?k.value:k),startLetters:f.startLetters,code:f.code};k&&k.isPromise&&("fulfilled"===k.promiseStatus?f.promiseResolvedCompletions=Ri.descriptorsOfObjAndProtoProperties(k.promisedValue):"rejected"===k.promiseStatus&&(f.promiseRejectedCompletions=Ri.descriptorsOfObjAndProtoProperties(k.promisedValue)));return f});"function"===typeof h&&d.then(function(f){return h(null,f)}).catch(function(f){return h(f)});return d}function Ju(d,c,h){c||
(c={type:"Identifier",name:"__rec"});h=Object.assign({ignoreUndeclaredExcept:null,includeRefs:null,excludeRefs:h&&h.exclude||[],includeDecls:null,excludeDecls:h&&h.exclude||[],recordDefRanges:!1,es6ExportFuncId:null,es6ImportFuncId:null,captureObj:c,moduleExportFunc:{name:h&&h.es6ExportFuncId||"_moduleExport",type:"Identifier"},moduleImportFunc:{name:h&&h.es6ImportFuncId||"_moduleImport",type:"Identifier"},declarationWrapper:void 0,classTransform:function(k){return k}},h);c=d;if(h.ignoreUndeclaredExcept){var f=
vc.topLevelDeclsAndRefs(d);h.excludeRefs=vc.arr.withoutAll(f.undeclaredNames,h.ignoreUndeclaredExcept).concat(h.excludeRefs);h.excludeDecls=vc.arr.withoutAll(f.undeclaredNames,h.ignoreUndeclaredExcept).concat(h.excludeDecls)}h.excludeRefs=h.excludeRefs.concat(h.captureObj.name);h.excludeDecls=h.excludeDecls.concat(h.captureObj.name);h.recordDefRanges&&vc.computeDefRanges(c,h);h.excludeRefs=h.excludeRefs.concat(vc.additionalIgnoredRefs(d,h));h.excludeDecls=h.excludeDecls.concat(vc.additionalIgnoredDecls(d,
h));c=vc.fixDefaultAsyncFunctionExportForRegeneratorBug(c,h);h.es6ExportFuncId&&(h.excludeRefs.push(h.es6ExportFuncId),h.excludeRefs.push(h.es6ImportFuncId),c=vc.es6ModuleTransforms(c,h));c=vc.replaceRefs(c,h);c=vc.replaceVarDecls(c,h);c=vc.clearEmptyExports(c,h);c=vc.replaceClassDecls(c,h);c=vc.splitExportDeclarations(c,h);c=vc.insertCapturesForExportDeclarations(c,h);c=vc.insertCapturesForImportDeclarations(c,h);c=vc.insertDeclarationsForExports(c,h);c=vc.putFunctionDeclsInFront(c,h);return c=vc.transformImportMeta(c,
h)}function Um(d,c,h){h=Object.assign({captureObj:c||{type:"Identifier",name:"__rec"},exclude:[],declarationWrapper:void 0},h);c=vc.Path("body.0.expression").get(d);if("System"!==c.callee.object.name)throw Error("rewriteToRegisterModuleToCaptureSetters: input doesn't seem to be a System.register call: "+vc.stringify(d).slice(0,300)+"...");if("register"!==c.callee.property.name)throw Error("rewriteToRegisterModuleToCaptureSetters: input doesn't seem to be a System.register call: "+vc.stringify(d).slice(0,
300)+"...");c=vc.Path("arguments.1.body.body").get(c);var f=vc.arr.last(c);if("ReturnStatement"!==f.type)throw Error("rewriteToRegisterModuleToCaptureSetters: input doesn't seem to be a System.register call, at return statement: "+vc.stringify(d).slice(0,300)+"...");var k=f.argument.properties.find(function(n){return"setters"===n.key.name});if(!k)throw Error("rewriteToRegisterModuleToCaptureSetters: input doesn't seem to be a System.register call, at finding setters: "+vc.stringify(d).slice(0,300)+
"...");f=f.argument.properties.find(function(n){return"execute"===n.key.name});if(!f)throw Error("rewriteToRegisterModuleToCaptureSetters: input doesn't seem to be a System.register call, at finding execute: "+vc.stringify(d).slice(0,300)+"...");k.value.elements.forEach(function(n){n.params[0]=vc.assign(n.params[0],vc.nodes.objectLiteral({}));n.body.body=n.body.body.map(function(b){if("ExpressionStatement"!==b.type||"AssignmentExpression"!==b.expression.type||"Identifier"!==b.expression.left.type||
vc.arr.include(h.exclude,b.expression.left.name))return b;var e=b.expression.left;b=h.declarationWrapper?vc.declarationWrapperCall(h.declarationWrapper,null,vc.literal(e.name),vc.literal("var"),b.expression,h.captureObj,h):b.expression;return vc.exprStmt(vc.assign(vc.member(h.captureObj,e),b))})});(k=f.value.body.body.find(function(n){return"ExpressionStatement"===n.type&&"AssignmentExpression"==n.expression.type&&n.expression.left.name===h.captureObj.name}))||(k=f.value.body.body.find(function(n){return"VariableDeclaration"===
n.type&&n.declarations[0].id&&n.declarations[0].id.name===h.captureObj.name}));k&&(vc.arr.remove(f.value.body.body,k),vc.arr.pushAt(c,k,c.length-1));h.sourceAccessorName&&((k=f.value.body.body.find(function(n){return"ExpressionStatement"===n.type&&"AssignmentExpression"==n.expression.type&&n.expression.left.name===h.sourceAccessorName}))||(k=f.value.body.body.find(function(n){return"VariableDeclaration"===n.type&&n.declarations[0].id&&n.declarations[0].id.name===h.sourceAccessorName})),k&&(vc.arr.remove(f.value.body.body,
k),vc.arr.pushAt(c,k,c.length-1)));return d}function Dx(d,c){var h=vc.stringify(c.captureObj),f=0;d.body=d.body.reduce(function(k,n){var b=[n],e="",m=!1;if("ExportNamedDeclaration"===n.type){if(n.source){var a=n.specifiers.map(function(g){return[g.local.name,g.exported.name]});e="import { "+a.map(function(g){var l=$jscomp.makeIterator(g);g=l.next().value;l=l.next().value;return g===l?l:g+" as "+l}).join(",")+" } from "+n.source.raw+";\n";m="export { "+a.map(function(g){g=$jscomp.makeIterator(g);g.next();
return g.next().value}).join(",")+" };\n"}else n.declaration?(a=n.declaration.declarations||[],a=a.map(function(g){return[g.id.name,g.id.name]})):a=n.specifiers.map(function(g){return[g.exported.name,g.local.name]});m&&(b=[],e+=m);b=b.concat(vc.parse(e+a.map(function(g){var l=$jscomp.makeIterator(g);g=l.next().value;l=l.next().value;return h+"."+g+" = "+l+";\n"+(h+"."+l+" = "+l+";\n")}).join("\n")))}"ExportAllDeclaration"===n.type&&(f++,b=b.concat(vc.parse("\n       import * as __captured"+f+"__ from "+
n.source.raw+";\n       Object.assign("+h+", __captured"+f+"__);\n      ")));return k.concat(b)},[]);return d}function hw(d){(this||Fz).__wrapped__=d;(this||Fz).__actions__=[];(this||Fz).__dir__=1;(this||Fz).__filtered__=!1;(this||Fz).__iteratees__=[];(this||Fz).__takeCount__=4294967295;(this||Fz).__views__=[]}function kC(d,c){(this||fF).__wrapped__=d;(this||fF).__actions__=[];(this||fF).__chain__=!!c;(this||fF).__index__=0;(this||fF).__values__=void 0}function pn(d){if(Vaa(d)&&!Waa(d)&&!(d instanceof
Xaa)){if(d instanceof HX)return d;if(Yaa.call(d,"__wrapped__"))return Zaa(d)}return new HX(d)}function Gz(d,c,h,f,k,n,b,e,m,a){function g(){for(var F=arguments.length,H=Array(F),I=F;I--;)H[I]=arguments[I];if(y)var M=$aa(g),N=aba(H,M);f&&(H=bba(H,f,k,y));n&&(H=cba(H,n,b,y));F-=N;if(y&&F<a)return I=dba(H,M),eba(d,c,Gz,g.placeholder,h,H,I,e,m,a-F);I=r?h:this||PI;M=v?I[d]:d;F=H.length;e?H=fba(H,e):A&&1<F&&H.reverse();l&&m<F&&(H.length=m);(this||PI)&&(this||PI)!==gba&&(this||PI)instanceof g&&(M=E||IX(M));
return M.apply(I,H)}var l=c&128,r=c&1,v=c&2,y=c&24,A=c&512,E=v?void 0:IX(d);return g}function iw(d){return d&&d.__esModule?d:{default:d}}function lC(d){if(Array.isArray(d)){for(var c=0,h=Array(d.length);c<d.length;c++)h[c]=d[c];return h}return Array.from(d)}function QI(d){var c=null;"string"===typeof d.version&&/^7\./.test(d.version)&&(c=Object.getPrototypeOf(d),!c||Object.prototype.hasOwnProperty.call(c,"version")&&Object.prototype.hasOwnProperty.call(c,"transform")&&Object.prototype.hasOwnProperty.call(c,
"template")&&Object.prototype.hasOwnProperty.call(c,"types")||(c=null));return Object.assign({},c,d)}function Ku(d,c){c=void 0===c?"__lvVarRecorder":c;gk.ensureJSXPlugin();"function"===typeof d&&(d=String(d));if(lively.FreezerRuntime)return d.split(c+".").join("");d="string"===typeof d?gk.parseFunction(d):d;d=gk.ReplaceVisitor.run(d,function(h){return"MemberExpression"===h.type&&"Identifier"===h.object.type&&h.object.name===c?h.property:h});return gk.stringify(d)}function lq(d){if("undefined"===typeof babel)return console.warn("[lively.freezer] Skipped async/await transpilation because babel not loaded."),
d;gk.ensureJSXPlugin();gk.ensureOptionalCatchBinding();gk.ensureImportMeta();d=babel.transform(d,{sourceMap:void 0,inputSourceMap:void 0,babelrc:!1,presets:[["es2015",{modules:!1}]],plugins:["transform-exponentiation-operator","transform-async-to-generator","syntax-object-rest-spread","transform-object-rest-spread"],code:!0,ast:!1}).code;d=d.replace(/\}\)\.call\(undefined\);$/,"}).call(this)");d.startsWith("(function")&&d.endsWith(");")&&(d=d.slice(1,-2));return d}function Xo(d,c){d=Rg.transform.transformSingleExpression(d);
d=Rg.parse(d,{withComments:!0});c=Rg.processInlineCodeTransformOptions(d,c);var h=Rg.query.topLevelDeclsAndRefs(d),f=h.classDecls,k=h.funcDecls;h=h.varDecls;var n={};c.hasOwnProperty("evalId")&&(n.evalId=c.evalId);c.sourceAccessorName&&(n.sourceAccessorName=c.sourceAccessorName);[].concat($jscomp.arrayFromIterable(f),$jscomp.arrayFromIterable(k)).forEach(function(m){return m["x-lively-object-meta"]=Object.assign({},n,{start:m.start,end:m.end})});h.forEach(function(m){return m.declarations.forEach(function(a){return a["x-lively-object-meta"]=
Object.assign({},n,{start:a.start,end:a.end})})});d=Rg.transform.objectSpreadTransform(d);!c.topLevelVarRecorder&&c.topLevelVarRecorderName&&(f=Rg.getGlobal(),c.topLevelVarRecorder="GLOBAL"===c.topLevelVarRecorderName?Rg.getGlobal():Rg.Path(c.topLevelVarRecorderName).get(f));if(c.topLevelVarRecorder){f=(c.dontTransform||[]).concat(["arguments"]);k=c.recordGlobals?null:Rg.arr.withoutAll(Object.keys(c.topLevelVarRecorder),f);h=Rg.id(c.varRecorderName||"__lvVarRecorder");var b=void 0;if(c.declarationWrapperName||
"function"===typeof c.declarationCallback){var e=c.declarationWrapperName||Rg.defaultDeclarationWrapperName;c.declarationWrapper=Rg.member(Rg.id(c.varRecorderName||"__lvVarRecorder"),Rg.literal(e),!0);c.declarationCallback&&(c.topLevelVarRecorder[e]=c.declarationCallback)}if(c.hasOwnProperty("transformES6Classes")?c.transformES6Classes:1)b={currentModuleAccessor:c.currentModuleAccessor,classHolder:h,functionNode:Rg.member(h,Rg.defaultClassToFunctionConverterName),declarationWrapper:c.declarationWrapper,
evalId:c.evalId,sourceAccessorName:c.sourceAccessorName,transform:c.classTransform};d=Rg.capturing.rewriteToCaptureTopLevelVariables(d,h,{es6ImportFuncId:c.es6ImportFuncId,es6ExportFuncId:c.es6ExportFuncId,ignoreUndeclaredExcept:k,exclude:f,declarationWrapper:c.declarationWrapper||void 0,classToFunction:b,evalId:c.evalId,sourceAccessorName:c.sourceAccessorName,keepTopLevelVarDecls:c.keepTopLevelVarDecls})}c.wrapInStartEndCall&&(d=Rg.transform.wrapInStartEndCall(d,{startFuncNode:c.startFuncNode,endFuncNode:c.endFuncNode}));
d=Rg.stringify(d);c.jsx&&(d=Rg.es5Transpilation(d));c.sourceURL&&(d+="\n//# sourceURL="+c.sourceURL.replace(/\s/g,"_"));return d}function mq(d,c){c=void 0===c?{}:c;if(!c.topLevelVarRecorder)return d;if("function"===typeof c.declarationCallback||c.declarationWrapperName){var h=c.declarationWrapperName||Rg.defaultDeclarationWrapperName;c.declarationWrapper=Rg.member(Rg.id(c.varRecorderName),Rg.literal(h),!0);c.declarationCallback&&(c.topLevelVarRecorder[h]=c.declarationCallback)}d=Rg.parse(d);h=(c.dontTransform||
[]).concat(["arguments"]);c.recordGlobals||Rg.arr.withoutAll(Object.keys(c.topLevelVarRecorder),h);c=Rg.capturing.rewriteToRegisterModuleToCaptureSetters(d,Rg.id(c.varRecorderName||"__lvVarRecorder"),Object.assign({exclude:h},c));return Rg.stringify(c)}function Ex(d,c,h){"function"===typeof c&&2===arguments.length&&(h=c,c=null);var f=new dh.EvalResult,k=!1,n=!1;c=dh._normalizeEvalOptions(c);var b=dh.promise.deferred(),e=c.topLevelVarRecorder||dh.getGlobal(),m=d;c.wrapInStartEndCall&&(e[dh.startEvalFunctionName]&&
console.warn(f.addWarning("startEvalFunctionName "+dh.startEvalFunctionName+" already exists in recorder!")),e[dh.endEvalFunctionName]&&console.warn(f.addWarning("endEvalFunctionName "+dh.endEvalFunctionName+" already exists in recorder!")),e[dh.startEvalFunctionName]=function(){if(k)console.warn(f.addWarning("onEvalStartCalled multiple times!"));else if(k=!0,"function"===typeof c.onStartEval)c.onStartEval()},e[dh.endEvalFunctionName]=function(l,r){n?console.warn(f.addWarning("onEvalEndCalled multiple times!")):
(n=!0,dh.finishEval(l,r,f,c,e,b,h))});try{d=dh.evalCodeTransform(d,c),c.header&&(d=c.header+d),c.footer&&(d+=c.footer),c.transpiler&&(d=c.transpiler(d,c.transpilerOptions))}catch(l){console.warn(f.addWarning("lively.vm evalCodeTransform not working: "+l))}try{"undefined"!==typeof $world&&$world.get("log")&&($world.get("log").textString=d);var a=dh._eval.call(c.context,d,c.topLevelVarRecorder,c.originalSource||m)}catch(l){var g=l}if(c.wrapInStartEndCall){if(g&&!n)e[dh.endEvalFunctionName](g,void 0)}else dh.finishEval(g,
g||a,f,c,e,b,h);return c.sync?f:b.promise}function Hz(d,c){c=Object.assign(c||{},{sync:!0});return dh.runEval(d,c)}function Yo(d){if(void 0===d){if("undefined"===typeof System)return null;d=System}var c=d.get("@lively-env");c||d.set("@lively-env",d.newModule({options:{}}));c=c.options;if(!c)throw Error("@lively-env registered read-only");c.emitter||Object.assign(c,{emitter:d["__lively.notifications_emitter"]||(d["__lively.notifications_emitter"]=mC({},{maxListenerLimit:1E4})),notifications:d["__lively.notifications_notifications"]||
(d["__lively.notifications_notifications"]=[])});return{emitter:c.emitter,notifications:c.notifications}}function Fx(d,c,h){Yo(h).emitter.on(d,c);return c}function ft(d,c,h,f){c=void 0===c?{}:c;h=void 0===h?Date.now():h;c=Object.assign({type:d,time:h},c);h=Yo(f);f=h.emitter;h=h.notifications;f.emit(d,c);f.isLogging&&(d=c.type+" ".repeat(Math.max(0,32-c.type.length)),console.log(d+" "+Gi(c,{maxDepth:2})));f.isRecording&&(h.push(c),h.limit&&h.splice(0,h.length-h.limit));return c}function jw(d,c,h){Yo(h).emitter.removeListener(d,
c);return c}function jm(d,c,h){h=Object.assign({targetModule:null,parentModule:null,es6Transpile:!0,transpiler:null,transpilerOptions:null,format:"esm"},h);d.debug&&console.log("[lively.module] runEval: "+c.slice(0,100).replace(/\n/mg," ")+"...");var f=h,k=f.format,n=f.targetModule;n=d.decanonicalize(n||"*scratch*",f.parentModule);h.targetModule=n;k&&((f=d.getConfig().meta[n])||(f={}),f[n]||(f[n]={}),f[n].format||(f[n].format=k,d.config(f)));k=d.get("@lively-env").moduleEnv(n);f=k.recorder;var b=
k.recorderName,e=k.dontTransform,m=ri.getEs6Transpiler(d,h,k),a="var _moduleExport = "+b+"._moduleExport,\n    _moduleImport = "+(b+"._moduleImport;\n");h=Object.assign({waitForPromise:!0,sync:!1,evalId:h.evalId||k.nextEvalId(),sourceAccessorName:(h.hasOwnProperty("embedOriginalCode")?h.embedOriginalCode:1)?"__lvOriginalCode":void 0,originalSource:c},h,{header:a,recordGlobals:!0,dontTransform:e,varRecorderName:b,topLevelVarRecorder:f,sourceURL:h.sourceURL||h.targetModule,context:h.context||f,wrapInStartEndCall:!0,
es6ExportFuncId:"_moduleExport",es6ImportFuncId:"_moduleImport",transpiler:m,declarationWrapperName:k.varDefinitionCallbackName,currentModuleAccessor:ri.funcCall(ri.member(ri.funcCall(ri.member(ri.member("__lvVarRecorder","System"),"get"),ri.literal("@lively-env")),"moduleEnv"),ri.literal(h.targetModule))});if(!h.sync&&!h.importsEnsured&&ri.hasUnimportedImports(d,c,n))return ri.ensureImportsAreImported(d,c,n).catch(function(g){return null}).then(function(g){return jm(d,g,Object.assign({},h,{importsEnsured:!0}))});
if(!k.record()){if(!h.sync&&!h._moduleImported)return d.import(n).catch(function(g){return null}).then(function(){return jm(d,c,Object.assign({},h,{_moduleImported:!0}))});k.ensureRecord()}if(h.es6Transpile&&h.transpiler instanceof Promise)if(h.sync||h._transpilerLoaded)console.warn("[lively.vm] sync eval requested but transpiler is not yet loaded, will continue without transpilation!"),h.transpiler=null;else return h.transpiler.catch(function(g){return console.error(g)}).then(function(g){return jm(d,
c,Object.assign({},h,{transpiler:g,_transpilerLoaded:!0}))});d.debug&&console.log("[lively.module] runEval in module "+n+" started");ri.emit("lively.vm/doitrequest",{code:c,waitForPromise:h.waitForPromise,targetModule:h.targetModule},Date.now(),d);d.get("@lively-env").evaluationStart(n);n=ri.vmRunEval(c,h);return h.sync?ri.evalEnd(d,c,h,n):Promise.resolve(n).then(function(g){return ri.evalEnd(d,c,h,g)})}function Cp(d,c){var h=c=Object.assign({format:"esm",System:null,targetModule:null},c),f=h.format,
k=h.System;h=h.targetModule;k||"undefined"===typeof System||(k=System);return!k&&h?Promise.reject(Error("options to runEval have targetModule but cannot find system loader!")):h&&["esm","es6","register"].includes(f)?ql.esmEval.runEval(k,d,c):ql.globalEval.runEval(d,c)}function Tr(d,c){return ql.globalEval.syncEval(d,c)}function yo(d){return Gf.withSuperclasses(d).slice(1)}function gt(d){var c=[];do c.push(d),d=d[Gf.superclassSymbol];while(d&&d.name);return c.map(function(h){return h.name}).join("->")}
function nC(d){for(var c=[];d;)c.push(d),d=d[Gf.superclassSymbol];return c}function qn(d,c){do if(d===c)return!0;while(d=d[Gf.superclassSymbol]);return!1}function Lu(d,c){if(d.constructor===c&&d.__proto__===c.prototype)return d;d.constructor=c;d.__proto__=c.prototype;return d}function nq(d){return d&&"function"===typeof d}function oC(d){var c=Gf.RuntimeSourceDescriptor.for(d),h=c.ast;c=c.type;if("ClassDeclaration"!==c)throw Error("Expected class but got "+c);return Gf.Path("body.body").get(h).map(function(f){var k=
f.static,n=f.kind;f=f.key;var b=f.value;f=f.name||b;b=k?d:d.prototype;b="get"===n?b.__lookupGetter__(f):"set"===n?b.__lookupSetter__(f):b[f];return{static:k,name:f,value:b,kind:n,owner:d}})}function ht(d){return Gf.runtimeNonStaticMembers(d).concat(Gf.runtimeNonStaticMembers(d))}function kw(d){var c=Gf.obj.getOwnPropertyDescriptors(d);return Gf.arr.withoutAll(Object.keys(c),["prototype","name","length","toString"]).map(function(h){var f=c[h],k="function"===typeof f.value?"method":"get"in f?"get":
"set"in f?"set":"unknown";return{static:!0,name:h,value:"method"===k?f.value:"get"===k?f.get:"set"===k?f.set:null,kind:k,owner:d}})}function it(d){return Gf.arr.uniq(Gf.arr.flatmap(Gf.arr.without(Gf.withSuperclasses(d),Object),function(c){return Gf.runtimeStaticClassMembers(c)}))}function Ur(d){var c=ij.propertiesAndSettingsInHierarchyOf(d),h=c.properties;c=c.propertySettings;d[ij.propertiesAndSettingsCacheSym]={properties:h,order:ij.obj.sortKeysWithBeforeAndAfterConstraints(h),propertySettings:c,
classHierarchy:ij.getClassHierarchy(d)};h&&"object"===typeof h?ij.prepareClassForProperties(d,c,h):console.warn("Class "+d.name+" indicates it has managed properties but its properties accessor ("+(ij.defaultPropertiesKey+") does not return a valid property descriptor map"))}function Vr(d,c){c!==d.constructor&&(d.constructor=c,og.setPrototypeOf(d,c.prototype))}function lw(d,c){c=c?"function"===typeof c?c:c.value?c.value:Object:Object;var h=d&&d[og.superclassSymbol];h&&h===c||(og.ensureInitializeStub(c),
d[og.superclassSymbol]=c,og.setPrototypeOf(d.prototype,c.prototype),c!==Object&&og.setPrototypeOf(d,c));return c}function dc(d,c,h,f,k,n,b){h=void 0===h?[]:h;f=void 0===f?[]:f;k=void 0===k?{}:k;var e=d.name,m=e&&k.hasOwnProperty(e)&&k[e];k=m&&m[og.superclassSymbol];m&&"function"===typeof m&&k||(m=d);og.setSuperclass(m,c);og.installMethods(m,h,f);m[og.objMetaSymbol]=b;n&&(d=n.package(),b=m[og.moduleMetaSymbol],k=Date.now(),m[og.moduleMetaSymbol]={package:d?{name:d.name,version:d.version}:{},pathInPackage:d?
n.pathInPackage():n.id,lastChange:b&&b.lastChange&&k<=b.lastChange?b.lastChange+1:k,lastSuperclassChange:0},c&&c.referencedAs&&(m.hasOwnProperty(og.moduleSubscribeToToplevelChangesSym)&&n.unsubscribeFromToplevelDefinitionChanges(m[og.moduleSubscribeToToplevelChangesSym]),m[og.moduleSubscribeToToplevelChangesSym]=n.subscribeToToplevelDefinitionChanges(function(a,g){if(a===c.referencedAs){a=g&&g[og.moduleMetaSymbol];var l=m[og.moduleMetaSymbol];if(a){if(a.lastChange===l.lastSuperclassChange)return;
l.lastSuperclassChange=a.lastChange}og.setSuperclass(m,g);og.installMethods(m,h,f);og.prepareClassForManagedPropertiesAfterCreation(m)}})));m.toString=function(){var a=String(this.prototype[og.initializeSymbol]).match(og.constructorArgMatcher),g=this[og.superclassSymbol];return"class "+this.name+" "+(g?"extends "+g.name:"")+" {\n  constructor"+((a?a[0]:"()")+" { /*...*/ }\n}")};og.prepareClassForManagedPropertiesAfterCreation(m);return m}function rl(d,c,h,f,k){"function"!==typeof h||"undefined"!==
typeof f&&"object"!==typeof f||(k=f,f="call",k||(k={}),k.updater||(k.updater=function(m,a){return m(null,a)}));var n=d.getConnectionPoints&&d.getConnectionPoints()||d.connections,b=(n=n&&n[c])&&n.map&&lively.morphic&&lively.morphic.GeometryConnection||n&&n.connectionClassType&&lively.Class.forName(n.connectionClassType)||ih.AttributeConnection;"function"===typeof k&&(console.warn("Directly passing a converter function to connect() is deprecated! Use spec object instead!"),k={converter:k});n&&(k=ih.obj.merge(n,
k));b=new b(d,c,h,f,k);var e=b.getExistingConnection();if(e)return e.resetSpec(),e.init(d,c,h,f,k),e;k=b.connect();if("function"===typeof d.onConnect)d.onConnect(c,h,f);n&&n.updateOnConnect&&b.update(d[c]);return k}function zo(d,c,h,f){"function"!==typeof h||"undefined"!==typeof f&&"object"!==typeof f||(f="call");if(d.attributeConnections){for(var k=$jscomp.makeIterator(d.attributeConnections.slice()),n=k.next();!n.done;n=k.next())n=n.value,n.getSourceAttrName()==c&&n.getTargetObj()===h&&n.getTargetMethodName()==
f&&n.disconnect();if("function"==typeof d.onDisconnect)d.onDisconnect(c,h,f)}}function jt(d){for(var c;d.attributeConnections&&(c=d.attributeConnections[0]);)c.disconnect()}function $q(d,c,h,f,k){"function"!==typeof h||"undefined"!==typeof f&&"object"!==typeof f?k=k||{}:(k=f,f="call",k=k||{},k.updater||(k.updater=function(n,b){return n(null,b)}));k=k||{};k.removeAfterUpdate=!0;return ih.connect(d,c,h,f,k)}function Wl(d,c,h){var f=d.attributeConnections;if(f){d=d[c];for(var k=0,n=f.length;k<n;k++){var b=
f[k];b.getSourceAttrName()==c&&b.update(h,d)}}}function pC(d,c,h,f){if(null!=d[c])h[f](d[c]);else ih.connect(d,c,h,f,{removeAfterUpdate:!0})}function Jf(d,c,h,f){for(var k={key:c.pop(),whenDefined:function(n){ih.callWhenNotNull(n,this.key,h,f)}};0<c.length;)k={key:c.pop(),next:k,whenDefined:function(n){ih.callWhenNotNull(n,this.key,this.next,"whenDefined")}};k.whenDefined(d)}function mw(d,c){var h=!1;c||"function"!==typeof d||(c=d,h=!0);if(h){d=ih.AttributeConnection.prototype;d.isActive||(d.isActive=
0);d.isActive++;try{var f=c()}finally{d.isActive--,0>=d.isActive&&delete d.isActive}}else{h=d.sourceObj;var k=d.sourceAttribute,n=d.targetObj,b=d.targetAttribute;d=n&&b?function(e){return e.getSourceAttrName()===k&&n===e.getTargetObj()&&b===e.getTargetMethodName()}:function(e){return e.getSourceAttrName()===k};(d=h.attributeConnections&&h.attributeConnections.filter(d))&&ih.arr.invoke(d,"activate");try{f=c()}finally{d&&ih.arr.invoke(d,"deactivate")}}return f}function qC(d){if(null==d)return!0;d=typeof d;
return"boolean"===d||"number"===d||"string"===d?!0:!1}function Wr(d){return d.constructor[Jj.classNameProp]||d.constructor.name}function ar(d){if(d&&d.constructor){var c=Jj.getClassName(d);if(c){if(d=d.constructor[Jj.moduleMetaInClassProp],"Object"!==c||d)return d&&(delete d.lastChange,delete d.lastSuperclassChange),{className:c,module:d}}else console.warn("Cannot serialize class info of anonymous class of instance "+d)}}function oq(d){var c=d.module;if(c){var h=c.pathInPackage;if(c.package&&c.package.name&&
"no group"!==c.package.name){var f=System.decanonicalize(c.package.name.replace(/\/*$/,"/"));h=Jj.string.joinPath(f,h)}f=System.get("@lively-env");if(c=f.moduleEnv(h)||f.moduleEnv(c.pathInPackage))return c.recorder[d.className];console.warn("Trying to deserialize instance of class "+d.className+" but the module "+h+" is not yet loaded")}return System.global[d.className]}function Dp(d,c,h){c=void 0===c?function(a){return a}:c;h=void 0===h?{}:h;var f=new aj.ExpressionSerializer,k=h,n=h.isMorph?h.propertiesAndPropertySettings().order:
[];n=n.length?n:aj.obj.keys(d);for(var b=$jscomp.makeIterator(n),e=b.next();!e.done;e=b.next()){e=e.value;var m=d[e];if("_env"===e||"env"===e||"__connections__"===e||"__refs__"===e)return;aj.obj.isString(m)&&f.isSerializedExpression(m)&&(m=f.deserializeExpr(m));["borderColor","borderWidth","borderStyle","borderRadius"].includes(e)&&(m=Dp(m,c));m&&m._id&&(m=c(Dp(m,c)));k[e]=m}d.submorphs&&(k.submorphs=d.submorphs.map(function(a){return Dp(a,c)}));if(h)for(f=$jscomp.makeIterator(n.filter(function(a){return!!d[a]})),
e=f.next();!e.done;e=f.next())n=e.value,h[n]=k[n];if(d.__refs__)for(h=$jscomp.makeIterator(d.__refs__),f=h.next();!f.done;f=h.next())n=$jscomp.makeIterator(f.value),f=n.next().value,n=n.next().value,aj.Path(f).set(k,aj.Path(n).get(k));if(d.__connections__)for(h=$jscomp.makeIterator(d.__connections__),f=h.next();!f.done;f=h.next())f=f.value,aj.connect(aj.Path(f.pathToSource).get(k),f.sourceAttrName,aj.Path(f.pathToTarget).get(k),f.targetMethodName,Object.assign({},aj.obj.select(f,["garbageCollect",
"converterString","updaterString","varMapping"])));return k}function Ao(d,c){var h=c=void 0===c?{}:c,f=void 0===h.keepFunctions?!0:h.keepFunctions,k=void 0===h.skipAttributes?[]:h.skipAttributes,n=void 0===h.keepConnections?!0:h.keepConnections,b=void 0===h.asExpression?!1:h.asExpression;c=void 0===h.root?!0:h.root;var e=void 0===h.path?"":h.path,m=void 0===h.skipUnchangedFromDefault?!1:h.skipUnchangedFromDefault,a=void 0===h.nestedExpressions?{}:h.nestedExpressions,g=void 0===h.objToPath?new WeakMap:
h.objToPath,l=void 0===h.objRefs?[]:h.objRefs;h=void 0===h.connections?[]:h.connections;var r={skipAttributes:k,skipUnchangedFromDefault:m,root:!1,keepFunctions:f,asExpression:b,nestedExpressions:a,connections:h,objRefs:l,objToPath:g,keepConnections:n};if(g.has(d))return l.push([e,g.get(d)]),null;g.set(d,e);b&&(f=!1);var v=new aj.ExpressionSerializer,y=function(Ma,K){try{if(K=K.__serialize__(),b){var aa=aj.string.newUUID();a[aa]=K;K=aa}else K=K.__expr__?v.exprStringEncode(K):K}catch(T){console.log("[export to JSON] failed converting "+
Ma+" to serialized expression")}return K},A={};g.set(d,e);n&&d.attributeConnections&&h.push.apply(h,$jscomp.arrayFromIterable(d.attributeConnections));d.isText&&(A.textAndAttributes=d.textAndAttributes.map(function(Ma,K){return Ma&&Ma.isMorph?Ao(Ma,Object.assign({},r,{path:e?e+".textAndAttributes."+K:"textAndAttributes."+K})):Ma}));d.submorphs&&0<d.submorphs.length&&(A.submorphs=d.submorphs.map(function(Ma,K){return Ao(Ma,Object.assign({},r,{path:e?e+".submorphs."+K:"submorphs."+K}))}).filter(Boolean));
var E={};for(X in d.spec(m)){E.$jscomp$loop$prop$name$2207=X;m=d[E.$jscomp$loop$prop$name$2207];!m||"object"!==typeof m||Array.isArray(m)||m.isMorph||g.set(m,e?e+"."+E.$jscomp$loop$prop$name$2207:E.$jscomp$loop$prop$name$2207);if("submorphs"!==E.$jscomp$loop$prop$name$2207&&!k.includes(E.$jscomp$loop$prop$name$2207))if("metadata"===E.$jscomp$loop$prop$name$2207&&aj.Path("commit.__serialize__").get(m))A[E.$jscomp$loop$prop$name$2207]=Object.assign({},m,{commit:y(E.$jscomp$loop$prop$name$2207+".commit",
m.commit)});else if(["borderColor","borderWidth","borderStyle","borderRadius"].includes(E.$jscomp$loop$prop$name$2207)){for(var F={},H=$jscomp.makeIterator(["top","left","right","bottom"]),I=H.next();!I.done;I=H.next()){I=I.value;var M=m[I];if(M&&M.__serialize__&&(M=M.__serialize__())&&M.__expr__)if(b){var N=aj.string.newUUID();a[N]=M;M=N}else M=v.exprStringEncode(M);F[I]=M}A[E.$jscomp$loop$prop$name$2207]=F}else if(m&&m.isMorph)A[E.$jscomp$loop$prop$name$2207]=Ao(m,Object.assign({},r,{path:e?e+"."+
E.$jscomp$loop$prop$name$2207:E.$jscomp$loop$prop$name$2207}));else if(m&&m.__serialize__)A[E.$jscomp$loop$prop$name$2207]=y(E.$jscomp$loop$prop$name$2207,m);else if(Array.isArray(m))A[E.$jscomp$loop$prop$name$2207]=m.map(function(Ma){return function(K,aa){return K&&K.isMorph?Ao(K,Object.assign({},r,{path:e?e+"."+Ma.$jscomp$loop$prop$name$2207+"."+aa:Ma.$jscomp$loop$prop$name$2207+"."+aa})):K&&K.__serialize__?y(Ma.$jscomp$loop$prop$name$2207+"."+aa,K):K}}(E));else{if(m&&!aj.obj.isString(m)&&!aj.obj.isNumber(m)&&
0<aj.properties.allOwnPropertiesOrFunctions(m).length)for(var W in m)m[W]&&m[W].isMorph&&(m[W]=Ao(m[W],Object.assign({},r,{path:e?e+"."+E.$jscomp$loop$prop$name$2207+"."+W:E.$jscomp$loop$prop$name$2207+"."+W})));A[E.$jscomp$loop$prop$name$2207]=m}E={$jscomp$loop$prop$name$2207:E.$jscomp$loop$prop$name$2207}}d.isText&&delete A.textString;b||(A._id=d._id);f?(A.type=d.constructor,Object.keys(d).forEach(function(Ma){return"function"===typeof d[Ma]&&(A[Ma]=d[Ma])})):(A.styleSheets&&(A.styleSheets=[]),
A.type=aj.getSerializableClassMeta(d));if(n&&c){var X=[];W=$jscomp.makeIterator(h);for(f=W.next();!f.done;f=W.next())H=f=f.value,k=H.sourceAttrName,n=H.targetMethodName,F=H.targetObj,h=H.updaterString,E=H.converterString,m=H.garbageCollect,H=g.get(H.sourceObj),F=g.get(F),"string"===typeof H&&"string"===typeof F?X.push({pathToSource:H,pathToTarget:F,garbageCollect:m,updaterString:h,converterString:E,sourceAttrName:k,targetMethodName:n,varMapping:{properties:up}}):console.log("skipping:",f);b||(A.__connections__=
X)}if(b&&c){c="morph("+aj.obj.inspect(A)+")";var ea={"lively.morphic":["morph"]},Aa;for(Aa in a)c=c.replace('"'+Aa+'"',a[Aa].__expr__),Object.entries(a[Aa].bindings||{}).forEach(function(Ma){var K=$jscomp.makeIterator(Ma);Ma=K.next().value;K=K.next().value;ea[Ma]=ea[Ma]?aj.arr.uniq([].concat($jscomp.arrayFromIterable(ea[Ma]),$jscomp.arrayFromIterable(K))):K});return{__expr__:c,bindings:ea}}c&&(A.__refs__=l);return A}function km(d){var c={},h;for(h in d)c[h]=Wf.referencesOfId(d,h);return c}function lm(d){return d&&
d.__ref__}function mm(d,c){var h={};return Wf.referencesOfId((h[d.id]=d.currentSnapshot,h),d.id,c)}function rC(d,c,h){d=d[c];c=[];for(var f in d.props){var k=d.props[f]||{},n=k.value;k=k.verbatim;Array.isArray(n)?c.push.apply(c,$jscomp.arrayFromIterable(Wf.referencesInArray(n,h&&f))):!k&&n&&Wf.isReference(n)&&c.push(h?{key:f,id:n.id}:n.id)}if(d.hasOwnProperty("entries"))for(f=0;f<d.entries.length;f++)n=d.entries[f],Array.isArray(n)?c.push.apply(c,$jscomp.arrayFromIterable(Wf.referencesInArray(n,h&&
n))):n&&Wf.isReference(n)&&c.push(h?{key:n,id:n.id}:n.id);return c}function gF(d,c){for(var h=[],f=0;f<d.length;f++){var k=d[f];Array.isArray(k)?h.push.apply(h,$jscomp.arrayFromIterable(gF(k,c?c+"["+f+"]":void 0))):k&&Wf.isReference(k)&&h.push(c?{key:c+"["+f+"]",id:k.id}:k.id)}return h}function Gg(d,c){return(d[c][Wf.ClassHelper.classMetaForSerializationProp]||{}).module||{}}function Iz(d,c){return Wf.referencesOfId(d,c).map(function(h){return h+":"+Wf.classNameOfId(d,h)})}function kt(d,c){return(d[c][Wf.ClassHelper.classMetaForSerializationProp]||
{}).className||"Object"}function Jz(d,c,h,f){function k(y,A,E){if(!g)if(50<E)alert(""+m);else if(y===A)m.push(y),g=m.slice();else if(!a[y]){a[y]=!0;m.push(y);y=Wf.referencesOfId(d,y);for(var F=0;F<y.length;F++)k(y[F],A,E+1);m.pop()}}f=void 0===f?{}:f;var n=void 0===f.showPath?!0:f.showPath,b=f.hasOwnProperty("showClassNames")?f.showClassNames:!n,e=f.hasOwnProperty("showPropNames")?f.showPropNames:n;f=f.hasOwnProperty("hideId")?f.hideId:n;var m=[],a={},g;k(c,h,0);if(!g)return null;if(!b&&!e)return g;
c=[];for(h=0;h<g.length-1;h++){var l=g[h],r=g[h+1],v=[];f||v.push(l);b&&v.push((d[l][Wf.ClassHelper.classMetaForSerializationProp]||{}).className||"Object");e&&(l=Wf.referencesOfId(d,l,!0).find(function(y){return y.id===r})||{key:"????"},v.push(l.key));c.push(v.join(":"))}n&&(c="."+c.join("."));return c}function br(d,c,h){h=h.replace(/^\./,"");h=h.replace(/\[([^\]])+\]/g,".$1");h=Wf.Path(h).parts();var f=d[c];for(c=0;;){if(1E3<c++)throw"stop";var k=h.shift();if(!k)break;if(!f.props||!f.props[k])throw Error("Property "+
k+" not found for ref "+JSON.stringify(f));f=f.props[k].value;if(!f)throw Error("Property "+k+" has no value");for(;Array.isArray(f);)f=f[h.shift()];if(!f||!f.__ref__)return f;f=d[f.id]}return f}function pq(d,c,h,f){h=h.replace(/^\./,"");h=h.replace(/\[([^\]])+\]/g,".$1");h=Wf.Path(h).parts();d=d[c];c=h.shift();if(!d.props||!d.props[c])throw Error("Property "+c+" not found for ref "+JSON.stringify(d));var k=(d.props[c]||{}).value;if(!k)throw Error("Property "+c+" has no value");if(h.length){var n=
Wf.Path(h).get(k);Wf.Path(h).set(k,f(d,c,n))}else d.props[c].value=f(d,c,k)}function Dm(d,c){var h=Wf.arr.withoutAll(Object.keys(c),d),f=h.filter(function(n){if("AttributeConnection"===Wf.classNameOfId(c,n))return c[n].props.garbageCollect.value}),k=Wf.referenceGraph(Wf.obj.dissoc(Object.assign({},c),f));d.forEach(function(n){n=Wf.graph.subgraphReachableBy(k,n);for(var b=h.length;b--;)h[b]in n&&h.splice(b,1)});h.forEach(function(n){return delete c[n]});return h}function sC(d){var c={},h;for(h in d){c.$jscomp$loop$prop$id$743$2209=
h;if("AttributeConnection"===Wf.classNameOfId(d,c.$jscomp$loop$prop$id$743$2209)){var f=d[c.$jscomp$loop$prop$id$743$2209];if(!d[Wf.Path("props.targetObj.value.id").get(f)]){if(f=d[Wf.Path("props.sourceObj.value.id").get(f)])f.props.attributeConnections.value=f.props.attributeConnections.value.filter(function(k){return function(n){return n.id!=k.$jscomp$loop$prop$id$743$2209}}(c));delete d[c.$jscomp$loop$prop$id$743$2209]}}c={$jscomp$loop$prop$id$743$2209:c.$jscomp$loop$prop$id$743$2209}}}function lt(d,
c){c=void 0===c?Wf.defaultExprSerializer:c;d.snapshot&&(d=d.snapshot);for(var h=[],f=0,k=Object.keys(d);f<k.length;f++){var n=d[k[f]];if(n.__expr__)(n=c.requiredModulesOf__expr__(n.__expr__))&&h.push.apply(h,$jscomp.arrayFromIterable(n));else{var b=Wf.ClassHelper.sourceModulesInObjRef(n);b&&b.length&&h.push.apply(h,$jscomp.arrayFromIterable(b.map(function(m){return(m.package&&m.package.name||"")+"/"+m.pathInPackage})));if(n.props)for(var e in n.props)b=n.props[e].value,"string"===typeof b&&(b=c.requiredModulesOf__expr__(b))&&
h.push.apply(h,$jscomp.arrayFromIterable(b))}}return h=Wf.arr.uniq(h)}function tC(){throw Error("setTimeout has not been defined");}function hF(){throw Error("clearTimeout has not been defined");}function RI(d){if(Gx===setTimeout)return setTimeout(d,0);if((Gx===tC||!Gx)&&setTimeout)return Gx=setTimeout,setTimeout(d,0);try{return Gx(d,0)}catch(c){try{return Gx.call(null,d,0)}catch(h){return Gx.call(this||uC,d,0)}}}function FP(){vC&&Kz&&(vC=!1,Kz.length?nw=Kz.concat(nw):SI=-1,nw.length&&TI())}function TI(){if(!vC){var d=
RI(FP);vC=!0;for(var c=nw.length;c;){Kz=nw;for(nw=[];++SI<c;)Kz&&Kz[SI].run();SI=-1;c=nw.length}Kz=null;vC=!1;(function(h){if(Hx===clearTimeout)return clearTimeout(h);if((Hx===hF||!Hx)&&clearTimeout)return Hx=clearTimeout,clearTimeout(h);try{Hx(h)}catch(f){try{return Hx.call(null,h)}catch(k){return Hx.call(this||uC,h)}}})(d)}}function UI(d,c){(this||uC).fun=d;(this||uC).array=c}function Xr(){}function wC(){if(JX)return KX;JX=!0;return KX={SEMVER_SPEC_VERSION:"2.0.0",MAX_LENGTH:256,MAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER||
9007199254740991,MAX_SAFE_COMPONENT_LENGTH:16}}function Oh(){if(LX)return MX;LX=!0;var d=tj;return MX="object"===typeof d&&d.env&&d.env.NODE_DEBUG&&/\bsemver\b/i.test(d.env.NODE_DEBUG)?function(c){for(var h=[],f=0;f<arguments.length;++f)h[f-0]=arguments[f];return console.error.apply(console,["SEMVER"].concat($jscomp.arrayFromIterable(h)))}:function(){}}function ow(){if(NX)return Mu;NX=!0;var d=wC().MAX_SAFE_COMPONENT_LENGTH,c=Oh();Mu=Mu={};var h=Mu.re=[],f=Mu.src=[],k=Mu.t={},n=0,b=function(e,m,a){var g=
n++;c(g,m);k[e]=g;f[g]=m;h[g]=new RegExp(m,a?"g":void 0)};b("NUMERICIDENTIFIER","0|[1-9]\\d*");b("NUMERICIDENTIFIERLOOSE","[0-9]+");b("NONNUMERICIDENTIFIER","\\d*[a-zA-Z-][a-zA-Z0-9-]*");b("MAINVERSION","("+f[k.NUMERICIDENTIFIER]+")\\.("+(f[k.NUMERICIDENTIFIER]+")\\.(")+(f[k.NUMERICIDENTIFIER]+")"));b("MAINVERSIONLOOSE","("+f[k.NUMERICIDENTIFIERLOOSE]+")\\.("+(f[k.NUMERICIDENTIFIERLOOSE]+")\\.(")+(f[k.NUMERICIDENTIFIERLOOSE]+")"));b("PRERELEASEIDENTIFIER","(?:"+f[k.NUMERICIDENTIFIER]+"|"+f[k.NONNUMERICIDENTIFIER]+
")");b("PRERELEASEIDENTIFIERLOOSE","(?:"+f[k.NUMERICIDENTIFIERLOOSE]+"|"+f[k.NONNUMERICIDENTIFIER]+")");b("PRERELEASE","(?:-("+f[k.PRERELEASEIDENTIFIER]+"(?:\\."+f[k.PRERELEASEIDENTIFIER]+")*))");b("PRERELEASELOOSE","(?:-?("+f[k.PRERELEASEIDENTIFIERLOOSE]+"(?:\\."+f[k.PRERELEASEIDENTIFIERLOOSE]+")*))");b("BUILDIDENTIFIER","[0-9A-Za-z-]+");b("BUILD","(?:\\+("+f[k.BUILDIDENTIFIER]+"(?:\\."+f[k.BUILDIDENTIFIER]+")*))");b("FULLPLAIN","v?"+f[k.MAINVERSION]+f[k.PRERELEASE]+"?"+f[k.BUILD]+"?");b("FULL",
"^"+f[k.FULLPLAIN]+"$");b("LOOSEPLAIN","[v=\\s]*"+f[k.MAINVERSIONLOOSE]+f[k.PRERELEASELOOSE]+"?"+f[k.BUILD]+"?");b("LOOSE","^"+f[k.LOOSEPLAIN]+"$");b("GTLT","((?:<|>)?=?)");b("XRANGEIDENTIFIERLOOSE",f[k.NUMERICIDENTIFIERLOOSE]+"|x|X|\\*");b("XRANGEIDENTIFIER",f[k.NUMERICIDENTIFIER]+"|x|X|\\*");b("XRANGEPLAIN","[v=\\s]*("+f[k.XRANGEIDENTIFIER]+")(?:\\.("+(f[k.XRANGEIDENTIFIER]+")(?:\\.(")+(f[k.XRANGEIDENTIFIER]+")(?:")+(f[k.PRERELEASE]+")?"+f[k.BUILD]+"?)?)?"));b("XRANGEPLAINLOOSE","[v=\\s]*("+f[k.XRANGEIDENTIFIERLOOSE]+
")(?:\\.("+(f[k.XRANGEIDENTIFIERLOOSE]+")(?:\\.(")+(f[k.XRANGEIDENTIFIERLOOSE]+")(?:")+(f[k.PRERELEASELOOSE]+")?"+f[k.BUILD]+"?)?)?"));b("XRANGE","^"+f[k.GTLT]+"\\s*"+f[k.XRANGEPLAIN]+"$");b("XRANGELOOSE","^"+f[k.GTLT]+"\\s*"+f[k.XRANGEPLAINLOOSE]+"$");b("COERCE","(^|[^\\d])(\\d{1,"+d+"})(?:\\.(\\d{1,"+(d+"}))?(?:\\.(\\d{1,")+(d+"}))?(?:$|[^\\d])"));b("COERCERTL",f[k.COERCE],!0);b("LONETILDE","(?:~>?)");b("TILDETRIM","(\\s*)"+f[k.LONETILDE]+"\\s+",!0);Mu.tildeTrimReplace="$1~";b("TILDE","^"+f[k.LONETILDE]+
f[k.XRANGEPLAIN]+"$");b("TILDELOOSE","^"+f[k.LONETILDE]+f[k.XRANGEPLAINLOOSE]+"$");b("LONECARET","(?:\\^)");b("CARETTRIM","(\\s*)"+f[k.LONECARET]+"\\s+",!0);Mu.caretTrimReplace="$1^";b("CARET","^"+f[k.LONECARET]+f[k.XRANGEPLAIN]+"$");b("CARETLOOSE","^"+f[k.LONECARET]+f[k.XRANGEPLAINLOOSE]+"$");b("COMPARATORLOOSE","^"+f[k.GTLT]+"\\s*("+f[k.LOOSEPLAIN]+")$|^$");b("COMPARATOR","^"+f[k.GTLT]+"\\s*("+f[k.FULLPLAIN]+")$|^$");b("COMPARATORTRIM","(\\s*)"+f[k.GTLT]+"\\s*("+f[k.LOOSEPLAIN]+"|"+f[k.XRANGEPLAIN]+
")",!0);Mu.comparatorTrimReplace="$1$2$3";b("HYPHENRANGE","^\\s*("+f[k.XRANGEPLAIN]+")\\s+-\\s+("+(f[k.XRANGEPLAIN]+")\\s*$"));b("HYPHENRANGELOOSE","^\\s*("+f[k.XRANGEPLAINLOOSE]+")\\s+-\\s+("+(f[k.XRANGEPLAINLOOSE]+")\\s*$"));b("STAR","(<|>)?=?\\s*\\*");b("GTE0","^\\s*>=\\s*0.0.0\\s*$");b("GTE0PRE","^\\s*>=\\s*0.0.0-0\\s*$");return Mu}function xC(){if(OX)return PX;OX=!0;var d=/^[0-9]+$/,c=function(h,f){var k=d.test(h),n=d.test(f);k&&n&&(h=+h,f=+f);return h===f?0:k&&!n?-1:n&&!k?1:h<f?-1:1};return PX=
{compareIdentifiers:c,rcompareIdentifiers:function(h,f){return c(f,h)}}}function Xl(){if(QX)return RX;QX=!0;var d=Oh(),c=wC(),h=c.MAX_LENGTH,f=c.MAX_SAFE_INTEGER;c=ow();var k=c.re,n=c.t,b=xC().compareIdentifiers,e=function(m,a){a&&"object"===typeof a||(a={loose:!!a,includePrerelease:!1});if(m instanceof e){if(m.loose===!!a.loose&&m.includePrerelease===!!a.includePrerelease)return m;m=m.version}else if("string"!==typeof m)throw new TypeError("Invalid Version: "+m);if(m.length>h)throw new TypeError("version is longer than "+
h+" characters");d("SemVer",m,a);(this||Uf).options=a;(this||Uf).loose=!!a.loose;(this||Uf).includePrerelease=!!a.includePrerelease;a=m.trim().match(a.loose?k[n.LOOSE]:k[n.FULL]);if(!a)throw new TypeError("Invalid Version: "+m);(this||Uf).raw=m;(this||Uf).major=+a[1];(this||Uf).minor=+a[2];(this||Uf).patch=+a[3];if((this||Uf).major>f||0>(this||Uf).major)throw new TypeError("Invalid major version");if((this||Uf).minor>f||0>(this||Uf).minor)throw new TypeError("Invalid minor version");if((this||Uf).patch>
f||0>(this||Uf).patch)throw new TypeError("Invalid patch version");(this||Uf).prerelease=a[4]?a[4].split(".").map(function(g){if(/^[0-9]+$/.test(g)){var l=+g;if(0<=l&&l<f)return l}return g}):[];(this||Uf).build=a[5]?a[5].split("."):[];this.format()};e.prototype.format=function(){(this||Uf).version=(this||Uf).major+"."+(this||Uf).minor+"."+(this||Uf).patch;(this||Uf).prerelease.length&&((this||Uf).version+="-"+(this||Uf).prerelease.join("."));return(this||Uf).version};e.prototype.toString=function(){return(this||
Uf).version};e.prototype.compare=function(m){d("SemVer.compare",(this||Uf).version,(this||Uf).options,m);if(!(m instanceof e)){if("string"===typeof m&&m===(this||Uf).version)return 0;m=new e(m,(this||Uf).options)}return m.version===(this||Uf).version?0:this.compareMain(m)||this.comparePre(m)};e.prototype.compareMain=function(m){m instanceof e||(m=new e(m,(this||Uf).options));return b((this||Uf).major,m.major)||b((this||Uf).minor,m.minor)||b((this||Uf).patch,m.patch)};e.prototype.comparePre=function(m){m instanceof
e||(m=new e(m,(this||Uf).options));if((this||Uf).prerelease.length&&!m.prerelease.length)return-1;if(!(this||Uf).prerelease.length&&m.prerelease.length)return 1;if(!(this||Uf).prerelease.length&&!m.prerelease.length)return 0;var a=0;do{var g=(this||Uf).prerelease[a],l=m.prerelease[a];d("prerelease compare",a,g,l);if(void 0===g&&void 0===l)return 0;if(void 0===l)return 1;if(void 0===g)return-1;if(g!==l)return b(g,l)}while(++a)};e.prototype.compareBuild=function(m){m instanceof e||(m=new e(m,(this||
Uf).options));var a=0;do{var g=(this||Uf).build[a],l=m.build[a];d("prerelease compare",a,g,l);if(void 0===g&&void 0===l)return 0;if(void 0===l)return 1;if(void 0===g)return-1;if(g!==l)return b(g,l)}while(++a)};e.prototype.inc=function(m,a){switch(m){case "premajor":(this||Uf).prerelease.length=0;(this||Uf).patch=0;(this||Uf).minor=0;(this||Uf).major++;this.inc("pre",a);break;case "preminor":(this||Uf).prerelease.length=0;(this||Uf).patch=0;(this||Uf).minor++;this.inc("pre",a);break;case "prepatch":(this||
Uf).prerelease.length=0;this.inc("patch",a);this.inc("pre",a);break;case "prerelease":0===(this||Uf).prerelease.length&&this.inc("patch",a);this.inc("pre",a);break;case "major":0===(this||Uf).minor&&0===(this||Uf).patch&&0!==(this||Uf).prerelease.length||(this||Uf).major++;(this||Uf).minor=0;(this||Uf).patch=0;(this||Uf).prerelease=[];break;case "minor":0===(this||Uf).patch&&0!==(this||Uf).prerelease.length||(this||Uf).minor++;(this||Uf).patch=0;(this||Uf).prerelease=[];break;case "patch":0===(this||
Uf).prerelease.length&&(this||Uf).patch++;(this||Uf).prerelease=[];break;case "pre":if(0===(this||Uf).prerelease.length)(this||Uf).prerelease=[0];else{for(m=(this||Uf).prerelease.length;0<=--m;)"number"===typeof(this||Uf).prerelease[m]&&((this||Uf).prerelease[m]++,m=-2);-1===m&&(this||Uf).prerelease.push(0)}a&&((this||Uf).prerelease[0]===a?isNaN((this||Uf).prerelease[1])&&((this||Uf).prerelease=[a,0]):(this||Uf).prerelease=[a,0]);break;default:throw Error("invalid increment argument: "+m);}this.format();
(this||Uf).raw=(this||Uf).version;return this||Uf};return RX=e}function pw(){if(SX)return TX;SX=!0;var d=wC().MAX_LENGTH,c=ow(),h=c.re,f=c.t,k=Xl();return TX=function(n,b){b&&"object"===typeof b||(b={loose:!!b,includePrerelease:!1});if(n instanceof k)return n;if("string"!==typeof n||n.length>d||!(b.loose?h[f.LOOSE]:h[f.FULL]).test(n))return null;try{return new k(n,b)}catch(e){return null}}}function Lz(){if(UX)return VX;UX=!0;var d=pw();return VX=function(c,h){return(c=d(c,h))?c.version:null}}function mt(){if(WX)return XX;
WX=!0;var d=Xl();return XX=function(c,h,f,k){"string"===typeof f&&(k=f,f=void 0);try{return(new d(c,f)).inc(h,k).version}catch(n){return null}}}function Ep(){if(YX)return ZX;YX=!0;var d=Xl();return ZX=function(c,h,f){return(new d(c,f)).compare(new d(h,f))}}function yC(){if($X)return aY;$X=!0;var d=Ep();return aY=function(c,h,f){return 0<d(c,h,f)}}function iF(){if(bY)return cY;bY=!0;var d=Ep();return cY=function(c,h,f){return 0<=d(c,h,f)}}function Mz(){if(dY)return eY;dY=!0;var d=Ep();return eY=function(c,
h,f){return 0===d(c,h,f)}}function zC(){if(fY)return gY;fY=!0;var d=Ep();return gY=function(c,h,f){return 0>d(c,h,f)}}function VI(){if(hY)return iY;hY=!0;var d=Ep();return iY=function(c,h,f){return 0!==d(c,h,f)}}function jF(){if(jY)return kY;jY=!0;var d=Ep();return kY=function(c,h,f){return 0>=d(c,h,f)}}function kF(){if(lY)return mY;lY=!0;var d=Mz(),c=VI(),h=yC(),f=iF(),k=zC(),n=jF();return mY=function(b,e,m,a){switch(e){case "===":return"object"===typeof b&&(b=b.version),"object"===typeof m&&(m=
m.version),b===m;case "!==":return"object"===typeof b&&(b=b.version),"object"===typeof m&&(m=m.version),b!==m;case "":case "=":case "==":return d(b,m,a);case "!=":return c(b,m,a);case ">":return h(b,m,a);case ">=":return f(b,m,a);case "<":return k(b,m,a);case "<=":return n(b,m,a);default:throw new TypeError("Invalid operator: "+e);}}}function GP(){if(nY)return oY;nY=!0;var d=Xl();return oY=function(c,h){return(new d(c,h)).major}}function zj(){if(pY)return qY;pY=!0;var d=Xl(),c=pw(),h=ow(),f=h.re,
k=h.t;return qY=function(n,b){if(n instanceof d)return n;"number"===typeof n&&(n=String(n));if("string"!==typeof n)return null;b=b||{};var e=null;if(b.rtl){for(var m;(m=f[k.COERCERTL].exec(n))&&(!e||e.index+e[0].length!==n.length);)e&&m.index+m[0].length===e.index+e[0].length||(e=m),f[k.COERCERTL].lastIndex=m.index+m[1].length+m[2].length;f[k.COERCERTL].lastIndex=-1}else e=n.match(f[k.COERCE]);return null===e?null:c(e[2]+"."+(e[3]||"0")+"."+(e[4]||"0"),b)}}function El(){if(rY)return HP;rY=!0;var d=
function(I,M){var N=this;M&&"object"===typeof M||(M={loose:!!M,includePrerelease:!1});if(I instanceof d)return I.loose===!!M.loose&&I.includePrerelease===!!M.includePrerelease?I:new d(I.raw,M);if(I instanceof c)return(this||Fl).raw=I.value,(this||Fl).set=[[I]],this.format(),this||Fl;(this||Fl).options=M;(this||Fl).loose=!!M.loose;(this||Fl).includePrerelease=!!M.includePrerelease;(this||Fl).raw=I;(this||Fl).set=I.split(/\s*\|\|\s*/).map(function(W){return N.parseRange(W.trim())}).filter(function(W){return W.length});
if(!(this||Fl).set.length)throw new TypeError("Invalid SemVer Range: "+I);this.format()};d.prototype.format=function(){(this||Fl).range=(this||Fl).set.map(function(I){return I.join(" ").trim()}).join("||").trim();return(this||Fl).range};d.prototype.toString=function(){return(this||Fl).range};d.prototype.parseRange=function(I){var M=this,N=(this||Fl).options.loose;I=I.trim();I=I.replace(N?n[b.HYPHENRANGELOOSE]:n[b.HYPHENRANGE],H((this||Fl).options.includePrerelease));h("hyphen replace",I);I=I.replace(n[b.COMPARATORTRIM],
e);h("comparator trim",I,n[b.COMPARATORTRIM]);I=I.replace(n[b.TILDETRIM],m);I=I.replace(n[b.CARETTRIM],a);I=I.split(/\s+/).join(" ");var W=N?n[b.COMPARATORLOOSE]:n[b.COMPARATOR];return I.split(" ").map(function(X){var ea=X;X=(M||Fl).options;h("comp",ea,X);ea=y(ea,X);h("caret",ea);ea=r(ea,X);h("tildes",ea);ea=E(ea,X);h("xrange",ea);h("replaceStars",ea,X);ea=ea.trim().replace(n[b.STAR],"");h("stars",ea);return ea}).join(" ").split(/\s+/).map(function(X){var ea=(M||Fl).options;h("replaceGTE0",X,ea);
return X.trim().replace(n[ea.includePrerelease?b.GTE0PRE:b.GTE0],"")}).filter((this||Fl).options.loose?function(X){return!!X.match(W)}:function(){return!0}).map(function(X){return new c(X,(M||Fl).options)})};d.prototype.intersects=function(I,M){if(!(I instanceof d))throw new TypeError("a Range is required");return(this||Fl).set.some(function(N){return g(N,M)&&I.set.some(function(W){return g(W,M)&&N.every(function(X){return W.every(function(ea){return X.intersects(ea,M)})})})})};d.prototype.test=function(I){if(!I)return!1;
if("string"===typeof I)try{I=new f(I,(this||Fl).options)}catch(Aa){return!1}for(var M=0;M<(this||Fl).set.length;M++){a:{var N=(this||Fl).set[M];for(var W=I,X=(this||Fl).options,ea=0;ea<N.length;ea++)if(!N[ea].test(W)){N=!1;break a}if(W.prerelease.length&&!X.includePrerelease){for(X=0;X<N.length;X++)if(h(N[X].semver),N[X].semver!==c.ANY&&0<N[X].semver.prerelease.length&&(ea=N[X].semver,ea.major===W.major&&ea.minor===W.minor&&ea.patch===W.patch)){N=!0;break a}N=!1}else N=!0}if(N)return!0}return!1};
HP=d;var c=Un(),h=Oh(),f=Xl(),k=ow(),n=k.re,b=k.t,e=k.comparatorTrimReplace,m=k.tildeTrimReplace,a=k.caretTrimReplace,g=function(I,M){var N=!0;I=I.slice();for(var W=I.pop();N&&I.length;)N=I.every(function(X){return W.intersects(X,M)}),W=I.pop();return N},l=function(I){return!I||"x"===I.toLowerCase()||"*"===I},r=function(I,M){return I.trim().split(/\s+/).map(function(N){return v(N,M)}).join(" ")},v=function(I,M){return I.replace(M.loose?n[b.TILDELOOSE]:n[b.TILDE],function(N,W,X,ea,Aa){h("tilde",I,
N,W,X,ea,Aa);l(W)?N="":l(X)?N=">="+W+".0.0 <"+(+W+1)+".0.0-0":l(ea)?N=">="+W+"."+X+".0 <"+W+"."+(+X+1)+".0-0":Aa?(h("replaceTilde pr",Aa),N=">="+W+"."+X+"."+ea+"-"+Aa+" <"+W+"."+(+X+1)+".0-0"):N=">="+W+"."+X+"."+ea+" <"+W+"."+(+X+1)+".0-0";h("tilde return",N);return N})},y=function(I,M){return I.trim().split(/\s+/).map(function(N){return A(N,M)}).join(" ")},A=function(I,M){h("caret",I,M);var N=M.includePrerelease?"-0":"";return I.replace(M.loose?n[b.CARETLOOSE]:n[b.CARET],function(W,X,ea,Aa,Ma){h("caret",
I,W,X,ea,Aa,Ma);l(X)?W="":l(ea)?W=">="+X+".0.0"+N+" <"+(+X+1)+".0.0-0":l(Aa)?W="0"===X?">="+X+"."+ea+".0"+N+" <"+X+"."+(+ea+1)+".0-0":">="+X+"."+ea+".0"+N+" <"+(+X+1)+".0.0-0":Ma?(h("replaceCaret pr",Ma),W="0"===X?"0"===ea?">="+X+"."+ea+"."+Aa+"-"+Ma+" <"+X+"."+ea+"."+(+Aa+1)+"-0":">="+X+"."+ea+"."+Aa+"-"+Ma+" <"+X+"."+(+ea+1)+".0-0":">="+X+"."+ea+"."+Aa+"-"+Ma+" <"+(+X+1)+".0.0-0"):(h("no pr"),W="0"===X?"0"===ea?">="+X+"."+ea+"."+Aa+N+" <"+X+"."+ea+"."+(+Aa+1)+"-0":">="+X+"."+ea+"."+Aa+N+" <"+X+
"."+(+ea+1)+".0-0":">="+X+"."+ea+"."+Aa+" <"+(+X+1)+".0.0-0");h("caret return",W);return W})},E=function(I,M){h("replaceXRanges",I,M);return I.split(/\s+/).map(function(N){return F(N,M)}).join(" ")},F=function(I,M){I=I.trim();return I.replace(M.loose?n[b.XRANGELOOSE]:n[b.XRANGE],function(N,W,X,ea,Aa,Ma){h("xRange",I,N,W,X,ea,Aa,Ma);var K=l(X),aa=K||l(ea);Aa=aa||l(Aa);"="===W&&Aa&&(W="");Ma=M.includePrerelease?"-0":"";K?N=">"===W||"<"===W?"<0.0.0-0":"*":W&&Aa?(aa&&(ea=0),Aa=0,">"===W?(W=">=",aa?(X=
+X+1,ea=0):ea=+ea+1,Aa=0):"<="===W&&(W="<",aa?X=+X+1:ea=+ea+1),"<"===W&&(Ma="-0"),N=W+X+"."+ea+"."+Aa+Ma):aa?N=">="+X+".0.0"+Ma+" <"+(+X+1)+".0.0-0":Aa&&(N=">="+X+"."+ea+".0"+Ma+" <"+X+"."+(+ea+1)+".0-0");h("xRange return",N);return N})},H=function(I){return function(M,N,W,X,ea,Aa,Ma,K,aa,T,U,pa,fa){N=l(W)?"":l(X)?">="+W+".0.0"+(I?"-0":""):l(ea)?">="+W+"."+X+".0"+(I?"-0":""):Aa?">="+N:">="+N+(I?"-0":"");K=l(aa)?"":l(T)?"<"+(+aa+1)+".0.0-0":l(U)?"<"+aa+"."+(+T+1)+".0-0":pa?"<="+aa+"."+T+"."+U+"-"+
pa:I?"<"+aa+"."+T+"."+(+U+1)+"-0":"<="+K;return(N+" "+K).trim()}};return HP}function Un(){if(sY)return IP;sY=!0;var d=Symbol("SemVer ANY"),c=function(a,g){g&&"object"===typeof g||(g={loose:!!g,includePrerelease:!1});if(a instanceof c){if(a.loose===!!g.loose)return a;a=a.value}b("comparator",a,g);(this||jj).options=g;(this||jj).loose=!!g.loose;this.parse(a);(this||jj).value=(this||jj).semver===d?"":(this||jj).operator+(this||jj).semver.version;b("comp",this||jj)};c.prototype.parse=function(a){var g=
a.match((this||jj).options.loose?f[k.COMPARATORLOOSE]:f[k.COMPARATOR]);if(!g)throw new TypeError("Invalid comparator: "+a);(this||jj).operator=void 0!==g[1]?g[1]:"";"="===(this||jj).operator&&((this||jj).operator="");(this||jj).semver=g[2]?new e(g[2],(this||jj).options.loose):d};c.prototype.toString=function(){return(this||jj).value};c.prototype.test=function(a){b("Comparator.test",a,(this||jj).options.loose);if((this||jj).semver===d||a===d)return!0;if("string"===typeof a)try{a=new e(a,(this||jj).options)}catch(g){return!1}return n(a,
(this||jj).operator,(this||jj).semver,(this||jj).options)};c.prototype.intersects=function(a,g){if(!(a instanceof c))throw new TypeError("a Comparator is required");g&&"object"===typeof g||(g={loose:!!g,includePrerelease:!1});if(""===(this||jj).operator)return""===(this||jj).value?!0:(new m(a.value,g)).test((this||jj).value);if(""===a.operator)return""===a.value?!0:(new m((this||jj).value,g)).test(a.semver);var l=(">="===(this||jj).operator||">"===(this||jj).operator)&&(">="===a.operator||">"===a.operator),
r=("<="===(this||jj).operator||"<"===(this||jj).operator)&&("<="===a.operator||"<"===a.operator),v=(this||jj).semver.version===a.semver.version,y=(">="===(this||jj).operator||"<="===(this||jj).operator)&&(">="===a.operator||"<="===a.operator),A=n((this||jj).semver,"<",a.semver,g)&&(">="===(this||jj).operator||">"===(this||jj).operator)&&("<="===a.operator||"<"===a.operator);a=n((this||jj).semver,">",a.semver,g)&&("<="===(this||jj).operator||"<"===(this||jj).operator)&&(">="===a.operator||">"===a.operator);
return l||r||v&&y||A||a};$jscomp.global.Object.defineProperties(c,{ANY:{configurable:!0,enumerable:!0,get:function(){return d}}});IP=c;var h=ow(),f=h.re,k=h.t,n=kF(),b=Oh(),e=Xl(),m=El();return IP}function qw(){if(tY)return uY;tY=!0;var d=El();return uY=function(c,h,f){try{h=new d(h,f)}catch(k){return!1}return h.test(c)}}function Ub(){if(vY)return wY;vY=!0;var d=El();return wY=function(c,h){try{return(new d(c,h)).range||"*"}catch(f){return null}}}function Fp(){if(xY)return yY;xY=!0;var d=pw();return yY=
function(c,h){return(c=d(c.trim().replace(/^[=v]+/,""),h))?c.version:null}}function Ix(){if(zY)return AY;zY=!0;var d=pw(),c=Mz();return AY=function(h,f){if(c(h,f))return null;h=d(h);f=d(f);var k=h.prerelease.length||f.prerelease.length,n=k?"pre":"",b;for(b in h)if(("major"===b||"minor"===b||"patch"===b)&&h[b]!==f[b])return n+b;return k?"prerelease":""}}function lF(){if(BY)return CY;BY=!0;var d=Xl();return CY=function(c,h){return(new d(c,h)).minor}}function qq(){if(DY)return EY;DY=!0;var d=Xl();return EY=
function(c,h){return(new d(c,h)).patch}}function WI(){if(FY)return GY;FY=!0;var d=pw();return GY=function(c,h){return(c=d(c,h))&&c.prerelease.length?c.prerelease:null}}function AC(){if(HY)return IY;HY=!0;var d=Ep();return IY=function(c,h,f){return d(h,c,f)}}function JP(){if(JY)return KY;JY=!0;var d=Ep();return KY=function(c,h){return d(c,h,!0)}}function BC(){if(LY)return MY;LY=!0;var d=Xl();return MY=function(c,h,f){c=new d(c,f);h=new d(h,f);return c.compare(h)||c.compareBuild(h)}}function Jx(){if(NY)return OY;
NY=!0;var d=BC();return OY=function(c,h){return c.sort(function(f,k){return d(f,k,h)})}}function Nz(){if(PY)return QY;PY=!0;var d=BC();return QY=function(c,h){return c.sort(function(f,k){return d(k,f,h)})}}function CC(){if(RY)return SY;RY=!0;var d=El();return SY=function(c,h){return(new d(c,h)).set.map(function(f){return f.map(function(k){return k.value}).join(" ").trim().split(" ")})}}function XI(){if(TY)return UY;TY=!0;var d=Xl(),c=El();return UY=function(h,f,k){var n=null,b=null,e=null;try{e=new c(f,
k)}catch(m){return null}h.forEach(function(m){!e.test(m)||n&&-1!==b.compare(m)||(n=m,b=new d(n,k))});return n}}function il(){if(VY)return WY;VY=!0;var d=Xl(),c=El();return WY=function(h,f,k){var n=null,b=null,e=null;try{e=new c(f,k)}catch(m){return null}h.forEach(function(m){!e.test(m)||n&&1!==b.compare(m)||(n=m,b=new d(n,k))});return n}}function Nu(){if(XY)return YY;XY=!0;var d=Xl(),c=El(),h=yC();return YY=function(f,k){f=new c(f,k);var n=new d("0.0.0");if(f.test(n))return n;n=new d("0.0.0-0");if(f.test(n))return n;
n=null;for(k=0;k<f.set.length;++k)f.set[k].forEach(function(b){var e=new d(b.semver.version);switch(b.operator){case ">":0===e.prerelease.length?e.patch++:e.prerelease.push(0),e.raw=e.format();case "":case ">=":if(!n||h(n,e))n=e;break;case "<":case "<=":break;default:throw Error("Unexpected operation: "+b.operator);}});return n&&f.test(n)?n:null}}function rn(){if(ZY)return $Y;ZY=!0;var d=Xl(),c=Un(),h=c.ANY,f=El(),k=qw(),n=yC(),b=zC(),e=jF(),m=iF();return $Y=function(a,g,l,r){a=new d(a,r);g=new f(g,
r);switch(l){case ">":var v=n;l=e;var y=b;var A=">";var E=">=";break;case "<":v=b;l=m;y=n;A="<";E="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"');}if(k(a,g,r))return!1;for(var F={},H=0;H<g.set.length;F={$jscomp$loop$prop$high$2211:F.$jscomp$loop$prop$high$2211,$jscomp$loop$prop$low$2212:F.$jscomp$loop$prop$low$2212},++H){var I=g.set[H];F.$jscomp$loop$prop$high$2211=null;F.$jscomp$loop$prop$low$2212=null;I.forEach(function(M){return function(N){N.semver===h&&(N=new c(">=0.0.0"));
M.$jscomp$loop$prop$high$2211=M.$jscomp$loop$prop$high$2211||N;M.$jscomp$loop$prop$low$2212=M.$jscomp$loop$prop$low$2212||N;v(N.semver,M.$jscomp$loop$prop$high$2211.semver,r)?M.$jscomp$loop$prop$high$2211=N:y(N.semver,M.$jscomp$loop$prop$low$2212.semver,r)&&(M.$jscomp$loop$prop$low$2212=N)}}(F));if(F.$jscomp$loop$prop$high$2211.operator===A||F.$jscomp$loop$prop$high$2211.operator===E||(!F.$jscomp$loop$prop$low$2212.operator||F.$jscomp$loop$prop$low$2212.operator===A)&&l(a,F.$jscomp$loop$prop$low$2212.semver)||
F.$jscomp$loop$prop$low$2212.operator===E&&y(a,F.$jscomp$loop$prop$low$2212.semver))return!1}return!0}}function KP(){if(aZ)return bZ;aZ=!0;var d=rn();return bZ=function(c,h,f){return d(c,h,">",f)}}function ji(){if(cZ)return dZ;cZ=!0;var d=rn();return dZ=function(c,h,f){return d(c,h,"<",f)}}function mF(){if(eZ)return fZ;eZ=!0;var d=El();return fZ=function(c,h,f){c=new d(c,f);h=new d(h,f);return c.intersects(h)}}function LP(){if(gZ)return hZ;gZ=!0;var d=qw(),c=Ep();return hZ=function(h,f,k){var n=[],
b=null,e=null;h=h.sort(function(g,l){return c(g,l,k)});for(var m=$jscomp.makeIterator(h),a=m.next();!a.done;a=m.next())a=a.value,d(a,f,k)?(e=a,b||(b=a)):(e&&n.push([b,e]),b=e=null);b&&n.push([b,null]);b=[];n=$jscomp.makeIterator(n);for(e=n.next();!e.done;e=n.next())m=$jscomp.makeIterator(e.value),e=m.next().value,m=m.next().value,e===m?b.push(e):m||e!==h[0]?m?e===h[0]?b.push("<="+m):b.push(e+" - "+m):b.push(">="+e):b.push("*");h=b.join(" || ");return h.length<("string"===typeof f.raw?f.raw:String(f)).length?
h:f}}function MP(){if(iZ)return jZ;iZ=!0;var d=El(),c=Un().ANY,h=qw(),f=Ep(),k=function(e,m,a){if(1===e.length&&e[0].semver===c)return 1===m.length&&m[0].semver===c;var g=new Set,l,r,v=$jscomp.makeIterator(e);for(e=v.next();!e.done;e=v.next())e=e.value,">"===e.operator||">="===e.operator?l=n(l,e,a):"<"===e.operator||"<="===e.operator?r=b(r,e,a):g.add(e.semver);if(1<g.size)return null;if(l&&r){var y=f(l.semver,r.semver,a);if(0<y||0===y&&(">="!==l.operator||"<="!==r.operator))return null}for(e=$jscomp.makeIterator(g).next();!e.done;){y=
e.value;if(l&&!h(y,String(l),a)||r&&!h(y,String(r),a))return null;l=$jscomp.makeIterator(m);for(e=l.next();!e.done;e=l.next())if(!h(y,String(e.value),a))return!1;return!0}m=$jscomp.makeIterator(m);for(e=m.next();!e.done;e=m.next()){e=e.value;var A=A||">"===e.operator||">="===e.operator;var E=E||"<"===e.operator||"<="===e.operator;if(l)if(">"===e.operator||">="===e.operator){if(g=n(l,e,a),g===e)return!1}else if(">="===l.operator&&!h(l.semver,String(e),a))return!1;if(r)if("<"===e.operator||"<="===e.operator){if(g=
b(r,e,a),g===e)return!1}else if("<="===r.operator&&!h(r.semver,String(e),a))return!1;if(!e.operator&&(r||l)&&0!==y)return!1}return l&&E&&!r&&0!==y||r&&A&&!l&&0!==y?!1:!0},n=function(e,m,a){if(!e)return m;a=f(e.semver,m.semver,a);return 0<a?e:0>a?m:">"===m.operator&&">="===e.operator?m:e},b=function(e,m,a){if(!e)return m;a=f(e.semver,m.semver,a);return 0>a?e:0<a?m:"<"===m.operator&&"<="===e.operator?m:e};return jZ=function(e,m,a){e=new d(e,a);m=new d(m,a);var g=!1;e=$jscomp.makeIterator(e.set);var l=
e.next();a:for(;!l.done;l=e.next()){l=l.value;for(var r=$jscomp.makeIterator(m.set),v=r.next();!v.done;v=r.next())if(v=k(l,v.value,a),g=g||null!==v,v)continue a;if(g)return!1}return!0}}function nt(d){d=Object.assign({plugins:fg.allPlugins,reinitializeIds:!1,skipMigrations:!0},d);if(d.reinitializeIds&&"function"!==typeof d.reinitializeIds)throw Error("serializer option 'reinitializeIds' needs to be a function(id, ref) => id");return d}function Ou(d,c){c=fg.normalizeOptions(c);var h=c.objPool||new fg.ObjectPool(c);
c=">="+fg.serializerVersion.replace(fg.majorAndMinorVersionRe,"");d=h.snapshotObject(d);fg.removeUnreachableObjects([d.id],d.snapshot);fg.clearDanglingConnections(d.snapshot);d.requiredVersion=c;return d}function Bo(d,c){c=fg.normalizeOptions(c);var h=d.requiredVersion;h&&!fg.semver.satisfies(fg.serializerVersion,h)&&console.warn("[lively.serializer deserialization] snapshot requires version "+(h+" but serializer has incompatible version ")+(fg.serializerVersion+". Deserialization might fail...!"));
return(c.objPool||new fg.ObjectPool(c)).resolveFromSnapshotAndId(d)}function ei(d,c,h){function f(){var e=fg.deserialize(d,h);fg.runMigrations(n,"objectConverter",d,k);return e}h=fg.normalizeOptions(h);c.length&&(h.skipMigrations=!1);var k=h.objPool||(h.objPool=new fg.ObjectPool(h));c=fg.normalizeMigrations(c);var n=c.after,b;fg.runMigrations(c.before,"snapshotConverter",d,k);"function"===typeof h.onDeserializationStart&&(b=h.onDeserializationStart(d,h));return b instanceof Promise?b.then(f):f()}
function Oz(d,c){return fg.deserialize(fg.serialize(d,c),c)}function DC(d){return"[object Array]"===hba.call(d)}function Em(d,c,h){(this||NP).type=Number(d);(this||NP).vNode=c;(this||NP).patch=h}function YI(d,c){var h=d.vnode;h||(h=d.vnode=d.render(c));if(!(iba(h)||jba(h)||kba(h)))throw Error("thunk did not return a valid node");return h}function Kx(d,c){var h;for(h in d){if(!(h in c)){var f=f||{};f[h]=void 0}var k=d[h],n=c[h];if(k!==n)if(kZ(k)&&kZ(n))if(Lx(n)!==Lx(k))f=f||{},f[h]=n;else if(lba(n))f=
f||{},f[h]=n;else{if(k=Kx(k,n))f=f||{},f[h]=k}else f=f||{},f[h]=n}for(var b in c)b in d||(f=f||{},f[b]=c[b]);return f}function Lx(d){if(Object.getPrototypeOf)return Object.getPrototypeOf(d);if(d.__proto__)return d.__proto__;if(d.constructor)return d.constructor.prototype}function Gp(d,c){var h={a:d};sl(d,c,h,0);return h}function sl(d,c,h,f){if(d!==c){var k=h[f],n=!1;if(ZI(d)||ZI(c))nF(d,c,h,f);else if(null==c)$I(d)||(oF(d,h,f),Mx(d,h,f),k=h[f]),k=Fm(k,new Gl(Gl.REMOVE,d,c));else if(Pz(c))if(Pz(d))if(d.tagName===
c.tagName&&d.namespace===c.namespace&&d.key===c.key){var b=mba(d.properties,c.properties);b&&(k=Fm(k,new Gl(Gl.PROPS,d,b)));b=f;var e=d.children;c=c.children;var m=Xg(c),a=m.keys,g=m.free;if(g.length===c.length)c={children:c,moves:null};else{m=Xg(e);var l=m.keys;if(m.free.length===e.length)c={children:c,moves:null};else{m=[];for(var r=0,v=g.length,y=0,A=0;A<e.length;A++){var E=e[A];E.key?a.hasOwnProperty(E.key)?(E=a[E.key],m.push(c[E])):(y++,m.push(null)):r<v?(E=g[r++],m.push(c[E])):(y++,m.push(null))}g=
r>=g.length?c.length:g[r];for(r=0;r<c.length;r++)v=c[r],v.key?l.hasOwnProperty(v.key)||m.push(v):r>=g&&m.push(v);l=m.slice();g=0;r=[];v=[];for(E=0;E<c.length;){var F=c[E];for(A=l[g];null===A&&l.length;)r.push(Qz(l,g,null)),A=l[g];A&&A.key===F.key?(g++,E++):F.key?(A&&A.key?a[A.key]!==E+1?(r.push(Qz(l,g,A.key)),(A=l[g])&&A.key===F.key?g++:v.push({key:F.key,to:E})):v.push({key:F.key,to:E}):v.push({key:F.key,to:E}),E++):A&&A.key&&r.push(Qz(l,g,A.key))}for(;g<l.length;)A=l[g],r.push(Qz(l,g,A&&A.key));
c=r.length!==y||v.length?{children:m,moves:{removes:r,inserts:v}}:{children:m,moves:null}}}a=c.children;m=e.length;y=a.length;m=m>y?m:y;for(y=0;y<m;y++)l=e[y],g=a[y],b+=1,l?sl(l,g,h,b):g&&(k=Fm(k,new Gl(Gl.INSERT,null,g))),Pz(l)&&l.count&&(b+=l.count);c.moves&&(k=Fm(k,new Gl(Gl.ORDER,d,c.moves)))}else k=Fm(k,new Gl(Gl.VNODE,d,c)),n=!0;else k=Fm(k,new Gl(Gl.VNODE,d,c)),n=!0;else lZ(c)?lZ(d)?d.text!==c.text&&(k=Fm(k,new Gl(Gl.VTEXT,d,c))):(k=Fm(k,new Gl(Gl.VTEXT,d,c)),n=!0):$I(c)&&($I(d)||(n=!0),k=
Fm(k,new Gl(Gl.WIDGET,d,c)));k&&(h[f]=k);n&&(oF(d,h,f),Mx(d,h,f))}}function Mx(d,c,h){if($I(d))"function"===typeof d.destroy&&(c[h]=Fm(c[h],new Gl(Gl.REMOVE,d,null)));else if(Pz(d)&&(d.hasWidgets||d.hasThunks)){d=d.children;for(var f=d.length,k=0;k<f;k++){var n=d[k];h+=1;Mx(n,c,h);Pz(n)&&n.count&&(h+=n.count)}}else ZI(d)&&nF(d,null,c,h)}function nF(d,c,h,f){d=nba(d,c);d=Gp(d.a,d.b);a:{for(k in d)if("a"!==k){var k=!0;break a}k=!1}k&&(h[f]=new Gl(Gl.THUNK,null,d))}function oF(d,c,h){if(Pz(d)){if(d.hooks){var f=
c[h],k=Gl.PROPS,n=d.hooks,b={},e;for(e in n)b[e]=void 0;c[h]=Fm(f,new Gl(k,d,b))}if(d.descendantHooks||d.hasThunks)for(d=d.children,f=d.length,k=0;k<f;k++)n=d[k],h+=1,oF(n,c,h),Pz(n)&&n.count&&(h+=n.count)}else ZI(d)&&nF(d,null,c,h)}function Qz(d,c,h){d.splice(c,1);return{from:c,key:h}}function Xg(d){for(var c={},h=[],f=d.length,k=0;k<f;k++){var n=d[k];n.key?c[n.key]=k:h.push(k)}return{keys:c,free:h}}function Fm(d,c){return d?(oba(d)?d.push(c):d=[d,c],d):c}function Rz(d,c,h,f){if(f)if(f=f[c],mZ(f))f.unhook&&
f.unhook(d,c,h);else if("attributes"===c)for(var k in f)d.removeAttribute(k);else if("style"===c)for(var n in f)d.style[n]="";else d[c]="string"===typeof f?"":null}function Vi(d){if(Object.getPrototypeOf)return Object.getPrototypeOf(d);if(d.__proto__)return d.__proto__;if(d.constructor)return d.constructor.prototype}function pF(d,c){var h=c?c.document||nZ:nZ,f=c?c.warn:null;d=pba(d).a;if(qba(d))return d.init();if(rba(d))return h.createTextNode(d.text);if(!sba(d))return f&&f("Item is not a valid virtual dom node",
d),null;h=null===d.namespace?h.createElement(d.tagName):h.createElementNS(d.namespace,d.tagName);tba(h,d.properties);d=d.children;for(f=0;f<d.length;f++){var k=pF(d[f],c);k&&h.appendChild(k)}return h}function cr(d,c,h,f,k){f=f||{};if(d){EC(h,k,k)&&(f[k]=d);var n=c.children;if(n){d=d.childNodes;for(var b=0;b<c.children.length;b++){k+=1;var e=n[b]||uba,m=k+(e.count||0);EC(h,k,m)&&cr(d[b],e,h,f,k);k=m}}}return f}function EC(d,c,h){if(0===d.length)return!1;for(var f=0,k=d.length-1,n,b;f<=k;){n=(k+f)/
2>>0;b=d[n];if(f===k)return b>=c&&b<=h;if(b<c)f=n+1;else if(b>h)k=n-1;else return!0}return!1}function Sz(d,c){return d>c?1:-1}function aJ(d,c){"function"===typeof c.destroy&&vba(c)&&c.destroy(d)}function bJ(d,c,h){h=h||{};h.patch=h.patch&&h.patch!==bJ?h.patch:OP;h.render=h.render||wba;return h.patch(d,c,h)}function OP(d,c,h){var f=[];for(k in c)"a"!==k&&f.push(Number(k));if(0===f.length)return d;var k=xba(d,c.a,f);var n=d.ownerDocument;h.document||n===yba||(h.document=n);for(n=0;n<f.length;n++){var b=
f[n];var e=k[b],m=c[b],a=h;if(e)if(zba(m))for(var g=0;g<m.length;g++)b=oZ(m[g],e,a),e===d&&(d=b);else b=oZ(m,e,a),e===d&&(d=b)}return d}function qF(d,c,h,f,k){(this||Pu).tagName=d;(this||Pu).properties=c||Aba;(this||Pu).children=h||Bba;(this||Pu).key=null!=f?String(f):void 0;(this||Pu).namespace="string"===typeof k?k:null;d=h&&h.length||0;f=0;var n=k=!1,b=!1,e;for(a in c)if(c.hasOwnProperty(a)){var m=c[a];Cba(m)&&m.unhook&&(e||(e={}),e[a]=m)}for(c=0;c<d;c++){var a=h[c];Dba(a)?(f+=a.count||0,!k&&a.hasWidgets&&
(k=!0),!n&&a.hasThunks&&(n=!0),b||!a.hooks&&!a.descendantHooks||(b=!0)):!k&&Eba(a)?"function"===typeof a.destroy&&(k=!0):!n&&Fba(a)&&(n=!0)}(this||Pu).count=d+f;(this||Pu).hasWidgets=k;(this||Pu).hasThunks=n;(this||Pu).hooks=e;(this||Pu).descendantHooks=b}function FC(d){(this||Gba).text=String(d)}function GC(d){if(!(this instanceof GC))return new GC(d);this.value=d}function Tz(d){if(!(this instanceof Tz))return new Tz(d);this.value=d}function Vm(d,c,h,f){if("string"===typeof d)c.push(new pZ(d));else if("number"===
typeof d)c.push(new pZ(String(d)));else if(cJ(d))c.push(d);else if(qZ(d))for(var k=0;k<d.length;k++)Vm(d[k],c,h,f);else if(null!==d&&void 0!==d)throw c={tagName:h,properties:f},h=Error(),h.type="virtual-hyperscript.unexpected.virtual-element",h.message="Unexpected virtual child passed to h().\nExpected a VNode / Vthunk / VWidget / string but:\ngot:\n"+Co(d)+".\nThe parent vnode is:\n"+Co(c),h.foreignObject=d,h.parentVnode=c,h;}function cJ(d){return Hba(d)||Iba(d)||Jba(d)||Kba(d)}function Co(d){try{return JSON.stringify(d,
null,"    ")}catch(c){return String(d)}}function ot(d,c){if(3===d.nodeType)return new rZ(d.nodeValue);if(1===d.nodeType||9===d.nodeType){var h="http://www.w3.org/1999/xhtml"!==d.namespaceURI?d.namespaceURI:null,f=c&&d.getAttribute(c)?d.getAttribute(c):null,k=d.tagName;var n,b={};if(d.hasAttributes()){if(d.namespaceURI&&"http://www.w3.org/1999/xhtml"!==d.namespaceURI)var e=d.namespaceURI;for(var m=0;m<d.attributes.length;m++){if("style"==d.attributes[m].name){var a=d.style;var g={};for(n=0;n<a.length;++n){var l=
a.item(n);g[l]=String(a[l]);-1<g[l].indexOf("url")&&(g[l]=g[l].replace(/"/g,""))}a="style";l=n=void 0}else e?(n=d.attributes[m],a=n.name,g=n.value,n=Lba[n.name]||"",l=void 0):(n=void 0,g=d.attributes[m],a=sZ[g.name]?sZ[g.name]:g.name,0===a.indexOf("data-")||0===a.indexOf("aria-")?(g=g.value,n=!0):g=g.value,l=n||!1,n=void 0);n?b[a]={namespace:n,value:g}:l?(b.attributes||(b.attributes={}),b.attributes[a]=g):b[a]=g}}e=[];for(m=0;m<d.childNodes.length;m++)e.push(ot(d.childNodes[m],c));return new Mba(k,
b,e,f,h)}return new rZ("")}function Uz(d){var c={};Ki.addFill(d,c);Ki.addTransform(d,c);Ki.addTransformOrigin(d,c);Ki.addDisplay(d,c);Ki.addExtentStyle(d,c);Ki.addBorder(d,c);Ki.addBorderRadius(d,c);Ki.addShadowStyle(d,c);d.grayscale&&(c.filter=(c.filter||"")+" grayscale("+100*d.grayscale+"%)");d.blur&&(c.filter=(c.filter||"")+" blur("+d.blur+"px)");null!=d.opacity&&(c.opacity=d.opacity);d.draggable&&!d.isWorld&&(c["touch-action"]="none");return c}function rF(d,c){var h=d.position,f=d.origin,k=d.scale,
n=d.rotation,b=d.flipped,e=d.tilted,m=d.perspective,a=d.owner,g=d.__stackIdx__||0,l=Math.round(h.x-f.x-(d._skipWrapping&&a?a.borderWidthLeft:0));h=Math.round(h.y-f.y-(d._skipWrapping&&a?a.borderWidthTop:0));d=d.renderOnGPU||d.dropShadow&&!d.dropShadow.fast||0<d.grayscale;a&&a.isText||d?c.transform=d?"translate3d("+l+"px, "+h+"px, "+g+"px)":"translate("+l+"px, "+h+"px)":(c.transform="",c.top=h+"px",c.left=l+"px");c.transform+=" rotate("+n.toFixed(2)+"rad) scale("+k.toFixed(5)+","+k.toFixed(5)+")";
m&&(c.perspective=m+"px");b&&(c.transform+=" rotateY("+180*b+"deg)");e&&(c.transform+=" rotateX("+180*e+"deg)")}function Nx(d,c){var h=d.width;d=d.height;c.width=h||1;c.height=d||1;c.viewBox=[0,0,h||1,d||1].join(" ");return c}function Ox(d){var c="";if(0<d.length){var h=d[0];var f=h.position;var k=f.y;f=f.x;c+="M "+f+" "+k+" "}for(var n=1;n<d.length-1;n++){var b=d[n],e=b.position,m=e.x;e=e.y;var a=b,g=a.controlPoints.previous;c=a.isSmooth?c+("C "+(f+h.controlPoints.next.x)+" "+(k+h.controlPoints.next.y)+
" "+(m+g.x)+" "+(e+g.y)+" "+m+" "+e+" "):c+("L "+m+" "+e+" ");h=b;f=m;k=e}0<d.length&&(b=d[d.length-1].position,n=b.x,b=b.y,d=d[d.length-1],m=d.controlPoints.previous,c=d.isSmooth?c+("C "+(f+h.controlPoints.next.x)+" "+(k+h.controlPoints.next.y)+" "+(n+m.x)+" "+(b+m.y)+" "+n+" "+b):c+("L "+n+" "+b));return c}function Vz(d,c){var h=d.id,f=d.vertices,k=d.fill,n=d.borderColor,b=d.borderWidth;f.length&&(c.d=Ki.getSvgVertices(f));Ki.addSvgBorderStyle(d,c);c["stroke-width"]=b.valueOf();c.fill=k?k.isGradient?
"url(#gradient-fill"+h+")":k.toString():"transparent";c.stroke=n.valueOf().isGradient?"url(#gradient-borderColor"+h+")":n.valueOf().toString();return c}function Px(d){var c=d.reactsToPointer,h=d.nativeCursor,f=d.clipMode,k=bf.styleProps(d);d=d._animationQueue.maskedProps("css");"backgroundImage"in d&&delete k.background;"visible"!==f&&(k.overflow=f,k["-webkit-overflow-scrolling"]="touch",k["overflow-anchor"]="none");Object.assign(k,d);k.position="absolute";k["pointer-events"]=c?"auto":"none";k.cursor=
h;return k}function HC(d,c){this.morph=d;this.type=c}function Qx(d,c){c={animation:new bf.Animation(d),key:d.id,id:d.id,attributes:{},className:(d.hideScrollbars?d.styleClasses.concat("hiddenScrollbar"):d.styleClasses).join(" "),draggable:!1,"morph-after-render-hook":new bf.MorphAfterRenderHook(d,c)};c.attributes["touch-action"]=bf.bowser.ios&&d.draggable&&!d.isWorld?"none":bf.bowser.ios&&"visible"!=d.clipMode&&!d.isWorld?"auto":"manipulation";return c}function Wz(d){var c=new bf.SvgAnimation(d,"svg"),
h={};bf.addSvgAttributes(d,h);Object.assign(h,d._animationQueue.maskedProps("svg"));return{animation:c,attributes:h}}function IC(d){var c=new bf.SvgAnimation(d,"path"),h={mask:0!==d.drawnProportion?"url(#mask"+d.id+")":""};bf.addPathAttributes(d,h);Object.assign(h,d._animationQueue.maskedProps("path"));return{animation:c,attributes:h}}function JC(d,c,h){var f=h=h.valueOf(),k=f.bounds,n=f.focus,b=f.vector;f=f.stops;var e=c.x;c=c.y;d={namespace:"http://www.w3.org/2000/svg",attributes:{id:"gradient-"+
d,gradientUnits:"userSpaceOnUse",r:"50%"}};b&&(d.attributes.gradientTransform="rotate("+bf.num.toDegrees(b.extent().theta())+", "+e/2+", "+c/2+")");n&&k&&(b=k.width,k=k.height,d.attributes.gradientTransform="matrix(\n"+b/e+", 0, 0, "+k/c+",\n"+(e/2-b/e*(e/2)+n.x*e-e/2)+",\n"+(c/2-k/c*(c/2)+n.y*c-c/2)+")");return bf.h(h.type,d,f.map(function(m){return bf.h("stop",{namespace:"http://www.w3.org/2000/svg",attributes:{offset:100*m.offset+"%","stop-opacity":m.color.a,"stop-color":m.color.withA(1).toString()}})}))}
function KC(d,c){c=void 0===c?d.env.renderer:c;return bf.createNode(d.render(c),c.domEnvironment)}function LC(d,c){var h=c.renderMap.get(d),f=c.getNodeForMorph(d);if(f&&h){var k=c.render(d),n=bf.diff(h,k);d=c.renderMap.get(d.owner).children[0].children;h=d.indexOf(h);d[h]=k;bf.patch(f,n)}}function rw(d,c){if(d.needsRerender()){var h=!1,f=c.domNode,k=c.renderMap.get(d)||f&&(h=!0)&&bf.parser(f)||c.render(d),n=c.render(d);h&&(k.key=n.key);h=bf.diff(k,n);f=f||(c.domNode=bf.createNode(k,c.domEnvironment));
f.parentNode||bf.initDOMState(c,d);bf.patch(f,h);c.renderFixedMorphs(n.fixedMorphs,d)}}function Xz(d,c,h){return(((1-3*h+3*c)*d+(3*h-6*c))*d+3*c)*d}function PP(d){return d}function rq(d){return Sf.obj.isFunction(d)?d:Sf.Bezier.apply(Sf,$jscomp.arrayFromIterable(eval("(["+d.match(/\((.*)\)/)[1]+"])")))}function ki(d){var c=0,h=0;do c+=d.offsetTop||0,h+=d.offsetLeft||0,d=d.offsetParent;while(d);return{top:c,left:h}}function hk(){return System.get("@system-env").browser?wh.createDOMEnvironment_browser():
wh.createDOMEnvironment_node()}function MC(){return wh._defaultEnv||(wh._defaultEnv=System.get("@system-env").browser?new wh.DomEnvironment(window,document,function(){}):wh.createDOMEnvironment())}function Yr(d,c,h){d=void 0===d?"lively-css":d;h=void 0===h?document:h;var f=h.getElementById(d);return f?wh.setCSSDef(f,c,h):wh.addCSSDef(d,c,h)}function Qu(d,c,h,f){h=void 0===h?document:h;f=void 0===f?!0:f;var k=h.getElementById(d),n=!1;return k?f&&k.getAttribute("href")!==c?(k.setAttribute("href",c),
k.onload=function(){return n=!0},wh.promise.waitFor(3E4,function(){return!!n&&k})):Promise.resolve():(k=h.createElement("link"),k.type="text/css",k.rel="stylesheet",k.setAttribute("id",d),k.setAttribute("href",c),k.onload=function(){return n=!0},h.head.appendChild(k),wh.promise.waitFor(3E4,function(){return!!n&&k}))}function Tj(d,c){return Array.isArray(d)?d.reduce(function(h,f){return Tj(f,h)},c):"string"===typeof d?c.filter(function(h){return h.path()!==d&&h.name()!==d}):d instanceof RegExp?c.filter(function(h){return!d.test(h.path())&&
!d.test(h.name())}):"function"===typeof d?c.filter(function(h){return!d(h)}):c}function Re(d){d=$jscomp.makeIterator(d.split("?"));d.next();var c=d.next().value;d={};if(!c)return d;if(c=c.split("&"))for(var h=0;h<c.length;h++){var f=c[h].split("="),k=f[0],n=!0;if(1<f.length)if(n=decodeURIComponent(f.slice(1).join("=")),"undefined"===n)n=void 0;else if(n.match(/^(true|false|null|[0-9"[{].*)$/))try{n=JSON.parse(n)}catch(b){"["===n[0]&&(n=n.slice(1,-1).split(","))}d[k]=n}return d}function Rx(d){return Object.keys(d).map(function(c){return c+
"="+encodeURIComponent(String(d[c]))}).join("&")}function ie(d){var c=d;do d=c,c=d.replace(Vf.pathDoubleDotRe,"");while(c!=d);c=c.replace(Vf.pathDoubleSlashRe,"$1/");return c=c.replace(Vf.pathDotRe,"/")}function sw(d,c){var h=d.match(Vf.urlRe),f=c.match(Vf.urlRe),k=!0;if(h&&!f||!h&&f)k=!1;if(h&&f){var n=h[1];var b=h[2];var e=f[1];var m=f[2];n!==e?k=!1:b!==m?k=!1:(d=h[3],c=f[3])}if(!k)throw Error("[relativePathBetween] incompatible paths: "+d+" vs. "+c);d=Vf.withRelativePartsResolved(d);c=Vf.withRelativePartsResolved(c);
if(d==c)return"";h=Vf._relativePathBetween_checkPathes(c,d);if(!h)throw Error("pathname differs in relativePathFrom "+d+" vs "+c);return h}function Yz(d,c){return Vf.withRelativePartsResolved(d.replace(Vf.slashEndRe,"")+"/"+c.replace(Vf.slashStartRe,""))}function ad(d){return d.startsWith("/")?d.replace(Vf.slashEndRe,"").split("/").slice(0,-1).join("/")+"/":""}function Zz(d){var c=[];for(d=Vf.parent(d);d&&(c.unshift(d),d=Vf.parent(d),"/"!==d););return c}function la(d,c){if(!d)throw Error("lively.resource resource constructor: expects url but got "+
d);if(d.isResource)return d;d=String(d);for(var h=0;h<Vf.extensions.length;h++)if(Vf.extensions[h].matches(d))return new Vf.extensions[h].resourceClass(d,c);throw Error("Cannot find resource type for url "+d);}function q(d,c,h){var f,k,n,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){switch(e.nextAddress){case 1:return f=la(d,h).asDirectory(),e.yield(f.ensureExistance(),2);case 2:n=e.forIn(c);case 3:if(null==(k=n.getNext())){e.jumpTo(5);break}if(!c.hasOwnProperty(k)){e.jumpTo(3);
break}b=f.join(k);return"object"===typeof c[k]?e.yield(q(b,c[k],h),9):e.yield(b.write(c[k]),8);case 8:e.jumpTo(7);break;case 9:case 7:e.jumpTo(3);break;case 5:return e.return(f)}})}function w(d){var c=d.name;Vf.extensions=Vf.extensions.filter(function(h){return h.name!==c}).concat(d)}function B(d){var c="string"===typeof d?d:d.name;Vf.extensions=Vf.extensions.filter(function(h){return h.name!==c})}function D(d,c){var h=void 0===d.useProxy?!0:d.useProxy,f=void 0===d.useCors?!0:d.useCors,k=d.url,n=
d.onLoad,b=d.headers,e=d.onProgress,m=new XMLHttpRequest,a=jh.promise.deferred();m.open("PUT",k);h&&(Object.assign(b,{pragma:"no-cache","cache-control":"no-cache","x-lively-proxy-request":k}),k=d.proxyDomain||jh.defaultOrigin());for(var g in b)m.setRequestHeader(g,b[g]);m.upload.addEventListener("progress",e);m.responseType="json";m.onload=function(){n(m.response);a.resolve(m)};f&&(m.withCredentials=!0);m.send(c);return a.promise}function J(d,c,h){c=void 0===c?"infinity":c;var f,k,n,b,e,m,a,g,l,r,
v,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(A){switch(A.nextAddress){case 1:return A.yield(d.dirList(c,h),2);case 2:f=A.yieldResult,k={},n=$jscomp.makeIterator(f),b=n.next();case 3:if(b.done){A.jumpTo(5);break}e=b.value;if(e.isDirectory()){m={};A.jumpTo(6);break}return A.yield(e.read(),7);case 7:m=A.yieldResult;case 6:a=m;g=e.asFile().relativePathFrom(d).split("/");l=k;r=$jscomp.makeIterator(g.slice(0,-1));for(v=r.next();!v.done;v=r.next())y=v.value,l[y]||(l[y]={}),l=l[y];l[g[g.length-
1]]=a;b=n.next();A.jumpTo(3);break;case 5:return A.return(k)}})}function O(d,c){var h=document.head,f=h.namespaceURI;return new Promise(function(k,n){var b=document.createElementNS(f,"script");b.setAttribute("type","text/ecmascript");h.appendChild(b);b.setAttributeNS(null,"id",d);"http://www.w3.org/2000/svg"===b.namespaceURI?b.setAttributeNS("http://www.w3.org/1999/xlink","href",d):b.setAttribute("src",d);b.onload=k;b.onerror=n;b.setAttributeNS(null,"async",!0)})}function Y(){var d,c,h,f;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){switch(k.nextAddress){case 1:if("fetch"in
System.global&&"Headers"in System.global)return k.return(Promise.resolve());d=System.decanonicalize("lively.resources");if(System.get("@system-env").node){k.setCatchFinallyBlocks(5);c=System._nodeRequire("fetch-ponyfill");k.leaveTryBlock(3);break}return k.yield(System.import("fetch-ponyfill",d),4);case 4:c=k.yieldResult;k.jumpTo(3);break;case 5:return k.enterCatchBlock(),k.yield(System.normalize("fetch-ponyfill",d),7);case 7:return h=k.yieldResult.replace("file://",""),k.yield(System.import(h),8);
case 8:f=k.yieldResult,c=f.default;case 3:Object.assign(System.global,c()),k.jumpToEnd()}})}function ca(d,c){c=(c=c.trim())&&"?"!==c?Wi.parseQuery(c):{};c.name=d.replace(/\.json$/,"").replace(/%20/g," ");return"/worlds/load?"+Wi.stringifyQuery(c)}function qa(d){Object.assign(Wi.nameToClassMapping,d)}function sa(d,c){d=void 0===d?{}:d;c=void 0===c?{restore:!1}:c;var h=Wi.nameToClassMapping.default;d.type&&("function"===typeof d.type&&(h=d.type),"object"===typeof d.type?h=Wi.locateClass(d.type):"string"===
typeof d.type&&(h=Wi.nameToClassMapping[d.type.toLowerCase()]||h));var f={};return c.restore?(new h((f[Symbol.for("lively-instance-restorer")]=!0,f))).initFromJSON(d):new h(d)}function Ta(d){return("function"===typeof d?d.className:"string"===typeof d?d.toLowerCase():"")+"_"+Wi.string.newUUID().replace(/-/g,"_")}function kb(d){var c=d.key;d=0|(d.ctrlKey?1:0)|(d.altKey?2:0)|(d.shiftKey?4:0)|(d.metaKey?8:0);0===d&&!si.canonicalizeFunctionKey(c)&&c&&si.letterRe.test(c)&&(d=-1);return d}function Db(d,
c){if("string"===typeof d)return d;if(!d||"object"!==typeof d)return null;switch(c){case "ios":return d.ios||d.mac;case "mac":return d.mac||d.ios;case "win":case "windows":case "windowsphone":return d.win||d.windows;case "linux":return d.linux||d.win||d.windows;case "chromeos":return d.chromeos||d.linux||d.win||d.windows;case "android":return d.android||d.linux||d.win||d.windows;default:return d.linux||d.win||d.windows}}function yb(d,c,h,f){f=void 0===f?h.name:f;(d[c]=sq.fun.wrap(d[c],h)).hookFunc=
h;h.hookName=f}function wc(d,c,h){for(var f=[],k=d[c];k;)f.push(k),k=k.originalFunction;k="string"===typeof h?f.find(function(n){return n.hookFunc&&n.hookFunc.hookName===h}):f.find(function(n){return n.hookFunc===h});if(!k)return!1;sq.arr.remove(f,k);d[c]=f.reduceRight(function(n,b){return sq.fun.wrap(n,b.hookFunc||b)});return!0}function Lc(d,c,h){for(d=d[c];d;){if(d.hookFunc&&("string"===typeof h&&d.hookFunc.hookName===h||d.hookFunc===h))return!0;d=d.originalFunction}return!1}function nc(d){if(d.loads){var c=
d.loads;return tw.arr.uniq(Object.keys(tw.loadedModules(d)).concat(Object.keys(c))).reduce(function(h,f){var k=c[f]?c[f].depMap:{};h[f]=Object.keys(k).map(function(n){var b=k[n];return"@empty"===b?b+"/"+n:b});return h},{})}return Object.keys(d._loader.moduleRecords).reduce(function(h,f){h[f]=d._loader.moduleRecords[f].dependencies.filter(Boolean).map(function(k){return k.name});return h},{})}function gd(d,c,h,f,k){var n=d.get("@lively-env").pendingExportChanges;(d=Zo.module(d,c).record())&&(h in d.exports||
k)&&((n[c]||(n[c]={}))[h]=f)}function wd(d,c){var h=d.get("@lively-env").pendingExportChanges[c];h&&(Zo.clearPendingModuleExportChanges(d,c),Zo.updateModuleExports(d,c,h))}function je(d,c,h,f,k){var n,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){switch(e.nextAddress){case 1:e.setCatchFinallyBlocks(2);d.debug&&console.log("[module change] "+c+" "+h.slice(0,50).replace(/\n/g,"")+" "+f);if(!f||"es6"===f||"esm"===f||"register"===f||"defined"===f)return e.yield(zk.moduleSourceChangeEsm(d,
c,h,k),8);if("global"!==f)throw Error("moduleSourceChange is not supported for module "+c+" with format "+f);return e.yield(zk.moduleSourceChangeGlobal(d,c,h,k),7);case 7:n=e.yieldResult;e.jumpTo(5);break;case 8:n=e.yieldResult;case 5:return zk.emit("lively.modules/modulechanged",{module:c,newSource:h,options:k},Date.now(),d),e.return(n);case 2:throw b=e.enterCatchBlock(),zk.emit("lively.modules/modulechanged",{module:c,newSource:h,error:b,options:k},Date.now(),d),b;}})}function Bd(d){return/\.js/i.test(d)}
function qe(d){return Vn.isJsFile(d)?d.replace(/\/[^\/]*$/,""):d.replace(/\/$/,"")}function cf(d){return/^[^:\\]+:\/\//.test(d)}function Ue(d){var c=d.match(/^([^:]+:\/\/)(.*)/);if(!c)return d;d=c[1];var h=c=c[2];do c=h,h=c.replace(/\/[^\/]+\/\.\./,"");while(h!=c);h=h.replace(/(^|[^:])[\/]+/g,"$1/");h=h.replace(/\/\.\//g,"/");return d+h}function oe(d,c,h){h=void 0===h?!1:h;var f=pf.classHolder.PackageRegistry.ofSystem(d),k=f.allPackageURLs();d=h?c:pf.normalizePackageURL(d,c,k);return{pkg:f.findPackageWithURL(d),
url:d,allPackageURLs:k,registry:f}}function tf(d,c,h){d=pf.lookupPackage(d,c,void 0===h?!1:h);c=d.url;h=d.registry;return d.pkg||h.addPackageAt(c,"devPackageDirs")}function Le(d,c,h){d=pf.lookupPackage(d,c,void 0===h?!1:h);if(h=d.pkg)return h;throw Error("[getPackage] package "+c+" (as "+d.url+") not found");}function Ie(d,c,h){return pf.getPackage(d,h).updateConfig(c)}function hf(d,c){return Promise.resolve(pf.ensurePackage(d,c)).then(function(h){return h.import()})}function Kf(d,c){return(d=pf.lookupPackage(d,
c).pkg)?d.remove():null}function Ff(d,c,h){return pf.getPackage(d,c).reload(h)}function ag(d,c,h){return Promise.resolve(pf.ensurePackage(d,c)).then(function(f){return f.register(h)})}function xh(d){return pf.Package.allPackages(d).map(function(c){return c.asSpec()})}function uj(d,c){d="string"===typeof d?Fd.parse(d):d;c.scope=Fd.query.resolveReferences(Fd.query.scopes(d));return Fd.ClassReplaceVisitor.run(d,c)}function bk(d,c,h){h=Hp.ensureParent(d,c);var f=d.System._nodeRequire("module");c.startsWith(".")&&
(c=Hp.relative(d,c));return f._load(c,h)}function Xi(d,c,h){h=Hp.ensureParent(d,c);var f=d.System._nodeRequire("module");c.startsWith(".")&&(c=Hp.relative(d,c));return f._resolveFilename(c,h)}function kh(d,c,h){var f=mf.livelySystemEnv(d);c=d.decanonicalize(c,h);return f.loadedModules[c]||(f.loadedModules[c]=new mf.ModuleInterface(d,c))}function zi(d,c,h){h=void 0===h?!1:h;var f=mf.livelySystemEnv(d);return(h?c:d.normalizeSync(c))in f.loadedModules}function dr(d,c,h){h=void 0===h?!1:h;var f,k,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){if(1==
b.nextAddress){mf.livelySystemEnv(d);f=h?c:d.normalizeSync(c);if(mf.isModuleLoaded(d,f,!0))return b.return(!0);k=mf.Package.forModuleId(d,f);return k&&"no group"!==k.name?b.yield(k.hasResource(f),3):(n=d.resource(f).exists(),b.jumpTo(2))}2!=b.nextAddress&&(n=b.yieldResult);return b.return(n)})}function Ip(){return Me.exceptions}function Ru(d){return Me.exceptions=d}function Su(d,c,h,f,k){c=String(c);d=f.sourceAccessorName;var n=f.recorder,b=f.recorderName,e=f.dontTransform,m=f.varDefinitionCallbackName,
a=void 0===f.embedOriginalCode?!0:f.embedOriginalCode;d=a?d:void 0;f={topLevelVarRecorder:n,varRecorderName:b,sourceAccessorName:d,dontTransform:e,jsx:h.endsWith(".jsx"),recordGlobals:!0,keepPreviouslyDeclaredValues:!0,declarationWrapperName:m,evalId:f.nextEvalId(),classTransform:Me.classToFunctionTransform,currentModuleAccessor:Me.funcCall(Me.member(Me.funcCall(Me.member(Me.member("__lvVarRecorder","System"),"get"),Me.literal("@lively-env")),"moduleEnv"),Me.literal(h))};n=k?'console.log("[lively.modules] executing module '+
h+'");\n':"";e="";"System.global"===b?delete f.declarationWrapperName:(n+='System.get("@lively-env").evaluationStart("'+h+'");\nvar '+(b+' = System.get("@lively-env").moduleEnv("'+h+'").recorder;\n')+(a?"\nvar "+d+" = "+JSON.stringify(c)+";\n":""),e+='\nSystem.get("@lively-env").evaluationEnd("'+h+'");');try{var g=n+Me.evalCodeTransform(c,f)+e;k&&"undefined"!==typeof $world&&$world.get("log")&&$world.get("log").isText&&($world.get("log").textString=g);return{source:g,options:f}}catch(l){return console.error("Error in prepareCodeForCustomCompile of "+
h+" "+l.stack),{source:c,options:f}}}function Tu(d,c,h,f,k,n){c=String(c);d=Object.assign({},k,{classTransform:Me.classToFunctionTransform,topLevelVarRecorder:f.recorder,varRecorderName:f.recorderName,dontTransform:f.dontTransform,recordGlobals:!0,declarationWrapperName:f.varDefinitionCallbackName,currentModuleAccessor:Me.funcCall(Me.member(Me.funcCall(Me.member(Me.member("__lvVarRecorder","System"),"get"),Me.literal("@lively-env")),"moduleEnv"),Me.literal(h))});try{var b=Me.evalCodeTransformOfSystemRegisterSetters(c,
d);n&&"undefined"!==typeof $world&&$world.get("log")&&$world.get("log").isText&&($world.get("log").textString+=b);return b}catch(e){return console.error("Error in prepareTranslatedCodeForSetterCapture",e.stack),c}}function pt(d,c){return d.translate(c).then(function(h){var f=Me.parse(h).body.find(function(n){return n.expression&&"CallExpression"===n.expression.type&&"register"===n.expression.callee.property.name});if(!f)throw Error("Cannot find register call in translated source of "+c.name);var k=
f.expression;f=k.arguments[0].elements.map(function(n){return n.value});k=k.arguments[1];h=h.slice(k.start,k.end);h=eval('var __moduleName = "'+c.name+'";('+h+");\n//# sourceURL="+c.name+"\n");d.debug&&"undefined"!==$world&&$world.get("log")&&$world.get("log").isText&&($world.get("log").textString=h);return{localDeps:f,declare:h}})}function Zr(d,c){return d.translate(c).then(function(h){return{translated:h}})}function Kh(d){Me.isHookInstalled(d,"translate","lively_modules_translate_hook")||Me.installHook(d,
"translate",function(c,h){return Me.customTranslate.call(d,c,h)},"lively_modules_translate_hook")}function pk(d){Me.removeHook(d,"translate","lively_modules_translate_hook")}function Uj(d){d.resource=Dh.resource;Dh.isHookInstalled(d,"fetch",Dh.fetchResource)&&Dh.removeHook(d,"fetch","fetchResource");Dh.installHook(d,"fetch",Dh.fetchResource);Dh.isHookInstalled(d,"resource","livelyProtocol")&&Dh.removeHook(d,"fetch","livelyProtocol");Dh.installHook(d,"resource",Dh.livelyProtocol)}function Do(d){Dh.removeHook(d,
"fetch","fetchResource");Dh.removeHook(d,"resource","livelyProtocol");delete d.resource}function $z(d){de.isHookInstalled(d,"normalize","normalizeHook")||de.installHook(d,"normalize",de.normalizeHook,"normalizeHook");de.isHookInstalled(d,"decanonicalize","decanonicalizeHook")||de.installHook(d,"decanonicalize",de.decanonicalizeHook,"decanonicalizeHook");de.isHookInstalled(d,"normalizeSync","decanonicalizeHook")||de.installHook(d,"normalizeSync",de.decanonicalizeHook,"decanonicalizeHook");de.isHookInstalled(d,
"newModule","newModule_volatile")||de.installHook(d,"newModule",de.newModule_volatile,"newModule_volatile");de.isHookInstalled(d,"instantiate","instantiate_triggerOnLoadCallbacks")||de.installHook(d,"instantiate",de.instantiate_triggerOnLoadCallbacks,"instantiate_triggerOnLoadCallbacks");de.isHookInstalled(d,"locate","locateHook")||de.installHook(d,"locate",de.locateHook,"locateHook")}function Sx(d){de.removeHook(d,"normalize","normalizeHook");de.removeHook(d,"decanonicalize","decanonicalizeHook");
de.removeHook(d,"normalizeSync","decanonicalizeHook");de.removeHook(d,"newModule","newModule_volatile");de.removeHook(d,"instantiate","instantiate_triggerOnLoadCallbacks");de.removeHook(d,"locate","locateHook")}function Ph(d){return{moduleEnv:function(c){return de.classHolder.module(d,c)},get itself(){return d.get(d.decanonicalize("lively.modules/index.js"))},evaluationStart:function(c){de.classHolder.module(d,c).evaluationStart()},evaluationEnd:function(c){de.classHolder.module(d,c).evaluationEnd()},
dumpConfig:function(){return JSON.stringify({baseURL:d.baseURL,transpiler:d.transpiler,defaultJSExtensions:d.defaultJSExtensions,map:d.map,meta:d.meta,packages:d.packages,paths:d.paths,packageConfigPaths:d.packageConfigPaths},null,2)},get packageRegistry(){return d["__lively.modules__packageRegistry"]},set packageRegistry(c){d["__lively.modules__packageRegistry"]=c},packages:d["__lively.modules__packages"]||(d["__lively.modules__packages"]={}),loadedModules:d["__lively.modules__loadedModules"]||(d["__lively.modules__loadedModules"]=
{}),pendingExportChanges:d["__lively.modules__pendingExportChanges"]||(d["__lively.modules__pendingExportChanges"]={}),notifications:d["__lively.modules__notifications"]||(d["__lively.modules__notifications"]=[]),notificationSubscribers:d["__lively.modules__notificationSubscribers"]||(d["__lively.modules__notificationSubscribers"]={}),options:d["__lively.modules__options"]||(d["__lively.modules__options"]=de.obj.deepCopy(de.defaultOptions)),onLoadCallbacks:d["__lively.modules__onLoadCallbacks"]||
(d["__lively.modules__onLoadCallbacks"]=[]),modulePackageMapCache:d["__lively.modules__modulePackageMapCache"]}}function Yl(d,c){return d&&"string"!==typeof d?d:de.systems()[d]||(de.systems()[d]=de.makeSystem(c))}function Wn(d){d=d&&"string"!==typeof d?de.nameOfSystem(d):d;delete de.systems()[d]}function Tx(d,c){d.trace=!0;c=c||{};var h=c.hasOwnProperty("useModuleTranslationCache")?c.useModuleTranslationCache:!de.urlQuery().noModuleCache;d.useModuleTranslationCache=h;d.set("@lively-env",d.newModule(de.livelySystemEnv(d)));
"undefined"!==typeof WorkerGlobalScope&&d.set("@system-env",d.newModule(Object.assign({},d.get("@system-env"),{browser:!0,worker:!0,location:location})));(h="undefined"!==typeof process&&process.versions&&process.versions.electron)&&d.set("@system-env",d.newModule(Object.assign({electron:h},d.get("@system-env"))));de.wrapResource(d);de.wrapModuleLoad(d);de.wrapModuleResolution(d);h&&(h=["electron"].reduce(function(f,k){f[k]="@node/"+k;return f},{}),c.map=de.obj.merge(h,c.map));de.isNode&&(h="addons assert buffer child_process cluster console crypto dgram dns domain events fs http https module net os path punycode querystring readline repl stream stringdecoder timers tls tty url util v8 vm zlib constants".split(" ").reduce(function(f,
k){f[k]="@node/"+k;return f},{}),c.map=de.obj.merge(h,c.map));c.packageConfigPaths=c.packageConfigPaths||["./node_modules/*/package.json"];c.transpiler||"traceur"!==d.transpiler||(h=de.GLOBAL.System,"lively.transpiler"===h.transpiler?(d.set("lively.transpiler",h.get("lively.transpiler")),d._loader.transpilerPromise=h._loader.transpilerPromise,d.config({transpiler:"lively.transpiler",babelOptions:Object.assign(h.babelOptions||{},c.babelOptions)})):d.config({map:{"plugin-babel":h.map["plugin-babel"],
"systemjs-babel-build":h.map["systemjs-babel-build"]},transpiler:h.transpiler,babelOptions:Object.assign(h.babelOptions||{},c.babelOptions)}));d.config(c);return d}function dJ(d){d=de.getSystem(d);return JSON.stringify({baseURL:d.baseURL,transpiler:d.transpiler,defaultJSExtensions:d.defaultJSExtensions,defaultExtension:d.defaultExtension,map:d.map,meta:d.meta,packages:d.packages,paths:d.paths,packageConfigPaths:d.packageConfigPaths,bundles:d.bundles},null,2)}function eJ(d,c,h){var f=d.decanonicalize(c);
if(d.get(f))try{h(de.classHolder.module(d,f))}catch(k){console.error(k)}else d.get("@lively-env").onLoadCallbacks.push({moduleName:c,resolved:!1,callback:h})}function fJ(d){return d.get("@lively-env").loadedModules}function gJ(d){var c=d.loads?Object.keys(d.loads):Object.keys(d._loader.moduleRecords);return de.arr.uniq(c.concat(Object.keys(de.loadedModules(d))))}function QP(d,c,h){return Promise.all(de.obj.values(de.loadedModules(d)).map(function(f){return f.search(c,h)})).then(function(f){return de.arr.flatten(f,
1)})}function sF(d,c,h,f){c=void 0===c?{maxDepth:0,excludes:[]}:c;h=void 0===h?{}:h;f=void 0===f?0:f;var k,n,b,e,m,a,g,l,r,v,y,A,E;return $jscomp.asyncExecutePromiseGeneratorProgram(function(F){switch(F.nextAddress){case 1:k=c;n=k.maxDepth;b=k.excludes;if(0<n&&f>n)return F.return(h);F.setCatchFinallyBlocks(2);e=JSON;m=e.parse;return F.yield(sn.resource(d).join("package.json").read(),4);case 4:a=m.call(e,F.yieldResult);g=a.name+"@"+a.version;if(h[g]||b.includes(a.name))return F.return(h);h[g]=Object.assign({url:d},
sn.obj.select(a,["name","version","dependencies","devDependencies","main"]));F.leaveTryBlock(3);break;case 2:return F.enterCatchBlock(),F.return(h);case 3:return F.setCatchFinallyBlocks(5),F.yield(sn.resource(d).join("node_modules").dirList(1),7);case 7:l=F.yieldResult;F.leaveTryBlock(6);break;case 5:return F.enterCatchBlock(),F.return(h);case 6:r=$jscomp.makeIterator(l),v=r.next();case 8:if(v.done){F.jumpTo(10);break}A=y=v.value;E=A.url;return F.yield(sF(E,c,h,f+1),11);case 11:h=F.yieldResult;v=
r.next();F.jumpTo(8);break;case 10:return F.return(h)}})}function hJ(d,c){var h=Object.assign({},d.dependencies,{},d.devDependencies);return Object.keys(h).reduce(function(f,k){var n=h[k],b=sn.obj.values(c).find(function(m){var a=m.version;return m.name===k&&lively.modules.semver.satisfies(a,n)})||{},e=b.name;b=b.version;f[k]=e?e+"@"+b:void 0;return f},{})}function iJ(d){function c(k,n){var b=k+"@"+n;if(b in f)return f[b];var e=h.find(function(a){var g=a.version;return a.name===k&&lively.modules.semver.satisfies(g,
n)})||{},m=e.name;e=e.version;return f[b]=m?m+"@"+e:void 0}var h=sn.obj.values(d),f={};return Object.keys(d).reduce(function(k,n){var b=d[n],e=Object.assign({},b.dependencies,{},b.devDependencies);k[n]=Object.keys(e).map(function(m){return c(m,e[m])}).filter(function(m){return!!m});return k},{})}function jJ(d,c){od.defaultSystem=d;c&&(od.GLOBAL.System=d);return d}function kJ(){od._wrapModuleResolution(od.defaultSystem)}function lJ(){od._unwrapModuleResolution(od.defaultSystem)}function mJ(){return Object.keys(od.requireMap())}
function tF(d){return od._module(od.defaultSystem,d)}function nJ(d,c){return od._isModuleLoaded(od.defaultSystem,d,c)}function oJ(d,c){return od._doesModuleExist(od.defaultSystem,d,c)}function pJ(){return od._printSystemConfig(od.defaultSystem)}function qJ(d,c){return od._whenLoaded(od.defaultSystem,d,c)}function rJ(d){return od._importPackage(od.defaultSystem,d)}function sJ(d,c){return od._registerPackage(od.defaultSystem,d,c)}function tJ(d){return od._removePackage(od.defaultSystem,d)}function uJ(d,
c){return od._reloadPackage(od.defaultSystem,d,c)}function vJ(){return od.getPackageSpecs(od.defaultSystem)}function wJ(d,c){return od._getPackage(od.defaultSystem,d,void 0===c?!1:c)}function xJ(d){return od.Package.forModuleId(od.defaultSystem,d)}function yJ(d){return od._ensurePackage(od.defaultSystem,d)}function zJ(d,c){return od._applyPackageConfig(od.defaultSystem,d,c)}function AJ(d,c){return od._lookupPackage(od.defaultSystem,d,void 0===c?!1:c)}function BJ(d,c,h){return od._moduleSourceChange(od.defaultSystem,
d,c,h)}function CJ(){return od.computeRequireMap(od.defaultSystem)}function DJ(d,c){return od._isHookInstalled(od.defaultSystem,d,c)}function EJ(d,c){return od._installHook(od.defaultSystem,d,c)}function FJ(d,c){return od._removeHook(od.defaultSystem,d,c)}function GJ(){od._wrapModuleLoad(od.defaultSystem)}function HJ(){od._unwrapModuleLoad(od.defaultSystem)}function RP(d){return d&&d.__ref__}function uF(d,c){return qf.serialize(d,qf.normalizeOptions(c))}function vF(d,c){c=void 0===c?{}:c;return qf.deserializeWithMigrations(d,
c.migrations||qf.migrations,qf.normalizeOptions(c))}function IJ(d){var c,h;return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){return 1==f.nextAddress?(c=qf,h=c.loadMorphFromSnapshot,f.yield(d.readJson(),2)):f.return(h.call(c,f.yieldResult))})}function SP(d,c,h){d=void 0===d?qf.MorphicEnv.default().world:d;var f,k,n,b,e,m,a,g,l,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){switch(y.nextAddress){case 1:f=h||{};k=void 0===f.showIndicator?!0:f.showIndicator;n=void 0===
f.changeName?!0:f.changeName;b=void 0===f.changeBrowserURL?!0:f.changeBrowserURL;c||(e=qf.resource(document.location.href),m=e.name(),c=e.join("../"+m.replace(/\.[^\.]+/,"-world.json")).withRelativePartsResolved());"string"===typeof c&&(c=qf.resource(c));n&&(d.name=c.nameWithoutExt());b&&(a=encodeURI(h.pathForBrowserHistory||qf.pathForBrowserHistory(c.path())),window.location.pathname!==a&&window.history.pushState({},"lively.next",a));if(!k){y.jumpTo(2);break}return y.yield(System.import("lively.components/loading-indicator.js"),
3);case 3:return l=y.yieldResult,r=l.LoadingIndicator,g=r.open("string"===typeof k?k:"Snapshotting..."),y.yield(g.whenRendered(),4);case 4:return y.yield(qf.promise.delay(100),2);case 2:return y.setFinallyBlock(6),y.yield(qf.createMorphSnapshot(d,h),8);case 8:return v=y.yieldResult,g.label="Uploading...",y.yield(g.whenRendered(),9);case 9:return y.return(c.writeJson(v));case 6:y.enterFinallyBlock(),g&&g.remove(),y.leaveFinallyBlock(0)}})}function JJ(d){return qf.deserializeMorph(qf.serializeMorph(d),
{migrations:NC,reinitializeIds:!0})}function aA(d,c){c=void 0===c?{}:c;var h,f,k,n,b,e,m,a,g,l,r,v,y,A,E,F,H,I,M,N,W,X,ea,Aa;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ma){switch(Ma.nextAddress){case 1:h=System.get("@system-env").node;f=c;k=void 0===f.addPreview?!h:f.addPreview;n=void 0===f.previewWidth?100:f.previewWidth;b=void 0===f.previewHeight?100:f.previewHeight;e=void 0===f.previewType?"png":f.previewType;m=void 0===f.testLoad?!0:f.testLoad;a=void 0===f.addPackages?!0:f.addPackages;
g=void 0===f.ignoreMorphs?[]:f.ignoreMorphs;l=void 0===f.frozenSnapshot?!1:f.frozenSnapshot;r=qf.serializeMorph(d,{frozenSnapshot:l});if(!a){Ma.jumpTo(2);break}return Ma.yield(qf.findRequiredPackagesOfSnapshot(r),3);case 3:v=Ma.yieldResult,y=v.packages,A=v.depMap,r.packages=y,r.packageDepMap=A;case 2:if(!k){Ma.jumpTo(4);break}return Ma.yield(System.import("lively.morphic/rendering/morph-to-image.js"),5);case 5:return E=Ma.yieldResult,F=E.renderMorphToDataURI,H=n||d.width,I=b||d.height,M=e||"png",
Ma.setCatchFinallyBlocks(6),N=r,Ma.yield(F(d,{width:H,height:I,type:M,ignoreMorphs:g}),8);case 8:N.preview=Ma.yieldResult;Ma.leaveTryBlock(4);break;case 6:return W=Ma.enterCatchBlock(),console.error("Error generating morph preview: "+W),X=r,Ma.yield(F(qf.morph({fill:d.fill,width:H,height:I}),{width:H,height:I,type:M,ignoreMorphs:g}),9);case 9:X.preview=Ma.yieldResult;case 4:r.preview||(r.preview="");if(!m){Ma.jumpTo(10);break}Ma.setCatchFinallyBlocks(11);return Ma.yield(qf.loadMorphFromSnapshot(r,
{highlightBuggyMorphs:!0,rootObject:d}),13);case 13:ea=Ma.yieldResult;if(!ea||!ea.isMorph)throw Error("reloading snapshot does not create a morph!");Ma.leaveTryBlock(10);break;case 11:throw Aa=Ma.enterCatchBlock(),Error("Error snapshotting morph: Cannot recreate morph from snapshot!\n"+Aa.stack);case 10:return Ma.return(r)}})}function Uu(d,c){return qf.deserializeMorph(d,Object.assign({reinitializeIds:!0,ignoreClassNotFound:!1,onDeserializationStart:qf.loadPackagesAndModulesOfSnapshot,migrations:NC},
c))}function tZ(d,c){var h,f,k,n,b,e,m;return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){switch(a.nextAddress){case 1:if(!d.isDirectory())return e=c,m=d.name(),a.yield(d.read(),9);h=c[d.name()]={};return a.yield(d.dirList(),4);case 4:f=a.yieldResult,k=$jscomp.makeIterator(f),n=k.next();case 5:if(n.done)return a.return(c);b=n.value;return a.yield(tZ(b,h),6);case 6:n=k.next();a.jumpTo(5);break;case 9:return e[m]=a.yieldResult,a.return(c)}})}function uZ(d,c){c=void 0===c?[]:c;var h=[];if(d.hasOwnProperty("package.json")){var f=
c.slice(1).reduceRight(function(n,b){return n.join(b)},qf.resource(c[0])).url;h.push({files:d,url:f,requiredPackages:d.requiredPackages})}for(var k in d)"object"===typeof d[k]&&h.push.apply(h,$jscomp.arrayFromIterable(uZ(d[k],c.concat(k))));return h}function TP(d){var c=qf.findPackagesInFileSpec(d.packages),h={};d=d.packageDepMap;if(!d)return c;c=$jscomp.makeIterator(c);for(var f=c.next();!f.done;f=c.next())f=f.value,h[f.url]=f;return qf.arr.flatten(qf.graph.sortByReference(d)).map(function(k){return h[k]})}
function wF(d){var c,h,f,k,n,b,e,m,a,g,l,r,v,y,A,E,F;return $jscomp.asyncExecutePromiseGeneratorProgram(function(H){switch(H.nextAddress){case 1:if(!d.packagesToRegister){H.jumpTo(2);break}c=$jscomp.makeIterator(d.packagesToRegister);h=c.next();case 3:if(h.done){H.jumpTo(2);break}f=h.value;H.setCatchFinallyBlocks(6);return H.yield(qf.registerPackage(f),8);case 8:H.leaveTryBlock(4);break;case 6:H.enterCatchBlock(),console.error("Failed to register package "+f);case 4:h=c.next();H.jumpTo(3);break;case 2:if(!d.packages){H.jumpTo(9);
break}k=qf.packagesOfSnapshot(d);n=$jscomp.makeIterator(k);b=n.next();case 10:if(b.done){H.jumpTo(9);break}m=e=b.value;a=m.files;g=m.url;if(r=(l=qf.lookupPackage(g))&&l.pkg){v=r.version;y=JSON.parse(a["package.json"]);A=y.version;try{if(A&&v&&qf.semver.lte(A,v,!0)){console.log("[load morph] Package "+g+" is loaded in version "+v+(" which is newer than "+A+". Will NOT load older variant."));H.jumpTo(11);break}}catch(I){console.warn("Error in package version comparison: ",I)}}return H.yield(qf.createFiles(g,
a),13);case 13:return H.yield(qf.ensurePackage(g),14);case 14:return r=H.yieldResult,H.yield(r.reload({forgetEnv:!1,forgetDeps:!1}),15);case 15:return H.yield(System.import("lively.classes/object-classes.js"),16);case 16:E=H.yieldResult,F=E.default,qf.objectScriptingEnabled=!!F,qf.objectScriptingEnabled&&F.withId(r.name);case 11:b=n.next();H.jumpTo(10);break;case 9:return H.yield(Promise.all(qf.requiredModulesOfSnapshot(d).map(function(I){return(System.get(I)?null:System.import(I)).catch(function(M){return console.error("Error loading "+
I,M)})})),0)}})}function KJ(d){var c,h,f,k,n,b,e,m,a,g,l,r,v,y,A,E,F,H,I,M,N,W,X,ea,Aa,Ma,K,aa,T,U,pa,fa,oa,gb,zb,va,ma;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ta){switch(ta.nextAddress){case 1:c={},h=d.snapshot,f=[],k={},n=!0,b={},e={},a=ta.forIn(h);case 2:if(null==(m=a.getNext())){ta.jumpTo(4);break}g=h[m]["lively.serializer-class-info"];if(!(g&&g.module&&g.module.package)){ta.jumpTo(5);break}l=qf.getPackage(g.module.package.name);if(!l.address.startsWith("local://")){ta.jumpTo(5);
break}return ta.yield(System.import("lively.classes/object-classes.js"),7);case 7:return r=ta.yieldResult,e.$jscomp$loop$prop$ObjectPackage$2216=r.default,ta.yield(System.import("lively.classes/util.js"),8);case 8:v=ta.yieldResult,y=v.withSuperclasses,qf.objectScriptingEnabled=!!e.$jscomp$loop$prop$ObjectPackage$2216,A=e.$jscomp$loop$prop$ObjectPackage$2216.forSystemPackage(l),E=A.objectModule.systemModule._recorder[g.className],F=y(E),F.forEach(function(Na){return function(Kb){(Kb=Na.$jscomp$loop$prop$ObjectPackage$2216.lookupPackageForClass(Kb))&&
f.push(Kb.systemPackage)}}(e));case 5:if(H=h[m].props.metadata)if(I=void 0,H.value&&H.value.__ref__?(M=h[H.value.id],M.props.externalPackages&&(I=M.props.externalPackages.value)):I=H.externalPackages,I)for(n=!0,N=0;N<I.length;N++)k[I[N]]=!0;e={$jscomp$loop$prop$ObjectPackage$2216:e.$jscomp$loop$prop$ObjectPackage$2216};ta.jumpTo(2);break;case 4:n&&(d.packagesToRegister=Object.keys(k)),W=[],X=$jscomp.makeIterator(f),ea=X.next();case 9:if(ea.done)return f=[].concat($jscomp.arrayFromIterable(W),$jscomp.arrayFromIterable(f)),
ta.yield(Promise.all(f.map(function(Na){var Kb,kc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Vb){if(1==Vb.nextAddress)return Kb=qf.resource(Na.address).asDirectory(),Vb.yield(qf.resourceToJSON(Kb,{}),2);kc=Vb.yieldResult;c[Kb.parent().url]||(c[Kb.parent().url]={});Object.assign(c[Kb.parent().url],kc);b[Na.url]||(b[Na.url]=[]);Vb.jumpToEnd()})})),16);Aa=ea.value;Ma=$jscomp.makeIterator(Aa.modules());K=Ma.next();case 12:if(K.done){ea=X.next();ta.jumpTo(9);break}aa=K.value;if(aa.id.endsWith(".json")){ta.jumpTo(13);
break}T=$jscomp;U=T.makeIterator;return ta.yield(aa.imports(),15);case 15:for(pa=U.call(T,ta.yieldResult),fa=pa.next();!fa.done;fa=pa.next())if(gb=oa=fa.value,zb=gb.fromModule,va=qf.module(zb).package())ma=va.config,ma.lively&&ma.lively.isObjectPackage&&(W.push(va),b[Aa.url]?qf.arr.pushIfNotIncluded(b[Aa.url],va.url):b[Aa.url]=[va.url]);case 13:K=Ma.next();ta.jumpTo(12);break;case 16:return ta.return({packages:c,depMap:b})}})}function LJ(){UP=!0;for(var d,c,h=xF.length;h;){c=xF;xF=[];for(d=-1;++d<
h;)c[d]();h=xF.length}UP=!1}function OC(d,c,h){var f=h[h.length-1];d===f.element&&(h.pop(),f=h[h.length-1]);h=f.element;f=f.index;Array.isArray(h)?h.push(d):f===c.length-2?(c=c.pop(),h[c]=d):c.push(d)}function Ak(){Ak.init.call(this)}function MJ(d){if("function"!=typeof d)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof d);}function vZ(d,c,h,f){var k,n,b;if(MJ(h),void 0===(n=d._events)?(n=d._events=Object.create(null),d._eventsCount=0):(void 0!==n.newListener&&
(d.emit("newListener",c,h.listener?h.listener:h),n=d._events),b=n[c]),void 0===b)n[c]=h,++d._eventsCount;else if("function"==typeof b?b=n[c]=f?[h,b]:[b,h]:f?b.unshift(h):b.push(h),0<(k=void 0===d._maxListeners?Ak.defaultMaxListeners:d._maxListeners)&&b.length>k&&!b.warned)b.warned=!0,h=Error("Possible EventEmitter memory leak detected. "+b.length+" "+String(c)+" listeners added. Use emitter.setMaxListeners() to increase limit"),h.name="MaxListenersExceededWarning",h.emitter=d,h.type=c,h.count=b.length,
console&&console.warn&&console.warn(h);return d}function Nba(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function wZ(d,c,h){d={fired:!1,wrapFn:void 0,target:d,type:c,listener:h};c=Nba.bind(d);return c.listener=h,d.wrapFn=c,c}function xZ(d,c,h){d=d._events;if(void 0===d)return[];c=d[c];if(void 0===c)h=[];else if("function"==typeof c)h=h?[c.listener||c]:[c];else if(h)for(h=
Array(c.length),d=0;d<h.length;++d)h[d]=c[d].listener||c[d];else h=yZ(c,c.length);return h}function zZ(d){var c=this._events;if(void 0!==c){d=c[d];if("function"==typeof d)return 1;if(void 0!==d)return d.length}return 0}function yZ(d,c){for(var h=Array(c),f=0;f<c;++f)h[f]=d[f];return h}function PC(d){return d&&"object"===typeof d&&"default"in d?d["default"]:d}function Ux(){this._store={}}function yF(d){this._store=new Ux;if(d&&Array.isArray(d))for(var c=0,h=d.length;c<h;c++)this.add(d[c])}function tn(d){var c;
if(!d||"object"!==typeof d)return d;if(Array.isArray(d)){var h=[];var f=0;for(c=d.length;f<c;f++)h[f]=tn(d[f]);return h}if(d instanceof Date)return d.toISOString();if("undefined"!==typeof ArrayBuffer&&d instanceof ArrayBuffer||"undefined"!==typeof Blob&&d instanceof Blob)return d instanceof ArrayBuffer?"function"===typeof d.slice?d=d.slice(0):(f=new ArrayBuffer(d.byteLength),h=new Uint8Array(f),d=new Uint8Array(d),h.set(d),d=f):(f=d.size,h=d.type,d="function"===typeof d.slice?d.slice(0,f,h):d.webkitSlice(0,
f,h)),d;h=Object.getPrototypeOf(d);null===h?h=!0:(h=h.constructor,h="function"==typeof h&&h instanceof h&&AZ.call(h)==Oba);if(!h)return d;h={};for(f in d)Object.prototype.hasOwnProperty.call(d,f)&&(c=tn(d[f]),"undefined"!==typeof c&&(h[f]=c));return h}function BZ(d){var c=!1;return QC(function(h){if(c)throw Error("once called more than once");c=!0;d.apply(this,h)})}function CZ(d){return QC(function(c){c=tn(c);var h=this,f="function"===typeof c[c.length-1]?c.pop():!1,k=new Promise(function(n,b){var e;
try{var m=BZ(function(a,g){a?b(a):n(g)});c.push(m);(e=d.apply(h,c))&&"function"===typeof e.then&&n(e)}catch(a){b(a)}});f&&k.then(function(n){f(null,n)},f);return k})}function Pba(d,c,h){if(d.constructor.listeners("debug").length){for(var f=["api",d.name,c],k=0;k<h.length-1;k++)f.push(h[k]);d.constructor.emit("debug",f);var n=h[h.length-1];h[h.length-1]=function(b,e){var m=["api",d.name,c];m=m.concat(b?["error",b]:["success",e]);d.constructor.emit("debug",m);n(b,e)}}}function Wm(d,c){return CZ(QC(function(h){if(this._closed)return Promise.reject(Error("database is closed"));
if(this._destroyed)return Promise.reject(Error("database is destroyed"));var f=this;Pba(f,d,h);return this.taskqueue.isReady?c.apply(this,h):new Promise(function(k,n){f.taskqueue.addTask(function(b){b?n(b):k(f[d].apply(f,h))})})}))}function zF(d,c){for(var h={},f=0,k=c.length;f<k;f++){var n=c[f];n in d&&(h[n]=d[n])}return h}function DZ(d){return d}function Qba(d){return[{ok:d}]}function EZ(d,c,h){function f(){var v=[];g.forEach(function(y){y.docs.forEach(function(A){v.push({id:y.id,docs:[A]})})});
h(null,{results:v})}function k(){if(!(r>=l.length)){var v=l.slice(r,Math.min(r+6,l.length));n(v,r);r+=v.length}}function n(v,y){v.forEach(function(A,E){var F=y+E;E=e.get(A);var H=zF(E[0],["atts_since","attachments"]);H.open_revs=E.map(function(M){return M.rev});H.open_revs=H.open_revs.filter(DZ);var I=DZ;0===H.open_revs.length&&(delete H.open_revs,I=Qba);["revs","attachments","binary","ajax","latest"].forEach(function(M){M in c&&(H[M]=c[M])});d.get(A,H,function(M,N){M=M?[{error:M}]:I(N);g[F]={id:A,
docs:M};++a===m&&f();k()})})}var b=c.docs,e=new er;b.forEach(function(v){e.has(v.id)?e.get(v.id).push(v):e.set(v.id,[v])});var m=e.size,a=0,g=Array(m),l=[];e.forEach(function(v,y){l.push(y)});var r=0;k()}function Rba(d){AF&&addEventListener("storage",function(c){d.emit(c.key)})}function RC(){tq.EventEmitter.call(this);this._listeners={};Rba(this)}function $r(d){if("undefined"!==typeof console&&"function"===typeof console[d]){var c=Array.prototype.slice.call(arguments,1);console[d].apply(console,c)}}
function Sba(d){var c=0;d||(c=2E3);d=parseInt(d,10)||0;c=parseInt(c,10);c=c!==c||c<=d?(d||1)<<1:c+1;6E5<c&&(d=3E5,c=6E5);return~~((c-d)*Math.random()+d)}function VP(d,c){$r("info","The above "+d+" is totally normal. "+c)}function Wk(d,c,h){Error.call(this,h);this.status=d;this.name=c;this.message=h;this.error=!0}function Si(d,c){function h(f){for(var k in d)"function"!==typeof d[k]&&(this[k]=d[k]);void 0!==f&&(this.reason=f)}h.prototype=Wk.prototype;return new h(c)}function SC(d){if("object"!==typeof d){var c=
d;d=FZ;d.data=c}"error"in d&&"conflict"===d.error&&(d.name="conflict",d.status=409);"name"in d||(d.name=d.error||"unknown");"status"in d||(d.status=500);"message"in d||(d.message=d.message||d.reason);return d}function WP(d){var c={},h=d.filter&&"function"===typeof d.filter;c.query=d.query_params;return function(f){f.doc||(f.doc={});var k;if(k=h)try{k=!(0,d.filter)(f.doc,c)}catch(b){k=Si(NJ,"Filter function threw: "+b.toString())}if("object"===typeof k)return k;if(k)return!1;if(!d.include_docs)delete f.doc;
else if(!d.attachments)for(var n in f.doc._attachments)f.doc._attachments.hasOwnProperty(n)&&(f.doc._attachments[n].stub=!0);return!0}}function OJ(d){for(var c=[],h=0,f=d.length;h<f;h++)c=c.concat(d[h]);return c}function GZ(d){var c;d?"string"!==typeof d?c=Si(HZ):/^_/.test(d)&&!/^_(design|local)/.test(d)&&(c=Si(Tba)):c=Si(Uba);if(c)throw c;}function Vu(d){return"boolean"===typeof d._remote?d._remote:"function"===typeof d.type?($r("warn","db.type() is deprecated and will be removed in a future version of PouchDB"),
"http"===d.type()):!1}function XP(d){if(!d)return null;var c=d.split("/");return 2===c.length?c:1===c.length?[d,d]:null}function IZ(d){return(d=XP(d))?d.join("/"):null}function JZ(d){d=Vba.exec(d);for(var c={},h=14;h--;){var f=KZ[h],k=d[h]||"",n=-1!==["user","password"].indexOf(f);c[f]=n?decodeURIComponent(k):k}c.queryKey={};c[KZ[12]].replace(Wba,function(b,e,m){e&&(c.queryKey[e]=m)});return c}function YP(d,c){var h=[],f=[],k;for(k in c)c.hasOwnProperty(k)&&(h.push(k),f.push(c[k]));h.push(d);return Function.apply(null,
h).apply(null,f)}function PJ(d,c,h){return new Promise(function(f,k){d.get(c,function(n,b){if(n){if(404!==n.status)return k(n);b={}}n=b._rev;b=h(b);if(!b)return f({updated:!1,rev:n});b._id=c;b._rev=n;f(Xba(d,b,h))})})}function Xba(d,c,h){return d.put(c).then(function(f){return{updated:!0,rev:f.rev}},function(f){if(409!==f.status)throw f;return PJ(d,c._id,h)})}function ZP(d,c){d=d||[];c=c||{};try{return new Blob(d,c)}catch(k){if("TypeError"!==k.name)throw k;for(var h=new ("undefined"!==typeof BlobBuilder?
BlobBuilder:"undefined"!==typeof MSBlobBuilder?MSBlobBuilder:"undefined"!==typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder),f=0;f<d.length;f+=1)h.append(d[f]);return h.getBlob(c.type)}}function $P(d,c){for(var h=d.length,f=new ArrayBuffer(h),k=new Uint8Array(f),n=0;n<h;n++)k[n]=d.charCodeAt(n);return ZP([f],{type:c})}function aQ(d,c){return $P(atob(d),c)}function LZ(d,c){var h=new FileReader,f="function"===typeof h.readAsBinaryString;h.onloadend=function(k){var n=k.target.result||"";if(f)return c(n);
k="";n=new Uint8Array(n);for(var b=n.byteLength,e=0;e<b;e++)k+=String.fromCharCode(n[e]);c(k)};f?h.readAsBinaryString(d):h.readAsArrayBuffer(d)}function MZ(d,c){LZ(d,function(h){c(h)})}function bQ(d,c){MZ(d,function(h){c(btoa(h))})}function Yba(d,c){var h=new FileReader;h.onloadend=function(f){f=f.target.result||new ArrayBuffer(0);c(f)};h.readAsArrayBuffer(d)}function Zba(d,c,h){return d.webkitSlice?d.webkitSlice(c,h):d.slice(c,h)}function $ba(d,c,h,f,k){if(0<h||f<c.size)c=Zba(c,h,f);Yba(c,function(n){d.append(n);
k()})}function aca(d,c,h,f,k){if(0<h||f<c.length)c=c.substring(h,f);d.appendBinary(c);k()}function cQ(d,c){function h(){bca(k)}function f(){var r=g.end(!0);r=btoa(r);c(r);g.destroy()}function k(){var r=a*e,v=r+e;a++;a<m?l(g,d,r,v,h):l(g,d,r,v,f)}var n="string"===typeof d,b=n?d.length:d.size,e=Math.min(32768,b),m=Math.ceil(b/e),a=0,g=n?new QJ:new QJ.ArrayBuffer,l=n?aca:$ba;k()}function NZ(d,c){d=tn(d);if(!c)return OZ.v4().replace(/-/g,"").toLowerCase();delete d._rev_tree;return QJ.hash(JSON.stringify(d))}
function bA(d){d=d.rev_tree.slice();for(var c;c=d.pop();){var h=c.ids,f=h[2];c=c.pos;if(f.length){h=0;for(var k=f.length;h<k;h++)d.push({pos:c+1,ids:f[h]})}else if(f=!!h[1].deleted,h=h[0],!n||(e!==f?e:b!==c?b<c:n<h)){var n=h;var b=c;var e=f}}return b+"-"+n}function cA(d,c){d=d.slice();for(var h;h=d.pop();){var f=h.pos,k=h.ids,n=k[2];h=c(0===n.length,f,k[0],h.ctx,k[1]);k=0;for(var b=n.length;k<b;k++)d.push({pos:f+1,ids:n[k],ctx:h})}}function cca(d,c){return d.pos-c.pos}function dQ(d){var c=[];cA(d,
function(f,k,n,b,e){f&&c.push({rev:k+"-"+n,pos:k,opts:e})});c.sort(cca).reverse();d=0;for(var h=c.length;d<h;d++)delete c[d].pos;return c}function eQ(d){var c=bA(d);d=dQ(d.rev_tree);for(var h=[],f=0,k=d.length;f<k;f++){var n=d[f];n.rev===c||n.opts.deleted||h.push(n.rev)}return h}function dca(d){var c=[];cA(d.rev_tree,function(h,f,k,n,b){"available"!==b.status||h||(c.push(f+"-"+k),b.status="missing")});return c}function PZ(d){var c=[];d=d.slice();for(var h;h=d.pop();){var f=h.pos,k=h.ids,n=k[0],b=
k[1];k=k[2];var e=0===k.length;h=h.history?h.history.slice():[];h.push({id:n,opts:b});e&&c.push({pos:f+1-h.length,ids:h});n=0;for(b=k.length;n<b;n++)d.push({pos:f+1,ids:k[n],history:h})}return c.reverse()}function eca(d,c){return d.pos-c.pos}function QZ(d,c){for(var h,f,k=d.length;c<k;c++){var n=d[c];n=[n.id,n.opts,[]];f?(f[2].push(n),f=n):h=f=n}return h}function fca(d,c){return d[0]<c[0]?-1:1}function RZ(d,c){c=[{tree1:d,tree2:c}];for(var h=!1;0<c.length;){var f=c.pop(),k=f.tree1;f=f.tree2;if(k[1].status||
f[1].status)k[1].status="available"===k[1].status||"available"===f[1].status?"available":"missing";for(var n=0;n<f[2].length;n++)if(k[2][0]){for(var b=!1,e=0;e<k[2].length;e++)k[2][e][0]===f[2][n][0]&&(c.push({tree1:k[2][e],tree2:f[2][n]}),b=!0);if(!b){h="new_branch";b=k[2];e=f[2][n];for(var m,a=b,g=e,l=fca,r=0,v=a.length;r<v;)m=r+v>>>1,0>l(a[m],g)?r=m+1:v=m;b.splice(r,0,e)}}else h="new_leaf",k[2][0]=f[2][n]}return{conflicts:h,tree:d}}function SZ(d,c,h){var f=[],k=!1,n=!1;if(!d.length)return{tree:[c],
conflicts:"new_leaf"};for(var b=0,e=d.length;b<e;b++){var m=d[b];if(m.pos===c.pos&&m.ids[0]===c.ids[0])n=RZ(m.ids,c.ids),f.push({pos:m.pos,ids:n.tree}),k=k||n.conflicts,n=!0;else if(!0!==h){var a=m.pos<c.pos?m:c,g=m.pos<c.pos?c:m,l=[],r=[];for(r.push({ids:a.ids,diff:g.pos-a.pos,parent:null,parentIdx:null});0<r.length;){var v=r.pop();if(0===v.diff)v.ids[0]===g.ids[0]&&l.push(v);else for(var y=v.ids[2],A=0,E=y.length;A<E;A++)r.push({ids:y[A],diff:v.diff-1,parent:v.ids,parentIdx:A})}(l=l[0])?(n=RZ(l.ids,
g.ids),l.parent[2][l.parentIdx]=n.tree,f.push({pos:a.pos,ids:a.ids}),k=k||n.conflicts,n=!0):f.push(m)}else f.push(m)}n||f.push(c);f.sort(eca);return{tree:f,conflicts:k||"internal_node"}}function gca(d,c){d=PZ(d);for(var h,f,k=0,n=d.length;k<n;k++){var b=d[k],e=b.ids;if(e.length>c){h||(h={});var m=e.length-c;var a={pos:b.pos+m,ids:QZ(e,m)};for(var g=0;g<m;g++)h[b.pos+g+"-"+e[g].id]=!0}else a={pos:b.pos,ids:QZ(e,0)};f=f?SZ(f,a,!0).tree:[a]}h&&cA(f,function(l,r,v){delete h[r+"-"+v]});return{tree:f,revs:h?
Object.keys(h):[]}}function TZ(d,c,h){d=SZ(d,c);h=gca(d.tree,h);return{tree:h.tree,stemmedRevs:h.revs,conflicts:d.conflicts}}function hca(d){return d.ids}function uw(d,c){c||(c=bA(d));c=c.substring(c.indexOf("-")+1);d=d.rev_tree.map(hca);for(var h;h=d.pop();){if(h[0]===c)return!!h[1].deleted;d=d.concat(h[2])}}function dA(d){return/^_local/.test(d)}function ica(d,c){for(var h=c.rev_tree.slice(),f;f=h.pop();){var k=f.pos,n=f.ids,b=n[0],e=n[1];n=n[2];var m=0===n.length;f=f.history?f.history.slice():
[];f.push({id:b,pos:k,opts:e});if(m)for(e=0,m=f.length;e<m;e++){var a=f[e];if(a.pos+"-"+a.id===d)return k+"-"+b}b=0;for(e=n.length;b<e;b++)h.push({pos:k+1,ids:n[b],history:f})}throw Error("Unable to resolve latest revision for id "+c.id+", rev "+d);}function BF(d,c,h){function f(){k.cancel()}tq.EventEmitter.call(this);var k=this;this.db=d;c=c?tn(c):{};var n=c.complete=BZ(function(e,m){e?(m=k,0<("listenerCount"in m?m.listenerCount("error"):tq.EventEmitter.listenerCount(m,"error"))&&k.emit("error",
e)):k.emit("complete",m);k.removeAllListeners();d.removeListener("destroyed",f)});h&&(k.on("complete",function(e){h(null,e)}),k.on("error",h));d.once("destroyed",f);c.onChange=function(e,m,a){if(!k.isCancelled)try{k.emit("change",e,m,a)}catch(g){$r("error",'Error in .on("change", function):',g)}};var b=new Promise(function(e,m){c.complete=function(a,g){a?m(a):e(g)}});k.once("cancel",function(){d.removeListener("destroyed",f);c.complete(null,{status:"cancelled"})});this.then=b.then.bind(b);this["catch"]=
b["catch"].bind(b);this.then(function(e){n(null,e)},n);d.taskqueue.isReady?k.validateChanges(c):d.taskqueue.addTask(function(e){e?c.complete(e):k.isCancelled?k.emit("cancel"):k.validateChanges(c)})}function jca(d,c,h){var f=[{rev:d._rev}];"all_docs"===h.style&&(f=dQ(c.rev_tree).map(function(k){return{rev:k.rev}}));f={id:c.id,changes:f,doc:d};uw(c,d._rev)&&(f.deleted=!0);h.conflicts&&(f.doc._conflicts=eQ(c),f.doc._conflicts.length||delete f.doc._conflicts);return f}function fQ(d,c){return function(h,
f){h||f[0]&&f[0].error?(h=h||f[0],h.docId=c,d(h)):d(null,f.length?f[0]:f)}}function kca(d){for(var c=0;c<d.length;c++){var h=d[c];if(h._deleted)delete h._attachments;else if(h._attachments)for(var f=Object.keys(h._attachments),k=0;k<f.length;k++){var n=f[k];h._attachments[n]=zF(h._attachments[n],"data digest content_type length revpos stub".split(" "))}}}function lca(d,c){var h=d._id;var f=c._id;h=h<f?-1:h>f?1:0;if(0!==h)return h;d=d._revisions?d._revisions.start:0;c=c._revisions?c._revisions.start:
0;return d<c?-1:d>c?1:0}function mca(d){var c={},h=[];cA(d,function(f,k,n,b){k=k+"-"+n;f&&(c[k]=0);void 0!==b&&h.push({from:b,to:k});return k});h.reverse();h.forEach(function(f){c[f.from]=void 0===c[f.from]?1+c[f.to]:Math.min(c[f.from],1+c[f.to])});return c}function nca(d){var c="limit"in d?d.keys.slice(d.skip,d.limit+d.skip):0<d.skip?d.keys.slice(d.skip):d.keys;d.keys=c;d.skip=0;delete d.limit;d.descending&&(c.reverse(),d.descending=!1)}function UZ(d){var c=d._compactionQueue[0],h=c.opts,f=c.callback;
d.get("_local/compaction").catch(function(){return!1}).then(function(k){k&&k.last_seq&&(h.last_seq=k.last_seq);d._compact(h,function(n,b){n?f(n):f(null,b);Wu(function(){d._compactionQueue.shift();d._compactionQueue.length&&UZ(d)})})})}function tl(){tq.EventEmitter.call(this);for(var d in tl.prototype)"function"===typeof this[d]&&(this[d]=this[d].bind(this))}function CF(){this.failed=this.isReady=!1;this.queue=[]}function oca(d,c){var h=d.match(/([a-z-]*):\/\/(.*)/);if(h)return{name:/https?/.test(h[1])?
h[1]+"://"+h[2]:h[2],adapter:h[1]};var f=Li.adapters,k=Li.preferredAdapters;h=Li.prefix;c=c.adapter;if(!c)for(var n=0;n<k.length;++n)if(c=k[n],"idb"===c&&"websql"in f&&AF&&localStorage["_pouch__websqldb_"+h+d])$r("log",'PouchDB is downgrading "'+d+'" to WebSQL to avoid data loss, because it was already opened with WebSQL.');else break;f=f[c];return{name:(f&&"use_prefix"in f?f.use_prefix:1)?h+d:d,adapter:c}}function pca(d){function c(f){d.removeListener("closed",h);f||d.constructor.emit("destroyed",
d.name)}function h(){d.removeListener("destroyed",c);d.constructor.emit("unref",d)}d.once("destroyed",c);d.once("closed",h);d.constructor.emit("ref",d)}function Li(d,c){if(!(this instanceof Li))return new Li(d,c);var h=this;c=c||{};d&&"object"===typeof d&&(c=d,d=c.name,delete c.name);void 0===c.deterministic_revs&&(c.deterministic_revs=!0);this.__opts=c=tn(c);h.auto_compaction=c.auto_compaction;h.prefix=Li.prefix;if("string"!==typeof d)throw Error("Missing/invalid DB name");var f=oca((c.prefix||"")+
d,c);c.name=f.name;c.adapter=c.adapter||f.adapter;h.name=d;h._adapter=c.adapter;Li.emit("debug",["adapter","Picked adapter: ",c.adapter]);if(!Li.adapters[c.adapter]||!Li.adapters[c.adapter].valid())throw Error("Invalid Adapter: "+c.adapter);tl.call(h);h.taskqueue=new CF;h.adapter=c.adapter;Li.adapters[c.adapter].call(h,c,function(k){if(k)return h.taskqueue.fail(k);pca(h);h.emit("created",h);Li.emit("created",h.name);h.taskqueue.ready(h)})}function VZ(d,c){for(var h=0,f=c.length;h<f&&(d=d[c[h]],d);h++);
return d}function WZ(d){for(var c=[],h="",f=0,k=d.length;f<k;f++){var n=d[f];"."===n?0<f&&"\\"===d[f-1]?h=h.substring(0,h.length-1)+".":(c.push(h),h=""):h+=n}c.push(h);return c}function qca(d){return d[Object.keys(d)[0]]}function DF(d){var c={};d.forEach(function(h){Object.keys(h).forEach(function(f){var k=h[f];"object"!==typeof k&&(k={$eq:k});if(-1<XZ.indexOf(f))c[f]=k instanceof Array?k.map(function(b){return DF([b])}):DF([k]);else{var n=c[f]=c[f]||{};Object.keys(k).forEach(function(b){var e=k[b];
"$gt"===b||"$gte"===b?"undefined"===typeof n.$eq&&("undefined"!==typeof n.$gte?"$gte"===b?e>n.$gte&&(n.$gte=e):e>=n.$gte&&(delete n.$gte,n.$gt=e):"undefined"!==typeof n.$gt?"$gte"===b?e>n.$gt&&(delete n.$gt,n.$gte=e):e>n.$gt&&(n.$gt=e):n[b]=e):"$lt"===b||"$lte"===b?"undefined"===typeof n.$eq&&("undefined"!==typeof n.$lte?"$lte"===b?e<n.$lte&&(n.$lte=e):e<=n.$lte&&(delete n.$lte,n.$lt=e):"undefined"!==typeof n.$lt?"$lte"===b?e<n.$lt&&(delete n.$lt,n.$lte=e):e<n.$lt&&(n.$lt=e):n[b]=e):"$ne"===b?"$ne"in
n?n.$ne.push(e):n.$ne=[e]:"$eq"===b?(delete n.$gt,delete n.$gte,delete n.$lt,delete n.$lte,delete n.$ne,n.$eq=e):n[b]=e})}})});return c}function YZ(d){for(var c in d){if(Array.isArray(d))for(var h in d)d[h].$and&&(d[h]=DF(d[h].$and));var f=d[c];"object"===typeof f&&YZ(f)}return d}function ZZ(d,c){for(var h in d){"$and"===h&&(c=!0);var f=d[h];"object"===typeof f&&(c=ZZ(f,c))}return c}function rca(d){var c=tn(d);d=!1;ZZ(c,!1)&&(c=YZ(c),"$and"in c&&(c=DF(c.$and)),d=!0);["$or","$nor"].forEach(function(b){b in
c&&c[b].forEach(function(e){for(var m=Object.keys(e),a=0;a<m.length;a++){var g=m[a],l=e[g];if("object"!==typeof l||null===l)e[g]={$eq:l}}})});"$not"in c&&(c.$not=DF([c.$not]));for(var h=Object.keys(c),f=0;f<h.length;f++){var k=h[f],n=c[k];"object"!==typeof n||null===n?n={$eq:n}:"$ne"in n&&!d&&(n.$ne=[n.$ne]);c[k]=n}return c}function Xn(d,c){if(d===c)return 0;d=eA(d);c=eA(c);var h=gQ(d),f=gQ(c);if(0!==h-f)return h-f;switch(typeof d){case "number":return d-c;case "boolean":return d<c?-1:1;case "string":return d===
c?0:d>c?1:-1}if(Array.isArray(d))a:{h=Math.min(d.length,c.length);for(f=0;f<h;f++){var k=Xn(d[f],c[f]);if(0!==k){d=k;break a}}d=d.length===c.length?0:d.length>c.length?1:-1}else a:{h=Object.keys(d);f=Object.keys(c);k=Math.min(h.length,f.length);for(var n=0;n<k;n++){var b=Xn(h[n],f[n]);if(0!==b){d=b;break a}b=Xn(d[h[n]],c[f[n]]);if(0!==b){d=b;break a}}d=h.length===f.length?0:h.length>f.length?1:-1}return d}function eA(d){switch(typeof d){case "undefined":return null;case "number":if(Infinity===d||
-Infinity===d||isNaN(d))return null;break;case "object":var c=d;if(Array.isArray(d)){var h=d.length;d=Array(h);for(var f=0;f<h;f++)d[f]=eA(c[f])}else{if(d instanceof Date)return d.toJSON();if(null!==d)for(h in d={},c)c.hasOwnProperty(h)&&(f=c[h],"undefined"!==typeof f&&(d[h]=eA(f)))}}return d}function sca(d){if(null!==d)switch(typeof d){case "boolean":return d?1:0;case "number":if(0===d)d="1";else{var c=d.toExponential().split(/e\+?/),h=parseInt(c[1],10);d=0>d;h=((d?-h:h)- -324).toString();for(var f=
"",k=3-h.length;f.length<k;)f+="0";h=(d?"0":"2")+(""+(f+h));c=Math.abs(parseFloat(c[0]));d&&(c=10-c);d=c.toFixed(20);d=d.replace(/\.?0+$/,"");d=h+=""+d}return d;case "string":return d.replace(/\u0002/g,"\u0002\u0002").replace(/\u0001/g,"\u0001\u0002").replace(/\u0000/g,"\u0001\u0001");case "object":var n=Array.isArray(d);c=n?d:Object.keys(d);h=-1;f=c.length;k="";if(n)for(;++h<f;)k+=qt(c[h]);else for(;++h<f;)n=c[h],k+=qt(n)+qt(d[n]);return k}return""}function qt(d){d=eA(d);return gQ(d)+""+sca(d)+"\x00"}
function gQ(d){var c=["boolean","number","string","object"].indexOf(typeof d);if(~c)return null===d?1:Array.isArray(d)?5:3>c?c+2:c+3;if(Array.isArray(d))return 5}function tca(d){function c(h){return d.map(function(f){f=Object.keys(f)[0];f=WZ(f);return VZ(h,f)})}return function(h,f){var k=c(h.doc),n=c(f.doc);k=Xn(k,n);if(0!==k)return k;h=h.doc._id;f=f.doc._id;return h<f?-1:h>f?1:0}}function uca(d,c,h){d=d.filter(function(k){return TC(k.doc,c.selector,h)});if(c.sort){var f=tca(c.sort);d=d.sort(f);"string"!==
typeof c.sort[0]&&"desc"===qca(c.sort[0])&&(d=d.reverse())}if("limit"in c||"skip"in c)f=c.skip||0,d=d.slice(f,("limit"in c?c.limit:d.length)+f);return d}function TC(d,c,h){return h.every(function(f){var k=c[f],n=WZ(f),b=VZ(d,n);return-1<XZ.indexOf(f)?vca(f,k,d):hQ(k,d,n,b)})}function hQ(d,c,h,f){return d?"object"===typeof d?Object.keys(d).every(function(k){var n=d[k];if(!$Z[k])throw Error('unknown operator "'+k+'" - should be one of $eq, $lte, $lt, $gt, $gte, $exists, $ne, $in, $nin, $size, $mod, $regex, $elemMatch, $type, $allMatch or $all');
return $Z[k](c,n,h,f)}):d===f:!0}function vca(d,c,h){return"$or"===d?c.some(function(f){return TC(h,f,Object.keys(f))}):"$not"===d?!TC(h,c,Object.keys(c)):!c.find(function(f){return TC(h,f,Object.keys(f))})}function EF(d){return"undefined"!==typeof d&&null!==d}function fA(d){return"undefined"!==typeof d}function a_(d,c){return c.some(function(h){return d instanceof Array?-1<d.indexOf(h):d===h})}function wca(d,c){return c.every(function(h){return-1<d.indexOf(h)})}function xca(d,c){switch(c){case "null":return null===
d;case "boolean":return"boolean"===typeof d;case "number":return"number"===typeof d;case "string":return"string"===typeof d;case "array":return d instanceof Array;case "object":return"[object Object]"==={}.toString.call(d)}throw Error(c+" not supported as a type.Please use one of object, string, array, number, boolean or null.");}function yca(d,c){if(d.selector&&d.filter&&"_selector"!==d.filter)return c(Error('selector invalid for filter "'+("string"===typeof d.filter?d.filter:"function")+'"'));c()}
function zca(d){d.view&&!d.filter&&(d.filter="_view");d.selector&&!d.filter&&(d.filter="_selector");d.filter&&"string"===typeof d.filter&&("_view"===d.filter?d.view=IZ(d.view):d.filter=IZ(d.filter))}function Aca(d,c){return c.filter&&"string"===typeof c.filter&&!c.doc_ids&&!Vu(d.db)}function Bca(d,c){var h=c.complete;if("_view"===c.filter){if(!c.view||"string"!==typeof c.view){var f=Si(NJ,"`view` filter parameter not found or invalid.");return h(f)}var k=XP(c.view);d.db.get("_design/"+k[0],function(b,
e){if(d.isCancelled)return h(null,{status:"cancelled"});if(b)return h(SC(b));b=e&&e.views&&e.views[k[1]]&&e.views[k[1]].map;if(!b)return h(Si(rt,e.views?"missing json key: "+k[1]:"missing json key: views"));e=['return function(doc) {\n  "use strict";\n  var emitted = false;\n  var emit = function (a, b) {\n    emitted = true;\n  };',"  var view = "+b+";","  view(doc);\n  if (emitted) {\n    return true;\n  }\n};"].join("\n");e=YP(e,{});c.filter=e;d.doChanges(c)})}else if(c.selector)c.filter=function(b){var e=
c.selector;if("object"!==typeof e)throw Error("Selector error: expected a JSON object");e=rca(e);return(b=uca([{doc:b}],{selector:e},Object.keys(e)))&&1===b.length},d.doChanges(c);else{var n=XP(c.filter);d.db.get("_design/"+n[0],function(b,e){if(d.isCancelled)return h(null,{status:"cancelled"});if(b)return h(SC(b));b=e&&e.filters&&e.filters[n[1]];if(!b)return h(Si(rt,e&&e.filters?"missing json key: "+n[1]:"missing json key: filters"));c.filter=YP('"use strict";\nreturn '+b+";",{});d.doChanges(c)})}}
function b_(d){return d.reduce(function(c,h){c[h]=!0;return c},{})}function c_(d){if(!/^\d+-/.test(d))return Si(d_);var c=d.indexOf("-"),h=d.substring(0,c);d=d.substring(c+1);return{prefix:parseInt(h,10),id:d}}function e_(d,c,h){h||(h={deterministic_revs:!0});var f={status:"available"};d._deleted&&(f.deleted=!0);if(c){d._id||(d._id=RJ());var k=NZ(d,h.deterministic_revs);if(d._rev){c=c_(d._rev);if(c.error)return c;d._rev_tree=[{pos:c.prefix,ids:[c.id,{status:"missing"},[[k,f,[]]]]}];var n=c.prefix+
1}else d._rev_tree=[{pos:1,ids:[k,f,[]]}],n=1}else{if(d._revisions){k=d._revisions;n=k.start-k.ids.length+1;k=k.ids;c=[k[0],f,[]];h=1;for(var b=k.length;h<b;h++)c=[k[h],{status:"missing"},[c]];d._rev_tree=[{pos:n,ids:c}];n=d._revisions.start;k=d._revisions.ids[0]}if(!d._rev_tree){c=c_(d._rev);if(c.error)return c;n=c.prefix;k=c.id;d._rev_tree=[{pos:n,ids:[k,f,[]]}]}}GZ(d._id);d._rev=n+"-"+k;f={metadata:{},data:{}};for(var e in d)if(Object.prototype.hasOwnProperty.call(d,e)){if((n="_"===e[0])&&!Cca[e])throw d=
Si(f_,e),d.message=f_.message+": "+e,d;n&&!Dca[e]?f.metadata[e.slice(1)]=d[e]:f.data[e]=d[e]}return f}function Eca(d,c,h){try{var f=atob(d.data)}catch(k){f={error:Si(g_,"Attachment is not a valid base64 string")}}if(f.error)return h(f.error);d.length=f.length;d.data="blob"===c?$P(f,d.content_type):"base64"===c?btoa(f):f;cQ(f,function(k){d.digest="md5-"+k;h()})}function Fca(d,c,h){cQ(d.data,function(f){d.digest="md5-"+f;d.length=d.data.size||d.data.length||0;"binary"===c?MZ(d.data,function(k){d.data=
k;h()}):"base64"===c?bQ(d.data,function(k){d.data=k;h()}):h()})}function Gca(d,c,h){if(d.stub)return h();"string"===typeof d.data?Eca(d,c,h):Fca(d,c,h)}function Hca(d,c,h){function f(){k++;d.length===k&&(n?h(n):h())}if(!d.length)return h();var k=0,n;d.forEach(function(b){function e(l){n=l;a++;a===m.length&&f()}var m=b.data&&b.data._attachments?Object.keys(b.data._attachments):[],a=0;if(!m.length)return f();for(var g in b.data._attachments)b.data._attachments.hasOwnProperty(g)&&Gca(b.data._attachments[g],
c,e)})}function Ica(d,c,h,f,k,n,b,e,m){d=d||1E3;var a=e.new_edits,g=new er,l=0,r=c.length;c.forEach(function(v,y){if(v._id&&dA(v._id))h[v._deleted?"_removeLocal":"_putLocal"](v,{ctx:k},function(E,F){n[y]=E||F;++l===r&&m&&m()});else{var A=v.metadata.id;g.has(A)?(r--,g.get(A).push([v,y])):g.set(A,[[v,y]])}});g.forEach(function(v,y){function A(){++F<v.length?E():++l===r&&m&&m()}function E(){var H=v[F],I=H[0];H=H[1];if(f.has(y)){var M=d,N=f.get(y);b:{var W=I.metadata.rev;var X=N.rev_tree.slice();var ea=
W.split("-");W=parseInt(ea[0],10);ea=ea[1];for(var Aa;Aa=X.pop();){if(Aa.pos===W&&Aa.ids[0]===ea){X=!0;break b}for(var Ma=Aa.ids[2],K=0,aa=Ma.length;K<aa;K++)X.push({pos:Aa.pos+1,ids:Ma[K]})}X=!1}X&&!a?(n[H]=I,A()):(ea=N.winningRev||bA(N),X="deleted"in N?N.deleted:uw(N,ea),W="deleted"in I.metadata?I.metadata.deleted:uw(I.metadata),Aa=/^1-/.test(I.metadata.rev),X&&!W&&a&&Aa&&(Aa=I.data,Aa._rev=ea,Aa._id=I.metadata.id,I=e_(Aa,a)),ea=TZ(N.rev_tree,I.metadata.rev_tree[0],M),a&&(X&&W&&"new_leaf"!==ea.conflicts||
!X&&"new_leaf"!==ea.conflicts||X&&!W&&"new_branch"===ea.conflicts)?(I=Si(UC),n[H]=I,A()):(M=I.metadata.rev,I.metadata.rev_tree=ea.tree,I.stemmedRevs=ea.stemmedRevs||[],N.rev_map&&(I.metadata.rev_map=N.rev_map),N=bA(I.metadata),W=uw(I.metadata,N),X=X===W?0:X<W?-1:1,M=M===N?W:uw(I.metadata,M),b(I,N,W,M,!0,X,H,A)))}else N=TZ([],I.metadata.rev_tree[0],d),I.metadata.rev_tree=N.tree,I.stemmedRevs=N.stemmedRevs||[],N=bA(I.metadata),M=uw(I.metadata,N),"was_delete"in e&&M?(n[H]=Si(rt,"deleted"),A()):a&&"missing"===
I.metadata.rev_tree[0].ids[1].status?(I=Si(UC),n[H]=I,A()):b(I,N,M,M,!1,M?0:1,H,A)}var F=0;E()})}function Xu(d){return function(c){var h="unknown_error";c.target&&c.target.error&&(h=c.target.error.name||c.target.error.message);d(Si(iQ,h,c.type))}}function jQ(d,c,h){try{var f=JSON.stringify(d)}catch(k){f=h_.stringify(d)}return{data:f,winningRev:c,deletedOrLocal:h?"1":"0",seq:d.seq,id:d.id}}function gA(d){if(!d)return null;var c=d.data;try{var h=JSON.parse(c)}catch(f){h=h_.parse(c)}h.winningRev=d.winningRev;
h.deleted="1"===d.deletedOrLocal;h.seq=d.seq;return h}function SJ(d){if(!d)return d;var c=d._doc_id_rev.lastIndexOf(":");d._id=d._doc_id_rev.substring(0,c-1);d._rev=d._doc_id_rev.substring(c+1);delete d._doc_id_rev;return d}function i_(d,c,h,f){h?d?"string"!==typeof d?f(d):f(aQ(d,c)):f(ZP([""],{type:c})):d?"string"!==typeof d?LZ(d,function(k){f(btoa(k))}):f(d):f("")}function j_(d,c,h,f){function k(e,m){var a=e._attachments[m];e=a.digest;h.objectStore("attach-store").get(e).onsuccess=function(g){a.body=
g.target.result.body;++b===n.length&&f&&f()}}var n=Object.keys(d._attachments||{});if(!n.length)return f&&f();var b=0;n.forEach(function(e){c.attachments&&c.include_docs?k(d,e):(d._attachments[e].stub=!0,++b===n.length&&f&&f())})}function kQ(d,c){return Promise.all(d.map(function(h){if(h.doc&&h.doc._attachments){var f=Object.keys(h.doc._attachments);return Promise.all(f.map(function(k){var n=h.doc._attachments[k];if("body"in n){var b=n.body,e=n.content_type;return new Promise(function(m){i_(b,e,c,
function(a){h.doc._attachments[k]=VC(zF(n,["digest","content_type"]),{data:a});m()})})}}))}}))}function k_(d,c,h){function f(){k.length&&k.forEach(function(a){e.index("digestSeq").count(IDBKeyRange.bound(a+"::",a+"::\uffff",!1,!1)).onsuccess=function(g){g.target.result||b.delete(a)}})}var k=[],n=h.objectStore("by-sequence"),b=h.objectStore("attach-store"),e=h.objectStore("attach-seq-store"),m=d.length;d.forEach(function(a){n.index("_doc_id_rev").getKey(c+"::"+a).onsuccess=function(g){g=g.target.result;
"number"!==typeof g?(m--,m||f()):(n.delete(g),e.index("seq").openCursor(IDBKeyRange.only(g)).onsuccess=function(l){if(l=l.target.result){var r=l.value.digestSeq.split("::")[0];k.push(r);e.delete(l.primaryKey);l.continue()}else m--,m||f()})}})}function st(d,c,h){try{return{txn:d.transaction(c,h)}}catch(f){return{error:f}}}function Jca(d,c,h,f,k,n){function b(){var zb=st(k,"document-store by-sequence attach-store local-store attach-seq-store meta-store".split(" "),"readwrite");if(zb.error)return n(zb.error);
M=zb.txn;M.onabort=Xu(n);M.ontimeout=Xu(n);M.oncomplete=l;N=M.objectStore("document-store");W=M.objectStore("by-sequence");X=M.objectStore("attach-store");ea=M.objectStore("attach-seq-store");Aa=M.objectStore("meta-store");Aa.get("meta-store").onsuccess=function(va){K=va.target.result;a()};v(function(va){if(va)return gb=!0,n(va);g()})}function e(){U=!0;a()}function m(){Ica(d.revs_limit,I,f,oa,M,fa,y,h,e)}function a(){K&&U&&(K.docCount+=pa,Aa.put(K))}function g(){function zb(Kb){(Kb=gA(Kb.target.result))&&
oa.set(Kb.id,Kb);++va===I.length&&m()}if(I.length)for(var va=0,ma=0,ta=I.length;ma<ta;ma++){var Na=I[ma];Na._id&&dA(Na._id)?++va===I.length&&m():N.get(Na.metadata.id).onsuccess=zb}}function l(){gb||(FF.notify(f._meta.name),n(null,fa))}function r(zb,va){X.get(zb).onsuccess=function(ma){ma.target.result?va():(ma=Si(Kca,"unknown stub attachment with digest "+zb),ma.status=412,va(ma))}}function v(zb){var va=[];I.forEach(function(Na){Na.data&&Na.data._attachments&&Object.keys(Na.data._attachments).forEach(function(Kb){Kb=
Na.data._attachments[Kb];Kb.stub&&va.push(Kb.digest)})});if(!va.length)return zb();var ma=0,ta;va.forEach(function(Na){r(Na,function(Kb){Kb&&!ta&&(ta=Kb);++ma===va.length&&zb(ta)})})}function y(zb,va,ma,ta,Na,Kb,kc,Vb){zb.metadata.winningRev=va;zb.metadata.deleted=ma;var jc=zb.data;jc._id=zb.metadata.id;jc._rev=zb.metadata.rev;ta&&(jc._deleted=!0);if(jc._attachments&&Object.keys(jc._attachments).length)return E(zb,va,ma,Na,kc,Vb);pa+=Kb;a();A(zb,va,ma,Na,kc,Vb)}function A(zb,va,ma,ta,Na,Kb){function kc(xd){var Td=
zb.stemmedRevs||[];ta&&f.auto_compaction&&(Td=Td.concat(dca(zb.metadata)));Td&&Td.length&&k_(Td,zb.metadata.id,M);Qc.seq=xd.target.result;xd=jQ(Qc,va,ma);N.put(xd).onsuccess=Vb}function Vb(){fa[Na]={ok:!0,id:Qc.id,rev:Qc.rev};oa.set(zb.metadata.id,zb.metadata);F(zb,Qc.seq,Kb)}var jc=zb.data,Qc=zb.metadata;jc._doc_id_rev=Qc.id+"::"+Qc.rev;delete jc._id;delete jc._rev;var Pb=W.put(jc);Pb.onsuccess=kc;Pb.onerror=function(xd){xd.preventDefault();xd.stopPropagation();W.index("_doc_id_rev").getKey(jc._doc_id_rev).onsuccess=
function(Td){W.put(jc,Td.target.result).onsuccess=kc}}}function E(zb,va,ma,ta,Na,Kb){function kc(){jc===Qc.length&&A(zb,va,ma,ta,Na,Kb)}function Vb(){jc++;kc()}var jc=0,Qc=Object.keys(zb.data._attachments);Qc.forEach(function(Pb){Pb=zb.data._attachments[Pb];if(Pb.stub)jc++,kc();else{var xd=Pb.data;delete Pb.data;Pb.revpos=parseInt(va,10);H(Pb.digest,xd,Vb)}})}function F(zb,va,ma){function ta(){++Kb===kc.length&&ma()}function Na(jc){jc=ea.put({seq:va,digestSeq:zb.data._attachments[jc].digest+"::"+
va});jc.onsuccess=ta;jc.onerror=function(Qc){Qc.preventDefault();Qc.stopPropagation();ta()}}var Kb=0,kc=Object.keys(zb.data._attachments||{});if(!kc.length)return ma();for(var Vb=0;Vb<kc.length;Vb++)Na(kc[Vb])}function H(zb,va,ma){X.count(zb).onsuccess=function(ta){if(ta.target.result)return ma();X.put({digest:zb,body:va}).onsuccess=ma}}var I=c.docs,M,N,W,X,ea,Aa,Ma,K;c=0;for(var aa=I.length;c<aa;c++){var T=I[c];T._id&&dA(T._id)||(T=I[c]=e_(T,h.new_edits,d),T.error&&!Ma&&(Ma=T))}if(Ma)return n(Ma);
var U=!1,pa=0,fa=Array(I.length),oa=new er,gb=!1;Hca(I,f._meta.blobSupport?"blob":"base64",function(zb){if(zb)return n(zb);b()})}function l_(d,c,h,f,k){function n(r){g=r.target.result;a&&k(a,g,l)}function b(r){a=r.target.result;g&&k(a,g,l)}function e(){if(!a.length)return k();var r=a[a.length-1];if(c&&c.upper)try{var v=IDBKeyRange.bound(r,c.upper,!0,c.upperOpen)}catch(y){if("DataError"===y.name&&0===y.code)return k()}else v=IDBKeyRange.lowerBound(r,!0);c=v;g=a=null;d.getAll(c,f).onsuccess=n;d.getAllKeys(c,
f).onsuccess=b}function m(r){r=r.target.result;if(!r)return k();k([r.key],[r.value],r)}-1===f&&(f=1E3);var a,g;if("function"===typeof d.getAll&&"function"===typeof d.getAllKeys&&1<f&&!h){var l={"continue":e};d.getAll(c,f).onsuccess=n;d.getAllKeys(c,f).onsuccess=b}else h?d.openCursor(c,"prev").onsuccess=m:d.openCursor(c).onsuccess=m}function Lca(d,c,h){if("function"===typeof d.getAll)d.getAll(c).onsuccess=h;else{var f=[];d.openCursor(c).onsuccess=function(k){(k=k.target.result)?(f.push(k.value),k.continue()):
h({target:{result:f}})}}}function Mca(d,c,h){var f=Array(d.length),k=0;d.forEach(function(n,b){c.get(n).onsuccess=function(e){f[b]=e.target.result?e.target.result:{key:n,error:"not_found"};k++;k===d.length&&h(d,f,{})}})}function Nca(d,c,h,f,k){try{if(d&&c)return k?IDBKeyRange.bound(c,d,!h,!1):IDBKeyRange.bound(d,c,!1,!h);if(d)return k?IDBKeyRange.upperBound(d):IDBKeyRange.lowerBound(d);if(c)return k?IDBKeyRange.lowerBound(c,!h):IDBKeyRange.upperBound(c,!h);if(f)return IDBKeyRange.only(f)}catch(n){return{error:n}}return null}
function Oca(d,c,h){function f(X,ea){X.openCursor(null,"prev").onsuccess=function(Aa){Aa=Aa.target.result;var Ma=void 0;Aa&&Aa.key&&(Ma=Aa.key);return ea({target:{result:[Ma]}})}}function k(X,ea,Aa){I.get(X.id+"::"+Aa).onsuccess=function(Ma){ea.doc=SJ(Ma.target.result)||{};d.conflicts&&(Ma=eQ(X),Ma.length&&(ea.doc._conflicts=Ma));j_(ea.doc,d,H)}}function n(X){for(var ea=0,Aa=X.length;ea<Aa&&M.length!==y;ea++){var Ma=X[ea];if(Ma.error&&r)M.push(Ma);else{var K=gA(Ma);Ma=K.winningRev;var aa={id:K.id,
key:K.id,value:{rev:Ma}};K.deleted?r&&(M.push(aa),aa.value.deleted=!0,aa.doc=null):0>=v--&&(M.push(aa),d.include_docs&&k(K,aa,Ma))}}}function b(X,ea,Aa){Aa&&(n(ea),M.length<y&&Aa.continue())}function e(X){X=X.target.result;d.descending&&(X=X.reverse());n(X)}function m(){var X={total_rows:N,offset:d.skip,rows:M};d.update_seq&&void 0!==W&&(X.update_seq=W);h(null,X)}var a="startkey"in d?d.startkey:!1,g="endkey"in d?d.endkey:!1,l="key"in d?d.key:!1,r="keys"in d?d.keys:!1,v=d.skip||0,y="number"===typeof d.limit?
d.limit:-1,A=!1!==d.inclusive_end,E,F;if(!r&&(F=(E=Nca(a,g,A,l,d.descending))&&E.error)&&("DataError"!==F.name||0!==F.code))return h(Si(iQ,F.name,F.message));a=["document-store","by-sequence","meta-store"];d.attachments&&a.push("attach-store");c=st(c,a,"readonly");if(c.error)return h(c.error);var H=c.txn;H.oncomplete=function(){d.attachments?kQ(M,d.binary).then(m):m()};H.onabort=Xu(h);c=H.objectStore("document-store");a=H.objectStore("by-sequence");g=H.objectStore("meta-store");var I=a.index("_doc_id_rev"),
M=[],N,W;g.get("meta-store").onsuccess=function(X){N=X.target.result.docCount};d.update_seq&&f(a,function(X){X.target.result&&0<X.target.result.length&&(W=X.target.result[0])});if(!F&&0!==y){if(r)return Mca(d.keys,c,b);if(-1===y)return Lca(c,E,e);l_(c,E,d.descending,y+v,b)}}function Pca(d){return(new Promise(function(c){var h=ZP([""]);h=d.objectStore("detect-blob-support").put(h,"key");h.onsuccess=function(){var f=navigator.userAgent.match(/Chrome\/(\d+)/),k=navigator.userAgent.match(/Edge\//);c(k||
!f||43<=parseInt(f[1],10))};h.onerror=d.onabort=function(f){f.preventDefault();f.stopPropagation();c(!1)}})).catch(function(){return!1})}function Qca(d,c){d.objectStore("document-store").index("deletedOrLocal").count(IDBKeyRange.only("0")).onsuccess=function(h){c(h.target.result)}}function Rca(d,c,h,f){try{d(c,h)}catch(k){f.emit("error",k)}}function m_(){!lQ&&mQ.length&&(lQ=!0,mQ.shift()())}function Sca(d,c,h){mQ.push(function(){d(function(f,k){Rca(c,f,k,h);lQ=!1;Wu(function(){m_()})})});m_()}function Tca(d,
c,h,f){function k(H,I,M,N){if(M.seq!==I)return N();if(M.winningRev===H._rev)return N(M,H);F.get(H._id+"::"+M.winningRev).onsuccess=function(W){N(M,SJ(W.target.result))}}function n(H,I,M){if(m&&!m.has(H._id))return M();var N=y.get(H._id);if(N)return k(H,I,N,M);E.get(H._id).onsuccess=function(W){N=gA(W.target.result);y.set(H._id,N);k(H,I,N,M)}}function b(){d.complete(null,{results:l,last_seq:a})}d=tn(d);if(d.continuous){var e=h+":"+RJ();FF.addListener(h,e,c,d);FF.notify(h);return{cancel:function(){FF.removeListener(h,
e)}}}var m=d.doc_ids&&new GF(d.doc_ids);d.since=d.since||0;var a=d.since,g="limit"in d?d.limit:-1;0===g&&(g=1);var l=[],r=0,v=WP(d),y=new er;c=["document-store","by-sequence"];d.attachments&&c.push("attach-store");f=st(f,c,"readonly");if(f.error)return d.complete(f.error);var A=f.txn;A.onabort=Xu(d.complete);A.oncomplete=function(){!d.continuous&&d.attachments?kQ(l).then(b):b()};f=A.objectStore("by-sequence");var E=A.objectStore("document-store");var F=f.index("_doc_id_rev");c=d.since&&!d.descending?
IDBKeyRange.lowerBound(d.since,!0):null;l_(f,c,d.descending,g,function(H,I,M){function N(Ma,K){var aa=d.processChange(K,Ma,d);a=aa.seq=Ma.seq;Ma=v(aa);if("object"===typeof Ma)return Promise.reject(Ma);if(!Ma)return Promise.resolve();r++;d.return_docs&&l.push(aa);return d.attachments&&d.include_docs?new Promise(function(T){j_(K,d,A,function(){kQ([aa],d.binary).then(function(){T(aa)})})}):Promise.resolve(aa)}function W(){for(var Ma=[],K=0,aa=X.length;K<aa&&r!==g;K++){var T=X[K];T&&Ma.push(N(ea[K],T))}Promise.all(Ma).then(function(U){for(var pa=
0,fa=U.length;pa<fa;pa++)if(U[pa])d.onChange(U[pa])}).catch(d.complete);r!==g&&M.continue()}if(M&&H.length){var X=Array(H.length),ea=Array(H.length),Aa=0;I.forEach(function(Ma,K){Ma=SJ(Ma);n(Ma,H[K],function(aa,T){ea[K]=aa;X[K]=T;++Aa===H.length&&W()})})}})}function n_(d,c){var h=this;Sca(function(f){Uca(h,d,f)},c,h.constructor)}function Uca(d,c,h){function f(r){var v=r.createObjectStore("document-store",{keyPath:"id"});r.createObjectStore("by-sequence",{autoIncrement:!0}).createIndex("_doc_id_rev",
"_doc_id_rev",{unique:!0});r.createObjectStore("attach-store",{keyPath:"digest"});r.createObjectStore("meta-store",{keyPath:"id",autoIncrement:!1});r.createObjectStore("detect-blob-support");v.createIndex("deletedOrLocal","deletedOrLocal",{unique:!1});r.createObjectStore("local-store",{keyPath:"_id"});r=r.createObjectStore("attach-seq-store",{autoIncrement:!0});r.createIndex("seq","seq");r.createIndex("digestSeq","digestSeq",{unique:!0})}function k(r,v){var y=r.objectStore("document-store");y.createIndex("deletedOrLocal",
"deletedOrLocal",{unique:!1});y.openCursor().onsuccess=function(A){if(A=A.target.result){var E=A.value,F=uw(E);E.deletedOrLocal=F?"1":"0";y.put(E);A.continue()}else v()}}function n(r,v){var y=r.objectStore("local-store"),A=r.objectStore("document-store"),E=r.objectStore("by-sequence");A.openCursor().onsuccess=function(F){var H=F.target.result;if(H){var I=H.value;F=I.id;var M=dA(F);I=bA(I);if(M){var N=F+"::"+I;M=F+"::";I=F+"::~";F=E.index("_doc_id_rev");M=IDBKeyRange.bound(M,I,!1,!1);var W=F.openCursor(M);
W.onsuccess=function(X){(W=X.target.result)?(X=W.value,X._doc_id_rev===N&&y.put(X),E.delete(W.primaryKey),W.continue()):(A.delete(H.primaryKey),H.continue())}}else H.continue()}else v&&v()}}function b(r){r=r.createObjectStore("attach-seq-store",{autoIncrement:!0});r.createIndex("seq","seq");r.createIndex("digestSeq","digestSeq",{unique:!0})}function e(r,v){var y=r.objectStore("by-sequence"),A=r.objectStore("attach-store"),E=r.objectStore("attach-seq-store");A.count().onsuccess=function(F){if(!F.target.result)return v();
y.openCursor().onsuccess=function(H){H=H.target.result;if(!H)return v();for(var I=H.value,M=H.primaryKey,N=Object.keys(I._attachments||{}),W={},X=0;X<N.length;X++)W[I._attachments[N[X]].digest]=!0;I=Object.keys(W);for(X=0;X<I.length;X++)E.put({seq:M,digestSeq:I[X]+"::"+M});H.continue()}}}function m(r){function v(E){return E.data?gA(E):(E.deleted="1"===E.deletedOrLocal,E)}var y=r.objectStore("by-sequence"),A=r.objectStore("document-store");A.openCursor().onsuccess=function(E){function F(){var M=jQ(I,
I.winningRev,I.deleted);A.put(M).onsuccess=function(){H.continue()}}var H=E.target.result;if(H){var I=v(H.value);I.winningRev=I.winningRev||bA(I);if(I.seq)return F();(function(){var M=I.id+"::",N=I.id+"::\uffff",W=0;y.index("_doc_id_rev").openCursor(IDBKeyRange.bound(M,N)).onsuccess=function(X){X=X.target.result;if(!X)return I.seq=W,F();var ea=X.primaryKey;ea>W&&(W=ea);X.continue()}})()}}}var a=c.name,g=null;d._meta=null;d._remote=!1;d.type=function(){return"idb"};d._id=CZ(function(r){r(null,d._meta.instanceId)});
d._bulkDocs=function(r,v,y){Jca(c,r,v,d,g,y)};d._get=function(r,v,y){function A(){y(H,{doc:E,metadata:F,ctx:I})}var E,F,H,I=v.ctx;if(!I){var M=st(g,["document-store","by-sequence","attach-store"],"readonly");if(M.error)return y(M.error);I=M.txn}I.objectStore("document-store").get(r).onsuccess=function(N){F=gA(N.target.result);if(!F)return H=Si(rt,"missing"),A();if(v.rev)var W=v.latest?ica(v.rev,F):v.rev;else if(W=F.winningRev,uw(F))return H=Si(rt,"deleted"),A();N=I.objectStore("by-sequence");W=F.id+
"::"+W;N.index("_doc_id_rev").get(W).onsuccess=function(X){(E=X.target.result)&&(E=SJ(E));if(!E)return H=Si(rt,"missing"),A();A()}}};d._getAttachment=function(r,v,y,A,E){if(A.ctx)r=A.ctx;else{r=st(g,["document-store","by-sequence","attach-store"],"readonly");if(r.error)return E(r.error);r=r.txn}v=y.digest;var F=y.content_type;r.objectStore("attach-store").get(v).onsuccess=function(H){i_(H.target.result.body,F,A.binary,function(I){E(null,I)})}};d._info=function(r){var v,y,A=st(g,["meta-store","by-sequence"],
"readonly");if(A.error)return r(A.error);A=A.txn;A.objectStore("meta-store").get("meta-store").onsuccess=function(E){y=E.target.result.docCount};A.objectStore("by-sequence").openCursor(null,"prev").onsuccess=function(E){v=(E=E.target.result)?E.key:0};A.oncomplete=function(){r(null,{doc_count:y,update_seq:v,idb_attachment_format:d._meta.blobSupport?"binary":"base64"})}};d._allDocs=function(r,v){Oca(r,g,v)};d._changes=function(r){return Tca(r,d,a,g)};d._close=function(r){g.close();WC.delete(a);r()};
d._getRevisionTree=function(r,v){var y=st(g,["document-store"],"readonly");if(y.error)return v(y.error);y.txn.objectStore("document-store").get(r).onsuccess=function(A){(A=gA(A.target.result))?v(null,A.rev_tree):v(Si(rt))}};d._doCompaction=function(r,v,y){var A=st(g,["document-store","by-sequence","attach-store","attach-seq-store"],"readwrite");if(A.error)return y(A.error);var E=A.txn;E.objectStore("document-store").get(r).onsuccess=function(F){F=gA(F.target.result);cA(F.rev_tree,function(M,N,W,X,
ea){-1!==v.indexOf(N+"-"+W)&&(ea.status="missing")});k_(v,r,E);var H=F.winningRev,I=F.deleted;E.objectStore("document-store").put(jQ(F,H,I))};E.onabort=Xu(y);E.oncomplete=function(){y()}};d._getLocal=function(r,v){var y=st(g,["local-store"],"readonly");if(y.error)return v(y.error);r=y.txn.objectStore("local-store").get(r);r.onerror=Xu(v);r.onsuccess=function(A){(A=A.target.result)?(delete A._doc_id_rev,v(null,A)):v(Si(rt))}};d._putLocal=function(r,v,y){"function"===typeof v&&(y=v,v={});delete r._revisions;
var A=r._rev,E=r._id;r._rev=A?"0-"+(parseInt(A.split("-")[1],10)+1):"0-1";var F=v.ctx,H;if(!F){F=st(g,["local-store"],"readwrite");if(F.error)return y(F.error);F=F.txn;F.onerror=Xu(y);F.oncomplete=function(){H&&y(null,H)}}var I=F.objectStore("local-store");A?(E=I.get(E),E.onsuccess=function(M){(M=M.target.result)&&M._rev===A?I.put(r).onsuccess=function(){H={ok:!0,id:r._id,rev:r._rev};v.ctx&&y(null,H)}:y(Si(UC))}):(E=I.add(r),E.onerror=function(M){y(Si(UC));M.preventDefault();M.stopPropagation()},
E.onsuccess=function(){H={ok:!0,id:r._id,rev:r._rev};v.ctx&&y(null,H)})};d._removeLocal=function(r,v,y){"function"===typeof v&&(y=v,v={});var A=v.ctx;if(!A){A=st(g,["local-store"],"readwrite");if(A.error)return y(A.error);A=A.txn;A.oncomplete=function(){E&&y(null,E)}}var E,F=r._id,H=A.objectStore("local-store");A=H.get(F);A.onerror=Xu(y);A.onsuccess=function(I){(I=I.target.result)&&I._rev===r._rev?(H.delete(F),E={ok:!0,id:F,rev:"0-0"},v.ctx&&y(null,E)):y(Si(rt))}};d._destroy=function(r,v){FF.removeAllListeners(a);
(r=nQ.get(a))&&r.result&&(r.result.close(),WC.delete(a));r=indexedDB.deleteDatabase(a);r.onsuccess=function(){nQ.delete(a);AF&&a in localStorage&&delete localStorage[a];v(null,{ok:!0})};r.onerror=Xu(v)};var l=WC.get(a);if(l)return g=l.idb,d._meta=l.global,Wu(function(){h(null,d)});l=indexedDB.open(a,5);nQ.set(a,l);l.onupgradeneeded=function(r){function v(){var H=E[F-1];F++;H&&H(A,v)}var y=r.target.result;if(1>r.oldVersion)return f(y);var A=r.currentTarget.transaction;3>r.oldVersion&&y.createObjectStore("local-store",
{keyPath:"_id"}).createIndex("_doc_id_rev","_doc_id_rev",{unique:!0});4>r.oldVersion&&b(y);var E=[k,n,e,m],F=r.oldVersion;v()};l.onsuccess=function(r){function v(){"undefined"!==typeof I&&E&&(d._meta={name:a,instanceId:M,blobSupport:I},WC.set(a,{idb:g,global:d._meta}),h(null,d))}function y(){if("undefined"!==typeof H&&"undefined"!==typeof F){var N=a+"_id";N in F?M=F[N]:F[N]=M=RJ();F.docCount=H;A.objectStore("meta-store").put(F)}}g=r.target.result;g.onversionchange=function(){g.close();WC.delete(a)};
g.onabort=function(N){$r("error","Database has a global failure",N.target.error);g.close();WC.delete(a)};var A=g.transaction(["meta-store","detect-blob-support","document-store"],"readwrite"),E=!1,F,H,I,M;A.objectStore("meta-store").get("meta-store").onsuccess=function(N){F=N.target.result||{id:"meta-store"};y()};Qca(A,function(N){H=N;y()});oQ||(oQ=Pca(A));oQ.then(function(N){I=N;v()});A.oncomplete=function(){E=!0;v()};A.onabort=Xu(h)};l.onerror=function(r){(r=r.target.error&&r.target.error.message)?
-1!==r.indexOf("stored database is a higher version")&&(r=Error('This DB was created with the newer "indexeddb" adapter, but you are trying to open it with the older "idb" adapter')):r="Failed to open indexedDB, are you in private browsing mode?";$r("error",r);h(Si(iQ,r))}}function Vca(d,c){return new Promise(function(h,f){function k(){m++;d[a++]().then(b,e)}function n(){if(++g===l)r?f(r):h();else for(;m<c&&a<l;)k()}function b(){m--;n()}function e(v){m--;r=r||v;n()}for(var m=0,a=0,g=0,l=d.length,
r;m<c&&a<l;)k()})}function pQ(d){var c=(d=d.doc||d.ok)&&d._attachments;c&&Object.keys(c).forEach(function(h){h=c[h];h.data=aQ(h.data,h.content_type)})}function hA(d){return/^_design/.test(d)?"_design/"+encodeURIComponent(d.slice(8)):/^_local/.test(d)?"_local/"+encodeURIComponent(d.slice(7)):encodeURIComponent(d)}function o_(d){return d._attachments&&Object.keys(d._attachments)?Promise.all(Object.keys(d._attachments).map(function(c){var h=d._attachments[c];if(h.data&&"string"!==typeof h.data)return(new Promise(function(f){bQ(h.data,
f)})).then(function(f){h.data=f})})):Promise.resolve()}function Wca(d,c){if(c.prefix){var h=JZ(c.prefix).protocol;h="http"===h||"https"===h}else h=!1;h&&(d=c.name.substr(c.prefix.length),d=c.prefix.replace(/\/?$/,"/")+encodeURIComponent(d));c=JZ(d);if(c.user||c.password)c.auth={username:c.user,password:c.password};d=c.path.replace(/(^\/|\/$)/g,"").split("/");c.db=d.pop();-1===c.db.indexOf("%")&&(c.db=encodeURIComponent(c.db));c.path=d.join("/");return c}function un(d,c){return TJ(d,d.db+"/"+c)}function TJ(d,
c){return d.protocol+"://"+d.host+(d.port?":"+d.port:"")+"/"+d.path+(d.path?"/":"")+c}function UJ(d){return"?"+Object.keys(d).map(function(c){return c+"="+encodeURIComponent(d[c])}).join("&")}function Xca(d){var c="undefined"!==typeof navigator&&navigator.userAgent?navigator.userAgent.toLowerCase():"",h=-1!==c.indexOf("msie"),f=-1!==c.indexOf("trident");c=-1!==c.indexOf("edge");d=!("method"in d)||"GET"===d.method;return(h||f||c)&&d}function qQ(d,c){function h(l,r){return Wm(l,QC(function(v){k().then(function(){return r.apply(this,
v)}).catch(function(y){v.pop()(y)})})).bind(b)}function f(l,r,v){var y={};r=r||{};r.headers=r.headers||new XC;r.headers.get("Content-Type")||r.headers.set("Content-Type","application/json");r.headers.get("Accept")||r.headers.set("Accept","application/json");return a(l,r).then(function(A){y.ok=A.ok;y.status=A.status;return A.json()}).then(function(A){y.data=A;if(!y.ok){y.data.status=y.status;A=SC(y.data);if(v)return v(A);throw A;}Array.isArray(y.data)&&(y.data=y.data.map(function(E){return E.error||
E.missing?SC(E):E}));if(v)v(null,y.data);else return y})}function k(){if(d.skip_setup)return Promise.resolve();if(g)return g;g=f(m).catch(function(l){return l&&l.status&&404===l.status?(VP(404,"PouchDB is just detecting if the remote exists."),f(m,{method:"PUT"})):Promise.reject(l)}).catch(function(l){return l&&l.status&&412===l.status?!0:Promise.reject(l)});g.catch(function(){g=null});return g}function n(l){return l.split("/").map(encodeURIComponent).join("/")}var b=this,e=Wca(d.name,d),m=un(e,"");
d=tn(d);var a=function(l,r){r=r||{};r.headers=r.headers||new XC;r.credentials="include";if(d.auth||e.auth){var v=d.auth||e.auth;v=btoa(unescape(encodeURIComponent(v.username+":"+v.password)));r.headers.set("Authorization","Basic "+v)}var y=d.headers||{};Object.keys(y).forEach(function(A){r.headers.append(A,y[A])});Xca(r)&&(l+=(-1===l.indexOf("?")?"?":"&")+"_nonce="+Date.now());return(d.fetch||p_)(l,r)},g;Wu(function(){c(null,b)});b._remote=!0;b.type=function(){return"http"};b.id=h("id",function(l){a(TJ(e,
"")).then(function(r){return r.json()}).catch(function(){return{}}).then(function(r){r=r&&r.uuid?r.uuid+e.db:un(e,"");l(null,r)})});b.compact=h("compact",function(l,r){"function"===typeof l&&(r=l,l={});l=tn(l);f(un(e,"_compact"),{method:"POST"}).then(function(){function v(){b.info(function(y,A){A&&!A.compact_running?r(null,{ok:!0}):setTimeout(v,l.interval||200)})}v()})});b.bulkGet=Wm("bulkGet",function(l,r){function v(H){var I={};l.revs&&(I.revs=!0);l.attachments&&(I.attachments=!0);l.latest&&(I.latest=
!0);f(un(e,"_bulk_get"+UJ(I)),{method:"POST",body:JSON.stringify({docs:l.docs})}).then(function(M){l.attachments&&l.binary&&M.data.results.forEach(function(N){N.docs.forEach(pQ)});H(null,M.data)}).catch(H)}function y(){function H(ea){return function(Aa,Ma){N[ea]=Ma.results;++M===I&&r(null,{results:OJ(N)})}}for(var I=Math.ceil(l.docs.length/50),M=0,N=Array(I),W=0;W<I;W++){var X=zF(l,["revs","attachments","binary","latest"]);X.docs=l.docs.slice(50*W,Math.min(l.docs.length,50*(W+1)));EZ(A,X,H(W))}}var A=
this,E=TJ(e,""),F=rQ[E];"boolean"!==typeof F?v(function(H,I){H?(rQ[E]=!1,VP(H.status,"PouchDB is just detecting if the remote supports the _bulk_get API."),y()):(rQ[E]=!0,r(null,I))}):F?v(r):y()});b._info=function(l){k().then(function(){return a(un(e,""))}).then(function(r){return r.json()}).then(function(r){r.host=un(e,"");l(null,r)}).catch(l)};b.fetch=function(l,r){return k().then(function(){var v="/"===l.substring(0,1)?TJ(e,l.substring(1)):un(e,l);return a(v,r)})};b.get=h("get",function(l,r,v){function y(F){function H(N){var W=
I[N];N=hA(F._id)+"/"+n(N)+"?rev="+F._rev;return a(un(e,N)).then(function(X){return"buffer"in X?X.buffer():X.blob()}).then(function(X){if(r.binary){var ea=Object.getOwnPropertyDescriptor(X.__proto__,"type");if(!ea||ea.set)X.type=W.content_type;return X}return new Promise(function(Aa){bQ(X,Aa)})}).then(function(X){delete W.stub;delete W.length;W.data=X})}var I=F._attachments,M=I&&Object.keys(I);if(I&&M.length)return M=M.map(function(N){return function(){return H(N)}}),Vca(M,5)}function A(F){return Array.isArray(F)?
Promise.all(F.map(function(H){if(H.ok)return y(H.ok)})):y(F)}"function"===typeof r&&(v=r,r={});r=tn(r);var E={};r.revs&&(E.revs=!0);r.revs_info&&(E.revs_info=!0);r.latest&&(E.latest=!0);r.open_revs&&("all"!==r.open_revs&&(r.open_revs=JSON.stringify(r.open_revs)),E.open_revs=r.open_revs);r.rev&&(E.rev=r.rev);r.conflicts&&(E.conflicts=r.conflicts);r.update_seq&&(E.update_seq=r.update_seq);l=hA(l);E=un(e,l+UJ(E));f(E).then(function(F){return Promise.resolve().then(function(){if(r.attachments)return A(F.data)}).then(function(){v(null,
F.data)})}).catch(function(F){F.docId=l;v(F)})});b.remove=h("remove",function(l,r,v,y){"string"===typeof r?(l={_id:l,_rev:r},"function"===typeof v&&(y=v,v={})):"function"===typeof r?(y=r,v={}):(y=v,v=r);r=l._rev||v.rev;r=un(e,hA(l._id))+"?rev="+r;f(r,{method:"DELETE"},y).catch(y)});b.getAttachment=h("getAttachment",function(l,r,v,y){"function"===typeof v&&(y=v,v={});v=v.rev?"?rev="+v.rev:"";l=un(e,hA(l))+"/"+n(r)+v;var A;a(l,{method:"GET"}).then(function(E){A=E.headers.get("content-type");if(E.ok)return"undefined"===
typeof VJ||VJ.browser||"function"!==typeof E.buffer?E.blob():E.buffer();throw E;}).then(function(E){"undefined"===typeof VJ||VJ.browser||(E.type=A);y(null,E)}).catch(function(E){y(E)})});b.removeAttachment=h("removeAttachment",function(l,r,v,y){l=un(e,hA(l)+"/"+n(r))+"?rev="+v;f(l,{method:"DELETE"},y).catch(y)});b.putAttachment=h("putAttachment",function(l,r,v,y,A,E){"function"===typeof A&&(E=A,A=y,y=v,v=null);l=hA(l)+"/"+n(r);l=un(e,l);v&&(l+="?rev="+v);if("string"===typeof y){try{var F=atob(y)}catch(H){return E(Si(g_,
"Attachment is not a valid base64 string"))}y=F?$P(F,A):""}f(l,{headers:new XC({"Content-Type":A}),method:"PUT",body:y},E).catch(E)});b._bulkDocs=function(l,r,v){l.new_edits=r.new_edits;k().then(function(){return Promise.all(l.docs.map(o_))}).then(function(){return f(un(e,"_bulk_docs"),{method:"POST",body:JSON.stringify(l)},v)}).catch(v)};b._put=function(l,r,v){k().then(function(){return o_(l)}).then(function(){return f(un(e,hA(l._id)),{method:"PUT",body:JSON.stringify(l)})}).then(function(y){v(null,
y.data)}).catch(function(y){y.docId=l&&l._id;v(y)})};b.allDocs=h("allDocs",function(l,r){"function"===typeof l&&(r=l,l={});l=tn(l);var v={},y="GET";l.conflicts&&(v.conflicts=!0);l.update_seq&&(v.update_seq=!0);l.descending&&(v.descending=!0);l.include_docs&&(v.include_docs=!0);l.attachments&&(v.attachments=!0);l.key&&(v.key=JSON.stringify(l.key));l.start_key&&(l.startkey=l.start_key);l.startkey&&(v.startkey=JSON.stringify(l.startkey));l.end_key&&(l.endkey=l.end_key);l.endkey&&(v.endkey=JSON.stringify(l.endkey));
"undefined"!==typeof l.inclusive_end&&(v.inclusive_end=!!l.inclusive_end);"undefined"!==typeof l.limit&&(v.limit=l.limit);"undefined"!==typeof l.skip&&(v.skip=l.skip);v=UJ(v);if("undefined"!==typeof l.keys){y="POST";var A={keys:l.keys}}f(un(e,"_all_docs"+v),{method:y,body:JSON.stringify(A)}).then(function(E){l.include_docs&&l.attachments&&l.binary&&E.data.rows.forEach(pQ);r(null,E.data)}).catch(r)});b._changes=function(l){var r="batch_size"in l?l.batch_size:25;l=tn(l);!l.continuous||"heartbeat"in
l||(l.heartbeat=1E4);var v="timeout"in l?l.timeout:3E4;"timeout"in l&&l.timeout&&5E3>v-l.timeout&&(v=l.timeout+5E3);"heartbeat"in l&&l.heartbeat&&5E3>v-l.heartbeat&&(v=l.heartbeat+5E3);var y={};"timeout"in l&&l.timeout&&(y.timeout=l.timeout);var A="undefined"!==typeof l.limit?l.limit:!1,E=A;l.style&&(y.style=l.style);if(l.include_docs||l.filter&&"function"===typeof l.filter)y.include_docs=!0;l.attachments&&(y.attachments=!0);l.continuous&&(y.feed="longpoll");l.seq_interval&&(y.seq_interval=l.seq_interval);
l.conflicts&&(y.conflicts=!0);l.descending&&(y.descending=!0);l.update_seq&&(y.update_seq=!0);"heartbeat"in l&&l.heartbeat&&(y.heartbeat=l.heartbeat);l.filter&&"string"===typeof l.filter&&(y.filter=l.filter);l.view&&"string"===typeof l.view&&(y.filter="_view",y.view=l.view);if(l.query_params&&"object"===typeof l.query_params)for(var F in l.query_params)l.query_params.hasOwnProperty(F)&&(y[F]=l.query_params[F]);var H="GET";if(l.doc_ids){y.filter="_doc_ids";H="POST";var I={doc_ids:l.doc_ids}}else l.selector&&
(y.filter="_selector",H="POST",I={selector:l.selector});var M=new Yca,N,W=function(Aa,Ma){if(!l.aborted){y.since=Aa;"object"===typeof y.since&&(y.since=JSON.stringify(y.since));l.descending?A&&(y.limit=E):y.limit=!A||E>r?r:E;var K=un(e,"_changes"+UJ(y)),aa={signal:M.signal,method:H,body:JSON.stringify(I)};N=Aa;l.aborted||k().then(function(){return f(K,aa,Ma)}).catch(Ma)}},X={results:[]},ea=function(Aa,Ma){if(!l.aborted){var K=0;if(Ma&&Ma.results){K=Ma.results.length;X.last_seq=Ma.last_seq;var aa=
null,T=null;"number"===typeof Ma.pending&&(aa=Ma.pending);if("string"===typeof X.last_seq||"number"===typeof X.last_seq)T=X.last_seq;Ma.results=Ma.results.filter(function(U){E--;var pa=WP(l)(U);pa&&(l.include_docs&&l.attachments&&l.binary&&pQ(U),l.return_docs&&X.results.push(U),l.onChange(U,aa,T));return pa})}else if(Aa){l.aborted=!0;l.complete(Aa);return}Ma&&Ma.last_seq&&(N=Ma.last_seq);Aa=A&&0>=E||Ma&&K<r||l.descending;(!l.continuous||A&&0>=E)&&Aa?l.complete(null,X):Wu(function(){W(N,ea)})}};W(l.since||
0,ea);return{cancel:function(){l.aborted=!0;M.abort()}}};b.revsDiff=h("revsDiff",function(l,r,v){"function"===typeof r&&(v=r);f(un(e,"_revs_diff"),{method:"POST",body:JSON.stringify(l)},v).catch(v)});b._close=function(l){l()};b._destroy=function(l,r){f(un(e,""),{method:"DELETE"}).then(function(v){r(null,v)}).catch(function(v){404===v.status?r(null,{ok:!0}):r(v)})}}function iA(d){this.status=400;this.name="query_parse_error";this.message=d;this.error=!0;try{Error.captureStackTrace(this,iA)}catch(c){}}
function WJ(d){this.status=404;this.name="not_found";this.message=d;this.error=!0;try{Error.captureStackTrace(this,WJ)}catch(c){}}function XJ(d){this.status=500;this.name="invalid_value";this.message=d;this.error=!0;try{Error.captureStackTrace(this,XJ)}catch(c){}}function q_(d,c){c&&d.then(function(h){Wu(function(){c(null,h)})},function(h){Wu(function(){c(h)})});return d}function Zca(d){return QC(function(c){var h=c.pop();c=d.apply(this,c);"function"===typeof h&&q_(c,h);return c})}function $ca(d,
c){return d.then(function(h){return c().then(function(){return h})},function(h){return c().then(function(){throw h;})})}function sQ(d,c){return function(){var h=arguments,f=this;return d.add(function(){return c.apply(f,h)})}}function r_(d){d=new GF(d);var c=Array(d.size),h=-1;d.forEach(function(f){c[++h]=f});return c}function tQ(d){var c=Array(d.size),h=-1;d.forEach(function(f,k){c[++h]=k});return c}function s_(d){return new XJ("builtin "+d+" function requires map values to be numbers or number arrays")}
function uQ(d){for(var c=0,h=0,f=d.length;h<f;h++){var k=d[h];if("number"!==typeof k)if(Array.isArray(k)){c="number"===typeof c?[c]:c;for(var n=0,b=k.length;n<b;n++){var e=k[n];if("number"!==typeof e)throw s_("_sum");"undefined"===typeof c[n]?c.push(e):c[n]+=e}}else throw s_("_sum");else"number"===typeof c?c+=k:c[0]+=k}return c}function t_(d,c){return YP("return ("+d.replace(/;\s*$/,"")+");",{emit:c,sum:uQ,log:ada,isArray:bda,toJSON:cda})}function HF(){this.promise=new Promise(function(d){d()})}function u_(d){if(!d)return"undefined";
switch(typeof d){case "function":return d.toString();case "string":return d.toString();default:return JSON.stringify(d)}}function dda(d,c){return u_(d)+u_(c)+"undefined"}function v_(d,c,h,f,k,n){var b=dda(h,f);if(!k){var e=d._cachedViews=d._cachedViews||{};if(e[b])return e[b]}var m=d.info().then(function(a){var g=a.db_name+"-mrview-"+(k?"temp":QJ.hash(b));return PJ(d,"_local/"+n,function(l){l.views=l.views||{};var r=c;-1===r.indexOf("/")&&(r=c+"/"+c);r=l.views[r]=l.views[r]||{};if(!r[g])return r[g]=
!0,l}).then(function(){return d.registerDependentDatabase(g).then(function(l){l=l.db;l.auto_compaction=!0;var r={name:g,db:l,sourceDB:d,adapter:d.adapter,mapFun:h,reduceFun:f};return r.db.get("_local/lastSeq").catch(function(v){if(404!==v.status)throw v;}).then(function(v){r.seq=v?v.seq:0;if(e)r.db.once("destroyed",function(){delete e[b]});return r})})})});e&&(e[b]=m);return m}function vQ(d){return-1===d.indexOf("/")?[d,d]:d.split("/")}function eda(d){return 1===d.length&&/^1-/.test(d[0].rev)}function w_(d,
c){try{d.emit("error",c)}catch(h){$r("error","The user's map/reduce function threw an uncaught error.\nYou can debug this error by doing:\nmyDatabase.on('error', function (err) { debugger; });\nPlease double-check your map/reduce function."),$r("error",c)}}function x_(d,c){var h=Object.keys(c._attachments);return Promise.all(h.map(function(f){return d.getAttachment(c._id,f,{rev:c._rev})}))}function fda(d,c,h){var f=Vu(c)&&!Vu(d),k=Object.keys(h._attachments);return f?d.get(h._id).then(function(n){return Promise.all(k.map(function(b){return n._attachments&&
n._attachments[b]&&n._attachments[b].digest===h._attachments[b].digest?d.getAttachment(n._id,b):c.getAttachment(h._id,b)}))}).catch(function(n){if(404!==n.status)throw n;return x_(c,h)}):x_(c,h)}function gda(d){var c=[];Object.keys(d).forEach(function(h){d[h].missing.forEach(function(f){c.push({id:h,rev:f})})});return{docs:c,revs:!0,latest:!0}}function hda(d,c,h,f){function k(e){return d.allDocs({keys:e,include_docs:!0,conflicts:!0}).then(function(m){if(f.cancelled)throw Error("cancelled");m.rows.forEach(function(a){var g;
(g=a.deleted||!a.doc||!/^1-/.test(a.value.rev))||(g=a.doc,g=g._attachments&&0<Object.keys(g._attachments).length);g||(g=a.doc,g=g._conflicts&&0<g._conflicts.length);g||(a.doc._conflicts&&delete a.doc._conflicts,n.push(a.doc),delete h[a.id])})})}h=tn(h);var n=[],b=!0;return Promise.resolve().then(function(){var e=Object.keys(h).filter(function(m){m=h[m].missing;return 1===m.length&&/^1-/.test(m[0])});if(0<e.length)return k(e)}).then(function(){var e=gda(h);if(e.docs.length)return d.bulkGet(e).then(function(m){if(f.cancelled)throw Error("cancelled");
return Promise.all(m.results.map(function(a){return Promise.all(a.docs.map(function(g){var l=g.ok;g.error&&(b=!1);return l&&l._attachments?fda(c,d,l).then(function(r){var v=Object.keys(l._attachments);r.forEach(function(y,A){A=l._attachments[v[A]];delete A.stub;delete A.length;A.data=y});return l}):l}))})).then(function(a){n=n.concat(OJ(a).filter(Boolean))})})}).then(function(){return{ok:b,docs:n}})}function wQ(d,c,h,f,k){return d.get(c).catch(function(n){if(404===n.status)return"http"!==d.adapter&&
"https"!==d.adapter||VP(404,"PouchDB is just checking if a remote checkpoint exists."),{session_id:f,_id:c,history:[],replicator:"pouchdb",version:1};throw n;}).then(function(n){if(!k.cancelled&&n.last_seq!==h)return n.history=(n.history||[]).filter(function(b){return b.session_id!==f}),n.history.unshift({last_seq:h,session_id:f}),n.history=n.history.slice(0,5),n.version=1,n.replicator="pouchdb",n.session_id=f,n.last_seq=h,d.put(n).catch(function(b){if(409===b.status)return wQ(d,c,h,f,k);throw b;
})})}function IF(d,c,h,f,k){this.src=d;this.target=c;this.id=h;this.returnValue=f;this.opts=k||{}}function y_(d,c){var h=d[0],f=d.slice(1),k=c[0],n=c.slice(1);return h&&0!==c.length?xQ(h.session_id,c)?{last_seq:h.last_seq,history:d}:xQ(k.session_id,f)?{last_seq:k.last_seq,history:n}:y_(f,n):{last_seq:0,history:[]}}function xQ(d,c){var h=c[0],f=c.slice(1);return d&&0!==c.length?d===h.session_id?!0:xQ(d,f):!1}function z_(d){return"number"===typeof d.status&&4===Math.floor(d.status/100)}function ida(d,
c,h,f){if(!1===d.retry)c.emit("error",h),c.removeAllListeners();else{"function"!==typeof d.back_off_function&&(d.back_off_function=Sba);c.emit("requestError",h);if("active"===c.state||"pending"===c.state){c.emit("paused",h);c.state="stopped";var k=function(){d.current_back_off=0};c.once("paused",function(){c.removeListener("active",k)});c.once("active",k)}d.current_back_off=d.current_back_off||0;d.current_back_off=d.back_off_function(d.current_back_off);setTimeout(f,d.current_back_off)}}function jda(d){return Object.keys(d).sort(Xn).reduce(function(c,
h){c[h]=d[h];return c},{})}function kda(d,c,h){var f=h.doc_ids?h.doc_ids.sort(Xn):"",k=h.filter?h.filter.toString():"",n="",b="",e="";h.selector&&(e=JSON.stringify(h.selector));h.filter&&h.query_params&&(n=JSON.stringify(jda(h.query_params)));h.filter&&"_view"===h.filter&&(b=h.view.toString());return Promise.all([d.id(),c.id()]).then(function(m){var a=m[0]+m[1]+k+b+n+f+e;return new Promise(function(g){cQ(a,g)})}).then(function(m){m=m.replace(/\//g,".").replace(/\+/g,"_");return"_local/"+m})}function A_(d,
c,h,f,k){function n(){return gb?Promise.resolve():kda(d,c,h).then(function(ta){oa=ta;gb=new IF(d,c,oa,f,!1===h.checkpoint?{writeSourceCheckpoint:!1,writeTargetCheckpoint:!1}:"source"===h.checkpoint?{writeSourceCheckpoint:!0,writeTargetCheckpoint:!1}:"target"===h.checkpoint?{writeSourceCheckpoint:!1,writeTargetCheckpoint:!0}:{writeSourceCheckpoint:!0,writeTargetCheckpoint:!0})})}function b(){zb=[];if(0!==N.docs.length){var ta=N.docs;return c.bulkDocs({docs:ta,new_edits:!1},{timeout:h.timeout}).then(function(Na){if(f.cancelled)throw v(),
Error("cancelled");var Kb=Object.create(null);Na.forEach(function(kc){kc.error&&(Kb[kc.id]=kc)});Na=Object.keys(Kb).length;k.doc_write_failures+=Na;k.docs_written+=ta.length-Na;ta.forEach(function(kc){var Vb=Kb[kc._id];if(Vb)if(k.errors.push(Vb),kc=(Vb.name||"").toLowerCase(),"unauthorized"===kc||"forbidden"===kc)f.emit("denied",tn(Vb));else throw Vb;else zb.push(kc)})},function(Na){k.doc_write_failures+=ta.length;throw Na;})}}function e(){if(N.error)throw Error("There was a problem getting docs.");
k.last_seq=Ma=N.seq;var ta=tn(k);zb.length&&(ta.docs=zb,"number"===typeof N.pending&&(ta.pending=N.pending,delete N.pending),f.emit("change",ta));X=!0;return gb.writeCheckpoint(N.seq,va).then(function(){X=!1;if(f.cancelled)throw v(),Error("cancelled");N=void 0;F()}).catch(function(Na){I(Na);throw Na;})}function m(){var ta={};N.changes.forEach(function(Na){"_user/"!==Na.id&&(ta[Na.id]=Na.changes.map(function(Kb){return Kb.rev}))});return c.revsDiff(ta).then(function(Na){if(f.cancelled)throw v(),Error("cancelled");
N.diffs=Na})}function a(){return hda(d,c,N.diffs,f).then(function(ta){N.error=!ta.ok;ta.docs.forEach(function(Na){delete N.diffs[Na._id];k.docs_read++;N.docs.push(Na)})})}function g(){f.cancelled||N||(0===M.length?l(!0):(N=M.shift(),m().then(a).then(b).then(e).then(g).catch(function(ta){r("batch processing terminated with error",ta)})))}function l(ta){if(0===W.changes.length){if(0===M.length&&!N){if(K&&ma.live||ea)f.state="pending",f.emit("paused");ea&&v()}}else if(ta||ea||W.changes.length>=aa){M.push(W);
W={seq:0,changes:[],docs:[]};if("pending"===f.state||"stopped"===f.state)f.state="active",f.emit("active");g()}}function r(ta,Na){Aa||(Na.message||(Na.message=ta),k.ok=!1,k.status="aborting",M=[],W={seq:0,changes:[],docs:[]},v(Na))}function v(ta){if(!Aa){if(f.cancelled&&(k.status="cancelled",X))return;k.status=k.status||"complete";k.end_time=(new Date).toISOString();k.last_seq=Ma;Aa=!0;if(ta){ta=Si(ta);ta.result=k;var Na=(ta.name||"").toLowerCase();"unauthorized"===Na||"forbidden"===Na?(f.emit("error",
ta),f.removeAllListeners()):ida(h,f,ta,function(){A_(d,c,h,f)})}else f.emit("complete",k),f.removeAllListeners()}}function y(ta,Na,Kb){if(f.cancelled)return v();"number"===typeof Na&&(W.pending=Na);WP(h)(ta)&&(W.seq=ta.seq||Kb,W.changes.push(ta),Wu(function(){l(0===M.length&&ma.live)}))}function A(ta){U=!1;if(f.cancelled)return v();if(0<ta.results.length)ma.since=ta.results[ta.results.length-1].seq,F(),l(!0);else{var Na=function(){K?(ma.live=!0,F()):ea=!0;l(!0)};N||0!==ta.results.length?Na():(X=!0,
gb.writeCheckpoint(ta.last_seq,va).then(function(){X=!1;k.last_seq=Ma=ta.last_seq;Na()}).catch(I))}}function E(ta){U=!1;if(f.cancelled)return v();r("changes rejected",ta)}function F(){function ta(){Kb.cancel()}function Na(){f.removeListener("cancel",ta)}if(!U&&!ea&&M.length<T){U=!0;f._changes&&(f.removeListener("cancel",f._abortChanges),f._changes.cancel());f.once("cancel",ta);var Kb=d.changes(ma).on("change",y);Kb.then(Na,Na);Kb.then(A).catch(E);h.retry&&(f._changes=Kb,f._abortChanges=ta)}}function H(){n().then(function(){if(f.cancelled)v();
else return gb.getCheckpoint().then(function(ta){Ma=ta;ma={since:Ma,limit:aa,batch_size:aa,style:"all_docs",doc_ids:pa,selector:fa,return_docs:!0};h.filter&&("string"!==typeof h.filter?ma.include_docs=!0:ma.filter=h.filter);"heartbeat"in h&&(ma.heartbeat=h.heartbeat);"timeout"in h&&(ma.timeout=h.timeout);h.query_params&&(ma.query_params=h.query_params);h.view&&(ma.view=h.view);F()})}).catch(function(ta){r("getCheckpoint rejected with ",ta)})}function I(ta){X=!1;r("writeCheckpoint completed with error",
ta)}var M=[],N,W={seq:0,changes:[],docs:[]},X=!1,ea=!1,Aa=!1,Ma=0,K=h.continuous||h.live||!1,aa=h.batch_size||100,T=h.batches_limit||10,U=!1,pa=h.doc_ids,fa=h.selector,oa,gb,zb=[],va=RJ();k=k||{ok:!0,start_time:(new Date).toISOString(),docs_read:0,docs_written:0,doc_write_failures:0,errors:[]};var ma={};f.ready(d,c);f.cancelled?v():(f._addedListeners||(f.once("cancel",v),"function"===typeof h.complete&&(f.once("error",h.complete),f.once("complete",function(ta){h.complete(null,ta)})),f._addedListeners=
!0),"undefined"===typeof h.since?H():n().then(function(){X=!0;return gb.writeCheckpoint(h.since,va)}).then(function(){X=!1;f.cancelled?v():(Ma=h.since,H())}).catch(I))}function YJ(){tq.EventEmitter.call(this);this.cancelled=!1;this.state="pending";var d=this,c=new Promise(function(h,f){d.once("complete",h);d.once("error",f)});d.then=function(h,f){return c.then(h,f)};d.catch=function(h){return c.catch(h)};d.catch(function(){})}function ZJ(d,c){var h=c.PouchConstructor;return"string"===typeof d?new h(d,
c):d}function yQ(d,c,h,f){"function"===typeof h&&(f=h,h={});"undefined"===typeof h&&(h={});if(h.doc_ids&&!Array.isArray(h.doc_ids))throw Si(NJ,"`doc_ids` filter parameter is not a list.");h.complete=f;h=tn(h);h.continuous=h.continuous||h.live;h.retry="retry"in h?h.retry:!1;h.PouchConstructor=h.PouchConstructor||this;f=new YJ(h);d=ZJ(d,h);c=ZJ(c,h);A_(d,c,h,f);return f}function lda(d,c,h,f){"function"===typeof h&&(f=h,h={});"undefined"===typeof h&&(h={});h=tn(h);h.PouchConstructor=h.PouchConstructor||
this;d=ZJ(d,h);c=ZJ(c,h);return new zQ(d,c,h,f)}function zQ(d,c,h,f){function k(I){y.emit("change",{direction:"pull",change:I})}function n(I){y.emit("change",{direction:"push",change:I})}function b(I){y.emit("denied",{direction:"push",doc:I})}function e(I){y.emit("denied",{direction:"pull",doc:I})}function m(){y.pushPaused=!0;y.pullPaused&&y.emit("paused")}function a(){y.pullPaused=!0;y.pushPaused&&y.emit("paused")}function g(){y.pushPaused=!1;y.pullPaused&&y.emit("active",{direction:"push"})}function l(){y.pullPaused=
!1;y.pushPaused&&y.emit("active",{direction:"pull"})}function r(I){return function(M,N){var W="denied"===M&&(N===e||N===b),X="paused"===M&&(N===a||N===m),ea="active"===M&&(N===l||N===g);if("change"===M&&(N===k||N===n)||W||X||ea)M in F||(F[M]={}),F[M][I]=!0,2===Object.keys(F[M]).length&&y.removeAllListeners(M)}}function v(I,M,N){if(-1==I.listeners(M).indexOf(N))I.on(M,N)}var y=this;this.canceled=!1;var A=h.push?VC({},h,h.push):h,E=h.pull?VC({},h,h.pull):h;this.push=yQ(d,c,A);this.pull=yQ(c,d,E);this.pullPaused=
this.pushPaused=!0;var F={};h.live&&(this.push.on("complete",y.pull.cancel.bind(y.pull)),this.pull.on("complete",y.push.cancel.bind(y.push)));this.on("newListener",function(I){"change"===I?(v(y.pull,"change",k),v(y.push,"change",n)):"denied"===I?(v(y.pull,"denied",e),v(y.push,"denied",b)):"active"===I?(v(y.pull,"active",l),v(y.push,"active",g)):"paused"===I&&(v(y.pull,"paused",a),v(y.push,"paused",m))});this.on("removeListener",function(I){"change"===I?(y.pull.removeListener("change",k),y.push.removeListener("change",
n)):"denied"===I?(y.pull.removeListener("denied",e),y.push.removeListener("denied",b)):"active"===I?(y.pull.removeListener("active",l),y.push.removeListener("active",g)):"paused"===I&&(y.pull.removeListener("paused",a),y.push.removeListener("paused",m))});this.pull.on("removeListener",r("pull"));this.push.on("removeListener",r("push"));var H=Promise.all([this.push,this.pull]).then(function(I){I={push:I[0],pull:I[1]};y.emit("complete",I);f&&f(null,I);y.removeAllListeners();return I},function(I){y.cancel();
f?f(I):y.emit("error",I);y.removeAllListeners();if(f)throw I;});this.then=function(I,M){return H.then(I,M)};this.catch=function(I){return H.catch(I)}}function Vx(){this._store={}}function JF(d){this._store=new Vx;if(d&&Array.isArray(d))for(var c=0,h=d.length;c<h;c++)this.add(d[c])}function mda(){YC&&jA&&(YC=!1,jA.length?Wx=jA.concat(Wx):KF=-1,Wx.length&&B_())}function B_(){if(!YC){AQ=!1;YC=!0;for(var d=Wx.length,c=setTimeout(mda);d;){jA=Wx;for(Wx=[];jA&&++KF<d;)jA[KF].run();KF=-1;d=Wx.length}jA=null;
KF=-1;YC=!1;clearTimeout(c)}}function C_(d,c){this.fun=d;this.array=c}function Xk(d,c,h){Error.call(this,h);this.status=d;this.name=c;this.message=h;this.error=!0}function kA(d){return d.call.bind(d)}function LF(d,c){if("object"!=typeof d)return!1;try{return c(d),!0}catch(h){return!1}}function D_(d){return uq&&fr?void 0!==as(d):E_(d)||F_(d)||G_(d)||H_(d)||I_(d)||J_(d)||K_(d)||L_(d)||M_(d)||N_(d)||O_(d)}function E_(d){return uq&&fr?"Uint8Array"===as(d):"[object Uint8Array]"===Zl(d)||nda(d)&&void 0!==
d.buffer}function F_(d){return uq&&fr?"Uint8ClampedArray"===as(d):"[object Uint8ClampedArray]"===Zl(d)}function G_(d){return uq&&fr?"Uint16Array"===as(d):"[object Uint16Array]"===Zl(d)}function H_(d){return uq&&fr?"Uint32Array"===as(d):"[object Uint32Array]"===Zl(d)}function I_(d){return uq&&fr?"Int8Array"===as(d):"[object Int8Array]"===Zl(d)}function J_(d){return uq&&fr?"Int16Array"===as(d):"[object Int16Array]"===Zl(d)}function K_(d){return uq&&fr?"Int32Array"===as(d):"[object Int32Array]"===Zl(d)}
function L_(d){return uq&&fr?"Float32Array"===as(d):"[object Float32Array]"===Zl(d)}function M_(d){return uq&&fr?"Float64Array"===as(d):"[object Float64Array]"===Zl(d)}function N_(d){return uq&&fr?"BigInt64Array"===as(d):"[object BigInt64Array]"===Zl(d)}function O_(d){return uq&&fr?"BigUint64Array"===as(d):"[object BigUint64Array]"===Zl(d)}function $J(d){return"[object Map]"===Zl(d)}function aK(d){return"[object Set]"===Zl(d)}function bK(d){return"[object WeakMap]"===Zl(d)}function BQ(d){return"[object WeakSet]"===
Zl(d)}function cK(d){return"[object ArrayBuffer]"===Zl(d)}function P_(d){return"undefined"!=typeof ArrayBuffer&&(cK.working?cK(d):d instanceof ArrayBuffer)}function dK(d){return"[object DataView]"===Zl(d)}function Q_(d){return"undefined"!=typeof DataView&&(dK.working?dK(d):d instanceof DataView)}function eK(d){return"[object SharedArrayBuffer]"===Zl(d)}function R_(d){return"undefined"!=typeof SharedArrayBuffer&&(eK.working?eK(d):d instanceof SharedArrayBuffer)}function S_(d){return LF(d,oda)}function T_(d){return LF(d,
pda)}function U_(d){return LF(d,qda)}function V_(d){return W_&&LF(d,rda)}function X_(d){return CQ&&LF(d,sda)}function Xx(d,c){var h={seen:[],stylize:tda};return 3<=arguments.length&&(h.depth=arguments[2]),4<=arguments.length&&(h.colors=arguments[3]),DQ(c)?h.showHidden=c:c&&Vh._extend(h,c),lA(h.showHidden)&&(h.showHidden=!1),lA(h.depth)&&(h.depth=2),lA(h.colors)&&(h.colors=!1),lA(h.customInspect)&&(h.customInspect=!0),h.colors&&(h.stylize=uda),fK(h,d,h.depth)}function uda(d,c){return(c=Xx.styles[c])?
"\u001b["+Xx.colors[c][0]+"m"+d+"\u001b["+Xx.colors[c][1]+"m":d}function tda(d,c){return d}function fK(d,c,h){if(d.customInspect&&c&&gK(c.inspect)&&c.inspect!==Vh.inspect&&(!c.constructor||c.constructor.prototype!==c)){var f=c.inspect(h,d);return hK(f)||(f=fK(d,f,h)),f}var k=function(a,g){if(lA(g))return a.stylize("undefined","undefined");if(hK(g))return g="'"+JSON.stringify(g).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'",a.stylize(g,"string");if(Y_(g))return a.stylize(""+g,"number");
if(DQ(g))return a.stylize(""+g,"boolean");if(null===g)return a.stylize("null","null")}(d,c);if(k)return k;k=Object.keys(c);var n=function(a){var g={};return a.forEach(function(l,r){g[l]=!0}),g}(k);if(d.showHidden&&(k=Object.getOwnPropertyNames(c)),MF(c)&&(0<=k.indexOf("message")||0<=k.indexOf("description")))return EQ(c);if(0===k.length){if(gK(c))return d.stylize("[Function"+(c.name?": "+c.name:"")+"]","special");if(NF(c))return d.stylize(RegExp.prototype.toString.call(c),"regexp");if(iK(c))return d.stylize(Date.prototype.toString.call(c),
"date");if(MF(c))return EQ(c)}var b="",e=!1,m=["{","}"];(Z_(c)&&(e=!0,m=["[","]"]),gK(c))&&(b=" [Function"+(c.name?": "+c.name:"")+"]");return NF(c)&&(b=" "+RegExp.prototype.toString.call(c)),iK(c)&&(b=" "+Date.prototype.toUTCString.call(c)),MF(c)&&(b=" "+EQ(c)),0!==k.length||e&&0!=c.length?0>h?NF(c)?d.stylize(RegExp.prototype.toString.call(c),"regexp"):d.stylize("[Object]","special"):(d.seen.push(c),f=e?function(a,g,l,r,v){for(var y=[],A=0,E=g.length;A<E;++A)Object.prototype.hasOwnProperty.call(g,
String(A))?y.push(FQ(a,g,l,r,String(A),!0)):y.push("");return v.forEach(function(F){F.match(/^\d+$/)||y.push(FQ(a,g,l,r,F,!0))}),y}(d,c,h,n,k):k.map(function(a){return FQ(d,c,h,n,a,e)}),d.seen.pop(),function(a,g,l){var r=0;return 60<a.reduce(function(v,y){return r++,0<=y.indexOf("\n")&&r++,v+y.replace(/\u001b\[\d\d?m/g,"").length+1},0)?l[0]+(""===g?"":g+"\n ")+" "+a.join(",\n  ")+" "+l[1]:l[0]+g+" "+a.join(", ")+" "+l[1]}(f,b,m)):m[0]+b+m[1]}function EQ(d){return"["+Error.prototype.toString.call(d)+
"]"}function FQ(d,c,h,f,k,n){var b,e,m;if((m=Object.getOwnPropertyDescriptor(c,k)||{value:c[k]}).get?e=m.set?d.stylize("[Getter/Setter]","special"):d.stylize("[Getter]","special"):m.set&&(e=d.stylize("[Setter]","special")),Object.prototype.hasOwnProperty.call(f,k)||(b="["+k+"]"),e||(0>d.seen.indexOf(m.value)?-1<(e=null===h?fK(d,m.value,null):fK(d,m.value,h-1)).indexOf("\n")&&(e=n?e.split("\n").map(function(a){return"  "+a}).join("\n").substr(2):"\n"+e.split("\n").map(function(a){return"   "+a}).join("\n")):
e=d.stylize("[Circular]","special")),lA(b)){if(n&&k.match(/^\d+$/))return e;(b=JSON.stringify(""+k)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(b=b.substr(1,b.length-2),b=d.stylize(b,"name")):(b=b.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),b=d.stylize(b,"string"))}return b+": "+e}function Z_(d){return Array.isArray(d)}function DQ(d){return"boolean"==typeof d}function Y_(d){return"number"==typeof d}function hK(d){return"string"==typeof d}function lA(d){return void 0===d}function NF(d){return ZC(d)&&
"[object RegExp]"===Object.prototype.toString.call(d)}function ZC(d){return"object"==typeof d&&null!==d}function iK(d){return ZC(d)&&"[object Date]"===Object.prototype.toString.call(d)}function MF(d){return ZC(d)&&("[object Error]"===Object.prototype.toString.call(d)||d instanceof Error)}function gK(d){return"function"==typeof d}function GQ(d){return 10>d?"0"+d.toString(10):d.toString(10)}function vda(){var d=new Date,c=[GQ(d.getHours()),GQ(d.getMinutes()),GQ(d.getSeconds())].join(":");return[d.getDate(),
wda[d.getMonth()],c].join(" ")}function xda(d,c){if(!d){var h=Error("Promise was rejected with a falsy value");h.reason=d;d=h}return c(d)}function $_(d){var c=d.length;if(0<c%4)throw Error("Invalid string. Length must be a multiple of 4");d=d.indexOf("=");return-1===d&&(d=c),[d,d===c?0:4-d%4]}function yda(d,c,h){for(var f,k=[],n=c;n<h;n+=3)c=(d[n]<<16&16711680)+(d[n+1]<<8&65280)+(255&d[n+2]),k.push(Yu[(f=c)>>18&63]+Yu[f>>12&63]+Yu[f>>6&63]+Yu[63&f]);return k.join("")}function vw(d){if(2147483647<
d)throw new RangeError('The value "'+d+'" is invalid for option "size"');d=new Uint8Array(d);return Object.setPrototypeOf(d,df.prototype),d}function df(d,c,h){if("number"==typeof d){if("string"==typeof c)throw new TypeError('The "string" argument must be of type string. Received type number');return HQ(d)}return a0(d,c,h)}function a0(d,c,h){if("string"==typeof d)return function(k,n){"string"==typeof n&&""!==n||(n="utf8");if(!df.isEncoding(n))throw new TypeError("Unknown encoding: "+n);var b=0|b0(k,
n),e=vw(b);k=e.write(k,n);k!==b&&(e=e.slice(0,k));return e}(d,c);if(ArrayBuffer.isView(d))return IQ(d);if(null==d)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof d);if(ww(d,ArrayBuffer)||d&&ww(d.buffer,ArrayBuffer)||"undefined"!=typeof SharedArrayBuffer&&(ww(d,SharedArrayBuffer)||d&&ww(d.buffer,SharedArrayBuffer)))return zda(d,c,h);if("number"==typeof d)throw new TypeError('The "value" argument must not be of type number. Received type number');
var f=d.valueOf&&d.valueOf();if(null!=f&&f!==d)return df.from(f,c,h);if(f=function(k){if(df.isBuffer(k)){var n=0|JQ(k.length),b=vw(n);return 0===b.length||k.copy(b,0,0,n),b}if(void 0!==k.length)return(n="number"!=typeof k.length)||(n=k.length,n=n!=n),n?vw(0):IQ(k);if("Buffer"===k.type&&Array.isArray(k.data))return IQ(k.data)}(d))return f;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof d[Symbol.toPrimitive])return df.from(d[Symbol.toPrimitive]("string"),c,h);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+
typeof d);}function c0(d){if("number"!=typeof d)throw new TypeError('"size" argument must be of type number');if(0>d)throw new RangeError('The value "'+d+'" is invalid for option "size"');}function HQ(d){return c0(d),vw(0>d?0:0|JQ(d))}function IQ(d){for(var c=0>d.length?0:0|JQ(d.length),h=vw(c),f=0;f<c;f+=1)h[f]=255&d[f];return h}function zda(d,c,h){if(0>c||d.byteLength<c)throw new RangeError('"offset" is outside of buffer bounds');if(d.byteLength<c+(h||0))throw new RangeError('"length" is outside of buffer bounds');
var f;return f=void 0===c&&void 0===h?new Uint8Array(d):void 0===h?new Uint8Array(d,c):new Uint8Array(d,c,h),Object.setPrototypeOf(f,df.prototype),f}function JQ(d){if(2147483647<=d)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+(2147483647).toString(16)+" bytes");return 0|d}function b0(d,c){if(df.isBuffer(d))return d.length;if(ArrayBuffer.isView(d)||ww(d,ArrayBuffer))return d.byteLength;if("string"!=typeof d)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+
typeof d);var h=d.length,f=2<arguments.length&&!0===arguments[2];if(!f&&0===h)return 0;for(var k=!1;;)switch(c){case "ascii":case "latin1":case "binary":return h;case "utf8":case "utf-8":return KQ(d).length;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return 2*h;case "hex":return h>>>1;case "base64":return d0(d).length;default:if(k)return f?-1:KQ(d).length;c=(""+c).toLowerCase();k=!0}}function Ada(d,c,h){var f=!1;if(((void 0===c||0>c)&&(c=0),c>this.length)||((void 0===h||h>this.length)&&
(h=this.length),0>=h)||(h>>>=0)<=(c>>>=0))return"";for(d||(d="utf8");;)switch(d){case "hex":d=this.length;(!c||0>c)&&(c=0);(!h||0>h||h>d)&&(h=d);for(d="";c<h;++c)d+=Bda[this[c]];return d;case "utf8":case "utf-8":return e0(this,c,h);case "ascii":d="";for(h=Math.min(this.length,h);c<h;++c)d+=String.fromCharCode(127&this[c]);return d;case "latin1":case "binary":d="";for(h=Math.min(this.length,h);c<h;++c)d+=String.fromCharCode(this[c]);return d;case "base64":return 0===c&&h===this.length?LQ.fromByteArray(this):
LQ.fromByteArray(this.slice(c,h));case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":c=this.slice(c,h);h="";for(d=0;d<c.length;d+=2)h+=String.fromCharCode(c[d]+256*c[d+1]);return h;default:if(f)throw new TypeError("Unknown encoding: "+d);d=(d+"").toLowerCase();f=!0}}function mA(d,c,h){var f=d[c];d[c]=d[h];d[h]=f}function f0(d,c,h,f,k){if(0===d.length)return-1;"string"==typeof h?(f=h,h=0):2147483647<h?h=2147483647:-2147483648>h&&(h=-2147483648);var n=h=+h;if(n!=n&&(h=k?0:d.length-1),0>h&&(h=d.length+
h),h>=d.length){if(k)return-1;h=d.length-1}else if(0>h){if(!k)return-1;h=0}if("string"==typeof c&&(c=df.from(c,f)),df.isBuffer(c))return 0===c.length?-1:g0(d,c,h,f,k);if("number"==typeof c)return c&=255,"function"==typeof Uint8Array.prototype.indexOf?k?Uint8Array.prototype.indexOf.call(d,c,h):Uint8Array.prototype.lastIndexOf.call(d,c,h):g0(d,[c],h,f,k);throw new TypeError("val must be string, number or Buffer");}function g0(d,c,h,f,k){function n(a,g){return 1===b?a[g]:a.readUInt16BE(g*b)}var b=1,
e=d.length,m=c.length;if(void 0!==f&&("ucs2"===(f=String(f).toLowerCase())||"ucs-2"===f||"utf16le"===f||"utf-16le"===f)){if(2>d.length||2>c.length)return-1;b=2;e/=2;m/=2;h/=2}if(k)for(f=-1;h<e;h++)if(n(d,h)===n(c,-1===f?0:h-f)){if(-1===f&&(f=h),h-f+1===m)return f*b}else-1!==f&&(h-=h-f),f=-1;else for(h+m>e&&(h=e-m);0<=h;h--){e=!0;for(f=0;f<m;f++)if(n(d,h+f)!==n(c,f)){e=!1;break}if(e)return h}return-1}function h0(d,c,h,f){for(var k=[],n=0;n<c.length;++n)k.push(255&c.charCodeAt(n));return jK(k,d,h,f)}
function e0(d,c,h){h=Math.min(d.length,h);for(var f=[];c<h;){var k,n,b=d[c],e=null,m=239<b?4:223<b?3:191<b?2:1;if(c+m<=h)switch(m){case 1:128>b&&(e=b);break;case 2:128==(192&(k=d[c+1]))&&127<(n=(31&b)<<6|63&k)&&(e=n);break;case 3:k=d[c+1];var a=d[c+2];128==(192&k)&&128==(192&a)&&2047<(n=(15&b)<<12|(63&k)<<6|63&a)&&(55296>n||57343<n)&&(e=n);break;case 4:k=d[c+1];a=d[c+2];var g=d[c+3];128==(192&k)&&128==(192&a)&&128==(192&g)&&65535<(n=(15&b)<<18|(63&k)<<12|(63&a)<<6|63&g)&&1114112>n&&(e=n)}null===e?
(e=65533,m=1):65535<e&&(e-=65536,f.push(e>>>10&1023|55296),e=56320|1023&e);f.push(e);c+=m}d=f.length;if(4096>=d)f=String.fromCharCode.apply(String,f);else{h="";for(k=0;k<d;)h+=String.fromCharCode.apply(String,f.slice(k,k+=4096));f=h}return f}function Yn(d,c,h){if(0!=d%1||0>d)throw new RangeError("offset is not uint");if(d+c>h)throw new RangeError("Trying to access beyond buffer length");}function vq(d,c,h,f,k,n){if(!df.isBuffer(d))throw new TypeError('"buffer" argument must be a Buffer instance');
if(c>k||c<n)throw new RangeError('"value" argument is out of bounds');if(h+f>d.length)throw new RangeError("Index out of range");}function i0(d,c,h,f,k,n){if(h+f>d.length)throw new RangeError("Index out of range");if(0>h)throw new RangeError("Index out of range");}function j0(d,c,h,f,k){return c=+c,h>>>=0,k||i0(d,0,h,4),$C.write(d,c,h,f,23,4),h+4}function k0(d,c,h,f,k){return c=+c,h>>>=0,k||i0(d,0,h,8),$C.write(d,c,h,f,52,8),h+8}function KQ(d,c){var h;c=c||1/0;for(var f=d.length,k=null,n=[],b=0;b<
f;++b){if(55295<(h=d.charCodeAt(b))&&57344>h){if(!k){if(56319<h){-1<(c-=3)&&n.push(239,191,189);continue}if(b+1===f){-1<(c-=3)&&n.push(239,191,189);continue}k=h;continue}if(56320>h){-1<(c-=3)&&n.push(239,191,189);k=h;continue}h=65536+(k-55296<<10|h-56320)}else k&&-1<(c-=3)&&n.push(239,191,189);if(k=null,128>h){if(0>--c)break;n.push(h)}else if(2048>h){if(0>(c-=2))break;n.push(h>>6|192,63&h|128)}else if(65536>h){if(0>(c-=3))break;n.push(h>>12|224,h>>6&63|128,63&h|128)}else{if(!(1114112>h))throw Error("Invalid code point");
if(0>(c-=4))break;n.push(h>>18|240,h>>12&63|128,h>>6&63|128,63&h|128)}}return n}function d0(d){return LQ.toByteArray(function(c){if(2>(c=(c=c.split("=")[0]).trim().replace(Cda,"")).length)return"";for(;0!=c.length%4;)c+="=";return c}(d))}function jK(d,c,h,f){for(var k=0;k<f&&!(k+h>=c.length||k>=d.length);++k)c[k+h]=d[k];return k}function ww(d,c){return d instanceof c||null!=d&&null!=d.constructor&&null!=d.constructor.name&&d.constructor.name===c.name}function l0(d,c){for(var h in d)c[h]=d[h]}function nA(d,
c,h){return Zu(d,c,h)}function OF(d){switch(this.encoding=function(c){var h=function(f){if(!f)return"utf8";for(var k;;)switch(f){case "utf8":case "utf-8":return"utf8";case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return"utf16le";case "latin1":case "binary":return"latin1";case "base64":case "ascii":case "hex":return f;default:if(k)return;f=(""+f).toLowerCase();k=!0}}(c);if("string"!=typeof h&&(MQ.isEncoding===m0||!m0(c)))throw Error("Unknown encoding: "+c);return h||c}(d),this.encoding){case "utf16le":this.text=
Dda;this.end=Eda;d=4;break;case "utf8":this.fillLast=Fda;d=4;break;case "base64":this.text=Gda;this.end=Hda;d=3;break;default:return this.write=Ida,this.end=Jda,void 0}this.lastTotal=this.lastNeed=0;this.lastChar=MQ.allocUnsafe(d)}function NQ(d){return 127>=d?0:6==d>>5?2:14==d>>4?3:30==d>>3?4:2==d>>6?-1:-2}function Fda(d){var c=this.lastTotal-this.lastNeed;a:if(128!=(192&d[0]))var h=(this.lastNeed=0,"\ufffd");else{if(1<this.lastNeed&&1<d.length){if(128!=(192&d[1])){h=(this.lastNeed=1,"\ufffd");break a}if(2<
this.lastNeed&&2<d.length&&128!=(192&d[2])){h=(this.lastNeed=2,"\ufffd");break a}}h=void 0}return void 0!==h?h:this.lastNeed<=d.length?(d.copy(this.lastChar,c,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(d.copy(this.lastChar,c,0,d.length),this.lastNeed-=d.length,void 0)}function Dda(d,c){if(0==(d.length-c)%2){if(c=d.toString("utf16le",c)){var h=c.charCodeAt(c.length-1);if(55296<=h&&56319>=h)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=d[d.length-2],this.lastChar[1]=
d[d.length-1],c.slice(0,-1)}return c}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=d[d.length-1],d.toString("utf16le",c,d.length-1)}function Eda(d){d=d&&d.length?this.write(d):"";return this.lastNeed?d+this.lastChar.toString("utf16le",0,this.lastTotal-this.lastNeed):d}function Gda(d,c){var h=(d.length-c)%3;return 0===h?d.toString("base64",c):(this.lastNeed=3-h,this.lastTotal=3,1===h?this.lastChar[0]=d[d.length-1]:(this.lastChar[0]=d[d.length-2],this.lastChar[1]=d[d.length-1]),d.toString("base64",
c,d.length-h))}function Hda(d){d=d&&d.length?this.write(d):"";return this.lastNeed?d+this.lastChar.toString("base64",0,3-this.lastNeed):d}function Ida(d){return d.toString(this.encoding)}function Jda(d){return d&&d.length?this.write(d):""}function bs(d,c,h){h||(h=Error);var f=function(k,n,b){return b.call(this,"string"==typeof c?c:c(k,n,b))||this};$jscomp.inherits(f,h);f.prototype.name=h.name;f.prototype.code=d;n0[d]=f}function o0(d,c){if(Array.isArray(d)){var h=d.length;return d=d.map(function(f){return String(f)}),
2<h?"one of "+c+" "+d.slice(0,h-1).join(", ")+", or "+d[h-1]:2===h?"one of "+c+" "+d[0]+" or "+d[1]:"of "+c+" "+d[0]}return"of "+c+" "+String(d)}function OQ(d){try{if(!PQ.localStorage)return!1}catch(c){return!1}d=PQ.localStorage[d];return null!=d&&"true"===String(d).toLowerCase()}function p0(d,c){var h=Object.keys(d);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(d);c&&(f=f.filter(function(k){return Object.getOwnPropertyDescriptor(d,k).enumerable}));h.push.apply(h,f)}return h}
function Kda(d,c){for(var h=0;h<c.length;h++){var f=c[h];f.enumerable=f.enumerable||!1;f.configurable=!0;"value"in f&&(f.writable=!0);Object.defineProperty(d,f.key,f)}}function q0(d,c){QQ(d,c);kK(d)}function kK(d){d._writableState&&!d._writableState.emitClose||d._readableState&&!d._readableState.emitClose||d.emit("close")}function QQ(d,c){d.emit("error",c)}function Lda(){}function Yx(d,c,h){return c in d?Object.defineProperty(d,c,{value:h,enumerable:!0,configurable:!0,writable:!0}):d[c]=h,d}function Zx(d,
c){return{value:d,done:c}}function Mda(d){var c=d[$x];if(null!==c){var h=d[oA].read();null!==h&&(d[pA]=null,d[$x]=null,d[qA]=null,c(Zx(h,!1)))}}function Nda(d){r0.nextTick(Mda,d)}function s0(){function d(va,ma,ta){F=F||PF();va=va||{};"boolean"!=typeof ta&&(ta=ma instanceof F);this.objectMode=!!va.objectMode;ta&&(this.objectMode=this.objectMode||!!va.readableObjectMode);this.highWaterMark=aa(this,va,"readableHighWaterMark",ta);this.buffer=new K;this.length=0;this.pipes=null;this.pipesCount=0;this.flowing=
null;this.reading=this.endEmitted=this.ended=!1;this.sync=!0;this.resumeScheduled=this.readableListening=this.emittedReadable=this.needReadable=!1;this.paused=!0;this.emitClose=!1!==va.emitClose;this.autoDestroy=!!va.autoDestroy;this.destroyed=!1;this.defaultEncoding=va.defaultEncoding||"utf8";this.awaitDrain=0;this.readingMore=!1;this.encoding=this.decoder=null;va.encoding&&(ea||(ea=aD.StringDecoder),this.decoder=new ea(va.encoding),this.encoding=va.encoding)}function c(va){if(F=F||PF(),!(this instanceof
c))return new c(va);this._readableState=new d(va,this,this instanceof F);this.readable=!0;va&&("function"==typeof va.read&&(this._read=va.read),"function"==typeof va.destroy&&(this._destroy=va.destroy));I.call(this)}function h(va,ma,ta,Na,Kb){X("readableAddChunk",ma);var kc,Vb=va._readableState;if(null===ma)Vb.reading=!1,function(jc,Qc){if(X("onEofChunk"),!Qc.ended){if(Qc.decoder){var Pb=Qc.decoder.end();Pb&&Pb.length&&(Qc.buffer.push(Pb),Qc.length+=Qc.objectMode?1:Pb.length)}Qc.ended=!0;Qc.sync?
n(jc):(Qc.needReadable=!1,Qc.emittedReadable||(Qc.emittedReadable=!0,b(jc)))}}(va,Vb);else if(Kb||(kc=function(jc,Qc){var Pb;var xd=Qc;M.isBuffer(xd)||xd instanceof N||"string"==typeof Qc||void 0===Qc||jc.objectMode||(Pb=new U("chunk",["string","Buffer","Uint8Array"],Qc));return Pb}(Vb,ma)),kc)gb(va,kc);else if(Vb.objectMode||ma&&0<ma.length)if("string"==typeof ma||Vb.objectMode||Object.getPrototypeOf(ma)===M.prototype||(ma=M.from(ma)),Na)Vb.endEmitted?gb(va,new oa):f(va,Vb,ma,!0);else if(Vb.ended)gb(va,
new pa);else{if(Vb.destroyed)return!1;Vb.reading=!1;Vb.decoder&&!ta?(ma=Vb.decoder.write(ma),Vb.objectMode||0!==ma.length?f(va,Vb,ma,!1):e(va,Vb)):f(va,Vb,ma,!1)}else Na||(Vb.reading=!1,e(va,Vb));return!Vb.ended&&(Vb.length<Vb.highWaterMark||0===Vb.length)}function f(va,ma,ta,Na){ma.flowing&&0===ma.length&&!ma.sync?(ma.awaitDrain=0,va.emit("data",ta)):(ma.length+=ma.objectMode?1:ta.length,Na?ma.buffer.unshift(ta):ma.buffer.push(ta),ma.needReadable&&n(va));e(va,ma)}function k(va,ma){if(0>=va||0===
ma.length&&ma.ended)va=0;else if(ma.objectMode)va=1;else if(va!=va)va=ma.flowing&&ma.length?ma.buffer.head.data.length:ma.length;else{if(va>ma.highWaterMark){var ta=va;var Na=(1073741824<=ta?ta=1073741824:(ta--,ta|=ta>>>1,ta|=ta>>>2,ta|=ta>>>4,ta|=ta>>>8,ta|=ta>>>16,ta++),ta);ma.highWaterMark=Na}va=va<=ma.length?va:ma.ended?ma.length:(ma.needReadable=!0,0)}return va}function n(va){var ma=va._readableState;X("emitReadable",ma.needReadable,ma.emittedReadable);ma.needReadable=!1;ma.emittedReadable||
(X("emitReadable",ma.flowing),ma.emittedReadable=!0,H.nextTick(b,va))}function b(va){var ma=va._readableState;X("emitReadable_",ma.destroyed,ma.length,ma.ended);ma.destroyed||!ma.length&&!ma.ended||(va.emit("readable"),ma.emittedReadable=!1);ma.needReadable=!ma.flowing&&!ma.ended&&ma.length<=ma.highWaterMark;r(va)}function e(va,ma){ma.readingMore||(ma.readingMore=!0,H.nextTick(m,va,ma))}function m(va,ma){for(;!ma.reading&&!ma.ended&&(ma.length<ma.highWaterMark||ma.flowing&&0===ma.length);){var ta=
ma.length;if(X("maybeReadMore read 0"),va.read(0),ta===ma.length)break}ma.readingMore=!1}function a(va){var ma=va._readableState;ma.readableListening=0<va.listenerCount("readable");ma.resumeScheduled&&!ma.paused?ma.flowing=!0:0<va.listenerCount("data")&&va.resume()}function g(va){X("readable nexttick read 0");va.read(0)}function l(va,ma){X("resume",ma.reading);ma.reading||va.read(0);ma.resumeScheduled=!1;va.emit("resume");r(va);ma.flowing&&!ma.reading&&va.read(0)}function r(va){var ma=va._readableState;
for(X("flow",ma.flowing);ma.flowing&&null!==va.read(););}function v(va,ma){return 0===ma.length?null:(ma.objectMode?ta=ma.buffer.shift():!va||va>=ma.length?(ta=ma.decoder?ma.buffer.join(""):1===ma.buffer.length?ma.buffer.first():ma.buffer.concat(ma.length),ma.buffer.clear()):ta=ma.buffer.consume(va,ma.decoder),ta);var ta}function y(va){var ma=va._readableState;X("endReadable",ma.endEmitted);ma.endEmitted||(ma.ended=!0,H.nextTick(A,ma,va))}function A(va,ma){if(X("endReadableNT",va.endEmitted,va.length),
!va.endEmitted&&0===va.length&&(va.endEmitted=!0,ma.readable=!1,ma.emit("end"),va.autoDestroy))va=ma._writableState,(!va||va.autoDestroy&&va.finished)&&ma.destroy()}function E(va,ma){for(var ta=0,Na=va.length;ta<Na;ta++)if(va[ta]===ma)return ta;return-1}if(t0)return RQ;t0=!0;var F,H=tj;RQ=c;c.ReadableState=d;$u.EventEmitter;var I=lK,M=Mi.Buffer,N=Oda.Uint8Array||function(){},W=Vh;var X=W&&W.debuglog?W.debuglog("stream"):function(){};var ea,Aa,Ma,K=Pda;W=u0;var aa=v0.getHighWaterMark,T=tt.codes,U=
T.ERR_INVALID_ARG_TYPE,pa=T.ERR_STREAM_PUSH_AFTER_EOF,fa=T.ERR_METHOD_NOT_IMPLEMENTED,oa=T.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;ti(c,I);var gb=W.errorOrDestroy,zb=["error","close","destroy","pause","resume"];Object.defineProperty(c.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(va){this._readableState&&(this._readableState.destroyed=va)}});c.prototype.destroy=W.destroy;c.prototype._undestroy=W.undestroy;c.prototype._destroy=
function(va,ma){ma(va)};c.prototype.push=function(va,ma){var ta,Na=this._readableState;return Na.objectMode?ta=!0:"string"==typeof va&&((ma=ma||Na.defaultEncoding)!==Na.encoding&&(va=M.from(va,ma),ma=""),ta=!0),h(this,va,ma,!1,ta)};c.prototype.unshift=function(va){return h(this,va,null,!0,!1)};c.prototype.isPaused=function(){return!1===this._readableState.flowing};c.prototype.setEncoding=function(va){ea||(ea=aD.StringDecoder);va=new ea(va);this._readableState.decoder=va;this._readableState.encoding=
this._readableState.decoder.encoding;for(var ma=this._readableState.buffer.head,ta="";null!==ma;)ta+=va.write(ma.data),ma=ma.next;return this._readableState.buffer.clear(),""!==ta&&this._readableState.buffer.push(ta),this._readableState.length=ta.length,this};return c.prototype.read=function(va){X("read",va);va=parseInt(va,10);var ma=this._readableState,ta=va;if(0!==va&&(ma.emittedReadable=!1),0===va&&ma.needReadable&&((0!==ma.highWaterMark?ma.length>=ma.highWaterMark:0<ma.length)||ma.ended))return X("read: emitReadable",
ma.length,ma.ended),0===ma.length&&ma.ended?y(this):n(this),null;if(0===(va=k(va,ma))&&ma.ended)return 0===ma.length&&y(this),null;var Na,Kb=ma.needReadable;return X("need readable",Kb),(0===ma.length||ma.length-va<ma.highWaterMark)&&X("length less than watermark",Kb=!0),ma.ended||ma.reading?X("reading or ended",!1):Kb&&(X("do read"),ma.reading=!0,ma.sync=!0,0===ma.length&&(ma.needReadable=!0),this._read(ma.highWaterMark),ma.sync=!1,ma.reading||(va=k(ta,ma))),null===(Na=0<va?v(va,ma):null)?(ma.needReadable=
ma.length<=ma.highWaterMark,va=0):(ma.length-=va,ma.awaitDrain=0),0===ma.length&&(ma.ended||(ma.needReadable=!0),ta!==va&&ma.ended&&y(this)),null!==Na&&this.emit("data",Na),Na},c.prototype._read=function(va){gb(this,new fa("_read()"))},c.prototype.pipe=function(va,ma){function ta(Fa,Sa){X("onunpipe");Fa===Pb&&Sa&&!1===Sa.hasUnpiped&&(Sa.hasUnpiped=!0,X("cleanup"),va.removeListener("close",Vb),va.removeListener("finish",jc),va.removeListener("drain",Td),va.removeListener("error",kc),va.removeListener("unpipe",
ta),Pb.removeListener("end",Na),Pb.removeListener("end",Qc),Pb.removeListener("data",Kb),ka=!0,!xd.awaitDrain||va._writableState&&!va._writableState.needDrain||Td())}function Na(){X("onend");va.end()}function Kb(Fa){X("ondata");Fa=va.write(Fa);X("dest.write",Fa);!1===Fa&&((1===xd.pipesCount&&xd.pipes===va||1<xd.pipesCount&&-1!==E(xd.pipes,va))&&!ka&&(X("false write response, pause",xd.awaitDrain),xd.awaitDrain++),Pb.pause())}function kc(Fa){X("onerror",Fa);Qc();va.removeListener("error",kc);0===va.listeners("error").length&&
gb(va,Fa)}function Vb(){va.removeListener("finish",jc);Qc()}function jc(){X("onfinish");va.removeListener("close",Vb);Qc()}function Qc(){X("unpipe");Pb.unpipe(va)}var Pb=this,xd=this._readableState;switch(xd.pipesCount){case 0:xd.pipes=va;break;case 1:xd.pipes=[xd.pipes,va];break;default:xd.pipes.push(va)}xd.pipesCount+=1;X("pipe count=%d opts=%j",xd.pipesCount,ma);ma=ma&&!1===ma.end||va===H.stdout||va===H.stderr?Qc:Na;xd.endEmitted?H.nextTick(ma):Pb.once("end",ma);va.on("unpipe",ta);var Td=function(Fa){return function(){var Sa=
Fa._readableState;X("pipeOnDrain",Sa.awaitDrain);Sa.awaitDrain&&Sa.awaitDrain--;0===Sa.awaitDrain&&Fa.listeners("data").length&&(Sa.flowing=!0,r(Fa))}}(Pb);va.on("drain",Td);var ka=!1;return Pb.on("data",Kb),function(Fa,Sa,wb){if("function"==typeof Fa.prependListener)return Fa.prependListener(Sa,wb);Fa._events&&Fa._events[Sa]?Array.isArray(Fa._events[Sa])?Fa._events[Sa].unshift(wb):Fa._events[Sa]=[wb,Fa._events[Sa]]:Fa.on(Sa,wb)}(va,"error",kc),va.once("close",Vb),va.once("finish",jc),va.emit("pipe",
Pb),xd.flowing||(X("pipe resume"),Pb.resume()),va},c.prototype.unpipe=function(va){var ma=this._readableState,ta={hasUnpiped:!1};if(0===ma.pipesCount)return this;if(1===ma.pipesCount)return va&&va!==ma.pipes||(va||(va=ma.pipes),ma.pipes=null,ma.pipesCount=0,ma.flowing=!1,va&&va.emit("unpipe",this,ta)),this;if(!va){va=ma.pipes;ta=ma.pipesCount;ma.pipes=null;ma.pipesCount=0;ma.flowing=!1;for(ma=0;ma<ta;ma++)va[ma].emit("unpipe",this,{hasUnpiped:!1});return this}var Na=E(ma.pipes,va);return-1===Na||
(ma.pipes.splice(Na,1),--ma.pipesCount,1===ma.pipesCount&&(ma.pipes=ma.pipes[0]),va.emit("unpipe",this,ta)),this},c.prototype.on=function(va,ma){ma=I.prototype.on.call(this,va,ma);var ta=this._readableState;return"data"===va?(ta.readableListening=0<this.listenerCount("readable"),!1!==ta.flowing&&this.resume()):"readable"===va&&(ta.endEmitted||ta.readableListening||(ta.readableListening=ta.needReadable=!0,ta.flowing=!1,ta.emittedReadable=!1,X("on readable",ta.length,ta.reading),ta.length?n(this):ta.reading||
H.nextTick(g,this))),ma},c.prototype.addListener=c.prototype.on,c.prototype.removeListener=function(va,ma){ma=I.prototype.removeListener.call(this,va,ma);return"readable"===va&&H.nextTick(a,this),ma},c.prototype.removeAllListeners=function(va){var ma=I.prototype.removeAllListeners.apply(this,arguments);return"readable"!==va&&void 0!==va||H.nextTick(a,this),ma},c.prototype.resume=function(){var va=this._readableState;va.flowing||(X("resume"),va.flowing=!va.readableListening,va.resumeScheduled||(va.resumeScheduled=
!0,H.nextTick(l,this,va)));return va.paused=!1,this},c.prototype.pause=function(){return X("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(X("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},c.prototype.wrap=function(va){var ma=this,ta=this._readableState,Na=!1,Kb;for(Kb in va.on("end",function(){if(X("wrapped end"),ta.decoder&&!ta.ended){var kc=ta.decoder.end();kc&&kc.length&&ma.push(kc)}ma.push(null)}),va.on("data",
function(kc){(X("wrapped data"),ta.decoder&&(kc=ta.decoder.write(kc)),ta.objectMode&&null==kc)||(ta.objectMode||kc&&kc.length)&&(ma.push(kc)||(Na=!0,va.pause()))}),va)void 0===this[Kb]&&"function"==typeof va[Kb]&&(this[Kb]=function(kc){return function(){return va[kc].apply(va,arguments)}}(Kb));for(Kb=0;Kb<zb.length;Kb++)va.on(zb[Kb],this.emit.bind(this,zb[Kb]));return this._read=function(kc){X("wrapped _read",kc);Na&&(Na=!1,va.resume())},this},"function"==typeof Symbol&&(c.prototype[Symbol.asyncIterator]=
function(){return void 0===Aa&&(Aa=Qda),Aa(this)}),Object.defineProperty(c.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(c.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(c.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(va){this._readableState&&(this._readableState.flowing=
va)}}),c._fromList=v,Object.defineProperty(c.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(c.from=function(va,ma){return void 0===Ma&&(Ma=w0),Ma(c,va,ma)}),RQ}function Rda(){function d(T){var U=this;this.entry=this.next=null;this.finish=function(){var pa=U.entry;for(U.entry=null;pa;){var fa=pa.callback;T.pendingcb--;fa(void 0);pa=pa.next}T.corkedRequestsFree.next=U;!0}}function c(){}function h(T,U,pa){g=g||PF();T=T||{};"boolean"!=
typeof pa&&(pa=U instanceof g);this.objectMode=!!T.objectMode;pa&&(this.objectMode=this.objectMode||!!T.writableObjectMode);this.highWaterMark=H(this,T,"writableHighWaterMark",pa);this.destroyed=this.finished=this.ended=this.ending=this.needDrain=this.finalCalled=!1;this.decodeStrings=!1!==T.decodeStrings;this.defaultEncoding=T.defaultEncoding||"utf8";this.length=0;this.writing=!1;this.corked=0;this.sync=!0;this.bufferProcessing=!1;this.onwrite=function(fa){!function(oa,gb){var zb=oa._writableState,
va=zb.sync,ma=zb.writecb;if("function"!=typeof ma)throw new W;(function(ta){ta.writing=!1;ta.writecb=null;ta.length-=ta.writelen;ta.writelen=0}(zb),gb)?!function(ta,Na,Kb,kc,Vb){--Na.pendingcb;Kb?(l.nextTick(Vb,kc),l.nextTick(a,ta,Na),ta._writableState.errorEmitted=!0,aa(ta,kc)):(Vb(kc),ta._writableState.errorEmitted=!0,aa(ta,kc),a(ta,Na))}(oa,zb,va,gb,ma):((gb=e(zb)||oa.destroyed)||zb.corked||zb.bufferProcessing||!zb.bufferedRequest||b(oa,zb),va?l.nextTick(n,oa,zb,gb,ma):n(oa,zb,gb,ma))}(U,fa)};
this.writecb=null;this.writelen=0;this.lastBufferedRequest=this.bufferedRequest=null;this.pendingcb=0;this.errorEmitted=this.prefinished=!1;this.emitClose=!1!==T.emitClose;this.autoDestroy=!!T.autoDestroy;this.bufferedRequestCount=0;this.corkedRequestsFree=new d(this)}function f(T){var U=this instanceof(g=g||PF());if(!U&&!E.call(f,this))return new f(T);this._writableState=new h(T,this,U);this.writable=!0;T&&("function"==typeof T.write&&(this._write=T.write),"function"==typeof T.writev&&(this._writev=
T.writev),"function"==typeof T.destroy&&(this._destroy=T.destroy),"function"==typeof T.final&&(this._final=T.final));v.call(this)}function k(T,U,pa,fa,oa,gb,zb){U.writelen=fa;U.writecb=zb;U.writing=!0;U.sync=!0;U.destroyed?U.onwrite(new ea("write")):pa?T._writev(oa,U.onwrite):T._write(oa,gb,U.onwrite);U.sync=!1}function n(T,U,pa,fa){pa||(0===U.length&&U.needDrain&&(U.needDrain=!1,T.emit("drain")),!0);U.pendingcb--;fa();a(T,U)}function b(T,U){U.bufferProcessing=!0;var pa=U.bufferedRequest;if(T._writev&&
pa&&pa.next){var fa=Array(U.bufferedRequestCount),oa=U.corkedRequestsFree;oa.entry=pa;for(var gb=0,zb=!0;pa;)fa[gb]=pa,pa.isBuf||(zb=!1),pa=pa.next,gb+=1;fa.allBuffers=zb;k(T,U,!0,U.length,fa,"",oa.finish);U.pendingcb++;U.lastBufferedRequest=null;oa.next?(U.corkedRequestsFree=oa.next,oa.next=null):U.corkedRequestsFree=new d(U);U.bufferedRequestCount=0}else{for(;pa&&(fa=pa.chunk,k(T,U,!1,U.objectMode?1:fa.length,fa,pa.encoding,pa.callback),pa=pa.next,U.bufferedRequestCount--,!U.writing););null===pa&&
(U.lastBufferedRequest=null)}U.bufferedRequest=pa;U.bufferProcessing=!1}function e(T){return T.ending&&0===T.length&&null===T.bufferedRequest&&!T.finished&&!T.writing}function m(T,U){T._final(function(pa){U.pendingcb--;pa&&aa(T,pa);U.prefinished=!0;T.emit("prefinish");a(T,U)})}function a(T,U){var pa=e(U),fa;if(fa=pa)U.prefinished||U.finalCalled||("function"!=typeof T._final||U.destroyed?(U.prefinished=!0,T.emit("prefinish")):(U.pendingcb++,U.finalCalled=!0,l.nextTick(m,T,U))),fa=(!0,0===U.pendingcb&&
(U.finished=!0,T.emit("finish"),U.autoDestroy));fa&&(U=T._readableState,(!U||U.autoDestroy&&U.endEmitted)&&T.destroy());return pa}if(x0)return SQ;x0=!0;var g,l=tj;SQ=f;f.WritableState=h;var r={deprecate:y0},v=lK,y=Mi.Buffer,A=Sda.Uint8Array||function(){},E,F=u0,H=v0.getHighWaterMark,I=tt.codes,M=I.ERR_INVALID_ARG_TYPE,N=I.ERR_METHOD_NOT_IMPLEMENTED,W=I.ERR_MULTIPLE_CALLBACK,X=I.ERR_STREAM_CANNOT_PIPE,ea=I.ERR_STREAM_DESTROYED,Aa=I.ERR_STREAM_NULL_VALUES,Ma=I.ERR_STREAM_WRITE_AFTER_END,K=I.ERR_UNKNOWN_ENCODING,
aa=F.errorOrDestroy;return ti(f,v),h.prototype.getBuffer=function(){for(var T=this.bufferedRequest,U=[];T;)U.push(T),T=T.next;return U},function(){try{Object.defineProperty(h.prototype,"buffer",{get:r.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(T){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(E=Function.prototype[Symbol.hasInstance],Object.defineProperty(f,
Symbol.hasInstance,{value:function(T){return!!E.call(this,T)||this===f&&T&&T._writableState instanceof h}})):E=function(T){return T instanceof this},f.prototype.pipe=function(){aa(this,new X)},f.prototype.write=function(T,U,pa){var fa,oa=this._writableState,gb=!1,zb=!oa.objectMode&&(fa=T,y.isBuffer(fa)||fa instanceof A);return zb&&!y.isBuffer(T)&&(T=y.from(T)),"function"==typeof U&&(pa=U,U=null),zb?U="buffer":U||(U=oa.defaultEncoding),"function"!=typeof pa&&(pa=c),oa.ending?function(va,ma){var ta=
new Ma;aa(va,ta);l.nextTick(ma,ta)}(this,pa):(zb||function(va,ma,ta,Na){var Kb;return null===ta?Kb=new Aa:"string"==typeof ta||ma.objectMode||(Kb=new M("chunk",["string","Buffer"],ta)),!Kb||(aa(va,Kb),l.nextTick(Na,Kb),!1)}(this,oa,T,pa))&&(oa.pendingcb++,gb=function(va,ma,ta,Na,Kb,kc){if(!ta){var Vb=Na;ma.objectMode||!1===ma.decodeStrings||"string"!=typeof Vb||(Vb=y.from(Vb,Kb));Na!==Vb&&(ta=!0,Kb="buffer",Na=Vb)}var jc=ma.objectMode?1:Na.length;ma.length+=jc;(Vb=ma.length<ma.highWaterMark)||(ma.needDrain=
!0);ma.writing||ma.corked?(va=ma.lastBufferedRequest,ma.lastBufferedRequest={chunk:Na,encoding:Kb,isBuf:ta,callback:kc,next:null},va?va.next=ma.lastBufferedRequest:ma.bufferedRequest=ma.lastBufferedRequest,ma.bufferedRequestCount+=1):k(va,ma,!1,jc,Na,Kb,kc);return Vb}(this,oa,zb,T,U,pa)),gb},f.prototype.cork=function(){this._writableState.corked++},f.prototype.uncork=function(){var T=this._writableState;T.corked&&(T.corked--,T.writing||T.corked||T.bufferProcessing||!T.bufferedRequest||b(this,T))},
f.prototype.setDefaultEncoding=function(T){if("string"==typeof T&&(T=T.toLowerCase()),!(-1<"hex utf8 utf-8 ascii binary base64 ucs2 ucs-2 utf16le utf-16le raw".split(" ").indexOf((T+"").toLowerCase())))throw new K(T);return this._writableState.defaultEncoding=T,this},Object.defineProperty(f.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(f.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),
f.prototype._write=function(T,U,pa){pa(new N("_write()"))},f.prototype._writev=null,f.prototype.end=function(T,U,pa){var fa=this._writableState;"function"==typeof T?(pa=T,T=null,U=null):"function"==typeof U&&(pa=U,U=null);null!=T&&this.write(T,U);fa.corked&&(fa.corked=1,this.uncork());fa.ending||(T=pa,fa.ending=!0,a(this,fa),T&&(fa.finished?l.nextTick(T):this.once("finish",T)),fa.ended=!0,this.writable=!1);return this},Object.defineProperty(f.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),
Object.defineProperty(f.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(T){this._writableState&&(this._writableState.destroyed=T)}}),f.prototype.destroy=F.destroy,f.prototype._undestroy=F.undestroy,f.prototype._destroy=function(T,U){U(T)},SQ}function PF(){function d(a){if(!(this instanceof d))return new d(a);n.call(this,a);b.call(this,a);this.allowHalfOpen=!0;a&&(!1===a.readable&&(this.readable=!1),!1===a.writable&&
(this.writable=!1),!1===a.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",c)))}function c(){this._writableState.ended||f.nextTick(h,this)}function h(a){a.end()}if(z0)return TQ;z0=!0;var f=tj,k=Object.keys||function(a){var g=[],l;for(l in a)g.push(l);return g};TQ=d;var n=s0(),b=Rda();ti(d,n);k=k(b.prototype);for(var e=0;e<k.length;e++){var m=k[e];d.prototype[m]||(d.prototype[m]=b.prototype[m])}return Object.defineProperty(d.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),
Object.defineProperty(d.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(d.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(d.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(a){void 0!==this._readableState&&
void 0!==this._writableState&&(this._readableState.destroyed=a,this._writableState.destroyed=a)}}),TQ}function Tda(){}function A0(d,c){var h=Object.keys(d);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(d);c&&(f=f.filter(function(k){return Object.getOwnPropertyDescriptor(d,k).enumerable}));h.push.apply(h,f)}return h}function Uda(d,c){for(var h=0;h<c.length;h++){var f=c[h];f.enumerable=f.enumerable||!1;f.configurable=!0;"value"in f&&(f.writable=!0);Object.defineProperty(d,f.key,
f)}}function B0(d,c){UQ(d,c);mK(d)}function mK(d){d._writableState&&!d._writableState.emitClose||d._readableState&&!d._readableState.emitClose||d.emit("close")}function UQ(d,c){d.emit("error",c)}function ay(d,c,h){return c in d?Object.defineProperty(d,c,{value:h,enumerable:!0,configurable:!0,writable:!0}):d[c]=h,d}function by(d,c){return{value:d,done:c}}function Vda(d){var c=d[cy];if(null!==c){var h=d[rA].read();null!==h&&(d[sA]=null,d[cy]=null,d[tA]=null,c(by(h,!1)))}}function Wda(d){C0.nextTick(Vda,
d)}function Xda(){function d(va,ma,ta){F=F||nK();va=va||{};"boolean"!=typeof ta&&(ta=ma instanceof F);this.objectMode=!!va.objectMode;ta&&(this.objectMode=this.objectMode||!!va.readableObjectMode);this.highWaterMark=aa(this,va,"readableHighWaterMark",ta);this.buffer=new K;this.length=0;this.pipes=null;this.pipesCount=0;this.flowing=null;this.reading=this.endEmitted=this.ended=!1;this.sync=!0;this.resumeScheduled=this.readableListening=this.emittedReadable=this.needReadable=!1;this.paused=!0;this.emitClose=
!1!==va.emitClose;this.autoDestroy=!!va.autoDestroy;this.destroyed=!1;this.defaultEncoding=va.defaultEncoding||"utf8";this.awaitDrain=0;this.readingMore=!1;this.encoding=this.decoder=null;va.encoding&&(ea||(ea=aD.StringDecoder),this.decoder=new ea(va.encoding),this.encoding=va.encoding)}function c(va){if(F=F||nK(),!(this instanceof c))return new c(va);this._readableState=new d(va,this,this instanceof F);this.readable=!0;va&&("function"==typeof va.read&&(this._read=va.read),"function"==typeof va.destroy&&
(this._destroy=va.destroy));I.call(this)}function h(va,ma,ta,Na,Kb){X("readableAddChunk",ma);var kc,Vb=va._readableState;if(null===ma)Vb.reading=!1,function(jc,Qc){if(X("onEofChunk"),!Qc.ended){if(Qc.decoder){var Pb=Qc.decoder.end();Pb&&Pb.length&&(Qc.buffer.push(Pb),Qc.length+=Qc.objectMode?1:Pb.length)}Qc.ended=!0;Qc.sync?n(jc):(Qc.needReadable=!1,Qc.emittedReadable||(Qc.emittedReadable=!0,b(jc)))}}(va,Vb);else if(Kb||(kc=function(jc,Qc){var Pb;var xd=Qc;M.isBuffer(xd)||xd instanceof N||"string"==
typeof Qc||void 0===Qc||jc.objectMode||(Pb=new U("chunk",["string","Buffer","Uint8Array"],Qc));return Pb}(Vb,ma)),kc)gb(va,kc);else if(Vb.objectMode||ma&&0<ma.length)if("string"==typeof ma||Vb.objectMode||Object.getPrototypeOf(ma)===M.prototype||(ma=M.from(ma)),Na)Vb.endEmitted?gb(va,new oa):f(va,Vb,ma,!0);else if(Vb.ended)gb(va,new pa);else{if(Vb.destroyed)return!1;Vb.reading=!1;Vb.decoder&&!ta?(ma=Vb.decoder.write(ma),Vb.objectMode||0!==ma.length?f(va,Vb,ma,!1):e(va,Vb)):f(va,Vb,ma,!1)}else Na||
(Vb.reading=!1,e(va,Vb));return!Vb.ended&&(Vb.length<Vb.highWaterMark||0===Vb.length)}function f(va,ma,ta,Na){ma.flowing&&0===ma.length&&!ma.sync?(ma.awaitDrain=0,va.emit("data",ta)):(ma.length+=ma.objectMode?1:ta.length,Na?ma.buffer.unshift(ta):ma.buffer.push(ta),ma.needReadable&&n(va));e(va,ma)}function k(va,ma){if(0>=va||0===ma.length&&ma.ended)va=0;else if(ma.objectMode)va=1;else if(va!=va)va=ma.flowing&&ma.length?ma.buffer.head.data.length:ma.length;else{if(va>ma.highWaterMark){var ta=va;var Na=
(1073741824<=ta?ta=1073741824:(ta--,ta|=ta>>>1,ta|=ta>>>2,ta|=ta>>>4,ta|=ta>>>8,ta|=ta>>>16,ta++),ta);ma.highWaterMark=Na}va=va<=ma.length?va:ma.ended?ma.length:(ma.needReadable=!0,0)}return va}function n(va){var ma=va._readableState;X("emitReadable",ma.needReadable,ma.emittedReadable);ma.needReadable=!1;ma.emittedReadable||(X("emitReadable",ma.flowing),ma.emittedReadable=!0,H.nextTick(b,va))}function b(va){var ma=va._readableState;X("emitReadable_",ma.destroyed,ma.length,ma.ended);ma.destroyed||
!ma.length&&!ma.ended||(va.emit("readable"),ma.emittedReadable=!1);ma.needReadable=!ma.flowing&&!ma.ended&&ma.length<=ma.highWaterMark;r(va)}function e(va,ma){ma.readingMore||(ma.readingMore=!0,H.nextTick(m,va,ma))}function m(va,ma){for(;!ma.reading&&!ma.ended&&(ma.length<ma.highWaterMark||ma.flowing&&0===ma.length);){var ta=ma.length;if(X("maybeReadMore read 0"),va.read(0),ta===ma.length)break}ma.readingMore=!1}function a(va){var ma=va._readableState;ma.readableListening=0<va.listenerCount("readable");
ma.resumeScheduled&&!ma.paused?ma.flowing=!0:0<va.listenerCount("data")&&va.resume()}function g(va){X("readable nexttick read 0");va.read(0)}function l(va,ma){X("resume",ma.reading);ma.reading||va.read(0);ma.resumeScheduled=!1;va.emit("resume");r(va);ma.flowing&&!ma.reading&&va.read(0)}function r(va){var ma=va._readableState;for(X("flow",ma.flowing);ma.flowing&&null!==va.read(););}function v(va,ma){return 0===ma.length?null:(ma.objectMode?ta=ma.buffer.shift():!va||va>=ma.length?(ta=ma.decoder?ma.buffer.join(""):
1===ma.buffer.length?ma.buffer.first():ma.buffer.concat(ma.length),ma.buffer.clear()):ta=ma.buffer.consume(va,ma.decoder),ta);var ta}function y(va){var ma=va._readableState;X("endReadable",ma.endEmitted);ma.endEmitted||(ma.ended=!0,H.nextTick(A,ma,va))}function A(va,ma){if(X("endReadableNT",va.endEmitted,va.length),!va.endEmitted&&0===va.length&&(va.endEmitted=!0,ma.readable=!1,ma.emit("end"),va.autoDestroy))va=ma._writableState,(!va||va.autoDestroy&&va.finished)&&ma.destroy()}function E(va,ma){for(var ta=
0,Na=va.length;ta<Na;ta++)if(va[ta]===ma)return ta;return-1}if(D0)return VQ;D0=!0;var F,H=tj;VQ=c;c.ReadableState=d;$u.EventEmitter;var I=lK,M=Mi.Buffer,N=Yda.Uint8Array||function(){},W=Vh;var X=W&&W.debuglog?W.debuglog("stream"):function(){};var ea,Aa,Ma,K=Zda;W=E0;var aa=F0.getHighWaterMark,T=tt.codes,U=T.ERR_INVALID_ARG_TYPE,pa=T.ERR_STREAM_PUSH_AFTER_EOF,fa=T.ERR_METHOD_NOT_IMPLEMENTED,oa=T.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;ti(c,I);var gb=W.errorOrDestroy,zb=["error","close","destroy","pause",
"resume"];Object.defineProperty(c.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(va){this._readableState&&(this._readableState.destroyed=va)}});c.prototype.destroy=W.destroy;c.prototype._undestroy=W.undestroy;c.prototype._destroy=function(va,ma){ma(va)};c.prototype.push=function(va,ma){var ta,Na=this._readableState;return Na.objectMode?ta=!0:"string"==typeof va&&((ma=ma||Na.defaultEncoding)!==Na.encoding&&(va=M.from(va,
ma),ma=""),ta=!0),h(this,va,ma,!1,ta)};c.prototype.unshift=function(va){return h(this,va,null,!0,!1)};c.prototype.isPaused=function(){return!1===this._readableState.flowing};c.prototype.setEncoding=function(va){ea||(ea=aD.StringDecoder);va=new ea(va);this._readableState.decoder=va;this._readableState.encoding=this._readableState.decoder.encoding;for(var ma=this._readableState.buffer.head,ta="";null!==ma;)ta+=va.write(ma.data),ma=ma.next;return this._readableState.buffer.clear(),""!==ta&&this._readableState.buffer.push(ta),
this._readableState.length=ta.length,this};return c.prototype.read=function(va){X("read",va);va=parseInt(va,10);var ma=this._readableState,ta=va;if(0!==va&&(ma.emittedReadable=!1),0===va&&ma.needReadable&&((0!==ma.highWaterMark?ma.length>=ma.highWaterMark:0<ma.length)||ma.ended))return X("read: emitReadable",ma.length,ma.ended),0===ma.length&&ma.ended?y(this):n(this),null;if(0===(va=k(va,ma))&&ma.ended)return 0===ma.length&&y(this),null;var Na,Kb=ma.needReadable;return X("need readable",Kb),(0===
ma.length||ma.length-va<ma.highWaterMark)&&X("length less than watermark",Kb=!0),ma.ended||ma.reading?X("reading or ended",!1):Kb&&(X("do read"),ma.reading=!0,ma.sync=!0,0===ma.length&&(ma.needReadable=!0),this._read(ma.highWaterMark),ma.sync=!1,ma.reading||(va=k(ta,ma))),null===(Na=0<va?v(va,ma):null)?(ma.needReadable=ma.length<=ma.highWaterMark,va=0):(ma.length-=va,ma.awaitDrain=0),0===ma.length&&(ma.ended||(ma.needReadable=!0),ta!==va&&ma.ended&&y(this)),null!==Na&&this.emit("data",Na),Na},c.prototype._read=
function(va){gb(this,new fa("_read()"))},c.prototype.pipe=function(va,ma){function ta(Fa,Sa){X("onunpipe");Fa===Pb&&Sa&&!1===Sa.hasUnpiped&&(Sa.hasUnpiped=!0,X("cleanup"),va.removeListener("close",Vb),va.removeListener("finish",jc),va.removeListener("drain",Td),va.removeListener("error",kc),va.removeListener("unpipe",ta),Pb.removeListener("end",Na),Pb.removeListener("end",Qc),Pb.removeListener("data",Kb),ka=!0,!xd.awaitDrain||va._writableState&&!va._writableState.needDrain||Td())}function Na(){X("onend");
va.end()}function Kb(Fa){X("ondata");Fa=va.write(Fa);X("dest.write",Fa);!1===Fa&&((1===xd.pipesCount&&xd.pipes===va||1<xd.pipesCount&&-1!==E(xd.pipes,va))&&!ka&&(X("false write response, pause",xd.awaitDrain),xd.awaitDrain++),Pb.pause())}function kc(Fa){X("onerror",Fa);Qc();va.removeListener("error",kc);0===va.listeners("error").length&&gb(va,Fa)}function Vb(){va.removeListener("finish",jc);Qc()}function jc(){X("onfinish");va.removeListener("close",Vb);Qc()}function Qc(){X("unpipe");Pb.unpipe(va)}
var Pb=this,xd=this._readableState;switch(xd.pipesCount){case 0:xd.pipes=va;break;case 1:xd.pipes=[xd.pipes,va];break;default:xd.pipes.push(va)}xd.pipesCount+=1;X("pipe count=%d opts=%j",xd.pipesCount,ma);ma=ma&&!1===ma.end||va===H.stdout||va===H.stderr?Qc:Na;xd.endEmitted?H.nextTick(ma):Pb.once("end",ma);va.on("unpipe",ta);var Td=function(Fa){return function(){var Sa=Fa._readableState;X("pipeOnDrain",Sa.awaitDrain);Sa.awaitDrain&&Sa.awaitDrain--;0===Sa.awaitDrain&&Fa.listeners("data").length&&(Sa.flowing=
!0,r(Fa))}}(Pb);va.on("drain",Td);var ka=!1;return Pb.on("data",Kb),function(Fa,Sa,wb){if("function"==typeof Fa.prependListener)return Fa.prependListener(Sa,wb);Fa._events&&Fa._events[Sa]?Array.isArray(Fa._events[Sa])?Fa._events[Sa].unshift(wb):Fa._events[Sa]=[wb,Fa._events[Sa]]:Fa.on(Sa,wb)}(va,"error",kc),va.once("close",Vb),va.once("finish",jc),va.emit("pipe",Pb),xd.flowing||(X("pipe resume"),Pb.resume()),va},c.prototype.unpipe=function(va){var ma=this._readableState,ta={hasUnpiped:!1};if(0===
ma.pipesCount)return this;if(1===ma.pipesCount)return va&&va!==ma.pipes||(va||(va=ma.pipes),ma.pipes=null,ma.pipesCount=0,ma.flowing=!1,va&&va.emit("unpipe",this,ta)),this;if(!va){va=ma.pipes;ta=ma.pipesCount;ma.pipes=null;ma.pipesCount=0;ma.flowing=!1;for(ma=0;ma<ta;ma++)va[ma].emit("unpipe",this,{hasUnpiped:!1});return this}var Na=E(ma.pipes,va);return-1===Na||(ma.pipes.splice(Na,1),--ma.pipesCount,1===ma.pipesCount&&(ma.pipes=ma.pipes[0]),va.emit("unpipe",this,ta)),this},c.prototype.on=function(va,
ma){ma=I.prototype.on.call(this,va,ma);var ta=this._readableState;return"data"===va?(ta.readableListening=0<this.listenerCount("readable"),!1!==ta.flowing&&this.resume()):"readable"===va&&(ta.endEmitted||ta.readableListening||(ta.readableListening=ta.needReadable=!0,ta.flowing=!1,ta.emittedReadable=!1,X("on readable",ta.length,ta.reading),ta.length?n(this):ta.reading||H.nextTick(g,this))),ma},c.prototype.addListener=c.prototype.on,c.prototype.removeListener=function(va,ma){ma=I.prototype.removeListener.call(this,
va,ma);return"readable"===va&&H.nextTick(a,this),ma},c.prototype.removeAllListeners=function(va){var ma=I.prototype.removeAllListeners.apply(this,arguments);return"readable"!==va&&void 0!==va||H.nextTick(a,this),ma},c.prototype.resume=function(){var va=this._readableState;va.flowing||(X("resume"),va.flowing=!va.readableListening,va.resumeScheduled||(va.resumeScheduled=!0,H.nextTick(l,this,va)));return va.paused=!1,this},c.prototype.pause=function(){return X("call pause flowing=%j",this._readableState.flowing),
!1!==this._readableState.flowing&&(X("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},c.prototype.wrap=function(va){var ma=this,ta=this._readableState,Na=!1,Kb;for(Kb in va.on("end",function(){if(X("wrapped end"),ta.decoder&&!ta.ended){var kc=ta.decoder.end();kc&&kc.length&&ma.push(kc)}ma.push(null)}),va.on("data",function(kc){(X("wrapped data"),ta.decoder&&(kc=ta.decoder.write(kc)),ta.objectMode&&null==kc)||(ta.objectMode||kc&&kc.length)&&(ma.push(kc)||
(Na=!0,va.pause()))}),va)void 0===this[Kb]&&"function"==typeof va[Kb]&&(this[Kb]=function(kc){return function(){return va[kc].apply(va,arguments)}}(Kb));for(Kb=0;Kb<zb.length;Kb++)va.on(zb[Kb],this.emit.bind(this,zb[Kb]));return this._read=function(kc){X("wrapped _read",kc);Na&&(Na=!1,va.resume())},this},"function"==typeof Symbol&&(c.prototype[Symbol.asyncIterator]=function(){return void 0===Aa&&(Aa=$da),Aa(this)}),Object.defineProperty(c.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),
Object.defineProperty(c.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(c.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(va){this._readableState&&(this._readableState.flowing=va)}}),c._fromList=v,Object.defineProperty(c.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(c.from=function(va,
ma){return void 0===Ma&&(Ma=w0),Ma(c,va,ma)}),VQ}function G0(){function d(T){var U=this;this.entry=this.next=null;this.finish=function(){var pa=U.entry;for(U.entry=null;pa;){var fa=pa.callback;T.pendingcb--;fa(void 0);pa=pa.next}T.corkedRequestsFree.next=U;!0}}function c(){}function h(T,U,pa){g=g||nK();T=T||{};"boolean"!=typeof pa&&(pa=U instanceof g);this.objectMode=!!T.objectMode;pa&&(this.objectMode=this.objectMode||!!T.writableObjectMode);this.highWaterMark=H(this,T,"writableHighWaterMark",pa);
this.destroyed=this.finished=this.ended=this.ending=this.needDrain=this.finalCalled=!1;this.decodeStrings=!1!==T.decodeStrings;this.defaultEncoding=T.defaultEncoding||"utf8";this.length=0;this.writing=!1;this.corked=0;this.sync=!0;this.bufferProcessing=!1;this.onwrite=function(fa){!function(oa,gb){var zb=oa._writableState,va=zb.sync,ma=zb.writecb;if("function"!=typeof ma)throw new W;(function(ta){ta.writing=!1;ta.writecb=null;ta.length-=ta.writelen;ta.writelen=0}(zb),gb)?!function(ta,Na,Kb,kc,Vb){--Na.pendingcb;
Kb?(l.nextTick(Vb,kc),l.nextTick(a,ta,Na),ta._writableState.errorEmitted=!0,aa(ta,kc)):(Vb(kc),ta._writableState.errorEmitted=!0,aa(ta,kc),a(ta,Na))}(oa,zb,va,gb,ma):((gb=e(zb)||oa.destroyed)||zb.corked||zb.bufferProcessing||!zb.bufferedRequest||b(oa,zb),va?l.nextTick(n,oa,zb,gb,ma):n(oa,zb,gb,ma))}(U,fa)};this.writecb=null;this.writelen=0;this.lastBufferedRequest=this.bufferedRequest=null;this.pendingcb=0;this.errorEmitted=this.prefinished=!1;this.emitClose=!1!==T.emitClose;this.autoDestroy=!!T.autoDestroy;
this.bufferedRequestCount=0;this.corkedRequestsFree=new d(this)}function f(T){var U=this instanceof(g=g||nK());if(!U&&!E.call(f,this))return new f(T);this._writableState=new h(T,this,U);this.writable=!0;T&&("function"==typeof T.write&&(this._write=T.write),"function"==typeof T.writev&&(this._writev=T.writev),"function"==typeof T.destroy&&(this._destroy=T.destroy),"function"==typeof T.final&&(this._final=T.final));v.call(this)}function k(T,U,pa,fa,oa,gb,zb){U.writelen=fa;U.writecb=zb;U.writing=!0;
U.sync=!0;U.destroyed?U.onwrite(new ea("write")):pa?T._writev(oa,U.onwrite):T._write(oa,gb,U.onwrite);U.sync=!1}function n(T,U,pa,fa){pa||(0===U.length&&U.needDrain&&(U.needDrain=!1,T.emit("drain")),!0);U.pendingcb--;fa();a(T,U)}function b(T,U){U.bufferProcessing=!0;var pa=U.bufferedRequest;if(T._writev&&pa&&pa.next){var fa=Array(U.bufferedRequestCount),oa=U.corkedRequestsFree;oa.entry=pa;for(var gb=0,zb=!0;pa;)fa[gb]=pa,pa.isBuf||(zb=!1),pa=pa.next,gb+=1;fa.allBuffers=zb;k(T,U,!0,U.length,fa,"",
oa.finish);U.pendingcb++;U.lastBufferedRequest=null;oa.next?(U.corkedRequestsFree=oa.next,oa.next=null):U.corkedRequestsFree=new d(U);U.bufferedRequestCount=0}else{for(;pa&&(fa=pa.chunk,k(T,U,!1,U.objectMode?1:fa.length,fa,pa.encoding,pa.callback),pa=pa.next,U.bufferedRequestCount--,!U.writing););null===pa&&(U.lastBufferedRequest=null)}U.bufferedRequest=pa;U.bufferProcessing=!1}function e(T){return T.ending&&0===T.length&&null===T.bufferedRequest&&!T.finished&&!T.writing}function m(T,U){T._final(function(pa){U.pendingcb--;
pa&&aa(T,pa);U.prefinished=!0;T.emit("prefinish");a(T,U)})}function a(T,U){var pa=e(U),fa;if(fa=pa)U.prefinished||U.finalCalled||("function"!=typeof T._final||U.destroyed?(U.prefinished=!0,T.emit("prefinish")):(U.pendingcb++,U.finalCalled=!0,l.nextTick(m,T,U))),fa=(!0,0===U.pendingcb&&(U.finished=!0,T.emit("finish"),U.autoDestroy));fa&&(U=T._readableState,(!U||U.autoDestroy&&U.endEmitted)&&T.destroy());return pa}if(H0)return WQ;H0=!0;var g,l=tj;WQ=f;f.WritableState=h;var r={deprecate:y0},v=lK,y=Mi.Buffer,
A=aea.Uint8Array||function(){},E,F=E0,H=F0.getHighWaterMark,I=tt.codes,M=I.ERR_INVALID_ARG_TYPE,N=I.ERR_METHOD_NOT_IMPLEMENTED,W=I.ERR_MULTIPLE_CALLBACK,X=I.ERR_STREAM_CANNOT_PIPE,ea=I.ERR_STREAM_DESTROYED,Aa=I.ERR_STREAM_NULL_VALUES,Ma=I.ERR_STREAM_WRITE_AFTER_END,K=I.ERR_UNKNOWN_ENCODING,aa=F.errorOrDestroy;return ti(f,v),h.prototype.getBuffer=function(){for(var T=this.bufferedRequest,U=[];T;)U.push(T),T=T.next;return U},function(){try{Object.defineProperty(h.prototype,"buffer",{get:r.deprecate(function(){return this.getBuffer()},
"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(T){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(E=Function.prototype[Symbol.hasInstance],Object.defineProperty(f,Symbol.hasInstance,{value:function(T){return!!E.call(this,T)||this===f&&T&&T._writableState instanceof h}})):E=function(T){return T instanceof this},f.prototype.pipe=function(){aa(this,new X)},f.prototype.write=function(T,U,pa){var fa,
oa=this._writableState,gb=!1,zb=!oa.objectMode&&(fa=T,y.isBuffer(fa)||fa instanceof A);return zb&&!y.isBuffer(T)&&(T=y.from(T)),"function"==typeof U&&(pa=U,U=null),zb?U="buffer":U||(U=oa.defaultEncoding),"function"!=typeof pa&&(pa=c),oa.ending?function(va,ma){var ta=new Ma;aa(va,ta);l.nextTick(ma,ta)}(this,pa):(zb||function(va,ma,ta,Na){var Kb;return null===ta?Kb=new Aa:"string"==typeof ta||ma.objectMode||(Kb=new M("chunk",["string","Buffer"],ta)),!Kb||(aa(va,Kb),l.nextTick(Na,Kb),!1)}(this,oa,T,
pa))&&(oa.pendingcb++,gb=function(va,ma,ta,Na,Kb,kc){if(!ta){var Vb=Na;ma.objectMode||!1===ma.decodeStrings||"string"!=typeof Vb||(Vb=y.from(Vb,Kb));Na!==Vb&&(ta=!0,Kb="buffer",Na=Vb)}var jc=ma.objectMode?1:Na.length;ma.length+=jc;(Vb=ma.length<ma.highWaterMark)||(ma.needDrain=!0);ma.writing||ma.corked?(va=ma.lastBufferedRequest,ma.lastBufferedRequest={chunk:Na,encoding:Kb,isBuf:ta,callback:kc,next:null},va?va.next=ma.lastBufferedRequest:ma.bufferedRequest=ma.lastBufferedRequest,ma.bufferedRequestCount+=
1):k(va,ma,!1,jc,Na,Kb,kc);return Vb}(this,oa,zb,T,U,pa)),gb},f.prototype.cork=function(){this._writableState.corked++},f.prototype.uncork=function(){var T=this._writableState;T.corked&&(T.corked--,T.writing||T.corked||T.bufferProcessing||!T.bufferedRequest||b(this,T))},f.prototype.setDefaultEncoding=function(T){if("string"==typeof T&&(T=T.toLowerCase()),!(-1<"hex utf8 utf-8 ascii binary base64 ucs2 ucs-2 utf16le utf-16le raw".split(" ").indexOf((T+"").toLowerCase())))throw new K(T);return this._writableState.defaultEncoding=
T,this},Object.defineProperty(f.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(f.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),f.prototype._write=function(T,U,pa){pa(new N("_write()"))},f.prototype._writev=null,f.prototype.end=function(T,U,pa){var fa=this._writableState;"function"==typeof T?(pa=T,T=null,U=null):"function"==typeof U&&(pa=U,U=null);
null!=T&&this.write(T,U);fa.corked&&(fa.corked=1,this.uncork());fa.ending||(T=pa,fa.ending=!0,a(this,fa),T&&(fa.finished?l.nextTick(T):this.once("finish",T)),fa.ended=!0,this.writable=!1);return this},Object.defineProperty(f.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(f.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(T){this._writableState&&(this._writableState.destroyed=
T)}}),f.prototype.destroy=F.destroy,f.prototype._undestroy=F.undestroy,f.prototype._destroy=function(T,U){U(T)},WQ}function nK(){function d(a){if(!(this instanceof d))return new d(a);n.call(this,a);b.call(this,a);this.allowHalfOpen=!0;a&&(!1===a.readable&&(this.readable=!1),!1===a.writable&&(this.writable=!1),!1===a.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",c)))}function c(){this._writableState.ended||f.nextTick(h,this)}function h(a){a.end()}if(I0)return XQ;I0=!0;var f=tj,k=Object.keys||
function(a){var g=[],l;for(l in a)g.push(l);return g};XQ=d;var n=Xda(),b=G0();ti(d,n);k=k(b.prototype);for(var e=0;e<k.length;e++){var m=k[e];d.prototype[m]||(d.prototype[m]=b.prototype[m])}return Object.defineProperty(d.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(d.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(d.prototype,
"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(d.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(a){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=a,this._writableState.destroyed=a)}}),XQ}function bea(d,c){var h=this._transformState;h.transforming=!1;var f=
h.writecb;if(null===f)return this.emit("error",new cea);h.writechunk=null;h.writecb=null;null!=c&&this.push(c);f(d);d=this._readableState;d.reading=!1;(d.needReadable||d.length<d.highWaterMark)&&this._read(d.highWaterMark)}function av(d){if(!(this instanceof av))return new av(d);oK.call(this,d);this._transformState={afterTransform:bea.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null};this._readableState.needReadable=!0;this._readableState.sync=!1;d&&("function"==
typeof d.transform&&(this._transform=d.transform),"function"==typeof d.flush&&(this._flush=d.flush));this.on("prefinish",dea)}function dea(){var d=this;"function"!=typeof this._flush||this._readableState.destroyed?J0(this,null,null):this._flush(function(c,h){J0(d,c,h)})}function J0(d,c,h){if(c)return d.emit("error",c);if(null!=h&&d.push(h),d._writableState.length)throw new eea;if(d._transformState.transforming)throw new fea;return d.push(null)}function QF(d){if(!(this instanceof QF))return new QF(d);
K0.call(this,d)}function L0(d){if(d)throw d;}function gea(d,c,h,f){f=function(b){var e=!1;return function(){e||(e=!0,b.apply(void 0,arguments))}}(f);var k=!1;d.on("close",function(){k=!0});void 0===YQ&&(YQ=ZQ);YQ(d,{readable:c,writable:h},function(b){if(b)return f(b);k=!0;f()});var n=!1;return function(b){if(!k&&!n)return n=!0,d.setHeader&&"function"==typeof d.abort?d.abort():"function"==typeof d.destroy?d.destroy():(f(b||new hea("pipe")),void 0)}}function M0(d){d()}function iea(d,c){return d.pipe(c)}
function cs(){$Q.call(this||aR)}function pK(){}function xw(d){N0.call(this);this._block=qK.allocUnsafe(d);this._blockSize=d;this._blockOffset=0;this._length=[0,0,0,0];this._finalized=!1}function bD(){O0.call(this,64);this._a=1732584193;this._b=4023233417;this._c=2562383102;this._d=271733878}function rK(d,c){return d<<c|d>>>32-c}function $o(d,c,h,f,k,n,b){return rK(d+(c&h|~c&f)+k+n|0,b)+c|0}function ap(d,c,h,f,k,n,b){return rK(d+(c&f|h&~f)+k+n|0,b)+c|0}function bp(d,c,h,f,k,n,b){return rK(d+(c^h^f)+
k+n|0,b)+c|0}function cp(d,c,h,f,k,n,b){return rK(d+(h^(c|~f))+k+n|0,b)+c|0}function cD(){P0.call(this,64);this._a=1732584193;this._b=4023233417;this._c=2562383102;this._d=271733878;this._e=3285377520}function ds(d,c){return d<<c|d>>>32-c}function yw(d,c){(this||ul)._block=Q0.alloc(d);(this||ul)._finalSize=c;(this||ul)._blockSize=d;(this||ul)._len=0}function dD(){this.init();(this||li)._w=jea;R0.call(this||li,64,56)}function RF(){this.init();(this||Bk)._w=kea;S0.call(this||Bk,64,56)}function SF(){this.init();
(this||Ck)._w=lea;T0.call(this||Ck,64,56)}function sK(){this.init();(this||Zn)._w=mea;nea.call(this||Zn,64,56)}function eD(){this.init();(this||vf)._w=oea;U0.call(this||vf,128,112)}function $n(d,c){return d>>>0<c>>>0?1:0}function tK(){this.init();(this||ik)._w=pea;qea.call(this||ik,128,112)}function ao(d){V0.call(this||nm);(this||nm).hashMode="string"==typeof d;(this||nm).hashMode?(this||nm)[d]=(this||nm)._finalOrDigest:(this||nm).final=(this||nm)._finalOrDigest;(this||nm)._final&&((this||nm).__final=
(this||nm)._final,(this||nm)._final=null);(this||nm)._decoder=null;(this||nm)._encoding=null}function uK(d){W0.call(this,"digest");this._hash=d}function vK(d,c){X0.call(this,"digest");"string"==typeof c&&(c=uA.from(c));this._alg=d;this._key=c;64<c.length?c=d(c):64>c.length&&(c=uA.concat([c,rea],64));d=this._ipad=uA.allocUnsafe(64);for(var h=this._opad=uA.allocUnsafe(64),f=0;64>f;f++)d[f]=54^c[f],h[f]=92^c[f];this._hash=[d]}function TF(d,c){Y0.call(this,"digest");"string"==typeof c&&(c=UF.from(c));
var h="sha512"===d||"sha384"===d?128:64;(this._alg=d,this._key=c,c.length>h)?c=("rmd160"===d?new bR:cR(d)).update(c).digest():c.length<h&&(c=UF.concat([c,sea],h));for(var f=this._ipad=UF.allocUnsafe(h),k=this._opad=UF.allocUnsafe(h),n=0;n<h;n++)f[n]=54^c[n],k[n]=92^c[n];this._hash="rmd160"===d?new bR:cR(d);this._hash.update(f)}function Z0(d,c){if("string"!=typeof d&&!tea.isBuffer(d))throw new TypeError(c+" must be a buffer or string");}function $0(d,c,h){var f=function(m){function a(g){return uea(m).update(g).digest()}
return"rmd160"===m||"ripemd160"===m?function(g){return(new vea).update(g).digest()}:"md5"===m?wea:a}(d),k="sha512"===d||"sha384"===d?128:64;c.length>k?c=f(c):c.length<k&&(c=ut.concat([c,xea],k));for(var n=ut.allocUnsafe(k+wK[d]),b=ut.allocUnsafe(k+wK[d]),e=0;e<k;e++)n[e]=54^c[e],b[e]=92^c[e];c=ut.allocUnsafe(k+h+4);n.copy(c,0,0,k);(this||vt).ipad1=c;(this||vt).ipad2=n;(this||vt).opad=b;(this||vt).alg=d;(this||vt).blocksize=k;(this||vt).hash=f;(this||vt).size=wK[d]}function a1(d,c,h,f,k){return VF.importKey("raw",
d,{name:"PBKDF2"},!1,["deriveBits"]).then(function(n){return VF.deriveBits({name:"PBKDF2",salt:c,iterations:h,hash:{name:k}},n,f<<3)}).then(function(n){return fD.from(n)})}function b1(d,c){if(!d)throw Error(c||"Assertion failed");}function gr(d){this.options=d;this.type=this.options.type;this.blockSize=8;this._init();this.buffer=Array(this.blockSize);this.bufferOff=0}function yea(){this.tmp=Array(2);this.keys=null}function es(d){c1.call(this,d);var c=new yea;this._desState=c;this.deriveKeys(c,d.key)}
function zea(d){Aea.equal(d.length,8,"Invalid IV length");this.iv=Array(8);for(var c=0;c<this.iv.length;c++)this.iv[c]=d[c]}function Bea(d,c){Cea.equal(c.length,24,"Invalid key length");var h=c.slice(0,8),f=c.slice(8,16);c=c.slice(16,24);this.ciphers="encrypt"===d?[dy.create({type:"encrypt",key:h}),dy.create({type:"decrypt",key:f}),dy.create({type:"encrypt",key:c})]:[dy.create({type:"decrypt",key:c}),dy.create({type:"encrypt",key:f}),dy.create({type:"decrypt",key:h})]}function bv(d){d1.call(this,
d);this._edeState=new Bea(this.type,this.options.key)}function xK(d){e1.call(this||yK);var c=d.mode.toLowerCase(),h=WF[c];var f=d.decrypt?"decrypt":"encrypt";var k=d.key;vA.isBuffer(k)||(k=vA.from(k));"des-ede"!==c&&"des-ede-cbc"!==c||(k=vA.concat([k,k.slice(0,8)]));d=d.iv;vA.isBuffer(d)||(d=vA.from(d));(this||yK)._des=h.create({key:k,iv:d,type:f})}function f1(d,c,h){var f=c.length,k=Dea(c,d._cache);return d._cache=d._cache.slice(f),d._prev=XF.concat([d._prev,h?c:k]),k}function Eea(d){return d._prev=
d._cipher.encryptBlock(d._prev),d._prev}function dR(d){zK.isBuffer(d)||(d=zK.from(d));for(var c=d.length/4|0,h=Array(c),f=0;f<c;f++)h[f]=d.readUInt32BE(4*f);return h}function eR(d){for(;0<d.length;d++)d[0]=0}function g1(d,c,h,f,k){var n=h[0],b=h[1],e=h[2];h=h[3];var m=d[0]^c[0],a=d[1]^c[1],g=d[2]^c[2];d=d[3]^c[3];for(var l=4,r=1;r<k;r++){var v=n[m>>>24]^b[a>>>16&255]^e[g>>>8&255]^h[255&d]^c[l++];var y=n[a>>>24]^b[g>>>16&255]^e[d>>>8&255]^h[255&m]^c[l++];var A=n[g>>>24]^b[d>>>16&255]^e[m>>>8&255]^
h[255&a]^c[l++];var E=n[d>>>24]^b[m>>>16&255]^e[a>>>8&255]^h[255&g]^c[l++];m=v;a=y;g=A;d=E}return v=(f[m>>>24]<<24|f[a>>>16&255]<<16|f[g>>>8&255]<<8|f[255&d])^c[l++],y=(f[a>>>24]<<24|f[g>>>16&255]<<16|f[d>>>8&255]<<8|f[255&m])^c[l++],A=(f[g>>>24]<<24|f[d>>>16&255]<<16|f[m>>>8&255]<<8|f[255&a])^c[l++],E=(f[d>>>24]<<24|f[m>>>16&255]<<16|f[a>>>8&255]<<8|f[255&g])^c[l++],[v>>>0,y>>>0,A>>>0,E>>>0]}function fs(d){(this||gs)._key=dR(d);this._reset()}function h1(d){var c=gD.allocUnsafe(16);return c.writeUInt32BE(d[0]>>>
0,0),c.writeUInt32BE(d[1]>>>0,4),c.writeUInt32BE(d[2]>>>0,8),c.writeUInt32BE(d[3]>>>0,12),c}function YF(d){(this||Eo).h=d;(this||Eo).state=gD.alloc(16,0);(this||Eo).cache=gD.allocUnsafe(0)}function ey(d,c,h,f){i1.call(this||Wh);var k=wq.alloc(4,0);(this||Wh)._cipher=new Fea.AES(c);var n=(this||Wh)._cipher.encryptBlock(k);(this||Wh)._ghash=new j1(n);c=this||Wh;k=h;if(12===k.length)c=(c._finID=wq.concat([k,wq.from([0,0,0,1])]),wq.concat([k,wq.from([0,0,0,2])]));else{h=new j1(n);n=k.length;var b=n%16;
h.update(k);b&&(b=16-b,h.update(wq.alloc(b,0)));h.update(wq.alloc(8,0));k=8*n;n=wq.alloc(8);n.writeUIntBE(k,0,8);h.update(n);c._finID=h.state;c=wq.from(c._finID);c=(Gea(c),c)}(this||Wh)._prev=wq.from(c);(this||Wh)._cache=wq.allocUnsafe(0);(this||Wh)._secCache=wq.allocUnsafe(0);(this||Wh)._decrypt=f;(this||Wh)._alen=0;(this||Wh)._len=0;(this||Wh)._mode=d;(this||Wh)._authTag=null;(this||Wh)._called=!1}function ZF(d,c,h,f){k1.call(this||wt);(this||wt)._cipher=new Hea.AES(c);(this||wt)._prev=fR.from(h);
(this||wt)._cache=fR.allocUnsafe(0);(this||wt)._secCache=fR.allocUnsafe(0);(this||wt)._decrypt=f;(this||wt)._mode=d}function $F(d,c,h){l1.call(this||jk);(this||jk)._cache=new AK;(this||jk)._last=void 0;(this||jk)._cipher=new Iea.AES(c);(this||jk)._prev=hD.from(h);(this||jk)._mode=d;(this||jk)._autopadding=!0}function AK(){(this||jk).cache=hD.allocUnsafe(0)}function m1(d,c,h){d=n1[d.toLowerCase()];if(!d)throw new TypeError("invalid suite type");if("string"==typeof h&&(h=hD.from(h)),"GCM"!==d.mode&&
h.length!==d.iv)throw new TypeError("invalid iv length "+h.length);if("string"==typeof c&&(c=hD.from(c)),c.length!==d.key/8)throw new TypeError("invalid key length "+c.length);return"stream"===d.type?new Jea(d.module,c,h,!0):"auth"===d.type?new Kea(d.module,c,h,!0):new $F(d.module,c,h)}function aG(d,c,h){o1.call(this||Yk);(this||Yk)._cache=new BK;(this||Yk)._cipher=new Lea.AES(c);(this||Yk)._prev=zw.from(h);(this||Yk)._mode=d;(this||Yk)._autopadding=!0}function BK(){(this||Yk).cache=zw.allocUnsafe(0)}
function p1(d,c,h){d=q1[d.toLowerCase()];if(!d)throw new TypeError("invalid suite type");if("string"==typeof c&&(c=zw.from(c)),c.length!==d.key/8)throw new TypeError("invalid key length "+c.length);if("string"==typeof h&&(h=zw.from(h)),"GCM"!==d.mode&&h.length!==d.iv)throw new TypeError("invalid iv length "+h.length);return"stream"===d.type?new Mea(d.module,c,h):"auth"===d.type?new Nea(d.module,c,h):new aG(d.module,c,h)}function gR(d,c,h){if(d=d.toLowerCase(),fy[d])return hR.createCipheriv(d,c,h);
if(Aw[d])return new r1({key:c,iv:h,mode:d});throw new TypeError("invalid suite type");}function iR(d,c,h){if(d=d.toLowerCase(),fy[d])return hR.createDecipheriv(d,c,h);if(Aw[d])return new r1({key:c,iv:h,mode:d,decrypt:!0});throw new TypeError("invalid suite type");}function gy(d){(this||CK).rand=d}function hy(d){(this||s1).rand=d||new Oea.Rand}function jR(d){if(null!==kR)var c=kR;else{c=[2];for(var h=1,f=3;1048576>f;f+=2){for(var k=Math.ceil(Math.sqrt(f)),n=0;n<h&&c[n]<=k&&0!=f%c[n];n++);h!==n&&c[n]<=
k||(c[h++]=f)}c=(kR=c,c)}for(h=0;h<c.length;h++)if(0===d.modn(c[h]))return 0===d.cmpn(c[h]);return!0}function lR(d){var c=dp.mont(d);return 0===mR.toRed(c).redPow(d.subn(1)).fromRed().cmpn(1)}function bG(d,c){if(16>d)return new dp(2===c||5===c?[140,123]:[140,39]);var h,f;for(c=new dp(c);;){for(h=new dp(Pea(Math.ceil(d/8)));h.bitLength()>d;)h.ishrn(1);if(h.isEven()&&h.iadd(Qea),h.testn(1)||h.iadd(mR),c.cmp(mR)){if(!c.cmp(Rea))for(;h.mod(Sea).cmp(Tea);)h.iadd(t1)}else for(;h.mod(Uea).cmp(Vea);)h.iadd(t1);
if(jR(f=h.shrn(1))&&jR(h)&&lR(f)&&lR(h)&&u1.test(f)&&u1.test(h))return h}}function Wea(d,c){return c=c||"utf8",cv.isBuffer(d)||(d=new cv(d,c)),(this||Aj)._pub=new hs(d),this||Aj}function Xea(d,c){return c=c||"utf8",cv.isBuffer(d)||(d=new cv(d,c)),(this||Aj)._priv=new hs(d),this||Aj}function xt(d,c,h){this.setGenerator(c);(this||Aj).__prime=new hs(d);(this||Aj)._prime=hs.mont((this||Aj).__prime);(this||Aj)._primeLen=d.length;(this||Aj)._pub=void 0;(this||Aj)._priv=void 0;(this||Aj)._primeCode=void 0;
h?((this||Aj).setPublicKey=Wea,(this||Aj).setPrivateKey=Xea):(this||Aj)._primeCode=8}function DK(d,c){d=new cv(d.toArray());return c?d.toString(c):d}function EK(d,c){var h=v1(c);var f=h.toRed(iy.mont(c.modulus)).redPow(new iy(c.publicExponent)).fromRed();h=h.invm(c.modulus);var k=c.modulus.byteLength();d=(iy.mont(c.modulus),(new iy(d)).mul(f).umod(c.modulus));var n=d.toRed(iy.mont(c.prime1)),b=d.toRed(iy.mont(c.prime2));f=c.coefficient;var e=c.prime1;d=c.prime2;n=n.redPow(c.exponent1);b=b.redPow(c.exponent2);
n=n.fromRed();b=b.fromRed();f=n.isub(b).imul(f).umod(e);return f.imul(d),b.iadd(f),new Yea(b.imul(h).umod(c.modulus).toArray(!1,k))}function v1(d){for(var c=d.modulus.byteLength(),h=new iy(w1(c));0<=h.cmp(d.modulus)||!h.umod(d.prime1)||!h.umod(d.prime2);)h=new iy(w1(c));return h}function x1(d){return 1===d.length?"0"+d:d}function y1(d){for(var c="",h=0;h<d.length;h++)c+=x1(d[h].toString(16));return c}function wA(d,c){if(d instanceof wA)return d;this._importDER(d,c)||(Zea(d.r&&d.s,"Signature without r or s"),
this.r=new FK(d.r,16),this.s=new FK(d.s,16),void 0===d.recoveryParam?this.recoveryParam=null:this.recoveryParam=d.recoveryParam)}function $ea(){this.place=0}function nR(d,c){var h=d[c.place++];if(!(128&h))return h;h&=15;for(var f=0,k=0,n=c.place;k<h;k++,n++)f<<=8,f|=d[n];return c.place=n,f}function z1(d){for(var c=0,h=d.length-1;!(d[c]||128&d[c+1])&&c<h;)c++;return 0===c?d:d.slice(c)}function oR(d,c){if(128>c)return d.push(c),void 0;var h=1+(Math.log(c)/Math.LN2>>>3);for(d.push(128|h);--h;)d.push(c>>>
(h<<3)&255);d.push(c)}function A1(d){return(d>>>24|d>>>8&65280|d<<8&16711680|(255&d)<<24)>>>0}function B1(d){return 1===d.length?"0"+d:d}function C1(d){return 7===d.length?"0"+d:6===d.length?"00"+d:5===d.length?"000"+d:4===d.length?"0000"+d:3===d.length?"00000"+d:2===d.length?"000000"+d:1===d.length?"0000000"+d:d}function GK(){this.pending=null;this.pendingTotal=0;this.blockSize=this.constructor.blockSize;this.outSize=this.constructor.outSize;this.hmacStrength=this.constructor.hmacStrength;this.padLength=
this.constructor.padLength/8;this.endian="big";this._delta8=this.blockSize/8;this._delta32=this.blockSize/32}function is(){if(!(this instanceof is))return new is;D1.call(this);this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209];this.k=afa;this.W=Array(160)}function yt(){if(!(this instanceof yt))return new yt;E1.call(this);this.h=[1779033703,3144134277,1013904242,2773480762,
1359893119,2600822924,528734635,1541459225];this.k=bfa;this.W=Array(64)}function dv(){if(!(this instanceof dv))return new dv;F1.call(this);this.h=[1732584193,4023233417,2562383102,271733878,3285377520];this.W=Array(80)}function Bw(){if(!(this instanceof Bw))return new Bw;G1.call(this);this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}function Cw(){if(!(this instanceof Cw))return new Cw;H1.call(this);this.h=[3418070365,3238371032,1654270250,914150663,2438529370,
812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}function ev(){if(!(this instanceof ev))return new ev;I1.call(this);this.h=[1732584193,4023233417,2562383102,271733878,3285377520];this.endian="little"}function J1(d,c,h,f){return 15>=d?c^h^f:31>=d?c&h|~c&f:47>=d?(c|~h)^f:63>=d?c&f|h&~f:c^(h|~f)}function iD(d,c,h){if(!(this instanceof iD))return new iD(d,c,h);this.Hash=d;this.blockSize=d.blockSize/8;this.outSize=d.outSize/8;this.outer=
this.inner=null;this._init(cfa.toArray(c,h))}function Dw(d){if(!(this instanceof Dw))return new Dw(d);this.hash=d.hash;this.predResist=!!d.predResist;this.outLen=this.hash.outSize;this.minEntropy=d.minEntropy||this.hash.hmacStrength;this.V=this.K=this.reseedInterval=this._reseed=null;var c=xA.toArray(d.entropy,d.entropyEnc||"hex"),h=xA.toArray(d.nonce,d.nonceEnc||"hex");d=xA.toArray(d.pers,d.persEnc||"hex");K1(c.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits");
this._init(c,h,d)}function zt(d,c){this.type=d;this.p=new yA(c.p,16);this.red=c.prime?yA.red(c.prime):yA.mont(this.p);this.zero=(new yA(0)).toRed(this.red);this.one=(new yA(1)).toRed(this.red);this.two=(new yA(2)).toRed(this.red);this.n=c.n&&new yA(c.n,16);this.g=c.g&&this.pointFromJSON(c.g,c.gRed);this._wnafT1=Array(4);this._wnafT2=Array(4);this._wnafT3=Array(4);this._wnafT4=Array(4);this._bitLength=this.n?this.n.bitLength():0;d=this.n&&this.p.div(this.n);!d||0<d.cmpn(100)?this.redN=null:(this._maxwellTrick=
!0,this.redN=this.n.toRed(this.red))}function js(d,c){this.curve=d;this.type=c;this.precomputed=null}function ks(d){jD.call(this,"short",d);this.a=(new om(d.a,16)).toRed(this.red);this.b=(new om(d.b,16)).toRed(this.red);this.tinv=this.two.redInvm();this.zeroA=0===this.a.fromRed().cmpn(0);this.threeA=0===this.a.fromRed().sub(this.p).cmpn(-3);this.endo=this._getEndomorphism(d);this._endoWnafT1=Array(4);this._endoWnafT2=Array(4)}function bo(d,c,h,f){jD.BasePoint.call(this,d,"affine");null===c&&null===
h?(this.x=null,this.y=null,this.inf=!0):(this.x=new om(c,16),this.y=new om(h,16),f&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}function Fo(d,c,h,f){jD.BasePoint.call(this,d,"jacobian");null===c&&null===h&&null===f?(this.x=this.curve.one,this.y=this.curve.one,this.z=new om(0)):(this.x=new om(c,16),this.y=new om(h,16),this.z=new om(f,16));this.x.red||(this.x=this.x.toRed(this.curve.red));
this.y.red||(this.y=this.y.toRed(this.curve.red));this.z.red||(this.z=this.z.toRed(this.curve.red));this.zOne=this.z===this.curve.one}function kD(d){HK.call(this,"mont",d);this.a=(new lD(d.a,16)).toRed(this.red);this.b=(new lD(d.b,16)).toRed(this.red);this.i4=(new lD(4)).toRed(this.red).redInvm();this.two=(new lD(2)).toRed(this.red);this.a24=this.i4.redMul(this.a.redAdd(this.two))}function co(d,c,h){HK.BasePoint.call(this,d,"projective");null===c&&null===h?(this.x=this.curve.one,this.z=this.curve.zero):
(this.x=new lD(c,16),this.z=new lD(h,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}function fv(d){this.extended=this.mOneA=(this.twisted=1!=(0|d.a))&&-1==(0|d.a);IK.call(this,"edwards",d);this.a=(new Ew(d.a,16)).umod(this.red.m);this.a=this.a.toRed(this.red);this.c=(new Ew(d.c,16)).toRed(this.red);this.c2=this.c.redSqr();this.d=(new Ew(d.d,16)).toRed(this.red);this.dd=this.d.redAdd(this.d);dfa(!this.twisted||0===this.c.fromRed().cmpn(1));
this.oneC=1==(0|d.c)}function jl(d,c,h,f,k){IK.BasePoint.call(this,d,"projective");null===c&&null===h&&null===f?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new Ew(c,16),this.y=new Ew(h,16),this.z=f?new Ew(f,16):this.curve.one,this.t=k&&new Ew(k,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),
this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}function L1(d){"short"===d.type?this.curve=new pR.short(d):"edwards"===d.type?this.curve=new pR.edwards(d):this.curve=new pR.mont(d);this.g=this.curve.g;this.n=this.curve.n;this.hash=d.hash;M1(this.g.validate(),"Invalid curve");M1(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}function jy(d,c){Object.defineProperty(qR,d,{configurable:!0,enumerable:!0,
get:function(){var h=new L1(c);return Object.defineProperty(qR,d,{configurable:!0,enumerable:!0,value:h}),h}})}function eo(d,c){this.ec=d;this.pub=this.priv=null;c.priv&&this._importPrivate(c.priv,c.privEnc);c.pub&&this._importPublic(c.pub,c.pubEnc)}function ls(d){if(!(this instanceof ls))return new ls(d);"string"==typeof d&&(N1(rR.hasOwnProperty(d),"Unknown curve "+d),d=rR[d]);d instanceof rR.PresetCurve&&(d={curve:d});this.curve=d.curve.curve;this.n=this.curve.n;this.nh=this.n.ushrn(1);this.g=this.curve.g;
this.g=d.curve.g;this.g.precompute(d.curve.n.bitLength()+1);this.hash=d.hash||d.curve.hash}function vn(d,c){this.eddsa=d;this._secret=O1(c.secret);d.isPoint(c.pub)?this._pub=c.pub:this._pubBytes=O1(c.pub)}function ky(d,c){this.eddsa=d;"object"!=typeof c&&(c=efa(c));Array.isArray(c)&&(c={R:c.slice(0,d.encodingLength),S:c.slice(d.encodingLength)});ffa(c.R&&c.S,"Signature without R or S");d.isPoint(c.R)&&(this._R=c.R);c.S instanceof gfa&&(this._S=c.S);this._Rencoded=Array.isArray(c.R)?c.R:c.Rencoded;
this._Sencoded=Array.isArray(c.S)?c.S:c.Sencoded}function xq(d){if(hfa("ed25519"===d,"only tested with ed25519 so far"),!(this instanceof xq))return new xq(d);this.curve=d=ifa[d].curve;this.g=d.g;this.g.precompute(d.n.bitLength()+1);this.pointClass=d.point().constructor;this.encodingLength=Math.ceil(d.n.bitLength()/8);this.hash=jfa.sha512}function ms(d){(this||wn)._reporterState={obj:null,path:[],options:d||{},errors:[]}}function mD(d,c){(this||wn).path=d;this.rethrow(c)}function P1(){function d(n,
b){if(f.call(this||Eh,b),!k.isBuffer(n))return this.error("Input not Buffer"),void 0;(this||Eh).base=n;(this||Eh).offset=0;(this||Eh).length=n.length}function c(n,b){if(Array.isArray(n))(this||Eh).length=0,(this||Eh).value=n.map(function(e){return e instanceof c||(e=new c(e,b)),(this||Eh).length+=e.length,e},this||Eh);else if("number"==typeof n){if(!(0<=n&&255>=n))return b.error("non-byte EncoderBuffer value");(this||Eh).value=n;(this||Eh).length=1}else if("string"==typeof n)(this||Eh).value=n,(this||
Eh).length=k.byteLength(n);else{if(!k.isBuffer(n))return b.error("Unsupported type: "+typeof n);(this||Eh).value=n;(this||Eh).length=n.length}}if(Q1)return JK;Q1=!0;var h=ti,f=cG().Reporter,k=Mi.Buffer;return h(d,f),JK.DecoderBuffer=d,d.prototype.save=function(){return{offset:(this||Eh).offset,reporter:f.prototype.save.call(this||Eh)}},d.prototype.restore=function(n){var b=new d((this||Eh).base);return b.offset=n.offset,b.length=(this||Eh).offset,(this||Eh).offset=n.offset,f.prototype.restore.call(this||
Eh,n.reporter),b},d.prototype.isEmpty=function(){return(this||Eh).offset===(this||Eh).length},d.prototype.readUInt8=function(n){return(this||Eh).offset+1<=(this||Eh).length?(this||Eh).base.readUInt8((this||Eh).offset++,!0):this.error(n||"DecoderBuffer overrun")},d.prototype.skip=function(n,b){if(!((this||Eh).offset+n<=(this||Eh).length))return this.error(b||"DecoderBuffer overrun");b=new d((this||Eh).base);return b._reporterState=(this||Eh)._reporterState,b.offset=(this||Eh).offset,b.length=(this||
Eh).offset+n,(this||Eh).offset+=n,b},d.prototype.raw=function(n){return(this||Eh).base.slice(n?n.offset:(this||Eh).offset,(this||Eh).length)},JK.EncoderBuffer=c,c.prototype.join=function(n,b){return n||(n=new k((this||Eh).length)),b||(b=0),0===(this||Eh).length||(Array.isArray((this||Eh).value)?(this||Eh).value.forEach(function(e){e.join(n,b);b+=e.length}):("number"==typeof(this||Eh).value?n[b]=(this||Eh).value:"string"==typeof(this||Eh).value?n.write((this||Eh).value,b):k.isBuffer((this||Eh).value)&&
(this||Eh).value.copy(n,b),b+=(this||Eh).length)),n},JK}function cG(){if(R1)return sR;R1=!0;var d=sR;return d.Reporter=S1.Reporter,d.DecoderBuffer=P1().DecoderBuffer,d.EncoderBuffer=P1().EncoderBuffer,d.Node=function(){function c(a,g){var l={};(this||Zg)._baseState=l;l.enc=a;l.parent=g||null;l.children=null;l.tag=null;l.args=null;l.reverseArgs=null;l.choice=null;l.optional=!1;l.any=!1;l.obj=!1;l.use=null;l.useDecoder=null;l.key=null;l.default=null;l.explicit=null;l.implicit=null;l.contains=null;l.parent||
(l.children=[],this._wrap())}if(T1)return tR;T1=!0;var h=cG().Reporter,f=cG().EncoderBuffer,k=cG().DecoderBuffer,n=ns,b="seq seqof set setof objid bool gentime utctime null_ enum int objDesc bitstr bmpstr charstr genstr graphstr ia5str iso646str numstr octstr printstr t61str unistr utf8str videostr".split(" "),e="key obj use optional explicit implicit def choice any contains".split(" ").concat(b);tR=c;var m="enc parent children tag args reverseArgs choice optional any obj use alteredUse key default explicit implicit contains".split(" ");
return c.prototype.clone=function(){var a=(this||Zg)._baseState,g={};m.forEach(function(r){g[r]=a[r]});var l=new (this||Zg).constructor(g.parent);return l._baseState=g,l},c.prototype._wrap=function(){var a=(this||Zg)._baseState;e.forEach(function(g){(this||Zg)[g]=function(){var l=new (this||Zg).constructor(this||Zg);return a.children.push(l),l[g].apply(l,arguments)}},this||Zg)},c.prototype._init=function(a){var g=(this||Zg)._baseState;n(null===g.parent);a.call(this||Zg);g.children=g.children.filter(function(l){return l._baseState.parent===
(this||Zg)},this||Zg);n.equal(g.children.length,1,"Root node can have only one child")},c.prototype._useArgs=function(a){var g=(this||Zg)._baseState,l=a.filter(function(r){return r instanceof(this||Zg).constructor},this||Zg);a=a.filter(function(r){return!(r instanceof(this||Zg).constructor)},this||Zg);0!==l.length&&(n(null===g.children),g.children=l,l.forEach(function(r){r._baseState.parent=this||Zg},this||Zg));0!==a.length&&(n(null===g.args),g.args=a,g.reverseArgs=a.map(function(r){if("object"!=
typeof r||r.constructor!==Object)return r;var v={};return Object.keys(r).forEach(function(y){y==(0|y)&&(y|=0);v[r[y]]=y}),v}))},"_peekTag _decodeTag _use _decodeStr _decodeObjid _decodeTime _decodeNull _decodeInt _decodeBool _decodeList _encodeComposite _encodeStr _encodeObjid _encodeTime _encodeNull _encodeInt _encodeBool".split(" ").forEach(function(a){c.prototype[a]=function(){throw Error(a+" not implemented for encoding: "+(this||Zg)._baseState.enc);}}),b.forEach(function(a){c.prototype[a]=function(){var g=
(this||Zg)._baseState,l=Array.prototype.slice.call(arguments);return n(null===g.tag),g.tag=a,this._useArgs(l),this||Zg}}),c.prototype.use=function(a){n(a);var g=(this||Zg)._baseState;return n(null===g.use),g.use=a,this||Zg},c.prototype.optional=function(){return(this||Zg)._baseState.optional=!0,this||Zg},c.prototype.def=function(a){var g=(this||Zg)._baseState;return n(null===g.default),g.default=a,g.optional=!0,this||Zg},c.prototype.explicit=function(a){var g=(this||Zg)._baseState;return n(null===
g.explicit&&null===g.implicit),g.explicit=a,this||Zg},c.prototype.implicit=function(a){var g=(this||Zg)._baseState;return n(null===g.explicit&&null===g.implicit),g.implicit=a,this||Zg},c.prototype.obj=function(){var a=(this||Zg)._baseState,g=Array.prototype.slice.call(arguments);return a.obj=!0,0!==g.length&&this._useArgs(g),this||Zg},c.prototype.key=function(a){var g=(this||Zg)._baseState;return n(null===g.key),g.key=a,this||Zg},c.prototype.any=function(){return(this||Zg)._baseState.any=!0,this||
Zg},c.prototype.choice=function(a){var g=(this||Zg)._baseState;return n(null===g.choice),g.choice=a,this._useArgs(Object.keys(a).map(function(l){return a[l]})),this||Zg},c.prototype.contains=function(a){var g=(this||Zg)._baseState;return n(null===g.use),g.contains=a,this||Zg},c.prototype._decode=function(a,g){var l=(this||Zg)._baseState;if(null===l.parent)return a.wrapResult(l.children[0]._decode(a,g));var r,v=l.default,y=!0,A=null;if(null!==l.key&&(A=a.enterKey(l.key)),l.optional){var E=null;if(null!==
l.explicit?E=l.explicit:null!==l.implicit?E=l.implicit:null!==l.tag&&(E=l.tag),null!==E||l.any){if(y=this._peekTag(a,E,l.any),a.isError(y))return y}else{var F=a.save();try{null===l.choice?this._decodeGeneric(l.tag,a,g):this._decodeChoice(a,g),y=!0}catch(I){y=!1}a.restore(F)}}if(l.obj&&y&&(r=a.enterObject()),y){if(null!==l.explicit){E=this._decodeTag(a,l.explicit);if(a.isError(E))return E;a=E}E=a.offset;if(null===l.use&&null===l.choice){l.any&&(F=a.save());var H=this._decodeTag(a,null!==l.implicit?
l.implicit:l.tag,l.any);if(a.isError(H))return H;l.any?v=a.raw(F):a=H}if(g&&g.track&&null!==l.tag&&g.track(a.path(),E,a.length,"tagged"),g&&g.track&&null!==l.tag&&g.track(a.path(),a.offset,a.length,"content"),v=l.any?v:null===l.choice?this._decodeGeneric(l.tag,a,g):this._decodeChoice(a,g),a.isError(v))return v;(l.any||null!==l.choice||null===l.children||l.children.forEach(function(I){I._decode(a,g)}),!l.contains||"octstr"!==l.tag&&"bitstr"!==l.tag)||(v=new k(v),v=this._getUse(l.contains,a._reporterState.obj)._decode(v,
g))}return l.obj&&y&&(v=a.leaveObject(r)),null===l.key||null===v&&!0!==y?null!==A&&a.exitKey(A):a.leaveKey(A,l.key,v),v},c.prototype._decodeGeneric=function(a,g,l){var r=(this||Zg)._baseState;return"seq"===a||"set"===a?null:"seqof"===a||"setof"===a?this._decodeList(g,a,r.args[0],l):/str$/.test(a)?this._decodeStr(g,a,l):"objid"===a&&r.args?this._decodeObjid(g,r.args[0],r.args[1],l):"objid"===a?this._decodeObjid(g,null,null,l):"gentime"===a||"utctime"===a?this._decodeTime(g,a,l):"null_"===a?this._decodeNull(g,
l):"bool"===a?this._decodeBool(g,l):"objDesc"===a?this._decodeStr(g,a,l):"int"===a||"enum"===a?this._decodeInt(g,r.args&&r.args[0],l):null!==r.use?this._getUse(r.use,g._reporterState.obj)._decode(g,l):g.error("unknown tag: "+a)},c.prototype._getUse=function(a,g){var l=(this||Zg)._baseState;return l.useDecoder=this._use(a,g),n(null===l.useDecoder._baseState.parent),l.useDecoder=l.useDecoder._baseState.children[0],l.implicit!==l.useDecoder._baseState.implicit&&(l.useDecoder=l.useDecoder.clone(),l.useDecoder._baseState.implicit=
l.implicit),l.useDecoder},c.prototype._decodeChoice=function(a,g){var l=(this||Zg)._baseState,r=null,v=!1;return Object.keys(l.choice).some(function(y){var A=a.save(),E=l.choice[y];try{var F=E._decode(a,g);if(a.isError(F))return!1;r={type:y,value:F};v=!0}catch(H){return a.restore(A),!1}return!0},this||Zg),v?r:a.error("Choice not matched")},c.prototype._createEncoderBuffer=function(a){return new f(a,(this||Zg).reporter)},c.prototype._encode=function(a,g,l){var r=(this||Zg)._baseState;if(null===r.default||
r.default!==a)if(a=this._encodeValue(a,g,l),void 0!==a&&!this._skipDefault(a,g,l))return a},c.prototype._encodeValue=function(a,g,l){var r=(this||Zg)._baseState;if(null===r.parent)return r.children[0]._encode(a,g||new h);var v=null;if((this||Zg).reporter=g,r.optional&&void 0===a){if(null===r.default)return;a=r.default}var y=null,A=!1;if(r.any)v=this._createEncoderBuffer(a);else if(r.choice)v=this._encodeChoice(a,g);else if(r.contains)y=this._getUse(r.contains,l)._encode(a,g),A=!0;else if(r.children)y=
r.children.map(function(F){if("null_"===F._baseState.tag)return F._encode(null,g,a);if(null===F._baseState.key)return g.error("Child should have a key");var H=g.enterKey(F._baseState.key);if("object"!=typeof a)return g.error("Child expected, but input is not object");F=F._encode(a[F._baseState.key],g,a);return g.leaveKey(H),F},this||Zg).filter(function(F){return F}),y=this._createEncoderBuffer(y);else if("seqof"===r.tag||"setof"===r.tag){if(!r.args||1!==r.args.length)return g.error("Too many args for : "+
r.tag);if(!Array.isArray(a))return g.error("seqof/setof, but data is not Array");y=this.clone();y._baseState.implicit=null;y=this._createEncoderBuffer(a.map(function(F){return this._getUse((this||Zg)._baseState.args[0],a)._encode(F,g)},y))}else null!==r.use?v=this._getUse(r.use,l)._encode(a,g):(y=this._encodePrimitive(r.tag,a),A=!0);if(!r.any&&null===r.choice){l=null!==r.implicit?r.implicit:r.tag;var E=null===r.implicit?"universal":"context";null===l?null===r.use&&g.error("Tag could be omitted only for .use()"):
null===r.use&&(v=this._encodeComposite(l,A,E,y))}return null!==r.explicit&&(v=this._encodeComposite(r.explicit,!1,"context",v)),v},c.prototype._encodeChoice=function(a,g){var l=(this||Zg)._baseState,r=l.choice[a.type];return r||n(!1,a.type+" not found in "+JSON.stringify(Object.keys(l.choice))),r._encode(a.value,g)},c.prototype._encodePrimitive=function(a,g){var l=(this||Zg)._baseState;if(/str$/.test(a))return this._encodeStr(g,a);if("objid"===a&&l.args)return this._encodeObjid(g,l.reverseArgs[0],
l.args[1]);if("objid"===a)return this._encodeObjid(g,null,null);if("gentime"===a||"utctime"===a)return this._encodeTime(g,a);if("null_"===a)return this._encodeNull();if("int"===a||"enum"===a)return this._encodeInt(g,l.args&&l.reverseArgs[0]);if("bool"===a)return this._encodeBool(g);if("objDesc"===a)return this._encodeStr(g,a);throw Error("Unsupported tag: "+a);},c.prototype._isNumstr=function(a){return/^[0-9 ]*$/.test(a)},c.prototype._isPrintstr=function(a){return/^[A-Za-z0-9 '\(\)\+,\-\.\/:=\?]*$/.test(a)},
tR}(),sR}function U1(){if(V1)return uR;V1=!0;var d=uR;return d._reverse=function(c){var h={};return Object.keys(c).forEach(function(f){(0|f)==f&&(f|=0);h[c[f]]=f}),h},d.der=function(){if(W1)return ly;W1=!0;var c=U1();return ly.tagClass={0:"universal",1:"application",2:"context",3:"private"},ly.tagClassByName=c._reverse(ly.tagClass),ly.tag={0:"end",1:"bool",2:"int",3:"bitstr",4:"octstr",5:"null_",6:"objid",7:"objDesc",8:"external",9:"real",10:"enum",11:"embed",12:"utf8str",13:"relativeOid",16:"seq",
17:"set",18:"numstr",19:"printstr",20:"t61str",21:"videostr",22:"ia5str",23:"utctime",24:"gentime",25:"graphstr",26:"iso646str",27:"genstr",28:"unistr",29:"charstr",30:"bmpstr"},ly.tagByName=c._reverse(ly.tag),ly}(),uR}function X1(){function d(a){(this||my).enc="der";(this||my).name=a.name;(this||my).entity=a;(this||my).tree=new c;(this||my).tree._init(a.body)}function c(a){b.Node.call(this||my,"der",a)}function h(a,g){var l=a.readUInt8(g);if(a.isError(l))return l;var r=m.tagClass[l>>6],v=0==(32&
l);if(31==(31&l)){var y=l;for(l=0;128==(128&y);){if(y=a.readUInt8(g),a.isError(y))return y;l<<=7;l|=127&y}}else l&=31;return{cls:r,primitive:v,tag:l,tagStr:m.tag[l]}}function f(a,g,l){var r=a.readUInt8(l);if(a.isError(r))return r;if(!g&&128===r)return null;if(0==(128&r))return r;g=127&r;if(4<g)return a.error("length octect is too long");for(var v=r=0;v<g;v++){r<<=8;var y=a.readUInt8(l);if(a.isError(y))return y;r|=y}return r}if(Y1)return vR;Y1=!0;var k=ti,n=KK(),b=n.base,e=n.bignum,m=n.constants.der;
return vR=d,d.prototype.decode=function(a,g){return a instanceof b.DecoderBuffer||(a=new b.DecoderBuffer(a,g)),(this||my).tree._decode(a,g)},k(c,b.Node),c.prototype._peekTag=function(a,g,l){if(a.isEmpty())return!1;var r=a.save(),v=h(a,'Failed to peek tag: "'+g+'"');return a.isError(v)?v:(a.restore(r),v.tag===g||v.tagStr===g||v.tagStr+"of"===g||l)},c.prototype._decodeTag=function(a,g,l){var r=h(a,'Failed to decode tag of "'+g+'"');if(a.isError(r))return r;var v=f(a,r.primitive,'Failed to get length of "'+
g+'"');if(a.isError(v))return v;if(!l&&r.tag!==g&&r.tagStr!==g&&r.tagStr+"of"!==g)return a.error('Failed to match tag: "'+g+'"');if(r.primitive||null!==v)return a.skip(v,'Failed to match body of: "'+g+'"');l=a.save();r=this._skipUntilEnd(a,'Failed to skip indefinite length body: "'+(this||my).tag+'"');return a.isError(r)?r:(v=a.offset-l.offset,a.restore(l),a.skip(v,'Failed to match body of: "'+g+'"'))},c.prototype._skipUntilEnd=function(a,g){for(;;){var l=h(a,g);if(a.isError(l))return l;var r,v=f(a,
l.primitive,g);if(a.isError(v))return v;if(r=l.primitive||null!==v?a.skip(v):this._skipUntilEnd(a,g),a.isError(r))return r;if("end"===l.tagStr)break}},c.prototype._decodeList=function(a,g,l,r){for(g=[];!a.isEmpty();){var v=this._peekTag(a,"end");if(a.isError(v))return v;var y=l.decode(a,"der",r);if(a.isError(y)&&v)break;g.push(y)}return g},c.prototype._decodeStr=function(a,g){if("bitstr"===g)return g=a.readUInt8(),a.isError(g)?g:{unused:g,data:a.raw()};if("bmpstr"===g){g=a.raw();if(1==g.length%2)return a.error("Decoding of string type: bmpstr length mismatch");
a="";for(var l=0;l<g.length/2;l++)a+=String.fromCharCode(g.readUInt16BE(2*l));return a}return"numstr"===g?(g=a.raw().toString("ascii"),this._isNumstr(g)?g:a.error("Decoding of string type: numstr unsupported characters")):"octstr"===g||"objDesc"===g?a.raw():"printstr"===g?(g=a.raw().toString("ascii"),this._isPrintstr(g)?g:a.error("Decoding of string type: printstr unsupported characters")):/str$/.test(g)?a.raw().toString():a.error("Decoding of string type: "+g+" unsupported")},c.prototype._decodeObjid=
function(a,g,l){for(var r=[],v=0;!a.isEmpty();){var y=a.readUInt8();v<<=7;v|=127&y;0==(128&y)&&(r.push(v),v=0)}128&y&&r.push(v);a=r[0]/40|0;v=r[0]%40;if(l=l?r:[a,v].concat(r.slice(1)),g)r=g[l.join(" ")],void 0===r&&(r=g[l.join(".")]),void 0!==r&&(l=r);return l},c.prototype._decodeTime=function(a,g){var l=a.raw().toString();if("gentime"===g){a=0|l.slice(0,4);g=0|l.slice(4,6);var r=0|l.slice(6,8),v=0|l.slice(8,10),y=0|l.slice(10,12);l=0|l.slice(12,14)}else{if("utctime"!==g)return a.error("Decoding "+
g+" time is not supported yet");a=0|l.slice(0,2);g=0|l.slice(2,4);r=0|l.slice(4,6);v=0|l.slice(6,8);y=0|l.slice(8,10);l=0|l.slice(10,12);a=70>a?2E3+a:1900+a}return Date.UTC(a,g-1,r,v,y,l,0)},c.prototype._decodeNull=function(a){return null},c.prototype._decodeBool=function(a){var g=a.readUInt8();return a.isError(g)?g:0!==g},c.prototype._decodeInt=function(a,g){a=a.raw();a=new e(a);return g&&(a=g[a.toString(10)]||a),a},c.prototype._use=function(a,g){return"function"==typeof a&&(a=a(g)),a._getDecoder("der").tree},
vR}function kfa(){if(Z1)return wR;Z1=!0;var d=wR;return d.der=X1(),d.pem=function(){function c(n){k.call(this||xR,n);(this||xR).enc="pem"}if($1)return yR;$1=!0;var h=ti,f=Mi.Buffer,k=X1();return h(c,k),yR=c,c.prototype.decode=function(n,b){n=n.toString().split(/[\r\n]+/g);for(var e=b.label.toUpperCase(),m=/^-----(BEGIN|END) ([^-]+)-----$/,a=-1,g=-1,l=0;l<n.length;l++){var r=n[l].match(m);if(null!==r&&r[2]===e){if(-1!==a){if("END"!==r[1])break;g=l;break}if("BEGIN"!==r[1])break;a=l}}if(-1===a||-1===
g)throw Error("PEM section not found for: "+e);n=n.slice(a+1,g).join("");n.replace(/[^a-z0-9\+\/=]+/gi,"");n=new f(n,"base64");return k.prototype.decode.call(this||xR,n,b)},yR}(),wR}function a2(){function d(m){(this||xn).enc="der";(this||xn).name=m.name;(this||xn).entity=m;(this||xn).tree=new c;(this||xn).tree._init(m.body)}function c(m){b.Node.call(this||xn,"der",m)}function h(m){return 10>m?"0"+m:m}if(b2)return zR;b2=!0;var f=ti,k=Mi.Buffer,n=KK(),b=n.base,e=n.constants.der;return zR=d,d.prototype.encode=
function(m,a){return(this||xn).tree._encode(m,a).join()},f(c,b.Node),c.prototype._encodeComposite=function(m,a,g,l){var r;a:{var v=m;m=(this||xn).reporter;"seqof"===v?v="seq":"setof"===v&&(v="set");if(e.tagByName.hasOwnProperty(v))v=e.tagByName[v];else if("number"!=typeof v||(0|v)!==v){g=m.error("Unknown tag: "+v);break a}31<=v?g=m.error("Multi-octet tag encoding unsupported"):(a||(v|=32),g=v|e.tagClassByName[g||"universal"]<<6)}if(128>l.length)return(r=new k(2))[0]=g,r[1]=l.length,this._createEncoderBuffer([r,
l]);m=1;for(a=l.length;256<=a;a>>=8)m++;(r=new k(2+m))[0]=g;r[1]=128|m;a=1+m;for(g=l.length;0<g;a--,g>>=8)r[a]=255&g;return this._createEncoderBuffer([r,l])},c.prototype._encodeStr=function(m,a){if("bitstr"===a)return this._createEncoderBuffer([0|m.unused,m.data]);if("bmpstr"===a){a=new k(2*m.length);for(var g=0;g<m.length;g++)a.writeUInt16BE(m.charCodeAt(g),2*g);return this._createEncoderBuffer(a)}return"numstr"===a?this._isNumstr(m)?this._createEncoderBuffer(m):(this||xn).reporter.error("Encoding of string type: numstr supports only digits and space"):
"printstr"===a?this._isPrintstr(m)?this._createEncoderBuffer(m):(this||xn).reporter.error("Encoding of string type: printstr supports only latin upper and lower case letters, digits, space, apostrophe, left and rigth parenthesis, plus sign, comma, hyphen, dot, slash, colon, equal sign, question mark"):/str$/.test(a)||"objDesc"===a?this._createEncoderBuffer(m):(this||xn).reporter.error("Encoding of string type: "+a+" unsupported")},c.prototype._encodeObjid=function(m,a,g){if("string"==typeof m){if(!a)return(this||
xn).reporter.error("string objid given, but no values map found");if(!a.hasOwnProperty(m))return(this||xn).reporter.error("objid not found in values map");m=a[m].split(/[\s\.]+/g);for(a=0;a<m.length;a++)m[a]|=0}else if(Array.isArray(m))for(m=m.slice(),a=0;a<m.length;a++)m[a]|=0;if(!Array.isArray(m))return(this||xn).reporter.error("objid() should be either array or string, got: "+JSON.stringify(m));if(!g){if(40<=m[1])return(this||xn).reporter.error("Second objid identifier OOB");m.splice(0,2,40*m[0]+
m[1])}var l=0;for(a=0;a<m.length;a++)for(g=m[a],l++;128<=g;g>>=7)l++;l=new k(l);var r=l.length-1;for(a=m.length-1;0<=a;a--)for(g=m[a],l[r--]=127&g;0<(g>>=7);)l[r--]=128|127&g;return this._createEncoderBuffer(l)},c.prototype._encodeTime=function(m,a){var g;m=new Date(m);return"gentime"===a?g=[h(m.getFullYear()),h(m.getUTCMonth()+1),h(m.getUTCDate()),h(m.getUTCHours()),h(m.getUTCMinutes()),h(m.getUTCSeconds()),"Z"].join(""):"utctime"===a?g=[h(m.getFullYear()%100),h(m.getUTCMonth()+1),h(m.getUTCDate()),
h(m.getUTCHours()),h(m.getUTCMinutes()),h(m.getUTCSeconds()),"Z"].join(""):(this||xn).reporter.error("Encoding "+a+" time is not supported yet"),this._encodeStr(g,"octstr")},c.prototype._encodeNull=function(){return this._createEncoderBuffer("")},c.prototype._encodeInt=function(m,a){if("string"==typeof m){if(!a)return(this||xn).reporter.error("String int or enum given, but no values map");if(!a.hasOwnProperty(m))return(this||xn).reporter.error("Values map doesn't contain: "+JSON.stringify(m));m=a[m]}"number"==
typeof m||k.isBuffer(m)||(a=m.toArray(),!m.sign&&128&a[0]&&a.unshift(0),m=new k(a));if(k.isBuffer(m)){var g=m.length;0===m.length&&g++;g=new k(g);return m.copy(g),0===m.length&&(g[0]=0),this._createEncoderBuffer(g)}if(128>m)return this._createEncoderBuffer(m);if(256>m)return this._createEncoderBuffer([0,m]);g=1;for(a=m;256<=a;a>>=8)g++;for(a=(g=Array(g)).length-1;0<=a;a--)g[a]=255&m,m>>=8;return 128&g[0]&&g.unshift(0),this._createEncoderBuffer(new k(g))},c.prototype._encodeBool=function(m){return this._createEncoderBuffer(m?
255:0)},c.prototype._use=function(m,a){return"function"==typeof m&&(m=m(a)),m._getEncoder("der").tree},c.prototype._skipDefault=function(m,a,g){var l=(this||xn)._baseState;if(null===l.default)return!1;m=m.join();if(void 0===l.defaultBuffer&&(l.defaultBuffer=this._encodeValue(l.default,a,g).join()),m.length!==l.defaultBuffer.length)return!1;for(a=0;a<m.length;a++)if(m[a]!==l.defaultBuffer[a])return!1;return!0},zR}function lfa(){if(c2)return AR;c2=!0;var d=AR;return d.der=a2(),d.pem=function(){function c(k){f.call(this||
BR,k);(this||BR).enc="pem"}if(d2)return CR;d2=!0;var h=ti,f=a2();return h(c,f),CR=c,c.prototype.encode=function(k,n){k=f.prototype.encode.call(this||BR,k).toString("base64");for(var b=["-----BEGIN "+n.label+"-----"],e=0;e<k.length;e+=64)b.push(k.slice(e,e+64));return b.push("-----END "+n.label+"-----"),b.join("\n")},CR}(),AR}function KK(){if(e2)return DR;e2=!0;var d=DR;return d.bignum=Xm,d.define=function(){function c(k,n){(this||hr).name=k;(this||hr).body=n;(this||hr).decoders={};(this||hr).encoders=
{}}if(f2)return ER;f2=!0;var h=KK(),f=ti;return ER.define=function(k,n){return new c(k,n)},c.prototype._createNamed=function(k){try{var n=zA.runInThisContext("(function "+(this||hr).name+"(entity) {\n  this._initNamed(entity);\n})")}catch(b){n=function(e){this._initNamed(e)}}return f(n,k),n.prototype._initNamed=function(b){k.call(this||hr,b)},new n(this||hr)},c.prototype._getDecoder=function(k){return k=k||"der",(this||hr).decoders.hasOwnProperty(k)||((this||hr).decoders[k]=this._createNamed(h.decoders[k])),
(this||hr).decoders[k]},c.prototype.decode=function(k,n,b){return this._getDecoder(n).decode(k,b)},c.prototype._getEncoder=function(k){return k=k||"der",(this||hr).encoders.hasOwnProperty(k)||((this||hr).encoders[k]=this._createNamed(h.encoders[k])),(this||hr).encoders[k]},c.prototype.encode=function(k,n,b){return this._getEncoder(n).encode(k,b)},ER}().define,d.base=cG(),d.constants=U1(),d.decoders=kfa(),d.encoders=lfa(),DR}function nD(d){var c;"object"!=typeof d||FR.isBuffer(d)||(c=d.passphrase,
d=d.key);"string"==typeof d&&(d=FR.from(d));var h=c;d=d.toString();var f=d.match(mfa);if(f){var k="aes"+f[1],n=LK.from(f[2],"hex");var b=LK.from(f[3].replace(/[\r\n]/g,""),"base64");f=dG(h,n.slice(0,8),parseInt(f[1],10)).key;h=[];k=ir.createDecipheriv(k,f,n);h.push(k.update(b));h.push(k.final());b=LK.concat(h)}else b=d.match(nfa),b=new LK(b[2].replace(/[\r\n]/g,""),"base64");d=d.match(ofa)[1];switch(d){case "CERTIFICATE":var e=yq.certificate.decode(b,"der").tbsCertificate.subjectPublicKeyInfo;case "PUBLIC KEY":switch(e||
(e=yq.PublicKey.decode(b,"der")),c=e.algorithm.algorithm.join(".")){case "1.2.840.113549.1.1.1":return yq.RSAPublicKey.decode(e.subjectPublicKey.data,"der");case "1.2.840.10045.2.1":return e.subjectPrivateKey=e.subjectPublicKey,{type:"ec",data:e};case "1.2.840.10040.4.1":return e.algorithm.params.pub_key=yq.DSAparam.decode(e.subjectPublicKey.data,"der"),{type:"dsa",data:e.algorithm.params};default:throw Error("unknown key id "+c);}case "ENCRYPTED PRIVATE KEY":h=yq.EncryptedPrivateKey.decode(b,"der"),
b=c,k=h.algorithm.decrypt.kde.kdeparams.salt,n=parseInt(h.algorithm.decrypt.kde.kdeparams.iters.toString(),10),e=pfa[h.algorithm.decrypt.cipher.algo.join(".")],d=h.algorithm.decrypt.cipher.iv,c=h.subjectPrivateKey,h=parseInt(e.split("-")[1],10)/8,b=qfa.pbkdf2Sync(b,k,n,h,"sha1"),e=rfa.createDecipheriv(e,b,d),d=[],b=(d.push(e.update(c)),d.push(e.final()),FR.concat(d));case "PRIVATE KEY":switch(c=(e=yq.PrivateKey.decode(b,"der")).algorithm.algorithm.join(".")){case "1.2.840.113549.1.1.1":return yq.RSAPrivateKey.decode(e.subjectPrivateKey,
"der");case "1.2.840.10045.2.1":return{curve:e.algorithm.curve,privateKey:yq.ECPrivateKey.decode(e.subjectPrivateKey,"der").privateKey};case "1.2.840.10040.4.1":return e.algorithm.params.priv_key=yq.DSAparam.decode(e.subjectPrivateKey,"der"),{type:"dsa",params:e.algorithm.params};default:throw Error("unknown key id "+c);}case "RSA PUBLIC KEY":return yq.RSAPublicKey.decode(b,"der");case "RSA PRIVATE KEY":return yq.RSAPrivateKey.decode(b,"der");case "DSA PRIVATE KEY":return{type:"dsa",params:yq.DSAPrivateKey.decode(b,
"der")};case "EC PRIVATE KEY":return{curve:(b=yq.ECPrivateKey.decode(b,"der")).parameters.value,privateKey:b.privateKey};default:throw Error("unknown key type "+d);}}function g2(d,c,h,f){if((d=new ep(d.toArray())).length<c.byteLength()){var k=new ep(c.byteLength()-d.length);k.fill(0);d=ep.concat([k,d])}k=h.length;h=(h=GR(h,c)).mod(c);h=new ep(h.toArray());h.length<c.byteLength()&&(c=new ep(c.byteLength()-h.length),c.fill(0),h=ep.concat([c,h]));c=h;h=new ep(k);h.fill(1);k=new ep(k);return k.fill(0),
k=AA(f,k).update(h).update(new ep([0])).update(d).update(c).digest(),h=AA(f,k).update(h).digest(),{k:k=AA(f,k).update(h).update(new ep([1])).update(d).update(c).digest(),v:AA(f,k).update(h).digest()}}function GR(d,c){var h=new MK(d);d=(d.length<<3)-c.bitLength();return 0<d&&h.ishrn(d),h}function h2(d,c,h){var f;do{for(f=new ep(0);8*f.length<d.bitLength();)c.v=AA(h,c.k).update(c.v).digest(),f=ep.concat([f,c.v]);f=GR(f,d);c.k=AA(h,c.k).update(c.v).update(new ep([0])).digest();c.v=AA(h,c.k).update(c.v).digest()}while(-1!==
f.cmp(d));return f}function i2(d,c){if(0>=d.cmpn(0))throw Error("invalid sig");if(d.cmp(c)>=c)throw Error("invalid sig");}function eG(d){NK.Writable.call(this||pm);d=BA[d];if(!d)throw Error("Unknown message digest");(this||pm)._hashType=d.hash;(this||pm)._hash=j2(d.hash);(this||pm)._tag=d.id;(this||pm)._signType=d.sign}function fG(d){NK.Writable.call(this||pm);d=BA[d];if(!d)throw Error("Unknown message digest");(this||pm)._hash=j2(d.hash);(this||pm)._tag=d.id;(this||pm)._signType=d.sign}function k2(d){return new eG(d)}
function l2(d){return new fG(d)}function CA(d){(this||yn).curveType=jr[d];(this||yn).curveType||((this||yn).curveType={name:d});(this||yn).curve=new sfa.ec((this||yn).curveType.name);(this||yn).keys=void 0}function HR(d,c,h){Array.isArray(d)||(d=d.toArray());d=new Fw(d);h&&d.length<h&&(h=new Fw(h-d.length),h.fill(0),d=Fw.concat([h,d]));return c?d.toString(c):d}function m2(){throw Error("secure random number generation not supported by this browser\nuse chrome, FireFox or Internet Explorer 11");}function n2(d,
c){if("number"!=typeof d||d!=d)throw new TypeError("offset must be a number");if(d>o2||0>d)throw new TypeError("offset must be a uint32");if(d>p2||d>c)throw new RangeError("offset out of range");}function q2(d,c,h){if("number"!=typeof d||d!=d)throw new TypeError("size must be a number");if(d>o2||0>d)throw new TypeError("size must be a uint32");if(d+c>h||d>p2)throw new RangeError("buffer too small");}function r2(d,c,h,f){return IR.browser?(h=new Uint8Array(d.buffer,c,h),JR.getRandomValues(h),f?(IR.nextTick(function(){f(null,
d)}),void 0):d):f?(s2(h,function(k,n){if(k)return f(k);n.copy(d,c);f(null,d)}),void 0):(s2(h).copy(d,c),d)}function tfa(d){var c=[];d.replace(/[a-fA-F0-9]{2}/g,function(h){c.push(parseInt(h,16))});return c}function OK(d){return d&&d.__esModule?d:{default:d}}function t2(d,c){d=d||[];c=c||{};try{return new Blob(d,c)}catch(k){if("TypeError"!==k.name)throw k;for(var h=new ("undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof MSBlobBuilder?MSBlobBuilder:"undefined"!==typeof MozBlobBuilder?
MozBlobBuilder:WebKitBlobBuilder),f=0;f<d.length;f+=1)h.append(d[f]);return h.getBlob(c.type)}}function u2(d){for(var c=d.length,h=new ArrayBuffer(c),f=new Uint8Array(h),k=0;k<c;k++)f[k]=d.charCodeAt(k);return h}function v2(d,c){return t2([u2(d)],{type:c})}function w2(d,c){var h=new FileReader,f="function"===typeof h.readAsBinaryString;h.onloadend=function(k){var n=k.target.result||"";if(f)return c(n);k="";n=new Uint8Array(n);for(var b=n.byteLength,e=0;e<b;e++)k+=String.fromCharCode(n[e]);c(k)};f?
h.readAsBinaryString(d):h.readAsArrayBuffer(d)}function x2(d,c){w2(d,function(h){c(h)})}function ufa(d,c,h){return d.webkitSlice?d.webkitSlice(c,h):d.slice(c,h)}function vfa(d,c,h,f,k){if(0<h||f<c.size)c=ufa(c,h,f);y2.readAsArrayBuffer(c,function(n){d.append(n);k()})}function wfa(d,c,h,f,k){if(0<h||f<c.length)c=c.substring(h,f);d.appendBinary(c);k()}function PK(d){return d&&"object"===typeof d&&"default"in d?d["default"]:d}function gG(d){var c;if(!d||"object"!==typeof d)return d;if(Array.isArray(d)){var h=
[];var f=0;for(c=d.length;f<c;f++)h[f]=gG(d[f]);return h}if(d instanceof Date)return d.toISOString();if("undefined"!==typeof ArrayBuffer&&d instanceof ArrayBuffer||"undefined"!==typeof Blob&&d instanceof Blob)return d instanceof ArrayBuffer?"function"===typeof d.slice?d=d.slice(0):(f=new ArrayBuffer(d.byteLength),h=new Uint8Array(f),d=new Uint8Array(d),h.set(d),d=f):(f=d.size,h=d.type,d="function"===typeof d.slice?d.slice(0,f,h):d.webkitSlice(0,f,h)),d;h=Object.getPrototypeOf(d);null===h?h=!0:(h=
h.constructor,h="function"==typeof h&&h instanceof h&&z2.call(h)==xfa);if(!h)return d;h={};for(f in d)Object.prototype.hasOwnProperty.call(d,f)&&(c=gG(d[f]),"undefined"!==typeof c&&(h[f]=c));return h}function A2(d){var c=!1;return KR(function(h){if(c)throw Error("once called more than once");c=!0;d.apply(this,h)})}function B2(d){return KR(function(c){c=gG(c);var h=this,f="function"===typeof c[c.length-1]?c.pop():!1,k=new Promise(function(n,b){var e;try{var m=A2(function(a,g){a?b(a):n(g)});c.push(m);
(e=d.apply(h,c))&&"function"===typeof e.then&&n(e)}catch(a){b(a)}});f&&k.then(function(n){f(null,n)},f);return k})}function yfa(d,c,h){if(d.constructor.listeners("debug").length){for(var f=["api",d.name,c],k=0;k<h.length-1;k++)f.push(h[k]);d.constructor.emit("debug",f);var n=h[h.length-1];h[h.length-1]=function(b,e){var m=["api",d.name,c];m=m.concat(b?["error",b]:["success",e]);d.constructor.emit("debug",m);n(b,e)}}}function LR(d,c){for(var h={},f=0,k=c.length;f<k;f++){var n=c[f];n in d&&(h[n]=d[n])}return h}
function C2(d){return d}function zfa(d){return[{ok:d}]}function Afa(d){QK&&addEventListener("storage",function(c){d.emit(c.key)})}function oD(){RK.call(this);this._listeners={};Afa(this)}function MR(d){if("undefined"!==typeof console&&"function"===typeof console[d]){var c=Array.prototype.slice.call(arguments,1);console[d].apply(console,c)}}function D2(d){if(!d)return null;var c=d.split("/");return 2===c.length?c:1===c.length?[d,d]:null}function E2(d,c,h){return new Promise(function(f,k){d.get(c,function(n,
b){if(n){if(404!==n.status)return k(n);b={}}n=b._rev;b=h(b);if(!b)return f({updated:!1,rev:n});b._id=c;b._rev=n;f(Bfa(d,b,h))})})}function Bfa(d,c,h){return d.put(c).then(function(f){return{updated:!0,rev:f.rev}},function(f){if(409!==f.status)throw f;return E2(d,c._id,h)})}function F2(d){var c=d.length;if(0<c%4)throw Error("Invalid string. Length must be a multiple of 4");d=d.indexOf("=");-1===d&&(d=c);return[d,d===c?0:4-d%4]}function Cfa(d,c,h){for(var f=[],k=c;k<h;k+=3)c=(d[k]<<16&16711680)+(d[k+
1]<<8&65280)+(d[k+2]&255),f.push(gv[c>>18&63]+gv[c>>12&63]+gv[c>>6&63]+gv[c&63]);return f.join("")}function Gw(d){if(d>NR)throw new RangeError('The value "'+d+'" is invalid for option "size"');d=new Uint8Array(d);Object.setPrototypeOf(d,ef.prototype);return d}function ef(d,c,h){if("number"===typeof d){if("string"===typeof c)throw new TypeError('The "string" argument must be of type string. Received type number');return OR(d)}return G2(d,c,h)}function G2(d,c,h){if("string"===typeof d){var f=c;if("string"!==
typeof f||""===f)f="utf8";if(!ef.isEncoding(f))throw new TypeError("Unknown encoding: "+f);c=H2(d,f)|0;h=Gw(c);d=h.write(d,f);d!==c&&(h=h.slice(0,d));return h}if(ArrayBuffer.isView(d))return PR(d);if(null==d)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof d);if(Hw(d,ArrayBuffer)||d&&Hw(d.buffer,ArrayBuffer)||"undefined"!==typeof SharedArrayBuffer&&(Hw(d,SharedArrayBuffer)||d&&Hw(d.buffer,SharedArrayBuffer))){if(0>
c||d.byteLength<c)throw new RangeError('"offset" is outside of buffer bounds');if(d.byteLength<c+(h||0))throw new RangeError('"length" is outside of buffer bounds');d=void 0===c&&void 0===h?new Uint8Array(d):void 0===h?new Uint8Array(d,c):new Uint8Array(d,c,h);Object.setPrototypeOf(d,ef.prototype);return d}if("number"===typeof d)throw new TypeError('The "value" argument must not be of type number. Received type number');f=d.valueOf&&d.valueOf();if(null!=f&&f!==d)return ef.from(f,c,h);if(f=Dfa(d))return f;
if("undefined"!==typeof Symbol&&null!=Symbol.toPrimitive&&"function"===typeof d[Symbol.toPrimitive])return ef.from(d[Symbol.toPrimitive]("string"),c,h);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof d);}function I2(d){if("number"!==typeof d)throw new TypeError('"size" argument must be of type number');if(0>d)throw new RangeError('The value "'+d+'" is invalid for option "size"');}function OR(d){I2(d);return Gw(0>
d?0:QR(d)|0)}function PR(d){for(var c=0>d.length?0:QR(d.length)|0,h=Gw(c),f=0;f<c;f+=1)h[f]=d[f]&255;return h}function Dfa(d){if(ef.isBuffer(d)){var c=QR(d.length)|0,h=Gw(c);if(0===h.length)return h;d.copy(h,0,0,c);return h}if(void 0!==d.length)return(c="number"!==typeof d.length)||(c=d.length,c=c!==c),c?Gw(0):PR(d);if("Buffer"===d.type&&Array.isArray(d.data))return PR(d.data)}function QR(d){if(d>=NR)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+NR.toString(16)+" bytes");
return d|0}function H2(d,c){if(ef.isBuffer(d))return d.length;if(ArrayBuffer.isView(d)||Hw(d,ArrayBuffer))return d.byteLength;if("string"!==typeof d)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof d);var h=d.length,f=2<arguments.length&&!0===arguments[2];if(!f&&0===h)return 0;for(var k=!1;;)switch(c){case "ascii":case "latin1":case "binary":return h;case "utf8":case "utf-8":return RR(d).length;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return 2*
h;case "hex":return h>>>1;case "base64":return SK.toByteArray(J2(d)).length;default:if(k)return f?-1:RR(d).length;c=(""+c).toLowerCase();k=!0}}function Efa(d,c,h){var f=!1;if(void 0===c||0>c)c=0;if(c>this.length)return"";if(void 0===h||h>this.length)h=this.length;if(0>=h)return"";h>>>=0;c>>>=0;if(h<=c)return"";for(d||(d="utf8");;)switch(d){case "hex":d=this.length;if(!c||0>c)c=0;if(!h||0>h||h>d)h=d;for(d="";c<h;++c)d+=Ffa[this[c]];return d;case "utf8":case "utf-8":return K2(this,c,h);case "ascii":d=
"";for(h=Math.min(this.length,h);c<h;++c)d+=String.fromCharCode(this[c]&127);return d;case "latin1":case "binary":d="";for(h=Math.min(this.length,h);c<h;++c)d+=String.fromCharCode(this[c]);return d;case "base64":return c=0===c&&h===this.length?SK.fromByteArray(this):SK.fromByteArray(this.slice(c,h)),c;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":c=this.slice(c,h);h="";for(d=0;d<c.length;d+=2)h+=String.fromCharCode(c[d]+256*c[d+1]);return h;default:if(f)throw new TypeError("Unknown encoding: "+
d);d=(d+"").toLowerCase();f=!0}}function DA(d,c,h){var f=d[c];d[c]=d[h];d[h]=f}function L2(d,c,h,f,k){if(0===d.length)return-1;"string"===typeof h?(f=h,h=0):2147483647<h?h=2147483647:-2147483648>h&&(h=-2147483648);h=+h;h!==h&&(h=k?0:d.length-1);0>h&&(h=d.length+h);if(h>=d.length){if(k)return-1;h=d.length-1}else if(0>h)if(k)h=0;else return-1;"string"===typeof c&&(c=ef.from(c,f));if(ef.isBuffer(c))return 0===c.length?-1:M2(d,c,h,f,k);if("number"===typeof c)return c&=255,"function"===typeof Uint8Array.prototype.indexOf?
k?Uint8Array.prototype.indexOf.call(d,c,h):Uint8Array.prototype.lastIndexOf.call(d,c,h):M2(d,[c],h,f,k);throw new TypeError("val must be string, number or Buffer");}function M2(d,c,h,f,k){function n(a,g){return 1===b?a[g]:a.readUInt16BE(g*b)}var b=1,e=d.length,m=c.length;if(void 0!==f&&(f=String(f).toLowerCase(),"ucs2"===f||"ucs-2"===f||"utf16le"===f||"utf-16le"===f)){if(2>d.length||2>c.length)return-1;b=2;e/=2;m/=2;h/=2}if(k)for(f=-1;h<e;h++)if(n(d,h)===n(c,-1===f?0:h-f)){if(-1===f&&(f=h),h-f+1===
m)return f*b}else-1!==f&&(h-=h-f),f=-1;else for(h+m>e&&(h=e-m);0<=h;h--){e=!0;for(f=0;f<m;f++)if(n(d,h+f)!==n(c,f)){e=!1;break}if(e)return h}return-1}function K2(d,c,h){h=Math.min(d.length,h);for(var f=[];c<h;){var k=d[c],n=null,b=239<k?4:223<k?3:191<k?2:1;if(c+b<=h)switch(b){case 1:128>k&&(n=k);break;case 2:var e=d[c+1];128===(e&192)&&(k=(k&31)<<6|e&63,127<k&&(n=k));break;case 3:e=d[c+1];var m=d[c+2];128===(e&192)&&128===(m&192)&&(k=(k&15)<<12|(e&63)<<6|m&63,2047<k&&(55296>k||57343<k)&&(n=k));break;
case 4:e=d[c+1];m=d[c+2];var a=d[c+3];128===(e&192)&&128===(m&192)&&128===(a&192)&&(k=(k&15)<<18|(e&63)<<12|(m&63)<<6|a&63,65535<k&&1114112>k&&(n=k))}null===n?(n=65533,b=1):65535<n&&(n-=65536,f.push(n>>>10&1023|55296),n=56320|n&1023);f.push(n);c+=b}d=f.length;if(d<=N2)f=String.fromCharCode.apply(String,f);else{h="";for(c=0;c<d;)h+=String.fromCharCode.apply(String,f.slice(c,c+=N2));f=h}return f}function fo(d,c,h){if(0!==d%1||0>d)throw new RangeError("offset is not uint");if(d+c>h)throw new RangeError("Trying to access beyond buffer length");
}function zq(d,c,h,f,k,n){if(!ef.isBuffer(d))throw new TypeError('"buffer" argument must be a Buffer instance');if(c>k||c<n)throw new RangeError('"value" argument is out of bounds');if(h+f>d.length)throw new RangeError("Index out of range");}function O2(d,c,h,f,k,n){if(h+f>d.length)throw new RangeError("Index out of range");if(0>h)throw new RangeError("Index out of range");}function P2(d,c,h,f,k){c=+c;h>>>=0;k||O2(d,c,h,4);pD.write(d,c,h,f,23,4);return h+4}function Q2(d,c,h,f,k){c=+c;h>>>=0;k||O2(d,
c,h,8);pD.write(d,c,h,f,52,8);return h+8}function J2(d){d=d.split("=")[0];d=d.trim().replace(Gfa,"");if(2>d.length)return"";for(;0!==d.length%4;)d+="=";return d}function RR(d,c){c=c||Infinity;for(var h,f=d.length,k=null,n=[],b=0;b<f;++b){h=d.charCodeAt(b);if(55295<h&&57344>h){if(!k){if(56319<h){-1<(c-=3)&&n.push(239,191,189);continue}else if(b+1===f){-1<(c-=3)&&n.push(239,191,189);continue}k=h;continue}if(56320>h){-1<(c-=3)&&n.push(239,191,189);k=h;continue}h=(k-55296<<10|h-56320)+65536}else k&&-1<
(c-=3)&&n.push(239,191,189);k=null;if(128>h){if(0>--c)break;n.push(h)}else if(2048>h){if(0>(c-=2))break;n.push(h>>6|192,h&63|128)}else if(65536>h){if(0>(c-=3))break;n.push(h>>12|224,h>>6&63|128,h&63|128)}else if(1114112>h){if(0>(c-=4))break;n.push(h>>18|240,h>>12&63|128,h>>6&63|128,h&63|128)}else throw Error("Invalid code point");}return n}function R2(d){for(var c=[],h=0;h<d.length;++h)c.push(d.charCodeAt(h)&255);return c}function hG(d,c,h,f){for(var k=0;k<f&&!(k+h>=c.length||k>=d.length);++k)c[k+
h]=d[k];return k}function Hw(d,c){return d instanceof c||null!=d&&null!=d.constructor&&null!=d.constructor.name&&d.constructor.name===c.name}function ny(d){if("object"!==typeof d||null===d)throw new TypeError("First argument must be an abstract-leveldown compliant store");(this||Iw).db=d;(this||Iw)._ended=!1;(this||Iw)._nexting=!1}function At(d){if("object"!==typeof d||null===d)throw new TypeError("First argument must be an abstract-leveldown compliant store");(this||zn).db=d;(this||zn)._operations=
[];(this||zn)._written=!1}function Hl(d){(this||kr).status="new";(this||kr).supports=Hfa(d,{status:!0})}function S2(d,c){var h={},f;for(f in c)if(Ifa.call(c,f)){var k=c[f];-1!==Jfa.indexOf(f)&&(k=d._serializeKey(k));h[f]=k}return h}function qD(d,c){T2.call(this||Bt,d);(this||Bt)._options=c;(this||Bt)._iterator=null;(this||Bt)._operations=[]}function EA(d){U2.call(this||go,d.supports||{});Kfa.forEach(function(c){"function"!==typeof d[c]||(this||go).supports.additionalMethods[c]||((this||go).supports.additionalMethods[c]=
!0)},this||go);(this||go)._db=d;(this||go)._operations=[];V2(this||go)}function Lfa(d){W2.concat("iterator").forEach(function(c){d["_"+c]=function(){return(this||go)._db[c].apply((this||go)._db,arguments)}});Object.keys(d.supports.additionalMethods).forEach(function(c){d[c]=function(){return(this||go)._db[c].apply((this||go)._db,arguments)}})}function V2(d){W2.forEach(function(c){d["_"+c]=function(){(this||go)._operations.push({method:c,args:arguments})}});Object.keys(d.supports.additionalMethods).forEach(function(c){d[c]=
function(){(this||go)._operations.push({method:c,args:arguments})}});d._iterator=function(c){c=new X2(d,c);(this||go)._operations.push({iterator:c});return c}}function Y2(){if(Z2)return $2;Z2=!0;return $2=$u.EventEmitter}function rD(){function d(f,k,n){n||(n=Error);var b=function(e,m,a){return n.call(this,"string"===typeof k?k:k(e,m,a))||this};$jscomp.inherits(b,n);b.prototype.name=n.name;b.prototype.code=f;h[f]=b}function c(f,k){if(Array.isArray(f)){var n=f.length;f=f.map(function(b){return String(b)});
return 2<n?"one of "+k+" "+f.slice(0,n-1).join(", ")+", or "+f[n-1]:2===n?"one of "+k+" "+f[0]+" or "+f[1]:"of "+k+" "+f[0]}return"of "+k+" "+String(f)}if(a3)return SR;a3=!0;var h={};d("ERR_INVALID_OPT_VALUE",function(f,k){return'The value "'+k+'" is invalid for option "'+f+'"'},TypeError);d("ERR_INVALID_ARG_TYPE",function(f,k,n){var b;if(b="string"===typeof k)b="not "===k.substr(0,4);b?(b="must not be",k=k.replace(/^not /,"")):b="must be";var e=void 0;if(void 0===e||e>f.length)e=f.length;" argument"===
f.substring(e-9,e)?f="The "+f+" "+b+" "+c(k,"type"):(e=void 0,"number"!==typeof e&&(e=0),e=e+1>f.length?!1:-1!==f.indexOf(".",e),f='The "'+f+'" '+(e?"property":"argument")+" "+b+" "+c(k,"type"));return f+(". Received type "+typeof n)},TypeError);d("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF");d("ERR_METHOD_NOT_IMPLEMENTED",function(f){return"The "+f+" method is not implemented"});d("ERR_STREAM_PREMATURE_CLOSE","Premature close");d("ERR_STREAM_DESTROYED",function(f){return"Cannot call "+f+
" after a stream was destroyed"});d("ERR_MULTIPLE_CALLBACK","Callback called multiple times");d("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable");d("ERR_STREAM_WRITE_AFTER_END","write after end");d("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);d("ERR_UNKNOWN_ENCODING",function(f){return"Unknown encoding: "+f},TypeError);d("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event");SR.codes=h;return SR}function TR(d){try{if(!UR.localStorage)return!1}catch(c){return!1}d=
UR.localStorage[d];return null==d?!1:"true"===String(d).toLowerCase()}function b3(d,c){for(var h in d)c[h]=d[h]}function FA(d,c,h){return hv(d,c,h)}function Mfa(d){if(!d)return"utf8";for(var c;;)switch(d){case "utf8":case "utf-8":return"utf8";case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return"utf16le";case "latin1":case "binary":return"latin1";case "base64":case "ascii":case "hex":return d;default:if(c)return;d=(""+d).toLowerCase();c=!0}}function iG(d){var c=Mfa(d);if("string"!==typeof c&&
(VR.isEncoding===c3||!c3(d)))throw Error("Unknown encoding: "+d);this.encoding=c||d;switch(this.encoding){case "utf16le":this.text=Nfa;this.end=Ofa;d=4;break;case "utf8":this.fillLast=Pfa;d=4;break;case "base64":this.text=Qfa;this.end=Rfa;d=3;break;default:this.write=Sfa;this.end=Tfa;return}this.lastTotal=this.lastNeed=0;this.lastChar=VR.allocUnsafe(d)}function WR(d){return 127>=d?0:6===d>>5?2:14===d>>4?3:30===d>>3?4:2===d>>6?-1:-2}function Ufa(d,c,h){var f=c.length-1;if(f<h)return 0;var k=WR(c[f]);
if(0<=k)return 0<k&&(d.lastNeed=k-1),k;if(--f<h||-2===k)return 0;k=WR(c[f]);if(0<=k)return 0<k&&(d.lastNeed=k-2),k;if(--f<h||-2===k)return 0;k=WR(c[f]);return 0<=k?(0<k&&(2===k?k=0:d.lastNeed=k-3),k):0}function Pfa(d){var c=this.lastTotal-this.lastNeed;a:if(128!==(d[0]&192)){this.lastNeed=0;var h="\ufffd"}else{if(1<this.lastNeed&&1<d.length){if(128!==(d[1]&192)){this.lastNeed=1;h="\ufffd";break a}if(2<this.lastNeed&&2<d.length&&128!==(d[2]&192)){this.lastNeed=2;h="\ufffd";break a}}h=void 0}if(void 0!==
h)return h;if(this.lastNeed<=d.length)return d.copy(this.lastChar,c,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);d.copy(this.lastChar,c,0,d.length);this.lastNeed-=d.length}function Nfa(d,c){if(0===(d.length-c)%2){if(c=d.toString("utf16le",c)){var h=c.charCodeAt(c.length-1);if(55296<=h&&56319>=h)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=d[d.length-2],this.lastChar[1]=d[d.length-1],c.slice(0,-1)}return c}this.lastNeed=1;this.lastTotal=2;this.lastChar[0]=d[d.length-
1];return d.toString("utf16le",c,d.length-1)}function Ofa(d){d=d&&d.length?this.write(d):"";return this.lastNeed?d+this.lastChar.toString("utf16le",0,this.lastTotal-this.lastNeed):d}function Qfa(d,c){var h=(d.length-c)%3;if(0===h)return d.toString("base64",c);this.lastNeed=3-h;this.lastTotal=3;1===h?this.lastChar[0]=d[d.length-1]:(this.lastChar[0]=d[d.length-2],this.lastChar[1]=d[d.length-1]);return d.toString("base64",c,d.length-h)}function Rfa(d){d=d&&d.length?this.write(d):"";return this.lastNeed?
d+this.lastChar.toString("base64",0,3-this.lastNeed):d}function Sfa(d){return d.toString(this.encoding)}function Tfa(d){return d&&d.length?this.write(d):""}function YR(){function d(k){var n=!1;return function(){if(!n){n=!0;for(var b=arguments.length,e=Array(b),m=0;m<b;m++)e[m]=arguments[m];k.apply(this,e)}}}function c(){}function h(k,n,b){if("function"===typeof n)return h(k,null,n);n||(n={});b=d(b||c);var e=n.readable||!1!==n.readable&&k.readable,m=n.writable||!1!==n.writable&&k.writable,a=function(){k.writable||
l()},g=k._writableState&&k._writableState.finished,l=function(){m=!1;g=!0;e||b.call(k)},r=k._readableState&&k._readableState.endEmitted,v=function(){e=!1;r=!0;m||b.call(k)},y=function(F){b.call(k,F)},A=function(){var F;if(e&&!r)return k._readableState&&k._readableState.ended||(F=new f),b.call(k,F);if(m&&!g)return k._writableState&&k._writableState.ended||(F=new f),b.call(k,F)},E=function(){k.req.on("finish",l)};if(k.setHeader&&"function"===typeof k.abort)if(k.on("complete",l),k.on("abort",A),k.req)E();
else k.on("request",E);else m&&!k._writableState&&(k.on("end",a),k.on("close",a));k.on("end",v);k.on("finish",l);if(!1!==n.error)k.on("error",y);k.on("close",A);return function(){k.removeListener("complete",l);k.removeListener("abort",A);k.removeListener("request",E);k.req&&k.req.removeListener("finish",l);k.removeListener("end",a);k.removeListener("close",a);k.removeListener("finish",l);k.removeListener("end",v);k.removeListener("error",y);k.removeListener("close",A)}}if(d3)return e3;d3=!0;var f=
rD().codes.ERR_STREAM_PREMATURE_CLOSE;return e3=h}function Vfa(){if(f3)return g3;f3=!0;return g3=function(){throw Error("Readable.from is not available in the browser");}}function Wfa(){function d(e,m){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(e);m&&(g=g.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable}));a.push.apply(a,g)}return a}function c(e){for(var m=1;m<arguments.length;m++){var a=null!=arguments[m]?arguments[m]:{};m%2?
d(Object(a),!0).forEach(function(g){var l=a[g];g in e?Object.defineProperty(e,g,{value:l,enumerable:!0,configurable:!0,writable:!0}):e[g]=l}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):d(Object(a)).forEach(function(g){Object.defineProperty(e,g,Object.getOwnPropertyDescriptor(a,g))})}return e}function h(e,m){for(var a=0;a<m.length;a++){var g=m[a];g.enumerable=g.enumerable||!1;g.configurable=!0;"value"in g&&(g.writable=!0);Object.defineProperty(e,
g.key,g)}}function f(e,m,a){m&&h(e.prototype,m);a&&h(e,a);return e}if(h3)return i3;h3=!0;var k=Mi.Buffer,n=j3.inspect,b=n&&n.custom||"inspect";return i3=function(){function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.tail=this.head=null;this.length=0}f(e,[{key:"push",value:function(m){m={data:m,next:null};0<this.length?this.tail.next=m:this.head=m;this.tail=m;++this.length}},{key:"unshift",value:function(m){m={data:m,next:this.head};0===this.length&&(this.tail=
m);this.head=m;++this.length}},{key:"shift",value:function(){if(0!==this.length){var m=this.head.data;this.head=1===this.length?this.tail=null:this.head.next;--this.length;return m}}},{key:"clear",value:function(){this.head=this.tail=null;this.length=0}},{key:"join",value:function(m){if(0===this.length)return"";for(var a=this.head,g=""+a.data;a=a.next;)g+=m+a.data;return g}},{key:"concat",value:function(m){if(0===this.length)return k.alloc(0);m=k.allocUnsafe(m>>>0);for(var a=this.head,g=0;a;)k.prototype.copy.call(a.data,
m,g),g+=a.data.length,a=a.next;return m}},{key:"consume",value:function(m,a){m<this.head.data.length?(a=this.head.data.slice(0,m),this.head.data=this.head.data.slice(m)):a=m===this.head.data.length?this.shift():a?this._getString(m):this._getBuffer(m);return a}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(m){var a=this.head,g=1,l=a.data;for(m-=l.length;a=a.next;){var r=a.data,v=m>r.length?r.length:m;l=v===r.length?l+r:l+r.slice(0,m);m-=v;if(0===m){v===r.length?
(++g,this.head=a.next?a.next:this.tail=null):(this.head=a,a.data=r.slice(v));break}++g}this.length-=g;return l}},{key:"_getBuffer",value:function(m){var a=k.allocUnsafe(m),g=this.head,l=1;g.data.copy(a);for(m-=g.data.length;g=g.next;){var r=g.data,v=m>r.length?r.length:m;r.copy(a,a.length-m,0,v);m-=v;if(0===m){v===r.length?(++l,this.head=g.next?g.next:this.tail=null):(this.head=g,g.data=r.slice(v));break}++l}this.length-=l;return a}},{key:b,value:function(m,a){return n(this,c({},a,{depth:0,customInspect:!1}))}}]);
return e}()}function k3(){function d(k,n){h(k,n);c(k)}function c(k){k._writableState&&!k._writableState.emitClose||k._readableState&&!k._readableState.emitClose||k.emit("close")}function h(k,n){k.emit("error",n)}if(l3)return m3;l3=!0;var f=tj;return m3={destroy:function(k,n){var b=this,e=this._writableState&&this._writableState.destroyed;if(this._readableState&&this._readableState.destroyed||e)return n?n(k):k&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=
!0,f.nextTick(h,this,k)):f.nextTick(h,this,k)),this;this._readableState&&(this._readableState.destroyed=!0);this._writableState&&(this._writableState.destroyed=!0);this._destroy(k||null,function(m){!n&&m?b._writableState?b._writableState.errorEmitted?f.nextTick(c,b):(b._writableState.errorEmitted=!0,f.nextTick(d,b,m)):f.nextTick(d,b,m):n?(f.nextTick(c,b),n(m)):f.nextTick(c,b)});return this},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,
this._readableState.ended=!1,this._readableState.endEmitted=!1);this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(k,n){var b=k._readableState,e=k._writableState;b&&b.autoDestroy||e&&e.autoDestroy?k.destroy(n):k.emit("error",n)}}}function n3(){if(o3)return p3;o3=!0;var d=rD().codes.ERR_INVALID_OPT_VALUE;
return p3={getHighWaterMark:function(c,h,f,k){h=null!=h.highWaterMark?h.highWaterMark:k?h[f]:null;if(null!=h){if(!isFinite(h)||Math.floor(h)!==h||0>h)throw new d(k?f:"highWaterMark",h);return Math.floor(h)}return c.objectMode?16:16384}}}function q3(){function d(T){var U=this;this.entry=this.next=null;this.finish=function(){var pa=U.entry;for(U.entry=null;pa;){var fa=pa.callback;T.pendingcb--;fa(void 0);pa=pa.next}T.corkedRequestsFree.next=U}}function c(){}function h(T,U,pa){l=l||sD();T=T||{};"boolean"!==
typeof pa&&(pa=U instanceof l);this.objectMode=!!T.objectMode;pa&&(this.objectMode=this.objectMode||!!T.writableObjectMode);this.highWaterMark=F(this,T,"writableHighWaterMark",pa);this.destroyed=this.finished=this.ended=this.ending=this.needDrain=this.finalCalled=!1;this.decodeStrings=!1!==T.decodeStrings;this.defaultEncoding=T.defaultEncoding||"utf8";this.length=0;this.writing=!1;this.corked=0;this.sync=!0;this.bufferProcessing=!1;this.onwrite=function(fa){var oa=U._writableState,gb=oa.sync,zb=oa.writecb;
if("function"!==typeof zb)throw new N;oa.writing=!1;oa.writecb=null;oa.length-=oa.writelen;oa.writelen=0;fa?(--oa.pendingcb,gb?(g.nextTick(zb,fa),g.nextTick(a,U,oa),U._writableState.errorEmitted=!0,K(U,fa)):(zb(fa),U._writableState.errorEmitted=!0,K(U,fa),a(U,oa))):((fa=e(oa)||U.destroyed)||oa.corked||oa.bufferProcessing||!oa.bufferedRequest||b(U,oa),gb?g.nextTick(n,U,oa,fa,zb):n(U,oa,fa,zb))};this.writecb=null;this.writelen=0;this.lastBufferedRequest=this.bufferedRequest=null;this.pendingcb=0;this.errorEmitted=
this.prefinished=!1;this.emitClose=!1!==T.emitClose;this.autoDestroy=!!T.autoDestroy;this.bufferedRequestCount=0;this.corkedRequestsFree=new d(this)}function f(T){l=l||sD();var U=this instanceof l;if(!U&&!aa.call(f,this))return new f(T);this._writableState=new h(T,this,U);this.writable=!0;T&&("function"===typeof T.write&&(this._write=T.write),"function"===typeof T.writev&&(this._writev=T.writev),"function"===typeof T.destroy&&(this._destroy=T.destroy),"function"===typeof T.final&&(this._final=T.final));
v.call(this)}function k(T,U,pa,fa,oa,gb,zb){U.writelen=fa;U.writecb=zb;U.writing=!0;U.sync=!0;if(U.destroyed)U.onwrite(new X("write"));else pa?T._writev(oa,U.onwrite):T._write(oa,gb,U.onwrite);U.sync=!1}function n(T,U,pa,fa){!pa&&0===U.length&&U.needDrain&&(U.needDrain=!1,T.emit("drain"));U.pendingcb--;fa();a(T,U)}function b(T,U){U.bufferProcessing=!0;var pa=U.bufferedRequest;if(T._writev&&pa&&pa.next){var fa=Array(U.bufferedRequestCount),oa=U.corkedRequestsFree;oa.entry=pa;for(var gb=0,zb=!0;pa;)fa[gb]=
pa,pa.isBuf||(zb=!1),pa=pa.next,gb+=1;fa.allBuffers=zb;k(T,U,!0,U.length,fa,"",oa.finish);U.pendingcb++;U.lastBufferedRequest=null;oa.next?(U.corkedRequestsFree=oa.next,oa.next=null):U.corkedRequestsFree=new d(U);U.bufferedRequestCount=0}else{for(;pa&&(fa=pa.chunk,k(T,U,!1,U.objectMode?1:fa.length,fa,pa.encoding,pa.callback),pa=pa.next,U.bufferedRequestCount--,!U.writing););null===pa&&(U.lastBufferedRequest=null)}U.bufferedRequest=pa;U.bufferProcessing=!1}function e(T){return T.ending&&0===T.length&&
null===T.bufferedRequest&&!T.finished&&!T.writing}function m(T,U){T._final(function(pa){U.pendingcb--;pa&&K(T,pa);U.prefinished=!0;T.emit("prefinish");a(T,U)})}function a(T,U){var pa=e(U);pa&&(U.prefinished||U.finalCalled||("function"!==typeof T._final||U.destroyed?(U.prefinished=!0,T.emit("prefinish")):(U.pendingcb++,U.finalCalled=!0,g.nextTick(m,T,U))),0===U.pendingcb&&(U.finished=!0,T.emit("finish"),U.autoDestroy&&(U=T._readableState,(!U||U.autoDestroy&&U.endEmitted)&&T.destroy())));return pa}
if(r3)return ZR;r3=!0;var g=tj;ZR=f;var l;f.WritableState=h;var r={deprecate:Xfa},v=Y2(),y=Mi.Buffer,A=Yfa.Uint8Array||function(){},E=k3(),F=n3().getHighWaterMark,H=rD().codes,I=H.ERR_INVALID_ARG_TYPE,M=H.ERR_METHOD_NOT_IMPLEMENTED,N=H.ERR_MULTIPLE_CALLBACK,W=H.ERR_STREAM_CANNOT_PIPE,X=H.ERR_STREAM_DESTROYED,ea=H.ERR_STREAM_NULL_VALUES,Aa=H.ERR_STREAM_WRITE_AFTER_END,Ma=H.ERR_UNKNOWN_ENCODING,K=E.errorOrDestroy;vl(f,v);h.prototype.getBuffer=function(){for(var T=this.bufferedRequest,U=[];T;)U.push(T),
T=T.next;return U};(function(){try{Object.defineProperty(h.prototype,"buffer",{get:r.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(T){}})();if("function"===typeof Symbol&&Symbol.hasInstance&&"function"===typeof Function.prototype[Symbol.hasInstance]){var aa=Function.prototype[Symbol.hasInstance];Object.defineProperty(f,Symbol.hasInstance,{value:function(T){return aa.call(this,T)?!0:this!==f?!1:T&&T._writableState instanceof
h}})}else aa=function(T){return T instanceof this};f.prototype.pipe=function(){K(this,new W)};f.prototype.write=function(T,U,pa){var fa=this._writableState,oa=!1,gb;if(gb=!fa.objectMode)gb=T,gb=y.isBuffer(gb)||gb instanceof A;gb&&!y.isBuffer(T)&&(T=y.from(T));"function"===typeof U&&(pa=U,U=null);gb?U="buffer":U||(U=fa.defaultEncoding);"function"!==typeof pa&&(pa=c);if(fa.ending)fa=pa,pa=new Aa,K(this,pa),g.nextTick(fa,pa);else{var zb;if(!(zb=gb)){zb=T;var va=pa,ma;null===zb?ma=new ea:"string"===typeof zb||
fa.objectMode||(ma=new I("chunk",["string","Buffer"],zb));ma?(K(this,ma),g.nextTick(va,ma),zb=!1):zb=!0}zb&&(fa.pendingcb++,oa=gb,oa||(ma=T,fa.objectMode||!1===fa.decodeStrings||"string"!==typeof ma||(ma=y.from(ma,U)),T!==ma&&(oa=!0,U="buffer",T=ma)),gb=fa.objectMode?1:T.length,fa.length+=gb,ma=fa.length<fa.highWaterMark,ma||(fa.needDrain=!0),fa.writing||fa.corked?(gb=fa.lastBufferedRequest,fa.lastBufferedRequest={chunk:T,encoding:U,isBuf:oa,callback:pa,next:null},gb?gb.next=fa.lastBufferedRequest:
fa.bufferedRequest=fa.lastBufferedRequest,fa.bufferedRequestCount+=1):k(this,fa,!1,gb,T,U,pa),oa=ma)}return oa};f.prototype.cork=function(){this._writableState.corked++};f.prototype.uncork=function(){var T=this._writableState;T.corked&&(T.corked--,T.writing||T.corked||T.bufferProcessing||!T.bufferedRequest||b(this,T))};f.prototype.setDefaultEncoding=function(T){"string"===typeof T&&(T=T.toLowerCase());if(!(-1<"hex utf8 utf-8 ascii binary base64 ucs2 ucs-2 utf16le utf-16le raw".split(" ").indexOf((T+
"").toLowerCase())))throw new Ma(T);this._writableState.defaultEncoding=T;return this};Object.defineProperty(f.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});Object.defineProperty(f.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});f.prototype._write=function(T,U,pa){pa(new M("_write()"))};f.prototype._writev=null;f.prototype.end=function(T,U,pa){var fa=this._writableState;
"function"===typeof T?(pa=T,U=T=null):"function"===typeof U&&(pa=U,U=null);null!==T&&void 0!==T&&this.write(T,U);fa.corked&&(fa.corked=1,this.uncork());if(!fa.ending){T=pa;fa.ending=!0;a(this,fa);if(T)if(fa.finished)g.nextTick(T);else this.once("finish",T);fa.ended=!0;this.writable=!1}return this};Object.defineProperty(f.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});Object.defineProperty(f.prototype,"destroyed",{enumerable:!1,get:function(){return void 0===
this._writableState?!1:this._writableState.destroyed},set:function(T){this._writableState&&(this._writableState.destroyed=T)}});f.prototype.destroy=E.destroy;f.prototype._undestroy=E.undestroy;f.prototype._destroy=function(T,U){U(T)};return ZR}function sD(){function d(a){if(!(this instanceof d))return new d(a);n.call(this,a);b.call(this,a);this.allowHalfOpen=!0;a&&(!1===a.readable&&(this.readable=!1),!1===a.writable&&(this.writable=!1),!1===a.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",
c)))}function c(){this._writableState.ended||f.nextTick(h,this)}function h(a){a.end()}if(s3)return $R;s3=!0;var f=tj,k=Object.keys||function(a){var g=[],l;for(l in a)g.push(l);return g};$R=d;var n=t3(),b=q3();vl(d,n);k=k(b.prototype);for(var e=0;e<k.length;e++){var m=k[e];d.prototype[m]||(d.prototype[m]=b.prototype[m])}Object.defineProperty(d.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});Object.defineProperty(d.prototype,"writableBuffer",
{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});Object.defineProperty(d.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});Object.defineProperty(d.prototype,"destroyed",{enumerable:!1,get:function(){return void 0===this._readableState||void 0===this._writableState?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(a){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=
a,this._writableState.destroyed=a)}});return $R}function Zfa(){function d(F,H,I){H in F?Object.defineProperty(F,H,{value:I,enumerable:!0,configurable:!0,writable:!0}):F[H]=I;return F}function c(F,H){return{value:F,done:H}}function h(F){var H=F[m];if(null!==H){var I=F[y].read();null!==I&&(F[r]=null,F[m]=null,F[a]=null,H(c(I,!1)))}}function f(F){n.nextTick(h,F)}function k(F,H){return function(I,M){F.then(function(){if(H[l])I(c(void 0,!0));else H[v](I,M)},M)}}if(u3)return v3;u3=!0;var n=tj,b,e=YR(),
m=Symbol("lastResolve"),a=Symbol("lastReject"),g=Symbol("error"),l=Symbol("ended"),r=Symbol("lastPromise"),v=Symbol("handlePromise"),y=Symbol("stream"),A=Object.getPrototypeOf(function(){}),E=Object.setPrototypeOf((b={get stream(){return this[y]},next:function(){var F=this,H=this[g];if(null!==H)return Promise.reject(H);if(this[l])return Promise.resolve(c(void 0,!0));if(this[y].destroyed)return new Promise(function(I,M){n.nextTick(function(){F[g]?M(F[g]):I(c(void 0,!0))})});if(H=this[r])H=new Promise(k(H,
this));else{H=this[y].read();if(null!==H)return Promise.resolve(c(H,!1));H=new Promise(this[v])}return this[r]=H}},d(b,Symbol.asyncIterator,function(){return this}),d(b,"return",function(){var F=this;return new Promise(function(H,I){F[y].destroy(null,function(M){M?I(M):H(c(void 0,!0))})})}),b),A);return v3=function(F){var H,I=Object.create(E,(H={},d(H,y,{value:F,writable:!0}),d(H,m,{value:null,writable:!0}),d(H,a,{value:null,writable:!0}),d(H,g,{value:null,writable:!0}),d(H,l,{value:F._readableState.endEmitted,
writable:!0}),d(H,v,{value:function(M,N){var W=I[y].read();W?(I[r]=null,I[m]=null,I[a]=null,M(c(W,!1))):(I[m]=M,I[a]=N)},writable:!0}),H));I[r]=null;e(F,function(M){if(M&&"ERR_STREAM_PREMATURE_CLOSE"!==M.code){var N=I[a];null!==N&&(I[r]=null,I[m]=null,I[a]=null,N(M));I[g]=M}else M=I[m],null!==M&&(I[r]=null,I[m]=null,I[a]=null,M(c(void 0,!0))),I[l]=!0});F.on("readable",f.bind(null,I));return I}}function t3(){function d(ta,Na,Kb){if("function"===typeof ta.prependListener)return ta.prependListener(Na,
Kb);if(ta._events&&ta._events[Na])Array.isArray(ta._events[Na])?ta._events[Na].unshift(Kb):ta._events[Na]=[Kb,ta._events[Na]];else ta.on(Na,Kb)}function c(ta,Na,Kb){M=M||sD();ta=ta||{};"boolean"!==typeof Kb&&(Kb=Na instanceof M);this.objectMode=!!ta.objectMode;Kb&&(this.objectMode=this.objectMode||!!ta.readableObjectMode);this.highWaterMark=K(this,ta,"readableHighWaterMark",Kb);this.buffer=new Ma;this.length=0;this.pipes=null;this.pipesCount=0;this.flowing=null;this.reading=this.endEmitted=this.ended=
!1;this.sync=!0;this.resumeScheduled=this.readableListening=this.emittedReadable=this.needReadable=!1;this.paused=!0;this.emitClose=!1!==ta.emitClose;this.autoDestroy=!!ta.autoDestroy;this.destroyed=!1;this.defaultEncoding=ta.defaultEncoding||"utf8";this.awaitDrain=0;this.readingMore=!1;this.encoding=this.decoder=null;ta.encoding&&(oa||(oa=aS.StringDecoder),this.decoder=new oa(ta.encoding),this.encoding=ta.encoding)}function h(ta){M=M||sD();if(!(this instanceof h))return new h(ta);this._readableState=
new c(ta,this,this instanceof M);this.readable=!0;ta&&("function"===typeof ta.read&&(this._read=ta.read),"function"===typeof ta.destroy&&(this._destroy=ta.destroy));N.call(this)}function f(ta,Na,Kb,kc,Vb){Aa("readableAddChunk",Na);var jc=ta._readableState;if(null===Na)jc.reading=!1,Aa("onEofChunk"),jc.ended||(jc.decoder&&(Na=jc.decoder.end())&&Na.length&&(jc.buffer.push(Na),jc.length+=jc.objectMode?1:Na.length),jc.ended=!0,jc.sync?b(ta):(jc.needReadable=!1,jc.emittedReadable||(jc.emittedReadable=
!0,e(ta))));else{if(!Vb){Vb=Na;var Qc;W.isBuffer(Vb)||Vb instanceof X||"string"===typeof Vb||void 0===Vb||jc.objectMode||(Qc=new T("chunk",["string","Buffer","Uint8Array"],Vb));var Pb=Qc}if(Pb)va(ta,Pb);else if(jc.objectMode||Na&&0<Na.length)if("string"===typeof Na||jc.objectMode||Object.getPrototypeOf(Na)===W.prototype||(Na=W.from(Na)),kc)jc.endEmitted?va(ta,new fa):k(ta,jc,Na,!0);else if(jc.ended)va(ta,new U);else{if(jc.destroyed)return!1;jc.reading=!1;jc.decoder&&!Kb?(Na=jc.decoder.write(Na),jc.objectMode||
0!==Na.length?k(ta,jc,Na,!1):m(ta,jc)):k(ta,jc,Na,!1)}else kc||(jc.reading=!1,m(ta,jc))}return!jc.ended&&(jc.length<jc.highWaterMark||0===jc.length)}function k(ta,Na,Kb,kc){Na.flowing&&0===Na.length&&!Na.sync?(Na.awaitDrain=0,ta.emit("data",Kb)):(Na.length+=Na.objectMode?1:Kb.length,kc?Na.buffer.unshift(Kb):Na.buffer.push(Kb),Na.needReadable&&b(ta));m(ta,Na)}function n(ta,Na){if(0>=ta||0===Na.length&&Na.ended)return 0;if(Na.objectMode)return 1;if(ta!==ta)return Na.flowing&&Na.length?Na.buffer.head.data.length:
Na.length;if(ta>Na.highWaterMark){var Kb=ta;1073741824<=Kb?Kb=1073741824:(Kb--,Kb|=Kb>>>1,Kb|=Kb>>>2,Kb|=Kb>>>4,Kb|=Kb>>>8,Kb|=Kb>>>16,Kb++);Na.highWaterMark=Kb}return ta<=Na.length?ta:Na.ended?Na.length:(Na.needReadable=!0,0)}function b(ta){var Na=ta._readableState;Aa("emitReadable",Na.needReadable,Na.emittedReadable);Na.needReadable=!1;Na.emittedReadable||(Aa("emitReadable",Na.flowing),Na.emittedReadable=!0,I.nextTick(e,ta))}function e(ta){var Na=ta._readableState;Aa("emitReadable_",Na.destroyed,
Na.length,Na.ended);Na.destroyed||!Na.length&&!Na.ended||(ta.emit("readable"),Na.emittedReadable=!1);Na.needReadable=!Na.flowing&&!Na.ended&&Na.length<=Na.highWaterMark;y(ta)}function m(ta,Na){Na.readingMore||(Na.readingMore=!0,I.nextTick(a,ta,Na))}function a(ta,Na){for(;!Na.reading&&!Na.ended&&(Na.length<Na.highWaterMark||Na.flowing&&0===Na.length);){var Kb=Na.length;Aa("maybeReadMore read 0");ta.read(0);if(Kb===Na.length)break}Na.readingMore=!1}function g(ta){return function(){var Na=ta._readableState;
Aa("pipeOnDrain",Na.awaitDrain);Na.awaitDrain&&Na.awaitDrain--;0===Na.awaitDrain&&ta.listeners("data").length&&(Na.flowing=!0,y(ta))}}function l(ta){var Na=ta._readableState;Na.readableListening=0<ta.listenerCount("readable");Na.resumeScheduled&&!Na.paused?Na.flowing=!0:0<ta.listenerCount("data")&&ta.resume()}function r(ta){Aa("readable nexttick read 0");ta.read(0)}function v(ta,Na){Aa("resume",Na.reading);Na.reading||ta.read(0);Na.resumeScheduled=!1;ta.emit("resume");y(ta);Na.flowing&&!Na.reading&&
ta.read(0)}function y(ta){var Na=ta._readableState;for(Aa("flow",Na.flowing);Na.flowing&&null!==ta.read(););}function A(ta,Na){if(0===Na.length)return null;Na.objectMode?ta=Na.buffer.shift():!ta||ta>=Na.length?(ta=Na.decoder?Na.buffer.join(""):1===Na.buffer.length?Na.buffer.first():Na.buffer.concat(Na.length),Na.buffer.clear()):ta=Na.buffer.consume(ta,Na.decoder);return ta}function E(ta){var Na=ta._readableState;Aa("endReadable",Na.endEmitted);Na.endEmitted||(Na.ended=!0,I.nextTick(F,Na,ta))}function F(ta,
Na){Aa("endReadableNT",ta.endEmitted,ta.length);ta.endEmitted||0!==ta.length||(ta.endEmitted=!0,Na.readable=!1,Na.emit("end"),ta.autoDestroy&&(ta=Na._writableState,(!ta||ta.autoDestroy&&ta.finished)&&Na.destroy()))}function H(ta,Na){for(var Kb=0,kc=ta.length;Kb<kc;Kb++)if(ta[Kb]===Na)return Kb;return-1}if(w3)return bS;w3=!0;var I=tj;bS=h;var M;h.ReadableState=c;var N=Y2(),W=Mi.Buffer,X=$fa.Uint8Array||function(){},ea=j3;var Aa=ea&&ea.debuglog?ea.debuglog("stream"):function(){};var Ma=Wfa();ea=k3();
var K=n3().getHighWaterMark,aa=rD().codes,T=aa.ERR_INVALID_ARG_TYPE,U=aa.ERR_STREAM_PUSH_AFTER_EOF,pa=aa.ERR_METHOD_NOT_IMPLEMENTED,fa=aa.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,oa,gb,zb;vl(h,N);var va=ea.errorOrDestroy,ma=["error","close","destroy","pause","resume"];Object.defineProperty(h.prototype,"destroyed",{enumerable:!1,get:function(){return void 0===this._readableState?!1:this._readableState.destroyed},set:function(ta){this._readableState&&(this._readableState.destroyed=ta)}});h.prototype.destroy=
ea.destroy;h.prototype._undestroy=ea.undestroy;h.prototype._destroy=function(ta,Na){Na(ta)};h.prototype.push=function(ta,Na){var Kb=this._readableState;if(Kb.objectMode)var kc=!0;else"string"===typeof ta&&(Na=Na||Kb.defaultEncoding,Na!==Kb.encoding&&(ta=W.from(ta,Na),Na=""),kc=!0);return f(this,ta,Na,!1,kc)};h.prototype.unshift=function(ta){return f(this,ta,null,!0,!1)};h.prototype.isPaused=function(){return!1===this._readableState.flowing};h.prototype.setEncoding=function(ta){oa||(oa=aS.StringDecoder);
ta=new oa(ta);this._readableState.decoder=ta;this._readableState.encoding=this._readableState.decoder.encoding;for(var Na=this._readableState.buffer.head,Kb="";null!==Na;)Kb+=ta.write(Na.data),Na=Na.next;this._readableState.buffer.clear();""!==Kb&&this._readableState.buffer.push(Kb);this._readableState.length=Kb.length;return this};h.prototype.read=function(ta){Aa("read",ta);ta=parseInt(ta,10);var Na=this._readableState,Kb=ta;0!==ta&&(Na.emittedReadable=!1);if(0===ta&&Na.needReadable&&((0!==Na.highWaterMark?
Na.length>=Na.highWaterMark:0<Na.length)||Na.ended))return Aa("read: emitReadable",Na.length,Na.ended),0===Na.length&&Na.ended?E(this):b(this),null;ta=n(ta,Na);if(0===ta&&Na.ended)return 0===Na.length&&E(this),null;var kc=Na.needReadable;Aa("need readable",kc);if(0===Na.length||Na.length-ta<Na.highWaterMark)kc=!0,Aa("length less than watermark",kc);Na.ended||Na.reading?Aa("reading or ended",!1):kc&&(Aa("do read"),Na.reading=!0,Na.sync=!0,0===Na.length&&(Na.needReadable=!0),this._read(Na.highWaterMark),
Na.sync=!1,Na.reading||(ta=n(Kb,Na)));kc=0<ta?A(ta,Na):null;null===kc?(Na.needReadable=Na.length<=Na.highWaterMark,ta=0):(Na.length-=ta,Na.awaitDrain=0);0===Na.length&&(Na.ended||(Na.needReadable=!0),Kb!==ta&&Na.ended&&E(this));null!==kc&&this.emit("data",kc);return kc};h.prototype._read=function(ta){va(this,new pa("_read()"))};h.prototype.pipe=function(ta,Na){function Kb(wb,cc){Aa("onunpipe");wb===Td&&cc&&!1===cc.hasUnpiped&&(cc.hasUnpiped=!0,Aa("cleanup"),ta.removeListener("close",Qc),ta.removeListener("finish",
Pb),ta.removeListener("drain",Fa),ta.removeListener("error",jc),ta.removeListener("unpipe",Kb),Td.removeListener("end",kc),Td.removeListener("end",xd),Td.removeListener("data",Vb),Sa=!0,!ka.awaitDrain||ta._writableState&&!ta._writableState.needDrain||Fa())}function kc(){Aa("onend");ta.end()}function Vb(wb){Aa("ondata");wb=ta.write(wb);Aa("dest.write",wb);!1===wb&&((1===ka.pipesCount&&ka.pipes===ta||1<ka.pipesCount&&-1!==H(ka.pipes,ta))&&!Sa&&(Aa("false write response, pause",ka.awaitDrain),ka.awaitDrain++),
Td.pause())}function jc(wb){Aa("onerror",wb);xd();ta.removeListener("error",jc);0===ta.listeners("error").length&&va(ta,wb)}function Qc(){ta.removeListener("finish",Pb);xd()}function Pb(){Aa("onfinish");ta.removeListener("close",Qc);xd()}function xd(){Aa("unpipe");Td.unpipe(ta)}var Td=this,ka=this._readableState;switch(ka.pipesCount){case 0:ka.pipes=ta;break;case 1:ka.pipes=[ka.pipes,ta];break;default:ka.pipes.push(ta)}ka.pipesCount+=1;Aa("pipe count=%d opts=%j",ka.pipesCount,Na);Na=Na&&!1===Na.end||
ta===I.stdout||ta===I.stderr?xd:kc;if(ka.endEmitted)I.nextTick(Na);else Td.once("end",Na);ta.on("unpipe",Kb);var Fa=g(Td);ta.on("drain",Fa);var Sa=!1;Td.on("data",Vb);d(ta,"error",jc);ta.once("close",Qc);ta.once("finish",Pb);ta.emit("pipe",Td);ka.flowing||(Aa("pipe resume"),Td.resume());return ta};h.prototype.unpipe=function(ta){var Na=this._readableState,Kb={hasUnpiped:!1};if(0===Na.pipesCount)return this;if(1===Na.pipesCount){if(ta&&ta!==Na.pipes)return this;ta||(ta=Na.pipes);Na.pipes=null;Na.pipesCount=
0;Na.flowing=!1;ta&&ta.emit("unpipe",this,Kb);return this}if(!ta){ta=Na.pipes;Kb=Na.pipesCount;Na.pipes=null;Na.pipesCount=0;Na.flowing=!1;for(Na=0;Na<Kb;Na++)ta[Na].emit("unpipe",this,{hasUnpiped:!1});return this}var kc=H(Na.pipes,ta);if(-1===kc)return this;Na.pipes.splice(kc,1);--Na.pipesCount;1===Na.pipesCount&&(Na.pipes=Na.pipes[0]);ta.emit("unpipe",this,Kb);return this};h.prototype.on=function(ta,Na){Na=N.prototype.on.call(this,ta,Na);var Kb=this._readableState;"data"===ta?(Kb.readableListening=
0<this.listenerCount("readable"),!1!==Kb.flowing&&this.resume()):"readable"!==ta||Kb.endEmitted||Kb.readableListening||(Kb.readableListening=Kb.needReadable=!0,Kb.flowing=!1,Kb.emittedReadable=!1,Aa("on readable",Kb.length,Kb.reading),Kb.length?b(this):Kb.reading||I.nextTick(r,this));return Na};h.prototype.addListener=h.prototype.on;h.prototype.removeListener=function(ta,Na){Na=N.prototype.removeListener.call(this,ta,Na);"readable"===ta&&I.nextTick(l,this);return Na};h.prototype.removeAllListeners=
function(ta){var Na=N.prototype.removeAllListeners.apply(this,arguments);"readable"!==ta&&void 0!==ta||I.nextTick(l,this);return Na};h.prototype.resume=function(){var ta=this._readableState;ta.flowing||(Aa("resume"),ta.flowing=!ta.readableListening,ta.resumeScheduled||(ta.resumeScheduled=!0,I.nextTick(v,this,ta)));ta.paused=!1;return this};h.prototype.pause=function(){Aa("call pause flowing=%j",this._readableState.flowing);!1!==this._readableState.flowing&&(Aa("pause"),this._readableState.flowing=
!1,this.emit("pause"));this._readableState.paused=!0;return this};h.prototype.wrap=function(ta){var Na=this,Kb=this._readableState,kc=!1;ta.on("end",function(){Aa("wrapped end");if(Kb.decoder&&!Kb.ended){var jc=Kb.decoder.end();jc&&jc.length&&Na.push(jc)}Na.push(null)});ta.on("data",function(jc){Aa("wrapped data");Kb.decoder&&(jc=Kb.decoder.write(jc));Kb.objectMode&&(null===jc||void 0===jc)||!(Kb.objectMode||jc&&jc.length)||Na.push(jc)||(kc=!0,ta.pause())});for(var Vb in ta)void 0===this[Vb]&&"function"===
typeof ta[Vb]&&(this[Vb]=function(jc){return function(){return ta[jc].apply(ta,arguments)}}(Vb));for(Vb=0;Vb<ma.length;Vb++)ta.on(ma[Vb],this.emit.bind(this,ma[Vb]));this._read=function(jc){Aa("wrapped _read",jc);kc&&(kc=!1,ta.resume())};return this};"function"===typeof Symbol&&(h.prototype[Symbol.asyncIterator]=function(){void 0===gb&&(gb=Zfa());return gb(this)});Object.defineProperty(h.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}});Object.defineProperty(h.prototype,
"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}});Object.defineProperty(h.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(ta){this._readableState&&(this._readableState.flowing=ta)}});h._fromList=A;Object.defineProperty(h.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});"function"===typeof Symbol&&(h.from=function(ta,Na){void 0===zb&&(zb=Vfa());
return zb(h,ta,Na)});return bS}function x3(){function d(g,l){var r=this._transformState;r.transforming=!1;var v=r.writecb;if(null===v)return this.emit("error",new b);r.writechunk=null;r.writecb=null;null!=l&&this.push(l);v(g);g=this._readableState;g.reading=!1;(g.needReadable||g.length<g.highWaterMark)&&this._read(g.highWaterMark)}function c(g){if(!(this instanceof c))return new c(g);a.call(this,g);this._transformState={afterTransform:d.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,
writeencoding:null};this._readableState.needReadable=!0;this._readableState.sync=!1;g&&("function"===typeof g.transform&&(this._transform=g.transform),"function"===typeof g.flush&&(this._flush=g.flush));this.on("prefinish",h)}function h(){var g=this;"function"!==typeof this._flush||this._readableState.destroyed?f(this,null,null):this._flush(function(l,r){f(g,l,r)})}function f(g,l,r){if(l)return g.emit("error",l);null!=r&&g.push(r);if(g._writableState.length)throw new m;if(g._transformState.transforming)throw new e;
return g.push(null)}if(y3)return cS;y3=!0;cS=c;var k=rD().codes,n=k.ERR_METHOD_NOT_IMPLEMENTED,b=k.ERR_MULTIPLE_CALLBACK,e=k.ERR_TRANSFORM_ALREADY_TRANSFORMING,m=k.ERR_TRANSFORM_WITH_LENGTH_0,a=sD();vl(c,a);c.prototype.push=function(g,l){this._transformState.needTransform=!1;return a.prototype.push.call(this,g,l)};c.prototype._transform=function(g,l,r){r(new n("_transform()"))};c.prototype._write=function(g,l,r){var v=this._transformState;v.writecb=r;v.writechunk=g;v.writeencoding=l;v.transforming||
(g=this._readableState,(v.needTransform||g.needReadable||g.length<g.highWaterMark)&&this._read(g.highWaterMark))};c.prototype._read=function(g){g=this._transformState;null===g.writechunk||g.transforming?g.needTransform=!0:(g.transforming=!0,this._transform(g.writechunk,g.writeencoding,g.afterTransform))};c.prototype._destroy=function(g,l){a.prototype._destroy.call(this,g,function(r){l(r)})};return cS}function tD(d,c){if(!((this||Ct)instanceof tD))return new tD(d,c);c=c||{};z3.call(this||Ct,aga(c,
{objectMode:!0}));(this||Ct)._iterator=d;(this||Ct)._options=c;this.on("end",(this||Ct).destroy.bind(this||Ct,null,null))}function A3(d,c,h){c&&"string"!=typeof c&&(c=c.message||c.name);bga(this||Ym,{type:d,name:d,cause:"string"!=typeof c?c:h,message:c},"ewr")}function dS(d,c){Error.call(this||Ym);Error.captureStackTrace&&Error.captureStackTrace(this||Ym,(this||Ym).constructor);A3.call(this||Ym,"CustomError",d,c)}function cga(d,c,h){var f=function(k,n){A3.call(this||Ym,c,k,n);"FilesystemError"==c&&
((this||Ym).code=(this||Ym).cause.code,(this||Ym).path=(this||Ym).cause.path,(this||Ym).errno=(this||Ym).cause.errno,(this||Ym).message=(d.errno[(this||Ym).cause.errno]?d.errno[(this||Ym).cause.errno].description:(this||Ym).cause.message)+((this||Ym).cause.path?" ["+(this||Ym).cause.path+"]":""));Error.call(this||Ym);Error.captureStackTrace&&Error.captureStackTrace(this||Ym,f)};f.prototype=h?new h:new dS;return f}function jG(d){(this||Zm).db=(this||Zm)._levelup=d;(this||Zm).batch=d.db.batch();(this||
Zm).ops=[];(this||Zm).length=0}function B3(d,c){if(null==d)throw new TypeError("Cannot convert first argument to object");for(var h=Object(d),f=1;f<arguments.length;f++){var k=arguments[f];if(null!=k)for(var n=Object.keys(Object(k)),b=0,e=n.length;b<e;b++){var m=n[b],a=Object.getOwnPropertyDescriptor(k,m);void 0!==a&&a.enumerable&&(h[m]=k[m])}}return h}function C3(){function d(m){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&
"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a})(m)}function c(m){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(a){return a.__proto__||Object.getPrototypeOf(a)})(m)}function h(m,a){return(h=Object.setPrototypeOf||function(g,l){return g.__proto__=l,g})(m,a)}function f(m,a,g){g||(g=Error);g=function(l){function r(v,y,A){if(!(this instanceof r))throw new TypeError("Cannot call a class as a function");!0;v=c(r).call(this,"string"==typeof a?a:
a(v,y,A));if(!v||"object"!==d(v)&&"function"!=typeof v){if(void 0===this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");v=this}return v.code=m,v}return!function(v,y){if("function"!=typeof y&&null!==y)throw new TypeError("Super expression must either be null or a function");v.prototype=Object.create(y&&y.prototype,{constructor:{value:v,writable:!0,configurable:!0}});y&&h(v,y)}(r,l),r}(g);e[m]=g}function k(m,a){if(Array.isArray(m)){var g=m.length;return m=m.map(function(l){return String(l)}),
2<g?"one of ".concat(a," ").concat(m.slice(0,g-1).join(", "),", or ")+m[g-1]:2===g?"one of ".concat(a," ").concat(m[0]," or ").concat(m[1]):"of ".concat(a," ").concat(m[0])}return"of ".concat(a," ").concat(String(m))}if(D3)return eS;D3=!0;var n,b,e={};return f("ERR_AMBIGUOUS_ARGUMENT",'The "%s" argument is ambiguous. %s',TypeError),f("ERR_INVALID_ARG_TYPE",function(m,a,g){var l;if(void 0===n&&(n=fS()),n("string"==typeof m,"'name' must be a string"),"string"==typeof a&&"not "===a.substr(0,4)?(l="must not be",
a=a.replace(/^not /,"")):l="must be",function(v,y,A){return(void 0===A||A>v.length)&&(A=v.length),v.substring(A-y.length,A)===y}(m," argument"))m="The ".concat(m," ").concat(l," ").concat(k(a,"type"));else{var r=function(v,y,A){return"number"!=typeof A&&(A=0),!(A+y.length>v.length)&&-1!==v.indexOf(y,A)}(m,".")?"property":"argument";m='The "'.concat(m,'" ').concat(r," ").concat(l," ").concat(k(a,"type"))}return m+=". Received type ".concat(d(g))},TypeError),f("ERR_INVALID_ARG_VALUE",function(m,a){var g=
2<arguments.length&&void 0!==arguments[2]?arguments[2]:"is invalid";void 0===b&&(b=Vh);var l=b.inspect(a);return 128<l.length&&(l="".concat(l.slice(0,128),"...")),"The argument '".concat(m,"' ").concat(g,". Received ").concat(l)},TypeError),f("ERR_INVALID_RETURN_VALUE",function(m,a,g){var l;return l=g&&g.constructor&&g.constructor.name?"instance of ".concat(g.constructor.name):"type ".concat(d(g)),"Expected ".concat(m,' to be returned from the "').concat(a,'"')+" function but got ".concat(l,".")},
TypeError),f("ERR_MISSING_ARGS",function(){for(var m=arguments.length,a=Array(m),g=0;g<m;g++)a[g]=arguments[g];void 0===n&&(n=fS());n(0<a.length,"At least one arg needs to be specified");m="The ";g=a.length;switch(a=a.map(function(l){return'"'.concat(l,'"')}),g){case 1:m+="".concat(a[0]," argument");break;case 2:m+="".concat(a[0]," and ").concat(a[1]," arguments");break;default:m+=a.slice(0,g-1).join(", "),m+=", and ".concat(a[g-1]," arguments")}return"".concat(m," must be specified")},TypeError),
eS.codes=e,eS}function dga(){function d(N,W){for(var X=0;X<W.length;X++){var ea=W[X];ea.enumerable=ea.enumerable||!1;ea.configurable=!0;"value"in ea&&(ea.writable=!0);Object.defineProperty(N,ea.key,ea)}}function c(N,W){return!W||"object"!==m(W)&&"function"!=typeof W?h(N):W}function h(N){if(void 0===N)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return N}function f(N){var W="function"==typeof Map?new Map:void 0;return(f=function(X){function ea(){return n(X,
arguments,e(this).constructor)}if(null===X||(Aa=X,-1===Function.toString.call(Aa).indexOf("[native code]")))return X;var Aa;if("function"!=typeof X)throw new TypeError("Super expression must either be null or a function");if(void 0!==W){if(W.has(X))return W.get(X);W.set(X,ea)}return ea.prototype=Object.create(X.prototype,{constructor:{value:ea,enumerable:!1,writable:!0,configurable:!0}}),b(ea,X)})(N)}function k(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;
if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(N){return!1}}function n(N,W,X){return(n=k()?Reflect.construct:function(ea,Aa,Ma){var K=[null];K.push.apply(K,Aa);ea=new (Function.bind.apply(ea,K));return Ma&&b(ea,Ma.prototype),ea}).apply(null,arguments)}function b(N,W){return(b=Object.setPrototypeOf||function(X,ea){return X.__proto__=ea,X})(N,W)}function e(N){return(e=Object.setPrototypeOf?Object.getPrototypeOf:function(W){return W.__proto__||
Object.getPrototypeOf(W)})(N)}function m(N){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(W){return typeof W}:function(W){return W&&"function"==typeof Symbol&&W.constructor===Symbol&&W!==Symbol.prototype?"symbol":typeof W})(N)}function a(N,W,X){return(void 0===X||X>N.length)&&(X=N.length),N.substring(X-W.length,X)===W}function g(N){var W=Object.keys(N),X=Object.create(Object.getPrototypeOf(N));return W.forEach(function(ea){X[ea]=N[ea]}),Object.defineProperty(X,"message",
{value:N.message}),X}function l(N){return y(N,{compact:!1,customInspect:!1,depth:1E3,maxArrayLength:1/0,showHidden:!1,breakLength:1/0,showProxy:!1,sorted:!0,getters:!0})}function r(N,W,X){var ea="",Aa="",Ma=0,K="",aa=!1,T=l(N),U=T.split("\n"),pa=l(W).split("\n"),fa=0,oa="";if("strictEqual"===X&&"object"===m(N)&&"object"===m(W)&&null!==N&&null!==W&&(X="strictEqualObject"),1===U.length&&1===pa.length&&U[0]!==pa[0]){var gb=U[0].length+pa[0].length;if(10>=gb){if(!("object"===m(N)&&null!==N||"object"===
m(W)&&null!==W||0===N&&0===W))return"".concat(M[X],"\n\n")+"".concat(U[0]," !== ").concat(pa[0],"\n")}else if("strictEqualObject"!==X&&gb<(v.stderr&&v.stderr.isTTY?v.stderr.columns:80)){for(;U[0][fa]===pa[0][fa];)fa++;2<fa&&(oa="\n  ".concat(function(ta,Na){if(Na=Math.floor(Na),0==ta.length||0==Na)return"";var Kb=ta.length*Na;for(Na=Math.floor(Math.log(Na)/Math.log(2));Na;)ta+=ta,Na--;return ta+ta.substring(0,Kb-ta.length)}(" ",fa),"^"),fa=0)}}N=U[U.length-1];for(W=pa[pa.length-1];N===W&&(2>fa++?
K="\n  ".concat(N).concat(K):ea=N,U.pop(),pa.pop(),0!==U.length&&0!==pa.length);)N=U[U.length-1],W=pa[pa.length-1];N=Math.max(U.length,pa.length);if(0===N){ea=T.split("\n");if(30<ea.length)for(ea[26]="".concat(E,"...").concat(I);27<ea.length;)ea.pop();return"".concat(M.notIdentical,"\n\n").concat(ea.join("\n"),"\n")}3<fa&&(K="\n".concat(E,"...").concat(I).concat(K),aa=!0);""!==ea&&(K="\n  ".concat(ea).concat(K),ea="");T=0;X=M[X]+"\n".concat(F,"+ actual").concat(I," ").concat(H,"- expected").concat(I);
W=" ".concat(E,"...").concat(I," Lines skipped");for(fa=0;fa<N;fa++){gb=fa-Ma;if(U.length<fa+1)1<gb&&2<fa&&(4<gb?(Aa+="\n".concat(E,"...").concat(I),aa=!0):3<gb&&(Aa+="\n  ".concat(pa[fa-2]),T++),Aa+="\n  ".concat(pa[fa-1]),T++),Ma=fa,ea+="\n".concat(H,"-").concat(I," ").concat(pa[fa]),T++;else if(pa.length<fa+1)1<gb&&2<fa&&(4<gb?(Aa+="\n".concat(E,"...").concat(I),aa=!0):3<gb&&(Aa+="\n  ".concat(U[fa-2]),T++),Aa+="\n  ".concat(U[fa-1]),T++),Ma=fa,Aa+="\n".concat(F,"+").concat(I," ").concat(U[fa]),
T++;else{var zb=pa[fa],va=U[fa],ma=va!==zb&&(!a(va,",")||va.slice(0,-1)!==zb);ma&&a(zb,",")&&zb.slice(0,-1)===va&&(ma=!1,va+=",");ma?(1<gb&&2<fa&&(4<gb?(Aa+="\n".concat(E,"...").concat(I),aa=!0):3<gb&&(Aa+="\n  ".concat(U[fa-2]),T++),Aa+="\n  ".concat(U[fa-1]),T++),Ma=fa,Aa+="\n".concat(F,"+").concat(I," ").concat(va),ea+="\n".concat(H,"-").concat(I," ").concat(zb),T+=2):(Aa+=ea,ea="",1!==gb&&0!==fa||(Aa+="\n  ".concat(va),T++))}if(20<T&&fa<N-2)return"".concat(X).concat(W,"\n").concat(Aa,"\n").concat(E,
"...").concat(I).concat(ea,"\n")+"".concat(E,"...").concat(I)}return"".concat(X).concat(aa?W:"","\n").concat(Aa).concat(ea).concat(K).concat(oa)}if(E3)return F3;E3=!0;var v=tj,y=Vh.inspect,A=C3().codes.ERR_INVALID_ARG_TYPE,E="",F="",H="",I="",M={deepStrictEqual:"Expected values to be strictly deep-equal:",strictEqual:"Expected values to be strictly equal:",strictEqualObject:'Expected "actual" to be reference-equal to "expected":',deepEqual:"Expected values to be loosely deep-equal:",equal:"Expected values to be loosely equal:",
notDeepStrictEqual:'Expected "actual" not to be strictly deep-equal to:',notStrictEqual:'Expected "actual" to be strictly unequal to:',notStrictEqualObject:'Expected "actual" not to be reference-equal to "expected":',notDeepEqual:'Expected "actual" not to be loosely deep-equal to:',notEqual:'Expected "actual" to be loosely unequal to:',notIdentical:"Values identical but not reference-equal:"};return F3=function(N){function W(ea){if(!(this instanceof W))throw new TypeError("Cannot call a class as a function");
if(!0,"object"!==m(ea)||null===ea)throw new A("options","Object",ea);var Aa=ea.message,Ma=ea.operator,K=ea.stackStartFn,aa=ea.actual;ea=ea.expected;var T=Error.stackTraceLimit;if(Error.stackTraceLimit=0,null!=Aa)var U=c(this,e(W).call(this,String(Aa)));else if(v.stderr&&v.stderr.isTTY&&(v.stderr&&v.stderr.getColorDepth&&1!==v.stderr.getColorDepth()?(E="\u001b[34m",F="\u001b[32m",I="\u001b[39m",H="\u001b[31m"):(E="",F="",I="",H="")),"object"===m(aa)&&null!==aa&&"object"===m(ea)&&null!==ea&&"stack"in
aa&&aa instanceof Error&&"stack"in ea&&ea instanceof Error&&(aa=g(aa),ea=g(ea)),"deepStrictEqual"===Ma||"strictEqual"===Ma)U=c(this,e(W).call(this,r(aa,ea,Ma)));else if("notDeepStrictEqual"===Ma||"notStrictEqual"===Ma){U=M[Ma];var pa=l(aa).split("\n");if("notStrictEqual"===Ma&&"object"===m(aa)&&null!==aa&&(U=M.notStrictEqualObject),30<pa.length)for(pa[26]="".concat(E,"...").concat(I);27<pa.length;)pa.pop();U=1===pa.length?c(this,e(W).call(this,"".concat(U," ").concat(pa[0]))):c(this,e(W).call(this,
"".concat(U,"\n\n").concat(pa.join("\n"),"\n")))}else{U=l(aa);pa="";var fa=M[Ma];"notDeepEqual"===Ma||"notEqual"===Ma?1024<(U="".concat(M[Ma],"\n\n").concat(U)).length&&(U="".concat(U.slice(0,1021),"...")):(pa="".concat(l(ea)),512<U.length&&(U="".concat(U.slice(0,509),"...")),512<pa.length&&(pa="".concat(pa.slice(0,509),"...")),"deepEqual"===Ma||"equal"===Ma?U="".concat(fa,"\n\n").concat(U,"\n\nshould equal\n\n"):pa=" ".concat(Ma," ").concat(pa));U=c(this,e(W).call(this,"".concat(U).concat(pa)))}return Error.stackTraceLimit=
T,U.generatedMessage=!Aa,Object.defineProperty(h(U),"name",{value:"AssertionError [ERR_ASSERTION]",enumerable:!1,writable:!0,configurable:!0}),U.code="ERR_ASSERTION",U.actual=aa,U.expected=ea,U.operator=Ma,Error.captureStackTrace&&Error.captureStackTrace(h(U),K),U.stack,U.name="AssertionError",c(U)}var X;return!function(ea,Aa){if("function"!=typeof Aa&&null!==Aa)throw new TypeError("Super expression must either be null or a function");ea.prototype=Object.create(Aa&&Aa.prototype,{constructor:{value:ea,
writable:!0,configurable:!0}});Aa&&b(ea,Aa)}(W,N),X=[{key:"toString",value:function(){return"".concat(this.name," [").concat(this.code,"]: ").concat(this.message)}},{key:y.custom,value:function(ea,Aa){return y(this,function(Ma){for(var K=1;K<arguments.length;K++){var aa=null!=arguments[K]?arguments[K]:{},T=Object.keys(aa);"function"==typeof Object.getOwnPropertySymbols&&(T=T.concat(Object.getOwnPropertySymbols(aa).filter(function(U){return Object.getOwnPropertyDescriptor(aa,U).enumerable})));T.forEach(function(U){var pa=
aa[U];U in Ma?Object.defineProperty(Ma,U,{value:pa,enumerable:!0,configurable:!0,writable:!0}):Ma[U]=pa})}return Ma}({},Aa,{customInspect:!1,depth:0}))}}],d(W.prototype,X),W}(f(Error))}function G3(d,c){if(!(d=function(h){if(Array.isArray(h))return h}(d)||function(h,f){var k=[],n=!0,b=!1,e=void 0;try{for(var m,a=h[Symbol.iterator]();!(n=(m=a.next()).done)&&(k.push(m.value),!f||k.length!==f);n=!0);}catch(g){b=!0,e=g}finally{try{n||null==a.return||a.return()}finally{if(b)throw e;}}return k}(d,c)))throw new TypeError("Invalid attempt to destructure non-iterable instance");
return d}function Dt(d){return(Dt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(c){return typeof c}:function(c){return c&&"function"==typeof Symbol&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c})(d)}function gS(d){return d.call.bind(d)}function ega(d){if(0===d.length||10<d.length)return!0;for(var c=0;c<d.length;c++){var h=d.charCodeAt(c);if(48>h||57<h)return!0}return 10===d.length&&d>=Math.pow(2,32)}function TK(d){return Object.keys(d).filter(ega).concat(UK(d).filter(Object.prototype.propertyIsEnumerable.bind(d)))}
function H3(d,c){if(d===c)return 0;for(var h=d.length,f=c.length,k=0,n=Math.min(h,f);k<n;++k)if(d[k]!==c[k]){h=d[k];f=c[k];break}return h<f?-1:f<h?1:0}function os(d,c,h,f){if(d===c)return 0!==d||!h||I3(d,c);if(h){if("object"!==Dt(d))return"number"==typeof d&&hS(d)&&hS(c);if("object"!==Dt(c)||null===d||null===c||Object.getPrototypeOf(d)!==Object.getPrototypeOf(c))return!1}else{if(null===d||"object"!==Dt(d))return(null===c||"object"!==Dt(c))&&d==c;if(null===c||"object"!==Dt(c))return!1}var k=J3(d);
if(k!==J3(c))return!1;if(Array.isArray(d)){if(d.length!==c.length)return!1;k=TK(d);var n=TK(c);return k.length===n.length&&kG(d,c,h,f,1,k)}if("[object Object]"===k&&(!VK(d)&&VK(c)||!WK(d)&&WK(c)))return!1;if(K3(d)){if(!K3(c)||Date.prototype.getTime.call(d)!==Date.prototype.getTime.call(c))return!1}else if(L3(d)){if(!L3(c)||(fga?d.source!==c.source||d.flags!==c.flags:RegExp.prototype.toString.call(d)!==RegExp.prototype.toString.call(c)))return!1}else if(gga(d)||d instanceof Error){if(d.message!==c.message||
d.name!==c.name)return!1}else{if(hga(d)){if(h||!iga(d)&&!jga(d)){if(!function(b,e){return b.byteLength===e.byteLength&&0===H3(new Uint8Array(b.buffer,b.byteOffset,b.byteLength),new Uint8Array(e.buffer,e.byteOffset,e.byteLength))}(d,c))return!1}else if(!function(b,e){if(b.byteLength!==e.byteLength)return!1;for(var m=0;m<b.byteLength;m++)if(b[m]!==e[m])return!1;return!0}(d,c))return!1;k=TK(d);n=TK(c);return k.length===n.length&&kG(d,c,h,f,0,k)}if(WK(d))return!(!WK(c)||d.size!==c.size)&&kG(d,c,h,f,2);
if(VK(d))return!(!VK(c)||d.size!==c.size)&&kG(d,c,h,f,3);if(kga(d)){if(d.byteLength!==c.byteLength||0!==H3(new Uint8Array(d),new Uint8Array(c)))return!1}else if(lga(d)&&!function(b,e){return M3(b)?M3(e)&&I3(Number.prototype.valueOf.call(b),Number.prototype.valueOf.call(e)):N3(b)?N3(e)&&String.prototype.valueOf.call(b)===String.prototype.valueOf.call(e):O3(b)?O3(e)&&Boolean.prototype.valueOf.call(b)===Boolean.prototype.valueOf.call(e):P3(b)?P3(e)&&BigInt.prototype.valueOf.call(b)===BigInt.prototype.valueOf.call(e):
mga(e)&&Symbol.prototype.valueOf.call(b)===Symbol.prototype.valueOf.call(e)}(d,c))return!1}return kG(d,c,h,f,0)}function Q3(d,c){return c.filter(function(h){return XK(d,h)})}function kG(d,c,h,f,k,n){if(5===arguments.length){n=Object.keys(d);var b=Object.keys(c);if(n.length!==b.length)return!1}for(var e=0;e<n.length;e++)if(!lG(c,n[e]))return!1;if(h&&5===arguments.length)if(b=UK(d),0!==b.length){var m=0;for(e=0;e<b.length;e++){var a=b[e];if(XK(d,a)){if(!XK(c,a))return!1;n.push(a);m++}else if(XK(c,a))return!1}e=
UK(c);if(b.length!==e.length&&Q3(c,e).length!==m)return!1}else if(b=UK(c),0!==b.length&&0!==Q3(c,b).length)return!1;if(0===n.length&&(0===k||1===k&&0===d.length||0===d.size))return!0;if(void 0===f)f={val1:new Map,val2:new Map,position:0};else{b=f.val1.get(d);if(void 0!==b&&(m=f.val2.get(c),void 0!==m))return b===m;f.position++}f.val1.set(d,f.position);f.val2.set(c,f.position);b=nga(d,c,h,n,f,k);return f.val1.delete(d),f.val2.delete(c),b}function R3(d,c,h,f){for(var k=YK(d),n=0;n<k.length;n++){var b=
k[n];if(os(c,b,h,f))return d.delete(b),!0}return!1}function S3(d){switch(Dt(d)){case "undefined":return null;case "object":return;case "symbol":return!1;case "string":d=+d;case "number":if(hS(d))return!1}return!0}function T3(d,c,h,f,k,n){for(var b=YK(d),e=0;e<b.length;e++){var m=b[e];if(os(h,m,k,n)&&os(f,c.get(m),k,n))return d.delete(m),!0}return!1}function nga(d,c,h,f,k,n){var b=0;if(2===n){if(!function(e,m,a,g){for(var l=null,r=YK(e),v=0;v<r.length;v++){var y=r[v];if("object"===Dt(y)&&null!==y)null===
l&&(l=new Set),l.add(y);else if(!m.has(y)){if(a)return!1;var A=e,E=m,F=S3(y);if(null!=F?!F:!E.has(F)||A.has(F))return!1;null===l&&(l=new Set);l.add(y)}}if(null!==l){m=YK(m);for(r=0;r<m.length;r++)if(v=m[r],"object"===Dt(v)&&null!==v){if(!R3(l,v,a,g))return!1}else if(!a&&!e.has(v)&&!R3(l,v,a,g))return!1;return 0===l.size}return!0}(d,c,h,k))return!1}else if(3===n){if(!function(e,m,a,g){for(var l=null,r=U3(e),v=0;v<r.length;v++){var y=G3(r[v],2),A=y[0],E=y[1];if("object"===Dt(A)&&null!==A)null===l&&
(l=new Set),l.add(A);else if(y=m.get(A),void 0===y&&!m.has(A)||!os(E,y,a,g)){if(a)return!1;y=e;var F=m,H=g,I=S3(A);if(null!=I)y=I;else{var M=F.get(I);y=!(void 0===M&&!F.has(I)||!os(E,M,!1,H))&&!y.has(I)&&os(E,M,!1,H)}if(!y)return!1;null===l&&(l=new Set);l.add(A)}}if(null!==l){m=U3(m);for(r=0;r<m.length;r++)if(v=G3(m[r],2),v=(A=v[0],v[1]),"object"===Dt(A)&&null!==A){if(!T3(l,e,A,v,a,g))return!1}else if(!(a||e.has(A)&&os(e.get(A),v,!1,g)||T3(l,e,A,v,!1,g)))return!1;return 0===l.size}return!0}(d,c,h,
k))return!1}else if(1===n)for(;b<d.length;b++){if(!lG(d,b)){if(lG(c,b))return!1;for(f=Object.keys(d);b<f.length;b++)if(n=f[b],!lG(c,n)||!os(d[n],c[n],h,k))return!1;return f.length===Object.keys(c).length}if(!lG(c,b)||!os(d[b],c[b],h,k))return!1}for(b=0;b<f.length;b++)if(n=f[b],!os(d[n],c[n],h,k))return!1;return!0}function fS(){function d(U){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(pa){return typeof pa}:function(pa){return pa&&"function"==typeof Symbol&&pa.constructor===
Symbol&&pa!==Symbol.prototype?"symbol":typeof pa})(U)}function c(){v=V3.isDeepEqual;y=V3.isDeepStrictEqual}function h(U){if(U.message instanceof Error)throw U.message;throw new N(U);}function f(U,pa,fa,oa){if(!fa){var gb=!1;if(0===pa)gb=!0,oa="No value argument passed to `assert.ok()`";else if(oa instanceof Error)throw oa;U=new N({actual:fa,expected:!0,message:oa,operator:"==",stackStartFn:U});throw U.generatedMessage=gb,U;}}function k(){for(var U=arguments.length,pa=Array(U),fa=0;fa<U;fa++)pa[fa]=
arguments[fa];f.apply(void 0,[k,pa.length].concat(pa))}function n(U,pa,fa,oa){if("function"!=typeof pa){if(ea(pa))return pa.test(U);if(2===arguments.length)throw new F("expected",["Function","RegExp"],pa);if("object"!==d(U)||null===U){var gb=new N({actual:U,expected:pa,message:fa,operator:"deepStrictEqual",stackStartFn:oa});throw gb.operator=oa.name,gb;}var zb=Object.keys(pa);if(pa instanceof Error)zb.push("name","message");else if(0===zb.length)throw new H("error",pa,"may not be an empty object");
return void 0===v&&c(),zb.forEach(function(va){if(!("string"==typeof U[va]&&ea(pa[va])&&pa[va].test(U[va])||va in U&&y(U[va],pa[va]))){if(!fa){va=new T(U,zb);var ma=new T(pa,zb,U);va=new N({actual:va,expected:ma,operator:"deepStrictEqual",stackStartFn:oa});throw va.actual=U,va.expected=pa,va.operator=oa.name,va;}h({actual:U,expected:pa,message:fa,operator:oa.name,stackStartFn:oa})}}),!0}return void 0!==pa.prototype&&U instanceof pa||!Error.isPrototypeOf(pa)&&!0===pa.call({},U)}function b(U){if("function"!=
typeof U)throw new F("fn","Function",U);try{U()}catch(pa){return pa}return aa}function e(U){return X(U)||null!==U&&"object"===d(U)&&"function"==typeof U.then&&"function"==typeof U.catch}function m(U){return Promise.resolve().then(function(){var pa;if("function"==typeof U){if(!e(pa=U()))throw new I("instance of Promise","promiseFn",pa);}else{if(!e(U))throw new F("promiseFn",["Function","Promise"],U);pa=U}return Promise.resolve().then(function(){return pa}).then(function(){return aa}).catch(function(fa){return fa})})}
function a(U,pa,fa,oa){if("string"==typeof fa){if(4===arguments.length)throw new F("error",["Object","Error","Function","RegExp"],fa);if("object"===d(pa)&&null!==pa){if(pa.message===fa)throw new E("error/message",'The error message "'.concat(pa.message,'" is identical to the message.'));}else if(pa===fa)throw new E("error/message",'The error "'.concat(pa,'" is identical to the message.'));oa=fa;fa=void 0}else if(null!=fa&&"object"!==d(fa)&&"function"!=typeof fa)throw new F("error",["Object","Error",
"Function","RegExp"],fa);if(pa===aa){var gb="";fa&&fa.name&&(gb+=" (".concat(fa.name,")"));gb+=oa?": ".concat(oa):".";h({actual:void 0,expected:fa,operator:U.name,message:"Missing expected ".concat("rejects"===U.name?"rejection":"exception").concat(gb),stackStartFn:U})}if(fa&&!n(pa,fa,oa,U))throw pa;}function g(U,pa,fa,oa){if(pa!==aa){if("string"==typeof fa&&(oa=fa,fa=void 0),!fa||n(pa,fa))oa=oa?": ".concat(oa):".",h({actual:pa,expected:fa,operator:U.name,message:"Got unwanted ".concat("doesNotReject"===
U.name?"rejection":"exception").concat(oa,"\n")+'Actual message: "'.concat(pa&&pa.message,'"'),stackStartFn:U});throw pa;}}function l(){for(var U=arguments.length,pa=Array(U),fa=0;fa<U;fa++)pa[fa]=arguments[fa];f.apply(void 0,[l,pa.length].concat(pa))}if(W3)return iS;W3=!0;var r=tj,v,y,A=C3().codes,E=A.ERR_AMBIGUOUS_ARGUMENT,F=A.ERR_INVALID_ARG_TYPE,H=A.ERR_INVALID_ARG_VALUE,I=A.ERR_INVALID_RETURN_VALUE,M=A.ERR_MISSING_ARGS,N=dga(),W=Vh.inspect;A=Vh.types;var X=A.isPromise,ea=A.isRegExp;A=Object.assign?
Object.assign:oga.assign;var Aa=Object.is?Object.is:X3,Ma=!1,K=iS=k,aa={};K.fail=function va(pa,fa,oa,gb,zb){var ma=arguments.length;if(0===ma)var ta="Failed";else 1===ma?(oa=pa,pa=void 0):(!1===Ma&&(Ma=!0,(r.emitWarning?r.emitWarning:console.warn.bind(console))("assert.fail() with more than one argument is deprecated. Please use assert.strictEqual() instead or only pass a message.","DeprecationWarning","DEP0094")),2===ma&&(gb="!="));if(oa instanceof Error)throw oa;ma={actual:pa,expected:fa,operator:void 0===
gb?"fail":gb,stackStartFn:zb||va};void 0!==oa&&(ma.message=oa);ma=new N(ma);throw ta&&(ma.message=ta,ma.generatedMessage=!0),ma;};K.AssertionError=N;K.ok=k;K.equal=function zb(fa,oa,gb){if(2>arguments.length)throw new M("actual","expected");fa!=oa&&h({actual:fa,expected:oa,message:gb,operator:"==",stackStartFn:zb})};K.notEqual=function va(oa,gb,zb){if(2>arguments.length)throw new M("actual","expected");oa==gb&&h({actual:oa,expected:gb,message:zb,operator:"!=",stackStartFn:va})};K.deepEqual=function ma(gb,
zb,va){if(2>arguments.length)throw new M("actual","expected");void 0===v&&c();v(gb,zb)||h({actual:gb,expected:zb,message:va,operator:"deepEqual",stackStartFn:ma})};K.notDeepEqual=function ta(zb,va,ma){if(2>arguments.length)throw new M("actual","expected");void 0===v&&c();v(zb,va)&&h({actual:zb,expected:va,message:ma,operator:"notDeepEqual",stackStartFn:ta})};K.deepStrictEqual=function Na(va,ma,ta){if(2>arguments.length)throw new M("actual","expected");void 0===v&&c();y(va,ma)||h({actual:va,expected:ma,
message:ta,operator:"deepStrictEqual",stackStartFn:Na})};K.notDeepStrictEqual=function Kb(ma,ta,Na){if(2>arguments.length)throw new M("actual","expected");void 0===v&&c();y(ma,ta)&&h({actual:ma,expected:ta,message:Na,operator:"notDeepStrictEqual",stackStartFn:Kb})};K.strictEqual=function kc(ta,Na,Kb){if(2>arguments.length)throw new M("actual","expected");Aa(ta,Na)||h({actual:ta,expected:Na,message:Kb,operator:"strictEqual",stackStartFn:kc})};K.notStrictEqual=function Vb(Na,Kb,kc){if(2>arguments.length)throw new M("actual",
"expected");Aa(Na,Kb)&&h({actual:Na,expected:Kb,message:kc,operator:"notStrictEqual",stackStartFn:Vb})};var T=function jc(Kb,kc,Vb){var Qc=this;if(!(this instanceof jc))throw new TypeError("Cannot call a class as a function");!0;kc.forEach(function(Pb){Pb in Kb&&(void 0!==Vb&&"string"==typeof Vb[Pb]&&ea(Kb[Pb])&&Kb[Pb].test(Vb[Pb])?Qc[Pb]=Vb[Pb]:Qc[Pb]=Kb[Pb])})};return K.throws=function Vb(kc){for(var jc=arguments.length,Qc=Array(1<jc?jc-1:0),Pb=1;Pb<jc;Pb++)Qc[Pb-1]=arguments[Pb];a.apply(void 0,
[Vb,b(kc)].concat(Qc))},K.rejects=function jc(Vb){for(var Qc=arguments.length,Pb=Array(1<Qc?Qc-1:0),xd=1;xd<Qc;xd++)Pb[xd-1]=arguments[xd];return m(Vb).then(function(Td){return a.apply(void 0,[jc,Td].concat(Pb))})},K.doesNotThrow=function Qc(jc){for(var Pb=arguments.length,xd=Array(1<Pb?Pb-1:0),Td=1;Td<Pb;Td++)xd[Td-1]=arguments[Td];g.apply(void 0,[Qc,b(jc)].concat(xd))},K.doesNotReject=function Pb(Qc){for(var xd=arguments.length,Td=Array(1<xd?xd-1:0),ka=1;ka<xd;ka++)Td[ka-1]=arguments[ka];return m(Qc).then(function(Fa){return g.apply(void 0,
[Pb,Fa].concat(Td))})},K.ifError=function xd(Pb){if(null!=Pb){var Td="ifError got unwanted exception: ";"object"===d(Pb)&&"string"==typeof Pb.message?0===Pb.message.length&&Pb.constructor?Td+=Pb.constructor.name:Td+=Pb.message:Td+=W(Pb);Td=new N({actual:Pb,expected:null,operator:"ifError",message:Td,stackStartFn:xd});Pb=Pb.stack;if("string"==typeof Pb){Pb=Pb.split("\n");Pb.shift();for(var ka=Td.stack.split("\n"),Fa=0;Fa<Pb.length;Fa++){var Sa=ka.indexOf(Pb[Fa]);if(-1!==Sa){ka=ka.slice(0,Sa);break}}Td.stack=
"".concat(ka.join("\n"),"\n").concat(Pb.join("\n"))}throw Td;}},K.strict=A(l,K,{equal:K.strictEqual,deepEqual:K.deepStrictEqual,notEqual:K.notStrictEqual,notDeepEqual:K.notDeepStrictEqual}),K.strict.strict=K.strict,iS}function Zk(d,c,h){if(!((this||Ai)instanceof Zk))return new Zk(d,c,h);var f=this||Ai;ZK.call(this||Ai);this.setMaxListeners(Infinity);"function"===typeof c&&(h=c,c={});c=c||{};if(!d||"object"!==typeof d){d=new pga("First argument must be an abstract-leveldown compliant store");if("function"===
typeof h)return $K.nextTick(h,d);throw d;}qga.strictEqual(typeof d.status,"string",".status required, old abstract-leveldown");(this||Ai).options=uD(c);(this||Ai)._db=d;(this||Ai).db=new Y3(d);this.open(h||function(k){k&&f.emit("error",k)});(this||Ai).supports=rga((this||Ai).db.supports,{status:!1,deferredOpen:!0,openCallback:!0,promises:!0,streams:!0});Object.keys((this||Ai).supports.additionalMethods).forEach(function(k){null==(this||Ai)[k]&&((this||Ai)[k]=function(){return(this||Ai).db[k].apply((this||
Ai).db,arguments)})},this||Ai)}function mG(d,c){if(!d._isOpening()&&!d.isOpen())return $K.nextTick(c,new Z3("Database is not open")),!0}function iv(d,c){return Object.hasOwnProperty.call(d,c)&&c}function sga(d){return d}function aL(d){return d}function jS(d){return void 0===d||null===d||kS.isBuffer(d)}function Jp(d){if(!((this||Jw)instanceof Jp))return new Jp(d);(this||Jw).opts=d||{};(this||Jw).encodings=lS}function tga(d){return d.toString((this||Sg).encoding)}function uga(d){(this||Sg).charReceived=
d.length%2;(this||Sg).charLength=(this||Sg).charReceived?2:0}function vga(d){(this||Sg).charReceived=d.length%3;(this||Sg).charLength=(this||Sg).charReceived?3:0}function $3(){function d(F,H,I){(this||Bi).chunk=F;(this||Bi).encoding=H;(this||Bi).callback=I}function c(F,H){var I=vD();F=F||{};var M=F.highWaterMark,N=F.objectMode?16:16384;(this||Bi).highWaterMark=M||0===M?M:N;(this||Bi).objectMode=!!F.objectMode;H instanceof I&&((this||Bi).objectMode=(this||Bi).objectMode||!!F.writableObjectMode);(this||
Bi).highWaterMark=~~(this||Bi).highWaterMark;(this||Bi).needDrain=!1;(this||Bi).ending=!1;(this||Bi).ended=!1;(this||Bi).finished=!1;(this||Bi).decodeStrings=!1!==F.decodeStrings;(this||Bi).defaultEncoding=F.defaultEncoding||"utf8";(this||Bi).length=0;(this||Bi).writing=!1;(this||Bi).corked=0;(this||Bi).sync=!0;(this||Bi).bufferProcessing=!1;(this||Bi).onwrite=function(W){a(H,W)};(this||Bi).writecb=null;(this||Bi).writelen=0;(this||Bi).buffer=[];(this||Bi).pendingcb=0;(this||Bi).prefinished=!1;(this||
Bi).errorEmitted=!1}function h(F){var H=vD();if(!((this||Bi)instanceof h||(this||Bi)instanceof H))return new h(F);(this||Bi)._writableState=new c(F,this||Bi);(this||Bi).writable=!0;E.call(this||Bi)}function f(F,H,I){var M=Error("write after end");F.emit("error",M);v.nextTick(function(){I(M)})}function k(F,H,I,M){var N=!0;if(!(A.isBuffer(I)||A.isString(I)||A.isNullOrUndefined(I)||H.objectMode)){var W=new TypeError("Invalid non-string/buffer chunk");F.emit("error",W);v.nextTick(function(){M(W)});N=
!1}return N}function n(F,H,I,M,N){var W=M;!H.objectMode&&!1!==H.decodeStrings&&A.isString(I)&&(I=new y(I,W));A.isBuffer(I)&&(M="buffer");W=H.objectMode?1:I.length;H.length+=W;var X=H.length<H.highWaterMark;X||(H.needDrain=!0);H.writing||H.corked?H.buffer.push(new d(I,M,N)):b(F,H,!1,W,I,M,N);return X}function b(F,H,I,M,N,W,X){H.writelen=M;H.writecb=X;H.writing=!0;H.sync=!0;I?F._writev(N,H.onwrite):F._write(N,W,H.onwrite);H.sync=!1}function e(F,H,I,M,N){I?v.nextTick(function(){H.pendingcb--;N(M)}):
(H.pendingcb--,N(M));F._writableState.errorEmitted=!0;F.emit("error",M)}function m(F){F.writing=!1;F.writecb=null;F.length-=F.writelen;F.writelen=0}function a(F,H){var I=F._writableState,M=I.sync,N=I.writecb;m(I);if(H)e(F,I,M,H,N);else{var W=I.ending&&0===I.length&&!I.finished&&!I.writing;W||I.corked||I.bufferProcessing||!I.buffer.length||l(F,I);M?v.nextTick(function(){g(F,I,W,N)}):g(F,I,W,N)}}function g(F,H,I,M){!I&&0===H.length&&H.needDrain&&(H.needDrain=!1,F.emit("drain"));H.pendingcb--;M();r(F,
H)}function l(F,H){H.bufferProcessing=!0;if(F._writev&&1<H.buffer.length){for(var I=[],M=0;M<H.buffer.length;M++)I.push(H.buffer[M].callback);H.pendingcb++;b(F,H,!0,H.length,H.buffer,"",function(X){for(var ea=0;ea<I.length;ea++)H.pendingcb--,I[ea](X)});H.buffer=[]}else{for(M=0;M<H.buffer.length;M++){var N=H.buffer[M],W=N.chunk;b(F,H,!1,H.objectMode?1:W.length,W,N.encoding,N.callback);if(H.writing){M++;break}}M<H.buffer.length?H.buffer=H.buffer.slice(M):H.buffer.length=0}H.bufferProcessing=!1}function r(F,
H){var I=H.ending&&0===H.length&&!H.finished&&!H.writing;I&&(0===H.pendingcb?(H.prefinished||(H.prefinished=!0,F.emit("prefinish")),H.finished=!0,F.emit("finish")):H.prefinished||(H.prefinished=!0,F.emit("prefinish")));return I}if(a4)return mS;a4=!0;var v=tj;mS=h;var y=Mi.Buffer;h.WritableState=c;var A=$m;A.inherits=vl;var E=GA;A.inherits(h,E);h.prototype.pipe=function(){this.emit("error",Error("Cannot pipe. Not readable."))};h.prototype.write=function(F,H,I){var M=(this||Bi)._writableState,N=!1;
A.isFunction(H)&&(I=H,H=null);A.isBuffer(F)?H="buffer":H||(H=M.defaultEncoding);A.isFunction(I)||(I=function(){});M.ended?f(this||Bi,M,I):k(this||Bi,M,F,I)&&(M.pendingcb++,N=n(this||Bi,M,F,H,I));return N};h.prototype.cork=function(){(this||Bi)._writableState.corked++};h.prototype.uncork=function(){var F=(this||Bi)._writableState;F.corked&&(F.corked--,F.writing||F.corked||F.finished||F.bufferProcessing||!F.buffer.length||l(this||Bi,F))};h.prototype._write=function(F,H,I){I(Error("not implemented"))};
h.prototype._writev=null;h.prototype.end=function(F,H,I){var M=(this||Bi)._writableState;A.isFunction(F)?(I=F,H=F=null):A.isFunction(H)&&(I=H,H=null);A.isNullOrUndefined(F)||this.write(F,H);M.corked&&(M.corked=1,this.uncork());if(!M.ending&&!M.finished){F=this||Bi;M.ending=!0;r(F,M);if(I)if(M.finished)v.nextTick(I);else F.once("finish",I);M.ended=!0}};return mS}function vD(){function d(e){if(!((this||Et)instanceof d))return new d(e);n.call(this||Et,e);b.call(this||Et,e);e&&!1===e.readable&&((this||
Et).readable=!1);e&&!1===e.writable&&((this||Et).writable=!1);(this||Et).allowHalfOpen=!0;e&&!1===e.allowHalfOpen&&((this||Et).allowHalfOpen=!1);this.once("end",c)}function c(){(this||Et).allowHalfOpen||(this||Et)._writableState.ended||h.nextTick((this||Et).end.bind(this||Et))}if(b4)return nS;b4=!0;var h=tj;nS=d;var f=Object.keys||function(e){var m=[],a;for(a in e)m.push(a);return m},k=$m;k.inherits=vl;var n=c4(),b=$3();k.inherits(d,n);(function(e,m){for(var a=0,g=e.length;a<g;a++)m(e[a],a)})(f(b.prototype),
function(e){d.prototype[e]||(d.prototype[e]=b.prototype[e])});return nS}function c4(){function d(N,W){var X=vD();N=N||{};var ea=N.highWaterMark,Aa=N.objectMode?16:16384;(this||dg).highWaterMark=ea||0===ea?ea:Aa;(this||dg).highWaterMark=~~(this||dg).highWaterMark;(this||dg).buffer=[];(this||dg).length=0;(this||dg).pipes=null;(this||dg).pipesCount=0;(this||dg).flowing=null;(this||dg).ended=!1;(this||dg).endEmitted=!1;(this||dg).reading=!1;(this||dg).sync=!0;(this||dg).needReadable=!1;(this||dg).emittedReadable=
!1;(this||dg).readableListening=!1;(this||dg).objectMode=!!N.objectMode;W instanceof X&&((this||dg).objectMode=(this||dg).objectMode||!!N.readableObjectMode);(this||dg).defaultEncoding=N.defaultEncoding||"utf8";(this||dg).ranOut=!1;(this||dg).awaitDrain=0;(this||dg).readingMore=!1;(this||dg).decoder=null;(this||dg).encoding=null;N.encoding&&(I||(I=oS.StringDecoder),(this||dg).decoder=new I(N.encoding),(this||dg).encoding=N.encoding)}function c(N){vD();if(!((this||dg)instanceof c))return new c(N);
(this||dg)._readableState=new d(N,this||dg);(this||dg).readable=!0;F.call(this||dg)}function h(N,W,X,ea,Aa){var Ma=X;var K=null;H.isBuffer(Ma)||H.isString(Ma)||H.isNullOrUndefined(Ma)||W.objectMode||(K=new TypeError("Invalid non-string/buffer chunk"));(Ma=K)?N.emit("error",Ma):H.isNullOrUndefined(X)?(W.reading=!1,W.ended||(W.decoder&&!W.ended&&(X=W.decoder.end())&&X.length&&(W.buffer.push(X),W.length+=W.objectMode?1:X.length),W.ended=!0,k(N))):W.objectMode||X&&0<X.length?W.ended&&!Aa?(X=Error("stream.push() after EOF"),
N.emit("error",X)):W.endEmitted&&Aa?(X=Error("stream.unshift() after end event"),N.emit("error",X)):(!W.decoder||Aa||ea||(X=W.decoder.write(X)),Aa||(W.reading=!1),W.flowing&&0===W.length&&!W.sync?(N.emit("data",X),N.read(0)):(W.length+=W.objectMode?1:X.length,Aa?W.buffer.unshift(X):W.buffer.push(X),W.needReadable&&k(N)),b(N,W)):Aa||(W.reading=!1);return!W.ended&&(W.needReadable||W.length<W.highWaterMark||0===W.length)}function f(N,W){if(0===W.length&&W.ended)return 0;if(W.objectMode)return 0===N?
0:1;if(isNaN(N)||H.isNull(N))return W.flowing&&W.buffer.length?W.buffer[0].length:W.length;if(0>=N)return 0;if(N>W.highWaterMark){var X=N;if(8388608<=X)X=8388608;else{X--;for(var ea=1;32>ea;ea<<=1)X|=X>>ea;X++}W.highWaterMark=X}if(N>W.length){if(W.ended)return W.length;W.needReadable=!0;return 0}return N}function k(N){var W=N._readableState;W.needReadable=!1;W.emittedReadable||(M("emitReadable",W.flowing),W.emittedReadable=!0,W.sync?v.nextTick(function(){n(N)}):n(N))}function n(N){M("emit readable");
N.emit("readable");a(N)}function b(N,W){W.readingMore||(W.readingMore=!0,v.nextTick(function(){for(var X=W.length;!W.reading&&!W.flowing&&!W.ended&&W.length<W.highWaterMark&&(M("maybeReadMore read 0"),N.read(0),X!==W.length);)X=W.length;W.readingMore=!1}))}function e(N){return function(){var W=N._readableState;M("pipeOnDrain",W.awaitDrain);W.awaitDrain&&W.awaitDrain--;0===W.awaitDrain&&E.listenerCount(N,"data")&&(W.flowing=!0,a(N))}}function m(N,W){W.resumeScheduled||(W.resumeScheduled=!0,v.nextTick(function(){W.resumeScheduled=
!1;N.emit("resume");a(N);W.flowing&&!W.reading&&N.read(0)}))}function a(N){var W=N._readableState;M("flow",W.flowing);if(W.flowing){do var X=N.read();while(null!==X&&W.flowing)}}function g(N,W){var X=W.buffer,ea=W.length,Aa=!!W.decoder;W=!!W.objectMode;if(0===X.length)return null;if(0===ea)ea=null;else if(W)ea=X.shift();else if(!N||N>=ea)ea=Aa?X.join(""):A.concat(X,ea),X.length=0;else if(N<X[0].length)W=X[0],ea=W.slice(0,N),X[0]=W.slice(N);else if(N===X[0].length)ea=X.shift();else{ea=Aa?"":new A(N);
for(var Ma=0,K=0,aa=X.length;K<aa&&Ma<N;K++){W=X[0];var T=Math.min(N-Ma,W.length);Aa?ea+=W.slice(0,T):W.copy(ea,Ma,0,T);T<W.length?X[0]=W.slice(T):X.shift();Ma+=T}}return ea}function l(N){var W=N._readableState;if(0<W.length)throw Error("endReadable called on non-empty stream");W.endEmitted||(W.ended=!0,v.nextTick(function(){W.endEmitted||0!==W.length||(W.endEmitted=!0,N.readable=!1,N.emit("end"))}))}function r(N,W){for(var X=0,ea=N.length;X<ea;X++)W(N[X],X)}if(d4)return pS;d4=!0;var v=tj;pS=c;var y=
wga,A=Mi.Buffer;c.ReadableState=d;var E=$u.EventEmitter;E.listenerCount||(E.listenerCount=function(N,W){return N.listeners(W).length});var F=GA,H=$m;H.inherits=vl;var I,M=xga;M=M&&M.debuglog?M.debuglog("stream"):function(){};H.inherits(c,F);c.prototype.push=function(N,W){var X=(this||dg)._readableState;H.isString(N)&&!X.objectMode&&(W=W||X.defaultEncoding,W!==X.encoding&&(N=new A(N,W),W=""));return h(this||dg,X,N,W,!1)};c.prototype.unshift=function(N){return h(this||dg,(this||dg)._readableState,N,
"",!0)};c.prototype.setEncoding=function(N){I||(I=oS.StringDecoder);(this||dg)._readableState.decoder=new I(N);(this||dg)._readableState.encoding=N;return this||dg};c.prototype.read=function(N){M("read",N);var W=(this||dg)._readableState,X=N;if(!H.isNumber(N)||0<N)W.emittedReadable=!1;if(0===N&&W.needReadable&&(W.length>=W.highWaterMark||W.ended))return M("read: emitReadable",W.length,W.ended),0===W.length&&W.ended?l(this||dg):k(this||dg),null;N=f(N,W);if(0===N&&W.ended)return 0===W.length&&l(this||
dg),null;var ea=W.needReadable;M("need readable",ea);if(0===W.length||W.length-N<W.highWaterMark)ea=!0,M("length less than watermark",ea);if(W.ended||W.reading)ea=!1,M("reading or ended",ea);ea&&(M("do read"),W.reading=!0,W.sync=!0,0===W.length&&(W.needReadable=!0),this._read(W.highWaterMark),W.sync=!1);ea&&!W.reading&&(N=f(X,W));ea=0<N?g(N,W):null;H.isNull(ea)&&(W.needReadable=!0,N=0);W.length-=N;0!==W.length||W.ended||(W.needReadable=!0);X!==N&&W.ended&&0===W.length&&l(this||dg);H.isNull(ea)||this.emit("data",
ea);return ea};c.prototype._read=function(N){this.emit("error",Error("not implemented"))};c.prototype.pipe=function(N,W){function X(gb){M("onunpipe");gb===pa&&Aa()}function ea(){M("onend");N.end()}function Aa(){M("cleanup");N.removeListener("close",aa);N.removeListener("finish",T);N.removeListener("drain",oa);N.removeListener("error",K);N.removeListener("unpipe",X);pa.removeListener("end",ea);pa.removeListener("end",Aa);pa.removeListener("data",Ma);!fa.awaitDrain||N._writableState&&!N._writableState.needDrain||
oa()}function Ma(gb){M("ondata");!1===N.write(gb)&&(M("false write response, pause",pa._readableState.awaitDrain),pa._readableState.awaitDrain++,pa.pause())}function K(gb){M("onerror",gb);U();N.removeListener("error",K);0===E.listenerCount(N,"error")&&N.emit("error",gb)}function aa(){N.removeListener("finish",T);U()}function T(){M("onfinish");N.removeListener("close",aa);U()}function U(){M("unpipe");pa.unpipe(N)}var pa=this||dg,fa=(this||dg)._readableState;switch(fa.pipesCount){case 0:fa.pipes=N;
break;case 1:fa.pipes=[fa.pipes,N];break;default:fa.pipes.push(N)}fa.pipesCount+=1;M("pipe count=%d opts=%j",fa.pipesCount,W);W=W&&!1===W.end||N===v.stdout||N===v.stderr?Aa:ea;if(fa.endEmitted)v.nextTick(W);else pa.once("end",W);N.on("unpipe",X);var oa=e(pa);N.on("drain",oa);pa.on("data",Ma);if(N._events&&N._events.error)y(N._events.error)?N._events.error.unshift(K):N._events.error=[K,N._events.error];else N.on("error",K);N.once("close",aa);N.once("finish",T);N.emit("pipe",pa);fa.flowing||(M("pipe resume"),
pa.resume());return N};c.prototype.unpipe=function(N){var W=(this||dg)._readableState;if(0===W.pipesCount)return this||dg;if(1===W.pipesCount){if(N&&N!==W.pipes)return this||dg;N||(N=W.pipes);W.pipes=null;W.pipesCount=0;W.flowing=!1;N&&N.emit("unpipe",this||dg);return this||dg}if(!N){N=W.pipes;var X=W.pipesCount;W.pipes=null;W.pipesCount=0;W.flowing=!1;for(var ea=0;ea<X;ea++)N[ea].emit("unpipe",this||dg);return this||dg}a:{ea=W.pipes;X=0;for(var Aa=ea.length;X<Aa;X++)if(ea[X]===N){ea=X;break a}ea=
-1}if(-1===ea)return this||dg;W.pipes.splice(ea,1);--W.pipesCount;1===W.pipesCount&&(W.pipes=W.pipes[0]);N.emit("unpipe",this||dg);return this||dg};c.prototype.on=function(N,W){W=F.prototype.on.call(this||dg,N,W);"data"===N&&!1!==(this||dg)._readableState.flowing&&this.resume();if("readable"===N&&(this||dg).readable&&(N=(this||dg)._readableState,!N.readableListening))if(N.readableListening=!0,N.emittedReadable=!1,N.needReadable=!0,N.reading)N.length&&k(this||dg);else{var X=this||dg;v.nextTick(function(){M("readable nexttick read 0");
X.read(0)})}return W};c.prototype.addListener=c.prototype.on;c.prototype.resume=function(){var N=(this||dg)._readableState;N.flowing||(M("resume"),N.flowing=!0,N.reading||(M("resume read 0"),this.read(0)),m(this||dg,N));return this||dg};c.prototype.pause=function(){M("call pause flowing=%j",(this||dg)._readableState.flowing);!1!==(this||dg)._readableState.flowing&&(M("pause"),(this||dg)._readableState.flowing=!1,this.emit("pause"));return this||dg};c.prototype.wrap=function(N){var W=(this||dg)._readableState,
X=!1,ea=this||dg;N.on("end",function(){M("wrapped end");if(W.decoder&&!W.ended){var Ma=W.decoder.end();Ma&&Ma.length&&ea.push(Ma)}ea.push(null)});N.on("data",function(Ma){M("wrapped data");W.decoder&&(Ma=W.decoder.write(Ma));Ma&&(W.objectMode||Ma.length)&&!ea.push(Ma)&&(X=!0,N.pause())});for(var Aa in N)H.isFunction(N[Aa])&&H.isUndefined((this||dg)[Aa])&&((this||dg)[Aa]=function(Ma){return function(){return N[Ma].apply(N,arguments)}}(Aa));r(["error","close","destroy","pause","resume"],function(Ma){N.on(Ma,
ea.emit.bind(ea,Ma))});ea._read=function(Ma){M("wrapped _read",Ma);X&&(X=!1,N.resume())};return ea};c._fromList=g;return pS}function e4(){function d(n,b){(this||ho).afterTransform=function(e,m){var a=b._transformState;a.transforming=!1;var g=a.writecb;g?(a.writechunk=null,a.writecb=null,k.isNullOrUndefined(m)||b.push(m),g&&g(e),e=b._readableState,e.reading=!1,(e.needReadable||e.length<e.highWaterMark)&&b._read(e.highWaterMark),e=void 0):e=b.emit("error",Error("no writecb in Transform class"));return e};
(this||ho).needTransform=!1;(this||ho).transforming=!1;(this||ho).writecb=null;(this||ho).writechunk=null}function c(n){if(!((this||ho)instanceof c))return new c(n);f.call(this||ho,n);(this||ho)._transformState=new d(n,this||ho);var b=this||ho;(this||ho)._readableState.needReadable=!0;(this||ho)._readableState.sync=!1;this.once("prefinish",function(){k.isFunction((this||ho)._flush)?this._flush(function(e){h(b,e)}):h(b)})}function h(n,b){if(b)return n.emit("error",b);b=n._transformState;if(n._writableState.length)throw Error("calling transform done when ws.length != 0");
if(b.transforming)throw Error("calling transform done when still transforming");return n.push(null)}if(f4)return qS;f4=!0;qS=c;var f=vD(),k=$m;k.inherits=vl;k.inherits(c,f);c.prototype.push=function(n,b){(this||ho)._transformState.needTransform=!1;return f.prototype.push.call(this||ho,n,b)};c.prototype._transform=function(n,b,e){throw Error("not implemented");};c.prototype._write=function(n,b,e){var m=(this||ho)._transformState;m.writecb=e;m.writechunk=n;m.writeencoding=b;m.transforming||(n=(this||
ho)._readableState,(m.needTransform||n.needReadable||n.length<n.highWaterMark)&&this._read(n.highWaterMark))};c.prototype._read=function(n){n=(this||ho)._transformState;k.isNull(n.writechunk)||!n.writecb||n.transforming?n.needTransform=!0:(n.transforming=!0,this._transform(n.writechunk,n.writeencoding,n.afterTransform))};return qS}function yga(){function d(f){if(!((this||g4)instanceof d))return new d(f);c.call(this||g4,f)}if(h4)return rS;h4=!0;rS=d;var c=e4(),h=$m;h.inherits=vl;h.inherits(d,c);d.prototype._transform=
function(f,k,n){n(null,f)};return rS}function nG(d){return d&&"object"===typeof d&&"default"in d?d["default"]:d}function zga(d){var c={},h;for(h in d)c[h]=d[h];return c}function Aga(d,c,h){d.open(function(){});return{apply:function(f,k,n){k=k||{};for(var b=[],e=-1,m=f.length;++e<m;){var a=f[e],g=a,l=a.prefix;l&&l.options&&(g.keyEncoding=g.keyEncoding||l.options.keyEncoding,g.valueEncoding=g.valueEncoding||l.options.valueEncoding);g=a;l=a.prefix;l="function"===typeof l.prefix?l.prefix():l;g.prefix=
l;b.push({key:c.encode([a.prefix,h.encodeKey(a.key,k,a)]),value:"del"!==a.type&&h.encodeValue(a.value,k,a),type:a.type})}d.db.batch(b,k,n)},get:function(f,k,n,b){n.asBuffer=h.valueAsBuffer(n);return d.db.get(c.encode([k,h.encodeKey(f,n,void 0)]),n,function(e,m){e?b(e):b(null,h.decodeValue(m,n))})},createDecoder:function(f){return function(k,n){return{key:h.decodeKey(c.decode(k)[1],f),value:h.decodeValue(n,f)}}},isClosed:function(){return d.isClosed()},close:function(f){return d.close(f)},iterator:function(f){var k=
zga(f||{}),n=f.prefix||[];Bga.toLtgt(f,k,function(b){return c.encode([n,h.encodeKey(b,k,{})])},c.lowerBound,c.upperBound);k.prefix=null;k.keyAsBuffer=k.valueAsBuffer=!1;"number"!==typeof k.limit&&(k.limit=-1);k.keyAsBuffer=c.buffer;k.valueAsBuffer=h.valueAsBuffer(k);return function(b){return{next:function(e){return b.next(e)},end:function(e){b.end(e)}}}(d.db.iterator(k))}}}function sS(){Error.call(this)}function oy(d,c){if(!(this instanceof oy))return new oy(d,c);i4.call(this,{objectMode:!0,highWaterMark:d.highWaterMark});
this._waiting=!1;this._options=d;this._makeData=c}function wD(d){j4.call(this||Kw,d);(this||Kw)._destroyed=!1}function Cga(d,c,h){h(null,d)}function tS(d){return function(c,h,f){"function"==typeof c&&(f=h,h=c,c={});"function"!=typeof h&&(h=Cga);"function"!=typeof f&&(f=null);return d(c,h,f)}}function kk(d){this._capacity=k4(d);this._front=this._length=0;if(l4(d)){for(var c=d.length,h=0;h<c;++h)this[h]=d[h];this._length=c}}function k4(d){if("number"!==typeof d)if(l4(d))d=d.length;else return 16;d=
Math.min(Math.max(16,d),1073741824);d=(d>>>0)-1;d|=d>>1;d|=d>>2;d|=d>>4;d|=d>>8;return(d|d>>16)+1}function uS(d){d=d.rev_tree.slice();for(var c;c=d.pop();){var h=c.ids,f=h[2];c=c.pos;if(f.length){h=0;for(var k=f.length;h<k;h++)d.push({pos:c+1,ids:f[h]})}else if(f=!!h[1].deleted,h=h[0],!n||(e!==f?e:b!==c?b<c:n<h)){var n=h;var b=c;var e=f}}return b+"-"+n}function bL(d,c){d=d.slice();for(var h;h=d.pop();){var f=h.pos,k=h.ids,n=k[2];h=c(0===n.length,f,k[0],h.ctx,k[1]);k=0;for(var b=n.length;k<b;k++)d.push({pos:f+
1,ids:n[k],ctx:h})}}function Dga(d,c){return d.pos-c.pos}function m4(d){var c=[];bL(d,function(f,k,n,b,e){f&&c.push({rev:k+"-"+n,pos:k,opts:e})});c.sort(Dga).reverse();d=0;for(var h=c.length;d<h;d++)delete c[d].pos;return c}function n4(d){var c=[];d=d.slice();for(var h;h=d.pop();){var f=h.pos,k=h.ids,n=k[0],b=k[1];k=k[2];var e=0===k.length;h=h.history?h.history.slice():[];h.push({id:n,opts:b});e&&c.push({pos:f+1-h.length,ids:h});n=0;for(b=k.length;n<b;n++)d.push({pos:f+1,ids:k[n],history:h})}return c.reverse()}
function Ega(d,c){return d.pos-c.pos}function o4(d,c){for(var h,f,k=d.length;c<k;c++){var n=d[c];n=[n.id,n.opts,[]];f?(f[2].push(n),f=n):h=f=n}return h}function Fga(d,c){return d[0]<c[0]?-1:1}function p4(d,c){c=[{tree1:d,tree2:c}];for(var h=!1;0<c.length;){var f=c.pop(),k=f.tree1;f=f.tree2;if(k[1].status||f[1].status)k[1].status="available"===k[1].status||"available"===f[1].status?"available":"missing";for(var n=0;n<f[2].length;n++)if(k[2][0]){for(var b=!1,e=0;e<k[2].length;e++)k[2][e][0]===f[2][n][0]&&
(c.push({tree1:k[2][e],tree2:f[2][n]}),b=!0);if(!b){h="new_branch";b=k[2];e=f[2][n];for(var m,a=b,g=e,l=Fga,r=0,v=a.length;r<v;)m=r+v>>>1,0>l(a[m],g)?r=m+1:v=m;b.splice(r,0,e)}}else h="new_leaf",k[2][0]=f[2][n]}return{conflicts:h,tree:d}}function q4(d,c,h){var f=[],k=!1,n=!1;if(!d.length)return{tree:[c],conflicts:"new_leaf"};for(var b=0,e=d.length;b<e;b++){var m=d[b];if(m.pos===c.pos&&m.ids[0]===c.ids[0])n=p4(m.ids,c.ids),f.push({pos:m.pos,ids:n.tree}),k=k||n.conflicts,n=!0;else if(!0!==h){var a=
m.pos<c.pos?m:c,g=m.pos<c.pos?c:m,l=[],r=[];for(r.push({ids:a.ids,diff:g.pos-a.pos,parent:null,parentIdx:null});0<r.length;){var v=r.pop();if(0===v.diff)v.ids[0]===g.ids[0]&&l.push(v);else for(var y=v.ids[2],A=0,E=y.length;A<E;A++)r.push({ids:y[A],diff:v.diff-1,parent:v.ids,parentIdx:A})}(l=l[0])?(n=p4(l.ids,g.ids),l.parent[2][l.parentIdx]=n.tree,f.push({pos:a.pos,ids:a.ids}),k=k||n.conflicts,n=!0):f.push(m)}else f.push(m)}n||f.push(c);f.sort(Ega);return{tree:f,conflicts:k||"internal_node"}}function Gga(d,
c){d=n4(d);for(var h,f,k=0,n=d.length;k<n;k++){var b=d[k],e=b.ids;if(e.length>c){h||(h={});var m=e.length-c;var a={pos:b.pos+m,ids:o4(e,m)};for(var g=0;g<m;g++)h[b.pos+g+"-"+e[g].id]=!0}else a={pos:b.pos,ids:o4(e,0)};f=f?q4(f,a,!0).tree:[a]}h&&bL(f,function(l,r,v){delete h[r+"-"+v]});return{tree:f,revs:h?Object.keys(h):[]}}function Hga(d){return d.ids}function r4(d){return d.reduce(function(c,h){c[h]=!0;return c},{})}function s4(d){if(!/^\d+-/.test(d))return lr.createError(lr.INVALID_REV);var c=d.indexOf("-"),
h=d.substring(0,c);d=d.substring(c+1);return{prefix:parseInt(h,10),id:d}}function t4(d,c,h){h||(h={deterministic_revs:!0});var f={status:"available"};d._deleted&&(f.deleted=!0);if(c){d._id||(d._id=HA.uuid());var k=HA.rev(d,h.deterministic_revs);if(d._rev){c=s4(d._rev);if(c.error)return c;d._rev_tree=[{pos:c.prefix,ids:[c.id,{status:"missing"},[[k,f,[]]]]}];var n=c.prefix+1}else d._rev_tree=[{pos:1,ids:[k,f,[]]}],n=1}else{if(d._revisions){k=d._revisions;n=k.start-k.ids.length+1;k=k.ids;c=[k[0],f,[]];
h=1;for(var b=k.length;h<b;h++)c=[k[h],{status:"missing"},[c]];d._rev_tree=[{pos:n,ids:c}];n=d._revisions.start;k=d._revisions.ids[0]}if(!d._rev_tree){c=s4(d._rev);if(c.error)return c;n=c.prefix;k=c.id;d._rev_tree=[{pos:n,ids:[k,f,[]]}]}}HA.invalidIdError(d._id);d._rev=n+"-"+k;f={metadata:{},data:{}};for(var e in d)if(Object.prototype.hasOwnProperty.call(d,e)){if((n="_"===e[0])&&!Iga[e])throw d=lr.createError(lr.DOC_VALIDATION,e),d.message=lr.DOC_VALIDATION.message+": "+e,d;n&&!Jga[e]?f.metadata[e.slice(1)]=
d[e]:f.data[e]=d[e]}return f}function Kga(d,c,h){try{var f=oG.atob(d.data)}catch(k){f={error:lr.createError(lr.BAD_ARG,"Attachment is not a valid base64 string")}}if(f.error)return h(f.error);d.length=f.length;d.data="blob"===c?oG.binaryStringToBlobOrBuffer(f,d.content_type):"base64"===c?oG.btoa(f):f;u4.binaryMd5(f,function(k){d.digest="md5-"+k;h()})}function Lga(d,c,h){u4.binaryMd5(d.data,function(f){d.digest="md5-"+f;d.length=d.data.size||d.data.length||0;"binary"===c?oG.blobOrBufferToBinaryString(d.data,
function(k){d.data=k;h()}):"base64"===c?oG.blobOrBufferToBase64(d.data,function(k){d.data=k;h()}):h()})}function Mga(d,c,h){if(d.stub)return h();"string"===typeof d.data?Kga(d,c,h):Lga(d,c,h)}function v4(d,c,h,f,k,n,b,e){if(Aq.revExists(c.rev_tree,h.metadata.rev)&&!e)return f[k]=h,n();var m=c.winningRev||Aq.winningRev(c),a="deleted"in c?c.deleted:Aq.isDeleted(c,m),g="deleted"in h.metadata?h.metadata.deleted:Aq.isDeleted(h.metadata),l=/^1-/.test(h.metadata.rev);a&&!g&&e&&l&&(l=h.data,l._rev=m,l._id=
h.metadata.id,h=t4(l,e));d=Aq.merge(c.rev_tree,h.metadata.rev_tree[0],d);if(e&&(a&&g&&"new_leaf"!==d.conflicts||!a&&"new_leaf"!==d.conflicts||a&&!g&&"new_branch"===d.conflicts))return h=lr.createError(lr.REV_CONFLICT),f[k]=h,n();f=h.metadata.rev;h.metadata.rev_tree=d.tree;h.stemmedRevs=d.stemmedRevs||[];c.rev_map&&(h.metadata.rev_map=c.rev_map);c=Aq.winningRev(h.metadata);e=Aq.isDeleted(h.metadata,c);a=a===e?0:a<e?-1:1;f=f===c?e:Aq.isDeleted(h.metadata,f);b(h,c,e,f,!0,a,k,n)}function pG(d){return d&&
"object"===typeof d&&"default"in d?d["default"]:d}function w4(d,c){d=new Uint8Array(d);return qG.blob([d],{type:c})}function Nga(d,c){qG.readAsBinaryString(d,c)}function x4(d,c){c=c.prefix()[0];d=d._cache;var h=d.get(c);h||(h=new Ft.Map,d.set(c,h));return h}function IA(){this._batch=[];this._cache=new Ft.Map}function vS(d){return"winningRev"in d?d.winningRev:rG.winningRev(d)}function Oga(d,c,h){var f=d.content_type;return new Promise(function(k,n){c.binaryStore.get(d.digest,function(b,e){if(b){if("NotFoundError"!==
b.name)return n(b);b=h.binary?qG.binaryStringToBlobOrBuffer("",f):""}else b=h.binary?w4(e,f):e.toString("base64");delete d.stub;delete d.length;d.data=b;k()})})}function wS(d,c,h){var f=[];d.forEach(function(k){k.doc&&k.doc._attachments&&Object.keys(k.doc._attachments).forEach(function(n){n=k.doc._attachments[n];"data"in n||f.push(n)})});return Promise.all(f.map(function(k){return Oga(k,c,h)}))}function xS(d){(this||JA).db=d;(this||JA)._ended=!1;(this||JA)._nexting=!1}function py(d){(this||Il)._db=
d;(this||Il)._operations=[];(this||Il)._written=!1}function Kp(d){if(!arguments.length||void 0===d)throw Error("constructor requires at least a location argument");if("string"!=typeof d)throw Error("constructor requires a location string argument");(this||Gm).location=d;(this||Gm).status="new"}function mr(d,c,h,f,k,n){this._color=d;this.key=c;this.value=h;this.left=f;this.right=k;this._count=n}function jv(d){return new mr(d._color,d.key,d.value,d.left,d.right,d._count)}function qy(d,c){return new mr(d,
c.key,c.value,c.left,c.right,c._count)}function Jl(d){d._count=1+(d.left?d.left._count:0)+(d.right?d.right._count:0)}function xD(d,c){this._compare=d;this.root=c}function yS(d,c){if(c.left){var h=yS(d,c.left);if(h)return h}if(h=d(c.key,c.value))return h;if(c.right)return yS(d,c.right)}function zS(d,c,h,f){if(0>=c(d,f.key)){if(f.left){var k=zS(d,c,h,f.left);if(k)return k}if(k=h(f.key,f.value))return k}if(f.right)return zS(d,c,h,f.right)}function AS(d,c,h,f,k){var n=h(d,k.key),b=h(c,k.key);if(0>=n&&
(k.left&&(n=AS(d,c,h,f,k.left))||0<b&&(n=f(k.key,k.value))))return n;if(0<b&&k.right)return AS(d,c,h,f,k.right)}function nr(d,c){this.tree=d;this._stack=c}function y4(d,c){d.key=c.key;d.value=c.value;d.left=c.left;d.right=c.right;d._color=c._color;d._count=c._count}function Pga(d,c){return d<c?-1:d>c?1:0}function z4(d,c){for(var h in d)c[h]=d[h]}function yD(d,c,h){return Lw(d,c,h)}function Qga(d){return 0<or.compare(d,(this||Xf)._end)}function Rga(d){return 0<=or.compare(d,(this||Xf)._end)}function Sga(d){return 0>
or.compare(d,(this||Xf)._end)}function Tga(d){return 0>=or.compare(d,(this||Xf)._end)}function cL(d,c){A4.call(this||Xf,d);(this||Xf)._limit=c.limit;-1===(this||Xf)._limit&&((this||Xf)._limit=Infinity);d=d._store[d._location];(this||Xf).keyAsBuffer=!1!==c.keyAsBuffer;(this||Xf).valueAsBuffer=!1!==c.valueAsBuffer;(this||Xf)._reverse=c.reverse;(this||Xf)._options=c;(this||Xf)._done=0;(this||Xf)._reverse?((this||Xf)._incr="prev",(this||Xf)._start=or.upperBound(c),(this||Xf)._end=or.lowerBound(c),"undefined"===
typeof(this||Xf)._start?(this||Xf)._tree=d.end:or.upperBoundInclusive(c)?(this||Xf)._tree=d.le((this||Xf)._start):(this||Xf)._tree=d.lt((this||Xf)._start),(this||Xf)._end&&(or.lowerBoundInclusive(c)?(this||Xf)._test=Rga:(this||Xf)._test=Qga)):((this||Xf)._incr="next",(this||Xf)._start=or.lowerBound(c),(this||Xf)._end=or.upperBound(c),"undefined"===typeof(this||Xf)._start?(this||Xf)._tree=d.begin:or.lowerBoundInclusive(c)?(this||Xf)._tree=d.ge((this||Xf)._start):(this||Xf)._tree=d.gt((this||Xf)._start),
(this||Xf)._end&&(or.upperBoundInclusive(c)?(this||Xf)._test=Tga:(this||Xf)._test=Sga))}function Bq(d){if(!((this||Xf)instanceof Bq))return new Bq(d);B4.call(this||Xf,"string"===typeof d?d:"");(this||Xf)._location=(this||Xf).location?"$"+(this||Xf).location:"_tree";(this||Xf)._store=(this||Xf).location?zD:this||Xf;(this||Xf)._store[(this||Xf)._location]=(this||Xf)._store[(this||Xf)._location]||Uga(or.compare)}function C4(d){return d&&"object"===typeof d&&"default"in d?d["default"]:d}function BS(d,
c){d=Vga.assign({db:Wga},d);Xga.call(this,d,c)}function CS(d){d.__serialize__=function(){return{__expr__:'({type: "'+d.type+'", name: "'+d.name+'", _id: "'+d._id+'"})'}};return d}function sG(d){var c,h,f,k,n,b,e;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){if(1==m.nextAddress){if(!d||lh.obj.isEmpty(d))return m.return(!1);if(d&&d._rev)return m.return(d);c=d;h=c.type;f=c.name;k=c._id;m.setFinallyBlock(2);n=Object;b=n.assign;e=d;return m.yield(lh.MorphicDB.default.fetchCommit(h,f,k),
4)}2!=m.nextAddress&&b.call(n,e,m.yieldResult);m.enterFinallyBlock();return m.return(d)})}function Mw(d){return d?d.replace(/^\s+|\s+$/g,""):""}function DS(d,c){var h=d&&"string"===typeof d.type,f=h?d:c,k;for(k in d){var n=d[k];Array.isArray(n)?n.forEach(function(b){DS(b,f)}):n&&"object"===typeof n&&DS(n,f)}h&&Object.defineProperty(d,"parent",{configurable:!0,writable:!0,enumerable:!1,value:c||null});return d}function dL(d){(this||Yga).options=d||{}}function an(d){d=d||{};D4.call(this||ry,d);(this||
ry).indentation=d.indent}function KA(d){throw new RangeError(Zga[d]);}function E4(d,c){var h=d.split("@"),f="";1<h.length&&(f=h[0]+"@",d=h[1]);d=d.replace($ga,".").split(".");h=[];for(var k=d.length;k--;)h[k]=c(d[k]);c=h.join(".");return f+c}function F4(d){for(var c=[],h=0,f=d.length;h<f;){var k=d.charCodeAt(h++);if(55296<=k&&56319>=k&&h<f){var n=d.charCodeAt(h++);56320==(64512&n)?c.push(((1023&k)<<10)+(1023&n)+65536):(c.push(k),h--)}else c.push(k)}return c}function ps(){this.href=this.path=this.pathname=
this.query=this.search=this.hash=this.hostname=this.port=this.host=this.auth=this.slashes=this.protocol=null}function tG(d,c,h){if(d&&kv.isObject(d)&&d instanceof ps)return d;var f=new ps;return f.parse(d,c,h),f}function lv(d){if("string"!=typeof d)throw new TypeError("Path must be a string. Received "+JSON.stringify(d));}function G4(d,c){for(var h,f="",k=0,n=-1,b=0,e=0;e<=d.length;++e){if(e<d.length)h=d.charCodeAt(e);else{if(47===h)break;h=47}if(47===h){if(n!==e-1&&1!==b)if(n!==e-1&&2===b){if(2>
f.length||2!==k||46!==f.charCodeAt(f.length-1)||46!==f.charCodeAt(f.length-2))if(2<f.length){if(n=f.lastIndexOf("/"),n!==f.length-1){-1===n?(f="",k=0):k=(f=f.slice(0,n)).length-1-f.lastIndexOf("/");n=e;b=0;continue}}else if(2===f.length||1===f.length){f="";k=0;n=e;b=0;continue}c&&(0<f.length?f+="/..":f="..",k=2)}else 0<f.length?f+="/"+d.slice(n+1,e):f=d.slice(n+1,e),k=e-n-1;n=e;b=0}else 46===h&&-1!==b?++b:b=-1}return f}function ES(d,c){try{return decodeURIComponent(d.join(""))}catch(f){}if(1===d.length)return d;
c=c||1;var h=d.slice(0,c);d=d.slice(c);return Array.prototype.concat.call([],ES(h),ES(d))}function FS(){return Array.prototype.reduce.call(arguments,function(d,c){return aha.resolve(d,c)})}function H4(d){return"\\"===bha.sep?d.replace(/\\/g,"/").replace(/^[a-z]:\/?/i,"/"):d}function uG(d){return cha(d.replace(/\+/g,"%2B"))}function eL(d,c,h){dha.nextTick(function(){d(c,h)})}function AD(d,c){try{return JSON.parse(d.replace(/^\)\]\}'/,""))}catch(h){throw h.sourceMapData=c,h;}}function I4(d,c,h){c=uG(c);
try{return String(d(c))}catch(f){throw f.sourceMapData=h,f;}}function J4(d,c,h,f){try{var k=K4(d,c)}catch(n){return eL(f,n)}if(!k||k.map)return eL(f,null,k);d=uG(k.url);h(d,function(n,b){if(n)return n.sourceMapData=k,f(n);k.map=String(b);try{k.map=AD(k.map,k)}catch(e){return f(e)}f(null,k)})}function L4(d,c,h){d=K4(d,c);if(!d||d.map)return d;d.map=I4(h,d.url,d);d.map=AD(d.map,d);return d}function K4(d,c){c=H4(c);d=(d=d.match(eha))?d[1]||d[2]||"":null;if(!d)return null;var h=d.match(fha);if(h){var f=
h[1]||"text/plain",k=h[2]||"";h=h[3]||"";c={sourceMappingURL:d,url:null,sourcesRelativeTo:c,map:h};if(!gha.test(f)){var n=Error("Unuseful data uri mime type: "+f);n.sourceMapData=c;throw n;}try{if(";base64"===k)if("undefined"===typeof TextDecoder||"undefined"===typeof Uint8Array)n=M4(h);else{var b=M4(h),e=b.length,m=new Uint8Array(e);for(d=0;d<e;d++)m[d]=b.charCodeAt(d);n=(new TextDecoder(hha,{fatal:!0})).decode(m)}else n=decodeURIComponent(h);c.map=AD(n,c)}catch(a){throw a.sourceMapData=c,a;}return c}n=
FS(c,d);return{sourceMappingURL:d,url:n,sourcesRelativeTo:n,map:null}}function N4(d,c,h,f,k){"function"===typeof f&&(k=f,f={});var n=d.sources?d.sources.length:0,b={sourcesResolved:[],sourcesContent:[]};if(0===n)eL(k,null,b);else{var e=function(){n--;0===n&&k(null,b)};O4(d,c,f,function(m,a,g){b.sourcesResolved[g]=m;"string"===typeof a?(b.sourcesContent[g]=a,eL(e,null)):(m=uG(m),h(m,function(l,r){b.sourcesContent[g]=l?l:String(r);e()}))})}}function P4(d,c,h,f){var k={sourcesResolved:[],sourcesContent:[]};
if(!d.sources||0===d.sources.length)return k;O4(d,c,f,function(n,b,e){k.sourcesResolved[e]=n;if(null!==h)if("string"===typeof b)k.sourcesContent[e]=b;else{n=uG(n);try{k.sourcesContent[e]=String(h(n))}catch(m){k.sourcesContent[e]=m}}});return k}function O4(d,c,h,f){h=h||{};c=H4(c);for(var k,n,b=0,e=d.sources.length;b<e;b++)k=null,"string"===typeof h.sourceRoot?k=h.sourceRoot:"string"===typeof d.sourceRoot&&!1!==h.sourceRoot&&(k=d.sourceRoot),k=null===k||""===k?FS(c,d.sources[b]):FS(c,k.replace(iha,
"/"),d.sources[b]),n=(d.sourcesContent||[])[b],f(k,n,b)}function io(d){Q4.call(this||GS,d)}function HS(d){return[]}function fL(d,c){c=void 0===c?{}:c;var h,f,k,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){switch(b.nextAddress){case 1:return h=c.morphicDB||nf.MorphicDB.default,b.yield(h.load("part","string"===typeof d?d:d.name,c,"string"===typeof d?void 0:d),2);case 2:f=b.yieldResult;if(!f.isWindow||!f.targetMorph){b.jumpTo(3);break}k=f.targetMorph;return b.yield(nf.ensureCommitInfo(f.metadata&&
f.metadata.commit),4);case 4:(n=b.yieldResult)&&k.changeMetaData("commit",n,!0,!1);case 3:return b.return(f)}})}function IS(d,c,h,f,k,n){var b,e,m,a,g,l,r,v,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(A){switch(A.nextAddress){case 1:A.setCatchFinallyBlocks(2);if(d.isMorph){A.jumpTo(4);break}if("function"!==typeof d.beforePublish){A.jumpTo(5);break}return A.yield(d.beforePublish(c,d),5);case 4:b=[],d.withAllSubmorphsDo(function(E){"function"===typeof E.beforePublish&&b.push(E)}),
e=$jscomp.makeIterator(b),m=e.next();case 8:if(m.done){A.jumpTo(5);break}a=m.value;return A.yield(a.beforePublish(),9);case 9:m=e.next();A.jumpTo(8);break;case 5:A.leaveTryBlock(3);break;case 2:g=A.enterCatchBlock(),l="Error in beforePublish of "+d+"\n"+g.stack,"function"===typeof d.world&&d.world()?d.world().logError(Error(l)):console.error(l);case 3:return r=Object.assign({previewWidth:100,previewHeight:100,previewType:"png"},h),v=h.morphicDB||nf.MorphicDB.default,A.yield(v.snapshotAndCommit("part",
c,d,r,f,k,n),12);case 12:return y=A.yieldResult,nf.emit("lively.partsbin/partpublished",y),A.return(y)}})}function vG(d,c){c=void 0===c?{}:c;var h,f,k,n,b,e,m,a,g,l,r,v,y,A,E,F,H,I,M,N,W,X,ea,Aa,Ma,K,aa,T,U,pa,fa,oa,gb,zb,va,ma,ta,Na,Kb,kc,Vb,jc,Qc,Pb,xd,Td,ka,Fa,Sa,wb,cc,Ld,Jd;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Uc){switch(Uc.nextAddress){case 1:return h=c,f=void 0===h.showPublishDialog?!0:h.showPublishDialog,k=void 0===h.notifications?!0:h.notifications,n=void 0===h.loadingIndicator?
!0:h.loadingIndicator,b=void 0===h.preferWindow?!0:h.preferWindow,a=d,g=d.world()||d.env.world,l=d.name,r=[],v="",Uc.yield(nf.ensureCommitInfo(nf.Path("metadata.commit").get(d)||nf.Path("metadata.commit").get(a)),2);case 2:y=Uc.yieldResult;A=c.morphicDB||nf.MorphicDB.default;y||(y={type:"part",name:d.name,author:g.getCurrentUser(),tags:[],description:"no description"});if(!f){y&&(E=y,l=E.name,r=E.tags,v=E.description);Uc.jumpTo(3);break}F=g;H=F.openPrompt;return Uc.yield(nf.loadPart("publish part dialog"),
5);case 5:return Uc.yield(H.call(F,Uc.yieldResult,{part:d}),4);case 4:I=Uc.yieldResult;M=I.db;N=I.commit;if(!N)return Uc.return(null);M&&(c.morphicDB=A=M);W=N;l=W.name;r=W.tags;v=W.description;case 3:if(!n){Uc.jumpTo(6);break}X=$world.execCommand("open loading indicator","saving "+l+"...");return Uc.yield(nf.promise.delay(80),6);case 6:Uc.setCatchFinallyBlocks(8,9);ea="HEAD";Aa=y?y.name:d.name;if(Aa===l){Ma=y?y._id:void 0;Uc.jumpTo(11);break}return Uc.yield(A.exists("part",l),12);case 12:K=Uc.yieldResult;
aa=K.exists;T=K.commitId;if(!aa){Uc.jumpTo(13);break}return Uc.yield(g.confirm('A part "'+l+'" already exists, overwrite?'),14);case 14:U=Uc.yieldResult;if(!U)return Uc.return(null);Ma=T;case 13:a.name=l;case 11:return b&&!d.isWindow&&(pa=d.getWindow())&&pa.targetMorph===d&&(d=pa,m=pa.metadata,e=!0),fa={author:d.world().getCurrentUser(),message:"published",tags:r,description:v},Uc.yield(nf.savePart(d,l,c,fa,ea,Ma),15);case 15:oa=Uc.yieldResult;if(!e){Uc.jumpTo(16);break}if(a.metadata)return zb=a.metadata,
Uc.yield(nf.ensureCommitInfo(pa.metadata.commit),20);gb=a;return Uc.yield(nf.ensureCommitInfo(pa.metadata.commit),19);case 19:gb.metadata={commit:Uc.yieldResult};Uc.jumpTo(18);break;case 20:zb.commit=Uc.yieldResult;case 18:pa.metadata=m;case 16:return k&&d.setStatusMessage("saved part "+l),Uc.return(oa);case 9:Uc.enterFinallyBlock();X&&X.remove();Uc.leaveFinallyBlock(0);break;case 8:va=Uc.enterCatchBlock();ma=$jscomp.makeIterator(va.message.match(/Trying to store "([^"]+)" on top of expected version ([^\s]+) but ref HEAD is of version ([^\s!]+)/)||
[]);ma.next();ma.next();ta=ma.next().value;Na=ma.next().value;if(!ta||!Na){Uc.jumpTo(21);break}Kb=$jscomp;kc=Kb.makeIterator;return Uc.yield(A.log(Na,1,!0),22);case 22:return Vb=kc.call(Kb,Uc.yieldResult),Qc=jc=Vb.next().value,Pb=Qc.author,xd=Pb.name,Td=Qc.timestamp,ka='The current version of part "'+l+'" is not the most recent!\nA newer version by '+(xd+" was saved on ")+(nf.date.format(new Date(Td),"yyyy-mm-dd HH:MM")+". Overwrite?"),Uc.yield(g.confirm(["Version Mismatch\n",{},ka,{fontWeight:"normal",
fontSize:16}]),23);case 23:Fa=Uc.yieldResult;if(!Fa)return Uc.return(null);Sa=nf.obj.dissoc(jc,["preview"]);a.changeMetaData("commit",Sa,!0,!1);return Uc.return(vG(a,Object.assign({},c,{morphicDB:A,showPublishDialog:!1})));case 21:wb=$jscomp.makeIterator(va.message.match(/Trying to store "([^"]+)" on top of expected version ([^\s]+) but no version entry exists/)||[]);wb.next();wb.next();cc=wb.next().value;if(!cc){Uc.jumpTo(24);break}Ld="Part "+l+" no longer exist in the object database.\nDo you still want to publish it?";
return Uc.yield(g.confirm(Ld),25);case 25:Jd=Uc.yieldResult;if(!Jd)return Uc.return(null);a.changeMetaData("commit",null,!0,!1);return Uc.return(vG(a,Object.assign({},c,{morphicDB:A,showPublishDialog:!1})));case 24:throw console.error(va),k&&g.logError("Error saving part: "+va),va;}})}function JS(d){d=void 0===d?{}:d;var c,h,f,k,n,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(1==e.nextAddress)return c=d.morphicDB||nf.MorphicDB.default,e.yield(c.latestCommits("part"),2);if(3!=
e.nextAddress)return h=e.yieldResult,f=h.map(function(m){return{isListItem:!0,string:m.name,value:m}}),e.yield($world.filterableListPrompt("Select part to load",f,{fuzzy:!0}),3);k=e.yieldResult;n=$jscomp.makeIterator(k.selected);b=n.next().value;return e.return(b?nf.loadPart(b):null)})}function KS(d){var c;return $jscomp.asyncExecutePromiseGeneratorProgram(function(h){if(1==h.nextAddress)return h.yield($world.prompt("Enter part name to publish object under",{input:d.name||"part-name",historyId:"lively.partsbin-partname-publish-to-folder-input-hist"}),
2);c=h.yieldResult;if(!c)throw"canceled";return h.return(nf.saveObjectToPartsbinFolder(d,c,{previewWidth:d.width,previewHeight:d.height}))})}function LS(d,c,h){h=void 0===h?{}:h;var f,k,n,b,e,m,a,g,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){switch(r.nextAddress){case 1:h=Object.assign({preferWindow:!0},h);h.preferWindow&&(d=(f=d.getWindow())&&f.targetMorph===d?f:d);r.setCatchFinallyBlocks(2);if(d.isMorph){r.jumpTo(4);break}if("function"!==typeof d.beforePublish){r.jumpTo(5);
break}return r.yield(d.beforePublish(c,d),5);case 4:k=[],d.withAllSubmorphsDo(function(v){"function"===typeof v.beforePublish&&k.push(v)}),n=$jscomp.makeIterator(k),b=n.next();case 8:if(b.done){r.jumpTo(5);break}e=b.value;return r.yield(e.beforePublish(),9);case 9:b=n.next();r.jumpTo(8);break;case 5:r.leaveTryBlock(3);break;case 2:m=r.enterCatchBlock(),a="Error in beforePublish of "+d+"\n"+m.stack,"function"===typeof d.world&&d.world()?d.world().logError(Error(a)):console.error(a);case 3:return r.yield(nf.resource(h.partsbinFolder).ensureExistance(),
12);case 12:return g=nf.resource(h.partsbinFolder).join(c+".json"),r.yield(nf.createMorphSnapshot(d,h),13);case 13:return l=r.yieldResult,r.yield(g.write(JSON.stringify(l,null,2)),14);case 14:return r.return({partName:c,url:g.url})}})}function wG(d,c){c=void 0===c?{}:c;return $jscomp.asyncExecutePromiseGeneratorProgram(function(h){return h.return(nf.loadPart(d,c))})}function MS(d){var c={type:"input",extent:nf.pt(420,24),fixedWidth:!0,fixedHeight:!0,padding:nf.Rectangle.inset(4,4),border:{color:nf.Color.gray,
width:1}};return Object.assign(nf.morph({extent:nf.pt(420,24),layout:new nf.VerticalLayout({resizeSubmorphs:!0,spacing:3}),submorphs:[Object.assign({},c,{name:"name input",placeholder:"name"}),Object.assign({},c,{name:"type input",placeholder:"type"}),Object.assign({},c,{name:"timestamp input",placeholder:"timestamp"}),{layout:new nf.VerticalLayout({resizeSubmorphs:!0,spacing:3}),submorphs:[Object.assign({},c,{name:"author.name input",placeholder:"author name"}),Object.assign({},c,{name:"author.email input",
placeholder:"author email"}),Object.assign({},c,{name:"author.realm input",placeholder:"author realm"})]},Object.assign({},c,{name:"tags input",placeholder:"tags"}),Object.assign({},c,{height:70,name:"description input",type:"text"}),Object.assign({},c,{height:70,name:"message input",type:"text"}),Object.assign({},c,{height:70,name:"metadata input",type:"text"}),{layout:new nf.HorizontalLayout({spacing:3,direction:"centered"}),submorphs:[{type:"button",name:"ok button",label:"OK"},{type:"button",
name:"cancel button",label:"Cancel"}]}],name:"commit editor",get ui(){return{metadataInput:this.get("metadata input"),messageInput:this.get("message input"),descriptionInput:this.get("description input"),tagsInput:this.get("tags input"),authorRealmInput:this.get("author.realm input"),authorEmailInput:this.get("author.email input"),authorNameInput:this.get("author.name input"),timestampInput:this.get("timestamp input"),typeInput:this.get("type input"),nameInput:this.get("name input"),cancelButton:this.get("cancel button"),
okButton:this.get("ok button")}},set commit(h){this._commit=h;var f=h.type,k=h.timestamp,n=h.author,b=h.tags,e=h.description,m=h.metadata,a=this.ui,g=a.typeInput,l=a.timestampInput,r=a.authorNameInput,v=a.authorEmailInput,y=a.authorRealmInput,A=a.tagsInput,E=a.descriptionInput,F=a.messageInput,H=a.metadataInput;a.nameInput.input=h.name;g.input=f;l.input=String(new Date(k));r.input=n.name;v.input=n.email;y.input=n.realm;A.input=b.join(" ");E.textString=e;F.textString="";H.textString=m?JSON.stringify(m,
null,2):""},get commit(){var h=this._commit;if(!h)throw Error("commit editor does not have a _commit object");var f=this.ui,k=f.authorNameInput,n=f.authorEmailInput,b=f.authorRealmInput,e=f.tagsInput,m=f.descriptionInput,a=f.messageInput,g=f.metadataInput,l=f.nameInput.input;f=f.typeInput.input;if(h.name!==l)throw Error("name does not match _commit.name: "+l+" vs "+h.name);if(h.type!==f)throw Error("type does not match _commit.type: "+f+" vs "+h.type);h.author.name=k.input;h.author.email=n.input;
h.author.realm=b.input;h.tags=e.input.split(" ").map(function(r){return r.trim()}).filter(Boolean);h.description=m.textString;h.message=a.textString;h.metadata=g.textString?JSON.parse(g.textString):null;return h},onLoad:function(){nf.connect(this.ui.okButton,"fire",this,"accept");nf.connect(this.ui.cancelButton,"fire",this,"cancel")},accept:function(){},cancel:function(){}}),d)}function gL(d,c,h){var f,k;return $jscomp.asyncExecutePromiseGeneratorProgram(function(n){f=d.isResource?d:ug.resource(System.decanonicalize(d));
k=f.nameWithoutExt();return n.return(ug.loadWorldFromDB(k,void 0,c,h))})}function hL(d,c,h){var f,k,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){if(1==b.nextAddress)return f=ug.MorphicDB.default,b.yield(f.load("world",void 0,h,d),2);k=b.yieldResult;n="undefined"!==typeof document?document.location.search:"";h=Object.assign({pathForBrowserHistory:ug.pathForBrowserHistory(k.name,n)},h);return b.return(ug.loadWorld(k,c,h))})}function iL(d,c,h,f){var k,n,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(1==
e.nextAddress)return k=ug.MorphicDB.default,e.yield(k.load("world",d,f,void 0,c||void 0),2);n=e.yieldResult;b="undefined"!==typeof document?document.location.search:"";f=Object.assign({pathForBrowserHistory:ug.pathForBrowserHistory(d,b)},f);return e.return(ug.loadWorld(n,h,f))})}function jL(d,c,h){h=void 0===h?{}:h;var f,k,n,b,e,m,a,g,l,r,v,y,A;return $jscomp.asyncExecutePromiseGeneratorProgram(function(E){switch(E.nextAddress){case 1:f=h;k=f.env;n=void 0===f.verbose?!0:f.verbose;b=void 0===f.localconfig?
!0:f.localconfig;e=void 0===f.l2l?!0:f.l2l;m=void 0===f.shell?!0:f.shell;a=void 0===f.worldLoadDialog?!1:f.worldLoadDialog;g=void 0===f.showUserFlap?"undefined"===typeof d.showsUserFlap?!0:d.showsUserFlap:f.showUserFlap;k=k||(c?c.env:ug.MorphicEnv.default());l=k.domEnv.document||document;r=l.getElementById("dom-loading-indicator");E.setCatchFinallyBlocks(2,3);if(!(v=e)){E.jumpTo(5);break}return E.yield(ug.setupLively2Lively(d),6);case 6:v=E.yieldResult;case 5:y=v;if(!y||!m){E.jumpTo(7);break}return E.yield(ug.setupLivelyShell({l2lClient:y}),
7);case 7:n&&r&&(r.style.display="");if(!b){E.jumpTo(9);break}return E.yield(ug.loadLocalConfig(),10);case 10:case 9:return E.yield(k.setWorld(d),11);case 11:a&&d.execCommand("load world");h.pathForBrowserHistory&&window.history.pushState({},"lively.next",h.pathForBrowserHistory);d.showsUserFlap=g;if(c)c.onUnload();ug.emit("world/loaded",d);return E.return(d);case 3:E.enterFinallyBlock();r&&(r.style.display="none");E.leaveFinallyBlock(0);break;case 2:A=E.enterCatchBlock();console.error("Error loading world: ",
A);if(!c){E.jumpTo(12);break}return E.yield(k.setWorld(c),13);case 13:c.showError(A);case 12:throw A;}})}function BD(d,c){var h,f,k,n,b,e,m,a,g,l,r,v,y,A,E,F,H,I,M,N,W,X,ea,Aa,Ma,K,aa,T,U,pa,fa,oa,gb,zb,va,ma,ta,Na,Kb,kc,Vb,jc,Qc,Pb,xd,Td;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ka){switch(ka.nextAddress){case 1:return c=Object.assign({showSaveDialog:!0,useExpectedCommit:!0,errorOnMissingExpectedCommit:!1,confirmOverwrite:!0},c),h=d.name,f=[],k="",ka.yield(ug.ensureCommitInfo(ug.Path("metadata.commit").get(d)),
2);case 2:n=ka.yieldResult;b=c.morphicdb||ug.MorphicDB.default;e="";m="db";if(!c.showSaveDialog){n&&(a=n,h=a.name,f=a.tags,k=a.description);ka.jumpTo(3);break}return ka.yield(ug.resource("part://SystemDialogs/save world dialog").read(),4);case 4:return g=ka.yieldResult,ka.yield(d.openPrompt(g,{targetWorld:d}),5);case 5:if(l=ka.yieldResult,r=l.commit,v=l.db,y=l.mode,A=l.filePath,v&&(b=v),m=y,e=A,E=r||{},h=E.name,f=E.tags,k=E.description,!h)return ka.return(null);case 3:return F=$world.execCommand("open loading indicator",
"saving "+h+"..."),ka.yield(ug.promise.delay(80),6);case 6:if("json"!=m){ka.jumpTo(7);break}H=ug.resource(System.baseURL).join(e).withRelativePartsResolved();return ka.yield(H.exists(),8);case 8:return ka.yieldResult?(F.visible=!1,ka.yield($world.confirm(["File Conflict\n",{},"The file you want to save the world to\n",{fontSize:15,fontWeight:"normal"},H.url,{textStyle:"italic",fontSize:15,fontWeight:"normal"},"\n already exists. Overwrite?",{fontSize:15,fontWeight:"normal"}],{lineWrapping:!1}),12)):
ka.yield(H.ensureExistance(),10);case 12:I=ka.yieldResult;if(!I)return F.remove(),ka.return();F.visible=!0;case 10:return d.changeMetaData("file",e,!1,!1),M=H,N=M.writeJson,ka.yield(ug.createMorphSnapshot(d),14);case 14:return ka.yield(N.call(M,ka.yieldResult),13);case 13:return ug.resource(System.baseURL).join("/subservers/ComponentBrowser/refresh").join(h).read(),F.remove(),d.setStatusMessage("saved world "+h+" to file: "+H.url),ka.return();case 7:ka.setCatchFinallyBlocks(15,16);W={previewWidth:200,
previewHeight:200,previewType:"png",ignoreMorphs:[F]};X="HEAD";ea=n?n.name:d.name;if(!c.useExpectedCommit){ka.jumpTo(18);break}if(ea===h||!c.confirmOverwrite){Aa=n?n._id:void 0;ka.jumpTo(18);break}return ka.yield(b.exists("world",h),20);case 20:Ma=ka.yieldResult;K=Ma.exists;aa=Ma.commitId;if(!K){ka.jumpTo(21);break}return ka.yield(d.confirm('A world "'+h+'" already exists, overwrite?',{styleClasses:["Halo"],fill:ug.Color.rgba(0,0,0,.8)}),22);case 22:T=ka.yieldResult;if(!T)return ka.return(null);Aa=
aa;case 21:d.name=h;case 18:return U={author:d.getCurrentUser(),message:"world save",tags:f,description:k},ka.yield(b.snapshotAndCommit("world",h,d,W,U,X,Aa),23);case 23:return pa=ka.yieldResult,window.history&&(fa="undefined"!==typeof document?document.location.search:"",oa=ug.pathForBrowserHistory(h,fa),window.history.pushState({},"lively.next",oa)),ug.resource(System.baseURL).join("/subserver/ComponentsBrowser/refresh").join(h).read(),d.setStatusMessage("saved world "+h),d.get("world-list")&&d.get("world-list").onWorldSaved(h),
ka.return(pa);case 16:ka.enterFinallyBlock();F.remove();ka.leaveFinallyBlock(0);break;case 15:gb=ka.enterCatchBlock();if(gb.message.includes("but no version entry exists")&&!c.errorOnMissingExpectedCommit)return ka.return(BD(d,Object.assign({},c,{morphicdb:b,useExpectedCommit:!1,showSaveDialog:!1})));zb=$jscomp.makeIterator(gb.message.match(/Trying to store "([^"]+)" on top of expected version ([^\s]+) but ref HEAD is of version ([^\s!]+)/)||[]);zb.next();zb.next();va=zb.next().value;ma=zb.next().value;
if(!va||!ma){ka.jumpTo(24);break}ta=$jscomp;Na=ta.makeIterator;return ka.yield(b.log(ma,1,!0),25);case 25:Kb=Na.call(ta,ka.yieldResult);kc=Kb.next().value;Vb=!0;if(!c.confirmOverwrite){ka.jumpTo(26);break}jc=kc;Qc=jc.author;Pb=Qc.name;xd=jc.timestamp;Td="The current version of world "+h+" is not the most recent!\nA newer version by "+(Pb+" was saved on ")+(ug.date.format(new Date(xd),"yyyy-mm-dd HH:MM")+". Overwrite?");return ka.yield(d.confirm(Td),27);case 27:Vb=ka.yieldResult;case 26:if(!Vb)return ka.return(null);
d.changeMetaData("commit",ug.obj.dissoc(kc,["preview"]),!0,!1);return ka.return(BD(d,Object.assign({},c,{morphicdb:b,showSaveDialog:!1})));case 24:console.error(gb),d.logError("Error saving world: "+gb),ka.jumpTo(16)}})}function NS(d,c){var h=d.row;d=d.column;var f=c.row;c=c.column;return h<f?-2:h===f?d<c?-1:d===c?0:1:2}function mv(d,c){return 0>$l.comparePosition(d,c)}function CD(d,c){return 0>=$l.comparePosition(d,c)}function nv(d,c){return 0===$l.comparePosition(d,c)}function DD(d,c){return $l.lessPosition(d,
c)?d:c}function ED(d,c){return $l.lessPosition(d,c)?c:d}function OS(d,c){if(!d||!c)return d==c;var h=!0,f={},k;for(k in d)if(f[k]=!0,!c.hasOwnProperty(k)||d[k]!==c[k]){h=!1;break}if(h)for(var n in c)if(!(f[n]||d.hasOwnProperty(n)&&d[n]===c[n])){h=!1;break}return h}function kL(d,c,h,f,k){k=void 0===k?"":k;var n="string"!==typeof d,b="string"!==typeof h;if(n||b){var e=[];n?e.push(d,c):e.push(d+k,c);b?e.push(h,f):e.push(h+k,f);return e}return!c&&!f||c==f?[d+k+h,c]:c&&f?Lh.shallowEquals(c,f)?[d+k+h,c]:
[d+k,c,h,f]:[d+k,c,h,f]}function lL(d,c){c=void 0===c?"":c;if(2>=d.length)return d;var h=[],f=$jscomp.makeIterator(d),k=f.next().value,n=f.next().value;for(f=2;f<d.length;f+=2)n=Lh.concatAttributePair(k,n,d[f],d[f+1],c),2>=n.length?(k=n[0],n=n[1]):(h.push.apply(h,$jscomp.arrayFromIterable(n.slice(0,-2))),n=$jscomp.makeIterator(n.slice(-2)),k=n.next().value,n=n.next().value);h.push(k,n);return h}function mL(d,c){for(var h=0,f=0;f<d.length;f+=2){var k=d[f],n=h+("string"===typeof k?k.length:1);if(n<
c)h=n;else{if(h===c)return[d.slice(0,f),d.slice(f)];if(n===c)return[d.slice(0,f+2),d.slice(f+2)];if("string"!==typeof k)throw Error("Assuming text is a string for splitting it, got "+k+" instead!");var b=d[f+1],e=c-h;n=[].concat($jscomp.arrayFromIterable(d.slice(0,f)),[k.slice(0,e),b]);d=k.length===e?d.slice(f+2):[k.slice(c-h),b].concat($jscomp.arrayFromIterable(d.slice(f+2)));return[n,d]}}return[d,[]]}function nL(d,c){var h=d;d=0;for(var f=[],k=0;k<c.length;k++){var n=$jscomp.makeIterator(Lh.splitTextAndAttributesAt(h,
c[k]-d));h=n.next().value;n=n.next().value;f.push(h);for(var b=0;b<h.length;b+=2)d+="string"===typeof h[b]?h[b].length:1;h=n}f.push(h);return f}function oL(d,c,h){h=void 0===h?!1:h;if(!d.length||2===d.length&&""==d[0])return h?c:c.slice();if(!c.length||2===c.length&&""==c[0])return h?d:d.slice();d=h?d:d.slice();for(h=0;h<c.length;h+=2)d.push(c[h],c[h+1]);return d}function pL(d,c,h){var f=c.start;c=c.end;if(Lh.eqPosition(f,c))return null;Lh.lessPosition(c,f)&&(c=$jscomp.makeIterator([c,f]),f=c.next().value,
c=c.next().value);var k=f;f=k.row;var n=k.column;k=c;c=k.row;k=k.column;var b=d.getLine(f),e=b.textAndAttributes,m=0;n=$jscomp.makeIterator(Lh.splitTextAndAttributesAt(e,n));d=n.next().value;n=n.next().value;e.length=0;Lh.textAndAttributesDo(d,function(l,r){m+="string"===typeof l?l.length:1;e.push(l,r)});if(f===c){var a=$jscomp.makeIterator(Lh.splitTextAndAttributesAt(n,k-m));n=a.next().value;a=a.next().value}Lh.textAndAttributesDo(n,function(l,r){return e.push(l,h(b,r))});f===c&&Lh.textAndAttributesDo(a,
function(l,r){return e.push(l,r)});b._textAttributes=null;b.textAndAttributes=Lh.joinTextAttributes(e);if(f!==c){a={};for(f+=1;f<c;a={$jscomp$loop$prop$textAndAttributes$1202$2231:a.$jscomp$loop$prop$textAndAttributes$1202$2231},f++)b=b.nextLine(),a.$jscomp$loop$prop$textAndAttributes$1202$2231=b.textAndAttributes,d=a.$jscomp$loop$prop$textAndAttributes$1202$2231.slice(),a.$jscomp$loop$prop$textAndAttributes$1202$2231.length=0,Lh.textAndAttributesDo(d,function(l){return function(r,v){return l.$jscomp$loop$prop$textAndAttributes$1202$2231.push(r,
h(b,v))}}(a)),b._textAttributes=null,b.textAndAttributes=Lh.joinTextAttributes(a.$jscomp$loop$prop$textAndAttributes$1202$2231);b=b.nextLine();var g=b.textAndAttributes;f=$jscomp.makeIterator(Lh.splitTextAndAttributesAt(g,k));a=f.next().value;f=f.next().value;g.length=0;Lh.textAndAttributesDo(a,function(l,r){return g.push(l,h(b,r))});Lh.textAndAttributesDo(f,function(l,r){return g.push(l,r)});b._textAttributes=null;b.textAndAttributes=Lh.joinTextAttributes(g)}}function qL(d,c){var h=d.column;d=d.row;
var f=[],k=[];c=$jscomp.makeIterator(Lh.splitTextAndAttributesIntoLines(c));for(var n=c.next();!n.done;n=c.next()){n=n.value;for(var b=0;b<n.length;b+=2){var e=n[b];e=h+("string"==typeof e?e.length:1);f.push({start:{row:d,column:h},end:{row:d,column:e}});k.push(n[b],n[b+1]);h=e}h=0;d++}return{ranges:f,textAndAttributes:k}}function xG(d,c){c=void 0===c?"\n":c;if(!d.length)return[];for(var h=[],f=[],k=0;k<d.length;k+=2){var n=d[k],b=d[k+1];if("string"!==typeof n)f.push(n,b);else for(;n.length;){var e=
n.indexOf(c);if(-1===e){f.push(n,b);break}0<e&&f.push(n.slice(0,e),b);h.push(f);n=n.slice(e+1);f=[]}}f.length?h.push(f):(f=$jscomp.makeIterator(d.slice(-2)),d=f.next().value,f=f.next().value,"string"===typeof d&&d.endsWith(c)&&h.push(["",f]));return h}function rL(d,c){c=void 0===c?d.textAndAttributesInRange(d.selection.range):c;var h=new d.constructor(Object.assign({},d.defaultTextStyle,{width:d.width,textAndAttributes:c}));c=h.textRenderer.directRenderTextLayerFn(h);d=h.textRenderer.directRenderLineFn(h);
c=c();var f=System.global&&System.global.getComputedStyle?System.global.getComputedStyle(c):null;f&&(c.ownerDocument.body.appendChild(c),c.style.whiteSpace=f.whiteSpace,c.style.overflowWrap=f.overflowWrap,c.style.wordBreak=f.wordBreak,c.style.minWidth=f.minWidth,c.parentNode.removeChild(c));h=$jscomp.makeIterator(h.document.lines);for(f=h.next();!f.done;f=h.next())c.appendChild(d(f.value));return c.outerHTML}function sL(d){if(d&&d.isListItem&&"string"===typeof d.string)return d;if(!d||!d.isListItem)return{isListItem:!0,
string:String(d),value:d};var c=d.string||d.label||"no item.string";d.string=c&&"string"!==typeof c?Array.isArray(c)?c.map(function(h,f){return 0==f%2?String(h):""}).join(""):String(c):String(c);return d}function tL(d){var c=d.filePath,h=d.worldName,f=d.commit,k=d.loadingIndicator,n=d.progress,b=void 0===d.logError?function(N){return console.log(N)}:d.logError,e,m,a,g,l,r,v,y,A,E,F,H,I,M;return $jscomp.asyncExecutePromiseGeneratorProgram(function(N){switch(N.nextAddress){case 1:return N.setCatchFinallyBlocks(2),
e=JSON.parse(localStorage.getItem("lively.load-config")||'{"lively.lang":"dynamic","lively.ast":"dynamic","lively.source-transform":"dynamic","lively.classes":"dynamic","lively.vm":"dynamic","lively.modules":"dynamic","lively.user":"dynamic","lively.storage":"dynamic","lively.morphic":"dynamic"}'),n.opacity=0,n.hasFixedPosition=!0,n.openInWorld(),n.bottomCenter=k.topCenter,N.yield(Se.polyfills(),4);case 4:return m=$world.env,Se.doBootstrap?N.yield(Se.bootstrapLivelySystem(k,n,e),8):N.yield(Se.fastPrepLivelySystem(k),
7);case 7:N.jumpTo(6);break;case 8:case 6:return k.label="Loading lively.2lively...",N.yield(lively.modules.registerPackage("lively.2lively"),9);case 9:Se.askBeforeQuit&&window.addEventListener("beforeunload",function(W){return W.returnValue="Really?"},!0);if("dynamic"!=e["lively.morphic"]||Se.fastLoad){a=lively.morphic;N.jumpTo(10);break}k.label="Loading lively.morphic...";return N.yield(lively.modules.importPackage("lively.morphic"),11);case 11:a=N.yieldResult,n.finishPackage({packageName:"lively.morphic",
loaded:!0});case 10:k.label="Loading world...";window.onresize=null;window.loadCompiledFrozenPart=lively.modules.module("lively.morphic/partsbin.js")._recorder.loadPart;lively.FreezerRuntime=!1;g=document.location;N.setCatchFinallyBlocks(12);l={verbose:!0,localconfig:!0,l2l:!0,shell:!0};if(f)return N.yield(a.World.loadFromCommit(f,void 0,Object.assign({},l,{browserURL:"/worlds/load?name="+f.name})),15);if(h)return"__newWorld__"==h?Object.values(e).every(function(W){return"frozen"==W})||Se.fastLoad?
N.yield(lively.modules.module("lively.ide/world.js").recorder,27):N.yield(lively.modules.System.import("lively.ide/world.js"),25):N.yield(a.World.loadFromDB(h,void 0,void 0,Object.assign({},l,{browserURL:"/worlds/load?name="+h.replace(/\.json($|\?)/,"")})),15);if(!c){N.jumpTo(15);break}return N.yield(a.World.loadFromResource(Se.resource(System.baseURL).join(c),void 0,Object.assign({},l,{browserURL:"/worlds/load?file="+c})),15);case 25:return y=N.yieldResult,r=y.LivelyWorld,N.yield(lively.modules.System.import("lively.morphic/world-loading.js"),
26);case 26:A=N.yieldResult;v=A.loadWorld;N.jumpTo(24);break;case 27:return E=N.yieldResult,r=E.LivelyWorld,N.yield(lively.modules.module("lively.morphic/world-loading.js").recorder,28);case 28:F=N.yieldResult,v=F.loadWorld;case 24:return N.yield(v(new r({openNewProjectPrompt:!0})),15);case 15:N.leaveTryBlock(13,2);break;case 12:H=N.enterCatchBlock(2),window.__loadError__=H;case 13:return window.addEventListener("popstate",function(W){document.location==g&&document.location.reload()}),k.remove(),
Se.worldLoaded=!0,lively.modules.removeHook("fetch","logFetch"),N.yield(m.renderer.worldMorph.whenRendered(),31);case 31:"dynamic"!=e["lively.morphic"]||Se.fastLoad||(m.renderer.clear(),m.fontMetric.uninstall(),m.eventDispatcher.uninstall());N.leaveTryBlock(0);break;case 2:throw I=N.enterCatchBlock(),I.originalErr&&(I=I.originalErr),M=I.message,I.stack!==I.message&&(M+=I.stack.includes(I.message)?I.stack.replace(I.message,"\n"):I.stack),b(M),I;}})}Da({$:zh,B:Ap,D:Uh,E:Dx,G:Qd,H:vb,J:bd,K:Wd,M:Ab,
N:oc,O:rp,P:Ah,Q:Q,R:oq,S:vm,T:Wb,V:lt,W:KJ,X:ic,Y:Ou,_:wF,a:uF,a2:zm,a3:xi,aE:Uu,aS:Cp,aT:Wr,aX:zo,aY:jt,ac:wG,ad:fL,ae:BD,an:sa,aq:rl,ar:Wl,as:dc,au:$q,b:rC,bC:Pk,bG:Sr,bH:Rn,bM:Vr,bP:rq,bS:mw,bT:Tk,bX:function(d){d=void 0===d?document.body:d;var c;return $jscomp.asyncExecutePromiseGeneratorProgram(function(h){qs.default().world||(c=window.$world=window.$$world=new sy({name:R4.name,extent:xi(window.innerWidth,window.innerHeight)}),qs.default().setWorldRenderedOn(c,d,window.prerenderNode));window.$world.dontRecordChangesWhile(function(){var f=
Bo(R4,{reinitializeIds:function(k){return k}});if(f.isWorld)f.position=xi(0,0),qs.default().setWorldRenderedOn(f,d,window.prerenderNode),"elastic"===f.resizePolicy&&f.execCommand("resize to fit window");else try{d!=document.body?(new window.ResizeObserver(function(k){return f.execCommand("resize on client",k[0])})).observe(d):window.onresize=lively.FreezerRuntime.resizeHandler=function(){return f.execCommand("resize on client")},f.openInWorld(xi(0,0)),f.execCommand("resize on client",d)}catch(k){f.position=
xi(0,0)}});h.jumpToEnd()})},bp:ym,br:Km,bu:Tr,by:q,c:kt,d:lm,e:lq,g:Dm,h:aA,i:ha,j:Nh,k:Ku,l:tF,m:Gg,n:uj,o:hc,p:ak,q:gc,r:la,t:Sl,u:cb,v:hn,w:jd,x:Tm,y:Or,z:Ju});var FD=lively.FreezerRuntime.recorderFor("lively.lang/closure.js");FD.evalJS=Gj;FD.parameterRegex=/function[^\(]*\(([^\)]*)\)|\(?([^\)=]*)\)?\s*=>/;var Rj=function(d,c,h,f){this.originalFunc=d;this.varMapping=c||{};this.setFuncSource(h||d);this.setFuncProperties(d||f)};Rj.fromFunction=function(d,c){return new this(d,c||{})};Rj.fromSource=
function(d,c){return new this(null,c||{},d)};Rj.prototype.setFuncSource=function(d){return this.source=d="undefined"!==typeof lively&&lively.sourceTransform&&"function"===typeof lively.sourceTransform.stringifyFunctionWithoutToplevelRecorder?lively.sourceTransform.stringifyFunctionWithoutToplevelRecorder(d):String(d)};Rj.prototype.getFuncSource=function(){return this.source||this.setFuncSource(this.originalFunc)};Rj.prototype.hasFuncSource=function(){return this.source&&!0};Rj.prototype.getFunc=function(){return this.originalFunc||
this.recreateFunc()};Rj.prototype.getFuncProperties=function(){return this.funcProperties||(this.funcProperties={})};Rj.prototype.setFuncProperties=function(d){var c=this.getFuncProperties(),h;for(h in d)d.hasOwnProperty(h)&&(c[h]=d[h])};Rj.prototype.lookup=function(d){return this.varMapping[d]};Rj.prototype.parameterNames=function(d){return"undefined"!==typeof lively&&lively.ast&&lively.ast.parseFunction?(lively.ast.parseFunction(d).params||[]).map(function(c){return"Identifier"===c.type?c.name:
c.left&&"Identifier"===c.left.type?c.left.name:null}).filter(Boolean):(d=FD.parameterRegex.exec(d))?(d[1]||d[2]||"").split(",").map(function(c){return c.trim()}):[]};Rj.prototype.firstParameter=function(d){return this.parameterNames(d)[0]||null};Rj.prototype.recreateFunc=function(){return this.recreateFuncFromSource(this.getFuncSource(),this.originalFunc)};Rj.prototype.recreateFuncFromSource=function(d,c){c=[];var h="$super"===this.firstParameter(d);for(f in this.varMapping)this.varMapping.hasOwnProperty(f)&&
"this"!=f&&c.push("var "+f+" = this.varMapping."+f+";\n");var f="";0<c.length&&(f+=c.join("\n"));h&&(f+="(function superWrapperForClosure() { return ");f+="("+d+")";h&&(f+=".apply(this, [$super.bind(this)].concat(Array.from(arguments))) })");try{var k=FD.evalJS.call(this,f)||this.couldNotCreateFunc(f);this.addFuncProperties(k);return this.originalFunc=k}catch(n){throw d="Cannot create function "+n+" src: "+f,console.error(d),Error(d);}};Rj.prototype.addFuncProperties=function(d){var c=this.getFuncProperties(),
h;for(h in c)c.hasOwnProperty(h)&&(d[h]=c[h]);this.addClosureInformation(d)};Rj.prototype.couldNotCreateFunc=function(d){var c="Could not recreate closure from source: \n"+d;console.error(c);return function(){throw Error(c);}};Rj.prototype.asFunction=function(){return this.recreateFunc()};Rj.prototype.addClosureInformation=function(d){d.hasLivelyClosure=!0;d.livelyClosure=this;return d};$jscomp.global.Object.defineProperties(Rj.prototype,{isLivelyClosure:{configurable:!0,enumerable:!0,get:function(){return!0}},
doNotSerialize:{configurable:!0,enumerable:!0,get:function(){return["originalFunc"]}}});Da("bw",Rj);FD.Closure=Rj;FD.default=Rj;var LA=lively.FreezerRuntime.recorderFor("lively.lang/Group.js");LA.groupBy=vb;var Qn=function(){};Qn.fromArray=function(d,c,h){for(var f=new LA.Group,k=0,n=d.length;k<n;k++){var b=c.call(h,d[k],k);f[b]||(f[b]=[]);f[b].push(d[k])}return f};Qn.prototype.toArray=function(){return this.reduceGroups(function(d,c,h){return d.concat([h])},[])};Qn.prototype.forEach=function(d,c){var h=
this;Object.keys(h).forEach(function(f){h[f].forEach(d.bind(c,f))});return h};Qn.prototype.forEachGroup=function(d,c){var h=this;Object.keys(h).forEach(function(f){d.call(c,f,h[f])});return h};Qn.prototype.map=function(d,c){var h=new LA.Group;this.forEachGroup(function(f,k){h[f]=k.map(d.bind(c,f))});return h};Qn.prototype.mapGroups=function(d,c){var h=new LA.Group;this.forEachGroup(function(f,k){h[f]=d.call(c,f,k)});return h};Qn.prototype.keys=function(){return Object.keys(this)};Qn.prototype.reduceGroups=
function(d,c,h){this.forEachGroup(function(f,k){c=d.call(h,c,f,k)});return c};Qn.prototype.count=function(){return this.reduceGroups(function(d,c,h){d[c]=h.length;return d},{})};$jscomp.global.Object.defineProperties(Qn,{by:{configurable:!0,enumerable:!0,get:function(){return LA.groupBy}}});LA.Group=Qn;LA.default=Qn;var Rb=lively.FreezerRuntime.recorderFor("lively.lang/array.js");Rb.range=hc;Rb.withN=ac;Rb.genN=be;Rb.filter=bd;Rb.findAndGet=Sd;Rb.filterByKey=ed;Rb.grep=Mc;Rb.mask=pd;Rb.reject=Dd;
Rb.rejectByKey=ke;Rb.without=Kd;Rb.withoutAll=jd;Rb.uniq=cb;Rb.uniqBy=Ab;Rb.uniqByKey=Yb;Rb.compact=gc;Rb.mutableCompact=dd;Rb.forEach=Zd;Rb.zip=Wb;Rb.flatten=oc;Rb.flatmap=Lb;Rb.interpose=Bc;Rb.delimWith=Sc;Rb.map=Yc;Rb.invoke=Xb;Rb.pluck=qb;Rb.reduce=uc;Rb.reduceRight=Hc;Rb.some=Ia;Rb.every=Va;Rb.equals=tb;Rb.deepEquals=Jb;Rb.isSorted=Ib;Rb.sort=ib;Rb.sortBy=jb;Rb.sortByKey=Fb;Rb.reverse=rc;Rb.reversed=Ic;Rb.reMatches=ec;Rb.first=Pc;Rb.last=Q;Rb.intersect=ha;Rb.union=Ha;Rb.pushAt=Pa;Rb.removeAt=
bc;Rb.remove=ic;Rb.pushAll=Ra;Rb.pushAllAt=tc;Rb.pushIfNotIncluded=Qd;Rb.replaceAt=md;Rb.clear=$c;Rb.isSubset=Wa;Rb.doAndContinue=fd;Rb.nestedDelay=lb;Rb.forEachShowingProgress=Hd;Rb.swap=db;Rb.rotate=rb;Rb.groupBy=vb;Rb.groupByKey=vd;Rb.partition=me;Rb.batchify=ye;Rb.toTuples=Pe;Rb.combinationsPick=Tc;Rb.combinations=re;Rb.take=Ed;Rb.drop=Nb;Rb.takeWhile=wa;Rb.dropWhile=Ba;Rb.shuffle=Mb;Rb.max=P;Rb.min=ya;Rb.sum=Ua;Rb.count=Eb;Rb.size=Cc;Rb.histogram=cd;Rb.clone=ee;Rb.toArray=Vd;Rb.each=Ze;Rb.all=
Wd;Rb.any=Be;Rb.collect=Qe;Rb.findAll=rf;Rb.inject=cg;Rb.mapAsyncSeries=Ef;Rb.mapAsync=Oc;Rb.objectEquals=wg;Rb.delay=ud;Rb.once=Tk;Rb.NullFunction=sg;Rb.Group=Qn;Rb.GLOBAL="undefined"!==typeof System?System.global:"undefined"!==typeof window?window:global;Rb.features={from:!!Array.from,filter:!!Array.prototype.filter,find:!!Array.prototype.find,findIndex:!!Array.prototype.findIndex,includes:!!Array.prototype.includes};Rb.from=Rb.features.from?Array.from:function(d){if(!d)return[];if(Array.isArray(d))return d;
if(d.toArray)return d.toArray();for(var c=d.length,h=Array(c);c--;)h[c]=d[c];return h};Rb.detect=Rb.features.find?function(d,c,h){return d.find(c,h)}:function(d,c,h){for(var f,k=0,n=d.length;k<n;k++)if(f=d[k],c.call(h,f,k))return f};Rb.findIndex=Rb.features.findIndex?function(d,c,h){return d.findIndex(c,h)}:function(d,c,h){var f=-1;return d.find(function(k,n){f=n;return c.call(k,h)})?f:-1};Rb.isArray=Array.isArray;Rb.includes=Rb.features.includes?function(d,c){return d.includes(c)}:function(d,c){return-1!==
d.indexOf(c)};Rb.include=Rb.includes;Rb.permutations=function(){function d(c,h){return c.length?Rb.flatmap(c,function(f,k){return d(c.slice(0,k).concat(c.slice(k+1)),h.concat([f]))}):[h]}return function(c){return d(c,[])}}();Rb.features.from||(Array.from=Rb.from);Rb.features.filter||(Array.prototype.filter=function(d,c){return Rb.filter(this,d,c)});Rb.features.find||(Array.prototype.find=function(d,c){return Rb.detect(this,d,c)});Rb.features.findIndex||(Array.prototype.findIndex=function(d,c){return Rb.findIndex(this,
d,c)});Rb.features.includes||(Array.prototype.includes=function(d){return Rb.includes(this,d)});var PS=Rb.from,QS=Rb.detect,RS=Rb.findIndex,SS=Da("f",Rb.isArray),TS=Rb.includes,US=Rb.include,VS=Rb.permutations;Rb.range=hc;Rb.range=hc;Rb.from=PS;Rb.from=PS;Rb.withN=ac;Rb.withN=ac;Rb.genN=be;Rb.genN=be;Rb.filter=bd;Rb.filter=bd;Rb.detect=QS;Rb.detect=QS;Rb.findIndex=RS;Rb.findIndex=RS;Rb.findAndGet=Sd;Rb.findAndGet=Sd;Rb.filterByKey=ed;Rb.filterByKey=ed;Rb.grep=Mc;Rb.grep=Mc;Rb.mask=pd;Rb.mask=pd;Rb.reject=
Dd;Rb.reject=Dd;Rb.rejectByKey=ke;Rb.rejectByKey=ke;Rb.without=Kd;Rb.without=Kd;Rb.withoutAll=jd;Rb.withoutAll=jd;Rb.uniq=cb;Rb.uniq=cb;Rb.uniqBy=Ab;Rb.uniqBy=Ab;Rb.uniqByKey=Yb;Rb.uniqByKey=Yb;Rb.compact=gc;Rb.compact=gc;Rb.mutableCompact=dd;Rb.mutableCompact=dd;Rb.forEach=Zd;Rb.forEach=Zd;Rb.zip=Wb;Rb.zip=Wb;Rb.flatten=oc;Rb.flatten=oc;Rb.flatmap=Lb;Rb.flatmap=Lb;Rb.interpose=Bc;Rb.interpose=Bc;Rb.delimWith=Sc;Rb.delimWith=Sc;Rb.map=Yc;Rb.map=Yc;Rb.invoke=Xb;Rb.invoke=Xb;Rb.pluck=qb;Rb.pluck=qb;
Rb.reduce=uc;Rb.reduce=uc;Rb.reduceRight=Hc;Rb.reduceRight=Hc;Rb.isArray=SS;Rb.isArray=SS;Rb.includes=TS;Rb.includes=TS;Rb.include=US;Rb.include=US;Rb.some=Ia;Rb.some=Ia;Rb.every=Va;Rb.every=Va;Rb.equals=tb;Rb.equals=tb;Rb.deepEquals=Jb;Rb.deepEquals=Jb;Rb.isSorted=Ib;Rb.isSorted=Ib;Rb.sort=ib;Rb.sort=ib;Rb.sortBy=jb;Rb.sortBy=jb;Rb.sortByKey=Fb;Rb.sortByKey=Fb;Rb.reverse=rc;Rb.reverse=rc;Rb.reversed=Ic;Rb.reversed=Ic;Rb.reMatches=ec;Rb.reMatches=ec;Rb.first=Pc;Rb.first=Pc;Rb.last=Q;Rb.last=Q;Rb.intersect=
ha;Rb.intersect=ha;Rb.union=Ha;Rb.union=Ha;Rb.pushAt=Pa;Rb.pushAt=Pa;Rb.removeAt=bc;Rb.removeAt=bc;Rb.remove=ic;Rb.remove=ic;Rb.pushAll=Ra;Rb.pushAll=Ra;Rb.pushAllAt=tc;Rb.pushAllAt=tc;Rb.pushIfNotIncluded=Qd;Rb.pushIfNotIncluded=Qd;Rb.replaceAt=md;Rb.replaceAt=md;Rb.clear=$c;Rb.clear=$c;Rb.isSubset=Wa;Rb.isSubset=Wa;Rb.doAndContinue=fd;Rb.doAndContinue=fd;Rb.nestedDelay=lb;Rb.nestedDelay=lb;Rb.forEachShowingProgress=Hd;Rb.forEachShowingProgress=Hd;Rb.swap=db;Rb.swap=db;Rb.rotate=rb;Rb.rotate=rb;
Rb.groupBy=vb;Rb.groupBy=vb;Rb.groupByKey=vd;Rb.groupByKey=vd;Rb.partition=me;Rb.partition=me;Rb.batchify=ye;Rb.batchify=ye;Rb.toTuples=Pe;Rb.toTuples=Pe;Rb.permutations=VS;Rb.permutations=VS;Rb.combinationsPick=Tc;Rb.combinationsPick=Tc;Rb.combinations=re;Rb.combinations=re;Rb.take=Ed;Rb.take=Ed;Rb.drop=Nb;Rb.drop=Nb;Rb.takeWhile=wa;Rb.takeWhile=wa;Rb.dropWhile=Ba;Rb.dropWhile=Ba;Rb.shuffle=Mb;Rb.shuffle=Mb;Rb.max=P;Rb.max=P;Rb.min=ya;Rb.min=ya;Rb.sum=Ua;Rb.sum=Ua;Rb.count=Eb;Rb.count=Eb;Rb.size=
Cc;Rb.size=Cc;Rb.histogram=cd;Rb.histogram=cd;Rb.clone=ee;Rb.clone=ee;Rb.toArray=Vd;Rb.toArray=Vd;Rb.each=Ze;Rb.each=Ze;Rb.all=Wd;Rb.all=Wd;Rb.any=Be;Rb.any=Be;Rb.collect=Qe;Rb.collect=Qe;Rb.findAll=rf;Rb.findAll=rf;Rb.inject=cg;Rb.inject=cg;Rb.mapAsyncSeries=Ef;Rb.mapAsyncSeries=Ef;Rb.mapAsync=Oc;Rb.mapAsync=Oc;var $f=Object.freeze({__proto__:null,range:hc,from:PS,withN:ac,genN:be,filter:bd,detect:QS,findIndex:RS,findAndGet:Sd,filterByKey:ed,grep:Mc,mask:pd,reject:Dd,rejectByKey:ke,without:Kd,withoutAll:jd,
uniq:cb,uniqBy:Ab,uniqByKey:Yb,compact:gc,mutableCompact:dd,forEach:Zd,zip:Wb,flatten:oc,flatmap:Lb,interpose:Bc,delimWith:Sc,map:Yc,invoke:Xb,pluck:qb,reduce:uc,reduceRight:Hc,isArray:SS,includes:TS,include:US,some:Ia,every:Va,equals:tb,deepEquals:Jb,isSorted:Ib,sort:ib,sortBy:jb,sortByKey:Fb,reverse:rc,reversed:Ic,reMatches:ec,first:Pc,last:Q,intersect:ha,union:Ha,pushAt:Pa,removeAt:bc,remove:ic,pushAll:Ra,pushAllAt:tc,pushIfNotIncluded:Qd,replaceAt:md,clear:$c,isSubset:Wa,doAndContinue:fd,nestedDelay:lb,
forEachShowingProgress:Hd,swap:db,rotate:rb,groupBy:vb,groupByKey:vd,partition:me,batchify:ye,toTuples:Pe,permutations:VS,combinationsPick:Tc,combinations:re,take:Ed,drop:Nb,takeWhile:wa,dropWhile:Ba,shuffle:Mb,max:P,min:ya,sum:Ua,count:Eb,size:Cc,histogram:cd,clone:ee,toArray:Vd,each:Ze,all:Wd,any:Be,collect:Qe,findAll:rf,inject:cg,mapAsyncSeries:Ef,mapAsync:Oc});Da("a6",$f);var zd=lively.FreezerRuntime.recorderFor("lively.lang/function.js");zd.Empty=Af;zd.K=qg;zd.Null=sg;zd.False=ff;zd.True=Ja;
zd.notYetImplemented=ab;zd.all=Cb;zd.own=ba;zd.argumentNames=Ka;zd.qualifiedMethodName=nb;zd.extractBody=xb;zd.timeToRun=Dc;zd.timeToRunN=Fc;zd.delay=ud;zd.throttle=td;zd.debounce=rd;zd.throttleNamed=zf;zd.debounceNamed=Ye;zd.createQueue=Zf;zd.workerWithCallbackQueue=vh;zd._composeAsyncDefaultEndCallback=function(d,c){d&&console.error("lively.lang.composeAsync error",d)};zd.composeAsync=Hi;zd.compose=Nh;zd.flip=pj;zd.withNull=Gh;zd.waitFor=xk;zd.waitForAll=Ng;zd.curry=fk;zd.wrap=Sh;zd.getOriginal=
Oj;zd.wrapperChain=Zj;zd.replaceMethodForOneCall=Ql;zd.once=Tk;zd.either=ok;zd.eitherNamed=Rl;zd.evalJS=Gj;zd.fromString=dk;zd.asScript=Ln;zd.asScriptOf=Of;zd.addToObject=Vk;zd.binds=Tb;zd.setLocalVarValue=qd;zd.getVarMapping=te;zd.setProperty=lc;zd.functionNames=zg;zd.localFunctionNames=Vg;zd.logErrors=qj;zd.logCompletion=Jn;zd.logCalls=qo;zd.traceCalls=Mo;zd.webkitStack=Hn;zd.objectMerge=wm;zd.safeToString=Fh;zd.Closure=Rj;zd.arr=$f;zd._throttledByName={};zd._debouncedByName={};zd._queues={};zd._queueUntilCallbacks=
{};zd._eitherNameRegistry={};zd.Empty=Af;zd.Empty=Af;zd.K=qg;zd.K=qg;zd.Null=sg;zd.Null=sg;zd.False=ff;zd.False=ff;zd.True=Ja;zd.True=Ja;zd.notYetImplemented=ab;zd.notYetImplemented=ab;zd.withNull=Gh;zd.withNull=Gh;zd.all=Cb;zd.all=Cb;zd.own=ba;zd.own=ba;zd.argumentNames=Ka;zd.argumentNames=Ka;zd.qualifiedMethodName=nb;zd.qualifiedMethodName=nb;zd.extractBody=xb;zd.extractBody=xb;zd.timeToRun=Dc;zd.timeToRun=Dc;zd.timeToRunN=Fc;zd.timeToRunN=Fc;zd.delay=ud;zd.delay=ud;zd.throttle=td;zd.throttle=td;
zd.debounce=rd;zd.debounce=rd;zd.throttleNamed=zf;zd.throttleNamed=zf;zd.debounceNamed=Ye;zd.debounceNamed=Ye;zd.createQueue=Zf;zd.createQueue=Zf;zd.workerWithCallbackQueue=vh;zd.workerWithCallbackQueue=vh;zd.composeAsync=Hi;zd.composeAsync=Hi;zd.compose=Nh;zd.compose=Nh;zd.waitFor=xk;zd.waitFor=xk;zd.waitForAll=Ng;zd.waitForAll=Ng;zd.flip=pj;zd.flip=pj;zd.curry=fk;zd.curry=fk;zd.wrap=Sh;zd.wrap=Sh;zd.binds=Tb;zd.binds=Tb;zd.getOriginal=Oj;zd.getOriginal=Oj;zd.wrapperChain=Zj;zd.wrapperChain=Zj;zd.replaceMethodForOneCall=
Ql;zd.replaceMethodForOneCall=Ql;zd.once=Tk;zd.once=Tk;zd.either=ok;zd.either=ok;zd.eitherNamed=Rl;zd.eitherNamed=Rl;zd.evalJS=Gj;zd.evalJS=Gj;zd.fromString=dk;zd.fromString=dk;zd.asScript=Ln;zd.asScript=Ln;zd.asScriptOf=Of;zd.asScriptOf=Of;zd.addToObject=Vk;zd.addToObject=Vk;zd.setLocalVarValue=qd;zd.setLocalVarValue=qd;zd.getVarMapping=te;zd.getVarMapping=te;zd.setProperty=lc;zd.setProperty=lc;zd.functionNames=zg;zd.functionNames=zg;zd.localFunctionNames=Vg;zd.localFunctionNames=Vg;zd.logErrors=
qj;zd.logErrors=qj;zd.logCompletion=Jn;zd.logCompletion=Jn;zd.logCalls=qo;zd.logCalls=qo;zd.traceCalls=Mo;zd.traceCalls=Mo;zd.webkitStack=Hn;zd.webkitStack=Hn;var Pn=Object.freeze({__proto__:null,Empty:Af,K:qg,Null:sg,False:ff,True:Ja,notYetImplemented:ab,withNull:Gh,all:Cb,own:ba,argumentNames:Ka,qualifiedMethodName:nb,extractBody:xb,timeToRun:Dc,timeToRunN:Fc,delay:ud,throttle:td,debounce:rd,throttleNamed:zf,debounceNamed:Ye,createQueue:Zf,workerWithCallbackQueue:vh,composeAsync:Hi,compose:Nh,waitFor:xk,
waitForAll:Ng,flip:pj,curry:fk,wrap:Sh,binds:Tb,getOriginal:Oj,wrapperChain:Zj,replaceMethodForOneCall:Ql,once:Tk,either:ok,eitherNamed:Rl,evalJS:Gj,fromString:dk,asScript:Ln,asScriptOf:Of,addToObject:Vk,setLocalVarValue:qd,getVarMapping:te,setProperty:lc,functionNames:zg,localFunctionNames:Vg,logErrors:qj,logCompletion:Jn,logCalls:qo,traceCalls:Mo,webkitStack:Hn});Da("at",Pn);var ue=lively.FreezerRuntime.recorderFor("lively.lang/object.js");ue.print=en;ue.indent=function(d,c,h){if(!h||0>=h)return d;
for(;0<h;)h--,d=c+d;return d};ue.isArray=Uk;ue.isElement=Fj;ue.isFunction=ro;ue.isBoolean=gn;ue.isString=vm;ue.isNumber=No;ue.isUndefined=fn;ue.isRegExp=em;ue.isObject=Lk;ue.isPrimitive=Lm;ue.isEmpty=ol;ue.equals=wg;ue.values=hn;ue.select=In;ue.dissoc=Sl;ue.addScript=ig;ue.extend=Mm;ue.clone=nl;ue.extract=ek;ue.inspect=Gi;ue.merge=wm;ue.deepMerge=Mk;ue.sortKeysWithBeforeAndAfterConstraints=$e;ue.inherit=fm;ue.valuesInPropertyHierarchy=Oo;ue.mergePropertyInHierarchy=Kn;ue.deepCopy=Tl;ue.typeStringOf=
mp;ue.shortPrintStringOf=so;ue.isMutableType=np;ue.safeToString=Fh;ue.asObject=op;ue.newKeyIn=jn;ue.functionFromString=dk;ue.asScriptOf=Of;ue.argumentNames=Ka;ue.arrayDeepEquals=Jb;ue.isSubset=Wa;ue.flatten=oc;ue.getOwnPropertyDescriptors="function"===typeof Object.getOwnPropertyDescriptors?Object.getOwnPropertyDescriptors:function(d){var c={},h;for(h in d)Object.prototype.hasOwnProperty.call(d,h)&&Object.defineProperty(c,h,{configurable:!0,enumerable:!0,writable:!0,value:Object.getOwnPropertyDescriptor(d,
h)});return c};ue.keys=Object.keys;var WS=ue.keys,XS=ue.getOwnPropertyDescriptors;ue.isArray=Uk;ue.isArray=Uk;ue.isElement=Fj;ue.isElement=Fj;ue.isFunction=ro;ue.isFunction=ro;ue.isBoolean=gn;ue.isBoolean=gn;ue.isString=vm;ue.isString=vm;ue.isNumber=No;ue.isNumber=No;ue.isUndefined=fn;ue.isUndefined=fn;ue.isRegExp=em;ue.isRegExp=em;ue.isObject=Lk;ue.isObject=Lk;ue.isPrimitive=Lm;ue.isPrimitive=Lm;ue.isEmpty=ol;ue.isEmpty=ol;ue.equals=wg;ue.equals=wg;ue.keys=WS;ue.keys=WS;ue.values=hn;ue.values=hn;
ue.select=In;ue.select=In;ue.dissoc=Sl;ue.dissoc=Sl;ue.addScript=ig;ue.addScript=ig;ue.extend=Mm;ue.extend=Mm;ue.clone=nl;ue.clone=nl;ue.extract=ek;ue.extract=ek;ue.inspect=Gi;ue.inspect=Gi;ue.merge=wm;ue.merge=wm;ue.deepMerge=Mk;ue.deepMerge=Mk;ue.inherit=fm;ue.inherit=fm;ue.valuesInPropertyHierarchy=Oo;ue.valuesInPropertyHierarchy=Oo;ue.mergePropertyInHierarchy=Kn;ue.mergePropertyInHierarchy=Kn;ue.sortKeysWithBeforeAndAfterConstraints=$e;ue.sortKeysWithBeforeAndAfterConstraints=$e;ue.deepCopy=Tl;
ue.deepCopy=Tl;ue.typeStringOf=mp;ue.typeStringOf=mp;ue.shortPrintStringOf=so;ue.shortPrintStringOf=so;ue.isMutableType=np;ue.isMutableType=np;ue.safeToString=Fh;ue.safeToString=Fh;ue.asObject=op;ue.asObject=op;ue.newKeyIn=jn;ue.newKeyIn=jn;ue.getOwnPropertyDescriptors=XS;ue.getOwnPropertyDescriptors=XS;var Ag=Object.freeze({__proto__:null,isArray:Uk,isElement:Fj,isFunction:ro,isBoolean:gn,isString:vm,isNumber:No,isUndefined:fn,isRegExp:em,isObject:Lk,isPrimitive:Lm,isEmpty:ol,equals:wg,keys:WS,values:hn,
select:In,dissoc:Sl,addScript:ig,extend:Mm,clone:nl,extract:ek,inspect:Gi,merge:wm,deepMerge:Mk,inherit:fm,valuesInPropertyHierarchy:Oo,mergePropertyInHierarchy:Kn,sortKeysWithBeforeAndAfterConstraints:$e,deepCopy:Tl,typeStringOf:mp,shortPrintStringOf:so,isMutableType:np,safeToString:Fh,asObject:op,newKeyIn:jn,getOwnPropertyDescriptors:XS});Da("a7",Ag);var Wc=lively.FreezerRuntime.recorderFor("lively.lang/string.js");Wc.format=xm;Wc.formatFromArray=um;Wc.indent=cl;Wc.minIndent=yl;Wc.changeIndent=
zl;Wc.quote=kn;Wc.print=ra;Wc.printNested=La;Wc.pad=ob;Wc.printTable=Oa;Wc.printTree=mc;Wc.toArray=fc;Wc.lines=zc;Wc.paragraphs=Kc;Wc.nonEmptyLines=Nd;Wc.tokens=Df;Wc.tableize=Nf;Wc.unescapeCharacterEntities=ld;Wc.toQueryParams=vg;Wc.base64EncodeUnicode=rg;Wc.base64DecodeUnicode=Pj;Wc.normalizePath=bl;Wc.joinPath=lp;Wc.newUUID=Km;Wc.createDataURI=Er;Wc.hashCode=Ms;Wc.md5=Jq;Wc.reMatches=pp;Wc.stringMatch=Kq;Wc.peekRight=Al;Wc.peekLeft=Fr;Wc.lineIndexComputer=gm;Wc.lineNumberToIndexesComputer=sf;Wc.lineRanges=
Gr;Wc.findLineWithIndexInLineRanges=Bl;Wc.regexIndexOf=Cl;Wc.regexLastIndexOf=Lq;Wc.diff=Xp;Wc.empty=Yp;Wc.startsWithVowel=dl;Wc.withDecimalPrecision=qp;Wc.capitalize=Mq;Wc.camelCaseString=Nq;Wc.camelize=rp;Wc.truncate=Zp;Wc.truncateLeft=ne;Wc.regExpEscape=Dl;Wc.succ=Ns;Wc.digitValue=Nk;Wc.longestCommonSubstring=Oq;Wc.applyChange=Os;Wc.applyChanges=Ps;Wc.levenshtein=to;Wc.inspectObject=Gi;Wc.min=ya;Wc.last=Q;Wc.features={repeat:!!String.prototype.repeat,includes:!!String.prototype.includes,startsWith:!!String.prototype.startsWith,
endsWith:!!String.prototype.endsWith};Wc.pathDotRe=/\/\.\//g;Wc.pathDoubleDotRe=/\/[^\/]+\/\.\./;Wc.pathDoubleSlashRe=/(^|[^:])[\/]+/g;Wc.urlStartRe=/^[a-z0-9-_\.]+:\/\//;Wc.newUUIDTemplate="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx";Wc.newUUIDRe=/[xy]/g;Wc.newUUIDReplacer=function(d){var c=16*Math.random()|0;return("x"==d?c:c&3|8).toString(16)};Wc.includes=Wc.features.includes?function(d,c){return d.includes(c)}:function(d,c){return-1<d.indexOf(c)};Wc.include=Wc.includes;Wc.startsWith=Wc.features.startsWith?
function(d,c){return d.startsWith(c)}:function(d,c){return 0===d.indexOf(c)};Wc.endsWith=Wc.features.endsWith?function(d,c){return d.endsWith(c)}:function(d,c){var h=d.length-c.length;return 0<=h&&d.lastIndexOf(c)===h};Wc.times=Wc.features.repeat?function(d,c){return d.repeat(c)}:function(d,c){return 1>c?"":Array(c+1).join(d)};var YS=Wc.includes,ZS=Wc.include,$S=Wc.startsWith,aT=Wc.endsWith,bT=Wc.times;Wc.format=xm;Wc.format=xm;Wc.formatFromArray=um;Wc.formatFromArray=um;Wc.indent=cl;Wc.indent=cl;
Wc.minIndent=yl;Wc.minIndent=yl;Wc.changeIndent=zl;Wc.changeIndent=zl;Wc.quote=kn;Wc.quote=kn;Wc.print=ra;Wc.print=ra;Wc.printNested=La;Wc.printNested=La;Wc.pad=ob;Wc.pad=ob;Wc.printTable=Oa;Wc.printTable=Oa;Wc.printTree=mc;Wc.printTree=mc;Wc.toArray=fc;Wc.toArray=fc;Wc.lines=zc;Wc.lines=zc;Wc.paragraphs=Kc;Wc.paragraphs=Kc;Wc.nonEmptyLines=Nd;Wc.nonEmptyLines=Nd;Wc.tokens=Df;Wc.tokens=Df;Wc.tableize=Nf;Wc.tableize=Nf;Wc.unescapeCharacterEntities=ld;Wc.unescapeCharacterEntities=ld;Wc.base64EncodeUnicode=
rg;Wc.base64EncodeUnicode=rg;Wc.base64DecodeUnicode=Pj;Wc.base64DecodeUnicode=Pj;Wc.toQueryParams=vg;Wc.toQueryParams=vg;Wc.normalizePath=bl;Wc.normalizePath=bl;Wc.joinPath=lp;Wc.joinPath=lp;Wc.newUUID=Km;Wc.newUUID=Km;Wc.createDataURI=Er;Wc.createDataURI=Er;Wc.hashCode=Ms;Wc.hashCode=Ms;Wc.md5=Jq;Wc.md5=Jq;Wc.reMatches=pp;Wc.reMatches=pp;Wc.stringMatch=Kq;Wc.stringMatch=Kq;Wc.peekRight=Al;Wc.peekRight=Al;Wc.peekLeft=Fr;Wc.peekLeft=Fr;Wc.lineIndexComputer=gm;Wc.lineIndexComputer=gm;Wc.lineNumberToIndexesComputer=
sf;Wc.lineNumberToIndexesComputer=sf;Wc.findLineWithIndexInLineRanges=Bl;Wc.findLineWithIndexInLineRanges=Bl;Wc.regexIndexOf=Cl;Wc.regexIndexOf=Cl;Wc.regexLastIndexOf=Lq;Wc.regexLastIndexOf=Lq;Wc.lineRanges=Gr;Wc.lineRanges=Gr;Wc.diff=Xp;Wc.diff=Xp;Wc.empty=Yp;Wc.empty=Yp;Wc.includes=YS;Wc.includes=YS;Wc.include=ZS;Wc.include=ZS;Wc.startsWith=$S;Wc.startsWith=$S;Wc.startsWithVowel=dl;Wc.startsWithVowel=dl;Wc.endsWith=aT;Wc.endsWith=aT;Wc.withDecimalPrecision=qp;Wc.withDecimalPrecision=qp;Wc.capitalize=
Mq;Wc.capitalize=Mq;Wc.camelCaseString=Nq;Wc.camelCaseString=Nq;Wc.camelize=rp;Wc.camelize=rp;Wc.truncate=Zp;Wc.truncate=Zp;Wc.truncateLeft=ne;Wc.truncateLeft=ne;Wc.regExpEscape=Dl;Wc.regExpEscape=Dl;Wc.succ=Ns;Wc.succ=Ns;Wc.digitValue=Nk;Wc.digitValue=Nk;Wc.times=bT;Wc.times=bT;Wc.longestCommonSubstring=Oq;Wc.longestCommonSubstring=Oq;Wc.applyChange=Os;Wc.applyChange=Os;Wc.applyChanges=Ps;Wc.applyChanges=Ps;Wc.levenshtein=to;Wc.levenshtein=to;var pi=Object.freeze({__proto__:null,format:xm,formatFromArray:um,
indent:cl,minIndent:yl,changeIndent:zl,quote:kn,print:ra,printNested:La,pad:ob,printTable:Oa,printTree:mc,toArray:fc,lines:zc,paragraphs:Kc,nonEmptyLines:Nd,tokens:Df,tableize:Nf,unescapeCharacterEntities:ld,base64EncodeUnicode:rg,base64DecodeUnicode:Pj,toQueryParams:vg,normalizePath:bl,joinPath:lp,newUUID:Km,createDataURI:Er,hashCode:Ms,md5:Jq,reMatches:pp,stringMatch:Kq,peekRight:Al,peekLeft:Fr,lineIndexComputer:gm,lineNumberToIndexesComputer:sf,findLineWithIndexInLineRanges:Bl,regexIndexOf:Cl,
regexLastIndexOf:Lq,lineRanges:Gr,diff:Xp,empty:Yp,includes:YS,include:ZS,startsWith:$S,startsWithVowel:dl,endsWith:aT,withDecimalPrecision:qp,capitalize:Mq,camelCaseString:Nq,camelize:rp,truncate:Zp,truncateLeft:ne,regExpEscape:Dl,succ:Ns,digitValue:Nk,times:bT,longestCommonSubstring:Oq,applyChange:Os,applyChanges:Ps,levenshtein:to});Da("s",pi);var Qg=lively.FreezerRuntime.recorderFor("lively.lang/number.js");Qg.random=Hr;Qg.randomSmallerInteger=Ir;Qg.humanReadableByteSize=Pq;Qg.average=Qs;Qg.averageInc=
Po;Qg.median=hu;Qg.between=Jg;Qg.clamp=Pi;Qg.sort=R;Qg.parseLength=ia;Qg.roundTo=Ea;Qg.detent=sb;Qg.toDegrees=Zb;Qg.toRadians=Vc;Qg.backoff=Yd;Qg.interpolate=ce;Qg.normalRandom=function(d,c){var h,f=!1;return function(k,n){if(f)return f=!1,h*n+k;do{var b=2*Math.random()-1;var e=2*Math.random()-1;var m=b*b+e*e}while(1<=m||0==m);m=Math.sqrt(-2*Math.log(m)/m);h=e*m;f=!0;return k+n*b*m}}();Qg.convertLength=function(){function d(c,h){if("cm"===h)return c;if("mm"===h)return.1*c;if("in"===h)return 2.54*
c;if("px"===h)return c*d(1/96,"in");if("pt"===h)return c*d(1/72,"in");if("pc"===h)return c*d(12,"pt")}return function n(h,f,k){return f===k?h:"cm"===k?d(h,f):"cm"===f?h/d(1,k):n(n(h,f,"cm"),"cm",k)}}();var cT=Qg.normalRandom,dT=Qg.convertLength;Qg.random=Hr;Qg.random=Hr;Qg.normalRandom=cT;Qg.normalRandom=cT;Qg.randomSmallerInteger=Ir;Qg.randomSmallerInteger=Ir;Qg.humanReadableByteSize=Pq;Qg.humanReadableByteSize=Pq;Qg.average=Qs;Qg.average=Qs;Qg.averageInc=Po;Qg.averageInc=Po;Qg.median=hu;Qg.median=
hu;Qg.between=Jg;Qg.between=Jg;Qg.sort=R;Qg.sort=R;Qg.parseLength=ia;Qg.parseLength=ia;Qg.convertLength=dT;Qg.convertLength=dT;Qg.roundTo=Ea;Qg.roundTo=Ea;Qg.detent=sb;Qg.detent=sb;Qg.toDegrees=Zb;Qg.toDegrees=Zb;Qg.toRadians=Vc;Qg.toRadians=Vc;Qg.backoff=Yd;Qg.backoff=Yd;Qg.interpolate=ce;Qg.interpolate=ce;Qg.clamp=Pi;Qg.clamp=Pi;var Nm=Object.freeze({__proto__:null,random:Hr,normalRandom:cT,randomSmallerInteger:Ir,humanReadableByteSize:Pq,average:Qs,averageInc:Po,median:hu,between:Jg,sort:R,parseLength:ia,
convertLength:dT,roundTo:Ea,detent:sb,toDegrees:Zb,toRadians:Vc,backoff:Yd,interpolate:ce,clamp:Pi});Da("ap",Nm);var qk=lively.FreezerRuntime.recorderFor("lively.lang/properties.js");qk.all=ve;qk.allOwnPropertiesOrFunctions=wf;qk.own=lg;qk.forEachOwn=vi;qk.nameFor=Ii;qk.values=Ok;qk.ownValues=Qo;qk.any=Ro;qk.allProperties=Mn;qk.hash=Nn;qk.all=ve;qk.all=ve;qk.allOwnPropertiesOrFunctions=wf;qk.allOwnPropertiesOrFunctions=wf;qk.own=lg;qk.own=lg;qk.forEachOwn=vi;qk.forEachOwn=vi;qk.nameFor=Ii;qk.nameFor=
Ii;qk.values=Ok;qk.values=Ok;qk.ownValues=Qo;qk.ownValues=Qo;qk.any=Ro;qk.any=Ro;qk.allProperties=Mn;qk.allProperties=Mn;qk.hash=Nn;qk.hash=Nn;var up=Object.freeze({__proto__:null,all:ve,allOwnPropertiesOrFunctions:wf,own:lg,forEachOwn:vi,nameFor:Ii,values:Ok,ownValues:Qo,any:Ro,allProperties:Mn,hash:Nn});Da("aW",up);var aq=lively.FreezerRuntime.recorderFor("lively.lang/date.js");aq.format=$p;aq.equals=ln;aq.relativeTo=iu;aq.dateFormat=function(){var d=function(){var c=/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZ]|"[^"]*"|'[^']*'/g,
h=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,f=/[^-+\dA-Z]/g,k=function(n,b){n=String(n);for(b=b||2;n.length<b;)n="0"+n;return n};return function(n,b,e){var m=d;1!=arguments.length||"[object String]"!=Object.prototype.toString.call(n)||/\d/.test(n)||(b=n,n=void 0);n=n?new Date(n):new Date;if(isNaN(n))throw SyntaxError("invalid date");b=String(m.masks[b]||b||m.masks["default"]);"UTC:"==b.slice(0,4)&&(b=b.slice(4),
e=!0);var a=e?"getUTC":"get",g=n[a+"Date"](),l=n[a+"Day"](),r=n[a+"Month"](),v=n[a+"FullYear"](),y=n[a+"Hours"](),A=n[a+"Minutes"](),E=n[a+"Seconds"]();a=n[a+"Milliseconds"]();var F=e?0:n.getTimezoneOffset(),H={d:g,dd:k(g),ddd:m.i18n.dayNames[l],dddd:m.i18n.dayNames[l+7],m:r+1,mm:k(r+1),mmm:m.i18n.monthNames[r],mmmm:m.i18n.monthNames[r+12],yy:String(v).slice(2),yyyy:v,h:y%12||12,hh:k(y%12||12),H:y,HH:k(y),M:A,MM:k(A),s:E,ss:k(E),l:k(a,3),L:k(99<a?Math.round(a/10):a),t:12>y?"a":"p",tt:12>y?"am":"pm",
T:12>y?"A":"P",TT:12>y?"AM":"PM",Z:e?"UTC":(String(n).match(h)||[""]).pop().replace(f,""),o:(0<F?"-":"+")+k(100*Math.floor(Math.abs(F)/60)+Math.abs(F)%60,4),S:["th","st","nd","rd"][3<g%10?0:(10!=g%100-g%10)*g%10]};return b.replace(c,function(I){return I in H?H[I]:I.slice(1,I.length-1)})}}();d.masks={"default":"ddd mmm dd yyyy HH:MM:ss",shortDate:"m/d/yy",mediumDate:"mmm d, yyyy",longDate:"mmmm d, yyyy",fullDate:"dddd, mmmm d, yyyy",shortTime:"h:MM TT",mediumTime:"h:MM:ss TT",longTime:"h:MM:ss TT Z",
isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd'T'HH:MM:ss",isoUtcDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'"};d.i18n={dayNames:"Sun Mon Tue Wed Thu Fri Sat Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),monthNames:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec January February March April May June July August September October November December".split(" ")};return d}();var eT=aq.dateFormat;aq.format=$p;aq.format=$p;aq.equals=ln;aq.equals=ln;aq.relativeTo=iu;aq.relativeTo=
iu;aq.dateFormat=eT;aq.dateFormat=eT;var yu=Object.freeze({__proto__:null,format:$p,equals:ln,relativeTo:iu,dateFormat:eT});Da("a5",yu);var ii=lively.FreezerRuntime.recorderFor("lively.lang/promise.js");ii.promise=zh;ii.delay=ju;ii.delayReject=ku;ii.timeout=Rv;ii.timeToRun=lu;ii.waitFor=Rs;ii.deferred=Qq;ii.convertCallbackFun=Sv;ii.convertCallbackFunWithManyArgs=Ss;ii._chainResolveNext=ox;ii.chain=Rq;ii.promise_finally=px;ii.parallel=mu;ii.newUUID=Km;ii.pushIfNotIncluded=Qd;ii.removeAt=bc;Object.assign(ii.promise,
{delay:ju,delayReject:ku,timeout:Rv,waitFor:Rs,deferred:Qq,convertCallbackFun:Sv,convertCallbackFunWithManyArgs:Ss,chain:Rq,"finally":ii.promise_finally,parallel:mu});ii.promise=zh;ii.promise=zh;ii.delay=ju;ii.delay=ju;ii.delayReject=ku;ii.delayReject=ku;ii.timeout=Rv;ii.timeout=Rv;ii.timeToRun=lu;ii.timeToRun=lu;ii.waitFor=Rs;ii.waitFor=Rs;ii.deferred=Qq;ii.deferred=Qq;ii.convertCallbackFun=Sv;ii.convertCallbackFun=Sv;ii.convertCallbackFunWithManyArgs=Ss;ii.convertCallbackFunWithManyArgs=Ss;ii.chain=
Rq;ii.chain=Rq;ii.finally=px;ii.promise_finally=px;ii.parallel=mu;ii.parallel=mu;ii.default=zh;var ov=lively.FreezerRuntime.recorderFor("lively.lang/Path.js");ov.Path=Ah;ov.inspect=Gi;Object.assign(ov.Path.prototype,{get isPathAccessor(){return!0},fromPath:function(d){"string"===typeof d&&""!==d&&d!==this.splitter?(this._parts=d.split(this.splitter),this._path=d):Array.isArray(d)?(this._parts=[].concat(d),this._path=d.join(this.splitter)):(this._parts=[],this._path="");return this},setSplitter:function(d){d&&
(this.splitter=d);return this},map:function(d){this._mapper=d;return this},parts:function(){return this._parts},size:function(){return this._parts.length},slice:function(d,c){return ov.Path(this.parts().slice(d,c))},normalizePath:function(){return this._path},isRoot:function(d){return 0===this._parts.length},isIn:function(d){return this.isRoot()?!0:(d=this.get(d,-1))&&d.hasOwnProperty(this._parts[this._parts.length-1])},equals:function(d){return d&&d.isPathAccessor&&this.parts().equals(d.parts())},
isParentPathOf:function(d){d=d&&d.isPathAccessor?d:ov.Path(d);var c=this.parts();d=d.parts();for(var h=0;h<c.length;h++)if(c[h]!=d[h])return!1;return!0},relativePathTo:function(d){d=ov.Path(d);return this.isParentPathOf(d)?d.slice(this.size(),d.size()):void 0},del:function(d){if(this.isRoot())return!1;for(var c=0;c<this._parts.length-1;c++){var h=this._parts[c];if(d.hasOwnProperty(h))d=d[h];else return!1}return delete d[this._parts[this._parts.length-1]]},withParentAndKeyDo:function(d,c,h){if(this.isRoot())return h(null,
null);for(var f=0;f<this._parts.length-1;f++){var k=this._parts[f];if(!d.hasOwnProperty(k)||"object"!==typeof d[k]&&"function"!==typeof d[k])if(c)d=d[k]={};else return h(null,k);else d=d[k]}return h(d,this._parts[this._parts.length-1])},set:function(d,c,h){return this.withParentAndKeyDo(d,h,function(f,k){return f?f[k]=c:void 0})},defineProperty:function(d,c,h){return this.withParentAndKeyDo(d,h,function(f,k){return f?Object.defineProperty(f,k,c):void 0})},get:function(d,c){var h=this;return(c?this._parts.slice(0,
c):this._parts).reduce(function(f,k){return f?h._mapper?h._mapper(k,f[k]):f[k]:f},d)},concat:function(d,c){return ov.Path(this.parts().concat(ov.Path(d,c).parts()))},toString:function(){return this.normalizePath()},serializeExpr:function(){return"lively.lang.Path("+ov.inspect(this.parts())+")"},watch:function(d){if(d&&!this.isRoot()){var c=d.target,h=this.get(c,-1),f=this.parts().slice(-1)[0],k="propertyWatcher$"+f,n=h&&h.hasOwnProperty(k),b=d.uninstall,e=d.haltWhenChanged,m=d.showStack,a=h.__lookupGetter__(f),
g=h.__lookupSetter__(f);c&&f&&h&&(b?n&&(delete h[f],h[f]=h[k],delete h[k]):n||(a||g?console.log(h+'["'+f+'"] is a getter/setter, watching not support'):(h[k]=h[f],h.__defineSetter__(f,function(l){var r=h[k];if(d.onSet)d.onSet(l,r);r=h+"."+f+" changed: "+r+" -> "+l;m&&(r+="\n"+("undefined"!==typeof lively?lively.printStack():console.trace()));d.verbose&&console.log(r);if(e)debugger;return h[k]=l}),h.__defineGetter__(f,function(){if(d.onGet)d.onGet(h[k]);return h[k]}),console.log("Watcher for "+h+"."+
f+" installed"))))}},debugFunctionWrapper:function(d){var c=d.target,h=this.get(c,-1),f=this.parts().slice(-1)[0],k=void 0===d.haltWhenChanged?!0:d.haltWhenChanged,n=h&&f&&h[f],b=n&&n.isDebugFunctionWrapper;c&&f&&n&&h&&(d.uninstall?b&&(h[f]=h[f].debugTargetFunction,console.log("Uninstalled debugFunctionWrapper for "+h+"."+f)):b?console.log("debugFunctionWrapper for "+h+"."+f+" already installed"):(d=h[f]=n.wrap(function(e){var m=Array.from(arguments);if(k)debugger;return m.shift().apply(h,m)}),d.isDebugFunctionWrapper=
!0,d.debugTargetFunction=n,console.log("debugFunctionWrapper for "+h+"."+f+" installed")))}});ov.default=Ah;var Hj=lively.FreezerRuntime.recorderFor("lively.lang/graph.js");Hj.clone=nu;Hj.without=qx;Hj.hull=Tv;Hj.subgraphReachableBy=ou;Hj.invert=rx;Hj.sortByReference=Uv;Hj.reduce=Ts;Hj.random=bq;Hj.range=hc;Hj.shuffle=Mb;Hj.withoutAll=jd;Hj.flatten=oc;Hj.uniq=cb;Hj.values=hn;Hj.clone=nu;Hj.clone=nu;Hj.without=qx;Hj.without=qx;Hj.hull=Tv;Hj.hull=Tv;Hj.subgraphReachableBy=ou;Hj.subgraphReachableBy=
ou;Hj.invert=rx;Hj.invert=rx;Hj.sortByReference=Uv;Hj.sortByReference=Uv;Hj.reduce=Ts;Hj.reduce=Ts;Hj.random=bq;Hj.random=bq;var xu=Object.freeze({__proto__:null,clone:nu,without:qx,hull:Tv,subgraphReachableBy:ou,invert:rx,sortByReference:Uv,reduce:Ts,random:bq});Da("bQ",xu);var wi=lively.FreezerRuntime.recorderFor("lively.lang/interval.js");wi.isInterval=pu;wi.sort=qu;wi.compare=sp;wi.coalesce=cq;wi.coalesceOverlapping=Jr;wi.mergeOverlapping=ru;wi.intervalsInRangeDo=su;wi.intervalsInbetween=sx;wi.mapToMatchingIndexes=
Sq;wi.benchmark=function(){function d(c,h,f){return c.name+" "+wi.timeToRunN(function(){return c.apply(null,h,1E5)},f)+"ms"}return["Friday, 20. July 2012:\ncoalesceOverlapping: 0.0003ms\nintervalsInbetween: 0.002ms\nmapToMatchingIndexes: 0.02ms","vs.\n"+new Date+":",d(wi.coalesceOverlapping,[[[9,10],[1,8],[3,7],[15,20],[14,21]]],1E5),d(wi.intervalsInbetween,[0,10,[[8,10],[0,2],[3,5]]],1E5),d(wi.mapToMatchingIndexes,[wi.range(0,1E3).map(function(c){return[c,c+1]}),[[4,8],[500,504],[900,1004]]],1E3)].join("\n")};
wi.range=hc;wi.GLOBAL="undefined"!==typeof System?System.global:"undefined"!==typeof window?window:global;wi.isInterval=pu;wi.isInterval=pu;wi.sort=qu;wi.sort=qu;wi.compare=sp;wi.compare=sp;wi.coalesce=cq;wi.coalesce=cq;wi.coalesceOverlapping=Jr;wi.coalesceOverlapping=Jr;wi.mergeOverlapping=ru;wi.mergeOverlapping=ru;wi.intervalsInRangeDo=su;wi.intervalsInRangeDo=su;wi.intervalsInbetween=sx;wi.intervalsInbetween=sx;wi.mapToMatchingIndexes=Sq;wi.mapToMatchingIndexes=Sq;var aF=Object.freeze({__proto__:null,
isInterval:pu,sort:qu,compare:sp,coalesce:cq,coalesceOverlapping:Jr,mergeOverlapping:ru,intervalsInRangeDo:su,intervalsInbetween:sx,mapToMatchingIndexes:Sq}),So=lively.FreezerRuntime.recorderFor("lively.lang/array-projection.js");So.create=tu;So.toArray=uu;So.originalToProjectedIndex=Vv;So.projectedToOriginalIndex=Ul;So.transformToIncludeIndex=Us;So.create=tu;So.create=tu;So.toArray=uu;So.toArray=uu;So.originalToProjectedIndex=Vv;So.originalToProjectedIndex=Vv;So.projectedToOriginalIndex=Ul;So.projectedToOriginalIndex=
Ul;So.transformToIncludeIndex=Us;So.transformToIncludeIndex=Us;var $E=Object.freeze({__proto__:null,create:tu,toArray:uu,originalToProjectedIndex:Vv,projectedToOriginalIndex:Ul,transformToIncludeIndex:Us}),Hh=lively.FreezerRuntime.recorderFor("lively.lang/grid.js");Hh.get=vu;Hh.set=da;Hh.getRow=xa;Hh.setRow=hb;Hh.getCol=Gb;Hh.setCol=sc;Hh.create=Xc;Hh.mapCreate=he;Hh.forEach=We;Hh.map=uf;Hh.toObjects=mg;Hh.tableFromObjects=yf;Hh.benchmark=function(){var d=[],c=Hh.create(1E3,200,1);var h=Hh.timeToRunN(function(){Hh.forEach(c,
function(k){})},10);d.push("forEach: "+h.toFixed(2)+"ms");h=Hh.timeToRunN(function(){Hh.map(c,function(k,n,b){return n+b+Math.round(100*Math.random())})},10);d.push("map: "+h.toFixed(2)+"ms");var f=Hh.create(1E3,2E3);h=Hh.timeToRunN(function(){f=Array(1E3);for(var k=0;1E3>k;k++)f[k]=Array(2E3);Hh.forEach(c,function(n,b,e){f[b][e]=b+e+Math.round(100*Math.random())})},10);d.push("map with forEach: "+h+"ms");d.push("--= 2012-09-22 =--\nforEach: 14.9ms\nmap: 19.8ms\nmap with forEach: 38.7ms\n");return d.join("\n")};
Hh.arrayWithN=ac;Hh.timeToRunN=Fc;Hh.get=vu;Hh.get=vu;Hh.set=da;Hh.set=da;Hh.getRow=xa;Hh.getRow=xa;Hh.setRow=hb;Hh.setRow=hb;Hh.getCol=Gb;Hh.getCol=Gb;Hh.setCol=sc;Hh.setCol=sc;Hh.create=Xc;Hh.create=Xc;Hh.mapCreate=he;Hh.mapCreate=he;Hh.forEach=We;Hh.forEach=We;Hh.map=uf;Hh.map=uf;Hh.toObjects=mg;Hh.toObjects=mg;Hh.tableFromObjects=yf;Hh.tableFromObjects=yf;var wz=Object.freeze({__proto__:null,get:vu,set:da,getRow:xa,setRow:hb,getCol:Gb,setCol:sc,create:Xc,mapCreate:he,forEach:We,map:uf,toObjects:mg,
tableFromObjects:yf}),el=lively.FreezerRuntime.recorderFor("lively.lang/tree.js");el.prewalk=Bh;el.postwalk=Kg;el.find=oi;el.filter=pl;el.map=hm;el.mapTree=On;el.flatten=oc;el.detect=el.find;var fT=el.detect;el.prewalk=Bh;el.prewalk=Bh;el.postwalk=Kg;el.postwalk=Kg;el.find=oi;el.find=oi;el.detect=fT;el.detect=fT;el.filter=pl;el.filter=pl;el.map=hm;el.map=hm;el.mapTree=On;el.mapTree=On;var wu=Object.freeze({__proto__:null,prewalk:Bh,postwalk:Kg,find:oi,detect:fT,filter:pl,map:hm,mapTree:On});Da("a4",
wu);var GD=lively.FreezerRuntime.recorderFor("lively.lang/events.js");GD.isNode="undefined"!==typeof process&&process.versions&&process.versions.node;GD.makeEmitter=GD.isNode?function(d,c){if(d.on&&d.removeListener)return d;var h="undefined"!==typeof System?System._nodeRequire("events"):require("events");Object.assign(d,h.EventEmitter.prototype);h.EventEmitter.call(d);c&&c.maxListenerLimit&&d.setMaxListeners(c.maxListenerLimit);return d}:function(d){if(d.on&&d.removeListener)return d;d.listeners=
{};d.on=function(c,h){h&&(d.listeners[c]||(d.listeners[c]=[]),d.listeners[c].push(h))};d.once=function(c,h){function f(){d.removeListener(c,f);h.apply(this,arguments)}if(h)d.on(c,f)};d.removeListener=function(c,h){d.listeners[c]&&(d.listeners[c]=d.listeners[c].filter(function(f){return f!==h}))};d.removeAllListeners=function(c){d.listeners[c]&&(d.listeners[c]=[])};d.emit=function(){var c=Array.prototype.slice.call(arguments),h=c.shift();(h=d.listeners[h])&&h.length&&h.forEach(function(f){try{f.apply(null,
c)}catch(k){console.error("Error in event handler: %s",k.stack||String(k))}})};return d};var mC=GD.makeEmitter;GD.makeEmitter=mC;GD.makeEmitter=mC;var vz=Object.freeze({__proto__:null,makeEmitter:mC});Da("bn",vz);var im=lively.FreezerRuntime.recorderFor("lively.lang/messenger.js");im.create=Vl;im.remove=ic;im.pluck=qb;im.makeEmitter=mC;im.newUUID=Km;im.OFFLINE="offline";im.ONLINE="online";im.CONNECTING="connecting";im.create=Vl;im.create=Vl;var ZE=Object.freeze({__proto__:null,create:Vl}),Ih=lively.FreezerRuntime.recorderFor("lively.lang/worker.js");
Ih.fork=nh;Ih.create=Qj;Ih.makeEmitter=mC;Ih.newUUID=Km;Ih.waitFor=xk;Ih.messengerCreate=Vl;Ih.Closure=Rj;Ih.isNodejs="undefined"!==typeof require&&"undefined"!==typeof process;Ih.WorkerSetup={loadDependenciesBrowser:function(d){importScripts.apply("undefined"!==typeof self?self:this,d.scriptsToLoad||[])},loadDependenciesNodejs:function(d){(global.lively||(global.lively={})).lang=require(require("path").join(d.libLocation,"index"))},initBrowserGlobals:function(d){remoteWorker.send=function(c){postMessage(c)};
d="undefined"!==typeof self?self:this;d=d.Global=d;d.window=d;d.console=d.console||function(){var c={};["log","error","warn"].forEach(function(h){c[h]=function(){for(var f=arguments[0],k=1;k<arguments.length;k++)f=f.replace("%s",arguments[k]);remoteWorker.send({type:h,message:["[",h.toUpperCase(),"] ",f].join("")})}});return c}()},initOnMessageHandler:function(d){function c(h){h=h.data.data?h.data:h;if(remoteWorker.messenger)remoteWorker.messenger.onMessage(h);else"close"==h.action&&(remoteWorker.send({type:"closed",
workerReady:!1}),remoteWorker.close())}if(remoteWorker.on)remoteWorker.on("message",c);else remoteWorker.onmessage=c},initWorkerInterface:function(d){remoteWorker.callStringifiedFunction=function(c,h,f){try{var k=eval("("+c+")")}catch(e){f(Error("Cannot create function from string: "+e.stack||e));return}c=k.length===h.length+1;var n=lively.lang.fun.once(function(e,m){remoteWorker.isBusy=!1;f(e,m)});remoteWorker.isBusy=!0;c&&h.push(n);try{var b=k.apply(remoteWorker,h.concat([n]))}catch(e){n(e,null);
return}c||n(null,b)};remoteWorker.httpRequest=function(c){if(c.url){var h=new XMLHttpRequest,f=c.method||"GET";h.onreadystatechange=function(){4===h.readyState&&c.done&&c.done(h)};h.open(f,c.url);h.send()}else console.log("Error, httpRequest needs url")};remoteWorker.terminateIfNotBusyIn=function(c){setTimeout(function(){remoteWorker.isBusy?remoteWorker.terminateIfNotBusyIn(c):(remoteWorker.send({type:"closed",workerReady:!1}),remoteWorker.close())},c)}},initWorkerMessenger:function(d){if(!d.useMessenger)return null;
if(!lively.lang.messenger)throw Error("worker.create requires messenger.js to be loaded!");if(!lively.lang.events)throw Error("worker.create requires events.js to be loaded!");return remoteWorker.messenger=lively.lang.messenger.create({services:{remoteEval:function(c,h){try{var f=eval(c.data.expr)}catch(k){f=k.stack||k}h.answer(c,{result:String(f)})},run:function(c,h){var f=c.data.func,k=c.data.args;f?remoteWorker.callStringifiedFunction(f,k,function(n,b){h.answer(c,{error:n?String(n):null,result:b})}):
h.answer(c,{error:"no funcString"})},close:function(c,h){h.answer(c,{status:"OK"});remoteWorker.send({type:"closed",workerReady:!1});remoteWorker.close()}},isOnline:function(){return!0},send:function(c,h){remoteWorker.send(c);h()},listen:function(c){c()},close:function(c){remoteWorker.send({type:"closed",workerReady:!1});remoteWorker.close()}})}};Ih.BrowserWorker={create:function(d){d=d||{};if(!d.libLocation&&!d.scriptsToLoad){var c=document.querySelector('script[src$="worker.js"]');if(!c)throw Error('Cannot find library path to start worker. Use worker.create({libLocation: "..."}) to explicitly define the path!');
d.libLocation=c.src.replace(/worker.js$/,"")}c=String(function(){self.onmessage=function(h){if("setup"!==h.data.action)throw Error("expected setup to be first message but got "+JSON.stringify(h.data));h=h.data.options||{};initBrowserGlobals(h);loadDependenciesBrowser(h);initOnMessageHandler(h);initWorkerInterface(h);initWorkerMessenger(h);postMessage({workerReady:!0})};__FUNCTIONDECLARATIONS__}).split("__lvVarRecorder.").join("").replace("__FUNCTIONDECLARATIONS__",[Ih.WorkerSetup.initBrowserGlobals,
Ih.WorkerSetup.loadDependenciesBrowser,Ih.WorkerSetup.initOnMessageHandler,Ih.WorkerSetup.initWorkerInterface,Ih.WorkerSetup.initWorkerMessenger].join("\n"));c="("+Ih.Closure.fromSource(c).getFuncSource()+")();";c=new Worker(function(h){try{var f=new Blob([h],{type:"text/javascript"})}catch(k){window.BlobBuilder=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder,f=new BlobBuilder,f.append(h),f=f.getBlob()}return("undefined"!==typeof webkitURL?webkitURL:URL).createObjectURL(f)}(c));
(function(h,f){Ih.makeEmitter(f);h.scriptsToLoad||(h.scriptsToLoad="base.js events.js object.js collection.js function.js string.js number.js date.js messenger.js worker.js".split(" ").map(function(n){return h.libLocation+n}));var k=Object.keys(h).reduce(function(n,b){"function"!==typeof h[b]&&(n[b]=h[b]);return n},{});f.onmessage=function(n){void 0!==n.data.workerReady?(f.ready=!!n.data.workerReady,f.ready?f.emit("ready"):f.emit("close")):f.emit("message",n.data)};f.errors=[];f.onerror=function(n){console.error(n);
f.errors.push(n);f.emit("error",n)};f.postMessage({action:"setup",options:k})})(d,c);return c}};Ih.NodejsWorker={debug:!1,initCodeFileCreated:!1,create:function(d){d=d||{};var c,h=Ih.makeEmitter({ready:!1,errors:[],postMessage:function(f){c?h.ready?c.send(f):h.emit("error",Error("nodejs worker process not ready or already closed")):h.emit("error",Error("nodejs worker process not yet created"))}});Ih.NodejsWorker.startWorker(d,function(f,k){f?(h.ready=!1,h.emit("error",f)):(c=k,c.on("message",function(n){Ih.NodejsWorker.debug&&
console.log("[WORKER PARENT] got message:",n);h.emit("message",n)}),c.on("close",function(){console.log("[WORKER PARENT] worker closed");h.emit("close")}),c.on("error",function(n){console.log("[WORKER PARENT] error ",n);h.errors.push(n);h.emit("error",n)}),h.ready=!0,h.emit("ready"))});return h},workerSetupFunction:function(){var d=process;console.log("[WORKER] Starting init");d.on("message",function(c){if("setup"!==c.action)throw Error("expected setup to be first message but got "+JSON.stringify(c.data));
d.removeAllListeners("message");c=c.data.options||{};console.log("[WORKER] running setup with options",c);loadDependenciesNodejs(c);initOnMessageHandler(c);initWorkerInterface(c);initWorkerMessenger(c);d.send({workerReady:!0})});__FUNCTIONDECLARATIONS__},ensureInitCodeFile:function(d,c,h){var f=require("path"),k=require("os"),n=require("fs");k=f.join(k.tmpDir(),"lively-nodejs-workers/");var b=f.join(k,"nodejs-worker-init.js");Ih.NodejsWorker.initCodeFileCreated?n.exists(b,function(e){e?h(null,b):
Ih.NodejsWorker.createWorkerCodeFile(d,b,c,h)}):Ih.NodejsWorker.createWorkerCodeFile(d,b,c,h)},createWorkerCodeFile:function(d,c,h,f){d=require("path");var k=require("fs"),n=require("child_process").exec;n("mkdir -p "+d.dirname(c),function(b,e,m){b?f(Error(["[WORKER PARENT] Could not create worker temp dir:",e,m].join("\n"))):k.writeFile(c,h,function(a){Ih.NodejsWorker.debug&&console.log("worker code file %s created",c);Ih.NodejsWorker.initCodeFileCreated=!0;f(a,c)})})},startWorker:function(d,c){var h=
require("util"),f=require("child_process").fork,k=String(Ih.NodejsWorker.workerSetupFunction).replace("__FUNCTIONDECLARATIONS__",[Ih.WorkerSetup.loadDependenciesNodejs,Ih.WorkerSetup.initOnMessageHandler,Ih.WorkerSetup.initWorkerInterface,Ih.WorkerSetup.initWorkerMessenger].join("\n"));h=h.format("(%s)();\n",k);Ih.NodejsWorker.ensureInitCodeFile(d,h,function(n,b){if(n)return c(n);var e=f(b,{});Ih.NodejsWorker.debug&&console.log("worker forked");e.on("message",function(m){"pong"===m.action?console.log("[WORKER pong] ",
m):"log"===m.action&&console.log("[Message from WORKER] ",m.data)});e.once("message",function(m){Ih.NodejsWorker.debug&&console.log("worker setup done");c(null,e,m)});e.on("close",function(){Ih.NodejsWorker.debug&&console.log("[WORKER PARENT] worker closed")});e.send({action:"setup",data:{options:d}});global.WORKER=e})}};Ih.fork=nh;Ih.fork=nh;Ih.create=Qj;Ih.create=Qj;var YE=Object.freeze({__proto__:null,fork:nh,create:Qj}),pe=lively.FreezerRuntime.recorderFor("lively.lang/index.js");pe.createLivelyLangObject=
function(){return{chain:pe.chain,noConflict:pe.noConflict,installGlobals:pe.installGlobals,uninstallGlobals:pe.uninstallGlobals,globalInterfaceSpec:pe.globalInterfaceSpec,toString:function(){return"[object lively.lang]"}}};pe.globalInstall=uo;pe.chain=ym;pe.createChain=function(d,c){return Object.keys(d).reduce(function(h,f){h[f]=function(){var k=Array.prototype.slice.call(arguments);k=d[f].apply(null,[c].concat(k));return pe.chain(k)};return h},{value:function(){return c}})};pe.noConflict=tp;pe.installGlobals=
tx;pe.installProperty=function(d,c){if(!d.isIn(pe.livelyLang))throw c=Error("property not provided by lively.lang: "+d),console.error(c.stack||c),c;d=d.get(pe.livelyLang);if("function"===typeof d&&"prototype"===c.slice(-2,-1).toString()){var h=d;d=function(){var f=Array.prototype.slice.call(arguments);f.unshift(this);return h.apply(null,f)};d.toString=function(){return h.toString()}}c.set(pe.GLOBAL,d,!0)};pe.uninstallGlobals=Th;pe.string=pi;pe.num=Nm;pe.fun=Pn;pe.Closure=Rj;pe.arr=$f;pe.obj=Ag;pe.properties=
up;pe.date=yu;pe.promise=zh;pe.Path=Ah;pe.graph=xu;pe.interval=aF;pe.arrayProjection=$E;pe.Group=Qn;pe.grid=wz;pe.tree=wu;pe.events=vz;pe.messenger=ZE;pe.worker=YE;pe.worker=YE;pe.worker=YE;pe.messenger=ZE;pe.messenger=ZE;pe.events=vz;pe.events=vz;pe.tree=wu;pe.tree=wu;pe.grid=wz;pe.grid=wz;pe.arrayProjection=$E;pe.arrayProjection=$E;pe.interval=aF;pe.interval=aF;pe.graph=xu;pe.graph=xu;pe.date=yu;pe.date=yu;pe.properties=up;pe.properties=up;pe.obj=Ag;pe.obj=Ag;pe.arr=$f;pe.arr=$f;pe.fun=Pn;pe.fun=
Pn;pe.num=Nm;pe.num=Nm;pe.string=pi;pe.string=pi;pe.Closure=Rj;pe.Closure=Rj;pe.promise=zh;pe.promise=zh;pe.Path=Ah;pe.Path=Ah;pe.Group=Qn;pe.Group=Qn;pe.GLOBAL="undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:void 0;pe.isNode="undefined"!==typeof process&&process.env&&"function"===typeof process.exit;pe.globalInterfaceSpec=[{action:"installMethods",target:"Array",sources:["arr"],methods:["from","genN","range","withN"]},{action:"installMethods",
target:"Array.prototype",sources:["arr"],methods:"all any batchify clear clone collect compact delimWith detect doAndContinue each equals filterByKey findAll first flatten forEachShowingProgress grep groupBy groupByKey histogram include inject intersect invoke last mapAsync mapAsyncSeries mask max min mutableCompact nestedDelay partition pluck pushAll pushAllAt pushAt pushIfNotIncluded reMatches reject rejectByKey remove removeAt replaceAt rotate shuffle size sortBy sortByKey sum swap toArray toTuples union uniq uniqBy without withoutAll zip".split(" "),
alias:[["select","filter"]]},{action:"installMethods",target:"Date",sources:["date"],methods:[]},{action:"installMethods",target:"Date.prototype",sources:["date"],methods:["equals","format","relativeTo"]},{action:"installMethods",target:"Function",sources:["fun"],methods:["fromString"]},{action:"installMethods",target:"Function.prototype",sources:["fun"],methods:"addToObject argumentNames asScript asScriptOf binds curry delay functionNames localFunctionNames getOriginal getVarMapping logCalls logCompletion logErrors qualifiedMethodName setProperty traceCalls wrap".split(" ")},
{action:"installMethods",target:"Number",sources:["num"],methods:[]},{action:"installMethods",target:"Number.prototype",sources:["num"],methods:["detent","randomSmallerInteger","roundTo","toDegrees","toRadians"]},{action:"installMethods",target:"Object",sources:["obj"],methods:"addScript clone deepCopy extend inherit isArray isBoolean isElement isEmpty isFunction isNumber isObject isRegExp isString isUndefined merge mergePropertyInHierarchy values valuesInPropertyHierarchy".split(" ")},{action:"installMethods",
target:"Object.prototype",sources:["obj"],methods:[]},{action:"installMethods",target:"String.prototype",sources:["string"],methods:"camelize capitalize digitValue empty hashCode include pad regExpEscape startsWithVowel succ times toArray toQueryParams truncate".split(" ")},{action:"installObject",target:"Numbers",source:"num",methods:"average between convertLength humanReadableByteSize median normalRandom parseLength random sort".split(" ")},{action:"installObject",target:"Properties",source:"properties",
methods:"all allOwnPropertiesOrFunctions allProperties any forEachOwn hash nameFor own ownValues values".split(" ")},{action:"installObject",target:"Strings",source:"string",methods:"camelCaseString createDataURI diff format formatFromArray indent lineIndexComputer lines md5 newUUID nonEmptyLines pad paragraphs peekLeft peekRight print printNested printTable printTree quote reMatches stringMatch tableize tokens unescapeCharacterEntities withDecimalPrecision".split(" ")},{action:"installObject",target:"Objects",
source:"obj",methods:"asObject equals inspect isMutableType safeToString shortPrintStringOf typeStringOf".split(" ")},{action:"installObject",target:"Functions",source:"fun",methods:"all compose composeAsync createQueue debounce debounceNamed either extractBody flip notYetImplemented once own throttle throttleNamed timeToRun timeToRunN waitFor workerWithCallbackQueue wrapperChain".split(" ")},{action:"installObject",target:"Grid",source:"grid"},{action:"installObject",target:"Interval",source:"interval"},
{action:"installObject",target:"lively.ArrayProjection",source:"arrayProjection"},{action:"installObject",target:"lively.Closure",source:"Closure"},{action:"installObject",target:"lively.Grouping",source:"Group"},{action:"installObject",target:"lively.PropertyPath",source:"Path"},{action:"installObject",target:"lively.Worker",source:"worker"},{action:"installObject",target:"lively.Class",source:"classHelper"}];var uL=pe.createLivelyLangObject();pe.livelyLang=uL;pe.livelyLang=uL;pe.livelyLang=uL;pe.globalInstall=
uo;pe.globalInstall=uo;pe.chain=ym;pe.chain=ym;pe.noConflict=tp;pe.noConflict=tp;pe.installGlobals=tx;pe.installGlobals=tx;pe.uninstallGlobals=Th;pe.uninstallGlobals=Th;var S4=Object.freeze({__proto__:null,worker:YE,messenger:ZE,events:vz,tree:wu,grid:wz,arrayProjection:$E,interval:aF,graph:xu,date:yu,properties:up,obj:Ag,arr:$f,fun:Pn,num:Nm,string:pi,Closure:Rj,promise:zh,Path:Ah,Group:Qn,livelyLang:uL,globalInstall:uo,chain:ym,noConflict:tp,installGlobals:tx,uninstallGlobals:Th}),Ui=lively.FreezerRuntime.recorderFor("lively.graphics/convert-css-length.js");
Ui.parseUnit=function(d,c){c||(c=[0,""]);d=String(d);var h=parseFloat(d,10);c[0]=h;c[1]=d.match(/[\d.\-\+]*\s*(.*)/)[1]||"";return c};Ui.unit=function(d){return Ui.parseUnit(d)[1]};Ui.unitLess=function(d){return Ui.parseUnit(d)[0]};Ui.genericCssLengthParser=Ch;Ui.cssLengthToPixels=Wv;Ui.baseFontSize="16px";if(System.get("@system-env").browser)try{Ui.newBaseFontSize=Ui.genericCssLengthParser(Ui.baseFontSize)(window.getComputedStyle(document.body).fontSize),Ui.newBaseFontSize&&"NaN"!==Ui.newBaseFontSize.slice(0,
3)&&(Ui.baseFontSize=Ui.newBaseFontSize)}catch(d){}Ui.genericCssLengthParser=Ch;Ui.genericCssLengthParser=Ch;var gT=Ui.genericCssLengthParser(Ui.baseFontSize);Ui.parseCssLength=gT;Ui.parseCssLength=gT;Ui.parseCssLength=gT;Ui.cssLengthToPixels=Wv;Ui.cssLengthToPixels=Wv;var ge=lively.FreezerRuntime.recorderFor("lively.graphics/geometry-2d.js");ge.rect=zm;ge.pt=xi;ge.num=Nm;ge.string=pi;ge.grid=wz;ge.cssLengthToPixels=Wv;var Lg=function(d,c){this.x=d||0;this.y=c||0};Lg.ensure=function(d){return d instanceof
ge.Point?d:new ge.Point(d.x,d.y)};Lg.polar=function(d,c){return new ge.Point(d*Math.cos(c),d*Math.sin(c))};Lg.random=function(d){return new ge.Point(ge.num.randomSmallerInteger(d.x),ge.num.randomSmallerInteger(d.y))};Lg.fromLiteral=function(d){return ge.pt(d.x,d.y)};Lg.fromTuple=function(d){return ge.pt(d[0],d[1])};Lg.prototype.getX=function(){return this.x};Lg.prototype.getY=function(){return this.y};Lg.prototype.toFixed=function(d){return new ge.Point(this.x.toFixed(d),this.y.toFixed(d))};Lg.prototype.addPt=
function(d){return new ge.Point(this.x+d.x,this.y+d.y)};Lg.prototype.addXY=function(d,c){return new ge.Point(this.x+d,this.y+c)};Lg.prototype.midPt=function(d){return new ge.Point((this.x+d.x)/2,(this.y+d.y)/2)};Lg.prototype.subPt=function(d){return new ge.Point(this.x-d.x,this.y-d.y)};Lg.prototype.subXY=function(d,c){return new ge.Point(this.x-d,this.y-c)};Lg.prototype.scaleBy=function(d,c){return new ge.Point(this.x*d,this.y*(c||d))};Lg.prototype.scaleByPt=function(d){return new ge.Point(this.x*
d.x,this.y*d.y)};Lg.prototype.negated=function(){return new ge.Point(-this.x,-this.y)};Lg.prototype.inverted=function(){return new ge.Point(1/this.x,1/this.y)};Lg.prototype.invertedSafely=function(){return new ge.Point(this.x&&1/this.x,this.y&&1/this.y)};Lg.prototype.lessPt=function(d){return this.x<d.x&&this.y<d.y};Lg.prototype.leqPt=function(d){return this.x<=d.x&&this.y<=d.y};Lg.prototype.eqPt=function(d){return this.x==d.x&&this.y==d.y};Lg.prototype.equals=function(d){return this.x==d.x&&this.y==
d.y};Lg.prototype.withX=function(d){return ge.pt(d,this.y)};Lg.prototype.withY=function(d){return ge.pt(this.x,d)};Lg.prototype.copy=function(){return new ge.Point(this.x,this.y)};Lg.prototype.minPt=function(d,c){c||(c=new ge.Point(0,0));c.x=Math.min(this.x,d.x);c.y=Math.min(this.y,d.y);return c};Lg.prototype.maxPt=function(d,c){c||(c=new ge.Point(0,0));c.x=Math.max(this.x,d.x);c.y=Math.max(this.y,d.y);return c};Lg.prototype.random=function(){return ge.Point.random(this)};Lg.prototype.normalized=
function(){var d=this.r();return ge.pt(this.x/d,this.y/d)};Lg.prototype.fastNormalized=function(){var d=this.fastR();return ge.pt(this.x/d,this.y/d)};Lg.prototype.dotProduct=function(d){return this.x*d.x+this.y*d.y};Lg.prototype.matrixTransform=function(d,c){var h=d.a*this.x+d.c*this.y+d.e;d=d.b*this.x+d.d*this.y+d.f;return c?Object.assign(c,{x:h,y:d}):ge.pt(h,d)};Lg.prototype.matrixTransformDirection=function(d,c){var h=d.a*this.x+d.c*this.y;d=d.b*this.x+d.d*this.y;return c?Object.assign(c,{x:h,
y:d}):ge.pt(h,d)};Lg.prototype.griddedBy=function(d){return ge.pt(this.x-this.x%d.x,this.y-this.y%d.y)};Lg.prototype.roundTo=function(d){return new ge.Point(ge.num.roundTo(this.x,d),ge.num.roundTo(this.y,d))};Lg.prototype.dist=function(d){var c=this.x-d.x;d=this.y-d.y;return Math.sqrt(c*c+d*d)};Lg.prototype.distSquared=function(d){var c=this.x-d.x;d=this.y-d.y;return c*c+d*d};Lg.prototype.nearestPointOnLineBetween=function(d,c){if(d.x==c.x)return ge.pt(d.x,this.y);if(d.y==c.y)return ge.pt(this.x,
d.y);var h=d.x;d=d.y;var f=c.x-h;c=c.y-d;var k=((this.y-d)/f+(this.x-h)/c)/(f/c+c/f);return ge.pt(h+k*f,d+k*c)};Lg.prototype.interpolate=function(d,c,h){return void 0===h||h?ge.pt(ge.num.interpolate(d,this.x,c.x),ge.num.interpolate(d,this.y,c.y)):ge.Point.polar(ge.num.interpolate(d,this.r(),c.r()),ge.num.interpolate(d,this.theta(),c.theta()))};Lg.prototype.r=function(){return Math.sqrt(this.x*this.x+this.y*this.y)};Lg.prototype.fastR=function(){for(var d=this.x*this.x+this.y*this.y,c=17,h=0;6>h;h++)c=
(c+d/c)/2;return c};Lg.prototype.theta=function(){return Math.atan2(this.y,this.x)};Lg.prototype.asRectangle=function(){return new ge.Rectangle(this.x,this.y,0,0)};Lg.prototype.extent=function(d){return new ge.Rectangle(this.x,this.y,d.x,d.y)};Lg.prototype.extentAsRectangle=function(){return new ge.Rectangle(0,0,this.x,this.y)};Lg.prototype.lineTo=function(d){return new ge.Line(this,d)};Lg.prototype.toTuple=function(){return[this.x,this.y]};Lg.prototype.toLiteral=function(){return{x:this.x,y:this.y}};
Lg.prototype.toString=function(d){return void 0===d||d?ge.string.format("pt(%1.f,%1.f)",this.x,this.y):ge.string.format("pt(%10.d,%10.d)",this.x,this.y)};Lg.prototype.inspect=function(){return JSON.stringify(this)};Lg.prototype.__serialize__=function(){return{__expr__:this.toString(!1),bindings:{"lively.graphics/geometry-2d.js":["pt"]}}};$jscomp.global.Object.defineProperties(Lg.prototype,{isPoint:{configurable:!0,enumerable:!0,get:function(){return!0}}});Da("ag",Lg);ge.Point=Lg;var He=function(d,
c,h,f){this.x=d||0;this.y=c||0;this.width=h||0;this.height=f||0};He.fromAny=function(d,c){return ge.rect(d.minPt(c),d.maxPt(c))};He.fromLiteral=function(d){return new ge.Rectangle(d.x,d.y,d.width,d.height)};He.fromTuple=function(d){return new ge.Rectangle(d[0],d[1],d[2],d[3])};He.unionPts=function(d){for(var c=d[0],h=d[0],f=1;f<d.length;f++)c=c.minPt(d[f]),h=h.maxPt(d[f]);return ge.rect(c,h)};He.ensure=function(d){return d instanceof ge.Rectangle?d:new ge.Rectangle(d.x,d.y,d.width,d.height)};He.fromElement=
function(d){if("function"===typeof d.getBoundingClientRect){var c=d.getBoundingClientRect();return ge.rect(c.left,c.top,c.width,c.height)}if("http://www.w3.org/1999/xhtml"==d.namespaceURI){c=ge.cssLengthToPixels(d.style.left||"0px");var h=ge.cssLengthToPixels(d.style.top||"0px"),f=ge.cssLengthToPixels(d.style.width||"0px");d=ge.cssLengthToPixels(d.style.hieght||"0px");return new ge.Rectangle(c,h,f,d)}if("http://www.w3.org/2000/svg"==d.namespaceURI)return new ge.Rectangle(d.x.baseVal.value,d.y.baseVal.value,
d.width.baseVal.value,d.height.baseVal.value);throw Error("Cannot create Rectangle from "+d);};He.inset=function(d,c,h,f){void 0===c&&(c=d);void 0===h&&(h=d);void 0===f&&(f=c);return new ge.Rectangle(d,c,h-d,f-c)};He.prototype.getX=function(){return this.x};He.prototype.getY=function(){return this.y};He.prototype.getWidth=function(){return this.width};He.prototype.getHeight=function(){return this.height};He.prototype.copy=function(){return new ge.Rectangle(this.x,this.y,this.width,this.height)};He.prototype.toFixed=
function(d){return new ge.Rectangle(this.x.toFixed(d),this.y.toFixed(d),this.width.toFixed(d),this.height.toFixed(d))};He.prototype.withWidth=function(d){return new ge.Rectangle(this.x,this.y,d,this.height)};He.prototype.withHeight=function(d){return new ge.Rectangle(this.x,this.y,this.width,d)};He.prototype.withX=function(d){return new ge.Rectangle(d,this.y,this.width,this.height)};He.prototype.withY=function(d){return new ge.Rectangle(this.x,d,this.width,this.height)};He.prototype.withExtent=function(d){return new ge.Rectangle(this.x,
this.y,d.x,d.y)};He.prototype.withTopLeft=function(d){return ge.Rectangle.fromAny(d,this.bottomRight())};He.prototype.withTopRight=function(d){return ge.Rectangle.fromAny(this.bottomLeft(),d)};He.prototype.withBottomRight=function(d){return ge.Rectangle.fromAny(d,this.topLeft())};He.prototype.withBottomLeft=function(d){return ge.Rectangle.fromAny(d,this.topRight())};He.prototype.withLeftCenter=function(d){return new ge.Rectangle(d.x,this.y,this.width+(this.x-d.x),this.height)};He.prototype.withRightCenter=
function(d){return new ge.Rectangle(this.x,this.y,d.x-this.x,this.height)};He.prototype.withTopCenter=function(d){return new ge.Rectangle(this.x,d.y,this.width,this.height+(this.y-d.y))};He.prototype.withBottomCenter=function(d){return new ge.Rectangle(this.x,this.y,this.width,d.y-this.y)};He.prototype.withCenter=function(d){return new ge.Rectangle(d.x-this.width/2,d.y-this.height/2,this.width,this.height)};He.prototype.insetBy=function(d){return new ge.Rectangle(this.x+d,this.y+d,this.width-2*d,
this.height-2*d)};He.prototype.insetByPt=function(d){return new ge.Rectangle(this.x+d.x,this.y+d.y,this.width-2*d.x,this.height-2*d.y)};He.prototype.grid=function(d,c){var h=this.width/c,f=this.height/d;return ge.grid.mapCreate(d,c,function(k,n){return new ge.Rectangle(h*n,f*k,h,f)})};He.prototype.divide=function(d){var c=this;return d.map(function(h){return ge.rect(c.x+c.width*h.x,c.y+c.height*h.y,c.width*h.width,c.height*h.height)})};He.prototype.toTuple=function(){return[this.x,this.y,this.width,
this.height]};He.prototype.lineTo=function(d){var c=this.center(),h=d.center();h=c.lineTo(h);c=this.lineIntersection(h)[0];d=d.lineIntersection(h)[0];return c&&d&&c.lineTo(d)};He.prototype.equals=function(d){return d?this.x==d.x&&this.y==d.y&&this.width==d.width&&this.height==d.height:!1};He.prototype.inspect=function(){return JSON.stringify(this)};He.prototype.topLeft=function(){return new ge.Point(this.x,this.y)};He.prototype.topRight=function(){return new ge.Point(this.maxX(),this.y)};He.prototype.bottomRight=
function(){return new ge.Point(this.maxX(),this.maxY())};He.prototype.bottomLeft=function(){return new ge.Point(this.x,this.maxY())};He.prototype.leftCenter=function(){return new ge.Point(this.x,this.center().y)};He.prototype.rightCenter=function(){return new ge.Point(this.maxX(),this.center().y)};He.prototype.topCenter=function(){return new ge.Point(this.center().x,this.y)};He.prototype.bottomCenter=function(){return new ge.Point(this.center().x,this.maxY())};He.prototype.extent=function(){return new ge.Point(this.width,
this.height)};He.prototype.center=function(){return new ge.Point(this.x+this.width/2,this.y+this.height/2)};He.prototype.topEdge=function(){return new ge.Line(this.topLeft(),this.topRight())};He.prototype.bottomEdge=function(){return new ge.Line(this.bottomLeft(),this.bottomRight())};He.prototype.leftEdge=function(){return new ge.Line(this.topLeft(),this.bottomLeft())};He.prototype.rightEdge=function(){return new ge.Line(this.topRight(),this.bottomRight())};He.prototype.edges=function(){return[this.topEdge(),
this.rightEdge(),this.bottomEdge(),this.leftEdge()]};He.prototype.allPoints=function(){for(var d=this.x,c=this.y,h=this.width,f=this.height,k=[],n=c;n<c+f;n++)for(var b=d;b<d+h;b++)k.push(ge.pt(b,n));return k};He.prototype.isNonEmpty=function(d){return 0<this.width&&0<this.height};He.prototype.containsRect=function(d){return this.x<=d.x&&this.y<=d.y&&d.maxX()<=this.maxX()&&d.maxY()<=this.maxY()};He.prototype.intersects=function(d){return this.intersection(d).isNonEmpty()};He.prototype.containsPoint=
function(d){return this.x<=d.x&&d.x<=this.x+this.width&&this.y<=d.y&&d.y<=this.y+this.height};He.prototype.translatedBy=function(d){return new ge.Rectangle(this.x+d.x,this.y+d.y,this.width,this.height)};He.prototype.scaleByRect=function(d){return new ge.Rectangle(this.x+d.x*this.width,this.y+d.y*this.height,d.width*this.width,d.height*this.height)};He.prototype.scaleRectIn=function(d){return new ge.Rectangle((this.x-d.x)/d.width,(this.y-d.y)/d.height,this.width/d.width,this.height/d.height)};He.prototype.scaleRectTo=
function(d){var c,h;this.width>this.height?h=this.width:c=this.height;d=h?d.width/h:d.height/c;return this.withExtent(this.extent().scaleBy(d)).withCenter(this.center())};He.prototype.expandBy=function(d){return this.insetBy(0-d)};He.prototype.translateForInclusion=function(d){var c=d.x,h=d.y,f=c+d.width,k=h+d.height;f>this.right()&&(c-=f-this.right());k>this.bottom()&&(h-=k-this.bottom());c<this.x&&(c=this.x);h<this.y&&(h=this.y);return ge.rect(c,h,d.width,d.height)};He.prototype.transformRectForInclusion=
function(d){var c=this.topLeft().maxPt(d.topLeft());d=c.addPt(d.extent());d=this.bottomRight().minPt(d);return ge.rect(c,d)};He.prototype.insetByRect=function(d){return new ge.Rectangle(this.x+d.left(),this.y+d.top(),this.width-(d.left()+d.right()),this.height-(d.top()+d.bottom()))};He.prototype.outsetByRect=function(d){return new ge.Rectangle(this.x-d.left(),this.y-d.top(),this.width+(d.left()+d.right()),this.height+(d.top()+d.bottom()))};He.prototype.interpolate=function(d,c){var h=this.topLeft(),
f=this.bottomRight(),k=c.topLeft();c=c.bottomRight();return ge.Rectangle.fromAny(h.interpolate(d,k),f.interpolate(d,c))};He.prototype.intersection=function(d){var c=Math.max(this.x,d.x),h=Math.max(this.y,d.y);return new ge.Rectangle(c,h,Math.min(this.x+this.width,d.x+d.width)-c,Math.min(this.y+this.height,d.y+d.height)-h)};He.prototype.union=function(d){return ge.rect(this.topLeft().minPt(d.topLeft()),this.bottomRight().maxPt(d.bottomRight()))};He.prototype.lineIntersection=function(d){return this.edges().map(function(c){return c.intersection(d)}).filter(function(c){return!!c})};
He.prototype.dist=function(d){var c=this.closestPointToPt(d.center());d=d.closestPointToPt(c);return c.dist(d)};He.prototype.relativeToAbsPoint=function(d){return new ge.Point(this.x+this.width*d.x,this.y+this.height*d.y)};He.prototype.closestPointToPt=function(d){return ge.pt(Math.min(Math.max(this.x,d.x),this.maxX()),Math.min(Math.max(this.y,d.y),this.maxY()))};He.prototype.maxX=function(){return this.x+this.width};He.prototype.maxY=function(){return this.y+this.height};He.prototype.realWidth=function(){return 0>
this.x?-this.x+this.width:this.width};He.prototype.realHeight=function(){return 0>this.y?-this.y+this.height:this.height};He.prototype.area=function(){return(0>this.width&&0>this.height?-1:1)*this.width*this.height};He.prototype.randomPoint=function(){return ge.Point.random(ge.pt(this.width,this.height)).addPt(this.topLeft())};He.prototype.constrainPt=function(d){return d.maxPt(this.topLeft()).minPt(this.bottomRight())};He.prototype.left=function(){return this.x};He.prototype.right=function(){return this.maxX()};
He.prototype.top=function(){return this.y};He.prototype.bottom=function(){return this.maxY()};He.prototype.toInsetTuple=function(){return[this.left(),this.top(),this.right(),this.bottom()]};He.prototype.toAttributeValue=function(d){d=.01;var c=[this.left()];this.top()===this.bottom()&&this.left()===this.right()?this.top()===this.left()&&c.push(this.top()):c=c.concat([this.top(),this.right(),this.bottom()]);return c.invoke("roundTo",d||.01)};He.prototype.toLiteral=function(){return{x:this.x,y:this.y,
width:this.width,height:this.height}};He.prototype.partNamed=function(d){return this[d].call(this)};He.prototype.withPartNamed=function(d,c){return this[this.setterName(d)].call(this,c)};He.prototype.setterName=function(d){return"with"+d[0].toUpperCase()+d.slice(1)};He.prototype.partNameNear=function(d,c,h){d=this.partNameNearest(d,c);return c.dist(this.partNamed(d))<h?d:null};He.prototype.partNameNearest=function(d,c){for(var h=1E99,f,k=0;k<d.length;k++){f=d[k];var n=c.dist(this.partNamed(f));if(n<
h){var b=f;h=n}}return b};He.prototype.toString=function(){return ge.string.format("rect(%s,%s,%s,%s)",this.x,this.y,this.width,this.height)};He.prototype.__serialize__=function(){return{__expr__:this.toString(),bindings:{"lively.graphics/geometry-2d.js":["rect"]}}};$jscomp.global.Object.defineProperties(He.prototype,{corners:{configurable:!0,enumerable:!0,get:function(){return["topLeft","topRight","bottomRight","bottomLeft"]}},sides:{configurable:!0,enumerable:!0,get:function(){return["leftCenter",
"rightCenter","topCenter","bottomCenter"]}},isRectangle:{configurable:!0,enumerable:!0,get:function(){return!0}}});Da("a1",He);ge.Rectangle=He;var $k=function(d,c,h){d?d instanceof ge.Point?(c=c||0,void 0===h&&(h=ge.pt(1,1)),this.a=this.ensureNumber(h.x*Math.cos(c)),this.b=this.ensureNumber(h.y*Math.sin(c)),this.c=this.ensureNumber(h.x*-Math.sin(c)),this.d=this.ensureNumber(h.y*Math.cos(c)),this.e=this.ensureNumber(d.x),this.f=this.ensureNumber(d.y),1<this.a&&(this.a=Math.round(this.a*Math.pow(10,
2))/Math.pow(10,2)),1<this.d&&(this.d=Math.round(this.d*Math.pow(10,2))/Math.pow(10,2))):this.fromMatrix(d):(this.a=this.d=1,this.b=this.c=this.e=this.f=0)};$k.prototype.copy=function(){return new ge.Transform(this)};$k.prototype.fromMatrix=function(d){this.a=this.ensureNumber(d.a);this.b=this.ensureNumber(d.b);this.c=this.ensureNumber(d.c);this.d=this.ensureNumber(d.d);this.e=this.ensureNumber(d.e);this.f=this.ensureNumber(d.f)};$k.prototype.getRotation=function(){var d=ge.num.toDegrees(Math.atan2(-this.c,
this.a));return Math.abs(d)<this.eps?0:d};$k.prototype.getScale=function(){var d=this.a,c=this.c;d=Math.sqrt(d*d+c*c);return Math.abs(d-1)<this.eps?1:d};$k.prototype.getScalePoint=function(){var d=this.a,c=this.b,h=this.c,f=this.d,k=Math.atan2(-h,d);return ge.pt(Math.sqrt(d*d+h*h),Math.abs(c)>Math.abs(f)?c/Math.sin(k):f/Math.cos(k))};$k.prototype.getTranslation=function(){return ge.pt(this.e,this.f)};$k.prototype.isTranslation=function(){return 1==this.a&&0==this.b&&0==this.c&&1==this.d};$k.prototype.toSVGAttributeValue=
function(){var d=this.getTranslation();d="translate("+d.x+","+d.y+")";var c=this.getRotation(),h=this.getScalePoint();0!=c&&(d+=" rotate("+this.getRotation()+")");if(1!=h.x||1!=h.y)d+=" scale("+h.x+","+h.y+")";return d};$k.prototype.toCSSValue=function(d){var c="",h=this.getTranslation();c+="translate("+h.x.toFixed(2)+"px,"+h.y.toFixed(2)+"px)";if(d){h=d.width/2;var f=d.height/2;c+=" translate("+h.toFixed(2)+"px,"+f.toFixed(2)+"px)"}0!=this.getRotation()&&(c+=" rotate("+this.getRotation().toFixed(2)+
"deg)");d&&(h=d.width/2,f=d.height/2,c+=" translate("+(-1*h).toFixed(2)+"px,"+(-1*f).toFixed(2)+"px)");d=this.getScalePoint();if(1!=d.x||1!=d.y)c+=" scale("+d.x.toFixed(2)+","+d.y.toFixed(2)+")";return c};$k.prototype.toCSSTransformString=function(){var d=this.getRotation(),c=this.getScale();return"translate("+this.e+"px,"+this.f+"px) rotate("+d+"deg) scale("+c+","+c+")"};$k.prototype.toString=function(){return this.toCSSTransformString()};$k.prototype.toMatrix=function(){return this.copy()};$k.prototype.transformPoint=
function(d,c){return d.matrixTransform(this,c)};$k.prototype.transformDirection=function(d,c){return d.matrixTransformDirection(this,c)};$k.prototype.matrixTransformForMinMax=function(d,c,h){var f=this.a*d.x+this.c*d.y+this.e;d=this.b*d.x+this.d*d.y+this.f;f>h.x&&(h.x=f);d>h.y&&(h.y=d);f<c.x&&(c.x=f);d<c.y&&(c.y=d)};$k.prototype.transformRectToRect=function(d){var c=ge.pt(Infinity,Infinity),h=ge.pt(-Infinity,-Infinity);this.matrixTransformForMinMax(d.topLeft(),c,h);this.matrixTransformForMinMax(d.bottomRight(),
c,h);this.isTranslation()||(this.matrixTransformForMinMax(d.topRight(),c,h),this.matrixTransformForMinMax(d.bottomLeft(),c,h));return ge.rect(c,h)};$k.prototype.preConcatenate=function(d){var c=this.matrix_||this.toMatrix();this.a=d.a*c.a+d.c*c.b;this.b=d.b*c.a+d.d*c.b;this.c=d.a*c.c+d.c*c.d;this.d=d.b*c.c+d.d*c.d;this.e=d.a*c.e+d.c*c.f+d.e;this.f=d.b*c.e+d.d*c.f+d.f;this.matrix_=this.toMatrix();return this};$k.prototype.invert=function(){var d=this.copy(),c=1/(d.a*d.d-d.c*d.b);this.a=d.d*c;this.b=
-d.b*c;this.c=-d.c*c;this.d=d.a*c;this.e=(d.c*d.f-d.e*d.d)*c;this.f=-(d.a*d.f-d.b*d.e)*c;return this};$k.prototype.inverse=function(){var d=this.matrix_||this.toMatrix();d=new this.constructor(d);d.invert();return d};$k.prototype.ensureNumber=function(d){if(isNaN(d))throw Error("not a number");return d};$k.prototype.__serialize__=function(){return{__expr__:"new Transform({a: "+this.a+", b: "+this.b+", c: "+this.c+", d: "+this.d+", e: "+this.e+", f: "+this.f+"})",bindings:{"lively.graphics/geometry-2d.js":["Transform"]}}};
$jscomp.global.Object.defineProperties($k.prototype,{exp:{configurable:!0,enumerable:!0,get:function(){return 1E-4}},isTransform:{configurable:!0,enumerable:!0,get:function(){return!0}}});ge.Transform=$k;var An=function(d,c){this.start=d;this.end=c};An.fromCoords=function(d,c,h,f){return new ge.Line(ge.pt(d,c),ge.pt(h,f))};An.prototype.withStart=function(d){return new ge.Line(d,this.end)};An.prototype.withEnd=function(d){return new ge.Line(this.start,d)};An.prototype.sampleN=function(d){d=d||10;for(var c=
this.end.subPt(this.start).scaleBy(1/d),h=[],f=0;f<=d;f++)h.push(this.start.addPt(c.scaleBy(f)));return h};An.prototype.sample=function(d){return this.sampleN(this.length()/d)};An.prototype.length=function(){return this.start.dist(this.end)};An.prototype.equals=function(d){return d?this.start.eqPt(d.start)&&this.end.eqPt(d.end):!1};An.prototype.distanceFromLine=function(d){var c=this.start.x,h=this.start.y,f=this.end.x,k=this.end.y;return Math.abs((k-h)*d.x-(f-c)*d.y+f*h-k*c)/Math.sqrt(Math.pow(k-
h,2)+Math.pow(f-c,2))};An.prototype.includesPoint=function(d,c){var h=this.start.x,f=this.start.y,k=this.end.x,n=this.end.y,b=d.x;d=d.y;var e=0===(k-h)*(d-f)-(b-h)*(n-f);if(c||!e)return e;c=Math.min(f,n);e=Math.max(h,k);f=Math.max(f,n);return Math.min(h,k)<=b&&b<=e&&c<=d&&d<=f};An.prototype.intersection=function(d,c){var h=this.start,f=this.end,k=d.start,n=d.end;d=h.x;h=h.y;var b=f.x;f=f.y;var e=k.x;k=k.y;var m=n.x;n=n.y;var a=((d*f-h*b)*(e-m)-(d-b)*(e*n-k*m))/((d-b)*(k-n)-(h-f)*(e-m)),g=((d*f-h*
b)*(k-n)-(h-f)*(e*n-k*m))/((d-b)*(k-n)-(h-f)*(e-m));return Infinity!==a&&Infinity!==g&&(c||ge.num.between(a,d,b,1E-4)&&ge.num.between(g,h,f,1E-4)&&ge.num.between(a,e,m,1E-4)&&ge.num.between(g,k,n,1E-4))?ge.pt(a,g):null};An.prototype.perpendicularLine=function(d,c,h){d=void 0===d?0:d;c=void 0===c?1:c;h=void 0===h?"cc":h;var f=this.start,k=this.toVector();d=f.addPt(k.scaleBy(d));h=k.theta()+("cc"===h?-1:1)*Math.PI/2;return new ge.Line(d,d.addPt(ge.Point.polar(c,h)))};An.prototype.toVector=function(){return this.end.subPt(this.start)};
An.prototype.toString=function(){return ge.string.format("Line((%s,%s), (%s,%s))",this.start.x,this.start.y,this.end.x,this.end.y)};An.prototype.__serialize__=function(){return{__expr__:"Line.fromCoords("+this.start.x+", "+this.start.y+", "+this.end.x+", "+this.end.y+")",bindings:{"lively.graphics/geometry-2d.js":["Line"]}}};$jscomp.global.Object.defineProperties(An.prototype,{isLine:{configurable:!0,enumerable:!0,get:function(){return!0}}});ge.Line=An;ge.rect=zm;ge.rect=zm;ge.pt=xi;ge.pt=xi;var jha=
Object.freeze({__proto__:null,Point:Lg,Rectangle:He,Transform:$k,Line:An,rect:zm,pt:xi}),Rd=lively.FreezerRuntime.recorderFor("lively.graphics/color-parser.js");Rd.parse=Xv;Rd.Color=function(d){this._listeners={};this.subscribe(Rd.Events.RGB_UPDATED,this._RGBUpdated);this.subscribe(Rd.Events.HEX_UPDATED,this._HEXUpdated);this.subscribe(Rd.Events.HSL_UPDATED,this._HSLUpdated);this.subscribe(Rd.Events.HSV_UPDATED,this._HSVUpdated);this.subscribe(Rd.Events.INT_UPDATED,this._INTUpdated);this.parse(d)};
Rd.parse=Xv;Rd.parse=Xv;Rd.Events={RGB_UPDATED:"RGBUpdated",HSL_UPDATED:"HSLUpdated",HSV_UPDATED:"HSVUpdated",HEX_UPDATED:"HexUpdated",INT_UPDATED:"IntUpdated",UPDATED:"updated"};Rd.namedColors={transparent:"rgba(0, 0, 0, 0)",aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",
chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",darkgreen:"#006400",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",
deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",
lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",lightgreen:"#90EE90",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370D8",
mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#D87093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",
pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE"};Rd.absround=
function(d){return.5+d<<0};Rd.hue2rgb=function(d,c,h){0>h&&(h+=1);1<h&&--h;return h<1/6?d+6*(c-d)*h:.5>h?c:h<2/3?d+(c-d)*(2/3-h)*6:d};Rd.p2v=function(d){return Rd.isPercent.test(d)?Rd.absround(2.55*parseInt(d)):d};Rd.isHex=/^#?([0-9a-f]{3}|[0-9a-f]{6})$/i;Rd.isHSL=/^hsla?\((\d{1,3}?),\s*(\d{1,3}%),\s*(\d{1,3}%)(,\s*[01]?\.?\d*)?\)$/;Rd.isRGB=/^rgba?\((\d{1,3}%?),\s*(\d{1,3}%?),\s*(\d{1,3}%?)(,\s*[01]?\.?\d*)?\)$/;Rd.isPercent=/^\d+(\.\d+)*%$/;Rd.hexBit=/([0-9a-f])/gi;Rd.leadHex=/^#/;Rd.matchHSL=/^hsla?\((\d{1,3}),\s*(\d{1,3})%,\s*(\d{1,3})%(,\s*([01]?\.?\d*))?\)$/;
Rd.matchRGB=/^rgba?\((\d{1,3}%?),\s*(\d{1,3}%?),\s*(\d{1,3}%?)(,\s*([01]?\.?\d*))?\)$/;Rd.Color.prototype._decimal=0;Rd.Color.prototype._hex="#000000";Rd.Color.prototype._red=0;Rd.Color.prototype._green=0;Rd.Color.prototype._blue=0;Rd.Color.prototype._hue=0;Rd.Color.prototype._saturation=0;Rd.Color.prototype._lightness=0;Rd.Color.prototype._brightness=0;Rd.Color.prototype._alpha=1;Rd.Color.prototype.parse=function(d){if("undefined"==typeof d)return this;switch(!0){case isFinite(d):this.decimal(d);
this.output=Rd.Color.INT;break;case d instanceof Rd.Color:this.copy(d);break;default:switch(typeof d){case "object":this.set(d);break;case "string":switch(!0){case Rd.namedColors.hasOwnProperty(d):d=Rd.namedColors[d];d=d.replace(Rd.leadHex,"");this.decimal(parseInt(d,16));break;case Rd.isHex.test(d):d=d.replace(Rd.leadHex,"");3==d.length&&(d=d.replace(Rd.hexBit,"$1$1"));this.decimal(parseInt(d,16));break;case Rd.isRGB.test(d):d=d.match(Rd.matchRGB);this.red(Rd.p2v(d[1]));this.green(Rd.p2v(d[2]));
this.blue(Rd.p2v(d[3]));this.alpha(parseFloat(d[5])||1);this.output=(Rd.isPercent.test(d[1])?2:1)+(d[5]?2:0);break;case Rd.isHSL.test(d):d=d.match(Rd.matchHSL),this.hue(parseInt(d[1])),this.saturation(parseInt(d[2])),this.lightness(parseInt(d[3])),this.alpha(parseFloat(d[5])||1),this.output=d[5]?6:5}}}return this};Rd.Color.prototype.clone=function(){return new Rd.Color(this.decimal())};Rd.Color.prototype.copy=function(d){this.set(d.decimal());return this};Rd.Color.prototype.set=function(d,c){if(1==
arguments.length)if("object"==typeof d)for(var h in d){if("function"==typeof this[h])this[h](d[h])}else isFinite(d)&&this.decimal(d);else if("function"==typeof this[d])this[d](c);return this};Rd.Color.prototype.interpolate=function(d,c){d instanceof Rd.Color||(d=new Rd.Color(d));this._red=Rd.absround(+this._red+(d._red-this._red)*c);this._green=Rd.absround(+this._green+(d._green-this._green)*c);this._blue=Rd.absround(+this._blue+(d._blue-this._blue)*c);this._alpha=Rd.absround(+this._alpha+(d._alpha-
this._alpha)*c);this.broadcast(Rd.Events.RGB_UPDATED);this.broadcast(Rd.Events.UPDATED);return this};Rd.Color.prototype._RGB2HSL=function(){var d=this._red/255,c=this._green/255,h=this._blue/255,f=Math.max(d,c,h),k=Math.min(d,c,h),n=(f+k)/2;if(f==k)this._saturation=this._hue=0;else{var b=f-k;k=b/(.5>=n?f+k:2-f-k);this._hue=Rd.absround((f==d?(c-h)/b+(c<h?6:0):f==c?(h-d)/b+2:(d-c)/b+4)/6*360);this._saturation=Rd.absround(100*k)}this._lightness=Rd.absround(100*n);this._brightness=Rd.absround(100*f)};
Rd.Color.prototype._HSL2RGB=function(){var d=this._hue/360,c=this._saturation/100,h=this._lightness/100;c=.5>h?h*(1+c):h+c-h*c;h=2*h-c;this._red=Rd.absround(255*Rd.hue2rgb(h,c,d+1/3));this._green=Rd.absround(255*Rd.hue2rgb(h,c,d));this._blue=Rd.absround(255*Rd.hue2rgb(h,c,d-1/3))};Rd.Color.prototype._HSV2RGB=function(){var d=this._hue/360,c=this._saturation/100,h=this._brightness/100,f=0,k=0,n=0,b=Math.floor(6*d),e=6*d-b;d=h*(1-c);var m=h*(1-e*c);c=h*(1-(1-e)*c);switch(b%6){case 0:f=h;k=c;n=d;break;
case 1:f=m;k=h;n=d;break;case 2:f=d;k=h;n=c;break;case 3:f=d;k=m;n=h;break;case 4:f=c;k=d;n=h;break;case 5:f=h,k=d,n=m}this._red=Rd.absround(255*f);this._green=Rd.absround(255*k);this._blue=Rd.absround(255*n)};Rd.Color.prototype._INT2HEX=function(){var d=this._decimal.toString(16);d="000000".substr(0,6-d.length)+d;this._hex="#"+d.toUpperCase()};Rd.Color.prototype._INT2RGB=function(){this._red=this._decimal>>16;this._green=this._decimal>>8&255;this._blue=this._decimal&255};Rd.Color.prototype._HEX2INT=
function(){this._decimal=parseInt(this._hex,16)};Rd.Color.prototype._RGB2INT=function(){this._decimal=this._red<<16|this._green<<8&65535|this._blue};Rd.Color.prototype._RGBUpdated=function(){this._RGB2INT();this._RGB2HSL();this._INT2HEX()};Rd.Color.prototype._HSLUpdated=function(){this._HSL2RGB();this._RGB2INT();this._INT2HEX()};Rd.Color.prototype._HSVUpdated=function(){this._HSV2RGB();this._RGB2INT();this._INT2HEX()};Rd.Color.prototype._HEXUpdated=function(){this._HEX2INT();this._INT2RGB();this._RGB2HSL()};
Rd.Color.prototype._INTUpdated=function(){this._INT2RGB();this._RGB2HSL();this._INT2HEX()};Rd.Color.prototype._broadcastUpdate=function(){this.broadcast(Rd.Events.UPDATED)};Rd.Color.prototype.decimal=function(d){return this._handle("_decimal",d,Rd.Events.INT_UPDATED)};Rd.Color.prototype.hex=function(d){return this._handle("_hex",d,Rd.Events.HEX_UPDATED)};Rd.Color.prototype.red=function(d){return this._handle("_red",d,Rd.Events.RGB_UPDATED)};Rd.Color.prototype.green=function(d){return this._handle("_green",
d,Rd.Events.RGB_UPDATED)};Rd.Color.prototype.blue=function(d){return this._handle("_blue",d,Rd.Events.RGB_UPDATED)};Rd.Color.prototype.hue=function(d){return this._handle("_hue",d,Rd.Events.HSL_UPDATED)};Rd.Color.prototype.saturation=function(d){return this._handle("_saturation",d,Rd.Events.HSL_UPDATED)};Rd.Color.prototype.lightness=function(d){return this._handle("_lightness",d,Rd.Events.HSL_UPDATED)};Rd.Color.prototype.brightness=function(d){return this._handle("_brightness",d,Rd.Events.HSV_UPDATED)};
Rd.Color.prototype.alpha=function(d){return this._handle("_alpha",d)};Rd.Color.prototype._handle=function(d,c,h){"undefined"!=typeof this[d]&&"undefined"!=typeof c&&(c!=this[d]&&(this[d]=c,h&&this.broadcast(h)),this.broadcast(Rd.Events.UPDATED));return this[d]};Rd.Color.prototype.getHex=function(){return this._hex};Rd.Color.prototype.getRGB=function(){return"rgb("+[Rd.absround(this._red),Rd.absround(this._green),Rd.absround(this._blue)].join(", ")+")"};Rd.Color.prototype.getPRGB=function(){return"rgb("+
[Rd.absround(100*this._red/255)+"%",Rd.absround(100*this._green/255)+"%",Rd.absround(100*this._blue/255)+"%"].join(", ")+")"};Rd.Color.prototype.getRGBA=function(){return"rgba("+[Rd.absround(this._red),Rd.absround(this._green),Rd.absround(this._blue),this._alpha].join(", ")+")"};Rd.Color.prototype.getPRGBA=function(){return"rgba("+[Rd.absround(100*this._red/255)+"%",Rd.absround(100*this._green/255)+"%",Rd.absround(100*this._blue/255)+"%",this._alpha].join(", ")+")"};Rd.Color.prototype.getHSL=function(){return"hsl("+
[Rd.absround(this._hue),Rd.absround(this._saturation)+"%",Rd.absround(this._lightness)+"%"].join(", ")+")"};Rd.Color.prototype.getHSLA=function(){return"hsla("+[Rd.absround(this._hue),Rd.absround(this._saturation)+"%",Rd.absround(this._lightness)+"%",this._alpha].join(", ")+")"};Rd.Color.prototype.format=function(d){var c={r:this._red,g:this._green,b:this._blue,h:this._hue,s:this._saturation,l:this._lightness,v:this._brightness,a:this._alpha,x:this._hex,d:this._decimal},h;for(h in c)d=d.split("%"+
h+"%").join(c[h]);return d};Rd.Color.prototype.output=0;Rd.Color.HEX=0;Rd.Color.RGB=1;Rd.Color.PRGB=2;Rd.Color.RGBA=3;Rd.Color.PRGBA=4;Rd.Color.HSL=5;Rd.Color.HSLA=6;Rd.Color.INT=7;Rd.Color.prototype.toString=function(){switch(this.output){case 1:return this.getRGB();case 2:return this.getPRGB();case 3:return this.getRGBA();case 4:return this.getPRGBA();case 5:return this.getHSL();case 6:return this.getHSLA();case 7:return this._decimal}return this.getHex()};Rd.Color.prototype._listeners=null;Rd.Color.prototype._isSubscribed=
function(d){return null!=this._listeners[d]};Rd.Color.prototype.subscribe=function(d,c){this._isSubscribed(d)||(this._listeners[d]=[]);this._listeners[d].push(c)};Rd.Color.prototype.unsubscribe=function(d,c){if(this._isSubscribed(d))for(var h=this._listeners[d],f=0,k=h.length;f<k;f++)if(h[f]===c)return h.splice(f,1),this.unsubscribe(d,c)};Rd.Color.prototype.broadcast=function(d,c){if(this._isSubscribed(d)){d=this._listeners[d];for(var h=d.length,f=0;f<h;f++)d[f].apply(this,c)}};Rd.Color.prototype.tween=
function(d,c){c instanceof Rd.Color||(c=new Rd.Color(c));var h=+new Date,f=this;this.broadcast("tweenStart");var k=setInterval(function(){var n=Math.min(1,(+new Date-h)/d);f.interpolate(c,n);f.broadcast("tweenProgress");1==n&&(clearInterval(k),f.broadcast("tweenComplete"))},20);return k};Rd.Color.prototype.bind=function(d,c){var h=this;this.subscribe("updated",function(){d[c]=h.toString()})};Rd.Color.random=function(){return new Rd.Color(Rd.absround(16777215*Math.random()))};Rd.Color.bind=function(d,
c){var h=new Rd.Color(d[c]);h.bind(d,c);return h};var ae=lively.FreezerRuntime.recorderFor("lively.graphics/color.js");ae.floor=function(d){return Math.floor(255.99*d)};ae.pad=function(d,c,h){h=void 0===h?ae.arr.last:h;return[].concat($jscomp.arrayFromIterable(d),$jscomp.arrayFromIterable(Array(Math.max(c-d.length,0)).fill(h(d))))};ae.num=Nm;ae.obj=Ag;ae.arr=$f;ae.parse=Xv;ae.Rectangle=He;ae.rect=zm;ae.pt=xi;ae.Point=Lg;ae.rgbaRegex=/\s*rgba?\s*\(\s*(\d+)(%?)\s*,\s*(\d+)(%?)\s*,\s*(\d+)(%?)\s*(?:,\s*([0-9\.]+)\s*)?\)\s*/;
var HD=function(){};HD.prototype.offsets=function(){return null};HD.prototype.stepCount=function(){return 0};HD.prototype.stepSize=function(){return 0};HD.prototype.chord=function(d){var c=this,h=d.hue,f=d.saturation,k=d.brightness;return(this.offsets()||ae.arr.range(0,this.steps()).map(function(n){return n*c.stepSize()})).map(function(n){return ae.Color.hsb(h+n%360,f,k)})};$jscomp.global.Object.defineProperties(HD.prototype,{name:{configurable:!0,enumerable:!0,get:function(){return"Color Harmony"}}});
ae.ColorHarmony=HD;var ty=function(){return ae.ColorHarmony.apply(this,arguments)||this};$jscomp.inherits(ty,ae.ColorHarmony);ty.prototype.steps=function(){return 1};ty.prototype.stepSize=function(){return 180};$jscomp.global.Object.defineProperties(ty.prototype,{name:{configurable:!0,enumerable:!0,get:function(){return"Complement"}}});Da("b5",ty);ae.Complementary=ty;var uy=function(){return ae.ColorHarmony.apply(this,arguments)||this};$jscomp.inherits(uy,ae.ColorHarmony);uy.prototype.steps=function(){return 2};
uy.prototype.stepSize=function(){return 120};$jscomp.global.Object.defineProperties(uy.prototype,{name:{configurable:!0,enumerable:!0,get:function(){return"Triadic"}}});Da("b6",uy);ae.Triadic=uy;var MA=function(){return ae.ColorHarmony.apply(this,arguments)||this};$jscomp.inherits(MA,ae.ColorHarmony);MA.prototype.offsets=function(){return[0,60,180,240]};$jscomp.global.Object.defineProperties(MA.prototype,{name:{configurable:!0,enumerable:!0,get:function(){return"Tetradic"}}});Da("b7",MA);ae.Tetradic=
MA;var vy=function(){return ae.ColorHarmony.apply(this,arguments)||this};$jscomp.inherits(vy,ae.ColorHarmony);vy.prototype.steps=function(){return 3};vy.prototype.stepSize=function(){return 90};$jscomp.global.Object.defineProperties(vy.prototype,{name:{configurable:!0,enumerable:!0,get:function(){return"Quadratic"}}});Da("b8",vy);ae.Quadratic=vy;var wy=function(){return ae.ColorHarmony.apply(this,arguments)||this};$jscomp.inherits(wy,ae.ColorHarmony);wy.prototype.steps=function(){return 5};wy.prototype.offsets=
function(){return[-60,-30,0,30,60]};$jscomp.global.Object.defineProperties(wy.prototype,{name:{configurable:!0,enumerable:!0,get:function(){return"Analogous"}}});Da("b9",wy);ae.Analogous=wy;var NA=function(){return ae.ColorHarmony.apply(this,arguments)||this};$jscomp.inherits(NA,ae.ColorHarmony);NA.prototype.offsets=function(){return[-30,-15,0,15,30]};$jscomp.global.Object.defineProperties(NA.prototype,{name:{configurable:!0,enumerable:!0,get:function(){return"Neutral"}}});Da("ba",NA);ae.Neutral=
NA;var Fg=function(d,c,h,f){this.r=d||0;this.g=c||0;this.b=h||0;this.a=f||(0===f?0:1)};Fg.random=function(d,c){void 0===d&&(d=0);void 0===c&&(c=255);return ae.Color.rgb(ae.num.random(d,c),ae.num.random(d,c),ae.num.random(d,c))};Fg.hsb=function(d,c,h){if(0==c)return new ae.Color(h,h,h);var f=d%360/60;d=Math.floor(f);var k=f-d;f=(1-c)*h;var n=(1-c*k)*h;c=(1-c*(1-k))*h;switch(d){case 0:return new ae.Color(h,c,f);case 1:return new ae.Color(n,h,f);case 2:return new ae.Color(f,h,c);case 3:return new ae.Color(f,
n,h);case 4:return new ae.Color(c,f,h);case 5:return new ae.Color(h,f,n);default:return new ae.Color(0,0,0)}};Fg.wheel=function(d){return ae.Color.wheelHsb(void 0===d?10:d,0,.9,.7)};Fg.wheelHsb=function(d,c,h,f){for(var k=Array(d),n=360/Math.max(d,1),b=0;b<d;b++)k[b]=ae.Color.hsb(c+b*n,h,f);return k};Fg.rgb=function(d,c,h){return new ae.Color(d/255,c/255,h/255)};Fg.rgbHex=function(d){return(d=this.parseHex(d))&&0<=d[0]&&0<=d[1]&&0<=d[2]?new ae.Color(d[0],d[1],d[2]):null};Fg.rgba=function(d,c,h,f){return new ae.Color(d/
255,c/255,h/255,f)};Fg.fromLiteral=function(d){return new ae.Color(d.r,d.g,d.b,d.a)};Fg.fromTuple=function(d){return new ae.Color(d[0],d[1],d[2],d[3])};Fg.fromTuple8Bit=function(d){return new ae.Color(d[0]/255,d[1]/255,d[2]/255,d[3]/255)};Fg.fromString=function(d){return d&&"none"!==d?this.fromTuple(this.parse(d)):null};Fg.parse=function(d){return d&&"none"!==d?(d=ae.parse(d),[d.red,d.green,d.blue,d.alpha]):null};Fg.parseRGB=function(d){var c=d.match(this.rgbaRegex);if(c){d=parseInt(c[1])/(c[2]?100:
255);var h=parseInt(c[3])/(c[4]?100:255),f=parseInt(c[5])/(c[6]?100:255);c=c[7]?parseFloat(c[7]):1;return[d,h,f,c]}return null};Fg.parseHex=function(d){var c;var h="";for(c=0;c<d.length;c++){var f=d[c].toLowerCase();if("a"==f||"b"==f||"c"==f||"d"==f||"e"==f||"f"==f||"0"==f||"1"==f||"2"==f||"3"==f||"4"==f||"5"==f||"6"==f||"7"==f||"8"==f||"9"==f)h+=f}if(6==h.length)c=h.substring(0,2),d=h.substring(2,4),h=h.substring(4,6);else if(3==h.length)c=h.substring(0,1),c+=c,d=h.substring(1,2),d+=d,h=h.substring(2,
3),h+=h;else return null;c=parseInt(c,16)/255;d=parseInt(d,16)/255;h=parseInt(h,16)/255;return[c,d,h]};Fg.prototype.grayValue=function(){return(this.r+this.g+this.b)/3};Fg.prototype.equals=function(d){return d?this.r===d.r&&this.g===d.g&&this.b===d.b&&this.a===d.a:!1};Fg.prototype.darker=function(d){var c=this.mixedWith(ae.Color.black,.5);return 1<d?c.darker(d-1):c};Fg.prototype.lighter=function(d){if(0==d)return this;var c=this.mixedWith(ae.Color.white,.5);return 1<d?c.lighter(d-1):c};Fg.prototype.interpolate=
function(d,c){if(c.isGradient)return c.interpolate(1-d,this);c=ae.obj.isArray(c)?c:c.toTuple();return ae.Color.fromTuple(this.toTuple().map(function(h,f){return ae.num.interpolate(d,h,c[f])}))};Fg.prototype.toString=function(){return 1===this.a?"rgb("+ae.floor(this.r)+","+ae.floor(this.g)+","+ae.floor(this.b)+")":this.toRGBAString()};Fg.prototype.toRGBAString=function(){return"rgba("+Math.floor(255.99*this.r)+","+Math.floor(255.99*this.g)+","+Math.floor(255.99*this.b)+","+this.a+")"};Fg.prototype.toHexString=
function(){function d(c){for(;2>c.length;)c="0"+c;return c}return d(Math.floor(255.99*this.r).toString(16))+d(Math.floor(255.99*this.g).toString(16))+d(Math.floor(255.99*this.b).toString(16))};Fg.prototype.toTuple=function(){return[this.r,this.g,this.b,this.a]};Fg.prototype.toTuple8Bit=function(){return[255*this.r,255*this.g,255*this.b,255*this.a]};Fg.prototype.toHSB=function(){var d=Math.max(this.r,this.g,this.b),c=Math.min(this.r,this.g,this.b),h;d==c?h=0:d==this.r?h=(this.g-this.b)/(d-c)*60:d==
this.g?h=60*(2+(this.b-this.r)/(d-c)):d==this.b&&(h=60*(4+(this.r-this.g)/(d-c)));return[(h+360)%360,0==d?0:(d-c)/d,d]};Fg.prototype.withA=function(d){return new ae.Color(this.r,this.g,this.b,d)};Fg.prototype.mixedWith=function(d,c){var h=1-c;return new ae.Color(this.r*c+d.r*h,this.g*c+d.g*h,this.b*c+d.b*h,this.a*c+d.a*h)};Fg.prototype.invert=function(){return ae.Color.rgb(255*(1-this.r),255*(1-this.g),255*(1-this.b))};Fg.prototype.toCSSString=function(){return this.toRGBAString()};Fg.prototype.__serialize__=
function(){return{__expr__:"Color."+this.toString(),bindings:{"lively.graphics/color.js":["Color"]}}};Fg.prototype.toJSExpr=function(){return"Color."+(this.name||this.toString())};$jscomp.global.Object.defineProperties(Fg.prototype,{isColor:{configurable:!0,enumerable:!0,get:function(){return!0}},name:{configurable:!0,enumerable:!0,get:function(){var d=this,c=ae.Color.named;return Object.keys(c).find(function(h){return c[h].equals(d)})}}});$jscomp.global.Object.defineProperties(Fg,{rgbaRegex:{configurable:!0,
enumerable:!0,get:function(){return ae.rgbaRegex}},named:{configurable:!0,enumerable:!0,get:function(){return this._named?this._named:this._named={black:new ae.Color(0,0,0),almostBlack:ae.Color.rgb(64,64,64),white:new ae.Color(1,1,1),gray:new ae.Color(.8,.8,.8),red:new ae.Color(.8,0,0),green:new ae.Color(0,.8,0),yellow:new ae.Color(.8,.8,0),blue:new ae.Color(0,0,.8),purple:new ae.Color(.5,0,.5),magenta:new ae.Color(1,0,1),pink:ae.Color.rgb(255,30,153),turquoise:ae.Color.rgb(0,240,255),tangerine:ae.Color.rgb(242,
133,0),orange:ae.Color.rgb(255,153,0),cyan:ae.Color.rgb(0,255,255),brown:ae.Color.rgb(182,67,0),limeGreen:ae.Color.rgb(51,255,0),darkGray:ae.Color.rgb(102,102,102),lightGray:ae.Color.rgb(230,230,230),veryLightGray:ae.Color.rgb(243,243,243),transparent:ae.Color.rgba(0,0,0,0),lively:ae.Color.rgb(245,124,0)}}}});Da("C",Fg);ae.Color=Fg;Object.assign(ae.Color,ae.Color.named);var Nw=function(d){this.stops=d?d.map(function(c){return c}):[]};Nw.create=function(d){var c=[],h;for(h in d)c.push({offset:Number(h),
color:d[h]});return new this({stops:c})};Nw.parse=function(d){return d.startsWith("radial-gradient")?ae.RadialGradient.parse(d):d.startsWith("linear-gradient")?ae.LinearGradient.parse(d):ae.Color.fromTuple(ae.Color.parse(d))};Nw.prototype.equals=function(d){return d&&d.isGradient?this.toString()==d.toString():!1};Nw.prototype.getStopsLighter=function(d){return ae.arr.collect(this.stops,function(c){return{offset:c.offset,color:c.color.lighter(d)}})};Nw.prototype.getStopsDarker=function(d){return ae.arr.collect(this.stops,
function(c){return{offset:c.offset,color:c.color.darker(d)}})};Nw.prototype.interpolateStops=function(d,c){var h=ae.pad(this.stops,c.length);c=ae.pad(c,this.stops.length);var f=[],k;for(k=0;k<h.length;k++){var n=h[k];var b=n.color;var e=n.offset;var m=c[k];n=m.color;m=m.offset;f.push({color:b.interpolate(d,n),offset:ae.num.interpolate(d,e,m)})}return f};Nw.prototype.__serialize__=function(){return{__expr__:this.toJSExpr(),bindings:{"lively.graphics/color.js":["Color","RadialGradient","LinearGradient"],
"lively.graphics/geometry-2d.js":["pt","rect"]}}};$jscomp.global.Object.defineProperties(Nw.prototype,{isGradient:{configurable:!0,enumerable:!0,get:function(){return!0}}});ae.Gradient=Nw;var Bn=function(d){var c=void 0===d?{}:d;d=c.vector;c=ae.Gradient.call(this,c.stops)||this;c.vector=d;return c};$jscomp.inherits(Bn,ae.Gradient);Bn.parse=function(d){d.match(/\((.*)\)/)[1].split(",")};Bn.prototype.angleToRect=function(d){return ae.Point.polar(1,d).extentAsRectangle().withCenter(ae.pt(.5,.5))};Bn.prototype.vectorAsAngle=
function(){return this.vector.extent().theta()};Bn.prototype.toString=function(){return this.toCSSString()};Bn.prototype.lighter=function(d){return new this.constructor({stops:this.getStopsLighter(d),vector:this.vector})};Bn.prototype.darker=function(){return new this.constructor({stops:this.getStopsDarker(),vector:this.vector})};Bn.prototype.interpolate=function(d,c,h){h=void 0===h?{width:1E3,height:1E3}:h;c.isColor&&(c=new ae.LinearGradient({vector:this.vector,stops:this.stops.map(function(f){return{color:c,
offset:f.offset}})}));if("radialGradient"==c.type){if(.5>d)return new ae.LinearGradient({vector:this.vector.interpolate(d,ae.rect(0,0,0,1)),stops:this.interpolateStops(d,c.stops.map(function(f,k){return{color:f.color,offset:1}}))});if(.5<=d)return new ae.RadialGradient({stops:this.interpolateStops(d,c.stops),focus:ae.pt(.5,0).interpolate(d,c.focus),bounds:ae.rect(0,0,100*h.width,2*h.height).interpolate(d,c.bounds)})}return new ae.LinearGradient({stops:this.interpolateStops(d,c.stops),vector:this.vector.interpolate(d,
c.vector)})};Bn.prototype.toCSSString=function(){var d="linear-gradient("+(ae.num.toDegrees(this.vectorAsAngle())+90+"deg,")+this.stops.map(function(c){return c.color.toRGBAString()+" "+((100*c.offset).toFixed()+"%")}).join(",");return d+")"};Bn.prototype.toJSExpr=function(){return"new LinearGradient({stops: ["+this.stops.map(function(d){return"{offset: "+d.offset+", color: "+d.color.toJSExpr()+"}"}).join(", ")+"], vector: "+this.vector+"})"};$jscomp.global.Object.defineProperties(Bn.prototype,{type:{configurable:!0,
enumerable:!0,get:function(){return"linearGradient"}},vectors:{configurable:!0,enumerable:!0,get:function(){return{northsouth:ae.rect(ae.pt(0,0),ae.pt(0,1)),northeast:ae.rect(ae.pt(1,0),ae.pt(0,1)),westeast:ae.rect(ae.pt(1,0),ae.pt(0,0)),southeast:ae.rect(ae.pt(1,1),ae.pt(0,0)),southnorth:ae.rect(ae.pt(0,1),ae.pt(0,0)),southwest:ae.rect(ae.pt(0,1),ae.pt(1,0)),eastwest:ae.rect(ae.pt(0,0),ae.pt(1,0)),northwest:ae.rect(ae.pt(0,0),ae.pt(1,1))}}},vector:{configurable:!0,enumerable:!0,get:function(){return this._vector},
set:function(d){this._vector=d?"string"===typeof d?this.vectors[d.toLowerCase()]:"number"===typeof d?this.angleToRect(d):d:this.vectors.northsouth}}});Da("ah",Bn);ae.LinearGradient=Bn;var Lp=function(d){var c=void 0===d?{}:d;d=c.focus;var h=c.bounds;c=ae.Gradient.call(this,c.stops)||this;c.focus=d||ae.pt(.5,.5);c.bounds=h||new ae.Rectangle(0,0,20,20);return c};$jscomp.inherits(Lp,ae.Gradient);Lp.parse=function(d){d.match(/\((.*)\)/)[1].split(",")};Lp.prototype.toString=function(){return this.toCSSString()};
Lp.prototype.lighter=function(d){return new this.constructor({stops:this.getStopsLighter(d),focus:this.focus,bounds:this.bounds})};Lp.prototype.darker=function(){return new this.constructor({stops:this.getStopsDarker(),focus:this.focus,bounds:this.bounds})};Lp.prototype.interpolate=function(d,c,h){h=void 0===h?{height:1E3,width:1E3}:h;c.isColor&&(c=new ae.RadialGradient({vector:this.vector,bounds:this.bounds,stops:this.stops.map(function(f){return{color:c,offset:f.offset}})}));return"linearGradient"==
c.type?c.interpolate(1-d,this,h):new ae.RadialGradient({bounds:this.bounds.interpolate(d,c.bounds),stops:this.interpolateStops(d,c.stops),focus:this.focus.interpolate(d,c.focus)})};Lp.prototype.toCSSString=function(){var d=this.focus.scaleBy(100),c=this.bounds.extent();d="radial-gradient("+c.x/2+"px "+c.y/2+"px at "+d.x+"% "+d.y+"%";for(c=0;c<this.stops.length;c++)d+=","+this.stops[c].color.toRGBAString()+" "+((100*this.stops[c].offset).toFixed()+"%");return d+")"};Lp.prototype.toJSExpr=function(){return"new RadialGradient({stops: ["+
this.stops.map(function(d){return"{offset: "+d.offset+", color: "+d.color.toJSExpr()+"}"}).join(", ")+"], bounds: "+this.bounds+", focus: "+this.focus.toString(!1)+"})"};$jscomp.global.Object.defineProperties(Lp.prototype,{type:{configurable:!0,enumerable:!0,get:function(){return"radialGradient"}}});Da("af",Lp);ae.RadialGradient=Lp;var yG=Da("bb","#1abc9c #e8f8f5 #d1f2eb #a3e4d7 #76d7c4 #48c9b0 #1abc9c #17a589 #148f77 #117864 #0e6251 #16a085 #e8f6f3 #d0ece7 #a2d9ce #73c6b6 #45b39d #16a085 #138d75 #117a65 #0e6655 #0b5345 #2ecc71 #eafaf1 #d5f5e3 #abebc6 #82e0aa #58d68d #2ecc71 #28b463 #239b56 #1d8348 #186a3b #27ae60 #e9f7ef #d4efdf #a9dfbf #7dcea0 #52be80 #27ae60 #229954 #1e8449 #196f3d #145a32 #3498db #ebf5fb #d6eaf8 #aed6f1 #85c1e9 #5dade2 #3498db #2e86c1 #2874a6 #21618c #1b4f72 #2980b9 #eaf2f8 #d4e6f1 #a9cce3 #7fb3d5 #5499c7 #2980b9 #2471a3 #1f618d #1a5276 #154360 #9b59b6 #f5eef8 #ebdef0 #d7bde2 #c39bd3 #af7ac5 #9b59b6 #884ea0 #76448a #633974 #512e5f #8e44ad #f4ecf7 #e8daef #d2b4de #bb8fce #a569bd #8e44ad #7d3c98 #6c3483 #5b2c6f #4a235a #34495e #ebedef #d6dbdf #aeb6bf #85929e #5d6d7e #34495e #2e4053 #283747 #212f3c #1b2631 #2c3e50 #eaecee #d5d8dc #abb2b9 #808b96 #566573 #2c3e50 #273746 #212f3d #1c2833 #17202a #f1c40f #fef9e7 #fcf3cf #f9e79f #f7dc6f #f4d03f #f1c40f #d4ac0d #b7950b #9a7d0a #7d6608 #f39c12 #fef5e7 #fdebd0 #fad7a0 #f8c471 #f5b041 #f39c12 #d68910 #b9770e #9c640c #7e5109 #e67e22 #fdf2e9 #fae5d3 #f5cba7 #f0b27a #eb984e #e67e22 #ca6f1e #af601a #935116 #784212 #d35400 #fbeee6 #f6ddcc #edbb99 #e59866 #dc7633 #d35400 #ba4a00 #a04000 #873600 #6e2c00 #e74c3c #fdedec #fadbd8 #f5b7b1 #f1948a #ec7063 #e74c3c #cb4335 #b03a2e #943126 #78281f #c0392b #f9ebea #f2d7d5 #e6b0aa #d98880 #cd6155 #c0392b #a93226 #922b21 #7b241c #641e16 #ecf0f1 #fdfefe #fbfcfc #f7f9f9 #f4f6f7 #f0f3f4 #ecf0f1 #d0d3d4 #b3b6b7 #979a9a #7b7d7d #bdc3c7 #f8f9f9 #f2f3f4 #e5e7e9 #d7dbdd #cacfd2 #bdc3c7 #a6acaf #909497 #797d7f #626567 #95a5a6 #f4f6f6 #eaeded #d5dbdb #bfc9ca #aab7b8 #95a5a6 #839192 #717d7e #5f6a6a #4d5656 #7f8c8d #f2f4f4 #e5e8e8 #ccd1d1 #b2babb #99a3a4 #7f8c8d #707b7c #616a6b #515a5a #424949".split(" "));
ae.flatDesignColors=yG;ae.flatDesignColors=yG;ae.flatDesignColors=yG;var zG=Da("bc","#f44336 #ffebee #ffcdd2 #ef9a9a #e57373 #ef5350 #f44336 #e53935 #d32f2f #c62828 #b71c1c #ff8a80 #ff5252 #ff1744 #d50000 #e91e63 #fce4ec #f8bbd0 #f48fb1 #f06292 #ec407a #e91e63 #d81b60 #c2185b #ad1457 #880e4f #ff80ab #ff4081 #f50057 #c51162 #9c27b0 #f3e5f5 #e1bee7 #ce93d8 #ba68c8 #ab47bc #9c27b0 #8e24aa #7b1fa2 #6a1b9a #4a148c #ea80fc #e040fb #d500f9 #aa00ff #673ab7 #ede7f6 #d1c4e9 #b39ddb #9575cd #7e57c2 #673ab7 #5e35b1 #512da8 #4527a0 #311b92 #b388ff #7c4dff #651fff #6200ea #3f51b5 #e8eaf6 #c5cae9 #9fa8da #7986cb #5c6bc0 #3f51b5 #3949ab #303f9f #283593 #1a237e #8c9eff #536dfe #3d5afe #304ffe #2196f3 #e3f2fd #bbdefb #90caf9 #64b5f6 #42a5f5 #2196f3 #1e88e5 #1976d2 #1565c0 #0d47a1 #82b1ff #448aff #2979ff #2962ff #03a9f4 #e1f5fe #b3e5fc #81d4fa #4fc3f7 #29b6f6 #03a9f4 #039be5 #0288d1 #0277bd #01579b #80d8ff #40c4ff #00b0ff #0091ea #00bcd4 #e0f7fa #b2ebf2 #80deea #4dd0e1 #26c6da #00bcd4 #00acc1 #0097a7 #00838f #006064 #84ffff #18ffff #00e5ff #00b8d4 #009688 #e0f2f1 #b2dfdb #80cbc4 #4db6ac #26a69a #009688 #00897b #00796b #00695c #004d40 #a7ffeb #64ffda #1de9b6 #00bfa5 #4caf50 #e8f5e9 #c8e6c9 #a5d6a7 #81c784 #66bb6a #4caf50 #43a047 #388e3c #2e7d32 #1b5e20 #b9f6ca #69f0ae #00e676 #00c853 #8bc34a #f1f8e9 #dcedc8 #c5e1a5 #aed581 #9ccc65 #8bc34a #7cb342 #689f38 #558b2f #33691e #ccff90 #b2ff59 #76ff03 #64dd17 #cddc39 #f9fbe7 #f0f4c3 #e6ee9c #dce775 #d4e157 #cddc39 #c0ca33 #afb42b #9e9d24 #827717 #f4ff81 #eeff41 #c6ff00 #aeea00 #ffeb3b #fffde7 #fff9c4 #fff59d #fff176 #ffee58 #ffeb3b #fdd835 #fbc02d #f9a825 #f57f17 #ffff8d #ffff00 #ffea00 #ffd600 #ffc107 #fff8e1 #ffecb3 #ffe082 #ffd54f #ffca28 #ffc107 #ffb300 #ffa000 #ff8f00 #ff6f00 #ffe57f #ffd740 #ffc400 #ffab00 #ff9800 #fff3e0 #ffe0b2 #ffcc80 #ffb74d #ffa726 #ff9800 #fb8c00 #f57c00 #ef6c00 #e65100 #ffd180 #ffab40 #ff9100 #ff6d00 #ff5722 #fbe9e7 #ffccbc #ffab91 #ff8a65 #ff7043 #ff5722 #f4511e #e64a19 #d84315 #bf360c #ff9e80 #ff6e40 #ff3d00 #dd2c00 #795548 #efebe9 #d7ccc8 #bcaaa4 #a1887f #8d6e63 #795548 #6d4c41 #5d4037 #4e342e #3e2723 #9e9e9e #fafafa #f5f5f5 #eeeeee #e0e0e0 #bdbdbd #9e9e9e #757575 #616161 #424242 #212121 #607d8b #eceff1 #cfd8dc #b0bec5 #90a4ae #78909c #607d8b #546e7a #455a64 #37474f #263238 #ffffff #000000".split(" "));
ae.materialDesignColors=zG;ae.materialDesignColors=zG;ae.materialDesignColors=zG;var AG=Da("bd","ccff00 ccff33 ccff66 ccff99 ccffcc ccffff ffffff ffffcc ffff99 ffff66 ffff33 ffff00 cccc00 cccc33 cccc66 cccc99 cccccc ccccff ffccff ffcccc ffcc99 ffcc66 ffcc33 ffcc00 cc9900 cc9933 cc9966 cc9999 cc99cc cc99ff ff99ff ff99cc ff9999 ff9966 ff9933 ff9900 cc6600 cc6633 cc6666 cc6699 cc66cc cc66ff ff66ff ff66cc ff6699 ff6666 ff6633 ff6600 cc3300 cc3333 cc3366 cc3399 cc33cc cc33ff ff33ff ff33cc ff3399 ff3366 ff3333 ff3300 cc0000 cc0033 cc0066 cc0099 cc00cc cc00ff ff00ff ff00cc ff0099 ff0066 ff0033 ff0000 660000 660033 660066 660099 6600cc 6600ff 9900ff 9900cc 990099 990066 990033 990000 663300 663333 663366 663399 6633cc 6633ff 9933ff 9933cc 993399 993366 993333 993300 666600 666633 666666 666699 6666cc 6666ff 9966ff 9966cc 996699 996666 996633 996600 669900 669933 669966 669999 6699cc 6699ff 9999ff 9999cc 999999 999966 999933 999900 66cc00 66cc33 66cc66 66cc99 66cccc 66ccff 99ccff 99cccc 99cc99 99cc66 99cc33 99cc00 66ff00 66ff33 66ff66 66ff99 66ffcc 66ffff 99ffff 99ffcc 99ff99 99ff66 99ff33 99ff00 00ff00 00ff33 00ff66 00ff99 00ffcc 00ffff 33ffff 33ffcc 33ff99 33ff66 33ff33 33ff00 00cc00 00cc33 00cc66 00cc99 00cccc 00ccff 33ccff 33cccc 33cc99 33cc66 33cc33 33cc00 009900 009933 009966 009999 0099cc 0099ff 3399ff 3399cc 339999 339966 339933 339900 006600 006633 006666 006699 0066cc 0066ff 3366ff 3366cc 336699 336666 336633 336600 003300 003333 003366 003399 0033cc 0033ff 3333ff 3333cc 333399 333366 333333 333300 000000 000033 000066 000099 0000cc 0000ff 3300ff 3300cc 330099 330066 330033 330000".split(" "));
ae.webSafeColors=AG;ae.webSafeColors=AG;ae.webSafeColors=AG;var kha=Object.freeze({__proto__:null,Complementary:ty,Triadic:uy,Tetradic:MA,Quadratic:vy,Analogous:wy,Neutral:NA,Color:Fg,LinearGradient:Bn,RadialGradient:Lp,flatDesignColors:yG,materialDesignColors:zG,webSafeColors:AG}),T4=lively.FreezerRuntime.recorderFor("lively.ast/generated/estree-visitor.js"),Fe=function(){};Fe.prototype.accept=function(d,c,h){if(!d)throw Error("Undefined AST node in Visitor.accept:\n  "+h.join(".")+"\n  "+d);if(!d.type)throw Error("Strangee AST node without type in Visitor.accept:\n  "+
h.join(".")+"\n  "+JSON.stringify(d));switch(d.type){case "Node":return this.visitNode(d,c,h);case "SourceLocation":return this.visitSourceLocation(d,c,h);case "Position":return this.visitPosition(d,c,h);case "Program":return this.visitProgram(d,c,h);case "Function":return this.visitFunction(d,c,h);case "Statement":return this.visitStatement(d,c,h);case "Directive":return this.visitDirective(d,c,h);case "SwitchCase":return this.visitSwitchCase(d,c,h);case "CatchClause":return this.visitCatchClause(d,
c,h);case "VariableDeclarator":return this.visitVariableDeclarator(d,c,h);case "Expression":return this.visitExpression(d,c,h);case "Property":return this.visitProperty(d,c,h);case "Pattern":return this.visitPattern(d,c,h);case "Super":return this.visitSuper(d,c,h);case "SpreadElement":return this.visitSpreadElement(d,c,h);case "TemplateElement":return this.visitTemplateElement(d,c,h);case "Class":return this.visitClass(d,c,h);case "ClassBody":return this.visitClassBody(d,c,h);case "MethodDefinition":return this.visitMethodDefinition(d,
c,h);case "ModuleDeclaration":return this.visitModuleDeclaration(d,c,h);case "ModuleSpecifier":return this.visitModuleSpecifier(d,c,h);case "JSXEmptyExpression":return this.visitJSXEmptyExpression(d,c,h);case "JSXExpressionContainer":return this.visitJSXExpressionContainer(d,c,h);case "JSXSpreadChild":return this.visitJSXSpreadChild(d,c,h);case "JSXBoundaryElement":return this.visitJSXBoundaryElement(d,c,h);case "JSXAttribute":return this.visitJSXAttribute(d,c,h);case "JSXText":return this.visitJSXText(d,
c,h);case "JSXOpeningFragment":return this.visitJSXOpeningFragment(d,c,h);case "JSXClosingFragment":return this.visitJSXClosingFragment(d,c,h);case "Identifier":return this.visitIdentifier(d,c,h);case "Literal":return this.visitLiteral(d,c,h);case "ExpressionStatement":return this.visitExpressionStatement(d,c,h);case "BlockStatement":return this.visitBlockStatement(d,c,h);case "EmptyStatement":return this.visitEmptyStatement(d,c,h);case "DebuggerStatement":return this.visitDebuggerStatement(d,c,h);
case "WithStatement":return this.visitWithStatement(d,c,h);case "ReturnStatement":return this.visitReturnStatement(d,c,h);case "LabeledStatement":return this.visitLabeledStatement(d,c,h);case "BreakStatement":return this.visitBreakStatement(d,c,h);case "ContinueStatement":return this.visitContinueStatement(d,c,h);case "IfStatement":return this.visitIfStatement(d,c,h);case "SwitchStatement":return this.visitSwitchStatement(d,c,h);case "ThrowStatement":return this.visitThrowStatement(d,c,h);case "TryStatement":return this.visitTryStatement(d,
c,h);case "WhileStatement":return this.visitWhileStatement(d,c,h);case "DoWhileStatement":return this.visitDoWhileStatement(d,c,h);case "ForStatement":return this.visitForStatement(d,c,h);case "ForInStatement":return this.visitForInStatement(d,c,h);case "Declaration":return this.visitDeclaration(d,c,h);case "ThisExpression":return this.visitThisExpression(d,c,h);case "ArrayExpression":return this.visitArrayExpression(d,c,h);case "ObjectExpression":return this.visitObjectExpression(d,c,h);case "FunctionExpression":return this.visitFunctionExpression(d,
c,h);case "UnaryExpression":return this.visitUnaryExpression(d,c,h);case "UpdateExpression":return this.visitUpdateExpression(d,c,h);case "BinaryExpression":return this.visitBinaryExpression(d,c,h);case "AssignmentExpression":return this.visitAssignmentExpression(d,c,h);case "LogicalExpression":return this.visitLogicalExpression(d,c,h);case "MemberExpression":return this.visitMemberExpression(d,c,h);case "ConditionalExpression":return this.visitConditionalExpression(d,c,h);case "CallExpression":return this.visitCallExpression(d,
c,h);case "NewExpression":return this.visitNewExpression(d,c,h);case "SequenceExpression":return this.visitSequenceExpression(d,c,h);case "ArrowFunctionExpression":return this.visitArrowFunctionExpression(d,c,h);case "YieldExpression":return this.visitYieldExpression(d,c,h);case "TemplateLiteral":return this.visitTemplateLiteral(d,c,h);case "TaggedTemplateExpression":return this.visitTaggedTemplateExpression(d,c,h);case "AssignmentProperty":return this.visitAssignmentProperty(d,c,h);case "ObjectPattern":return this.visitObjectPattern(d,
c,h);case "ArrayPattern":return this.visitArrayPattern(d,c,h);case "RestElement":return this.visitRestElement(d,c,h);case "AssignmentPattern":return this.visitAssignmentPattern(d,c,h);case "ClassExpression":return this.visitClassExpression(d,c,h);case "MetaProperty":return this.visitMetaProperty(d,c,h);case "ImportDeclaration":return this.visitImportDeclaration(d,c,h);case "ImportSpecifier":return this.visitImportSpecifier(d,c,h);case "ImportDefaultSpecifier":return this.visitImportDefaultSpecifier(d,
c,h);case "ImportNamespaceSpecifier":return this.visitImportNamespaceSpecifier(d,c,h);case "ExportNamedDeclaration":return this.visitExportNamedDeclaration(d,c,h);case "ExportSpecifier":return this.visitExportSpecifier(d,c,h);case "AnonymousDefaultExportedFunctionDeclaration":return this.visitAnonymousDefaultExportedFunctionDeclaration(d,c,h);case "AnonymousDefaultExportedClassDeclaration":return this.visitAnonymousDefaultExportedClassDeclaration(d,c,h);case "ExportDefaultDeclaration":return this.visitExportDefaultDeclaration(d,
c,h);case "ExportAllDeclaration":return this.visitExportAllDeclaration(d,c,h);case "AwaitExpression":return this.visitAwaitExpression(d,c,h);case "JSXMemberExpression":return this.visitJSXMemberExpression(d,c,h);case "JSXNamespacedName":return this.visitJSXNamespacedName(d,c,h);case "JSXOpeningElement":return this.visitJSXOpeningElement(d,c,h);case "JSXClosingElement":return this.visitJSXClosingElement(d,c,h);case "JSXSpreadAttribute":return this.visitJSXSpreadAttribute(d,c,h);case "JSXElement":return this.visitJSXElement(d,
c,h);case "JSXFragment":return this.visitJSXFragment(d,c,h);case "ImportExpression":return this.visitImportExpression(d,c,h);case "RegExpLiteral":return this.visitRegExpLiteral(d,c,h);case "FunctionBody":return this.visitFunctionBody(d,c,h);case "FunctionDeclaration":return this.visitFunctionDeclaration(d,c,h);case "VariableDeclaration":return this.visitVariableDeclaration(d,c,h);case "ForOfStatement":return this.visitForOfStatement(d,c,h);case "ClassDeclaration":return this.visitClassDeclaration(d,
c,h);case "JSXIdentifier":return this.visitJSXIdentifier(d,c,h);case "BigIntLiteral":return this.visitBigIntLiteral(d,c,h)}throw Error("No visit function in AST visitor Visitor for:\n  "+h.join(".")+"\n  "+JSON.stringify(d));};Fe.prototype.visitNode=function(d,c,h){return d};Fe.prototype.visitSourceLocation=function(d,c,h){d.start=this.accept(d.start,c,h.concat(["start"]));d.end=this.accept(d.end,c,h.concat(["end"]));return d};Fe.prototype.visitPosition=function(d,c,h){return d};Fe.prototype.visitProgram=
function(d,c,h){for(var f=[],k=0;k<d.body.length;k++){var n=d.body[k];n=n?this.accept(n,c,h.concat(["body",k])):n;Array.isArray(n)?f.push.apply(f,n):f.push(n)}d.body=f;return d};Fe.prototype.visitFunction=function(d,c,h){d.id&&(d.id=this.accept(d.id,c,h.concat(["id"])));for(var f=[],k=0;k<d.params.length;k++){var n=d.params[k];n=n?this.accept(n,c,h.concat(["params",k])):n;Array.isArray(n)?f.push.apply(f,n):f.push(n)}d.params=f;d.body=this.accept(d.body,c,h.concat(["body"]));return d};Fe.prototype.visitStatement=
function(d,c,h){return d};Fe.prototype.visitDirective=function(d,c,h){d.expression=this.accept(d.expression,c,h.concat(["expression"]));return d};Fe.prototype.visitSwitchCase=function(d,c,h){d.test&&(d.test=this.accept(d.test,c,h.concat(["test"])));for(var f=[],k=0;k<d.consequent.length;k++){var n=d.consequent[k];n=n?this.accept(n,c,h.concat(["consequent",k])):n;Array.isArray(n)?f.push.apply(f,n):f.push(n)}d.consequent=f;return d};Fe.prototype.visitCatchClause=function(d,c,h){d.param&&(d.param=this.accept(d.param,
c,h.concat(["param"])));d.body=this.accept(d.body,c,h.concat(["body"]));return d};Fe.prototype.visitVariableDeclarator=function(d,c,h){d.id=this.accept(d.id,c,h.concat(["id"]));d.init&&(d.init=this.accept(d.init,c,h.concat(["init"])));return d};Fe.prototype.visitExpression=function(d,c,h){return d};Fe.prototype.visitProperty=function(d,c,h){d.key=this.accept(d.key,c,h.concat(["key"]));d.value=this.accept(d.value,c,h.concat(["value"]));return d};Fe.prototype.visitPattern=function(d,c,h){return d};
Fe.prototype.visitSuper=function(d,c,h){return d};Fe.prototype.visitSpreadElement=function(d,c,h){d.argument=this.accept(d.argument,c,h.concat(["argument"]));return d};Fe.prototype.visitTemplateElement=function(d,c,h){return d};Fe.prototype.visitClass=function(d,c,h){d.id&&(d.id=this.accept(d.id,c,h.concat(["id"])));d.superClass&&(d.superClass=this.accept(d.superClass,c,h.concat(["superClass"])));d.body=this.accept(d.body,c,h.concat(["body"]));return d};Fe.prototype.visitClassBody=function(d,c,h){for(var f=
[],k=0;k<d.body.length;k++){var n=d.body[k];n=n?this.accept(n,c,h.concat(["body",k])):n;Array.isArray(n)?f.push.apply(f,n):f.push(n)}d.body=f;return d};Fe.prototype.visitMethodDefinition=function(d,c,h){d.key=this.accept(d.key,c,h.concat(["key"]));d.value=this.accept(d.value,c,h.concat(["value"]));return d};Fe.prototype.visitModuleDeclaration=function(d,c,h){return d};Fe.prototype.visitModuleSpecifier=function(d,c,h){d.local=this.accept(d.local,c,h.concat(["local"]));return d};Fe.prototype.visitJSXEmptyExpression=
function(d,c,h){return d};Fe.prototype.visitJSXExpressionContainer=function(d,c,h){d.expression=this.accept(d.expression,c,h.concat(["expression"]));return d};Fe.prototype.visitJSXSpreadChild=function(d,c,h){d.expression=this.accept(d.expression,c,h.concat(["expression"]));return d};Fe.prototype.visitJSXBoundaryElement=function(d,c,h){d.name=this.accept(d.name,c,h.concat(["name"]));return d};Fe.prototype.visitJSXAttribute=function(d,c,h){d.name=this.accept(d.name,c,h.concat(["name"]));d.value&&(d.value=
this.accept(d.value,c,h.concat(["value"])));return d};Fe.prototype.visitJSXText=function(d,c,h){return d};Fe.prototype.visitJSXOpeningFragment=function(d,c,h){return d};Fe.prototype.visitJSXClosingFragment=function(d,c,h){return d};Fe.prototype.visitIdentifier=function(d,c,h){return d};Fe.prototype.visitLiteral=function(d,c,h){return d};Fe.prototype.visitExpressionStatement=function(d,c,h){d.expression=this.accept(d.expression,c,h.concat(["expression"]));return d};Fe.prototype.visitBlockStatement=
function(d,c,h){for(var f=[],k=0;k<d.body.length;k++){var n=d.body[k];n=n?this.accept(n,c,h.concat(["body",k])):n;Array.isArray(n)?f.push.apply(f,n):f.push(n)}d.body=f;return d};Fe.prototype.visitEmptyStatement=function(d,c,h){return d};Fe.prototype.visitDebuggerStatement=function(d,c,h){return d};Fe.prototype.visitWithStatement=function(d,c,h){d.object=this.accept(d.object,c,h.concat(["object"]));d.body=this.accept(d.body,c,h.concat(["body"]));return d};Fe.prototype.visitReturnStatement=function(d,
c,h){d.argument&&(d.argument=this.accept(d.argument,c,h.concat(["argument"])));return d};Fe.prototype.visitLabeledStatement=function(d,c,h){d.label=this.accept(d.label,c,h.concat(["label"]));d.body=this.accept(d.body,c,h.concat(["body"]));return d};Fe.prototype.visitBreakStatement=function(d,c,h){d.label&&(d.label=this.accept(d.label,c,h.concat(["label"])));return d};Fe.prototype.visitContinueStatement=function(d,c,h){d.label&&(d.label=this.accept(d.label,c,h.concat(["label"])));return d};Fe.prototype.visitIfStatement=
function(d,c,h){d.test=this.accept(d.test,c,h.concat(["test"]));d.consequent=this.accept(d.consequent,c,h.concat(["consequent"]));d.alternate&&(d.alternate=this.accept(d.alternate,c,h.concat(["alternate"])));return d};Fe.prototype.visitSwitchStatement=function(d,c,h){d.discriminant=this.accept(d.discriminant,c,h.concat(["discriminant"]));for(var f=[],k=0;k<d.cases.length;k++){var n=d.cases[k];n=n?this.accept(n,c,h.concat(["cases",k])):n;Array.isArray(n)?f.push.apply(f,n):f.push(n)}d.cases=f;return d};
Fe.prototype.visitThrowStatement=function(d,c,h){d.argument=this.accept(d.argument,c,h.concat(["argument"]));return d};Fe.prototype.visitTryStatement=function(d,c,h){d.block=this.accept(d.block,c,h.concat(["block"]));d.handler&&(d.handler=this.accept(d.handler,c,h.concat(["handler"])));d.finalizer&&(d.finalizer=this.accept(d.finalizer,c,h.concat(["finalizer"])));return d};Fe.prototype.visitWhileStatement=function(d,c,h){d.test=this.accept(d.test,c,h.concat(["test"]));d.body=this.accept(d.body,c,h.concat(["body"]));
return d};Fe.prototype.visitDoWhileStatement=function(d,c,h){d.body=this.accept(d.body,c,h.concat(["body"]));d.test=this.accept(d.test,c,h.concat(["test"]));return d};Fe.prototype.visitForStatement=function(d,c,h){d.init&&(d.init=this.accept(d.init,c,h.concat(["init"])));d.test&&(d.test=this.accept(d.test,c,h.concat(["test"])));d.update&&(d.update=this.accept(d.update,c,h.concat(["update"])));d.body=this.accept(d.body,c,h.concat(["body"]));return d};Fe.prototype.visitForInStatement=function(d,c,h){d.left=
this.accept(d.left,c,h.concat(["left"]));d.right=this.accept(d.right,c,h.concat(["right"]));d.body=this.accept(d.body,c,h.concat(["body"]));return d};Fe.prototype.visitDeclaration=function(d,c,h){return d};Fe.prototype.visitThisExpression=function(d,c,h){return d};Fe.prototype.visitArrayExpression=function(d,c,h){if(d.elements){for(var f=[],k=0;k<d.elements.length;k++){var n=d.elements[k];n=n?this.accept(n,c,h.concat(["elements",k])):n;Array.isArray(n)?f.push.apply(f,n):f.push(n)}d.elements=f}return d};
Fe.prototype.visitObjectExpression=function(d,c,h){for(var f=[],k=0;k<d.properties.length;k++){var n=d.properties[k];n=n?this.accept(n,c,h.concat(["properties",k])):n;Array.isArray(n)?f.push.apply(f,n):f.push(n)}d.properties=f;return d};Fe.prototype.visitFunctionExpression=function(d,c,h){d.id&&(d.id=this.accept(d.id,c,h.concat(["id"])));for(var f=[],k=0;k<d.params.length;k++){var n=d.params[k];n=n?this.accept(n,c,h.concat(["params",k])):n;Array.isArray(n)?f.push.apply(f,n):f.push(n)}d.params=f;d.body=
this.accept(d.body,c,h.concat(["body"]));return d};Fe.prototype.visitUnaryExpression=function(d,c,h){d.argument=this.accept(d.argument,c,h.concat(["argument"]));return d};Fe.prototype.visitUpdateExpression=function(d,c,h){d.argument=this.accept(d.argument,c,h.concat(["argument"]));return d};Fe.prototype.visitBinaryExpression=function(d,c,h){d.left=this.accept(d.left,c,h.concat(["left"]));d.right=this.accept(d.right,c,h.concat(["right"]));return d};Fe.prototype.visitAssignmentExpression=function(d,
c,h){d.left=this.accept(d.left,c,h.concat(["left"]));d.right=this.accept(d.right,c,h.concat(["right"]));return d};Fe.prototype.visitLogicalExpression=function(d,c,h){d.left=this.accept(d.left,c,h.concat(["left"]));d.right=this.accept(d.right,c,h.concat(["right"]));return d};Fe.prototype.visitMemberExpression=function(d,c,h){d.object=this.accept(d.object,c,h.concat(["object"]));d.property=this.accept(d.property,c,h.concat(["property"]));return d};Fe.prototype.visitConditionalExpression=function(d,
c,h){d.test=this.accept(d.test,c,h.concat(["test"]));d.alternate=this.accept(d.alternate,c,h.concat(["alternate"]));d.consequent=this.accept(d.consequent,c,h.concat(["consequent"]));return d};Fe.prototype.visitCallExpression=function(d,c,h){d.callee=this.accept(d.callee,c,h.concat(["callee"]));for(var f=[],k=0;k<d.arguments.length;k++){var n=d.arguments[k];n=n?this.accept(n,c,h.concat(["arguments",k])):n;Array.isArray(n)?f.push.apply(f,n):f.push(n)}d.arguments=f;return d};Fe.prototype.visitNewExpression=
function(d,c,h){d.callee=this.accept(d.callee,c,h.concat(["callee"]));for(var f=[],k=0;k<d.arguments.length;k++){var n=d.arguments[k];n=n?this.accept(n,c,h.concat(["arguments",k])):n;Array.isArray(n)?f.push.apply(f,n):f.push(n)}d.arguments=f;return d};Fe.prototype.visitSequenceExpression=function(d,c,h){for(var f=[],k=0;k<d.expressions.length;k++){var n=d.expressions[k];n=n?this.accept(n,c,h.concat(["expressions",k])):n;Array.isArray(n)?f.push.apply(f,n):f.push(n)}d.expressions=f;return d};Fe.prototype.visitArrowFunctionExpression=
function(d,c,h){d.body=this.accept(d.body,c,h.concat(["body"]));d.id&&(d.id=this.accept(d.id,c,h.concat(["id"])));for(var f=[],k=0;k<d.params.length;k++){var n=d.params[k];n=n?this.accept(n,c,h.concat(["params",k])):n;Array.isArray(n)?f.push.apply(f,n):f.push(n)}d.params=f;return d};Fe.prototype.visitYieldExpression=function(d,c,h){d.argument&&(d.argument=this.accept(d.argument,c,h.concat(["argument"])));return d};Fe.prototype.visitTemplateLiteral=function(d,c,h){for(var f=[],k=0;k<d.quasis.length;k++){var n=
d.quasis[k];n=n?this.accept(n,c,h.concat(["quasis",k])):n;Array.isArray(n)?f.push.apply(f,n):f.push(n)}d.quasis=f;f=[];for(k=0;k<d.expressions.length;k++)n=(n=d.expressions[k])?this.accept(n,c,h.concat(["expressions",k])):n,Array.isArray(n)?f.push.apply(f,n):f.push(n);d.expressions=f;return d};Fe.prototype.visitTaggedTemplateExpression=function(d,c,h){d.tag=this.accept(d.tag,c,h.concat(["tag"]));d.quasi=this.accept(d.quasi,c,h.concat(["quasi"]));return d};Fe.prototype.visitAssignmentProperty=function(d,
c,h){d.value=this.accept(d.value,c,h.concat(["value"]));d.key=this.accept(d.key,c,h.concat(["key"]));return d};Fe.prototype.visitObjectPattern=function(d,c,h){for(var f=[],k=0;k<d.properties.length;k++){var n=d.properties[k];n=n?this.accept(n,c,h.concat(["properties",k])):n;Array.isArray(n)?f.push.apply(f,n):f.push(n)}d.properties=f;return d};Fe.prototype.visitArrayPattern=function(d,c,h){if(d.elements){for(var f=[],k=0;k<d.elements.length;k++){var n=d.elements[k];n=n?this.accept(n,c,h.concat(["elements",
k])):n;Array.isArray(n)?f.push.apply(f,n):f.push(n)}d.elements=f}return d};Fe.prototype.visitRestElement=function(d,c,h){d.argument=this.accept(d.argument,c,h.concat(["argument"]));return d};Fe.prototype.visitAssignmentPattern=function(d,c,h){d.left=this.accept(d.left,c,h.concat(["left"]));d.right=this.accept(d.right,c,h.concat(["right"]));return d};Fe.prototype.visitClassExpression=function(d,c,h){d.id&&(d.id=this.accept(d.id,c,h.concat(["id"])));d.superClass&&(d.superClass=this.accept(d.superClass,
c,h.concat(["superClass"])));d.body=this.accept(d.body,c,h.concat(["body"]));return d};Fe.prototype.visitMetaProperty=function(d,c,h){d.meta=this.accept(d.meta,c,h.concat(["meta"]));d.property=this.accept(d.property,c,h.concat(["property"]));return d};Fe.prototype.visitImportDeclaration=function(d,c,h){for(var f=[],k=0;k<d.specifiers.length;k++){var n=d.specifiers[k];n=n?this.accept(n,c,h.concat(["specifiers",k])):n;Array.isArray(n)?f.push.apply(f,n):f.push(n)}d.specifiers=f;d.source=this.accept(d.source,
c,h.concat(["source"]));return d};Fe.prototype.visitImportSpecifier=function(d,c,h){d.imported=this.accept(d.imported,c,h.concat(["imported"]));d.local=this.accept(d.local,c,h.concat(["local"]));return d};Fe.prototype.visitImportDefaultSpecifier=function(d,c,h){d.local=this.accept(d.local,c,h.concat(["local"]));return d};Fe.prototype.visitImportNamespaceSpecifier=function(d,c,h){d.local=this.accept(d.local,c,h.concat(["local"]));return d};Fe.prototype.visitExportNamedDeclaration=function(d,c,h){d.declaration&&
(d.declaration=this.accept(d.declaration,c,h.concat(["declaration"])));for(var f=[],k=0;k<d.specifiers.length;k++){var n=d.specifiers[k];n=n?this.accept(n,c,h.concat(["specifiers",k])):n;Array.isArray(n)?f.push.apply(f,n):f.push(n)}d.specifiers=f;d.source&&(d.source=this.accept(d.source,c,h.concat(["source"])));return d};Fe.prototype.visitExportSpecifier=function(d,c,h){d.exported=this.accept(d.exported,c,h.concat(["exported"]));d.local=this.accept(d.local,c,h.concat(["local"]));return d};Fe.prototype.visitAnonymousDefaultExportedFunctionDeclaration=
function(d,c,h){d.id&&(d.id=this.accept(d.id,c,h.concat(["id"])));for(var f=[],k=0;k<d.params.length;k++){var n=d.params[k];n=n?this.accept(n,c,h.concat(["params",k])):n;Array.isArray(n)?f.push.apply(f,n):f.push(n)}d.params=f;d.body=this.accept(d.body,c,h.concat(["body"]));return d};Fe.prototype.visitAnonymousDefaultExportedClassDeclaration=function(d,c,h){d.id&&(d.id=this.accept(d.id,c,h.concat(["id"])));d.superClass&&(d.superClass=this.accept(d.superClass,c,h.concat(["superClass"])));d.body=this.accept(d.body,
c,h.concat(["body"]));return d};Fe.prototype.visitExportDefaultDeclaration=function(d,c,h){d.declaration=this.accept(d.declaration,c,h.concat(["declaration"]));return d};Fe.prototype.visitExportAllDeclaration=function(d,c,h){d.source=this.accept(d.source,c,h.concat(["source"]));return d};Fe.prototype.visitAwaitExpression=function(d,c,h){d.argument=this.accept(d.argument,c,h.concat(["argument"]));return d};Fe.prototype.visitJSXMemberExpression=function(d,c,h){d.object=this.accept(d.object,c,h.concat(["object"]));
d.property=this.accept(d.property,c,h.concat(["property"]));return d};Fe.prototype.visitJSXNamespacedName=function(d,c,h){d.namespace=this.accept(d.namespace,c,h.concat(["namespace"]));d.name=this.accept(d.name,c,h.concat(["name"]));return d};Fe.prototype.visitJSXOpeningElement=function(d,c,h){for(var f=[],k=0;k<d.attributes.length;k++){var n=d.attributes[k];n=n?this.accept(n,c,h.concat(["attributes",k])):n;Array.isArray(n)?f.push.apply(f,n):f.push(n)}d.attributes=f;d.name=this.accept(d.name,c,h.concat(["name"]));
return d};Fe.prototype.visitJSXClosingElement=function(d,c,h){d.name=this.accept(d.name,c,h.concat(["name"]));return d};Fe.prototype.visitJSXSpreadAttribute=function(d,c,h){d.argument=this.accept(d.argument,c,h.concat(["argument"]));return d};Fe.prototype.visitJSXElement=function(d,c,h){d.openingElement=this.accept(d.openingElement,c,h.concat(["openingElement"]));for(var f=[],k=0;k<d.children.length;k++){var n=d.children[k];n=n?this.accept(n,c,h.concat(["children",k])):n;Array.isArray(n)?f.push.apply(f,
n):f.push(n)}d.children=f;d.closingElement&&(d.closingElement=this.accept(d.closingElement,c,h.concat(["closingElement"])));return d};Fe.prototype.visitJSXFragment=function(d,c,h){d.openingFragment=this.accept(d.openingFragment,c,h.concat(["openingFragment"]));for(var f=[],k=0;k<d.children.length;k++){var n=d.children[k];n=n?this.accept(n,c,h.concat(["children",k])):n;Array.isArray(n)?f.push.apply(f,n):f.push(n)}d.children=f;d.closingFragment=this.accept(d.closingFragment,c,h.concat(["closingFragment"]));
return d};Fe.prototype.visitImportExpression=function(d,c,h){d.source=this.accept(d.source,c,h.concat(["source"]));return d};Fe.prototype.visitRegExpLiteral=function(d,c,h){return d};Fe.prototype.visitFunctionBody=function(d,c,h){for(var f=[],k=0;k<d.body.length;k++){var n=d.body[k];n=n?this.accept(n,c,h.concat(["body",k])):n;Array.isArray(n)?f.push.apply(f,n):f.push(n)}d.body=f;return d};Fe.prototype.visitFunctionDeclaration=function(d,c,h){d.id=this.accept(d.id,c,h.concat(["id"]));for(var f=[],
k=0;k<d.params.length;k++){var n=d.params[k];n=n?this.accept(n,c,h.concat(["params",k])):n;Array.isArray(n)?f.push.apply(f,n):f.push(n)}d.params=f;d.body=this.accept(d.body,c,h.concat(["body"]));return d};Fe.prototype.visitVariableDeclaration=function(d,c,h){for(var f=[],k=0;k<d.declarations.length;k++){var n=d.declarations[k];n=n?this.accept(n,c,h.concat(["declarations",k])):n;Array.isArray(n)?f.push.apply(f,n):f.push(n)}d.declarations=f;return d};Fe.prototype.visitForOfStatement=function(d,c,h){d.left=
this.accept(d.left,c,h.concat(["left"]));d.right=this.accept(d.right,c,h.concat(["right"]));d.body=this.accept(d.body,c,h.concat(["body"]));return d};Fe.prototype.visitClassDeclaration=function(d,c,h){d.id=this.accept(d.id,c,h.concat(["id"]));d.superClass&&(d.superClass=this.accept(d.superClass,c,h.concat(["superClass"])));d.body=this.accept(d.body,c,h.concat(["body"]));return d};Fe.prototype.visitJSXIdentifier=function(d,c,h){return d};Fe.prototype.visitBigIntLiteral=function(d,c,h){return d};Da("bE",
Fe);T4.Visitor=Fe;T4.default=Fe;var Xh=lively.FreezerRuntime.recorderFor("lively.ast/lib/mozilla-ast-visitors.js");Xh.obj=Ag;Xh.Path=Ah;Xh.Visitor=Fe;var ID=function(){return Xh.Visitor.apply(this,arguments)||this};$jscomp.inherits(ID,Xh.Visitor);ID.prototype.accept=function(d,c,h){var f=h.map(function(n){return"string"===typeof n?"."+n:"["+n+"]"}).join(""),k=[];h=Xh.Visitor.prototype.accept.call(this,d,{index:c.index,tree:k},h);c.tree.push({node:d,path:f,index:c.index++,children:k});return h};Xh.PrinterVisitor=
ID;var kl=function(){return Xh.Visitor.apply(this,arguments)||this};$jscomp.inherits(kl,Xh.Visitor);kl.prototype.recordNotEqual=function(d,c,h,f){h.comparisons.errors.push({node1:d,node2:c,path:h.completePath,msg:f})};kl.prototype.compareType=function(d,c,h){return this.compareField("type",d,c,h)};kl.prototype.compareField=function(d,c,h,f){h=Xh.Path(f.completePath.join(".")).get(h);if(c&&h&&c[d]===h[d]||c&&"*"===c[d]||h&&"*"===h[d])return!0;var k=f.completePath.join(".")+"."+d;this.recordNotEqual(c,
h,f,c?h?k+" is not equal: "+c[d]+" vs. "+h[d]:"node2 not defined but node1 ("+k+") is: "+c[d]:"node1 on "+k+" not defined");return!1};kl.prototype.accept=function(d,c,h,f){var k=Xh.Path(f.join(".")).get(c);if("*"!==d&&"*"!==k&&(h={completePath:f,comparisons:h.comparisons},this.compareType(d,c,h)))this["visit"+d.type](d,c,h,f)};kl.prototype.visitFunction=function(d,c,h,f){d.generator&&this.compareField("generator",d,c,h);d.expression&&this.compareField("expression",d,c,h);return Xh.Visitor.prototype.visitFunction.call(this,
d,c,h,f)};kl.prototype.visitSwitchStatement=function(d,c,h,f){d.lexical&&this.compareField("lexical",d,c,h);return Xh.Visitor.prototype.visitSwitchStatement.call(this,d,c,h,f)};kl.prototype.visitForInStatement=function(d,c,h,f){d.each&&this.compareField("each",d,c,h);return Xh.Visitor.prototype.visitForInStatement.call(this,d,c,h,f)};kl.prototype.visitFunctionDeclaration=function(d,c,h,f){d.generator&&this.compareField("generator",d,c,h);d.expression&&this.compareField("expression",d,c,h);return Xh.Visitor.prototype.visitFunctionDeclaration.call(this,
d,c,h,f)};kl.prototype.visitVariableDeclaration=function(d,c,h,f){this.compareField("kind",d,c,h);return Xh.Visitor.prototype.visitVariableDeclaration.call(this,d,c,h,f)};kl.prototype.visitUnaryExpression=function(d,c,h,f){this.compareField("operator",d,c,h);d.prefix&&this.compareField("prefix",d,c,h);return Xh.Visitor.prototype.visitUnaryExpression.call(this,d,c,h,f)};kl.prototype.visitBinaryExpression=function(d,c,h,f){this.compareField("operator",d,c,h);return Xh.Visitor.prototype.visitBinaryExpression.call(this,
d,c,h,f)};kl.prototype.visitAssignmentExpression=function(d,c,h,f){this.compareField("operator",d,c,h);return Xh.Visitor.prototype.visitAssignmentExpression.call(this,d,c,h,f)};kl.prototype.visitUpdateExpression=function(d,c,h,f){this.compareField("operator",d,c,h);d.prefix&&this.compareField("prefix",d,c,h);return Xh.Visitor.prototype.visitUpdateExpression.call(this,d,c,h,f)};kl.prototype.visitLogicalExpression=function(d,c,h,f){this.compareField("operator",d,c,h);return Xh.Visitor.prototype.visitLogicalExpression.call(this,
d,c,h,f)};kl.prototype.visitMemberExpression=function(d,c,h,f){d.computed&&this.compareField("computed",d,c,h);return Xh.Visitor.prototype.visitMemberExpression.call(this,d,c,h,f)};kl.prototype.visitComprehensionBlock=function(d,c,h,f){d.each&&this.compareField("each",d,c,h);return Xh.Visitor.prototype.visitComprehensionBlock.call(this,d,c,h,f)};kl.prototype.visitIdentifier=function(d,c,h,f){this.compareField("name",d,c,h);return Xh.Visitor.prototype.visitIdentifier.call(this,d,c,h,f)};kl.prototype.visitLiteral=
function(d,c,h,f){this.compareField("value",d,c,h);return Xh.Visitor.prototype.visitLiteral.call(this,d,c,h,f)};kl.prototype.visitClassDeclaration=function(d,c,h,f){this.compareField("id",d,c,h);d.superClass&&this.compareField("superClass",d,c,h);this.compareField("body",d,c,h);return Xh.Visitor.prototype.visitClassDeclaration.call(this,d,c,h,f)};kl.prototype.visitClassBody=function(d,c,h,f){this.compareField("body",d,c,h);return Xh.Visitor.prototype.visitClassBody.call(this,d,c,h,f)};kl.prototype.visitMethodDefinition=
function(d,c,h,f){this.compareField("static",d,c,h);this.compareField("computed",d,c,h);this.compareField("kind",d,c,h);this.compareField("key",d,c,h);this.compareField("value",d,c,h);return Xh.Visitor.prototype.visitMethodDefinition.call(this,d,c,h,f)};Xh.ComparisonVisitor=kl;var lk=function(){return Xh.Visitor.apply(this,arguments)||this};$jscomp.inherits(lk,Xh.Visitor);lk.prototype.newScope=function(d,c){d={node:d,varDecls:[],varDeclPaths:[],funcDecls:[],funcDeclPaths:[],classDecls:[],classDeclPaths:[],
classExprs:[],classExprPaths:[],methodDecls:[],methodDeclPaths:[],importSpecifiers:[],importSpecifierPaths:[],exportDecls:[],exportDeclPaths:[],refs:[],thisRefs:[],params:[],catches:[],subScopes:[],resolvedRefMap:new Map};c&&c.subScopes.push(d);return d};lk.prototype.visitVariableDeclaration=function(d,c,h){c.varDecls.push(d);c.varDeclPaths.push(h);return Xh.Visitor.prototype.visitVariableDeclaration.call(this,d,c,h)};lk.prototype.visitVariableDeclarator=function(d,c,h){d.init&&(d.init=this.accept(d.init,
c,h.concat(["init"])));return d};lk.prototype.visitFunction=function(d,c,h){var f=this,k=this.newScope(d,c);d.params.forEach(function(n,b){"AssignmentPattern"===n.type&&f.accept(n.right,k,h.concat("params",b,"right"))});k.params=Array.prototype.slice.call(d.params);return k};lk.prototype.visitFunctionDeclaration=function(d,c,h){var f=this.visitFunction(d,c,h);c.funcDecls.push(d);c.funcDeclPaths.push(h);var k=this;d.defaults&&(d.defaults=d.defaults.reduce(function(n,b,e){b=k.accept(b,f,h.concat(["defaults",
e]));Array.isArray(b)?n.push.apply(n,b):n.push(b);return n},[]));d.rest&&(d.rest=k.accept(d.rest,f,h.concat(["rest"])));d.body=k.accept(d.body,f,h.concat(["body"]));d.loc&&(d.loc=k.accept(d.loc,f,h.concat(["loc"])));return d};lk.prototype.visitFunctionExpression=function(d,c,h){var f=this.visitFunction(d,c,h),k=this;d.defaults&&(d.defaults=d.defaults.reduce(function(n,b,e){b=k.accept(b,f,h.concat(["defaults",e]));Array.isArray(b)?n.push.apply(n,b):n.push(b);return n},[]));d.rest&&(d.rest=k.accept(d.rest,
f,h.concat(["rest"])));d.body=k.accept(d.body,f,h.concat(["body"]));d.loc&&(d.loc=k.accept(d.loc,f,h.concat(["loc"])));return d};lk.prototype.visitArrowFunctionExpression=function(d,c,h){var f=this.visitFunction(d,c,h),k=this;d.defaults&&(d.defaults=d.defaults.reduce(function(n,b,e){b=k.accept(b,f,h.concat(["defaults",e]));Array.isArray(b)?n.push.apply(n,b):n.push(b);return n},[]));d.rest&&(d.rest=k.accept(d.rest,f,h.concat(["rest"])));d.body=k.accept(d.body,f,h.concat(["body"]));d.loc&&(d.loc=k.accept(d.loc,
f,h.concat(["loc"])));return d};lk.prototype.visitIdentifier=function(d,c,h){c.refs.push(d);return Xh.Visitor.prototype.visitIdentifier.call(this,d,c,h)};lk.prototype.visitMemberExpression=function(d,c,h){d.object=this.accept(d.object,c,h.concat(["object"]));d.computed&&(d.property=this.accept(d.property,c,h.concat(["property"])));return d};lk.prototype.visitProperty=function(d,c,h){d.computed&&(d.key=this.accept(d.key,c,h.concat(["key"])));d.value=this.accept(d.value,c,h.concat(["value"]));return d};
lk.prototype.visitThisExpression=function(d,c,h){c.thisRefs.push(d);return Xh.Visitor.prototype.visitThisExpression.call(this,d,c,h)};lk.prototype.visitTryStatement=function(d,c,h){d.block=this.accept(d.block,c,h.concat(["block"]));d.handler&&(d.handler=this.accept(d.handler,c,h.concat(["handler"])),c.catches.push(d.handler.param));d.finalizer&&(d.finalizer=this.accept(d.finalizer,c,h.concat(["finalizer"])));return d};lk.prototype.visitLabeledStatement=function(d,c,h){d.body=this.accept(d.body,c,
h.concat(["body"]));return d};lk.prototype.visitClassDeclaration=function(d,c,h){c.classDecls.push(d);c.classDeclPaths.push(h);d.superClass&&(d.superClass=this.accept(d.superClass,c,h.concat(["superClass"])));d.body=this.accept(d.body,c,h.concat(["body"]));return d};lk.prototype.visitClassExpression=function(d,c,h){d.id&&(c.classExprs.push(d),c.classExprPaths.push(h));d.superClass&&(d.superClass=this.accept(d.superClass,c,h.concat(["superClass"])));d.body=this.accept(d.body,c,h.concat(["body"]));
return d};lk.prototype.visitMethodDefinition=function(d,c,h){d.value=this.accept(d.value,c,h.concat(["value"]));return d};lk.prototype.visitMetaProperty=function(d,c,h){return d};lk.prototype.visitBreakStatement=function(d,c,h){return d};lk.prototype.visitContinueStatement=function(d,c,h){return d};lk.prototype.visitImportSpecifier=function(d,c,h){c.importSpecifiers.push(d.local);c.importSpecifierPaths.push(h);return d};lk.prototype.visitImportDefaultSpecifier=function(d,c,h){c.importSpecifiers.push(d.local);
c.importSpecifierPaths.push(h);return d};lk.prototype.visitImportNamespaceSpecifier=function(d,c,h){c.importSpecifiers.push(d.local);c.importSpecifierPaths.push(h);return d};lk.prototype.visitExportSpecifier=function(d,c,h){d.local=this.accept(d.local,c,h.concat(["local"]));return d};lk.prototype.visitExportNamedDeclaration=function(d,c,h){c.exportDecls.push(d);c.exportDeclPaths.push(h);d.source||Xh.Visitor.prototype.visitExportNamedDeclaration.call(this,d,c,h);return d};lk.prototype.visitExportDefaultDeclaration=
function(d,c,h){c.exportDecls.push(d);c.exportDeclPaths.push(h);return Xh.Visitor.prototype.visitExportDefaultDeclaration.call(this,d,c,h)};lk.prototype.visitExportAllDeclaration=function(d,c,h){c.exportDecls.push(d);c.exportDeclPaths.push(h);return Xh.Visitor.prototype.visitExportAllDeclaration.call(this,d,c,h)};Xh.ScopeVisitor=lk;Xh.BaseVisitor=Fe;Xh.Visitor=Fe;Xh.PrinterVisitor=ID;Xh.PrinterVisitor=ID;Xh.ComparisonVisitor=kl;Xh.ComparisonVisitor=kl;Xh.ScopeVisitor=lk;Xh.ScopeVisitor=lk;var $g=
"undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,hT={};(function h(c){function f(H){var I={},M;for(M in H)if(H.hasOwnProperty(M)){var N=H[M];I[M]="object"===typeof N&&null!==N?f(N):N}return I}function k(H,I){var M;var N=H.length;for(M=0;N;){var W=N>>>1;var X=M+W;I(H[X])?N=W:(M=X+1,N-=W+1)}return M}function n(H,I){(this||$g).parent=H;(this||$g).key=I}function b(H,I,M,N){(this||$g).node=H;(this||$g).path=I;(this||$g).wrap=M;(this||$g).ref=N}function e(){}function m(H){return null==
H?!1:"object"===typeof H&&"string"===typeof H.type}function a(H,I){for(var M=H.length-1;0<=M;--M)if(H[M].node===I)return!0;return!1}function g(H,I){return(new e).traverse(H,I)}function l(H,I){var M=k(I,function(N){return N.range[0]>H.range[0]});H.extendedRange=[H.range[0],H.range[1]];M!==I.length&&(H.extendedRange[1]=I[M].range[0]);--M;0<=M&&(H.extendedRange[0]=I[M].range[1]);return H}var r={AssignmentExpression:"AssignmentExpression",AssignmentPattern:"AssignmentPattern",ArrayExpression:"ArrayExpression",
ArrayPattern:"ArrayPattern",ArrowFunctionExpression:"ArrowFunctionExpression",AwaitExpression:"AwaitExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",CatchClause:"CatchClause",ChainExpression:"ChainExpression",ClassBody:"ClassBody",ClassDeclaration:"ClassDeclaration",ClassExpression:"ClassExpression",ComprehensionBlock:"ComprehensionBlock",ComprehensionExpression:"ComprehensionExpression",ConditionalExpression:"ConditionalExpression",
ContinueStatement:"ContinueStatement",DebuggerStatement:"DebuggerStatement",DirectiveStatement:"DirectiveStatement",DoWhileStatement:"DoWhileStatement",EmptyStatement:"EmptyStatement",ExportAllDeclaration:"ExportAllDeclaration",ExportDefaultDeclaration:"ExportDefaultDeclaration",ExportNamedDeclaration:"ExportNamedDeclaration",ExportSpecifier:"ExportSpecifier",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForInStatement:"ForInStatement",ForOfStatement:"ForOfStatement",FunctionDeclaration:"FunctionDeclaration",
FunctionExpression:"FunctionExpression",GeneratorExpression:"GeneratorExpression",Identifier:"Identifier",IfStatement:"IfStatement",ImportExpression:"ImportExpression",ImportDeclaration:"ImportDeclaration",ImportDefaultSpecifier:"ImportDefaultSpecifier",ImportNamespaceSpecifier:"ImportNamespaceSpecifier",ImportSpecifier:"ImportSpecifier",Literal:"Literal",LabeledStatement:"LabeledStatement",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",MetaProperty:"MetaProperty",MethodDefinition:"MethodDefinition",
ModuleSpecifier:"ModuleSpecifier",NewExpression:"NewExpression",ObjectExpression:"ObjectExpression",ObjectPattern:"ObjectPattern",Program:"Program",Property:"Property",RestElement:"RestElement",ReturnStatement:"ReturnStatement",SequenceExpression:"SequenceExpression",SpreadElement:"SpreadElement",Super:"Super",SwitchStatement:"SwitchStatement",SwitchCase:"SwitchCase",TaggedTemplateExpression:"TaggedTemplateExpression",TemplateElement:"TemplateElement",TemplateLiteral:"TemplateLiteral",ThisExpression:"ThisExpression",
ThrowStatement:"ThrowStatement",TryStatement:"TryStatement",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator",WhileStatement:"WhileStatement",WithStatement:"WithStatement",YieldExpression:"YieldExpression"};var v={AssignmentExpression:["left","right"],AssignmentPattern:["left","right"],ArrayExpression:["elements"],ArrayPattern:["elements"],ArrowFunctionExpression:["params","body"],AwaitExpression:["argument"],
BlockStatement:["body"],BinaryExpression:["left","right"],BreakStatement:["label"],CallExpression:["callee","arguments"],CatchClause:["param","body"],ChainExpression:["expression"],ClassBody:["body"],ClassDeclaration:["id","superClass","body"],ClassExpression:["id","superClass","body"],ComprehensionBlock:["left","right"],ComprehensionExpression:["blocks","filter","body"],ConditionalExpression:["test","consequent","alternate"],ContinueStatement:["label"],DebuggerStatement:[],DirectiveStatement:[],
DoWhileStatement:["body","test"],EmptyStatement:[],ExportAllDeclaration:["source"],ExportDefaultDeclaration:["declaration"],ExportNamedDeclaration:["declaration","specifiers","source"],ExportSpecifier:["exported","local"],ExpressionStatement:["expression"],ForStatement:["init","test","update","body"],ForInStatement:["left","right","body"],ForOfStatement:["left","right","body"],FunctionDeclaration:["id","params","body"],FunctionExpression:["id","params","body"],GeneratorExpression:["blocks","filter",
"body"],Identifier:[],IfStatement:["test","consequent","alternate"],ImportExpression:["source"],ImportDeclaration:["specifiers","source"],ImportDefaultSpecifier:["local"],ImportNamespaceSpecifier:["local"],ImportSpecifier:["imported","local"],Literal:[],LabeledStatement:["label","body"],LogicalExpression:["left","right"],MemberExpression:["object","property"],MetaProperty:["meta","property"],MethodDefinition:["key","value"],ModuleSpecifier:[],NewExpression:["callee","arguments"],ObjectExpression:["properties"],
ObjectPattern:["properties"],Program:["body"],Property:["key","value"],RestElement:["argument"],ReturnStatement:["argument"],SequenceExpression:["expressions"],SpreadElement:["argument"],Super:[],SwitchStatement:["discriminant","cases"],SwitchCase:["test","consequent"],TaggedTemplateExpression:["tag","quasi"],TemplateElement:[],TemplateLiteral:["quasis","expressions"],ThisExpression:[],ThrowStatement:["argument"],TryStatement:["block","handler","finalizer"],UnaryExpression:["argument"],UpdateExpression:["argument"],
VariableDeclaration:["declarations"],VariableDeclarator:["id","init"],WhileStatement:["test","body"],WithStatement:["object","body"],YieldExpression:["argument"]};var y={};var A={};var E={};var F={Break:y,Skip:A,Remove:E};n.prototype.replace=function(H){(this||$g).parent[(this||$g).key]=H};n.prototype.remove=function(){if(Array.isArray((this||$g).parent))return(this||$g).parent.splice((this||$g).key,1),!0;this.replace(null);return!1};e.prototype.path=function(){function H(Aa,Ma){if(Array.isArray(Ma))for(M=
0,N=Ma.length;M<N;++M)Aa.push(Ma[M]);else Aa.push(Ma)}var I,M,N;if(!(this||$g).__current.path)return null;var W=[];var X=2;for(I=(this||$g).__leavelist.length;X<I;++X){var ea=(this||$g).__leavelist[X];H(W,ea.path)}H(W,(this||$g).__current.path);return W};e.prototype.type=function(){return this.current().type||(this||$g).__current.wrap};e.prototype.parents=function(){var H;var I=[];var M=1;for(H=(this||$g).__leavelist.length;M<H;++M)I.push((this||$g).__leavelist[M].node);return I};e.prototype.current=
function(){return(this||$g).__current.node};e.prototype.__execute=function(H,I){var M=void 0;var N=(this||$g).__current;(this||$g).__current=I;(this||$g).__state=null;H&&(M=H.call(this||$g,I.node,(this||$g).__leavelist[(this||$g).__leavelist.length-1].node));(this||$g).__current=N;return M};e.prototype.notify=function(H){(this||$g).__state=H};e.prototype.skip=function(){this.notify(A)};e.prototype["break"]=function(){this.notify(y)};e.prototype.remove=function(){this.notify(E)};e.prototype.__initialize=
function(H,I){(this||$g).visitor=I;(this||$g).root=H;(this||$g).__worklist=[];(this||$g).__leavelist=[];(this||$g).__current=null;(this||$g).__state=null;(this||$g).__fallback=null;"iteration"===I.fallback?(this||$g).__fallback=Object.keys:"function"===typeof I.fallback&&((this||$g).__fallback=I.fallback);(this||$g).__keys=v;I.keys&&((this||$g).__keys=Object.assign(Object.create((this||$g).__keys),I.keys))};e.prototype.traverse=function(H,I){var M,N,W;this.__initialize(H,I);var X={};var ea=(this||
$g).__worklist;var Aa=(this||$g).__leavelist;ea.push(new b(H,null,null,null));for(Aa.push(new b(null,null,null,null));ea.length;)if(H=ea.pop(),H===X){H=Aa.pop();var Ma=this.__execute(I.leave,H);if((this||$g).__state===y||Ma===y)break}else if(H.node){Ma=this.__execute(I.enter,H);if((this||$g).__state===y||Ma===y)break;ea.push(X);Aa.push(H);if((this||$g).__state!==A&&Ma!==A){Ma=H.node;var K=Ma.type||H.wrap;var aa=(this||$g).__keys[K];if(!aa)if((this||$g).__fallback)aa=this.__fallback(Ma);else throw Error("Unknown node type "+
K+".");for(M=aa.length;0<=--M;){var T=aa[M];if(W=Ma[T])if(Array.isArray(W))for(N=W.length;0<=--N;){if(W[N]&&!a(Aa,W[N])){if(K!==r.ObjectExpression&&K!==r.ObjectPattern||"properties"!==aa[M])if(m(W[N]))H=new b(W[N],[T,N],null,null);else continue;else H=new b(W[N],[T,N],"Property",null);ea.push(H)}}else m(W)&&!a(Aa,W)&&ea.push(new b(W,T,null,null))}}}};e.prototype.replace=function(H,I){function M(fa){if(fa.ref.remove()){var oa=fa.ref.key;var gb=fa.ref.parent;for(fa=Aa.length;fa--;){var zb=Aa[fa];if(zb.ref&&
zb.ref.parent===gb){if(zb.ref.key<oa)break;--zb.ref.key}}}}var N,W,X;this.__initialize(H,I);var ea={};var Aa=(this||$g).__worklist;var Ma=(this||$g).__leavelist;var K={root:H};var aa=new b(H,null,null,new n(K,"root"));Aa.push(aa);for(Ma.push(aa);Aa.length;)if(aa=Aa.pop(),aa===ea){aa=Ma.pop();var T=this.__execute(I.leave,aa);void 0!==T&&T!==y&&T!==A&&T!==E&&aa.ref.replace(T);(this||$g).__state!==E&&T!==E||M(aa);if((this||$g).__state===y||T===y)break}else{T=this.__execute(I.enter,aa);void 0!==T&&T!==
y&&T!==A&&T!==E&&(aa.ref.replace(T),aa.node=T);if((this||$g).__state===E||T===E)M(aa),aa.node=null;if((this||$g).__state===y||T===y)break;if(H=aa.node)if(Aa.push(ea),Ma.push(aa),(this||$g).__state!==A&&T!==A){T=H.type||aa.wrap;var U=(this||$g).__keys[T];if(!U)if((this||$g).__fallback)U=this.__fallback(H);else throw Error("Unknown node type "+T+".");for(N=U.length;0<=--N;){var pa=U[N];if(X=H[pa])if(Array.isArray(X))for(W=X.length;0<=--W;){if(X[W]){if(T!==r.ObjectExpression&&T!==r.ObjectPattern||"properties"!==
U[N])if(m(X[W]))aa=new b(X[W],[pa,W],null,new n(X,W));else continue;else aa=new b(X[W],[pa,W],"Property",new n(X,W));Aa.push(aa)}}else m(X)&&Aa.push(new b(X,pa,null,new n(H,pa)))}}}return K.root};c.Syntax=r;c.traverse=g;c.replace=function(H,I){return(new e).replace(H,I)};c.attachComments=function(H,I,M){var N=[],W;if(!H.range)throw Error("attachComments needs range information");if(!M.length){if(I.length){var X=0;for(W=I.length;X<W;X+=1)M=f(I[X]),M.extendedRange=[0,H.range[0]],N.push(M);H.leadingComments=
N}return H}X=0;for(W=I.length;X<W;X+=1)N.push(l(f(I[X]),M));var ea=0;g(H,{enter:function(Aa){for(var Ma;ea<N.length;){Ma=N[ea];if(Ma.extendedRange[1]>Aa.range[0])break;Ma.extendedRange[1]===Aa.range[0]?(Aa.leadingComments||(Aa.leadingComments=[]),Aa.leadingComments.push(Ma),N.splice(ea,1)):ea+=1}if(ea===N.length)return F.Break;if(N[ea].extendedRange[0]>Aa.range[1])return F.Skip}});ea=0;g(H,{leave:function(Aa){for(var Ma;ea<N.length;){Ma=N[ea];if(Aa.range[1]<Ma.extendedRange[0])break;Aa.range[1]===
Ma.extendedRange[0]?(Aa.trailingComments||(Aa.trailingComments=[]),Aa.trailingComments.push(Ma),N.splice(ea,1)):ea+=1}if(ea===N.length)return F.Break;if(N[ea].extendedRange[0]>Aa.range[1])return F.Skip}});return H};c.VisitorKeys=v;c.VisitorOption=F;c.Controller=e;c.cloneEnvironment=function(){return h({})};return c})(hT);var U4={};(function(){function c(f){if(null==f)return!1;switch(f.type){case "BlockStatement":case "BreakStatement":case "ContinueStatement":case "DebuggerStatement":case "DoWhileStatement":case "EmptyStatement":case "ExpressionStatement":case "ForInStatement":case "ForStatement":case "IfStatement":case "LabeledStatement":case "ReturnStatement":case "SwitchStatement":case "ThrowStatement":case "TryStatement":case "VariableDeclaration":case "WhileStatement":case "WithStatement":return!0}return!1}
function h(f){switch(f.type){case "IfStatement":return null!=f.alternate?f.alternate:f.consequent;case "LabeledStatement":case "ForStatement":case "ForInStatement":case "WhileStatement":case "WithStatement":return f.body}return null}U4={isExpression:function(f){if(null==f)return!1;switch(f.type){case "ArrayExpression":case "AssignmentExpression":case "BinaryExpression":case "CallExpression":case "ConditionalExpression":case "FunctionExpression":case "Identifier":case "Literal":case "LogicalExpression":case "MemberExpression":case "NewExpression":case "ObjectExpression":case "SequenceExpression":case "ThisExpression":case "UnaryExpression":case "UpdateExpression":return!0}return!1},
isStatement:c,isIterationStatement:function(f){if(null==f)return!1;switch(f.type){case "DoWhileStatement":case "ForInStatement":case "ForStatement":case "WhileStatement":return!0}return!1},isSourceElement:function(f){return c(f)||null!=f&&"FunctionDeclaration"===f.type},isProblematicIfStatement:function(f){if("IfStatement"!==f.type||null==f.alternate)return!1;f=f.consequent;do{if("IfStatement"===f.type&&null==f.alternate)return!0;f=h(f)}while(f);return!1},trailingStatement:h}})();var lha=U4,V4={};
(function(){function c(g){if(65535>=g)return String.fromCharCode(g);var l=String.fromCharCode(Math.floor((g-65536)/1024)+55296);g=String.fromCharCode((g-65536)%1024+56320);return l+g}var h;var f=/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]/;
var k=/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u08A0-\u08B4\u08B6-\u08BD\u08D4-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D01-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19D9\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1CD0-\u1CD2\u1CD4-\u1CF6\u1CF8\u1CF9\u1D00-\u1DF5\u1DFB-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u2E2F\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099\u309A\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]/;
var n=/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309B-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF30-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDF00-\uDF19]|\uD806[\uDCA0-\uDCDF\uDCFF\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50\uDF93-\uDF9F\uDFE0]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00\uDC01]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1]|\uD87E[\uDC00-\uDE1D]/;
var b=/[\xAA\xB5\xB7\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u08A0-\u08B4\u08B6-\u08BD\u08D4-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D01-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1369-\u1371\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1CD0-\u1CD2\u1CD4-\u1CF6\u1CF8\u1CF9\u1D00-\u1DF5\u1DFB-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF30-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC00-\uDC46\uDC66-\uDC6F\uDC7F-\uDCBA\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDCA-\uDDCC\uDDD0-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE3E\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3C-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC00-\uDC4A\uDC50-\uDC59\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB7\uDEC0-\uDEC9\uDF00-\uDF19\uDF1D-\uDF2B\uDF30-\uDF39]|\uD806[\uDCA0-\uDCE9\uDCFF\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC36\uDC38-\uDC40\uDC50-\uDC59\uDC72-\uDC8F\uDC92-\uDCA7\uDCA9-\uDCB6]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50-\uDF7E\uDF8F-\uDF9F\uDFE0]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00\uDC01]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6\uDD00-\uDD4A\uDD50-\uDD59]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1]|\uD87E[\uDC00-\uDE1D]|\uDB40[\uDD00-\uDDEF]/;
var e=[5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279];var m=Array(128);for(h=0;128>h;++h)m[h]=97<=h&&122>=h||65<=h&&90>=h||36===h||95===h;var a=Array(128);for(h=0;128>h;++h)a[h]=97<=h&&122>=h||65<=h&&90>=h||48<=h&&57>=h||36===h||95===h;V4={isDecimalDigit:function(g){return 48<=g&&57>=g},isHexDigit:function(g){return 48<=g&&57>=g||97<=g&&102>=g||65<=g&&70>=g},isOctalDigit:function(g){return 48<=g&&55>=g},isWhiteSpace:function(g){return 32===g||9===g||11===g||12===
g||160===g||5760<=g&&0<=e.indexOf(g)},isLineTerminator:function(g){return 10===g||13===g||8232===g||8233===g},isIdentifierStartES5:function(g){return 128>g?m[g]:f.test(c(g))},isIdentifierPartES5:function(g){return 128>g?a[g]:k.test(c(g))},isIdentifierStartES6:function(g){return 128>g?m[g]:n.test(c(g))},isIdentifierPartES6:function(g){return 128>g?a[g]:b.test(c(g))}}})();var W4=V4,X4={};(function(){function c(m,a){return a||"yield"!==m?h(m,a):!1}function h(m,a){if(a)a:switch(m){case "implements":case "interface":case "package":case "private":case "protected":case "public":case "static":case "let":a=
!0;break a;default:a=!1}if(a)return!0;switch(m.length){case 2:return"if"===m||"in"===m||"do"===m;case 3:return"var"===m||"for"===m||"new"===m||"try"===m;case 4:return"this"===m||"else"===m||"case"===m||"void"===m||"with"===m||"enum"===m;case 5:return"while"===m||"break"===m||"catch"===m||"throw"===m||"const"===m||"yield"===m||"class"===m||"super"===m;case 6:return"return"===m||"typeof"===m||"delete"===m||"switch"===m||"export"===m||"import"===m;case 7:return"default"===m||"finally"===m||"extends"===
m;case 8:return"function"===m||"continue"===m||"debugger"===m;case 10:return"instanceof"===m;default:return!1}}function f(m,a){return"null"===m||"true"===m||"false"===m||c(m,a)}function k(m,a){return"null"===m||"true"===m||"false"===m||h(m,a)}function n(m){var a;if(0===m.length)return!1;var g=m.charCodeAt(0);if(!e.isIdentifierStartES5(g))return!1;var l=1;for(a=m.length;l<a;++l)if(g=m.charCodeAt(l),!e.isIdentifierPartES5(g))return!1;return!0}function b(m){var a;if(0===m.length)return!1;var g=e.isIdentifierStartES6;
var l=0;for(a=m.length;l<a;++l){var r=m.charCodeAt(l);if(55296<=r&&56319>=r){++l;if(l>=a)return!1;var v=m.charCodeAt(l);if(!(56320<=v&&57343>=v))return!1;r=1024*(r-55296)+(v-56320)+65536}if(!g(r))return!1;g=e.isIdentifierPartES6}return!0}var e=W4;X4={isKeywordES5:c,isKeywordES6:h,isReservedWordES5:f,isReservedWordES6:k,isRestrictedWord:function(m){return"eval"===m||"arguments"===m},isIdentifierNameES5:n,isIdentifierNameES6:b,isIdentifierES5:function(m,a){return n(m)&&!f(m,a)},isIdentifierES6:function(m,
a){return b(m)&&!k(m,a)}}})();var mha=X4,BG={};BG.ast=lha;BG.code=W4;BG.keyword=mha;var nn={getArg:function(c,h,f){if(h in c)return c[h];if(3===arguments.length)return f;throw Error('"'+h+'" is a required argument.');}},CX=/^(?:([\w+\-.]+):)?\/\/(?:(\w+:\w+)@)?([\w.-]*)(?::(\d+))?(.*)$/,Naa=/^data:.+,.+$/;nn.urlParse=mn;nn.urlGenerate=zu;nn.normalize=ux;nn.join=bF;nn.isAbsolute=function(c){return"/"===c.charAt(0)||CX.test(c)};nn.relative=function(c,h){""===c&&(c=".");c=c.replace(/\/$/,"");for(var f=
0;0!==h.indexOf(c+"/");){var k=c.lastIndexOf("/");if(0>k)return h;c=c.slice(0,k);if(c.match(/^([^\/]+:\/)?\/*$/))return h;++f}return Array(f+1).join("../")+h.substr(c.length+1)};var Y4=!("__proto__"in Object.create(null));nn.toSetString=Y4?II:JI;nn.fromSetString=Y4?II:Vs;nn.compareByOriginalPositions=function(c,h,f){var k=Au(c.source,h.source);if(0!==k)return k;k=c.originalLine-h.originalLine;if(0!==k)return k;k=c.originalColumn-h.originalColumn;if(0!==k||f)return k;k=c.generatedColumn-h.generatedColumn;
if(0!==k)return k;k=c.generatedLine-h.generatedLine;return 0!==k?k:Au(c.name,h.name)};nn.compareByGeneratedPositionsDeflated=function(c,h,f){var k=c.generatedLine-h.generatedLine;if(0!==k)return k;k=c.generatedColumn-h.generatedColumn;if(0!==k||f)return k;k=Au(c.source,h.source);if(0!==k)return k;k=c.originalLine-h.originalLine;if(0!==k)return k;k=c.originalColumn-h.originalColumn;return 0!==k?k:Au(c.name,h.name)};nn.compareByGeneratedPositionsInflated=function(c,h){var f=c.generatedLine-h.generatedLine;
if(0!==f)return f;f=c.generatedColumn-h.generatedColumn;if(0!==f)return f;f=Au(c.source,h.source);if(0!==f)return f;f=c.originalLine-h.originalLine;if(0!==f)return f;f=c.originalColumn-h.originalColumn;return 0!==f?f:Au(c.name,h.name)};nn.parseSourceMapInput=function(c){return JSON.parse(c.replace(/^\)]}'[^\n]*\n/,""))};nn.computeSourceURL=function(c,h,f){h=h||"";c&&("/"!==c[c.length-1]&&"/"!==h[0]&&(c+="/"),h=c+h);if(f){c=mn(f);if(!c)throw Error("sourceMapURL could not be parsed");c.path&&(f=c.path.lastIndexOf("/"),
0<=f&&(c.path=c.path.substring(0,f+1)));h=bF(zu(c),h)}return ux(h)};var vL={},Z4="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("");vL.encode=function(c){if(0<=c&&c<Z4.length)return Z4[c];throw new TypeError("Must be between 0 and 63: "+c);};vL.decode=function(c){return 65<=c&&90>=c?c-65:97<=c&&122>=c?c-97+26:48<=c&&57>=c?c-48+52:43==c?62:47==c?63:-1};var JD={encode:function(c){var h="",f=0>c?(-c<<1)+1:c<<1;do c=f&31,f>>>=5,0<f&&(c|=32),h+=vL.encode(c);while(0<f);return h},
decode:function(c,h,f){var k=c.length,n=0,b=0;do{if(h>=k)throw Error("Expected more digits in base 64 VLQ value.");var e=vL.decode(c.charCodeAt(h++));if(-1===e)throw Error("Invalid base64 digit: "+c.charAt(h-1));var m=!!(e&32);e&=31;n+=e<<b;b+=5}while(m);c=n>>1;f.value=1===(n&1)?-c:c;f.rest=h}},vo="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,iT=nn,jT=Object.prototype.hasOwnProperty,xz="undefined"!==typeof Map;Om.fromArray=function(c,h){for(var f=new Om,k=0,n=c.length;k<
n;k++)f.add(c[k],h);return f};Om.prototype.size=function(){return xz?(this||vo)._set.size:Object.getOwnPropertyNames((this||vo)._set).length};Om.prototype.add=function(c,h){var f=xz?c:iT.toSetString(c),k=xz?this.has(c):jT.call((this||vo)._set,f),n=(this||vo)._array.length;k&&!h||(this||vo)._array.push(c);k||(xz?(this||vo)._set.set(c,n):(this||vo)._set[f]=n)};Om.prototype.has=function(c){if(xz)return(this||vo)._set.has(c);c=iT.toSetString(c);return jT.call((this||vo)._set,c)};Om.prototype.indexOf=
function(c){if(xz){var h=(this||vo)._set.get(c);if(0<=h)return h}else if(h=iT.toSetString(c),jT.call((this||vo)._set,h))return(this||vo)._set[h];throw Error('"'+c+'" is not in the set.');};Om.prototype.at=function(c){if(0<=c&&c<(this||vo)._array.length)return(this||vo)._array[c];throw Error("No element indexed by "+c);};Om.prototype.toArray=function(){return(this||vo)._array.slice()};var Kr="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,$4=nn;yz.prototype.unsortedForEach=
function(c,h){(this||Kr)._array.forEach(c,h)};yz.prototype.add=function(c){var h=(this||Kr)._last,f=h.generatedLine,k=c.generatedLine,n=h.generatedColumn,b=c.generatedColumn;k>f||k==f&&b>=n||0>=$4.compareByGeneratedPositionsInflated(h,c)?(this||Kr)._last=c:(this||Kr)._sorted=!1;(this||Kr)._array.push(c)};yz.prototype.toArray=function(){(this||Kr)._sorted||((this||Kr)._array.sort($4.compareByGeneratedPositionsInflated),(this||Kr)._sorted=!0);return(this||Kr)._array};var qi="undefined"!==typeof globalThis?
globalThis:"undefined"!==typeof self?self:global,Pm=nn,KI=Om,Oaa=yz;vp.prototype._version=3;vp.fromSourceMap=function(c){var h=c.sourceRoot,f=new vp({file:c.file,sourceRoot:h});c.eachMapping(function(k){var n={generated:{line:k.generatedLine,column:k.generatedColumn}};null!=k.source&&(n.source=k.source,null!=h&&(n.source=Pm.relative(h,n.source)),n.original={line:k.originalLine,column:k.originalColumn},null!=k.name&&(n.name=k.name));f.addMapping(n)});c.sources.forEach(function(k){var n=k;null!==h&&
(n=Pm.relative(h,k));f._sources.has(n)||f._sources.add(n);n=c.sourceContentFor(k);null!=n&&f.setSourceContent(k,n)});return f};vp.prototype.addMapping=function(c){var h=Pm.getArg(c,"generated"),f=Pm.getArg(c,"original",null),k=Pm.getArg(c,"source",null);c=Pm.getArg(c,"name",null);(this||qi)._skipValidation||this._validateMapping(h,f,k,c);null!=k&&(k=String(k),(this||qi)._sources.has(k)||(this||qi)._sources.add(k));null!=c&&(c=String(c),(this||qi)._names.has(c)||(this||qi)._names.add(c));(this||qi)._mappings.add({generatedLine:h.line,
generatedColumn:h.column,originalLine:null!=f&&f.line,originalColumn:null!=f&&f.column,source:k,name:c})};vp.prototype.setSourceContent=function(c,h){null!=(this||qi)._sourceRoot&&(c=Pm.relative((this||qi)._sourceRoot,c));null!=h?((this||qi)._sourcesContents||((this||qi)._sourcesContents=Object.create(null)),(this||qi)._sourcesContents[Pm.toSetString(c)]=h):(this||qi)._sourcesContents&&(delete (this||qi)._sourcesContents[Pm.toSetString(c)],0===Object.keys((this||qi)._sourcesContents).length&&((this||
qi)._sourcesContents=null))};vp.prototype.applySourceMap=function(c,h,f){var k=h;if(null==h){if(null==c.file)throw Error('SourceMapGenerator.prototype.applySourceMap requires either an explicit source file, or the source map\'s "file" property. Both were omitted.');k=c.file}var n=(this||qi)._sourceRoot;null!=n&&(k=Pm.relative(n,k));var b=new KI,e=new KI;(this||qi)._mappings.unsortedForEach(function(m){if(m.source===k&&null!=m.originalLine){var a=c.originalPositionFor({line:m.originalLine,column:m.originalColumn});
null!=a.source&&(m.source=a.source,null!=f&&(m.source=Pm.join(f,m.source)),null!=n&&(m.source=Pm.relative(n,m.source)),m.originalLine=a.line,m.originalColumn=a.column,null!=a.name&&(m.name=a.name))}a=m.source;null==a||b.has(a)||b.add(a);m=m.name;null==m||e.has(m)||e.add(m)},this||qi);(this||qi)._sources=b;(this||qi)._names=e;c.sources.forEach(function(m){var a=c.sourceContentFor(m);null!=a&&(null!=f&&(m=Pm.join(f,m)),null!=n&&(m=Pm.relative(n,m)),this.setSourceContent(m,a))},this||qi)};vp.prototype._validateMapping=
function(c,h,f,k){if(h&&"number"!==typeof h.line&&"number"!==typeof h.column)throw Error("original.line and original.column are not numbers -- you probably meant to omit the original mapping entirely and only map the generated position. If so, pass null for the original mapping instead of an object with empty or null values.");if(!(c&&"line"in c&&"column"in c&&0<c.line&&0<=c.column&&!h&&!f&&!k||c&&"line"in c&&"column"in c&&h&&"line"in h&&"column"in h&&0<c.line&&0<=c.column&&0<h.line&&0<=h.column&&
f))throw Error("Invalid mapping: "+JSON.stringify({generated:c,source:f,original:h,name:k}));};vp.prototype._serializeMappings=function(){for(var c=0,h=1,f=0,k=0,n=0,b=0,e="",m,a,g,l=(this||qi)._mappings.toArray(),r=0,v=l.length;r<v;r++){a=l[r];m="";if(a.generatedLine!==h)for(c=0;a.generatedLine!==h;)m+=";",h++;else if(0<r){if(!Pm.compareByGeneratedPositionsInflated(a,l[r-1]))continue;m+=","}m+=JD.encode(a.generatedColumn-c);c=a.generatedColumn;null!=a.source&&(g=(this||qi)._sources.indexOf(a.source),
m+=JD.encode(g-b),b=g,m+=JD.encode(a.originalLine-1-k),k=a.originalLine-1,m+=JD.encode(a.originalColumn-f),f=a.originalColumn,null!=a.name&&(a=(this||qi)._names.indexOf(a.name),m+=JD.encode(a-n),n=a));e+=m}return e};vp.prototype._generateSourcesContent=function(c,h){return c.map(function(f){if(!(this||qi)._sourcesContents)return null;null!=h&&(f=Pm.relative(h,f));f=Pm.toSetString(f);return Object.prototype.hasOwnProperty.call((this||qi)._sourcesContents,f)?(this||qi)._sourcesContents[f]:null},this||
qi)};vp.prototype.toJSON=function(){var c={version:(this||qi)._version,sources:(this||qi)._sources.toArray(),names:(this||qi)._names.toArray(),mappings:this._serializeMappings()};null!=(this||qi)._file&&(c.file=(this||qi)._file);null!=(this||qi)._sourceRoot&&(c.sourceRoot=(this||qi)._sourceRoot);(this||qi)._sourcesContents&&(c.sourcesContent=this._generateSourcesContent(c.sources,c.sourceRoot));return c};vp.prototype.toString=function(){return JSON.stringify(this.toJSON())};var LI={GREATEST_LOWER_BOUND:1,
LEAST_UPPER_BOUND:2,search:function(c,h,f,k){if(0===h.length)return-1;c=WB(-1,h.length,c,h,f,k||LI.GREATEST_LOWER_BOUND);if(0>c)return-1;for(;0<=c-1&&0===f(h[c],h[c-1],!0);)--c;return c}},jf="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,Cg=nn,kT=LI,XB=Om,CG=function(c,h){dq(c,h,0,c.length-1)};Zi.fromSourceMap=function(c,h){return Am.fromSourceMap(c,h)};Zi.prototype._version=3;Zi.prototype.__generatedMappings=null;Object.defineProperty(Zi.prototype,"_generatedMappings",
{configurable:!0,enumerable:!0,get:function(){(this||jf).__generatedMappings||this._parseMappings((this||jf)._mappings,(this||jf).sourceRoot);return(this||jf).__generatedMappings}});Zi.prototype.__originalMappings=null;Object.defineProperty(Zi.prototype,"_originalMappings",{configurable:!0,enumerable:!0,get:function(){(this||jf).__originalMappings||this._parseMappings((this||jf)._mappings,(this||jf).sourceRoot);return(this||jf).__originalMappings}});Zi.prototype._charIsMappingSeparator=function(c,
h){c=c.charAt(h);return";"===c||","===c};Zi.prototype._parseMappings=function(c,h){throw Error("Subclasses must implement _parseMappings");};Zi.GENERATED_ORDER=1;Zi.ORIGINAL_ORDER=2;Zi.GREATEST_LOWER_BOUND=1;Zi.LEAST_UPPER_BOUND=2;Zi.prototype.eachMapping=function(c,h,f){h=h||null;switch(f||Zi.GENERATED_ORDER){case Zi.GENERATED_ORDER:f=(this||jf)._generatedMappings;break;case Zi.ORIGINAL_ORDER:f=(this||jf)._originalMappings;break;default:throw Error("Unknown order of iteration.");}var k=(this||jf).sourceRoot;
f.map(function(n){var b=null===n.source?null:(this||jf)._sources.at(n.source);b=Cg.computeSourceURL(k,b,(this||jf)._sourceMapURL);return{source:b,generatedLine:n.generatedLine,generatedColumn:n.generatedColumn,originalLine:n.originalLine,originalColumn:n.originalColumn,name:null===n.name?null:(this||jf)._names.at(n.name)}},this||jf).forEach(c,h)};Zi.prototype.allGeneratedPositionsFor=function(c){var h=Cg.getArg(c,"line"),f={source:Cg.getArg(c,"source"),originalLine:h,originalColumn:Cg.getArg(c,"column",
0)};f.source=this._findSourceIndex(f.source);if(0>f.source)return[];var k=[];f=this._findMapping(f,(this||jf)._originalMappings,"originalLine","originalColumn",Cg.compareByOriginalPositions,kT.LEAST_UPPER_BOUND);if(0<=f){var n=(this||jf)._originalMappings[f];if(void 0===c.column)for(h=n.originalLine;n&&n.originalLine===h;)k.push({line:Cg.getArg(n,"generatedLine",null),column:Cg.getArg(n,"generatedColumn",null),lastColumn:Cg.getArg(n,"lastGeneratedColumn",null)}),n=(this||jf)._originalMappings[++f];
else for(c=n.originalColumn;n&&n.originalLine===h&&n.originalColumn==c;)k.push({line:Cg.getArg(n,"generatedLine",null),column:Cg.getArg(n,"generatedColumn",null),lastColumn:Cg.getArg(n,"lastGeneratedColumn",null)}),n=(this||jf)._originalMappings[++f]}return k};Am.prototype=Object.create(Zi.prototype);Am.prototype.consumer=Zi;Am.prototype._findSourceIndex=function(c){var h=c;null!=(this||jf).sourceRoot&&(h=Cg.relative((this||jf).sourceRoot,h));if((this||jf)._sources.has(h))return(this||jf)._sources.indexOf(h);
for(h=0;h<(this||jf)._absoluteSources.length;++h)if((this||jf)._absoluteSources[h]==c)return h;return-1};Am.fromSourceMap=function(c,h){var f=Object.create(Am.prototype),k=f._names=XB.fromArray(c._names.toArray(),!0),n=f._sources=XB.fromArray(c._sources.toArray(),!0);f.sourceRoot=c._sourceRoot;f.sourcesContent=c._generateSourcesContent(f._sources.toArray(),f.sourceRoot);f.file=c._file;f._sourceMapURL=h;f._absoluteSources=f._sources.toArray().map(function(r){return Cg.computeSourceURL(f.sourceRoot,
r,h)});c=c._mappings.toArray().slice();for(var b=f.__generatedMappings=[],e=f.__originalMappings=[],m=0,a=c.length;m<a;m++){var g=c[m],l=new YB;l.generatedLine=g.generatedLine;l.generatedColumn=g.generatedColumn;g.source&&(l.source=n.indexOf(g.source),l.originalLine=g.originalLine,l.originalColumn=g.originalColumn,g.name&&(l.name=k.indexOf(g.name)),e.push(l));b.push(l)}CG(f.__originalMappings,Cg.compareByOriginalPositions);return f};Am.prototype._version=3;Object.defineProperty(Am.prototype,"sources",
{get:function(){return(this||jf)._absoluteSources.slice()}});Am.prototype._parseMappings=function(c,h){h=1;for(var f=0,k=0,n=0,b=0,e=0,m=c.length,a=0,g={},l={},r=[],v=[],y,A,E,F,H;a<m;)if(";"===c.charAt(a))h++,a++,f=0;else if(","===c.charAt(a))a++;else{y=new YB;y.generatedLine=h;for(F=a;F<m&&!this._charIsMappingSeparator(c,F);F++);A=c.slice(a,F);if(E=g[A])a+=A.length;else{for(E=[];a<F;)JD.decode(c,a,l),H=l.value,a=l.rest,E.push(H);if(2===E.length)throw Error("Found a source, but no line and column");
if(3===E.length)throw Error("Found a source and line, but no column");g[A]=E}y.generatedColumn=f+E[0];f=y.generatedColumn;1<E.length&&(y.source=b+E[1],b+=E[1],y.originalLine=k+E[2],k=y.originalLine,y.originalLine+=1,y.originalColumn=n+E[3],n=y.originalColumn,4<E.length&&(y.name=e+E[4],e+=E[4]));v.push(y);"number"===typeof y.originalLine&&r.push(y)}CG(v,Cg.compareByGeneratedPositionsDeflated);(this||jf).__generatedMappings=v;CG(r,Cg.compareByOriginalPositions);(this||jf).__originalMappings=r};Am.prototype._findMapping=
function(c,h,f,k,n,b){if(0>=c[f])throw new TypeError("Line must be greater than or equal to 1, got "+c[f]);if(0>c[k])throw new TypeError("Column must be greater than or equal to 0, got "+c[k]);return kT.search(c,h,n,b)};Am.prototype.computeColumnSpans=function(){for(var c=0;c<(this||jf)._generatedMappings.length;++c){var h=(this||jf)._generatedMappings[c];if(c+1<(this||jf)._generatedMappings.length){var f=(this||jf)._generatedMappings[c+1];if(h.generatedLine===f.generatedLine){h.lastGeneratedColumn=
f.generatedColumn-1;continue}}h.lastGeneratedColumn=Infinity}};Am.prototype.originalPositionFor=function(c){var h={generatedLine:Cg.getArg(c,"line"),generatedColumn:Cg.getArg(c,"column")};c=this._findMapping(h,(this||jf)._generatedMappings,"generatedLine","generatedColumn",Cg.compareByGeneratedPositionsDeflated,Cg.getArg(c,"bias",Zi.GREATEST_LOWER_BOUND));if(0<=c&&(c=(this||jf)._generatedMappings[c],c.generatedLine===h.generatedLine)){h=Cg.getArg(c,"source",null);null!==h&&(h=(this||jf)._sources.at(h),
h=Cg.computeSourceURL((this||jf).sourceRoot,h,(this||jf)._sourceMapURL));var f=Cg.getArg(c,"name",null);null!==f&&(f=(this||jf)._names.at(f));return{source:h,line:Cg.getArg(c,"originalLine",null),column:Cg.getArg(c,"originalColumn",null),name:f}}return{source:null,line:null,column:null,name:null}};Am.prototype.hasContentsOfAllSources=function(){return(this||jf).sourcesContent?(this||jf).sourcesContent.length>=(this||jf)._sources.size()&&!(this||jf).sourcesContent.some(function(c){return null==c}):
!1};Am.prototype.sourceContentFor=function(c,h){if(!(this||jf).sourcesContent)return null;var f=this._findSourceIndex(c);if(0<=f)return(this||jf).sourcesContent[f];null!=(this||jf).sourceRoot&&(c=Cg.relative((this||jf).sourceRoot,c));var k;if(null!=(this||jf).sourceRoot&&(k=Cg.urlParse((this||jf).sourceRoot))){f=c.replace(/^file:\/\//,"");if("file"==k.scheme&&(this||jf)._sources.has(f))return(this||jf).sourcesContent[(this||jf)._sources.indexOf(f)];if((!k.path||"/"==k.path)&&(this||jf)._sources.has("/"+
c))return(this||jf).sourcesContent[(this||jf)._sources.indexOf("/"+c)]}if(h)return null;throw Error('"'+c+'" is not in the SourceMap.');};Am.prototype.generatedPositionFor=function(c){var h=Cg.getArg(c,"source");h=this._findSourceIndex(h);if(0>h)return{line:null,column:null,lastColumn:null};h={source:h,originalLine:Cg.getArg(c,"line"),originalColumn:Cg.getArg(c,"column")};c=this._findMapping(h,(this||jf)._originalMappings,"originalLine","originalColumn",Cg.compareByOriginalPositions,Cg.getArg(c,"bias",
Zi.GREATEST_LOWER_BOUND));return 0<=c&&(c=(this||jf)._originalMappings[c],c.source===h.source)?{line:Cg.getArg(c,"generatedLine",null),column:Cg.getArg(c,"generatedColumn",null),lastColumn:Cg.getArg(c,"lastGeneratedColumn",null)}:{line:null,column:null,lastColumn:null}};eq.prototype=Object.create(Zi.prototype);eq.prototype.constructor=Zi;eq.prototype._version=3;Object.defineProperty(eq.prototype,"sources",{get:function(){for(var c=[],h=0;h<(this||jf)._sections.length;h++)for(var f=0;f<(this||jf)._sections[h].consumer.sources.length;f++)c.push((this||
jf)._sections[h].consumer.sources[f]);return c}});eq.prototype.originalPositionFor=function(c){var h={generatedLine:Cg.getArg(c,"line"),generatedColumn:Cg.getArg(c,"column")},f=kT.search(h,(this||jf)._sections,function(k,n){var b=k.generatedLine-n.generatedOffset.generatedLine;return b?b:k.generatedColumn-n.generatedOffset.generatedColumn});return(f=(this||jf)._sections[f])?f.consumer.originalPositionFor({line:h.generatedLine-(f.generatedOffset.generatedLine-1),column:h.generatedColumn-(f.generatedOffset.generatedLine===
h.generatedLine?f.generatedOffset.generatedColumn-1:0),bias:c.bias}):{source:null,line:null,column:null,name:null}};eq.prototype.hasContentsOfAllSources=function(){return(this||jf)._sections.every(function(c){return c.consumer.hasContentsOfAllSources()})};eq.prototype.sourceContentFor=function(c,h){for(var f=0;f<(this||jf)._sections.length;f++){var k=(this||jf)._sections[f].consumer.sourceContentFor(c,!0);if(k)return k}if(h)return null;throw Error('"'+c+'" is not in the SourceMap.');};eq.prototype.generatedPositionFor=
function(c){for(var h=0;h<(this||jf)._sections.length;h++){var f=(this||jf)._sections[h];if(-1!==f.consumer._findSourceIndex(Cg.getArg(c,"source"))){var k=f.consumer.generatedPositionFor(c);if(k)return{line:k.line+(f.generatedOffset.generatedLine-1),column:k.column+(f.generatedOffset.generatedLine===k.line?f.generatedOffset.generatedColumn-1:0)}}}return{line:null,column:null}};eq.prototype._parseMappings=function(c,h){(this||jf).__generatedMappings=[];(this||jf).__originalMappings=[];for(c=0;c<(this||
jf)._sections.length;c++){h=(this||jf)._sections[c];for(var f=h.consumer._generatedMappings,k=0;k<f.length;k++){var n=f[k],b=h.consumer._sources.at(n.source);b=Cg.computeSourceURL(h.consumer.sourceRoot,b,(this||jf)._sourceMapURL);(this||jf)._sources.add(b);b=(this||jf)._sources.indexOf(b);var e=null;n.name&&(e=h.consumer._names.at(n.name),(this||jf)._names.add(e),e=(this||jf)._names.indexOf(e));n={source:b,generatedLine:n.generatedLine+(h.generatedOffset.generatedLine-1),generatedColumn:n.generatedColumn+
(h.generatedOffset.generatedLine===n.generatedLine?h.generatedOffset.generatedColumn-1:0),originalLine:n.originalLine,originalColumn:n.originalColumn,name:e};(this||jf).__generatedMappings.push(n);"number"===typeof n.originalLine&&(this||jf).__originalMappings.push(n)}}CG((this||jf).__generatedMappings,Cg.compareByGeneratedPositionsDeflated);CG((this||jf).__originalMappings,Cg.compareByOriginalPositions)};var rj="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,wL=nn,
nha=/(\r?\n)/;wo.fromStringWithSourceMap=function(c,h,f){function k(r,v){if(null===r||void 0===r.source)n.add(v);else{var y=f?wL.join(f,r.source):r.source;n.add(new wo(r.originalLine,r.originalColumn,y,v,r.name))}}var n=new wo,b=c.split(nha),e=0,m=function(){var r=e<b.length?b[e++]:void 0,v=(e<b.length?b[e++]:void 0)||"";return r+v},a=1,g=0,l=null;h.eachMapping(function(r){if(null!==l)if(a<r.generatedLine)k(l,m()),a++,g=0;else{var v=b[e]||"",y=v.substr(0,r.generatedColumn-g);b[e]=v.substr(r.generatedColumn-
g);g=r.generatedColumn;k(l,y);l=r;return}for(;a<r.generatedLine;)n.add(m()),a++;g<r.generatedColumn&&(v=b[e]||"",n.add(v.substr(0,r.generatedColumn)),b[e]=v.substr(r.generatedColumn),g=r.generatedColumn);l=r},this||rj);e<b.length&&(l&&k(l,m()),n.add(b.splice(e).join("")));h.sources.forEach(function(r){var v=h.sourceContentFor(r);null!=v&&(null!=f&&(r=wL.join(f,r)),n.setSourceContent(r,v))});return n};wo.prototype.add=function(c){if(Array.isArray(c))c.forEach(function(h){this.add(h)},this||rj);else if(c.$$$isSourceNode$$$||
"string"===typeof c)c&&(this||rj).children.push(c);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+c);return this||rj};wo.prototype.prepend=function(c){if(Array.isArray(c))for(var h=c.length-1;0<=h;h--)this.prepend(c[h]);else if(c.$$$isSourceNode$$$||"string"===typeof c)(this||rj).children.unshift(c);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+c);return this||rj};wo.prototype.walk=function(c){for(var h,
f=0,k=(this||rj).children.length;f<k;f++)h=(this||rj).children[f],h.$$$isSourceNode$$$?h.walk(c):""!==h&&c(h,{source:(this||rj).source,line:(this||rj).line,column:(this||rj).column,name:(this||rj).name})};wo.prototype.join=function(c){var h,f=(this||rj).children.length;if(0<f){var k=[];for(h=0;h<f-1;h++)k.push((this||rj).children[h]),k.push(c);k.push((this||rj).children[h]);(this||rj).children=k}return this||rj};wo.prototype.replaceRight=function(c,h){var f=(this||rj).children[(this||rj).children.length-
1];f.$$$isSourceNode$$$?f.replaceRight(c,h):"string"===typeof f?(this||rj).children[(this||rj).children.length-1]=f.replace(c,h):(this||rj).children.push("".replace(c,h));return this||rj};wo.prototype.setSourceContent=function(c,h){(this||rj).sourceContents[wL.toSetString(c)]=h};wo.prototype.walkSourceContents=function(c){for(var h=0,f=(this||rj).children.length;h<f;h++)(this||rj).children[h].$$$isSourceNode$$$&&(this||rj).children[h].walkSourceContents(c);var k=Object.keys((this||rj).sourceContents);
h=0;for(f=k.length;h<f;h++)c(wL.fromSetString(k[h]),(this||rj).sourceContents[k[h]])};wo.prototype.toString=function(){var c="";this.walk(function(h){c+=h});return c};wo.prototype.toStringWithSourceMap=function(c){var h="",f=1,k=0,n=new vp(c),b=!1,e=null,m=null,a=null,g=null;this.walk(function(l,r){h+=l;null!==r.source&&null!==r.line&&null!==r.column?(e===r.source&&m===r.line&&a===r.column&&g===r.name||n.addMapping({source:r.source,original:{line:r.line,column:r.column},generated:{line:f,column:k},
name:r.name}),e=r.source,m=r.line,a=r.column,g=r.name,b=!0):b&&(n.addMapping({generated:{line:f,column:k}}),e=null,b=!1);for(var v=0,y=l.length;v<y;v++)10===l.charCodeAt(v)?(f++,k=0,v+1===y?(e=null,b=!1):b&&n.addMapping({source:r.source,original:{line:r.line,column:r.column},generated:{line:f,column:k},name:r.name})):k++});this.walkSourceContents(function(l,r){n.setSourceContent(l,r)});return{code:h,map:n}};var Cn="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,fp=
{};(function(){function c(){return{indent:null,base:null,parse:null,comment:!1,format:{indent:{style:"    ",base:0,adjustMultilineComment:!1},newline:"\n",space:" ",json:!1,renumber:!1,hexadecimal:!1,quotes:"single",escapeless:!1,compact:!1,parentheses:!0,semicolons:!0,safeConcatenation:!1,preserveBlankLines:!1},moz:{comprehensionExpressionStartsWithAssignment:!1,starlessGenerator:!1},sourceMap:null,sourceMapRoot:null,sourceMapWithCode:!1,directive:!1,raw:!0,verbatim:null,sourceCode:null}}function h(ka,
Fa){var Sa="";for(Fa|=0;0<Fa;Fa>>>=1,ka+=ka)Fa&1&&(Sa+=ka);return Sa}function f(ka){var Fa=ka.length;return Fa&&jc.code.isLineTerminator(ka.charCodeAt(Fa-1))}function k(ka,Fa){for(var Sa in Fa)Fa.hasOwnProperty(Sa)&&(ka[Sa]=Fa[Sa]);return ka}function n(ka,Fa){function Sa(Ld){return"object"===typeof Ld&&Ld instanceof Object&&!(Ld instanceof RegExp)}var wb;for(wb in Fa)if(Fa.hasOwnProperty(wb)){var cc=Fa[wb];Sa(cc)?Sa(ka[wb])?n(ka[wb],cc):ka[wb]=n({},cc):ka[wb]=cc}return ka}function b(ka,Fa){return 8232===
(ka&-2)?(Fa?"u":"\\u")+(8232===ka?"2028":"2029"):10===ka||13===ka?(Fa?"":"\\")+(10===ka?"n":"r"):String.fromCharCode(ka)}function e(ka,Fa){if(8===ka)return"\\b";if(12===ka)return"\\f";if(9===ka)return"\\t";var Sa=ka.toString(16).toUpperCase();return K||255<ka?"\\u"+"0000".slice(Sa.length)+Sa:0!==ka||jc.code.isDecimalDigit(Fa)?11===ka?"\\x0B":"\\x"+"00".slice(Sa.length)+Sa:"\\0"}function m(ka){if(92===ka)return"\\\\";if(10===ka)return"\\n";if(13===ka)return"\\r";if(8232===ka)return"\\u2028";if(8233===
ka)return"\\u2029";throw Error("Incorrectly classified character");}function a(ka){var Fa,Sa="";var wb=0;for(Fa=ka.length;wb<Fa;++wb){var cc=ka[wb];Sa+=Array.isArray(cc)?a(cc):cc}return Sa}function g(ka,Fa){if(!Kb)return Array.isArray(ka)?a(ka):ka;if(null==Fa){if(ka instanceof ea)return ka;Fa={}}return null==Fa.loc?new ea(null,null,Kb,ka,Fa.name||null):new ea(Fa.loc.start.line,Fa.loc.start.column,!0===Kb?Fa.loc.source||null:Kb,ka,Fa.name||null)}function l(){return oa?oa:" "}function r(ka,Fa){var Sa=
g(ka).toString();if(0===Sa.length)return[Fa];var wb=g(Fa).toString();if(0===wb.length)return[ka];Sa=Sa.charCodeAt(Sa.length-1);wb=wb.charCodeAt(0);return(43===Sa||45===Sa)&&Sa===wb||jc.code.isIdentifierPartES5(Sa)&&jc.code.isIdentifierPartES5(wb)||47===Sa&&105===wb?[ka,l(),Fa]:jc.code.isWhiteSpace(Sa)||jc.code.isLineTerminator(Sa)||jc.code.isWhiteSpace(wb)||jc.code.isLineTerminator(wb)?[ka,Fa]:[ka,oa,Fa]}function v(ka){var Fa=Aa;Aa+=Ma;ka(Aa);Aa=Fa}function y(ka,Fa){if("Line"===ka.type){if(f(ka.value))return"//"+
ka.value;Fa="//"+ka.value;Vb||(Fa+="\n");return Fa}if(ta.format.indent.adjustMultilineComment&&/[\n\r]/.test(ka.value)){var Sa,wb;ka=("/*"+ka.value+"*/").split(/\r\n|[\r\n]/);var cc=Number.MAX_VALUE;var Ld=1;for(Sa=ka.length;Ld<Sa;++Ld){var Jd=ka[Ld];for(wb=0;wb<Jd.length&&jc.code.isWhiteSpace(Jd.charCodeAt(wb));)++wb;cc>wb&&(cc=wb)}"undefined"!==typeof Fa?(Jd=Aa,"*"===ka[1][cc]&&(Fa+=" "),Aa=Fa):(cc&1&&--cc,Jd=Aa);Ld=1;for(Sa=ka.length;Ld<Sa;++Ld)Fa=g([Aa,ka[Ld].slice(cc)]),ka[Ld]=Kb?Fa.join(""):
Fa;Aa=Jd;return ka.join("\n")}return"/*"+ka.value+"*/"}function A(ka,Fa){var Sa;if(ka.leadingComments&&0<ka.leadingComments.length){var wb=Fa;if(Vb){var cc=ka.leadingComments[0];Fa=[];var Ld=cc.extendedRange;var Jd=cc.range;var Uc=kc.substring(Ld[0],Jd[0]);var af=(Uc.match(/\n/g)||[]).length;0<af?(Fa.push(h("\n",af)),Fa.push([Aa,y(cc)])):(Fa.push(Uc),Fa.push(y(cc)));af=Jd;Uc=1;for(Sa=ka.leadingComments.length;Uc<Sa;Uc++)cc=ka.leadingComments[Uc],Jd=cc.range,af=kc.substring(af[1],Jd[0]),af=(af.match(/\n/g)||
[]).length,Fa.push(h("\n",af)),Fa.push([Aa,y(cc)]),af=Jd;Uc=kc.substring(Jd[1],Ld[1]);af=(Uc.match(/\n/g)||[]).length;Fa.push(h("\n",af))}else for(cc=ka.leadingComments[0],Fa=[],va&&ka.type===Qc.Program&&0===ka.body.length&&Fa.push("\n"),Fa.push(y(cc)),f(g(Fa).toString())||Fa.push("\n"),Uc=1,Sa=ka.leadingComments.length;Uc<Sa;++Uc)cc=ka.leadingComments[Uc],cc=[y(cc)],f(g(cc).toString())||cc.push("\n"),Fa.push([Aa,cc]);Fa.push([Aa,wb])}if(ka.trailingComments)if(Vb)cc=ka.trailingComments[0],Ld=cc.extendedRange,
Jd=cc.range,Uc=kc.substring(Ld[0],Jd[0]),af=(Uc.match(/\n/g)||[]).length,0<af?(Fa.push(h("\n",af)),Fa.push([Aa,y(cc)])):(Fa.push(Uc),Fa.push(y(cc)));else{wb=!f(g(Fa).toString());Uc=g([Aa,Fa,Ma]).toString();for(Sa=Uc.length-1;0<=Sa&&!jc.code.isLineTerminator(Uc.charCodeAt(Sa));--Sa);Ld=h(" ",Uc.length-1-Sa);Uc=0;for(Sa=ka.trailingComments.length;Uc<Sa;++Uc)cc=ka.trailingComments[Uc],wb?(Fa=0===Uc?[Fa,Ma]:[Fa,Ld],Fa.push(y(cc,Ld))):Fa=[Fa,[Aa,y(cc)]],Uc===Sa-1||f(g(Fa).toString())||(Fa=[Fa,"\n"])}return Fa}
function E(ka,Fa,Sa){for(var wb=0;ka<Fa;ka++)"\n"===kc[ka]&&wb++;for(ka=1;ka<wb;ka++)Sa.push(fa)}function F(ka,Fa,Sa){return Fa<Sa?["(",ka,")"]:ka}function H(ka){var Fa;var Sa=ka.split(/\r\n|\n/);ka=1;for(Fa=Sa.length;ka<Fa;ka++)Sa[ka]=fa+Aa+Sa[ka];return Sa}function I(){}function M(ka){return g(ka.name,ka)}function N(ka,Fa){return ka.async?"async"+(Fa?l():oa):""}function W(ka){return ka.generator&&!ta.moz.starlessGenerator?"*"+oa:""}function X(ka){var Fa=ka.value,Sa="";Fa.async&&(Sa+=N(Fa,!ka.computed));
Fa.generator&&(Sa+=W(Fa)?"*":"");return Sa}var ea,Aa,Ma,K,aa,T,U,pa,fa,oa,gb,zb,va,ma,ta,Na,Kb,kc,Vb;var jc=BG;var Qc=hT.Syntax;var Pb={Sequence:0,Yield:1,Assignment:1,Conditional:2,ArrowFunction:2,LogicalOR:3,LogicalAND:4,BitwiseOR:5,BitwiseXOR:6,BitwiseAND:7,Equality:8,Relational:9,BitwiseSHIFT:10,Additive:11,Multiplicative:12,Exponentiation:13,Await:14,Unary:14,Postfix:15,OptionalChaining:16,Call:17,New:18,TaggedTemplate:19,Member:20,Primary:21};var xd={"||":Pb.LogicalOR,"&&":Pb.LogicalAND,"|":Pb.BitwiseOR,
"^":Pb.BitwiseXOR,"&":Pb.BitwiseAND,"==":Pb.Equality,"!=":Pb.Equality,"===":Pb.Equality,"!==":Pb.Equality,is:Pb.Equality,isnt:Pb.Equality,"<":Pb.Relational,">":Pb.Relational,"<=":Pb.Relational,">=":Pb.Relational,"in":Pb.Relational,"instanceof":Pb.Relational,"<<":Pb.BitwiseSHIFT,">>":Pb.BitwiseSHIFT,">>>":Pb.BitwiseSHIFT,"+":Pb.Additive,"-":Pb.Additive,"*":Pb.Multiplicative,"%":Pb.Multiplicative,"/":Pb.Multiplicative,"**":Pb.Exponentiation};I.prototype.maybeBlock=function(ka,Fa){var Sa,wb=this||Cn;
var cc=!ta.comment||!ka.leadingComments;if(ka.type===Qc.BlockStatement&&cc)return[oa,this.generateStatement(ka,Fa)];if(ka.type===Qc.EmptyStatement&&cc)return";";v(function(){Sa=[fa,[Aa,wb.generateStatement(ka,Fa)]]});return Sa};I.prototype.maybeBlockSuffix=function(ka,Fa){var Sa=f(g(Fa).toString());return ka.type!==Qc.BlockStatement||ta.comment&&ka.leadingComments||Sa?Sa?[Fa,Aa]:[Fa,fa,Aa]:[Fa,oa]};I.prototype.generatePattern=function(ka,Fa,Sa){return ka.type===Qc.Identifier?M(ka):this.generateExpression(ka,
Fa,Sa)};I.prototype.generateFunctionParams=function(ka){var Fa;var Sa=!1;if(ka.type!==Qc.ArrowFunctionExpression||ka.rest||ka.defaults&&0!==ka.defaults.length||1!==ka.params.length||ka.params[0].type!==Qc.Identifier){var wb=ka.type===Qc.ArrowFunctionExpression?[N(ka,!1)]:[];wb.push("(");ka.defaults&&(Sa=!0);var cc=0;for(Fa=ka.params.length;cc<Fa;++cc)Sa&&ka.defaults[cc]?wb.push(this.generateAssignment(ka.params[cc],ka.defaults[cc],"=",Pb.Assignment,7)):wb.push(this.generatePattern(ka.params[cc],Pb.Assignment,
7)),cc+1<Fa&&wb.push(","+oa);ka.rest&&(ka.params.length&&wb.push(","+oa),wb.push("..."),wb.push(M(ka.rest)));wb.push(")")}else wb=[N(ka,!0),M(ka.params[0])];return wb};I.prototype.generateFunctionBody=function(ka){var Fa=this.generateFunctionParams(ka);ka.type===Qc.ArrowFunctionExpression&&(Fa.push(oa),Fa.push("=>"));ka.expression?(Fa.push(oa),ka=this.generateExpression(ka.body,Pb.Assignment,7),"{"===ka.toString().charAt(0)&&(ka=["(",ka,")"]),Fa.push(ka)):Fa.push(this.maybeBlock(ka.body,9));return Fa};
I.prototype.generateIterationForStatement=function(ka,Fa,Sa){var wb=["for"+(Fa.await?l()+"await":"")+oa+"("],cc=this||Cn;v(function(){Fa.left.type===Qc.VariableDeclaration?v(function(){wb.push(Fa.left.kind+l());wb.push(cc.generateStatement(Fa.left.declarations[0],0))}):wb.push(cc.generateExpression(Fa.left,Pb.Call,7));wb=r(wb,ka);wb=[r(wb,cc.generateExpression(Fa.right,Pb.Assignment,7)),")"]});wb.push(this.maybeBlock(Fa.body,Sa));return wb};I.prototype.generatePropertyKey=function(ka,Fa){var Sa=[];
Fa&&Sa.push("[");Sa.push(this.generateExpression(ka,Pb.Assignment,7));Fa&&Sa.push("]");return Sa};I.prototype.generateAssignment=function(ka,Fa,Sa,wb,cc){Pb.Assignment<wb&&(cc|=1);return F([this.generateExpression(ka,Pb.Call,cc),oa+Sa+oa,this.generateExpression(Fa,Pb.Assignment,cc)],Pb.Assignment,wb)};I.prototype.semicolon=function(ka){return!zb&&ka&32?"":";"};I.Statement={BlockStatement:function(ka,Fa){var Sa,wb,cc=["{",fa],Ld=this||Cn;v(function(){0===ka.body.length&&Vb&&(Sa=ka.range,2<Sa[1]-Sa[0]&&
(wb=kc.substring(Sa[0]+1,Sa[1]-1),"\n"===wb[0]&&(cc=["{"]),cc.push(wb)));var Jd;var Uc=1;Fa&8&&(Uc|=16);var af=0;for(Jd=ka.body.length;af<Jd;++af){Vb&&(0===af&&(ka.body[0].leadingComments&&(Sa=ka.body[0].leadingComments[0].extendedRange,wb=kc.substring(Sa[0],Sa[1]),"\n"===wb[0]&&(cc=["{"])),ka.body[0].leadingComments||E(ka.range[0],ka.body[0].range[0],cc)),0<af&&(ka.body[af-1].trailingComments||ka.body[af].leadingComments||E(ka.body[af-1].range[1],ka.body[af].range[0],cc)));af===Jd-1&&(Uc|=32);var Ne=
ka.body[af].leadingComments&&Vb?Ld.generateStatement(ka.body[af],Uc):[Aa,Ld.generateStatement(ka.body[af],Uc)];cc.push(Ne);f(g(Ne).toString())||(Vb&&af<Jd-1?ka.body[af+1].leadingComments||cc.push(fa):cc.push(fa));Vb&&af===Jd-1&&(ka.body[af].trailingComments||E(ka.body[af].range[1],ka.range[1],cc))}});cc.push([Aa,"}"]);return cc},BreakStatement:function(ka,Fa){return ka.label?"break "+ka.label.name+this.semicolon(Fa):"break"+this.semicolon(Fa)},ContinueStatement:function(ka,Fa){return ka.label?"continue "+
ka.label.name+this.semicolon(Fa):"continue"+this.semicolon(Fa)},ClassBody:function(ka,Fa){var Sa=["{",fa],wb=this||Cn;v(function(cc){var Ld;var Jd=0;for(Ld=ka.body.length;Jd<Ld;++Jd)Sa.push(cc),Sa.push(wb.generateExpression(ka.body[Jd],Pb.Sequence,7)),Jd+1<Ld&&Sa.push(fa)});f(g(Sa).toString())||Sa.push(fa);Sa.push(Aa);Sa.push("}");return Sa},ClassDeclaration:function(ka,Fa){Fa=["class"];ka.id&&(Fa=r(Fa,this.generateExpression(ka.id,Pb.Sequence,7)));if(ka.superClass){var Sa=r("extends",this.generateExpression(ka.superClass,
Pb.Unary,7));Fa=r(Fa,Sa)}Fa.push(oa);Fa.push(this.generateStatement(ka.body,33));return Fa},DirectiveStatement:function(ka,Fa){if(ta.raw&&ka.raw)return ka.raw+this.semicolon(Fa);ka=ka.directive;var Sa;var wb="double"===U?'"':"'";var cc=0;for(Sa=ka.length;cc<Sa;++cc){var Ld=ka.charCodeAt(cc);if(39===Ld){wb='"';break}else if(34===Ld){wb="'";break}else 92===Ld&&++cc}return wb+ka+wb+this.semicolon(Fa)},DoWhileStatement:function(ka,Fa){var Sa=r("do",this.maybeBlock(ka.body,1));Sa=this.maybeBlockSuffix(ka.body,
Sa);return r(Sa,["while"+oa+"(",this.generateExpression(ka.test,Pb.Sequence,7),")"+this.semicolon(Fa)])},CatchClause:function(ka,Fa){var Sa,wb=this||Cn;v(function(){if(ka.param){if(Sa=["catch"+oa+"(",wb.generateExpression(ka.param,Pb.Sequence,7),")"],ka.guard){var cc=wb.generateExpression(ka.guard,Pb.Sequence,7);Sa.splice(2,0," if ",cc)}}else Sa=["catch"]});Sa.push(this.maybeBlock(ka.body,1));return Sa},DebuggerStatement:function(ka,Fa){return"debugger"+this.semicolon(Fa)},EmptyStatement:function(ka,
Fa){return";"},ExportDefaultDeclaration:function(ka,Fa){var Sa=["export"];var wb=Fa&32?33:1;Sa=r(Sa,"default");return Sa=I.Statement.hasOwnProperty(ka.declaration.type)?r(Sa,this.generateStatement(ka.declaration,wb)):r(Sa,this.generateExpression(ka.declaration,Pb.Assignment,7)+this.semicolon(Fa))},ExportNamedDeclaration:function(ka,Fa){var Sa=["export"],wb=this||Cn;var cc=Fa&32?33:1;if(ka.declaration)return r(Sa,this.generateStatement(ka.declaration,cc));ka.specifiers&&(0===ka.specifiers.length?Sa=
r(Sa,"{"+oa+"}"):ka.specifiers[0].type===Qc.ExportBatchSpecifier?Sa=r(Sa,this.generateExpression(ka.specifiers[0],Pb.Sequence,7)):(Sa=r(Sa,"{"),v(function(Ld){var Jd;Sa.push(fa);var Uc=0;for(Jd=ka.specifiers.length;Uc<Jd;++Uc)Sa.push(Ld),Sa.push(wb.generateExpression(ka.specifiers[Uc],Pb.Sequence,7)),Uc+1<Jd&&Sa.push(","+fa)}),f(g(Sa).toString())||Sa.push(fa),Sa.push(Aa+"}")),ka.source?Sa=r(Sa,["from"+oa,this.generateExpression(ka.source,Pb.Sequence,7),this.semicolon(Fa)]):Sa.push(this.semicolon(Fa)));
return Sa},ExportAllDeclaration:function(ka,Fa){return["export"+oa,"*"+oa,"from"+oa,this.generateExpression(ka.source,Pb.Sequence,7),this.semicolon(Fa)]},ExpressionStatement:function(ka,Fa){function Sa(Uc){if("class"!==Uc.slice(0,5))return!1;Uc=Uc.charCodeAt(5);return 123===Uc||jc.code.isWhiteSpace(Uc)||jc.code.isLineTerminator(Uc)}function wb(Uc){if("function"!==Uc.slice(0,8))return!1;Uc=Uc.charCodeAt(8);return 40===Uc||jc.code.isWhiteSpace(Uc)||42===Uc||jc.code.isLineTerminator(Uc)}function cc(Uc){var af;
if("async"!==Uc.slice(0,5)||!jc.code.isWhiteSpace(Uc.charCodeAt(5)))return!1;var Ne=6;for(af=Uc.length;Ne<af&&jc.code.isWhiteSpace(Uc.charCodeAt(Ne));++Ne);if(Ne===af||"function"!==Uc.slice(Ne,Ne+8))return!1;Uc=Uc.charCodeAt(Ne+8);return 40===Uc||jc.code.isWhiteSpace(Uc)||42===Uc||jc.code.isLineTerminator(Uc)}var Ld=[this.generateExpression(ka.expression,Pb.Sequence,7)];var Jd=g(Ld).toString();123===Jd.charCodeAt(0)||Sa(Jd)||wb(Jd)||cc(Jd)||ma&&Fa&16&&ka.expression.type===Qc.Literal&&"string"===typeof ka.expression.value?
Ld=["(",Ld,")"+this.semicolon(Fa)]:Ld.push(this.semicolon(Fa));return Ld},ImportDeclaration:function(ka,Fa){var Sa=this||Cn;if(0===ka.specifiers.length)return["import",oa,this.generateExpression(ka.source,Pb.Sequence,7),this.semicolon(Fa)];var wb=["import"];var cc=0;ka.specifiers[cc].type===Qc.ImportDefaultSpecifier&&(wb=r(wb,[this.generateExpression(ka.specifiers[cc],Pb.Sequence,7)]),++cc);ka.specifiers[cc]&&(0!==cc&&wb.push(","),ka.specifiers[cc].type===Qc.ImportNamespaceSpecifier?wb=r(wb,[oa,this.generateExpression(ka.specifiers[cc],
Pb.Sequence,7)]):(wb.push(oa+"{"),1===ka.specifiers.length-cc?(wb.push(oa),wb.push(this.generateExpression(ka.specifiers[cc],Pb.Sequence,7)),wb.push(oa+"}"+oa)):(v(function(Ld){var Jd;wb.push(fa);var Uc=cc;for(Jd=ka.specifiers.length;Uc<Jd;++Uc)wb.push(Ld),wb.push(Sa.generateExpression(ka.specifiers[Uc],Pb.Sequence,7)),Uc+1<Jd&&wb.push(","+fa)}),f(g(wb).toString())||wb.push(fa),wb.push(Aa+"}"+oa))));return wb=r(wb,["from"+oa,this.generateExpression(ka.source,Pb.Sequence,7),this.semicolon(Fa)])},VariableDeclarator:function(ka,
Fa){Fa=Fa&1?7:6;return ka.init?[this.generateExpression(ka.id,Pb.Assignment,Fa),oa,"=",oa,this.generateExpression(ka.init,Pb.Assignment,Fa)]:this.generatePattern(ka.id,Pb.Assignment,Fa)},VariableDeclaration:function(ka,Fa){function Sa(){Ld=ka.declarations[0];ta.comment&&Ld.leadingComments?(Uc.push("\n"),Uc.push([Aa,Jd.generateStatement(Ld,af)])):(Uc.push(l()),Uc.push(Jd.generateStatement(Ld,af)));wb=1;for(cc=ka.declarations.length;wb<cc;++wb)Ld=ka.declarations[wb],ta.comment&&Ld.leadingComments?(Uc.push(","+
fa),Uc.push([Aa,Jd.generateStatement(Ld,af)])):(Uc.push(","+oa),Uc.push(Jd.generateStatement(Ld,af)))}var wb,cc,Ld,Jd=this||Cn;var Uc=[ka.kind];var af=Fa&1?1:0;1<ka.declarations.length?v(Sa):Sa();Uc.push(this.semicolon(Fa));return Uc},ThrowStatement:function(ka,Fa){return[r("throw",this.generateExpression(ka.argument,Pb.Sequence,7)),this.semicolon(Fa)]},TryStatement:function(ka,Fa){var Sa;Fa=["try",this.maybeBlock(ka.block,1)];Fa=this.maybeBlockSuffix(ka.block,Fa);if(ka.handlers){var wb=0;for(Sa=
ka.handlers.length;wb<Sa;++wb)if(Fa=r(Fa,this.generateStatement(ka.handlers[wb],1)),ka.finalizer||wb+1!==Sa)Fa=this.maybeBlockSuffix(ka.handlers[wb].body,Fa)}else{var cc=ka.guardedHandlers||[];wb=0;for(Sa=cc.length;wb<Sa;++wb)if(Fa=r(Fa,this.generateStatement(cc[wb],1)),ka.finalizer||wb+1!==Sa)Fa=this.maybeBlockSuffix(cc[wb].body,Fa);if(ka.handler)if(Array.isArray(ka.handler))for(wb=0,Sa=ka.handler.length;wb<Sa;++wb){if(Fa=r(Fa,this.generateStatement(ka.handler[wb],1)),ka.finalizer||wb+1!==Sa)Fa=
this.maybeBlockSuffix(ka.handler[wb].body,Fa)}else Fa=r(Fa,this.generateStatement(ka.handler,1)),ka.finalizer&&(Fa=this.maybeBlockSuffix(ka.handler.body,Fa))}ka.finalizer&&(Fa=r(Fa,["finally",this.maybeBlock(ka.finalizer,1)]));return Fa},SwitchStatement:function(ka,Fa){var Sa,wb,cc=this||Cn;v(function(){Sa=["switch"+oa+"(",cc.generateExpression(ka.discriminant,Pb.Sequence,7),")"+oa+"{"+fa]});if(ka.cases){var Ld=1;var Jd=0;for(wb=ka.cases.length;Jd<wb;++Jd)Jd===wb-1&&(Ld|=32),Fa=[Aa,this.generateStatement(ka.cases[Jd],
Ld)],Sa.push(Fa),f(g(Fa).toString())||Sa.push(fa)}Sa.push([Aa,"}"]);return Sa},SwitchCase:function(ka,Fa){var Sa,wb,cc,Ld,Jd,Uc=this||Cn;v(function(){Sa=ka.test?[r("case",Uc.generateExpression(ka.test,Pb.Sequence,7)),":"]:["default:"];cc=0;(Ld=ka.consequent.length)&&ka.consequent[0].type===Qc.BlockStatement&&(wb=Uc.maybeBlock(ka.consequent[0],1),Sa.push(wb),cc=1);cc===Ld||f(g(Sa).toString())||Sa.push(fa);for(Jd=1;cc<Ld;++cc)cc===Ld-1&&Fa&32&&(Jd|=32),wb=[Aa,Uc.generateStatement(ka.consequent[cc],
Jd)],Sa.push(wb),cc+1===Ld||f(g(wb).toString())||Sa.push(fa)});return Sa},IfStatement:function(ka,Fa){var Sa=this||Cn;v(function(){cc=["if"+oa+"(",Sa.generateExpression(ka.test,Pb.Sequence,7),")"]});var wb=1;Fa&32&&(wb|=32);if(ka.alternate){cc.push(this.maybeBlock(ka.consequent,1));var cc=this.maybeBlockSuffix(ka.consequent,cc);cc=ka.alternate.type===Qc.IfStatement?r(cc,["else ",this.generateStatement(ka.alternate,wb)]):r(cc,r("else",this.maybeBlock(ka.alternate,wb)))}else cc.push(this.maybeBlock(ka.consequent,
wb));return cc},ForStatement:function(ka,Fa){var Sa,wb=this||Cn;v(function(){Sa=["for"+oa+"("];ka.init?ka.init.type===Qc.VariableDeclaration?Sa.push(wb.generateStatement(ka.init,0)):(Sa.push(wb.generateExpression(ka.init,Pb.Sequence,6)),Sa.push(";")):Sa.push(";");ka.test&&(Sa.push(oa),Sa.push(wb.generateExpression(ka.test,Pb.Sequence,7)));Sa.push(";");ka.update&&(Sa.push(oa),Sa.push(wb.generateExpression(ka.update,Pb.Sequence,7)));Sa.push(")")});Sa.push(this.maybeBlock(ka.body,Fa&32?33:1));return Sa},
ForInStatement:function(ka,Fa){return this.generateIterationForStatement("in",ka,Fa&32?33:1)},ForOfStatement:function(ka,Fa){return this.generateIterationForStatement("of",ka,Fa&32?33:1)},LabeledStatement:function(ka,Fa){return[ka.label.name+":",this.maybeBlock(ka.body,Fa&32?33:1)]},Program:function(ka,Fa){var Sa;var wb=ka.body.length;Fa=[va&&0<wb?"\n":""];var cc=17;for(Sa=0;Sa<wb;++Sa){va||Sa!==wb-1||(cc|=32);Vb&&(0===Sa&&(ka.body[0].leadingComments||E(ka.range[0],ka.body[Sa].range[0],Fa)),0<Sa&&
(ka.body[Sa-1].trailingComments||ka.body[Sa].leadingComments||E(ka.body[Sa-1].range[1],ka.body[Sa].range[0],Fa)));var Ld=[Aa,this.generateStatement(ka.body[Sa],cc)];Fa.push(Ld);Sa+1<wb&&!f(g(Ld).toString())&&(Vb?ka.body[Sa+1].leadingComments||Fa.push(fa):Fa.push(fa));Vb&&Sa===wb-1&&(ka.body[Sa].trailingComments||E(ka.body[Sa].range[1],ka.range[1],Fa))}return Fa},FunctionDeclaration:function(ka,Fa){return[N(ka,!0),"function",W(ka)||l(),ka.id?M(ka.id):"",this.generateFunctionBody(ka)]},ReturnStatement:function(ka,
Fa){return ka.argument?[r("return",this.generateExpression(ka.argument,Pb.Sequence,7)),this.semicolon(Fa)]:["return"+this.semicolon(Fa)]},WhileStatement:function(ka,Fa){var Sa,wb=this||Cn;v(function(){Sa=["while"+oa+"(",wb.generateExpression(ka.test,Pb.Sequence,7),")"]});Sa.push(this.maybeBlock(ka.body,Fa&32?33:1));return Sa},WithStatement:function(ka,Fa){var Sa,wb=this||Cn;v(function(){Sa=["with"+oa+"(",wb.generateExpression(ka.object,Pb.Sequence,7),")"]});Sa.push(this.maybeBlock(ka.body,Fa&32?33:
1));return Sa}};k(I.prototype,I.Statement);I.Expression={SequenceExpression:function(ka,Fa,Sa){var wb;Pb.Sequence<Fa&&(Sa|=1);var cc=[];var Ld=0;for(wb=ka.expressions.length;Ld<wb;++Ld)cc.push(this.generateExpression(ka.expressions[Ld],Pb.Assignment,Sa)),Ld+1<wb&&cc.push(","+oa);return F(cc,Pb.Sequence,Fa)},AssignmentExpression:function(ka,Fa,Sa){return this.generateAssignment(ka.left,ka.right,ka.operator,Fa,Sa)},ArrowFunctionExpression:function(ka,Fa,Sa){return F(this.generateFunctionBody(ka),Pb.ArrowFunction,
Fa)},ConditionalExpression:function(ka,Fa,Sa){Pb.Conditional<Fa&&(Sa|=1);return F([this.generateExpression(ka.test,Pb.LogicalOR,Sa),oa+"?"+oa,this.generateExpression(ka.consequent,Pb.Assignment,Sa),oa+":"+oa,this.generateExpression(ka.alternate,Pb.Assignment,Sa)],Pb.Conditional,Fa)},LogicalExpression:function(ka,Fa,Sa){return this.BinaryExpression(ka,Fa,Sa)},BinaryExpression:function(ka,Fa,Sa){var wb=xd[ka.operator];var cc="**"===ka.operator?Pb.Postfix:wb;var Ld="**"===ka.operator?wb:wb+1;wb<Fa&&
(Sa|=1);cc=this.generateExpression(ka.left,cc,Sa);var Jd=cc.toString();Jd=47===Jd.charCodeAt(Jd.length-1)&&jc.code.isIdentifierPartES5(ka.operator.charCodeAt(0))?[cc,l(),ka.operator]:r(cc,ka.operator);cc=this.generateExpression(ka.right,Ld,Sa);"/"===ka.operator&&"/"===cc.toString().charAt(0)||"<"===ka.operator.slice(-1)&&"!--"===cc.toString().slice(0,3)?(Jd.push(l()),Jd.push(cc)):Jd=r(Jd,cc);return"in"!==ka.operator||Sa&1?F(Jd,wb,Fa):["(",Jd,")"]},CallExpression:function(ka,Fa,Sa){var wb;var cc=[this.generateExpression(ka.callee,
Pb.Call,3)];ka.optional&&cc.push("?.");cc.push("(");var Ld=0;for(wb=ka.arguments.length;Ld<wb;++Ld)cc.push(this.generateExpression(ka.arguments[Ld],Pb.Assignment,7)),Ld+1<wb&&cc.push(","+oa);cc.push(")");return Sa&2?F(cc,Pb.Call,Fa):["(",cc,")"]},ChainExpression:function(ka,Fa,Sa){Pb.OptionalChaining<Fa&&(Sa|=2);ka=this.generateExpression(ka.expression,Pb.OptionalChaining,Sa);return F(ka,Pb.OptionalChaining,Fa)},NewExpression:function(ka,Fa,Sa){var wb=ka.arguments.length;var cc=r("new",this.generateExpression(ka.callee,
Pb.New,Sa&4&&!gb&&0===wb?5:1));if(!(Sa&4)||gb||0<wb){cc.push("(");for(Sa=0;Sa<wb;++Sa)cc.push(this.generateExpression(ka.arguments[Sa],Pb.Assignment,7)),Sa+1<wb&&cc.push(","+oa);cc.push(")")}return F(cc,Pb.New,Fa)},MemberExpression:function(ka,Fa,Sa){var wb=[this.generateExpression(ka.object,Pb.Call,Sa&2?3:1)];ka.computed?(ka.optional&&wb.push("?."),wb.push("["),wb.push(this.generateExpression(ka.property,Pb.Sequence,Sa&2?7:5)),wb.push("]")):(ka.optional||ka.object.type!==Qc.Literal||"number"!==typeof ka.object.value||
(Sa=g(wb).toString(),0>Sa.indexOf(".")&&!/[eExX]/.test(Sa)&&jc.code.isDecimalDigit(Sa.charCodeAt(Sa.length-1))&&!(2<=Sa.length&&48===Sa.charCodeAt(0))&&wb.push(" ")),wb.push(ka.optional?"?.":"."),wb.push(M(ka.property)));return F(wb,Pb.Member,Fa)},MetaProperty:function(ka,Fa,Sa){Sa=[];Sa.push("string"===typeof ka.meta?ka.meta:M(ka.meta));Sa.push(".");Sa.push("string"===typeof ka.property?ka.property:M(ka.property));return F(Sa,Pb.Member,Fa)},UnaryExpression:function(ka,Fa,Sa){var wb=this.generateExpression(ka.argument,
Pb.Unary,7);if(""===oa)Sa=r(ka.operator,wb);else if(Sa=[ka.operator],2<ka.operator.length)Sa=r(Sa,wb);else{ka=g(Sa).toString();var cc=ka.charCodeAt(ka.length-1);ka=wb.toString().charCodeAt(0);((43===cc||45===cc)&&cc===ka||jc.code.isIdentifierPartES5(cc)&&jc.code.isIdentifierPartES5(ka))&&Sa.push(l());Sa.push(wb)}return F(Sa,Pb.Unary,Fa)},YieldExpression:function(ka,Fa,Sa){Sa=ka.delegate?"yield*":"yield";ka.argument&&(Sa=r(Sa,this.generateExpression(ka.argument,Pb.Yield,7)));return F(Sa,Pb.Yield,Fa)},
AwaitExpression:function(ka,Fa,Sa){ka=r(ka.all?"await*":"await",this.generateExpression(ka.argument,Pb.Await,7));return F(ka,Pb.Await,Fa)},UpdateExpression:function(ka,Fa,Sa){return ka.prefix?F([ka.operator,this.generateExpression(ka.argument,Pb.Unary,7)],Pb.Unary,Fa):F([this.generateExpression(ka.argument,Pb.Postfix,7),ka.operator],Pb.Postfix,Fa)},FunctionExpression:function(ka,Fa,Sa){Fa=[N(ka,!0),"function"];ka.id?(Fa.push(W(ka)||l()),Fa.push(M(ka.id))):Fa.push(W(ka)||oa);Fa.push(this.generateFunctionBody(ka));
return Fa},ArrayPattern:function(ka,Fa,Sa){return this.ArrayExpression(ka,Fa,Sa,!0)},ArrayExpression:function(ka,Fa,Sa,wb){var cc=this||Cn;if(!ka.elements.length)return"[]";var Ld=wb?!1:1<ka.elements.length;var Jd=["[",Ld?fa:""];v(function(Uc){var af;var Ne=0;for(af=ka.elements.length;Ne<af;++Ne)ka.elements[Ne]?(Jd.push(Ld?Uc:""),Jd.push(cc.generateExpression(ka.elements[Ne],Pb.Assignment,7))):(Ld&&Jd.push(Uc),Ne+1===af&&Jd.push(",")),Ne+1<af&&Jd.push(","+(Ld?fa:oa))});Ld&&!f(g(Jd).toString())&&Jd.push(fa);
Jd.push(Ld?Aa:"");Jd.push("]");return Jd},RestElement:function(ka,Fa,Sa){return"..."+this.generatePattern(ka.argument)},ClassExpression:function(ka,Fa,Sa){Fa=["class"];ka.id&&(Fa=r(Fa,this.generateExpression(ka.id,Pb.Sequence,7)));ka.superClass&&(Sa=r("extends",this.generateExpression(ka.superClass,Pb.Unary,7)),Fa=r(Fa,Sa));Fa.push(oa);Fa.push(this.generateStatement(ka.body,33));return Fa},MethodDefinition:function(ka,Fa,Sa){Fa=ka["static"]?["static"+oa]:[];ka="get"===ka.kind||"set"===ka.kind?[r(ka.kind,
this.generatePropertyKey(ka.key,ka.computed)),this.generateFunctionBody(ka.value)]:[X(ka),this.generatePropertyKey(ka.key,ka.computed),this.generateFunctionBody(ka.value)];return r(Fa,ka)},Property:function(ka,Fa,Sa){return"get"===ka.kind||"set"===ka.kind?[ka.kind,l(),this.generatePropertyKey(ka.key,ka.computed),this.generateFunctionBody(ka.value)]:ka.shorthand?"AssignmentPattern"===ka.value.type?this.AssignmentPattern(ka.value,Pb.Sequence,7):this.generatePropertyKey(ka.key,ka.computed):ka.method?
[X(ka),this.generatePropertyKey(ka.key,ka.computed),this.generateFunctionBody(ka.value)]:[this.generatePropertyKey(ka.key,ka.computed),":"+oa,this.generateExpression(ka.value,Pb.Assignment,7)]},ObjectExpression:function(ka,Fa,Sa){var wb,cc,Ld=this||Cn;if(!ka.properties.length)return"{}";var Jd=1<ka.properties.length;v(function(){cc=Ld.generateExpression(ka.properties[0],Pb.Sequence,7)});if(!Jd&&!/[\r\n]/g.test(g(cc).toString()))return["{",oa,cc,oa,"}"];v(function(Uc){var af;wb=["{",fa,Uc,cc];if(Jd){wb.push(","+
fa);var Ne=1;for(af=ka.properties.length;Ne<af;++Ne)wb.push(Uc),wb.push(Ld.generateExpression(ka.properties[Ne],Pb.Sequence,7)),Ne+1<af&&wb.push(","+fa)}});f(g(wb).toString())||wb.push(fa);wb.push(Aa);wb.push("}");return wb},AssignmentPattern:function(ka,Fa,Sa){return this.generateAssignment(ka.left,ka.right,"=",Fa,Sa)},ObjectPattern:function(ka,Fa,Sa){var wb=this||Cn;if(!ka.properties.length)return"{}";var cc=!1;if(1===ka.properties.length){var Ld=ka.properties[0];Ld.type===Qc.Property&&Ld.value.type!==
Qc.Identifier&&(cc=!0)}else for(Fa=0,Sa=ka.properties.length;Fa<Sa;++Fa)if(Ld=ka.properties[Fa],Ld.type===Qc.Property&&!Ld.shorthand){cc=!0;break}var Jd=["{",cc?fa:""];v(function(Uc){var af;var Ne=0;for(af=ka.properties.length;Ne<af;++Ne)Jd.push(cc?Uc:""),Jd.push(wb.generateExpression(ka.properties[Ne],Pb.Sequence,7)),Ne+1<af&&Jd.push(","+(cc?fa:oa))});cc&&!f(g(Jd).toString())&&Jd.push(fa);Jd.push(cc?Aa:"");Jd.push("}");return Jd},ThisExpression:function(ka,Fa,Sa){return"this"},Super:function(ka,
Fa,Sa){return"super"},Identifier:function(ka,Fa,Sa){return M(ka)},ImportDefaultSpecifier:function(ka,Fa,Sa){return M(ka.id||ka.local)},ImportNamespaceSpecifier:function(ka,Fa,Sa){Fa=["*"];(ka=ka.id||ka.local)&&Fa.push(oa+"as"+l()+M(ka));return Fa},ImportSpecifier:function(ka,Fa,Sa){Fa=ka.imported;Sa=[Fa.name];(ka=ka.local)&&ka.name!==Fa.name&&Sa.push(l()+"as"+l()+M(ka));return Sa},ExportSpecifier:function(ka,Fa,Sa){Fa=ka.local;Sa=[Fa.name];(ka=ka.exported)&&ka.name!==Fa.name&&Sa.push(l()+"as"+l()+
M(ka));return Sa},Literal:function(ka,Fa,Sa){if(ka.hasOwnProperty("raw")&&Na&&ta.raw)try{var wb=Na(ka.raw).body[0].expression;if(wb.type===Qc.Literal&&wb.value===ka.value)return ka.raw}catch(Ne){}if(ka.regex)return"/"+ka.regex.pattern+"/"+ka.regex.flags;if(null===ka.value)return"null";if("string"===typeof ka.value){ka=ka.value;Fa="";var cc=0,Ld=0,Jd;Sa=0;for(wb=ka.length;Sa<wb;++Sa){var Uc=ka.charCodeAt(Sa);if(39===Uc)++cc;else if(34===Uc)++Ld;else if(47===Uc&&K)Fa+="\\";else if(jc.code.isLineTerminator(Uc)||
92===Uc){Fa+=m(Uc);continue}else if(!jc.code.isIdentifierPartES5(Uc)&&(K&&32>Uc||!K&&!pa&&(32>Uc||126<Uc))){Fa+=e(Uc,ka.charCodeAt(Sa+1));continue}Fa+=String.fromCharCode(Uc)}var af=(Jd=!("double"===U||"auto"===U&&Ld<cc))?"'":'"';if(Jd?cc:Ld){ka=Fa;Fa=af;Sa=0;for(wb=ka.length;Sa<wb;++Sa){Uc=ka.charCodeAt(Sa);if(39===Uc&&Jd||34===Uc&&!Jd)Fa+="\\";Fa+=String.fromCharCode(Uc)}ka=Fa+af}else ka=af+Fa+af;return ka}if("number"===typeof ka.value){ka=ka.value;if(ka!==ka)throw Error("Numeric literal whose value is NaN");
if(0>ka||0===ka&&0>1/ka)throw Error("Numeric literal whose value is negative");if(ka===1/0)ka=K?"null":aa?"1e400":"1e+400";else{Fa=""+ka;if(aa&&!(3>Fa.length)){Sa=Fa.indexOf(".");K||48!==Fa.charCodeAt(0)||1!==Sa||(Sa=0,Fa=Fa.slice(1));wb=Fa;Fa=Fa.replace("e+","e");Uc=0;0<(cc=wb.indexOf("e"))&&(Uc=+wb.slice(cc+1),wb=wb.slice(0,cc));0<=Sa&&(Uc-=wb.length-Sa-1,wb=+(wb.slice(0,Sa)+wb.slice(Sa+1))+"");for(cc=0;48===wb.charCodeAt(wb.length+cc-1);)--cc;0!==cc&&(Uc-=cc,wb=wb.slice(0,cc));0!==Uc&&(wb+="e"+
Uc);(wb.length<Fa.length||T&&1E12<ka&&Math.floor(ka)===ka&&(wb="0x"+ka.toString(16)).length<Fa.length)&&+wb===ka&&(Fa=wb)}ka=Fa}return ka}if("boolean"===typeof ka.value)return ka.value?"true":"false";ka=ka.value;Fa=ka.toString();if(ka.source)if(Sa=Fa.match(/\/([^/]*)$/)){Sa=Sa[1];Fa="";Jd=Ld=!1;wb=0;for(Uc=ka.source.length;wb<Uc;++wb)cc=ka.source.charCodeAt(wb),Jd?(Fa+=b(cc,Jd),Jd=!1):(Ld?93===cc&&(Ld=!1):47===cc?Fa+="\\":91===cc&&(Ld=!0),Fa+=b(cc,Jd),Jd=92===cc);ka="/"+Fa+"/"+Sa}else ka=Fa;else ka=
Fa;return ka},GeneratorExpression:function(ka,Fa,Sa){return this.ComprehensionExpression(ka,Fa,Sa)},ComprehensionExpression:function(ka,Fa,Sa){var wb,cc,Ld=this||Cn;var Jd=ka.type===Qc.GeneratorExpression?["("]:["["];if(ta.moz.comprehensionExpressionStartsWithAssignment){var Uc=this.generateExpression(ka.body,Pb.Assignment,7);Jd.push(Uc)}ka.blocks&&v(function(){wb=0;for(cc=ka.blocks.length;wb<cc;++wb)Uc=Ld.generateExpression(ka.blocks[wb],Pb.Sequence,7),0<wb||ta.moz.comprehensionExpressionStartsWithAssignment?
Jd=r(Jd,Uc):Jd.push(Uc)});ka.filter&&(Jd=r(Jd,"if"+oa),Uc=this.generateExpression(ka.filter,Pb.Sequence,7),Jd=r(Jd,["(",Uc,")"]));ta.moz.comprehensionExpressionStartsWithAssignment||(Uc=this.generateExpression(ka.body,Pb.Assignment,7),Jd=r(Jd,Uc));Jd.push(ka.type===Qc.GeneratorExpression?")":"]");return Jd},ComprehensionBlock:function(ka,Fa,Sa){Fa=ka.left.type===Qc.VariableDeclaration?[ka.left.kind,l(),this.generateStatement(ka.left.declarations[0],0)]:this.generateExpression(ka.left,Pb.Call,7);Fa=
r(Fa,ka.of?"of":"in");Fa=r(Fa,this.generateExpression(ka.right,Pb.Sequence,7));return["for"+oa+"(",Fa,")"]},SpreadElement:function(ka,Fa,Sa){return["...",this.generateExpression(ka.argument,Pb.Assignment,7)]},TaggedTemplateExpression:function(ka,Fa,Sa){var wb=3;Sa&2||(wb=1);ka=[this.generateExpression(ka.tag,Pb.Call,wb),this.generateExpression(ka.quasi,Pb.Primary,4)];return F(ka,Pb.TaggedTemplate,Fa)},TemplateElement:function(ka,Fa,Sa){return ka.value.raw},TemplateLiteral:function(ka,Fa,Sa){var wb;
Fa=["`"];Sa=0;for(wb=ka.quasis.length;Sa<wb;++Sa)Fa.push(this.generateExpression(ka.quasis[Sa],Pb.Primary,7)),Sa+1<wb&&(Fa.push("${"+oa),Fa.push(this.generateExpression(ka.expressions[Sa],Pb.Sequence,7)),Fa.push(oa+"}"));Fa.push("`");return Fa},ModuleSpecifier:function(ka,Fa,Sa){return this.Literal(ka,Fa,Sa)},ImportExpression:function(ka,Fa,Sa){return F(["import(",this.generateExpression(ka.source,Pb.Assignment,7),")"],Pb.Call,Fa)}};k(I.prototype,I.Expression);I.prototype.generateExpression=function(ka,
Fa,Sa){var wb=ka.type||Qc.Property;if(ta.verbatim&&ka.hasOwnProperty(ta.verbatim))return wb=ka[ta.verbatim],"string"===typeof wb?Sa=F(H(wb),Pb.Sequence,Fa):(Sa=H(wb.content),wb=null!=wb.precedence?wb.precedence:Pb.Sequence,Sa=F(Sa,wb,Fa)),g(Sa,ka);Fa=this[wb](ka,Fa,Sa);ta.comment&&(Fa=A(ka,Fa));return g(Fa,ka)};I.prototype.generateStatement=function(ka,Fa){Fa=this[ka.type](ka,Fa);ta.comment&&(Fa=A(ka,Fa));var Sa=g(Fa).toString();ka.type!==Qc.Program||va||""!==fa||"\n"!==Sa.charAt(Sa.length-1)||(Fa=
Kb?g(Fa).replaceRight(/\s+$/,""):Sa.replace(/\s+$/,""));return g(Fa,ka)};var Td=c().format;fp.version="2.0.0";fp.generate=function(ka,Fa){var Sa=c();null!=Fa?("string"===typeof Fa.indent&&(Sa.format.indent.style=Fa.indent),"number"===typeof Fa.base&&(Sa.format.indent.base=Fa.base),Fa=n(Sa,Fa),Ma=Fa.format.indent.style,Aa="string"===typeof Fa.base?Fa.base:h(Ma,Fa.format.indent.base)):(Fa=Sa,Ma=Fa.format.indent.style,Aa=h(Ma,Fa.format.indent.base));K=Fa.format.json;aa=Fa.format.renumber;T=K?!1:Fa.format.hexadecimal;
U=K?"double":Fa.format.quotes;pa=Fa.format.escapeless;fa=Fa.format.newline;oa=Fa.format.space;Fa.format.compact&&(fa=oa=Ma=Aa="");gb=Fa.format.parentheses;zb=Fa.format.semicolons;va=Fa.format.safeConcatenation;ma=Fa.directive;Na=K?null:Fa.parse;Kb=Fa.sourceMap;kc=Fa.sourceCode;Vb=Fa.format.preserveBlankLines&&null!==kc;ta=Fa;Kb&&(ea=fp.browser?Cn.sourceMap.SourceNode:wo);Sa=new I;if(I.Statement.hasOwnProperty(ka.type))ka=Sa.generateStatement(ka,1);else if(I.Expression.hasOwnProperty(ka.type))ka=Sa.generateExpression(ka,
Pb.Sequence,7);else throw Error("Unknown node type: "+ka.type);if(!Kb)return ka={code:ka.toString(),map:null},Fa.sourceMapWithCode?ka:ka.code;ka=ka.toStringWithSourceMap({file:Fa.file,sourceRoot:Fa.sourceMapRoot});Fa.sourceContent&&ka.map.setSourceContent(Fa.sourceMap,Fa.sourceContent);return Fa.sourceMapWithCode?ka:ka.map.toString()};fp.attachComments=hT.attachComments;fp.Precedence=n({},Pb);fp.browser=!1;fp.FORMAT_MINIFY={indent:{style:"",base:0},renumber:!0,hexadecimal:!0,quotes:"auto",escapeless:!0,
compact:!0,parentheses:!1,semicolons:!1};fp.FORMAT_DEFAULTS=Td})();var oha=Object.freeze({__proto__:null,"default":fp,FORMAT_DEFAULTS:fp.FORMAT_DEFAULTS,FORMAT_MINIFY:fp.FORMAT_MINIFY,Precedence:fp.Precedence,attachComments:fp.attachComments,browser:fp.browser,generate:fp.generate,version:fp.version}),Tq=lively.FreezerRuntime.recorderFor("lively.ast/lib/stringify.js");Tq.stringify=Uh;Tq.obj=Ag;Tq.escodegen=oha;Tq.es=Tq.escodegen.escodegen||Tq.escodegen;var KD=Tq.es;Tq.escodegen=KD;Tq.es=KD;Tq.default=
Uh;var lT={3:"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile",5:"class enum extends super const export import",6:"enum",strict:"implements interface let package private protected public static yield",strictBind:"eval arguments"},pha={5:"break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this",
"5module":"break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this export import",6:"break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this const class extends export import super"},qha=/^in(stanceof)?$/,mT="\u00aa\u00b5\u00ba\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u037f\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u052f\u0531-\u0556\u0559\u0560-\u0588\u05d0-\u05ea\u05ef-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u0860-\u086a\u08a0-\u08b4\u08b6-\u08c7\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u09fc\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0af9\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c39\u0c3d\u0c58-\u0c5a\u0c60\u0c61\u0c80\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d04-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d54-\u0d56\u0d5f-\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e86-\u0e8a\u0e8c-\u0ea3\u0ea5\u0ea7-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f5\u13f8-\u13fd\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f8\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1878\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191e\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19b0-\u19c9\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1c80-\u1c88\u1c90-\u1cba\u1cbd-\u1cbf\u1ce9-\u1cec\u1cee-\u1cf3\u1cf5\u1cf6\u1cfa\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2118-\u211d\u2124\u2126\u2128\u212a-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303c\u3041-\u3096\u309b-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312f\u3131-\u318e\u31a0-\u31bf\u31f0-\u31ff\u3400-\u4dbf\u4e00-\u9ffc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua69d\ua6a0-\ua6ef\ua717-\ua71f\ua722-\ua788\ua78b-\ua7bf\ua7c2-\ua7ca\ua7f5-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua8fd\ua8fe\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\ua9e0-\ua9e4\ua9e6-\ua9ef\ua9fa-\ua9fe\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa7e-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uab30-\uab5a\uab5c-\uab69\uab70-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc",
a5="\u200c\u200d\u00b7\u0300-\u036f\u0387\u0483-\u0487\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u0669\u0670\u06d6-\u06dc\u06df-\u06e4\u06e7\u06e8\u06ea-\u06ed\u06f0-\u06f9\u0711\u0730-\u074a\u07a6-\u07b0\u07c0-\u07c9\u07eb-\u07f3\u07fd\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0859-\u085b\u08d3-\u08e1\u08e3-\u0903\u093a-\u093c\u093e-\u094f\u0951-\u0957\u0962\u0963\u0966-\u096f\u0981-\u0983\u09bc\u09be-\u09c4\u09c7\u09c8\u09cb-\u09cd\u09d7\u09e2\u09e3\u09e6-\u09ef\u09fe\u0a01-\u0a03\u0a3c\u0a3e-\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a66-\u0a71\u0a75\u0a81-\u0a83\u0abc\u0abe-\u0ac5\u0ac7-\u0ac9\u0acb-\u0acd\u0ae2\u0ae3\u0ae6-\u0aef\u0afa-\u0aff\u0b01-\u0b03\u0b3c\u0b3e-\u0b44\u0b47\u0b48\u0b4b-\u0b4d\u0b55-\u0b57\u0b62\u0b63\u0b66-\u0b6f\u0b82\u0bbe-\u0bc2\u0bc6-\u0bc8\u0bca-\u0bcd\u0bd7\u0be6-\u0bef\u0c00-\u0c04\u0c3e-\u0c44\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0c66-\u0c6f\u0c81-\u0c83\u0cbc\u0cbe-\u0cc4\u0cc6-\u0cc8\u0cca-\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0ce6-\u0cef\u0d00-\u0d03\u0d3b\u0d3c\u0d3e-\u0d44\u0d46-\u0d48\u0d4a-\u0d4d\u0d57\u0d62\u0d63\u0d66-\u0d6f\u0d81-\u0d83\u0dca\u0dcf-\u0dd4\u0dd6\u0dd8-\u0ddf\u0de6-\u0def\u0df2\u0df3\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0e50-\u0e59\u0eb1\u0eb4-\u0ebc\u0ec8-\u0ecd\u0ed0-\u0ed9\u0f18\u0f19\u0f20-\u0f29\u0f35\u0f37\u0f39\u0f3e\u0f3f\u0f71-\u0f84\u0f86\u0f87\u0f8d-\u0f97\u0f99-\u0fbc\u0fc6\u102b-\u103e\u1040-\u1049\u1056-\u1059\u105e-\u1060\u1062-\u1064\u1067-\u106d\u1071-\u1074\u1082-\u108d\u108f-\u109d\u135d-\u135f\u1369-\u1371\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b4-\u17d3\u17dd\u17e0-\u17e9\u180b-\u180d\u1810-\u1819\u18a9\u1920-\u192b\u1930-\u193b\u1946-\u194f\u19d0-\u19da\u1a17-\u1a1b\u1a55-\u1a5e\u1a60-\u1a7c\u1a7f-\u1a89\u1a90-\u1a99\u1ab0-\u1abd\u1abf\u1ac0\u1b00-\u1b04\u1b34-\u1b44\u1b50-\u1b59\u1b6b-\u1b73\u1b80-\u1b82\u1ba1-\u1bad\u1bb0-\u1bb9\u1be6-\u1bf3\u1c24-\u1c37\u1c40-\u1c49\u1c50-\u1c59\u1cd0-\u1cd2\u1cd4-\u1ce8\u1ced\u1cf4\u1cf7-\u1cf9\u1dc0-\u1df9\u1dfb-\u1dff\u203f\u2040\u2054\u20d0-\u20dc\u20e1\u20e5-\u20f0\u2cef-\u2cf1\u2d7f\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua620-\ua629\ua66f\ua674-\ua67d\ua69e\ua69f\ua6f0\ua6f1\ua802\ua806\ua80b\ua823-\ua827\ua82c\ua880\ua881\ua8b4-\ua8c5\ua8d0-\ua8d9\ua8e0-\ua8f1\ua8ff-\ua909\ua926-\ua92d\ua947-\ua953\ua980-\ua983\ua9b3-\ua9c0\ua9d0-\ua9d9\ua9e5\ua9f0-\ua9f9\uaa29-\uaa36\uaa43\uaa4c\uaa4d\uaa50-\uaa59\uaa7b-\uaa7d\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uaaeb-\uaaef\uaaf5\uaaf6\uabe3-\uabea\uabec\uabed\uabf0-\uabf9\ufb1e\ufe00-\ufe0f\ufe20-\ufe2f\ufe33\ufe34\ufe4d-\ufe4f\uff10-\uff19\uff3f",
Paa=new RegExp("["+mT+"]"),Qaa=new RegExp("["+mT+a5+"]");mT=a5=null;var DX=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,157,310,10,21,11,7,153,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,349,41,7,1,79,28,11,0,9,21,107,20,28,22,13,52,76,44,33,24,27,35,30,0,3,0,9,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,85,6,2,0,2,3,2,
14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,159,52,19,3,21,2,31,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,14,0,72,26,230,43,117,63,32,7,3,0,3,7,2,1,2,23,16,0,2,0,95,7,3,38,17,0,2,0,29,0,11,39,8,0,22,0,12,45,20,0,35,56,264,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,190,0,80,921,103,110,18,195,2749,1070,4050,582,8634,568,8,30,114,29,19,47,17,3,32,20,6,18,689,63,129,74,6,0,67,12,65,1,2,0,29,6135,9,1237,43,8,8952,286,50,2,18,3,9,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,
0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,2357,44,11,6,17,0,370,43,1301,196,60,67,8,0,1205,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42717,35,4148,12,221,3,5761,15,7472,3104,541,1507,4938],Raa=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,370,1,154,10,176,2,54,14,32,9,16,3,46,10,54,9,7,2,37,13,2,9,6,1,45,0,
13,2,49,13,9,3,2,11,83,11,7,0,161,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,193,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,84,14,5,9,243,14,166,9,71,5,2,1,3,3,2,0,2,1,13,9,120,6,3,6,4,0,29,9,41,6,2,3,9,0,10,10,47,15,406,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,19306,9,135,4,60,6,26,9,1014,0,2,54,8,3,82,0,12,1,19628,1,5319,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,262,6,10,9,419,13,1495,6,110,6,6,9,4759,
9,787719,239],Sj=function(c,h){void 0===h&&(h={});this.label=c;this.keyword=h.keyword;this.beforeExpr=!!h.beforeExpr;this.startsExpr=!!h.startsExpr;this.isLoop=!!h.isLoop;this.isAssign=!!h.isAssign;this.prefix=!!h.prefix;this.postfix=!!h.postfix;this.binop=h.binop||null;this.updateContext=null},rs={beforeExpr:!0},pr={startsExpr:!0},MI={},Ya={num:new Sj("num",pr),regexp:new Sj("regexp",pr),string:new Sj("string",pr),name:new Sj("name",pr),eof:new Sj("eof"),bracketL:new Sj("[",{beforeExpr:!0,startsExpr:!0}),
bracketR:new Sj("]"),braceL:new Sj("{",{beforeExpr:!0,startsExpr:!0}),braceR:new Sj("}"),parenL:new Sj("(",{beforeExpr:!0,startsExpr:!0}),parenR:new Sj(")"),comma:new Sj(",",rs),semi:new Sj(";",rs),colon:new Sj(":",rs),dot:new Sj("."),question:new Sj("?",rs),questionDot:new Sj("?."),arrow:new Sj("=>",rs),template:new Sj("template"),invalidTemplate:new Sj("invalidTemplate"),ellipsis:new Sj("...",rs),backQuote:new Sj("`",pr),dollarBraceL:new Sj("${",{beforeExpr:!0,startsExpr:!0}),eq:new Sj("=",{beforeExpr:!0,
isAssign:!0}),assign:new Sj("_=",{beforeExpr:!0,isAssign:!0}),incDec:new Sj("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new Sj("!/~",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:Qm("||",1),logicalAND:Qm("&&",2),bitwiseOR:Qm("|",3),bitwiseXOR:Qm("^",4),bitwiseAND:Qm("&",5),equality:Qm("==/!=/===/!==",6),relational:Qm("</>/<=/>=",7),bitShift:Qm("<</>>/>>>",8),plusMin:new Sj("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:Qm("%",10),star:Qm("*",10),slash:Qm("/",10),starstar:new Sj("**",
{beforeExpr:!0}),coalesce:Qm("??",1),_break:$i("break"),_case:$i("case",rs),_catch:$i("catch"),_continue:$i("continue"),_debugger:$i("debugger"),_default:$i("default",rs),_do:$i("do",{isLoop:!0,beforeExpr:!0}),_else:$i("else",rs),_finally:$i("finally"),_for:$i("for",{isLoop:!0}),_function:$i("function",pr),_if:$i("if"),_return:$i("return",rs),_switch:$i("switch"),_throw:$i("throw",rs),_try:$i("try"),_var:$i("var"),_const:$i("const"),_while:$i("while",{isLoop:!0}),_with:$i("with"),_new:$i("new",{beforeExpr:!0,
startsExpr:!0}),_this:$i("this",pr),_super:$i("super",pr),_class:$i("class",pr),_extends:$i("extends",rs),_export:$i("export"),_import:$i("import",pr),_null:$i("null",pr),_true:$i("true",pr),_false:$i("false",pr),_in:$i("in",{beforeExpr:!0,binop:7}),_instanceof:$i("instanceof",{beforeExpr:!0,binop:7}),_typeof:$i("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_void:$i("void",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_delete:$i("delete",{beforeExpr:!0,prefix:!0,startsExpr:!0})},Cq=/\r\n?|\n|\u2028|\u2029/,
vx=new RegExp(Cq.source,"g"),nT=/[\u1680\u2000-\u200a\u202f\u205f\u3000\ufeff]/,ss=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,b5=Object.prototype,NI=b5.hasOwnProperty,rha=b5.toString,FX=Array.isArray||function(c){return"[object Array]"===rha.call(c)},ZB=function(c,h){this.line=c;this.column=h};ZB.prototype.offset=function(c){return new ZB(this.line,this.column+c)};var zz=function(c,h,f){this.start=h;this.end=f;null!==c.sourceFile&&(this.source=c.sourceFile)},dF={ecmaVersion:null,sourceType:"script",onInsertedSemicolon:null,
onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowAwaitOutsideFunction:!1,allowHashBang:!1,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1},EX=!1,am=function(c,h,f){this.options=c=gl(c);this.sourceFile=c.sourceFile;this.keywords=sj(pha[6<=c.ecmaVersion?6:"module"===c.sourceType?"5module":5]);var k="";!0!==c.allowReserved&&(k=lT[6<=c.ecmaVersion?6:5===c.ecmaVersion?5:3],"module"===
c.sourceType&&(k+=" await"));this.reservedWords=sj(k);k=(k?k+" ":"")+lT.strict;this.reservedWordsStrict=sj(k);this.reservedWordsStrictBind=sj(k+" "+lT.strictBind);this.input=String(h);this.containsEsc=!1;f?(this.pos=f,this.lineStart=this.input.lastIndexOf("\n",f-1)+1,this.curLine=this.input.slice(0,this.lineStart).split(Cq).length):(this.pos=this.lineStart=0,this.curLine=1);this.type=Ya.eof;this.value=null;this.start=this.end=this.pos;this.startLoc=this.endLoc=this.curPosition();this.lastTokEndLoc=
this.lastTokStartLoc=null;this.lastTokStart=this.lastTokEnd=this.pos;this.context=this.initialContext();this.exprAllowed=!0;this.strict=(this.inModule="module"===c.sourceType)||this.strictDirective(this.pos);this.potentialArrowAt=-1;this.yieldPos=this.awaitPos=this.awaitIdentPos=0;this.labels=[];this.undefinedExports={};0===this.pos&&c.allowHashBang&&"#!"===this.input.slice(0,2)&&this.skipLineComment(2);this.scopeStack=[];this.enterScope(1);this.regexpState=null},xy={inFunction:{configurable:!0},
inGenerator:{configurable:!0},inAsync:{configurable:!0},allowSuper:{configurable:!0},allowDirectSuper:{configurable:!0},treatFunctionsAsVar:{configurable:!0},inNonArrowFunction:{configurable:!0}};am.prototype.parse=function(){var c=this.options.program||this.startNode();this.nextToken();return this.parseTopLevel(c)};xy.inFunction.get=function(){return 0<(this.currentVarScope().flags&2)};xy.inGenerator.get=function(){return 0<(this.currentVarScope().flags&8)};xy.inAsync.get=function(){return 0<(this.currentVarScope().flags&
4)};xy.allowSuper.get=function(){return 0<(this.currentThisScope().flags&64)};xy.allowDirectSuper.get=function(){return 0<(this.currentThisScope().flags&128)};xy.treatFunctionsAsVar.get=function(){return this.treatFunctionsAsVarInScope(this.currentScope())};xy.inNonArrowFunction.get=function(){return 0<(this.currentThisScope().flags&2)};am.extend=function(){for(var c=[],h=arguments.length;h--;)c[h]=arguments[h];h=this;for(var f=0;f<c.length;f++)h=c[f](h);return h};am.parse=function(c,h){return(new this(h,
c)).parse()};am.parseExpressionAt=function(c,h,f){c=new this(f,c,h);c.nextToken();return c.parseExpression()};am.tokenizer=function(c,h){return new this(h,c)};Object.defineProperties(am.prototype,xy);var Mp=am.prototype,sha=/^(?:'((?:\\.|[^'\\])*?)'|"((?:\\.|[^"\\])*?)")/;Mp.strictDirective=function(c){for(;;){ss.lastIndex=c;c+=ss.exec(this.input)[0].length;var h=sha.exec(this.input.slice(c));if(!h)return!1;if("use strict"===(h[1]||h[2])){ss.lastIndex=c+h[0].length;c=ss.exec(this.input);h=c.index+
c[0].length;var f=this.input.charAt(h);return";"===f||"}"===f||Cq.test(c[0])&&!(/[(`.[+\-/*%<>=,?^&]/.test(f)||"!"===f&&"="===this.input.charAt(h+1))}c+=h[0].length;ss.lastIndex=c;c+=ss.exec(this.input)[0].length;";"===this.input[c]&&c++}};Mp.eat=function(c){return this.type===c?(this.next(),!0):!1};Mp.isContextual=function(c){return this.type===Ya.name&&this.value===c&&!this.containsEsc};Mp.eatContextual=function(c){if(!this.isContextual(c))return!1;this.next();return!0};Mp.expectContextual=function(c){this.eatContextual(c)||
this.unexpected()};Mp.canInsertSemicolon=function(){return this.type===Ya.eof||this.type===Ya.braceR||Cq.test(this.input.slice(this.lastTokEnd,this.start))};Mp.insertSemicolon=function(){if(this.canInsertSemicolon()){if(this.options.onInsertedSemicolon)this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc);return!0}};Mp.semicolon=function(){this.eat(Ya.semi)||this.insertSemicolon()||this.unexpected()};Mp.afterTrailingComma=function(c,h){if(this.type===c){if(this.options.onTrailingComma)this.options.onTrailingComma(this.lastTokStart,
this.lastTokStartLoc);h||this.next();return!0}};Mp.expect=function(c){this.eat(c)||this.unexpected()};Mp.unexpected=function(c){this.raise(null!=c?c:this.start,"Unexpected token")};Mp.checkPatternErrors=function(c,h){c&&(-1<c.trailingComma&&this.raiseRecoverable(c.trailingComma,"Comma is not permitted after the rest element"),c=h?c.parenthesizedAssign:c.parenthesizedBind,-1<c&&this.raiseRecoverable(c,"Parenthesized pattern"))};Mp.checkExpressionErrors=function(c,h){if(!c)return!1;var f=c.shorthandAssign;
c=c.doubleProto;if(!h)return 0<=f||0<=c;0<=f&&this.raise(f,"Shorthand property assignments are valid only in destructuring patterns");0<=c&&this.raiseRecoverable(c,"Redefinition of __proto__ property")};Mp.checkYieldAwaitInDefaultParams=function(){this.yieldPos&&(!this.awaitPos||this.yieldPos<this.awaitPos)&&this.raise(this.yieldPos,"Yield expression cannot be a default value");this.awaitPos&&this.raise(this.awaitPos,"Await expression cannot be a default value")};Mp.isSimpleAssignTarget=function(c){return"ParenthesizedExpression"===
c.type?this.isSimpleAssignTarget(c.expression):"Identifier"===c.type||"MemberExpression"===c.type};var Ci=am.prototype;Ci.parseTopLevel=function(c){var h={};c.body||(c.body=[]);for(;this.type!==Ya.eof;){var f=this.parseStatement(null,!0,h);c.body.push(f)}if(this.inModule)for(h=0,f=Object.keys(this.undefinedExports);h<f.length;h+=1){var k=f[h];this.raiseRecoverable(this.undefinedExports[k].start,"Export '"+k+"' is not defined")}this.adaptDirectivePrologue(c.body);this.next();c.sourceType=this.options.sourceType;
return this.finishNode(c,"Program")};var oT={kind:"loop"},tha={kind:"switch"};Ci.isLet=function(c){if(6>this.options.ecmaVersion||!this.isContextual("let"))return!1;ss.lastIndex=this.pos;var h=ss.exec(this.input);h=this.pos+h[0].length;var f=this.input.charCodeAt(h);if(91===f)return!0;if(c)return!1;if(123===f)return!0;if(Lr(f,!0)){for(c=h+1;Bu(this.input.charCodeAt(c),!0);)++c;c=this.input.slice(h,c);if(!qha.test(c))return!0}return!1};Ci.isAsyncFunction=function(){if(8>this.options.ecmaVersion||!this.isContextual("async"))return!1;
ss.lastIndex=this.pos;var c=ss.exec(this.input);c=this.pos+c[0].length;return!Cq.test(this.input.slice(this.pos,c))&&"function"===this.input.slice(c,c+8)&&(c+8===this.input.length||!Bu(this.input.charAt(c+8)))};Ci.parseStatement=function(c,h,f){var k=this.type,n=this.startNode();if(this.isLet(c)){k=Ya._var;var b="let"}switch(k){case Ya._break:case Ya._continue:return this.parseBreakContinueStatement(n,k.keyword);case Ya._debugger:return this.parseDebuggerStatement(n);case Ya._do:return this.parseDoStatement(n);
case Ya._for:return this.parseForStatement(n);case Ya._function:return c&&(this.strict||"if"!==c&&"label"!==c)&&6<=this.options.ecmaVersion&&this.unexpected(),this.parseFunctionStatement(n,!1,!c);case Ya._class:return c&&this.unexpected(),this.parseClass(n,!0);case Ya._if:return this.parseIfStatement(n);case Ya._return:return this.parseReturnStatement(n);case Ya._switch:return this.parseSwitchStatement(n);case Ya._throw:return this.parseThrowStatement(n);case Ya._try:return this.parseTryStatement(n);
case Ya._const:case Ya._var:return b=b||this.value,c&&"var"!==b&&this.unexpected(),this.parseVarStatement(n,b);case Ya._while:return this.parseWhileStatement(n);case Ya._with:return this.parseWithStatement(n);case Ya.braceL:return this.parseBlock(!0,n);case Ya.semi:return this.parseEmptyStatement(n);case Ya._export:case Ya._import:if(10<this.options.ecmaVersion&&k===Ya._import&&(ss.lastIndex=this.pos,c=ss.exec(this.input),c=this.input.charCodeAt(this.pos+c[0].length),40===c||46===c))return this.parseExpressionStatement(n,
this.parseExpression());this.options.allowImportExportEverywhere||(h||this.raise(this.start,"'import' and 'export' may only appear at the top level"),this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'"));return k===Ya._import?this.parseImport(n):this.parseExport(n,f);default:if(this.isAsyncFunction())return c&&this.unexpected(),this.next(),this.parseFunctionStatement(n,!0,!c);h=this.value;f=this.parseExpression();return k===Ya.name&&"Identifier"===
f.type&&this.eat(Ya.colon)?this.parseLabeledStatement(n,h,f,c):this.parseExpressionStatement(n,f)}};Ci.parseBreakContinueStatement=function(c,h){var f="break"===h;this.next();this.eat(Ya.semi)||this.insertSemicolon()?c.label=null:this.type!==Ya.name?this.unexpected():(c.label=this.parseIdent(),this.semicolon());for(var k=0;k<this.labels.length;++k){var n=this.labels[k];if(null==c.label||n.name===c.label.name){if(null!=n.kind&&(f||"loop"===n.kind))break;if(c.label&&f)break}}k===this.labels.length&&
this.raise(c.start,"Unsyntactic "+h);return this.finishNode(c,f?"BreakStatement":"ContinueStatement")};Ci.parseDebuggerStatement=function(c){this.next();this.semicolon();return this.finishNode(c,"DebuggerStatement")};Ci.parseDoStatement=function(c){this.next();this.labels.push(oT);c.body=this.parseStatement("do");this.labels.pop();this.expect(Ya._while);c.test=this.parseParenExpression();6<=this.options.ecmaVersion?this.eat(Ya.semi):this.semicolon();return this.finishNode(c,"DoWhileStatement")};Ci.parseForStatement=
function(c){this.next();var h=9<=this.options.ecmaVersion&&(this.inAsync||!this.inFunction&&this.options.allowAwaitOutsideFunction)&&this.eatContextual("await")?this.lastTokStart:-1;this.labels.push(oT);this.enterScope(0);this.expect(Ya.parenL);if(this.type===Ya.semi)return-1<h&&this.unexpected(h),this.parseFor(c,null);var f=this.isLet();if(this.type===Ya._var||this.type===Ya._const||f){var k=this.startNode();f=f?"let":this.value;this.next();this.parseVar(k,!0,f);this.finishNode(k,"VariableDeclaration");
if((this.type===Ya._in||6<=this.options.ecmaVersion&&this.isContextual("of"))&&1===k.declarations.length)return 9<=this.options.ecmaVersion&&(this.type===Ya._in?-1<h&&this.unexpected(h):c.await=-1<h),this.parseForIn(c,k);-1<h&&this.unexpected(h);return this.parseFor(c,k)}k=new sd;f=this.parseExpression(!0,k);if(this.type===Ya._in||6<=this.options.ecmaVersion&&this.isContextual("of"))return 9<=this.options.ecmaVersion&&(this.type===Ya._in?-1<h&&this.unexpected(h):c.await=-1<h),this.toAssignable(f,
!1,k),this.checkLValPattern(f),this.parseForIn(c,f);this.checkExpressionErrors(k,!0);-1<h&&this.unexpected(h);return this.parseFor(c,f)};Ci.parseFunctionStatement=function(c,h,f){this.next();return this.parseFunction(c,DG|(f?0:pT),!1,h)};Ci.parseIfStatement=function(c){this.next();c.test=this.parseParenExpression();c.consequent=this.parseStatement("if");c.alternate=this.eat(Ya._else)?this.parseStatement("if"):null;return this.finishNode(c,"IfStatement")};Ci.parseReturnStatement=function(c){this.inFunction||
this.options.allowReturnOutsideFunction||this.raise(this.start,"'return' outside of function");this.next();this.eat(Ya.semi)||this.insertSemicolon()?c.argument=null:(c.argument=this.parseExpression(),this.semicolon());return this.finishNode(c,"ReturnStatement")};Ci.parseSwitchStatement=function(c){this.next();c.discriminant=this.parseParenExpression();c.cases=[];this.expect(Ya.braceL);this.labels.push(tha);this.enterScope(0);for(var h,f=!1;this.type!==Ya.braceR;)if(this.type===Ya._case||this.type===
Ya._default){var k=this.type===Ya._case;h&&this.finishNode(h,"SwitchCase");c.cases.push(h=this.startNode());h.consequent=[];this.next();k?h.test=this.parseExpression():(f&&this.raiseRecoverable(this.lastTokStart,"Multiple default clauses"),f=!0,h.test=null);this.expect(Ya.colon)}else h||this.unexpected(),h.consequent.push(this.parseStatement(null));this.exitScope();h&&this.finishNode(h,"SwitchCase");this.next();this.labels.pop();return this.finishNode(c,"SwitchStatement")};Ci.parseThrowStatement=
function(c){this.next();Cq.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw");c.argument=this.parseExpression();this.semicolon();return this.finishNode(c,"ThrowStatement")};var uha=[];Ci.parseTryStatement=function(c){this.next();c.block=this.parseBlock();c.handler=null;if(this.type===Ya._catch){var h=this.startNode();this.next();if(this.eat(Ya.parenL)){h.param=this.parseBindingAtom();var f="Identifier"===h.param.type;this.enterScope(f?32:
0);this.checkLValPattern(h.param,f?4:2);this.expect(Ya.parenR)}else 10>this.options.ecmaVersion&&this.unexpected(),h.param=null,this.enterScope(0);h.body=this.parseBlock(!1);this.exitScope();c.handler=this.finishNode(h,"CatchClause")}c.finalizer=this.eat(Ya._finally)?this.parseBlock():null;c.handler||c.finalizer||this.raise(c.start,"Missing catch or finally clause");return this.finishNode(c,"TryStatement")};Ci.parseVarStatement=function(c,h){this.next();this.parseVar(c,!1,h);this.semicolon();return this.finishNode(c,
"VariableDeclaration")};Ci.parseWhileStatement=function(c){this.next();c.test=this.parseParenExpression();this.labels.push(oT);c.body=this.parseStatement("while");this.labels.pop();return this.finishNode(c,"WhileStatement")};Ci.parseWithStatement=function(c){this.strict&&this.raise(this.start,"'with' in strict mode");this.next();c.object=this.parseParenExpression();c.body=this.parseStatement("with");return this.finishNode(c,"WithStatement")};Ci.parseEmptyStatement=function(c){this.next();return this.finishNode(c,
"EmptyStatement")};Ci.parseLabeledStatement=function(c,h,f,k){for(var n=0,b=this.labels;n<b.length;n+=1)b[n].name===h&&this.raise(f.start,"Label '"+h+"' is already declared");n=this.type.isLoop?"loop":this.type===Ya._switch?"switch":null;for(b=this.labels.length-1;0<=b;b--){var e=this.labels[b];if(e.statementStart===c.start)e.statementStart=this.start,e.kind=n;else break}this.labels.push({name:h,kind:n,statementStart:this.start});c.body=this.parseStatement(k?-1===k.indexOf("label")?k+"label":k:"label");
this.labels.pop();c.label=f;return this.finishNode(c,"LabeledStatement")};Ci.parseExpressionStatement=function(c,h){c.expression=h;this.semicolon();return this.finishNode(c,"ExpressionStatement")};Ci.parseBlock=function(c,h,f){void 0===c&&(c=!0);void 0===h&&(h=this.startNode());h.body=[];this.expect(Ya.braceL);for(c&&this.enterScope(0);this.type!==Ya.braceR;){var k=this.parseStatement(null);h.body.push(k)}f&&(this.strict=!1);this.next();c&&this.exitScope();return this.finishNode(h,"BlockStatement")};
Ci.parseFor=function(c,h){c.init=h;this.expect(Ya.semi);c.test=this.type===Ya.semi?null:this.parseExpression();this.expect(Ya.semi);c.update=this.type===Ya.parenR?null:this.parseExpression();this.expect(Ya.parenR);c.body=this.parseStatement("for");this.exitScope();this.labels.pop();return this.finishNode(c,"ForStatement")};Ci.parseForIn=function(c,h){var f=this.type===Ya._in;this.next();"VariableDeclaration"===h.type&&null!=h.declarations[0].init&&(!f||8>this.options.ecmaVersion||this.strict||"var"!==
h.kind||"Identifier"!==h.declarations[0].id.type)&&this.raise(h.start,(f?"for-in":"for-of")+" loop variable declaration may not have an initializer");c.left=h;c.right=f?this.parseExpression():this.parseMaybeAssign();this.expect(Ya.parenR);c.body=this.parseStatement("for");this.exitScope();this.labels.pop();return this.finishNode(c,f?"ForInStatement":"ForOfStatement")};Ci.parseVar=function(c,h,f){c.declarations=[];for(c.kind=f;;){var k=this.startNode();this.parseVarId(k,f);this.eat(Ya.eq)?k.init=this.parseMaybeAssign(h):
"const"!==f||this.type===Ya._in||6<=this.options.ecmaVersion&&this.isContextual("of")?"Identifier"===k.id.type||h&&(this.type===Ya._in||this.isContextual("of"))?k.init=null:this.raise(this.lastTokEnd,"Complex binding patterns require an initialization value"):this.unexpected();c.declarations.push(this.finishNode(k,"VariableDeclarator"));if(!this.eat(Ya.comma))break}return c};Ci.parseVarId=function(c,h){c.id=this.parseBindingAtom();this.checkLValPattern(c.id,"var"===h?1:2,!1)};var DG=1,pT=2;Ci.parseFunction=
function(c,h,f,k){this.initFunction(c);if(9<=this.options.ecmaVersion||6<=this.options.ecmaVersion&&!k)this.type===Ya.star&&h&pT&&this.unexpected(),c.generator=this.eat(Ya.star);8<=this.options.ecmaVersion&&(c.async=!!k);h&DG&&(c.id=h&4&&this.type!==Ya.name?null:this.parseIdent(),!c.id||h&pT||this.checkLValSimple(c.id,this.strict||c.generator||c.async?this.treatFunctionsAsVar?1:2:3));k=this.yieldPos;var n=this.awaitPos,b=this.awaitIdentPos;this.awaitIdentPos=this.awaitPos=this.yieldPos=0;this.enterScope(2|
(c.async?4:0)|(c.generator?8:0));h&DG||(c.id=this.type===Ya.name?this.parseIdent():null);this.parseFunctionParams(c);this.parseFunctionBody(c,f,!1);this.yieldPos=k;this.awaitPos=n;this.awaitIdentPos=b;return this.finishNode(c,h&DG?"FunctionDeclaration":"FunctionExpression")};Ci.parseFunctionParams=function(c){this.expect(Ya.parenL);c.params=this.parseBindingList(Ya.parenR,!1,8<=this.options.ecmaVersion);this.checkYieldAwaitInDefaultParams()};Ci.parseClass=function(c,h){this.next();var f=this.strict;
this.strict=!0;this.parseClassId(c,h);this.parseClassSuper(c);var k=this.startNode(),n=!1;k.body=[];for(this.expect(Ya.braceL);this.type!==Ya.braceR;){var b=this.parseClassElement(null!==c.superClass);b&&(k.body.push(b),"MethodDefinition"===b.type&&"constructor"===b.kind&&(n&&this.raise(b.start,"Duplicate constructor in the same class"),n=!0))}this.strict=f;this.next();c.body=this.finishNode(k,"ClassBody");return this.finishNode(c,h?"ClassDeclaration":"ClassExpression")};Ci.parseClassElement=function(c){var h=
this;if(this.eat(Ya.semi))return null;var f=this.startNode(),k=function(m,a){void 0===a&&(a=!1);var g=h.start,l=h.startLoc;if(!h.eatContextual(m))return!1;if(!(h.type===Ya.parenL||a&&h.canInsertSemicolon()))return!0;f.key&&h.unexpected();f.computed=!1;f.key=h.startNodeAt(g,l);f.key.name=m;h.finishNode(f.key,"Identifier");return!1};f.kind="method";f.static=k("static");var n=this.eat(Ya.star),b=!1;n||(8<=this.options.ecmaVersion&&k("async",!0)?(b=!0,n=9<=this.options.ecmaVersion&&this.eat(Ya.star)):
k("get")?f.kind="get":k("set")&&(f.kind="set"));f.key||this.parsePropertyName(f);k=f.key;var e=!1;f.computed||f.static||!("Identifier"===k.type&&"constructor"===k.name||"Literal"===k.type&&"constructor"===k.value)?f.static&&"Identifier"===k.type&&"prototype"===k.name&&this.raise(k.start,"Classes may not have a static property named prototype"):("method"!==f.kind&&this.raise(k.start,"Constructor can't have get/set modifier"),n&&this.raise(k.start,"Constructor can't be a generator"),b&&this.raise(k.start,
"Constructor can't be an async method"),f.kind="constructor",e=c);this.parseClassMethod(f,n,b,e);"get"===f.kind&&0!==f.value.params.length&&this.raiseRecoverable(f.value.start,"getter should have no params");"set"===f.kind&&1!==f.value.params.length&&this.raiseRecoverable(f.value.start,"setter should have exactly one param");"set"===f.kind&&"RestElement"===f.value.params[0].type&&this.raiseRecoverable(f.value.params[0].start,"Setter cannot use rest params");return f};Ci.parseClassMethod=function(c,
h,f,k){c.value=this.parseMethod(h,f,k);return this.finishNode(c,"MethodDefinition")};Ci.parseClassId=function(c,h){this.type===Ya.name?(c.id=this.parseIdent(),h&&this.checkLValSimple(c.id,2,!1)):(!0===h&&this.unexpected(),c.id=null)};Ci.parseClassSuper=function(c){c.superClass=this.eat(Ya._extends)?this.parseExprSubscripts():null};Ci.parseExport=function(c,h){this.next();if(this.eat(Ya.star))return 11<=this.options.ecmaVersion&&(this.eatContextual("as")?(c.exported=this.parseIdent(!0),this.checkExport(h,
c.exported.name,this.lastTokStart)):c.exported=null),this.expectContextual("from"),this.type!==Ya.string&&this.unexpected(),c.source=this.parseExprAtom(),this.semicolon(),this.finishNode(c,"ExportAllDeclaration");if(this.eat(Ya._default)){this.checkExport(h,"default",this.lastTokStart);var f;this.type===Ya._function||(f=this.isAsyncFunction())?(h=this.startNode(),this.next(),f&&this.next(),c.declaration=this.parseFunction(h,DG|4,!1,f)):this.type===Ya._class?(f=this.startNode(),c.declaration=this.parseClass(f,
"nullableID")):(c.declaration=this.parseMaybeAssign(),this.semicolon());return this.finishNode(c,"ExportDefaultDeclaration")}if(this.shouldParseExportStatement())c.declaration=this.parseStatement(null),"VariableDeclaration"===c.declaration.type?this.checkVariableExport(h,c.declaration.declarations):this.checkExport(h,c.declaration.id.name,c.declaration.id.start),c.specifiers=[],c.source=null;else{c.declaration=null;c.specifiers=this.parseExportSpecifiers(h);if(this.eatContextual("from"))this.type!==
Ya.string&&this.unexpected(),c.source=this.parseExprAtom();else{f=0;for(h=c.specifiers;f<h.length;f+=1){var k=h[f];this.checkUnreserved(k.local);this.checkLocalExport(k.local)}c.source=null}this.semicolon()}return this.finishNode(c,"ExportNamedDeclaration")};Ci.checkExport=function(c,h,f){c&&(NI.call(c,h)&&this.raiseRecoverable(f,"Duplicate export '"+h+"'"),c[h]=!0)};Ci.checkPatternExport=function(c,h){var f=h.type;if("Identifier"===f)this.checkExport(c,h.name,h.start);else if("ObjectPattern"===f)for(f=
0,h=h.properties;f<h.length;f+=1)this.checkPatternExport(c,h[f]);else if("ArrayPattern"===f)for(f=0,h=h.elements;f<h.length;f+=1){var k=h[f];k&&this.checkPatternExport(c,k)}else"Property"===f?this.checkPatternExport(c,h.value):"AssignmentPattern"===f?this.checkPatternExport(c,h.left):"RestElement"===f?this.checkPatternExport(c,h.argument):"ParenthesizedExpression"===f&&this.checkPatternExport(c,h.expression)};Ci.checkVariableExport=function(c,h){if(c)for(var f=0;f<h.length;f+=1)this.checkPatternExport(c,
h[f].id)};Ci.shouldParseExportStatement=function(){return"var"===this.type.keyword||"const"===this.type.keyword||"class"===this.type.keyword||"function"===this.type.keyword||this.isLet()||this.isAsyncFunction()};Ci.parseExportSpecifiers=function(c){var h=[],f=!0;for(this.expect(Ya.braceL);!this.eat(Ya.braceR);){if(f)f=!1;else if(this.expect(Ya.comma),this.afterTrailingComma(Ya.braceR))break;var k=this.startNode();k.local=this.parseIdent(!0);k.exported=this.eatContextual("as")?this.parseIdent(!0):
k.local;this.checkExport(c,k.exported.name,k.exported.start);h.push(this.finishNode(k,"ExportSpecifier"))}return h};Ci.parseImport=function(c){this.next();this.type===Ya.string?(c.specifiers=uha,c.source=this.parseExprAtom()):(c.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),c.source=this.type===Ya.string?this.parseExprAtom():this.unexpected());this.semicolon();return this.finishNode(c,"ImportDeclaration")};Ci.parseImportSpecifiers=function(){var c=[],h=!0;if(this.type===Ya.name){var f=
this.startNode();f.local=this.parseIdent();this.checkLValSimple(f.local,2);c.push(this.finishNode(f,"ImportDefaultSpecifier"));if(!this.eat(Ya.comma))return c}if(this.type===Ya.star)return h=this.startNode(),this.next(),this.expectContextual("as"),h.local=this.parseIdent(),this.checkLValSimple(h.local,2),c.push(this.finishNode(h,"ImportNamespaceSpecifier")),c;for(this.expect(Ya.braceL);!this.eat(Ya.braceR);){if(h)h=!1;else if(this.expect(Ya.comma),this.afterTrailingComma(Ya.braceR))break;f=this.startNode();
f.imported=this.parseIdent(!0);this.eatContextual("as")?f.local=this.parseIdent():(this.checkUnreserved(f.imported),f.local=f.imported);this.checkLValSimple(f.local,2);c.push(this.finishNode(f,"ImportSpecifier"))}return c};Ci.adaptDirectivePrologue=function(c){for(var h=0;h<c.length&&this.isDirectiveCandidate(c[h]);++h)c[h].directive=c[h].expression.raw.slice(1,-1)};Ci.isDirectiveCandidate=function(c){return"ExpressionStatement"===c.type&&"Literal"===c.expression.type&&"string"===typeof c.expression.value&&
('"'===this.input[c.start]||"'"===this.input[c.start])};var Gt=am.prototype;Gt.toAssignable=function(c,h,f){if(6<=this.options.ecmaVersion&&c)switch(c.type){case "Identifier":this.inAsync&&"await"===c.name&&this.raise(c.start,"Cannot use 'await' as identifier inside an async function");break;case "ObjectPattern":case "ArrayPattern":case "AssignmentPattern":case "RestElement":break;case "ObjectExpression":c.type="ObjectPattern";f&&this.checkPatternErrors(f,!0);f=0;for(var k=c.properties;f<k.length;f+=
1){var n=k[f];this.toAssignable(n,h);"RestElement"!==n.type||"ArrayPattern"!==n.argument.type&&"ObjectPattern"!==n.argument.type||this.raise(n.argument.start,"Unexpected token")}break;case "Property":"init"!==c.kind&&this.raise(c.key.start,"Object pattern can't contain getter or setter");this.toAssignable(c.value,h);break;case "ArrayExpression":c.type="ArrayPattern";f&&this.checkPatternErrors(f,!0);this.toAssignableList(c.elements,h);break;case "SpreadElement":c.type="RestElement";this.toAssignable(c.argument,
h);"AssignmentPattern"===c.argument.type&&this.raise(c.argument.start,"Rest elements cannot have a default value");break;case "AssignmentExpression":"="!==c.operator&&this.raise(c.left.end,"Only '=' operator can be used for specifying default value.");c.type="AssignmentPattern";delete c.operator;this.toAssignable(c.left,h);break;case "ParenthesizedExpression":this.toAssignable(c.expression,h,f);break;case "ChainExpression":this.raiseRecoverable(c.start,"Optional chaining cannot appear in left-hand side");
break;case "MemberExpression":if(!h)break;default:this.raise(c.start,"Assigning to rvalue")}else f&&this.checkPatternErrors(f,!0);return c};Gt.toAssignableList=function(c,h){for(var f=c.length,k=0;k<f;k++){var n=c[k];n&&this.toAssignable(n,h)}f&&(f=c[f-1],6===this.options.ecmaVersion&&h&&f&&"RestElement"===f.type&&"Identifier"!==f.argument.type&&this.unexpected(f.argument.start));return c};Gt.parseSpread=function(c){var h=this.startNode();this.next();h.argument=this.parseMaybeAssign(!1,c);return this.finishNode(h,
"SpreadElement")};Gt.parseRestBinding=function(){var c=this.startNode();this.next();6===this.options.ecmaVersion&&this.type!==Ya.name&&this.unexpected();c.argument=this.parseBindingAtom();return this.finishNode(c,"RestElement")};Gt.parseBindingAtom=function(){if(6<=this.options.ecmaVersion)switch(this.type){case Ya.bracketL:var c=this.startNode();this.next();c.elements=this.parseBindingList(Ya.bracketR,!0,!0);return this.finishNode(c,"ArrayPattern");case Ya.braceL:return this.parseObj(!0)}return this.parseIdent()};
Gt.parseBindingList=function(c,h,f){for(var k=[],n=!0;!this.eat(c);)if(n?n=!1:this.expect(Ya.comma),h&&this.type===Ya.comma)k.push(null);else if(f&&this.afterTrailingComma(c))break;else if(this.type===Ya.ellipsis){h=this.parseRestBinding();this.parseBindingListItem(h);k.push(h);this.type===Ya.comma&&this.raise(this.start,"Comma is not permitted after the rest element");this.expect(c);break}else{var b=this.parseMaybeDefault(this.start,this.startLoc);this.parseBindingListItem(b);k.push(b)}return k};
Gt.parseBindingListItem=function(c){return c};Gt.parseMaybeDefault=function(c,h,f){f=f||this.parseBindingAtom();if(6>this.options.ecmaVersion||!this.eat(Ya.eq))return f;c=this.startNodeAt(c,h);c.left=f;c.right=this.parseMaybeAssign();return this.finishNode(c,"AssignmentPattern")};Gt.checkLValSimple=function(c,h,f){void 0===h&&(h=0);var k=0!==h;switch(c.type){case "Identifier":this.strict&&this.reservedWordsStrictBind.test(c.name)&&this.raiseRecoverable(c.start,(k?"Binding ":"Assigning to ")+c.name+
" in strict mode");k&&(2===h&&"let"===c.name&&this.raiseRecoverable(c.start,"let is disallowed as a lexically bound name"),f&&(NI.call(f,c.name)&&this.raiseRecoverable(c.start,"Argument name clash"),f[c.name]=!0),5!==h&&this.declareName(c.name,h,c.start));break;case "ChainExpression":this.raiseRecoverable(c.start,"Optional chaining cannot appear in left-hand side");break;case "MemberExpression":k&&this.raiseRecoverable(c.start,"Binding member expression");break;case "ParenthesizedExpression":return k&&
this.raiseRecoverable(c.start,"Binding parenthesized expression"),this.checkLValSimple(c.expression,h,f);default:this.raise(c.start,(k?"Binding":"Assigning to")+" rvalue")}};Gt.checkLValPattern=function(c,h,f){void 0===h&&(h=0);switch(c.type){case "ObjectPattern":var k=0;for(c=c.properties;k<c.length;k+=1)this.checkLValInnerPattern(c[k],h,f);break;case "ArrayPattern":k=0;for(c=c.elements;k<c.length;k+=1){var n=c[k];n&&this.checkLValInnerPattern(n,h,f)}break;default:this.checkLValSimple(c,h,f)}};Gt.checkLValInnerPattern=
function(c,h,f){void 0===h&&(h=0);switch(c.type){case "Property":this.checkLValInnerPattern(c.value,h,f);break;case "AssignmentPattern":this.checkLValPattern(c.left,h,f);break;case "RestElement":this.checkLValPattern(c.argument,h,f);break;default:this.checkLValPattern(c,h,f)}};var Yi=am.prototype;Yi.checkPropClash=function(c,h,f){if(!(9<=this.options.ecmaVersion&&"SpreadElement"===c.type||6<=this.options.ecmaVersion&&(c.computed||c.method||c.shorthand))){var k=c.key;switch(k.type){case "Identifier":var n=
k.name;break;case "Literal":n=String(k.value);break;default:return}c=c.kind;6<=this.options.ecmaVersion?"__proto__"===n&&"init"===c&&(h.proto&&(f?0>f.doubleProto&&(f.doubleProto=k.start):this.raiseRecoverable(k.start,"Redefinition of __proto__ property")),h.proto=!0):(n="$"+n,(f=h[n])?("init"===c?this.strict&&f.init||f.get||f.set:f.init||f[c])&&this.raiseRecoverable(k.start,"Redefinition of property"):f=h[n]={init:!1,get:!1,set:!1},f[c]=!0)}};Yi.parseExpression=function(c,h){var f=this.start,k=this.startLoc,
n=this.parseMaybeAssign(c,h);if(this.type===Ya.comma){f=this.startNodeAt(f,k);for(f.expressions=[n];this.eat(Ya.comma);)f.expressions.push(this.parseMaybeAssign(c,h));return this.finishNode(f,"SequenceExpression")}return n};Yi.parseMaybeAssign=function(c,h,f){if(this.isContextual("yield")){if(this.inGenerator)return this.parseYield(c);this.exprAllowed=!1}var k=!1,n=-1,b=-1;h?(n=h.parenthesizedAssign,b=h.trailingComma,h.parenthesizedAssign=h.trailingComma=-1):(h=new sd,k=!0);var e=this.start,m=this.startLoc;
if(this.type===Ya.parenL||this.type===Ya.name)this.potentialArrowAt=this.start;var a=this.parseMaybeConditional(c,h);f&&(a=f.call(this,a,e,m));if(this.type.isAssign)return f=this.startNodeAt(e,m),f.operator=this.value,this.type===Ya.eq&&(a=this.toAssignable(a,!1,h)),k||(h.parenthesizedAssign=h.trailingComma=h.doubleProto=-1),h.shorthandAssign>=a.start&&(h.shorthandAssign=-1),this.type===Ya.eq?this.checkLValPattern(a):this.checkLValSimple(a),f.left=a,this.next(),f.right=this.parseMaybeAssign(c),this.finishNode(f,
"AssignmentExpression");k&&this.checkExpressionErrors(h,!0);-1<n&&(h.parenthesizedAssign=n);-1<b&&(h.trailingComma=b);return a};Yi.parseMaybeConditional=function(c,h){var f=this.start,k=this.startLoc,n=this.parseExprOps(c,h);return this.checkExpressionErrors(h)?n:this.eat(Ya.question)?(h=this.startNodeAt(f,k),h.test=n,h.consequent=this.parseMaybeAssign(),this.expect(Ya.colon),h.alternate=this.parseMaybeAssign(c),this.finishNode(h,"ConditionalExpression")):n};Yi.parseExprOps=function(c,h){var f=this.start,
k=this.startLoc,n=this.parseMaybeUnary(h,!1);return this.checkExpressionErrors(h)?n:n.start===f&&"ArrowFunctionExpression"===n.type?n:this.parseExprOp(n,f,k,-1,c)};Yi.parseExprOp=function(c,h,f,k,n){var b=this.type.binop;if(null!=b&&(!n||this.type!==Ya._in)&&b>k){var e=this.type===Ya.logicalOR||this.type===Ya.logicalAND,m=this.type===Ya.coalesce;m&&(b=Ya.logicalAND.binop);var a=this.value;this.next();var g=this.start,l=this.startLoc;b=this.parseExprOp(this.parseMaybeUnary(null,!1),g,l,b,n);c=this.buildBinary(h,
f,c,b,a,e||m);(e&&this.type===Ya.coalesce||m&&(this.type===Ya.logicalOR||this.type===Ya.logicalAND))&&this.raiseRecoverable(this.start,"Logical expressions and coalesce expressions cannot be mixed. Wrap either by parentheses");return this.parseExprOp(c,h,f,k,n)}return c};Yi.buildBinary=function(c,h,f,k,n,b){c=this.startNodeAt(c,h);c.left=f;c.operator=n;c.right=k;return this.finishNode(c,b?"LogicalExpression":"BinaryExpression")};Yi.parseMaybeUnary=function(c,h){var f=this.start,k=this.startLoc;if(this.isContextual("await")&&
(this.inAsync||!this.inFunction&&this.options.allowAwaitOutsideFunction)){var n=this.parseAwait();h=!0}else if(this.type.prefix){n=this.startNode();var b=this.type===Ya.incDec;n.operator=this.value;n.prefix=!0;this.next();n.argument=this.parseMaybeUnary(null,!0);this.checkExpressionErrors(c,!0);b?this.checkLValSimple(n.argument):this.strict&&"delete"===n.operator&&"Identifier"===n.argument.type?this.raiseRecoverable(n.start,"Deleting local variable in strict mode"):h=!0;n=this.finishNode(n,b?"UpdateExpression":
"UnaryExpression")}else{n=this.parseExprSubscripts(c);if(this.checkExpressionErrors(c))return n;for(;this.type.postfix&&!this.canInsertSemicolon();)c=this.startNodeAt(f,k),c.operator=this.value,c.prefix=!1,c.argument=n,this.checkLValSimple(n),this.next(),n=this.finishNode(c,"UpdateExpression")}return!h&&this.eat(Ya.starstar)?this.buildBinary(f,k,n,this.parseMaybeUnary(null,!1),"**",!1):n};Yi.parseExprSubscripts=function(c){var h=this.start,f=this.startLoc,k=this.parseExprAtom(c);if("ArrowFunctionExpression"===
k.type&&")"!==this.input.slice(this.lastTokStart,this.lastTokEnd))return k;h=this.parseSubscripts(k,h,f);c&&"MemberExpression"===h.type&&(c.parenthesizedAssign>=h.start&&(c.parenthesizedAssign=-1),c.parenthesizedBind>=h.start&&(c.parenthesizedBind=-1));return h};Yi.parseSubscripts=function(c,h,f,k){for(var n=8<=this.options.ecmaVersion&&"Identifier"===c.type&&"async"===c.name&&this.lastTokEnd===c.end&&!this.canInsertSemicolon()&&5===c.end-c.start&&this.potentialArrowAt===c.start,b=!1;;){var e=this.parseSubscript(c,
h,f,k,n,b);e.optional&&(b=!0);if(e===c||"ArrowFunctionExpression"===e.type)return b&&(c=this.startNodeAt(h,f),c.expression=e,e=this.finishNode(c,"ChainExpression")),e;c=e}};Yi.parseSubscript=function(c,h,f,k,n,b){var e=11<=this.options.ecmaVersion,m=e&&this.eat(Ya.questionDot);k&&m&&this.raise(this.lastTokStart,"Optional chaining cannot appear in the callee of new expressions");var a=this.eat(Ya.bracketL);if(a||m&&this.type!==Ya.parenL&&this.type!==Ya.backQuote||this.eat(Ya.dot))h=this.startNodeAt(h,
f),h.object=c,h.property=a?this.parseExpression():this.parseIdent("never"!==this.options.allowReserved),h.computed=!!a,a&&this.expect(Ya.bracketR),e&&(h.optional=m),c=this.finishNode(h,"MemberExpression");else if(!k&&this.eat(Ya.parenL)){k=new sd;b=this.yieldPos;var g=this.awaitPos,l=this.awaitIdentPos;this.awaitIdentPos=this.awaitPos=this.yieldPos=0;a=this.parseExprList(Ya.parenR,8<=this.options.ecmaVersion,!1,k);if(n&&!m&&!this.canInsertSemicolon()&&this.eat(Ya.arrow))return this.checkPatternErrors(k,
!1),this.checkYieldAwaitInDefaultParams(),0<this.awaitIdentPos&&this.raise(this.awaitIdentPos,"Cannot use 'await' as identifier inside an async function"),this.yieldPos=b,this.awaitPos=g,this.awaitIdentPos=l,this.parseArrowExpression(this.startNodeAt(h,f),a,!0);this.checkExpressionErrors(k,!0);this.yieldPos=b||this.yieldPos;this.awaitPos=g||this.awaitPos;this.awaitIdentPos=l||this.awaitIdentPos;h=this.startNodeAt(h,f);h.callee=c;h.arguments=a;e&&(h.optional=m);c=this.finishNode(h,"CallExpression")}else this.type===
Ya.backQuote&&((m||b)&&this.raise(this.start,"Optional chaining cannot appear in the tag of tagged template expressions"),e=this.startNodeAt(h,f),e.tag=c,e.quasi=this.parseTemplate({isTagged:!0}),c=this.finishNode(e,"TaggedTemplateExpression"));return c};Yi.parseExprAtom=function(c){this.type===Ya.slash&&this.readRegexp();var h=this.potentialArrowAt===this.start;switch(this.type){case Ya._super:return this.allowSuper||this.raise(this.start,"'super' keyword outside a method"),h=this.startNode(),this.next(),
this.type!==Ya.parenL||this.allowDirectSuper||this.raise(h.start,"super() call outside constructor of a subclass"),this.type!==Ya.dot&&this.type!==Ya.bracketL&&this.type!==Ya.parenL&&this.unexpected(),this.finishNode(h,"Super");case Ya._this:return h=this.startNode(),this.next(),this.finishNode(h,"ThisExpression");case Ya.name:c=this.start;var f=this.startLoc,k=this.containsEsc,n=this.parseIdent(!1);if(8<=this.options.ecmaVersion&&!k&&"async"===n.name&&!this.canInsertSemicolon()&&this.eat(Ya._function))return this.parseFunction(this.startNodeAt(c,
f),0,!1,!0);if(h&&!this.canInsertSemicolon()){if(this.eat(Ya.arrow))return this.parseArrowExpression(this.startNodeAt(c,f),[n],!1);if(8<=this.options.ecmaVersion&&"async"===n.name&&this.type===Ya.name&&!k)return n=this.parseIdent(!1),!this.canInsertSemicolon()&&this.eat(Ya.arrow)||this.unexpected(),this.parseArrowExpression(this.startNodeAt(c,f),[n],!0)}return n;case Ya.regexp:return c=this.value,h=this.parseLiteral(c.value),h.regex={pattern:c.pattern,flags:c.flags},h;case Ya.num:case Ya.string:return this.parseLiteral(this.value);
case Ya._null:case Ya._true:case Ya._false:return h=this.startNode(),h.value=this.type===Ya._null?null:this.type===Ya._true,h.raw=this.type.keyword,this.next(),this.finishNode(h,"Literal");case Ya.parenL:return f=this.start,h=this.parseParenAndDistinguishExpression(h),c&&(0>c.parenthesizedAssign&&!this.isSimpleAssignTarget(h)&&(c.parenthesizedAssign=f),0>c.parenthesizedBind&&(c.parenthesizedBind=f)),h;case Ya.bracketL:return h=this.startNode(),this.next(),h.elements=this.parseExprList(Ya.bracketR,
!0,!0,c),this.finishNode(h,"ArrayExpression");case Ya.braceL:return this.parseObj(!1,c);case Ya._function:return h=this.startNode(),this.next(),this.parseFunction(h,0);case Ya._class:return this.parseClass(this.startNode(),!1);case Ya._new:return this.parseNew();case Ya.backQuote:return this.parseTemplate();case Ya._import:return 11<=this.options.ecmaVersion?this.parseExprImport():this.unexpected();default:this.unexpected()}};Yi.parseExprImport=function(){var c=this.startNode();this.containsEsc&&
this.raiseRecoverable(this.start,"Escape sequence in keyword import");var h=this.parseIdent(!0);switch(this.type){case Ya.parenL:return this.parseDynamicImport(c);case Ya.dot:return c.meta=h,this.parseImportMeta(c);default:this.unexpected()}};Yi.parseDynamicImport=function(c){this.next();c.source=this.parseMaybeAssign();if(!this.eat(Ya.parenR)){var h=this.start;this.eat(Ya.comma)&&this.eat(Ya.parenR)?this.raiseRecoverable(h,"Trailing comma is not allowed in import()"):this.unexpected(h)}return this.finishNode(c,
"ImportExpression")};Yi.parseImportMeta=function(c){this.next();var h=this.containsEsc;c.property=this.parseIdent(!0);"meta"!==c.property.name&&this.raiseRecoverable(c.property.start,"The only valid meta property for import is 'import.meta'");h&&this.raiseRecoverable(c.start,"'import.meta' must not contain escaped characters");"module"!==this.options.sourceType&&this.raiseRecoverable(c.start,"Cannot use 'import.meta' outside a module");return this.finishNode(c,"MetaProperty")};Yi.parseLiteral=function(c){var h=
this.startNode();h.value=c;h.raw=this.input.slice(this.start,this.end);110===h.raw.charCodeAt(h.raw.length-1)&&(h.bigint=h.raw.slice(0,-1).replace(/_/g,""));this.next();return this.finishNode(h,"Literal")};Yi.parseParenExpression=function(){this.expect(Ya.parenL);var c=this.parseExpression();this.expect(Ya.parenR);return c};Yi.parseParenAndDistinguishExpression=function(c){var h=this.start,f=this.startLoc,k=8<=this.options.ecmaVersion;if(6<=this.options.ecmaVersion){this.next();var n=this.start,b=
this.startLoc,e=[],m=!0,a=!1,g=new sd,l=this.yieldPos,r=this.awaitPos;for(this.awaitPos=this.yieldPos=0;this.type!==Ya.parenR;)if(m?m=!1:this.expect(Ya.comma),k&&this.afterTrailingComma(Ya.parenR,!0)){a=!0;break}else if(this.type===Ya.ellipsis){var v=this.start;e.push(this.parseParenItem(this.parseRestBinding()));this.type===Ya.comma&&this.raise(this.start,"Comma is not permitted after the rest element");break}else e.push(this.parseMaybeAssign(!1,g,this.parseParenItem));k=this.start;m=this.startLoc;
this.expect(Ya.parenR);if(c&&!this.canInsertSemicolon()&&this.eat(Ya.arrow))return this.checkPatternErrors(g,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=l,this.awaitPos=r,this.parseParenArrowList(h,f,e);e.length&&!a||this.unexpected(this.lastTokStart);v&&this.unexpected(v);this.checkExpressionErrors(g,!0);this.yieldPos=l||this.yieldPos;this.awaitPos=r||this.awaitPos;1<e.length?(c=this.startNodeAt(n,b),c.expressions=e,this.finishNodeAt(c,"SequenceExpression",k,m)):c=e[0]}else c=this.parseParenExpression();
return this.options.preserveParens?(h=this.startNodeAt(h,f),h.expression=c,this.finishNode(h,"ParenthesizedExpression")):c};Yi.parseParenItem=function(c){return c};Yi.parseParenArrowList=function(c,h,f){return this.parseArrowExpression(this.startNodeAt(c,h),f)};var vha=[];Yi.parseNew=function(){this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword new");var c=this.startNode(),h=this.parseIdent(!0);if(6<=this.options.ecmaVersion&&this.eat(Ya.dot))return c.meta=h,h=this.containsEsc,
c.property=this.parseIdent(!0),"target"!==c.property.name&&this.raiseRecoverable(c.property.start,"The only valid meta property for new is 'new.target'"),h&&this.raiseRecoverable(c.start,"'new.target' must not contain escaped characters"),this.inNonArrowFunction||this.raiseRecoverable(c.start,"'new.target' can only be used in functions"),this.finishNode(c,"MetaProperty");h=this.start;var f=this.startLoc,k=this.type===Ya._import;c.callee=this.parseSubscripts(this.parseExprAtom(),h,f,!0);k&&"ImportExpression"===
c.callee.type&&this.raise(h,"Cannot use new with import()");this.eat(Ya.parenL)?c.arguments=this.parseExprList(Ya.parenR,8<=this.options.ecmaVersion,!1):c.arguments=vha;return this.finishNode(c,"NewExpression")};Yi.parseTemplateElement=function(c){c=c.isTagged;var h=this.startNode();this.type===Ya.invalidTemplate?(c||this.raiseRecoverable(this.start,"Bad escape sequence in untagged template literal"),h.value={raw:this.value,cooked:null}):h.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,
"\n"),cooked:this.value};this.next();h.tail=this.type===Ya.backQuote;return this.finishNode(h,"TemplateElement")};Yi.parseTemplate=function(c){void 0===c&&(c={});c=c.isTagged;void 0===c&&(c=!1);var h=this.startNode();this.next();h.expressions=[];var f=this.parseTemplateElement({isTagged:c});for(h.quasis=[f];!f.tail;)this.type===Ya.eof&&this.raise(this.pos,"Unterminated template literal"),this.expect(Ya.dollarBraceL),h.expressions.push(this.parseExpression()),this.expect(Ya.braceR),h.quasis.push(f=
this.parseTemplateElement({isTagged:c}));this.next();return this.finishNode(h,"TemplateLiteral")};Yi.isAsyncProp=function(c){return!c.computed&&"Identifier"===c.key.type&&"async"===c.key.name&&(this.type===Ya.name||this.type===Ya.num||this.type===Ya.string||this.type===Ya.bracketL||this.type.keyword||9<=this.options.ecmaVersion&&this.type===Ya.star)&&!Cq.test(this.input.slice(this.lastTokEnd,this.start))};Yi.parseObj=function(c,h){var f=this.startNode(),k=!0,n={};f.properties=[];for(this.next();!this.eat(Ya.braceR);){if(k)k=
!1;else if(this.expect(Ya.comma),5<=this.options.ecmaVersion&&this.afterTrailingComma(Ya.braceR))break;var b=this.parseProperty(c,h);c||this.checkPropClash(b,n,h);f.properties.push(b)}return this.finishNode(f,c?"ObjectPattern":"ObjectExpression")};Yi.parseProperty=function(c,h){var f=this.startNode(),k;if(9<=this.options.ecmaVersion&&this.eat(Ya.ellipsis)){if(c)return f.argument=this.parseIdent(!1),this.type===Ya.comma&&this.raise(this.start,"Comma is not permitted after the rest element"),this.finishNode(f,
"RestElement");this.type===Ya.parenL&&h&&(0>h.parenthesizedAssign&&(h.parenthesizedAssign=this.start),0>h.parenthesizedBind&&(h.parenthesizedBind=this.start));f.argument=this.parseMaybeAssign(!1,h);this.type===Ya.comma&&h&&0>h.trailingComma&&(h.trailingComma=this.start);return this.finishNode(f,"SpreadElement")}if(6<=this.options.ecmaVersion){f.method=!1;f.shorthand=!1;if(c||h){var n=this.start;var b=this.startLoc}c||(k=this.eat(Ya.star))}var e=this.containsEsc;this.parsePropertyName(f);if(!c&&!e&&
8<=this.options.ecmaVersion&&!k&&this.isAsyncProp(f)){var m=!0;k=9<=this.options.ecmaVersion&&this.eat(Ya.star);this.parsePropertyName(f,h)}else m=!1;this.parsePropertyValue(f,c,k,m,n,b,h,e);return this.finishNode(f,"Property")};Yi.parsePropertyValue=function(c,h,f,k,n,b,e,m){(f||k)&&this.type===Ya.colon&&this.unexpected();this.eat(Ya.colon)?(c.value=h?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,e),c.kind="init"):6<=this.options.ecmaVersion&&this.type===Ya.parenL?(h&&
this.unexpected(),c.kind="init",c.method=!0,c.value=this.parseMethod(f,k)):h||m||!(5<=this.options.ecmaVersion)||c.computed||"Identifier"!==c.key.type||"get"!==c.key.name&&"set"!==c.key.name||this.type===Ya.comma||this.type===Ya.braceR||this.type===Ya.eq?6<=this.options.ecmaVersion&&!c.computed&&"Identifier"===c.key.type?((f||k)&&this.unexpected(),this.checkUnreserved(c.key),"await"!==c.key.name||this.awaitIdentPos||(this.awaitIdentPos=n),c.kind="init",h?c.value=this.parseMaybeDefault(n,b,this.copyNode(c.key)):
this.type===Ya.eq&&e?(0>e.shorthandAssign&&(e.shorthandAssign=this.start),c.value=this.parseMaybeDefault(n,b,this.copyNode(c.key))):c.value=this.copyNode(c.key),c.shorthand=!0):this.unexpected():((f||k)&&this.unexpected(),c.kind=c.key.name,this.parsePropertyName(c),c.value=this.parseMethod(!1),c.value.params.length!==("get"===c.kind?0:1)?(h=c.value.start,"get"===c.kind?this.raiseRecoverable(h,"getter should have no params"):this.raiseRecoverable(h,"setter should have exactly one param")):"set"===
c.kind&&"RestElement"===c.value.params[0].type&&this.raiseRecoverable(c.value.params[0].start,"Setter cannot use rest params"))};Yi.parsePropertyName=function(c){if(6<=this.options.ecmaVersion){if(this.eat(Ya.bracketL))return c.computed=!0,c.key=this.parseMaybeAssign(),this.expect(Ya.bracketR),c.key;c.computed=!1}return c.key=this.type===Ya.num||this.type===Ya.string?this.parseExprAtom():this.parseIdent("never"!==this.options.allowReserved)};Yi.initFunction=function(c){c.id=null;6<=this.options.ecmaVersion&&
(c.generator=c.expression=!1);8<=this.options.ecmaVersion&&(c.async=!1)};Yi.parseMethod=function(c,h,f){var k=this.startNode(),n=this.yieldPos,b=this.awaitPos,e=this.awaitIdentPos;this.initFunction(k);6<=this.options.ecmaVersion&&(k.generator=c);8<=this.options.ecmaVersion&&(k.async=!!h);this.awaitIdentPos=this.awaitPos=this.yieldPos=0;this.enterScope(2|(h?4:0)|(k.generator?8:0)|64|(f?128:0));this.expect(Ya.parenL);k.params=this.parseBindingList(Ya.parenR,!1,8<=this.options.ecmaVersion);this.checkYieldAwaitInDefaultParams();
this.parseFunctionBody(k,!1,!0);this.yieldPos=n;this.awaitPos=b;this.awaitIdentPos=e;return this.finishNode(k,"FunctionExpression")};Yi.parseArrowExpression=function(c,h,f){var k=this.yieldPos,n=this.awaitPos,b=this.awaitIdentPos;this.enterScope((f?4:0)|18);this.initFunction(c);8<=this.options.ecmaVersion&&(c.async=!!f);this.awaitIdentPos=this.awaitPos=this.yieldPos=0;c.params=this.toAssignableList(h,!0);this.parseFunctionBody(c,!0,!1);this.yieldPos=k;this.awaitPos=n;this.awaitIdentPos=b;return this.finishNode(c,
"ArrowFunctionExpression")};Yi.parseFunctionBody=function(c,h,f){var k=this.strict,n=!1;if(h&&this.type!==Ya.braceL)c.body=this.parseMaybeAssign(),c.expression=!0,this.checkParams(c,!1);else{var b=7<=this.options.ecmaVersion&&!this.isSimpleParamList(c.params);(!k||b)&&(n=this.strictDirective(this.end))&&b&&this.raiseRecoverable(c.start,"Illegal 'use strict' directive in function with non-simple parameter list");b=this.labels;this.labels=[];n&&(this.strict=!0);this.checkParams(c,!k&&!n&&!h&&!f&&this.isSimpleParamList(c.params));
this.strict&&c.id&&this.checkLValSimple(c.id,5);c.body=this.parseBlock(!1,void 0,n&&!k);c.expression=!1;this.adaptDirectivePrologue(c.body.body);this.labels=b}this.exitScope()};Yi.isSimpleParamList=function(c){for(var h=0;h<c.length;h+=1)if("Identifier"!==c[h].type)return!1;return!0};Yi.checkParams=function(c,h){var f={},k=0;for(c=c.params;k<c.length;k+=1)this.checkLValInnerPattern(c[k],1,h?null:f)};Yi.parseExprList=function(c,h,f,k){for(var n=[],b=!0;!this.eat(c);){if(b)b=!1;else if(this.expect(Ya.comma),
h&&this.afterTrailingComma(c))break;if(f&&this.type===Ya.comma)var e=null;else this.type===Ya.ellipsis?(e=this.parseSpread(k),k&&this.type===Ya.comma&&0>k.trailingComma&&(k.trailingComma=this.start)):e=this.parseMaybeAssign(!1,k);n.push(e)}return n};Yi.checkUnreserved=function(c){var h=c.start,f=c.end;c=c.name;this.inGenerator&&"yield"===c&&this.raiseRecoverable(h,"Cannot use 'yield' as identifier inside a generator");this.inAsync&&"await"===c&&this.raiseRecoverable(h,"Cannot use 'await' as identifier inside an async function");
this.keywords.test(c)&&this.raise(h,"Unexpected keyword '"+c+"'");6>this.options.ecmaVersion&&-1!==this.input.slice(h,f).indexOf("\\")||!(this.strict?this.reservedWordsStrict:this.reservedWords).test(c)||(this.inAsync||"await"!==c||this.raiseRecoverable(h,"Cannot use keyword 'await' outside an async function"),this.raiseRecoverable(h,"The keyword '"+c+"' is reserved"))};Yi.parseIdent=function(c,h){h=this.startNode();this.type===Ya.name?h.name=this.value:this.type.keyword?(h.name=this.type.keyword,
"class"!==h.name&&"function"!==h.name||this.lastTokEnd===this.lastTokStart+1&&46===this.input.charCodeAt(this.lastTokStart)||this.context.pop()):this.unexpected();this.next(!!c);this.finishNode(h,"Identifier");c||(this.checkUnreserved(h),"await"!==h.name||this.awaitIdentPos||(this.awaitIdentPos=h.start));return h};Yi.parseYield=function(c){this.yieldPos||(this.yieldPos=this.start);var h=this.startNode();this.next();this.type===Ya.semi||this.canInsertSemicolon()||this.type!==Ya.star&&!this.type.startsExpr?
(h.delegate=!1,h.argument=null):(h.delegate=this.eat(Ya.star),h.argument=this.parseMaybeAssign(c));return this.finishNode(h,"YieldExpression")};Yi.parseAwait=function(){this.awaitPos||(this.awaitPos=this.start);var c=this.startNode();this.next();c.argument=this.parseMaybeUnary(null,!0);return this.finishNode(c,"AwaitExpression")};var xL=am.prototype;xL.raise=function(c,h){var f=fq(this.input,c);h+=" ("+f.line+":"+f.column+")";h=new SyntaxError(h);h.pos=c;h.loc=f;h.raisedAt=this.pos;throw h;};xL.raiseRecoverable=
xL.raise;xL.curPosition=function(){if(this.options.locations)return new ZB(this.curLine,this.pos-this.lineStart)};var yy=am.prototype,wha=function(c){this.flags=c;this.var=[];this.lexical=[];this.functions=[]};yy.enterScope=function(c){this.scopeStack.push(new wha(c))};yy.exitScope=function(){this.scopeStack.pop()};yy.treatFunctionsAsVarInScope=function(c){return c.flags&2||!this.inModule&&c.flags&1};yy.declareName=function(c,h,f){var k=!1;if(2===h)h=this.currentScope(),k=-1<h.lexical.indexOf(c)||
-1<h.functions.indexOf(c)||-1<h.var.indexOf(c),h.lexical.push(c),this.inModule&&h.flags&1&&delete this.undefinedExports[c];else if(4===h)this.currentScope().lexical.push(c);else if(3===h)h=this.currentScope(),k=this.treatFunctionsAsVar?-1<h.lexical.indexOf(c):-1<h.lexical.indexOf(c)||-1<h.var.indexOf(c),h.functions.push(c);else for(h=this.scopeStack.length-1;0<=h;--h){var n=this.scopeStack[h];if(-1<n.lexical.indexOf(c)&&!(n.flags&32&&n.lexical[0]===c)||!this.treatFunctionsAsVarInScope(n)&&-1<n.functions.indexOf(c)){k=
!0;break}n.var.push(c);this.inModule&&n.flags&1&&delete this.undefinedExports[c];if(n.flags&3)break}k&&this.raiseRecoverable(f,"Identifier '"+c+"' has already been declared")};yy.checkLocalExport=function(c){-1===this.scopeStack[0].lexical.indexOf(c.name)&&-1===this.scopeStack[0].var.indexOf(c.name)&&(this.undefinedExports[c.name]=c)};yy.currentScope=function(){return this.scopeStack[this.scopeStack.length-1]};yy.currentVarScope=function(){for(var c=this.scopeStack.length-1;;c--){var h=this.scopeStack[c];
if(h.flags&3)return h}};yy.currentThisScope=function(){for(var c=this.scopeStack.length-1;;c--){var h=this.scopeStack[c];if(h.flags&3&&!(h.flags&16))return h}};var zy=function(c,h,f){this.type="";this.start=h;this.end=0;c.options.locations&&(this.loc=new zz(c,f));c.options.directSourceFile&&(this.sourceFile=c.options.directSourceFile);c.options.ranges&&(this.range=[h,0])},EG=am.prototype;EG.startNode=function(){return new zy(this,this.start,this.startLoc)};EG.startNodeAt=function(c,h){return new zy(this,
c,h)};EG.finishNode=function(c,h){return To.call(this,c,h,this.lastTokEnd,this.lastTokEndLoc)};EG.finishNodeAt=function(c,h,f,k){return To.call(this,c,h,f,k)};EG.copyNode=function(c){var h=new zy(this,c.start,this.startLoc),f;for(f in c)h[f]=c[f];return h};var ts=function(c,h,f,k,n){this.token=c;this.isExpr=!!h;this.preserveSpace=!!f;this.override=k;this.generator=!!n},bm={b_stat:new ts("{",!1),b_expr:new ts("{",!0),b_tmpl:new ts("${",!1),p_stat:new ts("(",!1),p_expr:new ts("(",!0),q_tmpl:new ts("`",
!0,!0,function(c){return c.tryReadTemplateToken()}),f_stat:new ts("function",!1),f_expr:new ts("function",!0),f_expr_gen:new ts("function",!0,!1,null,!0),f_gen:new ts("function",!1,!1,null,!0)},yL=am.prototype;yL.initialContext=function(){return[bm.b_stat]};yL.braceIsBlock=function(c){var h=this.curContext();return h===bm.f_expr||h===bm.f_stat?!0:c!==Ya.colon||h!==bm.b_stat&&h!==bm.b_expr?c===Ya._return||c===Ya.name&&this.exprAllowed?Cq.test(this.input.slice(this.lastTokEnd,this.start)):c===Ya._else||
c===Ya.semi||c===Ya.eof||c===Ya.parenR||c===Ya.arrow?!0:c===Ya.braceL?h===bm.b_stat:c===Ya._var||c===Ya._const||c===Ya.name?!1:!this.exprAllowed:!h.isExpr};yL.inGeneratorContext=function(){for(var c=this.context.length-1;1<=c;c--){var h=this.context[c];if("function"===h.token)return h.generator}return!1};yL.updateContext=function(c){var h,f=this.type;f.keyword&&c===Ya.dot?this.exprAllowed=!1:(h=f.updateContext)?h.call(this,c):this.exprAllowed=f.beforeExpr};Ya.parenR.updateContext=Ya.braceR.updateContext=
function(){if(1===this.context.length)this.exprAllowed=!0;else{var c=this.context.pop();c===bm.b_stat&&"function"===this.curContext().token&&(c=this.context.pop());this.exprAllowed=!c.isExpr}};Ya.braceL.updateContext=function(c){this.context.push(this.braceIsBlock(c)?bm.b_stat:bm.b_expr);this.exprAllowed=!0};Ya.dollarBraceL.updateContext=function(){this.context.push(bm.b_tmpl);this.exprAllowed=!0};Ya.parenL.updateContext=function(c){this.context.push(c===Ya._if||c===Ya._for||c===Ya._with||c===Ya._while?
bm.p_stat:bm.p_expr);this.exprAllowed=!0};Ya.incDec.updateContext=function(){};Ya._function.updateContext=Ya._class.updateContext=function(c){!c.beforeExpr||c===Ya._else||c===Ya.semi&&this.curContext()!==bm.p_stat||c===Ya._return&&Cq.test(this.input.slice(this.lastTokEnd,this.start))||(c===Ya.colon||c===Ya.braceL)&&this.curContext()===bm.b_stat?this.context.push(bm.f_stat):this.context.push(bm.f_expr);this.exprAllowed=!1};Ya.backQuote.updateContext=function(){this.curContext()===bm.q_tmpl?this.context.pop():
this.context.push(bm.q_tmpl);this.exprAllowed=!1};Ya.star.updateContext=function(c){c===Ya._function&&(c=this.context.length-1,this.context[c]=this.context[c]===bm.f_expr?bm.f_expr_gen:bm.f_gen);this.exprAllowed=!0};Ya.name.updateContext=function(c){var h=!1;6<=this.options.ecmaVersion&&c!==Ya.dot&&("of"===this.value&&!this.exprAllowed||"yield"===this.value&&this.inGeneratorContext())&&(h=!0);this.exprAllowed=h};var Saa={9:"ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS",
10:"ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS Extended_Pictographic",
11:"ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS Extended_Pictographic",
12:"ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS Extended_Pictographic EBase EComp EMod EPres ExtPict"},
Taa={9:"Adlam Adlm Ahom Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb",
10:"Adlam Adlm Ahom Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd",
11:"Adlam Adlm Ahom Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho",
12:"Adlam Adlm Ahom Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho Chorasmian Chrs Diak Dives_Akuru Khitan_Small_Script Kits Yezi Yezidi"},
GX={};Vq(9);Vq(10);Vq(11);Vq(12);var eh=am.prototype,Ow=function(c){this.parser=c;this.validFlags="gim"+(6<=c.options.ecmaVersion?"uy":"")+(9<=c.options.ecmaVersion?"s":"");this.unicodeProperties=GX[12<=c.options.ecmaVersion?12:c.options.ecmaVersion];this.flags=this.source="";this.start=0;this.switchN=this.switchU=!1;this.lastIntValue=this.pos=0;this.lastStringValue="";this.lastAssertionIsQuantifiable=!1;this.maxBackReference=this.numCapturingParens=0;this.groupNames=[];this.backReferenceNames=[]};
Ow.prototype.reset=function(c,h,f){var k=-1!==f.indexOf("u");this.start=c|0;this.source=h+"";this.flags=f;this.switchU=k&&6<=this.parser.options.ecmaVersion;this.switchN=k&&9<=this.parser.options.ecmaVersion};Ow.prototype.raise=function(c){this.parser.raiseRecoverable(this.start,"Invalid regular expression: /"+this.source+"/: "+c)};Ow.prototype.at=function(c,h){void 0===h&&(h=!1);var f=this.source,k=f.length;if(c>=k)return-1;var n=f.charCodeAt(c);if(!h&&!this.switchU||55295>=n||57344<=n||c+1>=k)return n;
c=f.charCodeAt(c+1);return 56320<=c&&57343>=c?(n<<10)+c-56613888:n};Ow.prototype.nextIndex=function(c,h){void 0===h&&(h=!1);var f=this.source,k=f.length;if(c>=k)return k;var n=f.charCodeAt(c),b;return!h&&!this.switchU||55295>=n||57344<=n||c+1>=k||56320>(b=f.charCodeAt(c+1))||57343<b?c+1:c+2};Ow.prototype.current=function(c){void 0===c&&(c=!1);return this.at(this.pos,c)};Ow.prototype.lookahead=function(c){void 0===c&&(c=!1);return this.at(this.nextIndex(this.pos,c),c)};Ow.prototype.advance=function(c){void 0===
c&&(c=!1);this.pos=this.nextIndex(this.pos,c)};Ow.prototype.eat=function(c,h){void 0===h&&(h=!1);return this.current(h)===c?(this.advance(h),!0):!1};eh.validateRegExpFlags=function(c){for(var h=c.validFlags,f=c.flags,k=0;k<f.length;k++){var n=f.charAt(k);-1===h.indexOf(n)&&this.raise(c.start,"Invalid regular expression flag");-1<f.indexOf(n,k+1)&&this.raise(c.start,"Duplicate regular expression flag")}};eh.validateRegExpPattern=function(c){this.regexp_pattern(c);!c.switchN&&9<=this.options.ecmaVersion&&
0<c.groupNames.length&&(c.switchN=!0,this.regexp_pattern(c))};eh.regexp_pattern=function(c){c.pos=0;c.lastIntValue=0;c.lastStringValue="";c.lastAssertionIsQuantifiable=!1;c.numCapturingParens=0;c.maxBackReference=0;c.groupNames.length=0;c.backReferenceNames.length=0;this.regexp_disjunction(c);c.pos!==c.source.length&&(c.eat(41)&&c.raise("Unmatched ')'"),(c.eat(93)||c.eat(125))&&c.raise("Lone quantifier brackets"));c.maxBackReference>c.numCapturingParens&&c.raise("Invalid escape");for(var h=0,f=c.backReferenceNames;h<
f.length;h+=1)-1===c.groupNames.indexOf(f[h])&&c.raise("Invalid named capture referenced")};eh.regexp_disjunction=function(c){for(this.regexp_alternative(c);c.eat(124);)this.regexp_alternative(c);this.regexp_eatQuantifier(c,!0)&&c.raise("Nothing to repeat");c.eat(123)&&c.raise("Lone quantifier brackets")};eh.regexp_alternative=function(c){for(;c.pos<c.source.length&&this.regexp_eatTerm(c););};eh.regexp_eatTerm=function(c){return this.regexp_eatAssertion(c)?(c.lastAssertionIsQuantifiable&&this.regexp_eatQuantifier(c)&&
c.switchU&&c.raise("Invalid quantifier"),!0):(c.switchU?this.regexp_eatAtom(c):this.regexp_eatExtendedAtom(c))?(this.regexp_eatQuantifier(c),!0):!1};eh.regexp_eatAssertion=function(c){var h=c.pos;c.lastAssertionIsQuantifiable=!1;if(c.eat(94)||c.eat(36))return!0;if(c.eat(92)){if(c.eat(66)||c.eat(98))return!0;c.pos=h}if(c.eat(40)&&c.eat(63)){var f=!1;9<=this.options.ecmaVersion&&(f=c.eat(60));if(c.eat(61)||c.eat(33))return this.regexp_disjunction(c),c.eat(41)||c.raise("Unterminated group"),c.lastAssertionIsQuantifiable=
!f,!0}c.pos=h;return!1};eh.regexp_eatQuantifier=function(c,h){void 0===h&&(h=!1);return this.regexp_eatQuantifierPrefix(c,h)?(c.eat(63),!0):!1};eh.regexp_eatQuantifierPrefix=function(c,h){return c.eat(42)||c.eat(43)||c.eat(63)||this.regexp_eatBracedQuantifier(c,h)};eh.regexp_eatBracedQuantifier=function(c,h){var f=c.pos;if(c.eat(123)){var k=-1;if(this.regexp_eatDecimalDigits(c)){var n=c.lastIntValue;c.eat(44)&&this.regexp_eatDecimalDigits(c)&&(k=c.lastIntValue);if(c.eat(125))return-1!==k&&k<n&&!h&&
c.raise("numbers out of order in {} quantifier"),!0}c.switchU&&!h&&c.raise("Incomplete quantifier");c.pos=f}return!1};eh.regexp_eatAtom=function(c){return this.regexp_eatPatternCharacters(c)||c.eat(46)||this.regexp_eatReverseSolidusAtomEscape(c)||this.regexp_eatCharacterClass(c)||this.regexp_eatUncapturingGroup(c)||this.regexp_eatCapturingGroup(c)};eh.regexp_eatReverseSolidusAtomEscape=function(c){var h=c.pos;if(c.eat(92)){if(this.regexp_eatAtomEscape(c))return!0;c.pos=h}return!1};eh.regexp_eatUncapturingGroup=
function(c){var h=c.pos;if(c.eat(40)){if(c.eat(63)&&c.eat(58)){this.regexp_disjunction(c);if(c.eat(41))return!0;c.raise("Unterminated group")}c.pos=h}return!1};eh.regexp_eatCapturingGroup=function(c){if(c.eat(40)){9<=this.options.ecmaVersion?this.regexp_groupSpecifier(c):63===c.current()&&c.raise("Invalid group");this.regexp_disjunction(c);if(c.eat(41))return c.numCapturingParens+=1,!0;c.raise("Unterminated group")}return!1};eh.regexp_eatExtendedAtom=function(c){return c.eat(46)||this.regexp_eatReverseSolidusAtomEscape(c)||
this.regexp_eatCharacterClass(c)||this.regexp_eatUncapturingGroup(c)||this.regexp_eatCapturingGroup(c)||this.regexp_eatInvalidBracedQuantifier(c)||this.regexp_eatExtendedPatternCharacter(c)};eh.regexp_eatInvalidBracedQuantifier=function(c){this.regexp_eatBracedQuantifier(c,!0)&&c.raise("Nothing to repeat");return!1};eh.regexp_eatSyntaxCharacter=function(c){var h=c.current();return Du(h)?(c.lastIntValue=h,c.advance(),!0):!1};eh.regexp_eatPatternCharacters=function(c){for(var h=c.pos,f=0;-1!==(f=c.current())&&
!Du(f);)c.advance();return c.pos!==h};eh.regexp_eatExtendedPatternCharacter=function(c){var h=c.current();return-1===h||36===h||40<=h&&43>=h||46===h||63===h||91===h||94===h||124===h?!1:(c.advance(),!0)};eh.regexp_groupSpecifier=function(c){c.eat(63)&&(this.regexp_eatGroupName(c)?(-1!==c.groupNames.indexOf(c.lastStringValue)&&c.raise("Duplicate capture group name"),c.groupNames.push(c.lastStringValue)):c.raise("Invalid group"))};eh.regexp_eatGroupName=function(c){c.lastStringValue="";if(c.eat(60)){if(this.regexp_eatRegExpIdentifierName(c)&&
c.eat(62))return!0;c.raise("Invalid capture group name")}return!1};eh.regexp_eatRegExpIdentifierName=function(c){c.lastStringValue="";if(this.regexp_eatRegExpIdentifierStart(c)){for(c.lastStringValue+=Cu(c.lastIntValue);this.regexp_eatRegExpIdentifierPart(c);)c.lastStringValue+=Cu(c.lastIntValue);return!0}return!1};eh.regexp_eatRegExpIdentifierStart=function(c){var h=c.pos,f=11<=this.options.ecmaVersion,k=c.current(f);c.advance(f);92===k&&this.regexp_eatRegExpUnicodeEscapeSequence(c,f)&&(k=c.lastIntValue);
f=k;if(Lr(f,!0)||36===f||95===f)return c.lastIntValue=k,!0;c.pos=h;return!1};eh.regexp_eatRegExpIdentifierPart=function(c){var h=c.pos,f=11<=this.options.ecmaVersion,k=c.current(f);c.advance(f);92===k&&this.regexp_eatRegExpUnicodeEscapeSequence(c,f)&&(k=c.lastIntValue);f=k;if(Bu(f,!0)||36===f||95===f||8204===f||8205===f)return c.lastIntValue=k,!0;c.pos=h;return!1};eh.regexp_eatAtomEscape=function(c){if(this.regexp_eatBackReference(c)||this.regexp_eatCharacterClassEscape(c)||this.regexp_eatCharacterEscape(c)||
c.switchN&&this.regexp_eatKGroupName(c))return!0;c.switchU&&(99===c.current()&&c.raise("Invalid unicode escape"),c.raise("Invalid escape"));return!1};eh.regexp_eatBackReference=function(c){var h=c.pos;if(this.regexp_eatDecimalEscape(c)){var f=c.lastIntValue;if(c.switchU)return f>c.maxBackReference&&(c.maxBackReference=f),!0;if(f<=c.numCapturingParens)return!0;c.pos=h}return!1};eh.regexp_eatKGroupName=function(c){if(c.eat(107)){if(this.regexp_eatGroupName(c))return c.backReferenceNames.push(c.lastStringValue),
!0;c.raise("Invalid named reference")}return!1};eh.regexp_eatCharacterEscape=function(c){return this.regexp_eatControlEscape(c)||this.regexp_eatCControlLetter(c)||this.regexp_eatZero(c)||this.regexp_eatHexEscapeSequence(c)||this.regexp_eatRegExpUnicodeEscapeSequence(c,!1)||!c.switchU&&this.regexp_eatLegacyOctalEscapeSequence(c)||this.regexp_eatIdentityEscape(c)};eh.regexp_eatCControlLetter=function(c){var h=c.pos;if(c.eat(99)){if(this.regexp_eatControlLetter(c))return!0;c.pos=h}return!1};eh.regexp_eatZero=
function(c){return 48!==c.current()||Wq(c.lookahead())?!1:(c.lastIntValue=0,c.advance(),!0)};eh.regexp_eatControlEscape=function(c){var h=c.current();return 116===h?(c.lastIntValue=9,c.advance(),!0):110===h?(c.lastIntValue=10,c.advance(),!0):118===h?(c.lastIntValue=11,c.advance(),!0):102===h?(c.lastIntValue=12,c.advance(),!0):114===h?(c.lastIntValue=13,c.advance(),!0):!1};eh.regexp_eatControlLetter=function(c){var h=c.current();return 65<=h&&90>=h||97<=h&&122>=h?(c.lastIntValue=h%32,c.advance(),!0):
!1};eh.regexp_eatRegExpUnicodeEscapeSequence=function(c,h){void 0===h&&(h=!1);var f=c.pos;h=h||c.switchU;if(c.eat(117)){if(this.regexp_eatFixedHexDigits(c,4)){f=c.lastIntValue;if(h&&55296<=f&&56319>=f){h=c.pos;if(c.eat(92)&&c.eat(117)&&this.regexp_eatFixedHexDigits(c,4)){var k=c.lastIntValue;if(56320<=k&&57343>=k)return c.lastIntValue=1024*(f-55296)+(k-56320)+65536,!0}c.pos=h;c.lastIntValue=f}return!0}if(k=h&&c.eat(123)&&this.regexp_eatHexDigits(c)&&c.eat(125))k=c.lastIntValue,k=0<=k&&1114111>=k;
if(k)return!0;h&&c.raise("Invalid unicode escape");c.pos=f}return!1};eh.regexp_eatIdentityEscape=function(c){if(c.switchU)return this.regexp_eatSyntaxCharacter(c)?!0:c.eat(47)?(c.lastIntValue=47,!0):!1;var h=c.current();return 99===h||c.switchN&&107===h?!1:(c.lastIntValue=h,c.advance(),!0)};eh.regexp_eatDecimalEscape=function(c){c.lastIntValue=0;var h=c.current();if(49<=h&&57>=h){do c.lastIntValue=10*c.lastIntValue+(h-48),c.advance();while(48<=(h=c.current())&&57>=h);return!0}return!1};eh.regexp_eatCharacterClassEscape=
function(c){var h=c.current();if(100===h||68===h||115===h||83===h||119===h||87===h)return c.lastIntValue=-1,c.advance(),!0;if(c.switchU&&9<=this.options.ecmaVersion&&(80===h||112===h)){c.lastIntValue=-1;c.advance();if(c.eat(123)&&this.regexp_eatUnicodePropertyValueExpression(c)&&c.eat(125))return!0;c.raise("Invalid property name")}return!1};eh.regexp_eatUnicodePropertyValueExpression=function(c){var h=c.pos;if(this.regexp_eatUnicodePropertyName(c)&&c.eat(61)){var f=c.lastStringValue;if(this.regexp_eatUnicodePropertyValue(c))return this.regexp_validateUnicodePropertyNameAndValue(c,
f,c.lastStringValue),!0}c.pos=h;return this.regexp_eatLoneUnicodePropertyNameOrValue(c)?(this.regexp_validateUnicodePropertyNameOrValue(c,c.lastStringValue),!0):!1};eh.regexp_validateUnicodePropertyNameAndValue=function(c,h,f){NI.call(c.unicodeProperties.nonBinary,h)||c.raise("Invalid property name");c.unicodeProperties.nonBinary[h].test(f)||c.raise("Invalid property value")};eh.regexp_validateUnicodePropertyNameOrValue=function(c,h){c.unicodeProperties.binary.test(h)||c.raise("Invalid property name")};
eh.regexp_eatUnicodePropertyName=function(c){var h;for(c.lastStringValue="";wx(h=c.current());)c.lastStringValue+=Cu(h),c.advance();return""!==c.lastStringValue};eh.regexp_eatUnicodePropertyValue=function(c){var h;for(c.lastStringValue="";Ws(h=c.current());)c.lastStringValue+=Cu(h),c.advance();return""!==c.lastStringValue};eh.regexp_eatLoneUnicodePropertyNameOrValue=function(c){return this.regexp_eatUnicodePropertyValue(c)};eh.regexp_eatCharacterClass=function(c){if(c.eat(91)){c.eat(94);this.regexp_classRanges(c);
if(c.eat(93))return!0;c.raise("Unterminated character class")}return!1};eh.regexp_classRanges=function(c){for(;this.regexp_eatClassAtom(c);){var h=c.lastIntValue;if(c.eat(45)&&this.regexp_eatClassAtom(c)){var f=c.lastIntValue;!c.switchU||-1!==h&&-1!==f||c.raise("Invalid character class");-1!==h&&-1!==f&&h>f&&c.raise("Range out of order in character class")}}};eh.regexp_eatClassAtom=function(c){var h=c.pos;if(c.eat(92)){if(this.regexp_eatClassEscape(c))return!0;if(c.switchU){var f=c.current();(99===
f||48<=f&&55>=f)&&c.raise("Invalid class escape");c.raise("Invalid escape")}c.pos=h}h=c.current();return 93!==h?(c.lastIntValue=h,c.advance(),!0):!1};eh.regexp_eatClassEscape=function(c){var h=c.pos;if(c.eat(98))return c.lastIntValue=8,!0;if(c.switchU&&c.eat(45))return c.lastIntValue=45,!0;if(!c.switchU&&c.eat(99)){if(this.regexp_eatClassControlLetter(c))return!0;c.pos=h}return this.regexp_eatCharacterClassEscape(c)||this.regexp_eatCharacterEscape(c)};eh.regexp_eatClassControlLetter=function(c){var h=
c.current();return Wq(h)||95===h?(c.lastIntValue=h%32,c.advance(),!0):!1};eh.regexp_eatHexEscapeSequence=function(c){var h=c.pos;if(c.eat(120)){if(this.regexp_eatFixedHexDigits(c,2))return!0;c.switchU&&c.raise("Invalid escape");c.pos=h}return!1};eh.regexp_eatDecimalDigits=function(c){var h=c.pos,f;for(c.lastIntValue=0;Wq(f=c.current());)c.lastIntValue=10*c.lastIntValue+(f-48),c.advance();return c.pos!==h};eh.regexp_eatHexDigits=function(c){var h=c.pos,f;for(c.lastIntValue=0;Az(f=c.current());)c.lastIntValue=
16*c.lastIntValue+$B(f),c.advance();return c.pos!==h};eh.regexp_eatLegacyOctalEscapeSequence=function(c){if(this.regexp_eatOctalDigit(c)){var h=c.lastIntValue;if(this.regexp_eatOctalDigit(c)){var f=c.lastIntValue;3>=h&&this.regexp_eatOctalDigit(c)?c.lastIntValue=64*h+8*f+c.lastIntValue:c.lastIntValue=8*h+f}else c.lastIntValue=h;return!0}return!1};eh.regexp_eatOctalDigit=function(c){var h=c.current();if(48<=h&&55>=h)return c.lastIntValue=h-48,c.advance(),!0;c.lastIntValue=0;return!1};eh.regexp_eatFixedHexDigits=
function(c,h){for(var f=c.pos,k=c.lastIntValue=0;k<h;++k){var n=c.current();if(!Az(n))return c.pos=f,!1;c.lastIntValue=16*c.lastIntValue+$B(n);c.advance()}return!0};var FG=function(c){this.type=c.type;this.value=c.value;this.start=c.start;this.end=c.end;c.options.locations&&(this.loc=new zz(c,c.startLoc,c.endLoc));c.options.ranges&&(this.range=[c.start,c.end])},vj=am.prototype;vj.next=function(c){!c&&this.type.keyword&&this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword "+
this.type.keyword);if(this.options.onToken)this.options.onToken(new FG(this));this.lastTokEnd=this.end;this.lastTokStart=this.start;this.lastTokEndLoc=this.endLoc;this.lastTokStartLoc=this.startLoc;this.nextToken()};vj.getToken=function(){this.next();return new FG(this)};"undefined"!==typeof Symbol&&(vj[Symbol.iterator]=function(){var c=this;return{next:function(){var h=c.getToken();return{done:h.type===Ya.eof,value:h}}}});vj.curContext=function(){return this.context[this.context.length-1]};vj.nextToken=
function(){var c=this.curContext();c&&c.preserveSpace||this.skipSpace();this.start=this.pos;this.options.locations&&(this.startLoc=this.curPosition());if(this.pos>=this.input.length)return this.finishToken(Ya.eof);if(c.override)return c.override(this);this.readToken(this.fullCharCodeAtPos())};vj.readToken=function(c){return Lr(c,6<=this.options.ecmaVersion)||92===c?this.readWord():this.getTokenFromCode(c)};vj.fullCharCodeAtPos=function(){var c=this.input.charCodeAt(this.pos);if(55295>=c||57344<=c)return c;
var h=this.input.charCodeAt(this.pos+1);return(c<<10)+h-56613888};vj.skipBlockComment=function(){var c=this.options.onComment&&this.curPosition(),h=this.pos,f=this.input.indexOf("*/",this.pos+=2);-1===f&&this.raise(this.pos-2,"Unterminated comment");this.pos=f+2;if(this.options.locations){vx.lastIndex=h;for(var k;(k=vx.exec(this.input))&&k.index<this.pos;)++this.curLine,this.lineStart=k.index+k[0].length}if(this.options.onComment)this.options.onComment(!0,this.input.slice(h+2,f),h,this.pos,c,this.curPosition())};
vj.skipLineComment=function(c){for(var h=this.pos,f=this.options.onComment&&this.curPosition(),k=this.input.charCodeAt(this.pos+=c);this.pos<this.input.length&&!yi(k);)k=this.input.charCodeAt(++this.pos);if(this.options.onComment)this.options.onComment(!1,this.input.slice(h+c,this.pos),h,this.pos,f,this.curPosition())};vj.skipSpace=function(){a:for(;this.pos<this.input.length;){var c=this.input.charCodeAt(this.pos);switch(c){case 32:case 160:++this.pos;break;case 13:10===this.input.charCodeAt(this.pos+
1)&&++this.pos;case 10:case 8232:case 8233:++this.pos;this.options.locations&&(++this.curLine,this.lineStart=this.pos);break;case 47:switch(this.input.charCodeAt(this.pos+1)){case 42:this.skipBlockComment();break;case 47:this.skipLineComment(2);break;default:break a}break;default:if(8<c&&14>c||5760<=c&&nT.test(String.fromCharCode(c)))++this.pos;else break a}}};vj.finishToken=function(c,h){this.end=this.pos;this.options.locations&&(this.endLoc=this.curPosition());var f=this.type;this.type=c;this.value=
h;this.updateContext(f)};vj.readToken_dot=function(){var c=this.input.charCodeAt(this.pos+1);if(48<=c&&57>=c)return this.readNumber(!0);var h=this.input.charCodeAt(this.pos+2);if(6<=this.options.ecmaVersion&&46===c&&46===h)return this.pos+=3,this.finishToken(Ya.ellipsis);++this.pos;return this.finishToken(Ya.dot)};vj.readToken_slash=function(){var c=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):61===c?this.finishOp(Ya.assign,2):this.finishOp(Ya.slash,1)};
vj.readToken_mult_modulo_exp=function(c){var h=this.input.charCodeAt(this.pos+1),f=1,k=42===c?Ya.star:Ya.modulo;7<=this.options.ecmaVersion&&42===c&&42===h&&(++f,k=Ya.starstar,h=this.input.charCodeAt(this.pos+2));return 61===h?this.finishOp(Ya.assign,f+1):this.finishOp(k,f)};vj.readToken_pipe_amp=function(c){var h=this.input.charCodeAt(this.pos+1);return h===c?12<=this.options.ecmaVersion&&61===this.input.charCodeAt(this.pos+2)?this.finishOp(Ya.assign,3):this.finishOp(124===c?Ya.logicalOR:Ya.logicalAND,
2):61===h?this.finishOp(Ya.assign,2):this.finishOp(124===c?Ya.bitwiseOR:Ya.bitwiseAND,1)};vj.readToken_caret=function(){return 61===this.input.charCodeAt(this.pos+1)?this.finishOp(Ya.assign,2):this.finishOp(Ya.bitwiseXOR,1)};vj.readToken_plus_min=function(c){var h=this.input.charCodeAt(this.pos+1);return h===c?45!==h||this.inModule||62!==this.input.charCodeAt(this.pos+2)||0!==this.lastTokEnd&&!Cq.test(this.input.slice(this.lastTokEnd,this.pos))?this.finishOp(Ya.incDec,2):(this.skipLineComment(3),
this.skipSpace(),this.nextToken()):61===h?this.finishOp(Ya.assign,2):this.finishOp(Ya.plusMin,1)};vj.readToken_lt_gt=function(c){var h=this.input.charCodeAt(this.pos+1),f=1;if(h===c)return f=62===c&&62===this.input.charCodeAt(this.pos+2)?3:2,61===this.input.charCodeAt(this.pos+f)?this.finishOp(Ya.assign,f+1):this.finishOp(Ya.bitShift,f);if(33===h&&60===c&&!this.inModule&&45===this.input.charCodeAt(this.pos+2)&&45===this.input.charCodeAt(this.pos+3))return this.skipLineComment(4),this.skipSpace(),
this.nextToken();61===h&&(f=2);return this.finishOp(Ya.relational,f)};vj.readToken_eq_excl=function(c){var h=this.input.charCodeAt(this.pos+1);return 61===h?this.finishOp(Ya.equality,61===this.input.charCodeAt(this.pos+2)?3:2):61===c&&62===h&&6<=this.options.ecmaVersion?(this.pos+=2,this.finishToken(Ya.arrow)):this.finishOp(61===c?Ya.eq:Ya.prefix,1)};vj.readToken_question=function(){var c=this.options.ecmaVersion;if(11<=c){var h=this.input.charCodeAt(this.pos+1);if(46===h){var f=this.input.charCodeAt(this.pos+
2);if(48>f||57<f)return this.finishOp(Ya.questionDot,2)}if(63===h)return 12<=c&&61===this.input.charCodeAt(this.pos+2)?this.finishOp(Ya.assign,3):this.finishOp(Ya.coalesce,2)}return this.finishOp(Ya.question,1)};vj.getTokenFromCode=function(c){switch(c){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(Ya.parenL);case 41:return++this.pos,this.finishToken(Ya.parenR);case 59:return++this.pos,this.finishToken(Ya.semi);case 44:return++this.pos,this.finishToken(Ya.comma);case 91:return++this.pos,
this.finishToken(Ya.bracketL);case 93:return++this.pos,this.finishToken(Ya.bracketR);case 123:return++this.pos,this.finishToken(Ya.braceL);case 125:return++this.pos,this.finishToken(Ya.braceR);case 58:return++this.pos,this.finishToken(Ya.colon);case 96:if(6>this.options.ecmaVersion)break;++this.pos;return this.finishToken(Ya.backQuote);case 48:c=this.input.charCodeAt(this.pos+1);if(120===c||88===c)return this.readRadixNumber(16);if(6<=this.options.ecmaVersion){if(111===c||79===c)return this.readRadixNumber(8);
if(98===c||66===c)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(c);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo_exp(c);case 124:case 38:return this.readToken_pipe_amp(c);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(c);case 60:case 62:return this.readToken_lt_gt(c);case 61:case 33:return this.readToken_eq_excl(c);
case 63:return this.readToken_question();case 126:return this.finishOp(Ya.prefix,1)}this.raise(this.pos,"Unexpected character '"+xx(c)+"'")};vj.finishOp=function(c,h){var f=this.input.slice(this.pos,this.pos+h);this.pos+=h;return this.finishToken(c,f)};vj.readRegexp=function(){for(var c,h,f=this.pos;;){this.pos>=this.input.length&&this.raise(f,"Unterminated regular expression");var k=this.input.charAt(this.pos);Cq.test(k)&&this.raise(f,"Unterminated regular expression");if(c)c=!1;else{if("["===k)h=
!0;else if("]"===k&&h)h=!1;else if("/"===k&&!h)break;c="\\"===k}++this.pos}c=this.input.slice(f,this.pos);++this.pos;k=this.pos;h=this.readWord1();this.containsEsc&&this.unexpected(k);k=this.regexpState||(this.regexpState=new Ow(this));k.reset(f,c,h);this.validateRegExpFlags(k);this.validateRegExpPattern(k);f=null;try{f=new RegExp(c,h)}catch(n){}return this.finishToken(Ya.regexp,{pattern:c,flags:h,value:f})};vj.readInt=function(c,h,f){var k=12<=this.options.ecmaVersion&&void 0===h;f=f&&48===this.input.charCodeAt(this.pos);
for(var n=this.pos,b=0,e=0,m=0,a=null==h?Infinity:h;m<a;++m,++this.pos){var g=this.input.charCodeAt(this.pos);if(k&&95===g)f&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed in legacy octal numeric literals"),95===e&&this.raiseRecoverable(this.pos,"Numeric separator must be exactly one underscore"),0===m&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed at the first of digits"),e=g;else{var l=97<=g?g-97+10:65<=g?g-65+10:48<=g&&57>=g?g-48:Infinity;if(l>=c)break;e=g;
b=b*c+l}}k&&95===e&&this.raiseRecoverable(this.pos-1,"Numeric separator is not allowed at the last of digits");return this.pos===n||null!=h&&this.pos-n!==h?null:b};vj.readRadixNumber=function(c){var h=this.pos;this.pos+=2;var f=this.readInt(c);null==f&&this.raise(this.start+2,"Expected number in radix "+c);11<=this.options.ecmaVersion&&110===this.input.charCodeAt(this.pos)?(f=aC(this.input.slice(h,this.pos)),++this.pos):Lr(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");
return this.finishToken(Ya.num,f)};vj.readNumber=function(c){var h=this.pos;c||null!==this.readInt(10,void 0,!0)||this.raise(h,"Invalid number");var f=2<=this.pos-h&&48===this.input.charCodeAt(h);f&&this.strict&&this.raise(h,"Invalid number");var k=this.input.charCodeAt(this.pos);if(!f&&!c&&11<=this.options.ecmaVersion&&110===k)return f=aC(this.input.slice(h,this.pos)),++this.pos,Lr(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(Ya.num,f);f&&/[89]/.test(this.input.slice(h,
this.pos))&&(f=!1);46!==k||f||(++this.pos,this.readInt(10),k=this.input.charCodeAt(this.pos));69!==k&&101!==k||f||(k=this.input.charCodeAt(++this.pos),43!==k&&45!==k||++this.pos,null===this.readInt(10)&&this.raise(h,"Invalid number"));Lr(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");c=this.input.slice(h,this.pos);f=f?parseInt(c,8):parseFloat(c.replace(/_/g,""));return this.finishToken(Ya.num,f)};vj.readCodePoint=function(){if(123===this.input.charCodeAt(this.pos)){6>
this.options.ecmaVersion&&this.unexpected();var c=++this.pos;var h=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos);++this.pos;1114111<h&&this.invalidStringToken(c,"Code point out of bounds")}else h=this.readHexChar(4);return h};vj.readString=function(c){for(var h="",f=++this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");var k=this.input.charCodeAt(this.pos);if(k===c)break;92===k?(h+=this.input.slice(f,this.pos),h+=this.readEscapedChar(!1),f=
this.pos):(yi(k,10<=this.options.ecmaVersion)&&this.raise(this.start,"Unterminated string constant"),++this.pos)}h+=this.input.slice(f,this.pos++);return this.finishToken(Ya.string,h)};var c5={};vj.tryReadTemplateToken=function(){this.inTemplateElement=!0;try{this.readTmplToken()}catch(c){if(c===c5)this.readInvalidTemplateToken();else throw c;}this.inTemplateElement=!1};vj.invalidStringToken=function(c,h){if(this.inTemplateElement&&9<=this.options.ecmaVersion)throw c5;this.raise(c,h)};vj.readTmplToken=
function(){for(var c="",h=this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated template");var f=this.input.charCodeAt(this.pos);if(96===f||36===f&&123===this.input.charCodeAt(this.pos+1)){if(this.pos===this.start&&(this.type===Ya.template||this.type===Ya.invalidTemplate)){if(36===f)return this.pos+=2,this.finishToken(Ya.dollarBraceL);++this.pos;return this.finishToken(Ya.backQuote)}c+=this.input.slice(h,this.pos);return this.finishToken(Ya.template,c)}if(92===f)c+=this.input.slice(h,
this.pos),c+=this.readEscapedChar(!0),h=this.pos;else if(yi(f)){c+=this.input.slice(h,this.pos);++this.pos;switch(f){case 13:10===this.input.charCodeAt(this.pos)&&++this.pos;case 10:c+="\n";break;default:c+=String.fromCharCode(f)}this.options.locations&&(++this.curLine,this.lineStart=this.pos);h=this.pos}else++this.pos}};vj.readInvalidTemplateToken=function(){for(;this.pos<this.input.length;this.pos++)switch(this.input[this.pos]){case "\\":++this.pos;break;case "$":if("{"!==this.input[this.pos+1])break;
case "`":return this.finishToken(Ya.invalidTemplate,this.input.slice(this.start,this.pos))}this.raise(this.start,"Unterminated template")};vj.readEscapedChar=function(c){var h=this.input.charCodeAt(++this.pos);++this.pos;switch(h){case 110:return"\n";case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return xx(this.readCodePoint());case 116:return"\t";case 98:return"\b";case 118:return"\x0B";case 102:return"\f";case 13:10===this.input.charCodeAt(this.pos)&&++this.pos;
case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";case 56:case 57:if(this.strict&&this.invalidStringToken(this.pos-1,"Invalid escape sequence"),c)return this.invalidStringToken(this.pos-1,"Invalid escape sequence in template string"),null;default:if(48<=h&&55>=h){var f=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],k=parseInt(f,8);255<k&&(f=f.slice(0,-1),k=parseInt(f,8));this.pos+=f.length-1;h=this.input.charCodeAt(this.pos);"0"===f&&56!==h&&57!==h||!this.strict&&
!c||this.invalidStringToken(this.pos-1-f.length,c?"Octal literal in template string":"Octal literal in strict mode");return String.fromCharCode(k)}return yi(h)?"":String.fromCharCode(h)}};vj.readHexChar=function(c){var h=this.pos;c=this.readInt(16,c);null===c&&this.invalidStringToken(h,"Bad character escape sequence");return c};vj.readWord1=function(){this.containsEsc=!1;for(var c="",h=!0,f=this.pos,k=6<=this.options.ecmaVersion;this.pos<this.input.length;){var n=this.fullCharCodeAtPos();if(Bu(n,
k))this.pos+=65535>=n?1:2;else if(92===n)this.containsEsc=!0,c+=this.input.slice(f,this.pos),f=this.pos,117!==this.input.charCodeAt(++this.pos)&&this.invalidStringToken(this.pos,"Expecting Unicode escape sequence \\uXXXX"),++this.pos,n=this.readCodePoint(),(h?Lr:Bu)(n,k)||this.invalidStringToken(f,"Invalid Unicode escape"),c+=xx(n),f=this.pos;else break;h=!1}return c+this.input.slice(f,this.pos)};vj.readWord=function(){var c=this.readWord1(),h=Ya.name;this.keywords.test(c)&&(h=MI[c]);return this.finishToken(h,
c)};am.acorn={Parser:am,version:"8.0.4",defaultOptions:dF,Position:ZB,SourceLocation:zz,getLineInfo:fq,Node:zy,TokenType:Sj,tokTypes:Ya,keywordTypes:MI,TokContext:ts,tokContexts:bm,isIdentifierChar:Bu,isIdentifierStart:Lr,Token:FG,isNewLine:yi,lineBreak:Cq,lineBreakG:vx,nonASCIIwhitespace:nT};var pv=Object.freeze({__proto__:null,Node:zy,Parser:am,Position:ZB,SourceLocation:zz,TokContext:ts,Token:FG,TokenType:Sj,defaultOptions:dF,getLineInfo:fq,isIdentifierChar:Bu,isIdentifierStart:Lr,isNewLine:yi,
keywordTypes:MI,lineBreak:Cq,lineBreakG:vx,nonASCIIwhitespace:nT,parse:function(c,h){return am.parse(c,h)},parseExpressionAt:function(c,h,f){return am.parseExpressionAt(c,h,f)},tokContexts:bm,tokTypes:Ya,tokenizer:function(c,h){return am.tokenizer(c,h)},version:"8.0.4"});Da("bD",pv);var OA=function(c,h){this.node=c;this.state=h},Uaa=Object.create||function(c){function h(){}h.prototype=c;return new h},Bf={};Bf.Program=Bf.BlockStatement=function(c,h,f){var k=0;for(c=c.body;k<c.length;k+=1)f(c[k],h,
"Statement")};Bf.Statement=yx;Bf.EmptyStatement=wp;Bf.ExpressionStatement=Bf.ParenthesizedExpression=Bf.ChainExpression=function(c,h,f){return f(c.expression,h,"Expression")};Bf.IfStatement=function(c,h,f){f(c.test,h,"Expression");f(c.consequent,h,"Statement");c.alternate&&f(c.alternate,h,"Statement")};Bf.LabeledStatement=function(c,h,f){return f(c.body,h,"Statement")};Bf.BreakStatement=Bf.ContinueStatement=wp;Bf.WithStatement=function(c,h,f){f(c.object,h,"Expression");f(c.body,h,"Statement")};Bf.SwitchStatement=
function(c,h,f){f(c.discriminant,h,"Expression");var k=0;for(c=c.cases;k<c.length;k+=1){var n=c[k];n.test&&f(n.test,h,"Expression");var b=0;for(n=n.consequent;b<n.length;b+=1)f(n[b],h,"Statement")}};Bf.SwitchCase=function(c,h,f){c.test&&f(c.test,h,"Expression");var k=0;for(c=c.consequent;k<c.length;k+=1)f(c[k],h,"Statement")};Bf.ReturnStatement=Bf.YieldExpression=Bf.AwaitExpression=function(c,h,f){c.argument&&f(c.argument,h,"Expression")};Bf.ThrowStatement=Bf.SpreadElement=function(c,h,f){return f(c.argument,
h,"Expression")};Bf.TryStatement=function(c,h,f){f(c.block,h,"Statement");c.handler&&f(c.handler,h);c.finalizer&&f(c.finalizer,h,"Statement")};Bf.CatchClause=function(c,h,f){c.param&&f(c.param,h,"Pattern");f(c.body,h,"Statement")};Bf.WhileStatement=Bf.DoWhileStatement=function(c,h,f){f(c.test,h,"Expression");f(c.body,h,"Statement")};Bf.ForStatement=function(c,h,f){c.init&&f(c.init,h,"ForInit");c.test&&f(c.test,h,"Expression");c.update&&f(c.update,h,"Expression");f(c.body,h,"Statement")};Bf.ForInStatement=
Bf.ForOfStatement=function(c,h,f){f(c.left,h,"ForInit");f(c.right,h,"Expression");f(c.body,h,"Statement")};Bf.ForInit=function(c,h,f){"VariableDeclaration"===c.type?f(c,h):f(c,h,"Expression")};Bf.DebuggerStatement=wp;Bf.FunctionDeclaration=function(c,h,f){return f(c,h,"Function")};Bf.VariableDeclaration=function(c,h,f){var k=0;for(c=c.declarations;k<c.length;k+=1)f(c[k],h)};Bf.VariableDeclarator=function(c,h,f){f(c.id,h,"Pattern");c.init&&f(c.init,h,"Expression")};Bf.Function=function(c,h,f){c.id&&
f(c.id,h,"Pattern");for(var k=0,n=c.params;k<n.length;k+=1)f(n[k],h,"Pattern");f(c.body,h,c.expression?"Expression":"Statement")};Bf.Pattern=function(c,h,f){"Identifier"===c.type?f(c,h,"VariablePattern"):"MemberExpression"===c.type?f(c,h,"MemberPattern"):f(c,h)};Bf.VariablePattern=wp;Bf.MemberPattern=yx;Bf.RestElement=function(c,h,f){return f(c.argument,h,"Pattern")};Bf.ArrayPattern=function(c,h,f){var k=0;for(c=c.elements;k<c.length;k+=1){var n=c[k];n&&f(n,h,"Pattern")}};Bf.ObjectPattern=function(c,
h,f){var k=0;for(c=c.properties;k<c.length;k+=1){var n=c[k];"Property"===n.type?(n.computed&&f(n.key,h,"Expression"),f(n.value,h,"Pattern")):"RestElement"===n.type&&f(n.argument,h,"Pattern")}};Bf.Expression=yx;Bf.ThisExpression=Bf.Super=Bf.MetaProperty=wp;Bf.ArrayExpression=function(c,h,f){var k=0;for(c=c.elements;k<c.length;k+=1){var n=c[k];n&&f(n,h,"Expression")}};Bf.ObjectExpression=function(c,h,f){var k=0;for(c=c.properties;k<c.length;k+=1)f(c[k],h)};Bf.FunctionExpression=Bf.ArrowFunctionExpression=
Bf.FunctionDeclaration;Bf.SequenceExpression=function(c,h,f){var k=0;for(c=c.expressions;k<c.length;k+=1)f(c[k],h,"Expression")};Bf.TemplateLiteral=function(c,h,f){for(var k=0,n=c.quasis;k<n.length;k+=1)f(n[k],h);k=0;for(c=c.expressions;k<c.length;k+=1)f(c[k],h,"Expression")};Bf.TemplateElement=wp;Bf.UnaryExpression=Bf.UpdateExpression=function(c,h,f){f(c.argument,h,"Expression")};Bf.BinaryExpression=Bf.LogicalExpression=function(c,h,f){f(c.left,h,"Expression");f(c.right,h,"Expression")};Bf.AssignmentExpression=
Bf.AssignmentPattern=function(c,h,f){f(c.left,h,"Pattern");f(c.right,h,"Expression")};Bf.ConditionalExpression=function(c,h,f){f(c.test,h,"Expression");f(c.consequent,h,"Expression");f(c.alternate,h,"Expression")};Bf.NewExpression=Bf.CallExpression=function(c,h,f){f(c.callee,h,"Expression");if(c.arguments){var k=0;for(c=c.arguments;k<c.length;k+=1)f(c[k],h,"Expression")}};Bf.MemberExpression=function(c,h,f){f(c.object,h,"Expression");c.computed&&f(c.property,h,"Expression")};Bf.ExportNamedDeclaration=
Bf.ExportDefaultDeclaration=function(c,h,f){c.declaration&&f(c.declaration,h,"ExportNamedDeclaration"===c.type||c.declaration.id?"Statement":"Expression");c.source&&f(c.source,h,"Expression")};Bf.ExportAllDeclaration=function(c,h,f){c.exported&&f(c.exported,h);f(c.source,h,"Expression")};Bf.ImportDeclaration=function(c,h,f){for(var k=0,n=c.specifiers;k<n.length;k+=1)f(n[k],h);f(c.source,h,"Expression")};Bf.ImportExpression=function(c,h,f){f(c.source,h,"Expression")};Bf.ImportSpecifier=Bf.ImportDefaultSpecifier=
Bf.ImportNamespaceSpecifier=Bf.Identifier=Bf.Literal=wp;Bf.TaggedTemplateExpression=function(c,h,f){f(c.tag,h,"Expression");f(c.quasi,h,"Expression")};Bf.ClassDeclaration=Bf.ClassExpression=function(c,h,f){return f(c,h,"Class")};Bf.Class=function(c,h,f){c.id&&f(c.id,h,"Pattern");c.superClass&&f(c.superClass,h,"Expression");f(c.body,h)};Bf.ClassBody=function(c,h,f){var k=0;for(c=c.body;k<c.length;k+=1)f(c[k],h)};Bf.MethodDefinition=Bf.Property=function(c,h,f){c.computed&&f(c.key,h,"Expression");f(c.value,
h,"Expression")};var Ht=Object.freeze({__proto__:null,ancestor:function(c,h,f,k,n){var b=[];f||(f=Bf);(function l(m,a,g){g=g||m.type;var r=h[g],v=m!==b[b.length-1];v&&b.push(m);f[g](m,a,l);r&&r(m,a||b,b);v&&b.pop()})(c,k,n)},base:Bf,findNodeAfter:function(c,h,f,k,n){f=Yv(f);k||(k=Bf);try{(function g(e,m,a){if(!(e.end<h)){a=a||e.type;if(e.start>=h&&f(a,e))throw new OA(e,m);k[a](e,m,g)}})(c,n)}catch(b){if(b instanceof OA)return b;throw b;}},findNodeAround:function(c,h,f,k,n){f=Yv(f);k||(k=Bf);try{(function g(e,
m,a){a=a||e.type;if(!(e.start>h||e.end<h)&&(k[a](e,m,g),f(a,e)))throw new OA(e,m);})(c,n)}catch(b){if(b instanceof OA)return b;throw b;}},findNodeAt:function(c,h,f,k,n,b){n||(n=Bf);k=Yv(k);try{(function l(m,a,g){g=g||m.type;if((null==h||m.start<=h)&&(null==f||m.end>=f))n[g](m,a,l);if(!(null!=h&&m.start!==h||null!=f&&m.end!==f)&&k(g,m))throw new OA(m,a);})(c,b)}catch(e){if(e instanceof OA)return e;throw e;}},findNodeBefore:function(c,h,f,k,n){f=Yv(f);k||(k=Bf);var b;(function l(m,a,g){m.start>h||(g=
g||m.type,m.end<=h&&(!b||b.node.end<m.end)&&f(g,m)&&(b=new OA(m,a)),k[g](m,a,l))})(c,n);return b},full:function(c,h,f,k,n){f||(f=Bf);(function g(e,m,a){var l=a||e.type;f[l](e,m,g);a||h(e,m,l)})(c,k,n)},fullAncestor:function(c,h,f,k){f||(f=Bf);var n=[];(function g(e,m,a){var l=a||e.type,r=e!==n[n.length-1];r&&n.push(e);f[l](e,m,g);a||h(e,m||n,n,l);r&&n.pop()})(c,k)},make:Zv,recursive:function(c,h,f,k,n){var b=f?Zv(f,k||void 0):k;(function l(m,a,g){b[g||m.type](m,a,l)})(c,h,n)},simple:function(c,h,
f,k,n){f||(f=Bf);(function g(e,m,a){a=a||e.type;var l=h[a];f[a](e,m,g);l&&l(e,m)})(c,k,n)}}),Dk=function(c,h){void 0===h&&(h={});this.toks=this.constructor.BaseParser.tokenizer(c,h);this.options=this.toks.options;this.input=this.toks.input;this.tok=this.last={type:Ya.eof,start:0,end:0};this.tok.validateRegExpFlags=Eu;this.tok.validateRegExpPattern=Eu;this.options.locations&&(c=this.toks.curPosition(),this.tok.loc=new zz(this.toks,c,c));this.ahead=[];this.context=[];this.curLineStart=this.curIndent=
0;this.nextLineStart=this.lineEnd(this.curLineStart)+1;this.inFunction=this.inAsync=!1};Dk.prototype.startNode=function(){return new zy(this.toks,this.tok.start,this.options.locations?this.tok.loc.start:null)};Dk.prototype.storeCurrentPos=function(){return this.options.locations?[this.tok.start,this.tok.loc.start]:this.tok.start};Dk.prototype.startNodeAt=function(c){return this.options.locations?new zy(this.toks,c[0],c[1]):new zy(this.toks,c)};Dk.prototype.finishNode=function(c,h){c.type=h;c.end=
this.last.end;this.options.locations&&(c.loc.end=this.last.loc.end);this.options.ranges&&(c.range[1]=this.last.end);return c};Dk.prototype.dummyNode=function(c){var h=this.startNode();h.type=c;h.end=h.start;this.options.locations&&(h.loc.end=h.loc.start);this.options.ranges&&(h.range[1]=h.start);this.last={type:Ya.name,start:h.start,end:h.start,loc:h.loc};return h};Dk.prototype.dummyIdent=function(){var c=this.dummyNode("Identifier");c.name="\u2716";return c};Dk.prototype.dummyString=function(){var c=
this.dummyNode("Literal");c.value=c.raw="\u2716";return c};Dk.prototype.eat=function(c){return this.tok.type===c?(this.next(),!0):!1};Dk.prototype.isContextual=function(c){return this.tok.type===Ya.name&&this.tok.value===c};Dk.prototype.eatContextual=function(c){return this.tok.value===c&&this.eat(Ya.name)};Dk.prototype.canInsertSemicolon=function(){return this.tok.type===Ya.eof||this.tok.type===Ya.braceR||Cq.test(this.input.slice(this.last.end,this.tok.start))};Dk.prototype.semicolon=function(){return this.eat(Ya.semi)};
Dk.prototype.expect=function(c){if(this.eat(c))return!0;for(var h=1;2>=h;h++)if(this.lookAhead(h).type===c){for(c=0;c<h;c++)this.next();return!0}};Dk.prototype.pushCx=function(){this.context.push(this.curIndent)};Dk.prototype.popCx=function(){this.curIndent=this.context.pop()};Dk.prototype.lineEnd=function(c){for(;c<this.input.length&&!yi(this.input.charCodeAt(c));)++c;return c};Dk.prototype.indentationAfter=function(c){for(var h=0;;++c){var f=this.input.charCodeAt(c);if(32===f)++h;else if(9===f)h+=
this.options.tabSize;else return h}};Dk.prototype.closes=function(c,h,f,k){return this.tok.type===c||this.tok.type===Ya.eof?!0:f!==this.curLineStart&&this.curIndent<h&&this.tokenStartsLine()&&(!k||this.nextLineStart>=this.input.length||this.indentationAfter(this.nextLineStart)<h)};Dk.prototype.tokenStartsLine=function(){for(var c=this.tok.start-1;c>=this.curLineStart;--c){var h=this.input.charCodeAt(c);if(9!==h&&32!==h)return!1}return!0};Dk.prototype.extend=function(c,h){this[c]=h(this[c])};Dk.prototype.parse=
function(){this.next();return this.parseTopLevel()};Dk.extend=function(){for(var c=[],h=arguments.length;h--;)c[h]=arguments[h];h=this;for(var f=0;f<c.length;f++)h=c[f](h);return h};Dk.parse=function(c,h){return(new this(c,h)).parse()};Dk.BaseParser=am;var zL=Dk.prototype;zL.next=function(){this.last=this.tok;this.tok=this.ahead.length?this.ahead.shift():this.readToken();if(this.tok.start>=this.nextLineStart){for(;this.tok.start>=this.nextLineStart;)this.curLineStart=this.nextLineStart,this.nextLineStart=
this.lineEnd(this.curLineStart)+1;this.curIndent=this.indentationAfter(this.curLineStart)}};zL.readToken=function(){for(;;)try{return this.toks.next(),this.toks.type===Ya.dot&&"."===this.input.substr(this.toks.end,1)&&6<=this.options.ecmaVersion&&(this.toks.end++,this.toks.type=Ya.ellipsis),new FG(this.toks)}catch(k){if(!(k instanceof SyntaxError))throw k;var c=k.message,h=k.raisedAt,f=!0;if(/unterminated/i.test(c))if(h=this.lineEnd(k.pos+1),/string/.test(c))f={start:k.pos,end:h,type:Ya.string,value:this.input.slice(k.pos+
1,h)};else if(/regular expr/i.test(c)){f=this.input.slice(k.pos,h);try{f=new RegExp(f)}catch(n){}f={start:k.pos,end:h,type:Ya.regexp,value:f}}else f=/template/.test(c)?{start:k.pos,end:h,type:Ya.template,value:this.input.slice(k.pos,h)}:!1;else if(/invalid (unicode|regexp|number)|expecting unicode|octal literal|is reserved|directly after number|expected number in radix/i.test(c))for(;h<this.input.length&&!Qi(this.input.charCodeAt(h));)++h;else if(/character escape|expected hexadecimal/i.test(c))for(;h<
this.input.length&&(c=this.input.charCodeAt(h++),34!==c&&39!==c&&!yi(c)););else if(/unexpected character/i.test(c))h++,f=!1;else if(/regular expression/i.test(c))f=!0;else throw k;this.resetTo(h);!0===f&&(f={start:h,end:h,type:Ya.name,value:"\u2716"});if(f)return this.options.locations&&(f.loc=new zz(this.toks,fq(this.input,f.start),fq(this.input,f.end))),f}};zL.resetTo=function(c){this.toks.pos=c;var h=this.input.charAt(c-1);this.toks.exprAllowed=!h||/[[{(,;:?/*=+\-~!|&%^<>]/.test(h)||/[enwfd]/.test(h)&&
/\b(case|else|return|throw|new|in|(instance|type)?of|delete|void)$/.test(this.input.slice(c-10,c));if(this.options.locations){this.toks.curLine=1;this.toks.lineStart=vx.lastIndex=0;for(var f;(f=vx.exec(this.input))&&f.index<c;)++this.toks.curLine,this.toks.lineStart=f.index+f[0].length}};zL.lookAhead=function(c){for(;c>this.ahead.length;)this.ahead.push(this.readToken());return this.ahead[c-1]};var us=Dk.prototype;us.parseTopLevel=function(){var c=this.startNodeAt(this.options.locations?[0,fq(this.input,
0)]:0);for(c.body=[];this.tok.type!==Ya.eof;)c.body.push(this.parseStatement());this.toks.adaptDirectivePrologue(c.body);this.last=this.tok;c.sourceType=this.options.sourceType;return this.finishNode(c,"Program")};us.parseStatement=function(){var c=this.tok.type,h=this.startNode();if(this.toks.isLet()){c=Ya._var;var f="let"}switch(c){case Ya._break:case Ya._continue:this.next();var k=c===Ya._break;this.semicolon()||this.canInsertSemicolon()?h.label=null:(h.label=this.tok.type===Ya.name?this.parseIdent():
null,this.semicolon());return this.finishNode(h,k?"BreakStatement":"ContinueStatement");case Ya._debugger:return this.next(),this.semicolon(),this.finishNode(h,"DebuggerStatement");case Ya._do:return this.next(),h.body=this.parseStatement(),h.test=this.eat(Ya._while)?this.parseParenExpression():this.dummyIdent(),this.semicolon(),this.finishNode(h,"DoWhileStatement");case Ya._for:this.next();k=9<=this.options.ecmaVersion&&this.eatContextual("await");this.pushCx();this.expect(Ya.parenL);if(this.tok.type===
Ya.semi)return this.parseFor(h,null);if((c=this.toks.isLet())||this.tok.type===Ya._var||this.tok.type===Ya._const)return c=this.parseVar(this.startNode(),!0,c?"let":this.tok.value),1!==c.declarations.length||this.tok.type!==Ya._in&&!this.isContextual("of")?this.parseFor(h,c):(9<=this.options.ecmaVersion&&this.tok.type!==Ya._in&&(h.await=k),this.parseForIn(h,c));c=this.parseExpression(!0);return this.tok.type===Ya._in||this.isContextual("of")?(9<=this.options.ecmaVersion&&this.tok.type!==Ya._in&&(h.await=
k),this.parseForIn(h,this.toAssignable(c))):this.parseFor(h,c);case Ya._function:return this.next(),this.parseFunction(h,!0);case Ya._if:return this.next(),h.test=this.parseParenExpression(),h.consequent=this.parseStatement(),h.alternate=this.eat(Ya._else)?this.parseStatement():null,this.finishNode(h,"IfStatement");case Ya._return:return this.next(),this.eat(Ya.semi)||this.canInsertSemicolon()?h.argument=null:(h.argument=this.parseExpression(),this.semicolon()),this.finishNode(h,"ReturnStatement");
case Ya._switch:c=this.curIndent;f=this.curLineStart;this.next();h.discriminant=this.parseParenExpression();h.cases=[];this.pushCx();for(this.expect(Ya.braceL);!this.closes(Ya.braceR,c,f,!0);)if(this.tok.type===Ya._case||this.tok.type===Ya._default){var n=this.tok.type===Ya._case;k&&this.finishNode(k,"SwitchCase");h.cases.push(k=this.startNode());k.consequent=[];this.next();k.test=n?this.parseExpression():null;this.expect(Ya.colon)}else k||(h.cases.push(k=this.startNode()),k.consequent=[],k.test=
null),k.consequent.push(this.parseStatement());k&&this.finishNode(k,"SwitchCase");this.popCx();this.eat(Ya.braceR);return this.finishNode(h,"SwitchStatement");case Ya._throw:return this.next(),h.argument=this.parseExpression(),this.semicolon(),this.finishNode(h,"ThrowStatement");case Ya._try:return this.next(),h.block=this.parseBlock(),h.handler=null,this.tok.type===Ya._catch&&(k=this.startNode(),this.next(),this.eat(Ya.parenL)?(k.param=this.toAssignable(this.parseExprAtom(),!0),this.expect(Ya.parenR)):
k.param=null,k.body=this.parseBlock(),h.handler=this.finishNode(k,"CatchClause")),h.finalizer=this.eat(Ya._finally)?this.parseBlock():null,h.handler||h.finalizer?this.finishNode(h,"TryStatement"):h.block;case Ya._var:case Ya._const:return this.parseVar(h,!1,f||this.tok.value);case Ya._while:return this.next(),h.test=this.parseParenExpression(),h.body=this.parseStatement(),this.finishNode(h,"WhileStatement");case Ya._with:return this.next(),h.object=this.parseParenExpression(),h.body=this.parseStatement(),
this.finishNode(h,"WithStatement");case Ya.braceL:return this.parseBlock();case Ya.semi:return this.next(),this.finishNode(h,"EmptyStatement");case Ya._class:return this.parseClass(!0);case Ya._import:return 10<this.options.ecmaVersion&&(k=this.lookAhead(1).type,k===Ya.parenL||k===Ya.dot)?(h.expression=this.parseExpression(),this.semicolon(),this.finishNode(h,"ExpressionStatement")):this.parseImport();case Ya._export:return this.parseExport();default:if(this.toks.isAsyncFunction())return this.next(),
this.next(),this.parseFunction(h,!0,!0);k=this.parseExpression();if(Uo(k))return this.next(),this.tok.type===Ya.eof?this.finishNode(h,"EmptyStatement"):this.parseStatement();if(c===Ya.name&&"Identifier"===k.type&&this.eat(Ya.colon))return h.body=this.parseStatement(),h.label=k,this.finishNode(h,"LabeledStatement");h.expression=k;this.semicolon();return this.finishNode(h,"ExpressionStatement")}};us.parseBlock=function(){var c=this.startNode();this.pushCx();this.expect(Ya.braceL);var h=this.curIndent,
f=this.curLineStart;for(c.body=[];!this.closes(Ya.braceR,h,f,!0);)c.body.push(this.parseStatement());this.popCx();this.eat(Ya.braceR);return this.finishNode(c,"BlockStatement")};us.parseFor=function(c,h){c.init=h;c.test=c.update=null;this.eat(Ya.semi)&&this.tok.type!==Ya.semi&&(c.test=this.parseExpression());this.eat(Ya.semi)&&this.tok.type!==Ya.parenR&&(c.update=this.parseExpression());this.popCx();this.expect(Ya.parenR);c.body=this.parseStatement();return this.finishNode(c,"ForStatement")};us.parseForIn=
function(c,h){var f=this.tok.type===Ya._in?"ForInStatement":"ForOfStatement";this.next();c.left=h;c.right=this.parseExpression();this.popCx();this.expect(Ya.parenR);c.body=this.parseStatement();return this.finishNode(c,f)};us.parseVar=function(c,h,f){c.kind=f;this.next();c.declarations=[];do f=this.startNode(),f.id=6<=this.options.ecmaVersion?this.toAssignable(this.parseExprAtom(),!0):this.parseIdent(),f.init=this.eat(Ya.eq)?this.parseMaybeAssign(h):null,c.declarations.push(this.finishNode(f,"VariableDeclarator"));
while(this.eat(Ya.comma));c.declarations.length||(f=this.startNode(),f.id=this.dummyIdent(),c.declarations.push(this.finishNode(f,"VariableDeclarator")));h||this.semicolon();return this.finishNode(c,"VariableDeclaration")};us.parseClass=function(c){var h=this.startNode();this.next();h.id=this.tok.type===Ya.name?this.parseIdent():!0===c?this.dummyIdent():null;h.superClass=this.eat(Ya._extends)?this.parseExpression():null;h.body=this.startNode();h.body.body=[];this.pushCx();var f=this.curIndent+1,k=
this.curLineStart;this.eat(Ya.braceL);this.curIndent+1<f&&(f=this.curIndent,k=this.curLineStart);for(;!this.closes(Ya.braceR,f,k);)if(!this.semicolon()){var n=this.startNode(),b=void 0;6<=this.options.ecmaVersion&&(n.static=!1,b=this.eat(Ya.star));this.parsePropertyName(n);if(Uo(n.key))Uo(this.parseMaybeAssign())&&this.next(),this.eat(Ya.comma);else{"Identifier"!==n.key.type||n.computed||"static"!==n.key.name||this.tok.type===Ya.parenL||this.tok.type===Ya.braceL?n.static=!1:(n.static=!0,b=this.eat(Ya.star),
this.parsePropertyName(n));if(n.computed||"Identifier"!==n.key.type||"async"!==n.key.name||this.tok.type===Ya.parenL||this.canInsertSemicolon())var e=!1;else e=!0,b=9<=this.options.ecmaVersion&&this.eat(Ya.star),this.parsePropertyName(n);5<=this.options.ecmaVersion&&"Identifier"===n.key.type&&!n.computed&&("get"===n.key.name||"set"===n.key.name)&&this.tok.type!==Ya.parenL&&this.tok.type!==Ya.braceL?(n.kind=n.key.name,this.parsePropertyName(n),n.value=this.parseMethod(!1)):(n.kind=n.computed||n.static||
b||e||!("Identifier"===n.key.type&&"constructor"===n.key.name||"Literal"===n.key.type&&"constructor"===n.key.value)?"method":"constructor",n.value=this.parseMethod(b,e));h.body.body.push(this.finishNode(n,"MethodDefinition"))}}this.popCx();this.eat(Ya.braceR)||(this.last.end=this.tok.start,this.options.locations&&(this.last.loc.end=this.tok.loc.start));this.semicolon();this.finishNode(h.body,"ClassBody");return this.finishNode(h,c?"ClassDeclaration":"ClassExpression")};us.parseFunction=function(c,
h,f){var k=this.inAsync,n=this.inFunction;this.initFunction(c);6<=this.options.ecmaVersion&&(c.generator=this.eat(Ya.star));8<=this.options.ecmaVersion&&(c.async=!!f);this.tok.type===Ya.name?c.id=this.parseIdent():!0===h&&(c.id=this.dummyIdent());this.inAsync=c.async;this.inFunction=!0;c.params=this.parseFunctionParams();c.body=this.parseBlock();this.toks.adaptDirectivePrologue(c.body.body);this.inAsync=k;this.inFunction=n;return this.finishNode(c,h?"FunctionDeclaration":"FunctionExpression")};us.parseExport=
function(){var c=this.startNode();this.next();if(this.eat(Ya.star))return 11<=this.options.ecmaVersion&&(this.eatContextual("as")?c.exported=this.parseExprAtom():c.exported=null),c.source=this.eatContextual("from")?this.parseExprAtom():this.dummyString(),this.finishNode(c,"ExportAllDeclaration");if(this.eat(Ya._default)){var h;if(this.tok.type===Ya._function||(h=this.toks.isAsyncFunction())){var f=this.startNode();this.next();h&&this.next();c.declaration=this.parseFunction(f,"nullableID",h)}else this.tok.type===
Ya._class?c.declaration=this.parseClass("nullableID"):(c.declaration=this.parseMaybeAssign(),this.semicolon());return this.finishNode(c,"ExportDefaultDeclaration")}this.tok.type.keyword||this.toks.isLet()||this.toks.isAsyncFunction()?(c.declaration=this.parseStatement(),c.specifiers=[],c.source=null):(c.declaration=null,c.specifiers=this.parseExportSpecifierList(),c.source=this.eatContextual("from")?this.parseExprAtom():null,this.semicolon());return this.finishNode(c,"ExportNamedDeclaration")};us.parseImport=
function(){var c=this.startNode();this.next();if(this.tok.type===Ya.string)c.specifiers=[],c.source=this.parseExprAtom();else{if(this.tok.type===Ya.name&&"from"!==this.tok.value){var h=this.startNode();h.local=this.parseIdent();this.finishNode(h,"ImportDefaultSpecifier");this.eat(Ya.comma)}c.specifiers=this.parseImportSpecifiers();c.source=this.eatContextual("from")&&this.tok.type===Ya.string?this.parseExprAtom():this.dummyString();h&&c.specifiers.unshift(h)}this.semicolon();return this.finishNode(c,
"ImportDeclaration")};us.parseImportSpecifiers=function(){var c=[];if(this.tok.type===Ya.star){var h=this.startNode();this.next();h.local=this.eatContextual("as")?this.parseIdent():this.dummyIdent();c.push(this.finishNode(h,"ImportNamespaceSpecifier"))}else{h=this.curIndent;var f=this.curLineStart,k=this.nextLineStart;this.pushCx();this.eat(Ya.braceL);this.curLineStart>k&&(k=this.curLineStart);for(;!this.closes(Ya.braceR,h+(this.curLineStart<=k?1:0),f);){var n=this.startNode();if(this.eat(Ya.star))n.local=
this.eatContextual("as")?this.parseIdent():this.dummyIdent(),this.finishNode(n,"ImportNamespaceSpecifier");else{if(this.isContextual("from"))break;n.imported=this.parseIdent();if(Uo(n.imported))break;n.local=this.eatContextual("as")?this.parseIdent():n.imported;this.finishNode(n,"ImportSpecifier")}c.push(n);this.eat(Ya.comma)}this.eat(Ya.braceR);this.popCx()}return c};us.parseExportSpecifierList=function(){var c=[],h=this.curIndent,f=this.curLineStart,k=this.nextLineStart;this.pushCx();this.eat(Ya.braceL);
this.curLineStart>k&&(k=this.curLineStart);for(;!this.closes(Ya.braceR,h+(this.curLineStart<=k?1:0),f)&&!this.isContextual("from");){var n=this.startNode();n.local=this.parseIdent();if(Uo(n.local))break;n.exported=this.eatContextual("as")?this.parseIdent():n.local;this.finishNode(n,"ExportSpecifier");c.push(n);this.eat(Ya.comma)}this.eat(Ya.braceR);this.popCx();return c};var Ek=Dk.prototype;Ek.checkLVal=function(c){if(!c)return c;switch(c.type){case "Identifier":case "MemberExpression":return c;case "ParenthesizedExpression":return c.expression=
this.checkLVal(c.expression),c;default:return this.dummyIdent()}};Ek.parseExpression=function(c){var h=this.storeCurrentPos(),f=this.parseMaybeAssign(c);if(this.tok.type===Ya.comma){h=this.startNodeAt(h);for(h.expressions=[f];this.eat(Ya.comma);)h.expressions.push(this.parseMaybeAssign(c));return this.finishNode(h,"SequenceExpression")}return f};Ek.parseParenExpression=function(){this.pushCx();this.expect(Ya.parenL);var c=this.parseExpression();this.popCx();this.expect(Ya.parenR);return c};Ek.parseMaybeAssign=
function(c){if(this.toks.isContextual("yield"))return c=this.startNode(),this.next(),this.semicolon()||this.canInsertSemicolon()||this.tok.type!==Ya.star&&!this.tok.type.startsExpr?(c.delegate=!1,c.argument=null):(c.delegate=this.eat(Ya.star),c.argument=this.parseMaybeAssign()),this.finishNode(c,"YieldExpression");var h=this.storeCurrentPos(),f=this.parseMaybeConditional(c);return this.tok.type.isAssign?(h=this.startNodeAt(h),h.operator=this.tok.value,h.left=this.tok.type===Ya.eq?this.toAssignable(f):
this.checkLVal(f),this.next(),h.right=this.parseMaybeAssign(c),this.finishNode(h,"AssignmentExpression")):f};Ek.parseMaybeConditional=function(c){var h=this.storeCurrentPos(),f=this.parseExprOps(c);return this.eat(Ya.question)?(h=this.startNodeAt(h),h.test=f,h.consequent=this.parseMaybeAssign(),h.alternate=this.expect(Ya.colon)?this.parseMaybeAssign(c):this.dummyIdent(),this.finishNode(h,"ConditionalExpression")):f};Ek.parseExprOps=function(c){var h=this.storeCurrentPos(),f=this.curIndent,k=this.curLineStart;
return this.parseExprOp(this.parseMaybeUnary(!1),h,-1,c,f,k)};Ek.parseExprOp=function(c,h,f,k,n,b){if(this.curLineStart!==b&&this.curIndent<n&&this.tokenStartsLine())return c;var e=this.tok.type.binop;if(null!=e&&(!k||this.tok.type!==Ya._in)&&e>f){var m=this.startNodeAt(h);m.left=c;m.operator=this.tok.value;this.next();this.curLineStart!==b&&this.curIndent<n&&this.tokenStartsLine()?m.right=this.dummyIdent():(c=this.storeCurrentPos(),m.right=this.parseExprOp(this.parseMaybeUnary(!1),c,e,k,n,b));this.finishNode(m,
/&&|\|\||\?\?/.test(m.operator)?"LogicalExpression":"BinaryExpression");return this.parseExprOp(m,h,f,k,n,b)}return c};Ek.parseMaybeUnary=function(c){var h=this.storeCurrentPos();if(8<=this.options.ecmaVersion&&this.toks.isContextual("await")&&(this.inAsync||!this.inFunction&&this.options.allowAwaitOutsideFunction)){var f=this.parseAwait();c=!0}else if(this.tok.type.prefix){f=this.startNode();var k=this.tok.type===Ya.incDec;k||(c=!0);f.operator=this.tok.value;f.prefix=!0;this.next();f.argument=this.parseMaybeUnary(!0);
k&&(f.argument=this.checkLVal(f.argument));f=this.finishNode(f,k?"UpdateExpression":"UnaryExpression")}else if(this.tok.type===Ya.ellipsis)f=this.startNode(),this.next(),f.argument=this.parseMaybeUnary(c),f=this.finishNode(f,"SpreadElement");else for(f=this.parseExprSubscripts();this.tok.type.postfix&&!this.canInsertSemicolon();)k=this.startNodeAt(h),k.operator=this.tok.value,k.prefix=!1,k.argument=this.checkLVal(f),this.next(),f=this.finishNode(k,"UpdateExpression");return!c&&this.eat(Ya.starstar)?
(c=this.startNodeAt(h),c.operator="**",c.left=f,c.right=this.parseMaybeUnary(!1),this.finishNode(c,"BinaryExpression")):f};Ek.parseExprSubscripts=function(){var c=this.storeCurrentPos();return this.parseSubscripts(this.parseExprAtom(),c,!1,this.curIndent,this.curLineStart)};Ek.parseSubscripts=function(c,h,f,k,n){for(var b=11<=this.options.ecmaVersion,e=!1;;){if(this.curLineStart!==n&&this.curIndent<=k&&this.tokenStartsLine())if(this.tok.type===Ya.dot&&this.curIndent===k)--k;else break;var m="Identifier"===
c.type&&"async"===c.name&&!this.canInsertSemicolon(),a=b&&this.eat(Ya.questionDot);a&&(e=!0);if(a&&this.tok.type!==Ya.parenL&&this.tok.type!==Ya.bracketL&&this.tok.type!==Ya.backQuote||this.eat(Ya.dot)){var g=this.startNodeAt(h);g.object=c;this.curLineStart!==n&&this.curIndent<=k&&this.tokenStartsLine()?g.property=this.dummyIdent():g.property=this.parsePropertyAccessor()||this.dummyIdent();g.computed=!1;b&&(g.optional=a);c=this.finishNode(g,"MemberExpression")}else if(this.tok.type===Ya.bracketL)this.pushCx(),
this.next(),g=this.startNodeAt(h),g.object=c,g.property=this.parseExpression(),g.computed=!0,b&&(g.optional=a),this.popCx(),this.expect(Ya.bracketR),c=this.finishNode(g,"MemberExpression");else if(f||this.tok.type!==Ya.parenL)if(this.tok.type===Ya.backQuote)a=this.startNodeAt(h),a.tag=c,a.quasi=this.parseTemplate(),c=this.finishNode(a,"TaggedTemplateExpression");else break;else{g=this.parseExprList(Ya.parenR);if(m&&this.eat(Ya.arrow))return this.parseArrowExpression(this.startNodeAt(h),g,!0);m=this.startNodeAt(h);
m.callee=c;m.arguments=g;b&&(m.optional=a);c=this.finishNode(m,"CallExpression")}}e&&(h=this.startNodeAt(h),h.expression=c,c=this.finishNode(h,"ChainExpression"));return c};Ek.parseExprAtom=function(){switch(this.tok.type){case Ya._this:case Ya._super:var c=this.tok.type===Ya._this?"ThisExpression":"Super";var h=this.startNode();this.next();return this.finishNode(h,c);case Ya.name:h=this.storeCurrentPos();c=this.parseIdent();var f=!1;if("async"===c.name&&!this.canInsertSemicolon()){if(this.eat(Ya._function))return this.parseFunction(this.startNodeAt(h),
!1,!0);this.tok.type===Ya.name&&(c=this.parseIdent(),f=!0)}return this.eat(Ya.arrow)?this.parseArrowExpression(this.startNodeAt(h),[c],f):c;case Ya.regexp:return h=this.startNode(),c=this.tok.value,h.regex={pattern:c.pattern,flags:c.flags},h.value=c.value,h.raw=this.input.slice(this.tok.start,this.tok.end),this.next(),this.finishNode(h,"Literal");case Ya.num:case Ya.string:return h=this.startNode(),h.value=this.tok.value,h.raw=this.input.slice(this.tok.start,this.tok.end),this.tok.type===Ya.num&&
110===h.raw.charCodeAt(h.raw.length-1)&&(h.bigint=h.raw.slice(0,-1).replace(/_/g,"")),this.next(),this.finishNode(h,"Literal");case Ya._null:case Ya._true:case Ya._false:return h=this.startNode(),h.value=this.tok.type===Ya._null?null:this.tok.type===Ya._true,h.raw=this.tok.type.keyword,this.next(),this.finishNode(h,"Literal");case Ya.parenL:h=this.storeCurrentPos();this.next();c=this.parseExpression();this.expect(Ya.parenR);if(this.eat(Ya.arrow))return c=c.expressions||[c],c.length&&Uo(c[c.length-
1])&&c.pop(),this.parseArrowExpression(this.startNodeAt(h),c);this.options.preserveParens&&(h=this.startNodeAt(h),h.expression=c,c=this.finishNode(h,"ParenthesizedExpression"));return c;case Ya.bracketL:return h=this.startNode(),h.elements=this.parseExprList(Ya.bracketR,!0),this.finishNode(h,"ArrayExpression");case Ya.braceL:return this.parseObj();case Ya._class:return this.parseClass(!1);case Ya._function:return h=this.startNode(),this.next(),this.parseFunction(h,!1);case Ya._new:return this.parseNew();
case Ya.backQuote:return this.parseTemplate();case Ya._import:return 11<=this.options.ecmaVersion?this.parseExprImport():this.dummyIdent();default:return this.dummyIdent()}};Ek.parseExprImport=function(){var c=this.startNode(),h=this.parseIdent(!0);switch(this.tok.type){case Ya.parenL:return this.parseDynamicImport(c);case Ya.dot:return c.meta=h,this.parseImportMeta(c);default:return c.name="import",this.finishNode(c,"Identifier")}};Ek.parseDynamicImport=function(c){c.source=this.parseExprList(Ya.parenR)[0]||
this.dummyString();return this.finishNode(c,"ImportExpression")};Ek.parseImportMeta=function(c){this.next();c.property=this.parseIdent(!0);return this.finishNode(c,"MetaProperty")};Ek.parseNew=function(){var c=this.startNode(),h=this.curIndent,f=this.curLineStart,k=this.parseIdent(!0);if(6<=this.options.ecmaVersion&&this.eat(Ya.dot))return c.meta=k,c.property=this.parseIdent(!0),this.finishNode(c,"MetaProperty");k=this.storeCurrentPos();c.callee=this.parseSubscripts(this.parseExprAtom(),k,!0,h,f);
c.arguments=this.tok.type===Ya.parenL?this.parseExprList(Ya.parenR):[];return this.finishNode(c,"NewExpression")};Ek.parseTemplateElement=function(){var c=this.startNode();c.value=this.tok.type===Ya.invalidTemplate?{raw:this.tok.value,cooked:null}:{raw:this.input.slice(this.tok.start,this.tok.end).replace(/\r\n?/g,"\n"),cooked:this.tok.value};this.next();c.tail=this.tok.type===Ya.backQuote;return this.finishNode(c,"TemplateElement")};Ek.parseTemplate=function(){var c=this.startNode();this.next();
c.expressions=[];var h=this.parseTemplateElement();for(c.quasis=[h];!h.tail;)this.next(),c.expressions.push(this.parseExpression()),this.expect(Ya.braceR)?h=this.parseTemplateElement():(h=this.startNode(),h.value={cooked:"",raw:""},h.tail=!0,this.finishNode(h,"TemplateElement")),c.quasis.push(h);this.expect(Ya.backQuote);return this.finishNode(c,"TemplateLiteral")};Ek.parseObj=function(){var c=this.startNode();c.properties=[];this.pushCx();var h=this.curIndent+1,f=this.curLineStart;this.eat(Ya.braceL);
this.curIndent+1<h&&(h=this.curIndent,f=this.curLineStart);for(;!this.closes(Ya.braceR,h,f);){var k=this.startNode(),n=void 0,b=void 0;if(9<=this.options.ecmaVersion&&this.eat(Ya.ellipsis))k.argument=this.parseMaybeAssign(),c.properties.push(this.finishNode(k,"SpreadElement"));else{6<=this.options.ecmaVersion&&(b=this.storeCurrentPos(),k.method=!1,k.shorthand=!1,n=this.eat(Ya.star));this.parsePropertyName(k);if(this.toks.isAsyncProp(k)){var e=!0;n=9<=this.options.ecmaVersion&&this.eat(Ya.star);this.parsePropertyName(k)}else e=
!1;Uo(k.key)?Uo(this.parseMaybeAssign())&&this.next():(this.eat(Ya.colon)?(k.kind="init",k.value=this.parseMaybeAssign()):6<=this.options.ecmaVersion&&(this.tok.type===Ya.parenL||this.tok.type===Ya.braceL)?(k.kind="init",k.method=!0,k.value=this.parseMethod(n,e)):5<=this.options.ecmaVersion&&"Identifier"===k.key.type&&!k.computed&&("get"===k.key.name||"set"===k.key.name)&&this.tok.type!==Ya.comma&&this.tok.type!==Ya.braceR&&this.tok.type!==Ya.eq?(k.kind=k.key.name,this.parsePropertyName(k),k.value=
this.parseMethod(!1)):(k.kind="init",6<=this.options.ecmaVersion?this.eat(Ya.eq)?(n=this.startNodeAt(b),n.operator="=",n.left=k.key,n.right=this.parseMaybeAssign(),k.value=this.finishNode(n,"AssignmentExpression")):k.value=k.key:k.value=this.dummyIdent(),k.shorthand=!0),c.properties.push(this.finishNode(k,"Property")))}this.eat(Ya.comma)}this.popCx();this.eat(Ya.braceR)||(this.last.end=this.tok.start,this.options.locations&&(this.last.loc.end=this.tok.loc.start));return this.finishNode(c,"ObjectExpression")};
Ek.parsePropertyName=function(c){if(6<=this.options.ecmaVersion){if(this.eat(Ya.bracketL)){c.computed=!0;c.key=this.parseExpression();this.expect(Ya.bracketR);return}c.computed=!1}var h=this.tok.type===Ya.num||this.tok.type===Ya.string?this.parseExprAtom():this.parseIdent();c.key=h||this.dummyIdent()};Ek.parsePropertyAccessor=function(){if(this.tok.type===Ya.name||this.tok.type.keyword)return this.parseIdent()};Ek.parseIdent=function(){var c=this.tok.type===Ya.name?this.tok.value:this.tok.type.keyword;
if(!c)return this.dummyIdent();var h=this.startNode();this.next();h.name=c;return this.finishNode(h,"Identifier")};Ek.initFunction=function(c){c.id=null;c.params=[];6<=this.options.ecmaVersion&&(c.generator=!1,c.expression=!1);8<=this.options.ecmaVersion&&(c.async=!1)};Ek.toAssignable=function(c,h){if(c&&"Identifier"!==c.type&&("MemberExpression"!==c.type||h))if("ParenthesizedExpression"===c.type)this.toAssignable(c.expression,h);else{if(6>this.options.ecmaVersion)return this.dummyIdent();if("ObjectExpression"===
c.type){c.type="ObjectPattern";for(var f=0,k=c.properties;f<k.length;f+=1)this.toAssignable(k[f],h)}else if("ArrayExpression"===c.type)c.type="ArrayPattern",this.toAssignableList(c.elements,h);else if("Property"===c.type)this.toAssignable(c.value,h);else if("SpreadElement"===c.type)c.type="RestElement",this.toAssignable(c.argument,h);else if("AssignmentExpression"===c.type)c.type="AssignmentPattern",delete c.operator;else return this.dummyIdent()}return c};Ek.toAssignableList=function(c,h){for(var f=
0;f<c.length;f+=1)this.toAssignable(c[f],h);return c};Ek.parseFunctionParams=function(c){c=this.parseExprList(Ya.parenR);return this.toAssignableList(c,!0)};Ek.parseMethod=function(c,h){var f=this.startNode(),k=this.inAsync,n=this.inFunction;this.initFunction(f);6<=this.options.ecmaVersion&&(f.generator=!!c);8<=this.options.ecmaVersion&&(f.async=!!h);this.inAsync=f.async;this.inFunction=!0;f.params=this.parseFunctionParams();f.body=this.parseBlock();this.toks.adaptDirectivePrologue(f.body.body);this.inAsync=
k;this.inFunction=n;return this.finishNode(f,"FunctionExpression")};Ek.parseArrowExpression=function(c,h,f){var k=this.inAsync,n=this.inFunction;this.initFunction(c);8<=this.options.ecmaVersion&&(c.async=!!f);this.inAsync=c.async;this.inFunction=!0;c.params=this.toAssignableList(h,!0);c.expression=this.tok.type!==Ya.braceL;c.expression?c.body=this.parseMaybeAssign():(c.body=this.parseBlock(),this.toks.adaptDirectivePrologue(c.body.body));this.inAsync=k;this.inFunction=n;return this.finishNode(c,"ArrowFunctionExpression")};
Ek.parseExprList=function(c,h){this.pushCx();var f=this.curIndent,k=this.curLineStart,n=[];for(this.next();!this.closes(c,f+1,k);)if(this.eat(Ya.comma))n.push(h?null:this.dummyIdent());else{var b=this.parseMaybeAssign();if(Uo(b)){if(this.closes(c,f,k))break;this.next()}else n.push(b);this.eat(Ya.comma)}this.popCx();this.eat(c)||(this.last.end=this.tok.start,this.options.locations&&(this.last.loc.end=this.tok.loc.start));return n};Ek.parseAwait=function(){var c=this.startNode();this.next();c.argument=
this.parseMaybeUnary();return this.finishNode(c,"AwaitExpression")};dF.tabSize=4;var AL=Object.freeze({__proto__:null,LooseParser:Dk,isDummy:Uo,parse:function(c,h){return Dk.parse(c,h)}}),xf=lively.FreezerRuntime.recorderFor("lively.ast/lib/acorn-extension.js");xf.forEachNode=function(c,h,f,k){k=k||{};var n=k.traversal||"preorder",b=xf.obj.clone(k.visitors?k.visitors:xf.walk.make(xf.custom.visitors.withMemberExpression)),e="preorder"===n?function(m,a,g,l,r){h(g,f,l,a);return m(g,l+1,r)}:function(m,
a,g,l,r){m=m(g,l+1,r);h(g,f,l,a);return m};Object.keys(b).forEach(function(m){var a=b[m];b[m]=function(g,l,r){return e(a,m,g,l,r)}});xf.walk.recursive(c,0,null,b);return c};xf.matchNodes=function(c,h,f,k){return xf.forEachNode(c,function(n,b,e,m){if(h[n.type])h[n.type](n,b,e,m)},f,k)};xf.findNodesIncluding=xp;xf.withParentInfo=function(c,h,f){function k(a){var g={id:xf.string.newUUID(),parentScope:a,containingScopes:[]};a&&a.containingScopes.push(g);return g}f=f||{};var n=xf.walk.make({Function:function(a,
g,l){g&&g.scope&&(g.scope=k(g.scope));l(a.body,g,"ScopeBody")},VariableDeclarator:function(a,g,l){a.init&&l(a.init,g,"Expression")},VariableDeclaration:function(a,g,l){for(var r=0;r<a.declarations.length;++r){var v=a.declarations[r];v&&l(v,g,"VariableDeclarator")}},ObjectExpression:function(a,g,l){for(var r=0;r<a.properties.length;++r){var v=a.properties[r];l(v.key,g,"Expression");l(v.value,g,"Expression")}},MemberExpression:function(a,g,l){l(a.object,g,"Expression");l(a.property,g,"Expression")}},
xf.walk.base),b,e=[];xf.forEachNode(c,function(a){xf.arr.withoutAll(Object.keys(a),["end","start","type","source","raw"]).forEach(function(g){if(!a.__lookupGetter__(g)){var l=a[g];a.__defineGetter__(g,function(){b=g;return l});e.push([a,g,a[g]])}})},null,{visitors:n});var m=[];Object.keys(n).forEach(function(a){var g=n[a];n[a]=function(l,r,v){return a===l.type||f.visitAllNodes?(m.push(h.call(null,l,{scope:r.scope,depth:r.depth,parent:r.parent,type:a,propertyInParent:b})),g(l,{scope:r.scope,parent:l,
depth:r.depth+1},v)):g(l,r,v)}});xf.walk.recursive(c,{scope:k(),parent:null,propertyInParent:"",depth:0},null,n);e.forEach(function(a){delete a[0][a[1]];a[0][a[1]]=a[2]});return m};xf.copy=Rm;xf.findSiblings=Xs;xf.findNodeByAstIndex=Ys;xf.findStatementOfNode=Fu;xf.addAstIndex=yp;xf.obj=Ag;xf.arr=$f;xf.string=pi;xf.Path=Ah;xf.withMozillaAstDo=PA;xf.GLOBAL="undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:void 0;xf.acorn=pv;xf.walk=Ht;xf.loose=AL;xf.custom=
{};xf.custom.forEachNode=xf.forEachNode;xf.custom.matchNodes=xf.matchNodes;xf.custom.findNodesIncluding=xf.findNodesIncluding;xf.custom.withParentInfo=xf.withParentInfo;xf.custom.copy=xf.copy;xf.custom.findSiblings=xf.findSiblings;xf.custom.findNodeByAstIndex=xf.findNodeByAstIndex;xf.custom.findStatementOfNode=xf.findStatementOfNode;xf.custom.addAstIndex=xf.addAstIndex;var Ay=Da("F",xf.custom);xf.walk=Ht;xf.walk=Ht;xf.loose=AL;xf.loose=AL;xf.acorn=pv;xf.acorn=pv;xf.custom=Ay;xf.custom=Ay;xf.findStatementOfNode=
Fu;xf.findStatementOfNode=Fu;xf.addAstIndex=yp;xf.addAstIndex=yp;xf.findNodesIncluding=xp;xf.findNodesIncluding=xp;xf.findSiblings=Xs;xf.findSiblings=Xs;xf.findNodeByAstIndex=Ys;xf.findNodeByAstIndex=Ys;xf.copy=Rm;xf.copy=Rm;xf.custom.visitors={stopAtFunctions:xf.walk.make(Object.assign({Function:function(){}},xf.walk.base)),withMemberExpression:xf.walk.make({MemberExpression:function(c,h,f){f(c.object,h,"Expression");f(c.property,h,"Expression")}},xf.walk.base)};var Bj=lively.FreezerRuntime.recorderFor("lively.ast/lib/visitors.js");
Bj.blockInliner=function(c){if(Array.isArray(c.body))for(var h=c.body.length-1;0<=h;h--){var f=c.body[h];"BlockStatement"===f.type&&f[Bj.canBeInlinedSym]&&c.body.splice.apply(c.body,[h,1].concat(f.body))}return c};Bj.block=function(c){return{type:"BlockStatement",body:c}};Bj.Visitor=Fe;var It=function(){return Bj.Visitor.apply(this,arguments)||this};$jscomp.inherits(It,Bj.Visitor);It.prototype.accept=function(c,h,f){this.doFunc(c,h,f);return Bj.Visitor.prototype.accept.call(this,c,h,f)};It.run=function(c,
h,f){var k=new this;k.doFunc=h;k.accept(c,f,[]);return f};Da("A",It);Bj.AllNodesVisitor=It;var QA=function(){return Bj.Visitor.apply(this,arguments)||this};$jscomp.inherits(QA,Bj.Visitor);QA.prototype.accept=function(c,h,f){switch(c.type){case "ArrowFunctionExpression":return c;case "FunctionExpression":return c;case "FunctionDeclaration":return h.unshift({node:c,path:f}),c;default:return Bj.Visitor.prototype.accept.call(this,c,h,f)}};QA.run=function(c){var h=[];(new this).accept(c,h,[]);return h};
Bj.FindToplevelFuncDeclVisitor=QA;Bj.canBeInlinedSym=Symbol("canBeInlined");var vs=function(){return Bj.Visitor.apply(this,arguments)||this};$jscomp.inherits(vs,Bj.Visitor);vs.prototype.accept=function(c,h,f){c=this.replacer(Bj.Visitor.prototype.accept.call(this,c,h,f));h={};return Array.isArray(c)?1===c.length?c[0]:Object.assign(Bj.block(c),(h[Bj.canBeInlinedSym]=!0,h)):c};vs.prototype.visitBlockStatement=function(c,h,f){return Bj.blockInliner(Bj.Visitor.prototype.visitBlockStatement.call(this,c,
h,f))};vs.prototype.visitProgram=function(c,h,f){return Bj.blockInliner(Bj.Visitor.prototype.visitProgram.call(this,c,h,f))};vs.run=function(c,h){var f=new this;f.replacer=h;return f.accept(c,null,[])};Bj.ReplaceManyVisitor=vs;var Jt=function(){return Bj.Visitor.apply(this,arguments)||this};$jscomp.inherits(Jt,Bj.Visitor);Jt.prototype.accept=function(c,h,f){return this.replacer(Bj.Visitor.prototype.accept.call(this,c,h,f),f)};Jt.run=function(c,h){var f=new this;f.replacer=h;return f.accept(c,null,
[])};Bj.ReplaceVisitor=Jt;Bj.AllNodesVisitor=It;Bj.AllNodesVisitor=It;Bj.FindToplevelFuncDeclVisitor=QA;Bj.FindToplevelFuncDeclVisitor=QA;Bj.ReplaceVisitor=Jt;Bj.ReplaceVisitor=Jt;Bj.ReplaceManyVisitor=vs;Bj.ReplaceManyVisitor=vs;var Jh=lively.FreezerRuntime.recorderFor("lively.ast/lib/parser.js");Jh.addSource=za;Jh.nodesAt=function(c,h){h="string"===typeof h?this.parse(h):h;return Jh.findNodesIncluding(h,c)};Jh.parseFunction=Rn;Jh.fuzzyParse=Pk;Jh.acornParseAsyncAware=function(c,h){if(h.onComment){var f=
h.onComment;h.onComment=function(b,e,m,a,g,l){return f.call(this,b,e,m-14,a-14,g,l)}}var k=Jh.acorn.parse("async () => {\n"+c+"\n}",h);if(k.loc)var n=k.loc.constructor;k={body:k.body[0].expression.body.body,sourceType:"module",type:"Program"};Jh.AllNodesVisitor.run(k,function(b,e,m){if(!b._positionFixed){b._positionFixed=!0;if(b.start||0===b.start)b.start-=14,b.end-=14;b.loc&&n&&(m=b.loc,e=m.start,m=m.end,b.loc=new n(h,{column:e.column,line:e.line-1},{column:m.column,line:m.line-1}));h.addSource&&
!b.source&&(b.source=c.slice(b.start,b.end))}});k.start=k.body[0].start;k.end=Jh.arr.last(k.body).end;h.addSource&&(k.source=c);k.body[0].loc&&n&&(k.loc=new n(h,k.body[0].loc.start,Jh.arr.last(k.body).loc.end));return k};Jh.parse=ak;Jh.arr=$f;Jh.acorn=pv;Jh.loose=AL;Jh.walk=Ht;Jh.addAstIndex=yp;Jh.findNodesIncluding=xp;Jh.custom=Ay;Jh.AllNodesVisitor=It;Jh.walk=Ht;Jh.walk=Ht;Jh.parse=ak;Jh.parse=ak;Jh.parseFunction=Rn;Jh.parseFunction=Rn;Jh.fuzzyParse=Pk;Jh.fuzzyParse=Pk;Jh.addSource=za;Jh.addSource=
za;Jh.custom.addSource=Jh.addSource;var oh=lively.FreezerRuntime.recorderFor("lively.ast/lib/mozilla-ast-visitor-interface.js");oh.string=pi;oh.Path=Ah;oh.BaseVisitor=Fe;oh.PrinterVisitor=ID;oh.ComparisonVisitor=kl;oh.stringify=Uh;oh.addAstIndex=yp;oh.parse=ak;oh.addSource=za;oh.methods={withMozillaAstDo:function(c,h,f){var k=new oh.BaseVisitor,n=k.accept;k.accept=function(b,e,m){h=f(function(){n.call(k,b,e,m)},b,e,m);return b};k.accept(c,h,[]);return h},printAst:function(c,h){h=h||{};var f=h.printSource||
!1,k=h.printPositions||!1,n=h.printIndex||!1,b=[];if("string"===typeof c){var e=c;c=oh.parse(c)}else e=h.source||c.source;f&&!c.source&&(e||(e=oh.stringify(c),c=oh.parse(e)),oh.addSource(c,e));(new oh.PrinterVisitor).accept(c,{index:0,tree:b},[]);return oh.string.printTree(b[0],function(m){var a=m.path+":"+m.node.type,g=[];n&&g.push(m.index);k&&g.push(m.node.start+"-"+m.node.end);f&&(m=m.node.source||e.slice(m.node.start,m.node.end),m=oh.string.print(m.truncate(60).replace(/\n/g,"").replace(/\s+/g,
" ")),g.push(m));g.length&&(a+="("+g.join(",")+")");return a},function(m){return m.children},"  ")},compareAst:function(c,h){if(!c||!h)throw Error("node"+(c?"1":"2")+" not defined");var f={completePath:[],comparisons:{errors:[]}};(new oh.ComparisonVisitor).accept(c,h,f,[]);return f.comparisons.errors.length?f.comparisons.errors.pluck("msg"):null},pathToNode:function(c,h,f){c.astIndex||oh.addAstIndex(c);f=new oh.BaseVisitor;var k=null;(f.accept=function(n,b,e,m){if(!k)return b=b.concat(m),n.astIndex===
h&&(k={pathString:b.map(function(a){return"string"===typeof a?"."+a:"["+a+"]"}).join(""),path:b,node:n}),this["visit"+n.type](n,b,e,m)}).call(f,c,[],{},[]);return k},rematchAstWithSource:function(c,h,f,k){f=!!f;h=oh.parse(h,f?{locations:!0}:void 0);var n=new oh.BaseVisitor;k&&(h=oh.Path(k).get(h));n.accept=function(b,e,m){m=m||[];var a=m.reduce(function(g,l){return g[l]},c);a.start=b.start;a.end=b.end;f&&(a.loc=b.loc);return this["visit"+b.type](b,e,m)};n.accept(h)}};oh.withMozillaAstDo=oh.methods.withMozillaAstDo;
oh.printAst=oh.methods.printAst;oh.compareAst=oh.methods.compareAst;oh.pathToNode=oh.methods.pathToNode;oh.rematchAstWithSource=oh.methods.rematchAstWithSource;var PA=oh.withMozillaAstDo,GG=oh.printAst,HG=oh.compareAst,IG=oh.pathToNode,JG=oh.rematchAstWithSource;oh.BaseVisitor=Fe;oh.BaseVisitor=Fe;oh.withMozillaAstDo=PA;oh.withMozillaAstDo=PA;oh.printAst=GG;oh.printAst=GG;oh.compareAst=HG;oh.compareAst=HG;oh.pathToNode=IG;oh.pathToNode=IG;oh.rematchAstWithSource=JG;oh.rematchAstWithSource=JG;var of=
lively.FreezerRuntime.recorderFor("lively.ast/lib/nodes.js");of.isIdentifier=Mr;of.id=De;of.literal=If;of.exprStmt=Xa;of.returnStmt=Bm;of.empty=gq;of.binaryExpr=Zs;of.funcExpr=$v;of.funcCall=aw;of.varDecl=bw;of.member=Nr;of.memberChain=Ij;of.assign=hq;of.block=hl;of.program=iq;of.tryStmt=Vo;of.prop=cw;of.objectLiteral=on;of.ifStmt=zx;of.forIn=Sn;of.conditional=Sm;of.logical=Gu;of.isIdentifier=Mr;of.isIdentifier=Mr;of.id=De;of.id=De;of.literal=If;of.literal=If;of.objectLiteral=on;of.objectLiteral=
on;of.prop=cw;of.prop=cw;of.exprStmt=Xa;of.exprStmt=Xa;of.returnStmt=Bm;of.returnStmt=Bm;of.empty=gq;of.empty=gq;of.binaryExpr=Zs;of.binaryExpr=Zs;of.funcExpr=$v;of.funcExpr=$v;of.funcCall=aw;of.funcCall=aw;of.varDecl=bw;of.varDecl=bw;of.member=Nr;of.member=Nr;of.memberChain=Ij;of.memberChain=Ij;of.assign=hq;of.assign=hq;of.block=hl;of.block=hl;of.program=iq;of.program=iq;of.tryStmt=Vo;of.tryStmt=Vo;of.ifStmt=zx;of.ifStmt=zx;of.forIn=Sn;of.forIn=Sn;of.conditional=Sm;of.conditional=Sm;of.logical=Gu;
of.logical=Gu;of.identifierRe=/[_$a-zA-Z\xA0-\uFFFF][_$a-zA-Z0-9\xA0-\uFFFF]*$/;var Pw=Object.freeze({__proto__:null,isIdentifier:Mr,id:De,literal:If,objectLiteral:on,prop:cw,exprStmt:Xa,returnStmt:Bm,empty:gq,binaryExpr:Zs,funcExpr:$v,funcCall:aw,varDecl:bw,member:Nr,memberChain:Ij,assign:hq,block:hl,program:iq,tryStmt:Vo,ifStmt:zx,forIn:Sn,conditional:Sm,logical:Gu}),$d=lively.FreezerRuntime.recorderFor("lively.ast/lib/query.js");$d.scopes=Or;$d.nodesAtIndex=Bz;$d.scopesAtIndex=Cz;$d.scopeAtIndex=
bC;$d.scopesAtPos=Ji;$d.nodesInScopeOf=cC;$d.declarationsOfScope=dC;$d.declarationsWithIdsOfScope=function(c){var h=$d.helpers.declIds(c.params).concat(c.catches),f=[].concat($jscomp.arrayFromIterable(c.node.id&&c.node.id.name?[c.node]:[]),$jscomp.arrayFromIterable($d.arr.filter(c.funcDecls,function(k){return k.id})),$jscomp.arrayFromIterable($d.arr.filter(c.classDecls,function(k){return k.id})));return h.map(function(k){return[k,k]}).concat(f.map(function(k){return[k,k.id]})).concat($d.helpers.varDecls(c)).concat(c.importSpecifiers.map(function(k){return[$d.statementOf(c.node,
k),k]}))};$d._declaredVarNames=$s;$d._findJsLintGlobalDeclarations=eC;$d.topLevelFuncDecls=Xq;$d.resolveReference=Pr;$d.resolveReferences=Qr;$d.refWithDeclAt=zp;$d.topLevelDeclsAndRefs=Cm;$d.findGlobalVarRefs=fC;$d.findNodesIncludingLines=Tn;$d.__varDeclIdsFor=function(c,h){for(var f=[],k=$jscomp.makeIterator(c.params),n=k.next();!n.done;n=k.next())n=n.value,n.name===h&&f.push(n);k=$jscomp.makeIterator(c.funcDecls);for(n=k.next();!n.done;n=k.next())n=n.value,n.id&&n.id.name===h&&f.push(n.id);k=$jscomp.makeIterator(c.classDecls);
for(n=k.next();!n.done;n=k.next())n=n.value,n.id&&n.id.name===h&&f.push(n.id);k=$jscomp.makeIterator(c.importSpecifiers);for(n=k.next();!n.done;n=k.next())n=n.value,n.name===h&&f.push(n);c=$jscomp.makeIterator($d.helpers.varDeclIds(c));for(n=c.next();!n.done;n=c.next())n=n.value,n.name===h&&f.push(n);return f};$d.findReferencesAndDeclsInScope=yk;$d.findDeclarationClosestToIndex=Ax;$d.nodesAt=at;$d.statementOf=dw;$d.imports=Hu;$d.exports=Wo;$d.arr=$f;$d.chain=ym;$d.num=Nm;$d.tree=wu;$d.fun=Pn;$d.obj=
Ag;$d.BaseVisitor=Fe;$d.ScopeVisitor=lk;$d.FindToplevelFuncDeclVisitor=QA;$d.withMozillaAstDo=PA;$d.parse=ak;$d.acorn=pv;$d.walk=Ht;$d.custom=Ay;$d.stringify=Uh;$d.helpers={declIds:function(c,h){h=void 0===h?[]:h;for(var f=0;f<c.length;f++){var k=c[f];if(k)if("Identifier"===k.type)h.push(k);else if("RestElement"===k.type)h.push(k.argument);else if("AssignmentPattern"===k.type)$d.helpers.declIds([k.left],h);else if("ObjectPattern"===k.type)for(var n=0;n<k.properties.length;n++){var b=k.properties[n];
$d.helpers.declIds([b.value||b],h)}else"ArrayPattern"===k.type&&$d.helpers.declIds(k.elements,h)}return h},varDecls:function(c,h){h=void 0===h?[]:h;c=$jscomp.makeIterator(c.varDecls);for(var f=c.next();!f.done;f=c.next()){f=$jscomp.makeIterator(f.value.declarations);for(var k=f.next();!k.done;k=f.next()){k=k.value;for(var n=$jscomp.makeIterator($d.helpers.declIds([k.id])),b=n.next();!b.done;b=n.next())h.push([k,b.value])}}return h},varDeclIds:function(c,h){h=void 0===h?[]:h;c=$jscomp.makeIterator(c.varDecls);
for(var f=c.next();!f.done;f=c.next()){f=$jscomp.makeIterator(f.value.declarations);for(var k=f.next();!k.done;k=f.next())$d.helpers.declIds([k.value.id],h)}return h},objPropertiesAsList:function(c,h,f,k){k=void 0===k?[]:k;c=$jscomp.makeIterator(c.properties);for(var n=c.next();!n.done;n=c.next()){n=n.value;var b=n.key.name,e={key:h.concat([b]),value:n.value};switch(n.value.type){case "ArrayExpression":case "ArrayPattern":f||k.push(e);for(e=0;e<n.value.elements.length;e++)$d.helpers.objPropertiesAsList(n.value.elements[e],
h.concat([b,e]),f,k);break;case "ObjectExpression":case "ObjectPattern":f||k.push(e);$d.helpers.objPropertiesAsList(n.value,h.concat([b]),f,k);break;case "AssignmentPattern":f||k.push(e);$d.helpers.objPropertiesAsList(n.left,h.concat([b]),f,k);break;default:k.push(e)}}return k},isDeclaration:function(c){return"FunctionDeclaration"===c.type||"VariableDeclaration"===c.type||"ClassDeclaration"===c.type}};$d.knownGlobals="closed true false null undefined arguments Object Function Array Number parseFloat parseInt Infinity NaN Boolean String Symbol Date Promise RegExp Error EvalError RangeError ReferenceError SyntaxError TypeError URIError JSON Math console ArrayBuffer Uint8Array Int8Array Uint16Array Int16Array Uint32Array Int32Array Float32Array Float64Array Uint8ClampedArray DataView Map Set WeakMap WeakSet Proxy Reflect decodeURI decodeURIComponent encodeURI encodeURIComponent escape unescape eval isFinite isNaN Intl navigator window document Blob setTimeout clearTimeout setInterval clearInterval requestAnimationFrame cancelAnimationFrame btoa atob sessionStorage localStorage $world lively System customElements performance addEventListener closed".split(" ");
$d.globalDeclRe=/^\s*global\s*/;$d._stmtTypes="EmptyStatement BlockStatement ExpressionStatement IfStatement BreakStatement ContinueStatement WithStatement ReturnStatement ThrowStatement TryStatement WhileStatement DoWhileStatement ForStatement ForInStatement ForOfStatement DebuggerStatement FunctionDeclaration VariableDeclaration ClassDeclaration ImportDeclaration ImportDeclaration ExportNamedDeclaration ExportDefaultDeclaration ExportAllDeclaration".split(" ");var BL=$d.helpers,qT=$d.knownGlobals;
$d.helpers=BL;$d.helpers=BL;$d.knownGlobals=qT;$d.knownGlobals=qT;$d.scopes=Or;$d.scopes=Or;$d.nodesAtIndex=Bz;$d.nodesAtIndex=Bz;$d.scopesAtIndex=Cz;$d.scopesAtIndex=Cz;$d.scopeAtIndex=bC;$d.scopeAtIndex=bC;$d.scopesAtPos=Ji;$d.scopesAtPos=Ji;$d.nodesInScopeOf=cC;$d.nodesInScopeOf=cC;$d.declarationsOfScope=dC;$d.declarationsOfScope=dC;$d._declaredVarNames=$s;$d._declaredVarNames=$s;$d._findJsLintGlobalDeclarations=eC;$d._findJsLintGlobalDeclarations=eC;$d.topLevelDeclsAndRefs=Cm;$d.topLevelDeclsAndRefs=
Cm;$d.topLevelFuncDecls=Xq;$d.topLevelFuncDecls=Xq;$d.findGlobalVarRefs=fC;$d.findGlobalVarRefs=fC;$d.findNodesIncludingLines=Tn;$d.findNodesIncludingLines=Tn;$d.findReferencesAndDeclsInScope=yk;$d.findReferencesAndDeclsInScope=yk;$d.findDeclarationClosestToIndex=Ax;$d.findDeclarationClosestToIndex=Ax;$d.nodesAt=at;$d.nodesAt=at;$d.statementOf=dw;$d.statementOf=dw;$d.resolveReferences=Qr;$d.resolveReferences=Qr;$d.refWithDeclAt=zp;$d.refWithDeclAt=zp;$d.imports=Hu;$d.imports=Hu;$d.exports=Wo;$d.exports=
Wo;var Kt=Object.freeze({__proto__:null,helpers:BL,knownGlobals:qT,scopes:Or,nodesAtIndex:Bz,scopesAtIndex:Cz,scopeAtIndex:bC,scopesAtPos:Ji,nodesInScopeOf:cC,declarationsOfScope:dC,_declaredVarNames:$s,_findJsLintGlobalDeclarations:eC,topLevelDeclsAndRefs:Cm,topLevelFuncDecls:Xq,findGlobalVarRefs:fC,findNodesIncludingLines:Tn,findReferencesAndDeclsInScope:yk,findDeclarationClosestToIndex:Ax,nodesAt:at,statementOf:dw,resolveReferences:Qr,refWithDeclAt:zp,imports:Hu,exports:Wo});Da("bB",Kt);var Yq=
lively.FreezerRuntime.recorderFor("lively.ast/lib/object-spread-transform.js");Yq.objectSpreadTransform=Ap;Yq.Visitor=Fe;Yq.funcCall=aw;Yq.member=Nr;var CL=function(){return Yq.Visitor.apply(this,arguments)||this};$jscomp.inherits(CL,Yq.Visitor);CL.prototype.accept=function(c,h,f){"ObjectExpression"===c.type&&(c=this.transformSpreadElement(c));return Yq.Visitor.prototype.accept.call(this,c,h,f)};CL.prototype.transformSpreadElement=function(c){var h=[],f=[h];c.properties.forEach(function(k){"SpreadElement"!==
k.type?h.push(k):(f.push(k),h=[],f.push(h))});if(1===f.length)return c;h.length||f.pop();return Yq.funcCall.apply(Yq,[Yq.member("Object","assign")].concat($jscomp.arrayFromIterable(f.map(function(k){return"SpreadElement"===k.type?k.argument:{properties:k,type:"ObjectExpression"}}))))};Yq.ObjectSpreadTransformer=CL;Yq.default=Ap;var we=lively.FreezerRuntime.recorderFor("lively.ast/lib/transform.js");we._node2string=function(c){return c.source||we.stringify(c)};we._findIndentAt=function(c,h){var f=
we.string.peekLeft(c,h,/\s+$/);c="number"===typeof f?c.slice(f,h):"";"\n"===c[0]&&(c=c.slice(1));return c};we._applyChanges=function(c,h){for(var f=0;f<c.length;f++){var k=c[f];if("del"===k.type)h=h.slice(0,k.pos)+h.slice(k.pos+k.length);else if("add"===k.type)h=h.slice(0,k.pos)+k.string+h.slice(k.pos);else throw Error("Unexpected change "+we.obj.inspect(k));}return h};we._compareNodesForReplacement=ew;we.replaceNode=Dz;we.replaceNodes=Tm;we.replace=Rr;we.__findVarDecls=OI;we.oneDeclaratorPerVarDecl=
gC;we.oneDeclaratorForVarsInDestructoring=hC;we.returnLastStatement=jq;we.wrapInFunction=Bx;we.wrapInStartEndCall=fw;we.transformSingleExpression=Cx;we.arr=$f;we.obj=Ag;we.string=pi;we.chain=ym;we.Path=Ah;we.helpers=BL;we.scopes=Or;we.topLevelDeclsAndRefs=Cm;we.topLevelFuncDecls=Xq;we.parse=ak;we.fuzzyParse=Pk;we.objectSpreadTransform=Ap;we.varDecl=bw;we.memberChain=Ij;we.id=De;we.exprStmt=Xa;we.funcCall=aw;we.returnStmt=Bm;we.tryStmt=Vo;we.program=iq;we.block=hl;we.funcExpr=$v;we.stringify=Uh;we.isProbablySingleExpressionRe=
/^\s*(\{|function\s*\()/;we.replaceNode=Dz;we.replaceNode=Dz;we.replaceNodes=Tm;we.replaceNodes=Tm;we.replace=Rr;we.replace=Rr;we._compareNodesForReplacement=ew;we._compareNodesForReplacement=ew;we.oneDeclaratorPerVarDecl=gC;we.oneDeclaratorPerVarDecl=gC;we.oneDeclaratorForVarsInDestructoring=hC;we.oneDeclaratorForVarsInDestructoring=hC;we.returnLastStatement=jq;we.returnLastStatement=jq;we.wrapInFunction=Bx;we.wrapInFunction=Bx;we.wrapInStartEndCall=fw;we.wrapInStartEndCall=fw;we.transformSingleExpression=
Cx;we.transformSingleExpression=Cx;we.objectSpreadTransform=Ap;we.objectSpreadTransform=Ap;var RA=Object.freeze({__proto__:null,replaceNode:Dz,replaceNodes:Tm,replace:Rr,_compareNodesForReplacement:ew,oneDeclaratorPerVarDecl:gC,oneDeclaratorForVarsInDestructoring:hC,returnLastStatement:jq,wrapInFunction:Bx,wrapInStartEndCall:fw,transformSingleExpression:Cx,objectSpreadTransform:Ap});Da("bx",RA);var ng=lively.FreezerRuntime.recorderFor("lively.ast/lib/comments.js");ng.getCommentPrecedingNode=iC;ng.extractComments=
Ez;ng.obj=Ag;ng.string=pi;ng.Path=Ah;ng.chain=ym;ng.arr=$f;ng.fun=Pn;ng.parse=ak;ng.statementOf=dw;ng.Visitor=Fe;ng.stringify=Uh;ng.getCommentPrecedingNode=iC;ng.getCommentPrecedingNode=iC;ng.extractComments=Ez;ng.extractComments=Ez;var DL=Object.freeze({__proto__:null,getCommentPrecedingNode:iC,extractComments:Ez}),ci=lively.FreezerRuntime.recorderFor("lively.ast/lib/code-categorizer.js");ci.findDecls=bt;ci.es6ClassDef=function(c){if("ClassDeclaration"!==c.type)return null;var h={type:"class-decl",
name:c.id.name,node:c,children:[]};h.children.push.apply(h.children,$jscomp.arrayFromIterable(ci.arr.compact(c.body.body.map(function(f,k){return ci.es6ClassMethod(f,h,k)}))));return[h].concat($jscomp.arrayFromIterable(h.children))};ci.es6ClassMethod=function(c,h,f){if("MethodDefinition"!==c.type)return null;var k;"constructor"===c.kind?k="class-constructor":"method"===c.kind?k=c.static?"class-class-method":"class-instance-method":"get"===c.kind?k=c.static?"class-class-getter":"class-instance-getter":
"set"===c.kind&&(k=c.static?"class-class-setter":"class-instance-setter");return k?{type:k,parent:h,node:c,name:c.key.name}:null};ci.varDefs=function(c){if("VariableDeclaration"!==c.type)return null;var h=[],f={};c=$jscomp.makeIterator(ci.withVarDeclIds(c));for(var k=c.next();!k.done;f={$jscomp$loop$prop$def$2205:f.$jscomp$loop$prop$def$2205},k=c.next())if(k=k.value,f.$jscomp$loop$prop$def$2205={name:k.id.name,node:k.node,type:"var-decl"},h.push(f.$jscomp$loop$prop$def$2205),f.$jscomp$loop$prop$def$2205.node.init){for(k=
f.$jscomp$loop$prop$def$2205.node.init;"AssignmentExpression"===k.type;)k=k.right;if("ObjectExpression"===k.type)f.$jscomp$loop$prop$def$2205.type="object-decl",f.$jscomp$loop$prop$def$2205.children=ci.objectKeyValsAsDefs(k).map(function(n){return function(b){return Object.assign({},b,{type:"object-"+b.type,parent:n.$jscomp$loop$prop$def$2205})}}(f)),h.push.apply(h,$jscomp.arrayFromIterable(f.$jscomp$loop$prop$def$2205.children));else if(k=ci.someObjectExpressionCall(k,f.$jscomp$loop$prop$def$2205))f.$jscomp$loop$prop$def$2205.children=
k.map(function(n){return function(b){return Object.assign({},b,{parent:n.$jscomp$loop$prop$def$2205})}}(f)),h.push.apply(h,$jscomp.arrayFromIterable(f.$jscomp$loop$prop$def$2205.children))}return h};ci.funcDef=function(c){return"FunctionStatement"!==c.type&&"FunctionDeclaration"!==c.type||!c.id?null:[{name:c.id.name,node:c,type:"function-decl"}]};ci.someObjectExpressionCall=function(c,h){"ExpressionStatement"===c.type&&(c=c.expression);return"CallExpression"!==c.type?null:(c=c.arguments.find(function(f){return"ObjectExpression"===
f.type}))?ci.objectKeyValsAsDefs(c,h):null};ci.functionWrapper=function(c,h){if(!ci.isFunctionWrapper(c))return null;var f=ci.Path("expression.arguments.0").get(c);h=f&&"FunctionExpression"===f.type&&5<ci.string.lines(f.source||"").length?ci.findDecls(f,h):ci.findDecls(ci.Path("expression.callee").get(c),h);var k={node:c,name:ci.Path("expression.callee.id.name").get(c)};h.forEach(function(n){return n.parent||(n.parent=k)});return h};ci.unwrapExport=function(c){return"ExportNamedDeclaration"!==c.type&&
"ExportDefaultDeclaration"!==c.type||!c.declaration?c:c.declaration};ci.objectKeyValsAsDefs=function(c,h){return c.properties.map(function(f){return{name:f.key.name||f.key.value,type:"FunctionExpression"===f.value.type?"method":"property",node:f,parent:h}})};ci.isFunctionWrapper=function(c){return"CallExpression"===ci.Path("expression.type").get(c)&&"FunctionExpression"===ci.Path("expression.callee.type").get(c)};ci.declIds=Iu;ci.withVarDeclIds=function(c){return c.declarations.map(function(h){!h.source&&
h.init&&(h.source=h.id.name+" = "+h.init.source);return{node:h,id:h.id}})};ci.parse=ak;ci.arr=$f;ci.Path=Ah;ci.string=pi;ci.obj=Ag;ci.findDecls=bt;ci.findDecls=bt;var KG=Object.freeze({__proto__:null,findDecls:bt}),Dg=lively.FreezerRuntime.recorderFor("lively.ast/index.js");Dg.isValidIdentifier=Sr;Dg.BaseVisitor=Fe;Dg.BaseVisitor=Fe;Dg.withMozillaAstDo=PA;Dg.withMozillaAstDo=PA;Dg.printAst=GG;Dg.printAst=GG;Dg.compareAst=HG;Dg.compareAst=HG;Dg.pathToNode=IG;Dg.pathToNode=IG;Dg.rematchAstWithSource=
JG;Dg.rematchAstWithSource=JG;Dg.ReplaceManyVisitor=vs;Dg.ReplaceManyVisitor=vs;Dg.ReplaceVisitor=Jt;Dg.ReplaceVisitor=Jt;Dg.AllNodesVisitor=It;Dg.AllNodesVisitor=It;Dg.parse=ak;Dg.parse=ak;Dg.parseFunction=Rn;Dg.parseFunction=Rn;Dg.fuzzyParse=Pk;Dg.fuzzyParse=Pk;Dg.acorn=pv;Dg.walk=Ht;Dg.custom=Ay;Dg.stringify=Uh;Dg.escodegen=KD;Dg.escodegen=KD;Dg.escodegen=KD;Dg.acorn=pv;Dg.acorn=pv;Dg.walk=Ht;Dg.walk=Ht;Dg.nodes=Pw;Dg.query=Kt;Dg.transform=RA;Dg.comments=DL;Dg.categorizer=KG;Dg.query=Kt;Dg.query=
Kt;Dg.transform=RA;Dg.transform=RA;Dg.comments=DL;Dg.comments=DL;Dg.categorizer=KG;Dg.categorizer=KG;Dg.stringify=Uh;Dg.stringify=Uh;Dg.nodes=Pw;Dg.nodes=Pw;Dg.custom=Ay;Dg.custom=Ay;Dg.isValidIdentifierRe=/^(?!(?:do|if|in|for|let|new|try|var|case|default|else|enum|eval|false|null|this|true|void|with|break|catch|class|const|super|throw|while|yield|delete|export|import|public|return|static|switch|typeof|extends|finally|package|private|continue|debugger|function|arguments|interface|protected|implements|instanceof)$)[$A-Z_a-z\xaa\xb5\xba\xc0-\xd6\xd8-\xf6\xf8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05d0-\u05ea\u05f0-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u08a0\u08a2-\u08ac\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0977\u0979-\u097f\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c33\u0c35-\u0c39\u0c3d\u0c58\u0c59\u0c60\u0c61\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d60\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f0\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1877\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191c\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19c1-\u19c7\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1ce9-\u1cec\u1cee-\u1cf1\u1cf5\u1cf6\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2e2f\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303c\u3041-\u3096\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua697\ua6a0-\ua6ef\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790-\ua793\ua7a0-\ua7aa\ua7f8-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa80-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uabc0-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc][$A-Z_a-z\xaa\xb5\xba\xc0-\xd6\xd8-\xf6\xf8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05d0-\u05ea\u05f0-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u08a0\u08a2-\u08ac\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0977\u0979-\u097f\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c33\u0c35-\u0c39\u0c3d\u0c58\u0c59\u0c60\u0c61\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d60\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f0\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1877\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191c\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19c1-\u19c7\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1ce9-\u1cec\u1cee-\u1cf1\u1cf5\u1cf6\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2e2f\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303c\u3041-\u3096\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua697\ua6a0-\ua6ef\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790-\ua793\ua7a0-\ua7aa\ua7f8-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa80-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uabc0-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc0-9\u0300-\u036f\u0483-\u0487\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u0669\u0670\u06d6-\u06dc\u06df-\u06e4\u06e7\u06e8\u06ea-\u06ed\u06f0-\u06f9\u0711\u0730-\u074a\u07a6-\u07b0\u07c0-\u07c9\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0859-\u085b\u08e4-\u08fe\u0900-\u0903\u093a-\u093c\u093e-\u094f\u0951-\u0957\u0962\u0963\u0966-\u096f\u0981-\u0983\u09bc\u09be-\u09c4\u09c7\u09c8\u09cb-\u09cd\u09d7\u09e2\u09e3\u09e6-\u09ef\u0a01-\u0a03\u0a3c\u0a3e-\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a66-\u0a71\u0a75\u0a81-\u0a83\u0abc\u0abe-\u0ac5\u0ac7-\u0ac9\u0acb-\u0acd\u0ae2\u0ae3\u0ae6-\u0aef\u0b01-\u0b03\u0b3c\u0b3e-\u0b44\u0b47\u0b48\u0b4b-\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b66-\u0b6f\u0b82\u0bbe-\u0bc2\u0bc6-\u0bc8\u0bca-\u0bcd\u0bd7\u0be6-\u0bef\u0c01-\u0c03\u0c3e-\u0c44\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0c66-\u0c6f\u0c82\u0c83\u0cbc\u0cbe-\u0cc4\u0cc6-\u0cc8\u0cca-\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0ce6-\u0cef\u0d02\u0d03\u0d3e-\u0d44\u0d46-\u0d48\u0d4a-\u0d4d\u0d57\u0d62\u0d63\u0d66-\u0d6f\u0d82\u0d83\u0dca\u0dcf-\u0dd4\u0dd6\u0dd8-\u0ddf\u0df2\u0df3\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0e50-\u0e59\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0ed0-\u0ed9\u0f18\u0f19\u0f20-\u0f29\u0f35\u0f37\u0f39\u0f3e\u0f3f\u0f71-\u0f84\u0f86\u0f87\u0f8d-\u0f97\u0f99-\u0fbc\u0fc6\u102b-\u103e\u1040-\u1049\u1056-\u1059\u105e-\u1060\u1062-\u1064\u1067-\u106d\u1071-\u1074\u1082-\u108d\u108f-\u109d\u135d-\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b4-\u17d3\u17dd\u17e0-\u17e9\u180b-\u180d\u1810-\u1819\u18a9\u1920-\u192b\u1930-\u193b\u1946-\u194f\u19b0-\u19c0\u19c8\u19c9\u19d0-\u19d9\u1a17-\u1a1b\u1a55-\u1a5e\u1a60-\u1a7c\u1a7f-\u1a89\u1a90-\u1a99\u1b00-\u1b04\u1b34-\u1b44\u1b50-\u1b59\u1b6b-\u1b73\u1b80-\u1b82\u1ba1-\u1bad\u1bb0-\u1bb9\u1be6-\u1bf3\u1c24-\u1c37\u1c40-\u1c49\u1c50-\u1c59\u1cd0-\u1cd2\u1cd4-\u1ce8\u1ced\u1cf2-\u1cf4\u1dc0-\u1de6\u1dfc-\u1dff\u200c\u200d\u203f\u2040\u2054\u20d0-\u20dc\u20e1\u20e5-\u20f0\u2cef-\u2cf1\u2d7f\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua620-\ua629\ua66f\ua674-\ua67d\ua69f\ua6f0\ua6f1\ua802\ua806\ua80b\ua823-\ua827\ua880\ua881\ua8b4-\ua8c4\ua8d0-\ua8d9\ua8e0-\ua8f1\ua900-\ua909\ua926-\ua92d\ua947-\ua953\ua980-\ua983\ua9b3-\ua9c0\ua9d0-\ua9d9\uaa29-\uaa36\uaa43\uaa4c\uaa4d\uaa50-\uaa59\uaa7b\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uaaeb-\uaaef\uaaf5\uaaf6\uabe3-\uabea\uabec\uabed\uabf0-\uabf9\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\ufe33\ufe34\ufe4d-\ufe4f\uff10-\uff19\uff3f]*$/;
Dg.isValidIdentifier=Sr;Dg.isValidIdentifier=Sr;Dg.parse=ak;Dg.Node=Dg.parse("").constructor;Object.defineProperty(Dg.Node.prototype,"__serialize__",{configurable:!0,value:function(){return{__expr__:"("+JSON.stringify(this)+")"}}});var d5=Object.freeze({__proto__:null,BaseVisitor:Fe,withMozillaAstDo:PA,printAst:GG,compareAst:HG,pathToNode:IG,rematchAstWithSource:JG,ReplaceManyVisitor:vs,ReplaceVisitor:Jt,AllNodesVisitor:It,parse:ak,parseFunction:Rn,fuzzyParse:Pk,escodegen:KD,acorn:pv,walk:Ht,query:Kt,
transform:RA,comments:DL,categorizer:KG,stringify:Uh,nodes:Pw,custom:Ay,isValidIdentifier:Sr});Da("bv",d5);var di=lively.FreezerRuntime.recorderFor("lively.vm/lib/util.js");di.getGlobal=xo;di.signatureOf=jC;di.isClass=Bp;di.pluck=ct;di.printSymbol=dt;di.safeToString=Zq;di.printEvalResult=kq;di.obj=Ag;di.string=pi;di.getGlobal=xo;di.getGlobal=xo;di.signatureOf=jC;di.signatureOf=jC;di.isClass=Bp;di.isClass=Bp;di.pluck=ct;di.pluck=ct;di.knownSymbols=function(){return Object.getOwnPropertyNames(Symbol).filter(function(c){return"symbol"===
typeof Symbol[c]}).reduce(function(c,h){return c.set(Symbol[h],"Symbol."+h)},new Map)}();di.symMatcher=/^Symbol\((.*)\)$/;di.printSymbol=dt;di.printSymbol=dt;di.safeToString=Zq;di.safeToString=Zq;di.printEvalResult=kq;di.printEvalResult=kq;var rT=function(){function c(n,b){"object"===typeof b&&(b=b.maxDepth||2);if(!n)return String(n);if("string"===typeof n)return b=n.includes("\n")?"`":'"',n=n.split("\n").slice(0,1E3).join("\n"),b+n+b;if(n instanceof Error)return n.stack||di.safeToString(n);if(!di.obj.isObject(n))return di.safeToString(n);
try{var e=di.obj.inspect(n,{customPrinter:f,maxNumberOfKeys:100,maxDepth:b,printFunctionSource:!0})}catch(m){}return"{}"===e?di.safeToString(n):e}function h(n,b){if("string"===typeof n||Array.isArray(n)||!k||"function"!==typeof n[k])return b;var e="function"===typeof n.entries,m=e?n.entries():n[k](),a=[];b=e?"{":"[";var g=e?"}":"]";n=n.constructor&&n.constructor.name||"Iterable";for(var l=0,r;10>l;l++){r=m.next();if(r.done)break;a.push(r.value)}m=a.map(function(v){return e?String(v[0])+": "+String(v[1]):
c(v,2)}).join(", ");return n+"("+b+m+g+")"}function f(n,b,e){if(!n)return b;if("symbol"===typeof n)return di.printSymbol(n);if("string"===typeof n)return di.string.print(di.string.truncate(n,100));if(n.isMorph)return di.safeToString(n);if(n instanceof Promise)return"Promise()";if("undefined"!==typeof Node&&n instanceof Node||"undefined"!==typeof ImageData&&n instanceof ImageData)return di.safeToString(n);var m=n.length||n.byteLength;if(void 0!==m&&10<m&&n.slice)return"["+("string"===typeof n||n.byteLength?
di.safeToString(n.slice(0,10)):n.slice(0,10).map(e))+",...]";n=h(n,b);return n!==b?n:b}var k="undefined"!==typeof Symbol&&Symbol.iterator;return c}();di.printInspectEvalValue=rT;di.printInspectEvalValue=rT;di.printInspectEvalValue=rT;var Ri=lively.FreezerRuntime.recorderFor("lively.vm/lib/completions.js");Ri.getObjectForCompletion=gw;Ri.propertyExtract=function(c,h,f){return Object.getOwnPropertyNames(h).concat(Object.getOwnPropertySymbols(h).map(Ri.printSymbol)).filter(function(k){return-1===c.indexOf(k)}).map(f).filter(function(k){return!!k}).sort(function(k,
n){return k.name<n.name?-1:k.name>n.name?1:0})};Ri.getMethodsOf=function(c,h){return Ri.propertyExtract(c,h,function(f){return h.__lookupGetter__&&h.__lookupGetter__(f)||"function"!==typeof h[f]?null:{name:f,completion:Ri.signatureOf(f,h[f])}})};Ri.getAttributesOf=function(c,h){return Ri.propertyExtract(c,h,function(f){return h.__lookupGetter__&&!h.__lookupGetter__(f)&&"function"===typeof h[f]?null:{name:f,completion:f}})};Ri.getProtoChain=function(c){for(var h=[];c;)h.push(c),c=c.__proto__;return h};
Ri.getDescriptorOf=function(c,h){function f(k,n){k.length>n&&(k=k.slice(0,n)+"...");return k.replace(/\n/g,"").replace(/\s+/g," ")}if(c===h){if("function"!==typeof c)return f(Ri.safeToString(c),50);h=c.toString();h=f(h.slice(h.indexOf("{")+1,h.lastIndexOf("}")),50);return Ri.signatureOf(c.displayName||c.name||"function",c)+" {"+h+"}"}return(c=h.hasOwnProperty("constructor")&&h.constructor)?"string"===typeof c.type&&c.type.length?f(c.type,50):"string"===typeof c.name&&c.name.length?f(c.name,50):"anonymous class":
"prototype"};Ri.getCompletionsOfObj=function(c,h){try{var f=[];var k=Ri.getProtoChain(c).map(function(b){var e=Ri.getDescriptorOf(c,b);b=Ri.getMethodsOf(f,b).concat(Ri.getAttributesOf(f,b));f=f.concat(Ri.pluck(b,"name"));return[e,Ri.pluck(b,"completion")]})}catch(b){var n=b}h(n,k)};Ri.descriptorsOfObjAndProtoProperties=function(c){var h=[];return Ri.getProtoChain(c).map(function(f){var k=Ri.getDescriptorOf(c,f);f=Ri.getMethodsOf(h,f).concat(Ri.getAttributesOf(h,f));h=h.concat(Ri.pluck(f,"name"));
return[k,Ri.pluck(f,"completion")]})};Ri.getCompletions=et;Ri.lang=S4;Ri.signatureOf=jC;Ri.pluck=ct;Ri.safeToString=Zq;Ri.printSymbol=dt;Ri.getObjectForCompletion=gw;Ri.getObjectForCompletion=gw;Ri.getCompletions=et;Ri.getCompletions=et;var LG=Object.freeze({__proto__:null,getObjectForCompletion:gw,getCompletions:et});Da("aR",LG);var vc=lively.FreezerRuntime.recorderFor("lively.source-transform/capturing.js");vc.rewriteToCaptureTopLevelVariables=Ju;vc.transformImportMeta=function(c,h){return vc.ReplaceVisitor.run(c,
function(f){return"MetaProperty"==f.type&&"import"==f.meta.name?vc.parse("({url: _context.id})").body[0].expression:f})};vc.rewriteToRegisterModuleToCaptureSetters=Um;vc.clearEmptyExports=function(c,h){h=vc.topLevelDeclsAndRefs(c);h=$jscomp.makeIterator(h.scope.exportDecls);for(var f=h.next();!f.done;f=h.next())f=f.value,f.declaration||!f.specifiers||f.specifiers.length||vc.arr.remove(c.body,f);return c};vc.replaceRefs=function(c,h){var f=vc.topLevelDeclsAndRefs(c),k=f.refs.filter(function(b){return vc.shouldRefBeCaptured(b,
f,h)}),n=[];c=vc.ReplaceVisitor.run(c,function(b,e){if("Property"===b.type&&k.includes(b.key)&&b.shorthand)return vc.prop(vc.id(b.key.name),b.value);if("ExportNamedDeclaration"===b.type){e=b.declaration;var m=b.specifiers;e&&(e.id?n.push(e.id):e.declarations&&n.push.apply(n,$jscomp.arrayFromIterable(e.declarations.map(function(a){return a.id}))));m&&m.forEach(function(a){return n.push(a.local)});return b}return"AssignmentExpression"===b.type&&k.includes(b.left)&&h.declarationWrapper?Object.assign({},
b,{right:vc.declarationWrapperCall(h.declarationWrapper,null,vc.literal(b.left.name),vc.literal("assignment"),b.right,h.captureObj,h)}):b});return vc.ReplaceVisitor.run(c,function(b,e,m){return k.includes(b)&&!n.includes(b)?vc.member(h.captureObj,b):b})};vc.replaceVarDecls=function(c,h){var f=vc.topLevelDeclsAndRefs(c);return vc.ReplaceManyVisitor.run(c,function(k){if(!f.varDecls.includes(k)||k.declarations.every(function(l){return!vc.shouldDeclBeCaptured(l,h)}))return k;for(var n=[],b=0;b<k.declarations.length;b++){var e=
k.declarations[b];if(vc.shouldDeclBeCaptured(e,h)){var m=e.init||{operator:"||",type:"LogicalExpression",left:{computed:!1,object:h.captureObj,property:e.id,type:"MemberExpression"},right:{name:"undefined",type:"Identifier"}};m=h.declarationWrapper&&e.id.name?vc.declarationWrapperCall(h.declarationWrapper,e,vc.literal(e.id.name),vc.literal(k.kind),m,h.captureObj,h):m;if(e.id.type.includes("Pattern")){var a=vc.generateUniqueName(f.declaredNames,"destructured_1"),g={type:"Identifier",name:a};e=vc.transformPattern(e.id,
{parent:g,declaredNames:f.declaredNames}).map(function(l){return l[vc.annotationSym]&&l[vc.annotationSym].capture?vc.assignExpr(h.captureObj,l.declarations[0].id,h.declarationWrapper?vc.declarationWrapperCall(h.declarationWrapper,null,vc.literal(l.declarations[0].id.name),vc.literal(k.kind),l.declarations[0].init,h.captureObj,h):l.declarations[0].init,!1):l});f.declaredNames.push(a);n.push.apply(n,$jscomp.arrayFromIterable([vc.varDecl(g,m,k.kind)].concat(e)))}else n.push(vc.assignExpr(h.captureObj,
e.id,m,!1)),h.keepTopLevelVarDecls&&n.push(vc.varDecl(e.id,vc.member(h.captureObj,e.id)))}else n.push({type:"VariableDeclaration",kind:k.kind||"var",declarations:[e]})}return n})};vc.generateUniqueName=function(c,h){for(var f=1;-1<c.indexOf(h);){if(1E3<f)throw Error("Endless loop searching for unique variable "+h);h=h.replace(/_[0-9]+$|$/,"_"+ ++f)}return h};vc.additionalIgnoredDecls=function(c,h){h=vc.topLevelDeclsAndRefs(c);for(var f=[],k=0;k<h.scope.varDecls.length;k++){var n=h.scope.varDecls[k],
b=vc.Path(h.scope.varDeclPaths[k]).slice(0,-1).get(c);"ForStatement"!==b.type&&"ForInStatement"!==b.type&&"ForOfStatement"!==b.type&&"ExportNamedDeclaration"!==b.type||f.push.apply(f,$jscomp.arrayFromIterable(n.declarations))}return h.scope.catches.map(function(e){return e.name}).concat(f.map(function(e){return e.id.name}))};vc.additionalIgnoredRefs=function(c,h){h=vc.topLevelDeclsAndRefs(c);for(var f=[],k=0;k<h.scope.varDecls.length;k++){var n=h.scope.varDecls[k],b=vc.Path(h.scope.varDeclPaths[k]).slice(0,
-1).get(c);"ForStatement"!==b.type&&"ForInStatement"!==b.type&&"ForOfStatement"!==b.type||f.push.apply(f,$jscomp.arrayFromIterable(n.declarations))}return h.scope.catches.map(function(e){return e.name}).concat(vc.queryHelpers.declIds(f.map(function(e){return e.id})).map(function(e){return e.name}))};vc.shouldDeclBeCaptured=function(c,h){return-1===h.excludeDecls.indexOf(c.id.name)&&(!h.includeDecls||-1<h.includeDecls.indexOf(c.id.name))};vc.shouldRefBeCaptured=function(c,h,f){if(h.scope.importSpecifiers.includes(c))return!1;
for(var k=0;k<h.scope.exportDecls.length;k++){var n=h.scope.exportDecls[k];if(n.declarations&&n.declarations.includes(c)||n.declaration===c)return!1}return f.excludeRefs.includes(c.name)||f.includeRefs&&!f.includeRefs.includes(c.name)?!1:!0};vc.replaceClassDecls=function(c,h){if(h.classToFunction)return h.classToFunction.transform(c,h.classToFunction);var f=vc.topLevelDeclsAndRefs(c);if(!f.classDecls.length)return c;for(var k=c.body.length-1;0<=k;k--){var n=c.body[k];n.id&&f.classDecls.includes(n)&&
c.body.splice(k+1,0,vc.assignExpr(h.captureObj,n.id,n.id,!1))}return c};vc.splitExportDeclarations=function(c,h){h=c.body;for(var f=c.body=[],k=0;k<h.length;k++){var n=h[k];if("ExportNamedDeclaration"!==n.type||!n.declaration||"VariableDeclaration"!==n.declaration.type||1>=n.declaration.declarations.length)f.push(n);else for(var b=n.declaration.declarations,e=0;e<b.length;e++)f.push({type:"ExportNamedDeclaration",specifiers:[],declaration:vc.varDecl(b[e].id,b[e].init,n.declaration.kind)})}return c};
vc.insertCapturesForExportedImports=Dx;vc.insertCapturesForExportDeclarations=function(c,h){for(var f=[],k=0;k<c.body.length;k++){var n=c.body[k];f.push(n);if(("ExportNamedDeclaration"===n.type||"ExportDefaultDeclaration"===n.type)&&n.declaration)if("ExportDefaultDeclaration"===n.type&&"Literal"===n.declaration.type){var b=n.declaration,e=vc.generateUniqueName(vc.topLevelDeclsAndRefs(c).declaredNames,"$"+b.raw.split('"').join(""));n.declaration=vc.id(e);vc.arr.pushAt(f,vc.assignExpr(h.captureObj,
e,b.raw,!1),f.indexOf(n))}else n.declaration.declarations?f.push.apply(f,$jscomp.arrayFromIterable(n.declaration.declarations.map(function(m){var a=m.id;h.declarationWrapper&&(m.init.callee&&m.init.callee.name===h.declarationWrapper.name||(a=vc.declarationWrapperCall(h.declarationWrapper,m,vc.literal(m.id.name),vc.literal("assignment"),m.id,h.captureObj,h)));return vc.assignExpr(h.captureObj,m.id,a,!1)}))):"FunctionDeclaration"!==n.declaration.type&&"ClassDeclaration"===n.declaration.type&&f.push(vc.assignExpr(h.captureObj,
n.declaration.id,n.declaration.id,!1))}c.body=f;return c};vc.insertCapturesForImportDeclarations=function(c,h){c.body=c.body.reduce(function(f,k){return f.concat("ImportDeclaration"===k.type&&k.specifiers.length?[k].concat(k.specifiers.map(function(n){return vc.assignExpr(h.captureObj,n.local,n.local,!1)})):[k])},[]);return c};vc.insertDeclarationsForExports=function(c,h){for(var f=vc.topLevelDeclsAndRefs(c),k=[],n=0;n<c.body.length;n++){var b=c.body[n];h.classToFunction&&"ExportDefaultDeclaration"===
b.type&&b.declaration&&!b.declaration.type.includes("Declaration")&&("Identifier"===b.declaration.type||b.declaration.id)?k=k.concat([vc.varDeclOrAssignment(c,{type:"VariableDeclarator",id:b.declaration,init:vc.member(h.captureObj,b.declaration)}),b]):"ExportNamedDeclaration"!==b.type||!b.specifiers.length||b.source?k.push(b):k=k.concat(b.specifiers.map(function(e){return f.declaredNames.includes(e.local.name)?null:vc.varDeclOrAssignment(c,{type:"VariableDeclarator",id:e.local,init:vc.member(h.captureObj,
e.local)})}).filter(Boolean)).concat(b)}c.body=k;return c};vc.fixDefaultAsyncFunctionExportForRegeneratorBug=function(c,h){h=[];for(var f=0;f<c.body.length;f++){var k=c.body[f];"ExportDefaultDeclaration"===k.type&&"FunctionDeclaration"===k.declaration.type&&k.declaration.id&&k.declaration.async&&(h.push(k.declaration),k.declaration={type:"Identifier",name:k.declaration.id.name});h.push(k)}c.body=h;return c};vc.es6ModuleTransforms=function(c,h){c.body=c.body.reduce(function(f,k){if("ExportNamedDeclaration"===
k.type)if(k.source){var n=e=k.source;var b=k.specifiers.map(function(m){return{type:"ExpressionStatement",expression:vc.exportFromImport({type:"Literal",value:m.exported.name},{type:"Literal",value:m.local.name},e,h.moduleExportFunc,h.moduleImportFunc)}})}else b=k.declaration?(b=k.declaration.declarations)?b.map(function(m){h.excludeDecls.push(m.id);return vc.varDecl(m.id,vc.assignExpr(h.captureObj,m.id,h.declarationWrapper?vc.declarationWrapperCall(h.declarationWrapper,null,vc.literal(m.id.name),
vc.literal(k.declaration.kind),m,h.captureObj,h):m.init,!1),k.declaration.kind)}).concat(b.map(function(m){return vc.exportCallStmt(h.moduleExportFunc,m.id.name,m.id)})):[k.declaration].concat(vc.exportCallStmt(h.moduleExportFunc,k.declaration.id.name,k.declaration.id)):k.specifiers.map(function(m){return vc.exportCallStmt(h.moduleExportFunc,m.exported.name,vc.shouldDeclBeCaptured({id:m.local},h)?vc.member(h.captureObj,m.local):m.local)});else if("ExportDefaultDeclaration"===k.type)b=k.declaration&&
k.declaration.id?[k.declaration].concat(vc.exportCallStmt(h.moduleExportFunc,"default",k.declaration.id)):[vc.exportCallStmt(h.moduleExportFunc,"default",k.declaration)];else if("ExportAllDeclaration"===k.type){n={name:h.es6ExportFuncId+"__iterator__",type:"Identifier"};var e=k.source;b=[{type:"ForInStatement",body:{type:"ExpressionStatement",expression:vc.exportFromImport(n,n,e,h.moduleExportFunc,h.moduleImportFunc)},left:{type:"VariableDeclaration",kind:"var",declarations:[{type:"VariableDeclarator",
id:n,init:null}]},right:vc.importCall(null,e,h.moduleImportFunc)}];h.excludeRefs.push(n.name);h.excludeDecls.push(n.name)}else b="ImportDeclaration"===k.type?k.specifiers.length?k.specifiers.map(function(m){return vc.varDeclAndImportCall(c,m.local,"ImportSpecifier"===m.type&&m.imported.name||"ImportDefaultSpecifier"===m.type&&"default"||null,k.source,h.moduleImportFunc)}):vc.importCallStmt(null,k.source,h.moduleImportFunc):[k];return f.concat(b)},[]);return c};vc.putFunctionDeclsInFront=function(c,
h){var f=vc.topLevelDeclsAndRefs(c).scope,k=f.funcDecls;if(!k.length)return c;for(var n=[],b=k.length;b--;){var e=k[b];if(e.id&&vc.shouldDeclBeCaptured(e,h)){var m=f.funcDeclPaths[b].slice(0,-1),a=vc.Path(m).get(f.node);m={type:"Identifier",name:e.id.name};var g=h.declarationWrapper?vc.declarationWrapperCall(h.declarationWrapper,e,vc.literal(m.name),vc.literal("function"),m,h.captureObj,h):m,l=Object.assign({},e);Array.isArray(a)?a.splice(a.indexOf(e),1,vc.exprStmt(e.id)):"ExportNamedDeclaration"===
a.type?(a=f.node.body.indexOf(a),-1<a&&f.node.body.splice(a,1,{type:"ExportNamedDeclaration",specifiers:[{type:"ExportSpecifier",exported:e.id,local:e.id}]})):"ExportDefaultDeclaration"===a.type&&(a.declaration=e.id);n.unshift(vc.assignExpr(h.captureObj,m,g,!1));n.unshift(l)}}c.body=n.concat(c.body);return c};vc.computeDefRanges=function(c,h){c=vc.topLevelDeclsAndRefs(c);return vc.chain(c.scope.varDecls).pluck("declarations").flatten().value().concat(c.scope.funcDecls.filter(function(f){return f.id})).reduce(function(f,
k){f[k.id.name]||(f[k.id.name]=[]);f[k.id.name].push({type:k.type,start:k.start,end:k.end});return f},{})};vc.transformPattern=function(c,h){return"ArrayPattern"===c.type?vc.transformArrayPattern(c,h):"ObjectPattern"===c.type?vc.transformObjectPattern(c,h):[]};vc.transformArrayPattern=function(c,h){for(var f=h.declaredNames,k=vc.annotationSym,n=[],b=0;b<c.elements.length;b++){var e=c.elements[b];if("Identifier"===e.type)e=vc.varDecl(e,vc.member(h.parent,vc.id(b),!0)),e[k]={capture:!0},n.push(e);else if("RestElement"===
e.type)e=vc.varDecl(e.argument,{type:"CallExpression",arguments:[{type:"Literal",value:b}],callee:vc.member(h.parent,vc.id("slice"),!1)}),e[k]={capture:!0},n.push(e);else if("AssignmentPattern"==e.type)e=vc.varDecl(e.left,vc.conditional(vc.binaryExpr(vc.member(h.parent,vc.id(b),!0),"===",vc.id("undefined")),e.right,vc.member(h.parent,vc.id(b),!0))),e[k]={capture:!0},n.push(e);else{var m=vc.id(vc.generateUniqueName(f,h.parent.name+"$"+b)),a=vc.varDecl(m,vc.member(h.parent,b));f.push(m.name);n.push(a);
n.push.apply(n,$jscomp.arrayFromIterable(vc.transformPattern(e,{parent:m,declaredNames:f})))}}return n};vc.transformObjectPattern=function(c,h){for(var f=h.declaredNames,k=vc.annotationSym,n=[],b=0;b<c.properties.length;b++){var e=c.properties[b];if("RestElement"==e.type){var m=c.properties.map(function(l){return l.key&&l.key.name}).filter(Boolean),a=vc.nodes.varDecl(e.argument.name,vc.nodes.objectLiteral([])),g=vc.nodes.varDecl(e.argument.name,vc.id(e.argument.name));e=vc.nodes.exprStmt(vc.nodes.funcCall(vc.nodes.funcExpr({},
[],vc.nodes.forIn("__key",h.parent,vc.nodes.block.apply(vc.nodes,[].concat($jscomp.arrayFromIterable(m.length?m.map(function(l){return vc.nodes.ifStmt(vc.nodes.binaryExpr(vc.nodes.id("__key"),"===",vc.nodes.literal(l)),{type:"ContinueStatement",label:null},null)}):[]),[vc.nodes.exprStmt(vc.nodes.assign(vc.nodes.member(e.argument.name,vc.nodes.id("__key"),!0),vc.nodes.member(h.parent,vc.nodes.id("__key"),!0)))]))))));g[k]={capture:!0};n.push(a,g,e)}else"Identifier"==e.value.type?(a=vc.varDecl(e.value,
vc.member(h.parent,e.key)),a[k]={capture:!0},n.push(a)):"AssignmentPattern"==e.value.type?(a=vc.varDecl(e.value.left,vc.conditional(vc.binaryExpr(vc.member(h.parent,e.key),"===",vc.id("undefined")),e.value.right,vc.member(h.parent,e.key))),a[k]={capture:!0},n.push(a)):(a=vc.id(vc.generateUniqueName(f,h.parent.name+"$"+e.key.name)),g=vc.varDecl(a,vc.member(h.parent,e.key)),g[k]={capture:!1},f.push(a.name),n.push.apply(n,$jscomp.arrayFromIterable([g].concat(vc.transformPattern(e.value,{parent:a,declaredNames:f})))))}return n};
vc.varDeclOrAssignment=function(c,h,f){return-1<vc.topLevelDeclsAndRefs(c).declaredNames.indexOf(h.id.name)?vc.exprStmt(vc.assign(h.id,h.init)):{declarations:[h],kind:f||"var",type:"VariableDeclaration"}};vc.assignExpr=function(c,h,f,k){return vc.exprStmt(vc.assign(vc.member(c,h,k),f||vc.id("undefined")))};vc.exportFromImport=function(c,h,f,k,n){return vc.exportCall(k,c,vc.importCall(h,f,n))};vc.varDeclAndImportCall=function(c,h,f,k,n){return vc.varDecl(h,vc.importCall(f,k,n))};vc.importCall=function(c,
h,f){"string"===typeof c&&(c=vc.literal(c));return{arguments:[h].concat(c||[]),callee:f,type:"CallExpression"}};vc.importCallStmt=function(c,h,f){return vc.exprStmt(vc.importCall(c,h,f))};vc.exportCall=function(c,h,f){"string"===typeof h&&(h=vc.literal(h));f=vc.obj.deepCopy(f);return vc.funcCall(c,h,f)};vc.exportCallStmt=function(c,h,f){return vc.exprStmt(vc.exportCall(c,h,f))};vc.declarationWrapperCall=function(c,h,f,k,n,b,e){if(h){var m=[],a=!1;if(h["x-lively-object-meta"]){a=h["x-lively-object-meta"];
h=a.start;var g=a.end,l=a.evalId,r=a.sourceAccessorName;a=!0;m.push("start",vc.nodes.literal(h),"end",vc.nodes.literal(g))}void 0===l&&e.hasOwnProperty("evalId")&&(l=e.evalId,a=!0);void 0===r&&e.hasOwnProperty("sourceAccessorName")&&(r=e.sourceAccessorName,a=!0);void 0!==l&&m.push("evalId",vc.nodes.literal(l));r&&m.push("moduleSource",vc.nodes.id(r));if(a)return vc.funcCall(c,f,k,n,b,vc.nodes.objectLiteral(m))}return vc.funcCall(c,f,k,n,b)};vc.obj=Ag;vc.string=pi;vc.chain=ym;vc.arr=$f;vc.fun=Pn;vc.Path=
Ah;vc.parse=ak;vc.stringify=Uh;vc.query=Kt;vc.transform=RA;vc.nodes=Pw;vc.Visitor=Fe;vc.ReplaceManyVisitor=vs;vc.ReplaceVisitor=Jt;var qv=vc.nodes;vc.member=qv.member;vc.prop=qv.prop;vc.varDecl=qv.varDecl;vc.assign=qv.assign;vc.id=qv.id;vc.literal=qv.literal;vc.exprStmt=qv.exprStmt;vc.conditional=qv.conditional;vc.binaryExpr=qv.binaryExpr;vc.funcCall=qv.funcCall;var e5=vc.query;vc.topLevelDeclsAndRefs=e5.topLevelDeclsAndRefs;vc.queryHelpers=e5.helpers;var f5=vc.transform;vc.transformSingleExpression=
f5.transformSingleExpression;vc.wrapInStartEndCall=f5.wrapInStartEndCall;vc.rewriteToCaptureTopLevelVariables=Ju;vc.rewriteToCaptureTopLevelVariables=Ju;vc.rewriteToRegisterModuleToCaptureSetters=Um;vc.rewriteToRegisterModuleToCaptureSetters=Um;vc.insertCapturesForExportedImports=Dx;vc.insertCapturesForExportedImports=Dx;vc.annotationSym=Symbol("lively.ast-destructuring-transform");var MG=Object.freeze({__proto__:null,rewriteToCaptureTopLevelVariables:Ju,rewriteToRegisterModuleToCaptureSetters:Um,
insertCapturesForExportedImports:Dx}),g5={__esModule:!0,default:function(){return{manipulateOptions:function(c,h){h.plugins.push("jsx")}}}},xha=g5=g5["default"],yha={},h5=yha=Array.isArray,EL="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,i5={};i5="object"==typeof EL&&EL&&EL.Object===Object&&EL;var zha={},Aha="object"==typeof self&&self&&self.Object===Object&&self,SA=zha=i5||Aha||Function("return this")(),Bha={},FL=Bha=SA.Symbol,Cha={},j5=Object.prototype,Dha=j5.hasOwnProperty,
Eha=j5.toString,NG=FL?FL.toStringTag:void 0,Fha=Cha=function(c){var h=Dha.call(c,NG),f=c[NG];try{c[NG]=void 0;var k=!0}catch(b){}var n=Eha.call(c);k&&(h?c[NG]=f:delete c[NG]);return n},k5={},Gha=Object.prototype.toString;k5=function(c){return Gha.call(c)};var Hha={},Iha=k5,l5=FL?FL.toStringTag:void 0,sT=Hha=function(c){return null==c?void 0===c?"[object Undefined]":"[object Null]":l5&&l5 in Object(c)?Fha(c):Iha(c)},Jha={},tT=Jha=function(c){return null!=c&&"object"==typeof c},Kha={},Lha=Kha=function(c){return"string"==
typeof c||!h5(c)&&tT(c)&&"[object String]"==sT(c)},Mha={},uT=Mha=function(c){return c},Nha={},Oha=Nha=function(c){return"symbol"==typeof c||tT(c)&&"[object Symbol]"==sT(c)},Pha={},LD=Pha=function(c){var h=typeof c;return null!=c&&("object"==h||"function"==h)},Qha={},Rha=Qha=function(c){if(!LD(c))return!1;c=sT(c);return"[object Function]"==c||"[object GeneratorFunction]"==c||"[object AsyncFunction]"==c||"[object Proxy]"==c},m5={};m5=SA["__core-js_shared__"];var Sha={},vT=m5,n5=function(){var c=/[^.]+$/.exec(vT&&
vT.keys&&vT.keys.IE_PROTO||"");return c?"Symbol(src)_1."+c:""}(),Tha=Sha=function(c){return!!n5&&n5 in c},o5={},Uha=Function.prototype.toString;o5=function(c){if(null!=c){try{return Uha.call(c)}catch(h){}return c+""}return""};var Vha={},Wha=o5,Xha=/^\[object .+?Constructor\]$/,Yha=RegExp("^"+Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Zha=Vha=function(c){return!LD(c)||
Tha(c)?!1:(Rha(c)?Yha:Xha).test(Wha(c))},p5={};p5=function(c,h){return null==c?void 0:c[h]};var $ha={},aia=p5,q5=$ha=function(c,h){c=aia(c,h);return Zha(c)?c:void 0},bia={},r5=bia=function(){try{var c=q5(Object,"defineProperty");c({},"",{});return c}catch(h){}}(),cia={},s5=cia=function(c,h){var f=-1,k=c.length;for(h||(h=Array(k));++f<k;)h[f]=c[f];return h},dia={},t5=Object.create,wT=dia=function(){function c(){}return function(h){if(!LD(h))return{};if(t5)return t5(h);c.prototype=h;h=new c;c.prototype=
void 0;return h}}(),eia={},fia=/^(?:0|[1-9]\d*)$/,gia=eia=function(c,h){var f=typeof c;h=null==h?9007199254740991:h;return!!h&&("number"==f||"symbol"!=f&&fia.test(c))&&-1<c&&0==c%1&&c<h},hia={},u5=hia=function(c,h,f){switch(f.length){case 0:return c.call(h);case 1:return c.call(h,f[0]);case 2:return c.call(h,f[0],f[1]);case 3:return c.call(h,f[0],f[1],f[2])}return c.apply(h,f)},v5={};v5=function(c){return function(){return c}};var iia={},jia=v5,kia=iia=r5?function(c,h){return r5(c,"toString",{configurable:!0,
enumerable:!1,value:jia(h),writable:!0})}:uT,lia={},mia=Date.now,w5=lia=function(c){var h=0,f=0;return function(){var k=mia(),n=16-(k-f);f=k;if(0<n){if(800<=++h)return arguments[0]}else h=0;return c.apply(void 0,arguments)}},nia={},oia=nia=w5(kia),pia={},x5=pia=q5(SA,"WeakMap"),qia={},ria=qia=function(c,h){for(var f=-1,k=null==c?0:c.length;++f<k&&!1!==h(c[f],f,c););return c},sia={},y5=0/0,tia=/^\s+|\s+$/g,uia=/^[-+]0x[0-9a-f]+$/i,via=/^0b[01]+$/i,wia=/^0o[0-7]+$/i,xia=parseInt,yia=sia=function(c){if("number"==
typeof c)return c;if(Oha(c))return y5;LD(c)&&(c="function"==typeof c.valueOf?c.valueOf():c,c=LD(c)?c+"":c);if("string"!=typeof c)return 0===c?c:+c;c=c.replace(tia,"");var h=via.test(c);return h||wia.test(c)?xia(c.slice(2),h?2:8):uia.test(c)?y5:+c},zia={},Aia=zia=function(c,h,f,k){var n=c.length;for(f+=k?1:-1;k?f--:++f<n;)if(h(c[f],f,c))return f;return-1},z5={},A5=1/0;z5=function(c){if(!c)return 0===c?c:0;c=yia(c);return c===A5||c===-A5?1.7976931348623157E308*(0>c?-1:1):c===c?c:0};var Bia={},Cia=z5,
B5=Bia=function(c){c=Cia(c);var h=c%1;return c===c?h?c-h:c:0},Dia={},Eia=Dia=function(c){return c!==c},C5={};C5=function(c,h,f){--f;for(var k=c.length;++f<k;)if(c[f]===h)return f;return-1};var D5={},Fia=C5;D5=function(c,h,f){return h===h?Fia(c,h,f):Aia(c,Eia,f)};var Gia={},Hia=D5,Iia=Gia=function(c,h){return!(null==c||!c.length)&&-1<Hia(c,h,0)},Jia={},Kia=Jia=function(){},Lia={},xT=Lia=function(){},Fz="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,Mia={};hw.prototype=
wT(xT.prototype);var yT=Mia=hw.prototype.constructor=hw,fF="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,Nia={};kC.prototype=wT(xT.prototype);var E5=Nia=kC.prototype.constructor=kC,F5={};F5=function(c){if(c instanceof yT)return c.clone();var h=new E5(c.__wrapped__,c.__chain__);h.__actions__=s5(c.__actions__);h.__index__=c.__index__;h.__values__=c.__values__;return h};var Oia={},Xaa=yT,HX=E5,Waa=h5,Vaa=tT,Zaa=F5,Yaa=Object.prototype.hasOwnProperty;pn.prototype=xT.prototype;
var Pia=Oia=pn.prototype.constructor=pn,Qia={},GL=Qia=x5&&new x5,Ria={},G5=Ria=GL?function(c){return GL.get(c)}:Kia,H5={};H5={};var I5={},J5=H5,Sia=Object.prototype.hasOwnProperty;I5=function(c){for(var h=c.name+"",f=J5[h],k=Sia.call(J5,h)?f.length:0;k--;){var n=f[k],b=n.func;if(null==b||b==c)return n.name}return h};var Tia={},Uia=I5,Via=Tia=function(c){var h=Uia(c),f=Pia[h];if("function"!=typeof f||!(h in yT.prototype))return!1;if(c===f)return!0;h=G5(f);return!!h&&c===h[0]},Wia={},K5=Wia=GL?function(c,
h){GL.set(c,h);return c}:uT,Xia={},HL=Xia=function(c){return function(){var h=arguments;switch(h.length){case 0:return new c;case 1:return new c(h[0]);case 2:return new c(h[0],h[1]);case 3:return new c(h[0],h[1],h[2]);case 4:return new c(h[0],h[1],h[2],h[3]);case 5:return new c(h[0],h[1],h[2],h[3],h[4]);case 6:return new c(h[0],h[1],h[2],h[3],h[4],h[5]);case 7:return new c(h[0],h[1],h[2],h[3],h[4],h[5],h[6])}var f=wT(c.prototype);h=c.apply(f,h);return LD(h)?h:f}},IL="undefined"!==typeof globalThis?
globalThis:"undefined"!==typeof self?self:global,Yia={},Zia=Yia=function(c,h,f){function k(){return((this||IL)&&(this||IL)!==SA&&(this||IL)instanceof k?b:c).apply(n?f:this||IL,arguments)}var n=h&1,b=HL(c);return k},$ia={},aja=Math.max,L5=$ia=function(c,h,f,k){var n=-1,b=c.length,e=f.length,m=-1,a=h.length,g=aja(b-e,0),l=Array(a+g);for(k=!k;++m<a;)l[m]=h[m];for(;++n<e;)if(k||n<b)l[f[n]]=c[n];for(;g--;)l[m++]=c[n++];return l},bja={},cja=Math.max,M5=bja=function(c,h,f,k){var n=-1,b=c.length,e=-1,m=f.length,
a=-1,g=h.length,l=cja(b-m,0),r=Array(l+g);for(k=!k;++n<l;)r[n]=c[n];for(l=n;++a<g;)r[l+a]=h[a];for(;++e<m;)if(k||n<b)r[l+f[e]]=c[n++];return r},dja={},eja=dja=function(c,h){for(var f=c.length,k=0;f--;)c[f]===h&&++k;return k},fja={},N5=fja=w5(K5),gja={},hja=/\{\n\/\* \[wrapped with (.+)\] \*/,ija=/,? & /,jja=gja=function(c){return(c=c.match(hja))?c[1].split(ija):[]},kja={},lja=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,mja=kja=function(c,h){var f=h.length;if(!f)return c;var k=f-1;h[k]=(1<f?"& ":"")+
h[k];h=h.join(2<f?", ":" ");return c.replace(lja,"{\n/* [wrapped with "+h+"] */\n")},O5={},nja=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]];O5=function(c,h){ria(nja,function(f){var k="_."+f[0];h&f[1]&&!Iia(c,k)&&c.push(k)});return c.sort()};var oja={},pja=O5,P5=oja=function(c,h,f){h+="";return oia(c,mja(h,pja(jja(h),f)))},qja={},Q5=qja=function(c,h,f,k,n,b,e,m,a,g){var l=h&8;h=(h|(l?32:64))&~(l?64:32);h&4||(h&=-4);
n=[c,h,n,l?b:void 0,l?e:void 0,l?void 0:b,l?void 0:e,m,a,g];f=f.apply(void 0,n);Via(c)&&N5(f,n);f.placeholder=k;return P5(f,c,h)},rja={},R5=rja=function(c){return c.placeholder},sja={},tja=Math.min,uja=sja=function(c,h){for(var f=c.length,k=tja(h.length,f),n=s5(c);k--;){var b=h[k];c[k]=gia(b,f)?n[b]:void 0}return c},vja={},JL=vja=function(c,h){for(var f=-1,k=c.length,n=0,b=[];++f<k;){var e=c[f];if(e===h||"__lodash_placeholder__"===e)c[f]="__lodash_placeholder__",b[n++]=f}return b},PI="undefined"!==
typeof globalThis?globalThis:"undefined"!==typeof self?self:global,wja={},bba=L5,cba=M5,aba=eja,IX=HL,eba=Q5,$aa=R5,fba=uja,dba=JL,gba=SA,S5=wja=Gz,KL="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,xja={},yja=xja=function(c,h,f){function k(){for(var b=arguments.length,e=Array(b),m=b,a=R5(k);m--;)e[m]=arguments[m];m=3>b&&e[0]!==a&&e[b-1]!==a?[]:JL(e,a);b-=m.length;return b<f?Q5(c,h,S5,k.placeholder,void 0,e,m,void 0,void 0,f-b):u5((this||KL)&&(this||KL)!==SA&&(this||
KL)instanceof k?n:c,this||KL,e)}var n=HL(c);return k},LL="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,zja={},Aja=zja=function(c,h,f,k){function n(){for(var m=-1,a=arguments.length,g=-1,l=k.length,r=Array(l+a),v=(this||LL)&&(this||LL)!==SA&&(this||LL)instanceof n?e:c;++g<l;)r[g]=k[g];for(;a--;)r[g++]=arguments[++m];return u5(v,b?f:this||LL,r)}var b=h&1,e=HL(c);return n},T5={},Bja=Math.min;T5=function(c,h){var f=c[1],k=h[1],n=f|k,b=128==k&&8==f||128==k&&256==f&&c[7].length<=
h[8]||384==k&&h[7].length<=h[8]&&8==f;if(!(131>n||b))return c;k&1&&(c[2]=h[2],n|=f&1?0:4);if(f=h[3])b=c[3],c[3]=b?L5(b,f,h[4]):f,c[4]=b?JL(c[3],"__lodash_placeholder__"):h[4];if(f=h[5])b=c[5],c[5]=b?M5(b,f,h[6]):f,c[6]=b?JL(c[5],"__lodash_placeholder__"):h[6];(f=h[7])&&(c[7]=f);k&128&&(c[8]=null==c[8]?h[8]:Bja(c[8],h[8]));null==c[9]&&(c[9]=h[9]);c[0]=h[0];c[1]=n;return c};var U5={},Cja=T5,V5=Math.max;U5=function(c,h,f,k,n,b,e,m){var a=h&2;if(!a&&"function"!=typeof c)throw new TypeError("Expected a function");
var g=k?k.length:0;g||(h&=-97,k=n=void 0);e=void 0===e?e:V5(B5(e),0);m=void 0===m?m:B5(m);g-=n?n.length:0;if(h&64){var l=k,r=n;k=n=void 0}var v=a?void 0:G5(c);b=[c,h,f,k,n,l,r,b,e,m];v&&Cja(b,v);c=b[0];h=b[1];f=b[2];k=b[3];n=b[4];m=b[9]=void 0===b[9]?a?0:c.length:V5(b[9]-g,0);!m&&h&24&&(h&=-25);f=h&&1!=h?8==h||16==h?yja(c,h,m):32!=h&&33!=h||n.length?S5.apply(void 0,b):Aja(c,h,f,k):Zia(c,h,f);return P5((v?K5:N5)(f,b),c,h)};var Dja={},Eja=U5,Fja=Dja=function(c,h,f){h=f?void 0:h;h=c&&null==h?c.length:
h;return Eja(c,128,void 0,void 0,void 0,void 0,h)},zT={};Object.defineProperty(zT,"__esModule",{value:!0});zT.default=function(c){var h=c.types,f=function(n){return function(b){var e=n[b.type];if(e)return e(b);throw Error(b.type+" could not be transformed");}},k=function(n,b){var e=b.opts;b=e.useNew;var m=void 0===b?!1:b;b=e.module;var a=e.function;e=e.useVariables;var g=void 0===e?!1:e,l=e=void 0;!0===g?e=/^[A-Z]/:(0,Gja.default)(g)&&(e=new RegExp(g));var r=m?h.newExpression:h.callExpression;l=function(v){return function(y){return r(v,
[y])}};b?(m=n.scope.generateUidIdentifier(m?"JSXNode":"jsx"),l=l(m),b=h.importDeclaration([h.importDefaultSpecifier(m)],h.stringLiteral(b)),n.findParent(function(v){return v.isProgram()}).unshiftContainer("body",b)):a?(n=a.split(".").map((0,W5.default)(h.identifier,1)).reduce((0,W5.default)(h.memberExpression,2)),l=l(n)):l=Hja.default;return{variablesRegex:e,jsxObjectTransformer:l}};return{inherits:xha,visitor:{JSXElement:function(n,b){b.get("jsxConfig")||b.set("jsxConfig",k(n,b));var e=b.get("jsxConfig"),
m=e.variablesRegex,a=e.jsxObjectTransformer,g=function(I){return h.stringLiteral(I.name)},l=function(I){return h.stringLiteral(I.namespace.name+":"+I.name.name)},r=f({JSXIdentifier:function(I){return h.identifier(I.name)},JSXMemberExpression:function(I){return h.memberExpression(r(I.object),r(I.property))}}),v=f({JSXIdentifier:m?function(I){return m.test(I.name)?h.identifier(I.name):g(I)}:g,JSXNamespacedName:l,JSXMemberExpression:r});e=function(I){return I.expression};var y=f({JSXIdentifier:g,JSXNamespacedName:l,
JSXMemberExpression:r}),A=f({StringLiteral:function(I){return I},JSXExpressionContainer:e}),E=function(I){var M=[],N=[];I.forEach(function(W){switch(W.type){case "JSXAttribute":M||(M=[]);var X=y(W.name);X=Ija.default.keyword.isIdentifierNameES6(X.value)?h.identifier(X.value):X;M.push(h.objectProperty(X,A(W.value)));break;case "JSXSpreadAttribute":M&&(N.push(h.objectExpression(M)),M=null);N.push(W.argument);break;default:throw Error(W.type+" cannot be used as a JSX attribute");}});M&&0<M.length&&N.push(h.objectExpression(M));
return 0===N.length?h.objectExpression([]):1===N.length?N[0]:h.callExpression(b.addHelper("extends"),N)};l=function(I){return a(h.objectExpression([h.objectProperty(h.identifier(Jja),v(I.openingElement.name)),h.objectProperty(h.identifier(Kja),E(I.openingElement.attributes)),h.objectProperty(h.identifier(Lja),I.closingElement?H(I.children):h.nullLiteral())]))};var F=f({JSXText:function(I){if(b.opts.noTrim)return h.stringLiteral(I.value);I=I.value.replace(/\n\s*/g,"");return""===I?null:h.stringLiteral(I)},
JSXElement:l,JSXExpressionContainer:e}),H=function(I){return h.arrayExpression(I.map(F).filter(Boolean).reduce(function(M,N){var W=0<M.length?M[M.length-1]:null;return"StringLiteral"===N.type&&W&&"StringLiteral"===W.type?[].concat(lC(M.slice(0,-1)),[h.stringLiteral(W.value+N.value)]):[].concat(lC(M),[N])},[]))};n.replaceWith(l(n.node))}}}};var Gja=iw(Lha),Hja=iw(uT),W5=iw(Fja),Ija=iw(BG),Jja="elementName",Kja="attributes",Lja="children",OG={};Object.defineProperty(OG,"__esModule",{value:!0});OG.declare=
function(c){return function(h,f,k){h.assertVersion||(h=Object.assign(QI(h),{assertVersion:function(n){var b=h.version;if("number"===typeof n){if(!Number.isInteger(n))throw Error("Expected string or integer value.");n="^"+n+".0.0-0"}if("string"!==typeof n)throw Error("Expected string or integer value.");var e=Error.stackTraceLimit;"number"===typeof e&&25>e&&(Error.stackTraceLimit=25);var m="7."===b.slice(0,2)?Error('Requires Babel "^7.0.0-beta.41", but was loaded with "'+b+"\". You'll need to update your @babel/core version."):
Error('Requires Babel "'+n+'", but was loaded with "'+b+'". If you are sure you have a compatible version of @babel/core, it is likely that something in your build process is loading the wrong version. Inspect the stack trace of this error to look for the first entry that doesn\'t mention "@babel/core" or "babel-core" to see what is calling Babel.');"number"===typeof e&&(Error.stackTraceLimit=e);throw Object.assign(m,{code:"BABEL_VERSION_UNSUPPORTED",version:b,range:n});}}));return c(h,f||{},k)}};
var TA={};Object.defineProperty(TA,"__esModule",{value:!0});TA.default=void 0;var Mja=(0,OG.declare)(function(c){c.assertVersion(7);return{name:"syntax-optional-catch-binding",manipulateOptions:function(h,f){f.plugins.push("optionalCatchBinding")}}});TA.default=Mja;var ML={};Object.defineProperty(ML,"__esModule",{value:!0});ML.default=void 0;var Nja=TA&&TA.__esModule?TA:{default:TA},Oja=(0,OG.declare)(function(c){c.assertVersion(7);return{name:"proposal-optional-catch-binding",inherits:Nja.default,
visitor:{CatchClause:function(h){if(!h.node.param){var f=h.scope.generateUidIdentifier("unused");h.get("param").replaceWith(f)}}}}});ML.default=Oja;var NL={};Object.defineProperty(NL,"__esModule",{value:!0});NL.default=void 0;var Pja=(0,OG.declare)(function(c){c.assertVersion(7);return{name:"syntax-import-meta",manipulateOptions:function(h,f){f.plugins.push("importMeta")}}});NL.default=Pja;var gk=lively.FreezerRuntime.recorderFor("lively.source-transform/index.js");gk.ensureJSXPlugin=function(){gk.transformJSX&&
("undefined"===typeof babel||babel.availablePlugins["transform-jsx"]||(lively||global.lively).FreezerRuntime||babel.registerPlugin("transform-jsx",gk.transformJSX.default))};gk.ensureOptionalCatchBinding=function(){gk.catchBinding&&("undefined"===typeof babel||babel.availablePlugins["optional-catch-binding"]||(lively||global.lively).FreezerRuntime||babel.registerPlugin("optional-catch-binding",gk.catchBinding.default))};gk.ensureImportMeta=function(){gk.importMeta&&("undefined"===typeof babel||babel.availablePlugins["syntax-import-meta"]||
(lively||global.lively).FreezerRuntime||babel.registerPlugin("syntax-import-meta",gk.importMeta.default))};gk.stringifyFunctionWithoutToplevelRecorder=Ku;gk.es5Transpilation=lq;gk.capturing=MG;gk.capturing=MG;gk.capturing=MG;gk.parseFunction=Rn;gk.stringify=Uh;gk.ReplaceVisitor=Jt;gk.transformJSX=zT;gk.catchBinding=ML;gk.importMeta=NL;gk.stringifyFunctionWithoutToplevelRecorder=Ku;gk.stringifyFunctionWithoutToplevelRecorder=Ku;gk.es5Transpilation=lq;gk.es5Transpilation=lq;var Qja=Object.freeze({__proto__:null,
capturing:MG,stringifyFunctionWithoutToplevelRecorder:Ku,es5Transpilation:lq}),Rg=lively.FreezerRuntime.recorderFor("lively.vm/lib/eval-support.js");Rg.processInlineCodeTransformOptions=function(c,h){if(!c.comments)return h;c=c.comments.find(function(k){return k.text.startsWith("lively.vm ")});if(!c)return h;try{var f=eval("inlineOptions = {"+c.text.slice(10)+"};");return Object.assign(h,f)}catch(k){return h}};Rg.evalCodeTransform=Xo;Rg.evalCodeTransformOfSystemRegisterSetters=mq;Rg.copyProperties=
function(c,h,f){f=void 0===f?[]:f;Object.getOwnPropertyNames(c).concat(Object.getOwnPropertySymbols(c)).forEach(function(k){return-1===f.indexOf(k)&&Object.defineProperty(h,k,Object.getOwnPropertyDescriptor(c,k))})};Rg.arr=$f;Rg.Path=Ah;Rg.parse=ak;Rg.stringify=Uh;Rg.transform=RA;Rg.query=Kt;Rg.nodes=Pw;Rg.capturing=MG;Rg.es5Transpilation=lq;Rg.getGlobal=xo;var OL=Rg.nodes;Rg.id=OL.id;Rg.literal=OL.literal;Rg.member=OL.member;Rg.objectLiteral=OL.objectLiteral;Rg.defaultDeclarationWrapperName="lively.capturing-declaration-wrapper";
Rg.defaultDeclarationWrapperName="lively.capturing-declaration-wrapper";Rg.defaultDeclarationWrapperName="lively.capturing-declaration-wrapper";Rg.defaultClassToFunctionConverterName="initializeES6ClassForLively";Rg.defaultClassToFunctionConverterName="initializeES6ClassForLively";Rg.defaultClassToFunctionConverterName="initializeES6ClassForLively";Rg.evalCodeTransform=Xo;Rg.evalCodeTransform=Xo;Rg.evalCodeTransformOfSystemRegisterSetters=mq;Rg.evalCodeTransformOfSystemRegisterSetters=mq;var dh=lively.FreezerRuntime.recorderFor("lively.vm/lib/eval.js");
dh._normalizeEvalOptions=function(c){c||(c={});c=Object.assign({targetModule:null,sourceURL:c.targetModule,runtime:null,context:dh.getGlobal(),varRecorderName:dh.defaultTopLevelVarRecorderName,dontTransform:[],recordGlobals:null,returnPromise:!0,promiseTimeout:200,waitForPromise:!0,wrapInStartEndCall:!1,onStartEval:null,onEndEval:null},c);if(c.targetModule){var h=c.runtime&&c.runtime.modules&&c.runtime.modules[c.targetModule];h&&(c=Object.assign(c,h))}c.wrapInStartEndCall&&(c.startFuncNode={type:"MemberExpression",
object:{type:"Identifier",name:c.varRecorderName},property:{type:"Literal",value:dh.startEvalFunctionName},computed:!0},c.endFuncNode={type:"MemberExpression",object:{type:"Identifier",name:c.varRecorderName},property:{type:"Literal",value:dh.endEvalFunctionName},computed:!0});return c};dh.runEval=Ex;dh.finishEval=function(c,h,f,k,n,b,e){k.wrapInStartEndCall&&(delete n[dh.startEvalFunctionName],delete n[dh.endEvalFunctionName]);c?(f.isError=!0,f.value=c):f.value=h;f.value instanceof Promise&&(f.isPromise=
!0);if(k.sync){if(f.processSync(k),"function"===typeof k.onEndEval)k.onEndEval(c,h)}else f.process(k).then(function(){"function"===typeof e&&e(null,f);"function"===typeof k.onEndEval&&k.onEndEval(c,h);return f},function(m){"function"===typeof e&&e(m,void 0);"function"===typeof k.onEndEval&&k.onEndEval(m,void 0);return f}).then(b.resolve,b.reject)};dh.syncEval=Hz;dh.tryToWaitForPromise=function(c,h){console.assert(c.isPromise,"no promise in tryToWaitForPromise???");var f={},k=new Promise(function(n){return setTimeout(n,
h,f)});return Promise.race([k,c.value]).then(function(n){return Object.assign(c,n!==f?{promiseStatus:"fulfilled",promisedValue:n}:{promiseStatus:"pending"})}).catch(function(n){return Object.assign(c,{promiseStatus:"rejected",promisedValue:n})})};dh.arr=$f;dh.obj=Ag;dh.string=pi;dh.Path=Ah;dh.promise=zh;dh.Closure=Rj;dh.evalCodeTransform=Xo;dh.printEvalResult=kq;dh.getGlobal=xo;dh.defaultTopLevelVarRecorderName="__lvVarRecorder";dh.startEvalFunctionName="lively.vm-on-eval-start";dh.endEvalFunctionName=
"lively.vm-on-eval-end";dh._eval=dh.Closure.fromSource("function _eval(__lvEvalStatement, __lvVarRecorder/*needed as arg for capturing*/, __lvOriginalCode) {\n  return eval(__lvEvalStatement);\n}").getFunc();var PG=function(){this.isEvalResult=!0;this.value=void 0;this.warnings=[];this.isPromise=this.isError=!1;this.promisedValue=void 0;this.promiseStatus="unknown"};PG.prototype.addWarning=function(c){this.warnings.push(c);return c};PG.prototype.printed=function(c){c=void 0===c?{}:c;this.value=dh.printEvalResult(this,
c)};PG.prototype.processSync=function(c){if(c.inspect||c.asString)this.value=this.print(this.value,c);return this};PG.prototype.process=function(c){var h=this;if(h.isPromise&&c.waitForPromise)return dh.tryToWaitForPromise(h,c.promiseTimeout).then(function(){(c.inspect||c.asString)&&h.printed(c);return h});(c.inspect||c.asString)&&h.printed(c);return Promise.resolve(h)};dh.EvalResult=PG;var MD=dh.defaultTopLevelVarRecorderName;dh.defaultTopLevelVarRecorderName=MD;dh.defaultTopLevelVarRecorderName=
MD;dh.getGlobal=xo;dh.getGlobal=xo;dh.runEval=Ex;dh.runEval=Ex;dh.syncEval=Hz;dh.syncEval=Hz;var Rja=Object.freeze({__proto__:null,defaultTopLevelVarRecorderName:MD,getGlobal:xo,runEval:Ex,syncEval:Hz}),ri=lively.FreezerRuntime.recorderFor("lively.vm/lib/esm-eval.js");ri.ensureImportsAreImported=function(c,h,f){var k,n,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){return 1==e.nextAddress?(k=ri.parse(h),n=k.body,b=n.filter(function(m){return"ImportDeclaration"===m.type}),e.yield(Promise.all(b.map(function(m){return c.normalize(m.source.value,
f).then(function(a){m.source.value=a;return c.get(a)||c.import(a)})})).catch(function(m){console.error("Error ensuring imports: "+m.message);throw m;}),2)):e.return(ri.stringify(k))})};ri.hasUnimportedImports=function(c,h,f){h=ri.parse(h).body.filter(function(k){return"ImportDeclaration"===k.type});return 0<ri.arr.uniq(h.map(function(k){return k.source.value})).filter(Boolean).filter(function(k){return!c.get(c.decanonicalize(k,f))}).length};ri.babelTranspilerForAsyncAwaitCode=function(c,h,f,k){return function(n,
b){b=Object.assign({sourceMap:void 0,inputSourceMap:void 0,filename:f,code:!0,ast:!1},b);n=h.transform("(async function(__rec) {\n"+n+"\n}).call(this);",b).code;return n=n.replace(/\}\)\.call\(undefined\);$/,"}).call(this)")}};ri.babelPluginTranspilerForAsyncAwaitCode=function(c,h,f,k){return function(n,b){var e=c.babelOptions||{},m=[];m.push(h.presetES2015);e.stage3&&m.push({plugins:h.pluginsStage3});e.stage2&&m.push({plugins:h.pluginsStage2});e.stage1&&m.push({plugins:h.pluginsStage1});b=Object.assign({sourceMap:void 0,
inputSourceMap:void 0,filename:f,babelrc:!1,presets:m,moduleIds:!1,code:!0,ast:!1},b);n=h.babel.transform("(async function(__rec) {\n"+n+"\n}).call(this);",b).code;return n=n.replace(/\}\)\.call\(undefined\);$/,"}).call(this)")}};ri.getEs6Transpiler=function(c,h,f){if(h.transpiler)return h.transpiler;if(!h.es6Transpile)return null;if("babel"===c.transpiler){var k=c.global[c.transpiler]||c.get(c.decanonicalize(c.transpiler));return k?ri.babelTranspilerForAsyncAwaitCode(c,k,h.targetModule,f):c.import(c.transpiler).then(function(e){return ri.babelTranspilerForAsyncAwaitCode(c,
e,h.targetModule,f)})}if("plugin-babel"===c.transpiler){k=c.decanonicalize("plugin-babel").split("/").slice(0,-1).concat("systemjs-babel-browser.js").join("/");var n=c.get(k);return n?ri.babelPluginTranspilerForAsyncAwaitCode(c,n,h.targetModule,f):c.import(k).then(function(e){return ri.babelPluginTranspilerForAsyncAwaitCode(c,e,h.targetModule,f)})}if("lively.transpiler"===c.transpiler){var b=new (c.get(c.decanonicalize("lively.transpiler")).default)(c,h.targetModule,f);return function(e,m){return b.transpileDoit(e,
m)}}throw Error("Sorry, currently only babel is supported as es6 transpiler for runEval!");};ri.runEval=jm;ri.evalEnd=function(c,h,f,k){c.get("@lively-env").evaluationEnd(f.targetModule);c.debug&&console.log("[lively.module] runEval in module "+f.targetModule+" done");ri.emit("lively.vm/doitresult",{code:h,result:k,waitForPromise:f.waitForPromise,targetModule:f.targetModule},Date.now(),c);return k};ri.parse=ak;ri.nodes=Pw;ri.stringify=Uh;ri.emit=ft;var PL=ri.nodes;ri.funcCall=PL.funcCall;ri.member=
PL.member;ri.id=PL.id;ri.literal=PL.literal;ri.arr=$f;ri.vmRunEval=Ex;ri.runEval=jm;ri.runEval=jm;var Sja=Object.freeze({__proto__:null,runEval:jm}),rk=lively.FreezerRuntime.recorderFor("lively.vm/lib/eval-strategies.js");rk.obj=Ag;var ND=function(){};ND.prototype.runEval=function(c,h){var f=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){return k.return(Promise.reject("runEval(source, options) not yet implemented for "+f.constructor.name))})};ND.prototype.keysOfObject=function(c,
h){var f=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){return k.return(Promise.reject("keysOfObject(prefix, options) not yet implemented for "+f.constructor.name))})};rk.EvalStrategy=ND;var UA=function(){return rk.EvalStrategy.apply(this,arguments)||this};$jscomp.inherits(UA,rk.EvalStrategy);UA.prototype.runEval=function(c,h){return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){return f.return(Promise.resolve().then(function(){try{return Promise.resolve({value:eval(c)})}catch(k){return{isError:!0,
value:k}}}))})};UA.prototype.keysOfObject=function(c,h){var f=this,k;return $jscomp.asyncExecutePromiseGeneratorProgram(function(n){if(1==n.nextAddress)return n.yield(lively.vm.completions.getCompletions(function(b){return f.runEval(b,h)},c),2);k=n.yieldResult;return n.return({completions:k.completions,prefix:k.startLetters})})};rk.SimpleEvalStrategy=UA;var By=function(){return rk.EvalStrategy.apply(this,arguments)||this};$jscomp.inherits(By,rk.EvalStrategy);By.prototype.normalizeOptions=function(c){if(!c.targetModule)throw Error("runEval called but options.targetModule not specified!");
return Object.assign({sourceURL:c.targetModule+"_doit_"+Date.now()},c)};By.prototype.runEval=function(c,h){var f=this,k,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){h=f.normalizeOptions(h);k=h.System||lively.modules.System;n={};k.config({meta:(n[h.targetModule]={format:"esm"},n)});return b.return(lively.vm.runEval(c,h))})};By.prototype.keysOfObject=function(c,h){var f;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){if(1==k.nextAddress)return k.yield(lively.vm.completions.getCompletions(function(n){return lively.vm.runEval(n,
h)},c),2);f=k.yieldResult;return k.return({completions:f.completions,prefix:f.startLetters})})};rk.LivelyVmEvalStrategy=By;var Cy=function(){return rk.LivelyVmEvalStrategy.apply(this,arguments)||this};$jscomp.inherits(Cy,rk.LivelyVmEvalStrategy);Cy.prototype.sourceForRemote=function(c,h,f){var k=rk.obj.isString(f.context)?f.context:!1;f=rk.obj.dissoc(f,["systemInterface","System","context","classTransform"]);return"\n(function() {\n  var arg = "+JSON.stringify(h)+",\n      options = "+JSON.stringify(f)+
';\n  if (typeof lively === "undefined" || !lively.vm) {\n    return Promise.resolve({\n      isEvalResult: true,\n      isError: true,\n      value: \'lively.vm not available!\'\n    });\n  }\n  var hasSystem = typeof System !== "undefined"\n  options.context = '+k+';\n  options.classTransform = lively.classes.classToFunctionTransform;\n  if (!options.context) {\n    options.context = hasSystem\n      ? System.global\n      : typeof window !== "undefined"\n          ? window\n          : typeof global !== "undefined"\n              ? global\n              : typeof self !== "undefined" ? self : this;\n  }\n  async function evalFunction(source, options) {\n    if (hasSystem) {\n      var conf = {meta: {}}; conf.meta[options.targetModule] = {format: "esm"};\n      System.config(conf);\n    } else {\n      options = Object.assign({topLevelVarRecorderName: "GLOBAL"}, options);\n      delete options.targetModule;\n    }\n    let res = await lively.vm.runEval(source, options);\n    try {\n       JSON.stringify(res.value);\n    } catch(e) {\n       res.value = String(res.value);\n    }\n    return res;\n  }\n  function keysOfObjectFunction(prefix, options) {\n    return lively.vm.completions.getCompletions(code => evalFunction(code, options), prefix)\n      .then(result => ({isEvalResult: true, completions: result.completions, prefix: result.startLetters}));\n  }\n  return '+
("eval"===c?"evalFunction":"keysOfObjectFunction")+"(arg, options)\n    .catch(err => ({isEvalResult: true, isError: true, value: String(err.stack || err)}));\n})();\n"};Cy.prototype.runEval=function(c,h){var f=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){return k.return(f.remoteEval(f.sourceForRemote("eval",c,h),h))})};Cy.prototype.keysOfObject=function(c,h){var f=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){return k.return(f.remoteEval(f.sourceForRemote("keysOfObject",
c,h),h))})};Cy.prototype.remoteEval=function(c,h){var f=this,k,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){if(1==b.nextAddress)return b.setCatchFinallyBlocks(2),b.yield(f.basicRemoteEval(c,h),4);if(2!=b.nextAddress)return k=b.yieldResult,b.return("string"===typeof k?JSON.parse(k):k);n=b.enterCatchBlock();return b.return({isError:!0,value:"Remote eval failed: "+(k||n)})})};Cy.prototype.basicRemoteEval=function(c,h){return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){throw Error("Not yet implemented");
})};rk.RemoteEvalStrategy=Cy;var rv=function(c){var h=rk.RemoteEvalStrategy.call(this)||this;h.url=c||h.constructor.defaultURL;return h};$jscomp.inherits(rv,rk.RemoteEvalStrategy);rv.prototype.normalizeOptions=function(c){c=rk.RemoteEvalStrategy.prototype.normalizeOptions.call(this,c);return Object.assign({serverEvalURL:this.url},c,{context:null})};rv.prototype.basicRemoteEval=function(c,h){var f=this,k;return $jscomp.asyncExecutePromiseGeneratorProgram(function(n){return 1==n.nextAddress?(h=f.normalizeOptions(h),
k="basicRemoteEval_"+(System.get("@system-env").node?"node":"web"),n.yield(f[k]({method:"POST",body:c},h.serverEvalURL),2)):n.return(n.yieldResult)})};rv.prototype.basicRemoteEval_web=function(c,h){var f,k,n,b,e,m;return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){switch(a.nextAddress){case 1:f=$jscomp.makeIterator(h.match(/[^:]+:\/\/[^\/]+/)||[h]);k=f.next().value;n=System.get("@system-env").worker?window.location:document.location;if(b=n.origin!==k)c.headers=Object.assign({},c.headers,
{pragma:"no-cache","cache-control":"no-cache","x-lively-proxy-request":h}),h=n.origin;a.setCatchFinallyBlocks(2);return a.yield(window.fetch(h,c),4);case 4:e=a.yieldResult;a.leaveTryBlock(3);break;case 2:throw m=a.enterCatchBlock(),Error("Cannot reach server at "+h+": "+m.message);case 3:if(!e.ok)throw Error("Server at "+h+": "+e.statusText);return a.return(e.text())}})};rv.prototype.basicRemoteEval_node=function(c,h){var f,k,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){f=System._nodeRequire("url").parse;
k=System._nodeRequire(h.startsWith("https:")?"https":"http");n=Object.assign({method:c.method||"GET"},f(h));return b.return(new Promise(function(e,m){var a=k.request(n,function(g){g.setEncoding("utf8");var l="";g.on("data",function(r){return l+=r});g.on("end",function(){return e(l)});g.on("error",function(r){return m(r)})});a.on("error",function(g){return m(g)});a.end(c.body)}))})};$jscomp.global.Object.defineProperties(rv,{defaultURL:{configurable:!0,enumerable:!0,get:function(){return"http://localhost:3000/lively"}}});
rk.HttpEvalStrategy=rv;var OD=function(c,h){var f=rk.RemoteEvalStrategy.call(this)||this;f.l2lClient=c;f.targetId=h;return f};$jscomp.inherits(OD,rk.RemoteEvalStrategy);OD.prototype.basicRemoteEval=function(c,h){var f=this,k,n,b,e,m;return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){if(1==a.nextAddress)return k=f,n=k.l2lClient,b=k.targetId,a.yield(n.sendToAndWait(b,"remote-eval",{source:c},{ackTimeout:h.ackTimeout||3500}),2);e=a.yieldResult;(m=e.data)&&m.value&&m.value.isEvalResult&&(m=
m.value);return a.return(m)})};rk.L2LEvalStrategy=OD;rk.EvalStrategy=ND;rk.EvalStrategy=ND;rk.SimpleEvalStrategy=UA;rk.SimpleEvalStrategy=UA;rk.LivelyVmEvalStrategy=By;rk.LivelyVmEvalStrategy=By;rk.HttpEvalStrategy=rv;rk.HttpEvalStrategy=rv;rk.L2LEvalStrategy=OD;rk.L2LEvalStrategy=OD;var QG=Object.freeze({__proto__:null,RemoteEvalStrategy:Cy,EvalStrategy:ND,SimpleEvalStrategy:UA,LivelyVmEvalStrategy:By,HttpEvalStrategy:rv,L2LEvalStrategy:OD});Da("bA",QG);var ql=lively.FreezerRuntime.recorderFor("lively.vm/index.js");
ql.runEval=Cp;ql.syncEval=Tr;ql.completions=LG;ql.completions=LG;ql.completions=LG;ql.globalEval=Rja;ql.esmEval=Sja;ql.defaultTopLevelVarRecorderName=MD;ql.defaultTopLevelVarRecorderName=MD;ql.defaultClassToFunctionConverterName="initializeES6ClassForLively";ql.defaultClassToFunctionConverterName="initializeES6ClassForLively";ql.evalCodeTransform=Xo;ql.evalCodeTransform=Xo;ql.evalCodeTransformOfSystemRegisterSetters=mq;ql.evalCodeTransformOfSystemRegisterSetters=mq;ql.runEval=Cp;ql.runEval=Cp;ql.syncEval=
Tr;ql.syncEval=Tr;ql.evalStrategies=QG;ql.evalStrategies=QG;ql.evalStrategies=QG;var X5=Object.freeze({__proto__:null,completions:LG,defaultTopLevelVarRecorderName:MD,defaultClassToFunctionConverterName:"initializeES6ClassForLively",evalCodeTransform:Xo,evalCodeTransformOfSystemRegisterSetters:mq,runEval:Cp,syncEval:Tr,evalStrategies:QG});Da("bz",X5);var bj=lively.FreezerRuntime.recorderFor("lively.classes/source-descriptors.js");bj.string=pi;bj.arr=$f;bj.parse=ak;bj.query=Kt;bj.runEval=Cp;bj.objMetaSym=
Symbol.for("lively-object-meta");bj.moduleSym=Symbol.for("lively-module-meta");bj.descriptorCache=new Map;var PD=function(c,h){c&&h?this.update(h,c):this.reset()};PD.prototype.reset=function(){this._sourceLocation=null;this._source="";this._ast=null;this._moduleSource="";this._declaredAndUndeclaredNames=this._moduleImports=this._moduleScope=this._moduleAst=null};PD.prototype.update=function(c,h){this._moduleSource===c&&h&&this._sourceLocation&&h.start===this._sourceLocation.start&&h.end===this._sourceLocation.end||
(this.reset(),this._moduleSource=c,this._sourceLocation=h)};PD.prototype.changeSource=function(c){var h=this.moduleSource,f=this.sourceLocation,k=f.start;f=f.end;h=h.slice(0,k)+c+h.slice(f);this.update(h,{start:k,end:k+c.length});this._source=c;return this};PD.prototype.toString=function(){var c=bj.string.truncate(this._source||"NO SOURCE",35).replace(/\n/g,"");return this.constructor.name+"("+c+")"};$jscomp.global.Object.defineProperties(PD.prototype,{sourceLocation:{configurable:!0,enumerable:!0,
get:function(){if(!this._sourceLocation)throw Error("_sourceLocation not defined");return this._sourceLocation}},moduleSource:{configurable:!0,enumerable:!0,get:function(){if(!this._moduleSource)throw Error("_moduleSource not defined!");return this._moduleSource}},moduleAst:{configurable:!0,enumerable:!0,get:function(){return this._moduleAst||(this._moduleAst=bj.parse(this.moduleSource,{withComments:!0}))}},moduleScope:{configurable:!0,enumerable:!0,get:function(){return this._moduleScope||(this._moduleScope=
bj.query.topLevelDeclsAndRefs(this.ast).scope)}},moduleImports:{configurable:!0,enumerable:!0,get:function(){return this._moduleImports||(this._moduleImports=bj.query.imports(this.moduleScope))}},ast:{configurable:!0,enumerable:!0,get:function(){if(this._ast)return this._ast;var c=bj.parse(this.source,{withComments:!0}).body[0];"ExpressionStatement"===c.type&&(c=c.expression);return this._ast=c}},source:{configurable:!0,enumerable:!0,get:function(){if(this._source)return this._source;var c=this.sourceLocation;
return this._source=this.moduleSource.slice(c.start,c.end)}},type:{configurable:!0,enumerable:!0,get:function(){return this.ast.type}},declaredAndUndeclaredNames:{configurable:!0,enumerable:!0,get:function(){if(this._declaredAndUndeclaredNames)return this._declaredAndUndeclaredNames;var c=this.ast,h=bj.query.topLevelDeclsAndRefs(this.moduleAst).declaredNames,f=bj.arr.uniq(this.moduleImports.map(function(n){return n.local})),k=bj.arr.withoutAll(h,f);c=bj.arr.withoutAll(bj.query.findGlobalVarRefs(c).map(function(n){return n.name}),
h);return this._declaredAndUndeclaredNames={declaredNames:h,declaredImports:f,localDeclaredNames:k,undeclaredNames:c}}}});bj.SourceDescriptor=PD;var Dq=function(c,h){this.obj=c;this.System=h;this.reset()};Dq.forObjectWithModuleSource=function(c,h,f){c=this.for(c,f);c.ensureSourceDescriptor(c.sourceLocation,h);return c};Dq.for=function(c,h){var f=bj.descriptorCache.get(c);f||(f=new this(c,h),bj.descriptorCache.set(c,f));return f};Dq.prototype.reset=function(){this._source="";this._ast=this._sourceLocation=
null;this._moduleSource="";this._declaredAndUndeclaredNames=this._moduleImports=this._moduleScope=this._moduleAst=null};Dq.prototype.resetIfChanged=function(){var c=this.meta.moduleSource;this._moduleSource&&c&&this._moduleSource!==c&&this.reset()};Dq.prototype.changeSourceSync=function(c){var h=this.System;this._basicChangeSource(c);this.module.changeSource(this.moduleSource,{doSave:!0});c=bj.runEval(c,{sync:!0,targetModule:this.module.id,System:h});if(c.isError)throw c.value;return this};Dq.prototype.changeSource=
function(c){var h=this,f,k;return $jscomp.asyncExecutePromiseGeneratorProgram(function(n){return 1==n.nextAddress?(f=h,k=f.module,n.yield(k.changeSourceAction(function(b){if(b!==h.moduleSource)throw Error("source of module "+k.id+" and source of "+h+" don't match");h._basicChangeSource(c);return h.moduleSource}),2)):n.return(h)})};Dq.prototype._modifiedSource=function(c){var h=this.moduleSource,f=this.sourceLocation,k=f.start;f=f.end;return{moduleSource:h.slice(0,k)+c+h.slice(f),sourceLocation:{start:k,
end:k+c.length}}};Dq.prototype._renamedSource=function(c){var h=this.ast,f=h.type,k=h.id;h=k.start;k=k.end;if("ClassDeclaration"!==f)throw Error("Don't know how to rename "+f);return this._modifiedSource(this.source.slice(0,h)+c+this.source.slice(k))};Dq.prototype._basicChangeSource=function(c){var h=this.meta,f=this._modifiedSource(c),k=f.moduleSource;f=f.sourceLocation;this.reset();this.meta=Object.assign({},h,{moduleSource:k},f);this._sourceLocation=f;this._moduleSource=k;this._source=c;return this};
Dq.prototype.toString=function(){var c=bj.string.truncate(this.source||String(this.obj),35).replace(/\n/g,"");try{var h=this.module.shortName()}catch(f){h="NO MODULE!"}return this.constructor.name+"("+c+" in "+h+")"};$jscomp.global.Object.defineProperties(Dq.prototype,{System:{configurable:!0,enumerable:!0,get:function(){return this._System||System},set:function(c){this._System=c}},module:{configurable:!0,enumerable:!0,get:function(){var c=this.obj,h=this.System;if(!c[bj.moduleSym])throw Error("runtime object of source descriptor has no module data");
var f=c[bj.moduleSym];c=f.package.name;f=f.pathInPackage;c=f.includes("://")?f:c+"/"+f;h=this.System._scripting.module(h,c);h._frozenModule||h._source||!this.moduleSource||h.setSource(this.moduleSource);return h}},meta:{configurable:!0,enumerable:!0,get:function(){var c=this.obj;if(!c[bj.objMetaSym])throw Error("runtime object of source descriptor has no lively meta data");return c[bj.objMetaSym]},set:function(c){this.obj[bj.objMetaSym]=c;c.hasOwnProperty("start")&&c.hasOwnProperty("end")&&(this._sourceLocation=
{start:c.start,end:c.end});c.hasOwnProperty("moduleSource")&&(this._moduleSource=c.moduleSource)}},sourceLocation:{configurable:!0,enumerable:!0,get:function(){this.resetIfChanged();if(this._sourceLocation)return this._sourceLocation;var c=this.meta,h=c.start;c=c.end;if(void 0===h||void 0===c)throw Error("lively meta data has no start/end");return this._sourceLocation={start:h,end:c}}},moduleSource:{configurable:!0,enumerable:!0,get:function(){this.resetIfChanged();if(this._moduleSource)return this._moduleSource;
var c=this.meta.moduleSource;if(void 0===c)throw Error("lively meta data has no moduleSource");return this._moduleSource=c}},moduleAst:{configurable:!0,enumerable:!0,get:function(){this.resetIfChanged();return this._moduleAst||(this._moduleAst=bj.parse(this.moduleSource,{withComments:!0}))}},moduleScope:{configurable:!0,enumerable:!0,get:function(){this.resetIfChanged();return this._moduleScope||(this._moduleScope=bj.query.topLevelDeclsAndRefs(this.moduleAst).scope)}},moduleImports:{configurable:!0,
enumerable:!0,get:function(){this.resetIfChanged();return this._moduleImports||(this._moduleImports=bj.query.imports(this.moduleScope))}},declaredAndUndeclaredNames:{configurable:!0,enumerable:!0,get:function(){this.resetIfChanged();if(this._declaredAndUndeclaredNames)return this._declaredAndUndeclaredNames;var c=this.ast,h=bj.query.topLevelDeclsAndRefs(this.moduleAst,{jslintGlobalComment:!0}).declaredNames,f=bj.arr.uniq(this.moduleImports.map(function(n){return n.local})),k=bj.arr.withoutAll(h,f);
c=bj.arr.withoutAll(bj.query.findGlobalVarRefs(c).map(function(n){return n.name}),h);return this._declaredAndUndeclaredNames={declaredNames:h,declaredImports:f,localDeclaredNames:k,undeclaredNames:c}}},source:{configurable:!0,enumerable:!0,get:function(){this.resetIfChanged();if(this._source)return this._source;var c=this.sourceLocation;return this._source=this.moduleSource.slice(c.start,c.end)}},ast:{configurable:!0,enumerable:!0,get:function(){this.resetIfChanged();if(this._ast)return this._ast;
var c=bj.parse(this.source,{withComments:!0}).body[0];"ExpressionStatement"===c.type&&(c=c.expression);return this._ast=c}},type:{configurable:!0,enumerable:!0,get:function(){return this.ast.type}},name:{configurable:!0,enumerable:!0,get:function(){if("ClassDeclaration"===this.type){var c=this.ast.id;return this.source.slice(c.start,c.end)}return"unknown"}}});Da("bK",Dq);bj.RuntimeSourceDescriptor=Dq;var Gf=lively.FreezerRuntime.recorderFor("lively.classes/util.js");Gf.superclasses=yo;Gf.getClassHierarchy=
gt;Gf.withSuperclasses=nC;Gf.inheritsFrom=qn;Gf.changeClass=Lu;Gf.isClass=nq;Gf.lexicalClassMembers=oC;Gf.runtimeClassMembers=ht;Gf.runtimeClassMembersInProtoChain=function(c){return Gf.arr.uniq(Gf.arr.flatmap(Gf.arr.without(Gf.withSuperclasses(c),Object),function(h){return Gf.runtimeClassMembers(h)}))};Gf.runtimeNonStaticMembers=function(c){var h=c.prototype,f=Gf.obj.getOwnPropertyDescriptors(h);return Gf.arr.withoutAll(Object.keys(f),["constructor"]).map(function(k){var n=f[k],b="function"===typeof n.value?
"method":"get"in n?"get":"set"in n?"set":"unknown";return{static:!1,name:k,value:"method"===b?n.value:"get"===b?n.get:"set"===b?n.set:null,kind:b,owner:h}})};Gf.runtimeNonstaticClassMembersInProtoChain=function(c){return Gf.arr.uniq(Gf.arr.flatmap(Gf.arr.without(Gf.withSuperclasses(c),Object),function(h){return Gf.runtimeNonStaticMembers(h)}))};Gf.runtimeStaticClassMembers=kw;Gf.runtimeStaticClassMembersInProtoChain=it;Gf.arr=$f;Gf.obj=Ag;Gf.Path=Ah;Gf.RuntimeSourceDescriptor=Dq;Gf.superclasses=yo;
Gf.superclasses=yo;var QL=Symbol.for("lively-instance-initialize");Gf.initializeSymbol=QL;Gf.initializeSymbol=QL;Gf.initializeSymbol=QL;var AT=Symbol.for("lively-instance-restorer");Gf.instanceRestorerSymbol=AT;Gf.instanceRestorerSymbol=AT;Gf.instanceRestorerSymbol=AT;var RL=Symbol.for("lively-instance-superclass");Gf.superclassSymbol=RL;Gf.superclassSymbol=RL;Gf.superclassSymbol=RL;var SL=Symbol.for("lively-module-meta");Gf.moduleMetaSymbol=SL;Gf.moduleMetaSymbol=SL;Gf.moduleMetaSymbol=SL;var TL=
Symbol.for("lively-object-meta");Gf.objMetaSymbol=TL;Gf.objMetaSymbol=TL;Gf.objMetaSymbol=TL;var UL=Symbol.for("lively-klass-changes-subscriber");Gf.moduleSubscribeToToplevelChangesSym=UL;Gf.moduleSubscribeToToplevelChangesSym=UL;Gf.moduleSubscribeToToplevelChangesSym=UL;Gf.getClassHierarchy=gt;Gf.getClassHierarchy=gt;Gf.withSuperclasses=nC;Gf.withSuperclasses=nC;Gf.inheritsFrom=qn;Gf.inheritsFrom=qn;Gf.changeClass=Lu;Gf.changeClass=Lu;Gf.isClass=nq;Gf.isClass=nq;Gf.lexicalClassMembers=oC;Gf.lexicalClassMembers=
oC;Gf.runtimeClassMembers=ht;Gf.runtimeClassMembers=ht;Gf.runtimeStaticClassMembers=kw;Gf.runtimeStaticClassMembers=kw;Gf.runtimeStaticClassMembersInProtoChain=it;Gf.runtimeStaticClassMembersInProtoChain=it;var BT=Da("bL",function(){function c(e){return e.replace(b,function(m,a){return a[a.length-1].toUpperCase()})}var h="break case catch class const continue debugger default delete do else enum export extends false finally for function if implements import in instanceof interface let new null package private protected public return static switch super this throw true try typeof undefined var void while with yield".split(" "),
f={"~":"_tilde_","`":"_backtick_","!":"_exclamationmark_","@":"_at_","#":"_pound_","%":"_percent_","^":"_carat_","&":"_amperstand_","*":"_asterisk_","(":"_leftparen_",")":"_rightparen_","+":"_plus_","=":"_equals_","{":"_leftcurly_","}":"_rightcurly_","[":"_leftsquare_","]":"_rightsquare_","|":"_pipe_","-":"_dash_","\\":"_backslash_",'"':"_doublequote_","'":"_singlequote_",":":"_colon_",";":"_semicolon_","<":"_leftangle_",">":"_rightangle_",",":"_comma_",".":"_period_","?":"_questionmark_","/":"_forwardslash_",
"\t":"_tab_","\n":"_newline_","\r":"_carriagereturn_"},k={0:"_zero_",1:"_one_",2:"_two_",3:"_three_",4:"_four_",5:"_five_",6:"_siz_",7:"_seven_",8:"_eight_",9:"_nine_"},n=function(e){return f[e]||"ASCII_"+e.charCodeAt(0)},b=/([\s-]+.)/g;return function(e){e=c(e);return 0<=h.indexOf(e)?e:0===e.length?"_null_":e.replace(/^\d/,function(m){return k[m]}).replace(/[^\w\$_]/g,n)}}());Gf.toJsIdentifier=BT;Gf.toJsIdentifier=BT;Gf.toJsIdentifier=BT;var ij=lively.FreezerRuntime.recorderFor("lively.classes/properties.js");
ij.hasManagedProperties=function(c){return c.hasOwnProperty(ij.defaultPropertiesKey)};ij.prepareClassForManagedPropertiesAfterCreation=Ur;ij.prepareClassForProperties=function(c,h,f){ij.ensurePropertyInitializer(c);var k=h.valueStoreProperty,n=h.defaultGetter,b=h.defaultSetter,e=c.prototype;Object.keys(f).forEach(function(m){var a=f[m],g=e.hasOwnProperty(m)&&e.__lookupGetter__(m);if(!g||g._wasGenerated)g=a.get||"function"===typeof n&&function(){return n.call(this,m)}||function(){return this[k][m]},
g._wasGenerated=!0,e.__defineGetter__(m,g);g=e.hasOwnProperty(m)&&e.__lookupSetter__(m);if(!g||g._wasGenerated)if(a.hasOwnProperty("set")||!a.readOnly)a=a.set||"function"===typeof b&&function(l){b.call(this,m,l)}||function(l){this[k][m]=l},a._wasGenerated=!0,e.__defineSetter__(m,a)})};ij.ensurePropertyInitializer=function(c){Object.defineProperty(c.prototype,"propertiesAndPropertySettings",{enumerable:!1,configurable:!0,writable:!0,value:function(){var h=this.constructor,f=h[ij.propertiesAndSettingsCacheSym];
if(f)if(f.classHierarchy!=ij.getClassHierarchy(h)){var k=ij.propertiesAndSettingsInHierarchyOf(h);f=k.properties;k=k.propertySettings;h[ij.propertiesAndSettingsCacheSym]={properties:f,propertySettings:k,order:ij.obj.sortKeysWithBeforeAndAfterConstraints(f),classHierarchy:ij.getClassHierarchy(h)};ij.prepareClassForProperties(h,k,f)}else return f;return h[ij.propertiesAndSettingsCacheSym]||ij.propertiesAndSettingsInHierarchyOf(h)}});Object.defineProperty(c.prototype,"initializeProperties",{enumerable:!1,
configurable:!0,writable:!0,value:function(h){var f=this.propertiesAndPropertySettings();ij.prepareInstanceForProperties(this,f.propertySettings,f.properties,h,f.order);return this}})};ij.propertiesAndSettingsInHierarchyOf=function(c){for(var h=Object.assign({},ij.defaultPropertySettings),f={},k=ij.obj.valuesInPropertyHierarchy(c,"propertySettings"),n=ij.obj.valuesInPropertyHierarchy(c,"properties"),b=0;b<k.length;b++){var e=k[b];e&&"object"===typeof e&&Object.assign(h,e)}for(b=0;b<n.length;b++)if(k=
n[b],"object"!==typeof k)console.error("[initializeProperties] "+c+" encountered property declaration that is not a JS object: "+k);else for(var m in k)f.hasOwnProperty(m)?Object.assign(f[m],k[m]):f[m]=k[m];return{properties:f,propertySettings:h}};ij.prepareInstanceForProperties=function(c,h,f,k,n){var b=h.valueStoreProperty;n=n||ij.obj.sortKeysWithBeforeAndAfterConstraints(f);h=[];var e={};c.hasOwnProperty(b)||(c[b]={});for(var m=0;m<n.length;m++){var a=n[m],g=f[a],l=g.derived,r=!!g.foldable,v=g.hasOwnProperty("defaultValue")?
g.defaultValue:void 0;Array.isArray(v)&&(v=v.slice());l||r||(c[b][a]=v);var y=void 0;g.hasOwnProperty("initialize")?(y=e[a]={initialize:v},h.push(a)):l&&void 0!==v?(y=e[a]={derived:v},h.push(a)):r&&void 0!==v&&(y=e[a]={folded:v},h.push(a));k&&a in k&&(g.readOnly?console.warn("Trying to initialize read-only property "+a+" in "+c+", skipping setting value"):(y||(y=e[a]={},h.push(a)),y.value=k[a]))}for(m=0;m<h.length;m++)k=h[m],n=e[k],b=n.hasOwnProperty("value"),n.hasOwnProperty("initialize")?(f[k].initialize.call(c,
b?n.value:n.initialize),b&&(c[k]=n.value)):n.hasOwnProperty("derived")?c[k]=b?n.value:n.derived:n.hasOwnProperty("folded")?c[k]=b?n.value:n.folded:b&&(c[k]=n.value)};ij.obj=Ag;ij.getClassHierarchy=gt;ij.defaultPropertiesSettingKey="propertySettings";ij.defaultPropertiesKey="properties";ij.defaultInstanceInitializerMethod="initializeProperties";ij.propertiesAndSettingsCacheSym=Symbol.for("lively.classes-properties-and-settings");ij.defaultPropertySettings={defaultSetter:null,defaultGetter:null,valueStoreProperty:"_state"};
ij.prepareClassForManagedPropertiesAfterCreation=Ur;ij.prepareClassForManagedPropertiesAfterCreation=Ur;var og=lively.FreezerRuntime.recorderFor("lively.classes/runtime.js");og.adoptObject=Vr;og.setSuperclass=lw;og.installValueDescriptor=function(c,h,f){f=Object.assign(f,og.defaultPropertyDescriptorForValue);f.value.displayName=f.key;if(f.needsDeclaringClass){var k=f.value.originalFunction||f.value;f.value=Object.assign(function(){return k.call.apply(k,[this,h].concat($jscomp.arrayFromIterable(arguments)))},
{originalFunction:k,toString:function(){return k.toString()},displayName:f.key})}Object.defineProperty(c,f.key,f)};og.installGetterSetterDescriptor=function(c,h){h=Object.assign(h,og.defaultPropertyDescriptorForGetterSetter);Object.defineProperty(c,h.key,h)};og.installMethods=function(c,h,f){f&&f.forEach(function(e){e.value?og.installValueDescriptor(c,c,e):og.installGetterSetterDescriptor(c,e)});h&&h.forEach(function(e){e.value?og.installValueDescriptor(c.prototype,c,e):og.installGetterSetterDescriptor(c.prototype,
e)});c.prototype[og.initializeSymbol]?Object.getOwnPropertySymbols(c.prototype).includes(og.initializeSymbol)&&c.prototype[og.initializeSymbol].isDefaultInitializer&&c[og.superclassSymbol].prototype[og.initializeSymbol]&&delete c.prototype[og.initializeSymbol]:(Object.defineProperty(c.prototype,og.initializeSymbol,{enumerable:!1,configurable:!0,writable:!0,value:function(){}}),c.prototype[og.initializeSymbol].isDefaultInitializer=!0,c.prototype[og.initializeSymbol].displayName="lively-initialize");
h=h.map(function(e){return e.key}).concat(["constructor","arguments","caller"]);for(var k=Object.getOwnPropertyNames(c.prototype),n=0;n<k.length;n++){var b=k[n];h.includes(b)||delete c.prototype[b]}f=f.map(function(e){return e.key}).concat(["length","name","prototype","arguments","caller"]);h=Object.getOwnPropertyNames(c);for(k=0;k<h.length;k++)n=h[k],f.includes(n)||delete c[n]};og.ensureInitializeStub=function(c){c===Object||c.prototype[og.initializeSymbol]||(Object.defineProperty(c.prototype,og.initializeSymbol,
{enumerable:!1,configurable:!0,writable:!0,value:function(){c.apply(this,arguments)}}),c.prototype[og.initializeSymbol].displayName="lively-initialize-stub")};og.initializeClass=dc;og.prepareClassForManagedPropertiesAfterCreation=Ur;og.superclassSymbol=RL;og.moduleSubscribeToToplevelChangesSym=UL;og.moduleMetaSymbol=SL;og.objMetaSymbol=TL;og.initializeSymbol=QL;og.constructorArgMatcher=/\([^\\)]*\)/;og.defaultPropertyDescriptorForGetterSetter={enumerable:!1,configurable:!0};og.defaultPropertyDescriptorForValue=
{enumerable:!1,configurable:!0,writable:!0};var VL="function"===typeof Object.setPrototypeOf?function(c,h){return Object.setPrototypeOf(c,h)}:function(c,h){return c.__proto__=h};og.setPrototypeOf=VL;og.setPrototypeOf=VL;og.setPrototypeOf=VL;og.adoptObject=Vr;og.adoptObject=Vr;og.setSuperclass=lw;og.setSuperclass=lw;og.initializeClass=dc;og.initializeClass=dc;og.initializeClass._get=function n(h,f,k){null===h&&(h=Function.prototype);var b=Object.getOwnPropertyDescriptor(h,f);if(void 0===b)return h=
Object.getPrototypeOf(h),null===h?void 0:n(h,f,k);if("value"in b)return b.value;f=b.get;return void 0===f?void 0:f.call(k)};og.initializeClass._set=function e(f,k,n,b){var m=Object.getOwnPropertyDescriptor(f,k);void 0===m?(f=Object.getPrototypeOf(f),null!==f&&e(f,k,n,b)):"value"in m&&m.writable?m.value=n:(k=m.set,void 0!==k&&k.call(b,n));return n};var QD=Object.freeze({__proto__:null,setPrototypeOf:VL,adoptObject:Vr,setSuperclass:lw,initializeClass:dc}),ih=lively.FreezerRuntime.recorderFor("lively.bindings/index.js");
ih.connect=rl;ih.disconnect=zo;ih.disconnectAll=jt;ih.once=$q;ih.signal=Wl;ih.callWhenNotNull=pC;ih.callWhenPathNotNull=Jf;ih.noUpdate=mw;ih.string=pi;ih.arr=$f;ih.Closure=Rj;ih.obj=Ag;ih.stringifyFunctionWithoutToplevelRecorder=Ku;ih.connect=rl;ih.connect=rl;ih.disconnect=zo;ih.disconnect=zo;ih.disconnectAll=jt;ih.disconnectAll=jt;ih.once=$q;ih.once=$q;ih.signal=Wl;ih.signal=Wl;ih.noUpdate=mw;ih.noUpdate=mw;var WL=function(f){var k=lively.FreezerRuntime.recorderFor("lively.bindings/index.js"),n=
k.hasOwnProperty("AttributeConnection")&&"function"===typeof k.AttributeConnection?k.AttributeConnection:k.AttributeConnection=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return dc(n,f,[{key:Symbol.for("lively-instance-initialize"),value:function(b,e,m,a,g){this.init(b,e,m,a,g)}},{key:"init",value:function(b,e,m,a,g){this.doNotSerialize=["isActive","converter","updater","varMapping"];this.sourceObj=b;this.sourceAttrName=
e;this.targetObj=m;this.targetMethodName=a;this.varMapping={source:b,target:m};g=Object.assign({removeAfterUpdate:!1,forceAttributeConnection:!1,garbageCollect:!1,signalOnAssignment:!0},g);g.removeAfterUpdate&&(this.removeAfterUpdate=!0);g.forceAttributeConnection&&(this.forceAttributeConnection=!0);"boolean"===typeof g.garbageCollect&&(this.garbageCollect=g.garbageCollect);"boolean"===typeof g.signalOnAssignment&&(this.signalOnAssignment=g.signalOnAssignment);g.converter&&this.setConverter(g.converter);
g.updater&&this.setUpdater(g.updater);g.varMapping&&(this.varMapping=Object.assign(g.varMapping,this.varMapping));this.getSpec();return this}},{key:"__additionally_serialize__",value:function(b,e,m,a){ih.arr.equals(ih.arr.without(Object.keys(this.varMapping),"_rev"),["source","target"])?b.props.varMapping&&delete b.props.varMapping:a("varMapping",this.varMapping)}},{key:"__after_deserialize__",value:function(b,e){this.varMapping||(this.varMapping={});this.varMapping.source=this.sourceObj;this.varMapping.target=
this.targetObj;this.onSourceAndTargetRestored()}},{key:"onSourceAndTargetRestored",value:function(){this.sourceObj&&this.targetObj&&this.connect()}},{key:"copy",value:function(b){return ih.AttributeConnection.fromLiteral(this.toLiteral(),b)}},{key:"fixInstanceAfterCopyingFromSite",value:function(b,e,m){this.disconnect()}},{key:"clone",value:function(){var b=new this.constructor(this.getSourceObj(),this.getSourceAttrName(),this.getTargetObj(),this.getTargetMethodName(),this.getSpec());this.dependedBy&&
(b.dependedBy=this.dependedBy);return b}},{key:"getTargetObj",value:function(){return this.targetObj}},{key:"getSourceObj",value:function(){return this.sourceObj}},{key:"getSourceAttrName",value:function(){return this.sourceAttrName}},{key:"getTargetMethodName",value:function(){return this.targetMethodName}},{key:"getSourceValue",value:function(){return this.getSourceObj()[this.getSourceAttrName()]}},{key:"getPrivateSourceValue",value:function(){return this.sourceObj[this.privateAttrName(this.sourceAttrName)]}},
{key:"getConverter",value:function(){if(!this.converterString)return null;this.converter||(this.converter=ih.Closure.fromSource(this.converterString,this.varMapping).recreateFunc());return this.converter}},{key:"setConverter",value:function(b){delete this.converter;return this.converterString=b?String(b):null}},{key:"getUpdater",value:function(){if(!this.updaterString)return null;this.updater||(this.updater=ih.Closure.fromSource(this.updaterString,this.varMapping).recreateFunc());return this.updater}},
{key:"setUpdater",value:function(b){delete this.updater;return this.updaterString=b?ih.stringifyFunctionWithoutToplevelRecorder(b):null}},{key:"getSpec",value:function(){var b={};this.updaterString&&(b.updater=this.getUpdater());this.converterString&&(b.converter=this.getConverter());this.removeAfterUpdate&&(b.removeAfterUpdate=!0);this.forceAttributeConnection&&(b.forceAttributeConnection=!0);this.hasOwnProperty("garbageCollect")&&(b.garbageCollect=this.garbageCollect);this.hasOwnProperty("signalOnAssignment")&&
(b.signalOnAssignment=this.signalOnAssignment);return b}},{key:"resetSpec",value:function(){delete this.garbageCollect;delete this.signalOnAssignment;delete this.removeAfterUpdate;delete this.forceAttributeConnection;delete this.converter;delete this.converterString;delete this.updater;delete this.updaterString}},{key:"privateAttrName",value:function(b){return"$$"+b}},{key:"activate",value:function(){this.isActive=!0}},{key:"deactivate",value:function(){delete this.isActive}},{key:"connect",value:function(){var b=
this.getExistingConnection();b!==this&&(b&&b.disconnect(),this.addAttributeConnection());b=this.sourceObj;var e=this.sourceAttrName,m=this.forceAttributeConnection,a=b.__lookupSetter__(e),g=b.__lookupGetter__(e),l=!a&&!g&&(this.getSourceValue()||this.getPrivateSourceValue());"function"!==typeof l||m?this.addSourceObjGetterAndSetter(g,a):l.isWrapped||this.addConnectionWrapper(b,e,l);return this}},{key:"disconnect",value:function(){var b=this,e=this.sourceObj;if(!e||!e.attributeConnections)return this.removeSourceObjGetterAndSetter();
e.attributeConnections=e.attributeConnections.filter(function(a){return!b.isSimilarConnection(a)});var m=e.attributeConnections.filter(function(a){return b.getSourceAttrName()==a.getSourceAttrName()});0==e.attributeConnections.length&&delete e.attributeConnections;0==m.length&&this.removeSourceObjGetterAndSetter();return null}},{key:"update",value:function(b,e){if(this.isActive)return null;var m=this,a=this.getUpdater(),g=this.getConverter(),l=this.targetObj,r=this.targetMethodName;if(!l||!r)return e=
"Cannot update "+this.toString(b)+" because of no target ("+l+") or targetProp ("+r+") ",this.isWeakConnection&&this.disconnect(),console.error(e),null;var v=l[r],y=function(E,F,H,I,M,N){H=[E,F,H,I,M,N];g&&(b=g.call(m,E,F),E=H[0]=b);E="function"===typeof v?v.apply(l,H):l[r]=E;m.removeAfterUpdate&&m.disconnect();return E};try{return this.isActive=!0,a?a.call(this,y,b,e):y(b,e)}catch(E){var A=this.sourceObj&&"function"===typeof this.sourceObj.world&&this.sourceObj.world()||this.targetObj&&"function"===
typeof this.targetObj.world&&this.targetObj.world();A?A.logError(E,"AttributeConnection>>update: "):console.error("Error when trying to update "+this+" with value "+b+":\n"+E+"\n"+E.stack)}finally{delete this.isActive}return null}},{key:"addSourceObjGetterAndSetter",value:function(b,e){if(!(b&&b.isAttributeConnectionGetter||e&&e.isAttributeConnectionSetter)){var m=this.sourceObj,a=this.sourceAttrName,g=this.privateAttrName(a);m[g]&&console.warn("newAttrName "+g+" already exists.Are there already other connections?");
m.hasOwnProperty("doNotSerialize")||(m.doNotSerialize=[]);ih.arr.pushIfNotIncluded(m.doNotSerialize,g);m.hasOwnProperty("doNotCopyProperties")||(m.doNotCopyProperties=[]);ih.arr.pushIfNotIncluded(m.doNotCopyProperties,g);b&&(m.hasOwnProperty(a)?m.__defineGetter__(g,b):m.__defineGetter__(g,function(){return m.constructor.prototype.__lookupGetter__(a).bind(m)()}));e&&(m.hasOwnProperty(a)?m.__defineSetter__(g,e):m.__defineSetter__(g,function(l){m.constructor.prototype.__lookupSetter__(a).bind(m)(l)}));
b||e||!m.hasOwnProperty(a)||(m[g]=m[a]);m.__defineSetter__(a,function(l){var r=m[g];m[g]=l;if(void 0===m.attributeConnections)return console.error("Sth wrong with sourceObj, has no attributeConnections"),null;m.attributeConnections.forEach(function(v){v&&v.getSourceAttrName()===a&&v.signalOnAssignment&&v.update(l,r)});return l});m.__lookupSetter__(a).isAttributeConnectionSetter=!0;m.__defineGetter__(a,function(){return m[g]});m.__lookupGetter__(a).isAttributeConnectionGetter=!0}}},{key:"addConnectionWrapper",
value:function(b,e,m){if("function"!==typeof m)throw Error("addConnectionWrapper didnt get a method to wrap");var a;if(a=b.hasOwnProperty(e)){b[this.privateAttrName(e)]=m;var g=function(){return m}}else g=function(){return Object.getPrototypeOf(b)[e]};b[e]=function(){if(void 0===this.attributeConnections)throw Error("[lively.bindings] Something is wrong with connection source object, it has no attributeConnections");for(var l=this.attributeConnections.slice(),r=this[e].originalFunction.apply(this,
arguments),v=0;v<l.length;v++){var y=l[v];y.getSourceAttrName()===e&&y.update(arguments[0])}return r};b[e].isOwnProperty=a;b[e].isWrapped=!0;b[e].isConnectionWrapper=!0;Object.defineProperty(b[e],"originalFunction",{get:g});b[e].toString=function(){return"<Wrapped "+g()+">"}}},{key:"removeSourceObjGetterAndSetter",value:function(){var b=this.sourceAttrName,e=this.privateAttrName(b),m=this.sourceObj;if(m){if(m.__lookupGetter__(b)){if(delete m[b],m.hasOwnProperty(e)){try{m[b]=m[e]}catch(g){}delete m[e]}}else if(m[b]&&
m[b].isConnectionWrapper){var a=m[b];delete m[b];m[b]||(m[b]=a.originalFunction)}m.doNotSerialize&&m.doNotSerialize.includes(e)&&(m.doNotSerialize=ih.arr.without(m.doNotSerialize,e),0==m.doNotSerialize.length&&delete m.doNotSerialize);m.doNotCopyProperties&&m.doNotCopyProperties.includes(e)&&(m.doNotCopyProperties=ih.arr.without(m.doNotCopyProperties,e),0==m.doNotCopyProperties.length&&delete m.doNotCopyProperties)}}},{key:"addAttributeConnection",value:function(){this.sourceObj.attributeConnections||
(this.sourceObj.attributeConnections=[]);this.sourceObj.attributeConnections.push(this)}},{key:"getExistingConnection",value:function(){var b=this.sourceObj&&this.sourceObj.attributeConnections;if(!b)return null;for(var e=0,m=b.length;e<m;e++)if(this.isSimilarConnection(b[e]))return b[e];return null}},{key:"isRecursivelyActivated",value:function(){return this.isActive}},{key:"isSimilarConnection",value:function(b){return b&&b.constructor==this.constructor?this.sourceObj==b.sourceObj&&this.sourceAttrName==
b.sourceAttrName&&this.targetObj==b.targetObj&&this.targetMethodName==b.targetMethodName:!1}},{key:"toString",value:function(b){try{return ih.string.format("AttributeConnection(%s.%s %s %s.%s)",this.getSourceObj(),this.getSourceAttrName(),b?"--\x3e"+String(b)+"--\x3e":"--\x3e",this.getTargetObj(),this.getTargetMethodName())}catch(e){return"<Error in AttributeConnection>>toString>"}}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"AttributeConnection"}}],k,{pathInPackage:function(){return"index.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.bindings",version:"0.1.2"}}},{start:221,end:16605})}(void 0);ih.AttributeConnection=WL;ih.AttributeConnection=WL;ih.AttributeConnection=WL;ih.callWhenNotNull=pC;ih.callWhenNotNull=pC;ih.callWhenPathNotNull=Jf;ih.callWhenPathNotNull=Jf;var Tja=Object.freeze({__proto__:null,connect:rl,disconnect:zo,disconnectAll:jt,once:$q,
signal:Wl,noUpdate:mw,AttributeConnection:WL,callWhenNotNull:pC,callWhenPathNotNull:Jf}),Y5=lively.FreezerRuntime.recorderFor("lively.graphics/index.js");Object.assign(Y5,kha);Object.assign(Y5,jha);var Uja=Object.freeze({__proto__:null,Complementary:ty,Triadic:uy,Tetradic:MA,Quadratic:vy,Analogous:wy,Neutral:NA,Color:Fg,LinearGradient:Bn,RadialGradient:Lp,flatDesignColors:yG,materialDesignColors:zG,webSafeColors:AG,Point:Lg,Rectangle:He,Transform:$k,Line:An,rect:zm,pt:xi});lively.FreezerRuntime.recorderFor("lively.serializer2/object-extensions.js");
Object.defineProperty(Symbol.prototype,"__serialize__",{configurable:!0,value:function(){var f=function(){return Object.getOwnPropertyNames(Symbol).filter(function(n){return"symbol"===typeof Symbol[n]}).reduce(function(n,b){return n.set(Symbol[b],"Symbol."+b)},new Map)}(),k=/^Symbol\((.*)\)$/;return function(){var n="function"===typeof this[Symbol.toPrimitive]?this[Symbol.toPrimitive]():this,b=Symbol.keyFor(n);if(b)return{__expr__:'Symbol.for("'+b+'")'};if(f.get(n))return{__expr__:f.get(n)};n=String(n).match(k);
return{__expr__:n?'Symbol("'+n[1]+'")':"Symbol()"}}}()});Object.defineProperty(System,"__serialize__",{configurable:!0,value:function(){return{__expr__:"System"}}});Object.defineProperty(System.global,"__serialize__",{configurable:!0,value:function(){return{__expr__:"System.global"}}});Object.defineProperty(Map.prototype,"__serialize__",{configurable:!0,value:function(f,k,n){var b=f.add(this),e=b.currentRev,m=b.currentSnapshot,a=m.entries=[],g=0;k[b.id]=m;f.classHelper.addClassInfo(b,this,m);m=$jscomp.makeIterator(this);
for(var l=m.next();!l.done;l=m.next()){var r=$jscomp.makeIterator(l.value);l=r.next().value;r=r.next().value;g++;l=b.snapshotProperty(b.id,l,n.concat("key",String(g)),k,f);r=b.snapshotProperty(b.id,r,n.concat("value",String(g)),k,f);a.push(l,r)}return b.asRefForSerializedObjMap(e)}});Object.defineProperty(Map.prototype,"__deserialize__",{configurable:!0,value:function(f,k,n,b,e){f=f.entries;for(var m=0;m<f.length;m+=2){var a=f[m+1],g=k.recreateProperty("key."+m,f[m],n,b,e.concat("key",m));a=k.recreateProperty("value."+
m,a,n,b,e.concat("value",m));this.set(g,a)}}});Object.defineProperty(Set.prototype,"__serialize__",{configurable:!0,value:function(f,k,n){var b=f.add(this),e=b.currentRev,m=b.currentSnapshot,a=m.entries=[],g=0;k[b.id]=m;f.classHelper.addClassInfo(b,this,m);m=$jscomp.makeIterator(this);for(var l=m.next();!l.done;l=m.next())l=l.value,g++,l=b.snapshotProperty(b.id,l,n.concat("entry",String(g)),k,f),a.push(l);return b.asRefForSerializedObjMap(e)}});Object.defineProperty(Set.prototype,"__deserialize__",
{configurable:!0,value:function(f,k,n,b,e){f=f.entries;for(var m=0;m<f.length;m++){var a=k.recreateProperty("entry."+m,f[m],n,b,e.concat("key",m));this.add(a)}}});var CT=lively.FreezerRuntime.recorderFor("lively.serializer2/util.js");CT.isPrimitive=qC;CT.isPrimitive=qC;CT.isPrimitive=qC;var Jj=lively.FreezerRuntime.recorderFor("lively.serializer2/class-helper.js");Jj.getClassName=Wr;Jj.getSerializableClassMeta=ar;Jj.locateClass=oq;Jj.arr=$f;Jj.string=pi;Jj.classMetaForSerializationProp="lively.serializer-class-info";
Jj.classSuperClassProp=Symbol.for("lively-instance-superclass");Jj.classNameProp=Symbol.for("__LivelyClassName__");Jj.moduleMetaInClassProp=Symbol.for("lively-module-meta");Jj.getClassName=Wr;Jj.getClassName=Wr;Jj.getSerializableClassMeta=ar;Jj.getSerializableClassMeta=ar;Jj.locateClass=oq;Jj.locateClass=oq;var sv=function(f){this.options=Object.assign({ignoreClassNotFound:!0},f);this[Symbol.for("lively-instance-restorer")]=!0};sv.prototype.addClassInfo=function(f,k,n){(f=Jj.getSerializableClassMeta(k))&&
(n[Jj.classMetaForSerializationProp]=f)};sv.prototype.restoreIfClassInstance=function(f,k){if(k.hasOwnProperty(Jj.classMetaForSerializationProp)&&(f=k[Jj.classMetaForSerializationProp],f.className)){k=Jj.locateClass(f);if(!k||"function"!==typeof k){k="Trying to deserialize instance of "+JSON.stringify(f)+" but this class cannot be found!";if(!this.options.ignoreClassNotFound)throw Error(k);console.error(k);return{isClassPlaceHolder:!0,className:f.className}}return k.hasOwnProperty(Symbol.for("lively-instance-superclass"))?
new k(this):new k}};sv.sourceModulesInObjRef=function(f){var k=[];(f=f&&f[Jj.classMetaForSerializationProp])&&f.module&&k.push(f.module);return k};sv.sourceModulesIn=function(f){var k=[];Object.keys(f).forEach(function(n){(n=f[n])&&n[Jj.classMetaForSerializationProp]&&k.push(n[Jj.classMetaForSerializationProp])});return Jj.arr.uniqBy(k,function(n,b){var e=n.module,m=b.module;return!e&&!m||e&&!m||!e&&m?n.className===b.className:n.className===b.className&&e.package.name==m.package.name&&e.package.pathInPackage==
m.package.pathInPackage})};$jscomp.global.Object.defineProperties(sv.prototype,{sourceModuleNameProperty:{configurable:!0,enumerable:!0,get:function(){return"__SourceModuleName__"}}});$jscomp.global.Object.defineProperties(sv,{moduleMetaInClassProp:{configurable:!0,enumerable:!0,get:function(){return Jj.moduleMetaInClassProp}},classMetaForSerializationProp:{configurable:!0,enumerable:!0,get:function(){return Jj.classMetaForSerializationProp}},classSuperClassProp:{configurable:!0,enumerable:!0,get:function(){return Jj.classSuperClassProp}},
classNameProperty:{configurable:!0,enumerable:!0,get:function(){return Jj.classNameProp}}});Jj.ClassHelper=sv;Jj.default=sv;var aj=lively.FreezerRuntime.recorderFor("lively.serializer2/plugins/expression-serializer.js");aj.deserializeSpec=Dp;aj.serializeSpec=Ao;aj.string=pi;aj.Closure=Rj;aj.Path=Ah;aj.obj=Ag;aj.properties=up;aj.arr=$f;aj.getSerializableClassMeta=ar;aj.connect=rl;var jo=function(f){this.prefix=Object.assign({prefix:"__lv_expr__"},f).prefix+":"};jo.prototype.isSerializedExpression=
function(f){return 0===f.indexOf(this.prefix)};jo.prototype.requiredModulesOf__expr__=function(f){return this.isSerializedExpression(f)?(f=this.exprStringDecode(f).bindings)?Object.keys(f):null:null};jo.prototype.exprStringDecode=function(f){var k=f.indexOf(":");f.slice(0,k);f=f.slice(k+1);for(var n={},b=!1;f&&f.startsWith("{")&&0<=(k=f.indexOf("}:"));){b=!0;var e=f.slice(1,k);f=f.slice(k+2);f.includes("https:")&&f.indexOf("https:")<f.indexOf(":")?(f=f.replace("https:","__HTTP_PLACEHOLDER__"),k=f.indexOf(":")-
20+6,f=f.replace("__HTTP_PLACEHOLDER__","https:")):k=f.indexOf(":");var m=f.slice(0,k);e=e.split(",").filter(function(a){return!!a.trim()}).map(function(a){if(!a.includes(":"))return a;var g=$jscomp.makeIterator(a.split(":"));a=g.next().value;g=g.next().value;return{exported:a,local:g}});n[m]=e;f=f.slice(k+1)}return{__expr__:f,bindings:b?n:null}};jo.prototype.exprStringEncode=function(f){var k=f.bindings;f=String(f.__expr__);if(k)for(var n=Object.keys(k),b=0;b<n.length;b++){var e=n[b],m=k[e];Array.isArray(m)&&
(m=m.map(function(a){return"string"===typeof a?a:a.exported+":"+a.local}).join(","));f="{"+m+"}:"+e+":"+f}return this.prefix+f};jo.prototype.convert__expr__obj=function(f){console.assert("__expr__"in f,"obj has no property __expr__");return this.prefix+f.__expr__};jo.prototype.__eval__=function(f,k){return aj.__eval__(f,k)};jo.prototype.deserializeExpr=function(f){if(!f.startsWith(this.prefix))throw Error('"'+f+'" is not a serialized expression, missing prefix "'+this.prefix+'"');return this.deserializeExprObj(this.exprStringDecode(f))};
jo.prototype.deserializeExprObj=function(f){var k=f.__expr__;f=f.bindings;var n={};if(f)for(var b=f?Object.keys(f):[],e=0;e<b.length;e++){var m=b[e],a=f[m];if(lively.FreezerRuntime){var g=lively.FreezerRuntime.get(lively.FreezerRuntime.decanonicalize(m));if(!g){var l=lively.FreezerRuntime.fetchStandaloneFor(m);l&&(g=l.exports)}g.exports&&(g=g.exports)}else g=System.get(System.decanonicalize(m));if(!g)throw Error("[lively.serializer] expression eval: bindings specify to import "+m+" but this module is not loaded!\nSource: "+
k);for(m=0;m<a.length;m++){var r=a[m],v=l=void 0;"string"===typeof r?v=l=r:"object"===typeof r&&(l=r.local,v=r.exported);n[l]=g[v];k="var "+l+" = __boundValues__."+l+";\n"+k}}return this.__eval__(k,n)};Da("a0",jo);aj.ExpressionSerializer=jo;aj.__eval__=aj.Closure.fromSource("function __eval__(__source__, __boundValues__) { \n  return eval(__source__); \n}").getFunc();aj.deserializeSpec=Dp;aj.deserializeSpec=Dp;aj.serializeSpec=Ao;aj.serializeSpec=Ao;aj.default=jo;var Kj=lively.FreezerRuntime.recorderFor("lively.serializer2/plugins.js");
Kj.obj=Ag;Kj.Plugin=function(){};var DT=function(){};DT.prototype.serializeObject=function(f,k,n,b,e){if("function"!==typeof f.__serialize__)return null;(f=f.__serialize__(n,b,e))&&f.hasOwnProperty("__expr__")&&(n=n.expressionSerializer.exprStringEncode(f),f=k?n:{__expr__:n});return f};DT.prototype.deserializeObject=function(f,k,n,b){return(k=n.__expr__)?f.expressionSerializer.deserializeExpr(k):null};Kj.CustomSerializePlugin=DT;var ET=function(){};ET.prototype.additionallySerialize=function(f,k,
n,b){f.classHelper.addClassInfo(k,k.realObj,n)};ET.prototype.deserializeObject=function(f,k,n,b){return f.classHelper.restoreIfClassInstance(k,n)};Kj.ClassPlugin=ET;var Z5=function(){};Z5.prototype.serializeObject=function(f,k,n,b,e){f&&f.isMorph&&(f.__isBeingSerialized__=!0);return null};Kj.SerializationIndicationPlugin=Z5;var $5=function(){};$5.prototype.additionallySerialize=function(f,k,n,b){k.realObj&&k.realObj.isMorph&&(k.realObj.__isBeingSerialized__=!1)};Kj.SerializationFinishPlugin=$5;var XL=
function(){};XL.prototype.additionallySerialize=function(f,k,n,b){var e=k.realObj;e&&"function"===typeof e.__additionally_serialize__&&e.__additionally_serialize__(n,k,f,b)};XL.prototype.additionallyDeserializeBeforeProperties=function(f,k,n,b,e,m,a){"function"===typeof n.__deserialize__&&n.__deserialize__(e,k,m,f,a)};XL.prototype.additionallyDeserializeAfterProperties=function(f,k,n,b,e,m){"function"===typeof n.__after_deserialize__&&n.__after_deserialize__(b,k,f)};Kj.AdditionallySerializePlugin=
XL;var a6=function(){};a6.prototype.propertiesToSerialize=function(f,k,n,b){return(f=k.realObj)&&f.__only_serialize__||null};Kj.OnlySerializePropsPlugin=a6;var b6=function(){};b6.prototype.propertiesToSerialize=function(f,k,n,b){f=k.realObj;if(!f||!f.__dont_serialize__)return null;f=Kj.obj.mergePropertyInHierarchy(f,"__dont_serialize__");k=[];for(n=0;n<b.length;n++){var e=b[n];f.includes(e)||k.push(e)}return k};Kj.DontSerializePropsPlugin=b6;var FT=function(){};FT.prototype.propertiesToSerialize=
function(f,k,n,b){var e=k.realObj;k=e.constructor[Symbol.for("lively.classes-properties-and-settings")];if(!k)return null;f=k.properties;n=k.propertySettings.valueStoreProperty||"_state";k=[];if(e[n]){if(e.__only_serialize__){for(var m=0;m<b.length;m++){e=b[m];var a=f[e];e!==n&&(a&&a&&(a.derived||a.readOnly||a.hasOwnProperty("serialize")&&!a.serialize)||k.push(e))}return k}n=b.indexOf(n);-1<n&&b.splice(n,1);for(m in f)n=f[m],e=b.indexOf(m),n.derived||n.readOnly||n.hasOwnProperty("serialize")&&!n.serialize?
-1<e&&b.splice(e,1):-1===e&&k.push(m);return k.concat(b)}};FT.prototype.additionallyDeserializeBeforeProperties=function(f,k,n,b,e,m,a){var g=n.constructor[Symbol.for("lively.classes-properties-and-settings")];if(!g)return b;var l=g.order;g=g.propertySettings.valueStoreProperty||"_state";b=e.props;if(b[g])return b;b=Kj.obj.clone(b);n.hasOwnProperty(g)||n.initializeProperties();for(e=0;e<l.length;e++)g=l[e],b.hasOwnProperty(g)&&(k.recreatePropertyAndSetProperty(n,b,g,m,f,a),delete b[g]);return b};
Kj.LivelyClassPropertiesPlugin=FT;var GT={livelyClassPropertiesPlugin:new Kj.LivelyClassPropertiesPlugin,dontSerializePropsPlugin:new Kj.DontSerializePropsPlugin,onlySerializePropsPlugin:new Kj.OnlySerializePropsPlugin,additionallySerializePlugin:new Kj.AdditionallySerializePlugin,classPlugin:new Kj.ClassPlugin,customSerializePlugin:new Kj.CustomSerializePlugin,indicationPlugin:new Kj.SerializationIndicationPlugin,finishPlugin:new Kj.SerializationFinishPlugin};Kj.plugins=GT;Kj.plugins=GT;Kj.plugins=
GT;var RG=[Kj.plugins.indicationPlugin,Kj.plugins.customSerializePlugin,Kj.plugins.classPlugin,Kj.plugins.additionallySerializePlugin,Kj.plugins.onlySerializePropsPlugin,Kj.plugins.dontSerializePropsPlugin,Kj.plugins.livelyClassPropertiesPlugin,Kj.plugins.finishPlugin];Kj.allPlugins=RG;Kj.allPlugins=RG;Kj.allPlugins=RG;var mk=lively.FreezerRuntime.recorderFor("lively.serializer2/object-pool.js");mk.__additionally_serialize__addObjectFunction=function(f,k,n,b,e){e=void 0===e?[]:e;return function(m,
a,g){g=void 0===g?!1:g;return k.props[m]=g?{value:a,verbatim:g}:{value:f.snapshotProperty(f.id,a,e.concat([m]),n,b)}}};mk.arr=$f;mk.Path=Ah;mk.obj=Ag;mk.string=pi;mk.isPrimitive=qC;mk.ClassHelper=sv;mk.ExpressionSerializer=jo;mk.allPlugins=RG;mk.debugSerialization=!1;mk.debugDeserialization=!1;var Vj=function(f){this.options=Object.assign({checkForLeaks:!1,ignoreClassNotFound:!0,idPropertyName:"id"},f);this.reset()};Vj.withDefaultPlugins=function(f){return new this(Object.assign({plugins:mk.allPlugins},
f))};Vj.resolveFromSnapshotAndId=function(f,k){return(new this(k)).resolveFromSnapshotAndId(f)};Vj.fromSnapshot=function(f,k){return(new this(k)).readSnapshot(f)};Vj.withObject=function(f,k){k=new this(k);k.add(f);return k};Vj.prototype.reset=function(){this.uuidGen=mk.string.newUUID;this._obj_ref_map=new Map;this._id_ref_map={};var f=this.options;this.classHelper=new mk.ClassHelper(f);this.expressionSerializer=new mk.ExpressionSerializer;f.idPropertyName&&(this.idPropertyName=f.idPropertyName);f.uuidGen&&
(this.uuidGen=f.uuidGen);f.reinitializeIds&&(this.reinitializeIds=f.reinitializeIds);f.hasOwnProperty("ignoreClassNotFound")&&(this.classHelper.options.ignoreClassNotFound=f.ignoreClassNotFound);var k=this.plugins={serializeObject:[],additionallySerialize:[],propertiesToSerialize:[],deserializeObject:[],additionallyDeserializeBeforeProperties:[],additionallyDeserializeAfterProperties:[],afterDeserialization:[],beforeDeserialization:[],afterSerialization:[],beforeSerialization:[]};f.plugins&&f.plugins.forEach(function(n){"function"===
typeof n.serializeObject&&k.serializeObject.push(n);"function"===typeof n.additionallySerialize&&k.additionallySerialize.push(n);"function"===typeof n.propertiesToSerialize&&k.propertiesToSerialize.push(n);"function"===typeof n.deserializeObject&&k.deserializeObject.push(n);"function"===typeof n.additionallyDeserializeBeforeProperties&&k.additionallyDeserializeBeforeProperties.push(n);"function"===typeof n.additionallyDeserializeAfterProperties&&k.additionallyDeserializeAfterProperties.push(n);"function"===
typeof n.beforeDeserialization&&k.beforeDeserialization.push(n);"function"===typeof n.afterDeserialization&&k.afterDeserialization.push(n);"function"===typeof n.beforeSerialization&&k.beforeSerialization.push(n);"function"===typeof n.afterSerialization&&k.afterSerialization.push(n)})};Vj.prototype.knowsId=function(f){return!!this._id_ref_map[f]};Vj.prototype.refForId=function(f){return this._id_ref_map[f]};Vj.prototype.resolveToObj=function(f){return(f=this._id_ref_map[f])?f.realObj:void 0};Vj.prototype.ref=
function(f){return this._obj_ref_map.get(f)};Vj.prototype.objects=function(){return Array.from(this._obj_ref_map.keys())};Vj.prototype.objectRefs=function(){return Array.from(this._obj_ref_map.values())};Vj.prototype.internalAddRef=function(f){f.realObj&&this._obj_ref_map.set(f.realObj,f);return this._id_ref_map[f.id]=f};Vj.prototype.add=function(f){var k=this;if(!mk.isPrimitive(f)){if(Array.isArray(f))return f.map(function(b){return k.add(b)});var n=f.__serialization_id_property__||this.idPropertyName;
return this.ref(f)||this.internalAddRef(new mk.ObjectRef(f[n]||this.uuidGen(),f,void 0,this.idPropertyName))}};Vj.prototype.snapshot=function(f){var k={};this.plugin_beforeSerialization(k,f);for(var n=0,b=Object.keys(this._id_ref_map);n<b.length;n++)this._id_ref_map[b[n]].snapshotObject(k,this);return k=this.plugin_afterSerialization(k,f)};Vj.prototype.snapshotObject=function(f){f=this.add(f).id;var k=this.snapshot(f);return{id:f,snapshot:k}};Vj.prototype.readSnapshot=function(f,k){if(f.hasOwnProperty("id"))throw Error("readSnapshot expects simple serialized object map, not id-snapshot pair!");
if(this.options.skipMigrations)mk.ObjectRef.fromSnapshot(k,f,this,[],this.idPropertyName);else{k=0;for(var n=Object.keys(f);k<n.length;k++)this.resolveToObj(n[k])||mk.ObjectRef.fromSnapshot(n[k],f,this,[],this.idPropertyName)}return this};Vj.prototype.resolveFromSnapshotAndId=function(f){if(!f.hasOwnProperty("id"))throw Error("idAndSnapshot does not have id");if(!f.hasOwnProperty("snapshot"))throw Error("idAndSnapshot does not have snapshot");var k=f=this.plugin_beforeDeserialization(f),n=k.id;this.readSnapshot(k.snapshot,
n);this.plugin_afterDeserialization(f);return this.resolveToObj(n)};Vj.prototype.plugin_beforeSerialization=function(f,k){for(var n=0;n<this.plugins.beforeSerialization.length;n++)this.plugins.beforeSerialization[n].beforeSerialization(this,f,k)};Vj.prototype.plugin_afterSerialization=function(f,k){for(var n=0;n<this.plugins.afterSerialization.length;n++){var b=this.plugins.afterSerialization[n].afterSerialization(this,f,k);b&&(f=b)}return f};Vj.prototype.plugin_beforeDeserialization=function(f){for(var k=
0;k<this.plugins.beforeDeserialization.length;k++){var n=this.plugins.beforeDeserialization[k].beforeDeserialization(this,f);n&&(f=n)}return f};Vj.prototype.plugin_afterDeserialization=function(f){for(var k=0;k<this.plugins.afterDeserialization.length;k++)this.plugins.afterDeserialization[k].afterDeserialization(this,f)};Vj.prototype.plugin_serializeObject=function(f,k,n,b){for(var e=0;e<this.plugins.serializeObject.length;e++){var m=this.plugins.serializeObject[e].serializeObject(f,k,this,n,b);if(m)return m}};
Vj.prototype.plugin_propertiesToSerialize=function(f,k,n){for(var b=0;b<this.plugins.propertiesToSerialize.length;b++){var e=this.plugins.propertiesToSerialize[b].propertiesToSerialize(this,f,k,n);e&&(n=e)}return n};Vj.prototype.plugin_additionallySerialize=function(f,k,n,b){n=this.plugins.additionallySerialize.length?mk.__additionally_serialize__addObjectFunction(f,k,n,this,b):null;for(b=0;b<this.plugins.additionallySerialize.length;b++)this.plugins.additionallySerialize[b].additionallySerialize(this,
f,k,n)};Vj.prototype.plugin_deserializeObject=function(f,k,n){for(var b=0;b<this.plugins.deserializeObject.length;b++){var e=this.plugins.deserializeObject[b].deserializeObject(this,f,k,n);if(e)return e}};Vj.prototype.plugin_additionallyDeserializeBeforeProperties=function(f,k,n,b,e,m){for(var a=0;a<this.plugins.additionallyDeserializeBeforeProperties.length;a++){var g=this.plugins.additionallyDeserializeBeforeProperties[a].additionallyDeserializeBeforeProperties(this,f,k,n,b,e,m);g&&(n=g)}return n};
Vj.prototype.plugin_additionallyDeserializeAfterProperties=function(f,k,n,b,e){for(var m=0;m<this.plugins.additionallyDeserializeAfterProperties.length;m++)this.plugins.additionallyDeserializeAfterProperties[m].additionallyDeserializeAfterProperties(this,f,k,n,b,e)};mk.ObjectPool=Vj;var ws=function(f,k,n,b){this.id=f;this.idPropertyName=void 0===b?"id":b;this.realObj=k;this.snapshotVersions=[];this.snapshots={};n&&(f=n.rev||0,this.snapshotVersions.push(f),this.snapshots[f]=n)};ws.fromSnapshot=function(f,
k,n,b,e){b=void 0===b?[]:b;f=new this(f,void 0,void 0,e);try{return n.internalAddRef(f).recreateObjFromSnapshot(k,n,b)}catch(m){if(n.options.highlightBuggyMorphs)for(;b.length;){if((k=mk.Path(b).map(function(a,g){return"submorphs"==a?g.filter(function(l){return!l.isHand&&!l.isEpiMorph}):g}).get(n.options.rootObject))&&k.isMorph&&k.world()){k.show(!0);n.options.highlightBuggyMorphs=!1;break}b.pop()}throw m;}};ws.prototype.asRefForSerializedObjMap=function(f){return{__ref__:!0,id:this.id,rev:void 0===
f?"????":f}};ws.prototype.snapshotObject=function(f,k,n){n=void 0===n?[]:n;mk.debugSerialization&&console.log("[serialize] "+n.join("."));if(100<n.length)throw Error("Stopping serializer, encountered a possibly infinit loop: "+n.join("."));var b=this.id,e=this.realObj,m=this.snapshots;if(!e)return console.error("Cannot marshall object ref "+b+", no real object!"),Object.assign({},this.asRefForSerializedObjMap(),{isMissing:!0});var a=e._rev||0;var g=this.asRefForSerializedObjMap(a);mk.arr.pushIfNotIncluded(this.snapshotVersions,
a);if(m[a])return f[b]||(f[b]=m[a]),g;var l=typeof b;"number"===l&&(b=String(b),l="string");if("string"!==l)throw Error("Error snapshoting "+e+": id is not a string but "+(b+" (serialization path: ")+(n.join(".")+")"));if(l=k.plugin_serializeObject(e,!1,f,n))return m[a]=f[b]=l,g;l=Object.getOwnPropertyNames(e);var r={};m=m[a]=f[b]={rev:a,props:r};(a=k.plugin_propertiesToSerialize(this,m,l))&&(l=a);for(a=0;a<l.length;a++){var v=l[a];r[v]={value:this.snapshotProperty(b,e[v],n.concat([v]),f,k)}}k.plugin_additionallySerialize(this,
m,f,n);return g};ws.prototype.snapshotProperty=function(f,k,n,b,e){var m=this;if(mk.isPrimitive(k))return k;var a=e.plugin_serializeObject(k,!0,b,n);if(a)return a;if("function"!==typeof k)return Array.isArray(k)?k.map(function(g,l){return m.snapshotProperty(f,g,n.concat(l),b,e)}):(k=e.add(k))&&k.isObjectRef?k.snapshotObject(b,e,n):k};ws.prototype.recreateObjFromSnapshot=function(f,k,n){if(this.realObj)return this;mk.debugDeserialization&&console.log("[deserialize] "+this.id+" (via "+n.join(".")+")");
var b=f[this.id];if(!b)return console.error("Cannot recreateObjFromSnapshot ObjectRef "+(this.id+" b/c of missing snapshot in snapshot map!")),this;var e=b.rev,m;e=e||0;this.snapshotVersions.push(e);this.snapshots[e]=b;(m=k.plugin_deserializeObject(this,b,n))||(m={});"undefined"===typeof m._rev&&"object"===typeof m&&(m._rev=e||0);this.realObj=m;k.internalAddRef(this);if(!m)return this;e=b.props;var a=k.plugin_additionallyDeserializeBeforeProperties(this,m,e,b,f,n);a&&(e=a);if(e)for(var g in e)this.recreatePropertyAndSetProperty(m,
e,g,f,k,n);g=m.__serialization_id_property__||this.idPropertyName;k.reinitializeIds&&m.hasOwnProperty(g)&&(m[g]=k.reinitializeIds(this.id,this));k.plugin_additionallyDeserializeAfterProperties(this,m,b,f,n);return this};ws.prototype.recreatePropertyAndSetProperty=function(f,k,n,b,e,m){try{var a=k[n]||{value:"NON EXISTING"},g=a.value;f[n]=a.verbatim?g:this.recreateProperty(n,g,b,e,m.concat(n))}catch(r){try{var l=String(f)}catch(v){l="[some "+f.constructor.name+"]"}r.__seen?console.error("Error deserializing property "+
n+" of "+l):(f=n+" of "+l+" ("+JSON.stringify(g)+")",console.error("Error deserializing property "+f),r.__seen=!0);throw r;}};ws.prototype.recreateProperty=function(f,k,n,b,e){var m=this;if("string"===typeof k&&b.expressionSerializer.isSerializedExpression(k))return b.expressionSerializer.deserializeExpr(k);if(mk.isPrimitive(k))return k;if(Array.isArray(k))return k.map(function(a,g){return m.recreateProperty(g,a,n,b,e.concat(g))});f=k.__serialization_id_property__||this.idPropertyName;return(b.refForId(k[f])||
mk.ObjectRef.fromSnapshot(k[f],n,b,e,this.idPropertyName)).realObj};$jscomp.global.Object.defineProperties(ws.prototype,{isObjectRef:{configurable:!0,enumerable:!0,get:function(){return!0}},currentSnapshot:{configurable:!0,enumerable:!0,get:function(){if(this.snapshotVersions.length)var f=mk.arr.last(this.snapshotVersions);else f=0,this.snapshotVersions.push(f);return this.snapshots[f]||(this.snapshots[f]={rev:f,props:{}})}},currentRev:{configurable:!0,enumerable:!0,get:function(){return this.snapshotVersions.length?
mk.arr.last(this.snapshotVersions):0}}});mk.ObjectRef=ws;var Wf=lively.FreezerRuntime.recorderFor("lively.serializer2/snapshot-navigation.js");Wf.referenceGraph=km;Wf.isReference=lm;Wf.referencesOfRef=mm;Wf.referencesOfId=rC;Wf.referencesInArray=gF;Wf.moduleOfId=Gg;Wf.referencesAndClassNamesOfId=Iz;Wf.classNameOfId=kt;Wf.findPathFromToId=Jz;Wf.lookupPath=br;Wf.modifyProperty=pq;Wf.removeUnreachableObjects=Dm;Wf.clearDanglingConnections=sC;Wf.requiredModulesOfSnapshot=lt;Wf.ClassHelper=sv;Wf.Path=
Ah;Wf.obj=Ag;Wf.arr=$f;Wf.graph=xu;Wf.ExpressionSerializer=jo;Wf.referenceGraph=km;Wf.referenceGraph=km;Wf.isReference=lm;Wf.isReference=lm;Wf.referencesOfRef=mm;Wf.referencesOfRef=mm;Wf.referencesOfId=rC;Wf.referencesOfId=rC;Wf.moduleOfId=Gg;Wf.moduleOfId=Gg;Wf.referencesAndClassNamesOfId=Iz;Wf.referencesAndClassNamesOfId=Iz;Wf.classNameOfId=kt;Wf.classNameOfId=kt;Wf.findPathFromToId=Jz;Wf.findPathFromToId=Jz;Wf.lookupPath=br;Wf.lookupPath=br;Wf.modifyProperty=pq;Wf.modifyProperty=pq;Wf.removeUnreachableObjects=
Dm;Wf.removeUnreachableObjects=Dm;Wf.clearDanglingConnections=sC;Wf.clearDanglingConnections=sC;Wf.defaultExprSerializer=new Wf.ExpressionSerializer;Wf.requiredModulesOfSnapshot=lt;Wf.requiredModulesOfSnapshot=lt;var c6,uC="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,Hm=c6={};try{var Gx="function"==typeof setTimeout?setTimeout:tC}catch(f){Gx=tC}try{var Hx="function"==typeof clearTimeout?clearTimeout:hF}catch(f){Hx=hF}!0;var Kz,nw=[],vC=!1,SI=-1;Hm.nextTick=function(f){var k=
Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)k[n-1]=arguments[n];nw.push(new UI(f,k));1!==nw.length||vC||RI(TI)};UI.prototype.run=function(){(this||uC).fun.apply(null,(this||uC).array)};Hm.title="browser";Hm.browser=!0;Hm.env={};Hm.argv=[];Hm.version="";Hm.versions={};Hm.on=Xr;Hm.addListener=Xr;Hm.once=Xr;Hm.off=Xr;Hm.removeListener=Xr;Hm.removeAllListeners=Xr;Hm.emit=Xr;Hm.prependListener=Xr;Hm.prependOnceListener=Xr;Hm.listeners=function(f){return[]};Hm.binding=
function(f){throw Error("process.binding is not supported");};Hm.cwd=function(){return"/"};Hm.chdir=function(f){throw Error("process.chdir is not supported");};Hm.umask=function(){return 0};var tj=Da("bl",c6),KX={},JX=!1,MX={},LX=!1,Mu={},NX=!1,PX={},OX=!1,RX={},QX=!1,Uf="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,TX={},SX=!1,VX={},UX=!1,XX={},WX=!1,ZX={},YX=!1,aY={},$X=!1,cY={},bY=!1,eY={},dY=!1,gY={},fY=!1,iY={},hY=!1,kY={},jY=!1,mY={},lY=!1,oY={},nY=!1,qY={},
pY=!1,HP={},rY=!1,Fl="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,IP={},sY=!1,jj="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,uY={},tY=!1,wY={},vY=!1,yY={},xY=!1,AY={},zY=!1,CY={},BY=!1,EY={},DY=!1,GY={},FY=!1,IY={},HY=!1,KY={},JY=!1,MY={},LY=!1,OY={},NY=!1,QY={},PY=!1,SY={},RY=!1,UY={},TY=!1,WY={},VY=!1,YY={},XY=!1,$Y={},ZY=!1,bZ={},aZ=!1,dZ={},cZ=!1,fZ={},eZ=!1,hZ={},gZ=!1,jZ={},iZ=!1,d6={},e6=!1,SG=function(){if(e6)return d6;
e6=!0;var f=ow();return d6={re:f.re,src:f.src,tokens:f.t,SEMVER_SPEC_VERSION:wC().SEMVER_SPEC_VERSION,SemVer:Xl(),compareIdentifiers:xC().compareIdentifiers,rcompareIdentifiers:xC().rcompareIdentifiers,parse:pw(),valid:Lz(),clean:Fp(),inc:mt(),diff:Ix(),major:GP(),minor:lF(),patch:qq(),prerelease:WI(),compare:Ep(),rcompare:AC(),compareLoose:JP(),compareBuild:BC(),sort:Jx(),rsort:Nz(),gt:yC(),lt:zC(),eq:Mz(),neq:VI(),gte:iF(),lte:jF(),cmp:kF(),coerce:zj(),Comparator:Un(),Range:El(),satisfies:qw(),
toComparators:CC(),maxSatisfying:XI(),minSatisfying:il(),minVersion:Nu(),validRange:Ub(),outside:rn(),gtr:KP(),ltr:ji(),intersects:mF(),simplifyRange:LP(),subset:MP()}}(),fg=lively.FreezerRuntime.recorderFor("lively.serializer2/index.js");fg.normalizeOptions=nt;fg.normalizeMigrations=function(f){f=void 0===f?[]:f;return{before:f.filter(function(k){return"function"===typeof k.snapshotConverter}),after:f.filter(function(k){return"function"===typeof k.objectConverter})}};fg.runMigrations=function(f,
k,n,b){for(var e=0;e<f.length;e++){var m=f[e];try{n=m[k](n,b)}catch(a){console.error("migration "+m.name+" failed:"),console.error(a)}}return n};fg.serialize=Ou;fg.deserialize=Bo;fg.deserializeWithMigrations=ei;fg.copy=Oz;fg.ObjectPool=Vj;fg.serializerVersion="0.1.3";fg.requiredModulesOfSnapshot=lt;fg.removeUnreachableObjects=Dm;fg.clearDanglingConnections=sC;fg.allPlugins=RG;fg.semver=SG;fg.normalizeOptions=nt;fg.normalizeOptions=nt;fg.majorAndMinorVersionRe=/\.[^\.]+$/;fg.ObjectRef=ws;fg.ObjectRef=
ws;fg.ObjectPool=Vj;fg.ObjectPool=Vj;fg.requiredModulesOfSnapshot=lt;fg.requiredModulesOfSnapshot=lt;fg.removeUnreachableObjects=Dm;fg.removeUnreachableObjects=Dm;fg.serialize=Ou;fg.serialize=Ou;fg.deserialize=Bo;fg.deserialize=Bo;fg.deserializeWithMigrations=ei;fg.deserializeWithMigrations=ei;fg.copy=Oz;fg.copy=Oz;fg.ExpressionSerializer=jo;fg.serializeSpec=Ao;fg.deserializeSpec=Dp;fg.getSerializableClassMeta=ar;fg.locateClass=oq;fg.getClassName=Wr;fg.ExpressionSerializer=jo;fg.ExpressionSerializer=
jo;fg.getSerializableClassMeta=ar;fg.getSerializableClassMeta=ar;fg.locateClass=oq;fg.locateClass=oq;fg.serializeSpec=Ao;fg.serializeSpec=Ao;fg.deserializeSpec=Dp;fg.deserializeSpec=Dp;fg.getClassName=Wr;fg.getClassName=Wr;var Vja=Object.freeze({__proto__:null,normalizeOptions:nt,ObjectRef:ws,ObjectPool:Vj,requiredModulesOfSnapshot:lt,removeUnreachableObjects:Dm,serialize:Ou,deserialize:Bo,deserializeWithMigrations:ei,copy:Oz,ExpressionSerializer:jo,getSerializableClassMeta:ar,locateClass:oq,serializeSpec:Ao,
deserializeSpec:Dp,getClassName:Wr}),Wja={},hba=Object.prototype.toString,HT=Wja=Array.isArray||DC,Xja={},TG=Xja="2",NP="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,f6={};Em.NONE=0;Em.VTEXT=1;Em.VNODE=2;Em.WIDGET=3;Em.PROPS=4;Em.ORDER=5;Em.INSERT=6;Em.REMOVE=7;Em.THUNK=8;f6=Em;Em.prototype.version=TG;Em.prototype.type="VirtualPatch";var Qw=f6,Yja={},UG=Yja=function(f){return f&&"VirtualNode"===f.type&&f.version===TG},Zja={},YL=Zja=function(f){return f&&"VirtualText"===
f.type&&f.version===TG},$ja={},Dy=$ja=function(f){return f&&"Widget"===f.type},aka={},VG=aka=function(f){return f&&"Thunk"===f.type},bka={},iba=UG,jba=YL,kba=Dy,g6=bka=function(f,k){var n=f,b=k;VG(k)&&(b=YI(k,f));VG(f)&&(n=YI(f,null));return{a:n,b:b}},cka={},ZL=cka=function(f){return"object"===typeof f&&null!==f},dka={},WG=dka=function(f){return f&&("function"===typeof f.hook&&!f.hasOwnProperty("hook")||"function"===typeof f.unhook&&!f.hasOwnProperty("unhook"))},h6={},kZ=ZL,lba=WG;h6=Kx;var i6={},
oba=HT,Gl=Qw,Pz=UG,lZ=YL,$I=Dy,ZI=VG,nba=g6,mba=h6;i6=Gp;var eka={},fka=eka=i6,gka=Object.freeze({}),j6="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,hka={},k6="undefined"!==typeof j6?j6:"undefined"!==typeof window?window:{};if("undefined"!==typeof document)var IT=document;else(IT=k6["__GLOBAL_DOCUMENT_CACHE@4"])||(IT=k6["__GLOBAL_DOCUMENT_CACHE@4"]=gka);var l6=hka=IT,ika={},mZ=WG,m6=ika=function(f,k,n){for(var b in k){var e=k[b];if(void 0===e)Rz(f,b,e,n);else if(mZ(e))Rz(f,
b,e,n),e.hook&&e.hook(f,b,n?n[b]:void 0);else if(ZL(e)){var m=void 0,a=void 0,g=f,l=b,r=n?n[l]:void 0;if("attributes"===l)for(a in e)m=e[a],void 0===m?g.removeAttribute(a):g.setAttribute(a,m);else if(r&&ZL(r)&&Vi(r)!==Vi(e))g[l]=e;else for(m in ZL(g[l])||(g[l]={}),a="style"===l?"":void 0,e)r=e[m],g[l][m]=void 0===r?a:r}else f[b]=e}},jka={},nZ=l6,tba=m6,sba=UG,rba=YL,qba=Dy,pba=g6,n6=jka=pF,kka={},lka=kka=function(f,k){return Dy(f)&&Dy(k)?"name"in f&&"name"in k?f.id===k.id:f.init===k.init:!1},mka=
{},uba={},nka=mka=function(f,k,n,b){return n&&0!==n.length?(n.sort(Sz),cr(f,k,n,b,0)):{}},o6={},vba=Dy;o6=function(f,k,n){var b=f.vNode,e=f.patch;switch(f.type){case Qw.REMOVE:return(e=k.parentNode)&&e.removeChild(k),aJ(k,b),null;case Qw.INSERT:return e=n.render(e,n),k&&k.appendChild(e),k;case Qw.VTEXT:return 3===k.nodeType?(k.replaceData(0,k.length,e.text),e=k):(b=k.parentNode,e=n.render(e,n),b&&e!==k&&b.replaceChild(e,k)),e;case Qw.WIDGET:return e=(f=lka(b,e))?e.update(b,k)||k:n.render(e,n),(n=
k.parentNode)&&e!==k&&n.replaceChild(e,k),f||aJ(k,b),e;case Qw.VNODE:return b=k.parentNode,e=n.render(e,n),b&&e!==k&&b.replaceChild(e,k),e;case Qw.ORDER:b=k.childNodes;n={};for(var m,a=0;a<e.removes.length;a++)m=e.removes[a],f=b[m.from],m.key&&(n[m.key]=f),k.removeChild(f);a=b.length;for(var g=0;g<e.inserts.length;g++)m=e.inserts[g],f=n[m.key],k.insertBefore(f,m.to>=a++?null:b[m.to]);return k;case Qw.PROPS:return m6(k,e,b.properties),k;case Qw.THUNK:return e=n.patch(k,e,n),k&&e&&k!==e&&k.parentNode&&
k.parentNode.replaceChild(e,k),e;default:return k}};var p6={},yba=l6,zba=HT,wba=n6,xba=nka,oZ=o6;p6=bJ;var oka={},pka=oka=p6,Pu="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,q6={},Dba=UG,Eba=Dy,Fba=VG,Cba=WG;q6=qF;var Aba={},Bba=[];qF.prototype.version=TG;qF.prototype.type="VirtualNode";var JT=q6,Gba="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,r6={};r6=FC;FC.prototype.version=TG;FC.prototype.type="VirtualText";var KT=r6,s6={};
s6=function(f){var k=String.prototype.split,n=/()??/.exec("")[1]===f;return function(b,e,m){if("[object RegExp]"!==Object.prototype.toString.call(e))return k.call(b,e,m);var a=[],g=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.extended?"x":"")+(e.sticky?"y":""),l=0;e=new RegExp(e.source,g+"g");var r,v;b+="";n||(r=new RegExp("^"+e.source+"$(?!\\s)",g));for(m=m===f?4294967295:m>>>0;v=e.exec(b);){g=v.index+v[0].length;if(g>l){a.push(b.slice(l,v.index));!n&&1<v.length&&v[0].replace(r,function(){for(var A=
1;A<arguments.length-2;A++)arguments[A]===f&&(v[A]=f)});1<v.length&&v.index<b.length&&Array.prototype.push.apply(a,v.slice(1));var y=v[0].length;l=g;if(a.length>=m)break}e.lastIndex===v.index&&e.lastIndex++}l===b.length?(y||!e.test(""))&&a.push(""):a.push(b.slice(l));return a.length>m?a.slice(0,m):a}}();var qka={},rka=s6,ska=/([\.#]?[a-zA-Z0-9\u007F-\uFFFF_:-]+)/,tka=/^\.|#/,uka=qka=function(f,k){if(!f)return"DIV";var n=!k.hasOwnProperty("id");f=rka(f,ska);var b=null;tka.test(f[1])&&(b="DIV");var e,
m;for(m=0;m<f.length;m++)if(e=f[m]){var a=e.charAt(0);if(b)if("."===a){var g=g||[];g.push(e.substring(1,e.length))}else"#"===a&&n&&(k.id=e.substring(1,e.length));else b=e}g&&(k.className&&g.push(k.className),k.className=g.join(" "));return k.namespace?b:b.toUpperCase()},t6={};t6=GC;GC.prototype.hook=function(f,k){f[k]!==this.value&&(f[k]=this.value)};var vka=t6,u6="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,v6={},LT="undefined"!==typeof window?window:"undefined"!==
typeof u6?u6:{};v6=function(f,k){return f in LT?LT[f]:LT[f]=k};var w6={},x6=v6;w6=function(f,k,n){var b="__INDIVIDUAL_ONE_VERSION_"+f,e=x6(b+"_ENFORCE_SINGLETON",k);if(e!==k)throw Error("Can only have one copy of "+f+".\nYou already have version "+e+" installed.\nThis means you cannot install version "+k);return x6(b,n)};var y6={};w6("ev-store","7");y6=function(f){var k=f["__EV_STORE_KEY@7"];k||(k=f["__EV_STORE_KEY@7"]={});return k};var z6={},A6=y6;z6=Tz;Tz.prototype.hook=function(f,k){f=A6(f);k=
k.substr(3);f[k]=this.value};Tz.prototype.unhook=function(f,k){f=A6(f);k=k.substr(3);f[k]=void 0};var B6={},qZ=HT,pZ=KT,Hba=UG,Iba=YL,Jba=Dy,Kba=VG,wka=z6;B6=function(f,k,n){var b=[],e;if(e=!n)e="string"===typeof k||qZ(k)||cJ(k);if(e){n=k;var m={}}m=m||k||{};f=uka(f,m);if(m.hasOwnProperty("key")){var a=m.key;m.key=void 0}if(m.hasOwnProperty("namespace")){var g=m.namespace;m.namespace=void 0}"INPUT"!==f||g||!m.hasOwnProperty("value")||void 0===m.value||WG(m.value)||(m.value=vka(m.value));k=m;for(var l in k)k.hasOwnProperty(l)&&
(e=k[l],WG(e)||"ev-"===l.substr(0,3)&&(k[l]=wka(e)));void 0!==n&&null!==n&&Vm(n,b,f,m);return new JT(f,m,b,a,g)};var xka={},yka=xka=B6,C6={};C6=n6;var zka={},XG=zka={diff:fka,patch:pka,h:yka,create:C6,VNode:JT,VText:KT},Aka={},Bka=Aka={abbr:"abbr",accept:"accept","accept-charset":"acceptCharset",accesskey:"accessKey",action:"action",allowfullscreen:"allowFullScreen",allowtransparency:"allowTransparency",alt:"alt",async:"async",autocomplete:"autoComplete",autofocus:"autoFocus",autoplay:"autoPlay",
cellpadding:"cellPadding",cellspacing:"cellSpacing",challenge:"challenge",charset:"charset",checked:"checked",cite:"cite","class":"className",cols:"cols",colspan:"colSpan",command:"command",content:"content",contenteditable:"contentEditable",contextmenu:"contextMenu",controls:"controls",coords:"coords",crossorigin:"crossOrigin",data:"data",datetime:"dateTime","default":"default",defer:"defer",dir:"dir",disabled:"disabled",download:"download",draggable:"draggable",dropzone:"dropzone",enctype:"encType",
"for":"htmlFor",form:"form",formaction:"formAction",formenctype:"formEncType",formmethod:"formMethod",formnovalidate:"formNoValidate",formtarget:"formTarget",frameBorder:"frameBorder",headers:"headers",height:"height",hidden:"hidden",high:"high",href:"href",hreflang:"hrefLang","http-equiv":"httpEquiv",icon:"icon",id:"id",inputmode:"inputMode",ismap:"isMap",itemid:"itemId",itemprop:"itemProp",itemref:"itemRef",itemscope:"itemScope",itemtype:"itemType",kind:"kind",label:"label",lang:"lang",list:"list",
loop:"loop",manifest:"manifest",max:"max",maxlength:"maxLength",media:"media",mediagroup:"mediaGroup",method:"method",min:"min",minlength:"minLength",multiple:"multiple",muted:"muted",name:"name",novalidate:"noValidate",open:"open",optimum:"optimum",pattern:"pattern",ping:"ping",placeholder:"placeholder",poster:"poster",preload:"preload",radiogroup:"radioGroup",readonly:"readOnly",rel:"rel",required:"required",role:"role",rows:"rows",rowspan:"rowSpan",sandbox:"sandbox",scope:"scope",scoped:"scoped",
scrolling:"scrolling",seamless:"seamless",selected:"selected",shape:"shape",size:"size",sizes:"sizes",sortable:"sortable",span:"span",spellcheck:"spellCheck",src:"src",srcdoc:"srcDoc",srcset:"srcSet",start:"start",step:"step",style:"style",tabindex:"tabIndex",target:"target",title:"title",translate:"translate",type:"type",typemustmatch:"typeMustMatch",usemap:"useMap",value:"value",width:"width",wmode:"wmode",wrap:"wrap"},D6={};D6={about:null,"accent-height":null,accumulate:null,additive:null,"alignment-baseline":null,
alphabetic:null,amplitude:null,"arabic-form":null,ascent:null,attributeName:null,attributeType:null,azimuth:null,bandwidth:null,baseFrequency:null,baseProfile:null,"baseline-shift":null,bbox:null,begin:null,bias:null,by:null,calcMode:null,"cap-height":null,"class":null,clip:null,"clip-path":null,"clip-rule":null,clipPathUnits:null,color:null,"color-interpolation":null,"color-interpolation-filters":null,"color-profile":null,"color-rendering":null,content:null,contentScriptType:null,contentStyleType:null,
cursor:null,cx:null,cy:null,d:null,datatype:null,defaultAction:null,descent:null,diffuseConstant:null,direction:null,display:null,divisor:null,"dominant-baseline":null,dur:null,dx:null,dy:null,edgeMode:null,editable:null,elevation:null,"enable-background":null,end:null,"ev:event":"http://www.w3.org/2001/xml-events",event:null,exponent:null,externalResourcesRequired:null,fill:null,"fill-opacity":null,"fill-rule":null,filter:null,filterRes:null,filterUnits:null,"flood-color":null,"flood-opacity":null,
focusHighlight:null,focusable:null,"font-family":null,"font-size":null,"font-size-adjust":null,"font-stretch":null,"font-style":null,"font-variant":null,"font-weight":null,format:null,from:null,fx:null,fy:null,g1:null,g2:null,"glyph-name":null,"glyph-orientation-horizontal":null,"glyph-orientation-vertical":null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:null,height:null,"horiz-adv-x":null,"horiz-origin-x":null,"horiz-origin-y":null,id:null,ideographic:null,"image-rendering":null,
"in":null,in2:null,initialVisibility:null,intercept:null,k:null,k1:null,k2:null,k3:null,k4:null,kernelMatrix:null,kernelUnitLength:null,kerning:null,keyPoints:null,keySplines:null,keyTimes:null,lang:null,lengthAdjust:null,"letter-spacing":null,"lighting-color":null,limitingConeAngle:null,local:null,"marker-end":null,"marker-mid":null,"marker-start":null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,
mediaContentEncodings:null,mediaSize:null,mediaTime:null,method:null,min:null,mode:null,name:null,"nav-down":null,"nav-down-left":null,"nav-down-right":null,"nav-left":null,"nav-next":null,"nav-prev":null,"nav-right":null,"nav-up":null,"nav-up-left":null,"nav-up-right":null,numOctaves:null,observer:null,offset:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,"overline-position":null,"overline-thickness":null,"panose-1":null,path:null,pathLength:null,
patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,playbackOrder:null,"pointer-events":null,points:null,pointsAtX:null,pointsAtY:null,pointsAtZ:null,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:null,r:null,radius:null,refX:null,refY:null,rel:null,"rendering-intent":null,repeatCount:null,repeatDur:null,requiredExtensions:null,requiredFeatures:null,requiredFonts:null,requiredFormats:null,resource:null,restart:null,result:null,rev:null,
role:null,rotate:null,rx:null,ry:null,scale:null,seed:null,"shape-rendering":null,slope:null,snapshotTime:null,spacing:null,specularConstant:null,specularExponent:null,spreadMethod:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,"stop-color":null,"stop-opacity":null,"strikethrough-position":null,"strikethrough-thickness":null,string:null,stroke:null,"stroke-dasharray":null,"stroke-dashoffset":null,"stroke-linecap":null,"stroke-linejoin":null,"stroke-miterlimit":null,
"stroke-opacity":null,"stroke-width":null,surfaceScale:null,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:null,tableValues:null,target:null,targetX:null,targetY:null,"text-anchor":null,"text-decoration":null,"text-rendering":null,textLength:null,timelineBegin:null,title:null,to:null,transform:null,transformBehavior:null,type:null,"typeof":null,u1:null,u2:null,"underline-position":null,"underline-thickness":null,unicode:null,
"unicode-bidi":null,"unicode-range":null,"units-per-em":null,"v-alphabetic":null,"v-hanging":null,"v-ideographic":null,"v-mathematical":null,values:null,version:null,"vert-adv-y":null,"vert-origin-x":null,"vert-origin-y":null,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,"word-spacing":null,"writing-mode":null,x:null,"x-height":null,x1:null,x2:null,xChannelSelector:null,"xlink:actuate":"http://www.w3.org/1999/xlink","xlink:arcrole":"http://www.w3.org/1999/xlink","xlink:href":"http://www.w3.org/1999/xlink",
"xlink:role":"http://www.w3.org/1999/xlink","xlink:show":"http://www.w3.org/1999/xlink","xlink:title":"http://www.w3.org/1999/xlink","xlink:type":"http://www.w3.org/1999/xlink","xml:base":"http://www.w3.org/XML/1998/namespace","xml:id":"http://www.w3.org/XML/1998/namespace","xml:lang":"http://www.w3.org/XML/1998/namespace","xml:space":"http://www.w3.org/XML/1998/namespace",y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null};var Cka={},Mba=JT,rZ=KT,MT,sZ=Bka,Lba=D6,Dka=Cka=function(f,
k){if(!f)return ot(document.createTextNode(""));if("string"===typeof f){if(!("DOMParser"in window))throw Error("DOMParser is not available, so parsing string to DOM node is not possible.");MT=MT||new DOMParser;f=MT.parseFromString(f,"text/html");f=f.body.firstChild?f.getElementsByTagName("body")[0].firstChild:f.head.firstChild&&("TITLE"!==f.head.firstChild.tagName||f.title)?f.head.firstChild:f.firstChild&&"HTML"!==f.firstChild.tagName?f.firstChild:document.createTextNode("")}if("object"!==typeof f||
!f||!f.nodeType)throw Error("invalid dom node",f);return ot(f,k)},Eka="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,NT={};!function(f,k){NT?NT=k():(this||Eka)[f]=k()}("bowser",function(){function f(m){function a(T){return(T=m.match(T))&&1<T.length&&T[1]||""}function g(T){return(T=m.match(T))&&1<T.length&&T[2]||""}var l=a(/(ipod|iphone|ipad)/i).toLowerCase(),r=!/like android/i.test(m)&&/android/i.test(m),v=/nexus\s*[0-6]\s*/i.test(m),y=!v&&/nexus\s*[0-9]+/i.test(m),
A=/CrOS/.test(m),E=/silk/i.test(m),F=/sailfish/i.test(m),H=/tizen/i.test(m),I=/(web|hpw)os/i.test(m),M=/windows phone/i.test(m),N=!M&&/windows/i.test(m),W=!l&&!E&&/macintosh/i.test(m),X=!r&&!F&&!H&&!I&&/linux/i.test(m),ea=a(/edge\/(\d+(\.\d+)?)/i),Aa=a(/version\/(\d+(\.\d+)?)/i),Ma=/tablet/i.test(m),K=!Ma&&/[^-]mobi/i.test(m),aa=/xbox/i.test(m);/opera|opr|opios/i.test(m)?A={name:"Opera",opera:!0,version:Aa||a(/(?:opera|opr|opios)[\s\/](\d+(\.\d+)?)/i)}:/coast/i.test(m)?A={name:"Opera Coast",coast:!0,
version:Aa||a(/(?:coast)[\s\/](\d+(\.\d+)?)/i)}:/yabrowser/i.test(m)?A={name:"Yandex Browser",yandexbrowser:!0,version:Aa||a(/(?:yabrowser)[\s\/](\d+(\.\d+)?)/i)}:/ucbrowser/i.test(m)?A={name:"UC Browser",ucbrowser:!0,version:a(/(?:ucbrowser)[\s\/](\d+(?:\.\d+)+)/i)}:/mxios/i.test(m)?A={name:"Maxthon",maxthon:!0,version:a(/(?:mxios)[\s\/](\d+(?:\.\d+)+)/i)}:/epiphany/i.test(m)?A={name:"Epiphany",epiphany:!0,version:a(/(?:epiphany)[\s\/](\d+(?:\.\d+)+)/i)}:/puffin/i.test(m)?A={name:"Puffin",puffin:!0,
version:a(/(?:puffin)[\s\/](\d+(?:\.\d+)?)/i)}:/sleipnir/i.test(m)?A={name:"Sleipnir",sleipnir:!0,version:a(/(?:sleipnir)[\s\/](\d+(?:\.\d+)+)/i)}:/k-meleon/i.test(m)?A={name:"K-Meleon",kMeleon:!0,version:a(/(?:k-meleon)[\s\/](\d+(?:\.\d+)+)/i)}:M?(A={name:"Windows Phone",windowsphone:!0},ea?(A.msedge=!0,A.version=ea):(A.msie=!0,A.version=a(/iemobile\/(\d+(\.\d+)?)/i))):/msie|trident/i.test(m)?A={name:"Internet Explorer",msie:!0,version:a(/(?:msie |rv:)(\d+(\.\d+)?)/i)}:A?A={name:"Chrome",chromeos:!0,
chromeBook:!0,chrome:!0,version:a(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:/chrome.+? edge/i.test(m)?A={name:"Microsoft Edge",msedge:!0,version:ea}:/vivaldi/i.test(m)?A={name:"Vivaldi",vivaldi:!0,version:a(/vivaldi\/(\d+(\.\d+)?)/i)||Aa}:F?A={name:"Sailfish",sailfish:!0,version:a(/sailfish\s?browser\/(\d+(\.\d+)?)/i)}:/seamonkey\//i.test(m)?A={name:"SeaMonkey",seamonkey:!0,version:a(/seamonkey\/(\d+(\.\d+)?)/i)}:/firefox|iceweasel|fxios/i.test(m)?(A={name:"Firefox",firefox:!0,version:a(/(?:firefox|iceweasel|fxios)[ \/](\d+(\.\d+)?)/i)},
/\((mobile|tablet);[^\)]*rv:[\d\.]+\)/i.test(m)&&(A.firefoxos=!0)):E?A={name:"Amazon Silk",silk:!0,version:a(/silk\/(\d+(\.\d+)?)/i)}:/phantom/i.test(m)?A={name:"PhantomJS",phantom:!0,version:a(/phantomjs\/(\d+(\.\d+)?)/i)}:/slimerjs/i.test(m)?A={name:"SlimerJS",slimer:!0,version:a(/slimerjs\/(\d+(\.\d+)?)/i)}:/blackberry|\bbb\d+/i.test(m)||/rim\stablet/i.test(m)?A={name:"BlackBerry",blackberry:!0,version:Aa||a(/blackberry[\d]+\/(\d+(\.\d+)?)/i)}:I?(A={name:"WebOS",webos:!0,version:Aa||a(/w(?:eb)?osbrowser\/(\d+(\.\d+)?)/i)},
/touchpad\//i.test(m)&&(A.touchpad=!0)):/bada/i.test(m)?A={name:"Bada",bada:!0,version:a(/dolfin\/(\d+(\.\d+)?)/i)}:H?A={name:"Tizen",tizen:!0,version:a(/(?:tizen\s?)?browser\/(\d+(\.\d+)?)/i)||Aa}:/qupzilla/i.test(m)?A={name:"QupZilla",qupzilla:!0,version:a(/(?:qupzilla)[\s\/](\d+(?:\.\d+)+)/i)||Aa}:/chromium/i.test(m)?A={name:"Chromium",chromium:!0,version:a(/(?:chromium)[\s\/](\d+(?:\.\d+)?)/i)||Aa}:/chrome|crios|crmo/i.test(m)?A={name:"Chrome",chrome:!0,version:a(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:
r?A={name:"Android",version:Aa}:/safari|applewebkit/i.test(m)?(A={name:"Safari",safari:!0},Aa&&(A.version=Aa)):l?(A={name:"iphone"==l?"iPhone":"ipad"==l?"iPad":"iPod"},Aa&&(A.version=Aa)):A=/googlebot/i.test(m)?{name:"Googlebot",googlebot:!0,version:a(/googlebot\/(\d+(\.\d+))/i)||Aa}:{name:a(/^(.*)\/(.*) /),version:g(/^(.*)\/(.*) /)};!A.msedge&&/(apple)?webkit/i.test(m)?(/(apple)?webkit\/537\.36/i.test(m)?(A.name=A.name||"Blink",A.blink=!0):(A.name=A.name||"Webkit",A.webkit=!0),!A.version&&Aa&&(A.version=
Aa)):!A.opera&&/gecko\//i.test(m)&&(A.name=A.name||"Gecko",A.gecko=!0,A.version=A.version||a(/gecko\/(\d+(\.\d+)?)/i));A.msedge||!r&&!A.silk?l?(A[l]=!0,A.ios=!0):W?A.mac=!0:aa?A.xbox=!0:N?A.windows=!0:X&&(A.linux=!0):A.android=!0;N="";A.windowsphone?N=a(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i):l?(N=a(/os (\d+([_\s]\d+)*) like mac os x/i),N=N.replace(/[_\s]/g,".")):r?N=a(/android[ \/-](\d+(\.\d+)*)/i):A.webos?N=a(/(?:web|hpw)os\/(\d+(\.\d+)*)/i):A.blackberry?N=a(/rim\stablet\sos\s(\d+(\.\d+)*)/i):
A.bada?N=a(/bada\/(\d+(\.\d+)*)/i):A.tizen&&(N=a(/tizen[\/\s](\d+(\.\d+)*)/i));N&&(A.osversion=N);N=N.split(".")[0];if(Ma||y||"ipad"==l||r&&(3==N||4<=N&&!K)||A.silk)A.tablet=!0;else if(K||"iphone"==l||"ipod"==l||r||v||A.blackberry||A.webos||A.bada)A.mobile=!0;A.msedge||A.msie&&10<=A.version||A.yandexbrowser&&15<=A.version||A.vivaldi&&1<=A.version||A.chrome&&20<=A.version||A.firefox&&20<=A.version||A.safari&&6<=A.version||A.opera&&10<=A.version||A.ios&&A.osversion&&6<=A.osversion.split(".")[0]||A.blackberry&&
10.1<=A.version||A.chromium&&20<=A.version?A.a=!0:A.msie&&10>A.version||A.chrome&&20>A.version||A.firefox&&20>A.version||A.safari&&6>A.version||A.opera&&10>A.version||A.ios&&A.osversion&&6>A.osversion.split(".")[0]||A.chromium&&20>A.version?A.c=!0:A.x=!0;return A}function k(m,a){var g=[],l;if(Array.prototype.map)return Array.prototype.map.call(m,a);for(l=0;l<m.length;l++)g=a(m[l]);return g}function n(m){var a=Math.max(m[0].split(".").length,m[1].split(".").length);for(m=k(m,function(g){var l=a-g.split(".").length;
g+=Array(l+1).join(".0");return k(g.split("."),function(r){return Array(20-r.length).join("0")+r}).reverse()});0<=--a;){if(m[0][a]>m[1][a])return 1;if(m[0][a]===m[1][a]){if(0===a)return 0}else return-1}}function b(m,a,g){var l=e;"string"===typeof a&&(g=a,a=void 0);void 0===a&&(a=!1);g&&(l=f(g));g=""+l.version;for(var r in m)if(m.hasOwnProperty(r)&&l[r])return 0>n([g,m[r]]);return a}var e=f("undefined"!==typeof navigator?navigator.userAgent:"");e.test=function(m){for(var a=0;a<m.length;++a){var g=
m[a];if("string"===typeof g&&g in e)return!0}return!1};e.isUnsupportedBrowser=b;e.compareVersions=n;e.check=function(m,a,g){return!b(m,a,g)};e._detect=f;return e});var xs=NT,ys=lively.FreezerRuntime.recorderFor("lively.morphic/config.js");ys.parseURLQuery=function(){if("undefined"===typeof document||!document.location)return{};var f=(document.location.hash||document.location.search).slice(1);f=f&&f.split("&");var k={};if(f)for(var n=0;n<f.length;n++){var b=f[n].split("="),e=b[0],m=!0;if(1<b.length&&
(m=decodeURIComponent(b.slice(1).join("=")),m.match(/^(true|false|null|[0-9"[{].*)$/)))try{m=JSON.parse(m)}catch(a){"["===m[0]&&(m=m.slice(1,-1).split(","))}k[e]=m}return k};ys.Rectangle=He;ys.Color=Fg;ys.bowser=xs;ys.isMac=!!ys.bowser.mac;"undefined"!==typeof $world&&$world.withAllSubmorphsDo(function(f){return f.hasOwnProperty("_cachedKeyhandlers")&&(f._cachedKeyhandlers=null)});ys.config={onloadURLQuery:ys.parseURLQuery(),defaultShadow:{fast:!0,distance:18,blur:30,color:ys.Color.black.withA(.2),
spread:0},undoLevels:20,halosEnabled:!0,altClickDefinesThat:!0,verboseLogging:!0,maxStatusMessages:5,repeatClickInterval:250,longClick:{minDur:500,maxDur:1E3,maxDist:2},showTooltipsAfter:.8,users:{authServerURL:"https://auth.lively-next.org",autoLoginAsGuest:!1},ide:{workerEnabled:!1,js:{ignoredPackages:["lively.web","no group",function(f){return f.includes("lively.morphic/objectdb")||f.includes("lively.next-node_modules")||f.includes("node_modules")||f.includes("custom-npm-modules")||f.includes("mocha-es6")||
f.includes("test-resources/es6")}]},modes:{aliases:{text:"text",sh:"shell",markdown:"md",javascript:"js",htmlmixed:"html",haskell:"hs",python:"py"}}},globalKeyBindings:[{keys:{mac:"Meta-Z",win:"Ctrl-Z"},command:"undo"},{keys:{mac:"Meta-Shift-Z",win:"Ctrl-Shift-Z"},command:"redo"},{keys:"Alt-X",command:"run command"},{keys:{mac:"Meta-S",win:"Ctrl-S"},command:"save world"},{keys:"Meta-Shift-L s a v e",command:"save this world"},{keys:"Meta-H",command:"show halo for focused morph"},{keys:"Meta-Shift-L C O P Y",
command:"copy morph"},{keys:"Alt-M",command:"select morph"},{keys:"Escape",command:"escape"},{keys:{win:"Ctrl-Escape",mac:"Meta-Escape"},command:"close active window or morph"},{keys:"Alt-Shift-C",command:"toggle minimize active window"},{keys:{mac:"Meta-Shift-L W S",win:"Ctrl-Shift-L W S"},command:"search workspaces"},{keys:{mac:"Meta-O",win:"Ctrl-O"},command:"open status message of focused morph"},{keys:{win:"Ctrl-K",mac:"Meta-K"},command:{command:"open workspace",onlyWhenFocused:!1,args:{askForMode:!0}}},
{keys:"Alt-Shift-1",command:{command:"open shell terminal",onlyWhenFocused:!1}},{keys:{win:"Ctrl-B",mac:"Meta-B"},command:{command:"open browser",onlyWhenFocused:!1}},{keys:{win:"Ctrl-P",mac:"Meta-P"},command:{command:"open PartsBin",onlyWhenFocused:!0}},{keys:"Alt-T",command:{command:"choose and browse module",onlyWhenFocused:!1}},{keys:"Alt-Shift-T",command:{command:"choose and browse package resources",onlyWhenFocused:!1}},{keys:{mac:"Ctrl-X D"},command:"open file browser"},{keys:{mac:"Ctrl-X Ctrl-F"},
command:"open file"},{keys:{win:"Ctrl-Shift-F",mac:"Meta-Shift-F"},command:{command:"open code search",onlyWhenFocused:!1}},{keys:"Left",command:{command:"move or resize halo target",args:{what:"move",direction:"left",offset:1}}},{keys:"Right",command:{command:"move or resize halo target",args:{what:"move",direction:"right",offset:1}}},{keys:"Up",command:{command:"move or resize halo target",args:{what:"move",direction:"up",offset:1}}},{keys:"Down",command:{command:"move or resize halo target",args:{what:"move",
direction:"down",offset:1}}},{keys:"Meta-Left",command:{command:"move or resize halo target",args:{what:"move",direction:"left",offset:10}}},{keys:"Meta-Right",command:{command:"move or resize halo target",args:{what:"move",direction:"right",offset:10}}},{keys:"Meta-Up",command:{command:"move or resize halo target",args:{what:"move",direction:"up",offset:10}}},{keys:"Meta-Down",command:{command:"move or resize halo target",args:{what:"move",direction:"down",offset:10}}},{keys:"Alt-Left",command:{command:"move or resize halo target",
args:{what:"move",direction:"left",offset:100}}},{keys:"Alt-Right",command:{command:"move or resize halo target",args:{what:"move",direction:"right",offset:100}}},{keys:"Alt-Up",command:{command:"move or resize halo target",args:{what:"move",direction:"up",offset:100}}},{keys:"Alt-Down",command:{command:"move or resize halo target",args:{what:"move",direction:"down",offset:100}}},{keys:"Shift-Left",command:{command:"move or resize halo target",args:{what:"resize",direction:"left",offset:1}}},{keys:"Shift-Right",
command:{command:"move or resize halo target",args:{what:"resize",direction:"right",offset:1}}},{keys:"Shift-Up",command:{command:"move or resize halo target",args:{what:"resize",direction:"up",offset:1}}},{keys:"Shift-Down",command:{command:"move or resize halo target",args:{what:"resize",direction:"down",offset:1}}},{keys:"Meta-Shift-Left",command:{command:"move or resize halo target",args:{what:"resize",direction:"left",offset:10}}},{keys:"Meta-Shift-Right",command:{command:"move or resize halo target",
args:{what:"resize",direction:"right",offset:10}}},{keys:"Meta-Shift-Up",command:{command:"move or resize halo target",args:{what:"resize",direction:"up",offset:10}}},{keys:"Meta-Shift-Down",command:{command:"move or resize halo target",args:{what:"resize",direction:"down",offset:10}}},{keys:"Alt-Shift-Left",command:{command:"move or resize halo target",args:{what:"resize",direction:"left",offset:100}}},{keys:"Alt-Shift-Right",command:{command:"move or resize halo target",args:{what:"resize",direction:"right",
offset:100}}},{keys:"Alt-Shift-Up",command:{command:"move or resize halo target",args:{what:"resize",direction:"up",offset:100}}},{keys:"Alt-Shift-Down",command:{command:"move or resize halo target",args:{what:"resize",direction:"down",offset:100}}},{keys:{win:"Ctrl-`|Alt-`",mac:"Meta-1"},command:"window switcher"},{keys:{mac:"Meta-Shift-L R E S 1",win:"Ctrl-Shift-L R E S 1"},command:{command:"resize active window",args:{how:"col1"}}},{keys:{mac:"Meta-Shift-L R E S 2",win:"Ctrl-Shift-L R E S 2"},
command:{command:"resize active window",args:{how:"col2"}}},{keys:{mac:"Meta-Shift-L R E S 3",win:"Ctrl-Shift-L R E S 3"},command:{command:"resize active window",args:{how:"col3"}}},{keys:{mac:"Meta-Shift-L R E S 4",win:"Ctrl-Shift-L R E S 4"},command:{command:"resize active window",args:{how:"col4"}}},{keys:{mac:"Meta-Shift-L R E S 5",win:"Ctrl-Shift-L R E S 5"},command:{command:"resize active window",args:{how:"col5"}}},{keys:{mac:"Meta-Shift-L R E S Alt-1",win:"Ctrl-Shift-L R E S Alt-1"},command:{command:"resize active window",
args:{how:"quadrant1"}}},{keys:{mac:"Meta-Shift-L R E S Alt-2",win:"Ctrl-Shift-L R E S Alt-2"},command:{command:"resize active window",args:{how:"quadrant2"}}},{keys:{mac:"Meta-Shift-L R E S Alt-3",win:"Ctrl-Shift-L R E S Alt-3"},command:{command:"resize active window",args:{how:"quadrant3"}}},{keys:{mac:"Meta-Shift-L R E S Alt-4",win:"Ctrl-Shift-L R E S Alt-4"},command:{command:"resize active window",args:{how:"quadrant4"}}},{keys:{mac:"Meta-Shift-L R E S Alt-5",win:"Ctrl-Shift-L R E S Alt-5"},command:{command:"resize active window",
args:{how:"quadrant5"}}},{keys:{mac:"Meta-Shift-L R E S Alt-6",win:"Ctrl-Shift-L R E S Alt-6"},command:{command:"resize active window",args:{how:"quadrant6"}}},{keys:{mac:"Meta-Shift-L R E S Alt-7",win:"Ctrl-Shift-L R E S Alt-7"},command:{command:"resize active window",args:{how:"quadrant7"}}},{keys:{mac:"Meta-Shift-L R E S Alt-8",win:"Ctrl-Shift-L R E S Alt-8"},command:{command:"resize active window",args:{how:"quadrant8"}}},{keys:{mac:"Meta-Shift-L R E S Alt-9",win:"Ctrl-Shift-L R E S Alt-9"},command:{command:"resize active window",
args:{how:"quadrant9"}}},{keys:{mac:"Meta-Shift-L R E S Alt-0",win:"Ctrl-Shift-L R E S Alt-0"},command:{command:"resize active window",args:{how:"quadrant0"}}},{keys:{mac:"Meta-Shift-L R E S C",win:"Ctrl-Shift-L R E S C"},command:{command:"resize active window",args:{how:"center"}}},{keys:{mac:"Meta-Shift-L R E S L",win:"Ctrl-Shift-L R E S L"},command:{command:"resize active window",args:{how:"left"}}},{keys:{mac:"Meta-Shift-L R E S R",win:"Ctrl-Shift-L R E S R"},command:{command:"resize active window",
args:{how:"right"}}},{keys:{mac:"Meta-Shift-L R E S F",win:"Ctrl-Shift-L R E S F"},command:{command:"resize active window",args:{how:"full"}}},{keys:{mac:"Meta-Shift-L R E S T",win:"Ctrl-Shift-L R E S T"},command:{command:"resize active window",args:{how:"top"}}},{keys:{mac:"Meta-Shift-L R E S H T",win:"Ctrl-Shift-L R E S H T"},command:{command:"resize active window",args:{how:"halftop"}}},{keys:{mac:"Meta-Shift-L R E S B",win:"Ctrl-Shift-L R E S B"},command:{command:"resize active window",args:{how:"bottom"}}},
{keys:{mac:"Meta-Shift-L R E S H B",win:"Ctrl-Shift-L R E S H B"},command:{command:"resize active window",args:{how:"halfbottom"}}},{keys:{mac:"Meta-Shift-L R E S Escape",win:"Ctrl-Shift-L R E S Escape"},command:{command:"resize active window",args:{how:"reset"}}}],text:{basicFontItems:"Sans-serif;serif;Monospace;Arial Black;Arial Narrow;Comic Sans MS;Garamond;Tahoma;Trebuchet MS;Verdana;custom...".split(";"),cursorBlinkPeriod:.5,useSoftTabs:!0,tabWidth:2,markStackSize:16,undoLevels:50,clipboardBufferLength:100,
useMultiSelect:!0,undoGroupDelay:600,defaultKeyBindings:[{keys:{win:"Ctrl-C",mac:"Meta-C"},command:{command:"clipboard copy",passEvent:!0}},{keys:"Ctrl-W",command:{command:"manual clipboard copy",args:{"delete":!0}}},{keys:"Alt-W",command:"manual clipboard copy"},{keys:"Ctrl-Y",command:"manual clipboard paste"},{keys:"Alt-Y",command:{command:"manual clipboard paste",args:{killRingCycleBack:!0}}},{keys:{win:"Ctrl-X",mac:"Meta-X"},command:{command:"clipboard cut",passEvent:!0}},{keys:{win:"Ctrl-V",
mac:"Meta-V"},command:{command:"clipboard paste",passEvent:!0}},{keys:{win:"Ctrl-Z|Ctrl-Shift--",mac:"Meta-Z|Ctrl-Shift--|Ctrl-x u"},command:"text undo"},{keys:{win:"Ctrl-Shift-Z",mac:"Meta-Shift-Z"},command:"text redo"},{keys:{win:"Ctrl-A|Ctrl-X H",mac:"Meta-A|Ctrl-X H"},command:"select all"},{keys:{win:"Alt-Enter",mac:"Meta-D|Alt-Enter"},command:"doit"},{keys:{mac:"Meta-Shift-L X B"},command:"eval all"},{keys:{win:"Alt-Ctrl-Enter",mac:"Meta-P"},command:"printit"},{keys:{win:"Alt-Ctrl-Shift-Enter",
mac:"Meta-I"},command:"print inspectit"},{keys:{win:"Ctrl-Shift-I",mac:"Meta-Shift-I"},command:"inspectit"},{keys:{win:"Ctrl-Shift-E",mac:"Meta-Shift-E"},command:"editit"},{keys:{win:"Ctrl-Shift-U",mac:"Meta-Shift-U"},command:"undefine variable"},{keys:"Backspace",command:"delete backwards"},{keys:{win:"Delete",mac:"Delete|Ctrl-D"},command:"delete"},{keys:{win:"Left|Ctrl-B",mac:"Left|Ctrl-B"},command:"go left"},{keys:{win:"Right|Ctrl-F",mac:"Right|Ctrl-F"},command:"go right"},{keys:{win:"Up|Ctrl-P",
mac:"Up|Ctrl-P"},command:"go up"},{keys:{win:"Down|Ctrl-N",mac:"Down|Ctrl-N"},command:"go down"},{keys:"Shift-Left",command:"select left"},{keys:"Shift-Right",command:"select right"},{keys:"Shift-Up",command:"select up"},{keys:"Shift-Down",command:"select down"},{keys:{win:"Ctrl-Right",mac:"Alt-Right|Alt-F"},command:"goto word right"},{keys:{win:"Ctrl-Left",mac:"Alt-Left|Alt-B"},command:"goto word left"},{keys:{win:"Ctrl-Shift-Right",mac:"Alt-Shift-Right|Alt-Shift-F"},command:{command:"goto word right",
args:{select:!0}}},{keys:{win:"Ctrl-Shift-Left",mac:"Alt-Shift-Left|Alt-Shift-B"},command:{command:"goto word left",args:{select:!0}}},{keys:{win:"Ctrl-Backspace",mac:"Alt-Backspace"},command:"delete word left"},{keys:"Alt-D",command:"delete word right"},{keys:{win:"Alt-Ctrl-K",mac:"Alt-Ctrl-K"},command:"delete word right"},{keys:"Alt-Shift-2",command:"select word right"},{keys:"Ctrl-X Ctrl-X",command:"reverse selection"},{keys:{win:"Ctrl-Shift-L",mac:"Meta-L"},command:"select line"},{keys:{win:"Shift-Home",
mac:"Shift-Home|Ctrl-Shift-A"},command:{command:"goto line start",args:{select:!0}}},{keys:{win:"Home",mac:"Home|Ctrl-A"},command:{command:"goto line start",args:{select:!1}}},{keys:{win:"Shift-End",mac:"Shift-End|Ctrl-Shift-E"},command:{command:"goto line end",args:{select:!0}}},{keys:{win:"End",mac:"End|Ctrl-E"},command:{command:"goto line end",args:{select:!1}}},{keys:"Ctrl-C J",command:{command:"join line",args:{withLine:"before"}}},{keys:"Ctrl-C Shift-J",command:{command:"join line",args:{withLine:"after"}}},
{keys:{win:"Ctrl-Shift-D",mac:"Meta-Shift-D|Ctrl-C P"},command:"duplicate line or selection"},{keys:{win:"Ctrl-Shift-Backspace",mac:"Meta-Backspace"},command:"delete left until beginning of line"},{keys:"Ctrl-K",command:"delete emtpy line or until end of line"},{keys:{win:"Ctrl-Alt-Up|Ctrl-Alt-P",mac:"Ctrl-Meta-Up|Ctrl-Meta-P"},command:"move lines up"},{keys:{win:"Ctrl-Alt-Down|Ctrl-Alt-N",mac:"Ctrl-Meta-Down|Ctrl-Meta-N"},command:"move lines down"},{keys:{win:"PageDown",mac:"PageDown|Ctrl-V"},command:"goto page down"},
{keys:{win:"PageUp",mac:"PageUp|Alt-V"},command:"goto page up"},{keys:{win:"Shift-PageDown",mac:"Shift-PageDown"},command:"goto page down and select"},{keys:{win:"Shift-PageUp",mac:"Shift-PageUp"},command:"goto page up and select"},{keys:"Alt-Ctrl-,",command:"move cursor to screen top in 1/3 steps"},{keys:"Alt-Ctrl-.",command:"move cursor to screen bottom in 1/3 steps"},{keys:{win:"Alt-Left",mac:"Meta-Left"},command:"goto matching left"},{keys:{win:"Alt-Shift-Left",mac:"Meta-Shift-Left"},command:{command:"goto matching left",
args:{select:!0}}},{keys:{win:"Alt-Right",mac:"Meta-Right"},command:"goto matching right"},{keys:{win:"Alt-Shift-Right",mac:"Meta-Shift-Right"},command:{command:"goto matching right",args:{select:!0}}},{keys:"Alt-Ctrl-B",command:"goto matching left"},{keys:"Alt-Ctrl-F",command:"goto matching right"},{keys:"Ctrl-Up",command:"goto paragraph above"},{keys:"Ctrl-Down",command:"goto paragraph below"},{keys:{win:"Ctrl-Shift-Home",mac:"Meta-Shift-Up"},command:{command:"goto start",args:{select:!0}}},{keys:{win:"Ctrl-Shift-End",
mac:"Meta-Shift-Down"},command:{command:"goto end",args:{select:!0}}},{keys:{win:"Ctrl-Home",mac:"Meta-Up|Meta-Home|Alt-Shift-,"},command:"goto start"},{keys:{win:"Ctrl-End",mac:"Meta-Down|Meta-End|Alt-Shift-."},command:"goto end"},{keys:"Ctrl-L",command:"realign top-bottom-center"},{keys:{win:"Ctrl-Shift-L",mac:"Ctrl-Shift-L|Alt-G G"},command:"goto line"},{keys:"Enter",command:"newline"},{keys:"Space",command:{command:"insertstring",args:{string:" ",undoGroup:!0}}},{keys:"Tab",command:{command:"tab - snippet expand or indent"}},
{keys:{win:"Ctrl-]",mac:"Meta-]"},command:"indent"},{keys:{win:"Ctrl-[",mac:"Meta-["},command:"outdent"},{keys:{win:"Ctrl-Enter",mac:"Meta-Enter"},command:{command:"insert line",args:{where:"below"}}},{keys:"Shift-Enter",command:{command:"insert line",args:{where:"above"}}},{keys:"Ctrl-O",command:"split line"},{keys:{mac:"Ctrl-X Ctrl-T"},command:"transpose chars"},{keys:{mac:"Ctrl-C Ctrl-U"},command:"uppercase"},{keys:{mac:"Ctrl-C Ctrl-L"},command:"lowercase"},{keys:{mac:"Meta-Shift-L W t"},command:"remove trailing whitespace"},
{keys:{mac:"Ctrl-Space"},command:"toggle active mark"},{keys:{mac:"Meta-Shift-L M O D E"},command:"change editor mode"},{keys:{mac:"Meta-Shift-L L T"},command:"toggle line wrapping"},{keys:"Esc|Ctrl-G",command:"cancel input"},{keys:{win:"Ctrl-/",mac:"Meta-/"},command:"toggle comment"},{keys:{win:"Alt-Ctrl-/",mac:"Alt-Meta-/|Alt-Meta-\u00f7"},command:"toggle block comment"},{keys:"Meta-Shift-L /  D",command:"comment box"},{keys:{win:"Ctrl-.",mac:"Meta-."},command:"[IyGotoChar] activate"},{keys:{win:"Ctrl-,",
mac:"Meta-,"},command:{command:"[IyGotoChar] activate",args:{backwards:!0}}},{keys:{win:"Ctrl-Space|Ctrl-Shift-P",mac:"Alt-Shift-Space|Alt-Space|Meta-Shift-P"},command:"text completion"},{keys:"\u00f7|Alt-/",command:"text completion first match"},{keys:"Alt-Q",command:"fit text to column"},{keys:{win:"Ctrl-F|Ctrl-G|F3",mac:"Meta-F|Meta-G|Ctrl-S"},command:"search in text"},{keys:{win:"Ctrl-Shift-F|Ctrl-Shift-G",mac:"Meta-Shift-F|Meta-Shift-G|Ctrl-R"},command:{command:"search in text",args:{backwards:!0}}},
{keys:"Ctrl-Shift-/|Ctrl-C Ctrl-Shift-,",command:"[multi select] all like this"},{keys:"Alt-Ctrl-P",command:"[multi select] add cursor above"},{keys:"Alt-Ctrl-N",command:"[multi select] add cursor below"},{keys:"Ctrl-Shift-,",command:"[multi select] more like this backward"},{keys:"Ctrl-Shift-.",command:"[multi select] more like this forward"},{keys:{mac:"Meta-Shift-,"},command:"[multi select] goto previous focused cursor"},{keys:{mac:"Meta-Shift-."},command:"[multi select] goto next focused cursor"},
{keys:"Ctrl-Shift-;",command:"[multi select] remove focused cursor"},{keys:"Alt-Ctrl-A",command:"[multi select] align cursors"},{keys:"Ctrl-X R",command:"[multi select] create rectangular selection"},{keys:{win:"Shift-Ctrl-S|Ctrl-Alt-Space",mac:"Ctrl-Command-space|Ctrl-Alt-Space"},command:"contractRegion"},{keys:{win:"Shift-Ctrl-E|Ctrl-Shift-Space",mac:"Shift-Command-Space|Ctrl-Shift-Space"},command:"expandRegion"},{keys:"Ctrl-Alt-h",command:"markDefun"},{keys:"Ctrl-Alt-d|Ctrl-Alt-Down",command:"forwardDownSexp"},
{keys:"Ctrl-Alt-u|Ctrl-Alt-Up",command:"backwardUpSexp"},{keys:"Ctrl-Alt-b|Ctrl-Alt-Left",command:"backwardSexp"},{keys:"Ctrl-Alt-f|Ctrl-Alt-Right",command:"forwardSexp"},{keys:"Alt-.",command:"selectDefinition"},{keys:"Ctrl-Shift-'",command:"selectSymbolReferenceOrDeclaration"},{keys:"Ctrl-Shift-[",command:"selectSymbolReferenceOrDeclarationPrev"},{keys:"Ctrl-Shift-]",command:"selectSymbolReferenceOrDeclarationNext"},{keys:{win:"Ctrl-=",mac:"Meta-="},command:"increase font size"},{keys:{win:"Ctrl--",
mac:"Meta--"},command:"decrease font size"},{keys:"Alt-K",command:"set link of selection"},{keys:"Alt-O",command:"set doit of selection"},{keys:{win:"Ctrl-\\",mac:"Meta-\\"},command:"reset text style"},{keys:{win:"Ctrl-Shift-L T U I",mac:"Meta-Shift-L T U I"},command:"open text attribute controls"},{keys:{win:"Ctrl-Shift-L T D",mac:"Meta-Shift-L T D"},command:"[todo] toggle todo marker"},{keys:{win:"Ctrl-Shift-L D A T E",mac:"Meta-Shift-L D A T E"},command:"insert date"},{keys:"Ctrl-C Ctrl-I",command:"change string inflection"},
{keys:"Alt-Shift-4",command:"spell check word"},{keys:"Alt-Shift-\\",command:"[shell] run shell command on region"},{keys:"Alt-Shift-;",command:"run code on text morph"},{keys:{win:"Ctrl-Shift-L O P E N",mac:"Meta-Shift-L O P E N"},command:"open file at cursor"},{keys:"Meta-F1",command:"report token at cursor"}]},codeEditor:{defaultTheme:"default",collapseSelection:!1,search:{maxCharsPerLine:1E4,fastHighlightLineCount:4E3,showTextMap:!0},defaultStyle:{fontFamily:"IBM Plex Mono",padding:ys.Rectangle.inset(4,
2,4,2),fontSize:12,clipMode:"auto"},modes:{text:{style:{}}}},systemBrowser:{fixUndeclaredVarsOnSave:!0},objectEditor:{fixUndeclaredVarsOnSave:!0},remotes:{server:System.get("@system-env").browser?document.location.origin+"/eval":null},css:{ibmPlex:"/lively.morphic/assets/ibm-plex/css/ibm-plex.css",fontAwesome:"/lively.morphic/assets/fontawesome-free-5.12.1/css/all.css",inconsolata:"/lively.morphic/assets/inconsolata/inconsolata.css"}};var Dn=Da("aa",ys.config);ys.default=Dn;var Ki=lively.FreezerRuntime.recorderFor("lively.morphic/rendering/property-dom-mapping.js");
Ki.styleProps=Uz;Ki.addTransform=rF;Ki.addTransformOrigin=function(f,k){if(f=f.origin)k.transformOrigin=f.x+"px "+f.y+"px"};Ki.addDisplay=function(f,k){f=f.visible;null!=f&&(k.display=f?"":"none")};Ki.addBorderRadius=function(f,k){var n=f.borderRadiusLeft,b=f.borderRadiusRight,e=f.borderRadiusBottom;f=f.borderRadiusTop;k.borderRadius=f+"px "+f+"px "+e+"px "+e+"px / "+n+"px "+b+"px "+b+"px "+n+"px"};Ki.addBorder=function(f,k){var n=f.borderWidthLeft,b=f.borderColorLeft,e=f.borderStyleLeft,m=f.borderWidthRight,
a=f.borderColorRight,g=f.borderStyleRight,l=f.borderColor,r=f.borderWidthBottom,v=f.borderColorBottom,y=f.borderStyleBottom,A=f.borderWidthTop,E=f.borderColorTop;f=f.borderStyleTop;var F=function(H){return Ki.bowser.safari?Ki.string.camelize(H):H};k[F("border-left-style")]=""+e;k[F("border-right-style")]=""+g;k[F("border-bottom-style")]=""+y;k[F("border-top-style")]=""+f;k[F("border-left-width")]=n+"px";k[F("border-right-width")]=m+"px";k[F("border-bottom-width")]=r+"px";k[F("border-top-width")]=
A+"px";k[F("border-top-color")]=E?E.toString():"transparent";k[F("border-right-color")]=a?a.toString():"transparent";k[F("border-bottom-color")]=v?v.toString():"transparent";k[F("border-left-color")]=b?b.toString():"transparent";l&&l.isGradient&&(k["border-image"]=l.toString())};Ki.addFill=function(f,k){(f=f.fill)?f.isGradient?k.backgroundImage=f.toString():k.background=f.toString():k.background=Ki.Color.transparent.toString()};Ki.addExtentStyle=function(f,k){f=f.extent;k.width=f.x+"px";k.height=
f.y+"px"};Ki.shadowCss=function(f){return f.dropShadow?f.dropShadow.toFilterCss():""};Ki.addShadowStyle=function(f,k){f.isSvgMorph||f.isImage?k.filter=Ki.shadowCss(f):(f=f.dropShadow)&&f.fast||f&&f.inset?k.boxShadow=f?f.toCss():"none":k.filter=f?f.toFilterCss():""};Ki.addSvgAttributes=Nx;Ki.getSvgVertices=Ox;Ki.addPathAttributes=Vz;Ki.addSvgBorderStyle=function(f,k){var n=f.borderStyle.valueOf();"dashed"===n?(f=f.borderWidth.valueOf(),k["stroke-dasharray"]=1.61*f+" "+f):"dotted"===n&&(k["stroke-dasharray"]=
"1 "+2*f.borderWidth.valueOf(),k["stroke-linecap"]="round",k["stroke-linejoin"]="round");return k};Ki.Color=Fg;Ki.string=pi;Ki.bowser=xs;Ki.styleProps=Uz;Ki.styleProps=Uz;Ki.addTransform=rF;Ki.addTransform=rF;Ki.addSvgAttributes=Nx;Ki.addSvgAttributes=Nx;Ki.getSvgVertices=Ox;Ki.getSvgVertices=Ox;Ki.addPathAttributes=Vz;Ki.addPathAttributes=Vz;var bf=lively.FreezerRuntime.recorderFor("lively.morphic/rendering/morphic-default.js");bf.defaultStyle=Px;bf.MorphAfterRenderHook=function(f,k){this.morph=
f;this.renderer=k};bf.Animation=function(f){this.morph=f};bf.SvgAnimation=HC;bf.defaultAttributes=Qx;bf.svgAttributes=Wz;bf.pathAttributes=IC;bf.renderGradient=JC;bf.initDOMState=function(f,k){f.rootNode.appendChild(f.domNode);f.ensureDefaultCSS().then(function(){return bf.promise.delay(500)}).then(function(){return k.env.fontMetric&&k.env.fontMetric.reset()}).then(function(){return k.withAllSubmorphsDo(function(n){if(n.isText||n.isLabel){var b=(n.metadata||{}).serializationInfo;b&&b.recoveredTextBounds||
n.forceRerender()}})}).catch(function(n){return console.error(n)})};bf.renderMorph=KC;bf.renderSubTree=LC;bf.renderRootMorph=rw;bf.vdom=XG;bf.parser=Dka;bf.num=Nm;bf.obj=Ag;bf.arr=$f;bf.properties=up;bf.promise=zh;bf.Color=Fg;bf.RadialGradient=Lp;bf.pt=xi;bf.Point=Lg;bf.LinearGradient=Bn;bf.rect=zm;bf.config=Dn;bf.styleProps=Uz;bf.addSvgAttributes=Nx;bf.addPathAttributes=Vz;bf.bowser=xs;var $L=bf.vdom;bf.h=$L.h;bf.diff=$L.diff;bf.patch=$L.patch;bf.createNode=$L.create;bf.defaultCSS="\n\n/*-=- html fixes -=-*/\n\nhtml {\n  overflow: visible;\n}\n\ntextarea.lively-text-input.debug {\n  z-index: 20 !important;\n  opacity: 1 !important;\n  background: rgba(0,255,0,0.5) !important;\n}\n\n.no-html-select {\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -khtml-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n\n.hiddenScrollbar::-webkit-scrollbar {\n  /* This is the magic bit */\n  display: none;\n}\n\n\n/*-=- generic morphic -=-*/\n\n.Morph {\n  outline: none;\n  /*for aliasing issue in chrome: http://stackoverflow.com/questions/6492027/css-transform-jagged-edges-in-chrome*/\n  /* -webkit-backface-visibility: hidden; */\n\n  /*include border size in extent of element*/\n  box-sizing: border-box;\n\n  /*don't use dom selection on morphs*/\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -khtml-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n\n.Morph img {\n  -moz-user-select: none;\n}\n\n.Tooltip {\n  z-index: 3;\n}\n\n.Hand {\n  z-index: 1;\n}\n\n/*-=- halos -=-*/\n\n.Halo {\n  z-index: 2;\n}\n\n.ProportionalLayoutHalo, .FlexLayoutHalo, .GridLayoutHalo, .TilingLayoutHalo {\n  z-index: auto;\n}\n\n.HaloItem:not(.NameHaloItem) {\n  /*FIXME: we shouldn't need to hardcode the size...*/\n  line-height: 24px !important;\n  text-align: center;\n  vertical-align: middle;\n}\n\n.halo-mesh {\n  background-color:transparent;\n  background-image: linear-gradient(rgba(0,0,0,.1) 2px, transparent 2px),\n  linear-gradient(90deg, rgba(0,0,0,.1) 2px, transparent 2px),\n  linear-gradient(rgba(0,0,0,.1) 1px, transparent 1px),\n  linear-gradient(90deg, rgba(0,0,0,.1) 1px, transparent 1px);\n  background-size:100px 100px, 100px 100px, 10px 10px, 10px 10px;\n  background-position:-2px -2px, -2px -2px, -1px -1px, -1px -1px;\n}\n\n/*-=- text -=-*/\n\n.center-text {\n  text-align: center;\n}\n\n.v-center-text {\n  position: relative;\n  top: 50%;\n}\n\ndiv.text-layer span {\n  line-height: normal;\n}\n\n/*-=- text -=-*/\n\n.Label span {\n  white-space: pre;\n  float: left;\n  line-height: initial;\n  -moz-user-select: none;\n}\n\n.Text .annotation {\n  text-align: right;\n  position: absolute;\n  right: 0;\n}\n\n.Label .annotation {\n/*  vertical-align: middle;\n  height: 100%;*/\n  /*vertical align*/\n  float: right;\n  position: relative;\n  top: 50%;\n  text-align: right;\n}\n\n.truncated-text {\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n/*-=- input elements -=-*/\n\ninput::-webkit-input-placeholder {\n  color: rgb(202, 202, 202);\n}\ninput::-moz-placeholder {\n  color: rgb(202, 202, 202);\n}\ninput:-ms-input-placeholder {\n  color: rgb(202, 202, 202);\n}\ninput:-moz-placeholder {\n  color: rgb(202, 202, 202);\n}\ninput:placeholder {\n  color: rgb(202, 202, 202);\n}\n\n/*-=- input elements -=-*/\n.Morph svg .path-point {\n  cursor: move; /* fallback if grab cursor is unsupported */\n  cursor: grab;\n  cursor: -moz-grab;\n  cursor: -webkit-grab;\n  fill: red;\n}\n\n";
bf.defaultCSS="\n\n/*-=- html fixes -=-*/\n\nhtml {\n  overflow: visible;\n}\n\ntextarea.lively-text-input.debug {\n  z-index: 20 !important;\n  opacity: 1 !important;\n  background: rgba(0,255,0,0.5) !important;\n}\n\n.no-html-select {\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -khtml-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n\n.hiddenScrollbar::-webkit-scrollbar {\n  /* This is the magic bit */\n  display: none;\n}\n\n\n/*-=- generic morphic -=-*/\n\n.Morph {\n  outline: none;\n  /*for aliasing issue in chrome: http://stackoverflow.com/questions/6492027/css-transform-jagged-edges-in-chrome*/\n  /* -webkit-backface-visibility: hidden; */\n\n  /*include border size in extent of element*/\n  box-sizing: border-box;\n\n  /*don't use dom selection on morphs*/\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -khtml-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n\n.Morph img {\n  -moz-user-select: none;\n}\n\n.Tooltip {\n  z-index: 3;\n}\n\n.Hand {\n  z-index: 1;\n}\n\n/*-=- halos -=-*/\n\n.Halo {\n  z-index: 2;\n}\n\n.ProportionalLayoutHalo, .FlexLayoutHalo, .GridLayoutHalo, .TilingLayoutHalo {\n  z-index: auto;\n}\n\n.HaloItem:not(.NameHaloItem) {\n  /*FIXME: we shouldn't need to hardcode the size...*/\n  line-height: 24px !important;\n  text-align: center;\n  vertical-align: middle;\n}\n\n.halo-mesh {\n  background-color:transparent;\n  background-image: linear-gradient(rgba(0,0,0,.1) 2px, transparent 2px),\n  linear-gradient(90deg, rgba(0,0,0,.1) 2px, transparent 2px),\n  linear-gradient(rgba(0,0,0,.1) 1px, transparent 1px),\n  linear-gradient(90deg, rgba(0,0,0,.1) 1px, transparent 1px);\n  background-size:100px 100px, 100px 100px, 10px 10px, 10px 10px;\n  background-position:-2px -2px, -2px -2px, -1px -1px, -1px -1px;\n}\n\n/*-=- text -=-*/\n\n.center-text {\n  text-align: center;\n}\n\n.v-center-text {\n  position: relative;\n  top: 50%;\n}\n\ndiv.text-layer span {\n  line-height: normal;\n}\n\n/*-=- text -=-*/\n\n.Label span {\n  white-space: pre;\n  float: left;\n  line-height: initial;\n  -moz-user-select: none;\n}\n\n.Text .annotation {\n  text-align: right;\n  position: absolute;\n  right: 0;\n}\n\n.Label .annotation {\n/*  vertical-align: middle;\n  height: 100%;*/\n  /*vertical align*/\n  float: right;\n  position: relative;\n  top: 50%;\n  text-align: right;\n}\n\n.truncated-text {\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n/*-=- input elements -=-*/\n\ninput::-webkit-input-placeholder {\n  color: rgb(202, 202, 202);\n}\ninput::-moz-placeholder {\n  color: rgb(202, 202, 202);\n}\ninput:-ms-input-placeholder {\n  color: rgb(202, 202, 202);\n}\ninput:-moz-placeholder {\n  color: rgb(202, 202, 202);\n}\ninput:placeholder {\n  color: rgb(202, 202, 202);\n}\n\n/*-=- input elements -=-*/\n.Morph svg .path-point {\n  cursor: move; /* fallback if grab cursor is unsupported */\n  cursor: grab;\n  cursor: -moz-grab;\n  cursor: -webkit-grab;\n  fill: red;\n}\n\n";
bf.defaultCSS="\n\n/*-=- html fixes -=-*/\n\nhtml {\n  overflow: visible;\n}\n\ntextarea.lively-text-input.debug {\n  z-index: 20 !important;\n  opacity: 1 !important;\n  background: rgba(0,255,0,0.5) !important;\n}\n\n.no-html-select {\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -khtml-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n\n.hiddenScrollbar::-webkit-scrollbar {\n  /* This is the magic bit */\n  display: none;\n}\n\n\n/*-=- generic morphic -=-*/\n\n.Morph {\n  outline: none;\n  /*for aliasing issue in chrome: http://stackoverflow.com/questions/6492027/css-transform-jagged-edges-in-chrome*/\n  /* -webkit-backface-visibility: hidden; */\n\n  /*include border size in extent of element*/\n  box-sizing: border-box;\n\n  /*don't use dom selection on morphs*/\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -khtml-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n\n.Morph img {\n  -moz-user-select: none;\n}\n\n.Tooltip {\n  z-index: 3;\n}\n\n.Hand {\n  z-index: 1;\n}\n\n/*-=- halos -=-*/\n\n.Halo {\n  z-index: 2;\n}\n\n.ProportionalLayoutHalo, .FlexLayoutHalo, .GridLayoutHalo, .TilingLayoutHalo {\n  z-index: auto;\n}\n\n.HaloItem:not(.NameHaloItem) {\n  /*FIXME: we shouldn't need to hardcode the size...*/\n  line-height: 24px !important;\n  text-align: center;\n  vertical-align: middle;\n}\n\n.halo-mesh {\n  background-color:transparent;\n  background-image: linear-gradient(rgba(0,0,0,.1) 2px, transparent 2px),\n  linear-gradient(90deg, rgba(0,0,0,.1) 2px, transparent 2px),\n  linear-gradient(rgba(0,0,0,.1) 1px, transparent 1px),\n  linear-gradient(90deg, rgba(0,0,0,.1) 1px, transparent 1px);\n  background-size:100px 100px, 100px 100px, 10px 10px, 10px 10px;\n  background-position:-2px -2px, -2px -2px, -1px -1px, -1px -1px;\n}\n\n/*-=- text -=-*/\n\n.center-text {\n  text-align: center;\n}\n\n.v-center-text {\n  position: relative;\n  top: 50%;\n}\n\ndiv.text-layer span {\n  line-height: normal;\n}\n\n/*-=- text -=-*/\n\n.Label span {\n  white-space: pre;\n  float: left;\n  line-height: initial;\n  -moz-user-select: none;\n}\n\n.Text .annotation {\n  text-align: right;\n  position: absolute;\n  right: 0;\n}\n\n.Label .annotation {\n/*  vertical-align: middle;\n  height: 100%;*/\n  /*vertical align*/\n  float: right;\n  position: relative;\n  top: 50%;\n  text-align: right;\n}\n\n.truncated-text {\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n/*-=- input elements -=-*/\n\ninput::-webkit-input-placeholder {\n  color: rgb(202, 202, 202);\n}\ninput::-moz-placeholder {\n  color: rgb(202, 202, 202);\n}\ninput:-ms-input-placeholder {\n  color: rgb(202, 202, 202);\n}\ninput:-moz-placeholder {\n  color: rgb(202, 202, 202);\n}\ninput:placeholder {\n  color: rgb(202, 202, 202);\n}\n\n/*-=- input elements -=-*/\n.Morph svg .path-point {\n  cursor: move; /* fallback if grab cursor is unsupported */\n  cursor: grab;\n  cursor: -moz-grab;\n  cursor: -webkit-grab;\n  fill: red;\n}\n\n";
var zs=Da("bh",function(f){var k=lively.FreezerRuntime.recorderFor("lively.morphic/rendering/morphic-default.js"),n=k.hasOwnProperty("ShadowObject")&&"function"===typeof k.ShadowObject?k.ShadowObject:k.ShadowObject=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return dc(n,f,[{key:Symbol.for("lively-instance-initialize"),value:function(b){bf.obj.isBoolean(b)&&(b=bf.config.defaultShadow);var e=b;b=e.rotation;var m=e.distance,
a=e.blur,g=e.color,l=e.morph,r=e.inset,v=e.spread;e=e.fast;this.rotation=bf.obj.isNumber(b)?b:45;this.distance=bf.obj.isNumber(m)?m:2;this.blur=bf.obj.isNumber(a)?a:6;this.inset=r||!1;this.spread=v||0;this.color=g||bf.Color.gray.darker();this.morph=l;this.fast=e}},{key:"__dont_serialize__",get:function(){return["morph"]}},{key:"distance",get:function(){return this._distance}},{key:"blur",get:function(){return this._blur}},{key:"rotation",get:function(){return this._rotation}},{key:"color",get:function(){return this._color}},
{key:"inset",get:function(){return this._inset}},{key:"inset",set:function(b){this._inset=b;this.morph&&(this.morph.dropShadow=this)}},{key:"distance",set:function(b){this._distance=b;this.morph&&(this.morph.dropShadow=this)}},{key:"blur",set:function(b){this._blur=b;this.morph&&(this.morph.dropShadow=this)}},{key:"rotation",set:function(b){this._rotation=b;this.morph&&(this.morph.dropShadow=this)}},{key:"color",set:function(b){this._color=b;this.morph&&(this.morph.dropShadow=this)}},{key:"isShadowObject",
get:function(){return!0}},{key:"__serialize__",value:function(){var b=this.toJson(),e=b.distance,m=b.rotation,a=b.color,g=b.inset,l=b.blur,r=b.spread;b=b.fast;a=a.toJSExpr();return{__expr__:"new ShadowObject({"+Object.entries({distance:e,rotation:m,color:a,inset:g,blur:l,spread:r,fast:b}).map(function(v){var y=$jscomp.makeIterator(v);v=y.next().value;y=y.next().value;return v+":"+y})+"})",bindings:{"lively.graphics/color.js":["Color"],"lively.morphic":["ShadowObject"]}}}},{key:"toCss",value:function(){var b=
this.color,e=this.inset,m=this.blur,a=this.spread,g=bf.Point.polar(this.distance,bf.num.toRadians(this.rotation)),l=g.y;return(e?"inset":"")+" "+b.toString()+" "+g.x.toFixed(2)+"px "+l.toFixed(2)+"px "+m+"px "+a+"px"}},{key:"toJson",value:function(){return bf.obj.select(this,"rotation distance blur color inset spread fast".split(" "))}},{key:"equals",value:function(b){return!!b&&bf.obj.equals(this.toJson(),b.toJson())}},{key:"toFilterCss",value:function(){var b=this.blur,e=this.color,m=bf.Point.polar(this.distance,
bf.num.toRadians(this.rotation)),a=m.x;m=m.y;b=bf.bowser.chrome?b/3:b/2;return"drop-shadow("+a.toFixed(2)+"px "+m.toFixed(2)+"px "+b.toFixed(2)+"px "+e.toString()+")"}},{key:"interpolate",value:function(b,e){return new bf.ShadowObject({distance:bf.num.interpolate(b,this.distance,e.distance),rotation:bf.num.interpolate(b,this.rotation,e.rotation),color:this.color.interpolate(b,e.color),blur:bf.num.interpolate(b,this.blur,e.blur),spread:bf.num.interpolate(b,this.spread,e.spread),inset:e.inset,fast:e.fast})}}],
[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ShadowObject"}}],k,{pathInPackage:function(){return"rendering/morphic-default.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:3438,end:6875})}(void 0));bf.ShadowObject=zs;bf.ShadowObject=zs;bf.ShadowObject=zs;bf.defaultStyle=Px;bf.defaultStyle=Px;bf.MorphAfterRenderHook.prototype.hook=
function(f,k,n,b){var e=this;b=void 0===b?0:b;var m=!!f.parentNode;m&&(this.morph._submorphOrderChanged&&this.morph.submorphs.length?(this.morph._submorphOrderChanged=!1,this.updateScrollOfSubmorphs(this.morph,this.renderer)):this.morph.isClip()&&this.updateScroll(this.morph,f));m||3<b?(this.morph._rendering=!1,this.morph.onAfterRender(f)):(b++,setTimeout(function(){return e.hook(f,k,n,b)},20*b))};bf.MorphAfterRenderHook.prototype.updateScroll=function(f,k,n){var b=this,e=f.env.eventDispatcher.eventState.scroll.interactiveScrollInProgress;
if(k&&e)return e.then(function(){return b.updateScroll(f,k,!0)});if(!f.isWorld&&k){e=f.scroll;var m=e.x,a=e.y;if(!f._animationQueue.animations.find(function(l){return l.animatedProps.scroll})){var g=f.isText&&f.viewState.fastScroll?k.querySelector(".scrollLayer"):k;!f._skipScrollUpdate&&g&&(g.scrollTop!==a&&(g.scrollTop=a),g.scrollLeft!==m&&(g.scrollLeft=m),!n&&requestAnimationFrame(function(){g.scrollTop!==a&&(g.scrollTop=a);g.scrollLeft!==m&&(g.scrollLeft=m)},f.id))}}};bf.MorphAfterRenderHook.prototype.unhook=
function(f,k){};bf.MorphAfterRenderHook.prototype.updateScrollOfSubmorphs=function(f,k){var n=this;f.submorphs.forEach(function(b){b.isClip()&&n.updateScroll(b,k.getNodeForMorph(b));n.updateScrollOfSubmorphs(b,k)})};bf.Animation.prototype.hook=function(f){this.morph._animationQueue.startAnimationsFor(f)};bf.SvgAnimation=HC;bf.SvgAnimation=HC;bf.SvgAnimation.prototype.hook=function(f){this.morph._animationQueue.startSvgAnimationsFor(f,this.type)};bf.defaultAttributes=Qx;bf.defaultAttributes=Qx;bf.svgAttributes=
Wz;bf.svgAttributes=Wz;bf.pathAttributes=IC;bf.pathAttributes=IC;bf.renderGradient=JC;bf.renderGradient=JC;bf.renderMorph=KC;bf.renderMorph=KC;bf.renderSubTree=LC;bf.renderSubTree=LC;bf.renderRootMorph=rw;bf.renderRootMorph=rw;var Jc="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,OT={};!function(f,k){k(OT)}(OT,function(f){function k(na){return 10===na||13===na||8232===na||8233===na||32===na||9===na||11===na||12===na||160===na||5760<=na&&0<=VA.indexOf(na)}function n(na){return 48<=
na&&57>=na}function b(na){(this||Jc).index=0;(this||Jc).path=na;(this||Jc).max=na.length;(this||Jc).result=[];(this||Jc).param=0;(this||Jc).err="";(this||Jc).segmentStart=0;(this||Jc).data=[]}function e(na){for(;na.index<na.max&&k(na.path.charCodeAt(na.index));)na.index++}function m(na){var Qa,Ga=na.index,Za=Ga,mb=na.max,$b=!1,eb=!1,Sb=!1,Hb=!1;if(Za>=mb)return void(na.err="SvgPath: missed param (at pos "+Za+")");if(Qa=na.path.charCodeAt(Za),43!==Qa&&45!==Qa||(Za++,Qa=Za<mb?na.path.charCodeAt(Za):
0),!n(Qa)&&46!==Qa)return void(na.err="SvgPath: param should start with 0..9 or `.` (at pos "+Za+")");if(46!==Qa){if($b=48===Qa,Za++,Qa=Za<mb?na.path.charCodeAt(Za):0,$b&&Za<mb&&Qa&&n(Qa))return void(na.err="SvgPath: numbers started with `0` such as `09` are ilegal (at pos "+Ga+")");for(;Za<mb&&n(na.path.charCodeAt(Za));)Za++,eb=!0;Qa=Za<mb?na.path.charCodeAt(Za):0}if(46===Qa){Hb=!0;for(Za++;n(na.path.charCodeAt(Za));)Za++,Sb=!0;Qa=Za<mb?na.path.charCodeAt(Za):0}if(101===Qa||69===Qa){if(Hb&&!eb&&
!Sb||(Za++,Qa=Za<mb?na.path.charCodeAt(Za):0,43!==Qa&&45!==Qa||Za++,!(Za<mb&&n(na.path.charCodeAt(Za)))))return void(na.err="SvgPath: invalid float exponent (at pos "+Za+")");for(;Za<mb&&n(na.path.charCodeAt(Za));)Za++}na.index=Za;na.param=parseFloat(na.path.slice(Ga,Za))+0}function a(){if(!((this||Jc)instanceof a))return new a;(this||Jc).queue=[];(this||Jc).cache=null}function g(na,Qa,Ga,Za){var mb=(na*Ga+Qa*Za)/(Math.sqrt(na*na+Qa*Qa)*Math.sqrt(na*na+Qa*Qa));return 1<mb&&(mb=1),-1>mb&&(mb=-1),(0>
na*Za-Qa*Ga?-1:1)*Math.acos(mb)}function l(na,Qa,Ga,Za,mb,$b,eb,Sb,Hb,hd){var Ob=hd*(na-Ga)/2+Hb*(Qa-Za)/2,fe=-Hb*(na-Ga)/2+hd*(Qa-Za)/2,Ae=eb*eb,Pf=Sb*Sb,Lf=Ob*Ob,Te=fe*fe,Qf=Ae*Pf-Ae*Te-Pf*Lf;0>Qf&&(Qf=0);Qf=Math.sqrt(Qf/(Ae*Te+Pf*Lf))*(mb===$b?-1:1);mb=Qf*eb/Sb*fe;Qf=Qf*-Sb/eb*Ob;na=hd*mb-Hb*Qf+(na+Ga)/2;Qa=Hb*mb+hd*Qf+(Qa+Za)/2;Za=(Ob-mb)/eb;Hb=(fe-Qf)/Sb;eb=(-Ob-mb)/eb;fe=(-fe-Qf)/Sb;Sb=g(1,0,Za,Hb);fe=g(Za,Hb,eb,fe);return 0===$b&&0<fe&&(fe-=WA),1===$b&&0>fe&&(fe+=WA),[na,Qa,Sb,fe]}function r(na,
Qa){var Ga=4/3*Math.tan(Qa/4),Za=Math.cos(na),mb=Math.sin(na),$b=Math.cos(na+Qa);na=Math.sin(na+Qa);return[Za,mb,Za-mb*Ga,mb+Za*Ga,$b+na*Ga,na-$b*Ga,$b,na]}function v(na,Qa,Ga){if(!((this||Jc)instanceof v))return new v(na,Qa,Ga);(this||Jc).rx=na;(this||Jc).ry=Qa;(this||Jc).ax=Ga}function y(na){if(!((this||Jc)instanceof y))return new y(na);na=new b(na);var Qa=na.max;for(e(na);na.index<Qa&&!na.err.length;)a:{var Ga,Za=void 0,mb=na,$b=mb.max;mb.segmentStart=mb.index;var eb=mb.path.charCodeAt(mb.index);
b:{switch(32|eb){case 109:case 122:case 108:case 104:case 118:case 99:case 115:case 113:case 116:case 97:case 114:eb=!0;break b}eb=!1}if(eb){if(Za=tv[mb.path[mb.index].toLowerCase()],mb.index++,e(mb),mb.data=[],Za)for(eb=!1;;){for(Ga=Za;0<Ga;Ga--){if(m(mb),mb.err.length)break a;mb.data.push(mb.param);e(mb);eb=!1;mb.index<$b&&44===mb.path.charCodeAt(mb.index)&&(mb.index++,e(mb),eb=!0)}if(!eb){if(mb.index>=mb.max)break;Ga=mb.path.charCodeAt(mb.index);if(!(48<=Ga&&57>=Ga||43===Ga||45===Ga||46===Ga))break}}$b=
mb;mb=$b.path[$b.segmentStart];Za=mb.toLowerCase();eb=$b.data;if("m"===Za&&2<eb.length&&($b.result.push([mb,eb[0],eb[1]]),eb=eb.slice(2),Za="l",mb="m"===mb?"l":"L"),"r"===Za)$b.result.push([mb].concat(eb));else for(;eb.length>=tv[Za]&&($b.result.push([mb].concat(eb.splice(0,tv[Za]))),tv[Za]););}else mb.err="SvgPath: bad command "+mb.path[mb.index]+" (at pos "+mb.index+")"}na=(na.err.length?na.result=[]:na.result.length&&(0>"mM".indexOf(na.result[0][0])?(na.err="SvgPath: string should start with `M` or `m`",
na.result=[]):na.result[0][0]="M"),{err:na.err,segments:na.result});(this||Jc).segments=na.segments;(this||Jc).err=na.err;(this||Jc).__stack=[]}function A(na,Qa,Ga,Za,mb,$b,eb,Sb){(this||Jc).a={x:na,y:Qa};(this||Jc).b={x:Ga,y:Za};(this||Jc).c={x:mb,y:$b};(this||Jc).d={x:eb,y:Sb};null!==eb&&void 0!==eb&&null!==Sb&&void 0!==Sb?((this||Jc).getArcLength=X,(this||Jc).getPoint=M,(this||Jc).getDerivative=F):((this||Jc).getArcLength=N,(this||Jc).getPoint=I,(this||Jc).getDerivative=E);this.init()}function E(na,
Qa,Ga){return{x:2*(1-Ga)*(na[1]-na[0])+2*Ga*(na[2]-na[1]),y:2*(1-Ga)*(Qa[1]-Qa[0])+2*Ga*(Qa[2]-Qa[1])}}function F(na,Qa,Ga){return I([3*(na[1]-na[0]),3*(na[2]-na[1]),3*(na[3]-na[2])],[3*(Qa[1]-Qa[0]),3*(Qa[2]-Qa[1]),3*(Qa[3]-Qa[2])],Ga)}function H(na,Qa,Ga,Za,mb){for(var $b=1,eb=na/Qa,Sb=(na-Ga(Za,mb,eb))/Qa;.001<$b;){var Hb=Ga(Za,mb,eb+Sb),hd=Ga(Za,mb,eb-Sb);Hb=Math.abs(na-Hb)/Qa;hd=Math.abs(na-hd)/Qa;Hb<$b?($b=Hb,eb+=Sb):hd<$b?($b=hd,eb-=Sb):Sb/=2}return eb}function I(na,Qa,Ga){return{x:(1-Ga)*
(1-Ga)*na[0]+2*(1-Ga)*Ga*na[1]+Ga*Ga*na[2],y:(1-Ga)*(1-Ga)*Qa[0]+2*(1-Ga)*Ga*Qa[1]+Ga*Ga*Qa[2]}}function M(na,Qa,Ga){return{x:(1-Ga)*(1-Ga)*(1-Ga)*na[0]+3*(1-Ga)*(1-Ga)*Ga*na[1]+3*(1-Ga)*Ga*Ga*na[2]+Ga*Ga*Ga*na[3],y:(1-Ga)*(1-Ga)*(1-Ga)*Qa[0]+3*(1-Ga)*(1-Ga)*Ga*Qa[1]+3*(1-Ga)*Ga*Ga*Qa[2]+Ga*Ga*Ga*Qa[3]}}function N(na,Qa,Ga){void 0===Ga&&(Ga=1);var Za=na[0]-2*na[1]+na[2],mb=Qa[0]-2*Qa[1]+Qa[2],$b=2*na[1]-2*na[0],eb=2*Qa[1]-2*Qa[0],Sb=4*(Za*Za+mb*mb);if(0===Sb)return Ga*Math.sqrt(Math.pow(na[2]-na[0],
2)+Math.pow(Qa[2]-Qa[0],2));na=4*(Za*$b+mb*eb)/(2*Sb);Ga+=na;$b=($b*$b+eb*eb)/Sb-na*na;return Math.sqrt(Sb)/2*(Ga*Math.sqrt(Ga*Ga+$b)-na*Math.sqrt(na*na+$b)+$b*Math.log(Math.abs((Ga+Math.sqrt(Ga*Ga+$b))/(na+Math.sqrt(na*na+$b)))))}function W(na,Qa,Ga){var Za,mb=Ga.length-1;if(0===mb)return 0;if(0===na){for(Za=na=0;Za<=mb;Za++)na+=PT[mb][Za]*Math.pow(1-Qa,mb-Za)*Math.pow(Qa,Za)*Ga[Za];return na}var $b=Array(mb);for(Za=0;Za<mb;Za++)$b[Za]=mb*(Ga[Za+1]-Ga[Za]);return W(na-1,Qa,$b)}function X(na,Qa,Ga){var Za,
mb;void 0===Ga&&(Ga=1);Ga/=2;for(mb=Za=0;20>mb;mb++){var $b=Ga*QT[20][mb]+Ga;var eb=RT[20][mb],Sb=Qa,Hb=$b;$b=W(1,Hb,na);Sb=W(1,Hb,Sb);Za+=eb*Math.sqrt($b*$b+Sb*Sb)}return Ga*Za}function ea(na,Qa,Ga,Za){var mb=na*Ga+Qa*Za;return 1<mb&&(mb=1),-1>mb&&(mb=-1),(0>na*Za-Qa*Ga?-1:1)*Math.acos(mb)}function Aa(na,Qa,Ga,Za,mb,$b,eb,Sb,Hb,hd){var Ob=hd*(na-Ga)/2+Hb*(Qa-Za)/2,fe=-Hb*(na-Ga)/2+hd*(Qa-Za)/2,Ae=eb*eb,Pf=Sb*Sb,Lf=Ob*Ob,Te=fe*fe,Qf=Ae*Pf-Ae*Te-Pf*Lf;0>Qf&&(Qf=0);Qf=Math.sqrt(Qf/(Ae*Te+Pf*Lf))*(mb===
$b?-1:1);mb=Qf*eb/Sb*fe;Qf=Qf*-Sb/eb*Ob;na=hd*mb-Hb*Qf+(na+Ga)/2;Qa=Hb*mb+hd*Qf+(Qa+Za)/2;Za=(Ob-mb)/eb;Hb=(fe-Qf)/Sb;eb=(-Ob-mb)/eb;fe=(-fe-Qf)/Sb;Sb=ea(1,0,Za,Hb);fe=ea(Za,Hb,eb,fe);return 0===$b&&0<fe&&(fe-=XA),1===$b&&0>fe&&(fe+=XA),[na,Qa,Sb,fe]}function Ma(na,Qa){var Ga=4/3*Math.tan(Qa/4),Za=Math.cos(na),mb=Math.sin(na),$b=Math.cos(na+Qa);na=Math.sin(na+Qa);return[Za,mb,Za-mb*Ga,mb+Za*Ga,$b+na*Ga,na-$b*Ga,$b,na]}function K(na,Qa,Ga,Za,mb,$b,eb,Sb,Hb){var hd=0,Ob=[],fe=[];ST(na,Qa,Ga,Za,mb,$b,
eb,Sb,Hb).forEach(function(Ae){Ae=new qr(Ae[0],Ae[1],Ae[2],Ae[3],Ae[4],Ae[5],Ae[6],Ae[7]);var Pf=Ae.getTotalLength();hd+=Pf;Ob.push(Pf);fe.push(Ae)});(this||Jc).length=hd;(this||Jc).partialLengths=Ob;(this||Jc).curves=fe}function aa(na,Qa,Ga,Za){(this||Jc).x0=na;(this||Jc).x1=Qa;(this||Jc).y0=Ga;(this||Jc).y1=Za}function T(na,Qa){return Math.sqrt((na[0]-Qa[0])*(na[0]-Qa[0])+(na[1]-Qa[1])*(na[1]-Qa[1]))}function U(na,Qa,Ga){return[na[0]+(Qa[0]-na[0])*Ga,na[1]+(Qa[1]-na[1])*Ga]}function pa(na,Qa,Ga){var Za=
na.map(function(mb,$b){return fa(mb,Qa[$b])});return function(mb){var $b=Za.map(function(eb){return eb(mb)});return Ga?va($b):$b}}function fa(na,Qa){return function(Ga){return na.map(function(Za,mb){return Za+Ga*(Qa[mb]-Za)})}}function oa(na){return"number"==typeof na&&isFinite(na)}function gb(na){var Qa;a:{for(Qa=0;Qa<na.length-2;Qa++){var Ga=na[Qa],Za=na[Qa+1],mb=na[Qa+2];if(Ga[0]*(Za[1]-mb[1])+Za[0]*(mb[1]-Ga[1])+mb[0]*(Ga[1]-Za[1])){Qa=!0;break a}}Qa=!1}if(Qa){mb=-1;var $b=na.length,eb=0,Sb=0,
Hb=na[$b-1];for(Qa=0;++mb<$b;)Ga=Hb,Hb=na[mb],Qa+=Za=Ga[0]*Hb[1]-Hb[0]*Ga[1],eb+=(Ga[0]+Hb[0])*Za,Sb+=(Ga[1]+Hb[1])*Za;na=(Qa*=3,[eb/Qa,Sb/Qa])}else na=[(na[0][0]+na[na.length-1][0])/2,(na[0][1]+na[na.length-1][1])/2];return na}function zb(na){return na.toString().split("M").map(function(Qa,Ga){return Qa=Qa.trim(),Ga&&Qa?"M"+Qa:Qa}).filter(function(Qa){return Qa})}function va(na){return"M"+na.join("L")+"Z"}function ma(na,Qa){var Ga=na.length+Qa;Qa=Rw(na)/Qa;for(var Za=0,mb=0,$b=Qa/2;na.length<Ga;){var eb=
na[Za],Sb=na[(Za+1)%na.length],Hb=T(eb,Sb);$b<=mb+Hb?(na.splice(Za+1,0,Hb?U(eb,Sb,($b-mb)/Hb):eb.slice(0)),$b+=Qa):(mb+=Hb,Za++)}}function ta(na,Qa){var Ga;if("string"==typeof na){na=(new aM(na)).abs();a:{var Za=na.segments||[];var mb=[];if(Za.length&&"M"===Za[0][0]){for(var $b=0;$b<Za.length;$b++){var eb=Za[$b],Sb=eb[0],Hb=eb[1];eb=eb[2];if("M"===Sb&&$b||"Z"===Sb)break;if("M"===Sb||"L"===Sb)mb.push([Hb,eb]);else if("H"===Sb)mb.push([Hb,mb[mb.length-1][1]]);else{if("V"!==Sb){Za=!1;break a}mb.push([mb[mb.length-
1][0],Hb])}}Za=!!mb.length&&{ring:mb}}else Za=!1}if(!Za){mb=zb(na)[0];na=[];Za=3;if(!mb)throw new TypeError(YG);a:{if("undefined"!=typeof window&&window&&window.document)try{var hd=window.document.createElementNS("http://www.w3.org/2000/svg","path");var Ob=(hd.setAttributeNS(null,"d",mb),hd);break a}catch(fe){}Ob=TT(mb)}hd=Ob;Ob=hd.getTotalLength();Qa&&oa(Qa)&&0<Qa&&(Za=Math.max(Za,Math.ceil(Ob/Qa)));for(mb=0;mb<Za;mb++)$b=hd.getPointAtLength(Ob*mb/Za),na.push([$b.x,$b.y]);Za={ring:na,skipBisect:!0}}Ob=
Za;na=Ob.ring;Za=Ob.skipBisect}else if(!Array.isArray(na))throw new TypeError(YG);if(Ga=na.slice(0),!Na(Ga))throw new TypeError(YG);1<Ga.length&&1E-9>T(Ga[0],Ga[Ga.length-1])&&Ga.pop();0<Ey(Ga)&&Ga.reverse();if(!Za&&Qa&&oa(Qa)&&0<Qa)for(void 0===Qa&&(Qa=1/0),Ob=0;Ob<Ga.length;Ob++)for(hd=Ga[Ob],na=Ob===Ga.length-1?Ga[0]:Ga[Ob+1];T(hd,na)>Qa;)na=U(hd,na,.5),Ga.splice(Ob+1,0,na);return Ga}function Na(na){return na.every(function(Qa){return Array.isArray(Qa)&&2<=Qa.length&&oa(Qa[0])&&oa(Qa[1])})}function Kb(na,
Qa,Ga){var Za;return Za=na.length-Qa.length,ma(na,0>Za?-1*Za:0),ma(Qa,0<Za?Za:0),bM(na,Qa),pa(na,Qa,Ga)}function kc(na,Qa,Ga){Ga=Ga||2;var Za=Qa&&Qa.length,mb=Za?Qa[0]*Ga:na.length,$b=Vb(na,0,mb,Ga,!0),eb=[];if(!$b)return eb;var Sb;if(Za){var Hb=Ga,hd;var Ob=[];Za=0;for(hd=Qa.length;Za<hd;Za++){var fe=Qa[Za]*Hb;var Ae=Za<hd-1?Qa[Za+1]*Hb:na.length;fe=Vb(na,fe,Ae,Hb,!1);fe===fe.next&&(fe.steiner=!0);Ob.push(ka(fe))}Ob.sort(Pb);for(Za=0;Za<Ob.length;Za++){Qa=Ob[Za];Hb=$b;if(Hb=xd(Qa,Hb))Qa=Jd(Hb,Qa),
jc(Qa,Qa.next);$b=jc($b,$b.next)}}if(na.length>80*Ga){var Pf=Sb=na[0];var Lf=Za=na[1];for(Hb=Ga;Hb<mb;Hb+=Ga)Ob=na[Hb],Qa=na[Hb+1],Ob<Pf&&(Pf=Ob),Qa<Lf&&(Lf=Qa),Ob>Sb&&(Sb=Ob),Qa>Za&&(Za=Qa);Sb=Math.max(Sb-Pf,Za-Lf)}return Qc($b,eb,Ga,Pf,Lf,Sb),eb}function Vb(na,Qa,Ga,Za,mb){if(mb===0<Qh(na,Qa,Ga,Za))for(mb=Qa;mb<Ga;mb+=Za)var $b=Uc(mb,na[mb],na[mb+1],$b);else for(mb=Ga-Za;mb>=Qa;mb-=Za)$b=Uc(mb,na[mb],na[mb+1],$b);return $b&&wb($b,$b.next)&&(af($b),$b=$b.next),$b}function jc(na,Qa){if(!na)return na;
Qa||(Qa=na);var Ga=na;do if(na=!1,Ga.steiner||!wb(Ga,Ga.next)&&0!==Sa(Ga.prev,Ga,Ga.next))Ga=Ga.next;else{if(af(Ga),(Ga=Qa=Ga.prev)===Ga.next)return null;na=!0}while(na||Ga!==Qa);return Qa}function Qc(na,Qa,Ga,Za,mb,$b,eb){if(na){if(!eb&&$b){var Sb=na,Hb=Sb;do null===Hb.z&&(Hb.z=Td(Hb.x,Hb.y,Za,mb,$b)),Hb.prevZ=Hb.prev,Hb=Hb.nextZ=Hb.next;while(Hb!==Sb);Hb.prevZ.nextZ=null;Hb.prevZ=null;Sb=Hb;var hd,Ob,fe,Ae,Pf=1;do{Hb=Sb;var Lf=Sb=null;for(fe=0;Hb;){fe++;var Te=Hb;for(hd=Ae=0;hd<Pf&&(Ae++,Te=Te.nextZ);hd++);
for(hd=Pf;0<Ae||0<hd&&Te;)0===Ae?(Ob=Te,Te=Te.nextZ,hd--):0!==hd&&Te?Hb.z<=Te.z?(Ob=Hb,Hb=Hb.nextZ,Ae--):(Ob=Te,Te=Te.nextZ,hd--):(Ob=Hb,Hb=Hb.nextZ,Ae--),Lf?Lf.nextZ=Ob:Sb=Ob,Ob.prevZ=Lf,Lf=Ob;Hb=Te}Lf.nextZ=null;Pf*=2}while(1<fe)}for(Hb=na;na.prev!==na.next;){Ob=na.prev;Sb=na.next;if($b)a:{Te=na;hd=Za;var Qf=mb,gp=$b;Lf=Te.prev;fe=Te;Ae=Te.next;if(0<=Sa(Lf,fe,Ae))Te=!1;else{var UT=Lf.x>fe.x?Lf.x>Ae.x?Lf.x:Ae.x:fe.x>Ae.x?fe.x:Ae.x,VT=Lf.y>fe.y?Lf.y>Ae.y?Lf.y:Ae.y:fe.y>Ae.y?fe.y:Ae.y;Pf=Td(Lf.x<fe.x?
Lf.x<Ae.x?Lf.x:Ae.x:fe.x<Ae.x?fe.x:Ae.x,Lf.y<fe.y?Lf.y<Ae.y?Lf.y:Ae.y:fe.y<Ae.y?fe.y:Ae.y,hd,Qf,gp);hd=Td(UT,VT,hd,Qf,gp);for(Qf=Te.nextZ;Qf&&Qf.z<=hd;){if(Qf!==Te.prev&&Qf!==Te.next&&Fa(Lf.x,Lf.y,fe.x,fe.y,Ae.x,Ae.y,Qf.x,Qf.y)&&0<=Sa(Qf.prev,Qf,Qf.next)){Te=!1;break a}Qf=Qf.nextZ}for(Qf=Te.prevZ;Qf&&Qf.z>=Pf;){if(Qf!==Te.prev&&Qf!==Te.next&&Fa(Lf.x,Lf.y,fe.x,fe.y,Ae.x,Ae.y,Qf.x,Qf.y)&&0<=Sa(Qf.prev,Qf,Qf.next)){Te=!1;break a}Qf=Qf.prevZ}Te=!0}}else a:if(Te=na,Lf=Te.prev,fe=Te,Ae=Te.next,0<=Sa(Lf,
fe,Ae))Te=!1;else{for(Pf=Te.next.next;Pf!==Te.prev;){if(Fa(Lf.x,Lf.y,fe.x,fe.y,Ae.x,Ae.y,Pf.x,Pf.y)&&0<=Sa(Pf.prev,Pf,Pf.next)){Te=!1;break a}Pf=Pf.next}Te=!0}if(Te)Qa.push(Ob.i/Ga),Qa.push(na.i/Ga),Qa.push(Sb.i/Ga),af(na),Hb=na=Sb.next;else if((na=Sb)===Hb){if(eb)if(1===eb){eb=Qa;Ob=Ga;Sb=na;do Hb=Sb.prev,Te=Sb.next.next,!wb(Hb,Te)&&cc(Hb,Sb,Sb.next,Te)&&Ld(Hb,Te)&&Ld(Te,Hb)&&(eb.push(Hb.i/Ob),eb.push(Sb.i/Ob),eb.push(Te.i/Ob),af(Sb),af(Sb.next),Sb=na=Te),Sb=Sb.next;while(Sb!==na);na=Sb;Qc(na,Qa,
Ga,Za,mb,$b,2)}else{if(2===eb)a:{eb=na;do{for(Ob=eb.next.next;Ob!==eb.prev;){if(Sb=eb.i!==Ob.i){Sb=eb;Hb=Ob;if(Te=Sb.next.i!==Hb.i&&Sb.prev.i!==Hb.i){b:{Te=Sb;do{if(Te.i!==Sb.i&&Te.next.i!==Sb.i&&Te.i!==Hb.i&&Te.next.i!==Hb.i&&cc(Te,Te.next,Sb,Hb)){Te=!0;break b}Te=Te.next}while(Te!==Sb);Te=!1}Te=!Te}if(Te=Te&&Ld(Sb,Hb)&&Ld(Hb,Sb)){Te=Sb;Lf=!1;fe=(Sb.x+Hb.x)/2;Hb=(Sb.y+Hb.y)/2;do Te.y>Hb!=Te.next.y>Hb&&fe<(Te.next.x-Te.x)*(Hb-Te.y)/(Te.next.y-Te.y)+Te.x&&(Lf=!Lf),Te=Te.next;while(Te!==Sb);Te=Lf}Sb=
Te}if(Sb){na=Jd(eb,Ob);eb=jc(eb,eb.next);na=jc(na,na.next);Qc(eb,Qa,Ga,Za,mb,$b);Qc(na,Qa,Ga,Za,mb,$b);break a}Ob=Ob.next}eb=eb.next}while(eb!==na)}}else Qc(jc(na),Qa,Ga,Za,mb,$b,1);break}}}}function Pb(na,Qa){return na.x-Qa.x}function xd(na,Qa){var Ga=Qa,Za=na.x,mb=na.y,$b=-1/0;do{if(mb<=Ga.y&&mb>=Ga.next.y){var eb=Ga.x+(mb-Ga.y)*(Ga.next.x-Ga.x)/(Ga.next.y-Ga.y);if(eb<=Za&&eb>$b){if($b=eb,eb===Za){if(mb===Ga.y)return Ga;if(mb===Ga.next.y)return Ga.next}var Sb=Ga.x<Ga.next.x?Ga:Ga.next}}Ga=Ga.next}while(Ga!==
Qa);if(!Sb)return null;if(Za===$b)return Sb.prev;var Hb;Qa=Sb;eb=Sb.x;var hd=Sb.y,Ob=1/0;for(Ga=Sb.next;Ga!==Qa;)Za>=Ga.x&&Ga.x>=eb&&Fa(mb<hd?Za:$b,mb,eb,hd,mb<hd?$b:Za,mb,Ga.x,Ga.y)&&((Hb=Math.abs(mb-Ga.y)/(Za-Ga.x))<Ob||Hb===Ob&&Ga.x>Sb.x)&&Ld(Ga,na)&&(Sb=Ga,Ob=Hb),Ga=Ga.next;return Sb}function Td(na,Qa,Ga,Za,mb){return na=32767*(na-Ga)/mb,Qa=32767*(Qa-Za)/mb,na=16711935&(na|na<<8),na=252645135&(na|na<<4),na=858993459&(na|na<<2),na=1431655765&(na|na<<1),Qa=16711935&(Qa|Qa<<8),Qa=252645135&(Qa|Qa<<
4),Qa=858993459&(Qa|Qa<<2),Qa=1431655765&(Qa|Qa<<1),na|Qa<<1}function ka(na){var Qa=na,Ga=na;do Qa.x<Ga.x&&(Ga=Qa),Qa=Qa.next;while(Qa!==na);return Ga}function Fa(na,Qa,Ga,Za,mb,$b,eb,Sb){return 0<=(mb-eb)*(Qa-Sb)-(na-eb)*($b-Sb)&&0<=(na-eb)*(Za-Sb)-(Ga-eb)*(Qa-Sb)&&0<=(Ga-eb)*($b-Sb)-(mb-eb)*(Za-Sb)}function Sa(na,Qa,Ga){return(Qa.y-na.y)*(Ga.x-Qa.x)-(Qa.x-na.x)*(Ga.y-Qa.y)}function wb(na,Qa){return na.x===Qa.x&&na.y===Qa.y}function cc(na,Qa,Ga,Za){return!!(wb(na,Qa)&&wb(Ga,Za)||wb(na,Za)&&wb(Ga,
Qa))||0<Sa(na,Qa,Ga)!=0<Sa(na,Qa,Za)&&0<Sa(Ga,Za,na)!=0<Sa(Ga,Za,Qa)}function Ld(na,Qa){return 0>Sa(na.prev,na,na.next)?0<=Sa(na,Qa,na.next)&&0<=Sa(na,na.prev,Qa):0>Sa(na,Qa,na.prev)||0>Sa(na,na.next,Qa)}function Jd(na,Qa){var Ga=new Ne(na.i,na.x,na.y),Za=new Ne(Qa.i,Qa.x,Qa.y),mb=na.next,$b=Qa.prev;return na.next=Qa,Qa.prev=na,Ga.next=mb,mb.prev=Ga,Za.next=Ga,Ga.prev=Za,$b.next=Za,Za.prev=$b,Za}function Uc(na,Qa,Ga,Za){na=new Ne(na,Qa,Ga);return Za?(na.next=Za.next,na.prev=Za,Za.next.prev=na,Za.next=
na):(na.prev=na,na.next=na),na}function af(na){na.next.prev=na.prev;na.prev.next=na.next;na.prevZ&&(na.prevZ.nextZ=na.nextZ);na.nextZ&&(na.nextZ.prevZ=na.prevZ)}function Ne(na,Qa,Ga){(this||Jc).i=na;(this||Jc).x=Qa;(this||Jc).y=Ga;(this||Jc).prev=null;(this||Jc).next=null;(this||Jc).z=null;(this||Jc).prevZ=null;(this||Jc).nextZ=null;(this||Jc).steiner=!1}function Qh(na,Qa,Ga,Za){for(var mb=0,$b=Ga-Za;Qa<Ga;Qa+=Za)mb+=(na[$b]-na[Qa])*(na[Qa+1]+na[$b+1]),$b=Qa;return mb}function mh(na,Qa){var Ga=Qa.id,
Za=Qa.bbox,mb=null==Qa.properties?{}:Qa.properties;na=kj(na,Qa);return null==Ga&&null==Za?{type:"Feature",properties:mb,geometry:na}:null==Za?{type:"Feature",id:Ga,properties:mb,geometry:na}:{type:"Feature",id:Ga,bbox:Za,properties:mb,geometry:na}}function kj(na,Qa){function Ga(hd){return Sb(hd)}function Za(hd){for(var Ob=[],fe=0,Ae=hd.length;fe<Ae;++fe){var Pf=hd[fe],Lf=Ob;Lf.length&&Lf.pop();for(var Te=Hb[0>Pf?~Pf:Pf],Qf=0,gp=Te.length;Qf<gp;++Qf)Lf.push(Sb(Te[Qf],Qf));if(0>Pf)for(Pf=Lf,Lf=Pf.length,
Te=Lf-gp;Te<--Lf;)gp=Pf[Te],Pf[Te++]=Pf[Lf],Pf[Lf]=gp}return 2>Ob.length&&Ob.push(Ob[0]),Ob}function mb(hd){for(hd=Za(hd);4>hd.length;)hd.push(hd[0]);return hd}function $b(hd){return hd.map(mb)}function eb(hd){var Ob=hd.type;switch(Ob){case "GeometryCollection":return{type:Ob,geometries:hd.geometries.map(eb)};case "Point":hd=Sb(hd.coordinates);break;case "MultiPoint":hd=hd.coordinates.map(Ga);break;case "LineString":hd=Za(hd.arcs);break;case "MultiLineString":hd=hd.arcs.map(Za);break;case "Polygon":hd=
$b(hd.arcs);break;case "MultiPolygon":hd=hd.arcs.map($b);break;default:return null}return{type:Ob,coordinates:hd}}var Sb=cM(na.transform),Hb=na.arcs;return eb(Qa)}function cj(na,Qa){function Ga(Hb){switch(Hb.type){case "GeometryCollection":Hb.geometries.forEach(Ga);break;case "Polygon":Za(Hb.arcs);break;case "MultiPolygon":Hb.arcs.forEach(Za)}}function Za(Hb){Hb.forEach(function(hd){hd.forEach(function(Ob){($b[Ob=0>Ob?~Ob:Ob]||($b[Ob]=[])).push(Hb)})});eb.push(Hb)}function mb(Hb){Hb=kj(na,{type:"Polygon",
arcs:[Hb]}).coordinates[0];for(var hd,Ob=-1,fe=Hb.length,Ae=Hb[fe-1],Pf=0;++Ob<fe;)hd=Ae,Ae=Hb[Ob],Pf+=hd[0]*Ae[1]-hd[1]*Ae[0];return Math.abs(Pf)}var $b={},eb=[],Sb=[];return Qa.forEach(Ga),eb.forEach(function(Hb){if(!Hb._){var hd=[],Ob=[Hb];Hb._=1;for(Sb.push(hd);Hb=Ob.pop();)hd.push(Hb),Hb.forEach(function(fe){fe.forEach(function(Ae){$b[0>Ae?~Ae:Ae].forEach(function(Pf){Pf._||(Pf._=1,Ob.push(Pf))})})})}}),eb.forEach(function(Hb){delete Hb._}),{type:"MultiPolygon",arcs:Sb.map(function(Hb){var hd=
[];if(Hb.forEach(function(Lf){Lf.forEach(function(Te){Te.forEach(function(Qf){2>$b[0>Qf?~Qf:Qf].length&&hd.push(Qf)})})}),hd=dM(na,hd),1<(Hb=hd.length))for(var Ob,fe,Ae=1,Pf=mb(hd[0]);Ae<Hb;++Ae)(Ob=mb(hd[Ae]))>Pf&&(fe=hd[0],hd[0]=hd[Ae],hd[Ae]=fe,Pf=Ob);return hd})}}function lj(na){return function(Qa,Ga){return eM(na(Qa),Ga)}}function Cj(na,Qa){var Ga={},Za={type:"Topology",objects:{triangles:{type:"GeometryCollection",geometries:[]}},arcs:[]};return na.forEach(function(mb){var $b=[];mb.forEach(function(eb,
Sb){Sb=eb[0]<eb[1]?eb.join(","):eb[1]+","+eb[0];eb=eb.map(function(Hb){return Qa[Hb]});Sb in Ga?$b.push(~Ga[Sb]):($b.push(Ga[Sb]=Za.arcs.length),Za.arcs.push(eb))});Za.objects.triangles.geometries.push({type:"Polygon",area:Math.abs(Ey(mb.map(function(eb){return Qa[eb[0]]}))),arcs:[$b]})}),Za.objects.triangles.geometries.sort(function(mb,$b){return mb.area-$b.area}),Za}function Lj(na,Qa){for(var Ga=na.objects.triangles.geometries,Za=fM(function(mb){return mb.area}).left;Ga.length>Qa;)!function(){var mb=
Ga[0],$b=WT(Ga)[0][0],eb=Ga[$b],Sb=cj(na,[mb,eb]);Sb.area=mb.area+eb.area;Sb.type="Polygon";Sb.arcs=Sb.arcs[0];Ga.splice($b,1);Ga.shift();Ga.splice(Za(Ga,Sb.area),0,Sb)}();if(Qa>Ga.length)throw new RangeError("Can't collapse topology into "+Qa+" pieces.");return gM(na,na.objects.triangles).features.map(function(mb){return mb.geometry.coordinates[0].pop(),mb.geometry.coordinates[0]})}function Ti(na){na=hM(na.reduce(function(mb,$b){return mb.concat([$b[0]],[$b[1]])},[]));for(var Qa=[],Ga=0,Za=na.length;Ga<
Za;Ga+=3)Qa.push([[na[Ga],na[Ga+1]],[na[Ga+1],na[Ga+2]],[na[Ga+2],na[Ga]]]);return Qa}function ph(na,Qa,Ga){function Za(eb,Sb,Hb){void 0===Sb&&(Sb=[]);void 0===Hb&&(Hb=0);for(var hd=0;hd<eb.length;hd++){var Ob=eb.splice(hd,1),fe=Ga[Ob[0]][Sb.length];Hb+fe<mb&&(eb.length?Za(eb.slice(),Sb.concat(Ob),Hb+fe):(mb=Hb+fe,$b=Sb.concat(Ob)));eb.length&&eb.splice(hd,0,Ob[0])}}var mb=1/0,$b=na.map(function(eb,Sb){return Sb});return Za($b),$b}function Wj(na,Qa,Ga){void 0===Ga&&(Ga={});var Za=Ga.maxSegmentLength;
void 0===Za&&(Za=10);var mb=Ga.string;void 0===mb&&(mb=!0);Ga=Ga.single;void 0===Ga&&(Ga=!1);var $b=ta(na,Za);$b.length<Qa.length+2&&ma($b,Qa.length+2-$b.length);var eb;$b=YA($b,Qa.length);var Sb=Qa.map(function(Hb){return ta(Hb,Za)});na="string"==typeof na&&na;return Ga&&!Qa.every(function(Hb){return"string"==typeof Hb})||(eb=Qa.slice(0)),Fk($b,Sb,{match:!0,string:mb,single:Ga,t0:na,t1:eb})}function Fk(na,Qa,Ga){void 0===Ga&&(Ga={});var Za=Ga.string,mb=Ga.single,$b=Ga.t0,eb=Ga.t1,Sb=(Ga=Ga.match)?
iM(na,Qa):na.map(function(Ob,fe){return fe}),Hb=Sb.map(function(Ob,fe){return Kb(na[Ob],Qa[fe],Za)});if(Ga&&Array.isArray($b)&&($b=Sb.map(function(Ob){return $b[Ob]})),mb&&Za&&(Array.isArray($b)&&($b=$b.join(" ")),Array.isArray(eb)&&(eb=eb.join(" "))),mb){var hd=Za?function(Ob){return Hb.map(function(fe){return fe(Ob)}).join(" ")}:function(Ob){return Hb.map(function(fe){return fe(Ob)})};return Za&&($b||eb)?function(Ob){return 1E-4>Ob&&$b||1E-4>1-Ob&&eb||hd(Ob)}:hd}return Za?($b=Array.isArray($b)?
$b.map(function(Ob){return"string"==typeof Ob&&Ob}):[],eb=Array.isArray(eb)?eb.map(function(Ob){return"string"==typeof Ob&&Ob}):[],Hb.map(function(Ob,fe){return $b[fe]||eb[fe]?function(Ae){return 1E-4>Ae&&$b[fe]||1E-4>1-Ae&&eb[fe]||Ob(Ae)}:Ob})):Hb}function ck(na,Qa,Ga,Za,mb){var $b=Od(na,Qa,Ga),eb=na-Ga+","+Qa,Sb="A"+Ga+","+Ga+",0,1,1,";return Fy($b,Za,"M"+eb+Sb+(na+Ga+","+Qa)+Sb+eb+"Z",2*Math.PI*Ga,mb)}function Gk(na,Qa,Ga,Za,mb,$b){var eb=Pd(na,Qa,Ga,Za),Sb=na+Ga,Hb=Qa+Za;return Fy(eb,mb,"M"+na+
","+Qa+"L"+Sb+","+Qa+"L"+Sb+","+Hb+"L"+na+","+Hb+"Z",2*Ga+2*Za,$b)}function Fy(na,Qa,Ga,Za,mb){void 0===mb&&(mb={});var $b=mb.maxSegmentLength;void 0===$b&&($b=10);mb=mb.string;void 0===mb&&(mb=!0);var eb,Sb;Qa=ta(Qa,$b);return oa(Za)&&Qa.length<Za/$b&&ma(Qa,Math.ceil(Za/$b-Qa.length)),eb=na(Qa),Sb=pa(eb,Qa,mb),mb?function(Hb){return 1E-4>Hb?Ga:Sb(Hb)}:Sb}function Od(na,Qa,Ga){return function(Za){var mb=gb(Za),$b=Rw(Za.concat([Za[0]])),eb=Math.atan2(Za[0][1]-mb[1],Za[0][0]-mb[0]),Sb=0;return Za.map(function(Hb,
hd){var Ob;return hd&&(Sb+=T(Hb,Za[hd-1])),Ob=eb+2*Math.PI*($b?Sb/$b:hd/Za.length),[Math.cos(Ob)*Ga+na,Math.sin(Ob)*Ga+Qa]})}}function Pd(na,Qa,Ga,Za){return function(mb){var $b=gb(mb),eb=Rw(mb.concat([mb[0]]));$b=Math.atan2(mb[0][1]-$b[1],mb[0][0]-$b[0]);var Sb=0;0>$b&&($b=2*Math.PI+$b);var Hb=$b/(2*Math.PI);return mb.map(function(hd,Ob){Ob&&(Sb+=T(hd,mb[Ob-1]));hd=(Hb+(eb?Sb/eb:Ob/mb.length))%1;hd=.125>=hd?[1,.5+4*hd]:.375>=hd?[1.5-4*hd,1]:.625>=hd?[0,2.5-4*hd]:.875>=hd?[4*hd-2.5,0]:[1,4*hd-3.5];
return[na+hd[0]*Ga,Qa+hd[1]*Za]})}}var Ey=function(na){for(var Qa,Ga=-1,Za=na.length,mb=na[Za-1],$b=0;++Ga<Za;)Qa=mb,mb=na[Ga],$b+=Qa[1]*mb[0]-Qa[0]*mb[1];return $b/2},Rw=function(na){var Qa=-1,Ga=na.length,Za=na[Ga-1],mb=Za[0];Za=Za[1];for(var $b=0;++Qa<Ga;){var eb=mb;var Sb=Za;Za=na[Qa];mb=Za[0];Za=Za[1];eb-=mb;Sb-=Za;$b+=Math.sqrt(eb*eb+Sb*Sb)}return $b},tv={a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,z:0},VA=[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279];
a.prototype.matrix=function(na){return 1===na[0]&&0===na[1]&&0===na[2]&&1===na[3]&&0===na[4]&&0===na[5]?this||Jc:((this||Jc).cache=null,(this||Jc).queue.push(na),this||Jc)};a.prototype.translate=function(na,Qa){return 0===na&&0===Qa||((this||Jc).cache=null,(this||Jc).queue.push([1,0,0,1,na,Qa])),this||Jc};a.prototype.scale=function(na,Qa){return 1===na&&1===Qa||((this||Jc).cache=null,(this||Jc).queue.push([na,0,0,Qa,0,0])),this||Jc};a.prototype.rotate=function(na,Qa,Ga){var Za,mb,$b;return 0!==na&&
(this.translate(Qa,Ga),Za=na*Math.PI/180,mb=Math.cos(Za),$b=Math.sin(Za),(this||Jc).queue.push([mb,$b,-$b,mb,0,0]),(this||Jc).cache=null,this.translate(-Qa,-Ga)),this||Jc};a.prototype.skewX=function(na){return 0!==na&&((this||Jc).cache=null,(this||Jc).queue.push([1,0,Math.tan(na*Math.PI/180),1,0,0])),this||Jc};a.prototype.skewY=function(na){return 0!==na&&((this||Jc).cache=null,(this||Jc).queue.push([1,Math.tan(na*Math.PI/180),0,1,0,0])),this||Jc};a.prototype.toArray=function(){var na=this||Jc;if((this||
Jc).cache)return(this||Jc).cache;if(!(this||Jc).queue.length)return(this||Jc).cache=[1,0,0,1,0,0],(this||Jc).cache;if((this||Jc).cache=(this||Jc).queue[0],1===(this||Jc).queue.length)return(this||Jc).cache;for(var Qa=1;Qa<(this||Jc).queue.length;Qa++){var Ga=na.cache,Za=na.queue[Qa];na.cache=[Ga[0]*Za[0]+Ga[2]*Za[1],Ga[1]*Za[0]+Ga[3]*Za[1],Ga[0]*Za[2]+Ga[2]*Za[3],Ga[1]*Za[2]+Ga[3]*Za[3],Ga[0]*Za[4]+Ga[2]*Za[5]+Ga[4],Ga[1]*Za[4]+Ga[3]*Za[5]+Ga[5]]}return(this||Jc).cache};a.prototype.calc=function(na,
Qa,Ga){var Za;return(this||Jc).queue.length?((this||Jc).cache||((this||Jc).cache=this.toArray()),Za=(this||Jc).cache,[na*Za[0]+Qa*Za[2]+(Ga?0:Za[4]),na*Za[1]+Qa*Za[3]+(Ga?0:Za[5])]):[na,Qa]};var ZA={matrix:!0,scale:!0,rotate:!0,translate:!0,skewX:!0,skewY:!0},$A=/\s*(matrix|translate|scale|rotate|skewX|skewY)\s*\(\s*(.+?)\s*\)[\s,]*/,aB=/[\s,]+/,bB=function(na){var Qa,Ga,Za=new a;return na.split($A).forEach(function(mb){if(mb.length){if(void 0!==ZA[mb])return void(Qa=mb);switch(Ga=mb.split(aB).map(function($b){return+$b||
0}),Qa){case "matrix":return void(6===Ga.length&&Za.matrix(Ga));case "scale":return void(1===Ga.length?Za.scale(Ga[0],Ga[0]):2===Ga.length&&Za.scale(Ga[0],Ga[1]));case "rotate":return void(1===Ga.length?Za.rotate(Ga[0],0,0):3===Ga.length&&Za.rotate(Ga[0],Ga[1],Ga[2]));case "translate":return void(1===Ga.length?Za.translate(Ga[0],0):2===Ga.length&&Za.translate(Ga[0],Ga[1]));case "skewX":return void(1===Ga.length&&Za.skewX(Ga[0]));case "skewY":return void(1===Ga.length&&Za.skewY(Ga[0]))}}}),Za},WA=
2*Math.PI,XT=function(na,Qa,Ga,Za,mb,$b,eb,Sb,Hb){var hd=Math.sin(Hb*WA/360),Ob=Math.cos(Hb*WA/360);Hb=Ob*(na-Ga)/2+hd*(Qa-Za)/2;var fe=-hd*(na-Ga)/2+Ob*(Qa-Za)/2;if(0===Hb&&0===fe||0===eb||0===Sb)return[];eb=Math.abs(eb);Sb=Math.abs(Sb);Hb=Hb*Hb/(eb*eb)+fe*fe/(Sb*Sb);1<Hb&&(eb*=Math.sqrt(Hb),Sb*=Math.sqrt(Hb));var Ae=l(na,Qa,Ga,Za,mb,$b,eb,Sb,hd,Ob);na=[];Qa=Ae[2];Ga=Ae[3];Za=Math.max(Math.ceil(Math.abs(Ga)/(WA/4)),1);Ga/=Za;for(mb=0;mb<Za;mb++)na.push(r(Qa,Ga)),Qa+=Ga;return na.map(function(Pf){for(var Lf=
0;Lf<Pf.length;Lf+=2){var Te=Pf[Lf+0],Qf=Pf[Lf+1];Te*=eb;Qf*=Sb;var gp=hd*Te+Ob*Qf;Pf[Lf+0]=Ob*Te-hd*Qf+Ae[0];Pf[Lf+1]=gp+Ae[1]}return Pf})},jM=Math.PI/180;v.prototype.transform=function(na){var Qa=Math.cos((this||Jc).ax*jM),Ga=Math.sin((this||Jc).ax*jM),Za=[(this||Jc).rx*(na[0]*Qa+na[2]*Ga),(this||Jc).rx*(na[1]*Qa+na[3]*Ga),(this||Jc).ry*(-na[0]*Ga+na[2]*Qa),(this||Jc).ry*(-na[1]*Ga+na[3]*Qa)];na=Za[0]*Za[0]+Za[2]*Za[2];Qa=Za[1]*Za[1]+Za[3]*Za[3];Ga=((Za[0]-Za[3])*(Za[0]-Za[3])+(Za[2]+Za[1])*(Za[2]+
Za[1]))*((Za[0]+Za[3])*(Za[0]+Za[3])+(Za[2]-Za[1])*(Za[2]-Za[1]));var mb=(na+Qa)/2;if(Ga<1E-10*mb)return(this||Jc).rx=(this||Jc).ry=Math.sqrt(mb),(this||Jc).ax=0,this||Jc;Za=Za[0]*Za[1]+Za[2]*Za[3];Ga=Math.sqrt(Ga);var $b=mb+Ga/2;Ga=mb-Ga/2;return(this||Jc).ax=1E-10>Math.abs(Za)&&1E-10>Math.abs($b-Qa)?90:180*Math.atan(Math.abs(Za)>Math.abs($b-Qa)?($b-na)/Za:Za/($b-Qa))/Math.PI,0<=(this||Jc).ax?((this||Jc).rx=Math.sqrt($b),(this||Jc).ry=Math.sqrt(Ga)):((this||Jc).ax+=90,(this||Jc).rx=Math.sqrt(Ga),
(this||Jc).ry=Math.sqrt($b)),this||Jc};v.prototype.isDegenerate=function(){return(this||Jc).rx<1E-10*(this||Jc).ry||(this||Jc).ry<1E-10*(this||Jc).rx};y.prototype.__matrix=function(na){var Qa,Ga=this||Jc;na.queue.length&&this.iterate(function(Za,mb,$b,eb){switch(Za[0]){case "v":var Sb=na.calc(0,Za[1],!0);$b=0===Sb[0]?["v",Sb[1]]:["l",Sb[0],Sb[1]];break;case "V":Sb=na.calc($b,Za[1],!1);$b=Sb[0]===na.calc($b,eb,!1)[0]?["V",Sb[1]]:["L",Sb[0],Sb[1]];break;case "h":Sb=na.calc(Za[1],0,!0);$b=0===Sb[1]?
["h",Sb[0]]:["l",Sb[0],Sb[1]];break;case "H":Sb=na.calc(Za[1],eb,!1);$b=Sb[1]===na.calc($b,eb,!1)[1]?["H",Sb[0]]:["L",Sb[0],Sb[1]];break;case "a":case "A":Sb=na.toArray();var Hb=v(Za[1],Za[2],Za[3]).transform(Sb);if(0>Sb[0]*Sb[3]-Sb[1]*Sb[2]&&(Za[5]=Za[5]?"0":"1"),Sb=na.calc(Za[6],Za[7],"a"===Za[0]),"A"===Za[0]&&Za[6]===$b&&Za[7]===eb||"a"===Za[0]&&0===Za[6]&&0===Za[7]){$b=["a"===Za[0]?"l":"L",Sb[0],Sb[1]];break}$b=Hb.isDegenerate()?["a"===Za[0]?"l":"L",Sb[0],Sb[1]]:[Za[0],Hb.rx,Hb.ry,Hb.ax,Za[4],
Za[5],Sb[0],Sb[1]];break;case "m":Sb=na.calc(Za[1],Za[2],0<mb);$b=["m",Sb[0],Sb[1]];break;default:for(Sb=Za[0],$b=[Sb],eb=Sb.toLowerCase()===Sb,Qa=1;Qa<Za.length;Qa+=2)Sb=na.calc(Za[Qa],Za[Qa+1],eb),$b.push(Sb[0],Sb[1])}Ga.segments[mb]=$b},!0)};y.prototype.__evaluateStack=function(){var na,Qa=this||Jc;if((this||Jc).__stack.length){if(1===(this||Jc).__stack.length)return this.__matrix((this||Jc).__stack[0]),void((this||Jc).__stack=[]);var Ga=a();for(na=(this||Jc).__stack.length;0<=--na;)Ga.matrix(Qa.__stack[na].toArray());
this.__matrix(Ga);(this||Jc).__stack=[]}};y.prototype.toString=function(){var na=this||Jc,Qa=[];this.__evaluateStack();for(var Ga=0;Ga<(this||Jc).segments.length;Ga++){var Za=na.segments[Ga][0];Za=0<Ga&&"m"!==Za&&"M"!==Za&&Za===na.segments[Ga-1][0];Qa=Qa.concat(Za?na.segments[Ga].slice(1):na.segments[Ga])}return Qa.join(" ").replace(/ ?([achlmqrstvz]) ?/gi,"$1").replace(/ \-/g,"-").replace(/zm/g,"z m")};y.prototype.translate=function(na,Qa){return(this||Jc).__stack.push(a().translate(na,Qa||0)),this||
Jc};y.prototype.scale=function(na,Qa){return(this||Jc).__stack.push(a().scale(na,Qa||0===Qa?Qa:na)),this||Jc};y.prototype.rotate=function(na,Qa,Ga){return(this||Jc).__stack.push(a().rotate(na,Qa||0,Ga||0)),this||Jc};y.prototype.skewX=function(na){return(this||Jc).__stack.push(a().skewX(na)),this||Jc};y.prototype.skewY=function(na){return(this||Jc).__stack.push(a().skewY(na)),this||Jc};y.prototype.matrix=function(na){return(this||Jc).__stack.push(a().matrix(na)),this||Jc};y.prototype.transform=function(na){return na.trim()?
((this||Jc).__stack.push(bB(na)),this||Jc):this||Jc};y.prototype.round=function(na){var Qa,Ga=0,Za=0,mb=0,$b=0;return na=na||0,this.__evaluateStack(),(this||Jc).segments.forEach(function(eb){var Sb=eb[0].toLowerCase()===eb[0];switch(eb[0]){case "H":case "h":return Sb&&(eb[1]+=mb),mb=eb[1]-eb[1].toFixed(na),void(eb[1]=+eb[1].toFixed(na));case "V":case "v":return Sb&&(eb[1]+=$b),$b=eb[1]-eb[1].toFixed(na),void(eb[1]=+eb[1].toFixed(na));case "Z":case "z":return mb=Ga,void($b=Za);case "M":case "m":return Sb&&
(eb[1]+=mb,eb[2]+=$b),mb=eb[1]-eb[1].toFixed(na),$b=eb[2]-eb[2].toFixed(na),Ga=mb,Za=$b,eb[1]=+eb[1].toFixed(na),void(eb[2]=+eb[2].toFixed(na));case "A":case "a":return Sb&&(eb[6]+=mb,eb[7]+=$b),mb=eb[6]-eb[6].toFixed(na),$b=eb[7]-eb[7].toFixed(na),eb[1]=+eb[1].toFixed(na),eb[2]=+eb[2].toFixed(na),eb[3]=+eb[3].toFixed(na+2),eb[6]=+eb[6].toFixed(na),void(eb[7]=+eb[7].toFixed(na));default:return Qa=eb.length,Sb&&(eb[Qa-2]+=mb,eb[Qa-1]+=$b),mb=eb[Qa-2]-eb[Qa-2].toFixed(na),$b=eb[Qa-1]-eb[Qa-1].toFixed(na),
void eb.forEach(function(Hb,hd){hd&&(eb[hd]=+eb[hd].toFixed(na))})}}),this||Jc};y.prototype.iterate=function(na,Qa){var Ga,Za=(this||Jc).segments,mb={},$b=!1,eb=0,Sb=0,Hb=0,hd=0;if(Qa||this.__evaluateStack(),Za.forEach(function(fe,Ae){var Pf=na(fe,Ae,eb,Sb);Array.isArray(Pf)&&(mb[Ae]=Pf,$b=!0);Ae=fe[0]===fe[0].toLowerCase();switch(fe[0]){case "m":case "M":return eb=fe[1]+(Ae?eb:0),Sb=fe[2]+(Ae?Sb:0),Hb=eb,void(hd=Sb);case "h":case "H":return void(eb=fe[1]+(Ae?eb:0));case "v":case "V":return void(Sb=
fe[1]+(Ae?Sb:0));case "z":case "Z":return eb=Hb,void(Sb=hd);default:eb=fe[fe.length-2]+(Ae?eb:0),Sb=fe[fe.length-1]+(Ae?Sb:0)}}),!$b)return this||Jc;var Ob=[];for(Qa=0;Qa<Za.length;Qa++)if(void 0!==mb[Qa])for(Ga=0;Ga<mb[Qa].length;Ga++)Ob.push(mb[Qa][Ga]);else Ob.push(Za[Qa]);return(this||Jc).segments=Ob,this||Jc};y.prototype.abs=function(){return this.iterate(function(na,Qa,Ga,Za){Qa=na[0];var mb=Qa.toUpperCase();if(Qa!==mb)switch(na[0]=mb,Qa){case "v":return void(na[1]+=Za);case "a":return na[6]+=
Ga,void(na[7]+=Za);default:for(Qa=1;Qa<na.length;Qa++)na[Qa]+=Qa%2?Ga:Za}},!0),this||Jc};y.prototype.rel=function(){return this.iterate(function(na,Qa,Ga,Za){var mb=na[0],$b=mb.toLowerCase();if(mb!==$b&&(0!==Qa||"M"!==mb))switch(na[0]=$b,mb){case "V":return void(na[1]-=Za);case "A":return na[6]-=Ga,void(na[7]-=Za);default:for(Qa=1;Qa<na.length;Qa++)na[Qa]-=Qa%2?Ga:Za}},!0),this||Jc};y.prototype.unarc=function(){return this.iterate(function(na,Qa,Ga,Za){var mb,$b,eb,Sb=[];Qa=na[0];return"A"!==Qa&&
"a"!==Qa?null:("a"===Qa?($b=Ga+na[6],eb=Za+na[7]):($b=na[6],eb=na[7]),mb=XT(Ga,Za,$b,eb,na[4],na[5],na[1],na[2],na[3]),0===mb.length?[["a"===na[0]?"l":"L",na[6],na[7]]]:(mb.forEach(function(Hb){Sb.push(["C",Hb[2],Hb[3],Hb[4],Hb[5],Hb[6],Hb[7]])}),Sb))}),this||Jc};y.prototype.unshort=function(){var na,Qa,Ga,Za,mb,$b=(this||Jc).segments;return this.iterate(function(eb,Sb,Hb,hd){var Ob,fe=eb[0],Ae=fe.toUpperCase();Sb&&("T"===Ae?(Ob="t"===fe,Ga=$b[Sb-1],"Q"===Ga[0]?(na=Ga[1]-Hb,Qa=Ga[2]-hd):"q"===Ga[0]?
(na=Ga[1]-Ga[3],Qa=Ga[2]-Ga[4]):(na=0,Qa=0),Za=-na,mb=-Qa,Ob||(Za+=Hb,mb+=hd),$b[Sb]=[Ob?"q":"Q",Za,mb,eb[1],eb[2]]):"S"===Ae&&(Ob="s"===fe,Ga=$b[Sb-1],"C"===Ga[0]?(na=Ga[3]-Hb,Qa=Ga[4]-hd):"c"===Ga[0]?(na=Ga[3]-Ga[5],Qa=Ga[4]-Ga[6]):(na=0,Qa=0),Za=-na,mb=-Qa,Ob||(Za+=Hb,mb+=hd),$b[Sb]=[Ob?"c":"C",Za,mb,eb[1],eb[2],eb[3],eb[4]]))}),this||Jc};var aM=y,ZG={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},YT=/([astvzqmhlc])([^astvzqmhlc]*)/gi,$T=function(na){var Qa=[];return na.replace(YT,function(Ga,Za,mb){Ga=
Za.toLowerCase();mb=(mb=mb.match(ZT))?mb.map(Number):[];for("m"===Ga&&2<mb.length&&(Qa.push([Za].concat(mb.splice(0,2))),Ga="l",Za="m"===Za?"l":"L");0<=mb.length;){if(mb.length===ZG[Ga])return mb.unshift(Za),Qa.push(mb);if(mb.length<ZG[Ga])throw Error("malformed path data");Qa.push([Za].concat(mb.splice(0,ZG[Ga])))}}),Qa},ZT=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/gi,qr=function(na,Qa,Ga,Za,mb,$b,eb,Sb){return new A(na,Qa,Ga,Za,mb,$b,eb,Sb)};A.prototype={constructor:A,init:function(){(this||Jc).length=this.getArcLength([(this||
Jc).a.x,(this||Jc).b.x,(this||Jc).c.x,(this||Jc).d.x],[(this||Jc).a.y,(this||Jc).b.y,(this||Jc).c.y,(this||Jc).d.y])},getTotalLength:function(){return(this||Jc).length},getPointAtLength:function(na){na=H(na,(this||Jc).length,(this||Jc).getArcLength,[(this||Jc).a.x,(this||Jc).b.x,(this||Jc).c.x,(this||Jc).d.x],[(this||Jc).a.y,(this||Jc).b.y,(this||Jc).c.y,(this||Jc).d.y]);return this.getPoint([(this||Jc).a.x,(this||Jc).b.x,(this||Jc).c.x,(this||Jc).d.x],[(this||Jc).a.y,(this||Jc).b.y,(this||Jc).c.y,
(this||Jc).d.y],na)},getTangentAtLength:function(na){na=H(na,(this||Jc).length,(this||Jc).getArcLength,[(this||Jc).a.x,(this||Jc).b.x,(this||Jc).c.x,(this||Jc).d.x],[(this||Jc).a.y,(this||Jc).b.y,(this||Jc).c.y,(this||Jc).d.y]);na=this.getDerivative([(this||Jc).a.x,(this||Jc).b.x,(this||Jc).c.x,(this||Jc).d.x],[(this||Jc).a.y,(this||Jc).b.y,(this||Jc).c.y,(this||Jc).d.y],na);var Qa=Math.sqrt(na.x*na.x+na.y*na.y);return 0<Qa?{x:na.x/Qa,y:na.y/Qa}:{x:0,y:0}},getPropertiesAtLength:function(na){na=H(na,
(this||Jc).length,(this||Jc).getArcLength,[(this||Jc).a.x,(this||Jc).b.x,(this||Jc).c.x,(this||Jc).d.x],[(this||Jc).a.y,(this||Jc).b.y,(this||Jc).c.y,(this||Jc).d.y]);var Qa=this.getDerivative([(this||Jc).a.x,(this||Jc).b.x,(this||Jc).c.x,(this||Jc).d.x],[(this||Jc).a.y,(this||Jc).b.y,(this||Jc).c.y,(this||Jc).d.y],na);var Ga=Math.sqrt(Qa.x*Qa.x+Qa.y*Qa.y);Qa=0<Ga?{x:Qa.x/Ga,y:Qa.y/Ga}:{x:0,y:0};na=this.getPoint([(this||Jc).a.x,(this||Jc).b.x,(this||Jc).c.x,(this||Jc).d.x],[(this||Jc).a.y,(this||
Jc).b.y,(this||Jc).c.y,(this||Jc).d.y],na);return{x:na.x,y:na.y,tangentX:Qa.x,tangentY:Qa.y}}};var QT=[[],[],[-.5773502691896257,.5773502691896257],[0,-.7745966692414834,.7745966692414834],[-.33998104358485626,.33998104358485626,-.8611363115940526,.8611363115940526],[0,-.5384693101056831,.5384693101056831,-.906179845938664,.906179845938664],[.6612093864662645,-.6612093864662645,-.2386191860831969,.2386191860831969,-.932469514203152,.932469514203152],[0,.4058451513773972,-.4058451513773972,-.7415311855993945,
.7415311855993945,-.9491079123427585,.9491079123427585],[-.1834346424956498,.1834346424956498,-.525532409916329,.525532409916329,-.7966664774136267,.7966664774136267,-.9602898564975363,.9602898564975363],[0,-.8360311073266358,.8360311073266358,-.9681602395076261,.9681602395076261,-.3242534234038089,.3242534234038089,-.6133714327005904,.6133714327005904],[-.14887433898163122,.14887433898163122,-.4333953941292472,.4333953941292472,-.6794095682990244,.6794095682990244,-.8650633666889845,.8650633666889845,
-.9739065285171717,.9739065285171717],[0,-.26954315595234496,.26954315595234496,-.5190961292068118,.5190961292068118,-.7301520055740494,.7301520055740494,-.8870625997680953,.8870625997680953,-.978228658146057,.978228658146057],[-.1252334085114689,.1252334085114689,-.3678314989981802,.3678314989981802,-.5873179542866175,.5873179542866175,-.7699026741943047,.7699026741943047,-.9041172563704749,.9041172563704749,-.9815606342467192,.9815606342467192],[0,-.2304583159551348,.2304583159551348,-.44849275103644687,
.44849275103644687,-.6423493394403402,.6423493394403402,-.8015780907333099,.8015780907333099,-.9175983992229779,.9175983992229779,-.9841830547185881,.9841830547185881],[-.10805494870734367,.10805494870734367,-.31911236892788974,.31911236892788974,-.5152486363581541,.5152486363581541,-.6872929048116855,.6872929048116855,-.827201315069765,.827201315069765,-.9284348836635735,.9284348836635735,-.9862838086968123,.9862838086968123],[0,-.20119409399743451,.20119409399743451,-.3941513470775634,.3941513470775634,
-.5709721726085388,.5709721726085388,-.7244177313601701,.7244177313601701,-.8482065834104272,.8482065834104272,-.937273392400706,.937273392400706,-.9879925180204854,.9879925180204854],[-.09501250983763744,.09501250983763744,-.2816035507792589,.2816035507792589,-.45801677765722737,.45801677765722737,-.6178762444026438,.6178762444026438,-.755404408355003,.755404408355003,-.8656312023878318,.8656312023878318,-.9445750230732326,.9445750230732326,-.9894009349916499,.9894009349916499],[0,-.17848418149584785,
.17848418149584785,-.3512317634538763,.3512317634538763,-.5126905370864769,.5126905370864769,-.6576711592166907,.6576711592166907,-.7815140038968014,.7815140038968014,-.8802391537269859,.8802391537269859,-.9506755217687678,.9506755217687678,-.9905754753144174,.9905754753144174],[-.0847750130417353,.0847750130417353,-.2518862256915055,.2518862256915055,-.41175116146284263,.41175116146284263,-.5597708310739475,.5597708310739475,-.6916870430603532,.6916870430603532,-.8037049589725231,.8037049589725231,
-.8926024664975557,.8926024664975557,-.9558239495713977,.9558239495713977,-.9915651684209309,.9915651684209309],[0,-.16035864564022537,.16035864564022537,-.31656409996362983,.31656409996362983,-.46457074137596094,.46457074137596094,-.600545304661681,.600545304661681,-.7209661773352294,.7209661773352294,-.8227146565371428,.8227146565371428,-.9031559036148179,.9031559036148179,-.96020815213483,.96020815213483,-.9924068438435844,.9924068438435844],[-.07652652113349734,.07652652113349734,-.22778585114164507,
.22778585114164507,-.37370608871541955,.37370608871541955,-.5108670019508271,.5108670019508271,-.636053680726515,.636053680726515,-.7463319064601508,.7463319064601508,-.8391169718222188,.8391169718222188,-.912234428251326,.912234428251326,-.9639719272779138,.9639719272779138,-.9931285991850949,.9931285991850949],[0,-.1455618541608951,.1455618541608951,-.2880213168024011,.2880213168024011,-.4243421202074388,.4243421202074388,-.5516188358872198,.5516188358872198,-.6671388041974123,.6671388041974123,
-.7684399634756779,.7684399634756779,-.8533633645833173,.8533633645833173,-.9200993341504008,.9200993341504008,-.9672268385663063,.9672268385663063,-.9937521706203895,.9937521706203895],[-.06973927331972223,.06973927331972223,-.20786042668822127,.20786042668822127,-.34193582089208424,.34193582089208424,-.469355837986757,.469355837986757,-.5876404035069116,.5876404035069116,-.6944872631866827,.6944872631866827,-.7878168059792081,.7878168059792081,-.8658125777203002,.8658125777203002,-.926956772187174,
.926956772187174,-.9700604978354287,.9700604978354287,-.9942945854823992,.9942945854823992],[0,-.1332568242984661,.1332568242984661,-.26413568097034495,.26413568097034495,-.3903010380302908,.3903010380302908,-.5095014778460075,.5095014778460075,-.6196098757636461,.6196098757636461,-.7186613631319502,.7186613631319502,-.8048884016188399,.8048884016188399,-.8767523582704416,.8767523582704416,-.9329710868260161,.9329710868260161,-.9725424712181152,.9725424712181152,-.9947693349975522,.9947693349975522],
[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213]],RT=[[],[],[1,1],[.8888888888888888,.5555555555555556,.5555555555555556],
[.6521451548625461,.6521451548625461,.34785484513745385,.34785484513745385],[.5688888888888889,.47862867049936647,.47862867049936647,.23692688505618908,.23692688505618908],[.3607615730481386,.3607615730481386,.46791393457269104,.46791393457269104,.17132449237917036,.17132449237917036],[.4179591836734694,.3818300505051189,.3818300505051189,.27970539148927664,.27970539148927664,.1294849661688697,.1294849661688697],[.362683783378362,.362683783378362,.31370664587788727,.31370664587788727,.22238103445337448,
.22238103445337448,.10122853629037626,.10122853629037626],[.3302393550012598,.1806481606948574,.1806481606948574,.08127438836157441,.08127438836157441,.31234707704000286,.31234707704000286,.26061069640293544,.26061069640293544],[.29552422471475287,.29552422471475287,.26926671930999635,.26926671930999635,.21908636251598204,.21908636251598204,.1494513491505806,.1494513491505806,.06667134430868814,.06667134430868814],[.2729250867779006,.26280454451024665,.26280454451024665,.23319376459199048,.23319376459199048,
.18629021092773426,.18629021092773426,.1255803694649046,.1255803694649046,.05566856711617366,.05566856711617366],[.24914704581340277,.24914704581340277,.2334925365383548,.2334925365383548,.20316742672306592,.20316742672306592,.16007832854334622,.16007832854334622,.10693932599531843,.10693932599531843,.04717533638651183,.04717533638651183],[.2325515532308739,.22628318026289723,.22628318026289723,.2078160475368885,.2078160475368885,.17814598076194574,.17814598076194574,.13887351021978725,.13887351021978725,
.09212149983772845,.09212149983772845,.04048400476531588,.04048400476531588],[.2152638534631578,.2152638534631578,.2051984637212956,.2051984637212956,.18553839747793782,.18553839747793782,.15720316715819355,.15720316715819355,.12151857068790319,.12151857068790319,.08015808715976021,.08015808715976021,.03511946033175186,.03511946033175186],[.2025782419255613,.19843148532711158,.19843148532711158,.1861610000155622,.1861610000155622,.16626920581699392,.16626920581699392,.13957067792615432,.13957067792615432,
.10715922046717194,.10715922046717194,.07036604748810812,.07036604748810812,.03075324199611727,.03075324199611727],[.1894506104550685,.1894506104550685,.18260341504492358,.18260341504492358,.16915651939500254,.16915651939500254,.14959598881657674,.14959598881657674,.12462897125553388,.12462897125553388,.09515851168249279,.09515851168249279,.062253523938647894,.062253523938647894,.027152459411754096,.027152459411754096],[.17944647035620653,.17656270536699264,.17656270536699264,.16800410215645004,.16800410215645004,
.15404576107681028,.15404576107681028,.13513636846852548,.13513636846852548,.11188384719340397,.11188384719340397,.08503614831717918,.08503614831717918,.0554595293739872,.0554595293739872,.02414830286854793,.02414830286854793],[.1691423829631436,.1691423829631436,.16427648374583273,.16427648374583273,.15468467512626524,.15468467512626524,.14064291467065065,.14064291467065065,.12255520671147846,.12255520671147846,.10094204410628717,.10094204410628717,.07642573025488905,.07642573025488905,.0497145488949698,
.0497145488949698,.02161601352648331,.02161601352648331],[.1610544498487837,.15896884339395434,.15896884339395434,.15276604206585967,.15276604206585967,.1426067021736066,.1426067021736066,.12875396253933621,.12875396253933621,.11156664554733399,.11156664554733399,.09149002162245,.09149002162245,.06904454273764123,.06904454273764123,.0448142267656996,.0448142267656996,.019461788229726478,.019461788229726478],[.15275338713072584,.15275338713072584,.14917298647260374,.14917298647260374,.14209610931838204,
.14209610931838204,.13168863844917664,.13168863844917664,.11819453196151841,.11819453196151841,.10193011981724044,.10193011981724044,.08327674157670475,.08327674157670475,.06267204833410907,.06267204833410907,.04060142980038694,.04060142980038694,.017614007139152118,.017614007139152118],[.14608113364969041,.14452440398997005,.14452440398997005,.13988739479107315,.13988739479107315,.13226893863333747,.13226893863333747,.12183141605372853,.12183141605372853,.10879729916714838,.10879729916714838,.09344442345603386,
.09344442345603386,.0761001136283793,.0761001136283793,.057134425426857205,.057134425426857205,.036953789770852494,.036953789770852494,.016017228257774335,.016017228257774335],[.13925187285563198,.13925187285563198,.13654149834601517,.13654149834601517,.13117350478706238,.13117350478706238,.12325237681051242,.12325237681051242,.11293229608053922,.11293229608053922,.10041414444288096,.10041414444288096,.08594160621706773,.08594160621706773,.06979646842452049,.06979646842452049,.052293335152683286,
.052293335152683286,.03377490158481415,.03377490158481415,.0146279952982722,.0146279952982722],[.13365457218610619,.1324620394046966,.1324620394046966,.12890572218808216,.12890572218808216,.12304908430672953,.12304908430672953,.11499664022241136,.11499664022241136,.10489209146454141,.10489209146454141,.09291576606003515,.09291576606003515,.07928141177671895,.07928141177671895,.06423242140852585,.06423242140852585,.04803767173108467,.04803767173108467,.030988005856979445,.030988005856979445,.013411859487141771,
.013411859487141771],[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872]],PT=[[1],[1,1],[1,2,1],[1,3,
3,1]],XA=2*Math.PI,ST=function(na,Qa,Ga,Za,mb,$b,eb,Sb,Hb){var hd=Math.sin(mb*XA/360),Ob=Math.cos(mb*XA/360);mb=Ob*(na-Sb)/2+hd*(Qa-Hb)/2;var fe=-hd*(na-Sb)/2+Ob*(Qa-Hb)/2;if(0===mb&&0===fe||0===Ga||0===Za)return[];Ga=Math.abs(Ga);Za=Math.abs(Za);mb=mb*mb/(Ga*Ga)+fe*fe/(Za*Za);1<mb&&(Ga*=Math.sqrt(mb),Za*=Math.sqrt(mb));var Ae=Aa(na,Qa,Sb,Hb,$b,eb,Ga,Za,hd,Ob);na=[];Qa=Ae[2];$b=Ae[3];eb=Math.max(Math.ceil(Math.abs($b)/(XA/4)),1);$b/=eb;for(Sb=0;Sb<eb;Sb++)na.push(Ma(Qa,$b)),Qa+=$b;return na.map(function(Pf){for(var Lf=
0;Lf<Pf.length;Lf+=2){var Te=Pf[Lf+0],Qf=Pf[Lf+1];Te*=Ga;Qf*=Za;var gp=hd*Te+Ob*Qf;Pf[Lf+0]=Ob*Te-hd*Qf+Ae[0];Pf[Lf+1]=gp+Ae[1]}return Pf})},kM=function(na,Qa,Ga,Za,mb,$b,eb,Sb,Hb){return new K(na,Qa,Ga,Za,mb,$b,eb,Sb,Hb)};K.prototype={constructor:K,init:function(){},getTotalLength:function(){return(this||Jc).length},getPointAtLength:function(na){var Qa=this||Jc;0>na?na=0:na>(this||Jc).length&&(na=(this||Jc).length);for(var Ga=(this||Jc).partialLengths.length-1;(this||Jc).partialLengths[Ga]>=na&&
0<(this||Jc).partialLengths[Ga];)Ga--;Ga<(this||Jc).partialLengths.length-1&&Ga++;for(var Za=0,mb=0;mb<Ga;mb++)Za+=Qa.partialLengths[mb];return(this||Jc).curves[Ga].getPointAtLength(na-Za)},getTangentAtLength:function(na){var Qa=this||Jc;0>na?na=0:na>(this||Jc).length&&(na=(this||Jc).length);for(var Ga=(this||Jc).partialLengths.length-1;(this||Jc).partialLengths[Ga]>=na&&0<(this||Jc).partialLengths[Ga];)Ga--;Ga<(this||Jc).partialLengths.length-1&&Ga++;for(var Za=0,mb=0;mb<Ga;mb++)Za+=Qa.partialLengths[mb];
return(this||Jc).curves[Ga].getTangentAtLength(na-Za)},getPropertiesAtLength:function(na){var Qa=this.getTangentAtLength(na);na=this.getPointAtLength(na);return{x:na.x,y:na.y,tangentX:Qa.x,tangentY:Qa.y}}};var Lt=function(na,Qa,Ga,Za){return new aa(na,Qa,Ga,Za)};aa.prototype.getTotalLength=function(){return Math.sqrt(Math.pow((this||Jc).x0-(this||Jc).x1,2)+Math.pow((this||Jc).y0-(this||Jc).y1,2))};aa.prototype.getPointAtLength=function(na){na/=Math.sqrt(Math.pow((this||Jc).x0-(this||Jc).x1,2)+Math.pow((this||
Jc).y0-(this||Jc).y1,2));return{x:(this||Jc).x0+((this||Jc).x1-(this||Jc).x0)*na,y:(this||Jc).y0+((this||Jc).y1-(this||Jc).y0)*na}};aa.prototype.getTangentAtLength=function(){var na=Math.sqrt(((this||Jc).x1-(this||Jc).x0)*((this||Jc).x1-(this||Jc).x0)+((this||Jc).y1-(this||Jc).y0)*((this||Jc).y1-(this||Jc).y0));return{x:((this||Jc).x1-(this||Jc).x0)/na,y:((this||Jc).y1-(this||Jc).y0)/na}};aa.prototype.getPropertiesAtLength=function(na){na=this.getPointAtLength(na);var Qa=this.getTangentAtLength();
return{x:na.x,y:na.y,tangentX:Qa.x,tangentY:Qa.y}};var TT=function(na){function Qa(eb){if(!eb)return null;var Sb;eb=$T(eb);for(var Hb=[0,0],hd=[0,0],Ob=0;Ob<eb.length;Ob++)"M"===eb[Ob][0]?(Hb=[eb[Ob][1],eb[Ob][2]],mb.push(null)):"m"===eb[Ob][0]?(Hb=[eb[Ob][1]+Hb[0],eb[Ob][2]+Hb[1]],mb.push(null)):"L"===eb[Ob][0]?(Ga+=Math.sqrt(Math.pow(Hb[0]-eb[Ob][1],2)+Math.pow(Hb[1]-eb[Ob][2],2)),mb.push(new Lt(Hb[0],eb[Ob][1],Hb[1],eb[Ob][2])),Hb=[eb[Ob][1],eb[Ob][2]]):"l"===eb[Ob][0]?(Ga+=Math.sqrt(Math.pow(eb[Ob][1],
2)+Math.pow(eb[Ob][2],2)),mb.push(new Lt(Hb[0],eb[Ob][1]+Hb[0],Hb[1],eb[Ob][2]+Hb[1])),Hb=[eb[Ob][1]+Hb[0],eb[Ob][2]+Hb[1]]):"H"===eb[Ob][0]?(Ga+=Math.abs(Hb[0]-eb[Ob][1]),mb.push(new Lt(Hb[0],eb[Ob][1],Hb[1],Hb[1])),Hb[0]=eb[Ob][1]):"h"===eb[Ob][0]?(Ga+=Math.abs(eb[Ob][1]),mb.push(new Lt(Hb[0],Hb[0]+eb[Ob][1],Hb[1],Hb[1])),Hb[0]=eb[Ob][1]+Hb[0]):"V"===eb[Ob][0]?(Ga+=Math.abs(Hb[1]-eb[Ob][1]),mb.push(new Lt(Hb[0],Hb[0],Hb[1],eb[Ob][1])),Hb[1]=eb[Ob][1]):"v"===eb[Ob][0]?(Ga+=Math.abs(eb[Ob][1]),mb.push(new Lt(Hb[0],
Hb[0],Hb[1],Hb[1]+eb[Ob][1])),Hb[1]=eb[Ob][1]+Hb[1]):"z"===eb[Ob][0]||"Z"===eb[Ob][0]?(Ga+=Math.sqrt(Math.pow(eb[0][1]-Hb[0],2)+Math.pow(eb[0][2]-Hb[1],2)),mb.push(new Lt(Hb[0],eb[0][1],Hb[1],eb[0][2])),Hb=[eb[0][1],eb[0][2]]):"C"===eb[Ob][0]?(Sb=new qr(Hb[0],Hb[1],eb[Ob][1],eb[Ob][2],eb[Ob][3],eb[Ob][4],eb[Ob][5],eb[Ob][6]),Ga+=Sb.getTotalLength(),Hb=[eb[Ob][5],eb[Ob][6]],mb.push(Sb)):"c"===eb[Ob][0]?(Sb=new qr(Hb[0],Hb[1],Hb[0]+eb[Ob][1],Hb[1]+eb[Ob][2],Hb[0]+eb[Ob][3],Hb[1]+eb[Ob][4],Hb[0]+eb[Ob][5],
Hb[1]+eb[Ob][6]),Ga+=Sb.getTotalLength(),Hb=[eb[Ob][5]+Hb[0],eb[Ob][6]+Hb[1]],mb.push(Sb)):"S"===eb[Ob][0]?(Sb=0<Ob&&-1<["C","c","S","s"].indexOf(eb[Ob-1][0])?new qr(Hb[0],Hb[1],2*Hb[0]-eb[Ob-1][eb[Ob-1].length-4],2*Hb[1]-eb[Ob-1][eb[Ob-1].length-3],eb[Ob][1],eb[Ob][2],eb[Ob][3],eb[Ob][4]):new qr(Hb[0],Hb[1],Hb[0],Hb[1],eb[Ob][1],eb[Ob][2],eb[Ob][3],eb[Ob][4]),Ga+=Sb.getTotalLength(),Hb=[eb[Ob][3],eb[Ob][4]],mb.push(Sb)):"s"===eb[Ob][0]?(Sb=0<Ob&&-1<["C","c","S","s"].indexOf(eb[Ob-1][0])?new qr(Hb[0],
Hb[1],Hb[0]+Sb.d.x-Sb.c.x,Hb[1]+Sb.d.y-Sb.c.y,Hb[0]+eb[Ob][1],Hb[1]+eb[Ob][2],Hb[0]+eb[Ob][3],Hb[1]+eb[Ob][4]):new qr(Hb[0],Hb[1],Hb[0],Hb[1],Hb[0]+eb[Ob][1],Hb[1]+eb[Ob][2],Hb[0]+eb[Ob][3],Hb[1]+eb[Ob][4]),Ga+=Sb.getTotalLength(),Hb=[eb[Ob][3]+Hb[0],eb[Ob][4]+Hb[1]],mb.push(Sb)):"Q"===eb[Ob][0]?(Sb=new qr(Hb[0],Hb[1],eb[Ob][1],eb[Ob][2],eb[Ob][3],eb[Ob][4]),Ga+=Sb.getTotalLength(),mb.push(Sb),Hb=[eb[Ob][3],eb[Ob][4]],hd=[eb[Ob][1],eb[Ob][2]]):"q"===eb[Ob][0]?(Sb=new qr(Hb[0],Hb[1],Hb[0]+eb[Ob][1],
Hb[1]+eb[Ob][2],Hb[0]+eb[Ob][3],Hb[1]+eb[Ob][4]),Ga+=Sb.getTotalLength(),hd=[Hb[0]+eb[Ob][1],Hb[1]+eb[Ob][2]],Hb=[eb[Ob][3]+Hb[0],eb[Ob][4]+Hb[1]],mb.push(Sb)):"T"===eb[Ob][0]?(Sb=0<Ob&&-1<["Q","q","T","t"].indexOf(eb[Ob-1][0])?new qr(Hb[0],Hb[1],2*Hb[0]-hd[0],2*Hb[1]-hd[1],eb[Ob][1],eb[Ob][2]):new Lt(Hb[0],eb[Ob][1],Hb[1],eb[Ob][2]),mb.push(Sb),Ga+=Sb.getTotalLength(),hd=[2*Hb[0]-hd[0],2*Hb[1]-hd[1]],Hb=[eb[Ob][1],eb[Ob][2]]):"t"===eb[Ob][0]?(Sb=0<Ob&&-1<["Q","q","T","t"].indexOf(eb[Ob-1][0])?new qr(Hb[0],
Hb[1],2*Hb[0]-hd[0],2*Hb[1]-hd[1],Hb[0]+eb[Ob][1],Hb[1]+eb[Ob][2]):new Lt(Hb[0],Hb[0]+eb[Ob][1],Hb[1],Hb[1]+eb[Ob][2]),Ga+=Sb.getTotalLength(),hd=[2*Hb[0]-hd[0],2*Hb[1]-hd[1]],Hb=[eb[Ob][1]+Hb[0],eb[Ob][2]+Hb[0]],mb.push(Sb)):"A"===eb[Ob][0]?(Sb=new kM(Hb[0],Hb[1],eb[Ob][1],eb[Ob][2],eb[Ob][3],eb[Ob][4],eb[Ob][5],eb[Ob][6],eb[Ob][7]),Ga+=Sb.getTotalLength(),Hb=[eb[Ob][6],eb[Ob][7]],mb.push(Sb)):"a"===eb[Ob][0]&&(Sb=new kM(Hb[0],Hb[1],eb[Ob][1],eb[Ob][2],eb[Ob][3],eb[Ob][4],eb[Ob][5],Hb[0]+eb[Ob][6],
Hb[1]+eb[Ob][7]),Ga+=Sb.getTotalLength(),Hb=[Hb[0]+eb[Ob][6],Hb[1]+eb[Ob][7]],mb.push(Sb)),Za.push(Ga);return Qa}var Ga=0,Za=[],mb=[];Qa.getTotalLength=function(){return Ga};Qa.getPointAtLength=function(eb){eb=$b(eb);return mb[eb.i].getPointAtLength(eb.fraction)};Qa.getTangentAtLength=function(eb){eb=$b(eb);return mb[eb.i].getTangentAtLength(eb.fraction)};Qa.getPropertiesAtLength=function(eb){eb=$b(eb);return mb[eb.i].getPropertiesAtLength(eb.fraction)};var $b=function(eb){0>eb?eb=0:eb>Ga&&(eb=Ga);
for(var Sb=Za.length-1;Za[Sb]>=eb&&0<Za[Sb];)Sb--;return Sb++,{fraction:eb-Za[Sb-1],i:Sb}};return Qa(na)},YG='All shapes must be supplied as arrays of [x, y] points or an SVG path string (https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/d).\nExample valid ways of supplying a shape would be:\n[[0, 0], [10, 0], [10, 10]]\n"M0,0 L10,0 L10,10Z"\n',bM=function(na,Qa){for(var Ga,Za,mb,$b=na.length,eb=1/0,Sb=0;Sb<$b;Sb++)!function(Hb){Za=0;Qa.forEach(function(hd,Ob){hd=T(na[(Hb+Ob)%$b],hd);Za+=
hd*hd});Za<eb&&(eb=Za,Ga=Hb)}(Sb);Ga&&(mb=na.splice(0,Ga),na.splice.apply(na,[na.length,0].concat(mb)))},hM=kc;kc.deviation=function(na,Qa,Ga,Za){var mb=Qa&&Qa.length,$b=Math.abs(Qh(na,0,mb?Qa[0]*Ga:na.length,Ga));if(mb){mb=0;for(var eb=Qa.length;mb<eb;mb++)$b-=Math.abs(Qh(na,Qa[mb]*Ga,mb<eb-1?Qa[mb+1]*Ga:na.length,Ga))}for(mb=Qa=0;mb<Za.length;mb+=3){eb=Za[mb]*Ga;var Sb=Za[mb+1]*Ga,Hb=Za[mb+2]*Ga;Qa+=Math.abs((na[eb]-na[Hb])*(na[Sb+1]-na[eb+1])-(na[eb]-na[Sb])*(na[Hb+1]-na[eb+1]))}return 0===$b&&
0===Qa?0:Math.abs((Qa-$b)/$b)};kc.flatten=function(na){for(var Qa=na[0][0].length,Ga={vertices:[],holes:[],dimensions:Qa},Za=0,mb=0;mb<na.length;mb++){for(var $b=0;$b<na[mb].length;$b++)for(var eb=0;eb<Qa;eb++)Ga.vertices.push(na[mb][$b][eb]);0<mb&&(Za+=na[mb-1].length,Ga.holes.push(Za))}return Ga};var uv=function(na){return na},cM=function(na){if(null==na)return uv;var Qa,Ga,Za=na.scale[0],mb=na.scale[1],$b=na.translate[0],eb=na.translate[1];return function(Sb,Hb){Hb||(Qa=Ga=0);Hb=2;var hd=Sb.length,
Ob=Array(hd);Ob[0]=(Qa+=Sb[0])*Za+$b;for(Ob[1]=(Ga+=Sb[1])*mb+eb;Hb<hd;)Ob[Hb]=Sb[Hb],++Hb;return Ob}},gM=function(na,Qa){return"GeometryCollection"===Qa.type?{type:"FeatureCollection",features:Qa.geometries.map(function(Ga){return mh(na,Ga)})}:mh(na,Qa)},dM=function(na,Qa){function Ga(hd){var Ob,fe=na.arcs[0>hd?~hd:hd],Ae=fe[0];return na.transform?(Ob=[0,0],fe.forEach(function(Pf){Ob[0]+=Pf[0];Ob[1]+=Pf[1]})):Ob=fe[fe.length-1],0>hd?[Ob,Ae]:[Ae,Ob]}function Za(hd,Ob){for(var fe in hd){var Ae=hd[fe];
delete Ob[Ae.start];delete Ae.start;delete Ae.end;Ae.forEach(function(Pf){mb[0>Pf?~Pf:Pf]=1});Sb.push(Ae)}}var mb={},$b={},eb={},Sb=[],Hb=-1;return Qa.forEach(function(hd,Ob){var fe,Ae=na.arcs[0>hd?~hd:hd];3>Ae.length&&!Ae[1][0]&&!Ae[1][1]&&(fe=Qa[++Hb],Qa[Hb]=hd,Qa[Ob]=fe)}),Qa.forEach(function(hd){var Ob=Ga(hd);var fe=Ob[0],Ae=Ob[1];(Ob=eb[fe])?(delete eb[Ob.end],Ob.push(hd),Ob.end=Ae,hd=$b[Ae])?(delete $b[hd.start],fe=hd===Ob?Ob:Ob.concat(hd),$b[fe.start=Ob.start]=eb[fe.end=hd.end]=fe):$b[Ob.start]=
eb[Ob.end]=Ob:(Ob=$b[Ae])?(delete $b[Ob.start],Ob.unshift(hd),Ob.start=fe,hd=eb[fe])?(delete eb[hd.end],fe=hd===Ob?Ob:hd.concat(Ob),$b[fe.start=hd.start]=eb[fe.end=Ob.end]=fe):$b[Ob.start]=eb[Ob.end]=Ob:(Ob=[hd],$b[Ob.start=fe]=eb[Ob.end=Ae]=Ob)}),Za(eb,$b),Za($b,eb),Qa.forEach(function(hd){mb[0>hd?~hd:hd]||Sb.push([hd])}),Sb},Gy=function(na,Qa){for(var Ga=0,Za=na.length;Ga<Za;){var mb=Ga+Za>>>1;na[mb]<Qa?Ga=mb+1:Za=mb}return Ga},WT=function(na){function Qa(Lf,Te){Lf.forEach(function(Qf){0>Qf&&(Qf=
~Qf);var gp=mb[Qf];gp?gp.push(Te):mb[Qf]=[Te]})}function Ga(Lf,Te){Lf.forEach(function(Qf){Qa(Qf,Te)})}function Za(Lf,Te){"GeometryCollection"===Lf.type?Lf.geometries.forEach(function(Qf){Za(Qf,Te)}):Lf.type in eb&&eb[Lf.type](Lf.arcs,Te)}var mb={},$b=na.map(function(){return[]}),eb={LineString:Qa,MultiLineString:Ga,Polygon:Ga,MultiPolygon:function(Lf,Te){Lf.forEach(function(Qf){Ga(Qf,Te)})}};na.forEach(Za);for(var Sb in mb){na=mb[Sb];for(var Hb=na.length,hd=0;hd<Hb;++hd)for(var Ob=hd+1;Ob<Hb;++Ob){var fe,
Ae=na[hd],Pf=na[Ob];(fe=$b[Ae])[Sb=Gy(fe,Pf)]!==Pf&&fe.splice(Sb,0,Pf);(fe=$b[Pf])[Sb=Gy(fe,Ae)]!==Ae&&fe.splice(Sb,0,Ae)}}return $b},eM=function(na,Qa){return na<Qa?-1:na>Qa?1:na>=Qa?0:NaN},fM=function(na){return 1===na.length&&(na=lj(na)),{left:function(Qa,Ga,Za,mb){null==Za&&(Za=0);for(null==mb&&(mb=Qa.length);Za<mb;){var $b=Za+mb>>>1;0>na(Qa[$b],Ga)?Za=$b+1:mb=$b}return Za},right:function(Qa,Ga,Za,mb){null==Za&&(Za=0);for(null==mb&&(mb=Qa.length);Za<mb;){var $b=Za+mb>>>1;0<na(Qa[$b],Ga)?mb=$b:
Za=$b+1}return Za}}};fM(eM);var YA=function(na,Qa){return Lj(Cj(Ti(na),na),Qa)},iM=function(na,Qa){if(8<na.length)return na.map(function(Za,mb){return mb});var Ga=na.map(function(Za){return Qa.map(function(mb){mb=T(gb(Za),gb(mb));return mb*mb})});return ph(na,Qa,Ga)};f.interpolate=function(na,Qa,Ga){void 0===Ga&&(Ga={});var Za=Ga.maxSegmentLength;void 0===Za&&(Za=10);Ga=Ga.string;void 0===Ga&&(Ga=!0);var mb=ta(na,Za);Za=ta(Qa,Za);var $b=Kb(mb,Za,Ga);return!Ga||"string"!=typeof na&&"string"!=typeof Qa?
$b:function(eb){return 1E-4>eb&&"string"==typeof na?na:1E-4>1-eb&&"string"==typeof Qa?Qa:$b(eb)}};f.separate=Wj;f.combine=function(na,Qa,Ga){void 0===Ga&&(Ga={});var Za=Ga.maxSegmentLength;void 0===Za&&(Za=10);var mb=Ga.string;void 0===mb&&(mb=!0);Ga=Ga.single;void 0===Ga&&(Ga=!1);var $b=Wj(Qa,na,{maxSegmentLength:Za,string:mb,single:Ga});return Ga?function(eb){return $b(1-eb)}:$b.map(function(eb){return function(Sb){return eb(1-Sb)}})};f.interpolateAll=function(na,Qa,Ga){void 0===Ga&&(Ga={});var Za=
Ga.maxSegmentLength;void 0===Za&&(Za=10);var mb=Ga.string;void 0===mb&&(mb=!0);Ga=Ga.single;if(void 0===Ga&&(Ga=!1),!Array.isArray(na)||!Array.isArray(Qa)||na.length!==Qa.length||!na.length)throw new TypeError("flubber.all() expects two arrays of equal length as arguments. Each element in both arrays should be an array of [x, y] points or an SVG path string (https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/d).");var $b,eb,Sb=function(hd){return ta(hd,Za)},Hb=na.map(Sb);Sb=Qa.map(Sb);return Ga?
(na.every(function(hd){return"string"==typeof hd})&&($b=na.slice(0)),Qa.every(function(hd){return"string"==typeof hd})&&(eb=Qa.slice(0))):($b=na.slice(0),eb=Qa.slice(0)),Fk(Hb,Sb,{string:mb,single:Ga,t0:$b,t1:eb,match:!1})};f.splitPathString=function(na){return zb((new aM(na)).abs())};f.toPathString=va;f.fromCircle=ck;f.toCircle=function(na,Qa,Ga,Za,mb){var $b=ck(Qa,Ga,Za,na,mb);return function(eb){return $b(1-eb)}};f.fromRect=Gk;f.toRect=function(na,Qa,Ga,Za,mb,$b){var eb=Gk(Qa,Ga,Za,mb,na,$b);return function(Sb){return eb(1-
Sb)}};Object.defineProperty(f,"__esModule",{value:!0})});var Fka={},Gka="function"===typeof Float32Array,Hka=Fka=function(f,k,n,b){if(!(0<=f&&1>=f&&0<=n&&1>=n))throw Error("bezier x values must be in [0, 1] range");if(f===k&&n===b)return PP;for(var e=Gka?new Float32Array(11):Array(11),m=0;11>m;++m)e[m]=Xz(.1*m,f,n);return function(a){if(0===a)return 0;if(1===a)return 1;for(var g=0,l=1;10!==l&&e[l]<=a;++l)g+=.1;--l;l=g+(a-e[l])/(e[l+1]-e[l])*.1;var r=3*(1-3*n+3*f)*l*l+2*(3*n-6*f)*l+3*f;if(.001<=r){for(g=
0;4>g;++g){r=3*(1-3*n+3*f)*l*l+2*(3*n-6*f)*l+3*f;if(0===r)break;var v=Xz(l,f,n)-a;l-=v/r}a=l}else if(0===r)a=l;else{l=g;g+=.1;var y=0;do v=l+(g-l)/2,r=Xz(v,f,n)-a,0<r?g=v:l=v;while(1E-7<Math.abs(r)&&10>++y);a=v}return Xz(a,k,b)}},yc="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global;!function(){var f={},k={};!function(n,b){function e(){(this||yc)._delay=0;(this||yc)._endDelay=0;(this||yc)._fill="none";(this||yc)._iterationStart=0;(this||yc)._iterations=1;(this||yc)._duration=
0;(this||yc)._playbackRate=1;(this||yc)._direction="normal";(this||yc)._easing="linear";(this||yc)._easingFunction=F}function m(){return n.isDeprecated("Invalid timing inputs","2016-03-02","TypeError exceptions will be thrown instead.",!0)}function a(U,pa,fa){var oa=new e;return pa&&(oa.fill="both",oa.duration="auto"),"number"!=typeof U||isNaN(U)?void 0!==U&&Object.getOwnPropertyNames(U).forEach(function(gb){"auto"==U[gb]||("number"==typeof oa[gb]||"duration"==gb)&&("number"!=typeof U[gb]||isNaN(U[gb]))||
"fill"==gb&&-1==A.indexOf(U[gb])||"direction"==gb&&-1==E.indexOf(U[gb])||"playbackRate"==gb&&1!==U[gb]&&n.isDeprecated("AnimationEffectTiming.playbackRate","2014-11-28","Use Animation.playbackRate instead.")||(oa[gb]=U[gb])}):oa.duration=U,oa}function g(U,pa,fa,oa){return 0>U||1<U||0>fa||1<fa?F:function(gb){if(0>=gb){var zb=0;return 0<U?zb=pa/U:!pa&&0<fa&&(zb=oa/fa),zb*gb}if(1<=gb)return zb=0,1>fa?zb=(oa-1)/(fa-1):1==fa&&1>U&&(zb=(pa-1)/(U-1)),1+zb*(gb-1);zb=0;for(var va=1;zb<va;){var ma=(zb+va)/
2,ta=3*U*(1-ma)*(1-ma)*ma+3*fa*(1-ma)*ma*ma+ma*ma*ma;if(1E-5>Math.abs(gb-ta))break;ta<gb?zb=ma:va=ma}return 3*pa*(1-ma)*(1-ma)*ma+3*oa*(1-ma)*ma*ma+ma*ma*ma}}function l(U,pa){return function(fa){if(1<=fa)return 1;var oa=1/U;return(fa+=pa*oa)-fa%oa}}function r(U){W||(W=document.createElement("div").style);W.animationTimingFunction="";W.animationTimingFunction=U;var pa=W.animationTimingFunction;if(""==pa&&m())throw new TypeError(U+" is not a valid value for easing");return pa}function v(U){if("linear"==
U)return F;var pa=X.exec(U);return pa?g.apply(this||yc,pa.slice(1).map(Number)):(pa=ea.exec(U))?l(Number(pa[1]),M):(pa=Aa.exec(U))?l(Number(pa[1]),{start:H,middle:I,end:M}[pa[2]]):N[U]||F}function y(U,pa,fa){if(null==pa)return Ma;var oa=fa.delay+U+fa.endDelay;return pa<Math.min(fa.delay,oa)?K:pa>=Math.min(fa.delay+U,oa)?aa:T}var A=["backwards","forwards","both","none"],E=["reverse","alternate","alternate-reverse"],F=function(U){return U};e.prototype={_setMember:function(U,pa){(this||yc)["_"+U]=pa;
(this||yc)._effect&&((this||yc)._effect._timingInput[U]=pa,(this||yc)._effect._timing=n.normalizeTimingInput((this||yc)._effect._timingInput),(this||yc)._effect.activeDuration=n.calculateActiveDuration((this||yc)._effect._timing),(this||yc)._effect._animation&&(this||yc)._effect._animation._rebuildUnderlyingAnimation())},get playbackRate(){return(this||yc)._playbackRate},set delay(U){this._setMember("delay",U)},get delay(){return(this||yc)._delay},set endDelay(U){this._setMember("endDelay",U)},get endDelay(){return(this||
yc)._endDelay},set fill(U){this._setMember("fill",U)},get fill(){return(this||yc)._fill},set iterationStart(U){if((isNaN(U)||0>U)&&m())throw new TypeError("iterationStart must be a non-negative number, received: "+U);this._setMember("iterationStart",U)},get iterationStart(){return(this||yc)._iterationStart},set duration(U){if("auto"!=U&&(isNaN(U)||0>U)&&m())throw new TypeError("duration must be non-negative or auto, received: "+U);this._setMember("duration",U)},get duration(){return(this||yc)._duration},
set direction(U){this._setMember("direction",U)},get direction(){return(this||yc)._direction},set easing(U){(this||yc)._easingFunction=v(r(U));this._setMember("easing",U)},get easing(){return(this||yc)._easing},set iterations(U){if((isNaN(U)||0>U)&&m())throw new TypeError("iterations must be non-negative, received: "+U);this._setMember("iterations",U)},get iterations(){return(this||yc)._iterations}};var H=1,I=.5,M=0,N={ease:g(.25,.1,.25,1),"ease-in":g(.42,0,1,1),"ease-out":g(0,0,.58,1),"ease-in-out":g(.42,
0,.58,1),"step-start":l(1,H),"step-middle":l(1,I),"step-end":l(1,M)},W=null,X=/cubic-bezier\(\s*(-?\d+\.?\d*|-?\.\d+)\s*,\s*(-?\d+\.?\d*|-?\.\d+)\s*,\s*(-?\d+\.?\d*|-?\.\d+)\s*,\s*(-?\d+\.?\d*|-?\.\d+)\s*\)/,ea=/steps\(\s*(\d+)\s*\)/,Aa=/steps\(\s*(\d+)\s*,\s*(start|middle|end)\s*\)/,Ma=0,K=1,aa=2,T=3;n.cloneTimingInput=function(U){if("number"==typeof U)return U;var pa={},fa;for(fa in U)pa[fa]=U[fa];return pa};n.makeTiming=a;n.numericTimingToObject=function(U){return"number"==typeof U&&(U=isNaN(U)?
{duration:0}:{duration:U}),U};n.normalizeTimingInput=function(U,pa){return U=n.numericTimingToObject(U),a(U,pa)};n.calculateActiveDuration=function(U){return Math.abs((0===U.duration||0===U.iterations?0:U.duration*U.iterations)/U.playbackRate)};n.calculateIterationProgress=function(U,pa,fa){var oa=y(U,pa,fa);a:{var gb=fa.fill;switch(oa){case K:U="backwards"==gb||"both"==gb?0:null;break a;case T:U=pa-fa.delay;break a;case aa:U="forwards"==gb||"both"==gb?U:null;break a;case Ma:U=null;break a}U=void 0}if(null===
U)return null;pa=fa.duration;gb=fa.iterationStart;pa=(0===pa?oa!==K&&(gb+=fa.iterations):gb+=U/pa,gb);gb=pa===1/0?fa.iterationStart%1:pa%1;U=(0!==gb||oa!==aa||0===fa.iterations||0===U&&0!==fa.duration||(gb=1),gb);gb=oa===aa&&fa.iterations===1/0?1/0:1===U?Math.floor(pa)-1:Math.floor(pa);pa=oa=fa.direction;"normal"!==oa&&"reverse"!==oa&&("alternate-reverse"===oa&&(gb+=1),pa="normal",gb!==1/0&&0!=gb%2&&(pa="reverse"));return fa._easingFunction("normal"===pa?U:1-U)};n.calculatePhase=y;n.normalizeEasing=
r;n.parseEasingFunction=v}(f);(function(n,b){function e(l){var r=[],v;for(v in l)if(!(v in["easing","offset","composite"])){var y=l[v];Array.isArray(y)||(y=[y]);for(var A,E=y.length,F=0;F<E;F++)A={},A.offset="offset"in l?l.offset:1==E?1:F/(E-1),"easing"in l&&(A.easing=l.easing),"composite"in l&&(A.composite=l.composite),A[v]=y[F],r.push(A)}return r.sort(function(H,I){return H.offset-I.offset}),r}var m={background:"backgroundImage backgroundPosition backgroundSize backgroundRepeat backgroundAttachment backgroundOrigin backgroundClip backgroundColor".split(" "),
border:"borderTopColor borderTopStyle borderTopWidth borderRightColor borderRightStyle borderRightWidth borderBottomColor borderBottomStyle borderBottomWidth borderLeftColor borderLeftStyle borderLeftWidth".split(" "),borderBottom:["borderBottomWidth","borderBottomStyle","borderBottomColor"],borderColor:["borderTopColor","borderRightColor","borderBottomColor","borderLeftColor"],borderLeft:["borderLeftWidth","borderLeftStyle","borderLeftColor"],borderRadius:["borderTopLeftRadius","borderTopRightRadius",
"borderBottomRightRadius","borderBottomLeftRadius"],borderRight:["borderRightWidth","borderRightStyle","borderRightColor"],borderTop:["borderTopWidth","borderTopStyle","borderTopColor"],borderWidth:["borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth"],flex:["flexGrow","flexShrink","flexBasis"],font:"fontFamily fontSize fontStyle fontVariant fontWeight lineHeight".split(" "),margin:["marginTop","marginRight","marginBottom","marginLeft"],outline:["outlineColor","outlineStyle",
"outlineWidth"],padding:["paddingTop","paddingRight","paddingBottom","paddingLeft"]},a=document.createElementNS("http://www.w3.org/1999/xhtml","div");b={thin:"1px",medium:"3px",thick:"5px"};var g={borderBottomWidth:b,borderLeftWidth:b,borderRightWidth:b,borderTopWidth:b,fontSize:{"xx-small":"60%","x-small":"75%",small:"89%",medium:"100%",large:"120%","x-large":"150%","xx-large":"200%"},fontWeight:{normal:"400",bold:"700"},outlineWidth:b,textShadow:{none:"0px 0px 0px transparent"},boxShadow:{none:"0px 0px 0px 0px transparent"}};
n.convertToArrayForm=e;n.normalizeKeyframes=function(l){function r(){var F=v.length;null==v[F-1].offset&&(v[F-1].offset=1);1<F&&null==v[0].offset&&(v[0].offset=0);for(var H=0,I=v[0].offset,M=1;M<F;M++){var N=v[M].offset;if(null!=N){for(var W=1;W<M-H;W++)v[H+W].offset=I+(N-I)*W/(M-H);H=M;I=N}}}if(null==l)return[];window.Symbol&&Symbol.iterator&&Array.prototype.from&&l[Symbol.iterator]&&(l=Array.from(l));Array.isArray(l)||(l=e(l));var v=l.map(function(F){var H={},I;for(I in F){var M=F[I];if("offset"==
I){if(null!=M){if(M=Number(M),!isFinite(M))throw new TypeError("Keyframe offsets must be numbers.");if(0>M||1<M)throw new TypeError("Keyframe offsets must be between 0 and 1.");}}else if("composite"==I){if("add"==M||"accumulate"==M)throw{type:DOMException.NOT_SUPPORTED_ERR,name:"NotSupportedError",message:"add compositing is not supported"};if("replace"!=M)throw new TypeError("Invalid composite mode "+M+".");}else M="easing"==I?n.normalizeEasing(M):""+M;var N=void 0,W=I,X=M;M=H;var ea=W;if("display"!==
ea&&0!==ea.lastIndexOf("animation",0)&&0!==ea.lastIndexOf("transition",0))if(ea=m[W])for(N in a.style[W]=X,ea)W=ea[N],X=a.style[W],M[W]=W in g?g[W][X]||X:X;else M[W]=W in g?g[W][X]||X:X}return void 0==H.offset&&(H.offset=null),void 0==H.easing&&(H.easing="linear"),H});l=!0;for(var y=-1/0,A=0;A<v.length;A++){var E=v[A].offset;if(null!=E){if(E<y)throw new TypeError("Keyframes are not loosely sorted by offset. Sort or specify offsets.");y=E}else l=!1}return v=v.filter(function(F){return 0<=F.offset&&
1>=F.offset}),l||r(),v}})(f);(function(n){var b={};n.isDeprecated=function(e,m,a,g){g=g?"are":"is";var l=new Date;m=new Date(m);return m.setMonth(m.getMonth()+3),!(l<m&&(e in b||console.warn("Web Animations: "+e+" "+g+" deprecated and will stop working on "+m.toDateString()+". "+a),b[e]=!0,1))};n.deprecated=function(e,m,a,g){var l=g?"are":"is";if(n.isDeprecated(e,m,a,g))throw Error(e+" "+l+" no longer supported. "+a);}})(f);(function(){if(document.documentElement.animate){var n=document.documentElement.animate([],
0),b=!0;if(n&&(b=!1,"play currentTime pause reverse playbackRate cancel finish startTime playState".split(" ").forEach(function(e){void 0===n[e]&&(b=!0)})),!b)return}!function(e,m,a){function g(r){for(var v={},y=0;y<r.length;y++)for(var A in r[y])if("offset"!=A&&"easing"!=A&&"composite"!=A){var E={offset:r[y].offset,easing:r[y].easing,value:r[y][A]};v[A]=v[A]||[];v[A].push(E)}for(var F in v)if(r=v[F],0!=r[0].offset||1!=r[r.length-1].offset)throw{type:DOMException.NOT_SUPPORTED_ERR,name:"NotSupportedError",
message:"Partial keyframes are not supported"};return v}function l(r){var v=[],y;for(y in r)for(var A=r[y],E=0;E<A.length-1;E++){var F=E,H=E+1,I=A[F].offset,M=A[H].offset,N=I,W=M;0==E&&(N=-1/0,0==M&&(H=F));E==A.length-2&&(W=1/0,1==I&&(F=H));v.push({applyFrom:N,applyTo:W,startOffset:A[F].offset,endOffset:A[H].offset,easingFunction:e.parseEasingFunction(A[F].easing),property:y,interpolation:m.propertyInterpolation(y,A[F].value,A[H].value)})}return v.sort(function(X,ea){return X.startOffset-ea.startOffset}),
v}m.convertEffectInput=function(r){r=e.normalizeKeyframes(r);var v=g(r),y=l(v);return function(A,E){if(null!=E)y.filter(function(H){return E>=H.applyFrom&&E<H.applyTo}).forEach(function(H){var I=E-H.startOffset,M=H.endOffset-H.startOffset;I=0==M?0:H.easingFunction(I/M);m.apply(A,H.property,H.interpolation(I))});else for(var F in v)"offset"!=F&&"easing"!=F&&"composite"!=F&&m.clear(A,F)}}}(f,k);(function(e,m,a){function g(v){return v.replace(/-(.)/g,function(y,A){return A.toUpperCase()})}var l={};m.addPropertiesHandler=
function(v,y,A){for(var E=0;E<A.length;E++){var F=v,H=y,I=g(A[E]);l[I]=l[I]||[];l[I].push([F,H])}};var r={backgroundColor:"transparent",backgroundPosition:"0% 0%",borderBottomColor:"currentColor",borderBottomLeftRadius:"0px",borderBottomRightRadius:"0px",borderBottomWidth:"3px",borderLeftColor:"currentColor",borderLeftWidth:"3px",borderRightColor:"currentColor",borderRightWidth:"3px",borderSpacing:"2px",borderTopColor:"currentColor",borderTopLeftRadius:"0px",borderTopRightRadius:"0px",borderTopWidth:"3px",
bottom:"auto",clip:"rect(0px, 0px, 0px, 0px)",color:"black",fontSize:"100%",fontWeight:"400",height:"auto",left:"auto",letterSpacing:"normal",lineHeight:"120%",marginBottom:"0px",marginLeft:"0px",marginRight:"0px",marginTop:"0px",maxHeight:"none",maxWidth:"none",minHeight:"0px",minWidth:"0px",opacity:"1.0",outlineColor:"invert",outlineOffset:"0px",outlineWidth:"3px",paddingBottom:"0px",paddingLeft:"0px",paddingRight:"0px",paddingTop:"0px",right:"auto",strokeDasharray:"none",strokeDashoffset:"0px",
textIndent:"0px",textShadow:"0px 0px 0px transparent",top:"auto",transform:"",verticalAlign:"0px",visibility:"visible",width:"auto",wordSpacing:"normal",zIndex:"auto"};m.propertyInterpolation=function(v,y,A){var E=v;/-/.test(v)&&!e.isDeprecated("Hyphenated property names","2016-03-22","Use camelCase instead.",!0)&&(E=g(v));"initial"!=y&&"initial"!=A||("initial"==y&&(y=r[E]),"initial"==A&&(A=r[E]));v=y==A?[]:l[E];for(E=0;v&&E<v.length;E++){var F=v[E][0](y),H=v[E][0](A);if(void 0!==F&&void 0!==H&&(F=
v[E][1](F,H))){var I=m.Interpolation.apply(null,F);return function(M){return 0==M?y:1==M?A:I(M)}}}return m.Interpolation(!1,!0,function(M){return M?A:y})}})(f,k);(function(e,m,a){function g(l){var r=e.calculateActiveDuration(l),v=function(y){return e.calculateIterationProgress(r,y,l)};return v._totalDuration=l.delay+r+l.endDelay,v}m.KeyframeEffect=function(l,r,v,y){var A,E=g(e.normalizeTimingInput(v)),F=m.convertEffectInput(r);r=function(){F(l,A)};return r._update=function(H){return null!==(A=E(H))},
r._clear=function(){F(l,null)},r._hasSameTarget=function(H){return l===H},r._target=l,r._totalDuration=E._totalDuration,r._id=y,r}})(f,k);(function(e,m){function a(F,H,I){I.enumerable=!0;I.configurable=!0;Object.defineProperty(F,H,I)}function g(F){(this||yc)._element=F;(this||yc)._surrogateStyle=document.createElementNS("http://www.w3.org/1999/xhtml","div").style;(this||yc)._style=F.style;(this||yc)._length=0;(this||yc)._isAnimatedProperty={};var H=window;F=!(!F.namespaceURI||-1==F.namespaceURI.indexOf("/svg"))&&
(r in H||(H[r]=/Trident|MSIE|IEMobile|Edge|Android 4/i.test(H.navigator.userAgent)),H[r]);(this||yc)._updateSvgTransformAttr=F;(this||yc)._savedTransformAttr=null;for(F=0;F<(this||yc)._style.length;F++)H=(this||yc)._style[F],(this||yc)._surrogateStyle[H]=(this||yc)._style[H];this._updateIndices()}function l(F){if(!F._webAnimationsPatchedStyle){var H=new g(F);try{a(F,"style",{get:function(){return H}})}catch(I){F.style._set=function(M,N){F.style[M]=N},F.style._clear=function(M){F.style[M]=""}}F._webAnimationsPatchedStyle=
F.style}}var r="_webAnimationsUpdateSvgTransformAttr";m={cssText:1,length:1,parentRule:1};var v={getPropertyCSSValue:1,getPropertyPriority:1,getPropertyValue:1,item:1,removeProperty:1,setProperty:1},y={removeProperty:1,setProperty:1};g.prototype={get cssText(){return(this||yc)._surrogateStyle.cssText},set cssText(F){for(var H={},I=0;I<(this||yc)._surrogateStyle.length;I++)H[(this||yc)._surrogateStyle[I]]=!0;(this||yc)._surrogateStyle.cssText=F;this._updateIndices();for(I=0;I<(this||yc)._surrogateStyle.length;I++)H[(this||
yc)._surrogateStyle[I]]=!0;for(var M in H)(this||yc)._isAnimatedProperty[M]||(this||yc)._style.setProperty(M,(this||yc)._surrogateStyle.getPropertyValue(M))},get length(){return(this||yc)._surrogateStyle.length},get parentRule(){return(this||yc)._style.parentRule},_updateIndices:function(){for(;(this||yc)._length<(this||yc)._surrogateStyle.length;)Object.defineProperty(this||yc,(this||yc)._length,{configurable:!0,enumerable:!1,get:function(F){return function(){return(this||yc)._surrogateStyle[F]}}((this||
yc)._length)}),(this||yc)._length++;for(;(this||yc)._length>(this||yc)._surrogateStyle.length;)(this||yc)._length--,Object.defineProperty(this||yc,(this||yc)._length,{configurable:!0,enumerable:!1,value:void 0})},_set:function(F,H){(this||yc)._style[F]=H;(this||yc)._isAnimatedProperty[F]=!0;(this||yc)._updateSvgTransformAttr&&"transform"==e.unprefixedPropertyName(F)&&(null==(this||yc)._savedTransformAttr&&((this||yc)._savedTransformAttr=(this||yc)._element.getAttribute("transform")),(this||yc)._element.setAttribute("transform",
e.transformToSvgMatrix(H)))},_clear:function(F){(this||yc)._style[F]=(this||yc)._surrogateStyle[F];(this||yc)._updateSvgTransformAttr&&"transform"==e.unprefixedPropertyName(F)&&((this||yc)._savedTransformAttr?(this||yc)._element.setAttribute("transform",(this||yc)._savedTransformAttr):(this||yc)._element.removeAttribute("transform"),(this||yc)._savedTransformAttr=null);delete (this||yc)._isAnimatedProperty[F]}};for(var A in v)g.prototype[A]=function(F,H){return function(){var I=(this||yc)._surrogateStyle[F].apply((this||
yc)._surrogateStyle,arguments);return H&&((this||yc)._isAnimatedProperty[arguments[0]]||(this||yc)._style[F].apply((this||yc)._style,arguments),this._updateIndices()),I}}(A,A in y);for(var E in document.documentElement.style)E in m||E in v||function(F){a(g.prototype,F,{get:function(){return(this||yc)._surrogateStyle[F]},set:function(H){(this||yc)._surrogateStyle[F]=H;this._updateIndices();(this||yc)._isAnimatedProperty[F]||((this||yc)._style[F]=H)}})}(E);e.apply=function(F,H,I){l(F);F.style._set(e.propertyName(H),
I)};e.clear=function(F,H){F._webAnimationsPatchedStyle&&F.style._clear(e.propertyName(H))}})(k);(function(e){window.Element.prototype.animate=function(m,a){var g="";return a&&a.id&&(g=a.id),e.timeline._play(e.KeyframeEffect(this||yc,m,a,g))}})(k);(function(e,m){function a(g,l,r){if("number"==typeof g&&"number"==typeof l)return g*(1-r)+l*r;if("boolean"==typeof g&&"boolean"==typeof l)return.5>r?g:l;if(g.length==l.length){for(var v=[],y=0;y<g.length;y++)v.push(a(g[y],l[y],r));return v}throw"Mismatched interpolation arguments "+
g+":"+l;}e.Interpolation=function(g,l,r){return function(v){return r(a(g,l,v))}}})(k);(function(e,m){m=function(){function a(g,l){for(var r=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],v=0;4>v;v++)for(var y=0;4>y;y++)for(var A=0;4>A;A++)r[v][y]+=l[v][A]*g[A][y];return r}return function(g,l,r,v,y){for(var A=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],E=0;4>E;E++)A[E][3]=y[E];for(E=0;3>E;E++)for(y=0;3>y;y++)A[3][E]+=g[y]*A[y][E];g=v[0];E=v[1];y=v[2];v=v[3];var F=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]];
F[0][0]=1-2*(E*E+y*y);F[0][1]=2*(g*E-y*v);F[0][2]=2*(g*y+E*v);F[1][0]=2*(g*E+y*v);F[1][1]=1-2*(g*g+y*y);F[1][2]=2*(E*y-g*v);F[2][0]=2*(g*y-E*v);F[2][1]=2*(E*y+g*v);F[2][2]=1-2*(g*g+E*E);A=a(A,F);v=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]];r[2]&&(v[2][1]=r[2],A=a(A,v));r[1]&&(v[2][1]=0,v[2][0]=r[0],A=a(A,v));r[0]&&(v[2][0]=0,v[1][0]=r[0],A=a(A,v));for(E=0;3>E;E++)for(y=0;3>y;y++)A[E][y]*=l[E];return 0==A[0][2]&&0==A[0][3]&&0==A[1][2]&&0==A[1][3]&&0==A[2][0]&&0==A[2][1]&&1==A[2][2]&&0==A[2][3]&&0==
A[3][2]&&1==A[3][3]?[A[0][0],A[0][1],A[1][0],A[1][1],A[3][0],A[3][1]]:A[0].concat(A[1],A[2],A[3])}}();e.composeMatrix=m;e.quat=function(a,g,l){var r=e.dot(a,g);r=Math.max(Math.min(r,1),-1);var v=[];if(1===r)v=a;else for(var y=Math.acos(r),A=1*Math.sin(l*y)/Math.sqrt(1-r*r),E=0;4>E;E++)v.push(a[E]*(Math.cos(l*y)-r*A)+g[E]*A);return v}})(k);(function(e,m,a){e.sequenceNumber=0;var g=function(l,r,v){(this||yc).target=l;(this||yc).currentTime=r;(this||yc).timelineTime=v;(this||yc).type="finish";(this||
yc).bubbles=!1;(this||yc).cancelable=!1;(this||yc).currentTarget=l;(this||yc).defaultPrevented=!1;(this||yc).eventPhase=Event.AT_TARGET;(this||yc).timeStamp=Date.now()};m.Animation=function(l){(this||yc).id="";l&&l._id&&((this||yc).id=l._id);(this||yc)._sequenceNumber=e.sequenceNumber++;(this||yc)._currentTime=0;(this||yc)._startTime=null;(this||yc)._paused=!1;(this||yc)._playbackRate=1;(this||yc)._inTimeline=!0;(this||yc)._finishedFlag=!0;(this||yc).onfinish=null;(this||yc)._finishHandlers=[];(this||
yc)._effect=l;(this||yc)._inEffect=(this||yc)._effect._update(0);(this||yc)._idle=!0;(this||yc)._currentTimePending=!1};m.Animation.prototype={_ensureAlive:function(){0>(this||yc).playbackRate&&0===(this||yc).currentTime?(this||yc)._inEffect=(this||yc)._effect._update(-1):(this||yc)._inEffect=(this||yc)._effect._update((this||yc).currentTime);(this||yc)._inTimeline||!(this||yc)._inEffect&&(this||yc)._finishedFlag||((this||yc)._inTimeline=!0,m.timeline._animations.push(this||yc))},_tickCurrentTime:function(l,
r){l!=(this||yc)._currentTime&&((this||yc)._currentTime=l,(this||yc)._isFinished&&!r&&((this||yc)._currentTime=0<(this||yc)._playbackRate?(this||yc)._totalDuration:0),this._ensureAlive())},get currentTime(){return(this||yc)._idle||(this||yc)._currentTimePending?null:(this||yc)._currentTime},set currentTime(l){l=+l;isNaN(l)||(m.restart(),(this||yc)._paused||null==(this||yc)._startTime||((this||yc)._startTime=(this||yc)._timeline.currentTime-l/(this||yc)._playbackRate),(this||yc)._currentTimePending=
!1,(this||yc)._currentTime!=l&&((this||yc)._idle&&((this||yc)._idle=!1,(this||yc)._paused=!0),this._tickCurrentTime(l,!0),m.applyDirtiedAnimation(this||yc)))},get startTime(){return(this||yc)._startTime},set startTime(l){l=+l;isNaN(l)||(this||yc)._paused||(this||yc)._idle||((this||yc)._startTime=l,this._tickCurrentTime(((this||yc)._timeline.currentTime-(this||yc)._startTime)*(this||yc).playbackRate),m.applyDirtiedAnimation(this||yc))},get playbackRate(){return(this||yc)._playbackRate},set playbackRate(l){if(l!=
(this||yc)._playbackRate){var r=(this||yc).currentTime;(this||yc)._playbackRate=l;(this||yc)._startTime=null;"paused"!=(this||yc).playState&&"idle"!=(this||yc).playState&&((this||yc)._finishedFlag=!1,(this||yc)._idle=!1,this._ensureAlive(),m.applyDirtiedAnimation(this||yc));null!=r&&((this||yc).currentTime=r)}},get _isFinished(){return!(this||yc)._idle&&(0<(this||yc)._playbackRate&&(this||yc)._currentTime>=(this||yc)._totalDuration||0>(this||yc)._playbackRate&&0>=(this||yc)._currentTime)},get _totalDuration(){return(this||
yc)._effect._totalDuration},get playState(){return(this||yc)._idle?"idle":null==(this||yc)._startTime&&!(this||yc)._paused&&0!=(this||yc).playbackRate||(this||yc)._currentTimePending?"pending":(this||yc)._paused?"paused":(this||yc)._isFinished?"finished":"running"},_rewind:function(){if(0<=(this||yc)._playbackRate)(this||yc)._currentTime=0;else{if(!((this||yc)._totalDuration<1/0))throw new DOMException("Unable to rewind negative playback rate animation with infinite duration","InvalidStateError");
(this||yc)._currentTime=(this||yc)._totalDuration}},play:function(){(this||yc)._paused=!1;((this||yc)._isFinished||(this||yc)._idle)&&(this._rewind(),(this||yc)._startTime=null);(this||yc)._finishedFlag=!1;(this||yc)._idle=!1;this._ensureAlive();m.applyDirtiedAnimation(this||yc)},pause:function(){(this||yc)._isFinished||(this||yc)._paused||(this||yc)._idle?(this||yc)._idle&&(this._rewind(),(this||yc)._idle=!1):(this||yc)._currentTimePending=!0;(this||yc)._startTime=null;(this||yc)._paused=!0},finish:function(){(this||
yc)._idle||((this||yc).currentTime=0<(this||yc)._playbackRate?(this||yc)._totalDuration:0,(this||yc)._startTime=(this||yc)._totalDuration-(this||yc).currentTime,(this||yc)._currentTimePending=!1,m.applyDirtiedAnimation(this||yc))},cancel:function(){(this||yc)._inEffect&&((this||yc)._inEffect=!1,(this||yc)._idle=!0,(this||yc)._paused=!1,(this||yc)._finishedFlag=!0,(this||yc)._currentTime=0,(this||yc)._startTime=null,(this||yc)._effect._update(null),m.applyDirtiedAnimation(this||yc))},reverse:function(){(this||
yc).playbackRate*=-1;this.play()},addEventListener:function(l,r){"function"==typeof r&&"finish"==l&&(this||yc)._finishHandlers.push(r)},removeEventListener:function(l,r){"finish"==l&&(l=(this||yc)._finishHandlers.indexOf(r),0<=l&&(this||yc)._finishHandlers.splice(l,1))},_fireEvents:function(l){if((this||yc)._isFinished){if(!(this||yc)._finishedFlag){var r=new g(this||yc,(this||yc)._currentTime,l),v=(this||yc)._finishHandlers.concat((this||yc).onfinish?[(this||yc).onfinish]:[]);setTimeout(function(){v.forEach(function(y){y.call(r.target,
r)})},0);(this||yc)._finishedFlag=!0}}else(this||yc)._finishedFlag=!1},_tick:function(l,r){(this||yc)._idle||(this||yc)._paused||(null==(this||yc)._startTime?r&&((this||yc).startTime=l-(this||yc)._currentTime/(this||yc).playbackRate):(this||yc)._isFinished||this._tickCurrentTime((l-(this||yc)._startTime)*(this||yc).playbackRate));r&&((this||yc)._currentTimePending=!1,this._fireEvents(l))},get _needsTick(){return(this||yc).playState in{pending:1,running:1}||!(this||yc)._finishedFlag},_targetAnimations:function(){var l=
(this||yc)._effect._target;return l._activeAnimations||(l._activeAnimations=[]),l._activeAnimations},_markTarget:function(){var l=this._targetAnimations();-1===l.indexOf(this||yc)&&l.push(this||yc)},_unmarkTarget:function(){var l=this._targetAnimations(),r=l.indexOf(this||yc);-1!==r&&l.splice(r,1)}}})(f,k);(function(e,m,a){function g(X){var ea=E;E=[];X<W.currentTime&&(X=W.currentTime);W._animations.sort(l);W._animations=y(X,!0,W._animations)[0];ea.forEach(function(Aa){Aa[1](X)});v()}function l(X,
ea){return X._sequenceNumber-ea._sequenceNumber}function r(){(this||yc)._animations=[];(this||yc).currentTime=window.performance&&performance.now?performance.now():0}function v(){M.forEach(function(X){X()});M.length=0}function y(X,ea,Aa){N=!0;I=!1;m.timeline.currentTime=X;H=!1;var Ma=[],K=[],aa=[],T=[];return Aa.forEach(function(U){U._tick(X,ea);U._inEffect?(K.push(U._effect),U._markTarget()):(Ma.push(U._effect),U._unmarkTarget());U._needsTick&&(H=!0);var pa=U._inEffect||U._needsTick;(U._inTimeline=
pa)?aa.push(U):T.push(U)}),M.push.apply(M,Ma),M.push.apply(M,K),H&&requestAnimationFrame(function(){}),N=!1,[aa,T]}var A=window.requestAnimationFrame,E=[],F=0;window.requestAnimationFrame=function(X){var ea=F++;return 0==E.length&&A(g),E.push([ea,X]),ea};window.cancelAnimationFrame=function(X){E.forEach(function(ea){ea[0]==X&&(ea[1]=function(){})})};r.prototype={_play:function(X){X._timing=e.normalizeTimingInput(X.timing);X=new m.Animation(X);return X._idle=!1,X._timeline=this||yc,(this||yc)._animations.push(X),
m.restart(),m.applyDirtiedAnimation(X),X}};var H=!1,I=!1;m.restart=function(){return H||(H=!0,requestAnimationFrame(function(){}),I=!0),I};m.applyDirtiedAnimation=function(X){N||(X._markTarget(),X=X._targetAnimations(),X.sort(l),y(m.timeline.currentTime,!1,X.slice())[1].forEach(function(ea){ea=W._animations.indexOf(ea);-1!==ea&&W._animations.splice(ea,1)}),v())};var M=[],N=!1,W=new r;m.timeline=W})(f,k);(function(e,m){function a(A,E){for(var F=0,H=0;H<A.length;H++)F+=A[H]*E[H];return F}function g(A,
E){return[A[0]*E[0]+A[4]*E[1]+A[8]*E[2]+A[12]*E[3],A[1]*E[0]+A[5]*E[1]+A[9]*E[2]+A[13]*E[3],A[2]*E[0]+A[6]*E[1]+A[10]*E[2]+A[14]*E[3],A[3]*E[0]+A[7]*E[1]+A[11]*E[2]+A[15]*E[3],A[0]*E[4]+A[4]*E[5]+A[8]*E[6]+A[12]*E[7],A[1]*E[4]+A[5]*E[5]+A[9]*E[6]+A[13]*E[7],A[2]*E[4]+A[6]*E[5]+A[10]*E[6]+A[14]*E[7],A[3]*E[4]+A[7]*E[5]+A[11]*E[6]+A[15]*E[7],A[0]*E[8]+A[4]*E[9]+A[8]*E[10]+A[12]*E[11],A[1]*E[8]+A[5]*E[9]+A[9]*E[10]+A[13]*E[11],A[2]*E[8]+A[6]*E[9]+A[10]*E[10]+A[14]*E[11],A[3]*E[8]+A[7]*E[9]+A[11]*E[10]+
A[15]*E[11],A[0]*E[12]+A[4]*E[13]+A[8]*E[14]+A[12]*E[15],A[1]*E[12]+A[5]*E[13]+A[9]*E[14]+A[13]*E[15],A[2]*E[12]+A[6]*E[13]+A[10]*E[14]+A[14]*E[15],A[3]*E[12]+A[7]*E[13]+A[11]*E[14]+A[15]*E[15]]}function l(A){return 2*((A.deg||0)/360+(A.grad||0)/400+(A.turn||0))*Math.PI+(A.rad||0)}function r(A){switch(A.t){case "rotatex":return A=l(A.d[0]),[1,0,0,0,0,Math.cos(A),Math.sin(A),0,0,-Math.sin(A),Math.cos(A),0,0,0,0,1];case "rotatey":return A=l(A.d[0]),[Math.cos(A),0,-Math.sin(A),0,0,1,0,0,Math.sin(A),
0,Math.cos(A),0,0,0,0,1];case "rotate":case "rotatez":return A=l(A.d[0]),[Math.cos(A),Math.sin(A),0,0,-Math.sin(A),Math.cos(A),0,0,0,0,1,0,0,0,0,1];case "rotate3d":var E=A.d[0],F=A.d[1],H=A.d[2];A=l(A.d[3]);var I=E*E+F*F+H*H;0===I?(E=1,H=F=0):1!==I&&(I=Math.sqrt(I),E/=I,F/=I,H/=I);I=Math.sin(A/2);A=I*Math.cos(A/2);I*=I;return[1-2*(F*F+H*H)*I,2*(E*F*I+H*A),2*(E*H*I-F*A),0,2*(E*F*I-H*A),1-2*(E*E+H*H)*I,2*(F*H*I+E*A),0,2*(E*H*I+F*A),2*(F*H*I-E*A),1-2*(E*E+F*F)*I,0,0,0,0,1];case "scale":return[A.d[0],
0,0,0,0,A.d[1],0,0,0,0,1,0,0,0,0,1];case "scalex":return[A.d[0],0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];case "scaley":return[1,0,0,0,0,A.d[0],0,0,0,0,1,0,0,0,0,1];case "scalez":return[1,0,0,0,0,1,0,0,0,0,A.d[0],0,0,0,0,1];case "scale3d":return[A.d[0],0,0,0,0,A.d[1],0,0,0,0,A.d[2],0,0,0,0,1];case "skew":return E=l(A.d[0]),F=l(A.d[1]),[1,Math.tan(F),0,0,Math.tan(E),1,0,0,0,0,1,0,0,0,0,1];case "skewx":return A=l(A.d[0]),[1,0,0,0,Math.tan(A),1,0,0,0,0,1,0,0,0,0,1];case "skewy":return A=l(A.d[0]),[1,Math.tan(A),
0,0,0,1,0,0,0,0,1,0,0,0,0,1];case "translate":return E=A.d[0].px||0,F=A.d[1].px||0,[1,0,0,0,0,1,0,0,0,0,1,0,E,F,0,1];case "translatex":return E=A.d[0].px||0,[1,0,0,0,0,1,0,0,0,0,1,0,E,0,0,1];case "translatey":return F=A.d[0].px||0,[1,0,0,0,0,1,0,0,0,0,1,0,0,F,0,1];case "translatez":return H=A.d[0].px||0,[1,0,0,0,0,1,0,0,0,0,1,0,0,0,H,1];case "translate3d":return E=A.d[0].px||0,F=A.d[1].px||0,H=A.d[2].px||0,[1,0,0,0,0,1,0,0,0,0,1,0,E,F,H,1];case "perspective":return[1,0,0,0,0,1,0,0,0,0,1,A.d[0].px?
-1/A.d[0].px:0,0,0,0,1];case "matrix":return[A.d[0],A.d[1],0,0,A.d[2],A.d[3],0,0,0,0,1,0,A.d[4],A.d[5],0,1];case "matrix3d":return A.d}}function v(A){return 0===A.length?[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]:A.map(r).reduce(g)}var y=function(){function A(I){return I[0][0]*I[1][1]*I[2][2]+I[1][0]*I[2][1]*I[0][2]+I[2][0]*I[0][1]*I[1][2]-I[0][2]*I[1][1]*I[2][0]-I[1][2]*I[2][1]*I[0][0]-I[2][2]*I[0][1]*I[1][0]}function E(I){var M=F(I);return[I[0]/M,I[1]/M,I[2]/M]}function F(I){return Math.sqrt(I[0]*I[0]+I[1]*
I[1]+I[2]*I[2])}function H(I,M,N,W){return[N*I[0]+W*M[0],N*I[1]+W*M[1],N*I[2]+W*M[2]]}return function(I){I=[I.slice(0,4),I.slice(4,8),I.slice(8,12),I.slice(12,16)];if(1!==I[3][3])return null;for(var M=[],N=0;4>N;N++)M.push(I[N].slice());for(N=0;3>N;N++)M[N][3]=0;if(0===A(M))return null;var W=[];if(I[0][3]||I[1][3]||I[2][3]){W.push(I[0][3]);W.push(I[1][3]);W.push(I[2][3]);W.push(I[3][3]);var X=1/A(M),ea=M[0][0],Aa=M[0][1];N=M[0][2];var Ma=M[1][0],K=M[1][1],aa=M[1][2],T=M[2][0],U=M[2][1],pa=M[2][2];
X=[[(K*pa-aa*U)*X,(N*U-Aa*pa)*X,(Aa*aa-N*K)*X,0],[(aa*T-Ma*pa)*X,(ea*pa-N*T)*X,(N*Ma-ea*aa)*X,0],[(Ma*U-K*T)*X,(T*Aa-ea*U)*X,(ea*K-Aa*Ma)*X,0]];ea=[];for(Aa=0;3>Aa;Aa++){for(Ma=N=0;3>Ma;Ma++)N+=M[3][Ma]*X[Ma][Aa];ea.push(N)}M=(ea.push(1),X.push(ea),X);M=[[M[0][0],M[1][0],M[2][0],M[3][0]],[M[0][1],M[1][1],M[2][1],M[3][1]],[M[0][2],M[1][2],M[2][2],M[3][2]],[M[0][3],M[1][3],M[2][3],M[3][3]]];X=[];for(ea=0;4>ea;ea++){for(N=Aa=0;4>N;N++)Aa+=W[N]*M[N][ea];X.push(Aa)}W=X}else W=[0,0,0,1];M=I[3].slice(0,
3);X=[];X.push(I[0].slice(0,3));ea=[];ea.push(F(X[0]));X[0]=E(X[0]);Aa=[];X.push(I[1].slice(0,3));Aa.push(a(X[0],X[1]));X[1]=H(X[1],X[0],1,-Aa[0]);ea.push(F(X[1]));X[1]=E(X[1]);Aa[0]/=ea[1];X.push(I[2].slice(0,3));Aa.push(a(X[0],X[2]));X[2]=H(X[2],X[0],1,-Aa[1]);Aa.push(a(X[1],X[2]));X[2]=H(X[2],X[1],1,-Aa[2]);ea.push(F(X[2]));X[2]=E(X[2]);Aa[1]/=ea[2];Aa[2]/=ea[2];I=X[1];N=X[2];if(0>a(X[0],[I[1]*N[2]-I[2]*N[1],I[2]*N[0]-I[0]*N[2],I[0]*N[1]-I[1]*N[0]]))for(N=0;3>N;N++)ea[N]*=-1,X[N][0]*=-1,X[N][1]*=
-1,X[N][2]*=-1;var fa,oa;I=X[0][0]+X[1][1]+X[2][2]+1;return 1E-4<I?(fa=.5/Math.sqrt(I),oa=[(X[2][1]-X[1][2])*fa,(X[0][2]-X[2][0])*fa,(X[1][0]-X[0][1])*fa,.25/fa]):X[0][0]>X[1][1]&&X[0][0]>X[2][2]?(fa=2*Math.sqrt(1+X[0][0]-X[1][1]-X[2][2]),oa=[.25*fa,(X[0][1]+X[1][0])/fa,(X[0][2]+X[2][0])/fa,(X[2][1]-X[1][2])/fa]):X[1][1]>X[2][2]?(fa=2*Math.sqrt(1+X[1][1]-X[0][0]-X[2][2]),oa=[(X[0][1]+X[1][0])/fa,.25*fa,(X[1][2]+X[2][1])/fa,(X[0][2]-X[2][0])/fa]):(fa=2*Math.sqrt(1+X[2][2]-X[0][0]-X[1][1]),oa=[(X[0][2]+
X[2][0])/fa,(X[1][2]+X[2][1])/fa,.25*fa,(X[1][0]-X[0][1])/fa]),[M,ea,Aa,oa,W]}}();e.dot=a;e.makeMatrixDecomposition=function(A){return[y(v(A))]};e.transformListToMatrix=v})(k);(function(e){function m(r,v){var y=r.exec(v);if(y)return y=r.ignoreCase?y[0].toLowerCase():y[0],[y,v.substr(y.length)]}function a(r,v){v=v.replace(/^\s*/,"");if(r=r(v))return[r[0],r[1].replace(/^\s*/,"")]}function g(r,v){for(var y=r,A=v;y&&A;)y>A?y%=A:A%=y;return r*v/(y+A)}function l(r,v,y,A,E){for(var F=[],H=[],I=[],M=g(A.length,
E.length),N=0;N<M;N++){var W=v(A[N%A.length],E[N%E.length]);if(!W)return;F.push(W[0]);H.push(W[1]);I.push(W[2])}return[F,H,function(X){X=X.map(function(ea,Aa){return I[Aa](ea)}).join(y);return r?r(X):X}]}e.consumeToken=m;e.consumeTrimmed=a;e.consumeRepeated=function(r,v,y){r=a.bind(null,r);for(var A=[];;){var E=r(y);if(!E||(A.push(E[0]),y=E[1],!(E=m(v,y))||""==E[1]))return[A,y];y=E[1]}};e.consumeParenthesised=function(r,v){for(var y=0,A=0;A<v.length&&(!/\s|,/.test(v[A])||0!=y);A++)if("("==v[A])y++;
else if(")"==v[A]&&(y--,0==y&&A++,0>=y))break;r=r(v.substr(0,A));return void 0==r?void 0:[r,v.substr(A)]};e.ignore=function(r){return function(v){v=r(v);return v&&(v[0]=void 0),v}};e.optional=function(r,v){return function(y){return r(y)||[v,y]}};e.consumeList=function(r,v){for(var y=[],A=0;A<r.length;A++){v=e.consumeTrimmed(r[A],v);if(!v||""==v[0])return;void 0!==v[0]&&y.push(v[0]);v=v[1]}if(""==v)return y};e.mergeNestedRepeated=l.bind(null,null);e.mergeWrappedNestedRepeated=l;e.mergeList=function(r,
v,y){for(var A=[],E=[],F=[],H=0,I=0;I<y.length;I++)if("function"==typeof y[I]){var M=y[I](r[H],v[H++]);A.push(M[0]);E.push(M[1]);F.push(M[2])}else!function(N){A.push(!1);E.push(!1);F.push(function(){return y[N]})}(I);return[A,E,function(N){for(var W="",X=0;X<N.length;X++)W+=F[X](N[X]);return W}]}})(k);(function(e){function m(g){var l={inset:!1,lengths:[],color:null};if((g=e.consumeRepeated(function(r){var v=e.consumeToken(/^inset/i,r);return v?(l.inset=!0,v):(v=e.consumeLengthOrPercent(r))?(l.lengths.push(v[0]),
v):(v=e.consumeColor(r),v?(l.color=v[0],v):void 0)},/^/,g))&&g[0].length)return[l,g[1]]}var a=function(g,l,r,v){function y(M){return{inset:M,color:[0,0,0,0],lengths:[{px:0},{px:0},{px:0},{px:0}]}}for(var A=[],E=[],F=0;F<r.length||F<v.length;F++){var H=r[F]||y(v[F].inset),I=v[F]||y(r[F].inset);A.push(H);E.push(I)}return e.mergeNestedRepeated(g,l,A,E)}.bind(null,function(g,l){for(;g.lengths.length<Math.max(g.lengths.length,l.lengths.length);)g.lengths.push({px:0});for(;l.lengths.length<Math.max(g.lengths.length,
l.lengths.length);)l.lengths.push({px:0});if(g.inset==l.inset&&!!g.color==!!l.color){for(var r,v=[],y=[[],0],A=[[],0],E=0;E<g.lengths.length;E++){var F=e.mergeDimensions(g.lengths[E],l.lengths[E],2==E);y[0].push(F[0]);A[0].push(F[1]);v.push(F[2])}g.color&&l.color&&(l=e.mergeColors(g.color,l.color),y[1]=l[0],A[1]=l[1],r=l[2]);return[y,A,function(H){for(var I=g.inset?"inset ":" ",M=0;M<v.length;M++)I+=v[M](H[0][M])+" ";return r&&(I+=r(H[1])),I}]}},", ");e.addPropertiesHandler(function(g){if((g=e.consumeRepeated(m,
/^,/,g))&&""==g[1])return g[0]},a,["box-shadow","text-shadow"])})(k);(function(e,m){function a(y){return y.toFixed(3).replace(/0+$/,"").replace(/\.$/,"")}function g(y,A,E){return Math.min(A,Math.max(y,E))}function l(y){if(/^\s*[-+]?(\d*\.)?\d+\s*$/.test(y))return Number(y)}function r(y,A){return function(E,F){return[E,F,function(H){return a(g(y,A,H))}]}}function v(y){y=y.trim().split(/\s*[\s,]\s*/);if(0!==y.length){for(var A=[],E=0;E<y.length;E++){var F=l(y[E]);if(void 0===F)return;A.push(F)}return A}}
e.clamp=g;e.addPropertiesHandler(v,function(y,A){if(y.length==A.length)return[y,A,function(E){return E.map(a).join(" ")}]},["stroke-dasharray"]);e.addPropertiesHandler(l,r(0,1/0),["border-image-width","line-height"]);e.addPropertiesHandler(l,r(0,1),["opacity","shape-image-threshold"]);e.addPropertiesHandler(l,function(y,A){if(0!=y)return r(0,1/0)(y,A)},["flex-grow","flex-shrink"]);e.addPropertiesHandler(l,function(y,A){return[y,A,function(E){return Math.round(g(1,1/0,E))}]},["orphans","widows"]);
e.addPropertiesHandler(l,function(y,A){return[y,A,Math.round]},["z-index"]);e.parseNumber=l;e.parseNumberList=v;e.mergeNumbers=function(y,A){return[y,A,a]};e.numberToString=a})(k);(function(e,m){e.addPropertiesHandler(String,function(a,g){if("visible"==a||"visible"==g)return[0,1,function(l){return 0>=l?a:1<=l?g:"visible"}]},["visibility"])})(k);(function(e,m){function a(r){r=r.trim();l.fillStyle="#000";l.fillStyle=r;var v=l.fillStyle;if(l.fillStyle="#fff",l.fillStyle=r,v==l.fillStyle)return l.fillRect(0,
0,1,1),r=l.getImageData(0,0,1,1).data,l.clearRect(0,0,1,1),v=r[3]/255,[r[0]*v,r[1]*v,r[2]*v,v]}function g(r,v){return[r,v,function(y){if(y[3])for(var A=0;3>A;A++)y[A]=Math.round(Math.max(0,Math.min(255,y[A]/y[3])));return y[3]=e.numberToString(e.clamp(0,1,y[3])),"rgba("+y.join(",")+")"}]}m=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");m.width=m.height=1;var l=m.getContext("2d");e.addPropertiesHandler(a,g,"background-color border-bottom-color border-left-color border-right-color border-top-color color fill flood-color lighting-color outline-color stop-color stroke text-decoration-color".split(" "));
e.consumeColor=e.consumeParenthesised.bind(null,a);e.mergeColors=g})(k);(function(e,m){function a(E){function F(){var X=W.exec(E);N=X?X[0]:void 0}function H(){if("("!==N){var X=Number(N);return F(),X}F();X=M();return")"!==N?NaN:(F(),X)}function I(){for(var X=H();"*"===N||"/"===N;){var ea=N;F();var Aa=H();"*"===ea?X*=Aa:X/=Aa}return X}function M(){for(var X=I();"+"===N||"-"===N;){var ea=N;F();var Aa=I();"+"===ea?X+=Aa:X-=Aa}return X}var N,W=/([\+\-\w\.]+|[\(\)\*\/])/g;return F(),M()}function g(E,F){if("0"==
(F=F.trim().toLowerCase())&&0<="px".search(E))return{px:0};if(/^[^(]*$|^calc/.test(F)){F=F.replace(/calc\(/g,"(");var H={};F=F.replace(E,function(X){return H[X]=null,"U"+X});E="U("+E.source+")";for(var I=F.replace(/[-+]?(\d*\.)?\d+([Ee][-+]?\d+)?/g,"N").replace(new RegExp("N"+E,"g"),"D").replace(/\s[+-]\s/g,"O").replace(/\s/g,""),M=[/N\*(D)/g,/(N|D)[*\/]N/g,/(N|D)O\1/g,/\((N|D)\)/g],N=0;N<M.length;)M[N].test(I)?(I=I.replace(M[N],"$1"),N=0):N++;if("D"==I){for(var W in H){I=a(F.replace(new RegExp("U"+
W,"g"),"").replace(new RegExp(E,"g"),"*0"));if(!isFinite(I))return;H[W]=I}return H}}}function l(E,F){return r(E,F,!0)}function r(E,F,H){var I,M=[];for(I in E)M.push(I);for(I in F)0>M.indexOf(I)&&M.push(I);return E=M.map(function(N){return E[N]||0}),F=M.map(function(N){return F[N]||0}),[E,F,function(N){var W=N.map(function(X,ea){return 1==N.length&&H&&(X=Math.max(X,0)),e.numberToString(X)+M[ea]}).join(" + ");return 1<N.length?"calc("+W+")":W}]}var v=g.bind(null,/px|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc/g);
m=g.bind(null,/px|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|%/g);var y=g.bind(null,/deg|rad|grad|turn/g);e.parseLength=v;e.parseLengthOrPercent=m;e.consumeLengthOrPercent=e.consumeParenthesised.bind(null,m);e.parseAngle=y;e.mergeDimensions=r;v=e.consumeParenthesised.bind(null,v);v=e.consumeRepeated.bind(void 0,v,/^/);var A=e.consumeRepeated.bind(void 0,v,/^,/);e.consumeSizePairList=A;v=e.mergeNestedRepeated.bind(void 0,l," ");y=e.mergeNestedRepeated.bind(void 0,v,",");e.mergeNonNegativeSizePair=
v;e.addPropertiesHandler(function(E){if((E=A(E))&&""==E[1])return E[0]},y,["background-size"]);e.addPropertiesHandler(m,l,"border-bottom-width border-image-width border-left-width border-right-width border-top-width flex-basis font-size height line-height max-height max-width outline-width width".split(" "));e.addPropertiesHandler(m,r,"border-bottom-left-radius border-bottom-right-radius border-top-left-radius border-top-right-radius bottom left letter-spacing margin-bottom margin-left margin-right margin-top min-height min-width outline-offset padding-bottom padding-left padding-right padding-top perspective right shape-margin stroke-dashoffset text-indent top vertical-align word-spacing".split(" "))})(k);
(function(e,m){function a(l){return e.consumeLengthOrPercent(l)||e.consumeToken(/^auto/,l)}function g(l){if((l=e.consumeList([e.ignore(e.consumeToken.bind(null,/^rect/)),e.ignore(e.consumeToken.bind(null,/^\(/)),e.consumeRepeated.bind(null,a,/^,/),e.ignore(e.consumeToken.bind(null,/^\)/))],l))&&4==l[0].length)return l[0]}m=e.mergeWrappedNestedRepeated.bind(null,function(l){return"rect("+l+")"},function(l,r){return"auto"==l||"auto"==r?[!0,!1,function(v){v=v?l:r;if("auto"==v)return"auto";v=e.mergeDimensions(v,
v);return v[2](v[0])}]:e.mergeDimensions(l,r)},", ");e.parseBox=g;e.mergeBoxes=m;e.addPropertiesHandler(g,m,["clip"])})(k);(function(e,m){function a(I){return function(M){var N=0;return I.map(function(W){return W===A?M[N++]:W})}}function g(I){return I}function l(I){if("none"==(I=I.toLowerCase().trim()))return[];for(var M,N=/\s*(\w+)\(([^)]*)\)/g,W=[],X=0;(M=N.exec(I))&&M.index==X;){X=M.index+M[0].length;var ea=M[1],Aa=H[ea];if(!Aa)break;M=M[2].split(",");Aa=Aa[0];if(Aa.length<M.length)break;for(var Ma=
[],K=0;K<Aa.length;K++){var aa=M[K];var T=Aa[K];if(void 0===(aa=aa?{A:function(U){return"0"==U.trim()?F:e.parseAngle(U)},N:e.parseNumber,T:e.parseLengthOrPercent,L:e.parseLength}[T.toUpperCase()](aa):{a:F,n:Ma[0],t:E}[T]))return;Ma.push(aa)}if(W.push({t:ea,d:Ma}),N.lastIndex==I.length)return W}}function r(I){return I.toFixed(6).replace(".000000","")}function v(I,M){if(I.decompositionPair!==M){I.decompositionPair=M;var N=e.makeMatrixDecomposition(I)}if(M.decompositionPair!==I){M.decompositionPair=
I;var W=e.makeMatrixDecomposition(M)}return null==N[0]||null==W[0]?[[!1],[!0],function(X){return X?M[0].d:I[0].d}]:(N[0].push(0),W[0].push(1),[N,W,function(X){var ea=e.quat(N[0][3],W[0][3],X[5]);return e.composeMatrix(X[0],X[1],X[2],ea,X[4]).map(r).join(",")}])}function y(I){return I.replace(/(x|y|z|3d)?$/,"3d")}var A=null,E={px:0},F={deg:0},H={matrix:["NNNNNN",[A,A,0,0,A,A,0,0,0,0,1,0,A,A,0,1],g],matrix3d:["NNNNNNNNNNNNNNNN",g],rotate:["A"],rotatex:["A"],rotatey:["A"],rotatez:["A"],rotate3d:["NNNA"],
perspective:["L"],scale:["Nn",a([A,A,1]),g],scalex:["N",a([A,1,1]),a([A,1])],scaley:["N",a([1,A,1]),a([1,A])],scalez:["N",a([1,1,A])],scale3d:["NNN",g],skew:["Aa",null,g],skewx:["A",null,a([A,F])],skewy:["A",null,a([F,A])],translate:["Tt",a([A,A,E]),g],translatex:["T",a([A,E,E]),a([A,E])],translatey:["T",a([E,A,E]),a([E,A])],translatez:["L",a([E,E,A])],translate3d:["TTL",g]};e.addPropertiesHandler(l,function(I,M){var N=e.makeMatrixDecomposition&&!0,W=!1;if(!I.length||!M.length){I.length||(W=!0,I=
M,M=[]);for(var X=0;X<I.length;X++){var ea=I[X].t,Aa=I[X].d,Ma="scale"==ea.substr(0,5)?1:0;M.push({t:ea,d:Aa.map(function(va){if("number"==typeof va)return Ma;var ma={},ta;for(ta in va)ma[ta]=Ma;return ma})})}}Aa=[];var K=[],aa=[];if(I.length!=M.length){if(!N)return;var T=v(I,M);Aa=[T[0]];K=[T[1]];aa=[["matrix",[T[2]]]]}else for(X=0;X<I.length;X++){ea=I[X].t;var U=M[X].t,pa=I[X].d,fa=M[X].d;T=H[ea];var oa=H[U];if("perspective"==ea&&"perspective"==U||!("matrix"!=ea&&"matrix3d"!=ea||"matrix"!=U&&"matrix3d"!=
U)){if(!N)return;T=v([I[X]],[M[X]]);Aa.push(T[0]);K.push(T[1]);aa.push(["matrix",[T[2]]])}else{if(ea!=U)if(T[2]&&oa[2]&&ea.replace(/[xy]/,"")==U.replace(/[xy]/,""))ea=ea.replace(/[xy]/,""),pa=T[2](pa),fa=oa[2](fa);else{if(!T[1]||!oa[1]||y(ea)!=y(U)){if(!N)return;T=v(I,M);Aa=[T[0]];K=[T[1]];aa=[["matrix",[T[2]]]];break}ea=y(ea);pa=T[1](pa);fa=oa[1](fa)}oa=[];U=[];for(var gb=[],zb=0;zb<pa.length;zb++)T=("number"==typeof pa[zb]?e.mergeNumbers:e.mergeDimensions)(pa[zb],fa[zb]),oa[zb]=T[0],U[zb]=T[1],
gb.push(T[2]);Aa.push(oa);K.push(U);aa.push([ea,gb])}}W&&(I=Aa,Aa=K,K=I);return[Aa,K,function(va){return va.map(function(ma,ta){ma=ma.map(function(Na,Kb){return aa[ta][1][Kb](Na)}).join(",");return"matrix"==aa[ta][0]&&16==ma.split(",").length&&(aa[ta][0]="matrix3d"),aa[ta][0]+"("+ma+")"}).join(" ")}]},["transform"]);e.transformToSvgMatrix=function(I){I=e.transformListToMatrix(l(I));return"matrix("+r(I[0])+" "+r(I[1])+" "+r(I[4])+" "+r(I[5])+" "+r(I[12])+" "+r(I[13])+")"}})(k);(function(e){function m(a){return a=
100*Math.round(a/100),a=e.clamp(100,900,a),400===a?"normal":700===a?"bold":String(a)}e.addPropertiesHandler(function(a){a=Number(a);if(!(isNaN(a)||100>a||900<a||0!=a%100))return a},function(a,g){return[a,g,m]},["font-weight"])})(k);(function(e){function m(v){return e.consumeToken(/^(left|center|right|top|bottom)\b/i,v)||e.consumeLengthOrPercent(v)}function a(v,y){if((y=e.consumeRepeated(m,/^/,y))&&""==y[1]&&(y=y[0],y[0]=y[0]||"center",y[1]=y[1]||"center",3==v&&(y[2]=y[2]||{px:0}),y.length==v)){if(/top|bottom/.test(y[0])||
/left|right/.test(y[1]))v=y[0],y[0]=y[1],y[1]=v;if(/left|right|center|Object/.test(y[0])&&/top|bottom|center|Object/.test(y[1]))return y.map(function(A){return"object"==typeof A?A:l[A]})}}function g(v){if(v=e.consumeRepeated(m,/^/,v)){for(var y=v[0],A=[{"%":50},{"%":50}],E=0,F=!1,H=0;H<y.length;H++){var I=y[H];if("string"==typeof I)F=/bottom|right/.test(I),E={left:0,right:0,center:E,top:1,bottom:1}[I],A[E]=l[I],"center"==I&&E++;else{if(F){F=void 0;var M={};for(F in I)M[F]=-I[F];I=M;I["%"]=(I["%"]||
0)+100}A[E]=I;E++;F=!1}}return[A,v[1]]}}var l={left:{"%":0},center:{"%":50},right:{"%":100},top:{"%":0},bottom:{"%":100}},r=e.mergeNestedRepeated.bind(null,e.mergeDimensions," ");e.addPropertiesHandler(a.bind(null,3),r,["transform-origin"]);e.addPropertiesHandler(a.bind(null,2),r,["perspective-origin"]);e.consumePosition=g;e.mergeOffsetList=r;r=e.mergeNestedRepeated.bind(null,r,", ");e.addPropertiesHandler(function(v){if((v=e.consumeRepeated(g,/^,/,v))&&""==v[1])return v[0]},r,["background-position",
"object-position"])})(k);(function(e){var m=e.consumeParenthesised.bind(null,e.parseLengthOrPercent),a=e.consumeRepeated.bind(void 0,m,/^/),g=e.mergeNestedRepeated.bind(void 0,e.mergeDimensions," "),l=e.mergeNestedRepeated.bind(void 0,g,",");e.addPropertiesHandler(function(r){var v=e.consumeToken(/^circle/,r);return v&&v[0]?["circle"].concat(e.consumeList([e.ignore(e.consumeToken.bind(void 0,/^\(/)),m,e.ignore(e.consumeToken.bind(void 0,/^at/)),e.consumePosition,e.ignore(e.consumeToken.bind(void 0,
/^\)/))],v[1])):(v=e.consumeToken(/^ellipse/,r))&&v[0]?["ellipse"].concat(e.consumeList([e.ignore(e.consumeToken.bind(void 0,/^\(/)),a,e.ignore(e.consumeToken.bind(void 0,/^at/)),e.consumePosition,e.ignore(e.consumeToken.bind(void 0,/^\)/))],v[1])):(r=e.consumeToken(/^polygon/,r))&&r[0]?["polygon"].concat(e.consumeList([e.ignore(e.consumeToken.bind(void 0,/^\(/)),e.optional(e.consumeToken.bind(void 0,/^nonzero\s*,|^evenodd\s*,/),"nonzero,"),e.consumeSizePairList,e.ignore(e.consumeToken.bind(void 0,
/^\)/))],r[1])):void 0},function(r,v){if(r[0]===v[0])return"circle"==r[0]?e.mergeList(r.slice(1),v.slice(1),["circle(",e.mergeDimensions," at ",e.mergeOffsetList,")"]):"ellipse"==r[0]?e.mergeList(r.slice(1),v.slice(1),["ellipse(",e.mergeNonNegativeSizePair," at ",e.mergeOffsetList,")"]):"polygon"==r[0]&&r[1]==v[1]?e.mergeList(r.slice(2),v.slice(2),["polygon(",r[1],l,")"]):void 0},["shape-outside"])})(k);(function(e,m){function a(r,v){v.concat([r]).forEach(function(y){y in document.documentElement.style&&
(g[r]=y);l[y]=r})}var g={},l={};a("transform",["webkitTransform","msTransform"]);a("transformOrigin",["webkitTransformOrigin"]);a("perspective",["webkitPerspective"]);a("perspectiveOrigin",["webkitPerspectiveOrigin"]);e.propertyName=function(r){return g[r]||r};e.unprefixedPropertyName=function(r){return l[r]||r}})(k)})();(function(){if(void 0===document.createElement("div").animate([]).oncancel){var n=window.performance&&performance.now?function(){return performance.now()}:function(){return Date.now()};
var b=function(m,a,g){(this||yc).target=m;(this||yc).currentTime=a;(this||yc).timelineTime=g;(this||yc).type="cancel";(this||yc).bubbles=!1;(this||yc).cancelable=!1;(this||yc).currentTarget=m;(this||yc).defaultPrevented=!1;(this||yc).eventPhase=Event.AT_TARGET;(this||yc).timeStamp=Date.now()},e=window.Element.prototype.animate;window.Element.prototype.animate=function(m,a){m=e.call(this||yc,m,a);m._cancelHandlers=[];m.oncancel=null;var g=m.cancel;m.cancel=function(){g.call(this||yc);var v=new b(this||
yc,null,n()),y=(this||yc)._cancelHandlers.concat((this||yc).oncancel?[(this||yc).oncancel]:[]);setTimeout(function(){y.forEach(function(A){A.call(v.target,v)})},0)};var l=m.addEventListener;m.addEventListener=function(v,y){"function"==typeof y&&"cancel"==v?(this||yc)._cancelHandlers.push(y):l.call(this||yc,v,y)};var r=m.removeEventListener;return m.removeEventListener=function(v,y){"cancel"==v?(v=(this||yc)._cancelHandlers.indexOf(y),0<=v&&(this||yc)._cancelHandlers.splice(v,1)):r.call(this||yc,v,
y)},m}}})();(function(n){var b=document.documentElement,e=null,m=!1;try{var a="0"==getComputedStyle(b).getPropertyValue("opacity")?"1":"0";e=b.animate({opacity:[a,a]},{duration:1});e.currentTime=0;m=getComputedStyle(b).getPropertyValue("opacity")==a}catch(l){}finally{e&&e.cancel()}if(!m){var g=window.Element.prototype.animate;window.Element.prototype.animate=function(l,r){return window.Symbol&&Symbol.iterator&&Array.prototype.from&&l[Symbol.iterator]&&(l=Array.from(l)),Array.isArray(l)||null===l||
(l=n.convertToArrayForm(l)),g.call(this||yc,l,r)}}})(f)}();var Sf=lively.FreezerRuntime.recorderFor("lively.morphic/rendering/animations.js");Sf.convertToSvgEasing=function(f){for(var k in Sf.easings)if(Sf.easings[k]===f){if(k.includes("inOut"))return k.replace("inOut","").toLowerCase()+"InOut";if(k.includes("out"))return k.replace("out","").toLowerCase()+"Out";if(k.includes("in"))return k.replace("in","").toLowerCase()+"In"}};Sf.stringToEasing=rq;Sf.obj=Ag;Sf.promise=zh;Sf.fun=Pn;Sf.num=Nm;Sf.properties=
up;Sf.arr=$f;Sf.string=pi;Sf.Color=Fg;Sf.styleProps=Uz;Sf.addPathAttributes=Vz;Sf.addSvgAttributes=Nx;Sf.flubber=OT;Sf.Bezier=Hka;Sf.ShadowObject=zs;var rr=Da("av",{inQuad:"cubic-bezier(0.550,  0.085, 0.680, 0.530)",inCubic:"cubic-bezier(0.550,  0.055, 0.675, 0.190)",inQuart:"cubic-bezier(0.895,  0.030, 0.685, 0.220)",inQuint:"cubic-bezier(0.755,  0.050, 0.855, 0.060)",inSine:"cubic-bezier(0.470,  0.000, 0.745, 0.715)",inExpo:"cubic-bezier(0.950,  0.050, 0.795, 0.035)",inCirc:"cubic-bezier(0.600,  0.040, 0.980, 0.335)",
inBack:"cubic-bezier(0.600, -0.280, 0.735, 0.045)",outQuad:"cubic-bezier(0.250,  0.460, 0.450, 0.940)",outCubic:"cubic-bezier(0.215,  0.610, 0.355, 1.000)",outQuart:"cubic-bezier(0.165,  0.840, 0.440, 1.000)",outQuint:"cubic-bezier(0.230,  1.000, 0.320, 1.000)",outSine:"cubic-bezier(0.390,  0.575, 0.565, 1.000)",outExpo:"cubic-bezier(0.190,  1.000, 0.220, 1.000)",outCirc:"cubic-bezier(0.075,  0.820, 0.165, 1.000)",outBack:"cubic-bezier(0.175,  0.885, 0.320, 1.275)",inOutQuad:"cubic-bezier(0.455,  0.030, 0.515, 0.955)",
inOutCubic:"cubic-bezier(0.645,  0.045, 0.355, 1.000)",inOutQuart:"cubic-bezier(0.770,  0.000, 0.175, 1.000)",inOutQuint:"cubic-bezier(0.860,  0.000, 0.070, 1.000)",inOutSine:"cubic-bezier(0.445,  0.050, 0.550, 0.950)",inOutExpo:"cubic-bezier(1.000,  0.000, 0.000, 1.000)",inOutCirc:"cubic-bezier(0.785,  0.135, 0.150, 0.860)",inOutBack:"cubic-bezier(0.680, -0.550, 0.265, 1.550)",linear:"cubic-bezier(0.5, 0.5, 0.5, 0.5)"});Sf.easings=rr;Sf.easings=rr;Sf.easings=rr;Sf.stringToEasing=rq;Sf.stringToEasing=
rq;var lM=function(f){var k=lively.FreezerRuntime.recorderFor("lively.morphic/rendering/animations.js"),n=k.hasOwnProperty("AnimationQueue")&&"function"===typeof k.AnimationQueue?k.AnimationQueue:k.AnimationQueue=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return dc(n,f,[{key:Symbol.for("lively-instance-initialize"),value:function(b){this.morph=b;this.animations=[]}},{key:"maskedProps",value:function(b){return 0<this.animations.length?
Sf.obj.merge(this.animations.map(function(e){return e.getAnimationProps(b)[0]})):{}}},{key:"animationsActive",get:function(){return!0}},{key:"registerAnimation",value:function(b){var e=this,m=new Sf.PropertyAnimation(this,this.morph,b);this.morph.makeDirty();return this.morph.withMetaDo({animation:m},function(){var a=m.affectsMorph&&e.animations.find(function(l){return l.equals(m)});if(!a){var g;if(g=e.animations.find(function(l){return l.canMerge(m)}))return g.mergeWith(m),g;if(m.affectsMorph)return m.assignProps(),
e.animations.push(m),m}return a})}},{key:"startAnimationsFor",value:function(b){for(var e=0;e<this.animations.length;e++)this.animations[e].start(b)}},{key:"startSvgAnimationsFor",value:function(b,e){this.animations.forEach(function(m){return m.startSvg(b,e)})}},{key:"removeAnimation",value:function(b){Sf.arr.remove(this.animations,b)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"AnimationQueue"}}],k,{pathInPackage:function(){return"rendering/animations.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:2518,end:3809})}(void 0);Sf.AnimationQueue=lM;Sf.AnimationQueue=lM;Sf.AnimationQueue=lM;var aU=function(f){var k=lively.FreezerRuntime.recorderFor("lively.morphic/rendering/animations.js"),n=k.hasOwnProperty("PropertyAnimation")&&"function"===typeof k.PropertyAnimation?k.PropertyAnimation:k.PropertyAnimation=function(b){b&&b[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return dc(n,f,[{key:Symbol.for("lively-instance-initialize"),value:function(b,e,m){var a=this;this.queue=b;this.morph=e;if(e.isPath&&"fill"in m){var g=e.fill||Sf.Color.transparent,l=m.fill;m.customTween=Sf.fun.compose(function(E){e.fill=g.interpolate(E,l);return E},m.customTween||function(E){});delete m.fill;e.fill=g}if("dropShadow"in m){var r=e.dropShadow||new Sf.ShadowObject({blur:0,distance:0,spread:0}),v=m.dropShadow;m.customTween=
Sf.fun.compose(function(E){e.dropShadow=r.interpolate(E,v||new Sf.ShadowObject({blur:0,distance:0,spread:0}));1==E&&(e.dropShadow=v);return E},m.customTween||function(E){});delete m.dropShadow;e.dropShadow=r}if("visible"in m){var y=void 0===b.originalOpacity?e.opacity:b.originalOpacity;b.originalOpacity=y;var A=m.visible;m.customTween=Sf.fun.compose(function(E){if(a._otherVisibleTransformationInProgress)return E;0==E&&1==A&&(e.visible=!0);e.opacity=A?Sf.num.interpolate(E,0,y):Sf.num.interpolate(E,
y,0);1==E&&(e.visible=A,e.opacity=y,delete b.originalOpacity);return E},m.customTween||function(E){});this.queue.animations.forEach(function(E){return E._otherVisibleTransformationInProgress=!0});delete m.visible}this.config=this.convertBounds(m);this.needsAnimation={svg:e.isSvgMorph,path:e.isPath};this.capturedProperties=Sf.obj.select(this.morph,this.propsToCapture)}},{key:"propsToCapture",get:function(){return["fill","origin"]}},{key:"asPromise",value:function(){var b=this;return this._promise||
(this._promise=new Promise(function(e,m){b.resolveCallback=function(){b.onFinish(b);b.subAnimations?b.subAnimations.then(e):e(b.morph)}}))}},{key:"finish",value:function(b){var e=this;this.config.scale&&this.morph.whenRendered().then(function(){return e.morph.withAllSubmorphsDo(function(m){return m.isText&&m.invalidateTextLayout(!0,!0)})});this.needsAnimation[b]=!1;Sf.arr.any(Sf.obj.values(this.needsAnimation),Boolean)||(this.queue.removeAnimation(this),this.resolveCallback?this.resolveCallback():
this.onFinish())}},{key:"convertBounds",value:function(b){var e=b.bounds,m=b.origin,a=b.rotation,g=b.scale;m=m||this.morph.origin;a=a||this.morph.rotation;g=g||this.morph.scale;return e?Object.assign({},Sf.obj.dissoc(b,["bounds"]),{origin:m,rotation:a,scale:g,position:e.topLeft().addPt(m),extent:e.extent()}):b}},{key:"equals",value:function(b){return!this.config.customTween&&!b.config.customTweem&&Sf.obj.equals(this.animatedProps,b.animatedProps)}},{key:"canMerge",value:function(b){return this.easing==
b.easing&&this.duration==b.duration}},{key:"mergeWith",value:function(b){var e=this.config.customTween;Object.assign(this.morph,b.animatedProps);Object.assign(this.config,b.config);this.config.customTween=function(m){e&&e(m);b.config.customTween&&b.config.customTween(m);return m};this.afterProps=this.gatherAnimationProps()}},{key:"affectsMorph",get:function(){var b=this;return!!this.config.customTween||Sf.properties.any(this.animatedProps,function(e,m){return!Sf.obj.equals(e[m],b.morph[m])})}},{key:"animatedProps",
get:function(){return Sf.obj.dissoc(this.config,["customTween","easing","onFinish","duration"])}},{key:"easing",get:function(){return this.config.easing||Sf.easings.inOutQuad}},{key:"onFinish",get:function(){return this.config.onFinish||function(){}}},{key:"setonFinish",value:function(b){this.config.onFinish=b}},{key:"duration",get:function(){return this.config.duration||1E3}},{key:"getChangedProps",value:function(b,e){var m=[],a;for(a in b)Sf.obj.equals(e[a],b[a])&&m.push(a);return[Sf.obj.dissoc(b,
m),Sf.obj.dissoc(e,m)]}},{key:"getAnimationProps",value:function(b){var e=$jscomp.makeIterator(this.getChangedProps(this.beforeProps[b],this.afterProps[b])),m=e.next().value;e=e.next().value;var a=this.capturedProperties.fill,g=this.config.fill;this.morph.isPolygon&&"css"==b&&(a=g=!1,delete m.background,delete e.background,delete m.backgroundImage,delete e.backgroundImage);"none"==m.filter&&e.boxShadow&&(delete m.filter,m.boxShadow="none");"none"==e.filter&&m.boxShadow&&(delete e.filter,e.boxShadow=
"none");a&&g&&(a.isGradient||g.isGradient)&&(this.tweenGradient=this.interpolate("gradient",a,g));b=$jscomp.makeIterator(Sf.arr.union(Sf.obj.keys(m),Sf.obj.keys(e)));for(a=b.next();!a.done;a=b.next())a=a.value,a in m||(m[a]=e[a]),a in e||(e[a]=m[a]);return[Sf.obj.isEmpty(m)?!1:m,Sf.obj.isEmpty(e)?!1:e]}},{key:"gatherAnimationProps",value:function(){var b=this.morph,e=b.isSvgMorph,m=b.isPath,a=b.isPolygon,g={};g.css=Sf.styleProps(this.morph);e&&(g.svg=Sf.addSvgAttributes(b,{}));m&&(g.path=Sf.addPathAttributes(b,
{}));a&&(g.polygon=Sf.addPathAttributes(b,{}));return g}},{key:"assignProps",value:function(){var b=this.morph.styleClasses;this.beforeProps=this.gatherAnimationProps();Object.assign(this.morph,this.animatedProps);this.afterProps=this.gatherAnimationProps();this.config.styleClasses&&(this.morph._animatedStyleClasses={removed:Sf.arr.withoutAll(b,this.morph.styleClasses),added:Sf.arr.withoutAll(this.morph.styleClasses,b),animation:this})}},{key:"interpolate",value:function(b,e,m){var a=this;switch(b){case "scrollTop":case "scrollLeft":return function(g){return Sf.num.interpolate(g,
e,m)};case "d":return Sf.flubber.interpolate(e,m);case "stroke-width":return function(g){return Sf.num.interpolate(g,e,m)};case "stroke":return function(g){return Sf.Color.fromString(e).interpolate(g,Sf.Color.fromString(m),a.morph.bounds())};case "gradient":return function(g){return e.interpolate(g,m,a.morph.bounds())};case "fill":return e=Sf.Color.fromString(e),m=Sf.Color.fromString(m),function(g){return e.interpolate(g,m)}}}},{key:"startSvg",value:function(b,e){var m=this;if(this.needsAnimation[e]){this.needsAnimation[e]=
!1;var a=$jscomp.makeIterator(this.getAnimationProps(e)),g=a.next().value;a=a.next().value;var l={},r=Sf.stringToEasing(this.easing),v;for(v in g)l[v]=this.interpolate(v,g[v],a[v]);var y,A=function(E){y||(y=E);E-=y;if(1<E/m.duration)return m.finish(e);for(var F in l)l[F]&&b.setAttribute(F,l[F](r(E/m.duration)));requestAnimationFrame(A)};requestAnimationFrame(A)}}},{key:"start",value:function(b){if(!this.active)try{this.active=!0;var e=$jscomp.makeIterator(this.getAnimationProps("css")),m=e.next().value,
a=e.next().value;b&&this.tween(b,m,a);if(this.config.origin){var g=this.capturedProperties.origin,l=this.config.origin,r=b.childNodes[0];r&&this.tween(r,r.style.top?{left:g.x+"px",top:g.y+"px"}:{transform:"translate3d("+g.x+"px, "+g.y+"px, 0px)"},r.style.top?{left:g.x+"px",top:g.y+"px"}:{transform:"translate3d("+l.x+"px, "+l.y+"px, 0px)"})}}catch(v){this.active=!1}}},{key:"tween",value:function(b,e,m,a){var g=this;a=void 0===a?!0:a;var l=this.animatedProps.scroll,r=this.config.customTween,v=!1,y=
function(){a&&(g.finish("css"),g.morph.makeDirty())};if(r){var A,E=Sf.stringToEasing(this.easing),F=function(fa){A||(A=fa);var oa=Math.min(1,(fa-A)/g.duration);g.morph.dontRecordChangesWhile(function(){return r(E(oa))});if(1<=oa)return g.finish("css");requestAnimationFrame(F)};requestAnimationFrame(F);v=!0}if(l){var H,I=this.morph.env.eventDispatcher.eventState;v=Sf.promise.deferred();var M=v.promise,N=v.resolve,W=this.interpolate("scrollLeft",b.scrollLeft,l.x),X=this.interpolate("scrollTop",b.scrollTop,
l.y),ea=Sf.stringToEasing(this.easing),Aa=function(fa){H||(H=fa);fa-=H;var oa=Math.min(1,fa/g.duration);b.scrollTop=X(ea(oa));b.scrollLeft=W(ea(oa));if(1<=fa/g.duration)return I.scroll.interactiveScrollInProgress=null,N(),g.finish("css");requestAnimationFrame(Aa)};M.debounce=function(){};requestAnimationFrame(Aa);v=!0}if(this.tweenGradient&&!this.morph.isPolygon){var Ma,K=Sf.stringToEasing(this.easing),aa=function(fa){Ma||(Ma=fa);fa-=Ma;if(1<=fa/g.duration)return g.finish("css");b.style.setProperty("background-image",
g.tweenGradient(K(fa/g.duration)));requestAnimationFrame(aa)};delete e.backgroundImage;delete m.backgroundImage;delete e.background;delete m.background;requestAnimationFrame(aa);v=!0}else this.tweenGradient&&(v=!0);if(b&&e&&m){l={};M={};for(var T in e)l[Sf.string.camelize(T)]=e[T];for(var U in m)M[Sf.string.camelize(U)]=m[U];try{var pa=b.animate([l,M],{duration:this.duration,easing:this.easing,fill:"forwards",composite:"replace"});pa.onfinish=function(){y();setTimeout(function(){return pa.cancel()},
200)};v=!0}catch(fa){v=!1}}v||y()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"PropertyAnimation"}}],k,{pathInPackage:function(){return"rendering/animations.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:3818,end:17317})}(void 0);Sf.PropertyAnimation=aU;Sf.PropertyAnimation=aU;Sf.PropertyAnimation=aU;var wh=
lively.FreezerRuntime.recorderFor("lively.morphic/rendering/dom-helper.js");wh.cumulativeOffset=ki;wh.createIFrame=function(f,k,n){k=void 0===k?"about:blank":k;n=void 0===n?new wh.Rectangle(0,0,700,700):n;return new Promise(function(b,e){if(!f)throw Error("Need parent element!");var m=document.createElement("iframe");m.style.position="absolute";m.style.top=n.top()+"px";m.style.left=n.left()+"px";m.style.width=n.width+"px";m.style.height=n.height+"px";m.src=k;var a=!1;m.onload=function(g){a=!0;m.onload=
null;b(m)};wh.promise.waitFor(1E3,function(){return!!a}).catch(function(g){return e(Error("iframe load timeout"))});f.appendChild(m)})};wh.requestAnimationFramePolyfill=function(f){for(var k=0,n=["ms","moz","webkit","o"],b=0;b<n.length&&!f.requestAnimationFrame;++b)f.requestAnimationFrame=f[n[b]+"RequestAnimationFrame"],f.cancelAnimationFrame=f[n[b]+"CancelAnimationFrame"]||f[n[b]+"CancelRequestAnimationFrame"];f.requestAnimationFrame||(f.requestAnimationFrame=function(e,m){var a=Date.now(),g=Math.max(0,
16-(a-k));m=f.setTimeout(function(){e(a+g)},g);k=a+g;return m});f.cancelAnimationFrame||(f.cancelAnimationFrame=function(e){clearTimeout(e)})};wh.createDOMEnvironment_browser=function(){var f;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){return 1==k.nextAddress?(f=wh.IFramedDomEnvironment,k.yield(wh.createIFrame(document.body),2)):k.return(new f(k.yieldResult))})};wh.createDOMEnvironment_node=function(){System.decanonicalize("lively.morphic/").replace(/file:\/\//,"");var f=System._nodeRequire("jsdom"),
k=f.createVirtualConsole().sendTo(console);return new Promise(function(n,b){f.env("<div></div>",["https://code.jquery.com/pep/0.4.1/pep.js"],{virtualConsole:k},function(e,m){return e?b(e):n(new wh.DomEnvironment(m,m.document,function(){return m.close()}))})})};wh.createDOMEnvironment=hk;wh.defaultDOMEnv=MC;wh.setCSSDef=function(f,k,n){wh.arr.from(f.childNodes).forEach(function(b){return f.removeChild(b)});k=n.createTextNode(k);f.styleSheet?f.styleSheet.cssText=k.nodeValue:f.appendChild(k);return f};
wh.addCSSDef=function(f,k,n){var b=n.createElement("style");b.type="text/css";f&&b.setAttribute("id",f);wh.setCSSDef(b,k,n);n.head.appendChild(b);return b};wh.addOrChangeCSSDeclaration=Yr;wh.addOrChangeLinkedCSS=Qu;wh.promise=zh;wh.obj=Ag;wh.arr=$f;wh.Rectangle=He;wh.cumulativeOffset=ki;wh.cumulativeOffset=ki;wh.createDOMEnvironment=hk;wh.createDOMEnvironment=hk;(function(f){var k=lively.FreezerRuntime.recorderFor("lively.morphic/rendering/dom-helper.js"),n=k.hasOwnProperty("DomEnvironment")&&"function"===
typeof k.DomEnvironment?k.DomEnvironment:k.DomEnvironment=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return dc(n,f,[{key:Symbol.for("lively-instance-initialize"),value:function(b,e,m){wh.requestAnimationFramePolyfill(b);this.window=b;this.document=e;this.destroyFn=m}},{key:"destroy",value:function(){"function"===typeof this.destroyFn&&this.destroyFn()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"DomEnvironment"}}],
k,{pathInPackage:function(){return"rendering/dom-helper.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:3032,end:3326})})(void 0);(function(f){var k=lively.FreezerRuntime.recorderFor("lively.morphic/rendering/dom-helper.js"),n=k.hasOwnProperty("IFramedDomEnvironment")&&"function"===typeof k.IFramedDomEnvironment?k.IFramedDomEnvironment:
k.IFramedDomEnvironment=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return dc(n,f,[{key:Symbol.for("lively-instance-initialize"),value:function(b){dc._get(Object.getPrototypeOf(n.prototype),Symbol.for("lively-instance-initialize"),this).call(this,b.contentWindow,b.contentWindow.document,function(){b.contentWindow&&b.contentWindow.close();b.parentNode&&b.parentNode.removeChild(b)});this.iframe=b}}],[{key:Symbol.for("__LivelyClassName__"),
get:function(){return"IFramedDomEnvironment"}}],k,{pathInPackage:function(){return"rendering/dom-helper.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:3328,end:3672})})(wh.DomEnvironment);wh._defaultEnv=wh._defaultEnv||void 0;wh.defaultDOMEnv=MC;wh.defaultDOMEnv=MC;wh.addOrChangeCSSDeclaration=Yr;wh.addOrChangeCSSDeclaration=
Yr;wh.addOrChangeLinkedCSS=Qu;wh.addOrChangeLinkedCSS=Qu;var mM=function(){return function(f){f=void 0===f?window.document:f;return function(k,n,b){var e=n||void 0;"undefined"===typeof b&&(b=n,e=void 0);var m=k.split(".");if(1<m.length)for(k=m.shift(),n=0;n<m.length;n++){var a=m[n],g;-1<(g=a.indexOf("#"))&&(a.slice(g+1),a.slice(0,g))}n=k.split("#");1<n.length&&(k=n[0]);k=f.createElement(k);if(e){for(var l in e)"style"!==l&&"dataset"!==l&&"attributes"!==l&&(k[l]=e[l]);if(l=e.style)for(var r in l)k.style[r]=
l[r];if(r=e.dataset)if(k.dataset)for(var v in r)k.dataset[v]=r[v];else for(v in r)k.setAttribute("data-"+v,r[v]);if(e=e.attributes)for(var y in e)e[y]&&wh.obj.isBoolean(e[y])?k.toggleAttribute(y):k.setAttribute(y,e[y])}b||(b="");if("string"===typeof b)k.appendChild(f.createTextNode(b));else if(Array.isArray(b))for(n=0;n<b.length;n++)y=b[n],k.appendChild("string"===typeof y?f.createTextNode(y):y);else k.appendChild("string"===typeof b?f.createTextNode(b):b);return k}}}();wh.hyperscriptFnForDocument=
mM;wh.hyperscriptFnForDocument=mM;wh.hyperscriptFnForDocument=mM;var Vf=lively.FreezerRuntime.recorderFor("lively.resources/src/helpers.js");Vf.applyExclude=Tj;Vf.parseQuery=Re;Vf.stringifyQuery=Rx;Vf.withRelativePartsResolved=ie;Vf._relativePathBetween_checkPathes=function(f,k){f.startsWith("/")&&(f=f.slice(1));k.startsWith("/")&&(k=k.slice(1));f=f.split("/");k=k.split("/");for(var n=0;n<k.length&&f[n]&&f[n]==k[n];n++);return"../".repeat(Math.max(0,k.length-n-1))+f.splice(n,f.length).join("/")};
Vf.relativePathBetween=sw;Vf.join=Yz;Vf.parent=ad;Vf.parents=Zz;Vf.resource=la;Vf.createFiles=q;Vf.registerExtension=w;Vf.unregisterExtension=B;Vf.applyExclude=Tj;Vf.applyExclude=Tj;Vf.parseQuery=Re;Vf.parseQuery=Re;Vf.stringifyQuery=Rx;Vf.stringifyQuery=Rx;Vf.slashEndRe=/\/+$/;Vf.slashStartRe=/^\/+/;Vf.protocolRe=/^[a-z0-9-_\.]+:/;Vf.urlRe=/^([^:\/]+):\/\/([^\/]*)(.*)/;Vf.slashslashRe=/^\/\/[^\/]+/;Vf.pathDotRe=/\/\.\//g;Vf.pathDoubleDotRe=/\/[^\/]+\/\.\./;Vf.pathDoubleSlashRe=/(^|[^:])[\/]+/g;Vf.withRelativePartsResolved=
ie;Vf.withRelativePartsResolved=ie;Vf.relativePathBetween=sw;Vf.relativePathBetween=sw;Vf.join=Yz;Vf.join=Yz;Vf.parent=ad;Vf.parent=ad;Vf.parents=Zz;Vf.parents=Zz;var cB=[];Vf.extensions=cB;Vf.extensions=cB;Vf.extensions=cB;Vf.resource=la;Vf.resource=la;Vf.createFiles=q;Vf.createFiles=q;Vf.registerExtension=w;Vf.registerExtension=w;Vf.unregisterExtension=B;Vf.unregisterExtension=B;var nM=/^file:\/\/\/[a-z]:\//i;Vf.windowsURLPrefixRe=nM;Vf.windowsURLPrefixRe=nM;Vf.windowsURLPrefixRe=nM;var oM=/^[a-z]:\//i;
Vf.windowsPathPrefixRe=oM;Vf.windowsPathPrefixRe=oM;Vf.windowsPathPrefixRe=oM;var pM=/^[a-z]:\/$/i;Vf.windowsRootPathRe=pM;Vf.windowsRootPathRe=pM;Vf.windowsRootPathRe=pM;var Mj=lively.FreezerRuntime.recorderFor("lively.resources/src/resource.js");Mj.nyi=function(f,k){throw Error(k+" for "+f.constructor.name+" not yet implemented");};Mj.resource=la;Mj.parseQuery=Re;Mj.withRelativePartsResolved=ie;Mj.relativePathBetween=sw;Mj.windowsPathPrefixRe=oM;Mj.stringifyQuery=Rx;Mj.slashEndRe=/\/+$/;Mj.slashStartRe=
/^\/+/;Mj.protocolRe=/^[a-z0-9-_\.]+:/;Mj.slashslashRe=/^\/\/[^\/]+/;var Tg=function(f,k){if(!f)throw Error("Cannot create resource without url");this.url=String(f);this.binary=!1;this.linkCount=this._isLink=this._isDirectory=this.mode=this.group=this.user=this.contentType=this.type=this.size=this.etag=this.created=this.lastModified=void 0};Tg.fromProps=function(f){f=void 0===f?{}:f;return(new this(f.url)).assignProperties(f)};Tg.prototype.equals=function(f){if(!f||this.constructor!==f.constructor)return!1;
var k=this.url;f=f.url;"/"===k[k.length-1]&&(k=k.slice(0,-1));"/"===f[f.length-1]&&(f=f.slice(0,-1));return k===f};Tg.prototype.toString=function(){return this.constructor.name+'("'+this.url+'")'};Tg.prototype.newResource=function(f){return Mj.resource(f,this)};Tg.prototype.path=function(){var f=this.url.replace(Mj.protocolRe,"").replace(Mj.slashslashRe,"");return""===f?"/":f};Tg.prototype.pathWithoutQuery=function(){return this.path().split("?")[0]};Tg.prototype.name=function(){var f=this.path(),
k=f.lastIndexOf("?");-1<k&&(f=f.slice(0,k));f.endsWith("/")&&(f=f.slice(0,-1));f=f.split("/");return decodeURIComponent(f[f.length-1])};Tg.prototype.ext=function(){var f=this.url;if(f.endsWith("/"))return"";f=$jscomp.makeIterator(f.match(/\.([^\/\.]+$)/)||["",""]);f.next();return f.next().value.toLowerCase()};Tg.prototype.nameWithoutExt=function(){var f=this.name(),k=f.lastIndexOf(".");0<k&&(f=f.slice(0,k));return f};Tg.prototype.scheme=function(){return this.url.split(":")[0]};Tg.prototype.host=
function(){var f=this.url.indexOf("://");if(-1===f)return null;f=this.url.slice(f+3);var k=f.indexOf("/");return f.slice(0,-1<k?k:f.length)};Tg.prototype.schemeAndHost=function(){return this.isRoot()?this.asFile().url:this.url.slice(0,this.url.length-this.path().length)};Tg.prototype.parent=function(){return this.isRoot()?null:this.newResource(this.url.split("?")[0].replace(Mj.slashEndRe,"").split("/").slice(0,-1).join("/")+"/")};Tg.prototype.parents=function(){for(var f=[],k=this.parent();k;)f.unshift(k),
k=k.parent();return f};Tg.prototype.isParentOf=function(f){var k=this;return f.schemeAndHost()===this.schemeAndHost()&&f.parents().some(function(n){return n.equals(k)})};Tg.prototype.query=function(){return Mj.parseQuery(this.url)};Tg.prototype.withQuery=function(f){var k=Object.assign({},this.query(),{},f);f=$jscomp.makeIterator(this.url.split("?")).next().value;k=Mj.stringifyQuery(k);return this.newResource(f+"?"+k)};Tg.prototype.commonDirectory=function(f){if(f.schemeAndHost()!==this.schemeAndHost())return null;
if(this.isDirectory()&&this.equals(f))return this;if(this.isRoot())return this.asDirectory();if(f.isRoot())return f.asDirectory();f=f.parents();for(var k=this.parents(),n=this.root(),b=0;b<k.length;b++){var e=k[b],m=f[b];if(!m||!e.equals(m))break;n=e}return n};Tg.prototype.withRelativePartsResolved=function(){var f=this.path(),k=Mj.withRelativePartsResolved(f);if(k===f)return this;k.startsWith("/")&&(k=k.slice(1));k[1]===":".startsWith("/")?k=k.slice(1):":"===k[1]&&k.match(Mj.windowsPathPrefixRe)&&
(k=k.slice(3));return this.newResource(this.root().url+k)};Tg.prototype.relativePathFrom=function(f){return Mj.relativePathBetween(f.url,this.url)};Tg.prototype.withPath=function(f){return(this.isRoot()?this:this.root()).join(f)};Tg.prototype.join=function(f){return this.newResource(this.url.replace(Mj.slashEndRe,"")+"/"+f.replace(Mj.slashStartRe,""))};Tg.prototype.isRoot=function(){return"/"===this.path()};Tg.prototype.isFile=function(){return!this.isRoot()&&!this.url.match(Mj.slashEndRe)};Tg.prototype.isDirectory=
function(){return!this.isFile()};Tg.prototype.asDirectory=function(){return this.url.endsWith("/")?this:this.newResource(this.url.replace(Mj.slashEndRe,"")+"/")};Tg.prototype.root=function(){if(this.isRoot())return this;var f=this.url.slice(0,-this.path().length);return this.newResource(f+"/")};Tg.prototype.asFile=function(){return this.url.endsWith("/")?this.newResource(this.url.replace(Mj.slashEndRe,"")):this};Tg.prototype.assignProperties=function(f){for(var k in f)if("url"!==k){var n=k;if("isLink"===
k||"isDirectory"===k)n="_"+k;this[n]=f[k]}return this};Tg.prototype.ensureExistance=function(f){var k=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(n){switch(n.nextAddress){case 1:return n.yield(k.exists(),2);case 2:return n.yieldResult?n.return(k):n.yield(k.parent().ensureExistance(),3);case 3:return k.isFile()?n.yield(k.write(f||""),5):n.yield(k.mkdir(),5);case 5:return n.return(k)}})};Tg.prototype.copyTo=function(f,k){k=void 0===k?!0:k;var n=this,b,e,m,a,g;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){switch(l.nextAddress){case 1:if(n.isFile()){m=
f.isFile()?f:f.join(n.name());if(!k){l.jumpTo(8);break}return l.yield(m.parent().ensureExistance(),8)}if(!f.isDirectory())throw Error("Cannot copy a directory to a file!");return l.yield(n.dirList("infinity"),4);case 4:return b=l.yieldResult,e=b.map(function(r){return f.join(r.relativePathFrom(n))}),l.yield(f.ensureExistance(),5);case 5:return l.yield(b.reduceRight(function(r,v,y){return function(){return Promise.resolve(v.isDirectory()&&e[y].ensureExistance()).then(r)}},function(){return Promise.resolve()})(),
6);case 6:return l.yield(b.reduceRight(function(r,v,y){return function(){return Promise.resolve(v.isFile()&&v.copyTo(e[y],!1)).then(r)}},function(){return Promise.resolve()})(),3);case 8:return a=m,g=a.write,l.yield(n.read(),11);case 11:return l.yield(g.call(a,l.yieldResult),3);case 3:return l.return(n)}})};Tg.prototype.rename=function(f){var k=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(n){if(1==n.nextAddress)return n.yield(k.copyTo(f),2);k.remove();return n.return(f)})};Tg.prototype.beBinary=
function(f){return this.setBinary(!0)};Tg.prototype.setBinary=function(f){this.binary=f;return this};Tg.prototype.read=function(){var f=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){Mj.nyi(f,"read");k.jumpToEnd()})};Tg.prototype.write=function(){var f=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){Mj.nyi(f,"write");k.jumpToEnd()})};Tg.prototype.mkdir=function(){var f=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){Mj.nyi(f,"mkdir");k.jumpToEnd()})};
Tg.prototype.exists=function(){var f=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){Mj.nyi(f,"exists");k.jumpToEnd()})};Tg.prototype.remove=function(){var f=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){Mj.nyi(f,"remove");k.jumpToEnd()})};Tg.prototype.dirList=function(f,k){var n=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){Mj.nyi(n,"dirList");b.jumpToEnd()})};Tg.prototype.readProperties=function(f){var k=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(n){Mj.nyi(k,
"readProperties");n.jumpToEnd()})};Tg.prototype.writeJson=function(f,k){return this.write((void 0===k?0:k)?JSON.stringify(f,null,2):JSON.stringify(f))};Tg.prototype.readJson=function(f){var k=this,n,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){return 1==e.nextAddress?(n=JSON,b=n.parse,e.yield(k.read(),2)):e.return(b.call(n,e.yieldResult))})};Tg.prototype.__serialize__=function(){return{__expr__:'var r = null; try { r = resource("'+this.url+'");} catch (err) {}; r',bindings:{"lively.resources":["resource"]}}};
$jscomp.global.Object.defineProperties(Tg.prototype,{isResource:{configurable:!0,enumerable:!0,get:function(){return!0}},canDealWithJSON:{configurable:!0,enumerable:!0,get:function(){return!1}}});Da("bF",Tg);Mj.Resource=Tg;Mj.default=Tg;var jh=lively.FreezerRuntime.recorderFor("lively.resources/src/http-resource.js");jh.davNs=function(f){return(f=f.match(/\/([a-z]+?):multistatus/i))?f[1]:"d"};jh.propfindRequestPayload=function(){return'<?xml version="1.0" encoding="utf-8" ?>\n    <D:propfind xmlns:D="DAV:">\n      <D:prop>\n        <D:creationdate/>\n        <D:getcontentlength/>\n        <D:getcontenttype/>\n        <D:getetag/>\n        <D:getlastmodified/>\n        <D:resourcetype/>\n      </D:prop>\n    </D:propfind>'};
jh.readPropertyNode=function(f,k){k=void 0===k?{}:k;var n=f.tagName.replace(/[^:]+:/,"");n=jh.propertyNodeMap[n];f=f.textContent;switch(n){case "lastModified":case "created":f=new Date(f);break;case "size":f=Number(f)}k[n]=f;return k};jh.readXMLPropfindResult=function(f){var k=(new DOMParser).parseFromString(f,"text/xml");f=jh.davNs(f);k=(new jh.XPathQuery("/"+f+":multistatus/"+f+":response")).findAll(k.documentElement);var n=new jh.XPathQuery(f+":href"),b=new jh.XPathQuery(f+":propstat/"+f+":prop");
return k.map(function(e){var m=b.findFirst(e);m=Array.from(m.childNodes).reduce(function(a,g){return jh.readPropertyNode(g,a)},{});e=n.findFirst(e);m.url=e.textContent||e.text;return m})};jh.defaultOrigin=function(){return document.location.origin};jh.makeRequest=function(f,k,n,b,e){b=void 0===b?{}:b;e=f.url;var m=f.useCors,a=f.useProxy,g=f.headers;m="undefined"!==typeof m?m:!0;k={method:void 0===k?"GET":k};if("undefined"!==typeof a?a:1)Object.assign(b,{pragma:"no-cache","cache-control":"no-cache",
"x-lively-proxy-request":e}),e=f.proxyDomain||jh.defaultOrigin();m&&(k.mode="cors");n&&(k.body=n);k.redirect="follow";k.headers=Object.assign({},b,{},g);return fetch(e,k)};jh.upload=D;jh.Resource=Tg;jh.applyExclude=Tj;jh.promise=zh;jh.num=Nm;var $G=function(f){this.expression=f;this.contextNode=null;this.xpe=new XPathEvaluator};$G.prototype.establishContext=function(f){this.nsResolver||(f=f.ownerDocument?f.ownerDocument.documentElement:f.documentElement,f!==this.contextNode&&(this.contextNode=f,this.nsResolver=
this.xpe.createNSResolver(f)))};$G.prototype.manualNSLookup=function(){this.nsResolver=function(f){return Namespace[f.toUpperCase()]||null};return this};$G.prototype.findAll=function(f,k){this.establishContext(f);f=this.xpe.evaluate(this.expression,f,this.nsResolver,XPathResult.ANY_TYPE,null);for(var n=[],b;b=f.iterateNext();)n.push(b);return 0<n.length||void 0===k?n:k};$G.prototype.findFirst=function(f){this.establishContext(f);return this.xpe.evaluate(this.expression,f,this.nsResolver,XPathResult.ANY_TYPE,
null).iterateNext()};jh.XPathQuery=$G;jh.propertyNodeMap={getlastmodified:"lastModified",creationDate:"created",getetag:"etag",getcontentlength:"size",resourcetype:"type",getcontenttype:"contentType"};jh.binaryExtensions="3ds 3g2 3gp 7z a aac adp ai aif aiff alz ape apk ar arj asf au avi bak bh bin bk bmp btif bz2 bzip2 cab caf cgm class cmx cpio cr2 csv cur dat deb dex djvu dll dmg dng doc docm docx dot dotm dra DS_Store dsk dts dtshd dvb dwg dxf ecelp4800 ecelp7470 ecelp9600 egg eol eot epub exe f4v fbs fh fla flac fli flv fpx fst fvt g3 gif graffle gz gzip h261 h263 h264 icns ico ief img ipa iso jar jpeg jpg jpgv jpm jxr key ktx lha lvp lz lzh lzma lzo m3u m4a m4v mar mdi mht mid midi mj2 mka mkv mmr mng mobi mov movie mp3 mp4 mp4a mpeg mpg mpga mxu nef npx numbers o oga ogg ogv otf pages pbm pcx pdf pea pgm pic png pnm pot potm potx ppa ppam ppm pps ppsm ppsx ppt pptm pptx psd pya pyc pyo pyv qt rar ras raw rgb rip rlc rmf rmvb rtf rz s3m s7z scpt sgi shar sil sketch slk smv so sub swf tar tbz tbz2 tga tgz thmx tif tiff tlz ttc ttf txz udf uvh uvi uvm uvp uvs uvu viv vob war wav wax wbmp wdp weba webm webp whl wim wm wma wmv wmx woff woff2 wvx xbm xif xla xlam xls xlsb xlsm xlsx xlt xltm xltx xm xmind xpi xpm xwd xz z zip zipx".split(" ");
jh.isNode="undefined"!==typeof System?System.get("@system-env").node:"undefined"!==typeof global&&"undefined"!==typeof process;jh.upload=D;jh.upload=D;var bn=function(f,k){k=void 0===k?{}:k;f=jh.Resource.call(this,f,k)||this;f.onLoad=k.onLoad||function(){};f.onProgress=k.onProgress||function(){};f.useProxy=k.hasOwnProperty("useProxy")?k.useProxy:!1;f.proxyDomain=k.proxyDomain||void 0;f.useCors=k.hasOwnProperty("useCors")?k.useCors:!1;f.headers=k.headers||{};f.binary=f.isFile()?jh.binaryExtensions.includes(f.ext()):
!1;f.errorOnHTTPStatusCodes=k.hasOwnProperty("errorOnHTTPStatusCodes")?k.errorOnHTTPStatusCodes:!0;return f};$jscomp.inherits(bn,jh.Resource);bn.prototype.join=function(f){return Object.assign(jh.Resource.prototype.join.call(this,f),{headers:this.headers,useCors:this.useCors,useProxy:this.useProxy,proxyDomain:this.proxyDomain})};bn.prototype.makeProxied=function(f){void 0!==f&&(this.proxyDomain=f);return this.useProxy?this:new this.constructor(this.url,{headers:this.headers,useCors:this.useCors,useProxy:!0,
proxyDomain:this.proxyDomain})};bn.prototype.noErrorOnHTTPStatusCodes=function(){this.errorOnHTTPStatusCodes=!1;return this};bn.prototype.read=function(){var f=this,k;return $jscomp.asyncExecutePromiseGeneratorProgram(function(n){if(1==n.nextAddress)return n.yield(jh.makeRequest(f),2);k=n.yieldResult;if(!k.ok&&f.errorOnHTTPStatusCodes)throw Error("Cannot read "+f.url+": "+k.statusText+" "+k.status);if(!f.binary)return n.return(k.text());if("blob"===f.binary)return n.return(k.blob());if("function"===
typeof k.arrayBuffer)return n.return(k.arrayBuffer());if("function"===typeof k.buffer)return n.return(k.buffer());throw Error("Don't now how to read binary resource "+f+"'");})};bn.prototype.write=function(f){var k=this,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){if(1==b.nextAddress){if(!k.isFile())throw Error("Cannot write a non-file: "+k.url);return b.yield(jh.upload(k,f),2)}n=b.yieldResult;if(!jh.num.between(n.status,200,300)&&k.errorOnHTTPStatusCodes)throw Error("Cannot write "+
k.url+": "+n.statusText+" "+n.status);return b.return(k)})};bn.prototype.mkdir=function(){var f=this,k;return $jscomp.asyncExecutePromiseGeneratorProgram(function(n){if(1==n.nextAddress){if(f.isFile())throw Error("Cannot mkdir on a file: "+f.url);return n.yield(jh.makeRequest(f,"MKCOL"),2)}k=n.yieldResult;if(!k.ok&&f.errorOnHTTPStatusCodes)throw Error("Cannot create directory "+f.url+": "+k.statusText+" "+k.status);return n.return(f)})};bn.prototype.exists=function(){var f=this,k;return $jscomp.asyncExecutePromiseGeneratorProgram(function(n){if(1==
n.nextAddress)return f.isRoot()?(k=!0,n.jumpTo(2)):n.yield(jh.makeRequest(f,"HEAD"),3);2!=n.nextAddress&&(k=!!n.yieldResult.ok);return n.return(k)})};bn.prototype.remove=function(){var f=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){return 1==k.nextAddress?k.yield(jh.makeRequest(f,"DELETE"),2):k.return(f)})};bn.prototype._propfind=function(){var f=this,k,n,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(1==e.nextAddress)return e.yield(jh.makeRequest(f,"PROPFIND",
null,{"Content-Type":"text/xml"}),2);if(3!=e.nextAddress){k=e.yieldResult;if(!k.ok&&f.errorOnHTTPStatusCodes)throw Error("Error in dirList for "+f.url+": "+k.statusText);return e.yield(k.text(),3)}n=e.yieldResult;b=f.root();return e.return(jh.readXMLPropfindResult(n).map(function(m){return b.join(m.url).assignProperties(m)}))})};bn.prototype.dirList=function(f,k){f=void 0===f?1:f;k=void 0===k?{}:k;var n=this,b,e,m,a,g;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){if(1==l.nextAddress){if("number"!==
typeof f&&"infinity"!==f)throw Error("dirList \u2013 invalid depth argument: "+f);b=k;e=b.exclude;0>=f&&(f=1);return 1===f?l.yield(n._propfind(),5):l.yield(n.dirList(1,k),4)}if(5!=l.nextAddress)return m=l.yieldResult,a=m.filter(function(r){return r.isDirectory()}),l.return(Promise.all(a.map(function(r){return r.dirList("number"===typeof f?f-1:f,k)})).then(function(r){return r.reduce(function(v,y){return v.concat(y)},m)}));g=l.yieldResult;g.shift();e&&(g=jh.applyExclude(e,g));return l.return(g)})};
bn.prototype.readProperties=function(f){var k=this,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){if(1==b.nextAddress)return b.yield(k._propfind(),2);n=b.yieldResult[0];return b.return(k.assignProperties(n))})};bn.prototype.post=function(f){f=void 0===f?null:f;var k=this,n,b,e;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){switch(m.nextAddress){case 1:return"string"!==typeof f&&(f=JSON.stringify(f)),m.yield(jh.makeRequest(k,"POST",f,{}),2);case 2:return n=m.yieldResult,
m.setCatchFinallyBlocks(3),m.yield(n.text(),5);case 5:b=m.yieldResult;m.leaveTryBlock(4);break;case 3:m.enterCatchBlock();case 4:if(b&&"application/json"===n.headers.get("content-type"))try{e=JSON.parse(b)}catch(a){}if(!n.ok&&k.errorOnHTTPStatusCodes)throw Error("Error in POST "+k.url+": "+(b||n.statusText));return m.return(e||b)}})};bn.prototype.copyTo=function(f,k){k=void 0===k?!0:k;var n=this,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(n.isFile()&&(b=f.isFile()?f:f.join(n.name()),
jh.isNode)){if(b.isHTTPResource)return e.return(n._copyTo_file_nodejs_http(b,k));if(b.isNodeJSFileResource)return e.return(n._copyTo_file_nodejs_fs(b,k))}return e.return(jh.Resource.prototype.copyTo.call(n,f,k))})};bn.prototype._copyFrom_file_nodejs_fs=function(f,k){k=void 0===k?!0:k;var n=this,b,e,m;return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){if(1==a.nextAddress)return k?a.yield(n.parent().ensureExistance(),2):a.jumpTo(2);if(4!=a.nextAddress)return e=f._createReadStream(),e.on("error",
function(g){return b=g}),a.yield(jh.makeRequest(n,"PUT",e),4);m=a.yieldResult;if(b)throw b;if(!m.ok&&n.errorOnHTTPStatusCodes)throw Error("copyTo: Cannot GET: "+m.statusText+" "+m.status);return a.return(n)})};bn.prototype._copyTo_file_nodejs_fs=function(f,k){k=void 0===k?!0:k;var n=this,b,e;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){if(1==m.nextAddress)return k?m.yield(f.parent().ensureExistance(),2):m.jumpTo(2);if(4!=m.nextAddress)return m.yield(jh.makeRequest(n,"GET"),4);b=
m.yieldResult;if(!b.ok&&n.errorOnHTTPStatusCodes)throw Error("copyTo: Cannot GET: "+b.statusText+" "+b.status);return m.return(new Promise(function(a,g){return b.body.pipe(f._createWriteStream()).on("error",function(l){return e=l}).on("finish",function(){return e?g(e):a(n)})}))})};bn.prototype._copyTo_file_nodejs_http=function(f,k){k=void 0===k?!0:k;var n=this,b,e;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){switch(m.nextAddress){case 1:if(!k){m.jumpTo(2);break}return m.yield(f.parent().ensureExistance(),
2);case 2:return m.yield(jh.makeRequest(n,"GET"),4);case 4:b=m.yieldResult;if(!b.ok&&n.errorOnHTTPStatusCodes)throw Error("copyTo: Cannot GET: "+b.statusText+" "+b.status);return m.yield(jh.makeRequest(f,"PUT",b.body),5);case 5:e=m.yieldResult;if(!b.ok&&n.errorOnHTTPStatusCodes)throw Error("copyTo: Cannot PUT: "+e.statusText+" "+e.status);m.jumpToEnd()}})};$jscomp.global.Object.defineProperties(bn.prototype,{isHTTPResource:{configurable:!0,enumerable:!0,get:function(){return!0}}});jh.WebDAVResource=
bn;var qM={name:"http-webdav-resource",matches:function(f){return f.startsWith("http:")||f.startsWith("https:")},resourceClass:jh.WebDAVResource};jh.resourceExtension=qM;jh.resourceExtension=qM;jh.resourceExtension=qM;jh.default=bn;var Mt=System.get("@system-env").node?require("fs"):{},Ika=Mt.readFile,Jka=Mt.writeFile,Kka=Mt.exists,Lka=Mt.readdir,Mka=Mt.mkdir,Nka=Mt.rmdir,Oka=Mt.unlink,Pka=Mt.lstat,Qka=Mt.rename,Rka=Mt.createWriteStream,Ska=Mt.createReadStream,pg=lively.FreezerRuntime.recorderFor("lively.resources/src/fs-resource.js");
pg.wrapInPromise=function(f){return function(k){for(var n=[],b=0;b<arguments.length;++b)n[b-0]=arguments[b];return new Promise(function(e,m){return f.apply(null,n.concat(function(a,g){return a?m(a):e(g)}))})}};pg.Resource=Tg;pg.applyExclude=Tj;pg.windowsURLPrefixRe=nM;pg.windowsRootPathRe=pM;pg.createWriteStream=Rka;pg.createReadStream=Ska;pg.readFile=Ika;pg.writeFile=Jka;pg.exists=Kka;pg.mkdir=Mka;pg.rmdir=Nka;pg.unlink=Oka;pg.readdir=Lka;pg.lstat=Pka;pg.rename=Qka;pg.readFileP=pg.wrapInPromise(pg.readFile);
pg.writeFileP=pg.wrapInPromise(pg.writeFile);pg.existsP=function(f){return new Promise(function(k,n){return pg.exists(f,function(b){return k(!!b)})})};pg.readdirP=pg.wrapInPromise(pg.readdir);pg.mkdirP=pg.wrapInPromise(pg.mkdir);pg.rmdirP=pg.wrapInPromise(pg.rmdir);pg.unlinkP=pg.wrapInPromise(pg.unlink);pg.lstatP=pg.wrapInPromise(pg.lstat);pg.renameP=pg.wrapInPromise(pg.rename);var ko=function(){return pg.Resource.apply(this,arguments)||this};$jscomp.inherits(ko,pg.Resource);ko.prototype.path=function(){return this.url.replace("file://",
"")};ko.prototype.stat=function(){var f=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){return k.return(pg.lstatP(f.path()))})};ko.prototype.read=function(){var f=this,k;return $jscomp.asyncExecutePromiseGeneratorProgram(function(n){k=pg.readFileP(f.path());return n.return(f.binary?k:k.then(String))})};ko.prototype.write=function(f){var k=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(n){if(1==n.nextAddress){if(k.isDirectory())throw Error("Cannot write into a directory: "+
k.path());return n.yield(pg.writeFileP(k.path(),f),2)}return n.return(k)})};ko.prototype.mkdir=function(){var f=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){if(1==k.nextAddress){if(f.isFile())throw Error("Cannot mkdir on a file: "+f.path());return k.yield(pg.mkdirP(f.path()),2)}return k.return(f)})};ko.prototype.exists=function(){var f=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){return k.return(f.isRoot()?!0:pg.existsP(f.path()))})};ko.prototype.dirList=
function(f,k){f=void 0===f?1:f;k=void 0===k?{}:k;var n=this,b,e,m,a,g,l,r,v,y,A,E,F;return $jscomp.asyncExecutePromiseGeneratorProgram(function(H){switch(H.nextAddress){case 1:if("number"!==typeof f&&"infinity"!==f)throw Error("dirList \u2013 invalid depth argument: "+f);b=k;e=b.exclude;0>=f&&(f=1);if(1!==f){H.jumpTo(2);break}m=[];a=$jscomp;g=a.makeIterator;return H.yield(pg.readdirP(n.path()),3);case 3:l=g.call(a,H.yieldResult),r=l.next();case 4:if(r.done){H.jumpTo(6);break}v=r.value;y=n.join(v);
return H.yield(y.stat(),7);case 7:A=H.yieldResult;y=A.isDirectory()?y.asDirectory():y;y._assignPropsFromStat(A);m.push(y);r=l.next();H.jumpTo(4);break;case 6:return e&&(m=pg.applyExclude(e,m)),H.return(m);case 2:return H.yield(n.dirList(1,k),8);case 8:return E=H.yieldResult,F=E.filter(function(I){return I.isDirectory()}),H.return(Promise.all(F.map(function(I){return I.dirList("number"===typeof f?f-1:f,k)})).then(function(I){return I.reduce(function(M,N){return M.concat(N)},E)}))}})};ko.prototype.isEmptyDirectory=
function(){var f=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){return 1==k.nextAddress?k.yield(f.dirList(),2):k.return(0===k.yieldResult.length)})};ko.prototype.rename=function(f){var k=this,n,b,e,m,a,g,l,r,v,y,A,E,F;return $jscomp.asyncExecutePromiseGeneratorProgram(function(H){switch(H.nextAddress){case 1:if(!(f instanceof k.constructor))return H.return(pg.Resource.prototype.rename.call(k,f));if(k.isFile()){f=f.asFile();pg.renameP(k.path(),f.path());H.jumpTo(2);break}f=f.asDirectory();
return H.yield(f.ensureExistance(),3);case 3:return n=[],b=[],e=$jscomp,m=e.makeIterator,H.yield(k.dirList("infinity"),4);case 4:a=m.call(e,H.yieldResult);for(g=a.next();!g.done;g=a.next())l=g.value,l.isDirectory()?b.push(l):n.push(l);r=$jscomp.makeIterator(b);v=r.next();case 5:if(v.done){H.jumpTo(7);break}y=v.value;return H.yield(f.join(y.relativePathFrom(k)).ensureExistance(),6);case 6:v=r.next();H.jumpTo(5);break;case 7:A=$jscomp.makeIterator(n),E=A.next();case 9:if(E.done)return H.yield(k.remove(),
2);F=E.value;return H.yield(F.rename(f.join(F.relativePathFrom(k))),10);case 10:E=A.next();H.jumpTo(9);break;case 2:return H.return(f)}})};ko.prototype.remove=function(){var f=this,k,n,b,e,m;return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){switch(a.nextAddress){case 1:return a.yield(f.exists(),2);case 2:if(!a.yieldResult){a.jumpTo(3);break}return f.isDirectory()?(k=$jscomp,n=k.makeIterator,a.yield(f.dirList(),7)):a.yield(pg.unlinkP(f.path()),3);case 7:b=n.call(k,a.yieldResult),e=b.next();
case 8:if(e.done)return a.yield(pg.rmdirP(f.path()),3);m=e.value;return a.yield(m.remove(),9);case 9:e=b.next();a.jumpTo(8);break;case 3:return a.return(f)}})};ko.prototype.readProperties=function(){var f=this,k,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){return 1==b.nextAddress?(k=f,n=k._assignPropsFromStat,b.yield(f.stat(),2)):b.return(n.call(k,b.yieldResult))})};ko.prototype.copyTo=function(f,k){k=void 0===k?!0:k;var n=this,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){return n.isFile()&&
(b=f.isFile()?f:f.join(n.name()),b.isHTTPResource)?e.return(b._copyFrom_file_nodejs_fs(n,k=!0)):e.return(pg.Resource.prototype.copyTo.call(n,f,k))})};ko.prototype._assignPropsFromStat=function(f){return this.assignProperties({lastModified:f.mtime,created:f.ctime,size:f.size,type:f.isDirectory()?"directory":"file",isLink:f.isSymbolicLink()})};ko.prototype._createWriteStream=function(){return pg.createWriteStream(this.path())};ko.prototype._createReadStream=function(){return pg.createReadStream(this.path())};
$jscomp.global.Object.defineProperties(ko.prototype,{isNodeJSFileResource:{configurable:!0,enumerable:!0,get:function(){return!0}}});pg.NodeJSFileResource=ko;var aH=function(f,k){"file:///"!==f.slice(0,8)&&"file://"===f.slice(0,7)&&(f="file:///"+f.slice(7));f.includes("\\")&&(f=f.replace(/\\/g,"/"));return pg.NodeJSFileResource.call(this,f,k)||this};$jscomp.inherits(aH,pg.NodeJSFileResource);aH.prototype.path=function(){return this.url.replace("file:///","")};aH.prototype.isRoot=function(){return!!this.path().match(pg.windowsRootPathRe)};
aH.prototype.root=function(){if(this.isRoot())return this;console.log(this.url);var f=this.url.match(pg.windowsURLPrefixRe);if(f)return this.newResource(f[0]);throw Error("Could not determine root path of windows file resource for url "+this.url);};pg.NodeJSWindowsFileResource=aH;var rM={name:"nodejs-file-resource",matches:function(f){return f.startsWith("file:")},resourceClass:"undefined"!=typeof process&&"win32"===process.platform?pg.NodeJSWindowsFileResource:pg.NodeJSFileResource};pg.resourceExtension=
rM;pg.resourceExtension=rM;pg.resourceExtension=rM;var wl=lively.FreezerRuntime.recorderFor("lively.resources/src/local-resource.js");wl.applyExclude=function(f,k){return k?"string"===typeof k?!f.url.includes(k):"function"===typeof k?!k(f):k instanceof RegExp?!k.test(f.url):!0:!0};wl.Resource=Tg;wl.createFiles=q;wl.debug=!1;wl.slashRe=/\//g;var As=function(f,k){k=void 0===k?{}:k;if(!f||"string"!==typeof f)throw Error("LocalResourceInMemoryBackend needs name!");this.name=f;this._filespec=k};As.removeHost=
function(f){delete this.hosts[f]};As.ensure=function(f,k){var n=this;k=void 0===k?{}:k;var b=this.named(k.host);return Promise.resolve().then(function(){return f?wl.createFiles("local://"+b.name,f):null}).then(function(){return n})};As.named=function(f){f||(f="default");return this.hosts[f]||(this.hosts[f]=new this(f))};As.prototype.get=function(f){return this._filespec[f]};As.prototype.set=function(f,k){this._filespec[f]=k};As.prototype.write=function(f,k){var n=this._filespec[f];n||(n=this._filespec[f]=
{created:new Date});n.content=k;n.isDirectory=!1;n.lastModified=new Date};As.prototype.read=function(f){return(f=this._filespec[f])&&f.content?f.content:""};As.prototype.mkdir=function(f){var k=this._filespec[f];k&&k.isDirectory||(k||(k=this._filespec[f]={created:new Date}),k.content&&delete k.content,k.isDirectory=!0,k.lastModified=new Date)};As.prototype.partialFilespec=function(f,k){f=void 0===f?"/":f;k=void 0===k?Infinity:k;for(var n={},b=this.filespec,e=Object.keys(b),m=0;m<e.length;m++){var a=
e[m];if(a.startsWith(f)&&f!==a){var g=a.slice(f.length);(g.includes("/")?g.match(wl.slashRe).length+1:1)>k||(n[a]=b[a])}}return n};$jscomp.global.Object.defineProperties(As.prototype,{filespec:{configurable:!0,enumerable:!0,get:function(){return this._filespec},set:function(f){this._filespec=f}}});$jscomp.global.Object.defineProperties(As,{hosts:{configurable:!0,enumerable:!0,get:function(){return this._hosts||(this._hosts={})}}});wl.LocalResourceInMemoryBackend=As;var Nt=function(){return wl.Resource.apply(this,
arguments)||this};$jscomp.inherits(Nt,wl.Resource);Nt.prototype.read=function(){return Promise.resolve(this.localBackend.read(this.path()))};Nt.prototype.write=function(f){wl.debug&&console.log("["+this+"] write");if(this.isDirectory())throw Error("Cannot write into a directory! ("+this.url+")");var k=this.localBackend.get(this.path());if(k&&k.isDirectory)throw Error(this.url+" already exists and is a directory (cannot write into it!)");this.localBackend.write(this.path(),f);return Promise.resolve(this)};
Nt.prototype.mkdir=function(){wl.debug&&console.log("["+this+"] mkdir");if(!this.isDirectory())throw Error("Cannot mkdir a file! ("+this.url+")");var f=this.localBackend.get(this.path());if(f&&f.isDirectory)return Promise.resolve(this);if(f&&!f.isDirectory)throw Error(this.url+" already exists and is a file (cannot mkdir it!)");this.localBackend.mkdir(this.path());return Promise.resolve(this)};Nt.prototype.exists=function(){wl.debug&&console.log("["+this+"] exists");return Promise.resolve(this.isRoot()||
this.path()in this.localBackend.filespec)};Nt.prototype.remove=function(){var f=this;wl.debug&&console.log("["+this+"] remove");var k=this.path();Object.keys(this.localBackend.filespec).forEach(function(n){return n.startsWith(k)&&delete f.localBackend.filespec[n]});return Promise.resolve(this)};Nt.prototype.readProperties=function(){wl.debug&&console.log("["+this+"] readProperties");throw Error("not yet implemented");};Nt.prototype.dirList=function(f,k){f=void 0===f?1:f;k=void 0===k?{}:k;wl.debug&&
console.log("["+this+"] dirList");if(!this.isDirectory())return this.asDirectory().dirList(f,k);k=k.exclude;var n=this.path(),b=[],e=Object.keys(this.localBackend.filespec);"infinity"===f&&(f=Infinity);for(var m={},a=0;a<e.length;m={$jscomp$loop$prop$dirToChild$2214:m.$jscomp$loop$prop$dirToChild$2214},a++){var g=e[a];g.startsWith(n)&&n!==g&&(g=g.slice(n.length),(g.includes("/")?g.match(wl.slashRe).length+1:1)>f?(m.$jscomp$loop$prop$dirToChild$2214=this.join(g.split("/").slice(0,f).join("/")+"/"),
b.some(function(l){return function(r){return r.equals(l.$jscomp$loop$prop$dirToChild$2214)}}(m))||b.push(m.$jscomp$loop$prop$dirToChild$2214)):(g=this.join(g),k&&!wl.applyExclude(g,k)||b.push(g)))}return Promise.resolve(b)};$jscomp.global.Object.defineProperties(Nt.prototype,{localBackend:{configurable:!0,enumerable:!0,get:function(){return wl.LocalResourceInMemoryBackend.named(this.host())}}});wl.LocalResource=Nt;var sM={name:"local-resource",matches:function(f){return f.startsWith("local:")},resourceClass:wl.LocalResource};
wl.resourceExtension=sM;wl.resourceExtension=sM;wl.resourceExtension=sM;wl.default=Nt;var dj=lively.FreezerRuntime.recorderFor("lively.resources/index.js");dj.createFileSpec=J;dj.loadViaScript=O;dj.ensureFetch=Y;dj.default=Tg;dj.Resource=Tg;dj.unregisterExtension=B;dj.registerExtension=w;dj.parseQuery=Re;dj.extensions=cB;dj.createFiles=q;dj.resource=la;dj.httpResourceExtension=qM;dj.fileResourceExtension=rM;dj.localResourceExtension=sM;dj.registerExtension(dj.localResourceExtension);dj.registerExtension(dj.httpResourceExtension);
dj.registerExtension(dj.fileResourceExtension);dj.createFileSpec=J;dj.createFileSpec=J;dj.loadViaScript=O;dj.loadViaScript=O;dj.ensureFetch=Y;dj.ensureFetch=Y;dj.registerExtension=w;dj.registerExtension=w;dj.unregisterExtension=B;dj.unregisterExtension=B;dj.parseQuery=Re;dj.parseQuery=Re;dj.extensions=cB;dj.extensions=cB;dj.createFiles=q;dj.createFiles=q;dj.resource=la;dj.resource=la;var Tka=Object.freeze({__proto__:null,Resource:Tg,createFileSpec:J,loadViaScript:O,ensureFetch:Y,registerExtension:w,
unregisterExtension:B,parseQuery:Re,extensions:cB,createFiles:q,resource:la}),Wi=lively.FreezerRuntime.recorderFor("lively.morphic/helpers.js");Wi.pathForBrowserHistory=ca;Wi.addClassMappings=qa;Wi.morph=sa;Wi.newMorphId=Ta;Wi.lazyInspect=function(f){var k,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){if(1==b.nextAddress)return b.yield(System.import("lively.ide/js/inspector.js"),2);k=b.yieldResult;n=k.inspect;Wi.inspect=n;return b.return(n(f))})};Wi.locateClass=oq;Wi.string=pi;
Wi.parseQuery=Re;Wi.stringifyQuery=Rx;Wi.touchInput=Wi.touchInput||void 0;try{document.createEvent("TouchEvent"),Wi.touchInput=!0}catch(f){Wi.touchInput=!1}var sr=Da("aA",Wi.touchInput);Wi.touchInputDevice=sr;Wi.touchInputDevice=sr;Wi.touchInputDevice=sr;Wi.nameToClassMapping=Wi.nameToClassMapping||{};Wi.pathForBrowserHistory=ca;Wi.pathForBrowserHistory=ca;Wi.addClassMappings=qa;Wi.addClassMappings=qa;Wi.morph=sa;Wi.morph=sa;Wi.newMorphId=Ta;Wi.newMorphId=Ta;var dB=Da("a8",Wi.lazyInspect);Wi.inspect=
dB;Wi.inspect=dB;Wi.inspect=dB;var Bs=lively.FreezerRuntime.recorderFor("lively.morphic/text/icons.js");Bs.obj=Ag;Bs.morph=sa;var Np=Da("ao",function(f){var k=lively.FreezerRuntime.recorderFor("lively.morphic/text/icons.js"),n=k.hasOwnProperty("Icon")&&"function"===typeof k.Icon?k.Icon:k.Icon=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return dc(n,f,void 0,[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Icon"}},
{key:"makeLabel",value:function(b,e){var m=e=void 0===e?{prefix:"",suffix:""}:e,a=m.prefix;m=m.suffix;var g=[];a&&g.push.apply(g,$jscomp.arrayFromIterable("string"===typeof a?[a||"",{}]:a));g.push.apply(g,$jscomp.arrayFromIterable(this.textAttribute(b,Bs.obj.dissoc(e,["fontSize"]))));m&&g.push.apply(g,$jscomp.arrayFromIterable("string"===typeof m?[m||"",{}]:m));return Bs.morph(Object.assign({type:"label",value:g},Bs.obj.dissoc(e,["prefix","suffix"])))}},{key:"textAttribute",value:function(b,e){e=
void 0===e?{}:e;var m=e.textStyleClasses&&e.textStyleClasses.includes("far");return[Bs.Icons[b].code||"icon "+b+" not found",Object.assign({fontFamily:'"Font Awesome 5 Free", "Font Awesome 5 Brands"',fontWeight:m?"400":"900",textStyleClasses:["fas"]},e)]}},{key:"setIcon",value:function(b,e){b.textAndAttributes=this.textAttribute(e)}}],k,{pathInPackage:function(){return"text/icons.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:661,end:1789})}(void 0));Bs.Icon=Np;Bs.Icon=Np;Bs.Icon=Np;var tM=Da("bk",{"500px":{code:"\uf26e"},"accessible-icon":{code:"\uf368"},accusoft:{code:"\uf369"},"acquisitions-incorporated":{code:"\uf6af"},ad:{code:"\uf641"},"address-book":{code:"\uf2b9"},"address-card":{code:"\uf2bb"},adjust:{code:"\uf042"},adn:{code:"\uf170"},adobe:{code:"\uf778"},adversal:{code:"\uf36a"},affiliatetheme:{code:"\uf36b"},"air-freshener":{code:"\uf5d0"},
airbnb:{code:"\uf834"},algolia:{code:"\uf36c"},"align-center":{code:"\uf037"},"align-justify":{code:"\uf039"},"align-left":{code:"\uf036"},"align-right":{code:"\uf038"},alipay:{code:"\uf642"},allergies:{code:"\uf461"},amazon:{code:"\uf270"},"amazon-pay":{code:"\uf42c"},ambulance:{code:"\uf0f9"},"american-sign-language-interpreting":{code:"\uf2a3"},amilia:{code:"\uf36d"},anchor:{code:"\uf13d"},android:{code:"\uf17b"},angellist:{code:"\uf209"},"angle-double-down":{code:"\uf103"},"angle-double-left":{code:"\uf100"},
"angle-double-right":{code:"\uf101"},"angle-double-up":{code:"\uf102"},"angle-down":{code:"\uf107"},"angle-left":{code:"\uf104"},"angle-right":{code:"\uf105"},"angle-up":{code:"\uf106"},angry:{code:"\uf556"},angrycreative:{code:"\uf36e"},angular:{code:"\uf420"},ankh:{code:"\uf644"},"app-store":{code:"\uf36f"},"app-store-ios":{code:"\uf370"},apper:{code:"\uf371"},apple:{code:"\uf179"},"apple-alt":{code:"\uf5d1"},"apple-pay":{code:"\uf415"},archive:{code:"\uf187"},archway:{code:"\uf557"},"arrow-alt-circle-down":{code:"\uf358"},
"arrow-alt-circle-left":{code:"\uf359"},"arrow-alt-circle-right":{code:"\uf35a"},"arrow-alt-circle-up":{code:"\uf35b"},"arrow-circle-down":{code:"\uf0ab"},"arrow-circle-left":{code:"\uf0a8"},"arrow-circle-right":{code:"\uf0a9"},"arrow-circle-up":{code:"\uf0aa"},"arrow-down":{code:"\uf063"},"arrow-left":{code:"\uf060"},"arrow-right":{code:"\uf061"},"arrow-up":{code:"\uf062"},"arrows-alt":{code:"\uf0b2"},"arrows-alt-h":{code:"\uf337"},"arrows-alt-v":{code:"\uf338"},artstation:{code:"\uf77a"},"assistive-listening-systems":{code:"\uf2a2"},
asterisk:{code:"\uf069"},asymmetrik:{code:"\uf372"},at:{code:"\uf1fa"},atlas:{code:"\uf558"},atlassian:{code:"\uf77b"},atom:{code:"\uf5d2"},audible:{code:"\uf373"},"audio-description":{code:"\uf29e"},autoprefixer:{code:"\uf41c"},avianex:{code:"\uf374"},aviato:{code:"\uf421"},award:{code:"\uf559"},aws:{code:"\uf375"},baby:{code:"\uf77c"},"baby-carriage":{code:"\uf77d"},backspace:{code:"\uf55a"},backward:{code:"\uf04a"},bacon:{code:"\uf7e5"},bahai:{code:"\uf666"},"balance-scale":{code:"\uf24e"},"balance-scale-left":{code:"\uf515"},
"balance-scale-right":{code:"\uf516"},ban:{code:"\uf05e"},"band-aid":{code:"\uf462"},bandcamp:{code:"\uf2d5"},barcode:{code:"\uf02a"},bars:{code:"\uf0c9"},"baseball-ball":{code:"\uf433"},"basketball-ball":{code:"\uf434"},bath:{code:"\uf2cd"},"battery-empty":{code:"\uf244"},"battery-full":{code:"\uf240"},"battery-half":{code:"\uf242"},"battery-quarter":{code:"\uf243"},"battery-three-quarters":{code:"\uf241"},"battle-net":{code:"\uf835"},bed:{code:"\uf236"},beer:{code:"\uf0fc"},behance:{code:"\uf1b4"},
"behance-square":{code:"\uf1b5"},bell:{code:"\uf0f3"},"bell-slash":{code:"\uf1f6"},"bezier-curve":{code:"\uf55b"},bible:{code:"\uf647"},bicycle:{code:"\uf206"},biking:{code:"\uf84a"},bimobject:{code:"\uf378"},binoculars:{code:"\uf1e5"},biohazard:{code:"\uf780"},"birthday-cake":{code:"\uf1fd"},bitbucket:{code:"\uf171"},bitcoin:{code:"\uf379"},bity:{code:"\uf37a"},"black-tie":{code:"\uf27e"},blackberry:{code:"\uf37b"},blender:{code:"\uf517"},"blender-phone":{code:"\uf6b6"},blind:{code:"\uf29d"},blog:{code:"\uf781"},
blogger:{code:"\uf37c"},"blogger-b":{code:"\uf37d"},bluetooth:{code:"\uf293"},"bluetooth-b":{code:"\uf294"},bold:{code:"\uf032"},bolt:{code:"\uf0e7"},bomb:{code:"\uf1e2"},bone:{code:"\uf5d7"},bong:{code:"\uf55c"},book:{code:"\uf02d"},"book-dead":{code:"\uf6b7"},"book-medical":{code:"\uf7e6"},"book-open":{code:"\uf518"},"book-reader":{code:"\uf5da"},bookmark:{code:"\uf02e"},bootstrap:{code:"\uf836"},"border-all":{code:"\uf84c"},"border-none":{code:"\uf850"},"border-style":{code:"\uf853"},"bowling-ball":{code:"\uf436"},
box:{code:"\uf466"},"box-open":{code:"\uf49e"},boxes:{code:"\uf468"},braille:{code:"\uf2a1"},brain:{code:"\uf5dc"},"bread-slice":{code:"\uf7ec"},briefcase:{code:"\uf0b1"},"briefcase-medical":{code:"\uf469"},"broadcast-tower":{code:"\uf519"},broom:{code:"\uf51a"},brush:{code:"\uf55d"},btc:{code:"\uf15a"},buffer:{code:"\uf837"},bug:{code:"\uf188"},building:{code:"\uf1ad"},bullhorn:{code:"\uf0a1"},bullseye:{code:"\uf140"},burn:{code:"\uf46a"},buromobelexperte:{code:"\uf37f"},bus:{code:"\uf207"},"bus-alt":{code:"\uf55e"},
"business-time":{code:"\uf64a"},"buy-n-large":{code:"\uf8a6"},buysellads:{code:"\uf20d"},calculator:{code:"\uf1ec"},calendar:{code:"\uf133"},"calendar-alt":{code:"\uf073"},"calendar-check":{code:"\uf274"},"calendar-day":{code:"\uf783"},"calendar-minus":{code:"\uf272"},"calendar-plus":{code:"\uf271"},"calendar-times":{code:"\uf273"},"calendar-week":{code:"\uf784"},camera:{code:"\uf030"},"camera-retro":{code:"\uf083"},campground:{code:"\uf6bb"},"canadian-maple-leaf":{code:"\uf785"},"candy-cane":{code:"\uf786"},
cannabis:{code:"\uf55f"},capsules:{code:"\uf46b"},car:{code:"\uf1b9"},"car-alt":{code:"\uf5de"},"car-battery":{code:"\uf5df"},"car-crash":{code:"\uf5e1"},"car-side":{code:"\uf5e4"},caravan:{code:"\uf8ff"},"caret-down":{code:"\uf0d7"},"caret-left":{code:"\uf0d9"},"caret-right":{code:"\uf0da"},"caret-square-down":{code:"\uf150"},"caret-square-left":{code:"\uf191"},"caret-square-right":{code:"\uf152"},"caret-square-up":{code:"\uf151"},"caret-up":{code:"\uf0d8"},carrot:{code:"\uf787"},"cart-arrow-down":{code:"\uf218"},
"cart-plus":{code:"\uf217"},"cash-register":{code:"\uf788"},cat:{code:"\uf6be"},"cc-amazon-pay":{code:"\uf42d"},"cc-amex":{code:"\uf1f3"},"cc-apple-pay":{code:"\uf416"},"cc-diners-club":{code:"\uf24c"},"cc-discover":{code:"\uf1f2"},"cc-jcb":{code:"\uf24b"},"cc-mastercard":{code:"\uf1f1"},"cc-paypal":{code:"\uf1f4"},"cc-stripe":{code:"\uf1f5"},"cc-visa":{code:"\uf1f0"},centercode:{code:"\uf380"},centos:{code:"\uf789"},certificate:{code:"\uf0a3"},chair:{code:"\uf6c0"},chalkboard:{code:"\uf51b"},"chalkboard-teacher":{code:"\uf51c"},
"charging-station":{code:"\uf5e7"},"chart-area":{code:"\uf1fe"},"chart-bar":{code:"\uf080"},"chart-line":{code:"\uf201"},"chart-pie":{code:"\uf200"},check:{code:"\uf00c"},"check-circle":{code:"\uf058"},"check-double":{code:"\uf560"},"check-square":{code:"\uf14a"},cheese:{code:"\uf7ef"},chess:{code:"\uf439"},"chess-bishop":{code:"\uf43a"},"chess-board":{code:"\uf43c"},"chess-king":{code:"\uf43f"},"chess-knight":{code:"\uf441"},"chess-pawn":{code:"\uf443"},"chess-queen":{code:"\uf445"},"chess-rook":{code:"\uf447"},
"chevron-circle-down":{code:"\uf13a"},"chevron-circle-left":{code:"\uf137"},"chevron-circle-right":{code:"\uf138"},"chevron-circle-up":{code:"\uf139"},"chevron-down":{code:"\uf078"},"chevron-left":{code:"\uf053"},"chevron-right":{code:"\uf054"},"chevron-up":{code:"\uf077"},child:{code:"\uf1ae"},chrome:{code:"\uf268"},chromecast:{code:"\uf838"},church:{code:"\uf51d"},circle:{code:"\uf111"},"circle-notch":{code:"\uf1ce"},city:{code:"\uf64f"},"clinic-medical":{code:"\uf7f2"},clipboard:{code:"\uf328"},
"clipboard-check":{code:"\uf46c"},"clipboard-list":{code:"\uf46d"},clock:{code:"\uf017"},clone:{code:"\uf24d"},"closed-captioning":{code:"\uf20a"},cloud:{code:"\uf0c2"},"cloud-download-alt":{code:"\uf381"},"cloud-meatball":{code:"\uf73b"},"cloud-moon":{code:"\uf6c3"},"cloud-moon-rain":{code:"\uf73c"},"cloud-rain":{code:"\uf73d"},"cloud-showers-heavy":{code:"\uf740"},"cloud-sun":{code:"\uf6c4"},"cloud-sun-rain":{code:"\uf743"},"cloud-upload-alt":{code:"\uf382"},cloudscale:{code:"\uf383"},cloudsmith:{code:"\uf384"},
cloudversify:{code:"\uf385"},cocktail:{code:"\uf561"},code:{code:"\uf121"},"code-branch":{code:"\uf126"},codepen:{code:"\uf1cb"},codiepie:{code:"\uf284"},coffee:{code:"\uf0f4"},cog:{code:"\uf013"},cogs:{code:"\uf085"},coins:{code:"\uf51e"},columns:{code:"\uf0db"},comment:{code:"\uf075"},"comment-alt":{code:"\uf27a"},"comment-dollar":{code:"\uf651"},"comment-dots":{code:"\uf4ad"},"comment-medical":{code:"\uf7f5"},"comment-slash":{code:"\uf4b3"},comments:{code:"\uf086"},"comments-dollar":{code:"\uf653"},
"compact-disc":{code:"\uf51f"},compass:{code:"\uf14e"},compress:{code:"\uf066"},"compress-alt":{code:"\uf422"},"compress-arrows-alt":{code:"\uf78c"},"concierge-bell":{code:"\uf562"},confluence:{code:"\uf78d"},connectdevelop:{code:"\uf20e"},contao:{code:"\uf26d"},cookie:{code:"\uf563"},"cookie-bite":{code:"\uf564"},copy:{code:"\uf0c5"},copyright:{code:"\uf1f9"},"cotton-bureau":{code:"\uf89e"},couch:{code:"\uf4b8"},cpanel:{code:"\uf388"},"creative-commons":{code:"\uf25e"},"creative-commons-by":{code:"\uf4e7"},
"creative-commons-nc":{code:"\uf4e8"},"creative-commons-nc-eu":{code:"\uf4e9"},"creative-commons-nc-jp":{code:"\uf4ea"},"creative-commons-nd":{code:"\uf4eb"},"creative-commons-pd":{code:"\uf4ec"},"creative-commons-pd-alt":{code:"\uf4ed"},"creative-commons-remix":{code:"\uf4ee"},"creative-commons-sa":{code:"\uf4ef"},"creative-commons-sampling":{code:"\uf4f0"},"creative-commons-sampling-plus":{code:"\uf4f1"},"creative-commons-share":{code:"\uf4f2"},"creative-commons-zero":{code:"\uf4f3"},"credit-card":{code:"\uf09d"},
"critical-role":{code:"\uf6c9"},crop:{code:"\uf125"},"crop-alt":{code:"\uf565"},cross:{code:"\uf654"},crosshairs:{code:"\uf05b"},crow:{code:"\uf520"},crown:{code:"\uf521"},crutch:{code:"\uf7f7"},css3:{code:"\uf13c"},"css3-alt":{code:"\uf38b"},cube:{code:"\uf1b2"},cubes:{code:"\uf1b3"},cut:{code:"\uf0c4"},cuttlefish:{code:"\uf38c"},"d-and-d":{code:"\uf38d"},"d-and-d-beyond":{code:"\uf6ca"},dailymotion:{code:"\uf952"},dashcube:{code:"\uf210"},database:{code:"\uf1c0"},deaf:{code:"\uf2a4"},delicious:{code:"\uf1a5"},
democrat:{code:"\uf747"},deploydog:{code:"\uf38e"},deskpro:{code:"\uf38f"},desktop:{code:"\uf108"},dev:{code:"\uf6cc"},deviantart:{code:"\uf1bd"},dharmachakra:{code:"\uf655"},dhl:{code:"\uf790"},diagnoses:{code:"\uf470"},diaspora:{code:"\uf791"},dice:{code:"\uf522"},"dice-d20":{code:"\uf6cf"},"dice-d6":{code:"\uf6d1"},"dice-five":{code:"\uf523"},"dice-four":{code:"\uf524"},"dice-one":{code:"\uf525"},"dice-six":{code:"\uf526"},"dice-three":{code:"\uf527"},"dice-two":{code:"\uf528"},digg:{code:"\uf1a6"},
"digital-ocean":{code:"\uf391"},"digital-tachograph":{code:"\uf566"},directions:{code:"\uf5eb"},discord:{code:"\uf392"},discourse:{code:"\uf393"},divide:{code:"\uf529"},dizzy:{code:"\uf567"},dna:{code:"\uf471"},dochub:{code:"\uf394"},docker:{code:"\uf395"},dog:{code:"\uf6d3"},"dollar-sign":{code:"\uf155"},dolly:{code:"\uf472"},"dolly-flatbed":{code:"\uf474"},donate:{code:"\uf4b9"},"door-closed":{code:"\uf52a"},"door-open":{code:"\uf52b"},"dot-circle":{code:"\uf192"},dove:{code:"\uf4ba"},download:{code:"\uf019"},
draft2digital:{code:"\uf396"},"drafting-compass":{code:"\uf568"},dragon:{code:"\uf6d5"},"draw-polygon":{code:"\uf5ee"},dribbble:{code:"\uf17d"},"dribbble-square":{code:"\uf397"},dropbox:{code:"\uf16b"},drum:{code:"\uf569"},"drum-steelpan":{code:"\uf56a"},"drumstick-bite":{code:"\uf6d7"},drupal:{code:"\uf1a9"},dumbbell:{code:"\uf44b"},dumpster:{code:"\uf793"},"dumpster-fire":{code:"\uf794"},dungeon:{code:"\uf6d9"},dyalog:{code:"\uf399"},earlybirds:{code:"\uf39a"},ebay:{code:"\uf4f4"},edge:{code:"\uf282"},
edit:{code:"\uf044"},egg:{code:"\uf7fb"},eject:{code:"\uf052"},elementor:{code:"\uf430"},"ellipsis-h":{code:"\uf141"},"ellipsis-v":{code:"\uf142"},ello:{code:"\uf5f1"},ember:{code:"\uf423"},empire:{code:"\uf1d1"},envelope:{code:"\uf0e0"},"envelope-open":{code:"\uf2b6"},"envelope-open-text":{code:"\uf658"},"envelope-square":{code:"\uf199"},envira:{code:"\uf299"},equals:{code:"\uf52c"},eraser:{code:"\uf12d"},erlang:{code:"\uf39d"},ethereum:{code:"\uf42e"},ethernet:{code:"\uf796"},etsy:{code:"\uf2d7"},
"euro-sign":{code:"\uf153"},evernote:{code:"\uf839"},"exchange-alt":{code:"\uf362"},exclamation:{code:"\uf12a"},"exclamation-circle":{code:"\uf06a"},"exclamation-triangle":{code:"\uf071"},expand:{code:"\uf065"},"expand-alt":{code:"\uf424"},"expand-arrows-alt":{code:"\uf31e"},expeditedssl:{code:"\uf23e"},"external-link-alt":{code:"\uf35d"},"external-link-square-alt":{code:"\uf360"},eye:{code:"\uf06e"},"eye-dropper":{code:"\uf1fb"},"eye-slash":{code:"\uf070"},facebook:{code:"\uf09a"},"facebook-f":{code:"\uf39e"},
"facebook-messenger":{code:"\uf39f"},"facebook-square":{code:"\uf082"},fan:{code:"\uf863"},"fantasy-flight-games":{code:"\uf6dc"},"fast-backward":{code:"\uf049"},"fast-forward":{code:"\uf050"},fax:{code:"\uf1ac"},feather:{code:"\uf52d"},"feather-alt":{code:"\uf56b"},fedex:{code:"\uf797"},fedora:{code:"\uf798"},female:{code:"\uf182"},"fighter-jet":{code:"\uf0fb"},figma:{code:"\uf799"},file:{code:"\uf15b"},"file-alt":{code:"\uf15c"},"file-archive":{code:"\uf1c6"},"file-audio":{code:"\uf1c7"},"file-code":{code:"\uf1c9"},
"file-contract":{code:"\uf56c"},"file-csv":{code:"\uf6dd"},"file-download":{code:"\uf56d"},"file-excel":{code:"\uf1c3"},"file-export":{code:"\uf56e"},"file-image":{code:"\uf1c5"},"file-import":{code:"\uf56f"},"file-invoice":{code:"\uf570"},"file-invoice-dollar":{code:"\uf571"},"file-medical":{code:"\uf477"},"file-medical-alt":{code:"\uf478"},"file-pdf":{code:"\uf1c1"},"file-powerpoint":{code:"\uf1c4"},"file-prescription":{code:"\uf572"},"file-signature":{code:"\uf573"},"file-upload":{code:"\uf574"},
"file-video":{code:"\uf1c8"},"file-word":{code:"\uf1c2"},fill:{code:"\uf575"},"fill-drip":{code:"\uf576"},film:{code:"\uf008"},filter:{code:"\uf0b0"},fingerprint:{code:"\uf577"},fire:{code:"\uf06d"},"fire-alt":{code:"\uf7e4"},"fire-extinguisher":{code:"\uf134"},firefox:{code:"\uf269"},"firefox-browser":{code:"\uf907"},"first-aid":{code:"\uf479"},"first-order":{code:"\uf2b0"},"first-order-alt":{code:"\uf50a"},firstdraft:{code:"\uf3a1"},fish:{code:"\uf578"},"fist-raised":{code:"\uf6de"},flag:{code:"\uf024"},
"flag-checkered":{code:"\uf11e"},"flag-usa":{code:"\uf74d"},flask:{code:"\uf0c3"},flickr:{code:"\uf16e"},flipboard:{code:"\uf44d"},flushed:{code:"\uf579"},fly:{code:"\uf417"},folder:{code:"\uf07b"},"folder-minus":{code:"\uf65d"},"folder-open":{code:"\uf07c"},"folder-plus":{code:"\uf65e"},font:{code:"\uf031"},"font-awesome":{code:"\uf2b4"},"font-awesome-alt":{code:"\uf35c"},"font-awesome-flag":{code:"\uf425"},"font-awesome-logo-full":{code:"\uf4e6"},fonticons:{code:"\uf280"},"fonticons-fi":{code:"\uf3a2"},
"football-ball":{code:"\uf44e"},"fort-awesome":{code:"\uf286"},"fort-awesome-alt":{code:"\uf3a3"},forumbee:{code:"\uf211"},forward:{code:"\uf04e"},foursquare:{code:"\uf180"},"free-code-camp":{code:"\uf2c5"},freebsd:{code:"\uf3a4"},frog:{code:"\uf52e"},frown:{code:"\uf119"},"frown-open":{code:"\uf57a"},fulcrum:{code:"\uf50b"},"funnel-dollar":{code:"\uf662"},futbol:{code:"\uf1e3"},"galactic-republic":{code:"\uf50c"},"galactic-senate":{code:"\uf50d"},gamepad:{code:"\uf11b"},"gas-pump":{code:"\uf52f"},
gavel:{code:"\uf0e3"},gem:{code:"\uf3a5"},genderless:{code:"\uf22d"},"get-pocket":{code:"\uf265"},gg:{code:"\uf260"},"gg-circle":{code:"\uf261"},ghost:{code:"\uf6e2"},gift:{code:"\uf06b"},gifts:{code:"\uf79c"},git:{code:"\uf1d3"},"git-alt":{code:"\uf841"},"git-square":{code:"\uf1d2"},github:{code:"\uf09b"},"github-alt":{code:"\uf113"},"github-square":{code:"\uf092"},gitkraken:{code:"\uf3a6"},gitlab:{code:"\uf296"},gitter:{code:"\uf426"},"glass-cheers":{code:"\uf79f"},"glass-martini":{code:"\uf000"},
"glass-martini-alt":{code:"\uf57b"},"glass-whiskey":{code:"\uf7a0"},glasses:{code:"\uf530"},glide:{code:"\uf2a5"},"glide-g":{code:"\uf2a6"},globe:{code:"\uf0ac"},"globe-africa":{code:"\uf57c"},"globe-americas":{code:"\uf57d"},"globe-asia":{code:"\uf57e"},"globe-europe":{code:"\uf7a2"},gofore:{code:"\uf3a7"},"golf-ball":{code:"\uf450"},goodreads:{code:"\uf3a8"},"goodreads-g":{code:"\uf3a9"},google:{code:"\uf1a0"},"google-drive":{code:"\uf3aa"},"google-play":{code:"\uf3ab"},"google-plus":{code:"\uf2b3"},
"google-plus-g":{code:"\uf0d5"},"google-plus-square":{code:"\uf0d4"},"google-wallet":{code:"\uf1ee"},gopuram:{code:"\uf664"},"graduation-cap":{code:"\uf19d"},gratipay:{code:"\uf184"},grav:{code:"\uf2d6"},"greater-than":{code:"\uf531"},"greater-than-equal":{code:"\uf532"},grimace:{code:"\uf57f"},grin:{code:"\uf580"},"grin-alt":{code:"\uf581"},"grin-beam":{code:"\uf582"},"grin-beam-sweat":{code:"\uf583"},"grin-hearts":{code:"\uf584"},"grin-squint":{code:"\uf585"},"grin-squint-tears":{code:"\uf586"},
"grin-stars":{code:"\uf587"},"grin-tears":{code:"\uf588"},"grin-tongue":{code:"\uf589"},"grin-tongue-squint":{code:"\uf58a"},"grin-tongue-wink":{code:"\uf58b"},"grin-wink":{code:"\uf58c"},"grip-horizontal":{code:"\uf58d"},"grip-lines":{code:"\uf7a4"},"grip-lines-vertical":{code:"\uf7a5"},"grip-vertical":{code:"\uf58e"},gripfire:{code:"\uf3ac"},grunt:{code:"\uf3ad"},guitar:{code:"\uf7a6"},gulp:{code:"\uf3ae"},"h-square":{code:"\uf0fd"},"hacker-news":{code:"\uf1d4"},"hacker-news-square":{code:"\uf3af"},
hackerrank:{code:"\uf5f7"},hamburger:{code:"\uf805"},hammer:{code:"\uf6e3"},hamsa:{code:"\uf665"},"hand-holding":{code:"\uf4bd"},"hand-holding-heart":{code:"\uf4be"},"hand-holding-usd":{code:"\uf4c0"},"hand-lizard":{code:"\uf258"},"hand-middle-finger":{code:"\uf806"},"hand-paper":{code:"\uf256"},"hand-peace":{code:"\uf25b"},"hand-point-down":{code:"\uf0a7"},"hand-point-left":{code:"\uf0a5"},"hand-point-right":{code:"\uf0a4"},"hand-point-up":{code:"\uf0a6"},"hand-pointer":{code:"\uf25a"},"hand-rock":{code:"\uf255"},
"hand-scissors":{code:"\uf257"},"hand-spock":{code:"\uf259"},hands:{code:"\uf4c2"},"hands-helping":{code:"\uf4c4"},handshake:{code:"\uf2b5"},hanukiah:{code:"\uf6e6"},"hard-hat":{code:"\uf807"},hashtag:{code:"\uf292"},"hat-cowboy":{code:"\uf8c0"},"hat-cowboy-side":{code:"\uf8c1"},"hat-wizard":{code:"\uf6e8"},hdd:{code:"\uf0a0"},heading:{code:"\uf1dc"},headphones:{code:"\uf025"},"headphones-alt":{code:"\uf58f"},headset:{code:"\uf590"},heart:{code:"\uf004"},"heart-broken":{code:"\uf7a9"},heartbeat:{code:"\uf21e"},
helicopter:{code:"\uf533"},highlighter:{code:"\uf591"},hiking:{code:"\uf6ec"},hippo:{code:"\uf6ed"},hips:{code:"\uf452"},"hire-a-helper":{code:"\uf3b0"},history:{code:"\uf1da"},"hockey-puck":{code:"\uf453"},"holly-berry":{code:"\uf7aa"},home:{code:"\uf015"},hooli:{code:"\uf427"},hornbill:{code:"\uf592"},horse:{code:"\uf6f0"},"horse-head":{code:"\uf7ab"},hospital:{code:"\uf0f8"},"hospital-alt":{code:"\uf47d"},"hospital-symbol":{code:"\uf47e"},"hot-tub":{code:"\uf593"},hotdog:{code:"\uf80f"},hotel:{code:"\uf594"},
hotjar:{code:"\uf3b1"},hourglass:{code:"\uf254"},"hourglass-end":{code:"\uf253"},"hourglass-half":{code:"\uf252"},"hourglass-start":{code:"\uf251"},"house-damage":{code:"\uf6f1"},houzz:{code:"\uf27c"},hryvnia:{code:"\uf6f2"},html5:{code:"\uf13b"},hubspot:{code:"\uf3b2"},"i-cursor":{code:"\uf246"},"ice-cream":{code:"\uf810"},icicles:{code:"\uf7ad"},icons:{code:"\uf86d"},"id-badge":{code:"\uf2c1"},"id-card":{code:"\uf2c2"},"id-card-alt":{code:"\uf47f"},ideal:{code:"\uf913"},igloo:{code:"\uf7ae"},image:{code:"\uf03e"},
images:{code:"\uf302"},imdb:{code:"\uf2d8"},inbox:{code:"\uf01c"},indent:{code:"\uf03c"},industry:{code:"\uf275"},infinity:{code:"\uf534"},info:{code:"\uf129"},"info-circle":{code:"\uf05a"},instagram:{code:"\uf16d"},"instagram-square":{code:"\uf955"},intercom:{code:"\uf7af"},"internet-explorer":{code:"\uf26b"},invision:{code:"\uf7b0"},ioxhost:{code:"\uf208"},italic:{code:"\uf033"},"itch-io":{code:"\uf83a"},itunes:{code:"\uf3b4"},"itunes-note":{code:"\uf3b5"},java:{code:"\uf4e4"},jedi:{code:"\uf669"},
"jedi-order":{code:"\uf50e"},jenkins:{code:"\uf3b6"},jira:{code:"\uf7b1"},joget:{code:"\uf3b7"},joint:{code:"\uf595"},joomla:{code:"\uf1aa"},"journal-whills":{code:"\uf66a"},js:{code:"\uf3b8"},"js-square":{code:"\uf3b9"},jsfiddle:{code:"\uf1cc"},kaaba:{code:"\uf66b"},kaggle:{code:"\uf5fa"},key:{code:"\uf084"},keybase:{code:"\uf4f5"},keyboard:{code:"\uf11c"},keycdn:{code:"\uf3ba"},khanda:{code:"\uf66d"},kickstarter:{code:"\uf3bb"},"kickstarter-k":{code:"\uf3bc"},kiss:{code:"\uf596"},"kiss-beam":{code:"\uf597"},
"kiss-wink-heart":{code:"\uf598"},"kiwi-bird":{code:"\uf535"},korvue:{code:"\uf42f"},landmark:{code:"\uf66f"},language:{code:"\uf1ab"},laptop:{code:"\uf109"},"laptop-code":{code:"\uf5fc"},"laptop-medical":{code:"\uf812"},laravel:{code:"\uf3bd"},lastfm:{code:"\uf202"},"lastfm-square":{code:"\uf203"},laugh:{code:"\uf599"},"laugh-beam":{code:"\uf59a"},"laugh-squint":{code:"\uf59b"},"laugh-wink":{code:"\uf59c"},"layer-group":{code:"\uf5fd"},leaf:{code:"\uf06c"},leanpub:{code:"\uf212"},lemon:{code:"\uf094"},
less:{code:"\uf41d"},"less-than":{code:"\uf536"},"less-than-equal":{code:"\uf537"},"level-down-alt":{code:"\uf3be"},"level-up-alt":{code:"\uf3bf"},"life-ring":{code:"\uf1cd"},lightbulb:{code:"\uf0eb"},line:{code:"\uf3c0"},link:{code:"\uf0c1"},linkedin:{code:"\uf08c"},"linkedin-in":{code:"\uf0e1"},linode:{code:"\uf2b8"},linux:{code:"\uf17c"},"lira-sign":{code:"\uf195"},list:{code:"\uf03a"},"list-alt":{code:"\uf022"},"list-ol":{code:"\uf0cb"},"list-ul":{code:"\uf0ca"},"location-arrow":{code:"\uf124"},
lock:{code:"\uf023"},"lock-open":{code:"\uf3c1"},"long-arrow-alt-down":{code:"\uf309"},"long-arrow-alt-left":{code:"\uf30a"},"long-arrow-alt-right":{code:"\uf30b"},"long-arrow-alt-up":{code:"\uf30c"},"low-vision":{code:"\uf2a8"},"luggage-cart":{code:"\uf59d"},lyft:{code:"\uf3c3"},magento:{code:"\uf3c4"},magic:{code:"\uf0d0"},magnet:{code:"\uf076"},"mail-bulk":{code:"\uf674"},mailchimp:{code:"\uf59e"},male:{code:"\uf183"},mandalorian:{code:"\uf50f"},map:{code:"\uf279"},"map-marked":{code:"\uf59f"},
"map-marked-alt":{code:"\uf5a0"},"map-marker":{code:"\uf041"},"map-marker-alt":{code:"\uf3c5"},"map-pin":{code:"\uf276"},"map-signs":{code:"\uf277"},markdown:{code:"\uf60f"},marker:{code:"\uf5a1"},mars:{code:"\uf222"},"mars-double":{code:"\uf227"},"mars-stroke":{code:"\uf229"},"mars-stroke-h":{code:"\uf22b"},"mars-stroke-v":{code:"\uf22a"},mask:{code:"\uf6fa"},mastodon:{code:"\uf4f6"},maxcdn:{code:"\uf136"},mdb:{code:"\uf8ca"},medal:{code:"\uf5a2"},medapps:{code:"\uf3c6"},medium:{code:"\uf23a"},"medium-m":{code:"\uf3c7"},
medkit:{code:"\uf0fa"},medrt:{code:"\uf3c8"},meetup:{code:"\uf2e0"},megaport:{code:"\uf5a3"},meh:{code:"\uf11a"},"meh-blank":{code:"\uf5a4"},"meh-rolling-eyes":{code:"\uf5a5"},memory:{code:"\uf538"},mendeley:{code:"\uf7b3"},menorah:{code:"\uf676"},mercury:{code:"\uf223"},meteor:{code:"\uf753"},microblog:{code:"\uf91a"},microchip:{code:"\uf2db"},microphone:{code:"\uf130"},"microphone-alt":{code:"\uf3c9"},"microphone-alt-slash":{code:"\uf539"},"microphone-slash":{code:"\uf131"},microscope:{code:"\uf610"},
microsoft:{code:"\uf3ca"},minus:{code:"\uf068"},"minus-circle":{code:"\uf056"},"minus-square":{code:"\uf146"},mitten:{code:"\uf7b5"},mix:{code:"\uf3cb"},mixcloud:{code:"\uf289"},mixer:{code:"\uf956"},mizuni:{code:"\uf3cc"},mobile:{code:"\uf10b"},"mobile-alt":{code:"\uf3cd"},modx:{code:"\uf285"},monero:{code:"\uf3d0"},"money-bill":{code:"\uf0d6"},"money-bill-alt":{code:"\uf3d1"},"money-bill-wave":{code:"\uf53a"},"money-bill-wave-alt":{code:"\uf53b"},"money-check":{code:"\uf53c"},"money-check-alt":{code:"\uf53d"},
monument:{code:"\uf5a6"},moon:{code:"\uf186"},"mortar-pestle":{code:"\uf5a7"},mosque:{code:"\uf678"},motorcycle:{code:"\uf21c"},mountain:{code:"\uf6fc"},mouse:{code:"\uf8cc"},"mouse-pointer":{code:"\uf245"},"mug-hot":{code:"\uf7b6"},music:{code:"\uf001"},napster:{code:"\uf3d2"},neos:{code:"\uf612"},"network-wired":{code:"\uf6ff"},neuter:{code:"\uf22c"},newspaper:{code:"\uf1ea"},nimblr:{code:"\uf5a8"},node:{code:"\uf419"},"node-js":{code:"\uf3d3"},"not-equal":{code:"\uf53e"},"notes-medical":{code:"\uf481"},
npm:{code:"\uf3d4"},ns8:{code:"\uf3d5"},nutritionix:{code:"\uf3d6"},"object-group":{code:"\uf247"},"object-ungroup":{code:"\uf248"},odnoklassniki:{code:"\uf263"},"odnoklassniki-square":{code:"\uf264"},"oil-can":{code:"\uf613"},"old-republic":{code:"\uf510"},om:{code:"\uf679"},opencart:{code:"\uf23d"},openid:{code:"\uf19b"},opera:{code:"\uf26a"},"optin-monster":{code:"\uf23c"},orcid:{code:"\uf8d2"},osi:{code:"\uf41a"},otter:{code:"\uf700"},outdent:{code:"\uf03b"},page4:{code:"\uf3d7"},pagelines:{code:"\uf18c"},
pager:{code:"\uf815"},"paint-brush":{code:"\uf1fc"},"paint-roller":{code:"\uf5aa"},palette:{code:"\uf53f"},palfed:{code:"\uf3d8"},pallet:{code:"\uf482"},"paper-plane":{code:"\uf1d8"},paperclip:{code:"\uf0c6"},"parachute-box":{code:"\uf4cd"},paragraph:{code:"\uf1dd"},parking:{code:"\uf540"},passport:{code:"\uf5ab"},pastafarianism:{code:"\uf67b"},paste:{code:"\uf0ea"},patreon:{code:"\uf3d9"},pause:{code:"\uf04c"},"pause-circle":{code:"\uf28b"},paw:{code:"\uf1b0"},paypal:{code:"\uf1ed"},peace:{code:"\uf67c"},
pen:{code:"\uf304"},"pen-alt":{code:"\uf305"},"pen-fancy":{code:"\uf5ac"},"pen-nib":{code:"\uf5ad"},"pen-square":{code:"\uf14b"},"pencil-alt":{code:"\uf303"},"pencil-ruler":{code:"\uf5ae"},"penny-arcade":{code:"\uf704"},"people-carry":{code:"\uf4ce"},"pepper-hot":{code:"\uf816"},percent:{code:"\uf295"},percentage:{code:"\uf541"},periscope:{code:"\uf3da"},"person-booth":{code:"\uf756"},phabricator:{code:"\uf3db"},"phoenix-framework":{code:"\uf3dc"},"phoenix-squadron":{code:"\uf511"},phone:{code:"\uf095"},
"phone-alt":{code:"\uf879"},"phone-slash":{code:"\uf3dd"},"phone-square":{code:"\uf098"},"phone-square-alt":{code:"\uf87b"},"phone-volume":{code:"\uf2a0"},"photo-video":{code:"\uf87c"},php:{code:"\uf457"},"pied-piper":{code:"\uf2ae"},"pied-piper-alt":{code:"\uf1a8"},"pied-piper-hat":{code:"\uf4e5"},"pied-piper-pp":{code:"\uf1a7"},"pied-piper-square":{code:"\uf91e"},"piggy-bank":{code:"\uf4d3"},pills:{code:"\uf484"},pinterest:{code:"\uf0d2"},"pinterest-p":{code:"\uf231"},"pinterest-square":{code:"\uf0d3"},
"pizza-slice":{code:"\uf818"},"place-of-worship":{code:"\uf67f"},plane:{code:"\uf072"},"plane-arrival":{code:"\uf5af"},"plane-departure":{code:"\uf5b0"},play:{code:"\uf04b"},"play-circle":{code:"\uf144"},playstation:{code:"\uf3df"},plug:{code:"\uf1e6"},plus:{code:"\uf067"},"plus-circle":{code:"\uf055"},"plus-square":{code:"\uf0fe"},podcast:{code:"\uf2ce"},poll:{code:"\uf681"},"poll-h":{code:"\uf682"},poo:{code:"\uf2fe"},"poo-storm":{code:"\uf75a"},poop:{code:"\uf619"},portrait:{code:"\uf3e0"},"pound-sign":{code:"\uf154"},
"power-off":{code:"\uf011"},pray:{code:"\uf683"},"praying-hands":{code:"\uf684"},prescription:{code:"\uf5b1"},"prescription-bottle":{code:"\uf485"},"prescription-bottle-alt":{code:"\uf486"},print:{code:"\uf02f"},procedures:{code:"\uf487"},"product-hunt":{code:"\uf288"},"project-diagram":{code:"\uf542"},pushed:{code:"\uf3e1"},"puzzle-piece":{code:"\uf12e"},python:{code:"\uf3e2"},qq:{code:"\uf1d6"},qrcode:{code:"\uf029"},question:{code:"\uf128"},"question-circle":{code:"\uf059"},quidditch:{code:"\uf458"},
quinscape:{code:"\uf459"},quora:{code:"\uf2c4"},"quote-left":{code:"\uf10d"},"quote-right":{code:"\uf10e"},quran:{code:"\uf687"},"r-project":{code:"\uf4f7"},radiation:{code:"\uf7b9"},"radiation-alt":{code:"\uf7ba"},rainbow:{code:"\uf75b"},random:{code:"\uf074"},"raspberry-pi":{code:"\uf7bb"},ravelry:{code:"\uf2d9"},react:{code:"\uf41b"},reacteurope:{code:"\uf75d"},readme:{code:"\uf4d5"},rebel:{code:"\uf1d0"},receipt:{code:"\uf543"},"record-vinyl":{code:"\uf8d9"},recycle:{code:"\uf1b8"},"red-river":{code:"\uf3e3"},
reddit:{code:"\uf1a1"},"reddit-alien":{code:"\uf281"},"reddit-square":{code:"\uf1a2"},redhat:{code:"\uf7bc"},redo:{code:"\uf01e"},"redo-alt":{code:"\uf2f9"},registered:{code:"\uf25d"},"remove-format":{code:"\uf87d"},renren:{code:"\uf18b"},reply:{code:"\uf3e5"},"reply-all":{code:"\uf122"},replyd:{code:"\uf3e6"},republican:{code:"\uf75e"},researchgate:{code:"\uf4f8"},resolving:{code:"\uf3e7"},restroom:{code:"\uf7bd"},retweet:{code:"\uf079"},rev:{code:"\uf5b2"},ribbon:{code:"\uf4d6"},ring:{code:"\uf70b"},
road:{code:"\uf018"},robot:{code:"\uf544"},rocket:{code:"\uf135"},rocketchat:{code:"\uf3e8"},rockrms:{code:"\uf3e9"},route:{code:"\uf4d7"},rss:{code:"\uf09e"},"rss-square":{code:"\uf143"},"ruble-sign":{code:"\uf158"},ruler:{code:"\uf545"},"ruler-combined":{code:"\uf546"},"ruler-horizontal":{code:"\uf547"},"ruler-vertical":{code:"\uf548"},running:{code:"\uf70c"},"rupee-sign":{code:"\uf156"},"sad-cry":{code:"\uf5b3"},"sad-tear":{code:"\uf5b4"},safari:{code:"\uf267"},salesforce:{code:"\uf83b"},sass:{code:"\uf41e"},
satellite:{code:"\uf7bf"},"satellite-dish":{code:"\uf7c0"},save:{code:"\uf0c7"},schlix:{code:"\uf3ea"},school:{code:"\uf549"},screwdriver:{code:"\uf54a"},scribd:{code:"\uf28a"},scroll:{code:"\uf70e"},"sd-card":{code:"\uf7c2"},search:{code:"\uf002"},"search-dollar":{code:"\uf688"},"search-location":{code:"\uf689"},"search-minus":{code:"\uf010"},"search-plus":{code:"\uf00e"},searchengin:{code:"\uf3eb"},seedling:{code:"\uf4d8"},sellcast:{code:"\uf2da"},sellsy:{code:"\uf213"},server:{code:"\uf233"},servicestack:{code:"\uf3ec"},
shapes:{code:"\uf61f"},share:{code:"\uf064"},"share-alt":{code:"\uf1e0"},"share-alt-square":{code:"\uf1e1"},"share-square":{code:"\uf14d"},"shekel-sign":{code:"\uf20b"},"shield-alt":{code:"\uf3ed"},ship:{code:"\uf21a"},"shipping-fast":{code:"\uf48b"},shirtsinbulk:{code:"\uf214"},"shoe-prints":{code:"\uf54b"},shopify:{code:"\uf957"},"shopping-bag":{code:"\uf290"},"shopping-basket":{code:"\uf291"},"shopping-cart":{code:"\uf07a"},shopware:{code:"\uf5b5"},shower:{code:"\uf2cc"},"shuttle-van":{code:"\uf5b6"},
sign:{code:"\uf4d9"},"sign-in-alt":{code:"\uf2f6"},"sign-language":{code:"\uf2a7"},"sign-out-alt":{code:"\uf2f5"},signal:{code:"\uf012"},signature:{code:"\uf5b7"},"sim-card":{code:"\uf7c4"},simplybuilt:{code:"\uf215"},sistrix:{code:"\uf3ee"},sitemap:{code:"\uf0e8"},sith:{code:"\uf512"},skating:{code:"\uf7c5"},sketch:{code:"\uf7c6"},skiing:{code:"\uf7c9"},"skiing-nordic":{code:"\uf7ca"},skull:{code:"\uf54c"},"skull-crossbones":{code:"\uf714"},skyatlas:{code:"\uf216"},skype:{code:"\uf17e"},slack:{code:"\uf198"},
"slack-hash":{code:"\uf3ef"},slash:{code:"\uf715"},sleigh:{code:"\uf7cc"},"sliders-h":{code:"\uf1de"},slideshare:{code:"\uf1e7"},smile:{code:"\uf118"},"smile-beam":{code:"\uf5b8"},"smile-wink":{code:"\uf4da"},smog:{code:"\uf75f"},smoking:{code:"\uf48d"},"smoking-ban":{code:"\uf54d"},sms:{code:"\uf7cd"},snapchat:{code:"\uf2ab"},"snapchat-ghost":{code:"\uf2ac"},"snapchat-square":{code:"\uf2ad"},snowboarding:{code:"\uf7ce"},snowflake:{code:"\uf2dc"},snowman:{code:"\uf7d0"},snowplow:{code:"\uf7d2"},socks:{code:"\uf696"},
"solar-panel":{code:"\uf5ba"},sort:{code:"\uf0dc"},"sort-alpha-down":{code:"\uf15d"},"sort-alpha-down-alt":{code:"\uf881"},"sort-alpha-up":{code:"\uf15e"},"sort-alpha-up-alt":{code:"\uf882"},"sort-amount-down":{code:"\uf160"},"sort-amount-down-alt":{code:"\uf884"},"sort-amount-up":{code:"\uf161"},"sort-amount-up-alt":{code:"\uf885"},"sort-down":{code:"\uf0dd"},"sort-numeric-down":{code:"\uf162"},"sort-numeric-down-alt":{code:"\uf886"},"sort-numeric-up":{code:"\uf163"},"sort-numeric-up-alt":{code:"\uf887"},
"sort-up":{code:"\uf0de"},soundcloud:{code:"\uf1be"},sourcetree:{code:"\uf7d3"},spa:{code:"\uf5bb"},"space-shuttle":{code:"\uf197"},speakap:{code:"\uf3f3"},"speaker-deck":{code:"\uf83c"},"spell-check":{code:"\uf891"},spider:{code:"\uf717"},spinner:{code:"\uf110"},splotch:{code:"\uf5bc"},spotify:{code:"\uf1bc"},"spray-can":{code:"\uf5bd"},square:{code:"\uf0c8"},"square-full":{code:"\uf45c"},"square-root-alt":{code:"\uf698"},squarespace:{code:"\uf5be"},"stack-exchange":{code:"\uf18d"},"stack-overflow":{code:"\uf16c"},
stackpath:{code:"\uf842"},stamp:{code:"\uf5bf"},star:{code:"\uf005"},"star-and-crescent":{code:"\uf699"},"star-half":{code:"\uf089"},"star-half-alt":{code:"\uf5c0"},"star-of-david":{code:"\uf69a"},"star-of-life":{code:"\uf621"},staylinked:{code:"\uf3f5"},steam:{code:"\uf1b6"},"steam-square":{code:"\uf1b7"},"steam-symbol":{code:"\uf3f6"},"step-backward":{code:"\uf048"},"step-forward":{code:"\uf051"},stethoscope:{code:"\uf0f1"},"sticker-mule":{code:"\uf3f7"},"sticky-note":{code:"\uf249"},stop:{code:"\uf04d"},
"stop-circle":{code:"\uf28d"},stopwatch:{code:"\uf2f2"},store:{code:"\uf54e"},"store-alt":{code:"\uf54f"},strava:{code:"\uf428"},stream:{code:"\uf550"},"street-view":{code:"\uf21d"},strikethrough:{code:"\uf0cc"},stripe:{code:"\uf429"},"stripe-s":{code:"\uf42a"},stroopwafel:{code:"\uf551"},studiovinari:{code:"\uf3f8"},stumbleupon:{code:"\uf1a4"},"stumbleupon-circle":{code:"\uf1a3"},subscript:{code:"\uf12c"},subway:{code:"\uf239"},suitcase:{code:"\uf0f2"},"suitcase-rolling":{code:"\uf5c1"},sun:{code:"\uf185"},
superpowers:{code:"\uf2dd"},superscript:{code:"\uf12b"},supple:{code:"\uf3f9"},surprise:{code:"\uf5c2"},suse:{code:"\uf7d6"},swatchbook:{code:"\uf5c3"},swift:{code:"\uf8e1"},swimmer:{code:"\uf5c4"},"swimming-pool":{code:"\uf5c5"},symfony:{code:"\uf83d"},synagogue:{code:"\uf69b"},sync:{code:"\uf021"},"sync-alt":{code:"\uf2f1"},syringe:{code:"\uf48e"},table:{code:"\uf0ce"},"table-tennis":{code:"\uf45d"},tablet:{code:"\uf10a"},"tablet-alt":{code:"\uf3fa"},tablets:{code:"\uf490"},"tachometer-alt":{code:"\uf3fd"},
tag:{code:"\uf02b"},tags:{code:"\uf02c"},tape:{code:"\uf4db"},tasks:{code:"\uf0ae"},taxi:{code:"\uf1ba"},teamspeak:{code:"\uf4f9"},teeth:{code:"\uf62e"},"teeth-open":{code:"\uf62f"},telegram:{code:"\uf2c6"},"telegram-plane":{code:"\uf3fe"},"temperature-high":{code:"\uf769"},"temperature-low":{code:"\uf76b"},"tencent-weibo":{code:"\uf1d5"},tenge:{code:"\uf7d7"},terminal:{code:"\uf120"},"text-height":{code:"\uf034"},"text-width":{code:"\uf035"},th:{code:"\uf00a"},"th-large":{code:"\uf009"},"th-list":{code:"\uf00b"},
"the-red-yeti":{code:"\uf69d"},"theater-masks":{code:"\uf630"},themeco:{code:"\uf5c6"},themeisle:{code:"\uf2b2"},thermometer:{code:"\uf491"},"thermometer-empty":{code:"\uf2cb"},"thermometer-full":{code:"\uf2c7"},"thermometer-half":{code:"\uf2c9"},"thermometer-quarter":{code:"\uf2ca"},"thermometer-three-quarters":{code:"\uf2c8"},"think-peaks":{code:"\uf731"},"thumbs-down":{code:"\uf165"},"thumbs-up":{code:"\uf164"},thumbtack:{code:"\uf08d"},"ticket-alt":{code:"\uf3ff"},times:{code:"\uf00d"},"times-circle":{code:"\uf057"},
tint:{code:"\uf043"},"tint-slash":{code:"\uf5c7"},tired:{code:"\uf5c8"},"toggle-off":{code:"\uf204"},"toggle-on":{code:"\uf205"},toilet:{code:"\uf7d8"},"toilet-paper":{code:"\uf71e"},toolbox:{code:"\uf552"},tools:{code:"\uf7d9"},tooth:{code:"\uf5c9"},torah:{code:"\uf6a0"},"torii-gate":{code:"\uf6a1"},tractor:{code:"\uf722"},"trade-federation":{code:"\uf513"},trademark:{code:"\uf25c"},"traffic-light":{code:"\uf637"},trailer:{code:"\uf941"},train:{code:"\uf238"},tram:{code:"\uf7da"},transgender:{code:"\uf224"},
"transgender-alt":{code:"\uf225"},trash:{code:"\uf1f8"},"trash-alt":{code:"\uf2ed"},"trash-restore":{code:"\uf829"},"trash-restore-alt":{code:"\uf82a"},tree:{code:"\uf1bb"},trello:{code:"\uf181"},tripadvisor:{code:"\uf262"},trophy:{code:"\uf091"},truck:{code:"\uf0d1"},"truck-loading":{code:"\uf4de"},"truck-monster":{code:"\uf63b"},"truck-moving":{code:"\uf4df"},"truck-pickup":{code:"\uf63c"},tshirt:{code:"\uf553"},tty:{code:"\uf1e4"},tumblr:{code:"\uf173"},"tumblr-square":{code:"\uf174"},tv:{code:"\uf26c"},
twitch:{code:"\uf1e8"},twitter:{code:"\uf099"},"twitter-square":{code:"\uf081"},typo3:{code:"\uf42b"},uber:{code:"\uf402"},ubuntu:{code:"\uf7df"},uikit:{code:"\uf403"},umbraco:{code:"\uf8e8"},umbrella:{code:"\uf0e9"},"umbrella-beach":{code:"\uf5ca"},underline:{code:"\uf0cd"},undo:{code:"\uf0e2"},"undo-alt":{code:"\uf2ea"},uniregistry:{code:"\uf404"},unity:{code:"\uf949"},"universal-access":{code:"\uf29a"},university:{code:"\uf19c"},unlink:{code:"\uf127"},unlock:{code:"\uf09c"},"unlock-alt":{code:"\uf13e"},
untappd:{code:"\uf405"},upload:{code:"\uf093"},ups:{code:"\uf7e0"},usb:{code:"\uf287"},user:{code:"\uf007"},"user-alt":{code:"\uf406"},"user-alt-slash":{code:"\uf4fa"},"user-astronaut":{code:"\uf4fb"},"user-check":{code:"\uf4fc"},"user-circle":{code:"\uf2bd"},"user-clock":{code:"\uf4fd"},"user-cog":{code:"\uf4fe"},"user-edit":{code:"\uf4ff"},"user-friends":{code:"\uf500"},"user-graduate":{code:"\uf501"},"user-injured":{code:"\uf728"},"user-lock":{code:"\uf502"},"user-md":{code:"\uf0f0"},"user-minus":{code:"\uf503"},
"user-ninja":{code:"\uf504"},"user-nurse":{code:"\uf82f"},"user-plus":{code:"\uf234"},"user-secret":{code:"\uf21b"},"user-shield":{code:"\uf505"},"user-slash":{code:"\uf506"},"user-tag":{code:"\uf507"},"user-tie":{code:"\uf508"},"user-times":{code:"\uf235"},users:{code:"\uf0c0"},"users-cog":{code:"\uf509"},usps:{code:"\uf7e1"},ussunnah:{code:"\uf407"},"utensil-spoon":{code:"\uf2e5"},utensils:{code:"\uf2e7"},vaadin:{code:"\uf408"},"vector-square":{code:"\uf5cb"},venus:{code:"\uf221"},"venus-double":{code:"\uf226"},
"venus-mars":{code:"\uf228"},viacoin:{code:"\uf237"},viadeo:{code:"\uf2a9"},"viadeo-square":{code:"\uf2aa"},vial:{code:"\uf492"},vials:{code:"\uf493"},viber:{code:"\uf409"},video:{code:"\uf03d"},"video-slash":{code:"\uf4e2"},vihara:{code:"\uf6a7"},vimeo:{code:"\uf40a"},"vimeo-square":{code:"\uf194"},"vimeo-v":{code:"\uf27d"},vine:{code:"\uf1ca"},vk:{code:"\uf189"},vnv:{code:"\uf40b"},voicemail:{code:"\uf897"},"volleyball-ball":{code:"\uf45f"},"volume-down":{code:"\uf027"},"volume-mute":{code:"\uf6a9"},
"volume-off":{code:"\uf026"},"volume-up":{code:"\uf028"},"vote-yea":{code:"\uf772"},"vr-cardboard":{code:"\uf729"},vuejs:{code:"\uf41f"},walking:{code:"\uf554"},wallet:{code:"\uf555"},warehouse:{code:"\uf494"},water:{code:"\uf773"},"wave-square":{code:"\uf83e"},waze:{code:"\uf83f"},weebly:{code:"\uf5cc"},weibo:{code:"\uf18a"},weight:{code:"\uf496"},"weight-hanging":{code:"\uf5cd"},weixin:{code:"\uf1d7"},whatsapp:{code:"\uf232"},"whatsapp-square":{code:"\uf40c"},wheelchair:{code:"\uf193"},whmcs:{code:"\uf40d"},
wifi:{code:"\uf1eb"},"wikipedia-w":{code:"\uf266"},wind:{code:"\uf72e"},"window-close":{code:"\uf410"},"window-maximize":{code:"\uf2d0"},"window-minimize":{code:"\uf2d1"},"window-restore":{code:"\uf2d2"},windows:{code:"\uf17a"},"wine-bottle":{code:"\uf72f"},"wine-glass":{code:"\uf4e3"},"wine-glass-alt":{code:"\uf5ce"},wix:{code:"\uf5cf"},"wizards-of-the-coast":{code:"\uf730"},"wolf-pack-battalion":{code:"\uf514"},"won-sign":{code:"\uf159"},wordpress:{code:"\uf19a"},"wordpress-simple":{code:"\uf411"},
wpbeginner:{code:"\uf297"},wpexplorer:{code:"\uf2de"},wpforms:{code:"\uf298"},wpressr:{code:"\uf3e4"},wrench:{code:"\uf0ad"},"x-ray":{code:"\uf497"},xbox:{code:"\uf412"},xing:{code:"\uf168"},"xing-square":{code:"\uf169"},"y-combinator":{code:"\uf23b"},yahoo:{code:"\uf19e"},yammer:{code:"\uf840"},yandex:{code:"\uf413"},"yandex-international":{code:"\uf414"},yarn:{code:"\uf7e3"},yelp:{code:"\uf1e9"},"yen-sign":{code:"\uf157"},"yin-yang":{code:"\uf6ad"},yoast:{code:"\uf2b1"},youtube:{code:"\uf167"},
"youtube-square":{code:"\uf431"},zhihu:{code:"\uf63f"}});Bs.Icons=tM;Bs.Icons=tM;Bs.Icons=tM;var Je=lively.FreezerRuntime.recorderFor("lively.morphic/rendering/renderer.js");Je.vdom=XG;Je.promise=zh;Je.arr=$f;Je.tree=wu;Je.obj=Ag;Je.string=pi;Je.addOrChangeCSSDeclaration=Yr;Je.addOrChangeLinkedCSS=Qu;Je.defaultStyle=Px;Je.renderGradient=JC;Je.defaultAttributes=Qx;Je.defaultCSS="\n\n/*-=- html fixes -=-*/\n\nhtml {\n  overflow: visible;\n}\n\ntextarea.lively-text-input.debug {\n  z-index: 20 !important;\n  opacity: 1 !important;\n  background: rgba(0,255,0,0.5) !important;\n}\n\n.no-html-select {\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -khtml-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n\n.hiddenScrollbar::-webkit-scrollbar {\n  /* This is the magic bit */\n  display: none;\n}\n\n\n/*-=- generic morphic -=-*/\n\n.Morph {\n  outline: none;\n  /*for aliasing issue in chrome: http://stackoverflow.com/questions/6492027/css-transform-jagged-edges-in-chrome*/\n  /* -webkit-backface-visibility: hidden; */\n\n  /*include border size in extent of element*/\n  box-sizing: border-box;\n\n  /*don't use dom selection on morphs*/\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -khtml-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n\n.Morph img {\n  -moz-user-select: none;\n}\n\n.Tooltip {\n  z-index: 3;\n}\n\n.Hand {\n  z-index: 1;\n}\n\n/*-=- halos -=-*/\n\n.Halo {\n  z-index: 2;\n}\n\n.ProportionalLayoutHalo, .FlexLayoutHalo, .GridLayoutHalo, .TilingLayoutHalo {\n  z-index: auto;\n}\n\n.HaloItem:not(.NameHaloItem) {\n  /*FIXME: we shouldn't need to hardcode the size...*/\n  line-height: 24px !important;\n  text-align: center;\n  vertical-align: middle;\n}\n\n.halo-mesh {\n  background-color:transparent;\n  background-image: linear-gradient(rgba(0,0,0,.1) 2px, transparent 2px),\n  linear-gradient(90deg, rgba(0,0,0,.1) 2px, transparent 2px),\n  linear-gradient(rgba(0,0,0,.1) 1px, transparent 1px),\n  linear-gradient(90deg, rgba(0,0,0,.1) 1px, transparent 1px);\n  background-size:100px 100px, 100px 100px, 10px 10px, 10px 10px;\n  background-position:-2px -2px, -2px -2px, -1px -1px, -1px -1px;\n}\n\n/*-=- text -=-*/\n\n.center-text {\n  text-align: center;\n}\n\n.v-center-text {\n  position: relative;\n  top: 50%;\n}\n\ndiv.text-layer span {\n  line-height: normal;\n}\n\n/*-=- text -=-*/\n\n.Label span {\n  white-space: pre;\n  float: left;\n  line-height: initial;\n  -moz-user-select: none;\n}\n\n.Text .annotation {\n  text-align: right;\n  position: absolute;\n  right: 0;\n}\n\n.Label .annotation {\n/*  vertical-align: middle;\n  height: 100%;*/\n  /*vertical align*/\n  float: right;\n  position: relative;\n  top: 50%;\n  text-align: right;\n}\n\n.truncated-text {\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n/*-=- input elements -=-*/\n\ninput::-webkit-input-placeholder {\n  color: rgb(202, 202, 202);\n}\ninput::-moz-placeholder {\n  color: rgb(202, 202, 202);\n}\ninput:-ms-input-placeholder {\n  color: rgb(202, 202, 202);\n}\ninput:-moz-placeholder {\n  color: rgb(202, 202, 202);\n}\ninput:placeholder {\n  color: rgb(202, 202, 202);\n}\n\n/*-=- input elements -=-*/\n.Morph svg .path-point {\n  cursor: move; /* fallback if grab cursor is unsupported */\n  cursor: grab;\n  cursor: -moz-grab;\n  cursor: -webkit-grab;\n  fill: red;\n}\n\n";
Je.pathAttributes=IC;Je.svgAttributes=Wz;Je.renderMorph=KC;Je.Transform=$k;Je.pt=xi;Je.getSvgVertices=Ox;Je.config=Dn;var uM=Je.vdom;Je.h=uM.h;Je.diff=uM.diff;Je.patch=uM.patch;Je.createNode=uM.create;Je.svgNs="http://www.w3.org/2000/svg";Je.InitStroke=function(f,k,n){this.path=f;this.renderer=k;this.reverse=n};Je.InitStroke.prototype.hook=function(f,k,n){k=this.path.drawnProportion||0;0!=k&&(f.setAttribute("stroke-width",this.path.borderWidth.valueOf()+1),f.setAttribute("stroke-dasharray",f.getTotalLength()),
f.setAttribute("stroke-dashoffset",f.getTotalLength()*(this.reverse?1-k:-1+(1-k))))};var vM=function(f){var k=lively.FreezerRuntime.recorderFor("lively.morphic/rendering/renderer.js"),n=k.hasOwnProperty("Renderer")&&"function"===typeof k.Renderer?k.Renderer:k.Renderer=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return dc(n,f,[{key:Symbol.for("lively-instance-initialize"),value:function(b,e,m){if(!b||!b.isMorph)throw Error("Trying to initialize renderer with an invalid world morph: "+
b);if(!(e&&"nodeType"in e))throw Error("Trying to initialize renderer with an invalid root node: "+e);m||(m={window:System.global,document:e.ownerDocument});this.worldMorph=b;b._renderer=this;this.rootNode=e;this.domNode=null;this.domEnvironment=m;this.renderMap=new WeakMap;this.fixedMorphNodeMap=new Map;this.renderWorldLoopLater=this.renderWorldLoopProcess=null;this.requestAnimationFrame=m.window.requestAnimationFrame.bind(m.window)}},{key:"clear",value:function(){var b=this,e,m;return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){switch(a.nextAddress){case 1:return e=
b.domNode,a.setCatchFinallyBlocks(2),a.yield(b.stopRenderWorldLoop(),4);case 4:a.leaveTryBlock(3);break;case 2:a.enterCatchBlock();case 3:e&&(m=e.parentNode,m.removeChild(e),[].concat($jscomp.arrayFromIterable(b.fixedMorphNodeMap.values())).forEach(function(g){return m.removeChild(g)})),b.domNode=null,b.renderMap=new WeakMap,a.jumpToEnd()}})}},{key:"ensureDefaultCSS",value:function(){var b=this;return Je.promise.waitFor(3E3,function(){return b.domNode.ownerDocument}).then(function(e){return Promise.all([Je.addOrChangeCSSDeclaration("lively-morphic-css",
Je.defaultCSS,e),Je.addOrChangeLinkedCSS("lively-ibm-plex",Je.config.css.ibmPlex),Je.addOrChangeLinkedCSS("lively-font-awesome",Je.config.css.fontAwesome,e,!1),Je.addOrChangeLinkedCSS("lively-font-inconsolata",Je.config.css.inconsolata,e,!1)])})}},{key:"startRenderWorldLoop",value:function(){var b=this;this._stopped=!1;this._renderWorldLoopLater=null;this.renderWorldLoopProcess=this.requestAnimationFrame(function(){return b.startRenderWorldLoop()});return this.renderStep()}},{key:"stopRenderWorldLoop",
value:function(){var b=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){b._stopped=!0;b.domEnvironment.window.cancelAnimationFrame(b.renderWorldLoopProcess);b.renderWorldLoopProcess=null;b.domEnvironment.window.cancelAnimationFrame(b.renderWorldLoopLater);b.renderWorldLoopLater=null;return e.yield(Je.promise.waitFor(2E3,function(){return!b.worldMorph.needsRerender()}),0)})}},{key:"renderLater",value:function(b){var e=this;this.renderWorldLoopLaterCounter=void 0===b?10:b;this.renderWorldLoopLater||
this._stopped||(this.renderWorldLoopLater=this.requestAnimationFrame(function(){e.renderWorldLoopLater=null;0<e.renderWorldLoopLaterCounter&&e.renderLater(e.renderWorldLoopLaterCounter-1);try{e.renderStep()}catch(m){console.error("Error rendering morphs:",m)}}))}},{key:"renderStep",value:function(){this.worldMorph.renderAsRoot(this);return this}},{key:"getNodeForMorph",value:function(b){var e="#"+Je.string.regExpEscape(b.id),m=this.domNode&&this.domNode.querySelector(e);this.domNode&&this.domNode.id==
b.id&&(m=this.domNode);if(m)return m;b=$jscomp.makeIterator(this.fixedMorphNodeMap.values());for(m=b.next();!m.done;m=b.next())if(m=m.value.querySelector(e))return m;return null}},{key:"getMorphForNode",value:function(b){return this.worldMorph?this.worldMorph.withAllSubmorphsDetect(function(e){return e.id===b.id}):null}},{key:"render",value:function(b){if(!b.needsRerender()){var e=this.renderMap.get(b);if(e)return e}b.aboutToRender(this);e=b.render(this);this.renderMap.set(b,e);return e}},{key:"renderAsFixed",
value:function(b){b=this.render(b);b.properties.style.position="fixed";return b}},{key:"renderFixedMorphs",value:function(b,e){e=this.domNode;var m=this.fixedMorphNodeMap;if((b.length||m.size)&&e&&e.parentNode){e=e.parentNode;for(var a=$jscomp.makeIterator(m),g=a.next();!g.done;g=a.next()){var l=$jscomp.makeIterator(g.value);g=l.next().value;l=l.next().value;b.includes(g)||(l.parentNode.removeChild(l),m.delete(g))}a=b.map(function(y){return m.get(y)});var r=a.map(function(y){return y&&y.id});g=[].concat($jscomp.arrayFromIterable(e.children)).map(function(y){return y.id}).filter(function(y){return r.includes(y)});
Je.arr.equals(r,g)||a.map(function(y){return y&&y.parentNode&&y.parentNode.removeChild(y)});b=$jscomp.makeIterator(b);for(a=b.next();!a.done;a=b.next()){a=a.value;g=this.renderMap.get(a)||this.renderAsFixed(a);l=this.renderAsFixed(a);l=Je.diff(g,l);var v=m.get(a);v||(v=Je.createNode(g,this.domEnvironment),m.set(a,v));v.parentNode||e.appendChild(v);Je.patch(v,l)}}}},{key:"renderMorph",value:function(b){var e=this.renderSubmorphs(b);return Je.h("div",Object.assign({},Je.defaultAttributes(b,this),{style:Je.defaultStyle(b)}),
e)}},{key:"renderSubmorphs",value:function(b){return this.renderSelectedSubmorphs(b,b.submorphs)}},{key:"renderSelectedSubmorphs",value:function(b,e){var m=b.borderWidthLeft,a=b.borderWidthTop,g=b.origin,l=g.x;g=g.y;for(var r=e.length-1,v=Array(r+1);0<=r;r--)e[r].__stackIdx__=r,v[r]=this.render(e[r]);e={};return Je.h("div",{style:Object.assign({position:"absolute",left:l-(b.isPath?0:m)+"px",top:g-(b.isPath?0:a)+"px"},b.isPolygon?Object.assign({height:"100%",width:"100%",overflow:b.clipMode},"visible"!==
b.clipMode?(e[navigator.userAgent.includes("AppleWebKit")?"-webkit-clip-path":"clip-path"]="url(#clipPath"+b.id+")",e):{}):{})},v)}},{key:"renderWorld",value:function(b){for(var e=b.submorphs,m=[],a=[],g=0;g<e.length;g++){var l=e[g];l.hasFixedPosition?a.push(l):m.push(l)}e=this.renderSelectedSubmorphs(b,m);b=Je.h("div",Object.assign({},Je.defaultAttributes(b,this),{style:Je.defaultStyle(b)}),e);b.fixedMorphs=a;return b}},{key:"renderImage",value:function(b){var e=b.imageUrl;if(e.startsWith("data:")){var m=
e.indexOf(","),a=e.substring(5,m),g=$jscomp.makeIterator(a.split(";"));a=g.next().value;g=g.next().value;m=e.substring(m+1);"base64"!==g&&(e=Je.string.createDataURI(m,a))}return Je.h("div",Object.assign({},Je.defaultAttributes(b,this),{style:Je.defaultStyle(b)}),[Je.h("img",{src:e,alt:b.tooltip||"",draggable:!1,style:{"pointer-events":"none",position:"absolute",left:0,width:"100%",height:"100%"}}),this.renderSubmorphs(b)])}},{key:"renderCanvas",value:function(b){var e=function(){};e.prototype.hook=
function(m,a,g){b.afterRender(m,b._canvas!==m)};return Je.h("div",Object.assign({},Je.defaultAttributes(b,this),{style:Je.defaultStyle(b)}),[Je.h("canvas",{width:b.width,height:b.height,style:{"pointer-events":"none",position:"absolute"},canvasHook:new e}),this.renderSubmorphs(b)])}},{key:"renderCheckBox",value:function(b){return Je.h("div",Object.assign({},Je.defaultAttributes(b,this),{style:Je.defaultStyle(b)}),[Je.h("input",{type:"checkbox",checked:b.checked,disabled:!b.active,draggable:!1,style:{"pointer-events":"none",
width:"15px",height:"15px",position:"absolute"}}),this.renderSubmorphs(b)])}},{key:"renderPath",value:function(b){var e=b.startMarker,m=b.endMarker,a=b.showControlPoints,g=Je.getSvgVertices(b.vertices),l=Je.h("path",Object.assign({namespace:Je.svgNs,id:"svg"+b.id},Je.pathAttributes(b))),r=Je.h("mask",{namespace:Je.svgNs,id:"mask"+b.id},[Je.h("rect",{namespace:Je.svgNs,attributes:{fill:"white",x:0,y:0,width:b.width+20,height:b.height+20}}),Je.h("path",{namespace:Je.svgNs,initStroke:new Je.InitStroke(b,
this,!0),attributes:{d:g,stroke:"black",fill:"none"}}),Je.h("path",{namespace:Je.svgNs,initStroke:new Je.InitStroke(b,this,!1),attributes:{d:g,stroke:"white",fill:"none"}})]);g=[Je.h("clipPath",{namespace:Je.svgNs,id:"clipPath"+b.id},Je.h("path",{namespace:Je.svgNs,attributes:{d:g,fill:"white"}})),r];e&&(e.id||(e.id="start-marker"),l.properties.attributes["marker-start"]="url(#"+b.id+"-"+e.id+")",g=[],g.push(this._renderPath_Marker(b,e)));m&&(m.id||(m.id="end-marker"),l.properties.attributes["marker-end"]=
"url(#"+b.id+"-"+m.id+")",g||(g=[]),g.push(this._renderPath_Marker(b,m)));var v;a&&(v=Je.h("g",{namespace:Je.svgNs},this._renderPath_ControlPoints(b)));return this.renderSvgMorph(b,l,g,v)}},{key:"_renderPath_ControlPoints",value:function(b,e){function m(W,X,ea,Aa,Ma,K){var aa=Aa?12:Math.min(8,Math.max(3,l));ea="path-point path-point-"+ea;Aa=Aa?"orange":r;"string"===typeof Ma&&(ea+="-"+Ma);K&&(aa=Math.max(3,Math.ceil(aa/2)));return K?Je.h("circle",{namespace:Je.svgNs,style:{fill:"white","stroke-width":2,
stroke:Aa},attributes:{class:ea,cx:W,cy:X,r:aa}}):Je.h("circle",{namespace:Je.svgNs,style:{fill:Aa},attributes:{class:ea,cx:W,cy:X,r:aa}})}var a=b.vertices;e=b.borderWidth;var g=b.showControlPoints;b=b._controlPointDrag;var l=0==e?6:e+2,r="red";e=[];if("object"===typeof g){var v=g.radius;(g=g.fill)&&(r=String(g));"number"===typeof v&&(l=v)}if(a.length){g=0;var y=a[0];v=y.x;var A=y.y;y=y.controlPoints.next;var E=b&&b.maybeMerge&&b.maybeMerge.includes(g);e.push(m(v,A,g,E));for(g=1;g<a.length-1;g++){var F=
a[g];E=F.isSmooth;var H=F.x,I=F.y,M=F.controlPoints;F=M.previous;M=M.next;var N=b&&b.maybeMerge&&b.maybeMerge.includes(g);E?e.push(m(H,I,g,N),m(v+y.x,A+y.y,g-1,!1,"control-2",!0),m(H+F.x,I+F.y,g,!1,"control-1",!0)):e.push(m(H,I,g,N));v=H;A=I;y=M}I=a[a.length-1];a=I.isSmooth;E=I.x;H=I.y;I=I.controlPoints.previous;b=b&&b.maybeMerge&&b.maybeMerge.includes(g);a?e.push(m(E,H,g,b),m(v+y.x,A+y.y,g-1,!1,"control-2",!0),m(E+I.x,H+I.y,g,!1,"control-1",!0)):e.push(m(E,H,g,b))}return e}},{key:"_renderPath_Marker",
value:function(b,e){function m(a){var g=a.tagName,l=a.id,r=a.children,v=a.style;r=r?r.map(m):void 0;l&&(l=b.id+"-"+l);return Je.h(g,{namespace:Je.svgNs,id:l,style:v,attributes:Je.obj.dissoc(a,["tagName","id","children","style"])},r)}return m(e)}},{key:"renderSvgMorph",value:function(b,e,m,a){a=void 0===a?[]:a;var g=Je.svgAttributes(b),l=b.innerBounds(),r=l.width;l=l.height;var v,y=[];b.fill&&b.fill.isGradient&&(v||(v=[]),v.push(Je.renderGradient("fill"+b.id,b.extent,b.fill)));b.borderColor&&b.borderColor.valueOf().isGradient&&
(v||(v=[]),v.push(Je.renderGradient("borderColor"+b.id,b.extent,b.borderColor)));m&&m.length&&(v||(v=[]),v.push.apply(v,$jscomp.arrayFromIterable(m)));y.push(e);v&&y.push(Je.h("defs",{namespace:Je.svgNs},v));e=Je.obj.select(Je.defaultStyle(b),"position filter display opacity transform top left transformOrigin cursor overflow".split(" "));return Je.h("div",Object.assign({},Je.defaultAttributes(b,this),{style:Object.assign({},e,{width:r+"px",height:l+"px","pointer-events":b.reactsToPointer?"auto":"none"})}),
[Je.h("svg",Object.assign({namespace:Je.svgNs,version:"1.1",style:{position:"absolute","stroke-linejoin":b.cornerStyle||"mint","stroke-linecap":b.endStyle||"round",overflow:"visible"}},g),y),this.renderSubmorphs(b),Je.h("svg",Object.assign({namespace:Je.svgNs,version:"1.1",style:{position:"absolute",overflow:"visible"}},g),a)])}},{key:"renderPreview",value:function(b,e){var m=void 0===e.center?!0:e.center,a=void 0===e.ignoreMorphs?[]:e.ignoreMorphs,g=void 0===e.asNode?!1:e.asNode,l=b.origin,r=b.rotation,
v=void 0===e.width?100:e.width;e=void 0===e.height?100:e.height;var y=Math.max(.1,1/b.scale);y=(new Je.Transform(b.position.negated(),0,Je.pt(y,y))).transformRectToRect(b.bounds());var A=Math.max(.1,Math.min(v/y.width,e/y.height));l=new Je.Transform(y.topLeft().negated().scaleBy(A).subPt(l),r,Je.pt(A,A));r=(r=this.getNodeForMorph(b))?r.cloneNode(!0):Je.renderMorph(b);m&&(b=l.transformRectToRect(b.extent.extentAsRectangle()),l=l.preConcatenate(new Je.Transform(Je.pt(b.width<v?(v-b.width)/2:0,b.height<
e?(e-b.height)/2:0))));r.style.transform=l.toCSSTransformString();r.style.pointerEvents="";Je.tree.prewalk(r,function(E){if("string"===typeof E.className){var F=E.className.split(" ").map(function(H){return H.trim()}).filter(Boolean);F.includes("Morph")&&(E.className=Je.arr.withoutAll(F,["morph","Morph"]).join(" "),a.find(function(H){return H.id===E.id})&&E.remove(),E.id="")}},function(E){return Array.from(E.childNodes)});return g?r:r.outerHTML}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Renderer"}},
{key:"default",value:function(){return this._default||new this}}],k,{pathInPackage:function(){return"rendering/renderer.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:1125,end:20319})}(void 0);Je.Renderer=vM;Je.Renderer=vM;Je.Renderer=vM;var RD=lively.FreezerRuntime.recorderFor("lively.morphic/rendering/font-detector.js"),E6=
function(f){var k=lively.FreezerRuntime.recorderFor("lively.morphic/rendering/font-detector.js"),n=k.hasOwnProperty("FontDetector")&&"function"===typeof k.FontDetector?k.FontDetector:k.FontDetector=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return dc(n,f,[{key:Symbol.for("lively-instance-initialize"),value:function(b){this.document=b;this.prepared=!1;this.defaultWidth={};this.defaultHeight={};this.possibleFontWeights=
"normal bold bolder lighter 100 200 300 400 500 600 700 800 900".split(" ");this.namedToNumeric=new Map("Thin;Extra Light;Light;Normal;Medium;Semi Bold;Bold;Extra Bold;Ultra Bold".split(";").map(function(e,m){return[e,String(100*(m+1))]}));this.baseFonts=["monospace","sans-serif","serif","Comic Sans MS"];this.span=null}},{key:"prepare",value:function(){var b=this.defaultWidth,e=this.defaultHeight,m=this.possibleFontWeights,a=this.baseFonts,g=this.document.getElementsByTagName("body")[0],l=this.span||
this.document.createElement("span");l.style.fontSize="72px";l.style.opacity=0;l.innerHTML="mmmmmmmmmmlli";if(!l.parentNode){var r=this.document.createElement("div");r.style.position="absolute";r.style.width="100%";r.style.overflow="hidden";r.style["pointer-events"]="none";r.style["-webkit-user-select"]="none";r.appendChild(l);g.appendChild(r)}for(var v in m)for(var y in a)l.style.fontFamily=a[y],l.style.fontWeight=m[v],b[a[y]+"@"+m[v]]=l.offsetWidth,e[a[y]+"@"+m[v]]=l.offsetHeight;this.span=l;this.prepared=
!0}},{key:"isFontSupported",value:function(b,e){e=void 0===e?"normal":e;this.possibleFontWeights.includes(e)||(e=this.namedToNumeric.get(e)||"normal");this.prepared||this.prepare();var m=this.defaultWidth,a=this.defaultHeight,g=this.baseFonts,l=this.span,r=this.document.body;l.parentNode||r.appendChild(l);for(var v in g)if(l.style.fontWeight=e,l.style.fontFamily=b+","+g[v],l.offsetWidth!=m[g[v]+"@"+e]||l.offsetHeight!=a[g[v]+"@"+e])return!0;return!1}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"FontDetector"}},
{key:"fonts",get:function(){return RD.fonts}}],k,{pathInPackage:function(){return"rendering/font-detector.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:15,end:3672})}(void 0),Uka=E6=RD.FontDetector,bU=[{name:"serif",type:"default"},{name:"sans-serif",type:"default"},{name:"monospace",type:"default"},{name:"Adobe Jenson",type:"serif"},
{name:"Albertus",type:"serif"},{name:"Aldus",type:"serif"},{name:"Alexandria",type:"serif"},{name:"Algerian",type:"serif"},{name:"American Typewriter",type:"serif"},{name:"Antiqua",type:"serif"},{name:"Arno",type:"serif"},{name:"Aster",type:"serif"},{name:"Aurora",type:"serif"},{name:"News 706",type:"serif"},{name:"Baskerville",type:"serif"},{name:"Bell",type:"serif"},{name:"Belwe Roman",type:"serif"},{name:"Bembo",type:"serif"},{name:"Berkeley Old Style",type:"serif"},{name:"Bernhard Modern",type:"serif"},
{name:"Bodoni",type:"serif"},{name:"Book Antiqua",type:"serif"},{name:"Bookman",type:"serif"},{name:"Bulmer",type:"serif"},{name:"Caledonia",type:"serif"},{name:"Californian FB",type:"serif"},{name:"Calisto MT",type:"serif"},{name:"Cambria",type:"serif"},{name:"Capitals",type:"serif"},{name:"Cartier",type:"serif"},{name:"Caslon",type:"serif"},{name:"Wyld",type:"serif"},{name:"Caslon Antique / Fifteenth Century",type:"serif"},{name:"Catull",type:"serif"},{name:"Centaur",type:"serif"},{name:"Century Old Style",
type:"serif"},{name:"Century Schoolbook",type:"serif"},{name:"New Century Schoolbook",type:"serif"},{name:"Century Schoolbook Infant",type:"serif"},{name:"Charis SIL",type:"serif"},{name:"Charter (typeface)",type:"serif"},{name:"Cheltenham",type:"serif"},{name:"Clearface",type:"serif"},{name:"Cochin",type:"serif"},{name:"Colonna",type:"serif"},{name:"Computer Modern",type:"serif"},{name:"Concrete Roman",type:"serif"},{name:"Constantia",type:"serif"},{name:"Cooper Black",type:"serif"},{name:"Copperplate Gothic",
type:"serif"},{name:"Corona",type:"serif"},{name:"News 705",type:"serif"},{name:"DejaVu Serif",type:"serif"},{name:"Didot",type:"serif"},{name:"Droid Serif",type:"serif"},{name:"Elephant",type:"serif"},{name:"Emerson",type:"serif"},{name:"Excelsior",type:"serif"},{name:"News 702",type:"serif"},{name:"Fairfield",type:"serif"},{name:"FF Scala",type:"serif"},{name:"Footlight",type:"serif"},{name:"FreeSerif",type:"serif"},{name:"Friz Quadrata",type:"serif"},{name:"Garamond",type:"serif"},{name:"Gentium",
type:"serif"},{name:"Georgia",type:"serif"},{name:"Gloucester",type:"serif"},{name:"Goudy",type:"serif"},{name:"Granjon",type:"serif"},{name:"High Tower Text",type:"serif"},{name:"Hoefler Text",type:"serif"},{name:"Imprint",type:"serif"},{name:"Ionic No. 5",type:"serif"},{name:"News 701",type:"serif"},{name:"ITC Benguiat",type:"serif"},{name:"Janson",type:"serif"},{name:"Jokerman",type:"serif"},{name:"Joanna",type:"serif"},{name:"Korinna",type:"serif"},{name:"Lexicon",type:"serif"},{name:"Liberation Serif",
type:"serif"},{name:"Linux Libertine",type:"serif"},{name:"Literaturnaya",type:"serif"},{name:"Lucida Bright",type:"serif"},{name:"Melior",type:"serif"},{name:"Memphis",type:"serif"},{name:"Miller",type:"serif"},{name:"Minion",type:"serif"},{name:"Modern",type:"serif"},{name:"Mona Lisa",type:"serif"},{name:"Mrs Eaves",type:"serif"},{name:"MS Serif",type:"serif"},{name:"New York",type:"serif"},{name:"Nimbus Roman",type:"serif"},{name:"NPS Rawlinson Roadway",type:"serif"},{name:"OCR A Extended",type:"serif"},
{name:"Palatino",type:"serif"},{name:"Book Antiqua",type:"serif"},{name:"Perpetua",type:"serif"},{name:"Plantin",type:"serif"},{name:"Playbill",type:"serif"},{name:"Primer",type:"serif"},{name:"Renault",type:"serif"},{name:"Requiem",type:"serif"},{name:"Rotis Serif",type:"serif"},{name:"Sabon",type:"serif"},{name:"Sistina",type:"serif"},{name:"Souvenir",type:"serif"},{name:"XITS",type:"serif"},{name:"Sylfaen",type:"serif"},{name:"Times New Roman",type:"serif"},{name:"Times",type:"serif"},{name:"Torino",
type:"serif"},{name:"Trajan",type:"serif"},{name:"Trinit\u00e9",type:"serif"},{name:"Trump Mediaeval",type:"serif"},{name:"Utopia",type:"serif"},{name:"Vera Serif",type:"serif"},{name:"Wide Latin",type:"serif"},{name:"Windsor",type:"serif"},{name:"XITS",type:"serif"},{name:"Playfair Display",type:"serif",isGoogleFont:!0},{name:"Cormorant",type:"serif",isGoogleFont:!0},{name:"Eczar",type:"serif",isGoogleFont:!0},{name:"Alegreya",type:"serif",isGoogleFont:!0},{name:"Lora",type:"serif",isGoogleFont:!0},
{name:"Source Serif Pro",type:"serif",isGoogleFont:!0},{name:"Roboto Slab",type:"serif",isGoogleFont:!0},{name:"BioRhyme",type:"serif",isGoogleFont:!0},{name:"Libre Baskerville",type:"serif",isGoogleFont:!0},{name:"Crimson Text",type:"serif",isGoogleFont:!0},{name:"Old Standard TT",type:"serif",isGoogleFont:!0},{name:"Domine",type:"serif",isGoogleFont:!0},{name:"Bitter",type:"serif",isGoogleFont:!0},{name:"Gentium Basic",type:"serif",isGoogleFont:!0},{name:"PT Serif",type:"serif",isGoogleFont:!0},
{name:"Cardo",type:"serif",isGoogleFont:!0},{name:"Neuton",type:"serif",isGoogleFont:!0},{name:"Arvo",type:"serif",isGoogleFont:!0},{name:"Merriweather",type:"serif",isGoogleFont:!0},{name:"Alexandria",type:"slab serif"},{name:"American Typewriter",type:"slab serif"},{name:"Archer",type:"slab serif"},{name:"Athens",type:"slab serif"},{name:"Candida",type:"slab serif"},{name:"Cholla Slab",type:"slab serif"},{name:"City",type:"slab serif"},{name:"Clarendon",type:"slab serif"},{name:"Concrete Roman",
type:"slab serif"},{name:"Courier",type:"slab serif"},{name:"Egyptienne",type:"slab serif"},{name:"Guardian Egyptian",type:"slab serif"},{name:"Ionic No. 5",type:"slab serif"},{name:"Lexia",type:"slab serif"},{name:"Memphis",type:"slab serif"},{name:"Nilland",type:"slab serif"},{name:"Roboto Slab",type:"slab serif"},{name:"Rockwell",type:"slab serif"},{name:"Schadow",type:"slab serif"},{name:"Serifa",type:"slab serif"},{name:"Skeleton Antique",type:"slab serif"},{name:"Sreda",type:"slab serif"},{name:"Swift",
type:"slab serif"},{name:"Tower",type:"slab serif"},{name:"Agency FB",type:"sans-serif"},{name:"Akzidenz-Grotesk",type:"sans-serif"},{name:"Andal\u00e9 Sans",type:"sans-serif"},{name:"Antique Olive",type:"sans-serif"},{name:"Arial",type:"sans-serif"},{name:"Arial Unicode MS",type:"sans-serif"},{name:"Avant Garde Gothic",type:"sans-serif"},{name:"Avenir",type:"sans-serif"},{name:"Bank Gothic",type:"sans-serif"},{name:"Bauhaus",type:"sans-serif"},{name:"Bell Centennial",type:"sans-serif"},{name:"Bell Gothic",
type:"sans-serif"},{name:"Benguiat Gothic",type:"sans-serif"},{name:"Berlin Sans",type:"sans-serif"},{name:"Brandon Grotesque",type:"sans-serif"},{name:"Calibri",type:"sans-serif"},{name:"Casey",type:"sans-serif"},{name:"Century Gothic",type:"sans-serif"},{name:"Charcoal",type:"sans-serif"},{name:"Chicago",type:"sans-serif"},{name:"Clearview",type:"sans-serif"},{name:"Comic Sans",type:"sans-serif"},{name:"Compacta",type:"sans-serif"},{name:"Corbel",type:"sans-serif"},{name:"DejaVu Sans",type:"sans-serif"},
{name:"DIN",type:"sans-serif"},{name:"Dotum",type:"sans-serif"},{name:"Droid Sans",type:"sans-serif"},{name:"Dyslexie",type:"sans-serif"},{name:"Ecofont",type:"sans-serif"},{name:"Eras",type:"sans-serif"},{name:"Esseltub",type:"sans-serif"},{name:"Espy Sans",type:"sans-serif"},{name:"Eurocrat",type:"sans-serif"},{name:"Eurostile",type:"sans-serif"},{name:"Square 721",type:"sans-serif"},{name:"FF Dax",type:"sans-serif"},{name:"FF Meta",type:"sans-serif"},{name:"FF Scala Sans",type:"sans-serif"},{name:"Fira Sans",
type:"sans-serif"},{name:"Folio",type:"sans-serif"},{name:"Franklin Gothic",type:"sans-serif"},{name:"FreeSans",type:"sans-serif"},{name:"Frutiger",type:"sans-serif"},{name:"Futura",type:"sans-serif"},{name:"Geneva",type:"sans-serif"},{name:"Gill Sans",type:"sans-serif"},{name:"Gill Sans Schoolbook",type:"sans-serif"},{name:"Gotham",type:"sans-serif"},{name:"Haettenschweiler",type:"sans-serif"},{name:"Handel Gothic",type:"sans-serif"},{name:"Hei",type:"sans-serif"},{name:"Helvetica",type:"sans-serif"},
{name:"Helvetica Neue",type:"sans-serif"},{name:"Swiss 721",type:"sans-serif"},{name:"Highway Gothic",type:"sans-serif"},{name:"Hobo",type:"sans-serif"},{name:"Impact",type:"sans-serif"},{name:"Industria",type:"sans-serif"},{name:"Interstate",type:"sans-serif"},{name:"Johnston/New Johnston",type:"sans-serif"},{name:"Kabel",type:"sans-serif"},{name:"Klavika",type:"sans-serif"},{name:"Lexia Readable",type:"sans-serif"},{name:"Liberation Sans",type:"sans-serif"},{name:"Linux Biolinum",type:"sans-serif"},
{name:"Lucida Sans",type:"sans-serif"},{name:"Lucida Grande",type:"sans-serif"},{name:"Lucida Sans Unicode",type:"sans-serif"},{name:"Lydian",type:"sans-serif"},{name:"Meiryo",type:"sans-serif"},{name:"Meta",type:"sans-serif"},{name:"Microgramma",type:"sans-serif"},{name:"Modern",type:"sans-serif"},{name:"Motorway",type:"sans-serif"},{name:"Arial",type:"sans-serif"},{name:"Myriad",type:"sans-serif"},{name:"Neutraface",type:"sans-serif"},{name:"Neuzeit S",type:"sans-serif"},{name:"News Gothic",type:"sans-serif"},
{name:"Nimbus Sans L",type:"sans-serif"},{name:"Open Sans",type:"sans-serif"},{name:"Optima",type:"sans-serif"},{name:"Paris",type:"sans-serif"},{name:"Product Sans",type:"sans-serif"},{name:"Proxima Nova",type:"sans-serif"},{name:"Russian Federation",type:"sans-serif"},{name:"Rail Alphabet",type:"sans-serif"},{name:"Roboto",type:"sans-serif"},{name:"Rotis Sans",type:"sans-serif"},{name:"Segoe UI",type:"sans-serif"},{name:"Skia",type:"sans-serif"},{name:"Source Sans Pro",type:"sans-serif"},{name:"Sweden Sans",
type:"sans-serif"},{name:"Syntax",type:"sans-serif"},{name:"Tahoma",type:"sans-serif"},{name:"Template Gothic",type:"sans-serif"},{name:"Thesis Sans",type:"sans-serif"},{name:"Tiresias",type:"sans-serif"},{name:"Trade Gothic",type:"sans-serif"},{name:"Transport",type:"sans-serif"},{name:"Trebuchet MS",type:"sans-serif"},{name:"Twentieth Century (Tw Cen MT)",type:"sans-serif"},{name:"Ubuntu",type:"sans-serif"},{name:"Univers",type:"sans-serif"},{name:"Zurich",type:"sans-serif"},{name:"Vera Sans",type:"sans-serif"},
{name:"Verdana",type:"sans-serif"},{name:"Work Sans",type:"sans-serif",isGoogleFont:!0},{name:"Rubik",type:"sans-serif",isGoogleFont:!0},{name:"Libre Franklin",type:"sans-serif",isGoogleFont:!0},{name:"Fira Sans",type:"sans-serif",isGoogleFont:!0},{name:"Alegreya Sans",type:"sans-serif",isGoogleFont:!0},{name:"Chivo",type:"sans-serif",isGoogleFont:!0},{name:"Source Sans Pro",type:"sans-serif",isGoogleFont:!0},{name:"Roboto",type:"sans-serif",isGoogleFont:!0},{name:"Poppins",type:"sans-serif",isGoogleFont:!0},
{name:"Archivo Narrow",type:"sans-serif",isGoogleFont:!0},{name:"Karla",type:"sans-serif",isGoogleFont:!0},{name:"Montserrat",type:"sans-serif",isGoogleFont:!0},{name:"Rajdhani",type:"sans-serif",isGoogleFont:!0},{name:"PT Sans",type:"sans-serif",isGoogleFont:!0},{name:"Lato",type:"sans-serif",isGoogleFont:!0},{name:"Open Sans",type:"sans-serif",isGoogleFont:!0},{name:"Cabin",type:"sans-serif",isGoogleFont:!0},{name:"Raleway",type:"sans-serif",isGoogleFont:!0},{name:"Nyala",type:"semi-serif"},{name:"Rotis Semi Serif",
type:"semi-serif"},{name:"Easyreading",type:"semi-serif"},{name:"Andal\u00e9 Mono",type:"monospace"},{name:"Arial",type:"monospace"},{name:"Bitstream Vera (Vera Sans Mono)",type:"monospace"},{name:"Consolas",type:"monospace"},{name:"Courier",type:"monospace"},{name:"Courier New",type:"monospace"},{name:"DejaVu Sans Mono",type:"monospace"},{name:"Droid Sans Mono",type:"monospace"},{name:"Everson Mono",type:"monospace"},{name:"Fixed",type:"monospace"},{name:"Fixedsys",type:"monospace"},{name:"Fixedsys Excelsior",
type:"monospace"},{name:"HyperFont",type:"monospace"},{name:"Inconsolata",type:"monospace"},{name:"Letter Gothic",type:"monospace"},{name:"Liberation Mono",type:"monospace"},{name:"Lucida Console",type:"monospace"},{name:"Lucida Sans Typewriter",type:"monospace"},{name:"Lucida Typewriter",type:"monospace"},{name:"Menlo",type:"monospace"},{name:"MICR",type:"monospace"},{name:"Monaco",type:"monospace"},{name:"Monospace",type:"monospace"},{name:"MS Gothic",type:"monospace"},{name:"MS Mincho",type:"monospace"},
{name:"Nimbus Mono L",type:"monospace"},{name:"OCR-A",type:"monospace"},{name:"OCR-B",type:"monospace"},{name:"PragmataPro",type:"monospace"},{name:"Prestige Elite",type:"monospace"},{name:"ProFont",type:"monospace"},{name:"Proggy programming fonts",type:"monospace"},{name:"SimHei",type:"monospace"},{name:"SimSun",type:"monospace"},{name:"Source Code Pro",type:"monospace"},{name:"Terminal",type:"monospace"},{name:"Trixie",type:"monospace"},{name:"Ubuntu Mono",type:"monospace"},{name:"Vera Sans Mono (Bitstream Vera)",
type:"monospace"},{name:"Space Mono",type:"monospace",isGoogleFont:!0},{name:"Inconsolata",type:"monospace",isGoogleFont:!0},{name:"Anonymous Pro",type:"monospace",isGoogleFont:!0},{name:"Balloon",type:"script"},{name:"Brush Script",type:"script"},{name:"Choc",type:"script"},{name:"Dom Casual",type:"script"},{name:"Mistral",type:"script"},{name:"Papyrus",type:"script"},{name:"Segoe Script",type:"script"},{name:"Utopia",type:"script"},{name:"Coronet",type:"script"},{name:"Curlz",type:"script"},{name:"Gravura",
type:"script"},{name:"Script",type:"script"},{name:"Wiesbaden Swing",type:"script"},{name:"American Scribe",type:"script"},{name:"AMS Euler",type:"script"},{name:"Apple Chancery",type:"script"},{name:"Forte",type:"script"},{name:"French Script",type:"script"},{name:"ITC Zapf Chancery",type:"script"},{name:"Kuenstler Script",type:"script"},{name:"Monotype Corsiva",type:"script"},{name:"Old English Text MT",type:"script"},{name:"Zapfino",type:"script"},{name:"Andy",type:"handwriting"},{name:"Ashley Script",
type:"handwriting"},{name:"C\u00e9zanne",type:"handwriting"},{name:"Chalkboard",type:"handwriting"},{name:"Comic Sans MS",type:"handwriting"},{name:"Dom Casual",type:"handwriting"},{name:"Kristen",type:"handwriting"},{name:"Lucida Handwriting",type:"handwriting"},{name:"Bastard",type:"blackletter"},{name:"Breitkopf Fraktur",type:"blackletter"},{name:"Cloister Black",type:"blackletter"},{name:"Fette Fraktur",type:"blackletter"},{name:"Fletcher",type:"blackletter"},{name:"Fraktur",type:"blackletter"},
{name:"Lucida Blackletter",type:"blackletter"},{name:"Old English Text",type:"blackletter"},{name:"Schwabacher",type:"blackletter"},{name:"Aharoni",type:"non-latin"},{name:"Aparajita",type:"non-latin"},{name:"Arial",type:"non-latin"},{name:"Calibri",type:"non-latin"},{name:"Chandas",type:"non-latin"},{name:"Gadugi",type:"non-latin"},{name:"Grecs du roi",type:"non-latin"},{name:"Javanese script",type:"non-latin"},{name:"Japanese Gothic",type:"non-latin"},{name:"Jomolhari",type:"non-latin"},{name:"Kiran",
type:"non-latin"},{name:"Kochi",type:"non-latin"},{name:"Koren",type:"non-latin"},{name:"Kruti Dev",type:"non-latin"},{name:"Malgun Gothic",type:"non-latin"},{name:"Meiryo",type:"non-latin"},{name:"Microsoft JhengHei",type:"non-latin"},{name:"Microsoft YaHei",type:"non-latin"},{name:"Minch\u014d",type:"non-latin"},{name:"Ming",type:"non-latin"},{name:"Mona",type:"non-latin"},{name:"MS Gothic",type:"non-latin"},{name:"Nastaliq Navees",type:"non-latin"},{name:"Porson",type:"non-latin"},{name:"Segoe UI Symbol",
type:"non-latin"},{name:"Shruti",type:"non-latin"},{name:"SimSun",type:"non-latin"},{name:"Sylfaen",type:"non-latin"},{name:"Tahoma",type:"non-latin"},{name:"Tengwar",type:"non-latin"},{name:"Tibetan Machine Uni",type:"non-latin"},{name:"Wilson Greek",type:"non-latin"},{name:"SMP",type:"unicode"},{name:"Microsoft Office",type:"unicode"},{name:"Bitstream Cyberbit",type:"unicode"},{name:"DejaVu fonts",type:"unicode"},{name:"Charis SIL",type:"unicode"},{name:"BMP",type:"unicode"},{name:"SMP",type:"unicode"},
{name:"Code2002",type:"unicode"},{name:"DejaVu fonts",type:"unicode"},{name:"IPA",type:"unicode"},{name:"Everson Mono",type:"unicode"},{name:"Windows",type:"unicode"},{name:"Fixedsys Excelsior",type:"unicode"},{name:"FreeFont",type:"unicode"},{name:"Gentium",type:"unicode"},{name:"GNU Unifont",type:"unicode"},{name:"Georgia Ref",type:"unicode"},{name:"Microsoft Office",type:"unicode"},{name:"Junicode",type:"unicode"},{name:"Mac OS 8.5",type:"unicode"},{name:"macOS",type:"unicode"},{name:"ISO 8859-x",
type:"unicode"},{name:"MS Gothic",type:"unicode"},{name:"MS Mincho",type:"unicode"},{name:"Nimbus Sans Global",type:"unicode"},{name:"Noto",type:"unicode"},{name:"Fabrizio Schiavi",type:"unicode"},{name:"Squarish Sans CT",type:"unicode"},{name:"XITS",type:"unicode"},{name:"Titus Cyberbit Basic",type:"unicode"},{name:"Verdana Ref",type:"unicode"},{name:"XITS",type:"unicode"},{name:"Apple Symbols",type:"symbol"},{name:"Asana-Math",type:"symbol"},{name:"Blackboard bold",type:"symbol"},{name:"Bookshelf Symbol 7",
type:"symbol"},{name:"Cambria Math",type:"symbol"},{name:"Computer Modern",type:"symbol"},{name:"Lucida Math",type:"symbol"},{name:"Marlett",type:"symbol"},{name:"Symbol",type:"symbol"},{name:"Webdings",type:"symbol"},{name:"Wingdings",type:"symbol"},{name:"Wingdings 2",type:"symbol"},{name:"Wingdings 3",type:"symbol"},{name:"Zapf Dingbats",type:"symbol"},{name:"Ad Lib",type:"decorative"},{name:"Allegro",type:"decorative"},{name:"Andreas",type:"decorative"},{name:"Arnold B\u00f6cklin",type:"decorative"},
{name:"Astur",type:"decorative"},{name:"Banco",type:"decorative"},{name:"Bauhaus",type:"decorative"},{name:"Braggadocio",type:"decorative"},{name:"Broadway",type:"decorative"},{name:"Caslon Antique",type:"decorative"},{name:"Cooper Black",type:"decorative"},{name:"Curlz",type:"decorative"},{name:"Ellington",type:"decorative"},{name:"Exocet",type:"decorative"},{name:"FIG Script",type:"decorative"},{name:"Forte",type:"decorative"},{name:"Gabriola",type:"decorative"},{name:"Horizon",type:"decorative"},
{name:"Jim Crow",type:"decorative"},{name:"Lo-Type",type:"decorative"},{name:"Neuland",type:"decorative"},{name:"Peignot",type:"decorative"},{name:"San Francisco",type:"decorative"},{name:"Stencil",type:"decorative"},{name:"Umbra",type:"decorative"},{name:"Westminster",type:"decorative"},{name:"Willow",type:"decorative"},{name:"Windsor",type:"decorative"},{name:"Lithos",type:"mimicry"},{name:"Skia",type:"mimicry"},{name:"3x3",type:"misc"},{name:"Compatil",type:"misc"},{name:"Generis",type:"misc"},
{name:"Grasset",type:"misc"},{name:"LED",type:"misc"},{name:"Luxi",type:"misc"},{name:"System",type:"misc"}];RD.fonts=bU;RD.fonts=bU;RD.fonts=bU;RD.default=E6;var Ni=lively.FreezerRuntime.recorderFor("lively.morphic/rendering/font-metric.js");Ni.textlayerNodeForFontMeasure=function(f){var k=f.viewState,n=k.text_layer_node;k=k.fontmetric_text_layer_node;n&&!n.className.includes("newtext-text-layer")&&(f.viewState.text_layer_node=n=n.parentNode.querySelector(".newtext-text-layer.actual"));k&&!k.className.includes("newtext-text-layer")&&
(f.viewState.fontmetric_text_layer_node=k=null);n&&!k&&n.parentNode&&(k=f.viewState.fontmetric_text_layer_node=n.parentNode.querySelector(".newtext-text-layer.font-measure"));return k};Ni.isExtendingChar=function(f){return 768<=f.charCodeAt(0)&&Ni.extendingChars.test(f)};Ni.skipExtendingChars=function(f,k,n){for(;(0>n?0<k:k<f.length)&&Ni.isExtendingChar(f.charAt(k));)k+=n;return k};Ni.charBoundsOfBigMonospacedLine=function(f,k,n,b,e,m,a,g){e=void 0===e?0:e;m=void 0===m?0:m;n=n.text.length;if(500>
n||k.isProportional(Ni.getComputedFontFamily(b)))return null;var l=Infinity,r=a.defaultTextStyle;a.lineWrapping&&(l=b.getBoundingClientRect().width);k=k._domMeasure.defaultCharExtent(f,{defaultTextStyle:r},g);f=k.width;k=k.height;b=Array(n);for(a=0;a<n;a++)e+f>l&&(e=0,m+=k),b[a]={x:e,y:m,width:f,height:k},e+=f;return b};Ni.charBoundsOfLine=function(f,k,n,b){n=void 0===n?0:n;b=void 0===b?0:b;f=k.ELEMENT_NODE;var e=k.TEXT_NODE,m=k.ownerDocument,a=[],g=0;if(k)if(k.className.includes("line")){n-=k.offsetLeft;
b-=k.offsetTop;var l=k.childNodes[0]}else l=k.getElementsByClassName("line")[0].childNodes[0],n=n-k.offsetLeft+Ni.getComputedMarginLeft(k),b-=k.offsetTop;else l=null;if(!l){var r=l=m.createElement("br");k.appendChild(r)}for(;l&&!(Infinity<g);){var v="BR"!==l.tagName&&l.nodeType===f&&l.childNodes[0]||l;if(v.nodeType===e)for(var y=v.length,A=0;A<y;A++){var E=Ni.measureCharInner(m,v,A,"right");var F=E.left;var H=E.top;k=E.width;E=E.height;F+=n;H+=b;a[g++]={x:F,y:H,width:k,height:E}}else if(l.nodeType===
f)v=l.getBoundingClientRect(),F=v.left,H=v.top,k=v.width,E=v.height,F+=n,H+=b,a[g++]={x:F,y:H,width:k,height:E};else throw Error("Cannot deal with node "+l);l=l.nextSibling}r&&r.parentNode.removeChild(r);return a};Ni.measureCharInner=function(f,k,n,b){b=void 0===b?"left":b;var e=n;n+=1;if(3==k.nodeType)for(var m=0;4>m;m++){var a=Ni.getUsefulRect(Ni.range(f,k,e,n).getClientRects(),b);if(a.left||a.right||0==e)break;n=e;--e}return a};Ni.range=function(f,k,n,b,e){f=f.createRange();f.setEnd(e||k,b);f.setStart(k,
n);return f};Ni.getUsefulRect=function(f,k){var n={left:0,right:0,top:0,bottom:0};if("left"==k)for(k=0;k<f.length&&(n=f[k]).left==n.right;k++);else for(k=f.length-1;0<=k&&(n=f[k]).left==n.right;k--);return n};Ni.string=pi;Ni.obj=Ag;Ni.FontDetector=Uka;Ni.cumulativeOffset=ki;Ni.config=Dn;Ni.debug=!!Ni.config.onloadURLQuery["debug-font-metric"];Ni.checkTimeout=1E3;var F6=function(f){var k=lively.FreezerRuntime.recorderFor("lively.morphic/rendering/font-metric.js"),n=k.hasOwnProperty("FontMetric")&&
"function"===typeof k.FontMetric?k.FontMetric:k.FontMetric=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return dc(n,f,[{key:Symbol.for("lively-instance-initialize"),value:function(){this.charMap={};this.cachedBoundsInfo={};this.supportedFontCache={};this.element=null;this.isProportionalCache={}}},{key:"reset",value:function(b){if(this.element){var e=this.element.parentNode;var m=this.element.ownerDocument}this.uninstall();
this.charMap={};this.cachedBoundsInfo={};m&&e&&this.install(m,e,b)}},{key:"install",value:function(b,e,m){this.element=b.createElement("div");this.element.name="fontMetric";this.setMeasureNodeStyles(this.element.style,!0);e.appendChild(this.element);this._domMeasure=(new Ni.DOMTextMeasure).install(b,e,m)}},{key:"uninstall",value:function(){this.element&&(this.element.parentNode&&this.element.parentNode.removeChild(this.element),this.element=null,this._domMeasure&&this._domMeasure.uninstall())}},{key:"setMeasureNodeStyles",
value:function(b,e){b.width=b.height="auto";b.left=b.top="0px";b.visibility="hidden";b.position="absolute";b.whiteSpace="pre";b.font="inherit";b.overflow=e?"hidden":"visible"}},{key:"measure",value:function(b,e){var m=b.fontFamily,a=b.fontSize,g=b.fontWeight,l=b.fontStyle,r=b.textDecoration,v=b.textStyleClasses;b=b.transform;var y=this.element;b&&(b=b.inverse());y.textContent=e;Object.assign(y.style,{"-webkit-text-size-adjust":"none",fontFamily:m,fontWeight:g,fontStyle:l,textDecoration:r,transform:b,
fontSize:a+"px"});y.className=v?v.join(" "):"";try{var A=y.getBoundingClientRect();var E=A.width;var F=A.height}catch(H){return{width:0,height:0}}return{height:F,width:E}}},{key:"charBoundsFor",value:function(b,e){var m=e.length,a=Array(m),g=this.cachedBoundsInfo,l=g.bounds,r=g.str;g=g.style;if(this.isProportional(b.fontFamily)){g=l&&Ni.obj.equals(g,b);for(var v=!b.fixedCharacterSpacing,y=0,A=0;y<m;y++){var E=e[y];if(v)if(g=g&&E===r[y]){var F=l[y];E=F.width;F=F.height}else E=e.substr(0,y+1),F=this.measure(b,
E),E=F.width,F=F.height,E-=A;else F=this.sizeFor(b,E),E=F.width,F=F.height;a[y]={x:A,y:0,width:Math.ceil(E),height:Math.ceil(F)};A+=E}v&&(this.cachedBoundsInfo={bounds:a,str:e,style:b})}else for(e=this.sizeFor(b,"x",!0),b=this.sizeFor(b,"xx",!0).width-e.width,e=e.height,r=0;r<m;r++)l=b*r,a[r]={x:l,y:0,width:b,height:e};return a}},{key:"isProportional",value:function(b){if(this.isProportionalCache.hasOwnProperty(b))return this.isProportionalCache[b];var e={fontFamily:b,fontSize:12},m=this.sizeFor(e,
"w").width;e=this.sizeFor(e,"i").width;return this.isProportionalCache[b]=m!==e}},{key:"sizeFor",value:function(b,e,m){var a=b.fontFamily,g=b.fontSize,l=b.fontWeight,r=b.fontStyle,v=b.textDecoration,y=b.textStyleClasses;b={fontFamily:a,fontSize:g,fontWeight:l,fontStyle:r,textDecoration:v,textStyleClasses:y};if((void 0===m||!m)&&1<e.length)return this.measure(b,e);m=y?y.join(" "):"";a=[a,g,l,r,v,m].join("-");this.charMap[a]||(this.charMap[a]={});this.charMap[a][e]||(this.charMap[a][e]=this.measure(b,
e));return this.charMap[a][e]}},{key:"defaultLineHeight",value:function(b){return this.sizeFor(b," ").height}},{key:"isFontSupported",value:function(b,e){e=void 0===e?"normal":e;var m=this.fontDetector||(this.fontDetector=new Ni.FontDetector(this.element.ownerDocument));if(this.supportedFontCache[b+"-"+e]){var a=this.supportedFontCache[b+"-"+e],g=a.ts;a=a.value;if(Date.now()-g<Ni.checkTimeout)return a}m=m.isFontSupported(b,e);this.supportedFontCache[b+"-"+e]={ts:Date.now(),value:m};return m}},{key:"defaultCharExtent",
value:function(b,e,m){return this._domMeasure.defaultCharExtent(b,e,m)}},{key:"manuallyComputeCharBoundsOfLine",value:function(b,e,m,a,g,l,r){return this._domMeasure.computeCharBBoxes(b,e,0,0,g,l,r,this)}},{key:"manuallyComputeBoundsOfLines",value:function(b,e,m,a,g,l,r){return this._domMeasure.computeBBoxesOfLines(b,e,0,0,g,l,r)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"FontMetric"}},{key:"default",value:function(){if(!this._fontMetric)throw Error("FontMetric has not yet been initialized!");
return this._fontMetric}},{key:"initDefault",value:function(b){if(!this._fontMetric){if(!b&&"undefined"===typeof document)throw Error("Cannot initialize FontMetric without document");b||(b={document:document});this._fontMetric=this.forDOMEnv(b)}return this._fontMetric}},{key:"removeDefault",value:function(){this._fontMetric&&(this._fontMetric.uninstall(),this._fontMetric=null)}},{key:"forDOMEnv",value:function(b){b=b.document;var e=new Ni.FontMetric;e.install(b,b.body);return e}}],k,{pathInPackage:function(){return"rendering/font-metric.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:312,end:7392})}(void 0),Vka=F6=Ni.FontMetric;Ni.extendingChars=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;
(function(f){var k=lively.FreezerRuntime.recorderFor("lively.morphic/rendering/font-metric.js"),n=k.hasOwnProperty("DOMTextMeasure")&&"function"===typeof k.DOMTextMeasure?k.DOMTextMeasure:k.DOMTextMeasure=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return dc(n,f,[{key:"reset",value:function(){if(this.element){var b=this.element.parentNode;var e=this.element.ownerDocument}this.uninstall();e&&b&&this.install(e,b);return this}},
{key:"install",value:function(b,e,m){this.maxLineBBoxCacheCount=(this.debug=m=void 0===m?!1:m)?1:3E3;this.lineBBoxCacheCount=0;this.lineBBoxCache={};this.maxTextlayerNodeCacheCount=m?1:30;this.textlayerNodeCacheCount=0;this.textlayerNodeCache={};this.defaultCharWidthHeightCache={};this.doc=b;b=this.element=b.createElement("div");b.className="dom-measure"+(m?" debug":"");this.setMeasureNodeStyles(b.style,!0);e.appendChild(b);return this}},{key:"uninstall",value:function(){var b=this.element;b&&(b.parentNode&&
b.parentNode.removeChild(b),this.element=null)}},{key:"setMeasureNodeStyles",value:function(b,e){b.width=b.height="auto";this.debug||(b.left=b.top="0px",b.visibility="hidden");b.position="absolute";b.whiteSpace="pre";b.font="inherit";b.overflow=e&&!this.debug?"hidden":"visible"}},{key:"generateStyleKey",value:function(b){var e=b.defaultTextStyle;return[e.fontFamily,e.fontSize,e.fontWeight,e.fontStyle,e.textDecoration,e.textStyleClasses,b.paddingLeft,b.paddingRight,b.paddingTop,b.paddingBottom,b.width,
b.height,b.clipMode,b.lineWrapping,b.textAlign].join("-")}},{key:"defaultCharExtent",value:function(b,e,m){var a=this,g=this.generateStyleKey(e),l=this.defaultCharWidthHeightCache[g];if("undefined"!==typeof l&&(0!==l.height||0!==l.width))return l;var r=this.doc;return this.withTextLayerNodeDo(b,m,e,g,function(v){var y=r.createElement("span");y.className="line";y.style.whiteSpace="pre";v.appendChild(y);y.textContent="abcdefghijklmnopqrstufwxyz ABCDEFGHIJKLMNOPQRSTUFWXYZ 1234567890 {}[];,./<>?'\"!@#$%^&*()-=_+";
var A=y.getBoundingClientRect().width,E=r.createElement("span");E.className="line";E.style.whiteSpace="pre";v.appendChild(E);E.textContent="H\ne\nll\no";var F=E.getBoundingClientRect().height;v.removeChild(y);v.removeChild(E);return a.defaultCharWidthHeightCache[g]={width:A/92,height:Math.ceil(F/4)}})}},{key:"computeBBoxesOfLines",value:function(b,e,m,a,g,l,r){var v=this;m=void 0===m?0:m;a=void 0===a?0:a;for(var y=this.generateStyleKey(g),A=Array(e.length),E=!0,F=0;F<e.length;F++){var H=!e[F].textAttributes.length&&
this.lineBBoxCache[y+"_"+e[F].text];H&&H.height&&H.width?A[F]=H:E=!1}return E?A:this.withTextLayerNodeDo(b,l,g,y,function(I,M,N){for(var W=Array(e.length),X=Array(e.length),ea=0;ea<e.length;ea++)if(!X[ea]){var Aa=r(e[ea]);Aa.style.display="inline-block";I.appendChild(Aa);W[ea]=Aa}for(ea=0;ea<W.length;ea++)if(!X[ea]){Aa=W[ea];var Ma=Aa.getBoundingClientRect();v.lineBBoxCache[y+"_"+e[ea].text]=X[ea]={x:Ma.left-Aa.offsetLeft+m-M,y:Ma.top-Aa.offsetTop+a-N,width:Ma.width,height:Ma.height}}for(M=0;M<W.length;M++)I.removeChild(W[M]);
return X})}},{key:"computeCharBBoxes",value:function(b,e,m,a,g,l,r,v){var y=this;m=void 0===m?0:m;a=void 0===a?0:a;return this.withTextLayerNodeDo(b,l,g,this.generateStyleKey(g),function(A,E,F){var H=r(e);A.appendChild(H);A=1E4<e.stringSize&&Ni.charBoundsOfBigMonospacedLine(b,v,e,H,m,a,g,l)||Ni.charBoundsOfLine(e,H,m-E,a-F);y.debug||H.parentNode.removeChild(H);return A})}},{key:"withTextLayerNodeDo",value:function(b,e,m,a,g){var l=this.doc,r=this.textlayerNodeCache,v=this.element,y=Ni.textlayerNodeForFontMeasure(b);
y||(y=r[a]);if(!y){this.textlayerNodeCacheCount++;y=r[a]=e(m,[]);y.id=a;e=m.width;var A=m.clipMode;m.width||m.clipMode&&"visible"!==m.clipMode?(m=l.createElement("div"),m.style.position="absolute",A&&(m.style.overflow=A),e&&(m.style.width=e+"px"),m.id=a,m.appendChild(y),v.appendChild(m)):v.appendChild(y)}a=b.getGlobalTransform().inverse();b.env.renderer&&b.env.renderer.getNodeForMorph(b)&&(1!=a.getScale()||0!=a.getRotation())&&(a.e=a.f=0,y.style.transform=a.toString());a=y.getBoundingClientRect();
b=a.left;a=a.top;try{return g(y,b,a)}finally{if(y.style.transform="",!this.debug&&this.textlayerNodeCacheCount>this.maxTextlayerNodeCacheCount){g=Math.ceil(this.maxTextlayerNodeCacheCount/2);for(var E;g--&&(E=v.childNodes[0]);)r[E.id]=null,v.removeChild(E);this.textlayerNodeCacheCount-=g}}}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"DOMTextMeasure"}}],k,{pathInPackage:function(){return"rendering/font-metric.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:11046,end:19408})})(void 0);Ni.GLOBAL="undefined"!==typeof System?System.global:window||global||self||void 0;Ni.getComputedFontFamily="function"===typeof Ni.GLOBAL.getComputedStyle?function(f){return Ni.GLOBAL.getComputedStyle(f).fontFamily}:function(){return""};Ni.getComputedMarginLeft="function"===typeof Ni.GLOBAL.getComputedStyle?function(f){return parseInt(Ni.GLOBAL.getComputedStyle(f).marginLeft)||
0}:function(){return 0};Ni.default=F6;var mj=lively.FreezerRuntime.recorderFor("lively.morphic/changes.js");mj.signalBindings=function(f,k,n){if(f=f.attributeConnections){f=f.slice();for(var b=0;b<f.length;b++)f[b].sourceAttrName===k&&f[b].update(n)}};mj.informMorph=function(f,k,n){try{n.onChange(k);mj.signalBindings(n,"change",k);for(var b=n.owner;b;)b.onSubmorphChange(k,n),b=b.owner}catch(e){console.error("Error in informMorph: "+e.stack)}};mj.arr=$f;mj.string=pi;mj.obj=Ag;mj.connect=rl;mj.signal=
Wl;mj.disconnect=zo;(function(f){var k=lively.FreezerRuntime.recorderFor("lively.morphic/changes.js"),n=k.hasOwnProperty("Change")&&"function"===typeof k.Change?k.Change:k.Change=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return dc(n,f,[{key:Symbol.for("lively-instance-initialize"),value:function(b){this.target=b;this.group=null}},{key:"type",get:function(){return"abstract change"}},{key:"apply",value:function(){throw Error("Not yet implemented");
}},{key:"reverseApply",value:function(){throw Error("Not yet implemented");}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Change"}}],k,{pathInPackage:function(){return"changes.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:766,end:1016})})(void 0);var cU=function(f){var k=lively.FreezerRuntime.recorderFor("lively.morphic/changes.js"),
n=k.hasOwnProperty("GroupChange")&&"function"===typeof k.GroupChange?k.GroupChange:k.GroupChange=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return dc(n,f,[{key:Symbol.for("lively-instance-initialize"),value:function(b){dc._get(Object.getPrototypeOf(n.prototype),Symbol.for("lively-instance-initialize"),this).call(this,b);this.changes=[]}},{key:"consumesChanges",value:function(){return!0}},{key:"addChange",value:function(b){this.changes.push(b);
b.group=this}},{key:"apply",value:function(){this.changes.slice().forEach(function(b){return b.apply()});return this}},{key:"reverseApply",value:function(){this.changes.slice().reverse().forEach(function(b){return b.reverseApply()});return this}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"GroupChange"}}],k,{pathInPackage:function(){return"changes.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:1025,end:1448})}(mj.Change);mj.GroupChange=cU;mj.GroupChange=cU;mj.GroupChange=cU;var dU=function(f){var k=lively.FreezerRuntime.recorderFor("lively.morphic/changes.js"),n=k.hasOwnProperty("ValueChange")&&"function"===typeof k.ValueChange?k.ValueChange:k.ValueChange=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return dc(n,f,[{key:"type",get:function(){return"setter"}},
{key:Symbol.for("lively-instance-initialize"),value:function(b,e,m,a){dc._get(Object.getPrototypeOf(n.prototype),Symbol.for("lively-instance-initialize"),this).call(this,b);this.prop=e;this.value=m;this.prevValue=null;this.meta=a}},{key:"apply",value:function(){this.target[this.prop]=this.value}},{key:"reverseApply",value:function(){this.target[this.prop]=this.prevValue}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ValueChange"}}],k,{pathInPackage:function(){return"changes.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:1457,end:1866})}(mj.Change);mj.ValueChange=dU;mj.ValueChange=dU;mj.ValueChange=dU;var eU=function(f){var k=lively.FreezerRuntime.recorderFor("lively.morphic/changes.js"),n=k.hasOwnProperty("MethodCallChange")&&"function"===typeof k.MethodCallChange?k.MethodCallChange:k.MethodCallChange=
function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return dc(n,f,[{key:"type",get:function(){return"method-call"}},{key:Symbol.for("lively-instance-initialize"),value:function(b,e,m,a,g){dc._get(Object.getPrototypeOf(n.prototype),Symbol.for("lively-instance-initialize"),this).call(this,b);this.selector=e;this.args=m;this.undo=a;this.meta=g}},{key:"apply",value:function(){var b=this.target;b[this.selector].apply(b,this.args)}},
{key:"reverseApply",value:function(){if(this.undo)if("function"===typeof this.undo)this.undo();else{var b=this.undo,e=b.target;e[b.selector].apply(e,b.args)}}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"MethodCallChange"}}],k,{pathInPackage:function(){return"changes.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},
{start:1875,end:2448})}(mj.GroupChange);mj.MethodCallChange=eU;mj.MethodCallChange=eU;mj.MethodCallChange=eU;var wM=function(f){var k=lively.FreezerRuntime.recorderFor("lively.morphic/changes.js"),n=k.hasOwnProperty("ChangeManager")&&"function"===typeof k.ChangeManager?k.ChangeManager:k.ChangeManager=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return dc(n,f,[{key:Symbol.for("lively-instance-initialize"),value:function(){this.reset()}},
{key:"reset",value:function(){this.changes=[];this.changeRecordedListeners=[];this.revision=0;this.changeRecordersPerMorph=new WeakMap;this.changeRecorders={};this.changeGroupStack=[];this.defaultMeta={};this.metaStack=[]}},{key:"changesFor",value:function(b){return this.changes.filter(function(e){return e.target===b})}},{key:"apply",value:function(b,e){e.apply()}},{key:"doWithValueChangeMeta",value:function(b,e,m){this.defaultMeta=b;this.metaStack.push(b);b=m(e);this.metaStack.pop();this.defaultMeta=
mj.arr.last(this.metaStack)||{};return b}},{key:"addValueChange",value:function(b,e,m,a){e=new mj.ValueChange(b,e,m,Object.assign({},this.defaultMeta,{},a));return this._record(b,e)}},{key:"addMethodCallChangeDoing",value:function(b,e,m){var a=b.target,g=b.selector,l=b.args;(b=b.undo)||(b=function(){return console.warn("No undo recorded for "+a+"."+g)});l=new mj.MethodCallChange(a,g,l,b,this.defaultMeta);e.groupChangesWhile(l,m);return l}},{key:"_record",value:function(b,e){mj.signal(this,"changeRecorded",
e);e.hasOwnProperty("value")&&(e.prevValue=b._morphicState[e.prop],b._morphicState[e.prop]=e.value);b.makeDirty(e);var m=mj.arr.last(this.changeGroupStack);m&&m.consumesChanges()?m.addChange(e):(this.changes.push(e),b._rev=++this.revision,this.informChangeListeners(e));mj.informMorph(this,e,b);return e}},{key:"groupChangesWhile",value:function(b,e,m,a){a=void 0===a?!0:a;e||(e=new mj.GroupChange(b));this.changeGroupStack.push(e);try{return m(),mj.arr.remove(this.changeGroupStack,e),a?this._record(b,
e):e}catch(g){throw mj.arr.remove(this.changeGroupStack,e),g;}}},{key:"dontRecordChangesWhile",value:function(b,e){return this.groupChangesWhile(b,void 0,e,!1)}},{key:"recordChangesWhile",value:function(b,e){var m=this.changes.length;b();b=this.changes.slice(m,this.changes.length);return e?b.filter(e):b}},{key:"addChangeListener",value:function(b){mj.arr.pushIfNotIncluded(this.changeRecordedListeners,b)}},{key:"removeChangeListener",value:function(b){mj.arr.remove(this.changeRecordedListeners,b)}},
{key:"informChangeListeners",value:function(b){this.changeRecordedListeners.forEach(function(e){return e(b)})}},{key:"recordChangesStart",value:function(b,e){e=mj.obj.newKeyIn(this.changeRecorders,(void 0===e?"":e)+"__change_recorder_"+Date.now());var m=b?function(g){return b(g)&&a.changes.push(g)}:function(g){return a.changes.push(g)},a=this.changeRecorders[e]={id:e,filter:b,changes:[],listener:m};this.addChangeListener(m);return a}},{key:"recordChangesStop",value:function(b){if(!(b in this.changeRecorders))return[];
var e=this.changeRecorders[b],m=e.changes;e=e.listener;delete this.changeRecorders[b];this.removeChangeListener(e);return m}},{key:"recordChangesStartForMorph",value:function(b,e){e=this.recordChangesStart(e,b.id);var m=this.changeRecordersPerMorph.get(b);m||(m=[],this.changeRecordersPerMorph.set(b,m));m.push(e.id);return e}},{key:"recordChangesStopForMorph",value:function(b,e){var m=this.changeRecordersPerMorph.get(b);if(!m||!m.length)return console.warn("Cannot endMorphChangeRecorder for morph "+
b+": recorder not found"),[];(b=e)?mj.arr.remove(m,b):b=m.pop();return this.recordChangesStop(b)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ChangeManager"}}],k,{pathInPackage:function(){return"changes.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:2458,end:7504})}(void 0);mj.ChangeManager=wM;mj.ChangeManager=
wM;mj.ChangeManager=wM;var En=lively.FreezerRuntime.recorderFor("lively.morphic/undo.js");En.printArg=function(f){return En.obj.inspect(f,{maxDepth:1}).replace(/\n/g,"").replace(/\s+/g," ")};En.obj=Ag;En.arr=$f;En.events=vz;En.fun=Pn;(function(f){var k=lively.FreezerRuntime.recorderFor("lively.morphic/undo.js"),n=k.hasOwnProperty("Undo")&&"function"===typeof k.Undo?k.Undo:k.Undo=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};
return dc(n,f,[{key:Symbol.for("lively-instance-initialize"),value:function(b,e,m){e=void 0===e?[]:e;this.name=b;this.targets=e;this.timestamp=this.changes=this.recorder=null;this.no=void 0===m?0:m}},{key:"recorded",value:function(){return!!this.changes}},{key:"isRecording",value:function(){return!!this.recorder}},{key:"startRecording",value:function(b){var e=this;if(this.recorded()||this.isRecording())throw Error("Undo already recorded / recording");if(!this.targets.length)throw Error("Undo has no target morphs");
this.timestamp=Date.now();this.recorder=this.targets[0].recordChangesStart(function(m){var a=m.target;return a.isUsedAsEpiMorph()||!e.targets.some(function(g){return g===a||g.isAncestorOf(a)})?!1:"function"===typeof b?b(m):!0});return this}},{key:"stopRecording",value:function(){var b=this.recorder.id;this.changes=$jscomp.makeIterator(this.targets).next().value.recordChangesStop(b);this.recorder=this.targets=null}},{key:"apply",value:function(){if(!this.recorded())throw Error("Cannot apply undo that has no changes recorded yet");
this.changes.slice().forEach(function(b){return b.apply()});return this}},{key:"reverseApply",value:function(){if(!this.recorded())throw Error("Cannot reverseApply undo that has no changes recorded yet");this.changes.slice().reverse().forEach(function(b){return b.reverseApply()});return this}},{key:"addTarget",value:function(b){En.arr.pushIfNotIncluded(this.targets,b)}},{key:"addUndos",value:function(b){b=En.arr.sortBy(b.concat(this).filter(function(e){return e.recorded()}),function(e){return e.no});
b.length&&(this.changes=En.arr.flatmap(b,function(e){return e.changes}),this.timestamp=b[0].timestamp,this.no=b[0].no,this.name=b.map(function(e){return e.name}).join("-"))}},{key:"toString",value:function(){var b=this.name,e=this.changes,m=this.no,a=this.isRecording();e=e.length?"\n  "+e.map(function(g){var l=g.selector,r=g.args,v=g.prop,y=g.value;g=g.target;return l?g+"."+l+"("+r.map(En.printArg)+")":g+"."+v+" = "+En.printArg(y)}).join("\n  "):"no changes";return"Undo("+m+":"+b+" "+(a?"RECORDING ":
"")+e+")"}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Undo"}}],k,{pathInPackage:function(){return"undo.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:54,end:2487})})(void 0);var bH=function(f){var k=lively.FreezerRuntime.recorderFor("lively.morphic/undo.js"),n=k.hasOwnProperty("UndoManager")&&"function"===
typeof k.UndoManager?k.UndoManager:k.UndoManager=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return dc(n,f,[{key:Symbol.for("lively-instance-initialize"),value:function(b){this.reset();this.filter=b}},{key:"reset",value:function(){this.undos=[];this.redos=[];this.undoInProgress=null;this.counter=this.applyCount=0;this.grouping={current:[],debounce:null,debouncedCanceled:!1,debounceTime:31}}},{key:"group",value:function(b){b=
void 0===b?null:b;this.groupLaterCancel();b&&this.undos.includes(b)&&(this.grouping.current=En.arr.uniq(this.undos.slice(this.undos.indexOf(b)).concat(this.grouping.current)));this.grouping.current.length&&(b=this.grouping.current.slice(1),this.grouping.current[0].addUndos(b),this.undos=En.arr.withoutAll(this.undos,b),this.grouping.current=[])}},{key:"ensureNewGroup",value:function(b,e){e=void 0===e?"new undo group":e;this.group();this.undoStart(b,e);return this.undoStop()}},{key:"groupLaterCancel",
value:function(){var b=this.grouping;b.debounce&&(b.debouncedCanceled=!0,this.grouping=Object.assign({},b,{debounce:null,debouncedCanceled:!1}))}},{key:"groupLater",value:function(b){var e=this,m=this.grouping;(m.debounce||(m.debounce=En.fun.debounce(b||m.debounceTime,function(){m.debounce=null;m.debouncedCanceled||e.group()})))()}},{key:"undoStart",value:function(b,e){if(!this.applyCount)if(this.undoInProgress)console.warn("There is already an undo recorded");else return this.undoInProgress=(new En.Undo(e,
[b],this.counter++)).startRecording(this.filter)}},{key:"undoStop",value:function(){var b=this.undoInProgress;if(!b)return null;b.stopRecording();this.undoInProgress=null;this.undos.push(b);this.grouping.current.push(b);this.redos.length&&(this.redos.length=0);return b}},{key:"undo",value:function(){this.undoStop();var b=this.undos.pop();if(b){En.arr.remove(this.grouping.current,b);this.redos.unshift(b);this.applyCount++;try{b.reverseApply()}finally{this.applyCount--}return b}}},{key:"redo",value:function(){this.undoStop();
var b=this.redos.shift();if(b){this.undos.push(b);this.applyCount++;try{b.apply()}finally{this.applyCount--}return b}}},{key:"toString",value:function(){var b=0===this.undos.length?"":"\n  "+(20<this.undos.length?"...\n  ":"")+this.undos.slice(-20).join("\n  ");return"UndoManager("+this.undos.length+" undos, "+this.redos.length+" redos, "+(this.undoInProgress?", UNDO IN PROGRESS":"")+b+")"}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"UndoManager"}}],k,{pathInPackage:function(){return"undo.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:2619,end:5662})}(void 0);En.UndoManager=bH;En.UndoManager=bH;En.UndoManager=bH;var lo=lively.FreezerRuntime.recorderFor("lively.morphic/events/TextInput.js");lo.promise=zh;lo.bowser=xs;lo.touchInputDevice=sr;lo.placeholderValue="\u0001\u0001";lo.placeholderRe=/\u0001/g;var G6=function(f){var k=
lively.FreezerRuntime.recorderFor("lively.morphic/events/TextInput.js"),n=k.hasOwnProperty("TextInput")&&"function"===typeof k.TextInput?k.TextInput:k.TextInput=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return dc(n,f,[{key:Symbol.for("lively-instance-initialize"),value:function(b){this.eventDispatcher=b;this.domState={rootNode:null,textareaNode:null,eventHandlers:[],isInstalled:!1};this.inputState={composition:null,
manualCopy:null,manualPaste:null,positionChangedTime:0,scrollLeftWhenChanged:0,scrollTopWhenChanged:0}}},{key:"install",value:function(b,e){var m=this,a=this.domState,g=a.isInstalled,l=a.rootNode;this.world=e;if(g){if(l===b)return;this.uninstall()}a.isInstalled=!0;a.rootNode=b;b.tabIndex=1;e=a.textareaNode=b.ownerDocument.createElement("textarea");e.setAttribute("style","\n      position: absolute;\n      /*extent cannot be 0, input won't work correctly in Chrome 52.0*/\n      width: 20px; height: 20px;\n      z-index: 0;\n      opacity: 1;\n      background: transparent;\n      -moz-appearance: none;\n      appearance: none;\n      border: none;\n      resize: none;\n      outline: none;\n      overflow: hidden;\n      font: inherit;\n      padding: 0 1px;\n      margin: 0 -1px;\n      text-indent: -1em;\n      -ms-user-select: text;\n      -moz-user-select: text;\n      -webkit-user-select: text;\n      user-select: text;\n      /*with pre-line chrome inserts &nbsp; instead of space*/\n      white-space: pre!important;");
lo.touchInputDevice&&e.setAttribute("x-palm-disable-auto-cap",!0);e.setAttribute("wrap","off");e.setAttribute("autocorrect","off");e.setAttribute("autocapitalize","off");e.setAttribute("spellcheck",!1);e.setAttribute("aria-label","Lively Textinput Node");e.className="lively-text-input";e.value="";b.insertBefore(e,b.firstChild);lo.touchInputDevice&&(e.setAttribute("disabled",!0),e.style.setProperty("transform","scale(0)"));a.eventHandlers=[{type:"focusin",node:b,fn:function(r){return m.onRootNodeFocus(r)},
capturing:!0},{type:"focusin",node:a.textareaNode,fn:function(r){return m.onTextAreaFocus(r)},capturing:!0},{type:"blur",node:a.textareaNode,fn:function(r){return m.onTextAreaBlur(r)},capturing:!0},{type:"keydown",node:a.textareaNode,fn:function(r){return m.eventDispatcher.dispatchDOMEvent(r)},capturing:!1},{type:"keyup",node:a.textareaNode,fn:function(r){return m.eventDispatcher.dispatchDOMEvent(r)},capturing:!1},{type:"cut",node:a.textareaNode,fn:function(r){return m.eventDispatcher.dispatchDOMEvent(r)},
capturing:!1},{type:"copy",node:a.textareaNode,fn:function(r){return m.inputState.manualCopy?m.inputState.manualCopy.onEvent(r):m.eventDispatcher.dispatchDOMEvent(r)},capturing:!1},{type:"paste",node:a.textareaNode,fn:function(r){return m.inputState.manualPaste?m.inputState.manualPaste.onEvent(r):m.eventDispatcher.dispatchDOMEvent(r)},capturing:!1},{type:"compositionstart",node:a.textareaNode,fn:function(r){return m.onCompositionStart(r)},capturing:!1},{type:"compositionend",node:a.textareaNode,fn:function(r){return m.onCompositionEnd(r)},
capturing:!1},{type:"compositionupdate",node:a.textareaNode,fn:function(r){return m.onCompositionUpdate(r)},capturing:!1},{type:"input",node:a.textareaNode,fn:function(r){return m.onInput(r)},capturing:!1}];a.eventHandlers.forEach(function(r){return r.node.addEventListener(r.type,r.fn,r.capturing)});return this}},{key:"uninstall",value:function(){var b=this.domState;b.isInstalled=!1;b.eventHandlers.forEach(function(m){return m.node.removeEventListener(m.type,m.fn,m.capturing)});var e=b.textareaNode;
e&&e.parentNode&&e.parentNode.removeChild(e);b.rootNode=null;return this}},{key:"resetValue",value:function(){var b=this.domState.textareaNode;b&&(b.value=lo.placeholderValue)}},{key:"readValue",value:function(){var b=this.domState.textareaNode;return b?b.value.replace(lo.placeholderRe,""):""}},{key:"focus",value:function(b,e){var m=this.domState.textareaNode;m&&(lo.touchInputDevice&&b&&b.isText&&!b.readOnly&&m.removeAttribute("disabled"),b&&b.stealFocus||m.ownerDocument.activeElement!==m&&m.focus(),
lo.bowser.firefox&&Promise.resolve().then(function(){return m.ownerDocument.activeElement!==m&&m.focus()}),b&&b.isText&&b.focusable?(lo.touchInputDevice&&m.focus(),this.ensureBeingAtCursorOfText(b)):e&&this.ensureBeingInVisibleBoundsOfWorld(e))}},{key:"blur",value:function(){var b=this.domState.textareaNode;lo.touchInputDevice&&b.setAttribute("disabled",!0);b&&b.blur()}},{key:"doCopyWithMimeTypes",value:function(b){var e=this;return this.execCommand("manualCopy",function(){var m=e.domState.textareaNode,
a=function(g){m.removeEventListener("copy",a);g.preventDefault();b.forEach(function(l){return g.clipboardData.setData(l.type,l.data)})};setTimeout(function(){return m.removeEventListener("copy",a)},300);m.addEventListener("copy",a);m.value="";m.select();m.ownerDocument.execCommand("copy")})}},{key:"doCopy",value:function(b){var e=this;return this.execCommand("manualCopy",function(){var m=e.domState.textareaNode;m.value=b;m.select();m.ownerDocument.execCommand("copy")})}},{key:"doPaste",value:function(){var b=
this;return this.execCommand("manualPaste",function(){var e=b.domState.textareaNode;e.value="";e.select();e.ownerDocument.execCommand("paste")})}},{key:"execCommand",value:function(b,e){var m=this,a,g,l,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){switch(v.nextAddress){case 1:if(!m.domState.isInstalled)throw Error("Cannot copy to clipboard \u2013 input helper is not installed into DOM!");a=m.inputState;if(!a[b]){v.jumpTo(2);break}v.setCatchFinallyBlocks(3);return v.yield(a[b].promise,
5);case 5:v.leaveTryBlock(2);break;case 3:v.enterCatchBlock();case 2:return g=lo.promise.deferred(),l=!1,a[b]={onEvent:function(y){l||(a[b]=null,l=!0,g.resolve(y))},promise:g.promise},e(),v.setCatchFinallyBlocks(6),v.yield(lo.promise.waitFor(1E3,function(){return l}),8);case 8:v.leaveTryBlock(7);break;case 6:r=v.enterCatchBlock(),a[b]=null,l=!0,g.reject(r);case 7:return v.return(g.promise)}})}},{key:"onTextAreaBlur",value:function(b){var e=this;setTimeout(function(){var m=e.domState||{},a=m.textareaNode;
m=m.rootNode;!m||document.activeElement!==m||e.world.focusedMorph&&e.world.focusedMorph.stealFocus||lo.touchInputDevice||lively.FreezerRuntime||a&&a.focus()})}},{key:"onTextAreaFocus",value:function(b){}},{key:"onRootNodeFocus",value:function(b){var e=this.domState||{},m=e.rootNode;if(b.target===e.textareaNode||b.target===m)this.world.focusedMorph&&this.world.focusedMorph.stealFocus||this.focus();this.inputState.composition=null}},{key:"onInput",value:function(b){if(!this.inputState.composition){if(!b.data){var e=
this.readValue();b.__defineGetter__("data",function(){return e})}this.resetValue();this.eventDispatcher.dispatchDOMEvent(b)}}},{key:"onCompositionStart",value:function(b){this.inputState.composition={};this.eventDispatcher.dispatchDOMEvent(b)}},{key:"onCompositionUpdate",value:function(b){var e=this.inputState.composition,m=this.readValue();e.lastValue!==m&&(e.lastValue=m,this.eventDispatcher.dispatchDOMEvent(b))}},{key:"onCompositionEnd",value:function(b){this.inputState.composition=null;this.eventDispatcher.dispatchDOMEvent(b)}},
{key:"setPosition",value:function(b){var e=(this.domState||{}).textareaNode;e&&(e.style.left=b.x+"px",e.style.top=b.y+"px")}},{key:"ensureBeingInVisibleBoundsOfWorld",value:function(b){this.setPosition(b.visibleBounds().center())}},{key:"ensureBeingAtCursorOfText",value:function(b){var e=b.world();if(e){var m=b.whatsVisible,a=b.cursorPosition,g=a.row;a=a.column;g=Math.max(m.startRow,Math.min(g,m.endRow));m=b.charBoundsFromTextPosition({row:g,column:a}).topLeft();b=e.visibleBounds().insetBy(10).constrainPt(b.worldPoint(m.subPt(b.scroll)));
this.inputState.positionChangedTime=Date.now();this.inputState.scrollLeftWhenChanged=document.documentElement.scrollLeft;this.inputState.scrollTopWhenChanged=document.documentElement.scrollTop;this.setPosition(b)}}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"TextInput"}}],k,{pathInPackage:function(){return"events/TextInput.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",
version:"0.1.2"}}},{start:235,end:12261})}(void 0),Wka=G6=lo.TextInput;lo.default=G6;var fU=lively.FreezerRuntime.recorderFor("lively.morphic/events/KillRing.js");fU.arr=$f;var H6=function(f){var k=lively.FreezerRuntime.recorderFor("lively.morphic/events/KillRing.js"),n=k.hasOwnProperty("KillRing")&&"function"===typeof k.KillRing?k.KillRing:k.KillRing=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return dc(n,f,[{key:Symbol.for("lively-instance-initialize"),
value:function(b){this.size=void 0===b?0:b;this.buffer=[];this.pointer=-1}},{key:"isCycling",value:function(){return this.pointer!==this.buffer.length-1}},{key:"add",value:function(b){var e=this.buffer;e.push(b);this.size&&e.length>this.size&&e.splice(0,e.length-this.size);this.pointer=this.buffer.length-1;return b}},{key:"yank",value:function(){return this.buffer[this.pointer]||""}},{key:"back",value:function(){this.pointer=(0>=this.pointer?this.buffer.length:this.pointer)-1;return this.yank()}}],
[{key:Symbol.for("__LivelyClassName__"),get:function(){return"KillRing"}}],k,{pathInPackage:function(){return"events/KillRing.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:51,end:614})}(void 0),Xka=H6=fU.KillRing;fU.default=H6;var si=lively.FreezerRuntime.recorderFor("lively.morphic/events/Keys.js");si.computeHashIdOfEvent=kb;
si.isModifier=function(f){if(si.isNumber(f))return!1;f=f.replace(/-$/,"").toLowerCase();return si.arr.withoutAll(Object.keys(si.KEY_MODS),["","input-"]).includes(f)};si.canonicalizeFunctionKey=function(f){f=f.toLowerCase();switch(f){case "space":f="space";break;case "esc":f="escape";break;case "return":f="enter";break;case "arrowleft":f="left";break;case "arrowright":f="right";break;case "arrowup":f="up";break;case "arrowdown":f="down";break;case "esc":f="escape";break;case "return":f="enter"}return si.FUNCTION_KEYS.includes(f)?
si.string.capitalize(f):""};si.decodeKeyIdentifier=function(f,k){var n=/u\+?([\d\w]{4})/gi,b=function(e,m){return String.fromCharCode(parseInt(m,16))};f=f&&f.replace(n,b);if("Command"===f||"Cmd"===f)f="Meta";" "===f&&(f="Space");8===k&&(f="Backspace");return f};si.identifyKeyFromCode=function(f){f=f.code;if("string"!==typeof f)return null;if(f.startsWith("Key"))return f.slice(3);if(f.startsWith("Numpad"))return f;if(f.startsWith("Digit")||f.startsWith("Arrow"))return f.slice(5);if(f.match(/^F[0-9]{1-2}$/))return f;
switch(f){case "Insert":case "Home":case "PageUp":case "PageDown":return f;case "Period":return".";case "Comma":return",";case "Help":return"Insert";case "Equal":return"=";case "Backslash":case "IntlBackslash":return"\\";case "Equal":return"=";case "Minus":return"-";case "BracketRight":return"]";case "BracketLeft":return"[";case "Quote":return"'";case "Backquote":return"`";case "Semicolon":return";"}return null};si.dedasherize=function(f){for(var k=[];;){var n=f.indexOf("-");if(-1===n)return f&&k.push(f),
k;0===n?(k.push(f[0]),f=f.slice(2)):(k.push(f.slice(0,n)),f=f.slice(n+1))}};si.bowser=xs;si.arr=$f;si.string=pi;si.letterRe=/[a-z]/i;si.MODIFIER_KEYS={16:"Shift",17:"Ctrl",18:"Alt",224:"Meta"};si.KEY_MODS=function(){for(var f={control:1,ctrl:1,alt:2,option:2,shift:4,"super":8,win:8,meta:8,command:8,cmd:8},k=["alt","ctrl","meta","shift"],n=Math.pow(2,k.length);n--;)f[n]=k.filter(function(b){return n&f[b]}).join("-")+"-";f[0]="";f[-1]="input-";return f}();si.isNumber=function(){var f=/^[0-9]+$/;return function(k){return f.test(k)}}();
si.FUNCTION_KEYS="backspace;tab;enter;pause;escape; ;pageup;pagedown;end;home;left;up;right;down;print;insert;delete;numpad0;numpad1;numpad2;numpad3;numpad4;numpad5;numpad6;numpad7;numpad8;numpad9;numpadenter;f1;f2;f3;f4;f5;f6;f7;f8;f9;f10;f11;f12;numlock;scrolllock".split(";");si.Keys={computeHashIdOfEvent:kb,keyComboToEventSpec:function(f,k){k=Object.assign({_isLivelyKeyEventSpec:!0,keyCombo:"",key:"",ctrlKey:!1,shiftKey:!1,altKey:!1,metaKey:!1,altGraphKey:!1,isFunctionKey:!1,isModified:!1,onlyModifiers:!1},
k);var n=si.dedasherize(f),b={shift:"shiftKey",control:"ctrlKey",ctrl:"ctrlKey",alt:"altKey",meta:"metaKey",command:"metaKey",cmd:"metaKey"};if("input"===n[0]&&2===n.length)return k.keyCombo=f,k.key=n[1],k;for(var e=n.length-1;0<=e;e--){var m=b[n[e].toLowerCase()];m&&(n.splice(e,1),k.isModified=!0,k[m]=!0)}if(!n.length)return k.keyCombo=si.Keys.eventToKeyCombo(k),k.key=si.arr.last(si.dedasherize(k.keyCombo)),k.onlyModifiers=!0,k;1<n.length&&console.warn('Strange key "'+f+'" encountered in keyComboToEventSpec, parsing probably failed');
f=si.arr.last(n);(n=si.canonicalizeFunctionKey(f))?(k.isFunctionKey=!0,k.key=n):k.key=k.isModified?si.string.capitalize(f):f;k.keyCombo=si.Keys.eventToKeyCombo(k);return k},eventToKeyCombo:function(f,k){Object.assign({ignoreModifiersIfNoCombo:!1,ignoreKeys:[]},k);k=f.key;var n=f.data,b=f.keyIdentifier;if("string"===typeof n)return"input-"+n;if(!k&&b&&(k=si.decodeKeyIdentifier(b,f.which||f.keyCode),f.key=k=k[f.shiftKey?"toUpperCase":"toLowerCase"](),si.isModifier(k)))return si.string.capitalize(k);
n=si.KEY_MODS[si.computeHashIdOfEvent(f)];if("input-"===n)return n+k;f.code&&(k=si.identifyKeyFromCode(f)||k);f=!k||si.isModifier(k)?n.replace(/-$/,""):n+k;f.match(/\s$/)&&(f=f.replace(/\s$/,"Space"));return f.replace(/(^|-)([a-z])/g,function(e,m,a){return m+a.toUpperCase()})},canonicalizeKeyCombo:function(f){return si.Keys.eventToKeyCombo(si.Keys.keyComboToEventSpec(f))},canonicalizeEvent:function(f){return f._isLivelyKeyEventSpec?f:si.Keys.keyComboToEventSpec(si.Keys.eventToKeyCombo(f))}};var gU=
si.Keys;si.default=gU;var mi=lively.FreezerRuntime.recorderFor("lively.morphic/events/Event.js");mi.bowser=xs;mi.obj=Ag;mi.pt=xi;mi.Keys=gU;mi.cumulativeOffset=ki;var hU="pointerover pointerenter pointerout pointerleave pointerdown pointermove pointerup pointercancel gotpointercapture lostpointercapture".split(" ");mi.pointerEvents=hU;mi.pointerEvents=hU;mi.pointerEvents=hU;var iU="mouseover mouseenter mousedown mousemove mouseup mouseout mouseleave click dblclick contextmenu mousewheel".split(" ");
mi.mouseEvents=iU;mi.mouseEvents=iU;mi.mouseEvents=iU;var jU=["keydown","keyup","keypress"];mi.keyboardEvents=jU;mi.keyboardEvents=jU;mi.keyboardEvents=jU;var xM=mi.keyboardEvents.concat("input","compositionstart","compositionupdate","compositionend");mi.keyLikeEvents=xM;mi.keyLikeEvents=xM;mi.keyLikeEvents=xM;var yM=function(f){var k=lively.FreezerRuntime.recorderFor("lively.morphic/events/Event.js"),n=k.hasOwnProperty("Event")&&"function"===typeof k.Event?k.Event:k.Event=function(b){b&&b[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return dc(n,f,[{key:Symbol.for("lively-instance-initialize"),value:function(b,e,m,a,g,l,r){this.type=b;this.domEvt=e;this.dispatcher=m;this.targetMorphs=a;this.hand=g;this.halo=l;this.layoutHalo=r;this.stopped=!1;this._keyCombo=void 0;this.onDispatchCallbacks=[];this.onAfterDispatchCallbacks=[];this.onStopCallbacks=[]}},{key:"onDispatch",value:function(b){this.onDispatchCallbacks.push(b);return this}},{key:"onAfterDispatch",value:function(b){this.onAfterDispatchCallbacks.push(b);
return this}},{key:"onStop",value:function(b){this.onStopCallbacks.push(b);return this}},{key:"data",get:function(){return this.domEvt.data}},{key:"world",get:function(){return this.dispatcher.world}},{key:"state",get:function(){return this.dispatcher.eventState}},{key:"keyInputState",get:function(){return this.state.keyInputState}},{key:"isMouseEvent",value:function(){return mi.pointerEvents.includes(this.type)||mi.mouseEvents.includes(this.type)}},{key:"isKeyboardEvent",value:function(){return!this.isMouseEvent()&&
mi.keyboardEvents.includes(this.type)}},{key:"stop",value:function(){this.stopped=!0;this.domEvt&&"function"===typeof this.domEvt.stopPropagation&&this.domEvt.stopPropagation();this.domEvt&&"function"===typeof this.domEvt.preventDefault&&this.domEvt.preventDefault();this.onStopCallbacks.forEach(function(b){return b()})}},{key:"targetMorph",get:function(){return this.targetMorphs[0]}},{key:"timestamp",get:function(){return this.domEvt.timeStamp}},{key:"position",get:function(){if(!this.domEvt)return mi.pt(0,
0);for(var b=this.domEvt.target;b&&b.id!==this.world.id;)b=b.parentNode;b||(b=this.domEvt.target,b=(b.nodeType===b.DOCUMENT_NODE?b:b.ownerDocument).getElementById(this.world.id));if(!b)return console.error("event position: cannot find world node for determining the position!"),mi.pt(0,0);b=mi.cumulativeOffset(b);var e=this.domEvt;b=mi.pt((e.pageX||0)-b.left,(e.pageY||0)-b.top);1!==this.world.scale&&(b=b.scaleBy(1/this.world.scale));return b}},{key:"startPosition",get:function(){return this.state.clickedOnPosition}},
{key:"pressure",get:function(){return this.domEvt?this.domEvt.pressure:.5}},{key:"positionIn",value:function(b){return b.localize(this.position)}},{key:"isClickTarget",value:function(b){var e=this.state.clickedOnMorph;return e&&(b===e||b.isAncestorOf(e))}},{key:"leftMouseButtonPressed",value:function(){return this.domEvt?(this.domEvt.buttons||0)&1:!1}},{key:"rightMouseButtonPressed",value:function(){return 3===this.domEvt.which||2===this.domEvt.buttons}},{key:"middleMouseButtonPressed",value:function(){return this.domEvt?
(this.domEvt.buttons||0)&4:!1}},{key:"isCommandKey",value:function(){var b=this.domEvt;if(!b)return!1;var e=!1;mi.bowser.mac||(e=e||b.ctrlKey);if(mi.bowser.tablet||mi.bowser.tablet)e=e||!1;return e||b.metaKey||"Meta"===b.keyIdentifier}},{key:"isShiftDown",value:function(){return this.domEvt&&!!this.domEvt.shiftKey}},{key:"isCtrlDown",value:function(){return this.domEvt&&!!this.domEvt.ctrlKey}},{key:"isAltDown",value:function(){return this.domEvt&&!!this.domEvt.altKey}},{key:"keyCombo",get:function(){return this._keyCombo||
(this._keyCombo=mi.Keys.eventToKeyCombo(this.domEvt))}},{key:"keyCombo",set:function(b){return this._keyCombo=b}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Event"}}],k,{pathInPackage:function(){return"events/Event.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:956,end:4962})}(void 0);mi.Event=yM;mi.Event=
yM;mi.Event=yM;var zM=function(f){var k=lively.FreezerRuntime.recorderFor("lively.morphic/events/Event.js"),n=k.hasOwnProperty("KeyEvent")&&"function"===typeof k.KeyEvent?k.KeyEvent:k.KeyEvent=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return dc(n,f,[{key:Symbol.for("lively-instance-initialize"),value:function(b,e,m,a,g,l,r){console.assert(mi.keyLikeEvents.includes(b),"not a keyboard event: "+b);dc._get(Object.getPrototypeOf(n.prototype),
Symbol.for("lively-instance-initialize"),this).call(this,b,e,m,a,g,l,r);Object.assign(this,mi.Keys.canonicalizeEvent(e))}},{key:"isKeyEvent",get:function(){return!0}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"KeyEvent"}}],k,{pathInPackage:function(){return"events/Event.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},
{start:4972,end:5341})}(mi.Event);mi.KeyEvent=zM;mi.KeyEvent=zM;mi.KeyEvent=zM;var AM=function(f){var k=lively.FreezerRuntime.recorderFor("lively.morphic/events/Event.js"),n=k.hasOwnProperty("SimulatedDOMEvent")&&"function"===typeof k.SimulatedDOMEvent?k.SimulatedDOMEvent:k.SimulatedDOMEvent=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return dc(n,f,[{key:Symbol.for("lively-instance-initialize"),value:function(b){b=
void 0===b?{}:b;if(b.position){var e=b.position,m=e.x;e=e.y;b=mi.obj.dissoc(b,["position"]);b.pageX=m;b.pageY=e}!b.hasOwnProperty("pointerId")&&mi.mouseEvents.concat(mi.pointerEvents).includes(b.type)&&(b=Object.assign({},b,{pointerId:1}));Object.assign(this,Object.assign({type:void 0,target:void 0,pageX:void 0,pageY:void 0,pointerId:void 0,pointerType:"mouse",buttons:0,keyCode:void 0,keyString:"",keyIdentifier:void 0,altKey:!1,ctrlKey:!1,shiftKey:!1,metaKey:!1,stopped:!1},b))}},{key:"preventDefault",
value:function(){this.defaultPrevented=!0}},{key:"stopPropagation",value:function(){this.propagationStopped=!0}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"SimulatedDOMEvent"}}],k,{pathInPackage:function(){return"events/Event.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:5350,end:6246})}(void 0);mi.SimulatedDOMEvent=
AM;mi.SimulatedDOMEvent=AM;mi.SimulatedDOMEvent=AM;var Hf=lively.FreezerRuntime.recorderFor("lively.morphic/events/EventDispatcher.js");Hf.dragStartEvent=function(f,k,n,b,e,m,a){var g=(new Hf.Event("morphicdragstart",f,k,[n],e,m,a)).onDispatch(function(){b.draggedMorph=n;b.dragStartMorphPosition=n.position;b.dragStartPosition=g.position;b.lastDragPosition=g.position;b.dragDelta=Hf.pt(0,0);b.absDragDelta=Hf.pt(0,0)}).onStop(function(){b.draggedMorph=null;k.schedule(Hf.dragEndEvent(f,k,n,b,e,m,a))});
return g};Hf.dragEvent=function(f,k,n,b,e,m,a){var g=(new Hf.Event("morphicdrag",f,k,[b.draggedMorph],e,m,a)).onDispatch(function(){b.dragDelta=(b.draggedMorph.owner||k.world).getInverseTransform().transformDirection(g.position.subPt(b.lastDragPosition));b.absDragDelta=g.position.subPt(b.clickedOnPosition)}).onAfterDispatch(function(){return b.lastDragPosition=g.position}).onStop(function(){b.draggedMorph=null;k.schedule(Hf.dragEndEvent(f,k,n,b,e,m,a))});return g};Hf.dragEndEvent=function(f,k,n,b,
e,m,a){var g=b.draggedMorph||n,l=(new Hf.Event("morphicdragend",f,k,[g],e,m,a)).onDispatch(function(){b.dragDelta=(g.owner||k.world).getInverseTransform().transformDirection(l.position.subPt(b.lastDragPosition));b.absDragDelta=l.position.subPt(b.clickedOnPosition)}).onAfterDispatch(function(){b.draggedMorph=null;b.lastDragPosition=null;b.dragDelta=Hf.pt(0,0);b.absDragDelta=Hf.pt(0,0);b.dragStartMorphPosition=null;b.dragStartPosition=null});return l};Hf.focusEvents=function(f,k){var n=f.eventState;
if(n.focusedMorph===k)return[];f=[];n.focusedMorph&&f.push((new Hf.Event("blur",null,this,[n.focusedMorph],null,null,null)).onDispatch(function(){return n.focusedMorph=null}));f.push((new Hf.Event("focus",null,this,[k],null,null,null)).onDispatch(function(){return n.focusedMorph=k}));return f};Hf.arr=$f;Hf.fun=Pn;Hf.Path=Ah;Hf.promise=zh;Hf.pt=xi;Hf.config=Dn;Hf.TextInput=Wka;Hf.KillRing=Xka;Hf.Event=yM;Hf.KeyEvent=zM;Hf.SimulatedDOMEvent=AM;Hf.keyLikeEvents=xM;Hf.cumulativeOffset=ki;Hf.bowser=xs;
Hf.domEventsWeListenTo=[{type:"pointerdown",capturing:!1},{type:"pointerup",capturing:!1},{type:"pointermove",capturing:!1,passive:!1},{type:"pointerover",capturing:!1,passive:!1},{type:"pointerout",capturing:!1,passive:!1},{type:"contextmenu",capturing:!1},{type:"scroll",capturing:!0,passive:!1},{type:"drag",capturing:!1},{type:"dragstart",capturing:!1},{type:"dragend",capturing:!1},{type:"dragover",capturing:!1},{type:"dragenter",capturing:!1},{type:"dragleave",capturing:!1},{type:"drop",capturing:!1}];
Hf.eventsCausingImmediateRender=new Set(["pointerdown","pointerup","keydown","keyup","input"]);Hf.globalDomEventsWeListenTo=[{type:"resize",capturing:!1,morphMethod:"onWindowResize"},{type:"orientationchange",capturing:!1,morphMethod:"onWindowResize"},{type:"scroll",capturing:!1,passive:!1,morphMethod:"onWindowScroll"},{type:"wheel",capturing:!1,passive:!1,morphToMethod:"onMouseWheel"},{type:"beforeunload",capturing:!1,passive:!1,morphMethod:"onBeforeUnload"}];Hf.typeToMethodMap={pointerdown:"onMouseDown",
pointerup:"onMouseUp",pointermove:"onMouseMove",longclick:"onLongClick",hoverin:"onHoverIn",hoverout:"onHoverOut",morphicdrag:"onDrag",morphicdragstart:"onDragStart",morphicdragend:"onDragEnd",grab:"onGrab",morphicdrop:"onDrop",morphicdrophoverin:"onDropHoverIn",morphicdrophoverout:"onDropHoverOut",morphicdrophoverupdate:"onDropHoverUpdate",keydown:"onKeyDown",keyup:"onKeyUp",input:"onTextInput",compositionstart:"onCompositionStart",compositionupdate:"onCompositionUpdate",compositionend:"onCompositionEnd",
blur:"onBlur",focus:"onFocus",contextmenu:"onContextMenu",cut:"onCut",copy:"onCopy",paste:"onPaste",scroll:"onScroll",wheel:"onMouseWheel",drag:"onNativeDrag",dragstart:"onNativeDragstart",dragend:"onNativeDragend",dragover:"onNativeDragover",dragenter:"onNativeDragenter",dragleave:"onNativeDragleave",drop:"onNativeDrop"};Hf.focusTargetingEvents="keydown keyup keypress input compositionstart compositionupdate compositionend cut copy paste".split(" ");Hf.textOnlyEvents=["input","compositionstart",
"compositionupdate","compositionend"];var I6=function(f){var k=lively.FreezerRuntime.recorderFor("lively.morphic/events/EventDispatcher.js"),n=k.hasOwnProperty("EventDispatcher")&&"function"===typeof k.EventDispatcher?k.EventDispatcher:k.EventDispatcher=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return dc(n,f,[{key:Symbol.for("lively-instance-initialize"),value:function(b,e){this.activations=0;this.emitter=b;this.keyInputHelper=
null;this.world=e;this.installed=!1;this.handlerFunctions=[];this.killRing=new Hf.KillRing(Hf.config.text.clipboardBufferLength);this.nodeMorphMap=new WeakMap;this.timestampBase=Hf.Path("performance.timing.navigationStart").get(b)||0;this.resetState()}},{key:"resetState",value:function(){this.eventState={timeOfLastActivity:0,focusedMorph:null,clickedOnPosition:null,clickedOnMorph:null,clickCount:0,prevClick:null,draggedMorph:null,dragDelta:null,absDragDelta:null,lastDragPosition:null,dragStartMorphPosition:null,
dragStartPosition:null,hover:{hoveredOverMorphs:[],unresolvedPointerOut:!1},scroll:{interactiveScrollInProgress:null},keyInputState:null,pressedKeys:{},html5Drag:{},dropHoverTarget:null};this.resetKeyInputState()}},{key:"resetKeyInputState",value:function(){this.eventState.keyInputState={keyChain:"",count:void 0}}},{key:"focusMorph",value:function(b){var e=this;this.keyInputHelper&&this.keyInputHelper.focus(b,this.world);Hf.focusEvents(this,b).forEach(function(m){return e.dispatchEvent(m)})}},{key:"isMorphFocused",
value:function(b){return this.eventState.focusedMorph===b}},{key:"isMorphHovered",value:function(b){return this.eventState.hover.hoveredOverMorphs.includes(b)}},{key:"isMorphClicked",value:function(b){return this.eventState.clickedMorph==b}},{key:"isKeyPressed",value:function(b){return Object.keys(this.eventState.pressedKeys).map(function(e){return e.toLowerCase()}).includes(b.toLowerCase())}},{key:"whenIdle",value:function(){var b=this;return Hf.promise.waitFor(function(){return 0===b.activations})}},
{key:"install",value:function(b){var e=this;if(this.installed)return this;this.installed=!0;var m=this.emitter,a=System.global;Hf.domEventsWeListenTo.forEach(function(g){var l=g.type,r=g.capturing;g=g.passive;var v=function(y){return e.dispatchDOMEvent(y)};e.handlerFunctions.push({node:m,type:l,fn:v,capturing:r});m.addEventListener(l,v,{capture:r,passive:g})});a.addEventListener&&Hf.globalDomEventsWeListenTo.forEach(function(g){var l=g.type,r=g.capturing,v=g.morphMethod;g=g.passive;var y=function(A){return e.dispatchDOMEvent(A,
e.world,v)};e.handlerFunctions.push({node:a,type:l,fn:y,capturing:r});a.addEventListener(l,y,{capture:r,passive:g})});this.keyInputHelper=(new Hf.TextInput(this)).install(b,this.world);Hf.bowser.ios&&b.setAttribute("touch-action","auto");return this}},{key:"uninstall",value:function(){this.installed=!1;var b=this.handlerFunctions;b.forEach(function(e){e.node.removeEventListener(e.type,e.fn,e.capturing)});b.length=0;this.keyInputHelper&&this.keyInputHelper.uninstall();this.keyInputHelper=null;return this}},
{key:"processDOMEvent",value:function(b,e){var m=this,a=b.type,g=this.eventState,l=[e].concat(e.ownerChain()),r="touch"===b.pointerType,v=b.pointerId,y="number"===typeof v?this.world.handForPointerId(v,b.isPrimary):this.world.firstHand,A="number"!==typeof v||r?null:this.world.haloForPointerId(v),E="number"!==typeof v||r?null:this.world.layoutHaloForPointerId(v),F=new (Hf.keyLikeEvents.includes(a)?Hf.KeyEvent:Hf.Event)(a,b,this,l,y,A,E),H=[F],I=[];switch(a){case "keydown":g.pressedKeys[F.key]=!0;break;
case "keyup":"Meta"===F.key?g.pressedKeys={}:delete g.pressedKeys[F.key];break;case "click":H=this.processDOMEvent(Object.assign({},b,{type:"pointerdown"}),e).events;a=this.processDOMEvent(Object.assign({},b,{type:"pointerup"}),e).events;H=H.concat(a);break;case "pointerdown":F.onDispatch(function(){m.focusMorph(e);g.clickedOnMorph=e;g.clickedOnPosition=F.position;g.downTimeStamp=b.timeStamp;var M=!1,N=0;if(g.prevClick){N=g.prevClick;M=N.clickedOnMorph;var W=N.clickedAtTime;N=N.clickCount;W=Date.now()-
W;M=M===e&&W<Hf.config.repeatClickInterval}g.clickCount=M?N+1:1});break;case "pointerup":F.onAfterDispatch(function(){var M=g.clickedOnMorph,N=g.clickedOnPosition,W=g.clickCount,X=Date.now();g.prevClick={clickedOnMorph:M,clickedOnPosition:N,clickedAtTime:X,clickCount:W};g.clickedOnMorph=null;g.clickCount=0;M=b.timeStamp-g.downTimeStamp;N=g.clickedOnPosition.dist(F.position);W=Hf.config.longClick;X=W.minDur;var ea=W.maxDur;N<W.maxDist&&M>=X&&M<=ea&&(M=new Hf.Event("longclick",b,m,l,y,A,E),m.schedule(M))});
g.draggedMorph&&(H.push(Hf.dragEndEvent(b,this,e,g,y,A,E)),F.targetMorphs=[this.world]);y.carriesMorphs()&&(g.dropHoverTarget?(H.push(new Hf.Event("morphicdrophoverout",b,this,[g.dropHoverTarget],y,A,E)),e=g.dropHoverTarget,g.dropHoverTarget=null):e=y.findDropTarget(F.position,y.grabbedMorphs),y.isAncestorOf(e)&&(e=this.world),H.push(new Hf.Event("morphicdrop",b,this,[e],y,A,E)),F.targetMorphs=[this.world]);break;case "pointermove":y.carriesMorphs()?(F.targetMorphs=[this.world],a=y.findDropTarget(F.position,
y.grabbedMorphs)||this.world,g.dropHoverTarget===a?H.push(new Hf.Event("morphicdrophoverupdate",b,this,[a],y,A,E)):(g.dropHoverTarget&&H.push(new Hf.Event("morphicdrophoverout",b,this,[g.dropHoverTarget],y,A,E)),g.dropHoverTarget=a,H.push(new Hf.Event("morphicdrophoverin",b,this,[a],y,A,E)))):g.draggedMorph?(F.targetMorphs=[this.world],H.push(Hf.dragEvent(b,this,e,g,y,A,E))):g.clickedOnMorph&&g.clickedOnPosition&&g.clickedOnMorph.draggable&&!g.draggedMorph&&!y.carriesMorphs()&&(a=g.clickedOnPosition.dist(F.position),
r=g.clickedOnMorph,a>r.dragTriggerDistance&&(r.grabbable?H.push(new Hf.Event("grab",b,this,[r],y,A,E)):r.draggable&&H.push(Hf.dragStartEvent(b,this,r,g,y,A,E)),F.targetMorphs=[this.world]));break;case "pointerover":g.hover.unresolvedPointerOut&&(g.hover.unresolvedPointerOut=!1);a=[e].concat(e.ownerChain()).reverse();H=Hf.arr.withoutAll(g.hover.hoveredOverMorphs,a).map(function(M){return(new Hf.Event("hoverout",b,m,[M],y,A,E)).onDispatch(function(){return Hf.arr.remove(g.hover.hoveredOverMorphs,M)})});
a=Hf.arr.withoutAll(a,g.hover.hoveredOverMorphs).map(function(M){return(new Hf.Event("hoverin",b,m,[M],y,A,E)).onDispatch(function(){return Hf.arr.pushIfNotIncluded(g.hover.hoveredOverMorphs,M)})});H=H.concat(a);break;case "pointerout":H=[];g.hover.unresolvedPointerOut=!0;I.push(function(){if(g.hover.unresolvedPointerOut)return Promise.all(g.hover.hoveredOverMorphs.map(function(M){return m.schedule((new Hf.Event("hoverout",b,m,[M],y,A,E)).onAfterDispatch(function(){return Hf.arr.remove(g.hover.hoveredOverMorphs,
M)}))}))});r&&this.world.removeHandForPointerId(v);break;case "blur":H=[(new Hf.Event(a,b,this,[e],y,A,E)).onDispatch(function(){return g.focusedMorph=null})];break;case "focus":H=Hf.focusEvents(this,e);break;case "scroll":H=[(new Hf.Event(a,b,this,[e],y,A,E)).onDispatch(function(){if(!g.scroll.interactiveScrollInProgress){var M=Hf.promise.deferred(),N=M.promise,W=M.resolve;M="Firefox"==Hf.bowser.name?500:250;"Safari"==Hf.bowser.name&&(M=1E3);g.scroll.interactiveScrollInProgress=N;N.debounce=Hf.fun.debounce(M,
function(){g.scroll.interactiveScrollInProgress=null;W()})}g.scroll.interactiveScrollInProgress.debounce();N=b.target.documentElement||b.target;M=N.scrollLeft;var X=N.scrollTop,ea=e.scroll,Aa=ea.x;ea=ea.y;if("hidden"!=N.style.overflow&&Aa!==M||ea!==X)e.scroll=Hf.pt(M,X)})];break;case "input":case "compositionstart":case "compositionupdate":case "compositionend":e.isText?F.targetMorphs=[e]:H=[];break;case "drag":case "dragstart":case "dragend":case "dragover":case "dragenter":case "dragleave":case "drop":"drop"!==
a&&"dragover"!==a||b.preventDefault()}return{events:H,later:I}}},{key:"schedule",value:function(b){var e=this;this.activations++;return Promise.resolve().then(function(){return e.dispatchEvent(b)}).then(function(){return e.activations--},function(m){e.activations--;throw m;})}},{key:"dispatchEvent",value:function(b,e){e=e||Hf.typeToMethodMap[b.type];if(!e)throw Error("dispatchEvent: "+b.type+" not yet supported!");b.onDispatchCallbacks.forEach(function(g){return g()});this.activations++;for(var m,
a=b.targetMorphs.length-1;0<=a;a--){try{b.targetMorphs[a][e](b)}catch(g){m=Error("Error in event handler "+b.targetMorphs[a]+"."+e+": "+(g.stack||g)),m.originalError=g,"undefined"!==typeof this.world?this.world.logError(m):console.error(m)}if(m||b.stopped)break}this.activations--;b.onAfterDispatchCallbacks.forEach(function(g){return g()});if(m)throw m;}},{key:"dispatchDOMEvent",value:function(b,e,m){var a=this,g=this.world,l=this.eventState,r=this.nodeMorphMap,v=b.type;l.timeOfLastActivity=this.timestampBase+
b.timeStamp;if(!e&&Hf.focusTargetingEvents.includes(v))e=l.focusedMorph||g;else if(!e){for(l=b.target;;){e=l.className||"";"string"!==typeof e&&"baseVal"in e&&(e=e.baseVal);if(e&&e.includes("Morph"))break;if(!(l=l.parentNode))return}e=r.get(l);if(!e){var y=l.id;(e=g.withAllSubmorphsDetect(function(A){return A.id===y}))&&r.set(l,e)}}e&&(b=this.processDOMEvent(b,e),r=b.events,b.later.map(function(A){a.activations++;return Hf.promise.delay(0).then(A).then(function(){return a.activations--},function(E){a.activations--;
throw E;})}),r.forEach(function(A){return a.dispatchEvent(A,m)}),g&&g.needsRerender()&&Hf.eventsCausingImmediateRender.has(v)&&g.env.renderer.renderLater())}},{key:"simulateDOMEvents",value:function(b){for(var e=[],m=0;m<arguments.length;++m)e[m-0]=arguments[m];m=this.emitter.document||this.emitter.ownerDocument;var a=[];e=$jscomp.makeIterator(e);for(var g=e.next();!g.done;g=e.next()){var l=g=g.value,r=l.target,v=l.position;l=l.type;if(Hf.focusTargetingEvents.includes(l)){if(!this.keyInputHelper.domState.textareaNode)throw Error("Cannot simulate event of type "+
l+", no keyInputHelper installed!");g=Object.assign({},g,{target:this.keyInputHelper.textareaNode})}r||(r=v?this.world.morphsContainingPoint(v)[0]:this.world);r.isMorph&&(g=Object.assign({},g,{target:m.getElementById(r.id)}));g.position&&(r=Hf.cumulativeOffset(m.getElementById(this.world.id)),g.position=g.position.addXY(r.left,r.top));"scroll"===l&&("scrollLeft"in g||"scrollTop"in g)&&(g.target.scrollLeft=g.scrollLeft||0,g.target.scrollTop=g.scrollTop||0);g=new Hf.SimulatedDOMEvent(g);a.push(g);this.dispatchDOMEvent(g)}return a}},
{key:"doCopy",value:function(b){return this.keyInputHelper.doCopy(b)}},{key:"doCopyWithMimeTypes",value:function(b){return this.keyInputHelper.doCopyWithMimeTypes(b)}},{key:"doPaste",value:function(){return this.keyInputHelper.doPaste()}},{key:"cancelGrab",value:function(b,e){var m=this,a=[],g=this.eventState;g.clickedOnMorph=null;g.dropHoverTarget&&(a.push(new Hf.Event("morphicdrophoverout",e.domEvt,this,[g.dropHoverTarget],b,null,null)),g.dropHoverTarget=null);a.forEach(function(l){return m.dispatchEvent(l)})}}],
[{key:Symbol.for("__LivelyClassName__"),get:function(){return"EventDispatcher"}}],k,{pathInPackage:function(){return"events/EventDispatcher.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:7617,end:30013})}(void 0),Yka=I6=Hf.EventDispatcher;Hf.default=I6;var qm=lively.FreezerRuntime.recorderFor("lively.morphic/env.js");qm.defaultDOMEnv=
MC;qm.Renderer=vM;qm.FontMetric=Vka;qm.ChangeManager=wM;qm.UndoManager=bH;qm.EventDispatcher=Yka;qm.subscribe=Fx;qm.unsubscribe=jw;var qs=Da("aZ",function(f){var k=lively.FreezerRuntime.recorderFor("lively.morphic/env.js"),n=k.hasOwnProperty("MorphicEnv")&&"function"===typeof k.MorphicEnv?k.MorphicEnv:k.MorphicEnv=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return dc(n,f,[{key:Symbol.for("lively-instance-initialize"),
value:function(b){var e=this;b=void 0===b?qm.defaultDOMEnv():b;this.initialized=!1;this.synchronizer=this.objPool=this.systemChangeHandlers=this.world=this.eventDispatcher=this.renderer=this.fontMetric=null;this.changeManager=new qm.ChangeManager;this.undoManager=new qm.UndoManager;this.installSystemChangeHandlers();this.whenRenderedRequesters=new Map;this.whenRenderedTickingProcess=null;"function"===typeof b.then?this._waitForDOMEnv=b.then(function(m){e._waitForDOMEnv=null;e.initWithDOMEnv(m);e.initialized=
!0}).catch(function(m){return console.error("Error initializing MorphicEnv with dom env: "+m.stack)}):(this.initWithDOMEnv(b),this.initialized=!0)}},{key:"isDefault",value:function(){return this.constructor.default()===this}},{key:"initWithDOMEnv",value:function(b){this.domEnv=b;this.fontMetric=qm.FontMetric.forDOMEnv(b)}},{key:"uninstallWorldRelated",value:function(){this.renderer&&this.renderer.clear();this.eventDispatcher&&this.eventDispatcher.uninstall();this.world&&this.world.suspendSteppingAll()}},
{key:"uninstall",value:function(){var b=this;if(this._waitForDOMEnv)return this._waitForDOMEnv.then(function(){return b.uninstall()});this.deleteHistory();this.uninstallWorldRelated();this.fontMetric&&(this.fontMetric.uninstall(),this.fontMetric=null);this.domEnv&&this.whenRenderedTickingProcess&&(this.domEnv.window.cancelAnimationFrame(this.whenRenderedTickingProcess),this.whenRenderedTickingProcess=null);this.whenRenderedRequesters=new Map;this.domEnv&&this.domEnv.destroy();this.initialized=!1;
return Promise.resolve()}},{key:"setWorld",value:function(b){var e=this;return this._waitForDOMEnv?this._waitForDOMEnv.then(function(){return e.setWorld(b)}):this.setWorldRenderedOn(b,this.domEnv.document.body)}},{key:"setWorldRenderedOn",value:function(b,e,m){var a=this;m=void 0===m?null:m;if(!b||!b.isWorld)throw Error("world object does not look like a morphic world");if(this._waitForDOMEnv)return this._waitForDOMEnv.then(function(){return a.setWorldRenderedOn(b,e,m)});this.deleteHistory();this.uninstallWorldRelated();
this.world=b;this.renderer=new qm.Renderer(b,e,this.domEnv);this.renderer.domNode=m;this.eventDispatcher=(new qm.EventDispatcher(this.domEnv.window,b)).install(e);b.resumeSteppingAll();this.isDefault()&&(this.domEnv.window.$world=b);b.focus();b.makeDirty();this.renderer.renderLater();return b.whenRendered().then(function(){return a})}},{key:"installSystemChangeHandlers",value:function(){var b=this;if(!this.systemChangeHandlers){var e=this.systemChangeHandlers={};e["lively.modules/moduleloaded"]=[qm.subscribe("lively.modules/moduleloaded",
function(m){return b.getTargetsFor("onModuleLoaded").forEach(function(a){return a.onModuleLoaded(m)})})];e["lively.modules/modulechanged"]=[qm.subscribe("lively.modules/modulechanged",function(m){return b.getTargetsFor("onModuleChanged").forEach(function(a){return a.onModuleChanged(m)})})];e["lively.partsbin/partpublished"]=[qm.subscribe("lively.partsbin/partpublished",function(m){return b.getTargetsFor("onPartPublished").forEach(function(a){return a.onPartPublished(m)})})];e["lively.user/userchanged"]=
[qm.subscribe("lively.user/userchanged",function(m){return b.getTargetsFor("onUserChanged").forEach(function(a){return a.onUserChanged(m)})})]}}},{key:"uninstallSystemChangeHandlers",value:function(){var b=this.systemChangeHandlers;b&&(this.systemChangeHandlers=null,Object.keys(b).forEach(function(e){return b[e].forEach(function(m){return qm.unsubscribe(e,m)})}))}},{key:"getTargetsFor",value:function(b){var e=this.world,m=[];if(!e||!e.submorphs)return m;"function"===typeof e[b]&&m.push(e);e=$jscomp.makeIterator(e.submorphs);
for(var a=e.next();!a.done;a=e.next())a=a.value,"function"===typeof a[b]&&m.push(a),a.isWindow&&a.targetMorph&&"function"===typeof a.targetMorph[b]&&m.push(a.targetMorph);return m}},{key:"cleanupCaches",value:function(){this.world.withAllSubmorphsDo(function(b){return b._pathDependants=b._pathDependants.filter(function(e){return e.world()})})}},{key:"deleteHistory",value:function(){var b=this.changeManager,e=this.world,m=this.fontMetric;b&&(b.changes.length=0);e&&e.withAllSubmorphsDo(function(a){return a.undoManager&&
a.undoManager.reset()});m&&m.reset()}},{key:"printStatus",value:function(){var b=this.changeManager,e=this.world,m=0,a=0;e&&e.withAllSubmorphsDo(function(g){g.undoManager&&(m++,a+=g.undoManager.undos.length+g.undoManager.redos.length)});return b.changes.length+" changes recorded\n"+m+" morphs with undos\n"+a+" undo changes"}},{key:"updateWhenRenderedRequests",value:function(){for(var b=this,e=this.whenRenderedRequesters,m=0,a=$jscomp.makeIterator(e),g=a.next();!g.done;g=a.next()){var l=$jscomp.makeIterator(g.value);
g=l.next().value;var r=l=l.next().value,v=r.maxAttempts,y=r.resolve;r=r.reject;g._dirty||g._rendering?++l.currentAttempt>v?(e.delete(g),r(Error("Failed to wait for whenRendered of "+g+" (tried "+v+"x)"))):m++:(e.delete(g),y(g))}this.whenRenderedTickingProcess=m?this.domEnv.window.requestAnimationFrame(function(){return b.updateWhenRenderedRequests()}):null}},{key:"whenRendered",value:function(b,e){var m=this;e=void 0===e?50:e;var a=this.whenRenderedRequesters,g=this.whenRenderedTickingProcess,l=a.get(b);
if(!l){var r,v;l=new Promise(function(y,A){r=y;v=A});a.set(b,l={maxAttempts:e,currentAttempt:0,resolve:r,reject:v,promise:l})}g||(this.whenRenderedTickingProcess=this.domEnv.window.requestAnimationFrame(function(){return m.updateWhenRenderedRequests()}));return l.promise}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"MorphicEnv"}},{key:"reset",value:function(){for(;;){var b=this.popDefault();if(!b)break;try{b.uninstall()}catch(e){console.error("Error uninstalling MorphicEnv: "+(e.stack||
e))}}}},{key:"default",value:function(){var b=this.envs;b.length||this.pushDefault(new this);return b[b.length-1]}},{key:"pushDefault",value:function(b){this.envs.push(b);return b}},{key:"popDefault",value:function(){return this.envs.pop()}},{key:"envs",get:function(){return this._envs||(this._envs=[])}}],k,{pathInPackage:function(){return"env.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",
version:"0.1.2"}}},{start:406,end:8262})}(void 0));qm.MorphicEnv=qs;qm.MorphicEnv=qs;qm.MorphicEnv=qs;var Zka=Object.freeze({__proto__:null,MorphicEnv:qs}),Sw=lively.FreezerRuntime.recorderFor("lively.morphic/CommandHandler.js");Sw.printArg=function(f){return Sw.obj.inspect(f,{maxDepth:1}).replace(/\n/g,"").replace(/\s+/g," ")};Sw.obj=Ag;Sw.arr=$f;Sw.promise=zh;var J6=function(f){var k=lively.FreezerRuntime.recorderFor("lively.morphic/CommandHandler.js"),n=k.hasOwnProperty("CommandHandler")&&"function"===
typeof k.CommandHandler?k.CommandHandler:k.CommandHandler=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return dc(n,f,[{key:Symbol.for("lively-instance-initialize"),value:function(){this.history=[];this.maxHistorySize=1E3}},{key:"addToHistory",value:function(b){this.history.push(b);this.history.length>this.maxHistorySize&&this.history.splice(0,this.history.length-this.maxHistorySize)}},{key:"printHistory",value:function(){return this.history.map(this.printCommand).join("\n")}},
{key:"printCommand",value:function(b){var e=b.target.string,m=b.args,a=b.count,g=b.evt,l=b.keyCombo;return'"'+b.name+'" '+(g?g+" ":"")+(l?l+" ":"")+(m?Sw.printArg(m):"")+("number"===typeof a?" x"+a:"")+" "+e}},{key:"lookupCommand",value:function(b,e){var m;if(!b)return{};"string"===typeof b&&(m=b);"string"===typeof b.command&&(m=b.command);if(b.exec){var a=b;m=a.name}a||(a=e.commands.find(function(g){return g.name===m}));return{name:m,command:a}}},{key:"exec",value:function(b,e,m,a,g){var l=this,
r=this.lookupCommand(b,e)||{},v=r.name,y=r.command;if(!y)return console.warn("Cannot find command "+(v||b)),null;if(v){if(g){var A=g.type;if(g.isKeyEvent)var E=g.keyCombo}this.addToHistory({name:v,target:{string:String(e),id:e.id},args:m,count:a,time:Date.now(),evt:A,keyCombo:E})}var F=e.world();"string"===typeof y.progressIndicator&&(this.progressIndicator=F.execCommand("open loading indicator",y.progressIndicator));if("function"===typeof y.exec)try{var H=y.exec(e,m,y.handlesCount?a:void 0,g)}catch(I){H=
I,b="Error in interactive command "+v+": "+(I.stack||I),F?F.logError(b):console.error(b)}else console.error("command "+v+" has no exec function!");this.progressIndicator&&this.progressIndicator.remove();H&&"function"===typeof H.catch?(H.catch(function(I){var M="Error in interactive command "+v+": "+I+"\n"+(I.stack||I);F?F.logError(M):console.error(M);throw I;}),this.progressIndicator&&Sw.promise.finally(H,function(){return l.progressIndicator.remove()})):this.progressIndicator&&this.progressIndicator.remove();
H&&"number"===typeof a&&1<a&&!y.handlesCount&&(H="function"===typeof H.then?H.then(function(){return l.exec(y,e,m,a-1,g,null)}):this.exec(y,e,m,a-1,g,null));return H}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"CommandHandler"}}],k,{pathInPackage:function(){return"CommandHandler.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},
{start:189,end:3586})}(void 0),$ka=J6=Sw.CommandHandler;Sw.default=J6;var Og=lively.FreezerRuntime.recorderFor("lively.morphic/events/KeyHandler.js");Og.ensureSpaces=function(f){return f.length?f:" "};Og.invokeKeyHandlers=function(f,k,n){n=void 0===n?!1:n;var b=k=Og.Keys.canonicalizeEvent(k),e=b.key,m=b.data,a,g=!1,l=f.keyhandlers,r=k.keyInputState||{};b=b.keyCombo.startsWith("input-");var v=!1,y=r.count,A=r.keyChain||"",E=!1;if(!l||n&&b)return!1;for(n=l.length;n--;)if((a=l[n].eventCommandLookup(f,
k))&&a.command){E=a;a=E.command;var F=E.args,H=E.passEvent,I=E.count;v=E.keyChain;var M=E.onlyWhenFocused;E=!0;y=I;A=v;v="null"===a;if(M&&(M=f.world())&&M.focusedMorph&&M.focusedMorph!==f)continue;g=v?!1:f.execCommand(a,F,I,k);!g||b&&"insertstring"===a||H||"function"!==typeof k.stop||k.stop();if(g||v)break}g||v||!b||!f.onTextInput||A||(g=f.execCommand("insertstring",{string:m||e,undoGroup:Og.config.text.undoGroupDelay},r.count,k));if(E)if("function"===typeof k.onAfterDispatch)k.onAfterDispatch(function(){r.count=
g?void 0:y;r.keyChain=g?"":A});else r.count=g?void 0:y,r.keyChain=g?"":A;return g&&!v};Og.simulateKeys=function(f,k,n){n=void 0===n?{keyChain:void 0,count:void 0}:n;var b,e,m,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(g){1==g.nextAddress&&(b=1===k.length?[k]:k.split(/ /g).map(Og.ensureSpaces),e=$jscomp.makeIterator(b),m=e.next());if(3!=g.nextAddress){if(m.done)return g.jumpTo(0);a=m.value;return g.yield(Og.simulateKey(f,a,n),3)}m=e.next();return g.jumpTo(2)})};Og.simulateKey=function(f,
k,n){return Og.invokeKeyHandlers(f,Object.assign({},Og.Keys.keyComboToEventSpec(k),{keyInputState:n}))};Og.bowserOS=function(){return Og.bowser.mac?"mac":Og.bowser.windows?"windows":Og.bowser.windowsphone?"windowsphone":Og.bowser.linux?"linux":Og.bowser.chromeos?"chromeos":Og.bowser.android?"android":Og.bowser.ios?"ios":Og.bowser.blackberry?"blackberry":Og.bowser.firefoxos?"firefoxos":Og.bowser.webos?"webos":Og.bowser.bada?"bada":Og.bowser.tizen?"tizen":Og.bowser.sailfish?"sailfish":"unknown"};Og.findKeysForPlatform=
Db;Og.Keys=gU;Og.bowser=xs;Og.config=Dn;Og.arr=$f;Og.findKeysForPlatform=Db;Og.findKeysForPlatform=Db;Og.regexps={meta:/Meta|Cmd|Command/gi,alt:/Alt/gi,ctrl:/Ctrl|Control/gi,tab:/Tab/gi,enter:/Enter|Return/gi,shift:/Shift/gi,backspace:/Backspace/gi,delete:/del(ete)?/gi,left:/left/gi,right:/right/gi,up:/up/gi,down:/down/gi,keySpacer:/([^-])-/g,seqSpacer:/([^\s])\s/g};var kU=function(f){var k=lively.FreezerRuntime.recorderFor("lively.morphic/events/KeyHandler.js"),n=k.hasOwnProperty("KeyHandler")&&
"function"===typeof k.KeyHandler?k.KeyHandler:k.KeyHandler=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return dc(n,f,[{key:Symbol.for("lively-instance-initialize"),value:function(b){this.platform=b=void 0===b?Og.bowserOS():b;this.keyBindings={}}},{key:"eventCommandLookup",value:function(b,e){return this.lookup(e.keyCombo,e.keyInputState)}},{key:"lookup",value:function(b,e){var m=this;e=void 0===e?{keyChain:void 0,
count:void 0}:e;b=Og.Keys.canonicalizeKeyCombo(b);var a=e.keyChain||"";e=e.count;if(!a&&b.startsWith("Ctrl-")){var g=b.match(/^Ctrl-([0-9]+)/);if(g)return{command:"null",count:parseInt(("number"===typeof e?e:"")+g[1])};if("Ctrl-U"===b)return{command:"null",count:4,keyChain:"Ctrl-U"}}g=[b];if(!r&&b.startsWith("input-")){r=b.replace(/^(input-)(.*)$/,function(v,y,A){return y+A.toUpperCase()});var l=b.replace(/^(input-)(.*)$/,function(v,y,A){return y+A.toLowerCase()});g.push(r,l)}var r=g.map(function(v){return m.keyBindings[v]})[0];
a&&(g=g.find(function(v){return m.keyBindings[a+" "+v]}))&&(a+=" "+g,r=this.keyBindings[a]||r);if(r&&"chainKeys"===r)return a=a||b,b={command:"null",keyChain:a},void 0!==e&&(b.count=e),b;if(r)return b="object"===typeof r?Object.assign({},r):{command:r},void 0!==e&&(b.count=e),b}},{key:"bindKey",value:function(b,e){var m=this;"object"==typeof b&&b&&!Array.isArray(b)&&(b=Og.findKeysForPlatform(b,this.platform));if(b){if("function"==typeof e)return this.addCommand({exec:e,bindKey:b,name:e.name||b});
(Array.isArray(b)?b:b.includes("|")?b.split("|"):[b]).forEach(function(a){var g="";if(-1!=a.indexOf(" ")){var l=a.split(/\s+/);a=l.pop();l.forEach(function(r){r=Og.Keys.canonicalizeKeyCombo(r);g+=(g?" ":"")+r;m.addCommandToBinding(g,"chainKeys")});g+=" "}m.addCommandToBinding(g+Og.Keys.canonicalizeKeyCombo(a),e)});this.cleanupUnusedKeyChains()}}},{key:"unbindKey",value:function(b){this.bindKey(b,null)}},{key:"cleanupUnusedKeyChains",value:function(){var b=this,e=Object.keys(this.keyBindings),m=e.filter(function(a){return"chainKeys"===
b.keyBindings[a]});m=Og.arr.sortBy(m,function(a){return a.length}).reverse();m.forEach(function(a){e.some(function(g){return a!==g&&g.startsWith(a)})||(delete b.keyBindings[a],Og.arr.remove(e,a),Og.arr.remove(m,a))})}},{key:"addCommand",value:function(b){return b&&b.bindKey?this.addCommandToBinding(b.bindKey,b):void 0}},{key:"addCommandToBinding",value:function(b,e){var m=this;"chainKeys"===this.keyBindings[b]&&"chainKeys"!=e&&Object.keys(this.keyBindings).forEach(function(a){a.startsWith(b)&&delete m.keyBindings[a]});
e?this.keyBindings[b]=e:delete this.keyBindings[b];"chainKeys"!==e&&this.cleanupUnusedKeyChains()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"KeyHandler"}},{key:"invokeKeyHandlers",value:function(b,e,m){return Og.invokeKeyHandlers(b,e,void 0===m?!1:m)}},{key:"simulateKeys",value:function(b,e,m){return Og.simulateKeys(b,e,m)}},{key:"withBindings",value:function(b,e){var m=new this(e);b.forEach(function(a){return m.bindKey(a.keys,a.command)});return m}},{key:"prettyCombo",value:function(b){var e=
this._prettyCombos||(this._prettyCombos={});return this._prettyCombos[b]?e[b]:e[b]=b.replace(Og.regexps.meta,"\u2318").replace(Og.regexps.alt,"\u2325").replace(Og.regexps.ctrl,"\u2303").replace(Og.regexps.tab,"\u21e5").replace(Og.regexps.enter,"\u23ce").replace(Og.regexps.shift,"\u21e7").replace(Og.regexps.backspace,"\u232b").replace(Og.regexps.delete,"\u2326").replace(Og.regexps.left,"\u2192").replace(Og.regexps.right,"\u2190").replace(Og.regexps.up,"\u2191").replace(Og.regexps.down,"\u2193").replace(Og.regexps.keySpacer,
"$1").replace(Og.regexps.seqSpacer,"$1-")}},{key:"generateCommandToKeybindingMap",value:function(b,e,m){function a(v){if(r[v.id])return r[v.id];var y=l[v.id]||(l[v.id]=v.keyCommandMap);return r[v.id]=Og.arr.groupBy(Object.keys(y),function(A){return y[A].name})}var g=this;m=void 0===m?!0:m;var l={},r={};return((void 0===e?0:e)?b.commandsIncludingOwners:b.commands.map(function(v){return{command:v,target:b}})).map(function(v){var y=v.target;v=v.command;var A=a(y)[v.name];return{keys:A,target:y,command:v,
prettyKeys:A&&m?A.map(function(E){return g.prettyCombo(E)}):null}})}}],k,{pathInPackage:function(){return"events/KeyHandler.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:6164,end:13032})}(void 0);kU=Og.KeyHandler;var lU=Da("ab",kU);Og.default=kU;var Hy=lively.FreezerRuntime.recorderFor("lively.morphic/ticking.js"),K6=function(f){var k=
lively.FreezerRuntime.recorderFor("lively.morphic/ticking.js"),n=k.hasOwnProperty("Script")&&"function"===typeof k.Script?k.Script:k.Script=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return dc(n,f,[{key:Symbol.for("lively-instance-initialize"),value:function(){this.suspended=!1;this.stopped=!0;this.currentTimeout=this.type=this.tickTime=null}},{key:"__additionally_serialize__",value:function(b,e,m){b.props.suspended.value=
!0}},{key:"isScript",get:function(){return!0}},{key:"global",get:function(){return System.global}},{key:"execute",value:function(){throw Error("subclass responsibility");}},{key:"tick",value:function(){try{this.execute()}catch(b){console.error("Error executing script "+this+": "+b+"\n"+b.stack);return}this.stopped||this.startTicking(this.tickTime)}},{key:"startTicking",value:function(b){this.stopped=!1;this.tickTime=b;this.type="number"===typeof b?"setTimeout":"requestAnimationFrame";this.currentTimeout=
"setTimeout"===this.type?this.global.setTimeout(this.tick.bind(this),b):this.global.requestAnimationFrame(this.tick.bind(this))}},{key:"stop",value:function(){this.global["setTimeout"===this.type?"clearTimeout":"cancelAnimationFrame"](this.currentTimeout);this.stopped=!0}},{key:"resume",value:function(b){b=void 0===b?this.tickTime:b;this.suspended&&(this.suspended=!1,this.startTicking(this.tickTime=b))}},{key:"suspend",value:function(){this.stop();this.suspended=!0}}],[{key:Symbol.for("__LivelyClassName__"),
get:function(){return"Script"}}],k,{pathInPackage:function(){return"ticking.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:19,end:1360})}(void 0),mU=function(f){var k=lively.FreezerRuntime.recorderFor("lively.morphic/ticking.js"),n=k.hasOwnProperty("TargetScript")&&"function"===typeof k.TargetScript?k.TargetScript:k.TargetScript=
function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return dc(n,f,[{key:Symbol.for("lively-instance-initialize"),value:function(b,e,m){dc._get(Object.getPrototypeOf(n.prototype),Symbol.for("lively-instance-initialize"),this).call(this);this.target=b;this.selector=e;this.args=m||[]}},{key:"execute",value:function(){this.target.isMorph&&!this.target.tickingScripts.includes(this)&&this.stop();"function"===typeof this.target[this.selector]&&
this.target[this.selector].apply(this.target,this.args)}},{key:"equals",value:function(b){return b.isScript&&this.target==b.target&&this.selector==b.selector}},{key:"toString",value:function(){return"Script("+this.target+">>"+this.selector+"("+this.args.join(",")+"))"}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"TargetScript"}}],k,{pathInPackage:function(){return"ticking.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:1362,end:1994})}(Hy.Script),L6=function(f){var k=lively.FreezerRuntime.recorderFor("lively.morphic/ticking.js"),n=k.hasOwnProperty("FunctionScript")&&"function"===typeof k.FunctionScript?k.FunctionScript:k.FunctionScript=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return dc(n,f,[{key:Symbol.for("lively-instance-initialize"),value:function(b){dc._get(Object.getPrototypeOf(n.prototype),
Symbol.for("lively-instance-initialize"),this).call(this);this.callback=b}},{key:"execute",value:function(){this.callback()}},{key:"equals",value:function(b){return b.isScript&&this.callback==b.callback}},{key:"toString",value:function(){return"Script("+(this.callback.toString().replace(/\n/g,"").slice(0,40)+"...)")}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"FunctionScript"}}],k,{pathInPackage:function(){return"ticking.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:1996,end:2330})}(Hy.Script);Hy.Script=K6;Hy.Script=K6;Hy.TargetScript=mU;Hy.TargetScript=mU;Hy.FunctionScript=L6;Hy.FunctionScript=L6;var sq=lively.FreezerRuntime.recorderFor("lively.modules/src/hooks.js");sq.install=yb;sq.remove=wc;sq.isInstalled=Lc;sq.arr=$f;sq.fun=Pn;sq.install=yb;sq.install=yb;sq.remove=wc;sq.remove=wc;sq.isInstalled=Lc;sq.isInstalled=
Lc;var BM=lively.FreezerRuntime.recorderFor("lively.modules/src/cycle-breaker.js");BM.classHolder={};var Tw=BM.classHolder;BM.classHolder=Tw;BM.classHolder=Tw;var tw=lively.FreezerRuntime.recorderFor("lively.modules/src/dependencies.js");tw.computeRequireMap=nc;tw.graph=xu;tw.arr=$f;tw.obj=Ag;tw.loadedModules=fJ;tw.computeRequireMap=nc;tw.computeRequireMap=nc;var Zo=lively.FreezerRuntime.recorderFor("lively.modules/src/import-export.js");Zo.scheduleModuleExportsChange=gd;Zo.runScheduledExportChanges=
wd;Zo.clearPendingModuleExportChanges=function(f,k){delete f.get("@lively-env").pendingExportChanges[k]};Zo.updateModuleExports=function(f,k,n){var b=f.debug;Zo.module(f,k).updateRecord(function(e){var m=[],a=[];Object.keys(n).forEach(function(E){var F=n[E];b&&console.log("[lively.vm es6 updateModuleExports] %s export %s = %s",k,E,String(F).slice(0,30).replace(/\n/g,"")+"...");var H=!(E in e.exports);H&&(e.__lively_modules__.evalOnlyExport[E]=!0);e.exports[E]=F;H?m.push(E):a.push(E)});if(m.length){var g=
f.get(k);Object.isFrozen(g)?(console.warn("[lively.vm es6 updateModuleExports] Since module %s is frozen a new module object was installed in the system. Note that only(!) exisiting module bindings are updated. New exports that were added will only be available in already loaded modules after those are reloaded!",k),f.set(k,f.newModule(e.exports))):(b&&console.log("[lively.vm es6 updateModuleExports] adding new exports to %s",k),m.forEach(function(E){Object.defineProperty(g,E,{configurable:!1,enumerable:!0,
get:function(){return e.exports[E]},set:function(){throw Error("exports cannot be changed from the outside");}})}))}if(a.length){b&&console.log("[lively.vm es6 updateModuleExports] updating %s dependents of %s",e.importers.length,k);for(var l=0,r=e.importers.length;l<r;l++){var v=e.importers[l];if(!v.locked){var y;if(v.dependencies.some(function(E,F){y=F;return E&&E.name===e.name})){if(b){var A=Zo.module(f,v.name);console.log("[lively.vm es6 updateModuleExports] calling setters of "+A["package"]().name+
"/"+A.pathInPackage())}Zo.module(f,v.name).evaluationStart();v.setters[y](e.exports);Zo.module(f,v.name).evaluationEnd()}}}}})};Zo.module=kh;Zo.scheduleModuleExportsChange=gd;Zo.scheduleModuleExportsChange=gd;Zo.runScheduledExportChanges=wd;Zo.runScheduledExportChanges=wd;var zk=lively.FreezerRuntime.recorderFor("lively.modules/src/change.js");zk.moduleSourceChange=je;zk.moduleSourceChangeEsm=function(f,k,n,b){var e,m,a,g,l,r,v,y,A,E,F,H,I,M,N;return $jscomp.asyncExecutePromiseGeneratorProgram(function(W){switch(W.nextAddress){case 1:return e=
f.debug,m={status:"loading",source:n,name:k,address:k,linkSets:[],dependencies:[],metadata:{format:"esm"}},W.yield(zk.instrumentSourceOfEsmModuleLoad(f,m),2);case 2:a=W.yieldResult,g=function(X,ea){return zk.scheduleModuleExportsChange(f,m.name,X,ea,!0)},l=a.declare(g),e&&console.log("[lively.vm es6] sourceChange of %s with deps",m.name,a.localDeps),r=[],v=$jscomp.makeIterator(a.localDeps),y=v.next();case 3:if(y.done){W.jumpTo(5);break}A=y.value;return W.yield(f.normalize(A,m.name),6);case 6:return E=
W.yieldResult,F=zk.classHolder.module(f,E),W.yield(F.load(),7);case 7:H=W.yieldResult;r.push({name:A,fullname:E,module:F,exports:H});y=v.next();W.jumpTo(3);break;case 5:if(I=f.loads&&f.loads[m.name])I.deps=r.map(function(X){return X.name}),I.depMap=r.reduce(function(X,ea){X[ea.name]=ea.fullname;return X},{}),I.metadata&&I.metadata.entry&&(I.metadata.entry.deps=I.deps,I.metadata.entry.normalizedDeps=r.map(function(X){return X.fullname}),I.metadata.entry.declare=a.declare);M=zk.classHolder.module(f,
m.name);N=M.record();r.forEach(function(X,ea){return M.addDependencyToModuleRecord(X.module,l.setters[ea])});N&&(N.execute=l.execute);r.forEach(function(X,ea){return l.setters[ea](X.exports)});return W.return(l.execute())}})};zk.moduleSourceChangeGlobal=function(f,k,n,b){var e,m,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(g){if(1==g.nextAddress)return e={status:"loading",source:n,name:k,address:k,linkSets:[],dependencies:[],metadata:{format:"global"}},f.get(k)?g.jumpTo(2):g.yield(f["import"](k),
2);if(4!=g.nextAddress)return g.yield(zk.instrumentSourceOfGlobalModuleLoad(f,e),4);m=g.yieldResult;e.source=m.translated;a=zk.doInstantiateGlobalModule(f,e);f.delete(k);f.set(a.name,a.esModule);return g.return(a.module)})};zk.doInstantiateGlobalModule=function(f,k){var n=zk.__createEntry();n.name=k.name;n.esmExports=!0;k.metadata.entry=n;n.deps=[];for(var b in k.metadata.globals){var e=k.metadata.globals[b];e&&n.deps.push(e)}n.execute=function(m,a,g){(a=(a=zk.classHolder.module(f,g.id).metadata())&&
a.entry&&a.entry.module&&a.entry.module.exports)&&Object.keys(a).forEach(function(v){try{delete f.global[v]}catch(y){console.warn('[lively.modules] executeGlobalModule: Cannot delete global["'+v+'"]')}});if(k.metadata.globals){var l={};for(var r in k.metadata.globals)k.metadata.globals[r]&&(l[r]=m(k.metadata.globals[r]))}if(m=k.metadata.exports)k.source+='\nSystem.global["'+m+'"] = '+m+";";g=f.get("@@global-helpers").prepareGlobal(g.id,m,l);zk.__evaluateGlobalLoadSource(f,k);return g()};return zk.runExecuteOfGlobalModule(f,
n)};zk.__createEntry=function(){return{name:null,deps:null,originalIndices:null,declare:null,execute:null,executingRequire:!1,declarative:!1,normalizedDeps:null,groupIndex:null,evaluated:!1,module:null,esModule:null,esmExports:!1}};zk.__evaluateGlobalLoadSource=function(f,k){function n(){0==--e&&(m.System=m.SystemJS=b)}var b,e=0,m=f.global;return function(a){try{0==e++&&(b=m.System),m.System=m.SystemJS=this,(0,eval)(a.source),n()}catch(g){throw n(),Error("Error evaluating "+a.address+":\n"+g.stack);
}}.call(f,k)};zk.runExecuteOfGlobalModule=function(f,k){var n={},b=k.module={exports:n,id:k.name};k.evaluated=!0;if(n=k.execute.call(f.global,function(e){var m=k.deps.find(function(a){return a===e});if(m=m&&f.get(k.normalizedDeps[k.deps.indexOf(m)])||f.get(f.decanonicalize(e,k.name)))return m;throw Error("Module "+e+" not declared as a dependency of "+k.name);},n,b))b.exports=n;n=b.exports;b=f.get("@system-env").constructor;k.esModule=n&&(n.__esModule||n instanceof b)?n:k.esmExports&&n!==f.global?
f.newModule(n):{"default":n};return k};zk.arr=$f;zk.emit=ft;zk.instrumentSourceOfEsmModuleLoad=pt;zk.instrumentSourceOfGlobalModuleLoad=Zr;zk.scheduleModuleExportsChange=gd;zk.classHolder=Tw;zk.moduleSourceChange=je;zk.moduleSourceChange=je;var Vn=lively.FreezerRuntime.recorderFor("lively.modules/src/url-helpers.js");Vn.isJsFile=Bd;Vn.asDir=qe;Vn.isURL=cf;Vn.urlResolve=Ue;Vn.string=pi;Vn.isJsFile=Bd;Vn.isJsFile=Bd;Vn.asDir=qe;Vn.asDir=qe;var cH=Vn.string.joinPath;Vn.join=cH;Vn.join=cH;Vn.join=cH;
Vn.isURL=cf;Vn.isURL=cf;Vn.urlResolve=Ue;Vn.urlResolve=Ue;var Cs=lively.FreezerRuntime.recorderFor("lively.modules/src/packages/configuration.js");Cs.arr=$f;Cs.obj=Ag;Cs.isURL=cf;Cs.installHook=yb;Cs.isHookInstalled=Lc;var vv=function(f){this.pkg=f};vv.prototype.applyConfig=function(f){var k=this.System,n=this.packageURL,b=this.pkg;f=Cs.obj.deepMerge(b.config,f);var e=f.name||n.split("/").slice(-1)[0],m=f.version,a=f.systemjs||{},g=f.lively,l=f.main||"index.js",r={},v={};k.config({map:(r[e]=n,r),
packages:(v[n]=Object.assign({},a,{meta:Object.assign({"package.json":{format:"json"}},a.meta),configured:!0}),v)});k.packages[n].configured=!0;k=k.getConfig().packages[n]||{};k.map||(k.map={});a&&(g&&g.main?l=g.main:a.main&&(l=a.main),this.applySystemJSConfig(a));l.match(/\.[^\/\.]+/)||(l+=".js");k.main=l;b.version=m;b.config=f;b._name=e;b.mergeWithConfig(k);return g?this.applyLivelyConfig(g):{subPackages:[]}};vv.prototype.applySystemJSConfig=function(f){var k=this.System;f.packageConfigPaths&&k.config({packageConfigPaths:Cs.arr.uniq(k.packageConfigPaths.concat(f.packageConfigPaths))});
f.packages&&k.config({packages:f.packages});f.globalmap&&k.config({map:f.globalmap});f.babelOptions&&k.config({babelOptions:f.babelOptions});f.meta&&k.config({meta:f.meta})};vv.prototype.applyLivelyConfig=function(f){this.applyLivelyConfigMeta(f);this.applyLivelyConfigHooks(f);this.applyLivelyConfigBundles(f)};vv.prototype.applyLivelyConfigHooks=function(f){var k=this;(f.hooks||[]).forEach(function(n){try{var b=eval("("+n.source+")");b.name&&Cs.isHookInstalled(k.System,n.target,b.name)||Cs.installHook(k.System,
n.target,b)}catch(e){console.error("Error installing hook for %s: %s",k.packageURL,e,n)}})};vv.prototype.applyLivelyConfigBundles=function(f){var k=this;if(!f.bundles)return Promise.resolve();var n=Object.keys(f.bundles).reduce(function(b,e){var m=k.packageURL+"/"+e;e=f.bundles[e].map(function(a){return k.System.decanonicalize(a,k.packageURL+"/")});b[m]=e;return b},{});this.System.config({bundles:n});return Promise.resolve()};vv.prototype.applyLivelyConfigMeta=function(f){if(f.meta){var k={},n=this.System.getConfig().packages[this.packageURL]||
{},b={meta:{},packages:(k[this.packageURL]=n,k)};Object.keys(f.meta).forEach(function(e){var m=f.meta[e];Cs.isURL(e)?b.meta[e]=m:(n.meta||(n.meta={}),n.meta[e]=m)});this.System.config(b)}};$jscomp.global.Object.defineProperties(vv.prototype,{System:{configurable:!0,enumerable:!0,get:function(){return this.pkg.System}},packageURL:{configurable:!0,enumerable:!0,get:function(){return this.pkg.url}}});Cs.PackageConfiguration=vv;Cs.default=vv;var pf=lively.FreezerRuntime.recorderFor("lively.modules/src/packages/package.js");
pf.normalizePackageURL=function(f,k,n){n=void 0===n?[]:n;if(n.some(function(b){return b===k}))return k;f=f.decanonicalize(k.replace(/[\/]+$/,"")+"/");if(!pf.isURL(f))throw Error("Strange package URL: "+f+" is not a valid URL");f.match(/\.js/)&&(f=-1<f.indexOf(f+".js")?f.replace(/\.js$/,""):f.split("/").slice(0,-1).join("/"));f.match(/\.js$/)&&console.warn("packageURL is expected to point to a directory but seems to be a .js file: "+f);return String(f).replace(/\/$/,"")};pf.lookupPackage=oe;pf.ensurePackage=
tf;pf.getPackage=Le;pf.applyConfig=Ie;pf.importPackage=hf;pf.removePackage=Kf;pf.reloadPackage=Ff;pf.registerPackage=ag;pf.getPackageSpecs=xh;pf.arr=$f;pf.promise=zh;pf.obj=Ag;pf.emit=ft;pf.module=kh;pf.resource=la;pf.PackageConfiguration=vv;pf.isURL=cf;pf.join=cH;pf.classHolder=Tw;var Dj=function(f,k,n,b,e){e=void 0===e?{}:e;this.System=f;this.url=k;this.registerProcess=null;this.map={};this.setConfig(e)};Dj.allPackages=function(f){return pf.obj.values(pf.classHolder.PackageRegistry.ofSystem(f).byURL)};
Dj.allPackageURLs=function(f){return pf.classHolder.PackageRegistry.ofSystem(f).allPackageURLs()};Dj.forModule=function(f,k){return this.forModuleId(f,k.id)};Dj.forModuleId=function(f,k){return(k=pf.classHolder.ModulePackageMapping.forSystem(f).getPackageURLForModuleId(k))?pf.getPackage(f,k,!0):null};Dj.fromJSON=function(f,k){return(new pf.Package(f)).fromJSON(k)};Dj.prototype.setConfig=function(f){this._name=f.name;this.version=f.version;this.dependencies=f.dependencies||{};this.devDependencies=
f.devDependencies||{};this.main=f.main||"index.js";this.systemjs=f.systemjs;this.lively=f.lively};Dj.prototype.toJSON=function(){var f=this.System,k=pf.obj.select(this,"url _name version map dependencies devDependencies main systemjs lively".split(" "));k.url.startsWith(f.baseURL)&&(k.url=k.url.slice(f.baseURL.length).replace(/^\//,""));return k};Dj.prototype.fromJSON=function(f){var k=this.System;this.url=f.url;this._name=f._name;this.version=f.version;this.map=f.map||{};this.main=f.main;this.dependencies=
f.dependencies||{};this.devDependencies=f.devDependencies||{};this.systemjs=f.systemjs;this.lively=f.lively;pf.isURL(this.url)||(this.url=pf.join(k.baseURL,this.url));this.registerWithConfig();return this};Dj.prototype.asSpec=function(){return Object.assign({},pf.obj.select(this,"name main map meta url address version lively".split(" ")),{modules:this.modules().map(function(f){return{name:f.id,deps:f.directRequirements().map(function(k){return k.id})}})})};Dj.prototype.path=function(){var f=this.System.baseURL;
return 0===this.url.indexOf(f)?this.url.slice(f.length):this.url};Dj.prototype.modules=function(){var f=this.url,k=this.System;return pf.classHolder.ModulePackageMapping.forSystem(k).getModuleIdsForPackageURL(f).map(function(n){return pf.module(k,n)})};Dj.prototype.resources=function(f,k){k=void 0===k?[".git","node_modules",".module_cache","lively.next-node_modules"]:k;var n=this,b,e,m,a,g,l,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){if(1==y.nextAddress)return b=n,e=b.System,
m=b.url,a=pf.Package.allPackageURLs(e),g=a.filter(function(A){return A!==m&&!m.startsWith(A)}),y.yield(pf.resource(m).dirList("infinity",{exclude:k}),2);l=y.yieldResult;r=l.filter(function(A){return!A.isDirectory()&&!g.some(function(E){return A.url.startsWith(E)})}).map(function(A){return A.url});v=pf.arr.pluck(n.modules(),"id");f&&(r=r.filter(f));return y.return(r.map(function(A){var E=A.replace(m,"").replace(/^\//,"");return{isLoaded:v.includes(A),url:A,nameInPackage:E,package:n}}))})};Dj.prototype.hasResource=
function(f){var k=this.url;return(f.startsWith(k)?pf.resource(f):pf.resource(k).join(f)).exists()};Dj.prototype.toString=function(){return"Package("+this.name+" - "+this.path()+"/)"};Dj.prototype.mergeWithConfig=function(f){var k=f=Object.assign({},f),n=k.name;k=k.map;n&&(delete f.name,this._name=n);k&&(delete f.map,Object.assign(this.map,k));Object.assign(this,f);return this};Dj.prototype.addMapping=function(f,k){this.map[f]=k;var n={},b={};this.System.config({packages:(b[this.url]={map:(n[f]=k,
n)},b)})};Dj.prototype.tryToLoadPackageConfig=function(){var f=this,k,n,b,e,m,a,g,l,r,v,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(A){switch(A.nextAddress){case 1:k=f;n=k.System;b=k.url;e=b+"/package.json";m={};a={};n.config({meta:(m[e]={format:"json"},m),packages:(a[b]={meta:{"package.json":{format:"json"}}},a)});n.debug&&console.log("[lively.modules package reading config] %s",e);A.setCatchFinallyBlocks(2);if(g=n.get(e)){A.jumpTo(4);break}return A.yield(n.import(e),5);case 5:g=
A.yieldResult;case 4:return l=g,r=[].concat($jscomp.arrayFromIterable(n.packageConfigPaths)),pf.arr.pushIfNotIncluded(r,e),n.config({packageConfigPaths:r}),A.return(l);case 2:return v=A.enterCatchBlock(),console.log("[lively.modules package] Unable loading package config %s for package: ",e,v),delete n.meta[e],y=b.split("/").slice(-1)[0],A.return({name:y})}})};Dj.prototype.import=function(){var f=this,k,n,b,e,m,a,g,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){switch(r.nextAddress){case 1:return r.yield(f.register(),
2);case 2:return k=f,n=k.url,b=k.System,e=pf,m=e.module,a=b,r.yield(b.normalize(n),3);case 3:return g=m.call(e,a,r.yieldResult),r.yield(b.import(g.id),4);case 4:return l=r.yieldResult,r.yield(pf.promise.waitFor(1E3,function(){return g.isLoaded()}),5);case 5:return r.return(l)}})};Dj.prototype.isRegistering=function(){return!!this.registerProcess};Dj.prototype.register=function(f){var k=this,n,b,e,m,a,g,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){switch(r.nextAddress){case 1:if(k.isRegistering())return r.return(k.registerProcess.promise);
n=k;b=n.System;e=n.url;k.registerProcess=pf.promise.deferred();m=k.registerProcess.promise;b.debug&&console.log("[lively.modules package register] %s",e);r.setCatchFinallyBlocks(2,3);if(a=f){r.jumpTo(5);break}return r.yield(k.tryToLoadPackageConfig(),6);case 6:a=r.yieldResult;case 5:g=a,k.registerWithConfig(g),k.registerProcess.resolve(g);case 3:r.enterFinallyBlock();delete k.registerProcess;r.leaveFinallyBlock(4);break;case 2:throw l=r.enterCatchBlock(),k.registerProcess.reject(l),l;case 4:return r.return(m)}})};
Dj.prototype.updateConfig=function(f){f=Object.assign({},this.runtimeConfig,{},f);var k=this.name,n=this.version,b=f,e=b.name;b=b.version;(new pf.PackageConfiguration(this)).applyConfig(f);if(k!==f.name||n!==f.version)console.log("[lively.modules] Updating registry "+k+"@"+n+" => "+e+"@"+b),pf.classHolder.PackageRegistry.ofSystem(this.System).updateNameAndVersionOf(this,k,n,e,b)};Dj.prototype.registerWithConfig=function(f){f=void 0===f?this.runtimeConfig:f;var k=this.System,n=this.url,b=(new pf.PackageConfiguration(this)).applyConfig(f),
e=pf.join(n,"package.json");k.get(e)||k.set(e,k.newModule(Object.assign({},f,{default:f})));pf.emit("lively.modules/packageregistered",{"package":n},Date.now(),k);return b};Dj.prototype.remove=function(f){f=Object.assign({forgetEnv:!0,forgetDeps:!1,unloadModules:!0},f);var k=this.System,n=this.url;n=n.replace(/\/$/,"");f.unloadModules&&this.modules().forEach(function(g){return g.unload(f)});pf.classHolder.PackageRegistry.ofSystem(k).removePackage(this);var b=k.getConfig(),e=n+"/package.json";k.delete(String(e));
pf.arr.remove(b.packageConfigPaths||[],e);var m={},a={};k.config({meta:(m[e]={},m),packages:(a[n]={},a),packageConfigPaths:b.packageConfigPaths});delete k.packages[n];pf.emit("lively.modules/packageremoved",{"package":this.url},Date.now(),k)};Dj.prototype.reload=function(f){var k=this.url,n=pf.classHolder.PackageRegistry.ofSystem(this.System),b=n.coversDirectory(k);this.remove(f);f={};n.addPackageAt(k,b||"devPackageDirs",(f[k]=this,f));return this.import()};Dj.prototype.fork=function(f,k){var n=this;
return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){return 1==b.nextAddress?(k||(k=pf.resource(n.url).join("../"+f).withRelativePartsResolved().url),b.yield(n.changeAddress(k,f,!1),2)):b.return(b.yieldResult)})};Dj.prototype.rename=function(f){var k=this,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){return 1==b.nextAddress?(n=pf.resource(k.url).join("../"+f).withRelativePartsResolved().url,b.yield(k.changeAddress(n,f,!0),2)):b.return(b.yieldResult)})};Dj.prototype.changeAddress=
function(f,k,n){k=void 0===k?null:k;n=void 0===n?!0:n;var b=this,e,m,a,g,l,r,v,y,A,E,F,H,I,M,N,W,X,ea,Aa,Ma,K,aa,T,U;return $jscomp.asyncExecutePromiseGeneratorProgram(function(pa){switch(pa.nextAddress){case 1:return f=f.replace(/\/?/,""),e=b,m=e.System,a=e.url,pa.yield(b.runtimeConfig,2);case 2:return g=pa.yieldResult,l=pf.resource(a).asDirectory(),r=new pf.Package(m,f),pa.yield(pf.resource(f).asDirectory(),3);case 3:return v=pa.yieldResult,g.name=k||b.name,y=pf.classHolder.PackageRegistry.ofSystem(m),
A=y.coversDirectory(a),pf.classHolder.ModulePackageMapping.forSystem(m).clearCache(),m.packages[a]&&(m.packages[f]=m.packages[a],n&&delete m.packages[a]),Object.assign(r,pf.obj.select(b,["_name","map","config"])),pa.yield(v.ensureExistance(),4);case 4:return pa.yield(b.resources(void 0,[]),5);case 5:E=pa.yieldResult.map(function(fa){return fa.url}),F=b.modules(),H=$jscomp.makeIterator(F),I=H.next();case 6:if(I.done){pa.jumpTo(8);break}M=I.value;N=v.join(M.pathInPackage()).url;return n?pa.yield(M.renameTo(N),
10):pa.yield(M.copyTo(N),10);case 10:W=E.indexOf(M.id);-1<W&&E.splice(W,1);I=H.next();pa.jumpTo(6);break;case 8:X=$jscomp.makeIterator(E),ea=X.next();case 13:if(ea.done){if(!n){pa.jumpTo(17);break}return pa.yield(b.remove({forgetEnv:!0,forgetDeps:!1}),18)}Aa=ea.value;Ma=pf.resource(Aa);K=Ma.relativePathFrom(l);return pa.yield(Ma.copyTo(v.join(K)),14);case 14:ea=X.next();pa.jumpTo(13);break;case 18:return pa.yield(l.remove(),17);case 17:if(!k){pa.jumpTo(20);break}r.name=k;r.config.name=k;aa=pf.resource(f).join("package.json");
pa.setCatchFinallyBlocks(21);return pa.yield(aa.exists(),23);case 23:if(!pa.yieldResult){pa.jumpTo(24);break}return pa.yield(aa.readJson(),25);case 25:T=pa.yieldResult;if(T.name!==b.name){pa.jumpTo(26);break}T.name=k;return pa.yield(aa.writeJson(T,!0),26);case 26:(U=m.get(aa.url))&&m.set(aa.url,m.newModule(Object.assign({},U,{name:k})));case 24:pa.leaveTryBlock(20);break;case 21:pa.enterCatchBlock();case 20:return A=A||"individualPackageDirs","individualPackageDirs"!==A&&"devPackageDirs"!==A||y._addPackageDir(f,
A,!0),y._addPackageWithConfig(r,g,f,A),y.resetByURL(),y._updateLatestPackages(),pa.return(r)}})};Dj.prototype.search=function(f,k){k=void 0===k?{}:k;var n=this,b,e;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){if(1==m.nextAddress)return k.includeUnloaded?m.yield(n.resources(function(a){return a.endsWith(".js")},[".git","node_modules","dist",".module_cache","lively.next-node_modules"]),3):(b=n.modules().filter(function(a){return a.isLoaded()}),m.jumpTo(2));2!=m.nextAddress&&(b=m.yieldResult.map(function(a){return pf.module(n.System,
a.url)}));e=b;return m.return(Promise.all(e.map(function(a){return a.search(f,k).catch(function(g){console.error("Error searching module "+a.name+":\n"+g.stack);return[]})})).then(function(a){return pf.arr.flatten(a,1)}))})};$jscomp.global.Object.defineProperties(Dj.prototype,{isPackage:{configurable:!0,enumerable:!0,get:function(){return!0}},name:{configurable:!0,enumerable:!0,get:function(){if(this._name)return this._name;var f=this.System.get(this.url+"/package.json");return f&&f.name?f.name:pf.arr.last(this.url.replace(/[\/]+$/,
"").split("/"))},set:function(f){return this._name=f}},nameAndVersion:{configurable:!0,enumerable:!0,get:function(){return this.name+"@"+this.version}},address:{configurable:!0,enumerable:!0,get:function(){return this.url},set:function(f){return this.url=f}},runtimeConfig:{configurable:!0,enumerable:!0,get:function(){var f=this.main,k=this.systemjs,n=this.lively,b={name:this.name,version:this.version,dependencies:this.dependencies||{},devDependencies:this.devDependencies||{}};f&&(b.main=f);k&&(b.systemjs=
k);n&&(b.lively=n);return b}}});pf.Package=Dj;pf.ensurePackage=tf;pf.ensurePackage=tf;pf.importPackage=hf;pf.importPackage=hf;pf.removePackage=Kf;pf.removePackage=Kf;pf.reloadPackage=Ff;pf.reloadPackage=Ff;pf.registerPackage=ag;pf.registerPackage=ag;pf.getPackage=Le;pf.getPackage=Le;pf.lookupPackage=oe;pf.lookupPackage=oe;pf.applyConfig=Ie;pf.applyConfig=Ie;pf.getPackageSpecs=xh;pf.getPackageSpecs=xh;pf.Package=Dj;pf.Package=Dj;var Fd=lively.FreezerRuntime.recorderFor("lively.classes/class-to-function-transform.js");
Fd.isFunctionNode=function(f){return"ArrowFunctionExpression"===f.type||"FunctionExpression"===f.type||"FunctionDeclaration"===f.type};Fd.ensureIdentifier=function(f){return f.replace(Fd.firstIdRe,"_").replace(Fd.trailingIdRe,"_")};Fd.constructorTemplate=function(f){return Fd.funcExpr({id:f?Fd.id(f):null},["__first_arg__"],Fd.ifStmt(Fd.binaryExpr(Fd.id("__first_arg__"),"&&",Fd.member("__first_arg__",Fd.funcCall(Fd.member("Symbol","for"),Fd.literal("lively-instance-restorer")),!0)),Fd.block(),Fd.block(Fd.exprStmt(Fd.funcCall(Fd.member(Fd.member("this",
Fd.funcCall(Fd.member("Symbol","for"),Fd.literal("lively-instance-initialize")),!0),"apply"),Fd.id("this"),Fd.id("arguments"))))))};Fd.replaceSuper=function(f,k,n,b){console.assert("Super"===f.type);(k=k.currentMethod)||console.warn("[lively.classes] Trying to transform es6 class but got super call outside a method! "+Fd.stringify(f)+" in "+n.join("."));b=$jscomp.makeIterator(n.slice(-2));n=b.next().value;b=b.next().value;return"callee"===n&&"object"===b||"callee"===b?f:k&&"static"===k[Fd.methodKindSymbol]?
Fd.funcCall(Fd.member("Object","getPrototypeOf"),Fd.id(Fd.tempLivelyClassVar)):Fd.funcCall(Fd.member("Object","getPrototypeOf"),Fd.member(Fd.id(Fd.tempLivelyClassVar),"prototype"))};Fd.replaceSuperMethodCall=function(f,k,n,b){console.assert("CallExpression"===f.type);console.assert("Super"===f.callee.object.type);return Fd.funcCall.apply(Fd,[Fd.member(Fd.funcCall(Fd.member(b.functionNode,"_get"),Fd.replaceSuper(f.callee.object,k,n.concat(["callee","object"]),b),Fd.literal(f.callee.property.value||
f.callee.property.name),Fd.id("this")),"call"),Fd.id("this")].concat($jscomp.arrayFromIterable(f.arguments)))};Fd.replaceDirectSuperCall=function(f,k,n,b){console.assert("CallExpression"===f.type);console.assert("Super"===f.callee.type);return Fd.funcCall.apply(Fd,[Fd.member(Fd.funcCall(Fd.member(b.functionNode,"_get"),Fd.replaceSuper(f.callee,k,n.concat(["callee"]),b),Fd.funcCall(Fd.member("Symbol","for"),Fd.literal("lively-instance-initialize")),Fd.id("this")),"call"),Fd.id("this")].concat($jscomp.arrayFromIterable(f.arguments)))};
Fd.replaceSuperGetter=function(f,k,n,b){console.assert("MemberExpression"===f.type);console.assert("Super"===f.object.type);return Fd.funcCall(Fd.member(b.functionNode,"_get"),Fd.replaceSuper(f.object,k,n.concat(["object"]),b),Fd.literal(f.property.value||f.property.name),Fd.id("this"))};Fd.replaceSuperSetter=function(f,k,n,b){console.assert("AssignmentExpression"===f.type);console.assert("Super"===f.left.object.type);return Fd.funcCall(Fd.member(b.functionNode,"_set"),Fd.replaceSuper(f.left.object,
k,n.concat(["left","object"]),b),Fd.literal(f.left.property.value||f.left.property.name),f.right,Fd.id("this"))};Fd.replaceClass=function(f,k,n,b){console.assert("ClassDeclaration"===f.type||"ClassExpression"===f.type);var e=f.body.body,m=f.superClass;n=f.id;var a=f.type,g=f.start,l=f.end,r=void 0===b.addClassNameGetter?!0:b.addClassNameGetter,v=Fd.id("undefined"),y=Fd.id("undefined"),A=n?n.name:"anonymous_class",E=b.evalId,F=b.sourceAccessorName;f=f["x-lively-object-meta"]||{start:g,end:l};e.length&&
(r=e.reduce(function(N,W){var X=W.key,ea=W.kind,Aa=W.value,Ma=W.static;"Literal"!==X.type&&"Identifier"!==X.type&&console.warn("Unexpected key in classToFunctionTransform! "+JSON.stringify(X));if("method"===ea){ea={};W=Fd.id(A+"_"+Fd.ensureIdentifier(X.name||X.value)+"_");Aa=["key",Fd.literal(X.name||X.value),"value",Object.assign({},Aa,(ea.id=W,ea[Fd.methodKindSymbol]=Ma?"static":"proto",ea))];var K=Fd.objectLiteral(Aa)}else"get"===ea||"set"===ea?(W={},K=Fd.objectLiteral(["key",Fd.literal(X.name||
X.value),ea,Object.assign({},Aa,(W.id=Fd.id(ea),W[Fd.methodKindSymbol]=Ma?"static":"proto",W))])):"constructor"===ea?(X={},Aa=["key",Fd.funcCall(Fd.member("Symbol","for"),Fd.literal("lively-instance-initialize")),"value",Object.assign({},Aa,(X.id=Fd.id(A+"_initialize_"),X[Fd.methodKindSymbol]="proto",X))],K=Fd.objectLiteral(Aa)):console.warn("[lively.classes] classToFunctionTransform encountered unknown class property with kind "+ea+", ignoring it, "+JSON.stringify(W));(Ma?N.clazz:N.inst).push(K);
return N},{inst:[],clazz:r?[Fd.parse('({ key: Symbol.for("__LivelyClassName__"), get: function get() { return "'+A+'"; } })').body[0].expression]:[]}),e=r.inst,r=r.clazz,e.length&&(v={type:"ArrayExpression",elements:e}),r.length&&(y={type:"ArrayExpression",elements:r}));e=b.scope;if(m&&b.currentModuleAccessor)if(b.classHolder===m.object){var H=m;var I=m.property.name}else{var M=e&&e.resolvedRefMap&&e.resolvedRefMap.get(m);M&&M.decl&&e.decls&&e.decls.find(function(N){return $jscomp.makeIterator(N).next().value===
M.decl})&&(H=m,I=m.name)}I=H?Fd.objectLiteral(["referencedAs",Fd.literal(I),"value",H]):m||Fd.id("undefined");H=n&&"ClassDeclaration"===a;m=["start",Fd.literal(f.start),"end",Fd.literal(f.end)];"undefined"!==typeof E&&m.push("evalId",Fd.literal(E));F&&m.push("moduleSource",Fd.nodes.id(F));E=Fd.objectLiteral(m);v=Fd.funcCall(Fd.funcExpr({},["superclass"],Fd.varDecl(Fd.tempLivelyClassHolderVar,k.classHolder),Fd.varDecl(Fd.tempLivelyClassVar,H?{type:"ConditionalExpression",test:Fd.binaryExpr(Fd.funcCall(Fd.member(Fd.tempLivelyClassHolderVar,
"hasOwnProperty"),Fd.literal(n.name)),"&&",Fd.binaryExpr({argument:Fd.member(Fd.tempLivelyClassHolderVar,n),operator:"typeof",prefix:!0,type:"UnaryExpression"},"===",Fd.literal("function"))),consequent:Fd.member(Fd.tempLivelyClassHolderVar,n),alternate:Fd.assign(Fd.member(Fd.tempLivelyClassHolderVar,n),Fd.constructorTemplate(n.name))}:n?Fd.constructorTemplate(n.name):Fd.constructorTemplate(null)),Fd.returnStmt(Fd.funcCall(b.functionNode,Fd.id(Fd.tempLivelyClassVar),Fd.id("superclass"),v,y,Fd.id(Fd.tempLivelyClassHolderVar),
b.currentModuleAccessor||Fd.id("undefined"),E))),I);if("ClassExpression"===a)return v;a=v;b.declarationWrapper&&k.classHolder===b.classHolder&&(a=Fd.funcCall(b.declarationWrapper,Fd.literal(n.name),Fd.literal("class"),a,b.classHolder,E));a=Fd.varDecl(n,a,"var");a[Fd.isTransformedClassVarDeclSymbol]=!0;return a};Fd.splitExportDefaultWithClass=function(f,k,n,b){return f.declaration&&f.declaration[Fd.isTransformedClassVarDeclSymbol]?[f.declaration,{declaration:f.declaration.declarations[0].id,type:"ExportDefaultDeclaration"}]:
f};Fd.classToFunctionTransform=uj;Fd.arr=$f;Fd.parse=ak;Fd.stringify=Uh;Fd.query=Kt;Fd.nodes=Pw;Fd.Visitor=Fe;var tr=Fd.nodes;Fd.assign=tr.assign;Fd.member=tr.member;Fd.id=tr.id;Fd.exprStmt=tr.exprStmt;Fd.funcCall=tr.funcCall;Fd.literal=tr.literal;Fd.objectLiteral=tr.objectLiteral;Fd.varDecl=tr.varDecl;Fd.funcExpr=tr.funcExpr;Fd.returnStmt=tr.returnStmt;Fd.binaryExpr=tr.binaryExpr;Fd.ifStmt=tr.ifStmt;Fd.block=tr.block;Fd.firstIdRe=/^[^_a-z]/i;Fd.trailingIdRe=/[^_a-z0-9]/ig;Fd.isTransformedClassVarDeclSymbol=
Symbol();Fd.methodKindSymbol=Symbol();Fd.tempLivelyClassVar="__lively_class__";Fd.tempLivelyClassHolderVar="__lively_classholder__";var CM=function(){return Fd.Visitor.apply(this,arguments)||this};$jscomp.inherits(CM,Fd.Visitor);CM.prototype.accept=function(f,k,n){Fd.isFunctionNode(f)&&(k=Object.assign({},k,{classHolder:Fd.objectLiteral([]),currentMethod:f[Fd.methodKindSymbol]?f:k.currentMethod}));if("ClassExpression"===f.type||"ClassDeclaration"===f.type)f=Fd.replaceClass(f,k,n,k.options);"Super"===
f.type&&(f=Fd.replaceSuper(f,k,n,k.options));"MemberExpression"===f.type&&f.object&&"Super"===f.object.type&&(f=Fd.replaceSuperGetter(f,k,n,k.options));"AssignmentExpression"===f.type&&"MemberExpression"===f.left.type&&"Super"===f.left.object.type&&(f=Fd.replaceSuperSetter(f,k,n,k.options));"CallExpression"===f.type&&"Super"===f.callee.type&&(f=Fd.replaceDirectSuperCall(f,k,n,k.options));"CallExpression"===f.type&&f.callee.object&&"Super"===f.callee.object.type&&(f=Fd.replaceSuperMethodCall(f,k,n,
k.options));f=Fd.Visitor.prototype.accept.call(this,f,k,n);return"ExportDefaultDeclaration"===f.type?Fd.splitExportDefaultWithClass(f,k,n,k.options):f};CM.run=function(f,k){var n=new this,b=k.classHolder||Fd.objectLiteral([]);return n.accept(f,{options:k,classHolder:b},[])};Fd.ClassReplaceVisitor=CM;Fd.classToFunctionTransform=uj;Fd.classToFunctionTransform=uj;var SD=lively.FreezerRuntime.recorderFor("lively.classes/index.js");SD.runtime=QD;SD.classToFunctionTransform=uj;SD.runtime=QD;SD.runtime=
QD;SD.classToFunctionTransform=uj;SD.classToFunctionTransform=uj;var ala=Object.freeze({__proto__:null,runtime:QD,classToFunctionTransform:uj}),nk=lively.FreezerRuntime.recorderFor("lively.modules/src/import-modification.js");nk.arr=$f;nk.Path=Ah;nk.fuzzyParse=Pk;nk.query=Kt;nk.stringify=Uh;nk.resource=la;var Ot=function(f,k,n,b,e,m,a){this.System=f;this.intoModuleId=k;this.intoPackage=n;this.intoModuleSource=b;this.fromModuleId=e.moduleId;this.importData=e;this.alias=m;this.parsed=a||nk.fuzzyParse(b)};
Ot.run=function(f,k,n,b,e,m,a){return(new this(f,k,n,b,e,m,a)).run()};Ot.prototype.run=function(){var f=this.generateImportStatement(),k=f.standaloneImport,n=f.importedVarName,b=this.existingImportsOfFromModule(),e=b.imports,m=b.importsOfFromModule;b=b.importsOfVar;m=this.importsToBeReused(m,b,f);if(b.length)return{status:"not modified",newSource:this.intoModuleSource,generated:"",importedVarName:"",standaloneImport:k,from:b[0].start,to:b[0].end};if(m.length&&(f=this.modifyExistingImport(m,k)))return f;
e=nk.arr.last(e);return this.insertNewImport(m,k,n,e?e.end:0)};Ot.prototype.importsToBeReused=function(f,k,n){n.isDefault&&(f=f.filter(function(b){return!b.specifiers.some(function(e){return"ImportDefaultSpecifier"==e.type})}));return f};Ot.prototype.generateImportStatement=function(){var f=this.intoModuleId,k=this.fromModuleId,n=this.importData,b=this.intoPackage,e=this.alias,m="default"===n.exported;e=e?e:m?n.local:n.exported;var a=!m&&n.exported!==e;b=b&&b.name;var g=k,l=n.packageName,r=n.pathInPackage;
if(n.isMain)g=l;else if(b===l)try{g=nk.resource(k).relativePathFrom(nk.resource(f)),g.startsWith(".")||(g="./"+g)}catch(v){l&&"no group"!==l&&r&&(g=l+"/"+r)}else l&&"no group"!==l&&r&&(g=l+"/"+r);return{isDefault:m,standaloneImport:m?"import "+e+' from "'+g+'";':"import { "+n.exported+(a?" as "+e:"")+' } from "'+g+'";',importedVarName:e}};Ot.prototype.existingImportsOfFromModule=function(){var f=this.System,k=this.fromModuleId,n=this.intoModuleId,b=this.importData,e=b.exported,m=b.local,a=this.alias,
g="default"===e;b=this.parsed.body.filter(function(r){return"ImportDeclaration"===r.type});var l=g?a||m:a||e;m=b.filter(function(r){if(!r.source||"string"!==typeof r.source.value)return null;r=f.decanonicalize(r.source.value,n);return k===r});a=m.filter(function(r){return(r.specifiers||[]).some(function(v){return g?"ImportDefaultSpecifier"===v.type&&v.local.name===l:nk.Path("imported.name").get(v)===e&&nk.Path("local.name").get(v)===l})});return{imports:b,importsOfFromModule:m,importsOfVar:a}};Ot.prototype.modifyExistingImport=
function(f,k){f=nk.arr.flatmap(f,function(l){return l.specifiers||[]});if(!f.length)return null;f=$jscomp.makeIterator(nk.arr.partition(f,function(l){return"ImportDefaultSpecifier"===l.type}));var n=$jscomp.makeIterator(f.next().value).next().value,b=$jscomp.makeIterator(f.next().value).next().value;f=this.alias;var e=this.intoModuleSource,m=this.importData,a=m.exported;m=m.local;var g="default"===a;g?console.assert(!!b,"no ImportSpecifier found"):console.assert(b||n,"at least one kine of specifier is expected");
if(g){n=e.slice(0,b.start).lastIndexOf("{")-1;if(0>n)return null;b=(f||m)+",";a=e.slice(0,n);e=e.slice(n);a.endsWith(" ")&&a.endsWith("\n")||(b=" "+b);e.startsWith(" ")||(b+=" ");return{status:"modified",newSource:""+a+b+e,generated:b,standaloneImport:k,importedVarName:f||m,from:n,to:n+b.length}}n=b?b.end:n.end;g=(m=f&&f!==a)?a+" as "+f:a;b=b?", "+g:", { "+g+" }";return{status:"modified",newSource:""+e.slice(0,n)+b+e.slice(n),generated:b,standaloneImport:k,importedVarName:m?f:a,from:n,to:n+b.length}};
Ot.prototype.insertNewImport=function(f,k,n,b){b=void 0===b?0:b;f&&f.length&&(b=nk.arr.last(f).end);var e=this.intoModuleSource;f=e.slice(0,b);e=e.slice(b);var m=k;f.length&&!f.endsWith("\n")&&(m="\n"+m);e.length&&!e.startsWith("\n")&&(m+="\n");return{status:"modified",newSource:f+m+e,generated:m,standaloneImport:k,importedVarName:n,from:b,to:b+m.length}};nk.ImportInjector=Ot;var DM=function(){};DM.getGlobals=function(f,k){f=k||nk.fuzzyParse(f,{withComments:!0});return(f=f.comments?f.comments.find(function(n){return n.isBlock&&
n.text.startsWith("global")}):null)?f.text.replace(/^global\s*/,"").split(",").map(function(n){return n.trim()}).filter(Boolean):[]};DM.run=function(f,k,n){n=n||nk.fuzzyParse(f,{withComments:!0});var b=(n=n.comments?n.comments.find(function(m){return m.isBlock&&m.text.startsWith("global")}):null)?n.text.replace(/^global\s*/,"").split(",").map(function(m){return m.trim()}).filter(Boolean):[],e=k.filter(function(m){return!b.includes(m)});if(!e.length)return{status:"not modified",newSource:f,generated:"",
from:0,to:0};if(!n)return n="/*global "+e.join(",")+"*/\n",{status:"modified",newSource:n+f,generated:n,from:0,to:n.length};k=n.start+2+n.text.length;e=e.join(",");b.length?e=","+e:n.text.startsWith("global ")||(e=" "+e);n=k+e.length;return{status:"modified",newSource:f.slice(0,k)+e+f.slice(k),generated:e,from:k,to:n}};nk.GlobalInjector=DM;var dH=function(){};dH.removeImports=function(f,k,n){n=n||nk.fuzzyParse(f);var b=nk.arr.flatmap(n.body,function(e){return"ImportDeclaration"===e.type&&e.specifiers.length?
e.specifiers.map(function(m){return{local:m.local,importStmt:e}}):[]}).filter(function(e){return k.some(function(m){return m.local===e.local.name})});n=b.map(function(e){return{local:e.local.name,from:e.importStmt.source.value}});f=nk.arr.uniq(b.map(function(e){var m=e.importStmt.specifiers.find(function(a){return e.local===a.local});nk.arr.remove(e.importStmt.specifiers,m);return e.importStmt})).slice().reverse().reduce(function(e,m){var a=e.source;e=e.changes;var g=m.start,l=m.end,r=m.specifiers,
v=a.slice(0,g),y=a.slice(l);a=a.slice(g,l);(m=r.length?nk.stringify(m):"")&&m.includes("\n")&&!a.includes("\n")&&(m=m.replace(/\s+/g," "));a=v+m+y;e=e.concat({replacement:m,start:g,end:l});return{source:a,changes:e}},{source:f,changes:[]});return Object.assign({},f,{removedImports:n})};dH.findUnusedImports=function(f){var k="string"===typeof f?nk.fuzzyParse(f):f;f=nk.arr.flatmap(k.body,function(e){return"ImportDeclaration"===e.type&&e.specifiers.length?e.specifiers.map(function(m){return{local:m.local,
from:e.source?e.source.value:"",importStmt:e}}):[]});var n=f.map(function(e){return e.local});k=nk.query.resolveReferences(nk.query.scopes(k));k=Array.from(k.resolvedRefMap.keys()).filter(function(e){return!n.includes(e)});var b=nk.arr.uniq(k.map(function(e){return e.name}));return f.filter(function(e){return!b.includes(e.local.name)}).map(function(e){return Object.assign({},e,{local:e.local.name})})};dH.removeUnusedImports=function(f){var k=nk.fuzzyParse(f);return this.removeImports(f,this.findUnusedImports(k),
k)};nk.ImportRemover=dH;var Hp=lively.FreezerRuntime.recorderFor("lively.modules/src/nodejs.js");Hp.ensureParent=function(f,k,n){if(n)return n;n=f.id;var b=f.System;k=n.startsWith("file://")?n.replace("file://",""):n;if(n=b._nodeRequire("module").Module._cache[n])return n;n={id:k,filename:k,paths:[]};(f=f.package())&&n.paths.push(Hp.resource(f.url).join("node_modules/").path());return n};Hp.relative=function(f,k){return Hp.resource(f.id).parent().join(k).url.replace("file://","")};Hp._require=bk;
Hp._resolve=Xi;Hp.resource=la;Hp._require=bk;Hp._require=bk;Hp._resolve=Xi;Hp._resolve=Xi;var mf=lively.FreezerRuntime.recorderFor("lively.modules/src/module.js");mf.module=kh;mf.isModuleLoaded=zi;mf.doesModuleExist=dr;mf.arr=$f;mf.obj=Ag;mf.graph=xu;mf.parse=ak;mf.query=Kt;mf.computeRequireMap=nc;mf.moduleSourceChange=je;mf.scheduleModuleExportsChange=gd;mf.runScheduledExportChanges=wd;mf.livelySystemEnv=Ph;mf.Package=Dj;mf.isURL=cf;mf.emit=ft;mf.subscribe=Fx;mf.defaultClassToFunctionConverterName=
"initializeES6ClassForLively";mf.classRuntime=QD;mf.ImportInjector=Ot;mf.GlobalInjector=DM;mf.ImportRemover=dH;mf._require=bk;mf._resolve=Xi;mf.classHolder=Tw;var EM=function(){var f=/['"]format (esm|es6)['"];/,k=/['"]format cjs['"];/,n=/(^\s*|[}\);\n]\s*)(import\s+(['"]|(\*\s+as\s+)?[^"'\(\)\n;]+\s+from\s+['"]|\{)|export\s+\*\s+from\s+["']|export\s+(\{|default|function|class|var|const|let|async\s+function))/;return function(b,e){return e&&e.format?("es6"==e.format&&"esm"==e.format,e.format):f.test(b.slice(0,
5E3))||!k.test(b.slice(0,5E3))&&n.test(b)?"esm":k.test(b.slice(0,5E3))?"cjs":"global"}}();mf.detectModuleFormat=EM;mf.detectModuleFormat=EM;mf.detectModuleFormat=EM;mf.classHolder.module=mf.module;mf.isModuleLoaded=zi;mf.isModuleLoaded=zi;mf.doesModuleExist=dr;mf.doesModuleExist=dr;mf.globalProps={initialized:!1,descriptors:{}};var Hg=function(f,k){var n=this;if(!mf.isURL(k)&&!/^@/.test(k))throw Error("ModuleInterface constructor called with "+k+" that does not seem to be a fully normalized module id.");
this.System=f;this.id=k;this.recorderName="__lvVarRecorder";this.sourceAccessorName="__lvOriginalCode";this._scope=this._ast=this._source=this._recorder=null;this._observersOfTopLevelState=[];this._evaluationsInProgress=0;this._evalId=1;this.createdAt=this.lastModifiedAt=new Date;mf.subscribe("lively.modules/modulechanged",function(b){b.module===n.id&&n.reset()})};Hg.prototype.fullName=function(){return this.id};Hg.prototype.shortName=function(){return this.package().name+"/"+this.pathInPackage()};
Hg.prototype.source=function(){var f=this;return"@empty"===this.id?Promise.resolve(""):this._source?Promise.resolve(this._source):this.System.resource(this.id).read().then(function(k){return f._source=k})};Hg.prototype.setSource=function(f){this.sourceAccessorName&&this.recorderName&&f.includes("var "+this.recorderName)&&f.includes("var "+this.sourceAccessorName)||this._source===f||(this.reset(),this._source=f)};Hg.prototype.ast=function(){var f=this,k,n,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(1==
e.nextAddress){if(f._ast)return e.return(f._ast);k=f;n=mf;b=n.parse;return e.yield(f.source(),2)}return e.return(k._ast=b.call(n,e.yieldResult))})};Hg.prototype.scope=function(){var f=this,k;return $jscomp.asyncExecutePromiseGeneratorProgram(function(n){if(1==n.nextAddress)return f._scope?n.return(f._scope):n.yield(f.ast(),2);k=n.yieldResult;return n.return(f._scope=mf.query.topLevelDeclsAndRefs(k).scope)})};Hg.prototype.resolvedScope=function(){var f=this,k,n,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){return 1==
e.nextAddress?(k=f,n=mf.query,b=n.resolveReferences,e.yield(f.scope(),2)):e.return(k._scope=b.call(n,e.yieldResult))})};Hg.prototype.metadata=function(){var f=this.System.loads?this.System.loads[this.id]:null;return f?f.metadata:null};Hg.prototype.addMetadata=function(f){var k=this.System,n=this.id,b=this.metadata();f=b?Object.assign(b,f):f;b={};k.config({meta:(b[n]=f,b)});return k.meta[n]};Hg.prototype.format=function(){var f=this.metadata();return f&&f.format?f.format:this._source?mf.detectModuleFormat(this._source):
"global"};Hg.prototype.setFormat=function(f){return this.addMetadata({format:f})};Hg.prototype.reset=function(){this._scope=this._ast=this._source=null};Hg.prototype.get=function(){return this.System.get(this.id)};Hg.prototype.load=function(f){var k=this,n,b,e,m;return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){if(1==a.nextAddress)return n=k,b=n.id,e=n.System,f&&k.addMetadata(f),(m=e.get(b))?a.jumpTo(2):a.yield(e.import(b),3);2!=a.nextAddress&&(m=a.yieldResult);return a.return(m)})};
Hg.prototype.isLoaded=function(){return!!this.System.get(this.id)};Hg.prototype.unloadEnv=function(){this._recorder=null;this._observersOfTopLevelState=[];delete mf.livelySystemEnv(this.System).loadedModules[this.id]};Hg.prototype.unloadDeps=function(f){var k=this;f=mf.obj.merge({forgetDeps:!0,forgetEnv:!0},f);this.dependents().forEach(function(n){k.System.delete(n.id);k.System.loads&&delete k.System.loads[n.id];f.forgetEnv&&n.unloadEnv()})};Hg.prototype.unload=function(f){var k=this,n,b,e,m;return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){if(1==
a.nextAddress)return f=Object.assign({reset:!0,forgetDeps:!0,forgetEnv:!0},f),n=k,b=n.System,e=n.id,f.reset&&k.reset(),f.forgetDeps&&k.unloadDeps(f),k.System.delete(e),b.loads&&delete b.loads[e],b.meta&&delete b.meta[e],f.forgetEnv&&k.unloadEnv(),(m=b._livelyModulesTranslationCache)?a.yield(m.deleteCachedData(e),2):a.jumpTo(2);mf.emit("lively.modules/moduleunloaded",{module:k.id},Date.now(),k.System);a.jumpToEnd()})};Hg.prototype.reload=function(f){var k=this,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){return 1==
b.nextAddress?(f=mf.obj.merge({reloadDeps:!0,resetEnv:!0},f),n=[k],f.reloadDeps&&(n=k.dependents().concat(n)),b.yield(k.unload({forgetDeps:f.reloadDeps,forgetEnv:f.resetEnv}),2)):3!=b.nextAddress?b.yield(Promise.all(n.map(function(e){return e.id!==k.id&&e.load()})),3):b.yield(k.load(),0)})};Hg.prototype.copyTo=function(f){var k=this,n,b,e,m,a,g;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){if(1==l.nextAddress)return n=k.System.resource(f),b=n.write,l.yield(k.source(),3);if(2!=l.nextAddress)return l.yield(b.call(n,
l.yieldResult),2);e=k;m=e.System;a=mf.module(m,f);g=mf.obj.select(k,"_observersOfTopLevelState _scope _ast _source _recorder sourceAccessorName recorderName".split(" "));Object.assign(a,g);m.set(f,m.newModule(m.get(k.id)));return l.return(a)})};Hg.prototype.renameTo=function(f,k){k=void 0===k?{}:k;var n=this,b,e,m,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(g){switch(g.nextAddress){case 1:return b=k,e=void 0===b.unload?!0:b.unload,m=void 0===b.removeFile?!0:b.removeFile,g.yield(n.copyTo(f),
2);case 2:a=g.yieldResult;if(!e){g.jumpTo(3);break}return g.yield(n.unload({reset:!0,forgetDeps:!1,forgetEnv:!0}),3);case 3:if(!m){g.jumpTo(5);break}return g.yield(n.System.resource(n.id).remove(),5);case 5:return g.return(a)}})};Hg.prototype.whenLoaded=function(f){if(this.isLoaded())try{f(this)}catch(k){console.error(k)}else mf.livelySystemEnv(this.System).onLoadCallbacks.push({moduleName:this.id,resolved:!0,callback:f})};Hg.prototype.changeSourceAction=function(f){var k=this;return Promise.resolve(this.source()).then(function(n){return f(n)}).then(function(n){return k.changeSource(n)})};
Hg.prototype.changeSource=function(f,k){k=Object.assign({doSave:!0,doEval:!0},k);var n=this.System,b=this.id,e=this.format(),m;this.reset();this.lastModifiedAt=new Date;return Promise.all([k.doSave&&this.System.resource(b).write(f),k.doEval&&mf.moduleSourceChange(n,b,f,e,k).then(function(a){return m=a})]).then(function(){return m})};Hg.prototype.addDependencyToModuleRecord=function(f,k){var n=this;k=void 0===k?function(){}:k;var b=this.record(),e=f.record();if(b&&e){var m,a=b.dependencies.some(function(l,
r){if(l)return m=r,l&&l.name===f.id});a?e!==b.dependencies[m]&&b.dependencies.splice(m,1,e):b.dependencies.push(e);a&&b.setters[m]||(b.setters[a?m:b.dependencies.length-1]=k);var g;e.importers.some(function(l,r){if(l)return g=r,l&&l.name===n.id})?b!==e.importers[g]&&e.importers.splice(g,1,b):e.importers.push(b)}};Hg.prototype.dependents=function(){var f=this;return mf.graph.hull(mf.graph.invert(mf.computeRequireMap(this.System)),this.id).map(function(k){return mf.module(f.System,k)})};Hg.prototype.requirements=
function(){var f=this;return mf.graph.hull(mf.computeRequireMap(this.System),this.id).map(function(k){return mf.module(f.System,k)})};Hg.prototype.directRequirements=function(){var f=this,k=(this.record()||{}).dependencies||[];return mf.arr.pluck(k.filter(Boolean),"name").map(function(n){return mf.module(f.System,n)})};Hg.prototype.isMochaTest=function(){if(!this._source)return!1;var f=this._scope||(this._scope=mf.query.topLevelDeclsAndRefs(mf.parse(this._source)).scope);return mf.query.imports(f).map(function(k){return k.fromModule}).some(function(k){return k.endsWith("mocha-es6")||
k.endsWith("mocha-es6/index.js")})?!0:!1};Hg.prototype.define=function(f,k,n,b){n=void 0===n?!0:n;var e=this.System,m=this.id,a=this.recorder,g=Symbol.for("lively-object-meta"),l=Symbol.for("lively-module-meta");"function"!==typeof k||!b||"function"!==b.kind&&"class"!==b.kind||(k[g]=b);k&&k[g]&&!k[l]&&(b=this.pathInPackage(),g=this.package(),k[l]={package:g?{name:g.name,version:g.version}:{},pathInPackage:b});a[f]=k;mf.scheduleModuleExportsChange(e,m,f,k,!1);this.notifyTopLevelObservers(f);(n=n||
!this.isEvalutionInProgress())&&mf.runScheduledExportChanges(e,m);return k};Hg.prototype.undefine=function(f){delete this.recorder[f]};Hg.prototype.subscribeToToplevelDefinitionChanges=function(f){this._observersOfTopLevelState.push(f);return f};Hg.prototype.notifyTopLevelObservers=function(f){var k=this.recorder;mf.arr.include(["createOrExtendES6ClassForLively","lively.capturing-declaration-wrapper"],f)||this._observersOfTopLevelState.forEach(function(n){return n(f,k[f])})};Hg.prototype.unsubscribeFromToplevelDefinitionChanges=
function(f){this._observersOfTopLevelState="string"===typeof f?this._observersOfTopLevelState.filter(function(k){return k.name!==f}):this._observersOfTopLevelState.filter(function(k){return k!==f})};Hg.prototype.evaluationStart=function(){this._evaluationsInProgress++};Hg.prototype.evaluationEnd=function(){this._evaluationsInProgress--;mf.runScheduledExportChanges(this.System,this.id)};Hg.prototype.nextEvalId=function(){return this._evalId++};Hg.prototype.isEvalutionInProgress=function(){return 0<
this._evaluationsInProgress};Hg.prototype.env=function(){return this};Hg.prototype.package=function(){return mf.Package.forModule(this.System,this)};Hg.prototype.pathInPackage=function(){var f=this.package();return f&&0===this.id.indexOf(f.address)?this.id.slice(f.address.length).replace(/^\//,""):this.id};Hg.prototype.imports=function(){var f=this,k,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){return 1==b.nextAddress?(k=mf.query,n=k.imports,b.yield(f.scope(),2)):b.return(n.call(k,
b.yieldResult))})};Hg.prototype.exports=function(){var f=this,k,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){return 1==b.nextAddress?(k=mf.query,n=k.exports,b.yield(f.scope(),2)):b.return(n.call(k,b.yieldResult))})};Hg.prototype.addImports=function(f){var k=this,n,b,e,m,a,g,l,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){if(1==y.nextAddress)return y.yield(k.source(),2);n=y.yieldResult;b=$jscomp.makeIterator(f);for(e=b.next();!e.done;e=b.next())m=e.value,a=
mf.module(k.System,m.from||m.moduleId),g=a.package(),l={exported:m.exported||m.local,moduleId:a.id,packageName:g.name,packageURL:g.url,pathInPackage:a.pathInPackage()},r=m.local,v=mf.ImportInjector.run(k.System,k.id,k.package(),n,l,r),n=v.newSource;return y.yield(k.changeSource(n),0)})};Hg.prototype.addGlobalDeclaration=function(f){var k=this,n,b,e,m,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(g){return 1==g.nextAddress?g.yield(k.source(),2):3!=g.nextAddress?(n=g.yieldResult,b=mf.GlobalInjector.run(n,
f),e=b.status,m=b.newSource,(a="modified"===e)?g.yield(k.changeSource(m),3):g.jumpTo(3)):g.return(a)})};Hg.prototype.removeImports=function(f){var k=this,n,b,e,m;return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){switch(a.nextAddress){case 1:return f.length?a.yield(k.source(),2):a.return();case 2:return n=a.yieldResult,a.yield(mf.ImportRemover.removeImports(n,f),3);case 3:return b=a.yieldResult,e=b.source,m=b.removedImports,a.yield(k.changeSource(e),4);case 4:m.forEach(function(g){return delete k.recorder[g.local]}),
a.jumpToEnd()}})};Hg.prototype._localDeclForRefAt=function(f){var k=this,n,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(1==e.nextAddress)return e.yield(k.resolvedScope(),2);n=e.yieldResult;b=mf.query.refWithDeclAt(f,n);return e.return(b&&{decl:b.decl,id:b.declId,declModule:k})})};Hg.prototype._localDeclForName=function(f){var k=this,n,b,e,m,a,g,l,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){if(1==v.nextAddress)return v.yield(k.resolvedScope(),2);n=v.yieldResult;
e=$jscomp.makeIterator(n.resolvedRefMap.values());for(m=e.next();!m.done;m=e.next())if(g=a=m.value,l=g.ref,r=l.name,f===r){b=a;break}return v.return(b&&{decl:b.decl,id:b.declId,declModule:k})})};Hg.prototype._importForNSRefAt=function(f){var k=this,n,b,e,m,a,g,l,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){if(1==y.nextAddress)return y.yield(k.resolvedScope(),2);n=y.yieldResult;b=n.node;e=mf.query.nodesAtIndex(b,f);if(2>e.length)return y.return([null,null]);m=e[e.length-1];a=
e[e.length-2];if("Identifier"!=m.type||"MemberExpression"!=a.type||a.computed||"Identifier"!==a.object.type)return y.return([null,null]);g=n.resolvedRefMap.get(a.object)||{};l=g.decl;if(!l||"ImportDeclaration"!==l.type)return y.return([null,null]);r=a.object.name;v=l.specifiers.find(function(A){return A.local.name===r});return y.return("ImportNamespaceSpecifier"!==v.type?[null,null]:[l,v.local,m.name])})};Hg.prototype._resolveImportedDecl=function(f){var k=this,n,b,e,m,a,g,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){switch(r.nextAddress){case 1:if(!f)return r.return([]);
n=f.id;b=n.name;return r.yield(k.imports(),2);case 2:e=r.yieldResult;m=e.find(function(v){return v.local==b});if(!m){r.jumpTo(3);break}a=mf.module(k.System,m.fromModule,k.id);g=[f];l=g.concat;return r.yield(a.bindingPathForExport(m.imported),4);case 4:return r.return(l.call(g,r.yieldResult));case 3:return r.return([f])}})};Hg.prototype.bindingPathFor=function(f){var k=this,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){return 1==b.nextAddress?b.yield(k._localDeclForName(f),2):4!=
b.nextAddress?(n=b.yieldResult)?b.yield(k._resolveImportedDecl(n),4):b.jumpTo(0):b.return(b.yieldResult)})};Hg.prototype.bindingPathForExport=function(f){var k=this,n,b,e,m,a,g;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){switch(l.nextAddress){case 1:return l.yield(k.resolvedScope(),2);case 2:return l.yield(k.exports(),3);case 3:n=l.yieldResult;b=n.find(function(r){return r.exported===f});if(!b.fromModule)return l.return(k._resolveImportedDecl({decl:b.decl,id:b.declId,declModule:b&&
b.decl?k:null}));e=mf.module(k.System,b.fromModule,k.id);m={decl:b.node,id:b.declId,declModule:k};a=[m];g=a.concat;return l.yield(e.bindingPathForExport(b.imported),5);case 5:return l.return(g.call(a,l.yieldResult))}})};Hg.prototype.bindingPathForRefAt=function(f){var k=this,n,b,e,m,a,g,l,r,v,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(A){switch(A.nextAddress){case 1:return A.yield(k._localDeclForRefAt(f),2);case 2:n=A.yieldResult;if(!n){A.jumpTo(3);break}return A.yield(k._resolveImportedDecl(n),
4);case 4:return A.return(A.yieldResult);case 3:return b=$jscomp,e=b.makeIterator,A.yield(k._importForNSRefAt(f),5);case 5:m=e.call(b,A.yieldResult);a=m.next().value;g=m.next().value;l=m.next().value;if(!a)return A.return([]);r=mf.module(k.System,a.source.value,k.id);v=[{decl:a,declModule:k,id:g}];y=v.concat;return A.yield(r.bindingPathForExport(l),6);case 6:return A.return(y.call(v,A.yieldResult))}})};Hg.prototype.definitionForRefAt=function(f){var k=this,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){if(1==
b.nextAddress)return b.yield(k.bindingPathForRefAt(f),2);n=b.yieldResult;return b.return(1>n.length?null:n[n.length-1].decl)})};Hg.prototype.ensureRecord=function(){var f=this.System,k=f._loader.moduleRecords;return k[this.id]?k[this.id]:k[this.id]={name:this.id,exports:f.newModule({}),dependencies:[],importers:[],setters:[]}};Hg.prototype.record=function(){var f=this.System._loader.moduleRecords[this.id];if(!f)return null;f.hasOwnProperty("__lively_modules__")||(f.__lively_modules__={evalOnlyExport:{}});
return f};Hg.prototype.updateRecord=function(f){var k=this.record();if(!k)throw Error("es6 environment global of "+this.id+": module not loaded, cannot get export object!");k.locked=!0;try{return f(k)}finally{k.locked=!1}};Hg.prototype.search=function(f,k){var n=this,b,e,m,a,g,l,r,v,y,A,E,F,H,I;return $jscomp.asyncExecutePromiseGeneratorProgram(function(M){if(1==M.nextAddress)return k=Object.assign({excludedModules:[]},k),k.excludedModules.some(function(N){return"string"===typeof N?N===n.id:N instanceof
RegExp?N.test(n.id):"function"===typeof N?N(n.id):!1})?M.return([]):M.yield(n.source(),2);b=M.yieldResult;f instanceof RegExp?(m="g",f.ignoreCase&&(m+="i"),f.multiline&&(m+="m"),e=RegExp(f.source,m)):e=RegExp(f,"g");for(g=[];null!==(a=e.exec(b));)g.push([a.index,a[0].length]);r=l=0;v=1;for(y=0;l<b.length&&r<g.length;l++)"\n"==b[l]&&(v++,y=l+1),A=$jscomp.makeIterator(g[r]),E=A.next().value,F=A.next().value,l===E&&(H=b.slice(y).indexOf("\n"),H=-1===H?b.length:H+y,I=n.package(),g[r]={moduleId:n.id,packageName:I?
I.name:void 0,pathInPackage:I?n.pathInPackage():n.id,isLoaded:n.isLoaded(),length:F,line:v,column:l-y,lineString:1E3<H-y?"..."+b.slice(l-10,l+100)+"...":b.slice(y,H)},r++);return M.return(g)})};Hg.prototype.toString=function(){return"module("+this.id+")"};$jscomp.global.Object.defineProperties(Hg.prototype,{dontTransform:{configurable:!0,enumerable:!0,get:function(){return[this.recorderName,this.sourceAccessorName,"global","self","_moduleExport","_moduleImport","localStorage","prompt","alert","fetch",
"getComputedStyle"].concat($jscomp.arrayFromIterable(this.isMochaTest()?[]:mf.GlobalInjector.getGlobals(this._source))).concat(mf.query.knownGlobals)}},recorder:{configurable:!0,enumerable:!0,set:function(f){return this._recorder=f},get:function(){if(this._recorder)return this._recorder;var f=this.System,k=this;if(!mf.globalProps.initialized){mf.globalProps.initialized=!0;for(var n in f.global)if(f.global.__lookupGetter__(n)||"closed"==n)mf.globalProps.descriptors[n]={value:void 0,configurable:!0,
writable:!0}}n={};if(f.get("@system-env").node){var b=mf._require.bind(null,this);b.resolve=mf._resolve.bind(null,this);n.require={configurable:!0,writable:!0,value:b}}b={};return this._recorder=Object.create(f.global,Object.assign({},mf.globalProps.descriptors,{},n,(b.event={configurable:!0,writable:!0,value:void 0},b.System={configurable:!0,writable:!0,value:f},b.__currentLivelyModule={value:k},b[mf.defaultClassToFunctionConverterName]={configurable:!0,writable:!0,value:mf.classRuntime.initializeClass},
b[this.varDefinitionCallbackName]={value:function(e,m,a,g,l){l=l||{};l.kind=m;return k.define(e,a,!1,l)}},b._moduleExport={value:function(e,m){mf.scheduleModuleExportsChange(f,k.id,e,m,!0)}},b._moduleImport={value:function(e,m){var a=f.decanonicalize(e,k.id),g=f.get(a);if(g){k.addDependencyToModuleRecord(mf.module(f,a),function(l){return Object.assign(k.recorder,l)});if(void 0==m)return g;g.hasOwnProperty(m)||console.warn("import from "+g+": Has no export "+m+"!");return g[m]}console.warn("import of "+
m+" failed: "+e+" (tried as "+k.id+") is not loaded!")}},b)))}},varDefinitionCallbackName:{configurable:!0,enumerable:!0,get:function(){return"defVar_"+this.id}}});mf.ModuleInterface=Hg;mf.default=kh;var Me=lively.FreezerRuntime.recorderFor("lively.modules/src/instrumentation.js");Me.canonicalURL=function(f){var k=f.match(/([^:]+:\/\/)(.*)/);if(k){var n=k[1];f=k[2]}f=f.replace(/([^:])\/[\/]+/g,"$1/");return(n||"")+f};Me.prepareNodejsCaching=function(){var f=System._nodeRequire("fs"),k=System._nodeRequire("path"),
n="win32"===process.platform;k=n||"/"!==process.cwd()?process.cwd():k.join(process.env.HOME,".lively.next");Me.nodejsCacheDirURL=n?"file:///"+k.replace(/\\/g,"/"):"file://"+k;f.existsSync(k)||f.mkdirSync(k)};Me.getExceptions=Ip;Me.setExceptions=Ru;Me.prepareCodeForCustomCompile=Su;Me.prepareTranslatedCodeForSetterCapture=Tu;Me.getCachedNodejsModule=function(f,k){try{var n=f._nodeRequire("module").Module,b=n._resolveFilename(k.name.replace(/^file:\/\//,"").replace(/^\/([a-z]:\/)/i,"$1"));return n._cache[b]}catch(e){f.debug&&
console.log("[lively.modules getCachedNodejsModule] %s unknown to nodejs",k.name)}return null};Me.addNodejsWrapperSource=function(f,k){var n=Me.getCachedNodejsModule(f,k);if(n)return k.metadata.format="esm",k.source="var exports = System._nodeRequire('"+n.id+"'); export default exports;\n"+Me.properties.allOwnPropertiesOrFunctions(n.exports).map(function(b){return Me.isValidIdentifier(b)?"export var "+b+" = exports['"+b+"'];":'/*ignoring export "'+b+'" b/c it is not a valid identifier*/'}).join("\n"),
f.debug&&console.log("[lively.modules customTranslate] loading %s from nodejs module cache",k.name),!0;f.debug&&console.log("[lively.modules customTranslate] %s not yet in nodejs module cache",k.name);return!1};Me.customTranslate=function(f,k){var n=this,b,e,m,a,g,l,r,v,y,A,E,F,H,I,M,N,W,X,ea;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Aa){switch(Aa.nextAddress){case 1:b=n;e=b.debug;if(a=(m=k.metadata)&&m.hasOwnProperty("instrument")&&!m.instrument||Me.exceptions.some(function(Ma){return Ma(k.name)}))return e&&
console.log("[lively.modules customTranslate ignoring] %s",k.name),Aa.return(f(k));if(Me.isNode&&Me.addNodejsWrapperSource(b,k))return e&&console.log("[lively.modules] loaded %s from nodejs cache",k.name),Aa.return(f(k));g=Date.now();l=Me.detectModuleFormat(k.source,m);r=Me.module(b,k.name);v=!1;y="esm"===l;r.setSource(k.source);Aa.setCatchFinallyBlocks(2);A=b.useModuleTranslationCache;E=b.global.indexedDB;F=A&&String(Me.string.hashCode(k.source));if(A&&E&&y)return H=b._livelyModulesTranslationCache||
(b._livelyModulesTranslationCache=new Me.BrowserModuleTranslationCache),Aa.yield(H.fetchStoredModuleSource(k.name),8);if(!(Me.isNode&&A&&y)){Aa.jumpTo(5);break}H=b._livelyModulesTranslationCache||(b._livelyModulesTranslationCache=new Me.NodeModuleTranslationCache);return Aa.yield(H.fetchStoredModuleSource(k.name),7);case 7:if((I=Aa.yieldResult)&&I.hash==F&&I.timestamp>=Me.NodeModuleTranslationCache.earliestDate&&I.source)return m.format="register",m.deps=[],e&&console.log("[lively.modules customTranslate] loaded %s from filesystem cache after %sms",
k.name,Date.now()-g),Aa.return(Promise.resolve(I.source));Aa.jumpTo(5);break;case 8:if((I=Aa.yieldResult)&&I.hash==F&&I.timestamp>=Me.BrowserModuleTranslationCache.earliestDate&&I.source)return m.format="register",m.deps=[],e&&console.log("[lively.modules customTranslate] loaded %s from browser cache after %sms",k.name,Date.now()-g),Aa.return(Promise.resolve(I.source));case 5:Aa.leaveTryBlock(3);break;case 2:M=Aa.enterCatchBlock(),console.error("[lively.modules customTranslate] error reading module translation cache: "+
M.stack);case 3:return N={},y?(r.recorderName="__lvVarRecorder",r.recorder===b.global&&r.unloadEnv(),k.metadata.format="esm",W=Me.prepareCodeForCustomCompile(b,k.source,k.name,r,e),N=W.options,X=W.source,k.source=X,v=k.metadata["lively.modules instrumented"]=!0,e&&console.log("[lively.modules] loaded %s as es6 module",k.name)):"global"===k.metadata.format&&(r.recorderName="System.global",r.recorder=b.global,k.metadata.format="global",ea=Me.prepareCodeForCustomCompile(b,k.source,k.name,r,e),N=ea.options,
X=ea.source,k.source=X,v=k.metadata["lively.modules instrumented"]=!0,e&&console.log("[lively.modules] loaded %s as instrumented global module",k.name)),v||e&&console.log("[lively.modules] customTranslate ignoring %s b/c don't know how to handle format %s",k.name,k.metadata.format),Aa.return(f(k).then(function(Ma){var K,aa,T;return $jscomp.asyncExecutePromiseGeneratorProgram(function(U){switch(U.nextAddress){case 1:0===Ma.indexOf("System.register(")&&(e&&console.log("[lively.modules customTranslate] Installing System.register setter captures for %s",
k.name),Ma=Me.prepareTranslatedCodeForSetterCapture(b,Ma,k.name,r,N,e));if(Me.isNode&&A&&y)return K=b._livelyModulesTranslationCache||(b._livelyModulesTranslationCache=new Me.NodeModuleTranslationCache),U.setCatchFinallyBlocks(8),U.yield(K.cacheModuleSource(k.name,F,Ma),10);if(!(A&&E&&y)){U.jumpTo(3);break}K=b._livelyModulesTranslationCache||(b._livelyModulesTranslationCache=new Me.BrowserModuleTranslationCache);U.setCatchFinallyBlocks(5);return U.yield(K.cacheModuleSource(k.name,F,Ma),7);case 7:e&&
console.log("[lively.modules customTranslate] stored cached version for %s",k.name);U.leaveTryBlock(3);break;case 5:aa=U.enterCatchBlock();console.error("[lively.modules customTranslate] failed storing module cache: "+aa.stack);U.jumpTo(3);break;case 10:e&&console.log("[lively.modules customTranslate] stored cached version in filesystem for %s",k.name);U.leaveTryBlock(3);break;case 8:T=U.enterCatchBlock(),console.error("[lively.modules customTranslate] failed storing module cache: "+T.stack);case 3:return e&&
console.log("[lively.modules customTranslate] done %s after %sms",k.name,Date.now()-g),U.return(Ma)}})}))}})};Me.instrumentSourceOfEsmModuleLoad=pt;Me.instrumentSourceOfGlobalModuleLoad=Zr;Me.wrapModuleLoad=Kh;Me.unwrapModuleLoad=pk;Me.parse=ak;Me.nodes=Pw;Me.isValidIdentifier=Sr;var nU=Me.nodes;Me.funcCall=nU.funcCall;Me.member=nU.member;Me.literal=nU.literal;Me.evalCodeTransform=Xo;Me.evalCodeTransformOfSystemRegisterSetters=mq;Me.arr=$f;Me.string=pi;Me.properties=up;Me.module=kh;Me.detectModuleFormat=
EM;Me.resource=la;Me.installHook=yb;Me.removeHook=wc;Me.isHookInstalled=Lc;Me.classToFunctionTransform=uj;Me.isNode=System.get("@system-env").node;var eH=function(){};eH.prototype.cacheModuleSource=function(f,k,n){throw Error("not yet implemented");};eH.prototype.fetchStoredModuleSource=function(f){throw Error("not yet implemented");};eH.prototype.deleteCachedData=function(f){throw Error("not yet implemented");};$jscomp.global.Object.defineProperties(eH,{earliestDate:{configurable:!0,enumerable:!0,
get:function(){return+new Date("Sun Oct 18 2020 16:00:00 GMT-0800 (PST)")}}});Me.ModuleTranslationCache=eH;Me.nodejsCacheDirURL=null;var Uw=function(){return Me.ModuleTranslationCache.apply(this,arguments)||this};$jscomp.inherits(Uw,Me.ModuleTranslationCache);Uw.prototype.ensurePath=function(f){var k=this,n,b,e,m,a,g,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){switch(r.nextAddress){case 1:return r.yield(k.moduleCacheDir.join(f).exists(),2);case 2:if(r.yieldResult)return r.return();
n="";m=$jscomp.makeIterator(f.split("/"));a=m.next();case 3:if(a.done){r.jumpTo(0);break}g=a.value;n+=g+"/";b=k.moduleCacheDir.join(n);return r.yield(b.exists(),6);case 6:if(r.yieldResult){r.jumpTo(7);break}r.setCatchFinallyBlocks(8);return r.yield(b.mkdir(),10);case 10:r.leaveTryBlock(7);break;case 8:if(l=r.enterCatchBlock(),"EEXIST"!=l.code)throw l;case 7:return b=Me.resource("file://"+n+"/package.json"),r.yield(b.exists(),11);case 11:if(!r.yieldResult){r.jumpTo(4);break}return r.yield(b.read(),
13);case 13:return e=r.yieldResult,r.yield(k.moduleCacheDir.join(n+"/package.json").write(e),4);case 4:a=m.next(),r.jumpTo(3)}})};Uw.prototype.dumpModuleCache=function(){var f=this,k,n,b,e,m,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(g){switch(g.nextAddress){case 1:n=g.forIn(System._nodeRequire("module").Module._cache);case 2:if(null==(k=n.getNext())){g.jumpTo(0);break}b=Me.resource("file://"+k);return g.yield(b.exists(),5);case 5:if(!g.yieldResult){g.jumpTo(2);break}e=f;m=e.cacheModuleSource;
a=k;return g.yield(b.read(),8);case 8:return g.yield(m.call(e,a,"NO_HASH",g.yieldResult),2)}})};Uw.prototype.getFileName=function(f){return f.match(/([^\/]*.)(\.js)?$/)[0]};Uw.prototype.fetchStoredModuleSource=function(f){var k=this,n,b,e,m,a,g,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){switch(r.nextAddress){case 1:return f=f.replace("file://",""),n=k.getFileName(f),b=f.replace(n,""),e=k.moduleCacheDir.join(f),r.yield(e.exists(),2);case 2:return r.yieldResult?r.yield(e.stat(),
3):r.return(null);case 3:return m=r.yieldResult,a=m.birthtime,r.yield(e.read(),4);case 4:return g=r.yieldResult,r.yield(k.moduleCacheDir.join(b+"/.hash_"+n).read(),5);case 5:return l=r.yieldResult,r.return({source:g,timestamp:a,hash:l})}})};Uw.prototype.cacheModuleSource=function(f,k,n){var b=this,e,m;return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){return 1==a.nextAddress?(f=f.replace("file://",""),e=b.getFileName(f),m=f.replace(e,""),a.yield(b.ensurePath(m),2)):3!=a.nextAddress?a.yield(b.moduleCacheDir.join(f).write(n),
3):a.yield(b.moduleCacheDir.join(m+"/.hash_"+e).write(k),0)})};Uw.prototype.deleteCachedData=function(f){var k=this,n,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){return 1==e.nextAddress?(f=f.replace("file://",""),n=k.getFileName(f),f.replace(n,""),b=k.moduleCacheDir.join(f),e.yield(b.exists(),2)):3!=e.nextAddress?e.yieldResult?e.yield(b.remove(),3):e.return(!1):e.return(!0)})};$jscomp.global.Object.defineProperties(Uw.prototype,{moduleCacheDir:{configurable:!0,enumerable:!0,get:function(){Me.nodejsCacheDirURL||
Me.prepareNodejsCaching();return Me.resource(Me.nodejsCacheDirURL+"/.module_cache/")}}});Me.NodeModuleTranslationCache=Uw;var Iy=function(f){f=void 0===f?"lively.modules-module-translation-cache":f;var k=Me.ModuleTranslationCache.call(this)||this;k.version=2;k.sourceCodeCacheStoreName="sourceCodeStore";k.dbName=f;k.db=k.openDb();return k};$jscomp.inherits(Iy,Me.ModuleTranslationCache);Iy.prototype.openDb=function(){var f=this,k=System.global.indexedDB.open(this.version);return new Promise(function(n,
b){k.onsuccess=function(e){n(this.result)};k.onerror=function(e){return b(e.target)};k.onupgradeneeded=function(e){return e.currentTarget.result.createObjectStore(f.sourceCodeCacheStoreName,{keyPath:"moduleId"})}})};Iy.prototype.deleteDb=function(){var f=System.global.indexedDB.deleteDatabase(this.dbName);return new Promise(function(k,n){f.onerror=function(b){return n(b.target)};f.onsuccess=function(b){return k(b)}})};Iy.prototype.closeDb=function(){var f=this,k,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){if(1==
b.nextAddress)return b.yield(f.db,2);k=b.yieldResult;n=k.close();return b.return(new Promise(function(e,m){n.onsuccess=function(a){e(this.result)};n.onerror=function(a){return m(a.target.errorCode)}}))})};Iy.prototype.cacheModuleSource=function(f,k,n){var b=this,e;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){if(1==m.nextAddress)return m.yield(b.db,2);e=m.yieldResult;return m.return(new Promise(function(a,g){var l=e.transaction([b.sourceCodeCacheStoreName],"readwrite"),r=l.objectStore(b.sourceCodeCacheStoreName),
v=Date.now();r.put({moduleId:f,hash:k,source:n,timestamp:v});l.oncomplete=a;l.onerror=g}))})};Iy.prototype.fetchStoredModuleSource=function(f){var k=this,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){if(1==b.nextAddress)return b.yield(k.db,2);n=b.yieldResult;return b.return(new Promise(function(e,m){var a=n.transaction([k.sourceCodeCacheStoreName]).objectStore(k.sourceCodeCacheStoreName).get(f);a.onerror=m;a.onsuccess=function(g){return e(a.result)}}))})};Iy.prototype.deleteCachedData=
function(f){var k=this,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){if(1==b.nextAddress)return b.yield(k.db,2);n=b.yieldResult;return b.return(new Promise(function(e,m){var a=n.transaction([k.sourceCodeCacheStoreName],"readwrite").objectStore(k.sourceCodeCacheStoreName).delete(f);a.onerror=m;a.onsuccess=function(g){return e(a.result)}}))})};Me.BrowserModuleTranslationCache=Iy;Me.node_modulesDir=System.decanonicalize("lively.modules/node_modules/");Me.exceptions=[function(f){return!f.endsWith(".js")&&
!f.endsWith(".jsx")&&!f.startsWith("https://jspm.dev")},function(f){return f.endsWith("dist/acorn.js")||f.endsWith("dist/escodegen.browser.js")||f.endsWith("bowser.js")||f.endsWith("TweenMax.min.js")},function(f){return f.endsWith("babel-core/browser.js")||f.endsWith("system.src.js")||f.includes("systemjs-plugin-babel")}];Me.pendingConfigs=[];Me.configInitialized=!1;Me.prepareCodeForCustomCompile=Su;Me.prepareCodeForCustomCompile=Su;Me.prepareTranslatedCodeForSetterCapture=Tu;Me.prepareTranslatedCodeForSetterCapture=
Tu;Me.wrapModuleLoad=Kh;Me.wrapModuleLoad=Kh;Me.unwrapModuleLoad=pk;Me.unwrapModuleLoad=pk;Me.getExceptions=Ip;Me.getExceptions=Ip;Me.setExceptions=Ru;Me.setExceptions=Ru;Me.instrumentSourceOfEsmModuleLoad=pt;Me.instrumentSourceOfEsmModuleLoad=pt;Me.instrumentSourceOfGlobalModuleLoad=Zr;Me.instrumentSourceOfGlobalModuleLoad=Zr;var Dh=lively.FreezerRuntime.recorderFor("lively.modules/src/resource.js");Dh.fetchResource=function(f,k){var n=this,b,e,m,a,g,l,r,v,y,A,E,F,H,I,M,N,W,X,ea,Aa,Ma,K;return $jscomp.asyncExecutePromiseGeneratorProgram(function(aa){switch(aa.nextAddress){case 1:b=
n;e=b.resource(k.name);m=b.get("@system-env").node&&!e.isNodeJSFileResource;if(!m){aa.jumpTo(2);break}return aa.yield(bla(k.name),3);case 3:e=aa.yieldResult;case 2:if(!e)return aa.return(f(k));if(Dh.jsFileHashMap||b.get("@system-env").node){aa.jumpTo(4);break}l=Dh;return aa.yield(b.resource(b.baseURL).join("__JS_FILE_HASHES__").readJson(),5);case 5:l.jsFileHashMap=aa.yieldResult;case 4:r=b.useModuleTranslationCache;v=b.global.indexedDB;y=b._livelyModulesTranslationCache;if(b.get("@system-env").node||
!r||!v||!y){aa.jumpTo(6);break}return aa.yield(y.fetchStoredModuleSource(k.name),7);case 7:if((A=aa.yieldResult)&&(Dh.jsFileHashMap[k.name.replace(b.baseURL,"/")]==A.hash||k.name.includes("jspm")))return k.metadata.instrument=!1,aa.return(A.source);case 6:aa.setCatchFinallyBlocks(8);if(!e.isResource){E=e;aa.jumpTo(10);break}return aa.yield(e.read(),11);case 11:E=aa.yieldResult;case 10:a=E;aa.leaveTryBlock(9);break;case 8:g=F=aa.enterCatchBlock();case 9:if(!g||!b.get("@system-env").browser){aa.jumpTo(12);
break}H=e.url.startsWith("http");I=!e.url.startsWith(document.location.origin);if(!H||!I){aa.jumpTo(12);break}aa.setCatchFinallyBlocks(14);return aa.yield(e.makeProxied().read(),16);case 16:a=aa.yieldResult;g=null;aa.leaveTryBlock(12);break;case 14:aa.enterCatchBlock();case 12:if(g)throw g;if(!m){aa.jumpTo(17);break}M=a.headers||{};N=M._headers;W=$jscomp.makeIterator(N&&N["content-encoding"]||[]);X=W.next().value;return"br"==X?(ea=Dh.Buffer,Aa=ea.from,Ma=Dh.brotli,K=Ma.decompress,aa.yield(a.buffer(),
21)):aa.yield(a.text(),20);case 20:a=aa.yieldResult;aa.jumpTo(17);break;case 21:a=Aa.call(ea,K.call(Ma,aa.yieldResult)).toString();case 17:return aa.return(a)}})};Dh.livelyProtocol=function(f,k){var n=k.match(Dh.livelyURLRe);if(!n)return f(k);f=$jscomp.makeIterator(n);f.next();f.next();var b=f.next().value;return{read:function(){var e="undefined"!==typeof $world&&$world.getMorphWithId(b);return Promise.resolve(e?e.textString:"/*Could not locate "+b+"*/")},write:function(e){var m="undefined"!==typeof $world&&
$world.getMorphWithId(b);if(!m)return Promise.reject("Could not save morph "+b);m.textString=e;return Promise.resolve(this)}}};Dh.wrapResource=Uj;Dh.unwrapResource=Do;Dh.resource=la;Dh.Resource=Tg;Dh.installHook=yb;Dh.removeHook=wc;Dh.isHookInstalled=Lc;Dh.brotli=Dh.brotli||void 0;if(System.get("@system-env").node){var bla=System._nodeRequire("node-fetch");Dh.brotli=System._nodeRequire("brotli")}Dh.jsFileHashMap=Dh.jsFileHashMap||void 0;Dh.livelyURLRe=/^lively:\/\/([^\/]+)\/(.*)$/;Dh.wrapResource=
Uj;Dh.wrapResource=Uj;Dh.unwrapResource=Do;Dh.unwrapResource=Do;var eB=function(){return Dh.Resource.apply(this,arguments)||this};$jscomp.inherits(eB,Dh.Resource);eB.prototype.read=function(){var f=this,k,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){k=f.morphId;n="undefined"!==typeof $world&&$world.getMorphWithId(k);return b.return(Promise.resolve(n?n.textString:"/*Could not locate "+k+"*/"))})};eB.prototype.write=function(f){var k=this,n,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){n=
k.morphId;b="undefined"!==typeof $world&&$world.getMorphWithId(n);if(!b)return e.return(Promise.reject("Could not save morph "+n));b.textString=f;return e.return(Promise.resolve(k))})};eB.prototype.exists=function(){var f=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){return k.return("undefined"!==typeof $world&&$world.getMorphWithId(f.morphId))})};eB.prototype.remove=function(){var f=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){"undefined"!==typeof $world&&
$world.getMorphWithId(f.morphId).remove();return k.return(!0)})};$jscomp.global.Object.defineProperties(eB.prototype,{canDealWithJSON:{configurable:!0,enumerable:!0,get:function(){return!1}},morphId:{configurable:!0,enumerable:!0,get:function(){var f=this.url.match(Dh.livelyURLRe);f=$jscomp.makeIterator(f);f.next();f.next();return f.next().value}}});Dh.LivelyResource=eB;var oU={name:"lively.modules",matches:function(f){return f.match(Dh.livelyURLRe)},resourceClass:Dh.LivelyResource};Dh.resourceExtension=
oU;Dh.resourceExtension=oU;Dh.resourceExtension=oU;Dh.registerExtension=w;Dh.registerExtension(Dh.resourceExtension);var de=lively.FreezerRuntime.recorderFor("lively.modules/src/system.js");de.wrapModuleResolution=$z;de.unwrapModuleResolution=Sx;de.livelySystemEnv=Ph;de.systems=function(){System.constructor.systems||(System.constructor.systems={});return System.constructor.systems};de.nameOfSystem=function(f){return Object.keys(de.systems()).detect(function(k){return de.systems()[k]===f})};de.getSystem=
Yl;de.removeSystem=Wn;de.makeSystem=function(f){return de.prepareSystem(new System.constructor,f)};de.prepareSystem=Tx;de.urlQuery=function(){return"undefined"!==typeof document&&document.location?(document.location.search||"").replace(/^\?/,"").split("&").reduce(function(f,k){var n=k.split("=");k=n[0];n=n[1];"true"===n||"false"===n?n=eval(n):isNaN(Number(n))||(n=Number(n));f[k]=n;return f},{}):{}};de.preNormalize=function(f,k,n){".."===k&&(k="../index.js");k=k.replace(de.doubleSlashRe,function(g){return":"===
g[0]?g:g[0]+"/"});var b=f.get("@lively-env").packageRegistry;if(b){var e=n&&b.findPackageHavingURL(n);if(e){var m=e.map,a=e.url;if(m=m&&m[k]||f.map[k])"object"===typeof m&&(m=de.normalize_doMapWithObject(m,e,f)),"string"===typeof m&&""!==m&&(k=m),k.startsWith(".")&&(k=de.urlResolve(de.join(a,k)))}}b&&(f=b.resolvePath(k,n))&&(f.endsWith("/")&&!k.endsWith("/")&&(f=f.slice(0,-1)),!f.endsWith("/")&&k.endsWith("/")&&(f+="/"),k=f);return k};de.postNormalize=function(f,k,n){n=k.replace(de.jsExtRe,"");if(k.endsWith("/"))return k;
var b=f.get("@lively-env").packageRegistry;if(b){if(f=b.findPackageWithURL(n))return f=(f.main||"index.js").replace(de.dotSlashStartRe,""),k=n.replace(de.trailingSlashRe,"")+"/"+f}else if(n in f.packages&&(f=f.packages[n].main))return k=n.replace(de.trailingSlashRe,"")+"/"+f.replace(de.dotSlashStartRe,"");return(n=k.match(de.jsonJsExtRe))?n[1]:k};de.checkExistence=function(f,k){var n,b,e;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){if(1==m.nextAddress){k._fileCheckMap=k._fileCheckMap||
{};if(f in k._fileCheckMap)return m.return(k._fileCheckMap[f]);if((n=k._livelyModulesTranslationCache)&&n.fetchStoredModuleSource(f))return m.return(k._fileCheckMap[f]=!0);b=k._fileCheckMap;e=f;return m.yield(de.resource(f).exists(),2)}return m.return(b[e]=m.yieldResult)})};de.normalizeHook=function(f,k,n,b){var e=this,m,a,g,l,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){switch(y.nextAddress){case 1:if(n&&"cjs"==k)return y.return("cjs");m=e;a=de.preNormalize(m,k,n);return y.yield(f(a,
n,b),2);case 2:g=y.yieldResult;l=de.postNormalize(m,g||a,!1);r=l.startsWith("file:");m.debug&&console.log("[normalize] "+k+" => "+l);if(de.jsExtRe.test(k)||de.jsxExtRe.test(k)||de.jsonExtRe.test(l)||de.nodeModRe.test(l)||de.nodeExtRe.test(l)||m.loads&&m.loads[l]||!de.jsExtRe.test(l)){y.jumpTo(3);break}return y.yield(de.checkExistence(l,m),4);case 4:if(y.yieldResult)return y.return(l);v=l.replace(".js","/index.js");return y.yield(de.checkExistence(v,m),5);case 5:return y.yieldResult||!r?y.return(v):
y.return(l.replace(".js","/index.node"));case 3:return de.jsxJsExtRe.test(l)&&(l=l.replace(".jsx.js",".jsx")),y.return(l)}})};de.decanonicalizeHook=function(f,k,n,b){if(k&&k.endsWith("!cjs")){k=k.replace("!cjs","");var e="!cjs"}var m=de.preNormalize(this,k,n);f=f(m,n,b);f=de.postNormalize(this,f,!0);e&&(f+=e);this.debug&&console.log("[normalizeSync] "+k+" => "+f);return f};de.locateHook=function(f,k){var n,b,e;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){if(1==m.nextAddress)return n=
$jscomp.makeIterator(k.name.split("!")),b=n.next().value,n.next(),k.name=b,m.yield(f(k),2);e=m.yieldResult;return m.return(e)})};de.normalize_doMapWithObject=function(f,k,n){k=n.get(k.map["@env"]||"@system-env");var b;for(b in f){n="~"==b[0];var e=n?b.substr(1):b;var m=k;for(e=e.split(".");e.length;)m=m[e.shift()];if(!n&&m||n&&!m){var a=f[b];break}}if(a&&"string"!=typeof a)throw Error("Unable to map a package conditional to a package conditional.");return a};de.normalize_packageOfURL=function(f,k){var n=
Object.keys(k.packages||{}).map(function(b){return 0===f.indexOf(b)?{url:b,penalty:f.slice(b.length).length}:null}).filter(function(b){return!!b});return(k=(n=n.length?n.reduce(function(b,e){return b.penalty>e.penalty?e:b}).url:null)&&k.packages[n])?{systemPackage:k,packageURL:n}:null};de.newModule_volatile=function(f,k){var n=Object.freeze;Object.freeze=function(b){return b};f=f(k);Object.freeze=n;return f};de.printSystemConfig=dJ;de.instantiate_triggerOnLoadCallbacks=function(f,k){var n=this;return f(k).then(function(b){var e=
{};de.promise.waitFor(6E4,function(){return n.get(k.name)},e).then(function(m){if(m===e)console.warn("[lively.modules] instantiate_triggerOnLoadCallbacks for "+k.name+" timed out");else{m=k.name;for(var a=de.classHolder.module(n,m),g=n.get("@lively-env").onLoadCallbacks,l=g.length;l--;){var r=g[l],v=r.moduleName,y=r.callback;if((r.resolved?v:n.decanonicalize(v))===m){g.splice(l,1);try{y(a)}catch(A){console.error(A)}}}de.emit("lively.modules/moduleloaded",{module:k.name},Date.now(),n)}});return b})};
de.whenLoaded=eJ;de.loadedModules=fJ;de.knownModuleNames=gJ;de.searchLoadedModules=QP;de.arr=$f;de.obj=Ag;de.promise=zh;de.removeHook=wc;de.installHook=yb;de.isHookInstalled=Lc;de.classHolder=Tw;de.isNode=System.get("@system-env").node;de.GLOBAL="undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:void 0;de.defaultOptions={notificationLimit:null};de.wrapModuleResolution=$z;de.wrapModuleResolution=$z;de.unwrapModuleResolution=Sx;de.unwrapModuleResolution=
Sx;de.wrapModuleLoad=Kh;de.wrapResource=Uj;de.emit=ft;de.join=cH;de.urlResolve=Ue;de.resource=la;de.dotSlashStartRe=/^\.?\//;de.trailingSlashRe=/\/$/;de.jsExtRe=/\.js$/;de.jsxExtRe=/\.jsx$/;de.nodeExtRe=/\.node$/;de.jsonExtRe=/\.json$/;de.jsonJsExtRe=/(.*\.json)\.js$/i;de.jsxJsExtRe=/(.*\.jsx)\.js$/i;de.doubleSlashRe=/.\/{2,}/g;de.nodeModRe=/@node.*/;de.whenLoaded=eJ;de.whenLoaded=eJ;de.getSystem=Yl;de.getSystem=Yl;de.removeSystem=Wn;de.removeSystem=Wn;de.prepareSystem=Tx;de.prepareSystem=Tx;de.printSystemConfig=
dJ;de.printSystemConfig=dJ;de.livelySystemEnv=Ph;de.livelySystemEnv=Ph;de.loadedModules=fJ;de.loadedModules=fJ;de.knownModuleNames=gJ;de.knownModuleNames=gJ;de.searchLoadedModules=QP;de.searchLoadedModules=QP;var bh=lively.FreezerRuntime.recorderFor("lively.modules/src/packages/package-registry.js");bh.isAbsolute=function(f){return f.startsWith("/")||f.startsWith("http:")||f.startsWith("https:")||f.startsWith("file:")||f.match(bh.urlStartRe)};bh.ensureResource=function(f){return f.isResource?f:bh.resource(f)};
bh.semver=SG;bh.arr=$f;bh.obj=Ag;bh.promise=zh;bh.getPackage=Le;bh.Package=Dj;bh.resource=la;bh.isURL=cf;bh.classHolder=Tw;bh.urlStartRe=/^[a-z\.-_\+]+:/i;var ej=function(f,k){k=void 0===k?{}:k;this.System=f;this.packageBaseDirs=k.packageBaseDirs||[];this.devPackageDirs=k.devPackageDirs||[];this.individualPackageDirs=k.individualPackageDirs||[];this._readyPromise=null;this.packageMap={};this._byURL=null};ej.ofSystem=function(f){var k=f.get("@lively-env").packageRegistry;k||(k=f["__lively.modules__packageRegistry"]=
new this(f));return k};ej.forDirectory=function(f,k){return new this(f,{packageBaseDirs:[bh.ensureResource(k)]})};ej.fromJSON=function(f,k){return(new this(f)).fromJSON(k)};ej.prototype.resetByURL=function(){this._byURL=null};ej.prototype.allPackageURLs=function(){return Object.keys(this.byURL)};ej.prototype.toJSON=function(){function f(v){v=v.url;return v.startsWith(k.baseURL)?v.slice(k.baseURL.length).replace(/^\//,""):v}var k=this.System,n=this.packageMap,b=this.individualPackageDirs,e=this.devPackageDirs,
m=this.packageBaseDirs,a={},g;for(g in n){var l=n[g];a[g]={};a[g].latest=l.latest;a[g].versions={};for(var r in l.versions)a[g].versions[r]=l.versions[r].toJSON()}return{packageMap:a,individualPackageDirs:b.map(f),devPackageDirs:e.map(f),packageBaseDirs:m.map(f)}};ej.prototype.fromJSON=function(f){function k(v){return bh.isURL(v)?bh.resource(v):bh.resource(b.baseURL).join(v)}var n={},b=this.System,e=bh.resource(b.baseURL),m;for(m in f.packageMap){var a=f.packageMap[m];n[m]={};n[m].latest=a.latest;
n[m].versions={};for(var g in a.versions){var l=a.versions[g],r=l.url;bh.isAbsolute(r)||(r=e.join(r).url);l=bh.Package.fromJSON(b,Object.assign({},l,{url:r}));n[m].versions[g]=l}}this.packageMap=n;this.individualPackageDirs=f.individualPackageDirs.map(k);this.devPackageDirs=f.devPackageDirs.map(k);this.packageBaseDirs=f.packageBaseDirs.map(k);this.resetByURL();bh.classHolder.ModulePackageMapping.forSystem(b).clearCache();return this};ej.prototype.updateFromJSON=function(f){var k=this.packageMap,n;
for(n in f.packageMap){var b=f.packageMap[n];k[n]||(k[n]={});k[n].latest?bh.semver.gt(b.latest,k[n].latest)&&(k[n].latest=b.latest):k[n].latest;k[n].versions||(k[n].versions={});var e=this.System,m=bh.resource(e.baseURL),a;for(a in b.versions){var g=b.versions[a],l=g.url;bh.isAbsolute(l)||(l=m.join(l).url);g=new bh.Package.fromJSON(e,Object.assign({},g,{url:l}));k[n].versions[a]=g}}this.resetByURL();bh.classHolder.ModulePackageMapping.forSystem(System).clearCache();return this};ej.prototype.whenReady=
function(){return this._readyPromise||Promise.resolve()};ej.prototype.isReady=function(){return!this._readyPromise};ej.prototype.withPackagesDo=function(f){for(var k in this.packageMap){var n=this.packageMap[k].versions,b;for(b in n)f(n[b])}};ej.prototype.findPackage=function(f){for(var k in this.packageMap){var n=this.packageMap[k].versions,b;for(b in n){var e=n[b];if(f(e))return e}}return null};ej.prototype.filterPackages=function(f){var k=[];this.withPackagesDo(function(n){return f(n)&&k.push(n)});
return k};ej.prototype.allPackages=function(){var f=[],k;for(k in this.packageMap){var n=this.packageMap[k].versions,b;for(b in n)f.push(n[b])}return f};ej.prototype.sortPackagesByVersion=function(f){return f.sort(function(k,n){return bh.semver.compare(k.version,n.version,!0)})};ej.prototype.matches=function(f,k,n){var b=f.version;return f.name!==k?!1:!n||bh.semver.validRange(b||"",!0)&&bh.semver.satisfies(b,n,!0)?!0:!1};ej.prototype.coversDirectory=function(f){f=bh.ensureResource(f).asDirectory();
var k=this.packageBaseDirs,n=this.devPackageDirs;if(this.individualPackageDirs.some(function(e){return e.equals(f)}))return"individualPackageDirs";if(n.some(function(e){return e.equals(f)}))return"devPackageDirs";var b=f.parent().parent();return k.some(function(e){return e.equals(b)})?this.allPackages().find(function(e){return bh.ensureResource(e.url).equals(f)})?"packageCollectionDirs":"maybe packageCollectionDirs":null};ej.prototype.lookup=function(f,k){var n=this,b=this.packageMap[f];if(!b)return null;
if(!k||"latest"===k)return b.versions[b.latest];if(!bh.semver.validRange(k,!0))throw Error("PackageRegistry>>lookup of "+f+": Invalid version - "+k);b=bh.obj.values(b.versions).filter(function(e){return n.matches(e,f,k)});return 1>=b.length?b[0]:bh.arr.last(this.sortPackagesByVersion(b))};ej.prototype.findPackageDependency=function(f,k,n){n||(n=f.dependencies[k]||f.devDependencies[k]);bh.semver.validRange(n,!0)||(n=null);return this.lookup(k,n)};ej.prototype.findPackageWithURL=function(f){f.isResource&&
(f=f.url);f.endsWith("/")&&(f=f.slice(0,-1));return this.byURL[f]};ej.prototype.findPackageHavingURL=function(f){f.isResource&&(f=f.url);f.endsWith("/")&&(f=f.slice(0,-1));var k=Infinity,n=null,b=this.byURL,e;for(e in b)if(0===f.indexOf(e)){var m=f.slice(e.length).length;m>=k||(k=m,n=b[e])}return n};ej.prototype.findPackageForPath=function(f,k){if(bh.isAbsolute(f))return this.findPackageHavingURL(f);if(f.startsWith("."))return null;f=$jscomp.makeIterator(f.split("/")).next().value;if(!f)return null;
var n=f.indexOf("@");if(-1<n){var b=f.slice(n+1);f=f.slice(0,n)}return!b&&k?this.findPackageDependency(k,f):this.lookup(f,b)};ej.prototype.resolvePath=function(f,k){if(bh.isAbsolute(f))return f;var n=k&&k.isPackage||null;if(!n&&k){if(f.startsWith("."))return k=bh.resource(k),k.isDirectory()||(k=k.parent()),k.join(f).withRelativePartsResolved().url;n=this.findPackageHavingURL(k)}k=this.findPackageForPath(f,n);if(!k)return null;n=f.indexOf("/");return(f=-1===n||n===f.length-1?"":f.slice(n))?bh.resource(k.url).join(f).url:
k.url};ej.prototype.update=function(){var f=this,k,n,b,e,m,a,g,l,r,v,y,A,E,F,H,I,M,N,W,X,ea,Aa,Ma,K,aa;return $jscomp.asyncExecutePromiseGeneratorProgram(function(T){switch(T.nextAddress){case 1:if(!f.isReady())return T.return(f.whenReady().then(function(){return f.update()}));k=bh.promise.deferred();f._readyPromise=k.promise;f.packageBaseDirs=f.packageBaseDirs.map(function(U){return U.asDirectory()});f.individualPackageDirs=f.individualPackageDirs.map(function(U){return U.asDirectory()});f.devPackageDirs=
f.devPackageDirs.map(function(U){return U.asDirectory()});n={};T.setCatchFinallyBlocks(2,3);b=$jscomp.makeIterator(f.packageBaseDirs);e=b.next();case 5:if(e.done){T.jumpTo(7);break}m=e.value;a=$jscomp;g=a.makeIterator;return T.yield(m.dirList(1),8);case 8:l=g.call(a,T.yieldResult),r=l.next();case 9:if(r.done){e=b.next();T.jumpTo(5);break}v=r.value;y=$jscomp;A=y.makeIterator;return T.yield(v.dirList(1),12);case 12:E=A.call(y,T.yieldResult.filter(function(U){return U.isDirectory()})),F=E.next();case 13:if(F.done){r=
l.next();T.jumpTo(9);break}H=F.value;return T.yield(f._discoverPackagesIn(H,n,"packageCollectionDirs"),16);case 16:n=T.yieldResult;F=E.next();T.jumpTo(13);break;case 7:I=$jscomp.makeIterator(f.individualPackageDirs),e=I.next();case 17:if(e.done){T.jumpTo(19);break}M=e.value;return T.yield(f._discoverPackagesIn(M,n,"individualPackageDirs"),20);case 20:n=T.yieldResult;e=I.next();T.jumpTo(17);break;case 19:N=$jscomp.makeIterator(f.devPackageDirs),e=N.next();case 21:if(e.done){T.jumpTo(23);break}W=e.value;
return T.yield(f._discoverPackagesIn(W,n,"devPackageDirs"),24);case 24:n=T.yieldResult;e=N.next();T.jumpTo(21);break;case 23:for(X in n)ea=n[X],Aa=ea.pkg,Ma=ea.config,K=ea.covered,f.System.debug&&console.log("[PackageRegistry] Adding discovered package "+X+" (from "+K+")"),f._addPackageWithConfig(Aa,Ma,X+"/",K);f._updateLatestPackages();k.resolve();case 3:T.enterFinallyBlock();f._readyPromise=null;f.resetByURL();bh.classHolder.ModulePackageMapping.forSystem(f.System).clearCache();T.leaveFinallyBlock(4);
break;case 2:aa=T.enterCatchBlock();k.reject(aa);T.jumpTo(3);break;case 4:return T.return(f)}})};ej.prototype.addPackageAt=function(f,k,n){k=void 0===k?"individualPackageDirs":k;var b=this,e,m,a,g,l,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){if(1==y.nextAddress){e=f.isResource?f.url:f;e.endsWith("/")&&e.slice(0,-1);if(b.byURL[e])throw Error("package in "+e+" already added to registry");return y.yield(b._discoverPackagesIn(bh.ensureResource(f).asDirectory(),{},void 0,n),2)}m=
y.yieldResult;for(a in m)b.byURL[a]||(g=m[a],l=g.pkg,r=g.config,v=b._addPackageDir(a,k,!0),b._addPackageWithConfig(l,r,a+"/",v));b.resetByURL();bh.classHolder.ModulePackageMapping.forSystem(b.System).clearCache();b._updateLatestPackages();return y.return(b.findPackageWithURL(f))})};ej.prototype.removePackage=function(f,k){k=void 0===k?!0:k;var n=f.name,b=f.version,e=bh.ensureResource(f.url),m=this.coversDirectory(e);"devPackageDirs"===m?this.devPackageDirs=this.devPackageDirs.filter(function(a){return!a.equals(e)}):
"individualPackageDirs"===m&&(this.individualPackageDirs=this.individualPackageDirs.filter(function(a){return!a.equals(e)}));m=this.packageMap;m[n]&&(delete m[n].versions[b],0===Object.keys(m[n].versions).length&&delete m[n]);this.resetByURL();bh.classHolder.ModulePackageMapping.forSystem(this.System).clearCache();k&&this._updateLatestPackages(f.name)};ej.prototype.updateNameAndVersionOf=function(f,k,n,b,e){var m=this.packageMap;m[k]?m[k].versions[n]||console.warn("[PackageRegistry>>updateNameAndVersionOf] No version entry "+
n+" of "+k+" found in registry ("+f.url+")"):console.warn("[PackageRegistry>>updateNameAndVersionOf] "+k+"@"+n+" not found in registry ("+f.url+")");this._addToPackageMap(f,b,e);m[k]&&m[k].versions[n]&&(delete m[k].versions[n],0===Object.keys(m[k].versions).length&&delete m[k]);this._updateLatestPackages(f.name)};ej.prototype._updateLatestPackages=function(f){var k=this.packageMap;if(f&&k[f])k[f].latest=bh.arr.last(bh.semver.sort(Object.keys(k[f].versions),!0));else for(var n in k)k[n].latest=bh.arr.last(bh.semver.sort(Object.keys(k[n].versions),
!0))};ej.prototype._discoverPackagesIn=function(f,k,n,b){b=void 0===b?null:b;var e=this,m,a,g,l,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){if(1==y.nextAddress){if(!f.isDirectory())return y.return(k);m=f.asFile().url;if(k.hasOwnProperty(m))return y.return(k);y.setCatchFinallyBlocks(2);a=b&&b[m]||new bh.Package(e.System,m);return y.yield(a.tryToLoadPackageConfig(),4)}if(2!=y.nextAddress)return g=y.yieldResult,a.setConfig(g),k[m]={pkg:a,config:g,covered:n},e.System.debug&&(l=
g,r=l.name,v=l.version,console.log("[lively.modules] package "+r+"@"+v+" discovered in "+f.url)),y.return(k);y.enterCatchBlock();return y.return(k)})};ej.prototype._addToPackageMap=function(f,k,n,b){if(!k)throw Error("Cannot add package without name");n||(n="0.0.0");var e=this.packageMap;k=e[k]||(e[k]={versions:{},latest:null});if(k.versions[n])if(e="Redefining version "+n+" of package "+f.url,void 0===b||b)console.warn(e);else throw Error(e+" not allowed");k.versions[n]=f};ej.prototype._addPackageWithConfig=
function(f,k,n,b){(void 0===b?0:b)||this._addPackageDir(n,"individualPackageDirs",!0);f.registerWithConfig(k);this._addToPackageMap(f,f.name,f.version);return f};ej.prototype._addPackageDir=function(f,k,n){k=void 0===k?"individualPackageDirs":k;n=void 0===n?!0:n;f=bh.ensureResource(f).asDirectory();if(("packageCollectionDirs"===k||"maybe packageCollectionDirs"===k)&&(this.coversDirectory(f)||"").includes("packageCollectionDirs"))return"packageCollectionDirs";f=this[k].concat(f);this[k]=n?bh.arr.uniqBy(f,
function(b,e){return b.equals(e)}):f;return k};$jscomp.global.Object.defineProperties(ej.prototype,{byURL:{configurable:!0,enumerable:!0,get:function(){if(!this._byURL){this._byURL={};for(var f=$jscomp.makeIterator(this.allPackages()),k=f.next();!k.done;k=f.next())k=k.value,this._byURL[k.url]=k}return this._byURL}}});bh.PackageRegistry=ej;var mo=lively.FreezerRuntime.recorderFor("lively.modules/src/export-lookup.js");mo.arr=$f;mo.obj=Ag;mo.subscribe=Fx;mo.unsubscribe=jw;mo.module=kh;var Go=function(f){this.System=
f;this.subscribeToSystemChanges()};Go.forSystem=function(f){this._forSystemMap||(this._forSystemMap=new WeakMap);var k=this._forSystemMap.get(f);if(k)return k;k=new this(f);this._forSystemMap.set(f,k);return k};Go.run=function(f,k){f=void 0===f?System:f;return this.forSystem(f).systemExports(k)};Go.findExportOfValue=function(f,k){k=void 0===k?System:k;var n=this,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(1==e.nextAddress)return e.yield(n.run(k),2);b=e.yieldResult;return e.return(b.find(function(m){var a=
m.local;m=mo.module(k,m.moduleId);m=m.recorder||k.get(m.id)||{};try{return m[a]===f}catch(g){return!1}}))})};Go.prototype.subscribeToSystemChanges=function(){var f=this;if(!this._notificationHandlers){var k=this.System;this._notificationHandlers=[mo.subscribe("lively.modules/moduleloaded",function(n){return f.clearCacheFor(n.module)},k),mo.subscribe("lively.modules/modulechanged",function(n){return f.clearCacheFor(n.module)},k),mo.subscribe("lively.vm/doitresult",function(n){return f.clearCacheFor(n.targetModule)},
k)]}};Go.prototype.unsubscribeFromSystemChanges=function(){if(this._notificationHandlers){var f=this.System;mo.unsubscribe("lively.modules/moduleloaded",this._notificationHandlers[0],f);mo.unsubscribe("lively.modules/modulechanged",this._notificationHandlers[1],f);mo.unsubscribe("lively.vm/doitresult",this._notificationHandlers[2],f);this._notificationHandlers=null}};Go.prototype.clearCacheFor=function(f){this.exportByModuleCache[f]=null};Go.prototype.systemExports=function(f){var k=this,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){if(1==
b.nextAddress)return b.yield(k.rawExportsByModule(f),2);n=b.yieldResult;Object.keys(n).forEach(function(e){return k.resolveExportsOfModule(e,n)});return b.return(mo.arr.flatmap(Object.keys(n),function(e){return n[e].resolvedExports||n[e].rawExports}))})};Go.prototype.rawExportsByModule=function(f){var k=this,n,b,e,m,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(g){return 1==g.nextAddress?(f=f||{},n=k.System,b=n.get("@lively-env")||{},e=Object.keys(b.loadedModules||{}),m={},a=function(l){1>
l%50&&f.progress.step&&f.progress.step("Scanning ...",l/e.length)},g.yield(Promise.all(e.map(function(l,r){f.progress&&a(r);return k.rawExportsOfModule(l,f,m).then(function(v){return v?m[l]=v:null})})),2)):g.return(m)})};Go.prototype.rawExportsOfModule=function(f,k){k=void 0===k?{}:k;var n=this,b,e,m,a,g,l,r,v,y,A,E,F,H,I,M,N,W,X,ea,Aa,Ma,K;return $jscomp.asyncExecutePromiseGeneratorProgram(function(aa){switch(aa.nextAddress){case 1:b=n;e=b.System;m=b.exportByModuleCache;a=k.excludedPackages||[];
g=k.excludedURLs||(k.excludedURLs=a.filter(function(T){return"string"===typeof T}));l=k.excludeFns||(k.excludeFns=a.filter(function(T){return"function"===typeof T}));r=k.excludedPackageURLs||(k.excludedPackageURLs=g.concat(g.map(function(T){return e.decanonicalize(T.replace(/\/?$/,"/")).replace(/\/$/,"")})));v=k.livelyEnv||(k.livelyEnv=e.get("@lively-env")||{});k.modes||(k.modes=Object.keys(v.loadedModules||{}));if(m[f])return y=m[f].rawExports,aa.return(r.includes(y.packageURL)||l.some(function(T){return T(y.packageURL)})?
null:m[f]);A=mo.module(e,f);E=A.pathInPackage();H=(F=A.package())&&F.main&&E===F.main;I=F?F.url:"";M=F?F.name:"";N=F?F.version:"";W={moduleId:f,isMain:H,pathInPackage:E,packageName:M,packageURL:I,packageVersion:N,exports:[]};if(r.includes(I)||l.some(function(T){return T(I)}))return aa.return(null);aa.setCatchFinallyBlocks(2);X=A.format();return["register","es6","esm"].includes(X)?(Ma=W,aa.yield(A.exports(),7)):aa.yield(A.load(),6);case 6:ea=aa.yieldResult;W.exports=[];for(Aa in ea)"__useDefault"!==
Aa&&"default"!==Aa&&W.exports.push({exported:Aa,local:Aa,type:"id"});aa.jumpTo(5);break;case 7:Ma.exports=aa.yieldResult;case 5:aa.leaveTryBlock(3);break;case 2:K=aa.enterCatchBlock(),W.error=K;case 3:return aa.return(m[f]={rawExports:W})}})};Go.prototype.resolveExportsOfModule=function(f,k,n){var b=this;n=void 0===n?{}:n;if(!n[f]){n[f]=!0;var e=k[f];if(e&&!e.resolvedExports){var m=this.System,a=mo.obj.select(e.rawExports,"moduleId isMain packageName packageURL packageVersion pathInPackage".split(" "));
e.resolvedExports=mo.arr.flatmap(e.rawExports.exports,function(g){var l=g.type,r=g.exported,v=g.local,y=g.fromModule;if("all"!==l)return[Object.assign({},a,{type:l,exported:r,local:v,fromModule:y})];g=m.decanonicalize(y,f);b.resolveExportsOfModule(g,k,n);return(k[g].resolvedExports||[]).map(function(A){return Object.assign({},a,{type:A.type,exported:A.exported,local:A.local,fromModule:A.fromModule||y})})});n[f]=!1}}};$jscomp.global.Object.defineProperties(Go.prototype,{exportByModuleCache:{configurable:!0,
enumerable:!0,get:function(){return this._exportByModuleCache||(this._exportByModuleCache={})}}});Da("bJ",Go);mo.ExportLookup=Go;mo.default=Go;var sn=lively.FreezerRuntime.recorderFor("lively.modules/cjs/dependencies.js");sn.buildPackageMap=sF;sn.resolvePackageDependencies=hJ;sn.dependencyGraph=iJ;sn.arr=$f;sn.fun=Pn;sn.promise=zh;sn.obj=Ag;sn.resource=la;sn.buildPackageMap=sF;sn.buildPackageMap=sF;sn.resolvePackageDependencies=hJ;sn.resolvePackageDependencies=hJ;sn.dependencyGraph=iJ;sn.dependencyGraph=
iJ;var FM=Object.freeze({__proto__:null,buildPackageMap:sF,resolvePackageDependencies:hJ,dependencyGraph:iJ}),no=lively.FreezerRuntime.recorderFor("lively.modules/src/packages/module-package-mapping.js");no.arr=$f;no.unsubscribe=jw;no.subscribe=Fx;no.knownModuleNames=gJ;no.classHolder=Tw;var Ds=function(f){this.System=f;this._notificationHandlers=null;this.clearCache();this.subscribeToSystemChanges()};Ds.forSystem=function(f){var k=f["__lively.modules__modulePackageMapCache"];if(k)return k;k=new this(f);
return f["__lively.modules__modulePackageMapCache"]=k};Ds.prototype.subscribeToSystemChanges=function(){var f=this;if(!this._notificationHandlers){var k=this.System;this._notificationHandlers=[no.subscribe("lively.modules/moduleloaded",function(n){return f.addModuleIdToCache(n.module)},k),no.subscribe("lively.modules/moduleunloaded",function(n){return f.removeModuleFromCache(n.module)},k),no.subscribe("lively.modules/packageregistered",function(n){return f.clearCache()},k),no.subscribe("lively.modules/packageremoved",
function(n){return f.clearCache()},k)]}};Ds.prototype.unsubscribeFromSystemChanges=function(){if(this._notificationHandlers){var f=this.System;no.unsubscribe("lively.modules/moduleloaded",this._notificationHandlers[0],f);no.unsubscribe("lively.modules/moduleunloaded",this._notificationHandlers[1],f);no.unsubscribe("lively.modules/packageregistered",this._notificationHandlers[2],f);no.unsubscribe("lively.modules/packageremoved",this._notificationHandlers[3],f);this._notificationHandlers=null}};Ds.prototype.clearCache=
function(){this._cacheInitialized=!1;this.packageToModule={};this.modulesToPackage={};this.modulesWithoutPackage={}};Ds.prototype.ensureCache=function(){var f=this.System,k=this.packageToModule,n=this.modulesToPackage,b=this.modulesWithoutPackage;if(this._cacheInitialized)return this;for(var e=no.classHolder.Package.allPackageURLs(f),m=0;m<e.length;m++)k[e[m]]=[];f=no.knownModuleNames(f);for(m=0;m<f.length;m++){for(var a=f[m],g=void 0,l=0;l<e.length;l++){var r=e[l];a.startsWith(r)&&(!g||g.length<
r.length)&&(g=r)}g?(k[g].push(a),n[a]=g):b[a]={}}this._cacheInitialized=!0;return this};Ds.prototype.addModuleIdToCache=function(f){this.ensureCache();var k=this.packageToModule,n=this.modulesToPackage,b=this.modulesWithoutPackage;if(n[f])return n[f];if(b[f])return null;for(var e=Object.keys(k),m,a=0;a<e.length;a++){var g=e[a];f.startsWith(g)&&(!m||m.length<g.length)&&(m=g)}if(m)return(k[m]||(k[m]=[])).push(f),n[f]=m;b[f]={};return null};Ds.prototype.removeModuleFromCache=function(f){if(this._cacheInitialized){var k=
this.packageToModule,n=this.modulesToPackage,b=this.modulesWithoutPackage;if(b.hasOwnProperty(f))delete b[f];else if(b=n[f])delete n[f],k[b]&&no.arr.remove(k[b],f)}};Ds.prototype.getPackageURLForModuleId=function(f){return this.modulesToPackage[f]||this.addModuleIdToCache(f)};Ds.prototype.getModuleIdsForPackageURL=function(f){this.ensureCache();return this.packageToModule[f]||[]};no.ModulePackageMapping=Ds;no.default=Ds;var od=lively.FreezerRuntime.recorderFor("lively.modules/index.js");od.changeSystem=
jJ;od.wrapModuleResolution=kJ;od.unwrapModuleResolution=lJ;od.loadedModules=mJ;od.module=tF;od.isModuleLoaded=nJ;od.doesModuleExist=oJ;od.printSystemConfig=pJ;od.whenLoaded=qJ;od.importPackage=rJ;od.registerPackage=sJ;od.removePackage=tJ;od.reloadPackage=uJ;od.getPackages=vJ;od.getPackage=wJ;od.getPackageOfModule=xJ;od.ensurePackage=yJ;od.applyPackageConfig=zJ;od.lookupPackage=AJ;od.moduleSourceChange=BJ;od.requireMap=CJ;od.isHookInstalled=DJ;od.installHook=EJ;od.removeHook=FJ;od.wrapModuleLoad=GJ;
od.unwrapModuleLoad=HJ;od.getSystem=Yl;od.removeSystem=Wn;od.prepareSystem=Tx;od._printSystemConfig=dJ;od._unwrapModuleResolution=Sx;od._wrapModuleResolution=$z;od._whenLoaded=eJ;od._module=kh;od._doesModuleExist=dr;od._isModuleLoaded=zi;od.GLOBAL="undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:void 0;od.defaultSystem=od.defaultSystem||od.prepareSystem(od.GLOBAL.System);var pU=od.defaultSystem;od.System=pU;od.defaultSystem=pU;od.getSystem=Yl;od.getSystem=
Yl;od.removeSystem=Wn;od.removeSystem=Wn;od.loadedModules=mJ;od.loadedModules=mJ;od.printSystemConfig=pJ;od.printSystemConfig=pJ;od.whenLoaded=qJ;od.whenLoaded=qJ;od.changeSystem=jJ;od.changeSystem=jJ;od.module=tF;od.module=tF;od.doesModuleExist=oJ;od.doesModuleExist=oJ;od.isModuleLoaded=nJ;od.isModuleLoaded=nJ;od.unwrapModuleResolution=lJ;od.unwrapModuleResolution=lJ;od.wrapModuleResolution=kJ;od.wrapModuleResolution=kJ;od.Package=Dj;od._getPackage=Le;od._ensurePackage=tf;od.getPackageSpecs=xh;od._applyPackageConfig=
Ie;od._importPackage=hf;od._removePackage=Kf;od._reloadPackage=Ff;od._registerPackage=ag;od._lookupPackage=oe;od.importPackage=rJ;od.importPackage=rJ;od.registerPackage=sJ;od.registerPackage=sJ;od.removePackage=tJ;od.removePackage=tJ;od.reloadPackage=uJ;od.reloadPackage=uJ;od.getPackages=vJ;od.getPackages=vJ;od.getPackage=wJ;od.getPackage=wJ;od.getPackageOfModule=xJ;od.getPackageOfModule=xJ;od.ensurePackage=yJ;od.ensurePackage=yJ;od.applyPackageConfig=zJ;od.applyPackageConfig=zJ;od.lookupPackage=
AJ;od.lookupPackage=AJ;od.PackageRegistry=ej;od.PackageRegistry=ej;od.PackageRegistry=ej;od._moduleSourceChange=je;od.moduleSourceChange=BJ;od.moduleSourceChange=BJ;od.computeRequireMap=nc;od.requireMap=CJ;od.requireMap=CJ;od._isHookInstalled=Lc;od._installHook=yb;od._removeHook=wc;od.isHookInstalled=DJ;od.isHookInstalled=DJ;od.installHook=EJ;od.installHook=EJ;od.removeHook=FJ;od.removeHook=FJ;od._wrapModuleLoad=Kh;od._unwrapModuleLoad=pk;od.wrapModuleLoad=GJ;od.wrapModuleLoad=GJ;od.unwrapModuleLoad=
HJ;od.unwrapModuleLoad=HJ;od.default=Go;od.ExportLookup=Go;od.cjs=FM;od.cjs=FM;od.cjs=FM;od.default=SG;od.semver=SG;od.ImportInjector=Ot;od.scripting=od.defaultSystem._scripting={module:od._module,ensurePackage:od._ensurePackage,registerPackage:od._registerPackage,importPackage:od._importPackage,lookupPackage:od._lookupPackage,ImportInjector:Ot};od.defaultClassToFunctionConverterName="initializeES6ClassForLively";od.classRuntime=QD;od.defaultSystem.global[od.defaultClassToFunctionConverterName]=od.classRuntime.initializeClass;
od.classHolder=Tw;od.ModulePackageMapping=Ds;od.classHolder.ModulePackageMapping=od.ModulePackageMapping;od.classHolder.Package=od.Package;od.classHolder.PackageRegistry=od.PackageRegistry;var qU=Da("bI",od.scripting);od.scripting=qU;od.scripting=qU;var GM=Object.freeze({__proto__:null,System:pU,getSystem:Yl,removeSystem:Wn,loadedModules:mJ,printSystemConfig:pJ,whenLoaded:qJ,changeSystem:jJ,module:tF,doesModuleExist:oJ,isModuleLoaded:nJ,unwrapModuleResolution:lJ,wrapModuleResolution:kJ,importPackage:rJ,
registerPackage:sJ,removePackage:tJ,reloadPackage:uJ,getPackages:vJ,getPackage:wJ,getPackageOfModule:xJ,ensurePackage:yJ,applyPackageConfig:zJ,lookupPackage:AJ,PackageRegistry:ej,moduleSourceChange:BJ,requireMap:CJ,isHookInstalled:DJ,installHook:EJ,removeHook:FJ,wrapModuleLoad:GJ,unwrapModuleLoad:HJ,ExportLookup:Go,cjs:FM,semver:SG,scripting:qU});Da("U",GM);var Fn=lively.FreezerRuntime.recorderFor("lively.morphic/object-migration.js");Fn.isReference=RP;Fn.removeUnreachableObjects=Dm;Fn.obj=Ag;Fn.Path=
Ah;Fn.connect=rl;Fn.disconnectAll=jt;Fn.isReference=RP;Fn.isReference=RP;var NC=[{date:"2017-04-08",name:"Text and Label textAndAttributes format change",description:"\nChanging the format from\n  [[string1, attr1_1, attr1_2], [string2, attr2_1, attr2_2], ...]\nto\n  [string1, attr1, string2, attr2, ...].\n    ",snapshotConverter:function(f){var k=f.snapshot,n;for(n in k){var b=k[n],e=b.props&&b.props.textAndAttributes;if(e){var m=e.value;if(!Array.isArray(m))console.warn("object migrator found textAndAttributes field but it is not an Array!");
else if(m.length&&"string"!==typeof m[0]){m=[].concat.apply([],m);for(var a=0;a<m.length;a+=2){var g=m[a+1];g&&Array.isArray(g)&&(m[a+1]=Object.assign.apply(Object,[{}].concat($jscomp.arrayFromIterable(g))))}b.props.textAndAttributes=Object.assign({},e,{value:m})}}}return f}},{date:"2017-04-29",name:"Window button fix",description:'\nA recent change in the structure of windows, that now adds a "button wrapper"\nmorph breaks old windows without it.\n',objectConverter:function(f,k){(k=k.refForId(f.id).realObj)&&
k.isMorph&&k.withAllSubmorphsDo(function(n){n.isWindow&&(n.submorphs.some(function(b){return"button wrapper"===b.name})&&n.get("button wrapper").submorphs.some(function(b){return"window menu button"===b.name})||n.fixControls(),n.minimizedBounds=null,Fn.disconnectAll(n.get("minimize")),Fn.connect(n.get("minimize"),"onMouseDown",n,"minimized",{updater:function(b){b(!this.targetObj.minimized)}}))});return f}},{date:"2017-05-03",name:"Style Sheet Status Fix",description:"\nState management of the style sheets has changes substantially, moving all of the style sheets that are being applied to the world.\n",
snapshotConverter:function(f){var k=f.id,n=f.snapshot,b;for(b in n){var e=n[b].props;e&&e.styleSheets&&(e.styleSheets.value||(e.styleSheets.value=[]),e.styleSheets.value=e.styleSheets.value&&e.styleSheets.value.filter(function(m){m=n[m.id];var a=n[m.props.rules.value.id];return!m.props.styledMorphs&&!("lively.serializer-class-info"in a)}))}Fn.removeUnreachableObjects([k],n);return f}},{date:"2017-05-22",name:"Removal of ChromeTheme and GithubTheme",description:"\nFor now only a simple default theme...\n",
snapshotConverter:function(f){var k=f.snapshot,n;for(n in k){var b=k[n],e=b["lively.serializer-class-info"];e&&("ChromeTheme"===e.className||"GithubTheme"===e.className?(e.className="DefaultTheme",e.module.pathInPackage="ide/themes/default.js"):"JavaScriptTokenizer"===e.className&&delete b["lively.serializer-class-info"])}return f}},{date:"2017-06-20",name:"Unwrapped Style Sheet Props",description:"Style Sheets now store foldable props in their nested format.",objectConverter:function(f,k){(k=k.refForId(f.id).realObj)&&
k.isMorph&&k.withAllSubmorphsDo(function(n){n.styleSheets&&0<n.styleSheets.length&&n.styleSheets.forEach(function(b){for(var e in Fn.obj.dissoc(b.rules,["_rev"]))b.rules[e]=b.unwrapFoldedProps(b.rules[e])})});return f}},{date:"2017-07-13",name:"Renamed style-rules.js to style-sheets.js",snapshotConverter:function(f){var k=f.snapshot,n;for(n in k){var b=k[n]["lively.serializer-class-info"];b&&"StyleSheet"===b.className&&(b.module.pathInPackage="style-sheets.js")}return f}},{date:"2017-07-26",name:"components, ide, and halo extraction",
snapshotConverter:function(f){var k=f.snapshot,n=f.packages,b=n&&n["local://lively-object-modules/"]||{};n=[["lively.morphic/halo","lively.halos"],["lively.morphic/components/markers.js","lively.halos"],["lively.morphic/components/icons.js","lively.morphic"],["lively.morphic/components/loading-indicator.js","lively.components",function(A){return"{"+A+"}"}],["lively.morphic/components","lively.components"],["lively.components/markers.js","lively.halos"],["lively.morphic/ide","lively.ide"],["lively.morphic/text/ui.js",
"lively.ide",null,"text/ui.js"]];for(var e in b){for(var m=b[e]["index.js"],a=$jscomp.makeIterator(n),g=a.next();!g.done;g=a.next()){var l=$jscomp.makeIterator(g.value),r=l.next().value;g=l.next().value;if(l=l.next().value){r=new RegExp('(import\\s)(.*)(\\sfrom \\"'+r+")","g");var v=r.exec(m);v&&(m=m.replace(r,"import "+l(v[2])+'from "'+g))}else m=m.replace(new RegExp(r,"g"),g)}b[e]["index.js"]=m}for(var y in k)if((e=k[y]["lively.serializer-class-info"])&&e.module)for(b=e.module.package.name+"/"+
e.module.pathInPackage,m=$jscomp.makeIterator(n),a=m.next();!a.done;a=m.next())if(l=$jscomp.makeIterator(a.value),a=l.next().value,g=l.next().value,l.next(),l=l.next().value,b.includes(a)){e.module.package.name=g;e.module.package.version="0.1.0";e.module.pathInPackage=l||b.substring(b.indexOf(a)+a.length+1)||"index.js";break}return f}},{date:"2017-10-16",name:"change scroll implementation of list items",objectConverter:function(f,k){k=$jscomp.makeIterator(k.objectRefs());for(var n=k.next();!n.done;n=
k.next())n=n.value.realObj,n.isList&&"function"===typeof n.initializeSubmorphs&&n.initializeSubmorphs();return f}},{date:"2017-10-30",name:"change implementation of tree",snapshotConverter:function(f){var k=f.snapshot,n;for(n in k){var b=k[n],e=b["lively.serializer-class-info"];e&&e.module&&("Tree"==e.className&&b.props.submorphs&&(b.props.submorphs.value=[]),"TreeNode"==e.className&&delete k[n],"InspectorTreeData"==e.className&&delete k[n],["PropertyNode","InspectionNode","MorphNode","FoldedNode"].includes(e.className)&&
(e.module.pathInPackage="js/inspector/context.js"),"nodeItemContainer"==b.props.name&&delete k[n])}return f}},{date:"2019-02-17",name:"change storage of commit metadata",snapshotConverter:function(f){var k=f.id,n=f.snapshot;Object.values(n).map(function(b){if(b.props.metadata&&Fn.isReference(b.props.metadata.value)&&(b=n[b.props.metadata.value.id],b.props.commit&&Fn.isReference(b.props.commit.value))){var e=n[b.props.commit.value.id].props;b.props.commit.value='__lv_expr__:({type: "'+e.type.value+
'", name: "'+e.name.value+'", _id: "'+e._id.value+'"})'}});Fn.removeUnreachableObjects([k],n);return f}},{date:"2019-07-25",name:"world superclass extraction",snapshotConverter:function(f){var k=f.packages,n,b=Fn.Path(["local://lively-object-modules/","EmptyWorld","index.js"]);if(n=b.get(k))n=n.replace('import { World, morph } from "lively.morphic";','import { morph } from "lively.morphic";\nimport { LivelyWorld as World } from "lively.ide/world.js"').replace('import { World } from "lively.morphic";',
'import { LivelyWorld as World } from "lively.ide/world.js"'),b.set(k,n);return f}},{date:"2019-08-05",name:"remove Camphor from system",snapshotConverter:function(f){Object.values(f.snapshot).map(function(k){k.props.fontFamily&&"Camphor"==k.props.fontFamily.value&&(k.props.fontFamily.value="Nunito")});return f}},{date:"2020-10-09",name:"remove style guide",snapshotConverter:function(f){Object.values(f.snapshot).map(function(k){k.props.master&&"string"==typeof k.props.master.value&&(k.props.master.value=
k.props.master.value.split("styleguide://style guide").join("styleguide://System"))});return f}}];Fn.migrations=NC;Fn.migrations=NC;Fn.migrations=NC;var qf=lively.FreezerRuntime.recorderFor("lively.morphic/serialization.js");qf.normalizeOptions=function(f){f=Object.assign({reinitializeIds:!1},f);f.reinitializeIds&&(f.reinitializeIds="function"===typeof f.reinitializeIds?f.reinitializeIds:function(k,n){return n.realObj.isMorph?qf.newMorphId(n.realObj.constructor):null});return f};qf.serializeMorph=
uF;qf.deserializeMorph=vF;qf.loadWorldFromResource=IJ;qf.saveWorldToResource=SP;qf.copyMorph=JJ;qf.createMorphSnapshot=aA;qf.loadMorphFromSnapshot=Uu;qf.resourceToJSON=tZ;qf.findPackagesInFileSpec=uZ;qf.packagesOfSnapshot=TP;qf.loadPackagesAndModulesOfSnapshot=wF;qf.findRequiredPackagesOfSnapshot=KJ;qf.requiredModulesOfSnapshot=lt;qf.deserializeWithMigrations=ei;qf.serialize=Ou;qf.MorphicEnv=qs;qf.resource=la;qf.newMorphId=Ta;qf.morph=sa;qf.pathForBrowserHistory=ca;qf.serializeMorph=uF;qf.serializeMorph=
uF;qf.deserializeMorph=vF;qf.deserializeMorph=vF;qf.loadWorldFromResource=IJ;qf.loadWorldFromResource=IJ;qf.saveWorldToResource=SP;qf.saveWorldToResource=SP;qf.copyMorph=JJ;qf.copyMorph=JJ;qf.modules=GM;qf.createFiles=q;qf.promise=zh;qf.graph=xu;qf.arr=$f;qf.migrations=NC;var TD=qf.modules;qf.registerPackage=TD.registerPackage;qf.module=TD.module;qf.getPackage=TD.getPackage;qf.ensurePackage=TD.ensurePackage;qf.lookupPackage=TD.lookupPackage;qf.semver=TD.semver;qf.objectScriptingEnabled=!1;qf.createMorphSnapshot=
aA;qf.createMorphSnapshot=aA;qf.loadMorphFromSnapshot=Uu;qf.loadMorphFromSnapshot=Uu;qf.packagesOfSnapshot=TP;qf.packagesOfSnapshot=TP;qf.loadPackagesAndModulesOfSnapshot=wF;qf.loadPackagesAndModulesOfSnapshot=wF;qf.findRequiredPackagesOfSnapshot=KJ;qf.findRequiredPackagesOfSnapshot=KJ;var wv="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,cla={},M6=wv.MutationObserver||wv.WebKitMutationObserver;if(M6){var N6=0,dla=new M6(LJ),O6=wv.document.createTextNode("");dla.observe(O6,
{characterData:!0});var rU=function(){O6.data=N6=++N6%2}}else if(wv.setImmediate||"undefined"===typeof wv.MessageChannel)rU="document"in wv&&"onreadystatechange"in wv.document.createElement("script")?function(){var f=wv.document.createElement("script");f.onreadystatechange=function(){LJ();f.onreadystatechange=null;f.parentNode.removeChild(f);f=null};wv.document.documentElement.appendChild(f)}:function(){setTimeout(LJ,0)};else{var P6=new wv.MessageChannel;P6.port1.onmessage=LJ;rU=function(){P6.port2.postMessage(0)}}var UP,
xF=[],ela=cla=function(f){1!==xF.push(f)||UP||rU()},sU={},Q6="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(Q6){var R6=new Uint8Array(16);sU=function(){Q6(R6);return R6}}else{var S6=Array(16);sU=function(){for(var f=0,k;16>f;f++)0===(f&3)&&(k=4294967296*Math.random()),S6[f]=k>>>((f&3)<<3)&255;return S6}}for(var T6=sU,fla={},Ho=[],HM=
0;256>HM;++HM)Ho[HM]=(HM+256).toString(16).substr(1);var U6=fla=function(f,k){k=k||0;return[Ho[f[k++]],Ho[f[k++]],Ho[f[k++]],Ho[f[k++]],"-",Ho[f[k++]],Ho[f[k++]],"-",Ho[f[k++]],Ho[f[k++]],"-",Ho[f[k++]],Ho[f[k++]],"-",Ho[f[k++]],Ho[f[k++]],Ho[f[k++]],Ho[f[k++]],Ho[f[k++]],Ho[f[k++]]].join("")},gla={},V6,tU,uU=0,vU=0,hla=gla=function(f,k,n){n=k&&n||0;var b=k||[];f=f||{};var e=f.node||V6,m=void 0!==f.clockseq?f.clockseq:tU;if(null==e||null==m){var a=T6();null==e&&(e=V6=[a[0]|1,a[1],a[2],a[3],a[4],a[5]]);
null==m&&(m=tU=(a[6]<<8|a[7])&16383)}a=void 0!==f.msecs?f.msecs:(new Date).getTime();var g=void 0!==f.nsecs?f.nsecs:vU+1,l=a-uU+(g-vU)/1E4;0>l&&void 0===f.clockseq&&(m=m+1&16383);(0>l||a>uU)&&void 0===f.nsecs&&(g=0);if(1E4<=g)throw Error("uuid.v1(): Can't create more than 10M uuids/sec");uU=a;vU=g;tU=m;a+=122192928E5;f=(1E4*(a&268435455)+g)%4294967296;b[n++]=f>>>24&255;b[n++]=f>>>16&255;b[n++]=f>>>8&255;b[n++]=f&255;f=a/4294967296*1E4&268435455;b[n++]=f>>>8&255;b[n++]=f&255;b[n++]=f>>>24&15|16;b[n++]=
f>>>16&255;b[n++]=m>>>8|128;b[n++]=m&255;for(m=0;6>m;++m)b[n+m]=e[m];return k?k:U6(b)},W6={};W6=function(f,k,n){n=k&&n||0;"string"==typeof f&&(k="binary"===f?Array(16):null,f=null);f=f||{};f=f.random||(f.rng||T6)();f[6]=f[6]&15|64;f[8]=f[8]&63|128;if(k)for(var b=0;16>b;++b)k[n+b]=f[b];return k||U6(f)};var ila={},wU=W6;wU.v1=hla;var jla=ila=wU.v4=wU,Yh="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,kla={},lla=kla=function(f){function k(v,y){var A=v[0],E=v[1],F=v[2],
H=v[3];A+=(E&F|~E&H)+y[0]-680876936|0;A=(A<<7|A>>>25)+E|0;H+=(A&E|~A&F)+y[1]-389564586|0;H=(H<<12|H>>>20)+A|0;F+=(H&A|~H&E)+y[2]+606105819|0;F=(F<<17|F>>>15)+H|0;E+=(F&H|~F&A)+y[3]-1044525330|0;E=(E<<22|E>>>10)+F|0;A+=(E&F|~E&H)+y[4]-176418897|0;A=(A<<7|A>>>25)+E|0;H+=(A&E|~A&F)+y[5]+1200080426|0;H=(H<<12|H>>>20)+A|0;F+=(H&A|~H&E)+y[6]-1473231341|0;F=(F<<17|F>>>15)+H|0;E+=(F&H|~F&A)+y[7]-45705983|0;E=(E<<22|E>>>10)+F|0;A+=(E&F|~E&H)+y[8]+1770035416|0;A=(A<<7|A>>>25)+E|0;H+=(A&E|~A&F)+y[9]-1958414417|
0;H=(H<<12|H>>>20)+A|0;F+=(H&A|~H&E)+y[10]-42063|0;F=(F<<17|F>>>15)+H|0;E+=(F&H|~F&A)+y[11]-1990404162|0;E=(E<<22|E>>>10)+F|0;A+=(E&F|~E&H)+y[12]+1804603682|0;A=(A<<7|A>>>25)+E|0;H+=(A&E|~A&F)+y[13]-40341101|0;H=(H<<12|H>>>20)+A|0;F+=(H&A|~H&E)+y[14]-1502002290|0;F=(F<<17|F>>>15)+H|0;E+=(F&H|~F&A)+y[15]+1236535329|0;E=(E<<22|E>>>10)+F|0;A+=(E&H|F&~H)+y[1]-165796510|0;A=(A<<5|A>>>27)+E|0;H+=(A&F|E&~F)+y[6]-1069501632|0;H=(H<<9|H>>>23)+A|0;F+=(H&E|A&~E)+y[11]+643717713|0;F=(F<<14|F>>>18)+H|0;E+=(F&
A|H&~A)+y[0]-373897302|0;E=(E<<20|E>>>12)+F|0;A+=(E&H|F&~H)+y[5]-701558691|0;A=(A<<5|A>>>27)+E|0;H+=(A&F|E&~F)+y[10]+38016083|0;H=(H<<9|H>>>23)+A|0;F+=(H&E|A&~E)+y[15]-660478335|0;F=(F<<14|F>>>18)+H|0;E+=(F&A|H&~A)+y[4]-405537848|0;E=(E<<20|E>>>12)+F|0;A+=(E&H|F&~H)+y[9]+568446438|0;A=(A<<5|A>>>27)+E|0;H+=(A&F|E&~F)+y[14]-1019803690|0;H=(H<<9|H>>>23)+A|0;F+=(H&E|A&~E)+y[3]-187363961|0;F=(F<<14|F>>>18)+H|0;E+=(F&A|H&~A)+y[8]+1163531501|0;E=(E<<20|E>>>12)+F|0;A+=(E&H|F&~H)+y[13]-1444681467|0;A=(A<<
5|A>>>27)+E|0;H+=(A&F|E&~F)+y[2]-51403784|0;H=(H<<9|H>>>23)+A|0;F+=(H&E|A&~E)+y[7]+1735328473|0;F=(F<<14|F>>>18)+H|0;E+=(F&A|H&~A)+y[12]-1926607734|0;E=(E<<20|E>>>12)+F|0;A+=(E^F^H)+y[5]-378558|0;A=(A<<4|A>>>28)+E|0;H+=(A^E^F)+y[8]-2022574463|0;H=(H<<11|H>>>21)+A|0;F+=(H^A^E)+y[11]+1839030562|0;F=(F<<16|F>>>16)+H|0;E+=(F^H^A)+y[14]-35309556|0;E=(E<<23|E>>>9)+F|0;A+=(E^F^H)+y[1]-1530992060|0;A=(A<<4|A>>>28)+E|0;H+=(A^E^F)+y[4]+1272893353|0;H=(H<<11|H>>>21)+A|0;F+=(H^A^E)+y[7]-155497632|0;F=(F<<16|
F>>>16)+H|0;E+=(F^H^A)+y[10]-1094730640|0;E=(E<<23|E>>>9)+F|0;A+=(E^F^H)+y[13]+681279174|0;A=(A<<4|A>>>28)+E|0;H+=(A^E^F)+y[0]-358537222|0;H=(H<<11|H>>>21)+A|0;F+=(H^A^E)+y[3]-722521979|0;F=(F<<16|F>>>16)+H|0;E+=(F^H^A)+y[6]+76029189|0;E=(E<<23|E>>>9)+F|0;A+=(E^F^H)+y[9]-640364487|0;A=(A<<4|A>>>28)+E|0;H+=(A^E^F)+y[12]-421815835|0;H=(H<<11|H>>>21)+A|0;F+=(H^A^E)+y[15]+530742520|0;F=(F<<16|F>>>16)+H|0;E+=(F^H^A)+y[2]-995338651|0;E=(E<<23|E>>>9)+F|0;A+=(F^(E|~H))+y[0]-198630844|0;A=(A<<6|A>>>26)+E|
0;H+=(E^(A|~F))+y[7]+1126891415|0;H=(H<<10|H>>>22)+A|0;F+=(A^(H|~E))+y[14]-1416354905|0;F=(F<<15|F>>>17)+H|0;E+=(H^(F|~A))+y[5]-57434055|0;E=(E<<21|E>>>11)+F|0;A+=(F^(E|~H))+y[12]+1700485571|0;A=(A<<6|A>>>26)+E|0;H+=(E^(A|~F))+y[3]-1894986606|0;H=(H<<10|H>>>22)+A|0;F+=(A^(H|~E))+y[10]-1051523|0;F=(F<<15|F>>>17)+H|0;E+=(H^(F|~A))+y[1]-2054922799|0;E=(E<<21|E>>>11)+F|0;A+=(F^(E|~H))+y[8]+1873313359|0;A=(A<<6|A>>>26)+E|0;H+=(E^(A|~F))+y[15]-30611744|0;H=(H<<10|H>>>22)+A|0;F+=(A^(H|~E))+y[6]-1560198380|
0;F=(F<<15|F>>>17)+H|0;E+=(H^(F|~A))+y[13]+1309151649|0;E=(E<<21|E>>>11)+F|0;A+=(F^(E|~H))+y[4]-145523070|0;A=(A<<6|A>>>26)+E|0;H+=(E^(A|~F))+y[11]-1120210379|0;H=(H<<10|H>>>22)+A|0;F+=(A^(H|~E))+y[2]+718787259|0;F=(F<<15|F>>>17)+H|0;E+=(H^(F|~A))+y[9]-343485551|0;v[0]=A+v[0]|0;v[1]=((E<<21|E>>>11)+F|0)+v[1]|0;v[2]=F+v[2]|0;v[3]=H+v[3]|0}function n(v){var y=[],A;for(A=0;64>A;A+=4)y[A>>2]=v.charCodeAt(A)+(v.charCodeAt(A+1)<<8)+(v.charCodeAt(A+2)<<16)+(v.charCodeAt(A+3)<<24);return y}function b(v){var y=
[],A;for(A=0;64>A;A+=4)y[A>>2]=v[A]+(v[A+1]<<8)+(v[A+2]<<16)+(v[A+3]<<24);return y}function e(v){var y=v.length,A=[1732584193,-271733879,-1732584194,271733878],E;for(E=64;E<=y;E+=64)k(A,n(v.substring(E-64,E)));v=v.substring(E-64);var F=v.length;var H=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(E=0;E<F;E+=1)H[E>>2]|=v.charCodeAt(E)<<(E%4<<3);H[E>>2]|=128<<(E%4<<3);if(55<E)for(k(A,H),E=0;16>E;E+=1)H[E]=0;y=(8*y).toString(16).match(/(.*?)(.{0,8})$/);v=parseInt(y[2],16);y=parseInt(y[1],16)||0;H[14]=v;H[15]=
y;k(A,H);return A}function m(v){var y;for(y=0;y<v.length;y+=1){var A=y,E,F=v[y],H="";for(E=0;4>E;E+=1)H+=r[F>>8*E+4&15]+r[F>>8*E&15];v[A]=H}return v.join("")}function a(v){/[\u0080-\uFFFF]/.test(v)&&(v=unescape(encodeURIComponent(v)));return v}function g(v){var y=[],A=v.length,E;for(E=0;E<A-1;E+=2)y.push(parseInt(v.substr(E,2),16));return String.fromCharCode.apply(String,y)}function l(){this.reset()}var r="0123456789abcdef".split("");m(e("hello"));"undefined"===typeof ArrayBuffer||ArrayBuffer.prototype.slice||
function(){function v(y,A){y=y|0||0;return 0>y?Math.max(y+A,0):Math.min(y,A)}ArrayBuffer.prototype.slice=function(y,A){var E=(this||Yh).byteLength;y=v(y,E);var F=E;A!==f&&(F=v(A,E));if(y>F)return new ArrayBuffer(0);F-=y;A=new ArrayBuffer(F);E=new Uint8Array(A);y=new Uint8Array(this||Yh,y,F);E.set(y);return A}}();l.prototype.append=function(v){this.appendBinary(a(v));return this||Yh};l.prototype.appendBinary=function(v){(this||Yh)._buff+=v;(this||Yh)._length+=v.length;v=(this||Yh)._buff.length;var y;
for(y=64;y<=v;y+=64)k((this||Yh)._hash,n((this||Yh)._buff.substring(y-64,y)));(this||Yh)._buff=(this||Yh)._buff.substring(y-64);return this||Yh};l.prototype.end=function(v){var y=(this||Yh)._buff,A=y.length,E,F=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(E=0;E<A;E+=1)F[E>>2]|=y.charCodeAt(E)<<(E%4<<3);this._finish(F,A);y=m((this||Yh)._hash);v&&(y=g(y));this.reset();return y};l.prototype.reset=function(){(this||Yh)._buff="";(this||Yh)._length=0;(this||Yh)._hash=[1732584193,-271733879,-1732584194,271733878];
return this||Yh};l.prototype.getState=function(){return{buff:(this||Yh)._buff,length:(this||Yh)._length,hash:(this||Yh)._hash}};l.prototype.setState=function(v){(this||Yh)._buff=v.buff;(this||Yh)._length=v.length;(this||Yh)._hash=v.hash;return this||Yh};l.prototype.destroy=function(){delete (this||Yh)._hash;delete (this||Yh)._buff;delete (this||Yh)._length};l.prototype._finish=function(v,y){v[y>>2]|=128<<(y%4<<3);if(55<y)for(k((this||Yh)._hash,v),y=0;16>y;y+=1)v[y]=0;var A=8*(this||Yh)._length;A=
A.toString(16).match(/(.*?)(.{0,8})$/);y=parseInt(A[2],16);A=parseInt(A[1],16)||0;v[14]=y;v[15]=A;k((this||Yh)._hash,v)};l.hash=function(v,y){return l.hashBinary(a(v),y)};l.hashBinary=function(v,y){v=e(v);v=m(v);return y?g(v):v};l.ArrayBuffer=function(){this.reset()};l.ArrayBuffer.prototype.append=function(v){var y=(this||Yh)._buff.buffer,A=new Uint8Array(y.byteLength+v.byteLength);A.set(new Uint8Array(y));A.set(new Uint8Array(v),y.byteLength);y=A.length;(this||Yh)._length+=v.byteLength;for(v=64;v<=
y;v+=64)k((this||Yh)._hash,b(A.subarray(v-64,v)));(this||Yh)._buff=v-64<y?new Uint8Array(A.buffer.slice(v-64)):new Uint8Array(0);return this||Yh};l.ArrayBuffer.prototype.end=function(v){var y=(this||Yh)._buff,A=y.length,E=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],F;for(F=0;F<A;F+=1)E[F>>2]|=y[F]<<(F%4<<3);this._finish(E,A);y=m((this||Yh)._hash);v&&(y=g(y));this.reset();return y};l.ArrayBuffer.prototype.reset=function(){(this||Yh)._buff=new Uint8Array(0);(this||Yh)._length=0;(this||Yh)._hash=[1732584193,-271733879,
-1732584194,271733878];return this||Yh};l.ArrayBuffer.prototype.getState=function(){var v=l.prototype.getState.call(this||Yh);v.buff=String.fromCharCode.apply(null,new Uint8Array(v.buff));return v};l.ArrayBuffer.prototype.setState=function(v){var y=v.buff,A=y.length,E=new ArrayBuffer(A);E=new Uint8Array(E);var F;for(F=0;F<A;F+=1)E[F]=y.charCodeAt(F);v.buff=E;return l.prototype.setState.call(this||Yh,v)};l.ArrayBuffer.prototype.destroy=l.prototype.destroy;l.ArrayBuffer.prototype._finish=l.prototype._finish;
l.ArrayBuffer.hash=function(v,y){var A=new Uint8Array(v),E=A.length;v=[1732584193,-271733879,-1732584194,271733878];var F;for(F=64;F<=E;F+=64)k(v,b(A.subarray(F-64,F)));A=F-64<E?A.subarray(F-64):new Uint8Array(0);var H=A.length;var I=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(F=0;F<H;F+=1)I[F>>2]|=A[F]<<(F%4<<3);I[F>>2]|=128<<(F%4<<3);if(55<F)for(k(v,I),F=0;16>F;F+=1)I[F]=0;E=(8*E).toString(16).match(/(.*?)(.{0,8})$/);A=parseInt(E[2],16);E=parseInt(E[1],16)||0;I[14]=A;I[15]=E;k(v,I);v=m(v);return y?g(v):
v};return l}(),UD={stringify:function(f){var k=[];k.push({obj:f});f="";for(var n,b,e,m,a,g,l;n=k.pop();)if(b=n.obj,e=n.prefix||"",n=n.val||"",f+=e,n)f+=n;else if("object"!==typeof b)f+="undefined"===typeof b?null:JSON.stringify(b);else if(null===b)f+="null";else if(Array.isArray(b)){k.push({val:"]"});for(e=b.length-1;0<=e;e--)n=0===e?"":",",k.push({obj:b[e],prefix:n});k.push({val:"["})}else{n=[];for(m in b)b.hasOwnProperty(m)&&n.push(m);k.push({val:"}"});for(e=n.length-1;0<=e;e--)a=n[e],g=b[a],l=
0<e?",":"",l+=JSON.stringify(a)+":",k.push({obj:g,prefix:l});k.push({val:"{"})}return f},parse:function(f){for(var k=[],n=[],b=0,e,m,a,g;;)if(e=f[b++],"}"===e||"]"===e||"undefined"===typeof e){if(1===k.length)return k.pop();OC(k.pop(),k,n)}else switch(e){case " ":case "\t":case "\n":case ":":case ",":break;case "n":b+=3;OC(null,k,n);break;case "t":b+=3;OC(!0,k,n);break;case "f":b+=4;OC(!1,k,n);break;case "0":case "1":case "2":case "3":case "4":case "5":case "6":case "7":case "8":case "9":case "-":e=
"";for(b--;;)if(m=f[b++],/[\d\.\-e\+]/.test(m))e+=m;else{b--;break}OC(parseFloat(e),k,n);break;case '"':e="";m=void 0;for(a=0;;)if(g=f[b++],'"'!==g||"\\"===m&&1===a%2)e+=g,m=g,"\\"===m?a++:a=0;else break;OC(JSON.parse('"'+e+'"'),k,n);break;case "[":e={element:[],index:k.length};k.push(e.element);n.push(e);break;case "{":e={element:{},index:k.length};k.push(e.element);n.push(e);break;default:throw Error("unexpectedly reached end of input: "+e);}}},mla={},xU=mla=function(f){return function(){var k=
arguments.length;if(k){for(var n=[],b=-1;++b<k;)n[b]=arguments[b];return f.call(this,n)}return f.call(this,[])}},nla={},vl=nla="function"===typeof Object.create?function(f,k){k&&(f.super_=k,f.prototype=Object.create(k.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}))}:function(f,k){if(k){f.super_=k;var n=function(){};n.prototype=k.prototype;f.prototype=new n;f.prototype.constructor=f}},VD="object"==typeof Reflect?Reflect:null,X6=VD&&"function"==typeof VD.apply?VD.apply:
function(f,k,n){return Function.prototype.apply.call(f,k,n)};var ola=VD&&"function"==typeof VD.ownKeys?VD.ownKeys:Object.getOwnPropertySymbols?function(f){return Object.getOwnPropertyNames(f).concat(Object.getOwnPropertySymbols(f))}:function(f){return Object.getOwnPropertyNames(f)};var Y6=Number.isNaN||function(f){return f!=f};Ak.EventEmitter=Ak;Ak.prototype._events=void 0;Ak.prototype._eventsCount=0;Ak.prototype._maxListeners=void 0;var Z6=10;Object.defineProperty(Ak,"defaultMaxListeners",{enumerable:!0,
get:function(){return Z6},set:function(f){if("number"!=typeof f||0>f||Y6(f))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+f+".");Z6=f}});Ak.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0);this._maxListeners=this._maxListeners||void 0};Ak.prototype.setMaxListeners=function(f){if("number"!=typeof f||0>f||Y6(f))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+
f+".");return this._maxListeners=f,this};Ak.prototype.getMaxListeners=function(){return void 0===this._maxListeners?Ak.defaultMaxListeners:this._maxListeners};Ak.prototype.emit=function(f){for(var k=[],n=1;n<arguments.length;n++)k.push(arguments[n]);n="error"===f;var b=this._events;if(void 0!==b)n=n&&void 0===b.error;else if(!n)return!1;if(n){var e;if(0<k.length&&(e=k[0]),e instanceof Error)throw e;k=Error("Unhandled error."+(e?" ("+e.message+")":""));throw k.context=e,k;}n=b[f];if(void 0===n)return!1;
if("function"==typeof n)X6(n,this,k);else for(e=n.length,b=yZ(n,e),n=0;n<e;++n)X6(b[n],this,k);return!0};Ak.prototype.addListener=function(f,k){return vZ(this,f,k,!1)};Ak.prototype.on=Ak.prototype.addListener;Ak.prototype.prependListener=function(f,k){return vZ(this,f,k,!0)};Ak.prototype.once=function(f,k){return MJ(k),this.on(f,wZ(this,f,k)),this};Ak.prototype.prependOnceListener=function(f,k){return MJ(k),this.prependListener(f,wZ(this,f,k)),this};Ak.prototype.removeListener=function(f,k){var n,
b,e;if((MJ(k),void 0===(b=this._events))||void 0===(n=b[f]))return this;if(n===k||n.listener===k)0==--this._eventsCount?this._events=Object.create(null):(delete b[f],b.removeListener&&this.emit("removeListener",f,n.listener||k));else if("function"!=typeof n){var m=-1;for(e=n.length-1;0<=e;e--)if(n[e]===k||n[e].listener===k){var a=n[e].listener;m=e;break}if(0>m)return this;if(0===m)n.shift();else{for(;m+1<n.length;m++)n[m]=n[m+1];n.pop();!0}1===n.length&&(b[f]=n[0]);void 0!==b.removeListener&&this.emit("removeListener",
f,a||k)}return this};Ak.prototype.off=Ak.prototype.removeListener;Ak.prototype.removeAllListeners=function(f){var k,n;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[f]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[f]),this;if(0===arguments.length){var b=Object.keys(n);for(n=0;n<b.length;++n)"removeListener"!==(k=b[n])&&this.removeAllListeners(k);return this.removeAllListeners("removeListener"),
this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(k=n[f]))this.removeListener(f,k);else if(void 0!==k)for(n=k.length-1;0<=n;n--)this.removeListener(f,k[n]);return this};Ak.prototype.listeners=function(f){return xZ(this,f,!0)};Ak.prototype.rawListeners=function(f){return xZ(this,f,!1)};Ak.listenerCount=function(f,k){return"function"==typeof f.listenerCount?f.listenerCount(k):zZ.call(f,k)};Ak.prototype.listenerCount=zZ;Ak.prototype.eventNames=function(){return 0<this._eventsCount?
ola(this._events):[]};var $u=Ak,$6="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,pla={},VJ=tj,Wu=PC(ela),OZ=PC(jla),QJ=PC(lla),h_=PC(UD),QC=PC(xU),Pt=PC(vl),tq=$u;Ux.prototype.get=function(f){return this._store["$"+f]};Ux.prototype.set=function(f,k){this._store["$"+f]=k;return!0};Ux.prototype.has=function(f){return"$"+f in this._store};Ux.prototype.delete=function(f){f="$"+f;var k=f in this._store;delete this._store[f];return k};Ux.prototype.forEach=function(f){for(var k=
Object.keys(this._store),n=0,b=k.length;n<b;n++){var e=k[n],m=this._store[e];e=e.substring(1);f(m,e)}};Object.defineProperty(Ux.prototype,"size",{get:function(){return Object.keys(this._store).length}});yF.prototype.add=function(f){return this._store.set(f,!0)};yF.prototype.has=function(f){return this._store.has(f)};yF.prototype.forEach=function(f){this._store.forEach(function(k,n){f(n)})};Object.defineProperty(yF.prototype,"size",{get:function(){return this._store.size}});if(function(){if("undefined"===
typeof Symbol||"undefined"===typeof Map||"undefined"===typeof Set)return!1;var f=Object.getOwnPropertyDescriptor(Map,Symbol.species);return f&&"get"in f&&Map[Symbol.species]===Map}()){var GF=Set;var er=Map}else GF=yF,er=Ux;var AZ=Function.prototype.toString,Oba=AZ.call(Object);try{localStorage.setItem("_pouch_check_localstorage",1);var AF=!!localStorage.getItem("_pouch_check_localstorage")}catch(f){AF=!1}Pt(RC,tq.EventEmitter);RC.prototype.addListener=function(f,k,n,b){function e(){if(m._listeners[k])if(a)a=
"waiting";else{a=!0;var g=zF(b,"style include_docs attachments conflicts filter doc_ids view since query_params binary return_docs".split(" "));n.changes(g).on("change",function(l){l.seq>b.since&&!b.cancelled&&(b.since=l.seq,b.onChange(l))}).on("complete",function(){"waiting"===a&&Wu(e);a=!1}).on("error",function(){a=!1})}}if(!this._listeners[k]){var m=this,a=!1;this._listeners[k]=e;this.on(f,e)}};RC.prototype.removeListener=function(f,k){k in this._listeners&&(tq.EventEmitter.prototype.removeListener.call(this,
f,this._listeners[k]),delete this._listeners[k])};RC.prototype.notifyLocalWindows=function(f){AF&&(localStorage[f]="a"===localStorage[f]?"b":"a")};RC.prototype.notify=function(f){this.emit(f);this.notifyLocalWindows(f)};var VC="function"===typeof Object.assign?Object.assign:function(f){for(var k=Object(f),n=1;n<arguments.length;n++){var b=arguments[n];if(null!=b)for(var e in b)Object.prototype.hasOwnProperty.call(b,e)&&(k[e]=b[e])}return k};Pt(Wk,Error);Wk.prototype.toString=function(){return JSON.stringify({status:this.status,
name:this.name,message:this.message,reason:this.reason})};new Wk(401,"unauthorized","Name or password is incorrect.");var qla=new Wk(400,"bad_request","Missing JSON list of 'docs'"),rt=new Wk(404,"not_found","missing"),UC=new Wk(409,"conflict","Document update conflict"),HZ=new Wk(400,"bad_request","_id field must contain a string"),Uba=new Wk(412,"missing_id","_id is required for puts"),Tba=new Wk(400,"bad_request","Only reserved document ids may start with underscore.");new Wk(412,"precondition_failed",
"Database not open");var FZ=new Wk(500,"unknown_error","Database encountered an unknown error"),g_=new Wk(500,"badarg","Some query argument is invalid");new Wk(400,"invalid_request","Request was invalid");var rla=new Wk(400,"query_parse_error","Some query parameter is invalid"),f_=new Wk(500,"doc_validation","Bad special document member"),NJ=new Wk(400,"bad_request","Something wrong with the request"),yU=new Wk(400,"bad_request","Document must be a JSON object");new Wk(404,"not_found","Database not found");
var iQ=new Wk(500,"indexed_db_went_bad","unknown");new Wk(500,"web_sql_went_bad","unknown");new Wk(500,"levelDB_went_went_bad","unknown");new Wk(403,"forbidden","Forbidden by design doc validate_doc_update function");var d_=new Wk(400,"bad_request","Invalid rev format");new Wk(412,"file_exists","The database could not be created, the file already exists.");var Kca=new Wk(412,"missing_stub","A pre-existing attachment stub wasn't found");new Wk(413,"invalid_url","Provided URL is invalid");var KZ="source protocol authority userInfo user password host port relative path directory file query anchor".split(" "),
Wba=/(?:^|&)([^&=]*)=?([^&]*)/g,Vba=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,bca=$6.setImmediate||$6.setTimeout,RJ=OZ.v4;Pt(BF,tq.EventEmitter);BF.prototype.cancel=function(){this.isCancelled=!0;this.db.taskqueue.isReady&&this.emit("cancel")};BF.prototype.validateChanges=function(f){var k=f.complete,n=this;Li._changesFilterPlugin?Li._changesFilterPlugin.validate(f,
function(b){if(b)return k(b);n.doChanges(f)}):n.doChanges(f)};BF.prototype.doChanges=function(f){var k=this,n=f.complete;f=tn(f);"live"in f&&!("continuous"in f)&&(f.continuous=f.live);f.processChange=jca;"latest"===f.since&&(f.since="now");f.since||(f.since=0);if("now"===f.since)this.db.info().then(function(m){k.isCancelled?n(null,{status:"cancelled"}):(f.since=m.update_seq,k.doChanges(f))},n);else{if(Li._changesFilterPlugin){if(Li._changesFilterPlugin.normalize(f),Li._changesFilterPlugin.shouldFilter(this,
f))return Li._changesFilterPlugin.filter(this,f)}else["doc_ids","filter","selector","view"].forEach(function(m){m in f&&$r("warn",'The "'+m+'" option was passed in to changes/replicate, but pouchdb-changes-filter plugin is not installed, so it was ignored. Please install the plugin to enable filtering.')});"descending"in f||(f.descending=!1);f.limit=0===f.limit?1:f.limit;f.complete=n;var b=this.db._changes(f);if(b&&"function"===typeof b.cancel){var e=k.cancel;k.cancel=QC(function(m){b.cancel();e.apply(this,
m)})}}};Pt(tl,tq.EventEmitter);tl.prototype.post=Wm("post",function(f,k,n){"function"===typeof k&&(n=k,k={});if("object"!==typeof f||Array.isArray(f))return n(Si(yU));this.bulkDocs({docs:[f]},k,fQ(n,f._id))});tl.prototype.put=Wm("put",function(f,k,n){function b(){var a=f._rev.split("-"),g=a[1];a=parseInt(a[0],10)+1;var l=NZ();f._revisions={start:a,ids:[l,g]};f._rev=a+"-"+l;k.new_edits=!1}function e(a){"function"===typeof m._put&&!1!==k.new_edits?m._put(f,k,a):m.bulkDocs({docs:[f]},k,fQ(a,f._id))}
"function"===typeof k&&(n=k,k={});if("object"!==typeof f||Array.isArray(f))return n(Si(yU));GZ(f._id);if(dA(f._id)&&"function"===typeof this._putLocal)return f._deleted?this._removeLocal(f,n):this._putLocal(f,n);var m=this;k.force&&f._rev?(b(),e(function(a){n(a,a?null:{ok:!0,id:f._id,rev:f._rev})})):e(n)});tl.prototype.putAttachment=Wm("putAttachment",function(f,k,n,b,e){function m(g){var l="_rev"in g?parseInt(g._rev,10):0;g._attachments=g._attachments||{};g._attachments[k]={content_type:e,data:b,
revpos:++l};return a.put(g)}var a=this;"function"===typeof e&&(e=b,b=n,n=null);"undefined"===typeof e&&(e=b,b=n,n=null);e||$r("warn","Attachment",k,"on document",f,"is missing content_type");return a.get(f).then(function(g){if(g._rev!==n)throw Si(UC);return m(g)},function(g){if(g.reason===rt.message)return m({_id:f});throw g;})});tl.prototype.removeAttachment=Wm("removeAttachment",function(f,k,n,b){var e=this;e.get(f,function(m,a){if(m)b(m);else if(a._rev!==n)b(Si(UC));else{if(!a._attachments)return b();
delete a._attachments[k];0===Object.keys(a._attachments).length&&delete a._attachments;e.put(a,b)}})});tl.prototype.remove=Wm("remove",function(f,k,n,b){"string"===typeof k?(f={_id:f,_rev:k},"function"===typeof n&&(b=n,n={})):"function"===typeof k?(b=k,n={}):(b=n,n=k);n=n||{};n.was_delete=!0;k={_id:f._id,_rev:f._rev||n.rev,_deleted:!0};if(dA(k._id)&&"function"===typeof this._removeLocal)return this._removeLocal(f,b);this.bulkDocs({docs:[k]},n,fQ(b,k._id))});tl.prototype.revsDiff=Wm("revsDiff",function(f,
k,n){function b(l,r){g.has(l)||g.set(l,{missing:[]});g.get(l).missing.push(r)}function e(l,r){var v=f[l].slice(0);cA(r,function(y,A,E,F,H){y=A+"-"+E;A=v.indexOf(y);-1!==A&&(v.splice(A,1),"available"!==H.status&&b(l,y))});v.forEach(function(y){b(l,y)})}"function"===typeof k&&(n=k,k={});var m=Object.keys(f);if(!m.length)return n(null,{});var a=0,g=new er;m.map(function(l){this._getRevisionTree(l,function(r,v){if(r&&404===r.status&&"missing"===r.message)g.set(l,{missing:f[l]});else{if(r)return n(r);
e(l,v)}if(++a===m.length){var y={};g.forEach(function(A,E){y[E]=A});return n(null,y)}})},this)});tl.prototype.bulkGet=Wm("bulkGet",function(f,k){EZ(this,f,k)});tl.prototype.compactDocument=Wm("compactDocument",function(f,k,n){var b=this;this._getRevisionTree(f,function(e,m){if(e)return n(e);var a=mca(m),g=[],l=[];Object.keys(a).forEach(function(r){a[r]>k&&g.push(r)});cA(m,function(r,v,y,A,E){r=v+"-"+y;"available"===E.status&&-1!==g.indexOf(r)&&l.push(r)});b._doCompaction(f,l,n)})});tl.prototype.compact=
Wm("compact",function(f,k){"function"===typeof f&&(k=f,f={});f=f||{};this._compactionQueue=this._compactionQueue||[];this._compactionQueue.push({opts:f,callback:k});1===this._compactionQueue.length&&UZ(this)});tl.prototype._compact=function(f,k){var n=this,b=[];n.changes({return_docs:!1,last_seq:f.last_seq||0}).on("change",function(e){b.push(n.compactDocument(e.id,0))}).on("complete",function(e){var m=e.last_seq;Promise.all(b).then(function(){return PJ(n,"_local/compaction",function(a){return!a.last_seq||
a.last_seq<m?(a.last_seq=m,a):!1})}).then(function(){k(null,{ok:!0})}).catch(k)}).on("error",k)};tl.prototype.get=Wm("get",function(f,k,n){function b(){var l=[],r=e.length;if(!r)return n(null,l);e.forEach(function(v){m.get(f,{rev:v,revs:k.revs,latest:k.latest,attachments:k.attachments,binary:k.binary},function(y,A){if(y)l.push({missing:v});else{y=0;for(var E=l.length;y<E;y++)if(l[y].ok&&l[y].ok._rev===A._rev){var F=!0;break}F||l.push({ok:A})}r--;r||n(null,l)})})}"function"===typeof k&&(n=k,k={});
if("string"!==typeof f)return n(Si(HZ));if(dA(f)&&"function"===typeof this._getLocal)return this._getLocal(f,n);var e=[],m=this;if(k.open_revs)if("all"===k.open_revs)this._getRevisionTree(f,function(l,r){if(l)return n(l);e=dQ(r).map(function(v){return v.rev});b()});else if(Array.isArray(k.open_revs)){e=k.open_revs;for(var a=0;a<e.length;a++){var g=e[a];if("string"!==typeof g||!/^\d+-/.test(g))return n(Si(d_))}b()}else return n(Si(FZ,"function_clause"));else return this._get(f,k,function(l,r){if(l)return l.docId=
f,n(l);var v=r.doc,y=r.metadata,A=r.ctx;k.conflicts&&(r=eQ(y),r.length&&(v._conflicts=r));uw(y,v._rev)&&(v._deleted=!0);if(k.revs||k.revs_info){l=v._rev.split("-");r=parseInt(l[0],10);l=l[1];var E=PZ(y.rev_tree);y=null;for(var F=0;F<E.length;F++){var H=E[F],I=H.ids.map(function(ea){return ea.id}).indexOf(l);if(I===r-1||!y&&-1!==I)y=H}if(!y)return l=Error("invalid rev tree"),l.docId=f,n(l);r=y.ids.map(function(ea){return ea.id}).indexOf(v._rev.split("-")[1])+1;y.ids.splice(r,y.ids.length-r);y.ids.reverse();
k.revs&&(v._revisions={start:y.pos+y.ids.length-1,ids:y.ids.map(function(ea){return ea.id})});if(k.revs_info){var M=y.pos+y.ids.length;v._revs_info=y.ids.map(function(ea){M--;return{rev:M+"-"+ea.id,status:ea.opts.status}})}}if(k.attachments&&v._attachments){var N=v._attachments,W=Object.keys(N).length;if(0===W)return n(null,v);Object.keys(N).forEach(function(ea){this._getAttachment(v._id,ea,N[ea],{rev:v._rev,binary:k.binary,ctx:A},function(Aa,Ma){Aa=v._attachments[ea];Aa.data=Ma;delete Aa.stub;delete Aa.length;
--W||n(null,v)})},m)}else{if(v._attachments)for(var X in v._attachments)v._attachments.hasOwnProperty(X)&&(v._attachments[X].stub=!0);n(null,v)}})});tl.prototype.getAttachment=Wm("getAttachment",function(f,k,n,b){var e=this;n instanceof Function&&(b=n,n={});this._get(f,n,function(m,a){if(m)return b(m);if(a.doc._attachments&&a.doc._attachments[k])n.ctx=a.ctx,n.binary=!0,e._getAttachment(f,k,a.doc._attachments[k],n,b);else return b(Si(rt))})});tl.prototype.allDocs=Wm("allDocs",function(f,k){"function"===
typeof f&&(k=f,f={});f.skip="undefined"!==typeof f.skip?f.skip:0;f.start_key&&(f.startkey=f.start_key);f.end_key&&(f.endkey=f.end_key);if("keys"in f){if(!Array.isArray(f.keys))return k(new TypeError("options.keys must be an array"));var n=["startkey","endkey","key"].filter(function(b){return b in f})[0];if(n){k(Si(rla,"Query parameter `"+n+"` is not compatible with multi-get"));return}if(!Vu(this)&&(nca(f),0===f.keys.length))return this._allDocs({limit:0},k)}return this._allDocs(f,k)});tl.prototype.changes=
function(f,k){"function"===typeof f&&(k=f,f={});f=f||{};f.return_docs="return_docs"in f?f.return_docs:!f.live;return new BF(this,f,k)};tl.prototype.close=Wm("close",function(f){this._closed=!0;this.emit("closed");return this._close(f)});tl.prototype.info=Wm("info",function(f){var k=this;this._info(function(n,b){if(n)return f(n);b.db_name=b.db_name||k.name;b.auto_compaction=!(!k.auto_compaction||Vu(k));b.adapter=k.adapter;f(null,b)})});tl.prototype.id=Wm("id",function(f){return this._id(f)});tl.prototype.type=
function(){return"function"===typeof this._type?this._type():this.adapter};tl.prototype.bulkDocs=Wm("bulkDocs",function(f,k,n){"function"===typeof k&&(n=k,k={});k=k||{};Array.isArray(f)&&(f={docs:f});if(!f||!f.docs||!Array.isArray(f.docs))return n(Si(qla));for(var b=0;b<f.docs.length;++b)if("object"!==typeof f.docs[b]||Array.isArray(f.docs[b]))return n(Si(yU));var e;f.docs.forEach(function(g){g._attachments&&Object.keys(g._attachments).forEach(function(l){var r;(r=e)||(r="_"===l.charAt(0)?l+" is not a valid attachment name, attachment names cannot start with '_'":
!1);e=r;g._attachments[l].content_type||$r("warn","Attachment",l,"on document",g._id,"is missing content_type")})});if(e)return n(Si(NJ,e));"new_edits"in k||(k.new_edits="new_edits"in f?f.new_edits:!0);var m=this;k.new_edits||Vu(m)||f.docs.sort(lca);kca(f.docs);var a=f.docs.map(function(g){return g._id});return this._bulkDocs(f,k,function(g,l){if(g)return n(g);k.new_edits||(l=l.filter(function(v){return v.error}));if(!Vu(m)){g=0;for(var r=l.length;g<r;g++)l[g].id=l[g].id||a[g]}n(null,l)})});tl.prototype.registerDependentDatabase=
Wm("registerDependentDatabase",function(f,k){var n=new this.constructor(f,this.__opts);PJ(this,"_local/_pouch_dependentDbs",function(b){b.dependentDbs=b.dependentDbs||{};if(b.dependentDbs[f])return!1;b.dependentDbs[f]=!0;return b}).then(function(){k(null,{db:n})}).catch(k)});tl.prototype.destroy=Wm("destroy",function(f,k){function n(){b._destroy(f,function(m,a){if(m)return k(m);b._destroyed=!0;b.emit("destroyed");k(null,a||{ok:!0})})}"function"===typeof f&&(k=f,f={});var b=this,e="use_prefix"in b?
b.use_prefix:!0;if(Vu(b))return n();b.get("_local/_pouch_dependentDbs",function(m,a){if(m)return 404!==m.status?k(m):n();var g=b.constructor;m=Object.keys(a.dependentDbs).map(function(l){l=e?l.replace(new RegExp("^"+g.prefix),""):l;return(new g(l,b.__opts)).destroy()});Promise.all(m).then(n,k)})});CF.prototype.execute=function(){var f;if(this.failed)for(;f=this.queue.shift();)f(this.failed);else for(;f=this.queue.shift();)f()};CF.prototype.fail=function(f){this.failed=f;this.execute()};CF.prototype.ready=
function(f){this.isReady=!0;this.db=f;this.execute()};CF.prototype.addTask=function(f){this.queue.push(f);this.failed&&this.execute()};Pt(Li,tl);var Yca="undefined"!==typeof AbortController?AbortController:function(){return{abort:function(){}}},p_=fetch,XC=Headers;Li.adapters={};Li.preferredAdapters=[];Li.prefix="_pouch_";var a7=new tq.EventEmitter;(function(f){Object.keys(tq.EventEmitter.prototype).forEach(function(n){"function"===typeof tq.EventEmitter.prototype[n]&&(f[n]=a7[n].bind(a7))});var k=
f._destructionListeners=new er;f.on("ref",function(n){k.has(n.name)||k.set(n.name,[]);k.get(n.name).push(n)});f.on("unref",function(n){if(k.has(n.name)){var b=k.get(n.name),e=b.indexOf(n);0>e||(b.splice(e,1),1<b.length?k.set(n.name,b):k.delete(n.name))}});f.on("destroyed",function(n){if(k.has(n)){var b=k.get(n);k.delete(n);b.forEach(function(e){e.emit("destroyed",!0)})}})})(Li);Li.adapter=function(f,k,n){k.valid()&&(Li.adapters[f]=k,n&&Li.preferredAdapters.push(f))};Li.plugin=function(f){if("function"===
typeof f)f(Li);else{if("object"!==typeof f||0===Object.keys(f).length)throw Error('Invalid plugin: got "'+f+'", expected an object or a function');Object.keys(f).forEach(function(k){Li.prototype[k]=f[k]})}this.__defaults&&(Li.__defaults=VC({},this.__defaults));return Li};Li.defaults=function(f){function k(n,b){if(!(this instanceof k))return new k(n,b);b=b||{};n&&"object"===typeof n&&(b=n,n=b.name,delete b.name);b=VC({},k.__defaults,b);Li.call(this,n,b)}Pt(k,Li);k.preferredAdapters=Li.preferredAdapters.slice();
Object.keys(Li).forEach(function(n){n in k||(k[n]=Li[n])});k.__defaults=VC({},this.__defaults,f);return k};Li.fetch=function(f,k){return p_(f,k)};var XZ=["$or","$nor","$not"],$Z={$elemMatch:function(f,k,n,b){return Array.isArray(b)&&0!==b.length?"object"===typeof b[0]?b.some(function(e){return TC(e,k,Object.keys(k))}):b.some(function(e){return hQ(k,f,n,e)}):!1},$allMatch:function(f,k,n,b){return Array.isArray(b)&&0!==b.length?"object"===typeof b[0]?b.every(function(e){return TC(e,k,Object.keys(k))}):
b.every(function(e){return hQ(k,f,n,e)}):!1},$eq:function(f,k,n,b){return fA(b)&&0===Xn(b,k)},$gte:function(f,k,n,b){return fA(b)&&0<=Xn(b,k)},$gt:function(f,k,n,b){return fA(b)&&0<Xn(b,k)},$lte:function(f,k,n,b){return fA(b)&&0>=Xn(b,k)},$lt:function(f,k,n,b){return fA(b)&&0>Xn(b,k)},$exists:function(f,k,n,b){return k?fA(b):!fA(b)},$mod:function(f,k,n,b){if(f=EF(b)){f=k[0];k=k[1];if(0===f)throw Error("Bad divisor, cannot divide by zero");if(parseInt(f,10)!==f)throw Error("Divisor is not an integer");
if(parseInt(k,10)!==k)throw Error("Modulus is not an integer");f=parseInt(b,10)!==b?!1:b%f===k}return f},$ne:function(f,k,n,b){return k.every(function(e){return 0!==Xn(b,e)})},$in:function(f,k,n,b){return EF(b)&&a_(b,k)},$nin:function(f,k,n,b){return EF(b)&&!a_(b,k)},$size:function(f,k,n,b){return EF(b)&&b.length===k},$all:function(f,k,n,b){return Array.isArray(b)&&wca(b,k)},$regex:function(f,k,n,b){if(f=EF(b))f=(new RegExp(k)).test(b);return f},$type:function(f,k,n,b){return xca(b,k)}};Li.plugin(function(f){f._changesFilterPlugin=
{validate:yca,normalize:zca,shouldFilter:Aca,filter:Bca}});Li.version="7.2.1";var Cca=b_("_id _rev _attachments _deleted _revisions _revs_info _conflicts _deleted_conflicts _local_seq _rev_tree _replication_id _replication_state _replication_state_time _replication_state_reason _replication_stats _removed".split(" ")),Dca=b_("_attachments _replication_id _replication_state _replication_state_time _replication_state_reason _replication_stats".split(" ")),FF=new RC,lQ=!1,mQ=[],WC=new er,oQ,nQ=new er;
n_.valid=function(){return"undefined"!==typeof indexedDB&&"undefined"!==typeof IDBKeyRange};var rQ={};qQ.valid=function(){return!0};Pt(iA,Error);Pt(WJ,Error);Pt(XJ,Error);var ada=$r.bind(null,"log"),bda=Array.isArray,cda=JSON.parse;HF.prototype.add=function(f){return this.promise=this.promise.catch(function(){}).then(function(){return f()})};HF.prototype.finish=function(){return this.promise};var b7={},c7=new HF,sla=function(f,k){return uQ(k)},tla=function(f,k){return k.length},ula=function(f,k){f=
uQ(k);for(var n=Math.min.apply(null,k),b=Math.max.apply(null,k),e=k.length,m=0,a=0,g=k.length;a<g;a++){var l=k[a];m+=l*l}return{sum:f,min:n,max:b,count:e,sumsqr:m}},d7=function(f,k,n,b){function e(fa,oa,gb,zb,va){try{return{output:oa(gb,zb,va)}}catch(ma){return w_(fa,ma),{error:ma}}}function m(fa,oa){var gb=Xn(fa.key,oa.key);return 0!==gb?gb:Xn(fa.value,oa.value)}function a(fa,oa,gb){gb=gb||0;return"number"===typeof oa?fa.slice(gb,oa+gb):0<gb?fa.slice(gb):fa}function g(fa){var oa=fa.value;return oa&&
"object"===typeof oa&&oa._id||fa.id}function l(fa){fa.rows.forEach(function(oa){var gb=oa.doc&&oa.doc._attachments;gb&&Object.keys(gb).forEach(function(zb){var va=gb[zb];gb[zb].data=aQ(va.data,va.content_type)})})}function r(fa){return function(oa){fa.include_docs&&fa.attachments&&fa.binary&&l(oa);return oa}}function v(fa,oa,gb,zb){oa=oa[fa];"undefined"!==typeof oa&&(zb&&(oa=encodeURIComponent(JSON.stringify(oa))),gb.push(fa+"="+oa))}function y(fa){if("undefined"!==typeof fa){var oa=Number(fa);return isNaN(oa)||
oa!==parseInt(fa,10)?fa:oa}}function A(fa){fa.group_level=y(fa.group_level);fa.limit=y(fa.limit);fa.skip=y(fa.skip);return fa}function E(fa,oa){var gb=fa.descending?"endkey":"startkey",zb=fa.descending?"startkey":"endkey";if("undefined"!==typeof fa[gb]&&"undefined"!==typeof fa[zb]&&0<Xn(fa[gb],fa[zb]))throw new iA("No rows can match your key range, reverse your start_key and end_key or set {descending : true}");if(oa.reduce&&!1!==fa.reduce){if(fa.include_docs)throw new iA("{include_docs:true} is invalid for reduce");
if(fa.keys&&1<fa.keys.length&&!fa.group&&!fa.group_level)throw new iA("Multi-key fetches for reduce views must use {group: true}");}["group_level","limit","skip"].forEach(function(va){a:{if(va=fa[va]){if("number"!==typeof va){va=new iA('Invalid value for integer: "'+va+'"');break a}if(0>va){va=new iA('Invalid value for positive integer: "'+va+'"');break a}}va=void 0}if(va)throw va;})}function F(fa,oa,gb){var zb=[],va,ma="GET",ta,Na;v("reduce",gb,zb);v("include_docs",gb,zb);v("attachments",gb,zb);
v("limit",gb,zb);v("descending",gb,zb);v("group",gb,zb);v("group_level",gb,zb);v("skip",gb,zb);v("stale",gb,zb);v("conflicts",gb,zb);v("startkey",gb,zb,!0);v("start_key",gb,zb,!0);v("endkey",gb,zb,!0);v("end_key",gb,zb,!0);v("inclusive_end",gb,zb);v("key",gb,zb,!0);v("update_seq",gb,zb);zb=zb.join("&");zb=""===zb?"":"?"+zb;if("undefined"!==typeof gb.keys){var Kb="keys="+encodeURIComponent(JSON.stringify(gb.keys));2E3>=Kb.length+zb.length+1?zb+=("?"===zb[0]?"&":"?")+Kb:(ma="POST","string"===typeof oa?
va={keys:gb.keys}:oa.keys=gb.keys)}if("string"===typeof oa)return Kb=vQ(oa),fa.fetch("_design/"+Kb[0]+"/_view/"+Kb[1]+zb,{headers:new XC({"Content-Type":"application/json"}),method:ma,body:JSON.stringify(va)}).then(function(kc){ta=kc.ok;Na=kc.status;return kc.json()}).then(function(kc){if(!ta)throw kc.status=Na,SC(kc);kc.rows.forEach(function(Vb){if(Vb.value&&Vb.value.error&&"builtin_reduce_error"===Vb.value.error)throw Error(Vb.reason);});return kc}).then(r(gb));va=va||{};Object.keys(oa).forEach(function(kc){Array.isArray(oa[kc])?
va[kc]=oa[kc]:va[kc]=oa[kc].toString()});return fa.fetch("_temp_view"+zb,{headers:new XC({"Content-Type":"application/json"}),method:"POST",body:JSON.stringify(va)}).then(function(kc){ta=kc.ok;Na=kc.status;return kc.json()}).then(function(kc){if(!ta)throw kc.status=Na,SC(kc);return kc}).then(r(gb))}function H(fa,oa,gb){return new Promise(function(zb,va){fa._query(oa,gb,function(ma,ta){if(ma)return va(ma);zb(ta)})})}function I(fa){return new Promise(function(oa,gb){fa._viewCleanup(function(zb,va){if(zb)return gb(zb);
oa(va)})})}function M(fa){return function(oa){if(404===oa.status)return fa;throw oa;}}function N(fa,oa,gb){function zb(Na,Kb){for(var kc=[],Vb=new GF,jc=0,Qc=Kb.rows.length;jc<Qc;jc++){var Pb=Kb.rows[jc].doc;if(Pb&&(kc.push(Pb),Vb.add(Pb._id),Pb._deleted=!ta.has(Pb._id),!Pb._deleted)){var xd=ta.get(Pb._id);"value"in xd&&(Pb.value=xd.value)}}Kb=tQ(ta);Kb.forEach(function(Td){if(!Vb.has(Td)){var ka={_id:Td};Td=ta.get(Td);"value"in Td&&(ka.value=Td.value);kc.push(ka)}});Na.keys=r_(Kb.concat(Na.keys));
kc.push(Na);return kc}var va="_local/doc_"+fa,ma={_id:va,keys:[]};fa=gb.get(fa);var ta=fa[0];va=eda(fa[1])?Promise.resolve(ma):oa.db.get(va).catch(M(ma));return va.then(function(Na){return(Na.keys.length?oa.db.allDocs({keys:Na.keys,include_docs:!0}):Promise.resolve({rows:[]})).then(function(Kb){return zb(Na,Kb)})})}function W(fa,oa,gb){return fa.db.get("_local/lastSeq").catch(M({_id:"_local/lastSeq",seq:0})).then(function(zb){var va=tQ(oa);return Promise.all(va.map(function(ma){return N(ma,fa,oa)})).then(function(ma){ma=
OJ(ma);zb.seq=gb;ma.push(zb);return fa.db.bulkDocs({docs:ma})})})}function X(fa){fa="string"===typeof fa?fa:fa.name;var oa=b7[fa];oa||(oa=b7[fa]=new HF);return oa}function ea(fa){return sQ(X(fa),function(){return Aa(fa)})()}function Aa(fa){function oa(kc,Vb){return function(){return W(fa,kc,Vb)}}function gb(){return fa.sourceDB.changes({return_docs:!0,conflicts:!0,include_docs:!0,style:"all_docs",since:Na,limit:50}).then(zb)}function zb(kc){kc=kc.results;if(kc.length){for(var Vb=new er,jc=0,Qc=kc.length;jc<
Qc;jc++){var Pb=kc[jc];if("_"!==Pb.doc._id[0]){va=[];ma=Pb.doc;if(!ma._deleted){var xd=fa.sourceDB;try{ta(ma)}catch(Ld){w_(xd,Ld)}}va.sort(m);xd=void 0;for(var Td=va,ka=new er,Fa=0,Sa=Td.length;Fa<Sa;Fa++){var wb=Td[Fa],cc=[wb.key,wb.id];0<Fa&&0===Xn(wb.key,xd)&&cc.push(Fa);ka.set(qt(cc),wb);xd=wb.key}Vb.set(Pb.doc._id,[ka,Pb.changes])}Na=Pb.seq}Kb.add(oa(Vb,Na));if(!(50>kc.length))return gb()}}var va,ma,ta=k(fa.mapFun,function(kc,Vb){kc={id:ma._id,key:eA(kc)};"undefined"!==typeof Vb&&null!==Vb&&
(kc.value=eA(Vb));va.push(kc)}),Na=fa.seq||0,Kb=new HF;return gb().then(function(){return Kb.finish()}).then(function(){fa.seq=Na})}function Ma(fa,oa,gb){0===gb.group_level&&delete gb.group_level;var zb=gb.group||gb.group_level,va=n(fa.reduceFun),ma=[],ta=isNaN(gb.group_level)?Number.POSITIVE_INFINITY:gb.group_level;oa.forEach(function(jc){var Qc=ma[ma.length-1],Pb=zb?jc.key:null;zb&&Array.isArray(Pb)&&(Pb=Pb.slice(0,ta));Qc&&0===Xn(Qc.groupKey,Pb)?(Qc.keys.push([jc.key,jc.id]),Qc.values.push(jc.value)):
ma.push({keys:[[jc.key,jc.id]],values:[jc.value],groupKey:Pb})});oa=[];for(var Na=0,Kb=ma.length;Na<Kb;Na++){var kc=ma[Na],Vb=e(fa.sourceDB,va,kc.keys,kc.values,!1);if(Vb.error&&Vb.error instanceof XJ)throw Vb.error;oa.push({value:Vb.error?null:Vb.output,key:kc.groupKey})}return{rows:a(oa,gb.limit,gb.skip)}}function K(fa,oa){return sQ(X(fa),function(){return aa(fa,oa)})()}function aa(fa,oa){function gb(Vb){Vb.include_docs=!0;return fa.db.allDocs(Vb).then(function(jc){va=jc.total_rows;return jc.rows.map(function(Qc){if("value"in
Qc.doc&&"object"===typeof Qc.doc.value&&null!==Qc.doc.value){var Pb=Object.keys(Qc.doc.value).sort(),xd=["id","key","value"];if(!(Pb<xd||Pb>xd))return Qc.doc.value}a:{Pb=Qc.doc._id;xd=[];for(var Td=[],ka=0;;){var Fa=Pb[ka++];if("\x00"===Fa)if(1===xd.length){Pb=xd.pop();break a}else{var Sa=xd;var wb=Td;Fa=Sa.pop();if(wb.length){var cc=wb[wb.length-1];Fa===cc.element&&(wb.pop(),cc=wb[wb.length-1]);wb=cc.element;cc=cc.index;Array.isArray(wb)?wb.push(Fa):cc===Sa.length-2?(Sa=Sa.pop(),wb[Sa]=Fa):Sa.push(Fa)}continue}switch(Fa){case "1":xd.push(null);
break;case "2":xd.push("1"===Pb[ka]);ka++;break;case "3":cc=Pb;Sa=Fa=ka;if("1"===cc[Fa])cc=0,Fa++;else{wb="0"===cc[Fa];Fa++;var Ld="",Jd=cc.substring(Fa,Fa+3);Jd=parseInt(Jd,10)+-324;wb&&(Jd=-Jd);for(Fa+=3;;){var Uc=cc[Fa];if("\x00"===Uc)break;else Ld+=Uc;Fa++}Ld=Ld.split(".");cc=1===Ld.length?parseInt(Ld,10):parseFloat(Ld[0]+"."+Ld[1]);wb&&(cc-=10);0!==Jd&&(cc=parseFloat(cc+"e"+Jd))}wb=cc;Fa-=Sa;xd.push(wb);ka+=Fa;break;case "4":for(Fa="";;){Sa=Pb[ka];if("\x00"===Sa)break;Fa+=Sa;ka++}Fa=Fa.replace(/\u0001\u0001/g,
"\x00").replace(/\u0001\u0002/g,"\u0001").replace(/\u0002\u0002/g,"\u0002");xd.push(Fa);break;case "5":Fa={element:[],index:xd.length};xd.push(Fa.element);Td.push(Fa);break;case "6":Fa={element:{},index:xd.length};xd.push(Fa.element);Td.push(Fa);break;default:throw Error("bad collationIndex or unexpectedly reached end of input: "+Fa);}}}return{key:Pb[0],id:Pb[1],value:"value"in Qc.doc?Qc.doc.value:null}})})}function zb(Vb){var jc=ma?Ma(fa,Vb,oa):{total_rows:va,offset:ta,rows:Vb};oa.update_seq&&(jc.update_seq=
fa.seq);if(oa.include_docs){var Qc=r_(Vb.map(g));return fa.sourceDB.allDocs({keys:Qc,include_docs:!0,conflicts:oa.conflicts,attachments:oa.attachments,binary:oa.binary}).then(function(Pb){var xd=new er;Pb.rows.forEach(function(Td){xd.set(Td.id,Td.doc)});Vb.forEach(function(Td){var ka=g(Td);if(ka=xd.get(ka))Td.doc=ka});return jc})}return jc}var va,ma=fa.reduceFun&&!1!==oa.reduce,ta=oa.skip||0;"undefined"===typeof oa.keys||oa.keys.length||(oa.limit=0,delete oa.keys);if("undefined"!==typeof oa.keys){var Na=
oa.keys.map(function(Vb){Vb={startkey:qt([Vb]),endkey:qt([Vb,{}])};oa.update_seq&&(Vb.update_seq=!0);return gb(Vb)});return Promise.all(Na).then(OJ).then(zb)}Na={descending:oa.descending};oa.update_seq&&(Na.update_seq=!0);if("start_key"in oa)var Kb=oa.start_key;"startkey"in oa&&(Kb=oa.startkey);if("end_key"in oa)var kc=oa.end_key;"endkey"in oa&&(kc=oa.endkey);"undefined"!==typeof Kb&&(Na.startkey=oa.descending?qt([Kb,{}]):qt([Kb]));"undefined"!==typeof kc&&(Kb=!1!==oa.inclusive_end,oa.descending&&
(Kb=!Kb),Na.endkey=qt(Kb?[kc,{}]:[kc]));"undefined"!==typeof oa.key&&(kc=qt([oa.key]),Kb=qt([oa.key,{}]),Na.descending?(Na.endkey=kc,Na.startkey=Kb):(Na.startkey=kc,Na.endkey=Kb));ma||("number"===typeof oa.limit&&(Na.limit=oa.limit),Na.skip=ta);return gb(Na).then(zb)}function T(fa){return fa.fetch("_view_cleanup",{headers:new XC({"Content-Type":"application/json"}),method:"POST"}).then(function(oa){return oa.json()})}function U(fa){return fa.get("_local/"+f).then(function(oa){var gb=new er;Object.keys(oa.views).forEach(function(va){var ma=
vQ(va);va="_design/"+ma[0];ma=ma[1];var ta=gb.get(va);ta||(ta=new GF,gb.set(va,ta));ta.add(ma)});var zb={keys:tQ(gb),include_docs:!0};return fa.allDocs(zb).then(function(va){var ma={};va.rows.forEach(function(ta){var Na=ta.key.substring(8);gb.get(ta.key).forEach(function(Kb){var kc=Na+"/"+Kb;oa.views[kc]||(kc=Kb);kc=Object.keys(oa.views[kc]);var Vb=ta.doc&&ta.doc.views&&ta.doc.views[Kb];kc.forEach(function(jc){ma[jc]=ma[jc]||Vb})})});va=Object.keys(ma).filter(function(ta){return!ma[ta]}).map(function(ta){return sQ(X(ta),
function(){return(new fa.constructor(ta,fa.__opts)).destroy()})()});return Promise.all(va).then(function(){return{ok:!0}})})},M({ok:!0}))}function pa(fa,oa,gb){if("function"===typeof fa._query)return H(fa,oa,gb);if(Vu(fa))return F(fa,oa,gb);if("string"!==typeof oa)return E(gb,oa),c7.add(function(){return v_(fa,"temp_view/temp_view",oa.map,oa.reduce,!0,f).then(function(ma){return $ca(ea(ma).then(function(){return K(ma,gb)}),function(){return ma.db.destroy()})})}),c7.finish();var zb=vQ(oa),va=zb[1];
return fa.get("_design/"+zb[0]).then(function(ma){var ta=ma.views&&ma.views[va];if(!ta)throw new WJ("ddoc "+ma._id+" has no view named "+va);b(ma,va);E(gb,ta);return v_(fa,oa,ta.map,ta.reduce,!1,f).then(function(Na){return"ok"===gb.stale||"update_after"===gb.stale?("update_after"===gb.stale&&Wu(function(){ea(Na)}),K(Na,gb)):ea(Na).then(function(){return K(Na,gb)})})})}return{query:function(fa,oa,gb){var zb=this;"function"===typeof oa&&(gb=oa,oa={});oa=oa?A(oa):{};"function"===typeof fa&&(fa={map:fa});
var va=Promise.resolve().then(function(){return pa(zb,fa,oa)});q_(va,gb);return va},viewCleanup:Zca(function(){return"function"===typeof this._viewCleanup?I(this):Vu(this)?T(this):U(this)})}}("mrviews",function(f,k){return"function"===typeof f&&2===f.length?function(n){return f(n,k)}:t_(f.toString(),k)},function(f){f=f.toString();if(/^_sum/.test(f))var k=sla;else if(/^_count/.test(f))k=tla;else if(/^_stats/.test(f))k=ula;else{if(/^_/.test(f))throw Error(f+" is not a supported reduce function.");k=
void 0}return k?k:t_(f)},function(f,k){var n=f.views&&f.views[k];if("string"!==typeof n.map)throw new WJ("ddoc "+f._id+" has no string view named "+k+", instead found object of type: "+typeof n.map);});IF.prototype.writeCheckpoint=function(f,k){var n=this;return this.updateTarget(f,k).then(function(){return n.updateSource(f,k)})};IF.prototype.updateTarget=function(f,k){return this.opts.writeTargetCheckpoint?wQ(this.target,this.id,f,k,this.returnValue):Promise.resolve(!0)};IF.prototype.updateSource=
function(f,k){if(this.opts.writeSourceCheckpoint){var n=this;return wQ(this.src,this.id,f,k,this.returnValue).catch(function(b){if(z_(b))return n.opts.writeSourceCheckpoint=!1,!0;throw b;})}return Promise.resolve(!0)};var e7={undefined:function(f,k){return 0===Xn(f.last_seq,k.last_seq)?k.last_seq:0},1:function(f,k){f=k.session_id===f.session_id?{last_seq:k.last_seq,history:k.history}:y_(k.history,f.history);return f.last_seq}};IF.prototype.getCheckpoint=function(){var f=this;return f.opts&&f.opts.writeSourceCheckpoint&&
!f.opts.writeTargetCheckpoint?f.src.get(f.id).then(function(k){return k.last_seq||0}).catch(function(k){if(404!==k.status)throw k;return 0}):f.target.get(f.id).then(function(k){return f.opts&&f.opts.writeTargetCheckpoint&&!f.opts.writeSourceCheckpoint?k.last_seq||0:f.src.get(f.id).then(function(n){if(k.version!==n.version)return 0;var b=k.version?k.version.toString():"undefined";return b in e7?e7[b](k,n):0},function(n){if(404===n.status&&k.last_seq)return f.src.put({_id:f.id,last_seq:0}).then(function(){return 0},
function(b){return z_(b)?(f.opts.writeSourceCheckpoint=!1,k.last_seq):0});throw n;})}).catch(function(k){if(404!==k.status)throw k;return 0})};Pt(YJ,tq.EventEmitter);YJ.prototype.cancel=function(){this.cancelled=!0;this.state="cancelled";this.emit("cancel")};YJ.prototype.ready=function(f,k){function n(){b.cancel()}var b=this;b._readyCalled||(b._readyCalled=!0,f.once("destroyed",n),k.once("destroyed",n),b.once("complete",function(){f.removeListener("destroyed",n);k.removeListener("destroyed",n)}))};
Pt(zQ,tq.EventEmitter);zQ.prototype.cancel=function(){this.canceled||(this.canceled=!0,this.push.cancel(),this.pull.cancel())};Li.plugin(function(f){f.adapter("idb",n_,!0)}).plugin(function(f){f.adapter("http",qQ,!1);f.adapter("https",qQ,!1)}).plugin({query:function(f,k,n){return d7.query.call(this,f,k,n)},viewCleanup:function(f){return d7.viewCleanup.call(this,f)}}).plugin(function(f){f.replicate=yQ;f.sync=lda;Object.defineProperty(f.prototype,"replicate",{get:function(){var k=this;"undefined"===
typeof this.replicateMethods&&(this.replicateMethods={from:function(n,b,e){return k.constructor.replicate(n,k,b,e)},to:function(n,b,e){return k.constructor.replicate(k,n,b,e)}});return this.replicateMethods}});f.prototype.sync=function(k,n,b){return this.constructor.sync(this,k,n,b)}});var vla=pla=Li,Jy={};Object.defineProperty(Jy,"__esModule",{value:!0});Vx.prototype.get=function(f){return this._store["$"+f]};Vx.prototype.set=function(f,k){this._store["$"+f]=k;return!0};Vx.prototype.has=function(f){return"$"+
f in this._store};Vx.prototype.delete=function(f){f="$"+f;var k=f in this._store;delete this._store[f];return k};Vx.prototype.forEach=function(f){for(var k=Object.keys(this._store),n=0,b=k.length;n<b;n++){var e=k[n],m=this._store[e];e=e.substring(1);f(m,e)}};Object.defineProperty(Vx.prototype,"size",{get:function(){return Object.keys(this._store).length}});JF.prototype.add=function(f){return this._store.set(f,!0)};JF.prototype.has=function(f){return this._store.has(f)};JF.prototype.forEach=function(f){this._store.forEach(function(k,
n){f(n)})};Object.defineProperty(JF.prototype,"size",{get:function(){return this._store.size}});(function(){if("undefined"===typeof Symbol||"undefined"===typeof Map||"undefined"===typeof Set)return!1;var f=Object.getOwnPropertyDescriptor(Map,Symbol.species);return f&&"get"in f&&Map[Symbol.species]===Map})()?(Jy.Set=Set,Jy.Map=Map):(Jy.Set=JF,Jy.Map=Vx);var zU={},AU=tj;zU.test=function(){return"undefined"!==typeof AU&&!AU.browser};zU.install=function(f){return function(){AU.nextTick(f)}};var f7="undefined"!==
typeof globalThis?globalThis:"undefined"!==typeof self?self:global,BU="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,CU={},g7=BU.MutationObserver||BU.WebKitMutationObserver;CU.test=function(){return g7};CU.install=function(f){var k=0;f=new g7(f);var n=BU.document.createTextNode("");f.observe(n,{characterData:!0});return function(){n.data=k=++k%2}};var DU="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,IM="undefined"!==typeof globalThis?
globalThis:"undefined"!==typeof self?self:global,wla={},fH=[zU,{test:function(){return"function"===typeof f7.queueMicrotask},install:function(f){return function(){f7.queueMicrotask(f)}}},CU,{test:function(){return DU.setImmediate?!1:"undefined"!==typeof DU.MessageChannel},install:function(f){var k=new DU.MessageChannel;k.port1.onmessage=f;return function(){k.port2.postMessage(0)}}},{test:function(){return"document"in IM&&"onreadystatechange"in IM.document.createElement("script")},install:function(f){return function(){var k=
IM.document.createElement("script");k.onreadystatechange=function(){f();k.onreadystatechange=null;k.parentNode.removeChild(k);k=null};IM.document.documentElement.appendChild(k);return f}}},{test:function(){return!0},install:function(f){return function(){setTimeout(f,0)}}}],YC,jA,KF=-1,Wx=[],AQ=!1,gH=-1,xla=fH.length;for(;++gH<xla;)if(fH[gH]&&fH[gH].test&&fH[gH].test()){var yla=fH[gH].install(B_);break}C_.prototype.run=function(){var f=this.fun,k=this.array;switch(k.length){case 0:return f();case 1:return f(k[0]);
case 2:return f(k[0],k[1]);case 3:return f(k[0],k[1],k[2]);default:return f.apply(null,k)}};var Nj=wla=function(f){var k=Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)k[n-1]=arguments[n];Wx.push(new C_(f,k));AQ||YC||(AQ=!0,yla())},Ug={};Object.defineProperty(Ug,"__esModule",{value:!0});(vl&&"object"===typeof vl&&"default"in vl?vl["default"]:vl)(Xk,Error);Xk.prototype.toString=function(){return JSON.stringify({status:this.status,name:this.name,message:this.message,
reason:this.reason})};var zla=new Xk(401,"unauthorized","Name or password is incorrect."),Ala=new Xk(400,"bad_request","Missing JSON list of 'docs'"),Bla=new Xk(404,"not_found","missing"),Cla=new Xk(409,"conflict","Document update conflict"),Dla=new Xk(400,"bad_request","_id field must contain a string"),Ela=new Xk(412,"missing_id","_id is required for puts"),Fla=new Xk(400,"bad_request","Only reserved document ids may start with underscore."),Gla=new Xk(412,"precondition_failed","Database not open"),
h7=new Xk(500,"unknown_error","Database encountered an unknown error"),Hla=new Xk(500,"badarg","Some query argument is invalid"),Ila=new Xk(400,"invalid_request","Request was invalid"),Jla=new Xk(400,"query_parse_error","Some query parameter is invalid"),Kla=new Xk(500,"doc_validation","Bad special document member"),Lla=new Xk(400,"bad_request","Something wrong with the request"),Mla=new Xk(400,"bad_request","Document must be a JSON object"),Nla=new Xk(404,"not_found","Database not found"),Ola=new Xk(500,
"indexed_db_went_bad","unknown"),Pla=new Xk(500,"web_sql_went_bad","unknown"),Qla=new Xk(500,"levelDB_went_went_bad","unknown"),Rla=new Xk(403,"forbidden","Forbidden by design doc validate_doc_update function"),Sla=new Xk(400,"bad_request","Invalid rev format"),Tla=new Xk(412,"file_exists","The database could not be created, the file already exists."),Ula=new Xk(412,"missing_stub","A pre-existing attachment stub wasn't found"),Vla=new Xk(413,"invalid_url","Provided URL is invalid");Ug.UNAUTHORIZED=
zla;Ug.MISSING_BULK_DOCS=Ala;Ug.MISSING_DOC=Bla;Ug.REV_CONFLICT=Cla;Ug.INVALID_ID=Dla;Ug.MISSING_ID=Ela;Ug.RESERVED_ID=Fla;Ug.NOT_OPEN=Gla;Ug.UNKNOWN_ERROR=h7;Ug.BAD_ARG=Hla;Ug.INVALID_REQUEST=Ila;Ug.QUERY_PARSE_ERROR=Jla;Ug.DOC_VALIDATION=Kla;Ug.BAD_REQUEST=Lla;Ug.NOT_AN_OBJECT=Mla;Ug.DB_MISSING=Nla;Ug.WSQ_ERROR=Pla;Ug.LDB_ERROR=Qla;Ug.FORBIDDEN=Rla;Ug.INVALID_REV=Sla;Ug.FILE_EXISTS=Tla;Ug.MISSING_STUB=Ula;Ug.IDB_ERROR=Ola;Ug.INVALID_URL=Vla;Ug.createError=function(f,k){function n(b){for(var e=Object.getOwnPropertyNames(f),
m=0,a=e.length;m<a;m++)"function"!==typeof f[e[m]]&&(this[e[m]]=f[e[m]]);void 0!==b&&(this.reason=b)}n.prototype=Xk.prototype;return new n(k)};Ug.generateErrorFromResponse=function(f){if("object"!==typeof f){var k=f;f=h7;f.data=k}"error"in f&&"conflict"===f.error&&(f.name="conflict",f.status=409);"name"in f||(f.name=f.error||"unknown");"status"in f||(f.status=500);"message"in f||(f.message=f.message||f.reason);return f};var Wla="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag,EU=Object.prototype.toString,
JM=function(f){return!(Wla&&f&&"object"==typeof f&&Symbol.toStringTag in f)&&"[object Arguments]"===EU.call(f)},i7=function(f){return!!JM(f)||null!==f&&"object"==typeof f&&"number"==typeof f.length&&0<=f.length&&"[object Array]"!==EU.call(f)&&"[object Function]"===EU.call(f.callee)},Xla=function(){return JM(arguments)}();JM.isLegacyArguments=i7;var Yla=Xla?JM:i7,Zla=Object.prototype.toString,$la=Function.prototype.toString,ama=/^\s*(?:function)?\*/,j7="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag,
k7=Object.getPrototypeOf;a:if(j7){try{var KM=Function("return function*() {}")();break a}catch(f){}KM=void 0}else KM=!1;var bma=KM?k7(KM):{},ti="function"==typeof Object.create?function(f,k){k&&(f.super_=k,f.prototype=Object.create(k.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}))}:function(f,k){if(k){f.super_=k;var n=function(){};n.prototype=k.prototype;f.prototype=new n;f.prototype.constructor=f}},l7=function(f){return f&&"object"==typeof f&&"function"==typeof f.copy&&
"function"==typeof f.fill&&"function"==typeof f.readUInt8},nj={},nda=l7,W_="undefined"!=typeof BigInt,CQ="undefined"!=typeof Symbol,fr=CQ&&void 0!==Symbol.toStringTag,uq="undefined"!=typeof Uint8Array,cma="undefined"!=typeof ArrayBuffer;if(uq&&fr)var dma=Object.getPrototypeOf(Uint8Array.prototype),as=kA(Object.getOwnPropertyDescriptor(dma,Symbol.toStringTag).get);var Zl=kA(Object.prototype.toString),oda=kA(Number.prototype.valueOf),pda=kA(String.prototype.valueOf),qda=kA(Boolean.prototype.valueOf);
if(W_)var rda=kA(BigInt.prototype.valueOf);if(CQ)var sda=kA(Symbol.prototype.valueOf);nj.isArgumentsObject=Yla;nj.isGeneratorFunction=function(f){return"function"==typeof f&&(!!ama.test($la.call(f))||(j7?k7(f)===bma:"[object GeneratorFunction]"===Zla.call(f)))};nj.isPromise=function(f){return"undefined"!=typeof Promise&&f instanceof Promise||null!==f&&"object"==typeof f&&"function"==typeof f.then&&"function"==typeof f.catch};nj.isArrayBufferView=function(f){return cma&&ArrayBuffer.isView?ArrayBuffer.isView(f):
D_(f)||Q_(f)};nj.isTypedArray=D_;nj.isUint8Array=E_;nj.isUint8ClampedArray=F_;nj.isUint16Array=G_;nj.isUint32Array=H_;nj.isInt8Array=I_;nj.isInt16Array=J_;nj.isInt32Array=K_;nj.isFloat32Array=L_;nj.isFloat64Array=M_;nj.isBigInt64Array=N_;nj.isBigUint64Array=O_;$J.working="undefined"!=typeof Map&&$J(new Map);nj.isMap=function(f){return"undefined"!=typeof Map&&($J.working?$J(f):f instanceof Map)};aK.working="undefined"!=typeof Set&&aK(new Set);nj.isSet=function(f){return"undefined"!=typeof Set&&(aK.working?
aK(f):f instanceof Set)};bK.working="undefined"!=typeof WeakMap&&bK(new WeakMap);nj.isWeakMap=function(f){return"undefined"!=typeof WeakMap&&(bK.working?bK(f):f instanceof WeakMap)};BQ.working="undefined"!=typeof WeakSet&&BQ(new WeakSet);nj.isWeakSet=function(f){return BQ(f)};cK.working="undefined"!=typeof ArrayBuffer&&cK(new ArrayBuffer);nj.isArrayBuffer=P_;dK.working="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView&&dK(new DataView(new ArrayBuffer(1),0,1));nj.isDataView=Q_;eK.working=
"undefined"!=typeof SharedArrayBuffer&&eK(new SharedArrayBuffer);nj.isSharedArrayBuffer=R_;nj.isAsyncFunction=function(f){return"[object AsyncFunction]"===Zl(f)};nj.isMapIterator=function(f){return"[object Map Iterator]"===Zl(f)};nj.isSetIterator=function(f){return"[object Set Iterator]"===Zl(f)};nj.isGeneratorObject=function(f){return"[object Generator]"===Zl(f)};nj.isWebAssemblyCompiledModule=function(f){return"[object WebAssembly.Module]"===Zl(f)};nj.isNumberObject=S_;nj.isStringObject=T_;nj.isBooleanObject=
U_;nj.isBigIntObject=V_;nj.isSymbolObject=X_;nj.isBoxedPrimitive=function(f){return S_(f)||T_(f)||U_(f)||V_(f)||X_(f)};nj.isAnyArrayBuffer=function(f){return uq&&(P_(f)||R_(f))};["isProxy","isExternal","isModuleNamespaceObject"].forEach(function(f){Object.defineProperty(nj,f,{enumerable:!1,value:function(){throw Error(f+" is not supported in userland");}})});var hH="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,Vh={},xv=tj,m7=Object.getOwnPropertyDescriptors||function(f){for(var k=
Object.keys(f),n={},b=0;b<k.length;b++)n[k[b]]=Object.getOwnPropertyDescriptor(f,k[b]);return n},ema=/%[sdj%]/g;Vh.format=function(f){if(!hK(f)){for(var k=[],n=0;n<arguments.length;n++)k.push(Xx(arguments[n]));return k.join(" ")}n=1;var b=arguments,e=b.length;k=String(f).replace(ema,function(a){if("%%"===a)return"%";if(n>=e)return a;switch(a){case "%s":return String(b[n++]);case "%d":return Number(b[n++]);case "%j":try{return JSON.stringify(b[n++])}catch(g){return"[Circular]"}default:return a}});
for(var m=b[n];n<e;m=b[++n])null!==m&&ZC(m)?k+=" "+Xx(m):k+=" "+m;return k};Vh.deprecate=function(f,k){if(void 0!==xv&&!0===xv.noDeprecation)return f;if(void 0===xv)return function(){return Vh.deprecate(f,k).apply(this||hH,arguments)};var n=!1;return function(){if(!n){if(xv.throwDeprecation)throw Error(k);xv.traceDeprecation?console.trace(k):console.error(k);n=!0}return f.apply(this||hH,arguments)}};var LM={},n7=/^$/;if(xv.env.NODE_DEBUG){var FU=xv.env.NODE_DEBUG;FU=FU.replace(/[|\\{}()[\]^$+?.]/g,
"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase();n7=new RegExp("^"+FU+"$","i")}Vh.debuglog=function(f){if(f=f.toUpperCase(),!LM[f])if(n7.test(f)){var k=xv.pid;LM[f]=function(){var n=Vh.format.apply(Vh,arguments);console.error("%s %d: %s",f,k,n)}}else LM[f]=function(){};return LM[f]};Vh.inspect=Xx;Xx.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]};
Xx.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};Vh.types=nj;Vh.isArray=Z_;Vh.isBoolean=DQ;Vh.isNull=function(f){return null===f};Vh.isNullOrUndefined=function(f){return null==f};Vh.isNumber=Y_;Vh.isString=hK;Vh.isSymbol=function(f){return"symbol"==typeof f};Vh.isUndefined=lA;Vh.isRegExp=NF;Vh.types.isRegExp=NF;Vh.isObject=ZC;Vh.isDate=iK;Vh.types.isDate=iK;Vh.isError=MF;Vh.types.isNativeError=MF;Vh.isFunction=gK;Vh.isPrimitive=
function(f){return null===f||"boolean"==typeof f||"number"==typeof f||"string"==typeof f||"symbol"==typeof f||void 0===f};Vh.isBuffer=l7;var wda="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ");Vh.log=function(){console.log("%s - %s",vda(),Vh.format.apply(Vh,arguments))};Vh.inherits=ti;Vh._extend=function(f,k){if(!k||!ZC(k))return f;for(var n=Object.keys(k),b=n.length;b--;)f[n[b]]=k[n[b]];return f};var fB="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;Vh.promisify=function(f){function k(){for(var n,
b,e=new Promise(function(g,l){n=g;b=l}),m=[],a=0;a<arguments.length;a++)m.push(arguments[a]);m.push(function(g,l){g?b(g):n(l)});try{f.apply(this||hH,m)}catch(g){b(g)}return e}if("function"!=typeof f)throw new TypeError('The "original" argument must be of type Function');if(fB&&f[fB]){if("function"!=typeof(k=f[fB]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(k,fB,{value:k,enumerable:!1,writable:!1,configurable:!0}),k}return Object.setPrototypeOf(k,
Object.getPrototypeOf(f)),fB&&Object.defineProperty(k,fB,{value:k,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(k,m7(f))};Vh.promisify.custom=fB;Vh.callbackify=function(f){function k(){for(var n=[],b=0;b<arguments.length;b++)n.push(arguments[b]);var e=n.pop();if("function"!=typeof e)throw new TypeError("The last argument must be of type Function");var m=this||hH,a=function(){return e.apply(m,arguments)};f.apply(this||hH,n).then(function(g){xv.nextTick(a.bind(null,null,g))},function(g){xv.nextTick(xda.bind(null,
g,a))})}if("function"!=typeof f)throw new TypeError('The "original" argument must be of type Function');return Object.setPrototypeOf(k,Object.getPrototypeOf(f)),Object.defineProperties(k,m7(f)),k};for(var Yu=[],Es=[],fma="undefined"!=typeof Uint8Array?Uint8Array:Array,WD=0;64>WD;++WD)Yu[WD]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[WD],Es["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charCodeAt(WD)]=WD;Es[45]=62;Es[95]=63;var Mi=Da("bm",{}),LQ={byteLength:function(f){f=
$_(f);var k=f[1];return 3*(f[0]+k)/4-k},toByteArray:function(f){var k=$_(f);var n=k[0];k=k[1];var b=new fma(3*(n+k)/4-k),e=0,m=0<k?n-4:n;for(n=0;n<m;n+=4){var a=Es[f.charCodeAt(n)]<<18|Es[f.charCodeAt(n+1)]<<12|Es[f.charCodeAt(n+2)]<<6|Es[f.charCodeAt(n+3)];b[e++]=a>>16&255;b[e++]=a>>8&255;b[e++]=255&a}2===k&&(a=Es[f.charCodeAt(n)]<<2|Es[f.charCodeAt(n+1)]>>4,b[e++]=255&a);1===k&&(a=Es[f.charCodeAt(n)]<<10|Es[f.charCodeAt(n+1)]<<4|Es[f.charCodeAt(n+2)]>>2,b[e++]=a>>8&255,b[e++]=255&a);return b},fromByteArray:function(f){for(var k,
n=f.length,b=n%3,e=[],m=0,a=n-b;m<a;m+=16383)e.push(yda(f,m,m+16383>a?a:m+16383));1===b?(k=f[n-1],e.push(Yu[k>>2]+Yu[k<<4&63]+"==")):2===b&&(k=(f[n-2]<<8)+f[n-1],e.push(Yu[k>>10]+Yu[k>>4&63]+Yu[k<<2&63]+"="));return e.join("")}},$C={read:function(f,k,n,b,e){var m=8*e-b-1;var a=(1<<m)-1,g=a>>1,l=-7;e=n?e-1:0;var r=n?-1:1,v=f[k+e];e+=r;n=v&(1<<-l)-1;v>>=-l;for(l+=m;0<l;n=256*n+f[k+e],e+=r,l-=8);m=n&(1<<-l)-1;n>>=-l;for(l+=b;0<l;m=256*m+f[k+e],e+=r,l-=8);if(0===n)n=1-g;else{if(n===a)return m?NaN:1/0*
(v?-1:1);m+=Math.pow(2,b);n-=g}return(v?-1:1)*m*Math.pow(2,n-b)},write:function(f,k,n,b,e,m){var a,g,l,r=8*m-e-1,v=(1<<r)-1,y=v>>1,A=23===e?Math.pow(2,-24)-Math.pow(2,-77):0;m=b?0:m-1;b=b?1:-1;var E=0>k||0===k&&0>1/k?1:0;k=Math.abs(k);for(isNaN(k)||k===1/0?(g=isNaN(k)?1:0,a=v):(a=Math.floor(Math.log(k)/Math.LN2),1>k*(l=Math.pow(2,-a))&&(a--,l*=2),2<=(k+=1<=a+y?A/l:A*Math.pow(2,1-y))*l&&(a++,l/=2),a+y>=v?(g=0,a=v):1<=a+y?(g=(k*l-1)*Math.pow(2,e),a+=y):(g=k*Math.pow(2,y-1)*Math.pow(2,e),a=0));8<=e;f[n+
m]=255&g,m+=b,g/=256,e-=8);a=a<<e|g;for(r+=e;0<r;f[n+m]=255&a,m+=b,a/=256,r-=8);f[n+m-b]|=128*E}},o7="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;Mi.Buffer=df;Mi.SlowBuffer=function(f){+f!=f&&(f=0);return df.alloc(+f)};Mi.INSPECT_MAX_BYTES=50;Mi.kMaxLength=2147483647;df.TYPED_ARRAY_SUPPORT=function(){try{var f=new Uint8Array(1),k={foo:function(){return 42}};return Object.setPrototypeOf(k,Uint8Array.prototype),Object.setPrototypeOf(f,k),42===
f.foo()}catch(n){return!1}}();df.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");Object.defineProperty(df.prototype,"parent",{enumerable:!0,get:function(){if(df.isBuffer(this))return this.buffer}});Object.defineProperty(df.prototype,"offset",{enumerable:!0,get:function(){if(df.isBuffer(this))return this.byteOffset}});
df.poolSize=8192;df.from=function(f,k,n){return a0(f,k,n)};Object.setPrototypeOf(df.prototype,Uint8Array.prototype);Object.setPrototypeOf(df,Uint8Array);df.alloc=function(f,k,n){return c0(f),0>=f?vw(f):void 0!==k?"string"==typeof n?vw(f).fill(k,n):vw(f).fill(k):vw(f)};df.allocUnsafe=function(f){return HQ(f)};df.allocUnsafeSlow=function(f){return HQ(f)};df.isBuffer=function(f){return null!=f&&!0===f._isBuffer&&f!==df.prototype};df.compare=function(f,k){if(ww(f,Uint8Array)&&(f=df.from(f,f.offset,f.byteLength)),
ww(k,Uint8Array)&&(k=df.from(k,k.offset,k.byteLength)),!df.isBuffer(f)||!df.isBuffer(k))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(f===k)return 0;for(var n=f.length,b=k.length,e=0,m=Math.min(n,b);e<m;++e)if(f[e]!==k[e]){n=f[e];b=k[e];break}return n<b?-1:b<n?1:0};df.isEncoding=function(f){switch(String(f).toLowerCase()){case "hex":case "utf8":case "utf-8":case "ascii":case "latin1":case "binary":case "base64":case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return!0;
default:return!1}};df.concat=function(f,k){if(!Array.isArray(f))throw new TypeError('"list" argument must be an Array of Buffers');if(0===f.length)return df.alloc(0);var n;if(void 0===k)for(n=k=0;n<f.length;++n)k+=f[n].length;k=df.allocUnsafe(k);var b=0;for(n=0;n<f.length;++n){var e=f[n];if(ww(e,Uint8Array)&&(e=df.from(e)),!df.isBuffer(e))throw new TypeError('"list" argument must be an Array of Buffers');e.copy(k,b);b+=e.length}return k};df.byteLength=b0;df.prototype._isBuffer=!0;df.prototype.swap16=
function(){var f=this.length;if(0!=f%2)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var k=0;k<f;k+=2)mA(this,k,k+1);return this};df.prototype.swap32=function(){var f=this.length;if(0!=f%4)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var k=0;k<f;k+=4)mA(this,k,k+3),mA(this,k+1,k+2);return this};df.prototype.swap64=function(){var f=this.length;if(0!=f%8)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var k=0;k<f;k+=8)mA(this,k,
k+7),mA(this,k+1,k+6),mA(this,k+2,k+5),mA(this,k+3,k+4);return this};df.prototype.toString=function(){var f=this.length;return 0===f?"":0===arguments.length?e0(this,0,f):Ada.apply(this,arguments)};df.prototype.toLocaleString=df.prototype.toString;df.prototype.equals=function(f){if(!df.isBuffer(f))throw new TypeError("Argument must be a Buffer");return this===f||0===df.compare(this,f)};df.prototype.inspect=function(){var f="",k=Mi.INSPECT_MAX_BYTES;return f=this.toString("hex",0,k).replace(/(.{2})/g,
"$1 ").trim(),this.length>k&&(f+=" ... "),"<Buffer "+f+">"};o7&&(df.prototype[o7]=df.prototype.inspect);df.prototype.compare=function(f,k,n,b,e){if(ww(f,Uint8Array)&&(f=df.from(f,f.offset,f.byteLength)),!df.isBuffer(f))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof f);if(void 0===k&&(k=0),void 0===n&&(n=f?f.length:0),void 0===b&&(b=0),void 0===e&&(e=this.length),0>k||n>f.length||0>b||e>this.length)throw new RangeError("out of range index");
if(b>=e&&k>=n)return 0;if(b>=e)return-1;if(k>=n)return 1;if(this===f)return 0;var m=(e>>>=0)-(b>>>=0),a=(n>>>=0)-(k>>>=0),g=Math.min(m,a);b=this.slice(b,e);f=f.slice(k,n);for(k=0;k<g;++k)if(b[k]!==f[k]){m=b[k];a=f[k];break}return m<a?-1:a<m?1:0};df.prototype.includes=function(f,k,n){return-1!==this.indexOf(f,k,n)};df.prototype.indexOf=function(f,k,n){return f0(this,f,k,n,!0)};df.prototype.lastIndexOf=function(f,k,n){return f0(this,f,k,n,!1)};df.prototype.write=function(f,k,n,b){if(void 0===k)b="utf8",
n=this.length,k=0;else if(void 0===n&&"string"==typeof k)b=k,n=this.length,k=0;else{if(!isFinite(k))throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");k>>>=0;isFinite(n)?(n>>>=0,void 0===b&&(b="utf8")):(b=n,n=void 0)}var e=this.length-k;if((void 0===n||n>e)&&(n=e),0<f.length&&(0>n||0>k)||k>this.length)throw new RangeError("Attempt to write outside buffer bounds");b||(b="utf8");for(e=!1;;)switch(b){case "hex":a:{k=Number(k)||0;b=this.length-k;n?(n=Number(n))>b&&
(n=b):n=b;b=f.length;n>b/2&&(n=b/2);for(b=0;b<n;++b){e=parseInt(f.substr(2*b,2),16);if(e!=e){n=b;break a}this[k+b]=e}n=b}return n;case "utf8":case "utf-8":return jK(KQ(f,this.length-k),this,k,n);case "ascii":return h0(this,f,k,n);case "latin1":case "binary":return h0(this,f,k,n);case "base64":return jK(d0(f),this,k,n);case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":b=n;e=this.length-k;for(var m=[],a=0;a<f.length&&!(0>(e-=2));++a){var g=f.charCodeAt(a);n=g>>8;g%=256;m.push(g);m.push(n)}return jK(m,
this,k,b);default:if(e)throw new TypeError("Unknown encoding: "+b);b=(""+b).toLowerCase();e=!0}};df.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};df.prototype.slice=function(f,k){var n=this.length;0>(f=~~f)?0>(f+=n)&&(f=0):f>n&&(f=n);0>(k=void 0===k?n:~~k)?0>(k+=n)&&(k=0):k>n&&(k=n);k<f&&(k=f);f=this.subarray(f,k);return Object.setPrototypeOf(f,df.prototype),f};df.prototype.readUIntLE=function(f,k,n){f>>>=0;k>>>=0;n||Yn(f,k,this.length);n=this[f];
for(var b=1,e=0;++e<k&&(b*=256);)n+=this[f+e]*b;return n};df.prototype.readUIntBE=function(f,k,n){f>>>=0;k>>>=0;n||Yn(f,k,this.length);n=this[f+--k];for(var b=1;0<k&&(b*=256);)n+=this[f+--k]*b;return n};df.prototype.readUInt8=function(f,k){return f>>>=0,k||Yn(f,1,this.length),this[f]};df.prototype.readUInt16LE=function(f,k){return f>>>=0,k||Yn(f,2,this.length),this[f]|this[f+1]<<8};df.prototype.readUInt16BE=function(f,k){return f>>>=0,k||Yn(f,2,this.length),this[f]<<8|this[f+1]};df.prototype.readUInt32LE=
function(f,k){return f>>>=0,k||Yn(f,4,this.length),(this[f]|this[f+1]<<8|this[f+2]<<16)+16777216*this[f+3]};df.prototype.readUInt32BE=function(f,k){return f>>>=0,k||Yn(f,4,this.length),16777216*this[f]+(this[f+1]<<16|this[f+2]<<8|this[f+3])};df.prototype.readIntLE=function(f,k,n){f>>>=0;k>>>=0;n||Yn(f,k,this.length);n=this[f];for(var b=1,e=0;++e<k&&(b*=256);)n+=this[f+e]*b;return n>=128*b&&(n-=Math.pow(2,8*k)),n};df.prototype.readIntBE=function(f,k,n){f>>>=0;k>>>=0;n||Yn(f,k,this.length);n=k;for(var b=
1,e=this[f+--n];0<n&&(b*=256);)e+=this[f+--n]*b;return e>=128*b&&(e-=Math.pow(2,8*k)),e};df.prototype.readInt8=function(f,k){return f>>>=0,k||Yn(f,1,this.length),128&this[f]?-1*(255-this[f]+1):this[f]};df.prototype.readInt16LE=function(f,k){f>>>=0;k||Yn(f,2,this.length);f=this[f]|this[f+1]<<8;return 32768&f?4294901760|f:f};df.prototype.readInt16BE=function(f,k){f>>>=0;k||Yn(f,2,this.length);f=this[f+1]|this[f]<<8;return 32768&f?4294901760|f:f};df.prototype.readInt32LE=function(f,k){return f>>>=0,
k||Yn(f,4,this.length),this[f]|this[f+1]<<8|this[f+2]<<16|this[f+3]<<24};df.prototype.readInt32BE=function(f,k){return f>>>=0,k||Yn(f,4,this.length),this[f]<<24|this[f+1]<<16|this[f+2]<<8|this[f+3]};df.prototype.readFloatLE=function(f,k){return f>>>=0,k||Yn(f,4,this.length),$C.read(this,f,!0,23,4)};df.prototype.readFloatBE=function(f,k){return f>>>=0,k||Yn(f,4,this.length),$C.read(this,f,!1,23,4)};df.prototype.readDoubleLE=function(f,k){return f>>>=0,k||Yn(f,8,this.length),$C.read(this,f,!0,52,8)};
df.prototype.readDoubleBE=function(f,k){return f>>>=0,k||Yn(f,8,this.length),$C.read(this,f,!1,52,8)};df.prototype.writeUIntLE=function(f,k,n,b){(f=+f,k>>>=0,n>>>=0,b)||vq(this,f,k,n,Math.pow(2,8*n)-1,0);b=1;var e=0;for(this[k]=255&f;++e<n&&(b*=256);)this[k+e]=f/b&255;return k+n};df.prototype.writeUIntBE=function(f,k,n,b){(f=+f,k>>>=0,n>>>=0,b)||vq(this,f,k,n,Math.pow(2,8*n)-1,0);b=n-1;var e=1;for(this[k+b]=255&f;0<=--b&&(e*=256);)this[k+b]=f/e&255;return k+n};df.prototype.writeUInt8=function(f,k,
n){return f=+f,k>>>=0,n||vq(this,f,k,1,255,0),this[k]=255&f,k+1};df.prototype.writeUInt16LE=function(f,k,n){return f=+f,k>>>=0,n||vq(this,f,k,2,65535,0),this[k]=255&f,this[k+1]=f>>>8,k+2};df.prototype.writeUInt16BE=function(f,k,n){return f=+f,k>>>=0,n||vq(this,f,k,2,65535,0),this[k]=f>>>8,this[k+1]=255&f,k+2};df.prototype.writeUInt32LE=function(f,k,n){return f=+f,k>>>=0,n||vq(this,f,k,4,4294967295,0),this[k+3]=f>>>24,this[k+2]=f>>>16,this[k+1]=f>>>8,this[k]=255&f,k+4};df.prototype.writeUInt32BE=function(f,
k,n){return f=+f,k>>>=0,n||vq(this,f,k,4,4294967295,0),this[k]=f>>>24,this[k+1]=f>>>16,this[k+2]=f>>>8,this[k+3]=255&f,k+4};df.prototype.writeIntLE=function(f,k,n,b){(f=+f,k>>>=0,b)||(b=Math.pow(2,8*n-1),vq(this,f,k,n,b-1,-b));b=0;var e=1,m=0;for(this[k]=255&f;++b<n&&(e*=256);)0>f&&0===m&&0!==this[k+b-1]&&(m=1),this[k+b]=(f/e>>0)-m&255;return k+n};df.prototype.writeIntBE=function(f,k,n,b){(f=+f,k>>>=0,b)||(b=Math.pow(2,8*n-1),vq(this,f,k,n,b-1,-b));b=n-1;var e=1,m=0;for(this[k+b]=255&f;0<=--b&&(e*=
256);)0>f&&0===m&&0!==this[k+b+1]&&(m=1),this[k+b]=(f/e>>0)-m&255;return k+n};df.prototype.writeInt8=function(f,k,n){return f=+f,k>>>=0,n||vq(this,f,k,1,127,-128),0>f&&(f=255+f+1),this[k]=255&f,k+1};df.prototype.writeInt16LE=function(f,k,n){return f=+f,k>>>=0,n||vq(this,f,k,2,32767,-32768),this[k]=255&f,this[k+1]=f>>>8,k+2};df.prototype.writeInt16BE=function(f,k,n){return f=+f,k>>>=0,n||vq(this,f,k,2,32767,-32768),this[k]=f>>>8,this[k+1]=255&f,k+2};df.prototype.writeInt32LE=function(f,k,n){return f=
+f,k>>>=0,n||vq(this,f,k,4,2147483647,-2147483648),this[k]=255&f,this[k+1]=f>>>8,this[k+2]=f>>>16,this[k+3]=f>>>24,k+4};df.prototype.writeInt32BE=function(f,k,n){return f=+f,k>>>=0,n||vq(this,f,k,4,2147483647,-2147483648),0>f&&(f=4294967295+f+1),this[k]=f>>>24,this[k+1]=f>>>16,this[k+2]=f>>>8,this[k+3]=255&f,k+4};df.prototype.writeFloatLE=function(f,k,n){return j0(this,f,k,!0,n)};df.prototype.writeFloatBE=function(f,k,n){return j0(this,f,k,!1,n)};df.prototype.writeDoubleLE=function(f,k,n){return k0(this,
f,k,!0,n)};df.prototype.writeDoubleBE=function(f,k,n){return k0(this,f,k,!1,n)};df.prototype.copy=function(f,k,n,b){if(!df.isBuffer(f))throw new TypeError("argument should be a Buffer");if((n||(n=0),b||0===b||(b=this.length),k>=f.length&&(k=f.length),k||(k=0),0<b&&b<n&&(b=n),b===n)||0===f.length||0===this.length)return 0;if(0>k)throw new RangeError("targetStart out of bounds");if(0>n||n>=this.length)throw new RangeError("Index out of range");if(0>b)throw new RangeError("sourceEnd out of bounds");
b>this.length&&(b=this.length);f.length-k<b-n&&(b=f.length-k+n);var e=b-n;if(this===f&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(k,n,b);else if(this===f&&n<k&&k<b)for(b=e-1;0<=b;--b)f[b+k]=this[b+n];else Uint8Array.prototype.set.call(f,this.subarray(n,b),k);return e};df.prototype.fill=function(f,k,n,b){if("string"==typeof f){if("string"==typeof k?(b=k,k=0,n=this.length):"string"==typeof n&&(b=n,n=this.length),void 0!==b&&"string"!=typeof b)throw new TypeError("encoding must be a string");
if("string"==typeof b&&!df.isEncoding(b))throw new TypeError("Unknown encoding: "+b);if(1===f.length){var e=f.charCodeAt(0);("utf8"===b&&128>e||"latin1"===b)&&(f=e)}}else"number"==typeof f?f&=255:"boolean"==typeof f&&(f=Number(f));if(0>k||this.length<k||this.length<n)throw new RangeError("Out of range index");if(n<=k)return this;if(k>>>=0,n=void 0===n?this.length:n>>>0,f||(f=0),"number"==typeof f)for(b=k;b<n;++b)this[b]=f;else{e=df.isBuffer(f)?f:df.from(f,b);var m=e.length;if(0===m)throw new TypeError('The value "'+
f+'" is invalid for argument "value"');for(b=0;b<n-k;++b)this[b+k]=e[b%m]}return this};var Cda=/[^+/0-9A-Za-z-_]/g,Bda=function(){for(var f=Array(256),k=0;16>k;++k)for(var n=16*k,b=0;16>b;++b)f[n+b]="0123456789abcdef"[k]+"0123456789abcdef"[b];return f}(),MM={},NM=Mi,Zu=NM.Buffer;Zu.from&&Zu.alloc&&Zu.allocUnsafe&&Zu.allocUnsafeSlow?MM=NM:(l0(NM,MM),MM.Buffer=nA);nA.prototype=Object.create(Zu.prototype);l0(Zu,nA);nA.from=function(f,k,n){if("number"==typeof f)throw new TypeError("Argument must not be a number");
return Zu(f,k,n)};nA.alloc=function(f,k,n){if("number"!=typeof f)throw new TypeError("Argument must be a number");f=Zu(f);return void 0!==k?"string"==typeof n?f.fill(k,n):f.fill(k):f.fill(0),f};nA.allocUnsafe=function(f){if("number"!=typeof f)throw new TypeError("Argument must be a number");return Zu(f)};nA.allocUnsafeSlow=function(f){if("number"!=typeof f)throw new TypeError("Argument must be a number");return NM.SlowBuffer(f)};var wj=MM,aD={},MQ=wj.Buffer,m0=MQ.isEncoding||function(f){switch((f=
""+f)&&f.toLowerCase()){case "hex":case "utf8":case "utf-8":case "ascii":case "binary":case "base64":case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":case "raw":return!0;default:return!1}};aD.StringDecoder=OF;OF.prototype.write=function(f){if(0===f.length)return"";var k;if(this.lastNeed){if(void 0===(k=this.fillLast(f)))return"";var n=this.lastNeed;this.lastNeed=0}else n=0;return n<f.length?k?k+this.text(f,n):this.text(f,n):k||""};OF.prototype.end=function(f){f=f&&f.length?this.write(f):"";
return this.lastNeed?f+"\ufffd":f};OF.prototype.text=function(f,k){var n=f.length-1;if(n<k)n=0;else{var b=NQ(f[n]);n=0<=b?(0<b&&(this.lastNeed=b-1),b):--n<k||-2===b?0:0<=(b=NQ(f[n]))?(0<b&&(this.lastNeed=b-2),b):--n<k||-2===b?0:0<=(b=NQ(f[n]))?(0<b&&(2===b?b=0:this.lastNeed=b-3),b):0}if(!this.lastNeed)return f.toString("utf8",k);this.lastTotal=n;b=f.length-(n-this.lastNeed);return f.copy(this.lastChar,0,b),f.toString("utf8",k,b)};OF.prototype.fillLast=function(f){if(this.lastNeed<=f.length)return f.copy(this.lastChar,
this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);f.copy(this.lastChar,this.lastTotal-this.lastNeed,0,f.length);this.lastNeed-=f.length};var lK=$u.EventEmitter,tt={},n0={};bs("ERR_INVALID_OPT_VALUE",function(f,k){return'The value "'+k+'" is invalid for option "'+f+'"'},TypeError);bs("ERR_INVALID_ARG_TYPE",function(f,k,n){var b;f=("string"==typeof k&&"not "===k.substr(0,4)?(b="must not be",k=k.replace(/^not /,"")):b="must be",function(e,m,a){return(void 0===
a||a>e.length)&&(a=e.length),e.substring(a-m.length,a)===m}(f," argument"))?"The "+f+" "+b+" "+o0(k,"type"):'The "'+f+'" '+(function(e,m,a){return"number"!=typeof a&&(a=0),!(a+m.length>e.length)&&-1!==e.indexOf(m,a)}(f,".")?"property":"argument")+" "+b+" "+o0(k,"type");return f+=". Received type "+typeof n,f},TypeError);bs("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF");bs("ERR_METHOD_NOT_IMPLEMENTED",function(f){return"The "+f+" method is not implemented"});bs("ERR_STREAM_PREMATURE_CLOSE",
"Premature close");bs("ERR_STREAM_DESTROYED",function(f){return"Cannot call "+f+" after a stream was destroyed"});bs("ERR_MULTIPLE_CALLBACK","Callback called multiple times");bs("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable");bs("ERR_STREAM_WRITE_AFTER_END","write after end");bs("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);bs("ERR_UNKNOWN_ENCODING",function(f){return"Unknown encoding: "+f},TypeError);bs("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event");
tt.codes=n0;var w0=function(){throw Error("Readable.from is not available in the browser");},PQ="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,y0=function(f,k){if(OQ("noDeprecation"))return f;var n=!1;return function(){if(!n){if(OQ("throwDeprecation"))throw Error(k);OQ("traceDeprecation")?console.trace(k):console.warn(k);n=!0}return f.apply(this||PQ,arguments)}},OM=Mi.Buffer,GU=Vh.inspect,gma=GU&&GU.custom||"inspect",Pda=function(){function f(){if(!(this instanceof
f))throw new TypeError("Cannot call a class as a function");!0;this.tail=this.head=null;this.length=0}var k;return k=[{key:"push",value:function(n){n={data:n,next:null};0<this.length?this.tail.next=n:this.head=n;this.tail=n;++this.length}},{key:"unshift",value:function(n){n={data:n,next:this.head};0===this.length&&(this.tail=n);this.head=n;++this.length}},{key:"shift",value:function(){if(0!==this.length){var n=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,
--this.length,n}}},{key:"clear",value:function(){this.head=this.tail=null;this.length=0}},{key:"join",value:function(n){if(0===this.length)return"";for(var b=this.head,e=""+b.data;b=b.next;)e+=n+b.data;return e}},{key:"concat",value:function(n){if(0===this.length)return OM.alloc(0);for(var b,e,m=OM.allocUnsafe(n>>>0),a=this.head,g=0;a;)n=a.data,b=m,e=g,void OM.prototype.copy.call(n,b,e),g+=a.data.length,a=a.next;return m}},{key:"consume",value:function(n,b){var e;return n<this.head.data.length?(e=
this.head.data.slice(0,n),this.head.data=this.head.data.slice(n)):e=n===this.head.data.length?this.shift():b?this._getString(n):this._getBuffer(n),e}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(n){var b=this.head,e=1,m=b.data;for(n-=m.length;b=b.next;){var a=b.data,g=n>a.length?a.length:n;if(g===a.length?m+=a:m+=a.slice(0,n),0==(n-=g)){g===a.length?(++e,b.next?this.head=b.next:this.head=this.tail=null):(this.head=b,b.data=a.slice(g));break}++e}return this.length-=
e,m}},{key:"_getBuffer",value:function(n){var b=OM.allocUnsafe(n),e=this.head,m=1;e.data.copy(b);for(n-=e.data.length;e=e.next;){var a=e.data,g=n>a.length?a.length:n;if(a.copy(b,b.length-n,0,g),0==(n-=g)){g===a.length?(++m,e.next?this.head=e.next:this.head=this.tail=null):(this.head=e,e.data=a.slice(g));break}++m}return this.length-=m,b}},{key:gma,value:function(n,b){return GU(this,function(e){for(var m=1;m<arguments.length;m++){var a=null!=arguments[m]?arguments[m]:{};m%2?p0(Object(a),!0).forEach(function(g){var l=
a[g];g in e?Object.defineProperty(e,g,{value:l,enumerable:!0,configurable:!0,writable:!0}):e[g]=l}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):p0(Object(a)).forEach(function(g){Object.defineProperty(e,g,Object.getOwnPropertyDescriptor(a,g))})}return e}({},b,{depth:0,customInspect:!1}))}}],Kda(f.prototype,k),f}(),gB=tj,u0={destroy:function(f,k){var n=this,b=this._writableState&&this._writableState.destroyed;return this._readableState&&this._readableState.destroyed||
b?(k?k(f):f&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,gB.nextTick(QQ,this,f)):gB.nextTick(QQ,this,f)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(f||null,function(e){!k&&e?n._writableState?n._writableState.errorEmitted?gB.nextTick(kK,n):(n._writableState.errorEmitted=!0,gB.nextTick(q0,n,e)):gB.nextTick(q0,n,e):k?(gB.nextTick(kK,n),k(e)):gB.nextTick(kK,n)}),this)},
undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1);this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(f,k){var n=f._readableState,b=f._writableState;n&&n.autoDestroy||
b&&b.autoDestroy?f.destroy(k):f.emit("error",k)}},hma=tt.codes.ERR_INVALID_OPT_VALUE,v0={getHighWaterMark:function(f,k,n,b){k=null!=k.highWaterMark?k.highWaterMark:b?k[n]:null;if(null!=k){if(!isFinite(k)||Math.floor(k)!==k||0>k)throw new hma(b?n:"highWaterMark",k);return Math.floor(k)}return f.objectMode?16:16384}},p7=tt.codes.ERR_STREAM_PREMATURE_CLOSE,HU,r0=tj,ima=function e(k,n,b){if("function"==typeof n)return e(k,null,n);n||(n={});b=function(H){var I=!1;return function(){if(!I){I=!0;for(var M=
arguments.length,N=Array(M),W=0;W<M;W++)N[W]=arguments[W];H.apply(this,N)}}}(b||Lda);var m=n.readable||!1!==n.readable&&k.readable,a=n.writable||!1!==n.writable&&k.writable,g=function(){k.writable||r()},l=k._writableState&&k._writableState.finished,r=function(){a=!1;l=!0;m||b.call(k)},v=k._readableState&&k._readableState.endEmitted,y=function(){m=!1;v=!0;a||b.call(k)},A=function(H){b.call(k,H)},E=function(){var H;return m&&!v?(k._readableState&&k._readableState.ended||(H=new p7),b.call(k,H)):a&&!l?
(k._writableState&&k._writableState.ended||(H=new p7),b.call(k,H)):void 0},F=function(){k.req.on("finish",r)};return k.setHeader&&"function"==typeof k.abort?(k.on("complete",r),k.on("abort",E),k.req?F():k.on("request",F)):a&&!k._writableState&&(k.on("end",g),k.on("close",g)),k.on("end",y),k.on("finish",r),!1!==n.error&&k.on("error",A),k.on("close",E),function(){k.removeListener("complete",r);k.removeListener("abort",E);k.removeListener("request",F);k.req&&k.req.removeListener("finish",r);k.removeListener("end",
g);k.removeListener("close",g);k.removeListener("finish",r);k.removeListener("end",y);k.removeListener("error",A);k.removeListener("close",E)}},$x=Symbol("lastResolve"),qA=Symbol("lastReject"),iH=Symbol("error"),PM=Symbol("ended"),pA=Symbol("lastPromise"),IU=Symbol("handlePromise"),oA=Symbol("stream"),jma=Object.getPrototypeOf(function(){}),kma=Object.setPrototypeOf((Yx(HU={get stream(){return this[oA]},next:function(){var k=this,n=this[iH];if(null!==n)return Promise.reject(n);if(this[PM])return Promise.resolve(Zx(void 0,
!0));if(this[oA].destroyed)return new Promise(function(b,e){r0.nextTick(function(){k[iH]?e(k[iH]):b(Zx(void 0,!0))})});if(n=this[pA])n=new Promise(function(b,e){return function(m,a){b.then(function(){if(e[PM])return m(Zx(void 0,!0)),void 0;e[IU](m,a)},a)}}(n,this));else{n=this[oA].read();if(null!==n)return Promise.resolve(Zx(n,!1));n=new Promise(this[IU])}return this[pA]=n,n}},Symbol.asyncIterator,function(){return this}),Yx(HU,"return",function(){var k=this;return new Promise(function(n,b){k[oA].destroy(null,
function(e){if(e)return b(e),void 0;n(Zx(void 0,!0))})})}),HU),jma),Qda=function(k){var n,b=Object.create(kma,(Yx(n={},oA,{value:k,writable:!0}),Yx(n,$x,{value:null,writable:!0}),Yx(n,qA,{value:null,writable:!0}),Yx(n,iH,{value:null,writable:!0}),Yx(n,PM,{value:k._readableState.endEmitted,writable:!0}),Yx(n,IU,{value:function(e,m){var a=b[oA].read();a?(b[pA]=null,b[$x]=null,b[qA]=null,e(Zx(a,!1))):(b[$x]=e,b[qA]=m)},writable:!0}),n));return b[pA]=null,ima(k,function(e){if(e&&"ERR_STREAM_PREMATURE_CLOSE"!==
e.code){var m=b[qA];return null!==m&&(b[pA]=null,b[$x]=null,b[qA]=null,m(e)),b[iH]=e,void 0}e=b[$x];null!==e&&(b[pA]=null,b[$x]=null,b[qA]=null,e(Zx(void 0,!0)));b[PM]=!0}),k.on("readable",Nda.bind(null,b)),b},RQ={},t0=!1,Oda="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,SQ={},x0=!1,Sda="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,TQ={},z0=!1,lma=s0(),q7=tt.codes.ERR_STREAM_PREMATURE_CLOSE,ZQ=function m(n,b,e){if("function"==typeof b)return m(n,
null,b);b||(b={});e=function(I){var M=!1;return function(){if(!M){M=!0;for(var N=arguments.length,W=Array(N),X=0;X<N;X++)W[X]=arguments[X];I.apply(this,W)}}}(e||Tda);var a=b.readable||!1!==b.readable&&n.readable,g=b.writable||!1!==b.writable&&n.writable,l=function(){n.writable||v()},r=n._writableState&&n._writableState.finished,v=function(){g=!1;r=!0;a||e.call(n)},y=n._readableState&&n._readableState.endEmitted,A=function(){a=!1;y=!0;g||e.call(n)},E=function(I){e.call(n,I)},F=function(){var I;return a&&
!y?(n._readableState&&n._readableState.ended||(I=new q7),e.call(n,I)):g&&!r?(n._writableState&&n._writableState.ended||(I=new q7),e.call(n,I)):void 0},H=function(){n.req.on("finish",v)};return n.setHeader&&"function"==typeof n.abort?(n.on("complete",v),n.on("abort",F),n.req?H():n.on("request",H)):g&&!n._writableState&&(n.on("end",l),n.on("close",l)),n.on("end",A),n.on("finish",v),!1!==b.error&&n.on("error",E),n.on("close",F),function(){n.removeListener("complete",v);n.removeListener("abort",F);n.removeListener("request",
H);n.req&&n.req.removeListener("finish",v);n.removeListener("end",l);n.removeListener("close",l);n.removeListener("finish",v);n.removeListener("end",A);n.removeListener("error",E);n.removeListener("close",F)}},QM=Mi.Buffer,JU=Vh.inspect,mma=JU&&JU.custom||"inspect",Zda=function(){function n(){if(!(this instanceof n))throw new TypeError("Cannot call a class as a function");!0;this.tail=this.head=null;this.length=0}var b;return b=[{key:"push",value:function(e){e={data:e,next:null};0<this.length?this.tail.next=
e:this.head=e;this.tail=e;++this.length}},{key:"unshift",value:function(e){e={data:e,next:this.head};0===this.length&&(this.tail=e);this.head=e;++this.length}},{key:"shift",value:function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}}},{key:"clear",value:function(){this.head=this.tail=null;this.length=0}},{key:"join",value:function(e){if(0===this.length)return"";for(var m=this.head,a=""+m.data;m=m.next;)a+=e+m.data;
return a}},{key:"concat",value:function(e){if(0===this.length)return QM.alloc(0);for(var m,a,g=QM.allocUnsafe(e>>>0),l=this.head,r=0;l;)e=l.data,m=g,a=r,void QM.prototype.copy.call(e,m,a),r+=l.data.length,l=l.next;return g}},{key:"consume",value:function(e,m){var a;return e<this.head.data.length?(a=this.head.data.slice(0,e),this.head.data=this.head.data.slice(e)):a=e===this.head.data.length?this.shift():m?this._getString(e):this._getBuffer(e),a}},{key:"first",value:function(){return this.head.data}},
{key:"_getString",value:function(e){var m=this.head,a=1,g=m.data;for(e-=g.length;m=m.next;){var l=m.data,r=e>l.length?l.length:e;if(r===l.length?g+=l:g+=l.slice(0,e),0==(e-=r)){r===l.length?(++a,m.next?this.head=m.next:this.head=this.tail=null):(this.head=m,m.data=l.slice(r));break}++a}return this.length-=a,g}},{key:"_getBuffer",value:function(e){var m=QM.allocUnsafe(e),a=this.head,g=1;a.data.copy(m);for(e-=a.data.length;a=a.next;){var l=a.data,r=e>l.length?l.length:e;if(l.copy(m,m.length-e,0,r),
0==(e-=r)){r===l.length?(++g,a.next?this.head=a.next:this.head=this.tail=null):(this.head=a,a.data=l.slice(r));break}++g}return this.length-=g,m}},{key:mma,value:function(e,m){return JU(this,function(a){for(var g=1;g<arguments.length;g++){var l=null!=arguments[g]?arguments[g]:{};g%2?A0(Object(l),!0).forEach(function(r){var v=l[r];r in a?Object.defineProperty(a,r,{value:v,enumerable:!0,configurable:!0,writable:!0}):a[r]=v}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(l)):
A0(Object(l)).forEach(function(r){Object.defineProperty(a,r,Object.getOwnPropertyDescriptor(l,r))})}return a}({},m,{depth:0,customInspect:!1}))}}],Uda(n.prototype,b),n}(),hB=tj,E0={destroy:function(n,b){var e=this,m=this._writableState&&this._writableState.destroyed;return this._readableState&&this._readableState.destroyed||m?(b?b(n):n&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,hB.nextTick(UQ,this,n)):hB.nextTick(UQ,this,n)),this):(this._readableState&&
(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(n||null,function(a){!b&&a?e._writableState?e._writableState.errorEmitted?hB.nextTick(mK,e):(e._writableState.errorEmitted=!0,hB.nextTick(B0,e,a)):hB.nextTick(B0,e,a):b?(hB.nextTick(mK,e),b(a)):hB.nextTick(mK,e)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1);this._writableState&&
(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(n,b){var e=n._readableState,m=n._writableState;e&&e.autoDestroy||m&&m.autoDestroy?n.destroy(b):n.emit("error",b)}},nma=tt.codes.ERR_INVALID_OPT_VALUE,KU,F0={getHighWaterMark:function(n,b,e,m){b=null!=b.highWaterMark?b.highWaterMark:m?b[e]:null;
if(null!=b){if(!isFinite(b)||Math.floor(b)!==b||0>b)throw new nma(m?e:"highWaterMark",b);return Math.floor(b)}return n.objectMode?16:16384}},C0=tj,oma=ZQ,cy=Symbol("lastResolve"),tA=Symbol("lastReject"),jH=Symbol("error"),RM=Symbol("ended"),sA=Symbol("lastPromise"),LU=Symbol("handlePromise"),rA=Symbol("stream"),pma=Object.getPrototypeOf(function(){}),qma=Object.setPrototypeOf((ay(KU={get stream(){return this[rA]},next:function(){var n=this,b=this[jH];if(null!==b)return Promise.reject(b);if(this[RM])return Promise.resolve(by(void 0,
!0));if(this[rA].destroyed)return new Promise(function(e,m){C0.nextTick(function(){n[jH]?m(n[jH]):e(by(void 0,!0))})});if(b=this[sA])b=new Promise(function(e,m){return function(a,g){e.then(function(){if(m[RM])return a(by(void 0,!0)),void 0;m[LU](a,g)},g)}}(b,this));else{b=this[rA].read();if(null!==b)return Promise.resolve(by(b,!1));b=new Promise(this[LU])}return this[sA]=b,b}},Symbol.asyncIterator,function(){return this}),ay(KU,"return",function(){var n=this;return new Promise(function(b,e){n[rA].destroy(null,
function(m){if(m)return e(m),void 0;b(by(void 0,!0))})})}),KU),pma),$da=function(n){var b,e=Object.create(qma,(ay(b={},rA,{value:n,writable:!0}),ay(b,cy,{value:null,writable:!0}),ay(b,tA,{value:null,writable:!0}),ay(b,jH,{value:null,writable:!0}),ay(b,RM,{value:n._readableState.endEmitted,writable:!0}),ay(b,LU,{value:function(m,a){var g=e[rA].read();g?(e[sA]=null,e[cy]=null,e[tA]=null,m(by(g,!1))):(e[cy]=m,e[tA]=a)},writable:!0}),b));return e[sA]=null,oma(n,function(m){if(m&&"ERR_STREAM_PREMATURE_CLOSE"!==
m.code){var a=e[tA];return null!==a&&(e[sA]=null,e[cy]=null,e[tA]=null,a(m)),e[jH]=m,void 0}m=e[cy];null!==m&&(e[sA]=null,e[cy]=null,e[tA]=null,m(by(void 0,!0)));e[RM]=!0}),n.on("readable",Wda.bind(null,e)),e},VQ={},D0=!1,Yda="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,WQ={},H0=!1,aea="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,XQ={},I0=!1,rma=G0(),r7=PF(),SM=tt.codes,sma=SM.ERR_METHOD_NOT_IMPLEMENTED,cea=SM.ERR_MULTIPLE_CALLBACK,
fea=SM.ERR_TRANSFORM_ALREADY_TRANSFORMING,eea=SM.ERR_TRANSFORM_WITH_LENGTH_0,oK=r7;ti(av,oK);av.prototype.push=function(n,b){return this._transformState.needTransform=!1,oK.prototype.push.call(this,n,b)};av.prototype._transform=function(n,b,e){e(new sma("_transform()"))};av.prototype._write=function(n,b,e){var m=this._transformState;(m.writecb=e,m.writechunk=n,m.writeencoding=b,m.transforming)||(n=this._readableState,(m.needTransform||n.needReadable||n.length<n.highWaterMark)&&this._read(n.highWaterMark))};
av.prototype._read=function(n){n=this._transformState;null===n.writechunk||n.transforming?n.needTransform=!0:(n.transforming=!0,this._transform(n.writechunk,n.writeencoding,n.afterTransform))};av.prototype._destroy=function(n,b){oK.prototype._destroy.call(this,n,function(e){b(e)})};var K0=av;ti(QF,K0);QF.prototype._transform=function(n,b,e){e(null,n)};var YQ,s7=tt.codes,tma=s7.ERR_MISSING_ARGS,hea=s7.ERR_STREAM_DESTROYED,aR="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,
$Q=$u.EventEmitter;ti(cs,$Q);cs.Readable=lma;cs.Writable=rma;cs.Duplex=r7;cs.Transform=av;cs.PassThrough=QF;cs.finished=ZQ;cs.pipeline=function(){for(var n=arguments.length,b=Array(n),e=0;e<n;e++)b[e]=arguments[e];var m,a=b.length?"function"!=typeof b[b.length-1]?L0:b.pop():L0;if(Array.isArray(b[0])&&(b=b[0]),2>b.length)throw new tma("streams");var g=b.map(function(l,r){var v=r<b.length-1;return gea(l,v,0<r,function(y){m||(m=y);y&&g.forEach(M0);v||(g.forEach(M0),a(m))})});return b.reduce(iea)};cs.Stream=
cs;cs.prototype.pipe=function(n,b){function e(A){n.writable&&!1===n.write(A)&&v.pause&&v.pause()}function m(){v.readable&&v.resume&&v.resume()}function a(){y||(y=!0,n.end())}function g(){y||(y=!0,"function"==typeof n.destroy&&n.destroy())}function l(A){if(r(),0===$Q.listenerCount(this||aR,"error"))throw A;}function r(){v.removeListener("data",e);n.removeListener("drain",m);v.removeListener("end",a);v.removeListener("close",g);v.removeListener("error",l);n.removeListener("error",l);v.removeListener("end",
r);v.removeListener("close",r);n.removeListener("close",r)}var v=this||aR;v.on("data",e);n.on("drain",m);n._isStdio||b&&!1===b.end||(v.on("end",a),v.on("close",g));var y=!1;return v.on("error",l),n.on("error",l),v.on("end",r),v.on("close",r),n.on("close",r),n.emit("pipe",v),n};var GA=cs,TM="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,zA={},XD=function(n){if(Object.keys)return Object.keys(n);var b=[],e;for(e in n)b.push(e);return b},iB=function(n,b){if(n.forEach)return n.forEach(b);
for(var e=0;e<n.length;e++)b(n[e],e,n)},uma=function(){try{return Object.defineProperty({},"_",{}),function(n,b,e){Object.defineProperty(n,b,{writable:!0,enumerable:!1,configurable:!0,value:e})}}catch(n){return function(b,e,m){b[e]=m}}}(),t7="Array Boolean Date Error EvalError Function Infinity JSON Math NaN Number Object RangeError ReferenceError RegExp String SyntaxError TypeError URIError decodeURI decodeURIComponent encodeURI encodeURIComponent escape eval isFinite isNaN parseFloat parseInt undefined unescape".split(" ");
pK.prototype={};var yv=zA.Script=function(n){if(!((this||TM)instanceof yv))return new yv(n);(this||TM).code=n};yv.prototype.runInContext=function(n){if(!(n instanceof pK))throw new TypeError("needs a 'context' argument.");var b=document.createElement("iframe");b.style||(b.style={});b.style.display="none";document.body.appendChild(b);var e=b.contentWindow,m=e.eval,a=e.execScript;!m&&a&&(a.call(e,"null"),m=e.eval);iB(XD(n),function(l){e[l]=n[l]});iB(t7,function(l){n[l]&&(e[l]=n[l])});var g=XD(e);m=
m.call(e,(this||TM).code);return iB(XD(e),function(l){var r;if(!(r=l in n)){a:if(g.indexOf)r=g.indexOf(l);else{for(r=0;r<g.length;r++)if(g[r]===l)break a;r=-1}r=-1===r}r&&(n[l]=e[l])}),iB(t7,function(l){l in n||uma(n,l,e[l])}),document.body.removeChild(b),m};yv.prototype.runInThisContext=function(){return eval((this||TM).code)};yv.prototype.runInNewContext=function(n){var b=yv.createContext(n),e=this.runInContext(b);return n&&iB(XD(b),function(m){n[m]=b[m]}),e};iB(XD(yv.prototype),function(n){zA[n]=
yv[n]=function(b){var e=yv(b);return e[n].apply(e,[].slice.call(arguments,1))}});zA.isContext=function(n){return n instanceof pK};zA.createScript=function(n){return zA.Script(n)};zA.createContext=yv.createContext=function(n){var b=new pK;return"object"==typeof n&&iB(XD(n),function(e){b[e]=n[e]}),b};var u7="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,vma=tj,wma=wj.Buffer,UM=u7.crypto||u7.msCrypto,Ky=UM&&UM.getRandomValues?function(n,b){if(4294967295<n)throw new RangeError("requested too many random bytes");
var e=wma.allocUnsafe(n);if(0<n)if(65536<n)for(var m=0;m<n;m+=65536)UM.getRandomValues(e.slice(m,m+65536));else UM.getRandomValues(e);return"function"==typeof b?vma.nextTick(function(){b(null,e)}):e}:function(){throw Error("Secure random number generation is not supported by this browser.\nUse Chrome, Firefox or Internet Explorer 11");},qK=wj.Buffer,N0=GA.Transform;ti(xw,N0);xw.prototype._transform=function(n,b,e){var m=null;try{this.update(n,b)}catch(a){m=a}e(m)};xw.prototype._flush=function(n){var b=
null;try{this.push(this.digest())}catch(e){b=e}n(b)};xw.prototype.update=function(n,b){var e=n;if(!qK.isBuffer(e)&&"string"!=typeof e)throw new TypeError("Data must be a string or a buffer");if(!0,this._finalized)throw Error("Digest already called");qK.isBuffer(n)||(n=qK.from(n,b));b=this._block;for(e=0;this._blockOffset+n.length-e>=this._blockSize;){for(var m=this._blockOffset;m<this._blockSize;)b[m++]=n[e++];this._update();this._blockOffset=0}for(;e<n.length;)b[this._blockOffset++]=n[e++];b=0;for(n=
8*n.length;0<n;++b)this._length[b]+=n,0<(n=this._length[b]/4294967296|0)&&(this._length[b]-=4294967296*n);return this};xw.prototype._update=function(){throw Error("_update is not implemented");};xw.prototype.digest=function(n){if(this._finalized)throw Error("Digest already called");this._finalized=!0;var b=this._digest();void 0!==n&&(b=b.toString(n));this._block.fill(0);for(n=this._blockOffset=0;4>n;++n)this._length[n]=0;return b};xw.prototype._digest=function(){throw Error("_digest is not implemented");
};var O0=xw,xma=wj.Buffer,xg=Array(16);ti(bD,O0);bD.prototype._update=function(){for(var n=0;16>n;++n)xg[n]=this._block.readInt32LE(4*n);n=this._a;var b=this._b,e=this._c,m=this._d;n=$o(n,b,e,m,xg[0],3614090360,7);m=$o(m,n,b,e,xg[1],3905402710,12);e=$o(e,m,n,b,xg[2],606105819,17);b=$o(b,e,m,n,xg[3],3250441966,22);n=$o(n,b,e,m,xg[4],4118548399,7);m=$o(m,n,b,e,xg[5],1200080426,12);e=$o(e,m,n,b,xg[6],2821735955,17);b=$o(b,e,m,n,xg[7],4249261313,22);n=$o(n,b,e,m,xg[8],1770035416,7);m=$o(m,n,b,e,xg[9],
2336552879,12);e=$o(e,m,n,b,xg[10],4294925233,17);b=$o(b,e,m,n,xg[11],2304563134,22);n=$o(n,b,e,m,xg[12],1804603682,7);m=$o(m,n,b,e,xg[13],4254626195,12);e=$o(e,m,n,b,xg[14],2792965006,17);n=ap(n,b=$o(b,e,m,n,xg[15],1236535329,22),e,m,xg[1],4129170786,5);m=ap(m,n,b,e,xg[6],3225465664,9);e=ap(e,m,n,b,xg[11],643717713,14);b=ap(b,e,m,n,xg[0],3921069994,20);n=ap(n,b,e,m,xg[5],3593408605,5);m=ap(m,n,b,e,xg[10],38016083,9);e=ap(e,m,n,b,xg[15],3634488961,14);b=ap(b,e,m,n,xg[4],3889429448,20);n=ap(n,b,e,
m,xg[9],568446438,5);m=ap(m,n,b,e,xg[14],3275163606,9);e=ap(e,m,n,b,xg[3],4107603335,14);b=ap(b,e,m,n,xg[8],1163531501,20);n=ap(n,b,e,m,xg[13],2850285829,5);m=ap(m,n,b,e,xg[2],4243563512,9);e=ap(e,m,n,b,xg[7],1735328473,14);n=bp(n,b=ap(b,e,m,n,xg[12],2368359562,20),e,m,xg[5],4294588738,4);m=bp(m,n,b,e,xg[8],2272392833,11);e=bp(e,m,n,b,xg[11],1839030562,16);b=bp(b,e,m,n,xg[14],4259657740,23);n=bp(n,b,e,m,xg[1],2763975236,4);m=bp(m,n,b,e,xg[4],1272893353,11);e=bp(e,m,n,b,xg[7],4139469664,16);b=bp(b,
e,m,n,xg[10],3200236656,23);n=bp(n,b,e,m,xg[13],681279174,4);m=bp(m,n,b,e,xg[0],3936430074,11);e=bp(e,m,n,b,xg[3],3572445317,16);b=bp(b,e,m,n,xg[6],76029189,23);n=bp(n,b,e,m,xg[9],3654602809,4);m=bp(m,n,b,e,xg[12],3873151461,11);e=bp(e,m,n,b,xg[15],530742520,16);n=cp(n,b=bp(b,e,m,n,xg[2],3299628645,23),e,m,xg[0],4096336452,6);m=cp(m,n,b,e,xg[7],1126891415,10);e=cp(e,m,n,b,xg[14],2878612391,15);b=cp(b,e,m,n,xg[5],4237533241,21);n=cp(n,b,e,m,xg[12],1700485571,6);m=cp(m,n,b,e,xg[3],2399980690,10);e=
cp(e,m,n,b,xg[10],4293915773,15);b=cp(b,e,m,n,xg[1],2240044497,21);n=cp(n,b,e,m,xg[8],1873313359,6);m=cp(m,n,b,e,xg[15],4264355552,10);e=cp(e,m,n,b,xg[6],2734768916,15);b=cp(b,e,m,n,xg[13],1309151649,21);n=cp(n,b,e,m,xg[4],4149444226,6);m=cp(m,n,b,e,xg[11],3174756917,10);e=cp(e,m,n,b,xg[2],718787259,15);b=cp(b,e,m,n,xg[9],3951481745,21);this._a=this._a+n|0;this._b=this._b+b|0;this._c=this._c+e|0;this._d=this._d+m|0};bD.prototype._digest=function(){this._block[this._blockOffset++]=128;56<this._blockOffset&&
(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0);this._block.fill(0,this._blockOffset,56);this._block.writeUInt32LE(this._length[0],56);this._block.writeUInt32LE(this._length[1],60);this._update();var n=xma.allocUnsafe(16);return n.writeInt32LE(this._a,0),n.writeInt32LE(this._b,4),n.writeInt32LE(this._c,8),n.writeInt32LE(this._d,12),n};var MU=Mi.Buffer,P0=xw,Qt=Array(16),kH=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,
2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],lH=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],mH=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],nH=[8,
9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],oH=[0,1518500249,1859775393,2400959708,2840853838],pH=[1352829926,1548603684,1836072691,2053994217,0];ti(cD,P0);cD.prototype._update=function(){for(var n=0;16>n;++n)Qt[n]=this._block.readInt32LE(4*n);var b=0|this._a;n=0|this._b;for(var e=0|this._c,m=0|this._d,a=0|this._e,g=0|this._a,l=0|this._b,r=0|this._c,
v=0|this._d,y=0|this._e,A=0;80>A;A+=1){if(16>A){var E=a;E=ds(b+(n^e^m)+Qt[kH[A]]+oH[0]|0,mH[A])+E|0;b=y;var F=ds(g+(l^(r|~v))+Qt[lH[A]]+pH[0]|0,nH[A])+b|0}else 32>A?(E=a,E=ds(b+(n&e|~n&m)+Qt[kH[A]]+oH[1]|0,mH[A])+E|0,b=y,F=ds(g+(l&v|r&~v)+Qt[lH[A]]+pH[1]|0,nH[A])+b|0):48>A?(E=a,E=ds(b+((n|~e)^m)+Qt[kH[A]]+oH[2]|0,mH[A])+E|0,b=y,F=ds(g+((l|~r)^v)+Qt[lH[A]]+pH[2]|0,nH[A])+b|0):64>A?(E=a,E=ds(b+(n&m|e&~m)+Qt[kH[A]]+oH[3]|0,mH[A])+E|0,b=y,F=ds(g+(l&r|~l&v)+Qt[lH[A]]+pH[3]|0,nH[A])+b|0):(E=a,E=ds(b+(n^
(e|~m))+Qt[kH[A]]+oH[4]|0,mH[A])+E|0,b=y,F=ds(g+(l^r^v)+Qt[lH[A]]+pH[4]|0,nH[A])+b|0);b=a;a=m;m=ds(e,10);e=n;n=E;g=y;y=v;v=ds(r,10);r=l;l=F}e=this._b+e+v|0;this._b=this._c+m+y|0;this._c=this._d+a+g|0;this._d=this._e+b+l|0;this._e=this._a+n+r|0;this._a=e};cD.prototype._digest=function(){this._block[this._blockOffset++]=128;56<this._blockOffset&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0);this._block.fill(0,this._blockOffset,56);this._block.writeUInt32LE(this._length[0],
56);this._block.writeUInt32LE(this._length[1],60);this._update();var n=MU.alloc?MU.alloc(20):new MU(20);return n.writeInt32LE(this._a,0),n.writeInt32LE(this._b,4),n.writeInt32LE(this._c,8),n.writeInt32LE(this._d,12),n.writeInt32LE(this._e,16),n};var ul="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,Q0=wj.Buffer;yw.prototype.update=function(n,b){"string"==typeof n&&(b=b||"utf8",n=Q0.from(n,b));b=(this||ul)._block;for(var e=(this||ul)._blockSize,m=n.length,a=(this||ul)._len,
g=0;g<m;){for(var l=a%e,r=Math.min(m-g,e-l),v=0;v<r;v++)b[l+v]=n[g+v];g+=r;0==(a+=r)%e&&this._update(b)}return(this||ul)._len+=m,this||ul};yw.prototype.digest=function(n){var b=(this||ul)._len%(this||ul)._blockSize;(this||ul)._block[b]=128;(this||ul)._block.fill(0,b+1);b>=(this||ul)._finalSize&&(this._update((this||ul)._block),(this||ul)._block.fill(0));b=8*(this||ul)._len;if(4294967295>=b)(this||ul)._block.writeUInt32BE(b,(this||ul)._blockSize-4);else{var e=(4294967295&b)>>>0;(this||ul)._block.writeUInt32BE((b-
e)/4294967296,(this||ul)._blockSize-8);(this||ul)._block.writeUInt32BE(e,(this||ul)._blockSize-4)}this._update((this||ul)._block);b=this._hash();return n?b.toString(n):b};yw.prototype._update=function(){throw Error("_update must be implemented by subclass");};var li="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,R0=yw,yma=wj.Buffer,zma=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,
2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,
2428436474,2756734187,3204031479,3329325298],jea=Array(64);ti(dD,R0);dD.prototype.init=function(){return(this||li)._a=1779033703,(this||li)._b=3144134277,(this||li)._c=1013904242,(this||li)._d=2773480762,(this||li)._e=1359893119,(this||li)._f=2600822924,(this||li)._g=528734635,(this||li)._h=1541459225,this||li};dD.prototype._update=function(n){for(var b,e=(this||li)._w,m=0|(this||li)._a,a=0|(this||li)._b,g=0|(this||li)._c,l=0|(this||li)._d,r=0|(this||li)._e,v=0|(this||li)._f,y=0|(this||li)._g,A=0|
(this||li)._h,E=0;16>E;++E)e[E]=n.readInt32BE(4*E);for(;64>E;++E){n=E;var F=(((b=e[E-2])>>>17|b<<15)^(b>>>19|b<<13)^b>>>10)+e[E-7],H=e[E-15];e[n]=0|F+((H>>>7|H<<25)^(H>>>18|H<<14)^H>>>3)+e[E-16]}for(b=0;64>b;++b)E=A+((r>>>6|r<<26)^(r>>>11|r<<21)^(r>>>25|r<<7))+(y^r&(v^y))+zma[b]+e[b]|0,n=((m>>>2|m<<30)^(m>>>13|m<<19)^(m>>>22|m<<10))+(m&a|g&(m|a))|0,A=y,y=v,v=r,r=l+E|0,l=g,g=a,a=m,m=E+n|0;(this||li)._a=m+(this||li)._a|0;(this||li)._b=a+(this||li)._b|0;(this||li)._c=g+(this||li)._c|0;(this||li)._d=
l+(this||li)._d|0;(this||li)._e=r+(this||li)._e|0;(this||li)._f=v+(this||li)._f|0;(this||li)._g=y+(this||li)._g|0;(this||li)._h=A+(this||li)._h|0};dD.prototype._hash=function(){var n=yma.allocUnsafe(32);return n.writeInt32BE((this||li)._a,0),n.writeInt32BE((this||li)._b,4),n.writeInt32BE((this||li)._c,8),n.writeInt32BE((this||li)._d,12),n.writeInt32BE((this||li)._e,16),n.writeInt32BE((this||li)._f,20),n.writeInt32BE((this||li)._g,24),n.writeInt32BE((this||li)._h,28),n};var Bk="undefined"!=typeof globalThis?
globalThis:"undefined"!=typeof self?self:global,S0=yw,Ama=wj.Buffer,Bma=[1518500249,1859775393,-1894007588,-899497514],kea=Array(80);ti(RF,S0);RF.prototype.init=function(){return(this||Bk)._a=1732584193,(this||Bk)._b=4023233417,(this||Bk)._c=2562383102,(this||Bk)._d=271733878,(this||Bk)._e=3285377520,this||Bk};RF.prototype._update=function(n){for(var b,e=(this||Bk)._w,m=0|(this||Bk)._a,a=0|(this||Bk)._b,g=0|(this||Bk)._c,l=0|(this||Bk)._d,r=0|(this||Bk)._e,v=0;16>v;++v)e[v]=n.readInt32BE(4*v);for(;80>
v;++v)e[v]=e[v-3]^e[v-8]^e[v-14]^e[v-16];for(n=0;80>n;++n)v=~~(n/20),v=0|((b=m)<<5|b>>>27)+(0===v?a&g|~a&l:2===v?a&g|a&l|g&l:a^g^l)+r+e[n]+Bma[v],r=l,l=g,g=a<<30|a>>>2,a=m,m=v;(this||Bk)._a=m+(this||Bk)._a|0;(this||Bk)._b=a+(this||Bk)._b|0;(this||Bk)._c=g+(this||Bk)._c|0;(this||Bk)._d=l+(this||Bk)._d|0;(this||Bk)._e=r+(this||Bk)._e|0};RF.prototype._hash=function(){var n=Ama.allocUnsafe(20);return n.writeInt32BE(0|(this||Bk)._a,0),n.writeInt32BE(0|(this||Bk)._b,4),n.writeInt32BE(0|(this||Bk)._c,8),
n.writeInt32BE(0|(this||Bk)._d,12),n.writeInt32BE(0|(this||Bk)._e,16),n};var Ck="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,T0=yw,Cma=wj.Buffer,Dma=[1518500249,1859775393,-1894007588,-899497514],lea=Array(80);ti(SF,T0);SF.prototype.init=function(){return(this||Ck)._a=1732584193,(this||Ck)._b=4023233417,(this||Ck)._c=2562383102,(this||Ck)._d=271733878,(this||Ck)._e=3285377520,this||Ck};SF.prototype._update=function(n){for(var b,e=(this||Ck)._w,m=0|(this||Ck)._a,a=
0|(this||Ck)._b,g=0|(this||Ck)._c,l=0|(this||Ck)._d,r=0|(this||Ck)._e,v=0;16>v;++v)e[v]=n.readInt32BE(4*v);for(;80>v;++v)e[v]=(b=e[v-3]^e[v-8]^e[v-14]^e[v-16])<<1|b>>>31;for(n=0;80>n;++n)b=~~(n/20),b=(m<<5|m>>>27)+(0===b?a&g|~a&l:2===b?a&g|a&l|g&l:a^g^l)+r+e[n]+Dma[b]|0,r=l,l=g,g=a<<30|a>>>2,a=m,m=b;(this||Ck)._a=m+(this||Ck)._a|0;(this||Ck)._b=a+(this||Ck)._b|0;(this||Ck)._c=g+(this||Ck)._c|0;(this||Ck)._d=l+(this||Ck)._d|0;(this||Ck)._e=r+(this||Ck)._e|0};SF.prototype._hash=function(){var n=Cma.allocUnsafe(20);
return n.writeInt32BE(0|(this||Ck)._a,0),n.writeInt32BE(0|(this||Ck)._b,4),n.writeInt32BE(0|(this||Ck)._c,8),n.writeInt32BE(0|(this||Ck)._d,12),n.writeInt32BE(0|(this||Ck)._e,16),n};var Zn="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,nea=yw,Ema=wj.Buffer,mea=Array(64);ti(sK,dD);sK.prototype.init=function(){return(this||Zn)._a=3238371032,(this||Zn)._b=914150663,(this||Zn)._c=812702999,(this||Zn)._d=4144912697,(this||Zn)._e=4290775857,(this||Zn)._f=1750603025,(this||
Zn)._g=1694076839,(this||Zn)._h=3204075428,this||Zn};sK.prototype._hash=function(){var n=Ema.allocUnsafe(28);return n.writeInt32BE((this||Zn)._a,0),n.writeInt32BE((this||Zn)._b,4),n.writeInt32BE((this||Zn)._c,8),n.writeInt32BE((this||Zn)._d,12),n.writeInt32BE((this||Zn)._e,16),n.writeInt32BE((this||Zn)._f,20),n.writeInt32BE((this||Zn)._g,24),n};var vf="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,U0=yw,Fma=wj.Buffer,v7=[1116352408,3609767458,1899447441,602891725,3049323471,
3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,
2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,
1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,
852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],oea=Array(160);ti(eD,U0);eD.prototype.init=function(){return(this||vf)._ah=1779033703,(this||vf)._bh=3144134277,(this||vf)._ch=1013904242,(this||vf)._dh=2773480762,(this||vf)._eh=1359893119,(this||vf)._fh=2600822924,(this||vf)._gh=528734635,(this||vf)._hh=1541459225,(this||vf)._al=4089235720,(this||vf)._bl=2227873595,(this||vf)._cl=4271175723,(this||
vf)._dl=1595750129,(this||vf)._el=2917565137,(this||vf)._fl=725511199,(this||vf)._gl=4215389547,(this||vf)._hl=327033209,this||vf};eD.prototype._update=function(n){for(var b=(this||vf)._w,e=0|(this||vf)._ah,m=0|(this||vf)._bh,a=0|(this||vf)._ch,g=0|(this||vf)._dh,l=0|(this||vf)._eh,r=0|(this||vf)._fh,v=0|(this||vf)._gh,y=0|(this||vf)._hh,A=0|(this||vf)._al,E=0|(this||vf)._bl,F=0|(this||vf)._cl,H=0|(this||vf)._dl,I=0|(this||vf)._el,M=0|(this||vf)._fl,N=0|(this||vf)._gl,W=0|(this||vf)._hl,X=0;32>X;X+=
2)b[X]=n.readInt32BE(4*X),b[X+1]=n.readInt32BE(4*X+4);for(;160>X;X+=2){n=b[X-30];var ea=b[X-30+1],Aa=(n>>>1|ea<<31)^(n>>>8|ea<<24)^n>>>7,Ma=(ea>>>1|n<<31)^(ea>>>8|n<<24)^(ea>>>7|n<<25);var K=n=b[X-4];var aa=ea=b[X-4+1];K=(K>>>19|aa<<13)^(aa>>>29|K<<3)^K>>>6;ea=(ea>>>19|n<<13)^(n>>>29|ea<<3)^(ea>>>6|n<<26);aa=b[X-32];var T=b[X-32+1];n=Ma+b[X-14+1]|0;Aa=Aa+b[X-14]+$n(n,Ma)|0;Aa=(Aa=Aa+K+$n(n=n+ea|0,ea)|0)+aa+$n(n=n+T|0,T)|0;b[X]=Aa;b[X+1]=n}for(X=0;160>X;X+=2){Aa=b[X];n=b[X+1];ea=e&m|a&(e|m);var U=
A&E|F&(A|E);aa=(e>>>28|A<<4)^(A>>>2|e<<30)^(A>>>7|e<<25);T=(A>>>28|e<<4)^(e>>>2|A<<30)^(e>>>7|A<<25);var pa=v7[X],fa=v7[X+1],oa=v^l&(r^v),gb=N^I&(M^N);Ma=W+((I>>>14|l<<18)^(I>>>18|l<<14)^(l>>>9|I<<23))|0;K=y+((l>>>14|I<<18)^(l>>>18|I<<14)^(I>>>9|l<<23))+$n(Ma,W)|0;K=(K=(K=K+oa+$n(Ma=Ma+gb|0,gb)|0)+pa+$n(Ma=Ma+fa|0,fa)|0)+Aa+$n(Ma=Ma+n|0,n)|0;n=T+U|0;Aa=aa+ea+$n(n,T)|0;y=v;W=N;v=r;N=M;r=l;M=I;l=g+K+$n(I=H+Ma|0,H)|0;g=a;H=F;a=m;F=E;m=e;E=A;e=K+Aa+$n(A=Ma+n|0,Ma)|0}(this||vf)._al=(this||vf)._al+A|0;
(this||vf)._bl=(this||vf)._bl+E|0;(this||vf)._cl=(this||vf)._cl+F|0;(this||vf)._dl=(this||vf)._dl+H|0;(this||vf)._el=(this||vf)._el+I|0;(this||vf)._fl=(this||vf)._fl+M|0;(this||vf)._gl=(this||vf)._gl+N|0;(this||vf)._hl=(this||vf)._hl+W|0;(this||vf)._ah=(this||vf)._ah+e+$n((this||vf)._al,A)|0;(this||vf)._bh=(this||vf)._bh+m+$n((this||vf)._bl,E)|0;(this||vf)._ch=(this||vf)._ch+a+$n((this||vf)._cl,F)|0;(this||vf)._dh=(this||vf)._dh+g+$n((this||vf)._dl,H)|0;(this||vf)._eh=(this||vf)._eh+l+$n((this||vf)._el,
I)|0;(this||vf)._fh=(this||vf)._fh+r+$n((this||vf)._fl,M)|0;(this||vf)._gh=(this||vf)._gh+v+$n((this||vf)._gl,N)|0;(this||vf)._hh=(this||vf)._hh+y+$n((this||vf)._hl,W)|0};eD.prototype._hash=function(){function n(e,m,a){b.writeInt32BE(e,a);b.writeInt32BE(m,a+4)}var b=Fma.allocUnsafe(64);return n((this||vf)._ah,(this||vf)._al,0),n((this||vf)._bh,(this||vf)._bl,8),n((this||vf)._ch,(this||vf)._cl,16),n((this||vf)._dh,(this||vf)._dl,24),n((this||vf)._eh,(this||vf)._el,32),n((this||vf)._fh,(this||vf)._fl,
40),n((this||vf)._gh,(this||vf)._gl,48),n((this||vf)._hh,(this||vf)._hl,56),b};var ik="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,qea=yw,Gma=wj.Buffer,pea=Array(160);ti(tK,eD);tK.prototype.init=function(){return(this||ik)._ah=3418070365,(this||ik)._bh=1654270250,(this||ik)._ch=2438529370,(this||ik)._dh=355462360,(this||ik)._eh=1731405415,(this||ik)._fh=2394180231,(this||ik)._gh=3675008525,(this||ik)._hh=1203062813,(this||ik)._al=3238371032,(this||ik)._bl=914150663,
(this||ik)._cl=812702999,(this||ik)._dl=4144912697,(this||ik)._el=4290775857,(this||ik)._fl=1750603025,(this||ik)._gl=1694076839,(this||ik)._hl=3204075428,this||ik};tK.prototype._hash=function(){function n(e,m,a){b.writeInt32BE(e,a);b.writeInt32BE(m,a+4)}var b=Gma.allocUnsafe(48);return n((this||ik)._ah,(this||ik)._al,0),n((this||ik)._bh,(this||ik)._bl,8),n((this||ik)._ch,(this||ik)._cl,16),n((this||ik)._dh,(this||ik)._dl,24),n((this||ik)._eh,(this||ik)._el,32),n((this||ik)._fh,(this||ik)._fl,40),
b};var Ly,w7=Ly={};(Ly=w7=function(n){n=n.toLowerCase();var b=Ly[n];if(!b)throw Error(n+" is not supported (we accept pull requests)");return new b}).sha=RF;Ly.sha1=SF;Ly.sha224=sK;Ly.sha256=dD;Ly.sha384=tK;Ly.sha512=eD;var NU=w7,nm="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,x7=wj.Buffer,V0=GA.Transform,Hma=aD.StringDecoder;ti(ao,V0);ao.prototype.update=function(n,b,e){"string"==typeof n&&(n=x7.from(n,b));n=this._update(n);return(this||nm).hashMode?this||nm:(e&&
(n=this._toString(n,e)),n)};ao.prototype.setAutoPadding=function(){};ao.prototype.getAuthTag=function(){throw Error("trying to get auth tag in unsupported state");};ao.prototype.setAuthTag=function(){throw Error("trying to set auth tag in unsupported state");};ao.prototype.setAAD=function(){throw Error("trying to set aad in unsupported state");};ao.prototype._transform=function(n,b,e){try{(this||nm).hashMode?this._update(n):this.push(this._update(n))}catch(a){var m=a}finally{e(m)}};ao.prototype._flush=
function(n){try{this.push(this.__final())}catch(e){var b=e}n(b)};ao.prototype._finalOrDigest=function(n){var b=this.__final()||x7.alloc(0);return n&&(b=this._toString(b,n,!0)),b};ao.prototype._toString=function(n,b,e){if((this||nm)._decoder||((this||nm)._decoder=new Hma(b),(this||nm)._encoding=b),(this||nm)._encoding!==b)throw Error("can't switch encodings");n=(this||nm)._decoder.write(n);return e&&(n+=(this||nm)._decoder.end()),n};var W0=ao;ti(uK,W0);uK.prototype._update=function(n){this._hash.update(n)};
uK.prototype._final=function(){return this._hash.digest()};var qH=function(n){return"md5"===(n=n.toLowerCase())?new bD:"rmd160"===n||"ripemd160"===n?new cD:new uK(NU(n))},y7=function(n){return(new bD).update(n).digest()},Ima=ti,uA=wj.Buffer,X0=ao,rea=uA.alloc(128);Ima(vK,X0);vK.prototype._update=function(n){this._hash.push(n)};vK.prototype._final=function(){var n=this._alg(uA.concat(this._hash));return this._alg(uA.concat([this._opad,n]))};var Jma=ti,Y0=ao,UF=wj.Buffer,bR=cD,cR=NU,sea=UF.alloc(128);
Jma(TF,Y0);TF.prototype._update=function(n){this._hash.update(n)};TF.prototype._final=function(){var n=this._hash.digest();return("rmd160"===this._alg?new bR:cR(this._alg)).update(this._opad).update(n).digest()};var z7=function(n,b){return"rmd160"===(n=n.toLowerCase())||"ripemd160"===n?new TF("rmd160",b):"md5"===n?new vK(y7,b):new TF(n,b)},A7={sha224WithRSAEncryption:{sign:"rsa",hash:"sha224",id:"302d300d06096086480165030402040500041c"},"RSA-SHA224":{sign:"ecdsa/rsa",hash:"sha224",id:"302d300d06096086480165030402040500041c"},
sha256WithRSAEncryption:{sign:"rsa",hash:"sha256",id:"3031300d060960864801650304020105000420"},"RSA-SHA256":{sign:"ecdsa/rsa",hash:"sha256",id:"3031300d060960864801650304020105000420"},sha384WithRSAEncryption:{sign:"rsa",hash:"sha384",id:"3041300d060960864801650304020205000430"},"RSA-SHA384":{sign:"ecdsa/rsa",hash:"sha384",id:"3041300d060960864801650304020205000430"},sha512WithRSAEncryption:{sign:"rsa",hash:"sha512",id:"3051300d060960864801650304020305000440"},"RSA-SHA512":{sign:"ecdsa/rsa",hash:"sha512",
id:"3051300d060960864801650304020305000440"},"RSA-SHA1":{sign:"rsa",hash:"sha1",id:"3021300906052b0e03021a05000414"},"ecdsa-with-SHA1":{sign:"ecdsa",hash:"sha1",id:""},sha256:{sign:"ecdsa",hash:"sha256",id:""},sha224:{sign:"ecdsa",hash:"sha224",id:""},sha384:{sign:"ecdsa",hash:"sha384",id:""},sha512:{sign:"ecdsa",hash:"sha512",id:""},"DSA-SHA":{sign:"dsa",hash:"sha1",id:""},"DSA-SHA1":{sign:"dsa",hash:"sha1",id:""},DSA:{sign:"dsa",hash:"sha1",id:""},"DSA-WITH-SHA224":{sign:"dsa",hash:"sha224",id:""},
"DSA-SHA224":{sign:"dsa",hash:"sha224",id:""},"DSA-WITH-SHA256":{sign:"dsa",hash:"sha256",id:""},"DSA-SHA256":{sign:"dsa",hash:"sha256",id:""},"DSA-WITH-SHA384":{sign:"dsa",hash:"sha384",id:""},"DSA-SHA384":{sign:"dsa",hash:"sha384",id:""},"DSA-WITH-SHA512":{sign:"dsa",hash:"sha512",id:""},"DSA-SHA512":{sign:"dsa",hash:"sha512",id:""},"DSA-RIPEMD160":{sign:"dsa",hash:"rmd160",id:""},ripemd160WithRSA:{sign:"rsa",hash:"rmd160",id:"3021300906052b2403020105000414"},"RSA-RIPEMD160":{sign:"rsa",hash:"rmd160",
id:"3021300906052b2403020105000414"},md5WithRSAEncryption:{sign:"rsa",hash:"md5",id:"3020300c06082a864886f70d020505000410"},"RSA-MD5":{sign:"rsa",hash:"md5",id:"3020300c06082a864886f70d020505000410"}},tea=Mi.Buffer,Kma=Math.pow(2,30)-1,OU,B7=function(n,b,e,m){if(Z0(n,"Password"),Z0(b,"Salt"),"number"!=typeof e)throw new TypeError("Iterations not a number");if(0>e)throw new TypeError("Bad iterations");if("number"!=typeof m)throw new TypeError("Key length not a number");if(0>m||m>Kma||m!=m)throw new TypeError("Bad key length");
},C7=tj;C7.browser?OU="utf-8":OU=6<=parseInt(C7.version.split(".")[0].slice(1),10)?"utf-8":"binary";var VM=OU,vt="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,wea=y7,vea=cD,uea=NU,ut=wj.Buffer,xea=ut.alloc(128),wK={md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,rmd160:20,ripemd160:20};$0.prototype.run=function(n,b){return n.copy(b,(this||vt).blocksize),this.hash(b).copy((this||vt).opad,(this||vt).blocksize),this.hash((this||vt).opad)};var PU,QU=function(n,
b,e,m,a){B7(n,b,e,m);ut.isBuffer(n)||(n=ut.from(n,VM));ut.isBuffer(b)||(b=ut.from(b,VM));n=new $0(a=a||"sha1",n,b.length);var g=ut.allocUnsafe(m),l=ut.allocUnsafe(b.length+4);b.copy(l,0,0,b.length);var r=0;a=wK[a];m=Math.ceil(m/a);for(var v=1;v<=m;v++){l.writeUInt32BE(v,b.length);for(var y=n.run(l,n.ipad1),A=y,E=1;E<e;E++){A=n.run(A,n.ipad2);for(var F=0;F<a;F++)y[F]^=A[F]}y.copy(g,r);r+=a}return g},rH="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,RU=tj,fD=wj.Buffer,
VF=rH.crypto&&rH.crypto.subtle,Lma={sha:"SHA-1","sha-1":"SHA-1",sha1:"SHA-1",sha256:"SHA-256","sha-256":"SHA-256",sha384:"SHA-384","sha-384":"SHA-384","sha-512":"SHA-512",sha512:"SHA-512"},SU=[],WM={pbkdf2:function(n,b,e,m,a,g){"function"==typeof a&&(g=a,a=void 0);var l=Lma[(a=a||"sha1").toLowerCase()];if(!l||"function"!=typeof rH.Promise)return RU.nextTick(function(){try{var r=QU(n,b,e,m,a)}catch(v){return g(v)}g(null,r)});if(B7(n,b,e,m),"function"!=typeof g)throw Error("No callback provided to pbkdf2");
fD.isBuffer(n)||(n=fD.from(n,VM));fD.isBuffer(b)||(b=fD.from(b,VM));(function(r,v){r.then(function(y){RU.nextTick(function(){v(null,y)})},function(y){RU.nextTick(function(){v(y)})})})(function(r){if(rH.process&&!rH.process.browser||!VF||!VF.importKey||!VF.deriveBits)return Promise.resolve(!1);if(void 0!==SU[r])return SU[r];var v=a1(PU=PU||fD.alloc(8),PU,10,128,r).then(function(){return!0}).catch(function(){return!1});return SU[r]=v,v}(l).then(function(r){return r?a1(n,b,e,m,l):QU(n,b,e,m,a)}),g)}};
WM.pbkdf2Sync=QU;b1.equal=function(n,b,e){if(n!=b)throw Error(e||"Assertion failed: "+n+" != "+b);};var ns=b1,Kl={readUInt32BE:function(n,b){return(n[0+b]<<24|n[1+b]<<16|n[2+b]<<8|n[3+b])>>>0},writeUInt32BE:function(n,b,e){n[0+e]=b>>>24;n[1+e]=b>>>16&255;n[2+e]=b>>>8&255;n[3+e]=255&b},ip:function(n,b,e,m){for(var a=0,g=0,l=6;0<=l;l-=2){for(var r=0;24>=r;r+=8)a<<=1,a|=b>>>r+l&1;for(r=0;24>=r;r+=8)a<<=1,a|=n>>>r+l&1}for(l=6;0<=l;l-=2){for(r=1;25>=r;r+=8)g<<=1,g|=b>>>r+l&1;for(r=1;25>=r;r+=8)g<<=1,g|=
n>>>r+l&1}e[m+0]=a>>>0;e[m+1]=g>>>0},rip:function(n,b,e,m){for(var a=0,g=0,l=0;4>l;l++)for(var r=24;0<=r;r-=8)a<<=1,a|=b>>>r+l&1,a<<=1,a|=n>>>r+l&1;for(l=4;8>l;l++)for(r=24;0<=r;r-=8)g<<=1,g|=b>>>r+l&1,g<<=1,g|=n>>>r+l&1;e[m+0]=a>>>0;e[m+1]=g>>>0},pc1:function(n,b,e,m){for(var a=0,g=0,l=7;5<=l;l--){for(var r=0;24>=r;r+=8)a<<=1,a|=b>>r+l&1;for(r=0;24>=r;r+=8)a<<=1,a|=n>>r+l&1}for(r=0;24>=r;r+=8)a<<=1,a|=b>>r+l&1;for(l=1;3>=l;l++){for(r=0;24>=r;r+=8)g<<=1,g|=b>>r+l&1;for(r=0;24>=r;r+=8)g<<=1,g|=n>>
r+l&1}for(r=0;24>=r;r+=8)g<<=1,g|=n>>r+l&1;e[m+0]=a>>>0;e[m+1]=g>>>0},r28shl:function(n,b){return n<<b&268435455|n>>>28-b}},XM=[14,11,17,4,27,23,25,0,13,22,7,18,5,9,16,24,2,20,12,21,1,8,15,26,15,4,25,19,9,1,26,16,5,11,23,8,12,7,17,0,22,3,10,14,6,20,27,24];Kl.pc2=function(n,b,e,m){for(var a=0,g=0,l=XM.length>>>1,r=0;r<l;r++)a<<=1,a|=n>>>XM[r]&1;for(r=l;r<XM.length;r++)g<<=1,g|=b>>>XM[r]&1;e[m+0]=a>>>0;e[m+1]=g>>>0};Kl.expand=function(n,b,e){var m=0;var a=(1&n)<<5|n>>>27;for(var g=23;15<=g;g-=4)a<<=
6,a|=n>>>g&63;for(g=11;3<=g;g-=4)m|=n>>>g&63,m<<=6;b[e+0]=a>>>0;b[e+1]=(m|(31&n)<<1|n>>>31)>>>0};var D7=[14,0,4,15,13,7,1,4,2,14,15,2,11,13,8,1,3,10,10,6,6,12,12,11,5,9,9,5,0,3,7,8,4,15,1,12,14,8,8,2,13,4,6,9,2,1,11,7,15,5,12,11,9,3,7,14,3,10,10,0,5,6,0,13,15,3,1,13,8,4,14,7,6,15,11,2,3,8,4,14,9,12,7,0,2,1,13,10,12,6,0,9,5,11,10,5,0,13,14,8,7,10,11,1,10,3,4,15,13,4,1,2,5,11,8,6,12,7,6,12,9,0,3,5,2,14,15,9,10,13,0,7,9,0,14,9,6,3,3,4,15,6,5,10,1,2,13,8,12,5,7,14,11,12,4,11,2,15,8,1,13,1,6,10,4,13,9,
0,8,6,15,9,3,8,0,7,11,4,1,15,2,14,12,3,5,11,10,5,14,2,7,12,7,13,13,8,14,11,3,5,0,6,6,15,9,0,10,3,1,4,2,7,8,2,5,12,11,1,12,10,4,14,15,9,10,3,6,15,9,0,0,6,12,10,11,1,7,13,13,8,15,9,1,4,3,5,14,11,5,12,2,7,8,2,4,14,2,14,12,11,4,2,1,12,7,4,10,7,11,13,6,1,8,5,5,0,3,15,15,10,13,3,0,9,14,8,9,6,4,11,2,8,1,12,11,7,10,1,13,14,7,2,8,13,15,6,9,15,12,0,5,9,6,10,3,4,0,5,14,3,12,10,1,15,10,4,15,2,9,7,2,12,6,9,8,5,0,6,13,1,3,13,4,14,14,0,7,11,5,3,11,8,9,4,14,3,15,2,5,12,2,9,8,5,12,15,3,10,7,11,0,14,4,1,10,7,1,6,13,
0,11,8,6,13,4,13,11,0,2,11,14,7,15,4,0,9,8,1,13,10,3,14,12,3,9,5,7,12,5,2,10,15,6,8,1,6,1,6,4,11,11,13,13,8,12,1,3,4,7,10,14,7,10,9,15,5,6,0,8,15,0,14,5,2,9,3,2,12,13,1,2,15,8,13,4,8,6,10,15,3,11,7,1,4,10,12,9,5,3,6,14,11,5,0,0,14,12,9,7,2,7,2,11,1,4,14,1,7,9,4,12,10,14,8,2,13,0,15,6,12,10,9,13,0,15,3,3,5,5,6,8,11];Kl.substitute=function(n,b){for(var e=0,m=0;4>m;m++)e<<=4,e|=D7[64*m+(n>>>18-6*m&63)];for(m=0;4>m;m++)e<<=4,e|=D7[256+64*m+(b>>>18-6*m&63)];return e>>>0};var E7=[16,25,12,11,3,20,4,15,
31,17,9,6,27,14,1,22,30,24,8,18,0,5,29,23,13,19,2,26,10,21,28,7];Kl.permute=function(n){for(var b=0,e=0;e<E7.length;e++)b<<=1,b|=n>>>E7[e]&1;return b>>>0};Kl.padSplit=function(n,b,e){for(n=n.toString(2);n.length<b;)n="0"+n;for(var m=[],a=0;a<b;a+=e)m.push(n.slice(a,a+e));return m.join(" ")};var Mma=ns;gr.prototype._init=function(){};gr.prototype.update=function(n){return 0===n.length?[]:"decrypt"===this.type?this._updateDecrypt(n):this._updateEncrypt(n)};gr.prototype._buffer=function(n,b){for(var e=
Math.min(this.buffer.length-this.bufferOff,n.length-b),m=0;m<e;m++)this.buffer[this.bufferOff+m]=n[b+m];return this.bufferOff+=e,e};gr.prototype._flushBuffer=function(n,b){return this._update(this.buffer,0,n,b),this.bufferOff=0,this.blockSize};gr.prototype._updateEncrypt=function(n){var b=0,e=0,m=Array(((this.bufferOff+n.length)/this.blockSize|0)*this.blockSize);0!==this.bufferOff&&(b+=this._buffer(n,b),this.bufferOff===this.buffer.length&&(e+=this._flushBuffer(m,e)));for(var a=n.length-(n.length-
b)%this.blockSize;b<a;b+=this.blockSize)this._update(n,b,m,e),e+=this.blockSize;for(;b<n.length;b++,this.bufferOff++)this.buffer[this.bufferOff]=n[b];return m};gr.prototype._updateDecrypt=function(n){for(var b=0,e=0,m=Math.ceil((this.bufferOff+n.length)/this.blockSize)-1,a=Array(m*this.blockSize);0<m;m--)b+=this._buffer(n,b),e+=this._flushBuffer(a,e);return this._buffer(n,b),a};gr.prototype.final=function(n){var b,e;return n&&(b=this.update(n)),e="encrypt"===this.type?this._finalEncrypt():this._finalDecrypt(),
b?b.concat(e):e};gr.prototype._pad=function(n,b){if(0===b)return!1;for(;b<n.length;)n[b++]=0;return!0};gr.prototype._finalEncrypt=function(){if(!this._pad(this.buffer,this.bufferOff))return[];var n=Array(this.blockSize);return this._update(this.buffer,0,n,0),n};gr.prototype._unpad=function(n){return n};gr.prototype._finalDecrypt=function(){Mma.equal(this.bufferOff,this.blockSize,"Not enough data to decrypt");var n=Array(this.blockSize);return this._flushBuffer(n,0),this._unpad(n)};var F7=ns,c1=gr;
ti(es,c1);es.create=function(n){return new es(n)};var Nma=[1,1,2,2,2,2,2,2,1,2,2,2,2,2,2,1];es.prototype.deriveKeys=function(n,b){n.keys=Array(32);F7.equal(b.length,this.blockSize,"Invalid key length");var e=Kl.readUInt32BE(b,0);b=Kl.readUInt32BE(b,4);Kl.pc1(e,b,n.tmp,0);e=n.tmp[0];b=n.tmp[1];for(var m=0;m<n.keys.length;m+=2){var a=Nma[m>>>1];e=Kl.r28shl(e,a);b=Kl.r28shl(b,a);Kl.pc2(e,b,n.keys,m)}};es.prototype._update=function(n,b,e,m){var a=this._desState,g=Kl.readUInt32BE(n,b);n=Kl.readUInt32BE(n,
b+4);Kl.ip(g,n,a.tmp,0);g=a.tmp[0];n=a.tmp[1];"encrypt"===this.type?this._encrypt(a,g,n,a.tmp,0):this._decrypt(a,g,n,a.tmp,0);g=a.tmp[0];n=a.tmp[1];Kl.writeUInt32BE(e,g,m);Kl.writeUInt32BE(e,n,m+4)};es.prototype._pad=function(n,b){for(var e=n.length-b;b<n.length;b++)n[b]=e;return!0};es.prototype._unpad=function(n){for(var b=n[n.length-1],e=n.length-b;e<n.length;e++)F7.equal(n[e],b);return n.slice(0,n.length-b)};es.prototype._encrypt=function(n,b,e,m,a){for(var g=0;g<n.keys.length;g+=2){var l=n.keys[g],
r=n.keys[g+1];Kl.expand(e,n.tmp,0);l^=n.tmp[0];r^=n.tmp[1];l=Kl.substitute(l,r);r=e;e=(b^Kl.permute(l))>>>0;b=r}Kl.rip(e,b,m,a)};es.prototype._decrypt=function(n,b,e,m,a){for(var g=n.keys.length-2;0<=g;g-=2){var l=n.keys[g],r=n.keys[g+1];Kl.expand(e,n.tmp,0);l^=n.tmp[0];r^=n.tmp[1];l=Kl.substitute(l,r);r=e;e=(b^Kl.permute(l))>>>0;b=r}Kl.rip(e,b,m,a)};var YM={},Aea=ns,Oma=ti,ZM={};YM.instantiate=function(n){function b(g){n.call(this,g);this._cbcInit()}Oma(b,n);for(var e=Object.keys(ZM),m=0;m<e.length;m++){var a=
e[m];b.prototype[a]=ZM[a]}return b.create=function(g){return new b(g)},b};ZM._cbcInit=function(){this._cbcState=new zea(this.options.iv)};ZM._update=function(n,b,e,m){var a=this.constructor.super_.prototype,g=this._cbcState.iv;if("encrypt"===this.type){for(var l=0;l<this.blockSize;l++)g[l]^=n[b+l];a._update.call(this,g,0,e,m);for(l=0;l<this.blockSize;l++)g[l]=e[m+l]}else{a._update.call(this,n,b,e,m);for(l=0;l<this.blockSize;l++)e[m+l]^=g[l];for(l=0;l<this.blockSize;l++)g[l]=n[b+l]}};var Cea=ns,d1=
gr,dy=es;ti(bv,d1);bv.create=function(n){return new bv(n)};bv.prototype._update=function(n,b,e,m){var a=this._edeState;a.ciphers[0]._update(n,b,e,m);a.ciphers[1]._update(e,m,e,m);a.ciphers[2]._update(e,m,e,m)};bv.prototype._pad=dy.prototype._pad;bv.prototype._unpad=dy.prototype._unpad;var yK="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,e1=ao,Pma=ti,vA=wj.Buffer,WF={"des-ede3-cbc":YM.instantiate(bv),"des-ede3":bv,"des-ede-cbc":YM.instantiate(bv),"des-ede":bv,"des-cbc":YM.instantiate(es),
"des-ecb":es};WF.des=WF["des-cbc"];WF.des3=WF["des-ede3-cbc"];Pma(xK,e1);xK.prototype._update=function(n){return vA.from((this||yK)._des.update(n))};xK.prototype._final=function(){return vA.from((this||yK)._des.final())};var Qma=Mi.Buffer,YD=function(n,b){for(var e=Math.min(n.length,b.length),m=new Qma(e),a=0;a<e;++a)m[a]=n[a]^b[a];return m},G7=function(n){for(var b,e=n.length;e--;){if(255!==(b=n.readUInt8(e))){b++;n.writeUInt8(b,e);break}n.writeUInt8(0,e)}},H7={},XF=wj.Buffer,Dea=YD;H7.encrypt=function(n,
b,e){for(var m,a=XF.allocUnsafe(0);b.length;){if(0===n._cache.length&&(n._cache=n._cipher.encryptBlock(n._prev),n._prev=XF.allocUnsafe(0)),!(n._cache.length<=b.length)){a=XF.concat([a,f1(n,b,e)]);break}m=n._cache.length;a=XF.concat([a,f1(n,b.slice(0,m),e)]);b=b.slice(m)}return a};var I7={},TU=wj.Buffer;I7.encrypt=function(n,b,e){for(var m=b.length,a=TU.allocUnsafe(m),g=-1;++g<m;){var l=g;var r=n;var v=b[g],y=e,A=r._cipher.encryptBlock(r._prev)[0]^v;r=(r._prev=TU.concat([r._prev.slice(1),TU.from([y?
v:A])]),A);a[l]=r}return a};var J7={},$M=wj.Buffer;J7.encrypt=function(n,b,e){for(var m=b.length,a=$M.allocUnsafe(m),g=-1;++g<m;){for(var l=g,r,v,y=n,A=b[g],E=e,F=-1,H=0;8>++F;){v=A&1<<7-F?128:0;H+=(128&(r=y._cipher.encryptBlock(y._prev)[0]^v))>>F%8;var I=y,M=y._prev;r=E?v:r;v=M.length;var N=-1,W=$M.allocUnsafe(M.length);for(M=$M.concat([M,$M.from([r])]);++N<v;)W[N]=M[N]<<1|M[N+1]>>7;I._prev=W}a[l]=H}return a};var K7={},Rma=Mi.Buffer;K7.encrypt=function(n,b){for(;n._cache.length<b.length;)n._cache=
Rma.concat([n._cache,Eea(n)]);var e=n._cache.slice(0,b.length);return n._cache=n._cache.slice(b.length),YD(b,e)};var UU={},L7=wj.Buffer;UU.encrypt=function(n,b){var e=Math.ceil(b.length/16),m=n._cache.length;n._cache=L7.concat([n._cache,L7.allocUnsafe(16*e)]);for(var a=0;a<e;a++){var g=n;var l=g._cipher.encryptBlockRaw(g._prev);g=(G7(g._prev),l);l=m+16*a;n._cache.writeUInt32BE(g[0],l+0);n._cache.writeUInt32BE(g[1],l+4);n._cache.writeUInt32BE(g[2],l+8);n._cache.writeUInt32BE(g[3],l+12)}e=n._cache.slice(0,
b.length);return n._cache=n._cache.slice(b.length),YD(b,e)};var jB={"aes-128-ecb":{cipher:"AES",key:128,iv:0,mode:"ECB",type:"block"},"aes-192-ecb":{cipher:"AES",key:192,iv:0,mode:"ECB",type:"block"},"aes-256-ecb":{cipher:"AES",key:256,iv:0,mode:"ECB",type:"block"},"aes-128-cbc":{cipher:"AES",key:128,iv:16,mode:"CBC",type:"block"},"aes-192-cbc":{cipher:"AES",key:192,iv:16,mode:"CBC",type:"block"},"aes-256-cbc":{cipher:"AES",key:256,iv:16,mode:"CBC",type:"block"},aes128:{cipher:"AES",key:128,iv:16,
mode:"CBC",type:"block"},aes192:{cipher:"AES",key:192,iv:16,mode:"CBC",type:"block"},aes256:{cipher:"AES",key:256,iv:16,mode:"CBC",type:"block"},"aes-128-cfb":{cipher:"AES",key:128,iv:16,mode:"CFB",type:"stream"},"aes-192-cfb":{cipher:"AES",key:192,iv:16,mode:"CFB",type:"stream"},"aes-256-cfb":{cipher:"AES",key:256,iv:16,mode:"CFB",type:"stream"},"aes-128-cfb8":{cipher:"AES",key:128,iv:16,mode:"CFB8",type:"stream"},"aes-192-cfb8":{cipher:"AES",key:192,iv:16,mode:"CFB8",type:"stream"},"aes-256-cfb8":{cipher:"AES",
key:256,iv:16,mode:"CFB8",type:"stream"},"aes-128-cfb1":{cipher:"AES",key:128,iv:16,mode:"CFB1",type:"stream"},"aes-192-cfb1":{cipher:"AES",key:192,iv:16,mode:"CFB1",type:"stream"},"aes-256-cfb1":{cipher:"AES",key:256,iv:16,mode:"CFB1",type:"stream"},"aes-128-ofb":{cipher:"AES",key:128,iv:16,mode:"OFB",type:"stream"},"aes-192-ofb":{cipher:"AES",key:192,iv:16,mode:"OFB",type:"stream"},"aes-256-ofb":{cipher:"AES",key:256,iv:16,mode:"OFB",type:"stream"},"aes-128-ctr":{cipher:"AES",key:128,iv:16,mode:"CTR",
type:"stream"},"aes-192-ctr":{cipher:"AES",key:192,iv:16,mode:"CTR",type:"stream"},"aes-256-ctr":{cipher:"AES",key:256,iv:16,mode:"CTR",type:"stream"},"aes-128-gcm":{cipher:"AES",key:128,iv:12,mode:"GCM",type:"auth"},"aes-192-gcm":{cipher:"AES",key:192,iv:12,mode:"GCM",type:"auth"},"aes-256-gcm":{cipher:"AES",key:256,iv:12,mode:"GCM",type:"auth"}},Sma={ECB:{encrypt:function(n,b){return n._cipher.encryptBlock(b)},decrypt:function(n,b){return n._cipher.decryptBlock(b)}},CBC:{encrypt:function(n,b){b=
YD(b,n._prev);return n._prev=n._cipher.encryptBlock(b),n._prev},decrypt:function(n,b){var e=n._prev;n._prev=b;n=n._cipher.decryptBlock(b);return YD(n,e)}},CFB:H7,CFB8:I7,CFB1:J7,OFB:K7,CTR:UU,GCM:UU},VU;for(VU in jB)jB[VU].module=Sma[jB[VU].mode];var gs="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,sH={},zK=wj.Buffer,Tma=[0,1,2,4,8,16,32,64,128,27,54],cn=function(){for(var n=Array(256),b=0;256>b;b++)n[b]=128>b?b<<1:b<<1^283;b=[];for(var e=[],m=[[],[],[],[]],a=[[],
[],[],[]],g=0,l=0,r=0;256>r;++r){var v=l^l<<1^l<<2^l<<3^l<<4;v=v>>>8^255&v^99;b[g]=v;e[v]=g;var y=n[g],A=n[y],E=n[A],F=257*n[v]^16843008*v;m[0][g]=F<<24|F>>>8;m[1][g]=F<<16|F>>>16;m[2][g]=F<<8|F>>>24;m[3][g]=F;F=16843009*E^65537*A^257*y^16843008*g;a[0][v]=F<<24|F>>>8;a[1][v]=F<<16|F>>>16;a[2][v]=F<<8|F>>>24;a[3][v]=F;0===g?g=l=1:(g=y^n[n[n[E^y]]],l^=n[n[l]])}return{SBOX:b,INV_SBOX:e,SUB_MIX:m,INV_SUB_MIX:a}}();fs.blockSize=16;fs.keySize=32;fs.prototype.blockSize=fs.blockSize;fs.prototype.keySize=
fs.keySize;fs.prototype._reset=function(){for(var n=(this||gs)._key,b=n.length,e=b+6,m=4*(e+1),a=[],g=0;g<b;g++)a[g]=n[g];for(g=b;g<m;g++)n=a[g-1],0==g%b?(n=n<<8|n>>>24,n=cn.SBOX[n>>>24]<<24|cn.SBOX[n>>>16&255]<<16|cn.SBOX[n>>>8&255]<<8|cn.SBOX[255&n],n^=Tma[g/b|0]<<24):6<b&&4==g%b&&(n=cn.SBOX[n>>>24]<<24|cn.SBOX[n>>>16&255]<<16|cn.SBOX[n>>>8&255]<<8|cn.SBOX[255&n]),a[g]=a[g-b]^n;b=[];for(g=0;g<m;g++){n=m-g;var l=a[n-(g%4?0:4)];b[g]=4>g||4>=n?l:cn.INV_SUB_MIX[0][cn.SBOX[l>>>24]]^cn.INV_SUB_MIX[1][cn.SBOX[l>>>
16&255]]^cn.INV_SUB_MIX[2][cn.SBOX[l>>>8&255]]^cn.INV_SUB_MIX[3][cn.SBOX[255&l]]}(this||gs)._nRounds=e;(this||gs)._keySchedule=a;(this||gs)._invKeySchedule=b};fs.prototype.encryptBlockRaw=function(n){return g1(dR(n),(this||gs)._keySchedule,cn.SUB_MIX,cn.SBOX,(this||gs)._nRounds)};fs.prototype.encryptBlock=function(n){n=this.encryptBlockRaw(n);var b=zK.allocUnsafe(16);return b.writeUInt32BE(n[0],0),b.writeUInt32BE(n[1],4),b.writeUInt32BE(n[2],8),b.writeUInt32BE(n[3],12),b};fs.prototype.decryptBlock=
function(n){var b=(n=dR(n))[1];n[1]=n[3];n[3]=b;n=g1(n,(this||gs)._invKeySchedule,cn.INV_SUB_MIX,cn.INV_SBOX,(this||gs)._nRounds);b=zK.allocUnsafe(16);return b.writeUInt32BE(n[0],0),b.writeUInt32BE(n[3],4),b.writeUInt32BE(n[2],8),b.writeUInt32BE(n[1],12),b};fs.prototype.scrub=function(){eR((this||gs)._keySchedule);eR((this||gs)._invKeySchedule);eR((this||gs)._key)};sH.AES=fs;var Eo="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,gD=wj.Buffer,Uma=gD.alloc(16,0);YF.prototype.ghash=
function(n){for(var b=-1;++b<n.length;)(this||Eo).state[b]^=n[b];this._multiply()};YF.prototype._multiply=function(){for(var n,b,e=[(n=(this||Eo).h).readUInt32BE(0),n.readUInt32BE(4),n.readUInt32BE(8),n.readUInt32BE(12)],m=[0,0,0,0],a=-1;128>++a;){0!=((this||Eo).state[~~(a/8)]&1<<7-a%8)&&(m[0]^=e[0],m[1]^=e[1],m[2]^=e[2],m[3]^=e[3]);b=0!=(1&e[3]);for(n=3;0<n;n--)e[n]=e[n]>>>1|(1&e[n-1])<<31;e[0]>>>=1;b&&(e[0]^=-520093696)}(this||Eo).state=h1(m)};YF.prototype.update=function(n){for((this||Eo).cache=
gD.concat([(this||Eo).cache,n]);16<=(this||Eo).cache.length;)n=(this||Eo).cache.slice(0,16),(this||Eo).cache=(this||Eo).cache.slice(16),this.ghash(n)};YF.prototype.final=function(n,b){return(this||Eo).cache.length&&this.ghash(gD.concat([(this||Eo).cache,Uma],16)),this.ghash(h1([0,n,0,b])),(this||Eo).state};var Wh="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,Fea=sH,wq=wj.Buffer,i1=ao,j1=YF,Gea=G7;ti(ey,i1);ey.prototype._update=function(n){if(!(this||Wh)._called&&(this||
Wh)._alen){var b=16-(this||Wh)._alen%16;16>b&&(b=wq.alloc(b,0),(this||Wh)._ghash.update(b))}(this||Wh)._called=!0;b=(this||Wh)._mode.encrypt(this||Wh,n);return(this||Wh)._decrypt?(this||Wh)._ghash.update(n):(this||Wh)._ghash.update(b),(this||Wh)._len+=n.length,b};ey.prototype._final=function(){if((this||Wh)._decrypt&&!(this||Wh)._authTag)throw Error("Unsupported state or unable to authenticate data");var n=YD((this||Wh)._ghash.final(8*(this||Wh)._alen,8*(this||Wh)._len),(this||Wh)._cipher.encryptBlock((this||
Wh)._finID)),b;if(b=(this||Wh)._decrypt){b=(this||Wh)._authTag;var e=0;n.length!==b.length&&e++;for(var m=Math.min(n.length,b.length),a=0;a<m;++a)e+=n[a]^b[a];b=e}if(b)throw Error("Unsupported state or unable to authenticate data");(this||Wh)._authTag=n;(this||Wh)._cipher.scrub()};ey.prototype.getAuthTag=function(){if((this||Wh)._decrypt||!wq.isBuffer((this||Wh)._authTag))throw Error("Attempting to get auth tag in unsupported state");return(this||Wh)._authTag};ey.prototype.setAuthTag=function(n){if(!(this||
Wh)._decrypt)throw Error("Attempting to set auth tag in unsupported state");(this||Wh)._authTag=n};ey.prototype.setAAD=function(n){if((this||Wh)._called)throw Error("Attempting to set AAD in unsupported state");(this||Wh)._ghash.update(n);(this||Wh)._alen+=n.length};var wt="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,Hea=sH,fR=wj.Buffer,k1=ao;ti(ZF,k1);ZF.prototype._update=function(n){return(this||wt)._mode.encrypt(this||wt,n,(this||wt)._decrypt)};ZF.prototype._final=
function(){(this||wt)._cipher.scrub()};var kB=wj.Buffer,dG=function(n,b,e,m){if(kB.isBuffer(n)||(n=kB.from(n,"binary")),b&&(kB.isBuffer(b)||(b=kB.from(b,"binary")),8!==b.length))throw new RangeError("salt should be Buffer with 8 byte length");e/=8;for(var a=kB.alloc(e),g=kB.alloc(m||0),l=kB.alloc(0);0<e||0<m;){var r=new bD;r.update(l);r.update(n);b&&r.update(b);l=r.digest();r=0;if(0<e){var v=a.length-e;r=Math.min(e,l.length);l.copy(a,v,0,r);e-=r}r<l.length&&0<m&&(v=Math.min(m,l.length-r),l.copy(g,
g.length-m,r,r+v),m-=v)}return l.fill(0),{key:a,iv:g}},jk="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,Kea=ey,hD=wj.Buffer,n1=jB,Jea=ZF,l1=ao,Iea=sH;ti($F,l1);$F.prototype._update=function(n){var b;(this||jk)._cache.add(n);for(n=[];b=(this||jk)._cache.get((this||jk)._autopadding);)b=(this||jk)._mode.decrypt(this||jk,b),n.push(b);return hD.concat(n)};$F.prototype._final=function(){var n=(this||jk)._cache.flush();if((this||jk)._autopadding){n=(this||jk)._mode.decrypt(this||
jk,n);var b=n[15];if(1>b||16<b)throw Error("unable to decrypt data");for(var e=-1;++e<b;)if(n[e+(16-b)]!==b)throw Error("unable to decrypt data");n=16===b?void 0:n.slice(0,16-b);return n}if(n)throw Error("data not multiple of block length");};$F.prototype.setAutoPadding=function(n){return(this||jk)._autopadding=!!n,this||jk};AK.prototype.add=function(n){(this||jk).cache=hD.concat([(this||jk).cache,n])};AK.prototype.get=function(n){var b;if(n){if(16<(this||jk).cache.length)return b=(this||jk).cache.slice(0,
16),(this||jk).cache=(this||jk).cache.slice(16),b}else if(16<=(this||jk).cache.length)return b=(this||jk).cache.slice(0,16),(this||jk).cache=(this||jk).cache.slice(16),b;return null};AK.prototype.flush=function(){if((this||jk).cache.length)return(this||jk).cache};var Yk="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,q1=jB,Nea=ey,zw=wj.Buffer,Mea=ZF,o1=ao,Lea=sH;ti(aG,o1);aG.prototype._update=function(n){var b;(this||Yk)._cache.add(n);for(n=[];b=(this||Yk)._cache.get();)b=
(this||Yk)._mode.encrypt(this||Yk,b),n.push(b);return zw.concat(n)};var Vma=zw.alloc(16,16);aG.prototype._final=function(){var n=(this||Yk)._cache.flush();if((this||Yk)._autopadding)return n=(this||Yk)._mode.encrypt(this||Yk,n),(this||Yk)._cipher.scrub(),n;if(!n.equals(Vma))throw(this||Yk)._cipher.scrub(),Error("data not multiple of block length");};aG.prototype.setAutoPadding=function(n){return(this||Yk)._autopadding=!!n,this||Yk};BK.prototype.add=function(n){(this||Yk).cache=zw.concat([(this||Yk).cache,
n])};BK.prototype.get=function(){if(15<(this||Yk).cache.length){var n=(this||Yk).cache.slice(0,16);return(this||Yk).cache=(this||Yk).cache.slice(16),n}return null};BK.prototype.flush=function(){for(var n=16-(this||Yk).cache.length,b=zw.allocUnsafe(n),e=-1;++e<n;)b.writeUInt8(n,e);return zw.concat([(this||Yk).cache,b])};var ir={};ir.createCipher=ir.Cipher=function(n,b){var e=q1[n.toLowerCase()];if(!e)throw new TypeError("invalid suite type");b=dG(b,!1,e.key,e.iv);return p1(n,b.key,b.iv)};ir.createCipheriv=
ir.Cipheriv=p1;ir.createDecipher=ir.Decipher=function(n,b){var e=n1[n.toLowerCase()];if(!e)throw new TypeError("invalid suite type");b=dG(b,!1,e.key,e.iv);return m1(n,b.key,b.iv)};ir.createDecipheriv=ir.Decipheriv=m1;ir.listCiphers=ir.getCiphers=function(){return Object.keys(jB)};var My={"des-ecb":{key:8,iv:0}};My["des-cbc"]=My.des={key:8,iv:8};My["des-ede3-cbc"]=My.des3={key:24,iv:8};My["des-ede3"]={key:24,iv:0};My["des-ede-cbc"]={key:16,iv:8};My["des-ede"]={key:16,iv:0};var M7,N7,O7,r1=xK,hR=ir,
fy=jB,Aw=My;var Wma=M7=function(n,b){if(n=n.toLowerCase(),fy[n]){var e=fy[n].key;var m=fy[n].iv}else{if(!Aw[n])throw new TypeError("invalid suite type");e=8*Aw[n].key;m=Aw[n].iv}b=dG(b,!1,e,m);return gR(n,b.key,b.iv)};var Xma=N7=function(n,b){if(n=n.toLowerCase(),fy[n]){var e=fy[n].key;var m=fy[n].iv}else{if(!Aw[n])throw new TypeError("invalid suite type");e=8*Aw[n].key;m=Aw[n].iv}b=dG(b,!1,e,m);return iR(n,b.key,b.iv)};var Yma=O7=function(){return Object.keys(Aw).concat(hR.getCiphers())};var Zma=
Object.freeze({}),fb="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,P7={},Q7={exports:P7};!function(n,b){function e(K,aa){if(!K)throw Error(aa||"Assertion failed");}function m(K,aa){K.super_=aa;var T=function(){};T.prototype=aa.prototype;K.prototype=new T;K.prototype.constructor=K}function a(K,aa,T){if(a.isBN(K))return K;(this||fb).negative=0;(this||fb).words=null;(this||fb).length=0;(this||fb).red=null;null!==K&&("le"!==aa&&"be"!==aa||(T=aa,aa=10),this._init(K||0,
aa||10,T||"be"))}function g(K,aa,T){var U=0;for(T=Math.min(K.length,T);aa<T;aa++){var pa=K.charCodeAt(aa)-48;U<<=4;U|=49<=pa&&54>=pa?pa-49+10:17<=pa&&22>=pa?pa-17+10:15&pa}return U}function l(K,aa,T,U){var pa=0;for(T=Math.min(K.length,T);aa<T;aa++){var fa=K.charCodeAt(aa)-48;pa*=U;pa+=49<=fa?fa-49+10:17<=fa?fa-17+10:fa}return pa}function r(K,aa,T){T.negative=aa.negative^K.negative;var U=K.length+aa.length|0;T.length=U;U=U-1|0;var pa=(0|K.words[0])*(0|aa.words[0]),fa=pa/67108864|0;T.words[0]=67108863&
pa;for(var oa=1;oa<U;oa++){var gb=fa>>>26;pa=67108863&fa;fa=Math.min(oa,aa.length-1);for(var zb=Math.max(0,oa-K.length+1);zb<=fa;zb++)gb+=(pa=(0|K.words[oa-zb|0])*(0|aa.words[zb])+pa)/67108864|0,pa&=67108863;T.words[oa]=0|pa;fa=0|gb}return 0!==fa?T.words[oa]=0|fa:T.length--,T.strip()}function v(K,aa){(this||fb).x=K;(this||fb).y=aa}function y(K,aa){(this||fb).name=K;(this||fb).p=new a(aa,16);(this||fb).n=(this||fb).p.bitLength();(this||fb).k=(new a(1)).iushln((this||fb).n).isub((this||fb).p);(this||
fb).tmp=this._tmp()}function A(){y.call(this||fb,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function E(){y.call(this||fb,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function F(){y.call(this||fb,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function H(){y.call(this||fb,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function I(K){"string"==typeof K?(K=a._prime(K),(this||fb).m=K.p,(this||
fb).prime=K):(e(K.gtn(1),"modulus must be greater than 1"),(this||fb).m=K,(this||fb).prime=null)}function M(K){I.call(this||fb,K);(this||fb).shift=(this||fb).m.bitLength();0!=(this||fb).shift%26&&((this||fb).shift+=26-(this||fb).shift%26);(this||fb).r=(new a(1)).iushln((this||fb).shift);(this||fb).r2=this.imod((this||fb).r.sqr());(this||fb).rinv=(this||fb).r._invmp((this||fb).m);(this||fb).minv=(this||fb).rinv.mul((this||fb).r).isubn(1).div((this||fb).m);(this||fb).minv=(this||fb).minv.umod((this||
fb).r);(this||fb).minv=(this||fb).r.sub((this||fb).minv)}"object"==typeof n?n.exports=a:b.BN=a;a.BN=a;a.wordSize=26;try{var N=Zma.Buffer}catch(K){}a.isBN=function(K){return K instanceof a||null!==K&&"object"==typeof K&&K.constructor.wordSize===a.wordSize&&Array.isArray(K.words)};a.max=function(K,aa){return 0<K.cmp(aa)?K:aa};a.min=function(K,aa){return 0>K.cmp(aa)?K:aa};a.prototype._init=function(K,aa,T){if("number"==typeof K)return this._initNumber(K,aa,T);if("object"==typeof K)return this._initArray(K,
aa,T);"hex"===aa&&(aa=16);e(aa===(0|aa)&&2<=aa&&36>=aa);var U=0;"-"===(K=K.toString().replace(/\s+/g,""))[0]&&U++;16===aa?this._parseHex(K,U):this._parseBase(K,aa,U);"-"===K[0]&&((this||fb).negative=1);this.strip();"le"===T&&this._initArray(this.toArray(),aa,T)};a.prototype._initNumber=function(K,aa,T){0>K&&((this||fb).negative=1,K=-K);67108864>K?((this||fb).words=[67108863&K],(this||fb).length=1):4503599627370496>K?((this||fb).words=[67108863&K,K/67108864&67108863],(this||fb).length=2):(e(9007199254740992>
K),(this||fb).words=[67108863&K,K/67108864&67108863,1],(this||fb).length=3);"le"===T&&this._initArray(this.toArray(),aa,T)};a.prototype._initArray=function(K,aa,T){if(e("number"==typeof K.length),0>=K.length)return(this||fb).words=[0],(this||fb).length=1,this||fb;(this||fb).length=Math.ceil(K.length/3);(this||fb).words=Array((this||fb).length);for(aa=0;aa<(this||fb).length;aa++)(this||fb).words[aa]=0;var U=0;if("be"===T)for(aa=K.length-1,T=0;0<=aa;aa-=3){var pa=K[aa]|K[aa-1]<<8|K[aa-2]<<16;(this||
fb).words[T]|=pa<<U&67108863;(this||fb).words[T+1]=pa>>>26-U&67108863;26<=(U+=24)&&(U-=26,T++)}else if("le"===T)for(T=aa=0;aa<K.length;aa+=3)pa=K[aa]|K[aa+1]<<8|K[aa+2]<<16,(this||fb).words[T]|=pa<<U&67108863,(this||fb).words[T+1]=pa>>>26-U&67108863,26<=(U+=24)&&(U-=26,T++);return this.strip()};a.prototype._parseHex=function(K,aa){(this||fb).length=Math.ceil((K.length-aa)/6);(this||fb).words=Array((this||fb).length);for(var T=0;T<(this||fb).length;T++)(this||fb).words[T]=0;var U,pa=0;T=K.length-6;
for(U=0;T>=aa;T-=6){var fa=g(K,T,T+6);(this||fb).words[U]|=fa<<pa&67108863;(this||fb).words[U+1]|=fa>>>26-pa&4194303;26<=(pa+=24)&&(pa-=26,U++)}T+6!==aa&&(fa=g(K,aa,T+6),(this||fb).words[U]|=fa<<pa&67108863,(this||fb).words[U+1]|=fa>>>26-pa&4194303);this.strip()};a.prototype._parseBase=function(K,aa,T){(this||fb).words=[0];(this||fb).length=1;for(var U=0,pa=1;67108863>=pa;pa*=aa)U++;U--;pa=pa/aa|0;var fa=K.length-T,oa=fa%U;fa=Math.min(fa,fa-oa)+T;for(var gb=T;gb<fa;gb+=U)T=l(K,gb,gb+U,aa),this.imuln(pa),
67108864>(this||fb).words[0]+T?(this||fb).words[0]+=T:this._iaddn(T);if(0!==oa){U=1;T=l(K,gb,K.length,aa);for(gb=0;gb<oa;gb++)U*=aa;this.imuln(U);67108864>(this||fb).words[0]+T?(this||fb).words[0]+=T:this._iaddn(T)}};a.prototype.copy=function(K){K.words=Array((this||fb).length);for(var aa=0;aa<(this||fb).length;aa++)K.words[aa]=(this||fb).words[aa];K.length=(this||fb).length;K.negative=(this||fb).negative;K.red=(this||fb).red};a.prototype.clone=function(){var K=new a(null);return this.copy(K),K};
a.prototype._expand=function(K){for(;(this||fb).length<K;)(this||fb).words[(this||fb).length++]=0;return this||fb};a.prototype.strip=function(){for(;1<(this||fb).length&&0===(this||fb).words[(this||fb).length-1];)(this||fb).length--;return this._normSign()};a.prototype._normSign=function(){return 1===(this||fb).length&&0===(this||fb).words[0]&&((this||fb).negative=0),this||fb};a.prototype.inspect=function(){return((this||fb).red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var W=" 0 00 000 0000 00000 000000 0000000 00000000 000000000 0000000000 00000000000 000000000000 0000000000000 00000000000000 000000000000000 0000000000000000 00000000000000000 000000000000000000 0000000000000000000 00000000000000000000 000000000000000000000 0000000000000000000000 00000000000000000000000 000000000000000000000000 0000000000000000000000000".split(" "),
X=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],ea=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1E7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64E6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243E5,28629151,33554432,39135393,45435424,52521875,60466176];a.prototype.toString=function(K,aa){if(aa=0|aa||1,16===(K=K||10)||"hex"===K){var T="";for(var U=K=0,pa=0;pa<(this||
fb).length;pa++){var fa=(this||fb).words[pa],oa=(16777215&(fa<<K|U)).toString(16);T=0!==(U=fa>>>24-K&16777215)||pa!==(this||fb).length-1?W[6-oa.length]+oa+T:oa+T;26<=(K+=2)&&(K-=26,pa--)}for(0!==U&&(T=U.toString(16)+T);0!=T.length%aa;)T="0"+T;return 0!==(this||fb).negative&&(T="-"+T),T}if(K===(0|K)&&2<=K&&36>=K){U=X[K];pa=ea[K];T="";fa=this.clone();for(fa.negative=0;!fa.isZero();)oa=fa.modn(pa).toString(K),T=(fa=fa.idivn(pa)).isZero()?oa+T:W[U-oa.length]+oa+T;for(this.isZero()&&(T="0"+T);0!=T.length%
aa;)T="0"+T;return 0!==(this||fb).negative&&(T="-"+T),T}e(!1,"Base should be between 2 and 36")};a.prototype.toNumber=function(){var K=(this||fb).words[0];return 2===(this||fb).length?K+=67108864*(this||fb).words[1]:3===(this||fb).length&&1===(this||fb).words[2]?K+=4503599627370496+67108864*(this||fb).words[1]:2<(this||fb).length&&e(!1,"Number can only safely store up to 53 bits"),0!==(this||fb).negative?-K:K};a.prototype.toJSON=function(){return this.toString(16)};a.prototype.toBuffer=function(K,
aa){return e(void 0!==N),this.toArrayLike(N,K,aa)};a.prototype.toArray=function(K,aa){return this.toArrayLike(Array,K,aa)};a.prototype.toArrayLike=function(K,aa,T){var U=this.byteLength();T=T||Math.max(1,U);e(U<=T,"byte array longer than desired length");e(0<T,"Requested array length <= 0");this.strip();var pa="le"===aa;K=new K(T);aa=this.clone();if(pa){for(pa=0;!aa.isZero();pa++)U=aa.andln(255),aa.iushrn(8),K[pa]=U;for(;pa<T;pa++)K[pa]=0}else{for(pa=0;pa<T-U;pa++)K[pa]=0;for(pa=0;!aa.isZero();pa++)U=
aa.andln(255),aa.iushrn(8),K[T-pa-1]=U}return K};Math.clz32?a.prototype._countBits=function(K){return 32-Math.clz32(K)}:a.prototype._countBits=function(K){var aa=0;return 4096<=K&&(aa+=13,K>>>=13),64<=K&&(aa+=7,K>>>=7),8<=K&&(aa+=4,K>>>=4),2<=K&&(aa+=2,K>>>=2),aa+K};a.prototype._zeroBits=function(K){if(0===K)return 26;var aa=0;return 0==(8191&K)&&(aa+=13,K>>>=13),0==(127&K)&&(aa+=7,K>>>=7),0==(15&K)&&(aa+=4,K>>>=4),0==(3&K)&&(aa+=2,K>>>=2),0==(1&K)&&aa++,aa};a.prototype.bitLength=function(){var K=
this._countBits((this||fb).words[(this||fb).length-1]);return 26*((this||fb).length-1)+K};a.prototype.zeroBits=function(){if(this.isZero())return 0;for(var K=0,aa=0;aa<(this||fb).length;aa++){var T=this._zeroBits((this||fb).words[aa]);if(K+=T,26!==T)break}return K};a.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)};a.prototype.toTwos=function(K){return 0!==(this||fb).negative?this.abs().inotn(K).iaddn(1):this.clone()};a.prototype.fromTwos=function(K){return this.testn(K-1)?this.notn(K).iaddn(1).ineg():
this.clone()};a.prototype.isNeg=function(){return 0!==(this||fb).negative};a.prototype.neg=function(){return this.clone().ineg()};a.prototype.ineg=function(){return this.isZero()||((this||fb).negative^=1),this||fb};a.prototype.iuor=function(K){for(;(this||fb).length<K.length;)(this||fb).words[(this||fb).length++]=0;for(var aa=0;aa<K.length;aa++)(this||fb).words[aa]|=K.words[aa];return this.strip()};a.prototype.ior=function(K){return e(0==((this||fb).negative|K.negative)),this.iuor(K)};a.prototype.or=
function(K){return(this||fb).length>K.length?this.clone().ior(K):K.clone().ior(this||fb)};a.prototype.uor=function(K){return(this||fb).length>K.length?this.clone().iuor(K):K.clone().iuor(this||fb)};a.prototype.iuand=function(K){var aa=(this||fb).length>K.length?K:this||fb;for(var T=0;T<aa.length;T++)(this||fb).words[T]&=K.words[T];return(this||fb).length=aa.length,this.strip()};a.prototype.iand=function(K){return e(0==((this||fb).negative|K.negative)),this.iuand(K)};a.prototype.and=function(K){return(this||
fb).length>K.length?this.clone().iand(K):K.clone().iand(this||fb)};a.prototype.uand=function(K){return(this||fb).length>K.length?this.clone().iuand(K):K.clone().iuand(this||fb)};a.prototype.iuxor=function(K){var aa,T;(this||fb).length>K.length?(aa=this||fb,T=K):(aa=K,T=this||fb);for(K=0;K<T.length;K++)(this||fb).words[K]=aa.words[K]^T.words[K];if((this||fb)!==aa)for(;K<aa.length;K++)(this||fb).words[K]=aa.words[K];return(this||fb).length=aa.length,this.strip()};a.prototype.ixor=function(K){return e(0==
((this||fb).negative|K.negative)),this.iuxor(K)};a.prototype.xor=function(K){return(this||fb).length>K.length?this.clone().ixor(K):K.clone().ixor(this||fb)};a.prototype.uxor=function(K){return(this||fb).length>K.length?this.clone().iuxor(K):K.clone().iuxor(this||fb)};a.prototype.inotn=function(K){e("number"==typeof K&&0<=K);var aa=0|Math.ceil(K/26);K%=26;this._expand(aa);0<K&&aa--;for(var T=0;T<aa;T++)(this||fb).words[T]=67108863&~(this||fb).words[T];return 0<K&&((this||fb).words[T]=~(this||fb).words[T]&
67108863>>26-K),this.strip()};a.prototype.notn=function(K){return this.clone().inotn(K)};a.prototype.setn=function(K,aa){e("number"==typeof K&&0<=K);var T=K/26|0;K%=26;return this._expand(T+1),(this||fb).words[T]=aa?(this||fb).words[T]|1<<K:(this||fb).words[T]&~(1<<K),this.strip()};a.prototype.iadd=function(K){var aa,T,U;if(0!==(this||fb).negative&&0===K.negative)return(this||fb).negative=0,this.isub(K),(this||fb).negative^=1,this._normSign();if(0===(this||fb).negative&&0!==K.negative)return K.negative=
0,aa=this.isub(K),K.negative=1,aa._normSign();(this||fb).length>K.length?(T=this||fb,U=K):(T=K,U=this||fb);for(K=aa=0;K<U.length;K++)aa=(0|T.words[K])+(0|U.words[K])+aa,(this||fb).words[K]=67108863&aa,aa>>>=26;for(;0!==aa&&K<T.length;K++)aa=(0|T.words[K])+aa,(this||fb).words[K]=67108863&aa,aa>>>=26;if((this||fb).length=T.length,0!==aa)(this||fb).words[(this||fb).length]=aa,(this||fb).length++;else if(T!==(this||fb))for(;K<T.length;K++)(this||fb).words[K]=T.words[K];return this||fb};a.prototype.add=
function(K){var aa;return 0!==K.negative&&0===(this||fb).negative?(K.negative=0,aa=this.sub(K),K.negative^=1,aa):0===K.negative&&0!==(this||fb).negative?((this||fb).negative=0,aa=K.sub(this||fb),(this||fb).negative=1,aa):(this||fb).length>K.length?this.clone().iadd(K):K.clone().iadd(this||fb)};a.prototype.isub=function(K){if(0!==K.negative){K.negative=0;var aa=this.iadd(K);return K.negative=1,aa._normSign()}if(0!==(this||fb).negative)return(this||fb).negative=0,this.iadd(K),(this||fb).negative=1,
this._normSign();var T,U;aa=this.cmp(K);if(0===aa)return(this||fb).negative=0,(this||fb).length=1,(this||fb).words[0]=0,this||fb;0<aa?(T=this||fb,U=K):(T=K,U=this||fb);for(var pa=K=0;pa<U.length;pa++)K=(aa=(0|T.words[pa])-(0|U.words[pa])+K)>>26,(this||fb).words[pa]=67108863&aa;for(;0!==K&&pa<T.length;pa++)K=(aa=(0|T.words[pa])+K)>>26,(this||fb).words[pa]=67108863&aa;if(0===K&&pa<T.length&&T!==(this||fb))for(;pa<T.length;pa++)(this||fb).words[pa]=T.words[pa];return(this||fb).length=Math.max((this||
fb).length,pa),T!==(this||fb)&&((this||fb).negative=1),this.strip()};a.prototype.sub=function(K){return this.clone().isub(K)};var Aa=function(K,aa,T){var U=K.words,pa=aa.words,fa=T.words,oa=0|U[0],gb=8191&oa;oa>>>=13;var zb=0|U[1],va=8191&zb;zb>>>=13;var ma=0|U[2],ta=8191&ma;ma>>>=13;var Na=0|U[3],Kb=8191&Na;Na>>>=13;var kc=0|U[4],Vb=8191&kc;kc>>>=13;var jc=0|U[5],Qc=8191&jc;jc>>>=13;var Pb=0|U[6],xd=8191&Pb;Pb>>>=13;var Td=0|U[7],ka=8191&Td;Td>>>=13;var Fa=0|U[8],Sa=8191&Fa;Fa>>>=13;var wb=0|U[9];
U=8191&wb;wb>>>=13;var cc=0|pa[0],Ld=8191&cc,Jd=cc>>>13,Uc=0|pa[1];cc=8191&Uc;var af=Uc>>>13,Ne=0|pa[2];Uc=8191&Ne;var Qh=Ne>>>13,mh=0|pa[3];Ne=8191&mh;var kj=mh>>>13,cj=0|pa[4];mh=8191&cj;var lj=cj>>>13,Cj=0|pa[5];cj=8191&Cj;var Lj=Cj>>>13,Ti=0|pa[6];Cj=8191&Ti;var ph=Ti>>>13,Wj=0|pa[7];Ti=8191&Wj;var Fk=Wj>>>13,ck=0|pa[8];Wj=8191&ck;ck>>>=13;var Gk=0|pa[9];pa=8191&Gk;Gk>>>=13;T.negative=K.negative^aa.negative;T.length=19;var Fy=(0+Math.imul(gb,Ld)|0)+((8191&(K=(K=Math.imul(gb,Jd))+Math.imul(oa,
Ld)|0))<<13)|0;aa=(Math.imul(oa,Jd)+(K>>>13)|0)+(Fy>>>26)|0;Fy&=67108863;var Od=Math.imul(va,Ld);K=(K=Math.imul(va,Jd))+Math.imul(zb,Ld)|0;var Pd=Math.imul(zb,Jd);var Ey=(aa+(Od+Math.imul(gb,cc)|0)|0)+((8191&(K=(K=K+Math.imul(gb,af)|0)+Math.imul(oa,cc)|0))<<13)|0;aa=((Pd+Math.imul(oa,af)|0)+(K>>>13)|0)+(Ey>>>26)|0;Ey&=67108863;Od=Math.imul(ta,Ld);K=(K=Math.imul(ta,Jd))+Math.imul(ma,Ld)|0;Pd=Math.imul(ma,Jd);Od=Od+Math.imul(va,cc)|0;K=(K=K+Math.imul(va,af)|0)+Math.imul(zb,cc)|0;Pd=Pd+Math.imul(zb,
af)|0;var Rw=(aa+(Od+Math.imul(gb,Uc)|0)|0)+((8191&(K=(K=K+Math.imul(gb,Qh)|0)+Math.imul(oa,Uc)|0))<<13)|0;aa=((Pd+Math.imul(oa,Qh)|0)+(K>>>13)|0)+(Rw>>>26)|0;Rw&=67108863;Od=Math.imul(Kb,Ld);K=(K=Math.imul(Kb,Jd))+Math.imul(Na,Ld)|0;Pd=Math.imul(Na,Jd);Od=Od+Math.imul(ta,cc)|0;K=(K=K+Math.imul(ta,af)|0)+Math.imul(ma,cc)|0;Pd=Pd+Math.imul(ma,af)|0;Od=Od+Math.imul(va,Uc)|0;K=(K=K+Math.imul(va,Qh)|0)+Math.imul(zb,Uc)|0;Pd=Pd+Math.imul(zb,Qh)|0;var tv=(aa+(Od+Math.imul(gb,Ne)|0)|0)+((8191&(K=(K=K+Math.imul(gb,
kj)|0)+Math.imul(oa,Ne)|0))<<13)|0;aa=((Pd+Math.imul(oa,kj)|0)+(K>>>13)|0)+(tv>>>26)|0;tv&=67108863;Od=Math.imul(Vb,Ld);K=(K=Math.imul(Vb,Jd))+Math.imul(kc,Ld)|0;Pd=Math.imul(kc,Jd);Od=Od+Math.imul(Kb,cc)|0;K=(K=K+Math.imul(Kb,af)|0)+Math.imul(Na,cc)|0;Pd=Pd+Math.imul(Na,af)|0;Od=Od+Math.imul(ta,Uc)|0;K=(K=K+Math.imul(ta,Qh)|0)+Math.imul(ma,Uc)|0;Pd=Pd+Math.imul(ma,Qh)|0;Od=Od+Math.imul(va,Ne)|0;K=(K=K+Math.imul(va,kj)|0)+Math.imul(zb,Ne)|0;Pd=Pd+Math.imul(zb,kj)|0;var VA=(aa+(Od+Math.imul(gb,mh)|
0)|0)+((8191&(K=(K=K+Math.imul(gb,lj)|0)+Math.imul(oa,mh)|0))<<13)|0;aa=((Pd+Math.imul(oa,lj)|0)+(K>>>13)|0)+(VA>>>26)|0;VA&=67108863;Od=Math.imul(Qc,Ld);K=(K=Math.imul(Qc,Jd))+Math.imul(jc,Ld)|0;Pd=Math.imul(jc,Jd);Od=Od+Math.imul(Vb,cc)|0;K=(K=K+Math.imul(Vb,af)|0)+Math.imul(kc,cc)|0;Pd=Pd+Math.imul(kc,af)|0;Od=Od+Math.imul(Kb,Uc)|0;K=(K=K+Math.imul(Kb,Qh)|0)+Math.imul(Na,Uc)|0;Pd=Pd+Math.imul(Na,Qh)|0;Od=Od+Math.imul(ta,Ne)|0;K=(K=K+Math.imul(ta,kj)|0)+Math.imul(ma,Ne)|0;Pd=Pd+Math.imul(ma,kj)|
0;Od=Od+Math.imul(va,mh)|0;K=(K=K+Math.imul(va,lj)|0)+Math.imul(zb,mh)|0;Pd=Pd+Math.imul(zb,lj)|0;var ZA=(aa+(Od+Math.imul(gb,cj)|0)|0)+((8191&(K=(K=K+Math.imul(gb,Lj)|0)+Math.imul(oa,cj)|0))<<13)|0;aa=((Pd+Math.imul(oa,Lj)|0)+(K>>>13)|0)+(ZA>>>26)|0;ZA&=67108863;Od=Math.imul(xd,Ld);K=(K=Math.imul(xd,Jd))+Math.imul(Pb,Ld)|0;Pd=Math.imul(Pb,Jd);Od=Od+Math.imul(Qc,cc)|0;K=(K=K+Math.imul(Qc,af)|0)+Math.imul(jc,cc)|0;Pd=Pd+Math.imul(jc,af)|0;Od=Od+Math.imul(Vb,Uc)|0;K=(K=K+Math.imul(Vb,Qh)|0)+Math.imul(kc,
Uc)|0;Pd=Pd+Math.imul(kc,Qh)|0;Od=Od+Math.imul(Kb,Ne)|0;K=(K=K+Math.imul(Kb,kj)|0)+Math.imul(Na,Ne)|0;Pd=Pd+Math.imul(Na,kj)|0;Od=Od+Math.imul(ta,mh)|0;K=(K=K+Math.imul(ta,lj)|0)+Math.imul(ma,mh)|0;Pd=Pd+Math.imul(ma,lj)|0;Od=Od+Math.imul(va,cj)|0;K=(K=K+Math.imul(va,Lj)|0)+Math.imul(zb,cj)|0;Pd=Pd+Math.imul(zb,Lj)|0;var $A=(aa+(Od+Math.imul(gb,Cj)|0)|0)+((8191&(K=(K=K+Math.imul(gb,ph)|0)+Math.imul(oa,Cj)|0))<<13)|0;aa=((Pd+Math.imul(oa,ph)|0)+(K>>>13)|0)+($A>>>26)|0;$A&=67108863;Od=Math.imul(ka,
Ld);K=(K=Math.imul(ka,Jd))+Math.imul(Td,Ld)|0;Pd=Math.imul(Td,Jd);Od=Od+Math.imul(xd,cc)|0;K=(K=K+Math.imul(xd,af)|0)+Math.imul(Pb,cc)|0;Pd=Pd+Math.imul(Pb,af)|0;Od=Od+Math.imul(Qc,Uc)|0;K=(K=K+Math.imul(Qc,Qh)|0)+Math.imul(jc,Uc)|0;Pd=Pd+Math.imul(jc,Qh)|0;Od=Od+Math.imul(Vb,Ne)|0;K=(K=K+Math.imul(Vb,kj)|0)+Math.imul(kc,Ne)|0;Pd=Pd+Math.imul(kc,kj)|0;Od=Od+Math.imul(Kb,mh)|0;K=(K=K+Math.imul(Kb,lj)|0)+Math.imul(Na,mh)|0;Pd=Pd+Math.imul(Na,lj)|0;Od=Od+Math.imul(ta,cj)|0;K=(K=K+Math.imul(ta,Lj)|0)+
Math.imul(ma,cj)|0;Pd=Pd+Math.imul(ma,Lj)|0;Od=Od+Math.imul(va,Cj)|0;K=(K=K+Math.imul(va,ph)|0)+Math.imul(zb,Cj)|0;Pd=Pd+Math.imul(zb,ph)|0;var aB=(aa+(Od+Math.imul(gb,Ti)|0)|0)+((8191&(K=(K=K+Math.imul(gb,Fk)|0)+Math.imul(oa,Ti)|0))<<13)|0;aa=((Pd+Math.imul(oa,Fk)|0)+(K>>>13)|0)+(aB>>>26)|0;aB&=67108863;Od=Math.imul(Sa,Ld);K=(K=Math.imul(Sa,Jd))+Math.imul(Fa,Ld)|0;Pd=Math.imul(Fa,Jd);Od=Od+Math.imul(ka,cc)|0;K=(K=K+Math.imul(ka,af)|0)+Math.imul(Td,cc)|0;Pd=Pd+Math.imul(Td,af)|0;Od=Od+Math.imul(xd,
Uc)|0;K=(K=K+Math.imul(xd,Qh)|0)+Math.imul(Pb,Uc)|0;Pd=Pd+Math.imul(Pb,Qh)|0;Od=Od+Math.imul(Qc,Ne)|0;K=(K=K+Math.imul(Qc,kj)|0)+Math.imul(jc,Ne)|0;Pd=Pd+Math.imul(jc,kj)|0;Od=Od+Math.imul(Vb,mh)|0;K=(K=K+Math.imul(Vb,lj)|0)+Math.imul(kc,mh)|0;Pd=Pd+Math.imul(kc,lj)|0;Od=Od+Math.imul(Kb,cj)|0;K=(K=K+Math.imul(Kb,Lj)|0)+Math.imul(Na,cj)|0;Pd=Pd+Math.imul(Na,Lj)|0;Od=Od+Math.imul(ta,Cj)|0;K=(K=K+Math.imul(ta,ph)|0)+Math.imul(ma,Cj)|0;Pd=Pd+Math.imul(ma,ph)|0;Od=Od+Math.imul(va,Ti)|0;K=(K=K+Math.imul(va,
Fk)|0)+Math.imul(zb,Ti)|0;Pd=Pd+Math.imul(zb,Fk)|0;var bB=(aa+(Od+Math.imul(gb,Wj)|0)|0)+((8191&(K=(K=K+Math.imul(gb,ck)|0)+Math.imul(oa,Wj)|0))<<13)|0;aa=((Pd+Math.imul(oa,ck)|0)+(K>>>13)|0)+(bB>>>26)|0;bB&=67108863;Od=Math.imul(U,Ld);K=(K=Math.imul(U,Jd))+Math.imul(wb,Ld)|0;Pd=Math.imul(wb,Jd);Od=Od+Math.imul(Sa,cc)|0;K=(K=K+Math.imul(Sa,af)|0)+Math.imul(Fa,cc)|0;Pd=Pd+Math.imul(Fa,af)|0;Od=Od+Math.imul(ka,Uc)|0;K=(K=K+Math.imul(ka,Qh)|0)+Math.imul(Td,Uc)|0;Pd=Pd+Math.imul(Td,Qh)|0;Od=Od+Math.imul(xd,
Ne)|0;K=(K=K+Math.imul(xd,kj)|0)+Math.imul(Pb,Ne)|0;Pd=Pd+Math.imul(Pb,kj)|0;Od=Od+Math.imul(Qc,mh)|0;K=(K=K+Math.imul(Qc,lj)|0)+Math.imul(jc,mh)|0;Pd=Pd+Math.imul(jc,lj)|0;Od=Od+Math.imul(Vb,cj)|0;K=(K=K+Math.imul(Vb,Lj)|0)+Math.imul(kc,cj)|0;Pd=Pd+Math.imul(kc,Lj)|0;Od=Od+Math.imul(Kb,Cj)|0;K=(K=K+Math.imul(Kb,ph)|0)+Math.imul(Na,Cj)|0;Pd=Pd+Math.imul(Na,ph)|0;Od=Od+Math.imul(ta,Ti)|0;K=(K=K+Math.imul(ta,Fk)|0)+Math.imul(ma,Ti)|0;Pd=Pd+Math.imul(ma,Fk)|0;Od=Od+Math.imul(va,Wj)|0;K=(K=K+Math.imul(va,
ck)|0)+Math.imul(zb,Wj)|0;Pd=Pd+Math.imul(zb,ck)|0;gb=(aa+(Od+Math.imul(gb,pa)|0)|0)+((8191&(K=(K=K+Math.imul(gb,Gk)|0)+Math.imul(oa,pa)|0))<<13)|0;aa=((Pd+Math.imul(oa,Gk)|0)+(K>>>13)|0)+(gb>>>26)|0;gb&=67108863;Od=Math.imul(U,cc);K=(K=Math.imul(U,af))+Math.imul(wb,cc)|0;Pd=Math.imul(wb,af);Od=Od+Math.imul(Sa,Uc)|0;K=(K=K+Math.imul(Sa,Qh)|0)+Math.imul(Fa,Uc)|0;Pd=Pd+Math.imul(Fa,Qh)|0;Od=Od+Math.imul(ka,Ne)|0;K=(K=K+Math.imul(ka,kj)|0)+Math.imul(Td,Ne)|0;Pd=Pd+Math.imul(Td,kj)|0;Od=Od+Math.imul(xd,
mh)|0;K=(K=K+Math.imul(xd,lj)|0)+Math.imul(Pb,mh)|0;Pd=Pd+Math.imul(Pb,lj)|0;Od=Od+Math.imul(Qc,cj)|0;K=(K=K+Math.imul(Qc,Lj)|0)+Math.imul(jc,cj)|0;Pd=Pd+Math.imul(jc,Lj)|0;Od=Od+Math.imul(Vb,Cj)|0;K=(K=K+Math.imul(Vb,ph)|0)+Math.imul(kc,Cj)|0;Pd=Pd+Math.imul(kc,ph)|0;Od=Od+Math.imul(Kb,Ti)|0;K=(K=K+Math.imul(Kb,Fk)|0)+Math.imul(Na,Ti)|0;Pd=Pd+Math.imul(Na,Fk)|0;Od=Od+Math.imul(ta,Wj)|0;K=(K=K+Math.imul(ta,ck)|0)+Math.imul(ma,Wj)|0;Pd=Pd+Math.imul(ma,ck)|0;oa=(aa+(Od+Math.imul(va,pa)|0)|0)+((8191&
(K=(K=K+Math.imul(va,Gk)|0)+Math.imul(zb,pa)|0))<<13)|0;aa=((Pd+Math.imul(zb,Gk)|0)+(K>>>13)|0)+(oa>>>26)|0;oa&=67108863;Od=Math.imul(U,Uc);K=(K=Math.imul(U,Qh))+Math.imul(wb,Uc)|0;Pd=Math.imul(wb,Qh);Od=Od+Math.imul(Sa,Ne)|0;K=(K=K+Math.imul(Sa,kj)|0)+Math.imul(Fa,Ne)|0;Pd=Pd+Math.imul(Fa,kj)|0;Od=Od+Math.imul(ka,mh)|0;K=(K=K+Math.imul(ka,lj)|0)+Math.imul(Td,mh)|0;Pd=Pd+Math.imul(Td,lj)|0;Od=Od+Math.imul(xd,cj)|0;K=(K=K+Math.imul(xd,Lj)|0)+Math.imul(Pb,cj)|0;Pd=Pd+Math.imul(Pb,Lj)|0;Od=Od+Math.imul(Qc,
Cj)|0;K=(K=K+Math.imul(Qc,ph)|0)+Math.imul(jc,Cj)|0;Pd=Pd+Math.imul(jc,ph)|0;Od=Od+Math.imul(Vb,Ti)|0;K=(K=K+Math.imul(Vb,Fk)|0)+Math.imul(kc,Ti)|0;Pd=Pd+Math.imul(kc,Fk)|0;Od=Od+Math.imul(Kb,Wj)|0;K=(K=K+Math.imul(Kb,ck)|0)+Math.imul(Na,Wj)|0;Pd=Pd+Math.imul(Na,ck)|0;va=(aa+(Od+Math.imul(ta,pa)|0)|0)+((8191&(K=(K=K+Math.imul(ta,Gk)|0)+Math.imul(ma,pa)|0))<<13)|0;aa=((Pd+Math.imul(ma,Gk)|0)+(K>>>13)|0)+(va>>>26)|0;va&=67108863;Od=Math.imul(U,Ne);K=(K=Math.imul(U,kj))+Math.imul(wb,Ne)|0;Pd=Math.imul(wb,
kj);Od=Od+Math.imul(Sa,mh)|0;K=(K=K+Math.imul(Sa,lj)|0)+Math.imul(Fa,mh)|0;Pd=Pd+Math.imul(Fa,lj)|0;Od=Od+Math.imul(ka,cj)|0;K=(K=K+Math.imul(ka,Lj)|0)+Math.imul(Td,cj)|0;Pd=Pd+Math.imul(Td,Lj)|0;Od=Od+Math.imul(xd,Cj)|0;K=(K=K+Math.imul(xd,ph)|0)+Math.imul(Pb,Cj)|0;Pd=Pd+Math.imul(Pb,ph)|0;Od=Od+Math.imul(Qc,Ti)|0;K=(K=K+Math.imul(Qc,Fk)|0)+Math.imul(jc,Ti)|0;Pd=Pd+Math.imul(jc,Fk)|0;Od=Od+Math.imul(Vb,Wj)|0;K=(K=K+Math.imul(Vb,ck)|0)+Math.imul(kc,Wj)|0;Pd=Pd+Math.imul(kc,ck)|0;zb=(aa+(Od+Math.imul(Kb,
pa)|0)|0)+((8191&(K=(K=K+Math.imul(Kb,Gk)|0)+Math.imul(Na,pa)|0))<<13)|0;aa=((Pd+Math.imul(Na,Gk)|0)+(K>>>13)|0)+(zb>>>26)|0;zb&=67108863;Od=Math.imul(U,mh);K=(K=Math.imul(U,lj))+Math.imul(wb,mh)|0;Pd=Math.imul(wb,lj);Od=Od+Math.imul(Sa,cj)|0;K=(K=K+Math.imul(Sa,Lj)|0)+Math.imul(Fa,cj)|0;Pd=Pd+Math.imul(Fa,Lj)|0;Od=Od+Math.imul(ka,Cj)|0;K=(K=K+Math.imul(ka,ph)|0)+Math.imul(Td,Cj)|0;Pd=Pd+Math.imul(Td,ph)|0;Od=Od+Math.imul(xd,Ti)|0;K=(K=K+Math.imul(xd,Fk)|0)+Math.imul(Pb,Ti)|0;Pd=Pd+Math.imul(Pb,Fk)|
0;Od=Od+Math.imul(Qc,Wj)|0;K=(K=K+Math.imul(Qc,ck)|0)+Math.imul(jc,Wj)|0;Pd=Pd+Math.imul(jc,ck)|0;ta=(aa+(Od+Math.imul(Vb,pa)|0)|0)+((8191&(K=(K=K+Math.imul(Vb,Gk)|0)+Math.imul(kc,pa)|0))<<13)|0;aa=((Pd+Math.imul(kc,Gk)|0)+(K>>>13)|0)+(ta>>>26)|0;ta&=67108863;Od=Math.imul(U,cj);K=(K=Math.imul(U,Lj))+Math.imul(wb,cj)|0;Pd=Math.imul(wb,Lj);Od=Od+Math.imul(Sa,Cj)|0;K=(K=K+Math.imul(Sa,ph)|0)+Math.imul(Fa,Cj)|0;Pd=Pd+Math.imul(Fa,ph)|0;Od=Od+Math.imul(ka,Ti)|0;K=(K=K+Math.imul(ka,Fk)|0)+Math.imul(Td,
Ti)|0;Pd=Pd+Math.imul(Td,Fk)|0;Od=Od+Math.imul(xd,Wj)|0;K=(K=K+Math.imul(xd,ck)|0)+Math.imul(Pb,Wj)|0;Pd=Pd+Math.imul(Pb,ck)|0;ma=(aa+(Od+Math.imul(Qc,pa)|0)|0)+((8191&(K=(K=K+Math.imul(Qc,Gk)|0)+Math.imul(jc,pa)|0))<<13)|0;aa=((Pd+Math.imul(jc,Gk)|0)+(K>>>13)|0)+(ma>>>26)|0;ma&=67108863;Od=Math.imul(U,Cj);K=(K=Math.imul(U,ph))+Math.imul(wb,Cj)|0;Pd=Math.imul(wb,ph);Od=Od+Math.imul(Sa,Ti)|0;K=(K=K+Math.imul(Sa,Fk)|0)+Math.imul(Fa,Ti)|0;Pd=Pd+Math.imul(Fa,Fk)|0;Od=Od+Math.imul(ka,Wj)|0;K=(K=K+Math.imul(ka,
ck)|0)+Math.imul(Td,Wj)|0;Pd=Pd+Math.imul(Td,ck)|0;Kb=(aa+(Od+Math.imul(xd,pa)|0)|0)+((8191&(K=(K=K+Math.imul(xd,Gk)|0)+Math.imul(Pb,pa)|0))<<13)|0;aa=((Pd+Math.imul(Pb,Gk)|0)+(K>>>13)|0)+(Kb>>>26)|0;Kb&=67108863;Od=Math.imul(U,Ti);K=(K=Math.imul(U,Fk))+Math.imul(wb,Ti)|0;Pd=Math.imul(wb,Fk);Od=Od+Math.imul(Sa,Wj)|0;K=(K=K+Math.imul(Sa,ck)|0)+Math.imul(Fa,Wj)|0;Pd=Pd+Math.imul(Fa,ck)|0;Na=(aa+(Od+Math.imul(ka,pa)|0)|0)+((8191&(K=(K=K+Math.imul(ka,Gk)|0)+Math.imul(Td,pa)|0))<<13)|0;aa=((Pd+Math.imul(Td,
Gk)|0)+(K>>>13)|0)+(Na>>>26)|0;Na&=67108863;Od=Math.imul(U,Wj);K=(K=Math.imul(U,ck))+Math.imul(wb,Wj)|0;Pd=Math.imul(wb,ck);Vb=(aa+(Od+Math.imul(Sa,pa)|0)|0)+((8191&(K=(K=K+Math.imul(Sa,Gk)|0)+Math.imul(Fa,pa)|0))<<13)|0;aa=((Pd+Math.imul(Fa,Gk)|0)+(K>>>13)|0)+(Vb>>>26)|0;Vb&=67108863;kc=(aa+Math.imul(U,pa)|0)+((8191&(K=(K=Math.imul(U,Gk))+Math.imul(wb,pa)|0))<<13)|0;return aa=(Math.imul(wb,Gk)+(K>>>13)|0)+(kc>>>26)|0,kc&=67108863,fa[0]=Fy,fa[1]=Ey,fa[2]=Rw,fa[3]=tv,fa[4]=VA,fa[5]=ZA,fa[6]=$A,fa[7]=
aB,fa[8]=bB,fa[9]=gb,fa[10]=oa,fa[11]=va,fa[12]=zb,fa[13]=ta,fa[14]=ma,fa[15]=Kb,fa[16]=Na,fa[17]=Vb,fa[18]=kc,0!==aa&&(fa[19]=aa,T.length++),T};Math.imul||(Aa=r);a.prototype.mulTo=function(K,aa){var T=(this||fb).length+K.length;if(10===(this||fb).length&&10===K.length)K=Aa(this||fb,K,aa);else if(63>T)K=r(this||fb,K,aa);else if(1024>T){T=this||fb;aa.negative=K.negative^T.negative;aa.length=T.length+K.length;for(var U=0,pa=0,fa=0;fa<aa.length-1;fa++){var oa=pa;pa=0;U&=67108863;for(var gb=Math.min(fa,
K.length-1),zb=Math.max(0,fa-T.length+1);zb<=gb;zb++){var va=(0|T.words[fa-zb])*(0|K.words[zb]),ma=67108863&va;U=67108863&(ma=ma+U|0);pa+=(oa=(oa=oa+(va/67108864|0)|0)+(ma>>>26)|0)>>>26;oa&=67108863}aa.words[fa]=U;U=oa}K=(0!==U?aa.words[fa]=U:aa.length--,aa.strip())}else T=this||fb,K=(new v).mulp(T,K,aa);return K};v.prototype.makeRBT=function(K){for(var aa=Array(K),T=a.prototype._countBits(K)-1,U=0;U<K;U++)aa[U]=this.revBin(U,T,K);return aa};v.prototype.revBin=function(K,aa,T){if(0===K||K===T-1)return K;
for(var U=T=0;U<aa;U++)T|=(1&K)<<aa-U-1,K>>=1;return T};v.prototype.permute=function(K,aa,T,U,pa,fa){for(var oa=0;oa<fa;oa++)U[oa]=aa[K[oa]],pa[oa]=T[K[oa]]};v.prototype.transform=function(K,aa,T,U,pa,fa){this.permute(fa,K,aa,T,U,pa);for(K=1;K<pa;K<<=1){aa=K<<1;fa=Math.cos(2*Math.PI/aa);for(var oa=Math.sin(2*Math.PI/aa),gb=0;gb<pa;gb+=aa)for(var zb=fa,va=oa,ma=0;ma<K;ma++){var ta=T[gb+ma],Na=U[gb+ma],Kb=T[gb+ma+K],kc=U[gb+ma+K],Vb=zb*Kb-va*kc;kc=zb*kc+va*Kb;Kb=Vb;T[gb+ma]=ta+Kb;U[gb+ma]=Na+kc;T[gb+
ma+K]=ta-Kb;U[gb+ma+K]=Na-kc;ma!==aa&&(Vb=fa*zb-oa*va,va=fa*va+oa*zb,zb=Vb)}}};v.prototype.guessLen13b=function(K,aa){K=1|Math.max(aa,K);aa=1&K;var T=0;for(K=K/2|0;K;K>>>=1)T++;return 1<<T+1+aa};v.prototype.conjugate=function(K,aa,T){if(!(1>=T))for(var U=0;U<T/2;U++){var pa=K[U];K[U]=K[T-U-1];K[T-U-1]=pa;pa=aa[U];aa[U]=-aa[T-U-1];aa[T-U-1]=-pa}};v.prototype.normalize13b=function(K,aa){for(var T=0,U=0;U<aa/2;U++)T=8192*Math.round(K[2*U+1]/aa)+Math.round(K[2*U]/aa)+T,K[U]=67108863&T,T=67108864>T?0:
T/67108864|0;return K};v.prototype.convert13b=function(K,aa,T,U){for(var pa=0,fa=0;fa<aa;fa++)pa+=0|K[fa],T[2*fa]=8191&pa,pa>>>=13,T[2*fa+1]=8191&pa,pa>>>=13;for(fa=2*aa;fa<U;++fa)T[fa]=0;e(0===pa);e(0==(-8192&pa))};v.prototype.stub=function(K){for(var aa=Array(K),T=0;T<K;T++)aa[T]=0;return aa};v.prototype.mulp=function(K,aa,T){var U=2*this.guessLen13b(K.length,aa.length),pa=this.makeRBT(U),fa=this.stub(U),oa=Array(U),gb=Array(U),zb=Array(U),va=Array(U),ma=Array(U),ta=Array(U),Na=T.words;Na.length=
U;this.convert13b(K.words,K.length,oa,U);this.convert13b(aa.words,aa.length,va,U);this.transform(oa,fa,gb,zb,U,pa);this.transform(va,fa,ma,ta,U,pa);for(oa=0;oa<U;oa++)va=gb[oa]*ma[oa]-zb[oa]*ta[oa],zb[oa]=gb[oa]*ta[oa]+zb[oa]*ma[oa],gb[oa]=va;return this.conjugate(gb,zb,U),this.transform(gb,zb,Na,fa,U,pa),this.conjugate(Na,fa,U),this.normalize13b(Na,U),T.negative=K.negative^aa.negative,T.length=K.length+aa.length,T.strip()};a.prototype.mul=function(K){var aa=new a(null);return aa.words=Array((this||
fb).length+K.length),this.mulTo(K,aa)};a.prototype.mulf=function(K){var aa=new a(null);aa.words=Array((this||fb).length+K.length);var T=this||fb;return(new v).mulp(T,K,aa)};a.prototype.imul=function(K){return this.clone().mulTo(K,this||fb)};a.prototype.imuln=function(K){e("number"==typeof K);e(67108864>K);for(var aa=0,T=0;T<(this||fb).length;T++){var U=(0|(this||fb).words[T])*K,pa=(67108863&U)+(67108863&aa);aa>>=26;aa+=U/67108864|0;aa+=pa>>>26;(this||fb).words[T]=67108863&pa}return 0!==aa&&((this||
fb).words[T]=aa,(this||fb).length++),this||fb};a.prototype.muln=function(K){return this.clone().imuln(K)};a.prototype.sqr=function(){return this.mul(this||fb)};a.prototype.isqr=function(){return this.imul(this.clone())};a.prototype.pow=function(K){for(var aa=Array(K.bitLength()),T=0;T<aa.length;T++){var U=T%26;aa[T]=(K.words[T/26|0]&1<<U)>>>U}if(0===aa.length)return new a(1);K=this||fb;for(T=0;T<aa.length&&0===aa[T];T++,K=K.sqr());if(++T<aa.length)for(U=K.sqr();T<aa.length;T++,U=U.sqr())0!==aa[T]&&
(K=K.mul(U));return K};a.prototype.iushln=function(K){e("number"==typeof K&&0<=K);var aa=K%26,T=(K-aa)/26,U=67108863>>>26-aa<<26-aa;if(0!==aa){var pa=0;for(K=0;K<(this||fb).length;K++){var fa=(this||fb).words[K]&U;(this||fb).words[K]=(0|(this||fb).words[K])-fa<<aa|pa;pa=fa>>>26-aa}pa&&((this||fb).words[K]=pa,(this||fb).length++)}if(0!==T){for(K=(this||fb).length-1;0<=K;K--)(this||fb).words[K+T]=(this||fb).words[K];for(K=0;K<T;K++)(this||fb).words[K]=0;(this||fb).length+=T}return this.strip()};a.prototype.ishln=
function(K){return e(0===(this||fb).negative),this.iushln(K)};a.prototype.iushrn=function(K,aa,T){e("number"==typeof K&&0<=K);aa=aa?(aa-aa%26)/26:0;var U=K%26,pa=Math.min((K-U)/26,(this||fb).length);K=67108863^67108863>>>U<<U;if(aa-=pa,aa=Math.max(0,aa),T){for(var fa=0;fa<pa;fa++)T.words[fa]=(this||fb).words[fa];T.length=pa}if(0!==pa)if((this||fb).length>pa)for((this||fb).length-=pa,fa=0;fa<(this||fb).length;fa++)(this||fb).words[fa]=(this||fb).words[fa+pa];else(this||fb).words[0]=0,(this||fb).length=
1;pa=0;for(fa=(this||fb).length-1;0<=fa&&(0!==pa||fa>=aa);fa--){var oa=0|(this||fb).words[fa];(this||fb).words[fa]=pa<<26-U|oa>>>U;pa=oa&K}return T&&0!==pa&&(T.words[T.length++]=pa),0===(this||fb).length&&((this||fb).words[0]=0,(this||fb).length=1),this.strip()};a.prototype.ishrn=function(K,aa,T){return e(0===(this||fb).negative),this.iushrn(K,aa,T)};a.prototype.shln=function(K){return this.clone().ishln(K)};a.prototype.ushln=function(K){return this.clone().iushln(K)};a.prototype.shrn=function(K){return this.clone().ishrn(K)};
a.prototype.ushrn=function(K){return this.clone().iushrn(K)};a.prototype.testn=function(K){e("number"==typeof K&&0<=K);var aa=K%26;K=(K-aa)/26;return!((this||fb).length<=K)&&!!((this||fb).words[K]&1<<aa)};a.prototype.imaskn=function(K){e("number"==typeof K&&0<=K);var aa=K%26;K=(K-aa)/26;if(e(0===(this||fb).negative,"imaskn works only with positive numbers"),(this||fb).length<=K)return this||fb;if(0!==aa&&K++,(this||fb).length=Math.min(K,(this||fb).length),0!==aa)(this||fb).words[(this||fb).length-
1]&=67108863^67108863>>>aa<<aa;return this.strip()};a.prototype.maskn=function(K){return this.clone().imaskn(K)};a.prototype.iaddn=function(K){return e("number"==typeof K),e(67108864>K),0>K?this.isubn(-K):0!==(this||fb).negative?1===(this||fb).length&&(0|(this||fb).words[0])<K?((this||fb).words[0]=K-(0|(this||fb).words[0]),(this||fb).negative=0,this||fb):((this||fb).negative=0,this.isubn(K),(this||fb).negative=1,this||fb):this._iaddn(K)};a.prototype._iaddn=function(K){(this||fb).words[0]+=K;for(K=
0;K<(this||fb).length&&67108864<=(this||fb).words[K];K++)(this||fb).words[K]-=67108864,K===(this||fb).length-1?(this||fb).words[K+1]=1:(this||fb).words[K+1]++;return(this||fb).length=Math.max((this||fb).length,K+1),this||fb};a.prototype.isubn=function(K){if(e("number"==typeof K),e(67108864>K),0>K)return this.iaddn(-K);if(0!==(this||fb).negative)return(this||fb).negative=0,this.iaddn(K),(this||fb).negative=1,this||fb;if((this||fb).words[0]-=K,1===(this||fb).length&&0>(this||fb).words[0])(this||fb).words[0]=
-(this||fb).words[0],(this||fb).negative=1;else for(K=0;K<(this||fb).length&&0>(this||fb).words[K];K++)(this||fb).words[K]+=67108864,--(this||fb).words[K+1];return this.strip()};a.prototype.addn=function(K){return this.clone().iaddn(K)};a.prototype.subn=function(K){return this.clone().isubn(K)};a.prototype.iabs=function(){return(this||fb).negative=0,this||fb};a.prototype.abs=function(){return this.clone().iabs()};a.prototype._ishlnsubmul=function(K,aa,T){var U;this._expand(K.length+T);var pa=0;for(U=
0;U<K.length;U++){var fa=(0|(this||fb).words[U+T])+pa;pa=(0|K.words[U])*aa;pa=((fa-=67108863&pa)>>26)-(pa/67108864|0);(this||fb).words[U+T]=67108863&fa}for(;U<(this||fb).length-T;U++)pa=(fa=(0|(this||fb).words[U+T])+pa)>>26,(this||fb).words[U+T]=67108863&fa;if(0===pa)return this.strip();e(-1===pa);for(U=pa=0;U<(this||fb).length;U++)pa=(fa=-(0|(this||fb).words[U])+pa)>>26,(this||fb).words[U]=67108863&fa;return(this||fb).negative=1,this.strip()};a.prototype._wordDiv=function(K,aa){var T=((this||fb).length,
K.length),U=this.clone(),pa=0|K.words[K.length-1];0!==(T=26-this._countBits(pa))&&(K=K.ushln(T),U.iushln(T),pa=0|K.words[K.length-1]);var fa,oa=U.length-K.length;if("mod"!==aa){(fa=new a(null)).length=oa+1;fa.words=Array(fa.length);for(var gb=0;gb<fa.length;gb++)fa.words[gb]=0}gb=U.clone()._ishlnsubmul(K,1,oa);0===gb.negative&&(U=gb,fa&&(fa.words[oa]=1));for(--oa;0<=oa;oa--){gb=67108864*(0|U.words[K.length+oa])+(0|U.words[K.length+oa-1]);gb=Math.min(gb/pa|0,67108863);for(U._ishlnsubmul(K,gb,oa);0!==
U.negative;)gb--,U.negative=0,U._ishlnsubmul(K,1,oa),U.isZero()||(U.negative^=1);fa&&(fa.words[oa]=gb)}return fa&&fa.strip(),U.strip(),"div"!==aa&&0!==T&&U.iushrn(T),{div:fa||null,mod:U}};a.prototype.divmod=function(K,aa,T){return e(!K.isZero()),this.isZero()?{div:new a(0),mod:new a(0)}:0!==(this||fb).negative&&0===K.negative?(fa=this.neg().divmod(K,aa),"mod"!==aa&&(U=fa.div.neg()),"div"!==aa&&(pa=fa.mod.neg(),T&&0!==pa.negative&&pa.iadd(K)),{div:U,mod:pa}):0===(this||fb).negative&&0!==K.negative?
(fa=this.divmod(K.neg(),aa),"mod"!==aa&&(U=fa.div.neg()),{div:U,mod:fa.mod}):0!=((this||fb).negative&K.negative)?(fa=this.neg().divmod(K.neg(),aa),"div"!==aa&&(pa=fa.mod.neg(),T&&0!==pa.negative&&pa.isub(K)),{div:fa.div,mod:pa}):K.length>(this||fb).length||0>this.cmp(K)?{div:new a(0),mod:this||fb}:1===K.length?"div"===aa?{div:this.divn(K.words[0]),mod:null}:"mod"===aa?{div:null,mod:new a(this.modn(K.words[0]))}:{div:this.divn(K.words[0]),mod:new a(this.modn(K.words[0]))}:this._wordDiv(K,aa);var U,
pa,fa};a.prototype.div=function(K){return this.divmod(K,"div",!1).div};a.prototype.mod=function(K){return this.divmod(K,"mod",!1).mod};a.prototype.umod=function(K){return this.divmod(K,"mod",!0).mod};a.prototype.divRound=function(K){var aa=this.divmod(K);if(aa.mod.isZero())return aa.div;var T=0!==aa.div.negative?aa.mod.isub(K):aa.mod,U=K.ushrn(1);K=K.andln(1);T=T.cmp(U);return 0>T||1===K&&0===T?aa.div:0!==aa.div.negative?aa.div.isubn(1):aa.div.iaddn(1)};a.prototype.modn=function(K){e(67108863>=K);
for(var aa=67108864%K,T=0,U=(this||fb).length-1;0<=U;U--)T=(aa*T+(0|(this||fb).words[U]))%K;return T};a.prototype.idivn=function(K){e(67108863>=K);for(var aa=0,T=(this||fb).length-1;0<=T;T--)aa=(0|(this||fb).words[T])+67108864*aa,(this||fb).words[T]=aa/K|0,aa%=K;return this.strip()};a.prototype.divn=function(K){return this.clone().idivn(K)};a.prototype.egcd=function(K){e(0===K.negative);e(!K.isZero());var aa=this||fb,T=K.clone();aa=0!==aa.negative?aa.umod(K):aa.clone();K=new a(1);for(var U=new a(0),
pa=new a(0),fa=new a(1),oa=0;aa.isEven()&&T.isEven();)aa.iushrn(1),T.iushrn(1),++oa;for(var gb=T.clone(),zb=aa.clone();!aa.isZero();){for(var va=0,ma=1;0==(aa.words[0]&ma)&&26>va;++va,ma<<=1);if(0<va)for(aa.iushrn(va);0<va--;)(K.isOdd()||U.isOdd())&&(K.iadd(gb),U.isub(zb)),K.iushrn(1),U.iushrn(1);va=0;for(ma=1;0==(T.words[0]&ma)&&26>va;++va,ma<<=1);if(0<va)for(T.iushrn(va);0<va--;)(pa.isOdd()||fa.isOdd())&&(pa.iadd(gb),fa.isub(zb)),pa.iushrn(1),fa.iushrn(1);0<=aa.cmp(T)?(aa.isub(T),K.isub(pa),U.isub(fa)):
(T.isub(aa),pa.isub(K),fa.isub(U))}return{a:pa,b:fa,gcd:T.iushln(oa)}};a.prototype._invmp=function(K){e(0===K.negative);e(!K.isZero());var aa=this||fb,T=K.clone();aa=0!==aa.negative?aa.umod(K):aa.clone();for(var U,pa=new a(1),fa=new a(0),oa=T.clone();0<aa.cmpn(1)&&0<T.cmpn(1);){for(var gb=0,zb=1;0==(aa.words[0]&zb)&&26>gb;++gb,zb<<=1);if(0<gb)for(aa.iushrn(gb);0<gb--;)pa.isOdd()&&pa.iadd(oa),pa.iushrn(1);gb=0;for(zb=1;0==(T.words[0]&zb)&&26>gb;++gb,zb<<=1);if(0<gb)for(T.iushrn(gb);0<gb--;)fa.isOdd()&&
fa.iadd(oa),fa.iushrn(1);0<=aa.cmp(T)?(aa.isub(T),pa.isub(fa)):(T.isub(aa),fa.isub(pa))}return 0>(U=0===aa.cmpn(1)?pa:fa).cmpn(0)&&U.iadd(K),U};a.prototype.gcd=function(K){if(this.isZero())return K.abs();if(K.isZero())return this.abs();var aa=this.clone();K=K.clone();aa.negative=0;for(var T=K.negative=0;aa.isEven()&&K.isEven();T++)aa.iushrn(1),K.iushrn(1);for(;;){for(;aa.isEven();)aa.iushrn(1);for(;K.isEven();)K.iushrn(1);var U=aa.cmp(K);if(0>U)U=aa,aa=K,K=U;else if(0===U||0===K.cmpn(1))break;aa.isub(K)}return K.iushln(T)};
a.prototype.invm=function(K){return this.egcd(K).a.umod(K)};a.prototype.isEven=function(){return 0==(1&(this||fb).words[0])};a.prototype.isOdd=function(){return 1==(1&(this||fb).words[0])};a.prototype.andln=function(K){return(this||fb).words[0]&K};a.prototype.bincn=function(K){e("number"==typeof K);var aa=K%26;K=(K-aa)/26;aa=1<<aa;if((this||fb).length<=K)return this._expand(K+1),(this||fb).words[K]|=aa,this||fb;for(;0!==aa&&K<(this||fb).length;K++){var T=0|(this||fb).words[K];aa=(T+=aa)>>>26;T&=67108863;
(this||fb).words[K]=T}return 0!==aa&&((this||fb).words[K]=aa,(this||fb).length++),this||fb};a.prototype.isZero=function(){return 1===(this||fb).length&&0===(this||fb).words[0]};a.prototype.cmpn=function(K){var aa=0>K;if(0!==(this||fb).negative&&!aa)return-1;if(0===(this||fb).negative&&aa)return 1;(this.strip(),1<(this||fb).length)?K=1:(aa&&(K=-K),e(67108863>=K,"Number is too big"),aa=0|(this||fb).words[0],K=aa===K?0:aa<K?-1:1);return 0!==(this||fb).negative?0|-K:K};a.prototype.cmp=function(K){if(0!==
(this||fb).negative&&0===K.negative)return-1;if(0===(this||fb).negative&&0!==K.negative)return 1;K=this.ucmp(K);return 0!==(this||fb).negative?0|-K:K};a.prototype.ucmp=function(K){if((this||fb).length>K.length)return 1;if((this||fb).length<K.length)return-1;for(var aa=0,T=(this||fb).length-1;0<=T;T--){var U=0|(this||fb).words[T],pa=0|K.words[T];if(U!==pa){U<pa?aa=-1:U>pa&&(aa=1);break}}return aa};a.prototype.gtn=function(K){return 1===this.cmpn(K)};a.prototype.gt=function(K){return 1===this.cmp(K)};
a.prototype.gten=function(K){return 0<=this.cmpn(K)};a.prototype.gte=function(K){return 0<=this.cmp(K)};a.prototype.ltn=function(K){return-1===this.cmpn(K)};a.prototype.lt=function(K){return-1===this.cmp(K)};a.prototype.lten=function(K){return 0>=this.cmpn(K)};a.prototype.lte=function(K){return 0>=this.cmp(K)};a.prototype.eqn=function(K){return 0===this.cmpn(K)};a.prototype.eq=function(K){return 0===this.cmp(K)};a.red=function(K){return new I(K)};a.prototype.toRed=function(K){return e(!(this||fb).red,
"Already a number in reduction context"),e(0===(this||fb).negative,"red works only with positives"),K.convertTo(this||fb)._forceRed(K)};a.prototype.fromRed=function(){return e((this||fb).red,"fromRed works only with numbers in reduction context"),(this||fb).red.convertFrom(this||fb)};a.prototype._forceRed=function(K){return(this||fb).red=K,this||fb};a.prototype.forceRed=function(K){return e(!(this||fb).red,"Already a number in reduction context"),this._forceRed(K)};a.prototype.redAdd=function(K){return e((this||
fb).red,"redAdd works only with red numbers"),(this||fb).red.add(this||fb,K)};a.prototype.redIAdd=function(K){return e((this||fb).red,"redIAdd works only with red numbers"),(this||fb).red.iadd(this||fb,K)};a.prototype.redSub=function(K){return e((this||fb).red,"redSub works only with red numbers"),(this||fb).red.sub(this||fb,K)};a.prototype.redISub=function(K){return e((this||fb).red,"redISub works only with red numbers"),(this||fb).red.isub(this||fb,K)};a.prototype.redShl=function(K){return e((this||
fb).red,"redShl works only with red numbers"),(this||fb).red.shl(this||fb,K)};a.prototype.redMul=function(K){return e((this||fb).red,"redMul works only with red numbers"),(this||fb).red._verify2(this||fb,K),(this||fb).red.mul(this||fb,K)};a.prototype.redIMul=function(K){return e((this||fb).red,"redMul works only with red numbers"),(this||fb).red._verify2(this||fb,K),(this||fb).red.imul(this||fb,K)};a.prototype.redSqr=function(){return e((this||fb).red,"redSqr works only with red numbers"),(this||
fb).red._verify1(this||fb),(this||fb).red.sqr(this||fb)};a.prototype.redISqr=function(){return e((this||fb).red,"redISqr works only with red numbers"),(this||fb).red._verify1(this||fb),(this||fb).red.isqr(this||fb)};a.prototype.redSqrt=function(){return e((this||fb).red,"redSqrt works only with red numbers"),(this||fb).red._verify1(this||fb),(this||fb).red.sqrt(this||fb)};a.prototype.redInvm=function(){return e((this||fb).red,"redInvm works only with red numbers"),(this||fb).red._verify1(this||fb),
(this||fb).red.invm(this||fb)};a.prototype.redNeg=function(){return e((this||fb).red,"redNeg works only with red numbers"),(this||fb).red._verify1(this||fb),(this||fb).red.neg(this||fb)};a.prototype.redPow=function(K){return e((this||fb).red&&!K.red,"redPow(normalNum)"),(this||fb).red._verify1(this||fb),(this||fb).red.pow(this||fb,K)};var Ma={k256:null,p224:null,p192:null,p25519:null};y.prototype._tmp=function(){var K=new a(null);return K.words=Array(Math.ceil((this||fb).n/13)),K};y.prototype.ireduce=
function(K){do{this.split(K,(this||fb).tmp);var aa=(K=(K=this.imulK(K)).iadd((this||fb).tmp)).bitLength()}while(aa>(this||fb).n);aa=aa<(this||fb).n?-1:K.ucmp((this||fb).p);return 0===aa?(K.words[0]=0,K.length=1):0<aa?K.isub((this||fb).p):K.strip(),K};y.prototype.split=function(K,aa){K.iushrn((this||fb).n,0,aa)};y.prototype.imulK=function(K){return K.imul((this||fb).k)};m(A,y);A.prototype.split=function(K,aa){for(var T=Math.min(K.length,9),U=0;U<T;U++)aa.words[U]=K.words[U];if(aa.length=T,9>=K.length)return K.words[0]=
0,K.length=1,void 0;T=K.words[9];aa.words[aa.length++]=4194303&T;for(U=10;U<K.length;U++)aa=0|K.words[U],K.words[U-10]=(4194303&aa)<<4|T>>>22,T=aa;T>>>=22;K.words[U-10]=T;0===T&&10<K.length?K.length-=10:K.length-=9};A.prototype.imulK=function(K){K.words[K.length]=0;K.words[K.length+1]=0;K.length+=2;for(var aa=0,T=0;T<K.length;T++){var U=0|K.words[T];aa+=977*U;K.words[T]=67108863&aa;aa=64*U+(aa/67108864|0)}return 0===K.words[K.length-1]&&(K.length--,0===K.words[K.length-1]&&K.length--),K};m(E,y);m(F,
y);m(H,y);H.prototype.imulK=function(K){for(var aa=0,T=0;T<K.length;T++){aa=19*(0|K.words[T])+aa;var U=67108863&aa;aa>>>=26;K.words[T]=U}return 0!==aa&&(K.words[K.length++]=aa),K};a._prime=function(K){if(Ma[K])return Ma[K];if("k256"===K)var aa=new A;else if("p224"===K)aa=new E;else if("p192"===K)aa=new F;else{if("p25519"!==K)throw Error("Unknown prime "+K);aa=new H}return Ma[K]=aa,aa};I.prototype._verify1=function(K){e(0===K.negative,"red works only with positives");e(K.red,"red works only with red numbers")};
I.prototype._verify2=function(K,aa){e(0==(K.negative|aa.negative),"red works only with positives");e(K.red&&K.red===aa.red,"red works only with red numbers")};I.prototype.imod=function(K){return(this||fb).prime?(this||fb).prime.ireduce(K)._forceRed(this||fb):K.umod((this||fb).m)._forceRed(this||fb)};I.prototype.neg=function(K){return K.isZero()?K.clone():(this||fb).m.sub(K)._forceRed(this||fb)};I.prototype.add=function(K,aa){this._verify2(K,aa);K=K.add(aa);return 0<=K.cmp((this||fb).m)&&K.isub((this||
fb).m),K._forceRed(this||fb)};I.prototype.iadd=function(K,aa){this._verify2(K,aa);K=K.iadd(aa);return 0<=K.cmp((this||fb).m)&&K.isub((this||fb).m),K};I.prototype.sub=function(K,aa){this._verify2(K,aa);K=K.sub(aa);return 0>K.cmpn(0)&&K.iadd((this||fb).m),K._forceRed(this||fb)};I.prototype.isub=function(K,aa){this._verify2(K,aa);K=K.isub(aa);return 0>K.cmpn(0)&&K.iadd((this||fb).m),K};I.prototype.shl=function(K,aa){return this._verify1(K),this.imod(K.ushln(aa))};I.prototype.imul=function(K,aa){return this._verify2(K,
aa),this.imod(K.imul(aa))};I.prototype.mul=function(K,aa){return this._verify2(K,aa),this.imod(K.mul(aa))};I.prototype.isqr=function(K){return this.imul(K,K.clone())};I.prototype.sqr=function(K){return this.mul(K,K)};I.prototype.sqrt=function(K){if(K.isZero())return K.clone();var aa=(this||fb).m.andln(3);if(e(1==aa%2),3===aa)return aa=(this||fb).m.add(new a(1)).iushrn(2),this.pow(K,aa);for(var T=(this||fb).m.subn(1),U=0;!T.isZero()&&0===T.andln(1);)U++,T.iushrn(1);e(!T.isZero());aa=(new a(1)).toRed(this||
fb);var pa=aa.redNeg(),fa=(this||fb).m.subn(1).iushrn(1),oa=(this||fb).m.bitLength();for(oa=(new a(2*oa*oa)).toRed(this||fb);0!==this.pow(oa,fa).cmp(pa);)oa.redIAdd(pa);fa=this.pow(oa,T);pa=this.pow(K,T.addn(1).iushrn(1));K=this.pow(K,T);for(T=U;0!==K.cmp(aa);){oa=K;for(U=0;0!==oa.cmp(aa);U++)oa=oa.redSqr();e(U<T);fa=this.pow(fa,(new a(1)).iushln(T-U-1));pa=pa.redMul(fa);fa=fa.redSqr();K=K.redMul(fa);T=U}return pa};I.prototype.invm=function(K){K=K._invmp((this||fb).m);return 0!==K.negative?(K.negative=
0,this.imod(K).redNeg()):this.imod(K)};I.prototype.pow=function(K,aa){if(aa.isZero())return(new a(1)).toRed(this||fb);if(0===aa.cmpn(1))return K.clone();var T=Array(16);T[0]=(new a(1)).toRed(this||fb);T[1]=K;for(var U=2;U<T.length;U++)T[U]=this.mul(T[U-1],K);K=T[0];var pa=0,fa=0,oa=aa.bitLength()%26;0===oa&&(oa=26);for(U=aa.length-1;0<=U;U--){var gb=aa.words[U];for(--oa;0<=oa;oa--){var zb=gb>>oa&1;K!==T[0]&&(K=this.sqr(K));0!==zb||0!==pa?(pa<<=1,pa|=zb,(4===++fa||0===U&&0===oa)&&(K=this.mul(K,T[pa]),
fa=0,pa=0)):fa=0}oa=26}return K};I.prototype.convertTo=function(K){var aa=K.umod((this||fb).m);return aa===K?aa.clone():aa};I.prototype.convertFrom=function(K){K=K.clone();return K.red=null,K};a.mont=function(K){return new M(K)};m(M,I);M.prototype.convertTo=function(K){return this.imod(K.ushln((this||fb).shift))};M.prototype.convertFrom=function(K){K=this.imod(K.mul((this||fb).rinv));return K.red=null,K};M.prototype.imul=function(K,aa){if(K.isZero()||aa.isZero())return K.words[0]=0,K.length=1,K;K=
K.imul(aa);aa=K.maskn((this||fb).shift).mul((this||fb).minv).imaskn((this||fb).shift).mul((this||fb).m);aa=K=K.isub(aa).iushrn((this||fb).shift);return 0<=K.cmp((this||fb).m)?aa=K.isub((this||fb).m):0>K.cmpn(0)&&(aa=K.iadd((this||fb).m)),aa._forceRed(this||fb)};M.prototype.mul=function(K,aa){if(K.isZero()||aa.isZero())return(new a(0))._forceRed(this||fb);K=K.mul(aa);aa=K.maskn((this||fb).shift).mul((this||fb).minv).imaskn((this||fb).shift).mul((this||fb).m);aa=K=K.isub(aa).iushrn((this||fb).shift);
return 0<=K.cmp((this||fb).m)?aa=K.isub((this||fb).m):0>K.cmpn(0)&&(aa=K.iadd((this||fb).m)),aa._forceRed(this||fb)};M.prototype.invm=function(K){return this.imod(K._invmp((this||fb).m).mul((this||fb).r2))._forceRed(this||fb)}}(Q7,P7);var Xm=Q7.exports,aN,WU,R7=Object.freeze({}),CK="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global;if((aN=function(n){return WU||(WU=new gy(null)),WU.generate(n)}).Rand=gy,gy.prototype.generate=function(n){return this._rand(n)},gy.prototype._rand=
function(n){if((this||CK).rand.getBytes)return(this||CK).rand.getBytes(n);n=new Uint8Array(n);for(var b=0;b<n.length;b++)n[b]=(this||CK).rand.getByte();return n},"object"==typeof self)self.crypto&&self.crypto.getRandomValues?gy.prototype._rand=function(n){n=new Uint8Array(n);return self.crypto.getRandomValues(n),n}:self.msCrypto&&self.msCrypto.getRandomValues?gy.prototype._rand=function(n){n=new Uint8Array(n);return self.msCrypto.getRandomValues(n),n}:"object"==typeof window&&(gy.prototype._rand=
function(){throw Error("Not implemented yet");});else try{if("function"!=typeof R7.randomBytes)throw Error("Not supported");gy.prototype._rand=function(n){return R7.randomBytes(n)}}catch(n){}var s1="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,lB=Xm,Oea=aN;hy.create=function(n){return new hy(n)};hy.prototype._randbelow=function(n){var b=n.bitLength();b=Math.ceil(b/8);do var e=new lB((this||s1).rand.generate(b));while(0<=e.cmp(n));return e};hy.prototype._randrange=
function(n,b){b=b.sub(n);return n.add(this._randbelow(b))};hy.prototype.test=function(n,b,e){var m=n.bitLength(),a=lB.mont(n),g=(new lB(1)).toRed(a);b||(b=Math.max(1,m/48|0));m=n.subn(1);for(var l=0;!m.testn(l);l++);n=n.shrn(l);for(var r=m.toRed(a);0<b;b--){var v=this._randrange(new lB(2),m);e&&e(v);v=v.toRed(a).redPow(n);if(0!==v.cmp(g)&&0!==v.cmp(r)){for(var y=1;y<l;y++){if(0===(v=v.redSqr()).cmp(g))return!1;if(0===v.cmp(r))break}if(y===l)return!1}}return!0};hy.prototype.getDivisor=function(n,b){var e=
n.bitLength(),m=lB.mont(n),a=(new lB(1)).toRed(m);b||(b=Math.max(1,e/48|0));e=n.subn(1);for(var g=0;!e.testn(g);g++);for(var l=n.shrn(g),r=e.toRed(m);0<b;b--){var v=this._randrange(new lB(2),e),y=n.gcd(v);if(0!==y.cmpn(1))return y;v=v.toRed(m).redPow(l);if(0!==v.cmp(a)&&0!==v.cmp(r)){for(y=1;y<g;y++){if(0===(v=v.redSqr()).cmp(a))return v.fromRed().subn(1).gcd(n);if(0===v.cmp(r))break}if(y===g)return v.redSqr().fromRed().subn(1).gcd(n)}}return!1};var Pea=Ky;bG.simpleSieve=jR;bG.fermatTest=lR;var dp=
Xm,Uea=new dp(24),u1=new hy,Qea=new dp(1),mR=new dp(2),Rea=new dp(5),Sea=(new dp(16),new dp(8),new dp(10)),Tea=new dp(3),Vea=(new dp(7),new dp(11)),t1=new dp(4),kR=(new dp(12),null),Aj="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,cv=Mi.Buffer,hs=Xm,S7=new hy,$ma=new hs(24),ana=new hs(11),bna=new hs(10),cna=new hs(3),dna=new hs(7),bN={};Object.defineProperty(xt.prototype,"verifyError",{enumerable:!0,get:function(){if("number"!=typeof(this||Aj)._primeCode){var n=(this||
Aj).__prime;var b=(this||Aj).__gen.toString("hex"),e=[b,n.toString(16)].join("_");if(e in bN)n=bN[e];else{var m,a=0;if(!n.isEven()&&bG.simpleSieve&&bG.fermatTest(n)&&S7.test(n)){switch(S7.test(n.shrn(1))||(a+=2),b){case "02":n.mod($ma).cmp(ana)&&(a+=8);break;case "05":(m=n.mod(bna)).cmp(cna)&&m.cmp(dna)&&(a+=8);break;default:a+=4}n=(bN[e]=a,a)}else n=(a+=1,a+="02"===b||"05"===b?8:4,bN[e]=a,a)}(this||Aj)._primeCode=n}return(this||Aj)._primeCode}});xt.prototype.generateKeys=function(){return(this||
Aj)._priv||((this||Aj)._priv=new hs(Ky((this||Aj)._primeLen))),(this||Aj)._pub=(this||Aj)._gen.toRed((this||Aj)._prime).redPow((this||Aj)._priv).fromRed(),this.getPublicKey()};xt.prototype.computeSecret=function(n){n=(new hs(n)).toRed((this||Aj)._prime).redPow((this||Aj)._priv).fromRed();n=new cv(n.toArray());var b=this.getPrime();n.length<b.length&&(b=new cv(b.length-n.length),b.fill(0),n=cv.concat([b,n]));return n};xt.prototype.getPublicKey=function(n){return DK((this||Aj)._pub,n)};xt.prototype.getPrivateKey=
function(n){return DK((this||Aj)._priv,n)};xt.prototype.getPrime=function(n){return DK((this||Aj).__prime,n)};xt.prototype.getGenerator=function(n){return DK((this||Aj)._gen,n)};xt.prototype.setGenerator=function(n,b){return b=b||"utf8",cv.isBuffer(n)||(n=new cv(n,b)),(this||Aj).__gen=n,(this||Aj)._gen=new hs(n),this||Aj};var T7,U7,V7,Ny=Mi.Buffer,W7={modp1:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a63a3620ffffffffffffffff"},
modp2:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece65381ffffffffffffffff"},modp5:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca237327ffffffffffffffff"},
modp14:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aacaa68ffffffffffffffff"},
modp15:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a93ad2caffffffffffffffff"},
modp16:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c934063199ffffffffffffffff"},
modp17:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dcc4024ffffffffffffffff"},
modp18:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dbe115974a3926f12fee5e438777cb6a932df8cd8bec4d073b931ba3bc832b68d9dd300741fa7bf8afc47ed2576f6936ba424663aab639c5ae4f5683423b4742bf1c978238f16cbe39d652de3fdb8befc848ad922222e04a4037c0713eb57a81a23f0c73473fc646cea306b4bcbc8862f8385ddfa9d4b7fa2c087e879683303ed5bdd3a062b3cf5b3a278a66d2a13f83f44f82ddf310ee074ab6a364597e899a0255dc164f31cc50846851df9ab48195ded7ea1b1d510bd7ee74d73faf36bc31ecfa268359046f4eb879f924009438b481c6cd7889a002ed5ee382bc9190da6fc026e479558e4475677e9aa9e3050e2765694dfc81f56e880b96e7160c980dd98edd3dfffffffffffffffff"}},
ena={binary:!0,hex:!0,base64:!0};var fna=T7=U7=function(n){var b=new Ny(W7[n].prime,"hex");n=new Ny(W7[n].gen,"hex");return new xt(b,n)};var gna=V7=function g(b,e,m,a){return Ny.isBuffer(e)||void 0===ena[e]?g(b,"binary",e,m):(e=e||"binary",a=a||"binary",m=m||new Ny([2]),Ny.isBuffer(m)||(m=new Ny(m,a)),"number"==typeof b?new xt(bG(b,m),m,!0):(Ny.isBuffer(b)||(b=new Ny(b,e)),new xt(b,m,!0)))};var Yea=Mi.Buffer,iy=Xm,w1=Ky;EK.getr=v1;var Oy={toArray:function(b,e){if(Array.isArray(b))return b.slice();
if(!b)return[];var m=[];if("string"!=typeof b){for(e=0;e<b.length;e++)m[e]=0|b[e];return m}if("hex"===e)for(0!=(b=b.replace(/[^a-z0-9]+/gi,"")).length%2&&(b="0"+b),e=0;e<b.length;e+=2)m.push(parseInt(b[e]+b[e+1],16));else for(e=0;e<b.length;e++){var a=b.charCodeAt(e),g=a>>8;a&=255;g?m.push(g,a):m.push(a)}return m}};Oy.zero2=x1;Oy.toHex=y1;Oy.encode=function(b,e){return"hex"===e?y1(b):b};var Oi={},hna=Xm;Oi.assert=ns;Oi.toArray=Oy.toArray;Oi.zero2=Oy.zero2;Oi.toHex=Oy.toHex;Oi.encode=Oy.encode;Oi.getNAF=
function(b,e,m){m=Array(Math.max(b.bitLength(),m)+1);m.fill(0);e=1<<e+1;b=b.clone();for(var a=0;a<m.length;a++){var g,l=b.andln(e-1);b.isOdd()?(g=l>(e>>1)-1?(e>>1)-l:l,b.isubn(g)):g=0;m[a]=g;b.iushrn(1)}return m};Oi.getJSF=function(b,e){var m=[[],[]];b=b.clone();e=e.clone();for(var a=0,g=0;0<b.cmpn(-a)||0<e.cmpn(-g);){var l;var r=b.andln(3)+a&3;var v=e.andln(3)+g&3;var y=(3===r&&(r=-1),3===v&&(v=-1),0==(1&r))?0:3!==(l=b.andln(7)+a&7)&&5!==l||2!==v?r:-r;r=(m[0].push(y),0==(1&v))?0:3!==(l=e.andln(7)+
g&7)&&5!==l||2!==r?v:-v;m[1].push(r);2*a===y+1&&(a=1-a);2*g===r+1&&(g=1-g);b.iushrn(1);e.iushrn(1)}return m};Oi.cachedProperty=function(b,e,m){var a="_"+e;b.prototype[e]=function(){return void 0!==this[a]?this[a]:this[a]=m.call(this)}};Oi.parseBytes=function(b){return"string"==typeof b?Oi.toArray(b,"hex"):b};Oi.intFromLE=function(b){return new hna(b,"hex","le")};var FK=Xm,Zea=Oi.assert;wA.prototype._importDER=function(b,e){b=Oi.toArray(b,e);var m=new $ea;if(48!==b[m.place++]||nR(b,m)+m.place!==b.length||
2!==b[m.place++])return!1;var a=nR(b,m);e=b.slice(m.place,a+m.place);if(m.place+=a,2!==b[m.place++])return!1;a=nR(b,m);if(b.length!==a+m.place)return!1;b=b.slice(m.place,a+m.place);return 0===e[0]&&128&e[1]&&(e=e.slice(1)),0===b[0]&&128&b[1]&&(b=b.slice(1)),this.r=new FK(e),this.s=new FK(b),this.recoveryParam=null,!0};wA.prototype.toDER=function(b){var e=this.r.toArray(),m=this.s.toArray();128&e[0]&&(e=[0].concat(e));128&m[0]&&(m=[0].concat(m));e=z1(e);for(m=z1(m);!(m[0]||128&m[1]);)m=m.slice(1);
var a=[2];oR(a,e.length);(a=a.concat(e)).push(2);oR(a,m.length);e=a.concat(m);m=[48];return oR(m,e.length),m=m.concat(e),Oi.encode(m,b)};var jg={},ina=ns;jg.inherits=ti;jg.toArray=function(b,e){if(Array.isArray(b))return b.slice();if(!b)return[];var m=[];if("string"==typeof b)if(e){if("hex"===e)for(0!=(b=b.replace(/[^a-z0-9]+/gi,"")).length%2&&(b="0"+b),a=0;a<b.length;a+=2)m.push(parseInt(b[a]+b[a+1],16))}else for(var a=e=0;a<b.length;a++){var g=b.charCodeAt(a);if(128>g)m[e++]=g;else if(2048>g)m[e++]=
g>>6|192,m[e++]=63&g|128;else{var l=b,r=a;55296!=(64512&l.charCodeAt(r))||0>r||r+1>=l.length||56320!=(64512&l.charCodeAt(r+1))?(m[e++]=g>>12|224,m[e++]=g>>6&63|128,m[e++]=63&g|128):(g=65536+((1023&g)<<10)+(1023&b.charCodeAt(++a)),m[e++]=g>>18|240,m[e++]=g>>12&63|128,m[e++]=g>>6&63|128,m[e++]=63&g|128)}}else for(a=0;a<b.length;a++)m[a]=0|b[a];return m};jg.toHex=function(b){for(var e="",m=0;m<b.length;m++)e+=B1(b[m].toString(16));return e};jg.htonl=A1;jg.toHex32=function(b,e){for(var m="",a=0;a<b.length;a++){var g=
b[a];"little"===e&&(g=A1(g));m+=C1(g.toString(16))}return m};jg.zero2=B1;jg.zero8=C1;jg.join32=function(b,e,m,a){m-=e;ina(0==m%4);m=Array(m/4);for(var g=0;g<m.length;g++,e+=4)m[g]=("big"===a?b[e]<<24|b[e+1]<<16|b[e+2]<<8|b[e+3]:b[e+3]<<24|b[e+2]<<16|b[e+1]<<8|b[e])>>>0;return m};jg.split32=function(b,e){for(var m=Array(4*b.length),a=0,g=0;a<b.length;a++,g+=4){var l=b[a];"big"===e?(m[g]=l>>>24,m[g+1]=l>>>16&255,m[g+2]=l>>>8&255,m[g+3]=255&l):(m[g+3]=l>>>24,m[g+2]=l>>>16&255,m[g+1]=l>>>8&255,m[g]=255&
l)}return m};jg.rotr32=function(b,e){return b>>>e|b<<32-e};jg.rotl32=function(b,e){return b<<e|b>>>32-e};jg.sum32=function(b,e){return b+e>>>0};jg.sum32_3=function(b,e,m){return b+e+m>>>0};jg.sum32_4=function(b,e,m,a){return b+e+m+a>>>0};jg.sum32_5=function(b,e,m,a,g){return b+e+m+a+g>>>0};jg.sum64=function(b,e,m,a){var g=a+b[e+1]>>>0;b[e]=(g<a?1:0)+m+b[e]>>>0;b[e+1]=g};jg.sum64_hi=function(b,e,m,a){return(e+a>>>0<e?1:0)+b+m>>>0};jg.sum64_lo=function(b,e,m,a){return e+a>>>0};jg.sum64_4_hi=function(b,
e,m,a,g,l,r,v){var y=0,A=e;return y+=(A=A+a>>>0)<e?1:0,y+=(A=A+l>>>0)<l?1:0,b+m+g+r+(y+(A+v>>>0<v?1:0))>>>0};jg.sum64_4_lo=function(b,e,m,a,g,l,r,v){return e+a+l+v>>>0};jg.sum64_5_hi=function(b,e,m,a,g,l,r,v,y,A){var E=0,F=e;return E+=(F=F+a>>>0)<e?1:0,E+=(F=F+l>>>0)<l?1:0,E+=(F=F+v>>>0)<v?1:0,b+m+g+r+y+(E+(F+A>>>0<A?1:0))>>>0};jg.sum64_5_lo=function(b,e,m,a,g,l,r,v,y,A){return e+a+l+v+A>>>0};jg.rotr64_hi=function(b,e,m){return(e<<32-m|b>>>m)>>>0};jg.rotr64_lo=function(b,e,m){return(b<<32-m|e>>>m)>>>
0};jg.shr64_hi=function(b,e,m){return b>>>m};jg.shr64_lo=function(b,e,m){return(b<<32-m|e>>>m)>>>0};var ZD={},jna=ns;ZD.BlockHash=GK;GK.prototype.update=function(b,e){if(b=jg.toArray(b,e),this.pending?this.pending=this.pending.concat(b):this.pending=b,this.pendingTotal+=b.length,this.pending.length>=this._delta8)for(e=(b=this.pending).length%this._delta8,this.pending=b.slice(b.length-e,b.length),0===this.pending.length&&(this.pending=null),b=jg.join32(b,0,b.length-e,this.endian),e=0;e<b.length;e+=
this._delta32)this._update(b,e,e+this._delta32);return this};GK.prototype.digest=function(b){return this.update(this._pad()),jna(null===this.pending),this._digest(b)};GK.prototype._pad=function(){var b=this.pendingTotal,e=this._delta8,m=e-(b+this.padLength)%e;e=Array(m+this.padLength);e[0]=128;for(var a=1;a<m;a++)e[a]=0;if(b<<=3,"big"===this.endian){for(m=8;m<this.padLength;m++)e[a++]=0;e[a++]=0;e[a++]=0;e[a++]=0;e[a++]=0;e[a++]=b>>>24&255;e[a++]=b>>>16&255;e[a++]=b>>>8&255;e[a++]=255&b}else for(e[a++]=
255&b,e[a++]=b>>>8&255,e[a++]=b>>>16&255,e[a++]=b>>>24&255,e[a++]=0,e[a++]=0,e[a++]=0,e[a++]=0,m=8;m<this.padLength;m++)e[a++]=0;return e};var kna=ns,zv=jg.rotr64_hi,Av=jg.rotr64_lo,X7=jg.shr64_hi,Y7=jg.shr64_lo,Py=jg.sum64,XU=jg.sum64_hi,YU=jg.sum64_lo,lna=jg.sum64_4_hi,mna=jg.sum64_4_lo,nna=jg.sum64_5_hi,ona=jg.sum64_5_lo,D1=ZD.BlockHash,afa=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,
3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,
338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,
2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,
1607167915,987167468,1816402316,1246189591];jg.inherits(is,D1);is.blockSize=1024;is.outSize=512;is.hmacStrength=192;is.padLength=128;is.prototype._prepareBlock=function(b,e){for(var m=this.W,a=0;32>a;a++)m[a]=b[e+a];for(;a<m.length;a+=2){b=m[a-4];e=m[a-3];e=zv(b,e,19)^zv(e,b,29)^X7(b,e,6);b=(0>e&&(e+=4294967296),e);e=m[a-4];var g=m[a-3];g=Av(e,g,19)^Av(g,e,29)^Y7(e,g,6);e=(0>g&&(g+=4294967296),g);g=m[a-14];var l=m[a-13];var r=m[a-30];var v=m[a-29];v=zv(r,v,1)^zv(r,v,8)^X7(r,v,7);r=(0>v&&(v+=4294967296),
v);v=m[a-30];var y=m[a-29];y=Av(v,y,1)^Av(v,y,8)^Y7(v,y,7);v=(0>y&&(y+=4294967296),y);y=m[a-32];var A=m[a-31];m[a]=lna(b,e,g,l,r,v,y,A);m[a+1]=mna(b,e,g,l,r,v,y,A)}};is.prototype._update=function(b,e){this._prepareBlock(b,e);b=this.W;e=this.h[0];var m=this.h[1],a=this.h[2],g=this.h[3],l=this.h[4],r=this.h[5],v=this.h[6],y=this.h[7],A=this.h[8],E=this.h[9],F=this.h[10],H=this.h[11],I=this.h[12],M=this.h[13],N=this.h[14],W=this.h[15];kna(this.k.length===b.length);for(var X=0;X<b.length;X+=2){var ea=
A;var Aa=E;ea=zv(ea,Aa,14)^zv(ea,Aa,18)^zv(Aa,ea,9);Aa=(0>ea&&(ea+=4294967296),ea);ea=A;var Ma=E;ea=Av(ea,Ma,14)^Av(ea,Ma,18)^Av(Ma,ea,9);var K=(0>ea&&(ea+=4294967296),ea);ea=A&F^~A&I;Ma=(0>ea&&(ea+=4294967296),ea);ea=E&H^~E&M;var aa=(0>ea&&(ea+=4294967296),ea);var T=this.k[X],U=this.k[X+1],pa=b[X],fa=b[X+1];ea=nna(N,W,Aa,K,Ma,aa,T,U,pa,fa);Ma=ona(N,W,Aa,K,Ma,aa,T,U,pa,fa);N=e;W=m;W=zv(N,W,28)^zv(W,N,2)^zv(W,N,7);N=(0>W&&(W+=4294967296),W);W=e;Aa=m;Aa=Av(W,Aa,28)^Av(Aa,W,2)^Av(Aa,W,7);W=(0>Aa&&(Aa+=
4294967296),Aa);K=e&a^e&l^a&l;Aa=(0>K&&(K+=4294967296),K);aa=m&g^m&r^g&r;K=(0>aa&&(aa+=4294967296),aa);aa=XU(N,W,Aa,K);Aa=YU(N,W,Aa,K);N=I;W=M;I=F;M=H;F=A;H=E;A=XU(v,y,ea,Ma);E=YU(y,y,ea,Ma);v=l;y=r;l=a;r=g;a=e;g=m;e=XU(ea,Ma,aa,Aa);m=YU(ea,Ma,aa,Aa)}Py(this.h,0,e,m);Py(this.h,2,a,g);Py(this.h,4,l,r);Py(this.h,6,v,y);Py(this.h,8,A,E);Py(this.h,10,F,H);Py(this.h,12,I,M);Py(this.h,14,N,W)};is.prototype._digest=function(b){return"hex"===b?jg.toHex32(this.h,"big"):jg.split32(this.h,"big")};var Bv=jg.rotr32,
pna=ns,Rt=jg.sum32,qna=jg.sum32_4,rna=jg.sum32_5,E1=ZD.BlockHash,bfa=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,
2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];jg.inherits(yt,E1);yt.blockSize=512;yt.outSize=256;yt.hmacStrength=192;yt.padLength=64;yt.prototype._update=function(b,e){for(var m=this.W,a=0;16>a;a++)m[a]=b[e+a];for(;a<m.length;a++){b=a;e=m[a-2];e=Bv(e,17)^Bv(e,19)^e>>>10;var g=m[a-7];var l=m[a-15];l=
Bv(l,7)^Bv(l,18)^l>>>3;m[b]=qna(e,g,l,m[a-16])}b=this.h[0];e=this.h[1];g=this.h[2];l=this.h[3];var r=this.h[4],v=this.h[5],y=this.h[6],A=this.h[7];pna(this.k.length===m.length);for(a=0;a<m.length;a++){var E=A;A=r;A=Bv(A,6)^Bv(A,11)^Bv(A,25);E=rna(E,A,r&v^~r&y,this.k[a],m[a]);A=b;A=Bv(A,2)^Bv(A,13)^Bv(A,22);var F=Rt(A,b&e^b&g^e&g);A=y;y=v;v=r;r=Rt(l,E);l=g;g=e;e=b;b=Rt(E,F)}this.h[0]=Rt(this.h[0],b);this.h[1]=Rt(this.h[1],e);this.h[2]=Rt(this.h[2],g);this.h[3]=Rt(this.h[3],l);this.h[4]=Rt(this.h[4],
r);this.h[5]=Rt(this.h[5],v);this.h[6]=Rt(this.h[6],y);this.h[7]=Rt(this.h[7],A)};yt.prototype._digest=function(b){return"hex"===b?jg.toHex32(this.h,"big"):jg.split32(this.h,"big")};var ZU=jg.rotl32,tH=jg.sum32,sna=jg.sum32_5,F1=ZD.BlockHash,tna=[1518500249,1859775393,2400959708,3395469782];jg.inherits(dv,F1);dv.blockSize=512;dv.outSize=160;dv.hmacStrength=80;dv.padLength=64;dv.prototype._update=function(b,e){for(var m=this.W,a=0;16>a;a++)m[a]=b[e+a];for(;a<m.length;a++)m[a]=ZU(m[a-3]^m[a-8]^m[a-
14]^m[a-16],1);b=this.h[0];e=this.h[1];var g=this.h[2],l=this.h[3],r=this.h[4];for(a=0;a<m.length;a++){var v=~~(a/20);v=sna(ZU(b,5),0===v?e&g^~e&l:1===v||3===v?e^g^l:2===v?e&g^e&l^g&l:void 0,r,m[a],tna[v]);r=l;l=g;g=ZU(e,30);e=b;b=v}this.h[0]=tH(this.h[0],b);this.h[1]=tH(this.h[1],e);this.h[2]=tH(this.h[2],g);this.h[3]=tH(this.h[3],l);this.h[4]=tH(this.h[4],r)};dv.prototype._digest=function(b){return"hex"===b?jg.toHex32(this.h,"big"):jg.split32(this.h,"big")};var G1=yt;jg.inherits(Bw,G1);Bw.blockSize=
512;Bw.outSize=224;Bw.hmacStrength=192;Bw.padLength=64;Bw.prototype._digest=function(b){return"hex"===b?jg.toHex32(this.h.slice(0,7),"big"):jg.split32(this.h.slice(0,7),"big")};var H1=is;jg.inherits(Cw,H1);Cw.blockSize=1024;Cw.outSize=384;Cw.hmacStrength=192;Cw.padLength=128;Cw.prototype._digest=function(b){return"hex"===b?jg.toHex32(this.h.slice(0,12),"big"):jg.split32(this.h.slice(0,12),"big")};var $D={};$D.sha1=dv;$D.sha224=Bw;$D.sha256=yt;$D.sha384=Cw;$D.sha512=is;var Z7={},cN=jg.rotl32,$7=jg.sum32,
uH=jg.sum32_3,a8=jg.sum32_4,I1=ZD.BlockHash;jg.inherits(ev,I1);Z7.ripemd160=ev;ev.blockSize=512;ev.outSize=160;ev.hmacStrength=192;ev.padLength=64;ev.prototype._update=function(b,e){for(var m=this.h[0],a=this.h[1],g=this.h[2],l=this.h[3],r=this.h[4],v=m,y=a,A=g,E=l,F=r,H=0;80>H;H++){var I=$7(cN(a8(m,J1(H,a,g,l),b[una[H]+e],15>=H?0:31>=H?1518500249:47>=H?1859775393:63>=H?2400959708:2840853838),vna[H]),r);m=r;r=l;l=cN(g,10);g=a;a=I;I=$7(cN(a8(v,J1(79-H,y,A,E),b[wna[H]+e],15>=H?1352829926:31>=H?1548603684:
47>=H?1836072691:63>=H?2053994217:0),xna[H]),F);v=F;F=E;E=cN(A,10);A=y;y=I}I=uH(this.h[1],g,E);this.h[1]=uH(this.h[2],l,F);this.h[2]=uH(this.h[3],r,v);this.h[3]=uH(this.h[4],m,y);this.h[4]=uH(this.h[0],a,A);this.h[0]=I};ev.prototype._digest=function(b){return"hex"===b?jg.toHex32(this.h,"little"):jg.split32(this.h,"little")};var una=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,
10,14,1,3,8,11,6,15,13],wna=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],vna=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],xna=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,
15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],cfa=jg,yna=ns;iD.prototype._init=function(b){b.length>this.blockSize&&(b=(new this.Hash).update(b).digest());yna(b.length<=this.blockSize);for(var e=b.length;e<this.blockSize;e++)b.push(0);for(e=0;e<b.length;e++)b[e]^=54;this.inner=(new this.Hash).update(b);for(e=0;e<b.length;e++)b[e]^=106;this.outer=(new this.Hash).update(b)};iD.prototype.update=function(b,e){return this.inner.update(b,
e),this};iD.prototype.digest=function(b){return this.outer.update(this.inner.digest()),this.outer.digest(b)};var al={};al.utils=jg;al.common=ZD;al.sha=$D;al.ripemd=Z7;al.hmac=iD;al.sha1=al.sha.sha1;al.sha256=al.sha.sha256;al.sha224=al.sha.sha224;al.sha384=al.sha.sha384;al.sha512=al.sha.sha512;al.ripemd160=al.ripemd.ripemd160;var xA=Oy,K1=ns;Dw.prototype._init=function(b,e,m){b=b.concat(e).concat(m);this.K=Array(this.outLen/8);this.V=Array(this.outLen/8);for(e=0;e<this.V.length;e++)this.K[e]=0,this.V[e]=
1;this._update(b);this._reseed=1;this.reseedInterval=281474976710656};Dw.prototype._hmac=function(){return new al.hmac(this.hash,this.K)};Dw.prototype._update=function(b){var e=this._hmac().update(this.V).update([0]);b&&(e=e.update(b));this.K=e.digest();this.V=this._hmac().update(this.V).digest();b&&(this.K=this._hmac().update(this.V).update([1]).update(b).digest(),this.V=this._hmac().update(this.V).digest())};Dw.prototype.reseed=function(b,e,m,a){"string"!=typeof e&&(a=m,m=e,e=null);b=xA.toArray(b,
e);m=xA.toArray(m,a);K1(b.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits");this._update(b.concat(m||[]));this._reseed=1};Dw.prototype.generate=function(b,e,m,a){if(this._reseed>this.reseedInterval)throw Error("Reseed is required");"string"!=typeof e&&(a=m,m=e,e=null);m&&(m=xA.toArray(m,a||"hex"),this._update(m));for(a=[];a.length<b;)this.V=this._hmac().update(this.V).digest(),a=a.concat(this.V);b=a.slice(0,b);return this._update(m),this._reseed++,xA.encode(b,e)};
var yA=Xm,dN=Oi.getNAF,zna=Oi.getJSF,eN=Oi.assert;zt.prototype.point=function(){throw Error("Not implemented");};zt.prototype.validate=function(){throw Error("Not implemented");};zt.prototype._fixedNafMul=function(b,e){eN(b.precomputed);b=b._getDoubles();var m=dN(e,1,this._bitLength),a=(1<<b.step+1)-(0==b.step%2?2:1);a/=3;for(var g=[],l=0;l<m.length;l+=b.step){var r=0;for(e=l+b.step-1;e>=l;e--)r=(r<<1)+m[e];g.push(r)}e=this.jpoint(null,null,null);for(m=this.jpoint(null,null,null);0<a;a--){for(l=0;l<
g.length;l++)(r=g[l])===a?m=m.mixedAdd(b.points[l]):r===-a&&(m=m.mixedAdd(b.points[l].neg()));e=e.add(m)}return e.toP()};zt.prototype._wnafMul=function(b,e){var m=b._getNAFPoints(4),a=m.points;m=dN(e,m.wnd,this._bitLength);for(var g=this.jpoint(null,null,null),l=m.length-1;0<=l;l--){for(e=0;0<=l&&0===m[l];l--)e++;if(0<=l&&e++,g=g.dblp(e),0>l)break;e=m[l];eN(0!==e);g="affine"===b.type?0<e?g.mixedAdd(a[e-1>>1]):g.mixedAdd(a[-e-1>>1].neg()):0<e?g.add(a[e-1>>1]):g.add(a[-e-1>>1].neg())}return"affine"===
b.type?g.toP():g};zt.prototype._wnafMulAdd=function(b,e,m,a,g){for(var l=this._wnafT1,r=this._wnafT2,v=this._wnafT3,y=0,A=0;A<a;A++){var E=(N=e[A])._getNAFPoints(b);l[A]=E.wnd;r[A]=E.points}for(A=a-1;1<=A;A-=2){E=A-1;var F=A;if(1===l[E]&&1===l[F]){var H=[e[E],null,null,e[F]];0===e[E].y.cmp(e[F].y)?(H[1]=e[E].add(e[F]),H[2]=e[E].toJ().mixedAdd(e[F].neg())):0===e[E].y.cmp(e[F].y.redNeg())?(H[1]=e[E].toJ().mixedAdd(e[F]),H[2]=e[E].add(e[F].neg())):(H[1]=e[E].toJ().mixedAdd(e[F]),H[2]=e[E].toJ().mixedAdd(e[F].neg()));
var I=[-3,-1,-5,-7,0,7,5,1,3],M=zna(m[E],m[F]);y=Math.max(M[0].length,y);v[E]=Array(y);v[F]=Array(y);for(b=0;b<y;b++)v[E][b]=I[3*((0|M[0][b])+1)+((0|M[1][b])+1)],v[F][b]=0,r[E]=H}else v[E]=dN(m[E],l[E],this._bitLength),v[F]=dN(m[F],l[F],this._bitLength),y=Math.max(v[E].length,y),y=Math.max(v[F].length,y)}e=this.jpoint(null,null,null);m=this._wnafT4;for(A=y;0<=A;A--){for(y=0;0<=A;){l=!0;for(b=0;b<a;b++)m[b]=0|v[b][A],0!==m[b]&&(l=!1);if(!l)break;y++;A--}if(0<=A&&y++,e=e.dblp(y),0>A)break;for(b=0;b<
a;b++){var N;y=m[b];0!==y&&(0<y?N=r[b][y-1>>1]:0>y&&(N=r[b][-y-1>>1].neg()),e="affine"===N.type?e.mixedAdd(N):e.add(N))}}for(A=0;A<a;A++)r[A]=null;return g?e:e.toP()};zt.BasePoint=js;js.prototype.eq=function(){throw Error("Not implemented");};js.prototype.validate=function(){return this.curve.validate(this)};zt.prototype.decodePoint=function(b,e){b=Oi.toArray(b,e);e=this.p.byteLength();if((4===b[0]||6===b[0]||7===b[0])&&b.length-1==2*e)return 6===b[0]?eN(0==b[b.length-1]%2):7===b[0]&&eN(1==b[b.length-
1]%2),this.point(b.slice(1,1+e),b.slice(1+e,1+2*e));if((2===b[0]||3===b[0])&&b.length-1===e)return this.pointFromX(b.slice(1,1+e),3===b[0]);throw Error("Unknown point format");};js.prototype.encodeCompressed=function(b){return this.encode(b,!0)};js.prototype._encode=function(b){var e=this.curve.p.byteLength(),m=this.getX().toArray("be",e);return b?[this.getY().isEven()?2:3].concat(m):[4].concat(m,this.getY().toArray("be",e))};js.prototype.encode=function(b,e){return Oi.encode(this._encode(e),b)};
js.prototype.precompute=function(b){if(this.precomputed)return this;var e={doubles:null,naf:null,beta:null};return e.naf=this._getNAFPoints(8),e.doubles=this._getDoubles(4,b),e.beta=this._getBeta(),this.precomputed=e,this};js.prototype._hasDoubles=function(b){if(!this.precomputed)return!1;var e=this.precomputed.doubles;return!!e&&e.points.length>=Math.ceil((b.bitLength()+1)/e.step)};js.prototype._getDoubles=function(b,e){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;
for(var m=[this],a=this,g=0;g<e;g+=b){for(var l=0;l<b;l++)a=a.dbl();m.push(a)}return{step:b,points:m}};js.prototype._getNAFPoints=function(b){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var e=[this],m=(1<<b)-1,a=1===m?null:this.dbl(),g=1;g<m;g++)e[g]=e[g-1].add(a);return{wnd:b,points:e}};js.prototype._getBeta=function(){return null};js.prototype.dblp=function(b){for(var e=this,m=0;m<b;m++)e=e.dbl();return e};var om=Xm,$U=ti,jD=zt,Ana=Oi.assert;$U(ks,jD);ks.prototype._getEndomorphism=
function(b){if(this.zeroA&&this.g&&this.n&&1===this.p.modn(3)){if(b.beta)var e=(new om(b.beta,16)).toRed(this.red);else e=this._getEndoRoots(this.p),e=(e=0>e[0].cmp(e[1])?e[0]:e[1]).toRed(this.red);if(b.lambda)var m=new om(b.lambda,16);else{var a=this._getEndoRoots(this.n);0===this.g.mul(a[0]).x.cmp(this.g.x.redMul(e))?m=a[0]:(m=a[1],Ana(0===this.g.mul(m).x.cmp(this.g.x.redMul(e))))}return{beta:e,lambda:m,basis:b.basis?b.basis.map(function(g){return{a:new om(g.a,16),b:new om(g.b,16)}}):this._getEndoBasis(m)}}};
ks.prototype._getEndoRoots=function(b){var e=b===this.p?this.red:om.mont(b),m=(new om(2)).toRed(e).redInvm();b=m.redNeg();e=(new om(3)).toRed(e).redNeg().redSqrt().redMul(m);return[b.redAdd(e).fromRed(),b.redSub(e).fromRed()]};ks.prototype._getEndoBasis=function(b){for(var e,m,a,g,l,r,v,y=this.n.ushrn(Math.floor(this.n.bitLength()/2)),A=this.n.clone(),E=new om(1),F=new om(0),H=new om(0),I=new om(1),M=0;0!==b.cmpn(0);){var N=A.div(b);v=A.sub(N.mul(b));r=H.sub(N.mul(E));N=I.sub(N.mul(F));if(!a&&0>v.cmp(y))e=
l.neg(),m=E,a=v.neg(),g=r;else if(a&&2==++M)break;l=v;A=b;b=v;H=E;E=r;I=F;F=N}l=v.neg();v=a.sqr().add(g.sqr());return 0<=l.sqr().add(r.sqr()).cmp(v)&&(l=e,r=m),a.negative&&(a=a.neg(),g=g.neg()),l.negative&&(l=l.neg(),r=r.neg()),[{a:a,b:g},{a:l,b:r}]};ks.prototype._endoSplit=function(b){var e=this.endo.basis,m=e[0],a=e[1],g=a.b.mul(b).divRound(this.n),l=m.b.neg().mul(b).divRound(this.n);e=g.mul(m.a);var r=l.mul(a.a);m=g.mul(m.b);a=l.mul(a.b);return{k1:b.sub(e).sub(r),k2:m.add(a).neg()}};ks.prototype.pointFromX=
function(b,e){(b=new om(b,16)).red||(b=b.toRed(this.red));var m=b.redSqr().redMul(b).redIAdd(b.redMul(this.a)).redIAdd(this.b),a=m.redSqrt();if(0!==a.redSqr().redSub(m).cmp(this.zero))throw Error("invalid point");m=a.fromRed().isOdd();return(e&&!m||!e&&m)&&(a=a.redNeg()),this.point(b,a)};ks.prototype.validate=function(b){if(b.inf)return!0;var e=b.x;b=b.y;var m=this.a.redMul(e);e=e.redSqr().redMul(e).redIAdd(m).redIAdd(this.b);return 0===b.redSqr().redISub(e).cmpn(0)};ks.prototype._endoWnafMulAdd=
function(b,e,m){for(var a=this._endoWnafT1,g=this._endoWnafT2,l=0;l<b.length;l++){var r=this._endoSplit(e[l]),v=b[l],y=v._getBeta();r.k1.negative&&(r.k1.ineg(),v=v.neg(!0));r.k2.negative&&(r.k2.ineg(),y=y.neg(!0));a[2*l]=v;a[2*l+1]=y;g[2*l]=r.k1;g[2*l+1]=r.k2}b=this._wnafMulAdd(1,a,g,2*l,m);for(e=0;e<2*l;e++)a[e]=null,g[e]=null;return b};$U(bo,jD.BasePoint);ks.prototype.point=function(b,e,m){return new bo(this,b,e,m)};ks.prototype.pointFromJSON=function(b,e){return bo.fromJSON(this,b,e)};bo.prototype._getBeta=
function(){if(this.curve.endo){var b=this.precomputed;if(b&&b.beta)return b.beta;var e=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(b){var m=this.curve,a=function(g){return m.point(g.x.redMul(m.endo.beta),g.y)};b.beta=e;e.precomputed={beta:null,naf:b.naf&&{wnd:b.naf.wnd,points:b.naf.points.map(a)},doubles:b.doubles&&{step:b.doubles.step,points:b.doubles.points.map(a)}}}return e}};bo.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&
{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]};bo.fromJSON=function(b,e,m){function a(l){return b.point(l[0],l[1],m)}"string"==typeof e&&(e=JSON.parse(e));var g=b.point(e[0],e[1],m);if(!e[2])return g;e=e[2];return g.precomputed={beta:null,doubles:e.doubles&&{step:e.doubles.step,points:[g].concat(e.doubles.points.map(a))},naf:e.naf&&{wnd:e.naf.wnd,
points:[g].concat(e.naf.points.map(a))}},g};bo.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"};bo.prototype.isInfinity=function(){return this.inf};bo.prototype.add=function(b){if(this.inf)return b;if(b.inf)return this;if(this.eq(b))return this.dbl();if(this.neg().eq(b)||0===this.x.cmp(b.x))return this.curve.point(null,null);var e=this.y.redSub(b.y);0!==e.cmpn(0)&&(e=e.redMul(this.x.redSub(b.x).redInvm()));
b=e.redSqr().redISub(this.x).redISub(b.x);e=e.redMul(this.x.redSub(b)).redISub(this.y);return this.curve.point(b,e)};bo.prototype.dbl=function(){if(this.inf)return this;var b=this.y.redAdd(this.y);if(0===b.cmpn(0))return this.curve.point(null,null);var e=this.curve.a,m=this.x.redSqr();b=b.redInvm();m=m.redAdd(m).redIAdd(m).redIAdd(e).redMul(b);e=m.redSqr().redISub(this.x.redAdd(this.x));m=m.redMul(this.x.redSub(e)).redISub(this.y);return this.curve.point(e,m)};bo.prototype.getX=function(){return this.x.fromRed()};
bo.prototype.getY=function(){return this.y.fromRed()};bo.prototype.mul=function(b){return b=new om(b,16),this.isInfinity()?this:this._hasDoubles(b)?this.curve._fixedNafMul(this,b):this.curve.endo?this.curve._endoWnafMulAdd([this],[b]):this.curve._wnafMul(this,b)};bo.prototype.mulAdd=function(b,e,m){e=[this,e];b=[b,m];return this.curve.endo?this.curve._endoWnafMulAdd(e,b):this.curve._wnafMulAdd(1,e,b,2)};bo.prototype.jmulAdd=function(b,e,m){e=[this,e];b=[b,m];return this.curve.endo?this.curve._endoWnafMulAdd(e,
b,!0):this.curve._wnafMulAdd(1,e,b,2,!0)};bo.prototype.eq=function(b){return this===b||this.inf===b.inf&&(this.inf||0===this.x.cmp(b.x)&&0===this.y.cmp(b.y))};bo.prototype.neg=function(b){if(this.inf)return this;var e=this.curve.point(this.x,this.y.redNeg());if(b&&this.precomputed){b=this.precomputed;var m=function(a){return a.neg()};e.precomputed={naf:b.naf&&{wnd:b.naf.wnd,points:b.naf.points.map(m)},doubles:b.doubles&&{step:b.doubles.step,points:b.doubles.points.map(m)}}}return e};bo.prototype.toJ=
function(){return this.inf?this.curve.jpoint(null,null,null):this.curve.jpoint(this.x,this.y,this.curve.one)};$U(Fo,jD.BasePoint);ks.prototype.jpoint=function(b,e,m){return new Fo(this,b,e,m)};Fo.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var b=this.z.redInvm(),e=b.redSqr(),m=this.x.redMul(e);b=this.y.redMul(e).redMul(b);return this.curve.point(m,b)};Fo.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)};Fo.prototype.add=function(b){if(this.isInfinity())return b;
if(b.isInfinity())return this;var e=b.z.redSqr(),m=this.z.redSqr(),a=this.x.redMul(e),g=b.x.redMul(m);e=this.y.redMul(e.redMul(b.z));m=b.y.redMul(m.redMul(this.z));g=a.redSub(g);m=e.redSub(m);if(0===g.cmpn(0))return 0!==m.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var l=g.redSqr(),r=l.redMul(g);l=a.redMul(l);a=m.redSqr().redIAdd(r).redISub(l).redISub(l);e=m.redMul(l.redISub(a)).redISub(e.redMul(r));b=this.z.redMul(b.z).redMul(g);return this.curve.jpoint(a,e,b)};Fo.prototype.mixedAdd=function(b){if(this.isInfinity())return b.toJ();
if(b.isInfinity())return this;var e=this.z.redSqr(),m=this.x,a=b.x.redMul(e),g=this.y;b=b.y.redMul(e).redMul(this.z);a=m.redSub(a);b=g.redSub(b);if(0===a.cmpn(0))return 0!==b.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var l=a.redSqr();e=l.redMul(a);l=m.redMul(l);m=b.redSqr().redIAdd(e).redISub(l).redISub(l);g=b.redMul(l.redISub(m)).redISub(g.redMul(e));a=this.z.redMul(a);return this.curve.jpoint(m,g,a)};Fo.prototype.dblp=function(b){if(0===b||this.isInfinity())return this;if(!b)return this.dbl();
if(this.curve.zeroA||this.curve.threeA){for(var e=this,m=0;m<b;m++)e=e.dbl();return e}e=this.curve.a;var a=this.curve.tinv,g=this.x;m=this.y;var l=this.z,r=l.redSqr().redSqr(),v=m.redAdd(m);for(m=0;m<b;m++){var y=g.redSqr(),A=v.redSqr(),E=A.redSqr();y=y.redAdd(y).redIAdd(y).redIAdd(e.redMul(r));A=g.redMul(A);g=y.redSqr().redISub(A.redAdd(A));A=A.redISub(g);y=y.redMul(A);y=y.redIAdd(y).redISub(E);l=v.redMul(l);m+1<b&&(r=r.redMul(E));v=y}return this.curve.jpoint(g,v.redMul(a),l)};Fo.prototype.dbl=function(){return this.isInfinity()?
this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()};Fo.prototype._zeroDbl=function(){if(this.zOne){var b=this.x.redSqr();var e=this.y.redSqr();var m=e.redSqr();e=this.x.redAdd(e).redSqr().redISub(b).redISub(m);e=e.redIAdd(e);b=b.redAdd(b).redIAdd(b);var a=b.redSqr().redISub(e).redISub(e),g=m.redIAdd(m);g=(g=g.redIAdd(g)).redIAdd(g);m=a;b=b.redMul(e.redISub(a)).redISub(g);e=this.y.redAdd(this.y)}else{a=this.x.redSqr();b=this.y.redSqr();m=b.redSqr();b=this.x.redAdd(b).redSqr().redISub(a).redISub(m);
b=b.redIAdd(b);a=a.redAdd(a).redIAdd(a);g=a.redSqr();var l=m.redIAdd(m);l=(l=l.redIAdd(l)).redIAdd(l);m=g.redISub(b).redISub(b);b=a.redMul(b.redISub(m)).redISub(l);e=(e=this.y.redMul(this.z)).redIAdd(e)}return this.curve.jpoint(m,b,e)};Fo.prototype._threeDbl=function(){var b;if(this.zOne){var e=this.x.redSqr();var m=this.y.redSqr();var a=m.redSqr();m=this.x.redAdd(m).redSqr().redISub(e).redISub(a);m=m.redIAdd(m);var g=e.redAdd(e).redIAdd(e).redIAdd(this.curve.a);e=b=g.redSqr().redISub(m).redISub(m);
a=a.redIAdd(a);a=(a=a.redIAdd(a)).redIAdd(a);a=g.redMul(m.redISub(b)).redISub(a);b=this.y.redAdd(this.y)}else b=this.z.redSqr(),m=this.y.redSqr(),e=this.x.redMul(m),a=this.x.redSub(b).redMul(this.x.redAdd(b)),a=a.redAdd(a).redIAdd(a),g=e.redIAdd(e),e=(g=g.redIAdd(g)).redAdd(g),e=a.redSqr().redISub(e),b=this.y.redAdd(this.z).redSqr().redISub(m).redISub(b),m=m.redSqr(),m=(m=(m=m.redIAdd(m)).redIAdd(m)).redIAdd(m),a=a.redMul(g.redISub(e)).redISub(m);return this.curve.jpoint(e,a,b)};Fo.prototype._dbl=
function(){var b=this.curve.a,e=this.x,m=this.y,a=this.z,g=a.redSqr().redSqr(),l=e.redSqr(),r=m.redSqr();b=l.redAdd(l).redIAdd(l).redIAdd(b.redMul(g));e=e.redAdd(e);g=e.redIAdd(e).redMul(r);e=b.redSqr().redISub(g.redAdd(g));g=g.redISub(e);r=r.redSqr();r=(r=(r=r.redIAdd(r)).redIAdd(r)).redIAdd(r);r=b.redMul(g).redISub(r);m=m.redAdd(m).redMul(a);return this.curve.jpoint(e,r,m)};Fo.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var b=this.x.redSqr(),e=this.y.redSqr(),m=this.z.redSqr(),
a=e.redSqr(),g=b.redAdd(b).redIAdd(b),l=g.redSqr();b=this.x.redAdd(e).redSqr().redISub(b).redISub(a);var r=(b=(b=(b=b.redIAdd(b)).redAdd(b).redIAdd(b)).redISub(l)).redSqr();a=a.redIAdd(a);a=(a=(a=a.redIAdd(a)).redIAdd(a)).redIAdd(a);g=g.redIAdd(b).redSqr().redISub(l).redISub(r).redISub(a);e=e.redMul(g);e=(e=e.redIAdd(e)).redIAdd(e);e=this.x.redMul(r).redISub(e);e=(e=e.redIAdd(e)).redIAdd(e);a=this.y.redMul(g.redMul(a.redISub(g)).redISub(b.redMul(r)));a=(a=(a=a.redIAdd(a)).redIAdd(a)).redIAdd(a);m=
this.z.redAdd(b).redSqr().redISub(m).redISub(r);return this.curve.jpoint(e,a,m)};Fo.prototype.mul=function(b,e){return b=new om(b,e),this.curve._wnafMul(this,b)};Fo.prototype.eq=function(b){if("affine"===b.type)return this.eq(b.toJ());if(this===b)return!0;var e=this.z.redSqr(),m=b.z.redSqr();if(0!==this.x.redMul(m).redISub(b.x.redMul(e)).cmpn(0))return!1;e=e.redMul(this.z);m=m.redMul(b.z);return 0===this.y.redMul(m).redISub(b.y.redMul(e)).cmpn(0)};Fo.prototype.eqXToP=function(b){var e=this.z.redSqr(),
m=b.toRed(this.curve.red).redMul(e);if(0===this.x.cmp(m))return!0;b=b.clone();for(e=this.curve.redN.redMul(e);;){if(b.iadd(this.curve.n),0<=b.cmp(this.curve.p))return!1;if(m.redIAdd(e),0===this.x.cmp(m))return!0}};Fo.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"};Fo.prototype.isInfinity=function(){return 0===this.z.cmpn(0)};var lD=Xm,b8=ti,HK=zt;b8(kD,HK);kD.prototype.validate=
function(b){b=b.normalize().x;var e=b.redSqr();b=e.redMul(b).redAdd(e.redMul(this.a)).redAdd(b);return 0===b.redSqrt().redSqr().cmp(b)};b8(co,HK.BasePoint);kD.prototype.decodePoint=function(b,e){return this.point(Oi.toArray(b,e),1)};kD.prototype.point=function(b,e){return new co(this,b,e)};kD.prototype.pointFromJSON=function(b){return co.fromJSON(this,b)};co.prototype.precompute=function(){};co.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())};co.fromJSON=function(b,
e){return new co(b,e[0],e[1]||b.one)};co.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"};co.prototype.isInfinity=function(){return 0===this.z.cmpn(0)};co.prototype.dbl=function(){var b=this.x.redAdd(this.z).redSqr(),e=this.x.redSub(this.z).redSqr(),m=b.redSub(e);b=b.redMul(e);e=m.redMul(e.redAdd(this.curve.a24.redMul(m)));return this.curve.point(b,e)};co.prototype.add=function(){throw Error("Not supported on Montgomery curve");
};co.prototype.diffAdd=function(b,e){var m=this.x.redAdd(this.z),a=this.x.redSub(this.z),g=b.x.redAdd(b.z);b=b.x.redSub(b.z).redMul(m);g=g.redMul(a);a=e.z.redMul(b.redAdd(g).redSqr());e=e.x.redMul(b.redISub(g).redSqr());return this.curve.point(a,e)};co.prototype.mul=function(b){var e=b.clone();b=this;for(var m=this.curve.point(null,null),a=[];0!==e.cmpn(0);e.iushrn(1))a.push(e.andln(1));for(e=a.length-1;0<=e;e--)0===a[e]?(b=b.diffAdd(m,this),m=m.dbl()):(m=b.diffAdd(m,this),b=b.dbl());return m};co.prototype.mulAdd=
function(){throw Error("Not supported on Montgomery curve");};co.prototype.jumlAdd=function(){throw Error("Not supported on Montgomery curve");};co.prototype.eq=function(b){return 0===this.getX().cmp(b.getX())};co.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this};co.prototype.getX=function(){return this.normalize(),this.x.fromRed()};var Ew=Xm,c8=ti,IK=zt,dfa=Oi.assert;c8(fv,IK);fv.prototype._mulA=function(b){return this.mOneA?b.redNeg():this.a.redMul(b)};
fv.prototype._mulC=function(b){return this.oneC?b:this.c.redMul(b)};fv.prototype.jpoint=function(b,e,m,a){return this.point(b,e,m,a)};fv.prototype.pointFromX=function(b,e){(b=new Ew(b,16)).red||(b=b.toRed(this.red));var m=b.redSqr(),a=this.c2.redSub(this.a.redMul(m));m=this.one.redSub(this.c2.redMul(this.d).redMul(m));m=a.redMul(m.redInvm());a=m.redSqrt();if(0!==a.redSqr().redSub(m).cmp(this.zero))throw Error("invalid point");m=a.fromRed().isOdd();return(e&&!m||!e&&m)&&(a=a.redNeg()),this.point(b,
a)};fv.prototype.pointFromY=function(b,e){(b=new Ew(b,16)).red||(b=b.toRed(this.red));var m=b.redSqr(),a=m.redSub(this.c2);m=m.redMul(this.d).redMul(this.c2).redSub(this.a);a=a.redMul(m.redInvm());if(0===a.cmp(this.zero)){if(e)throw Error("invalid point");return this.point(this.zero,b)}m=a.redSqrt();if(0!==m.redSqr().redSub(a).cmp(this.zero))throw Error("invalid point");return m.fromRed().isOdd()!==e&&(m=m.redNeg()),this.point(m,b)};fv.prototype.validate=function(b){if(b.isInfinity())return!0;b.normalize();
var e=b.x.redSqr(),m=b.y.redSqr();b=e.redMul(this.a).redAdd(m);e=this.c2.redMul(this.one.redAdd(this.d.redMul(e).redMul(m)));return 0===b.cmp(e)};c8(jl,IK.BasePoint);fv.prototype.pointFromJSON=function(b){return jl.fromJSON(this,b)};fv.prototype.point=function(b,e,m,a){return new jl(this,b,e,m,a)};jl.fromJSON=function(b,e){return new jl(b,e[0],e[1],e[2])};jl.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,
2)+" z: "+this.z.fromRed().toString(16,2)+">"};jl.prototype.isInfinity=function(){return 0===this.x.cmpn(0)&&(0===this.y.cmp(this.z)||this.zOne&&0===this.y.cmp(this.curve.c))};jl.prototype._extDbl=function(){var b=this.x.redSqr(),e=this.y.redSqr(),m=this.z.redSqr();m=m.redIAdd(m);var a=this.curve._mulA(b),g=this.x.redAdd(this.y).redSqr().redISub(b).redISub(e);b=a.redAdd(e);m=b.redSub(m);var l=a.redSub(e);e=g.redMul(m);a=b.redMul(l);g=g.redMul(l);b=m.redMul(b);return this.curve.point(e,a,b,g)};jl.prototype._projDbl=
function(){var b=this.x.redAdd(this.y).redSqr();var e=this.x.redSqr();var m=this.y.redSqr();if(this.curve.twisted){var a=(l=this.curve._mulA(e)).redAdd(m);if(this.zOne)b=b.redSub(e).redSub(m).redMul(a.redSub(this.curve.two)),e=a.redMul(l.redSub(m)),a=a.redSqr().redSub(a).redSub(a);else{var g=this.z.redSqr();g=a.redSub(g).redISub(g);b=b.redSub(e).redISub(m).redMul(g);e=a.redMul(l.redSub(m));a=a.redMul(g)}}else{var l=e.redAdd(m);g=this.curve._mulC(this.z).redSqr();g=l.redSub(g).redSub(g);b=this.curve._mulC(b.redISub(l)).redMul(g);
e=this.curve._mulC(l).redMul(e.redISub(m));a=l.redMul(g)}return this.curve.point(b,e,a)};jl.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()};jl.prototype._extAdd=function(b){var e=this.y.redSub(this.x).redMul(b.y.redSub(b.x)),m=this.y.redAdd(this.x).redMul(b.y.redAdd(b.x)),a=this.t.redMul(this.curve.dd).redMul(b.t),g=this.z.redMul(b.z.redAdd(b.z)),l=m.redSub(e);b=g.redSub(a);a=g.redAdd(a);g=m.redAdd(e);e=l.redMul(b);m=a.redMul(g);l=l.redMul(g);
b=b.redMul(a);return this.curve.point(e,m,b,l)};jl.prototype._projAdd=function(b){var e,m,a=this.z.redMul(b.z),g=a.redSqr(),l=this.x.redMul(b.x),r=this.y.redMul(b.y),v=this.curve.d.redMul(l).redMul(r),y=g.redSub(v);g=g.redAdd(v);b=this.x.redAdd(this.y).redMul(b.x.redAdd(b.y)).redISub(l).redISub(r);b=a.redMul(y).redMul(b);return this.curve.twisted?(e=a.redMul(g).redMul(r.redSub(this.curve._mulA(l))),m=y.redMul(g)):(e=a.redMul(g).redMul(r.redSub(l)),m=this.curve._mulC(y).redMul(g)),this.curve.point(b,
e,m)};jl.prototype.add=function(b){return this.isInfinity()?b:b.isInfinity()?this:this.curve.extended?this._extAdd(b):this._projAdd(b)};jl.prototype.mul=function(b){return this._hasDoubles(b)?this.curve._fixedNafMul(this,b):this.curve._wnafMul(this,b)};jl.prototype.mulAdd=function(b,e,m){return this.curve._wnafMulAdd(1,[this,e],[b,m],2,!1)};jl.prototype.jmulAdd=function(b,e,m){return this.curve._wnafMulAdd(1,[this,e],[b,m],2,!0)};jl.prototype.normalize=function(){if(this.zOne)return this;var b=this.z.redInvm();
return this.x=this.x.redMul(b),this.y=this.y.redMul(b),this.t&&(this.t=this.t.redMul(b)),this.z=this.curve.one,this.zOne=!0,this};jl.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())};jl.prototype.getX=function(){return this.normalize(),this.x.fromRed()};jl.prototype.getY=function(){return this.normalize(),this.y.fromRed()};jl.prototype.eq=function(b){return this===b||0===this.getX().cmp(b.getX())&&0===this.getY().cmp(b.getY())};jl.prototype.eqXToP=
function(b){var e=b.toRed(this.curve.red).redMul(this.z);if(0===this.x.cmp(e))return!0;b=b.clone();for(var m=this.curve.redN.redMul(this.z);;){if(b.iadd(this.curve.n),0<=b.cmp(this.curve.p))return!1;if(e.redIAdd(m),0===this.x.cmp(e))return!0}};jl.prototype.toP=jl.prototype.normalize;jl.prototype.mixedAdd=jl.prototype.add;var aE={};aE.base=zt;aE.short=ks;aE.mont=kD;aE.edwards=fv;var Bna={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],
["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],
["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],
["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],
["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],
["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],
["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],
["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],
["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],
["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],
["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],
["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],
["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],
["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],
["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],
["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],
["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},
naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],
["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],
["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],
["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],
["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],
["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],
["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],
["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],
["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],
["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],
["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],
["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],
["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],
["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],
["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],
["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],
["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],
["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],
["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],
["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],
["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],
["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],
["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],
["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],
["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],
["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],
["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],
["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],
["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],
["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],
["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],
["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}},fN={},qR=fN,pR=aE,M1=Oi.assert;qR.PresetCurve=L1;jy("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",
a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:al.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]});jy("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",
n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:al.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]});jy("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",
hash:al.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]});jy("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",
n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:al.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]});jy("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",
a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:al.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66",
"00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]});jy("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:al.sha256,gRed:!1,g:["9"]});jy("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",
a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:al.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});try{var d8=Bna}catch(b){d8=void 0}jy("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",
h:"1",hash:al.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",d8]});var Cna=Xm,e8=Oi.assert;
eo.fromPublic=function(b,e,m){return e instanceof eo?e:new eo(b,{pub:e,pubEnc:m})};eo.fromPrivate=function(b,e,m){return e instanceof eo?e:new eo(b,{priv:e,privEnc:m})};eo.prototype.validate=function(){var b=this.getPublic();return b.isInfinity()?{result:!1,reason:"Invalid public key"}:b.validate()?b.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}};eo.prototype.getPublic=function(b,e){return"string"==
typeof b&&(e=b,b=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),e?this.pub.encode(e,b):this.pub};eo.prototype.getPrivate=function(b){return"hex"===b?this.priv.toString(16,2):this.priv};eo.prototype._importPrivate=function(b,e){this.priv=new Cna(b,e||16);this.priv=this.priv.umod(this.ec.curve.n)};eo.prototype._importPublic=function(b,e){if(b.x||b.y)return"mont"===this.ec.curve.type?e8(b.x,"Need x coordinate"):"short"!==this.ec.curve.type&&"edwards"!==this.ec.curve.type||e8(b.x&&b.y,"Need both x and y coordinate"),
this.pub=this.ec.curve.point(b.x,b.y),void 0;this.pub=this.ec.curve.decodePoint(b,e)};eo.prototype.derive=function(b){return b.mul(this.priv).getX()};eo.prototype.sign=function(b,e,m){return this.ec.sign(b,this,e,m)};eo.prototype.verify=function(b,e){return this.ec.verify(b,e,this)};eo.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"};var mB=Xm,rR=fN,N1=Oi.assert;ls.prototype.keyPair=function(b){return new eo(this,
b)};ls.prototype.keyFromPrivate=function(b,e){return eo.fromPrivate(this,b,e)};ls.prototype.keyFromPublic=function(b,e){return eo.fromPublic(this,b,e)};ls.prototype.genKeyPair=function(b){b||(b={});b=new Dw({hash:this.hash,pers:b.pers,persEnc:b.persEnc||"utf8",entropy:b.entropy||aN(this.hash.hmacStrength),entropyEnc:b.entropy&&b.entropyEnc||"utf8",nonce:this.n.toArray()});for(var e=this.n.byteLength(),m=this.n.sub(new mB(2));;){var a=new mB(b.generate(e));if(!(0<a.cmp(m)))return a.iaddn(1),this.keyFromPrivate(a)}};
ls.prototype._truncateToN=function(b,e){var m=8*b.byteLength()-this.n.bitLength();return 0<m&&(b=b.ushrn(m)),!e&&0<=b.cmp(this.n)?b.sub(this.n):b};ls.prototype.sign=function(b,e,m,a){"object"==typeof m&&(a=m,m=null);a||(a={});e=this.keyFromPrivate(e,m);b=this._truncateToN(new mB(b,16));var g=this.n.byteLength();m=e.getPrivate().toArray("be",g);g=b.toArray("be",g);g=new Dw({hash:this.hash,entropy:m,nonce:g,pers:a.pers,persEnc:a.persEnc||"utf8"});for(var l=this.n.sub(new mB(1)),r=0;;r++){var v=a.k?
a.k(r):new mB(g.generate(this.n.byteLength()));if(!(0>=(v=this._truncateToN(v,!0)).cmpn(1)||0<=v.cmp(l))){var y=this.g.mul(v);if(!y.isInfinity()){var A=y.getX();m=A.umod(this.n);if(0!==m.cmpn(0)&&(v=v.invm(this.n).mul(m.mul(e.getPrivate()).iadd(b)),0!==(v=v.umod(this.n)).cmpn(0)))return b=(y.getY().isOdd()?1:0)|(0!==A.cmp(m)?2:0),a.canonical&&0<v.cmp(this.nh)&&(v=this.n.sub(v),b^=1),new wA({r:m,s:v,recoveryParam:b})}}}};ls.prototype.verify=function(b,e,m,a){b=this._truncateToN(new mB(b,16));m=this.keyFromPublic(m,
a);a=(e=new wA(e,"hex")).r;e=e.s;if(0>a.cmpn(1)||0<=a.cmp(this.n)||0>e.cmpn(1)||0<=e.cmp(this.n))return!1;var g;e=e.invm(this.n);b=e.mul(b).umod(this.n);e=e.mul(a).umod(this.n);return this.curve._maxwellTrick?!(g=this.g.jmulAdd(b,m.getPublic(),e)).isInfinity()&&g.eqXToP(a):!(g=this.g.mulAdd(b,m.getPublic(),e)).isInfinity()&&0===g.getX().umod(this.n).cmp(a)};ls.prototype.recoverPubKey=function(b,e,m,a){N1((3&m)===m,"The recovery param is more than two bits");e=new wA(e,a);a=this.n;var g=new mB(b);
b=e.r;var l=e.s,r=1&m;m>>=1;if(0<=b.cmp(this.curve.p.umod(this.curve.n))&&m)throw Error("Unable to find sencond key candinate");b=m?this.curve.pointFromX(b.add(this.curve.n),r):this.curve.pointFromX(b,r);e=e.r.invm(a);m=a.sub(g).mul(e).umod(a);a=l.mul(e).umod(a);return this.g.mulAdd(m,b,a)};ls.prototype.getKeyRecoveryParam=function(b,e,m,a){if(null!==(e=new wA(e,a)).recoveryParam)return e.recoveryParam;for(a=0;4>a;a++){try{var g=this.recoverPubKey(b,e,a)}catch(l){continue}if(g.eq(m))return a}throw Error("Unable to find valid recovery factor");
};var f8=Oi.assert,O1=Oi.parseBytes,bE=Oi.cachedProperty;vn.fromPublic=function(b,e){return e instanceof vn?e:new vn(b,{pub:e})};vn.fromSecret=function(b,e){return e instanceof vn?e:new vn(b,{secret:e})};vn.prototype.secret=function(){return this._secret};bE(vn,"pubBytes",function(){return this.eddsa.encodePoint(this.pub())});bE(vn,"pub",function(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())});bE(vn,"privBytes",function(){var b=this.eddsa,e=this.hash(),
m=b.encodingLength-1;b=e.slice(0,b.encodingLength);return b[0]&=248,b[m]&=127,b[m]|=64,b});bE(vn,"priv",function(){return this.eddsa.decodeInt(this.privBytes())});bE(vn,"hash",function(){return this.eddsa.hash().update(this.secret()).digest()});bE(vn,"messagePrefix",function(){return this.hash().slice(this.eddsa.encodingLength)});vn.prototype.sign=function(b){return f8(this._secret,"KeyPair can only verify"),this.eddsa.sign(b,this)};vn.prototype.verify=function(b,e){return this.eddsa.verify(b,e,this)};
vn.prototype.getSecret=function(b){return f8(this._secret,"KeyPair is public only"),Oi.encode(this.secret(),b)};vn.prototype.getPublic=function(b){return Oi.encode(this.pubBytes(),b)};var gfa=Xm,ffa=Oi.assert,gN=Oi.cachedProperty,efa=Oi.parseBytes;gN(ky,"S",function(){return this.eddsa.decodeInt(this.Sencoded())});gN(ky,"R",function(){return this.eddsa.decodePoint(this.Rencoded())});gN(ky,"Rencoded",function(){return this.eddsa.encodePoint(this.R())});gN(ky,"Sencoded",function(){return this.eddsa.encodeInt(this.S())});
ky.prototype.toBytes=function(){return this.Rencoded().concat(this.Sencoded())};ky.prototype.toHex=function(){return Oi.encode(this.toBytes(),"hex").toUpperCase()};var jfa=al,ifa=fN,hfa=Oi.assert,g8=Oi.parseBytes;xq.prototype.sign=function(b,e){b=g8(b);var m=this.keyFromSecret(e),a=this.hashInt(m.messagePrefix(),b);e=this.g.mul(a);var g=this.encodePoint(e);b=this.hashInt(g,m.pubBytes(),b).mul(m.priv());b=a.add(b).umod(this.curve.n);return this.makeSignature({R:e,S:b,Rencoded:g})};xq.prototype.verify=
function(b,e,m){b=g8(b);e=this.makeSignature(e);m=this.keyFromPublic(m);b=this.hashInt(e.Rencoded(),m.pubBytes(),b);var a=this.g.mul(e.S());return e.R().add(m.pub().mul(b)).eq(a)};xq.prototype.hashInt=function(){for(var b=this.hash(),e=0;e<arguments.length;e++)b.update(arguments[e]);return Oi.intFromLE(b.digest()).umod(this.curve.n)};xq.prototype.keyFromPublic=function(b){return vn.fromPublic(this,b)};xq.prototype.keyFromSecret=function(b){return vn.fromSecret(this,b)};xq.prototype.makeSignature=
function(b){return b instanceof ky?b:new ky(this,b)};xq.prototype.encodePoint=function(b){var e=b.getY().toArray("le",this.encodingLength);return e[this.encodingLength-1]|=b.getX().isOdd()?128:0,e};xq.prototype.decodePoint=function(b){var e=(b=Oi.parseBytes(b)).length-1,m=b.slice(0,e).concat(-129&b[e]);b=0!=(128&b[e]);m=Oi.intFromLE(m);return this.curve.pointFromY(m,b)};xq.prototype.encodeInt=function(b){return b.toArray("le",this.encodingLength)};xq.prototype.decodeInt=function(b){return Oi.intFromLE(b)};
xq.prototype.isPoint=function(b){return b instanceof this.pointClass};var Vw={version:"6.5.2"};Vw.utils=Oi;Vw.rand=aN;Vw.curve=aE;Vw.curves=fN;Vw.ec=ls;Vw.eddsa=xq;var ER={},f2=!1,hr="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,wn="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,S1={},Dna=ti;S1.Reporter=ms;ms.prototype.isError=function(b){return b instanceof mD};ms.prototype.save=function(){var b=(this||wn)._reporterState;return{obj:b.obj,
pathLen:b.path.length}};ms.prototype.restore=function(b){var e=(this||wn)._reporterState;e.obj=b.obj;e.path=e.path.slice(0,b.pathLen)};ms.prototype.enterKey=function(b){return(this||wn)._reporterState.path.push(b)};ms.prototype.exitKey=function(b){var e=(this||wn)._reporterState;e.path=e.path.slice(0,b-1)};ms.prototype.leaveKey=function(b,e,m){var a=(this||wn)._reporterState;this.exitKey(b);null!==a.obj&&(a.obj[e]=m)};ms.prototype.path=function(){return(this||wn)._reporterState.path.join("/")};ms.prototype.enterObject=
function(){var b=(this||wn)._reporterState,e=b.obj;return b.obj={},e};ms.prototype.leaveObject=function(b){var e=(this||wn)._reporterState,m=e.obj;return e.obj=b,m};ms.prototype.error=function(b){var e=(this||wn)._reporterState,m=b instanceof mD;if(b=m?b:new mD(e.path.map(function(a){return"["+JSON.stringify(a)+"]"}).join(""),b.message||b,b.stack),!e.options.partial)throw b;return m||e.errors.push(b),b};ms.prototype.wrapResult=function(b){var e=(this||wn)._reporterState;return e.options.partial?{result:this.isError(b)?
null:b,errors:e.errors}:b};Dna(mD,Error);mD.prototype.rethrow=function(b){if((this||wn).message=b+" at: "+((this||wn).path||"(shallow)"),Error.captureStackTrace&&Error.captureStackTrace(this||wn,mD),!(this||wn).stack)try{throw Error((this||wn).message);}catch(e){(this||wn).stack=e.stack}return this||wn};var JK={},Q1=!1,Eh="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,tR={},T1=!1,Zg="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,sR={},
R1=!1,ly={},W1=!1,uR={},V1=!1,vR={},Y1=!1,my="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,yR={},$1=!1,xR="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,wR={},Z1=!1,zR={},b2=!1,xn="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,CR={},d2=!1,BR="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,AR={},c2=!1,DR={},e2=!1,rm=KK(),h8=rm.define("Time",function(){this.choice({utcTime:this.utctime(),
generalTime:this.gentime()})}),Ena=rm.define("AttributeTypeValue",function(){this.seq().obj(this.key("type").objid(),this.key("value").any())}),aV=rm.define("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("parameters").optional(),this.key("curve").objid().optional())}),Fna=rm.define("SubjectPublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(aV),this.key("subjectPublicKey").bitstr())}),Gna=rm.define("RelativeDistinguishedName",function(){this.setof(Ena)}),
Hna=rm.define("RDNSequence",function(){this.seqof(Gna)}),i8=rm.define("Name",function(){this.choice({rdnSequence:this.use(Hna)})}),Ina=rm.define("Validity",function(){this.seq().obj(this.key("notBefore").use(h8),this.key("notAfter").use(h8))}),Jna=rm.define("Extension",function(){this.seq().obj(this.key("extnID").objid(),this.key("critical").bool().def(!1),this.key("extnValue").octstr())}),Kna=rm.define("TBSCertificate",function(){this.seq().obj(this.key("version").explicit(0).int().optional(),this.key("serialNumber").int(),
this.key("signature").use(aV),this.key("issuer").use(i8),this.key("validity").use(Ina),this.key("subject").use(i8),this.key("subjectPublicKeyInfo").use(Fna),this.key("issuerUniqueID").implicit(1).bitstr().optional(),this.key("subjectUniqueID").implicit(2).bitstr().optional(),this.key("extensions").explicit(3).seqof(Jna).optional())}),Lna=rm.define("X509Certificate",function(){this.seq().obj(this.key("tbsCertificate").use(Kna),this.key("signatureAlgorithm").use(aV),this.key("signatureValue").bitstr())}),
St={};St.certificate=Lna;var Mna=rm.define("RSAPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("modulus").int(),this.key("publicExponent").int(),this.key("privateExponent").int(),this.key("prime1").int(),this.key("prime2").int(),this.key("exponent1").int(),this.key("exponent2").int(),this.key("coefficient").int())});St.RSAPrivateKey=Mna;var Nna=rm.define("RSAPublicKey",function(){this.seq().obj(this.key("modulus").int(),this.key("publicExponent").int())});St.RSAPublicKey=
Nna;var Ona=rm.define("SubjectPublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(j8),this.key("subjectPublicKey").bitstr())});St.PublicKey=Ona;var j8=rm.define("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("none").null_().optional(),this.key("curve").objid().optional(),this.key("params").seq().obj(this.key("p").int(),this.key("q").int(),this.key("g").int()).optional())}),Pna=rm.define("PrivateKeyInfo",function(){this.seq().obj(this.key("version").int(),
this.key("algorithm").use(j8),this.key("subjectPrivateKey").octstr())});St.PrivateKey=Pna;var Qna=rm.define("EncryptedPrivateKeyInfo",function(){this.seq().obj(this.key("algorithm").seq().obj(this.key("id").objid(),this.key("decrypt").seq().obj(this.key("kde").seq().obj(this.key("id").objid(),this.key("kdeparams").seq().obj(this.key("salt").octstr(),this.key("iters").int())),this.key("cipher").seq().obj(this.key("algo").objid(),this.key("iv").octstr()))),this.key("subjectPrivateKey").octstr())});
St.EncryptedPrivateKey=Qna;var Rna=rm.define("DSAPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("p").int(),this.key("q").int(),this.key("g").int(),this.key("pub_key").int(),this.key("priv_key").int())});St.DSAPrivateKey=Rna;St.DSAparam=rm.define("DSAparam",function(){this.int()});var Tna=rm.define("ECPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("privateKey").octstr(),this.key("parameters").optional().explicit(0).use(Sna),this.key("publicKey").optional().explicit(1).bitstr())});
St.ECPrivateKey=Tna;var Sna=rm.define("ECParameters",function(){this.choice({namedCurve:this.objid()})});St.signature=rm.define("signature",function(){this.seq().obj(this.key("r").int(),this.key("s").int())});var mfa=/Proc-Type: 4,ENCRYPTED[\n\r]+DEK-Info: AES-((?:128)|(?:192)|(?:256))-CBC,([0-9A-H]+)[\n\r]+([0-9A-z\n\r\+\/=]+)[\n\r]+/m,ofa=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----/m,nfa=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----([0-9A-z\n\r\+\/=]+)-----END \1-----$/m,LK=wj.Buffer,yq=St,pfa={"2.16.840.1.101.3.4.1.1":"aes-128-ecb",
"2.16.840.1.101.3.4.1.2":"aes-128-cbc","2.16.840.1.101.3.4.1.3":"aes-128-ofb","2.16.840.1.101.3.4.1.4":"aes-128-cfb","2.16.840.1.101.3.4.1.21":"aes-192-ecb","2.16.840.1.101.3.4.1.22":"aes-192-cbc","2.16.840.1.101.3.4.1.23":"aes-192-ofb","2.16.840.1.101.3.4.1.24":"aes-192-cfb","2.16.840.1.101.3.4.1.41":"aes-256-ecb","2.16.840.1.101.3.4.1.42":"aes-256-cbc","2.16.840.1.101.3.4.1.43":"aes-256-ofb","2.16.840.1.101.3.4.1.44":"aes-256-cfb"},rfa=ir,qfa=WM,FR=wj.Buffer;nD.signature=yq.signature;var k8={"1.3.132.0.10":"secp256k1",
"1.3.132.0.33":"p224","1.2.840.10045.3.1.1":"p192","1.2.840.10045.3.1.7":"p256","1.3.132.0.34":"p384","1.3.132.0.35":"p521"},bV={},ep=Mi.Buffer,AA=z7,Una=Vw.ec,MK=Xm;(bV=function(b,e,m,a,g){e=nD(e);if(e.curve){if("ecdsa"!==a&&"ecdsa/rsa"!==a)throw Error("wrong private key type");return function(l,r){var v=k8[r.curve.join(".")];if(!v)throw Error("unknown curve "+r.curve.join("."));l=(new Una(v)).keyFromPrivate(r.privateKey).sign(l);return new ep(l.toDER())}(b,e)}if("dsa"===e.type){if("dsa"!==a)throw Error("wrong private key type");
return function(l,r,v){var y=r.params.priv_key,A=r.params.p,E=r.params.q;r=r.params.g;var F=new MK(0),H=GR(l,E).mod(E);var I=!1;for(l=g2(y,E,l,v);!1===I;){F=I=h2(E,l,v);var M=E;F=r.toRed(MK.mont(A)).redPow(F).fromRed().mod(M);0===(I=I.invm(E).imul(H.add(y.mul(F))).mod(E)).cmpn(0)&&(I=!1,F=new MK(0))}v=I;y=F.toArray();v=v.toArray();128&y[0]&&(y=[0].concat(y));128&v[0]&&(v=[0].concat(v));A=[48,y.length+v.length+4,2,y.length];return A=A.concat(y,[2,v.length],v),new ep(A)}(b,e,m)}if("rsa"!==a&&"ecdsa/rsa"!==
a)throw Error("wrong private key type");b=ep.concat([g,b]);a=e.modulus.byteLength();for(m=[0,1];b.length+m.length+1<a;)m.push(255);m.push(0);for(a=-1;++a<b.length;)m.push(b[a]);return EK(m,e)}).getKey=g2;bV.makeKey=h2;var cV=Mi.Buffer,vH=Xm,Vna=Vw.ec,pm="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,hN=Mi.Buffer,j2=qH,NK=GA,l8=ti,Wna=bV,Xna=function(b,e,m,a,g){m=nD(m);if("ec"===m.type){if("ecdsa"!==a&&"ecdsa/rsa"!==a)throw Error("wrong public key type");return function(v,
y,A){var E=k8[A.data.algorithm.curve.join(".")];if(!E)throw Error("unknown curve "+A.data.algorithm.curve.join("."));return(new Vna(E)).verify(y,v,A.data.subjectPrivateKey.data)}(b,e,m)}if("dsa"===m.type){if("dsa"!==a)throw Error("wrong public key type");return function(v,y,A){var E=A.data.p,F=A.data.q,H=A.data.g;A=A.data.pub_key;var I=nD.signature.decode(v,"der");v=I.s;I=I.r;i2(v,F);i2(I,F);var M=vH.mont(E);v=v.invm(F);return 0===H.toRed(M).redPow((new vH(y)).mul(v).mod(F)).fromRed().mul(A.toRed(M).redPow(I.mul(v).mod(F)).fromRed()).mod(E).mod(F).cmp(I)}(b,
e,m)}if("rsa"!==a&&"ecdsa/rsa"!==a)throw Error("wrong public key type");e=cV.concat([g,e]);g=m.modulus.byteLength();a=[1];for(var l=0;e.length+a.length+2<g;)a.push(255),l++;a.push(0);for(var r=-1;++r<e.length;)a.push(e[r]);a=new cV(a);e=vH.mont(m.modulus);b=(b=(new vH(b)).toRed(e)).redPow(new vH(m.publicExponent));b=new cV(b.fromRed().toArray());e=8>l?1:0;g=Math.min(b.length,a.length);b.length!==a.length&&(e=1);for(r=-1;++r<g;)e|=b[r]^a[r];return 0===e},BA=A7;Object.keys(BA).forEach(function(b){BA[b].id=
new hN(BA[b].id,"hex");BA[b.toLowerCase()]=BA[b]});l8(eG,NK.Writable);eG.prototype._write=function(b,e,m){(this||pm)._hash.update(b);m()};eG.prototype.update=function(b,e){return"string"==typeof b&&(b=new hN(b,e)),(this||pm)._hash.update(b),this||pm};eG.prototype.sign=function(b,e){this.end();var m=(this||pm)._hash.digest();b=Wna(m,b,(this||pm)._hashType,(this||pm)._signType,(this||pm)._tag);return e?b.toString(e):b};l8(fG,NK.Writable);fG.prototype._write=function(b,e,m){(this||pm)._hash.update(b);
m()};fG.prototype.update=function(b,e){return"string"==typeof b&&(b=new hN(b,e)),(this||pm)._hash.update(b),this||pm};fG.prototype.verify=function(b,e,m){"string"==typeof e&&(e=new hN(e,m));this.end();m=(this||pm)._hash.digest();return Xna(e,m,b,(this||pm)._signType,(this||pm)._tag)};var yn="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,Fw=Mi.Buffer,sfa=Vw,Yna=Xm,jr={secp256k1:{name:"secp256k1",byteLength:32},secp224r1:{name:"p224",byteLength:28},prime256v1:{name:"p256",
byteLength:32},prime192v1:{name:"p192",byteLength:24},ed25519:{name:"ed25519",byteLength:32},secp384r1:{name:"p384",byteLength:48},secp521r1:{name:"p521",byteLength:66}};jr.p224=jr.secp224r1;jr.p256=jr.secp256r1=jr.prime256v1;jr.p192=jr.secp192r1=jr.prime192v1;jr.p384=jr.secp384r1;jr.p521=jr.secp521r1;CA.prototype.generateKeys=function(b,e){return(this||yn).keys=(this||yn).curve.genKeyPair(),this.getPublicKey(b,e)};CA.prototype.computeSecret=function(b,e,m){return e=e||"utf8",Fw.isBuffer(b)||(b=new Fw(b,
e)),HR((this||yn).curve.keyFromPublic(b).getPublic().mul((this||yn).keys.getPrivate()).getX(),m,(this||yn).curveType.byteLength)};CA.prototype.getPublicKey=function(b,e){var m=(this||yn).keys.getPublic("compressed"===e,!0);return"hybrid"===e&&(m[m.length-1]%2?m[0]=7:m[0]=6),HR(m,b)};CA.prototype.getPrivateKey=function(b){return HR((this||yn).keys.getPrivate(),b)};CA.prototype.setPublicKey=function(b,e){return e=e||"utf8",Fw.isBuffer(b)||(b=new Fw(b,e)),(this||yn).keys._importPublic(b),this||yn};CA.prototype.setPrivateKey=
function(b,e){e=e||"utf8";Fw.isBuffer(b)||(b=new Fw(b,e));b=new Yna(b);return b=b.toString(16),(this||yn).keys=(this||yn).curve.genKeyPair(),(this||yn).keys._importPrivate(b),this||yn};var dV=wj.Buffer,iN=function(b,e){for(var m,a=dV.alloc(0),g=0;a.length<e;){m=g++;var l=dV.allocUnsafe(4);m=(l.writeUInt32BE(m,0),l);a=dV.concat([a,qH("sha1").update(b).update(m).digest()])}return a.slice(0,e)},jN=function(b,e){for(var m=b.length,a=-1;++a<m;)b[a]^=e[a];return b},m8=Xm,Zna=wj.Buffer,n8=function(b,e){return Zna.from(b.toRed(m8.mont(e.modulus)).redPow(new m8(e.publicExponent)).fromRed().toArray())},
eV=Xm,Tt=wj.Buffer,o8=Xm,wH=wj.Buffer,cE={publicEncrypt:function(b,e,m){var a=b.padding?b.padding:m?1:4;b=nD(b);if(4===a)e=function(g,l){g=g.modulus.byteLength();var r=l.length,v=qH("sha1").update(Tt.alloc(0)).digest(),y=v.length,A=2*y;if(r>g-A-2)throw Error("message too long");A=Tt.alloc(g-r-A-2);var E=g-y-1;r=Ky(y);l=jN(Tt.concat([v,A,Tt.alloc(1,1),l],E),iN(r,E));y=jN(r,iN(l,y));return new eV(Tt.concat([Tt.alloc(1),y,l],g))}(b,e);else if(1===a)e=function(g,l,r){var v=l.length;g=g.modulus.byteLength();
if(v>g-11)throw Error("message too long");if(r)var y=Tt.alloc(g-v-3,255);else{v=g-v-3;for(var A=Tt.allocUnsafe(v),E=0,F=Ky(2*v),H=0;E<v;)H===F.length&&(F=Ky(2*v),H=0),(y=F[H++])&&(A[E++]=y);y=A}return new eV(Tt.concat([Tt.from([0,r?1:2]),y,Tt.alloc(1),l],g))}(b,e,m);else{if(3!==a)throw Error("unknown padding");if(0<=(e=new eV(e)).cmp(b.modulus))throw Error("data too long for modulus");}return m?EK(e,b):n8(e,b)},privateDecrypt:function(b,e,m){var a=b.padding?b.padding:m?1:4;b=nD(b);var g=b.modulus.byteLength();
if(e.length>g||0<=(new o8(e)).cmp(b.modulus))throw Error("decryption error");e=m?n8(new o8(e),b):EK(e,b);var l=wH.alloc(g-e.length);if(e=wH.concat([l,e],g),4===a)return function(r,v){var y=r.modulus.byteLength(),A=qH("sha1").update(wH.alloc(0)).digest();r=A.length;if(0!==v[0])throw Error("decryption error");var E=v.slice(1,r+1);v=v.slice(r+1);E=jN(E,iN(v,r));y=jN(v,iN(E,y-r-1));v=y.slice(0,r);A=wH.from(A);v=wH.from(v);E=0;var F=A.length;A.length!==v.length&&(E++,F=Math.min(A.length,v.length));for(var H=
-1;++H<F;)E+=A[H]^v[H];if(E)throw Error("decryption error");for(;0===y[r];)r++;if(1!==y[r++])throw Error("decryption error");return y.slice(r)}(b,e);if(1===a)return function(r,v,y){r=v.slice(0,2);for(var A=2,E=0;0!==v[A++];)if(A>=v.length){E++;break}var F=v.slice(2,A-1);("0002"!==r.toString("hex")&&!y||"0001"!==r.toString("hex")&&y)&&E++;8>F.length&&E++;if(E)throw Error("decryption error");return v.slice(A)}(0,e,m);if(3===a)return e;throw Error("unknown padding");},privateEncrypt:function(b,e){return cE.publicEncrypt(b,
e,!0)},publicDecrypt:function(b,e){return cE.privateDecrypt(b,e,!0)}},kN="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,fV,gV,IR=tj,s2=Ky,p8=wj.Buffer,p2=wj.kMaxLength,JR=kN.crypto||kN.msCrypto,o2=Math.pow(2,32)-1;JR&&JR.getRandomValues||!IR.browser?(fV=function(b,e,m,a){if(!(p8.isBuffer(b)||b instanceof kN.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');if("function"==typeof e)a=e,e=0,m=b.length;else if("function"==typeof m)a=m,m=b.length-
e;else if("function"!=typeof a)throw new TypeError('"cb" argument must be a function');return n2(e,b.length),q2(m,e,b.length),r2(b,e,m,a)},gV=function(b,e,m){void 0===e&&(e=0);if(!(p8.isBuffer(b)||b instanceof kN.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');n2(e,b.length);void 0===m&&(m=b.length-e);return q2(m,e,b.length),r2(b,e,m)}):(fV=m2,gV=m2);var qh={};qh.randomBytes=qh.rng=qh.pseudoRandomBytes=qh.prng=Ky;qh.createHash=qh.Hash=qH;qh.createHmac=qh.Hmac=z7;var $na=
Object.keys(A7),aoa="sha1 sha224 sha256 sha384 sha512 md5 rmd160".split(" ").concat($na);qh.getHashes=function(){return aoa};qh.pbkdf2=WM.pbkdf2;qh.pbkdf2Sync=WM.pbkdf2Sync;qh.Cipher=M7;qh.createCipher=Wma;qh.Cipheriv=gR;qh.createCipheriv=gR;qh.Decipher=N7;qh.createDecipher=Xma;qh.Decipheriv=iR;qh.createDecipheriv=iR;qh.getCiphers=O7;qh.listCiphers=Yma;qh.DiffieHellmanGroup=fna;qh.createDiffieHellmanGroup=T7;qh.getDiffieHellman=U7;qh.createDiffieHellman=gna;qh.DiffieHellman=V7;qh.createSign=k2;qh.Sign=
k2;qh.createVerify=l2;qh.Verify=l2;qh.createECDH=function(b){return new CA(b)};qh.publicEncrypt=cE.publicEncrypt;qh.privateEncrypt=cE.privateEncrypt;qh.publicDecrypt=cE.publicDecrypt;qh.privateDecrypt=cE.privateDecrypt;qh.randomFill=fV;qh.randomFillSync=gV;qh.createCredentials=function(){throw Error("sorry, createCredentials is not implemented yet\nwe accept pull requests\nhttps://github.com/crypto-browserify/crypto-browserify");};qh.constants={DH_CHECK_P_NOT_SAFE_PRIME:2,DH_CHECK_P_NOT_PRIME:1,DH_UNABLE_TO_CHECK_GENERATOR:4,
DH_NOT_SUITABLE_GENERATOR:8,NPN_ENABLED:1,ALPN_ENABLED:1,RSA_PKCS1_PADDING:1,RSA_SSLV23_PADDING:2,RSA_NO_PADDING:3,RSA_PKCS1_OAEP_PADDING:4,RSA_X931_PADDING:5,RSA_PKCS1_PSS_PADDING:6,POINT_CONVERSION_COMPRESSED:2,POINT_CONVERSION_UNCOMPRESSED:4,POINT_CONVERSION_HYBRID:6};var Cv={};Object.defineProperty(Cv,"__esModule",{value:!0});Cv.default=function(){return boa.default.randomFillSync(coa)};var boa=qh&&qh.__esModule?qh:{default:qh},coa=new Uint8Array(16),Op={};Object.defineProperty(Op,"__esModule",
{value:!0});Op.default=void 0;for(var Io=[],hV=0;256>hV;++hV)Io.push((hV+256).toString(16).substr(1));Op.default=function(b,e){e=e||0;return(Io[b[e+0]]+Io[b[e+1]]+Io[b[e+2]]+Io[b[e+3]]+"-"+Io[b[e+4]]+Io[b[e+5]]+"-"+Io[b[e+6]]+Io[b[e+7]]+"-"+Io[b[e+8]]+Io[b[e+9]]+"-"+Io[b[e+10]]+Io[b[e+11]]+Io[b[e+12]]+Io[b[e+13]]+Io[b[e+14]]+Io[b[e+15]]).toLowerCase()};var lN={};Object.defineProperty(lN,"__esModule",{value:!0});lN.default=void 0;var doa=Cv&&Cv.__esModule?Cv:{default:Cv},eoa=Op&&Op.__esModule?Op:{default:Op},
q8,iV,jV=0,kV=0;lN.default=function(b,e,m){m=e&&m||0;var a=e||[];b=b||{};var g=b.node||q8,l=void 0!==b.clockseq?b.clockseq:iV;if(null==g||null==l){var r=b.random||(b.rng||doa.default)();null==g&&(g=q8=[r[0]|1,r[1],r[2],r[3],r[4],r[5]]);null==l&&(l=iV=(r[6]<<8|r[7])&16383)}r=void 0!==b.msecs?b.msecs:Date.now();var v=void 0!==b.nsecs?b.nsecs:kV+1,y=r-jV+(v-kV)/1E4;0>y&&void 0===b.clockseq&&(l=l+1&16383);(0>y||r>jV)&&void 0===b.nsecs&&(v=0);if(1E4<=v)throw Error("uuid.v1(): Can't create more than 10M uuids/sec");
jV=r;kV=v;iV=l;r+=122192928E5;b=(1E4*(r&268435455)+v)%4294967296;a[m++]=b>>>24&255;a[m++]=b>>>16&255;a[m++]=b>>>8&255;a[m++]=b&255;b=r/4294967296*1E4&268435455;a[m++]=b>>>8&255;a[m++]=b&255;a[m++]=b>>>24&15|16;a[m++]=b>>>16&255;a[m++]=l>>>8|128;a[m++]=l&255;for(l=0;6>l;++l)a[m+l]=g[l];return e||(0,eoa.default)(a)};var Eq={};Object.defineProperty(Eq,"__esModule",{value:!0});Eq.default=function(b,e,m){function a(g,l,r,v){v=r&&v||0;if("string"===typeof g){g=unescape(encodeURIComponent(g));for(var y=
[],A=0;A<g.length;++A)y.push(g.charCodeAt(A));g=y}"string"===typeof l&&(l=tfa(l));if(!Array.isArray(g))throw TypeError("value must be an array of bytes");if(!Array.isArray(l)||16!==l.length)throw TypeError("namespace must be uuid string or an Array of 16 byte values");l=m(l.concat(g));l[6]=l[6]&15|e;l[8]=l[8]&63|128;if(r)for(g=0;16>g;++g)r[v+g]=l[g];return r||(0,foa.default)(l)}try{a.name=b}catch(g){}a.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8";a.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8";return a};
Eq.URL=Eq.DNS=void 0;var foa=Op&&Op.__esModule?Op:{default:Op};Eq.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8";Eq.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8";var nB={},r8=Mi.Buffer;Object.defineProperty(nB,"__esModule",{value:!0});nB.default=void 0;var goa=qh&&qh.__esModule?qh:{default:qh};nB.default=function(b){Array.isArray(b)?b=r8.from(b):"string"===typeof b&&(b=r8.from(b,"utf8"));return goa.default.createHash("md5").update(b).digest()};var mN={};Object.defineProperty(mN,"__esModule",{value:!0});
mN.default=void 0;var hoa=Eq&&Eq.__esModule?Eq:{default:Eq},ioa=nB&&nB.__esModule?nB:{default:nB},joa=(0,hoa.default)("v3",48,ioa.default);mN.default=joa;var nN={};Object.defineProperty(nN,"__esModule",{value:!0});nN.default=void 0;var koa=Cv&&Cv.__esModule?Cv:{default:Cv},loa=Op&&Op.__esModule?Op:{default:Op};nN.default=function(b,e,m){"string"===typeof b&&(e="binary"===b?new Uint8Array(16):null,b=null);b=b||{};b=b.random||(b.rng||koa.default)();b[6]=b[6]&15|64;b[8]=b[8]&63|128;if(e){m=m||0;for(var a=
0;16>a;++a)e[m+a]=b[a];return e}return(0,loa.default)(b)};var oB={},s8=Mi.Buffer;Object.defineProperty(oB,"__esModule",{value:!0});oB.default=void 0;var moa=qh&&qh.__esModule?qh:{default:qh};oB.default=function(b){Array.isArray(b)?b=s8.from(b):"string"===typeof b&&(b=s8.from(b,"utf8"));return moa.default.createHash("sha1").update(b).digest()};var oN={};Object.defineProperty(oN,"__esModule",{value:!0});oN.default=void 0;var noa=Eq&&Eq.__esModule?Eq:{default:Eq},ooa=oB&&oB.__esModule?oB:{default:oB},
poa=(0,noa.default)("v5",80,ooa.default);oN.default=poa;var pB={};Object.defineProperty(pB,"__esModule",{value:!0});Object.defineProperty(pB,"v1",{enumerable:!0,get:function(){return qoa.default}});Object.defineProperty(pB,"v3",{enumerable:!0,get:function(){return roa.default}});Object.defineProperty(pB,"v4",{enumerable:!0,get:function(){return soa.default}});Object.defineProperty(pB,"v5",{enumerable:!0,get:function(){return toa.default}});var qoa=OK(lN),roa=OK(mN),soa=OK(nN),toa=OK(oN),Jo={};Object.defineProperty(Jo,
"__esModule",{value:!0});Jo.atob=function(b){return t8(b)};Jo.btoa=function(b){return u8(b)};Jo.base64StringToBlobOrBuffer=function(b,e){return v2(t8(b),e)};Jo.binaryStringToArrayBuffer=u2;Jo.binaryStringToBlobOrBuffer=v2;Jo.blob=t2;Jo.blobOrBufferToBase64=function(b,e){x2(b,function(m){e(u8(m))})};Jo.blobOrBufferToBinaryString=x2;Jo.readAsArrayBuffer=function(b,e){var m=new FileReader;m.onloadend=function(a){a=a.target.result||new ArrayBuffer(0);e(a)};m.readAsArrayBuffer(b)};Jo.readAsBinaryString=
w2;Jo.typedBuffer=function(){};var t8=Jo.atob,u8=Jo.btoa,Zh="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,uoa={},xH=uoa=function(b){function e(E,F){var H=E[0],I=E[1],M=E[2],N=E[3];H+=(I&M|~I&N)+F[0]-680876936|0;H=(H<<7|H>>>25)+I|0;N+=(H&I|~H&M)+F[1]-389564586|0;N=(N<<12|N>>>20)+H|0;M+=(N&H|~N&I)+F[2]+606105819|0;M=(M<<17|M>>>15)+N|0;I+=(M&N|~M&H)+F[3]-1044525330|0;I=(I<<22|I>>>10)+M|0;H+=(I&M|~I&N)+F[4]-176418897|0;H=(H<<7|H>>>25)+I|0;N+=(H&I|~H&M)+F[5]+1200080426|
0;N=(N<<12|N>>>20)+H|0;M+=(N&H|~N&I)+F[6]-1473231341|0;M=(M<<17|M>>>15)+N|0;I+=(M&N|~M&H)+F[7]-45705983|0;I=(I<<22|I>>>10)+M|0;H+=(I&M|~I&N)+F[8]+1770035416|0;H=(H<<7|H>>>25)+I|0;N+=(H&I|~H&M)+F[9]-1958414417|0;N=(N<<12|N>>>20)+H|0;M+=(N&H|~N&I)+F[10]-42063|0;M=(M<<17|M>>>15)+N|0;I+=(M&N|~M&H)+F[11]-1990404162|0;I=(I<<22|I>>>10)+M|0;H+=(I&M|~I&N)+F[12]+1804603682|0;H=(H<<7|H>>>25)+I|0;N+=(H&I|~H&M)+F[13]-40341101|0;N=(N<<12|N>>>20)+H|0;M+=(N&H|~N&I)+F[14]-1502002290|0;M=(M<<17|M>>>15)+N|0;I+=(M&N|
~M&H)+F[15]+1236535329|0;I=(I<<22|I>>>10)+M|0;H+=(I&N|M&~N)+F[1]-165796510|0;H=(H<<5|H>>>27)+I|0;N+=(H&M|I&~M)+F[6]-1069501632|0;N=(N<<9|N>>>23)+H|0;M+=(N&I|H&~I)+F[11]+643717713|0;M=(M<<14|M>>>18)+N|0;I+=(M&H|N&~H)+F[0]-373897302|0;I=(I<<20|I>>>12)+M|0;H+=(I&N|M&~N)+F[5]-701558691|0;H=(H<<5|H>>>27)+I|0;N+=(H&M|I&~M)+F[10]+38016083|0;N=(N<<9|N>>>23)+H|0;M+=(N&I|H&~I)+F[15]-660478335|0;M=(M<<14|M>>>18)+N|0;I+=(M&H|N&~H)+F[4]-405537848|0;I=(I<<20|I>>>12)+M|0;H+=(I&N|M&~N)+F[9]+568446438|0;H=(H<<5|H>>>
27)+I|0;N+=(H&M|I&~M)+F[14]-1019803690|0;N=(N<<9|N>>>23)+H|0;M+=(N&I|H&~I)+F[3]-187363961|0;M=(M<<14|M>>>18)+N|0;I+=(M&H|N&~H)+F[8]+1163531501|0;I=(I<<20|I>>>12)+M|0;H+=(I&N|M&~N)+F[13]-1444681467|0;H=(H<<5|H>>>27)+I|0;N+=(H&M|I&~M)+F[2]-51403784|0;N=(N<<9|N>>>23)+H|0;M+=(N&I|H&~I)+F[7]+1735328473|0;M=(M<<14|M>>>18)+N|0;I+=(M&H|N&~H)+F[12]-1926607734|0;I=(I<<20|I>>>12)+M|0;H+=(I^M^N)+F[5]-378558|0;H=(H<<4|H>>>28)+I|0;N+=(H^I^M)+F[8]-2022574463|0;N=(N<<11|N>>>21)+H|0;M+=(N^H^I)+F[11]+1839030562|0;
M=(M<<16|M>>>16)+N|0;I+=(M^N^H)+F[14]-35309556|0;I=(I<<23|I>>>9)+M|0;H+=(I^M^N)+F[1]-1530992060|0;H=(H<<4|H>>>28)+I|0;N+=(H^I^M)+F[4]+1272893353|0;N=(N<<11|N>>>21)+H|0;M+=(N^H^I)+F[7]-155497632|0;M=(M<<16|M>>>16)+N|0;I+=(M^N^H)+F[10]-1094730640|0;I=(I<<23|I>>>9)+M|0;H+=(I^M^N)+F[13]+681279174|0;H=(H<<4|H>>>28)+I|0;N+=(H^I^M)+F[0]-358537222|0;N=(N<<11|N>>>21)+H|0;M+=(N^H^I)+F[3]-722521979|0;M=(M<<16|M>>>16)+N|0;I+=(M^N^H)+F[6]+76029189|0;I=(I<<23|I>>>9)+M|0;H+=(I^M^N)+F[9]-640364487|0;H=(H<<4|H>>>
28)+I|0;N+=(H^I^M)+F[12]-421815835|0;N=(N<<11|N>>>21)+H|0;M+=(N^H^I)+F[15]+530742520|0;M=(M<<16|M>>>16)+N|0;I+=(M^N^H)+F[2]-995338651|0;I=(I<<23|I>>>9)+M|0;H+=(M^(I|~N))+F[0]-198630844|0;H=(H<<6|H>>>26)+I|0;N+=(I^(H|~M))+F[7]+1126891415|0;N=(N<<10|N>>>22)+H|0;M+=(H^(N|~I))+F[14]-1416354905|0;M=(M<<15|M>>>17)+N|0;I+=(N^(M|~H))+F[5]-57434055|0;I=(I<<21|I>>>11)+M|0;H+=(M^(I|~N))+F[12]+1700485571|0;H=(H<<6|H>>>26)+I|0;N+=(I^(H|~M))+F[3]-1894986606|0;N=(N<<10|N>>>22)+H|0;M+=(H^(N|~I))+F[10]-1051523|0;
M=(M<<15|M>>>17)+N|0;I+=(N^(M|~H))+F[1]-2054922799|0;I=(I<<21|I>>>11)+M|0;H+=(M^(I|~N))+F[8]+1873313359|0;H=(H<<6|H>>>26)+I|0;N+=(I^(H|~M))+F[15]-30611744|0;N=(N<<10|N>>>22)+H|0;M+=(H^(N|~I))+F[6]-1560198380|0;M=(M<<15|M>>>17)+N|0;I+=(N^(M|~H))+F[13]+1309151649|0;I=(I<<21|I>>>11)+M|0;H+=(M^(I|~N))+F[4]-145523070|0;H=(H<<6|H>>>26)+I|0;N+=(I^(H|~M))+F[11]-1120210379|0;N=(N<<10|N>>>22)+H|0;M+=(H^(N|~I))+F[2]+718787259|0;M=(M<<15|M>>>17)+N|0;I+=(N^(M|~H))+F[9]-343485551|0;E[0]=H+E[0]|0;E[1]=((I<<21|I>>>
11)+M|0)+E[1]|0;E[2]=M+E[2]|0;E[3]=N+E[3]|0}function m(E){var F=[],H;for(H=0;64>H;H+=4)F[H>>2]=E.charCodeAt(H)+(E.charCodeAt(H+1)<<8)+(E.charCodeAt(H+2)<<16)+(E.charCodeAt(H+3)<<24);return F}function a(E){var F=[],H;for(H=0;64>H;H+=4)F[H>>2]=E[H]+(E[H+1]<<8)+(E[H+2]<<16)+(E[H+3]<<24);return F}function g(E){var F=E.length,H=[1732584193,-271733879,-1732584194,271733878],I;for(I=64;I<=F;I+=64)e(H,m(E.substring(I-64,I)));E=E.substring(I-64);var M=E.length;var N=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(I=
0;I<M;I+=1)N[I>>2]|=E.charCodeAt(I)<<(I%4<<3);N[I>>2]|=128<<(I%4<<3);if(55<I)for(e(H,N),I=0;16>I;I+=1)N[I]=0;F=(8*F).toString(16).match(/(.*?)(.{0,8})$/);E=parseInt(F[2],16);F=parseInt(F[1],16)||0;N[14]=E;N[15]=F;e(H,N);return H}function l(E){var F;for(F=0;F<E.length;F+=1){var H=F,I,M=E[F],N="";for(I=0;4>I;I+=1)N+=A[M>>8*I+4&15]+A[M>>8*I&15];E[H]=N}return E.join("")}function r(E){/[\u0080-\uFFFF]/.test(E)&&(E=unescape(encodeURIComponent(E)));return E}function v(E){var F=[],H=E.length,I;for(I=0;I<
H-1;I+=2)F.push(parseInt(E.substr(I,2),16));return String.fromCharCode.apply(String,F)}function y(){this.reset()}var A="0123456789abcdef".split("");l(g("hello"));"undefined"===typeof ArrayBuffer||ArrayBuffer.prototype.slice||function(){function E(F,H){F=F|0||0;return 0>F?Math.max(F+H,0):Math.min(F,H)}ArrayBuffer.prototype.slice=function(F,H){var I=(this||Zh).byteLength;F=E(F,I);var M=I;H!==b&&(M=E(H,I));if(F>M)return new ArrayBuffer(0);M-=F;H=new ArrayBuffer(M);I=new Uint8Array(H);F=new Uint8Array(this||
Zh,F,M);I.set(F);return H}}();y.prototype.append=function(E){this.appendBinary(r(E));return this||Zh};y.prototype.appendBinary=function(E){(this||Zh)._buff+=E;(this||Zh)._length+=E.length;E=(this||Zh)._buff.length;var F;for(F=64;F<=E;F+=64)e((this||Zh)._hash,m((this||Zh)._buff.substring(F-64,F)));(this||Zh)._buff=(this||Zh)._buff.substring(F-64);return this||Zh};y.prototype.end=function(E){var F=(this||Zh)._buff,H=F.length,I,M=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(I=0;I<H;I+=1)M[I>>2]|=F.charCodeAt(I)<<
(I%4<<3);this._finish(M,H);F=l((this||Zh)._hash);E&&(F=v(F));this.reset();return F};y.prototype.reset=function(){(this||Zh)._buff="";(this||Zh)._length=0;(this||Zh)._hash=[1732584193,-271733879,-1732584194,271733878];return this||Zh};y.prototype.getState=function(){return{buff:(this||Zh)._buff,length:(this||Zh)._length,hash:(this||Zh)._hash.slice()}};y.prototype.setState=function(E){(this||Zh)._buff=E.buff;(this||Zh)._length=E.length;(this||Zh)._hash=E.hash;return this||Zh};y.prototype.destroy=function(){delete (this||
Zh)._hash;delete (this||Zh)._buff;delete (this||Zh)._length};y.prototype._finish=function(E,F){E[F>>2]|=128<<(F%4<<3);if(55<F)for(e((this||Zh)._hash,E),F=0;16>F;F+=1)E[F]=0;var H=8*(this||Zh)._length;H=H.toString(16).match(/(.*?)(.{0,8})$/);F=parseInt(H[2],16);H=parseInt(H[1],16)||0;E[14]=F;E[15]=H;e((this||Zh)._hash,E)};y.hash=function(E,F){return y.hashBinary(r(E),F)};y.hashBinary=function(E,F){E=g(E);E=l(E);return F?v(E):E};y.ArrayBuffer=function(){this.reset()};y.ArrayBuffer.prototype.append=
function(E){var F=(this||Zh)._buff.buffer,H=new Uint8Array(F.byteLength+E.byteLength);H.set(new Uint8Array(F));H.set(new Uint8Array(E),F.byteLength);F=H.length;(this||Zh)._length+=E.byteLength;for(E=64;E<=F;E+=64)e((this||Zh)._hash,a(H.subarray(E-64,E)));(this||Zh)._buff=E-64<F?new Uint8Array(H.buffer.slice(E-64)):new Uint8Array(0);return this||Zh};y.ArrayBuffer.prototype.end=function(E){var F=(this||Zh)._buff,H=F.length,I=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],M;for(M=0;M<H;M+=1)I[M>>2]|=F[M]<<(M%4<<
3);this._finish(I,H);F=l((this||Zh)._hash);E&&(F=v(F));this.reset();return F};y.ArrayBuffer.prototype.reset=function(){(this||Zh)._buff=new Uint8Array(0);(this||Zh)._length=0;(this||Zh)._hash=[1732584193,-271733879,-1732584194,271733878];return this||Zh};y.ArrayBuffer.prototype.getState=function(){var E=y.prototype.getState.call(this||Zh);E.buff=String.fromCharCode.apply(null,new Uint8Array(E.buff));return E};y.ArrayBuffer.prototype.setState=function(E){var F=E.buff,H=F.length,I=new ArrayBuffer(H);
I=new Uint8Array(I);var M;for(M=0;M<H;M+=1)I[M]=F.charCodeAt(M);E.buff=I;return y.prototype.setState.call(this||Zh,E)};y.ArrayBuffer.prototype.destroy=y.prototype.destroy;y.ArrayBuffer.prototype._finish=y.prototype._finish;y.ArrayBuffer.hash=function(E,F){var H=new Uint8Array(E),I=H.length;E=[1732584193,-271733879,-1732584194,271733878];var M;for(M=64;M<=I;M+=64)e(E,a(H.subarray(M-64,M)));H=M-64<I?H.subarray(M-64):new Uint8Array(0);var N=H.length;var W=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(M=0;M<
N;M+=1)W[M>>2]|=H[M]<<(M%4<<3);W[M>>2]|=128<<(M%4<<3);if(55<M)for(e(E,W),M=0;16>M;M+=1)W[M]=0;I=(8*I).toString(16).match(/(.*?)(.{0,8})$/);H=parseInt(I[2],16);I=parseInt(I[1],16)||0;W[14]=H;W[15]=I;e(E,W);E=l(E);return F?v(E):E};return y}(),dE={};Object.defineProperty(dE,"__esModule",{value:!0});var y2=Jo,lV=xH&&"object"===typeof xH&&"default"in xH?xH["default"]:xH,voa=self.setImmediate||self.setTimeout;dE.binaryMd5=function(b,e){function m(){voa(g)}function a(){var H=E.end(!0);H=y2.btoa(H);e(H);
E.destroy()}function g(){var H=A*v,I=H+v;A++;A<y?F(E,b,H,I,m):F(E,b,H,I,a)}var l="string"===typeof b,r=l?b.length:b.size,v=Math.min(32768,r),y=Math.ceil(r/v),A=0,E=l?new lV:new lV.ArrayBuffer,F=l?wfa:vfa;g()};dE.stringMd5=function(b){return lV.hash(b)};var yh={};Object.defineProperty(yh,"__esModule",{value:!0});var KR=PK(xU),woa=PK(vl),v8=PK(Nj),RK=PK($u),z2=Function.prototype.toString,xfa=z2.call(Object);try{localStorage.setItem("_pouch_check_localstorage",1);var QK=!!localStorage.getItem("_pouch_check_localstorage")}catch(b){QK=
!1}woa(oD,RK);oD.prototype.addListener=function(b,e,m,a){function g(){if(l._listeners[e])if(r)r="waiting";else{r=!0;var v=LR(a,"style include_docs attachments conflicts filter doc_ids view since query_params binary return_docs".split(" "));m.changes(v).on("change",function(y){y.seq>a.since&&!a.cancelled&&(a.since=y.seq,a.onChange(y))}).on("complete",function(){"waiting"===r&&v8(g);r=!1}).on("error",function(){r=!1})}}if(!this._listeners[e]){var l=this,r=!1;this._listeners[e]=g;this.on(b,g)}};oD.prototype.removeListener=
function(b,e){e in this._listeners&&(RK.prototype.removeListener.call(this,b,this._listeners[e]),delete this._listeners[e])};oD.prototype.notifyLocalWindows=function(b){QK&&(localStorage[b]="a"===localStorage[b]?"b":"a")};oD.prototype.notify=function(b){this.emit(b);this.notifyLocalWindows(b)};var xoa="function"===typeof Object.assign?Object.assign:function(b){for(var e=Object(b),m=1;m<arguments.length;m++){var a=arguments[m];if(null!=a)for(var g in a)Object.prototype.hasOwnProperty.call(a,g)&&(e[g]=
a[g])}return e},yoa=function(){}.name?function(b){return b.name}:function(b){return(b=b.toString().match(/^\s*function\s*(?:(\S+)\s*)?\(/))&&b[1]?b[1]:""},w8="source protocol authority userInfo user password host port relative path directory file query anchor".split(" "),zoa=/(?:^|&)([^&=]*)=?([^&]*)/g,Aoa=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,
Boa=pB.v4;yh.adapterFun=function(b,e){return B2(KR(function(m){if(this._closed)return Promise.reject(Error("database is closed"));if(this._destroyed)return Promise.reject(Error("database is destroyed"));var a=this;yfa(a,b,m);return this.taskqueue.isReady?e.apply(this,m):new Promise(function(g,l){a.taskqueue.addTask(function(r){r?l(r):g(a[b].apply(a,m))})})}))};yh.assign=xoa;yh.bulkGetShim=function(b,e,m){function a(){var I=[];E.forEach(function(M){M.docs.forEach(function(N){I.push({id:M.id,docs:[N]})})});
m(null,{results:I})}function g(){if(!(H>=F.length)){var I=F.slice(H,Math.min(H+6,F.length));l(I,H);H+=I.length}}function l(I,M){I.forEach(function(N,W){var X=M+W;W=v.get(N);var ea=LR(W[0],["atts_since","attachments"]);ea.open_revs=W.map(function(Ma){return Ma.rev});ea.open_revs=ea.open_revs.filter(C2);var Aa=C2;0===ea.open_revs.length&&(delete ea.open_revs,Aa=zfa);["revs","attachments","binary","ajax","latest"].forEach(function(Ma){Ma in e&&(ea[Ma]=e[Ma])});b.get(N,ea,function(Ma,K){Ma=Ma?[{error:Ma}]:
Aa(K);E[X]={id:N,docs:Ma};++A===y&&a();g()})})}var r=e.docs,v=new Jy.Map;r.forEach(function(I){v.has(I.id)?v.get(I.id).push(I):v.set(I.id,[I])});var y=v.size,A=0,E=Array(y),F=[];v.forEach(function(I,M){F.push(M)});var H=0;g()};yh.changesHandler=oD;yh.clone=gG;yh.defaultBackOff=function(b){var e=0;b||(e=2E3);b=parseInt(b,10)||0;e=parseInt(e,10);e=e!==e||e<=b?(b||1)<<1:e+1;6E5<e&&(b=3E5,e=6E5);return~~((e-b)*Math.random()+b)};yh.explainError=function(b,e){MR("info","The above "+b+" is totally normal. "+
e)};yh.filterChange=function(b){var e={},m=b.filter&&"function"===typeof b.filter;e.query=b.query_params;return function(a){a.doc||(a.doc={});var g;if(g=m)try{g=!(0,b.filter)(a.doc,e)}catch(r){g=Ug.createError(Ug.BAD_REQUEST,"Filter function threw: "+r.toString())}if("object"===typeof g)return g;if(g)return!1;if(!b.include_docs)delete a.doc;else if(!b.attachments)for(var l in a.doc._attachments)a.doc._attachments.hasOwnProperty(l)&&(a.doc._attachments[l].stub=!0);return!0}};yh.flatten=function(b){for(var e=
[],m=0,a=b.length;m<a;m++)e=e.concat(b[m]);return e};yh.functionName=yoa;yh.guardedConsole=MR;yh.hasLocalStorage=function(){return QK};yh.invalidIdError=function(b){var e;b?"string"!==typeof b?e=Ug.createError(Ug.INVALID_ID):/^_/.test(b)&&!/^_(design|local)/.test(b)&&(e=Ug.createError(Ug.RESERVED_ID)):e=Ug.createError(Ug.MISSING_ID);if(e)throw e;};yh.isRemote=function(b){return"boolean"===typeof b._remote?b._remote:"function"===typeof b.type?(MR("warn","db.type() is deprecated and will be removed in a future version of PouchDB"),
"http"===b.type()):!1};yh.listenerCount=function(b,e){return"listenerCount"in b?b.listenerCount(e):RK.listenerCount(b,e)};yh.nextTick=v8;yh.normalizeDdocFunctionName=function(b){return(b=D2(b))?b.join("/"):null};yh.once=A2;yh.parseDdocFunctionName=D2;yh.parseUri=function(b){b=Aoa.exec(b);for(var e={},m=14;m--;){var a=w8[m],g=b[m]||"",l=-1!==["user","password"].indexOf(a);e[a]=l?decodeURIComponent(g):g}e.queryKey={};e[w8[12]].replace(zoa,function(r,v,y){v&&(e.queryKey[v]=y)});return e};yh.pick=LR;
yh.rev=function(b,e){b=gG(b);if(!e)return pB.v4().replace(/-/g,"").toLowerCase();delete b._rev_tree;return dE.stringMd5(JSON.stringify(b))};yh.scopeEval=function(b,e){var m=[],a=[],g;for(g in e)e.hasOwnProperty(g)&&(m.push(g),a.push(e[g]));m.push(b);return Function.apply(null,m).apply(null,a)};yh.toPromise=B2;yh.upsert=E2;yh.uuid=Boa;var x8={};x8=function(){for(var b={},e=0;e<arguments.length;e++){var m=arguments[e],a;for(a in m)Coa.call(m,a)&&(b[a]=m[a])}return b};var Coa=Object.prototype.hasOwnProperty,
Qy=x8,y8={};y8=function(b){for(var e=1;e<arguments.length;e++){var m=arguments[e],a;for(a in m)Doa.call(m,a)&&(b[a]=m[a])}return b};for(var Doa=Object.prototype.hasOwnProperty,Eoa={},Foa=y8,z8=Eoa=function(){var b=Qy.apply(null,arguments);return Foa(b,{bufferKeys:b.bufferKeys||!1,snapshots:b.snapshots||!1,permanence:b.permanence||!1,seek:b.seek||!1,clear:b.clear||!1,status:b.status||!1,createIfMissing:b.createIfMissing||!1,errorIfExists:b.errorIfExists||!1,deferredOpen:b.deferredOpen||!1,openCallback:b.openCallback||
!1,promises:b.promises||!1,streams:b.streams||!1,encodings:b.encodings||!1,additionalMethods:Qy(b.additionalMethods)})},gv=[],Fs=[],Goa="undefined"!==typeof Uint8Array?Uint8Array:Array,eE=0;64>eE;++eE)gv[eE]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[eE],Fs["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charCodeAt(eE)]=eE;Fs[45]=62;Fs[95]=63;var SK={byteLength:function(b){b=F2(b);var e=b[1];return 3*(b[0]+e)/4-e},toByteArray:function(b){var e=F2(b);var m=
e[0];e=e[1];var a=new Goa(3*(m+e)/4-e),g=0,l=0<e?m-4:m,r;for(r=0;r<l;r+=4)m=Fs[b.charCodeAt(r)]<<18|Fs[b.charCodeAt(r+1)]<<12|Fs[b.charCodeAt(r+2)]<<6|Fs[b.charCodeAt(r+3)],a[g++]=m>>16&255,a[g++]=m>>8&255,a[g++]=m&255;2===e&&(m=Fs[b.charCodeAt(r)]<<2|Fs[b.charCodeAt(r+1)]>>4,a[g++]=m&255);1===e&&(m=Fs[b.charCodeAt(r)]<<10|Fs[b.charCodeAt(r+1)]<<4|Fs[b.charCodeAt(r+2)]>>2,a[g++]=m>>8&255,a[g++]=m&255);return a},fromByteArray:function(b){for(var e=b.length,m=e%3,a=[],g=0,l=e-m;g<l;g+=16383)a.push(Cfa(b,
g,g+16383>l?l:g+16383));1===m?(b=b[e-1],a.push(gv[b>>2]+gv[b<<4&63]+"==")):2===m&&(b=(b[e-2]<<8)+b[e-1],a.push(gv[b>>10]+gv[b>>4&63]+gv[b<<2&63]+"="));return a.join("")}},pD={read:function(b,e,m,a,g){var l=8*g-a-1;var r=(1<<l)-1,v=r>>1,y=-7;g=m?g-1:0;var A=m?-1:1,E=b[e+g];g+=A;m=E&(1<<-y)-1;E>>=-y;for(y+=l;0<y;m=256*m+b[e+g],g+=A,y-=8);l=m&(1<<-y)-1;m>>=-y;for(y+=a;0<y;l=256*l+b[e+g],g+=A,y-=8);if(0===m)m=1-v;else{if(m===r)return l?NaN:Infinity*(E?-1:1);l+=Math.pow(2,a);m-=v}return(E?-1:1)*l*Math.pow(2,
m-a)},write:function(b,e,m,a,g,l){var r,v=8*l-g-1,y=(1<<v)-1,A=y>>1,E=23===g?Math.pow(2,-24)-Math.pow(2,-77):0;l=a?0:l-1;var F=a?1:-1,H=0>e||0===e&&0>1/e?1:0;e=Math.abs(e);isNaN(e)||Infinity===e?(e=isNaN(e)?1:0,a=y):(a=Math.floor(Math.log(e)/Math.LN2),1>e*(r=Math.pow(2,-a))&&(a--,r*=2),e=1<=a+A?e+E/r:e+E*Math.pow(2,1-A),2<=e*r&&(a++,r/=2),a+A>=y?(e=0,a=y):1<=a+A?(e=(e*r-1)*Math.pow(2,g),a+=A):(e=e*Math.pow(2,A-1)*Math.pow(2,g),a=0));for(;8<=g;b[m+l]=e&255,l+=F,e/=256,g-=8);a=a<<g|e;for(v+=g;0<v;b[m+
l]=a&255,l+=F,a/=256,v-=8);b[m+l-F]|=128*H}},A8="function"===typeof Symbol&&"function"===typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;var B8=ef;var NR=2147483647;ef.TYPED_ARRAY_SUPPORT=function(){try{var b=new Uint8Array(1),e={foo:function(){return 42}};Object.setPrototypeOf(e,Uint8Array.prototype);Object.setPrototypeOf(b,e);return 42===b.foo()}catch(m){return!1}}();ef.TYPED_ARRAY_SUPPORT||"undefined"===typeof console||"function"!==typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");
Object.defineProperty(ef.prototype,"parent",{enumerable:!0,get:function(){if(ef.isBuffer(this))return this.buffer}});Object.defineProperty(ef.prototype,"offset",{enumerable:!0,get:function(){if(ef.isBuffer(this))return this.byteOffset}});ef.poolSize=8192;ef.from=function(b,e,m){return G2(b,e,m)};Object.setPrototypeOf(ef.prototype,Uint8Array.prototype);Object.setPrototypeOf(ef,Uint8Array);ef.alloc=function(b,e,m){I2(b);b=0>=b?Gw(b):void 0!==e?"string"===typeof m?Gw(b).fill(e,m):Gw(b).fill(e):Gw(b);
return b};ef.allocUnsafe=function(b){return OR(b)};ef.allocUnsafeSlow=function(b){return OR(b)};ef.isBuffer=function(b){return null!=b&&!0===b._isBuffer&&b!==ef.prototype};ef.compare=function(b,e){Hw(b,Uint8Array)&&(b=ef.from(b,b.offset,b.byteLength));Hw(e,Uint8Array)&&(e=ef.from(e,e.offset,e.byteLength));if(!ef.isBuffer(b)||!ef.isBuffer(e))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(b===e)return 0;for(var m=b.length,a=e.length,g=0,l=Math.min(m,
a);g<l;++g)if(b[g]!==e[g]){m=b[g];a=e[g];break}return m<a?-1:a<m?1:0};ef.isEncoding=function(b){switch(String(b).toLowerCase()){case "hex":case "utf8":case "utf-8":case "ascii":case "latin1":case "binary":case "base64":case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return!0;default:return!1}};ef.concat=function(b,e){if(!Array.isArray(b))throw new TypeError('"list" argument must be an Array of Buffers');if(0===b.length)return ef.alloc(0);var m;if(void 0===e)for(m=e=0;m<b.length;++m)e+=b[m].length;
e=ef.allocUnsafe(e);var a=0;for(m=0;m<b.length;++m){var g=b[m];Hw(g,Uint8Array)&&(g=ef.from(g));if(!ef.isBuffer(g))throw new TypeError('"list" argument must be an Array of Buffers');g.copy(e,a);a+=g.length}return e};ef.byteLength=H2;ef.prototype._isBuffer=!0;ef.prototype.swap16=function(){var b=this.length;if(0!==b%2)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<b;e+=2)DA(this,e,e+1);return this};ef.prototype.swap32=function(){var b=this.length;if(0!==b%4)throw new RangeError("Buffer size must be a multiple of 32-bits");
for(var e=0;e<b;e+=4)DA(this,e,e+3),DA(this,e+1,e+2);return this};ef.prototype.swap64=function(){var b=this.length;if(0!==b%8)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<b;e+=8)DA(this,e,e+7),DA(this,e+1,e+6),DA(this,e+2,e+5),DA(this,e+3,e+4);return this};ef.prototype.toString=function(){var b=this.length;return 0===b?"":0===arguments.length?K2(this,0,b):Efa.apply(this,arguments)};ef.prototype.toLocaleString=ef.prototype.toString;ef.prototype.equals=function(b){if(!ef.isBuffer(b))throw new TypeError("Argument must be a Buffer");
return this===b?!0:0===ef.compare(this,b)};ef.prototype.inspect=function(){var b=this.toString("hex",0,50).replace(/(.{2})/g,"$1 ").trim();50<this.length&&(b+=" ... ");return"<Buffer "+b+">"};A8&&(ef.prototype[A8]=ef.prototype.inspect);ef.prototype.compare=function(b,e,m,a,g){Hw(b,Uint8Array)&&(b=ef.from(b,b.offset,b.byteLength));if(!ef.isBuffer(b))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof b);void 0===e&&(e=0);void 0===m&&(m=b?b.length:
0);void 0===a&&(a=0);void 0===g&&(g=this.length);if(0>e||m>b.length||0>a||g>this.length)throw new RangeError("out of range index");if(a>=g&&e>=m)return 0;if(a>=g)return-1;if(e>=m)return 1;e>>>=0;m>>>=0;a>>>=0;g>>>=0;if(this===b)return 0;var l=g-a,r=m-e,v=Math.min(l,r);a=this.slice(a,g);b=b.slice(e,m);for(e=0;e<v;++e)if(a[e]!==b[e]){l=a[e];r=b[e];break}return l<r?-1:r<l?1:0};ef.prototype.includes=function(b,e,m){return-1!==this.indexOf(b,e,m)};ef.prototype.indexOf=function(b,e,m){return L2(this,b,
e,m,!0)};ef.prototype.lastIndexOf=function(b,e,m){return L2(this,b,e,m,!1)};ef.prototype.write=function(b,e,m,a){if(void 0===e)a="utf8",m=this.length,e=0;else if(void 0===m&&"string"===typeof e)a=e,m=this.length,e=0;else if(isFinite(e))e>>>=0,isFinite(m)?(m>>>=0,void 0===a&&(a="utf8")):(a=m,m=void 0);else throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var g=this.length-e;if(void 0===m||m>g)m=g;if(0<b.length&&(0>m||0>e)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");
a||(a="utf8");for(g=!1;;)switch(a){case "hex":a:{e=Number(e)||0;a=this.length-e;m?(m=Number(m),m>a&&(m=a)):m=a;a=b.length;m>a/2&&(m=a/2);for(a=0;a<m;++a){g=parseInt(b.substr(2*a,2),16);if(g!==g){b=a;break a}this[e+a]=g}b=a}return b;case "utf8":case "utf-8":return hG(RR(b,this.length-e),this,e,m);case "ascii":return hG(R2(b),this,e,m);case "latin1":case "binary":return hG(R2(b),this,e,m);case "base64":return hG(SK.toByteArray(J2(b)),this,e,m);case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":a=
b;g=this.length-e;for(var l=[],r=0;r<a.length&&!(0>(g-=2));++r){var v=a.charCodeAt(r);b=v>>8;v%=256;l.push(v);l.push(b)}return hG(l,this,e,m);default:if(g)throw new TypeError("Unknown encoding: "+a);a=(""+a).toLowerCase();g=!0}};ef.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var N2=4096;ef.prototype.slice=function(b,e){var m=this.length;b=~~b;e=void 0===e?m:~~e;0>b?(b+=m,0>b&&(b=0)):b>m&&(b=m);0>e?(e+=m,0>e&&(e=0)):e>m&&(e=m);e<b&&(e=b);b=
this.subarray(b,e);Object.setPrototypeOf(b,ef.prototype);return b};ef.prototype.readUIntLE=function(b,e,m){b>>>=0;e>>>=0;m||fo(b,e,this.length);m=this[b];for(var a=1,g=0;++g<e&&(a*=256);)m+=this[b+g]*a;return m};ef.prototype.readUIntBE=function(b,e,m){b>>>=0;e>>>=0;m||fo(b,e,this.length);m=this[b+--e];for(var a=1;0<e&&(a*=256);)m+=this[b+--e]*a;return m};ef.prototype.readUInt8=function(b,e){b>>>=0;e||fo(b,1,this.length);return this[b]};ef.prototype.readUInt16LE=function(b,e){b>>>=0;e||fo(b,2,this.length);
return this[b]|this[b+1]<<8};ef.prototype.readUInt16BE=function(b,e){b>>>=0;e||fo(b,2,this.length);return this[b]<<8|this[b+1]};ef.prototype.readUInt32LE=function(b,e){b>>>=0;e||fo(b,4,this.length);return(this[b]|this[b+1]<<8|this[b+2]<<16)+16777216*this[b+3]};ef.prototype.readUInt32BE=function(b,e){b>>>=0;e||fo(b,4,this.length);return 16777216*this[b]+(this[b+1]<<16|this[b+2]<<8|this[b+3])};ef.prototype.readIntLE=function(b,e,m){b>>>=0;e>>>=0;m||fo(b,e,this.length);m=this[b];for(var a=1,g=0;++g<
e&&(a*=256);)m+=this[b+g]*a;m>=128*a&&(m-=Math.pow(2,8*e));return m};ef.prototype.readIntBE=function(b,e,m){b>>>=0;e>>>=0;m||fo(b,e,this.length);m=e;for(var a=1,g=this[b+--m];0<m&&(a*=256);)g+=this[b+--m]*a;g>=128*a&&(g-=Math.pow(2,8*e));return g};ef.prototype.readInt8=function(b,e){b>>>=0;e||fo(b,1,this.length);return this[b]&128?-1*(255-this[b]+1):this[b]};ef.prototype.readInt16LE=function(b,e){b>>>=0;e||fo(b,2,this.length);b=this[b]|this[b+1]<<8;return b&32768?b|4294901760:b};ef.prototype.readInt16BE=
function(b,e){b>>>=0;e||fo(b,2,this.length);b=this[b+1]|this[b]<<8;return b&32768?b|4294901760:b};ef.prototype.readInt32LE=function(b,e){b>>>=0;e||fo(b,4,this.length);return this[b]|this[b+1]<<8|this[b+2]<<16|this[b+3]<<24};ef.prototype.readInt32BE=function(b,e){b>>>=0;e||fo(b,4,this.length);return this[b]<<24|this[b+1]<<16|this[b+2]<<8|this[b+3]};ef.prototype.readFloatLE=function(b,e){b>>>=0;e||fo(b,4,this.length);return pD.read(this,b,!0,23,4)};ef.prototype.readFloatBE=function(b,e){b>>>=0;e||fo(b,
4,this.length);return pD.read(this,b,!1,23,4)};ef.prototype.readDoubleLE=function(b,e){b>>>=0;e||fo(b,8,this.length);return pD.read(this,b,!0,52,8)};ef.prototype.readDoubleBE=function(b,e){b>>>=0;e||fo(b,8,this.length);return pD.read(this,b,!1,52,8)};ef.prototype.writeUIntLE=function(b,e,m,a){b=+b;e>>>=0;m>>>=0;a||zq(this,b,e,m,Math.pow(2,8*m)-1,0);a=1;var g=0;for(this[e]=b&255;++g<m&&(a*=256);)this[e+g]=b/a&255;return e+m};ef.prototype.writeUIntBE=function(b,e,m,a){b=+b;e>>>=0;m>>>=0;a||zq(this,
b,e,m,Math.pow(2,8*m)-1,0);a=m-1;var g=1;for(this[e+a]=b&255;0<=--a&&(g*=256);)this[e+a]=b/g&255;return e+m};ef.prototype.writeUInt8=function(b,e,m){b=+b;e>>>=0;m||zq(this,b,e,1,255,0);this[e]=b&255;return e+1};ef.prototype.writeUInt16LE=function(b,e,m){b=+b;e>>>=0;m||zq(this,b,e,2,65535,0);this[e]=b&255;this[e+1]=b>>>8;return e+2};ef.prototype.writeUInt16BE=function(b,e,m){b=+b;e>>>=0;m||zq(this,b,e,2,65535,0);this[e]=b>>>8;this[e+1]=b&255;return e+2};ef.prototype.writeUInt32LE=function(b,e,m){b=
+b;e>>>=0;m||zq(this,b,e,4,4294967295,0);this[e+3]=b>>>24;this[e+2]=b>>>16;this[e+1]=b>>>8;this[e]=b&255;return e+4};ef.prototype.writeUInt32BE=function(b,e,m){b=+b;e>>>=0;m||zq(this,b,e,4,4294967295,0);this[e]=b>>>24;this[e+1]=b>>>16;this[e+2]=b>>>8;this[e+3]=b&255;return e+4};ef.prototype.writeIntLE=function(b,e,m,a){b=+b;e>>>=0;a||(a=Math.pow(2,8*m-1),zq(this,b,e,m,a-1,-a));a=0;var g=1,l=0;for(this[e]=b&255;++a<m&&(g*=256);)0>b&&0===l&&0!==this[e+a-1]&&(l=1),this[e+a]=(b/g>>0)-l&255;return e+m};
ef.prototype.writeIntBE=function(b,e,m,a){b=+b;e>>>=0;a||(a=Math.pow(2,8*m-1),zq(this,b,e,m,a-1,-a));a=m-1;var g=1,l=0;for(this[e+a]=b&255;0<=--a&&(g*=256);)0>b&&0===l&&0!==this[e+a+1]&&(l=1),this[e+a]=(b/g>>0)-l&255;return e+m};ef.prototype.writeInt8=function(b,e,m){b=+b;e>>>=0;m||zq(this,b,e,1,127,-128);0>b&&(b=255+b+1);this[e]=b&255;return e+1};ef.prototype.writeInt16LE=function(b,e,m){b=+b;e>>>=0;m||zq(this,b,e,2,32767,-32768);this[e]=b&255;this[e+1]=b>>>8;return e+2};ef.prototype.writeInt16BE=
function(b,e,m){b=+b;e>>>=0;m||zq(this,b,e,2,32767,-32768);this[e]=b>>>8;this[e+1]=b&255;return e+2};ef.prototype.writeInt32LE=function(b,e,m){b=+b;e>>>=0;m||zq(this,b,e,4,2147483647,-2147483648);this[e]=b&255;this[e+1]=b>>>8;this[e+2]=b>>>16;this[e+3]=b>>>24;return e+4};ef.prototype.writeInt32BE=function(b,e,m){b=+b;e>>>=0;m||zq(this,b,e,4,2147483647,-2147483648);0>b&&(b=4294967295+b+1);this[e]=b>>>24;this[e+1]=b>>>16;this[e+2]=b>>>8;this[e+3]=b&255;return e+4};ef.prototype.writeFloatLE=function(b,
e,m){return P2(this,b,e,!0,m)};ef.prototype.writeFloatBE=function(b,e,m){return P2(this,b,e,!1,m)};ef.prototype.writeDoubleLE=function(b,e,m){return Q2(this,b,e,!0,m)};ef.prototype.writeDoubleBE=function(b,e,m){return Q2(this,b,e,!1,m)};ef.prototype.copy=function(b,e,m,a){if(!ef.isBuffer(b))throw new TypeError("argument should be a Buffer");m||(m=0);a||0===a||(a=this.length);e>=b.length&&(e=b.length);e||(e=0);0<a&&a<m&&(a=m);if(a===m||0===b.length||0===this.length)return 0;if(0>e)throw new RangeError("targetStart out of bounds");
if(0>m||m>=this.length)throw new RangeError("Index out of range");if(0>a)throw new RangeError("sourceEnd out of bounds");a>this.length&&(a=this.length);b.length-e<a-m&&(a=b.length-e+m);var g=a-m;if(this===b&&"function"===typeof Uint8Array.prototype.copyWithin)this.copyWithin(e,m,a);else if(this===b&&m<e&&e<a)for(a=g-1;0<=a;--a)b[a+e]=this[a+m];else Uint8Array.prototype.set.call(b,this.subarray(m,a),e);return g};ef.prototype.fill=function(b,e,m,a){if("string"===typeof b){"string"===typeof e?(a=e,e=
0,m=this.length):"string"===typeof m&&(a=m,m=this.length);if(void 0!==a&&"string"!==typeof a)throw new TypeError("encoding must be a string");if("string"===typeof a&&!ef.isEncoding(a))throw new TypeError("Unknown encoding: "+a);if(1===b.length){var g=b.charCodeAt(0);if("utf8"===a&&128>g||"latin1"===a)b=g}}else"number"===typeof b?b&=255:"boolean"===typeof b&&(b=Number(b));if(0>e||this.length<e||this.length<m)throw new RangeError("Out of range index");if(m<=e)return this;e>>>=0;m=void 0===m?this.length:
m>>>0;b||(b=0);if("number"===typeof b)for(a=e;a<m;++a)this[a]=b;else{g=ef.isBuffer(b)?b:ef.from(b,a);var l=g.length;if(0===l)throw new TypeError('The value "'+b+'" is invalid for argument "value"');for(a=0;a<m-e;++a)this[a+e]=g[a%l]}return this};var Gfa=/[^+/0-9A-Za-z-_]/g,Ffa=function(){for(var b=Array(256),e=0;16>e;++e)for(var m=16*e,a=0;16>a;++a)b[m+a]="0123456789abcdef"[e]+"0123456789abcdef"[a];return b}(),Iw="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,Hoa=
{};ny.prototype.next=function(b){var e=this||Iw;if("function"!==typeof b)throw Error("next() requires a callback argument");if(e._ended)return Nj(b,Error("cannot call next() after end()")),e;if(e._nexting)return Nj(b,Error("cannot call next() before previous next() has completed")),e;e._nexting=!0;e._next(function(){e._nexting=!1;b.apply(null,arguments)});return e};ny.prototype._next=function(b){Nj(b)};ny.prototype.seek=function(b){if((this||Iw)._ended)throw Error("cannot call seek() after end()");
if((this||Iw)._nexting)throw Error("cannot call seek() before next() has completed");b=(this||Iw).db._serializeKey(b);this._seek(b)};ny.prototype._seek=function(b){};ny.prototype.end=function(b){if("function"!==typeof b)throw Error("end() requires a callback argument");if((this||Iw)._ended)return Nj(b,Error("end() already called on iterator"));(this||Iw)._ended=!0;this._end(b)};ny.prototype._end=function(b){Nj(b)};ny.prototype._nextTick=Nj;var C8=Hoa=ny,zn="undefined"!==typeof globalThis?globalThis:
"undefined"!==typeof self?self:global,Ioa={};At.prototype._checkWritten=function(){if((this||zn)._written)throw Error("write() already called on this batch");};At.prototype.put=function(b,e){this._checkWritten();var m=(this||zn).db._checkKey(b)||(this||zn).db._checkValue(e);if(m)throw m;b=(this||zn).db._serializeKey(b);e=(this||zn).db._serializeValue(e);this._put(b,e);return this||zn};At.prototype._put=function(b,e){(this||zn)._operations.push({type:"put",key:b,value:e})};At.prototype.del=function(b){this._checkWritten();
var e=(this||zn).db._checkKey(b);if(e)throw e;b=(this||zn).db._serializeKey(b);this._del(b);return this||zn};At.prototype._del=function(b){(this||zn)._operations.push({type:"del",key:b})};At.prototype.clear=function(){this._checkWritten();this._clear();return this||zn};At.prototype._clear=function(){(this||zn)._operations=[]};At.prototype.write=function(b,e){this._checkWritten();"function"===typeof b&&(e=b);if("function"!==typeof e)throw Error("write() requires a callback argument");if("object"!==
typeof b||null===b)b={};(this||zn)._written=!0;this._write(b,e)};At.prototype._write=function(b,e){(this||zn).db._batch((this||zn)._operations,b,e)};At.prototype._nextTick=Nj;var Joa=Ioa=At,kr="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,D8={},Hfa=z8,Ifa=Object.prototype.hasOwnProperty,Jfa="start end gt gte lt lte".split(" ");Hl.prototype.open=function(b,e){var m=this||kr,a=(this||kr).status;"function"===typeof b&&(e=b);if("function"!==typeof e)throw Error("open() requires a callback argument");
if("object"!==typeof b||null===b)b={};b.createIfMissing=!1!==b.createIfMissing;b.errorIfExists=!!b.errorIfExists;(this||kr).status="opening";this._open(b,function(g){if(g)return m.status=a,e(g);m.status="open";e()})};Hl.prototype._open=function(b,e){Nj(e)};Hl.prototype.close=function(b){var e=this||kr,m=(this||kr).status;if("function"!==typeof b)throw Error("close() requires a callback argument");(this||kr).status="closing";this._close(function(a){if(a)return e.status=m,b(a);e.status="closed";b()})};
Hl.prototype._close=function(b){Nj(b)};Hl.prototype.get=function(b,e,m){"function"===typeof e&&(m=e);if("function"!==typeof m)throw Error("get() requires a callback argument");var a=this._checkKey(b);if(a)return Nj(m,a);b=this._serializeKey(b);if("object"!==typeof e||null===e)e={};e.asBuffer=!1!==e.asBuffer;this._get(b,e,m)};Hl.prototype._get=function(b,e,m){Nj(function(){m(Error("NotFound"))})};Hl.prototype.put=function(b,e,m,a){"function"===typeof m&&(a=m);if("function"!==typeof a)throw Error("put() requires a callback argument");
var g=this._checkKey(b)||this._checkValue(e);if(g)return Nj(a,g);b=this._serializeKey(b);e=this._serializeValue(e);if("object"!==typeof m||null===m)m={};this._put(b,e,m,a)};Hl.prototype._put=function(b,e,m,a){Nj(a)};Hl.prototype.del=function(b,e,m){"function"===typeof e&&(m=e);if("function"!==typeof m)throw Error("del() requires a callback argument");var a=this._checkKey(b);if(a)return Nj(m,a);b=this._serializeKey(b);if("object"!==typeof e||null===e)e={};this._del(b,e,m)};Hl.prototype._del=function(b,
e,m){Nj(m)};Hl.prototype.batch=function(b,e,m){if(!arguments.length)return this._chainedBatch();"function"===typeof e&&(m=e);"function"===typeof b&&(m=b);if("function"!==typeof m)throw Error("batch(array) requires a callback argument");if(!Array.isArray(b))return Nj(m,Error("batch(array) requires an array argument"));if(0===b.length)return Nj(m);if("object"!==typeof e||null===e)e={};for(var a=Array(b.length),g=0;g<b.length;g++){if("object"!==typeof b[g]||null===b[g])return Nj(m,Error("batch(array) element must be an object and not `null`"));
var l=Qy(b[g]);if("put"!==l.type&&"del"!==l.type)return Nj(m,Error("`type` must be 'put' or 'del'"));var r=this._checkKey(l.key);if(r)return Nj(m,r);l.key=this._serializeKey(l.key);if("put"===l.type){if(r=this._checkValue(l.value))return Nj(m,r);l.value=this._serializeValue(l.value)}a[g]=l}this._batch(a,e,m)};Hl.prototype._batch=function(b,e,m){Nj(m)};Hl.prototype.clear=function(b,e){if("function"===typeof b)e=b;else if("function"!==typeof e)throw Error("clear() requires a callback argument");b=S2(this||
kr,b);b.reverse=!!b.reverse;b.limit="limit"in b?b.limit:-1;this._clear(b,e)};Hl.prototype._clear=function(b,e){b.keys=!0;b.values=!1;b.keyAsBuffer=!0;b.valueAsBuffer=!0;var m=this._iterator(b),a={},g=this||kr,l=function(r){if(r)return m.end(function(){e(r)});m.next(function(v,y){if(v)return l(v);if(void 0===y)return m.end(e);g._del(y,a,l)})};l()};Hl.prototype._setupIteratorOptions=function(b){b=S2(this||kr,b);b.reverse=!!b.reverse;b.keys=!1!==b.keys;b.values=!1!==b.values;b.limit="limit"in b?b.limit:
-1;b.keyAsBuffer=!1!==b.keyAsBuffer;b.valueAsBuffer=!1!==b.valueAsBuffer;return b};Hl.prototype.iterator=function(b){if("object"!==typeof b||null===b)b={};b=this._setupIteratorOptions(b);return this._iterator(b)};Hl.prototype._iterator=function(b){return new C8(this||kr)};Hl.prototype._chainedBatch=function(){return new Joa(this||kr)};Hl.prototype._serializeKey=function(b){return b};Hl.prototype._serializeValue=function(b){return b};Hl.prototype._checkKey=function(b){if(null===b||void 0===b)return Error("key cannot be `null` or `undefined`");
if(B8.isBuffer(b)&&0===b.length)return Error("key cannot be an empty Buffer");if(""===b)return Error("key cannot be an empty String");if(Array.isArray(b)&&0===b.length)return Error("key cannot be an empty Array")};Hl.prototype._checkValue=function(b){if(null===b||void 0===b)return Error("value cannot be `null` or `undefined`")};Hl.prototype._nextTick=Nj;D8=Hl;var Koa=D8;var Bt="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,E8={},T2=C8;vl(qD,T2);qD.prototype.setDb=
function(b){var e=(this||Bt)._iterator=b.iterator((this||Bt)._options);(this||Bt)._operations.forEach(function(m){e[m.method].apply(e,m.args)})};qD.prototype._operation=function(b,e){if((this||Bt)._iterator)return(this||Bt)._iterator[b].apply((this||Bt)._iterator,e);(this||Bt)._operations.push({method:b,args:e})};["next","end"].forEach(function(b){qD.prototype["_"+b]=function(){this._operation(b,arguments)}});qD.prototype.seek=function(){this._operation("seek",arguments)};E8=qD;var go="undefined"!==
typeof globalThis?globalThis:"undefined"!==typeof self?self:global,mV={},U2=Koa,X2=E8,W2=["put","get","del","batch","clear"],Kfa=["approximateSize","compactRange"];vl(EA,U2);EA.prototype.type="deferred-leveldown";EA.prototype._open=function(b,e){var m=this||go;(this||go)._db.open(b,function(a){if(a)return e(a);m._operations.forEach(function(g){g.iterator?g.iterator.setDb(m._db):m._db[g.method].apply(m._db,g.args)});m._operations=[];Lfa(m);e()})};EA.prototype._close=function(b){var e=this||go;(this||
go)._db.close(function(m){if(m)return b(m);V2(e);b()})};EA.prototype._serializeKey=function(b){return b};EA.prototype._serializeValue=function(b){return b};mV=EA;mV.DeferredIterator=X2;var Loa=mV,$2={},Z2=!1,SR={},a3=!1,UR="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,Moa={},Xfa=Moa=function(b,e){if(TR("noDeprecation"))return b;var m=!1;return function(){if(!m){if(TR("throwDeprecation"))throw Error(e);TR("traceDeprecation")?console.trace(e):console.warn(e);m=!0}return b.apply(this||
UR,arguments)}},pN={},qN=Mi,hv=qN.Buffer;hv.from&&hv.alloc&&hv.allocUnsafe&&hv.allocUnsafeSlow?pN=qN:(b3(qN,pN),pN.Buffer=FA);FA.prototype=Object.create(hv.prototype);b3(hv,FA);FA.from=function(b,e,m){if("number"===typeof b)throw new TypeError("Argument must not be a number");return hv(b,e,m)};FA.alloc=function(b,e,m){if("number"!==typeof b)throw new TypeError("Argument must be a number");b=hv(b);void 0!==e?"string"===typeof m?b.fill(e,m):b.fill(e):b.fill(0);return b};FA.allocUnsafe=function(b){if("number"!==
typeof b)throw new TypeError("Argument must be a number");return hv(b)};FA.allocUnsafeSlow=function(b){if("number"!==typeof b)throw new TypeError("Argument must be a number");return qN.SlowBuffer(b)};var aS={},VR=pN.Buffer,c3=VR.isEncoding||function(b){b=""+b;switch(b&&b.toLowerCase()){case "hex":case "utf8":case "utf-8":case "ascii":case "binary":case "base64":case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":case "raw":return!0;default:return!1}};aS.StringDecoder=iG;iG.prototype.write=function(b){if(0===
b.length)return"";if(this.lastNeed){var e=this.fillLast(b);if(void 0===e)return"";var m=this.lastNeed;this.lastNeed=0}else m=0;return m<b.length?e?e+this.text(b,m):this.text(b,m):e||""};iG.prototype.end=function(b){b=b&&b.length?this.write(b):"";return this.lastNeed?b+"\ufffd":b};iG.prototype.text=function(b,e){var m=Ufa(this,b,e);if(!this.lastNeed)return b.toString("utf8",e);this.lastTotal=m;m=b.length-(m-this.lastNeed);b.copy(this.lastChar,0,m);return b.toString("utf8",e,m)};iG.prototype.fillLast=
function(b){if(this.lastNeed<=b.length)return b.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);b.copy(this.lastChar,this.lastTotal-this.lastNeed,0,b.length);this.lastNeed-=b.length};var e3={},d3=!1,g3={},f3=!1,j3=Object.freeze({}),i3={},h3=!1,m3={},l3=!1,p3={},o3=!1,ZR={},r3=!1,Yfa="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,$R={},s3=!1,v3={},u3=!1,bS={},w3=!1,$fa="undefined"!==typeof globalThis?
globalThis:"undefined"!==typeof self?self:global,cS={},y3=!1,nV={},F8=!1,G8={},H8=!1,ur={},I8=!1;I8||(I8=!0,ur=ur=t3(),ur.Stream=ur,ur.Readable=ur,ur.Writable=q3(),ur.Duplex=sD(),ur.Transform=x3(),ur.PassThrough=function(){function b(m){if(!(this instanceof b))return new b(m);e.call(this,m)}if(F8)return nV;F8=!0;nV=b;var e=x3();vl(b,e);b.prototype._transform=function(m,a,g){g(null,m)};return nV}(),ur.finished=YR(),ur.pipeline=function(){function b(A){var E=!1;return function(){E||(E=!0,A.apply(void 0,
arguments))}}function e(A){if(A)throw A;}function m(A,E,F,H){H=b(H);var I=!1;A.on("close",function(){I=!0});void 0===l&&(l=YR());l(A,{readable:E,writable:F},function(N){if(N)return H(N);I=!0;H()});var M=!1;return function(N){if(!I&&!M){M=!0;if(A.setHeader&&"function"===typeof A.abort)return A.abort();if("function"===typeof A.destroy)return A.destroy();H(N||new y("pipe"))}}}function a(A){A()}function g(A,E){return A.pipe(E)}if(H8)return G8;H8=!0;var l,r=rD().codes,v=r.ERR_MISSING_ARGS,y=r.ERR_STREAM_DESTROYED;
return G8=function(){for(var A=arguments.length,E=Array(A),F=0;F<A;F++)E[F]=arguments[F];var H=E.length?"function"!==typeof E[E.length-1]?e:E.pop():e;Array.isArray(E[0])&&(E=E[0]);if(2>E.length)throw new v("streams");var I,M=E.map(function(N,W){var X=W<E.length-1;return m(N,X,0<W,function(ea){I||(I=ea);ea&&M.forEach(a);X||(M.forEach(a),H(I))})});return E.reduce(g)}}());var J8=ur;var Ct="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,K8={},Noa=vl,z3=J8.Readable,aga=
Qy;K8=tD;Noa(tD,z3);tD.prototype._read=function(){var b=this||Ct,e=(this||Ct)._options;(this||Ct).destroyed||(this||Ct)._iterator.next(function(m,a,g){if(!b.destroyed){if(m)return b.destroy(m);void 0===a&&void 0===g?b.push(null):!1!==e.keys&&!1===e.values?b.push(a):!1===e.keys&&!1!==e.values?b.push(g):b.push({key:a,value:g})}})};tD.prototype._destroy=function(b,e){(this||Ct)._iterator.end(function(m){e(b||m)})};var Ooa=K8,rN={};(function(b,e,m){rN?rN=m():e[b]=m()})("prr",rN,function(){var b="function"==
typeof Object.defineProperty?function(m,a,g){Object.defineProperty(m,a,g);return m}:function(m,a,g){m[a]=g.value;return m},e=function(m,a){var g="object"==typeof a,l=!g&&"string"==typeof a,r=function(v){return g?!!a[v]:l?-1<a.indexOf(v[0]):!1};return{enumerable:r("enumerable"),configurable:r("configurable"),writable:r("writable"),value:m}};return function(m,a,g,l){var r;l=e(g,l);if("object"==typeof a){for(r in a)Object.hasOwnProperty.call(a,r)&&(l.value=a[r],b(m,r,l));return m}return b(m,a,l)}});
var Ym="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,Poa={},bga=rN;dS.prototype=Error();var Qoa=Poa=function(b){var e=function(m,a){return cga(b,m,a)};return{CustomError:dS,FilesystemError:e("FilesystemError"),createError:e}},Dv={},Roa=Dv.all=[{errno:-2,code:"ENOENT",description:"no such file or directory"},{errno:-1,code:"UNKNOWN",description:"unknown error"},{errno:0,code:"OK",description:"success"},{errno:1,code:"EOF",description:"end of file"},{errno:2,code:"EADDRINFO",
description:"getaddrinfo error"},{errno:3,code:"EACCES",description:"permission denied"},{errno:4,code:"EAGAIN",description:"resource temporarily unavailable"},{errno:5,code:"EADDRINUSE",description:"address already in use"},{errno:6,code:"EADDRNOTAVAIL",description:"address not available"},{errno:7,code:"EAFNOSUPPORT",description:"address family not supported"},{errno:8,code:"EALREADY",description:"connection already in progress"},{errno:9,code:"EBADF",description:"bad file descriptor"},{errno:10,
code:"EBUSY",description:"resource busy or locked"},{errno:11,code:"ECONNABORTED",description:"software caused connection abort"},{errno:12,code:"ECONNREFUSED",description:"connection refused"},{errno:13,code:"ECONNRESET",description:"connection reset by peer"},{errno:14,code:"EDESTADDRREQ",description:"destination address required"},{errno:15,code:"EFAULT",description:"bad address in system call argument"},{errno:16,code:"EHOSTUNREACH",description:"host is unreachable"},{errno:17,code:"EINTR",description:"interrupted system call"},
{errno:18,code:"EINVAL",description:"invalid argument"},{errno:19,code:"EISCONN",description:"socket is already connected"},{errno:20,code:"EMFILE",description:"too many open files"},{errno:21,code:"EMSGSIZE",description:"message too long"},{errno:22,code:"ENETDOWN",description:"network is down"},{errno:23,code:"ENETUNREACH",description:"network is unreachable"},{errno:24,code:"ENFILE",description:"file table overflow"},{errno:25,code:"ENOBUFS",description:"no buffer space available"},{errno:26,code:"ENOMEM",
description:"not enough memory"},{errno:27,code:"ENOTDIR",description:"not a directory"},{errno:28,code:"EISDIR",description:"illegal operation on a directory"},{errno:29,code:"ENONET",description:"machine is not on the network"},{errno:31,code:"ENOTCONN",description:"socket is not connected"},{errno:32,code:"ENOTSOCK",description:"socket operation on non-socket"},{errno:33,code:"ENOTSUP",description:"operation not supported on socket"},{errno:34,code:"ENOENT",description:"no such file or directory"},
{errno:35,code:"ENOSYS",description:"function not implemented"},{errno:36,code:"EPIPE",description:"broken pipe"},{errno:37,code:"EPROTO",description:"protocol error"},{errno:38,code:"EPROTONOSUPPORT",description:"protocol not supported"},{errno:39,code:"EPROTOTYPE",description:"protocol wrong type for socket"},{errno:40,code:"ETIMEDOUT",description:"connection timed out"},{errno:41,code:"ECHARSET",description:"invalid Unicode character"},{errno:42,code:"EAIFAMNOSUPPORT",description:"address family for hostname not supported"},
{errno:44,code:"EAISERVICE",description:"servname not supported for ai_socktype"},{errno:45,code:"EAISOCKTYPE",description:"ai_socktype not supported"},{errno:46,code:"ESHUTDOWN",description:"cannot send after transport endpoint shutdown"},{errno:47,code:"EEXIST",description:"file already exists"},{errno:48,code:"ESRCH",description:"no such process"},{errno:49,code:"ENAMETOOLONG",description:"name too long"},{errno:50,code:"EPERM",description:"operation not permitted"},{errno:51,code:"ELOOP",description:"too many symbolic links encountered"},
{errno:52,code:"EXDEV",description:"cross-device link not permitted"},{errno:53,code:"ENOTEMPTY",description:"directory not empty"},{errno:54,code:"ENOSPC",description:"no space left on device"},{errno:55,code:"EIO",description:"i/o error"},{errno:56,code:"EROFS",description:"read-only file system"},{errno:57,code:"ENODEV",description:"no such device"},{errno:58,code:"ESPIPE",description:"invalid seek"},{errno:59,code:"ECANCELED",description:"operation canceled"}];Dv.errno={};Dv.code={};Roa.forEach(function(b){Dv.errno[b.errno]=
b;Dv.code[b.code]=b});Dv.custom=Qoa(Dv);Dv.create=Dv.custom.createError;var Soa={},qB=Dv.create,rB=qB("LevelUPError"),oV=qB("NotFoundError",rB);oV.prototype.notFound=!0;oV.prototype.status=404;var sB=Soa={LevelUPError:rB,InitializationError:qB("InitializationError",rB),OpenError:qB("OpenError",rB),ReadError:qB("ReadError",rB),WriteError:qB("WriteError",rB),NotFoundError:oV,EncodingError:qB("EncodingError",rB)},Toa={},Ry=Toa=function(){var b,e=new Promise(function(m,a){b=function(g,l){g?a(g):m(l)}});
b.promise=e;return b};var fE=function(b,e){return"function"===typeof b?b:e};var L8=function(b){return"object"===typeof b&&null!==b?b:{}};var Zm="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,Uoa={},yH=sB.WriteError;jG.prototype.put=function(b,e){try{(this||Zm).batch.put(b,e)}catch(m){throw new yH(m);}(this||Zm).ops.push({type:"put",key:b,value:e});(this||Zm).length++;return this||Zm};jG.prototype.del=function(b){try{(this||Zm).batch.del(b)}catch(e){throw new yH(e);
}(this||Zm).ops.push({type:"del",key:b});(this||Zm).length++;return this||Zm};jG.prototype.clear=function(){try{(this||Zm).batch.clear()}catch(b){throw new yH(b);}(this||Zm).ops=[];(this||Zm).length=0;return this||Zm};jG.prototype.write=function(b,e){var m=(this||Zm)._levelup,a=(this||Zm).ops;e=fE(b,e);if(!e){e=Ry();var g=e.promise}b=L8(b);try{(this||Zm).batch.write(b,function(l){if(l)return e(new yH(l));m.emit("batch",a);e()})}catch(l){throw new yH(l);}return g};var Voa=Uoa=jG,oga={assign:B3,polyfill:function(){Object.assign||
Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:B3})}},M8=Object.prototype.toString,N8=function(b){var e=M8.call(b),m="[object Arguments]"===e;return m||(m="[object Array]"!==e&&null!==b&&"object"==typeof b&&"number"==typeof b.length&&0<=b.length&&"[object Function]"===M8.call(b.callee)),m};if(!Object.keys){var sN=Object.prototype.hasOwnProperty,O8=Object.prototype.toString,P8=Object.prototype.propertyIsEnumerable,Woa=!P8.call({toString:null},"toString"),Xoa=
P8.call(function(){},"prototype"),tN="toString toLocaleString valueOf hasOwnProperty isPrototypeOf propertyIsEnumerable constructor".split(" "),pV=function(b){var e=b.constructor;return e&&e.prototype===b},Yoa={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,
$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},Zoa=function(){if("undefined"==typeof window)return!1;for(var b in window)try{if(!Yoa["$"+b]&&sN.call(window,b)&&null!==window[b]&&"object"==typeof window[b])try{pV(window[b])}catch(e){return!0}}catch(e){return!0}return!1}();var $oa=function(b){var e=null!==b&&"object"==typeof b,m="[object Function]"===O8.call(b),a=N8(b),g=e&&"[object String]"===O8.call(b),l=[];if(!e&&!m&&!a)throw new TypeError("Object.keys called on a non-object");e=
Xoa&&m;if(g&&0<b.length&&!sN.call(b,0))for(g=0;g<b.length;++g)l.push(String(g));if(a&&0<b.length)for(a=0;a<b.length;++a)l.push(String(a));else for(var r in b)e&&"prototype"===r||!sN.call(b,r)||l.push(String(r));if(Woa){if("undefined"!=typeof window&&Zoa)try{var v=pV(b)}catch(y){v=!1}else v=pV(b);for(a=0;a<tN.length;++a)v&&"constructor"===tN[a]||!sN.call(b,tN[a])||l.push(tN[a])}return l}}var apa=$oa,bpa=Array.prototype.slice,Q8=Object.keys,uN=Q8?function(b){return Q8(b)}:apa,R8=Object.keys;uN.shim=
function(){Object.keys?function(){var b=Object.keys(arguments);return b&&b.length===arguments.length}(1,2)||(Object.keys=function(b){return N8(b)?R8(bpa.call(b)):R8(b)}):Object.keys=uN;return Object.keys||uN};var cpa="function"==typeof Symbol&&"symbol"==typeof Symbol("foo"),dpa=Object.prototype.toString,epa=Array.prototype.concat,qV=Object.defineProperty,S8=qV&&function(){var b={};try{for(var e in qV(b,"x",{enumerable:!1,value:b}),b)return!1;return b.x===b}catch(m){return!1}}(),zH=function(b,e){var m=
2<arguments.length?arguments[2]:{},a=uN(e);cpa&&(a=epa.call(a,Object.getOwnPropertySymbols(e)));for(var g=0;g<a.length;g+=1){var l=void 0,r=b,v=a[g],y=e[a[g]],A=m[a[g]];(!(v in r)||"function"==typeof(l=A)&&"[object Function]"===dpa.call(l)&&A())&&(S8?qV(r,v,{configurable:!0,enumerable:!1,value:y,writable:!0}):r[v]=y)}};zH.supportsDescriptors=!!S8;var T8=("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global).Symbol,fpa=function(){if("function"!=typeof Symbol||"function"!=
typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var b={},e=Symbol("test"),m=Object(e);if("string"==typeof e||"[object Symbol]"!==Object.prototype.toString.call(e)||"[object Symbol]"!==Object.prototype.toString.call(m))return!1;for(e in b[e]=42,b)return!1;if("function"==typeof Object.keys&&0!==Object.keys(b).length||"function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(b).length)return!1;m=Object.getOwnPropertySymbols(b);return 1!==
m.length||m[0]!==e||!Object.prototype.propertyIsEnumerable.call(b,e)||"function"==typeof Object.getOwnPropertyDescriptor&&(b=Object.getOwnPropertyDescriptor(b,e),42!==b.value||!0!==b.enumerable)?!1:!0},rV=Array.prototype.slice,gpa=Object.prototype.toString,hpa=function(b){var e=this;if("function"!=typeof e||"[object Function]"!==gpa.call(e))throw new TypeError("Function.prototype.bind called on incompatible "+e);for(var m,a=rV.call(arguments,1),g=Math.max(0,e.length-a.length),l=[],r=0;r<g;r++)l.push("$"+
r);if(m=Function("binder","return function ("+l.join(",")+"){ return binder.apply(this,arguments); }")(function(){if(this instanceof m){var v=e.apply(this,a.concat(rV.call(arguments)));return Object(v)===v?v:this}return e.apply(b,a.concat(rV.call(arguments)))}),e.prototype)g=function(){},g.prototype=e.prototype,m.prototype=new g,g.prototype=null;return m},sV=Function.prototype.bind||hpa,AH=TypeError,tB=Object.getOwnPropertyDescriptor;if(tB)try{tB({},"")}catch(b){tB=null}var tV=function(){throw new AH;
},ipa=tB?function(){try{return arguments.callee,tV}catch(b){try{return tB(arguments,"callee").get}catch(e){return tV}}}():tV,uB="function"==typeof T8&&"function"==typeof Symbol&&"symbol"==typeof T8("foo")&&"symbol"==typeof Symbol("bar")&&fpa(),vB=Object.getPrototypeOf||function(b){return b.__proto__},uV="undefined"==typeof Uint8Array?void 0:vB(Uint8Array),vV={"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?void 0:ArrayBuffer,"%ArrayBufferPrototype%":"undefined"==typeof ArrayBuffer?
void 0:ArrayBuffer.prototype,"%ArrayIteratorPrototype%":uB?vB([][Symbol.iterator]()):void 0,"%ArrayPrototype%":Array.prototype,"%ArrayProto_entries%":Array.prototype.entries,"%ArrayProto_forEach%":Array.prototype.forEach,"%ArrayProto_keys%":Array.prototype.keys,"%ArrayProto_values%":Array.prototype.values,"%AsyncFromSyncIteratorPrototype%":void 0,"%AsyncFunction%":void 0,"%AsyncFunctionPrototype%":void 0,"%AsyncGenerator%":void 0,"%AsyncGeneratorFunction%":void 0,"%AsyncGeneratorPrototype%":void 0,
"%AsyncIteratorPrototype%":void 0,"%Atomics%":"undefined"==typeof Atomics?void 0:Atomics,"%Boolean%":Boolean,"%BooleanPrototype%":Boolean.prototype,"%DataView%":"undefined"==typeof DataView?void 0:DataView,"%DataViewPrototype%":"undefined"==typeof DataView?void 0:DataView.prototype,"%Date%":Date,"%DatePrototype%":Date.prototype,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%ErrorPrototype%":Error.prototype,
"%eval%":eval,"%EvalError%":EvalError,"%EvalErrorPrototype%":EvalError.prototype,"%Float32Array%":"undefined"==typeof Float32Array?void 0:Float32Array,"%Float32ArrayPrototype%":"undefined"==typeof Float32Array?void 0:Float32Array.prototype,"%Float64Array%":"undefined"==typeof Float64Array?void 0:Float64Array,"%Float64ArrayPrototype%":"undefined"==typeof Float64Array?void 0:Float64Array.prototype,"%Function%":Function,"%FunctionPrototype%":Function.prototype,"%Generator%":void 0,"%GeneratorFunction%":void 0,
"%GeneratorPrototype%":void 0,"%Int8Array%":"undefined"==typeof Int8Array?void 0:Int8Array,"%Int8ArrayPrototype%":"undefined"==typeof Int8Array?void 0:Int8Array.prototype,"%Int16Array%":"undefined"==typeof Int16Array?void 0:Int16Array,"%Int16ArrayPrototype%":"undefined"==typeof Int16Array?void 0:Int8Array.prototype,"%Int32Array%":"undefined"==typeof Int32Array?void 0:Int32Array,"%Int32ArrayPrototype%":"undefined"==typeof Int32Array?void 0:Int32Array.prototype,"%isFinite%":isFinite,"%isNaN%":isNaN,
"%IteratorPrototype%":uB?vB(vB([][Symbol.iterator]())):void 0,"%JSON%":"object"==typeof JSON?JSON:void 0,"%JSONParse%":"object"==typeof JSON?JSON.parse:void 0,"%Map%":"undefined"==typeof Map?void 0:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&uB?vB((new Map)[Symbol.iterator]()):void 0,"%MapPrototype%":"undefined"==typeof Map?void 0:Map.prototype,"%Math%":Math,"%Number%":Number,"%NumberPrototype%":Number.prototype,"%Object%":Object,"%ObjectPrototype%":Object.prototype,"%ObjProto_toString%":Object.prototype.toString,
"%ObjProto_valueOf%":Object.prototype.valueOf,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?void 0:Promise,"%PromisePrototype%":"undefined"==typeof Promise?void 0:Promise.prototype,"%PromiseProto_then%":"undefined"==typeof Promise?void 0:Promise.prototype.then,"%Promise_all%":"undefined"==typeof Promise?void 0:Promise.all,"%Promise_reject%":"undefined"==typeof Promise?void 0:Promise.reject,"%Promise_resolve%":"undefined"==typeof Promise?void 0:Promise.resolve,
"%Proxy%":"undefined"==typeof Proxy?void 0:Proxy,"%RangeError%":RangeError,"%RangeErrorPrototype%":RangeError.prototype,"%ReferenceError%":ReferenceError,"%ReferenceErrorPrototype%":ReferenceError.prototype,"%Reflect%":"undefined"==typeof Reflect?void 0:Reflect,"%RegExp%":RegExp,"%RegExpPrototype%":RegExp.prototype,"%Set%":"undefined"==typeof Set?void 0:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&uB?vB((new Set)[Symbol.iterator]()):void 0,"%SetPrototype%":"undefined"==typeof Set?void 0:
Set.prototype,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?void 0:SharedArrayBuffer,"%SharedArrayBufferPrototype%":"undefined"==typeof SharedArrayBuffer?void 0:SharedArrayBuffer.prototype,"%String%":String,"%StringIteratorPrototype%":uB?vB(""[Symbol.iterator]()):void 0,"%StringPrototype%":String.prototype,"%Symbol%":uB?Symbol:void 0,"%SymbolPrototype%":uB?Symbol.prototype:void 0,"%SyntaxError%":SyntaxError,"%SyntaxErrorPrototype%":SyntaxError.prototype,"%ThrowTypeError%":ipa,"%TypedArray%":uV,
"%TypedArrayPrototype%":uV?uV.prototype:void 0,"%TypeError%":AH,"%TypeErrorPrototype%":AH.prototype,"%Uint8Array%":"undefined"==typeof Uint8Array?void 0:Uint8Array,"%Uint8ArrayPrototype%":"undefined"==typeof Uint8Array?void 0:Uint8Array.prototype,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?void 0:Uint8ClampedArray,"%Uint8ClampedArrayPrototype%":"undefined"==typeof Uint8ClampedArray?void 0:Uint8ClampedArray.prototype,"%Uint16Array%":"undefined"==typeof Uint16Array?void 0:Uint16Array,
"%Uint16ArrayPrototype%":"undefined"==typeof Uint16Array?void 0:Uint16Array.prototype,"%Uint32Array%":"undefined"==typeof Uint32Array?void 0:Uint32Array,"%Uint32ArrayPrototype%":"undefined"==typeof Uint32Array?void 0:Uint32Array.prototype,"%URIError%":URIError,"%URIErrorPrototype%":URIError.prototype,"%WeakMap%":"undefined"==typeof WeakMap?void 0:WeakMap,"%WeakMapPrototype%":"undefined"==typeof WeakMap?void 0:WeakMap.prototype,"%WeakSet%":"undefined"==typeof WeakSet?void 0:WeakSet,"%WeakSetPrototype%":"undefined"==
typeof WeakSet?void 0:WeakSet.prototype},U8=sV.call(Function.call,String.prototype.replace),jpa=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,kpa=/\\(\\)?/g,lpa=function(b){var e=[];return U8(b,jpa,function(m,a,g,l){e[e.length]=g?U8(l,kpa,"$1"):a||m}),e},V8,W8=function(b,e){if("string"!=typeof b||0===b.length)throw new TypeError("intrinsic name must be a non-empty string");if(1<arguments.length&&"boolean"!=typeof e)throw new TypeError('"allowMissing" argument must be a boolean');
var m=lpa(b);var a="%"+(0<m.length?m[0]:"")+"%";if(!(a in vV))throw new SyntaxError("intrinsic "+a+" does not exist!");if(void 0===vV[a]&&!e)throw new AH("intrinsic "+a+" exists, but is not available. Please file an issue!");a=vV[a];for(var g=1;g<m.length;g+=1)if(null!=a)if(tB&&g+1>=m.length){var l=tB(a,m[g]);if(!(e||m[g]in a))throw new AH("base intrinsic for "+b+" exists, but the property is not available.");a=l?l.get||l.value:a[m[g]]}else a=a[m[g]];return a}("%Function%"),mpa=W8.apply,npa=W8.call;
(V8=function(){return sV.apply(npa,arguments)}).apply=function(){return sV.apply(mpa,arguments)};var wV,vN,opa=(wV=function(b,e){return 0===b&&0===e?1/b==1/e:b===e||!(b==b||e==e)},wV),ppa=(vN=function(){return"function"==typeof Object.is?Object.is:opa},vN),X8=V8(vN(),Object);zH(X8,{getPolyfill:vN,implementation:wV,shim:function(){var b=ppa();return zH(Object,{is:b},{is:function(){return Object.is!==b}}),b}});var X3=X8;var Y8=function(b){return b!=b};var wN,qpa=Y8,rpa=(wN=function(){return Number.isNaN&&
Number.isNaN(NaN)&&!Number.isNaN("a")?Number.isNaN:qpa},zH),spa=Y8,Z8=wN();zH(Z8,{getPolyfill:wN,implementation:spa,shim:function(){var b=wN();return rpa(Number,{isNaN:b},{isNaN:function(){return Number.isNaN!==b}}),b}});var eS={},D3=!1,F3={},E3=!1,fga=void 0!==/a/g.flags,YK=function(b){var e=[];return b.forEach(function(m){return e.push(m)}),e},U3=function(b){var e=[];return b.forEach(function(m,a){return e.push([a,m])}),e},I3=Object.is?Object.is:X3,UK=Object.getOwnPropertySymbols?Object.getOwnPropertySymbols:
function(){return[]},hS=Number.isNaN?Number.isNaN:Z8,lG=gS(Object.prototype.hasOwnProperty),XK=gS(Object.prototype.propertyIsEnumerable),J3=gS(Object.prototype.toString),Pp=Vh.types,kga=Pp.isAnyArrayBuffer,hga=Pp.isArrayBufferView,K3=Pp.isDate,VK=Pp.isMap,L3=Pp.isRegExp,WK=Pp.isSet,gga=Pp.isNativeError,lga=Pp.isBoxedPrimitive,M3=Pp.isNumberObject,N3=Pp.isStringObject,O3=Pp.isBooleanObject,P3=Pp.isBigIntObject,mga=Pp.isSymbolObject,iga=Pp.isFloat32Array,jga=Pp.isFloat64Array,V3={isDeepEqual:function(b,
e){return os(b,e,!1)},isDeepStrictEqual:function(b,e){return os(b,e,!0)}},iS={},W3=!1,tpa=fS(),Ai="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,upa={},$K=tj,ZK=$u.EventEmitter,vpa=Vh.inherits,Y3=Loa,rga=z8,qga=tpa,uD=L8,xN=sB.WriteError,Z3=sB.ReadError,wpa=sB.NotFoundError,xpa=sB.OpenError,pga=sB.InitializationError;Zk.prototype.emit=ZK.prototype.emit;Zk.prototype.once=ZK.prototype.once;vpa(Zk,ZK);Zk.prototype.open=function(b,e){var m=this||Ai;"function"===typeof b&&
(e=b,b=null);if(!e){e=Ry();var a=e.promise}b||(b=(this||Ai).options);if(this.isOpen())return $K.nextTick(e,null,m),a;if(this._isOpening())return this.once("open",function(){e(null,m)}),a;this.emit("opening");(this||Ai).db.open(b,function(g){if(g)return e(new xpa(g));m.db=m._db;e(null,m);m.emit("open");m.emit("ready")});return a};Zk.prototype.close=function(b){var e=this||Ai;if(!b){b=Ry();var m=b.promise}if(this.isOpen())(this||Ai).db.close(function(){e.emit("closed");b.apply(null,arguments)}),this.emit("closing"),
(this||Ai).db=new Y3((this||Ai)._db);else if(this.isClosed())$K.nextTick(b);else if("closing"===(this||Ai).db.status)this.once("closed",b);else if(this._isOpening())this.once("open",function(){e.close(b)});return m};Zk.prototype.isOpen=function(){return"open"===(this||Ai).db.status};Zk.prototype._isOpening=function(){return"opening"===(this||Ai).db.status};Zk.prototype.isClosed=function(){return/^clos|new/.test((this||Ai).db.status)};Zk.prototype.get=function(b,e,m){m=fE(e,m);if(!m){m=Ry();var a=
m.promise}if(mG(this||Ai,m))return a;e=uD(e);(this||Ai).db.get(b,e,function(g,l){if(g)return g=/notfound/i.test(g)||g.notFound?new wpa("Key not found in database ["+b+"]",g):new Z3(g),m(g);m(null,l)});return a};Zk.prototype.put=function(b,e,m,a){var g=this||Ai;a=fE(m,a);if(!a){a=Ry();var l=a.promise}if(mG(this||Ai,a))return l;m=uD(m);(this||Ai).db.put(b,e,m,function(r){if(r)return a(new xN(r));g.emit("put",b,e);a()});return l};Zk.prototype.del=function(b,e,m){var a=this||Ai;m=fE(e,m);if(!m){m=Ry();
var g=m.promise}if(mG(this||Ai,m))return g;e=uD(e);(this||Ai).db.del(b,e,function(l){if(l)return m(new xN(l));a.emit("del",b);m()});return g};Zk.prototype.batch=function(b,e,m){if(!arguments.length)return new Voa(this||Ai);var a=this||Ai;m="function"===typeof b?b:fE(e,m);if(!m){m=Ry();var g=m.promise}if(mG(this||Ai,m))return g;e=uD(e);(this||Ai).db.batch(b,e,function(l){if(l)return m(new xN(l));a.emit("batch",b);m()});return g};Zk.prototype.iterator=function(b){return(this||Ai).db.iterator(b)};Zk.prototype.clear=
function(b,e){var m=this||Ai;e=fE(b,e);b=uD(b);if(!e){e=Ry();var a=e.promise}if(mG(this||Ai,e))return a;(this||Ai).db.clear(b,function(g){if(g)return e(new xN(g));m.emit("clear",b);e()});return a};Zk.prototype.readStream=Zk.prototype.createReadStream=function(b){b=Qy({keys:!0,values:!0},b);"number"!==typeof b.limit&&(b.limit=-1);return new Ooa((this||Ai).db.iterator(b),b)};Zk.prototype.keyStream=Zk.prototype.createKeyStream=function(b){return this.createReadStream(Qy(b,{keys:!0,values:!1}))};Zk.prototype.valueStream=
Zk.prototype.createValueStream=function(b){return this.createReadStream(Qy(b,{keys:!1,values:!0}))};Zk.prototype.toString=function(){return"LevelUP"};Zk.prototype.type="levelup";Zk.errors=sB;var ypa=upa=Zk.default=Zk,sm={},zpa=Mi.Buffer;sm.compare=function(b,e){if(zpa.isBuffer(b)){for(var m=Math.min(b.length,e.length),a=0;a<m;a++){var g=b[a]-e[a];if(g)return g}return b.length-e.length}return b<e?-1:b>e?1:0};var Apa=sm.lowerBoundKey=function(b){return iv(b,"gt")||iv(b,"gte")||iv(b,"min")||(b.reverse?
iv(b,"end"):iv(b,"start"))||void 0},xV=sm.lowerBound=function(b,e){var m=Apa(b);return m?b[m]:e},yV=sm.lowerBoundInclusive=function(b){return Object.hasOwnProperty.call(b,"gt")?!1:!0},zV=sm.upperBoundInclusive=function(b){return Object.hasOwnProperty.call(b,"lt")?!1:!0},Bpa=sm.lowerBoundExclusive=function(b){return!yV(b)},Cpa=sm.upperBoundExclusive=function(b){return!zV(b)},Dpa=sm.upperBoundKey=function(b){return iv(b,"lt")||iv(b,"lte")||iv(b,"max")||(b.reverse?iv(b,"start"):iv(b,"end"))||void 0},
AV=sm.upperBound=function(b,e){var m=Dpa(b);return m?b[m]:e};sm.start=function(b,e){return b.reverse?AV(b,e):xV(b,e)};sm.end=function(b,e){return b.reverse?xV(b,e):AV(b,e)};sm.startInclusive=function(b){return b.reverse?zV(b):yV(b)};sm.endInclusive=function(b){return b.reverse?yV(b):zV(b)};sm.toLtgt=function(b,e,m,a,g){e=e||{};m=m||sga;var l=3<arguments.length,r=sm.lowerBoundKey(b),v=sm.upperBoundKey(b);r?"gt"===r?e.gt=m(b.gt,!1):e.gte=m(b[r],!1):l&&(e.gte=m(a,!1));v?"lt"===v?e.lt=m(b.lt,!0):e.lte=
m(b[v],!0):l&&(e.lte=m(g,!0));null!=b.reverse&&(e.reverse=!!b.reverse);Object.hasOwnProperty.call(e,"max")&&delete e.max;Object.hasOwnProperty.call(e,"min")&&delete e.min;Object.hasOwnProperty.call(e,"start")&&delete e.start;Object.hasOwnProperty.call(e,"end")&&delete e.end;return e};sm.contains=function(b,e,m){m=m||sm.compare;var a=xV(b);if(void 0!==a&&""!==a&&(a=m(e,a),0>a||0===a&&Bpa(b)))return!1;a=AV(b);return void 0!==a&&""!==a&&(a=m(e,a),0<a||0===a&&Cpa(b))?!1:!0};sm.filter=function(b,e){return function(m){return sm.contains(b,
m,e)}};var Ww={},kS=B8;Ww.utf8=Ww["utf-8"]={encode:function(b){return jS(b)?b:String(b)},decode:aL,buffer:!1,type:"utf8"};Ww.json={encode:JSON.stringify,decode:JSON.parse,buffer:!1,type:"json"};Ww.binary={encode:function(b){return jS(b)?b:kS.from(b)},decode:aL,buffer:!0,type:"binary"};Ww.none={encode:aL,decode:aL,buffer:!1,type:"id"};Ww.id=Ww.none;"hex ascii base64 ucs2 ucs-2 utf16le utf-16le".split(" ").forEach(function(b){Ww[b]={encode:function(e){return jS(e)?e:kS.from(e,b)},decode:function(e){return e.toString(b)},
buffer:!0,type:b}});var Jw="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,$8={},lS=Ww;$8=Jp;Jp.prototype._encoding=function(b){"string"===typeof b&&(b=lS[b]);b||(b=lS.id);return b};Jp.prototype._keyEncoding=function(b,e){return this._encoding(e&&e.keyEncoding||b&&b.keyEncoding||(this||Jw).opts.keyEncoding)};Jp.prototype._valueEncoding=function(b,e){return this._encoding(e&&(e.valueEncoding||e.encoding)||b&&(b.valueEncoding||b.encoding)||(this||Jw).opts.valueEncoding||
(this||Jw).opts.encoding)};Jp.prototype.encodeKey=function(b,e,m){return this._keyEncoding(e,m).encode(b)};Jp.prototype.encodeValue=function(b,e,m){return this._valueEncoding(e,m).encode(b)};Jp.prototype.decodeKey=function(b,e){return this._keyEncoding(e).decode(b)};Jp.prototype.decodeValue=function(b,e){return this._valueEncoding(e).decode(b)};Jp.prototype.encodeBatch=function(b,e){var m=this||Jw;return b.map(function(a){var g={type:a.type,key:m.encodeKey(a.key,e,a)};m.keyAsBuffer(e,a)&&(g.keyEncoding=
"binary");a.prefix&&(g.prefix=a.prefix);"value"in a&&(g.value=m.encodeValue(a.value,e,a),m.valueAsBuffer(e,a)&&(g.valueEncoding="binary"));return g})};var Epa="lt gt lte gte start end".split(" ");Jp.prototype.encodeLtgt=function(b){var e=this||Jw,m={};Object.keys(b).forEach(function(a){m[a]=-1<Epa.indexOf(a)?e.encodeKey(b[a],b):b[a]});return m};Jp.prototype.createStreamDecoder=function(b){var e=this||Jw;return b.keys&&b.values?function(m,a){return{key:e.decodeKey(m,b),value:e.decodeValue(a,b)}}:b.keys?
function(m){return e.decodeKey(m,b)}:b.values?function(m,a){return e.decodeValue(a,b)}:function(){}};Jp.prototype.keyAsBuffer=function(b){return this._keyEncoding(b).buffer};Jp.prototype.valueAsBuffer=function(b){return this._valueEncoding(b).buffer};var Fpa=$8,Gpa={},wga=Gpa=Array.isArray||function(b){return"[object Array]"==Object.prototype.toString.call(b)},$m={},Hpa=Mi.Buffer;$m.isArray=function(b){return Array.isArray?Array.isArray(b):"[object Array]"===Object.prototype.toString.call(b)};$m.isBoolean=
function(b){return"boolean"===typeof b};$m.isNull=function(b){return null===b};$m.isNullOrUndefined=function(b){return null==b};$m.isNumber=function(b){return"number"===typeof b};$m.isString=function(b){return"string"===typeof b};$m.isSymbol=function(b){return"symbol"===typeof b};$m.isUndefined=function(b){return void 0===b};$m.isRegExp=function(b){return"[object RegExp]"===Object.prototype.toString.call(b)};$m.isObject=function(b){return"object"===typeof b&&null!==b};$m.isDate=function(b){return"[object Date]"===
Object.prototype.toString.call(b)};$m.isError=function(b){return"[object Error]"===Object.prototype.toString.call(b)||b instanceof Error};$m.isFunction=function(b){return"function"===typeof b};$m.isPrimitive=function(b){return null===b||"boolean"===typeof b||"number"===typeof b||"string"===typeof b||"symbol"===typeof b||"undefined"===typeof b};$m.isBuffer=Hpa.isBuffer;var Sg="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,oS={},a9=Mi.Buffer,Ipa=a9.isEncoding||function(b){switch(b&&
b.toLowerCase()){case "hex":case "utf8":case "utf-8":case "ascii":case "binary":case "base64":case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":case "raw":return!0;default:return!1}},BV=oS.StringDecoder=function(b){(this||Sg).encoding=(b||"utf8").toLowerCase().replace(/[-_]/,"");if(b&&!Ipa(b))throw Error("Unknown encoding: "+b);switch((this||Sg).encoding){case "utf8":(this||Sg).surrogateSize=3;break;case "ucs2":case "utf16le":(this||Sg).surrogateSize=2;(this||Sg).detectIncompleteChar=uga;break;
case "base64":(this||Sg).surrogateSize=3;(this||Sg).detectIncompleteChar=vga;break;default:(this||Sg).write=tga;return}(this||Sg).charBuffer=new a9(6);(this||Sg).charReceived=0;(this||Sg).charLength=0};BV.prototype.write=function(b){for(var e="";(this||Sg).charLength;){e=b.length>=(this||Sg).charLength-(this||Sg).charReceived?(this||Sg).charLength-(this||Sg).charReceived:b.length;b.copy((this||Sg).charBuffer,(this||Sg).charReceived,0,e);(this||Sg).charReceived+=e;if((this||Sg).charReceived<(this||
Sg).charLength)return"";b=b.slice(e,b.length);e=(this||Sg).charBuffer.slice(0,(this||Sg).charLength).toString((this||Sg).encoding);var m=e.charCodeAt(e.length-1);if(55296<=m&&56319>=m)(this||Sg).charLength+=(this||Sg).surrogateSize,e="";else{(this||Sg).charReceived=(this||Sg).charLength=0;if(0===b.length)return e;break}}this.detectIncompleteChar(b);var a=b.length;(this||Sg).charLength&&(b.copy((this||Sg).charBuffer,0,b.length-(this||Sg).charReceived,a),a-=(this||Sg).charReceived);e+=b.toString((this||
Sg).encoding,0,a);a=e.length-1;m=e.charCodeAt(a);return 55296<=m&&56319>=m?(m=(this||Sg).surrogateSize,(this||Sg).charLength+=m,(this||Sg).charReceived+=m,(this||Sg).charBuffer.copy((this||Sg).charBuffer,m,0,m),b.copy((this||Sg).charBuffer,0,0,m),e.substring(0,a)):e};BV.prototype.detectIncompleteChar=function(b){for(var e=3<=b.length?3:b.length;0<e;e--){var m=b[b.length-e];if(1==e&&6==m>>5){(this||Sg).charLength=2;break}if(2>=e&&14==m>>4){(this||Sg).charLength=3;break}if(3>=e&&30==m>>3){(this||Sg).charLength=
4;break}}(this||Sg).charReceived=e};BV.prototype.end=function(b){var e="";b&&b.length&&(e=this.write(b));(this||Sg).charReceived&&(b=(this||Sg).encoding,e+=(this||Sg).charBuffer.slice(0,(this||Sg).charReceived).toString(b));return e};var xga=Object.freeze({}),mS={},a4=!1,Bi="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,nS={},b4=!1,Et="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,pS={},d4=!1,dg="undefined"!==typeof globalThis?globalThis:
"undefined"!==typeof self?self:global,qS={},f4=!1,ho="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,rS={},h4=!1,g4="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,Gs={},b9=!1,Jpa=function(){if(b9)return Gs;b9=!0;var b=tj;Gs=Gs=c4();Gs.Stream=GA;Gs.Readable=Gs;Gs.Writable=$3();Gs.Duplex=vD();Gs.Transform=e4();Gs.PassThrough=yga();b.browser||"disable"!==b.env.READABLE_STREAM||(Gs=GA);return Gs}(),Kpa={},Bga=nG(sm),Lpa=nG($u),Mpa=nG(Fpa),
Npa=nG(Jpa),c9=nG(vl);c9(sS,Error);sS.prototype.name="NotFoundError";var Opa=Lpa.EventEmitter,Ppa=new sS,d9=function(b,e,m,a){function g(r){var v={},y;if(a)for(y in a)"undefined"!==typeof a[y]&&(v[y]=a[y]);if(r)for(y in r)"undefined"!==typeof r[y]&&(v[y]=r[y]);return v}var l=new Opa;l.sublevels={};l.options=a;l.version="6.5.4";l.methods={};e=e||[];l.put=function(r,v,y,A){"function"===typeof y&&(A=y,y={});b.apply([{key:r,value:v,prefix:e.slice(),type:"put"}],g(y),function(E){if(E)return A(E);l.emit("put",
r,v);A(null)})};l.prefix=function(){return e.slice()};l.batch=function(r,v,y){"function"===typeof v&&(y=v,v={});r=r.map(function(A){return{key:A.key,value:A.value,prefix:A.prefix||e,keyEncoding:A.keyEncoding,valueEncoding:A.valueEncoding,type:A.type}});b.apply(r,g(v),function(A){if(A)return y(A);l.emit("batch",r);y(null)})};l.get=function(r,v,y){"function"===typeof v&&(y=v,v={});b.get(r,e,g(v),function(A,E){A?y(Ppa):y(null,E)})};l.sublevel=function(r,v){return l.sublevels[r]=l.sublevels[r]||d9(b,
e.concat(r),m,g(v))};l.readStream=l.createReadStream=function(r){r=g(r);r.prefix=e;var v=b.iterator(r);r=m(r,b.createDecoder(r));r.setIterator(v);return r};l.close=function(r){b.close(r)};l.isOpen=b.isOpen;l.isClosed=b.isClosed;return l},i4=Npa.Readable;c9(oy,i4);oy.prototype.setIterator=function(b){this._iterator=b;return this._destroyed?b.end(function(){}):this._waiting?(this._waiting=!1,this._read()):this};oy.prototype._read=function(){var b=this;if(!b._destroyed){if(!b._iterator)return this._waiting=
!0;b._iterator.next(function(e,m,a){if(e||void 0===m&&void 0===a)return e||b._destroyed||b.push(null),b._cleanup(e);a=b._makeData(m,a);b._destroyed||b.push(a)})}};oy.prototype._cleanup=function(b){if(!this._destroyed){this._destroyed=!0;var e=this;b&&"iterator has ended"!==b.message&&e.emit("error",b);e._iterator?e._iterator.end(function(){e._iterator=null;e.emit("close")}):e.emit("close")}};oy.prototype.destroy=function(){this._cleanup()};var Qpa={encode:function(b){return"\u00ff"+b[0]+"\u00ff"+
b[1]},decode:function(b){b=b.toString();var e=b.indexOf("\u00ff",1);return[b.substring(1,e),b.substring(e+1)]},lowerBound:"\x00",upperBound:"\u00ff"},Rpa=new Mpa,Spa=Kpa=function(b){return d9(Aga(b,Qpa,Rpa),[],oy,b.options)},Kw="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,yN={},Tpa=tj,j4=J8.Transform,e9=vl;e9(wD,j4);wD.prototype.destroy=function(b){if(!(this||Kw)._destroyed){(this||Kw)._destroyed=!0;var e=this||Kw;Tpa.nextTick(function(){b&&e.emit("error",b);e.emit("close")})}};
yN=tS(function(b,e,m){b=new wD(b);b._transform=e;m&&(b._flush=m);return b});yN.ctor=tS(function(b,e,m){function a(g){if(!((this||Kw)instanceof a))return new a(g);(this||Kw).options=Object.assign({},b,g);wD.call(this||Kw,(this||Kw).options)}e9(a,wD);a.prototype._transform=e;m&&(a.prototype._flush=m);return a});yN.obj=tS(function(b,e,m){b=new wD(Object.assign({objectMode:!0,highWaterMark:16},b));b._transform=e;m&&(b._flush=m);return b});var f9=yN,Upa={};kk.prototype.toArray=function(){for(var b=this._length,
e=Array(b),m=this._front,a=this._capacity,g=0;g<b;++g)e[g]=this[m+g&a-1];return e};kk.prototype.push=function(b){var e=arguments.length,m=this._length;if(1<e){var a=this._capacity;if(m+e>a){for(var g=0;g<e;++g){this._checkCapacity(m+1);var l=this._front+m&this._capacity-1;this[l]=arguments[g];m++;this._length=m}return m}l=this._front;for(g=0;g<e;++g)this[l+m&a-1]=arguments[g],l++;this._length=m+e;return m+e}if(0===e)return m;this._checkCapacity(m+1);g=this._front+m&this._capacity-1;this[g]=b;this._length=
m+1;return m+1};kk.prototype.pop=function(){var b=this._length;if(0!==b){var e=this._front+b-1&this._capacity-1,m=this[e];this[e]=void 0;this._length=b-1;return m}};kk.prototype.shift=function(){var b=this._length;if(0!==b){var e=this._front,m=this[e];this[e]=void 0;this._front=e+1&this._capacity-1;this._length=b-1;return m}};kk.prototype.unshift=function(b){var e=this._length,m=arguments.length;if(1<m){var a=this._capacity;if(e+m>a){for(var g=m-1;0<=g;g--){this._checkCapacity(e+1);a=this._capacity;
var l=(this._front-1&a-1^a)-a;this[l]=arguments[g];e++;this._length=e;this._front=l}return e}l=this._front;for(g=m-1;0<=g;g--)l=(l-1&a-1^a)-a,this[l]=arguments[g];this._front=l;this._length=e+m;return e+m}if(0===m)return e;this._checkCapacity(e+1);a=this._capacity;g=(this._front-1&a-1^a)-a;this[g]=b;this._length=e+1;this._front=g;return e+1};kk.prototype.peekBack=function(){var b=this._length;if(0!==b)return this[this._front+b-1&this._capacity-1]};kk.prototype.peekFront=function(){if(0!==this._length)return this[this._front]};
kk.prototype.get=function(b){if(b===(b|0)){var e=this._length;0>b&&(b+=e);if(!(0>b||b>=e))return this[this._front+b&this._capacity-1]}};kk.prototype.isEmpty=function(){return 0===this._length};kk.prototype.clear=function(){for(var b=this._length,e=this._front,m=this._capacity,a=0;a<b;++a)this[e+a&m-1]=void 0;this._front=this._length=0};kk.prototype.toString=function(){return this.toArray().toString()};kk.prototype.valueOf=kk.prototype.toString;kk.prototype.removeFront=kk.prototype.shift;kk.prototype.removeBack=
kk.prototype.pop;kk.prototype.insertFront=kk.prototype.unshift;kk.prototype.insertBack=kk.prototype.push;kk.prototype.enqueue=kk.prototype.push;kk.prototype.dequeue=kk.prototype.shift;kk.prototype.toJSON=kk.prototype.toArray;Object.defineProperty(kk.prototype,"length",{get:function(){return this._length},set:function(){throw new RangeError("");}});kk.prototype._checkCapacity=function(b){this._capacity<b&&this._resizeTo(k4(1.5*this._capacity+16))};kk.prototype._resizeTo=function(b){var e=this._capacity;
this._capacity=b;b=this._front;var m=this._length;if(b+m>e)for(b=b+m&e-1,m=0;m<b;++m)this[m+e]=this[m+0],this[m+0]=void 0};var l4=Array.isArray,Vpa=Upa=kk,Wpa={},Ev=Mi.Buffer,Xpa=Object.prototype.toString,CV="function"===typeof Ev.alloc&&"function"===typeof Ev.allocUnsafe&&"function"===typeof Ev.from,Ypa=Wpa=function(b,e,m){if("number"===typeof b)throw new TypeError('"value" argument must not be a number');if("ArrayBuffer"===Xpa.call(b).slice(8,-1)){e>>>=0;var a=b.byteLength-e;if(0>a)throw new RangeError("'offset' is out of bounds");
if(void 0===m)m=a;else if(m>>>=0,m>a)throw new RangeError("'length' is out of bounds");return CV?Ev.from(b.slice(e,e+m)):new Ev(new Uint8Array(b.slice(e,e+m)))}if("string"===typeof b){m=e;if("string"!==typeof m||""===m)m="utf8";if(!Ev.isEncoding(m))throw new TypeError('"encoding" must be a valid string encoding');return CV?Ev.from(b,m):new Ev(b,m)}return CV?Ev.from(b):new Ev(b)},Fq={};Object.defineProperty(Fq,"__esModule",{value:!0});Fq.collectConflicts=function(b){var e=uS(b);b=m4(b.rev_tree);for(var m=
[],a=0,g=b.length;a<g;a++){var l=b[a];l.rev===e||l.opts.deleted||m.push(l.rev)}return m};Fq.collectLeaves=m4;Fq.compactTree=function(b){var e=[];bL(b.rev_tree,function(m,a,g,l,r){"available"!==r.status||m||(e.push(a+"-"+g),r.status="missing")});return e};Fq.isDeleted=function(b,e){e||(e=uS(b));e=e.substring(e.indexOf("-")+1);b=b.rev_tree.map(Hga);for(var m;m=b.pop();){if(m[0]===e)return!!m[1].deleted;b=b.concat(m[2])}};Fq.isLocalId=function(b){return/^_local/.test(b)};Fq.merge=function(b,e,m){b=q4(b,
e);m=Gga(b.tree,m);return{tree:m.tree,stemmedRevs:m.revs,conflicts:b.conflicts}};Fq.revExists=function(b,e){b=b.slice();var m=e.split("-");e=parseInt(m[0],10);m=m[1];for(var a;a=b.pop();){if(a.pos===e&&a.ids[0]===m)return!0;for(var g=a.ids[2],l=0,r=g.length;l<r;l++)b.push({pos:a.pos+1,ids:g[l]})}return!1};Fq.rootToLeaf=n4;Fq.traverseRevTree=bL;Fq.winningRev=uS;Fq.latest=function(b,e){for(var m=e.rev_tree.slice(),a;a=m.pop();){var g=a.pos,l=a.ids,r=l[0],v=l[1];l=l[2];var y=0===l.length;a=a.history?
a.history.slice():[];a.push({id:r,pos:g,opts:v});if(y)for(v=0,y=a.length;v<y;v++){var A=a[v];if(A.pos+"-"+A.id===b)return g+"-"+r}r=0;for(v=l.length;r<v;r++)m.push({pos:g+1,ids:l[r],history:a})}throw Error("Unable to resolve latest revision for id "+e.id+", rev "+b);};var Gn={};Object.defineProperty(Gn,"__esModule",{value:!0});var HA=yh,oG=Jo,u4=dE,lr=Ug,Aq=Fq,Iga=r4("_id _rev _attachments _deleted _revisions _revs_info _conflicts _deleted_conflicts _local_seq _rev_tree _replication_id _replication_state _replication_state_time _replication_state_reason _replication_stats _removed".split(" ")),
Jga=r4("_attachments _replication_id _replication_state _replication_state_time _replication_state_reason _replication_stats".split(" "));Gn.invalidIdError=HA.invalidIdError;Gn.normalizeDdocFunctionName=HA.normalizeDdocFunctionName;Gn.parseDdocFunctionName=HA.parseDdocFunctionName;Gn.isDeleted=Aq.isDeleted;Gn.isLocalId=Aq.isLocalId;Gn.allDocsKeysQuery=function(b,e){var m={offset:e.skip};return Promise.all(e.keys.map(function(a){var g=HA.assign({key:a,deleted:"ok"},e);["limit","skip","keys"].forEach(function(l){delete g[l]});
return new Promise(function(l,r){b._allDocs(g,function(v,y){if(v)return r(v);e.update_seq&&void 0!==y.update_seq&&(m.update_seq=y.update_seq);m.total_rows=y.total_rows;l(y.rows[0]||{key:a,error:"not_found"})})})})).then(function(a){m.rows=a;return m})};Gn.parseDoc=t4;Gn.preprocessAttachments=function(b,e,m){function a(){g++;b.length===g&&(l?m(l):m())}if(!b.length)return m();var g=0,l;b.forEach(function(r){function v(F){l=F;A++;A===y.length&&a()}var y=r.data&&r.data._attachments?Object.keys(r.data._attachments):
[],A=0;if(!y.length)return a();for(var E in r.data._attachments)r.data._attachments.hasOwnProperty(E)&&Mga(r.data._attachments[E],e,v)})};Gn.processDocs=function(b,e,m,a,g,l,r,v,y){b=b||1E3;var A=v.new_edits,E=new Jy.Map,F=0,H=e.length;e.forEach(function(I,M){if(I._id&&Aq.isLocalId(I._id))m[I._deleted?"_removeLocal":"_putLocal"](I,{ctx:g},function(W,X){l[M]=W||X;++F===H&&y&&y()});else{var N=I.metadata.id;E.has(N)?(H--,E.get(N).push([I,M])):E.set(N,[[I,M]])}});E.forEach(function(I,M){function N(){++X<
I.length?W():++F===H&&y&&y()}function W(){var ea=I[X],Aa=ea[0];ea=ea[1];if(a.has(M))v4(b,a.get(M),Aa,l,ea,N,r,A);else{var Ma=Aq.merge([],Aa.metadata.rev_tree[0],b);Aa.metadata.rev_tree=Ma.tree;Aa.stemmedRevs=Ma.stemmedRevs||[];Ma=Aq.winningRev(Aa.metadata);var K=Aq.isDeleted(Aa.metadata,Ma);"was_delete"in v&&K?(l[ea]=lr.createError(lr.MISSING_DOC,"deleted"),N()):A&&"missing"===Aa.metadata.rev_tree[0].ids[1].status?(Aa=lr.createError(lr.REV_CONFLICT),l[ea]=Aa,N()):r(Aa,Ma,K,K,!1,K?0:1,ea,N)}}var X=
0;W()})};Gn.updateDoc=v4;var BH={};Object.defineProperty(BH,"__esModule",{value:!0});var g9=UD&&"object"===typeof UD&&"default"in UD?UD["default"]:UD;BH.safeJsonParse=function(b){try{return JSON.parse(b)}catch(e){return g9.parse(b)}};BH.safeJsonStringify=function(b){try{return JSON.stringify(b)}catch(e){return g9.stringify(b)}};var Zpa={},$pa=pG(ypa),aqa=pG(Spa),zN=pG(xU),bqa=pG(Vpa),cqa=pG(Ypa),rG=Fq,qG=Jo,Ft=Jy;IA.prototype.get=function(b,e,m){var a=x4(this,b),g=a.get(e);if(g)return yh.nextTick(function(){m(null,
g)});if(null===g)return yh.nextTick(function(){m({name:"NotFoundError"})});b.get(e,function(l,r){if(l)return"NotFoundError"===l.name&&a.set(e,null),m(l);a.set(e,r);m(null,r)})};IA.prototype.batch=function(b){for(var e=0,m=b.length;e<m;e++){var a=b[e],g=x4(this,a.prefix);"put"===a.type?g.set(a.key,a.value):g.set(a.key,null)}this._batch=this._batch.concat(b)};IA.prototype.execute=function(b,e){for(var m=new Ft.Set,a=[],g=this._batch.length-1;0<=g;g--){var l=this._batch[g],r=l.prefix.prefix()[0]+"\u00ff"+
l.key;m.has(r)||(m.add(r),a.push(l))}b.batch(a,e)};var CH=new Ft.Map,dqa={encode:BH.safeJsonStringify,decode:BH.safeJsonParse,buffer:!1,type:"cheap-json"},DH=new yh.changesHandler,eqa=Zpa=function(b,e){function m(){N.docStore=K.sublevel("document-store",{valueEncoding:dqa});N.bySeqStore=K.sublevel("by-sequence",{valueEncoding:"json"});N.attachmentStore=K.sublevel("attach-store",{valueEncoding:"json"});N.binaryStore=K.sublevel("attach-binary-store",{valueEncoding:"binary"});N.localStore=K.sublevel("local-store",
{valueEncoding:"json"});N.metaStore=K.sublevel("meta-store",{valueEncoding:"json"});"object"===typeof b.migrate?b.migrate.doMigrationTwo(K,N,a):a()}function a(){N.metaStore.get("_local_last_update_seq",function(aa,T){"undefined"===typeof K._updateSeq&&(K._updateSeq=T||0);N.metaStore.get("_local_doc_count",function(U,pa){K._docCount=U?0:pa;N.metaStore.get("_local_uuid",function(fa,oa){M=fa?yh.uuid():oa;N.metaStore.put("_local_uuid",M,function(){yh.nextTick(function(){e(null,I)})})})})})}function g(aa){return K.isClosed()?
aa(Error("database is closed")):aa(null,K._docCount)}function l(aa,T){try{aa.apply(null,T)}catch(U){T[T.length-1](U)}}function r(){var aa=K._queue.peekFront();"read"===aa.type?v(aa):y(aa)}function v(aa){var T=[aa];aa=1;for(var U=K._queue.get(aa);"undefined"!==typeof U&&"read"===U.type;)T.push(U),aa++,U=K._queue.get(aa);var pa=0;T.forEach(function(fa){var oa=fa.args,gb=oa[oa.length-1];oa[oa.length-1]=zN(function(zb){gb.apply(null,zb);++pa===T.length&&yh.nextTick(function(){T.forEach(function(){K._queue.shift()});
K._queue.length&&r()})});l(fa.fun,oa)})}function y(aa){var T=aa.args,U=T[T.length-1];T[T.length-1]=zN(function(pa){U.apply(null,pa);yh.nextTick(function(){K._queue.shift();K._queue.length&&r()})});l(aa.fun,T)}function A(aa){return zN(function(T){K._queue.push({fun:aa,args:T,type:"write"});1===K._queue.length&&yh.nextTick(r)})}function E(aa){return zN(function(T){K._queue.push({fun:aa,args:T,type:"read"});1===K._queue.length&&yh.nextTick(r)})}function F(aa){return("0000000000000000"+aa).slice(-16)}
function H(aa,T){"destroy"in ea?ea.destroy(aa,T):T(null)}b=yh.clone(b);var I=this,M,N={},W=b.revs_limit,X=b.name;"undefined"===typeof b.createIfMissing&&(b.createIfMissing=!0);var ea=b.db,Aa=yh.functionName(ea);if(CH.has(Aa))var Ma=CH.get(Aa);else Ma=new Ft.Map,CH.set(Aa,Ma);if(Ma.has(X)){var K=Ma.get(X);m()}else Ma.set(X,aqa($pa(ea(X),b,function(aa){if(aa)return Ma.delete(X),e(aa);K=Ma.get(X);K._docCount=-1;K._queue=new bqa;"object"===typeof b.migrate?b.migrate.doMigrationOne(X,K,m):m()})));I._remote=
!1;I.type=function(){return"leveldb"};I._id=function(aa){aa(null,M)};I._info=function(aa){var T={doc_count:K._docCount,update_seq:K._updateSeq,backend_adapter:yh.functionName(ea)};return yh.nextTick(function(){aa(null,T)})};I._get=E(function(aa,T,U){T=yh.clone(T);N.docStore.get(aa,function(pa,fa){if(pa||!fa)return U(Ug.createError(Ug.MISSING_DOC,"missing"));if(T.rev)var oa=T.latest?rG.latest(T.rev,fa):T.rev;else if(oa=vS(fa),"deleted"in fa?fa.deleted:Gn.isDeleted(fa,oa))return U(Ug.createError(Ug.MISSING_DOC,
"deleted"));N.bySeqStore.get(F(fa.rev_map[oa]),function(gb,zb){if(!zb)return U(Ug.createError(Ug.MISSING_DOC));if("_id"in zb&&zb._id!==fa.id)return U(Error("wrong doc returned"));zb._id=fa.id;if("_rev"in zb){if(zb._rev!==oa)return U(Error("wrong doc returned"))}else zb._rev=oa;return U(null,{doc:zb,metadata:fa})})})});I._getAttachment=function(aa,T,U,pa,fa){var oa=U.content_type;N.binaryStore.get(U.digest,function(gb,zb){if(gb)return"NotFoundError"!==gb.name?fa(gb):fa(null,pa.binary?qG.blob([""],
{type:oa}):"");pa.binary?fa(null,w4(zb,oa)):fa(null,zb.toString("base64"))})};I._bulkDocs=A(function(aa,T,U){function pa(Sa,wb){Qc.get(N.attachmentStore,Sa,function(cc){cc?(cc=Ug.createError(Ug.MISSING_STUB,"unknown stub attachment with digest "+Sa),wb(cc)):wb()})}function fa(Sa){function wb(){if(++cc===Td.length)return Sa(Ld)}var cc=0,Ld;Td.forEach(function(Jd){if(Jd._id&&Gn.isLocalId(Jd._id))return wb();Qc.get(N.docStore,Jd._id,function(Uc,af){Uc?"NotFoundError"!==Uc.name&&(Ld=Uc):Vb.set(Jd._id,
af);wb()})})}function oa(Sa,wb){var cc=Promise.resolve();Sa.forEach(function(Ld,Jd){cc=cc.then(function(){return new Promise(function(Uc,af){I._doCompactionNoLock(Jd,Ld,{ctx:Qc},function(Ne){if(Ne)return af(Ne);Uc()})})})});cc.then(function(){wb()},wb)}function gb(Sa){var wb=new Ft.Map;Vb.forEach(function(cc,Ld){wb.set(Ld,rG.compactTree(cc))});oa(wb,Sa)}function zb(){oa(jc,function(Sa){Sa&&Na(Sa);if(I.auto_compaction)return gb(Na);Na()})}function va(Sa,wb,cc,Ld,Jd,Uc,af,Ne){function Qh(ph){Cj++;lj||
(ph?(lj=ph,Ne(lj)):Cj===Lj.length&&cj())}function mh(ph,Wj,Fk,ck){return function(Gk){ta(ph,"md5-"+Gk,Wj,Fk,ck)}}function kj(ph,Wj,Fk){return function(ck){dE.binaryMd5(ck,mh(ph,Wj,ck,Fk))}}function cj(){var ph=Sa.metadata.rev_map[Sa.metadata.rev];if(ph)return Ne();ph=++xd;Sa.metadata.rev_map[Sa.metadata.rev]=Sa.metadata.seq=ph;ph=[{key:F(ph),value:Sa.data,prefix:N.bySeqStore,type:"put"},{key:Sa.metadata.id,value:Sa.metadata,prefix:N.docStore,type:"put"}];Qc.batch(ph);kc[af]={ok:!0,id:Sa.metadata.id,
rev:Sa.metadata.rev};Vb.set(Sa.metadata.id,Sa.metadata);Ne()}Pb+=Uc;var lj=null,Cj=0;Sa.metadata.winningRev=wb;Sa.metadata.deleted=cc;Sa.data._id=Sa.metadata.id;Sa.data._rev=Sa.metadata.rev;Ld&&(Sa.data._deleted=!0);Sa.stemmedRevs.length&&jc.set(Sa.metadata.id,Sa.stemmedRevs);var Lj=Sa.data._attachments?Object.keys(Sa.data._attachments):[];for(wb=0;wb<Lj.length;wb++)if(cc=Lj[wb],Ld=Sa.data._attachments[cc],Ld.stub)ma(Sa.data._id,Sa.data._rev,Ld.digest,Qh);else if("string"===typeof Ld.data){try{var Ti=
qG.atob(Ld.data)}catch(ph){U(Ug.createError(Ug.BAD_ARG,"Attachment is not a valid base64 string"));return}kj(Sa,cc,Qh)(Ti)}else Nga(Ld.data,kj(Sa,cc,Qh));Lj.length||cj()}function ma(Sa,wb,cc,Ld){function Jd(){return new Promise(function(Ne,Qh){Qc.get(N.attachmentStore,cc,function(mh,kj){if(mh&&"NotFoundError"!==mh.name)return Qh(mh);Ne(kj)})})}function Uc(Ne){var Qh=[Sa,wb].join("@"),mh={};Ne?Ne.refs&&(mh.refs=Ne.refs,mh.refs[Qh]=!0):(mh.refs={},mh.refs[Qh]=!0);return new Promise(function(kj){Qc.batch([{type:"put",
prefix:N.attachmentStore,key:cc,value:mh}]);kj(!Ne)})}var af=Fa[cc]||Promise.resolve();Fa[cc]=af.then(function(){return Jd().then(Uc).then(function(Ne){Ld(null,Ne)},Ld)})}function ta(Sa,wb,cc,Ld,Jd){cc=Sa.data._attachments[cc];delete cc.data;cc.digest=wb;cc.length=Ld.length;var Uc=Sa.metadata.id;Sa=Sa.metadata.rev;cc.revpos=parseInt(Sa,10);ma(Uc,Sa,wb,function(af,Ne){if(af||0===Ld.length||!Ne)return Jd(af);Qc.batch([{type:"put",prefix:N.binaryStore,key:wb,value:cqa(Ld,"binary")}]);Jd()})}function Na(Sa){if(Sa)return yh.nextTick(function(){U(Sa)});
Qc.batch([{prefix:N.metaStore,type:"put",key:"_local_last_update_seq",value:xd},{prefix:N.metaStore,type:"put",key:"_local_doc_count",value:K._docCount+Pb}]);Qc.execute(K,function(wb){if(wb)return U(wb);K._docCount+=Pb;K._updateSeq=xd;DH.notify(X);yh.nextTick(function(){U(null,kc)})})}var Kb=T.new_edits,kc=Array(aa.docs.length),Vb=new Ft.Map,jc=new Ft.Map,Qc=new IA,Pb=0,xd=K._updateSeq,Td=aa.docs,ka=Td.map(function(Sa){if(Sa._id&&Gn.isLocalId(Sa._id))return Sa;Sa=Gn.parseDoc(Sa,Kb,I.__opts);Sa.metadata&&
!Sa.metadata.rev_map&&(Sa.metadata.rev_map={});return Sa});aa=ka.filter(function(Sa){return Sa.error});if(aa.length)return U(aa[0]);var Fa={};if(!ka.length)return U(null,[]);(function(Sa){var wb=[];Td.forEach(function(Jd){Jd&&Jd._attachments&&Object.keys(Jd._attachments).forEach(function(Uc){Uc=Jd._attachments[Uc];Uc.stub&&wb.push(Uc.digest)})});if(!wb.length)return Sa();var cc=0,Ld;wb.forEach(function(Jd){pa(Jd,function(Uc){Uc&&!Ld&&(Ld=Uc);++cc===wb.length&&Sa(Ld)})})})(function(Sa){if(Sa)return U(Sa);
fa(function(wb){if(wb)return U(wb);Gn.processDocs(W,ka,I,Vb,Qc,kc,va,T,zb)})})});I._allDocs=function(aa,T){return"keys"in aa?Gn.allDocsKeysQuery(this,aa):E(function(U,pa){U=yh.clone(U);g(function(fa,oa){if(fa)return pa(fa);fa={};var gb=U.skip||0;U.startkey&&(fa.gte=U.startkey);U.endkey&&(fa.lte=U.endkey);U.key&&(fa.gte=fa.lte=U.key);if(U.descending){fa.reverse=!0;var zb=fa.lte;fa.lte=fa.gte;fa.gte=zb}if("number"===typeof U.limit)var va=U.limit;if(0===va||"gte"in fa&&"lte"in fa&&fa.gte>fa.lte)return fa=
{total_rows:oa,offset:U.skip,rows:[]},U.update_seq&&(fa.update_seq=K._updateSeq),pa(null,fa);var ma=[],ta=N.docStore.readStream(fa),Na=f9.obj(function(Kb,kc,Vb){function jc(Td){var ka={id:Qc.id,key:Qc.id,value:{rev:Pb}};if(U.include_docs){ka.doc=Td;ka.doc._rev=ka.value.rev;U.conflicts&&(Td=rG.collectConflicts(Qc),Td.length&&(ka.doc._conflicts=Td));for(var Fa in ka.doc._attachments)ka.doc._attachments.hasOwnProperty(Fa)&&(ka.doc._attachments[Fa].stub=!0)}if(!1===U.inclusive_end&&Qc.id===U.endkey)return Vb();
if(xd)if("ok"===U.deleted)ka.value.deleted=!0,ka.doc=null;else return Vb();ma.push(ka);Vb()}var Qc=Kb.value,Pb=vS(Qc),xd="deleted"in Qc?Qc.deleted:Gn.isDeleted(Qc,Pb);if(!xd){if(0<gb--){Vb();return}if("number"===typeof va&&0>=va--){ta.unpipe();ta.destroy();Vb();return}}else if("ok"!==U.deleted){Vb();return}U.include_docs?N.bySeqStore.get(F(Qc.rev_map[Pb]),function(Td,ka){jc(ka)}):jc()},function(Kb){Promise.resolve().then(function(){if(U.include_docs&&U.attachments)return wS(ma,N,U)}).then(function(){var kc=
{total_rows:oa,offset:U.skip,rows:ma};U.update_seq&&(kc.update_seq=K._updateSeq);pa(null,kc)},pa);Kb()}).on("unpipe",function(){Na.end()});ta.on("error",pa);ta.pipe(Na)})})(aa,T)};I._changes=function(aa){function T(){aa.done=!0;aa.return_docs&&aa.limit&&aa.limit<fa.length&&(fa.length=aa.limit);Kb.unpipe(kc);Kb.destroy();aa.continuous||aa.cancelled||(aa.include_docs&&aa.attachments&&aa.return_docs?wS(fa,N,aa).then(function(){aa.complete(null,{results:fa,last_seq:oa})}):aa.complete(null,{results:fa,
last_seq:oa}))}aa=yh.clone(aa);if(aa.continuous){var U=X+":"+yh.uuid();DH.addListener(X,U,I,aa);DH.notify(X);return{cancel:function(){DH.removeListener(X,U)}}}var pa=aa.descending,fa=[],oa=aa.since||0,gb=0,zb={reverse:pa};if("limit"in aa&&0<aa.limit)var va=aa.limit;zb.reverse||(zb.start=F(aa.since||0));var ma=aa.doc_ids&&new Ft.Set(aa.doc_ids),ta=yh.filterChange(aa),Na=new Ft.Map,Kb=N.bySeqStore.readStream(zb),kc=f9.obj(function(Vb,jc,Qc){function Pb(ka){function Fa(wb){var cc=aa.processChange(wb,
ka,aa);cc.seq=ka.seq;wb=ta(cc);if("object"===typeof wb)return aa.complete(wb);if(wb){gb++;if(aa.attachments&&aa.include_docs)wS([cc],N,aa).then(function(){aa.onChange(cc)});else aa.onChange(cc);aa.return_docs&&fa.push(cc)}Qc()}var Sa=vS(ka);if(ka.seq!==xd)return Qc();oa=xd;if(Sa===Td._rev)return Fa(Td);N.bySeqStore.get(F(ka.rev_map[Sa]),function(wb,cc){Fa(cc)})}if(va&&gb>=va)return T(),Qc();if(aa.cancelled||aa.done)return Qc();var xd=parseInt(Vb.key,10),Td=Vb.value;if(xd===aa.since&&!pa||ma&&!ma.has(Td._id))return Qc();
if(Vb=Na.get(Td._id))return Pb(Vb);N.docStore.get(Td._id,function(ka,Fa){if(aa.cancelled||aa.done||K.isClosed()||Gn.isLocalId(Fa.id))return Qc();Na.set(Td._id,Fa);Pb(Fa)})},function(Vb){if(aa.cancelled)return Vb();aa.return_docs&&aa.limit&&aa.limit<fa.length&&(fa.length=aa.limit);Vb()}).on("unpipe",function(){kc.end();T()});Kb.pipe(kc);return{cancel:function(){aa.cancelled=!0;T()}}};I._close=function(aa){if(K.isClosed())return aa(Ug.createError(Ug.NOT_OPEN));K.close(function(T){T?aa(T):(Ma.delete(X),
aa())})};I._getRevisionTree=function(aa,T){N.docStore.get(aa,function(U,pa){U?T(Ug.createError(Ug.MISSING_DOC)):T(null,pa.rev_tree)})};I._doCompaction=A(function(aa,T,U,pa){I._doCompactionNoLock(aa,T,U,pa)});I._doCompactionNoLock=function(aa,T,U,pa){"function"===typeof U&&(pa=U,U={});if(!T.length)return pa();var fa=U.ctx||new IA;fa.get(N.docStore,aa,function(oa,gb){function zb(Vb){Vb&&(kc=Vb);if(++Kb===T.length){if(kc)return pa(kc);ma()}}function va(Vb){if(Vb)return pa(Vb);fa.batch(ta);if(U.ctx)return pa();
fa.execute(K,pa)}function ma(){function Vb(Td){Td&&(Pb=Td);++Qc===jc.length&&va(Pb)}var jc=Object.keys(Na);if(!jc.length)return va();var Qc=0,Pb,xd=new Ft.Map;T.forEach(function(Td){xd.set(aa+"@"+Td,!0)});jc.forEach(function(Td){fa.get(N.attachmentStore,Td,function(ka,Fa){if(ka)return"NotFoundError"===ka.name?Vb():Vb(ka);ka=Object.keys(Fa.refs||{}).filter(function(wb){return!xd.has(wb)});var Sa={};ka.forEach(function(wb){Sa[wb]=!0});ka.length?ta.push({key:Td,type:"put",value:{refs:Sa},prefix:N.attachmentStore}):
ta=ta.concat([{key:Td,type:"del",prefix:N.attachmentStore},{key:Td,type:"del",prefix:N.binaryStore}]);Vb()})})}if(oa)return pa(oa);oa=T.map(function(Vb){var jc=gb.rev_map[Vb];delete gb.rev_map[Vb];return jc});rG.traverseRevTree(gb.rev_tree,function(Vb,jc,Qc,Pb,xd){-1!==T.indexOf(jc+"-"+Qc)&&(xd.status="missing")});var ta=[];ta.push({key:gb.id,value:gb,type:"put",prefix:N.docStore});var Na={},Kb=0,kc;oa.forEach(function(Vb){ta.push({key:F(Vb),type:"del",prefix:N.bySeqStore});fa.get(N.bySeqStore,F(Vb),
function(jc,Qc){if(jc)return"NotFoundError"===jc.name?zb():zb(jc);Object.keys(Qc._attachments||{}).forEach(function(Pb){Na[Qc._attachments[Pb].digest]=!0});zb()})})})};I._getLocal=function(aa,T){N.localStore.get(aa,function(U,pa){U?T(Ug.createError(Ug.MISSING_DOC)):T(null,pa)})};I._putLocal=function(aa,T,U){"function"===typeof T&&(U=T,T={});T.ctx?I._putLocalNoLock(aa,T,U):I._putLocalWithLock(aa,T,U)};I._putLocalWithLock=A(function(aa,T,U){I._putLocalNoLock(aa,T,U)});I._putLocalNoLock=function(aa,
T,U){delete aa._revisions;var pa=aa._rev,fa=aa._id,oa=T.ctx||new IA;oa.get(N.localStore,fa,function(gb,zb){if(gb&&pa||zb&&zb._rev!==pa)return U(Ug.createError(Ug.REV_CONFLICT));aa._rev=pa?"0-"+(parseInt(pa.split("-")[1],10)+1):"0-1";oa.batch([{type:"put",prefix:N.localStore,key:fa,value:aa}]);var va={ok:!0,id:aa._id,rev:aa._rev};if(T.ctx)return U(null,va);oa.execute(K,function(ma){if(ma)return U(ma);U(null,va)})})};I._removeLocal=function(aa,T,U){"function"===typeof T&&(U=T,T={});T.ctx?I._removeLocalNoLock(aa,
T,U):I._removeLocalWithLock(aa,T,U)};I._removeLocalWithLock=A(function(aa,T,U){I._removeLocalNoLock(aa,T,U)});I._removeLocalNoLock=function(aa,T,U){var pa=T.ctx||new IA;pa.get(N.localStore,aa._id,function(fa,oa){if(fa)return"NotFoundError"!==fa.name?U(fa):U(Ug.createError(Ug.MISSING_DOC));if(oa._rev!==aa._rev)return U(Ug.createError(Ug.REV_CONFLICT));pa.batch([{prefix:N.localStore,type:"del",key:aa._id}]);var gb={ok:!0,id:aa._id,rev:"0-0"};if(T.ctx)return U(null,gb);pa.execute(K,function(zb){if(zb)return U(zb);
U(null,gb)})})};I._destroy=function(aa,T){aa=yh.functionName(ea);if(CH.has(aa))var U=CH.get(aa);else return H(X,T);U.has(X)?(DH.removeAllListeners(X),U.get(X).close(function(){U.delete(X);H(X,T)})):H(X,T)}},JA="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,fqa={},h9=tj;xS.prototype.next=function(b){var e=this||JA;if("function"!=typeof b)throw Error("next() requires a callback argument");if(e._ended)return b(Error("cannot call next() after end()"));if(e._nexting)return b(Error("cannot call next() before previous next() has completed"));
e._nexting=!0;if("function"==typeof e._next)return e._next(function(){e._nexting=!1;b.apply(null,arguments)});h9.nextTick(function(){e._nexting=!1;b()})};xS.prototype.end=function(b){if("function"!=typeof b)throw Error("end() requires a callback argument");if((this||JA)._ended)return b(Error("end() already called on iterator"));(this||JA)._ended=!0;if("function"==typeof(this||JA)._end)return this._end(b);h9.nextTick(b)};var i9=fqa=xS,Il="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?
self:global,gqa={},hqa=tj;py.prototype._serializeKey=function(b){return(this||Il)._db._serializeKey(b)};py.prototype._serializeValue=function(b){return(this||Il)._db._serializeValue(b)};py.prototype._checkWritten=function(){if((this||Il)._written)throw Error("write() already called on this batch");};py.prototype.put=function(b,e){this._checkWritten();var m=(this||Il)._db._checkKey(b,"key",(this||Il)._db._isBuffer);if(m)throw m;b=this._serializeKey(b);e=this._serializeValue(e);"function"==typeof(this||
Il)._put?this._put(b,e):(this||Il)._operations.push({type:"put",key:b,value:e});return this||Il};py.prototype.del=function(b){this._checkWritten();var e=(this||Il)._db._checkKey(b,"key",(this||Il)._db._isBuffer);if(e)throw e;b=this._serializeKey(b);"function"==typeof(this||Il)._del?this._del(b):(this||Il)._operations.push({type:"del",key:b});return this||Il};py.prototype.clear=function(){this._checkWritten();(this||Il)._operations=[];"function"==typeof(this||Il)._clear&&this._clear();return this||
Il};py.prototype.write=function(b,e){this._checkWritten();"function"==typeof b&&(e=b);if("function"!=typeof e)throw Error("write() requires a callback argument");"object"!=typeof b&&(b={});(this||Il)._written=!0;if("function"==typeof(this||Il)._write)return this._write(e);if("function"==typeof(this||Il)._db._batch)return(this||Il)._db._batch((this||Il)._operations,b,e);hqa.nextTick(e)};var iqa=gqa=py,Gm="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,j9={},jqa=Mi.Buffer,
Sy=tj;Kp.prototype.open=function(b,e){var m=this||Gm,a=(this||Gm).status;"function"==typeof b&&(e=b);if("function"!=typeof e)throw Error("open() requires a callback argument");"object"!=typeof b&&(b={});b.createIfMissing=0!=b.createIfMissing;b.errorIfExists=!!b.errorIfExists;"function"==typeof(this||Gm)._open?((this||Gm).status="opening",this._open(b,function(g){if(g)return m.status=a,e(g);m.status="open";e()})):((this||Gm).status="open",Sy.nextTick(e))};Kp.prototype.close=function(b){var e=this||
Gm,m=(this||Gm).status;if("function"!=typeof b)throw Error("close() requires a callback argument");"function"==typeof(this||Gm)._close?((this||Gm).status="closing",this._close(function(a){if(a)return e.status=m,b(a);e.status="closed";b()})):((this||Gm).status="closed",Sy.nextTick(b))};Kp.prototype.get=function(b,e,m){var a;"function"==typeof e&&(m=e);if("function"!=typeof m)throw Error("get() requires a callback argument");if(a=this._checkKey(b,"key"))return m(a);b=this._serializeKey(b);"object"!=
typeof e&&(e={});e.asBuffer=0!=e.asBuffer;if("function"==typeof(this||Gm)._get)return this._get(b,e,m);Sy.nextTick(function(){m(Error("NotFound"))})};Kp.prototype.put=function(b,e,m,a){var g;"function"==typeof m&&(a=m);if("function"!=typeof a)throw Error("put() requires a callback argument");if(g=this._checkKey(b,"key"))return a(g);b=this._serializeKey(b);e=this._serializeValue(e);"object"!=typeof m&&(m={});if("function"==typeof(this||Gm)._put)return this._put(b,e,m,a);Sy.nextTick(a)};Kp.prototype.del=
function(b,e,m){var a;"function"==typeof e&&(m=e);if("function"!=typeof m)throw Error("del() requires a callback argument");if(a=this._checkKey(b,"key"))return m(a);b=this._serializeKey(b);"object"!=typeof e&&(e={});if("function"==typeof(this||Gm)._del)return this._del(b,e,m);Sy.nextTick(m)};Kp.prototype.batch=function(b,e,m){if(!arguments.length)return this._chainedBatch();"function"==typeof e&&(m=e);"function"==typeof b&&(m=b);if("function"!=typeof m)throw Error("batch(array) requires a callback argument");
if(!Array.isArray(b))return m(Error("batch(array) requires an array argument"));e&&"object"==typeof e||(e={});for(var a=0,g=b.length,l,r;a<g;a++)if(l=b[a],"object"==typeof l&&((r=this._checkKey(l.type,"type"))||(r=this._checkKey(l.key,"key"))))return m(r);if("function"==typeof(this||Gm)._batch)return this._batch(b,e,m);Sy.nextTick(m)};Kp.prototype.approximateSize=function(b,e,m){if(null==b||null==e||"function"==typeof b||"function"==typeof e)throw Error("approximateSize() requires valid `start`, `end` and `callback` arguments");
if("function"!=typeof m)throw Error("approximateSize() requires a callback argument");b=this._serializeKey(b);e=this._serializeKey(e);if("function"==typeof(this||Gm)._approximateSize)return this._approximateSize(b,e,m);Sy.nextTick(function(){m(null,0)})};Kp.prototype._setupIteratorOptions=function(b){var e=this||Gm;b=Qy(b);"start end gt gte lt lte".split(" ").forEach(function(m){b[m]&&e._isBuffer(b[m])&&0===b[m].length&&delete b[m]});b.reverse=!!b.reverse;b.keys=0!=b.keys;b.values=0!=b.values;b.limit=
"limit"in b?b.limit:-1;b.keyAsBuffer=0!=b.keyAsBuffer;b.valueAsBuffer=0!=b.valueAsBuffer;return b};Kp.prototype.iterator=function(b){"object"!=typeof b&&(b={});b=this._setupIteratorOptions(b);return"function"==typeof(this||Gm)._iterator?this._iterator(b):new i9(this||Gm)};Kp.prototype._chainedBatch=function(){return new iqa(this||Gm)};Kp.prototype._isBuffer=function(b){return jqa.isBuffer(b)};Kp.prototype._serializeKey=function(b){return this._isBuffer(b)?b:String(b)};Kp.prototype._serializeValue=
function(b){return null==b?"":this._isBuffer(b)||Sy.browser?b:String(b)};Kp.prototype._checkKey=function(b,e){if(null===b||void 0===b)return Error(e+" cannot be `null` or `undefined`");if(this._isBuffer(b)&&0===b.length)return Error(e+" cannot be an empty Buffer");if(""===String(b))return Error(e+" cannot be an empty String")};j9=Kp;var kqa=j9;var k9={};k9=function(b){return new xD(b||Pga,null)};var Qp=xD.prototype;Object.defineProperty(Qp,"keys",{get:function(){var b=[];this.forEach(function(e,m){b.push(e)});
return b}});Object.defineProperty(Qp,"values",{get:function(){var b=[];this.forEach(function(e,m){b.push(m)});return b}});Object.defineProperty(Qp,"length",{get:function(){return this.root?this.root._count:0}});Qp.insert=function(b,e){for(var m=this._compare,a=this.root,g=[],l=[];a;){var r=m(b,a.key);g.push(a);l.push(r);a=0>=r?a.left:a.right}g.push(new mr(0,b,e,null,null,1));for(b=g.length-2;0<=b;--b)a=g[b],g[b]=0>=l[b]?new mr(a._color,a.key,a.value,g[b+1],a.right,a._count+1):new mr(a._color,a.key,
a.value,a.left,g[b+1],a._count+1);for(b=g.length-1;1<b;--b){l=g[b-1];a=g[b];if(1===l._color||1===a._color)break;e=g[b-2];if(e.left===l)if(l.left===a)if((r=e.right)&&0===r._color)l._color=1,e.right=qy(1,r),e._color=0,--b;else{e._color=0;e.left=l.right;l._color=1;l.right=e;g[b-2]=l;g[b-1]=a;Jl(e);Jl(l);3<=b&&(b=g[b-3],b.left===e?b.left=l:b.right=l);break}else if((r=e.right)&&0===r._color)l._color=1,e.right=qy(1,r),e._color=0,--b;else{l.right=a.left;e._color=0;e.left=a.right;a._color=1;a.left=l;a.right=
e;g[b-2]=a;g[b-1]=l;Jl(e);Jl(l);Jl(a);3<=b&&(b=g[b-3],b.left===e?b.left=a:b.right=a);break}else if(l.right===a)if((r=e.left)&&0===r._color)l._color=1,e.left=qy(1,r),e._color=0,--b;else{e._color=0;e.right=l.left;l._color=1;l.left=e;g[b-2]=l;g[b-1]=a;Jl(e);Jl(l);3<=b&&(b=g[b-3],b.right===e?b.right=l:b.left=l);break}else if((r=e.left)&&0===r._color)l._color=1,e.left=qy(1,r),e._color=0,--b;else{l.left=a.right;e._color=0;e.right=a.left;a._color=1;a.right=l;a.left=e;g[b-2]=a;g[b-1]=l;Jl(e);Jl(l);Jl(a);
3<=b&&(b=g[b-3],b.right===e?b.right=a:b.left=a);break}}g[0]._color=1;return new xD(m,g[0])};Qp.forEach=function(b,e,m){if(this.root)switch(arguments.length){case 1:return yS(b,this.root);case 2:return zS(e,this._compare,b,this.root);case 3:if(!(0<=this._compare(e,m)))return AS(e,m,this._compare,b,this.root)}};Object.defineProperty(Qp,"begin",{get:function(){for(var b=[],e=this.root;e;)b.push(e),e=e.left;return new nr(this,b)}});Object.defineProperty(Qp,"end",{get:function(){for(var b=[],e=this.root;e;)b.push(e),
e=e.right;return new nr(this,b)}});Qp.at=function(b){if(0>b)return new nr(this,[]);for(var e=this.root,m=[];;){m.push(e);if(e.left){if(b<e.left._count){e=e.left;continue}b-=e.left._count}if(!b)return new nr(this,m);--b;if(e.right){if(b>=e.right._count)break;e=e.right}else break}return new nr(this,[])};Qp.ge=function(b){for(var e=this._compare,m=this.root,a=[],g=0;m;){var l=e(b,m.key);a.push(m);0>=l&&(g=a.length);m=0>=l?m.left:m.right}a.length=g;return new nr(this,a)};Qp.gt=function(b){for(var e=this._compare,
m=this.root,a=[],g=0;m;){var l=e(b,m.key);a.push(m);0>l&&(g=a.length);m=0>l?m.left:m.right}a.length=g;return new nr(this,a)};Qp.lt=function(b){for(var e=this._compare,m=this.root,a=[],g=0;m;){var l=e(b,m.key);a.push(m);0<l&&(g=a.length);m=0>=l?m.left:m.right}a.length=g;return new nr(this,a)};Qp.le=function(b){for(var e=this._compare,m=this.root,a=[],g=0;m;){var l=e(b,m.key);a.push(m);0<=l&&(g=a.length);m=0>l?m.left:m.right}a.length=g;return new nr(this,a)};Qp.find=function(b){for(var e=this._compare,
m=this.root,a=[];m;){var g=e(b,m.key);a.push(m);if(0===g)return new nr(this,a);m=0>=g?m.left:m.right}return new nr(this,[])};Qp.remove=function(b){return(b=this.find(b))?b.remove():this};Qp.get=function(b){for(var e=this._compare,m=this.root;m;){var a=e(b,m.key);if(0===a)return m.value;m=0>=a?m.left:m.right}};var Hs=nr.prototype;Object.defineProperty(Hs,"valid",{get:function(){return 0<this._stack.length}});Object.defineProperty(Hs,"node",{get:function(){return 0<this._stack.length?this._stack[this._stack.length-
1]:null},enumerable:!0});Hs.clone=function(){return new nr(this.tree,this._stack.slice())};Hs.remove=function(){var b=this._stack;if(0===b.length)return this.tree;var e=Array(b.length),m=b[b.length-1];e[e.length-1]=new mr(m._color,m.key,m.value,m.left,m.right,m._count);for(var a=b.length-2;0<=a;--a)m=b[a],e[a]=m.left===b[a+1]?new mr(m._color,m.key,m.value,e[a+1],m.right,m._count):new mr(m._color,m.key,m.value,m.left,e[a+1],m._count);m=e[e.length-1];if(m.left&&m.right){b=e.length;for(m=m.left;m.right;)e.push(m),
m=m.right;a=e[b-1];e.push(new mr(m._color,a.key,a.value,m.left,m.right,m._count));e[b-1].key=m.key;e[b-1].value=m.value;for(a=e.length-2;a>=b;--a)m=e[a],e[a]=new mr(m._color,m.key,m.value,m.left,e[a+1],m._count);e[b-1].left=e[b]}m=e[e.length-1];if(0===m._color)for(a=e[e.length-2],a.left===m?a.left=null:a.right===m&&(a.right=null),e.pop(),a=0;a<e.length;++a)e[a]._count--;else if(m.left||m.right)for(m.left?y4(m,m.left):m.right&&y4(m,m.right),m._color=1,a=0;a<e.length-1;++a)e[a]._count--;else{if(1===
e.length)return new xD(this.tree._compare,null);for(a=0;a<e.length;++a)e[a]._count--;a=e[e.length-2];for(var g,l,r,v=e.length-1;0<=v;--v){b=e[v];if(0===v){b._color=1;break}g=e[v-1];if(g.left===b){l=g.right;if(l.right&&0===l.right._color){l=g.right=jv(l);r=l.right=jv(l.right);g.right=l.left;l.left=g;l.right=r;l._color=g._color;b._color=1;g._color=1;r._color=1;Jl(g);Jl(l);if(1<v){var y=e[v-2];y.left===g?y.left=l:y.right=l}e[v-1]=l;break}else if(l.left&&0===l.left._color){l=g.right=jv(l);r=l.left=jv(l.left);
g.right=r.left;l.left=r.right;r.left=g;r.right=l;r._color=g._color;g._color=1;l._color=1;b._color=1;Jl(g);Jl(l);Jl(r);1<v&&(y=e[v-2],y.left===g?y.left=r:y.right=r);e[v-1]=r;break}if(1===l._color)if(0===g._color){g._color=1;g.right=qy(0,l);break}else g.right=qy(0,l);else l=jv(l),g.right=l.left,l.left=g,l._color=g._color,g._color=0,Jl(g),Jl(l),1<v&&(y=e[v-2],y.left===g?y.left=l:y.right=l),e[v-1]=l,e[v]=g,v+1<e.length?e[v+1]=b:e.push(b),v+=2}else{l=g.left;if(l.left&&0===l.left._color){l=g.left=jv(l);
r=l.left=jv(l.left);g.left=l.right;l.right=g;l.left=r;l._color=g._color;b._color=1;g._color=1;r._color=1;Jl(g);Jl(l);1<v&&(y=e[v-2],y.right===g?y.right=l:y.left=l);e[v-1]=l;break}else if(l.right&&0===l.right._color){l=g.left=jv(l);r=l.right=jv(l.right);g.left=r.right;l.right=r.left;r.right=g;r.left=l;r._color=g._color;g._color=1;l._color=1;b._color=1;Jl(g);Jl(l);Jl(r);1<v&&(y=e[v-2],y.right===g?y.right=r:y.left=r);e[v-1]=r;break}if(1===l._color)if(0===g._color){g._color=1;g.left=qy(0,l);break}else g.left=
qy(0,l);else l=jv(l),g.left=l.right,l.right=g,l._color=g._color,g._color=0,Jl(g),Jl(l),1<v&&(y=e[v-2],y.right===g?y.right=l:y.left=l),e[v-1]=l,e[v]=g,v+1<e.length?e[v+1]=b:e.push(b),v+=2}}a.left===m?a.left=null:a.right=null}return new xD(this.tree._compare,e[0])};Object.defineProperty(Hs,"key",{get:function(){if(0<this._stack.length)return this._stack[this._stack.length-1].key},enumerable:!0});Object.defineProperty(Hs,"value",{get:function(){if(0<this._stack.length)return this._stack[this._stack.length-
1].value},enumerable:!0});Object.defineProperty(Hs,"index",{get:function(){var b=0,e=this._stack;if(0===e.length)return(b=this.tree.root)?b._count:0;e[e.length-1].left&&(b=e[e.length-1].left._count);for(var m=e.length-2;0<=m;--m)e[m+1]===e[m].right&&(++b,e[m].left&&(b+=e[m].left._count));return b},enumerable:!0});Hs.next=function(){var b=this._stack;if(0!==b.length){var e=b[b.length-1];if(e.right)for(e=e.right;e;)b.push(e),e=e.left;else for(b.pop();0<b.length&&b[b.length-1].right===e;)e=b[b.length-
1],b.pop()}};Object.defineProperty(Hs,"hasNext",{get:function(){var b=this._stack;if(0===b.length)return!1;if(b[b.length-1].right)return!0;for(var e=b.length-1;0<e;--e)if(b[e-1].left===b[e])return!0;return!1}});Hs.update=function(b){var e=this._stack;if(0===e.length)throw Error("Can't update empty node!");var m=Array(e.length),a=e[e.length-1];m[m.length-1]=new mr(a._color,a.key,b,a.left,a.right,a._count);for(b=e.length-2;0<=b;--b)a=e[b],m[b]=a.left===e[b+1]?new mr(a._color,a.key,a.value,m[b+1],a.right,
a._count):new mr(a._color,a.key,a.value,a.left,m[b+1],a._count);return new xD(this.tree._compare,m[0])};Hs.prev=function(){var b=this._stack;if(0!==b.length){var e=b[b.length-1];if(e.left)for(e=e.left;e;)b.push(e),e=e.right;else for(b.pop();0<b.length&&b[b.length-1].left===e;)e=b[b.length-1],b.pop()}};Object.defineProperty(Hs,"hasPrev",{get:function(){var b=this._stack;if(0===b.length)return!1;if(b[b.length-1].left)return!0;for(var e=b.length-1;0<e;--e)if(b[e-1].right===b[e])return!0;return!1}});
var lqa=k9,AN={},BN=Mi,Lw=BN.Buffer;Lw.from&&Lw.alloc&&Lw.allocUnsafe&&Lw.allocUnsafeSlow?AN=BN:(z4(BN,AN),AN.Buffer=yD);z4(Lw,yD);yD.from=function(b,e,m){if("number"===typeof b)throw new TypeError("Argument must not be a number");return Lw(b,e,m)};yD.alloc=function(b,e,m){if("number"!==typeof b)throw new TypeError("Argument must be a number");b=Lw(b);void 0!==e?"string"===typeof m?b.fill(e,m):b.fill(e):b.fill(0);return b};yD.allocUnsafe=function(b){if("number"!==typeof b)throw new TypeError("Argument must be a number");
return Lw(b)};yD.allocUnsafeSlow=function(b){if("number"!==typeof b)throw new TypeError("Argument must be a number");return BN.SlowBuffer(b)};var Xf="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,mqa={},l9=vl,B4=kqa,A4=i9,or=sm,Uga=lqa,CN=AN.Buffer,zD={};l9(cL,A4);cL.prototype._next=function(b){if((this||Xf)._done++>=(this||Xf)._limit||!(this||Xf)._tree.valid)return Nj(b);var e=(this||Xf)._tree.key;var m=(this||Xf)._tree.value;if(!this._test(e))return Nj(b);(this||
Xf).keyAsBuffer&&(e=CN.from(e));(this||Xf).valueAsBuffer&&(m=CN.from(m));(this||Xf)._tree[(this||Xf)._incr]();Nj(function(){b(null,e,m)})};cL.prototype._test=function(){return!0};Bq.clearGlobalStore=function(b){b?Object.keys(zD).forEach(function(e){delete zD[e]}):zD={}};l9(Bq,B4);Bq.prototype._open=function(b,e){var m=this||Xf;Nj(function(){e(null,m)})};Bq.prototype._put=function(b,e,m,a){if("undefined"===typeof e||null===e)e="";m=(this||Xf)._store[(this||Xf)._location].find(b);(this||Xf)._store[(this||
Xf)._location]=m.valid?m.update(e):(this||Xf)._store[(this||Xf)._location].insert(b,e);Nj(a)};Bq.prototype._get=function(b,e,m){var a=(this||Xf)._store[(this||Xf)._location].get(b);if("undefined"===typeof a)return Nj(function(){m(Error("NotFound"))});!1===e.asBuffer||this._isBuffer(a)||(a=CN.from(String(a)));Nj(function(){m(null,a)})};Bq.prototype._del=function(b,e,m){(this||Xf)._store[(this||Xf)._location]=(this||Xf)._store[(this||Xf)._location].remove(b);Nj(m)};Bq.prototype._batch=function(b,e,
m){e=-1;for(var a,g,l,r=b.length,v=(this||Xf)._store[(this||Xf)._location];++e<r;)b[e]&&(a=this._isBuffer(b[e].key)?b[e].key:String(b[e].key),l=v.find(a),"put"===b[e].type?(g=this._isBuffer(b[e].value)?b[e].value:String(b[e].value),v=l.valid?l.update(g):v.insert(a,g)):v=l.remove());(this||Xf)._store[(this||Xf)._location]=v;Nj(m)};Bq.prototype._iterator=function(b){return new cL(this||Xf,b)};Bq.prototype._isBuffer=function(b){return CN.isBuffer(b)};Bq.destroy=function(b,e){b="$"+b;b in zD&&delete zD[b];
Nj(e)};var nqa=mqa=Bq.default=Bq,oqa={},Vga=yh,Xga=C4(eqa),Wga=C4(nqa);BS.valid=function(){return!0};BS.use_prefix=!1;var pqa=oqa=function(b){b.adapter("memory",BS,!0)},fi=lively.FreezerRuntime.recorderFor("lively.storage/database.js");fi.nodejsRequire=function(b){if(!fi.isNode)throw Error("nodejsRequire can only be used in nodejs!");return"undefined"!==typeof System?System._nodeRequire(b):require("module")._load(b)};fi.nodejs_leveldbPath=function(b){if(b.startsWith("/"))return b;if(b.match(/[^\/]+:\/\//))return b.startsWith("file:")&&
(b=b.replace(/^file:\/\//,"")),b;if(!fi.isNode)throw Error("nodejs_leveldbPath called under non-nodejs environment");var e="undefined"!==typeof System&&System.baseURL.startsWith("file://")?System.baseURL.replace("file://",""):fi.GLOBAL.process.cwd(),m=fi.nodejsRequire("path").join,a=fi.nodejsRequire("fs"),g=a.mkdirSync,l=a.existsSync;a=a.readFileSync;if(b.includes("/"))return m(e,b);try{var r=a(m(e,"../package.json")),v=JSON.parse(r);if("lively.web"===v.name||"lively.next"===v.name){var y=m(e,"../.livelydbs");
l(y)||g(y);return m(y,b)}}catch(A){}e=m(e,".livelydbs");l(e)||g(e);return m(e,b)};fi.nodejs_attemptToLoadProperPouchDB=function(){if(!fi.isNode)throw Error("nodejs_attemptToLoadProperPouchDB called under non-nodejs environment");if("undefined"!==typeof System){var b=System._nodeRequire("path").join,e=System.normalizeSync("lively.storage/index.js");e=System.normalizeSync("pouchdb",e).replace(/file:\/\//,"");b=b(e,"../../lib/index.js");try{return fi.PouchDB=System._nodeRequire(b),fi.PouchDB.plugin(fi.pouchdbAdapterMem),
!0}catch(m){return!1}}try{return fi.PouchDB=require("pouchdb"),fi.PouchDB.plugin(fi.pouchdbAdapterMem),!0}catch(m){return!1}};fi._PouchDB=vla;fi.pouchdbAdapterMem=pqa;fi.Path=Ah;fi.GLOBAL="undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:void 0;fi.isNode="undefined"!==typeof global&&"undefined"!==typeof process;fi.PouchDB=fi._PouchDB;fi.PouchDB.plugin&&fi.pouchdbAdapterMem&&fi.PouchDB.plugin(fi.pouchdbAdapterMem);fi.createPouchDB=fi.isNode?function(){var b=
!1,e=!1;return function(m,a){a=void 0===a?{}:a;b||(b=!0,e=fi.nodejs_attemptToLoadProperPouchDB());a.adapter||(a.adapter=m.startsWith("http")?"http":e?"leveldb":"memory");"leveldb"==a.adapter&&(m=fi.nodejs_leveldbPath(m));a=Object.assign({},a,{name:m});return new fi.PouchDB(a)}}():function(b,e){return new fi.PouchDB(Object.assign({name:b},e))};var rh=function(b,e){e=void 0===e?{}:e;this.name=b;this.options=e;this._pouchdb=null};rh.findDB=function(b){return this.databases.get(b)};rh.ensureDB=function(b,
e){var m=this.findDB(b);if(m)return m;m=new this(b,e);this.databases.set(b,m);b.endsWith("lively.storage-meta")||this.createMetaEntryForDB(b,e);return m};rh.knownDBs=function(b,e){return fi.Database.ensureDB("lively.storage-meta").getAll().then(function(m){return m.map(function(a){return a._id})})};rh.createMetaEntryForDB=function(b,e){var m=fi.Database.ensureDB("lively.storage-meta");m.has(b).then(function(a){return!a&&m.set(b,{created:Date.now(),options:e})})};rh.knowsDB=function(b){var e=this,
m,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(g){return 1==g.nextAddress?(m=e.ensureDB(b),g.yield(m.docCount(),2)):3!=g.nextAddress?(a=g.yieldResult,0<a?g.return(!0):g.yield(m.destroy(),3)):g.return(!1)})};rh.prototype.close=function(){this._pouchdb&&(this._pouchdb.close(),delete this._pouchdb)};rh.prototype.isDestroyed=function(){return!!this.pouchdb._destroyed};rh.prototype.destroy=function(b){this.constructor.databases.delete(this.name);return this.isDestroyed()?{ok:!0}:this.pouchdb.destroy(b)};
rh.prototype.update=function(b,e,m,a){a=void 0===a?0:a;var g=this,l,r,v,y,A,E,F,H,I,M,N,W,X;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ea){switch(ea.nextAddress){case 1:return l=m=m||{},r=void 0===l.ensure?!0:l.ensure,v=void 0===l.retryOnConflict?!0:l.retryOnConflict,y=void 0===l.maxUpdateAttempts?10:l.maxUpdateAttempts,A={latest:!0},E=g,F=E.pouchdb,ea.setCatchFinallyBlocks(2),ea.yield(F.get(b,A),4);case 4:H=ea.yieldResult;ea.leaveTryBlock(3);break;case 2:if(M=ea.enterCatchBlock(),
"not_found"!==M.name||!r)throw M;case 3:return ea.yield(e(H),5);case 5:I=ea.yieldResult;if(!I||"object"!==typeof I)return ea.return(null);I._id!==b&&(I._id=b);H&&I._rev!==H._rev&&(I._rev=H._rev);ea.setCatchFinallyBlocks(6);return ea.yield(F.put(I),8);case 8:return N=ea.yieldResult,W=N.rev,ea.return(Object.assign(I,{_rev:W}));case 6:X=ea.enterCatchBlock();if("conflict"===X.name&&v&&a<y)return ea.return(g.update(b,e,m,a+1));throw X;}})};rh.prototype.mixin=function(b,e,m){var a=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(g){return g.return(a.update(b,
function(l){return Object.assign(l||{_id:b},e)},m))})};rh.prototype.set=function(b,e,m){var a=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(g){return g.return(a.update(b,function(l){return e},m))})};rh.prototype.get=function(b,e){e=void 0===e?{}:e;var m=this,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(g){if(1==g.nextAddress)return g.setCatchFinallyBlocks(2),g.yield(m.pouchdb.get(b,e),4);if(2!=g.nextAddress)return g.return(g.yieldResult);a=g.enterCatchBlock();if("not_found"===
a.name)return g.return(void 0);throw a;})};rh.prototype.has=function(b){var e=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){return 1==m.nextAddress?m.yield(e.get(b),2):m.return(!!m.yieldResult)})};rh.prototype.add=function(b){var e=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){return m.return(e.pouchdb.post(b))})};rh.prototype.docList=function(b){b=void 0===b?{}:b;var e=this,m,a,g,l,r,v,y,A;return $jscomp.asyncExecutePromiseGeneratorProgram(function(E){if(1==
E.nextAddress)return E.yield(e.pouchdb.allDocs(b),2);m=E.yieldResult;a=m.rows;g=[];for(l=0;l<a.length;l++)r=a[l],v=r.id,y=r.value,A=y.rev,g.push({id:v,rev:A});return E.return(g)})};rh.prototype.docCount=function(){var b=this,e;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){if(1==m.nextAddress)return m.yield(b.pouchdb.allDocs(),2);e=m.yieldResult;return m.return(e.rows.length)})};rh.prototype.revList=function(b){var e=this,m,a,g,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){if(1==
r.nextAddress)return r.yield(e.pouchdb.get(b,{revs:!0}),2);m=r.yieldResult;a=m._revisions;g=a.start;l=a.ids;return r.return(l.map(function(v){return g--+"-"+v}))})};rh.prototype.getAllRevisions=function(b,e){e=void 0===e?{}:e;var m=this,a,g,l,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){return 1==y.nextAddress?(a=e,g=void 0===a.skip?0:a.skip,l=void 0===a.limit?0:a.limit,y.yield(m.revList(b),2)):3!=y.nextAddress?(r=y.yieldResult,0<g&&(r=r.slice(g)),0<l&&(r=r.slice(0,l)),v=r.map(function(A){return{rev:A,
id:b}}),y.yield(m.getDocuments(v),3)):y.return(y.yieldResult)})};rh.prototype.getAll=function(b){b=void 0===b?{}:b;var e=this,m,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(g){if(1==g.nextAddress)return g.yield(e.pouchdb.allDocs(Object.assign({},b,{include_docs:!0})),2);m=g.yieldResult;a=m.rows;return g.return(a.map(function(l){return l.doc}))})};rh.prototype.setDocuments=function(b,e){var m=this,a,g,l,r,v,y,A;return $jscomp.asyncExecutePromiseGeneratorProgram(function(E){switch(E.nextAddress){case 1:return E.yield(m.pouchdb.bulkDocs(b,
e),2);case 2:a=E.yieldResult,g=0;case 3:if(!(g<a.length)){E.jumpTo(5);break}l=b[g];r=a[g];if(r.ok||"conflict"!==r.name||l._rev){E.jumpTo(4);break}return E.yield(m.set(l._id,l),7);case 7:v=E.yieldResult,y=v._id,A=v._rev,a[g]={ok:!0,id:y,rev:A};case 4:g++;E.jumpTo(3);break;case 5:return E.return(a)}})};rh.prototype.updateDocuments=function(b,e,m){var a=this,g,l,r,v,y,A,E,F,H,I,M;return $jscomp.asyncExecutePromiseGeneratorProgram(function(N){switch(N.nextAddress){case 1:return N.yield(a.pouchdb.bulkDocs(b,
m),2);case 2:g=N.yieldResult,l=[],r={},v=0;case 3:if(!(v<g.length)){if(!l.length){N.jumpTo(8);break}H=Object;I=H.assign;M=r;return N.yield(a.updateDocuments(l,e,m),9)}y=b[v];A=g[v];r[A._id||y._id]=A;if(A.ok||"conflict"!==A.name){N.jumpTo(4);break}return N.yield(a.get(y._id),7);case 7:if(E=N.yieldResult,F=e(E,y))F._id||(F._id=y._id),F._rev||(F._rev=E._rev),l.push(F);case 4:v++;N.jumpTo(3);break;case 9:r=I.call(H,{},M,{},N.yieldResult);case 8:return N.return(r)}})};rh.prototype.getDocuments=function(b,
e){e=void 0===e?{}:e;var m=this,a,g,l,r,v,y,A,E,F,H,I;return $jscomp.asyncExecutePromiseGeneratorProgram(function(M){if(1==M.nextAddress)return a=e,g=void 0===a.ignoreErrors?!0:a.ignoreErrors,M.yield(m.pouchdb.bulkGet({docs:b}),2);l=M.yieldResult;r=l.results;v=[];for(y=0;y<r.length;y++)for(A=r[y],E=A.docs,F=A.id,console.assert(1===E.length,"getDocuments: expected only one doc for "+F),H=0;H<E.length;H++)I=E[H],g&&!I.ok||v.push(I.ok||I.error||I);return M.return(v)})};rh.prototype.query=function(b,
e){return this.pouchdb.query(b,e)};rh.prototype.remove=function(b,e,m){var a=this,g,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){if(1==r.nextAddress)return"undefined"!==typeof e?(g={_id:b,_rev:e},r.jumpTo(2)):r.yield(a.get(b),3);2!=r.nextAddress&&(g=r.yieldResult);l=g;return r.return(l?a.pouchdb.remove(l):void 0)})};rh.prototype.removeAll=function(){var b=this,e,m;return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){return 1==a.nextAddress?(e=b.pouchdb,a.yield(e.allDocs(),
2)):3!=a.nextAddress?(m=a.yieldResult,a.yield(Promise.all(m.rows.map(function(g){return e.remove(g.id,g.value.rev)})),3)):a.return(a.yieldResult)})};rh.prototype.replicateTo=function(b,e){b instanceof fi.Database&&(b=b.pouchdb);return this.pouchdb.replicate.to(b,e)};rh.prototype.replicateFrom=function(b,e){b instanceof fi.Database&&(b=b.pouchdb);return this.pouchdb.replicate.from(b,e)};rh.prototype.sync=function(b,e){b instanceof fi.Database&&(b=b.pouchdb);return this.pouchdb.sync(b,e)};rh.prototype.getConflicts=
function(b){var e=this,m,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(g){if(1==g.nextAddress)return g.yield(e.pouchdb.query("conflict_index/conflict_index",Object.assign({reduce:!1,include_docs:!0,conflicts:!0},b)),2);m=g.yieldResult;a=m.rows;return g.return(a.map(function(l){var r={id:l.id,rev:l.doc._rev,doc:l.doc};l.doc._conflicts&&(r.conflicts=l.doc._conflicts,delete l.doc._conflicts);return r}))})};rh.prototype.resolveConflicts=function(b,e){var m=this,a,g,l,r,v,y,A;return $jscomp.asyncExecutePromiseGeneratorProgram(function(E){switch(E.nextAddress){case 1:return E.yield(m.pouchdb.get(b,
{conflicts:!0}),2);case 2:return a=E.yieldResult,g=a._conflicts.map(function(F){return{id:b,rev:F}}),E.yield(m.getDocuments(g),3);case 3:l=E.yieldResult,r=a,v=$jscomp.makeIterator(l),y=v.next();case 4:if(y.done){E.jumpTo(6);break}A=y.value;return E.yield(e(r,A),7);case 7:return(r=E.yieldResult)?E.yield(m.set(b,r),8):E.return(null);case 8:return r=E.yieldResult,E.yield(m.pouchdb.remove(A),5);case 5:y=v.next();E.jumpTo(4);break;case 6:return E.return(r)}})};rh.prototype.diffWith=function(b){var e=this,
m,a,g,l,r,v,y,A,E,F,H,I,M;return $jscomp.asyncExecutePromiseGeneratorProgram(function(N){if(1==N.nextAddress)return N.yield(b.docList(),2);if(3!=N.nextAddress)return m=N.yieldResult,N.yield(e.docList(),3);a=N.yieldResult;g=m.reduce(function(W,X){var ea={};return Object.assign(W,(ea[X.id]=X.rev,ea))},{});l=a.reduce(function(W,X){var ea={};return Object.assign(W,(ea[X.id]=X.rev,ea))},{});r=[];v=[];y=[];for(A in g)E=g[A],(F=l[A])?E!=F&&y.push({right:{id:A,rev:E},left:{id:A,rev:F}}):v.push({id:A,rev:E});
for(H in l)I=l[H],(M=g[H])||r.push({id:H,rev:I});return N.return({inLeft:r,inRight:v,changed:y})})};rh.loadDump=function(b,e){e=void 0===e?{}:e;var m=this,a,g,l,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){return 1==y.nextAddress?(a=b,g=a.header,l=a.docs,r=e.name||g.name,v=m.ensureDB(r),y.yield(v.setDocuments(l,{new_edits:!1}),2)):y.return(v)})};rh.prototype.dump=function(b){b=void 0===b?{}:b;var e=this,m,a,g,l,r,v,y,A,E,F,H,I,M,N,W,X;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ea){if(1==
ea.nextAddress)return m=b,a=m.filterFn,g=m.name,l=m.type,r=m.dbInfo,v=e,y=v.name,A=v.pouchdb,F=E=g||y,H=l||A.type(),I=(new Date).toJSON(),M=Object,N=M.assign,ea.yield(A.info(),2);if(3!=ea.nextAddress)return W={name:F,db_type:H,start_time:I,db_info:N.call(M,{},ea.yieldResult,{db_name:E},r)},ea.yield(e.getAll({attachments:!0}),3);X=ea.yieldResult;"function"===typeof a&&(X=a(X,W));return ea.return({header:W,docs:X})})};rh.prototype.backup=function(b){b=void 0===b?1:b;var e=this,m,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(g){return 1==
g.nextAddress?(m=e.name+"_backup_"+b,a=e.constructor.ensureDB(m),g.yield(e.replicateTo(a),2)):g.return(a)})};rh.prototype.migrate=function(b){var e=this,m,a,g,l,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){if(1==y.nextAddress)return y.yield(e.getAll(),2);if(3!=y.nextAddress){m=y.yieldResult;a=[];g=[];for(l=0;l<m.length;l++)r=m[l],(v=b(r,l))?(v.hasOwnProperty("_id")||(v._id=r._id),v.hasOwnProperty("_rev")&&delete v._rev,a.push(v)):g.push(r);return y.yield(e.setDocuments(a),3)}return y.return({migrated:a.length,
unchanged:g.length})})};rh.prototype.createDesignDocs=function(b){return b.map(this.createDesignDoc)};rh.prototype.createDesignDoc=function(b){var e=b.name,m=b.mapFn,a=b.reduceFn,g=b.filterFn;b={_id:"_design/"+e,version:void 0===b.version?1:b.version};g&&fi.Path("filters."+e).set(b,g.toString(),!0);m&&fi.Path("views."+e+".map").set(b,m.toString(),!0);a&&fi.Path("views."+e+".reduce").set(b,a.toString(),!0);return b};rh.prototype.addDesignDocs=function(b,e){e=void 0===e?!1:e;var m=this,a,g;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){return 1==
l.nextAddress?(a=m.createDesignDocs(b),l.yield(m.updateDocuments(a,function(r,v){return!r.hasOwnProperty("version")||v.hasOwnProperty("version")&&v.version>r.version?v:null}),2)):3!=l.nextAddress?(g=l.yieldResult,e?l.yield(Promise.all(a.map(function(r){return m.designDocDoQueryStale(r._id)})),3):l.jumpTo(3)):l.return(g)})};rh.prototype.addDesignDoc=function(b,e){var m=b.name,a=b.mapFn,g=b.reduceFn,l=b.version;e=void 0===e?!1:e;var r=this,v,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(A){return 1==
A.nextAddress?(v=r.createDesignDoc({name:m,mapFn:a,reduceFn:g,version:l}),A.yield(r.set(v._id,v),2)):3!=A.nextAddress?(y=A.yieldResult,e?A.yield(r.designDocDoQueryStale(v._id),3):A.jumpTo(3)):A.return(y)})};rh.prototype.removeDesignDoc=function(b){return this.remove("_design/"+b)};rh.prototype.designDocDoQueryStale=function(b){b=$jscomp.makeIterator(b.split("/"));b.next();b=b.next().value;return this.query(b,{stale:"update_after"})};$jscomp.global.Object.defineProperties(rh.prototype,{pouchdb:{configurable:!0,
enumerable:!0,get:function(){return this._pouchdb?this._pouchdb:this._pouchdb=fi.createPouchDB(this.name,this.options)}}});$jscomp.global.Object.defineProperties(rh,{PouchDB:{configurable:!0,enumerable:!0,get:function(){return fi.PouchDB},set:function(b){fi.PouchDB=b}},databases:{configurable:!0,enumerable:!0,get:function(){return this._databases||(this._databases=new Map)}}});fi.Database=rh;fi.default=rh;var Ge=lively.FreezerRuntime.recorderFor("lively.storage/objectdb.js");Ge.isHash=function(b){return"string"===
typeof b&&40===b.length&&b.match(Ge.hashRe)};Ge.checkArg=function(b,e,m){if("undefined"===typeof e&&"string"===typeof m&&!m.includes("undefined"))throw Error("parameter "+b+" is undefined");if(null===e&&"string"===typeof m&&!m.includes("null"))throw Error("parameter "+b+" is null");if("string"===typeof m){var a=typeof e,g=e?e.constructor.name:"";if(!m.split("|").some(function(l){return a===l||g===l}))throw Error('parameter "'+b+'" expected to be of type '+m+" but is "+(g||a));}if("function"===typeof m&&
(e=m(e))&&e.error)throw Error('check of parameter "'+b+'" failed: '+e.error);};Ge.checkArgs=function(b,e,m){for(var a in e)Ge.checkArg(a,b[a],e[a]);if("function"===typeof m&&(e=m(b))&&e.error)throw Error(e.error);return b};Ge.Database=rh;Ge.resource=la;Ge.obj=Ag;Ge.promise=zh;Ge.arr=$f;Ge.string=pi;Ge.Path=Ah;Ge.parse=ak;Ge.categorizer=KG;Ge.sha1=function(){function b(){var l=g.createHash("sha1");return{update:function(r){return l.update(r)},digest:function(){return l.digest("hex")}}}function e(l){function r(ea){A[N]|=
(255&ea)<<W;W?W-=8:(N++,W=24);16===N&&v()}function v(){for(var ea=16;80>ea;ea++){var Aa=A[ea-3]^A[ea-8]^A[ea-14]^A[ea-16];A[ea]=Aa<<1|Aa>>>31}var Ma,K;Aa=E;var aa=F,T=H,U=I,pa=M;for(ea=0;80>ea;ea++){20>ea?(Ma=U^aa&(T^U),K=1518500249):40>ea?(Ma=aa^T^U,K=1859775393):60>ea?(Ma=aa&T|U&(aa|T),K=2400959708):(Ma=aa^T^U,K=3395469782);var fa=(Aa<<5|Aa>>>27)+Ma+pa+K+(0|A[ea]);pa=U;U=T;T=aa<<30|aa>>>2;aa=Aa;Aa=fa}E=E+Aa|0;F=F+aa|0;H=H+T|0;I=I+U|0;M=M+pa|0;for(ea=N=0;16>ea;ea++)A[ea]=0}function y(ea){for(var Aa=
"",Ma=28;0<=Ma;Ma-=4)Aa+=(ea>>Ma&15).toString(16);return Aa}var A,E=1732584193,F=4023233417,H=2562383102,I=271733878,M=3285377520,N=0,W=24,X=0;return A=l?m:new Uint32Array(80),{update:function(ea){if("string"==typeof ea){var Aa=ea.length;X+=8*Aa;for(var Ma=0;Ma<Aa;Ma++)r(ea.charCodeAt(Ma))}else for(Aa=ea.length,X+=8*Aa,Ma=0;Ma<Aa;Ma++)r(ea[Ma])},digest:function(){r(128);(14<N||14===N&&24>W)&&v();N=14;W=24;r(0);r(0);r(0xffffffffff<X?X/1099511627776:0);r(4294967295<X?X/4294967296:0);for(var ea=24;0<=
ea;ea-=8)r(X>>ea);return y(E)+y(F)+y(H)+y(I)+y(M)}}}var m,a,g;return"object"==typeof process&&"object"==typeof process.versions&&process.versions.node&&"renderer"!==process.__atom_type?(g="undefined"!=typeof System?System._nodeRequire("crypto"):require("crypto"),a=b):(m=new Uint32Array(80),a=e),function(l){if(void 0===l)return a(!1);var r=a(!0);return r.update(l),r.digest()}}();Ge.hashRe=/^[0-9a-f]+$/i;Ge.objectDBs=Ge.objectDBs||new Map;var $h=function(b,e){this.name=b;if(!e.snapshotLocation||!e.snapshotLocation.isResource)throw Error("ObjectDB needs snapshotLocation!");
this.snapshotLocation=e.snapshotLocation;this.__versionDB=this.__commitDB=null};$h.dbList=function(){var b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){return 1==e.nextAddress?(b=Ge.Database.ensureDB("internal__objectdb-meta"),e.yield(b.getAll(),2)):e.return(e.yieldResult.map(function(m){return m._id}))})};$h.find=function(b){var e=this,m,a,g;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){if(1==l.nextAddress){if(m=Ge.objectDBs.get(b))return l.return(m);a=Ge.Database.ensureDB("internal__objectdb-meta");
return l.yield(a.get(b),2)}return(g=l.yieldResult)?l.return(e.named(b,g)):l.return()})};$h.named=function(b,e){e=void 0===e?{}:e;var m=Ge.objectDBs.get(b);if(m)return m;if(!e||!e.snapshotLocation)throw Error("need snapshotLocation");if("string"===typeof e.snapshotLocation)try{e.snapshotLocation=Ge.resource(e.snapshotLocation)}catch(a){e.snapshotLocation=Ge.resource(System.baseURL).join(e.snapshotLocation)}m=new this(b,e);Ge.objectDBs.set(b,m);Ge.Database.ensureDB("internal__objectdb-meta").set(b,
Object.assign({},e,{snapshotLocation:e.snapshotLocation.url})).catch(function(a){return console.error("error writing objectdb meta:",a)});return m};$h.prototype.destroy=function(){var b=this,e,m,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(g){if(1==g.nextAddress)return(e=Ge.Database.findDB(b.name+"-commits"))?g.yield(e.destroy(),2):g.jumpTo(2);if(4!=g.nextAddress)return(m=Ge.Database.findDB(b.name+"-version-graph"))?g.yield(m.destroy(),4):g.jumpTo(4);Ge.objectDBs.delete(b.name);a=
Ge.Database.ensureDB("internal__objectdb-meta");return g.yield(a.remove(b.name),0)})};$h.prototype.snapshotResourceFor=function(b){var e=b.content.slice(0,2);b=b.content.slice(2);return this.snapshotLocation.join(e+"/"+b+".json")};$h.prototype.snapshotObject=function(b,e,m,a,g,l,r,v){var y=this,A,E;return $jscomp.asyncExecutePromiseGeneratorProgram(function(F){if(1==F.nextAddress)return A=function(H){return H},F.yield(A(m),2);E=F.yieldResult;return F.return(y.commit(b,e,E,g,l,r,v))})};$h.prototype.loadObject=
function(b,e,m,a,g){var l=this,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){if(1==y.nextAddress)return y.yield(l.loadSnapshot(b,e,a,g),2);r=y.yieldResult;v=function(A){return A};return y.return(v(r))})};$h.prototype.has=function(b,e){var m=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){return 1==a.nextAddress?a.yield(m.objectStats(b,e),2):a.return(!!a.yieldResult)})};$h.prototype.objects=function(b){var e=this,m,a,g;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){if(1==
l.nextAddress)return l.yield(e.objectStats(b),2);m=l.yieldResult;if(b)return l.return(Object.keys(m||{}));a={};for(g in m)a[g]=Object.keys(m[g]);return l.return(a)})};$h.prototype.objectStats=function(b,e){var m=this,a,g,l,r,v,y,A,E,F,H,I,M,N,W,X,ea,Aa,Ma,K,aa;return $jscomp.asyncExecutePromiseGeneratorProgram(function(T){switch(T.nextAddress){case 1:a={};if(g=m.__commitDB){T.jumpTo(2);break}return T.yield(m._commitDB(),3);case 3:g=T.yieldResult;case 2:return l=g,r={reduce:!0,group:!0},b&&e?r.key=
b+"\x00"+e:b&&(r.startkey=b+"\x00",r.endkey=b+"\ufff0"),T.setCatchFinallyBlocks(4),T.yield(l.pouchdb.query("nameWithMaxMinTimestamp_index",r),6);case 6:v=T.yieldResult;y=v.rows;A=$jscomp.makeIterator(y);for(E=A.next();!E.done;E=A.next())H=F=E.value,I=H.key,M=H.value,N=M.count,W=M.max,X=M.min,ea=$jscomp.makeIterator(I.split("\x00")),Aa=ea.next().value,Ma=ea.next().value,K=a[Aa]||(a[Aa]={}),K[Ma]={count:N,newest:W,oldest:X};T.leaveTryBlock(5);break;case 4:return aa=T.enterCatchBlock(),console.error(aa),
T.return(a);case 5:return b&&e?T.return((a[b]||{})[e]):b?T.return(a[b]):T.return(a)}})};$h.prototype.getCommits=function(b,e,m,a){m=void 0===m?"HEAD":m;a=void 0===a?Infinity:a;var g=this,l,r,v,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(A){switch(A.nextAddress){case 1:return A.yield(g._log(b,e,m,a),2);case 2:l=A.yieldResult;if(!l.length)return A.return([]);if(r=g.__commitDB){A.jumpTo(3);break}return A.yield(g._commitDB(),4);case 4:r=A.yieldResult;case 3:return v=r,A.yield(v.getDocuments(l.map(function(E){return{id:E}})),
5);case 5:return y=A.yieldResult,A.return(y)}})};$h.prototype.getCommit=function(b){var e=this,m,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(g){if(1==g.nextAddress)return(m=e.__commitDB)?g.jumpTo(2):g.yield(e._commitDB(),3);2!=g.nextAddress&&(m=g.yieldResult);a=m;return g.return(a.get(b))})};$h.prototype.getCommitsWithIds=function(b){var e=this,m,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(g){if(1==g.nextAddress)return b.length?(m=e.__commitDB)?g.jumpTo(2):g.yield(e._commitDB(),
3):g.return([]);2!=g.nextAddress&&(m=g.yieldResult);a=m;return g.return(a.getDocuments(b.map(function(l){return{id:l}})))})};$h.prototype.getLatestCommit=function(b,e,m,a){m=void 0===m?"HEAD":m;a=void 0===a?!1:a;var g=this,l,r,v,y,A,E,F;return $jscomp.asyncExecutePromiseGeneratorProgram(function(H){switch(H.nextAddress){case 1:return l=$jscomp,r=l.makeIterator,H.yield(g._log(b,e,m,1),2);case 2:v=r.call(l,H.yieldResult);y=v.next().value;if(!y)return H.return(null);if(A=g.__commitDB){H.jumpTo(3);break}return H.yield(g._commitDB(),
4);case 4:A=H.yieldResult;case 3:return E=A,H.yield(E.get(y),5);case 5:return(F=H.yieldResult)&&F.deleted&&!a?H.return(null):H.return(F)}})};$h.prototype.commit=function(b,e,m,a,g,l,r){l=void 0===l?"HEAD":l;var v=this,y,A,E,F,H,I,M,N,W,X,ea,Aa,Ma,K,aa,T,U,pa,fa;return $jscomp.asyncExecutePromiseGeneratorProgram(function(oa){switch(oa.nextAddress){case 1:y=a;A=y.author;E=void 0===y.description?"no description":y.description;F=void 0===y.tags?[]:y.tags;H=y.timestamp;I=void 0===y.message?"":y.message;
M=y.metadata;N=y.preview;if(!b)throw Error("object needs a type");if(!e)throw Error("object needs a name");if(!A)throw Error("Cannot commit "+b+"/"+e+" without user");if(W=v.__versionDB){oa.jumpTo(2);break}return oa.yield(v._versionDB(),3);case 3:W=oa.yieldResult;case 2:return X=W,oa.yield(v.versionGraph(b,e),4);case 4:Ma=(Aa=(ea=oa.yieldResult)?ea.refs[l]:null)?[Aa]:[];if(r){if(!ea)throw Error('Trying to store "'+b+"/"+e+'" on top of expected version '+r+" but no version entry exists!");if(Aa!==
r)throw Error('Trying to store "'+b+"/"+e+'" on top of expected version '+r+" but ref "+l+" is of version "+Aa+"!");}aa=(K=Ge.isHash(m))?null:m?JSON.stringify(m):null;T=v._createCommit(b,e,E,F,M,A,H,I,Ma,K?null:m,aa,g||N,K?m:null);if(!m||K){oa.jumpTo(5);break}U=v.snapshotResourceFor(T);return oa.yield(U.parent().ensureExistance(),6);case 6:return U.canDealWithJSON?oa.yield(U.writeJson(m),5):oa.yield(U.write(aa),5);case 5:if(pa=v.__commitDB){oa.jumpTo(11);break}return oa.yield(v._commitDB(),12);case 12:pa=
oa.yieldResult;case 11:return fa=pa,oa.yield(fa.set(T._id,T),13);case 13:return T=oa.yieldResult,ea||(ea={refs:{},history:{}}),ea.refs[l]=T._id,ea.history[T._id]=Ma,oa.yield(X.set(b+"/"+e,ea),14);case 14:return oa.return(T)}})};$h.prototype.loadSnapshot=function(b,e,m,a){a=void 0===a?"HEAD":a;var g=this,l,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){switch(y.nextAddress){case 1:if(m&&"string"!==typeof m){l=m;y.jumpTo(2);break}if(m){if(r=g.__commitDB){y.jumpTo(6);break}return y.yield(g._commitDB(),
7)}return y.yield(g.getLatestCommit(b,e,a),5);case 5:l=y.yieldResult;y.jumpTo(2);break;case 7:r=y.yieldResult;case 6:return v=r,y.yield(v.get(m),8);case 8:l=y.yieldResult;case 2:if(!l)throw Error("Cannot find commit to loadSnapshot for "+b+"/"+e+" (using "+m+")");return y.return(g.snapshotResourceFor(l).readJson())}})};$h.prototype.revert=function(b,e,m,a){var g=this,l,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){switch(y.nextAddress){case 1:if(l=g.__versionDB){y.jumpTo(2);break}return y.yield(g._versionDB(),
3);case 3:l=y.yieldResult;case 2:return r=l,y.yield(r.get(b+"/"+e),4);case 4:return v=y.yieldResult,v.refs[m||"HEAD"]=a,delete v.deleted,y.yield(r.set(b+"/"+e,v),5);case 5:return y.return(v)}})};$h.prototype._createCommit=function(b,e,m,a,g,l,r,v,y,A,E,F,H){v=void 0===v?"":v;y=void 0===y?[]:y;!F&&A&&A.preview&&(F=A.preview);return this._createCommitFromSpec({name:e,type:b,timestamp:r||Date.now(),author:{name:l.name,email:l.email,realm:l.realm},tags:a,description:m,preview:F,message:v,content:H||E&&
Ge.sha1(E)||null,deleted:!H&&!A,metadata:g,ancestors:y},!0)};$h.prototype._createCommitFromSpec=function(b,e){e=void 0===e?!1:e;if(!b.name)throw Error("commit needs name");if(!b.type)throw Error("commit needs type");if(!b.author)throw Error("commit needs author");if(!b.author.name)throw Error("commit needs author.name");b.timestamp||(b.timestamp=Date.now());b.tags||(b.tags=[]);!e&&b.content&&(e=Ge.isHash(b.content),e||(b.content=Ge.sha1(b.content)));e=Ge.obj.dissoc(b,["preview"]);e=Ge.sha1(JSON.stringify(e));
return Object.assign(b,{_id:e})};$h.prototype._commitDB=function(){var b=this,e,m;return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){if(1==a.nextAddress){if(b.__commitDB)return a.return(b.__commitDB);e=b.name+"-commits";if(m=Ge.Database.findDB(e))return a.return(b.__commitDB=m);m=Ge.Database.ensureDB(e);return a.yield(m.addDesignDocs(b._commitdb_indexes),2)}return a.return(b.__commitDB=m)})};$h.prototype.close=function(){var b=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){switch(e.nextAddress){case 1:if(!b.__commitDB){e.jumpTo(2);
break}return e.yield(b.__commitDB.close(),3);case 3:b.__commitDB=null;case 2:if(!b.__versionDB){e.jumpTo(0);break}return e.yield(b.__versionDB.close(),5);case 5:b.__versionDB=null,e.jumpToEnd()}})};$h.prototype.versionGraph=function(b,e){var m=this,a,g,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){switch(r.nextAddress){case 1:if(a=m.__versionDB){r.jumpTo(2);break}return r.yield(m._versionDB(),3);case 3:a=r.yieldResult;case 2:return g=a,r.yield(g.get(b+"/"+e),4);case 4:return l=
r.yieldResult,r.return(!l||l.deleted||l._deleted?null:l)}})};$h.prototype._log=function(b,e,m,a){a=void 0===a?Infinity:a;var g=this,l,r,v,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(A){if(1==A.nextAddress)return A.yield(g.versionGraph(b,e),2);l=A.yieldResult;if(!l||l.deleted||l._deleted)return A.return([]);r=l.refs.HEAD;for(v=[];;){if(v.includes(r))throw Error("cyclic version graph???");v.push(r);y=$jscomp.makeIterator(l.history[r]||[]);r=y.next().value;if(!r||v.length>=a)break}return A.return(v)})};
$h.prototype._findTimestampedVersionsOfObjectNamed=function(b,e){e=void 0===e?{}:e;var m=this,a,g,l,r,v,y,A,E,F,H,I;return $jscomp.asyncExecutePromiseGeneratorProgram(function(M){switch(M.nextAddress){case 1:a=e;g=void 0===a.include_docs?!0:a.include_docs;l=void 0===a.descending?!0:a.descending;r=void 0===a.startTime?"0".repeat(13):a.startTime;v=void 0===a.endTime?"9".repeat(13):a.endTime;y=b+"\x00"+(l?v:r);A=b+"\x00"+(l?r:v);if(E=m.__commitDB){M.jumpTo(2);break}return M.yield(m._commitDB(),3);case 3:E=
M.yieldResult;case 2:return F=E,M.yield(F.pouchdb.query("nameAndTimestamp_index",Object.assign({},e,{descending:l,include_docs:g,startkey:y,endkey:A})),4);case 4:return H=M.yieldResult,I=H.rows,M.return(g?I.map(function(N){return N.doc}):I.map(function(N){return N.id}))}})};$h.prototype._versionDB=function(){var b=this,e,m;return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){if(1==a.nextAddress){if(b.__versionDB)return a.return(b.__versionDB);e=b.name+"-version-graph";if(m=Ge.Database.findDB(e))return a.return(b.__versionDB=
m);m=Ge.Database.ensureDB(e);return a.yield(m.addDesignDocs(b._versiondb_indexes),2)}return a.return(b.__versionDB=m)})};$h.prototype.exportToDir=function(b,e,m,a){m=void 0===m?!1:m;a=void 0===a?!1:a;var g=this,l,r,v,y,A,E,F,H,I,M,N,W,X,ea,Aa,Ma,K,aa,T,U,pa,fa,oa,gb,zb,va,ma,ta,Na,Kb,kc,Vb,jc,Qc,Pb,xd,Td,ka,Fa,Sa,wb,cc,Ld,Jd,Uc,af;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ne){switch(Ne.nextAddress){case 1:"string"===typeof b&&(b=Ge.resource(b));if(g.__commitDB){Ne.jumpTo(2);break}return Ne.yield(g._commitDB(),
3);case 3:case 2:if(l=g.__versionDB){Ne.jumpTo(4);break}return Ne.yield(g._versionDB(),5);case 5:l=Ne.yieldResult;case 4:r=l;v=[];if(!e)return Ne.yield(r.getAll(),13);y=$jscomp.makeIterator(e);A=y.next();case 8:if(A.done){Ne.jumpTo(7);break}F=E=A.value;H=F.name;I=F.type;M=b.join(I).join(H).asDirectory();return Ne.yield(g.versionGraph(I,H),11);case 11:return N=Ne.yieldResult,W=N.refs,X=N.history,ea=Object.keys(X),Ne.yield(g.getCommitsWithIds(ea),12);case 12:Aa=Ne.yieldResult;v.push({refs:W,history:X,
currentExportDir:M,commits:Aa,name:H,type:I});A=y.next();Ne.jumpTo(8);break;case 13:Ma=Ne.yieldResult,K=$jscomp.makeIterator(Ma),aa=K.next();case 14:if(aa.done){Ne.jumpTo(7);break}U=T=aa.value;pa=U.refs;fa=U.history;oa=U._id;if(oa.startsWith("_")){Ne.jumpTo(15);break}return Ne.yield(g.getCommit(pa.HEAD||Object.keys(fa)[0]),17);case 17:return gb=Ne.yieldResult,zb=gb.type,va=gb.name,ma=b.join(zb).join(va).asDirectory(),ta=Object.keys(fa),Ne.yield(g.getCommitsWithIds(ta),18);case 18:Na=Ne.yieldResult,
v.push({refs:pa,history:fa,currentExportDir:ma,commits:Na,name:va,type:zb});case 15:aa=K.next();Ne.jumpTo(14);break;case 7:Kb={},kc=$jscomp.makeIterator(v),Vb=kc.next();case 19:if(Vb.done){Ne.jumpTo(0);break}Qc=jc=Vb.value;Pb=Qc.refs;xd=Qc.history;Kb.$jscomp$loop$prop$currentExportDir$1066$2218=Qc.currentExportDir;Td=Qc.commits;ka=Qc.name;Fa=Qc.type;a||(Td=Td.filter(function(Qh){return!Qh.deleted}));Sa=m?Td.map(function(Qh){return function(mh){if(mh.deleted||mh._deleted||!mh.content)return null;delete mh._rev;
mh=g.snapshotResourceFor(mh);var kj=Qh.$jscomp$loop$prop$currentExportDir$1066$2218.join(mh.parent().name()+"/"+mh.name());return{from:mh,to:kj}}}(Kb)).filter(Boolean):[];m||Td.forEach(function(Qh){delete Qh._rev});return Ne.yield(Kb.$jscomp$loop$prop$currentExportDir$1066$2218.ensureExistance(),22);case 22:return Ne.yield(Kb.$jscomp$loop$prop$currentExportDir$1066$2218.join("index.json").writeJson({name:ka,type:Fa}),23);case 23:return Ne.yield(Kb.$jscomp$loop$prop$currentExportDir$1066$2218.join("commits.json").writeJson(Td),
24);case 24:return Ne.yield(Kb.$jscomp$loop$prop$currentExportDir$1066$2218.join("history.json").writeJson({refs:Pb,history:xd}),25);case 25:wb=$jscomp.makeIterator(Sa),cc=wb.next();case 26:if(cc.done){Kb={$jscomp$loop$prop$currentExportDir$1066$2218:Kb.$jscomp$loop$prop$currentExportDir$1066$2218};Vb=kc.next();Ne.jumpTo(19);break}Jd=Ld=cc.value;Uc=Jd.from;af=Jd.to;return Ne.yield(Uc.copyTo(af),27);case 27:cc=wb.next(),Ne.jumpTo(26)}})};$h.prototype.exportToSpecs=function(b,e){e=void 0===e?!1:e;var m=
this,a,g,l,r,v,y,A,E,F,H,I,M,N,W,X;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ea){switch(ea.nextAddress){case 1:a=[];if(b){ea.jumpTo(2);break}b=[];return ea.yield(m.objectStats(),3);case 3:for(l in g=ea.yieldResult||{},g)for(r in g[l])b.push({type:l,name:r});case 2:v=$jscomp.makeIterator(b),y=v.next();case 4:if(y.done){ea.jumpTo(6);break}E=A=y.value;F=E.name;H=E.type;return ea.yield(m.versionGraph(H,F),7);case 7:return I=ea.yieldResult,M=I.refs,N=I.history,W=Object.keys(N),ea.yield(m.getCommitsWithIds(W),
8);case 8:X=ea.yieldResult;e||(X=X.filter(function(Aa){return!Aa.deleted}));X.forEach(function(Aa){delete Aa._rev});a.push({type:H,name:F,commits:X,history:{refs:M,history:N}});y=v.next();ea.jumpTo(4);break;case 6:return ea.return(a)}})};$h.prototype.importFromDir=function(b,e,m){function a(I){var M,N,W,X,ea,Aa,Ma,K,aa,T;return $jscomp.asyncExecutePromiseGeneratorProgram(function(U){switch(U.nextAddress){case 1:return M=$jscomp,N=M.makeIterator,U.yield(Promise.all([I.join("index.json").readJson(),
I.join("commits.json").readJson(),I.join("history.json").readJson()]),2);case 2:W=N.call(M,U.yieldResult);X=W.next().value;ea=X.type;Aa=X.name;Ma=W.next().value;K=W.next().value;if(!m){aa=[];U.jumpTo(3);break}return U.yield(I.dirList(1,{exclude:function(pa){return!pa.isDirectory()}}),4);case 4:aa=U.yieldResult;case 3:return T=aa,U.return({dir:I,type:ea,name:Aa,commits:Ma,history:K,snapshotDirs:T})}})}e=void 0===e?!1:e;m=void 0===m?!1:m;var g=this,l,r,v,y,A,E,F,H;return $jscomp.asyncExecutePromiseGeneratorProgram(function(I){switch(I.nextAddress){case 1:return I.yield(b.dirList(3,
{exclude:function(M){return!M.isDirectory()&&"index.json"!==M.name()}}),2);case 2:l=I.yieldResult,l=l.filter(function(M){return"index.json"===M.name()}),r=l.map(function(M){return M.parent()}),v=[],y=$jscomp.makeIterator(r),A=y.next();case 3:if(A.done){I.jumpTo(5);break}E=A.value;F=v;H=F.push;return I.yield(a(E),6);case 6:H.call(F,I.yieldResult);A=y.next();I.jumpTo(3);break;case 5:return I.return(g.importFromSpecs(v,e,m))}})};$h.prototype.importFromSpecs=function(b,e,m){e=void 0===e?!1:e;m=void 0===
m?!1:m;var a=this,g,l,r,v,y,A,E,F,H,I,M;return $jscomp.asyncExecutePromiseGeneratorProgram(function(N){switch(N.nextAddress){case 1:if(e){N.jumpTo(2);break}if(g=a.__versionDB){N.jumpTo(3);break}return N.yield(a._versionDB(),4);case 4:g=N.yieldResult;case 3:l=g,r=$jscomp.makeIterator(b),v=r.next();case 5:if(v.done){N.jumpTo(2);break}A=y=v.value;E=A.type;F=A.name;return N.yield(l.get(E+"/"+F),8);case 8:if(N.yieldResult)throw Error("Import failed: object "+E+"/"+F+" already exists and overwrite is not allowed");
v=r.next();N.jumpTo(5);break;case 2:H=$jscomp.makeIterator(b),I=H.next();case 9:if(I.done){N.jumpTo(11);break}M=I.value;return N.yield(a.importFromSpec(M,!0,m),10);case 10:I=H.next();N.jumpTo(9);break;case 11:return N.return(b)}})};$h.prototype.importFromSpec=function(b,e,m){e=void 0===e?!1:e;m=void 0===m?!1:m;var a=this,g,l,r,v,y,A,E,F,H,I,M,N,W;return $jscomp.asyncExecutePromiseGeneratorProgram(function(X){switch(X.nextAddress){case 1:if(g=a.__versionDB){X.jumpTo(2);break}return X.yield(a._versionDB(),
3);case 3:g=X.yieldResult;case 2:l=g;if(r=a.__commitDB){X.jumpTo(4);break}return X.yield(a._commitDB(),5);case 5:r=X.yieldResult;case 4:v=r;y=a;A=y.snapshotLocation;E=b;F=E.type;H=E.name;I=E.commits;M=E.history;N=E.snapshotDirs;if(!(W=!e)){X.jumpTo(6);break}return X.yield(l.get(F+"/"+H),7);case 7:W=X.yieldResult;case 6:if(W)throw Error("Import failed: object "+F+"/"+H+" already exists and overwrite is not allowed");return X.yield(Promise.all([v.setDocuments(I),l.set(F+"/"+H,M)].concat($jscomp.arrayFromIterable(N&&
m?N.map(function(ea){return ea.copyTo(A.join(ea.name()).asDirectory())}):[]))),8);case 8:return X.return(b)}})};$h.prototype.importFromResource=function(b,e,m,a,g){g=void 0===g?!1:g;var l=this,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){switch(y.nextAddress){case 1:return y.yield(m.readJson(),2);case 2:r=y.yieldResult;if(!(v=g)){y.jumpTo(3);break}return y.yield(l.has(b,e),4);case 4:v=y.yieldResult;case 3:if(!v){y.jumpTo(5);break}return y.yield(l.delete(b,e,!1),5);case 5:return y.return(l.commit(b,
e,r,a))}})};$h.prototype.replicateTo=function(b,e,m,a){return(new Ge.Synchronization(this,b,e,m,Object.assign({method:"replicateTo"},a))).start()};$h.prototype.replicateFrom=function(b,e,m,a){return(new Ge.Synchronization(this,b,e,m,Object.assign({method:"replicateFrom"},a))).start()};$h.prototype.sync=function(b,e,m,a){return(new Ge.Synchronization(this,b,e,m,Object.assign({method:"sync"},a))).start()};$h.prototype.getConflicts=function(b,e){function m(A,E){var F;return $jscomp.asyncExecutePromiseGeneratorProgram(function(H){return 1==
H.nextAddress?H.yield(A.getConflicts({include_docs:!0}),2):3!=H.nextAddress?(F=H.yieldResult,H.yield(Promise.all(F.map(function(I){var M,N,W,X,ea,Aa;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ma){if(1==Ma.nextAddress){M=I;N=M.id;W=M.rev;X=M.conflicts;ea=M.doc;if(e&&e[E]&&!e[E][N])return Ma.return(null);if(!b)return Ma.jumpTo(2);Aa=X.map(function(K){return{id:N,rev:K}});return Ma.yield(A.getDocuments(Aa),3)}2!=Ma.nextAddress&&(X=Ma.yieldResult);b?Ge.obj.dissoc(ea,["_conflicts"]):ea=
null;return Ma.return({id:N,rev:W,conflicts:X,kind:E,doc:ea})})})),3)):H.return(H.yieldResult.filter(Boolean))})}var a=this,g,l,r,v,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(A){switch(A.nextAddress){case 1:if(g=a.__commitDB){A.jumpTo(2);break}return A.yield(a._commitDB(),3);case 3:g=A.yieldResult;case 2:l=g;if(r=a.__versionDB){A.jumpTo(4);break}return A.yield(a._versionDB(),5);case 5:r=A.yieldResult;case 4:return v=r,A.yield(m(v,"versions"),6);case 6:return y=A.yieldResult,A.yield(m(l,
"commits"),8);case 8:return A.yield(A.yieldResult,7);case 7:return A.return({versionConflicts:y,commitConflicts:A.yieldResult})}})};$h.prototype.resolveConflict=function(b){var e=this,m,a,g,l,r,v,y,A;return $jscomp.asyncExecutePromiseGeneratorProgram(function(E){switch(E.nextAddress){case 1:m=b;a=m.resolved;g=m.delete;l=m.kind;r=m.id;if("versions"===l){if(A=e.__versionDB){E.jumpTo(7);break}return E.yield(e._versionDB(),8)}if("commits"!==l)throw Error("Unknown conflict kind: "+l);if(y=e.__commitDB){E.jumpTo(5);
break}return E.yield(e._commitDB(),6);case 6:y=E.yieldResult;case 5:v=y;E.jumpTo(3);break;case 8:A=E.yieldResult;case 7:v=A;case 3:return E.yield(v.set(r,a),9);case 9:return E.yield(Promise.all(g.map(function(F){return v.pouchdb.remove(r,F)})),0)}})};$h.prototype.getDiff=function(b,e){var m=this,a,g,l,r,v,y,A,E,F,H,I,M,N,W,X,ea,Aa,Ma,K,aa,T,U,pa,fa,oa,gb,zb,va,ma,ta,Na,Kb,kc,Vb,jc,Qc,Pb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(xd){switch(xd.nextAddress){case 1:a=b;"string"===typeof b&&
(a=Ge.Database.ensureDB(b+"-commits"),e=Ge.Database.ensureDB(b+"-version-graph"));if(g=m.__commitDB){xd.jumpTo(2);break}return xd.yield(m._commitDB(),3);case 3:g=xd.yieldResult;case 2:l=g;if(r=m.__versionDB){xd.jumpTo(4);break}return xd.yield(m._versionDB(),5);case 5:r=xd.yieldResult;case 4:return v=r,xd.yield(l.diffWith(a),6);case 6:return y=xd.yieldResult,xd.yield(v.diffWith(e),7);case 7:return A=xd.yieldResult,xd.yield(Promise.all(A.inLeft.map(function(Td){var ka;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Fa){return 1==
Fa.nextAddress?(ka=Td.id,Fa.yield(v.get(Td.id),2)):Fa.return({id:ka,doc:Fa.yieldResult})})})),8);case 8:return E=xd.yieldResult,F=Ge.arr,H=F.groupBy,xd.yield(e.getAll(),9);case 9:return I=H.call(F,xd.yieldResult,function(Td){return Td._id}),xd.yield(Promise.all(A.inRight.map(function(Td){return $jscomp.asyncExecutePromiseGeneratorProgram(function(ka){return ka.return({id:Td.id,doc:I[Td.id]})})})),10);case 10:return M=xd.yieldResult,xd.yield(Promise.all(A.changed.map(function(Td){var ka,Fa,Sa,wb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(cc){return 1==
cc.nextAddress?(ka=Object,Fa=ka.assign,Sa=Td.left,cc.yield(v.get(Td.left.id),2)):3!=cc.nextAddress?(wb=cc.yieldResult,cc.yield(e.get(Td.right.id),3)):cc.return(Fa.call(ka,{},Sa,{docA:wb,docB:cc.yieldResult}))})})),11);case 11:return N=xd.yieldResult,W=Ge.arr,X=W.groupBy,xd.yield(a.getAll(),12);case 12:ea=X.call(W,xd.yieldResult,function(Td){return Td._id}),Aa=[],Ma=[],K=[],aa=$jscomp.makeIterator(y.inLeft),T=aa.next();case 13:if(T.done){xd.jumpTo(15);break}U=T.value;pa=Aa;fa=pa.push;return xd.yield(l.get(U.id),
16);case 16:fa.call(pa,xd.yieldResult);T=aa.next();xd.jumpTo(13);break;case 15:oa=$jscomp.makeIterator(y.inRight),T=oa.next();case 17:if(T.done){xd.jumpTo(19);break}gb=T.value;zb=Ma;va=zb.push;return xd.yield(ea[gb.id],20);case 20:va.call(zb,xd.yieldResult);T=oa.next();xd.jumpTo(17);break;case 19:ma=$jscomp.makeIterator(y.changed),T=ma.next();case 21:if(T.done){xd.jumpTo(23);break}ta=T.value;Na=K;Kb=Na.push;return xd.yield(l.get(ta.left.id),24);case 24:return Kb.call(Na,xd.yieldResult),kc=K,Vb=kc.push,
xd.yield(a.get(ta.right.id),25);case 25:Vb.call(kc,xd.yieldResult);T=ma.next();xd.jumpTo(21);break;case 23:return jc=Aa.map(function(Td){return Ge.obj.select(Td,["_id","name","type"])}),Qc=Ma.map(function(Td){return Ge.obj.select(Td,["_id","name","type"])}),Pb=K.map(function(Td){return Ge.obj.select(Td,["_id","name","type"])}),xd.return({changed:N,remote:M,local:E,changedCommitTypeAndNames:Pb,remoteCommitTypeAndNames:Qc,localCommitTypeAndNames:jc})}})};$h.prototype.delete=function(b,e,m){m=void 0===
m?!0:m;var a=this,g,l,r,v,y,A,E,F,H,I,M,N,W,X,ea,Aa,Ma,K;return $jscomp.asyncExecutePromiseGeneratorProgram(function(aa){switch(aa.nextAddress){case 1:g=[];l=[];if(r=a.__commitDB){aa.jumpTo(2);break}return aa.yield(a._commitDB(),3);case 3:r=aa.yieldResult;case 2:return v=r,y={include_docs:!0,startkey:b+"\x00"+e+"\x00",endkey:b+"\x00"+e+"\uffff"},aa.yield(v.query("nameAndTimestamp_index",y),4);case 4:A=aa.yieldResult;E=A.rows;F=$jscomp.makeIterator(E);for(H=F.next();!H.done;H=F.next())M=I=H.value,
N=M.doc,N.deleted||N._deleted||!N.content||g.push(a.snapshotResourceFor(N)),l.push(Object.assign({},N,{_deleted:!0}));if(W=a.__versionDB){aa.jumpTo(5);break}return aa.yield(a._versionDB(),6);case 6:W=aa.yieldResult;case 5:return X=W,aa.yield(X.get(b+"/"+e),7);case 7:ea=aa.yieldResult;Aa=ea._id;Ma=ea._rev;K={_id:Aa,_rev:Ma,_deleted:!0};if(m){aa.jumpTo(8);break}return aa.yield(v.setDocuments(l),9);case 9:return aa.yield(X.setDocuments([K]),10);case 10:Promise.all(g.map(function(T){return T.remove()}));
case 8:return aa.return({commits:l,history:K,resources:g})}})};$h.prototype.deleteCommit=function(b,e,m){e=void 0===e?!0:e;m=void 0===m?"HEAD":m;var a=this,g,l,r,v,y,A,E,F,H,I,M,N,W,X,ea;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Aa){switch(Aa.nextAddress){case 1:if(b&&"string"!==typeof b){g=b;Aa.jumpTo(2);break}if(!b){Aa.jumpTo(2);break}if(l=a.__commitDB){Aa.jumpTo(4);break}return Aa.yield(a._commitDB(),5);case 5:l=Aa.yieldResult;case 4:return r=l,Aa.yield(r.get(b),6);case 6:g=Aa.yieldResult;
case 2:if(!g)throw Error("commit needed!");if(v=a.__versionDB){Aa.jumpTo(7);break}return Aa.yield(a._versionDB(),8);case 8:v=Aa.yieldResult;case 7:y=v;if(A=a.__commitDB){Aa.jumpTo(9);break}return Aa.yield(a._commitDB(),10);case 10:A=Aa.yieldResult;case 9:return E=A,F=g,H=F.name,I=F.type,M=g.deleted||g._deleted||!g.content?[]:[a.snapshotResourceFor(g)],N=[Object.assign({},g,{_deleted:!0})],Aa.yield(y.get(I+"/"+H),11);case 11:W=Aa.yieldResult;if(!W)throw Error("No history for "+I+"/"+H+"@"+g._id);if(!W.refs[m])throw Error("Cannot delete commit "+
I+"/"+H+"@"+g._id+" b/c it is not where ref "+m+" is pointing!");X=$jscomp.makeIterator(W.history[g._id]||[]);ea=X.next().value;if(!ea&&1>=Object.keys(W.history).length)W._deleted=!0;else if(ea)delete W.history[g._id],W.refs[m]=ea;else throw Error("Cannot delete commit "+I+"/"+H+"@"+g._id+" b/c it has no ancestor but there are still other commits!");if(e){Aa.jumpTo(12);break}return Aa.yield(y.set(I+"/"+H,W),13);case 13:return Aa.yield(E.setDocuments(N),14);case 14:return Aa.yield(Promise.all(M.map(function(Ma){return Ma.remove()})),
12);case 12:return Aa.return({commits:N,history:W,resources:M})}})};$jscomp.global.Object.defineProperties($h.prototype,{_commitdb_indexes:{configurable:!0,enumerable:!0,get:function(){return[{name:"name_index",version:4,mapFn:'function (doc) { emit(doc.type + "\x00" + doc.name); }'},{name:"nameAndTimestamp_index",version:3,mapFn:'function (doc) { emit(doc.type + "\x00" + doc.name + "\x00" + doc.timestamp + "\x00" + doc._id); }'},{name:"nameWithMaxMinTimestamp_index",version:3,mapFn:'function(doc) { emit(doc.type + "\x00" + doc.name, doc.timestamp); }',
reduceFn:"_stats"},{name:"nameTypeFilter",version:9,filterFn:'function(doc, req) {\n          if (doc._id[0] === "_" || !req || !req.query) return true;\n          if (req.query.onlyIds) return !!req.query.onlyIds[doc._id];\n          if (req.query.onlyTypesAndNames)\n            return !!req.query.onlyTypesAndNames[doc.type + "/" + doc.name];\n          return true;\n        }'},{name:"conflict_index",version:4,mapFn:"function(doc) { if (doc._conflicts) emit(doc._id); }"}]}},_versiondb_indexes:{configurable:!0,
enumerable:!0,get:function(){return[{name:"nameTypeFilter",version:3,filterFn:'function(doc, req) {\n          if (doc._id[0] === "_" || !req || !req.query) return true;\n          if (req.query.onlyIds) return !!req.query.onlyIds[doc._id];\n          if (req.query.onlyTypesAndNames) return !!req.query.onlyTypesAndNames[doc._id];\n          return true;\n        }'},{name:"conflict_index",version:4,mapFn:"function(doc) { if (doc._conflicts) emit(doc._id); }"}]}}});Ge.ObjectDB=$h;var Xw=function(b,
e,m,a,g){g=void 0===g?{}:g;this.options=Object.assign({debug:!1,live:!1,method:"sync",replicationFilter:void 0},g);this.state="not started";this.method="";this.fromObjectDB=b;this.remoteCommitDB=e;this.remoteVersionDB=m;this.remoteLocation=a;this.deferred=Ge.promise.deferred();this.conflicts=[];this.changes=[];this.errors=[]};Xw.prototype.whenPaused=function(){var b=this;return Promise.resolve().then(function(){return Ge.promise.waitFor(function(){return b.isPaused||b.isComplete})}).then(function(){return b})};
Xw.prototype.waitForIt=function(){return this.deferred.promise};Xw.prototype.start=function(){this.isSynchonizing||this._startReplicationAndCopy().catch(function(b){return console.error("Error starting synchronization: ",b)});return this};Xw.prototype._startReplicationAndCopy=function(){function b(Vb){return"paused"===kc&&"paused"===Kb&&0>=Na.copyCalls&&0>=Na.copyCallsWaiting?Vb.state="paused":"complete"===kc&&"complete"===Kb&&Na.isComplete()?Vb.state="complete":Vb.state="running"}function e(Vb,jc){if(jc.length||
"complete"===Kb&&"complete"===kc&&Na.isComplete()){U.cancel();if(jc.length){Vb.state="complete";Vb.errors=jc;ma.cancel();ta.cancel();var Qc=Error("Synchronization error:\n  "+jc.join("\n  "));Qc.errors=jc;console.log(Vb+" errored")}else console.log(Vb+" completed");Qc?Vb.deferred.reject(Qc):Vb.deferred.resolve(Vb)}}function m(Vb){if(!Vb.content)return null;var jc=Vb.content.slice(0,2);Vb=Vb.content.slice(2);return jc+"/"+Vb+".json"}var a=this,g,l,r,v,y,A,E,F,H,I,M,N,W,X,ea,Aa,Ma,K,aa,T,U,pa,fa,oa,
gb,zb,va,ma,ta,Na,Kb,kc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Vb){switch(Vb.nextAddress){case 1:g=a;l=g.fromObjectDB;r=g.remoteCommitDB;v=g.remoteVersionDB;y=g.remoteLocation;A=g.options;E=A.debug;F=void 0===A.live?!1:A.live;H=void 0===A.retry?!1:A.retry;I=A.method;M=A.replicationFilter;N=void 0===A.pushDesignDocToRemote?!1:A.pushDesignDocToRemote;if(W=l.__versionDB){Vb.jumpTo(2);break}return Vb.yield(l._versionDB(),3);case 3:W=Vb.yieldResult;case 2:X=W;if(ea=l.__commitDB){Vb.jumpTo(4);
break}return Vb.yield(l._commitDB(),5);case 5:ea=Vb.yieldResult;case 4:Aa=ea;Ma=l;K=Ma._commitdb_indexes;aa=Ma._versiondb_indexes;T=Ma.snapshotLocation;a.method=I;fa=K.find(function(jc){return"nameTypeFilter"===jc.name});oa=aa.find(function(jc){return"nameTypeFilter"===jc.name});if(!N){Vb.jumpTo(6);break}console.log("adding commitNameTypeFilter");return Vb.yield(r.addDesignDoc(fa),7);case 7:return console.log("adding versionNameTypeFilter"),Vb.yield(v.addDesignDoc(oa),6);case 6:return gb={live:F,
retry:H},zb=Object.assign({},gb),va=Object.assign({},gb),M&&(zb.filter=eval("("+fa.filterFn+")"),zb.query_params=M,va.filter=eval("("+oa.filterFn+")"),va.query_params=M),ma=Aa[I](r,zb),ta=X[I](v,va),Na={copyCalls:0,copyCallsWaiting:0,nFilesToCopy:0,nFilesCopied:0,stopped:!1,isComplete:function(){return this.stopped||0>=this.copyCalls&&0>=this.copyCallsWaiting}},kc=Kb="not started",a.versionReplication=ta,a.commitReplication=ma,a.snapshotReplication=Na,pa=r.pouchdb.changes({include_docs:!0,live:!0,
conflicts:!0}),U=v.pouchdb.changes({include_docs:!0,live:!0,conflicts:!0}),pa.on("change",function(jc){var Qc=jc.id,Pb=jc.changes;jc=jc.doc._conflicts;E&&console.log("commit changes "+Qc+":",Pb,jc);jc&&(console.log("commit conflict "+Qc+":",Pb,jc),a.conflicts.push({db:"commits",id:Qc,changes:Pb,conflicts:jc}))}),U.on("change",function(jc){var Qc=jc.id,Pb=jc.changes;jc=jc.doc._conflicts;E&&console.log("version changes "+Qc+":",Pb,jc);jc&&(console.log("version conflict "+Qc+":",Pb,jc),a.conflicts.push({db:"versions",
id:Qc,changes:Pb,conflicts:jc}))}),ma.on("change",function(jc){var Qc,Pb,xd,Td,ka,Fa,Sa,wb,cc,Ld,Jd;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Uc){switch(Uc.nextAddress){case 1:"replicateTo"===I?jc={direction:"push",change:jc}:"replicateFrom"===I&&(jc={direction:"pull",change:jc});Qc=jc;Pb=Qc.direction;xd=Qc.change;Td=xd.docs;console.log(a+" "+("push"===Pb?"send":"received")+" "+Td.length+" commits");Uc.setCatchFinallyBlocks(2,3);Fa=[];Sa=$jscomp.makeIterator(Td);for(wb=Sa.next();!wb.done;wb=
Sa.next())cc=wb.value,cc._id.startsWith("_")||(a.changes.push({direction:Pb,kind:"commits",id:cc._id,type:cc.type,name:cc.name}),(Ld=m(cc))&&Fa.push(Ld));Na.nFilesToCopy+=Fa.length;if(!(0<Na.copyCalls)){Uc.jumpTo(5);break}Na.copyCallsWaiting++;return Uc.yield(Ge.promise.waitFor(function(){return 0>=Na.copyCalls}),6);case 6:Na.copyCallsWaiting--;case 5:return Na.copyCalls++,b(a),console.log(a+" copying "+Fa.length+" snapshots..."),Uc.yield(Ge.promise.parallel(Fa.map(function(af){return function(){var Ne=
("push"===Pb?T:y).join(af),Qh=("push"===Pb?y:T).join(af);return Na.stopped?(console.warn(a+" Stopping copying resources b/c synchronization ended ("+Na.copyCalls+", "+Ne.url+" => "+Qh.url+")"),Promise.resolve()):Qh.exists().then(function(mh){function kj(cj){cj=void 0===cj?0:cj;return Ne.copyTo(Qh).catch(function(lj){if(5<=cj)throw lj;return kj(cj+1)})}return mh?(E&&console.log("Skip copying to "+Qh.url+", already exist"),Promise.resolve()):Ne.exists().then(function(cj){if(!cj)return console.warn("Skip copying "+
Ne.url+", does not exist"),Promise.resolve();E&&console.log(a+" Copying "+Ne.url+" => "+Qh.url);return kj(0).then(function(lj){Na.nFilesCopied++;Na.stopped||0!==Na.nFilesCopied%10||console.log(a+" copied "+Na.nFilesCopied+" of "+Na.nFilesToCopy+" snapshots");return lj})})})}}),5),7);case 7:console.log(a+" sending files done");case 3:Uc.enterFinallyBlock();Na.copyCalls--;b(a);e(a,ka?[ka]:[]);Uc.leaveFinallyBlock(0);break;case 2:throw Jd=Uc.enterCatchBlock(),console.error("error in commitReplication onChange",
Jd),ka=Jd,Jd;}})}).on("paused",function(){Kb="paused";b(a);E&&console.log(a+" commit replication paused")}).on("active",function(){Kb="active";b(a);E&&console.log(a+" commit replication active")}).on("error",function(jc){Kb="complete";b(a);console.error(a+" commit replication error",jc);e(a,[jc])}).on("complete",function(jc){Kb="complete";b(a);jc="sync"===I?jc.push.errors.concat(jc.pull.errors):jc.errors;e(a,jc)}),ta.on("change",function(jc){"replicateTo"===I?jc={direction:"push",change:jc}:"replicateFrom"===
I&&(jc={direction:"pull",change:jc});var Qc=jc.direction;jc=jc.change.docs;E&&console.log(a+" "+("push"===Qc?"send":"received")+" "+jc.length+" histories");jc.forEach(function(Pb){Pb._id.startsWith("_")||a.changes.push({direction:Qc,kind:"versions",id:Pb._id})})}).on("paused",function(){kc="paused";b(a);E&&console.log(a+" version replication paused")}).on("active",function(jc){kc="active";b(a);E&&console.log(a+" version replication active",jc)}).on("error",function(jc){kc="complete";b(a);console.error(a+
" version replication error",jc);e(a,[jc])}).on("complete",function(jc){kc="complete";b(a);jc="sync"===I?jc.push.errors.concat(jc.pull.errors):jc.errors;e(a,jc)}),a.state="running",Vb.return(a)}})};Xw.prototype.safeStop=function(){var b=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){return 1==e.nextAddress?"not started"!==b.state&&b.isSynchonizing?e.yield(b.whenPaused(),2):e.return(b):e.return(b.stop())})};Xw.prototype.stop=function(){if("not started"===this.state||!this.isSynchonizing)return this;
this.commitReplication.cancel();this.versionReplication.cancel();this.snapshotReplication.stopped=!0;return this};Xw.prototype.toString=function(){var b=this.method;return"Synchronization("+this.state+": "+this.fromObjectDB.name+" "+("sync"===b?"<=>":"replicateTo"===b?"=>":"replicateFrom"===b?"<=":"??")+")"};$jscomp.global.Object.defineProperties(Xw.prototype,{isSynchonizing:{configurable:!0,enumerable:!0,get:function(){return this.isPaused||this.isRunning}},isComplete:{configurable:!0,enumerable:!0,
get:function(){return"complete"===this.state}},isRunning:{configurable:!0,enumerable:!0,get:function(){return"running"===this.state}},isPaused:{configurable:!0,enumerable:!0,get:function(){return"paused"===this.state}},changesByTypeAndName:{configurable:!0,enumerable:!0,get:function(){var b={push:{},pull:{}};this.changes.forEach(function(e){var m=e.direction,a=e.id,g=e.kind;if("_"!==a[0]){if("versions"===g)var l=b[m][a]||(b[m][a]=[]);else"commits"===g&&(a=e.type+"/"+e.name,l=b[m][a]||(b[m][a]=[]));
l.push(e)}});return b}}});Ge.Synchronization=Xw;var wB={describe:function(b){function e(v,y){v=v.find(function(H){return H.name===y}).node.value.body;var A=v.body||[],E=(v.comments||[]).find(function(H){return H.end<A[0].start});v={name:y,parameters:[],sideEffect:!1,returns:null,description:""};if(E&&E.text.trim()){E=Ge.string.changeIndent(E.text," ",0).split("\n");E=$jscomp.makeIterator(E);for(var F=E.next();!F.done;F=E.next()){F=F.value;if(F.startsWith("ignore-in-doc")){v.description="";break}F.startsWith("side effect:")?
v.sideEffect=JSON.parse(F.split(":")[1]):F.startsWith("returns:")?v.returns=F.split(":")[1].trim():v.description+=F+"\n"}}E=$jscomp.makeIterator(A);for(F=E.next();!F.done;F=E.next())if(F=F.value,"checkArgs"===Ge.Path("declarations.0.init.callee.name").get(F)&&(F=Ge.Path("declarations.0.id.properties").get(F)))v.parameters=F.map(function(H){return H.key.name});return v}var m=this,a,g,l,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){switch(v.nextAddress){case 1:v.setCatchFinallyBlocks(2);
if(m._methodSpecs){v.jumpTo(4);break}return v.yield(lively.modules.module("lively.storage/objectdb.js").source(),5);case 5:a=v.yieldResult,g=Ge.parse(a,{withComments:!0}),l=Ge.categorizer.findDecls(g),m._methodSpecs=l.filter(function(y){return y.parent&&"ObjectDBInterface"===y.parent.name});case 4:return v.return(b?e(m._methodSpecs,b):m._methodSpecs.map(function(y){return e(m._methodSpecs,y.name)}).filter(Boolean));case 2:return r=v.enterCatchBlock(),v.return("Error in describe "+r)}})},ensureDB:function(b){var e,
m,a,g;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){if(1==l.nextAddress)return e=Ge.checkArgs(b,{db:"string",snapshotLocation:"string|Resource"}),m=e.db,a=e.snapshotLocation,l.yield(Ge.ObjectDB.find(m),2);if(g=l.yieldResult)return l.return(!1);Ge.ObjectDB.named(m,{snapshotLocation:a});return l.return(!0)})},destroyDB:function(b){var e,m,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(g){return 1==g.nextAddress?(e=Ge.checkArgs(b,{db:"string"}),m=e.db,g.yield(Ge.ObjectDB.find(m),
2)):3!=g.nextAddress?(a=g.yieldResult)?g.yield(a.destroy(),3):g.return(!1):g.return(!0)})},fetchCommits:function(b){var e,m,a,g,l,r,v,y,A,E,F,H,I,M,N,W,X,ea,Aa,Ma,K,aa,T,U,pa,fa,oa,gb,zb,va,ma,ta,Na;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Kb){switch(Kb.nextAddress){case 1:return e=Ge.checkArgs(b,{db:"string",ref:"string|undefined",type:"string|undefined",typesAndNames:"Array|undefined",knownCommitIds:"object|undefined",includeDeleted:"boolean|undefined",filterFn:"string|undefined"}),
m=e.db,a=e.ref,g=e.type,l=e.typesAndNames,r=e.knownCommitIds,v=e.includeDeleted,y=e.filterFn,Kb.yield(Ge.ObjectDB.find(m),2);case 2:A=Kb.yieldResult;a||(a="HEAD");if(!A)throw Error("db "+m+" does not exist");if(A.__commitDB){Kb.jumpTo(3);break}return Kb.yield(A._commitDB(),4);case 4:case 3:if(E=A.__versionDB){Kb.jumpTo(5);break}return Kb.yield(A._versionDB(),6);case 6:E=Kb.yieldResult;case 5:F=E;H={};I={};if(l)for(M=H.keys=[],N=$jscomp.makeIterator(l),W=N.next();!W.done;W=N.next())ea=X=W.value,Aa=
ea.type,Ma=ea.name,K=ea.ref,M.push(Aa+"/"+Ma),K&&(I[Aa+"/"+Ma]=K);else g&&(H.startkey=g+'/\x00"',H.endkey=g+'/\uffff"');return Kb.yield(F.getAll(H),7);case 7:aa=Kb.yieldResult;T=[];U=$jscomp.makeIterator(aa);for(pa=U.next();!pa.done;pa=U.next())fa=pa.value,fa.deleted||fa._deleted||(oa=fa,gb=oa._id,zb=oa.refs,gb.startsWith("_")||(va=zb[I[gb]||a]||a,!va||r&&r.hasOwnProperty(va)||T.push(va)));return Kb.yield(A.getCommitsWithIds(T),8);case 8:ma=Kb.yieldResult;v||(ma=ma.filter(function(kc){return!kc.deleted}));
if(y)try{ta=eval("("+y+")");if("function"!==typeof ta)throw Error(y+" does not eval to a function!");Na=ma.filter(ta);if(Array.isArray(Na))ma=Na;else throw Error(y+" does not return an array!");}catch(kc){console.error("fetchCommits filterFn failed:",kc)}return Kb.return(ma)}})},fetchVersionGraph:function(b){var e,m,a,g,l,r,v,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(A){if(1==A.nextAddress)return e=Ge.checkArgs(b,{db:"string",type:"string",name:"string"}),m=e.db,a=e.type,g=e.name,
A.yield(Ge.ObjectDB.find(m),2);if(3!=A.nextAddress){l=A.yieldResult;if(!l)throw Error("db "+m+" does not exist");return A.yield(l.versionGraph(a,g),3)}r=A.yieldResult;v=r.refs;y=r.history;return A.return({refs:v,history:y})})},exists:function(b){var e,m,a,g,l,r,v,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(A){if(1==A.nextAddress)return e=Ge.checkArgs(b,{db:"string",type:"string",name:"string",ref:"string|undefined"}),m=e.db,a=e.type,g=e.name,l=e.ref,A.yield(Ge.ObjectDB.find(m),2);
if(3!=A.nextAddress)return r=A.yieldResult,A.yield(r.versionGraph(a,g),3);v=A.yieldResult;if(!v)return A.return({exists:!1,commitId:void 0});l=l||"HEAD";return(y=v.refs[l])?A.return({exists:!0,commitId:y}):A.return({exists:!1,commitId:void 0})})},fetchLog:function(b){var e,m,a,g,l,r,v,y,A,E,F,H,I,M,N,W,X,ea,Aa,Ma,K,aa;return $jscomp.asyncExecutePromiseGeneratorProgram(function(T){switch(T.nextAddress){case 1:return e=Ge.checkArgs(b,{db:"string",type:"string|undefined",name:"string|undefined",ref:"string|undefined",
commit:"string|undefined",limit:"number|undefined",includeCommits:"boolean|undefined",knownCommitIds:"object|undefined"},function(U){return U.type&&U.name||U.commit?null:{error:"Eiter .type + .name or .commit needed!"}}),m=e.db,a=e.type,g=e.name,l=e.ref,r=e.commit,v=e.limit,y=e.includeCommits,A=e.knownCommitIds,T.yield(Ge.ObjectDB.find(m),2);case 2:E=T.yieldResult;F=l||"HEAD";if(!E)throw Error("db "+m+" does not exist");v||(v=Infinity);r||l||(l=F);if(!r){T.jumpTo(3);break}H=r;if(a&&g){T.jumpTo(3);
break}return T.yield(E.getCommit(r),5);case 5:I=T.yieldResult;if(!I)throw Error("fetchLog: specified commit "+r+" but no commit with this id is in the database!");M=I;a=M.type;g=M.name;case 3:return T.yield(E.versionGraph(a,g),6);case 6:N=T.yieldResult;if(!N)throw Error("Unknown object "+a+"/"+g);W=N;X=W.refs;ea=W.history;H||(H=X[l]);Aa=H;for(Ma=[];Ma.length<v&&!Ma.includes(Aa);){Ma.push(Aa);K=ea[Aa];if(!K||!K.length)break;aa=$jscomp.makeIterator(K);Aa=aa.next().value}if(!y){T.jumpTo(7);break}A&&
(Ma=Ma.filter(function(U){return!A.hasOwnProperty(U)}));return T.yield(E.getCommitsWithIds(Ma),8);case 8:Ma=T.yieldResult;case 7:return T.return(Ma)}})},fetchSnapshot:function(b){var e,m,a,g,l,r,v,y,A;return $jscomp.asyncExecutePromiseGeneratorProgram(function(E){switch(E.nextAddress){case 1:return e=Ge.checkArgs(b,{db:"string",type:"string|undefined",name:"string|undefined",ref:"string|undefined",commit:"string|undefined"},function(F){return F.type&&F.name||F.commit?null:{error:"Eiter .type + .name or .commit needed!"}}),
m=e.db,a=e.type,g=e.name,l=e.ref,r=e.commit,E.yield(Ge.ObjectDB.find(m),2);case 2:v=E.yieldResult;l=l||"HEAD";if(!v)throw Error("db "+m+" does not exist");if(r){E.jumpTo(3);break}return E.yield(v.versionGraph(a,g),4);case 4:y=E.yieldResult;if(!y)throw Error("Unknown object "+a+"/"+g);r=y.refs[l];if(!r)throw Error("Cannot find commit for ref "+l+" of "+a+"/"+g);case 3:return E.yield(v.getCommit(r),5);case 5:A=E.yieldResult;if(!A)throw Error("Cannot find commit "+r);return E.return(v.loadSnapshot(void 0,
void 0,A))}})},revert:function(b){var e,m,a,g,l,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){if(1==y.nextAddress)return e=Ge.checkArgs(b,{db:"string",type:"string",name:"string",ref:"string|undefined",toCommitId:"string"}),m=e.db,a=e.type,g=e.name,l=e.ref,r=e.toCommitId,y.yield(Ge.ObjectDB.find(m),2);v=y.yieldResult;l||(l="HEAD");return y.return(v.revert(a,g,l,r))})},commit:function(b){var e,m,a,g,l,r,v,y,A,E;return $jscomp.asyncExecutePromiseGeneratorProgram(function(F){if(1==
F.nextAddress)return e=Ge.checkArgs(b,{db:"string",type:"string",name:"string",ref:"string|undefined",snapshot:"object|string|undefined",preview:"string|undefined",commitSpec:"object",expectedParentCommit:"string|undefined"}),m=e.db,a=e.type,g=e.name,l=e.ref,r=e.expectedParentCommit,v=e.commitSpec,y=e.snapshot,A=e.preview,F.yield(Ge.ObjectDB.find(m),2);E=F.yieldResult;l||(l="HEAD");return F.return(E.commit(a,g,y,v,A,l,r))})},exportToSpecs:function(b){var e,m,a,g;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){if(1==
l.nextAddress)return e=Ge.checkArgs(b,{db:"string",nameAndTypes:"Array|undefined",includeDeleted:"boolean|undefined"}),m=e.db,a=e.nameAndTypes,l.yield(Ge.ObjectDB.find(m),2);g=l.yieldResult;if(!g)throw Error("db "+m+" does not exist");return l.return(g.exportToSpecs(a))})},exportToDir:function(b){var e,m,a,g,l,r,v,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(A){if(1==A.nextAddress)return e=Ge.checkArgs(b,{db:"string",url:"string",nameAndTypes:"Array|undefined",copyResources:"boolean|undefined",
includeDeleted:"boolean|undefined"}),m=e.db,a=e.url,g=e.nameAndTypes,l=e.copyResources,r=e.includeDeleted,A.yield(Ge.ObjectDB.find(m),2);v=A.yieldResult;if(!v)throw Error("db "+m+" does not exist");try{y=Ge.resource(a)}catch(E){y=Ge.resource(System.baseURL).join(a)}return A.return(v.exportToDir(y,g,l,r))})},importFromDir:function(b){var e,m,a,g,l,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){if(1==y.nextAddress)return e=Ge.checkArgs(b,{db:"string",url:"string",overwrite:"boolean|undefined",
copyResources:"boolean|undefined"}),m=e.db,a=e.url,g=e.overwrite,l=e.copyResources,y.yield(Ge.ObjectDB.find(m),2);r=y.yieldResult;if(!r)throw Error("db "+m+" does not exist");try{v=Ge.resource(a)}catch(A){v=Ge.resource(System.baseURL).join(a)}return y.return(r.importFromDir(v,g,l))})},importFromSpecs:function(b){var e,m,a,g,l,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){if(1==v.nextAddress)return e=Ge.checkArgs(b,{db:"string",specs:"object",overwrite:"boolean|undefined",copyResources:"boolean|undefined"}),
m=e.db,a=e.specs,g=e.overwrite,l=e.copyResources,v.yield(Ge.ObjectDB.find(m),2);r=v.yieldResult;if(!r)throw Error("db "+m+" does not exist");return v.return(r.importFromSpecs(a,g,l))})},importFromResource:function(b){var e,m,a,g,l,r,v,y,A;return $jscomp.asyncExecutePromiseGeneratorProgram(function(E){if(1==E.nextAddress)return e=Ge.checkArgs(b,{db:"string",type:"string",name:"string",url:"string",commitSpec:"object",purgeHistory:"boolean|undefined"}),m=e.db,a=e.type,g=e.name,l=e.url,r=e.commitSpec,
v=e.purgeHistory,E.yield(Ge.ObjectDB.find(m),2);y=E.yieldResult;if(!y)throw Error("db "+m+" does not exist");try{A=Ge.resource(l)}catch(F){A=Ge.resource(System.baseURL).join(l)}return E.return(y.importFromResource(a,g,A,r,v))})},delete:function(b){var e,m,a,g,l,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){if(1==v.nextAddress)return e=Ge.checkArgs(b,{db:"string",type:"string",name:"string",dryRun:"boolean|undefined"}),m=e.db,a=e.type,g=e.name,l=e.dryRun,v.yield(Ge.ObjectDB.find(m),
2);r=v.yieldResult;return v.return(r.delete(a,g,"undefined"===typeof l||l))})},deleteCommit:function(b){var e,m,a,g,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){if(1==r.nextAddress)return e=Ge.checkArgs(b,{db:"string",commit:"string",dryRun:"boolean|undefined"}),m=e.db,a=e.commit,g=e.dryRun,r.yield(Ge.ObjectDB.find(m),2);l=r.yieldResult;return r.return(l.deleteCommit(a,"undefined"===typeof g||g))})},fetchConflicts:function(b){var e,m,a,g,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){if(1==
r.nextAddress)return e=Ge.checkArgs(b,{db:"string",includeDocs:"boolean|undefined",only:"object|undefined"}),m=e.db,a=e.includeDocs,g=e.only,r.yield(Ge.ObjectDB.find(m),2);l=r.yieldResult;return r.return(l.getConflicts(a,g))})},resolveConflict:function(b){var e,m,a,g,l,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){if(1==y.nextAddress)return e=Ge.checkArgs(b,{db:"string",id:"string",kind:"string",delete:"Array",resolved:"object"}),m=e.db,a=e.resolved,g=e.delete,l=e.kind,r=e.id,
y.yield(Ge.ObjectDB.find(m),2);v=y.yieldResult;return y.return(v.resolveConflict({resolved:a,delete:g,kind:l,id:r}))})},fetchDiff:function(b){var e,m,a,g;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){if(1==l.nextAddress)return e=Ge.checkArgs(b,{db:"string",otherDB:"string"}),m=e.db,a=e.otherDB,l.yield(Ge.ObjectDB.find(m),2);g=l.yieldResult;return l.return(g.getDiff(a))})},synchronize:function(b){var e,m,a,g,l,r,v,y,A,E,F,H,I;return $jscomp.asyncExecutePromiseGeneratorProgram(function(M){switch(M.nextAddress){case 1:return e=
Ge.checkArgs(b,{db:"string",otherDB:"string",otherDBSnapshotLocation:"string|undefined",onlyTypesAndNames:"object|undefined",method:"string|undefined"}),m=e.db,a=e.otherDB,g=e.otherDBSnapshotLocation,l=e.onlyTypesAndNames,r=e.method,M.yield(Ge.ObjectDB.find(m),2);case 2:return g||(g=a.replace(/\/$/,"")+"/snapshots"),r||(r="replicateTo"),M.yield(Ge.ObjectDB.find(m),3);case 3:return v=M.yieldResult,M.yield(Ge.ObjectDB.named(a,{snapshotLocation:g}),4);case 4:return y=M.yieldResult,M.yield(y._commitDB(),
5);case 5:return A=M.yieldResult,M.yield(y._versionDB(),6);case 6:return E=M.yieldResult,F=y.snapshotLocation,H={replicationFilter:l?{onlyTypesAndNames:l}:void 0,retry:!0,live:!0},I=v[r](A,E,F,H),M.yield(I.whenPaused(),7);case 7:return M.yield(I.safeStop(),8);case 8:return M.yield(I.waitForIt(),9);case 9:return M.return(Ge.obj.select(I,["state","method","conflicts","errors","changesByTypeAndName"]))}})}};Ge.ObjectDBInterface=wB;Ge.ObjectDBInterface=wB;Ge.ObjectDBInterface=wB;var sk=function(b){this.serverURL=
b=void 0===b?document.location.origin+"/objectdb/":b};sk.prototype._processResponse=function(b){var e,m,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(g){if(1==g.nextAddress)return e=b.headers.get("content-type"),g.yield(b.text(),2);m=g.yieldResult;if("application/json"===e)try{a=JSON.parse(m)}catch(l){}if(!b.ok||a&&a.error)throw Error(a&&a.error||m||b.statusText);return g.return(a||m)})};sk.prototype._GET=function(b,e){e=void 0===e?{}:e;var m=this,a,g,l,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){return 1==
v.nextAddress?(a=Object.keys(e).map(function(y){var A=e[y];"object"===typeof A&&(A=JSON.stringify(A));return y+"="+encodeURIComponent(A)}).join("&"),g=m.serverURL+b+"?"+a,l=m,r=l._processResponse,v.yield(fetch(g),2)):v.return(r.call(l,v.yieldResult))})};sk.prototype._POST=function(b,e){e=void 0===e?{}:e;var m=this,a,g,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){return 1==r.nextAddress?(a=m.serverURL+b,g=m,l=g._processResponse,r.yield(fetch(a,{method:"POST",body:JSON.stringify(e),
headers:{"content-type":"application/json"}}),2)):r.return(l.call(g,r.yieldResult))})};sk.prototype.describe=function(b){var e=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){return m.return(e._GET("describe",b))})};sk.prototype.ensureDB=function(b){var e=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){return m.return(e._POST("ensureDB",b))})};sk.prototype.destroyDB=function(b){var e=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){return m.return(e._POST("destroyDB",
b))})};sk.prototype.fetchCommits=function(b){var e=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){return m.return(e._GET("fetchCommits",b))})};sk.prototype.fetchVersionGraph=function(b){var e=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){return m.return(e._GET("fetchVersionGraph",b))})};sk.prototype.exists=function(b){var e=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){return m.return(e._GET("exists",b))})};sk.prototype.fetchLog=function(b){var e=
this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){return m.return(e._GET("fetchLog",b))})};sk.prototype.fetchSnapshot=function(b){var e=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){return m.return(e._GET("fetchSnapshot",b))})};sk.prototype.revert=function(b){var e=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){return m.return(e._POST("revert",b))})};sk.prototype.commit=function(b){var e=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){return m.return(e._POST("commit",
b))})};sk.prototype.exportToSpecs=function(b){var e=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){return m.return(e._GET("exportToSpecs",b))})};sk.prototype.exportToDir=function(b){var e=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){return m.return(e._POST("exportToDir",b))})};sk.prototype.importFromDir=function(b){var e=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){return m.return(e._POST("importFromDir",b))})};sk.prototype.importFromSpecs=
function(b){var e=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){return m.return(e._POST("importFromSpecs",b))})};sk.prototype.importFromResource=function(b){var e=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){return m.return(e._POST("importFromResource",b))})};sk.prototype.delete=function(b){var e=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){return m.return(e._POST("delete",b))})};sk.prototype.deleteCommit=function(b){var e=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){return m.return(e._POST("deleteCommit",
b))})};sk.prototype.fetchConflicts=function(b){var e=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){return m.return(e._GET("fetchConflicts",b))})};sk.prototype.resolveConflict=function(b){var e=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){return m.return(e._POST("resolveConflict",b))})};sk.prototype.fetchDiff=function(b){var e=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){return m.return(e._GET("fetchDiff",b))})};sk.prototype.synchronize=
function(b){var e=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){return m.return(e._POST("synchronize",b))})};Ge.ObjectDBHTTPInterface=sk;Ge.default=$h;var tk=lively.FreezerRuntime.recorderFor("lively.storage/storage-resource.js");tk.applyExclude=function(b,e){return e?"string"===typeof e?!b.url.includes(e):"function"===typeof e?!e(b):e instanceof RegExp?!e.test(b.url):!0:!0};tk.Resource=Tg;tk.Database=rh;tk.debug=!1;tk.slashRe=/\//g;var DV=function(){return tk.Database.apply(this,
arguments)||this};$jscomp.inherits(DV,tk.Database);DV.ensureDB=function(b,e){return tk.Database.ensureDB.call(this,"lively.storage-"+b,e)};tk.StorageDatabase=DV;var vr=function(){return tk.Resource.apply(this,arguments)||this};$jscomp.inherits(vr,tk.Resource);vr.prototype.read=function(){var b=this,e,m;return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){if(1==a.nextAddress)return tk.debug&&console.log("["+b+"] read"),a.yield(b.db.get(b.pathWithoutQuery()),2);m=(e=a.yieldResult)&&e.content;
return a.return(m?"string"===typeof m?m:JSON.stringify(m):"")})};vr.prototype.readJson=function(){var b=this,e;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){if(1==m.nextAddress)return m.yield(b.read(),2);e=m.yieldResult;return m.return("string"===typeof e?JSON.parse(e):e)})};vr.prototype.write=function(b){var e=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){if(1==m.nextAddress){tk.debug&&console.log("["+e+"] write");b||(b="");if(e.isDirectory())throw Error("Cannot write into a directory! ("+
e.url+")");return m.yield(e.db.update(e.pathWithoutQuery(),function(a){if(a&&a.isDirectory)throw Error(e.url+" already exists and is a directory (cannot write into it!)");var g=Date.now();return a?Object.assign({},a,{lastModified:g,size:b.length,content:b}):{etag:void 0,type:void 0,contentType:void 0,user:void 0,group:void 0,mode:void 0,lastModified:g,created:g,size:"string"===typeof b?b.length:0,content:b}}),2)}return m.return(e)})};vr.prototype.writeJson=function(b){return this.write(b)};vr.prototype.mkdir=
function(){var b=this,e,m;return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){if(1==a.nextAddress){tk.debug&&console.log("["+b+"] mkdir");if(!b.isDirectory())throw Error("Cannot mkdir a file! ("+b.url+")");return a.yield(b.db.get(b.pathWithoutQuery()),2)}if(3!=a.nextAddress){if(e=a.yieldResult){if(!e.isDirectory)throw Error(b.url+" already exists and is a file (cannot mkdir it!)");return a.return(b)}m=Date.now();return a.yield(b.db.set(b.pathWithoutQuery(),{etag:void 0,type:void 0,contentType:void 0,
user:void 0,group:void 0,mode:void 0,lastModified:m,created:m,isDirectory:!0}),3)}return a.return(b)})};vr.prototype.exists=function(){var b=this,e;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){if(1==m.nextAddress)return tk.debug&&console.log("["+b+"] exists"),(e=b.isRoot())?m.jumpTo(2):m.yield(b.db.get(b.pathWithoutQuery()),3);2!=m.nextAddress&&(e=!!m.yieldResult);return m.return(e)})};vr.prototype.remove=function(){var b=this,e,m,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(g){return 1==
g.nextAddress?(tk.debug&&console.log("["+b+"] remove"),e=b.pathWithoutQuery(),m=b.db,g.yield(m.docList({startkey:e,endkey:e+"\uffff"}),2)):3!=g.nextAddress?(a=g.yieldResult,g.yield(m.setDocuments(a.map(function(l){return{_id:l.id,_rev:l.rev,_deleted:!0}})),3)):g.return(b)})};vr.prototype.readProperties=function(){tk.debug&&console.log("["+this+"] readProperties");return this.db.get(this.pathWithoutQuery())};vr.prototype.dirList=function(b,e){b=void 0===b?1:b;e=void 0===e?{}:e;var m=this,a,g,l,r,v,
y,A,E,F,H,I,M,N,W,X;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ea){if(1==ea.nextAddress){tk.debug&&console.log("["+m+"] dirList");if(!m.isDirectory())return ea.return(m.asDirectory().dirList(b,e));a=e;g=a.exclude;l=m.pathWithoutQuery();r=[];return ea.yield(m.db.getAll({startkey:l,endkey:l+"\uffff"}),2)}v=ea.yieldResult;"infinity"===b&&(b=Infinity);y={};for(A=0;A<v.length;y={$jscomp$loop$prop$dirToChild$2220:y.$jscomp$loop$prop$dirToChild$2220},A++)if(F=E=v[A],H=F._id,H.startsWith(l)&&
l!==H)if(I=H.slice(l.length),M=I.includes("/")?I.match(tk.slashRe).length+1:1,M>b)y.$jscomp$loop$prop$dirToChild$2220=m.join(I.split("/").slice(0,b).join("/")+"/"),r.some(function(Aa){return function(Ma){return Ma.equals(Aa.$jscomp$loop$prop$dirToChild$2220)}}(y))||r.push(y.$jscomp$loop$prop$dirToChild$2220);else if(N=m.join(I),!g||tk.applyExclude(N,g))for(r.push(N),W="created lastModified mode group user contentType type etag size".split(" "),X=0;X<W.length;X++)N[W[X]]=E[W[X]];return ea.return(r)})};
$jscomp.global.Object.defineProperties(vr.prototype,{canDealWithJSON:{configurable:!0,enumerable:!0,get:function(){return!0}},db:{configurable:!0,enumerable:!0,get:function(){return this._db||(this._db=tk.StorageDatabase.ensureDB(this.host()))}}});tk.LivelyStorageResource=vr;var EV={name:"lively.storage",matches:function(b){return b.startsWith("lively.storage:")},resourceClass:tk.LivelyStorageResource};tk.resourceExtension=EV;tk.resourceExtension=EV;tk.resourceExtension=EV;tk.registerExtension=w;
tk.registerExtension(tk.resourceExtension);tk.default=vr;var Ut=lively.FreezerRuntime.recorderFor("lively.storage/index.js");Ut.default=rh;Ut.Database=rh;Ut.ObjectDB=$h;Ut.ObjectDBInterface=wB;Ut.ObjectDBHTTPInterface=sk;Ut.ObjectDB=$h;Ut.ObjectDB=$h;Ut.ObjectDBInterface=wB;Ut.ObjectDBInterface=wB;Ut.ObjectDBHTTPInterface=sk;Ut.ObjectDBHTTPInterface=sk;var qqa=Object.freeze({__proto__:null,Database:rh,ObjectDB:$h,ObjectDBInterface:wB,ObjectDBHTTPInterface:sk}),lh=lively.FreezerRuntime.recorderFor("lively.morphic/morphicdb/db.js");
lh.convertToSerializableCommit=CS;lh.ensureCommitInfo=sG;lh.ObjectDBHTTPInterface=sk;lh.Database=rh;lh.loadMorphFromSnapshot=Uu;lh.createMorphSnapshot=aA;lh.resource=la;lh.obj=Ag;lh.Path=Ah;lh.arr=$f;lh.string=pi;lh.morphicDBs=lh.morphicDBs||(lh.morphicDBs=new Map);lh.defaultServerURL=("undefined"!==typeof document?document.location.origin:"http://localhost:9001")+"/objectdb/";lh.convertToSerializableCommit=CS;lh.convertToSerializableCommit=CS;lh.ensureCommitInfo=sG;lh.ensureCommitInfo=sG;var FV=
function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/morphicdb/db.js"),m=e.hasOwnProperty("MorphicDB")&&"function"===typeof e.MorphicDB?e.MorphicDB:e.MorphicDB=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return dc(m,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a,g){var l=g.snapshotLocation;g=g.serverURL;this.name=a;this.serverURL=g;this.snapshotLocation=l||a+"/snapshots/";this.httpDB=
new lh.ObjectDBHTTPInterface(g);this._initialized=!1}},{key:"__serialize__",value:function(){return{__expr__:'MorphicDB.named("'+this.name+'", {snapshotLocation: "'+this.snapshotLocation+'", serverURL: "'+this.serverURL+'"})',bindings:{"lively.morphic/morphicdb/index.js":["MorphicDB"]}}}},{key:"initializeIfNecessary",value:function(){var a=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(g){if(1==g.nextAddress)return a._initialized?g.return():g.yield(a.ensureDB(),2);a._initialized=
!0;g.jumpToEnd()})}},{key:"snapshotResourceFor",value:function(a){var g=a.content.slice(0,2);a=a.content.slice(2);return lh.resource(System.decanonicalize(this.snapshotLocation)).join(g+"/"+a+".json")}},{key:"ensureDB",value:function(){return this.httpDB.ensureDB({db:this.name,snapshotLocation:this.snapshotLocation})}},{key:"destroyDB",value:function(){this._initialized=!1;return this.httpDB.destroyDB({db:this.name})}},{key:"latestCommits",value:function(a,g){a=void 0===a?"world":a;g=void 0===g?!1:
g;var l=this,r,v,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(A){if(1==A.nextAddress)return A.yield(l.initializeIfNecessary(),2);r=l;v=r.name;y={};return A.return(l.httpDB.fetchCommits({db:v,type:a,ref:"HEAD",knownCommitIds:y,includeDeleted:g}))})}},{key:"fetchCommit",value:function(a,g,l){var r=this,v,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(A){if(1==A.nextAddress)return A.yield(r.initializeIfNecessary(),2);if(3!=A.nextAddress)return v=[{type:a,name:g,ref:l}],
A.yield(r.httpDB.fetchCommits({db:r.name,ref:l,type:a,typesAndNames:v,knownCommitIds:{}}),3);y=A.yieldResult;return A.return(lh.convertToSerializableCommit(y[0]))})}},{key:"fetchSnapshot",value:function(a,g,l,r){var v=this,y=arguments,A,E,F;return $jscomp.asyncExecutePromiseGeneratorProgram(function(H){if(1==H.nextAddress)return A=a,1===y.length&&A.type&&A.name&&(a=A.type,g=A.name,l=A._id),H.yield(v.initializeIfNecessary(),2);E=v;F=E.name;return H.return(v.httpDB.fetchSnapshot({db:F,type:a,name:g,
ref:r,commit:l}))})}},{key:"exists",value:function(a,g,l){var r=this,v,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(A){if(1==A.nextAddress)return A.yield(r.initializeIfNecessary(),2);v=r;y=v.name;return A.return(r.httpDB.exists({db:y,type:a,name:g,ref:l}))})}},{key:"history",value:function(a,g){var l=this,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){if(1==y.nextAddress)return y.yield(l.initializeIfNecessary(),2);r=l;v=r.name;return y.return(l.httpDB.fetchVersionGraph({db:v,
type:a,name:g}))})}},{key:"log",value:function(a,g,l,r){l=void 0===l?!1:l;var v=this,y,A;return $jscomp.asyncExecutePromiseGeneratorProgram(function(E){return 1==E.nextAddress?E.yield(v.initializeIfNecessary(),2):3!=E.nextAddress?(y=v,A=y.name,E.yield(v.httpDB.fetchLog({db:A,commit:a,limit:g,includeCommits:l,knownCommitIds:r}),3)):E.return(E.yieldResult.map(lh.convertToSerializableCommit))})}},{key:"revert",value:function(a,g,l,r){r=void 0===r?"HEAD":r;var v=this,y,A;return $jscomp.asyncExecutePromiseGeneratorProgram(function(E){if(1==
E.nextAddress)return E.yield(v.initializeIfNecessary(),2);y=v;A=y.name;return E.return(v.httpDB.revert({db:A,type:a,name:g,toCommitId:l,ref:r}))})}},{key:"snapshotAndCommit",value:function(a,g,l,r,v,y,A){var E=this,F,H;return $jscomp.asyncExecutePromiseGeneratorProgram(function(I){if(1==I.nextAddress)return I.yield(lh.createMorphSnapshot(l,r),2);if(3!=I.nextAddress)return F=I.yieldResult,I.yield(E.commit(a,g,F,v,y,A),3);H=I.yieldResult;H=lh.convertToSerializableCommit(H);l.changeMetaData("commit",
lh.obj.dissoc(H,["preview"]),!0,!1);return I.return(H)})}},{key:"commit",value:function(a,g,l,r,v,y){var A=this,E=arguments,F,H,I;return $jscomp.asyncExecutePromiseGeneratorProgram(function(M){if(1==M.nextAddress)return F=a,1===E.length&&F.type&&F.name&&(a=F.type,g=F.name,l=F.snapshot||F.content,r=lh.obj.dissoc(F,["snapshot","_rev","_id","ancestors","deleted"]),y=F._id),M.yield(A.initializeIfNecessary(),2);H=A;I=H.name;return M.return(A.httpDB.commit({db:I,type:a,name:g,ref:v,expectedParentCommit:y,
commitSpec:r,snapshot:l}))})}},{key:"load",value:function(a,g,l,r,v){var y=this,A,E,F,H,I,M,N;return $jscomp.asyncExecutePromiseGeneratorProgram(function(W){switch(W.nextAddress){case 1:"object"===typeof a?r=a:A=a;E=r;if(!E)return W.yield(y.fetchCommit(A,g,v),6);if("string"!==typeof E){W.jumpTo(3);break}F=$jscomp;H=F.makeIterator;return W.yield(y.log(E,1,!0),5);case 5:I=H.call(F,W.yieldResult);E=I.next().value;W.jumpTo(3);break;case 6:E=W.yieldResult;case 3:return W.yield(y.fetchSnapshot(void 0,void 0,
E._id),7);case 7:return M=W.yieldResult,W.yield(lh.loadMorphFromSnapshot(M,l),8);case 8:return N=W.yieldResult,E=lh.convertToSerializableCommit(E),N.changeMetaData("commit",lh.obj.dissoc(E,["preview"]),!0,!1),W.return(N)}})}},{key:"fetchDiff",value:function(a){var g=this,l,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){if(1==v.nextAddress)return v.yield(g.initializeIfNecessary(),2);l=g;r=l.name;return v.return(g.httpDB.fetchDiff({db:r,otherDB:a}))})}},{key:"fetchConflicts",value:function(a,
g){var l=this,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){if(1==y.nextAddress)return y.yield(l.initializeIfNecessary(),2);r=l;v=r.name;return y.return(l.httpDB.fetchConflicts({db:v,includeDocs:a,only:g}))})}},{key:"resolveConflict",value:function(a){var g=this,l,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){if(1==v.nextAddress)return v.yield(g.initializeIfNecessary(),2);l=g;r=l.name;return v.return(g.httpDB.resolveConflict(Object.assign({db:r},a)))})}},{key:"synchronize",
value:function(a){var g=a.method,l=a.otherDB,r=a.otherDBSnapshotLocation,v=a.onlyTypesAndNames,y=this,A,E;return $jscomp.asyncExecutePromiseGeneratorProgram(function(F){if(1==F.nextAddress)return F.yield(y.initializeIfNecessary(),2);A=y;E=A.name;return F.return(y.httpDB.synchronize({db:E,method:g,otherDB:l,otherDBSnapshotLocation:r,onlyTypesAndNames:v}))})}},{key:"softDelete",value:function(a,g,l,r,v){var y=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(A){return A.return(y.commit(a,
g,void 0,l,r,v))})}},{key:"delete",value:function(a,g,l){l=void 0===l?!0:l;var r=this,v,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(A){if(1==A.nextAddress)return A.yield(r.initializeIfNecessary(),2);v=r;y=v.name;return A.return(r.httpDB.delete({db:y,type:a,name:g,dryRun:l}))})}},{key:"deleteCommit",value:function(a,g){g=void 0===g?!0:g;var l=this,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){if(1==y.nextAddress)return y.yield(l.initializeIfNecessary(),2);r=l;
v=r.name;return y.return(l.httpDB.deleteCommit({db:v,commit:a,dryRun:g}))})}},{key:"codeSearchInPackages",value:function(a,g,l,r){g=void 0===g?"part":g;var v=this,y,A,E,F,H,I,M;return $jscomp.asyncExecutePromiseGeneratorProgram(function(N){switch(N.nextAddress){case 1:return N.yield(v.latestCommits(g),2);case 2:y=N.yieldResult,A=[],E=0,"function"===typeof r&&(y=y.filter(r)),F=$jscomp.makeIterator(y),H=F.next();case 3:if(H.done){N.jumpTo(5);break}I=H.value;"function"===typeof l&&l(I.name,E++,y.length);
return N.yield(v._textSearchInSnapshotOfCommit(a,I),6);case 6:M=N.yieldResult;M.length&&A.push.apply(A,$jscomp.arrayFromIterable(M));H=F.next();N.jumpTo(3);break;case 5:return N.return(A)}})}},{key:"_textSearchInSnapshotOfCommit",value:function(a,g,l){var r=this,v,y,A,E;return $jscomp.asyncExecutePromiseGeneratorProgram(function(F){if(1==F.nextAddress)return v=g,y=v._id,(A=l)?F.jumpTo(2):F.yield(r.fetchSnapshot(void 0,void 0,y),3);2!=F.nextAddress&&(A=F.yieldResult);E=A;return F.return((new lh.SnapshotPackageHelper(E)).textSearch(a,
g))})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"MorphicDB"}},{key:"default",get:function(){return this.named("lively.morphic/objectdb/morphicdb",{serverURL:lh.defaultServerURL})}},{key:"named",value:function(a,g){var l=lh.morphicDBs.get(a);if(l)return l;if(!g.serverURL)throw Error("Needs serverURL!");g=new this(a,g);lh.morphicDBs.set(a,g);return g}},{key:"wellKnownMorphicDBs",value:function(){var a=this,g,l,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){if(1==
v.nextAddress)return g=lh.Database.ensureDB("lively.morphic/morphicdb/well-known-morphic-dbs"),v.yield(g.getAll(),2);l=v.yieldResult;r=l.reduce(function(y,A){var E={};return Object.assign(y,(E[A._id]=a.named(A.name,{serverURL:A.serverURL,snapshotLocation:A.snapshotLocation}),E))},{});r.default||(r.default=a.default);return v.return(r)})}},{key:"addWellKnownMorphicDB",value:function(a,g){var l,r,v,y,A;return $jscomp.asyncExecutePromiseGeneratorProgram(function(E){l=g;r=l.name;v=l.snapshotLocation;
y=l.serverURL;A=lh.Database.ensureDB("lively.morphic/morphicdb/well-known-morphic-dbs");return E.yield(A.set(a,{name:r,snapshotLocation:v,serverURL:y}),0)})}},{key:"removeWellKnownMorphicDB",value:function(a){var g;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){g=lh.Database.ensureDB("lively.morphic/morphicdb/well-known-morphic-dbs");return l.yield(g.remove(a),0)})}}],e,{pathInPackage:function(){return"morphicdb/db.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:1435,end:10019})}(void 0);FV=lh.MorphicDB;var Yw=Da("Z",FV),DN=function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/morphicdb/db.js"),m=e.hasOwnProperty("SnapshotPackageHelper")&&"function"===typeof e.SnapshotPackageHelper?e.SnapshotPackageHelper:e.SnapshotPackageHelper=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return dc(m,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){this.snapshot=a}},{key:"textSearch",value:function(a,g){var l=a&&a instanceof RegExp,r=[];if(!a)return r;for(var v={},y=$jscomp.makeIterator(this.filesInPackages()),A=y.next();!A.done;v={$jscomp$loop$prop$file$2222:v.$jscomp$loop$prop$file$2222},A=y.next()){v.$jscomp$loop$prop$file$2222=A.value;A=v.$jscomp$loop$prop$file$2222.get(this.snapshot);var E=lh.string.lineIndexComputer(A),F=lh.string.lineRanges(A);
if(l)A=lh.string.reMatches(A,a),A.length&&r.push.apply(r,$jscomp.arrayFromIterable(A.map(function(ea){return function(Aa){return Object.assign(Aa,{commit:g,file:ea.$jscomp$loop$prop$file$2222})}}(v))));else for(var H=0,I=0;0<=(H=A.indexOf(a));){var M=H+I,N=M+a.length,W=E(M),X=A.slice.apply(A,$jscomp.arrayFromIterable(F[W]));r.push({match:a,start:M,end:N,length:a.length,line:W,lineString:X,commit:g,file:v.$jscomp$loop$prop$file$2222});I+=H+a.length;A=A.slice(H+a.length)}}return r}},{key:"filesInPackages",
value:function(){function a(r,v,y,A,E){E=void 0===E?[]:E;if(r["package.json"]&&"string"===typeof r["package.json"])try{var F=JSON.parse(r["package.json"]);A={url:y,path:v,name:F.name||lh.arr.last(v)}}catch(I){}F=[];for(var H in r)"string"===typeof r[H]?E.push({path:v.concat(H),url:lh.string.joinPath(y,H),package:A,get:function(I){return lh.Path(this.path).get(I.packages)},set:function(I,M){lh.Path(this.path).set(I.packages,M)}}):F.push(H);F.forEach(function(I){return a(r[I],v.concat(I),lh.string.joinPath(y,
I),A,E)});return E}var g=[],l;for(l in this.snapshot.packages)a(this.snapshot.packages[l],[l],l,null,g);return g}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"SnapshotPackageHelper"}}],e,{pathInPackage:function(){return"morphicdb/db.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:10029,end:13038})}(void 0);lh.SnapshotPackageHelper=
DN;lh.SnapshotPackageHelper=DN;lh.SnapshotPackageHelper=DN;lh.default=FV;var kf=lively.FreezerRuntime.recorderFor("lively.morphic/style-guide.js");kf.arr=$f;kf.properties=up;kf.Path=Ah;kf.promise=zh;kf.obj=Ag;kf.registerExtension=w;kf.Resource=Tg;kf.resource=la;kf.pt=xi;kf.MorphicDB=Yw;kf.ObjectPool=Vj;kf.normalizeOptions=nt;kf.deserializeMorph=vF;kf.loadPackagesAndModulesOfSnapshot=wF;kf.subscribeOnce=function(b,e,m){Yo(m).emitter.once(b,e);return e};var EN=function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/style-guide.js"),
m=e.hasOwnProperty("ComponentPolicy")&&"function"===typeof e.ComponentPolicy?e.ComponentPolicy:e.ComponentPolicy=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return dc(m,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a,g){this.derivedMorph=a;this._overriddenProps=new WeakMap;if(g.isMorph||"string"==typeof g)this.auto=g,"string"==typeof g&&(this.auto.isComponent=!0);else{a=g.click;var l=g.auto,r=g.hover,
v=void 0===g.light?{}:g.light;g=void 0===g.dark?{}:g.dark;v&&(this.light=v);g&&(this.dark=g);a&&(this.click=a);l&&(this.auto=l);r&&(this.hover=r);this.resolveMasterComponents()}}},{key:"uses",value:function(a){return[this.auto,this.click,this.hover].includes(a)}},{key:"spec",value:function(){return kf.obj.select(this,["auto","click","hover","light","dark"])}},{key:"equals",value:function(a){if(!a)return!1;for(var g=$jscomp.makeIterator(["auto","click","hover"]),l=g.next();!l.done;l=g.next())if(l=
l.value,"string"==typeof a[l]){if(this.getResourceUrlFor(this[l])!=a[l])return!1}else if((this[l]||null)!=(a[l]||null))return!1;return!0}},{key:"getManagedMorphs",value:function(){var a=this,g=[];this.derivedMorph.withAllSubmorphsDo(function(l){a.managesMorph(l)&&0<Object.keys(a._overriddenProps.get(l)).filter(function(r){return"_rev"!=r}).length&&g.push([l,Object.keys(a._overriddenProps.get(l))])});return g}},{key:"__dont_serialize__",get:function(){var a=["_overriddenProps","_applying","_appliedMaster",
"_hasUnresolvedMaster"];kf.obj.isEmpty(this.dark)&&a.push("dark");kf.obj.isEmpty(this.light)&&a.push("light");return a}},{key:"__serialize__",value:function(){var a={};this.auto&&(a.auto=this.getResourceUrlFor(this.auto));this.click&&(a.click=this.getResourceUrlFor(this.click));this.hover&&(a.hover=this.getResourceUrlFor(this.hover));return{__expr__:"("+JSON.stringify(a)+")"}}},{key:"__after_deserialize__",value:function(a,g){this._overriddenProps=new WeakMap;delete this.managedMorphs;this.resolveMasterComponents()}},
{key:"whenApplied",value:function(){var a=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(g){return 1==g.nextAddress?g.yield(a._hasUnresolvedMaster,2):3!=g.nextAddress?g.yield(kf.promise.waitFor(1E3,function(){return a._appliedMaster}),3):g.return(!0)})}},{key:"getResourceUrlFor",value:function(a){return a?a._resourceHandle?a._resourceHandle.url:void 0==a.name?null:"styleguide://"+(kf.Path("metadata.commit.name").get($world)||$world.name)+"/"+a.name:null}},{key:"resolveMasterComponents",
value:function(){var a=this,g,l,r,v,y,A,E,F,H,I,M,N,W,X,ea,Aa;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ma){switch(Ma.nextAddress){case 1:g=kf.promise.deferred(),a._hasUnresolvedMaster=g.promise,l=a,r=void 0===l.light?{}:l.light,v=void 0===l.dark?{}:l.dark,y=["auto","click","hover"],A=[],Ma.setCatchFinallyBlocks(2),E=$jscomp.makeIterator(y),F=E.next();case 4:if(F.done){Ma.leaveTryBlock(3);break}H=F.value;if("string"!=typeof a[H]){Ma.jumpTo(7);break}I=a;M=H;return Ma.yield(kf.resource(a[H]).read(),
8);case 8:I[M]=Ma.yieldResult;case 7:if("string"!=typeof r[H]){Ma.jumpTo(9);break}N=r;W=H;return Ma.yield(kf.resource(r[H]).read(),10);case 10:N[W]=Ma.yieldResult;case 9:if("string"!=typeof v[H]){Ma.jumpTo(11);break}X=v;ea=H;return Ma.yield(kf.resource(v[H]).read(),12);case 12:X[ea]=Ma.yieldResult;case 11:A.push(a[H],r[H],v[H]);F=E.next();Ma.jumpTo(4);break;case 2:throw Aa=Ma.enterCatchBlock(),Error("Encountered invalid master component reference: "+Aa.message);case 3:kf.arr.compact(A).forEach(function(K){K.isComponent||
(K.isComponent=!0)}),g.resolve(),a._hasUnresolvedMaster=!1,Ma.jumpToEnd()}})}},{key:"applyIfNeeded",value:function(a){var g=this;a=void 0===a?!1:a;if(this._hasUnresolvedMaster)return this._originalOpacity=this.derivedMorph.opacity,this.derivedMorph.withMetaDo({metaInteraction:!0},function(){[g.derivedMorph].concat($jscomp.arrayFromIterable(g.derivedMorph.ownerChain())).find(function(v){return v.isComponent})||(g.derivedMorph.opacity=0)}),this._hasUnresolvedMaster.then(function(){g.applyIfNeeded(a);
g.derivedMorph.withMetaDo({metaInteraction:!0},function(){g.derivedMorph.opacity=g._originalOpacity});delete g._originalOpacity;delete g._capturedExtents});var l=this.derivedMorph,r=this.determineMaster(l);r&&this._appliedMaster!=r&&(a=!0);r&&a&&(this.apply(l,r),this._appliedMaster=r)}},{key:"apply",value:function(a,g){var l=this;if(!this._applying){this._applying=!0;try{a.dontRecordChangesWhile(function(){var r=l.prepareSubmorphsToBeManaged(a,g);g.withAllSubmorphsDoExcluding(function(v){var y=v==
g,A=y?a:r[v.name];if(A)if(kf.obj.isArray(A)&&(A=A.pop()),v.master&&!y)A.master=v.master.spec(),A._requestMasterStyling=!0,l._overriddenProps.get(A).position||(A.position=v.position),l._overriddenProps.get(A).extent||(A.extent=v.extent);else{y=$jscomp.makeIterator(v.styleProperties);for(var E=y.next();!E.done;E=y.next())if(E=E.value,!l._overriddenProps.get(A)[E])if("layout"==E)A.layout&&v.layout&&A.layout.name()==v.layout.name()&&A.layout.equals(v.layout)||(A.layout=v.layout?v.layout.copy():void 0);
else{if(v==g){if("extent"==E&&!A.extent.equals(kf.pt(10,10))&&(!A.owner||A.owner.isWorld||A.ownerChain().find(function(F){return F.master&&F.master.managesMorph(A)})))continue;if("position"==E)continue}A.isLabel&&"extent"==E||["border","borderTop","borderBottom","borderRight","borderLeft"].includes(E)||(kf.obj.equals(A[E],v[E])||(A[E]=v[E]),["fixedHeight","fixedWidth"].includes(E)&&A._parametrizedProps&&A._parametrizedProps.extent&&(A.extent=A._parametrizedProps.extent))}A._parametrizedProps&&delete A._parametrizedProps;
l.reconcileSubmorphs(A,v)}},function(v){return g!=v&&v.master})})}finally{this._applying=!1,delete a._parametrizedProps}}}},{key:"clearOverriddenPropertiesFor",value:function(a,g){var l=this._overriddenProps.get(a);this._overriddenProps.set(a,kf.obj.dissoc(l,g))}},{key:"prepareSubmorphsToBeManaged",value:function(a,g){var l=this,r={};a.withAllSubmorphsDoExcluding(function(v){r[v.name]&&(kf.obj.isArray(r[v.name])?r[v.name].push(v):r[v.name]=[r[v.name],v]);r[v.name]=v},function(v){return v!=a&&v.master});
g.withAllSubmorphsDoExcluding(function(v){if(v=v==g?a:r[v.name])kf.obj.isArray(v)&&(v=v.pop()),l.prepareMorphToBeManaged(v)},function(v){return v!=g&&v.master});return r}},{key:"reconcileSubmorphs",value:function(a,g){}},{key:"managesMorph",value:function(a){return this._overriddenProps.has(a)}},{key:"propsToSerializeForMorph",value:function(a,g){if(!this.managesMorph(a))return g;for(var l=[],r=$jscomp.makeIterator(a.styleProperties),v=r.next();!v.done;v=r.next())v=v.value,this._overriddenProps.get(a)[v]||
!("position"==v&&a==this.derivedMorph||"extent"==v&&a==this.derivedMorph)&&l.push(v);return kf.arr.withoutAll(g,l)}},{key:"prepareMorphToBeManaged",value:function(a){if(!this._overriddenProps.has(a)){var g={},l;for(l in a._parametrizedProps)"__takenFromSnapshot__"!=l&&(g[l]=!0);this._overriddenProps.set(a,g)}}},{key:"determineMaster",value:function(a){var g=a.env.world.colorScheme,l=a.env.eventDispatcher.isMorphHovered(a);a=a.env.eventDispatcher.isMorphClicked(a);var r=this.getMasterForState(this,
{isHovered:l,isClicked:a});this.light&&"light"==g&&(r=this.getMasterForState(this.light,{isHovered:l,isClicked:a})||r);this.dark&&"dark"==g&&(r=this.getMasterForState(this.light,{isHovered:l,isClicked:a})||r);return r}},{key:"getMasterForState",value:function(a,g){var l=a.hover,r=a.click,v=g.isClicked;a=a.auto;if(g.isHovered)if(l)a=l;else for(g=a&&a.master;g;){if(g.hover){a=g.hover;break}g=g.auto}if(v)if(r)a=r;else for(r=a&&a.master;r;){if(r.click){a=r.click;break}r=r.auto}return a}},{key:"onMorphChange",
value:function(a,g){if(!this._applying&&!kf.Path("meta.metaInteraction").get(g)&&!["_rev","name","master"].includes(g.prop)&&("opacity"==g.prop&&delete this._originalOpacity,a.styleProperties.includes(g.prop)))if(this.managesMorph(a)){if(!a.master||a.master==this||["extent","position"].includes(g.prop))this._overriddenProps.get(a)[g.prop]=!0}else if(a._parametrizedProps)a._parametrizedProps[g.prop]=g.value;else{var l={};a._parametrizedProps=(l[g.prop]=g.value,l)}}}],[{key:Symbol.for("__LivelyClassName__"),
get:function(){return"ComponentPolicy"}},{key:"for",value:function(a,g){g=g.constructor===kf.ComponentPolicy?g:new this(a,g);a.master&&(g._overriddenProps=a.master._overriddenProps);return g}}],e,{pathInPackage:function(){return"style-guide.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:1144,end:17199})}(void 0);kf.ComponentPolicy=
EN;kf.ComponentPolicy=EN;kf.ComponentPolicy=EN;kf.styleGuideURLRe=/^styleguide:\/\/([^\/]+)\/(.*)$/;kf.fetchedSnapshots=kf.fetchedSnapshots||{};kf.objectPools=kf.objectPools||{};kf.resolvedMasters=kf.resolvedMasters||{};kf.modulesToLoad=kf.modulesToLoad||{};kf.li=kf.li||void 0;kf.localNamePromise=kf.localNamePromise||void 0;kf.masterComponentFetches=kf.masterComponentFetches||{};var m9=Da("bW",kf.resolvedMasters);kf.resolvedMasters=m9;kf.resolvedMasters=m9;(function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/style-guide.js"),
m=e.hasOwnProperty("StyleGuideResource")&&"function"===typeof e.StyleGuideResource?e.StyleGuideResource:e.StyleGuideResource=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return dc(m,b,[{key:"canDealWithJSON",get:function(){return!1}},{key:"componentName",get:function(){var a=this.url.match(kf.styleGuideURLRe);a=$jscomp.makeIterator(a);a.next();a.next();return a.next().value}},{key:"worldName",get:function(){var a=this.url.match(kf.styleGuideURLRe);
a=$jscomp.makeIterator(a);a.next();var g=a.next().value;a.next();return g}},{key:"dirList",value:function(a,g){var l=this,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){return l.worldName==$world.metadata.commit.name?v.return($world.withAllSubmorphsSelect(function(y){return y.isComponent})):(r=kf.resolvedMasters[l.worldName])?v.return(Object.values(r)):v.return([])})}},{key:"localWorldName",value:function(){var a;if(a=kf.Path("metadata.commit.name").get($world))return a;if(kf.localNamePromise)return kf.localNamePromise;
a=kf.promise.deferred();var g=a.resolve;kf.localNamePromise=a.promise;if("__newWorld__"==kf.resource(document.location.href).query().name)return g("__newWorld__"),kf.localNamePromise;kf.subscribeOnce("world/loaded",function(){g(kf.Path("metadata.commit.name").get($world))},System);return kf.localNamePromise}},{key:"fetchFromMasterDir",value:function(a,g){var l=a.join(this.worldName).join(g+".json");if(kf.masterComponentFetches[l.url])return kf.masterComponentFetches[l.url];kf.masterComponentFetches[l.url]=
function(){var r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){return 1==y.nextAddress?(r=kf,v=r.deserializeMorph,y.yield(l.readJson(),2)):y.return(v.call(r,y.yieldResult))})}();return kf.masterComponentFetches[l.url]}},{key:"read",value:function(){var a=this,g,l,r,v,y,A,E,F,H,I,M,N,W,X,ea,Aa;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ma){switch(Ma.nextAddress){case 1:g=a.componentName;if(l=kf.Path([a.worldName,a.componentName]).get(kf.resolvedMasters))return Ma.return(l);
if(!lively.FreezerRuntime){Ma.jumpTo(2);break}r=kf.resource(window.location);r.isFile()&&(r=r.parent());v=r.join("masters/");return Ma.yield(a.fetchFromMasterDir(v,g),3);case 3:l=Ma.yieldResult;case 2:if(lively.FreezerRuntime){Ma.jumpTo(4);break}kf.fetchedSnapshots[a.worldName]||(console.log("scheduling fetch of",a.worldName),A=kf.promise.deferred(),y=A.resolve,kf.fetchedSnapshots[a.worldName]=A.promise);return Ma.yield(a.localWorldName(),5);case 5:if(Ma.yieldResult==a.worldName){l="undefined"!==
typeof $world&&$world.getSubmorphNamed(g);if(!l)throw Error('Master component "'+g+'" can not be found in "'+a.worldName+'"');return Ma.return(l)}return y?(F=kf.MorphicDB.default,Ma.yield(F.exists("world",a.worldName),9)):Ma.yield(kf.fetchedSnapshots[a.worldName],8);case 8:E=Ma.yieldResult;Ma.jumpTo(7);break;case 9:if(Ma.yieldResult.exists)return Ma.yield(F.fetchSnapshot("world",a.worldName),15);H=kf.resource(System.baseURL).join("lively.morphic/styleguides").join(a.worldName+".json");return Ma.yield(H.exists(),
12);case 12:if(!Ma.yieldResult){y(null);Ma.jumpTo(11);break}return Ma.yield(H.readJson(),14);case 14:E=Ma.yieldResult;Ma.jumpTo(11);break;case 15:E=Ma.yieldResult;case 11:return Ma.yield(kf.loadPackagesAndModulesOfSnapshot(E),16);case 16:y(E);case 7:I=new kf.ObjectPool(kf.normalizeOptions({}));M=$jscomp.makeIterator(Object.entries(E.snapshot).find(function(K){K=$jscomp.makeIterator(K);K.next();K=K.next().value;return kf.Path("props.isComponent.value").get(K)&&kf.Path("props.name.value").get(K)==g})||
[]);N=M.next().value;if(!N)throw Error('Master component "'+g+'" can not be found in "'+a.worldName+'"');l=I.resolveFromSnapshotAndId(Object.assign({},E,{id:N}));case 4:kf.resolvedMasters[a.worldName]?kf.resolvedMasters[a.worldName][g]=l:(W={},kf.resolvedMasters[a.worldName]=(W[g]=l,W));l._resourceHandle=a;if(!l._pool.mastersInSubHierarchy){Ma.jumpTo(17);break}X=$jscomp.makeIterator(l._pool.mastersInSubHierarchy);ea=X.next();case 18:if(ea.done){Ma.jumpTo(20);break}Aa=ea.value;return Ma.yield(Aa.applyIfNeeded(!0),
21);case 21:Aa.derivedMorph.ownerChain().includes(l)||Aa.derivedMorph.requestMasterStyling();ea=X.next();Ma.jumpTo(18);break;case 20:delete l._pool;case 17:return Ma.return(Promise.resolve(l))}})}},{key:"write",value:function(a){return $jscomp.asyncExecutePromiseGeneratorProgram(function(g){throw Error("Master Components can not be written to!");})}},{key:"exists",value:function(){var a=this,g;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){g="undefined"!==typeof $world&&$world.getSubmorphNamed(a.morphName);
return l.return(g&&g.isComponent)})}},{key:"remove",value:function(){var a=this,g;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){if(g="undefined"!==typeof $world&&$world.getSubmorphNamed(a.morphName))g.isComponent=!1;return l.return(!0)})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"StyleGuideResource"}}],e,{pathInPackage:function(){return"style-guide.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:20803,end:25862})})(kf.Resource);var GV={name:"styleguide",matches:function(b){return b.match(kf.styleGuideURLRe)},resourceClass:kf.StyleGuideResource};kf.resourceExtension=GV;kf.resourceExtension=GV;kf.resourceExtension=GV;kf.registerExtension(kf.resourceExtension);(function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/style-guide.js"),m=e.hasOwnProperty("StyleGuide")&&"function"===typeof e.StyleGuide?e.StyleGuide:
e.StyleGuide=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return dc(m,b,void 0,void 0,e,{pathInPackage:function(){return"style-guide.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:26047,end:26536})})(void 0);var Gc=lively.FreezerRuntime.recorderFor("lively.morphic/morph.js");
Gc.generateUnfolded=function(b,e,m){e=void 0===e?["top","left","right","bottom"]:e;m=void 0===m?"core":m;var a={},g={};e=$jscomp.makeIterator(e);for(var l=e.next();!l.done;g={$jscomp$loop$prop$m$1090$2225:g.$jscomp$loop$prop$m$1090$2225},l=e.next())g.$jscomp$loop$prop$m$1090$2225=l.value,a[b+Gc.string.capitalize(g.$jscomp$loop$prop$m$1090$2225)]={group:m,derived:!0,generated:!0,after:[b],get:function(r){return function(){return this.getProperty(b)[r.$jscomp$loop$prop$m$1090$2225]}}(g),set:function(r){return function(v){var y=
{};this[b]=Object.assign({},this.getProperty(b),(y[r.$jscomp$loop$prop$m$1090$2225]=v,y))}}(g)};return a};Gc.Color=Fg;Gc.Line=An;Gc.Point=Lg;Gc.pt=xi;Gc.rect=zm;Gc.Rectangle=He;Gc.Transform=$k;Gc.string=pi;Gc.properties=up;Gc.obj=Ag;Gc.arr=$f;Gc.num=Nm;Gc.promise=zh;Gc.tree=wu;Gc.PropertyPath=Ah;Gc.signal=Wl;Gc.copy=Oz;Gc.deserializeSpec=Dp;Gc.ExpressionSerializer=jo;Gc.serializeSpec=Ao;Gc.getClassName=Wr;Gc.renderRootMorph=rw;Gc.ShadowObject=zs;Gc.AnimationQueue=lM;Gc.easings=rr;Gc.addOrChangeCSSDeclaration=
Yr;Gc.Icon=Np;Gc.morph=sa;Gc.newMorphId=Ta;Gc.MorphicEnv=qs;Gc.config=Dn;Gc.CommandHandler=$ka;Gc.KeyHandler=lU;Gc.findKeysForPlatform=Db;Gc.TargetScript=mU;Gc.copyMorph=JJ;Gc.ComponentPolicy=EN;Gc.defaultCommandHandler=new Gc.CommandHandler;var Ll=Da("ai",function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/morph.js"),m=e.hasOwnProperty("Morph")&&"function"===typeof e.Morph?e.Morph:e.Morph=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return dc(m,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){a||(a={});var g=a.env||Gc.MorphicEnv.default();this._env=g;this._rev=g.changeManager.revision;this._owner=null;this._dirty=!0;this._submorphOrderChanged=this._rendering=!1;this._id=Gc.newMorphId(Gc.getClassName(this));this._animationQueue=new Gc.AnimationQueue(this);this._cachedPaths={};this._pathDependants=[];this._tickingScripts=[];this._parametrizedProps=Gc.obj.select(a,Gc.arr.intersect(Object.keys(a),this.styleProperties));
this.initializeProperties(a);a.bounds&&(this.setBounds(a.bounds),this._parametrizedProps.extent=this.extent,this._parametrizedProps.position=this.position);if(void 0!=a.height||void 0!=a.width)this._parametrizedProps.extent=this.extent;a.layout&&(this.layout=a.layout);if("function"===typeof this.onLoad&&!this.isComponent)this.onLoad()}},{key:"__serialization_id_property__",get:function(){return"_id"}},{key:"__deserialize__",value:function(a,g,l,r){this._env=Gc.MorphicEnv.default();this._rev=a.rev;
this._owner=null;this._dirty=!0;this._submorphOrderChanged=this._rendering=!1;this._id=g.id;this._animationQueue=new Gc.AnimationQueue(this);this._cachedPaths={};this._pathDependants=[];this._tickingScripts=[];this._parametrizedProps=Gc.obj.select(a.props,Gc.arr.intersect(Object.keys(a.props),this.styleProperties));this._parametrizedProps.__takenFromSnapshot__=!0;a=r.expressionSerializer;for(var v in this._parametrizedProps)(g=this._parametrizedProps[v].value)&&Gc.obj.isString(g)&&a.isSerializedExpression(g)&&
(this._parametrizedProps[v]=a.deserializeExpr(g));this.initializeProperties();this._pool=r}},{key:"__after_deserialize__",value:function(a,g,l){this.resumeStepping();if("function"===typeof this.onLoad)try{this.onLoad()}catch(r){console.error("[lively.morphic] "+this+".onLoad() error: "+r.stack)}this.isComponent&&!this.owner||delete this._pool;this.master&&(l.mastersInSubHierarchy?l.mastersInSubHierarchy.push(this.master):l.mastersInSubHierarchy=[this.master])}},{key:"__only_serialize__",get:function(){var a=
this.defaultProperties,g=this.propertiesAndPropertySettings().properties,l=[];0<this._tickingScripts.length&&l.push("_tickingScripts");this.attributeConnections&&l.push("attributeConnections");var r=[this].concat($jscomp.arrayFromIterable(this.ownerChain())).map(function(A){return A.__isBeingSerialized__&&A.master}).find(Boolean),v;for(v in g){var y=g[v];r&&r.managesMorph(this)&&void 0!=r._overriddenProps.get(this)[v]?l.push(v):y.readOnly||y.derived||Gc.obj.equals(this[v],a[v])||y.hasOwnProperty("serialize")&&
!y.serialize||l.push(v)}return r&&!this.isComponent?r.propsToSerializeForMorph(this,l):l}},{key:"__additionally_serialize__",value:function(a,g,l,r){if((g=a.props.submorphs)&&!this.isEpiMorph)for(g=g.value,r=g.length;r--;)l.refForId(g[r].id).realObj.isEpiMorph&&Gc.arr.removeAt(g,r);l=$jscomp.makeIterator(Gc.arr.intersect(this.__only_serialize__,["borderColor","borderWidth","borderStyle","borderRadius"]));for(g=l.next();!g.done;g=l.next())g=g.value,a.props[g]={key:g,verbatim:!0,value:Gc.obj.extract(this[g],
["top","right","bottom","left"],function(v,y){return y&&y.isColor?y.toTuple():y})}}},{key:"isMorph",get:function(){return!0}},{key:"id",get:function(){return this._id}},{key:"env",get:function(){return this._env}},{key:"spec",value:function(a,g){a=void 0===a?!0:a;g=void 0===g?new WeakMap:g;var l=this.defaultProperties,r=this.propertiesAndPropertySettings().properties,v={submorphs:!0},y={};if(g.has(this))return g.get(this);g.set(this,y);for(var A in r){var E=r[A];E&&(E.readOnly||E.derived||E.hasOwnProperty("serialize")&&
!E.serialize||A in v||a&&(Gc.obj.equals(this[A],l[A])||this[A]&&l[A]&&this[A].valueOf&&l[A].valueOf&&Gc.obj.equals(this[A].valueOf(),l[A].valueOf()))||(y[A]=this[A]&&this[A].isMorph?this[A].spec(a,g):this[A]&&"layout"===A?this[A].copy():this[A]))}y.submorphs=this.submorphs.map(function(F){return F.spec(a,g)});y.type=this.constructor;return y}},{key:"printSpec",value:function(a,g){g=void 0===g?0:g;a=(void 0===a?null:a)||this.spec();var l={name:!0,type:!0,submorphs:!0},r="  ".repeat(g+1),v="  ".repeat(g)+
"{\n"+(r+'name: "'+a.name+'",\n')+(r+'type: "'+a.type+'",\n'),y;for(y in a)l[y]||(v+=""+r+y+": "+Gc.string.print(a[y])+",\n");if(a.submorphs){v+=r+"submorphs: [\n";a=$jscomp.makeIterator(a.submorphs);for(l=a.next();!l.done;l=a.next())v+=this.printSpec(l.value,g+1);v+="]\n"}return v+="  ".repeat(g)+"}\n"}},{key:"defaultProperties",get:function(){var a=this.constructor,g=a[Symbol.for("lively-instance-superclass")];if(!a._morphicDefaultPropertyValues||a._morphicDefaultPropertyValues==(g&&g._morphicDefaultPropertyValues)){a=
this.constructor._morphicDefaultPropertyValues={};g=this.propertiesAndPropertySettings().properties;for(var l in g){var r=g[l];r.hasOwnProperty("defaultValue")&&(r=r.defaultValue,Array.isArray(r)&&(r=r.slice()),a[l]=r)}}return this.constructor._morphicDefaultPropertyValues}},{key:"defaultProperty",value:function(a){return this.defaultProperties[a]}},{key:"getProperty",value:function(a){return this._morphicState[a]}},{key:"setProperty",value:function(a,g,l){return this.addValueChange(a,g,l)}},{key:"changeMetaData",
value:function(a,g,l,r){l=void 0===l?!0:l;r=void 0===r?!0:r;var v=this.metadata;v||(v={});(new Gc.PropertyPath(a)).withParentAndKeyDo(v,!0,function(y,A){y[A]=r?Object.assign({},y[A],{},g):g;var E=y.__dont_serialize__;l?E&&E.includes(A)&&(Gc.arr.remove(E,A),0===E.length&&delete y.__dont_serialize__):(E||(E=y.__dont_serialize__=[]),Gc.arr.pushIfNotIncluded(E,A))});this.metadata=v}},{key:"installFont",value:function(a,g){var l={};this.installedFonts=Object.assign({},this.installedFonts,(l[a]=g,l));this.insertFontCSS(a,
g)}},{key:"uninstallFont",value:function(a){delete this.installedFonts[a];(a=document.getElementById(this.id+"-"+a))&&a.remove()}},{key:"ensureInstalledFonts",value:function(a,g){a=$jscomp.makeIterator(a);for(var l=a.next();!l.done;l=a.next())(l=document.getElementById(this.id+"-"+l.value))&&l.remove();g=$jscomp.makeIterator(g);for(l=g.next();!l.done;l=g.next())a=l.value,this.insertFontCSS(a,this.installedFonts[a])}},{key:"insertFontCSS",value:function(a,g){var l=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){if(1==
r.nextAddress)return r.yield(l.whenRendered(),2);g.endsWith(".otf")?Gc.addOrChangeCSSDeclaration(l.id+"-"+a,"@font-face {\n             font-family: "+a+';\n             src: url("'+l.installedFonts[a]+'") format("opentype");\n         }'):Gc.addOrChangeCSSDeclaration(l.id+"-"+a,'@import url("'+l.installedFonts[a]+'");');r.jumpToEnd()})}},{key:"toString",value:function(){return"<"+Gc.getClassName(this)+" - "+(this.name?this.name:this.id)+">"}},{key:"edit",value:function(a){return this.env.world.execCommand("open object editor",
Object.assign({className:Gc.getClassName(this)},a,{target:this}))}},{key:"inspect",value:function(a){return this.env.world.execCommand("open object inspector",Object.assign({},a,{target:this}))}},{key:"livelyCustomInspect",value:function(){var a={_id:!0,_owner:!0},g={},l=this.propertiesAndPropertySettings().properties,r=[],v;for(v in l)a[v]||l[v].derived&&!l[v].showInInspector||(g[v]=!0,r.push({key:v,value:this[v]}));r.push({key:"id",value:this.id});r.push({key:"owner",value:this.owner});r=r.sort(function(A,
E){A=A.key.toLowerCase();E=E.key.toLowerCase();return A<E?-1:A===E?0:1});if(this.attributeConnections)for(l=$jscomp.makeIterator(this.attributeConnections),v=l.next();!v.done;v=l.next())v=v.value,a["$$"+v.sourceAttrName,""+v.sourceAttrName]=!0;Object.assign(g,a);a=$jscomp.makeIterator("attributeConnections _animationQueue _morphicState _dirty doNotCopyProperties doNotSerialize _env _cachedPaths _pathDependants _rendering _rev _submorphOrderChanged _tickingScripts _transform _invTransform _styleSheetProps _renderer _tooltipViewer layout".split(" "));
for(l=a.next();!l.done;l=a.next())l=l.value,l in this&&(g[l]=!0,r.push({key:l,value:this[l],keyString:"[internal] "+l}));for(var y in this)!g[y]&&this.hasOwnProperty(y)&&r.unshift({key:y,value:this[y],keyString:"[UNKNOWN PROPERTY] "+y});return{sort:!1,includeDefault:!1,properties:r}}},{key:"show",value:function(a){return $world.execCommand("show morph",{morph:this,loop:a})}},{key:"setStatusMessage",value:function(a,g,l,r){var v=this.world();r=Object.assign({maxLines:7},r);return v?v.setStatusMessageFor(this,
a,g,l,r):console.log(a)}},{key:"showError",value:function(a){var g=this.world();return g?g.showErrorFor(this,a):console.error(a)}},{key:"onChange",value:function(a){var g=this,l=a.meta&&a.meta.animation,r=a.prop,v=a.value;if("position"===r||"rotation"===r||"scale"===r||"origin"===r||"reactsToPointer"===r)this.onBoundsChanged(this.bounds()),l={},this.updateTransform((l[r]=v,l));else if("extent"==r)this.onBoundsChanged(this.bounds());else"layout"==r&&(l?v&&v.attachAnimated(l.duration,this,l.easing):
v&&v.attach());this.layout&&this.layout.onChange(a);this.isComponent&&(r=this.world(),(r?r.withAllSubmorphsSelect(function(y){return y.master&&y.master.uses(g)}):[]).forEach(function(y){y.requestMasterStyling()}));if(this.master)this.master.onMorphChange(this,a)}},{key:"onBoundsChanged",value:function(a){var g=this;Gc.signal(this,"bounds",a);[].concat($jscomp.arrayFromIterable(a.corners),$jscomp.arrayFromIterable(a.sides)).forEach(function(l){Gc.signal(g,l,a.partNamed(l))})}},{key:"onSubmorphChange",
value:function(a,g){var l=this;if(this.isComponent&&!a.meta.metaInteraction&&!a.meta.layoutAction){var r=this.world();r&&r.withAllSubmorphsDo(function(v){v.master&&v.master.uses(l)&&v.requestMasterStyling()})}if(this.master)this.master.onMorphChange(g,a);this.layout&&this.layout.onSubmorphChange(g,a)}},{key:"changes",get:function(){return this.env.changeManager.changesFor(this)}},{key:"applyChange",value:function(a){this.env.changeManager.apply(this,a)}},{key:"addValueChange",value:function(a,g,l){return this.env.changeManager.addValueChange(this,
a,g,l)}},{key:"addMethodCallChangeDoing",value:function(a,g){return this.env.changeManager.addMethodCallChangeDoing(a,this,g)}},{key:"groupChangesWhile",value:function(a,g){return this.env.changeManager.groupChangesWhile(this,a,g)}},{key:"dontRecordChangesWhile",value:function(a){return this.env.changeManager.dontRecordChangesWhile(this,a)}},{key:"recordChangesWhile",value:function(a,g){return this.env.changeManager.recordChangesWhile(a,g)}},{key:"recordChangesStart",value:function(a){return this.env.changeManager.recordChangesStartForMorph(this,
a)}},{key:"recordChangesStop",value:function(a){return this.env.changeManager.recordChangesStopForMorph(this,a)}},{key:"withMetaDo",value:function(a,g){return this.env.changeManager.doWithValueChangeMeta(a,this,g)}},{key:"undoStart",value:function(a){return this.env.undoManager.undoStart(this,a)}},{key:"undoStop",value:function(a){return this.env.undoManager.undoStop(this,a)}},{key:"undoInProgress",get:function(){return this.env.undoManager.undoInProgress}},{key:"animate",value:function(a){var g=
this,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){return 1==r.nextAddress?(l=g._animationQueue.registerAnimation(a),g._animationQueue.animationsActive?l?r.yield(l.asPromise(),3):r.jumpTo(2):(l&&l.finish(),r.return(Promise.resolve(g)))):2!=r.nextAddress?r.return(r.yieldResult):r.return(Promise.resolve(g))})}},{key:"withAnimationDo",value:function(a,g){var l=this,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){r=l.groupChangesWhile(!1,a);v=r.changes;return y.yield(Promise.all(Object.values(Gc.arr.groupBy(v,
function(A){return A.target.id})).map(function(A){var E=Object.assign({},g),F;A.forEach(function(H){F=H.target;H.reverseApply();E[H.prop]=H.value});return F.animate(E)})),0)})}},{key:"isClip",value:function(){return"visible"!==this.clipMode}},{key:"scrollExtent",get:function(){return(this.submorphs.length?this.innerBounds().union(this.submorphBounds()):this.innerBounds()).extent().addPt(this.scrollbarOffset)}},{key:"scrollBounds",value:function(){var a=this.scroll,g=this.scrollExtent;return new Gc.Rectangle(a.x,
a.y,g.x,g.y)}},{key:"scrollDown",value:function(a){this.scroll=this.scroll.addXY(0,a)}},{key:"scrollUp",value:function(a){this.scrollDown(50*-a)}},{key:"scrollLeft",value:function(a){this.scroll=this.scroll.addXY(a,0)}},{key:"scrollRight",value:function(a){this.scrollLeft(-a)}},{key:"scrollPageDown",value:function(){this.scrollDown(this.height)}},{key:"scrollPageUp",value:function(){this.scrollUp(this.height)}},{key:"addStyleClass",value:function(a){this.styleClasses=Gc.arr.uniq(this.styleClasses.concat(a))}},
{key:"removeStyleClass",value:function(a){this.styleClasses=this.styleClasses.filter(function(g){return g!=a})}},{key:"adjustOrigin",value:function(a){var g=this.origin,l=this.globalBounds().topLeft();this.origin=a;this.submorphs.forEach(function(v){return v.position=v.position.subPt(a.subPt(g))});var r=this.globalBounds().topLeft();l=l.subPt(r);this.globalPosition=this.globalPosition.addPt(l)}},{key:"setBounds",value:function(a){this.extent=a.extent();this.position=a.topLeft().addPt(this.origin)}},
{key:"innerBounds",value:function(){var a=this.extent;return Gc.rect(0,0,a.x,a.y)}},{key:"relativeBounds",value:function(a){a=a||this.world();var g=this.origin.negated().extent(this.extent);g=a?this.transformRectToMorph(a,g):this.getGlobalTransform().transformRectToRect(g);this.isClip()||this.submorphs.forEach(function(l){g=g.union(l.relativeBounds(a))});return g}},{key:"bounds",value:function(){return this.relativeBounds(this.owner)}},{key:"relativeSubmorphBounds",value:function(){var a=this.innerBounds();
return this.submorphs.map(function(g){g=g.bounds();return Gc.rect(g.x/a.width,g.y/a.height,g.width/a.width,g.height/a.height)})}},{key:"globalBounds",value:function(){return this.relativeBounds(this.world())}},{key:"submorphBounds",value:function(a){a=Gc.arr.filter(this.submorphs,void 0===a?function(){return!0}:a);return 1>a.length?this.innerBounds():a.map(function(g){return g.bounds()}).reduce(function(g,l){return g.union(l)})}},{key:"fitToSubmorphs",value:function(a){a=void 0===a?Gc.Rectangle.inset(0):
a;var g=this.submorphs;if(g.length){g=g.reduce(function(v,y){return v.union(y.bounds())},g[0].bounds());var l=g.top()-a.top(),r=g.left()-a.left();this.moveBy(Gc.pt(r,l));Gc.arr.invoke(this.submorphs,"moveBy",Gc.pt(-r,-l));this.extent=Gc.pt(g.width+a.left()+a.right(),g.height+a.top()+a.bottom())}}},{key:"align",value:function(a,g){return this.moveBy(g.subPt(a))}},{key:"moveBy",value:function(a){this.position=this.position.addPt(a);return this}},{key:"rotateBy",value:function(a){this.rotation+=a}},
{key:"resizeBy",value:function(a){this.extent=this.extent.addPt(a)}},{key:"snap",value:function(a){this.position=this.position.roundTo(a||1)}},{key:"isEpiMorph",get:function(){return this.getProperty("epiMorph")&&!this.isComponent}},{key:"isUsedAsEpiMorph",value:function(){for(var a=this;a;){if(a.isEpiMorph)return!0;a=a.owner}return!1}},{key:"replaceWith",value:function(a,g,l){l=void 0===l?!0:l;if(this===a||!a)return a;if(this===a.owner)return a.replaceWith(this),a;var r=this.owner,v=this.submorphs,
y=this.getTransform().copy();g="number"===typeof g?g:r?r.submorphs.indexOf(this):-1;var A=a.owner,E=Gc.arr.without(a.submorphs,this),F=a.getTransform().copy(),H=A?A.submorphs.indexOf(a):-1;r&&this.remove();A&&a.remove();l&&(this.submorphs=[],a.submorphs=[]);r===a?(A&&A.addMorphAt(this,H),l&&(this.submorphs=E.slice(0,g).concat(a).concat(E.slice(g)),a.submorphs=v)):(r&&r.addMorphAt(a,g),A&&A.addMorphAt(this,H),l&&(a.submorphs=v,this.submorphs=E));a.setTransform(y);this.setTransform(F);return a}},{key:"addMorphAt",
value:function(a,g){var l=this;if(!a||"object"!==typeof a)throw Error(a+" cannot be added as a submorph to "+this);if(a.isMorph){if(a.isAncestorOf(this))return this.env.world.logError(Error("addMorph: Circular relationships between morphs not allowed\ntried to add "+a+" to "+this)),null;if(a===this)return this.env.world.logError(Error("addMorph: Trying to add itself as a submorph: "+this)),null}a.isMorph||(a=Gc.morph(a));var r=this.submorphs.indexOf(a);if(!(-1<r&&r===g))return this.addMethodCallChangeDoing({target:this,
selector:"addMorphAt",args:[a,g],undo:{target:this,selector:"removeMorph",args:[a]}},function(){var v=a.owner,y=l.submorphs;if(v&&v!==l){var A=a.transformForNewOwner(l);a.remove()}a._env!==l._env&&(a._env=l._env);g=Math.min(y.length,Math.max(0,g));-1<r&&(y.splice(r,1),r<g&&g--);y.splice(g,0,a);a._owner=l;a._cachedPaths={};A&&a.setTransform(A);a.requestStyling();l._morphicState.submorphs=y;l._submorphOrderChanged=!0;l.makeDirty();a.resumeSteppingAll();a.withAllSubmorphsDo(function(E){return E.onOwnerChanged(l)});
l.world()&&a._requestMasterStyling&&(a.master&&a.master.applyIfNeeded(!0),a._requestMasterStyling=!1)}),a}},{key:"addMorph",value:function(a,g){var l=this.submorphs;g=g?l.indexOf(g):-1;return this.addMorphAt(a,-1===g?l.length:g)}},{key:"addMorphBack",value:function(a){return this.addMorph(a,a===this.submorphs[0]?this.submorphs[1]:this.submorphs[0])}},{key:"removeMorph",value:function(a){var g=this.submorphs.indexOf(a);-1!==g&&((this.getProperty("submorphs")||[]).splice(g,1),this.addMethodCallChangeDoing({target:this,
selector:"removeMorph",args:[a],undo:{target:this,selector:"addMorphAt",args:[a,g]}},function(){a.suspendSteppingAll();a._owner=null}),this._pathDependants=Gc.arr.withoutAll(this._pathDependants,a._pathDependants))}},{key:"remove",value:function(){var a=this;this.ownerChain().forEach(function(g){g._stylingVisitor&&g._stylingVisitor.deleteFromCache(a)});this.owner&&this.owner.removeMorph(this);this._cachedPaths={};this._pathDependants.forEach(function(g){return g._cachedPaths={}});this._pathDependants=
[];this.withAllSubmorphsDo(function(g){return g.onOwnerChanged(null)});return this}},{key:"onOwnerChanged",value:function(a){a&&this.master&&this.requestMasterStyling()}},{key:"fadeOut",value:function(a){a=void 0===a?1E3:a;var g=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){if(1==l.nextAddress)return l.yield(g.animate({opacity:0,duration:a,easing:Gc.easings.outQuad}),2);g.remove();g.opacity=1;l.jumpToEnd()})}},{key:"fadeIn",value:function(a){a=void 0===a?1E3:a;var g=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){g.opacity=
0;g.animate({opacity:1,duration:a});return l.return(g)})}},{key:"fadeIntoWorld",value:function(a,g){a=void 0===a?$world.visibleBounds().center():a;g=void 0===g?200:g;var l=this,r,v,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(A){if(1==A.nextAddress)return r=new Gc.Morph({opacity:0,scale:0,epiMorph:!0,hasFixedPosition:!0,fill:Gc.Color.transparent}),v=l.env.world,r.openInWorld(),r.addMorph(l),l.position=r.extent.scaleBy(.5),r.center=a,r.scale=.8,A.yield(r.animate({opacity:1,scale:1,
duration:g}),2);y=l.globalBounds();v.addMorph(l);l.top=y.top();l.left=y.left();r.remove();return A.return(l)})}},{key:"removeAllMorphs",value:function(){this.submorphs=[]}},{key:"bringToFront",value:function(){this.owner&&Gc.arr.last(this.owner.submorphs)!==this&&this.owner.addMorph(this);return this}},{key:"owner",get:function(){return this._owner}},{key:"withAllSubmorphsDetect",value:function(a){if(a(this))return this;for(var g=$jscomp.makeIterator(this.submorphs),l=g.next();!l.done;l=g.next())if(l=
l.value.withAllSubmorphsDetect(a))return l}},{key:"withAllSubmorphsDoExcluding",value:function(a,g){var l=[a(this)];if(g(this))return l;for(var r=$jscomp.makeIterator(this.submorphs),v=r.next();!v.done;v=r.next())Gc.arr.pushAll(l,v.value.withAllSubmorphsDoExcluding(a,g));return l}},{key:"withAllSubmorphsDo",value:function(a){for(var g=[a(this)],l=$jscomp.makeIterator(this.submorphs),r=l.next();!r.done;r=l.next())Gc.arr.pushAll(g,r.value.withAllSubmorphsDo(a));return g}},{key:"withAllSubmorphsSelect",
value:function(a){var g=[];this.withAllSubmorphsDo(function(l){return a(l)&&g.push(l)});return g}},{key:"ownerChain",value:function(){return this.owner?[this.owner].concat(this.owner.ownerChain()):[]}},{key:"world",value:function(){return this.owner?this.owner.world():null}},{key:"getWindow",value:function(){return this.isWindow?this:this.ownerChain().find(function(a){return a.isWindow})}},{key:"openInWorldNear",value:function(a,g){g=g||this.world()||this.env.world;if(!g)return this;this.center=a;
this.setBounds(g.visibleBounds().insetBy(50).translateForInclusion(this.bounds()));return this.openInWorld(this.position)}},{key:"openInWorldNearHand",value:function(a){a=a||this.world()||this.env.world;var g=a.firstHand?a.firstHand.position:Gc.pt(0,0);return a?this.openInWorldNear(g):void 0}},{key:"openInWorld",value:function(a,g){g=g||this.world()||this.env.world;if(!g)return console.warn("Cannot open morph "+this+", world morph not found;"),this;a?this.position=a:(this.center=g.visibleBounds().center(),
this.snap());g.addMorph(this);return this}},{key:"openInHand",value:function(a){a||(a=(this.world()||this.env.world).firstHand);a.grab(this);this.center=Gc.pt(0,0)}},{key:"openInWindow",value:function(a){a=void 0===a?{title:this.name,name:"window for "+this.name,world:null}:a;return(a.world||this.world()||this.env.world).openInWindow(this,Gc.obj.dissoc(a,["world"]))}},{key:"isAncestorOf",value:function(a){for(a=a.owner;a;){if(a===this)return!0;a=a.owner}return!1}},{key:"morphsContainingPoint",value:function(a,
g){g||(g=[]);if(!this.fullContainsWorldPoint(a))return g;for(var l=this.submorphs.length-1;0<=l;l--)this.submorphs[l].morphsContainingPoint(a,g);this.innerBoundsContainsWorldPoint(a)&&g.push(this);return g}},{key:"morphBeneath",value:function(a){var g=this.world()||this.owner;if(!g)return null;a=g.morphsContainingPoint(a);g=a.indexOf(this);return a[g+1]}},{key:"transformTillMorph",value:function(a,g){if("down"==(void 0===g?"up":g))return a.transformTillMorph(this,"up").inverse();g=new Gc.Transform;
for(var l=this;l&&l!=a;l=l.owner){var r=l,v=r.origin;r=r.scroll;0===v.x&&0===v.y||g.preConcatenate(new Gc.Transform(l.origin));g.preConcatenate(l.getTransform());l!=this&&(0===r.x&&0===r.y||!l.owner||g.preConcatenate(new Gc.Transform(r.negated())));l.hasFixedPosition&&l.owner&&g.preConcatenate(new Gc.Transform(l.owner.scroll))}return g}},{key:"localize",value:function(a){var g=this.world(),l=a.x,r=a.y;return g?g.transformPointToMorph(this,Gc.pt(l,r)):a}},{key:"worldPoint",value:function(a){var g=
this.world(),l=a.x,r=a.y;return g?this.transformPointToMorph(g,Gc.pt(l,r)):a.addPt(this.position)}},{key:"transformToMorph",value:function(a){var g=this.getGlobalTransform(),l=a.getGlobalTransform().inverse();g.preConcatenate(l);l=a.scroll;0===l.x&&0===l.y||!a.owner||g.preConcatenate(new Gc.Transform(l));return g}},{key:"transformPointToMorph",value:function(a,g){for(var l=this.hasFixedPosition,r=$jscomp.makeIterator(this.pathToMorph(a)),v=r.next();!v.done;v=r.next()){var y=$jscomp.makeIterator(v.value);
v=y.next().value;y=y.next().value;this!=y&&"up"==v&&(g.x-=y.scroll.x,g.y-=y.scroll.y,y.hasFixedPosition&&(l=y.owner&&y.owner.isWorld),y.hasFixedPosition&&y.owner&&y.owner.owner&&(g.x+=y.owner.scroll.x,g.y+=y.owner.scroll.y));this.applyTransform(v,y,g);this!=y&&"down"==v&&(g.x+=y.scroll.x,g.y+=y.scroll.y,y.hasFixedPosition&&(l=y.owner&&y.owner.isWorld),y.hasFixedPosition&&y.owner&&y.owner.owner&&(g.x-=y.owner.scroll.x,g.y-=y.owner.scroll.y))}l&&a.isWorld&&(g.x=g.x-a.position.x+a.scroll.x,g.y=g.y-a.position.y+
a.scroll.y);l&&this.isWorld&&(g.x=g.x+this.position.x-this.scroll.x,g.y=g.y+this.position.y-this.scroll.y);return g}},{key:"transformRectToMorph",value:function(a,g){var l=this,r,v,y;[r=g.topLeft(),v=g.topRight(),y=g.bottomRight(),g=g.bottomLeft()].forEach(function(A){return l.transformPointToMorph(a,A)});return Gc.Rectangle.unionPts([r,v,y,g])}},{key:"applyTransform",value:function(a,g,l){"up"==a?(l.x+=g.origin.x,l.y+=g.origin.y,l.matrixTransform(g.getTransform(),l)):(l.matrixTransform(g.getInverseTransform(),
l),l.x-=g.origin.x,l.y-=g.origin.y)}},{key:"_addPathDependant",value:function(a){this._pathDependants.includes(a)||this._pathDependants.push(a)}},{key:"pathToMorph",value:function(a){var g;if(g=this._cachedPaths[a.id])return g;g=this.closestCommonAncestor(a)||this;var l=this,r=[],v=[];for(g._addPathDependant(this);l&&l!=g;)v.push(["up",l]),l._addPathDependant(this),l=l.owner;for(l=a;l&&l!=g;)r.push(["down",l]),l._addPathDependant(this),l=l.owner;return this._cachedPaths[a.id]=g=[].concat($jscomp.arrayFromIterable(v),
$jscomp.arrayFromIterable(r.reverse()))}},{key:"closestCommonAncestor",value:function(a){return Gc.arr.intersect([this].concat($jscomp.arrayFromIterable(this.ownerChain())),[a].concat($jscomp.arrayFromIterable(a.ownerChain())))[0]}},{key:"transformForNewOwner",value:function(a){return new Gc.Transform(this.transformToMorph(a))}},{key:"localizePointFrom",value:function(a,g){var l=a.x;a=a.y;try{return g.transformPointToMorph(this,Gc.pt(l,a))}catch(r){return console.warn("problem "+r+" in localizePointFrom"),
Gc.pt}}},{key:"getGlobalTransform",value:function(){return this.transformTillMorph(this.world())}},{key:"globalPosition",get:function(){return this.worldPoint(Gc.pt(0,0))}},{key:"globalPosition",set:function(a){return this.position=this.owner?this.owner.localize(a):a}},{key:"ensureToBeInWorldBounds",value:function(){var a=this.world();if(a){var g=this.globalBounds();a=a.innerBounds().translateForInclusion(g).topLeft().subPt(g.topLeft());this.moveBy(a)}}},{key:"getTransform",value:function(){this._transform||
this.updateTransform();return this._transform}},{key:"getInverseTransform",value:function(){this._invTransform||this.updateTransform();return this._invTransform}},{key:"updateTransform",value:function(a){a=void 0===a?{}:a;var g=a.position,l=a.scale,r=a.origin,v=a.rotation;a=this._transform||new Gc.Transform;var y=this._invTransform||new Gc.Transform;g=g||this.position;r=r||this.origin;l=l||this.scale;v=v||this.rotation;a.a=l*Math.cos(v);a.b=l*Math.sin(v);a.c=l*-Math.sin(v);a.d=l*Math.cos(v);a.e=a.a*
-r.x+a.c*-r.y+g.x;a.f=a.b*-r.x+a.d*-r.y+g.y;g=a.a;l=a.b;r=a.c;v=a.d;var A=a.e,E=a.f,F=1/(g*v-r*l);y.a=v*F;y.b=-l*F;y.c=-r*F;y.d=g*F;y.e=(r*E-A*v)*F;y.f=-(g*E-l*A)*F;this._transform=a;this._invTransform=y}},{key:"setTransform",value:function(a){this.position=a.getTranslation();this.rotation=Gc.num.toRadians(a.getRotation());this.scale=a.getScalePoint().x;this.updateTransform(this)}},{key:"fullContainsWorldPoint",value:function(a){return this.fullContainsPoint(null==this.owner?a:this.owner.localize(a))}},
{key:"fullContainsPoint",value:function(a){return this.bounds().containsPoint(a)}},{key:"innerBoundsContainsWorldPoint",value:function(a){return this.innerBoundsContainsPoint(this.localize(a))}},{key:"innerBoundsContainsPoint",value:function(a){return this.innerBounds().containsPoint(a.addPt(this.origin).subPt(this.scroll))}},{key:"get",value:function(a){if(!a)return null;try{return this.getSubmorphNamed(a)||this.getNameTest(this,a)&&this||this.getOwnerOrOwnerSubmorphNamed(a)}catch(g){if(g.constructor==
RangeError&&"Maximum call stack size exceeded"==g.message)throw Error("'get' failed due to a stack overflow. The most\nlikely source of the problem is using 'get' as part of\ntoString, because 'get' calls 'getOwnerOrOwnerSubmorphNamed', which\ncalls 'toString' on this. Try using 'getSubmorphNamed' instead,\nwhich only searches in this' children.\nOriginal error:\n"+g.stack);throw g;}}},{key:"getNameTest",value:function(a,g){if(Gc.obj.isRegExp(g)){if(g.test(a.name)||g.test(String(a)))return!0}else if(a.name===
g||String(a)===g)return!0;return!1}},{key:"getAllNamed",value:function(a,g){g=void 0===g?[]:g;if(!this._morphicState||!this.submorphs.length)return g;for(var l=0;l<this.submorphs.length;l++){var r=this.submorphs[l];this.getNameTest(r,a)&&g.push(r)}for(l=0;l<this.submorphs.length;l++)this.submorphs[l].getAllNamed(a,g);return g}},{key:"getSubmorphNamed",value:function(a){if(!this._morphicState||!this.submorphs.length)return null;for(var g=0;g<this.submorphs.length;g++){var l=this.submorphs[g];if(this.getNameTest(l,
a))return l}for(g=0;g<this.submorphs.length;g++)if(l=this.submorphs[g].getSubmorphNamed(a))return l;return null}},{key:"getSubmorphsByStyleClassName",value:function(a){return this.withAllSubmorphsSelect(function(g){return g.styleClasses.includes(a)})}},{key:"getOwnerNamed",value:function(a){return this.ownerChain().find(function(g){return g.name===a})}},{key:"getOwnerOrOwnerSubmorphNamed",value:function(a){var g=this.owner;if(!g)return null;if(g.name===a)return g;for(var l=0;l<g.submorphs.length;l++){var r=
g.submorphs[l];if(r!==this&&(this.getNameTest(r,a)||(r=r.getSubmorphNamed(a))))return r}return this.owner.getOwnerOrOwnerSubmorphNamed(a)}},{key:"getMorphWithId",value:function(a){return this.withAllSubmorphsDetect(function(g){return a===g.id})}},{key:"setMirrored",value:function(a){a?this.removeStyleClass("hidden-in-mirror"):this.addStyleClass("hidden-in-mirror")}},{key:"isMirrored",value:function(){return 0<=this.styleClasses.indexOf("hidden-in-mirror")?!0:!1}},{key:"dragTriggerDistance",get:function(){return 0}},
{key:"onMouseDown",value:function(a){this===a.targetMorph&&(a.state.clickedMorph=this);this===a.targetMorph&&this.master&&this.requestMasterStyling()}},{key:"onMouseUp",value:function(a){a.state.clickedMorph=null;this===a.targetMorph&&this.master&&this.requestMasterStyling()}},{key:"onMouseMove",value:function(a){}},{key:"onLongClick",value:function(a){}},{key:"addKeyBindings",value:function(a){var g=this;this.addMethodCallChangeDoing({target:this,selector:"addKeyBindings",args:[a],undo:null},function(){g._keybindings||
(g._keybindings=[]);g._cachedKeyhandlers=null;g._keybindings.unshift.apply(g._keybindings,$jscomp.arrayFromIterable(a))})}},{key:"keybindings",get:function(){return this._keybindings||[]}},{key:"keybindings",set:function(a){this._cachedKeyhandlers=null;return this._keybindings=a}},{key:"keyhandlers",get:function(){return this._cachedKeyhandlers||(this._cachedKeyhandlers=[Gc.KeyHandler.withBindings(this.keybindings)])}},{key:"keyCommandMap",get:function(){var a=this.keyhandlers[0].platform;return this.keybindings.reduce(function(g,
l){var r=Gc.findKeysForPlatform(l.keys,a),v=l.command,y="string"===typeof v?v:v.command||v.name;return"string"!==typeof r?g:r.split("|").reduce(function(A,E){var F={};return Object.assign(A,(F[E]={name:y,command:v,prettyKeys:Gc.KeyHandler.prettyCombo(E)},F))},g)},{})}},{key:"keysForCommand",value:function(a,g){g=void 0===g?!0:g;var l=this.keyCommandMap,r=Object.keys(l).find(function(v){return l[v].name===a});return r&&g?l[r].prettyKeys:r}},{key:"simulateKeys",value:function(a){return Gc.KeyHandler.simulateKeys(this,
a)}},{key:"onKeyDown",value:function(a){Gc.KeyHandler.invokeKeyHandlers(this,a,!1)&&a.stop()}},{key:"onKeyUp",value:function(a){}},{key:"onContextMenu",value:function(a){var g=this;a.targetMorph===this&&(lively.FreezerRuntime||a.stop(),Promise.resolve(this.menuItems()).then(function(l){return g.openMenu(l,a)}).catch(function(l){return $world.logError(l)}))}},{key:"openMenu",value:function(a,g){var l=this.world();return a&&a.length&&l?l.openWorldMenu(g,a):null}},{key:"menuItems",value:function(){return this.world().defaultMenuItems(this)}},
{key:"onCut",value:function(a){}},{key:"onCopy",value:function(a){}},{key:"onPaste",value:function(a){}},{key:"onDragStart",value:function(a){this.undoStart("drag-move");a=a.state;this.position=a.dragStartMorphPosition.addPt(a.absDragDelta)}},{key:"onDragEnd",value:function(a){this.undoStop("drag-move");$world.execCommand("remove snap to guides",this)}},{key:"onDrag",value:function(a){var g=a.state;this.position=g.dragStartMorphPosition.addPt(g.absDragDelta);$world.execCommand("show and snap to guides",
{target:this,showGuides:a.isCtrlDown(),snap:a.isCtrlDown()})}},{key:"onGrab",value:function(a){if(a.isShiftDown()){var g=this.copy();g.position=this.transformPointToMorph(a.hand,Gc.pt(0,0));a.hand.grab(g)}else a.hand.grab(this)}},{key:"onDrop",value:function(a){a.hand.dropMorphsOn(this)}},{key:"wantsToBeDroppedOn",value:function(a){return!0}},{key:"onDropHoverIn",value:function(a){}},{key:"onDropHoverUpdate",value:function(a){}},{key:"onDropHoverOut",value:function(a){}},{key:"onBeingDroppedOn",value:function(a,
g){g.addMorph(this)}},{key:"onHoverIn",value:function(a){this.master&&this.requestMasterStyling()}},{key:"onHoverOut",value:function(a){this.master&&this.requestMasterStyling()}},{key:"onScroll",value:function(a){}},{key:"onMouseWheel",value:function(a){}},{key:"onNativeDrop",value:function(a){}},{key:"onNativeDragleave",value:function(a){}},{key:"onNativeDragenter",value:function(a){}},{key:"onNativeDragover",value:function(a){}},{key:"onNativeDragend",value:function(a){}},{key:"onNativeDragstart",
value:function(a){}},{key:"onNativeDrag",value:function(a){}},{key:"focus",value:function(){var a=this.env.eventDispatcher;a&&a.focusMorph(this)}},{key:"onFocus",value:function(a){}},{key:"onBlur",value:function(a){}},{key:"isFocused",value:function(){var a=this.env.eventDispatcher;return a&&a.isMorphFocused(this)}},{key:"exportToJSON",value:function(a){return Gc.serializeSpec(this,a)}},{key:"initFromJSON",value:function(a){var g=this;this._env=a.env||a._env||Gc.MorphicEnv.default();this._rev=0;this._owner=
null;this._dirty=!0;this._submorphOrderChanged=this._rendering=!1;this._id=a._id||Gc.newMorphId(Gc.getClassName(this));this._animationQueue=new Gc.AnimationQueue(this);this._cachedPaths={};this._pathDependants=[];this._tickingScripts=[];this.dontRecordChangesWhile(function(){g.initializeProperties();Gc.deserializeSpec(a,function(l){return Gc.morph(l)},g)});return this}},{key:"copyViaJSON",value:function(){var a=this.exportToJSON();Gc.tree.prewalk(a,function(g){return g._id=Gc.newMorphId(g.type)},
function(g){return g.submorphs});a.name=a.name.replace(/copy( [0-9]+)?$/,function(g,l){return"copy "+(l&&l.trim()?Number(l)+1:"1")});return Gc.morph({type:a.type}).initFromJSON(a)}},{key:"copy",value:function(){return Gc.copyMorph(this)}},{key:"interactivelyPublish",value:function(){var a=this,g,l,r,v,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(A){switch(A.nextAddress){case 1:return g=a.world()||a.env.world,A.setCatchFinallyBlocks(2),A.yield(System.import("lively.morphic/partsbin.js"),
4);case 4:return l=A.yieldResult,r=l.interactivelySavePart,A.yield(r(a,{notifications:!1,loadingIndicator:!0}),5);case 5:v=A.yieldResult;g.setStatusMessage(v?"Published "+a+" as "+v.name:"Failed to publish part "+a,v?Gc.Color.green:Gc.Color.red);A.leaveTryBlock(0);break;case 2:y=A.enterCatchBlock(),"canceled"!=y&&g.showError(y),A.jumpToEnd()}})}},{key:"makeDirty",value:function(a){this._dirty=!0;this.owner&&this.owner.makeDirty()}},{key:"needsRerender",value:function(){return this._dirty}},{key:"aboutToRender",
value:function(a){this._dirty=!1;this._rendering=!0}},{key:"onAfterRender",value:function(a){}},{key:"whenRendered",value:function(a){return this.env.whenRendered(this,void 0===a?50:a).then(function(){return!0}).catch(function(){return!1})}},{key:"render",value:function(a){this._requestMasterStyling&&(this.master&&this.master.applyIfNeeded(!0),this._requestMasterStyling=!1);return a.renderMorph(this)}},{key:"applyLayoutIfNeeded",value:function(){if(this._dirty){for(var a=0;a<this.submorphs.length;a++)this.submorphs[a].applyLayoutIfNeeded();
this.layout&&!this.layout.manualUpdate&&this.layout.forceLayout()}}},{key:"requestMasterStyling",value:function(){var a=this;this._rendering||(this.master&&this.master._hasUnresolvedMaster&&(this.master._capturedExtents=new WeakMap,this.withAllSubmorphsDo(function(g){return a.master._capturedExtents.set(g,g.extent)})),this.master&&(this._requestMasterStyling=!0),this.makeDirty())}},{key:"requestStyling",value:function(){this.withAllSubmorphsDo(function(a){a._wantsStyling=!0;a.makeDirty()})}},{key:"renderAsRoot",
value:function(a){var g=this;this.dontRecordChangesWhile(function(){g.applyLayoutIfNeeded()});return Gc.renderRootMorph(this,a)}},{key:"renderPreview",value:function(a,g){a=void 0===a?{}:a;g=void 0===g?this.env.renderer:g;return g.renderPreview(this,a)}},{key:"startStepping",value:function(){var a=Array.from(arguments),g="number"===typeof a[0]?a.shift():null,l=a.shift();a=new Gc.TargetScript(this,l,a);this.removeEqualScripts(a);this._tickingScripts.push(a);a.startTicking(g);return a}},{key:"tickingScripts",
get:function(){return this._tickingScripts}},{key:"stopStepping",value:function(){Gc.arr.invoke(this._tickingScripts,"stop");this._tickingScripts.length=[]}},{key:"stopSteppingScriptNamed",value:function(a){var g=this._tickingScripts.filter(function(l){return l.selector===a});this.stopScripts(g)}},{key:"stopScripts",value:function(a){Gc.arr.invoke(a,"stop");this._tickingScripts=Gc.arr.withoutAll(this._tickingScripts,a)}},{key:"suspendStepping",value:function(){this._tickingScripts&&Gc.arr.invoke(this._tickingScripts,
"suspend")}},{key:"suspendSteppingAll",value:function(){this.withAllSubmorphsDo(function(a){return a.suspendStepping()})}},{key:"resumeStepping",value:function(){Gc.arr.invoke(this._tickingScripts,"resume")}},{key:"resumeSteppingAll",value:function(){this.withAllSubmorphsDo(function(a){return Gc.arr.invoke(a._tickingScripts,"resume")})}},{key:"removeEqualScripts",value:function(a){this.stopScripts(this._tickingScripts.filter(function(g){return g.equals(a)}))}},{key:"commands",get:function(){return this._commands||
[]}},{key:"commands",set:function(a){this._commands&&this.removeCommands(this._commands);this.addCommands(a)}},{key:"commandsIncludingOwners",get:function(){return Gc.arr.flatmap([this].concat(this.ownerChain()),function(a){return Gc.arr.sortByKey(a.commands,"name").map(function(g){return{target:a,command:g}})})}},{key:"addCommands",value:function(a){var g=this;this.addMethodCallChangeDoing({target:this,selector:"addCommands",args:[a],undo:{target:this,selector:"removeCommands",args:[a]}},function(){g.removeCommands(a);
g._commands=(g._commands||[]).concat(a)})}},{key:"removeCommands",value:function(a){var g=this;this.addMethodCallChangeDoing({target:this,selector:"removeCommands",args:[a],undo:{target:this,selector:"addCommands",args:[a]}},function(){var l=a.map(function(v){return"string"===typeof v?v:v.name}),r=(g._commands||[]).filter(function(v){return!l.includes(v.name)});r.length?g._commands=r:delete g._commands})}},{key:"commandHandler",get:function(){return this._commandHandler||Gc.defaultCommandHandler}},
{key:"lookupCommand",value:function(a){return(a=this.commandHandler.lookupCommand(a,this))&&a.command?a:null}},{key:"execCommand",value:function(a,g,l,r){return this.commandHandler.exec(a,this,g,l,r)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Morph"}},{key:"propertySettings",get:function(){return{defaultGetter:function(a){return this.getProperty(a)},defaultSetter:function(a,g){this.setProperty(a,g)},valueStoreProperty:"_morphicState"}}},{key:"properties",get:function(){return Object.assign({name:{group:"core",
initialize:function(a){a||(a=Gc.getClassName(this),a=(Gc.string.startsWithVowel(a)?"an":"a")+a);this.name=a}},isComponent:{group:"core",defaultValue:!1,after:["master"],set:function(a){this.setProperty("isComponent",a);a&&(this.master||delete this._parametrizedProps)}},master:{before:["metadata"],group:"core",set:function(a){this.master&&this.master.equals(a)||(this.setProperty("master",a?Gc.ComponentPolicy.for(this,a):0==a?!1:null),a&&this.requestMasterStyling())}},renderOnGPU:{group:"core",defaultValue:!1},
draggable:{group:"interaction",isStyleProp:!0,defaultValue:!1},grabbable:{group:"interaction",isStyleProp:!0,defaultValue:!1,set:function(a){a&&!this.draggable&&(this.draggable=!0);this.setProperty("grabbable",a)}},acceptsDrops:{group:"interaction",isStyleProp:!0,defaultValue:!0},grayscale:{group:"styling",type:"Number",isStyleProp:!0,defaultValue:0,min:0,max:1,isFloat:!0},blur:{group:"styling",type:"Number",isStyleProp:!0,defaultValue:0,min:0,isFloat:!0},dropShadow:{group:"styling",type:"Shadow",
isStyleProp:!0,defaultValue:null,set:function(a){a&&!a.isShadowObject&&(a=new Gc.ShadowObject(a),a.morph=this);this.setProperty("dropShadow",a)}},tooltip:{group:"core",defaultValue:null},focusable:{group:"interaction",defaultValue:!0},nativeCursor:{group:"interaction",type:"Enum",values:"auto default none context-menu help pointer progress wait cell crosshair text vertical-text alias copy move no-drop not-allowed e-resize n-resize ne-resize nw-resize s-resize se-resize sw-resize w-resize ew-resize ns-resize nesw-resize nwse-resize col-resize row-resize all-scroll zoom-in zoom-out grab grabbing".split(" "),
isStyleProp:!0,defaultValue:"auto"},halosEnabled:{group:"interaction",isStyleProp:!0,defaultValue:!!Gc.config.halosEnabled},reactsToPointer:{group:"interaction",isStyleProp:!0,defaultValue:!0},position:{group:"geometry",type:"Point",isStyleProp:!0,defaultValue:Gc.pt(0,0)},origin:{group:"geometry",type:"Point",isStyleProp:!0,defaultValue:Gc.pt(0,0)},extent:{group:"geometry",type:"Point",isStyleProp:!0,defaultValue:Gc.pt(10,10),set:function(a){var g=this.extent;this.setProperty("extent",a);this.origin.equals(Gc.pt(0,
0))||(a=Gc.pt(a.x/g.x,a.y/g.y),this.adjustOrigin(this.origin.scaleByPt(a)))}},width:{group:"geometry",derived:!0,after:["extent"],before:["submorphs"],get:function(){return this.extent.x},set:function(a){return this.extent=Gc.pt(a,this.extent.y)}},height:{group:"geometry",derived:!0,after:["extent"],before:["submorphs"],get:function(){return this.extent.y},set:function(a){return this.extent=Gc.pt(this.extent.x,a)}},left:{group:"geometry",derived:!0,after:["extent","submorphs","layout"],get:function(){return this.bounds().left()},
set:function(a){return this.moveBy(Gc.pt(a-this.left),0)}},right:{group:"geometry",derived:!0,after:["extent","submorphs","layout"],get:function(){return this.bounds().right()},set:function(a){return this.moveBy(Gc.pt(a-this.right),0)}},top:{group:"geometry",derived:!0,after:["extent","submorphs","layout"],get:function(){return this.bounds().top()},set:function(a){return this.moveBy(Gc.pt(0,a-this.top))}},bottom:{group:"geometry",derived:!0,after:["extent","submorphs","layout"],get:function(){return this.bounds().bottom()},
set:function(a){return this.moveBy(Gc.pt(0,a-this.bottom))}},center:{group:"geometry",derived:!0,after:["extent","submorphs","layout"],get:function(){return this.bounds().center()},set:function(a){return this.align(this.center,a)}},topLeft:{group:"geometry",derived:!0,after:["extent","submorphs","layout"],get:function(){return this.bounds().topLeft()},set:function(a){return this.align(this.topLeft,a)}},topRight:{group:"geometry",derived:!0,after:["extent","submorphs","layout"],get:function(){return this.bounds().topRight()},
set:function(a){return this.align(this.topRight,a)}},bottomRight:{group:"geometry",derived:!0,after:["extent","layout"],get:function(){return this.bounds().bottomRight()},set:function(a){return this.align(this.bottomRight,a)}},bottomLeft:{group:"geometry",derived:!0,after:["extent","submorphs","layout"],get:function(){return this.bounds().bottomLeft()},set:function(a){return this.align(this.bottomLeft,a)}},bottomCenter:{group:"geometry",derived:!0,after:["extent","submorphs","layout"],get:function(){return this.bounds().bottomCenter()},
set:function(a){return this.align(this.bottomCenter,a)}},topCenter:{group:"geometry",derived:!0,after:["extent","submorphs","layout"],get:function(){return this.bounds().topCenter()},set:function(a){return this.align(this.topCenter,a)}},leftCenter:{group:"geometry",derived:!0,after:["extent","submorphs"],get:function(){return this.bounds().leftCenter()},set:function(a){return this.align(this.leftCenter,a)}},rightCenter:{group:"geometry",derived:!0,after:["extent","submorphs"],get:function(){return this.bounds().rightCenter()},
set:function(a){return this.align(this.rightCenter,a)}},rotation:{group:"geometry",type:"Number",isFloat:!0,isStyleProp:!0,defaultValue:0},flipped:{group:"geometry",type:"Number",isFloat:!0,isStyleProp:!0,defaultValue:0,min:0,max:1},tilted:{group:"geometry",type:"Number",isFloat:!0,isStyleProp:!0,defaultValue:0,min:0,max:1},perspective:{group:"geometry",type:"Number",isStyleProp:!0,defaultValue:0,min:0},scale:{group:"geometry",type:"Number",min:0,isFloat:!0,isStyleProp:!0,defaultValue:1},hasFixedPosition:{group:"geometry",
doc:"When morph is submorph of world hasFixedPosition == true will keep the morph at the same position relative to top left of the browser window. This means, when the world is scrolled, the morph keeps its place.",defaultValue:!1},opacity:{group:"styling",type:"Number",isFloat:!0,min:0,max:1,isStyleProp:!0,defaultValue:1},fill:{group:"styling",type:"ColorGradient",isStyleProp:!0,defaultValue:Gc.Color.white},visible:{group:"styling",isStyleProp:!0,defaultValue:!0,set:function(a){a||this.makeDirty();
this.setProperty("visible",a)}},submorphs:{group:"core",defaultValue:[],after:["isLayoutable","origin","position","rotation","scale"],get:function(){return(this.getProperty("submorphs")||[]).concat()},set:function(a){var g=this,l=this.layout,r=l&&l.isEnabled();r&&l.disable();this.submorphs.forEach(function(v){return a.includes(v)||v.remove()});a.forEach(function(v,y){return g.submorphs[y]!==v&&g.addMorph(v,g.submorphs[y])});r&&l.enable()}},clipMode:{group:"styling",type:"Enum",values:["visible","hidden",
"scroll","auto"],isStyleProp:!0,defaultValue:"visible",set:function(a){this.setProperty("clipMode",a);this.isClip()||(this.scroll=Gc.pt(0,0))}},scroll:{group:"geometry",defaultValue:Gc.pt(0,0),after:["clipMode","submorphs"],type:"Point",set:function(a){var g=a.x;a=a.y;if(this.isClip()){var l=this.scrollExtent.subPt(this.extent),r=l.y;g=Math.max(0,Math.min(l.x,g));a=Math.max(0,Math.min(r,a));this.setProperty("scroll",Gc.pt(g,a));this.makeDirty()}}},scrollbarOffset:{group:"styling",defaultValue:Gc.pt(15,
15)},styleClasses:{group:"styling",isStyleProp:!0,defaultValue:["morph"],get:function(){return this._cachedStyleClasses||(this._cachedStyleClasses=this.constructor.styleClasses.concat(this.getProperty("styleClasses")))},set:function(a){this._cachedStyleClasses=null;this.setProperty("styleClasses",Gc.arr.withoutAll(a,this.constructor.styleClasses));this.requestStyling()}},layout:{group:"layouting",isStyleProp:!0,type:"Layout",after:["submorphs","extent","origin","position","isLayoutable"],set:function(a){a&&
(a.container=this);this.setProperty("layout",a)}},isLayoutable:{group:"layouting",isStyleProp:!0,defaultValue:!0},borderLeft:{group:"styling",isStyleProp:!0,derived:!0,after:["borderStyleLeft","borderWidthLeft","borderColorLeft"],get:function(){return{style:this.borderStyleLeft,width:this.borderWidthLeft,color:this.borderColorLeft}},set:function(a){"style"in a&&(this.borderStyleLeft=a.style);"width"in a&&(this.borderWidthLeft=a.width);"color"in a&&(this.borderColorLeft=a.color);"radius"in a&&(this.borderRadiusLeft=
a.radius)}},borderRight:{group:"styling",isStyleProp:!0,derived:!0,after:["borderStyleRight","borderWidthRight","borderColorRight"],get:function(){return{style:this.borderStyleRight,width:this.borderWidthRight,color:this.borderColorRight}},set:function(a){"style"in a&&(this.borderStyleRight=a.style);"width"in a&&(this.borderWidthRight=a.width);"color"in a&&(this.borderColorRight=a.color);"radius"in a&&(this.borderRadiusRight=a.radius)}},borderBottom:{group:"styling",isStyleProp:!0,derived:!0,after:["borderStyleBottom",
"borderWidthBottom","borderColorBottom"],get:function(){return{style:this.borderStyleBottom,width:this.borderWidthBottom,color:this.borderColorBottom}},set:function(a){"style"in a&&(this.borderStyleBottom=a.style);"width"in a&&(this.borderWidthBottom=a.width);"color"in a&&(this.borderColorBottom=a.color);"radius"in a&&(this.borderRadiusBottom=a.radius)}},borderTop:{group:"styling",isStyleProp:!0,derived:!0,after:["borderStyleTop","borderWidthTop","borderColorTop"],get:function(){return{style:this.borderStyleTop,
width:this.borderWidthTop,color:this.borderColorTop}},set:function(a){"style"in a&&(this.borderStyleTop=a.style);"width"in a&&(this.borderWidthTop=a.width);"color"in a&&(this.borderColorTop=a.color);"radius"in a&&(this.borderRadiusTop=a.radius)}},borderWidth:{group:"styling",isStyleProp:!0,type:"Number",foldable:["top","left","right","bottom"],min:0,defaultValue:{top:0,bottom:0,left:0,right:0,valueOf:function(){return 0}},get:function(){var a=this.getProperty("borderWidth");return Object.assign({},
a,{valueOf:function(){return a.left}})},set:function(a){Gc.obj.isNumber(a)&&(a={left:a,right:a,top:a,bottom:a});this.setProperty("borderWidth",a)}}},Gc.generateUnfolded("borderWidth",void 0,"styling"),{borderRadius:{group:"styling",isStyleProp:!0,type:"Number",min:0,foldable:["top","left","right","bottom"],defaultValue:{top:0,bottom:0,right:0,left:0,valueOf:function(){return 0}},get:function(){var a=this.getProperty("borderRadius");return Object.assign({},a,{valueOf:function(){return a.left}})},set:function(a){a||
(a=0);Gc.obj.isNumber(a)&&(a={left:a,right:a,top:a,bottom:a});a.isRectangle&&(a={left:a.left(),right:a.right(),top:a.top(),bottom:a.bottom()});this.setProperty("borderRadius",a)}}},Gc.generateUnfolded("borderRadius",void 0,"styling"),{borderStyle:{group:"styling",isStyleProp:!0,type:"Enum",foldable:["top","left","right","bottom"],values:"none hidden dotted dashed solid double groove ridge inset outset".split(" "),defaultValue:{top:"solid",left:"solid",bottom:"solid",right:"solid",valueOf:function(){return"solid"}},
get:function(){var a=this.getProperty("borderStyle");return Object.assign({},a,{valueOf:function(){return a.left}})},set:function(a){Gc.obj.isString(a)&&(a={left:a,right:a,top:a,bottom:a});this.setProperty("borderStyle",a)}}},Gc.generateUnfolded("borderStyle",void 0,"styling"),{borderColor:{group:"styling",isStyleProp:!0,type:"Color",foldable:["top","left","right","bottom"],defaultValue:{top:Gc.Color.white,left:Gc.Color.white,bottom:Gc.Color.white,right:Gc.Color.white,valueOf:function(){return Gc.Color.white}},
get:function(){var a=this.getProperty("borderColor");return Object.assign({},a,{valueOf:function(){return a.left}})},set:function(a){a||(a=Gc.Color.white);a.isColor&&(a={top:a,left:a,right:a,bottom:a});this.setProperty("borderColor",a?Gc.obj.extract(a,["top","left","right","bottom"],function(g,l){return Gc.obj.isArray(l)?Gc.Color.fromTuple(l):l}):a)}}},Gc.generateUnfolded("borderColor",void 0,"styling"),{border:{group:"styling",isStyleProp:!0,derived:!0,after:["borderStyle","borderWidth","borderColor"],
get:function(){var a=this;return{get style(){return a.borderStyle},set style(g){a.borderStyle=g},get width(){return a.borderWidth},set width(g){a.borderWidth=g},get color(){return a.borderColor},set color(g){a.borderColor=g},get borderRadius(){return a.borderRadius},set borderRadius(g){a.borderRadius=g}}},set:function(a){"style"in a&&(this.borderStyle=a.style);"width"in a&&(this.borderWidth=a.width);"color"in a&&(this.borderColor=a.color);"radius"in a&&(this.borderRadius=a.radius)}},styleProperties:{group:"styling",
derived:!0,readOnly:!0,get:function(){var a=this.propertiesAndPropertySettings(),g=a.properties,l=[];a=$jscomp.makeIterator(a.order);for(var r=a.next();!r.done;r=a.next())r=r.value,g[r].isStyleProp&&l.push(r);return l}},style:{group:"styling",derived:!0,readOnly:!0,get:function(){for(var a=this.styleProperties,g={},l=0;l<a.length;l++){var r=a[l];g[r]=this[r]}return g}},epiMorph:{group:"core",doc:"epi morphs are 'transient' morphs, i.e. meta objects that should not be serialized like halo items, menus, etc.",
defaultValue:!1},respondsToVisibleWindow:{group:"interaction",doc:"Morphs will respond to changes to the visible browser window and a call will be made to the morph's relayout function, supplying the event generated",defaultValue:!1},installedFonts:{doc:"custom fonts can be installed from a respective morph, and are then kept as part of this morph's state in order to be loaded again the next time the it is cold loaded. (i.e. deserialization of a part)",defaultValue:{},set:function(a){var g=Gc.arr.without(Gc.obj.keys(this.installedFonts||
{}),"_rev"),l=Gc.arr.without(Gc.obj.keys(a||{}),"_rev");this.setProperty("installedFonts",a);this.ensureInstalledFonts(g,l)},get:function(){return this.getProperty("installedFonts")||{}}},metadata:{group:"core"}})}},{key:"styleClasses",get:function(){if(this.hasOwnProperty("_styclassNames"))return this._styleClasses;for(var a=this,g=[];a&&a!==Object;)g.push(a[Symbol.for("__LivelyClassName__")]),a=a[Symbol.for("lively-instance-superclass")];return this._styleClasses=g}}],e,{pathInPackage:function(){return"morph.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:1640,end:78989})}(void 0));Gc.Morph=Ll;Gc.Morph=Ll;Gc.Morph=Ll;var xB=Da("am",function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/morph.js"),m=e.hasOwnProperty("Ellipse")&&"function"===typeof e.Ellipse?e.Ellipse:e.Ellipse=function(a){a&&a[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return dc(m,b,void 0,[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Ellipse"}},{key:"properties",get:function(){return{borderRadius:{derived:!0,get:function(){var a=this;return{top:this.borderRadiusTop,right:this.borderRadiusRight,left:this.borderRadiusLeft,bottom:this.borderRadiusBottom,valueOf:function(){return a.borderRadiusLeft}}}},borderRadiusLeft:{get:function(){return this.height},set:function(){}},borderRadiusRight:{get:function(){return this.height},
set:function(){}},borderRadiusTop:{get:function(){return this.width},set:function(){}},borderRadiusBottom:{get:function(){return this.width},set:function(){}}}}}],e,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:78999,end:79748})}(Gc.Morph));Gc.Ellipse=xB;Gc.Ellipse=xB;Gc.Ellipse=xB;var gE=
function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/morph.js"),m=e.hasOwnProperty("Triangle")&&"function"===typeof e.Triangle?e.Triangle:e.Triangle=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return dc(m,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){a=void 0===a?{}:a;dc._get(Object.getPrototypeOf(m.prototype),Symbol.for("lively-instance-initialize"),this).call(this,a);this.update()}},
{key:"onChange",value:function(a){("extent"==a.prop||"direction"==a.prop||"fill"==a.prop&&a.value)&&this.update();dc._get(Object.getPrototypeOf(m.prototype),"onChange",this).call(this,a)}},{key:"update",value:function(){var a=this.extent,g=a.x;a=a.y;g!=a&&(this.extent=Gc.pt(Math.max(g,a),Math.max(g,a)));this.origin=Gc.pt(g/2,a/2);var l=this.triangleFill=this.fill||this.triangleFill;this.fill=null;g={width:g/2,style:"solid",color:l};a={width:a/2,style:"solid",color:Gc.Color.transparent};switch(this.direction){case "down":var r=
"borderLeft";var v="borderRight";var y="borderTop";break;case "up":r="borderLeft";v="borderRight";y="borderBottom";break;case "left":r="borderBottom";v="borderTop";y="borderRight";break;case "right":r="borderBottom",v="borderTop",y="borderLeft"}l={};Object.assign(this,(l[r]=a,l[v]=a,l[y]=g,l))}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Triangle"}},{key:"properties",get:function(){return{direction:{defaultValue:"up"},triangleFill:{after:["fill"],initialize:function(){this.triangleFill=
this.fill}}}}}],e,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:79757,end:81172})}(Gc.Morph);Gc.Triangle=gE;Gc.Triangle=gE;Gc.Triangle=gE;var Ty=Da("I",function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/morph.js"),m=e.hasOwnProperty("Image")&&"function"===typeof e.Image?
e.Image:e.Image=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return dc(m,b,[{key:"__deserialize__",value:function(a,g,l,r){this._isDeserializing=!0;dc._get(Object.getPrototypeOf(m.prototype),"__deserialize__",this).call(this,a,g,l,r)}},{key:"__after_deserialize__",value:function(a,g,l){delete this._isDeserializing;dc._get(Object.getPrototypeOf(m.prototype),"__after_deserialize__",this).call(this,a,g,l)}},{key:"isImage",
get:function(){return!0}},{key:"ratio",get:function(){var a=this.naturalExtent;return a.x/a.y}},{key:"setWidthKeepingRatio",value:function(a){this.width=a;this.height=a/this.ratio}},{key:"setHeightKeepingRatio",value:function(a){this.width=this.ratio*a;this.height=a}},{key:"loadUrl",value:function(a,g){var l=this;g=void 0===g?this.autoResize:g;var r=this.autoResize;this.autoResize=g;this.imageUrl=a;return Gc.promise.finally(this.whenLoaded(),function(){return l.autoResize=r})}},{key:"whenLoaded",
value:function(){var a=this;return this.isLoaded?Promise.resolve(this):new Promise(function(g,l){var r=a.imageUrl;a.imageElement(function(v){a.imageUrl!==r&&l(Error("url changed ("+r+" => "+a.imageUrl+")"));a.naturalExtent=Gc.pt(v.width,v.height);a.isLoaded=!0;g(a)})})}},{key:"determineNaturalExtent",value:function(){var a=this;return this.whenLoaded().then(function(){return a.naturalExtent})}},{key:"render",value:function(a){this._requestMasterStyling&&(this.master&&this.master.applyIfNeeded(!0),
this._requestMasterStyling=!1);return a.renderImage(this)}},{key:"clear",value:function(){return this.loadUrl("data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",!1)}},{key:"imageElement",value:function(a){var g=this;return new Promise(function(l,r){var v=g.env.domEnv.document.createElement("img");v.onload=function(){l(v);"function"===typeof a&&a(v)};v.src=g.imageUrl})}},{key:"canvasElementAndContext",value:function(){var a=this,g,l,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){if(1==
y.nextAddress)return g=a.env.domEnv.document,y.yield(a.imageElement(),2);l=y.yieldResult;r=g.createElement("canvas");v=r.getContext("2d");r.width=l.width;r.height=l.height;v.drawImage(l,0,0,l.width,l.height);return y.return({canvas:r,ctx:v,image:l})})}},{key:"imageData",value:function(a){var g=this,l,r,v,y,A,E,F,H;return $jscomp.asyncExecutePromiseGeneratorProgram(function(I){if(1==I.nextAddress)return I.yield(g.canvasElementAndContext(),2);l=I.yieldResult;r=l.ctx;v=l.image;a||(a=Gc.rect(0,0,v.width,
v.height));y=a;A=y.x;E=y.y;F=y.width;H=y.height;console.log(A,E);return I.return(r.getImageData(A,E,F,H))})}},{key:"pixelAt",value:function(a){var g=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){return 1==l.nextAddress?l.yield(g.imageData(a.extent(Gc.pt(1,1))),2):l.return(l.yieldResult.data)})}},{key:"colorAt",value:function(a){var g=this,l,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){return 1==v.nextAddress?(l=Gc.Color,r=l.fromTuple8Bit,v.yield(g.pixelAt(a),
2)):v.return(r.call(l,v.yieldResult))})}},{key:"loadArrayBuffer",value:function(a,g){a=new Uint8Array(a);a=new Blob([a],{type:"image/jpeg"});this.imageUrl=(window.URL||window.webkitURL).createObjectURL(a);this.makeDirty()}},{key:"convertToBase64",value:function(){var a=this,g,l,r,v,y,A,E;return $jscomp.asyncExecutePromiseGeneratorProgram(function(F){if(1==F.nextAddress)return g=a.imageUrl,l=g.slice(g.lastIndexOf(".")+1,g.length).toLowerCase(),"jpg"===l?l="jpeg":"svg"===l&&(l="svg+xml"),["gif","jpeg",
"png","tiff","svg+xml"].includes(l)||(l="gif"),g.startsWith("http")||(g=location.origin+"/"+g),F.yield(System.import("lively.ide/shell/shell-interface"),2);if(3!=F.nextAddress)return r=F.yieldResult,v=r.runCommand,y='curl --silent "'+g+'" | openssl base64',F.yield(v(y).whenDone(),3);A=F.yieldResult;E=A.stdout;return F.return(a.loadUrl("data:image/"+l+";base64,"+E,!1))})}},{key:"downloadImage",value:function(){var a=this.imageUrl;if(a.match(/^data:image/)){var g=this.name||"image-from-lively";var l=
a.match(/image\/([^;]+)/);l&&l[1]&&(g+="."+l[1])}else g||(g=Gc.arr.last(a.split("/")));l=document.createElement("a");l.download=g;l.href=a;l.click()}},{key:"convertTo",value:function(a,g){g||(g=1);var l=this.canvasElementAndContext(),r=l.ctx,v=l.canvas;l=l.image;var y=this.width,A=this.height;v.width=l.width;v.height=l.height;r.drawImage(l,0,0,y,A);return this.loadUrl(v.toDataURL(a,g),!1)}},{key:"resampleImageToFitBounds",value:function(){var a=this,g,l,r,v,y,A,E,F,H,I,M;return $jscomp.asyncExecutePromiseGeneratorProgram(function(N){if(1==
N.nextAddress)return N.yield(a.canvasElementAndContext(),2);g=N.yieldResult;l=g.ctx;r=g.canvas;v=g.image;y=a;A=y.width;E=y.height;F=v;H=F.width;I=F.height;r.width=H;r.height=I;l.drawImage(v,0,0,A,E);M=l.getImageData(0,0,H,I);r.width=A;r.height=E;l.putImageData(M,0,0);return N.return(a.loadUrl(r.toDataURL(),!1))})}},{key:"crop",value:function(a){var g=this.canvasElementAndContext(),l=g.ctx,r=g.canvas;g=g.image;var v=this.innerBounds(),y=g.width,A=g.height;a=v.intersection(a);a=new Gc.Rectangle(a.x/
v.width,a.y/v.height,a.width/v.width,a.height/v.height);a=$jscomp.makeIterator((new Gc.Rectangle(0,0,y,A)).divide([a])).next().value;r.width=y;r.height=A;l.drawImage(g,0,0,y,A);g=l.getImageData(a.x,a.y,a.width,a.height);r.width=a.width;r.height=a.height;l.putImageData(g,0,0);return this.loadUrl(r.toDataURL(),!1)}},{key:"interactivelyChangeImageURL",value:function(){var a=this,g;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){if(1==l.nextAddress)return l.yield(a.world().prompt("Enter image url",
{historyId:"lively.morphic-image-url-inputs",input:a.imageUrl.startsWith("data:")?"":a.imageUrl,requester:a}),2);g=l.yieldResult;"string"===typeof g&&(a.imageUrl=g);l.jumpToEnd()})}},{key:"menuItems",value:function(){var a=this,g=dc._get(Object.getPrototypeOf(m.prototype),"menuItems",this).call(this);g.unshift(["change image url...",function(){return a.interactivelyChangeImageURL()}],["resize image to to fit world",function(){var l=Math.min(a.world().visibleBounds().width/a.naturalExtent.x,a.world().visibleBounds().height/
a.naturalExtent.y);a.extent=a.naturalExtent.scaleBy(l)}],["resize image to its real image size",function(){return a.extent=a.naturalExtent}],["resample image to fit current bounds",function(){return a.resampleImageToFitBounds()}],{isDivider:!0});return g}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Image"}},{key:"properties",get:function(){return{imageUrl:{isStyleProp:!0,copyAssetOnFreeze:!0,after:["extent","autoResize"],defaultValue:System.decanonicalize("lively.morphic/lively-web-logo-small.svg"),
set:function(a){var g=this;this.isLoaded=!1;this.setProperty("imageUrl",a);this.setProperty("naturalExtent",null);var l=this.autoResize&&!this._isDeserializing;this.whenLoaded().then(function(){g.imageUrl===a&&(g.isLoaded=!0,l&&(g.extent=g.naturalExtent))})}},fill:{defaultValue:Gc.Color.transparent},naturalExtent:{defaultValue:null},isLoaded:{defaultValue:!1,serialize:!1},autoResize:{isStyleProp:!0,defaultValue:!1}}}}],e,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:81181,end:90398})}(Gc.Morph));Gc.Image=Ty;Gc.Image=Ty;Gc.Image=Ty;var EH=function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/morph.js"),m=e.hasOwnProperty("PathPoint")&&"function"===typeof e.PathPoint?e.PathPoint:e.PathPoint=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};
return dc(m,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a,g){g=void 0===g?{}:g;this.path=a;this._isSmooth=g.isSmooth||!1;this.x=g.position?g.position.x:g.x||0;this.y=g.position?g.position.y:g.y||0;this._controlPoints=g.controlPoints}},{key:"__dont_serialize__",get:function(){return["attributeConnections","$$controlPoints","$$position","doNotCopyProperties","doNotSerialize"]}},{key:"isPathPoint",get:function(){return!0}},{key:"isSmooth",get:function(){return this._isSmooth||!1}},
{key:"isSmooth",set:function(a){this._isSmooth!==a&&(this._isSmooth=a,this.adaptControlPoints(a))}},{key:"position",get:function(){return Gc.pt(this.x,this.y)}},{key:"position",set:function(a){var g=a.y;this.x=a.x;this.y=g;this.path.makeDirty()}},{key:"moveBy",value:function(a){this.position=this.position.addPt(a);this.path.onVertexChanged(this);return this}},{key:"copy",value:function(){var a=new Gc.ExpressionSerializer;return new Gc.PathPoint(this.path,a.deserializeExprObj(this.__serialize__()))}},
{key:"__serialize__",value:function(){return{__expr__:("({\n         position: "+this.position.toString(!1)+",\n         isSmooth: "+this.isSmooth+",\n         controlPoints: {\n           next: "+this.controlPoints.next.toString(!1)+",\n           previous: "+this.controlPoints.previous.toString(!1)+"\n         }\n      })").replace(/[\n|\s]/g,""),bindings:{"lively.graphics/geometry-2d.js":["pt"]}}}},{key:"controlPoints",get:function(){return this._controlPoints||{next:Gc.pt(0,0),previous:Gc.pt(0,
0)}}},{key:"controlPoints",set:function(a){var g=a=void 0===a?{}:a;a=g.next;g=g.previous;this._controlPoints={next:a?Gc.Point.fromLiteral(a):Gc.pt(0,0),previous:g?Gc.Point.fromLiteral(g):Gc.pt(0,0)};this.path.makeDirty()}},{key:"moveNextControlPoint",value:function(a){this.moveControlPoint("next",a)}},{key:"movePreviousControlPoint",value:function(a){this.moveControlPoint("previous",a)}},{key:"moveControlPoint",value:function(a,g){var l=this.controlPoints[a];l=l?l.addPt(g):g;g="next"==a?"previous":
"next";var r=this.controlPoints[g];this.isSmooth&&(r=l.negated().normalized().scaleBy(r.r()));var v={};this.controlPoints=(v[a]=l,v[g]=r,v);this.path.onVertexChanged(this)}},{key:"pointOnLine",value:function(a,g,l,r){a=Gc.pt(a.x,a.y);g=Gc.pt(g.x,g.y);a=g.subPt(a);var v=a.scaleBy(1/a.r());l=g.subPt(l).dotProduct(v);return g.subPt(v.scaleBy(Math.max(1,Math.min(l,a.r())))).addXY(r,r)}},{key:"nextVertex",get:function(){return this.path.vertexAfter(this)}},{key:"previousVertex",get:function(){return this.path.vertexBefore(this)}},
{key:"adaptControlPoints",value:function(a){var g=this.nextVertex,l=this.previousVertex,r=this.position,v=this.path,y=v.vertices,A=y.indexOf(this),E=0===A;y=A===y.length-1;l=l?l.position:r;g=g?g.position:r;a?(a=this.pointOnLine(l,g,r,v.borderWidth),this.controlPoints={previous:E?Gc.pt(0,0):a.subPt(g),next:a.subPt(l)}):this.controlPoints={previous:E?Gc.pt(0,0):l.subPt(r).scaleBy(.5),next:y?Gc.pt(0,0):g.subPt(r).scaleBy(.5)};v.onVertexChanged(this)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"PathPoint"}}],
e,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:90407,end:94125})}(void 0);Gc.PathPoint=EH;Gc.PathPoint=EH;Gc.PathPoint=EH;var yB=Da("ay",function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/morph.js"),m=e.hasOwnProperty("Path")&&"function"===typeof e.Path?e.Path:e.Path=function(a){a&&
a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return dc(m,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){a=void 0===a?{}:a;dc._get(Object.getPrototypeOf(m.prototype),Symbol.for("lively-instance-initialize"),this).call(this,Object.assign({},Gc.obj.dissoc(a,"origin")));this.adjustOrigin(a.origin||this.origin);this.position=a.position||this.position;this.updateBounds(this.vertices)}},{key:"__after_deserialize__",value:function(a,
g,l){dc._get(Object.getPrototypeOf(m.prototype),"__after_deserialize__",this).call(this,a,g,l);this.updateBounds(this.vertices)}},{key:"__additionally_serialize__",value:function(a,g,l,r){dc._get(Object.getPrototypeOf(m.prototype),"__additionally_serialize__",this).call(this,a,g,l,r);g=this.getProperty("draggable");g!=this.propertiesAndPropertySettings().properties.draggable.defaultValue&&(a.props.draggable={value:g});if(g=this.borderColor.valueOf())a.props.borderColor={key:"borderColor",value:l.expressionSerializer.exprStringEncode({__expr__:g.toJSExpr(),
bindings:{"lively.graphics/geometry-2d.js":["pt","rect"],"lively.graphics/color.js":["Color",Gc.getClassName(g)]}})}}},{key:"isPath",get:function(){return!0}},{key:"isSvgMorph",get:function(){return!0}},{key:"onVertexChanged",value:function(a){this.makeDirty();this.updateBounds(this.vertices)}},{key:"copyVertices",value:function(){return this.vertices.map(function(a){return a.copy()})}},{key:"updateBounds",value:function(a){a=void 0===a?this.vertices:a;if(a.length&&!this._adjustingVertices){this._adjustingVertices=
!0;var g=this.origin,l=this.extent,r=g.x/l.x;l=g.y/l.y;var v=[];a.forEach(function(A,E){var F=A.isSmooth,H=A.position,I=A.controlPoints||{};A=I.next;I=I.previous;v.push(H);F&&0<E&&E<a.length-1&&v.push(H.addPt(A),H.addPt(I))});g=Gc.Rectangle.unionPts(v);r=Gc.pt(g.width*r,g.height*l);var y=g.topLeft();a.forEach(function(A){return A.moveBy(y.negated())});this.moveBy(this.getTransform().transformDirection(y));this.extent=g.extent().maxPt(Gc.pt(this.borderWidth,this.borderWidth));this.origin=r;this._adjustingVertices=
!1}}},{key:"onChange",value:function(a){var g=a.prop,l=a.value,r=a.prevValue,v=this._adjustingVertices,y=this._adjustingOrigin;"extent"==g&&l&&r&&!v&&this.adjustVertices(l.scaleByPt(r.inverted()));(!y&&"vertices"===g||"borderWidthLeft"===g)&&this.updateBounds("vertices"==g?l:this.vertices);v||"origin"!==g||this.updateBounds(this.vertices);dc._get(Object.getPrototypeOf(m.prototype),"onChange",this).call(this,a)}},{key:"vertexBefore",value:function(a){a=this.vertices.indexOf(a)-1;return this.vertices[0<=
a?a:this.vertices.length-1]}},{key:"vertexAfter",value:function(a){a=this.vertices.indexOf(a)+1;return this.vertices[a>this.vertices.length-1?0:a]}},{key:"adjustVertices",value:function(a){var g=this,l=this.vertices;l&&l.forEach(function(r){var v=r.controlPoints,y=v.next;v=v.previous;y=y.scaleByPt(a);v=v.scaleByPt(a);r.position=r.position.addPt(g.origin).scaleByPt(a).subPt(g.origin);r.controlPoints={next:y,previous:v}})}},{key:"adjustOrigin",value:function(a){this._adjustingOrigin=!0;var g=this.origin;
this.vertices.forEach(function(l){return l.position=g.subPt(a).addXY(l.x,l.y)});dc._get(Object.getPrototypeOf(m.prototype),"adjustOrigin",this).call(this,a);this._adjustingOrigin=!1}},{key:"addVertex",value:function(a,g){g=void 0===g?null:g;var l=this.vertices;g="number"===typeof g?g:g&&g.isPathPoint?l.indexOf(g):void 0;"number"===typeof g&&-1<g?l.splice(g,0,a):l.push(a);this.vertices=l}},{key:"addVertexCloseTo",value:function(a){var g=this.verticesCloseTo(a),l=g.closest,r=l.length;l=l.vertex;g=g.next;
a=this.findClosestPointOnPath(a,10,3);return this.addVertex(a.point,a.length<=r?l:g?g.vertex:null)}},{key:"render",value:function(a){return a.renderPath(this)}},{key:"_pathNode",get:function(){var a=Gc.PropertyPath("env.renderer").get(this);return(a=a&&a.getNodeForMorph(this))&&a.querySelector("#svg"+Gc.string.regExpEscape(this.id))}},{key:"verticesCloseTo",value:function(a,g){g=void 0===g?!0:g;for(var l=this.vertices,r=Infinity,v=-1,y=0;y<l.length;y++){var A=l[y].position.dist(a);A>=r||(r=A,v=y)}a=
0===v?null:{index:v-1,vertex:l[v-1]};r=v===l.length-1?null:{index:v+1,vertex:l[v+1]};l={index:v,vertex:l[v]};g&&(g=this._pathNode,a&&(v=this.findClosestPointOnPath(a.vertex.position,6,3,g).length,a.length=v),r&&(v=this.findClosestPointOnPath(r.vertex.position,6,3,g).length,r.length=v),g=this.findClosestPointOnPath(l.vertex.position,20,3,g).length,l.length=g);return{previous:a,next:r,closest:l}}},{key:"findClosestPointOnPath",value:function(a,g,l,r){function v(y,A,E,F,H,I,M){E=void 0===E?10:E;F=void 0===
F?3:F;H=void 0===H?0:H;I=void 0===I?y.getTotalLength():I;M=void 0===M?0:M;var N=I,W=E;I=[];var X=(H-N)/(W-1),ea=0;I.push([Gc.Point.ensure(y.getPointAtLength(N)),N,ea]);for(ea=1;ea<W-1;ea++){var Aa=N+ea*X;I.push([Gc.Point.ensure(y.getPointAtLength(Aa)),Aa,ea])}I.push([Gc.Point.ensure(y.getPointAtLength(H)),H,ea]);H=Infinity;N=-1;W=$jscomp.makeIterator(I);for(X=W.next();!X.done;X=W.next())ea=$jscomp.makeIterator(X.value),X=ea.next().value,ea.next(),ea=ea.next().value,X=A.dist(X),X>=H||(H=X,N=ea);if(M>=
F)return A=$jscomp.makeIterator(I[N]),y=A.next().value,A=A.next().value,{point:y,length:A};H=I[Math.max(0,N-1)][1];I=I[Math.min(I.length-1,N+1)][1];return v(y,A,E,F,H,I,M+1)}r||(r=(r=this.env.renderer.getNodeForMorph(this))&&r.querySelector("#svg"+Gc.string.regExpEscape(this.id)));return r?v(r,a,g,l):{length:0,point:a}}},{key:"onDragStart",value:function(a){var g=a.domEvt.target,l=(new Gc.PropertyPath("attributes.class.value")).get(g);if(l&&l.includes("path-point"))l=$jscomp.makeIterator(l.match(/path-point-([0-9]+)(?:-control-([0-9]+))?$/)),
l.next(),a=l.next().value,l=l.next().value,this._controlPointDrag={marker:g,n:Number(a)},void 0!==l&&(this._controlPointDrag.ctrlN=Number(l));else return dc._get(Object.getPrototypeOf(m.prototype),"onDragStart",this).call(this,a)}},{key:"onDrag",value:function(a){if(!this._controlPointDrag)return dc._get(Object.getPrototypeOf(m.prototype),"onDrag",this).call(this,a);var g=this._controlPointDrag,l=g.n,r=g.ctrlN,v=this.vertices;if(g=v[l])a=this.getInverseTransform().transformDirection(a.state.dragDelta),
void 0===r?(g.moveBy(a),a=v[l-1],v=v[l+1],a&&10>a.position.dist(g.position)?this._controlPointDrag.maybeMerge=[l-1,l]:v&&10>v.position.dist(g.position)?this._controlPointDrag.maybeMerge=[l,l+1]:this._controlPointDrag.maybeMerge=void 0):1===r?g.movePreviousControlPoint(a):2===r&&g.moveNextControlPoint(a)}},{key:"onDragEnd",value:function(a){a=this.vertices;var g=this._controlPointDrag;if(g&&(g=g.maybeMerge,delete this._controlPointDrag,g)){var l=$jscomp.makeIterator(g);g=l.next().value;l=l.next().value;
a[g].controlPoints.next=a[l].controlPoints.next;a.splice(l,1);this.vertices=a}}},{key:"onMouseDown",value:function(a){dc._get(Object.getPrototypeOf(m.prototype),"onMouseDown",this).call(this,a);2===a.state.clickCount&&this.addVertexCloseTo(this.localize(a.position))}},{key:"menuItems",value:function(){var a=this,g=Gc.Icon.textAttribute("check-square",{textStyleClasses:["far"]}),l=Gc.Icon.textAttribute("square",{textStyleClasses:["far"]});l[1].paddingRight="7px";g[1].paddingRight="5px";return[[[].concat($jscomp.arrayFromIterable(this.showControlPoints?
g:l),[" control points"]),function(){return a.showControlPoints=!a.showControlPoints}],[[].concat($jscomp.arrayFromIterable(this.isSmooth?g:l),[" smooth"]),function(){return a.isSmooth=!a.isSmooth}],{isDivider:!0}].concat($jscomp.arrayFromIterable(dc._get(Object.getPrototypeOf(m.prototype),"menuItems",this).call(this)))}},{key:"getPointOnPath",value:function(a){if(!this._pathNode)return Gc.pt(0,0);a=this._pathNode.getPointAtLength(this._pathNode.getTotalLength()*a)||Gc.pt(0,0);return Gc.pt(a.x,a.y)}}],
[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Path"}},{key:"properties",get:function(){return{borderColor:{isStyleProp:!0,type:"ColorGradient",foldable:["top","left","right","bottom"],set:function(a){a||(a=Gc.Color.white);if(a.isColor||a.isGradient)a={top:a,left:a,right:a,bottom:a};this.setProperty("borderColor",Gc.obj.extract(a,["top","left","right","bottom"],function(g,l){return Gc.obj.isArray(l)?Gc.Color.fromTuple(l):l}))}},showControlPoints:{defaultValue:!1},vertices:{defaultValue:[],
after:["isSmooth","borderWidth"],before:["extent","origin"],type:"Vertices",set:function(a){var g=this,l=this.isSmooth;this._adjustingVertices=!0;a=a.map(function(r){return r.isPathPoint?Object.assign(r,{path:g}):new Gc.PathPoint(g,Object.assign({isSmooth:l},r))});this.setProperty("vertices",a);this._adjustingVertices=!1;this.updateBounds(a)}},startMarker:{defaultValue:null,type:"Object"},endMarker:{defaultValue:null,type:"Object"},endStyle:{type:"Enum",values:["butt","round","square"],defaultValue:"butt"},
drawnProportion:{type:"Number",isFloat:!0,min:-1,max:1,defaultValue:0},cornerStyle:{type:"Enum",values:["arcs","bevel","miter","miter-clip","round"],defaultValue:"miter"},draggable:{get:function(){return this.getProperty("draggable")||this.showControlPoints}},isSmooth:{defaultValue:!1,before:["vertices"],type:"Boolean",set:function(a){this.setProperty("isSmooth",a);this.vertices&&(this._adjustingVertices=!0,this.vertices.forEach(function(g){return g.isSmooth=a}),this._adjustingVertices=!1,this.updateBounds(this.vertices))}}}}}],
e,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:94134,end:107447})}(Gc.Morph));Gc.Path=yB;Gc.Path=yB;Gc.Path=yB;var hE=Da("az",function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/morph.js"),m=e.hasOwnProperty("Polygon")&&"function"===typeof e.Polygon?e.Polygon:e.Polygon=
function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return dc(m,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){if(a.vertices&&2<a.vertices.length)dc._get(Object.getPrototypeOf(m.prototype),Symbol.for("lively-instance-initialize"),this).call(this,a);else throw Error("A polygon requires 3 or more vertices!");}},{key:"isPolygon",get:function(){return!0}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Polygon"}}],
e,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:107456,end:107710})}(Gc.Path));Gc.Polygon=hE;Gc.Polygon=hE;Gc.Polygon=hE;var iE=function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/morph.js"),m=e.hasOwnProperty("LineMorph")&&"function"===typeof e.LineMorph?e.LineMorph:e.LineMorph=
function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return dc(m,b,[{key:"isPolygon",get:function(){return!0}},{key:"update",value:function(){if(!this._isUpdating){this._isUpdating=!0;var a=this.line,g=this.height,l=a.toVector();this.setProperty("position",this.position.addPt(a.perpendicularLine(0,g,"cc").toVector()));this.width=l.fastR();this.rotation=l.theta();this.vec=l;this._isUpdating=!1}}}],[{key:Symbol.for("__LivelyClassName__"),
get:function(){return"LineMorph"}},{key:"properties",get:function(){return{borderWidth:{defaultValue:0},fill:{defaultValue:Gc.Color.black},height:{defaultValue:1},line:{defaultValue:Gc.Line.fromCoords(0,0,0,0),set:function(a){this.setProperty("line",a);this.update(a)}},start:{derived:!0,after:["line"],get:function(a){return this.line.start},set:function(a){this.line=this.line.withStart(a)}},end:{derived:!0,after:["line"],get:function(a){return this.line.end},set:function(a){this.line=this.line.withEnd(a)}},
position:{derived:!0,after:["line"],get:function(a){return this.start},set:function(a){var g=a.subPt(this.start),l=this.rotation;this.line=new Gc.Line(a,this.end.addPt(g));this.rotation=l}}}}}],e,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:107719,end:109160})}(Gc.Morph);Gc.LineMorph=iE;
Gc.LineMorph=iE;Gc.LineMorph=iE;var rqa=Object.freeze({__proto__:null,Morph:Ll,Ellipse:xB,Triangle:gE,Image:Ty,PathPoint:EH,Path:yB,Polygon:hE,LineMorph:iE}),HV="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,sqa={},n9=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,tqa=sqa=function(b,e){function m(fa){var oa=fa.match(/\n/g);oa&&(Ma+=oa.length);oa=fa.lastIndexOf("\n");K=~oa?fa.length-oa:K+fa.length}function a(){var fa={line:Ma,column:K};return function(oa){oa.position=new g(fa);
A(/^\s*/);return oa}}function g(fa){(this||HV).start=fa;(this||HV).end={line:Ma,column:K};(this||HV).source=e.source}function l(fa){var oa=Error(e.source+":"+Ma+":"+K+": "+fa);oa.reason=fa;oa.filename=e.source;oa.line=Ma;oa.column=K;oa.source=b;if(e.silent)aa.push(oa);else throw oa;}function r(){return A(/^{\s*/)}function v(){return A(/^}/)}function y(){var fa,oa=[];A(/^\s*/);for(E(oa);b.length&&"}"!=b.charAt(0)&&(fa=ea()||Aa());)!1!==fa&&(oa.push(fa),E(oa));return oa}function A(fa){if(fa=fa.exec(b)){var oa=
fa[0];m(oa);b=b.slice(oa.length);return fa}}function E(fa){var oa;for(fa=fa||[];oa=F();)!1!==oa&&fa.push(oa);return fa}function F(){var fa=a();if("/"==b.charAt(0)&&"*"==b.charAt(1)){for(var oa=2;""!=b.charAt(oa)&&("*"!=b.charAt(oa)||"/"!=b.charAt(oa+1));)++oa;oa+=2;if(""===b.charAt(oa-1))return l("End of comment missing");var gb=b.slice(2,oa-2);K+=2;m(gb);b=b.slice(oa);K+=2;return fa({type:"comment",comment:gb})}}function H(){var fa=A(/^([^{]+)/);if(fa)return Mw(fa[0]).replace(/\/\*([^*]|[\r\n]|(\*+([^*/]|[\r\n])))*\*\/+/g,
"").replace(/"(?:\\"|[^"])*"|'(?:\\'|[^'])*'/g,function(oa){return oa.replace(/,/g,"\u200c")}).split(/\s*(?![^(]*\)),\s*/).map(function(oa){return oa.replace(/\u200C/g,",")})}function I(){var fa=a(),oa=A(/^(\*?[-#\/\*\\\w]+(\[[0-9a-z_-]+\])?)\s*/);if(oa){oa=Mw(oa[0]);if(!A(/^:\s*/))return l("property missing ':'");var gb=A(/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^\)]*?\)|[^};])+)/);fa=fa({type:"declaration",property:oa.replace(n9,""),value:gb?Mw(gb[0]).replace(n9,""):""});A(/^[;\s]*/);return fa}}function M(){var fa=
[];if(!r())return l("missing '{'");E(fa);for(var oa;oa=I();)!1!==oa&&(fa.push(oa),E(fa));return v()?fa:l("missing '}'")}function N(){for(var fa,oa=[],gb=a();fa=A(/^((\d+\.\d+|\.\d+|\d+)%?|[a-z]+)\s*/);)oa.push(fa[1]),A(/^,\s*/);if(oa.length)return gb({type:"keyframe",values:oa,declarations:M()})}function W(){var fa=a(),oa=A(/^@([-\w]+)?keyframes\s*/);if(oa){var gb=oa[1];oa=A(/^([-\w]+)\s*/);if(!oa)return l("@keyframes missing name");oa=oa[1];if(!r())return l("@keyframes missing '{'");for(var zb,va=
E();zb=N();)va.push(zb),va=va.concat(E());return v()?fa({type:"keyframes",name:oa,vendor:gb,keyframes:va}):l("@keyframes missing '}'")}}function X(fa){var oa=new RegExp("^@"+fa+"\\s*([^;]+);");return function(){var gb=a(),zb=A(oa);if(zb){var va={type:fa};va[fa]=zb[1].trim();return gb(va)}}}function ea(){if("@"==b[0]){var fa;if(!(fa=W())){fa=a();var oa=A(/^@media *([^{]+)/);if(oa)if(oa=Mw(oa[1]),r()){var gb=E().concat(y());fa=v()?fa({type:"media",media:oa,rules:gb}):l("@media missing '}'")}else fa=
l("@media missing '{'");else fa=void 0}fa||(fa=a(),fa=(oa=A(/^@custom-media\s+(--[^\s]+)\s*([^{;]+);/))?fa({type:"custom-media",name:Mw(oa[1]),media:Mw(oa[2])}):void 0);fa||(fa=a(),(oa=A(/^@supports *([^{]+)/))?(oa=Mw(oa[1]),r()?(gb=E().concat(y()),fa=v()?fa({type:"supports",supports:oa,rules:gb}):l("@supports missing '}'")):fa=l("@supports missing '{'")):fa=void 0);if(!(fa=fa||T()||U()||pa()))if(fa=a(),gb=A(/^@([-\w]+)?document *([^{]+)/))if(oa=Mw(gb[1]),gb=Mw(gb[2]),r()){var zb=E().concat(y());
fa=v()?fa({type:"document",document:gb,vendor:oa,rules:zb}):l("@document missing '}'")}else fa=l("@document missing '{'");else fa=void 0;if(!fa)if(fa=a(),A(/^@page */))if(oa=H()||[],r()){for(gb=E();zb=I();)gb.push(zb),gb=gb.concat(E());fa=v()?fa({type:"page",selectors:oa,declarations:gb}):l("@page missing '}'")}else fa=l("@page missing '{'");else fa=void 0;fa||(fa=a(),A(/^@host\s*/)?r()?(oa=E().concat(y()),fa=v()?fa({type:"host",rules:oa}):l("@host missing '}'")):fa=l("@host missing '{'"):fa=void 0);
if(!fa)if(fa=a(),A(/^@font-face\s*/))if(r()){for(oa=E();gb=I();)oa.push(gb),oa=oa.concat(E());fa=v()?fa({type:"font-face",declarations:oa}):l("@font-face missing '}'")}else fa=l("@font-face missing '{'");else fa=void 0;return fa}}function Aa(){var fa=a(),oa=H();if(!oa)return l("selector missing");E();return fa({type:"rule",selectors:oa,declarations:M()})}e=e||{};var Ma=1,K=1;g.prototype.content=b;var aa=[],T=X("import"),U=X("charset"),pa=X("namespace");return DS(function(){var fa=y();return{type:"stylesheet",
stylesheet:{source:e.source,rules:fa,parsingErrors:aa}}}())},Yga="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,o9={};o9=dL;dL.prototype.emit=function(b){return b};dL.prototype.visit=function(b){return this[b.type](b)};dL.prototype.mapVisit=function(b,e){var m="";e=e||"";for(var a=0,g=b.length;a<g;a++)m+=this.visit(b[a]),e&&a<g-1&&(m+=this.emit(e));return m};var p9=o9,ry="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,q9={},D4=p9,
uqa=vl;q9=an;uqa(an,D4);an.prototype.compile=function(b){return this.stylesheet(b)};an.prototype.stylesheet=function(b){return this.mapVisit(b.stylesheet.rules,"\n\n")};an.prototype.comment=function(b){return this.emit(this.indent()+"/*"+b.comment+"*/",b.position)};an.prototype.import=function(b){return this.emit("@import "+b.import+";",b.position)};an.prototype.media=function(b){return this.emit("@media "+b.media,b.position)+this.emit(" {\n"+this.indent(1))+this.mapVisit(b.rules,"\n\n")+this.emit(this.indent(-1)+
"\n}")};an.prototype.document=function(b){return this.emit("@"+(b.vendor||"")+"document "+b.document,b.position)+this.emit("  {\n"+this.indent(1))+this.mapVisit(b.rules,"\n\n")+this.emit(this.indent(-1)+"\n}")};an.prototype.charset=function(b){return this.emit("@charset "+b.charset+";",b.position)};an.prototype.namespace=function(b){return this.emit("@namespace "+b.namespace+";",b.position)};an.prototype.supports=function(b){return this.emit("@supports "+b.supports,b.position)+this.emit(" {\n"+this.indent(1))+
this.mapVisit(b.rules,"\n\n")+this.emit(this.indent(-1)+"\n}")};an.prototype.keyframes=function(b){return this.emit("@"+(b.vendor||"")+"keyframes "+b.name,b.position)+this.emit(" {\n"+this.indent(1))+this.mapVisit(b.keyframes,"\n")+this.emit(this.indent(-1)+"}")};an.prototype.keyframe=function(b){var e=b.declarations;return this.emit(this.indent())+this.emit(b.values.join(", "),b.position)+this.emit(" {\n"+this.indent(1))+this.mapVisit(e,"\n")+this.emit(this.indent(-1)+"\n"+this.indent()+"}\n")};
an.prototype.page=function(b){var e=b.selectors.length?b.selectors.join(", ")+" ":"";return this.emit("@page "+e,b.position)+this.emit("{\n")+this.emit(this.indent(1))+this.mapVisit(b.declarations,"\n")+this.emit(this.indent(-1))+this.emit("\n}")};an.prototype["font-face"]=function(b){return this.emit("@font-face ",b.position)+this.emit("{\n")+this.emit(this.indent(1))+this.mapVisit(b.declarations,"\n")+this.emit(this.indent(-1))+this.emit("\n}")};an.prototype.host=function(b){return this.emit("@host",
b.position)+this.emit(" {\n"+this.indent(1))+this.mapVisit(b.rules,"\n\n")+this.emit(this.indent(-1)+"\n}")};an.prototype["custom-media"]=function(b){return this.emit("@custom-media "+b.name+" "+b.media+";",b.position)};an.prototype.rule=function(b){var e=this.indent(),m=b.declarations;return m.length?this.emit(b.selectors.map(function(a){return e+a}).join(",\n"),b.position)+this.emit(" {\n")+this.emit(this.indent(1))+this.mapVisit(m,"\n")+this.emit(this.indent(-1))+this.emit("\n"+this.indent()+"}"):
""};an.prototype.declaration=function(b){return this.emit(this.indent())+this.emit(b.property+": "+b.value,b.position)+this.emit(";")};an.prototype.indent=function(b){(this||ry).level=(this||ry).level||1;return null!=b?((this||ry).level+=b,""):Array((this||ry).level).join((this||ry).indentation||"  ")};var vqa=q9,IV={},r9=Mi.Buffer;(function(b){var e=function(m){return"function"===typeof m?m:"function"===typeof r9?function(a){return(new r9(a,"base64")).toString("binary")}:"object"===typeof b.base64js?
function(a){a=b.base64js.b64ToByteArray(a);return Array.prototype.map.call(a,function(g){return String.fromCharCode(g)}).join("")}:function(){throw Error("You're probably in an old browser or an iOS webworker. It might help to include beatgammit's base64-js.");}}(b.atob);b.atob=e;IV&&(IV=e)})(window);var wqa=IV,xqa=/^xn--/,yqa=/[^\0-\x7E]/,$ga=/[\x2E\u3002\uFF0E\uFF61]/g,Zga={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},
Fv=Math.floor,JV=String.fromCharCode,s9=function(b,e){return b+22+75*(26>b)-((0!=e)<<5)},t9=function(b,e,m){var a=0;b=m?Fv(b/700):b>>1;for(b+=Fv(b/e);455<b;a+=36)b=Fv(b/35);return Fv(a+36*b/(b+38))},u9=function(b){var e=[],m=b.length,a=0,g=128,l=72,r=b.lastIndexOf("-");0>r&&(r=0);for(var v=0;v<r;++v)128<=b.charCodeAt(v)&&KA("not-basic"),e.push(b.charCodeAt(v));for(r=0<r?r+1:0;r<m;){v=a;for(var y=1,A=36;;A+=36){r>=m&&KA("invalid-input");var E=10>(H=b.charCodeAt(r++))-48?H-22:26>H-65?H-65:26>H-97?H-
97:36;(36<=E||E>Fv((2147483647-a)/y))&&KA("overflow");a+=E*y;var F=A<=l?1:A>=l+26?26:A-l;if(E<F)break;E=36-F;y>Fv(2147483647/E)&&KA("overflow");y*=E}y=e.length+1;l=t9(a-v,y,0==v);Fv(a/y)>2147483647-g&&KA("overflow");g+=Fv(a/y);a%=y;e.splice(a++,0,g)}var H;return String.fromCodePoint.apply(String,$jscomp.arrayFromIterable(e))},v9=function(b){for(var e=[],m=(b=F4(b)).length,a=128,g=0,l=72,r=$jscomp.makeIterator(b),v=r.next();!v.done;v=r.next()){var y=v.value;128>y&&e.push(JV(y))}for((y=r=e.length)&&
e.push("-");y<m;){var A=2147483647,E=$jscomp.makeIterator(b);for(v=E.next();!v.done;v=E.next())v=v.value,v>=a&&v<A&&(A=v);v=y+1;A-a>Fv((2147483647-g)/v)&&KA("overflow");g+=(A-a)*v;a=A;A=$jscomp.makeIterator(b);for(E=A.next();!E.done;E=A.next())if(E=E.value,E<a&&2147483647<++g&&KA("overflow"),E==a){var F=g;for(E=36;;E+=36){var H=E<=l?1:E>=l+26?26:E-l;if(F<H)break;F-=H;var I=36-H;e.push(JV(s9(H+F%I,0)));F=Fv(F/I)}e.push(JV(s9(F,0)));l=t9(g,v,y==r);g=0;++y}++g;++a}return e.join("")},zqa={version:"2.1.0",
ucs2:{decode:F4,encode:function(b){return String.fromCodePoint.apply(String,$jscomp.arrayFromIterable(b))}},decode:u9,encode:v9,toASCII:function(b){return E4(b,function(e){return yqa.test(e)?"xn--"+v9(e):e})},toUnicode:function(b){return E4(b,function(e){return xqa.test(e)?u9(e.slice(4).toLowerCase()):e})}},FH=function(b){switch(typeof b){case "string":return b;case "boolean":return b?"true":"false";case "number":return isFinite(b)?b:"";default:return""}},zB={};zB.decode=zB.parse=function(b,e,m,a){m=
m||"=";var g={};if("string"!=typeof b||0===b.length)return g;var l=/\+/g;b=b.split(e||"&");e=1E3;a&&"number"==typeof a.maxKeys&&(e=a.maxKeys);a=b.length;0<e&&a>e&&(a=e);for(e=0;e<a;++e){var r,v;var y=b[e].replace(l,"%20");var A=y.indexOf(m);0<=A?(r=y.substr(0,A),v=y.substr(A+1)):(r=y,v="");y=decodeURIComponent(r);A=decodeURIComponent(v);Object.prototype.hasOwnProperty.call(g,y)?Array.isArray(g[y])?g[y].push(A):g[y]=[g[y],A]:g[y]=A}return g};zB.encode=zB.stringify=function(b,e,m,a){return e=e||"&",
m=m||"=",null===b&&(b=void 0),"object"==typeof b?Object.keys(b).map(function(g){var l=encodeURIComponent(FH(g))+m;return Array.isArray(b[g])?b[g].map(function(r){return l+encodeURIComponent(FH(r))}).join(e):l+encodeURIComponent(FH(b[g]))}).join(e):a?encodeURIComponent(FH(a))+m+encodeURIComponent(FH(b)):""};var jE={},kv={isString:function(b){return"string"==typeof b},isObject:function(b){return"object"==typeof b&&null!==b},isNull:function(b){return null===b},isNullOrUndefined:function(b){return null==
b}};jE.parse=tG;jE.resolve=function(b,e){return tG(b,!1,!0).resolve(e)};jE.resolveObject=function(b,e){return b?tG(b,!1,!0).resolveObject(e):e};jE.format=function(b){kv.isString(b)&&(b=tG(b));return b instanceof ps?b.format():ps.prototype.format.call(b)};jE.Url=ps;var Aqa=/^([a-z0-9.+-]+:)/i,Bqa=/:[0-9]*$/,Cqa=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,Dqa="{}|\\^`".split("").concat('<>"` \r\n\t'.split("")),KV=["'"].concat(Dqa),w9=["%","/","?",";","#"].concat(KV),x9=["/","?","#"],y9=/^[+a-z0-9A-Z_-]{0,63}$/,
Eqa=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,Fqa={javascript:!0,"javascript:":!0},LV={javascript:!0,"javascript:":!0},kE={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};ps.prototype.parse=function(b,e,m){if(!kv.isString(b))throw new TypeError("Parameter 'url' must be a string, not "+typeof b);var a=b.indexOf("?");a=-1!==a&&a<b.indexOf("#")?"?":"#";b=b.split(a);b[0]=b[0].replace(/\\/g,"/");a=b=b.join(a);if(a=a.trim(),!m&&1===b.split("#").length)if(b=Cqa.exec(a))return this.path=
a,this.href=a,this.pathname=b[1],b[2]?(this.search=b[2],this.query=e?zB.parse(this.search.substr(1)):this.search.substr(1)):e&&(this.search="",this.query={}),this;if(b=Aqa.exec(a)){var g=(b=b[0]).toLowerCase();this.protocol=g;a=a.substr(b.length)}if(m||b||a.match(/^\/\/[^@\/]+@[^@\/]+/)){var l="//"===a.substr(0,2);!l||b&&LV[b]||(a=a.substr(2),this.slashes=!0)}if(!LV[b]&&(l||b&&!kE[b])){var r,v;l=-1;for(m=0;m<x9.length;m++)-1!==(y=a.indexOf(x9[m]))&&(-1===l||y<l)&&(l=y);-1!==(v=-1===l?a.lastIndexOf("@"):
a.lastIndexOf("@",l))&&(r=a.slice(0,v),a=a.slice(v+1),this.auth=decodeURIComponent(r));l=-1;for(m=0;m<w9.length;m++){var y;-1!==(y=a.indexOf(w9[m]))&&(-1===l||y<l)&&(l=y)}-1===l&&(l=a.length);this.host=a.slice(0,l);a=a.slice(l);this.parseHost();this.hostname=this.hostname||"";r="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!r)for(l=this.hostname.split(/\./),v=(m=0,l.length);m<v;m++)if((y=l[m])&&!y.match(y9)){b="";for(var A=0,E=y.length;A<E;A++)127<y.charCodeAt(A)?b+="x":b+=
y[A];if(!b.match(y9)){v=l.slice(0,m);m=l.slice(m+1);(y=y.match(Eqa))&&(v.push(y[1]),m.unshift(y[2]));m.length&&(a="/"+m.join(".")+a);this.hostname=v.join(".");break}}255<this.hostname.length?this.hostname="":this.hostname=this.hostname.toLowerCase();r||(this.hostname=zqa.toASCII(this.hostname));m=this.port?":"+this.port:"";this.host=(this.hostname||"")+m;this.href+=this.host;r&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==a[0]&&(a="/"+a))}if(!Fqa[g])for(m=0,v=KV.length;m<v;m++)r=
KV[m],-1!==a.indexOf(r)&&(y=encodeURIComponent(r),y===r&&(y=escape(r)),a=a.split(r).join(y));m=a.indexOf("#");-1!==m&&(this.hash=a.substr(m),a=a.slice(0,m));m=a.indexOf("?");if(-1!==m?(this.search=a.substr(m),this.query=a.substr(m+1),e&&(this.query=zB.parse(this.query)),a=a.slice(0,m)):e&&(this.search="",this.query={}),a&&(this.pathname=a),kE[g]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search)m=this.pathname||"",this.path=m+(this.search||"");return this.href=this.format(),
this};ps.prototype.format=function(){var b=this.auth||"";b&&(b=(b=encodeURIComponent(b)).replace(/%3A/i,":"),b+="@");var e=this.protocol||"",m=this.pathname||"",a=this.hash||"",g=!1,l="";this.host?g=b+this.host:this.hostname&&(g=b+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(g+=":"+this.port));this.query&&kv.isObject(this.query)&&Object.keys(this.query).length&&(l=zB.stringify(this.query));b=this.search||l&&"?"+l||"";return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||
(!e||kE[e])&&!1!==g?(g="//"+(g||""),m&&"/"!==m.charAt(0)&&(m="/"+m)):g||(g=""),a&&"#"!==a.charAt(0)&&(a="#"+a),b&&"?"!==b.charAt(0)&&(b="?"+b),e+g+(m=m.replace(/[?#]/g,function(r){return encodeURIComponent(r)}))+(b=b.replace("#","%23"))+a};ps.prototype.resolve=function(b){return this.resolveObject(tG(b,!1,!0)).format()};ps.prototype.resolveObject=function(b){if(kv.isString(b)){var e=new ps;e.parse(b,!1,!0);b=e}e=new ps;for(var m=Object.keys(this),a=0;a<m.length;a++){var g=m[a];e[g]=this[g]}if(e.hash=
b.hash,""===b.href)return e.href=e.format(),e;if(b.slashes&&!b.protocol){var l=Object.keys(b);for(m=0;m<l.length;m++)a=l[m],"protocol"!==a&&(e[a]=b[a]);return kE[e.protocol]&&e.hostname&&!e.pathname&&(e.path=e.pathname="/"),e.href=e.format(),e}if(b.protocol&&b.protocol!==e.protocol){if(!kE[b.protocol]){l=Object.keys(b);for(m=0;m<l.length;m++)a=l[m],e[a]=b[a];return e.href=e.format(),e}if(e.protocol=b.protocol,b.host||LV[b.protocol])e.pathname=b.pathname;else{for(var r=(b.pathname||"").split("/");r.length&&
!(b.host=r.shift()););b.host||(b.host="");b.hostname||(b.hostname="");""!==r[0]&&r.unshift("");2>r.length&&r.unshift("");e.pathname=r.join("/")}if(e.search=b.search,e.query=b.query,e.host=b.host||"",e.auth=b.auth,e.hostname=b.hostname||b.host,e.port=b.port,e.pathname||e.search)e.path=(e.pathname||"")+(e.search||"");return e.slashes=e.slashes||b.slashes,e.href=e.format(),e}m=e.pathname&&"/"===e.pathname.charAt(0);var v=b.host||b.pathname&&"/"===b.pathname.charAt(0),y=m=v||m||e.host&&b.pathname;a=e.pathname&&
e.pathname.split("/")||[];g=(r=b.pathname&&b.pathname.split("/")||[],e.protocol&&!kE[e.protocol]);if(g&&(e.hostname="",e.port=null,e.host&&(""===a[0]?a[0]=e.host:a.unshift(e.host)),e.host="",b.protocol&&(b.hostname=null,b.port=null,b.host&&(""===r[0]?r[0]=b.host:r.unshift(b.host)),b.host=null),m=m&&(""===r[0]||""===a[0])),v)e.host=b.host||""===b.host?b.host:e.host,e.hostname=b.hostname||""===b.hostname?b.hostname:e.hostname,e.search=b.search,e.query=b.query,a=r;else if(r.length)a||(a=[]),a.pop(),
a=a.concat(r),e.search=b.search,e.query=b.query;else if(!kv.isNullOrUndefined(b.search))return g&&(e.hostname=e.host=a.shift(),(l=!!(e.host&&0<e.host.indexOf("@"))&&e.host.split("@"))&&(e.auth=l.shift(),e.host=e.hostname=l.shift())),e.search=b.search,e.query=b.query,kv.isNull(e.pathname)&&kv.isNull(e.search)||(e.path=(e.pathname?e.pathname:"")+(e.search?e.search:"")),e.href=e.format(),e;if(!a.length)return e.pathname=null,e.search?e.path="/"+e.search:e.path=null,e.href=e.format(),e;v=a.slice(-1)[0];
r=(e.host||b.host||1<a.length)&&("."===v||".."===v)||""===v;for(var A=0,E=a.length;0<=E;E--)"."===(v=a[E])?a.splice(E,1):".."===v?(a.splice(E,1),A++):A&&(a.splice(E,1),A--);if(!m&&!y)for(;A--;A)a.unshift("..");!m||""===a[0]||a[0]&&"/"===a[0].charAt(0)||a.unshift("");r&&"/"!==a.join("/").substr(-1)&&a.push("");y=""===a[0]||a[0]&&"/"===a[0].charAt(0);g&&(e.hostname=e.host=y?"":a.length?a.shift():"",(l=!!(e.host&&0<e.host.indexOf("@"))&&e.host.split("@"))&&(e.auth=l.shift(),e.host=e.hostname=l.shift()));
return(m||e.host&&a.length)&&!y&&a.unshift(""),a.length?e.pathname=a.join("/"):(e.pathname=null,e.path=null),kv.isNull(e.pathname)&&kv.isNull(e.search)||(e.path=(e.pathname?e.pathname:"")+(e.search?e.search:"")),e.auth=b.auth||e.auth,e.slashes=e.slashes||b.slashes,e.href=e.format(),e};ps.prototype.parseHost=function(){var b=this.host,e=Bqa.exec(b);e&&(":"!==(e=e[0])&&(this.port=e.substr(1)),b=b.substr(0,b.length-e.length));b&&(this.hostname=b)};var Gqa=tj,GH={resolve:function(){for(var b,e="",m=!1,
a=arguments.length-1;-1<=a&&!m;a--){var g;0<=a?g=arguments[a]:(void 0===b&&(b=Gqa.cwd()),g=b);lv(g);0!==g.length&&(e=g+"/"+e,m=47===g.charCodeAt(0))}return e=G4(e,!m),m?0<e.length?"/"+e:"/":0<e.length?e:"."},normalize:function(b){if(lv(b),0===b.length)return".";var e=47===b.charCodeAt(0),m=47===b.charCodeAt(b.length-1);return 0!==(b=G4(b,!e)).length||e||(b="."),0<b.length&&m&&(b+="/"),e?"/"+b:b},isAbsolute:function(b){return lv(b),0<b.length&&47===b.charCodeAt(0)},join:function(){if(0===arguments.length)return".";
for(var b,e=0;e<arguments.length;++e){var m=arguments[e];lv(m);0<m.length&&(void 0===b?b=m:b+="/"+m)}return void 0===b?".":GH.normalize(b)},relative:function(b,e){if((lv(b),lv(e),b===e)||(b=GH.resolve(b))===(e=GH.resolve(e)))return"";for(var m=1;m<b.length&&47===b.charCodeAt(m);++m);for(var a=b.length,g=a-m,l=1;l<e.length&&47===e.charCodeAt(l);++l);for(var r=e.length-l,v=g<r?g:r,y=-1,A=0;A<=v;++A){if(A===v){if(r>v){if(47===e.charCodeAt(l+A))return e.slice(l+A+1);if(0===A)return e.slice(l+A)}else g>
v&&(47===b.charCodeAt(m+A)?y=A:0===A&&(y=0));break}var E=b.charCodeAt(m+A);if(E!==e.charCodeAt(l+A))break;47===E&&(y=A)}g="";for(A=m+y+1;A<=a;++A)A!==a&&47!==b.charCodeAt(A)||(0===g.length?g+="..":g+="/..");return 0<g.length?g+e.slice(l+y):(l+=y,47===e.charCodeAt(l)&&++l,e.slice(l))},_makeLong:function(b){return b},dirname:function(b){if(lv(b),0===b.length)return".";for(var e=47===b.charCodeAt(0),m=-1,a=!0,g=b.length-1;1<=g;--g)if(47===b.charCodeAt(g)){if(!a){m=g;break}}else a=!1;return-1===m?e?"/":
".":e&&1===m?"//":b.slice(0,m)},basename:function(b,e){if(void 0!==e&&"string"!=typeof e)throw new TypeError('"ext" argument must be a string');lv(b);var m,a=0,g=-1,l=!0;if(void 0!==e&&0<e.length&&e.length<=b.length){if(e.length===b.length&&e===b)return"";var r=e.length-1,v=-1;for(m=b.length-1;0<=m;--m){var y=b.charCodeAt(m);if(47===y){if(!l){a=m+1;break}}else-1===v&&(l=!1,v=m+1),0<=r&&(y===e.charCodeAt(r)?-1==--r&&(g=m):(r=-1,g=v))}return a===g?g=v:-1===g&&(g=b.length),b.slice(a,g)}for(m=b.length-
1;0<=m;--m)if(47===b.charCodeAt(m)){if(!l){a=m+1;break}}else-1===g&&(l=!1,g=m+1);return-1===g?"":b.slice(a,g)},extname:function(b){lv(b);for(var e=-1,m=0,a=-1,g=!0,l=0,r=b.length-1;0<=r;--r){var v=b.charCodeAt(r);if(47!==v)-1===a&&(g=!1,a=r+1),46===v?-1===e?e=r:1!==l&&(l=1):-1!==e&&(l=-1);else if(!g){m=r+1;break}}return-1===e||-1===a||0===l||1===l&&e===a-1&&e===m+1?"":b.slice(e,a)},format:function(b){if(null===b||"object"!=typeof b)throw new TypeError('The "pathObject" argument must be of type Object. Received type '+
typeof b);var e=b.dir||b.root,m=b.base||(b.name||"")+(b.ext||"");return e?e===b.root?e+m:e+"/"+m:m},parse:function(b){lv(b);var e={root:"",dir:"",base:"",ext:"",name:""};if(0===b.length)return e;var m,a=b.charCodeAt(0),g=47===a;g?(e.root="/",m=1):m=0;for(var l=-1,r=0,v=-1,y=!0,A=b.length-1,E=0;A>=m;--A)if(47!==(a=b.charCodeAt(A)))-1===v&&(y=!1,v=A+1),46===a?-1===l?l=A:1!==E&&(E=1):-1!==l&&(E=-1);else if(!y){r=A+1;break}return-1===l||-1===v||0===E||1===E&&l===v-1&&l===r+1?-1!==v&&(e.base=e.name=0===
r&&g?b.slice(1,v):b.slice(r,v)):(0===r&&g?(e.name=b.slice(1,l),e.base=b.slice(1,v)):(e.name=b.slice(r,l),e.base=b.slice(r,v)),e.ext=b.slice(l,v)),0<r?e.dir=b.slice(0,r-1):g&&(e.dir="/"),e},sep:"/",delimiter:":",win32:null,posix:null},MV=GH.posix=GH,z9={},A9=/%[a-f0-9]{2}/gi,B9=/(%[a-f0-9]{2})+/gi;z9=function(b){if("string"!==typeof b)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof b+"`");try{return b=b.replace(/\+/g," "),decodeURIComponent(b)}catch(r){for(var e={"%FE%FF":"\ufffd\ufffd",
"%FF%FE":"\ufffd\ufffd"},m=B9.exec(b);m;){try{e[m[0]]=decodeURIComponent(m[0])}catch(v){var a=m[0];try{var g=decodeURIComponent(a)}catch(y){g=a.match(A9);for(var l=1;l<g.length;l++)a=ES(g,l).join(""),g=a.match(A9);g=a}g!==m[0]&&(e[m[0]]=g)}m=B9.exec(b)}e["%C2"]="\ufffd";m=Object.keys(e);for(a=0;a<m.length;a++)g=m[a],b=b.replace(new RegExp(g,"g"),e[g]);return b}};var Hqa={},dha=tj,M4=wqa,aha=jE,bha=MV,cha=z9,C9=/[#@] sourceMappingURL=([^\s'"]*)/,eha=RegExp("(?:/\\*(?:\\s*\r?\n(?://)?)?(?:"+C9.source+
")\\s*\\*/|//(?:"+C9.source+"))\\s*"),fha=/^data:([^,;]*)(;[^,;]*)*(?:,(.*))?$/,gha=/^(?:application|text)\/json$/,hha="utf-8",iha=/\/?$/,Iqa=Hqa={resolveSourceMap:J4,resolveSourceMapSync:L4,resolveSources:N4,resolveSourcesSync:P4,resolve:function(b,e,m,a,g){function l(v){N4(v.map,v.sourcesRelativeTo,m,a,function(y,A){if(y)return g(y);v.sourcesResolved=A.sourcesResolved;v.sourcesContent=A.sourcesContent;g(null,v)})}"function"===typeof a&&(g=a,a={});if(null===b){var r={sourceMappingURL:null,url:e,
sourcesRelativeTo:e,map:null};b=uG(e);m(b,function(v,y){if(v)return v.sourceMapData=r,g(v);r.map=String(y);try{r.map=AD(r.map,r)}catch(A){return g(A)}l(r)})}else J4(b,e,m,function(v,y){if(v)return g(v);if(!y)return g(null,null);l(y)})},resolveSync:function(b,e,m,a){if(null===b)b={sourceMappingURL:null,url:e,sourcesRelativeTo:e,map:null},b.map=I4(m,e,b),b.map=AD(b.map,b);else if(b=L4(b,e,m),!b)return null;e=P4(b.map,b.sourcesRelativeTo,m,a);b.sourcesResolved=e.sourcesResolved;b.sourcesContent=e.sourcesContent;
return b},parseMapToJSON:AD},Jqa=function(){throw Error("Node.js fs module is not supported by jspm core"+("undefined"!=typeof Deno?". Deno support here is tracking in https://github.com/jspm/jspm-core/issues/4, +1's are appreciated!":" in the browser"));},GS="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,D9={},Q4=p9,Kqa=vl;D9=io;Kqa(io,Q4);io.prototype.compile=function(b){return b.stylesheet.rules.map((this||GS).visit,this||GS).join("")};io.prototype.comment=function(b){return this.emit("",
b.position)};io.prototype.import=function(b){return this.emit("@import "+b.import+";",b.position)};io.prototype.media=function(b){return this.emit("@media "+b.media,b.position)+this.emit("{")+this.mapVisit(b.rules)+this.emit("}")};io.prototype.document=function(b){return this.emit("@"+(b.vendor||"")+"document "+b.document,b.position)+this.emit("{")+this.mapVisit(b.rules)+this.emit("}")};io.prototype.charset=function(b){return this.emit("@charset "+b.charset+";",b.position)};io.prototype.namespace=
function(b){return this.emit("@namespace "+b.namespace+";",b.position)};io.prototype.supports=function(b){return this.emit("@supports "+b.supports,b.position)+this.emit("{")+this.mapVisit(b.rules)+this.emit("}")};io.prototype.keyframes=function(b){return this.emit("@"+(b.vendor||"")+"keyframes "+b.name,b.position)+this.emit("{")+this.mapVisit(b.keyframes)+this.emit("}")};io.prototype.keyframe=function(b){var e=b.declarations;return this.emit(b.values.join(","),b.position)+this.emit("{")+this.mapVisit(e)+
this.emit("}")};io.prototype.page=function(b){var e=b.selectors.length?b.selectors.join(", "):"";return this.emit("@page "+e,b.position)+this.emit("{")+this.mapVisit(b.declarations)+this.emit("}")};io.prototype["font-face"]=function(b){return this.emit("@font-face",b.position)+this.emit("{")+this.mapVisit(b.declarations)+this.emit("}")};io.prototype.host=function(b){return this.emit("@host",b.position)+this.emit("{")+this.mapVisit(b.rules)+this.emit("}")};io.prototype["custom-media"]=function(b){return this.emit("@custom-media "+
b.name+" "+b.media+";",b.position)};io.prototype.rule=function(b){var e=b.declarations;return e.length?this.emit(b.selectors.join(","),b.position)+this.emit("{")+this.mapVisit(e)+this.emit("}"):""};io.prototype.declaration=function(b){return this.emit(b.property+":"+b.value,b.position)+this.emit(";")};var Lqa=D9,Rp="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,Zw={};Zw=function(b){b._comment=b.comment;b.map=new vp;b.position={line:1,column:1};b.files={};for(var e in Zw)b[e]=
Zw[e]};var E9=function(b){return"\\"===MV.sep?b.replace(/\\/g,"/").replace(/^[a-z]:\/?/i,"/"):b};Zw.updatePosition=function(b){var e=b.match(/\n/g);e&&((this||Rp).position.line+=e.length);e=b.lastIndexOf("\n");(this||Rp).position.column=~e?b.length-e:(this||Rp).position.column+b.length};Zw.emit=function(b,e){if(e){var m=E9(e.source||"source.css");(this||Rp).map.addMapping({source:m,generated:{line:(this||Rp).position.line,column:Math.max((this||Rp).position.column-1,0)},original:{line:e.start.line,
column:e.start.column-1}});this.addFile(m,e)}this.updatePosition(b);return b};Zw.addFile=function(b,e){"string"!==typeof e.content||Object.prototype.hasOwnProperty.call((this||Rp).files,b)||((this||Rp).files[b]=e.content)};Zw.applySourceMaps=function(){Object.keys((this||Rp).files).forEach(function(b){var e=(this||Rp).files[b];(this||Rp).map.setSourceContent(b,e);if(!1!==(this||Rp).options.inputSourcemaps&&(e=Iqa.resolveSync(e,b,Jqa))){var m=new Zi(e.map);(this||Rp).map.applySourceMap(m,b,E9(MV.dirname(e.sourcesRelativeTo)))}},
this||Rp)};Zw.comment=function(b){return/^# sourceMappingURL=/.test(b.comment)?this.emit("",b.position):this._comment(b)};var Mqa=Zw,Nqa={},Oqa=Nqa=function(b,e){e=e||{};var m=e.compress?new Lqa(e):new vqa(e);return e.sourcemap?(Mqa(m),b=m.compile(b),m.applySourceMaps(),e="generator"===e.sourcemap?m.map:m.map.toJSON(),{code:b,map:e}):b=m.compile(b)},NV={};NV.parse=tqa;NV.stringify=Oqa;var oj=lively.FreezerRuntime.recorderFor("lively.morphic/html-morph.js");oj.obj=Ag;oj.promise=zh;oj.string=pi;oj.pt=
xi;oj.Morph=Ll;oj.vdom=XG;oj.addOrChangeCSSDeclaration=Yr;oj.css=NV;var FN=oj.vdom;oj.diff=FN.diff;oj.patch=FN.patch;oj.h=FN.h;oj.createElement=FN.create;(function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/html-morph.js"),m=e.hasOwnProperty("CustomVNode")&&"function"===typeof e.CustomVNode?e.CustomVNode:e.CustomVNode=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return dc(m,b,[{key:Symbol.for("lively-instance-initialize"),
value:function(a,g){this.morph=a;this.renderer=g;this.morphVtree=null;this.key="custom-"+a.id}},{key:"type",get:function(){return"Widget"}},{key:"renderMorph",value:function(){var a=this.morph,g=this.morphVtree=this.renderer.renderMorph(a),l="customNode-key-"+a.id;g.children[0]&&g.children[0].key===l||g.children.unshift(oj.h(a.domNodeTagName||"div",{key:l},[]));a._updateCSSDeclaration&&(a.ensureCSSDeclaration(),a._updateCSSDeclaration=!1);return g}},{key:"init",value:function(){var a=oj.createElement(this.renderMorph(),
this.renderer.domEnvironment);a.childNodes[0].appendChild(this.morph.domNode);this.morph.cssDeclaration&&this.morph.ensureCSSDeclaration();return a}},{key:"update",value:function(a,g){a=a.morphVtree||this.renderMorph();var l=this.renderMorph();a=oj.diff(a,l);oj.patch(g,a);return null}},{key:"destroy",value:function(a){(a=this.renderer.domEnvironment.document.getElementById("css-for-"+this.morph.id))&&a.remove();console.log("[HTMLMorph] node of "+this.morph.name+" gets removed from DOM")}}],[{key:Symbol.for("__LivelyClassName__"),
get:function(){return"CustomVNode"}}],e,{pathInPackage:function(){return"html-morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:421,end:2401})})(void 0);var Uy=Da("aw",function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/html-morph.js"),m=e.hasOwnProperty("HTMLMorph")&&"function"===typeof e.HTMLMorph?e.HTMLMorph:
e.HTMLMorph=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return dc(m,b,[{key:"isHTMLMorph",get:function(){return!0}},{key:"ensureCSSDeclaration",value:function(){var a=this;try{var g=oj.css.parse(this.cssDeclaration);this.whenRendered().then(function(){g.stylesheet.rules.forEach(function(l){l.selectors&&(l.selectors=l.selectors.map(function(r){return"#"+a.id+" "+r}))});oj.addOrChangeCSSDeclaration("css-for-"+a.id,oj.css.stringify(g))})}catch(l){console.error("Error setting cssDeclaration of "+
this+": "+l)}}},{key:"defaultHTML",get:function(){return'\n<div style="display: flex;\n            align-items: center;\n            justify-content: center;\n            height: 100%;\n            background: -webkit-gradient(linear, 0% 0%, 0% 100%, color-stop(0%, rgba(242,243,244,1)),color-stop(100%, rgba(229,231,233,1)))">\n  <p style="font: bold 40pt Inconsolata, monospace; color: lightgray;">&lt;HTML&#x2F;&gt;</p>\n</div>'}},{key:"render",value:function(a){this._requestMasterStyling&&(this.master&&
this.master.applyIfNeeded(!0),this._requestMasterStyling=!1);return new oj.CustomVNode(this,a)}},{key:"menuItems",value:function(){var a=this,g=dc._get(Object.getPrototypeOf(m.prototype),"menuItems",this).call(this);g.unshift(["edit CSS...",function(){return a.world().execCommand("open workspace",{language:"css",content:a.cssDeclaration,target:a})}],["edit html...",function(){return a.world().execCommand("open workspace",{language:"html",content:a.html,target:a})}],{isDivider:!0});return g}}],[{key:Symbol.for("__LivelyClassName__"),
get:function(){return"HTMLMorph"}},{key:"properties",get:function(){return{extent:{defaultValue:oj.pt(420,330)},html:{after:["cssDeclaration"],isStyleProp:!0,initialize:function(){this.html=this.defaultHTML},get:function(){return this.domNode.innerHTML},set:function(a){this.domNode.innerHTML=a;if(a.includes("<script")){a=this.domNode.querySelectorAll("script");a=$jscomp.makeIterator(a);for(var g=a.next();!g.done;g=a.next()){var l=g.value;g=l.parentNode;l.remove();for(var r=document.createElement("script"),
v=$jscomp.makeIterator(l.attributes),y=v.next();!y.done;y=v.next())y=y.value,r.setAttribute(y.name,y.value);l=$jscomp.makeIterator(l.childNodes);for(v=l.next();!v.done;v=l.next())r.appendChild(v.value);g.appendChild(r)}}}},domNodeTagName:{readOnly:!0,get:function(){return"div"}},domNodeStyle:{readOnly:!0,get:function(){return"position: absolute; width: 100%; height: 100%;"}},domNode:{derived:!0,get:function(){this._domNode||(this._domNode=this.document.createElement(this.domNodeTagName),this._domNode.setAttribute("style",
this.domNodeStyle));return this._domNode},set:function(a){this.domNode.parentNode&&this.domNode.parentNode.replaceChild(a,this.domNode);return this._domNode=a}},document:{readOnly:!0,get:function(){return this.env.domEnv.document}},scrollExtent:{readOnly:!0,get:function(){return oj.pt(this.domNode.scrollWidth,this.domNode.scrollHeight)}},cssDeclaration:{isStyleProp:!0,set:function(a){this.setProperty("cssDeclaration",a);a?(this.makeDirty(),this._updateCSSDeclaration=!0):(a=this.env.domEnv.document.getElementById("css-for-"+
this.id))&&a.remove()}}}}}],e,{pathInPackage:function(){return"html-morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:2726,end:6825})}(oj.Morph));oj.HTMLMorph=Uy;oj.HTMLMorph=Uy;oj.HTMLMorph=Uy;var HH=function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/html-morph.js"),m=e.hasOwnProperty("IFrameMorph")&&"function"===
typeof e.IFrameMorph?e.IFrameMorph:e.IFrameMorph=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return dc(m,b,[{key:"isIFrameMorph",get:function(){return!0}},{key:"reload",value:function(){return this.src?this.loadURL(this.src):this.srcDoc?this.displayHTML(this.srcDoc):null}},{key:"whenLoaded",value:function(){return this._whenLoaded||Promise.resolve()}},{key:"displayHTML",value:function(a,g){g=void 0===g?{}:g;var l=
this,r,v,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(A){if(1==A.nextAddress){r=g;if(v=void 0===r.keepScroll?!0:r.keepScroll)y=l.iframeScroll;l.srcDoc=a;return A.yield(l.whenLoaded(),2)}v&&y&&(l.iframeScroll=y);return A.return(l)})}},{key:"loadURL",value:function(a,g){g=void 0===g?{}:g;var l=this,r,v,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(A){if(1==A.nextAddress){r=g;if(v=void 0===r.keepScroll?!0:r.keepScroll)y=l.iframeScroll;l.src=a;return A.yield(l.whenLoaded(),
2)}v&&y&&(l.iframeScroll=y);return A.return(l)})}},{key:"defaultSrcDoc",get:function(){return'\n    <div style="display: flex;\n                align-items: center;\n                justify-content: center;\n                height: 100%;\n                background: -webkit-gradient(linear, 0% 0%, 0% 100%, color-stop(0%, rgba(242,243,244,1)),color-stop(100%, rgba(229,231,233,1)))">\n      <p style="font: bold 40pt Inconsolata, monospace; color: lightgray;">&lt;iFrame&#x2F;&gt;</p>\n    </div>'}},
{key:"defaultHTML",get:function(){return'<iframe width="100%" height="100%" frameBorder="false" srcdoc=""></iframe>'}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"IFrameMorph"}},{key:"example",value:function(){var a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(g){if(1==g.nextAddress)return a=(new oj.IFrameMorph).openInWindow({title:"iframe"}).targetMorph,a.srcDoc="",a.src="http://localhost:9011/worlds/html%20export",g.yield(a.loadURL("https://google.com"),2);a.iframe.src;
a.iframe.srcDoc;a.src="";a.srcDoc="fooo";return g.yield(a.reload(),0)})}},{key:"properties",get:function(){return{html:{initialize:function(){this.html=this.defaultHTML;this.srcDoc=this.defaultSrcDoc}},iframe:{derived:!0,readOnly:!0,after:["domNode"],get:function(){return this.domNode.querySelector("iframe")}},src:{derived:!0,after:["iframe"],get:function(){return this.iframe.src},set:function(a){this.iframe.removeAttribute("srcDoc");this.iframe.src=a;var g=oj.promise.deferred().resolve;this._whenLoaded=
oj.promise;this.iframe.onload=function(l){return g(l)}}},srcDoc:{derived:!0,after:["iframe"],get:function(){return this.iframe.srcdoc},set:function(a){this.iframe.removeAttribute("src");this.iframe.srcdoc=a;this._whenLoaded=this.whenRendered().then(function(){return oj.promise.delay(20)})}},iframeScroll:{derived:!0,after:["iframe"],get:function(){try{var a=this.iframe.contentWindow;return oj.pt(a.scrollX,a.scrollY)}catch(g){return oj.pt(0,0)}},set:function(a){try{this.iframe.contentWindow.scrollTo(a.x,
a.y)}catch(g){}}}}}}],e,{pathInPackage:function(){return"html-morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:6835,end:10027})}(oj.HTMLMorph);oj.IFrameMorph=HH;oj.IFrameMorph=HH;oj.IFrameMorph=HH;var Pqa=Object.freeze({__proto__:null,HTMLMorph:Uy,IFrameMorph:HH}),Sp=lively.FreezerRuntime.recorderFor("lively.morphic/tooltips.js");
Sp.pt=xi;Sp.Morph=Ll;Sp.morph=sa;Sp.config=Dn;var lE=function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/tooltips.js"),m=e.hasOwnProperty("TooltipViewer")&&"function"===typeof e.TooltipViewer?e.TooltipViewer:e.TooltipViewer=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return dc(m,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){this.currentMorph=a}},{key:"__dont_serialize__",get:function(){return["currentTooltip",
"currentMorph"]}},{key:"notPartOfCurrentTooltip",value:function(a){return!a.ownerChain().includes(this.currentMorph)}},{key:"invalidatesCurrentTooltip",value:function(a){return a.tooltip||this.notPartOfCurrentTooltip(a)}},{key:"mouseMove",value:function(a){var g=a.targetMorph;a=a.hand;this.currentMorph!==g&&this.invalidatesCurrentTooltip(g)&&(this.hoverOutOfMorph(this.currentMorph),this.hoverIntoMorph(g,a),this.currentMorph=g)}},{key:"mouseDown",value:function(a){this.currentTooltip&&this.currentTooltip.remove();
this.currentTooltip=null}},{key:"hoverIntoMorph",value:function(a,g){this.clearScheduledTooltip();this.currentTooltip?this.showTooltipFor(a,g):this.scheduleTooltipFor(a,g)}},{key:"hoverOutOfMorph",value:function(a){var g=this;this.currentTooltip&&this.currentTooltip.softRemove(function(l){return g.currentTooltip==l&&(g.currentTooltip=null)})}},{key:"scheduleTooltipFor",value:function(a,g){var l=this;this.timer=setTimeout(function(){return l.showTooltipFor(a,g)},1E3*Sp.config.showTooltipsAfter)}},
{key:"clearScheduledTooltip",value:function(){clearTimeout(this.timer)}},{key:"clearCurrentTooltip",value:function(){var a=this.currentTooltip;a&&a.remove()}},{key:"showTooltipFor",value:function(a,g){a.tooltip&&a.world()&&(this.clearCurrentTooltip(),g=g?g.position.addXY(10,7):a.globalBounds().bottomRight(),this.currentTooltip=new Sp.Tooltip({position:g,description:a.tooltip}),a.world().addMorph(this.currentTooltip),this.currentTooltip.update(a))}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"TooltipViewer"}}],
e,{pathInPackage:function(){return"tooltips.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:154,end:2059})}(void 0);Sp.TooltipViewer=lE;Sp.TooltipViewer=lE;Sp.TooltipViewer=lE;var AB=Da("aj",function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/tooltips.js"),m=e.hasOwnProperty("Tooltip")&&"function"===typeof e.Tooltip?
e.Tooltip:e.Tooltip=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return dc(m,b,[{key:"update",value:function(a){this.position=a.globalBounds().bottomCenter().subPt(a.world().scroll).addPt(Sp.pt(0,7))}},{key:"softRemove",value:function(a){var g=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){if(1==l.nextAddress)return l.yield(g.animate({opacity:0,duration:300}),2);a&&a(g);g.remove();l.jumpToEnd()})}}],
[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Tooltip"}},{key:"properties",get:function(){return{hasFixedPosition:{defaultValue:!0},reactsToPointer:{defaultValue:!1},isEpiMorph:{defaultValue:!0},master:{initialize:function(){this.master={auto:"styleguide://System/tooltip"}}},description:{after:["submorphs"],derived:!0,get:function(){return $jscomp.makeIterator(this.submorphs).next().value.value},set:function(a){var g=$jscomp.makeIterator(this.submorphs).next().value;g.value=a;g.fit()}},
submorphs:{initialize:function(){this.submorphs=[new Sp.morph({type:"label",width:200})]}}}}}],e,{pathInPackage:function(){return"tooltips.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:2068,end:3217})}(Sp.Morph));Sp.Tooltip=AB;Sp.Tooltip=AB;Sp.Tooltip=AB;var Qqa=Object.freeze({__proto__:null,TooltipViewer:lE,Tooltip:AB}),F9=
lively.FreezerRuntime.recorderFor("lively.morphic/morphicdb/index.js");F9.default=Yw;F9.MorphicDB=Yw;var Rqa=Object.freeze({__proto__:null,MorphicDB:Yw}),le=lively.FreezerRuntime.recorderFor("lively.morphic/layout.js");le.pt=xi;le.Rectangle=He;le.rect=zm;le.arr=$f;le.Closure=Rj;le.num=Nm;le.grid=wz;le.obj=Ag;le.once=$q;(function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/layout.js"),m=e.hasOwnProperty("Layout")&&"function"===typeof e.Layout?e.Layout:e.Layout=function(a){a&&a[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return dc(m,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){var g=a=void 0===a?{}:a;a=g.spacing;var l=g.padding,r=g.border,v=g.container,y=g.manualUpdate,A=g.autoResize,E=g.ignore,F=g.onScheduleApply,H=g.layoutOrder;g=g.reactToSubmorphAnimations;this.applyRequests=!1;this.border=Object.assign({top:0,left:0,right:0,bottom:0},r);this.ignore=E||[];this.lastBoundsExtent=this.container&&this.container.bounds().extent();
this.active=!1;this.container=v;this.manualUpdate=y;this.reactToSubmorphAnimations=g||!1;this.autoResize=void 0!=A?A:!0;this.onScheduleApply=F||function(I,M,N){};H&&(this.layoutOrder=H,this.layoutOrderSource=JSON.stringify(String(H)));this.spacing=a||0;this._padding=l?"number"===typeof l?le.Rectangle.inset(l):l:null}},{key:"attach",value:function(){this.apply();this.refreshBoundsCache()}},{key:"copy",value:function(){return new this.constructor(this)}},{key:"description",value:function(){return"Describe the layout behavior here."}},
{key:"name",value:function(){return"Name presented to the user."}},{key:"isEnabled",value:function(){return!this.active}},{key:"disable",value:function(){this.active=!0}},{key:"enable",value:function(a){this.active=!1;this.scheduleApply(null,a)}},{key:"padding",get:function(){return this._padding}},{key:"padding",set:function(a){"number"===typeof a&&(a=le.Rectangle.inset(a));this._padding=a;this.apply()}},{key:"boundsChanged",value:function(a){return!(this.lastBoundsExtent&&a.bounds().extent().equals(this.lastBoundsExtent))}},
{key:"extentChanged",value:function(a){return!(this.lastExtent&&a.extent.equals(this.lastExtent))}},{key:"equals",value:function(a){return a.name()==this.name()}},{key:"layoutableSubmorphs",get:function(){var a=this;this.layoutOrder||(this.layoutOrder=le.Closure.fromSource(JSON.parse(this.layoutOrderSource)).recreateFunc());return le.arr.sortBy(this.container.submorphs.filter(function(g){return g.isLayoutable&&!a.ignore.includes(g.name)}),function(g){return a.layoutOrder(g)})}},{key:"layoutOrder",
value:function(a){return this.container.submorphs.indexOf(a)}},{key:"submorphBoundsChanged",get:function(){var a=this.layoutableSubmorphs,g=this.layoutableSubmorphBounds;if(!g||a.length!=g.length)return!0;for(var l=0;l<a.length;l++)if(!g[l].equals(a[l].bounds()))return!0;return!1}},{key:"refreshBoundsCache",value:function(){this.lastExtent=this.container.extent;this.layoutableSubmorphBounds=this.layoutableSubmorphs.map(function(a){return a.bounds()})}},{key:"onContainerRender",value:function(){this.forceLayout()}},
{key:"noLayoutActionNeeded",get:function(){return!this.submorphBoundsChanged&&!this.boundsChanged(this.container)&&!this.extentChanged(this.container)&&!this.submorphsChanged}},{key:"__dont_serialize__",get:function(){return["lastAnim","animationPromise"]}},{key:"forceLayout",value:function(){var a=this;this.applyRequests&&(this.applyRequests=!1,this.noLayoutActionNeeded||(this.refreshBoundsCache(),this.container.withMetaDo({isLayoutAction:!0,animation:this.lastAnim},function(){return a.apply(a.lastAnim)}),
this.lastAnim=!1))}},{key:"forceLayoutsOfMorph",value:function(a){var g=this;a.layout?a.layout.forceLayout():a.submorphs.forEach(function(l){return g.forceLayoutsOfMorph(l)})}},{key:"forceLayoutsInNextLevel",value:function(){var a=this;this.layoutableSubmorphs.forEach(function(g){return a.forceLayoutsOfMorph(g)})}},{key:"scheduleApply",value:function(a,g,l){l=void 0===l?{}:l;if("function"===typeof this.onScheduleApply)this.onScheduleApply(a,g,l);this.active||(g&&(this.lastAnim=g),this.applyRequests=
!0)}},{key:"onSubmorphResized",value:function(a,g){this.scheduleApply(a,this.reactToSubmorphAnimations&&g.meta.animation,g)}},{key:"onSubmorphAdded",value:function(a,g){this.submorphsChanged=!0;this.scheduleApply(a,g)}},{key:"onSubmorphRemoved",value:function(a,g){this.submorphsChanged=!0;this.scheduleApply(a,g)}},{key:"onChange",value:function(a){var g=a.args,l=a.prop,r=a.value,v=a.prevValue,y=a.meta;y=this.reactToSubmorphAnimations&&y&&y.animation;g=g&&g[0];switch(a.selector){case "removeMorph":this.onSubmorphRemoved(g,
y);break;case "addMorphAt":this.onSubmorphAdded(g,y)}"extent"===l&&r&&v&&(v.x!==r.x||v.y!==r.y)&&this.scheduleApply(g,y)}},{key:"affectsLayout",value:function(a,g){a=g.value;var l=g.prevValue;return["position","scale","rotation","isLayoutable","extent"].includes(g.prop)&&!le.obj.equals(a,l)}},{key:"onSubmorphChange",value:function(a,g){if(g.meta&&g.meta.isLayoutAction)return this.scheduleApply(a,this.reactToSubmorphAnimation&&g.meta.animation);if(this.affectsLayout(a,g))this.onSubmorphResized(a,g)}},
{key:"changePropertyAnimated",value:function(a,g,l,r){if(r){var v=r.duration;r=r.easing;var y={};this.animationPromise=a.animate((y[g]=l,y.duration=v,y.easing=r,y))}else a[g]=l}},{key:"attachAnimated",value:function(a,g,l){this.active||(this.container=g,this.active=!0,g.layout=this,this.active=!1,this.lastAnim={duration:void 0===a?0:a,easing:l})}},{key:"apply",value:function(a){this.active||(this.active=!0,this.submorphsChanged=!1,this.lastBoundsExtent=this.container&&this.container.bounds().extent(),
this.active=!1)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Layout"}}],e,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:157,end:6567})})(void 0);var IH=Da("a_",function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/layout.js"),m=e.hasOwnProperty("CustomLayout")&&
"function"===typeof e.CustomLayout?e.CustomLayout:e.CustomLayout=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return dc(m,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){a=void 0===a?{}:a;this.relayout=a.relayout;this.layouterString=JSON.stringify(String(a.relayout));this.varMapping=a.varMapping||{};dc._get(Object.getPrototypeOf(m.prototype),Symbol.for("lively-instance-initialize"),this).call(this,
a)}},{key:"name",value:function(){return"Custom Layout"}},{key:"apply",value:function(a){if(!this.active&&this.container){dc._get(Object.getPrototypeOf(m.prototype),"apply",this).call(this,a);this.active=!0;this.relayout||(this.relayout=le.Closure.fromSource(JSON.parse(this.layouterString),this.varMapping).recreateFunc());try{this.relayout(this.container,a)}catch(g){console.error("Error in relayout() of a custom layout:",g)}this.lastBoundsExtent=this.container&&this.container.bounds().extent();this.active=
!1}}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"CustomLayout"}}],e,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:6576,end:7523})}(le.Layout));le.CustomLayout=IH;le.CustomLayout=IH;le.CustomLayout=IH;var JH=Da("bg",function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/layout.js"),
m=e.hasOwnProperty("SnapLayout")&&"function"===typeof e.SnapLayout?e.SnapLayout:e.SnapLayout=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return dc(m,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){a=void 0===a?{}:a;dc._get(Object.getPrototypeOf(m.prototype),Symbol.for("lively-instance-initialize"),this).call(this,a);this._spacing=a.spacing}},{key:"name",value:function(){return"Snap"}},{key:"description",
value:function(){return"Fits the parent morph to the combined bounds of all its submorphs."}},{key:"apply",value:function(a){var g=this;a=void 0===a?!1:a;if(!this.active&&this.container){dc._get(Object.getPrototypeOf(m.prototype),"apply",this).call(this,a);var l=this.container.submorphBounds().insetBy(-this.spacing),r=le.pt(this.spacing,this.spacing).subPt(l.topLeft());r.r()&&this.container.submorphs.forEach(function(v){return g.changePropertyAnimated(v,"position",v.position.addPt(r),a)});this.changePropertyAnimated(this.container,
"extent",l.extent(),a)}}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"SnapLayout"}}],e,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:7532,end:8327})}(le.Layout));le.SnapLayout=JH;le.SnapLayout=JH;le.SnapLayout=JH;(function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/layout.js"),
m=e.hasOwnProperty("FloatLayout")&&"function"===typeof e.FloatLayout?e.FloatLayout:e.FloatLayout=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return dc(m,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){a=void 0===a?{}:a;dc._get(Object.getPrototypeOf(m.prototype),Symbol.for("lively-instance-initialize"),this).call(this,a);this._orderByIndex=a.orderByIndex||!1;this._resizeSubmorphs="undefined"!==typeof a.resizeSubmorphs?
a.resizeSubmorphs:!1}},{key:"copy",value:function(){return new this.constructor(this.getSpec())}},{key:"layoutOrder",value:function(a){return this.orderByIndex?this.container.submorphs.indexOf(a):a.left}},{key:"orderByIndex",get:function(){return this._orderByIndex}},{key:"orderByIndex",set:function(a){this._orderByIndex=a;this.apply()}},{key:"direction",get:function(){return this._direction}},{key:"direction",set:function(a){this._direction=a;this.apply()}},{key:"align",get:function(){return this._align}},
{key:"align",set:function(a){this._align=a;this.apply()}},{key:"autoResize",get:function(){return this._autoResize}},{key:"autoResize",set:function(a){this._autoResize=a;this.apply()}},{key:"spacing",get:function(){return this._spacing}},{key:"spacing",set:function(a){this._spacing=a;this.apply()}},{key:"resizeSubmorphs",get:function(){return this._resizeSubmorphs}},{key:"resizeSubmorphs",set:function(a){this._resizeSubmorphs=a;this.apply()}},{key:"equals",value:function(a){return this.spacing!=a.spacing||
this.align!=a.align||this.direction!=a.direction?!1:!0}},{key:"getSpec",value:function(){return{spacing:this.spacing,resizeSubmorphs:this.resizeSubmorphs,autoResize:this.autoResize,align:this.align,direction:this.direction,padding:this.padding,reactToSubmorphAnimations:this.reactToSubmorphAnimations,orderByIndex:this.orderByIndex}}},{key:"inspect",value:function(a){}},{key:"apply",value:function(a){a=void 0===a?!1:a;var g=this,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){if(g.active||
!g.container||!g.container.submorphs.length||!g.layoutableSubmorphs.length)return r.return();g.layoutableSubmorphBounds||g.refreshBoundsCache();dc._get(Object.getPrototypeOf(m.prototype),"apply",g).call(g,a);g.active=!0;l=g.computeMinContainerExtent();g.layoutSubmorphs(l,a);l=g.computeMinContainerExtent();g.resizeContainer(l,a);g.lastBoundsExtent=g.container.bounds().extent();g.active=!1;g.layoutRequests=!1;return r.return(g.animationPromise)})}},{key:"resizeContainer",value:function(){}}],[{key:Symbol.for("__LivelyClassName__"),
get:function(){return"FloatLayout"}}],e,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:8329,end:10714})})(le.Layout);var Vy=Da("ak",function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/layout.js"),m=e.hasOwnProperty("VerticalLayout")&&"function"===typeof e.VerticalLayout?
e.VerticalLayout:e.VerticalLayout=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return dc(m,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){a=void 0===a?{}:a;dc._get(Object.getPrototypeOf(m.prototype),Symbol.for("lively-instance-initialize"),this).call(this,a);this._align=a.align||"left";this._direction=a.direction||"topToBottom"}},{key:"name",value:function(){return"Vertical"}},{key:"description",
value:function(){return"Assemble the submorphs in a vertically growing list."}},{key:"equals",value:function(a){return dc._get(Object.getPrototypeOf(m.prototype),"equals",this).call(this,a)&&a.name&&"Vertical"==a.name()?!0:!1}},{key:"possibleDirectionValues",get:function(){return["topToBottom","bottomToTop","centered"]}},{key:"possibleAlignValues",get:function(){return["left","center","right"]}},{key:"__serialize__",value:function(){return{__expr__:"new VerticalLayout("+le.obj.inspect(this.getSpec())+
")",bindings:{"lively.morphic":["VerticalLayout"]}}}},{key:"layoutSubmorphs",value:function(a,g){var l=this,r=this.container,v=this.layoutableSubmorphs,y=this.spacing,A=this.autoResize,E=this.align,F=this.resizeSubmorphs,H=this.getStartY(a),I=[];a=F?r.width:a.x;A=A&&!F;var M=function(N,W){v.reduce(function(X,ea){F&&l.changePropertyAnimated(ea,"width",r.width-2*y,g);l.forceLayoutsOfMorph(ea);l.changePropertyAnimated(ea,N,X,g);X=ea.bounds();I.push(X);return X[N]().addXY(0,X.height+y)},W)};this.layoutableSubmorphBounds=
I;"left"===E?M("topLeft",le.pt(y,H)):"right"===E?M("topRight",le.pt(a+(A?y:-y),H)):M("topCenter",le.pt((a+(A?2*y:0))/2,H))}},{key:"resizeContainer",value:function(a,g){var l=this.direction,r=this.layoutableSubmorphs,v=this.resizeSubmorphs,y=this.spacing,A=this.container;this.autoResize&&("centered"===l?(l=r[0].top,r=le.arr.last(r).bottom+l):r=le.arr.last(r).bottom+y,a=le.pt(v?A.width:a.x+2*y,Math.max(r,a.y)),this.changePropertyAnimated(A,"extent",a,g))}},{key:"getStartY",value:function(a){var g=this.layoutableSubmorphBounds,
l=this.spacing,r=this.direction;var v=(g.length-1)*l;g=$jscomp.makeIterator(g);for(var y=g.next();!y.done;y=g.next())v+=y.value.height;return Math.max(0,"bottomToTop"===r?a.y-v-2*l:"centered"===r?a.y/2-v/2-l:0)+l}},{key:"computeMinContainerExtent",value:function(){for(var a=this.container,g=this.layoutableSubmorphs,l=this.autoResize,r=(g.length+1)*this.spacing,v=0,y=0,A=0;A<g.length;A++){var E=g[A].bounds(),F=E.width;y+=E.height;v=Math.max(F,v)}g=le.pt(v,y+r);l||(g=g.maxPt(a.extent));return g}},{key:"layoutOrder",
value:function(a){return this.orderByIndex?this.container.submorphs.indexOf(a):a.top}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"VerticalLayout"}}],e,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:10723,end:14636})}(le.FloatLayout));le.VerticalLayout=Vy;le.VerticalLayout=
Vy;le.VerticalLayout=Vy;var Gv=Da("aB",function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/layout.js"),m=e.hasOwnProperty("HorizontalLayout")&&"function"===typeof e.HorizontalLayout?e.HorizontalLayout:e.HorizontalLayout=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return dc(m,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){a=void 0===a?{}:a;dc._get(Object.getPrototypeOf(m.prototype),
Symbol.for("lively-instance-initialize"),this).call(this,a);this._direction=a.direction||"leftToRight";this._align=a.align||"top"}},{key:"name",value:function(){return"Horizontal"}},{key:"description",value:function(){return"Assemble the submorphs in a horizontally growing list."}},{key:"possibleDirectionValues",get:function(){return["leftToRight","rightToLeft","centered"]}},{key:"possibleAlignValues",get:function(){return["top","center","bottom"]}},{key:"__serialize__",value:function(){return{__expr__:"new HorizontalLayout("+
le.obj.inspect(this.getSpec())+")",bindings:{"lively.morphic":["HorizontalLayout"]}}}},{key:"equals",value:function(a){return dc._get(Object.getPrototypeOf(m.prototype),"equals",this).call(this,a)&&a.name&&"Horizontal"==a.name()?!0:!1}},{key:"layoutSubmorphs",value:function(a,g){var l=this,r=this.container,v=this.layoutableSubmorphs,y=this.resizeSubmorphs,A=this.spacing,E=this.autoResize,F=this.align,H=this.getStartX(a),I=[];a=y?r.height:a.y;E=E&&!y;var M=function(N,W){v.reduce(function(X,ea){y&&
l.changePropertyAnimated(ea,"height",r.height-2*A,g);l.forceLayoutsOfMorph(ea);l.changePropertyAnimated(ea,N,X,g);X=ea.bounds();I.push(X);return X[N]().addXY(X.width+A,0)},W)};this.layoutableSubmorphBounds=I;"top"===F?M("topLeft",le.pt(H,A)):"bottom"===F?M("bottomLeft",le.pt(H,a+(E?A:-A))):M("leftCenter",le.pt(H,(a+(E?2*A:0))/2))}},{key:"resizeContainer",value:function(a,g){var l=this.direction,r=this.layoutableSubmorphBounds,v=this.resizeSubmorphs,y=this.spacing,A=this.container;this.autoResize&&
("centered"===l?(l=r[0].left(),r=le.arr.last(r).right()+l):r=le.arr.last(r).right()+y,a=le.pt(Math.max(a.x,r),v?A.height:a.y+2*y),this.changePropertyAnimated(A,"extent",a,g))}},{key:"getStartX",value:function(a){var g=this.layoutableSubmorphBounds,l=this.spacing,r=this.direction;var v=(g.length-1)*l;g=$jscomp.makeIterator(g);for(var y=g.next();!y.done;y=g.next())v+=y.value.width;return Math.max(0,"rightToLeft"===r?a.x-v-2*l:"centered"===r?a.x/2-v/2-l:0)+l}},{key:"computeMinContainerExtent",value:function(){for(var a=
this.container,g=this.layoutableSubmorphBounds,l=this.autoResize,r=(g.length+1)*this.spacing,v=0,y=0,A=0;A<g.length;A++){var E=g[A],F=E.height;v+=E.width;y=Math.max(F,y)}g=le.pt(v+r,y);l||(g=g.maxPt(a.extent));return g}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"HorizontalLayout"}}],e,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",
version:"0.1.2"}}},{start:14645,end:18506})}(le.FloatLayout));le.HorizontalLayout=Gv;le.HorizontalLayout=Gv;le.HorizontalLayout=Gv;var KH=Da("aC",function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/layout.js"),m=e.hasOwnProperty("ProportionalLayout")&&"function"===typeof e.ProportionalLayout?e.ProportionalLayout:e.ProportionalLayout=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return dc(m,b,[{key:"name",
value:function(){return"Proportional"}},{key:"description",value:function(){return"Resizes, scales, and moves morphs according to their original position."}},{key:"inspect",value:function(a){}},{key:Symbol.for("lively-instance-initialize"),value:function(a){dc._get(Object.getPrototypeOf(m.prototype),Symbol.for("lively-instance-initialize"),this).call(this,a);this.extentDelta=le.pt(0,0);this.proportionalLayoutSettingsForMorphs=new WeakMap;this.submorphSettings=a&&a.submorphSettings||[];this.lastExtent=
a.lastExtent;delete this.spacing;delete this.autoResize}},{key:"getSpec",value:function(){return{submorphSettings:this.submorphSettings,reactToSubmorphAnimations:this.reactToSubmorphAnimations,lastExtent:this.lastExtent}}},{key:"__serialize__",value:function(){return{__expr__:"new ProportionalLayout("+le.obj.inspect(this.getSpec())+")",bindings:{"lively.morphic":["ProportionalLayout"]}}}},{key:"__dont_serialize__",get:function(){return[].concat($jscomp.arrayFromIterable(dc._get(Object.getPrototypeOf(m.prototype),
"__dont_serialize__",this)),["extentDelta","lastExtent"])}},{key:"__after_deserialize__",value:function(a,g){var l=this._submorphSettings;a=this.container;g=this.proportionalLayoutSettingsForMorphs||new WeakMap;this.extentDelta=le.pt(0,0);if(l&&a){l=$jscomp.makeIterator(l);for(var r=l.next();!r.done;r=l.next()){var v=$jscomp.makeIterator(r.value);r=v.next().value;v=v.next().value;(r=$jscomp.makeIterator(this._morphsMatchingSelector(a,r)).next().value)&&g.set(r,v)}this.proportionalLayoutSettingsForMorphs=
g}}},{key:"onSubmorphChange",value:function(a,g,l,r){"name"===g.prop&&(l=this.proportionalLayoutSettingsForMorphs.get(a))&&this.changeSettingsFor(a,l,!0);return dc._get(Object.getPrototypeOf(m.prototype),"onSubmorphChange",this).call(this,a,g)}},{key:"settingsFor",value:function(a){return this.proportionalLayoutSettingsForMorphs.get(a)||{x:"scale",y:"scale"}}},{key:"changeSettingsFor",value:function(a,g,l){l=void 0===l?!1:l;"string"===typeof g&&(g={x:g,y:g});this.proportionalLayoutSettingsForMorphs.set(a,
Object.assign({},this.settingsFor(a),{},g));l&&(g=this.submorphSettings.filter(function(r){return r[0]!==a.name}),g.push([a.name,this.settingsFor(a)]),this._submorphSettings=g)}},{key:"submorphSettings",get:function(){return this._submorphSettings}},{key:"submorphSettings",set:function(a){if(this.container)this._submorphSettings=a,this.changeSubmorphSettings(a);else le.once(this,"container",this,"submorphSettings",{converter:"function () { return submorphSettings }",varMapping:{submorphSettings:a}})}},
{key:"changeSubmorphSettings",value:function(a){var g=this,l={};a=$jscomp.makeIterator(a);for(var r=a.next();!r.done;l={$jscomp$loop$prop$setting$2227:l.$jscomp$loop$prop$setting$2227},r=a.next()){r=$jscomp.makeIterator(r.value);var v=r.next().value;l.$jscomp$loop$prop$setting$2227=r.next().value;this._morphsMatchingSelector(this.container,v).forEach(function(y){return function(A){return g.changeSettingsFor(A,y.$jscomp$loop$prop$setting$2227)}}(l))}}},{key:"_morphsMatchingSelector",value:function(a,
g){var l=this,r=[];if(!g)return r;g.isMorph?r=[g]:g instanceof RegExp?r=a.submorphs.filter(function(v){return v.name.match(g)}):"string"===typeof g?r=a.submorphs.filter(function(v){return v.name===g}):Array.isArray(g)&&(r=le.arr.flatmap(g,function(v){return l._morphsMatchingSelector(a,v)}));return r}},{key:"refreshBoundsCache",value:function(){var a=this.container.extent,g=this.lastExtent;g&&!a.eqPt(g)&&(this.extentDelta=this.extentDelta.addPt(a.subPt(g)));this.lastExtent=a;this.layoutableSubmorphBounds=
this.layoutableSubmorphs.map(function(l){return l.bounds()})}},{key:"apply",value:function(a){a=void 0===a?!1:a;var g=this.container,l=this.extentDelta,r=l.x;l=l.y;var v=(g||{}).extent;if(!this.active&&g&&(0!=r||0!=l)){this.extentDelta=le.pt(0,0);this.active=!0;dc._get(Object.getPrototypeOf(m.prototype),"apply",this).call(this,a);var y=this.layoutableSubmorphs;g=v.scaleByPt(v.addXY(-r,-l).invertedSafely());v=$jscomp.makeIterator(y);for(y=v.next();!y.done;y=v.next()){y=y.value;var A=this.settingsFor(y),
E=A.x,F=A.y,H=A=0,I=0,M=0;"move"===E&&(A=r);"move"===F&&(H=l);"resize"===E&&(I=r);"resize"===F&&(M=l);if("scale"===E||"scale"===F)E=le.pt("scale"===E?g.x:1,"scale"===F?g.y:1),this.changePropertyAnimated(y,"position",y.position.scaleByPt(E),a),this.changePropertyAnimated(y,"extent",y.extent.scaleByPt(E),a);(A||H)&&this.changePropertyAnimated(y,"position",y.position.addXY(A,H),a);(I||M)&&this.changePropertyAnimated(y,"extent",y.extent.addXY(I,M),a)}this.forceLayoutsInNextLevel();this.active=!1}}},{key:"copy",
value:function(){return new this.constructor(this.getSpec())}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ProportionalLayout"}}],e,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:18516,end:24002})}(le.Layout));le.ProportionalLayout=KH;le.ProportionalLayout=KH;le.ProportionalLayout=
KH;var LH=function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/layout.js"),m=e.hasOwnProperty("CenteredTilingLayout")&&"function"===typeof e.CenteredTilingLayout?e.CenteredTilingLayout:e.CenteredTilingLayout=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return dc(m,b,[{key:"name",value:function(){return"CenteredTiling"}},{key:"description",value:function(){return"Similar to TilingLayout but center the rows."}},
{key:"apply",value:function(a){a=void 0===a?!1:a;if(!this.active&&this.container){this.active=!0;dc._get(Object.getPrototypeOf(m.prototype),"apply",this).call(this,a);a=this.getOptimalWidth(this.container);var g=this.spacing,l=this.layoutableSubmorphs,r=g+this.border.top;l=l.slice();for(var v={};l.length;){v.$jscomp$loop$prop$remainingWidth$2229=a;var y=le.arr.takeWhile(l,function(F){return function(H){H=F.$jscomp$loop$prop$remainingWidth$2229-(H.width+2*g);if(0>H)return!1;F.$jscomp$loop$prop$remainingWidth$2229=
H;return!0}}(v));y.length?l=le.arr.withoutAll(l,y):(y=[l.shift()],v.$jscomp$loop$prop$remainingWidth$2229=0);var A=le.pt(v.$jscomp$loop$prop$remainingWidth$2229/2+g+this.border.left,r);y=$jscomp.makeIterator(y);for(var E=y.next();!E.done;E=y.next())E=E.value,E.position=A,A=A.addXY(2*g+E.width,0),r=Math.max(r,E.bottom);r+=2*g;v={$jscomp$loop$prop$remainingWidth$2229:v.$jscomp$loop$prop$remainingWidth$2229}}this.active=!1}}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"CenteredTilingLayout"}}],
e,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:24011,end:25287})}(le.TilingLayout);le.CenteredTilingLayout=LH;le.CenteredTilingLayout=LH;le.CenteredTilingLayout=LH;var MH=Da("a$",function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/layout.js"),m=e.hasOwnProperty("TilingLayout")&&
"function"===typeof e.TilingLayout?e.TilingLayout:e.TilingLayout=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return dc(m,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){a=void 0===a?{}:a;dc._get(Object.getPrototypeOf(m.prototype),Symbol.for("lively-instance-initialize"),this).call(this,a);this._axis=a.axis||"row";this._align=a.align||"left";this._verticalAlign=a.verticalAlign||"top";this._orderByIndex=
a.orderByIndex||!1;delete this.autoResize}},{key:"name",value:function(){return"Tiling"}},{key:"description",value:function(){return"Make the submorphs fill their owner, inserting breaks to defer intersecting the bounds as much as possible."}},{key:"inspect",value:function(a){}},{key:"__serialize__",value:function(){return{__expr__:"new TilingLayout("+le.obj.inspect(this.getSpec())+")",bindings:{"lively.morphic":["TilingLayout"]}}}},{key:"copy",value:function(){return new this.constructor(this.getSpec())}},
{key:"getSpec",value:function(){return{axis:this.axis,align:this.align,spacing:this.spacing,orderByIndex:this.orderByIndex,reactToSubmorphAnimations:this.reactToSubmorphAnimations}}},{key:"possibleAxisValues",get:function(){return["row","columns"]}},{key:"possibleAlignValues",get:function(){return["left","center","right"]}},{key:"orderByIndex",get:function(){return this._orderByIndex}},{key:"orderByIndex",set:function(a){this._orderByIndex=a;this.apply()}},{key:"axis",get:function(){return this._axis}},
{key:"axis",set:function(a){this._axis=a;this.apply()}},{key:"align",get:function(){return this._align}},{key:"align",set:function(a){this._align=a;this.apply()}},{key:"spacing",get:function(){return this._spacing}},{key:"spacing",set:function(a){this._spacing=a;this.apply()}},{key:"apply",value:function(a){a=void 0===a?!1:a;if(!this.active&&this.container){this.active=!0;dc._get(Object.getPrototypeOf(m.prototype),"apply",this).call(this,a);var g=this.axis,l=this.align,r=this.border,v=this.spacing,
y=this.layoutableSubmorphs,A=this.getOptimalWidth(this.container),E=(g="row"==g)?"left":"top",F=g?"x":"y",H=g?"y":"x",I=0,M=v+r[g?"top":"left"],N="topLeft";switch(this._verticalAlign){case "top":N="topLeft";break;case "center":N="leftCenter";break;case "bottom":N="bottomLeft"}for(;y.length;){var W=A-v,X=le.arr.takeWhile(y,function(Ma){Ma=Ma.bounds().extent();Ma=W-(Ma[F]+v);if(0>Ma)return!1;W=Ma;return!0});X.length?y.splice(0,X.length):(X=[y.shift()],W=0);I=le.arr.max(X.map(function(Ma){return Ma.bounds().extent()[H]}));
if(g)switch(l){case "left":var ea=le.pt(v,M);break;case "center":ea=le.pt(W/2+v+r[E],M);break;case "right":ea=le.pt(W-v,M)}else switch(l){case "left":ea=le.pt(M,v);break;case "center":ea=le.pt(M,W/2+v+r[E]);break;case "right":ea=le.pt(M,W-v)}"bottomLeft"==N&&(ea=ea.addXY(0,I));X=$jscomp.makeIterator(X);for(var Aa=X.next();!Aa.done;Aa=X.next())Aa=Aa.value,this.changePropertyAnimated(Aa,N,ea,a),Aa=Aa.bounds().extent(),ea=g?ea.addXY(v+Aa[F],0):ea.addXY(0,v+Aa[F]);M+=v+I;I=0}this.active=!1}}},{key:"getMinWidth",
value:function(){var a=this.border,g=a.left;a=a.right;return this.layoutableSubmorphs.reduce(function(l,r){return r.bounds().width>l?r.bounds().width:l},0)+g+a}},{key:"getMinHeight",value:function(){var a=this.border,g=a.top;a=a.bottom;return this.layoutableSubmorphs.reduce(function(l,r){return r.bounds().height>l?r.bounds().height:l},0)+g+a}},{key:"getOptimalWidth",value:function(a){var g=this.axis,l=this.border,r=l.left,v=l.top,y=l.right;l=l.bottom;a="row"==g?a.width-r-y:a.height-v-l;g="row"==g?
this.getMinWidth():this.getMinHeight();return Math.max(a,g)}},{key:"layoutOrder",value:function(a){return this.orderByIndex?this.container.submorphs.indexOf(a):"row"===this.axis?1E6*(a.top-a.top%15)+a.left:1E6*(a.left-a.left%15)+a.top}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"TilingLayout"}}],e,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:25296,end:30811})}(le.Layout));le.TilingLayout=MH;le.TilingLayout=MH;le.TilingLayout=MH;var NH=function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/layout.js"),m=e.hasOwnProperty("CellGroup")&&"function"===typeof e.CellGroup?e.CellGroup:e.CellGroup=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return dc(m,b,[{key:Symbol.for("lively-instance-initialize"),
value:function(a){var g=a.morph,l=a.layout;this.state={cells:[a.cell],layout:l,align:a.align,resize:l.fitToCell};l&&l.addGroup(this);this.morph=g}},{key:"morph",get:function(){var a=this.state,g=a.morph;a=a.layout;return g?g.isMorph?g:a.layoutableSubmorphs.find(function(l){return l.name==g}):null}},{key:"compensateOrigin",get:function(){return this.layout.compensateOrigin}},{key:"resize",get:function(){return this.state.resize}},{key:"resize",set:function(a){this.state.resize=a;this.layout.apply()}},
{key:"align",get:function(){return this.state.align||"topLeft"}},{key:"align",set:function(a){this.state.align=a;this.layout.apply()}},{key:"morph",set:function(a){var g=a&&this.layout.getCellGroupFor(a);g&&(g.morph=null);this.state.morph=a;this.layout.apply()}},{key:"manages",value:function(a){return this.morph&&(this.morph==a||this.morph.name==a)}},{key:"apply",value:function(a){a=void 0===a?!1:a;var g=this.morph;if(g){var l=this.bounds(),r=this.compensateOrigin?this.layout.container.origin.negated():
le.pt(0,0);if(a){var v=this.resize?l.extent():g.extent,y=a;a=y.duration;y=y.easing;var A={};g.animate((A[this.alignedProperty||this.align]=l[this.align]().addPt(r),A.extent=v,A.duration=a,A.easing=y,A))}else this.resize&&(g.extent=l.extent()),g[this.alignedProperty||this.align]=l[this.align]().addPt(r);this.layout.forceLayoutsInNextLevel()}}},{key:"cells",get:function(){return this.state.cells}},{key:"layout",get:function(){return this.state.layout}},{key:"bounds",value:function(){return 0<this.cells.length?
this.cells.map(function(a){return a.bounds()}).reduce(function(a,g){return a.union(g)}):le.rect(0,0,0,0)}},{key:"includes",value:function(a){return this.cells.find(function(g){return g==a})}},{key:"connect",value:function(a){void 0==this.morph&&(this.morph=a.group.morph);a.group?a.group.disconnect(a,this):a.group=this;this.cells.push(a)}},{key:"disconnect",value:function(a,g){a.group=(void 0===g?null:g)||new le.CellGroup({morph:null,layout:this.layout,cell:a});le.arr.remove(this.cells,a);1>this.cells.length&&
this.layout&&this.layout.removeGroup(this)}},{key:"merge",value:function(a){var g=this;a.cells.forEach(function(l){g.connect(l)})}},{key:"topLeft",get:function(){var a=this;return this.cells.find(function(g){return(null==g.left||g.left.group!=a)&&(null==g.top||g.top.group!=a)})}},{key:"bottomRight",get:function(){var a=this;return this.cells.find(function(g){return(null==g.right||g.right.group!=a)&&(null==g.bottom||g.bottom.group!=a)})}},{key:"position",get:function(){return this.topLeft.position}}],
[{key:Symbol.for("__LivelyClassName__"),get:function(){return"CellGroup"}}],e,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:30820,end:34026})}(void 0);le.CellGroup=NH;le.CellGroup=NH;le.CellGroup=NH;(function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/layout.js"),m=e.hasOwnProperty("LayoutAxis")&&
"function"===typeof e.LayoutAxis?e.LayoutAxis:e.LayoutAxis=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return dc(m,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){this.origin=a}},{key:"otherAxis",get:function(){return[].concat($jscomp.arrayFromIterable(this.axisBefore),$jscomp.arrayFromIterable(this.axisAfter))}},{key:"axisBefore",get:function(){for(var a=this,g=[];a=a.before;)g=[a].concat($jscomp.arrayFromIterable(g));
return g}},{key:"axisAfter",get:function(){for(var a=this,g=[];a=a.after;)g=[].concat($jscomp.arrayFromIterable(g),[a]);return g}},{key:"before",get:function(){throw Error("before() not implemented!");}},{key:"after",get:function(){throw Error("after() not implemented!");}},{key:"containerLength",get:function(){return this.container[this.dimension]}},{key:"containerLength",set:function(a){this.container[this.dimension]=a}},{key:"getRoot",value:function(){return(this.axisBefore[0]||this).items[0]}},
{key:"container",get:function(){return this.origin.container}},{key:"layout",get:function(){return this.origin.layout}},{key:"frozen",get:function(){return this.origin.frozen[this.dimension]}},{key:"frozen",set:function(a){this.origin.frozen[this.dimension]=a}},{key:"align",set:function(a){this.items.forEach(function(g){return g.group.state.align=a})}},{key:"fixed",get:function(){return this.origin.fixed[this.dimension]}},{key:"fixed",set:function(a){var g=this;if(le.obj.isNumber(a)){var l=a;a=!0}this.items.forEach(function(v){v.fixed[g.dimension]=
a});var r=this.containerLength;void 0!=l&&(this[this.dimension]=l);this.adjustOtherProportions(a);this.containerLength=r}},{key:"length",get:function(){return this.origin[this.dimension]}},{key:"length",set:function(a){var g=this;this.items.forEach(function(l){l[g.dimension]=le.num.roundTo(a,1)})}},{key:"proportion",get:function(){return this.origin.proportion[this.dimension]}},{key:"proportion",set:function(a){var g=this;this.items.forEach(function(l){l.proportion[g.dimension]=a})}},{key:"min",get:function(){return this.origin.min[this.dimension]}},
{key:"min",set:function(a){this.adjustMin(a-this.min)}},{key:"adjustMin",value:function(a){var g=this;this.items.forEach(function(l){l.min[g.dimension]=0>l.min[g.dimension]+a?0:l.min[g.dimension]+a});this.layout.apply()}},{key:"adjustProportion",value:function(){this.fixed||(this.proportion=0<this.dynamicLength?this.length/this.dynamicLength:0)}},{key:"adjustOtherProportions",value:function(a){var g=this,l=this.axisBefore,r=this.axisAfter,v=le.arr.sum([].concat($jscomp.arrayFromIterable(l),$jscomp.arrayFromIterable(r)).filter(function(E){return!E.fixed}).map(function(E){return E.proportion})),
y=function(E){return E.proportion/=v},A=function(E){return E.proportion*=g.origin.removedDynamicProportions};a&&(this.origin.removedDynamicProportions=v);l.forEach(a?y:A);r.forEach(a?y:A)}},{key:"prepareForResize",value:function(a){a=this.proportion*Math.max(0,a-this.staticLength);this.frozen&&a>=this.min?(this.fixed=this.frozen=!1,this.length=a):!this.frozen&&this.min>a&&(this.fixed=this.frozen=!0,this.length=this.min);return this}},{key:"adjustLength",value:function(a){var g;0>this.length+a&&(a=
-this.length);(g=this.axisAfter.find(function(l){return!l.fixed}))?(a=Math.min(a,g.length),this.length+=a,g.length-=a,this.adjustProportion(),g.adjustProportion()):(g=this.axisBefore.reverse().find(function(l){return!l.fixed}))?(g.length-=a,this.length+=a,this.adjustProportion(),g.adjustProportion()):(this.length+=a,this.adjustProportion(),this.otherAxis.forEach(function(l){return l.adjustProportion()}),this.containerLength+=a)}},{key:"equalizeDynamicAxis",value:function(){var a=[].concat($jscomp.arrayFromIterable(this.otherAxis.filter(function(l){return!l.fixed})),
$jscomp.arrayFromIterable(this.fixed?[]:[this])),g=(this.containerLength-this.staticLength)/a.length;a.map(function(l){l.fixed||(l.length=g);return l}).forEach(function(l){return l.adjustProportion()})}},{key:"addBefore",value:function(){var a=this.emptyAxis();this.before&&this.before.attachTo(a);a.attachTo(this);this.equalizeDynamicAxis();this.layout.grid=this.getRoot()}},{key:"addAfter",value:function(){var a=this.emptyAxis();this.after&&a.attachTo(this.after);this.attachTo(a);this.equalizeDynamicAxis();
this.layout.grid=this.getRoot()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"LayoutAxis"}}],e,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:34666,end:40329})})(void 0);var OH=function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/layout.js"),m=e.hasOwnProperty("LayoutColumn")&&
"function"===typeof e.LayoutColumn?e.LayoutColumn:e.LayoutColumn=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return dc(m,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){dc._get(Object.getPrototypeOf(m.prototype),Symbol.for("lively-instance-initialize"),this).call(this,a);this.items=[].concat($jscomp.arrayFromIterable(a.above),[a],$jscomp.arrayFromIterable(a.below))}},{key:"dimension",get:function(){return"width"}},
{key:"before",get:function(){return this._before||(this._before=this.origin.left&&new le.LayoutColumn(this.origin.left))}},{key:"after",get:function(){return this._after||(this._after=this.origin.right&&new le.LayoutColumn(this.origin.right))}},{key:"row",value:function(a){return this.items[a]}},{key:"dynamicLength",get:function(){return this.origin.dynamicWidth}},{key:"staticLength",get:function(){return this.origin.totalStaticWidth}},{key:"width",get:function(){return this.length}},{key:"width",
set:function(a){a-=this.width;this.fixed?(this.length+=a,this.container.width+=a):this.adjustLength(a);!this.layout.manualUpdate&&this.layout.apply()}},{key:"paddingLeft",set:function(a){this.items.forEach(function(g){g.padding.x=a});this.layout.apply()}},{key:"paddingLeft",get:function(){return this.items[0].padding.x}},{key:"paddingRight",set:function(a){this.items.forEach(function(g){g.padding.width=a});this.layout.apply()}},{key:"paddingRight",get:function(){return this.items[0].padding.width}},
{key:"emptyAxis",value:function(){var a=new le.LayoutColumn(new le.LayoutCell({column:le.arr.withN(this.items.length,null),layout:this.layout}));le.arr.zip(a.items,this.items).forEach(function(g){var l=$jscomp.makeIterator(g);g=l.next().value;l=l.next().value;g.height=l.height;g.fixed.height=l.fixed.height;g.frozen.height=l.frozen.height;g.proportion.height=l.proportion.height;g.min.height=l.min.height});return a}},{key:"attachTo",value:function(a){this.after&&(this.after._before=null);this._after=
null;le.arr.zip(this.items,a.items).forEach(function(g){var l=$jscomp.makeIterator(g);g=l.next().value;l=l.next().value;g.right=l;l.left=g});this.equalizeDynamicAxis();return a}},{key:"remove",value:function(){var a=this,g=this.before||this.after;this.items.forEach(function(l){l.left&&(l.left.right=l.right);l.right&&(l.right.left=l.left);l.group.disconnect(l);a.layout.removeGroup(l.group)});this.before&&(this.before._after=null);this.after&&(this.after._before=null);this.before||(this.layout.grid=
this.after.getRoot());g.equalizeDynamicAxis()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"LayoutColumn"}}],e,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:40338,end:42707})}(le.LayoutAxis);le.LayoutColumn=OH;le.LayoutColumn=OH;le.LayoutColumn=OH;var PH=function(b){var e=
lively.FreezerRuntime.recorderFor("lively.morphic/layout.js"),m=e.hasOwnProperty("LayoutRow")&&"function"===typeof e.LayoutRow?e.LayoutRow:e.LayoutRow=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return dc(m,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){dc._get(Object.getPrototypeOf(m.prototype),Symbol.for("lively-instance-initialize"),this).call(this,a);this.items=[].concat($jscomp.arrayFromIterable(a.before),
[a],$jscomp.arrayFromIterable(a.after))}},{key:"dimension",get:function(){return"height"}},{key:"emptyAxis",value:function(){var a=new le.LayoutRow(new le.LayoutCell({row:le.arr.withN(this.items.length,null),layout:this.layout}));le.arr.zip(a.items,this.items).forEach(function(g){var l=$jscomp.makeIterator(g);g=l.next().value;l=l.next().value;g.width=l.width;g.fixed.width=l.fixed.width;g.frozen.width=l.frozen.width;g.proportion.width=l.proportion.width;g.min.width=l.min.width});return a}},{key:"paddingTop",
set:function(a){this.items.forEach(function(g){g.padding.y=a});this.layout.apply()}},{key:"paddingTop",get:function(){return this.items[0].padding.y}},{key:"paddingBottom",set:function(a){this.items.forEach(function(g){g.padding.height=a});this.layout.apply()}},{key:"paddingBottom",get:function(){return this.items[0].padding.height}},{key:"before",get:function(){return this._before||(this._before=this.origin.top&&new le.LayoutRow(this.origin.top))}},{key:"after",get:function(){return this._after||
(this._after=this.origin.bottom&&new le.LayoutRow(this.origin.bottom))}},{key:"dynamicLength",get:function(){return this.origin.dynamicHeight}},{key:"staticLength",get:function(){return this.origin.totalStaticHeight}},{key:"attachTo",value:function(a){this.after&&(this.after._before=null);this._after=null;le.arr.zip(this.items,a.items).forEach(function(g){var l=$jscomp.makeIterator(g);g=l.next().value;l=l.next().value;g.bottom=l;l.top=g});this.equalizeDynamicAxis();return a}},{key:"col",value:function(a){return this.items[a]}},
{key:"height",get:function(){return this.length}},{key:"height",set:function(a){a-=this.height;this.fixed?(this.length+=a,this.container.height+=a):(this.adjustLength(a),this.proportion=0<this.origin.dynamicHeight?this.height/this.origin.dynamicHeight:0);!this.layout.manualUpdate&&this.layout.apply()}},{key:"remove",value:function(){var a=this,g=this.before||this.after;this.items.forEach(function(l){l.top&&(l.top.bottom=l.bottom);l.bottom&&(l.bottom.top=l.top);l.group.disconnect(l);a.layout.removeGroup(l.group)});
this.before&&(this.before._after=null);this.after&&(this.after._before=null);this.before||(this.layout.grid=this.after.getRoot());g.equalizeDynamicAxis()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"LayoutRow"}}],e,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:42716,
end:45166})}(le.LayoutAxis);le.LayoutRow=PH;le.LayoutRow=PH;le.LayoutRow=PH;var QH=function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/layout.js"),m=e.hasOwnProperty("LayoutCell")&&"function"===typeof e.LayoutCell?e.LayoutCell:e.LayoutCell=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return dc(m,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){var g=a.row,l=a.column,r=a.top,v=a.left,
y=a.right,A=a.bottom;a=a.layout;var E;g=$jscomp.makeIterator(g||[]);var F=g.next().value;g=$jscomp.arrayFromIterator(g);l=$jscomp.makeIterator(l||[]);var H=l.next().value;l=$jscomp.arrayFromIterator(l);this.layout=a;this.fixed={width:!1,height:!1};this.frozen={width:!1,height:!1};this.min={width:0,height:0};this.top=r;this.left=v;this.bottom=A;this.right=y;this.padding=le.rect(0,0,0,0);0<g.length?this.right=new le.LayoutCell({row:g,left:this,layout:a}):0<l.length&&(this.bottom=new le.LayoutCell({column:l,
top:this,layout:a}));this.proportion={width:1/(1+this.before.length+this.after.length),height:1/(1+this.above.length+this.below.length)};this.height=this.container.height*this.proportion.height;this.width=this.container.width*this.proportion.width;(E=a&&a.getCellGroupFor(F||H))?E.connect(this):this.group=new le.CellGroup({cell:this,morph:F||H,layout:a})}},{key:"container",get:function(){return this.layout.container}},{key:"above",get:function(){return this.collect({neighbor:"top",prepend:!0})}},{key:"below",
get:function(){return this.collect({neighbor:"bottom",append:!0})}},{key:"before",get:function(){return this.collect({neighbor:"left",prepend:!0})}},{key:"after",get:function(){return this.collect({neighbor:"right",append:!0})}},{key:"collect",value:function(a){var g=a.neighbor,l=a.prepend;a=a.append;for(var r=[],v=this;v=v[g];)l&&(r=[v].concat($jscomp.arrayFromIterable(r))),a&&(r=[].concat($jscomp.arrayFromIterable(r),[v]));return r}},{key:"col",value:function(a){for(var g=this,l=a;0<l&&g;)g=g.right,
l--;if(!g)throw Error(a+" out of bounds! Last column was "+(a-l-1));return new le.LayoutColumn(g)}},{key:"row",value:function(a){for(var g=this,l=a;0<l&&g;)g=g.bottom,l--;if(!g)throw Error(a+" out of bounds! Last row was "+(a-l-1));return new le.LayoutRow(g)}},{key:"extent",get:function(){return le.pt(this.width,this.height)}},{key:"staticWidth",get:function(){return this.fixed.width||this.min.width==this.width}},{key:"staticHeight",get:function(){return this.fixed.height||this.min.height==this.height}},
{key:"totalStaticWidth",get:function(){return le.arr.sum([this].concat($jscomp.arrayFromIterable(this.before),$jscomp.arrayFromIterable(this.after)).filter(function(a){return a.staticWidth}).map(function(a){return a.width}))}},{key:"totalStaticHeight",get:function(){return le.arr.sum([this].concat($jscomp.arrayFromIterable(this.above),$jscomp.arrayFromIterable(this.below)).filter(function(a){return a.staticHeight}).map(function(a){return a.height}))}},{key:"dynamicWidth",get:function(){return le.arr.sum([this].concat($jscomp.arrayFromIterable(this.before),
$jscomp.arrayFromIterable(this.after)).filter(function(a){return!a.staticWidth}).map(function(a){return a.width}))}},{key:"dynamicHeight",get:function(){return le.arr.sum([this].concat($jscomp.arrayFromIterable(this.above),$jscomp.arrayFromIterable(this.below)).filter(function(a){return!a.staticHeight}).map(function(a){return a.height}))}},{key:"height",get:function(){return Math.max(this.min.height,this._height||0)}},{key:"height",set:function(a){this._height=a}},{key:"width",get:function(){return Math.max(this.min.width,
this._width||0)}},{key:"width",set:function(a){this._width=a}},{key:"position",get:function(){return le.pt(le.arr.sum(this.before.map(function(a){return a.width})),le.arr.sum(this.above.map(function(a){return a.height})))}},{key:"bounds",value:function(){return this.position.addPt(this.padding.topLeft()).extent(this.extent.subPt(this.padding.extent()).subPt(this.padding.topLeft()))}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"LayoutCell"}}],e,{pathInPackage:function(){return"layout.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:45175,end:48921})}(void 0);le.LayoutCell=QH;le.LayoutCell=QH;le.LayoutCell=QH;var Wy=Da("al",function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/layout.js"),m=e.hasOwnProperty("GridLayout")&&"function"===typeof e.GridLayout?e.GridLayout:e.GridLayout=function(a){a&&a[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return dc(m,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){dc._get(Object.getPrototypeOf(m.prototype),Symbol.for("lively-instance-initialize"),this).call(this,a);a=Object.assign({autoAssign:!0,fitToCell:!0},a);this.cellGroups=[];this.config=a}},{key:"name",value:function(){return"Grid"}},{key:"description",value:function(){return"Aligns the submorphs alongside a configurable grid. Columns and rows and be configured to have different proportional, minimal or fixed sizes. Cells can further be grouped such that submorphs fill up multiple slots of the grid."}},
{key:"copy",value:function(){return new this.constructor(this.getSpec())}},{key:"getSpec",value:function(){for(var a=[],g=[],l=[],r={},v=$jscomp.makeIterator(le.arr.range(0,this.rowCount-1)),y=v.next();!y.done;y=v.next())a.push(this.grid.row(y.value).items.map(function(E){return E.group.state.morph?E.group.state.morph.name||E.group.state.morph:null}));v=$jscomp.makeIterator(le.arr.range(0,this.rowCount-1));for(y=v.next();!y.done;y=v.next()){y=y.value;var A=this.grid.row(y);g.push(y,Object.assign({},
A.fixed?{fixed:A.length}:{height:A.height},{paddingTop:A.paddingTop,paddingBottom:A.paddingBottom}))}v=$jscomp.makeIterator(le.arr.range(0,this.columnCount-1));for(y=v.next();!y.done;y=v.next())y=y.value,A=this.grid.col(y),l.push(y,Object.assign({},A.fixed?{fixed:A.length}:{},{paddingLeft:A.paddingLeft,paddingRight:A.paddingRight}));v=$jscomp.makeIterator(this.cellGroups);for(y=v.next();!y.done;y=v.next())y=y.value,y.state.morph&&(r["string"==typeof y.state.morph?y.state.morph:y.morph.name]=le.obj.select(y,
["align","resize"]));return{autoAssign:!1,grid:a,rows:g,columns:l,groups:r}}},{key:"__serialize__",value:function(){return{__expr__:"new GridLayout("+le.obj.inspect(this.getSpec(),{escapeKeys:!0})+")",bindings:{"lively.morphic":["GridLayout"]}}}},{key:"initGrid",value:function(){var a=this,g=this.ensureGrid(this.config).map(function(l){return new le.LayoutRow(new le.LayoutCell({row:l,layout:a}))});g.reduce(function(l,r){return l.attachTo(r)});this.config.autoAssign&&this.autoAssign(this.notInLayout);
this.grid=g[0].col(0);this.col(0).equalizeDynamicAxis();this.row(0).equalizeDynamicAxis();this.initRowsAndColumns();this.initGroups()}},{key:"initGroups",value:function(){var a=this.config.groups;if(a)for(var g in a){var l=this.getCellGroupFor(this.container.getSubmorphNamed(g)),r=a[g],v=r.resize,y=void 0===r.align?"topLeft":r.align;r=void 0===r.alignedProperty?"topLeft":r.alignedProperty;l&&(void 0!=v&&(l.resize=v),l.align=y,l.alignedProperty=r)}}},{key:"initRowsAndColumns",value:function(){var a=
this.config,g=void 0===a.columns?[]:a.columns,l=$jscomp.makeIterator(le.arr.toTuples(void 0===a.rows?[]:a.rows,2));for(a=l.next();!a.done;a=l.next()){var r=$jscomp.makeIterator(a.value);a=r.next().value;r=r.next().value;Object.assign(this.row(a),r)}g=$jscomp.makeIterator(le.arr.toTuples(g,2));for(a=g.next();!a.done;a=g.next())l=$jscomp.makeIterator(a.value),a=l.next().value,r=l.next().value,Object.assign(this.col(a),r)}},{key:"compensateOrigin",get:function(){return this.config.compensateOrigin}},
{key:"compensateOrigin",set:function(a){this.config.compensateOrigin=a;this.apply()}},{key:"fitToCell",get:function(){return this.config.fitToCell}},{key:"fitToCell",set:function(a){this.config.fitToCell=a;this.cellGroups.forEach(function(g){return g.resize=a});this.apply()}},{key:"notInLayout",get:function(){return le.arr.withoutAll(this.layoutableSubmorphs,this.cellGroups.map(function(a){return a.morph}))}},{key:"col",value:function(a){return this.grid.col(a)}},{key:"row",value:function(a){return this.grid.row(a)}},
{key:"rowCount",get:function(){return this.grid.col(0).items.length}},{key:"columnCount",get:function(){return this.grid.row(0).items.length}},{key:"addGroup",value:function(a){this.cellGroups.push(a)}},{key:"removeGroup",value:function(a){le.arr.remove(this.cellGroups,a)}},{key:"fitAxis",value:function(){var a=this,g,l;[this.grid.row(0)].concat($jscomp.arrayFromIterable(this.grid.row(0).axisAfter)).map(function(r){r.prepareForResize(a.container.height);g=a.grid.totalStaticHeight;return r}).forEach(function(r){r.fixed||
(r.length=r.proportion*Math.max(0,a.container.height-g))});[this.grid.col(0)].concat($jscomp.arrayFromIterable(this.grid.col(0).axisAfter)).map(function(r){r.prepareForResize(a.container.width);l=a.grid.totalStaticWidth;return r}).forEach(function(r){r.fixed||(r.length=r.proportion*Math.max(0,a.container.width-l))})}},{key:"apply",value:function(a){a=void 0===a?!1:a;this.active||(this.active=!0,dc._get(Object.getPrototypeOf(m.prototype),"apply",this).call(this,a),this.grid||this.initGrid(),this.fitAxis(),
this.container.extent=le.pt(Math.max(this.grid.totalStaticWidth,this.container.width),Math.max(this.grid.totalStaticHeight,this.container.height)),this.fitAxis(),this.cellGroups.forEach(function(g){g&&g.apply(a)}),this.lastBoundsExtent=this.container.bounds().extent(),this.active=!1)}},{key:"submorphBoundsChanged",get:function(){for(var a=$jscomp.makeIterator(this.cellGroups),g=a.next();!g.done;g=a.next())if(g=g.value,g.morph&&!g.bounds().equals(g.morph.bounds()))return!0;return!1}},{key:"getCellGroupFor",
value:function(a){return a&&this.cellGroups.find(function(g){return g.morph==a})}},{key:"onSubmorphRemoved",value:function(a){var g=this.getCellGroupFor(a);g&&(g.morph=null);dc._get(Object.getPrototypeOf(m.prototype),"onSubmorphRemoved",this).call(this,a)}},{key:"inspect",value:function(a){}},{key:"ensureGrid",value:function(a){var g=this,l=a.grid,r=a.rowCount,v=a.columnCount;l=l||[[]];r=r||l.length;v=v||le.arr.max(l.map(function(y){return y.length}));l.length<r&&(l=l.concat(le.arr.withN(r-l.length,
[])));return l=l.map(function(y){y.length<v&&(y=y.concat(le.arr.withN(v-y.length,null)));return y.map(function(A){return A&&A.isMorph?(A.owner!=g.container&&g.container.addMorph(A),A):A?g.container.getSubmorphNamed(A)||A:A})})}},{key:"autoAssign",value:function(a){var g=this;a.forEach(function(l){var r,v=Infinity;g.cellGroups.forEach(function(y){y.morph||y.cells.forEach(function(A){A=A.position.dist(l.position);A<v&&(r=y,v=A)})});r&&(r.morph=l)})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"GridLayout"}}],
e,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:48930,end:55912})}(le.Layout));le.GridLayout=Wy;le.GridLayout=Wy;le.GridLayout=Wy;var G9=Object.freeze({__proto__:null,CustomLayout:IH,SnapLayout:JH,VerticalLayout:Vy,HorizontalLayout:Gv,ProportionalLayout:KH,CenteredTilingLayout:LH,TilingLayout:MH,
CellGroup:NH,LayoutColumn:OH,LayoutRow:PH,LayoutCell:QH,GridLayout:Wy});Da("bU",G9);var nf=lively.FreezerRuntime.recorderFor("lively.morphic/partsbin.js");nf.getAllPartResources=HS;nf.loadPart=fL;nf.savePart=IS;nf.interactivelySavePart=vG;nf.interactivelyLoadObjectFromPartsBinFolder=JS;nf.interactivelySaveObjectToPartsBinFolder=KS;nf.saveObjectToPartsbinFolder=LS;nf.loadObjectFromPartsbinFolder=wG;nf.buildCommitEditor=MS;nf.resource=la;nf.Resource=Tg;nf.registerExtension=w;nf.Path=Ah;nf.obj=Ag;nf.date=
yu;nf.promise=zh;nf.HorizontalLayout=Gv;nf.VerticalLayout=Vy;nf.morph=sa;nf.pt=xi;nf.Color=Fg;nf.Rectangle=He;nf.connect=rl;nf.emit=ft;nf.SnapshotPackageHelper=DN;nf.ensureCommitInfo=sG;nf.MorphicDB=Yw;nf.createMorphSnapshot=aA;nf.getAllPartResources=HS;nf.getAllPartResources=HS;nf.loadPart=fL;nf.loadPart=fL;nf.savePart=IS;nf.savePart=IS;nf.interactivelySavePart=vG;nf.interactivelySavePart=vG;nf.interactivelyLoadObjectFromPartsBinFolder=JS;nf.interactivelyLoadObjectFromPartsBinFolder=JS;nf.interactivelySaveObjectToPartsBinFolder=
KS;nf.interactivelySaveObjectToPartsBinFolder=KS;nf.saveObjectToPartsbinFolder=LS;nf.saveObjectToPartsbinFolder=LS;nf.loadObjectFromPartsbinFolder=wG;nf.loadObjectFromPartsbinFolder=wG;var OV=function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/partsbin.js"),m=e.hasOwnProperty("SnapshotEditor")&&"function"===typeof e.SnapshotEditor?e.SnapshotEditor:e.SnapshotEditor=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};
return dc(m,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a,g,l){this.commit=a;this.snapshot=g;this._db=l}},{key:"db",get:function(){return this._db||nf.MorphicDB.default}},{key:"saveModifiedSnapshot",value:function(a,g){var l=this,r,v,y,A;return $jscomp.asyncExecutePromiseGeneratorProgram(function(E){if(1==E.nextAddress){r=a;v=r._id;y=r.name;A=r.type;if(!v)throw Error("No id of commit, cannot save!");return E.yield(l.db.commit(A,y,g,a,void 0,v),2)}a=E.yieldResult;l.commit=a;l.snapshot=
g;return E.return(a)})}},{key:"interactivelySaveModifiedSnapshot",value:function(a,g){var l=this,r,v,y,A,E;return $jscomp.asyncExecutePromiseGeneratorProgram(function(F){r=nf.promise.deferred();v=r.promise;y=r.resolve;A=r.reject;E=l;Object.assign(nf.buildCommitEditor(),{commit:Object.assign({},l.commit,{},a),cancel:function(){(this.getWindow()||this).remove();A("canceled")},accept:function(){var H=this,I,M;return $jscomp.asyncExecutePromiseGeneratorProgram(function(N){if(1==N.nextAddress)return N.setCatchFinallyBlocks(2),
N.yield(E.saveModifiedSnapshot(H.commit,g),4);if(2!=N.nextAddress)return I=N.yieldResult,(H.getWindow()||H).remove(),y(H.commit=I),N.leaveTryBlock(0);M=N.enterCatchBlock();H.showError(M);A(M);N.jumpToEnd()})}}).openInWindow({title:"commit"});return F.return(v)})}},{key:"interactivelyEditMetadata",value:function(a){var g=this,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){if(1==r.nextAddress)return r.yield(g.interactivelySaveModifiedSnapshot(g.commit,g.snapshot),2);l=r.yieldResult;
"function"===typeof a&&a({commit:l,snapshot:g.snapshot});return r.return(l)})}},{key:"interactivelyEditSnapshotJSON",value:function(a){var g=this,l,r,v,y,A,E,F,H,I,M;return $jscomp.asyncExecutePromiseGeneratorProgram(function(N){if(1==N.nextAddress)return l=g,r=l.commit,v=l.snapshot,y=r,A=y._id,E=y.name,F=y.type,N.yield(System.import("lively.ide/text-editor.js"),2);I=N.yieldResult;M=I.default;M.openURL("<"+F+"/"+E+">",{historyId:"object-serialization-debugger-editor",customSaveAction:function(W){var X,
ea,Aa,Ma,K,aa;return $jscomp.asyncExecutePromiseGeneratorProgram(function(T){switch(T.nextAddress){case 1:if(X=v){T.jumpTo(2);break}return T.yield(g.db.fetchSnapshot(void 0,void 0,A),3);case 3:X=T.yieldResult;case 2:ea=X;Aa=JSON.stringify(ea,null,2);if(Aa===H){T.jumpTo(4);break}return T.yield($world.confirm(["The content you are editing was changed in the mean time.\nDo you want to save anyway and overwrite those changes?",{fontWeight:"normal"}]),5);case 5:if(Ma=T.yieldResult,!Ma)return T.return({saved:!1,
message:"canceled"});case 4:return K=JSON.parse(W.ui.contentText.textString),T.yield(g.interactivelySaveModifiedSnapshot(g.commit,K),6);case 6:return r=T.yieldResult,v=K,H=W.ui.contentText.textString,aa={saved:!0,snapshot:K,commit:r},"function"===typeof a&&a(aa),T.return(aa)}})},customLoadContentAction:function(W,X){var ea,Aa;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ma){if(1==Ma.nextAddress)return(ea=v)?Ma.jumpTo(2):Ma.yield(g.db.fetchSnapshot(void 0,void 0,A),3);2!=Ma.nextAddress&&
(ea=Ma.yieldResult);Aa=ea;return Ma.return({content:H=JSON.stringify(Aa,null,2),url:F+"/"+E+".json"})})}});N.jumpToEnd()})}},{key:"interactivelyEditPackageCode",value:function(a){var g=this,l,r,v,y,A,E,F,H,I,M,N,W;return $jscomp.asyncExecutePromiseGeneratorProgram(function(X){switch(X.nextAddress){case 1:l=g;r=l.commit;v=l.snapshot;y=r;A=y._id;if(E=v){X.jumpTo(2);break}return X.yield(g.db.fetchSnapshot(void 0,void 0,A),3);case 3:E=X.yieldResult;case 2:return F=E,H=(new nf.SnapshotPackageHelper(F)).filesInPackages(),
I=H.map(function(ea){return{isListItem:!0,string:ea.url,value:ea}}),X.yield($world.filterableListPrompt("Select file to edit",I,{historyId:"object-serialization-debugger-hist"}),4);case 4:return M=X.yieldResult,N=$jscomp.makeIterator(M.selected),(W=N.next().value)?X.return(g.interactivelyEditFileInSnapshotPackage(W,a)):X.return()}})}},{key:"interactivelyEditFileInSnapshotPackage",value:function(a,g,l){var r=this,v,y,A,E,F,H,I,M,N,W,X,ea;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Aa){switch(Aa.nextAddress){case 1:v=
r;y=v.snapshot;A=v.commit;E=A._id;F=A.name;H=A.type;if(I=y){Aa.jumpTo(2);break}return Aa.yield(r.db.fetchSnapshot(void 0,void 0,E),3);case 3:I=Aa.yieldResult;case 2:return M=I,N=a.get(M),Aa.yield(System.import("lively.ide/text-editor.js"),4);case 4:return W=Aa.yieldResult,X=W.default,ea=X.openURL("<"+H+"/"+F+" - "+a.path.slice(1).join("/")+">",{historyId:"interactivelyEditFileInSnapshotPackage-hist",customSaveAction:function(Ma){var K,aa,T,U;return $jscomp.asyncExecutePromiseGeneratorProgram(function(pa){switch(pa.nextAddress){case 1:K=
a.get(M);if(K===N){pa.jumpTo(2);break}return pa.yield($world.confirm(["The content you are editing was changed in the mean time.\nDo you want to save anyway and overwrite those changes?",{fontWeight:"normal"}]),3);case 3:if(aa=pa.yieldResult,!aa)return pa.return({saved:!1,message:"canceled"});case 2:return a.set(M,Ma.ui.contentText.textString),T=r,pa.yield(r.interactivelySaveModifiedSnapshot(r.commit,M),4);case 4:return T.commit=pa.yieldResult,U={commit:r.commit,snapshot:M,saved:!0},"function"===
typeof g&&g(U),pa.return(U)}})},customLoadContentAction:function(Ma,K){return{content:a.get(M),url:a.url}}}),l&&ea.whenRendered().then(function(){return ea.lineNumber=l.row}),Aa.return(ea)}})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"SnapshotEditor"}}],e,{pathInPackage:function(){return"partsbin.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",
version:"0.1.2"}}},{start:9471,end:14581})}(void 0);nf.SnapshotEditor=OV;nf.SnapshotEditor=OV;nf.SnapshotEditor=OV;nf.partURLRe=/^part:\/\/([^\/]+)\/(.*)$/;(function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/partsbin.js"),m=e.hasOwnProperty("PartResource")&&"function"===typeof e.PartResource?e.PartResource:e.PartResource=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return dc(m,b,[{key:"canDealWithJSON",
get:function(){return!1}},{key:"dirList",value:function(a,g){var l=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){return 1==r.nextAddress?r.yield(nf.resource(l.url.replace("part://","styleguide://")).dirList(a,g),2):r.return(r.yieldResult)})}},{key:"write",value:function(a){return $jscomp.asyncExecutePromiseGeneratorProgram(function(g){throw Error("Part urls are ready only! Please go to the world they are defined in and change the exported component directly.");})}},{key:"read",
value:function(){var a=this,g,l,r,v,y,A;return $jscomp.asyncExecutePromiseGeneratorProgram(function(E){switch(E.nextAddress){case 1:return E.yield(nf.resource(a.url.replace("part://","styleguide://")).read(),2);case 2:g=E.yieldResult;l=g.copy();l.isComponent=!1;l.name="a"+l.constructor.className;l.withAllSubmorphsDoExcluding(function(F){F!=l&&F.master||delete F._parametrizedProps},function(F){return F.master&&F!=l});r=l.master;l.master=g;if(!l._pool.mastersInSubHierarchy){E.jumpTo(3);break}v=$jscomp.makeIterator(l._pool.mastersInSubHierarchy);
y=v.next();case 4:if(y.done){E.jumpTo(3);break}A=y.value;if(r==A){E.jumpTo(5);break}return E.yield(A.applyIfNeeded(!0),7);case 7:A.derivedMorph.ownerChain().includes(l)||A.derivedMorph.requestMasterStyling();case 5:y=v.next();E.jumpTo(4);break;case 3:return l.master.applyIfNeeded(!0),delete l._pool,l.withAllSubmorphsDo(function(F){if("function"==typeof F.onLoad)F.onLoad()}),E.return(l)}})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"PartResource"}}],e,{pathInPackage:function(){return"partsbin.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:14631,end:16278})})(nf.Resource);var PV={name:"part",matches:function(b){return b.match(nf.partURLRe)},resourceClass:nf.PartResource};nf.resourceExtension=PV;nf.resourceExtension=PV;nf.resourceExtension=PV;nf.registerExtension(nf.resourceExtension);nf.buildCommitEditor=MS;nf.buildCommitEditor=
MS;var ug=lively.FreezerRuntime.recorderFor("lively.morphic/world-loading.js");ug.loadWorldFromURL=gL;ug.loadWorldFromCommit=hL;ug.loadWorldFromDB=iL;ug.loadWorld=jL;ug.loadLocalConfig=function(){var b,e;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){switch(m.nextAddress){case 1:return b=lively.modules.module("localconfig.js"),m.setCatchFinallyBlocks(2),m.yield(ug.resource(b.id).exists(),4);case 4:if(!m.yieldResult){m.jumpTo(5);break}return m.yield(b.reload({resetEnv:!1,reloadDeps:!1}),
5);case 5:m.leaveTryBlock(0);break;case 2:e=m.enterCatchBlock(),console.error("Error loading localconfig:",e),"undefined"!==typeof $world&&$world.showError("Error loading localconfig.js: "+e),m.jumpToEnd()}})};ug.setupLivelyShell=function(b){var e,m,a,g,l,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){switch(v.nextAddress){case 1:return v.yield(lively.modules.importPackage("lively.shell"),2);case 2:return v.yield(System.import("lively.shell/client-command.js"),3);case 3:return e=
v.yieldResult,m=e.default,v.yield(System.import("lively.shell/client-resource.js"),4);case 4:a=v.yieldResult,g=a.resourceExtension,l=b,r=l.l2lClient,m.installLively2LivelyServices(r),g.resourceClass.defaultL2lClient=r,ug.registerResourceExension(g),console.log("[lively] lively.shell setup"),v.jumpToEnd()}})};ug.setupLively2Lively=function(b){var e,m,a,g,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){switch(r.nextAddress){case 1:return e=b.getCurrentUser(),m={world:b.name},e&&(m.userToken=
e.token,m.userRealm=e.realm),r.yield(lively.modules.importPackage("lively.2lively"),2);case 2:return r.yield(System.import("lively.2lively/client.js"),3);case 3:return a=r.yieldResult,g=a.default,r.yield(g.forLivelyInBrowser(m),4);case 4:return l=r.yieldResult,console.log("[lively] lively2lively client created "+l),l._onUserChange?ug.reportWorldLoad(b,e):(l._onUserChange=function(v){l.isOnline()&&v.user&&(v=v.user,l.info=Object.assign({},l.info,{userToken:v.token,userRealm:v.realm}),l.unregister().then(function(){return l.register()}).then(function(){return console.log("re-registered after user change")}))},
ug.subscribe("lively.user/userchanged",l._onUserChange,System),l.once("registered",function(){ug.reportWorldLoad(b,e)}),l.on("registered",function(){var v=b.get("user flap");v&&v.updateNetworkIndicator(l)}),l.on("connected",function(){var v=b.get("user flap");v&&v.updateNetworkIndicator(l)}),l.on("reconnecting",function(){var v=b.get("user flap");v&&v.updateNetworkIndicator(l)}),l.on("disconnected",function(){var v=b.get("user flap");v&&v.updateNetworkIndicator(l)})),r.return(l)}})};ug.interactivelySaveWorld=
BD;ug.reportWorldLoad=function(b,e){e=e?e.name+" ("+(e.token||"").slice(0,5)+")":"---";fetch("/report-world-load",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:e+" logged in at "+b.name+" ["+window._livelyLoadId+"]"})}).catch(function(m){return console.warn("report-world-load failed: "+m)})};ug.resource=la;ug.registerResourceExension=w;ug.Color=Fg;ug.Path=Ah;ug.obj=Ag;ug.date=yu;ug.promise=zh;ug.MorphicEnv=qs;ug.loadWorldFromResource=IJ;ug.createMorphSnapshot=
aA;ug.MorphicDB=Yw;ug.loadObjectFromPartsbinFolder=wG;ug.ensureCommitInfo=sG;ug.pathForBrowserHistory=ca;ug.subscribe=Fx;ug.emit=ft;ug.loadWorldFromURL=gL;ug.loadWorldFromURL=gL;ug.loadWorldFromCommit=hL;ug.loadWorldFromCommit=hL;ug.loadWorldFromDB=iL;ug.loadWorldFromDB=iL;ug.loadWorld=jL;ug.loadWorld=jL;ug.interactivelySaveWorld=BD;ug.interactivelySaveWorld=BD;var Hk=lively.FreezerRuntime.recorderFor("lively.user/client/user.js");Hk.jwtTokenDecode=function(b){b=$jscomp.makeIterator(b.split("."));
b.next();var e=b.next().value;b.next();return JSON.parse(atob(e))};Hk.guid=function(){var b=function(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)};return b()+b()+"-"+b()+"-"+b()+"-"+b()+"-"+b()+b()+b()};Hk.makeRequest=function(b,e,m,a){a=void 0===a?{}:a;e={method:void 0===e?"GET":e,mode:"cors"};m&&(e.body=m);e.redirect="follow";e.headers=Object.assign({},a);return fetch(b,e)};Hk.POST=function(b,e){var m,a,g;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){switch(l.nextAddress){case 1:return"string"!==
typeof e&&(e=JSON.stringify(e)),l.yield(Hk.makeRequest(b,"POST",e,{}),2);case 2:return m=l.yieldResult,l.setCatchFinallyBlocks(3),l.yield(m.text(),5);case 5:a=l.yieldResult;l.leaveTryBlock(4);break;case 3:l.enterCatchBlock();case 4:if(a&&"application/json"===m.headers.get("content-type"))try{g=JSON.parse(a)}catch(r){}if(!g)throw Error("Unexpected response: "+a);return l.return(g)}})};var BB=Da("bO",function(b){var e=lively.FreezerRuntime.recorderFor("lively.user/client/user.js"),m=e.hasOwnProperty("User")&&
"function"===typeof e.User?e.User:e.User=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return dc(m,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a,g){this.realm=g;this.name=a;this.roles={};this.createdAt=0;this.token=this.email=null}},{key:"isLoggedIn",value:function(){return!!this.token}},{key:"loginOrRegister",value:function(a,g,l){var r=this,v,y,A,E,F,H,I,M,N,W;return $jscomp.asyncExecutePromiseGeneratorProgram(function(X){if(1==
X.nextAddress)return v=r,y=v.email,A=v.createdAt,E=v.roles,F=v.name,H="register"===a?{password:g,email:y,createdAt:A,roles:E,name:F}:{password:g,name:F},X.yield(Hk.POST(l+"/"+a,H),2);I=X.yieldResult;if(I.error)return X.return(I);M=I;N=M.token;W=Hk.jwtTokenDecode(N);E=W.roles;A=W.createdAt;y=W.email;Object.assign(r,{roles:E,createdAt:A,email:y,token:N});return X.return({status:I.status})})}},{key:"verify",value:function(){var a=this,g,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){if(1==
r.nextAddress)return r.yield(Hk.POST(a.realm+"/verify",{token:a.token}),2);g=r.yieldResult;l=g.error;return r.return(l?!1:!0)})}},{key:"login",value:function(a){return this.loginOrRegister("login",a,this.realm)}},{key:"register",value:function(a){return this.loginOrRegister("register",a,this.realm)}},{key:"checkPassword",value:function(a){var g=this,l,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){if(1==y.nextAddress){if(!g.isLoggedIn)throw Error("To check password, user needs to login.");
return y.yield(Hk.POST(g.realm+"/check-password",{token:g.token,password:a}),2)}l=y.yieldResult;r=l.error;v=l.status;if(r)throw Error(r);return y.return(v)})}},{key:"modify",value:function(a){var g=this,l,r,v,y,A,E,F,H;return $jscomp.asyncExecutePromiseGeneratorProgram(function(I){if(1==I.nextAddress)return I.yield(Hk.POST(g.realm+"/modify",{token:g.token,changes:a}),2);l=I.yieldResult;r=l.error;v=l.status;y=l.token;if(r)return I.return({error:r});y&&(A=Hk.jwtTokenDecode(y),E=A.roles,F=A.createdAt,
H=A.email,Object.assign(g,{roles:E,createdAt:F,email:H,token:y}));return I.return({status:v})})}},{key:"toString",value:function(){return"<"+this.constructor.name+" "+this.name+" "+(this.isLoggedIn()?"":"not ")+"logged in>"}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"User"}},{key:"guest",get:function(){return Hk.guestUser}},{key:"named",value:function(a,g){var l=a+"-"+g,r=Hk.userMap.get(l);r||(r=new this(a,g),Hk.userMap.set(l,r));return r}},{key:"fromToken",value:function(a,g){var l=
Hk.jwtTokenDecode(a),r=l.roles,v=l.createdAt,y=l.email;return Object.assign(this.named(l.name,g),{roles:r,createdAt:v,email:y,token:a})}},{key:"clearCache",value:function(){Hk.userMap=new Map}}],e,{pathInPackage:function(){return"client/user.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.user",version:"0.2.0"}}},{start:1032,end:3466})}(void 0));Hk.User=BB;Hk.User=
BB;Hk.User=BB;var CB=function(b){var e=lively.FreezerRuntime.recorderFor("lively.user/client/user.js"),m=e.hasOwnProperty("GuestUser")&&"function"===typeof e.GuestUser?e.GuestUser:e.GuestUser=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return dc(m,b,[{key:"isGuestUser",get:function(){return!0}},{key:"isLoggedIn",value:function(){return!1}},{key:"loginOrRegister",value:function(a,g,l){return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){throw Error("Guest user cannot "+
a+"!");})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"GuestUser"}}],e,{pathInPackage:function(){return"client/user.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.user",version:"0.2.0"}}},{start:3476,end:3702})}(Hk.User);Hk.GuestUser=CB;Hk.GuestUser=CB;Hk.GuestUser=CB;Hk.userMap=Hk.userMap||new Map;Hk.guestUser=Hk.guestUser||Hk.GuestUser.named("guest-"+
Hk.guid(),null);var Xy=lively.FreezerRuntime.recorderFor("lively.user/client/user-registry.js");Xy.User=BB;Xy.GuestUser=CB;var QV=function(b){var e=lively.FreezerRuntime.recorderFor("lively.user/client/user-registry.js"),m=e.hasOwnProperty("UserRegistry")&&"function"===typeof e.UserRegistry?e.UserRegistry:e.UserRegistry=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return dc(m,b,[{key:"isTrackingGuestUsers",get:function(){return!1}},
{key:"hasUserStored",value:function(){try{return!!localStorage["lively.user"]||!!sessionStorage["lively.user"]}catch(a){return!1}}},{key:"login",value:function(a,g){var l=this,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){if(1==y.nextAddress)return a.isGuestUser?y.jumpTo(2):y.yield(a.login(g),3);if(2!=y.nextAddress&&(r=y.yieldResult,v=r.error))throw Error(v);l.saveUserToLocalStorage(a);return y.return(a)})}},{key:"logout",value:function(a){var g=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){try{g.isTrackingGuestUsers||
(delete localStorage["lively.user"],delete sessionStorage["lively.user"])}catch(r){}a=a&&a.isGuestUser?a:Xy.User.guest;lively.notifications&&lively.notifications.emit("lively.user/userchanged",{user:a},Date.now(),System);return l.return(a)})}},{key:"register",value:function(a,g){var l=this,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){if(1==y.nextAddress){if(!a||a.isGuestUser)throw Error("guest users cannot register");return y.yield(a.register(g),2)}r=y.yieldResult;if(v=r.error)throw Error(v);
l.saveUserToLocalStorage(a);return y.return(a)})}},{key:"loadUserFromLocalStorage",value:function(a){try{var g=localStorage["lively.user"]||sessionStorage["lively.user"];if(g)return g=JSON.parse(g),g.isGuest?Xy.GuestUser.named(g.name,null):Xy.User.fromToken(g.token,a)}catch(l){console.warn("Could not read user from localStorage: "+l)}return this.isTrackingGuestUsers?!1:Xy.GuestUser.guest}},{key:"saveUserToLocalStorage",value:function(a){if(!a||!a.isGuestUser&&!a.token)return!1;lively.notifications&&
lively.notifications.emit("lively.user/userchanged",{user:a},Date.now(),System);try{return a.isGuestUser&&!this.isTrackingGuestUsers?(sessionStorage["lively.user"]=JSON.stringify({isGuest:!0,name:a.name}),delete localStorage["lively.user"]):localStorage["lively.user"]=a.isGuestUser&&this.isTrackingGuestUsers?JSON.stringify({isGuest:!0,name:a.name}):JSON.stringify({token:a.token}),!0}catch(g){return console.warn("Could not save user into local/sessionStorage: "+g),!1}}}],[{key:Symbol.for("__LivelyClassName__"),
get:function(){return"UserRegistry"}},{key:"current",get:function(){return this._current||(this._current=new this)}}],e,{pathInPackage:function(){return"client/user-registry.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.user",version:"0.2.0"}}},{start:81,end:2583})}(void 0);QV=Xy.UserRegistry;var GN=Da("bN",QV);Xy.default=QV;var mE=lively.FreezerRuntime.recorderFor("lively.user/index.js");
mE.User=BB;mE.ClientUser=BB;mE.GuestUser=CB;mE.GuestUser=CB;mE.default=GN;mE.UserRegistry=GN;var Sqa=Object.freeze({__proto__:null,ClientUser:BB,GuestUser:CB,UserRegistry:GN}),Bg=lively.FreezerRuntime.recorderFor("lively.morphic/world.js");Bg.bowser=xs;Bg.Rectangle=He;Bg.Color=Fg;Bg.pt=xi;Bg.arr=$f;Bg.promise=zh;Bg.Path=Ah;Bg.obj=Ag;Bg.signal=Wl;Bg.config=Dn;Bg.MorphicEnv=qs;Bg.Morph=Ll;Bg.TooltipViewer=lE;Bg.Tooltip=AB;Bg.loadWorldFromURL=gL;Bg.loadWorldFromDB=iL;Bg.loadWorldFromCommit=hL;Bg.loadWorld=
jL;Bg.touchInputDevice=sr;Bg.UserRegistry=GN;Bg.loadMorphFromSnapshot=Uu;Bg.emit=ft;Bg.resource=la;var sy=Da("aD",function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/world.js"),m=e.hasOwnProperty("World")&&"function"===typeof e.World?e.World:e.World=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return dc(m,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){dc._get(Object.getPrototypeOf(m.prototype),
Symbol.for("lively-instance-initialize"),this).call(this,a);this._renderer=null;this._tooltipViewer=new Bg.TooltipViewer(this)}},{key:"__deserialize__",value:function(a,g,l,r){dc._get(Object.getPrototypeOf(m.prototype),"__deserialize__",this).call(this,a,g,l,r);this._renderer=null;this._tooltipViewer=new Bg.TooltipViewer(this)}},{key:"__additionally_serialize__",value:function(a,g,l,r){dc._get(Object.getPrototypeOf(m.prototype),"__additionally_serialize__",this).call(this,a,g,l,r);if(a.props.submorphs)for(a=
a.props.submorphs.value,g=a.length;g--;)l.refForId(a[g].id).realObj.isHand&&Bg.arr.removeAt(a,g)}},{key:"commands",get:function(){return[].concat($jscomp.arrayFromIterable(dc._get(Object.getPrototypeOf(m.prototype),"commands",this)),[{name:"resize to fit window",exec:function(a){var g,l,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){switch(y.nextAddress){case 1:g=function(){a.extent=lively.FreezerRuntime?a.windowBounds().extent():a.windowBounds().union(a.submorphBounds(function(A){return!A.isEpiMorph&&
!A.hasFixedPosition})).extent()},l=function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(A){if(1==A.nextAddress)return A.yield(a.whenRendered(),2);delete a._cachedWindowBounds;return A.return(!a.windowBounds().extent().equals(a.extent))})},r=0;case 2:if(!(v=5>r)){y.jumpTo(4);break}return y.yield(l(),5);case 5:v=y.yieldResult;case 4:if(!v){y.jumpTo(3);break}r++;g();y.jumpTo(2);break;case 3:return a.relayout(),y.return(!0)}})}}])}},{key:"isWorld",get:function(){return!0}},{key:"render",
value:function(a){return a.renderWorld(this)}},{key:"grabbable",get:function(){return!1}},{key:"grabbable",set:function(a){}},{key:"existingHandForPointerId",value:function(a){return this.submorphs.find(function(g){return g instanceof Bg.Hand&&g.pointerId===a})}},{key:"layoutHaloForPointerId",value:function(a){}},{key:"haloForPointerId",value:function(a){}},{key:"handForPointerId",value:function(a,g){g=void 0===g?!1:g;var l=this.existingHandForPointerId(a);return l?l:!l&&this.firstHand&&g?(this.firstHand.pointerId=
a,this.firstHand):this.addMorph(new Bg.Hand(a),this.submorphs[0])}},{key:"removeHandForPointerId",value:function(a){(a=this.existingHandForPointerId(a))&&1<this.hands.length&&a.remove()}},{key:"world",value:function(){return this}},{key:"makeDirty",value:function(){if(!this._dirty){this._dirty=!0;var a=this.env.renderer;a&&a.renderLater()}}},{key:"hands",get:function(){return Bg.arr.sortBy(this.submorphs.filter(function(a){return a.isHand}),function(a){return a.pointerId})}},{key:"firstHand",get:function(){return this.hands[0]}},
{key:"getCurrentUser",value:function(){return Bg.UserRegistry.current.loadUserFromLocalStorage(Bg.config.users.authServerURL)}},{key:"focusedMorph",get:function(){var a=this.env.eventDispatcher;return(a=a&&a.eventState.focusedMorph)&&a.world()===this?a:this}},{key:"onMouseMove",value:function(a){a.hand&&a.hand.update(a);this._tooltipViewer.mouseMove(a)}},{key:"onMouseDown",value:function(a){a.state.menu&&a.state.menu.remove();this.onWindowScroll();this._tooltipViewer.mouseDown(a)}},{key:"onMouseUp",
value:function(a){a.isCommandKey()&&a.stop();if(a.isAltDown()&&Bg.config.altClickDefinesThat){var g=this.morphsContainingPoint(a.position)[0];setTimeout(function(){return System.global.that=g},100);g.show();a.stop();console.log('Set global "that" to '+g)}}},{key:"onMouseWheel",value:function(a){a.isShiftDown()&&(window.scrollBy(-a.domEvt.wheelDeltaX,-a.domEvt.wheelDeltaY),a.stop())}},{key:"onBeforeUnload",value:function(a){return this.onUnload(a)}},{key:"onUnload",value:function(a){this.submorphs.forEach(function(g){if("function"===
typeof g.onWorldUnload)g.onWorldUnload(a)})}},{key:"updateVisibleWindowMorphs",value:function(){this.withAllSubmorphsDo(function(a){if(a.respondsToVisibleWindow){if("function"!==typeof a.relayout)return a.showError(Error(a+" listed as responding to visible window change, but has no relayout instruction"));a.relayout()}})}},{key:"onWindowScroll",value:function(){var a=this.env.eventDispatcher.keyInputHelper.inputState,g=a.positionChangedTime,l=a.scrollLeftWhenChanged;a=a.scrollTopWhenChanged;var r=
document.documentElement;500>Date.now()-g&&!Bg.bowser.firefox?(r.scrollLeft=l,r.scrollTop=a):(this.setProperty("scroll",Bg.pt(r.scrollLeft,r.scrollTop)),this._cachedWindowBounds=null,this.updateVisibleWindowMorphs())}},{key:"onWindowResize",value:function(a){var g=this,l,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){if(1==y.nextAddress)return y.yield(g.whenRendered(),2);if(3!=y.nextAddress)return g._cachedWindowBounds=null,"elastic"!==g.resizePolicy?y.jumpTo(3):y.yield(g.execCommand("resize to fit window"),
3);g.updateVisibleWindowMorphs();l=$jscomp.makeIterator(g.submorphs);for(r=l.next();!r.done;r=l.next())if(v=r.value,"function"===typeof v.onWorldResize)v.onWorldResize(a);y.jumpToEnd()})}},{key:"relayCommandExecutionToFocusedMorph",value:function(a){if(!a)return null;var g=this.focusedMorph,l=Bg.arr.findAndGet(Bg.arr.without([g].concat($jscomp.arrayFromIterable(g.ownerChain())),this),function(r){return Bg.arr.findAndGet(r.keyhandlers,function(v){return(v=v.eventCommandLookup(r,a))?{command:v,morph:r}:
null})})||{};g=l.command;l=l.morph;return g?l.execCommand(g):null}},{key:"visibleBounds",value:function(){return this.env.renderer?this.windowBounds().intersection(this.innerBounds()):this.innerBounds()}},{key:"windowBounds",value:function(a){if(this._cachedWindowBounds)return this._cachedWindowBounds;a=this.env.domEnv.window;var g=1/this.scale;return this._cachedWindowBounds=new Bg.Rectangle(a.scrollX*g,a.scrollY*g,(a.innerWidth||this.width)*g,(a.innerHeight||this.height)*g)}},{key:"logError",value:function(a){console.log(a)}},
{key:"relayout",value:function(){}},{key:"defaultMenuItems",value:function(a){return[]}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"World"}},{key:"properties",get:function(){return{resizePolicy:{doc:"how the world behaves on window size changes 'elastic': resizes to window extent, 'static': leaves its extent unchanged",defaultValue:"elastic",after:["clipMode"],type:"Enum",values:["static","elastic"],set:function(a){this.setProperty("resizePolicy",a);this.clipMode="static"===a?
"visible":"hidden";"elastic"==a&&this.execCommand("resize to fit window")}},colorScheme:{derived:!0,get:function(){return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}},showsUserFlap:{defaultValue:!0,set:function(a){var g=this,l=Bg.resource(document.location.href).query().showsUserFlap;"undefined"!=typeof l&&(a=l);this.setProperty("showsUserFlap",a);System.import("lively.user/morphic/user-ui.js").then(function(r){return r.UserUI[a?"showUserFlap":"hideUserFlap"](g)})}}}}},
{key:"defaultWorld",value:function(){return Bg.MorphicEnv.default().world}},{key:"loadWorldFromURL",value:function(a,g,l){g=void 0===g?this.defaultWorld():g;l=void 0===l?{}:l;return Bg.loadWorldFromURL(a,g,l)}},{key:"loadWorld",value:function(a,g,l){g=void 0===g?this.defaultWorld():g;l=void 0===l?{}:l;return Bg.loadWorld(a,g,l)}},{key:"loadFromCommit",value:function(a,g,l){g=void 0===g?this.defaultWorld():g;l=void 0===l?{}:l;return Bg.loadWorldFromCommit(a,g,l)}},{key:"loadFromDB",value:function(a,
g,l,r){l=void 0===l?this.defaultWorld():l;r=void 0===r?{}:r;return Bg.loadWorldFromDB(a,g,l,r)}},{key:"loadFromResource",value:function(a,g,l){g=void 0===g?this.defaultWorld():g;l=void 0===l?{}:l;var r,v,y,A;return $jscomp.asyncExecutePromiseGeneratorProgram(function(E){switch(E.nextAddress){case 1:return r=Bg,v=r.loadWorld,y=Bg,A=y.loadMorphFromSnapshot,E.yield(a.readJson(),4);case 4:return E.yield(A.call(y,E.yieldResult),3);case 3:return E.yield(v.call(r,E.yieldResult,g,l),2);case 2:return E.return(E.yieldResult)}})}}],
e,{pathInPackage:function(){return"world.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:767,end:11072})}(Bg.Morph));Bg.World=sy;Bg.World=sy;Bg.World=sy;var nE=function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/world.js"),m=e.hasOwnProperty("Hand")&&"function"===typeof e.Hand?e.Hand:e.Hand=function(a){a&&a[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return dc(m,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){dc._get(Object.getPrototypeOf(m.prototype),Symbol.for("lively-instance-initialize"),this).call(this,{pointerId:a})}},{key:"__deserialize__",value:function(a,g,l,r){dc._get(Object.getPrototypeOf(m.prototype),"__deserialize__",this).call(this,a,g,l,r);this.reset()}},{key:"reset",value:function(){this._grabbedMorphProperties=new WeakMap}},{key:"isHand",
get:function(){return!0}},{key:"pointerId",get:function(){return this.getProperty("pointerId")}},{key:"pointerId",set:function(a){this.setProperty("pointerId",a)}},{key:"draggable",get:function(){return!1}},{key:"draggable",set:function(a){}},{key:"grabbable",get:function(){return!1}},{key:"grabbable",set:function(a){}},{key:"grabbedMorphs",get:function(){return this.submorphs}},{key:"carriesMorphs",value:function(){return!!this.grabbedMorphs.length}},{key:"morphsContainingPoint",value:function(a,
g){return g}},{key:"update",value:function(a){this.position=a.position.subXY(window.scrollX,window.scrollY)}},{key:"cancelGrab",value:function(a,g){a=void 0===a?!0:a;var l=this,r,v,y,A,E,F,H,I,M;return $jscomp.asyncExecutePromiseGeneratorProgram(function(N){if(!l.grabbedMorphs.length)return N.return();l.env.eventDispatcher.cancelGrab(l,g);r=[];v=$jscomp.makeIterator(l.grabbedMorphs);for(y=v.next();!y.done;y=v.next())A=y.value,E=l._grabbedMorphProperties.get(A)||{},F=E.prevOwner,H=E.prevIndex,I=E.prevPosition,
M=E.pointerAndShadow,Object.assign(A,M),F?(F.addMorphAt(A,H),a?r.push(A.animate({position:I})):A.position=I):A.remove();return N.return(r.length?Promise.all(r):null)})}},{key:"grab",value:function(a){var g=this;if(Bg.obj.isArray(a))return a.forEach(function(l){return g.grab(l)});this.withMetaDo({metaInteraction:!0},function(){g._grabbedMorphProperties.set(a,{prevOwner:a.owner,prevPosition:a.position,prevIndex:a.owner?a.owner.submorphs.indexOf(a):-1,pointerAndShadow:Bg.obj.select(a,["dropShadow","reactsToPointer"])});
a.reactsToPointer=!1;a.dropShadow=!0;g.addMorph(a)});Bg.signal(this,"grab",a)}},{key:"dropMorphsOn",value:function(a){var g=this;this.withMetaDo({metaInteraction:!0},function(){g.grabbedMorphs.forEach(function(l){try{var r=(g._grabbedMorphProperties.get(l)||{}).pointerAndShadow;Object.assign(l,r);Bg.signal(g,"drop",l);l.onBeingDroppedOn(g,a)}catch(v){console.error(v),g.world().showError("Error dropping "+l+" onto "+a+":\n"+v.stack),l.owner!==a&&g.world().addMorph(a)}})})}},{key:"findDropTarget",value:function(a,
g,l){var r=this;a=void 0===a?this.globalPosition:a;g=void 0===g?this.grabbedMorphs:g;a=this.world().morphsContainingPoint(a);return Bg.arr.sortBy(a,function(v){return[v].concat($jscomp.arrayFromIterable(v.ownerChain())).find(function(y){return Bg.Path("owner.isWorld").get(y)&&y.hasFixedPosition})?0:1}).find("function"===typeof l?function(v,y){return!r.isAncestorOf(v)&&v.acceptsDrops&&!g.includes(v)&&g.every(function(A){return A.wantsToBeDroppedOn(v)})&&l(v,y)}:function(v){return!r.isAncestorOf(v)&&
v.acceptsDrops&&g.every(function(y){return y.wantsToBeDroppedOn(v)})})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Hand"}},{key:"properties",get:function(){return{hasFixedPosition:{defaultValue:!0},fill:{defaultValue:Bg.touchInputDevice?Bg.Color.transparent:Bg.Color.orange},extent:{defaultValue:Bg.pt(1,1)},reactsToPointer:{defaultValue:!1},_grabbedMorphProperties:{serialize:!1,initialize:function(){this._grabbedMorphProperties=new WeakMap}}}}}],e,{pathInPackage:function(){return"world.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:11081,end:15044})}(Bg.Morph);Bg.Hand=nE;Bg.Hand=nE;Bg.Hand=nE;var Tqa=Object.freeze({__proto__:null,World:sy,Hand:nE}),$l=lively.FreezerRuntime.recorderFor("lively.morphic/text/position.js");$l.comparePosition=NS;$l.lessPosition=mv;$l.lessEqPosition=CD;$l.eqPosition=nv;$l.minPosition=
DD;$l.maxPosition=ED;$l.comparePosition=NS;$l.comparePosition=NS;$l.lessPosition=mv;$l.lessPosition=mv;$l.lessEqPosition=CD;$l.lessEqPosition=CD;$l.eqPosition=nv;$l.eqPosition=nv;$l.minPosition=DD;$l.minPosition=DD;$l.maxPosition=ED;$l.maxPosition=ED;var fh=lively.FreezerRuntime.recorderFor("lively.morphic/text/range.js");fh.lessPosition=mv;fh.lessEqPosition=CD;fh.eqPosition=nv;fh.minPosition=DD;fh.maxPosition=ED;var Yy=Da("bo",function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/text/range.js"),
m=e.hasOwnProperty("Range")&&"function"===typeof e.Range?e.Range:e.Range=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return dc(m,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){var g=a=void 0===a?{start:{row:0,column:0},end:{row:0,column:0}}:a,l=g.start;a=l.row;l=l.column;var r=g.end;g=r.row;r=r.column;if(g<a||g===a&&r<l)l=$jscomp.makeIterator([a,l,g,r]),g=l.next().value,r=l.next().value,a=l.next().value,
l=l.next().value;this.start={row:a,column:l};this.end={row:g,column:r}}},{key:"isRange",get:function(){return!0}},{key:"isEmpty",value:function(){return this.start.row===this.end.row&&this.start.column===this.end.column}},{key:"equals",value:function(a){return a&&a.start&&a.end?fh.eqPosition(this.start,a.start)&&fh.eqPosition(this.end,a.end):!1}},{key:"copy",value:function(){return new fh.Range(this)}},{key:"toLiteral",value:function(){return{start:this.start,end:this.end}}},{key:"merge",value:function(a){a.isRange||
(a=new fh.Range(a));return fh.lessPosition(this.end,a.start)||fh.lessPosition(a.end,this.start)?this:fh.Range.fromPositions(fh.minPosition(this.start,a.start),fh.maxPosition(this.end,a.end))}},{key:"without",value:function(a){a.isRange||(a=new fh.Range(a));var g=fh.Range.compare(this,a);return 0===g?fh.Range.fromPositions(this.start,this.start):5<=Math.abs(g)?this:0>g?fh.Range.fromPositions(this.start,a.start):fh.Range.fromPositions(a.end,this.end)}},{key:"intersect",value:function(a){a.isRange||
(a=new fh.Range(a));var g=fh.Range.compare(this,a),l=0>g?this:a;a=0>g?a:this;switch(Math.abs(g)){case 0:case 1:return new fh.Range(l);case 2:case 3:return new fh.Range(a);case 4:return fh.Range.fromPositions(a.start,l.end);case 5:return fh.Range.at(a.start);case 6:return fh.Range.at(l.end)}}},{key:"subtract",value:function(a){a.isRange||(a=new fh.Range(a));switch(fh.Range.compare(this,a)){case -6:case -5:case 5:case 6:return[new fh.Range(this)];case -1:case 0:case 2:case 3:return[fh.Range.at(this.start)];
case 1:case 4:return[fh.Range.fromPositions(a.end,this.end)];case -4:case -3:return[fh.Range.fromPositions(this.start,a.start)];case -2:return[fh.Range.fromPositions(this.start,a.start),fh.Range.fromPositions(a.end,this.end)]}}},{key:"containsPosition",value:function(a){return fh.lessEqPosition(this.start,a)&&fh.lessEqPosition(a,this.end)}},{key:"toString",value:function(){var a=this.start,g=this.end;return"Range("+a.row+"/"+a.column+" -> "+g.row+"/"+g.column+")"}}],[{key:Symbol.for("__LivelyClassName__"),
get:function(){return"Range"}},{key:"sort",value:function(a){return a.sort(fh.Range.compare)}},{key:"compare",value:function(a,g){var l=a.start,r=a.end,v=g.start,y=g.end;return fh.lessPosition(l,v)?fh.lessPosition(r,v)?-6:fh.eqPosition(r,v)?-5:fh.lessPosition(r,y)?-4:fh.eqPosition(r,y)?-3:-2:fh.eqPosition(l,v)?fh.eqPosition(r,y)?0:fh.lessPosition(r,y)?-1:1:-1*fh.Range.compare(g,a)}},{key:"at",value:function(a){return new this({start:a,end:a})}},{key:"fromPositions",value:function(a,g){return new this({start:a,
end:g})}},{key:"create",value:function(a,g,l,r){return new this({start:{row:a,column:g},end:{row:l,column:r}})}},{key:"isValidLiteral",value:function(a){return a?a.isRange?!0:a.start&&a.end&&"number"===typeof a.start.row&&"number"===typeof a.start.column&&"number"===typeof a.end.row&&"number"===typeof a.end.column:!1}}],e,{pathInPackage:function(){return"text/range.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:108,end:5392})}(void 0));fh.Range=Yy;fh.Range=Yy;fh.Range=Yy;var HN=new fh.Range;fh.defaultRange=HN;fh.defaultRange=HN;fh.defaultRange=HN;var uk=lively.FreezerRuntime.recorderFor("lively.morphic/text/selection.js");uk.lessPosition=mv;uk.Range=Yy;uk.defaultRange=HN;uk.config=Dn;uk.string=pi;uk.arr=$f;uk.signal=Wl;var IN=function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/text/selection.js"),m=e.hasOwnProperty("Selection")&&
"function"===typeof e.Selection?e.Selection:e.Selection=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return dc(m,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a,g){this.textMorph=a;this.initialize(g)}},{key:"isSelection",get:function(){return!0}},{key:"initialize",value:function(a){this._goalX=this._goalColumn=void 0;this._isReverse=!1;var g=uk.string.newUUID();this.startAnchor=this.textMorph.addAnchor("selection-start-"+
g);this.endAnchor=this.textMorph.addAnchor("selection-end-"+g);this.range=uk.Range.isValidLiteral(a)?a:uk.defaultRange;this._cursorVisible=!0;this.cursorBlinkProcess=null}},{key:"isSelection",get:function(){return!0}},{key:"uninstall",value:function(){this.cursorBlinkStop();this.textMorph.removeAnchor(this.startAnchor);this.textMorph.removeAnchor(this.endAnchor)}},{key:"compareRangesForMerge",value:function(a,g){var l=a.start,r=l.row;l=l.column;var v=a.end,y=v.row;v=v.column;var A=g.start,E=A.row;
A=A.column;var F=g.end,H=F.row;F=F.column;return r<E||r===E&&l<A?y<E||y===E&&v<A?"separate":y===E&&v===A?E===H&&A===F?"overlapping":"bordering":"overlapping":r===E&&l===A?y===H&&v===F?"equal":"overlapping":this.compareRangesForMerge(g,a)}},{key:"mergeWith",value:function(a){if(!a||!a.isSelection)return!1;var g=this.compareRangesForMerge(this.range,a.range);if("separate"===g||"bordering"===g)return!1;this.range=this.range.merge(a.range);a.isReverse()!=this.isReverse()&&this.reverse();return!0}},{key:"range",
get:function(){return this._range}},{key:"range",set:function(a){if(a){var g=a,l=g.start;g=g.end;if(void 0!==l&&void 0!==g){var r=this.textMorph.document;"number"===typeof l&&(a.start=l=r.indexToPosition(l));"number"===typeof g&&(a.end=g=r.indexToPosition(g));if(uk.Range.isValidLiteral(a)){l=r.clipPositionToLines(l);g=r.clipPositionToLines(g);if(this._isReverse=uk.lessPosition(g,l))g=$jscomp.makeIterator([g,l]),l=g.next().value,g=g.next().value;a.start=l;a.end=g;a.isRange||(a=new uk.Range(a));a.equals(this._range)||
(this._range=a,this._goalColumn=this.textMorph.lineWrapping?this.textMorph.columnInWrappedLine(this.lead):this.lead.column,this._goalX=this.textMorph.charBoundsFromTextPosition(this.lead).x,this.startAnchor.position=a.start,this.endAnchor.position=a.end,this.textMorph.makeDirty(),uk.signal(this.textMorph,"selectionChange",this))}}}}},{key:"directedRange",get:function(){return{end:this.lead,start:this.anchor}}},{key:"updateFromAnchors",value:function(){this.range={start:this.startAnchor.position,end:this.endAnchor.position}}},
{key:"start",get:function(){return this.range.start}},{key:"start",set:function(a){this.range=uk.Range.fromPositions(a,this.end)}},{key:"end",get:function(){return this.range.end}},{key:"end",set:function(a){this.range=uk.Range.fromPositions(this.start,a)}},{key:"selectionColor",get:function(){return this.textMorph.selectionColor||"#bed8f7"}},{key:"anchor",get:function(){return this.isReverse()?this.range.end:this.range.start}},{key:"anchor",set:function(a){this.range={start:a,end:this.lead}}},{key:"lead",
get:function(){return this.isReverse()?this.range.start:this.range.end}},{key:"lead",set:function(a){this.range={start:this.anchor,end:a}}},{key:"text",get:function(){return this.textMorph.document.textInRange(this.range)}},{key:"text",set:function(a){this.replace(a)}},{key:"replace",value:function(a,g,l,r){var v=this.range,y=this.textMorph,A=this.isReverse();this.range=y.replace(v,a,g,l,r);A&&this.reverse();return this.range}},{key:"selectedRows",get:function(){return{first:this.start.row,last:this.end.row}}},
{key:"reverse",value:function(){this._isReverse=!this.isEmpty()&&!this._isReverse;return this}},{key:"isReverse",value:function(){return this._isReverse&&!this.isEmpty()}},{key:"isEmpty",value:function(){return this.range.isEmpty()}},{key:"collapse",value:function(a){a=void 0===a?this.start:a;this.range={start:a,end:a};return this}},{key:"collapseToEnd",value:function(){this.collapse(this.end);return this}},{key:"growLeft",value:function(a){var g=this.textMorph.document,l=g.positionToIndex(this.end);
a=Math.min(l,g.positionToIndex(this.start)-a);l=this.isReverse();this.start=g.indexToPosition(a);this._isReverse=l;return this}},{key:"growRight",value:function(a){var g=this.textMorph.document,l=g.positionToIndex(this.start);a=Math.max(l,g.positionToIndex(this.end)+a);l=this.isReverse();this.end=g.indexToPosition(a);this._isReverse=l;return this}},{key:"selectAll",value:function(){this.range={start:{row:0,column:0},end:this.textMorph.document.endPosition};return this}},{key:"selectLine",value:function(a,
g){a=void 0===a?this.lead.row:a;this.includingLineEnd=void 0===g?!1:g;this.range={start:{row:a,column:0},end:{row:a,column:this.textMorph.getLine(a).length}};return this}},{key:"gotoLineEnd",value:function(a){a=void 0===a?this.lead.row:a;a={row:a,column:this.textMorph.getLine(a).length};this.range={start:a,end:a}}},{key:"selectLeft",value:function(a){a=void 0===a?1:a;this.isEmpty()?(this.growLeft(a),this.reverse()):this.isReverse()?this.growLeft(a):this.growRight(-a);return this}},{key:"selectRight",
value:function(a){a=void 0===a?1:a;this.isReverse()?this.growLeft(-a):this.growRight(a);return this}},{key:"selectUp",value:function(a,g){return this.goUp(void 0===a?1:a,g,!0)}},{key:"selectDown",value:function(a,g){return this.selectUp(-(void 0===a?1:a),g)}},{key:"goUp",value:function(a,g,l){a=void 0===a?1:a;l=void 0===l?!1:l;if(0===a)return this;var r=this._goalColumn,v=this._goalX;this.lead=this.textMorph.getPositionAboveOrBelow(a,this.lead,void 0===g?!1:g,r,v);l||(this.anchor=this.lead);this._goalColumn=
r;this._goalX=v;return this}},{key:"goDown",value:function(a,g){return this.goUp(-(void 0===a?1:a),g)}},{key:"goLeft",value:function(a){a=void 0===a?1:a;this.isEmpty()&&this.growLeft(a);this.collapse();return this}},{key:"goRight",value:function(a){a=void 0===a?1:a;this.isEmpty()&&this.growRight(a);this.collapseToEnd();return this}},{key:"cursorVisible",get:function(){return this._cursorVisible&&this.textMorph.isFocused()&&!this.textMorph.rejectsInput()}},{key:"cursorBlinkStart",value:function(){var a=
this;this.cursorBlinkStop();var g=uk.config.text.cursorBlinkPeriod;if(g){var l=this.textMorph,r=l.env.renderer.getNodeForMorph(l);this.cursorBlinkProcess=setInterval(function(){r||(r=l.env.renderer.getNodeForMorph(l));if(r){a._cursorVisible=!a._cursorVisible;var v=r.className.split(" "),y=v.indexOf("hidden-cursor");a._cursorVisible&&-1<y&&(v.splice(y,1),r.className=v.join(" "));a._cursorVisible||-1!==y||(r.className=[].concat($jscomp.arrayFromIterable(v),["hidden-cursor"]).join(" "))}},1E3*g)}}},
{key:"cursorBlinkStop",value:function(){this.cursorBlinkProcess&&clearInterval(this.cursorBlinkProcess);this.cursorBlinkProcess=null;this._cursorVisible=!0;var a=this.textMorph;if(a=a.env.renderer.getNodeForMorph(a)){var g=a.className.split(" "),l=g.indexOf("hidden-cursor");-1<l&&(g.splice(l,1),a.className=g.join(" "))}}},{key:"toString",value:function(){var a=this.anchor,g=this.lead;return"Selection("+a.row+"/"+a.column+" -> "+g.row+"/"+g.column+")"}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Selection"}}],
e,{pathInPackage:function(){return"text/selection.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:223,end:9100})}(void 0);uk.Selection=IN;uk.Selection=IN;uk.Selection=IN;var JN=function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/text/selection.js"),m=e.hasOwnProperty("MultiSelection")&&"function"===typeof e.MultiSelection?
e.MultiSelection:e.MultiSelection=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return dc(m,b,[{key:"initialize",value:function(a){this._selections=[new uk.Selection(this.textMorph,a)]}},{key:"__deserialize__",value:function(a,g){this._selections=[]}},{key:"selections",get:function(){return this._selections}},{key:"selections",set:function(a){var g=this._selections?this._selections.filter(function(l){return!a.includes(l)}):
[];this._selections=a;g.forEach(function(l){return l.uninstall()})}},{key:"isMultiSelection",get:function(){return!0}},{key:"uninstall",value:function(){this.selections.forEach(function(a){return a.uninstall()})}},{key:"defaultSelection",get:function(){return uk.arr.last(this.selections)}},{key:"removeSelections",value:function(a){a=this.selections.slice(void 0===a?1:a);a.forEach(function(g){return g.uninstall()});this.selections=uk.arr.withoutAll(this.selections,a)}},{key:"disableMultiSelect",value:function(){uk.arr.without(this.selections,
this.defaultSelection).forEach(function(a){return a.uninstall()});this.selections=[this.defaultSelection]}},{key:"range",get:function(){return this.defaultSelection.range}},{key:"range",set:function(a){this.disableMultiSelect();this.defaultSelection.range=a}},{key:"updateFromAnchors",value:function(){this.selections.forEach(function(a){return a.updateFromAnchors()})}},{key:"start",get:function(){return this.defaultSelection.start}},{key:"start",set:function(a){this.defaultSelection.start=a}},{key:"end",
get:function(){return this.defaultSelection.end}},{key:"end",set:function(a){this.defaultSelection.end=a}},{key:"anchor",get:function(){return this.defaultSelection.anchor}},{key:"anchor",set:function(a){this.defaultSelection.anchor=a}},{key:"lead",get:function(){return this.defaultSelection.lead}},{key:"lead",set:function(a){this.defaultSelection.lead=a}},{key:"text",get:function(){return this.selections.map(function(a){return a.text}).join("\n")}},{key:"text",set:function(a){this.selections.forEach(function(g){return g.text=
a})}},{key:"selectedRows",get:function(){return this.defaultSelection.selectedRows}},{key:"reverse",value:function(){this.defaultSelection.reverse()}},{key:"isReverse",value:function(){return this.defaultSelection.isReverse()}},{key:"isEmpty",value:function(){return this.defaultSelection.isEmpty()}},{key:"collapse",value:function(a){this.defaultSelection.collapse(a);return this}},{key:"collapseToEnd",value:function(){this.defaultSelection.collapseToEnd();return this}},{key:"growLeft",value:function(a){this.defaultSelection.growLeft(a);
return this}},{key:"growRight",value:function(a){this.defaultSelection.growRight(a);return this}},{key:"selectAll",value:function(){this.disableMultiSelect();this.defaultSelection.selectAll();return this}},{key:"selectLine",value:function(a,g){this.includingLineEnd=g;this.defaultSelection.selectLine(a,g);return this}},{key:"gotoLineEnd",value:function(a){this.defaultSelection.gotoLineEnd(a)}},{key:"selectLeft",value:function(a){this.defaultSelection.selectLeft(a);return this}},{key:"selectRight",
value:function(a){this.defaultSelection.selectRight(a);return this}},{key:"selectUp",value:function(a,g){this.defaultSelection.selectUp(a,g);return this}},{key:"selectDown",value:function(a,g){this.defaultSelection.selectDown(a,g);return this}},{key:"goUp",value:function(a,g){return this.defaultSelection.goUp(a,g)}},{key:"goDown",value:function(a,g){return this.defaultSelection.goDown(a,g)}},{key:"goLeft",value:function(a){return this.defaultSelection.goLeft(a)}},{key:"goRight",value:function(a){return this.defaultSelection.goRight(a)}},
{key:"cursorVisible",get:function(){return this.defaultSelection.cursorVisible}},{key:"style",set:function(a){this.defaultSelection.style=a}},{key:"getTextAttributes",value:function(){return this.defaultSelection.getTextAttributes()}},{key:"toString",value:function(){return"MultiSelection("+this.selections.join(", ")+")"}},{key:"mergeSelections",value:function(){for(var a=this.selections.slice(),g=a.length-1;0<=g;g--)for(var l=a.length-1;0<=l;l--)if(g!==l&&a[l].mergeWith(a[g])){a.splice(g,1);break}this.selections=
a}},{key:"ranges",get:function(){return this.selections.map(function(a){return a.range})}},{key:"ranges",set:function(a){for(var g=0;g<a.length;g++){var l=this.selections[g];l?l.range=a[g]:this.addRange(a[g],!1)}this.removeSelections(g);this.mergeSelections()}},{key:"addRange",value:function(a,g){g=void 0===g?!0:g;this.selections.push(new uk.Selection(this.textMorph,a));g&&this.mergeSelections();return uk.arr.last(this.selections).range}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"MultiSelection"}}],
e,{pathInPackage:function(){return"text/selection.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:9109,end:13716})}(uk.Selection);uk.MultiSelection=JN;uk.MultiSelection=JN;uk.MultiSelection=JN;var Lh=lively.FreezerRuntime.recorderFor("lively.morphic/text/attributes.js");Lh.shallowEquals=OS;Lh.concatAttributePair=kL;Lh.joinTextAttributes=
lL;Lh.splitTextAndAttributesAt=mL;Lh.splitTextAndAttributesAtColumns=nL;Lh.concatTextAndAttributes=oL;Lh.modifyAttributesInRange=pL;Lh.textAndAttributesWithSubRanges=qL;Lh.textAndAttributesDo=function(b,e){for(var m=0;m<b.length;m+=2)e(b[m],b[m+1])};Lh.splitTextAndAttributesIntoLines=xG;Lh.eqPosition=nv;Lh.lessPosition=mv;Lh.shallowEquals=OS;Lh.shallowEquals=OS;Lh.concatAttributePair=kL;Lh.concatAttributePair=kL;Lh.joinTextAttributes=lL;Lh.joinTextAttributes=lL;Lh.splitTextAndAttributesAt=mL;Lh.splitTextAndAttributesAt=
mL;Lh.splitTextAndAttributesAtColumns=nL;Lh.splitTextAndAttributesAtColumns=nL;Lh.concatTextAndAttributes=oL;Lh.concatTextAndAttributes=oL;Lh.modifyAttributesInRange=pL;Lh.modifyAttributesInRange=pL;Lh.textAndAttributesWithSubRanges=qL;Lh.textAndAttributesWithSubRanges=qL;Lh.splitTextAndAttributesIntoLines=xG;Lh.splitTextAndAttributesIntoLines=xG;var se=lively.FreezerRuntime.recorderFor("lively.morphic/text/document.js");se.arr=$f;se.num=Nm;se.string=pi;se.lessEqPosition=CD;se.minPosition=DD;se.maxPosition=
ED;se.lessPosition=mv;se.eqPosition=nv;se.concatTextAndAttributes=oL;se.splitTextAndAttributesAtColumns=nL;se.splitTextAndAttributesIntoLines=xG;se.joinTextAttributes=lL;se.modifyAttributesInRange=pL;se.concatAttributePair=kL;se.splitTextAndAttributesAt=mL;se.objectReplacementChar="\ufffd";se.objectReplacementChar="\ufffd";se.objectReplacementChar="\ufffd";se.defaultOptions={maxLeafSize:3,minLeafSize:2,leafSplit:.5,maxNodeSize:10,minNodeSize:5,nodeSplit:.5};(function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/text/document.js"),
m=e.hasOwnProperty("TreeNode")&&"function"===typeof e.TreeNode?e.TreeNode:e.TreeNode=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return dc(m,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){this.parent=a}},{key:"root",get:function(){return this.parent?this.parent.root:this}},{key:"isRoot",get:function(){return!this.parent}},{key:"withParents",value:function(){for(var a=this,g=[];a;)g.push(a),a=a.parent;
return g}},{key:"traverse",value:function(a){var g=[a.call(null,this)];if(this.isLeaf)return g;for(var l=0;l<this.children.length;l++)g.push.apply(g,$jscomp.arrayFromIterable(this.children[l].traverse(a)));return g}},{key:"consistencyCheck",value:function(){var a=[],g=this.isRoot,l=this.isLeaf,r=this.children,v=this.size,y=this.stringSize,A=this.height,E=this.width,F=this.options,H=F.maxLeafSize,I=F.maxNodeSize,M=F.minLeafSize;F=F.minNodeSize;g||0!==v||a.push({error:"size of "+this+" expected to be > 0!"});
if(!Array.isArray(r))return a.push({error:this+".children is not an array but "+r}),a;var N=se.arr.sum(se.arr.pluck(r,"size"));N!=v&&a.push({error:"Sum of child sizes is not size of "+this+": "+N+" != "+v});v=se.arr.sum(se.arr.pluck(r,"stringSize"));v!=y&&a.push({error:"Sum of child stringSize is not stringSIze of "+this+": "+v+" != "+y});y=se.arr.sum(se.arr.pluck(r,"height"));Number.parseInt(y)!=Number.parseInt(A)&&a.push({error:"Sum of child Height is not Height of "+this+": "+y+" != "+A});A=r.length?
Math.max.apply(null,se.arr.pluck(r,"width")):0;(r.find(function(W){return W.isLine&&W.hasEstimatedExtent})?Number.parseInt(A)>Number.parseInt(E):Number.parseInt(A)!=Number.parseInt(E))&&a.push({error:"max width of children of "+this+" is not node width: "+A+" != "+E});E=l?H:I;!g&&r.length>E&&a.push({error:"children count of "+this+" expected to be between "+(l?M:F)+" and "+E+" but is "+r.length});for(g=0;g<r.length;g++)(M=r[g])?(l&&!M.isLine?a.push({error:"child "+g+" of leaf "+this+" is not a line!"}):
!l&&M.isLine&&a.push({error:"child of non-leaf "+this+" is a line!"}),this!==M.parent&&a.push({error:"child.parent is "+M.parent+" but should be "+this})):a.push({error:"child "+g+" of "+this+" is nullish!"});a.push.apply(a,$jscomp.arrayFromIterable(se.arr.flatmap(r,function(W){return W.consistencyCheck()})));return a}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"TreeNode"}}],e,{pathInPackage:function(){return"text/document.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:1416,end:4603})})(void 0);(function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/text/document.js"),m=e.hasOwnProperty("InnerTreeNode")&&"function"===typeof e.InnerTreeNode?e.InnerTreeNode:e.InnerTreeNode=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return dc(m,
b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){dc._get(Object.getPrototypeOf(m.prototype),Symbol.for("lively-instance-initialize"),this).call(this,a.parent);this.options=a.options;this.children=a.children;this.size=a.size;this.stringSize=a.stringSize;this.height=a.height;this.width=a.width;this.isLeaf=!0}},{key:"isNode",get:function(){return!0}},{key:"resize",value:function(a,g,l){this.size+=a;this.height+=g;this.stringSize+=l;for(var r=0,v=0;v<this.children.length;v++){var y=
this.children[v].width;y>r&&(r=y)}this.width=r;this.parent&&this.parent.resize(a,g,l)}},{key:"lines",value:function(a){a=void 0===a?[]:a;if(this.isLeaf)return a.push.apply(a,$jscomp.arrayFromIterable(this.children)),a;for(var g=0;g<this.children.length;g++)this.children[g].lines(a);return a}},{key:"findRow",value:function(a){if(0>a||a>=this.size)return null;if(this.isLeaf)return this.children[a];for(var g=0;g<this.children.length;g++){var l=this.children[g],r=l.size;if(a<r)return l.findRow(a);a-=
r}return null}},{key:"findLineByVerticalOffset",value:function(a,g,l){g=void 0===g?0:g;l=void 0===l?0:l;if(0>a||a>this.height)return null;for(var r=0;r<this.children.length;r++){var v=this.children[r],y=v.height;if(a<=y)return this.isLeaf?{line:v,offset:a,y:g,row:l}:v.findLineByVerticalOffset(a,g,l);a-=y;g+=y;l+=v.size}return null}},{key:"computeVerticalOffsetOf",value:function(a,g){g=void 0===g?0:g;if(0>a||a>=this.size)return console.warn("strange row in computeVerticalOffsetOf: "+a),g;if(this.isLeaf){for(var l=
0;l<Math.min(a,this.children.length);l++)g+=this.children[l].height;return g}for(l=0;l<this.children.length;l++){var r=this.children[l],v=r.size;if(a<v)return r.computeVerticalOffsetOf(a,g);a-=v;g+=r.height}return g}},{key:"ensureLine",value:function(a){a||(a="");var g="string"===typeof a;return!g&&a.isLine?(a.parent=this,a):new se.Line({parent:this,width:g?0:a.width||0,height:g?0:a.height||0,textAndAttributes:g?[a,null]:a.textAndAttributes||[a.text||"",null]})}},{key:"insert",value:function(a,g){g=
void 0===g?this.size:g;var l=this.children,r=this.options;if(this.isLeaf){var v=[],y=0,A=0;for(r=0;r<a.length;r++){var E=this.ensureLine(a[r]);v.push(E);y+=E.height;A+=E.stringSize;l.splice(g++,0,E)}this.resize(v.length,y,A);this.balanceAfterGrowth();return v}0===l.length&&l.push(new se.InnerTreeNode({parent:this,children:[],size:0,stringSize:0,width:0,height:0,options:r}));for(r=0;r<l.length;r++){v=l[r];y=v.size;if(g<=y)return v.insert(a,g);g-=y}g=l[r-1];return g.insert(a,g.size)}},{key:"withParentChainsUpToCommonParentDo",
value:function(a,g,l){for(var r=this.withParents(),v,y=0;a;){if(r.includes(a)){v=a;break}g(a,y++);a=a.parent}g=r.indexOf(v);0>g&&(g=r.length);r=r.slice(0,g);for(g=0;g<r.length;g++)l(r[g],g)}},{key:"findLineWithTextIndex",value:function(a,g){g=void 0===g?0:g;if(this.isLeaf){for(var l=0;l<this.children.length;l++){var r=this.children[l],v=r.stringSize;if(a<v)return{line:r,column:a,row:g};a-=v;g++}a=se.arr.last(this.children);return{line:a,row:g-1,column:a.stringSize-1}}for(r=l=0;r<this.children.length;r++){v=
this.children[r];var y=v.stringSize;if(a<l+y)return v.findLineWithTextIndex(a-l,g);g+=v.size;l+=y}return se.arr.last(this.children).findLineWithTextIndex(a-l)}},{key:"findLeafs",value:function(a,g,l){l=void 0===l?0:l;if(a>l+this.size||g<l)return[];if(this.isLeaf){a=Math.max(0,a-l);var r=this.children.length-1;g=Math.min(r,g-l);l=!1;0===a&&g===r&&(l=!0,g=r);return[{node:this,firstLine:a,lastLine:g,full:l}]}r=[];for(var v=0;v<this.children.length;v++){var y=this.children[v];r.push.apply(r,$jscomp.arrayFromIterable(y.findLeafs(a,
g,l)));l+=y.size}return r}},{key:"removeFromToInRoot",value:function(a,g,l){var r=this;if(!this.isRoot)throw Error("removeFromTo() should be called on the root node");a>g&&(g=$jscomp.makeIterator([g,a]),a=g.next().value,g=g.next().value);var v=this.size,y=this.options.minLeafSize,A=this.findLeafs(a,g),E=A.shift();g=A.pop();var F=[],H=!1,I=!1;if(!(a>=v)){g&&E.node===g.node&&(g=null);E.full?(l&&l.log("Removing complete first line "+E),A.push(E)):H=E.node.children.length-(E.lastLine-E.firstLine+1)<y;
g&&(g.full?(l&&l.log("Removing complete last line "+g),A.push(g)):(I=g,I=I.node.children.length-(I.lastLine-I.firstLine+1)<y));if(H||I){var M=(M=E.node.children[0].prevLine())?M.parent:null;var N=(N=se.arr.last(g?g.node.children:E.node.children).nextLine())?N.parent:null}for(a=0;a<A.length;a++){y=A[a].node;v=y.children.length;for(var W=0,X=0,ea=0;ea<v;ea++){var Aa=y.children[ea];W+=Aa.height;X+=Aa.stringSize;Aa.parent=null}y.children.length=0;y.resize(-v,-W,-X);if(v=y.parent)y.parent=null,v.children.splice(v.children.indexOf(y),
1),F.includes(v)||F.push(v)}if(!E.full){y=E.firstLine;A=E.node;a=E.lastLine-y+1;y=A.children.splice(y,a);for(X=W=v=0;X<y.length;X++)ea=y[X],v+=ea.height,W+=ea.stringSize,ea.parent=null;A.resize(-a,-v,-W)}if(g&&!g.full){a=g;y=a.firstLine;A=a.node;a=a.lastLine-y+1;y=A.children.splice(y,a);for(X=W=v=0;X<y.length;X++)ea=y[X],v+=ea.height,W+=ea.stringSize,ea.parent=null;A.resize(-a,-v,-W)}l&&l.dump(""+this.print(!1));H&&E.node.balanceByMergeOrTheft(M,!g||g.full?N:g.node,l);g&&I&&g.node.root===this&&(I=
!0,M=E.full||!E.node.parent?M:E.node,H&&(g.node.root!==this&&(I=!1),M&&M.root!==this&&(M=null),N&&N.root!==this&&(N=null)),I&&g.node.balanceByMergeOrTheft(M,N,l));F.forEach(function(Ma){return Ma.root===r&&Ma.balanceAfterShrink(l)})}}},{key:"balanceByMergeOrTheft",value:function(a,g,l){var r=this,v=this.children,y=this.options,A=this.isLeaf,E=A?y.maxLeafSize:y.maxNodeSize;y=A?y.minLeafSize:y.minNodeSize;A=a&&a.children.length+v.length<=E;E=!A&&g&&g.children.length+v.length<=E;var F=A?a:E?g:null;if(F){l&&
l.log("[balanceByMergeOrTheft] merging "+this+" "+(A?"left":"right")+" into "+F);var H=this.size,I=this.width,M=this.height,N=this.stringSize;v.forEach(function(T){return T.parent=F});A?F.children.push.apply(F.children,$jscomp.arrayFromIterable(v)):F.children.unshift.apply(F.children,$jscomp.arrayFromIterable(v));this.width=v.length=0;this.withParentChainsUpToCommonParentDo(F,function(T){I>T.width&&(T.width=I);T.height+=M;T.size+=H;T.stringSize+=N},function(T){if(I===T.width)for(var U=0;U<T.children.length;U++){var pa=
T.children[U];pa.width>T.width&&(T.width=pa.width)}T.height-=M;T.size-=H;T.stringSize-=N})}else{A=a?Math.ceil((a.children.length-y)/2):0;var W=g?Math.ceil((g.children.length-y)/2):0;if((E=0<A&&A>=W)||!E&&0<W){y=E?a.children.splice(a.children.length-A,A):g.children.splice(0,W);var X=E?a:g,ea=E?A:W,Aa=0,Ma=0,K=0,aa=0;l&&l.log("[balanceByMergeOrTheft] "+this+" steals from "+(E?"left":"right")+" node "+X+" "+ea+" nodes");for(a=0;a<y.length;a++)Aa+=y[a].height,Ma+=y[a].stringSize,K=Math.max(K,y[a].width);
for(a=0;a<X.children.length;a++)aa=Math.max(aa,X.children[a].width);this.withParentChainsUpToCommonParentDo(X,function(T){if(aa<K&&aa<T.width){if(T===X)T.width=aa;else{for(var U=!1,pa=0;pa<T.children.length;pa++)if(T.children[pa].width>aa){U=!0;break}U||(T.width=aa)}T.width=K}T.height-=Aa;T.size-=ea;T.stringSize-=Ma},function(T){T.width<K&&(T.width=K);T.height+=Aa;T.size+=ea;T.stringSize+=Ma});y.forEach(function(T){return T.parent=r});E?this.children.unshift.apply(this.children,$jscomp.arrayFromIterable(y)):
this.children.push.apply(this.children,$jscomp.arrayFromIterable(y))}}a=this.parent;0===v.length&&(this.parent=null,a&&a.children.splice(a.children.indexOf(this),1));a&&a.balanceAfterShrink(l)}},{key:"balanceAfterGrowth",value:function(){var a=this.isLeaf,g=this.size,l=this.stringSize,r=this.parent,v=this.children,y=this.width,A=this.height,E=this.options,F=a?E.maxLeafSize:E.maxNodeSize;if(v.length>F){r||(r=this.parent=new se.InnerTreeNode({parent:null,children:[this],size:g,width:y,height:A,stringSize:l,
options:E}),r.isLeaf=!1);var H=Math.floor(v.length/2),I=0,M=0,N=g=0,W=l=0,X=y=0;for(A=0;I<H;I++)M+=v[I].size,N=Math.max(N,v[I].width),W+=v[I].height,X+=v[I].stringSize;for(;I<v.length;I++)g+=v[I].size,l=Math.max(l,v[I].width),y+=v[I].height,A+=v[I].stringSize;this.children=v.slice(0,H);this.size=M;this.width=N;this.height=W;this.stringSize=X;I=r.children.indexOf(this);v=v.slice(H);var ea=new se.InnerTreeNode({parent:r,children:v,size:g,height:y,width:l,stringSize:A,options:E});ea.isLeaf=a;v.forEach(function(Aa){return Aa.parent=
ea});r.children.splice(I+1,0,ea);ea.children.length>F&&ea.balanceAfterGrowth();this.children.length>F&&this.balanceAfterGrowth();this.parent.balanceAfterGrowth()}}},{key:"balanceAfterShrink",value:function(a){var g=this,l=this.isLeaf,r=this.parent,v=this.children,y=this.options,A=y.maxLeafSize,E=y.maxNodeSize,F=y.minLeafSize,H=y.minNodeSize;y=l?A:E;F=l?F:H;H=!1;for(var I=v.length;I--;)0===v[I].size&&(v.splice(I,1),H=!0,a&&a.log("[balanceAfterShrink] "+this+" removes node "+I+" b/c it is empty, remaining children: "+
v.length+" (min: "+F+", max: "+y+")"));H&&a&&a.dump(""+this.root.print(!1));if(v.length>=F)r&&r.balanceAfterShrink(a);else if(0===v.length)r&&r.balanceAfterShrink(a);else if(l)r&&(1===r.children.length?(a&&a.log("[balanceAfterShrink] "+this+" is the only child - will remove it's parent and take its position"),a&&a.dump(""+this.root.print(!1)),this.parent=null,r.children.length=0,r.children.push.apply(r.children,$jscomp.arrayFromIterable(v)),v.forEach(function(N){return N.parent=r}),r.isLeaf=!0):(A=
(A=v[0].prevLine())&&A.parent,v=se.arr.last(v).nextLine(),this.balanceByMergeOrTheft(A,v&&v.parent,a))),this.parent&&this.parent.balanceAfterShrink(a);else{l=[];y=H=F=!1;for(I=0;I<v.length;I++){var M=v[I];!F&&M.isLeaf&&(F=!0);H||M.isLeaf||(H=!0);if(F&&H){y=!0;break}l.push.apply(l,$jscomp.arrayFromIterable(M.children))}!y&&l.length<=(F?A:E)&&(a&&a.log("[balanceAfterShrink] "+this+" grandChildren.length is "+l.length+" and <= max size so it is removing all its children and adopting their children"),
v.forEach(function(N){return N.parent=null}),l.forEach(function(N){return N.parent=g}),v.length=0,v.push.apply(v,$jscomp.arrayFromIterable(l)),this.isLeaf=F,a&&a.log("[balanceAfterShrink] "+v.join("\n")),a&&a.dump(""+this.root.print(!1)));r&&r.balanceAfterShrink(a)}}},{key:"print",value:function(a,g,l,r){a=void 0===a?!0:a;g=void 0===g?0:g;l=void 0===l?0:l;var v=this.isLeaf,y=this.size,A=this.stringSize,E=this.width,F=this.height,H=this.children;r=r?r:v?"leaf":"node";A=""+" ".repeat(l)+r+" (size: "+
y+" width: "+Math.round(E)+" height: "+Math.round(F)+" text length: "+A+")";if(H.length){E="";g+=y;for(y=H.length;y--;)F=H[y],g-=F.size,E="\n"+F.print(a,g,l+1)+E;A+=E}return A}},{key:"toString",value:function(){var a=this.isLeaf,g=this.size,l=this.width,r=this.height,v=this.children;return"node ("+(a?"leaf, ":"")+(a&&v.length?"rows: "+v[0].row+"-"+se.arr.last(v).row+" ":"")+("size: "+g+" "+l+"x"+r+")")}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"InnerTreeNode"}}],e,{pathInPackage:function(){return"text/document.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:4606,end:28692})})(se.TreeNode);var RV=function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/text/document.js"),m=e.hasOwnProperty("Line")&&"function"===typeof e.Line?e.Line:e.Line=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return dc(m,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){dc._get(Object.getPrototypeOf(m.prototype),Symbol.for("lively-instance-initialize"),this).call(this,a.parent);this.textAndAttributes=se.joinTextAttributes(a.textAndAttributes||[]);this._text="";this._textAttributes=null;this.width=a.width;this.height=a.height;this.hasEstimatedExtent=!1;this.modeState=null;this.textAlign="left";this.lineHeight=null;this.marginBottom=this.marginTop=0}},{key:"isLine",get:function(){return!0}},
{key:"size",get:function(){return 1}},{key:"stringSize",get:function(){return this.text.length+1}},{key:"text",get:function(){if(this._text)return this._text;for(var a="",g=this.textAndAttributes,l=0;l<g.length;l+=2)a+="string"===typeof g[l]?g[l]:se.objectReplacementChar;return this._text=a}},{key:"textAttributes",get:function(){if(this._textAttributes)return this._textAttributes;for(var a=[],g=this.textAndAttributes,l=0;l<g.length;l+=2){var r=g[l+1];r&&!a.includes(r)&&a.push(r)}return this._textAttributes=
a}},{key:"row",get:function(){if(!this.parent)return 0;var a=this.withParents();if(1===a.length)return a.children.indexOf(this);for(var g=0,l=a.length-1;1<=l;l--)for(var r=a[l],v=r.children.indexOf(a[l-1]),y=0;y<v;y++)g+=r.children[y].size;return g}},{key:"nextLine",value:function(){var a=this.parent;return a?(a=a.children[a.children.indexOf(this)+1])?a:this.root.findRow(this.row+1):null}},{key:"prevLine",value:function(){var a=this.parent;return a?(a=a.children[a.children.indexOf(this)-1])?a:this.root.findRow(this.row-
1):null}},{key:"changeExtent",value:function(a,g,l){var r=this.height,v=this.width,y=this.parent;this.width=a;this.height=g;this.hasEstimatedExtent=void 0===l?!1:l;if(v!==a||r!==g)for(g-=r;y;){y.height+=g;if(a>=y.width)y.width=a;else if(v===y.width){for(r=l=0;r<y.children.length;r++){var A=y.children[r].width;A>l&&(l=A)}y.width=l}y=y.parent}return this}},{key:"changeText",value:function(a,g){g=void 0===g?null:g;var l=this.parent,r=this.height,v=a.length+1-(this.text.length+1),y=0;this.modeState&&
this.modeState._string!==a&&(this.modeState=null);this.height||this.width?this.hasEstimatedExtent=!0:(this.width=this.height=0,this.hasEstimatedExtent=!1,y=-r);this._text=a;this._textAttributes=null;this.textAndAttributes=g||(g=[a,null]);if(0!==g.length%2)throw Error("textAndAttributes list is strange, expected flat pairs of text/attr");for(a=0;a<g.length;a+=2)if((r=g[a+1])&&Array.isArray(r))throw Error("invalid attr part of text/attr pair, its an array: "+r);for(;l;){l.stringSize+=v;l.height+=y;
for(a=g=0;a<l.children.length;a++)r=l.children[a].width,r>g&&(g=r);l.width=g;l=l.parent}return this}},{key:"changeTextAndAttributes",value:function(a){a=se.joinTextAttributes(a);for(var g="",l=0;l<a.length;l+=2)g+="string"===typeof a[l]?a[l]:se.objectReplacementChar;return this.changeText(g,a)}},{key:"print",value:function(a,g,l){a=void 0===a?!0:a;g=void 0===g?0:g;g=" ".repeat(void 0===l?0:l)+"line "+g+" (size: 1 width: "+Math.round(this.width)+" height: "+Math.round(this.height)+" text length: "+
this.stringSize;l=se.arr.toTuples(this.textAndAttributes,2).map(function(r){var v=$jscomp.makeIterator(r);r=v.next().value;v=v.next().value;return("string"===typeof r?'"'+r+'"':String(r))+(","+JSON.stringify(v))}).join(",");return g+(a?")":" content: ["+l+"])")}},{key:"toString",value:function(){var a=this.width,g=this.height;return'line ("'+se.string.truncate(this._text,30)+'", '+a+"x"+g+")"}},{key:"consistencyCheck",value:function(){var a=[];if(!this.parent)return a.push("line "+this+" has no parent!"),
a}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Line"}}],e,{pathInPackage:function(){return"text/document.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:28702,end:35054})}(se.TreeNode);se.Line=RV;se.Line=RV;se.Line=RV;se.documentFuzzier={makeString:function(b,e){b=void 0===b?5:b;e=void 0===e?50:e;var m=se.arr.range(65,
90).map(function(a){return String.fromCharCode(a)}).join("");m+=m.toLowerCase()+" \n";b=se.num.random(b,e);return se.arr.shuffle(Array.from(m.repeat(Math.ceil(b/m.length)))).slice(0,b).join("")},randomDocPosition:function(b){var e=0===b.rowCount?0:se.num.random(0,b.rowCount-1);b=se.num.random(0,b.getLineString(e).length-1);return{row:e,column:b}},insertRandom:function(b,e,m,a){m=[this.makeString(m,a),null];a=this.randomDocPosition(b);e.push(["insertTextAndAttributes",m,a]);b.insertTextAndAttributes(m,
a)},deleteRandom:function(b,e,m,a){m={start:this.randomDocPosition(b),end:this.randomDocPosition(b)};e.push(["remove",m]);b.remove(m)},maybe:function(){return.5>Math.random()},replay:function(b,e,m,a){m=void 0===m?!1:m;a=void 0===a?!1:a;m&&(b.debug=m,m=b.debugHelper(),m.reset());var g=new se.Document([""]);e.forEach(function(l,r){var v=$jscomp.makeIterator(l);l=v.next().value;v=$jscomp.arrayFromIterator(v);if(a&&r==e.length-1)debugger;g[l].apply(g,[].concat($jscomp.arrayFromIterable(v),[m]))});b.changeDocument(g)},
run:function(){var b=Date.now(),e=0,m=new se.Document([],{maxLeafSize:3,minLeafSize:2,leafSplit:.5,maxNodeSize:10,minNodeSize:5,nodeSplit:.5}),a=[];try{for(;1E4>m.stringSize&&1E4>e++;)this.maybe()?this.deleteRandom(m,a):this.insertRandom(m,a),m.consistencyCheck()}catch(l){var g=l}b=Date.now()-b;return{error:g,doc:m,actions:a,time:b}}};se.newline="\n";se.newlineLength=1;var H9=function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/text/document.js"),m=e.hasOwnProperty("Document")&&"function"===
typeof e.Document?e.Document:e.Document=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return dc(m,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a,g){this.options=Object.assign({},se.defaultOptions,{},g);this.lines=a}},{key:"balance",value:function(){this.root.balanceAfterGrowth();this.fixRoot()}},{key:"fixRoot",value:function(){var a=this.root.root;this.root!==a&&(this.root=a)}},{key:"height",get:function(){return this.root.height}},
{key:"width",get:function(){return this.root.width}},{key:"rowCount",get:function(){return this.root.size}},{key:"stringSize",get:function(){return 0===this.rowCount?0:this.root.stringSize-1}},{key:"lineStrings",get:function(){return this.lines.map(function(a){return a.text})}},{key:"lines",get:function(){return this.root.lines()}},{key:"lines",set:function(a){a=void 0===a?[]:a;this.root=new se.InnerTreeNode({parent:null,children:[],size:0,width:0,height:0,stringSize:0,options:this.options});this.insertLines(a)}},
{key:"clipRow",value:function(a){return Math.max(0,Math.min(a,this.rowCount-1))}},{key:"clipPositionToLines",value:function(a){var g=a.row;a=a.column;var l=this.rowCount;if(0===l)return{row:0,column:0};0>g?g=0:g>=l&&(g=l-1,a=Infinity);0>a?a=0:(l=this.getLineString(g).length,a>l&&(a=l));return{row:g,column:a}}},{key:"findLineByVerticalOffset",value:function(a){return this.root.findLineByVerticalOffset(a)}},{key:"computeVerticalOffsetOf",value:function(a){return this.root.computeVerticalOffsetOf(a)}},
{key:"getLine",value:function(a){return this.root.findRow(this.clipRow(a))}},{key:"getLineString",value:function(a){return(a=this.getLine(a))?a.text:""}},{key:"insertLine",value:function(a,g){g=void 0===g?this.root.rowCount:g;return this.insertLines([a],g)[0]}},{key:"removeLine",value:function(a){this.root.removeFromToInRoot(a,a)}},{key:"removeLines",value:function(a,g,l){this.root.removeFromToInRoot(a,g,l)}},{key:"insertLines",value:function(a,g){a=this.root.insert(a,g);this.fixRoot();return a}},
{key:"textString",get:function(){var a="",g=this.lines;if(!g.length)return a;for(var l=0;l<g.length-1;l++)a=a+g[l].text+se.newline;return a+=g[l].text}},{key:"textString",set:function(a){this.lines=a.split(se.newline)}},{key:"endPosition",get:function(){var a=this.rowCount;if(0===a)return{row:0,column:0};--a;var g=this.getLine(a);return{row:a,column:g.stringSize-1}}},{key:"textAndAttributes",get:function(){var a=this.lines;if(!a.length)return[];for(var g=se.newline,l=a.length-1,r=a[0].textAndAttributes.slice(),
v=1;v<=l;v++){var y=a[v],A=r.pop()||null,E=r.pop()||"";y=y.textAndAttributes;r.push.apply(r,$jscomp.arrayFromIterable(se.concatAttributePair(E,A,y[0]||"",y[1]||null,g)));for(A=2;A<y.length;A+=2)r.push(y[A],y[A+1])}return r}},{key:"textAndAttributes",set:function(a){this.lines=se.splitTextAndAttributesIntoLines(a,se.newline).map(function(g){return new se.Line({parent:null,width:0,height:0,textAndAttributes:g})})}},{key:"getTextAndAttributesOfLine",value:function(a){return this.getLine(a).textAndAttributes}},
{key:"setTextAndAttributesOfLine",value:function(a,g){this.getLine(a).changeTextAndAttributes(g);return g}},{key:"mixinTextAttribute",value:function(a,g){se.modifyAttributesInRange(this,g,function(l,r){l._textAttributes=null;return Object.assign({},r,a)})}},{key:"setTextAttribute",value:function(a,g){se.modifyAttributesInRange(this,g,function(l,r){l._textAttributes=null;return a})}},{key:"mixoutTextAttribute",value:function(a,g){g=void 0===g?{start:{row:0,column:0},end:this.endPosition}:g;if(a){var l=
Object.keys(a);se.modifyAttributesInRange(this,g,function(r,v){if(!v)return v;r._textAttributes=null;r=0;var y={},A;for(A in v)l.includes(A)||(y[A]=v[A],r++);return 0===r?null:y})}}},{key:"setTextAttributesWithSortedRanges",value:function(a){function g(I,M,N,W){W=void 0===W?0:W;var X=0,ea=M.length;if(0>=N.length-W)return{attributes:[M,null],index:W};for(var Aa=[];W<N.length&&!(X>=ea);W+=2){var Ma=N[W],K=Ma.start;Ma=Ma.end;var aa=N[W+1];if(Ma.row<I)X=0;else{K.row===I&&X<K.column&&(Aa.push(M.slice(X,
K.column),null),X=K.column);if(Ma.row>I){Aa.push(aa.embeddedMorph||M.slice(X,ea),aa);X=ea;break}X<Ma.column&&Aa.push(aa.embeddedMorph||M.slice(X,Ma.column),aa);X=Ma.column}}X<ea&&Aa.push(M.slice(X,ea),null);return{attributes:Aa,index:W}}if(!(2>a.length)){var l=a[0].start,r=a.slice(-2)[0].end,v=this.getLine(l.row);if(l.row===r.row){if(!(l.column>=r.column)){var y=g(l.row,v.text,a,0).attributes,A=$jscomp.makeIterator(se.splitTextAndAttributesAtColumns(v.textAndAttributes,[l.column,r.column]));a=A.next().value;
A.next();A=A.next().value;r=$jscomp.makeIterator(se.splitTextAndAttributesAtColumns(y,[l.column,r.column]));r.next();l=r.next().value;r.next();v.changeTextAndAttributes([].concat($jscomp.arrayFromIterable(a),$jscomp.arrayFromIterable(l),$jscomp.arrayFromIterable(A)))}}else{A=l.row;var E=l.column;l=g(A,v.text,a,0);var F=l.attributes;l=l.index;var H=$jscomp.makeIterator(se.splitTextAndAttributesAt(v.textAndAttributes,E));y=H.next().value;H.next();E=$jscomp.makeIterator(se.splitTextAndAttributesAt(F,
E));E.next();E=E.next().value;for(v.changeTextAndAttributes([].concat($jscomp.arrayFromIterable(y),$jscomp.arrayFromIterable(E)));v=v.nextLine();){A++;if(A===r.row)break;l=g(A,v.text,a,l);y=l.attributes;l=l.index;v.changeTextAndAttributes(y)}v&&(r=r.column,a=g(A,v.text,a,l).attributes,A=$jscomp.makeIterator(se.splitTextAndAttributesAt(v.textAndAttributes,r)),A.next(),A=A.next().value,r=$jscomp.makeIterator(se.splitTextAndAttributesAt(a,r)).next().value,v.changeTextAndAttributes([].concat($jscomp.arrayFromIterable(r),
$jscomp.arrayFromIterable(A))))}}}},{key:"resetTextAttributes",value:function(){this.lines.forEach(function(a){return a.changeText(a.text)})}},{key:"textAttributeAt",value:function(a){var g=a.row;a=a.column;a=Math.max(0,a);var l=this.getLine(g);if(!l)return null;g=0;l=l.textAndAttributes;for(var r=0;r<l.length;r+=2){var v=l[r],y=l[r+1];g+="string"===typeof v?v.length:1;if(a<g)return y}return l[l.length-1]}},{key:"textAndAttributesInRange",value:function(a){var g=a.start,l=a.end;if(se.eqPosition(g,
l))return["",null];se.lessPosition(l,g)&&(a=$jscomp.makeIterator([l,g]),g=a.next().value,l=a.next().value);g=se.maxPosition(g,{column:0,row:0});l=se.minPosition(l,this.endPosition);var r=this.getLine(g.row),v=r;if(l.row===g.row)return a=g.column,l=l.column,a===l&&l++,a=$jscomp.makeIterator(se.splitTextAndAttributesAtColumns(v.textAndAttributes,[a,l])),a.next(),a.next().value;a=[r];for(var y=0;y<l.row-g.row;y++)a.push(r=r.nextLine());r=a[a.length-1];g=$jscomp.makeIterator(se.splitTextAndAttributesAt(v.textAndAttributes,
g.column));g.next();g=g.next().value;l=$jscomp.makeIterator(se.splitTextAndAttributesAt(r.textAndAttributes,l.column)).next().value;0===g.length&&(g=["",null]);if(1===a.length)return se.concatTextAndAttributes(g,l,!0);for(v=1;v<a.length-1;v++)"string"===typeof g[g.length-2]&&(g[g.length-2]+=se.newline),se.concatTextAndAttributes(g,a[v].textAndAttributes,!0);"string"===typeof g[g.length-2]&&(g[g.length-2]+=se.newline);se.concatTextAndAttributes(g,l,!0);return se.joinTextAttributes(g,"")}},{key:"textInRange",
value:function(a){var g=a.start,l=a.end;g=this.clipPositionToLines(g);l=this.clipPositionToLines(l);se.lessPosition(l,g)&&(a=$jscomp.makeIterator([l,g]),g=a.next().value,l=a.next().value);a=g;g=a.row;a=a.column;var r=l;l=r.row;r=r.column;if(g===l)return a===r?"":this.getLineString(g).slice(a,r);var v=this.getLine(g);for(a=v.text.slice(a);(v=v.nextLine())&&++g<l;)a+=se.newline+v.text;return a+se.newline+this.getLineString(l).slice(0,r)}},{key:"setTextInRange",value:function(a,g){this.remove(g);return this.insertText(a,
g.start,!1)}},{key:"indexToPosition",value:function(a){0>a&&(a=0);a=this.root.findLineWithTextIndex(a,0);return{row:a.row,column:a.column}}},{key:"positionToIndex",value:function(a){var g=a.column,l=this.getLine(a.row);g=Math.max(0,Math.min(g,l.stringSize-1));for(a=l.parent;a;){l=a.children.indexOf(l);l=a.children.slice(0,l);for(var r=0;r<l.length;r++)g+=l[r].stringSize;l=a;a=a.parent}return g}},{key:"insertTextAndAttributes",value:function(a,g,l){l=void 0===l?!1:l;if(!a||!a.length||2===a.length&&
!a[0])return{start:g,end:g};l&&!l.debugDocumentUpdate&&(l=!1);l&&!l.log&&(l=console);var r=g.row;g=g.column;0>r&&(r=0);0>g&&(g=0);var v=this.getLine(r);a=se.splitTextAndAttributesIntoLines(a,se.newline);l&&(l.log||(l={log:console.log.bind(console),dump:console.log.bind(console)}));if(!v)return r=this.insertLines(a.map(function(W){return new se.Line({parent:null,width:0,height:0,textAndAttributes:W})})),l&&l.log("insert "+r.length+" lines into empty text"),{start:{row:0,column:0},end:{row:r.length,
column:se.arr.last(r).text.length}};if(r>=this.rowCount){var y=this.endPosition;l&&l.log("insertion after doc end, "+r+"/"+g+", inserting "+(r-y.row)+" rows");for(g=0;g<r-y.row;g++)a.unshift(["",null]);r=y.row;g=y.column}if(1===a.length&&""===a[0][0])return l&&l.log("insert just newline at "+r+"/"+g),r=this.splitLineAt({row:r,column:g}),l&&l.dump(""+this.root.print(!1)),r;var A=a.shift(),E=a.length;y={row:r,column:g};var F=v.stringSize-1;g>F&&(l&&l.log("filling up insertion column at "+r+"/"+g+": "+
(g-F)),F=" ".repeat(g-F),A.length?"string"==typeof A[0]?A[0]=F+A[0]:A.unshift(F,null):A.push(F,null));F=$jscomp.makeIterator(se.splitTextAndAttributesAt(v.textAndAttributes,g));var H=F.next().value;F=F.next().value;""===H[0]&&(H=[]);H=se.concatTextAndAttributes(H,A,!0);if(0===E){for(var I=0,M=0;M<A.length;M+=2){var N=A[M];I+="string"===typeof N?N.length:1}y.column=g+I;se.concatTextAndAttributes(H,F,!0)}v.changeTextAndAttributes(H);if(0===E)return l&&(l.log("single line inserted at "+r+"/"+g),l&&l.dump(""+
this.root.print(!1))),{start:{row:r,column:g},end:y};v=a[E-1];for(H=A=0;H<v.length;H+=2)I=v[H],A+="string"===typeof I?I.length:1;y.row+=E;y.column=A;a=this.insertLines(a.map(function(W){return new se.Line({parent:null,width:0,height:0,textAndAttributes:W})}),r+1);E=se.arr.last(a);E.changeTextAndAttributes(se.concatTextAndAttributes(E.textAndAttributes,F,!0));l&&(l.log(a.length+" inserted at "+r+"/"+g),l&&l.dump(""+this.root.print(!1)));return{start:{row:r,column:g},end:y}}},{key:"insertText",value:function(a,
g,l){l=void 0===l?!1:l;if(!a)return{start:g,end:g};var r=g.row;g=g.column;0>r&&(r=0);0>g&&(g=0);var v=this.getLine(r);if(!v)return r=this.insertLines(a.split(se.newline)),{start:{row:0,column:0},end:{row:r.length,column:se.arr.last(r).text.length}};r>=this.rowCount&&(g=this.endPosition,a="\n".repeat(r-g.row)+a,r=g.row,g=g.column);var y=a.split(se.newline),A=y.shift(),E=y.length;a={row:r,column:g};var F=v.stringSize-1;g>F&&(A=" ".repeat(g-F)+A);F=$jscomp.makeIterator(se.splitTextAndAttributesAt(v.textAndAttributes,
g));var H=F.next().value;F=F.next().value;""===H[0]&&(H=[]);l=se.concatTextAndAttributes(H,[A,l&&H.length?H[H.length-1]:null],!0);0===E&&(a.column=g+A.length,se.concatTextAndAttributes(l,F,!0));v.changeTextAndAttributes(l);if(0===E)return{start:{row:r,column:g},end:a};a.row+=E;a.column=y[E-1].length;l=this.insertLines(y,r+1);l=se.arr.last(l);l.changeTextAndAttributes(se.concatTextAndAttributes(l.textAndAttributes,F,!0));return{start:{row:r,column:g},end:a}}},{key:"remove",value:function(a,g){g=void 0===
g?!1:g;if(0!==this.rowCount){var l=a.start,r=a.end;if(l.row!==r.row||l.column!==r.column){se.lessPosition(r,l)&&(r=$jscomp.makeIterator([r,l]),l=r.next().value,r=r.next().value);var v=this.endPosition;if(!se.lessEqPosition(v,l)){var y=se.maxPosition(l,{column:0,row:0});l=y.row;y=y.column;v=se.minPosition(r,v);r=v.row;var A=v.column;0>y&&(y=0);0>A&&(A=0);g&&!g.debugDocumentUpdate&&(g=!1);g&&(g.log||(g={log:console.log.bind(console),dump:console.log.bind(console),group:console.group.bind(console),groupEnd:console.groupEnd.bind(console)}),
g.group("document.remove "+JSON.stringify(a)),g.log("[text doc] removing "+l+"/"+y+" => "+r+"/"+A));var E=this.getLine(l);a=E;v=[E];for(var F=0;F<r-l;F++)v.push(E=E.nextLine());E=v[v.length-1];y=$jscomp.makeIterator(se.splitTextAndAttributesAt(a.textAndAttributes,y)).next().value;A=$jscomp.makeIterator(se.splitTextAndAttributesAt(E.textAndAttributes,A));A.next();A=A.next().value;a.changeTextAndAttributes(se.concatTextAndAttributes(y,A,!0));g&&g.log('[text doc removal] what remains of start/end line: "'+
a.textAndAttributes+'"');1<v.length&&this.removeLines(l+1,r,g);g&&g.groupEnd("[text doc removal]")}}}}},{key:"splitLineAt",value:function(a){var g=a.row;a=a.column;var l=this.getLine(g),r=$jscomp.makeIterator(se.splitTextAndAttributesAt(l.textAndAttributes,a)),v=r.next().value;r=r.next().value;l.changeTextAndAttributes(v);l=new se.Line({parent:null,width:0,height:0,textAndAttributes:r});this.insertLines([l],g+1);return{start:{row:g,column:a},end:{row:g+1,column:0}}}},{key:"replace",value:function(a,
g,l){var r=a.start;a=a.end;if(!g.length)return this.remove({start:r,end:a},l),{removed:{start:r,end:a},inserted:{start:r,end:r}};var v=this.clipPositionToLines(r),y=this.clipPositionToLines(a);v.row===y.row&&this.remove({start:v,end:y},l);if(v.row===y.row||se.lessEqPosition(this.endPosition,r)){var A;"string"===typeof g?g.length&&(A=g.length&&this.insertText(g,r)):g.length&&(2!==g.length||g[0])&&(A=this.insertTextAndAttributes(g,r,l));A||(A={start:v,end:v});return{removed:{start:r,end:a},inserted:A}}r=
v;a=y;l=r;A=l.row;y=l.column;v=a.row;if("string"===typeof g){l=[];g=g.split(se.newline);for(var E=0;E<g.length;E++)l.push([g[E],null])}else l=se.splitTextAndAttributesIntoLines(g,se.newline);var F=!l.length||1===l.length&&(!l[0].length||!l[0][0].length);F&&(l=[]);var H=g=this.getLine(A);E=this.getLine(v);y=$jscomp.makeIterator(se.splitTextAndAttributesAt(H.textAndAttributes,y));var I=y.next().value;y.next();for(H.changeTextAndAttributes(F?I:se.concatTextAndAttributes(I,l.shift(),!0));l.length;){g=
g.nextLine();A++;if(g===E)break;g.changeTextAndAttributes(l.shift())}if(!l.length)return l=g.stringSize-1,this.remove({start:{row:A,column:g.stringSize},end:a}),{removed:{start:r,end:a},inserted:{start:r,end:{row:A,column:l}}};console.assert(A==v,"not end row");console.assert(g.row==A,"row != last line.row");this.remove({start:{row:A,column:0},end:a});v=[];g=l.length;for(y=0;y<g-1;y++)E=l[y],E.length||(E=["",null]),"string"==typeof E[E.length-2]?E[E.length-2]+=se.newline:E.push(se.newline,null),v.push.apply(v,
$jscomp.arrayFromIterable(E));v.push.apply(v,$jscomp.arrayFromIterable(l[g-1]));l=this.insertTextAndAttributes(v,{row:A,column:0}).end;return{removed:{start:r,end:a},inserted:{start:r,end:l}}}},{key:"wordsOfLine",value:function(a){for(var g=this.getLineString(a),l=[],r,v=0;v<g.length;v++)/[^a-z0-9_]/i.test(g[v])?r&&(r.range.end.column=v,l.push(r),r=null):(r=r||{index:l.length,string:"",range:{start:{row:a,column:v},end:{row:a,column:v}}},r.string+=g[v]);r&&(r.range.end.column=v,l.push(r));return l}},
{key:"wordAt",value:function(a,g){var l=a.row,r=a.column;g=void 0===g?this.wordsOfLine(l):g;return g.find(function(v){v=v.range;var y=v.end.column;return v.start.column<=r&&r<=y})||{range:{start:{column:r,row:l},end:{column:r,row:l}},string:""}}},{key:"wordLeft",value:function(a){var g=a.row,l=a.column,r=this.wordsOfLine(g);if(!r.length||se.lessEqPosition(a,r[0].range.start)){for(;0<=--g;)if(r=this.wordsOfLine(g),r.length)return se.arr.last(r);return{range:{start:a,end:a},string:""}}g=this.wordAt(a);
return g.string?se.eqPosition(g.range.start,a)?r[g.index-1]:g:r.slice().reverse().find(function(v){return v.range.end.column<=l})||{range:{start:a,end:a},string:""}}},{key:"wordRight",value:function(a){var g=a.column,l=a.row,r=this.wordsOfLine(a.row);if(!r.length||se.lessEqPosition(se.arr.last(r).range.end,a)){for(;++l<this.lines.length;)if(r=this.wordsOfLine(l),r.length)return r[0];return{range:{start:a,end:a},string:""}}l=this.wordAt(a);return l.string?se.eqPosition(l.range.end,a)?r[l.index+1]:
l:r.find(function(v){return v.range.start.column>=g})||{range:{start:a,end:a},string:""}}},{key:"scanForward",value:function(a,g){var l=a.row,r=a.column;a=this.getLine(l);for(var v=a.text;r<a.stringSize-1;r++){var y=g(v[r],{row:l,column:r});if(y)return y}for(;a=a.nextLine();)for(l++,v=a.text,r=0;r<a.stringSize-1;r++)if(y=g(v[r],{row:l,column:r}))return y;return null}},{key:"scanBackward",value:function(a,g){var l=a.row,r=a.column;a=this.getLine(l);var v=a.text;for(--r;0<=r;r--){var y=g(v[r],{row:l,
column:r});if(y)return y}for(;a=a.prevLine();)for(l--,v=a.text,r=a.stringSize-2;0<=r;r--)if(y=g(v[r],{row:l,column:r}))return y;return null}},{key:"copy",value:function(){return new this.constructor(this.lines.slice(),this.options)}},{key:"toString",value:function(){return"Document("+this.rowCount+" lines)"}},{key:"consistencyCheck",value:function(){var a=[],g=this.rowCount,l=this.stringSize,r=this.lines,v=this.textString,y=this.root;g!==r.length&&a.push({error:"document "+this+" row count: "+g+" !== "+
r.length});v.length!==l&&a.push({error:"document "+this+" textString.length vs stringSize: "+v.length+" !== "+l});a.push.apply(a,$jscomp.arrayFromIterable(y.consistencyCheck()));g=0;for(l=r[0];l;)l!=r[g]&&a.push({error:"line iteration at "+g+" is broken: nextLine() of "+r[g-1]+" is not "+r[g]+"!"}),g++,l=l.nextLine();r[g]&&a.push({error:"nextLine() of\n  "+r[g-1]+"\nis nullish but \n  "+r[g]+"\nexists in tree!"});if(a.length)throw Error("Consistency check of document revealed "+a.length+" error"+
(1<a.length?"s":"")+":\n"+a.map(function(A){return A.error}).filter(Boolean).join("\n"));}},{key:"print",value:function(){return this.root.print(!1,0,0,"root")}},{key:"print2",value:function(){var a=System.decanonicalize("lively.lang/text-graphics.js"),g=(System.get(a)||{}).printTree;return g?g(this.root,function(l){return l.toString()},function(l){return l.children},{padding:[2,1,2,1]}):(lively.module.module(a).load().then(function(){return console.log("lively.lang/text-graphics.js loaded")}).catch(function(l){return console.error(l)}),
"Loading lively.lang/text-graphics.js lib, please try again later :P")}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Document"}},{key:"fuzzyTest",value:function(){return se.documentFuzzier.run()}},{key:"newline",get:function(){return se.newline}},{key:"fromString",value:function(a,g){return new this(a.split(se.newline),g)}}],e,{pathInPackage:function(){return"text/document.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:37263,end:70606})}(void 0),Uqa=H9=se.Document;se.default=H9;var wr=lively.FreezerRuntime.recorderFor("lively.morphic/text/anchors.js");wr.lessPosition=mv;wr.lessEqPosition=CD;wr.eqPosition=nv;var oE=function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/text/anchors.js"),m=e.hasOwnProperty("Anchor")&&"function"===typeof e.Anchor?e.Anchor:e.Anchor=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return dc(m,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a,g,l){g=void 0===g?{column:0,row:0}:g;this.id=a||""+(this.constructor._id=(this.constructor._id||0)+1);this.position=g;this.insertBehavior=void 0===l?"move":l}},{key:"isAnchor",get:function(){return!0}},{key:"onDelete",value:function(a){if(wr.lessEqPosition(this.position,a.start))return!1;if(wr.lessEqPosition(a.start,this.position)&&wr.lessEqPosition(this.position,a.end))return this.position=a.start,!0;var g=
this.position,l=g.column,r=a.start,v=r.column,y=a.end;a=y.row;y=y.column;this.position={column:a!==this.position.row?l:v===y?l-(y-v):v+(l-y),row:g.row-(a-r.row)};return!0}},{key:"onInsert",value:function(a){if(wr.lessPosition(this.position,a.start)||wr.eqPosition(this.position,a.start)&&"stay"===this.insertBehavior)return!1;var g=this.position,l=a.start,r=l.row;l=l.column;a=a.end;var v=a.column;this.position={column:g.column+(r!==this.position.row?0:v-l),row:g.row+(a.row-r)};return!0}},{key:"equalsPosition",
value:function(a){return a?a.isAnchor?wr.eqPosition(this.position,a.position):wr.eqPosition(this.position,a):!1}},{key:"toString",value:function(){var a=this.position;return"Anchor("+this.id+" "+a.row+"/"+a.column+")"}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Anchor"}}],e,{pathInPackage:function(){return"text/anchors.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",
version:"0.1.2"}}},{start:82,end:3051})}(void 0);wr.Anchor=oE;wr.Anchor=oE;wr.Anchor=oE;var Vqa=Object.freeze({__proto__:null,Anchor:oE}),yg=lively.FreezerRuntime.recorderFor("lively.morphic/text/search.js");yg.pt=xi;yg.Color=Fg;yg.connect=rl;yg.once=$q;yg.disconnect=zo;yg.Path=Ah;yg.morph=sa;yg.GridLayout=Wy;yg.config=Dn;yg.Morph=Ll;yg.lessPosition=mv;yg.minPosition=DD;yg.maxPosition=ED;yg.Icon=Np;var KN=function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/text/search.js"),m=e.hasOwnProperty("TextSearcher")&&
"function"===typeof e.TextSearcher?e.TextSearcher:e.TextSearcher=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return dc(m,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){this.morph=a;this.STOP={}}},{key:"doc",get:function(){return this.morph.document}},{key:"processFind",value:function(a,g){var l=this.doc.positionToIndex(a);l=this.doc.indexToPosition(l+g.length);return{range:{start:a,end:l},match:g}}},
{key:"stringSearch",value:function(a,g,l,r,v,y,A){if(v&&(yg.lessPosition(A,v.start)||yg.lessPosition(v.end,A)))return this.STOP;l||(y=y.toLowerCase());if(y!==g[0])return null;v=A.row;A=A.column;y=a[v];a=1>=r?"":"\n"+a.slice(v+1,v+1+(r-1)).join("\n");a=y.slice(A)+a;return 0!==(l?a:a.toLowerCase()).indexOf(g)?null:this.processFind({row:v,column:A},a.slice(0,g.length))}},{key:"reSearch",value:function(a,g,l,r,v,y){if(r&&(yg.lessPosition(y,r.start)||yg.lessPosition(r.end,y)))return this.STOP;r=y.row;
y=y.column;return(a=(a[r].slice(y)+(l?"\n"+a.slice(r+1).join("\n"):"")).match(g))?this.processFind({row:r,column:y},a[0]):null}},{key:"search",value:function(a){var g=Object.assign({start:this.morph.cursorPosition,needle:"",backwards:!1,caseSensitive:!1,inRange:null},a);a=g.start;var l=g.needle,r=g.backwards,v=g.caseSensitive;g=g.inRange;if(!l)return null;g&&(a=r?yg.minPosition(g.end,a):yg.maxPosition(g.start,a));if(l instanceof RegExp){var y=(l.flags||"").split(""),A=!!l.multiline;y.splice(y.indexOf("m"),
1);v||y.includes("i")||y.push("i");l=new RegExp("^"+l.source.replace(/^\^+/,""),y.join(""));l=this.reSearch.bind(this,this.doc.lineStrings,l,A,g)}else l=String(l),v||(l=l.toLowerCase()),y=l.split(this.doc.constructor.newline).length,l=this.stringSearch.bind(this,this.doc.lineStrings,l,v,y,g);a=this.doc[r?"scanBackward":"scanForward"](a,l);return a===this.STOP?null:a}},{key:"searchForAll",value:function(a){for(var g=[],l=0;;){if(1E4<l++)throw Error("endless loop");var r=this.search(a);if(!r)return g;
g.push(r);a=Object.assign({},a,{start:a.backwards?r.range.start:r.range.end})}}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"TextSearcher"}}],e,{pathInPackage:function(){return"text/search.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:535,end:3676})}(void 0);yg.TextSearcher=KN;yg.TextSearcher=KN;yg.TextSearcher=
KN;var SV=function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/text/search.js"),m=e.hasOwnProperty("SearchWidget")&&"function"===typeof e.SearchWidget?e.SearchWidget:e.SearchWidget=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return dc(m,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){var g=this;a=void 0===a?{}:a;a.targetText&&(a.target=a.targetText);if(!a.target)throw Error("SearchWidget needs a target text morph!");
dc._get(Object.getPrototypeOf(m.prototype),Symbol.for("lively-instance-initialize"),this).call(this,a);a=this.getSubmorphNamed("replaceButton");var l=this.getSubmorphNamed("replaceAllButton");this.getSubmorphNamed("replaceInput");var r=this.getSubmorphNamed("searchInput"),v=this.getSubmorphNamed("prevButton"),y=this.getSubmorphNamed("nextButton"),A=this.getSubmorphNamed("cancelButton"),E=this.getSubmorphNamed("acceptButton");yg.connect(E,"fire",this,"execCommand",{converter:function(){return"accept search"}});
yg.connect(A,"fire",this,"execCommand",{converter:function(){return"cancel search"}});yg.connect(y,"fire",this,"execCommand",{converter:function(){return"search next"}});yg.connect(v,"fire",this,"execCommand",{converter:function(){return"search prev"}});yg.connect(r,"inputChanged",this,"search");yg.connect(a,"fire",this,"execCommand",{converter:function(){return"replace and go to next"}});yg.connect(l,"fire",this,"execCommand",{converter:function(){return"replace all"}});this.state={backwards:!1,
before:null,position:null,inProgress:null,last:null};r.addCommands([{name:"realign top-bottom-center",exec:function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(F){g.target.execCommand("realign top-bottom-center");g.addSearchMarkersForPreview(g.state.inProgress&&g.state.inProgress.found,!1);return F.return(!0)})}}])}},{key:"focus",value:function(){var a=this;this.get("searchInput").focus();this.whenRendered().then(function(){return a.get("searchInput").invalidateTextLayout(!0,!0)})}},
{key:"onBlur",value:function(a){var g=this,l=this.world();l&&setTimeout(function(){var r=l.focusedMorph;g.withAllSubmorphsDetect(function(v){return v.isFocused()})?g.get("searchInput")!=r&&g.get("replaceInput")!=r&&g.get("searchInput").focus():g.cancelSearch()})}},{key:"cleanup",value:function(){this.removeSearchMarkers();this.state.inProgress=null;this.textMap&&this.textMap.update()}},{key:"cancelSearch",value:function(){this.state.inProgress&&(this.state.last=this.state.inProgress);this.cleanup();
this.removeTextMap();if(this.state.before){var a=this.state.before,g=a.scroll;this.target.selection=a.selectionRange;this.target.scroll=g;this.state.before=null}this.remove();this.target.focus()}},{key:"acceptSearch",value:function(){this.state.inProgress&&(this.state.last=this.state.inProgress);this.applySearchResult(this.state.inProgress)&&this.state.before&&this.target.saveMark(this.state.before.position);this.get("searchInput").acceptInput();this.cleanup();this.removeTextMap();this.state.before=
null;this.remove();this.target.focus()}},{key:"applySearchResult",value:function(a){if(!a||!a.found)return null;var g=this.target,l=g.selection,r=!!g.activeMark||!l.isEmpty(),v=a.found.range,y=v.start;v=v.end;y=a.backwards?y:v;r?l.lead=y:g.cursorPosition=y;g.isLineFullyVisible(y.row)||g.centerRow();return a}},{key:"removeSearchMarkers",value:function(){var a=this;(this.target.markers||[]).forEach(function(g){g=g.id;return g.startsWith("search-highlight")&&a.target.removeMarker(g)})}},{key:"addSearchMarkers",
value:function(a,g,l){l=void 0===l?!1:l;this.removeSearchMarkers();g=this.target;var r=this.textMap,v=g.whatsVisible,y=v.startRow;v=v.endRow;var A=g.document.lineStrings,E=0,F=yg.config.codeEditor.search,H=F.maxCharsPerLine;F=F.fastHighlightLineCount;r&&3<=a.match.length&&A.length<F&&(y=0,v=A.length-1);F=!1;for(var I=window.performance.now();y<=v&&!F;y++)for(var M=A[y]||"",N=0;N<Math.min(M.length,H);N++){if(300<window.performance.now()-I){F=!0;break}if(l?0===M.slice(N).indexOf(a.match):0===M.slice(N).toLowerCase().indexOf(a.match.toLowerCase()))g.addMarker({id:"search-highlight-"+
E++,range:{start:{row:y,column:N},end:{row:y,column:N+a.match.length}},style:{"border-radius":"4px","background-color":"rgba(255, 200, 0, 0.3)","box-shadow":"0 0 4px rgba(255, 200, 0, 0.3)","pointer-events":"none"}}),N+=a.match.length}this.state.backwards?(l=a.range.start,a=l.row,l=l.column,a={start:{row:a,column:l},end:{row:a,column:l+1}}):(l=a.range.end,a=l.row,l=l.column,a={start:{row:a,column:l-1},end:{row:a,column:l}});l={};g.addMarker({id:"search-highlight-cursor",range:a,style:(l["pointer-events"]=
"none",l["box-sizing"]="border-box",l[this.state.backwards?"border-left":"border-right"]="3px red solid",l)});r&&r.update()}},{key:"addSearchMarkersForPreview",value:function(a,g){g=void 0===g?!0:g;a&&(this.addSearchMarkers(a),g&&this.target.removeMarker("search-highlight-cursor"))}},{key:"prepareForNewSearch",value:function(){var a=this.target,g=this.state,l=a.world();if(l){this.openInWorld(l.visibleBounds().center(),l);this.topRight=a.globalBounds().insetBy(5).topRight();if(a.getWindow())yg.once(a.getWindow(),
"remove",this,"remove");l=this.get("searchInput");var r=a.scroll;a=a.selection;g.position=a.lead;g.before={scroll:r,position:a.lead,selectionRange:a.range,selectionReverse:a.isReverse()};g.last&&g.last.found&&(yg.disconnect(l,"inputChanged",this,"search"),this.input=g.last.needle,yg.connect(l,"inputChanged",this,"search"),this.addSearchMarkersForPreview(g.last.found));this.focus();l.selectAll()}}},{key:"advance",value:function(a){var g=this.state.inProgress;if(g&&g.found){var l=g.found.range;g=l.start;
l=l.end;this.state.position=a!==this.state.backwards?a?l:g:a?g:l}this.state.backwards=a;return this.search()}},{key:"searchNext",value:function(){return this.advance(!1)}},{key:"searchPrev",value:function(){return this.advance(!0)}},{key:"search",value:function(){if(!this.input)return this.cleanup(),null;var a=this.state,g=a.backwards,l={backwards:g,start:a.position};a=this.target.search(this.input,l);l=this.state.inProgress=Object.assign({},l,{needle:this.input,found:a});this.applySearchResult(l);
a?this.addSearchMarkers(a,g):this.cleanup();return l}},{key:"showTextMap",value:function(){var a=this,g;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){if(1==l.nextAddress)return l.yield(System.import("lively.morphic/text/map.js"),2);g=a.textMap=yg.morph({type:"textmap"});g.attachTo(a.target);g.isLayoutable=!1;a.addMorph(g);g.topRight=a.innerBounds().bottomRight().addXY(0,5);g.height=a.target.height-a.height-15;g.update();a.renderOnGPU=!0;return l.return(g)})}},{key:"removeTextMap",
value:function(){this.textMap&&(this.textMap.remove(),this.textMap.detachFromCurrentTextMorph(),this.textMap=null)}},{key:"keybindings",get:function(){return[{keys:"Enter",command:"accept search or replace and go to next"},{keys:"Tab",command:"change focus"},{keys:"Ctrl-O",command:"occur with search term"},{keys:"Ctrl-W",command:"yank next word from text"},{keys:"Escape|Ctrl-G",command:"cancel search"},{keys:{win:"Ctrl-F|Ctrl-S|Ctrl-G",mac:"Meta-F|Ctrl-S|Meta-G"},command:"search next"},{keys:{win:"Ctrl-Shift-F|Ctrl-R|Ctrl-Shift-G",
mac:"Meta-Shift-F|Ctrl-R|Meta-Shift-G"},command:"search prev"}]}},{key:"commands",get:function(){var a=this;return[{name:"occur with search term",exec:function(){var g,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){if(1==r.nextAddress)return r.yield(System.import("lively.morphic/text/occur.js"),2);g=r.yieldResult;l=g.occurStartCommand;a.target.addCommands([l]);a.execCommand("accept search");return r.return(a.target.execCommand("occur",{needle:a.input}))})}},{name:"accept search",
exec:function(){a.acceptSearch();return!0}},{name:"cancel search",exec:function(){a.cancelSearch();return!0}},{name:"search next",exec:function(){a.searchNext();return!0}},{name:"search prev",exec:function(){a.searchPrev();return!0}},{name:"accept search or replace and go to next",exec:function(g,l,r){return a.execCommand(a.get("replaceInput").isFocused()?"replace and go to next":"accept search",l,r)}},{name:"replace current search location with replace input",exec:function(){var g=yg.Path("state.inProgress").get(a);
if(g.found){var l=a.get("replaceInput").textString;a.get("replaceInput").get("replaceInput").acceptInput();g.needle instanceof RegExp&&(l=g.found.match.replace(g.needle,l));a.target.replace(g.found.range,l)}return!0}},{name:"replace and go to next",exec:function(){a.execCommand("replace current search location with replace input");a.execCommand(a.state.backwards?"search prev":"search next");return!0}},{name:"replace all",exec:function(){var g=yg.Path("state.inProgress").get(a);if(g.found){g=Object.assign({},
g,{start:{row:0,column:0}});var l=a.get("replaceInput").textString;a.get("replaceInput").get("replaceInput").acceptInput();var r=(new yg.TextSearcher(a.target)).searchForAll(g);a.target.undoManager.group();r.forEach(function(v){var y=v.range;v=v.match;g.needle instanceof RegExp&&(l=v.replace(g.needle,l));a.target.replace(y,l,!0,!0,!1)});a.target.undoManager.group();a.acceptSearch()}return!0}},{name:"change focus",exec:function(){a.get("searchInput").isFocused()?a.get("replaceInput").focus():a.get("searchInput").focus();
return!0}},{name:"yank next word from text",exec:function(){var g=a.target,l=g.wordRight(),r=a.get("searchInput");r.selection.isEmpty()||(r.selection.text="");g=g.textInRange({start:g.cursorPosition,end:l.range.end});r.textString+=g;return!0}}]}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"SearchWidget"}},{key:"properties",get:function(){return{name:{defaultValue:"search widget"},borderWidth:{defaultValue:1},borderColor:{defaultValue:yg.Color.gray},borderRadius:{defaultValue:3},
fill:{defaultValue:yg.Color.black.withA(.6)},epiMorph:{defaultValue:!0},target:{},state:{},master:{initialize:function(){this.master={auto:"styleguide://SystemWidgets/search widget"}}},input:{after:["submorphs"],get:function(){var a=this.get("searchInput").textString,g=a.match(/^\/(.*)\/([a-z]*)$/);return g?new RegExp(g[1],g[2]):a},set:function(a){this.get("searchInput").textString=String(a)}},fontSize:{after:["submorphs"],get:function(){return this.get("searchInput").fontSize},set:function(a){this.get("replaceInput").fontSize=
a}},fontFamily:{after:["submorphs"],get:function(){return this.get("searchInput").fontFamily},set:function(a){this.get("searchInput").fontFamily=a;this.get("replaceInput").fontFamily=a}},layout:{initialize:function(){this.layout=new yg.GridLayout({groups:{nextButton:{resize:!1},prevButton:{resize:!1},acceptButton:{resize:!1},cancelButton:{resize:!1}},rows:[0,{fixed:28,paddingTop:5,paddingBottom:2.5},1,{fixed:28,paddingTop:2.5,paddingBottom:5}],columns:[0,{paddingLeft:5,paddingRight:5},1,{fixed:25},
2,{fixed:25},3,{fixed:5},4,{fixed:25},5,{fixed:25},6,{fixed:10}],grid:[["searchInput","nextButton","prevButton",null,"acceptButton","cancelButton",null],["replaceInput","replaceButton","replaceButton",null,"replaceAllButton","replaceAllButton",null]]})}},submorphs:{after:["extent"],initialize:function(){this.submorphs=[yg.morph({type:"button",name:"acceptButton",label:yg.Icon.textAttribute("check-circle")}).fit(),yg.morph({type:"button",name:"cancelButton",label:yg.Icon.textAttribute("times-circle")}).fit(),
yg.morph({type:"button",name:"nextButton",label:yg.Icon.textAttribute("arrow-alt-circle-down",{textStyleClasses:["far"]})}).fit(),yg.morph({type:"button",name:"prevButton",label:yg.Icon.textAttribute("arrow-alt-circle-up",{textStyleClasses:["far"]})}).fit(),yg.morph({type:"input",name:"searchInput",placeholder:"search input",historyId:"lively.morphic-text search"}),yg.morph({type:"input",name:"replaceInput",placeholder:"replace input",historyId:"lively.morphic-text replace"}),yg.morph({type:"button",
styleClasses:["replace"],name:"replaceButton",label:"replace"}),yg.morph({type:"button",styleClasses:["replace"],name:"replaceAllButton",label:"replace all"})];yg.connect(this.get("searchInput"),"onBlur",this,"onBlur");yg.connect(this.get("replaceInput"),"onBlur",this,"onBlur")}},textMap:{after:["submorphs"]}}}}],e,{pathInPackage:function(){return"text/search.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:3796,end:20987})}(yg.Morph);yg.SearchWidget=SV;yg.SearchWidget=SV;yg.SearchWidget=SV;var LN=[{name:"search in text",exec:function(b,e){e=void 0===e?{backwards:!1}:e;b=b._searchWidget||(b._searchWidget=new yg.SearchWidget({target:b,extent:yg.pt(300,20)}));b.state.backwards=e.backwards;b.prepareForNewSearch();yg.config.codeEditor.search.showTextMap&&b.showTextMap();return!0}}];yg.searchCommands=LN;yg.searchCommands=LN;yg.searchCommands=
LN;var Im=lively.FreezerRuntime.recorderFor("lively.morphic/text/layout.js");Im.todo=function(b){throw Error("not yet implemented "+b);};Im.Rectangle=He;Im.rect=zm;Im.pt=xi;Im.arr=$f;Im.Range=Yy;var I9=function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/text/layout.js"),m=e.hasOwnProperty("TextLayout")&&"function"===typeof e.TextLayout?e.TextLayout:e.TextLayout=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};
return dc(m,b,[{key:Symbol.for("lively-instance-initialize"),value:function(){this.reset()}},{key:"reset",value:function(){this.resetLineCharBoundsCache()}},{key:"restore",value:function(a,g){var l=function(y){var A=0;return Im.arr.flatten(Im.arr.histogram(y,y.length/3).map(function(E){var F=$jscomp.makeIterator(E);E=F.next().value;var H=F.next().value;F=F.next().value;for(var I=[],M=0;M<E;M++)I.push(Im.rect(A,0,H,F)),A+=H;return I}))};a=$jscomp.makeIterator(a);for(var r=a.next();!r.done;r=a.next()){var v=
$jscomp.makeIterator(r.value);r=v.next().value;v=v.next().value;v=l(v);this.lineCharBoundsCache.set(g.document.getLine(r),v)}}},{key:"resetLineCharBoundsCache",value:function(a){this.lineCharBoundsCache=new WeakMap;a&&!a._isDeserializing&&(this.estimateLineHeights(a),a.makeDirty())}},{key:"resetLineCharBoundsCacheOfLine",value:function(a){a&&this.lineCharBoundsCache.set(a,null)}},{key:"resetLineCharBoundsCacheOfRow",value:function(a,g){var l=a.document;a._isDeserializing&&a._initializedByCachedBounds||
l&&this.resetLineCharBoundsCacheOfLine(l.getLine(g))}},{key:"resetLineCharBoundsCacheOfRange",value:function(a,g){for(var l=g.start.row;l<=g.end.row;l++)this.resetLineCharBoundsCacheOfRow(a,l)}},{key:"estimateLineHeightsInRange",value:function(a,g){for(var l=a.document,r=a.getGlobalTransform(),v=g.start.row;v<=g.end.row;v++)this.resetLineCharBoundsCacheOfRow(a,l.getLine(v),r)}},{key:"estimateExtentOfLine",value:function(a,g,l){l=void 0===l?a.getGlobalTransform():l;var r=a.fontMetric,v=a.lineWrapping,
y=a.padding,A=a.textRenderer,E=a.debug,F=a.defaultTextStyle,H=a.getProperty("extent").x,I=y.left(),M=y.right(),N=y.top();y=y.bottom();A=A.directRenderTextLayerFn(a);var W=g.textAndAttributes,X=[],ea;H=H-I-M;if(W&&W.length)for(var Aa=0,Ma=0;Aa<W.length;Aa+=2)(ea=W[Aa])&&ea.isMorph?(ea.position=this.pixelPositionFor(a,{row:g.row,column:Ma}).subPt(a.origin),Ma++):ea&&(Ma+=ea.length),X.push(Object.assign({},F,{},W[Aa+1]));else X.push(F);W=X.length;for(Aa=F=ea=0;Aa<W;Aa++){Ma=r.defaultCharExtent(a,{defaultTextStyle:X[Aa],
width:1E3,transform:l,paddingBottom:y,paddingTop:N,paddingRight:M,paddingLeft:I},A);var K=Ma.width;F=Math.max(Ma.height,F);ea+=K}a=F;l=g.text.length||1;r=Math.round(ea/W);I=l*r;I=v?Math.min(I,H):I;v&&(a=Math.round((Math.ceil(l/Math.max(3,H/r))||1)*F));E&&console.log(g.row+": "+g.height+" => "+a);g.changeExtent(I,a,!0)}},{key:"estimateLineHeights",value:function(a,g){var l=a.fontMetric,r=a.textRenderer,v=a.document,y=a.defaultTextStyle,A=a.clipMode,E=a.textAlign,F=a.padding,H=a.lineWrapping,I=a.debug,
M=a.getProperty("extent"),N=M.x,W=M.y;M=a.getGlobalTransform();var X=F.left(),ea=F.right(),Aa=F.top();F=F.bottom();v=v.lines;var Ma=r.directRenderTextLayerFn(a);I&&(I=a.debugHelper(I),I.debugTextLayout||(I=!1));if(!I&&10>a.lineCount()&&3E3>a.document.stringSize&&!Im.arr.any(a.textAndAttributes,function(K){return K&&void 0!=K.fontFamily}))for(g=r.directRenderLineFn(a),g=l.manuallyComputeBoundsOfLines(a,v,0,0,{defaultTextStyle:y,width:N,height:W,clipMode:A,lineWrapping:H,textAlign:E,transform:M,paddingLeft:X,
paddingRight:ea,paddingTop:Aa,paddingBottom:F},Ma,g),y=0;y<v.length;y++)I=g[y],v[y].changeExtent(I.width,I.height,!l.isFontSupported(a.fontFamily,a.fontWeight));else{for(y=l=0;y<v.length;y++)A=v[y],!g&&0<A.height||(l++,this.estimateExtentOfLine(a,A,M));a.viewState._textLayoutStale=!1;I&&I.log("estimateLineHeights, "+l+"/"+v.length+" updated, force: "+g)}}},{key:"defaultCharExtent",value:function(a){var g=a.textRenderer,l=a.fontMetric,r=a.defaultTextStyle,v=a.getGlobalTransform();g=g.directRenderTextLayerFn(a);
return l.defaultCharExtent(a,{transform:v,defaultTextStyle:r,width:1E3},g)}},{key:"textBounds",value:function(a){var g=a.document,l=a.padding,r=a.borderWidthLeft,v=a.borderWidthRight,y=a.borderWidthTop;a=a.borderWidthBottom;return new Im.Rectangle(l.left(),l.top(),Math.round(g.width+r+v),Math.round(g.height+y+a))}},{key:"isFirstLineVisible",value:function(a){return 0>=a.viewState.firstVisibleRow}},{key:"isLastLineVisible",value:function(a){return a.viewState.lastVisibleRow>=a.lineCount()-1}},{key:"isLineVisible",
value:function(a,g){return g>=a.viewState.firstVisibleRow&&g<=a.viewState.lastVisibleRow}},{key:"isLineFullyVisible",value:function(a,g){return g>=a.viewState.firstFullyVisibleRow&&g<=a.viewState.lastFullyVisibleRow}},{key:"whatsVisible",value:function(a){var g=a.viewState.firstVisibleRow,l=a.viewState.lastVisibleRow;return{lines:a.document.lines.slice(g,l),startRow:g,endRow:l}}},{key:"firstFullVisibleLine",value:function(a){return a.viewState.firstFullyVisibleRow}},{key:"lastFullVisibleLine",value:function(a){return a.viewState.lastFullyVisibleRow}},
{key:"screenLineRange",value:function(a,g,l){var r=g.row,v=g.column;v=Math.max(0,v);r=Math.min(a.lineCount()-1,Math.max(0,r));var y=this.charBoundsOfRow(a,r);v>y.length-1&&(v=y.length-1);for(var A=y[v],E=g=v,F=v+1;F<y.length&&!(y[F].y>A.y+A.height);F++)E=F;E===y.length-1&&E++;for(F=v-1;0<=F&&!(y[F].y<A.y+A.height);F--)g=F;l&&(a=a.getLine(r).slice(g,E).match(/^\s*/)[0].length,g+=a);return new Im.Range({start:{row:r,column:g},end:{row:r,column:E}})}},{key:"rangesOfWrappedLine",value:function(a,g){for(var l=
a.getLine(g).length,r=0,v=[];;){var y=this.screenLineRange(a,{row:g,column:r},!1);v.push(y);if(y.end.column>=l)break;var A=y.end.column+1;if(A>=l)break;if(A<=r)throw Error("should not happen "+y.end.column+" vs "+r);r=A}return v}},{key:"chunkAtPos",value:function(a,g){Im.todo("chunkAtPos")}},{key:"charBoundsOfRow",value:function(a,g){g=a.document.getLine(g);a._initializedByCachedBounds&&!this._restored&&(this.restore(a._initializedByCachedBounds,a),this._restored=!0);var l=this.lineCharBoundsCache.get(g);
if(l)return l;var r=a.getProperty("extent");l=r.x;r=r.y;var v=a.fontMetric,y=a.textRenderer,A=a.defaultTextStyle,E=a.clipMode,F=a.textAlign,H=a.padding,I=a.lineWrapping,M=a.getGlobalTransform(),N=H.left(),W=H.right(),X=H.top();H=H.bottom();var ea=y.directRenderLineFn(a);y=y.directRenderTextLayerFn(a);a=v.manuallyComputeCharBoundsOfLine(a,g,0,0,{defaultTextStyle:A,width:l,height:r,clipMode:E,lineWrapping:I,textAlign:F,paddingLeft:N,paddingRight:W,paddingTop:X,paddingBottom:H,transform:M},y,ea);if(a.find(function(Aa){return void 0==
Aa.width&&void 0==Aa.height}))return a;this.lineCharBoundsCache.set(g,a);return a}},{key:"computeMaxBoundsForLineSelection",value:function(a,g){var l=g.start,r=g.end,v=a.textLayout;r=a.lineWrapping?v.rangesOfWrappedLine(a,l.row).find(function(y){return y.containsPosition(l)}).intersect(g).end:r;r=r.row==l.row?r:{row:r.row,column:-1};g=v.charBoundsOfRow(a,l.row);g=0>r.column?g.slice(l.column):g.slice(l.column,r.column+1);r=l.column+(g?g.indexOf(Im.arr.max(g,function(y){return y.height})):0);return v.boundsFor(a,
{row:l.row,column:r})}},{key:"boundsFor",value:function(a,g){var l=g.row;g=g.column;g=Math.max(0,g);l=Math.min(a.lineCount()-1,Math.max(0,l));var r=this.charBoundsOfRow(a,l);if(0<r.length)if(g>=r.length){var v=r[r.length-1];v=new Im.Rectangle(v.x+v.width,v.y,0,v.height)}else v=Im.Rectangle.fromLiteral(r[g]);v||(console.warn("Cannot compute bounds for line "+l+"/"+g),v=new Im.Rectangle(0,0,0,0));g=a.document;a=a.padding;v.x+=a.left();v.y=v.y+g.computeVerticalOffsetOf(l)+a.top();return v}},{key:"pixelPositionFor",
value:function(a,g){return this.boundsFor(a,g).topLeft()}},{key:"textPositionFromPoint",value:function(a,g){var l=g.addPt(a.origin),r=l.x,v=l.y,y=a.document;l=a.padding;var A=l.left(),E=l.top();if(v>y.height+E)return y.endPosition;if(v<E)return{row:0,column:0};l=y.findLineByVerticalOffset(v-E);if(!l)return{row:0,column:0};var F=l.line.row;a=this.charBoundsOfRow(a,F);var H=a.length,I=a[0],M=a[H-1];l={row:F,column:0};r-=A;v-=E+y.computeVerticalOffsetOf(F);if(0===H||r<=I.x+Math.round(I.width/2)&&v>=
I.y&&v<=I.y+I.height)return l;if(r>M.x+Math.round(M.width/2)&&v>=M.y&&v<=M.y+M.height)return l.column=H,l;A=[];for(y=H-1;0<=y;y--)if(M=E=a[y],F=M.x,H=M.width,I=M.y,M=M.height,!(v<I||v>I+M)&&(A.push(E),r>=F+Math.round(H/2)))return l.column=1===A.length?y:y+1,l;if(A.length)return l.column=a.indexOf(Im.arr.last(A)),l;r=Infinity;v=-1;for(y=0;y<a.length;y++)A=a[y],A=g.distSquared(Im.pt(A.x+A.width/2,A.y+A.height/2)),A>=r||(r=A,v=y);l.column=v;return l}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"TextLayout"}}],
e,{pathInPackage:function(){return"text/layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:239,end:16757})}(void 0),Wqa=I9=Im.TextLayout;Im.default=I9;var Mf=lively.FreezerRuntime.recorderFor("lively.morphic/text/renderer.js");Mf.printViewState=function(b){var e=b.viewState,m=e.scrollTop,a=e.scrollHeight,g=e.textHeight,l=e.firstVisibleRow;
e=e.lastVisibleRow;var r=b.document.lines;console.log(b+" #"+b.id.slice(0,12)+"\nscroll: "+m+" + "+a+"\nlines: "+l+" - "+e+"\nvisible lines: "+(e-l)+"\nheight: "+g+", "+r.length+" lines")};Mf.installCSS=function(b){Mf.cssInstalled=!0;Mf.addOrChangeCSSDeclaration("new-text-css","\n\n    /* markers */\n\n    .newtext-marker-layer {\n      position: absolute;\n    }\n\n    /* selection / cursor */\n\n    .newtext-cursor {\n      z-index: 5;\n      pointer-events: none;\n      position: absolute;\n      background-color: black;\n    }\n\n    .hidden-cursor .newtext-cursor {\n      background-color: transparent !important;\n    }\n\n    .newtext-cursor.diminished {\n      background-color: gray;\n    }\n\n    .newtext-selection-layer {\n      position: absolute;\n    }\n\n    /*-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-*/\n    /* text layer / content */\n\n    .newtext-text-layer {\n      box-sizing: border-box;\n      position: absolute;\n      white-space: pre;\n      z-index: 0;\n      min-width: 100%;\n      pointer-events: none;\n    }\n\n    .newtext-before-filler {}\n\n    .newtext-text-layer.wrap-by-words {\n      white-space: pre-wrap;\n      overflow-wrap: break-word;\n      max-width: 100%;\n    }\n\n    .newtext-text-layer.only-wrap-by-words {\n      white-space: pre-wrap;\n      overflow-wrap: break-all;\n      max-width: 100%;\n    }\n\n    .newtext-text-layer.wrap-by-chars {\n      white-space: pre-wrap;\n      word-break: break-all;\n      max-width: 100%;\n    }\n\n    .newtext-text-layer.no-wrapping {\n    }\n\n    .newtext-text-layer a {\n       pointer-events: auto;\n    }\n\n    .newtext-text-layer.auto-width .line {\n      width: fit-content;\n    }\n\n    .newtext-text-layer .line {\n      -moz-border-radius: 0;\n      -webkit-border-radius: 0;\n      border-radius: 0;\n      border-width: 0;\n      background: transparent;\n      font-family: inherit;\n      font-size: inherit;\n      margin: 0;\n      word-wrap: normal;\n      line-height: inherit;\n      color: inherit;\n      position: relative;\n      overflow: visible;\n      -webkit-tap-highlight-color: transparent;\n      -webkit-font-variant-ligatures: contextual;\n      font-variant-ligatures: contextual;\n    }\n\n    .line > .Morph {\n      display: inline-block !important;\n      vertical-align: top !important;\n    }\n\n    blockquote {\n      margin: 0;\n      -webkit-margin-start: 0;\n      -webkit-margin-end: 0;\n    }\n\n    .newtext-text-layer blockquote {\n      margin-left: 2em;\n      margin-right: 2em;\n      border-left: 2px lightgray solid;\n      padding-left: 2%;\n    }\n\n    /* -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-*/\n    /* debug styling */\n\n    .debug-info {\n      position: absolute;\n      outline: 1px solid green;\n      pointer-events: none;\n      z-index: 4;\n      text-align: center;\n      font-family: monospace;\n      color: green;\n      background-color: white;\n      font-size: small;\n      vertical-align: baseline;\n    }\n\n    .debug-line {\n      position: absolute;\n      outline: 1px solid red;\n      pointer-events: none;\n      z-index: 4,\n      text-align: right;\n      font-family: monospace;\n      font-size: small;\n      vertical-align: baseline;\n      color: red;\n    }\n\n    .debug-char {\n      position: absolute;\n      outline: 1px solid orange;\n      pointer-events: none;\n      z-index: 3\n    }\n\n  ",
b.document)};Mf.extractHTMLFromTextMorph=rL;Mf.obj=Ag;Mf.arr=$f;Mf.num=Nm;Mf.pt=xi;Mf.Rectangle=He;Mf.vdom=XG;Mf.defaultAttributes=Qx;Mf.defaultStyle=Px;Mf.addOrChangeCSSDeclaration=Yr;Mf.hyperscriptFnForDocument=mM;Mf.objectReplacementChar="\ufffd";Mf.config=Dn;Mf.getSvgVertices=Ox;var MN=Mf.vdom;Mf.h=MN.h;Mf.create=MN.create;Mf.patch=MN.patch;Mf.diff=MN.diff;Mf.cssInstalled=!1;Mf.debug=!!Mf.config.onloadURLQuery["debug-text"];Mf.nextTick=function(b,e,m,a,g,l){for(;!g&&m<e.length;)g=b[e[m++]+"equestAnimationFrame"];
return g&&g.bind(b)||b.setImmediate||function(r){b.setTimeout(r,0)}}("undefined"!==typeof window?window:global,["r","webkitR","mozR","msR","oR"],0);(function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/text/renderer.js"),m=e.hasOwnProperty("AfterTextRenderHook")&&"function"===typeof e.AfterTextRenderHook?e.AfterTextRenderHook:e.AfterTextRenderHook=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return dc(m,
b,[{key:"reset",value:function(a){this.morph=a;this.needsRerender=this.called=!1}},{key:"updateLineHeightOfNode",value:function(a,g,l){if(0===g.height||g.hasEstimatedExtent){var r=a.getGlobalTransform().inverse();r.e=r.f=0;var v=1!=r.getScale()||0!=r.getRotation();v&&(l.style.transform=r.toString());var y=l.getBoundingClientRect();r=y.height;y=y.width;v&&(l.style.transform="");r&&y&&(g.height!==r||g.width!==y)&&a.fontMetric.isFontSupported(a.fontFamily,a.fontWeight)&&(g.changeExtent(y,r,!1),a.textLayout.resetLineCharBoundsCacheOfLine(g),
this.needsRerender=!0,a.viewState._needsFit=!0);if(g.textAndAttributes&&g.textAndAttributes.length)for(y=v=0;v<g.textAndAttributes.length;v+=2)(l=g.textAndAttributes[v])&&l.isMorph?(a._positioningSubmorph=l,l.position=a.textLayout.pixelPositionFor(a,{row:g.row,column:y}).subPt(a.origin),l._dirty=!1,a._positioningSubmorph=null,y++):l&&(y+=l.length);return r}return g.height}},{key:"updateExtentsOfLines",value:function(a){var g=this.morph,l=g.viewState,r=g.fontMetric;l.dom_nodes=[];l.dom_nodeFirstRow=
0;l.textWidth=a.scrollWidth;a=a.children;for(var v=0,y;v<a.length&&"line"!=a[v].className;)v++;if(v<a.length){y=a[v];var A=y.dataset;A=Number(A?A.row:y.getAttribute("data-row"));if("number"===typeof A&&!isNaN(A)){l.dom_nodeFirstRow=A;y=0;A=g.document.getLine(A);for(var E;v<a.length;v++){var F=a[v];l.dom_nodes.push(F);A&&(E||(E=A.hasEstimatedExtent),A.hasEstimatedExtent=E,y+=this.updateLineHeightOfNode(g,A,F),A.hasEstimatedExtent=!r.isFontSupported(g.fontFamily,g.fontWeight),A=A.nextLine())}this.needsRerender?
(g.fitIfNeeded(),g.makeDirty()):g._dirty=!!g.submorphs.find(function(H){return H.needsRerender()})}}}},{key:"hook",value:function(a,g,l){a&&a.parentNode&&(g=this.morph.viewState,g.text_layer_node=a,g.fontmetric_text_layer_node=null,this.called=!0,this.updateExtentsOfLines(a))}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"AfterTextRenderHook"}}],e,{pathInPackage:function(){return"text/renderer.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:4953,end:9059})})(void 0);var J9=function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/text/renderer.js"),m=e.hasOwnProperty("TextRenderer")&&"function"===typeof e.TextRenderer?e.TextRenderer:e.TextRenderer=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return dc(m,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){a?
Mf.cssInstalled||Mf.installCSS(a):console.warn("Text renderer initialized without domEnv. Depending on what you want to do you might have bad luck...!");this.domEnv=a}},{key:"directRenderLineFn",value:function(a){var g=this,l=a.viewState._renderLineFn;if(!l){var r=Mf.hyperscriptFnForDocument(this.domEnv.document);l=a.viewState._renderLineFn=function(v){return g.renderLine(r,null,a,v)}}return l}},{key:"directRenderTextLayerFn",value:function(a){var g=this,l=a.viewState._renderTextLayerFn;if(!l){var r=
Mf.hyperscriptFnForDocument(this.domEnv.document);l=a.viewState._renderTextLayerFn=function(v){return g.renderJustTextLayerNode(r,a,v,[])}}return l}},{key:"renderMorph",value:function(a,g){var l=[],r=a.selection;if(a.inMultiSelectMode()){r=r.selections;for(var v=0;v<r.length-1;v++)l.push.apply(l,$jscomp.arrayFromIterable(this.renderSelectionLayer(a,r[v],!0,2)));l.push.apply(l,$jscomp.arrayFromIterable(this.renderSelectionLayer(a,r[v],!1,4)))}else l=this.renderSelectionLayer(a,r,!1,1);r=this.renderTextLayer(a,
g);v=this.renderJustTextLayerNode(Mf.h,a,null,[]);var y=this.renderMarkerLayer(a,g),A=a.document.width>a.width?a.scrollbarOffset:Mf.pt(0,0);A=Mf.h("div",{className:"scrollLayer",style:Object.assign({position:"absolute",top:"0px"},a.viewState.fastScroll?{overflow:a.scrollActive?a.clipMode:"hidden"}:{},{width:a.width+"px",height:a.height+"px"})},[Mf.h("div",{style:{width:Math.max(a.document.width,a.width)+"px",height:Math.max(a.document.height,a.height)-A.y+"px"}})]);r.properties.className+=" actual";
r.properties.style.overflow="visible"===a.clipMode?"visible":"hidden";v.properties.className+=" font-measure";var E=a.embeddedMorphMap,F=E?a.submorphs.filter(function(H){return!E.has(H)}):a.submorphs;l=[].concat($jscomp.arrayFromIterable(l),[y,v,r,g.renderSelectedSubmorphs(a,F)]);return Mf.h("div",Object.assign({},Mf.defaultAttributes(a,g),{style:Object.assign({},Mf.defaultStyle(a),{},a.viewState.fastScroll?{overflow:"visible"==a.clipMode?"visible":"hidden"}:{},{"-moz-user-select":"none",cursor:"auto"===
a.nativeCursor?a.readOnly?"default":"text":a.nativeCursor})}),[A].concat($jscomp.arrayFromIterable(a.viewState.fastScroll?[Mf.h("div",{className:"scrollWrapper",style:{"pointer-events":"none",position:"absolute",width:"100%",height:"100%",transform:"translate(-"+a.scroll.x+"px, -"+a.scroll.y+"px)"}},l)]:l)))}},{key:"renderTextLayer",value:function(a,g){var l=this,r=a.debug?[].concat($jscomp.arrayFromIterable(this.renderDebugLayer(a)),$jscomp.arrayFromIterable(this.renderLines(Mf.h,g,a))):this.renderLines(Mf.h,
g,a);r=this.renderJustTextLayerNode(Mf.h,a,null,r);r.properties.style.position="absolute";var v=a.viewState.afterTextRenderHook||(a.viewState.afterTextRenderHook=new Mf.AfterTextRenderHook);v.reset(a);r.properties["after-text-render-hook"]=v;Mf.nextTick(function(){l.manuallyTriggerTextRenderHook(a,g)});return r}},{key:"manuallyTriggerTextRenderHook",value:function(a,g){var l=a.viewState.afterTextRenderHook;l&&!l.called&&((g=(g=g.getNodeForMorph(a))&&g.querySelector(".actual.newtext-text-layer"))&&
l.hook(g),a.ownerChain().every(function(r){return r.visible})&&a.fit())}},{key:"renderJustTextLayerNode",value:function(a,g,l,r){var v=g.padding,y=v.x,A=v.y,E=g.fixedWidth,F=g.fixedHeight,H=g.backgroundColor,I=g.fontColor,M=g.textAlign,N=g.fontSize,W=g.textDecoration,X=g.fontStyle,ea=g.fontWeight,Aa=g.fontFamily,Ma=g.lineHeight,K=g.wordSpacing,aa=g.letterSpacing,T=g.tabWidth,U=y+v.width;v=A+v.height;var pa=Math.max(g.document.height,g.height),fa="newtext-text-layer";switch(g.lineWrapping){case !0:case "by-words":fa+=
" wrap-by-words";break;case "only-by-words":fa+=" only-wrap-by-words";break;case "by-chars":fa+=" wrap-by-chars";break;case !1:fa+=" no-wrapping"}E||(fa+=" auto-width");F||(fa+=" auto-height");g={height:pa+"px"};0<y&&(g.paddingLeft=y+"px");0<U&&(g.paddingRight=U+"px");0<A&&(g.paddingTop=A+"px");0<v&&(g.paddingBottom=v+"px");aa&&(g.letterSpacing=aa);K&&(g.wordSpacing=K);Ma&&(g.lineHeight=Ma);Aa&&(g.fontFamily=Aa);ea&&(g.fontWeight=ea);X&&(g.fontStyle=X);W&&(g.textDecoration=W);N&&(g.fontSize=N+"px");
M&&(g.textAlign=M);I&&(g.color=String(I));H&&(g.backgroundColor=H);8!==T&&(g.tabSize=T);y={className:fa,style:g};g.overflow="hidden";l&&(A=l.clipMode,H=l.height,l=l.width,"number"===typeof l&&(g.width=l+"px"),"number"===typeof H&&(g.height=H+"px"),A&&(g.overflow=A));return a("div",y,r)}},{key:"renderLines",value:function(a,g,l){var r=l.height,v=l.scroll,y=l.padding.y,A=l.document,E=l.clipMode;g.getNodeForMorph(l);v=v.y;var F=A.rowCount-1,H=A.height,I="visible"!==E,M=A.findLineByVerticalOffset(I?Math.max(0,
I?v-y:0):0)||{row:0,y:0,offset:0,line:A.getLine(0)},N=M.line,W=M.offset;E=M.y;M=M.row;y=A.findLineByVerticalOffset(I?Math.min(H,v-y+r):H)||{row:F,offset:0,y:0,line:A.getLine(F)};A=y.line;var X=y.offset,ea=y.row;y=I?M:0;W=0===W?M:M+1;F=I?ea+1:F;I=A&&X!==A.height?ea-1:ea;this.maxVisibleLines=Math.max(this.maxVisibleLines||1,F-y+1);M=[];A=[];A.push(a("div.newtext-before-filler",{key:"filler",style:{height:E+"px"}}));for(X=0;X<this.maxVisibleLines&&(M.push(N),ea=this.renderLine(a,g,l,N),A.push(ea),ea.key=
N.row%this.maxVisibleLines,X++,N=N.nextLine(),N););Object.assign(l.viewState,{scrollTop:v,scrollHeight:r,scrollBottom:v+r,heightBefore:E,textHeight:H,firstVisibleRow:y,lastVisibleRow:F,firstFullyVisibleRow:W,lastFullyVisibleRow:I,visibleLines:M});l.debug&&Mf.printViewState(l);return A}},{key:"renderLine",value:function(a,g,l,r){var v=r.textAndAttributes,y=[],A=v.length,E=l.fontSize;if(0<A)for(var F=0;F<A;F+=2){var H=v[F]||"\u00a0";var I=v[F+1];if("string"!==typeof H)y.push(H.isMorph?this.renderEmbeddedSubmorph(a,
g,H,I):Mf.objectReplacementChar);else if(I){var M=I.fontSize&&(Mf.obj.isString(I.fontSize)?I.fontSize:I.fontSize+"px");var N=I.fontFamily;var W=I.fontWeight;var X=I.fontStyle;var ea=I.textDecoration;var Aa=I.fontColor;var Ma=I.backgroundColor;var K=I.nativeCursor;var aa=I.textStyleClasses;var T=I.link;var U=I.lineHeight||U;var pa=I.textAlign||pa;var fa=I.wordSpacing||fa;var oa=I.letterSpacing||oa;var gb=I.paddingRight;var zb=I.paddingLeft;var va=I.paddingTop;var ma=I.paddingBottom;var ta=I.verticalAlign;
var Na=I.textStroke;var Kb=I.quote||Kb;var kc="span";var Vb={};var jc={style:Vb};M&&I.fontSize<E&&(E=I.fontSize);T&&(kc="a",(jc.href=T)&&T.startsWith("http")&&(jc.target="_blank"));if(T||K)Vb.pointerEvents="auto";M&&(Vb.fontSize=M);N&&(Vb.fontFamily=N);W&&(Vb.fontWeight=W);X&&(Vb.fontStyle=X);ea&&(Vb.textDecoration=ea);Aa&&(Vb.color=String(Aa));Ma&&(Vb.backgroundColor=String(Ma));K&&(Vb.cursor=K);gb&&(Vb.paddingRight=gb);zb&&(Vb.paddingLeft=zb);va&&(Vb.paddingTop=va);ma&&(Vb.paddingBottom=ma);ta&&
(Vb.verticalAlign=ta);Na&&(Vb["-webkit-text-stroke"]=Na);I.doit&&(Vb.pointerEvents="auto",Vb.cursor="pointer");aa&&aa.length&&(jc.className=aa.join(" "));y.push(a(kc,jc,H))}else y.push(H)}else y.push(a("br"));g={};l.fontSize>E&&(g.fontSize=E+"px");U&&(g.lineHeight=U);pa&&(g.textAlign=pa);oa&&(g.letterSpacing=oa);fa&&(g.wordSpacing=fa);l=a("div",{className:"line",style:g,dataset:{row:r.row}},y);if(Kb)for("number"!==typeof Kb&&(Kb=1);Kb--;)l=a("blockquote",{},l);return l}},{key:"renderEmbeddedSubmorph",
value:function(a,g,l,r){r=r||{};if(g)return a=g.render(l),a.properties.style.position="relative",a.properties.style.transform="",a.properties.style.textAlign="initial",r.paddingTop&&(a.properties.style.marginTop=r.paddingTop),r.paddingLeft&&(a.properties.style.marginLeft=r.paddingLeft),r.paddingRight&&(a.properties.style.marginRight=r.paddingRight),r.paddingBottom&&(a.properties.style.marginBottom=r.paddingBottom),a;g=l.extent;r=g.x+"px";g=g.y+"px";return a("div",{className:l.styleClasses.join(" "),
style:{width:r,height:g}},[])}},{key:"renderSelectionLayer",value:function(a,g,l,r){l=void 0===l?!1:l;r=void 0===r?2:r;if(!g)return[];var v=a.textLayout,y=g.start,A=g.end,E=g.cursorVisible,F=g.selectionColor,H=a.document,I=a.cursorColor,M=g.isReverse();y=v.boundsFor(a,y);var N=v.computeMaxBoundsForLineSelection(a,g),W=v.boundsFor(a,A);Mf.pt(y.x,N.y);N=Mf.pt(W.x,W.y);A=y.height;W=W.height;y=M?Mf.pt(y.x,y.y):N;l=this.cursor(y,M?A:W,E,l,r,I);if(g.isEmpty())return[l];r=[];E=g.start.row;I=H.computeVerticalOffsetOf(E)+
a.padding.top();M=a.padding.left();for(var X,ea,Aa;E<=g.end.row;){A=H.getLine(E);if(!(E<a.viewState.firstVisibleRow-50)){if(E>a.viewState.lastVisibleRow+50)break;y=v.charBoundsOfRow(a,E).map(Mf.Rectangle.fromLiteral);W=E==g.start.row;if(Aa=y[0].bottom()<Mf.arr.last(y).top()){N=v.rangesOfWrappedLine(a,E).map(function(T){return T.intersect(g)});ea=W;var Ma=0,K=X=void 0,aa=$jscomp.makeIterator(N);for(N=aa.next();!N.done;N=aa.next())N=N.value,N.isEmpty()||(X=y.slice(N.start.column,N.end.column),Ma=ea?
Mf.arr.min(X.map(function(T){return T.top()})):Ma,K=Mf.arr.max(X.map(function(T){return T.bottom()})),ea=X[0],N=Mf.pt(M+ea.left(),I+Ma),ea=Mf.arr.last(X),X=Mf.pt(M+ea.right(),I+K),Ma=K,ea=!1,r.push(Mf.Rectangle.fromAny(N,X)))}Aa||(Aa=E==g.end.row,N=W?g.start.column:0,Ma=Aa?g.end.column:y.length-1,W=W&&Mf.arr.min(y.slice(N,Ma+1).map(function(T){return T.top()}))||0,aa=N>=Ma?5:0,ea=y[N],N=Mf.pt(M+(ea?ea.left():Mf.arr.last(y).right()),I+W),ea=y[Ma],g.includingLineEnd?X=Mf.pt(a.width-a.padding.right(),
I+W+A.height):(Aa=Aa&&g.end.column<=y.length-1,X=Mf.pt(M+(ea?Aa?ea.left():ea.right():Mf.arr.last(y).right())+aa,I+W+A.height)),r.push(Mf.Rectangle.fromAny(N,X)))}I+=A.height;E++}a=this.selectionLayerRounded(r,F,a);a.push(l);return a}},{key:"selectionLayerRounded",value:function(a,g,l){var r=[l={left:[],right:[]}];a=$jscomp.makeIterator(a);for(var v=a.next();!v.done;v=a.next()){v=v.value;y&&(y.left()>v.right()||y.right()<v.left())&&r.push(l={left:[],right:[]});l.left.push(v.topLeft(),v.bottomLeft());
l.right.push(v.topRight(),v.bottomRight());var y=v}y=[];l={};r=$jscomp.makeIterator(r);for(a=r.next();!a.done;l={$jscomp$loop$prop$pos$2233:l.$jscomp$loop$prop$pos$2233},a=r.next())if(a=a.value,a.left.length){l.$jscomp$loop$prop$pos$2233=a.left.reduce(function(M,N){return M.minPt(N)});v=a.left.concat(a.right.reverse());a=[];for(var A=0;A<v.length;A++){var E=v[A-1]||Mf.arr.last(v),F=v[A],H=v[A+1]||Mf.arr.first(v),I=E.subPt(F).normalized().scaleBy(6);E=F.addPt(I);E._next=I.scaleBy(-1);H=H.subPt(F).normalized().scaleBy(6);
F=F.addPt(H);F._prev=H.scaleBy(-1);a.push(E,F)}a=a.map(function(M){return function(N){return{position:N.subPt(M.$jscomp$loop$prop$pos$2233),isSmooth:!0,controlPoints:{next:N._next||Mf.pt(0),previous:N._prev||Mf.pt(0)}}}}(l));v=Mf.getSvgVertices(a);F=a.map(function(M){return M.position}).reduce(function(M,N){return M.minPt(N)});A=F.y;F=F.x;a=a.map(function(M){return M.position}).reduce(function(M,N){return M.maxPt(N)});y.push(Mf.h("svg",{namespace:"http://www.w3.org/2000/svg",version:"1.1",style:{position:"absolute",
left:l.$jscomp$loop$prop$pos$2233.x+"px",top:l.$jscomp$loop$prop$pos$2233.y+"px",width:a.x-F,height:a.y-A}},Mf.h("path",{namespace:"http://www.w3.org/2000/svg",attributes:{d:v,fill:g.toString()}})))}return y}},{key:"cursor",value:function(a,g,l,r,v,y){return Mf.h("div",{className:"newtext-cursor"+(r?" diminished":""),style:{left:a.x-Math.ceil(v/2)+"px",top:a.y+"px",width:v+"px",height:g+"px",display:l?"":"none",background:y||"black"}})}},{key:"renderMarkerLayer",value:function(a){var g=a.markers,
l=a.textLayout,r=a.viewState,v=r.firstVisibleRow;r=r.lastVisibleRow;var y=[];if(!g)return y;g=$jscomp.makeIterator(g);for(var A=g.next();!A.done;A=g.next()){var E=A.value;A=E.style;E=E.range;var F=E.start;E=E.end;if(!(E.row<v||F.row>r))if(F.row===E.row)y.push(this.renderMarkerPart(l,a,F,E,A));else{y.push(this.renderMarkerPart(l,a,F,a.lineRange(F.row).end,A));for(F=F.row+1;F<=E.row-1;F++){var H=a.lineRange(F);y.push(this.renderMarkerPart(l,a,H.start,H.end,A,!0))}y.push(this.renderMarkerPart(l,a,{row:E.row,
column:0},E,A))}}return y}},{key:"renderMarkerPart",value:function(a,g,l,r,v,y){y=void 0===y?!1:y;var A=g.document;var E=A.getLine(l.row);y?(a=g.padding,y=a.left(),l=a.top()+A.computeVerticalOffsetOf(l.row),a=y+E.width,E=E.height):(E=a.boundsFor(g,l),y=E.x,l=E.y,E=a.boundsFor(g,r),a=E.x,E=E.height);E=Math.ceil(E);return Mf.h("div.newtext-marker-layer",{style:Object.assign({},v,{left:y+"px",top:l+"px",height:E+"px",width:a-y+"px"})})}},{key:"renderDebugLayer",value:function(a){var g=[],l=a.viewState,
r=l.heightBefore,v=l.firstVisibleRow,y=l.lastVisibleRow;l=l.visibleLines;var A=a.padding,E=a.scroll,F=E.x,H=E.y;E=A.left();var I=A.right(),M=A.top();A.bottom();g.push(Mf.h("div.debug-info",{style:{left:F+E+"px",top:H+"px",width:a.width-I+"px"}},Mf.h("span","visible rows: "+v+" - "+y)));for(A=0;v<y;A++,v++){var N=l[A];H=a.textLayout.lineCharBoundsCache.get(N);N=N.height;g.push(Mf.h("div.debug-line",{style:{left:F+E+"px",top:M+r+"px",width:a.width-I+"px",height:N+"px"}},Mf.h("span",String(v))));if(H)for(var W=
0;W<H.length;W++){var X=H[W];g.push(Mf.h("div.debug-char",{style:{left:E+X.x+"px",top:M+r+X.y+"px",width:X.width+"px",height:X.height+"px"}}))}r+=N}return g}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"TextRenderer"}}],e,{pathInPackage:function(){return"text/renderer.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},
{start:9076,end:36350})}(void 0),Xqa=J9=Mf.TextRenderer;Mf.extractHTMLFromTextMorph=rL;Mf.extractHTMLFromTextMorph=rL;Mf.default=J9;var xr=lively.FreezerRuntime.recorderFor("lively.morphic/text/iy-goto-char.js");xr.arr=$f;xr.eqPosition=nv;xr.KeyHandler=lU;xr.commands={activate:{name:"[IyGotoChar] activate",exec:function(b,e){e=void 0===e?{backwards:!1}:e;xr.IyGotoCharKeyHandler.installInto(b,e.backwards);return!0}},moveTo:{name:"[IyGotoChar] move to",exec:function(b,e){b.saveMark();var m=b.selection,
a=m.lead,g=a.row,l=a.column;a=!!b.activeMark||!m.isEmpty();var r={row:g,column:l-1};b=b.document[e.backwards?"scanBackward":"scanForward"](r,function(v,y){return v!==e.needle||xr.eqPosition(r,y)?null:y});if(!b)return!0;b.column++;m.lead=b;a||(m.anchor=b);return!0},multiSelectAction:"forEach",readOnly:!0}};var NN=xr.commands.activate;xr.activate=NN;xr.activate=NN;xr.activate=NN;(function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/text/iy-goto-char.js"),m=e.hasOwnProperty("IyGotoCharKeyHandler")&&
"function"===typeof e.IyGotoCharKeyHandler?e.IyGotoCharKeyHandler:e.IyGotoCharKeyHandler=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return dc(m,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){a=void 0===a?!1:a;dc._get(Object.getPrototypeOf(m.prototype),Symbol.for("lively-instance-initialize"),this).call(this);this.charToFind=void 0;this.backwards=a}},{key:"isIyGoToChar",get:function(){return!0}},
{key:"uninstallFrom",value:function(a){a._cachedKeyhandlers=null;xr.arr.remove(a._keyhandlers||[],this)}},{key:"eventCommandLookup",value:function(a,g){var l=g.keyCombo,r=l.startsWith("input-");if(g.onlyModifiers||l.startsWith("Shift-")||!r&&!g.isModified&&!g.isFunctionKey)return{command:"null",passEvent:!0};g=r&&l.slice(6);if(!this.charToFind)if(r)this.charToFind=g;else return this.uninstallFrom(a),null;return g!==this.charToFind?(this.uninstallFrom(a),null):{command:xr.commands.moveTo,args:{backwards:this.backwards,
needle:g}}}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"IyGotoCharKeyHandler"}},{key:"installInto",value:function(a,g){g=void 0===g?!1:g;a.keyhandlers.filter(function(l){return l.isIyGoToChar}).forEach(function(l){return l.uninstallFrom(a)});a._cachedKeyhandlers=null;a._keyhandlers=(a._keyhandlers||[]).concat(new this(g))}}],e,{pathInPackage:function(){return"text/iy-goto-char.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:1049,end:3032})})(xr.KeyHandler);var Di=lively.FreezerRuntime.recorderFor("lively.morphic/text/commands.js");Di.chain=ym;Di.arr=$f;Di.string=pi;Di.date=yu;Di.pt=xi;Di.Range=Yy;Di.eqPosition=nv;Di.commands=[{name:"clipboard copy",doc:"placeholder for native copy",scrollCursorIntoView:!1,exec:function(b){b.selection.isEmpty()&&b.selectLine(b.cursorPosition.row);return!0}},{name:"manual clipboard copy",doc:"attempts to copy selection via browser interface",
scrollCursorIntoView:!1,multiSelectAction:"single",exec:function(b,e){e=void 0===e?{collapseSelection:!0,delete:!1,dontTryNativeClipboard:!1}:e;var m=b.selection,a=m.text,g=e.hasOwnProperty("collapseSelection")?e.collapseSelection:!0;b.saveMark(m.anchor);b.activeMark=null;(m.isMultiSelection?m.selections.slice():[m]).forEach(function(l){var r=l.isEmpty()?b.lineRange():l.range,v=b.textInRange(r);b.env.eventDispatcher.killRing.add(v);e["delete"]?b.deleteText(r):!l.isEmpty()&&g&&l.collapse(l.lead)});
e.dontTryNativeClipboard||b.env.eventDispatcher.doCopy(a);return!0}},{name:"clipboard cut",doc:"placeholder for native cut",exec:function(b){b.selection.isEmpty()&&b.selectLine(b.cursorPosition.row,!0);return!0}},{name:"clipboard paste",doc:"placeholder for native paste",exec:function(){return!0}},{name:"manual clipboard paste",doc:"attempts to paste from the clipboard to lively \u2013 currently requires browser extension!",multiSelectAction:"single",exec:function(b,e){e=void 0===e?{killRingCycleBack:!1}:
e;var m,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(g){a=b.env.eventDispatcher.killRing;e.killRingCycleBack&&(Di.arr.last(Di.arr.pluck(b.commandHandler.history,"name"))||"").includes("clipboard paste")&&(m=a.back());!m&&a.isCycling()&&(m=a.yank());m||(m=a.yank());b.selection.isMultiSelection?(b.undoManager.group(),b.selection.selections.slice(0,-1).reverse().map(function(l,r){r=a.pointer-1-r;0>r&&(r=a.buffer.length-1);return{selection:l,pasted:a.buffer[r]||""}}).concat({selection:b.selection.defaultSelection,
pasted:m}).forEach(function(l){return l.selection.text=l.pasted}),b.undoManager.group()):m&&(b.undoManager.group(),b.selection.text=m,b.undoManager.group());return g.return(!0)})}},{name:"browse clipboard",exec:function(b){var e,m,a,g,l,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){if(1==v.nextAddress)return e=b.env.eventDispatcher.killRing,m=e.pointer,a=e.buffer,g=a.map(function(y){return{isListItem:!0,string:Di.string.truncate(y,80).replace(/\n/g,""),value:y}}),v.yield(b.world().filterableListPrompt("select items to paste",
g,{preselect:m,multiSelect:!0}),2);l=v.yieldResult;r=l.selected;r.length&&(b.undoManager.group(),b.insertTextAndSelect(r.join("\n")),b.undoManager.group());return v.return(!0)})}},{name:"text undo",doc:"undo text changes",multiSelectAction:"single",exec:function(b){b.textUndo();return!0}},{name:"text redo",doc:"redo text changes",multiSelectAction:"single",exec:function(b){b.textRedo();return!0}},{name:"select all",doc:"Selects entire text contents.",scrollCursorIntoView:!1,multiSelectAction:"single",
exec:function(b){b.saveMark();b.selectAll();return!0}},{name:"delete backwards",doc:"Delete the character in front of the cursor or the selection.",exec:function(b){if(b.rejectsInput())return!1;if(b.editorPlugin&&"function"===typeof b.editorPlugin.cmd_newline&&b.editorPlugin.cmd_delete_backwards())return!0;var e=b.selection;e.isEmpty()&&e.growLeft(1);e.text="";e.collapse();b.activeMark&&(b.activeMark=null);return!0}},{name:"delete",doc:"Delete the character following the cursor or the selection.",
exec:function(b){var e=b.selection;if(b.rejectsInput())return!1;e.isEmpty()&&e.growRight(1);e.text="";e.collapse();b.activeMark&&(b.activeMark=null);return!0}},{name:"indent",scrollCursorIntoView:!1,exec:function(b){b.undoManager.group();b.withSelectedLinesDo(function(e,m){return b.insertText(b.tab,m.start)});b.undoManager.group();return!0}},{name:"outdent",scrollCursorIntoView:!1,exec:function(b){b.undoManager.group();b.withSelectedLinesDo(function(e,m){return e.startsWith(b.tab)&&b.deleteText({start:m.start,
end:{row:m.start.row,column:b.tab.length}})});b.undoManager.group();return!0}},{name:"indent according to mode",exec:function(b,e){e=void 0===e?{}:e;var m,a,g,l,r,v,y,A;return $jscomp.asyncExecutePromiseGeneratorProgram(function(E){if(1==E.nextAddress){m=b.editorPlugin&&b.editorPlugin.mode;if(!m)return E.return(!0);l=e.hasOwnProperty("undo")?e.undo:!0;e.hasOwnProperty("firstRow")&&e.hasOwnProperty("lastRow")?(r=e,a=r.firstRow,g=r.lastRow):b.selection.isEmpty()?a=g=b.cursorPosition.row:(v=b.selection.selectedRows,
a=v.first,g=v.last);return E.yield(System.import("lively.ide/editor-modes.js"),2)}y=E.yieldResult;A=y.indentLines;l&&b.undoManager.group();A(b,m,a,g,"smart",!0,e);l&&b.undoManager.group();return E.return(!0)})}},{name:"tab - snippet expand or indent",scrollCursorIntoView:!0,exec:function(b){var e=b.snippets.find(function(m){return m.canExpand(b)});return e?(e.expandAtCursor(b),!0):b.selection.isEmpty()?b.execCommand("insertstring",{string:b.tab}):b.execCommand("indent according to mode")}},{name:"browse snippets",
scrollCursorIntoView:!0,exec:function(b){var e,m,a,g;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){if(1==l.nextAddress)return e=b.snippets.map(function(r){return{isListItem:!0,string:r.trigger+" - "+r.expansion,value:r}}),l.yield(b.world().filterableListPrompt("select snippet",e,{requester:b}),2);m=l.yieldResult;a=$jscomp.makeIterator(m.selected);(g=a.next().value)&&g.expandAtCursor(b);return l.return(!0)})}},{name:"transpose chars",exec:function(b){if(b.selection.isEmpty()){var e=
b.cursorPosition,m=e.row,a=e.column;e=Di.Range.create(m,a-1,m,a+1);var g=b.getLine(m);m=g[a-1];a=g[a];m&&a&&b.replace(e,a+m,!0)}return!0}},{name:"cycle selection contents",documentation:"If there are multiple selections, will take the text of the first one and replace the second one with it, the text of the second will replace the third, the last selection contents will replace the contents of the first.",multiSelectAction:"single",exec:function(b){var e=b.selection.selections;b.undoManager.group();
e.reduce(function(m,a){var g=a.text;a.text=m;return g},Di.arr.last(e).text);b.undoManager.group();return!0}},{name:"go left",doc:"Move the cursor 1 character left. At the beginning of a line move the cursor up. If a selection is active, collapse the selection left.",exec:function(b){b.activeMark?b.selection.selectLeft(1):b.selection.goLeft(1);return!0}},{name:"go right",doc:"Move the cursor 1 character right. At the end of a line move the cursor down. If a selection is active, collapse the selection right.",
exec:function(b){b.activeMark?b.selection.selectRight(1):b.selection.goRight(1);return!0}},{name:"go up",doc:"Move the cursor 1 line. At the end of a line move the cursor down. If a selection is active, collapse the selection right.",scrollCursorIntoView:!0,exec:function(b){b.activeMark?b.selection.selectUp(1):b.selection.goUp(1,!0);return!0}},{name:"go down",exec:function(b){b.activeMark?b.selection.selectDown(1):b.selection.goDown(1,!0);return!0}},{name:"select left",exec:function(b){b.selection.selectLeft(1);
return!0}},{name:"select right",exec:function(b){b.selection.selectRight(1);return!0}},{name:"select up",exec:function(b){b.selection.selectUp(1,!0);return!0}},{name:"select down",exec:function(b){b.selection.selectDown(1,!0);return!0}},{name:"select line",exec:function(b){var e=b.selection,m=e.lead.row,a=b.lineRange(m,!1);e.range=e.range.equals(a)?b.lineRange(m,!0):a;return!0}},{name:"goto line start",exec:function(b,e){e=void 0===e?{select:!1}:e;e=e.select||!!b.activeMark;var m=b.selection,a=m.lead;
b=b.screenLineRange(a,!0);m.lead=Di.eqPosition(a,b.start)?{column:0,row:a.row}:b.start;!e&&(m.anchor=m.lead);return!0}},{name:"goto line end",exec:function(b,e){e=void 0===e?{select:!1}:e;e=e.select||!!b.activeMark;var m=b.selection;b=b.screenLineRange(m.lead,!0);m.lead=b.end;!e&&(m.anchor=m.lead);return!0}},{name:"goto page up",exec:function(b){b.pageUpOrDown({direction:"up",select:!!b.activeMark});return!0}},{name:"goto page down",exec:function(b){b.pageUpOrDown({direction:"down",select:!!b.activeMark});
return!0}},{name:"goto page up and select",exec:function(b){b.pageUpOrDown({direction:"up",select:!0});return!0}},{name:"goto page down and select",exec:function(b){b.pageUpOrDown({direction:"down",select:!0});return!0}},{name:"goto start",exec:function(b,e){e=void 0===e?{select:!!b.activeMark}:e;b.gotoDocumentStart(Object.assign({},e));return!0}},{name:"goto end",exec:function(b,e){e=void 0===e?{select:!!b.activeMark}:e;b.gotoDocumentEnd(Object.assign({},e));return!0}},{name:"goto paragraph above",
exec:function(b,e){e=void 0===e?{select:!!b.activeMark}:e;var m=b.paragraphRangeAbove(b.cursorPosition.row);m.start.row--;b.selection.lead=m.start;e.select||b.collapseSelection();return!0}},{name:"goto paragraph below",exec:function(b,e){e=void 0===e?{select:!!b.activeMark}:e;var m=b.paragraphRangeBelow(b.cursorPosition.row);m.end.row++;b.selection.lead=m.end;e.select||b.collapseSelection();return!0}},{name:"move cursor to screen bottom in 1/3 steps",readOnly:!0,exec:function(b){var e=!!b.activeMark,
m=b.cursorPosition,a=b.textLayout.firstFullVisibleLine(b),g=b.textLayout.lastFullVisibleLine(b),l=a+Math.floor((g-a)/2);if(m.row<a)m.row=a;else if(m.row<l)m.row=l;else if(m.row<g)m.row=g;else return!0;b.selection.lead=m;e||(b.selection.anchor=b.selection.lead);return!0}},{name:"move cursor to screen top in 1/3 steps",readOnly:!0,exec:function(b){var e=!!b.activeMark,m=b.cursorPosition,a=b.textLayout.firstFullVisibleLine(b),g=b.textLayout.lastFullVisibleLine(b),l=a+Math.floor((g-a)/2);if(m.row<=a)return!0;
m.row=m.row<=l?a:m.row<=g?l:g;b.selection.lead=m;e||(b.selection.anchor=b.selection.lead);return!0}},{name:"goto line",exec:function(b){var e,m,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(g){if(1==g.nextAddress)return e=!!b.activeMark,m=Number,g.yield(b.world().prompt("Enter line number"),2);a=m(g.yieldResult);isNaN(a)||(e?b.selection.lead={row:a,column:0}:b.cursorPosition={row:a,column:0},b.scrollCursorIntoView(),b.focus());return g.return(!0)})}},{name:"join line",exec:function(b,
e){e=void 0===e?{withLine:"before"}:e;var m=b.selection,a=m.start,g=m.end;m=m.lead;if(!b.selection.isEmpty()){if(a.row===g.row)return!0;e=b.undoManager.ensureNewGroup(b,"join line");g=Di.arr.range(0,g.row-1-a.row).map(function(l){return b.joinLine(a.row)});b.undoManager.group(e);b.selection.isMultiSelection&&(b.cursorPosition=g[0],g.slice(1).forEach(function(l){return b.selection.addRange({start:l,end:l})}));return!0}g=m.row;if("before"===e.withLine&&0>=g||"after"===e.withLine&&g>=b.document.endPosition.row)return!0;
b.undoManager.group();b.cursorPosition=b.joinLine("before"===e.withLine?g-1:g);b.undoManager.group();return!0}},{name:"split line",exec:function(b){var e=b.cursorPosition,m=b.getLine(e.row).match(/^\s*/)[0].length;b.insertText("\n"+" ".repeat(m),e);b.cursorPosition=e;return!0}},{name:"insert line",exec:function(b,e){e=void 0===e?{where:"above"}:e;var m=b.cursorPosition.row,a=b.getLine(m).match(/^\s*/)[0].length;"below"===e.where&&m++;b.insertText(" ".repeat(a)+"\n",{column:0,row:m});b.cursorPosition=
{column:a,row:m};return!0}},{name:"duplicate line or selection",exec:function(b){b.undoManager.group();var e=b.selection.end;if(b.selection.isEmpty())b.insertText(b.getLine(e.row)+"\n",{column:0,row:e.row+1});else{var m=b.selection.range;b.insertText(b.selection.text,e);b.selection=m}b.undoManager.group();return!0}},{name:"delete emtpy line or until end of line",exec:function(b){var e=b.cursorPosition,m=b.getLine(e.row);if(Di.eqPosition(b.document.endPosition,e))return!0;e=m.trim()?{start:e,end:{row:e.row,
column:m.length}}:{start:{row:e.row,column:0},end:{row:e.row+1,column:0}};b.env.eventDispatcher.doCopy(b.textInRange(e));b.undoManager.group();b.deleteText(e);b.undoManager.group();return!0}},{name:"delete left until beginning of line",exec:function(b){b.activeMark&&(b.activeMark=null);if(!b.selection.isEmpty())return b.selection.text="",!0;var e=b.lineRange(),m=b.cursorPosition;if(Di.eqPosition({row:m.row,column:0},m))return!0;e={start:Di.eqPosition(e.start,m)?{row:m.row,column:0}:e.start,end:m};
b.deleteText(e);return!0}},{name:"move lines up",multiSelectAction:"single",exec:function(b){var e=b.selection;if(b.inMultiSelectMode()){var m=e.selections.map(function(l){return l.range});m.slice().sort(Di.Range.compare).forEach(function(l){b.selection=l;b.execCommand("move lines up")});m.forEach(function(l){l.start.row--;l.end.row--});b.selection.ranges=m;return!0}e.isEmpty()||0!==e.end.column||e.growRight(-1);m=e.start;e=e.end;var a=b.getLine(m.row-1),g=b.undoManager.ensureNewGroup(b);b.insertText(a+
"\n",{row:e.row+1,column:0});b.deleteText({start:{row:m.row-1,column:0},end:{row:m.row,column:0}});b.undoManager.group(g);return!0}},{name:"move lines down",multiSelectAction:"single",exec:function(b){var e=b.selection;if(b.inMultiSelectMode()){var m=e.selections.map(function(l){return l.range});m.slice().sort(Di.Range.compare).reverse().forEach(function(l){b.selection=l;b.execCommand("move lines down")});m.forEach(function(l){l.start.row++;l.end.row++});b.selection.ranges=m;return!0}e.isEmpty()||
0!==e.end.column||e.growRight(-1);var a=e.range,g=a;m=g.start;g=g.end;e.isEmpty()?a={start:{row:m.row,column:0},end:{row:m.row+1,column:0}}:0!==g.column&&(a={start:m,end:{row:g.row+1,column:0}});e=b.undoManager.ensureNewGroup(b);a=b.deleteText(a);b.insertText(a,{row:m.row+1,column:0});b.undoManager.group(e);b.selection={start:Object.assign({},m,{row:m.row+1}),end:Object.assign({},g,{row:g.row+1})};return!0}},{name:"old select word",exec:function(b){var e=b.selection;e.range=b.wordAt(e.lead).range;
return!0}},{name:"select word",exec:function(b){var e=b.selection;if(b=b.selectMatchingBrackets(b.textString,b.positionToIndex(e.lead)))e.range={start:b[0],end:b[1]+1};return!0}},{name:"select word right",exec:function(b){var e=b.selection;e.anchor=b.wordRight(e.end).range.end;return!0}},{name:"goto word left",exec:function(b,e){e=void 0===e?{select:!1}:e;e=e.select||!!b.activeMark;var m=b.wordLeft().range;b.selection.lead=m.start;e||(b.selection.anchor=m.start);return!0}},{name:"goto word right",
exec:function(b,e){e=void 0===e?{select:!1}:e;e=e.select||!!b.activeMark;var m=b.wordRight().range;b.selection.lead=m.end;e||(b.selection.anchor=m.end);return!0}},{name:"delete word right",exec:function(b){b.undoManager.group();var e=b.wordRight().range.end;e={start:b.cursorPosition,end:e};b.env.eventDispatcher.doCopy(b.textInRange(e));b.deleteText(e);b.undoManager.group();return!0}},{name:"delete word left",exec:function(b){b.undoManager.group();var e={start:b.wordLeft().range.start,end:b.cursorPosition};
b.deleteText(e);b.undoManager.group();return!0}},{name:"goto matching right",exec:function(b,e){e=void 0===e?{select:!!b.activeMark}:e;var m=e.pairs||{"{":"}","[":"]","(":")","<":">"};if(m=b.findMatchingForward(b.cursorPosition,"right",m)||b.findMatchingForward(b.cursorPosition,"left",m))b.selection.lead=m,e.select||(b.selection.anchor=b.selection.lead);return!0}},{name:"goto matching left",exec:function(b,e){e=void 0===e?{select:!!b.activeMark}:e;var m=e.pairs||{"}":"{","]":"[",")":"(",">":"<"};
if(m=b.findMatchingBackward(b.cursorPosition,"left",m)||b.findMatchingBackward(b.cursorPosition,"right",m))b.selection.lead=m,e.select||(b.selection.anchor=b.selection.lead);return!0}},{name:"realign top-bottom-center",doc:"Cycles through centering the cursor position, aligning it at the top, aligning it at the bottom.",scrollCursorIntoView:!1,multiSelectAction:"single",exec:function(b){var e=b.charBoundsFromTextPosition(b.cursorPosition),m=e.topLeft();e=b.height-e.height;var a=b.scroll,g=a.x;a=a.y;
a=2>Math.abs(m.y-a)?m.y-e:2>Math.abs(m.y-a-.5*e)?m.y:m.y-.5*e;b.scroll=Di.pt(g,a);return!0}},{name:"reverse selection",doc:"switches the selection lead and anchor",exec:function(b){var e=b.selection;if(e.isEmpty()){var m=b.popSavedMark();m&&(b.saveMark(b.cursorPosition),e.lead=m.position)}else e.reverse();return!0}},{name:"toggle active mark",doc:"....",handlesCount:!0,multiSelectAction:"single",exec:function(b,e,m){var a=b.activeMark;e=b.selection;var g=!e.isEmpty();if(4===m){if(b=b.popSavedMark())e.lead=
b.position,g||(e.anchor=e.lead);return!0}if(!a&&!g)return b.activeMark=e.lead,!0;b.saveMark(a||e.anchor);b.activeMark=null;g&&(b.inMultiSelectMode()?e.selections:[e]).forEach(function(l){return l.anchor=l.lead});return!0}},{name:"fit text to column",handlesCount:!0,multiSelectAction:"forEach",exec:function(b,e,m){function a(y,A,E){if(y.length<=g)return[A+y.trim()];E=y.slice(0,g);var F=Di.arr.last(Di.string.reMatches(E,r)),H=F&&0<F.start?F.start:g;F=E.slice(0,H);y=A+(E.slice(H)+y.slice(g)).trimLeft();
return[F].concat(a(y,A))}if(4===m)return b.execCommand("join line");b.selection.isEmpty()&&b.selectLine();e=b.selection;var g=m||80,l=e.selectedRows;m=e.range;var r=/[ ]+/g,v=/^[\s\t]+/;e=Di.string.paragraphs(Di.arr.range(l.first,l.last).map(function(y){return b.getLine(y)}).join("\n"),{keepEmptyLines:!0});e=Di.chain(e.map(function(y){if(!/^\s*$/.test(y)){y=y.split("\n").join(" ");if(""===y.trim())y=[""];else{var A=y.match(v);A=A?A[0]:"";y=a(A+y.trim(),A)}y=y.join("\n")+"\n"}return y})).flatten().value().join("\n");
b.undoManager.group();b.replace(m,e);b.undoManager.group();return!0}},{name:"lowercase",exec:function(b){b.undoManager.group();b.selection.isEmpty()&&(b.selection=b.wordAt().range);b.selection.text=b.selection.text.toLowerCase();b.undoManager.group();return!0}},{name:"remove trailing whitespace",exec:function(b){b.undoManager.group();var e=0;b.withLinesDo(0,b.documentEndPosition.row,function(m,a){return m.match(/\s+$/)&&++e&&b.replace(a,m.trimRight())});b.world().setStatusMessage(e+" lines cleaned up");
b.undoManager.group();return!0}},{name:"uppercase",exec:function(b){b.undoManager.group();b.selection.isEmpty()&&(b.selection=b.wordAt().range);b.selection.text=b.selection.text.toUpperCase();b.undoManager.group();return!0}},{name:"newline",exec:function(b){var e=b.cursorPosition,m=b.getLine(e.row),a=m.match(/^\s*/)[0].length;b.undoManager.group();!m.trim()&&a&&(b.deleteText({start:{row:e.row,column:0},end:{row:e.row,column:a}}),e.column=0);if(b.editorPlugin&&"function"===typeof b.editorPlugin.cmd_newline&&
b.editorPlugin.cmd_newline(e,m,a))return!0;b.selection.text="\n"+" ".repeat(a);b.selection.collapseToEnd();b.undoManager.group();return!0}},{name:"insertstring",exec:function(b,e){var m=e=void 0===e?{string:null,undoGroup:!1}:e;e=m.string;m=m.undoGroup;var a="string"===typeof e&&e.length;a||console.warn("command insertstring called with not string value");if(b.rejectsInput()||!a)return!1;b.saveActiveMarkAndDeactivate();if(b.editorPlugin&&"function"===typeof b.editorPlugin.cmd_insertstring&&b.editorPlugin.cmd_insertstring(e))return!0;
a=b.selection;var g=!a.isEmpty();g&&b.undoManager.group();var l=a.lead;a.replace(e,!0,!0,!0,!(1===e.length&&"\n"!==e&&0<l.column));a.collapseToEnd();g&&b.undoManager.group();m&&(/^[\s\.,\?\+=]+$/.test(e)||"number"!==typeof m?b.undoManager.group():b.undoManager.groupLater(m));return!0}},{name:"toggle line wrapping",scrollCursorIntoView:!1,multiSelectAction:"single",exec:function(b){b.keepPosAtSameScrollOffsetWhile(function(){return b.lineWrapping=b.lineWrapping?!1:b.fontMetric.isProportional(b.fontFamily)?
!0:"by-chars"});return!0}},{name:"cancel input",scrollCursorIntoView:!1,multiSelectAction:"single",exec:function(b,e,m,a){b.env.eventDispatcher.resetKeyInputState();b.selection.disableMultiSelect&&b.selection.disableMultiSelect();b.selection.isEmpty()||(b.selection.anchor=b.selection.lead);b.activeMark&&(b.activeMark=null);return!0}}];Di.usefulEditorCommands=[{name:"insert date",handlesCount:!0,exec:function(b,e,m){e=Di.date.format(new Date,m?"mediumDate":"isoDate");b.undoManager.group();b.insertText(e);
b.undoManager.group();return!0}},{name:"[todo] toggle todo marker",exec:function(b){var e=b.selection;e.isEmpty()&&b.selectLine();b=/\[\s*\]/g;var m=/\[X\]/g,a=e.text;a=b.test(a)?a.replace(b,"[X]"):m.test(a)?a.replace(m,"[ ]"):"[ ] "+a.trimLeft();e.text=a;return!0}},{name:"selected lines: sort",exec:function(b){var e=b.selection,m=e.start.row;e=e.end.row;var a=[];b.withLinesDo(m,e,function(g){var l=a.findIndex(function(r){return r>g});-1<l?a.splice(l,0,g):a.push(g)});b.undoManager.group();b.replace({start:{row:m,
column:0},end:{row:e+1,column:0}},a.join("\n")+"\n");b.undoManager.group();return!0}},{name:"selected lines: reverse",exec:function(b){var e=b.selection,m=e.start.row;e=e.end.row;var a=[];b.withLinesDo(m,e,function(g){return a.push(g)});b.undoManager.group();b.replace({start:{row:m,column:0},end:{row:e+1,column:0}},a.reverse().join("\n")+"\n");b.undoManager.group();return!0}},{name:"selected lines: remove duplicates (uniq)",exec:function(b){var e=b.selection,m=e.start.row;e=e.end.row;var a=[];b.withLinesDo(m,
e,function(g){return Di.arr.pushIfNotIncluded(a,g)});b.undoManager.group();b.replace({start:{row:m,column:0},end:{row:e+1,column:0}},a.join("\n")+"\n");b.undoManager.group();return!0}},{name:"change string inflection",handlesCount:!0,multiSelectAction:"single",exec:function(b,e,m){function a(H,I){var M,N,W=g(H).trim();"uppercased"===W?M=/\s*[A-Z0-9]+/g:"dashed"===W?M=/-\w/g:"spaced"===W&&(M=/\s+.?/g);"uppercased"===I?N=function(X){return X.trim().replace(/^-/,"").toUpperCase()}:"dashed"===I?N=function(X){return"-"+
X.trim().replace(/^-/,"").toLowerCase()}:"spaced"===I&&(N=function(X){return" "+X.trim().replace(/^-/,"").toLowerCase()});return H.replace(M,N)}function g(H){return H.match(/[A-Z]/)?"uppercased":H.match(/-/)?"dashed":H.match(/\s/)?"spaced":"unknown"}var l,r,v,y,A,E,F;return $jscomp.asyncExecutePromiseGeneratorProgram(function(H){if(1==H.nextAddress){b.selection.isEmpty()&&(b.selection=b.wordAt().range);l=b.selection.ranges;r=b.textInRange(l[0]);if(!r)return b.setStatusMessage("Please select some text"),
H.return(!0);v=g(r);y=Di.arr.without(["uppercased","dashed","spaced"],v);return H.yield(b.world().listPrompt("Convert "+v+" into?",y,{}),2)}A=H.yieldResult;E=$jscomp.makeIterator(A.selected);F=E.next().value;if(!F)return H.return(!0);b.undoManager.group();l.forEach(function(I,M){M=b.textInRange(I);M=a(M,F);b.replace(I,M)});b.undoManager.group();b.focus();return H.return(!0)})}},{name:"spell check word",exec:function(b,e){var m,a,g,l,r,v,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(A){switch(A.nextAddress){case 1:return m=
b.wordAt(),m.string?A.yield(System.import("lively.ide/shell/spell-checker.js"),2):(b.setStatusMessage("no word for spellcheck!"),A.return(!0));case 2:return a=A.yieldResult,g=a.spellCheckWord,A.yield(g(m.string),3);case 3:return l=A.yieldResult,l.length?A.yield(b.world().filterableListPrompt("Choose replacement for "+m.string,l),4):(b.setStatusMessage("no suggestions for word "+m.string),A.return(!0));case 4:r=A.yieldResult;v=$jscomp.makeIterator(r.selected);if(y=v.next().value)b.undoManager.group(),
b.replace(m.range,y),b.undoManager.group();return A.return(!0)}})}},{name:"[shell] run shell command on region",multiSelectAction:"single",exec:function(b,e){var m,a,g,l,r,v,y,A;return $jscomp.asyncExecutePromiseGeneratorProgram(function(E){switch(E.nextAddress){case 1:return a=(m=b.textInRange(b.selection))&&0!==m.length?{stdin:m}:{},E.yield(b.world().prompt("Enter shell command to run on region.",{historyId:"lively.ide.execShellCommand"}),2);case 2:return g=E.yieldResult,E.yield(System.import("lively.ide/shell/shell-interface.js"),
3);case 3:l=E.yieldResult;r=l.runCommand;if(!g)return E.return(b.setStatusMessage("No command entered, aborting...!"));v=r(g,a);E.setCatchFinallyBlocks(4);return E.yield(v.whenDone(),6);case 6:y=v.output.trim();b.undoManager.group();b.selection.selections.forEach(function(F){return F.text=y});b.undoManager.group();E.leaveTryBlock(5);break;case 4:A=E.enterCatchBlock(),b.showError(A);case 5:return E.return(!0)}})}},{name:"open file at cursor",exec:function(b,e){var m,a,g,l,r,v,y,A,E;return $jscomp.asyncExecutePromiseGeneratorProgram(function(F){if(1==
F.nextAddress)return b.getLine(),m=b.cursorPosition.row,a=b.document.scanBackward(b.cursorPosition,function(H,I){return(0>=I.column||H.match(/\s/))&&I})||{row:0,column:0},g=b.document.scanForward(b.cursorPosition,function(H,I){return(I.row!=m||H.match(/\s/))&&I})||b.documentEndPosition,l=b.textInRange({start:a,end:g}).replace(/\s/g,""),r=l.split(":"),v=r[0].match(/^file|http/)?r.shift()+":"+r.shift():r.shift(),r[0].match(/^[0-9]+$/)&&(v+=":"+r.shift()),F.yield(System.import("lively.ide/text-editor.js"),
2);y=F.yieldResult;A=y.default;E=A.openInWindow();E.location=v;return F.return(E)})}},{name:"run code on text morph",doc:"...",exec:function(b,e){var m,a,g,l,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){switch(v.nextAddress){case 1:return m={targetModule:"lively://code-on-text-morph",context:b},v.yield(b.world().editPrompt("Run code on selection. Use this.selection.text to access it",{requester:b,mode:"js",evalEnvironment:m,historyId:"run-code-on-text-morph-hist"}),2);case 2:return a=
v.yieldResult,v.setCatchFinallyBlocks(3),b.undoManager.group(),v.yield(lively.vm.runEval(a,m),5);case 5:l=v.yieldResult;b.undoManager.group();g=l.isError?l.value:null;v.leaveTryBlock(4);break;case 3:g=r=v.enterCatchBlock();case 4:return g&&b.showError(g),v.return(void 0)}})}},{name:"change editor mode",exec:function(b){var e,m,a,g,l,r,v,y,A;return $jscomp.asyncExecutePromiseGeneratorProgram(function(E){switch(E.nextAddress){case 1:return e=function(F){return!F.endsWith("ide/editor-plugin.js")&&F.endsWith("editor-plugin.js")},
E.yield(lively.modules.getPackage("lively.ide").resources(e),2);case 2:return m=E.yieldResult,a=b.editorPlugin||{},g=a.shortName,l=0,r=["<no mode>"].concat(m.map(function(F,H){var I=F.url.match(/([^\/]+)\/editor-plugin.js/)[1];I===g&&(l=H);return{isListItem:!0,string:I,value:F}})),E.yield(b.world().filterableListPrompt("choose mode",r,{requester:b,preselect:l,historyId:"lively.morphic/text-change-editor-mode-hist",fuzzy:!0}),3);case 3:v=E.yieldResult;y=$jscomp.makeIterator(v.selected);A=y.next().value;
if(!A)return E.return();if("<no mode>"!==A){E.jumpTo(4);break}return E.yield(b.changeEditorMode(null),5);case 5:return b.resetTextAttributes(),E.return();case 4:if(A.isLoaded){E.jumpTo(6);break}return E.yield(lively.modules.module(A.url).load(),6);case 6:return E.yield(b.changeEditorMode(A.url),0)}})}},{name:"report token at cursor",exec:function(b){var e,m,a,g;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){e=b.tokenAt(b.cursorPosition)||{};m=e.token;a=e.start;g=e.end;b.setStatusMessage(m?
m+" "+a.column+" => "+g.column:"no token");return l.return(!0)})}}];Di.commands.push.apply(Di.commands,$jscomp.arrayFromIterable(Di.usefulEditorCommands));Di.iyGotoCharActivate=NN;Di.commands.push(Di.iyGotoCharActivate);Di.searchCommands=LN;Di.commands.push.apply(Di.commands,$jscomp.arrayFromIterable(Di.searchCommands));var K9=Di.commands;Di.default=K9;var Gd=lively.FreezerRuntime.recorderFor("lively.morphic/text/morph.js");Gd.Rectangle=He;Gd.Point=Lg;Gd.rect=zm;Gd.Color=Fg;Gd.pt=xi;Gd.string=pi;
Gd.num=Nm;Gd.obj=Ag;Gd.fun=Pn;Gd.promise=zh;Gd.arr=$f;Gd.signal=Wl;Gd.noUpdate=mw;Gd.connect=rl;Gd.disconnect=zo;Gd.bowser=xs;Gd.morph=sa;Gd.touchInputDevice=sr;Gd.config=Dn;Gd.Morph=Ll;Gd.Selection=IN;Gd.MultiSelection=JN;Gd.Document=Uqa;Gd.objectReplacementChar="\ufffd";Gd.Anchor=oE;Gd.Range=Yy;Gd.eqPosition=nv;Gd.lessPosition=mv;Gd.KeyHandler=lU;Gd.UndoManager=bH;Gd.TextSearcher=KN;Gd.TextLayout=Wqa;Gd.Renderer=Xqa;Gd.extractHTMLFromTextMorph=rL;Gd.commands=K9;Gd.textAndAttributesWithSubRanges=
qL;Gd.serializeMorph=uF;Gd.deserializeMorph=vF;Gd.getSvgVertices=Ox;Gd.renderSubTree=LC;Gd.ShadowObject=zs;Gd.getClassName=Wr;var Vt=Da("a9",function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/text/morph.js"),m=e.hasOwnProperty("Text")&&"function"===typeof e.Text?e.Text:e.Text=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return dc(m,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){var g=
a=void 0===a?{}:a,l=g.position,r=g.rightCenter,v=g.leftCenter,y=g.topCenter,A=g.bottom,E=g.top,F=g.right,H=g.left,I=g.bottomCenter,M=g.bottomLeft,N=g.bottomRight,W=g.topRight,X=g.topLeft;g=g.center;dc._get(Object.getPrototypeOf(m.prototype),Symbol.for("lively-instance-initialize"),this).call(this,a);this.undoManager.reset();this.fit();void 0!==l&&(this.position=l);void 0!==r&&(this.rightCenter=r);void 0!==v&&(this.leftCenter=v);void 0!==y&&(this.topCenter=y);void 0!==A&&(this.bottom=A);void 0!==E&&
(this.top=E);void 0!==F&&(this.right=F);void 0!==H&&(this.left=H);void 0!==I&&(this.bottomCenter=I);void 0!==M&&(this.bottomLeft=M);void 0!==N&&(this.bottomRight=N);void 0!==W&&(this.topRight=W);void 0!==X&&(this.topLeft=X);void 0!==g&&(this.center=g)}},{key:"__deserialize__",value:function(a,g,l,r){dc._get(Object.getPrototypeOf(m.prototype),"__deserialize__",this).call(this,a,g,l,r);this.viewState=this.defaultViewState;this.markers=[];this.textRenderer=new Gd.Renderer(this.env.domEnv);this.textLayout=
new Gd.TextLayout(this);this.changeDocument(Gd.Document.fromString(""));this.ensureUndoManager();a.cachedLineBounds&&(this._initializedByCachedBounds=a.cachedLineBounds);this._isDeserializing=!0}},{key:"__after_deserialize__",value:function(a,g,l){var r=this;dc._get(Object.getPrototypeOf(m.prototype),"__after_deserialize__",this).call(this,a,g,l);this._isDeserializing=!1;this.whenRendered().then(function(){r.embeddedMorphs.forEach(function(v){return v.top=0})})}},{key:"__only_serialize__",get:function(){return Gd.arr.withoutAll(dc._get(Object.getPrototypeOf(m.prototype),
"__only_serialize__",this),["document","textRenderer","viewState","undoManager","markers","textLayout","embeddedMorphMap",this.displacingMorphMap.size?"":"displacingMorphMap"])}},{key:"__additionally_serialize__",value:function(a,g,l,r){dc._get(Object.getPrototypeOf(m.prototype),"__additionally_serialize__",this).call(this,a,g,l,r);a.props.selections={key:"selections",verbatim:!0,value:(this.selection.isMultiSelection?this.selection.ranges:[this.selection.range]).map(function(I){return Gd.obj.select(I,
["start","end"])})};a.props.anchors&&this.selection.isEmpty()&&(a.props.anchors.value=a.props.anchors.value.filter(function(I){return!I.id.includes("selection-")}));a.props.textAndAttributes={key:"textAndAttributes",value:this.textAndAttributes.map(function(I){if(!I)return I;if(I.isMorph)return l.ref(I).asRefForSerializedObjMap();if(Gd.obj.isObject(I)){var M={};I=JSON.stringify(I,function(N,W){return W&&W.__serialize__?(W=W.__serialize__(),Object.assign(M,W.bindings),"->["+(W.__expr__+"]")):W});I=
I.replace(/"->\[.*\]"/g,function(N){return N.slice(4,-2)});return l.expressionSerializer.exprStringEncode({__expr__:"("+I+")",bindings:M})}return I})};g=[];r=$jscomp.makeIterator(this.document.lines);for(var v=r.next();!v.done;v=r.next()){v=v.value;var y=this.textLayout.lineCharBoundsCache.get(v);if(y){var A=[],E=void 0,F=0;if(y){y=$jscomp.makeIterator(y);for(var H=y.next();!H.done;H=y.next()){H=H.value;if(E){if(Gd.num.roundTo(E.width,.001)==Gd.num.roundTo(H.width||0,.001)&&H.height==E.height){F++;
continue}A.push([F,Gd.num.roundTo(E.width||0,.001),E.height||0])}F=1;E=H}}E&&A.push([F,Gd.num.roundTo(E.width||0,.001),E.height||0]);g.push([v.row,Gd.arr.flatten(A)])}}a.cachedLineBounds=g}},{key:"spec",value:function(){var a=dc._get(Object.getPrototypeOf(m.prototype),"spec",this).call(this);a.textString=this.textString;return Gd.obj.dissoc(a,"anchors embeddedMorphMap plugins savedMarks textLayout textRenderer viewState undoManager metadata document displacingMorphMap".split(" "))}},{key:"isText",
get:function(){return!0}},{key:"makeDirty",value:function(){this._positioningSubmorph||dc._get(Object.getPrototypeOf(m.prototype),"makeDirty",this).call(this)}},{key:"onChange",value:function(a){var g=this,l=a.prop,r=a.selector,v=a.meta,y=this.lineWrapping,A=!1,E=!1,F=!1,H=!1,I=!1,M=!1;if(r)A="replace"===r,H="addTextAttribute"===r,this._displacementChange=!this._displacing&&A;else switch(l){case "scroll":I=E=!0;break;case "extent":E=!0;l=a.prevValue.subPt(a.value);M=(F=this.fixedWidth&&!!this.lineWrapping&&
!!l.x)&&(!this.fixedWidth||!this.fixedHeight);break;case "wordSpacing":case "letterSpacing":case "tabWidth":y&&(H=!0);break;case "fontFamily":case "fontSize":case "lineHeight":case "textAlign":case "fontWeight":case "fontStyle":case "textStyleClasses":case "fixedWidth":H=a.prevValue!=a.value;break;case "lineWrapping":H=!0;break;case "borderWidth":case "fixedHeight":F=a.prevValue!=a.value;break;case "padding":F=!0}dc._get(Object.getPrototypeOf(m.prototype),"onChange",this).call(this,a);l=function(){g._textChange=
!0;I&&(g.viewState.wasScrolled=!0);(H||M||F&&!v.styleSheetChange)&&g.invalidateTextLayout(H,H);(F||H)&&g.document&&g.world()&&g.document.lines.forEach(function(N){return N.hasEstimatedExtent=!0});g._displacementChange&&(g._displacementChange=!1);A&&Gd.signal(g,"textChange",a);E&&Gd.signal(g,"viewChange",a);g._textChange=!1};v.animation?Gd.promise.delay(v.animation.duration).then(l):l()}},{key:"onSubmorphChange",value:function(a,g){var l=this,r,v,y,A,E,F,H,I,M;return $jscomp.asyncExecutePromiseGeneratorProgram(function(N){if(1==
N.nextAddress){if(a.meta&&a.meta.styleSheetChange)return N.return();dc._get(Object.getPrototypeOf(m.prototype),"onSubmorphChange",l).call(l,a,g);return a.meta.animation?N.yield(a.meta.animation.asPromise(),2):N.jumpTo(2)}if(l._textChange||l._positioningSubmorph===g)return N.return();r=a;v=r.prop;y="position"==v||"extent"==v||"scale"==v||"rotation"==v;l.displacingMorphMap.get(g)&&y&&[].concat($jscomp.arrayFromIterable(l.displacingMorphMap.keys())).filter(function(W){return W.top>=g.top}).forEach(function(W){l._intersectionShapeCache&&
l._intersectionShapeCache.delete(W);l.updateTextDisplacementFor(W)});A=l.embeddedMorphMap.get(g)||{};if((E=A.anchor)&&y){if("position"==v)return l._positioningSubmorph=g,g.position=a.prevValue,l._positioningSubmorph=null,N.return();F=g.bounds();H=g._lastBounds;I=E.position.row;M=l.document.getLine(I);H&&H.height==F.height&&H.bottom()==F.bottom()||(M.hasEstimatedExtent=!0,g._lastBounds=F)}N.jumpToEnd()})}},{key:"removeMorph",value:function(a,g){g=void 0===g?!0:g;var l=this.embeddedMorphMap,r=this.displacingMorphMap;
r&&r.has(a)&&this.toggleTextWrappingAround(a,!1);if(l&&l.has(a)){if(r=l.get(a).anchor){var v=r.position;r=v.row;v=v.column;this.replace({start:{row:r,column:v},end:{row:r,column:v+1}},[],!0,g);this.replace}l.delete(a)}return dc._get(Object.getPrototypeOf(m.prototype),"removeMorph",this).call(this,a)}},{key:"toggleTextWrappingAround",value:function(a,g){var l=this;if(g)this.displacingMorphMap.has(a)||(this.embeddedMorphMap.has(a)&&this.addMorph(a.remove()),this.displacingMorphMap.set(a,[]),this.updateTextDisplacementFor(a));
else if(g=this.displacingMorphMap.get(a))this._displacing=!0,g.forEach(function(r){return l.removeMorph(r)}),this._displacing=!1,this.displacingMorphMap.delete(a)}},{key:"updateTextDisplacementFor",value:function(a){var g=this;if(!this._displacing){this._displacing=!0;var l=this.displacingMorphMap.get(a),r=this.computeDisplacementRectsFor(a).values(),v=[];l.forEach(function(H){return g.removeMorph(H,!1)});this.textLayout.resetLineCharBoundsCacheOfRange(this,a._displacementRange);r=$jscomp.makeIterator(r);
for(var y=r.next();!y.done;y=r.next()){y=y.value;var A=l.shift()||Gd.morph({visible:!0,reactsToPointer:!1,isDisplacementMorph:!0}),E=this.textLayout.textPositionFromPoint(this,y.leftCenter());A.setBounds(y);this.insertText([A,{}],E);this.viewState._needsFit=!1;if(F==A.top)A.remove();else{var F=A.top;v.push(A)}}l.forEach(function(H){return g.removeMorph(H,!1)});this.displacingMorphMap.set(a,v);this._displacing=!1}}},{key:"computeDisplacementRectsFor",value:function(a){var g=this.textLayout,l=g.textPositionFromPoint(this,
a.topLeft),r=g.textPositionFromPoint(this,a.bottomLeft),v=[];a._displacementRange=Gd.Range.fromPositions(l,r);for(l=l.row;l<r.row+1;l++)v.push.apply(v,$jscomp.arrayFromIterable(g.rangesOfWrappedLine(this,l)));this._intersectionShapeCache||(this._intersectionShapeCache=new Map);(r=this._intersectionShapeCache.get(a))||(r=a.isPath?Shapes.path(Gd.getSvgVertices(a.vertices)):"Ellipse"==Gd.getClassName(a)?Shapes.ellipse(a.center.x,a.center.y,a.width/2,a.height/2):Shapes.rectangle(a.left,a.top,a.width,
a.height));this._intersectionShapeCache.set(a,r);a=this.width;l=new Map;v=$jscomp.makeIterator(v);for(var y=v.next();!y.done;y=v.next()){y=y.value;var A=g.computeMaxBoundsForLineSelection(this,y),E=A.height;A=A.y;var F=Shapes.rectangle(a,E,0,A);F=Intersection.intersect(F,r);1>F.points.length||(F=Gd.Rectangle.unionPts(F.points.map(Gd.Point.fromLiteral)),F.y=A,F.height=E,F.x-=15,F.width+=30,l.set(y,F))}return l}},{key:"rejectsInput",value:function(){return this.readOnly}},{key:"addAnchor",value:function(a){if(a){"string"===
typeof a&&(a={id:a,row:0,column:0});if(!a.isAnchor){var g=a,l=g.column,r=g.row;a=new Gd.Anchor(g.id,"number"===typeof r&&"number"===typeof l?{row:r,column:l}:void 0,g.insertBehavior||"move")}if(g=a.id&&this.anchors.find(function(v){return v.id===a.id}))return Object.assign(g,a);this.anchors.push(a);return a}}},{key:"removeAnchor",value:function(a){for(var g=this.anchors,l,r=g.length;r--;){var v=g[r];if(v.id==a||v===a)l=v,g.splice(r,1)}return l}},{key:"addMarker",value:function(a){this.removeMarker(a.id);
this.markers.push(a);this.makeDirty();return a}},{key:"removeMarker",value:function(a){var g="string"===typeof a?a:a.id;this.markers=this.markers.filter(function(l){return l.id!==g});this.makeDirty()}},{key:"saveMark",value:function(a,g){a=void 0===a?this.cursorPosition:a;var l=this.activeMark;l&&l!==a&&!l.equalsPosition(a)&&(this.savedMarks=this.savedMarks.concat(l));g?this.activeMark=a:this.savedMarks=this.savedMarks.concat(a)}},{key:"saveActiveMarkAndDeactivate",value:function(){var a=this.activeMark;
a&&(this.saveMark(a),this.activeMark=null)}},{key:"popSavedMark",value:function(){var a=this.activeMark;if(a)return this.activeMark=null,a;a=Gd.arr.last(this.savedMarks);this.savedMarks=this.savedMarks.slice(0,-1);return a}},{key:"lastSavedMark",get:function(){return this.activeMark||Gd.arr.last(this.savedMarks)}},{key:"savedMarkForSelection",value:function(a){var g=this.selection,l=this.savedMarks,r=this.multiSelect?this.multiSelect.getAllRanges().length:1;r=l.length-(r-(g.index||0));g=l[r]||g.anchor;
a&&"row"in a&&"column"in a&&(this.savedMarks=l.slice(0,r).concat(a).concat(l.slice(r+1)));return g}},{key:"addPlugin",value:function(a){this.plugins.includes(a)||(this.plugins.push(a),this._cachedKeyhandlers=null,"function"===typeof a.attach&&a.attach(this));return a}},{key:"removePlugin",value:function(a){if(!this.plugins.includes(a))return!1;this._cachedKeyhandlers=null;Gd.arr.remove(this.plugins,a);"function"===typeof a.detach&&a.detach(this);return!0}},{key:"pluginCollect",value:function(a,g){g=
void 0===g?[]:g;this.plugins.forEach(function(l){return"function"===typeof l[a]&&(g=l[a](g))});return g}},{key:"pluginInvokeFirst",value:function(a,g){for(var l=[],r=1;r<arguments.length;++r)l[r-1]=arguments[r];return(r=this.pluginFind(function(v){return"function"===typeof v[a]}))?r[a].apply(r,$jscomp.arrayFromIterable(l)):void 0}},{key:"pluginFind",value:function(a){return this.plugins.slice().reverse().find(a)}},{key:"editorPlugin",get:function(){return this.pluginFind(function(a){return a.isEditorPlugin})}},
{key:"lookupEditorPluginNamed",value:function(a){var g,l,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){if(1==y.nextAddress)return a=Gd.config.ide.modes.aliases[a]||a,l=(g=/^[^:\\]+:\/\//.test(a))?a:"lively.ide/"+a+"/editor-plugin.js",y.yield(lively.modules.doesModuleExist(l),2);if(3!=y.nextAddress)return y.yieldResult?y.yield(lively.modules.module(l).load(),3):y.return(null);r=y.yieldResult;v=r.default;return y.return(v)})}},{key:"changeEditorMode",value:function(a){var g=this,
l,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){if(1==v.nextAddress)return l=g.plugins.filter(function(y){return!y.isEditorPlugin}),a?"string"!==typeof a?v.jumpTo(2):v.yield(g.lookupEditorPluginNamed(a),3):(g.plugins=l,v.return(null));if(2!=v.nextAddress){r=v.yieldResult;if(!r)throw Error("Cannot find editor mode "+a);a=new r(Gd.config.codeEditor.defaultTheme);g.evalEnvironment&&(a.evalEnvironment=g.evalEnvironment)}g.plugins=l.concat(a);return v.return(a)})}},{key:"invalidateTextLayout",
value:function(a,g){g=void 0===g?!1:g;if(!this._isDeserializing){var l=this.viewState;l&&(this.fixedWidth&&this.fixedHeight||(l._needsFit=!0),l=this.textLayout)&&((void 0===a?0:a)&&l.resetLineCharBoundsCache(this),l.estimateLineHeights(this,g))}}},{key:"textBounds",value:function(){return this.textLayout.textBounds(this)}},{key:"defaultCharExtent",value:function(){return this.textLayout.defaultCharExtent(this)}},{key:"scrollExtent",get:function(){return this.textBounds().extent().addPt(this.padding.topLeft()).addPt(this.padding.bottomRight()).addPt(this.scrollbarOffset).maxPt(dc._get(Object.getPrototypeOf(m.prototype),
"scrollExtent",this))}},{key:"commands",get:function(){return this.pluginCollect("getCommands",(this._commands||[]).concat(Gd.commands))}},{key:"execCommand",value:function(a,g,l,r){function v(X){(A.hasOwnProperty("scrollCursorIntoView")?A.scrollCursorIntoView:1)&&Gd.fun.debounceNamed("execCommand-scrollCursorIntoView-"+X.id,100,function(){return X.scrollCursorIntoView()})()}var y=this,A=(this.lookupCommand(a)||{}).command;if(A){var E=this.inMultiSelectMode(),F=A.hasOwnProperty("multiSelectAction")?
A.multiSelectAction:"forEach";if(E&&"forEach"===F){var H=this.selection;E=this.selection.selections.slice().reverse();this.selection=E[0];this._multiSelection=H;try{var I=this.execCommand(a,g,l,r)}catch(X){throw this.selection=H,this._multiSelection=null,this.selection.mergeSelections(),X;}if(!I)return I;var M=[I];if("function"===typeof I.then&&"function"===typeof I.catch)return Gd.promise.finally(Gd.promise.chain([function(){return I}].concat(E.slice(1).map(function(X){return function(){y.selection=
X;return Promise.resolve(y.execCommand(a,g,l,r)).then(function(ea){return M.push(ea)})}}))).then(function(){return M}),function(){y.selection=H;y._multiSelection=null;y.selection.mergeSelections()});try{for(var N=$jscomp.makeIterator(E.slice(1)),W=N.next();!W.done;W=N.next())this.selection=W.value,M.push(this.execCommand(a,g,l,r))}finally{this.selection=H,this._multiSelection=null,this.selection.mergeSelections()}return M}(I=this.commandHandler.exec(a,this,g,l,r))&&("function"===typeof I.then&&"function"===
typeof I.catch?I.then(function(){return v(y)}):v(this));return I}}},{key:"changeDocument",value:function(a,g){g=void 0===g?!1:g;if(this.document)var l=this.defaultTextStyle;else g=!1;this.document=a;this.textLayout.reset();g&&(this.defaultTextStyle=l);this.makeDirty();this.consistencyCheck()}},{key:"textInRange",value:function(a){return this.document.textInRange(a)}},{key:"charRight",value:function(a){a=void 0===a?this.cursorPosition:a;var g=a.column;return this.getLine(a.row).slice(g,g+1)}},{key:"charLeft",
value:function(a){a=void 0===a?this.cursorPosition:a;var g=a.column;return this.getLine(a.row).slice(g-1,g)}},{key:"indexToPosition",value:function(a){return this.document.indexToPosition(a)}},{key:"positionToIndex",value:function(a){return this.document.positionToIndex(a)}},{key:"getVisibleLine",value:function(a){a=void 0===a?this.cursorPosition.row:a;return this.textLayout.wrappedLines(this)[a].text}},{key:"isLineVisible",value:function(a){a=void 0===a?this.cursorPosition.row:a;return this.textLayout.isLineVisible(this,
a)}},{key:"isLineFullyVisible",value:function(a){a=void 0===a?this.cursorPosition.row:a;return this.textLayout.isLineFullyVisible(this,a)}},{key:"getLine",value:function(a){a=void 0===a?this.cursorPosition.row:a;return this.document.getLineString(a)}},{key:"lineCount",value:function(){return this.document.rowCount}},{key:"isLineEmpty",value:function(a){return!this.getLine(a).trim()}},{key:"isAtLineEnd",value:function(a){a=void 0===a?this.cursorPosition:a;var g=this.getLine(a.row);return a.column===
g.length}},{key:"wordsOfLine",value:function(a){a=void 0===a?this.cursorPosition.row:a;return this.document.wordsOfLine(a)}},{key:"wordAt",value:function(a){a=void 0===a?this.cursorPosition:a;return this.document.wordAt(a)}},{key:"wordLeft",value:function(a){a=void 0===a?this.cursorPosition:a;return this.document.wordLeft(a)}},{key:"wordRight",value:function(a){a=void 0===a?this.cursorPosition:a;return this.document.wordRight(a)}},{key:"lineRange",value:function(a,g){a=void 0===a?this.cursorPosition.row:
a;g=void 0===g?!0:g;"number"!==typeof a&&this.cursorPosition.row;var l=this.getLine(a);a={start:{column:0,row:a},end:{column:l.length,row:a}};l=l.match(/^\s*/);l[0].length&&g&&(a.start.column+=l[0].length);return new Gd.Range(a)}},{key:"screenLineRange",value:function(a,g){a=void 0===a?this.cursorPosition:a;return this.textLayout.screenLineRange(this,a,void 0===g?!0:g)}},{key:"insertTextAndSelect",value:function(a,g){g=void 0===g?null:g;a=String(a);g?this.selection.range=this.insertText(a,g):this.selection.text=
a}},{key:"append",value:function(a){var g=this;return this.saveExcursion(function(){return g.insertText(a,g.documentEndPosition)})}},{key:"insertText",value:function(a,g,l,r){g=void 0===g?this.cursorPosition:g;return this.replace({start:g,end:g},a,void 0===l?!0:l,void 0===r?!0:r)}},{key:"deleteText",value:function(a,g){g=void 0===g?!0:g;var l=this.textAndAttributesInRange(a);this.replace(a,[],!1,g);return l}},{key:"replace",value:function(a,g,l,r,v,y){var A=this;l=void 0===l?!0:l;r=void 0===r?!0:
r;v=void 0===v?!0:v;y=void 0===y?!0:y;a=a.isRange?a:new Gd.Range(a);var E="string"===typeof g?[g,null]:Array.isArray(g)?g:[String(g||""),null];g=!E.length||2==E.length&&!E[0];var F=a.isEmpty();if(g&&F)return a;var H;l&&(H=this.textAttributeAt({row:a.start.row,column:a.start.column-(0<a.start.column?1:0)}));var I=[];for(l=0;l<E.length;l+=2)g=E[l],F=E[l+1],g.isMorph&&I.push(g),H&&(E[l+1]=Object.assign({},H,{},F));v&&this.undoManager.undoStart(this,"replace");var M=this.textAndAttributesInRange(a),N=
this.document.replace(a,E,this.debug&&this.debugHelper(this.debug)).inserted;this.addMethodCallChangeDoing({target:this,selector:"replace",args:[a,E],undo:{target:this,selector:"replace",args:[N,M,!1]}},function(){r&&(A.invalidateTextLayout(!1,!1),A.textLayout.resetLineCharBoundsCacheOfRange(A,N));if(!Gd.eqPosition(a.end,N.end)){if(Gd.lessPosition(N.end,a.end)){var W=$jscomp.makeIterator((new Gd.Range(a)).subtract(N)).next().value;A.anchors.forEach(function(ea){return ea.onDelete(W)})}else{var X=
$jscomp.makeIterator((new Gd.Range(N)).subtract(a)).next().value;A.anchors.forEach(function(ea){return ea.onInsert(X)})}A._multiSelection?A._multiSelection.updateFromAnchors():A.selection.updateFromAnchors()}A._updateEmbeddedMorphsDuringReplace(I,N,E,M);A._isDeserializing&&A._initializedByCachedBounds||A.textLayout.estimateLineHeights(A,!1);y&&A.consistencyCheck()});v&&this.undoManager.undoStop();return N}},{key:"_updateEmbeddedMorphsDuringReplace",value:function(a,g,l,r){for(var v=this.embeddedMorphMap,
y=0;y<r.length;y+=2){var A=r[y];if(A.isMorph&&!a.includes(A)){if(v){var E=v.get(A);E&&E.anchor&&(this.removeAnchor(E.anchor),Gd.disconnect(E.anchor,"position",A,"position"));v.set(A,Object.assign({},E,{anchor:null}))}A.remove()}}if(a.length)for(l=Gd.textAndAttributesWithSubRanges(g.start,l),g=l.ranges,l=l.textAndAttributes,r=0;r<g.length;r++)y=l[2*r],y.isMorph&&(console.assert(a.includes(y),"????"),A=g[r].start,y.owner!==this&&this.addMorph(y),v&&(v.has(y)?v.get(y).anchor.position=A:(A=this.addAnchor(Object.assign({id:"embedded-"+
y.id},A)),Gd.connect(A,"position",y,"position",{updater:function(F,H){var I=this.targetObj.owner,M=this.targetObj;H=I&&I.isText?I.charBoundsFromTextPosition(H).topLeft().subPt(I.origin):M.position;I&&(I._positioningSubmorph=M);F(H);I&&(I._positioningSubmorph=!1)}}).update(A.position),v.set(y,{anchor:A}))))}},{key:"applyJsDiffPatch",value:function(a){function g(F,H,I,M){var N=r.indexToPosition(F+I),W=r.indexToPosition(H+I);M.push(r.deleteText({start:N,end:W}));return I-(H-F)}function l(F,H,I,M){M.push(r.insertText(H,
r.indexToPosition(F+I)));return I}var r=this,v=[],y=0,A=0;a=$jscomp.makeIterator(a);for(var E=a.next();!E.done;E=a.next())E=E.value,E.removed?A=g(y,y+E.count,A,v):E.added&&(A=l(y,E.value,A,v)),y+=E.count;return v}},{key:"applyTextChanges",value:function(a,g,l,r){g=void 0===g?0:g;l=void 0===l?!0:l;var v=[];a=$jscomp.makeIterator(a);for(var y=a.next();!y.done;y=a.next()){var A=$jscomp.makeIterator(y.value);y=A.next().value;var E=A.next().value;A=A.next().value;g&&(E="number"===typeof E?E:this.positionToIndex(E),
A&&"string"!==typeof A&&!Array.isArray(A)&&(A=("number"===typeof A?A:this.positionToIndex(A))+g),E+=g);E="number"===typeof E?this.indexToPosition(E):E;switch(y){case "delete":case "remove":y="number"===typeof A?this.indexToPosition(A):A;v.push(this.deleteText({start:E,end:y},r));break;case "insert":v.push(this.insertText(A,E,l,r));break;default:console.warn("[applyTextChanges] unknown type: "+y)}}return v}},{key:"modifyLines",value:function(a,g,l){var r=this;l=Gd.arr.range(a,g).map(function(v){return r.getLine(v)}).map(l).join("\n")+
"\n";this.deleteText({start:{row:a,column:0},end:{row:g+1,column:0}},!1);this.insertText(l,{row:a,column:0})}},{key:"modifySelectedLines",value:function(a){var g=this.selection.isEmpty()?this.lineRange(void 0,!1):this.selection.range;return this.modifyLines(g.start.row,g.end.row,a)}},{key:"withLinesDo",value:function(a,g,l){var r=this;return Gd.arr.range(a,g).map(function(v){var y=r.getLine(v);v=Gd.Range.create(v,0,v,y.length);return l(y,v)})}},{key:"withSelectedLinesDo",value:function(a){var g=this.selection.isEmpty()?
this.lineRange(void 0,!1):this.selection.range,l=g.start.row;g=g.end;var r=g.row;return this.withLinesDo(l,0===g.column&&r>l?r-1:r,a)}},{key:"joinLine",value:function(a){a=void 0===a?this.cursorPosition.row:a;var g=this.getLine(a),l=this.getLine(a+1);l=g+l.replace(/^\s+/,"")+this.document.constructor.newline;this.replace({start:{column:0,row:a},end:{column:0,row:a+2}},l,!0);return{row:a,column:g.length}}},{key:"whatsVisible",get:function(){return this.textLayout.whatsVisible(this)}},{key:"flash",
value:function(a,g){var l=this;a=void 0===a?this.selection.range:a;g=Object.assign({time:1E3,fill:Gd.Color.orange},g);var r=g.id||"flash"+Gd.string.newUUID();this.addMarker({id:r,range:a,style:{"background-color":g.fill.toCSSString(),"pointer-events":"none"}});Gd.fun.debounceNamed("flash-"+r,g.time,function(){return l.removeMarker(r)})()}},{key:"addTextAttribute",value:function(a,g){var l=this;g=void 0===g?this.selection:g;var r={start:g.start,end:g.end};this.undoManager.undoStart(this,"addTextAttribute");
this.addMethodCallChangeDoing({target:this,selector:"addTextAttribute",args:[a,r],undo:{target:this,selector:"removeTextAttribute",args:[a,r]}},function(){l.document.mixinTextAttribute(a,r);l.onAttributesChanged(r);l.consistencyCheck()});this.undoManager.undoStop();return a}},{key:"removeTextAttribute",value:function(a,g){var l=this;g=void 0===g?this.selection:g;var r={start:g.start,end:g.end};this.undoManager.undoStart(this,"removeTextAttribute");this.addMethodCallChangeDoing({target:this,selector:"removeTextAttribute",
args:[a,r],undo:{target:this,selector:"addTextAttribute",args:[a,r]}},function(){l.document.mixoutTextAttribute(a,r);l.onAttributesChanged(r);l.consistencyCheck()});this.undoManager.undoStop()}},{key:"setTextAttributesWithSortedRanges",value:function(a){this.document.setTextAttributesWithSortedRanges(a);this.consistencyCheck();for(var g=0;g<a.length;)this.onAttributesChanged(a[g]),g+=2}},{key:"textAttributeAt",value:function(a){return this.document.textAttributeAt(a)}},{key:"textAttributeAtPoint",
value:function(a){return this.textAttributeAt(this.textLayout.textPositionFromPoint(this,a))}},{key:"textAndAttributesInRange",value:function(a){a=void 0===a?this.selection.range:a;return this.document.textAndAttributesInRange(a)}},{key:"resetTextAttributes",value:function(){this.document.resetTextAttributes();this.onAttributesChanged(this.documentRange);this.consistencyCheck()}},{key:"onAttributesChanged",value:function(a){this.invalidateTextLayout(!1,!1);var g=this.textLayout;g&&g.resetLineCharBoundsCacheOfRange(this,
a);this.makeDirty()}},{key:"styleAt",value:function(a){return(a=this.textLayout.chunkAtPos(this,a))?a.style:Object.assign({},this.defaultTextStyle)}},{key:"getStyleInRange",value:function(a){a=void 0===a?this.selection:a;return this.textAndAttributesInRange(a).filter(function(g,l){return 0!=l%2}).reduce(function(g,l){for(var r in l){var v=l[r];if(!g.hasOwnProperty(r)||void 0!==v&&null!==v)g[r]=v}return g},{})}},{key:"setStyleInRange",value:function(a,g){var l=this;g=void 0===g?this.selection:g;for(var r=
this.textAndAttributesInRange(g),v={start:Object.assign({},g.start),end:Object.assign({},g.start)},y=[],A=0;A<r.length;A+=2){var E=r[A],F=r[A+1],H=-1;"string"!==typeof E&&(E=Gd.objectReplacementChar);for(;-1<(H=E.indexOf("\n"));)0<H&&(v.end.column+=H,y.push(v,F)),v={row:v.end.row+1,column:0},v={start:v,end:Object.assign({},v)},E=E.slice(H+1);v.end.column+=E.length;y.push(v,F);v={start:Object.assign({},v.end),end:Object.assign({},v.end)}}this.undoManager.undoStart(this,"setStyleInRange");this.addMethodCallChangeDoing({target:this,
selector:"setStyleInRange",args:[a,g],undo:{target:this,selector:"setTextAttributesWithSortedRanges",args:[y]}},function(){l.document.setTextAttribute(a,g);l.consistencyCheck();l.onAttributesChanged(g)});this.undoManager.undoStop()}},{key:"resetStyleInRange",value:function(a){a=void 0===a?this.selection:a;for(var g=this.document.textAndAttributesInRange(a),l={},r=0;r<g.length;r+=2)Object.assign(l,g[r+1]);this.removeTextAttribute(l,a)}},{key:"changeStyleProperty",value:function(a,g,l){var r=this;l=
void 0===l?this.selection:l;l=this.getStyleInRange(l)[a];var v=g(l);this.selections.forEach(function(y){var A={};return r.addTextAttribute((A[a]=v,A),y)})}},{key:"inMultiSelectMode",value:function(){return this.selection.selections&&1<this.selection.selections.length}},{key:"selectionBounds",value:function(){var a=this;return this.selections.map(function(g){var l=a.charBoundsFromTextPosition(g.start),r=a.charBoundsFromTextPosition(g.end);return g.start.row===g.end.row?l.union(r):Gd.rect(Gd.pt(a.padding.left(),
l.top()),Gd.pt(a.width-a.padding.left(),r.bottom()))}).reduce(function(g,l){return l.union(g)})}},{key:"documentEndPosition",get:function(){return this.document?this.document.endPosition:{row:0,column:0}}},{key:"isAtDocumentEnd",value:function(){return Gd.eqPosition(this.cursorPosition,this.documentEndPosition)}},{key:"documentRange",get:function(){return{start:{row:0,column:0},end:this.documentEndPosition}}},{key:"cursorUp",value:function(a){return this.selection.goUp(void 0===a?1:a)}},{key:"cursorDown",
value:function(a){return this.selection.goDown(void 0===a?1:a)}},{key:"cursorLeft",value:function(a){return this.selection.goLeft(void 0===a?1:a)}},{key:"cursorRight",value:function(a){return this.selection.goRight(void 0===a?1:a)}},{key:"getPositionAboveOrBelow",value:function(a,g,l,r,v){function y(H,I){H=H.slice();H.push({x:Gd.arr.last(H).x+Gd.arr.last(H).width});for(var M=0,N=Infinity,W=0;W<H.length;W++){var X=Math.abs(H[W].x-I);X<N&&(N=X,M=W)}return M}a=void 0===a?1:a;g=void 0===g?this.cursorPosition:
g;l=void 0===l?!1:l;if(0===a)return g;"number"===typeof v&&(v-=this.padding.left());var A=g.row,E=g.column;if(l&&this.lineWrapping){A=this.textLayout.rangesOfWrappedLine(this,g.row);if(!A.length)return g;E=A.length-1-A.slice().reverse().findIndex(function(H){return H.start.column<=g.column});if(1<=a){var F=0===E?0>=g.row?null:Gd.arr.last(this.textLayout.rangesOfWrappedLine(this,g.row-1)):A[E-1];if(!F)return g}else if(-1>=a&&(F=(A.length-1===E?g.row>=this.lineCount()-1?[]:this.textLayout.rangesOfWrappedLine(this,
g.row+1):A.slice(E+1))[0],!F))return g;A=F.start.row;E=this.textLayout.charBoundsOfRow(this,A).slice(F.start.column,F.end.column+1);E=F.start.column+y(E,v)}else A=Math.min(Math.max(0,g.row-a),this.lineCount()-1),"number"===typeof v&&(F=this.textLayout.charBoundsOfRow(this,A),E=y(F,v));F={row:A,column:E};return 1<Math.abs(a)?this.getPositionAboveOrBelow(a+(1<a?-1:1),F,l,r,v):F}},{key:"collapseSelection",value:function(){this.selection.collapse(this.selection.lead);return this.selection}},{key:"selectAll",
value:function(){this.selection.selectAll();return this.selection}},{key:"selectLine",value:function(a,g){a=void 0===a?this.cursorPosition.row:a;this.selection.selectLine(a,void 0===g?!1:g);return this.selection}},{key:"selectionOrLineString",value:function(){var a=this.selection,g=a.text;a=a.start;return g?g:this.getLine(a.row)}},{key:"scrollCursorIntoView",value:function(){this.scrollPositionIntoView(this.cursorPosition)}},{key:"centerRange",value:function(a,g,l){a=void 0===a?this.selection.range:
a;g=void 0===g?Gd.pt(0,0):g;l=void 0===l?!0:l;var r=this.charBoundsFromTextPosition(a.start).top();a=this.charBoundsFromTextPosition(a.end).bottom()-r;this.scroll=a<this.height||!1===l?this.scroll.withY(r+a/2-this.height/2).addPt(g):this.scroll.withY(r).addPt(g)}},{key:"centerRow",value:function(a,g){a=void 0===a?this.cursorPosition.row:a;g=void 0===g?Gd.pt(0,0):g;return this.alignRowAtTop(a,g.addXY(0,-this.height/2))}},{key:"alignRowAtTop",value:function(a,g){a=void 0===a?this.cursorPosition.row:
a;g=void 0===g?Gd.pt(0,0):g;this.scroll=this.charBoundsFromTextPosition({row:a,column:0}).topLeft().addXY(-this.padding.left(),0).addPt(g)}},{key:"alignRowAtBottom",value:function(a,g){a=void 0===a?this.cursorPosition.row:a;g=void 0===g?Gd.pt(0,0):g;var l=this.charBoundsFromTextPosition({row:a,column:0}).height;this.alignRowAtTop(a,g.addXY(0,-this.textPageHeight()+l))}},{key:"scrollPositionIntoView",value:function(a,g){g=void 0===g?Gd.pt(0,0):g;if(this.isClip()){var l=this.scroll;l=this.innerBounds().translatedBy(l).insetByRect(this.padding).insetBy(this.borderWidth);
a=this.charBoundsFromTextPosition(a);this.lineWrapping||(a=a.insetByPt(Gd.pt(-20,0)));var r=20<l.bottom()-a.bottom()?"bottomLeft":"topLeft";l=a[r]().subPt(l.translateForInclusion(a)[r]()).addPt(g);if(0!=l.x||0!=l.y)this.scroll=this.scroll.addPt(l).addPt(g),this.isFocused()&&this.ensureKeyInputHelperAtCursor()}}},{key:"keepPosAtSameScrollOffsetWhile",value:function(a,g){var l=this;g=void 0===g?this.cursorPosition:g;var r=this.scroll;g=this.selection.lead;var v=this.charBoundsFromTextPosition(g).y-
r.y;r=!1;var y=function(){return l.scroll=l.scroll.withY(l.charBoundsFromTextPosition(g).y-v)};try{var A=a();r=A&&A instanceof Promise}finally{!r&&y()}r&&Gd.promise.finally(A,y);return A}},{key:"saveExcursion",value:function(a,g){var l=this;g=Object.assign({useAnchors:!1},g);var r=this.selection.isMultiSelection?this.selection.selections.map(function(E){return E.directedRange}):[this.selection],v=g.useAnchors?r.map(function(E){var F=E.end;return[l.addAnchor(Object.assign({},E.start,{id:"save-excursion-"+
Gd.string.newUUID()})),l.addAnchor(Object.assign({},F,{id:"save-excursion-"+Gd.string.newUUID()}))]}):null,y=!1;g=g.useAnchors?function(){var E=v.map(function(F){var H=$jscomp.makeIterator(F);F=H.next().value.position;H=H.next().value.position;return{start:F,end:H}});l.selections=E;v.forEach(function(F){var H=$jscomp.makeIterator(F);F=H.next().value;H=H.next().value;l.removeAnchor(F);l.removeAnchor(H)})}:function(){return l.selections=r};try{var A=this.keepPosAtSameScrollOffsetWhile(a);y=A&&A instanceof
Promise}finally{!y&&g()}y&&Gd.promise.finally(A,g);return A}},{key:"alignRow",value:function(a,g){g=void 0===g?"center":g;if(this.isClip()){var l=this.scroll,r=this.padding;l=this.innerBounds().insetByRect(r).translatedBy(l);a=this.charBoundsFromTextPosition({row:a,column:0});if(g="top"===g||"bottom"===g?l[g]()-a[g]():"center"===g?l[g]().y-a[g]().y:0)this.scroll=this.scroll.addXY(0,-g)}}},{key:"fit",value:function(){var a=this,g=this.viewState,l=this.fixedWidth,r=this.fixedHeight;g._needsFit=!1;if(r&&
l||!this.textLayout||this.master&&!this.master._appliedMaster)return this;var v=this.textBounds().outsetByRect(this.padding),y=function(){r||a.height==v.height||(a.height=v.height);l||a.width==v.width||(a.width=v.width);a.embeddedMorphs.forEach(function(A){A=a.embeddedMorphMap.get(A).anchor;A.position=A.position})};g._needsFit=!1;this.document.lines.find(function(A){return A.hasEstimatedExtent})?this.whenRendered().then(y):y();return this}},{key:"fitIfNeeded",value:function(){this.viewState._needsFit&&
this.fit()}},{key:"defaultLineHeight",get:function(){var a=this.padding;return a.top()+a.bottom()+this.fontMetric.defaultLineHeight({fontSize:this.fontSize,fontFamily:this.fontFamily})}},{key:"columnInWrappedLine",value:function(a){if(!this.lineWrapping)return a.column;var g=this.screenLineRange(a,!0).start.column;return a.column-g}},{key:"textPositionFromPoint",value:function(a){return this.textLayout.textPositionFromPoint(this,a)}},{key:"charBoundsFromTextPosition",value:function(a){return this.textLayout.boundsFor(this,
a)}},{key:"forceRerender",value:function(){this.textLayout.reset();this.makeDirty()}},{key:"aboutToRender",value:function(a){dc._get(Object.getPrototypeOf(m.prototype),"aboutToRender",this).call(this,a)}},{key:"applyLayoutIfNeeded",value:function(){this._requestMasterStyling&&(this.master&&this.master.applyIfNeeded(!0),this._requestMasterStyling=!1);this.fitIfNeeded();dc._get(Object.getPrototypeOf(m.prototype),"applyLayoutIfNeeded",this).call(this)}},{key:"render",value:function(a){return this.textRenderer.renderMorph(this,
a)}},{key:"directRender",value:function(){var a=this.env.renderer,g=this.textRenderer;a&&g&&!a._stopped&&(Gd.renderSubTree(this,a),g.manuallyTriggerTextRenderHook(this,a))}},{key:"onMouseDown",value:function(a){if(!a.rightMouseButtonPressed()){this.activeMark&&(this.activeMark=null);var g=a.state;if(g.clickedOnMorph===this){g=(g.clickCount-1)%3+1;var l=this.localize(a.position),r=this.textPositionFromPoint(l);a.leftMouseButtonPressed()&&!a.isShiftDown()&&!a.isAltDown()&&this.callTextAttributeDoitFromMouseEvent(a,
l);this.selectable&&(a.isShiftDown()?this.selection.lead=r:a.isAltDown()?this.selection.addRange(Gd.Range.at(r)):(this.selection.disableMultiSelect(),1===g?a.isShiftDown()?this.selection.lead=r:this.selection={start:r,end:r}:2===g?this.execCommand("select word",null,1,a):3===g&&this.execCommand("select line",null,1,a)),this.isFocused()&&this.ensureKeyInputHelperAtCursor())}}}},{key:"evalEnvForDoit",value:function(a){var g="lively://text-doit/"+this.id;lively.modules.module(g);return{context:a.context||
this,format:"esm",targetModule:g}}},{key:"callTextAttributeDoitFromMouseEvent",value:function(a,g){var l=this;g=(g=this.textAttributeAtPoint(g)||[],g.doit);if(!g||!g.code)return!1;var r=this.evalEnvForDoit(g),v=lively.modules.module(r.targetModule);v.recorder.evt=a;lively.vm.runEval(g.code,r).catch(function(y){return l.world().logError(Error("Error in text doit: "+y.stack))}).then(function(){return v.recorder.evt=null});return!0}},{key:"onMouseMove",value:function(a){a.leftMouseButtonPressed()&&this.selectable&&
a.state.clickedOnMorph===this&&(this.selection.lead=this.textPositionFromPoint(this.localize(a.position)))}},{key:"selectMatchingBrackets",value:function(a,g){function l(F){return"\t"===F||" "===F}function r(F,H,I,M,N){for(var W=1;(0>N?0<=M-1:M+1<F.length)&&(M+=N,F[M]==H&&H!=I&&W++,F[M]==I&&W--,0!=W););return M}function v(F,H,I,M){for(var N=H;0>I?0<=N-1:N+1<F.length;)if(N+=I,F[N]==M)return 0<I?[H,N]:[N+1,H];return 0<I?[H+1,F.length-1]:[0,H]}if(!a)return g;if(0==g||g==a.length)return[0,a.length-1];
var y=g-1;if(0<g){if("\n"==a[g-1]||"\r"==a[g-1])return v(a,g,1,a[g-1]);var A="*({[<'\"`".indexOf(a[g-1]);"*"==a[g-1]&&(0>g-2||"/"!=a[g-2])&&(A=-1);if(0<=A)return y=r(a,"*({[<'\"`"[A],"*)}]>'\"`"[A],g-1,1),[g,y-1]}if(g<a.length){if("\n"==a[g]||"\r"==a[g])return v(a,g,-1,a[g]);A="*)}]>'\"`".indexOf(a[g]);"*"==a[g]&&(g+1>=a.length||"/"!=a[g+1])&&(A=-1);if(0<=A)return g=r(a,"*)}]>'\"`"[A],"*({[<'\"`"[A],g,-1),[g+1,y]}if("/"===a[g-1]&&"/"===a[g-2]){for(;y+1<a.length&&"\n"!==a[y+1]&&"\r"!==a[y+1];)y++;
return[g,y]}A=g;for(var E=y;0<=A-1&&l(a[A-1]);)A--;for(;E<a.length&&l(a[E+1]);)E++;if(1<=E-A)return[A,E];for(A=g<a.length?a[g]:"";0<=g-1&&((a[g-1]||"").match(/^[a-zA-Z0-9\-]+$/)||("."!=a[g-1]?0:0<="0123456789".indexOf(A)));)A=a[g-1],g--;for(;y+1<a.length&&((a[y+1]||"").match(/^[a-zA-Z0-9\-]+$/)||("."!=a[y+1]?0:0<="0123456789".indexOf(A)));)A=a[y+1],y++;return[g,y]}},{key:"onContextMenu",value:function(a){var g=this;if(a.targetMorph===this){a.stop();var l=this.textPositionFromPoint(this.localize(a.position)),
r=this.selection.selections||[this.selection];if(this.selection.isEmpty()||r.every(function(v){return!v.range.containsPosition(l)}))this.cursorPosition=l;Promise.resolve(this.menuItemsForContextMenu()).then(function(v){return g.openMenu(v,a)}).catch(function(v){return $world.logError(v)})}}},{key:"onDrop",value:function(a){var g=a.hand.grabbedMorphs.filter(function(r){return r.isLayoutable});dc._get(Object.getPrototypeOf(m.prototype),"onDrop",this).call(this,a);if(g[0]){var l=this.textPositionFromPoint(this.localize(a.hand.globalPosition));
this.insertText([g[0],null],l);g[0].opacity=a.state.originalOpacity||1}}},{key:"buildDropHoverGrid",value:function(a){var g=this;if(a.simpleDrop)return null;var l=this.whatsVisible,r=l.startRow;l=Math.min(this.documentEndPosition.row,l.endRow);var v=this.document,y=this.padding.left(),A=this.padding.top();r=Gd.arr.range(r,l).reduce(function(E,F){var H=g.textLayout.charBoundsOfRow(g,F).slice();1<=H.length&&0==Gd.arr.last(H).width&&(Gd.arr.last(H).width=12);if(1<H.length){var I=Gd.arr.last(H);H.push({x:I.x+
I.width,y:I.y,height:I.height,width:I.width||12})}H=H.map(function(M,N){M=Gd.Rectangle.fromLiteral(M).translatedBy(Gd.pt(y,A+v.computeVerticalOffsetOf(F)));var W=g.getGlobalTransform().transformRectToRect(M);return{textPos:{row:F,column:N},bounds:M,globalBounds:W,morph:a.showDropGrid?Gd.morph({reactsToPointer:!1,acceptsDrops:!1,bounds:M,border:{width:1,color:Gd.Color.green},fill:null}):null}});return E.concat(H)},[]);r.forEach(function(E){return E.morph&&g.addMorph(E.morph)});return r}},{key:"onDropHoverIn",
value:function(a){var g={simpleDrop:window.hasOwnProperty("simpleDrop")?window.simpleDrop:!0,showDropGrid:window.hasOwnProperty("showDropGrid")?window.showDropGrid:!1,useTextFlowPlaceholder:window.hasOwnProperty("useTextFlowPlaceholder")?window.useTextFlowPlaceholder:!1},l=a.hand.grabbedMorphs[0];l&&(a.state.originalOpacity=l.opacity,l.opacity=.3);l=this.buildDropHoverGrid(g);a=a.state.dropHover||(a.state.dropHover=new WeakMap);var r=a.get(this);r||(r={},a.set(this,r));r.config=g;r.dropGrid=l}},{key:"onDropHoverUpdate",
value:function(a){var g=a.hand.grabbedMorphs[0];if(g){var l=a.state.dropHover;if(l&&(l=l.get(this)))if(l.dropGrid){var r=l.config;a=a.positionIn(this);for(var v,y,A=Infinity,E=$jscomp.makeIterator(l.dropGrid),F=E.next();!F.done;F=E.next()){F=F.value;if(F.bounds.containsPoint(a)){v=F;break}var H=F.bounds.closestPointToPt(a).dist(a);H<A&&(A=H,y=F)}v||(v=y);v&&(y=l.placeholder,y||(l.placeholder=y=Gd.morph({fill:g.fill,extent:g.extent,reactsToPointer:!1,acceptsDrops:!1})),Gd.obj.equals(y._textPos||{},
v.textPos)||(this!==y.owner&&this.addMorph(y),y.position=v.bounds.topLeft(),r&&r.useTextFlowPlaceholder&&(y.remove(),y._textPos=v.textPos,this.insertText([y,null],v.textPos))))}else g=this.textPositionFromPoint(a.positionIn(this)),this.focus(),this.cursorPosition=g}}},{key:"onDropHoverOut",value:function(a){var g=a.hand.grabbedMorphs[0];g&&(g.opacity=a.state.originalOpacity||1);if(a=a.state.dropHover)if(g=a.get(this))a.delete(this),g.dropGrid&&(g.dropGrid.forEach(function(l){return l.morph&&l.morph.remove()}),
g.dropGrid=null),g.placeholder&&(g.placeholder.remove(),g.placeholder=null)}},{key:"menuItems",value:function(){var a=this,g,l,r,v,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(A){if(1==A.nextAddress)return g=$jscomp,l=g.makeIterator,A.yield(Promise.all([dc._get(Object.getPrototypeOf(m.prototype),"menuItems",a).call(a),a.menuItemsForContextMenu()]),2);r=l.call(g,A.yieldResult);v=r.next().value;y=r.next().value;return A.return(v.concat({isDivider:!0}).concat(y))})}},{key:"menuItemsForContextMenu",
value:function(){var a=this,g,l,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){switch(y.nextAddress){case 1:g=[{command:"text undo",alias:"undo",target:a,showKeyShortcuts:!0},{command:"text redo",alias:"redo",target:a,showKeyShortcuts:!0},{command:"manual clipboard copy",alias:"copy",target:a,showKeyShortcuts:a.keysForCommand("clipboard copy"),args:{collapseSelection:!1,delete:!1}},{command:"manual clipboard paste",alias:"paste",target:a,showKeyShortcuts:a.keysForCommand("clipboard paste")},
{command:"open text attribute controls",alias:"edit text attributes",target:a},{isDivider:!0},{command:"toggle line wrapping",alias:(a.lineWrapping?"disable":"enable")+" line wrapping",target:a,showKeyShortcuts:!0},["run command",function(){a.focus();a.world().execCommand("run command")}]],l=$jscomp.makeIterator(a.plugins),r=l.next();case 2:if(r.done){y.jumpTo(4);break}v=r.value;if("function"!==typeof v.getMenuItems){y.jumpTo(3);break}return y.yield(v.getMenuItems(g),6);case 6:g=y.yieldResult;case 3:r=
l.next();y.jumpTo(2);break;case 4:return y.return(g)}})}},{key:"keybindings",get:function(){var a=this.world();a=a&&a.getCurrentUser()&&a.getCurrentUser().config&&a.getCurrentUser().config.textKeyBindings||[];a=dc._get(Object.getPrototypeOf(m.prototype),"keybindings",this).concat(a).concat(Gd.config.text.defaultKeyBindings);return this.pluginCollect("getKeyBindings",a)}},{key:"keybindings",set:function(a){dc._set(Object.getPrototypeOf(m.prototype),"keybindings",a,this)}},{key:"keyhandlers",get:function(){if(this._cachedKeyhandlers)return this._cachedKeyhandlers;
var a=dc._get(Object.getPrototypeOf(m.prototype),"keyhandlers",this).concat(this._keyhandlers||[]);return this._cachedKeyhandlers=a=this.pluginCollect("getKeyHandlers",a)}},{key:"snippets",get:function(){return this.pluginCollect("getSnippets",[])}},{key:"onHoverIn",value:function(a){dc._get(Object.getPrototypeOf(m.prototype),"onHoverIn",this).call(this,a);this.scrollActive=!0;this.makeDirty()}},{key:"onHoverOut",value:function(a){dc._get(Object.getPrototypeOf(m.prototype),"onHoverOut",this).call(this,
a);Gd.touchInputDevice||(this.scrollActive=!1,this.makeDirty())}},{key:"onKeyDown",value:function(a){this.compositionRange||a.targetMorph!=this||(this.selection.cursorBlinkStart(),Gd.KeyHandler.invokeKeyHandlers(this,a,!0))}},{key:"onTextInput",value:function(a){Gd.KeyHandler.invokeKeyHandlers(this,a,!1)}},{key:"onCompositionStart",value:function(a){this.insertTextAndSelect(a.data);this.compositionRange=this.selection.range}},{key:"onCompositionUpdate",value:function(a){this.selection.range=this.compositionRange;
this.selection.text=[a.data,{textDecoration:"underline"}];this.compositionRange=this.selection.range}},{key:"onCompositionEnd",value:function(a){this.selection.range=this.compositionRange;this.selection.text=a.data;this.cursorPosition=this.compositionRange.end;this.compositionRange=null}},{key:"onCut",value:function(a){if(!this.rejectsInput()&&this.isFocused()&&!Gd.config.emacs)this.onCopy(a,!this.rejectsInput())}},{key:"onCopy",value:function(a,g){g=void 0===g?!1:g;if(this.isFocused()){a.stop();
var l=this.selection;try{for(var r=this.textAndAttributesInRange(this.selection.range),v=this.defaultTextStyle,y={},A=0;A<r.length;A+=2){var E=r[A];if(E.isMorph)if(E.isDisplacementMorph)r[A]="";else{var F=y[A]=Gd.serializeMorph(r[A]);r[A]=Gd.deserializeMorph(F,{reinitializeIds:!0})}}var H=Gd.extractHTMLFromTextMorph(this,r);a.domEvt.clipboardData.setData("text/html",H);for(var I in y)r[I]=y[I];var M=JSON.stringify({textAndAttributes:r,defaultTextStyle:v});a.domEvt.clipboardData.setData("application/x-lively-text",
M)}catch(N){$world.logError(N)}a.domEvt.clipboardData.setData("text/plain",l.text);this.execCommand("manual clipboard copy",{collapseSelection:Gd.config.codeEditor.collapseSelection||!1,delete:g,dontTryNativeClipboard:!0})}}},{key:"onPaste",value:function(a){var g=this;if(!this.rejectsInput()){a.stop();var l="";try{l=a.domEvt.clipboardData.getData("text")}catch(A){console.warn(A)}if(!this.editorPlugin)try{var r=a.domEvt.clipboardData.getData("application/x-lively-text");var v=r&&JSON.parse(r);var y=
v.textAndAttributes;for(a=0;a<y.length;a+=2)"string"!==typeof y[a]&&(y[a]=Gd.deserializeMorph(y[a],{reinitializeIds:!0}))}catch(A){console.warn(A)}y=this.selection;y=y.isMultiSelection?y.selections:[y];v&&this.undoManager.group();y.forEach(function(A){v?g.replace(A.range,v.textAndAttributes,!1,!0,!0):A.text=l;g.saveMark(A.start);A.collapseToEnd()});v&&this.undoManager.group()}}},{key:"onFocus",value:function(a){dc._get(Object.getPrototypeOf(m.prototype),"onFocus",this).call(this,a);this.makeDirty();
this.selection.cursorBlinkStart();this._originalShadow||((a=this.haloShadow||this.propertiesAndPropertySettings().properties.haloShadow.defaultValue)&&!a.equals&&(a=new Gd.ShadowObject(a)),a&&!a.equals(this.dropShadow)&&(this._originalShadow=this.dropShadow),this.highlightWhenFocused&&this.animate({dropShadow:a,duration:200}))}},{key:"onBlur",value:function(a){this.makeDirty();this.selection.cursorBlinkStop();this.highlightWhenFocused&&this.animate({dropShadow:this._originalShadow||null,duration:200});
this._originalShadow=null;dc._get(Object.getPrototypeOf(m.prototype),"onBlur",this).call(this,a)}},{key:"onScroll",value:function(a){this.isFocused()&&this.ensureKeyInputHelperAtCursor();(a=this.env.renderer.getNodeForMorph(this))&&Gd.signal(this,"viewChanged",{prop:"scroll",value:Gd.pt(a.scrollLeft,a.scrollTop)})}},{key:"ensureKeyInputHelperAtCursor",value:function(){this.env.eventDispatcher.keyInputHelper&&this.env.eventDispatcher.keyInputHelper.ensureBeingAtCursorOfText(this)}},{key:"textPageHeight",
value:function(){var a=this.padding,g=this.borderWidthBottom,l=this.borderWidthTop;return this.height-a.top()-a.bottom()-g-l}},{key:"scrollPageDown",value:function(){this.scrollDown(this.textPageHeight())}},{key:"scrollPageUp",value:function(){this.scrollUp(this.textPageHeight())}},{key:"pageUpOrDown",value:function(a){var g=a=void 0===a?{direction:"up",select:!1}:a;a=g.direction;g=g.select;var l=this.textLayout["down"===a?"lastFullVisibleLine":"firstFullVisibleLine"](this),r=this.cursorPosition.column,
v=this.padding;g?this.selection.lead={row:l,column:r}:this.cursorPosition={row:l,column:r};"down"===a?this.alignRowAtTop(l,Gd.pt(0,-v.top()-v.bottom())):(this.alignRowAtBottom(l,Gd.pt(0,0)),this.alignRowAtBottom(l,Gd.pt(0,v.top()+v.bottom())))}},{key:"gotoDocumentStart",value:function(a){a=void 0===a?{select:!1}:a;this.selection.lead={row:0,column:0};a&&a.select||(this.selection.anchor=this.selection.lead)}},{key:"gotoDocumentEnd",value:function(a){a=void 0===a?{select:!1}:a;this.selection.lead=this.documentEndPosition;
a&&a.select||(this.selection.anchor=this.selection.lead)}},{key:"paragraphRangeAbove",value:function(a){if(this.isLineEmpty(a)){for(var g=a-1;0<=g;g--)if(!this.isLineEmpty(g)){var l=g;break}if(void 0===l)return{start:{row:a,column:0},end:{row:a,column:0}}}else l=a;return this.paragraphRange(l)}},{key:"paragraphRangeBelow",value:function(a){var g=this.isLineEmpty(a),l=this.documentEndPosition;if(g){for(g=a+1;g<=l.row;g++)if(!this.isLineEmpty(g)){var r=g;break}if(void 0===r)return{start:{row:a,column:0},
end:{row:a,column:0}}}else r=a;return this.paragraphRange(r)}},{key:"paragraphRange",value:function(a){if(this.isLineEmpty(a))return{start:{row:a,column:0},end:{row:a,column:0}};var g=this.documentEndPosition;for(a+=1;a<=g.row;a++)if(this.isLineEmpty(a)){var l={row:a-1,column:this.getLine(a-1).length};break}l||(l=g);for(a=l.row-1;0<=a;a--)if(this.isLineEmpty(a)){var r={row:a+1,column:0};break}r||(r={row:0,column:0});return{start:r,end:l}}},{key:"astNodeRange",value:function(a){return{start:this.document.indexToPosition(a.start),
end:this.document.indexToPosition(a.end)}}},{key:"parseIntoLines",value:function(a){return a.split("\n")}},{key:"computeTextRangeForChanges",value:function(a){function g(A,E){for(var F="",H=0;H<A.length;H+=2)F+="string"===typeof A[H]?A[H]:Gd.objectReplacementChar;A=r.parseIntoLines(F);return 1===A.length?Gd.Range.fromPositions(E,{row:E.row,column:E.column+A[0].length}):1<A.length?Gd.Range.fromPositions(E,{row:E.row+A.length-1,column:Gd.arr.last(A).length}):Gd.Range.at(E)}var l=Gd.Range.at(this.cursorPosition);
if(!a.length)return l;var r=this,v=a[0];l="replace"===v.selector?g(v.args[1],v.args[0].start):l;for(v=1;v<a.length;v++){var y=a[v];l="replace"===y.selector?l.merge(g(y.args[1],y.args[0].start)):l}return l}},{key:"ensureUndoManager",value:function(){if(this.undoManager)return this.undoManager;var a=["addTextAttribute","removeTextAttribute","setStyleInRange","replace"];return this.undoManager=new Gd.UndoManager(function(g){return a.includes(g.selector)})}},{key:"textUndo",value:function(){var a=this.undoManager.undo();
a&&(a=a.changes.slice().reverse().map(function(g){return g.undo}),this.selection=this.computeTextRangeForChanges(a))}},{key:"textRedo",value:function(){var a=this.undoManager.redo();a&&(a=a.changes.slice(),this.selection=this.computeTextRangeForChanges(a))}},{key:"findMatchingForward",value:function(a,g,l){g=void 0===g?"right":g;l=void 0===l?{}:l;var r=this["right"===g?"charRight":"charLeft"](a),v=l[r];if(!v)return null;var y="right"===g?-1:0;return this.document.scanForward(a,function(A,E){if(A===
v){if(0===y)return"right"===g?{row:E.row,column:E.column+1}:E;y--}else A===r&&y++;return null})}},{key:"findMatchingBackward",value:function(a,g,l){g=void 0===g?"right":g;l=void 0===l?{}:l;var r=this["right"===g?"charRight":"charLeft"](a),v=l[r];if(!v)return null;var y="left"===g?-1:0;return this.document.scanBackward(a,function(A,E){if(A===v){if(0===y)return"right"===g?{row:E.row,column:E.column+1}:E;y--}else A===r&&y++;return null})}},{key:"search",value:function(a,g){g=void 0===g?{start:this.cursorPosition,
backwards:!1,caseSensitive:!1}:g;return(new Gd.TextSearcher(this)).search(Object.assign({needle:a},g))}},{key:"searchForAll",value:function(a,g){g=void 0===g?{caseSensitive:!1}:g;return(new Gd.TextSearcher(this)).searchForAll(Object.assign({needle:a},g))}},{key:"tokenAt",value:function(a){return this.pluginInvokeFirst("tokenAt",a)}},{key:"astAt",value:function(a){return this.pluginInvokeFirst("astAt",a)}},{key:"evalEnvironment",get:function(){var a=this.editorPlugin;return a&&a.evalEnvironment}},
{key:"evalEnvironment",set:function(a){var g=this.editorPlugin;g&&(g.evalEnvironment=a)}},{key:"doitContext",get:function(){return(this.evalEnvironment||{}).context}},{key:"doitContext",set:function(a){(this.evalEnvironment||{}).context=a}},{key:"logDoit",value:function(a,g){g=void 0===g?{}:g;g=void 0===g.time?Date.now():g.time;if(!(12E4<a.length)){try{var l=JSON.parse(localStorage["lively.next-js-ide-doitlog"])}catch(r){}l||(l=[]);if(!l.some(function(r){return"string"===typeof r?r===a:r.source===
a})){l.push({source:a,time:g});50<l.length&&(l=l.slice(-50));try{localStorage["lively.next-js-ide-doitlog"]=JSON.stringify(l)}catch(r){}}}}},{key:"doEval",value:function(a,g,l){a=void 0===a?this.selection.isEmpty()?this.lineRange():this.selection.range:a;l=void 0===l?this.textInRange(a):l;a=this.pluginFind(function(r){return r.isEditorPlugin&&"function"===typeof r.runEval});if(!a)throw Error("doit not possible: cannot find js editor plugin of !"+this);g&&g.logDoit&&this.logDoit(l,g);return a.runEval(l,
g)}},{key:"maybeSelectCommentOrLine",value:function(){var a=this.selection,g=a.lead,l=g.row;g=g.column;var r=this.selectionOrLineString();if(a.isEmpty()){var v=r.indexOf("//");-1===v||g<v||0<v&&0<=":\"'".indexOf(r[v-1])?this.selectLine(l):a.range={start:{row:l,column:v+2},end:{row:l,column:r.length}}}}},{key:"debugHelper",value:function(a){a=Object.assign({debugDocumentUpdate:!0,debugTextLayout:!0},a);return this._debugHelper?Object.assign(this._debugHelper,a):this._debugHelper=Object.assign({},a,
{logged:[],groups:[],reset:function(){this.groups=[[]];this.logged=this.groups[0]},log:function(g){for(var l=[],r=0;r<arguments.length;++r)l[r-0]=arguments[r];console.log.apply(console,$jscomp.arrayFromIterable(l));this.logged.push({args:l})},dump:function(g){console.log(g.split("\n").map(function(l){return l.slice(0,100)}).join("\n"));this.logged.push({dump:g})},group:function(g){this.groups.push([]);this.logged=Gd.arr.last(this.groups);console.group(g)},groupEnd:function(g){console.groupEnd(g)},
steps:function(g){for(var l=[];g.length;){var r=Gd.arr.takeWhile(g,function(y){return!y.dump});g=g.slice(r.length);var v=(g.shift()||{}).dump;l.push({actions:r,dump:v})}return l},printToConsole:function(){var g=this;console.clear();this.groups.forEach(function(l){var r=g.steps(l);console.group(r.length);g.steps(l).forEach(function(v,y){v=v.actions;console.group("step "+(y+1));v.forEach(function(A){return console.log.apply(console,$jscomp.arrayFromIterable(A.args))});console.groupEnd("step "+(y+1))});
console.groupEnd(r.length)})},report:function(){var g=this,l,r,v,y,A,E,F;return $jscomp.asyncExecutePromiseGeneratorProgram(function(H){if(1==H.nextAddress)return H.yield(System.import("jsdiff",System.decanonicalize("lively.morphic")),2);if(3!=H.nextAddress)return l=H.yieldResult,H.yield(System.import("lively.ide/diff/editor-plugin.js"),3);r=H.yieldResult;v=r.default;y=0;A="";E=[];F=0;g.groups.forEach(function(I,M){A+=">>> group "+(M+1)+"\n";F++;y++;var N=g.steps(I);N.forEach(function(W,X){var ea=
W.actions;W=W.dump;A+=Gd.string.indent(">>> step "+(X+1)," ",y)+"\n";F++;y++;ea.forEach(function(Aa){Aa=Gd.string.indent(Gd.string.formatFromArray(Aa.args.slice()).trim()," ",y);F+=Aa.split("\n").length;A+=Aa+"\n"});1<=X&&W&&N[X-1].dump&&(ea=new v,W=l.createPatch(String(X),N[X-1].dump,W),ea.tokenize(W),E.push.apply(E,$jscomp.arrayFromIterable(ea.styledRanges(F,y))),A+=W,F+=W.split("\n").length-1);A+=Gd.string.indent("<< step "+(X+1)," ",y)+"\n";F++;y--});A+="<<< group "+(M+1)+"\n";F++;y--});return H.return({report:A,
reportStyles:E})})},openReport:function(){var g=this,l,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){if(1==y.nextAddress)return y.yield(g.report(),2);l=y.yieldResult;r=l.reportStyles;v=l.report;return y.return($world.execCommand("open text window",{title:"text debug",fontFamily:"monospace",content:v,rangesAndStyles:r}))})}})}},{key:"consistencyCheck",value:function(){if(this.debug)return this.document.consistencyCheck();try{return this.document.consistencyCheck()}catch(r){var a=
this.document;this.brokenDocument||(this.brokenDocument=a);var g=this.world()||$world;try{var l=new Gd.Document([]);l.textAndAttributes=a.textAndAttributes;this.changeDocument(l)}catch(v){g?g.logError("Broken document could not be fixed"):console.error("Broken document could not be fixed")}g?g.logError(r):console.error(r)}}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Text"}},{key:"makeLabel",value:function(a,g){return new Gd.morph(Object.assign({type:"label",value:a,fontFamily:"IBM Plex, Helvetica Neue, Arial, sans-serif",
fontColor:Gd.Color.almostBlack,fontSize:11},g))}},{key:"makeInputLine",value:function(a){return new (System.get(System.decanonicalize("lively.morphic")).InputLine)(a)}},{key:"defaultTextStyle",get:function(){if(this._defaultTextStyle)return this._defaultTextStyle;for(var a=this.prototype.propertiesAndPropertySettings().properties,g=this.defaultTextStyleProps,l={},r=0;r<g.length;r++){var v=g[r];l[v]=a[v].defaultValue}return this._defaultTextStyle=l}},{key:"defaultTextStyleProps",get:function(){if(this._defaultTextStyleProps)return this._defaultTextStyleProps;
var a=this.prototype.propertiesAndPropertySettings().properties,g=[],l;for(l in a)a[l].isDefaultTextStyleProp&&g.push(l);return this._defaultTextStyleProps=g}},{key:"properties",get:function(){return{clipMode:{isStyleProp:!0,defaultValue:"visible",set:function(a){this.setProperty("clipMode",a);this.fixedWidth=this.fixedHeight=this.isClip()}},fontMetric:{group:"_rendering",serialize:!1,get:function(){return this.getProperty("fontMetric")||this.env.fontMetric}},undoManager:{group:"core",before:["document"],
initialize:function(){this.ensureUndoManager()}},textRenderer:{group:"_rendering",after:["viewState"],initialize:function(){this.textRenderer=new Gd.Renderer(this.env.domEnv)}},debug:{group:"_debugging",isStyleProp:!0,after:["textRenderer","textLayout"],defaultValue:!1,doc:"For visualizing and debugging text layout and rendering"},defaultViewState:{group:"_rendering",derived:!0,readOnly:!0,get:function(){return{_needsFit:!0,text_layer_node:null,fontmetric_text_layer_node:null,dom_nodes:[],dom_nodeFirstRow:[],
scrollTop:0,scrollHeight:0,scrollBottom:0,textHeight:0,textWidth:0,firstVisibleRow:0,lastVisibleRow:0,heightBefore:0,wasScrolled:!1,afterTextRenderHook:null,fastScroll:!0}}},viewState:{group:"_rendering",initialize:function(){this.viewState=this.defaultViewState}},displacingMorphMap:{group:"_rendering",initialize:function(){this.displacingMorphMap=new Map}},embeddedMorphMap:{group:"_rendering",initialize:function(){this.embeddedMorphMap=new Map}},embeddedMorphs:{group:"text",derived:!0,readOnly:!0,
after:["embeddedMorphMap"],get:function(){return this.embeddedMorphMap?Array.from(this.embeddedMorphMap.keys()):[]}},textLayout:{group:"_rendering",after:["textRenderer"],initialize:function(){this.textLayout=new Gd.TextLayout(this)}},document:{group:"text",initialize:function(){this.document=Gd.Document.fromString("",{maxLeafSize:50,minLeafSize:25,maxNodeSize:35,minNodeSize:7});this.consistencyCheck()}},draggable:{defaultValue:!1},useSoftTabs:{group:"text",isStyleProp:!0,defaultValue:void 0!==Gd.config.text.useSoftTabs?
Gd.config.text.useSoftTabs:!0},tabWidth:{group:"text",isStyleProp:!0,defaultValue:Gd.config.text.tabWidth||2},tab:{group:"text",after:["useSoftTabs","tabWidth"],readOnly:!0,derived:!0,get:function(){return this.useSoftTabs?" ".repeat(this.tabWidth):"\t"}},autoInsertPairs:{group:"text",defaultValue:!0},extent:{get:function(){var a=this,g=this.getProperty("extent");!this._textChange&&this.viewState&&this.viewState._needsFit&&!this._rendering&&!this._measuringTextBox&&g&&this.owner&&(this._measuringTextBox=
!0,Gd.noUpdate(function(){a.directRender()}),this._measuringTextBox=!1);return this.getProperty("extent")}},fixedWidth:{group:"text",isStyleProp:!0,after:["clipMode","viewState"],defaultValue:!1},fixedHeight:{group:"text",isStyleProp:!0,after:["clipMode","viewState"],defaultValue:!1},readOnly:{group:"text",isStyleProp:!0,defaultValue:!1,set:function(a){this.nativeCursor=a?"default":"auto";this.setProperty("readOnly",a)}},selectable:{group:"selection",isStyleProp:!0,after:["selection"],defaultValue:!0,
set:function(a){this.setProperty("selectable",a);a||this.selection.collapse()}},padding:{group:"styling",type:"Rectangle",isStyleProp:!0,after:["textLayout","viewState"],defaultValue:Gd.Rectangle.inset(0),set:function(a){this.setProperty("padding","number"===typeof a?Gd.Rectangle.inset(a):a)}},haloShadow:{group:"styling",type:"Shadow",isStyleProp:!0,defaultValue:null},highlightWhenFocused:{group:"styling",defaultValue:!1,after:["haloShadow"],set:function(a){this.setProperty("highlightWhenFocused",
a);a&&!this.haloShadow&&(this.haloShadow={blur:6,color:Gd.Color.rgb(52,152,219),distance:0,rotation:45})}},cursorPosition:{group:"selection",derived:!0,after:["selection"],get:function(){return this.selection.lead},set:function(a){this.selection.range={start:a,end:a}}},selection:{group:"selection",derived:!0,after:["document","anchors"],get:function(){var a=this.getProperty("selection");if(a)return a;a=new (Gd.config.text.useMultiSelect?Gd.MultiSelection:Gd.Selection)(this);this.setProperty("selection",
a);return a},set:function(a){this._isDeserializing&&this._initializedByCachedBounds&&this.textLayout.restore(this._initializedByCachedBounds,this);a?a.isSelection?this.setProperty("selection",a):this.selection.range=a:(this.selection.isMultiSelection&&this.selection.disableMultiSelect(),this.selection.collapse())}},selections:{group:"selection",derived:!0,after:["selection"],get:function(){return this.selection.isMultiSelection?this.selection.selections:[this.selection]},set:function(a){var g=this;
this.selection=a[0];this.selection.isMultiSelection&&a.slice(1).forEach(function(l){return g.selection.addRange(l)})}},textString:{group:"text",after:["document"],derived:!0,get:function(){return this.document?this.document.textString:""},set:function(a){a=null!=a?String(a):"";this._isDeserializing&&this._initializedByCachedBounds&&this.textLayout.restore(this._initializedByCachedBounds,this);this.deleteText({start:{column:0,row:0},end:this.document.endPosition});this.insertText(a,{column:0,row:0})}},
value:{group:"text",after:["document","embeddedMorphMap"],derived:!0,get:function(){var a=this.textAndAttributes;if(1===a.length){var g=$jscomp.makeIterator(a[0]),l=g.next().value;g=g.next().value;if(!Object.keys(g||{}).length)return l}return a},set:function(a){"string"===typeof a?this.textString=a:this.textAndAttributes=a}},textAndAttributes:{group:"text",derived:!0,after:["document"],get:function(){return this.document.textAndAttributes},set:function(a){this._isDeserializing&&this._initializedByCachedBounds&&
this.textLayout.restore(this._initializedByCachedBounds,this);this.replace({start:{row:0,column:0},end:this.documentEndPosition},a)}},defaultTextStyleProps:{group:"_internal",readOnly:!0,derived:!0,get:function(){return this.constructor.defaultTextStyleProps}},defaultTextStyle:{group:"styling",after:["viewState"],derived:!0,get:function(){return Gd.obj.select(this,this.defaultTextStyleProps)},set:function(a){Object.assign(this,a)}},customizedTextStyle:{group:"styling",readOnly:!0,derived:!0,get:function(){for(var a=
{},g=this.defaultTextStyleProps,l=this.constructor.defaultTextStyle,r=0;r<g.length;r++){var v=g[r],y=this[v];y!==l[v]&&(a[v]=y)}return a}},nativeCursor:{defaultValue:"",isDefaultTextStyleProp:!0},fontFamily:{group:"text styling",type:"Enum",values:Gd.config.text.basicFontItems,defaultValue:"IBM Plex Sans, Sans-Serif",isStyleProp:!0,isDefaultTextStyleProp:!0,after:["defaultTextStyle"]},fontSize:{group:"text styling",type:"Number",min:1,unit:"pt",defaultValue:12,isStyleProp:!0,isDefaultTextStyleProp:!0,
after:["defaultTextStyle"]},selectionColor:{group:"text styling",type:"Color",defaultValue:Gd.Color.rgba(212,230,241,.8),isStyleProp:!0,after:["defaultTextStyle"]},cursorColor:{group:"text styling",type:"Color",isStyleProp:!0,after:["defaultTextStyle"],defaultValue:Gd.Color.black},fontColor:{group:"text styling",type:"Color",defaultValue:Gd.Color.black,isStyleProp:!0,isDefaultTextStyleProp:!0,after:["defaultTextStyle"]},fontWeight:{group:"text styling",type:"Enum",values:["bold","bolder","light",
"lighter","normal"],defaultValue:"normal",isStyleProp:!0,isDefaultTextStyleProp:!0,after:["defaultTextStyle"]},fontStyle:{group:"text styling",type:"Enum",values:["normal","italic","oblique"],defaultValue:"normal",isStyleProp:!0,isDefaultTextStyleProp:!0,after:["defaultTextStyle"]},textDecoration:{group:"text styling",type:"Enum",values:["none","underline"],defaultValue:"none",isStyleProp:!0,isDefaultTextStyleProp:!0,after:["defaultTextStyle"]},textStyleClasses:{group:"text styling",isStyleProp:!0,
isDefaultTextStyleProp:!0,after:["defaultTextStyle"]},backgroundColor:{group:"text styling",type:"Color",isStyleProp:!0,isDefaultTextStyleProp:!0,after:["defaultTextStyle"]},textAlign:{group:"text styling",type:"Enum",values:["center","justify","left","right"],isStyleProp:!0,isDefaultTextStyleProp:!0,after:["document","defaultTextStyle","viewState"]},lineHeight:{group:"text styling",type:"Number",min:1,isFloat:!0,isStyleProp:!0,isDefaultTextStyleProp:!0,defaultValue:1.4,after:["document","defaultTextStyle",
"viewState"]},letterSpacing:{group:"text styling",isStyleProp:!0,isDefaultTextStyleProp:!0,after:["document","defaultTextStyle","viewState"]},wordSpacing:{group:"text styling",isStyleProp:!0,isDefaultTextStyleProp:!0,after:["document","defaultTextStyle","viewState"]},lineWrapping:{group:"text",type:"Enum",values:[!1,!0,"by-words","anywhere","only-by-words","wider","by-chars"],isStyleProp:!0,defaultValue:!1,after:["document","viewState"]},anchors:{group:"core",defaultValue:[],set:function(a){var g=
this,l=Gd.arr.withoutAll(a,this.anchors);Gd.arr.withoutAll(this.anchors,a).forEach(function(r){return g.removeAnchor(r)});l.forEach(function(r){return g.addAnchor(r)})}},markers:{group:"core",defaultValue:[]},savedMarks:{group:"core",defaultValue:[],after:["anchors"],set:function(a){var g=this;a=a.map(function(r){return r.isAnchor?r:g.addAnchor(Object.assign({},r,{id:"saved-mark-"+Gd.string.newUUID()}))});var l=this.savedMarks.filter(function(r){return!a.includes(r)});a>Gd.config.text.markStackSize&&
l.push.apply(l,$jscomp.arrayFromIterable(a.splice(0,a.length-Gd.config.text.markStackSize)));l.map(function(r){return g.removeAnchor(r)});return this.setProperty("savedMarks",a)}},activeMarkPosition:{group:"_internal",after:["activeMark"],derived:!0,get:function(){var a=this.activeMark;return a?a.position:null}},activeMark:{group:"core",after:["anchors"],set:function(a){if(a)a=this.addAnchor(a.isAnchor?a:Object.assign({},a,{id:"saved-mark-"+Gd.string.newUUID()}));else{var g=this.activeMark;this.savedMarks.includes(g)||
this.removeAnchor(g)}this.setProperty("activeMark",a)}},plugins:{group:"plugins",defaultValue:[],after:["value"],set:function(a){var g=this,l=this.getProperty("plugins");Gd.arr.withoutAll(l,a).forEach(function(r){return r&&g.removePlugin(r)});a.forEach(function(r){return r&&g.addPlugin(r)})}},editorModeName:{group:"plugins",derived:!0,after:["plugins"],get:function(){var a=this.editorPlugin;return a?a.shortName:null},set:function(a){this.changeEditorMode(a)}}}}}],e,{pathInPackage:function(){return"text/morph.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:1301,end:112585})}(Gd.Morph));Gd.Text=Vt;Gd.Text=Vt;Gd.Text=Vt;var Yqa=Object.freeze({__proto__:null,Text:Vt}),gi=lively.FreezerRuntime.recorderFor("lively.morphic/text/label.js");gi.obj=Ag;gi.promise=zh;gi.arr=$f;gi.string=pi;gi.properties=up;gi.Rectangle=He;gi.Color=Fg;gi.signal=Wl;
gi.vdom=XG;gi.Morph=Ll;gi.config=Dn;gi.defaultStyle=Px;gi.defaultAttributes=Qx;gi.Icon=Np;gi.Icons=tM;gi.splitTextAndAttributesIntoLines=xG;gi.h=gi.vdom.h;var Wt=Da("ax",function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/text/label.js"),m=e.hasOwnProperty("Label")&&"function"===typeof e.Label?e.Label:e.Label=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return dc(m,b,[{key:Symbol.for("lively-instance-initialize"),
value:function(a){var g=a=void 0===a?{}:a,l=g.fontMetric,r=g.position,v=g.rightCenter,y=g.leftCenter,A=g.topCenter,E=g.bottom,F=g.top,H=g.right,I=g.left,M=g.bottomCenter,N=g.bottomLeft,W=g.bottomRight,X=g.topRight,ea=g.topLeft,Aa=g.center;g=g.extent;dc._get(Object.getPrototypeOf(m.prototype),Symbol.for("lively-instance-initialize"),this).call(this,gi.obj.dissoc(a,["fontMetric"]));l&&(this._fontMetric=l);this._cachedTextBounds=null;this.fit();void 0!==g&&(this.extent=g);void 0!==r&&(this.position=
r);void 0!==v&&(this.rightCenter=v);void 0!==y&&(this.leftCenter=y);void 0!==A&&(this.topCenter=A);void 0!==E&&(this.bottom=E);void 0!==F&&(this.top=F);void 0!==H&&(this.right=H);void 0!==I&&(this.left=I);void 0!==M&&(this.bottomCenter=M);void 0!==N&&(this.bottomLeft=N);void 0!==W&&(this.bottomRight=W);void 0!==X&&(this.topRight=X);void 0!==ea&&(this.topLeft=ea);void 0!==Aa&&(this.center=Aa)}},{key:"__additionally_serialize__",value:function(a,g,l,r){dc._get(Object.getPrototypeOf(m.prototype),"__additionally_serialize__",
this).call(this,a,g,l,r);this.fit();a._cachedTextBounds=this._cachedTextBounds&&this._cachedTextBounds.toTuple()}},{key:"__after_deserialize__",value:function(a,g,l){dc._get(Object.getPrototypeOf(m.prototype),"__after_deserialize__",this).call(this,a,g,l);a._cachedTextBounds&&(this.changeMetaData("deserializeInfo",{recoveredTextBounds:!0}),this._cachedTextBounds=gi.Rectangle.fromTuple(a._cachedTextBounds))}},{key:"isLabel",get:function(){return!0}},{key:"textStyle",get:function(){return gi.obj.select(this,
"textStyleClasses textDecoration fontStyle fontWeight textShadow fontColor fontSize fontFamily".split(" "))}},{key:"fit",value:function(){this.extent=this.textBounds().extent();this.visible?this._needsFit=!1:this._cachedTextBounds=null;return this}},{key:"fitIfNeeded",value:function(){this._needsFit&&this.allFontsLoaded()&&this.fit()}},{key:"textAndAttributesOfLines",get:function(){return gi.splitTextAndAttributesIntoLines(this.textAndAttributes,"\n")}},{key:"allFontsLoaded",value:function(){var a=
this,g=this.env.fontMetric;return[this].concat($jscomp.arrayFromIterable(this.textAndAttributes.map(function(l,r){if(r%2)return{fontFamily:l&&l.fontFamily||a.fontFamily,fontWeight:l&&l.fontWeight||a.fontWeight}}).filter(Boolean))).every(function(l){return g.isFontSupported(l.fontFamily,l.fontWeight)})}},{key:"whenFontLoaded",value:function(){var a=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(g){return g.return(gi.promise.waitFor(5E3,function(){return a.allFontsLoaded()}))})}},
{key:"textBoundsSingleChunk",value:function(){var a=this._fontMetric||this.env.fontMetric,g=$jscomp.makeIterator(this.textAndAttributes),l=g.next().value;g=g.next().value;var r=Object.assign({},this.textStyle,{},g);g=this.padding;a.isProportional(r.fontFamily)?(a=a.sizeFor(r,l),l=a.width,a=a.height):(r=a.sizeFor(r,"x"),a=r.height,l=l.length*r.width);return new gi.Rectangle(0,0,Math.ceil(g.left()+g.right()+l),Math.ceil(g.top()+g.bottom()+a))}},{key:"textBoundsAllChunks",value:function(){for(var a=
this._fontMetric||this.env.fontMetric,g=this.padding,l=this.textStyle,r=this.textAndAttributesOfLines,v=!a.isProportional(l.fontFamily),y=a.sizeFor(l,"x").height,A=0,E=0,F=0;F<r.length;F++){var H=r[F];if(H.length){for(var I=0,M=0,N=0;N<H.length;N+=2){var W=H[N],X=H[N+1]||{},ea=Object.assign({},l,{},X);v&&!X.fontFamily||!a.isProportional(ea.fontFamily)?(X=a.sizeFor(ea,"x"),ea=X.height,M+=W.length*X.width,I=Math.max(I,ea)):(W=a.sizeFor(ea,W),X=W.height,M+=W.width,I=Math.max(I,X))}A+=I;E=Math.max(E,
M)}else A+=y}return new gi.Rectangle(0,0,Math.ceil(g.left()+g.right()+E),Math.ceil(g.top()+g.bottom()+A))}},{key:"invalidateTextLayout",value:function(){this._cachedTextBounds=null;this.autofit&&(this._needsFit=!0);this.makeDirty()}},{key:"textBounds",value:function(){var a=this.textAndAttributes,g=this._cachedTextBounds;return g?g:this._cachedTextBounds=2>=a.length?this.textBoundsSingleChunk():this.textBoundsAllChunks()}},{key:"forceRerender",value:function(){this._cachedTextBounds=null;this.makeDirty()}},
{key:"applyLayoutIfNeeded",value:function(){this.fitIfNeeded();dc._get(Object.getPrototypeOf(m.prototype),"applyLayoutIfNeeded",this).call(this)}},{key:"render",value:function(a){this._requestMasterStyling&&(this.master&&this.master.applyIfNeeded(!0),this._requestMasterStyling=!1);for(var g=[],l=this.textAndAttributesOfLines.length,r=0;r<l;r++){for(var v=this.textAndAttributesOfLines[r],y=0;y<v.length;y+=2){var A=v[y+1];g.push(this.renderChunk(v[y],A))}r<l-1&&g.push(gi.h("br"))}A=this.textStyle;var E=
A.fontColor,F=A.fontSize;l=A.fontStyle;r=A.fontWeight;v=A.textShadow;y=A.textDecoration;var H=A.textStyleClasses,I=this.padding;A={fontFamily:A.fontFamily,fontSize:"number"===typeof F?F+"px":F,color:E?String(E):"transparent",position:"absolute",cursor:this.nativeCursor};E=gi.defaultAttributes(this,a);v&&(A.textShadow=v);"normal"!==r&&(A.fontWeight=r);"normal"!==l&&(A.fontStyle=l);"none"!==y&&(A.textDecoration=y);H&&H.length&&(E.className=(E.className||"")+" "+H.join(" "));E.style=Object.assign({},
gi.defaultStyle(this),{},A);return gi.h("div",E,[gi.h("div",{style:{pointerEvents:"none",position:"absolute",paddingLeft:I.left()+"px",paddingRight:I.right()+"px",paddingTop:I.top()+"px",paddingBottom:I.bottom()+"px",width:"calc(100% - "+I.left()+"px - "+I.right()+"px)"}},g),a.renderSubmorphs(this)])}},{key:"renderChunk",value:function(a,g){var l=g=g||{},r=l.backgroundColor,v=l.fontColor,y=l.fontFamily,A=l.fontStyle,E=l.fontWeight,F=l.textShadow,H=l.textDecoration,I=l.textStyleClasses,M=l.textAlign,
N=l.float,W=l.display,X=l.lineHeight,ea=l.opacity;l={};var Aa={style:l};N&&(l.float=N);W&&(l.display=W);r&&(l.backgroundColor=String(r));y&&(l.fontFamily=y);v&&(l.color=String(v));F&&(l.textShadow=F);"normal"!==E&&(l.fontWeight=E);"normal"!==A&&(l.fontStyle=A);"none"!==H&&(l.textDecoration=H);M&&(l.textAlign=M);X&&(l.lineHeight=X);ea&&(l.opacity=ea);I&&I.length&&(Aa.className=I.join(" "));r="fontSize width height maxWidth maxHeight top left padding paddingLeft paddingRight paddingBottom paddingTop marginTop marginRight marginLeft marginBottom".split(" ");
for(v=0;v<r.length;v++)y=r[v],g.hasOwnProperty(y)&&(A=g[y],l[y]="number"===typeof A?A+"px":A);return gi.h("span",Aa,a)}},{key:"interactivelyChangeLabel",value:function(){var a=this,g;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){if(1==l.nextAddress)return l.yield(a.world().prompt("edit label",{input:a.textString,historyId:"lively.morphic-label-edit-hist"}),2);g=l.yieldResult;"string"===typeof g&&(a.textString=g);l.jumpToEnd()})}},{key:"menuItems",value:function(){var a=this,g=dc._get(Object.getPrototypeOf(m.prototype),
"menuItems",this).call(this);g.unshift({isDivider:!0});g.unshift(["change label",function(){return a.interactivelyChangeLabel()}]);return g}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Label"}},{key:"properties",get:function(){return{fill:{defaultValue:gi.Color.transparent},draggable:{defaultValue:!1},nativeCursor:{defaultValue:"default"},isIcon:{derived:!0,get:function(){return gi.properties.values(gi.Icons).map(function(a){return a.code}).includes(this.textString)}},value:{derived:!0,
after:["textAndAttributes","textString"],get:function(){var a=this.textAndAttributes;if(2>=a.length){var g=$jscomp.makeIterator(a),l=g.next().value;g=g.next().value;if(!Object.keys(g||{}).length)return l||""}return a},set:function(a){"string"===typeof a?this.textString=a:this.textAndAttributes=a}},textString:{derived:!0,after:["textAndAttributes"],get:function(){return this.textAndAttributes.map(function(a,g){return 0==g%2?a:""}).join("")},set:function(a){this.textAndAttributes=[a,null]}},textAndAttributes:{get:function(){var a=
this.getProperty("textAndAttributes");if(!a||1>a.length)a=["",null];return a},set:function(a){Array.isArray(a)||(a=[String(a),{}]);0===a.length&&(a=["",{}]);this.setProperty("textAndAttributes",a);this.autofit&&this.invalidateTextLayout();gi.signal(this,"value",a)}},valueAndAnnotation:{derived:!0,after:["textAndAttributes"],get:function(){var a=this.textAndAttributes,g=null;if(2<a.length){var l=$jscomp.makeIterator(a.slice(-2)),r=l.next().value;(l=l.next().value)&&l.textStyleClasses&&l.textStyleClasses.includes("annotation")&&
(a=a.slice(0,-2),g=[r,l])}return{value:a,annotation:g}},set:function(a){var g=a.value;a=a.annotation;g||(g="");"string"===typeof g&&(g=[g,null]);Array.isArray(g)||(g=[String(g),null]);g=g.slice();if(a){"string"===typeof a&&(a=[a,null]);var l=a[1];l||(l=a[1]={});g.push.apply(g,$jscomp.arrayFromIterable(a));l.textStyleClasses=(l.textStyleClasses||[]).concat("annotation");l.textStyleClasses.includes("annotation")||l.textStyleClasses.push("annotation")}this.textAndAttributes=g}},autofit:{defaultValue:!0,
set:function(a){this.setProperty("autofit",a);a&&(this._needsFit=!0)}},padding:{type:"Rectangle",isStyleProp:!0,defaultValue:gi.Rectangle.inset(0),initialize:function(a){this.padding=a},set:function(a){a||(a=gi.Rectangle.inset(0));var g=this.padding;this.setProperty("padding","number"===typeof a?gi.Rectangle.inset(a):a);this.autofit&&!g.equals(a)&&this.invalidateTextLayout()}},fontFamily:{isStyleProp:!0,type:"Enum",values:gi.config.text.basicFontItems,defaultValue:"IBM Plex Sans, Sans-Serif",set:function(a){var g=
this.fontFamily;this.setProperty("fontFamily",a);this.autofit&&g!=a&&this.invalidateTextLayout()}},fontSize:{type:"Number",min:1,isStyleProp:!0,defaultValue:12,set:function(a){var g=this.fontSize;this.setProperty("fontSize",a);this.autofit&&a!=g&&this.invalidateTextLayout()}},fontColor:{type:"Color",isStyleProp:!0,defaultValue:gi.Color.black},fontWeight:{type:"Enum",values:["bold","bolder","light","lighter"],isStyleProp:!0,defaultValue:"normal",set:function(a){var g=this.fontWeight;this.setProperty("fontWeight",
a);this.autofit&&g!=a&&this.invalidateTextLayout()}},fontStyle:{type:"Enum",values:["normal","italic","oblique"],isStyleProp:!0,defaultValue:"normal",set:function(a){var g=this.fontStyle;this.setProperty("fontStyle",a);this.autofit&&g!=a&&this.invalidateTextLayout()}},textShadow:{type:"String",isStyleProp:!0,defaultValue:""},textDecoration:{defaultValue:"none"},textStyleClasses:{defaultValue:void 0,set:function(a){this.setProperty("textStyleClasses",a);this.autofit&&this.invalidateTextLayout()}}}}},
{key:"icon",value:function(a,g){g=void 0===g?{prefix:"",suffix:""}:g;return gi.Icon.makeLabel(a,g)}}],e,{pathInPackage:function(){return"text/label.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:490,end:17366})}(gi.Morph));gi.Label=Wt;gi.Label=Wt;gi.Label=Wt;var Zqa=Object.freeze({__proto__:null,Label:Wt}),cm=lively.FreezerRuntime.recorderFor("lively.morphic/style-sheets.js");
cm.arr=$f;cm.obj=Ag;cm.rect=zm;cm.ShadowObject=zs;cm.morph=sa;var Hv=Da("aV",function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/style-sheets.js"),m=e.hasOwnProperty("StyleSheet")&&"function"===typeof e.StyleSheet?e.StyleSheet:e.StyleSheet=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return dc(m,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a,g){cm.obj.isObject(a)&&!g&&(g=a,a=null);
this.rules=g;for(var l in g)g[l]=this.unwrapFoldedProps(g[l]);this.name=a}},{key:"copy",value:function(){var a={},g;for(g in this.rules)a[g]=Object.assign({},this.rules[g]);return new cm.StyleSheet(this.name,a)}},{key:"__only_serialize__",get:function(){return["rules","context"]}},{key:"context",set:function(a){this._context=a}},{key:"context",get:function(){return this._context}},{key:"unwrapFoldedProps",value:function(a){["borderRadius","borderWidth","borderColor","borderStyle"].forEach(function(g){if(g in
a){var l=a[g];l||(l=0);a[g]=4==cm.arr.intersect(cm.obj.keys(l),["top","left","bottom","right"]).length?l:{top:l,bottom:l,right:l,left:l,valueOf:function(){return l}}}});return a}},{key:"removeRule",value:function(a){delete this.rules[a];this.context.requestStyling()}},{key:"setRule",value:function(a,g){this.rules[a]=this.unwrapFoldedProps(g);this.context.requestStyling()}},{key:"toggleRule",value:function(a,g){this.rules[a]._deactivated=!g;this.context.requestStyling()}},{key:"applicableRules",value:function(){var a=
{},g;for(g in this.rules)a[g]={styleSheet:this,rule:g};return a}},{key:"toJSExpr",value:function(){return"new StyleSheet("+cm.obj.inspect(this.rules,{customPrinter:function(a,g,l){return a&&a.isColor||a&&a.isGradient?a.toJSExpr():a&&a.isPoint?a.toString():a&&cm.arr.all([a.top,a.left,a.right,a.bottom],function(r){return r&&cm.obj.equals(r,a.top)})?l(a.top):a&&cm.obj.keys(a).includes("_rev")?l(cm.obj.dissoc(a,["_rev","_deactivated"])):g},escapeKeys:!0})+")"}},{key:"applyRule",value:function(a,g,l){var r=
this.rules[a];if(r._deactivated)return{};r=cm.obj.dissoc(r,["_deactivated"]);return g.withMetaDo({styleSheetChange:!0},function(){if("layout"in r){var v=r.layout.copy();v.container=g;r.layout=v}"dropShadow"in r&&(r.dropShadow=new cm.ShadowObject(r.dropShadow),r.dropShadow.morph=g);"padding"in r&&(r.padding=r.padding.isRect?r.padding:cm.rect(r.padding,r.padding));v=cm.obj.keys(r).filter(function(F){return!cm.obj.equals(g[F],r[F])});v=cm.obj.select(r,v);var y=g.propertiesAndPropertySettings().properties,
A={},E;for(E in r)A[E]=y[E]&&y[E].defaultValue||g[E];l?g.animate(Object.assign({},v,{duration:l.duration,easing:l.easing})):Object.assign(g,v);return A})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"StyleSheet"}}],e,{pathInPackage:function(){return"style-sheets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:203,
end:3669})}(void 0));cm.StyleSheet=Hv;cm.StyleSheet=Hv;cm.StyleSheet=Hv;var Yg=lively.FreezerRuntime.recorderFor("lively.morphic/text/input-line.js");Yg.obj=Ag;Yg.arr=$f;Yg.num=Nm;Yg.Rectangle=He;Yg.rect=zm;Yg.Color=Fg;Yg.pt=xi;Yg.connect=rl;Yg.noUpdate=mw;Yg.signal=Wl;Yg.disconnect=zo;Yg.Text=Vt;Yg.Range=Yy;Yg.HTMLMorph=Uy;Yg.Icon=Np;Yg.morph=sa;var TV=function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/text/input-line.js"),m=e.hasOwnProperty("InputLine")&&"function"===typeof e.InputLine?
e.InputLine:e.InputLine=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return dc(m,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){a=void 0===a?{}:a;dc._get(Object.getPrototypeOf(m.prototype),Symbol.for("lively-instance-initialize"),this).call(this,a);Yg.connect(this,"textChange",this,"onInputChanged");Yg.connect(this,"selectionChange",this,"fixCursor")}},{key:"onChange",value:function(a){"extent fontSize padding fontFamily position selection".split(" ").includes(a.prop)&&
this.updatePlaceholder();return dc._get(Object.getPrototypeOf(m.prototype),"onChange",this).call(this,a)}},{key:"isInputLine",get:function(){return!0}},{key:"allowDuplicatesInHistory",get:function(){return!1}},{key:"resetHistory",value:function(){this.inputHistory={items:[],max:50,index:0}}},{key:"inputHistory",get:function(){return this._inputHistory?this._inputHistory:this._inputHistory=this.historyId?this.constructor.getHistory(this.historyId):{items:[],max:30,index:0}}},{key:"inputHistory",set:function(a){this._inputHistory=
a;this.historyId&&this.constructor.setHistory(this.historyId,this._inputHistory)}},{key:"clear",value:function(){this.input=""}},{key:"focus",value:function(){this.fixCursor();dc._get(Object.getPrototypeOf(m.prototype),"focus",this).call(this)}},{key:"onBlur",value:function(a){dc._get(Object.getPrototypeOf(m.prototype),"onBlur",this).call(this,a);this.updatePlaceholder()}},{key:"fitToLineHeight",value:function(){this.height=this.defaultLineHeight+this.padding.top()+this.padding.bottom()}},{key:"indicateError",
value:function(a){var g=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){if(1==l.nextAddress)return g.borderWidth=3,g.borderColor=Yg.Color.red,g._errorIcon=g.addMorph(g._errorIcon||Yg.morph({type:"label",value:[" "+a,{fontSize:18}," ",{}].concat($jscomp.arrayFromIterable(Yg.Icon.textAttribute("exclamation-circle",{paddingTop:"2px"}))),fontSize:20,fontColor:Yg.Color.red,opacity:0,reactsToPointer:!1,fill:Yg.Color.white.withA(.9)})),l.yield(g.whenRendered(),2);g._errorIcon.opacity=
1;g._errorIcon.rightCenter=g.innerBounds().insetBy(10).rightCenter();l.jumpToEnd()})}},{key:"clearError",value:function(){this._errorIcon&&(this._errorIcon&&this._errorIcon.remove(),this._errorIcon=null,this.borderColor=Yg.Color.transparent)}},{key:"updatePlaceholder",value:function(){var a=this.getSubmorphNamed("placeholder");if(a)if(this.input.length)a.visible=!1;else{var g=this.innerBounds();a.fontSize=this.fontSize;a.visible=!0;a.height=this.height;a.padding=this.padding;a.defaultTextStyle=this.defaultTextStyle;
a.lineHeight=this.height+"px";a.fit();a.leftCenter=this.label.length?g.rightCenter().addXY(0,this.borderWidth):g.leftCenter().withX(0)}}},{key:"fixCursor",value:function(){this.label&&(this.positionToIndex(this.selection.lead)<this.label.length&&(this.selection.lead=this.indexToPosition(this.label.length)),this.positionToIndex(this.selection.anchor)<this.label.length&&(this.selection.anchor=this.indexToPosition(this.label.length)))}},{key:"acceptInput",value:function(){var a=this.input;this.onInput(a);
return a}},{key:"onInput",value:function(a){0<this.input.length&&this.addInputToHistory(this.input);this.clearOnInput&&this.clear();Yg.signal(this,"inputAccepted",a)}},{key:"onInputChanged",value:function(a){Yg.signal(this,"inputChanged",a);this.clearError();this.updatePlaceholder()}},{key:"onMouseDown",value:function(a){dc._get(Object.getPrototypeOf(m.prototype),"onMouseDown",this).call(this,a);this._errorIcon&&this._errorIcon.remove()}},{key:"deleteText",value:function(a){a=a.isRange?a:new Yg.Range(a);
if(!a.isEmpty())return a=a.subtract({start:{row:0,column:0},end:{row:0,column:this.label.length}})[0],dc._get(Object.getPrototypeOf(m.prototype),"deleteText",this).call(this,a)}},{key:"addInputToHistory",value:function(a){var g=this.inputHistory,l=g.items;if(Yg.arr.last(l)!==a){l.push(a);l.length>g.max&&(g.items=l=l.slice(-g.max));g.index=l.length-1;if(!this.allowDuplicatesInHistory)for(l=g.items.length-1;l--;)g.items[l]===a&&(g.items.splice(l,1),g.index--);this.historyId&&this.constructor.addHistoryToLocalStorage(this.historyId,
g)}}},{key:"browseHistory",value:function(){var a=this,g,l,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){if(1==y.nextAddress)return g=a.inputHistory.items.map(function(A,E){return{isListItem:!0,string:A,value:E}}).reverse(),y.yield(a.world().filterableListPrompt("Choose item:",g,{commands:[a.histEditCommandForHistBrowse()]}),2);l=y.yieldResult;r=$jscomp.makeIterator(l.selected);v=r.next().value;"number"===typeof v&&a.setAndShowHistItem(v);a.focus();y.jumpToEnd()})}},{key:"histEditCommandForHistBrowse",
value:function(){var a=this;return{name:"edit history "+this.historyId,exec:function(g){var l,r,v,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(A){if(1==A.nextAddress)return l=a.inputHistory.items.slice().reverse(),A.yield(g.world().editListPrompt("edit history "+a.historyId,l),2);r=A.yieldResult;v=r.status;y=r.list;if("canceled"===v)return A.return(!0);l=l.filter(function(E){return E.isListItem?y.includes(E.value):y.includes(E)});a.inputHistory=Object.assign({},a.inputHistory,{items:l});
g.get("list").items=l.map(function(E,F){return{isListItem:!0,string:E,value:F}}).reverse();return A.return(!0)})}}}},{key:"setAndShowHistItem",value:function(a){var g=this.inputHistory,l=g.items,r=l.length-1;Yg.num.between(a,0,r+1)?g.index=a:g.index=a=r;this.input!==l[a]&&"undefined"!==typeof l[a]&&(this.input=l[a])}},{key:"showHistItem",value:function(a){a=a||"next";var g=this.inputHistory,l=g.items,r=l.length-1,v=g.index;Yg.num.between(v,0,r+1)||(g.index=v=r);if(this.input!==l[v]&&"undefined"!==
typeof l[v])this.input=l[v];else{if("next"===a){if(v>r)return;v=++g.index}else{if(0>=v)return;v=--g.index}this.input=l[v]||""}}},{key:"commands",get:function(){var a=this;return[{name:"accept input",exec:function(){a.acceptInput();return!0}},{name:"show previous input from history",exec:function(){a.showHistItem("prev");return!0}},{name:"show next input from history",exec:function(){a.showHistItem("next");return!0}},{name:"browse history",exec:function(){a.browseHistory();return!0}},{name:"remove items from history",
exec:function(g){var l,r,v,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(A){if(1==A.nextAddress)return l=g.inputHistory,r=l.items.map(function(E,F){return{isListItem:!0,string:E,value:F}}).reverse(),A.yield(g.world().filterableListPrompt("Choose items to delete:",r,{multiSelect:!0}),2);v=A.yieldResult;y=v.selected;Yg.arr.sort(y).reverse().forEach(function(E){E<l.index&&l.index--;l.items.splice(E,1)});g.inputHistory=l;return A.return(!0)})}}].concat(dc._get(Object.getPrototypeOf(m.prototype),
"commands",this))}},{key:"keybindings",get:function(){return dc._get(Object.getPrototypeOf(m.prototype),"keybindings",this).concat([{keys:"Enter",command:"accept input"},{keys:{mac:"Meta-S",win:"Ctrl-S"},command:"accept input"},{keys:"Up|Ctrl-Up|Alt-P",command:"show previous input from history"},{keys:"Down|Ctrl-Down|Alt-N",command:"show next input from history"},{keys:"Alt-H",command:"browse history"},{keys:"Alt-Shift-H",command:"remove items from history"}])}},{key:"htmlExport_transformNode",value:function(a){var g=
a.ownerDocument.createElement("input"),l=a.querySelector(".newtext-text-layer.actual");g.id=a.id;g.className=a.className;g.style=a.style.cssText;Object.assign(g.style,Yg.obj.select(l.style,"padding font-family font-weight font-style text-decoration font-size color".split(" ")));g.placeholder=this.placeholder;g.type="text";g.autocomplete=g.name=this.name.replace(/[\s"]/g,"-");return g}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"InputLine"}},{key:"getHistoryFromLocalSorage",value:function(a){if("undefined"===
typeof localStorage)return null;try{var g=localStorage.getItem("lively.morphic-inputline-"+a);return g?JSON.parse(g):null}catch(l){return null}}},{key:"addHistoryToLocalStorage",value:function(a,g){if("undefined"!==typeof localStorage)try{localStorage.setItem("lively.morphic-inputline-"+a,JSON.stringify(g))}catch(l){console.error(l)}}},{key:"histories",get:function(){this._histories||(this._histories=new Map);return this._histories}},{key:"getHistory",value:function(a){var g=this.histories.get(a);
if(g)return g;g=this.getHistoryFromLocalSorage(a)||{items:[],max:50,index:0};this.histories.set(a,g);return g}},{key:"setHistory",value:function(a,g){g=void 0===g?{items:[],max:50,index:0}:g;this.histories.set(a,g);this.addHistoryToLocalStorage(a,g);return g}},{key:"properties",get:function(){return{fixedWidth:{defaultValue:!0},fixedHeight:{defaultValue:!0},extent:{defaultValue:Yg.pt(100,20)},padding:{defaultValue:Yg.Rectangle.inset(2,4)},clipMode:{defaultValue:"hidden"},lineWrapping:{defaultValue:!1},
historyId:{defaultValue:null},clearOnInput:{defaultValue:!1},label:{after:["textAndAttributes","extent","padding","submorphs"],defaultValue:"",set:function(a){var g=this;this.setProperty("label",a);this.textString.startsWith(a)||Yg.noUpdate(function(){g.textString=a+g.input})}},input:{after:["label"],derived:!0,get:function(){return this.textString.slice(this.label.length)},set:function(a){this.textString=this.label+(a?String(a):"");this.updatePlaceholder()}},placeholder:{after:["submorphs","label",
"defaultTextStyle"],dervied:!0,get:function(){var a=this.getSubmorphNamed("placeholder");return a?a.value:null},set:function(a){var g=this.getSubmorphNamed("placeholder");a?g?(g.defaultTextStyle=Object.assign({},this.defaultTextStyle,{fontColor:Yg.Color.gray}),g.value=a):this.addMorph(Yg.Text.makeLabel(a,Object.assign({},this.defaultTextStyle,{name:"placeholder",reactsToPointer:!1,fontColor:Yg.Color.gray}))):g&&g.remove();this.updatePlaceholder()}}}}}],e,{pathInPackage:function(){return"text/input-line.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:461,end:14346})}(Yg.Text);TV=Yg.InputLine;var RH=Da("b0",TV),Zy=function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/text/input-line.js"),m=e.hasOwnProperty("PasswordInputLine")&&"function"===typeof e.PasswordInputLine?e.PasswordInputLine:e.PasswordInputLine=function(a){a&&
a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return dc(m,b,[{key:"onChange",value:function(a){dc._get(Object.getPrototypeOf(m.prototype),"onChange",this).call(this,a);"borderRadius"==a.prop&&this.updateHtml(this.input)}},{key:Symbol.for("lively-instance-initialize"),value:function(a){a=void 0===a?{}:a;dc._get(Object.getPrototypeOf(m.prototype),Symbol.for("lively-instance-initialize"),this).call(this,a);this.onLoad()}},{key:"onChange",
value:function(a){dc._get(Object.getPrototypeOf(m.prototype),"onChange",this).call(this,a);["fill","borderRadius"].includes(a.prop)&&this.updateHtml(this.input)}},{key:"onLoad",value:function(){var a=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(g){if(1==g.nextAddress)return g.yield(a.whenRendered(),2);a.ensureInputNode().then(function(l){a.updateHtml(a.input);l.onkeydown=function(r){return a.env.eventDispatcher.dispatchDOMEvent(r,a,"onKeyDown")};l.onkeyup=function(r){return a.env.eventDispatcher.dispatchDOMEvent(r,
a,"onKeyUp")}});g.jumpToEnd()})}},{key:"onMouseDown",value:function(a){dc._get(Object.getPrototypeOf(m.prototype),"onMouseDown",this).call(this,a);this._errorIcon&&this._errorIcon.remove()}},{key:"onAfterRender",value:function(a){this.ensureInputNode()}},{key:"ensureInputNode",value:function(){var a=this;return this.whenRendered().then(function(){var g=a.domNode;g.parentNode&&"INPUT"==g.parentNode.tagName&&(g.parentNode.remove(),g=a.env.renderer.getNodeForMorph(a),g.insertBefore(a.domNode,g.firstChild));
return a.domNode})}},{key:"onKeyDown",value:function(a){dc._get(Object.getPrototypeOf(m.prototype),"onKeyDown",this).call(this,a);if(this.input!=this.lastInput)this.onInputChanged(this.input);this.lastInput=this.input}},{key:"focus",value:function(){dc._get(Object.getPrototypeOf(m.prototype),"focus",this).call(this);this.domNode&&this.domNode.focus()}},{key:"onFocus",value:function(a){dc._get(Object.getPrototypeOf(m.prototype),"onFocus",this).call(this,a);this._originalShadow||(this._originalShadow=
this.dropShadow,this.highlightWhenFocused&&this.animate({dropShadow:this.haloShadow,duration:200}))}},{key:"onBlur",value:function(a){dc._get(Object.getPrototypeOf(m.prototype),"onBlur",this).call(this,a);this.highlightWhenFocused&&this.animate({dropShadow:this._originalShadow||null,duration:200});this._originalShadow=null}},{key:"indicateError",value:function(a){var g=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){if(1==l.nextAddress)return g.borderWidth=3,g.borderColor=Yg.Color.red,
g._errorIcon=g.addMorph(g._errorIcon||Yg.morph({type:"label",value:[" "+a,{fontSize:18}," ",{}].concat($jscomp.arrayFromIterable(Yg.Icon.textAttribute("exclamation-circle",{paddingTop:"2px"}))),fontSize:20,fontColor:Yg.Color.red,opacity:0,reactsToPointer:!1,fill:Yg.Color.white.withA(.9)})),l.yield(g.whenRendered(),2);g._errorIcon.opacity=1;g._errorIcon.rightCenter=g.innerBounds().insetBy(10).rightCenter();l.jumpToEnd()})}},{key:"clearError",value:function(){this._errorIcon&&(this._errorIcon&&this._errorIcon.remove(),
this._errorIcon=null,this.borderColor=Yg.Color.transparent)}},{key:"acceptInput",value:function(){var a=this.input;Yg.signal(this,"inputAccepted",a);return a}},{key:"onInputChanged",value:function(a){this.clearError();Yg.signal(this,"inputChanged",a)}},{key:"updateHtml",value:function(a){var g=this,l,r,v,y,A,E,F,H,I,M,N,W;return $jscomp.asyncExecutePromiseGeneratorProgram(function(X){if(1==X.nextAddress)return l=g,r=l.fontSize,v=l.fontFamily,y=l.padding,A=l.placeholder,E=void 0===l.fill?Fg.white:
l.fill,F=l.borderRadius,H=y.top(),I=y.right(),M=y.bottom(),N=y.left(),X.yield(g.ensureInputNode(),2);W=X.yieldResult;W.setAttribute("type","password");W.setAttribute("placeholder",A);W.setAttribute("value",a);Object.assign(W.style,{position:"absolute",width:"calc(100% - "+N+"px - "+I+"px)","border-width":0,outline:"none","border-radius":F.valueOf()+"px",background:E.toString(),padding:H+"px "+I+"px "+M+"px "+N+"px","font-size":r+"px","font-family":""+v});X.jumpToEnd()})}},{key:"commands",get:function(){var a=
this;return[{name:"accept input",exec:function(){a.acceptInput();return!0}}].concat(dc._get(Object.getPrototypeOf(m.prototype),"commands",this))}},{key:"keybindings",get:function(){return dc._get(Object.getPrototypeOf(m.prototype),"keybindings",this).concat([{keys:"Enter",command:"accept input"},{keys:{mac:"Meta-S",win:"Ctrl-S"},command:"accept input"}])}},{key:"htmlExport_transformNode",value:function(a){var g=a.ownerDocument,l=g.createElement("div"),r=a.querySelector("input");g=g.createElement("input");
r.childNodes[0]&&"INPUT"===r.childNodes[0].tagName&&(r=r.childNodes[0]);g.id=a.id;g.className=a.className;l.style=a.style.cssText;Object.assign(g.style,Yg.obj.select(r.style,"padding font-family font-weight font-style text-decoration font-size border-radius color".split(" ")));g.style.position="absolute";g.style.width=a.style.width;g.style.height=a.style.height;g.style["border-width"]=a.style["border-width"];g.placeholder=this.placeholder;g.type="password";g.autocomplete=g.name=this.name.replace(/[\s"]/g,
"-");l.appendChild(g);l.appendChild(a.childNodes[1]);return l}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"PasswordInputLine"}},{key:"properties",get:function(){return{extent:{defaultValue:Yg.pt(100,20)},html:{derived:!0,initialize:function(){},get:function(){return""},set:function(a){}},highlightWhenFocused:{defaultValue:!0},haloShadow:{type:"Shadow"},domNodeTagName:{readOnly:!0,get:function(){return"input"}},domNodeStyle:{readOnly:!0,get:function(){return"background: grey"}},
input:{derived:!0,after:["domNode"],get:function(){return this.domNode&&this.domNode.value||""},set:function(a){this.domNode.value=a;this.updateHtml(this.input)}},placeholder:{after:["domNode"],set:function(a){this.setProperty("placeholder",a);this.updateHtml(this.input)}},fontSize:{defaultValue:12,after:["input"],set:function(a){this.setProperty("fontSize",a);this.updateHtml(this.input)}},fontFamily:{defaultValue:"sans-serif",after:["input"],set:function(a){this.setProperty("fontFamily",a);this.updateHtml(this.input)}},
padding:{defaultValue:Yg.Rectangle.inset(2),after:["input"],set:function(a){this.setProperty("padding",a);this.updateHtml(this.input)}}}}}],e,{pathInPackage:function(){return"text/input-line.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:14421,end:21250})}(Yg.HTMLMorph);Yg.PasswordInputLine=Zy;Yg.PasswordInputLine=Zy;Yg.PasswordInputLine=
Zy;Yg.default=TV;var gg=lively.FreezerRuntime.recorderFor("lively.morphic/index.js");gg.default=Dn;gg.config=Dn;Object.assign(gg,rqa);Object.assign(gg,Tqa);Object.assign(gg,Yqa);Object.assign(gg,Zqa);Object.assign(gg,Vqa);Object.assign(gg,Pqa);Object.assign(gg,Zka);Object.assign(gg,G9);gg.StyleSheet=Hv;gg.StyleSheet=Hv;gg.ShadowObject=zs;gg.ShadowObject=zs;gg.addOrChangeCSSDeclaration=Yr;gg.addOrChangeCSSDeclaration=Yr;gg.addOrChangeLinkedCSS=Qu;gg.addOrChangeLinkedCSS=Qu;gg.easings=rr;gg.easings=
rr;gg.stringToEasing=rq;gg.stringToEasing=rq;Object.assign(gg,Qqa);gg.Icon=Np;gg.Icon=Np;gg.loadMorphFromSnapshot=Uu;gg.loadMorphFromSnapshot=Uu;Object.assign(gg,Rqa);gg.World=sy;gg.Hand=nE;gg.Morph=Ll;gg.Image=Ty;gg.Ellipse=xB;gg.Triangle=gE;gg.Path=yB;gg.Polygon=hE;gg.LineMorph=iE;gg.Text=Vt;gg.Label=Wt;gg.HTMLMorph=Uy;gg.InputLine=RH;gg.PasswordInputLine=Zy;gg.InputLine=RH;gg.InputLine=RH;gg.PasswordInputLine=Zy;gg.PasswordInputLine=Zy;gg.locateClass=oq;gg.morph=sa;gg.addClassMappings=qa;gg.inspect=
dB;gg.touchInputDevice=sr;gg.addClassMappings({"default":gg.Morph,world:gg.World,hand:gg.Hand,image:gg.Image,ellipse:gg.Ellipse,triangle:gg.Triangle,path:gg.Path,text:gg.Text,input:gg.InputLine,label:gg.Label,polygon:gg.Polygon,line:gg.LineMorph,html:gg.HTMLMorph});gg.morph=sa;gg.morph=sa;gg.inspect=dB;gg.inspect=dB;gg.touchInputDevice=sr;gg.touchInputDevice=sr;var $qa=Object.freeze({__proto__:null,config:Dn,StyleSheet:Hv,ShadowObject:zs,addOrChangeCSSDeclaration:Yr,addOrChangeLinkedCSS:Qu,easings:rr,
stringToEasing:rq,Icon:Np,loadMorphFromSnapshot:Uu,InputLine:RH,PasswordInputLine:Zy,morph:sa,inspect:dB,touchInputDevice:sr,Morph:Ll,Ellipse:xB,Triangle:gE,Image:Ty,PathPoint:EH,Path:yB,Polygon:hE,LineMorph:iE,World:sy,Hand:nE,Text:Vt,Label:Wt,Anchor:oE,HTMLMorph:Uy,IFrameMorph:HH,MorphicEnv:qs,CustomLayout:IH,SnapLayout:JH,VerticalLayout:Vy,HorizontalLayout:Gv,ProportionalLayout:KH,CenteredTilingLayout:LH,TilingLayout:MH,CellGroup:NH,LayoutColumn:OH,LayoutRow:PH,LayoutCell:QH,GridLayout:Wy,TooltipViewer:lE,
Tooltip:AB,MorphicDB:Yw}),Ml=lively.FreezerRuntime.recorderFor("lively.components/canvas.js");Ml.pt=xi;Ml.rect=zm;Ml.Color=Fg;Ml.Morph=Ll;Ml.Image=Ty;Ml.connect=rl;var SH=Da("aU",function(b){var e=lively.FreezerRuntime.recorderFor("lively.components/canvas.js"),m=e.hasOwnProperty("Canvas")&&"function"===typeof e.Canvas?e.Canvas:e.Canvas=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return dc(m,b,[{key:"context",get:function(){return this._canvas&&
this._canvas.getContext(this.contextType)}},{key:"_canvas",set:function(a){var g=this.__canvas__;this.__canvas__=a;this.restoreContent(g,a)}},{key:"_canvas",get:function(){return this.__canvas__}},{key:Symbol.for("lively-instance-initialize"),value:function(a){a=void 0===a?{}:a;dc._get(Object.getPrototypeOf(m.prototype),Symbol.for("lively-instance-initialize"),this).call(this,a);Ml.connect(this,"extent",this,"onExtentChanged")}},{key:"afterRender",value:function(a,g){g?this._canvas=a:"function"===
typeof this.__canvas_init__&&(this.__canvas_init__(),delete this.__canvas_init__)}},{key:"restoreContent",value:function(a,g){var l=this.contextType,r=this.preserveContents;"function"===typeof this.__canvas_init__?(this.__canvas_init__(),delete this.__canvas_init__):r&&"2d"==l&&a&&a!==g&&this.context.drawImage(a,0,0)}},{key:"onExtentChanged",value:function(){var a=this;if(this._canvas&&this.preserveContents&&this.context.getImageData){var g=this._canvas,l=this.context.getImageData(0,0,g.width,g.height);
this.__canvas_init__=function(){a.context.putImageData(l,0,0)}}}},{key:"clear",value:function(a){var g=this.context;if(g){var l=this._canvas,r=l.width;l=l.height;g.save();g.setTransform(1,0,0,1,0,0);a?(a.toCSSString&&(a=a.toCSSString()),g.fillStyle=a,g.fillRect(0,0,r,l)):g.clearRect(0,0,r,l);g.restore()}}},{key:"render",value:function(a){return a.renderCanvas(this)}},{key:"withContextDo",value:function(a){var g=this;this._canvas?a(this.context):this.__canvas_init__=function(){return a(g.context)}}},
{key:"toDataURI",value:function(){return this._canvas&&this._canvas.toDataURL()}},{key:"fromDataURI",value:function(a){var g=this,l=new Ml.Image;l.onload=function(){g._canvas.width=l.width;g._canvas.height=l.height;g.context.drawImage(l,0,0)};l.src=a}},{key:"imageData",value:function(a){a||(a=this.canvasBounds);return this.context.getImageData(a.x,a.y,a.width,a.height)}},{key:"nonTransparentArea",value:function(){for(var a=this.imageData(),g=a.data,l=a.width,r=a.height,v=l,y=r,A=0;A<r;A++)for(var E=
0;E<v;E++)0<g[4*(A*l+E)+3]&&(v=E,y>A&&(y=A));if(v===l)return Ml.rect(0,0,0,0);A=v;E=y;for(--r;r>y;r--)for(var F=l-1;F>A;F--)0<g[4*(r*l+F)+3]&&(A=F,E<r&&(E=r));return{imageData:a,bounds:Ml.rect(v,y,A-v+1,E-y+1)}}},{key:"trimNonTransparent",value:function(){var a=this.nonTransparentArea(),g=a.imageData;a=a.bounds;if(!a.topLeft().equals(Ml.pt(0,0))){var l=a.x,r=a.y;this.context.putImageData(g,-l,-r,l,r,a.width,a.height);this.position=this.position.addPt(a.topLeft())}a.extent().equals(this.extent)||(this.extent=
a.extent())}},{key:"finishDraw",value:function(a){a=void 0===a?{}:a;var g=this.context,l=a.color||"rgba(0,0,0,0.6)",r=a.width||4,v=a.fill;a=a.fillColor||l;l.toCSSString&&(l=l.toCSSString());g.strokeStyle=l;g.lineWidth=r;g.stroke();g.closePath();v&&(g.fillStyle=a,g.fill())}},{key:"line",value:function(a,g,l){l=void 0===l?{}:l;var r=this.context;r.beginPath();r.moveTo(a.x,a.y);r.lineTo(g.x,g.y);this.finishDraw(l)}},{key:"testLine",value:function(){this.line(Ml.pt(0,0),Ml.pt(20,20))}},{key:"arc",value:function(a,
g,l,r,v,y){v=void 0===v?!1:v;y=void 0===y?{}:y;var A=this.context;A.beginPath();A.arc(a.x,a.y,g,l,r,v);this.finishDraw(y)}},{key:"polygon",value:function(a,g){g=void 0===g?{}:g;var l=this.context;l.beginPath();l.moveTo(a[0].x,a[0].y);for(var r=0;r<a.length;r++)l.lineTo(a[r].x,a[r].y);l.lineTo(a[0].x,a[0].y);this.finishDraw(g)}},{key:"testPolygon",value:function(){this.polygon([Ml.pt(0,0),Ml.pt(20,20),Ml.pt(0,20)],{fill:!0,fillColor:Ml.Color.green})}},{key:"text",value:function(a,g,l){l=void 0===l?
{}:l;var r=this.context,v=l.color||"black",y=l.font||"14px Arial",A=l.align||"start",E=l.baseline||"bottom";r.save();r.font=y;r.fillStyle=v;r.textAlign=A;r.textBaseline=E;l.angle&&!isNaN(l.angle)&&(r.translate(g.x,g.y),r.rotate(l.angle),r.translate(-g.x,-g.y));r.fillText(a,g.x,g.y);r.restore()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Canvas"}},{key:"properties",get:function(){return{extent:{defaultValue:Ml.pt(200,200)},fill:{defaultValue:Ml.Color.transparent},contextType:{defaultValue:"2d"},
preserveContents:{defaultValue:!0},canvasExtent:{get:function(){return this._canvas&&Ml.pt(this._canvas.width,this._canvas.height)}},canvasBounds:{readOnly:!0,get:function(){return this._canvas&&this.canvasExtent.extentAsRectangle()}},_serializedContents:{get:function(){return this.preserveContents&&this.toDataURI()},set:function(a){var g=this;this.withContextDo(function(){return g.fromDataURI(a)})}}}}}],e,{pathInPackage:function(){return"canvas.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:227,end:7043})}(Ml.Morph));Ml.Canvas=SH;Ml.Canvas=SH;Ml.Canvas=SH;var $w=lively.FreezerRuntime.recorderFor("Globe/index.js");$w.Canvas=SH;$w.promise=zh;$w.easings=rr;var L9=function(b){var e=lively.FreezerRuntime.recorderFor("Globe/index.js"),m=e.hasOwnProperty("Globe")&&"function"===typeof e.Globe?e.Globe:e.Globe=function(a){a&&a[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return dc(m,b,[{key:"fullyLoaded",value:function(){var a=this,g;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){return 1==l.nextAddress?(g=a.get("webgl canvas"),l.yield($w.promise.waitFor(5E3,function(){return g.firstFrameRendered}),2)):l.return(l.yieldResult)})}},{key:"onLoad",value:function(){var a=this,g;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){switch(l.nextAddress){case 1:return navigator.webdriver||
!lively.FreezerRuntime?l.return():l.yield(a.whenRendered(),2);case 2:return g=a.get("webgl canvas"),g.renderGlobe(),l.yield(a.fullyLoaded(),3);case 3:return l.yield($w.promise.delay(500),4);case 4:a.get("cover").animate({opacity:0,easing:$w.easings.inOutCubic}),g.relayout(),l.jumpToEnd()}})}},{key:"beforePublish",value:function(){this.get("cover").opacity=1}},{key:"onExtentChanged",value:function(){dc._get(Object.getPrototypeOf(m.prototype),"onExtentChanged",this).call(this);this.get("webgl canvas").extent=
this.extent;this.get("cover").extent=this.extent}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Globe"}}],e,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"Globe",version:"0.1.1-26"}}},{start:169,end:918})}($w.Canvas);L9=$w.Globe;$w.default=L9;var TH={},M9=!1,p="undefined"!==typeof globalThis?globalThis:"undefined"!==
typeof self?self:global,isa=function(){if(M9)return TH;M9=!0;(function(b,e){"object"===typeof TH?e(TH):"function"===typeof define&&define.amd?define(["exports"],e):(b="undefined"!==typeof globalThis?globalThis:b||self,e(b.THREE={}))})(TH,function(b){function e(){}function m(u,z){for(var t=0;t<z.length;t++){var x=z[t];x.enumerable=x.enumerable||!1;x.configurable=!0;"value"in x&&(x.writable=!0);Object.defineProperty(u,x.key,x)}}function a(u,z,t){z&&m(u.prototype,z);t&&m(u,t);return u}function g(u,z){u.prototype=
Object.create(z.prototype);u.prototype.constructor=u;u.__proto__=z}function l(u){if(void 0===u)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return u}function r(u,z,t,x,C,G,L,S,V,Z){Object.defineProperty(this||p,"id",{value:ara++});(this||p).uuid=ai.generateUUID();(this||p).name="";(this||p).image=void 0!==u?u:r.DEFAULT_IMAGE;(this||p).mipmaps=[];(this||p).mapping=void 0!==z?z:r.DEFAULT_MAPPING;(this||p).wrapS=void 0!==t?t:1001;(this||p).wrapT=void 0!==x?x:
1001;(this||p).magFilter=void 0!==C?C:1006;(this||p).minFilter=void 0!==G?G:1008;(this||p).anisotropy=void 0!==V?V:1;(this||p).format=void 0!==L?L:1023;(this||p).internalFormat=null;(this||p).type=void 0!==S?S:1009;(this||p).offset=new Ve(0,0);(this||p).repeat=new Ve(1,1);(this||p).center=new Ve(0,0);(this||p).rotation=0;(this||p).matrixAutoUpdate=!0;(this||p).matrix=new Tp;(this||p).generateMipmaps=!0;(this||p).premultiplyAlpha=!1;(this||p).flipY=!0;(this||p).unpackAlignment=4;(this||p).encoding=
void 0!==Z?Z:3E3;(this||p).version=0;(this||p).onUpdate=null}function v(u,z,t){(this||p).width=u;(this||p).height=z;(this||p).scissor=new Qk(0,0,u,z);(this||p).scissorTest=!1;(this||p).viewport=new Qk(0,0,u,z);t=t||{};(this||p).texture=new r(void 0,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.encoding);(this||p).texture.image={};(this||p).texture.image.width=u;(this||p).texture.image.height=z;(this||p).texture.generateMipmaps=void 0!==t.generateMipmaps?t.generateMipmaps:
!1;(this||p).texture.minFilter=void 0!==t.minFilter?t.minFilter:1006;(this||p).depthBuffer=void 0!==t.depthBuffer?t.depthBuffer:!0;(this||p).stencilBuffer=void 0!==t.stencilBuffer?t.stencilBuffer:!1;(this||p).depthTexture=void 0!==t.depthTexture?t.depthTexture:null}function y(u,z,t){v.call(this||p,u,z,t);(this||p).samples=4}function A(u,z,t,x,C){for(var G=0,L=u.length-3;G<=L;G+=3){DB.fromArray(u,G);var S=C.x*Math.abs(DB.x)+C.y*Math.abs(DB.y)+C.z*Math.abs(DB.z),V=z.dot(DB),Z=t.dot(DB),ja=x.dot(DB);
if(Math.max(-Math.max(V,Z,ja),Math.min(V,Z,ja))>S)return!1}return!0}function E(){Object.defineProperty(this||p,"id",{value:bra++});(this||p).uuid=ai.generateUUID();(this||p).name="";(this||p).type="Object3D";(this||p).parent=null;(this||p).children=[];(this||p).up=E.DefaultUp.clone();var u=new qc,z=new ON,t=new hp,x=new qc(1,1,1);z._onChange(function(){t.setFromEuler(z,!1)});t._onChange(function(){z.setFromQuaternion(t,void 0,!1)});Object.defineProperties(this||p,{position:{configurable:!0,enumerable:!0,
value:u},rotation:{configurable:!0,enumerable:!0,value:z},quaternion:{configurable:!0,enumerable:!0,value:t},scale:{configurable:!0,enumerable:!0,value:x},modelViewMatrix:{value:new fj},normalMatrix:{value:new Tp}});(this||p).matrix=new fj;(this||p).matrixWorld=new fj;(this||p).matrixAutoUpdate=E.DefaultMatrixAutoUpdate;(this||p).matrixWorldNeedsUpdate=!1;(this||p).layers=new UV;(this||p).visible=!0;(this||p).castShadow=!1;(this||p).receiveShadow=!1;(this||p).frustumCulled=!0;(this||p).renderOrder=
0;(this||p).userData={}}function F(u,z,t){0>t&&(t+=1);1<t&&--t;return t<1/6?u+6*(z-u)*t:.5>t?z:t<2/3?u+6*(z-u)*(2/3-t):u}function H(u){return.04045>u?.0773993808*u:Math.pow(.9478672986*u+.0521327014,2.4)}function I(u){return.0031308>u?12.92*u:1.055*Math.pow(u,.41666)-.055}function M(){Object.defineProperty(this||p,"id",{value:cra++});(this||p).uuid=ai.generateUUID();(this||p).name="";(this||p).type="Material";(this||p).fog=!0;(this||p).blending=1;(this||p).side=0;(this||p).flatShading=!1;(this||p).vertexColors=
!1;(this||p).opacity=1;(this||p).transparent=!1;(this||p).blendSrc=204;(this||p).blendDst=205;(this||p).blendEquation=100;(this||p).blendSrcAlpha=null;(this||p).blendDstAlpha=null;(this||p).blendEquationAlpha=null;(this||p).depthFunc=3;(this||p).depthTest=!0;(this||p).depthWrite=!0;(this||p).stencilWriteMask=255;(this||p).stencilFunc=519;(this||p).stencilRef=0;(this||p).stencilFuncMask=255;(this||p).stencilFail=7680;(this||p).stencilZFail=7680;(this||p).stencilZPass=7680;(this||p).stencilWrite=!1;
(this||p).clippingPlanes=null;(this||p).clipIntersection=!1;(this||p).clipShadows=!1;(this||p).shadowSide=null;(this||p).colorWrite=!0;(this||p).precision=null;(this||p).polygonOffset=!1;(this||p).polygonOffsetFactor=0;(this||p).polygonOffsetUnits=0;(this||p).dithering=!1;(this||p).alphaTest=0;(this||p).premultipliedAlpha=!1;(this||p).visible=!0;(this||p).toneMapped=!0;(this||p).userData={};(this||p).version=0}function N(u){M.call(this||p);(this||p).type="MeshBasicMaterial";(this||p).color=new tg(16777215);
(this||p).map=null;(this||p).lightMap=null;(this||p).lightMapIntensity=1;(this||p).aoMap=null;(this||p).aoMapIntensity=1;(this||p).specularMap=null;(this||p).alphaMap=null;(this||p).envMap=null;(this||p).combine=0;(this||p).reflectivity=1;(this||p).refractionRatio=.98;(this||p).wireframe=!1;(this||p).wireframeLinewidth=1;(this||p).wireframeLinecap="round";(this||p).wireframeLinejoin="round";(this||p).skinning=!1;(this||p).morphTargets=!1;this.setValues(u)}function W(u,z,t){if(Array.isArray(u))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");
(this||p).name="";(this||p).array=u;(this||p).itemSize=z;(this||p).count=void 0!==u?u.length/z:0;(this||p).normalized=!0===t;(this||p).usage=35044;(this||p).updateRange={offset:0,count:-1};(this||p).version=0}function X(u,z,t){W.call(this||p,new Int8Array(u),z,t)}function ea(u,z,t){W.call(this||p,new Uint8Array(u),z,t)}function Aa(u,z,t){W.call(this||p,new Uint8ClampedArray(u),z,t)}function Ma(u,z,t){W.call(this||p,new Int16Array(u),z,t)}function K(u,z,t){W.call(this||p,new Uint16Array(u),z,t)}function aa(u,
z,t){W.call(this||p,new Int32Array(u),z,t)}function T(u,z,t){W.call(this||p,new Uint32Array(u),z,t)}function U(u,z,t){W.call(this||p,new Float32Array(u),z,t)}function pa(u,z,t){W.call(this||p,new Float64Array(u),z,t)}function fa(u){if(0===u.length)return-Infinity;for(var z=u[0],t=1,x=u.length;t<x;++t)u[t]>z&&(z=u[t]);return z}function oa(){Object.defineProperty(this||p,"id",{value:dra+=2});(this||p).uuid=ai.generateUUID();(this||p).name="";(this||p).type="BufferGeometry";(this||p).index=null;(this||
p).attributes={};(this||p).morphAttributes={};(this||p).morphTargetsRelative=!1;(this||p).groups=[];(this||p).boundingBox=null;(this||p).boundingSphere=null;(this||p).drawRange={start:0,count:Infinity};(this||p).userData={}}function gb(u,z){E.call(this||p);(this||p).type="Mesh";(this||p).geometry=void 0!==u?u:new oa;(this||p).material=void 0!==z?z:new N;this.updateMorphTargets()}function zb(u,z,t,x,C,G,L,S){if(null===(1===z.side?x.intersectTriangle(L,G,C,!0,S):x.intersectTriangle(C,G,L,2!==z.side,
S)))return null;PN.copy(S);PN.applyMatrix4(u.matrixWorld);z=t.ray.origin.distanceTo(PN);return z<t.near||z>t.far?null:{distance:z,point:PN.clone(),object:u}}function va(u,z,t,x,C,G,L,S,V,Z,ja,ua){$y.fromBufferAttribute(C,Z);az.fromBufferAttribute(C,ja);bz.fromBufferAttribute(C,ua);C=u.morphTargetInfluences;if(z.morphTargets&&G&&C){QN.set(0,0,0);RN.set(0,0,0);SN.set(0,0,0);for(var Ca=0,bb=G.length;Ca<bb;Ca++){var $a=C[Ca],ub=G[Ca];0!==$a&&(VV.fromBufferAttribute(ub,Z),WV.fromBufferAttribute(ub,ja),
XV.fromBufferAttribute(ub,ua),L?(QN.addScaledVector(VV,$a),RN.addScaledVector(WV,$a),SN.addScaledVector(XV,$a)):(QN.addScaledVector(VV.sub($y),$a),RN.addScaledVector(WV.sub(az),$a),SN.addScaledVector(XV.sub(bz),$a)))}$y.add(QN);az.add(RN);bz.add(SN)}u.isSkinnedMesh&&(u.boneTransform(Z,$y),u.boneTransform(ja,az),u.boneTransform(ua,bz));if(u=zb(u,z,t,x,$y,az,bz,UH))S&&(pE.fromBufferAttribute(S,Z),qE.fromBufferAttribute(S,ja),rE.fromBufferAttribute(S,ua),u.uv=Xt.getUV(UH,$y,az,bz,pE,qE,rE,new Ve)),V&&
(pE.fromBufferAttribute(V,Z),qE.fromBufferAttribute(V,ja),rE.fromBufferAttribute(V,ua),u.uv2=Xt.getUV(UH,$y,az,bz,pE,qE,rE,new Ve)),S=new VH(Z,ja,ua),Xt.getNormal($y,az,bz,S.normal),u.face=S;return u}function ma(u){var z={},t;for(t in u){z[t]={};for(var x in u[t]){var C=u[t][x];C&&(C.isColor||C.isMatrix3||C.isMatrix4||C.isVector2||C.isVector3||C.isVector4||C.isTexture)?z[t][x]=C.clone():Array.isArray(C)?z[t][x]=C.slice():z[t][x]=C}}return z}function ta(u){for(var z={},t=0;t<u.length;t++){var x=ma(u[t]),
C;for(C in x)z[C]=x[C]}return z}function Na(u){M.call(this||p);(this||p).type="ShaderMaterial";(this||p).defines={};(this||p).uniforms={};(this||p).vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}";(this||p).fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}";(this||p).linewidth=1;(this||p).wireframe=!1;(this||p).wireframeLinewidth=1;(this||p).fog=!1;(this||p).lights=!1;(this||p).clipping=!1;(this||p).skinning=
!1;(this||p).morphTargets=!1;(this||p).morphNormals=!1;(this||p).extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1};(this||p).defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]};(this||p).index0AttributeName=void 0;(this||p).uniformsNeedUpdate=!1;(this||p).glslVersion=null;void 0!==u&&(void 0!==u.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(u))}function Kb(){E.call(this||p);(this||
p).type="Camera";(this||p).matrixWorldInverse=new fj;(this||p).projectionMatrix=new fj;(this||p).projectionMatrixInverse=new fj}function kc(u,z,t,x){Kb.call(this||p);(this||p).type="PerspectiveCamera";(this||p).fov=void 0!==u?u:50;(this||p).zoom=1;(this||p).near=void 0!==t?t:.1;(this||p).far=void 0!==x?x:2E3;(this||p).focus=10;(this||p).aspect=void 0!==z?z:1;(this||p).view=null;(this||p).filmGauge=35;(this||p).filmOffset=0;this.updateProjectionMatrix()}function Vb(u,z,t){E.call(this||p);(this||p).type=
"CubeCamera";if(!0!==t.isWebGLCubeRenderTarget)console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter.");else{(this||p).renderTarget=t;var x=new kc(90,1,u,z);x.layers=(this||p).layers;x.up.set(0,-1,0);x.lookAt(new qc(1,0,0));this.add(x);var C=new kc(90,1,u,z);C.layers=(this||p).layers;C.up.set(0,-1,0);C.lookAt(new qc(-1,0,0));this.add(C);var G=new kc(90,1,u,z);G.layers=(this||p).layers;G.up.set(0,0,1);G.lookAt(new qc(0,1,0));this.add(G);
var L=new kc(90,1,u,z);L.layers=(this||p).layers;L.up.set(0,0,-1);L.lookAt(new qc(0,-1,0));this.add(L);var S=new kc(90,1,u,z);S.layers=(this||p).layers;S.up.set(0,-1,0);S.lookAt(new qc(0,0,1));this.add(S);var V=new kc(90,1,u,z);V.layers=(this||p).layers;V.up.set(0,-1,0);V.lookAt(new qc(0,0,-1));this.add(V);(this||p).update=function(Z,ja){null===(this||p).parent&&this.updateMatrixWorld();var ua=Z.xr.enabled,Ca=Z.getRenderTarget();Z.xr.enabled=!1;var bb=t.texture.generateMipmaps;t.texture.generateMipmaps=
!1;Z.setRenderTarget(t,0);Z.render(ja,x);Z.setRenderTarget(t,1);Z.render(ja,C);Z.setRenderTarget(t,2);Z.render(ja,G);Z.setRenderTarget(t,3);Z.render(ja,L);Z.setRenderTarget(t,4);Z.render(ja,S);t.texture.generateMipmaps=bb;Z.setRenderTarget(t,5);Z.render(ja,V);Z.setRenderTarget(Ca);Z.xr.enabled=ua};(this||p).clear=function(Z,ja,ua,Ca){for(var bb=Z.getRenderTarget(),$a=0;6>$a;$a++)Z.setRenderTarget(t,$a),Z.clear(ja,ua,Ca);Z.setRenderTarget(bb)}}}function jc(u,z,t,x,C,G,L,S,V,Z){u=void 0!==u?u:[];r.call(this||
p,u,void 0!==z?z:301,t,x,C,G,void 0!==L?L:1022,S,V,Z);(this||p).flipY=!1;(this||p)._needsFlipEnvMap=!0}function Qc(u,z,t){Number.isInteger(z)&&(console.warn("THREE.WebGLCubeRenderTarget: constructor signature is now WebGLCubeRenderTarget( size, options )"),z=t);v.call(this||p,u,u,z);z=z||{};(this||p).texture=new jc(void 0,z.mapping,z.wrapS,z.wrapT,z.magFilter,z.minFilter,z.format,z.type,z.anisotropy,z.encoding);(this||p).texture._needsFlipEnvMap=!1}function Pb(u,z,t,x,C,G,L,S,V,Z,ja,ua){r.call(this||
p,null,G,L,S,V,Z,x,C,ja,ua);(this||p).image={data:u||null,width:z||1,height:t||1};(this||p).magFilter=void 0!==V?V:1003;(this||p).minFilter=void 0!==Z?Z:1003;(this||p).generateMipmaps=!1;(this||p).flipY=!1;(this||p).unpackAlignment=1;(this||p).needsUpdate=!0}function xd(){function u(G,L){x(G,L);C=z.requestAnimationFrame(u)}var z=null,t=!1,x=null,C=null;return{start:function(){!0!==t&&null!==x&&(C=z.requestAnimationFrame(u),t=!0)},stop:function(){z.cancelAnimationFrame(C);t=!1},setAnimationLoop:function(G){x=
G},setContext:function(G){z=G}}}function Td(u,z){function t(G,L){var S=G.array,V=G.usage,Z=u.createBuffer();u.bindBuffer(L,Z);u.bufferData(L,S,V);G.onUploadCallback();L=5126;S instanceof Float32Array?L=5126:S instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):S instanceof Uint16Array?L=5123:S instanceof Int16Array?L=5122:S instanceof Uint32Array?L=5125:S instanceof Int32Array?L=5124:S instanceof Int8Array?L=5120:S instanceof Uint8Array&&(L=
5121);return{buffer:Z,type:L,bytesPerElement:S.BYTES_PER_ELEMENT,version:G.version}}var x=z.isWebGL2,C=new WeakMap;return{get:function(G){G.isInterleavedBufferAttribute&&(G=G.data);return C.get(G)},remove:function(G){G.isInterleavedBufferAttribute&&(G=G.data);var L=C.get(G);L&&(u.deleteBuffer(L.buffer),C.delete(G))},update:function(G,L){if(G.isGLBufferAttribute)L=C.get(G),(!L||L.version<G.version)&&C.set(G,{buffer:G.buffer,type:G.type,bytesPerElement:G.elementSize,version:G.version});else{G.isInterleavedBufferAttribute&&
(G=G.data);var S=C.get(G);if(void 0===S)C.set(G,t(G,L));else if(S.version<G.version){var V=G.array,Z=G.updateRange;u.bindBuffer(L,S.buffer);-1===Z.count?u.bufferSubData(L,0,V):(x?u.bufferSubData(L,Z.offset*V.BYTES_PER_ELEMENT,V,Z.offset,Z.count):u.bufferSubData(L,Z.offset*V.BYTES_PER_ELEMENT,V.subarray(Z.offset,Z.offset+Z.count)),Z.count=-1);S.version=G.version}}}}}function ka(u,z,t,x,C){function G(bb,$a){t.buffers.color.setClear(bb.r,bb.g,bb.b,$a,C)}var L=new tg(0),S=0,V,Z,ja=null,ua=0,Ca=null;return{getClearColor:function(){return L},
setClearColor:function(bb,$a){L.set(bb);S=void 0!==$a?$a:1;G(L,S)},getClearAlpha:function(){return S},setClearAlpha:function(bb){S=bb;G(L,S)},render:function(bb,$a,ub,pb){($a=!0===$a.isScene?$a.background:null)&&$a.isTexture&&($a=z.get($a));ub=u.xr;(ub=ub.getSession&&ub.getSession())&&"additive"===ub.environmentBlendMode&&($a=null);null===$a?G(L,S):$a&&$a.isColor&&(G($a,1),pb=!0);(u.autoClear||pb)&&u.clear(u.autoClearColor,u.autoClearDepth,u.autoClearStencil);if($a&&($a.isCubeTexture||$a.isWebGLCubeRenderTarget||
306===$a.mapping)){void 0===Z&&(Z=new gb(new WH(1,1,1),new Na({name:"BackgroundCubeMaterial",uniforms:ma(Yt.cube.uniforms),vertexShader:Yt.cube.vertexShader,fragmentShader:Yt.cube.fragmentShader,side:1,depthTest:!1,depthWrite:!1,fog:!1})),Z.geometry.deleteAttribute("normal"),Z.geometry.deleteAttribute("uv"),Z.onBeforeRender=function(Rc,xc,kd){(this||p).matrixWorld.copyPosition(kd.matrixWorld)},Object.defineProperty(Z.material,"envMap",{get:function(){return(this||p).uniforms.envMap.value}}),x.update(Z));
$a.isWebGLCubeRenderTarget&&($a=$a.texture);Z.material.uniforms.envMap.value=$a;Z.material.uniforms.flipEnvMap.value=$a.isCubeTexture&&$a._needsFlipEnvMap?-1:1;if(ja!==$a||ua!==$a.version||Ca!==u.toneMapping)Z.material.needsUpdate=!0,ja=$a,ua=$a.version,Ca=u.toneMapping;bb.unshift(Z,Z.geometry,Z.material,0,0,null)}else if($a&&$a.isTexture){void 0===V&&(V=new gb(new TN(2,2),new Na({name:"BackgroundMaterial",uniforms:ma(Yt.background.uniforms),vertexShader:Yt.background.vertexShader,fragmentShader:Yt.background.fragmentShader,
side:0,depthTest:!1,depthWrite:!1,fog:!1})),V.geometry.deleteAttribute("normal"),Object.defineProperty(V.material,"map",{get:function(){return(this||p).uniforms.t2D.value}}),x.update(V));V.material.uniforms.t2D.value=$a;!0===$a.matrixAutoUpdate&&$a.updateMatrix();V.material.uniforms.uvTransform.value.copy($a.matrix);if(ja!==$a||ua!==$a.version||Ca!==u.toneMapping)V.material.needsUpdate=!0,ja=$a,ua=$a.version,Ca=u.toneMapping;bb.unshift(V,V.geometry,V.material,0,0,null)}}}}function Fa(u,z,t,x){function C(kd){return x.isWebGL2?
u.bindVertexArray(kd):$a.bindVertexArrayOES(kd)}function G(kd){return x.isWebGL2?u.deleteVertexArray(kd):$a.deleteVertexArrayOES(kd)}function L(kd){for(var Ec=[],nd=[],Nc=[],Cd=0;Cd<bb;Cd++)Ec[Cd]=0,nd[Cd]=0,Nc[Cd]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:Ec,enabledAttributes:nd,attributeDivisors:Nc,object:kd,attributes:{},index:null}}function S(){for(var kd=xc.newAttributes,Ec=0,nd=kd.length;Ec<nd;Ec++)kd[Ec]=0}function V(kd){Z(kd,0)}function Z(kd,Ec){var nd=xc.enabledAttributes,
Nc=xc.attributeDivisors;xc.newAttributes[kd]=1;0===nd[kd]&&(u.enableVertexAttribArray(kd),nd[kd]=1);Nc[kd]!==Ec&&((x.isWebGL2?u:z.get("ANGLE_instanced_arrays"))[x.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](kd,Ec),Nc[kd]=Ec)}function ja(){for(var kd=xc.newAttributes,Ec=xc.enabledAttributes,nd=0,Nc=Ec.length;nd<Nc;nd++)Ec[nd]!==kd[nd]&&(u.disableVertexAttribArray(nd),Ec[nd]=0)}function ua(){Ca();xc!==Rc&&(xc=Rc,C(xc.object))}function Ca(){Rc.geometry=null;Rc.program=null;Rc.wireframe=
!1}var bb=u.getParameter(34921),$a=x.isWebGL2?null:z.get("OES_vertex_array_object"),ub=x.isWebGL2||null!==$a,pb={},Rc=L(null),xc=Rc;return{setup:function(kd,Ec,nd,Nc,Cd){var Xd=!1;if(ub){Xd=!0===Ec.wireframe;var yd=pb[Nc.id];void 0===yd&&(yd={},pb[Nc.id]=yd);var Ad=yd[nd.id];void 0===Ad&&(Ad={},yd[nd.id]=Ad);yd=Ad[Xd];void 0===yd&&(yd=L(x.isWebGL2?u.createVertexArray():$a.createVertexArrayOES()),Ad[Xd]=yd);Xd=yd;xc!==Xd&&(xc=Xd,C(xc.object));a:if(Xd=xc.attributes,Ad=Nc.attributes,Object.keys(Xd).length!==
Object.keys(Ad).length)Xd=!0;else{for(var Ce in Ad){yd=Xd[Ce];var gf=Ad[Ce];if(void 0===yd||yd.attribute!==gf||yd.data!==gf.data){Xd=!0;break a}}Xd=xc.index!==Cd?!0:!1}if(Xd){Ce={};Ad=Nc.attributes;for(var hg in Ad)yd=Ad[hg],gf={},gf.attribute=yd,yd.data&&(gf.data=yd.data),Ce[hg]=gf;xc.attributes=Ce;xc.index=Cd}}else if(hg=!0===Ec.wireframe,xc.geometry!==Nc.id||xc.program!==nd.id||xc.wireframe!==hg)xc.geometry=Nc.id,xc.program=nd.id,xc.wireframe=hg,Xd=!0;!0===kd.isInstancedMesh&&(Xd=!0);null!==Cd&&
t.update(Cd,34963);if(Xd){if(!1!==x.isWebGL2||!kd.isInstancedMesh&&!Nc.isInstancedBufferGeometry||null!==z.get("ANGLE_instanced_arrays")){S();hg=Nc.attributes;nd=nd.getAttributes();Ec=Ec.defaultAttributeValues;for(var Cf in nd)if(Xd=nd[Cf],0<=Xd){var Yf=hg[Cf];if(void 0!==Yf){if(Ce=Yf.normalized,gf=Yf.itemSize,yd=t.get(Yf),void 0!==yd){var gh=yd.buffer;Ad=yd.type;yd=yd.bytesPerElement;if(Yf.isInterleavedBufferAttribute){var Pg=Yf.data,Ei=Pg.stride;Yf=Yf.offset;Pg&&Pg.isInstancedInterleavedBuffer?
(Z(Xd,Pg.meshPerAttribute),void 0===Nc._maxInstanceCount&&(Nc._maxInstanceCount=Pg.meshPerAttribute*Pg.count)):V(Xd);u.bindBuffer(34962,gh);Ei*=yd;yd*=Yf;!0!==x.isWebGL2||5124!==Ad&&5125!==Ad?u.vertexAttribPointer(Xd,gf,Ad,Ce,Ei,yd):u.vertexAttribIPointer(Xd,gf,Ad,Ei,yd)}else Yf.isInstancedBufferAttribute?(Z(Xd,Yf.meshPerAttribute),void 0===Nc._maxInstanceCount&&(Nc._maxInstanceCount=Yf.meshPerAttribute*Yf.count)):V(Xd),u.bindBuffer(34962,gh),yd=gf,!0!==x.isWebGL2||5124!==Ad&&5125!==Ad?u.vertexAttribPointer(Xd,
yd,Ad,Ce,0,0):u.vertexAttribIPointer(Xd,yd,Ad,0,0)}}else if("instanceMatrix"===Cf)Ad=t.get(kd.instanceMatrix),void 0!==Ad&&(Ce=Ad.buffer,Ad=Ad.type,Z(Xd+0,1),Z(Xd+1,1),Z(Xd+2,1),Z(Xd+3,1),u.bindBuffer(34962,Ce),u.vertexAttribPointer(Xd+0,4,Ad,!1,64,0),u.vertexAttribPointer(Xd+1,4,Ad,!1,64,16),u.vertexAttribPointer(Xd+2,4,Ad,!1,64,32),u.vertexAttribPointer(Xd+3,4,Ad,!1,64,48));else if("instanceColor"===Cf)Ad=t.get(kd.instanceColor),void 0!==Ad&&(Ce=Ad.buffer,Ad=Ad.type,Z(Xd,1),u.bindBuffer(34962,Ce),
u.vertexAttribPointer(Xd,3,Ad,!1,12,0));else if(void 0!==Ec&&(Ce=Ec[Cf],void 0!==Ce))switch(Ce.length){case 2:u.vertexAttrib2fv(Xd,Ce);break;case 3:u.vertexAttrib3fv(Xd,Ce);break;case 4:u.vertexAttrib4fv(Xd,Ce);break;default:u.vertexAttrib1fv(Xd,Ce)}}ja()}null!==Cd&&u.bindBuffer(34963,t.get(Cd).buffer)}},reset:ua,resetDefaultState:Ca,dispose:function(){ua();for(var kd in pb){var Ec=pb[kd],nd;for(nd in Ec){var Nc=Ec[nd],Cd;for(Cd in Nc)G(Nc[Cd].object),delete Nc[Cd];delete Ec[nd]}delete pb[kd]}},releaseStatesOfGeometry:function(kd){if(void 0!==
pb[kd.id]){var Ec=pb[kd.id],nd;for(nd in Ec){var Nc=Ec[nd],Cd;for(Cd in Nc)G(Nc[Cd].object),delete Nc[Cd];delete Ec[nd]}delete pb[kd.id]}},releaseStatesOfProgram:function(kd){for(var Ec in pb){var nd=pb[Ec];if(void 0!==nd[kd.id]){var Nc=nd[kd.id],Cd;for(Cd in Nc)G(Nc[Cd].object),delete Nc[Cd];delete nd[kd.id]}}},initAttributes:S,enableAttribute:V,disableUnusedAttributes:ja}}function Sa(u,z,t,x){var C=x.isWebGL2,G;(this||p).setMode=function(L){G=L};(this||p).render=function(L,S){u.drawArrays(G,L,S);
t.update(S,G,1)};(this||p).renderInstances=function(L,S,V){if(0!==V){if(C){var Z=u;var ja="drawArraysInstanced"}else if(Z=z.get("ANGLE_instanced_arrays"),ja="drawArraysInstancedANGLE",null===Z){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}Z[ja](G,L,S,V);t.update(S,G,V)}}}function wb(u,z,t){function x(kd){if("highp"===kd){if(0<u.getShaderPrecisionFormat(35633,36338).precision&&0<u.getShaderPrecisionFormat(35632,
36338).precision)return"highp";kd="mediump"}return"mediump"===kd&&0<u.getShaderPrecisionFormat(35633,36337).precision&&0<u.getShaderPrecisionFormat(35632,36337).precision?"mediump":"lowp"}var C,G="undefined"!==typeof WebGL2RenderingContext&&u instanceof WebGL2RenderingContext||"undefined"!==typeof WebGL2ComputeRenderingContext&&u instanceof WebGL2ComputeRenderingContext,L=void 0!==t.precision?t.precision:"highp",S=x(L);S!==L&&(console.warn("THREE.WebGLRenderer:",L,"not supported, using",S,"instead."),
L=S);t=!0===t.logarithmicDepthBuffer;S=u.getParameter(34930);var V=u.getParameter(35660),Z=u.getParameter(3379),ja=u.getParameter(34076),ua=u.getParameter(34921),Ca=u.getParameter(36347),bb=u.getParameter(36348),$a=u.getParameter(36349),ub=0<V,pb=G||!!z.get("OES_texture_float"),Rc=ub&&pb,xc=G?u.getParameter(36183):0;return{isWebGL2:G,getMaxAnisotropy:function(){if(void 0!==C)return C;var kd=z.get("EXT_texture_filter_anisotropic");return C=null!==kd?u.getParameter(kd.MAX_TEXTURE_MAX_ANISOTROPY_EXT):
0},getMaxPrecision:x,precision:L,logarithmicDepthBuffer:t,maxTextures:S,maxVertexTextures:V,maxTextureSize:Z,maxCubemapSize:ja,maxAttributes:ua,maxVertexUniforms:Ca,maxVaryings:bb,maxFragmentUniforms:$a,vertexTextures:ub,floatFragmentTextures:pb,floatVertexTextures:Rc,maxSamples:xc}}function cc(u){function z(){ja.value!==C&&(ja.value=C,ja.needsUpdate=0<G);x.numPlanes=G;x.numIntersection=0}function t(ua,Ca,bb,$a){var ub=null!==ua?ua.length:0,pb=null;if(0!==ub){pb=ja.value;if(!0!==$a||null===pb){$a=
bb+4*ub;Ca=Ca.matrixWorldInverse;Z.getNormalMatrix(Ca);if(null===pb||pb.length<$a)pb=new Float32Array($a);for($a=0;$a!==ub;++$a,bb+=4)V.copy(ua[$a]).applyMatrix4(Ca,Z),V.normal.toArray(pb,bb),pb[bb+3]=V.constant}ja.value=pb;ja.needsUpdate=!0}x.numPlanes=ub;x.numIntersection=0;return pb}var x=this||p,C=null,G=0,L=!1,S=!1,V=new Iv,Z=new Tp,ja={value:null,needsUpdate:!1};(this||p).uniform=ja;(this||p).numPlanes=0;(this||p).numIntersection=0;(this||p).init=function(ua,Ca,bb){var $a=0!==ua.length||Ca||
0!==G||L;L=Ca;C=t(ua,bb,0);G=ua.length;return $a};(this||p).beginShadows=function(){S=!0;t(null)};(this||p).endShadows=function(){S=!1;z()};(this||p).setState=function(ua,Ca,bb){var $a=ua.clippingPlanes,ub=ua.clipIntersection,pb=ua.clipShadows;ua=u.get(ua);if(!L||null===$a||0===$a.length||S&&!pb)S?t(null):z();else{pb=S?0:G;var Rc=4*pb,xc=ua.clippingState||null;ja.value=xc;xc=t($a,Ca,Rc,bb);for(Ca=0;Ca!==Rc;++Ca)xc[Ca]=C[Ca];ua.clippingState=xc;(this||p).numIntersection=ub?(this||p).numPlanes:0;(this||
p).numPlanes+=pb}}}function Ld(u){function z(x,C){303===C?x.mapping=301:304===C&&(x.mapping=302);return x}var t=new WeakMap;return{get:function(x){if(x&&x.isTexture){var C=x.mapping;if(303===C||304===C){if(t.has(x))return C=t.get(x).texture,z(C,x.mapping);var G=x.image;if(G&&0<G.height){C=u.getRenderList();var L=u.getRenderTarget(),S=u.getRenderState();G=new Qc(G.height/2);G.fromEquirectangularTexture(u,x);t.set(x,G);u.setRenderTarget(L);u.setRenderList(C);u.setRenderState(S);return z(G.texture,x.mapping)}return null}}return x},
dispose:function(){t=new WeakMap}}}function Jd(u){var z={};return{has:function(t){if(void 0!==z[t])return null!==z[t];switch(t){case "WEBGL_depth_texture":var x=u.getExtension("WEBGL_depth_texture")||u.getExtension("MOZ_WEBGL_depth_texture")||u.getExtension("WEBKIT_WEBGL_depth_texture");break;case "EXT_texture_filter_anisotropic":x=u.getExtension("EXT_texture_filter_anisotropic")||u.getExtension("MOZ_EXT_texture_filter_anisotropic")||u.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case "WEBGL_compressed_texture_s3tc":x=
u.getExtension("WEBGL_compressed_texture_s3tc")||u.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||u.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case "WEBGL_compressed_texture_pvrtc":x=u.getExtension("WEBGL_compressed_texture_pvrtc")||u.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:x=u.getExtension(t)}z[t]=x;return null!==x},get:function(t){this.has(t)||console.warn("THREE.WebGLRenderer: "+t+" extension not supported.");return z[t]}}}function Uc(u,z,t,x){function C(V){V=
V.target;var Z=L.get(V);null!==Z.index&&z.remove(Z.index);for(var ja in Z.attributes)z.remove(Z.attributes[ja]);V.removeEventListener("dispose",C);L.delete(V);if(ja=S.get(Z))z.remove(ja),S.delete(Z);x.releaseStatesOfGeometry(V);!0===V.isInstancedBufferGeometry&&delete V._maxInstanceCount;t.memory.geometries--}function G(V){var Z=[],ja=V.index,ua=V.attributes.position;if(null!==ja){ua=ja.array;ja=ja.version;for(var Ca=0,bb=ua.length;Ca<bb;Ca+=3){var $a=ua[Ca+0],ub=ua[Ca+1],pb=ua[Ca+2];Z.push($a,ub,
ub,pb,pb,$a)}}else for(Ca=ua.array,ja=ua.version,ua=0,Ca=Ca.length/3-1;ua<Ca;ua+=3)bb=ua+0,$a=ua+1,ub=ua+2,Z.push(bb,$a,$a,ub,ub,bb);Z=new (65535<fa(Z)?T:K)(Z,1);Z.version=ja;(ja=S.get(V))&&z.remove(ja);S.set(V,Z)}var L=new WeakMap,S=new WeakMap;return{get:function(V,Z){var ja=L.get(Z);if(ja)return ja;Z.addEventListener("dispose",C);Z.isBufferGeometry?ja=Z:Z.isGeometry&&(void 0===Z._bufferGeometry&&(Z._bufferGeometry=(new oa).setFromObject(V)),ja=Z._bufferGeometry);L.set(Z,ja);t.memory.geometries++;
return ja},update:function(V){var Z=V.attributes;for(ua in Z)z.update(Z[ua],34962);V=V.morphAttributes;for(var ja in V){Z=V[ja];var ua=0;for(var Ca=Z.length;ua<Ca;ua++)z.update(Z[ua],34962)}},getWireframeAttribute:function(V){var Z=S.get(V);if(Z){var ja=V.index;null!==ja&&Z.version<ja.version&&G(V)}else G(V);return S.get(V)}}}function af(u,z,t,x){var C=x.isWebGL2,G,L,S;(this||p).setMode=function(V){G=V};(this||p).setIndex=function(V){L=V.type;S=V.bytesPerElement};(this||p).render=function(V,Z){u.drawElements(G,
Z,L,V*S);t.update(Z,G,1)};(this||p).renderInstances=function(V,Z,ja){if(0!==ja){if(C){var ua=u;var Ca="drawElementsInstanced"}else if(ua=z.get("ANGLE_instanced_arrays"),Ca="drawElementsInstancedANGLE",null===ua){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}ua[Ca](G,Z,L,V*S,ja);t.update(Z,G,ja)}}}function Ne(u){var z={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,
textures:0},render:z,programs:null,autoReset:!0,reset:function(){z.frame++;z.calls=0;z.triangles=0;z.points=0;z.lines=0},update:function(t,x,C){z.calls++;switch(x){case 4:z.triangles+=t/3*C;break;case 1:z.lines+=t/2*C;break;case 3:z.lines+=C*(t-1);break;case 2:z.lines+=C*t;break;case 0:z.points+=C*t;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",x)}}}}function Qh(u,z){return u[0]-z[0]}function mh(u,z){return Math.abs(z[1])-Math.abs(u[1])}function kj(u){for(var z={},t=new Float32Array(8),
x=[],C=0;8>C;C++)x[C]=[C,0];return{update:function(G,L,S,V){var Z=G.morphTargetInfluences;G=void 0===Z?0:Z.length;var ja=z[L.id];if(void 0===ja){ja=[];for(var ua=0;ua<G;ua++)ja[ua]=[ua,0];z[L.id]=ja}for(ua=0;ua<G;ua++){var Ca=ja[ua];Ca[0]=ua;Ca[1]=Z[ua]}ja.sort(mh);for(Z=0;8>Z;Z++)Z<G&&ja[Z][1]?(x[Z][0]=ja[Z][0],x[Z][1]=ja[Z][1]):(x[Z][0]=Number.MAX_SAFE_INTEGER,x[Z][1]=0);x.sort(Qh);G=S.morphTargets&&L.morphAttributes.position;S=S.morphNormals&&L.morphAttributes.normal;for(Z=ja=0;8>Z;Z++)Ca=x[Z],
ua=Ca[0],Ca=Ca[1],ua!==Number.MAX_SAFE_INTEGER&&Ca?(G&&L.getAttribute("morphTarget"+Z)!==G[ua]&&L.setAttribute("morphTarget"+Z,G[ua]),S&&L.getAttribute("morphNormal"+Z)!==S[ua]&&L.setAttribute("morphNormal"+Z,S[ua]),t[Z]=Ca,ja+=Ca):(G&&void 0!==L.getAttribute("morphTarget"+Z)&&L.deleteAttribute("morphTarget"+Z),S&&void 0!==L.getAttribute("morphNormal"+Z)&&L.deleteAttribute("morphNormal"+Z),t[Z]=0);L=L.morphTargetsRelative?1:1-ja;V.getUniforms().setValue(u,"morphTargetBaseInfluence",L);V.getUniforms().setValue(u,
"morphTargetInfluences",t)}}}function cj(u,z,t,x){var C=new WeakMap;return{update:function(G){var L=x.render.frame,S=G.geometry,V=z.get(G,S);C.get(V)!==L&&(S.isGeometry&&V.updateFromObject(G),z.update(V),C.set(V,L));G.isInstancedMesh&&(t.update(G.instanceMatrix,34962),null!==G.instanceColor&&t.update(G.instanceColor,34962));return V},dispose:function(){C=new WeakMap}}}function lj(u,z,t,x){r.call(this||p,null);(this||p).image={data:u||null,width:z||1,height:t||1,depth:x||1};(this||p).magFilter=1003;
(this||p).minFilter=1003;(this||p).wrapR=1001;(this||p).generateMipmaps=!1;(this||p).flipY=!1;(this||p).needsUpdate=!0}function Cj(u,z,t,x){r.call(this||p,null);(this||p).image={data:u||null,width:z||1,height:t||1,depth:x||1};(this||p).magFilter=1003;(this||p).minFilter=1003;(this||p).wrapR=1001;(this||p).generateMipmaps=!1;(this||p).flipY=!1;(this||p).needsUpdate=!0}function Lj(u,z,t){var x=u[0];if(0>=x||0<x)return u;var C=z*t,G=N9[C];void 0===G&&(G=new Float32Array(C),N9[C]=G);if(0!==z)for(x.toArray(G,
0),x=1,C=0;x!==z;++x)C+=t,u[x].toArray(G,C);return G}function Ti(u,z){if(u.length!==z.length)return!1;for(var t=0,x=u.length;t<x;t++)if(u[t]!==z[t])return!1;return!0}function ph(u,z){for(var t=0,x=z.length;t<x;t++)u[t]=z[t]}function Wj(u,z){var t=O9[z];void 0===t&&(t=new Int32Array(z),O9[z]=t);for(var x=0;x!==z;++x)t[x]=u.allocateTextureUnit();return t}function Fk(u,z){var t=(this||p).cache;t[0]!==z&&(u.uniform1f((this||p).addr,z),t[0]=z)}function ck(u,z){var t=(this||p).cache;if(void 0!==z.x){if(t[0]!==
z.x||t[1]!==z.y)u.uniform2f((this||p).addr,z.x,z.y),t[0]=z.x,t[1]=z.y}else Ti(t,z)||(u.uniform2fv((this||p).addr,z),ph(t,z))}function Gk(u,z){var t=(this||p).cache;if(void 0!==z.x){if(t[0]!==z.x||t[1]!==z.y||t[2]!==z.z)u.uniform3f((this||p).addr,z.x,z.y,z.z),t[0]=z.x,t[1]=z.y,t[2]=z.z}else if(void 0!==z.r){if(t[0]!==z.r||t[1]!==z.g||t[2]!==z.b)u.uniform3f((this||p).addr,z.r,z.g,z.b),t[0]=z.r,t[1]=z.g,t[2]=z.b}else Ti(t,z)||(u.uniform3fv((this||p).addr,z),ph(t,z))}function Fy(u,z){var t=(this||p).cache;
if(void 0!==z.x){if(t[0]!==z.x||t[1]!==z.y||t[2]!==z.z||t[3]!==z.w)u.uniform4f((this||p).addr,z.x,z.y,z.z,z.w),t[0]=z.x,t[1]=z.y,t[2]=z.z,t[3]=z.w}else Ti(t,z)||(u.uniform4fv((this||p).addr,z),ph(t,z))}function Od(u,z){var t=(this||p).cache,x=z.elements;void 0===x?Ti(t,z)||(u.uniformMatrix2fv((this||p).addr,!1,z),ph(t,z)):Ti(t,x)||(P9.set(x),u.uniformMatrix2fv((this||p).addr,!1,P9),ph(t,x))}function Pd(u,z){var t=(this||p).cache,x=z.elements;void 0===x?Ti(t,z)||(u.uniformMatrix3fv((this||p).addr,
!1,z),ph(t,z)):Ti(t,x)||(Q9.set(x),u.uniformMatrix3fv((this||p).addr,!1,Q9),ph(t,x))}function Ey(u,z){var t=(this||p).cache,x=z.elements;void 0===x?Ti(t,z)||(u.uniformMatrix4fv((this||p).addr,!1,z),ph(t,z)):Ti(t,x)||(R9.set(x),u.uniformMatrix4fv((this||p).addr,!1,R9),ph(t,x))}function Rw(u,z,t){var x=(this||p).cache,C=t.allocateTextureUnit();x[0]!==C&&(u.uniform1i((this||p).addr,C),x[0]=C);t.safeSetTexture2D(z||S9,C)}function tv(u,z,t){var x=(this||p).cache,C=t.allocateTextureUnit();x[0]!==C&&(u.uniform1i((this||
p).addr,C),x[0]=C);t.setTexture2DArray(z||era,C)}function VA(u,z,t){var x=(this||p).cache,C=t.allocateTextureUnit();x[0]!==C&&(u.uniform1i((this||p).addr,C),x[0]=C);t.setTexture3D(z||fra,C)}function ZA(u,z,t){var x=(this||p).cache,C=t.allocateTextureUnit();x[0]!==C&&(u.uniform1i((this||p).addr,C),x[0]=C);t.safeSetTextureCube(z||T9,C)}function $A(u,z){var t=(this||p).cache;t[0]!==z&&(u.uniform1i((this||p).addr,z),t[0]=z)}function aB(u,z){var t=(this||p).cache;Ti(t,z)||(u.uniform2iv((this||p).addr,
z),ph(t,z))}function bB(u,z){var t=(this||p).cache;Ti(t,z)||(u.uniform3iv((this||p).addr,z),ph(t,z))}function WA(u,z){var t=(this||p).cache;Ti(t,z)||(u.uniform4iv((this||p).addr,z),ph(t,z))}function XT(u,z){var t=(this||p).cache;t[0]!==z&&(u.uniform1ui((this||p).addr,z),t[0]=z)}function jM(u){switch(u){case 5126:return Fk;case 35664:return ck;case 35665:return Gk;case 35666:return Fy;case 35674:return Od;case 35675:return Pd;case 35676:return Ey;case 5124:case 35670:return $A;case 35667:case 35671:return aB;
case 35668:case 35672:return bB;case 35669:case 35673:return WA;case 5125:return XT;case 35678:case 36198:case 36298:case 36306:case 35682:return Rw;case 35679:case 36299:case 36307:return VA;case 35680:case 36300:case 36308:case 36293:return ZA;case 36289:case 36303:case 36311:case 36292:return tv}}function aM(u,z){u.uniform1fv((this||p).addr,z)}function ZG(u,z){u.uniform1iv((this||p).addr,z)}function YT(u,z){u.uniform2iv((this||p).addr,z)}function $T(u,z){u.uniform3iv((this||p).addr,z)}function ZT(u,
z){u.uniform4iv((this||p).addr,z)}function qr(u,z){z=Lj(z,(this||p).size,2);u.uniform2fv((this||p).addr,z)}function QT(u,z){z=Lj(z,(this||p).size,3);u.uniform3fv((this||p).addr,z)}function RT(u,z){z=Lj(z,(this||p).size,4);u.uniform4fv((this||p).addr,z)}function PT(u,z){z=Lj(z,(this||p).size,4);u.uniformMatrix2fv((this||p).addr,!1,z)}function XA(u,z){z=Lj(z,(this||p).size,9);u.uniformMatrix3fv((this||p).addr,!1,z)}function ST(u,z){z=Lj(z,(this||p).size,16);u.uniformMatrix4fv((this||p).addr,!1,z)}function kM(u,
z,t){var x=z.length,C=Wj(t,x);u.uniform1iv((this||p).addr,C);for(u=0;u!==x;++u)t.safeSetTexture2D(z[u]||S9,C[u])}function Lt(u,z,t){var x=z.length,C=Wj(t,x);u.uniform1iv((this||p).addr,C);for(u=0;u!==x;++u)t.safeSetTextureCube(z[u]||T9,C[u])}function TT(u){switch(u){case 5126:return aM;case 35664:return qr;case 35665:return QT;case 35666:return RT;case 35674:return PT;case 35675:return XA;case 35676:return ST;case 5124:case 35670:return ZG;case 35667:case 35671:return YT;case 35668:case 35672:return $T;
case 35669:case 35673:return ZT;case 35678:case 36198:case 36298:case 36306:case 35682:return kM;case 35680:case 36300:case 36308:case 36293:return Lt}}function YG(u,z,t){(this||p).id=u;(this||p).addr=t;(this||p).cache=[];(this||p).setValue=jM(z.type)}function bM(u,z,t){(this||p).id=u;(this||p).addr=t;(this||p).cache=[];(this||p).size=z.size;(this||p).setValue=TT(z.type)}function hM(u){(this||p).id=u;(this||p).seq=[];(this||p).map={}}function uv(u,z){(this||p).seq=[];(this||p).map={};for(var t=u.getProgramParameter(z,
35718),x=0;x<t;++x){var C=u.getActiveUniform(z,x),G=u.getUniformLocation(z,C.name),L=this||p,S=C.name,V=S.length;for(YV.lastIndex=0;;){var Z=YV.exec(S),ja=YV.lastIndex,ua=Z[1],Ca=Z[3];"]"===Z[2]&&(ua|=0);if(void 0===Ca||"["===Ca&&ja+2===V){S=L;C=void 0===Ca?new YG(ua,C,G):new bM(ua,C,G);S.seq.push(C);S.map[C.id]=C;break}else Ca=L.map[ua],void 0===Ca&&(Ca=new hM(ua),ua=L,L=Ca,ua.seq.push(L),ua.map[L.id]=L),L=Ca}}}function cM(u,z,t){z=u.createShader(z);u.shaderSource(z,t);u.compileShader(z);return z}
function gM(u){switch(u){case 3E3:return["Linear","( value )"];case 3001:return["sRGB","( value )"];case 3002:return["RGBE","( value )"];case 3004:return["RGBM","( value, 7.0 )"];case 3005:return["RGBM","( value, 16.0 )"];case 3006:return["RGBD","( value, 256.0 )"];case 3007:return["Gamma","( value, float( GAMMA_FACTOR ) )"];case 3003:return["LogLuv","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",u),["Linear","( value )"]}}function dM(u,z,t){var x=u.getShaderParameter(z,
35713),C=u.getShaderInfoLog(z).trim();if(x&&""===C)return"";u=u.getShaderSource(z).split("\n");for(z=0;z<u.length;z++)u[z]=z+1+": "+u[z];u=u.join("\n");return"THREE.WebGLShader: gl.getShaderInfoLog() "+t+"\n"+C+u}function Gy(u,z){z=gM(z);return"vec4 "+u+"( vec4 value ) { return "+z[0]+"ToLinear"+z[1]+"; }"}function WT(u,z){z=gM(z);return"vec4 "+u+"( vec4 value ) { return LinearTo"+z[0]+z[1]+"; }"}function eM(u,z){switch(z){case 1:z="Linear";break;case 2:z="Reinhard";break;case 3:z="OptimizedCineon";
break;case 4:z="ACESFilmic";break;case 5:z="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",z),z="Linear"}return"vec3 "+u+"( vec3 color ) { return "+z+"ToneMapping( color ); }"}function fM(u){var z=[],t;for(t in u){var x=u[t];!1!==x&&z.push("#define "+t+" "+x)}return z.join("\n")}function YA(u){return""!==u}function iM(u,z){return u.replace(/NUM_DIR_LIGHTS/g,z.numDirLights).replace(/NUM_SPOT_LIGHTS/g,z.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,z.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,
z.numPointLights).replace(/NUM_HEMI_LIGHTS/g,z.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,z.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,z.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,z.numPointLightShadows)}function na(u,z){return u.replace(/NUM_CLIPPING_PLANES/g,z.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,z.numClippingPlanes-z.numClipIntersection)}function Qa(u,z){u=gj[z];if(void 0===u)throw Error("Can not resolve #include <"+z+">");return u.replace(ZV,Qa)}function Ga(u,
z,t,x){console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead.");return Za(u,z,t,x)}function Za(u,z,t,x){u="";for(z=parseInt(z);z<parseInt(t);z++)u+=x.replace(/\[\s*i\s*\]/g,"[ "+z+" ]").replace(/UNROLLED_LOOP_INDEX/g,z);return u}function mb(u){var z="precision "+u.precision+" float;\nprecision "+u.precision+" int;";"highp"===u.precision?z+="\n#define HIGH_PRECISION":"mediump"===u.precision?z+="\n#define MEDIUM_PRECISION":"lowp"===
u.precision&&(z+="\n#define LOW_PRECISION");return z}function $b(u){var z="SHADOWMAP_TYPE_BASIC";1===u.shadowMapType?z="SHADOWMAP_TYPE_PCF":2===u.shadowMapType?z="SHADOWMAP_TYPE_PCF_SOFT":3===u.shadowMapType&&(z="SHADOWMAP_TYPE_VSM");return z}function eb(u){var z="ENVMAP_TYPE_CUBE";if(u.envMap)switch(u.envMapMode){case 301:case 302:z="ENVMAP_TYPE_CUBE";break;case 306:case 307:z="ENVMAP_TYPE_CUBE_UV"}return z}function Sb(u){var z="ENVMAP_MODE_REFLECTION";if(u.envMap)switch(u.envMapMode){case 302:case 307:z=
"ENVMAP_MODE_REFRACTION"}return z}function Hb(u){var z="ENVMAP_BLENDING_NONE";if(u.envMap)switch(u.combine){case 0:z="ENVMAP_BLENDING_MULTIPLY";break;case 1:z="ENVMAP_BLENDING_MIX";break;case 2:z="ENVMAP_BLENDING_ADD"}return z}function hd(u,z,t,x){var C=u.getContext(),G=t.defines,L=t.vertexShader,S=t.fragmentShader,V=$b(t),Z=eb(t),ja=Sb(t),ua=Hb(t),Ca=0<u.gammaFactor?u.gammaFactor:1,bb=t.isWebGL2?"":[t.extensionDerivatives||t.envMapCubeUV||t.bumpMap||t.tangentSpaceNormalMap||t.clearcoatNormalMap||
t.flatShading||"physical"===t.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(t.extensionFragDepth||t.logarithmicDepthBuffer)&&t.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",t.extensionDrawBuffers&&t.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(t.extensionShaderTextureLOD||t.envMap)&&t.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(YA).join("\n"),$a=fM(G),ub=C.createProgram(),pb=t.glslVersion?
"#version "+t.glslVersion+"\n":"";t.isRawShaderMaterial?(G=[$a].filter(YA).join("\n"),0<G.length&&(G+="\n"),V=[bb,$a].filter(YA).join("\n"),0<V.length&&(V+="\n")):(G=[mb(t),"#define SHADER_NAME "+t.shaderName,$a,t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+Ca,"#define MAX_BONES "+t.maxBones,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?
"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+ja:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMap&&t.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",t.normalMap&&t.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":
"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.displacementMap&&t.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexUvs?"#define USE_UV":"",t.uvsVertexOnly?"#define UVS_VERTEX_ONLY":
"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.useVertexTexture?"#define BONE_TEXTURE":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&!1===t.flatShading?"#define USE_MORPHNORMALS":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+V:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&
t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT",
"\tattribute vec4 tangent;","#endif","#ifdef USE_COLOR","\tattribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;",
"\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(YA).join("\n"),V=[bb,mb(t),"#define SHADER_NAME "+t.shaderName,$a,t.alphaTest?"#define ALPHATEST "+t.alphaTest+(t.alphaTest%1?"":".0"):"","#define GAMMA_FACTOR "+Ca,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?
"#define "+Z:"",t.envMap?"#define "+ja:"",t.envMap?"#define "+ua:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMap&&t.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",t.normalMap&&t.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":
"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.sheen?"#define USE_SHEEN":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor?"#define USE_COLOR":"",t.vertexUvs?"#define USE_UV":"",t.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",t.gradientMap?
"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+V:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"",(t.extensionShaderTextureLOD||
t.envMap)&&t.rendererExtensionShaderTextureLod?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",0!==t.toneMapping?"#define TONE_MAPPING":"",0!==t.toneMapping?gj.tonemapping_pars_fragment:"",0!==t.toneMapping?eM("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",gj.encodings_pars_fragment,t.map?Gy("mapTexelToLinear",t.mapEncoding):"",t.matcap?Gy("matcapTexelToLinear",t.matcapEncoding):"",t.envMap?Gy("envMapTexelToLinear",
t.envMapEncoding):"",t.emissiveMap?Gy("emissiveMapTexelToLinear",t.emissiveMapEncoding):"",t.lightMap?Gy("lightMapTexelToLinear",t.lightMapEncoding):"",WT("linearToOutputTexel",t.outputEncoding),t.depthPacking?"#define DEPTH_PACKING "+t.depthPacking:"","\n"].filter(YA).join("\n"));L=L.replace(ZV,Qa);L=iM(L,t);L=na(L,t);S=S.replace(ZV,Qa);S=iM(S,t);S=na(S,t);L=L.replace(U9,Za).replace(V9,Ga);S=S.replace(U9,Za).replace(V9,Ga);t.isWebGL2&&!0!==t.isRawShaderMaterial&&(pb="#version 300 es\n",G="#define attribute in\n#define varying out\n#define texture2D texture\n"+
G,V=["#define varying in","300 es"===t.glslVersion?"":"out highp vec4 pc_fragColor;","300 es"===t.glslVersion?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth\n#define texture2D texture\n#define textureCube texture\n#define texture2DProj textureProj\n#define texture2DLodEXT textureLod\n#define texture2DProjLodEXT textureProjLod\n#define textureCubeLodEXT textureLod\n#define texture2DGradEXT textureGrad\n#define texture2DProjGradEXT textureProjGrad\n#define textureCubeGradEXT textureGrad"].join("\n")+
"\n"+V);S=pb+V+S;L=cM(C,35633,pb+G+L);S=cM(C,35632,S);C.attachShader(ub,L);C.attachShader(ub,S);void 0!==t.index0AttributeName?C.bindAttribLocation(ub,0,t.index0AttributeName):!0===t.morphTargets&&C.bindAttribLocation(ub,0,"position");C.linkProgram(ub);if(u.debug.checkShaderErrors){u=C.getProgramInfoLog(ub).trim();pb=C.getShaderInfoLog(L).trim();Z=C.getShaderInfoLog(S).trim();ua=ja=!0;if(!1===C.getProgramParameter(ub,35714))ja=!1,Ca=dM(C,L,"vertex"),bb=dM(C,S,"fragment"),console.error("THREE.WebGLProgram: shader error: ",
C.getError(),"35715",C.getProgramParameter(ub,35715),"gl.getProgramInfoLog",u,Ca,bb);else if(""!==u)console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",u);else if(""===pb||""===Z)ua=!1;ua&&((this||p).diagnostics={runnable:ja,programLog:u,vertexShader:{log:pb,prefix:G},fragmentShader:{log:Z,prefix:V}})}C.deleteShader(L);C.deleteShader(S);var Rc;(this||p).getUniforms=function(){void 0===Rc&&(Rc=new uv(C,ub));return Rc};var xc;(this||p).getAttributes=function(){if(void 0===xc){for(var kd={},Ec=
C.getProgramParameter(ub,35721),nd=0;nd<Ec;nd++){var Nc=C.getActiveAttrib(ub,nd).name;kd[Nc]=C.getAttribLocation(ub,Nc)}xc=kd}return xc};(this||p).destroy=function(){x.releaseStatesOfProgram(this||p);C.deleteProgram(ub);(this||p).program=void 0};(this||p).name=t.shaderName;(this||p).id=gra++;(this||p).cacheKey=z;(this||p).usedTimes=1;(this||p).program=ub;(this||p).vertexShader=L;(this||p).fragmentShader=S;return this||p}function Ob(u,z,t,x,C,G){function L(pb){if(pb)pb.isTexture?Rc=pb.encoding:pb.isWebGLRenderTarget&&
(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),Rc=pb.texture.encoding);else var Rc=3E3;return Rc}var S=[],V=x.isWebGL2,Z=x.logarithmicDepthBuffer,ja=x.floatVertexTextures,ua=x.maxVertexUniforms,Ca=x.vertexTextures,bb=x.precision,$a={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",
MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"},ub="precision isWebGL2 supportsVertexTextures outputEncoding instancing instancingColor map mapEncoding matcap matcapEncoding envMap envMapMode envMapEncoding envMapCubeUV lightMap lightMapEncoding aoMap emissiveMap emissiveMapEncoding bumpMap normalMap objectSpaceNormalMap tangentSpaceNormalMap clearcoatMap clearcoatRoughnessMap clearcoatNormalMap displacementMap specularMap roughnessMap metalnessMap gradientMap alphaMap combine vertexColors vertexTangents vertexUvs uvsVertexOnly fog useFog fogExp2 flatShading sizeAttenuation logarithmicDepthBuffer skinning maxBones useVertexTexture morphTargets morphNormals maxMorphTargets maxMorphNormals premultipliedAlpha numDirLights numPointLights numSpotLights numHemiLights numRectAreaLights numDirLightShadows numPointLightShadows numSpotLightShadows shadowMapEnabled shadowMapType toneMapping physicallyCorrectLights alphaTest doubleSided flipSided numClippingPlanes numClipIntersection depthPacking dithering sheen transmissionMap".split(" ");
return{getParameters:function(pb,Rc,xc,kd,Ec){var nd=kd.fog;kd=pb.isMeshStandardMaterial?kd.environment:null;kd=z.get(pb.envMap||kd);var Nc=$a[pb.type];if(Ec.isSkinnedMesh){var Cd=Ec.skeleton.bones;if(ja)Cd=1024;else{var Xd=Math.min(Math.floor((ua-20)/4),Cd.length);Xd<Cd.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+Cd.length+" bones. This GPU supports "+Xd+"."),Cd=0):Cd=Xd}}else Cd=0;null!==pb.precision&&(bb=x.getMaxPrecision(pb.precision),bb!==pb.precision&&console.warn("THREE.WebGLProgram.getParameters:",
pb.precision,"not supported, using",bb,"instead."));if(Nc){var yd=Yt[Nc];Xd=yd.vertexShader;yd=yd.fragmentShader}else Xd=pb.vertexShader,yd=pb.fragmentShader;var Ad=u.getRenderTarget();return{isWebGL2:V,shaderID:Nc,shaderName:pb.type,vertexShader:Xd,fragmentShader:yd,defines:pb.defines,isRawShaderMaterial:!0===pb.isRawShaderMaterial,glslVersion:pb.glslVersion,precision:bb,instancing:!0===Ec.isInstancedMesh,instancingColor:!0===Ec.isInstancedMesh&&null!==Ec.instanceColor,supportsVertexTextures:Ca,
outputEncoding:null!==Ad?L(Ad.texture):u.outputEncoding,map:!!pb.map,mapEncoding:L(pb.map),matcap:!!pb.matcap,matcapEncoding:L(pb.matcap),envMap:!!kd,envMapMode:kd&&kd.mapping,envMapEncoding:L(kd),envMapCubeUV:!!kd&&(306===kd.mapping||307===kd.mapping),lightMap:!!pb.lightMap,lightMapEncoding:L(pb.lightMap),aoMap:!!pb.aoMap,emissiveMap:!!pb.emissiveMap,emissiveMapEncoding:L(pb.emissiveMap),bumpMap:!!pb.bumpMap,normalMap:!!pb.normalMap,objectSpaceNormalMap:1===pb.normalMapType,tangentSpaceNormalMap:0===
pb.normalMapType,clearcoatMap:!!pb.clearcoatMap,clearcoatRoughnessMap:!!pb.clearcoatRoughnessMap,clearcoatNormalMap:!!pb.clearcoatNormalMap,displacementMap:!!pb.displacementMap,roughnessMap:!!pb.roughnessMap,metalnessMap:!!pb.metalnessMap,specularMap:!!pb.specularMap,alphaMap:!!pb.alphaMap,gradientMap:!!pb.gradientMap,sheen:!!pb.sheen,transmissionMap:!!pb.transmissionMap,combine:pb.combine,vertexTangents:pb.normalMap&&pb.vertexTangents,vertexColors:pb.vertexColors,vertexUvs:!!pb.map||!!pb.bumpMap||
!!pb.normalMap||!!pb.specularMap||!!pb.alphaMap||!!pb.emissiveMap||!!pb.roughnessMap||!!pb.metalnessMap||!!pb.clearcoatMap||!!pb.clearcoatRoughnessMap||!!pb.clearcoatNormalMap||!!pb.displacementMap||!!pb.transmissionMap,uvsVertexOnly:!(pb.map||pb.bumpMap||pb.normalMap||pb.specularMap||pb.alphaMap||pb.emissiveMap||pb.roughnessMap||pb.metalnessMap||pb.clearcoatNormalMap||pb.transmissionMap)&&!!pb.displacementMap,fog:!!nd,useFog:pb.fog,fogExp2:nd&&nd.isFogExp2,flatShading:pb.flatShading,sizeAttenuation:pb.sizeAttenuation,
logarithmicDepthBuffer:Z,skinning:pb.skinning&&0<Cd,maxBones:Cd,useVertexTexture:ja,morphTargets:pb.morphTargets,morphNormals:pb.morphNormals,maxMorphTargets:u.maxMorphTargets,maxMorphNormals:u.maxMorphNormals,numDirLights:Rc.directional.length,numPointLights:Rc.point.length,numSpotLights:Rc.spot.length,numRectAreaLights:Rc.rectArea.length,numHemiLights:Rc.hemi.length,numDirLightShadows:Rc.directionalShadowMap.length,numPointLightShadows:Rc.pointShadowMap.length,numSpotLightShadows:Rc.spotShadowMap.length,
numClippingPlanes:G.numPlanes,numClipIntersection:G.numIntersection,dithering:pb.dithering,shadowMapEnabled:u.shadowMap.enabled&&0<xc.length,shadowMapType:u.shadowMap.type,toneMapping:pb.toneMapped?u.toneMapping:0,physicallyCorrectLights:u.physicallyCorrectLights,premultipliedAlpha:pb.premultipliedAlpha,alphaTest:pb.alphaTest,doubleSided:2===pb.side,flipSided:1===pb.side,depthPacking:void 0!==pb.depthPacking?pb.depthPacking:!1,index0AttributeName:pb.index0AttributeName,extensionDerivatives:pb.extensions&&
pb.extensions.derivatives,extensionFragDepth:pb.extensions&&pb.extensions.fragDepth,extensionDrawBuffers:pb.extensions&&pb.extensions.drawBuffers,extensionShaderTextureLOD:pb.extensions&&pb.extensions.shaderTextureLOD,rendererExtensionFragDepth:V||t.has("EXT_frag_depth"),rendererExtensionDrawBuffers:V||t.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:V||t.has("EXT_shader_texture_lod"),customProgramCacheKey:pb.customProgramCacheKey()}},getProgramCacheKey:function(pb){var Rc=[];pb.shaderID?
Rc.push(pb.shaderID):(Rc.push(pb.fragmentShader),Rc.push(pb.vertexShader));if(void 0!==pb.defines)for(var xc in pb.defines)Rc.push(xc),Rc.push(pb.defines[xc]);if(!1===pb.isRawShaderMaterial){for(xc=0;xc<ub.length;xc++)Rc.push(pb[ub[xc]]);Rc.push(u.outputEncoding);Rc.push(u.gammaFactor)}Rc.push(pb.customProgramCacheKey);return Rc.join()},getUniforms:function(pb){var Rc=$a[pb.type];return Rc?W9.clone(Yt[Rc].uniforms):pb.uniforms},acquireProgram:function(pb,Rc){for(var xc,kd=0,Ec=S.length;kd<Ec;kd++){var nd=
S[kd];if(nd.cacheKey===Rc){xc=nd;++xc.usedTimes;break}}void 0===xc&&(xc=new hd(u,Rc,pb,C),S.push(xc));return xc},releaseProgram:function(pb){if(0===--pb.usedTimes){var Rc=S.indexOf(pb);S[Rc]=S[S.length-1];S.pop();pb.destroy()}},programs:S}}function fe(){var u=new WeakMap;return{get:function(z){var t=u.get(z);void 0===t&&(t={},u.set(z,t));return t},remove:function(z){u.delete(z)},update:function(z,t,x){u.get(z)[t]=x},dispose:function(){u=new WeakMap}}}function Ae(u,z){return u.groupOrder!==z.groupOrder?
u.groupOrder-z.groupOrder:u.renderOrder!==z.renderOrder?u.renderOrder-z.renderOrder:u.program!==z.program?u.program.id-z.program.id:u.material.id!==z.material.id?u.material.id-z.material.id:u.z!==z.z?u.z-z.z:u.id-z.id}function Pf(u,z){return u.groupOrder!==z.groupOrder?u.groupOrder-z.groupOrder:u.renderOrder!==z.renderOrder?u.renderOrder-z.renderOrder:u.z!==z.z?z.z-u.z:u.id-z.id}function Lf(u){function z(S,V,Z,ja,ua,Ca){var bb=t[x],$a=u.get(Z);void 0===bb?(bb={id:S.id,object:S,geometry:V,material:Z,
program:$a.program||L,groupOrder:ja,renderOrder:S.renderOrder,z:ua,group:Ca},t[x]=bb):(bb.id=S.id,bb.object=S,bb.geometry=V,bb.material=Z,bb.program=$a.program||L,bb.groupOrder=ja,bb.renderOrder=S.renderOrder,bb.z=ua,bb.group=Ca);x++;return bb}var t=[],x=0,C=[],G=[],L={id:-1};return{opaque:C,transparent:G,init:function(){x=0;C.length=0;G.length=0},push:function(S,V,Z,ja,ua,Ca){S=z(S,V,Z,ja,ua,Ca);(!0===Z.transparent?G:C).push(S)},unshift:function(S,V,Z,ja,ua,Ca){S=z(S,V,Z,ja,ua,Ca);(!0===Z.transparent?
G:C).unshift(S)},finish:function(){for(var S=x,V=t.length;S<V;S++){var Z=t[S];if(null===Z.id)break;Z.id=null;Z.object=null;Z.geometry=null;Z.material=null;Z.program=null;Z.group=null}},sort:function(S,V){1<C.length&&C.sort(S||Ae);1<G.length&&G.sort(V||Pf)}}}function Te(u){var z=new WeakMap;return{get:function(t,x){var C=z.get(t);if(void 0===C){var G=new Lf(u);z.set(t,new WeakMap);z.get(t).set(x,G)}else G=C.get(x),void 0===G&&(G=new Lf(u),C.set(x,G));return G},dispose:function(){z=new WeakMap}}}function Qf(){var u=
{};return{get:function(z){if(void 0!==u[z.id])return u[z.id];switch(z.type){case "DirectionalLight":var t={direction:new qc,color:new tg};break;case "SpotLight":t={position:new qc,direction:new qc,color:new tg,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case "PointLight":t={position:new qc,color:new tg,distance:0,decay:0};break;case "HemisphereLight":t={direction:new qc,skyColor:new tg,groundColor:new tg};break;case "RectAreaLight":t={color:new tg,position:new qc,halfWidth:new qc,halfHeight:new qc}}return u[z.id]=
t}}}function gp(){var u={};return{get:function(z){if(void 0!==u[z.id])return u[z.id];switch(z.type){case "DirectionalLight":var t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ve};break;case "SpotLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ve};break;case "PointLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ve,shadowCameraNear:1,shadowCameraFar:1E3}}return u[z.id]=t}}}function UT(u,z){return(z.castShadow?1:0)-(u.castShadow?
1:0)}function VT(){for(var u=new Qf,z=gp(),t={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]},x=0;9>
x;x++)t.probe.push(new qc);var C=new qc,G=new fj,L=new fj;return{setup:function(S,V,Z){for(var ja=V=0,ua=0,Ca=0;9>Ca;Ca++)t.probe[Ca].set(0,0,0);var bb=Ca=0,$a=0,ub=0,pb=0,Rc=0,xc=0,kd=0;Z=Z.matrixWorldInverse;S.sort(UT);for(var Ec=0,nd=S.length;Ec<nd;Ec++){var Nc=S[Ec],Cd=Nc.color,Xd=Nc.intensity,yd=Nc.distance,Ad=Nc.shadow&&Nc.shadow.map?Nc.shadow.map.texture:null;if(Nc.isAmbientLight)V+=Cd.r*Xd,ja+=Cd.g*Xd,ua+=Cd.b*Xd;else if(Nc.isLightProbe)for(Ad=0;9>Ad;Ad++)t.probe[Ad].addScaledVector(Nc.sh.coefficients[Ad],
Xd);else if(Nc.isDirectionalLight){Xd=u.get(Nc);Xd.color.copy(Nc.color).multiplyScalar(Nc.intensity);Xd.direction.setFromMatrixPosition(Nc.matrixWorld);C.setFromMatrixPosition(Nc.target.matrixWorld);Xd.direction.sub(C);Xd.direction.transformDirection(Z);if(Nc.castShadow){var Ce=Nc.shadow;Cd=z.get(Nc);Cd.shadowBias=Ce.bias;Cd.shadowNormalBias=Ce.normalBias;Cd.shadowRadius=Ce.radius;Cd.shadowMapSize=Ce.mapSize;t.directionalShadow[Ca]=Cd;t.directionalShadowMap[Ca]=Ad;t.directionalShadowMatrix[Ca]=Nc.shadow.matrix;
Rc++}t.directional[Ca]=Xd;Ca++}else Nc.isSpotLight?(Ce=u.get(Nc),Ce.position.setFromMatrixPosition(Nc.matrixWorld),Ce.position.applyMatrix4(Z),Ce.color.copy(Cd).multiplyScalar(Xd),Ce.distance=yd,Ce.direction.setFromMatrixPosition(Nc.matrixWorld),C.setFromMatrixPosition(Nc.target.matrixWorld),Ce.direction.sub(C),Ce.direction.transformDirection(Z),Ce.coneCos=Math.cos(Nc.angle),Ce.penumbraCos=Math.cos(Nc.angle*(1-Nc.penumbra)),Ce.decay=Nc.decay,Nc.castShadow&&(Xd=Nc.shadow,Cd=z.get(Nc),Cd.shadowBias=
Xd.bias,Cd.shadowNormalBias=Xd.normalBias,Cd.shadowRadius=Xd.radius,Cd.shadowMapSize=Xd.mapSize,t.spotShadow[$a]=Cd,t.spotShadowMap[$a]=Ad,t.spotShadowMatrix[$a]=Nc.shadow.matrix,kd++),t.spot[$a]=Ce,$a++):Nc.isRectAreaLight?(Ad=u.get(Nc),Ad.color.copy(Cd).multiplyScalar(Xd),Ad.position.setFromMatrixPosition(Nc.matrixWorld),Ad.position.applyMatrix4(Z),L.identity(),G.copy(Nc.matrixWorld),G.premultiply(Z),L.extractRotation(G),Ad.halfWidth.set(.5*Nc.width,0,0),Ad.halfHeight.set(0,.5*Nc.height,0),Ad.halfWidth.applyMatrix4(L),
Ad.halfHeight.applyMatrix4(L),t.rectArea[ub]=Ad,ub++):Nc.isPointLight?(Xd=u.get(Nc),Xd.position.setFromMatrixPosition(Nc.matrixWorld),Xd.position.applyMatrix4(Z),Xd.color.copy(Nc.color).multiplyScalar(Nc.intensity),Xd.distance=Nc.distance,Xd.decay=Nc.decay,Nc.castShadow&&(Ce=Nc.shadow,Cd=z.get(Nc),Cd.shadowBias=Ce.bias,Cd.shadowNormalBias=Ce.normalBias,Cd.shadowRadius=Ce.radius,Cd.shadowMapSize=Ce.mapSize,Cd.shadowCameraNear=Ce.camera.near,Cd.shadowCameraFar=Ce.camera.far,t.pointShadow[bb]=Cd,t.pointShadowMap[bb]=
Ad,t.pointShadowMatrix[bb]=Nc.shadow.matrix,xc++),t.point[bb]=Xd,bb++):Nc.isHemisphereLight&&(Ad=u.get(Nc),Ad.direction.setFromMatrixPosition(Nc.matrixWorld),Ad.direction.transformDirection(Z),Ad.direction.normalize(),Ad.skyColor.copy(Nc.color).multiplyScalar(Xd),Ad.groundColor.copy(Nc.groundColor).multiplyScalar(Xd),t.hemi[pb]=Ad,pb++)}0<ub&&(t.rectAreaLTC1=eg.LTC_1,t.rectAreaLTC2=eg.LTC_2);t.ambient[0]=V;t.ambient[1]=ja;t.ambient[2]=ua;S=t.hash;if(S.directionalLength!==Ca||S.pointLength!==bb||S.spotLength!==
$a||S.rectAreaLength!==ub||S.hemiLength!==pb||S.numDirectionalShadows!==Rc||S.numPointShadows!==xc||S.numSpotShadows!==kd)t.directional.length=Ca,t.spot.length=$a,t.rectArea.length=ub,t.point.length=bb,t.hemi.length=pb,t.directionalShadow.length=Rc,t.directionalShadowMap.length=Rc,t.pointShadow.length=xc,t.pointShadowMap.length=xc,t.spotShadow.length=kd,t.spotShadowMap.length=kd,t.directionalShadowMatrix.length=Rc,t.pointShadowMatrix.length=xc,t.spotShadowMatrix.length=kd,S.directionalLength=Ca,S.pointLength=
bb,S.spotLength=$a,S.rectAreaLength=ub,S.hemiLength=pb,S.numDirectionalShadows=Rc,S.numPointShadows=xc,S.numSpotShadows=kd,t.version=hra++},state:t}}function X9(){var u=new VT,z=[],t=[];return{init:function(){z.length=0;t.length=0},state:{lightsArray:z,shadowsArray:t,lights:u},setupLights:function(x){u.setup(z,t,x)},pushLight:function(x){z.push(x)},pushShadow:function(x){t.push(x)}}}function ira(){var u=new WeakMap;return{get:function(z,t){if(!1===u.has(z)){var x=new X9;u.set(z,new WeakMap);u.get(z).set(t,
x)}else!1===u.get(z).has(t)?(x=new X9,u.get(z).set(t,x)):x=u.get(z).get(t);return x},dispose:function(){u=new WeakMap}}}function cz(u){M.call(this||p);(this||p).type="MeshDepthMaterial";(this||p).depthPacking=3200;(this||p).skinning=!1;(this||p).morphTargets=!1;(this||p).map=null;(this||p).alphaMap=null;(this||p).displacementMap=null;(this||p).displacementScale=1;(this||p).displacementBias=0;(this||p).wireframe=!1;(this||p).wireframeLinewidth=1;(this||p).fog=!1;this.setValues(u)}function dz(u){M.call(this||
p);(this||p).type="MeshDistanceMaterial";(this||p).referencePosition=new qc;(this||p).nearDistance=1;(this||p).farDistance=1E3;(this||p).skinning=!1;(this||p).morphTargets=!1;(this||p).map=null;(this||p).alphaMap=null;(this||p).displacementMap=null;(this||p).displacementScale=1;(this||p).displacementBias=0;(this||p).fog=!1;this.setValues(u)}function Y9(u,z,t){function x(Ec,nd,Nc){Nc=Ec<<0|nd<<1|Nc<<2;var Cd=ua[Nc];void 0===Cd&&(Cd=new cz({depthPacking:3201,morphTargets:Ec,skinning:nd}),ua[Nc]=Cd);
return Cd}function C(Ec,nd,Nc){Nc=Ec<<0|nd<<1|Nc<<2;var Cd=Ca[Nc];void 0===Cd&&(Cd=new dz({morphTargets:Ec,skinning:nd}),Ca[Nc]=Cd);return Cd}function G(Ec,nd,Nc,Cd,Xd,yd,Ad){var Ce=x,gf=Ec.customDepthMaterial;!0===Cd.isPointLight&&(Ce=C,gf=Ec.customDistanceMaterial);void 0===gf?(gf=!1,!0===Nc.morphTargets&&(gf=nd.morphAttributes&&nd.morphAttributes.position&&0<nd.morphAttributes.position.length),nd=!1,!0===Ec.isSkinnedMesh&&(!0===Nc.skinning?nd=!0:console.warn("THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:",
Ec)),Ec=Ce(gf,nd,!0===Ec.isInstancedMesh)):Ec=gf;u.localClippingEnabled&&!0===Nc.clipShadows&&0!==Nc.clippingPlanes.length&&(gf=Ec.uuid,Ce=Nc.uuid,nd=bb[gf],void 0===nd&&(nd={},bb[gf]=nd),gf=nd[Ce],void 0===gf&&(gf=Ec.clone(),nd[Ce]=gf),Ec=gf);Ec.visible=Nc.visible;Ec.wireframe=Nc.wireframe;Ec.side=3===Ad?null!==Nc.shadowSide?Nc.shadowSide:Nc.side:null!==Nc.shadowSide?Nc.shadowSide:$a[Nc.side];Ec.clipShadows=Nc.clipShadows;Ec.clippingPlanes=Nc.clippingPlanes;Ec.clipIntersection=Nc.clipIntersection;
Ec.wireframeLinewidth=Nc.wireframeLinewidth;Ec.linewidth=Nc.linewidth;!0===Cd.isPointLight&&!0===Ec.isMeshDistanceMaterial&&(Ec.referencePosition.setFromMatrixPosition(Cd.matrixWorld),Ec.nearDistance=Xd,Ec.farDistance=yd);return Ec}function L(Ec,nd,Nc,Cd,Xd){if(!1!==Ec.visible){if(Ec.layers.test(nd.layers)&&(Ec.isMesh||Ec.isLine||Ec.isPoints)&&(Ec.castShadow||Ec.receiveShadow&&3===Xd)&&(!Ec.frustumCulled||S.intersectsObject(Ec))){Ec.modelViewMatrix.multiplyMatrices(Nc.matrixWorldInverse,Ec.matrixWorld);
var yd=z.update(Ec),Ad=Ec.material;if(Array.isArray(Ad))for(var Ce=yd.groups,gf=0,hg=Ce.length;gf<hg;gf++){var Cf=Ce[gf],Yf=Ad[Cf.materialIndex];Yf&&Yf.visible&&(Yf=G(Ec,yd,Yf,Cd,Nc.near,Nc.far,Xd),u.renderBufferDirect(Nc,null,yd,Yf,Ec,Cf))}else Ad.visible&&(Ad=G(Ec,yd,Ad,Cd,Nc.near,Nc.far,Xd),u.renderBufferDirect(Nc,null,yd,Ad,Ec,null))}Ec=Ec.children;yd=0;for(Ad=Ec.length;yd<Ad;yd++)L(Ec[yd],nd,Nc,Cd,Xd)}}var S=new XH,V=new Ve,Z=new Ve,ja=new Qk,ua=[],Ca=[],bb={},$a={0:1,1:0,2:2},ub=new Na({defines:{SAMPLE_RATE:.25,
HALF_SAMPLE_RATE:.125},uniforms:{shadow_pass:{value:null},resolution:{value:new Ve},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy ) / resolution ) );\n\tfor ( float i = -1.0; i < 1.0 ; i += SAMPLE_RATE) {\n\t\t#ifdef HORIZONAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( i, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, i ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean * HALF_SAMPLE_RATE;\n\tsquared_mean = squared_mean * HALF_SAMPLE_RATE;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),
pb=ub.clone();pb.defines.HORIZONAL_PASS=1;var Rc=new oa;Rc.setAttribute("position",new W(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));var xc=new gb(Rc,ub),kd=this||p;(this||p).enabled=!1;(this||p).autoUpdate=!0;(this||p).needsUpdate=!1;(this||p).type=1;(this||p).render=function(Ec,nd,Nc){if(!1!==kd.enabled&&(!1!==kd.autoUpdate||!1!==kd.needsUpdate)&&0!==Ec.length){var Cd=u.getRenderTarget(),Xd=u.getActiveCubeFace(),yd=u.getActiveMipmapLevel(),Ad=u.state;Ad.setBlending(0);Ad.buffers.color.setClear(1,
1,1,1);Ad.buffers.depth.setTest(!0);Ad.setScissorTest(!1);for(var Ce=0,gf=Ec.length;Ce<gf;Ce++){var hg=Ec[Ce],Cf=hg.shadow;if(void 0===Cf)console.warn("THREE.WebGLShadowMap:",hg,"has no shadow.");else if(!1!==Cf.autoUpdate||!1!==Cf.needsUpdate){V.copy(Cf.mapSize);var Yf=Cf.getFrameExtents();V.multiply(Yf);Z.copy(Cf.mapSize);if(V.x>t||V.y>t)V.x>t&&(Z.x=Math.floor(t/Yf.x),V.x=Z.x*Yf.x,Cf.mapSize.x=Z.x),V.y>t&&(Z.y=Math.floor(t/Yf.y),V.y=Z.y*Yf.y,Cf.mapSize.y=Z.y);null!==Cf.map||Cf.isPointLightShadow||
3!==(this||p).type||(Yf={minFilter:1006,magFilter:1006,format:1023},Cf.map=new v(V.x,V.y,Yf),Cf.map.texture.name=hg.name+".shadowMap",Cf.mapPass=new v(V.x,V.y,Yf),Cf.camera.updateProjectionMatrix());null===Cf.map&&(Cf.map=new v(V.x,V.y,{minFilter:1003,magFilter:1003,format:1023}),Cf.map.texture.name=hg.name+".shadowMap",Cf.camera.updateProjectionMatrix());u.setRenderTarget(Cf.map);u.clear();Yf=Cf.getViewportCount();for(var gh=0;gh<Yf;gh++){var Pg=Cf.getViewport(gh);ja.set(Z.x*Pg.x,Z.y*Pg.y,Z.x*Pg.z,
Z.y*Pg.w);Ad.viewport(ja);Cf.updateMatrices(hg,gh);S=Cf.getFrustum();L(nd,Nc,Cf.camera,hg,(this||p).type)}Cf.isPointLightShadow||3!==(this||p).type||(hg=Cf,Yf=Nc,gh=z.update(xc),ub.uniforms.shadow_pass.value=hg.map.texture,ub.uniforms.resolution.value=hg.mapSize,ub.uniforms.radius.value=hg.radius,u.setRenderTarget(hg.mapPass),u.clear(),u.renderBufferDirect(Yf,null,gh,ub,xc,null),pb.uniforms.shadow_pass.value=hg.mapPass.texture,pb.uniforms.resolution.value=hg.mapSize,pb.uniforms.radius.value=hg.radius,
u.setRenderTarget(hg.map),u.clear(),u.renderBufferDirect(Yf,null,gh,pb,xc,null));Cf.needsUpdate=!1}}kd.needsUpdate=!1;u.setRenderTarget(Cd,Xd,yd)}}}function jra(u,z,t){function x(id,Oe,lf){var Ig=new Uint8Array(4),Rf=u.createTexture();u.bindTexture(id,Rf);u.texParameteri(id,10241,9728);u.texParameteri(id,10240,9728);for(id=0;id<lf;id++)u.texImage2D(Oe+id,0,6408,1,1,0,6408,5121,Ig);return Rf}function C(id){!0!==pb[id]&&(u.enable(id),pb[id]=!0)}function G(id){!1!==pb[id]&&(u.disable(id),pb[id]=!1)}
function L(id,Oe,lf,Ig,Rf,Rh,Mh,hi){if(0===id)xc&&(G(3042),xc=!1);else if(xc||(C(3042),xc=!0),5!==id){if(id!==kd||hi!==Ad){if(100!==Ec||100!==Cd)u.blendEquation(32774),Cd=Ec=100;if(hi)switch(id){case 1:u.blendFuncSeparate(1,771,1,771);break;case 2:u.blendFunc(1,1);break;case 3:u.blendFuncSeparate(0,0,769,771);break;case 4:u.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",id)}else switch(id){case 1:u.blendFuncSeparate(770,771,1,771);break;case 2:u.blendFunc(770,
1);break;case 3:u.blendFunc(0,769);break;case 4:u.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",id)}yd=Xd=Nc=nd=null;kd=id;Ad=hi}}else{Rf=Rf||Oe;Rh=Rh||lf;Mh=Mh||Ig;if(Oe!==Ec||Rf!==Cd)u.blendEquationSeparate(Zc[Oe],Zc[Rf]),Ec=Oe,Cd=Rf;if(lf!==nd||Ig!==Nc||Rh!==Xd||Mh!==yd)u.blendFuncSeparate(Ee[lf],Ee[Ig],Ee[Rh],Ee[Mh]),nd=lf,Nc=Ig,Xd=Rh,yd=Mh;kd=id;Ad=null}}function S(id){Ce!==id&&(id?u.frontFace(2304):u.frontFace(2305),Ce=id)}function V(id){0!==id?(C(2884),
id!==gf&&(1===id?u.cullFace(1029):2===id?u.cullFace(1028):u.cullFace(1032))):G(2884);gf=id}function Z(id,Oe,lf){if(id){if(C(32823),Cf!==Oe||Yf!==lf)u.polygonOffset(Oe,lf),Cf=Oe,Yf=lf}else G(32823)}function ja(id){void 0===id&&(id=33984+gh-1);sh!==id&&(u.activeTexture(id),sh=id)}var ua,Ca;t=t.isWebGL2;var bb=new function(){var id=!1,Oe=new Qk,lf=null,Ig=new Qk(0,0,0,0);return{setMask:function(Rf){lf===Rf||id||(u.colorMask(Rf,Rf,Rf,Rf),lf=Rf)},setLocked:function(Rf){id=Rf},setClear:function(Rf,Rh,Mh,
hi,bi){!0===bi&&(Rf*=hi,Rh*=hi,Mh*=hi);Oe.set(Rf,Rh,Mh,hi);!1===Ig.equals(Oe)&&(u.clearColor(Rf,Rh,Mh,hi),Ig.copy(Oe))},reset:function(){id=!1;lf=null;Ig.set(-1,0,0,0)}}},$a=new function(){var id=!1,Oe=null,lf=null,Ig=null;return{setTest:function(Rf){Rf?C(2929):G(2929)},setMask:function(Rf){Oe===Rf||id||(u.depthMask(Rf),Oe=Rf)},setFunc:function(Rf){if(lf!==Rf){if(Rf)switch(Rf){case 0:u.depthFunc(512);break;case 1:u.depthFunc(519);break;case 2:u.depthFunc(513);break;case 3:u.depthFunc(515);break;case 4:u.depthFunc(514);
break;case 5:u.depthFunc(518);break;case 6:u.depthFunc(516);break;case 7:u.depthFunc(517);break;default:u.depthFunc(515)}else u.depthFunc(515);lf=Rf}},setLocked:function(Rf){id=Rf},setClear:function(Rf){Ig!==Rf&&(u.clearDepth(Rf),Ig=Rf)},reset:function(){id=!1;Ig=lf=Oe=null}}},ub=new function(){var id=!1,Oe=null,lf=null,Ig=null,Rf=null,Rh=null,Mh=null,hi=null,bi=null;return{setTest:function(vk){id||(vk?C(2960):G(2960))},setMask:function(vk){Oe===vk||id||(u.stencilMask(vk),Oe=vk)},setFunc:function(vk,
ze,bg){if(lf!==vk||Ig!==ze||Rf!==bg)u.stencilFunc(vk,ze,bg),lf=vk,Ig=ze,Rf=bg},setOp:function(vk,ze,bg){if(Rh!==vk||Mh!==ze||hi!==bg)u.stencilOp(vk,ze,bg),Rh=vk,Mh=ze,hi=bg},setLocked:function(vk){id=vk},setClear:function(vk){bi!==vk&&(u.clearStencil(vk),bi=vk)},reset:function(){id=!1;bi=hi=Mh=Rh=Rf=Ig=lf=Oe=null}}},pb={},Rc=null,xc=null,kd=null,Ec=null,nd=null,Nc=null,Cd=null,Xd=null,yd=null,Ad=!1,Ce=null,gf=null,hg=null,Cf=null,Yf=null,gh=u.getParameter(35661),Pg=!1,Ei=0;Ei=u.getParameter(7938);
-1!==Ei.indexOf("WebGL")?(Ei=parseFloat(/^WebGL ([0-9])/.exec(Ei)[1]),Pg=1<=Ei):-1!==Ei.indexOf("OpenGL ES")&&(Ei=parseFloat(/^OpenGL ES ([0-9])/.exec(Ei)[1]),Pg=2<=Ei);var sh=null,Xj={},wk=new Qk,Nl=new Qk,Ac={};Ac[3553]=x(3553,3553,1);Ac[34067]=x(34067,34069,6);bb.setClear(0,0,0,1);$a.setClear(1);ub.setClear(0);C(2929);$a.setFunc(3);S(!1);V(1);C(2884);L(0);var Zc=(ua={},ua[100]=32774,ua[101]=32778,ua[102]=32779,ua);t?(Zc[103]=32775,Zc[104]=32776):(z=z.get("EXT_blend_minmax"),null!==z&&(Zc[103]=
z.MIN_EXT,Zc[104]=z.MAX_EXT));var Ee=(Ca={},Ca[200]=0,Ca[201]=1,Ca[202]=768,Ca[204]=770,Ca[210]=776,Ca[208]=774,Ca[206]=772,Ca[203]=769,Ca[205]=771,Ca[209]=775,Ca[207]=773,Ca);return{buffers:{color:bb,depth:$a,stencil:ub},enable:C,disable:G,useProgram:function(id){return Rc!==id?(u.useProgram(id),Rc=id,!0):!1},setBlending:L,setMaterial:function(id,Oe){2===id.side?G(2884):C(2884);var lf=1===id.side;Oe&&(lf=!lf);S(lf);1===id.blending&&!1===id.transparent?L(0):L(id.blending,id.blendEquation,id.blendSrc,
id.blendDst,id.blendEquationAlpha,id.blendSrcAlpha,id.blendDstAlpha,id.premultipliedAlpha);$a.setFunc(id.depthFunc);$a.setTest(id.depthTest);$a.setMask(id.depthWrite);bb.setMask(id.colorWrite);Oe=id.stencilWrite;ub.setTest(Oe);Oe&&(ub.setMask(id.stencilWriteMask),ub.setFunc(id.stencilFunc,id.stencilRef,id.stencilFuncMask),ub.setOp(id.stencilFail,id.stencilZFail,id.stencilZPass));Z(id.polygonOffset,id.polygonOffsetFactor,id.polygonOffsetUnits)},setFlipSided:S,setCullFace:V,setLineWidth:function(id){id!==
hg&&(Pg&&u.lineWidth(id),hg=id)},setPolygonOffset:Z,setScissorTest:function(id){id?C(3089):G(3089)},activeTexture:ja,bindTexture:function(id,Oe){null===sh&&ja();var lf=Xj[sh];void 0===lf&&(lf={type:void 0,texture:void 0},Xj[sh]=lf);if(lf.type!==id||lf.texture!==Oe)u.bindTexture(id,Oe||Ac[id]),lf.type=id,lf.texture=Oe},unbindTexture:function(){var id=Xj[sh];void 0!==id&&void 0!==id.type&&(u.bindTexture(id.type,null),id.type=void 0,id.texture=void 0)},compressedTexImage2D:function(){try{u.compressedTexImage2D.apply(u,
arguments)}catch(id){console.error("THREE.WebGLState:",id)}},texImage2D:function(){try{u.texImage2D.apply(u,arguments)}catch(id){console.error("THREE.WebGLState:",id)}},texImage3D:function(){try{u.texImage3D.apply(u,arguments)}catch(id){console.error("THREE.WebGLState:",id)}},scissor:function(id){!1===wk.equals(id)&&(u.scissor(id.x,id.y,id.z,id.w),wk.copy(id))},viewport:function(id){!1===Nl.equals(id)&&(u.viewport(id.x,id.y,id.z,id.w),Nl.copy(id))},reset:function(){pb={};sh=null;Xj={};gf=Ce=kd=Rc=
null;bb.reset();$a.reset();ub.reset()}}}function kra(u,z,t,x,C,G,L){function S(Ac,Zc){return Pg?new OffscreenCanvas(Ac,Zc):document.createElementNS("http://www.w3.org/1999/xhtml","canvas")}function V(Ac,Zc,Ee,id){var Oe=1;if(Ac.width>id||Ac.height>id)Oe=id/Math.max(Ac.width,Ac.height);if(1>Oe||!0===Zc){if("undefined"!==typeof HTMLImageElement&&Ac instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&Ac instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&Ac instanceof ImageBitmap)return id=
Zc?ai.floorPowerOfTwo:Math.floor,Zc=id(Oe*Ac.width),Oe=id(Oe*Ac.height),void 0===gh&&(gh=S(Zc,Oe)),Ee=Ee?S(Zc,Oe):gh,Ee.width=Zc,Ee.height=Oe,Ee.getContext("2d").drawImage(Ac,0,0,Zc,Oe),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+Ac.width+"x"+Ac.height+") to ("+Zc+"x"+Oe+")."),Ee;"data"in Ac&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+Ac.width+"x"+Ac.height+").")}return Ac}function Z(Ac){return ai.isPowerOfTwo(Ac.width)&&ai.isPowerOfTwo(Ac.height)}
function ja(Ac,Zc){return Ac.generateMipmaps&&Zc&&1003!==Ac.minFilter&&1006!==Ac.minFilter}function ua(Ac,Zc,Ee,id){u.generateMipmap(Ac);x.get(Zc).__maxMipLevel=Math.log(Math.max(Ee,id))*Math.LOG2E}function Ca(Ac,Zc,Ee){if(!1===Ad)return Zc;if(null!==Ac){if(void 0!==u[Ac])return u[Ac];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+Ac+"'")}Ac=Zc;6403===Zc&&(5126===Ee&&(Ac=33326),5131===Ee&&(Ac=33325),5121===Ee&&(Ac=33321));6407===Zc&&(5126===Ee&&(Ac=34837),
5131===Ee&&(Ac=34843),5121===Ee&&(Ac=32849));6408===Zc&&(5126===Ee&&(Ac=34836),5131===Ee&&(Ac=34842),5121===Ee&&(Ac=32856));33325!==Ac&&33326!==Ac&&34842!==Ac&&34836!==Ac||z.get("EXT_color_buffer_float");return Ac}function bb(Ac){return 1003===Ac||1004===Ac||1005===Ac?9728:9729}function $a(Ac){Ac=Ac.target;Ac.removeEventListener("dispose",$a);var Zc=x.get(Ac);void 0!==Zc.__webglInit&&(u.deleteTexture(Zc.__webglTexture),x.remove(Ac));Ac.isVideoTexture&&Yf.delete(Ac);L.memory.textures--}function ub(Ac){Ac=
Ac.target;Ac.removeEventListener("dispose",ub);var Zc=x.get(Ac),Ee=x.get(Ac.texture);if(Ac){void 0!==Ee.__webglTexture&&u.deleteTexture(Ee.__webglTexture);Ac.depthTexture&&Ac.depthTexture.dispose();if(Ac.isWebGLCubeRenderTarget)for(Ee=0;6>Ee;Ee++)u.deleteFramebuffer(Zc.__webglFramebuffer[Ee]),Zc.__webglDepthbuffer&&u.deleteRenderbuffer(Zc.__webglDepthbuffer[Ee]);else u.deleteFramebuffer(Zc.__webglFramebuffer),Zc.__webglDepthbuffer&&u.deleteRenderbuffer(Zc.__webglDepthbuffer),Zc.__webglMultisampledFramebuffer&&
u.deleteFramebuffer(Zc.__webglMultisampledFramebuffer),Zc.__webglColorRenderbuffer&&u.deleteRenderbuffer(Zc.__webglColorRenderbuffer),Zc.__webglDepthRenderbuffer&&u.deleteRenderbuffer(Zc.__webglDepthRenderbuffer);x.remove(Ac.texture);x.remove(Ac)}L.memory.textures--}function pb(Ac,Zc){var Ee=x.get(Ac);if(Ac.isVideoTexture){var id=L.render.frame;Yf.get(Ac)!==id&&(Yf.set(Ac,id),Ac.update())}if(0<Ac.version&&Ee.__version!==Ac.version)if(id=Ac.image,void 0===id)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");
else if(!1===id.complete)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{Ec(Ee,Ac,Zc);return}t.activeTexture(33984+Zc);t.bindTexture(3553,Ee.__webglTexture)}function Rc(Ac,Zc){var Ee=x.get(Ac);if(0<Ac.version&&Ee.__version!==Ac.version){if(6===Ac.image.length){kd(Ee,Ac);t.activeTexture(33984+Zc);t.bindTexture(34067,Ee.__webglTexture);u.pixelStorei(37440,Ac.flipY);var id=Ac&&(Ac.isCompressedTexture||Ac.image[0].isCompressedTexture),Oe=Ac.image[0]&&Ac.image[0].isDataTexture;
Zc=[];for(var lf=0;6>lf;lf++)Zc[lf]=id||Oe?Oe?Ac.image[lf].image:Ac.image[lf]:V(Ac.image[lf],!1,!0,gf);lf=Zc[0];var Ig=Z(lf)||Ad,Rf=G.convert(Ac.format),Rh=G.convert(Ac.type),Mh=Ca(Ac.internalFormat,Rf,Rh);xc(34067,Ac,Ig);if(id){for(Oe=0;6>Oe;Oe++){var hi=Zc[Oe].mipmaps;for(id=0;id<hi.length;id++){var bi=hi[id];1023!==Ac.format&&1022!==Ac.format?null!==Rf?t.compressedTexImage2D(34069+Oe,id,Mh,bi.width,bi.height,0,bi.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):
t.texImage2D(34069+Oe,id,Mh,bi.width,bi.height,0,Rf,Rh,bi.data)}}Ee.__maxMipLevel=hi.length-1}else{hi=Ac.mipmaps;for(id=0;6>id;id++)if(Oe)for(t.texImage2D(34069+id,0,Mh,Zc[id].width,Zc[id].height,0,Rf,Rh,Zc[id].data),bi=0;bi<hi.length;bi++){var vk=hi[bi].image[id].image;t.texImage2D(34069+id,bi+1,Mh,vk.width,vk.height,0,Rf,Rh,vk.data)}else for(t.texImage2D(34069+id,0,Mh,Rf,Rh,Zc[id]),bi=0;bi<hi.length;bi++)t.texImage2D(34069+id,bi+1,Mh,Rf,Rh,hi[bi].image[id]);Ee.__maxMipLevel=hi.length}ja(Ac,Ig)&&
ua(34067,Ac,lf.width,lf.height);Ee.__version=Ac.version;if(Ac.onUpdate)Ac.onUpdate(Ac)}}else t.activeTexture(33984+Zc),t.bindTexture(34067,Ee.__webglTexture)}function xc(Ac,Zc,Ee){Ee?(u.texParameteri(Ac,10242,sh[Zc.wrapS]),u.texParameteri(Ac,10243,sh[Zc.wrapT]),32879!==Ac&&35866!==Ac||u.texParameteri(Ac,32882,sh[Zc.wrapR]),u.texParameteri(Ac,10240,Xj[Zc.magFilter]),u.texParameteri(Ac,10241,Xj[Zc.minFilter])):(u.texParameteri(Ac,10242,33071),u.texParameteri(Ac,10243,33071),32879!==Ac&&35866!==Ac||
u.texParameteri(Ac,32882,33071),1001===Zc.wrapS&&1001===Zc.wrapT||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),u.texParameteri(Ac,10240,bb(Zc.magFilter)),u.texParameteri(Ac,10241,bb(Zc.minFilter)),1003!==Zc.minFilter&&1006!==Zc.minFilter&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter."));!(Ee=z.get("EXT_texture_filter_anisotropic"))||
1015===Zc.type&&null===z.get("OES_texture_float_linear")||1016===Zc.type&&null===(Ad||z.get("OES_texture_half_float_linear"))||!(1<Zc.anisotropy||x.get(Zc).__currentAnisotropy)||(u.texParameterf(Ac,Ee.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(Zc.anisotropy,C.getMaxAnisotropy())),x.get(Zc).__currentAnisotropy=Zc.anisotropy)}function kd(Ac,Zc){void 0===Ac.__webglInit&&(Ac.__webglInit=!0,Zc.addEventListener("dispose",$a),Ac.__webglTexture=u.createTexture(),L.memory.textures++)}function Ec(Ac,Zc,Ee){var id=
3553;Zc.isDataTexture2DArray&&(id=35866);Zc.isDataTexture3D&&(id=32879);kd(Ac,Zc);t.activeTexture(33984+Ee);t.bindTexture(id,Ac.__webglTexture);u.pixelStorei(37440,Zc.flipY);u.pixelStorei(37441,Zc.premultiplyAlpha);u.pixelStorei(3317,Zc.unpackAlignment);Ee=Ad?!1:1001!==Zc.wrapS||1001!==Zc.wrapT||1003!==Zc.minFilter&&1006!==Zc.minFilter;Ee=Ee&&!1===Z(Zc.image);Ee=V(Zc.image,Ee,!1,hg);var Oe=Z(Ee)||Ad,lf=G.convert(Zc.format),Ig=G.convert(Zc.type),Rf=Ca(Zc.internalFormat,lf,Ig);xc(id,Zc,Oe);var Rh=Zc.mipmaps;
if(Zc.isDepthTexture)Rf=6402,Ad?Rf=1015===Zc.type?36012:1014===Zc.type?33190:1020===Zc.type?35056:33189:1015===Zc.type&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),1026===Zc.format&&6402===Rf&&1012!==Zc.type&&1014!==Zc.type&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),Zc.type=1012,Ig=G.convert(Zc.type)),1027===Zc.format&&6402===Rf&&(Rf=34041,1020!==Zc.type&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),
Zc.type=1020,Ig=G.convert(Zc.type))),t.texImage2D(3553,0,Rf,Ee.width,Ee.height,0,lf,Ig,null);else if(Zc.isDataTexture)if(0<Rh.length&&Oe){for(var Mh=0,hi=Rh.length;Mh<hi;Mh++){var bi=Rh[Mh];t.texImage2D(3553,Mh,Rf,bi.width,bi.height,0,lf,Ig,bi.data)}Zc.generateMipmaps=!1;Ac.__maxMipLevel=Rh.length-1}else t.texImage2D(3553,0,Rf,Ee.width,Ee.height,0,lf,Ig,Ee.data),Ac.__maxMipLevel=0;else if(Zc.isCompressedTexture){Mh=0;for(hi=Rh.length;Mh<hi;Mh++)bi=Rh[Mh],1023!==Zc.format&&1022!==Zc.format?null!==
lf?t.compressedTexImage2D(3553,Mh,Rf,bi.width,bi.height,0,bi.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):t.texImage2D(3553,Mh,Rf,bi.width,bi.height,0,lf,Ig,bi.data);Ac.__maxMipLevel=Rh.length-1}else if(Zc.isDataTexture2DArray)t.texImage3D(35866,0,Rf,Ee.width,Ee.height,Ee.depth,0,lf,Ig,Ee.data),Ac.__maxMipLevel=0;else if(Zc.isDataTexture3D)t.texImage3D(32879,0,Rf,Ee.width,Ee.height,Ee.depth,0,lf,Ig,Ee.data),Ac.__maxMipLevel=0;
else if(0<Rh.length&&Oe){Mh=0;for(hi=Rh.length;Mh<hi;Mh++)bi=Rh[Mh],t.texImage2D(3553,Mh,Rf,lf,Ig,bi);Zc.generateMipmaps=!1;Ac.__maxMipLevel=Rh.length-1}else t.texImage2D(3553,0,Rf,lf,Ig,Ee),Ac.__maxMipLevel=0;ja(Zc,Oe)&&ua(id,Zc,Ee.width,Ee.height);Ac.__version=Zc.version;if(Zc.onUpdate)Zc.onUpdate(Zc)}function nd(Ac,Zc,Ee,id){var Oe=G.convert(Zc.texture.format),lf=G.convert(Zc.texture.type),Ig=Ca(Zc.texture.internalFormat,Oe,lf);t.texImage2D(id,0,Ig,Zc.width,Zc.height,0,Oe,lf,null);u.bindFramebuffer(36160,
Ac);u.framebufferTexture2D(36160,Ee,id,x.get(Zc.texture).__webglTexture,0);u.bindFramebuffer(36160,null)}function Nc(Ac,Zc,Ee){u.bindRenderbuffer(36161,Ac);if(Zc.depthBuffer&&!Zc.stencilBuffer){var id=33189;Ee?((Ee=Zc.depthTexture)&&Ee.isDepthTexture&&(1015===Ee.type?id=36012:1014===Ee.type&&(id=33190)),Ee=Cd(Zc),u.renderbufferStorageMultisample(36161,Ee,id,Zc.width,Zc.height)):u.renderbufferStorage(36161,id,Zc.width,Zc.height);u.framebufferRenderbuffer(36160,36096,36161,Ac)}else Zc.depthBuffer&&
Zc.stencilBuffer?(Ee?(Ee=Cd(Zc),u.renderbufferStorageMultisample(36161,Ee,35056,Zc.width,Zc.height)):u.renderbufferStorage(36161,34041,Zc.width,Zc.height),u.framebufferRenderbuffer(36160,33306,36161,Ac)):(Ac=G.convert(Zc.texture.format),id=G.convert(Zc.texture.type),Ac=Ca(Zc.texture.internalFormat,Ac,id),Ee?(Ee=Cd(Zc),u.renderbufferStorageMultisample(36161,Ee,Ac,Zc.width,Zc.height)):u.renderbufferStorage(36161,Ac,Zc.width,Zc.height));u.bindRenderbuffer(36161,null)}function Cd(Ac){return Ad&&Ac.isWebGLMultisampleRenderTarget?
Math.min(Cf,Ac.samples):0}var Xd,yd,Ad=C.isWebGL2,Ce=C.maxTextures,gf=C.maxCubemapSize,hg=C.maxTextureSize,Cf=C.maxSamples,Yf=new WeakMap,gh,Pg=!1;try{Pg="undefined"!==typeof OffscreenCanvas&&null!==(new OffscreenCanvas(1,1)).getContext("2d")}catch(Ac){}var Ei=0,sh=(Xd={},Xd[1E3]=10497,Xd[1001]=33071,Xd[1002]=33648,Xd),Xj=(yd={},yd[1003]=9728,yd[1004]=9984,yd[1005]=9986,yd[1006]=9729,yd[1007]=9985,yd[1008]=9987,yd),wk=!1,Nl=!1;(this||p).allocateTextureUnit=function(){var Ac=Ei;Ac>=Ce&&console.warn("THREE.WebGLTextures: Trying to use "+
Ac+" texture units while this GPU supports only "+Ce);Ei+=1;return Ac};(this||p).resetTextureUnits=function(){Ei=0};(this||p).setTexture2D=pb;(this||p).setTexture2DArray=function(Ac,Zc){var Ee=x.get(Ac);0<Ac.version&&Ee.__version!==Ac.version?Ec(Ee,Ac,Zc):(t.activeTexture(33984+Zc),t.bindTexture(35866,Ee.__webglTexture))};(this||p).setTexture3D=function(Ac,Zc){var Ee=x.get(Ac);0<Ac.version&&Ee.__version!==Ac.version?Ec(Ee,Ac,Zc):(t.activeTexture(33984+Zc),t.bindTexture(32879,Ee.__webglTexture))};
(this||p).setTextureCube=Rc;(this||p).setupRenderTarget=function(Ac){var Zc=x.get(Ac),Ee=x.get(Ac.texture);Ac.addEventListener("dispose",ub);Ee.__webglTexture=u.createTexture();L.memory.textures++;var id=!0===Ac.isWebGLCubeRenderTarget,Oe=!0===Ac.isWebGLMultisampleRenderTarget,lf=Z(Ac)||Ad;!Ad||1022!==Ac.texture.format||1015!==Ac.texture.type&&1016!==Ac.texture.type||(Ac.texture.format=1023,console.warn("THREE.WebGLRenderer: Rendering to textures with RGB format is not supported. Using RGBA format instead."));
if(id)for(Zc.__webglFramebuffer=[],Oe=0;6>Oe;Oe++)Zc.__webglFramebuffer[Oe]=u.createFramebuffer();else if(Zc.__webglFramebuffer=u.createFramebuffer(),Oe)if(Ad){Zc.__webglMultisampledFramebuffer=u.createFramebuffer();Zc.__webglColorRenderbuffer=u.createRenderbuffer();u.bindRenderbuffer(36161,Zc.__webglColorRenderbuffer);Oe=G.convert(Ac.texture.format);var Ig=G.convert(Ac.texture.type);Oe=Ca(Ac.texture.internalFormat,Oe,Ig);Ig=Cd(Ac);u.renderbufferStorageMultisample(36161,Ig,Oe,Ac.width,Ac.height);
u.bindFramebuffer(36160,Zc.__webglMultisampledFramebuffer);u.framebufferRenderbuffer(36160,36064,36161,Zc.__webglColorRenderbuffer);u.bindRenderbuffer(36161,null);Ac.depthBuffer&&(Zc.__webglDepthRenderbuffer=u.createRenderbuffer(),Nc(Zc.__webglDepthRenderbuffer,Ac,!0));u.bindFramebuffer(36160,null)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.");if(id){t.bindTexture(34067,Ee.__webglTexture);xc(34067,Ac.texture,lf);for(Ee=0;6>Ee;Ee++)nd(Zc.__webglFramebuffer[Ee],
Ac,36064,34069+Ee);ja(Ac.texture,lf)&&ua(34067,Ac.texture,Ac.width,Ac.height);t.bindTexture(34067,null)}else t.bindTexture(3553,Ee.__webglTexture),xc(3553,Ac.texture,lf),nd(Zc.__webglFramebuffer,Ac,36064,3553),ja(Ac.texture,lf)&&ua(3553,Ac.texture,Ac.width,Ac.height),t.bindTexture(3553,null);if(Ac.depthBuffer){Zc=x.get(Ac);lf=!0===Ac.isWebGLCubeRenderTarget;if(Ac.depthTexture){if(lf)throw Error("target.depthTexture not supported in Cube render targets");if(Ac&&Ac.isWebGLCubeRenderTarget)throw Error("Depth Texture with cube render targets is not supported");
u.bindFramebuffer(36160,Zc.__webglFramebuffer);if(!Ac.depthTexture||!Ac.depthTexture.isDepthTexture)throw Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");x.get(Ac.depthTexture).__webglTexture&&Ac.depthTexture.image.width===Ac.width&&Ac.depthTexture.image.height===Ac.height||(Ac.depthTexture.image.width=Ac.width,Ac.depthTexture.image.height=Ac.height,Ac.depthTexture.needsUpdate=!0);pb(Ac.depthTexture,0);Zc=x.get(Ac.depthTexture).__webglTexture;if(1026===Ac.depthTexture.format)u.framebufferTexture2D(36160,
36096,3553,Zc,0);else if(1027===Ac.depthTexture.format)u.framebufferTexture2D(36160,33306,3553,Zc,0);else throw Error("Unknown depthTexture format");}else if(lf)for(Zc.__webglDepthbuffer=[],lf=0;6>lf;lf++)u.bindFramebuffer(36160,Zc.__webglFramebuffer[lf]),Zc.__webglDepthbuffer[lf]=u.createRenderbuffer(),Nc(Zc.__webglDepthbuffer[lf],Ac,!1);else u.bindFramebuffer(36160,Zc.__webglFramebuffer),Zc.__webglDepthbuffer=u.createRenderbuffer(),Nc(Zc.__webglDepthbuffer,Ac,!1);u.bindFramebuffer(36160,null)}};
(this||p).updateRenderTargetMipmap=function(Ac){var Zc=Ac.texture,Ee=Z(Ac)||Ad;if(ja(Zc,Ee)){Ee=Ac.isWebGLCubeRenderTarget?34067:3553;var id=x.get(Zc).__webglTexture;t.bindTexture(Ee,id);ua(Ee,Zc,Ac.width,Ac.height);t.bindTexture(Ee,null)}};(this||p).updateMultisampleRenderTarget=function(Ac){if(Ac.isWebGLMultisampleRenderTarget)if(Ad){var Zc=x.get(Ac);u.bindFramebuffer(36008,Zc.__webglMultisampledFramebuffer);u.bindFramebuffer(36009,Zc.__webglFramebuffer);var Ee=Ac.width,id=Ac.height,Oe=16384;Ac.depthBuffer&&
(Oe|=256);Ac.stencilBuffer&&(Oe|=1024);u.blitFramebuffer(0,0,Ee,id,0,0,Ee,id,Oe,9728);u.bindFramebuffer(36160,Zc.__webglMultisampledFramebuffer)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.")};(this||p).safeSetTexture2D=function(Ac,Zc){Ac&&Ac.isWebGLRenderTarget&&(!1===wk&&(console.warn("THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead."),wk=!0),Ac=Ac.texture);pb(Ac,Zc)};(this||p).safeSetTextureCube=
function(Ac,Zc){Ac&&Ac.isWebGLCubeRenderTarget&&(!1===Nl&&(console.warn("THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead."),Nl=!0),Ac=Ac.texture);Rc(Ac,Zc)}}function Z9(u,z,t){var x=t.isWebGL2;return{convert:function(C){if(1009===C)return 5121;if(1017===C)return 32819;if(1018===C)return 32820;if(1019===C)return 33635;if(1010===C)return 5120;if(1011===C)return 5122;if(1012===C)return 5123;if(1013===C)return 5124;if(1014===C)return 5125;
if(1015===C)return 5126;if(1016===C){if(x)return 5131;var G=z.get("OES_texture_half_float");return null!==G?G.HALF_FLOAT_OES:null}if(1021===C)return 6406;if(1022===C)return 6407;if(1023===C)return 6408;if(1024===C)return 6409;if(1025===C)return 6410;if(1026===C)return 6402;if(1027===C)return 34041;if(1028===C)return 6403;if(1029===C)return 36244;if(1030===C)return 33319;if(1031===C)return 33320;if(1032===C)return 36248;if(1033===C)return 36249;if(33776===C||33777===C||33778===C||33779===C)if(G=z.get("WEBGL_compressed_texture_s3tc"),
null!==G){if(33776===C)return G.COMPRESSED_RGB_S3TC_DXT1_EXT;if(33777===C)return G.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(33778===C)return G.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(33779===C)return G.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(35840===C||35841===C||35842===C||35843===C)if(G=z.get("WEBGL_compressed_texture_pvrtc"),null!==G){if(35840===C)return G.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(35841===C)return G.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(35842===C)return G.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(35843===
C)return G.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(36196===C)return G=z.get("WEBGL_compressed_texture_etc1"),null!==G?G.COMPRESSED_RGB_ETC1_WEBGL:null;if(37492===C||37496===C)if(G=z.get("WEBGL_compressed_texture_etc"),null!==G){if(37492===C)return G.COMPRESSED_RGB8_ETC2;if(37496===C)return G.COMPRESSED_RGBA8_ETC2_EAC}if(37808===C||37809===C||37810===C||37811===C||37812===C||37813===C||37814===C||37815===C||37816===C||37817===C||37818===C||37819===C||37820===C||37821===C||37840===C||37841===
C||37842===C||37843===C||37844===C||37845===C||37846===C||37847===C||37848===C||37849===C||37850===C||37851===C||37852===C||37853===C)return G=z.get("WEBGL_compressed_texture_astc"),null!==G?C:null;if(36492===C)return G=z.get("EXT_texture_compression_bptc"),null!==G?C:null;if(1020===C){if(x)return 34042;G=z.get("WEBGL_depth_texture");return null!==G?G.UNSIGNED_INT_24_8_WEBGL:null}}}}function UN(u){kc.call(this||p);(this||p).cameras=u||[]}function ez(){E.call(this||p);(this||p).type="Group"}function YH(){(this||
p)._targetRay=null;(this||p)._grip=null;(this||p)._hand=null}function $9(u,z){function t(yd){var Ad=$a.get(yd.inputSource);Ad&&Ad.dispatchEvent({type:yd.type,data:yd.inputSource})}function x(){$a.forEach(function(yd,Ad){yd.disconnect(Ad)});$a.clear();u.setFramebuffer(null);u.setRenderTarget(u.getRenderTarget());Xd.stop();S.isPresenting=!1;S.dispatchEvent({type:"sessionend"})}function C(yd){ja=yd;Xd.setContext(V);Xd.start();S.isPresenting=!0;S.dispatchEvent({type:"sessionstart"})}function G(yd){for(var Ad=
V.inputSources,Ce=0;Ce<bb.length;Ce++)$a.set(Ad[Ce],bb[Ce]);for(Ad=0;Ad<yd.removed.length;Ad++){Ce=yd.removed[Ad];var gf=$a.get(Ce);gf&&(gf.dispatchEvent({type:"disconnected",data:Ce}),$a.delete(Ce))}for(Ad=0;Ad<yd.added.length;Ad++)Ce=yd.added[Ad],(gf=$a.get(Ce))&&gf.dispatchEvent({type:"connected",data:Ce})}function L(yd,Ad){null===Ad?yd.matrixWorld.copy(yd.matrix):yd.matrixWorld.multiplyMatrices(Ad.matrixWorld,yd.matrix);yd.matrixWorldInverse.getInverse(yd.matrixWorld)}var S=this||p,V=null,Z=1,
ja=null,ua="local-floor",Ca=null,bb=[],$a=new Map,ub=new kc;ub.layers.enable(1);ub.viewport=new Qk;var pb=new kc;pb.layers.enable(2);pb.viewport=new Qk;var Rc=[ub,pb],xc=new UN;xc.layers.enable(1);xc.layers.enable(2);var kd=null,Ec=null;(this||p).enabled=!1;(this||p).isPresenting=!1;(this||p).getController=function(yd){var Ad=bb[yd];void 0===Ad&&(Ad=new YH,bb[yd]=Ad);return Ad.getTargetRaySpace()};(this||p).getControllerGrip=function(yd){var Ad=bb[yd];void 0===Ad&&(Ad=new YH,bb[yd]=Ad);return Ad.getGripSpace()};
(this||p).getHand=function(yd){var Ad=bb[yd];void 0===Ad&&(Ad=new YH,bb[yd]=Ad);return Ad.getHandSpace()};(this||p).setFramebufferScaleFactor=function(yd){Z=yd;!0===S.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")};(this||p).setReferenceSpaceType=function(yd){ua=yd;!0===S.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")};(this||p).getReferenceSpace=function(){return ja};(this||p).getSession=
function(){return V};(this||p).setSession=function(yd){V=yd;null!==V&&(V.addEventListener("select",t),V.addEventListener("selectstart",t),V.addEventListener("selectend",t),V.addEventListener("squeeze",t),V.addEventListener("squeezestart",t),V.addEventListener("squeezeend",t),V.addEventListener("end",x),yd=z.getContextAttributes(),!0!==yd.xrCompatible&&z.makeXRCompatible(),yd=new XRWebGLLayer(V,z,{antialias:yd.antialias,alpha:yd.alpha,depth:yd.depth,stencil:yd.stencil,framebufferScaleFactor:Z}),V.updateRenderState({baseLayer:yd}),
V.requestReferenceSpace(ua).then(C),V.addEventListener("inputsourceschange",G))};var nd=new qc,Nc=new qc;(this||p).getCamera=function(yd){xc.near=pb.near=ub.near=yd.near;xc.far=pb.far=ub.far=yd.far;if(kd!==xc.near||Ec!==xc.far)V.updateRenderState({depthNear:xc.near,depthFar:xc.far}),kd=xc.near,Ec=xc.far;var Ad=yd.parent,Ce=xc.cameras;L(xc,Ad);for(var gf=0;gf<Ce.length;gf++)L(Ce[gf],Ad);yd.matrixWorld.copy(xc.matrixWorld);yd=yd.children;Ad=0;for(gf=yd.length;Ad<gf;Ad++)yd[Ad].updateMatrixWorld(!0);
if(2===Ce.length){nd.setFromMatrixPosition(ub.matrixWorld);Nc.setFromMatrixPosition(pb.matrixWorld);Ce=nd.distanceTo(Nc);var hg=ub.projectionMatrix.elements,Cf=pb.projectionMatrix.elements,Yf=hg[14]/(hg[10]-1);yd=hg[14]/(hg[10]+1);Ad=(hg[9]+1)/hg[5];gf=(hg[9]-1)/hg[5];var gh=(hg[8]-1)/hg[0],Pg=(Cf[8]+1)/Cf[0];Cf=Yf*gh;hg=Yf*Pg;Pg=Ce/(-gh+Pg);gh=Pg*-gh;ub.matrixWorld.decompose(xc.position,xc.quaternion,xc.scale);xc.translateX(gh);xc.translateZ(Pg);xc.matrixWorld.compose(xc.position,xc.quaternion,xc.scale);
xc.matrixWorldInverse.getInverse(xc.matrixWorld);Yf+=Pg;Pg=yd+Pg;xc.projectionMatrix.makePerspective(Cf-gh,hg+(Ce-gh),Ad*yd/Pg*Yf,gf*yd/Pg*Yf,Yf,Pg)}else xc.projectionMatrix.copy(ub.projectionMatrix);return xc};var Cd=null,Xd=new xd;Xd.setAnimationLoop(function(yd,Ad){Ca=Ad.getViewerPose(ja);if(null!==Ca){var Ce=Ca.views,gf=V.renderState.baseLayer;u.setFramebuffer(gf.framebuffer);var hg=!1;Ce.length!==xc.cameras.length&&(xc.cameras.length=0,hg=!0);for(var Cf=0;Cf<Ce.length;Cf++){var Yf=Ce[Cf],gh=
gf.getViewport(Yf),Pg=Rc[Cf];Pg.matrix.fromArray(Yf.transform.matrix);Pg.projectionMatrix.fromArray(Yf.projectionMatrix);Pg.viewport.set(gh.x,gh.y,gh.width,gh.height);0===Cf&&xc.matrix.copy(Pg.matrix);!0===hg&&xc.cameras.push(Pg)}}Ce=V.inputSources;for(gf=0;gf<bb.length;gf++)bb[gf].update(Ce[gf],Ad,ja);Cd&&Cd(yd,Ad)});(this||p).setAnimationLoop=function(yd){Cd=yd};(this||p).dispose=function(){}}function lra(u){function z(x,C){x.opacity.value=C.opacity;C.color&&x.diffuse.value.copy(C.color);C.emissive&&
x.emissive.value.copy(C.emissive).multiplyScalar(C.emissiveIntensity);C.map&&(x.map.value=C.map);C.alphaMap&&(x.alphaMap.value=C.alphaMap);C.specularMap&&(x.specularMap.value=C.specularMap);var G=u.get(C).envMap;G&&(x.envMap.value=G,x.flipEnvMap.value=G.isCubeTexture&&G._needsFlipEnvMap?-1:1,x.reflectivity.value=C.reflectivity,x.refractionRatio.value=C.refractionRatio,G=u.get(G).__maxMipLevel,void 0!==G&&(x.maxMipLevel.value=G));C.lightMap&&(x.lightMap.value=C.lightMap,x.lightMapIntensity.value=C.lightMapIntensity);
C.aoMap&&(x.aoMap.value=C.aoMap,x.aoMapIntensity.value=C.aoMapIntensity);if(C.map)var L=C.map;else C.specularMap?L=C.specularMap:C.displacementMap?L=C.displacementMap:C.normalMap?L=C.normalMap:C.bumpMap?L=C.bumpMap:C.roughnessMap?L=C.roughnessMap:C.metalnessMap?L=C.metalnessMap:C.alphaMap?L=C.alphaMap:C.emissiveMap?L=C.emissiveMap:C.clearcoatMap?L=C.clearcoatMap:C.clearcoatNormalMap?L=C.clearcoatNormalMap:C.clearcoatRoughnessMap&&(L=C.clearcoatRoughnessMap);void 0!==L&&(L.isWebGLRenderTarget&&(L=
L.texture),!0===L.matrixAutoUpdate&&L.updateMatrix(),x.uvTransform.value.copy(L.matrix));if(C.aoMap)var S=C.aoMap;else C.lightMap&&(S=C.lightMap);void 0!==S&&(S.isWebGLRenderTarget&&(S=S.texture),!0===S.matrixAutoUpdate&&S.updateMatrix(),x.uv2Transform.value.copy(S.matrix))}function t(x,C){x.roughness.value=C.roughness;x.metalness.value=C.metalness;C.roughnessMap&&(x.roughnessMap.value=C.roughnessMap);C.metalnessMap&&(x.metalnessMap.value=C.metalnessMap);C.emissiveMap&&(x.emissiveMap.value=C.emissiveMap);
C.bumpMap&&(x.bumpMap.value=C.bumpMap,x.bumpScale.value=C.bumpScale,1===C.side&&(x.bumpScale.value*=-1));C.normalMap&&(x.normalMap.value=C.normalMap,x.normalScale.value.copy(C.normalScale),1===C.side&&x.normalScale.value.negate());C.displacementMap&&(x.displacementMap.value=C.displacementMap,x.displacementScale.value=C.displacementScale,x.displacementBias.value=C.displacementBias);u.get(C).envMap&&(x.envMapIntensity.value=C.envMapIntensity)}return{refreshFogUniforms:function(x,C){x.fogColor.value.copy(C.color);
C.isFog?(x.fogNear.value=C.near,x.fogFar.value=C.far):C.isFogExp2&&(x.fogDensity.value=C.density)},refreshMaterialUniforms:function(x,C,G,L){if(C.isMeshBasicMaterial)z(x,C);else if(C.isMeshLambertMaterial)z(x,C),C.emissiveMap&&(x.emissiveMap.value=C.emissiveMap);else if(C.isMeshToonMaterial)z(x,C),C.gradientMap&&(x.gradientMap.value=C.gradientMap),C.emissiveMap&&(x.emissiveMap.value=C.emissiveMap),C.bumpMap&&(x.bumpMap.value=C.bumpMap,x.bumpScale.value=C.bumpScale,1===C.side&&(x.bumpScale.value*=
-1)),C.normalMap&&(x.normalMap.value=C.normalMap,x.normalScale.value.copy(C.normalScale),1===C.side&&x.normalScale.value.negate()),C.displacementMap&&(x.displacementMap.value=C.displacementMap,x.displacementScale.value=C.displacementScale,x.displacementBias.value=C.displacementBias);else if(C.isMeshPhongMaterial)z(x,C),x.specular.value.copy(C.specular),x.shininess.value=Math.max(C.shininess,1E-4),C.emissiveMap&&(x.emissiveMap.value=C.emissiveMap),C.bumpMap&&(x.bumpMap.value=C.bumpMap,x.bumpScale.value=
C.bumpScale,1===C.side&&(x.bumpScale.value*=-1)),C.normalMap&&(x.normalMap.value=C.normalMap,x.normalScale.value.copy(C.normalScale),1===C.side&&x.normalScale.value.negate()),C.displacementMap&&(x.displacementMap.value=C.displacementMap,x.displacementScale.value=C.displacementScale,x.displacementBias.value=C.displacementBias);else if(C.isMeshStandardMaterial)z(x,C),C.isMeshPhysicalMaterial?(t(x,C),x.reflectivity.value=C.reflectivity,x.clearcoat.value=C.clearcoat,x.clearcoatRoughness.value=C.clearcoatRoughness,
C.sheen&&x.sheen.value.copy(C.sheen),C.clearcoatMap&&(x.clearcoatMap.value=C.clearcoatMap),C.clearcoatRoughnessMap&&(x.clearcoatRoughnessMap.value=C.clearcoatRoughnessMap),C.clearcoatNormalMap&&(x.clearcoatNormalScale.value.copy(C.clearcoatNormalScale),x.clearcoatNormalMap.value=C.clearcoatNormalMap,1===C.side&&x.clearcoatNormalScale.value.negate()),x.transmission.value=C.transmission,C.transmissionMap&&(x.transmissionMap.value=C.transmissionMap)):t(x,C);else if(C.isMeshMatcapMaterial)z(x,C),C.matcap&&
(x.matcap.value=C.matcap),C.bumpMap&&(x.bumpMap.value=C.bumpMap,x.bumpScale.value=C.bumpScale,1===C.side&&(x.bumpScale.value*=-1)),C.normalMap&&(x.normalMap.value=C.normalMap,x.normalScale.value.copy(C.normalScale),1===C.side&&x.normalScale.value.negate()),C.displacementMap&&(x.displacementMap.value=C.displacementMap,x.displacementScale.value=C.displacementScale,x.displacementBias.value=C.displacementBias);else if(C.isMeshDepthMaterial)z(x,C),C.displacementMap&&(x.displacementMap.value=C.displacementMap,
x.displacementScale.value=C.displacementScale,x.displacementBias.value=C.displacementBias);else if(C.isMeshDistanceMaterial)z(x,C),C.displacementMap&&(x.displacementMap.value=C.displacementMap,x.displacementScale.value=C.displacementScale,x.displacementBias.value=C.displacementBias),x.referencePosition.value.copy(C.referencePosition),x.nearDistance.value=C.nearDistance,x.farDistance.value=C.farDistance;else if(C.isMeshNormalMaterial)z(x,C),C.bumpMap&&(x.bumpMap.value=C.bumpMap,x.bumpScale.value=C.bumpScale,
1===C.side&&(x.bumpScale.value*=-1)),C.normalMap&&(x.normalMap.value=C.normalMap,x.normalScale.value.copy(C.normalScale),1===C.side&&x.normalScale.value.negate()),C.displacementMap&&(x.displacementMap.value=C.displacementMap,x.displacementScale.value=C.displacementScale,x.displacementBias.value=C.displacementBias);else if(C.isLineBasicMaterial)x.diffuse.value.copy(C.color),x.opacity.value=C.opacity,C.isLineDashedMaterial&&(x.dashSize.value=C.dashSize,x.totalSize.value=C.dashSize+C.gapSize,x.scale.value=
C.scale);else if(C.isPointsMaterial){x.diffuse.value.copy(C.color);x.opacity.value=C.opacity;x.size.value=C.size*G;x.scale.value=.5*L;C.map&&(x.map.value=C.map);C.alphaMap&&(x.alphaMap.value=C.alphaMap);if(C.map)var S=C.map;else C.alphaMap&&(S=C.alphaMap);void 0!==S&&(!0===S.matrixAutoUpdate&&S.updateMatrix(),x.uvTransform.value.copy(S.matrix))}else if(C.isSpriteMaterial){x.diffuse.value.copy(C.color);x.opacity.value=C.opacity;x.rotation.value=C.rotation;C.map&&(x.map.value=C.map);C.alphaMap&&(x.alphaMap.value=
C.alphaMap);if(C.map)var V=C.map;else C.alphaMap&&(V=C.alphaMap);void 0!==V&&(!0===V.matrixAutoUpdate&&V.updateMatrix(),x.uvTransform.value.copy(V.matrix))}else C.isShadowMaterial?(x.color.value.copy(C.color),x.opacity.value=C.opacity):C.isShaderMaterial&&(C.uniformsNeedUpdate=!1)}}}function ZH(u){function z(pc,xe){for(var Md=0;Md<pc.length;Md++){var Ke=bb.getContext(pc[Md],xe);if(null!==Ke)return Ke}return null}function t(){bg=new Jd(ze);th=new wb(ze,bg,u);!1===th.isWebGL2&&(bg.get("WEBGL_depth_texture"),
bg.get("OES_texture_float"),bg.get("OES_texture_half_float"),bg.get("OES_texture_half_float_linear"),bg.get("OES_standard_derivatives"),bg.get("OES_element_index_uint"),bg.get("OES_vertex_array_object"),bg.get("ANGLE_instanced_arrays"));bg.get("OES_texture_float_linear");ax=new Z9(ze,bg,th);ch=new jra(ze,bg,th);ch.scissor(Xj.copy(lf).multiplyScalar(Zc).floor());ch.viewport(sh.copy(Oe).multiplyScalar(Zc).floor());xj=new Ne(ze);hj=new fe;Ol=new kra(ze,bg,ch,hj,th,ax,xj);Ik=new Ld(yd);Gq=new Td(ze,th);
yr=new Fa(ze,bg,Gq,th);bx=new Uc(ze,Gq,xj,yr);fz=new cj(ze,bx,Gq,xj);a$=new kj(ze);Zt=new cc(hj);EB=new Ob(yd,Ik,bg,th,yr,Zt);$V=new lra(hj);VN=new Te(hj);sE=new ira;gz=new ka(yd,Ik,ch,fz,kd);b$=new Sa(ze,bg,xj,th);c$=new af(ze,bg,xj,th);xj.programs=EB.programs;yd.capabilities=th;yd.extensions=bg;yd.properties=hj;yd.renderLists=VN;yd.state=ch;yd.info=xj}function x(pc){pc.preventDefault();console.log("THREE.WebGLRenderer: Context Lost.");Ad=!0}function C(){console.log("THREE.WebGLRenderer: Context Restored.");
Ad=!1;t()}function G(pc){pc=pc.target;pc.removeEventListener("dispose",G);L(pc);hj.remove(pc)}function L(pc){pc=hj.get(pc).program;void 0!==pc&&EB.releaseProgram(pc)}function S(pc,xe){pc.render(function(Md){yd.renderBufferImmediate(Md,xe)})}function V(pc,xe,Md,Ke){if(!1!==pc.visible){if(pc.layers.test(xe.layers))if(pc.isGroup)Md=pc.renderOrder;else if(pc.isLOD)!0===pc.autoUpdate&&pc.update(xe);else if(pc.isLight)Xd.pushLight(pc),pc.castShadow&&Xd.pushShadow(pc);else if(pc.isSprite){if(!pc.frustumCulled||
Rf.intersectsSprite(pc)){Ke&&bi.setFromMatrixPosition(pc.matrixWorld).applyMatrix4(hi);var Tf=fz.update(pc),Mg=pc.material;Mg.visible&&Cd.push(pc,Tf,Mg,Md,bi.z,null)}}else if(pc.isImmediateRenderObject)Ke&&bi.setFromMatrixPosition(pc.matrixWorld).applyMatrix4(hi),Cd.push(pc,null,pc.material,Md,bi.z,null);else if(pc.isMesh||pc.isLine||pc.isPoints)if(pc.isSkinnedMesh&&pc.skeleton.frame!==xj.render.frame&&(pc.skeleton.update(),pc.skeleton.frame=xj.render.frame),!pc.frustumCulled||Rf.intersectsObject(pc))if(Ke&&
bi.setFromMatrixPosition(pc.matrixWorld).applyMatrix4(hi),Tf=fz.update(pc),Mg=pc.material,Array.isArray(Mg))for(var Wg=Tf.groups,Ej=0,yj=Wg.length;Ej<yj;Ej++){var oo=Wg[Ej],Yj=Mg[oo.materialIndex];Yj&&Yj.visible&&Cd.push(pc,Tf,Yj,Md,bi.z,oo)}else Mg.visible&&Cd.push(pc,Tf,Mg,Md,bi.z,null);pc=pc.children;Tf=0;for(Mg=pc.length;Tf<Mg;Tf++)V(pc[Tf],xe,Md,Ke)}}function Z(pc,xe,Md){for(var Ke=!0===xe.isScene?xe.overrideMaterial:null,Tf=0,Mg=pc.length;Tf<Mg;Tf++){var Wg=pc[Tf],Ej=Wg.object,yj=Wg.geometry,
oo=null===Ke?Wg.material:Ke;Wg=Wg.group;if(Md.isArrayCamera){Ei=Md;for(var Yj=Md.cameras,FB=0,aW=Yj.length;FB<aW;FB++){var WN=Yj[FB];Ej.layers.test(WN.layers)&&(ch.viewport(sh.copy(WN.viewport)),Xd.setupLights(WN),ja(Ej,xe,WN,yj,oo,Wg))}}else Ei=null,ja(Ej,xe,Md,yj,oo,Wg)}}function ja(pc,xe,Md,Ke,Tf,Mg){pc.onBeforeRender(yd,xe,Md,Ke,Tf,Mg);Xd=sE.get(xe,Ei||Md);pc.modelViewMatrix.multiplyMatrices(Md.matrixWorldInverse,pc.matrixWorld);pc.normalMatrix.getNormalMatrix(pc.modelViewMatrix);if(pc.isImmediateRenderObject){var Wg=
Ca(Md,xe,Tf,pc);ch.setMaterial(Tf);yr.reset();S(pc,Wg)}else yd.renderBufferDirect(Md,xe,Ke,Tf,pc,Mg);pc.onAfterRender(yd,xe,Md,Ke,Tf,Mg);Xd=sE.get(xe,Ei||Md)}function ua(pc,xe,Md){!0!==xe.isScene&&(xe=vk);var Ke=hj.get(pc),Tf=Xd.state.lights,Mg=Tf.state.version;Md=EB.getParameters(pc,Tf.state,Xd.state.shadowsArray,xe,Md);var Wg=EB.getProgramCacheKey(Md),Ej=Ke.program,yj=!0;if(void 0===Ej)pc.addEventListener("dispose",G);else if(Ej.cacheKey!==Wg)L(pc);else{if(Ke.lightsStateVersion===Mg&&void 0!==Md.shaderID){xe=
pc.isMeshStandardMaterial?xe.environment:null;Ke.envMap=Ik.get(pc.envMap||xe);return}yj=!1}yj&&(Md.uniforms=EB.getUniforms(pc),pc.onBeforeCompile(Md,yd),Ej=EB.acquireProgram(Md,Wg),Ke.program=Ej,Ke.uniforms=Md.uniforms,Ke.outputEncoding=Md.outputEncoding);Md=Ke.uniforms;if(!pc.isShaderMaterial&&!pc.isRawShaderMaterial||!0===pc.clipping)Ke.numClippingPlanes=Zt.numPlanes,Ke.numIntersection=Zt.numIntersection,Md.clippingPlanes=Zt.uniform;Ke.environment=pc.isMeshStandardMaterial?xe.environment:null;Ke.fog=
xe.fog;Ke.envMap=Ik.get(pc.envMap||Ke.environment);Ke.needsLights=pc.isMeshLambertMaterial||pc.isMeshToonMaterial||pc.isMeshPhongMaterial||pc.isMeshStandardMaterial||pc.isShadowMaterial||pc.isShaderMaterial&&!0===pc.lights;Ke.lightsStateVersion=Mg;Ke.needsLights&&(Md.ambientLightColor.value=Tf.state.ambient,Md.lightProbe.value=Tf.state.probe,Md.directionalLights.value=Tf.state.directional,Md.directionalLightShadows.value=Tf.state.directionalShadow,Md.spotLights.value=Tf.state.spot,Md.spotLightShadows.value=
Tf.state.spotShadow,Md.rectAreaLights.value=Tf.state.rectArea,Md.ltc_1.value=Tf.state.rectAreaLTC1,Md.ltc_2.value=Tf.state.rectAreaLTC2,Md.pointLights.value=Tf.state.point,Md.pointLightShadows.value=Tf.state.pointShadow,Md.hemisphereLights.value=Tf.state.hemi,Md.directionalShadowMap.value=Tf.state.directionalShadowMap,Md.directionalShadowMatrix.value=Tf.state.directionalShadowMatrix,Md.spotShadowMap.value=Tf.state.spotShadowMap,Md.spotShadowMatrix.value=Tf.state.spotShadowMatrix,Md.pointShadowMap.value=
Tf.state.pointShadowMap,Md.pointShadowMatrix.value=Tf.state.pointShadowMatrix);pc=Ke.program.getUniforms();pc=uv.seqWithValue(pc.seq,Md);Ke.uniformsList=pc}function Ca(pc,xe,Md,Ke){!0!==xe.isScene&&(xe=vk);Ol.resetTextureUnits();var Tf=xe.fog,Mg=Md.isMeshStandardMaterial?xe.environment:null,Wg=null===Cf?yd.outputEncoding:Cf.texture.encoding,Ej=Ik.get(Md.envMap||Mg),yj=hj.get(Md),oo=Xd.state.lights;!0!==Rh||!0!==Mh&&pc===Pg||Zt.setState(Md,pc,pc===Pg&&Md.id===gh);Md.version===yj.__version?Md.fog&&
yj.fog!==Tf?ua(Md,xe,Ke):yj.environment!==Mg?ua(Md,xe,Ke):yj.needsLights&&yj.lightsStateVersion!==oo.state.version?ua(Md,xe,Ke):void 0===yj.numClippingPlanes||yj.numClippingPlanes===Zt.numPlanes&&yj.numIntersection===Zt.numIntersection?yj.outputEncoding!==Wg?ua(Md,xe,Ke):yj.envMap!==Ej&&ua(Md,xe,Ke):ua(Md,xe,Ke):(ua(Md,xe,Ke),yj.__version=Md.version);var Yj=!1;oo=Ej=!1;xe=yj.program;Mg=xe.getUniforms();Wg=yj.uniforms;ch.useProgram(xe.program)&&(oo=Ej=Yj=!0);Md.id!==gh&&(gh=Md.id,Ej=!0);if(Yj||Pg!==
pc){Mg.setValue(ze,"projectionMatrix",pc.projectionMatrix);th.logarithmicDepthBuffer&&Mg.setValue(ze,"logDepthBufFC",2/(Math.log(pc.far+1)/Math.LN2));Pg!==pc&&(Pg=pc,oo=Ej=!0);if(Md.isShaderMaterial||Md.isMeshPhongMaterial||Md.isMeshToonMaterial||Md.isMeshStandardMaterial||Md.envMap)Yj=Mg.map.cameraPosition,void 0!==Yj&&Yj.setValue(ze,bi.setFromMatrixPosition(pc.matrixWorld));(Md.isMeshPhongMaterial||Md.isMeshToonMaterial||Md.isMeshLambertMaterial||Md.isMeshBasicMaterial||Md.isMeshStandardMaterial||
Md.isShaderMaterial)&&Mg.setValue(ze,"isOrthographic",!0===pc.isOrthographicCamera);(Md.isMeshPhongMaterial||Md.isMeshToonMaterial||Md.isMeshLambertMaterial||Md.isMeshBasicMaterial||Md.isMeshStandardMaterial||Md.isShaderMaterial||Md.isShadowMaterial||Md.skinning)&&Mg.setValue(ze,"viewMatrix",pc.matrixWorldInverse)}if(Md.skinning&&(Mg.setOptional(ze,Ke,"bindMatrix"),Mg.setOptional(ze,Ke,"bindMatrixInverse"),pc=Ke.skeleton))if(Yj=pc.bones,th.floatVertexTextures){if(void 0===pc.boneTexture){Yj=Math.sqrt(4*
Yj.length);Yj=ai.ceilPowerOfTwo(Yj);Yj=Math.max(Yj,4);var FB=new Float32Array(Yj*Yj*4);FB.set(pc.boneMatrices);var aW=new Pb(FB,Yj,Yj,1023,1015);pc.boneMatrices=FB;pc.boneTexture=aW;pc.boneTextureSize=Yj}Mg.setValue(ze,"boneTexture",pc.boneTexture,Ol);Mg.setValue(ze,"boneTextureSize",pc.boneTextureSize)}else Mg.setOptional(ze,pc,"boneMatrices");if(Ej||yj.receiveShadow!==Ke.receiveShadow)yj.receiveShadow=Ke.receiveShadow,Mg.setValue(ze,"receiveShadow",Ke.receiveShadow);Ej&&(Mg.setValue(ze,"toneMappingExposure",
yd.toneMappingExposure),yj.needsLights&&(pc=oo,Wg.ambientLightColor.needsUpdate=pc,Wg.lightProbe.needsUpdate=pc,Wg.directionalLights.needsUpdate=pc,Wg.directionalLightShadows.needsUpdate=pc,Wg.pointLights.needsUpdate=pc,Wg.pointLightShadows.needsUpdate=pc,Wg.spotLights.needsUpdate=pc,Wg.spotLightShadows.needsUpdate=pc,Wg.rectAreaLights.needsUpdate=pc,Wg.hemisphereLights.needsUpdate=pc),Tf&&Md.fog&&$V.refreshFogUniforms(Wg,Tf),$V.refreshMaterialUniforms(Wg,Md,Zc,Ac),uv.upload(ze,yj.uniformsList,Wg,
Ol));Md.isShaderMaterial&&!0===Md.uniformsNeedUpdate&&(uv.upload(ze,yj.uniformsList,Wg,Ol),Md.uniformsNeedUpdate=!1);Md.isSpriteMaterial&&Mg.setValue(ze,"center",Ke.center);Mg.setValue(ze,"modelViewMatrix",Ke.modelViewMatrix);Mg.setValue(ze,"normalMatrix",Ke.normalMatrix);Mg.setValue(ze,"modelMatrix",Ke.matrixWorld);return xe}u=u||{};var bb=void 0!==u.canvas?u.canvas:document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),$a=void 0!==u.context?u.context:null,ub=void 0!==u.alpha?u.alpha:
!1,pb=void 0!==u.depth?u.depth:!0,Rc=void 0!==u.stencil?u.stencil:!0,xc=void 0!==u.antialias?u.antialias:!1,kd=void 0!==u.premultipliedAlpha?u.premultipliedAlpha:!0,Ec=void 0!==u.preserveDrawingBuffer?u.preserveDrawingBuffer:!1,nd=void 0!==u.powerPreference?u.powerPreference:"default",Nc=void 0!==u.failIfMajorPerformanceCaveat?u.failIfMajorPerformanceCaveat:!1,Cd=null,Xd=null;(this||p).domElement=bb;(this||p).debug={checkShaderErrors:!0};(this||p).autoClear=!0;(this||p).autoClearColor=!0;(this||p).autoClearDepth=
!0;(this||p).autoClearStencil=!0;(this||p).sortObjects=!0;(this||p).clippingPlanes=[];(this||p).localClippingEnabled=!1;(this||p).gammaFactor=2;(this||p).outputEncoding=3E3;(this||p).physicallyCorrectLights=!1;(this||p).toneMapping=0;(this||p).toneMappingExposure=1;(this||p).maxMorphTargets=8;(this||p).maxMorphNormals=4;var yd=this||p,Ad=!1,Ce=null,gf=0,hg=0,Cf=null,Yf=null,gh=-1,Pg=null,Ei=null,sh=new Qk,Xj=new Qk,wk=null,Nl=bb.width,Ac=bb.height,Zc=1,Ee=null,id=null,Oe=new Qk(0,0,Nl,Ac),lf=new Qk(0,
0,Nl,Ac),Ig=!1,Rf=new XH,Rh=!1,Mh=!1,hi=new fj,bi=new qc,vk={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0},ze=$a;try{$a={alpha:ub,depth:pb,stencil:Rc,antialias:xc,premultipliedAlpha:kd,preserveDrawingBuffer:Ec,powerPreference:nd,failIfMajorPerformanceCaveat:Nc};bb.addEventListener("webglcontextlost",x,!1);bb.addEventListener("webglcontextrestored",C,!1);if(null===ze&&(ub=["webgl2","webgl","experimental-webgl"],!0===yd.isWebGL1Renderer&&ub.shift(),ze=z(ub,$a),null===ze)){if(z(ub))throw Error("Error creating WebGL context with your selected attributes.");
throw Error("Error creating WebGL context.");}void 0===ze.getShaderPrecisionFormat&&(ze.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(pc){throw console.error("THREE.WebGLRenderer: "+pc.message),pc;}var bg,th,ch,xj,hj,Ol,Ik,Gq,bx,fz,EB,$V,VN,sE,Zt,gz,a$,b$,c$,ax,yr;t();var hz=new $9(yd,ze);(this||p).xr=hz;var d$=new Y9(yd,fz,th.maxTextureSize);(this||p).shadowMap=d$;(this||p).getContext=function(){return ze};(this||p).getContextAttributes=function(){return ze.getContextAttributes()};
(this||p).forceContextLoss=function(){var pc=bg.get("WEBGL_lose_context");pc&&pc.loseContext()};(this||p).forceContextRestore=function(){var pc=bg.get("WEBGL_lose_context");pc&&pc.restoreContext()};(this||p).getPixelRatio=function(){return Zc};(this||p).setPixelRatio=function(pc){void 0!==pc&&(Zc=pc,this.setSize(Nl,Ac,!1))};(this||p).getSize=function(pc){void 0===pc&&(console.warn("WebGLRenderer: .getsize() now requires a Vector2 as an argument"),pc=new Ve);return pc.set(Nl,Ac)};(this||p).setSize=
function(pc,xe,Md){hz.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(Nl=pc,Ac=xe,bb.width=Math.floor(pc*Zc),bb.height=Math.floor(xe*Zc),!1!==Md&&(bb.style.width=pc+"px",bb.style.height=xe+"px"),this.setViewport(0,0,pc,xe))};(this||p).getDrawingBufferSize=function(pc){void 0===pc&&(console.warn("WebGLRenderer: .getdrawingBufferSize() now requires a Vector2 as an argument"),pc=new Ve);return pc.set(Nl*Zc,Ac*Zc).floor()};(this||p).setDrawingBufferSize=
function(pc,xe,Md){Nl=pc;Ac=xe;Zc=Md;bb.width=Math.floor(pc*Md);bb.height=Math.floor(xe*Md);this.setViewport(0,0,pc,xe)};(this||p).getCurrentViewport=function(pc){void 0===pc&&(console.warn("WebGLRenderer: .getCurrentViewport() now requires a Vector4 as an argument"),pc=new Qk);return pc.copy(sh)};(this||p).getViewport=function(pc){return pc.copy(Oe)};(this||p).setViewport=function(pc,xe,Md,Ke){pc.isVector4?Oe.set(pc.x,pc.y,pc.z,pc.w):Oe.set(pc,xe,Md,Ke);ch.viewport(sh.copy(Oe).multiplyScalar(Zc).floor())};
(this||p).getScissor=function(pc){return pc.copy(lf)};(this||p).setScissor=function(pc,xe,Md,Ke){pc.isVector4?lf.set(pc.x,pc.y,pc.z,pc.w):lf.set(pc,xe,Md,Ke);ch.scissor(Xj.copy(lf).multiplyScalar(Zc).floor())};(this||p).getScissorTest=function(){return Ig};(this||p).setScissorTest=function(pc){ch.setScissorTest(Ig=pc)};(this||p).setOpaqueSort=function(pc){Ee=pc};(this||p).setTransparentSort=function(pc){id=pc};(this||p).getClearColor=function(){return gz.getClearColor()};(this||p).setClearColor=function(){gz.setClearColor.apply(gz,
arguments)};(this||p).getClearAlpha=function(){return gz.getClearAlpha()};(this||p).setClearAlpha=function(){gz.setClearAlpha.apply(gz,arguments)};(this||p).clear=function(pc,xe,Md){var Ke=0;if(void 0===pc||pc)Ke|=16384;if(void 0===xe||xe)Ke|=256;if(void 0===Md||Md)Ke|=1024;ze.clear(Ke)};(this||p).clearColor=function(){this.clear(!0,!1,!1)};(this||p).clearDepth=function(){this.clear(!1,!0,!1)};(this||p).clearStencil=function(){this.clear(!1,!1,!0)};(this||p).dispose=function(){bb.removeEventListener("webglcontextlost",
x,!1);bb.removeEventListener("webglcontextrestored",C,!1);VN.dispose();sE.dispose();hj.dispose();Ik.dispose();fz.dispose();yr.dispose();hz.dispose();$H.stop()};(this||p).renderBufferImmediate=function(pc,xe){yr.initAttributes();var Md=hj.get(pc);pc.hasPositions&&!Md.position&&(Md.position=ze.createBuffer());pc.hasNormals&&!Md.normal&&(Md.normal=ze.createBuffer());pc.hasUvs&&!Md.uv&&(Md.uv=ze.createBuffer());pc.hasColors&&!Md.color&&(Md.color=ze.createBuffer());xe=xe.getAttributes();pc.hasPositions&&
(ze.bindBuffer(34962,Md.position),ze.bufferData(34962,pc.positionArray,35048),yr.enableAttribute(xe.position),ze.vertexAttribPointer(xe.position,3,5126,!1,0,0));pc.hasNormals&&(ze.bindBuffer(34962,Md.normal),ze.bufferData(34962,pc.normalArray,35048),yr.enableAttribute(xe.normal),ze.vertexAttribPointer(xe.normal,3,5126,!1,0,0));pc.hasUvs&&(ze.bindBuffer(34962,Md.uv),ze.bufferData(34962,pc.uvArray,35048),yr.enableAttribute(xe.uv),ze.vertexAttribPointer(xe.uv,2,5126,!1,0,0));pc.hasColors&&(ze.bindBuffer(34962,
Md.color),ze.bufferData(34962,pc.colorArray,35048),yr.enableAttribute(xe.color),ze.vertexAttribPointer(xe.color,3,5126,!1,0,0));yr.disableUnusedAttributes();ze.drawArrays(4,0,pc.count);pc.count=0};(this||p).renderBufferDirect=function(pc,xe,Md,Ke,Tf,Mg){null===xe&&(xe=vk);var Wg=Tf.isMesh&&0>Tf.matrixWorld.determinant();pc=Ca(pc,xe,Ke,Tf);ch.setMaterial(Ke,Wg);Wg=Md.index;xe=Md.attributes.position;if(null===Wg){if(void 0===xe||0===xe.count)return}else if(0===Wg.count)return;var Ej=1;!0===Ke.wireframe&&
(Wg=bx.getWireframeAttribute(Md),Ej=2);(Ke.morphTargets||Ke.morphNormals)&&a$.update(Tf,Md,Ke,pc);yr.setup(Tf,Ke,pc,Md,Wg);pc=b$;if(null!==Wg){var yj=Gq.get(Wg);pc=c$;pc.setIndex(yj)}var oo=Md.drawRange.start*Ej,Yj=null!==Mg?Mg.start*Ej:0;yj=Math.max(oo,Yj);Mg=Math.max(0,Math.min(null!==Wg?Wg.count:xe.count,oo+Md.drawRange.count*Ej,Yj+(null!==Mg?Mg.count*Ej:Infinity))-1-yj+1);0!==Mg&&(Tf.isMesh?!0===Ke.wireframe?(ch.setLineWidth(Ke.wireframeLinewidth*(null===Cf?Zc:1)),pc.setMode(1)):pc.setMode(4):
Tf.isLine?(Ke=Ke.linewidth,void 0===Ke&&(Ke=1),ch.setLineWidth(Ke*(null===Cf?Zc:1)),Tf.isLineSegments?pc.setMode(1):Tf.isLineLoop?pc.setMode(2):pc.setMode(3)):Tf.isPoints?pc.setMode(0):Tf.isSprite&&pc.setMode(4),Tf.isInstancedMesh?pc.renderInstances(yj,Mg,Tf.count):Md.isInstancedBufferGeometry?pc.renderInstances(yj,Mg,Math.min(Md.instanceCount,Md._maxInstanceCount)):pc.render(yj,Mg))};(this||p).compile=function(pc,xe){Xd=sE.get(pc,xe);Xd.init();pc.traverse(function(Ke){Ke.isLight&&(Xd.pushLight(Ke),
Ke.castShadow&&Xd.pushShadow(Ke))});Xd.setupLights(xe);var Md=new WeakMap;pc.traverse(function(Ke){var Tf=Ke.material;if(Tf)if(Array.isArray(Tf))for(var Mg=0;Mg<Tf.length;Mg++){var Wg=Tf[Mg];!1===Md.has(Wg)&&(ua(Wg,pc,Ke),Md.set(Wg))}else!1===Md.has(Tf)&&(ua(Tf,pc,Ke),Md.set(Tf))})};var bW=null,$H=new xd;$H.setAnimationLoop(function(pc){hz.isPresenting||bW&&bW(pc)});"undefined"!==typeof window&&$H.setContext(window);(this||p).setAnimationLoop=function(pc){bW=pc;hz.setAnimationLoop(pc);null===pc?$H.stop():
$H.start()};(this||p).render=function(pc,xe,Md,Ke){if(void 0!==Md){console.warn("THREE.WebGLRenderer.render(): the renderTarget argument has been removed. Use .setRenderTarget() instead.");var Tf=Md}if(void 0!==Ke){console.warn("THREE.WebGLRenderer.render(): the forceClear argument has been removed. Use .clear() instead.");var Mg=Ke}if(void 0!==xe&&!0!==xe.isCamera)console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");else if(!0!==Ad){yr.resetDefaultState();gh=-1;
Pg=null;!0===pc.autoUpdate&&pc.updateMatrixWorld();null===xe.parent&&xe.updateMatrixWorld();!0===hz.enabled&&!0===hz.isPresenting&&(xe=hz.getCamera(xe));if(!0===pc.isScene)pc.onBeforeRender(yd,pc,xe,Tf||Cf);Xd=sE.get(pc,xe);Xd.init();hi.multiplyMatrices(xe.projectionMatrix,xe.matrixWorldInverse);Rf.setFromProjectionMatrix(hi);Mh=(this||p).localClippingEnabled;Rh=Zt.init((this||p).clippingPlanes,Mh,xe);Cd=VN.get(pc,xe);Cd.init();V(pc,xe,0,yd.sortObjects);Cd.finish();!0===yd.sortObjects&&Cd.sort(Ee,
id);!0===Rh&&Zt.beginShadows();d$.render(Xd.state.shadowsArray,pc,xe);Xd.setupLights(xe);!0===Rh&&Zt.endShadows();!0===(this||p).info.autoReset&&(this||p).info.reset();void 0!==Tf&&this.setRenderTarget(Tf);gz.render(Cd,pc,xe,Mg);Md=Cd.opaque;Ke=Cd.transparent;0<Md.length&&Z(Md,pc,xe);0<Ke.length&&Z(Ke,pc,xe);if(!0===pc.isScene)pc.onAfterRender(yd,pc,xe);null!==Cf&&(Ol.updateRenderTargetMipmap(Cf),Ol.updateMultisampleRenderTarget(Cf));ch.buffers.depth.setTest(!0);ch.buffers.depth.setMask(!0);ch.buffers.color.setMask(!0);
ch.setPolygonOffset(!1);Xd=Cd=null}};(this||p).setFramebuffer=function(pc){Ce!==pc&&null===Cf&&ze.bindFramebuffer(36160,pc);Ce=pc};(this||p).getActiveCubeFace=function(){return gf};(this||p).getActiveMipmapLevel=function(){return hg};(this||p).getRenderList=function(){return Cd};(this||p).setRenderList=function(pc){Cd=pc};(this||p).getRenderState=function(){return Xd};(this||p).setRenderState=function(pc){Xd=pc};(this||p).getRenderTarget=function(){return Cf};(this||p).setRenderTarget=function(pc,
xe,Md){void 0===xe&&(xe=0);void 0===Md&&(Md=0);Cf=pc;gf=xe;hg=Md;pc&&void 0===hj.get(pc).__webglFramebuffer&&Ol.setupRenderTarget(pc);var Ke=Ce,Tf=!1;pc?(Ke=hj.get(pc).__webglFramebuffer,pc.isWebGLCubeRenderTarget?(Ke=Ke[xe],Tf=!0):Ke=pc.isWebGLMultisampleRenderTarget?hj.get(pc).__webglMultisampledFramebuffer:Ke,sh.copy(pc.viewport),Xj.copy(pc.scissor),wk=pc.scissorTest):(sh.copy(Oe).multiplyScalar(Zc).floor(),Xj.copy(lf).multiplyScalar(Zc).floor(),wk=Ig);Yf!==Ke&&(ze.bindFramebuffer(36160,Ke),Yf=
Ke);ch.viewport(sh);ch.scissor(Xj);ch.setScissorTest(wk);Tf&&(pc=hj.get(pc.texture),ze.framebufferTexture2D(36160,36064,34069+xe,pc.__webglTexture,Md))};(this||p).readRenderTargetPixels=function(pc,xe,Md,Ke,Tf,Mg,Wg){if(pc&&pc.isWebGLRenderTarget){var Ej=hj.get(pc).__webglFramebuffer;pc.isWebGLCubeRenderTarget&&void 0!==Wg&&(Ej=Ej[Wg]);if(Ej){Wg=!1;Ej!==Yf&&(ze.bindFramebuffer(36160,Ej),Wg=!0);try{var yj=pc.texture,oo=yj.format,Yj=yj.type;1023!==oo&&ax.convert(oo)!==ze.getParameter(35739)?console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format."):
1009===Yj||ax.convert(Yj)===ze.getParameter(35738)||1015===Yj&&(th.isWebGL2||bg.get("OES_texture_float")||bg.get("WEBGL_color_buffer_float"))||1016===Yj&&(th.isWebGL2?bg.get("EXT_color_buffer_float"):bg.get("EXT_color_buffer_half_float"))?36053===ze.checkFramebufferStatus(36160)?0<=xe&&xe<=pc.width-Ke&&0<=Md&&Md<=pc.height-Tf&&ze.readPixels(xe,Md,Ke,Tf,ax.convert(oo),ax.convert(Yj),Mg):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete."):
console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.")}finally{Wg&&ze.bindFramebuffer(36160,Yf)}}}else console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.")};(this||p).copyFramebufferToTexture=function(pc,xe,Md){void 0===Md&&(Md=0);var Ke=Math.pow(2,-Md),Tf=Math.floor(xe.image.width*Ke);Ke=Math.floor(xe.image.height*Ke);var Mg=ax.convert(xe.format);Ol.setTexture2D(xe,0);
ze.copyTexImage2D(3553,Md,Mg,pc.x,pc.y,Tf,Ke,0);ch.unbindTexture()};(this||p).copyTextureToTexture=function(pc,xe,Md,Ke){void 0===Ke&&(Ke=0);var Tf=xe.image.width,Mg=xe.image.height,Wg=ax.convert(Md.format),Ej=ax.convert(Md.type);Ol.setTexture2D(Md,0);ze.pixelStorei(37440,Md.flipY);ze.pixelStorei(37441,Md.premultiplyAlpha);ze.pixelStorei(3317,Md.unpackAlignment);xe.isDataTexture?ze.texSubImage2D(3553,Ke,pc.x,pc.y,Tf,Mg,Wg,Ej,xe.image.data):xe.isCompressedTexture?ze.compressedTexSubImage2D(3553,Ke,
pc.x,pc.y,xe.mipmaps[0].width,xe.mipmaps[0].height,Wg,xe.mipmaps[0].data):ze.texSubImage2D(3553,Ke,pc.x,pc.y,Wg,Ej,xe.image);0===Ke&&Md.generateMipmaps&&ze.generateMipmap(3553);ch.unbindTexture()};(this||p).initTexture=function(pc){Ol.setTexture2D(pc,0);ch.unbindTexture()};"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this||p}))}function cW(u){ZH.call(this||p,u)}function zr(u,z){(this||p).array=u;(this||p).stride=z;(this||p).count=void 0!==
u?u.length/z:0;(this||p).usage=35044;(this||p).updateRange={offset:0,count:-1};(this||p).version=0;(this||p).uuid=ai.generateUUID()}function iz(u,z,t,x){(this||p).name="";(this||p).data=u;(this||p).itemSize=z;(this||p).offset=t;(this||p).normalized=!0===x}function jz(u){M.call(this||p);(this||p).type="SpriteMaterial";(this||p).color=new tg(16777215);(this||p).map=null;(this||p).alphaMap=null;(this||p).rotation=0;(this||p).sizeAttenuation=!0;(this||p).transparent=!0;this.setValues(u)}function aI(u){E.call(this||
p);(this||p).type="Sprite";if(void 0===tE){tE=new oa;var z=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]);z=new zr(z,5);tE.setIndex([0,1,2,0,2,3]);tE.setAttribute("position",new iz(z,3,0,!1));tE.setAttribute("uv",new iz(z,2,3,!1))}(this||p).geometry=tE;(this||p).material=void 0!==u?u:new jz;(this||p).center=new Ve(.5,.5)}function XN(u,z,t,x,C,G){uE.subVectors(u,t).addScalar(.5).multiply(x);void 0!==C?(bI.x=G*uE.x-C*uE.y,bI.y=C*uE.x+G*uE.y):bI.copy(uE);u.copy(z);u.x+=bI.x;
u.y+=bI.y;u.applyMatrix4(e$)}function cI(){E.call(this||p);(this||p)._currentLevel=0;(this||p).type="LOD";Object.defineProperties(this||p,{levels:{enumerable:!0,value:[]}});(this||p).autoUpdate=!0}function YN(u,z){u&&u.isGeometry&&console.error("THREE.SkinnedMesh no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");gb.call(this||p,u,z);(this||p).type="SkinnedMesh";(this||p).bindMode="attached";(this||p).bindMatrix=new fj;(this||p).bindMatrixInverse=new fj}function ZN(u,z){u=u||[];
(this||p).bones=u.slice(0);(this||p).boneMatrices=new Float32Array(16*(this||p).bones.length);(this||p).frame=-1;if(void 0===z)this.calculateInverses();else if((this||p).bones.length===z.length)(this||p).boneInverses=z.slice(0);else for(console.warn("THREE.Skeleton boneInverses is the wrong length."),(this||p).boneInverses=[],u=0,z=(this||p).bones.length;u<z;u++)(this||p).boneInverses.push(new fj)}function dW(){E.call(this||p);(this||p).type="Bone"}function $N(u,z,t){gb.call(this||p,u,z);(this||p).instanceMatrix=
new W(new Float32Array(16*t),16);(this||p).instanceColor=null;(this||p).count=t;(this||p).frustumCulled=!1}function Pl(u){M.call(this||p);(this||p).type="LineBasicMaterial";(this||p).color=new tg(16777215);(this||p).linewidth=1;(this||p).linecap="round";(this||p).linejoin="round";(this||p).morphTargets=!1;this.setValues(u)}function Is(u,z,t){1===t&&console.error("THREE.Line: parameter THREE.LinePieces no longer supported. Use THREE.LineSegments instead.");E.call(this||p);(this||p).type="Line";(this||
p).geometry=void 0!==u?u:new oa;(this||p).material=void 0!==z?z:new Pl;this.updateMorphTargets()}function Up(u,z){Is.call(this||p,u,z);(this||p).type="LineSegments"}function aO(u,z){Is.call(this||p,u,z);(this||p).type="LineLoop"}function $t(u){M.call(this||p);(this||p).type="PointsMaterial";(this||p).color=new tg(16777215);(this||p).map=null;(this||p).alphaMap=null;(this||p).size=1;(this||p).sizeAttenuation=!0;(this||p).morphTargets=!1;this.setValues(u)}function vE(u,z){E.call(this||p);(this||p).type=
"Points";(this||p).geometry=void 0!==u?u:new oa;(this||p).material=void 0!==z?z:new $t;this.updateMorphTargets()}function eW(u,z,t,x,C,G,L){var S=fW.distanceSqToPoint(u);S<t&&(t=new qc,fW.closestPointToPoint(u,t),t.applyMatrix4(x),u=C.ray.origin.distanceTo(t),u<C.near||u>C.far||G.push({distance:u,distanceToRay:Math.sqrt(S),point:t,index:z,face:null,object:L}))}function gW(u,z,t,x,C,G,L,S,V){function Z(){ja.needsUpdate=!0;u.requestVideoFrameCallback(Z)}r.call(this||p,u,z,t,x,C,G,L,S,V);(this||p).format=
void 0!==L?L:1022;(this||p).minFilter=void 0!==G?G:1006;(this||p).magFilter=void 0!==C?C:1006;(this||p).generateMipmaps=!1;var ja=this||p;"requestVideoFrameCallback"in u&&u.requestVideoFrameCallback(Z)}function wE(u,z,t,x,C,G,L,S,V,Z,ja,ua){r.call(this||p,null,G,L,S,V,Z,x,C,ja,ua);(this||p).image={width:z,height:t};(this||p).mipmaps=u;(this||p).flipY=!1;(this||p).generateMipmaps=!1}function dI(u,z,t,x,C,G,L,S,V){r.call(this||p,u,z,t,x,C,G,L,S,V);(this||p).needsUpdate=!0}function eI(u,z,t,x,C,G,L,
S,V,Z){Z=void 0!==Z?Z:1026;if(1026!==Z&&1027!==Z)throw Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===t&&1026===Z&&(t=1012);void 0===t&&1027===Z&&(t=1020);r.call(this||p,null,x,C,G,L,S,Z,t,V);(this||p).image={width:u,height:z};(this||p).magFilter=void 0!==L?L:1003;(this||p).minFilter=void 0!==S?S:1003;(this||p).flipY=!1;(this||p).generateMipmaps=!1}function Rk(){Object.defineProperty(this||p,"id",{value:mra+=2});(this||p).uuid=ai.generateUUID();
(this||p).name="";(this||p).type="Geometry";(this||p).vertices=[];(this||p).colors=[];(this||p).faces=[];(this||p).faceVertexUvs=[[]];(this||p).morphTargets=[];(this||p).morphNormals=[];(this||p).skinWeights=[];(this||p).skinIndices=[];(this||p).lineDistances=[];(this||p).boundingBox=null;(this||p).boundingSphere=null;(this||p).elementsNeedUpdate=!1;(this||p).verticesNeedUpdate=!1;(this||p).uvsNeedUpdate=!1;(this||p).normalsNeedUpdate=!1;(this||p).colorsNeedUpdate=!1;(this||p).lineDistancesNeedUpdate=
!1;(this||p).groupsNeedUpdate=!1}function f$(u,z,t,x,C){for(var G,L=0,S=z,V=t-x;S<t;S+=x)L+=(u[V]-u[S])*(u[S+1]+u[V+1]),V=S;if(C===0<L)for(C=z;C<t;C+=x)G=g$(C,u[C],u[C+1],G);else for(C=t-x;C>=z;C-=x)G=g$(C,u[C],u[C+1],G);G&&bO(G,G.next)&&(fI(G),G=G.next);return G}function kz(u,z){if(!u)return u;z||(z=u);do{var t=!1;if(u.steiner||!bO(u,u.next)&&0!==dm(u.prev,u,u.next))u=u.next;else{fI(u);u=z=u.prev;if(u===u.next)break;t=!0}}while(t||u!==z);return z}function gI(u,z,t,x,C,G,L){if(u){if(!L&&G){var S=
u,V=S;do null===V.z&&(V.z=hW(V.x,V.y,x,C,G)),V.prevZ=V.prev,V=V.nextZ=V.next;while(V!==S);V.prevZ.nextZ=null;V.prevZ=null;S=V;var Z,ja,ua,Ca,bb=1;do{V=S;var $a=S=null;for(ja=0;V;){ja++;var ub=V;for(Z=ua=0;Z<bb&&(ua++,ub=ub.nextZ,ub);Z++);for(Ca=bb;0<ua||0<Ca&&ub;)0!==ua&&(0===Ca||!ub||V.z<=ub.z)?(Z=V,V=V.nextZ,ua--):(Z=ub,ub=ub.nextZ,Ca--),$a?$a.nextZ=Z:S=Z,Z.prevZ=$a,$a=Z;V=ub}$a.nextZ=null;bb*=2}while(1<ja)}for(S=u;u.prev!==u.next;){V=u.prev;ub=u.next;if(G)$a=nra(u,x,C,G);else a:if($a=u,ja=$a.prev,
ua=$a,bb=$a.next,0<=dm(ja,ua,bb))$a=!1;else{for(Z=$a.next.next;Z!==$a.prev;){if(xE(ja.x,ja.y,ua.x,ua.y,bb.x,bb.y,Z.x,Z.y)&&0<=dm(Z.prev,Z,Z.next)){$a=!1;break a}Z=Z.next}$a=!0}if($a)z.push(V.i/t),z.push(u.i/t),z.push(ub.i/t),fI(u),S=u=ub.next;else if(u=ub,u===S){if(!L)gI(kz(u),z,t,x,C,G,1);else if(1===L){u=kz(u);L=z;S=t;V=u;do ub=V.prev,$a=V.next.next,!bO(ub,$a)&&h$(ub,V,V.next,$a)&&hI(ub,$a)&&hI($a,ub)&&(L.push(ub.i/S),L.push(V.i/S),L.push($a.i/S),fI(V),fI(V.next),V=u=$a),V=V.next;while(V!==u);u=
kz(V);gI(u,z,t,x,C,G,2)}else if(2===L)a:{L=u;do{for(S=L.next.next;S!==L.prev;){if(V=L.i!==S.i){V=L;ub=S;if($a=V.next.i!==ub.i&&V.prev.i!==ub.i){b:{$a=V;do{if($a.i!==V.i&&$a.next.i!==V.i&&$a.i!==ub.i&&$a.next.i!==ub.i&&h$($a,$a.next,V,ub)){$a=!0;break b}$a=$a.next}while($a!==V);$a=!1}$a=!$a}if($a){if($a=hI(V,ub)&&hI(ub,V)){$a=V;ja=!1;ua=(V.x+ub.x)/2;bb=(V.y+ub.y)/2;do $a.y>bb!==$a.next.y>bb&&$a.next.y!==$a.y&&ua<($a.next.x-$a.x)*(bb-$a.y)/($a.next.y-$a.y)+$a.x&&(ja=!ja),$a=$a.next;while($a!==V);$a=
ja}$a=$a&&(dm(V.prev,V,ub.prev)||dm(V,ub.prev,ub))||bO(V,ub)&&0<dm(V.prev,V,V.next)&&0<dm(ub.prev,ub,ub.next)}V=$a}if(V){u=i$(L,S);L=kz(L,L.next);u=kz(u,u.next);gI(L,z,t,x,C,G);gI(u,z,t,x,C,G);break a}S=S.next}L=L.next}while(L!==u)}break}}}}function nra(u,z,t,x){var C=u.prev,G=u.next;if(0<=dm(C,u,G))return!1;var L=C.x>u.x?C.x>G.x?C.x:G.x:u.x>G.x?u.x:G.x,S=C.y>u.y?C.y>G.y?C.y:G.y:u.y>G.y?u.y:G.y,V=hW(C.x<u.x?C.x<G.x?C.x:G.x:u.x<G.x?u.x:G.x,C.y<u.y?C.y<G.y?C.y:G.y:u.y<G.y?u.y:G.y,z,t,x);z=hW(L,S,z,
t,x);t=u.prevZ;for(x=u.nextZ;t&&t.z>=V&&x&&x.z<=z;){if(t!==u.prev&&t!==u.next&&xE(C.x,C.y,u.x,u.y,G.x,G.y,t.x,t.y)&&0<=dm(t.prev,t,t.next))return!1;t=t.prevZ;if(x!==u.prev&&x!==u.next&&xE(C.x,C.y,u.x,u.y,G.x,G.y,x.x,x.y)&&0<=dm(x.prev,x,x.next))return!1;x=x.nextZ}for(;t&&t.z>=V;){if(t!==u.prev&&t!==u.next&&xE(C.x,C.y,u.x,u.y,G.x,G.y,t.x,t.y)&&0<=dm(t.prev,t,t.next))return!1;t=t.prevZ}for(;x&&x.z<=z;){if(x!==u.prev&&x!==u.next&&xE(C.x,C.y,u.x,u.y,G.x,G.y,x.x,x.y)&&0<=dm(x.prev,x,x.next))return!1;x=
x.nextZ}return!0}function ora(u,z){return u.x-z.x}function pra(u,z){var t=z,x=u.x,C=u.y,G=-Infinity;do{if(C<=t.y&&C>=t.next.y&&t.next.y!==t.y){var L=t.x+(C-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(L<=x&&L>G){G=L;if(L===x){if(C===t.y)return t;if(C===t.next.y)return t.next}var S=t.x<t.next.x?t:t.next}}t=t.next}while(t!==z);if(!S)return null;if(x===G)return S;z=S;L=S.x;var V=S.y,Z=Infinity;t=S;do{if(x>=t.x&&t.x>=L&&x!==t.x&&xE(C<V?x:G,C,L,V,C<V?G:x,C,t.x,t.y)){var ja=Math.abs(C-t.y)/(x-t.x);var ua;if((ua=
hI(t,u))&&!(ua=ja<Z)&&(ua=ja===Z)&&!(ua=t.x>S.x)&&(ua=t.x===S.x)){ua=S;var Ca=t;ua=0>dm(ua.prev,ua,Ca.prev)&&0>dm(Ca.next,ua,ua.next)}ua&&(S=t,Z=ja)}t=t.next}while(t!==z);return S}function hW(u,z,t,x,C){u=32767*(u-t)*C;z=32767*(z-x)*C;u=(u|u<<8)&16711935;u=(u|u<<4)&252645135;u=(u|u<<2)&858993459;z=(z|z<<8)&16711935;z=(z|z<<4)&252645135;z=(z|z<<2)&858993459;return(u|u<<1)&1431655765|((z|z<<1)&1431655765)<<1}function qra(u){var z=u,t=u;do{if(z.x<t.x||z.x===t.x&&z.y<t.y)t=z;z=z.next}while(z!==u);return t}
function xE(u,z,t,x,C,G,L,S){return 0<=(C-L)*(z-S)-(u-L)*(G-S)&&0<=(u-L)*(x-S)-(t-L)*(z-S)&&0<=(t-L)*(G-S)-(C-L)*(x-S)}function dm(u,z,t){return(z.y-u.y)*(t.x-z.x)-(z.x-u.x)*(t.y-z.y)}function bO(u,z){return u.x===z.x&&u.y===z.y}function h$(u,z,t,x){var C=cO(dm(u,z,t)),G=cO(dm(u,z,x)),L=cO(dm(t,x,u)),S=cO(dm(t,x,z));return C!==G&&L!==S||0===C&&dO(u,t,z)||0===G&&dO(u,x,z)||0===L&&dO(t,u,x)||0===S&&dO(t,z,x)?!0:!1}function dO(u,z,t){return z.x<=Math.max(u.x,t.x)&&z.x>=Math.min(u.x,t.x)&&z.y<=Math.max(u.y,
t.y)&&z.y>=Math.min(u.y,t.y)}function cO(u){return 0<u?1:0>u?-1:0}function hI(u,z){return 0>dm(u.prev,u,u.next)?0<=dm(u,z,u.next)&&0<=dm(u,u.prev,z):0>dm(u,z,u.prev)||0>dm(u,u.next,z)}function i$(u,z){var t=new iW(u.i,u.x,u.y),x=new iW(z.i,z.x,z.y),C=u.next,G=z.prev;u.next=z;z.prev=u;t.next=C;C.prev=t;x.next=t;t.prev=x;G.next=x;x.prev=G;return x}function g$(u,z,t,x){u=new iW(u,z,t);x?(u.next=x.next,u.prev=x,x.next.prev=u,x.next=u):(u.prev=u,u.next=u);return u}function fI(u){u.next.prev=u.prev;u.prev.next=
u.next;u.prevZ&&(u.prevZ.nextZ=u.nextZ);u.nextZ&&(u.nextZ.prevZ=u.prevZ)}function iW(u,z,t){(this||p).i=u;(this||p).x=z;(this||p).y=t;(this||p).prev=null;(this||p).next=null;(this||p).z=null;(this||p).prevZ=null;(this||p).nextZ=null;(this||p).steiner=!1}function j$(u){var z=u.length;2<z&&u[z-1].equals(u[0])&&u.pop()}function k$(u,z){for(var t=0;t<z.length;t++)u.push(z[t].x),u.push(z[t].y)}function yE(u,z,t){oa.call(this||p);(this||p).type="ParametricBufferGeometry";(this||p).parameters={func:u,slices:z,
stacks:t};var x=[],C=[],G=[],L=[],S=new qc,V=new qc,Z=new qc,ja=new qc,ua=new qc;3>u.length&&console.error("THREE.ParametricGeometry: Function must now modify a Vector3 as third parameter.");for(var Ca=z+1,bb=0;bb<=t;bb++)for(var $a=bb/t,ub=0;ub<=z;ub++){var pb=ub/z;u(pb,$a,V);C.push(V.x,V.y,V.z);0<=pb-1E-5?(u(pb-1E-5,$a,Z),ja.subVectors(V,Z)):(u(pb+1E-5,$a,Z),ja.subVectors(Z,V));0<=$a-1E-5?(u(pb,$a-1E-5,Z),ua.subVectors(V,Z)):(u(pb,$a+1E-5,Z),ua.subVectors(Z,V));S.crossVectors(ja,ua).normalize();
G.push(S.x,S.y,S.z);L.push(pb,$a)}for(u=0;u<t;u++)for(S=0;S<z;S++)V=u*Ca+S+1,Z=(u+1)*Ca+S+1,ja=(u+1)*Ca+S,x.push(u*Ca+S,V,ja),x.push(V,Z,ja);this.setIndex(x);this.setAttribute("position",new U(C,3));this.setAttribute("normal",new U(G,3));this.setAttribute("uv",new U(L,2))}function iI(u,z,t){Rk.call(this||p);(this||p).type="ParametricGeometry";(this||p).parameters={func:u,slices:z,stacks:t};this.fromBufferGeometry(new yE(u,z,t));this.mergeVertices()}function GB(u){M.call(this||p);(this||p).type="ShadowMaterial";
(this||p).color=new tg(0);(this||p).transparent=!0;this.setValues(u)}function cx(u){Na.call(this||p,u);(this||p).type="RawShaderMaterial"}function Jv(u){M.call(this||p);(this||p).defines={STANDARD:""};(this||p).type="MeshStandardMaterial";(this||p).color=new tg(16777215);(this||p).roughness=1;(this||p).metalness=0;(this||p).map=null;(this||p).lightMap=null;(this||p).lightMapIntensity=1;(this||p).aoMap=null;(this||p).aoMapIntensity=1;(this||p).emissive=new tg(0);(this||p).emissiveIntensity=1;(this||
p).emissiveMap=null;(this||p).bumpMap=null;(this||p).bumpScale=1;(this||p).normalMap=null;(this||p).normalMapType=0;(this||p).normalScale=new Ve(1,1);(this||p).displacementMap=null;(this||p).displacementScale=1;(this||p).displacementBias=0;(this||p).roughnessMap=null;(this||p).metalnessMap=null;(this||p).alphaMap=null;(this||p).envMap=null;(this||p).envMapIntensity=1;(this||p).refractionRatio=.98;(this||p).wireframe=!1;(this||p).wireframeLinewidth=1;(this||p).wireframeLinecap="round";(this||p).wireframeLinejoin=
"round";(this||p).skinning=!1;(this||p).morphTargets=!1;(this||p).morphNormals=!1;(this||p).vertexTangents=!1;this.setValues(u)}function lz(u){Jv.call(this||p);(this||p).defines={STANDARD:"",PHYSICAL:""};(this||p).type="MeshPhysicalMaterial";(this||p).clearcoat=0;(this||p).clearcoatMap=null;(this||p).clearcoatRoughness=0;(this||p).clearcoatRoughnessMap=null;(this||p).clearcoatNormalScale=new Ve(1,1);(this||p).clearcoatNormalMap=null;(this||p).reflectivity=.5;Object.defineProperty(this||p,"ior",{get:function(){return(1+
.4*(this||p).reflectivity)/(1-.4*(this||p).reflectivity)},set:function(z){(this||p).reflectivity=ai.clamp(2.5*(z-1)/(z+1),0,1)}});(this||p).sheen=null;(this||p).transmission=0;(this||p).transmissionMap=null;this.setValues(u)}function mz(u){M.call(this||p);(this||p).type="MeshPhongMaterial";(this||p).color=new tg(16777215);(this||p).specular=new tg(1118481);(this||p).shininess=30;(this||p).map=null;(this||p).lightMap=null;(this||p).lightMapIntensity=1;(this||p).aoMap=null;(this||p).aoMapIntensity=
1;(this||p).emissive=new tg(0);(this||p).emissiveIntensity=1;(this||p).emissiveMap=null;(this||p).bumpMap=null;(this||p).bumpScale=1;(this||p).normalMap=null;(this||p).normalMapType=0;(this||p).normalScale=new Ve(1,1);(this||p).displacementMap=null;(this||p).displacementScale=1;(this||p).displacementBias=0;(this||p).specularMap=null;(this||p).alphaMap=null;(this||p).envMap=null;(this||p).combine=0;(this||p).reflectivity=1;(this||p).refractionRatio=.98;(this||p).wireframe=!1;(this||p).wireframeLinewidth=
1;(this||p).wireframeLinecap="round";(this||p).wireframeLinejoin="round";(this||p).skinning=!1;(this||p).morphTargets=!1;(this||p).morphNormals=!1;this.setValues(u)}function HB(u){M.call(this||p);(this||p).defines={TOON:""};(this||p).type="MeshToonMaterial";(this||p).color=new tg(16777215);(this||p).map=null;(this||p).gradientMap=null;(this||p).lightMap=null;(this||p).lightMapIntensity=1;(this||p).aoMap=null;(this||p).aoMapIntensity=1;(this||p).emissive=new tg(0);(this||p).emissiveIntensity=1;(this||
p).emissiveMap=null;(this||p).bumpMap=null;(this||p).bumpScale=1;(this||p).normalMap=null;(this||p).normalMapType=0;(this||p).normalScale=new Ve(1,1);(this||p).displacementMap=null;(this||p).displacementScale=1;(this||p).displacementBias=0;(this||p).alphaMap=null;(this||p).wireframe=!1;(this||p).wireframeLinewidth=1;(this||p).wireframeLinecap="round";(this||p).wireframeLinejoin="round";(this||p).skinning=!1;(this||p).morphTargets=!1;(this||p).morphNormals=!1;this.setValues(u)}function IB(u){M.call(this||
p);(this||p).type="MeshNormalMaterial";(this||p).bumpMap=null;(this||p).bumpScale=1;(this||p).normalMap=null;(this||p).normalMapType=0;(this||p).normalScale=new Ve(1,1);(this||p).displacementMap=null;(this||p).displacementScale=1;(this||p).displacementBias=0;(this||p).wireframe=!1;(this||p).wireframeLinewidth=1;(this||p).fog=!1;(this||p).skinning=!1;(this||p).morphTargets=!1;(this||p).morphNormals=!1;this.setValues(u)}function JB(u){M.call(this||p);(this||p).type="MeshLambertMaterial";(this||p).color=
new tg(16777215);(this||p).map=null;(this||p).lightMap=null;(this||p).lightMapIntensity=1;(this||p).aoMap=null;(this||p).aoMapIntensity=1;(this||p).emissive=new tg(0);(this||p).emissiveIntensity=1;(this||p).emissiveMap=null;(this||p).specularMap=null;(this||p).alphaMap=null;(this||p).envMap=null;(this||p).combine=0;(this||p).reflectivity=1;(this||p).refractionRatio=.98;(this||p).wireframe=!1;(this||p).wireframeLinewidth=1;(this||p).wireframeLinecap="round";(this||p).wireframeLinejoin="round";(this||
p).skinning=!1;(this||p).morphTargets=!1;(this||p).morphNormals=!1;this.setValues(u)}function KB(u){M.call(this||p);(this||p).defines={MATCAP:""};(this||p).type="MeshMatcapMaterial";(this||p).color=new tg(16777215);(this||p).matcap=null;(this||p).map=null;(this||p).bumpMap=null;(this||p).bumpScale=1;(this||p).normalMap=null;(this||p).normalMapType=0;(this||p).normalScale=new Ve(1,1);(this||p).displacementMap=null;(this||p).displacementScale=1;(this||p).displacementBias=0;(this||p).alphaMap=null;(this||
p).skinning=!1;(this||p).morphTargets=!1;(this||p).morphNormals=!1;this.setValues(u)}function LB(u){Pl.call(this||p);(this||p).type="LineDashedMaterial";(this||p).scale=1;(this||p).dashSize=3;(this||p).gapSize=1;this.setValues(u)}function Ar(u,z,t,x){(this||p).parameterPositions=u;(this||p)._cachedIndex=0;(this||p).resultBuffer=void 0!==x?x:new z.constructor(t);(this||p).sampleValues=z;(this||p).valueSize=t}function eO(u,z,t,x){Ar.call(this||p,u,z,t,x);(this||p)._weightPrev=-0;(this||p)._offsetPrev=
-0;(this||p)._weightNext=-0;(this||p)._offsetNext=-0}function jI(u,z,t,x){Ar.call(this||p,u,z,t,x)}function fO(u,z,t,x){Ar.call(this||p,u,z,t,x)}function Ko(u,z,t,x){if(void 0===u)throw Error("THREE.KeyframeTrack: track name is undefined");if(void 0===z||0===z.length)throw Error("THREE.KeyframeTrack: no keyframes in track named "+u);(this||p).name=u;(this||p).times=xl.convertArray(z,(this||p).TimeBufferType);(this||p).values=xl.convertArray(t,(this||p).ValueBufferType);this.setInterpolation(x||(this||
p).DefaultInterpolation)}function gO(u,z,t){Ko.call(this||p,u,z,t)}function hO(u,z,t,x){Ko.call(this||p,u,z,t,x)}function zE(u,z,t,x){Ko.call(this||p,u,z,t,x)}function iO(u,z,t,x){Ar.call(this||p,u,z,t,x)}function kI(u,z,t,x){Ko.call(this||p,u,z,t,x)}function jO(u,z,t,x){Ko.call(this||p,u,z,t,x)}function AE(u,z,t,x){Ko.call(this||p,u,z,t,x)}function Js(u,z,t,x){(this||p).name=u;(this||p).tracks=t;(this||p).duration=void 0!==z?z:-1;(this||p).blendMode=void 0!==x?x:2500;(this||p).uuid=ai.generateUUID();
0>(this||p).duration&&this.resetDuration()}function rra(u){switch(u.toLowerCase()){case "scalar":case "double":case "float":case "number":case "integer":return zE;case "vector":case "vector2":case "vector3":case "vector4":return AE;case "color":return hO;case "quaternion":return kI;case "bool":case "boolean":return gO;case "string":return jO}throw Error("THREE.KeyframeTrack: Unsupported typeName: "+u);}function sra(u){if(void 0===u.type)throw Error("THREE.KeyframeTrack: track type undefined, can not parse");
var z=rra(u.type);if(void 0===u.times){var t=[],x=[];xl.flattenJSON(u.keys,t,x,"value");u.times=t;u.values=x}return void 0!==z.parse?z.parse(u):new z(u.name,u.times,u.values,u.interpolation)}function jW(u,z,t){var x=this||p,C=!1,G=0,L=0,S=void 0,V=[];(this||p).onStart=void 0;(this||p).onLoad=u;(this||p).onProgress=z;(this||p).onError=t;(this||p).itemStart=function(Z){L++;if(!1===C&&void 0!==x.onStart)x.onStart(Z,G,L);C=!0};(this||p).itemEnd=function(Z){G++;if(void 0!==x.onProgress)x.onProgress(Z,
G,L);if(G===L&&(C=!1,void 0!==x.onLoad))x.onLoad()};(this||p).itemError=function(Z){if(void 0!==x.onError)x.onError(Z)};(this||p).resolveURL=function(Z){return S?S(Z):Z};(this||p).setURLModifier=function(Z){S=Z;return this||p};(this||p).addHandler=function(Z,ja){V.push(Z,ja);return this||p};(this||p).removeHandler=function(Z){Z=V.indexOf(Z);-1!==Z&&V.splice(Z,2);return this||p};(this||p).getHandler=function(Z){for(var ja=0,ua=V.length;ja<ua;ja+=2){var Ca=V[ja],bb=V[ja+1];Ca.global&&(Ca.lastIndex=
0);if(Ca.test(Z))return bb}return null}}function Jk(u){(this||p).manager=void 0!==u?u:l$;(this||p).crossOrigin="anonymous";(this||p).withCredentials=!1;(this||p).path="";(this||p).resourcePath="";(this||p).requestHeader={}}function Ks(u){Jk.call(this||p,u)}function kW(u){Jk.call(this||p,u)}function lW(u){Jk.call(this||p,u)}function BE(u){Jk.call(this||p,u)}function kO(u){Jk.call(this||p,u)}function lO(u){Jk.call(this||p,u)}function mO(u){Jk.call(this||p,u)}function ah(){(this||p).type="Curve";(this||
p).arcLengthDivisions=200}function Br(u,z,t,x,C,G,L,S){ah.call(this||p);(this||p).type="EllipseCurve";(this||p).aX=u||0;(this||p).aY=z||0;(this||p).xRadius=t||1;(this||p).yRadius=x||1;(this||p).aStartAngle=C||0;(this||p).aEndAngle=G||2*Math.PI;(this||p).aClockwise=L||!1;(this||p).aRotation=S||0}function CE(u,z,t,x,C,G){Br.call(this||p,u,z,t,t,x,C,G);(this||p).type="ArcCurve"}function mW(){var u=0,z=0,t=0,x=0;return{initCatmullRom:function(C,G,L,S,V){C=V*(L-C);S=V*(S-G);u=G;z=C;t=-3*G+3*L-2*C-S;x=
2*G-2*L+C+S},initNonuniformCatmullRom:function(C,G,L,S,V,Z,ja){C=((G-C)/V-(L-C)/(V+Z)+(L-G)/Z)*Z;S=((L-G)/Z-(S-G)/(Z+ja)+(S-L)/ja)*Z;u=G;z=C;t=-3*G+3*L-2*C-S;x=2*G-2*L+C+S},calc:function(C){var G=C*C;return u+z*C+t*G+x*G*C}}}function ip(u,z,t,x){ah.call(this||p);(this||p).type="CatmullRomCurve3";(this||p).points=u||[];(this||p).closed=z||!1;(this||p).curveType=t||"centripetal";(this||p).tension=void 0!==x?x:.5}function m$(u,z,t,x,C){z=.5*(x-z);C=.5*(C-t);var G=u*u;return(2*t-2*x+z+C)*u*G+(-3*t+3*
x-2*z-C)*G+z*u+t}function lI(u,z,t,x){var C=1-u;return C*C*z+2*(1-u)*u*t+u*u*x}function mI(u,z,t,x,C){var G=1-u,L=1-u;return G*G*G*z+3*L*L*u*t+3*(1-u)*u*u*x+u*u*u*C}function au(u,z,t,x){ah.call(this||p);(this||p).type="CubicBezierCurve";(this||p).v0=u||new Ve;(this||p).v1=z||new Ve;(this||p).v2=t||new Ve;(this||p).v3=x||new Ve}function Kv(u,z,t,x){ah.call(this||p);(this||p).type="CubicBezierCurve3";(this||p).v0=u||new qc;(this||p).v1=z||new qc;(this||p).v2=t||new qc;(this||p).v3=x||new qc}function Hq(u,
z){ah.call(this||p);(this||p).type="LineCurve";(this||p).v1=u||new Ve;(this||p).v2=z||new Ve}function bu(u,z){ah.call(this||p);(this||p).type="LineCurve3";(this||p).v1=u||new qc;(this||p).v2=z||new qc}function cu(u,z,t){ah.call(this||p);(this||p).type="QuadraticBezierCurve";(this||p).v0=u||new Ve;(this||p).v1=z||new Ve;(this||p).v2=t||new Ve}function Lv(u,z,t){ah.call(this||p);(this||p).type="QuadraticBezierCurve3";(this||p).v0=u||new qc;(this||p).v1=z||new qc;(this||p).v2=t||new qc}function du(u){ah.call(this||
p);(this||p).type="SplineCurve";(this||p).points=u||[]}function dx(){ah.call(this||p);(this||p).type="CurvePath";(this||p).curves=[];(this||p).autoClose=!1}function eu(u){dx.call(this||p);(this||p).type="Path";(this||p).currentPoint=new Ve;u&&this.setFromPoints(u)}function nz(u){eu.call(this||p,u);(this||p).uuid=ai.generateUUID();(this||p).type="Shape";(this||p).holes=[]}function ll(u,z){E.call(this||p);(this||p).type="Light";(this||p).color=new tg(u);(this||p).intensity=void 0!==z?z:1}function nO(u,
z,t){ll.call(this||p,u,t);(this||p).type="HemisphereLight";(this||p).position.copy(E.DefaultUp);this.updateMatrix();(this||p).groundColor=new tg(z)}function ex(u){(this||p).camera=u;(this||p).bias=0;(this||p).normalBias=0;(this||p).radius=1;(this||p).mapSize=new Ve(512,512);(this||p).map=null;(this||p).mapPass=null;(this||p).matrix=new fj;(this||p).autoUpdate=!0;(this||p).needsUpdate=!1;(this||p)._frustum=new XH;(this||p)._frameExtents=new Ve(1,1);(this||p)._viewportCount=1;(this||p)._viewports=[new Qk(0,
0,1,1)]}function nW(){ex.call(this||p,new kc(50,1,.5,500));(this||p).focus=1}function oO(u,z,t,x,C,G){ll.call(this||p,u,z);(this||p).type="SpotLight";(this||p).position.copy(E.DefaultUp);this.updateMatrix();(this||p).target=new E;Object.defineProperty(this||p,"power",{get:function(){return(this||p).intensity*Math.PI},set:function(L){(this||p).intensity=L/Math.PI}});(this||p).distance=void 0!==t?t:0;(this||p).angle=void 0!==x?x:Math.PI/3;(this||p).penumbra=void 0!==C?C:0;(this||p).decay=void 0!==G?
G:1;(this||p).shadow=new nW}function oW(){ex.call(this||p,new kc(90,1,.5,500));(this||p)._frameExtents=new Ve(4,2);(this||p)._viewportCount=6;(this||p)._viewports=[new Qk(2,1,1,1),new Qk(0,1,1,1),new Qk(3,1,1,1),new Qk(1,1,1,1),new Qk(3,0,1,1),new Qk(1,0,1,1)];(this||p)._cubeDirections=[new qc(1,0,0),new qc(-1,0,0),new qc(0,0,1),new qc(0,0,-1),new qc(0,1,0),new qc(0,-1,0)];(this||p)._cubeUps=[new qc(0,1,0),new qc(0,1,0),new qc(0,1,0),new qc(0,1,0),new qc(0,0,1),new qc(0,0,-1)]}function pO(u,z,t,x){ll.call(this||
p,u,z);(this||p).type="PointLight";Object.defineProperty(this||p,"power",{get:function(){return 4*(this||p).intensity*Math.PI},set:function(C){(this||p).intensity=C/(4*Math.PI)}});(this||p).distance=void 0!==t?t:0;(this||p).decay=void 0!==x?x:1;(this||p).shadow=new oW}function DE(u,z,t,x,C,G){Kb.call(this||p);(this||p).type="OrthographicCamera";(this||p).zoom=1;(this||p).view=null;(this||p).left=void 0!==u?u:-1;(this||p).right=void 0!==z?z:1;(this||p).top=void 0!==t?t:1;(this||p).bottom=void 0!==
x?x:-1;(this||p).near=void 0!==C?C:.1;(this||p).far=void 0!==G?G:2E3;this.updateProjectionMatrix()}function pW(){ex.call(this||p,new DE(-5,5,5,-5,.5,500))}function qO(u,z){ll.call(this||p,u,z);(this||p).type="DirectionalLight";(this||p).position.copy(E.DefaultUp);this.updateMatrix();(this||p).target=new E;(this||p).shadow=new pW}function rO(u,z){ll.call(this||p,u,z);(this||p).type="AmbientLight"}function sO(u,z,t,x){ll.call(this||p,u,z);(this||p).type="RectAreaLight";(this||p).width=void 0!==t?t:
10;(this||p).height=void 0!==x?x:10}function Ls(u,z){ll.call(this||p,void 0,z);(this||p).type="LightProbe";(this||p).sh=void 0!==u?u:new n$}function tO(u){Jk.call(this||p,u);(this||p).textures={}}function nI(){oa.call(this||p);(this||p).type="InstancedBufferGeometry";(this||p).instanceCount=Infinity}function uO(u,z,t,x){"number"===typeof t&&(x=t,t=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument."));W.call(this||p,u,z,t);(this||p).meshPerAttribute=
x||1}function vO(u){Jk.call(this||p,u)}function qW(u){"undefined"===typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported.");"undefined"===typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported.");Jk.call(this||p,u);(this||p).options={premultiplyAlpha:"none"}}function rW(){(this||p).type="ShapePath";(this||p).color=new tg;(this||p).subPaths=[];(this||p).currentPath=null}function sW(u){(this||p).type="Font";(this||p).data=u}function tW(u){Jk.call(this||
p,u)}function wO(u){Jk.call(this||p,u)}function uW(u,z,t){Ls.call(this||p,void 0,t);u=(new tg).set(u);t=(new tg).set(z);z=new qc(u.r,u.g,u.b);u=new qc(t.r,t.g,t.b);t=Math.sqrt(Math.PI);var x=t*Math.sqrt(.75);(this||p).sh.coefficients[0].copy(z).add(u).multiplyScalar(t);(this||p).sh.coefficients[1].copy(z).sub(u).multiplyScalar(x)}function vW(u,z){Ls.call(this||p,void 0,z);u=(new tg).set(u);(this||p).sh.coefficients[0].set(u.r,u.g,u.b).multiplyScalar(2*Math.sqrt(Math.PI))}function o$(){(this||p).type=
"StereoCamera";(this||p).aspect=1;(this||p).eyeSep=.064;(this||p).cameraL=new kc;(this||p).cameraL.layers.enable(1);(this||p).cameraL.matrixAutoUpdate=!1;(this||p).cameraR=new kc;(this||p).cameraR.layers.enable(2);(this||p).cameraR.matrixAutoUpdate=!1;(this||p)._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}function wW(u,z,t){(this||p).binding=u;(this||p).valueSize=t;switch(z){case "quaternion":u=(this||p)._slerp;z=(this||p)._slerpAdditive;var x=(this||p)._setAdditiveIdentityQuaternion;
(this||p).buffer=new Float64Array(6*t);(this||p)._workIndex=5;break;case "string":case "bool":u=(this||p)._select;z=(this||p)._select;x=(this||p)._setAdditiveIdentityOther;(this||p).buffer=Array(5*t);break;default:u=(this||p)._lerp,z=(this||p)._lerpAdditive,x=(this||p)._setAdditiveIdentityNumeric,(this||p).buffer=new Float64Array(5*t)}(this||p)._mixBufferRegion=u;(this||p)._mixBufferRegionAdditive=z;(this||p)._setIdentity=x;(this||p)._origIndex=3;(this||p)._addIndex=4;(this||p).cumulativeWeight=0;
(this||p).cumulativeWeightAdditive=0;(this||p).useCount=0;(this||p).referenceCount=0}function p$(u,z,t){t=t||jp.parseTrackName(z);(this||p)._targetGroup=u;(this||p)._bindings=u.subscribe_(z,t)}function jp(u,z,t){(this||p).path=z;(this||p).parsedPath=t||jp.parseTrackName(z);(this||p).node=jp.findNode(u,(this||p).parsedPath.nodeName)||u;(this||p).rootNode=u}function q$(){(this||p).uuid=ai.generateUUID();(this||p)._objects=Array.prototype.slice.call(arguments);(this||p).nCachedObjects_=0;var u={};(this||
p)._indicesByUUID=u;for(var z=0,t=arguments.length;z!==t;++z)u[arguments[z].uuid]=z;(this||p)._paths=[];(this||p)._parsedPaths=[];(this||p)._bindings=[];(this||p)._bindingsIndicesByPath={};var x=this||p;(this||p).stats={objects:{get total(){return x._objects.length},get inUse(){return(this||p).total-x.nCachedObjects_}},get bindingsPerObject(){return x._bindings.length}}}function xW(u){(this||p)._root=u;this._initMemoryManager();(this||p)._accuIndex=0;(this||p).time=0;(this||p).timeScale=1}function yW(u,
z,t){zr.call(this||p,u,z);(this||p).meshPerAttribute=t||1}function zW(u,z,t,x,C){(this||p).buffer=u;(this||p).type=z;(this||p).itemSize=t;(this||p).elementSize=x;(this||p).count=C;(this||p).version=0}function AW(u,z,t,x){(this||p).ray=new EE(u,z);(this||p).near=t||0;(this||p).far=x||Infinity;(this||p).camera=null;(this||p).layers=new UV;(this||p).params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}};Object.defineProperties((this||p).params,{PointCloud:{get:function(){console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points.");
return(this||p).Points}}})}function r$(u,z){return u.distance-z.distance}function BW(u,z,t,x){u.layers.test(z.layers)&&u.raycast(z,t);if(!0===x){u=u.children;x=0;for(var C=u.length;x<C;x++)BW(u[x],z,t,!0)}}function oI(u){E.call(this||p);(this||p).material=u;(this||p).render=function(){};(this||p).hasPositions=!1;(this||p).hasNormals=!1;(this||p).hasColors=!1;(this||p).hasUvs=!1;(this||p).positionArray=null;(this||p).normalArray=null;(this||p).colorArray=null;(this||p).uvArray=null;(this||p).count=
0}function s$(u){var z=[];u&&u.isBone&&z.push(u);for(var t=0;t<u.children.length;t++)z.push.apply(z,s$(u.children[t]));return z}function Jm(u,z,t,x,C,G,L){xO.set(C,G,L).unproject(x);u=z[u];if(void 0!==u)for(t=t.getAttribute("position"),z=0,x=u.length;z<x;z++)t.setXYZ(u[z],xO.x,xO.y,xO.z)}function t$(u){u=new v(3*Mv,3*Mv,u);u.texture.mapping=306;u.texture.name="PMREM.cubeUv";u.scissorTest=!0;return u}function yO(u,z,t,x,C){u.viewport.set(z,t,x,C);u.scissor.set(z,t,x,C)}function u$(){var u=new Ve(1,
1);return new cx({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null},texelSize:{value:u},inputEncoding:{value:Nv[3E3]},outputEncoding:{value:Nv[3E3]}},vertexShader:CW(),fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform vec2 texelSize;\n\n\t\t\t"+DW()+"\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tvec2 f = fract( uv / texelSize - 0.5 );\n\t\t\t\tuv -= f * texelSize;\n\t\t\t\tvec3 tl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.x += texelSize.x;\n\t\t\t\tvec3 tr = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.y += texelSize.y;\n\t\t\t\tvec3 br = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.x -= texelSize.x;\n\t\t\t\tvec3 bl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\n\t\t\t\tvec3 tm = mix( tl, tr, f.x );\n\t\t\t\tvec3 bm = mix( bl, br, f.x );\n\t\t\t\tgl_FragColor.rgb = mix( tm, bm, f.y );\n\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t",
blending:0,depthTest:!1,depthWrite:!1})}function v$(){return new cx({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},inputEncoding:{value:Nv[3E3]},outputEncoding:{value:Nv[3E3]}},vertexShader:CW(),fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\t"+DW()+"\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb = envMapTexelToLinear( textureCube( envMap, vec3( - vOutputDirection.x, vOutputDirection.yz ) ) ).rgb;\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t",
blending:0,depthTest:!1,depthWrite:!1})}function CW(){return"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute vec3 position;\n\t\tattribute vec2 uv;\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t"}
function DW(){return"\n\n\t\tuniform int inputEncoding;\n\t\tuniform int outputEncoding;\n\n\t\t#include <encodings_pars_fragment>\n\n\t\tvec4 inputTexelToLinear( vec4 value ) {\n\n\t\t\tif ( inputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( inputEncoding == 1 ) {\n\n\t\t\t\treturn sRGBToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 2 ) {\n\n\t\t\t\treturn RGBEToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 3 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 7.0 );\n\n\t\t\t} else if ( inputEncoding == 4 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 16.0 );\n\n\t\t\t} else if ( inputEncoding == 5 ) {\n\n\t\t\t\treturn RGBDToLinear( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn GammaToLinear( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 linearToOutputTexel( vec4 value ) {\n\n\t\t\tif ( outputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( outputEncoding == 1 ) {\n\n\t\t\t\treturn LinearTosRGB( value );\n\n\t\t\t} else if ( outputEncoding == 2 ) {\n\n\t\t\t\treturn LinearToRGBE( value );\n\n\t\t\t} else if ( outputEncoding == 3 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 7.0 );\n\n\t\t\t} else if ( outputEncoding == 4 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 16.0 );\n\n\t\t\t} else if ( outputEncoding == 5 ) {\n\n\t\t\t\treturn LinearToRGBD( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn LinearToGamma( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 envMapTexelToLinear( vec4 color ) {\n\n\t\t\treturn inputTexelToLinear( color );\n\n\t\t}\n\t"}
function w$(u){console.warn("THREE.ClosedSplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead.");ip.call(this||p,u);(this||p).type="catmullrom";(this||p).closed=!0}function x$(u){console.warn("THREE.SplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead.");ip.call(this||p,u);(this||p).type="catmullrom"}function EW(u){console.warn("THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead.");ip.call(this||p,u);(this||p).type="catmullrom"}void 0===Number.EPSILON&&
(Number.EPSILON=Math.pow(2,-52));void 0===Number.isInteger&&(Number.isInteger=function(u){return"number"===typeof u&&isFinite(u)&&Math.floor(u)===u});void 0===Math.sign&&(Math.sign=function(u){return 0>u?-1:0<u?1:+u});!1==="name"in Function.prototype&&Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*([^\(\s]*)/)[1]}});void 0===Object.assign&&(Object.assign=function(u){if(void 0===u||null===u)throw new TypeError("Cannot convert undefined or null to object");
for(var z=Object(u),t=1;t<arguments.length;t++){var x=arguments[t];if(void 0!==x&&null!==x)for(var C in x)Object.prototype.hasOwnProperty.call(x,C)&&(z[C]=x[C])}return z});Object.assign(e.prototype,{addEventListener:function(u,z){void 0===(this||p)._listeners&&((this||p)._listeners={});var t=(this||p)._listeners;void 0===t[u]&&(t[u]=[]);-1===t[u].indexOf(z)&&t[u].push(z)},hasEventListener:function(u,z){if(void 0===(this||p)._listeners)return!1;var t=(this||p)._listeners;return void 0!==t[u]&&-1!==
t[u].indexOf(z)},removeEventListener:function(u,z){void 0!==(this||p)._listeners&&(u=(this||p)._listeners[u],void 0!==u&&(z=u.indexOf(z),-1!==z&&u.splice(z,1)))},dispatchEvent:function(u){if(void 0!==(this||p)._listeners){var z=(this||p)._listeners[u.type];if(void 0!==z){u.target=this||p;z=z.slice(0);for(var t=0,x=z.length;t<x;t++)z[t].call(this||p,u)}}}});for(var Lo=[],pI=0;256>pI;pI++)Lo[pI]=(16>pI?"0":"")+pI.toString(16);var zO=1234567,ai={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){var u=
4294967295*Math.random()|0,z=4294967295*Math.random()|0,t=4294967295*Math.random()|0,x=4294967295*Math.random()|0;return(Lo[u&255]+Lo[u>>8&255]+Lo[u>>16&255]+Lo[u>>24&255]+"-"+Lo[z&255]+Lo[z>>8&255]+"-"+Lo[z>>16&15|64]+Lo[z>>24&255]+"-"+Lo[t&63|128]+Lo[t>>8&255]+"-"+Lo[t>>16&255]+Lo[t>>24&255]+Lo[x&255]+Lo[x>>8&255]+Lo[x>>16&255]+Lo[x>>24&255]).toUpperCase()},clamp:function(u,z,t){return Math.max(z,Math.min(t,u))},euclideanModulo:function(u,z){return(u%z+z)%z},mapLinear:function(u,z,t,x,C){return x+
(u-z)*(C-x)/(t-z)},lerp:function(u,z,t){return(1-t)*u+t*z},smoothstep:function(u,z,t){if(u<=z)return 0;if(u>=t)return 1;u=(u-z)/(t-z);return u*u*(3-2*u)},smootherstep:function(u,z,t){if(u<=z)return 0;if(u>=t)return 1;u=(u-z)/(t-z);return u*u*u*(u*(6*u-15)+10)},randInt:function(u,z){return u+Math.floor(Math.random()*(z-u+1))},randFloat:function(u,z){return u+Math.random()*(z-u)},randFloatSpread:function(u){return u*(.5-Math.random())},seededRandom:function(u){void 0!==u&&(zO=u%2147483647);zO=16807*
zO%2147483647;return(zO-1)/2147483646},degToRad:function(u){return u*ai.DEG2RAD},radToDeg:function(u){return u*ai.RAD2DEG},isPowerOfTwo:function(u){return 0===(u&u-1)&&0!==u},ceilPowerOfTwo:function(u){return Math.pow(2,Math.ceil(Math.log(u)/Math.LN2))},floorPowerOfTwo:function(u){return Math.pow(2,Math.floor(Math.log(u)/Math.LN2))},setQuaternionFromProperEuler:function(u,z,t,x,C){var G=Math.cos,L=Math.sin,S=G(t/2);t=L(t/2);var V=G((z+x)/2),Z=L((z+x)/2),ja=G((z-x)/2),ua=L((z-x)/2);G=G((x-z)/2);z=
L((x-z)/2);switch(C){case "XYX":u.set(S*Z,t*ja,t*ua,S*V);break;case "YZY":u.set(t*ua,S*Z,t*ja,S*V);break;case "ZXZ":u.set(t*ja,t*ua,S*Z,S*V);break;case "XZX":u.set(S*Z,t*z,t*G,S*V);break;case "YXY":u.set(t*G,S*Z,t*z,S*V);break;case "ZYZ":u.set(t*z,t*G,S*Z,S*V);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+C)}}},Ve=function(){function u(t,x){void 0===t&&(t=0);void 0===x&&(x=0);Object.defineProperty(this||p,"isVector2",{value:!0});(this||
p).x=t;(this||p).y=x}var z=u.prototype;z.set=function(t,x){(this||p).x=t;(this||p).y=x;return this||p};z.setScalar=function(t){(this||p).x=t;(this||p).y=t;return this||p};z.setX=function(t){(this||p).x=t;return this||p};z.setY=function(t){(this||p).y=t;return this||p};z.setComponent=function(t,x){switch(t){case 0:(this||p).x=x;break;case 1:(this||p).y=x;break;default:throw Error("index is out of range: "+t);}return this||p};z.getComponent=function(t){switch(t){case 0:return(this||p).x;case 1:return(this||
p).y;default:throw Error("index is out of range: "+t);}};z.clone=function(){return new (this||p).constructor((this||p).x,(this||p).y)};z.copy=function(t){(this||p).x=t.x;(this||p).y=t.y;return this||p};z.add=function(t,x){if(void 0!==x)return console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,x);(this||p).x+=t.x;(this||p).y+=t.y;return this||p};z.addScalar=function(t){(this||p).x+=t;(this||p).y+=t;return this||p};z.addVectors=function(t,
x){(this||p).x=t.x+x.x;(this||p).y=t.y+x.y;return this||p};z.addScaledVector=function(t,x){(this||p).x+=t.x*x;(this||p).y+=t.y*x;return this||p};z.sub=function(t,x){if(void 0!==x)return console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,x);(this||p).x-=t.x;(this||p).y-=t.y;return this||p};z.subScalar=function(t){(this||p).x-=t;(this||p).y-=t;return this||p};z.subVectors=function(t,x){(this||p).x=t.x-x.x;(this||p).y=t.y-x.y;return this||
p};z.multiply=function(t){(this||p).x*=t.x;(this||p).y*=t.y;return this||p};z.multiplyScalar=function(t){(this||p).x*=t;(this||p).y*=t;return this||p};z.divide=function(t){(this||p).x/=t.x;(this||p).y/=t.y;return this||p};z.divideScalar=function(t){return this.multiplyScalar(1/t)};z.applyMatrix3=function(t){var x=(this||p).x,C=(this||p).y;t=t.elements;(this||p).x=t[0]*x+t[3]*C+t[6];(this||p).y=t[1]*x+t[4]*C+t[7];return this||p};z.min=function(t){(this||p).x=Math.min((this||p).x,t.x);(this||p).y=Math.min((this||
p).y,t.y);return this||p};z.max=function(t){(this||p).x=Math.max((this||p).x,t.x);(this||p).y=Math.max((this||p).y,t.y);return this||p};z.clamp=function(t,x){(this||p).x=Math.max(t.x,Math.min(x.x,(this||p).x));(this||p).y=Math.max(t.y,Math.min(x.y,(this||p).y));return this||p};z.clampScalar=function(t,x){(this||p).x=Math.max(t,Math.min(x,(this||p).x));(this||p).y=Math.max(t,Math.min(x,(this||p).y));return this||p};z.clampLength=function(t,x){var C=this.length();return this.divideScalar(C||1).multiplyScalar(Math.max(t,
Math.min(x,C)))};z.floor=function(){(this||p).x=Math.floor((this||p).x);(this||p).y=Math.floor((this||p).y);return this||p};z.ceil=function(){(this||p).x=Math.ceil((this||p).x);(this||p).y=Math.ceil((this||p).y);return this||p};z.round=function(){(this||p).x=Math.round((this||p).x);(this||p).y=Math.round((this||p).y);return this||p};z.roundToZero=function(){(this||p).x=0>(this||p).x?Math.ceil((this||p).x):Math.floor((this||p).x);(this||p).y=0>(this||p).y?Math.ceil((this||p).y):Math.floor((this||p).y);
return this||p};z.negate=function(){(this||p).x=-(this||p).x;(this||p).y=-(this||p).y;return this||p};z.dot=function(t){return(this||p).x*t.x+(this||p).y*t.y};z.cross=function(t){return(this||p).x*t.y-(this||p).y*t.x};z.lengthSq=function(){return(this||p).x*(this||p).x+(this||p).y*(this||p).y};z.length=function(){return Math.sqrt((this||p).x*(this||p).x+(this||p).y*(this||p).y)};z.manhattanLength=function(){return Math.abs((this||p).x)+Math.abs((this||p).y)};z.normalize=function(){return this.divideScalar(this.length()||
1)};z.angle=function(){return Math.atan2(-(this||p).y,-(this||p).x)+Math.PI};z.distanceTo=function(t){return Math.sqrt(this.distanceToSquared(t))};z.distanceToSquared=function(t){var x=(this||p).x-t.x;t=(this||p).y-t.y;return x*x+t*t};z.manhattanDistanceTo=function(t){return Math.abs((this||p).x-t.x)+Math.abs((this||p).y-t.y)};z.setLength=function(t){return this.normalize().multiplyScalar(t)};z.lerp=function(t,x){(this||p).x+=(t.x-(this||p).x)*x;(this||p).y+=(t.y-(this||p).y)*x;return this||p};z.lerpVectors=
function(t,x,C){(this||p).x=t.x+(x.x-t.x)*C;(this||p).y=t.y+(x.y-t.y)*C;return this||p};z.equals=function(t){return t.x===(this||p).x&&t.y===(this||p).y};z.fromArray=function(t,x){void 0===x&&(x=0);(this||p).x=t[x];(this||p).y=t[x+1];return this||p};z.toArray=function(t,x){void 0===t&&(t=[]);void 0===x&&(x=0);t[x]=(this||p).x;t[x+1]=(this||p).y;return t};z.fromBufferAttribute=function(t,x,C){void 0!==C&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute().");(this||p).x=
t.getX(x);(this||p).y=t.getY(x);return this||p};z.rotateAround=function(t,x){var C=Math.cos(x);x=Math.sin(x);var G=(this||p).x-t.x,L=(this||p).y-t.y;(this||p).x=G*C-L*x+t.x;(this||p).y=G*x+L*C+t.y;return this||p};z.random=function(){(this||p).x=Math.random();(this||p).y=Math.random();return this||p};a(u,[{key:"width",get:function(){return(this||p).x},set:function(t){(this||p).x=t}},{key:"height",get:function(){return(this||p).y},set:function(t){(this||p).y=t}}]);return u}(),Tp=function(){function u(){Object.defineProperty(this||
p,"isMatrix3",{value:!0});(this||p).elements=[1,0,0,0,1,0,0,0,1];0<arguments.length&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}var z=u.prototype;z.set=function(t,x,C,G,L,S,V,Z,ja){var ua=(this||p).elements;ua[0]=t;ua[1]=G;ua[2]=V;ua[3]=x;ua[4]=L;ua[5]=Z;ua[6]=C;ua[7]=S;ua[8]=ja;return this||p};z.identity=function(){this.set(1,0,0,0,1,0,0,0,1);return this||p};z.clone=function(){return(new (this||p).constructor).fromArray((this||p).elements)};z.copy=
function(t){var x=(this||p).elements;t=t.elements;x[0]=t[0];x[1]=t[1];x[2]=t[2];x[3]=t[3];x[4]=t[4];x[5]=t[5];x[6]=t[6];x[7]=t[7];x[8]=t[8];return this||p};z.extractBasis=function(t,x,C){t.setFromMatrix3Column(this||p,0);x.setFromMatrix3Column(this||p,1);C.setFromMatrix3Column(this||p,2);return this||p};z.setFromMatrix4=function(t){t=t.elements;this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]);return this||p};z.multiply=function(t){return this.multiplyMatrices(this||p,t)};z.premultiply=function(t){return this.multiplyMatrices(t,
this||p)};z.multiplyMatrices=function(t,x){var C=t.elements,G=x.elements;x=(this||p).elements;t=C[0];var L=C[3],S=C[6],V=C[1],Z=C[4],ja=C[7],ua=C[2],Ca=C[5];C=C[8];var bb=G[0],$a=G[3],ub=G[6],pb=G[1],Rc=G[4],xc=G[7],kd=G[2],Ec=G[5];G=G[8];x[0]=t*bb+L*pb+S*kd;x[3]=t*$a+L*Rc+S*Ec;x[6]=t*ub+L*xc+S*G;x[1]=V*bb+Z*pb+ja*kd;x[4]=V*$a+Z*Rc+ja*Ec;x[7]=V*ub+Z*xc+ja*G;x[2]=ua*bb+Ca*pb+C*kd;x[5]=ua*$a+Ca*Rc+C*Ec;x[8]=ua*ub+Ca*xc+C*G;return this||p};z.multiplyScalar=function(t){var x=(this||p).elements;x[0]*=
t;x[3]*=t;x[6]*=t;x[1]*=t;x[4]*=t;x[7]*=t;x[2]*=t;x[5]*=t;x[8]*=t;return this||p};z.determinant=function(){var t=(this||p).elements,x=t[0],C=t[1],G=t[2],L=t[3],S=t[4],V=t[5],Z=t[6],ja=t[7];t=t[8];return x*S*t-x*V*ja-C*L*t+C*V*Z+G*L*ja-G*S*Z};z.getInverse=function(t,x){void 0!==x&&console.warn("THREE.Matrix3: .getInverse() can no longer be configured to throw on degenerate.");var C=t.elements;t=(this||p).elements;x=C[0];var G=C[1],L=C[2],S=C[3],V=C[4],Z=C[5],ja=C[6],ua=C[7];C=C[8];var Ca=C*V-Z*ua,
bb=Z*ja-C*S,$a=ua*S-V*ja,ub=x*Ca+G*bb+L*$a;if(0===ub)return this.set(0,0,0,0,0,0,0,0,0);ub=1/ub;t[0]=Ca*ub;t[1]=(L*ua-C*G)*ub;t[2]=(Z*G-L*V)*ub;t[3]=bb*ub;t[4]=(C*x-L*ja)*ub;t[5]=(L*S-Z*x)*ub;t[6]=$a*ub;t[7]=(G*ja-ua*x)*ub;t[8]=(V*x-G*S)*ub;return this||p};z.transpose=function(){var t=(this||p).elements;var x=t[1];t[1]=t[3];t[3]=x;x=t[2];t[2]=t[6];t[6]=x;x=t[5];t[5]=t[7];t[7]=x;return this||p};z.getNormalMatrix=function(t){return this.setFromMatrix4(t).getInverse(this||p).transpose()};z.transposeIntoArray=
function(t){var x=(this||p).elements;t[0]=x[0];t[1]=x[3];t[2]=x[6];t[3]=x[1];t[4]=x[4];t[5]=x[7];t[6]=x[2];t[7]=x[5];t[8]=x[8];return this||p};z.setUvTransform=function(t,x,C,G,L,S,V){var Z=Math.cos(L);L=Math.sin(L);this.set(C*Z,C*L,-C*(Z*S+L*V)+S+t,-G*L,G*Z,-G*(-L*S+Z*V)+V+x,0,0,1)};z.scale=function(t,x){var C=(this||p).elements;C[0]*=t;C[3]*=t;C[6]*=t;C[1]*=x;C[4]*=x;C[7]*=x;return this||p};z.rotate=function(t){var x=Math.cos(t);t=Math.sin(t);var C=(this||p).elements,G=C[0],L=C[3],S=C[6],V=C[1],
Z=C[4],ja=C[7];C[0]=x*G+t*V;C[3]=x*L+t*Z;C[6]=x*S+t*ja;C[1]=-t*G+x*V;C[4]=-t*L+x*Z;C[7]=-t*S+x*ja;return this||p};z.translate=function(t,x){var C=(this||p).elements;C[0]+=t*C[2];C[3]+=t*C[5];C[6]+=t*C[8];C[1]+=x*C[2];C[4]+=x*C[5];C[7]+=x*C[8];return this||p};z.equals=function(t){var x=(this||p).elements;t=t.elements;for(var C=0;9>C;C++)if(x[C]!==t[C])return!1;return!0};z.fromArray=function(t,x){void 0===x&&(x=0);for(var C=0;9>C;C++)(this||p).elements[C]=t[C+x];return this||p};z.toArray=function(t,
x){void 0===t&&(t=[]);void 0===x&&(x=0);var C=(this||p).elements;t[x]=C[0];t[x+1]=C[1];t[x+2]=C[2];t[x+3]=C[3];t[x+4]=C[4];t[x+5]=C[5];t[x+6]=C[6];t[x+7]=C[7];t[x+8]=C[8];return t};return u}(),FE,oz={getDataURL:function(u){if(/^data:/i.test(u.src)||"undefined"==typeof HTMLCanvasElement)return u.src;if(!(u instanceof HTMLCanvasElement)){void 0===FE&&(FE=document.createElementNS("http://www.w3.org/1999/xhtml","canvas"));FE.width=u.width;FE.height=u.height;var z=FE.getContext("2d");u instanceof ImageData?
z.putImageData(u,0,0):z.drawImage(u,0,0,u.width,u.height);u=FE}return 2048<u.width||2048<u.height?u.toDataURL("image/jpeg",.6):u.toDataURL("image/png")}},ara=0;r.DEFAULT_IMAGE=void 0;r.DEFAULT_MAPPING=300;r.prototype=Object.assign(Object.create(e.prototype),{constructor:r,isTexture:!0,updateMatrix:function(){(this||p).matrix.setUvTransform((this||p).offset.x,(this||p).offset.y,(this||p).repeat.x,(this||p).repeat.y,(this||p).rotation,(this||p).center.x,(this||p).center.y)},clone:function(){return(new (this||
p).constructor).copy(this||p)},copy:function(u){(this||p).name=u.name;(this||p).image=u.image;(this||p).mipmaps=u.mipmaps.slice(0);(this||p).mapping=u.mapping;(this||p).wrapS=u.wrapS;(this||p).wrapT=u.wrapT;(this||p).magFilter=u.magFilter;(this||p).minFilter=u.minFilter;(this||p).anisotropy=u.anisotropy;(this||p).format=u.format;(this||p).internalFormat=u.internalFormat;(this||p).type=u.type;(this||p).offset.copy(u.offset);(this||p).repeat.copy(u.repeat);(this||p).center.copy(u.center);(this||p).rotation=
u.rotation;(this||p).matrixAutoUpdate=u.matrixAutoUpdate;(this||p).matrix.copy(u.matrix);(this||p).generateMipmaps=u.generateMipmaps;(this||p).premultiplyAlpha=u.premultiplyAlpha;(this||p).flipY=u.flipY;(this||p).unpackAlignment=u.unpackAlignment;(this||p).encoding=u.encoding;return this||p},toJSON:function(u){var z=void 0===u||"string"===typeof u;if(!z&&void 0!==u.textures[(this||p).uuid])return u.textures[(this||p).uuid];var t={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:(this||
p).uuid,name:(this||p).name,mapping:(this||p).mapping,repeat:[(this||p).repeat.x,(this||p).repeat.y],offset:[(this||p).offset.x,(this||p).offset.y],center:[(this||p).center.x,(this||p).center.y],rotation:(this||p).rotation,wrap:[(this||p).wrapS,(this||p).wrapT],format:(this||p).format,type:(this||p).type,encoding:(this||p).encoding,minFilter:(this||p).minFilter,magFilter:(this||p).magFilter,anisotropy:(this||p).anisotropy,flipY:(this||p).flipY,premultiplyAlpha:(this||p).premultiplyAlpha,unpackAlignment:(this||
p).unpackAlignment};if(void 0!==(this||p).image){var x=(this||p).image;void 0===x.uuid&&(x.uuid=ai.generateUUID());if(!z&&void 0===u.images[x.uuid]){if(Array.isArray(x)){var C=[];for(var G=0,L=x.length;G<L;G++)C.push(oz.getDataURL(x[G]))}else C=oz.getDataURL(x);u.images[x.uuid]={uuid:x.uuid,url:C}}t.image=x.uuid}z||(u.textures[(this||p).uuid]=t);return t},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(u){if(300!==(this||p).mapping)return u;u.applyMatrix3((this||p).matrix);
if(0>u.x||1<u.x)switch((this||p).wrapS){case 1E3:u.x-=Math.floor(u.x);break;case 1001:u.x=0>u.x?0:1;break;case 1002:u.x=1===Math.abs(Math.floor(u.x)%2)?Math.ceil(u.x)-u.x:u.x-Math.floor(u.x)}if(0>u.y||1<u.y)switch((this||p).wrapT){case 1E3:u.y-=Math.floor(u.y);break;case 1001:u.y=0>u.y?0:1;break;case 1002:u.y=1===Math.abs(Math.floor(u.y)%2)?Math.ceil(u.y)-u.y:u.y-Math.floor(u.y)}(this||p).flipY&&(u.y=1-u.y);return u}});Object.defineProperty(r.prototype,"needsUpdate",{set:function(u){!0===u&&(this||
p).version++}});var Qk=function(){function u(t,x,C,G){void 0===t&&(t=0);void 0===x&&(x=0);void 0===C&&(C=0);void 0===G&&(G=1);Object.defineProperty(this||p,"isVector4",{value:!0});(this||p).x=t;(this||p).y=x;(this||p).z=C;(this||p).w=G}var z=u.prototype;z.set=function(t,x,C,G){(this||p).x=t;(this||p).y=x;(this||p).z=C;(this||p).w=G;return this||p};z.setScalar=function(t){(this||p).x=t;(this||p).y=t;(this||p).z=t;(this||p).w=t;return this||p};z.setX=function(t){(this||p).x=t;return this||p};z.setY=
function(t){(this||p).y=t;return this||p};z.setZ=function(t){(this||p).z=t;return this||p};z.setW=function(t){(this||p).w=t;return this||p};z.setComponent=function(t,x){switch(t){case 0:(this||p).x=x;break;case 1:(this||p).y=x;break;case 2:(this||p).z=x;break;case 3:(this||p).w=x;break;default:throw Error("index is out of range: "+t);}return this||p};z.getComponent=function(t){switch(t){case 0:return(this||p).x;case 1:return(this||p).y;case 2:return(this||p).z;case 3:return(this||p).w;default:throw Error("index is out of range: "+
t);}};z.clone=function(){return new (this||p).constructor((this||p).x,(this||p).y,(this||p).z,(this||p).w)};z.copy=function(t){(this||p).x=t.x;(this||p).y=t.y;(this||p).z=t.z;(this||p).w=void 0!==t.w?t.w:1;return this||p};z.add=function(t,x){if(void 0!==x)return console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,x);(this||p).x+=t.x;(this||p).y+=t.y;(this||p).z+=t.z;(this||p).w+=t.w;return this||p};z.addScalar=function(t){(this||
p).x+=t;(this||p).y+=t;(this||p).z+=t;(this||p).w+=t;return this||p};z.addVectors=function(t,x){(this||p).x=t.x+x.x;(this||p).y=t.y+x.y;(this||p).z=t.z+x.z;(this||p).w=t.w+x.w;return this||p};z.addScaledVector=function(t,x){(this||p).x+=t.x*x;(this||p).y+=t.y*x;(this||p).z+=t.z*x;(this||p).w+=t.w*x;return this||p};z.sub=function(t,x){if(void 0!==x)return console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,x);(this||p).x-=t.x;(this||
p).y-=t.y;(this||p).z-=t.z;(this||p).w-=t.w;return this||p};z.subScalar=function(t){(this||p).x-=t;(this||p).y-=t;(this||p).z-=t;(this||p).w-=t;return this||p};z.subVectors=function(t,x){(this||p).x=t.x-x.x;(this||p).y=t.y-x.y;(this||p).z=t.z-x.z;(this||p).w=t.w-x.w;return this||p};z.multiplyScalar=function(t){(this||p).x*=t;(this||p).y*=t;(this||p).z*=t;(this||p).w*=t;return this||p};z.applyMatrix4=function(t){var x=(this||p).x,C=(this||p).y,G=(this||p).z,L=(this||p).w;t=t.elements;(this||p).x=t[0]*
x+t[4]*C+t[8]*G+t[12]*L;(this||p).y=t[1]*x+t[5]*C+t[9]*G+t[13]*L;(this||p).z=t[2]*x+t[6]*C+t[10]*G+t[14]*L;(this||p).w=t[3]*x+t[7]*C+t[11]*G+t[15]*L;return this||p};z.divideScalar=function(t){return this.multiplyScalar(1/t)};z.setAxisAngleFromQuaternion=function(t){(this||p).w=2*Math.acos(t.w);var x=Math.sqrt(1-t.w*t.w);1E-4>x?((this||p).x=1,(this||p).y=0,(this||p).z=0):((this||p).x=t.x/x,(this||p).y=t.y/x,(this||p).z=t.z/x);return this||p};z.setAxisAngleFromRotationMatrix=function(t){t=t.elements;
var x=t[0];var C=t[4];var G=t[8],L=t[1],S=t[5],V=t[9];var Z=t[2];var ja=t[6];var ua=t[10];if(.01>Math.abs(C-L)&&.01>Math.abs(G-Z)&&.01>Math.abs(V-ja)){if(.1>Math.abs(C+L)&&.1>Math.abs(G+Z)&&.1>Math.abs(V+ja)&&.1>Math.abs(x+S+ua-3))return this.set(1,0,0,0),this||p;t=Math.PI;x=(x+1)/2;S=(S+1)/2;ua=(ua+1)/2;C=(C+L)/4;G=(G+Z)/4;V=(V+ja)/4;x>S&&x>ua?.01>x?(ja=0,C=Z=.707106781):(ja=Math.sqrt(x),Z=C/ja,C=G/ja):S>ua?.01>S?(ja=.707106781,Z=0,C=.707106781):(Z=Math.sqrt(S),ja=C/Z,C=V/Z):.01>ua?(Z=ja=.707106781,
C=0):(C=Math.sqrt(ua),ja=G/C,Z=V/C);this.set(ja,Z,C,t);return this||p}t=Math.sqrt((ja-V)*(ja-V)+(G-Z)*(G-Z)+(L-C)*(L-C));.001>Math.abs(t)&&(t=1);(this||p).x=(ja-V)/t;(this||p).y=(G-Z)/t;(this||p).z=(L-C)/t;(this||p).w=Math.acos((x+S+ua-1)/2);return this||p};z.min=function(t){(this||p).x=Math.min((this||p).x,t.x);(this||p).y=Math.min((this||p).y,t.y);(this||p).z=Math.min((this||p).z,t.z);(this||p).w=Math.min((this||p).w,t.w);return this||p};z.max=function(t){(this||p).x=Math.max((this||p).x,t.x);(this||
p).y=Math.max((this||p).y,t.y);(this||p).z=Math.max((this||p).z,t.z);(this||p).w=Math.max((this||p).w,t.w);return this||p};z.clamp=function(t,x){(this||p).x=Math.max(t.x,Math.min(x.x,(this||p).x));(this||p).y=Math.max(t.y,Math.min(x.y,(this||p).y));(this||p).z=Math.max(t.z,Math.min(x.z,(this||p).z));(this||p).w=Math.max(t.w,Math.min(x.w,(this||p).w));return this||p};z.clampScalar=function(t,x){(this||p).x=Math.max(t,Math.min(x,(this||p).x));(this||p).y=Math.max(t,Math.min(x,(this||p).y));(this||p).z=
Math.max(t,Math.min(x,(this||p).z));(this||p).w=Math.max(t,Math.min(x,(this||p).w));return this||p};z.clampLength=function(t,x){var C=this.length();return this.divideScalar(C||1).multiplyScalar(Math.max(t,Math.min(x,C)))};z.floor=function(){(this||p).x=Math.floor((this||p).x);(this||p).y=Math.floor((this||p).y);(this||p).z=Math.floor((this||p).z);(this||p).w=Math.floor((this||p).w);return this||p};z.ceil=function(){(this||p).x=Math.ceil((this||p).x);(this||p).y=Math.ceil((this||p).y);(this||p).z=
Math.ceil((this||p).z);(this||p).w=Math.ceil((this||p).w);return this||p};z.round=function(){(this||p).x=Math.round((this||p).x);(this||p).y=Math.round((this||p).y);(this||p).z=Math.round((this||p).z);(this||p).w=Math.round((this||p).w);return this||p};z.roundToZero=function(){(this||p).x=0>(this||p).x?Math.ceil((this||p).x):Math.floor((this||p).x);(this||p).y=0>(this||p).y?Math.ceil((this||p).y):Math.floor((this||p).y);(this||p).z=0>(this||p).z?Math.ceil((this||p).z):Math.floor((this||p).z);(this||
p).w=0>(this||p).w?Math.ceil((this||p).w):Math.floor((this||p).w);return this||p};z.negate=function(){(this||p).x=-(this||p).x;(this||p).y=-(this||p).y;(this||p).z=-(this||p).z;(this||p).w=-(this||p).w;return this||p};z.dot=function(t){return(this||p).x*t.x+(this||p).y*t.y+(this||p).z*t.z+(this||p).w*t.w};z.lengthSq=function(){return(this||p).x*(this||p).x+(this||p).y*(this||p).y+(this||p).z*(this||p).z+(this||p).w*(this||p).w};z.length=function(){return Math.sqrt((this||p).x*(this||p).x+(this||p).y*
(this||p).y+(this||p).z*(this||p).z+(this||p).w*(this||p).w)};z.manhattanLength=function(){return Math.abs((this||p).x)+Math.abs((this||p).y)+Math.abs((this||p).z)+Math.abs((this||p).w)};z.normalize=function(){return this.divideScalar(this.length()||1)};z.setLength=function(t){return this.normalize().multiplyScalar(t)};z.lerp=function(t,x){(this||p).x+=(t.x-(this||p).x)*x;(this||p).y+=(t.y-(this||p).y)*x;(this||p).z+=(t.z-(this||p).z)*x;(this||p).w+=(t.w-(this||p).w)*x;return this||p};z.lerpVectors=
function(t,x,C){(this||p).x=t.x+(x.x-t.x)*C;(this||p).y=t.y+(x.y-t.y)*C;(this||p).z=t.z+(x.z-t.z)*C;(this||p).w=t.w+(x.w-t.w)*C;return this||p};z.equals=function(t){return t.x===(this||p).x&&t.y===(this||p).y&&t.z===(this||p).z&&t.w===(this||p).w};z.fromArray=function(t,x){void 0===x&&(x=0);(this||p).x=t[x];(this||p).y=t[x+1];(this||p).z=t[x+2];(this||p).w=t[x+3];return this||p};z.toArray=function(t,x){void 0===t&&(t=[]);void 0===x&&(x=0);t[x]=(this||p).x;t[x+1]=(this||p).y;t[x+2]=(this||p).z;t[x+
3]=(this||p).w;return t};z.fromBufferAttribute=function(t,x,C){void 0!==C&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute().");(this||p).x=t.getX(x);(this||p).y=t.getY(x);(this||p).z=t.getZ(x);(this||p).w=t.getW(x);return this||p};z.random=function(){(this||p).x=Math.random();(this||p).y=Math.random();(this||p).z=Math.random();(this||p).w=Math.random();return this||p};a(u,[{key:"width",get:function(){return(this||p).z},set:function(t){(this||p).z=t}},{key:"height",
get:function(){return(this||p).w},set:function(t){(this||p).w=t}}]);return u}();v.prototype=Object.assign(Object.create(e.prototype),{constructor:v,isWebGLRenderTarget:!0,setSize:function(u,z){if((this||p).width!==u||(this||p).height!==z)(this||p).width=u,(this||p).height=z,(this||p).texture.image.width=u,(this||p).texture.image.height=z,this.dispose();(this||p).viewport.set(0,0,u,z);(this||p).scissor.set(0,0,u,z)},clone:function(){return(new (this||p).constructor).copy(this||p)},copy:function(u){(this||
p).width=u.width;(this||p).height=u.height;(this||p).viewport.copy(u.viewport);(this||p).texture=u.texture.clone();(this||p).depthBuffer=u.depthBuffer;(this||p).stencilBuffer=u.stencilBuffer;(this||p).depthTexture=u.depthTexture;return this||p},dispose:function(){this.dispatchEvent({type:"dispose"})}});y.prototype=Object.assign(Object.create(v.prototype),{constructor:y,isWebGLMultisampleRenderTarget:!0,copy:function(u){v.prototype.copy.call(this||p,u);(this||p).samples=u.samples;return this||p}});
var hp=function(){function u(t,x,C,G){void 0===t&&(t=0);void 0===x&&(x=0);void 0===C&&(C=0);void 0===G&&(G=1);Object.defineProperty(this||p,"isQuaternion",{value:!0});(this||p)._x=t;(this||p)._y=x;(this||p)._z=C;(this||p)._w=G}u.slerp=function(t,x,C,G){return C.copy(t).slerp(x,G)};u.slerpFlat=function(t,x,C,G,L,S,V){var Z=C[G+0],ja=C[G+1],ua=C[G+2];C=C[G+3];G=L[S+0];var Ca=L[S+1],bb=L[S+2];L=L[S+3];if(C!==L||Z!==G||ja!==Ca||ua!==bb){S=1-V;var $a=Z*G+ja*Ca+ua*bb+C*L,ub=0<=$a?1:-1,pb=1-$a*$a;pb>Number.EPSILON&&
(pb=Math.sqrt(pb),$a=Math.atan2(pb,$a*ub),S=Math.sin(S*$a)/pb,V=Math.sin(V*$a)/pb);ub*=V;Z=Z*S+G*ub;ja=ja*S+Ca*ub;ua=ua*S+bb*ub;C=C*S+L*ub;S===1-V&&(V=1/Math.sqrt(Z*Z+ja*ja+ua*ua+C*C),Z*=V,ja*=V,ua*=V,C*=V)}t[x]=Z;t[x+1]=ja;t[x+2]=ua;t[x+3]=C};u.multiplyQuaternionsFlat=function(t,x,C,G,L,S){var V=C[G],Z=C[G+1],ja=C[G+2];C=C[G+3];G=L[S];var ua=L[S+1],Ca=L[S+2];L=L[S+3];t[x]=V*L+C*G+Z*Ca-ja*ua;t[x+1]=Z*L+C*ua+ja*G-V*Ca;t[x+2]=ja*L+C*Ca+V*ua-Z*G;t[x+3]=C*L-V*G-Z*ua-ja*Ca;return t};var z=u.prototype;
z.set=function(t,x,C,G){(this||p)._x=t;(this||p)._y=x;(this||p)._z=C;(this||p)._w=G;this._onChangeCallback();return this||p};z.clone=function(){return new (this||p).constructor((this||p)._x,(this||p)._y,(this||p)._z,(this||p)._w)};z.copy=function(t){(this||p)._x=t.x;(this||p)._y=t.y;(this||p)._z=t.z;(this||p)._w=t.w;this._onChangeCallback();return this||p};z.setFromEuler=function(t,x){if(!t||!t.isEuler)throw Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");
var C=t._x,G=t._y,L=t._z;t=t._order;var S=Math.cos,V=Math.sin,Z=S(C/2),ja=S(G/2);S=S(L/2);C=V(C/2);G=V(G/2);L=V(L/2);switch(t){case "XYZ":(this||p)._x=C*ja*S+Z*G*L;(this||p)._y=Z*G*S-C*ja*L;(this||p)._z=Z*ja*L+C*G*S;(this||p)._w=Z*ja*S-C*G*L;break;case "YXZ":(this||p)._x=C*ja*S+Z*G*L;(this||p)._y=Z*G*S-C*ja*L;(this||p)._z=Z*ja*L-C*G*S;(this||p)._w=Z*ja*S+C*G*L;break;case "ZXY":(this||p)._x=C*ja*S-Z*G*L;(this||p)._y=Z*G*S+C*ja*L;(this||p)._z=Z*ja*L+C*G*S;(this||p)._w=Z*ja*S-C*G*L;break;case "ZYX":(this||
p)._x=C*ja*S-Z*G*L;(this||p)._y=Z*G*S+C*ja*L;(this||p)._z=Z*ja*L-C*G*S;(this||p)._w=Z*ja*S+C*G*L;break;case "YZX":(this||p)._x=C*ja*S+Z*G*L;(this||p)._y=Z*G*S+C*ja*L;(this||p)._z=Z*ja*L-C*G*S;(this||p)._w=Z*ja*S-C*G*L;break;case "XZY":(this||p)._x=C*ja*S-Z*G*L;(this||p)._y=Z*G*S-C*ja*L;(this||p)._z=Z*ja*L+C*G*S;(this||p)._w=Z*ja*S+C*G*L;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+t)}!1!==x&&this._onChangeCallback();return this||p};z.setFromAxisAngle=
function(t,x){x/=2;var C=Math.sin(x);(this||p)._x=t.x*C;(this||p)._y=t.y*C;(this||p)._z=t.z*C;(this||p)._w=Math.cos(x);this._onChangeCallback();return this||p};z.setFromRotationMatrix=function(t){var x=t.elements,C=x[0];t=x[4];var G=x[8],L=x[1],S=x[5],V=x[9],Z=x[2],ja=x[6];x=x[10];var ua=C+S+x;0<ua?(C=.5/Math.sqrt(ua+1),(this||p)._w=.25/C,(this||p)._x=(ja-V)*C,(this||p)._y=(G-Z)*C,(this||p)._z=(L-t)*C):C>S&&C>x?(C=2*Math.sqrt(1+C-S-x),(this||p)._w=(ja-V)/C,(this||p)._x=.25*C,(this||p)._y=(t+L)/C,
(this||p)._z=(G+Z)/C):S>x?(C=2*Math.sqrt(1+S-C-x),(this||p)._w=(G-Z)/C,(this||p)._x=(t+L)/C,(this||p)._y=.25*C,(this||p)._z=(V+ja)/C):(C=2*Math.sqrt(1+x-C-S),(this||p)._w=(L-t)/C,(this||p)._x=(G+Z)/C,(this||p)._y=(V+ja)/C,(this||p)._z=.25*C);this._onChangeCallback();return this||p};z.setFromUnitVectors=function(t,x){var C=t.dot(x)+1;1E-6>C?(C=0,Math.abs(t.x)>Math.abs(t.z)?((this||p)._x=-t.y,(this||p)._y=t.x,(this||p)._z=0):((this||p)._x=0,(this||p)._y=-t.z,(this||p)._z=t.y)):((this||p)._x=t.y*x.z-
t.z*x.y,(this||p)._y=t.z*x.x-t.x*x.z,(this||p)._z=t.x*x.y-t.y*x.x);(this||p)._w=C;return this.normalize()};z.angleTo=function(t){return 2*Math.acos(Math.abs(ai.clamp(this.dot(t),-1,1)))};z.rotateTowards=function(t,x){var C=this.angleTo(t);if(0===C)return this||p;this.slerp(t,Math.min(1,x/C));return this||p};z.identity=function(){return this.set(0,0,0,1)};z.inverse=function(){return this.conjugate()};z.conjugate=function(){(this||p)._x*=-1;(this||p)._y*=-1;(this||p)._z*=-1;this._onChangeCallback();
return this||p};z.dot=function(t){return(this||p)._x*t._x+(this||p)._y*t._y+(this||p)._z*t._z+(this||p)._w*t._w};z.lengthSq=function(){return(this||p)._x*(this||p)._x+(this||p)._y*(this||p)._y+(this||p)._z*(this||p)._z+(this||p)._w*(this||p)._w};z.length=function(){return Math.sqrt((this||p)._x*(this||p)._x+(this||p)._y*(this||p)._y+(this||p)._z*(this||p)._z+(this||p)._w*(this||p)._w)};z.normalize=function(){var t=this.length();0===t?((this||p)._x=0,(this||p)._y=0,(this||p)._z=0,(this||p)._w=1):(t=
1/t,(this||p)._x*=t,(this||p)._y*=t,(this||p)._z*=t,(this||p)._w*=t);this._onChangeCallback();return this||p};z.multiply=function(t,x){return void 0!==x?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(t,x)):this.multiplyQuaternions(this||p,t)};z.premultiply=function(t){return this.multiplyQuaternions(t,this||p)};z.multiplyQuaternions=function(t,x){var C=t._x,G=t._y,L=t._z;t=t._w;var S=x._x,V=x._y,Z=x._z;
x=x._w;(this||p)._x=C*x+t*S+G*Z-L*V;(this||p)._y=G*x+t*V+L*S-C*Z;(this||p)._z=L*x+t*Z+C*V-G*S;(this||p)._w=t*x-C*S-G*V-L*Z;this._onChangeCallback();return this||p};z.slerp=function(t,x){if(0===x)return this||p;if(1===x)return this.copy(t);var C=(this||p)._x,G=(this||p)._y,L=(this||p)._z,S=(this||p)._w,V=S*t._w+C*t._x+G*t._y+L*t._z;0>V?((this||p)._w=-t._w,(this||p)._x=-t._x,(this||p)._y=-t._y,(this||p)._z=-t._z,V=-V):this.copy(t);if(1<=V)return(this||p)._w=S,(this||p)._x=C,(this||p)._y=G,(this||p)._z=
L,this||p;t=1-V*V;if(t<=Number.EPSILON)return V=1-x,(this||p)._w=V*S+x*(this||p)._w,(this||p)._x=V*C+x*(this||p)._x,(this||p)._y=V*G+x*(this||p)._y,(this||p)._z=V*L+x*(this||p)._z,this.normalize(),this._onChangeCallback(),this||p;t=Math.sqrt(t);var Z=Math.atan2(t,V);V=Math.sin((1-x)*Z)/t;x=Math.sin(x*Z)/t;(this||p)._w=S*V+(this||p)._w*x;(this||p)._x=C*V+(this||p)._x*x;(this||p)._y=G*V+(this||p)._y*x;(this||p)._z=L*V+(this||p)._z*x;this._onChangeCallback();return this||p};z.equals=function(t){return t._x===
(this||p)._x&&t._y===(this||p)._y&&t._z===(this||p)._z&&t._w===(this||p)._w};z.fromArray=function(t,x){void 0===x&&(x=0);(this||p)._x=t[x];(this||p)._y=t[x+1];(this||p)._z=t[x+2];(this||p)._w=t[x+3];this._onChangeCallback();return this||p};z.toArray=function(t,x){void 0===t&&(t=[]);void 0===x&&(x=0);t[x]=(this||p)._x;t[x+1]=(this||p)._y;t[x+2]=(this||p)._z;t[x+3]=(this||p)._w;return t};z.fromBufferAttribute=function(t,x){(this||p)._x=t.getX(x);(this||p)._y=t.getY(x);(this||p)._z=t.getZ(x);(this||
p)._w=t.getW(x);return this||p};z._onChange=function(t){(this||p)._onChangeCallback=t;return this||p};z._onChangeCallback=function(){};a(u,[{key:"x",get:function(){return(this||p)._x},set:function(t){(this||p)._x=t;this._onChangeCallback()}},{key:"y",get:function(){return(this||p)._y},set:function(t){(this||p)._y=t;this._onChangeCallback()}},{key:"z",get:function(){return(this||p)._z},set:function(t){(this||p)._z=t;this._onChangeCallback()}},{key:"w",get:function(){return(this||p)._w},set:function(t){(this||
p)._w=t;this._onChangeCallback()}}]);return u}(),qc=function(){function u(t,x,C){void 0===t&&(t=0);void 0===x&&(x=0);void 0===C&&(C=0);Object.defineProperty(this||p,"isVector3",{value:!0});(this||p).x=t;(this||p).y=x;(this||p).z=C}var z=u.prototype;z.set=function(t,x,C){void 0===C&&(C=(this||p).z);(this||p).x=t;(this||p).y=x;(this||p).z=C;return this||p};z.setScalar=function(t){(this||p).x=t;(this||p).y=t;(this||p).z=t;return this||p};z.setX=function(t){(this||p).x=t;return this||p};z.setY=function(t){(this||
p).y=t;return this||p};z.setZ=function(t){(this||p).z=t;return this||p};z.setComponent=function(t,x){switch(t){case 0:(this||p).x=x;break;case 1:(this||p).y=x;break;case 2:(this||p).z=x;break;default:throw Error("index is out of range: "+t);}return this||p};z.getComponent=function(t){switch(t){case 0:return(this||p).x;case 1:return(this||p).y;case 2:return(this||p).z;default:throw Error("index is out of range: "+t);}};z.clone=function(){return new (this||p).constructor((this||p).x,(this||p).y,(this||
p).z)};z.copy=function(t){(this||p).x=t.x;(this||p).y=t.y;(this||p).z=t.z;return this||p};z.add=function(t,x){if(void 0!==x)return console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,x);(this||p).x+=t.x;(this||p).y+=t.y;(this||p).z+=t.z;return this||p};z.addScalar=function(t){(this||p).x+=t;(this||p).y+=t;(this||p).z+=t;return this||p};z.addVectors=function(t,x){(this||p).x=t.x+x.x;(this||p).y=t.y+x.y;(this||p).z=t.z+x.z;return this||
p};z.addScaledVector=function(t,x){(this||p).x+=t.x*x;(this||p).y+=t.y*x;(this||p).z+=t.z*x;return this||p};z.sub=function(t,x){if(void 0!==x)return console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,x);(this||p).x-=t.x;(this||p).y-=t.y;(this||p).z-=t.z;return this||p};z.subScalar=function(t){(this||p).x-=t;(this||p).y-=t;(this||p).z-=t;return this||p};z.subVectors=function(t,x){(this||p).x=t.x-x.x;(this||p).y=t.y-x.y;(this||p).z=
t.z-x.z;return this||p};z.multiply=function(t,x){if(void 0!==x)return console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(t,x);(this||p).x*=t.x;(this||p).y*=t.y;(this||p).z*=t.z;return this||p};z.multiplyScalar=function(t){(this||p).x*=t;(this||p).y*=t;(this||p).z*=t;return this||p};z.multiplyVectors=function(t,x){(this||p).x=t.x*x.x;(this||p).y=t.y*x.y;(this||p).z=t.z*x.z;return this||p};z.applyEuler=function(t){t&&
t.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order.");return this.applyQuaternion(y$.setFromEuler(t))};z.applyAxisAngle=function(t,x){return this.applyQuaternion(y$.setFromAxisAngle(t,x))};z.applyMatrix3=function(t){var x=(this||p).x,C=(this||p).y,G=(this||p).z;t=t.elements;(this||p).x=t[0]*x+t[3]*C+t[6]*G;(this||p).y=t[1]*x+t[4]*C+t[7]*G;(this||p).z=t[2]*x+t[5]*C+t[8]*G;return this||p};z.applyNormalMatrix=function(t){return this.applyMatrix3(t).normalize()};
z.applyMatrix4=function(t){var x=(this||p).x,C=(this||p).y,G=(this||p).z;t=t.elements;var L=1/(t[3]*x+t[7]*C+t[11]*G+t[15]);(this||p).x=(t[0]*x+t[4]*C+t[8]*G+t[12])*L;(this||p).y=(t[1]*x+t[5]*C+t[9]*G+t[13])*L;(this||p).z=(t[2]*x+t[6]*C+t[10]*G+t[14])*L;return this||p};z.applyQuaternion=function(t){var x=(this||p).x,C=(this||p).y,G=(this||p).z,L=t.x,S=t.y,V=t.z;t=t.w;var Z=t*x+S*G-V*C,ja=t*C+V*x-L*G,ua=t*G+L*C-S*x;x=-L*x-S*C-V*G;(this||p).x=Z*t+x*-L+ja*-V-ua*-S;(this||p).y=ja*t+x*-S+ua*-L-Z*-V;(this||
p).z=ua*t+x*-V+Z*-S-ja*-L;return this||p};z.project=function(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)};z.unproject=function(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)};z.transformDirection=function(t){var x=(this||p).x,C=(this||p).y,G=(this||p).z;t=t.elements;(this||p).x=t[0]*x+t[4]*C+t[8]*G;(this||p).y=t[1]*x+t[5]*C+t[9]*G;(this||p).z=t[2]*x+t[6]*C+t[10]*G;return this.normalize()};z.divide=function(t){(this||p).x/=
t.x;(this||p).y/=t.y;(this||p).z/=t.z;return this||p};z.divideScalar=function(t){return this.multiplyScalar(1/t)};z.min=function(t){(this||p).x=Math.min((this||p).x,t.x);(this||p).y=Math.min((this||p).y,t.y);(this||p).z=Math.min((this||p).z,t.z);return this||p};z.max=function(t){(this||p).x=Math.max((this||p).x,t.x);(this||p).y=Math.max((this||p).y,t.y);(this||p).z=Math.max((this||p).z,t.z);return this||p};z.clamp=function(t,x){(this||p).x=Math.max(t.x,Math.min(x.x,(this||p).x));(this||p).y=Math.max(t.y,
Math.min(x.y,(this||p).y));(this||p).z=Math.max(t.z,Math.min(x.z,(this||p).z));return this||p};z.clampScalar=function(t,x){(this||p).x=Math.max(t,Math.min(x,(this||p).x));(this||p).y=Math.max(t,Math.min(x,(this||p).y));(this||p).z=Math.max(t,Math.min(x,(this||p).z));return this||p};z.clampLength=function(t,x){var C=this.length();return this.divideScalar(C||1).multiplyScalar(Math.max(t,Math.min(x,C)))};z.floor=function(){(this||p).x=Math.floor((this||p).x);(this||p).y=Math.floor((this||p).y);(this||
p).z=Math.floor((this||p).z);return this||p};z.ceil=function(){(this||p).x=Math.ceil((this||p).x);(this||p).y=Math.ceil((this||p).y);(this||p).z=Math.ceil((this||p).z);return this||p};z.round=function(){(this||p).x=Math.round((this||p).x);(this||p).y=Math.round((this||p).y);(this||p).z=Math.round((this||p).z);return this||p};z.roundToZero=function(){(this||p).x=0>(this||p).x?Math.ceil((this||p).x):Math.floor((this||p).x);(this||p).y=0>(this||p).y?Math.ceil((this||p).y):Math.floor((this||p).y);(this||
p).z=0>(this||p).z?Math.ceil((this||p).z):Math.floor((this||p).z);return this||p};z.negate=function(){(this||p).x=-(this||p).x;(this||p).y=-(this||p).y;(this||p).z=-(this||p).z;return this||p};z.dot=function(t){return(this||p).x*t.x+(this||p).y*t.y+(this||p).z*t.z};z.lengthSq=function(){return(this||p).x*(this||p).x+(this||p).y*(this||p).y+(this||p).z*(this||p).z};z.length=function(){return Math.sqrt((this||p).x*(this||p).x+(this||p).y*(this||p).y+(this||p).z*(this||p).z)};z.manhattanLength=function(){return Math.abs((this||
p).x)+Math.abs((this||p).y)+Math.abs((this||p).z)};z.normalize=function(){return this.divideScalar(this.length()||1)};z.setLength=function(t){return this.normalize().multiplyScalar(t)};z.lerp=function(t,x){(this||p).x+=(t.x-(this||p).x)*x;(this||p).y+=(t.y-(this||p).y)*x;(this||p).z+=(t.z-(this||p).z)*x;return this||p};z.lerpVectors=function(t,x,C){(this||p).x=t.x+(x.x-t.x)*C;(this||p).y=t.y+(x.y-t.y)*C;(this||p).z=t.z+(x.z-t.z)*C;return this||p};z.cross=function(t,x){return void 0!==x?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),
this.crossVectors(t,x)):this.crossVectors(this||p,t)};z.crossVectors=function(t,x){var C=t.x,G=t.y;t=t.z;var L=x.x,S=x.y;x=x.z;(this||p).x=G*x-t*S;(this||p).y=t*L-C*x;(this||p).z=C*S-G*L;return this||p};z.projectOnVector=function(t){var x=t.lengthSq();if(0===x)return this.set(0,0,0);x=t.dot(this||p)/x;return this.copy(t).multiplyScalar(x)};z.projectOnPlane=function(t){FW.copy(this||p).projectOnVector(t);return this.sub(FW)};z.reflect=function(t){return this.sub(FW.copy(t).multiplyScalar(2*this.dot(t)))};
z.angleTo=function(t){var x=Math.sqrt(this.lengthSq()*t.lengthSq());if(0===x)return Math.PI/2;t=this.dot(t)/x;return Math.acos(ai.clamp(t,-1,1))};z.distanceTo=function(t){return Math.sqrt(this.distanceToSquared(t))};z.distanceToSquared=function(t){var x=(this||p).x-t.x,C=(this||p).y-t.y;t=(this||p).z-t.z;return x*x+C*C+t*t};z.manhattanDistanceTo=function(t){return Math.abs((this||p).x-t.x)+Math.abs((this||p).y-t.y)+Math.abs((this||p).z-t.z)};z.setFromSpherical=function(t){return this.setFromSphericalCoords(t.radius,
t.phi,t.theta)};z.setFromSphericalCoords=function(t,x,C){var G=Math.sin(x)*t;(this||p).x=G*Math.sin(C);(this||p).y=Math.cos(x)*t;(this||p).z=G*Math.cos(C);return this||p};z.setFromCylindrical=function(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)};z.setFromCylindricalCoords=function(t,x,C){(this||p).x=t*Math.sin(x);(this||p).y=C;(this||p).z=t*Math.cos(x);return this||p};z.setFromMatrixPosition=function(t){t=t.elements;(this||p).x=t[12];(this||p).y=t[13];(this||p).z=t[14];return this||
p};z.setFromMatrixScale=function(t){var x=this.setFromMatrixColumn(t,0).length(),C=this.setFromMatrixColumn(t,1).length();t=this.setFromMatrixColumn(t,2).length();(this||p).x=x;(this||p).y=C;(this||p).z=t;return this||p};z.setFromMatrixColumn=function(t,x){return this.fromArray(t.elements,4*x)};z.setFromMatrix3Column=function(t,x){return this.fromArray(t.elements,3*x)};z.equals=function(t){return t.x===(this||p).x&&t.y===(this||p).y&&t.z===(this||p).z};z.fromArray=function(t,x){void 0===x&&(x=0);
(this||p).x=t[x];(this||p).y=t[x+1];(this||p).z=t[x+2];return this||p};z.toArray=function(t,x){void 0===t&&(t=[]);void 0===x&&(x=0);t[x]=(this||p).x;t[x+1]=(this||p).y;t[x+2]=(this||p).z;return t};z.fromBufferAttribute=function(t,x,C){void 0!==C&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute().");(this||p).x=t.getX(x);(this||p).y=t.getY(x);(this||p).z=t.getZ(x);return this||p};z.random=function(){(this||p).x=Math.random();(this||p).y=Math.random();(this||p).z=Math.random();
return this||p};return u}(),FW=new qc,y$=new hp,Ov=function(){function u(t,x){Object.defineProperty(this||p,"isBox3",{value:!0});(this||p).min=void 0!==t?t:new qc(Infinity,Infinity,Infinity);(this||p).max=void 0!==x?x:new qc(-Infinity,-Infinity,-Infinity)}var z=u.prototype;z.set=function(t,x){(this||p).min.copy(t);(this||p).max.copy(x);return this||p};z.setFromArray=function(t){for(var x=Infinity,C=Infinity,G=Infinity,L=-Infinity,S=-Infinity,V=-Infinity,Z=0,ja=t.length;Z<ja;Z+=3){var ua=t[Z],Ca=t[Z+
1],bb=t[Z+2];ua<x&&(x=ua);Ca<C&&(C=Ca);bb<G&&(G=bb);ua>L&&(L=ua);Ca>S&&(S=Ca);bb>V&&(V=bb)}(this||p).min.set(x,C,G);(this||p).max.set(L,S,V);return this||p};z.setFromBufferAttribute=function(t){for(var x=Infinity,C=Infinity,G=Infinity,L=-Infinity,S=-Infinity,V=-Infinity,Z=0,ja=t.count;Z<ja;Z++){var ua=t.getX(Z),Ca=t.getY(Z),bb=t.getZ(Z);ua<x&&(x=ua);Ca<C&&(C=Ca);bb<G&&(G=bb);ua>L&&(L=ua);Ca>S&&(S=Ca);bb>V&&(V=bb)}(this||p).min.set(x,C,G);(this||p).max.set(L,S,V);return this||p};z.setFromPoints=function(t){this.makeEmpty();
for(var x=0,C=t.length;x<C;x++)this.expandByPoint(t[x]);return this||p};z.setFromCenterAndSize=function(t,x){x=qI.copy(x).multiplyScalar(.5);(this||p).min.copy(t).sub(x);(this||p).max.copy(t).add(x);return this||p};z.setFromObject=function(t){this.makeEmpty();return this.expandByObject(t)};z.clone=function(){return(new (this||p).constructor).copy(this||p)};z.copy=function(t){(this||p).min.copy(t.min);(this||p).max.copy(t.max);return this||p};z.makeEmpty=function(){(this||p).min.x=(this||p).min.y=
(this||p).min.z=Infinity;(this||p).max.x=(this||p).max.y=(this||p).max.z=-Infinity;return this||p};z.isEmpty=function(){return(this||p).max.x<(this||p).min.x||(this||p).max.y<(this||p).min.y||(this||p).max.z<(this||p).min.z};z.getCenter=function(t){void 0===t&&(console.warn("THREE.Box3: .getCenter() target is now required"),t=new qc);return this.isEmpty()?t.set(0,0,0):t.addVectors((this||p).min,(this||p).max).multiplyScalar(.5)};z.getSize=function(t){void 0===t&&(console.warn("THREE.Box3: .getSize() target is now required"),
t=new qc);return this.isEmpty()?t.set(0,0,0):t.subVectors((this||p).max,(this||p).min)};z.expandByPoint=function(t){(this||p).min.min(t);(this||p).max.max(t);return this||p};z.expandByVector=function(t){(this||p).min.sub(t);(this||p).max.add(t);return this||p};z.expandByScalar=function(t){(this||p).min.addScalar(-t);(this||p).max.addScalar(t);return this||p};z.expandByObject=function(t){t.updateWorldMatrix(!1,!1);var x=t.geometry;void 0!==x&&(null===x.boundingBox&&x.computeBoundingBox(),GW.copy(x.boundingBox),
GW.applyMatrix4(t.matrixWorld),this.union(GW));t=t.children;x=0;for(var C=t.length;x<C;x++)this.expandByObject(t[x]);return this||p};z.containsPoint=function(t){return t.x<(this||p).min.x||t.x>(this||p).max.x||t.y<(this||p).min.y||t.y>(this||p).max.y||t.z<(this||p).min.z||t.z>(this||p).max.z?!1:!0};z.containsBox=function(t){return(this||p).min.x<=t.min.x&&t.max.x<=(this||p).max.x&&(this||p).min.y<=t.min.y&&t.max.y<=(this||p).max.y&&(this||p).min.z<=t.min.z&&t.max.z<=(this||p).max.z};z.getParameter=
function(t,x){void 0===x&&(console.warn("THREE.Box3: .getParameter() target is now required"),x=new qc);return x.set((t.x-(this||p).min.x)/((this||p).max.x-(this||p).min.x),(t.y-(this||p).min.y)/((this||p).max.y-(this||p).min.y),(t.z-(this||p).min.z)/((this||p).max.z-(this||p).min.z))};z.intersectsBox=function(t){return t.max.x<(this||p).min.x||t.min.x>(this||p).max.x||t.max.y<(this||p).min.y||t.min.y>(this||p).max.y||t.max.z<(this||p).min.z||t.min.z>(this||p).max.z?!1:!0};z.intersectsSphere=function(t){this.clampPoint(t.center,
qI);return qI.distanceToSquared(t.center)<=t.radius*t.radius};z.intersectsPlane=function(t){if(0<t.normal.x){var x=t.normal.x*(this||p).min.x;var C=t.normal.x*(this||p).max.x}else x=t.normal.x*(this||p).max.x,C=t.normal.x*(this||p).min.x;0<t.normal.y?(x+=t.normal.y*(this||p).min.y,C+=t.normal.y*(this||p).max.y):(x+=t.normal.y*(this||p).max.y,C+=t.normal.y*(this||p).min.y);0<t.normal.z?(x+=t.normal.z*(this||p).min.z,C+=t.normal.z*(this||p).max.z):(x+=t.normal.z*(this||p).max.z,C+=t.normal.z*(this||
p).min.z);return x<=-t.constant&&C>=-t.constant};z.intersectsTriangle=function(t){if(this.isEmpty())return!1;this.getCenter(rI);AO.subVectors((this||p).max,rI);GE.subVectors(t.a,rI);HE.subVectors(t.b,rI);IE.subVectors(t.c,rI);pz.subVectors(HE,GE);qz.subVectors(IE,HE);MB.subVectors(GE,IE);t=[0,-pz.z,pz.y,0,-qz.z,qz.y,0,-MB.z,MB.y,pz.z,0,-pz.x,qz.z,0,-qz.x,MB.z,0,-MB.x,-pz.y,pz.x,0,-qz.y,qz.x,0,-MB.y,MB.x,0];if(!A(t,GE,HE,IE,AO))return!1;t=[1,0,0,0,1,0,0,0,1];if(!A(t,GE,HE,IE,AO))return!1;BO.crossVectors(pz,
qz);t=[BO.x,BO.y,BO.z];return A(t,GE,HE,IE,AO)};z.clampPoint=function(t,x){void 0===x&&(console.warn("THREE.Box3: .clampPoint() target is now required"),x=new qc);return x.copy(t).clamp((this||p).min,(this||p).max)};z.distanceToPoint=function(t){return qI.copy(t).clamp((this||p).min,(this||p).max).sub(t).length()};z.getBoundingSphere=function(t){void 0===t&&console.error("THREE.Box3: .getBoundingSphere() target is now required");this.getCenter(t.center);t.radius=.5*this.getSize(qI).length();return t};
z.intersect=function(t){(this||p).min.max(t.min);(this||p).max.min(t.max);this.isEmpty()&&this.makeEmpty();return this||p};z.union=function(t){(this||p).min.min(t.min);(this||p).max.max(t.max);return this||p};z.applyMatrix4=function(t){if(this.isEmpty())return this||p;fx[0].set((this||p).min.x,(this||p).min.y,(this||p).min.z).applyMatrix4(t);fx[1].set((this||p).min.x,(this||p).min.y,(this||p).max.z).applyMatrix4(t);fx[2].set((this||p).min.x,(this||p).max.y,(this||p).min.z).applyMatrix4(t);fx[3].set((this||
p).min.x,(this||p).max.y,(this||p).max.z).applyMatrix4(t);fx[4].set((this||p).max.x,(this||p).min.y,(this||p).min.z).applyMatrix4(t);fx[5].set((this||p).max.x,(this||p).min.y,(this||p).max.z).applyMatrix4(t);fx[6].set((this||p).max.x,(this||p).max.y,(this||p).min.z).applyMatrix4(t);fx[7].set((this||p).max.x,(this||p).max.y,(this||p).max.z).applyMatrix4(t);this.setFromPoints(fx);return this||p};z.translate=function(t){(this||p).min.add(t);(this||p).max.add(t);return this||p};z.equals=function(t){return t.min.equals((this||
p).min)&&t.max.equals((this||p).max)};return u}(),fx=[new qc,new qc,new qc,new qc,new qc,new qc,new qc,new qc],qI=new qc,GW=new Ov,GE=new qc,HE=new qc,IE=new qc,pz=new qc,qz=new qc,MB=new qc,rI=new qc,AO=new qc,BO=new qc,DB=new qc,tra=new Ov,gx=function(){function u(t,x){(this||p).center=void 0!==t?t:new qc;(this||p).radius=void 0!==x?x:-1}var z=u.prototype;z.set=function(t,x){(this||p).center.copy(t);(this||p).radius=x;return this||p};z.setFromPoints=function(t,x){var C=(this||p).center;void 0!==
x?C.copy(x):tra.setFromPoints(t).getCenter(C);for(var G=x=0,L=t.length;G<L;G++)x=Math.max(x,C.distanceToSquared(t[G]));(this||p).radius=Math.sqrt(x);return this||p};z.clone=function(){return(new (this||p).constructor).copy(this||p)};z.copy=function(t){(this||p).center.copy(t.center);(this||p).radius=t.radius;return this||p};z.isEmpty=function(){return 0>(this||p).radius};z.makeEmpty=function(){(this||p).center.set(0,0,0);(this||p).radius=-1;return this||p};z.containsPoint=function(t){return t.distanceToSquared((this||
p).center)<=(this||p).radius*(this||p).radius};z.distanceToPoint=function(t){return t.distanceTo((this||p).center)-(this||p).radius};z.intersectsSphere=function(t){var x=(this||p).radius+t.radius;return t.center.distanceToSquared((this||p).center)<=x*x};z.intersectsBox=function(t){return t.intersectsSphere(this||p)};z.intersectsPlane=function(t){return Math.abs(t.distanceToPoint((this||p).center))<=(this||p).radius};z.clampPoint=function(t,x){var C=(this||p).center.distanceToSquared(t);void 0===x&&
(console.warn("THREE.Sphere: .clampPoint() target is now required"),x=new qc);x.copy(t);C>(this||p).radius*(this||p).radius&&(x.sub((this||p).center).normalize(),x.multiplyScalar((this||p).radius).add((this||p).center));return x};z.getBoundingBox=function(t){void 0===t&&(console.warn("THREE.Sphere: .getBoundingBox() target is now required"),t=new Ov);if(this.isEmpty())return t.makeEmpty(),t;t.set((this||p).center,(this||p).center);t.expandByScalar((this||p).radius);return t};z.applyMatrix4=function(t){(this||
p).center.applyMatrix4(t);(this||p).radius*=t.getMaxScaleOnAxis();return this||p};z.translate=function(t){(this||p).center.add(t);return this||p};z.equals=function(t){return t.center.equals((this||p).center)&&t.radius===(this||p).radius};return u}(),hx=new qc,HW=new qc,CO=new qc,rz=new qc,IW=new qc,DO=new qc,JW=new qc,EE=function(){function u(t,x){(this||p).origin=void 0!==t?t:new qc;(this||p).direction=void 0!==x?x:new qc(0,0,-1)}var z=u.prototype;z.set=function(t,x){(this||p).origin.copy(t);(this||
p).direction.copy(x);return this||p};z.clone=function(){return(new (this||p).constructor).copy(this||p)};z.copy=function(t){(this||p).origin.copy(t.origin);(this||p).direction.copy(t.direction);return this||p};z.at=function(t,x){void 0===x&&(console.warn("THREE.Ray: .at() target is now required"),x=new qc);return x.copy((this||p).direction).multiplyScalar(t).add((this||p).origin)};z.lookAt=function(t){(this||p).direction.copy(t).sub((this||p).origin).normalize();return this||p};z.recast=function(t){(this||
p).origin.copy(this.at(t,hx));return this||p};z.closestPointToPoint=function(t,x){void 0===x&&(console.warn("THREE.Ray: .closestPointToPoint() target is now required"),x=new qc);x.subVectors(t,(this||p).origin);t=x.dot((this||p).direction);return 0>t?x.copy((this||p).origin):x.copy((this||p).direction).multiplyScalar(t).add((this||p).origin)};z.distanceToPoint=function(t){return Math.sqrt(this.distanceSqToPoint(t))};z.distanceSqToPoint=function(t){var x=hx.subVectors(t,(this||p).origin).dot((this||
p).direction);if(0>x)return(this||p).origin.distanceToSquared(t);hx.copy((this||p).direction).multiplyScalar(x).add((this||p).origin);return hx.distanceToSquared(t)};z.distanceSqToSegment=function(t,x,C,G){HW.copy(t).add(x).multiplyScalar(.5);CO.copy(x).sub(t).normalize();rz.copy((this||p).origin).sub(HW);var L=.5*t.distanceTo(x),S=-(this||p).direction.dot(CO),V=rz.dot((this||p).direction),Z=-rz.dot(CO),ja=rz.lengthSq(),ua=Math.abs(1-S*S);if(0<ua){t=S*Z-V;x=S*V-Z;var Ca=L*ua;0<=t?x>=-Ca?x<=Ca?(L=
1/ua,t*=L,x*=L,S=t*(t+S*x+2*V)+x*(S*t+x+2*Z)+ja):(x=L,t=Math.max(0,-(S*x+V)),S=-t*t+x*(x+2*Z)+ja):(x=-L,t=Math.max(0,-(S*x+V)),S=-t*t+x*(x+2*Z)+ja):x<=-Ca?(t=Math.max(0,-(-S*L+V)),x=0<t?-L:Math.min(Math.max(-L,-Z),L),S=-t*t+x*(x+2*Z)+ja):x<=Ca?(t=0,x=Math.min(Math.max(-L,-Z),L),S=x*(x+2*Z)+ja):(t=Math.max(0,-(S*L+V)),x=0<t?L:Math.min(Math.max(-L,-Z),L),S=-t*t+x*(x+2*Z)+ja)}else x=0<S?-L:L,t=Math.max(0,-(S*x+V)),S=-t*t+x*(x+2*Z)+ja;C&&C.copy((this||p).direction).multiplyScalar(t).add((this||p).origin);
G&&G.copy(CO).multiplyScalar(x).add(HW);return S};z.intersectSphere=function(t,x){hx.subVectors(t.center,(this||p).origin);var C=hx.dot((this||p).direction),G=hx.dot(hx)-C*C;t=t.radius*t.radius;if(G>t)return null;t=Math.sqrt(t-G);G=C-t;C+=t;return 0>G&&0>C?null:0>G?this.at(C,x):this.at(G,x)};z.intersectsSphere=function(t){return this.distanceSqToPoint(t.center)<=t.radius*t.radius};z.distanceToPlane=function(t){var x=t.normal.dot((this||p).direction);if(0===x)return 0===t.distanceToPoint((this||p).origin)?
0:null;t=-((this||p).origin.dot(t.normal)+t.constant)/x;return 0<=t?t:null};z.intersectPlane=function(t,x){t=this.distanceToPlane(t);return null===t?null:this.at(t,x)};z.intersectsPlane=function(t){var x=t.distanceToPoint((this||p).origin);return 0===x||0>t.normal.dot((this||p).direction)*x?!0:!1};z.intersectBox=function(t,x){var C=1/(this||p).direction.x;var G=1/(this||p).direction.y;var L=1/(this||p).direction.z,S=(this||p).origin;if(0<=C){var V=(t.min.x-S.x)*C;C*=t.max.x-S.x}else V=(t.max.x-S.x)*
C,C*=t.min.x-S.x;if(0<=G){var Z=(t.min.y-S.y)*G;G*=t.max.y-S.y}else Z=(t.max.y-S.y)*G,G*=t.min.y-S.y;if(V>G||Z>C)return null;if(Z>V||V!==V)V=Z;if(G<C||C!==C)C=G;0<=L?(Z=(t.min.z-S.z)*L,t=(t.max.z-S.z)*L):(Z=(t.max.z-S.z)*L,t=(t.min.z-S.z)*L);if(V>t||Z>C)return null;if(Z>V||V!==V)V=Z;if(t<C||C!==C)C=t;return 0>C?null:this.at(0<=V?V:C,x)};z.intersectsBox=function(t){return null!==this.intersectBox(t,hx)};z.intersectTriangle=function(t,x,C,G,L){IW.subVectors(x,t);DO.subVectors(C,t);JW.crossVectors(IW,
DO);x=(this||p).direction.dot(JW);if(0<x){if(G)return null;G=1}else if(0>x)G=-1,x=-x;else return null;rz.subVectors((this||p).origin,t);t=G*(this||p).direction.dot(DO.crossVectors(rz,DO));if(0>t)return null;C=G*(this||p).direction.dot(IW.cross(rz));if(0>C||t+C>x)return null;t=-G*rz.dot(JW);return 0>t?null:this.at(t/x,L)};z.applyMatrix4=function(t){(this||p).origin.applyMatrix4(t);(this||p).direction.transformDirection(t);return this||p};z.equals=function(t){return t.origin.equals((this||p).origin)&&
t.direction.equals((this||p).direction)};return u}(),fj=function(){function u(){Object.defineProperty(this||p,"isMatrix4",{value:!0});(this||p).elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];0<arguments.length&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}var z=u.prototype;z.set=function(t,x,C,G,L,S,V,Z,ja,ua,Ca,bb,$a,ub,pb,Rc){var xc=(this||p).elements;xc[0]=t;xc[4]=x;xc[8]=C;xc[12]=G;xc[1]=L;xc[5]=S;xc[9]=V;xc[13]=Z;xc[2]=ja;xc[6]=ua;xc[10]=Ca;xc[14]=
bb;xc[3]=$a;xc[7]=ub;xc[11]=pb;xc[15]=Rc;return this||p};z.identity=function(){this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);return this||p};z.clone=function(){return(new u).fromArray((this||p).elements)};z.copy=function(t){var x=(this||p).elements;t=t.elements;x[0]=t[0];x[1]=t[1];x[2]=t[2];x[3]=t[3];x[4]=t[4];x[5]=t[5];x[6]=t[6];x[7]=t[7];x[8]=t[8];x[9]=t[9];x[10]=t[10];x[11]=t[11];x[12]=t[12];x[13]=t[13];x[14]=t[14];x[15]=t[15];return this||p};z.copyPosition=function(t){var x=(this||p).elements;t=t.elements;
x[12]=t[12];x[13]=t[13];x[14]=t[14];return this||p};z.extractBasis=function(t,x,C){t.setFromMatrixColumn(this||p,0);x.setFromMatrixColumn(this||p,1);C.setFromMatrixColumn(this||p,2);return this||p};z.makeBasis=function(t,x,C){this.set(t.x,x.x,C.x,0,t.y,x.y,C.y,0,t.z,x.z,C.z,0,0,0,0,1);return this||p};z.extractRotation=function(t){var x=(this||p).elements,C=t.elements,G=1/JE.setFromMatrixColumn(t,0).length(),L=1/JE.setFromMatrixColumn(t,1).length();t=1/JE.setFromMatrixColumn(t,2).length();x[0]=C[0]*
G;x[1]=C[1]*G;x[2]=C[2]*G;x[3]=0;x[4]=C[4]*L;x[5]=C[5]*L;x[6]=C[6]*L;x[7]=0;x[8]=C[8]*t;x[9]=C[9]*t;x[10]=C[10]*t;x[11]=0;x[12]=0;x[13]=0;x[14]=0;x[15]=1;return this||p};z.makeRotationFromEuler=function(t){t&&t.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var x=(this||p).elements,C=t.x,G=t.y,L=t.z,S=Math.cos(C);C=Math.sin(C);var V=Math.cos(G);G=Math.sin(G);var Z=Math.cos(L);L=Math.sin(L);if("XYZ"===t.order){t=S*Z;var ja=
S*L,ua=C*Z,Ca=C*L;x[0]=V*Z;x[4]=-V*L;x[8]=G;x[1]=ja+ua*G;x[5]=t-Ca*G;x[9]=-C*V;x[2]=Ca-t*G;x[6]=ua+ja*G;x[10]=S*V}else"YXZ"===t.order?(t=V*Z,ja=V*L,ua=G*Z,Ca=G*L,x[0]=t+Ca*C,x[4]=ua*C-ja,x[8]=S*G,x[1]=S*L,x[5]=S*Z,x[9]=-C,x[2]=ja*C-ua,x[6]=Ca+t*C,x[10]=S*V):"ZXY"===t.order?(t=V*Z,ja=V*L,ua=G*Z,Ca=G*L,x[0]=t-Ca*C,x[4]=-S*L,x[8]=ua+ja*C,x[1]=ja+ua*C,x[5]=S*Z,x[9]=Ca-t*C,x[2]=-S*G,x[6]=C,x[10]=S*V):"ZYX"===t.order?(t=S*Z,ja=S*L,ua=C*Z,Ca=C*L,x[0]=V*Z,x[4]=ua*G-ja,x[8]=t*G+Ca,x[1]=V*L,x[5]=Ca*G+t,x[9]=
ja*G-ua,x[2]=-G,x[6]=C*V,x[10]=S*V):"YZX"===t.order?(t=S*V,ja=S*G,ua=C*V,Ca=C*G,x[0]=V*Z,x[4]=Ca-t*L,x[8]=ua*L+ja,x[1]=L,x[5]=S*Z,x[9]=-C*Z,x[2]=-G*Z,x[6]=ja*L+ua,x[10]=t-Ca*L):"XZY"===t.order&&(t=S*V,ja=S*G,ua=C*V,Ca=C*G,x[0]=V*Z,x[4]=-L,x[8]=G*Z,x[1]=t*L+Ca,x[5]=S*Z,x[9]=ja*L-ua,x[2]=ua*L-ja,x[6]=C*Z,x[10]=Ca*L+t);x[3]=0;x[7]=0;x[11]=0;x[12]=0;x[13]=0;x[14]=0;x[15]=1;return this||p};z.makeRotationFromQuaternion=function(t){return this.compose(ura,t,vra)};z.lookAt=function(t,x,C){var G=(this||p).elements;
Vp.subVectors(t,x);0===Vp.lengthSq()&&(Vp.z=1);Vp.normalize();sz.crossVectors(C,Vp);0===sz.lengthSq()&&(1===Math.abs(C.z)?Vp.x+=1E-4:Vp.z+=1E-4,Vp.normalize(),sz.crossVectors(C,Vp));sz.normalize();EO.crossVectors(Vp,sz);G[0]=sz.x;G[4]=EO.x;G[8]=Vp.x;G[1]=sz.y;G[5]=EO.y;G[9]=Vp.y;G[2]=sz.z;G[6]=EO.z;G[10]=Vp.z;return this||p};z.multiply=function(t,x){return void 0!==x?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(t,
x)):this.multiplyMatrices(this||p,t)};z.premultiply=function(t){return this.multiplyMatrices(t,this||p)};z.multiplyMatrices=function(t,x){var C=t.elements,G=x.elements;x=(this||p).elements;t=C[0];var L=C[4],S=C[8],V=C[12],Z=C[1],ja=C[5],ua=C[9],Ca=C[13],bb=C[2],$a=C[6],ub=C[10],pb=C[14],Rc=C[3],xc=C[7],kd=C[11];C=C[15];var Ec=G[0],nd=G[4],Nc=G[8],Cd=G[12],Xd=G[1],yd=G[5],Ad=G[9],Ce=G[13],gf=G[2],hg=G[6],Cf=G[10],Yf=G[14],gh=G[3],Pg=G[7],Ei=G[11];G=G[15];x[0]=t*Ec+L*Xd+S*gf+V*gh;x[4]=t*nd+L*yd+S*hg+
V*Pg;x[8]=t*Nc+L*Ad+S*Cf+V*Ei;x[12]=t*Cd+L*Ce+S*Yf+V*G;x[1]=Z*Ec+ja*Xd+ua*gf+Ca*gh;x[5]=Z*nd+ja*yd+ua*hg+Ca*Pg;x[9]=Z*Nc+ja*Ad+ua*Cf+Ca*Ei;x[13]=Z*Cd+ja*Ce+ua*Yf+Ca*G;x[2]=bb*Ec+$a*Xd+ub*gf+pb*gh;x[6]=bb*nd+$a*yd+ub*hg+pb*Pg;x[10]=bb*Nc+$a*Ad+ub*Cf+pb*Ei;x[14]=bb*Cd+$a*Ce+ub*Yf+pb*G;x[3]=Rc*Ec+xc*Xd+kd*gf+C*gh;x[7]=Rc*nd+xc*yd+kd*hg+C*Pg;x[11]=Rc*Nc+xc*Ad+kd*Cf+C*Ei;x[15]=Rc*Cd+xc*Ce+kd*Yf+C*G;return this||p};z.multiplyScalar=function(t){var x=(this||p).elements;x[0]*=t;x[4]*=t;x[8]*=t;x[12]*=t;x[1]*=
t;x[5]*=t;x[9]*=t;x[13]*=t;x[2]*=t;x[6]*=t;x[10]*=t;x[14]*=t;x[3]*=t;x[7]*=t;x[11]*=t;x[15]*=t;return this||p};z.determinant=function(){var t=(this||p).elements,x=t[0],C=t[4],G=t[8],L=t[12],S=t[1],V=t[5],Z=t[9],ja=t[13],ua=t[2],Ca=t[6],bb=t[10],$a=t[14];return t[3]*(+L*Z*Ca-G*ja*Ca-L*V*bb+C*ja*bb+G*V*$a-C*Z*$a)+t[7]*(+x*Z*$a-x*ja*bb+L*S*bb-G*S*$a+G*ja*ua-L*Z*ua)+t[11]*(+x*ja*Ca-x*V*$a-L*S*Ca+C*S*$a+L*V*ua-C*ja*ua)+t[15]*(-G*V*ua-x*Z*Ca+x*V*bb+G*S*Ca-C*S*bb+C*Z*ua)};z.transpose=function(){var t=(this||
p).elements;var x=t[1];t[1]=t[4];t[4]=x;x=t[2];t[2]=t[8];t[8]=x;x=t[6];t[6]=t[9];t[9]=x;x=t[3];t[3]=t[12];t[12]=x;x=t[7];t[7]=t[13];t[13]=x;x=t[11];t[11]=t[14];t[14]=x;return this||p};z.setPosition=function(t,x,C){var G=(this||p).elements;t.isVector3?(G[12]=t.x,G[13]=t.y,G[14]=t.z):(G[12]=t,G[13]=x,G[14]=C);return this||p};z.getInverse=function(t,x){void 0!==x&&console.warn("THREE.Matrix4: .getInverse() can no longer be configured to throw on degenerate.");x=(this||p).elements;var C=t.elements;t=
C[0];var G=C[1],L=C[2],S=C[3],V=C[4],Z=C[5],ja=C[6],ua=C[7],Ca=C[8],bb=C[9],$a=C[10],ub=C[11],pb=C[12],Rc=C[13],xc=C[14];C=C[15];var kd=bb*xc*ua-Rc*$a*ua+Rc*ja*ub-Z*xc*ub-bb*ja*C+Z*$a*C,Ec=pb*$a*ua-Ca*xc*ua-pb*ja*ub+V*xc*ub+Ca*ja*C-V*$a*C,nd=Ca*Rc*ua-pb*bb*ua+pb*Z*ub-V*Rc*ub-Ca*Z*C+V*bb*C,Nc=pb*bb*ja-Ca*Rc*ja-pb*Z*$a+V*Rc*$a+Ca*Z*xc-V*bb*xc,Cd=t*kd+G*Ec+L*nd+S*Nc;if(0===Cd)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);Cd=1/Cd;x[0]=kd*Cd;x[1]=(Rc*$a*S-bb*xc*S-Rc*L*ub+G*xc*ub+bb*L*C-G*$a*C)*Cd;x[2]=
(Z*xc*S-Rc*ja*S+Rc*L*ua-G*xc*ua-Z*L*C+G*ja*C)*Cd;x[3]=(bb*ja*S-Z*$a*S-bb*L*ua+G*$a*ua+Z*L*ub-G*ja*ub)*Cd;x[4]=Ec*Cd;x[5]=(Ca*xc*S-pb*$a*S+pb*L*ub-t*xc*ub-Ca*L*C+t*$a*C)*Cd;x[6]=(pb*ja*S-V*xc*S-pb*L*ua+t*xc*ua+V*L*C-t*ja*C)*Cd;x[7]=(V*$a*S-Ca*ja*S+Ca*L*ua-t*$a*ua-V*L*ub+t*ja*ub)*Cd;x[8]=nd*Cd;x[9]=(pb*bb*S-Ca*Rc*S-pb*G*ub+t*Rc*ub+Ca*G*C-t*bb*C)*Cd;x[10]=(V*Rc*S-pb*Z*S+pb*G*ua-t*Rc*ua-V*G*C+t*Z*C)*Cd;x[11]=(Ca*Z*S-V*bb*S-Ca*G*ua+t*bb*ua+V*G*ub-t*Z*ub)*Cd;x[12]=Nc*Cd;x[13]=(Ca*Rc*L-pb*bb*L+pb*G*$a-t*
Rc*$a-Ca*G*xc+t*bb*xc)*Cd;x[14]=(pb*Z*L-V*Rc*L-pb*G*ja+t*Rc*ja+V*G*xc-t*Z*xc)*Cd;x[15]=(V*bb*L-Ca*Z*L+Ca*G*ja-t*bb*ja-V*G*$a+t*Z*$a)*Cd;return this||p};z.scale=function(t){var x=(this||p).elements,C=t.x,G=t.y;t=t.z;x[0]*=C;x[4]*=G;x[8]*=t;x[1]*=C;x[5]*=G;x[9]*=t;x[2]*=C;x[6]*=G;x[10]*=t;x[3]*=C;x[7]*=G;x[11]*=t;return this||p};z.getMaxScaleOnAxis=function(){var t=(this||p).elements;return Math.sqrt(Math.max(t[0]*t[0]+t[1]*t[1]+t[2]*t[2],t[4]*t[4]+t[5]*t[5]+t[6]*t[6],t[8]*t[8]+t[9]*t[9]+t[10]*t[10]))};
z.makeTranslation=function(t,x,C){this.set(1,0,0,t,0,1,0,x,0,0,1,C,0,0,0,1);return this||p};z.makeRotationX=function(t){var x=Math.cos(t);t=Math.sin(t);this.set(1,0,0,0,0,x,-t,0,0,t,x,0,0,0,0,1);return this||p};z.makeRotationY=function(t){var x=Math.cos(t);t=Math.sin(t);this.set(x,0,t,0,0,1,0,0,-t,0,x,0,0,0,0,1);return this||p};z.makeRotationZ=function(t){var x=Math.cos(t);t=Math.sin(t);this.set(x,-t,0,0,t,x,0,0,0,0,1,0,0,0,0,1);return this||p};z.makeRotationAxis=function(t,x){var C=Math.cos(x);x=
Math.sin(x);var G=1-C,L=t.x,S=t.y;t=t.z;var V=G*L,Z=G*S;this.set(V*L+C,V*S-x*t,V*t+x*S,0,V*S+x*t,Z*S+C,Z*t-x*L,0,V*t-x*S,Z*t+x*L,G*t*t+C,0,0,0,0,1);return this||p};z.makeScale=function(t,x,C){this.set(t,0,0,0,0,x,0,0,0,0,C,0,0,0,0,1);return this||p};z.makeShear=function(t,x,C){this.set(1,x,C,0,t,1,C,0,t,x,1,0,0,0,0,1);return this||p};z.compose=function(t,x,C){var G=(this||p).elements,L=x._x,S=x._y,V=x._z,Z=x._w,ja=L+L,ua=S+S,Ca=V+V;x=L*ja;var bb=L*ua;L*=Ca;var $a=S*ua;S*=Ca;V*=Ca;ja*=Z;ua*=Z;Z*=Ca;
Ca=C.x;var ub=C.y;C=C.z;G[0]=(1-($a+V))*Ca;G[1]=(bb+Z)*Ca;G[2]=(L-ua)*Ca;G[3]=0;G[4]=(bb-Z)*ub;G[5]=(1-(x+V))*ub;G[6]=(S+ja)*ub;G[7]=0;G[8]=(L+ua)*C;G[9]=(S-ja)*C;G[10]=(1-(x+$a))*C;G[11]=0;G[12]=t.x;G[13]=t.y;G[14]=t.z;G[15]=1;return this||p};z.decompose=function(t,x,C){var G=(this||p).elements,L=JE.set(G[0],G[1],G[2]).length(),S=JE.set(G[4],G[5],G[6]).length(),V=JE.set(G[8],G[9],G[10]).length();0>this.determinant()&&(L=-L);t.x=G[12];t.y=G[13];t.z=G[14];dn.copy(this||p);t=1/L;G=1/S;var Z=1/V;dn.elements[0]*=
t;dn.elements[1]*=t;dn.elements[2]*=t;dn.elements[4]*=G;dn.elements[5]*=G;dn.elements[6]*=G;dn.elements[8]*=Z;dn.elements[9]*=Z;dn.elements[10]*=Z;x.setFromRotationMatrix(dn);C.x=L;C.y=S;C.z=V;return this||p};z.makePerspective=function(t,x,C,G,L,S){void 0===S&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");var V=(this||p).elements;V[0]=2*L/(x-t);V[4]=0;V[8]=(x+t)/(x-t);V[12]=0;V[1]=0;V[5]=2*L/(C-G);V[9]=(C+G)/(C-G);V[13]=0;V[2]=
0;V[6]=0;V[10]=-(S+L)/(S-L);V[14]=-2*S*L/(S-L);V[3]=0;V[7]=0;V[11]=-1;V[15]=0;return this||p};z.makeOrthographic=function(t,x,C,G,L,S){var V=(this||p).elements,Z=1/(x-t),ja=1/(C-G),ua=1/(S-L);V[0]=2*Z;V[4]=0;V[8]=0;V[12]=-((x+t)*Z);V[1]=0;V[5]=2*ja;V[9]=0;V[13]=-((C+G)*ja);V[2]=0;V[6]=0;V[10]=-2*ua;V[14]=-((S+L)*ua);V[3]=0;V[7]=0;V[11]=0;V[15]=1;return this||p};z.equals=function(t){var x=(this||p).elements;t=t.elements;for(var C=0;16>C;C++)if(x[C]!==t[C])return!1;return!0};z.fromArray=function(t,
x){void 0===x&&(x=0);for(var C=0;16>C;C++)(this||p).elements[C]=t[C+x];return this||p};z.toArray=function(t,x){void 0===t&&(t=[]);void 0===x&&(x=0);var C=(this||p).elements;t[x]=C[0];t[x+1]=C[1];t[x+2]=C[2];t[x+3]=C[3];t[x+4]=C[4];t[x+5]=C[5];t[x+6]=C[6];t[x+7]=C[7];t[x+8]=C[8];t[x+9]=C[9];t[x+10]=C[10];t[x+11]=C[11];t[x+12]=C[12];t[x+13]=C[13];t[x+14]=C[14];t[x+15]=C[15];return t};return u}(),JE=new qc,dn=new fj,ura=new qc(0,0,0),vra=new qc(1,1,1),sz=new qc,EO=new qc,Vp=new qc,ON=function(){function u(t,
x,C,G){void 0===t&&(t=0);void 0===x&&(x=0);void 0===C&&(C=0);void 0===G&&(G=u.DefaultOrder);Object.defineProperty(this||p,"isEuler",{value:!0});(this||p)._x=t;(this||p)._y=x;(this||p)._z=C;(this||p)._order=G}var z=u.prototype;z.set=function(t,x,C,G){(this||p)._x=t;(this||p)._y=x;(this||p)._z=C;(this||p)._order=G||(this||p)._order;this._onChangeCallback();return this||p};z.clone=function(){return new (this||p).constructor((this||p)._x,(this||p)._y,(this||p)._z,(this||p)._order)};z.copy=function(t){(this||
p)._x=t._x;(this||p)._y=t._y;(this||p)._z=t._z;(this||p)._order=t._order;this._onChangeCallback();return this||p};z.setFromRotationMatrix=function(t,x,C){var G=ai.clamp,L=t.elements;t=L[0];var S=L[4],V=L[8],Z=L[1],ja=L[5],ua=L[9],Ca=L[2],bb=L[6];L=L[10];x=x||(this||p)._order;switch(x){case "XYZ":(this||p)._y=Math.asin(G(V,-1,1));.9999999>Math.abs(V)?((this||p)._x=Math.atan2(-ua,L),(this||p)._z=Math.atan2(-S,t)):((this||p)._x=Math.atan2(bb,ja),(this||p)._z=0);break;case "YXZ":(this||p)._x=Math.asin(-G(ua,
-1,1));.9999999>Math.abs(ua)?((this||p)._y=Math.atan2(V,L),(this||p)._z=Math.atan2(Z,ja)):((this||p)._y=Math.atan2(-Ca,t),(this||p)._z=0);break;case "ZXY":(this||p)._x=Math.asin(G(bb,-1,1));.9999999>Math.abs(bb)?((this||p)._y=Math.atan2(-Ca,L),(this||p)._z=Math.atan2(-S,ja)):((this||p)._y=0,(this||p)._z=Math.atan2(Z,t));break;case "ZYX":(this||p)._y=Math.asin(-G(Ca,-1,1));.9999999>Math.abs(Ca)?((this||p)._x=Math.atan2(bb,L),(this||p)._z=Math.atan2(Z,t)):((this||p)._x=0,(this||p)._z=Math.atan2(-S,
ja));break;case "YZX":(this||p)._z=Math.asin(G(Z,-1,1));.9999999>Math.abs(Z)?((this||p)._x=Math.atan2(-ua,ja),(this||p)._y=Math.atan2(-Ca,t)):((this||p)._x=0,(this||p)._y=Math.atan2(V,L));break;case "XZY":(this||p)._z=Math.asin(-G(S,-1,1));.9999999>Math.abs(S)?((this||p)._x=Math.atan2(bb,ja),(this||p)._y=Math.atan2(V,t)):((this||p)._x=Math.atan2(-ua,L),(this||p)._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+x)}(this||p)._order=x;!1!==C&&this._onChangeCallback();
return this||p};z.setFromQuaternion=function(t,x,C){z$.makeRotationFromQuaternion(t);return this.setFromRotationMatrix(z$,x,C)};z.setFromVector3=function(t,x){return this.set(t.x,t.y,t.z,x||(this||p)._order)};z.reorder=function(t){A$.setFromEuler(this||p);return this.setFromQuaternion(A$,t)};z.equals=function(t){return t._x===(this||p)._x&&t._y===(this||p)._y&&t._z===(this||p)._z&&t._order===(this||p)._order};z.fromArray=function(t){(this||p)._x=t[0];(this||p)._y=t[1];(this||p)._z=t[2];void 0!==t[3]&&
((this||p)._order=t[3]);this._onChangeCallback();return this||p};z.toArray=function(t,x){void 0===t&&(t=[]);void 0===x&&(x=0);t[x]=(this||p)._x;t[x+1]=(this||p)._y;t[x+2]=(this||p)._z;t[x+3]=(this||p)._order;return t};z.toVector3=function(t){return t?t.set((this||p)._x,(this||p)._y,(this||p)._z):new qc((this||p)._x,(this||p)._y,(this||p)._z)};z._onChange=function(t){(this||p)._onChangeCallback=t;return this||p};z._onChangeCallback=function(){};a(u,[{key:"x",get:function(){return(this||p)._x},set:function(t){(this||
p)._x=t;this._onChangeCallback()}},{key:"y",get:function(){return(this||p)._y},set:function(t){(this||p)._y=t;this._onChangeCallback()}},{key:"z",get:function(){return(this||p)._z},set:function(t){(this||p)._z=t;this._onChangeCallback()}},{key:"order",get:function(){return(this||p)._order},set:function(t){(this||p)._order=t;this._onChangeCallback()}}]);return u}();ON.DefaultOrder="XYZ";ON.RotationOrders="XYZ YZX ZXY XZY YXZ ZYX".split(" ");var z$=new fj,A$=new hp,UV=function(){function u(){(this||
p).mask=1}var z=u.prototype;z.set=function(t){(this||p).mask=1<<t|0};z.enable=function(t){(this||p).mask=(this||p).mask|1<<t|0};z.enableAll=function(){(this||p).mask=-1};z.toggle=function(t){(this||p).mask^=1<<t|0};z.disable=function(t){(this||p).mask&=~(1<<t|0)};z.disableAll=function(){(this||p).mask=0};z.test=function(t){return 0!==((this||p).mask&t.mask)};return u}(),bra=0,B$=new qc,KE=new hp,ix=new fj,FO=new qc,sI=new qc,wra=new qc,xra=new hp,C$=new qc(1,0,0),D$=new qc(0,1,0),E$=new qc(0,0,1),
yra={type:"added"},zra={type:"removed"};E.DefaultUp=new qc(0,1,0);E.DefaultMatrixAutoUpdate=!0;E.prototype=Object.assign(Object.create(e.prototype),{constructor:E,isObject3D:!0,onBeforeRender:function(){},onAfterRender:function(){},applyMatrix4:function(u){(this||p).matrixAutoUpdate&&this.updateMatrix();(this||p).matrix.premultiply(u);(this||p).matrix.decompose((this||p).position,(this||p).quaternion,(this||p).scale)},applyQuaternion:function(u){(this||p).quaternion.premultiply(u);return this||p},
setRotationFromAxisAngle:function(u,z){(this||p).quaternion.setFromAxisAngle(u,z)},setRotationFromEuler:function(u){(this||p).quaternion.setFromEuler(u,!0)},setRotationFromMatrix:function(u){(this||p).quaternion.setFromRotationMatrix(u)},setRotationFromQuaternion:function(u){(this||p).quaternion.copy(u)},rotateOnAxis:function(u,z){KE.setFromAxisAngle(u,z);(this||p).quaternion.multiply(KE);return this||p},rotateOnWorldAxis:function(u,z){KE.setFromAxisAngle(u,z);(this||p).quaternion.premultiply(KE);
return this||p},rotateX:function(u){return this.rotateOnAxis(C$,u)},rotateY:function(u){return this.rotateOnAxis(D$,u)},rotateZ:function(u){return this.rotateOnAxis(E$,u)},translateOnAxis:function(u,z){B$.copy(u).applyQuaternion((this||p).quaternion);(this||p).position.add(B$.multiplyScalar(z));return this||p},translateX:function(u){return this.translateOnAxis(C$,u)},translateY:function(u){return this.translateOnAxis(D$,u)},translateZ:function(u){return this.translateOnAxis(E$,u)},localToWorld:function(u){return u.applyMatrix4((this||
p).matrixWorld)},worldToLocal:function(u){return u.applyMatrix4(ix.getInverse((this||p).matrixWorld))},lookAt:function(u,z,t){u.isVector3?FO.copy(u):FO.set(u,z,t);u=(this||p).parent;this.updateWorldMatrix(!0,!1);sI.setFromMatrixPosition((this||p).matrixWorld);(this||p).isCamera||(this||p).isLight?ix.lookAt(sI,FO,(this||p).up):ix.lookAt(FO,sI,(this||p).up);(this||p).quaternion.setFromRotationMatrix(ix);u&&(ix.extractRotation(u.matrixWorld),KE.setFromRotationMatrix(ix),(this||p).quaternion.premultiply(KE.inverse()))},
add:function(u){if(1<arguments.length){for(var z=0;z<arguments.length;z++)this.add(arguments[z]);return this||p}if(u===(this||p))return console.error("THREE.Object3D.add: object can't be added as a child of itself.",u),this||p;u&&u.isObject3D?(null!==u.parent&&u.parent.remove(u),u.parent=this||p,(this||p).children.push(u),u.dispatchEvent(yra)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",u);return this||p},remove:function(u){if(1<arguments.length){for(var z=0;z<arguments.length;z++)this.remove(arguments[z]);
return this||p}z=(this||p).children.indexOf(u);-1!==z&&(u.parent=null,(this||p).children.splice(z,1),u.dispatchEvent(zra));return this||p},attach:function(u){this.updateWorldMatrix(!0,!1);ix.getInverse((this||p).matrixWorld);null!==u.parent&&(u.parent.updateWorldMatrix(!0,!1),ix.multiply(u.parent.matrixWorld));u.applyMatrix4(ix);u.updateWorldMatrix(!1,!1);this.add(u);return this||p},getObjectById:function(u){return this.getObjectByProperty("id",u)},getObjectByName:function(u){return this.getObjectByProperty("name",
u)},getObjectByProperty:function(u,z){if((this||p)[u]===z)return this||p;for(var t=0,x=(this||p).children.length;t<x;t++){var C=(this||p).children[t].getObjectByProperty(u,z);if(void 0!==C)return C}},getWorldPosition:function(u){void 0===u&&(console.warn("THREE.Object3D: .getWorldPosition() target is now required"),u=new qc);this.updateWorldMatrix(!0,!1);return u.setFromMatrixPosition((this||p).matrixWorld)},getWorldQuaternion:function(u){void 0===u&&(console.warn("THREE.Object3D: .getWorldQuaternion() target is now required"),
u=new hp);this.updateWorldMatrix(!0,!1);(this||p).matrixWorld.decompose(sI,u,wra);return u},getWorldScale:function(u){void 0===u&&(console.warn("THREE.Object3D: .getWorldScale() target is now required"),u=new qc);this.updateWorldMatrix(!0,!1);(this||p).matrixWorld.decompose(sI,xra,u);return u},getWorldDirection:function(u){void 0===u&&(console.warn("THREE.Object3D: .getWorldDirection() target is now required"),u=new qc);this.updateWorldMatrix(!0,!1);var z=(this||p).matrixWorld.elements;return u.set(z[8],
z[9],z[10]).normalize()},raycast:function(){},traverse:function(u){u(this||p);for(var z=(this||p).children,t=0,x=z.length;t<x;t++)z[t].traverse(u)},traverseVisible:function(u){if(!1!==(this||p).visible){u(this||p);for(var z=(this||p).children,t=0,x=z.length;t<x;t++)z[t].traverseVisible(u)}},traverseAncestors:function(u){var z=(this||p).parent;null!==z&&(u(z),z.traverseAncestors(u))},updateMatrix:function(){(this||p).matrix.compose((this||p).position,(this||p).quaternion,(this||p).scale);(this||p).matrixWorldNeedsUpdate=
!0},updateMatrixWorld:function(u){(this||p).matrixAutoUpdate&&this.updateMatrix();if((this||p).matrixWorldNeedsUpdate||u)null===(this||p).parent?(this||p).matrixWorld.copy((this||p).matrix):(this||p).matrixWorld.multiplyMatrices((this||p).parent.matrixWorld,(this||p).matrix),(this||p).matrixWorldNeedsUpdate=!1,u=!0;for(var z=(this||p).children,t=0,x=z.length;t<x;t++)z[t].updateMatrixWorld(u)},updateWorldMatrix:function(u,z){var t=(this||p).parent;!0===u&&null!==t&&t.updateWorldMatrix(!0,!1);(this||
p).matrixAutoUpdate&&this.updateMatrix();null===(this||p).parent?(this||p).matrixWorld.copy((this||p).matrix):(this||p).matrixWorld.multiplyMatrices((this||p).parent.matrixWorld,(this||p).matrix);if(!0===z)for(u=(this||p).children,z=0,t=u.length;z<t;z++)u[z].updateWorldMatrix(!1,!0)},toJSON:function(u){function z(ja,ua){void 0===ja[ua.uuid]&&(ja[ua.uuid]=ua.toJSON(u));return ua.uuid}function t(ja){var ua=[],Ca;for(Ca in ja){var bb=ja[Ca];delete bb.metadata;ua.push(bb)}return ua}var x=void 0===u||
"string"===typeof u,C={};x&&(u={geometries:{},materials:{},textures:{},images:{},shapes:{}},C.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});var G={};G.uuid=(this||p).uuid;G.type=(this||p).type;""!==(this||p).name&&(G.name=(this||p).name);!0===(this||p).castShadow&&(G.castShadow=!0);!0===(this||p).receiveShadow&&(G.receiveShadow=!0);!1===(this||p).visible&&(G.visible=!1);!1===(this||p).frustumCulled&&(G.frustumCulled=!1);0!==(this||p).renderOrder&&(G.renderOrder=(this||p).renderOrder);
"{}"!==JSON.stringify((this||p).userData)&&(G.userData=(this||p).userData);G.layers=(this||p).layers.mask;G.matrix=(this||p).matrix.toArray();!1===(this||p).matrixAutoUpdate&&(G.matrixAutoUpdate=!1);(this||p).isInstancedMesh&&(G.type="InstancedMesh",G.count=(this||p).count,G.instanceMatrix=(this||p).instanceMatrix.toJSON());if((this||p).isMesh||(this||p).isLine||(this||p).isPoints){G.geometry=z(u.geometries,(this||p).geometry);var L=(this||p).geometry.parameters;if(void 0!==L&&void 0!==L.shapes)if(L=
L.shapes,Array.isArray(L))for(var S=0,V=L.length;S<V;S++)z(u.shapes,L[S]);else z(u.shapes,L)}if(void 0!==(this||p).material)if(Array.isArray((this||p).material)){L=[];S=0;for(V=(this||p).material.length;S<V;S++)L.push(z(u.materials,(this||p).material[S]));G.material=L}else G.material=z(u.materials,(this||p).material);if(0<(this||p).children.length)for(G.children=[],L=0;L<(this||p).children.length;L++)G.children.push((this||p).children[L].toJSON(u).object);if(x){x=t(u.geometries);L=t(u.materials);
S=t(u.textures);V=t(u.images);var Z=t(u.shapes);0<x.length&&(C.geometries=x);0<L.length&&(C.materials=L);0<S.length&&(C.textures=S);0<V.length&&(C.images=V);0<Z.length&&(C.shapes=Z)}C.object=G;return C},clone:function(u){return(new (this||p).constructor).copy(this||p,u)},copy:function(u,z){void 0===z&&(z=!0);(this||p).name=u.name;(this||p).up.copy(u.up);(this||p).position.copy(u.position);(this||p).rotation.order=u.rotation.order;(this||p).quaternion.copy(u.quaternion);(this||p).scale.copy(u.scale);
(this||p).matrix.copy(u.matrix);(this||p).matrixWorld.copy(u.matrixWorld);(this||p).matrixAutoUpdate=u.matrixAutoUpdate;(this||p).matrixWorldNeedsUpdate=u.matrixWorldNeedsUpdate;(this||p).layers.mask=u.layers.mask;(this||p).visible=u.visible;(this||p).castShadow=u.castShadow;(this||p).receiveShadow=u.receiveShadow;(this||p).frustumCulled=u.frustumCulled;(this||p).renderOrder=u.renderOrder;(this||p).userData=JSON.parse(JSON.stringify(u.userData));if(!0===z)for(z=0;z<u.children.length;z++)this.add(u.children[z].clone());
return this||p}});var KW=new qc,Ara=new qc,Bra=new Tp,Iv=function(){function u(t,x){Object.defineProperty(this||p,"isPlane",{value:!0});(this||p).normal=void 0!==t?t:new qc(1,0,0);(this||p).constant=void 0!==x?x:0}var z=u.prototype;z.set=function(t,x){(this||p).normal.copy(t);(this||p).constant=x;return this||p};z.setComponents=function(t,x,C,G){(this||p).normal.set(t,x,C);(this||p).constant=G;return this||p};z.setFromNormalAndCoplanarPoint=function(t,x){(this||p).normal.copy(t);(this||p).constant=
-x.dot((this||p).normal);return this||p};z.setFromCoplanarPoints=function(t,x,C){x=KW.subVectors(C,x).cross(Ara.subVectors(t,x)).normalize();this.setFromNormalAndCoplanarPoint(x,t);return this||p};z.clone=function(){return(new (this||p).constructor).copy(this||p)};z.copy=function(t){(this||p).normal.copy(t.normal);(this||p).constant=t.constant;return this||p};z.normalize=function(){var t=1/(this||p).normal.length();(this||p).normal.multiplyScalar(t);(this||p).constant*=t;return this||p};z.negate=
function(){(this||p).constant*=-1;(this||p).normal.negate();return this||p};z.distanceToPoint=function(t){return(this||p).normal.dot(t)+(this||p).constant};z.distanceToSphere=function(t){return this.distanceToPoint(t.center)-t.radius};z.projectPoint=function(t,x){void 0===x&&(console.warn("THREE.Plane: .projectPoint() target is now required"),x=new qc);return x.copy((this||p).normal).multiplyScalar(-this.distanceToPoint(t)).add(t)};z.intersectLine=function(t,x){void 0===x&&(console.warn("THREE.Plane: .intersectLine() target is now required"),
x=new qc);var C=t.delta(KW),G=(this||p).normal.dot(C);if(0===G){if(0===this.distanceToPoint(t.start))return x.copy(t.start)}else if(G=-(t.start.dot((this||p).normal)+(this||p).constant)/G,!(0>G||1<G))return x.copy(C).multiplyScalar(G).add(t.start)};z.intersectsLine=function(t){var x=this.distanceToPoint(t.start);t=this.distanceToPoint(t.end);return 0>x&&0<t||0>t&&0<x};z.intersectsBox=function(t){return t.intersectsPlane(this||p)};z.intersectsSphere=function(t){return t.intersectsPlane(this||p)};z.coplanarPoint=
function(t){void 0===t&&(console.warn("THREE.Plane: .coplanarPoint() target is now required"),t=new qc);return t.copy((this||p).normal).multiplyScalar(-(this||p).constant)};z.applyMatrix4=function(t,x){x=x||Bra.getNormalMatrix(t);t=this.coplanarPoint(KW).applyMatrix4(t);x=(this||p).normal.applyMatrix3(x).normalize();(this||p).constant=-t.dot(x);return this||p};z.translate=function(t){(this||p).constant-=t.dot((this||p).normal);return this||p};z.equals=function(t){return t.normal.equals((this||p).normal)&&
t.constant===(this||p).constant};return u}(),fu=new qc,jx=new qc,LW=new qc,kx=new qc,LE=new qc,ME=new qc,F$=new qc,MW=new qc,NW=new qc,OW=new qc,Xt=function(){function u(t,x,C){(this||p).a=void 0!==t?t:new qc;(this||p).b=void 0!==x?x:new qc;(this||p).c=void 0!==C?C:new qc}u.getNormal=function(t,x,C,G){void 0===G&&(console.warn("THREE.Triangle: .getNormal() target is now required"),G=new qc);G.subVectors(C,x);fu.subVectors(t,x);G.cross(fu);t=G.lengthSq();return 0<t?G.multiplyScalar(1/Math.sqrt(t)):
G.set(0,0,0)};u.getBarycoord=function(t,x,C,G,L){fu.subVectors(G,x);jx.subVectors(C,x);LW.subVectors(t,x);t=fu.dot(fu);x=fu.dot(jx);C=fu.dot(LW);var S=jx.dot(jx);G=jx.dot(LW);var V=t*S-x*x;void 0===L&&(console.warn("THREE.Triangle: .getBarycoord() target is now required"),L=new qc);if(0===V)return L.set(-2,-1,-1);V=1/V;S=(S*C-x*G)*V;t=(t*G-x*C)*V;return L.set(1-S-t,t,S)};u.containsPoint=function(t,x,C,G){this.getBarycoord(t,x,C,G,kx);return 0<=kx.x&&0<=kx.y&&1>=kx.x+kx.y};u.getUV=function(t,x,C,G,
L,S,V,Z){this.getBarycoord(t,x,C,G,kx);Z.set(0,0);Z.addScaledVector(L,kx.x);Z.addScaledVector(S,kx.y);Z.addScaledVector(V,kx.z);return Z};u.isFrontFacing=function(t,x,C,G){fu.subVectors(C,x);jx.subVectors(t,x);return 0>fu.cross(jx).dot(G)?!0:!1};var z=u.prototype;z.set=function(t,x,C){(this||p).a.copy(t);(this||p).b.copy(x);(this||p).c.copy(C);return this||p};z.setFromPointsAndIndices=function(t,x,C,G){(this||p).a.copy(t[x]);(this||p).b.copy(t[C]);(this||p).c.copy(t[G]);return this||p};z.clone=function(){return(new (this||
p).constructor).copy(this||p)};z.copy=function(t){(this||p).a.copy(t.a);(this||p).b.copy(t.b);(this||p).c.copy(t.c);return this||p};z.getArea=function(){fu.subVectors((this||p).c,(this||p).b);jx.subVectors((this||p).a,(this||p).b);return.5*fu.cross(jx).length()};z.getMidpoint=function(t){void 0===t&&(console.warn("THREE.Triangle: .getMidpoint() target is now required"),t=new qc);return t.addVectors((this||p).a,(this||p).b).add((this||p).c).multiplyScalar(1/3)};z.getNormal=function(t){return u.getNormal((this||
p).a,(this||p).b,(this||p).c,t)};z.getPlane=function(t){void 0===t&&(console.warn("THREE.Triangle: .getPlane() target is now required"),t=new Iv);return t.setFromCoplanarPoints((this||p).a,(this||p).b,(this||p).c)};z.getBarycoord=function(t,x){return u.getBarycoord(t,(this||p).a,(this||p).b,(this||p).c,x)};z.getUV=function(t,x,C,G,L){return u.getUV(t,(this||p).a,(this||p).b,(this||p).c,x,C,G,L)};z.containsPoint=function(t){return u.containsPoint(t,(this||p).a,(this||p).b,(this||p).c)};z.isFrontFacing=
function(t){return u.isFrontFacing((this||p).a,(this||p).b,(this||p).c,t)};z.intersectsBox=function(t){return t.intersectsTriangle(this||p)};z.closestPointToPoint=function(t,x){void 0===x&&(console.warn("THREE.Triangle: .closestPointToPoint() target is now required"),x=new qc);var C=(this||p).a,G=(this||p).b,L=(this||p).c;LE.subVectors(G,C);ME.subVectors(L,C);MW.subVectors(t,C);var S=LE.dot(MW),V=ME.dot(MW);if(0>=S&&0>=V)return x.copy(C);NW.subVectors(t,G);var Z=LE.dot(NW),ja=ME.dot(NW);if(0<=Z&&
ja<=Z)return x.copy(G);var ua=S*ja-Z*V;if(0>=ua&&0<=S&&0>=Z)return G=S/(S-Z),x.copy(C).addScaledVector(LE,G);OW.subVectors(t,L);t=LE.dot(OW);var Ca=ME.dot(OW);if(0<=Ca&&t<=Ca)return x.copy(L);S=t*V-S*Ca;if(0>=S&&0<=V&&0>=Ca)return ua=V/(V-Ca),x.copy(C).addScaledVector(ME,ua);V=Z*Ca-t*ja;if(0>=V&&0<=ja-Z&&0<=t-Ca)return F$.subVectors(L,G),ua=(ja-Z)/(ja-Z+(t-Ca)),x.copy(G).addScaledVector(F$,ua);L=1/(V+S+ua);G=S*L;ua*=L;return x.copy(C).addScaledVector(LE,G).addScaledVector(ME,ua)};z.equals=function(t){return t.a.equals((this||
p).a)&&t.b.equals((this||p).b)&&t.c.equals((this||p).c)};return u}(),G$={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,
darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,
gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,
lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,
orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,
steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Iq={h:0,s:0,l:0},GO={h:0,s:0,l:0},tg=function(){function u(t,x,C){Object.defineProperty(this||p,"isColor",{value:!0});return void 0===x&&void 0===C?this.set(t):this.setRGB(t,x,C)}var z=u.prototype;z.set=function(t){t&&t.isColor?this.copy(t):"number"===typeof t?this.setHex(t):"string"===typeof t&&this.setStyle(t);
return this||p};z.setScalar=function(t){(this||p).r=t;(this||p).g=t;(this||p).b=t;return this||p};z.setHex=function(t){t=Math.floor(t);(this||p).r=(t>>16&255)/255;(this||p).g=(t>>8&255)/255;(this||p).b=(t&255)/255;return this||p};z.setRGB=function(t,x,C){(this||p).r=t;(this||p).g=x;(this||p).b=C;return this||p};z.setHSL=function(t,x,C){t=ai.euclideanModulo(t,1);x=ai.clamp(x,0,1);C=ai.clamp(C,0,1);0===x?(this||p).r=(this||p).g=(this||p).b=C:(x=.5>=C?C*(1+x):C+x-C*x,C=2*C-x,(this||p).r=F(C,x,t+1/3),
(this||p).g=F(C,x,t),(this||p).b=F(C,x,t-1/3));return this||p};z.setStyle=function(t){function x(V){void 0!==V&&1>parseFloat(V)&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}var C;if(C=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(t)){var G=C[2];switch(C[1]){case "rgb":case "rgba":if(C=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(G))return(this||p).r=Math.min(255,parseInt(C[1],10))/255,(this||p).g=Math.min(255,parseInt(C[2],10))/255,(this||p).b=Math.min(255,
parseInt(C[3],10))/255,x(C[5]),this||p;if(C=/^(\d+)%\s*,\s*(\d+)%\s*,\s*(\d+)%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(G))return(this||p).r=Math.min(100,parseInt(C[1],10))/100,(this||p).g=Math.min(100,parseInt(C[2],10))/100,(this||p).b=Math.min(100,parseInt(C[3],10))/100,x(C[5]),this||p;break;case "hsl":case "hsla":if(C=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)%\s*,\s*(\d+)%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(G)){G=parseFloat(C[1])/360;var L=parseInt(C[2],10)/100,S=parseInt(C[3],10)/100;x(C[5]);return this.setHSL(G,
L,S)}}}else if(C=/^#([A-Fa-f0-9]+)$/.exec(t)){C=C[1];G=C.length;if(3===G)return(this||p).r=parseInt(C.charAt(0)+C.charAt(0),16)/255,(this||p).g=parseInt(C.charAt(1)+C.charAt(1),16)/255,(this||p).b=parseInt(C.charAt(2)+C.charAt(2),16)/255,this||p;if(6===G)return(this||p).r=parseInt(C.charAt(0)+C.charAt(1),16)/255,(this||p).g=parseInt(C.charAt(2)+C.charAt(3),16)/255,(this||p).b=parseInt(C.charAt(4)+C.charAt(5),16)/255,this||p}return t&&0<t.length?this.setColorName(t):this||p};z.setColorName=function(t){var x=
G$[t];void 0!==x?this.setHex(x):console.warn("THREE.Color: Unknown color "+t);return this||p};z.clone=function(){return new (this||p).constructor((this||p).r,(this||p).g,(this||p).b)};z.copy=function(t){(this||p).r=t.r;(this||p).g=t.g;(this||p).b=t.b;return this||p};z.copyGammaToLinear=function(t,x){void 0===x&&(x=2);(this||p).r=Math.pow(t.r,x);(this||p).g=Math.pow(t.g,x);(this||p).b=Math.pow(t.b,x);return this||p};z.copyLinearToGamma=function(t,x){void 0===x&&(x=2);x=0<x?1/x:1;(this||p).r=Math.pow(t.r,
x);(this||p).g=Math.pow(t.g,x);(this||p).b=Math.pow(t.b,x);return this||p};z.convertGammaToLinear=function(t){this.copyGammaToLinear(this||p,t);return this||p};z.convertLinearToGamma=function(t){this.copyLinearToGamma(this||p,t);return this||p};z.copySRGBToLinear=function(t){(this||p).r=H(t.r);(this||p).g=H(t.g);(this||p).b=H(t.b);return this||p};z.copyLinearToSRGB=function(t){(this||p).r=I(t.r);(this||p).g=I(t.g);(this||p).b=I(t.b);return this||p};z.convertSRGBToLinear=function(){this.copySRGBToLinear(this||
p);return this||p};z.convertLinearToSRGB=function(){this.copyLinearToSRGB(this||p);return this||p};z.getHex=function(){return 255*(this||p).r<<16^255*(this||p).g<<8^255*(this||p).b<<0};z.getHexString=function(){return("000000"+this.getHex().toString(16)).slice(-6)};z.getHSL=function(t){void 0===t&&(console.warn("THREE.Color: .getHSL() target is now required"),t={h:0,s:0,l:0});var x=(this||p).r,C=(this||p).g,G=(this||p).b,L=Math.max(x,C,G),S=Math.min(x,C,G),V,Z=(S+L)/2;if(S===L)S=V=0;else{var ja=L-
S;S=.5>=Z?ja/(L+S):ja/(2-L-S);switch(L){case x:V=(C-G)/ja+(C<G?6:0);break;case C:V=(G-x)/ja+2;break;case G:V=(x-C)/ja+4}V/=6}t.h=V;t.s=S;t.l=Z;return t};z.getStyle=function(){return"rgb("+(255*(this||p).r|0)+","+(255*(this||p).g|0)+","+(255*(this||p).b|0)+")"};z.offsetHSL=function(t,x,C){this.getHSL(Iq);Iq.h+=t;Iq.s+=x;Iq.l+=C;this.setHSL(Iq.h,Iq.s,Iq.l);return this||p};z.add=function(t){(this||p).r+=t.r;(this||p).g+=t.g;(this||p).b+=t.b;return this||p};z.addColors=function(t,x){(this||p).r=t.r+x.r;
(this||p).g=t.g+x.g;(this||p).b=t.b+x.b;return this||p};z.addScalar=function(t){(this||p).r+=t;(this||p).g+=t;(this||p).b+=t;return this||p};z.sub=function(t){(this||p).r=Math.max(0,(this||p).r-t.r);(this||p).g=Math.max(0,(this||p).g-t.g);(this||p).b=Math.max(0,(this||p).b-t.b);return this||p};z.multiply=function(t){(this||p).r*=t.r;(this||p).g*=t.g;(this||p).b*=t.b;return this||p};z.multiplyScalar=function(t){(this||p).r*=t;(this||p).g*=t;(this||p).b*=t;return this||p};z.lerp=function(t,x){(this||
p).r+=(t.r-(this||p).r)*x;(this||p).g+=(t.g-(this||p).g)*x;(this||p).b+=(t.b-(this||p).b)*x;return this||p};z.lerpHSL=function(t,x){this.getHSL(Iq);t.getHSL(GO);t=ai.lerp(Iq.h,GO.h,x);var C=ai.lerp(Iq.s,GO.s,x);x=ai.lerp(Iq.l,GO.l,x);this.setHSL(t,C,x);return this||p};z.equals=function(t){return t.r===(this||p).r&&t.g===(this||p).g&&t.b===(this||p).b};z.fromArray=function(t,x){void 0===x&&(x=0);(this||p).r=t[x];(this||p).g=t[x+1];(this||p).b=t[x+2];return this||p};z.toArray=function(t,x){void 0===
t&&(t=[]);void 0===x&&(x=0);t[x]=(this||p).r;t[x+1]=(this||p).g;t[x+2]=(this||p).b;return t};z.fromBufferAttribute=function(t,x){(this||p).r=t.getX(x);(this||p).g=t.getY(x);(this||p).b=t.getZ(x);!0===t.normalized&&((this||p).r/=255,(this||p).g/=255,(this||p).b/=255);return this||p};z.toJSON=function(){return this.getHex()};return u}();tg.NAMES=G$;tg.prototype.r=1;tg.prototype.g=1;tg.prototype.b=1;var VH=function(){function u(t,x,C,G,L,S){(this||p).a=t;(this||p).b=x;(this||p).c=C;(this||p).normal=
G&&G.isVector3?G:new qc;(this||p).vertexNormals=Array.isArray(G)?G:[];(this||p).color=L&&L.isColor?L:new tg;(this||p).vertexColors=Array.isArray(L)?L:[];(this||p).materialIndex=void 0!==S?S:0}var z=u.prototype;z.clone=function(){return(new (this||p).constructor).copy(this||p)};z.copy=function(t){(this||p).a=t.a;(this||p).b=t.b;(this||p).c=t.c;(this||p).normal.copy(t.normal);(this||p).color.copy(t.color);(this||p).materialIndex=t.materialIndex;for(var x=0,C=t.vertexNormals.length;x<C;x++)(this||p).vertexNormals[x]=
t.vertexNormals[x].clone();x=0;for(C=t.vertexColors.length;x<C;x++)(this||p).vertexColors[x]=t.vertexColors[x].clone();return this||p};return u}(),cra=0;M.prototype=Object.assign(Object.create(e.prototype),{constructor:M,isMaterial:!0,onBeforeCompile:function(){},customProgramCacheKey:function(){return(this||p).onBeforeCompile.toString()},setValues:function(u){if(void 0!==u)for(var z in u){var t=u[z];if(void 0===t)console.warn("THREE.Material: '"+z+"' parameter is undefined.");else if("shading"===
z)console.warn("THREE."+(this||p).type+": .shading has been removed. Use the boolean .flatShading instead."),(this||p).flatShading=1===t?!0:!1;else{var x=(this||p)[z];void 0===x?console.warn("THREE."+(this||p).type+": '"+z+"' is not a property of this material."):x&&x.isColor?x.set(t):x&&x.isVector3&&t&&t.isVector3?x.copy(t):(this||p)[z]=t}}},toJSON:function(u){function z(C){var G=[],L;for(L in C){var S=C[L];delete S.metadata;G.push(S)}return G}var t=void 0===u||"string"===typeof u;t&&(u={textures:{},
images:{}});var x={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};x.uuid=(this||p).uuid;x.type=(this||p).type;""!==(this||p).name&&(x.name=(this||p).name);(this||p).color&&(this||p).color.isColor&&(x.color=(this||p).color.getHex());void 0!==(this||p).roughness&&(x.roughness=(this||p).roughness);void 0!==(this||p).metalness&&(x.metalness=(this||p).metalness);(this||p).sheen&&(this||p).sheen.isColor&&(x.sheen=(this||p).sheen.getHex());(this||p).emissive&&(this||p).emissive.isColor&&
(x.emissive=(this||p).emissive.getHex());(this||p).emissiveIntensity&&1!==(this||p).emissiveIntensity&&(x.emissiveIntensity=(this||p).emissiveIntensity);(this||p).specular&&(this||p).specular.isColor&&(x.specular=(this||p).specular.getHex());void 0!==(this||p).shininess&&(x.shininess=(this||p).shininess);void 0!==(this||p).clearcoat&&(x.clearcoat=(this||p).clearcoat);void 0!==(this||p).clearcoatRoughness&&(x.clearcoatRoughness=(this||p).clearcoatRoughness);(this||p).clearcoatMap&&(this||p).clearcoatMap.isTexture&&
(x.clearcoatMap=(this||p).clearcoatMap.toJSON(u).uuid);(this||p).clearcoatRoughnessMap&&(this||p).clearcoatRoughnessMap.isTexture&&(x.clearcoatRoughnessMap=(this||p).clearcoatRoughnessMap.toJSON(u).uuid);(this||p).clearcoatNormalMap&&(this||p).clearcoatNormalMap.isTexture&&(x.clearcoatNormalMap=(this||p).clearcoatNormalMap.toJSON(u).uuid,x.clearcoatNormalScale=(this||p).clearcoatNormalScale.toArray());(this||p).map&&(this||p).map.isTexture&&(x.map=(this||p).map.toJSON(u).uuid);(this||p).matcap&&(this||
p).matcap.isTexture&&(x.matcap=(this||p).matcap.toJSON(u).uuid);(this||p).alphaMap&&(this||p).alphaMap.isTexture&&(x.alphaMap=(this||p).alphaMap.toJSON(u).uuid);(this||p).lightMap&&(this||p).lightMap.isTexture&&(x.lightMap=(this||p).lightMap.toJSON(u).uuid);(this||p).aoMap&&(this||p).aoMap.isTexture&&(x.aoMap=(this||p).aoMap.toJSON(u).uuid,x.aoMapIntensity=(this||p).aoMapIntensity);(this||p).bumpMap&&(this||p).bumpMap.isTexture&&(x.bumpMap=(this||p).bumpMap.toJSON(u).uuid,x.bumpScale=(this||p).bumpScale);
(this||p).normalMap&&(this||p).normalMap.isTexture&&(x.normalMap=(this||p).normalMap.toJSON(u).uuid,x.normalMapType=(this||p).normalMapType,x.normalScale=(this||p).normalScale.toArray());(this||p).displacementMap&&(this||p).displacementMap.isTexture&&(x.displacementMap=(this||p).displacementMap.toJSON(u).uuid,x.displacementScale=(this||p).displacementScale,x.displacementBias=(this||p).displacementBias);(this||p).roughnessMap&&(this||p).roughnessMap.isTexture&&(x.roughnessMap=(this||p).roughnessMap.toJSON(u).uuid);
(this||p).metalnessMap&&(this||p).metalnessMap.isTexture&&(x.metalnessMap=(this||p).metalnessMap.toJSON(u).uuid);(this||p).emissiveMap&&(this||p).emissiveMap.isTexture&&(x.emissiveMap=(this||p).emissiveMap.toJSON(u).uuid);(this||p).specularMap&&(this||p).specularMap.isTexture&&(x.specularMap=(this||p).specularMap.toJSON(u).uuid);(this||p).envMap&&(this||p).envMap.isTexture&&(x.envMap=(this||p).envMap.toJSON(u).uuid,x.reflectivity=(this||p).reflectivity,x.refractionRatio=(this||p).refractionRatio,
void 0!==(this||p).combine&&(x.combine=(this||p).combine),void 0!==(this||p).envMapIntensity&&(x.envMapIntensity=(this||p).envMapIntensity));(this||p).gradientMap&&(this||p).gradientMap.isTexture&&(x.gradientMap=(this||p).gradientMap.toJSON(u).uuid);void 0!==(this||p).size&&(x.size=(this||p).size);void 0!==(this||p).sizeAttenuation&&(x.sizeAttenuation=(this||p).sizeAttenuation);1!==(this||p).blending&&(x.blending=(this||p).blending);!0===(this||p).flatShading&&(x.flatShading=(this||p).flatShading);
0!==(this||p).side&&(x.side=(this||p).side);(this||p).vertexColors&&(x.vertexColors=!0);1>(this||p).opacity&&(x.opacity=(this||p).opacity);!0===(this||p).transparent&&(x.transparent=(this||p).transparent);x.depthFunc=(this||p).depthFunc;x.depthTest=(this||p).depthTest;x.depthWrite=(this||p).depthWrite;x.stencilWrite=(this||p).stencilWrite;x.stencilWriteMask=(this||p).stencilWriteMask;x.stencilFunc=(this||p).stencilFunc;x.stencilRef=(this||p).stencilRef;x.stencilFuncMask=(this||p).stencilFuncMask;
x.stencilFail=(this||p).stencilFail;x.stencilZFail=(this||p).stencilZFail;x.stencilZPass=(this||p).stencilZPass;(this||p).rotation&&0!==(this||p).rotation&&(x.rotation=(this||p).rotation);!0===(this||p).polygonOffset&&(x.polygonOffset=!0);0!==(this||p).polygonOffsetFactor&&(x.polygonOffsetFactor=(this||p).polygonOffsetFactor);0!==(this||p).polygonOffsetUnits&&(x.polygonOffsetUnits=(this||p).polygonOffsetUnits);(this||p).linewidth&&1!==(this||p).linewidth&&(x.linewidth=(this||p).linewidth);void 0!==
(this||p).dashSize&&(x.dashSize=(this||p).dashSize);void 0!==(this||p).gapSize&&(x.gapSize=(this||p).gapSize);void 0!==(this||p).scale&&(x.scale=(this||p).scale);!0===(this||p).dithering&&(x.dithering=!0);0<(this||p).alphaTest&&(x.alphaTest=(this||p).alphaTest);!0===(this||p).premultipliedAlpha&&(x.premultipliedAlpha=(this||p).premultipliedAlpha);!0===(this||p).wireframe&&(x.wireframe=(this||p).wireframe);1<(this||p).wireframeLinewidth&&(x.wireframeLinewidth=(this||p).wireframeLinewidth);"round"!==
(this||p).wireframeLinecap&&(x.wireframeLinecap=(this||p).wireframeLinecap);"round"!==(this||p).wireframeLinejoin&&(x.wireframeLinejoin=(this||p).wireframeLinejoin);!0===(this||p).morphTargets&&(x.morphTargets=!0);!0===(this||p).morphNormals&&(x.morphNormals=!0);!0===(this||p).skinning&&(x.skinning=!0);!1===(this||p).visible&&(x.visible=!1);!1===(this||p).toneMapped&&(x.toneMapped=!1);"{}"!==JSON.stringify((this||p).userData)&&(x.userData=(this||p).userData);t&&(t=z(u.textures),u=z(u.images),0<t.length&&
(x.textures=t),0<u.length&&(x.images=u));return x},clone:function(){return(new (this||p).constructor).copy(this||p)},copy:function(u){(this||p).name=u.name;(this||p).fog=u.fog;(this||p).blending=u.blending;(this||p).side=u.side;(this||p).flatShading=u.flatShading;(this||p).vertexColors=u.vertexColors;(this||p).opacity=u.opacity;(this||p).transparent=u.transparent;(this||p).blendSrc=u.blendSrc;(this||p).blendDst=u.blendDst;(this||p).blendEquation=u.blendEquation;(this||p).blendSrcAlpha=u.blendSrcAlpha;
(this||p).blendDstAlpha=u.blendDstAlpha;(this||p).blendEquationAlpha=u.blendEquationAlpha;(this||p).depthFunc=u.depthFunc;(this||p).depthTest=u.depthTest;(this||p).depthWrite=u.depthWrite;(this||p).stencilWriteMask=u.stencilWriteMask;(this||p).stencilFunc=u.stencilFunc;(this||p).stencilRef=u.stencilRef;(this||p).stencilFuncMask=u.stencilFuncMask;(this||p).stencilFail=u.stencilFail;(this||p).stencilZFail=u.stencilZFail;(this||p).stencilZPass=u.stencilZPass;(this||p).stencilWrite=u.stencilWrite;var z=
u.clippingPlanes,t=null;if(null!==z){var x=z.length;t=Array(x);for(var C=0;C!==x;++C)t[C]=z[C].clone()}(this||p).clippingPlanes=t;(this||p).clipIntersection=u.clipIntersection;(this||p).clipShadows=u.clipShadows;(this||p).shadowSide=u.shadowSide;(this||p).colorWrite=u.colorWrite;(this||p).precision=u.precision;(this||p).polygonOffset=u.polygonOffset;(this||p).polygonOffsetFactor=u.polygonOffsetFactor;(this||p).polygonOffsetUnits=u.polygonOffsetUnits;(this||p).dithering=u.dithering;(this||p).alphaTest=
u.alphaTest;(this||p).premultipliedAlpha=u.premultipliedAlpha;(this||p).visible=u.visible;(this||p).toneMapped=u.toneMapped;(this||p).userData=JSON.parse(JSON.stringify(u.userData));return this||p},dispose:function(){this.dispatchEvent({type:"dispose"})}});Object.defineProperty(M.prototype,"needsUpdate",{set:function(u){!0===u&&(this||p).version++}});N.prototype=Object.create(M.prototype);N.prototype.constructor=N;N.prototype.isMeshBasicMaterial=!0;N.prototype.copy=function(u){M.prototype.copy.call(this||
p,u);(this||p).color.copy(u.color);(this||p).map=u.map;(this||p).lightMap=u.lightMap;(this||p).lightMapIntensity=u.lightMapIntensity;(this||p).aoMap=u.aoMap;(this||p).aoMapIntensity=u.aoMapIntensity;(this||p).specularMap=u.specularMap;(this||p).alphaMap=u.alphaMap;(this||p).envMap=u.envMap;(this||p).combine=u.combine;(this||p).reflectivity=u.reflectivity;(this||p).refractionRatio=u.refractionRatio;(this||p).wireframe=u.wireframe;(this||p).wireframeLinewidth=u.wireframeLinewidth;(this||p).wireframeLinecap=
u.wireframeLinecap;(this||p).wireframeLinejoin=u.wireframeLinejoin;(this||p).skinning=u.skinning;(this||p).morphTargets=u.morphTargets;return this||p};var ml=new qc,HO=new Ve;Object.defineProperty(W.prototype,"needsUpdate",{set:function(u){!0===u&&(this||p).version++}});Object.assign(W.prototype,{isBufferAttribute:!0,onUploadCallback:function(){},setUsage:function(u){(this||p).usage=u;return this||p},copy:function(u){(this||p).name=u.name;(this||p).array=new u.array.constructor(u.array);(this||p).itemSize=
u.itemSize;(this||p).count=u.count;(this||p).normalized=u.normalized;(this||p).usage=u.usage;return this||p},copyAt:function(u,z,t){u*=(this||p).itemSize;t*=z.itemSize;for(var x=0,C=(this||p).itemSize;x<C;x++)(this||p).array[u+x]=z.array[t+x];return this||p},copyArray:function(u){(this||p).array.set(u);return this||p},copyColorsArray:function(u){for(var z=(this||p).array,t=0,x=0,C=u.length;x<C;x++){var G=u[x];void 0===G&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",
x),G=new tg);z[t++]=G.r;z[t++]=G.g;z[t++]=G.b}return this||p},copyVector2sArray:function(u){for(var z=(this||p).array,t=0,x=0,C=u.length;x<C;x++){var G=u[x];void 0===G&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",x),G=new Ve);z[t++]=G.x;z[t++]=G.y}return this||p},copyVector3sArray:function(u){for(var z=(this||p).array,t=0,x=0,C=u.length;x<C;x++){var G=u[x];void 0===G&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",x),G=new qc);z[t++]=
G.x;z[t++]=G.y;z[t++]=G.z}return this||p},copyVector4sArray:function(u){for(var z=(this||p).array,t=0,x=0,C=u.length;x<C;x++){var G=u[x];void 0===G&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",x),G=new Qk);z[t++]=G.x;z[t++]=G.y;z[t++]=G.z;z[t++]=G.w}return this||p},applyMatrix3:function(u){if(2===(this||p).itemSize)for(var z=0,t=(this||p).count;z<t;z++)HO.fromBufferAttribute(this||p,z),HO.applyMatrix3(u),this.setXY(z,HO.x,HO.y);else if(3===(this||p).itemSize)for(z=
0,t=(this||p).count;z<t;z++)ml.fromBufferAttribute(this||p,z),ml.applyMatrix3(u),this.setXYZ(z,ml.x,ml.y,ml.z);return this||p},applyMatrix4:function(u){for(var z=0,t=(this||p).count;z<t;z++)ml.x=this.getX(z),ml.y=this.getY(z),ml.z=this.getZ(z),ml.applyMatrix4(u),this.setXYZ(z,ml.x,ml.y,ml.z);return this||p},applyNormalMatrix:function(u){for(var z=0,t=(this||p).count;z<t;z++)ml.x=this.getX(z),ml.y=this.getY(z),ml.z=this.getZ(z),ml.applyNormalMatrix(u),this.setXYZ(z,ml.x,ml.y,ml.z);return this||p},
transformDirection:function(u){for(var z=0,t=(this||p).count;z<t;z++)ml.x=this.getX(z),ml.y=this.getY(z),ml.z=this.getZ(z),ml.transformDirection(u),this.setXYZ(z,ml.x,ml.y,ml.z);return this||p},set:function(u,z){void 0===z&&(z=0);(this||p).array.set(u,z);return this||p},getX:function(u){return(this||p).array[u*(this||p).itemSize]},setX:function(u,z){(this||p).array[u*(this||p).itemSize]=z;return this||p},getY:function(u){return(this||p).array[u*(this||p).itemSize+1]},setY:function(u,z){(this||p).array[u*
(this||p).itemSize+1]=z;return this||p},getZ:function(u){return(this||p).array[u*(this||p).itemSize+2]},setZ:function(u,z){(this||p).array[u*(this||p).itemSize+2]=z;return this||p},getW:function(u){return(this||p).array[u*(this||p).itemSize+3]},setW:function(u,z){(this||p).array[u*(this||p).itemSize+3]=z;return this||p},setXY:function(u,z,t){u*=(this||p).itemSize;(this||p).array[u+0]=z;(this||p).array[u+1]=t;return this||p},setXYZ:function(u,z,t,x){u*=(this||p).itemSize;(this||p).array[u+0]=z;(this||
p).array[u+1]=t;(this||p).array[u+2]=x;return this||p},setXYZW:function(u,z,t,x,C){u*=(this||p).itemSize;(this||p).array[u+0]=z;(this||p).array[u+1]=t;(this||p).array[u+2]=x;(this||p).array[u+3]=C;return this||p},onUpload:function(u){(this||p).onUploadCallback=u;return this||p},clone:function(){return(new (this||p).constructor((this||p).array,(this||p).itemSize)).copy(this||p)},toJSON:function(){return{itemSize:(this||p).itemSize,type:(this||p).array.constructor.name,array:Array.prototype.slice.call((this||
p).array),normalized:(this||p).normalized}}});X.prototype=Object.create(W.prototype);X.prototype.constructor=X;ea.prototype=Object.create(W.prototype);ea.prototype.constructor=ea;Aa.prototype=Object.create(W.prototype);Aa.prototype.constructor=Aa;Ma.prototype=Object.create(W.prototype);Ma.prototype.constructor=Ma;K.prototype=Object.create(W.prototype);K.prototype.constructor=K;aa.prototype=Object.create(W.prototype);aa.prototype.constructor=aa;T.prototype=Object.create(W.prototype);T.prototype.constructor=
T;U.prototype=Object.create(W.prototype);U.prototype.constructor=U;pa.prototype=Object.create(W.prototype);pa.prototype.constructor=pa;var Cra=function(){function u(){(this||p).vertices=[];(this||p).normals=[];(this||p).colors=[];(this||p).uvs=[];(this||p).uvs2=[];(this||p).groups=[];(this||p).morphTargets={};(this||p).skinWeights=[];(this||p).skinIndices=[];(this||p).boundingBox=null;(this||p).boundingSphere=null;(this||p).verticesNeedUpdate=!1;(this||p).normalsNeedUpdate=!1;(this||p).colorsNeedUpdate=
!1;(this||p).uvsNeedUpdate=!1;(this||p).groupsNeedUpdate=!1}var z=u.prototype;z.computeGroups=function(t){var x=[],C=void 0,G=t.faces;for(t=0;t<G.length;t++){var L=G[t];if(L.materialIndex!==C){C=L.materialIndex;void 0!==S&&(S.count=3*t-S.start,x.push(S));var S={start:3*t,materialIndex:C}}}void 0!==S&&(S.count=3*t-S.start,x.push(S));(this||p).groups=x};z.fromGeometry=function(t){var x=t.faces,C=t.vertices,G=t.faceVertexUvs,L=G[0]&&0<G[0].length,S=G[1]&&0<G[1].length,V=t.morphTargets,Z=V.length;if(0<
Z){var ja=[];for(var ua=0;ua<Z;ua++)ja[ua]={name:V[ua].name,data:[]};(this||p).morphTargets.position=ja}ua=t.morphNormals;var Ca=ua.length;if(0<Ca){var bb=[];for(var $a=0;$a<Ca;$a++)bb[$a]={name:ua[$a].name,data:[]};(this||p).morphTargets.normal=bb}$a=t.skinIndices;var ub=t.skinWeights,pb=$a.length===C.length,Rc=ub.length===C.length;0<C.length&&0===x.length&&console.error("THREE.DirectGeometry: Faceless geometries are not supported.");for(var xc=0;xc<x.length;xc++){var kd=x[xc];(this||p).vertices.push(C[kd.a],
C[kd.b],C[kd.c]);var Ec=kd.vertexNormals;3===Ec.length?(this||p).normals.push(Ec[0],Ec[1],Ec[2]):(Ec=kd.normal,(this||p).normals.push(Ec,Ec,Ec));Ec=kd.vertexColors;3===Ec.length?(this||p).colors.push(Ec[0],Ec[1],Ec[2]):(Ec=kd.color,(this||p).colors.push(Ec,Ec,Ec));!0===L&&(Ec=G[0][xc],void 0!==Ec?(this||p).uvs.push(Ec[0],Ec[1],Ec[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",xc),(this||p).uvs.push(new Ve,new Ve,new Ve)));!0===S&&(Ec=G[1][xc],void 0!==Ec?(this||p).uvs2.push(Ec[0],
Ec[1],Ec[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",xc),(this||p).uvs2.push(new Ve,new Ve,new Ve)));for(Ec=0;Ec<Z;Ec++){var nd=V[Ec].vertices;ja[Ec].data.push(nd[kd.a],nd[kd.b],nd[kd.c])}for(Ec=0;Ec<Ca;Ec++)nd=ua[Ec].vertexNormals[xc],bb[Ec].data.push(nd.a,nd.b,nd.c);pb&&(this||p).skinIndices.push($a[kd.a],$a[kd.b],$a[kd.c]);Rc&&(this||p).skinWeights.push(ub[kd.a],ub[kd.b],ub[kd.c])}this.computeGroups(t);(this||p).verticesNeedUpdate=t.verticesNeedUpdate;(this||p).normalsNeedUpdate=
t.normalsNeedUpdate;(this||p).colorsNeedUpdate=t.colorsNeedUpdate;(this||p).uvsNeedUpdate=t.uvsNeedUpdate;(this||p).groupsNeedUpdate=t.groupsNeedUpdate;null!==t.boundingSphere&&((this||p).boundingSphere=t.boundingSphere.clone());null!==t.boundingBox&&((this||p).boundingBox=t.boundingBox.clone());return this||p};return u}(),dra=1,Pv=new fj,PW=new E,NE=new qc,Cr=new Ov,tI=new Ov,po=new qc;oa.prototype=Object.assign(Object.create(e.prototype),{constructor:oa,isBufferGeometry:!0,getIndex:function(){return(this||
p).index},setIndex:function(u){Array.isArray(u)?(this||p).index=new (65535<fa(u)?T:K)(u,1):(this||p).index=u;return this||p},getAttribute:function(u){return(this||p).attributes[u]},setAttribute:function(u,z){(this||p).attributes[u]=z;return this||p},deleteAttribute:function(u){delete (this||p).attributes[u];return this||p},addGroup:function(u,z,t){(this||p).groups.push({start:u,count:z,materialIndex:void 0!==t?t:0})},clearGroups:function(){(this||p).groups=[]},setDrawRange:function(u,z){(this||p).drawRange.start=
u;(this||p).drawRange.count=z},applyMatrix4:function(u){var z=(this||p).attributes.position;void 0!==z&&(z.applyMatrix4(u),z.needsUpdate=!0);z=(this||p).attributes.normal;if(void 0!==z){var t=(new Tp).getNormalMatrix(u);z.applyNormalMatrix(t);z.needsUpdate=!0}z=(this||p).attributes.tangent;void 0!==z&&(z.transformDirection(u),z.needsUpdate=!0);null!==(this||p).boundingBox&&this.computeBoundingBox();null!==(this||p).boundingSphere&&this.computeBoundingSphere();return this||p},rotateX:function(u){Pv.makeRotationX(u);
this.applyMatrix4(Pv);return this||p},rotateY:function(u){Pv.makeRotationY(u);this.applyMatrix4(Pv);return this||p},rotateZ:function(u){Pv.makeRotationZ(u);this.applyMatrix4(Pv);return this||p},translate:function(u,z,t){Pv.makeTranslation(u,z,t);this.applyMatrix4(Pv);return this||p},scale:function(u,z,t){Pv.makeScale(u,z,t);this.applyMatrix4(Pv);return this||p},lookAt:function(u){PW.lookAt(u);PW.updateMatrix();this.applyMatrix4(PW.matrix);return this||p},center:function(){this.computeBoundingBox();
(this||p).boundingBox.getCenter(NE).negate();this.translate(NE.x,NE.y,NE.z);return this||p},setFromObject:function(u){var z=u.geometry;if(u.isPoints||u.isLine){u=new U(3*z.vertices.length,3);var t=new U(3*z.colors.length,3);this.setAttribute("position",u.copyVector3sArray(z.vertices));this.setAttribute("color",t.copyColorsArray(z.colors));z.lineDistances&&z.lineDistances.length===z.vertices.length&&(u=new U(z.lineDistances.length,1),this.setAttribute("lineDistance",u.copyArray(z.lineDistances)));
null!==z.boundingSphere&&((this||p).boundingSphere=z.boundingSphere.clone());null!==z.boundingBox&&((this||p).boundingBox=z.boundingBox.clone())}else u.isMesh&&z&&z.isGeometry&&this.fromGeometry(z);return this||p},setFromPoints:function(u){for(var z=[],t=0,x=u.length;t<x;t++){var C=u[t];z.push(C.x,C.y,C.z||0)}this.setAttribute("position",new U(z,3));return this||p},updateFromObject:function(u){var z=u.geometry;if(u.isMesh){var t=z.__directGeometry;!0===z.elementsNeedUpdate&&(t=void 0,z.elementsNeedUpdate=
!1);if(void 0===t)return this.fromGeometry(z);t.verticesNeedUpdate=z.verticesNeedUpdate;t.normalsNeedUpdate=z.normalsNeedUpdate;t.colorsNeedUpdate=z.colorsNeedUpdate;t.uvsNeedUpdate=z.uvsNeedUpdate;t.groupsNeedUpdate=z.groupsNeedUpdate;z.verticesNeedUpdate=!1;z.normalsNeedUpdate=!1;z.colorsNeedUpdate=!1;z.uvsNeedUpdate=!1;z.groupsNeedUpdate=!1;z=t}!0===z.verticesNeedUpdate&&(t=(this||p).attributes.position,void 0!==t&&(t.copyVector3sArray(z.vertices),t.needsUpdate=!0),z.verticesNeedUpdate=!1);!0===
z.normalsNeedUpdate&&(t=(this||p).attributes.normal,void 0!==t&&(t.copyVector3sArray(z.normals),t.needsUpdate=!0),z.normalsNeedUpdate=!1);!0===z.colorsNeedUpdate&&(t=(this||p).attributes.color,void 0!==t&&(t.copyColorsArray(z.colors),t.needsUpdate=!0),z.colorsNeedUpdate=!1);z.uvsNeedUpdate&&(t=(this||p).attributes.uv,void 0!==t&&(t.copyVector2sArray(z.uvs),t.needsUpdate=!0),z.uvsNeedUpdate=!1);z.lineDistancesNeedUpdate&&(t=(this||p).attributes.lineDistance,void 0!==t&&(t.copyArray(z.lineDistances),
t.needsUpdate=!0),z.lineDistancesNeedUpdate=!1);z.groupsNeedUpdate&&(z.computeGroups(u.geometry),(this||p).groups=z.groups,z.groupsNeedUpdate=!1);return this||p},fromGeometry:function(u){u.__directGeometry=(new Cra).fromGeometry(u);return this.fromDirectGeometry(u.__directGeometry)},fromDirectGeometry:function(u){var z=new Float32Array(3*u.vertices.length);this.setAttribute("position",(new W(z,3)).copyVector3sArray(u.vertices));0<u.normals.length&&(z=new Float32Array(3*u.normals.length),this.setAttribute("normal",
(new W(z,3)).copyVector3sArray(u.normals)));0<u.colors.length&&(z=new Float32Array(3*u.colors.length),this.setAttribute("color",(new W(z,3)).copyColorsArray(u.colors)));0<u.uvs.length&&(z=new Float32Array(2*u.uvs.length),this.setAttribute("uv",(new W(z,2)).copyVector2sArray(u.uvs)));0<u.uvs2.length&&(z=new Float32Array(2*u.uvs2.length),this.setAttribute("uv2",(new W(z,2)).copyVector2sArray(u.uvs2)));(this||p).groups=u.groups;for(var t in u.morphTargets){z=[];for(var x=u.morphTargets[t],C=0,G=x.length;C<
G;C++){var L=x[C],S=new U(3*L.data.length,3);S.name=L.name;z.push(S.copyVector3sArray(L.data))}(this||p).morphAttributes[t]=z}0<u.skinIndices.length&&(t=new U(4*u.skinIndices.length,4),this.setAttribute("skinIndex",t.copyVector4sArray(u.skinIndices)));0<u.skinWeights.length&&(t=new U(4*u.skinWeights.length,4),this.setAttribute("skinWeight",t.copyVector4sArray(u.skinWeights)));null!==u.boundingSphere&&((this||p).boundingSphere=u.boundingSphere.clone());null!==u.boundingBox&&((this||p).boundingBox=
u.boundingBox.clone());return this||p},computeBoundingBox:function(){null===(this||p).boundingBox&&((this||p).boundingBox=new Ov);var u=(this||p).attributes.position,z=(this||p).morphAttributes.position;if(u&&u.isGLBufferAttribute)console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this||p),(this||p).boundingBox.set(new qc(-Infinity,-Infinity,-Infinity),new qc(Infinity,Infinity,Infinity));else{if(void 0!==
u){if((this||p).boundingBox.setFromBufferAttribute(u),z){u=0;for(var t=z.length;u<t;u++)Cr.setFromBufferAttribute(z[u]),(this||p).morphTargetsRelative?(po.addVectors((this||p).boundingBox.min,Cr.min),(this||p).boundingBox.expandByPoint(po),po.addVectors((this||p).boundingBox.max,Cr.max),(this||p).boundingBox.expandByPoint(po)):((this||p).boundingBox.expandByPoint(Cr.min),(this||p).boundingBox.expandByPoint(Cr.max))}}else(this||p).boundingBox.makeEmpty();(isNaN((this||p).boundingBox.min.x)||isNaN((this||
p).boundingBox.min.y)||isNaN((this||p).boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this||p)}},computeBoundingSphere:function(){null===(this||p).boundingSphere&&((this||p).boundingSphere=new gx);var u=(this||p).attributes.position,z=(this||p).morphAttributes.position;if(u&&u.isGLBufferAttribute)console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',
this||p),(this||p).boundingSphere.set(new qc,Infinity);else if(u){var t=(this||p).boundingSphere.center;Cr.setFromBufferAttribute(u);if(z)for(var x=0,C=z.length;x<C;x++)tI.setFromBufferAttribute(z[x]),(this||p).morphTargetsRelative?(po.addVectors(Cr.min,tI.min),Cr.expandByPoint(po),po.addVectors(Cr.max,tI.max),Cr.expandByPoint(po)):(Cr.expandByPoint(tI.min),Cr.expandByPoint(tI.max));Cr.getCenter(t);C=x=0;for(var G=u.count;C<G;C++)po.fromBufferAttribute(u,C),x=Math.max(x,t.distanceToSquared(po));if(z)for(C=
0,G=z.length;C<G;C++)for(var L=z[C],S=(this||p).morphTargetsRelative,V=0,Z=L.count;V<Z;V++)po.fromBufferAttribute(L,V),S&&(NE.fromBufferAttribute(u,V),po.add(NE)),x=Math.max(x,t.distanceToSquared(po));(this||p).boundingSphere.radius=Math.sqrt(x);isNaN((this||p).boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this||p)}},computeFaceNormals:function(){},computeVertexNormals:function(){var u=
(this||p).index,z=this.getAttribute("position");if(void 0!==z){var t=this.getAttribute("normal");if(void 0===t)t=new W(new Float32Array(3*z.count),3),this.setAttribute("normal",t);else for(var x=0,C=t.count;x<C;x++)t.setXYZ(x,0,0,0);x=new qc;C=new qc;var G=new qc,L=new qc,S=new qc,V=new qc,Z=new qc,ja=new qc;if(u)for(var ua=0,Ca=u.count;ua<Ca;ua+=3){var bb=u.getX(ua+0),$a=u.getX(ua+1),ub=u.getX(ua+2);x.fromBufferAttribute(z,bb);C.fromBufferAttribute(z,$a);G.fromBufferAttribute(z,ub);Z.subVectors(G,
C);ja.subVectors(x,C);Z.cross(ja);L.fromBufferAttribute(t,bb);S.fromBufferAttribute(t,$a);V.fromBufferAttribute(t,ub);L.add(Z);S.add(Z);V.add(Z);t.setXYZ(bb,L.x,L.y,L.z);t.setXYZ($a,S.x,S.y,S.z);t.setXYZ(ub,V.x,V.y,V.z)}else for(u=0,L=z.count;u<L;u+=3)x.fromBufferAttribute(z,u+0),C.fromBufferAttribute(z,u+1),G.fromBufferAttribute(z,u+2),Z.subVectors(G,C),ja.subVectors(x,C),Z.cross(ja),t.setXYZ(u+0,Z.x,Z.y,Z.z),t.setXYZ(u+1,Z.x,Z.y,Z.z),t.setXYZ(u+2,Z.x,Z.y,Z.z);this.normalizeNormals();t.needsUpdate=
!0}},merge:function(u,z){if(u&&u.isBufferGeometry){void 0===z&&(z=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));var t=(this||p).attributes,x;for(x in t)if(void 0!==u.attributes[x]){var C=t[x].array,G=u.attributes[x],L=G.array,S=G.itemSize*z;G=Math.min(L.length,C.length-S);for(var V=0;V<G;V++,S++)C[S]=L[V]}return this||p}console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",
u)},normalizeNormals:function(){for(var u=(this||p).attributes.normal,z=0,t=u.count;z<t;z++)po.fromBufferAttribute(u,z),po.normalize(),u.setXYZ(z,po.x,po.y,po.z)},toNonIndexed:function(){function u(ja,ua){var Ca=ja.array,bb=ja.itemSize;ja=ja.normalized;for(var $a=new Ca.constructor(ua.length*bb),ub,pb=0,Rc=0,xc=ua.length;Rc<xc;Rc++){ub=ua[Rc]*bb;for(var kd=0;kd<bb;kd++)$a[pb++]=Ca[ub++]}return new W($a,bb,ja)}if(null===(this||p).index)return console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed."),
this||p;var z=new oa,t=(this||p).index.array,x=(this||p).attributes;for(L in x){var C=u(x[L],t);z.setAttribute(L,C)}x=(this||p).morphAttributes;for(var G in x){var L=[];C=x[G];for(var S=0,V=C.length;S<V;S++){var Z=u(C[S],t);L.push(Z)}z.morphAttributes[G]=L}z.morphTargetsRelative=(this||p).morphTargetsRelative;t=(this||p).groups;G=0;for(x=t.length;G<x;G++)L=t[G],z.addGroup(L.start,L.count,L.materialIndex);return z},toJSON:function(){var u={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};
u.uuid=(this||p).uuid;u.type=(this||p).type;""!==(this||p).name&&(u.name=(this||p).name);0<Object.keys((this||p).userData).length&&(u.userData=(this||p).userData);if(void 0!==(this||p).parameters){var z=(this||p).parameters;for(t in z)void 0!==z[t]&&(u[t]=z[t]);return u}u.data={attributes:{}};var t=(this||p).index;null!==t&&(u.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});t=(this||p).attributes;for(var x in t){var C=t[x],G=C.toJSON(u.data);""!==C.name&&(G.name=
C.name);u.data.attributes[x]=G}x={};t=!1;for(z in(this||p).morphAttributes){C=(this||p).morphAttributes[z];G=[];for(var L=0,S=C.length;L<S;L++){var V=C[L],Z=V.toJSON(u.data);""!==V.name&&(Z.name=V.name);G.push(Z)}0<G.length&&(x[z]=G,t=!0)}t&&(u.data.morphAttributes=x,u.data.morphTargetsRelative=(this||p).morphTargetsRelative);z=(this||p).groups;0<z.length&&(u.data.groups=JSON.parse(JSON.stringify(z)));z=(this||p).boundingSphere;null!==z&&(u.data.boundingSphere={center:z.center.toArray(),radius:z.radius});
return u},clone:function(){return(new oa).copy(this||p)},copy:function(u){(this||p).index=null;(this||p).attributes={};(this||p).morphAttributes={};(this||p).groups=[];(this||p).boundingBox=null;(this||p).boundingSphere=null;var z={};(this||p).name=u.name;var t=u.index;null!==t&&this.setIndex(t.clone(z));t=u.attributes;for(var x in t)this.setAttribute(x,t[x].clone(z));x=u.morphAttributes;for(var C in x){t=[];for(var G=x[C],L=0,S=G.length;L<S;L++)t.push(G[L].clone(z));(this||p).morphAttributes[C]=
t}(this||p).morphTargetsRelative=u.morphTargetsRelative;z=u.groups;C=0;for(x=z.length;C<x;C++)t=z[C],this.addGroup(t.start,t.count,t.materialIndex);z=u.boundingBox;null!==z&&((this||p).boundingBox=z.clone());z=u.boundingSphere;null!==z&&((this||p).boundingSphere=z.clone());(this||p).drawRange.start=u.drawRange.start;(this||p).drawRange.count=u.drawRange.count;(this||p).userData=u.userData;return this||p},dispose:function(){this.dispatchEvent({type:"dispose"})}});var H$=new fj,NB=new EE,QW=new gx,
$y=new qc,az=new qc,bz=new qc,VV=new qc,WV=new qc,XV=new qc,QN=new qc,RN=new qc,SN=new qc,pE=new Ve,qE=new Ve,rE=new Ve,UH=new qc,PN=new qc;gb.prototype=Object.assign(Object.create(E.prototype),{constructor:gb,isMesh:!0,copy:function(u){E.prototype.copy.call(this||p,u);void 0!==u.morphTargetInfluences&&((this||p).morphTargetInfluences=u.morphTargetInfluences.slice());void 0!==u.morphTargetDictionary&&((this||p).morphTargetDictionary=Object.assign({},u.morphTargetDictionary));(this||p).material=u.material;
(this||p).geometry=u.geometry;return this||p},updateMorphTargets:function(){var u=(this||p).geometry;if(u.isBufferGeometry){u=u.morphAttributes;var z=Object.keys(u);if(0<z.length&&(u=u[z[0]],void 0!==u)){(this||p).morphTargetInfluences=[];(this||p).morphTargetDictionary={};z=0;for(var t=u.length;z<t;z++){var x=u[z].name||String(z);(this||p).morphTargetInfluences.push(0);(this||p).morphTargetDictionary[x]=z}}}else u=u.morphTargets,void 0!==u&&0<u.length&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")},
raycast:function(u,z){var t=(this||p).geometry,x=(this||p).material,C=(this||p).matrixWorld;if(void 0!==x&&(null===t.boundingSphere&&t.computeBoundingSphere(),QW.copy(t.boundingSphere),QW.applyMatrix4(C),!1!==u.ray.intersectsSphere(QW)&&(H$.getInverse(C),NB.copy(u.ray).applyMatrix4(H$),null===t.boundingBox||!1!==NB.intersectsBox(t.boundingBox))))if(t.isBufferGeometry){var G=t.index,L=t.attributes.position;C=t.morphAttributes.position;var S=t.morphTargetsRelative,V=t.attributes.uv,Z=t.attributes.uv2,
ja=t.groups,ua=t.drawRange;if(null!==G)if(Array.isArray(x))for(var Ca=0,bb=ja.length;Ca<bb;Ca++)for(var $a=ja[Ca],ub=x[$a.materialIndex],pb=Math.max($a.start,ua.start),Rc=Math.min($a.start+$a.count,ua.start+ua.count);pb<Rc;pb+=3){t=G.getX(pb);var xc=G.getX(pb+1),kd=G.getX(pb+2);if(t=va(this||p,ub,u,NB,L,C,S,V,Z,t,xc,kd))t.faceIndex=Math.floor(pb/3),t.face.materialIndex=$a.materialIndex,z.push(t)}else for(ja=Math.max(0,ua.start),ua=Math.min(G.count,ua.start+ua.count);ja<ua;ja+=3){if(t=G.getX(ja),Ca=
G.getX(ja+1),bb=G.getX(ja+2),t=va(this||p,x,u,NB,L,C,S,V,Z,t,Ca,bb))t.faceIndex=Math.floor(ja/3),z.push(t)}else if(void 0!==L)if(Array.isArray(x))for(G=0,Ca=ja.length;G<Ca;G++)for(bb=ja[G],$a=x[bb.materialIndex],ub=Math.max(bb.start,ua.start),pb=Math.min(bb.start+bb.count,ua.start+ua.count);ub<pb;ub+=3){if(t=va(this||p,$a,u,NB,L,C,S,V,Z,ub,ub+1,ub+2))t.faceIndex=Math.floor(ub/3),t.face.materialIndex=bb.materialIndex,z.push(t)}else for(ja=Math.max(0,ua.start),ua=Math.min(L.count,ua.start+ua.count);ja<
ua;ja+=3)if(t=va(this||p,x,u,NB,L,C,S,V,Z,ja,ja+1,ja+2))t.faceIndex=Math.floor(ja/3),z.push(t)}else if(t.isGeometry)for(C=Array.isArray(x),S=t.vertices,V=t.faces,t=t.faceVertexUvs[0],0<t.length&&(L=t),Z=0,ua=V.length;Z<ua;Z++)if(ja=V[Z],t=C?x[ja.materialIndex]:x,void 0!==t&&(G=S[ja.a],Ca=S[ja.b],bb=S[ja.c],t=zb(this||p,t,u,NB,G,Ca,bb,UH)))L&&L[Z]&&($a=L[Z],pE.copy($a[0]),qE.copy($a[1]),rE.copy($a[2]),t.uv=Xt.getUV(UH,G,Ca,bb,pE,qE,rE,new Ve)),t.face=ja,t.faceIndex=Z,z.push(t)}});var WH=function(u){function z(t,
x,C,G,L,S){function V(Rc,xc,kd,Ec,nd,Nc,Cd,Xd,yd,Ad,Ce){var gf=Nc/yd,hg=Cd/Ad,Cf=Nc/2,Yf=Cd/2,gh=Xd/2;Cd=yd+1;for(var Pg=Ad+1,Ei=Nc=0,sh=new qc,Xj=0;Xj<Pg;Xj++)for(var wk=Xj*hg-Yf,Nl=0;Nl<Cd;Nl++)sh[Rc]=(Nl*gf-Cf)*Ec,sh[xc]=wk*nd,sh[kd]=gh,Ca.push(sh.x,sh.y,sh.z),sh[Rc]=0,sh[xc]=0,sh[kd]=0<Xd?1:-1,bb.push(sh.x,sh.y,sh.z),$a.push(Nl/yd),$a.push(1-Xj/Ad),Nc+=1;for(Rc=0;Rc<Ad;Rc++)for(xc=0;xc<yd;xc++)kd=ub+xc+Cd*(Rc+1),Ec=ub+(xc+1)+Cd*(Rc+1),nd=ub+(xc+1)+Cd*Rc,ua.push(ub+xc+Cd*Rc,kd,nd),ua.push(kd,Ec,
nd),Ei+=6;ja.addGroup(pb,Ei,Ce);pb+=Ei;ub+=Nc}void 0===t&&(t=1);void 0===x&&(x=1);void 0===C&&(C=1);void 0===G&&(G=1);void 0===L&&(L=1);void 0===S&&(S=1);var Z=u.call(this||p)||this||p;Z.type="BoxBufferGeometry";Z.parameters={width:t,height:x,depth:C,widthSegments:G,heightSegments:L,depthSegments:S};var ja=l(Z);G=Math.floor(G);L=Math.floor(L);S=Math.floor(S);var ua=[],Ca=[],bb=[],$a=[],ub=0,pb=0;V("z","y","x",-1,-1,C,x,t,S,L,0);V("z","y","x",1,-1,C,x,-t,S,L,1);V("x","z","y",1,1,t,C,x,G,S,2);V("x",
"z","y",1,-1,t,C,-x,G,S,3);V("x","y","z",1,-1,t,x,C,G,L,4);V("x","y","z",-1,-1,t,x,-C,G,L,5);Z.setIndex(ua);Z.setAttribute("position",new U(Ca,3));Z.setAttribute("normal",new U(bb,3));Z.setAttribute("uv",new U($a,2));return Z}g(z,u);return z}(oa),W9={clone:ma,merge:ta};Na.prototype=Object.create(M.prototype);Na.prototype.constructor=Na;Na.prototype.isShaderMaterial=!0;Na.prototype.copy=function(u){M.prototype.copy.call(this||p,u);(this||p).fragmentShader=u.fragmentShader;(this||p).vertexShader=u.vertexShader;
(this||p).uniforms=ma(u.uniforms);(this||p).defines=Object.assign({},u.defines);(this||p).wireframe=u.wireframe;(this||p).wireframeLinewidth=u.wireframeLinewidth;(this||p).lights=u.lights;(this||p).clipping=u.clipping;(this||p).skinning=u.skinning;(this||p).morphTargets=u.morphTargets;(this||p).morphNormals=u.morphNormals;(this||p).extensions=Object.assign({},u.extensions);(this||p).glslVersion=u.glslVersion;return this||p};Na.prototype.toJSON=function(u){var z=M.prototype.toJSON.call(this||p,u);
z.glslVersion=(this||p).glslVersion;z.uniforms={};for(var t in(this||p).uniforms){var x=(this||p).uniforms[t].value;z.uniforms[t]=x&&x.isTexture?{type:"t",value:x.toJSON(u).uuid}:x&&x.isColor?{type:"c",value:x.getHex()}:x&&x.isVector2?{type:"v2",value:x.toArray()}:x&&x.isVector3?{type:"v3",value:x.toArray()}:x&&x.isVector4?{type:"v4",value:x.toArray()}:x&&x.isMatrix3?{type:"m3",value:x.toArray()}:x&&x.isMatrix4?{type:"m4",value:x.toArray()}:{value:x}}0<Object.keys((this||p).defines).length&&(z.defines=
(this||p).defines);z.vertexShader=(this||p).vertexShader;z.fragmentShader=(this||p).fragmentShader;u={};for(var C in(this||p).extensions)!0===(this||p).extensions[C]&&(u[C]=!0);0<Object.keys(u).length&&(z.extensions=u);return z};Kb.prototype=Object.assign(Object.create(E.prototype),{constructor:Kb,isCamera:!0,copy:function(u,z){E.prototype.copy.call(this||p,u,z);(this||p).matrixWorldInverse.copy(u.matrixWorldInverse);(this||p).projectionMatrix.copy(u.projectionMatrix);(this||p).projectionMatrixInverse.copy(u.projectionMatrixInverse);
return this||p},getWorldDirection:function(u){void 0===u&&(console.warn("THREE.Camera: .getWorldDirection() target is now required"),u=new qc);this.updateMatrixWorld(!0);var z=(this||p).matrixWorld.elements;return u.set(-z[8],-z[9],-z[10]).normalize()},updateMatrixWorld:function(u){E.prototype.updateMatrixWorld.call(this||p,u);(this||p).matrixWorldInverse.getInverse((this||p).matrixWorld)},updateWorldMatrix:function(u,z){E.prototype.updateWorldMatrix.call(this||p,u,z);(this||p).matrixWorldInverse.getInverse((this||
p).matrixWorld)},clone:function(){return(new (this||p).constructor).copy(this||p)}});kc.prototype=Object.assign(Object.create(Kb.prototype),{constructor:kc,isPerspectiveCamera:!0,copy:function(u,z){Kb.prototype.copy.call(this||p,u,z);(this||p).fov=u.fov;(this||p).zoom=u.zoom;(this||p).near=u.near;(this||p).far=u.far;(this||p).focus=u.focus;(this||p).aspect=u.aspect;(this||p).view=null===u.view?null:Object.assign({},u.view);(this||p).filmGauge=u.filmGauge;(this||p).filmOffset=u.filmOffset;return this||
p},setFocalLength:function(u){u=.5*this.getFilmHeight()/u;(this||p).fov=2*ai.RAD2DEG*Math.atan(u);this.updateProjectionMatrix()},getFocalLength:function(){var u=Math.tan(.5*ai.DEG2RAD*(this||p).fov);return.5*this.getFilmHeight()/u},getEffectiveFOV:function(){return 2*ai.RAD2DEG*Math.atan(Math.tan(.5*ai.DEG2RAD*(this||p).fov)/(this||p).zoom)},getFilmWidth:function(){return(this||p).filmGauge*Math.min((this||p).aspect,1)},getFilmHeight:function(){return(this||p).filmGauge/Math.max((this||p).aspect,
1)},setViewOffset:function(u,z,t,x,C,G){(this||p).aspect=u/z;null===(this||p).view&&((this||p).view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1});(this||p).view.enabled=!0;(this||p).view.fullWidth=u;(this||p).view.fullHeight=z;(this||p).view.offsetX=t;(this||p).view.offsetY=x;(this||p).view.width=C;(this||p).view.height=G;this.updateProjectionMatrix()},clearViewOffset:function(){null!==(this||p).view&&((this||p).view.enabled=!1);this.updateProjectionMatrix()},updateProjectionMatrix:function(){var u=
(this||p).near,z=u*Math.tan(.5*ai.DEG2RAD*(this||p).fov)/(this||p).zoom,t=2*z,x=(this||p).aspect*t,C=-.5*x,G=(this||p).view;if(null!==(this||p).view&&(this||p).view.enabled){var L=G.fullWidth,S=G.fullHeight;C+=G.offsetX*x/L;z-=G.offsetY*t/S;x*=G.width/L;t*=G.height/S}G=(this||p).filmOffset;0!==G&&(C+=u*G/this.getFilmWidth());(this||p).projectionMatrix.makePerspective(C,C+x,z,z-t,u,(this||p).far);(this||p).projectionMatrixInverse.getInverse((this||p).projectionMatrix)},toJSON:function(u){u=E.prototype.toJSON.call(this||
p,u);u.object.fov=(this||p).fov;u.object.zoom=(this||p).zoom;u.object.near=(this||p).near;u.object.far=(this||p).far;u.object.focus=(this||p).focus;u.object.aspect=(this||p).aspect;null!==(this||p).view&&(u.object.view=Object.assign({},(this||p).view));u.object.filmGauge=(this||p).filmGauge;u.object.filmOffset=(this||p).filmOffset;return u}});Vb.prototype=Object.create(E.prototype);Vb.prototype.constructor=Vb;jc.prototype=Object.create(r.prototype);jc.prototype.constructor=jc;jc.prototype.isCubeTexture=
!0;Object.defineProperty(jc.prototype,"images",{get:function(){return(this||p).image},set:function(u){(this||p).image=u}});Qc.prototype=Object.create(v.prototype);Qc.prototype.constructor=Qc;Qc.prototype.isWebGLCubeRenderTarget=!0;Qc.prototype.fromEquirectangularTexture=function(u,z){(this||p).texture.type=z.type;(this||p).texture.format=1023;(this||p).texture.encoding=z.encoding;(this||p).texture.generateMipmaps=z.generateMipmaps;(this||p).texture.minFilter=z.minFilter;(this||p).texture.magFilter=
z.magFilter;var t=new WH(5,5,5),x=new Na({name:"CubemapFromEquirect",uniforms:ma({tEquirect:{value:null}}),vertexShader:"\n\n\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t#include <begin_vertex>\n\t\t\t\t#include <project_vertex>\n\n\t\t\t}\n\t\t",fragmentShader:"\n\n\t\t\tuniform sampler2D tEquirect;\n\n\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t}\n\t\t",
side:1,blending:0});x.uniforms.tEquirect.value=z;t=new gb(t,x);x=z.minFilter;1008===z.minFilter&&(z.minFilter=1006);(new Vb(1,10,this||p)).update(u,t);z.minFilter=x;t.geometry.dispose();t.material.dispose();return this||p};Pb.prototype=Object.create(r.prototype);Pb.prototype.constructor=Pb;Pb.prototype.isDataTexture=!0;var OE=new gx,IO=new qc,XH=function(){function u(t,x,C,G,L,S){(this||p).planes=[void 0!==t?t:new Iv,void 0!==x?x:new Iv,void 0!==C?C:new Iv,void 0!==G?G:new Iv,void 0!==L?L:new Iv,
void 0!==S?S:new Iv]}var z=u.prototype;z.set=function(t,x,C,G,L,S){var V=(this||p).planes;V[0].copy(t);V[1].copy(x);V[2].copy(C);V[3].copy(G);V[4].copy(L);V[5].copy(S);return this||p};z.clone=function(){return(new (this||p).constructor).copy(this||p)};z.copy=function(t){for(var x=(this||p).planes,C=0;6>C;C++)x[C].copy(t.planes[C]);return this||p};z.setFromProjectionMatrix=function(t){var x=(this||p).planes,C=t.elements;t=C[0];var G=C[1],L=C[2],S=C[3],V=C[4],Z=C[5],ja=C[6],ua=C[7],Ca=C[8],bb=C[9],
$a=C[10],ub=C[11],pb=C[12],Rc=C[13],xc=C[14];C=C[15];x[0].setComponents(S-t,ua-V,ub-Ca,C-pb).normalize();x[1].setComponents(S+t,ua+V,ub+Ca,C+pb).normalize();x[2].setComponents(S+G,ua+Z,ub+bb,C+Rc).normalize();x[3].setComponents(S-G,ua-Z,ub-bb,C-Rc).normalize();x[4].setComponents(S-L,ua-ja,ub-$a,C-xc).normalize();x[5].setComponents(S+L,ua+ja,ub+$a,C+xc).normalize();return this||p};z.intersectsObject=function(t){var x=t.geometry;null===x.boundingSphere&&x.computeBoundingSphere();OE.copy(x.boundingSphere).applyMatrix4(t.matrixWorld);
return this.intersectsSphere(OE)};z.intersectsSprite=function(t){OE.center.set(0,0,0);OE.radius=.7071067811865476;OE.applyMatrix4(t.matrixWorld);return this.intersectsSphere(OE)};z.intersectsSphere=function(t){var x=(this||p).planes,C=t.center;t=-t.radius;for(var G=0;6>G;G++)if(x[G].distanceToPoint(C)<t)return!1;return!0};z.intersectsBox=function(t){for(var x=(this||p).planes,C=0;6>C;C++){var G=x[C];IO.x=0<G.normal.x?t.max.x:t.min.x;IO.y=0<G.normal.y?t.max.y:t.min.y;IO.z=0<G.normal.z?t.max.z:t.min.z;
if(0>G.distanceToPoint(IO))return!1}return!0};z.containsPoint=function(t){for(var x=(this||p).planes,C=0;6>C;C++)if(0>x[C].distanceToPoint(t))return!1;return!0};return u}(),TN=function(u){function z(t,x,C,G){var L=u.call(this||p)||this||p;L.type="PlaneBufferGeometry";L.parameters={width:t,height:x,widthSegments:C,heightSegments:G};t=t||1;x=x||1;var S=t/2,V=x/2;C=Math.floor(C)||1;G=Math.floor(G)||1;var Z=C+1,ja=G+1,ua=t/C,Ca=x/G;x=[];t=[];for(var bb=[],$a=[],ub=0;ub<ja;ub++)for(var pb=ub*Ca-V,Rc=0;Rc<
Z;Rc++)t.push(Rc*ua-S,-pb,0),bb.push(0,0,1),$a.push(Rc/C),$a.push(1-ub/G);for(S=0;S<G;S++)for(V=0;V<C;V++)ja=V+Z*(S+1),ua=V+1+Z*(S+1),Ca=V+1+Z*S,x.push(V+Z*S,ja,Ca),x.push(ja,ua,Ca);L.setIndex(x);L.setAttribute("position",new U(t,3));L.setAttribute("normal",new U(bb,3));L.setAttribute("uv",new U($a,2));return L}g(z,u);return z}(oa),gj={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",
alphatest_fragment:"#ifdef ALPHATEST\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\t#endif\n#endif",
aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"vec2 integrateSpecularBRDF( const in float dotNV, const in float roughness ) {\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\treturn vec2( -1.04, 1.04 ) * a004 + r.zw;\n}\nfloat punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\tif( cutoffDistance > 0.0 ) {\n\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t}\n\treturn distanceFalloff;\n#else\n\tif( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t}\n\treturn 1.0;\n#endif\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n}\nvec3 F_Schlick_RoughnessDependent( const in vec3 F0, const in float dotNV, const in float roughness ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotNV - 6.98316 ) * dotNV );\n\tvec3 Fr = max( vec3( 1.0 - roughness ), F0 ) - F0;\n\treturn Fr * fresnel + F0;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\treturn 1.0 / ( gl * gv );\n}\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( incidentLight.direction + viewDir );\n\tfloat dotNL = saturate( dot( normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( G * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nvec3 BRDF_Specular_GGX_Environment( const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\treturn specularColor * brdf.x + brdf.y;\n}\nvoid BRDF_Specular_Multiscattering_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tvec3 F = F_Schlick_RoughnessDependent( specularColor, dotNV, roughness );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\tvec3 FssEss = F * brdf.x + brdf.y;\n\tfloat Ess = brdf.x + brdf.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie(float roughness, float NoH) {\n\tfloat invAlpha = 1.0 / roughness;\n\tfloat cos2h = NoH * NoH;\n\tfloat sin2h = max(1.0 - cos2h, 0.0078125);\treturn (2.0 + invAlpha) * pow(sin2h, invAlpha * 0.5) / (2.0 * PI);\n}\nfloat V_Neubelt(float NoV, float NoL) {\n\treturn saturate(1.0 / (4.0 * (NoL + NoV - NoL * NoV)));\n}\nvec3 BRDF_Specular_Sheen( const in float roughness, const in vec3 L, const in GeometricContext geometry, vec3 specularColor ) {\n\tvec3 N = geometry.normal;\n\tvec3 V = geometry.viewDir;\n\tvec3 H = normalize( V + L );\n\tfloat dotNH = saturate( dot( N, H ) );\n\treturn specularColor * D_Charlie( roughness, dotNH ) * V_Neubelt( dot(N, V), dot(N, L) );\n}\n#endif",
bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 );\n\t\tfDet *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",
clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",
clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#ifdef USE_COLOR\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",
color_vertex:"#if defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor.xyz *= color.xyz;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat max3( vec3 v ) { return max( max( v.x, v.y ), v.z ); }\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\treturn - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}",
cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_maxMipLevel 8.0\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_maxTileSize 256.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\tfloat texelSize = 1.0 / ( 3.0 * cubeUV_maxTileSize );\n\t\tvec2 uv = getUV( direction, face ) * ( faceSize - 1.0 );\n\t\tvec2 f = fract( uv );\n\t\tuv += 0.5 - f;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tif ( mipInt < cubeUV_maxMipLevel ) {\n\t\t\tuv.y += 2.0 * cubeUV_maxTileSize;\n\t\t}\n\t\tuv.y += filterInt * 2.0 * cubeUV_minTileSize;\n\t\tuv.x += 3.0 * max( 0.0, cubeUV_maxTileSize - 2.0 * faceSize );\n\t\tuv *= texelSize;\n\t\tvec3 tl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.x += texelSize;\n\t\tvec3 tr = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.y += texelSize;\n\t\tvec3 br = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.x -= texelSize;\n\t\tvec3 bl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tvec3 tm = mix( tl, tr, f.x );\n\t\tvec3 bm = mix( bl, br, f.x );\n\t\treturn mix( tm, bm, f.y );\n\t}\n\t#define r0 1.0\n\t#define v0 0.339\n\t#define m0 - 2.0\n\t#define r1 0.8\n\t#define v1 0.276\n\t#define m1 - 1.0\n\t#define r4 0.4\n\t#define v4 0.046\n\t#define m4 2.0\n\t#define r5 0.305\n\t#define v5 0.016\n\t#define m5 3.0\n\t#define r6 0.21\n\t#define v6 0.0038\n\t#define m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= r1 ) {\n\t\t\tmip = ( r0 - roughness ) * ( m1 - m0 ) / ( r0 - r1 ) + m0;\n\t\t} else if ( roughness >= r4 ) {\n\t\t\tmip = ( r1 - roughness ) * ( m4 - m1 ) / ( r1 - r4 ) + m1;\n\t\t} else if ( roughness >= r5 ) {\n\t\t\tmip = ( r4 - roughness ) * ( m5 - m4 ) / ( r4 - r5 ) + m4;\n\t\t} else if ( roughness >= r6 ) {\n\t\t\tmip = ( r5 - roughness ) * ( m6 - m5 ) / ( r5 - r6 ) + m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), m0, cubeUV_maxMipLevel );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",
defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",
displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",
emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * value.a * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat M = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat D = max( maxRange / maxRGB, 1.0 );\n\tD = clamp( floor( D ) / 255.0, 0.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value ) {\n\tvec3 Xp_Y_XYZp = cLogLuvM * value.rgb;\n\tXp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );\n\tvec4 vResult;\n\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n\tvResult.w = fract( Le );\n\tvResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;\n\treturn vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n\tfloat Le = value.z * 255.0 + value.w;\n\tvec3 Xp_Y_XYZp;\n\tXp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );\n\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n\tvec3 vRGB = cLogLuvInverseM * Xp_Y_XYZp.rgb;\n\treturn vec4( max( vRGB, 0.0 ), 1.0 );\n}",
envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifndef ENVMAP_TYPE_CUBE_UV\n\t\tenvColor = envMapTexelToLinear( envColor );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",
envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\tuniform int maxMipLevel;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",
envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n\t#ifdef ENVMAP_MODE_REFRACTION\n\t\tuniform float refractionRatio;\n\t#endif\n\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t#else\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\t\t#endif\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t}\n\tfloat getSpecularMIPLevel( const in float roughness, const in int maxMIPLevel ) {\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\t\tfloat sigma = PI * roughness * roughness / ( 1.0 + roughness );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar + log2( sigma );\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\t}\n\tvec3 getLightProbeIndirectRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in int maxMIPLevel ) {\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( -viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( -viewDir, normal, refractionRatio );\n\t\t#endif\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( roughness, maxMIPLevel );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t#endif\n\t\treturn envMapColor.rgb * envMapIntensity;\n\t}\n#endif",
envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",
fog_vertex:"#ifdef USE_FOG\n\tfogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float fogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * fogDepth * fogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float fogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",
gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn texture2D( gradientMap, coord ).rgb;\n\t#else\n\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\treflectedLight.indirectDiffuse += PI * lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n#endif",
lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\nvIndirectFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n\tvIndirectBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\nvIndirectFront += getAmbientLightIrradiance( ambientLightColor );\nvIndirectFront += getLightProbeIrradiance( lightProbe, geometry );\n#ifdef DOUBLE_SIDED\n\tvIndirectBack += getAmbientLightIrradiance( ambientLightColor );\n\tvIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry );\n#endif\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif",
lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in GeometricContext geometry ) {\n\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treturn irradiance;\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tdirectLight.color = pointLight.color;\n\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\t\tif ( angleCos > spotLight.coneCos ) {\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tirradiance *= PI;\n\t\t#endif\n\t\treturn irradiance;\n\t}\n#endif",
lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon\n#define Material_LightProbeLOD( material )\t(0)",
lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)",
lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.specularRoughness = max( roughnessFactor, 0.0525 );material.specularRoughness += geometryRoughness;\nmaterial.specularRoughness = min( material.specularRoughness, 1.0 );\n#ifdef REFLECTIVITY\n\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n#endif\n#ifdef CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheen;\n#endif",
lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat specularRoughness;\n\tvec3 specularColor;\n#ifdef CLEARCOAT\n\tfloat clearcoat;\n\tfloat clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tvec3 sheenColor;\n#endif\n};\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\nfloat clearcoatDHRApprox( const in float roughness, const in float dotNL ) {\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.specularRoughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(\t\t0, 1,\t\t0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\t#ifdef CLEARCOAT\n\t\tfloat ccDotNL = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = ccDotNL * directLight.color;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tccIrradiance *= PI;\n\t\t#endif\n\t\tfloat clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );\n\t\treflectedLight.directSpecular += ccIrradiance * material.clearcoat * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );\n\t#else\n\t\tfloat clearcoatDHR = 0.0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\treflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_Sheen(\n\t\t\tmaterial.specularRoughness,\n\t\t\tdirectLight.direction,\n\t\t\tgeometry,\n\t\t\tmaterial.sheenColor\n\t\t);\n\t#else\n\t\treflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.normal, material.specularColor, material.specularRoughness);\n\t#endif\n\treflectedLight.directDiffuse += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef CLEARCOAT\n\t\tfloat ccDotNV = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular += clearcoatRadiance * material.clearcoat * BRDF_Specular_GGX_Environment( geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );\n\t\tfloat ccDotNL = ccDotNV;\n\t\tfloat clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );\n\t#else\n\t\tfloat clearcoatDHR = 0.0;\n\t#endif\n\tfloat clearcoatInv = 1.0 - clearcoatDHR;\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\tBRDF_Specular_Multiscattering_Environment( geometry, material.specularColor, material.specularRoughness, singleScattering, multiScattering );\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );\n\treflectedLight.indirectSpecular += clearcoatInv * radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",
lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",
lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getLightProbeIndirectIrradiance( geometry, maxMipLevel );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.normal, material.specularRoughness, maxMipLevel );\n\t#ifdef CLEARCOAT\n\t\tclearcoatRadiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness, maxMipLevel );\n\t#endif\n#endif",
lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",
logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",
map_fragment:"#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n\tvec4 mapTexel = texture2D( map, uv );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",
map_particle_pars_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",
morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifndef USE_MORPHNORMALS\n\t\tuniform float morphTargetInfluences[ 8 ];\n\t#else\n\t\tuniform float morphTargetInfluences[ 4 ];\n\t#endif\n#endif",
morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t#ifndef USE_MORPHNORMALS\n\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t#endif\n#endif",
normal_fragment_begin:"#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t\tbitangent = bitangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t#endif\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;",
normal_fragment_maps:"#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\t#ifdef USE_TANGENT\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( -vViewPosition, normal, mapN );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n#endif",
normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN ) {\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tfloat scale = sign( st1.t * st0.s - st0.t * st1.s );\n\t\tvec3 S = normalize( ( q0 * st1.t - q1 * st0.t ) * scale );\n\t\tvec3 T = normalize( ( - q0 * st1.s + q1 * st0.s ) * scale );\n\t\tvec3 N = normalize( surf_norm );\n\t\tmat3 tsn = mat3( S, T, N );\n\t\tmapN.xy *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\treturn normalize( tsn * mapN );\n\t}\n#endif",
clearcoat_normal_fragment_begin:"#ifdef CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\t#ifdef USE_TANGENT\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN );\n\t#endif\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",
packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ));\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w);\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",
premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",
roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t\tf.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), \n\t\t\t\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t\tf.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",
shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",
shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0\n\t\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\tvec4 shadowWorldPosition;\n\t#endif\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n#endif",
shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",
skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform highp sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif",
skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",
specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(\t1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,\t1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,\t1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",
transmissionmap_fragment:"#ifdef USE_TRANSMISSIONMAP\n\ttotalTransmission *= texture2D( transmissionMap, vUv ).r;\n#endif",transmissionmap_pars_fragment:"#ifdef USE_TRANSMISSIONMAP\n\tuniform sampler2D transmissionMap;\n#endif",uv_pars_fragment:"#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n\t#ifdef UVS_VERTEX_ONLY\n\t\tvec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif",uv_vertex:"#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",
uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\tuniform mat3 uv2Transform;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",
background_frag:"uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",cube_frag:"#include <envmap_common_pars_fragment>\nuniform float opacity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\tvec3 vReflect = vWorldDirection;\n\t#include <envmap_fragment>\n\tgl_FragColor = envColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",
cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",
depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",
distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",
distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",
equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tvec4 texColor = texture2D( tEquirect, sampleUV );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",
linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",
linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",
meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\n\t\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",
meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_ENVMAP\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",
meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\n\t#else\n\t\treflectedLight.indirectDiffuse += vIndirectFront;\n\t#endif\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",
meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",
meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t\tmatcapColor = matcapTexelToLinear( matcapColor );\n\t#else\n\t\tvec4 matcapColor = vec4( 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",
meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#ifndef FLAT_SHADED\n\t\tvNormal = normalize( transformedNormal );\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",
meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",
meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",
meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",
meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",
meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define REFLECTIVITY\n\t#define CLEARCOAT\n\t#define TRANSMISSION\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef TRANSMISSION\n\tuniform float transmission;\n#endif\n#ifdef REFLECTIVITY\n\tuniform float reflectivity;\n#endif\n#ifdef CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheen;\n#endif\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <transmissionmap_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#ifdef TRANSMISSION\n\t\tfloat totalTransmission = transmission;\n\t#endif\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <transmissionmap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#ifdef TRANSMISSION\n\t\tdiffuseColor.a *= mix( saturate( 1. - totalTransmission + linearToRelativeLuminance( reflectedLight.directSpecular + reflectedLight.indirectSpecular ) ), 1.0, metalness );\n\t#endif\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",
meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",
normal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n}",
normal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",
points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",
points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",
shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",
sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",
sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}"},
eg={common:{diffuse:{value:new tg(15658734)},opacity:{value:1},map:{value:null},uvTransform:{value:new Tp},uv2Transform:{value:new Tp},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},
bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new Ve(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:2.5E-4},fogNear:{value:1},fogFar:{value:2E3},fogColor:{value:new tg(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],
properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],
properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new tg(15658734)},opacity:{value:1},
size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},uvTransform:{value:new Tp}},sprite:{diffuse:{value:new tg(15658734)},opacity:{value:1},center:{value:new Ve(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},uvTransform:{value:new Tp}}},Yt={basic:{uniforms:ta([eg.common,eg.specularmap,eg.envmap,eg.aomap,eg.lightmap,eg.fog]),vertexShader:gj.meshbasic_vert,fragmentShader:gj.meshbasic_frag},lambert:{uniforms:ta([eg.common,eg.specularmap,eg.envmap,eg.aomap,eg.lightmap,
eg.emissivemap,eg.fog,eg.lights,{emissive:{value:new tg(0)}}]),vertexShader:gj.meshlambert_vert,fragmentShader:gj.meshlambert_frag},phong:{uniforms:ta([eg.common,eg.specularmap,eg.envmap,eg.aomap,eg.lightmap,eg.emissivemap,eg.bumpmap,eg.normalmap,eg.displacementmap,eg.fog,eg.lights,{emissive:{value:new tg(0)},specular:{value:new tg(1118481)},shininess:{value:30}}]),vertexShader:gj.meshphong_vert,fragmentShader:gj.meshphong_frag},standard:{uniforms:ta([eg.common,eg.envmap,eg.aomap,eg.lightmap,eg.emissivemap,
eg.bumpmap,eg.normalmap,eg.displacementmap,eg.roughnessmap,eg.metalnessmap,eg.fog,eg.lights,{emissive:{value:new tg(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:gj.meshphysical_vert,fragmentShader:gj.meshphysical_frag},toon:{uniforms:ta([eg.common,eg.aomap,eg.lightmap,eg.emissivemap,eg.bumpmap,eg.normalmap,eg.displacementmap,eg.gradientmap,eg.fog,eg.lights,{emissive:{value:new tg(0)}}]),vertexShader:gj.meshtoon_vert,fragmentShader:gj.meshtoon_frag},matcap:{uniforms:ta([eg.common,
eg.bumpmap,eg.normalmap,eg.displacementmap,eg.fog,{matcap:{value:null}}]),vertexShader:gj.meshmatcap_vert,fragmentShader:gj.meshmatcap_frag},points:{uniforms:ta([eg.points,eg.fog]),vertexShader:gj.points_vert,fragmentShader:gj.points_frag},dashed:{uniforms:ta([eg.common,eg.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:gj.linedashed_vert,fragmentShader:gj.linedashed_frag},depth:{uniforms:ta([eg.common,eg.displacementmap]),vertexShader:gj.depth_vert,fragmentShader:gj.depth_frag},
normal:{uniforms:ta([eg.common,eg.bumpmap,eg.normalmap,eg.displacementmap,{opacity:{value:1}}]),vertexShader:gj.normal_vert,fragmentShader:gj.normal_frag},sprite:{uniforms:ta([eg.sprite,eg.fog]),vertexShader:gj.sprite_vert,fragmentShader:gj.sprite_frag},background:{uniforms:{uvTransform:{value:new Tp},t2D:{value:null}},vertexShader:gj.background_vert,fragmentShader:gj.background_frag},cube:{uniforms:ta([eg.envmap,{opacity:{value:1}}]),vertexShader:gj.cube_vert,fragmentShader:gj.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},
vertexShader:gj.equirect_vert,fragmentShader:gj.equirect_frag},distanceRGBA:{uniforms:ta([eg.common,eg.displacementmap,{referencePosition:{value:new qc},nearDistance:{value:1},farDistance:{value:1E3}}]),vertexShader:gj.distanceRGBA_vert,fragmentShader:gj.distanceRGBA_frag},shadow:{uniforms:ta([eg.lights,eg.fog,{color:{value:new tg(0)},opacity:{value:1}}]),vertexShader:gj.shadow_vert,fragmentShader:gj.shadow_frag}};Yt.physical={uniforms:ta([Yt.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},
clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new Ve(1,1)},clearcoatNormalMap:{value:null},sheen:{value:new tg(0)},transmission:{value:0},transmissionMap:{value:null}}]),vertexShader:gj.meshphysical_vert,fragmentShader:gj.meshphysical_frag};lj.prototype=Object.create(r.prototype);lj.prototype.constructor=lj;lj.prototype.isDataTexture2DArray=!0;Cj.prototype=Object.create(r.prototype);Cj.prototype.constructor=Cj;Cj.prototype.isDataTexture3D=!0;var S9=new r,
era=new lj,fra=new Cj,T9=new jc,N9=[],O9=[],R9=new Float32Array(16),Q9=new Float32Array(9),P9=new Float32Array(4);bM.prototype.updateCache=function(u){var z=(this||p).cache;u instanceof Float32Array&&z.length!==u.length&&((this||p).cache=new Float32Array(u.length));ph(z,u)};hM.prototype.setValue=function(u,z,t){for(var x=(this||p).seq,C=0,G=x.length;C!==G;++C){var L=x[C];L.setValue(u,z[L.id],t)}};var YV=/([\w\d_]+)(\])?(\[|\.)?/g;uv.prototype.setValue=function(u,z,t,x){z=(this||p).map[z];void 0!==
z&&z.setValue(u,t,x)};uv.prototype.setOptional=function(u,z,t){z=z[t];void 0!==z&&this.setValue(u,t,z)};uv.upload=function(u,z,t,x){for(var C=0,G=z.length;C!==G;++C){var L=z[C],S=t[L.id];!1!==S.needsUpdate&&L.setValue(u,S.value,x)}};uv.seqWithValue=function(u,z){for(var t=[],x=0,C=u.length;x!==C;++x){var G=u[x];G.id in z&&t.push(G)}return t};var gra=0,ZV=/^[ \t]*#include +<([\w\d./]+)>/gm,V9=/#pragma unroll_loop[\s]+?for \( int i = (\d+); i < (\d+); i \+\+ \) \{([\s\S]+?)(?=\})\}/g,U9=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g,
hra=0;cz.prototype=Object.create(M.prototype);cz.prototype.constructor=cz;cz.prototype.isMeshDepthMaterial=!0;cz.prototype.copy=function(u){M.prototype.copy.call(this||p,u);(this||p).depthPacking=u.depthPacking;(this||p).skinning=u.skinning;(this||p).morphTargets=u.morphTargets;(this||p).map=u.map;(this||p).alphaMap=u.alphaMap;(this||p).displacementMap=u.displacementMap;(this||p).displacementScale=u.displacementScale;(this||p).displacementBias=u.displacementBias;(this||p).wireframe=u.wireframe;(this||
p).wireframeLinewidth=u.wireframeLinewidth;return this||p};dz.prototype=Object.create(M.prototype);dz.prototype.constructor=dz;dz.prototype.isMeshDistanceMaterial=!0;dz.prototype.copy=function(u){M.prototype.copy.call(this||p,u);(this||p).referencePosition.copy(u.referencePosition);(this||p).nearDistance=u.nearDistance;(this||p).farDistance=u.farDistance;(this||p).skinning=u.skinning;(this||p).morphTargets=u.morphTargets;(this||p).map=u.map;(this||p).alphaMap=u.alphaMap;(this||p).displacementMap=
u.displacementMap;(this||p).displacementScale=u.displacementScale;(this||p).displacementBias=u.displacementBias;return this||p};UN.prototype=Object.assign(Object.create(kc.prototype),{constructor:UN,isArrayCamera:!0});ez.prototype=Object.assign(Object.create(E.prototype),{constructor:ez,isGroup:!0});Object.assign(YH.prototype,{constructor:YH,getHandSpace:function(){if(null===(this||p)._hand&&((this||p)._hand=new ez,(this||p)._hand.matrixAutoUpdate=!1,(this||p)._hand.visible=!1,(this||p)._hand.joints=
[],(this||p)._hand.inputState={pinching:!1},window.XRHand))for(var u=0;u<=window.XRHand.LITTLE_PHALANX_TIP;u++){var z=new ez;z.matrixAutoUpdate=!1;z.visible=!1;(this||p)._hand.joints.push(z);(this||p)._hand.add(z)}return(this||p)._hand},getTargetRaySpace:function(){null===(this||p)._targetRay&&((this||p)._targetRay=new ez,(this||p)._targetRay.matrixAutoUpdate=!1,(this||p)._targetRay.visible=!1);return(this||p)._targetRay},getGripSpace:function(){null===(this||p)._grip&&((this||p)._grip=new ez,(this||
p)._grip.matrixAutoUpdate=!1,(this||p)._grip.visible=!1);return(this||p)._grip},dispatchEvent:function(u){null!==(this||p)._targetRay&&(this||p)._targetRay.dispatchEvent(u);null!==(this||p)._grip&&(this||p)._grip.dispatchEvent(u);null!==(this||p)._hand&&(this||p)._hand.dispatchEvent(u);return this||p},disconnect:function(u){this.dispatchEvent({type:"disconnected",data:u});null!==(this||p)._targetRay&&((this||p)._targetRay.visible=!1);null!==(this||p)._grip&&((this||p)._grip.visible=!1);null!==(this||
p)._hand&&((this||p)._hand.visible=!1);return this||p},update:function(u,z,t){var x=null,C=null,G=null,L=(this||p)._targetRay,S=(this||p)._grip,V=(this||p)._hand;if(u)if(V&&u.hand){G=!0;for(var Z=0;Z<=window.XRHand.LITTLE_PHALANX_TIP;Z++)if(u.hand[Z]){var ja=z.getJointPose(u.hand[Z],t),ua=V.joints[Z];null!==ja&&(ua.matrix.fromArray(ja.transform.matrix),ua.matrix.decompose(ua.position,ua.rotation,ua.scale),ua.jointRadius=ja.radius);ua.visible=null!==ja;ja=V.joints[window.XRHand.INDEX_PHALANX_TIP].position.distanceTo(V.joints[window.XRHand.THUMB_PHALANX_TIP].position);
V.inputState.pinching&&.025<ja?(V.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:u.handedness,target:this||p})):!V.inputState.pinching&&.015>=ja&&(V.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:u.handedness,target:this||p}))}}else null!==L&&(x=z.getPose(u.targetRaySpace,t),null!==x&&(L.matrix.fromArray(x.transform.matrix),L.matrix.decompose(L.position,L.rotation,L.scale))),null!==S&&u.gripSpace&&(C=z.getPose(u.gripSpace,t),null!==C&&(S.matrix.fromArray(C.transform.matrix),
S.matrix.decompose(S.position,S.rotation,S.scale)));null!==L&&(L.visible=null!==x);null!==S&&(S.visible=null!==C);null!==V&&(V.visible=null!==G);return this||p}});Object.assign($9.prototype,e.prototype);cW.prototype=Object.assign(Object.create(ZH.prototype),{constructor:cW,isWebGL1Renderer:!0});var I$=function(){function u(t,x){Object.defineProperty(this||p,"isFogExp2",{value:!0});(this||p).name="";(this||p).color=new tg(t);(this||p).density=void 0!==x?x:2.5E-4}var z=u.prototype;z.clone=function(){return new u((this||
p).color,(this||p).density)};z.toJSON=function(){return{type:"FogExp2",color:(this||p).color.getHex(),density:(this||p).density}};return u}(),J$=function(){function u(t,x,C){Object.defineProperty(this||p,"isFog",{value:!0});(this||p).name="";(this||p).color=new tg(t);(this||p).near=void 0!==x?x:1;(this||p).far=void 0!==C?C:1E3}var z=u.prototype;z.clone=function(){return new u((this||p).color,(this||p).near,(this||p).far)};z.toJSON=function(){return{type:"Fog",color:(this||p).color.getHex(),near:(this||
p).near,far:(this||p).far}};return u}(),RW=function(u){function z(){var x=u.call(this||p)||this||p;Object.defineProperty(l(x),"isScene",{value:!0});x.type="Scene";x.background=null;x.environment=null;x.fog=null;x.overrideMaterial=null;x.autoUpdate=!0;"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:l(x)}));return x}g(z,u);var t=z.prototype;t.copy=function(x,C){u.prototype.copy.call(this||p,x,C);null!==x.background&&((this||p).background=x.background.clone());
null!==x.environment&&((this||p).environment=x.environment.clone());null!==x.fog&&((this||p).fog=x.fog.clone());null!==x.overrideMaterial&&((this||p).overrideMaterial=x.overrideMaterial.clone());(this||p).autoUpdate=x.autoUpdate;(this||p).matrixAutoUpdate=x.matrixAutoUpdate;return this||p};t.toJSON=function(x){var C=u.prototype.toJSON.call(this||p,x);null!==(this||p).background&&(C.object.background=(this||p).background.toJSON(x));null!==(this||p).environment&&(C.object.environment=(this||p).environment.toJSON(x));
null!==(this||p).fog&&(C.object.fog=(this||p).fog.toJSON());return C};return z}(E);Object.defineProperty(zr.prototype,"needsUpdate",{set:function(u){!0===u&&(this||p).version++}});Object.assign(zr.prototype,{isInterleavedBuffer:!0,onUploadCallback:function(){},setUsage:function(u){(this||p).usage=u;return this||p},copy:function(u){(this||p).array=new u.array.constructor(u.array);(this||p).count=u.count;(this||p).stride=u.stride;(this||p).usage=u.usage;return this||p},copyAt:function(u,z,t){u*=(this||
p).stride;t*=z.stride;for(var x=0,C=(this||p).stride;x<C;x++)(this||p).array[u+x]=z.array[t+x];return this||p},set:function(u,z){void 0===z&&(z=0);(this||p).array.set(u,z);return this||p},clone:function(u){void 0===u.arrayBuffers&&(u.arrayBuffers={});void 0===(this||p).array.buffer._uuid&&((this||p).array.buffer._uuid=ai.generateUUID());void 0===u.arrayBuffers[(this||p).array.buffer._uuid]&&(u.arrayBuffers[(this||p).array.buffer._uuid]=(this||p).array.slice(0).buffer);u=new (this||p).array.constructor(u.arrayBuffers[(this||
p).array.buffer._uuid]);u=new zr(u,(this||p).stride);u.setUsage((this||p).usage);return u},onUpload:function(u){(this||p).onUploadCallback=u;return this||p},toJSON:function(u){void 0===u.arrayBuffers&&(u.arrayBuffers={});void 0===(this||p).array.buffer._uuid&&((this||p).array.buffer._uuid=ai.generateUUID());void 0===u.arrayBuffers[(this||p).array.buffer._uuid]&&(u.arrayBuffers[(this||p).array.buffer._uuid]=Array.prototype.slice.call(new Uint32Array((this||p).array.buffer)));return{uuid:(this||p).uuid,
buffer:(this||p).array.buffer._uuid,type:(this||p).array.constructor.name,stride:(this||p).stride}}});var OB=new qc;Object.defineProperties(iz.prototype,{count:{get:function(){return(this||p).data.count}},array:{get:function(){return(this||p).data.array}},needsUpdate:{set:function(u){(this||p).data.needsUpdate=u}}});Object.assign(iz.prototype,{isInterleavedBufferAttribute:!0,applyMatrix4:function(u){for(var z=0,t=(this||p).data.count;z<t;z++)OB.x=this.getX(z),OB.y=this.getY(z),OB.z=this.getZ(z),OB.applyMatrix4(u),
this.setXYZ(z,OB.x,OB.y,OB.z);return this||p},setX:function(u,z){(this||p).data.array[u*(this||p).data.stride+(this||p).offset]=z;return this||p},setY:function(u,z){(this||p).data.array[u*(this||p).data.stride+(this||p).offset+1]=z;return this||p},setZ:function(u,z){(this||p).data.array[u*(this||p).data.stride+(this||p).offset+2]=z;return this||p},setW:function(u,z){(this||p).data.array[u*(this||p).data.stride+(this||p).offset+3]=z;return this||p},getX:function(u){return(this||p).data.array[u*(this||
p).data.stride+(this||p).offset]},getY:function(u){return(this||p).data.array[u*(this||p).data.stride+(this||p).offset+1]},getZ:function(u){return(this||p).data.array[u*(this||p).data.stride+(this||p).offset+2]},getW:function(u){return(this||p).data.array[u*(this||p).data.stride+(this||p).offset+3]},setXY:function(u,z,t){u=u*(this||p).data.stride+(this||p).offset;(this||p).data.array[u+0]=z;(this||p).data.array[u+1]=t;return this||p},setXYZ:function(u,z,t,x){u=u*(this||p).data.stride+(this||p).offset;
(this||p).data.array[u+0]=z;(this||p).data.array[u+1]=t;(this||p).data.array[u+2]=x;return this||p},setXYZW:function(u,z,t,x,C){u=u*(this||p).data.stride+(this||p).offset;(this||p).data.array[u+0]=z;(this||p).data.array[u+1]=t;(this||p).data.array[u+2]=x;(this||p).data.array[u+3]=C;return this||p},clone:function(u){if(void 0===u){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interlaved buffer attribute will deinterleave buffer data.");u=[];for(var z=0;z<(this||p).count;z++)for(var t=
z*(this||p).data.stride+(this||p).offset,x=0;x<(this||p).itemSize;x++)u.push((this||p).data.array[t+x]);return new W(new (this||p).array.constructor(u),(this||p).itemSize,(this||p).normalized)}void 0===u.interleavedBuffers&&(u.interleavedBuffers={});void 0===u.interleavedBuffers[(this||p).data.uuid]&&(u.interleavedBuffers[(this||p).data.uuid]=(this||p).data.clone(u));return new iz(u.interleavedBuffers[(this||p).data.uuid],(this||p).itemSize,(this||p).offset,(this||p).normalized)},toJSON:function(u){if(void 0===
u){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interlaved buffer attribute will deinterleave buffer data.");u=[];for(var z=0;z<(this||p).count;z++)for(var t=z*(this||p).data.stride+(this||p).offset,x=0;x<(this||p).itemSize;x++)u.push((this||p).data.array[t+x]);return{itemSize:(this||p).itemSize,type:(this||p).array.constructor.name,array:u,normalized:(this||p).normalized}}void 0===u.interleavedBuffers&&(u.interleavedBuffers={});void 0===u.interleavedBuffers[(this||p).data.uuid]&&
(u.interleavedBuffers[(this||p).data.uuid]=(this||p).data.toJSON(u));return{isInterleavedBufferAttribute:!0,itemSize:(this||p).itemSize,data:(this||p).data.uuid,offset:(this||p).offset,normalized:(this||p).normalized}}});jz.prototype=Object.create(M.prototype);jz.prototype.constructor=jz;jz.prototype.isSpriteMaterial=!0;jz.prototype.copy=function(u){M.prototype.copy.call(this||p,u);(this||p).color.copy(u.color);(this||p).map=u.map;(this||p).alphaMap=u.alphaMap;(this||p).rotation=u.rotation;(this||
p).sizeAttenuation=u.sizeAttenuation;return this||p};var tE,uI=new qc,PE=new qc,QE=new qc,uE=new Ve,bI=new Ve,e$=new fj,JO=new qc,vI=new qc,KO=new qc,K$=new Ve,SW=new Ve,L$=new Ve;aI.prototype=Object.assign(Object.create(E.prototype),{constructor:aI,isSprite:!0,raycast:function(u,z){null===u.camera&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.');PE.setFromMatrixScale((this||p).matrixWorld);e$.copy(u.camera.matrixWorld);(this||p).modelViewMatrix.multiplyMatrices(u.camera.matrixWorldInverse,
(this||p).matrixWorld);QE.setFromMatrixPosition((this||p).modelViewMatrix);u.camera.isPerspectiveCamera&&!1===(this||p).material.sizeAttenuation&&PE.multiplyScalar(-QE.z);var t=(this||p).material.rotation;if(0!==t){var x=Math.cos(t);var C=Math.sin(t)}t=(this||p).center;XN(JO.set(-.5,-.5,0),QE,t,PE,C,x);XN(vI.set(.5,-.5,0),QE,t,PE,C,x);XN(KO.set(.5,.5,0),QE,t,PE,C,x);K$.set(0,0);SW.set(1,0);L$.set(1,1);var G=u.ray.intersectTriangle(JO,vI,KO,!1,uI);if(null===G&&(XN(vI.set(-.5,.5,0),QE,t,PE,C,x),SW.set(0,
1),G=u.ray.intersectTriangle(JO,KO,vI,!1,uI),null===G))return;C=u.ray.origin.distanceTo(uI);C<u.near||C>u.far||z.push({distance:C,point:uI.clone(),uv:Xt.getUV(uI,JO,vI,KO,K$,SW,L$,new Ve),face:null,object:this||p})},copy:function(u){E.prototype.copy.call(this||p,u);void 0!==u.center&&(this||p).center.copy(u.center);(this||p).material=u.material;return this||p}});var LO=new qc,M$=new qc;cI.prototype=Object.assign(Object.create(E.prototype),{constructor:cI,isLOD:!0,copy:function(u){E.prototype.copy.call(this||
p,u,!1);for(var z=u.levels,t=0,x=z.length;t<x;t++){var C=z[t];this.addLevel(C.object.clone(),C.distance)}(this||p).autoUpdate=u.autoUpdate;return this||p},addLevel:function(u,z){void 0===z&&(z=0);z=Math.abs(z);var t=(this||p).levels,x;for(x=0;x<t.length&&!(z<t[x].distance);x++);t.splice(x,0,{distance:z,object:u});this.add(u);return this||p},getCurrentLevel:function(){return(this||p)._currentLevel},getObjectForDistance:function(u){var z=(this||p).levels;if(0<z.length){var t;var x=1;for(t=z.length;x<
t&&!(u<z[x].distance);x++);return z[x-1].object}return null},raycast:function(u,z){if(0<(this||p).levels.length){LO.setFromMatrixPosition((this||p).matrixWorld);var t=u.ray.origin.distanceTo(LO);this.getObjectForDistance(t).raycast(u,z)}},update:function(u){var z=(this||p).levels;if(1<z.length){LO.setFromMatrixPosition(u.matrixWorld);M$.setFromMatrixPosition((this||p).matrixWorld);u=LO.distanceTo(M$)/u.zoom;z[0].object.visible=!0;var t;var x=1;for(t=z.length;x<t;x++)if(u>=z[x].distance)z[x-1].object.visible=
!1,z[x].object.visible=!0;else break;for((this||p)._currentLevel=x-1;x<t;x++)z[x].object.visible=!1}},toJSON:function(u){u=E.prototype.toJSON.call(this||p,u);!1===(this||p).autoUpdate&&(u.object.autoUpdate=!1);u.object.levels=[];for(var z=(this||p).levels,t=0,x=z.length;t<x;t++){var C=z[t];u.object.levels.push({object:C.object.uuid,distance:C.distance})}return u}});YN.prototype=Object.assign(Object.create(gb.prototype),{constructor:YN,isSkinnedMesh:!0,copy:function(u){gb.prototype.copy.call(this||
p,u);(this||p).bindMode=u.bindMode;(this||p).bindMatrix.copy(u.bindMatrix);(this||p).bindMatrixInverse.copy(u.bindMatrixInverse);(this||p).skeleton=u.skeleton;return this||p},bind:function(u,z){(this||p).skeleton=u;void 0===z&&(this.updateMatrixWorld(!0),(this||p).skeleton.calculateInverses(),z=(this||p).matrixWorld);(this||p).bindMatrix.copy(z);(this||p).bindMatrixInverse.getInverse(z)},pose:function(){(this||p).skeleton.pose()},normalizeSkinWeights:function(){for(var u=new Qk,z=(this||p).geometry.attributes.skinWeight,
t=0,x=z.count;t<x;t++){u.x=z.getX(t);u.y=z.getY(t);u.z=z.getZ(t);u.w=z.getW(t);var C=1/u.manhattanLength();Infinity!==C?u.multiplyScalar(C):u.set(1,0,0,0);z.setXYZW(t,u.x,u.y,u.z,u.w)}},updateMatrixWorld:function(u){gb.prototype.updateMatrixWorld.call(this||p,u);"attached"===(this||p).bindMode?(this||p).bindMatrixInverse.getInverse((this||p).matrixWorld):"detached"===(this||p).bindMode?(this||p).bindMatrixInverse.getInverse((this||p).bindMatrix):console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+
(this||p).bindMode)},boneTransform:function(){var u=new qc,z=new Qk,t=new Qk,x=new qc,C=new fj;return function(G,L){var S=(this||p).skeleton,V=(this||p).geometry;z.fromBufferAttribute(V.attributes.skinIndex,G);t.fromBufferAttribute(V.attributes.skinWeight,G);u.fromBufferAttribute(V.attributes.position,G).applyMatrix4((this||p).bindMatrix);L.set(0,0,0);for(G=0;4>G;G++)if(V=t.getComponent(G),0!==V){var Z=z.getComponent(G);C.multiplyMatrices(S.bones[Z].matrixWorld,S.boneInverses[Z]);L.addScaledVector(x.copy(u).applyMatrix4(C),
V)}return L.applyMatrix4((this||p).bindMatrixInverse)}}()});var N$=new fj,Dra=new fj;Object.assign(ZN.prototype,{calculateInverses:function(){(this||p).boneInverses=[];for(var u=0,z=(this||p).bones.length;u<z;u++){var t=new fj;(this||p).bones[u]&&t.getInverse((this||p).bones[u].matrixWorld);(this||p).boneInverses.push(t)}},pose:function(){for(var u=0,z=(this||p).bones.length;u<z;u++){var t=(this||p).bones[u];t&&t.matrixWorld.getInverse((this||p).boneInverses[u])}u=0;for(z=(this||p).bones.length;u<
z;u++)if(t=(this||p).bones[u])t.parent&&t.parent.isBone?(t.matrix.getInverse(t.parent.matrixWorld),t.matrix.multiply(t.matrixWorld)):t.matrix.copy(t.matrixWorld),t.matrix.decompose(t.position,t.quaternion,t.scale)},update:function(){for(var u=(this||p).bones,z=(this||p).boneInverses,t=(this||p).boneMatrices,x=(this||p).boneTexture,C=0,G=u.length;C<G;C++)N$.multiplyMatrices(u[C]?u[C].matrixWorld:Dra,z[C]),N$.toArray(t,16*C);void 0!==x&&(x.needsUpdate=!0)},clone:function(){return new ZN((this||p).bones,
(this||p).boneInverses)},getBoneByName:function(u){for(var z=0,t=(this||p).bones.length;z<t;z++){var x=(this||p).bones[z];if(x.name===u)return x}},dispose:function(){(this||p).boneTexture&&((this||p).boneTexture.dispose(),(this||p).boneTexture=void 0)}});dW.prototype=Object.assign(Object.create(E.prototype),{constructor:dW,isBone:!0});var O$=new fj,P$=new fj,MO=[],wI=new gb;$N.prototype=Object.assign(Object.create(gb.prototype),{constructor:$N,isInstancedMesh:!0,copy:function(u){gb.prototype.copy.call(this||
p,u);(this||p).instanceMatrix.copy(u.instanceMatrix);(this||p).count=u.count;return this||p},setColorAt:function(u,z){null===(this||p).instanceColor&&((this||p).instanceColor=new W(new Float32Array(3*(this||p).count),3));z.toArray((this||p).instanceColor.array,3*u)},getMatrixAt:function(u,z){z.fromArray((this||p).instanceMatrix.array,16*u)},raycast:function(u,z){var t=(this||p).matrixWorld,x=(this||p).count;wI.geometry=(this||p).geometry;wI.material=(this||p).material;if(void 0!==wI.material)for(var C=
0;C<x;C++){this.getMatrixAt(C,O$);P$.multiplyMatrices(t,O$);wI.matrixWorld=P$;wI.raycast(u,MO);for(var G=0,L=MO.length;G<L;G++){var S=MO[G];S.instanceId=C;S.object=this||p;z.push(S)}MO.length=0}},setMatrixAt:function(u,z){z.toArray((this||p).instanceMatrix.array,16*u)},updateMorphTargets:function(){}});Pl.prototype=Object.create(M.prototype);Pl.prototype.constructor=Pl;Pl.prototype.isLineBasicMaterial=!0;Pl.prototype.copy=function(u){M.prototype.copy.call(this||p,u);(this||p).color.copy(u.color);
(this||p).linewidth=u.linewidth;(this||p).linecap=u.linecap;(this||p).linejoin=u.linejoin;(this||p).morphTargets=u.morphTargets;return this||p};var Q$=new qc,R$=new qc,S$=new fj,NO=new EE,xI=new gx;Is.prototype=Object.assign(Object.create(E.prototype),{constructor:Is,isLine:!0,copy:function(u){E.prototype.copy.call(this||p,u);(this||p).material=u.material;(this||p).geometry=u.geometry;return this||p},computeLineDistances:function(){var u=(this||p).geometry;if(u.isBufferGeometry)if(null===u.index){for(var z=
u.attributes.position,t=[0],x=1,C=z.count;x<C;x++)Q$.fromBufferAttribute(z,x-1),R$.fromBufferAttribute(z,x),t[x]=t[x-1],t[x]+=Q$.distanceTo(R$);u.setAttribute("lineDistance",new U(t,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(u.isGeometry)for(z=u.vertices,u=u.lineDistances,u[0]=0,t=1,x=z.length;t<x;t++)u[t]=u[t-1],u[t]+=z[t-1].distanceTo(z[t]);return this||p},raycast:function(u,z){var t=(this||p).geometry,x=(this||
p).matrixWorld,C=u.params.Line.threshold;null===t.boundingSphere&&t.computeBoundingSphere();xI.copy(t.boundingSphere);xI.applyMatrix4(x);xI.radius+=C;if(!1!==u.ray.intersectsSphere(xI)){S$.getInverse(x);NO.copy(u.ray).applyMatrix4(S$);x=C/(((this||p).scale.x+(this||p).scale.y+(this||p).scale.z)/3);x*=x;var G=new qc,L=new qc;C=new qc;var S=new qc,V=(this||p).isLineSegments?2:1;if(t.isBufferGeometry){var Z=t.index;t=t.attributes.position;if(null!==Z){Z=Z.array;for(var ja=0,ua=Z.length-1;ja<ua;ja+=V){var Ca=
Z[ja+1];G.fromBufferAttribute(t,Z[ja]);L.fromBufferAttribute(t,Ca);NO.distanceSqToSegment(G,L,S,C)>x||(S.applyMatrix4((this||p).matrixWorld),Ca=u.ray.origin.distanceTo(S),Ca<u.near||Ca>u.far||z.push({distance:Ca,point:C.clone().applyMatrix4((this||p).matrixWorld),index:ja,face:null,faceIndex:null,object:this||p}))}}else for(Z=0,ja=t.count-1;Z<ja;Z+=V)G.fromBufferAttribute(t,Z),L.fromBufferAttribute(t,Z+1),NO.distanceSqToSegment(G,L,S,C)>x||(S.applyMatrix4((this||p).matrixWorld),ua=u.ray.origin.distanceTo(S),
ua<u.near||ua>u.far||z.push({distance:ua,point:C.clone().applyMatrix4((this||p).matrixWorld),index:Z,face:null,faceIndex:null,object:this||p}))}else if(t.isGeometry)for(G=t.vertices,L=G.length,t=0;t<L-1;t+=V)NO.distanceSqToSegment(G[t],G[t+1],S,C)>x||(S.applyMatrix4((this||p).matrixWorld),Z=u.ray.origin.distanceTo(S),Z<u.near||Z>u.far||z.push({distance:Z,point:C.clone().applyMatrix4((this||p).matrixWorld),index:t,face:null,faceIndex:null,object:this||p}))}},updateMorphTargets:function(){var u=(this||
p).geometry;if(u.isBufferGeometry){u=u.morphAttributes;var z=Object.keys(u);if(0<z.length&&(u=u[z[0]],void 0!==u)){(this||p).morphTargetInfluences=[];(this||p).morphTargetDictionary={};z=0;for(var t=u.length;z<t;z++){var x=u[z].name||String(z);(this||p).morphTargetInfluences.push(0);(this||p).morphTargetDictionary[x]=z}}}else u=u.morphTargets,void 0!==u&&0<u.length&&console.error("THREE.Line.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}});var OO=new qc,
PO=new qc;Up.prototype=Object.assign(Object.create(Is.prototype),{constructor:Up,isLineSegments:!0,computeLineDistances:function(){var u=(this||p).geometry;if(u.isBufferGeometry)if(null===u.index){for(var z=u.attributes.position,t=[],x=0,C=z.count;x<C;x+=2)OO.fromBufferAttribute(z,x),PO.fromBufferAttribute(z,x+1),t[x]=0===x?0:t[x-1],t[x+1]=t[x]+OO.distanceTo(PO);u.setAttribute("lineDistance",new U(t,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");
else if(u.isGeometry)for(z=u.vertices,u=u.lineDistances,t=0,x=z.length;t<x;t+=2)OO.copy(z[t]),PO.copy(z[t+1]),u[t]=0===t?0:u[t-1],u[t+1]=u[t]+OO.distanceTo(PO);return this||p}});aO.prototype=Object.assign(Object.create(Is.prototype),{constructor:aO,isLineLoop:!0});$t.prototype=Object.create(M.prototype);$t.prototype.constructor=$t;$t.prototype.isPointsMaterial=!0;$t.prototype.copy=function(u){M.prototype.copy.call(this||p,u);(this||p).color.copy(u.color);(this||p).map=u.map;(this||p).alphaMap=u.alphaMap;
(this||p).size=u.size;(this||p).sizeAttenuation=u.sizeAttenuation;(this||p).morphTargets=u.morphTargets;return this||p};var T$=new fj,fW=new EE,yI=new gx,QO=new qc;vE.prototype=Object.assign(Object.create(E.prototype),{constructor:vE,isPoints:!0,copy:function(u){E.prototype.copy.call(this||p,u);(this||p).material=u.material;(this||p).geometry=u.geometry;return this||p},raycast:function(u,z){var t=(this||p).geometry,x=(this||p).matrixWorld,C=u.params.Points.threshold;null===t.boundingSphere&&t.computeBoundingSphere();
yI.copy(t.boundingSphere);yI.applyMatrix4(x);yI.radius+=C;if(!1!==u.ray.intersectsSphere(yI))if(T$.getInverse(x),fW.copy(u.ray).applyMatrix4(T$),C/=((this||p).scale.x+(this||p).scale.y+(this||p).scale.z)/3,C*=C,t.isBufferGeometry){var G=t.index;t=t.attributes.position;if(null!==G){G=G.array;for(var L=0,S=G.length;L<S;L++){var V=G[L];QO.fromBufferAttribute(t,V);eW(QO,V,C,x,u,z,this||p)}}else for(G=0,L=t.count;G<L;G++)QO.fromBufferAttribute(t,G),eW(QO,G,C,x,u,z,this||p)}else for(t=t.vertices,G=0,L=
t.length;G<L;G++)eW(t[G],G,C,x,u,z,this||p)},updateMorphTargets:function(){var u=(this||p).geometry;if(u.isBufferGeometry){u=u.morphAttributes;var z=Object.keys(u);if(0<z.length&&(u=u[z[0]],void 0!==u)){(this||p).morphTargetInfluences=[];(this||p).morphTargetDictionary={};z=0;for(var t=u.length;z<t;z++){var x=u[z].name||String(z);(this||p).morphTargetInfluences.push(0);(this||p).morphTargetDictionary[x]=z}}}else u=u.morphTargets,void 0!==u&&0<u.length&&console.error("THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}});
gW.prototype=Object.assign(Object.create(r.prototype),{constructor:gW,isVideoTexture:!0,update:function(){var u=(this||p).image;!1==="requestVideoFrameCallback"in u&&u.readyState>=u.HAVE_CURRENT_DATA&&((this||p).needsUpdate=!0)}});wE.prototype=Object.create(r.prototype);wE.prototype.constructor=wE;wE.prototype.isCompressedTexture=!0;dI.prototype=Object.create(r.prototype);dI.prototype.constructor=dI;dI.prototype.isCanvasTexture=!0;eI.prototype=Object.create(r.prototype);eI.prototype.constructor=eI;
eI.prototype.isDepthTexture=!0;var mra=0,Qv=new fj,TW=new E,RO=new qc;Rk.prototype=Object.assign(Object.create(e.prototype),{constructor:Rk,isGeometry:!0,applyMatrix4:function(u){for(var z=(new Tp).getNormalMatrix(u),t=0,x=(this||p).vertices.length;t<x;t++)(this||p).vertices[t].applyMatrix4(u);u=0;for(t=(this||p).faces.length;u<t;u++){x=(this||p).faces[u];x.normal.applyMatrix3(z).normalize();for(var C=0,G=x.vertexNormals.length;C<G;C++)x.vertexNormals[C].applyMatrix3(z).normalize()}null!==(this||
p).boundingBox&&this.computeBoundingBox();null!==(this||p).boundingSphere&&this.computeBoundingSphere();(this||p).verticesNeedUpdate=!0;(this||p).normalsNeedUpdate=!0;return this||p},rotateX:function(u){Qv.makeRotationX(u);this.applyMatrix4(Qv);return this||p},rotateY:function(u){Qv.makeRotationY(u);this.applyMatrix4(Qv);return this||p},rotateZ:function(u){Qv.makeRotationZ(u);this.applyMatrix4(Qv);return this||p},translate:function(u,z,t){Qv.makeTranslation(u,z,t);this.applyMatrix4(Qv);return this||
p},scale:function(u,z,t){Qv.makeScale(u,z,t);this.applyMatrix4(Qv);return this||p},lookAt:function(u){TW.lookAt(u);TW.updateMatrix();this.applyMatrix4(TW.matrix);return this||p},fromBufferGeometry:function(u){function z(bb,$a,ub,pb){var Rc=void 0===S?[]:[t.colors[bb].clone(),t.colors[$a].clone(),t.colors[ub].clone()],xc=void 0===L?[]:[(new qc).fromBufferAttribute(L,bb),(new qc).fromBufferAttribute(L,$a),(new qc).fromBufferAttribute(L,ub)];pb=new VH(bb,$a,ub,xc,Rc,pb);t.faces.push(pb);void 0!==V&&
t.faceVertexUvs[0].push([(new Ve).fromBufferAttribute(V,bb),(new Ve).fromBufferAttribute(V,$a),(new Ve).fromBufferAttribute(V,ub)]);void 0!==Z&&t.faceVertexUvs[1].push([(new Ve).fromBufferAttribute(Z,bb),(new Ve).fromBufferAttribute(Z,$a),(new Ve).fromBufferAttribute(Z,ub)])}var t=this||p,x=null!==u.index?u.index:void 0,C=u.attributes;if(void 0===C.position)return console.error("THREE.Geometry.fromBufferGeometry(): Position attribute required for conversion."),this||p;var G=C.position,L=C.normal,
S=C.color,V=C.uv,Z=C.uv2;void 0!==Z&&((this||p).faceVertexUvs[1]=[]);for(C=0;C<G.count;C++)t.vertices.push((new qc).fromBufferAttribute(G,C)),void 0!==S&&t.colors.push((new tg).fromBufferAttribute(S,C));C=u.groups;if(0<C.length)for(G=0;G<C.length;G++){var ja=C[G],ua=ja.start,Ca=ua;for(ua+=ja.count;Ca<ua;Ca+=3)void 0!==x?z(x.getX(Ca),x.getX(Ca+1),x.getX(Ca+2),ja.materialIndex):z(Ca,Ca+1,Ca+2,ja.materialIndex)}else if(void 0!==x)for(C=0;C<x.count;C+=3)z(x.getX(C),x.getX(C+1),x.getX(C+2));else for(x=
0;x<G.count;x+=3)z(x,x+1,x+2);this.computeFaceNormals();null!==u.boundingBox&&((this||p).boundingBox=u.boundingBox.clone());null!==u.boundingSphere&&((this||p).boundingSphere=u.boundingSphere.clone());return this||p},center:function(){this.computeBoundingBox();(this||p).boundingBox.getCenter(RO).negate();this.translate(RO.x,RO.y,RO.z);return this||p},normalize:function(){this.computeBoundingSphere();var u=(this||p).boundingSphere.center,z=(this||p).boundingSphere.radius;z=0===z?1:1/z;var t=new fj;
t.set(z,0,0,-z*u.x,0,z,0,-z*u.y,0,0,z,-z*u.z,0,0,0,1);this.applyMatrix4(t);return this||p},computeFaceNormals:function(){for(var u=new qc,z=new qc,t=0,x=(this||p).faces.length;t<x;t++){var C=(this||p).faces[t],G=(this||p).vertices[C.a],L=(this||p).vertices[C.b];u.subVectors((this||p).vertices[C.c],L);z.subVectors(G,L);u.cross(z);u.normalize();C.normal.copy(u)}},computeVertexNormals:function(u){void 0===u&&(u=!0);for(var z=Array((this||p).vertices.length),t=0,x=(this||p).vertices.length;t<x;t++)z[t]=
new qc;if(u){u=new qc;t=new qc;x=0;for(var C=(this||p).faces.length;x<C;x++){var G=(this||p).faces[x],L=(this||p).vertices[G.a],S=(this||p).vertices[G.b];u.subVectors((this||p).vertices[G.c],S);t.subVectors(L,S);u.cross(t);z[G.a].add(u);z[G.b].add(u);z[G.c].add(u)}}else for(this.computeFaceNormals(),u=0,t=(this||p).faces.length;u<t;u++)x=(this||p).faces[u],z[x.a].add(x.normal),z[x.b].add(x.normal),z[x.c].add(x.normal);u=0;for(t=(this||p).vertices.length;u<t;u++)z[u].normalize();u=0;for(t=(this||p).faces.length;u<
t;u++)x=(this||p).faces[u],C=x.vertexNormals,3===C.length?(C[0].copy(z[x.a]),C[1].copy(z[x.b]),C[2].copy(z[x.c])):(C[0]=z[x.a].clone(),C[1]=z[x.b].clone(),C[2]=z[x.c].clone());0<(this||p).faces.length&&((this||p).normalsNeedUpdate=!0)},computeFlatVertexNormals:function(){this.computeFaceNormals();for(var u=0,z=(this||p).faces.length;u<z;u++){var t=(this||p).faces[u],x=t.vertexNormals;3===x.length?(x[0].copy(t.normal),x[1].copy(t.normal),x[2].copy(t.normal)):(x[0]=t.normal.clone(),x[1]=t.normal.clone(),
x[2]=t.normal.clone())}0<(this||p).faces.length&&((this||p).normalsNeedUpdate=!0)},computeMorphNormals:function(){for(var u=0,z=(this||p).faces.length;u<z;u++){var t=(this||p).faces[u];t.__originalFaceNormal?t.__originalFaceNormal.copy(t.normal):t.__originalFaceNormal=t.normal.clone();t.__originalVertexNormals||(t.__originalVertexNormals=[]);for(var x=0,C=t.vertexNormals.length;x<C;x++)t.__originalVertexNormals[x]?t.__originalVertexNormals[x].copy(t.vertexNormals[x]):t.__originalVertexNormals[x]=
t.vertexNormals[x].clone()}u=new Rk;u.faces=(this||p).faces;z=0;for(t=(this||p).morphTargets.length;z<t;z++){if(!(this||p).morphNormals[z]){(this||p).morphNormals[z]={};(this||p).morphNormals[z].faceNormals=[];(this||p).morphNormals[z].vertexNormals=[];x=(this||p).morphNormals[z].faceNormals;C=(this||p).morphNormals[z].vertexNormals;for(var G=0,L=(this||p).faces.length;G<L;G++){var S=new qc,V={a:new qc,b:new qc,c:new qc};x.push(S);C.push(V)}}x=(this||p).morphNormals[z];u.vertices=(this||p).morphTargets[z].vertices;
u.computeFaceNormals();u.computeVertexNormals();C=0;for(G=(this||p).faces.length;C<G;C++)L=(this||p).faces[C],S=x.vertexNormals[C],x.faceNormals[C].copy(L.normal),S.a.copy(L.vertexNormals[0]),S.b.copy(L.vertexNormals[1]),S.c.copy(L.vertexNormals[2])}u=0;for(z=(this||p).faces.length;u<z;u++)t=(this||p).faces[u],t.normal=t.__originalFaceNormal,t.vertexNormals=t.__originalVertexNormals},computeBoundingBox:function(){null===(this||p).boundingBox&&((this||p).boundingBox=new Ov);(this||p).boundingBox.setFromPoints((this||
p).vertices)},computeBoundingSphere:function(){null===(this||p).boundingSphere&&((this||p).boundingSphere=new gx);(this||p).boundingSphere.setFromPoints((this||p).vertices)},merge:function(u,z,t){if(u&&u.isGeometry){var x,C=(this||p).vertices.length,G=(this||p).vertices,L=u.vertices,S=(this||p).faces,V=u.faces,Z=(this||p).colors,ja=u.colors;void 0===t&&(t=0);void 0!==z&&(x=(new Tp).getNormalMatrix(z));for(var ua=0,Ca=L.length;ua<Ca;ua++){var bb=L[ua].clone();void 0!==z&&bb.applyMatrix4(z);G.push(bb)}z=
0;for(G=ja.length;z<G;z++)Z.push(ja[z].clone());Z=0;for(ja=V.length;Z<ja;Z++){z=V[Z];Ca=z.vertexNormals;G=z.vertexColors;L=new VH(z.a+C,z.b+C,z.c+C);L.normal.copy(z.normal);void 0!==x&&L.normal.applyMatrix3(x).normalize();bb=0;for(var $a=Ca.length;bb<$a;bb++)ua=Ca[bb].clone(),void 0!==x&&ua.applyMatrix3(x).normalize(),L.vertexNormals.push(ua);L.color.copy(z.color);Ca=0;for(bb=G.length;Ca<bb;Ca++)ua=G[Ca],L.vertexColors.push(ua.clone());L.materialIndex=z.materialIndex+t;S.push(L)}t=0;for(x=u.faceVertexUvs.length;t<
x;t++)for(C=u.faceVertexUvs[t],void 0===(this||p).faceVertexUvs[t]&&((this||p).faceVertexUvs[t]=[]),S=0,V=C.length;S<V;S++){Z=C[S];ja=[];z=0;for(G=Z.length;z<G;z++)ja.push(Z[z].clone());(this||p).faceVertexUvs[t].push(ja)}}else console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",u)},mergeMesh:function(u){u&&u.isMesh?(u.matrixAutoUpdate&&u.updateMatrix(),this.merge(u.geometry,u.matrix)):console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",
u)},mergeVertices:function(){for(var u={},z=[],t=[],x=Math.pow(10,4),C=0,G=(this||p).vertices.length;C<G;C++){var L=(this||p).vertices[C];L=Math.round(L.x*x)+"_"+Math.round(L.y*x)+"_"+Math.round(L.z*x);void 0===u[L]?(u[L]=C,z.push((this||p).vertices[C]),t[C]=z.length-1):t[C]=t[u[L]]}u=[];x=0;for(C=(this||p).faces.length;x<C;x++)for(G=(this||p).faces[x],G.a=t[G.a],G.b=t[G.b],G.c=t[G.c],G=[G.a,G.b,G.c],L=0;3>L;L++)if(G[L]===G[(L+1)%3]){u.push(x);break}for(t=u.length-1;0<=t;t--)for(x=u[t],(this||p).faces.splice(x,
1),C=0,G=(this||p).faceVertexUvs.length;C<G;C++)(this||p).faceVertexUvs[C].splice(x,1);t=(this||p).vertices.length-z.length;(this||p).vertices=z;return t},setFromPoints:function(u){(this||p).vertices=[];for(var z=0,t=u.length;z<t;z++){var x=u[z];(this||p).vertices.push(new qc(x.x,x.y,x.z||0))}return this||p},sortFacesByMaterialIndex:function(){for(var u=(this||p).faces,z=u.length,t=0;t<z;t++)u[t]._id=t;u.sort(function(V,Z){return V.materialIndex-Z.materialIndex});t=(this||p).faceVertexUvs[0];var x=
(this||p).faceVertexUvs[1],C,G;t&&t.length===z&&(C=[]);x&&x.length===z&&(G=[]);for(var L=0;L<z;L++){var S=u[L]._id;C&&C.push(t[S]);G&&G.push(x[S])}C&&((this||p).faceVertexUvs[0]=C);G&&((this||p).faceVertexUvs[1]=G)},toJSON:function(){function u(nd,Nc,Cd){return Cd?nd|1<<Nc:nd&~(1<<Nc)}function z(nd){var Nc=nd.x.toString()+nd.y.toString()+nd.z.toString();if(void 0!==Z[Nc])return Z[Nc];Z[Nc]=V.length/3;V.push(nd.x,nd.y,nd.z);return Z[Nc]}function t(nd){var Nc=nd.r.toString()+nd.g.toString()+nd.b.toString();
if(void 0!==ua[Nc])return ua[Nc];ua[Nc]=ja.length;ja.push(nd.getHex());return ua[Nc]}function x(nd){var Nc=nd.x.toString()+nd.y.toString();if(void 0!==bb[Nc])return bb[Nc];bb[Nc]=Ca.length/2;Ca.push(nd.x,nd.y);return bb[Nc]}var C={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};C.uuid=(this||p).uuid;C.type=(this||p).type;""!==(this||p).name&&(C.name=(this||p).name);if(void 0!==(this||p).parameters){var G=(this||p).parameters,L;for(L in G)void 0!==G[L]&&(C[L]=G[L]);return C}G=[];
for(L=0;L<(this||p).vertices.length;L++){var S=(this||p).vertices[L];G.push(S.x,S.y,S.z)}L=[];var V=[],Z={},ja=[],ua={},Ca=[],bb={};for(S=0;S<(this||p).faces.length;S++){var $a=(this||p).faces[S],ub=void 0!==(this||p).faceVertexUvs[0][S],pb=0<$a.normal.length(),Rc=0<$a.vertexNormals.length,xc=1!==$a.color.r||1!==$a.color.g||1!==$a.color.b,kd=0<$a.vertexColors.length,Ec=0;Ec=u(Ec,0,0);Ec=u(Ec,1,!0);Ec=u(Ec,2,!1);Ec=u(Ec,3,ub);Ec=u(Ec,4,pb);Ec=u(Ec,5,Rc);Ec=u(Ec,6,xc);Ec=u(Ec,7,kd);L.push(Ec);L.push($a.a,
$a.b,$a.c);L.push($a.materialIndex);ub&&(ub=(this||p).faceVertexUvs[0][S],L.push(x(ub[0]),x(ub[1]),x(ub[2])));pb&&L.push(z($a.normal));Rc&&(pb=$a.vertexNormals,L.push(z(pb[0]),z(pb[1]),z(pb[2])));xc&&L.push(t($a.color));kd&&($a=$a.vertexColors,L.push(t($a[0]),t($a[1]),t($a[2])))}C.data={};C.data.vertices=G;C.data.normals=V;0<ja.length&&(C.data.colors=ja);0<Ca.length&&(C.data.uvs=[Ca]);C.data.faces=L;return C},clone:function(){return(new Rk).copy(this||p)},copy:function(u){(this||p).vertices=[];(this||
p).colors=[];(this||p).faces=[];(this||p).faceVertexUvs=[[]];(this||p).morphTargets=[];(this||p).morphNormals=[];(this||p).skinWeights=[];(this||p).skinIndices=[];(this||p).lineDistances=[];(this||p).boundingBox=null;(this||p).boundingSphere=null;(this||p).name=u.name;for(var z=u.vertices,t=0,x=z.length;t<x;t++)(this||p).vertices.push(z[t].clone());z=u.colors;t=0;for(x=z.length;t<x;t++)(this||p).colors.push(z[t].clone());z=u.faces;t=0;for(x=z.length;t<x;t++)(this||p).faces.push(z[t].clone());z=0;
for(t=u.faceVertexUvs.length;z<t;z++){x=u.faceVertexUvs[z];void 0===(this||p).faceVertexUvs[z]&&((this||p).faceVertexUvs[z]=[]);for(var C=0,G=x.length;C<G;C++){for(var L=x[C],S=[],V=0,Z=L.length;V<Z;V++)S.push(L[V].clone());(this||p).faceVertexUvs[z].push(S)}}z=u.morphTargets;t=0;for(x=z.length;t<x;t++){C={};C.name=z[t].name;if(void 0!==z[t].vertices)for(C.vertices=[],G=0,L=z[t].vertices.length;G<L;G++)C.vertices.push(z[t].vertices[G].clone());if(void 0!==z[t].normals)for(C.normals=[],G=0,L=z[t].normals.length;G<
L;G++)C.normals.push(z[t].normals[G].clone());(this||p).morphTargets.push(C)}z=u.morphNormals;t=0;for(x=z.length;t<x;t++){C={};if(void 0!==z[t].vertexNormals)for(C.vertexNormals=[],G=0,L=z[t].vertexNormals.length;G<L;G++)S=z[t].vertexNormals[G],V={},V.a=S.a.clone(),V.b=S.b.clone(),V.c=S.c.clone(),C.vertexNormals.push(V);if(void 0!==z[t].faceNormals)for(C.faceNormals=[],G=0,L=z[t].faceNormals.length;G<L;G++)C.faceNormals.push(z[t].faceNormals[G].clone());(this||p).morphNormals.push(C)}z=u.skinWeights;
t=0;for(x=z.length;t<x;t++)(this||p).skinWeights.push(z[t].clone());z=u.skinIndices;t=0;for(x=z.length;t<x;t++)(this||p).skinIndices.push(z[t].clone());z=u.lineDistances;t=0;for(x=z.length;t<x;t++)(this||p).lineDistances.push(z[t]);z=u.boundingBox;null!==z&&((this||p).boundingBox=z.clone());z=u.boundingSphere;null!==z&&((this||p).boundingSphere=z.clone());(this||p).elementsNeedUpdate=u.elementsNeedUpdate;(this||p).verticesNeedUpdate=u.verticesNeedUpdate;(this||p).uvsNeedUpdate=u.uvsNeedUpdate;(this||
p).normalsNeedUpdate=u.normalsNeedUpdate;(this||p).colorsNeedUpdate=u.colorsNeedUpdate;(this||p).lineDistancesNeedUpdate=u.lineDistancesNeedUpdate;(this||p).groupsNeedUpdate=u.groupsNeedUpdate;return this||p},dispose:function(){this.dispatchEvent({type:"dispose"})}});var UW=function(u){function z(t,x,C,G,L,S){var V=u.call(this||p)||this||p;V.type="BoxGeometry";V.parameters={width:t,height:x,depth:C,widthSegments:G,heightSegments:L,depthSegments:S};V.fromBufferGeometry(new WH(t,x,C,G,L,S));V.mergeVertices();
return V}g(z,u);return z}(Rk),VW=function(u){function z(t,x,C,G){var L=u.call(this||p)||this||p;L.type="CircleBufferGeometry";L.parameters={radius:t,segments:x,thetaStart:C,thetaLength:G};t=t||1;x=void 0!==x?Math.max(3,x):8;C=void 0!==C?C:0;G=void 0!==G?G:2*Math.PI;var S=[],V=[],Z=[],ja=[],ua=new qc,Ca=new Ve;V.push(0,0,0);Z.push(0,0,1);ja.push(.5,.5);for(var bb=0,$a=3;bb<=x;bb++,$a+=3){var ub=C+bb/x*G;ua.x=t*Math.cos(ub);ua.y=t*Math.sin(ub);V.push(ua.x,ua.y,ua.z);Z.push(0,0,1);Ca.x=(V[$a]/t+1)/2;
Ca.y=(V[$a+1]/t+1)/2;ja.push(Ca.x,Ca.y)}for(t=1;t<=x;t++)S.push(t,t+1,0);L.setIndex(S);L.setAttribute("position",new U(V,3));L.setAttribute("normal",new U(Z,3));L.setAttribute("uv",new U(ja,2));return L}g(z,u);return z}(oa),U$=function(u){function z(t,x,C,G){var L=u.call(this||p)||this||p;L.type="CircleGeometry";L.parameters={radius:t,segments:x,thetaStart:C,thetaLength:G};L.fromBufferGeometry(new VW(t,x,C,G));L.mergeVertices();return L}g(z,u);return z}(Rk),zI=function(u){function z(t,x,C,G,L,S,V,
Z){function ja(nd){for(var Nc=Rc,Cd=new Ve,Xd=new qc,yd=0,Ad=!0===nd?t:x,Ce=!0===nd?1:-1,gf=1;gf<=G;gf++)$a.push(0,kd*Ce,0),ub.push(0,Ce,0),pb.push(.5,.5),Rc++;gf=Rc;for(var hg=0;hg<=G;hg++){var Cf=hg/G*Z+V,Yf=Math.cos(Cf);Cf=Math.sin(Cf);Xd.x=Ad*Cf;Xd.y=kd*Ce;Xd.z=Ad*Yf;$a.push(Xd.x,Xd.y,Xd.z);ub.push(0,Ce,0);Cd.x=.5*Yf+.5;Cd.y=.5*Cf*Ce+.5;pb.push(Cd.x,Cd.y);Rc++}for(Cd=0;Cd<G;Cd++)Xd=Nc+Cd,Ad=gf+Cd,!0===nd?bb.push(Ad,Ad+1,Xd):bb.push(Ad+1,Ad,Xd),yd+=3;Ca.addGroup(Ec,yd,!0===nd?1:2);Ec+=yd}var ua=
u.call(this||p)||this||p;ua.type="CylinderBufferGeometry";ua.parameters={radiusTop:t,radiusBottom:x,height:C,radialSegments:G,heightSegments:L,openEnded:S,thetaStart:V,thetaLength:Z};var Ca=l(ua);t=void 0!==t?t:1;x=void 0!==x?x:1;C=C||1;G=Math.floor(G)||8;L=Math.floor(L)||1;S=void 0!==S?S:!1;V=void 0!==V?V:0;Z=void 0!==Z?Z:2*Math.PI;var bb=[],$a=[],ub=[],pb=[],Rc=0,xc=[],kd=C/2,Ec=0;(function(){for(var nd=new qc,Nc=new qc,Cd=0,Xd=(x-t)/C,yd=0;yd<=L;yd++){for(var Ad=[],Ce=yd/L,gf=Ce*(x-t)+t,hg=0;hg<=
G;hg++){var Cf=hg/G,Yf=Cf*Z+V,gh=Math.sin(Yf);Yf=Math.cos(Yf);Nc.x=gf*gh;Nc.y=-Ce*C+kd;Nc.z=gf*Yf;$a.push(Nc.x,Nc.y,Nc.z);nd.set(gh,Xd,Yf).normalize();ub.push(nd.x,nd.y,nd.z);pb.push(Cf,1-Ce);Ad.push(Rc++)}xc.push(Ad)}for(nd=0;nd<G;nd++)for(Nc=0;Nc<L;Nc++)Xd=xc[Nc+1][nd],yd=xc[Nc+1][nd+1],Ad=xc[Nc][nd+1],bb.push(xc[Nc][nd],Xd,Ad),bb.push(Xd,yd,Ad),Cd+=6;Ca.addGroup(Ec,Cd,0);Ec+=Cd})();!1===S&&(0<t&&ja(!0),0<x&&ja(!1));ua.setIndex(bb);ua.setAttribute("position",new U($a,3));ua.setAttribute("normal",
new U(ub,3));ua.setAttribute("uv",new U(pb,2));return ua}g(z,u);return z}(oa),WW=function(u){function z(t,x,C,G,L,S,V,Z){var ja=u.call(this||p)||this||p;ja.type="CylinderGeometry";ja.parameters={radiusTop:t,radiusBottom:x,height:C,radialSegments:G,heightSegments:L,openEnded:S,thetaStart:V,thetaLength:Z};ja.fromBufferGeometry(new zI(t,x,C,G,L,S,V,Z));ja.mergeVertices();return ja}g(z,u);return z}(Rk),V$=function(u){function z(t,x,C,G,L,S,V){var Z=u.call(this||p,0,t,x,C,G,L,S,V)||this||p;Z.type="ConeGeometry";
Z.parameters={radius:t,height:x,radialSegments:C,heightSegments:G,openEnded:L,thetaStart:S,thetaLength:V};return Z}g(z,u);return z}(WW),W$=function(u){function z(t,x,C,G,L,S,V){var Z=u.call(this||p,0,t,x,C,G,L,S,V)||this||p;Z.type="ConeBufferGeometry";Z.parameters={radius:t,height:x,radialSegments:C,heightSegments:G,openEnded:L,thetaStart:S,thetaLength:V};return Z}g(z,u);return z}(zI),PB=function(u){function z(t,x,C,G){function L(Ca){ja.push(Ca.x,Ca.y,Ca.z)}function S(Ca,bb){Ca*=3;bb.x=t[Ca+0];bb.y=
t[Ca+1];bb.z=t[Ca+2]}function V(Ca,bb,$a,ub){0>ub&&1===Ca.x&&(ua[bb]=Ca.x-1);0===$a.x&&0===$a.z&&(ua[bb]=ub/2/Math.PI+.5)}var Z=u.call(this||p)||this||p;Z.type="PolyhedronBufferGeometry";Z.parameters={vertices:t,indices:x,radius:C,detail:G};C=C||1;G=G||0;var ja=[],ua=[];(function(Ca){for(var bb=new qc,$a=new qc,ub=new qc,pb=0;pb<x.length;pb+=3){S(x[pb+0],bb);S(x[pb+1],$a);S(x[pb+2],ub);for(var Rc=bb,xc=$a,kd=ub,Ec=Ca+1,nd=[],Nc=0;Nc<=Ec;Nc++){nd[Nc]=[];for(var Cd=Rc.clone().lerp(kd,Nc/Ec),Xd=xc.clone().lerp(kd,
Nc/Ec),yd=Ec-Nc,Ad=0;Ad<=yd;Ad++)nd[Nc][Ad]=0===Ad&&Nc===Ec?Cd:Cd.clone().lerp(Xd,Ad/yd)}for(Rc=0;Rc<Ec;Rc++)for(xc=0;xc<2*(Ec-Rc)-1;xc++)kd=Math.floor(xc/2),0===xc%2?(L(nd[Rc][kd+1]),L(nd[Rc+1][kd]),L(nd[Rc][kd])):(L(nd[Rc][kd+1]),L(nd[Rc+1][kd+1]),L(nd[Rc+1][kd]))}})(G);(function(Ca){for(var bb=new qc,$a=0;$a<ja.length;$a+=3)bb.x=ja[$a+0],bb.y=ja[$a+1],bb.z=ja[$a+2],bb.normalize().multiplyScalar(Ca),ja[$a+0]=bb.x,ja[$a+1]=bb.y,ja[$a+2]=bb.z})(C);(function(){for(var Ca=new qc,bb=0;bb<ja.length;bb+=
3)Ca.x=ja[bb+0],Ca.y=ja[bb+1],Ca.z=ja[bb+2],ua.push(Math.atan2(Ca.z,-Ca.x)/2/Math.PI+.5,1-(Math.atan2(-Ca.y,Math.sqrt(Ca.x*Ca.x+Ca.z*Ca.z))/Math.PI+.5));Ca=new qc;bb=new qc;for(var $a=new qc,ub=new qc,pb=new Ve,Rc=new Ve,xc=new Ve,kd=0,Ec=0;kd<ja.length;kd+=9,Ec+=6){Ca.set(ja[kd+0],ja[kd+1],ja[kd+2]);bb.set(ja[kd+3],ja[kd+4],ja[kd+5]);$a.set(ja[kd+6],ja[kd+7],ja[kd+8]);pb.set(ua[Ec+0],ua[Ec+1]);Rc.set(ua[Ec+2],ua[Ec+3]);xc.set(ua[Ec+4],ua[Ec+5]);ub.copy(Ca).add(bb).add($a).divideScalar(3);var nd=
Math.atan2(ub.z,-ub.x);V(pb,Ec+0,Ca,nd);V(Rc,Ec+2,bb,nd);V(xc,Ec+4,$a,nd)}for(Ca=0;Ca<ua.length;Ca+=6)bb=ua[Ca+0],$a=ua[Ca+2],ub=ua[Ca+4],pb=Math.min(bb,$a,ub),.9<Math.max(bb,$a,ub)&&.1>pb&&(.2>bb&&(ua[Ca+0]+=1),.2>$a&&(ua[Ca+2]+=1),.2>ub&&(ua[Ca+4]+=1))})();Z.setAttribute("position",new U(ja,3));Z.setAttribute("normal",new U(ja.slice(),3));Z.setAttribute("uv",new U(ua,2));0===G?Z.computeVertexNormals():Z.normalizeNormals();return Z}g(z,u);return z}(oa),XW=function(u){function z(t,x){var C=(1+Math.sqrt(5))/
2;var G=1/C;C=u.call(this||p,[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-G,-C,0,-G,C,0,G,-C,0,G,C,-G,-C,0,-G,C,0,G,-C,0,G,C,0,-C,0,-G,C,0,-G,-C,0,G,C,0,G],[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],t,x)||this||p;C.type="DodecahedronBufferGeometry";C.parameters=
{radius:t,detail:x};return C}g(z,u);return z}(PB),X$=function(u){function z(t,x){var C=u.call(this||p)||this||p;C.type="DodecahedronGeometry";C.parameters={radius:t,detail:x};C.fromBufferGeometry(new XW(t,x));C.mergeVertices();return C}g(z,u);return z}(Rk),SO=new qc,TO=new qc,YW=new qc,RE=new Xt,ZW=function(u){function z(t,x){var C=u.call(this||p)||this||p;C.type="EdgesGeometry";C.parameters={thresholdAngle:x};x=void 0!==x?x:1;t.isGeometry&&(t=(new oa).fromGeometry(t));var G=Math.pow(10,4),L=Math.cos(ai.DEG2RAD*
x),S=t.getIndex();t=t.getAttribute("position");var V=S?S.count:t.count,Z=[0,0,0],ja=["a","b","c"],ua=Array(3);x={};for(var Ca=[],bb=0;bb<V;bb+=3){S?(Z[0]=S.getX(bb),Z[1]=S.getX(bb+1),Z[2]=S.getX(bb+2)):(Z[0]=bb,Z[1]=bb+1,Z[2]=bb+2);var $a=RE.a,ub=RE.b,pb=RE.c;$a.fromBufferAttribute(t,Z[0]);ub.fromBufferAttribute(t,Z[1]);pb.fromBufferAttribute(t,Z[2]);RE.getNormal(YW);ua[0]=Math.round($a.x*G)+","+Math.round($a.y*G)+","+Math.round($a.z*G);ua[1]=Math.round(ub.x*G)+","+Math.round(ub.y*G)+","+Math.round(ub.z*
G);ua[2]=Math.round(pb.x*G)+","+Math.round(pb.y*G)+","+Math.round(pb.z*G);if(ua[0]!==ua[1]&&ua[1]!==ua[2]&&ua[2]!==ua[0])for($a=0;3>$a;$a++){ub=($a+1)%3;var Rc=ua[$a],xc=ua[ub];pb=RE[ja[$a]];var kd=RE[ja[ub]],Ec=Rc+"_"+xc;Rc=xc+"_"+Rc;Rc in x&&x[Rc]?(YW.dot(x[Rc].normal)<=L&&(Ca.push(pb.x,pb.y,pb.z),Ca.push(kd.x,kd.y,kd.z)),x[Rc]=null):Ec in x||(x[Ec]={index0:Z[$a],index1:Z[ub],normal:YW.clone()})}}for(var nd in x)x[nd]&&(G=x[nd],L=G.index1,SO.fromBufferAttribute(t,G.index0),TO.fromBufferAttribute(t,
L),Ca.push(SO.x,SO.y,SO.z),Ca.push(TO.x,TO.y,TO.z));C.setAttribute("position",new U(Ca,3));return C}g(z,u);return z}(oa),Era={triangulate:function(u,z,t){t=t||2;var x=z&&z.length,C=x?z[0]*t:u.length,G=f$(u,0,C,t,!0),L=[];if(!G||G.next===G.prev)return L;var S;if(x){var V=t;x=[];var Z;var ja=0;for(Z=z.length;ja<Z;ja++){var ua=z[ja]*V;var Ca=ja<Z-1?z[ja+1]*V:u.length;ua=f$(u,ua,Ca,V,!1);ua===ua.next&&(ua.steiner=!0);x.push(qra(ua))}x.sort(ora);for(ja=0;ja<x.length;ja++){V=x[ja];z=G;if(z=pra(V,z))V=i$(z,
V),kz(z,z.next),kz(V,V.next);G=kz(G,G.next)}}if(u.length>80*t){var bb=S=u[0];var $a=x=u[1];for(V=t;V<C;V+=t)ja=u[V],z=u[V+1],ja<bb&&(bb=ja),z<$a&&($a=z),ja>S&&(S=ja),z>x&&(x=z);S=Math.max(S-bb,x-$a);S=0!==S?1/S:0}gI(G,L,t,bb,$a,S);return L}},lx={area:function(u){for(var z=u.length,t=0,x=z-1,C=0;C<z;x=C++)t+=u[x].x*u[C].y-u[C].x*u[x].y;return.5*t},isClockWise:function(u){return 0>lx.area(u)},triangulateShape:function(u,z){var t=[],x=[],C=[];j$(u);k$(t,u);u=u.length;z.forEach(j$);for(var G=0;G<z.length;G++)x.push(u),
u+=z[G].length,k$(t,z[G]);z=Era.triangulate(t,x);for(t=0;t<z.length;t+=3)C.push(z.slice(t,t+3));return C}},AI=function(u){function z(t,x){function C(ua){function Ca(ze,bg,th){bg||console.error("THREE.ExtrudeGeometry: vec does not exist");return bg.clone().multiplyScalar(th).add(ze)}function bb(ze,bg,th){var ch=ze.x-bg.x;var xj=ze.y-bg.y;var hj=th.x-ze.x;var Ol=th.y-ze.y,Ik=ch*ch+xj*xj;if(Math.abs(ch*Ol-xj*hj)>Number.EPSILON){var Gq=Math.sqrt(Ik),bx=Math.sqrt(hj*hj+Ol*Ol);Ik=bg.x-xj/Gq;bg=bg.y+ch/
Gq;Ol=((th.x-Ol/bx-Ik)*Ol-(th.y+hj/bx-bg)*hj)/(ch*Ol-xj*hj);hj=Ik+ch*Ol-ze.x;ch=bg+xj*Ol-ze.y;xj=hj*hj+ch*ch;if(2>=xj)return new Ve(hj,ch);xj=Math.sqrt(xj/2)}else ze=!1,ch>Number.EPSILON?hj>Number.EPSILON&&(ze=!0):ch<-Number.EPSILON?hj<-Number.EPSILON&&(ze=!0):Math.sign(xj)===Math.sign(Ol)&&(ze=!0),ze?(hj=-xj,xj=Math.sqrt(Ik)):(hj=ch,ch=xj,xj=Math.sqrt(Ik/2));return new Ve(hj/xj,ch/xj)}function $a(ze,bg){for(var th=ze.length;0<=--th;){var ch=th,xj=th-1;0>xj&&(xj=ze.length-1);for(var hj=0,Ol=nd+2*
Ce;hj<Ol;hj++){var Ik=Zc*hj,Gq=Zc*(hj+1),bx=bg+xj+Ik,fz=bg+xj+Gq;Gq=bg+ch+Gq;Rc(bg+ch+Ik);Rc(bx);Rc(Gq);Rc(bx);Rc(fz);Rc(Gq);Ik=S.length/3;Ik=hg.generateSideWallUV(L,S,Ik-6,Ik-3,Ik-2,Ik-1);xc(Ik[0]);xc(Ik[1]);xc(Ik[3]);xc(Ik[1]);xc(Ik[2]);xc(Ik[3])}}}function ub(ze,bg,th){kd.push(ze);kd.push(bg);kd.push(th)}function pb(ze,bg,th){Rc(ze);Rc(bg);Rc(th);ze=S.length/3;ze=hg.generateTopUV(L,S,ze-3,ze-2,ze-1);xc(ze[0]);xc(ze[1]);xc(ze[2])}function Rc(ze){S.push(kd[3*ze]);S.push(kd[3*ze+1]);S.push(kd[3*ze+
2])}function xc(ze){V.push(ze.x);V.push(ze.y)}var kd=[],Ec=void 0!==x.curveSegments?x.curveSegments:12,nd=void 0!==x.steps?x.steps:1,Nc=void 0!==x.depth?x.depth:100,Cd=void 0!==x.bevelEnabled?x.bevelEnabled:!0,Xd=void 0!==x.bevelThickness?x.bevelThickness:6,yd=void 0!==x.bevelSize?x.bevelSize:Xd-2,Ad=void 0!==x.bevelOffset?x.bevelOffset:0,Ce=void 0!==x.bevelSegments?x.bevelSegments:3,gf=x.extrudePath,hg=void 0!==x.UVGenerator?x.UVGenerator:Fra;void 0!==x.amount&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),
Nc=x.amount);var Cf=!1;if(gf){var Yf=gf.getSpacedPoints(nd);Cf=!0;Cd=!1;var gh=gf.computeFrenetFrames(nd,!1);var Pg=new qc;var Ei=new qc;var sh=new qc}Cd||(Ad=yd=Xd=Ce=0);ua=ua.extractPoints(Ec);gf=ua.shape;var Xj=ua.holes;if(!lx.isClockWise(gf))for(gf=gf.reverse(),ua=0,Ec=Xj.length;ua<Ec;ua++){var wk=Xj[ua];lx.isClockWise(wk)&&(Xj[ua]=wk.reverse())}var Nl=lx.triangulateShape(gf,Xj),Ac=gf;ua=0;for(Ec=Xj.length;ua<Ec;ua++)gf=gf.concat(Xj[ua]);var Zc=gf.length,Ee=Nl.length;ua=[];Ec=0;wk=Ac.length;for(var id=
wk-1,Oe=Ec+1;Ec<wk;Ec++,id++,Oe++)id===wk&&(id=0),Oe===wk&&(Oe=0),ua[Ec]=bb(Ac[Ec],Ac[id],Ac[Oe]);Ec=[];wk=ua.concat();Oe=0;for(var lf=Xj.length;Oe<lf;Oe++){var Ig=Xj[Oe];id=[];for(var Rf=0,Rh=Ig.length,Mh=Rh-1,hi=Rf+1;Rf<Rh;Rf++,Mh++,hi++)Mh===Rh&&(Mh=0),hi===Rh&&(hi=0),id[Rf]=bb(Ig[Rf],Ig[Mh],Ig[hi]);Ec.push(id);wk=wk.concat(id)}for(Oe=0;Oe<Ce;Oe++){id=Oe/Ce;lf=Xd*Math.cos(id*Math.PI/2);Ig=yd*Math.sin(id*Math.PI/2)+Ad;id=0;for(Rf=Ac.length;id<Rf;id++)Rh=Ca(Ac[id],ua[id],Ig),ub(Rh.x,Rh.y,-lf);Rf=
0;for(Rh=Xj.length;Rf<Rh;Rf++){Mh=Xj[Rf];id=Ec[Rf];hi=0;for(var bi=Mh.length;hi<bi;hi++){var vk=Ca(Mh[hi],id[hi],Ig);ub(vk.x,vk.y,-lf)}}}id=yd+Ad;for(Oe=0;Oe<Zc;Oe++)lf=Cd?Ca(gf[Oe],wk[Oe],id):gf[Oe],Cf?(Ei.copy(gh.normals[0]).multiplyScalar(lf.x),Pg.copy(gh.binormals[0]).multiplyScalar(lf.y),sh.copy(Yf[0]).add(Ei).add(Pg),ub(sh.x,sh.y,sh.z)):ub(lf.x,lf.y,0);for(Oe=1;Oe<=nd;Oe++)for(lf=0;lf<Zc;lf++)Ig=Cd?Ca(gf[lf],wk[lf],id):gf[lf],Cf?(Ei.copy(gh.normals[Oe]).multiplyScalar(Ig.x),Pg.copy(gh.binormals[Oe]).multiplyScalar(Ig.y),
sh.copy(Yf[Oe]).add(Ei).add(Pg),ub(sh.x,sh.y,sh.z)):ub(Ig.x,Ig.y,Nc/nd*Oe);for(gh=Ce-1;0<=gh;gh--){Ei=gh/Ce;Pg=Xd*Math.cos(Ei*Math.PI/2);Ei=yd*Math.sin(Ei*Math.PI/2)+Ad;sh=0;for(gf=Ac.length;sh<gf;sh++)wk=Ca(Ac[sh],ua[sh],Ei),ub(wk.x,wk.y,Nc+Pg);sh=0;for(gf=Xj.length;sh<gf;sh++)for(wk=Xj[sh],id=Ec[sh],Oe=0,lf=wk.length;Oe<lf;Oe++)Ig=Ca(wk[Oe],id[Oe],Ei),Cf?ub(Ig.x,Ig.y+Yf[nd-1].y,Yf[nd-1].x+Pg):ub(Ig.x,Ig.y,Nc+Pg)}(function(){var ze=S.length/3;if(Cd){for(var bg=0*Zc,th=0;th<Ee;th++){var ch=Nl[th];
pb(ch[2]+bg,ch[1]+bg,ch[0]+bg)}bg=Zc*(nd+2*Ce);for(th=0;th<Ee;th++)ch=Nl[th],pb(ch[0]+bg,ch[1]+bg,ch[2]+bg)}else{for(bg=0;bg<Ee;bg++)th=Nl[bg],pb(th[2],th[1],th[0]);for(bg=0;bg<Ee;bg++)th=Nl[bg],pb(th[0]+Zc*nd,th[1]+Zc*nd,th[2]+Zc*nd)}L.addGroup(ze,S.length/3-ze,0)})();(function(){var ze=S.length/3,bg=0;$a(Ac,bg);bg+=Ac.length;for(var th=0,ch=Xj.length;th<ch;th++){var xj=Xj[th];$a(xj,bg);bg+=xj.length}L.addGroup(ze,S.length/3-ze,1)})()}var G=u.call(this||p)||this||p;G.type="ExtrudeBufferGeometry";
G.parameters={shapes:t,options:x};t=Array.isArray(t)?t:[t];for(var L=l(G),S=[],V=[],Z=0,ja=t.length;Z<ja;Z++)C(t[Z]);G.setAttribute("position",new U(S,3));G.setAttribute("uv",new U(V,2));G.computeVertexNormals();return G}g(z,u);z.prototype.toJSON=function(){var t=oa.prototype.toJSON.call(this||p),x=(this||p).parameters.shapes,C=(this||p).parameters.options;t.shapes=[];if(Array.isArray(x))for(var G=0,L=x.length;G<L;G++)t.shapes.push(x[G].uuid);else t.shapes.push(x.uuid);void 0!==C.extrudePath&&(t.options.extrudePath=
C.extrudePath.toJSON());return t};return z}(oa),Fra={generateTopUV:function(u,z,t,x,C){u=z[3*x];x=z[3*x+1];var G=z[3*C];C=z[3*C+1];return[new Ve(z[3*t],z[3*t+1]),new Ve(u,x),new Ve(G,C)]},generateSideWallUV:function(u,z,t,x,C,G){u=z[3*t];var L=z[3*t+1];t=z[3*t+2];var S=z[3*x],V=z[3*x+1];x=z[3*x+2];var Z=z[3*C],ja=z[3*C+1];C=z[3*C+2];var ua=z[3*G],Ca=z[3*G+1];z=z[3*G+2];return.01>Math.abs(L-V)?[new Ve(u,1-t),new Ve(S,1-x),new Ve(Z,1-C),new Ve(ua,1-z)]:[new Ve(L,1-t),new Ve(V,1-x),new Ve(ja,1-C),new Ve(Ca,
1-z)]}},$W=function(u){function z(t,x){var C=u.call(this||p)||this||p;C.type="ExtrudeGeometry";C.parameters={shapes:t,options:x};C.fromBufferGeometry(new AI(t,x));C.mergeVertices();return C}g(z,u);z.prototype.toJSON=function(){var t=u.prototype.toJSON.call(this||p),x=(this||p).parameters.shapes,C=(this||p).parameters.options;t.shapes=[];if(Array.isArray(x))for(var G=0,L=x.length;G<L;G++)t.shapes.push(x[G].uuid);else t.shapes.push(x.uuid);void 0!==C.extrudePath&&(t.options.extrudePath=C.extrudePath.toJSON());
return t};return z}(Rk),aX=function(u){function z(t,x){var C=(1+Math.sqrt(5))/2;C=u.call(this||p,[-1,C,0,1,C,0,-1,-C,0,1,-C,0,0,-1,C,0,1,C,0,-1,-C,0,1,-C,C,0,-1,C,0,1,-C,0,-1,-C,0,1],[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],t,x)||this||p;C.type="IcosahedronBufferGeometry";C.parameters={radius:t,detail:x};return C}g(z,u);return z}(PB),Y$=function(u){function z(t,x){var C=u.call(this||p)||this||p;C.type="IcosahedronGeometry";
C.parameters={radius:t,detail:x};C.fromBufferGeometry(new aX(t,x));C.mergeVertices();return C}g(z,u);return z}(Rk),bX=function(u){function z(t,x,C,G){var L=u.call(this||p)||this||p;L.type="LatheBufferGeometry";L.parameters={points:t,segments:x,phiStart:C,phiLength:G};x=Math.floor(x)||12;C=C||0;G=G||2*Math.PI;G=ai.clamp(G,0,2*Math.PI);for(var S=[],V=[],Z=[],ja=1/x,ua=new qc,Ca=new Ve,bb=0;bb<=x;bb++){var $a=C+bb*ja*G,ub=Math.sin($a);$a=Math.cos($a);for(var pb=0;pb<=t.length-1;pb++)ua.x=t[pb].x*ub,
ua.y=t[pb].y,ua.z=t[pb].x*$a,V.push(ua.x,ua.y,ua.z),Ca.x=bb/x,Ca.y=pb/(t.length-1),Z.push(Ca.x,Ca.y)}for(C=0;C<x;C++)for(ja=0;ja<t.length-1;ja++)ua=ja+C*t.length,Ca=ua+t.length,bb=ua+t.length+1,ub=ua+1,S.push(ua,Ca,ub),S.push(Ca,bb,ub);L.setIndex(S);L.setAttribute("position",new U(V,3));L.setAttribute("uv",new U(Z,2));L.computeVertexNormals();if(G===2*Math.PI)for(G=L.attributes.normal.array,S=new qc,V=new qc,Z=new qc,x=x*t.length*3,ja=C=0;C<t.length;C++,ja+=3)S.x=G[ja+0],S.y=G[ja+1],S.z=G[ja+2],V.x=
G[x+ja+0],V.y=G[x+ja+1],V.z=G[x+ja+2],Z.addVectors(S,V).normalize(),G[ja+0]=G[x+ja+0]=Z.x,G[ja+1]=G[x+ja+1]=Z.y,G[ja+2]=G[x+ja+2]=Z.z;return L}g(z,u);return z}(oa),Z$=function(u){function z(t,x,C,G){var L=u.call(this||p)||this||p;L.type="LatheGeometry";L.parameters={points:t,segments:x,phiStart:C,phiLength:G};L.fromBufferGeometry(new bX(t,x,C,G));L.mergeVertices();return L}g(z,u);return z}(Rk),UO=function(u){function z(t,x){var C=u.call(this||p,[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,
3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],t,x)||this||p;C.type="OctahedronBufferGeometry";C.parameters={radius:t,detail:x};return C}g(z,u);return z}(PB),$$=function(u){function z(t,x){var C=u.call(this||p)||this||p;C.type="OctahedronGeometry";C.parameters={radius:t,detail:x};C.fromBufferGeometry(new UO(t,x));C.mergeVertices();return C}g(z,u);return z}(Rk);yE.prototype=Object.create(oa.prototype);yE.prototype.constructor=yE;iI.prototype=Object.create(Rk.prototype);iI.prototype.constructor=iI;var aaa=
function(u){function z(t,x,C,G){var L=u.call(this||p)||this||p;L.type="PlaneGeometry";L.parameters={width:t,height:x,widthSegments:C,heightSegments:G};L.fromBufferGeometry(new TN(t,x,C,G));L.mergeVertices();return L}g(z,u);return z}(Rk),baa=function(u){function z(t,x,C,G){var L=u.call(this||p)||this||p;L.type="PolyhedronGeometry";L.parameters={vertices:t,indices:x,radius:C,detail:G};L.fromBufferGeometry(new PB(t,x,C,G));L.mergeVertices();return L}g(z,u);return z}(Rk),cX=function(u){function z(t,x,
C,G,L,S){var V=u.call(this||p)||this||p;V.type="RingBufferGeometry";V.parameters={innerRadius:t,outerRadius:x,thetaSegments:C,phiSegments:G,thetaStart:L,thetaLength:S};t=t||.5;x=x||1;L=void 0!==L?L:0;S=void 0!==S?S:2*Math.PI;C=void 0!==C?Math.max(3,C):8;G=void 0!==G?Math.max(1,G):1;var Z=[],ja=[],ua=[],Ca=[],bb=t;t=(x-t)/G;for(var $a=new qc,ub=new Ve,pb=0;pb<=G;pb++){for(var Rc=0;Rc<=C;Rc++){var xc=L+Rc/C*S;$a.x=bb*Math.cos(xc);$a.y=bb*Math.sin(xc);ja.push($a.x,$a.y,$a.z);ua.push(0,0,1);ub.x=($a.x/
x+1)/2;ub.y=($a.y/x+1)/2;Ca.push(ub.x,ub.y)}bb+=t}for(x=0;x<G;x++)for(L=x*(C+1),S=0;S<C;S++)bb=S+L,t=bb+C+1,$a=bb+C+2,ub=bb+1,Z.push(bb,t,ub),Z.push(t,$a,ub);V.setIndex(Z);V.setAttribute("position",new U(ja,3));V.setAttribute("normal",new U(ua,3));V.setAttribute("uv",new U(Ca,2));return V}g(z,u);return z}(oa),caa=function(u){function z(t,x,C,G,L,S){var V=u.call(this||p)||this||p;V.type="RingGeometry";V.parameters={innerRadius:t,outerRadius:x,thetaSegments:C,phiSegments:G,thetaStart:L,thetaLength:S};
V.fromBufferGeometry(new cX(t,x,C,G,L,S));V.mergeVertices();return V}g(z,u);return z}(Rk),dX=function(u){function z(t,x){function C(bb){var $a=S.length/3,ub=bb.extractPoints(x);bb=ub.shape;var pb=ub.holes;!1===lx.isClockWise(bb)&&(bb=bb.reverse());ub=0;for(var Rc=pb.length;ub<Rc;ub++){var xc=pb[ub];!0===lx.isClockWise(xc)&&(pb[ub]=xc.reverse())}ub=lx.triangulateShape(bb,pb);Rc=0;for(xc=pb.length;Rc<xc;Rc++)bb=bb.concat(pb[Rc]);pb=0;for(Rc=bb.length;pb<Rc;pb++)xc=bb[pb],S.push(xc.x,xc.y,0),V.push(0,
0,1),Z.push(xc.x,xc.y);bb=0;for(pb=ub.length;bb<pb;bb++)Rc=ub[bb],L.push(Rc[0]+$a,Rc[1]+$a,Rc[2]+$a),ua+=3}var G=u.call(this||p)||this||p;G.type="ShapeBufferGeometry";G.parameters={shapes:t,curveSegments:x};x=x||12;var L=[],S=[],V=[],Z=[],ja=0,ua=0;if(!1===Array.isArray(t))C(t);else for(var Ca=0;Ca<t.length;Ca++)C(t[Ca]),G.addGroup(ja,ua,Ca),ja+=ua,ua=0;G.setIndex(L);G.setAttribute("position",new U(S,3));G.setAttribute("normal",new U(V,3));G.setAttribute("uv",new U(Z,2));return G}g(z,u);z.prototype.toJSON=
function(){var t=oa.prototype.toJSON.call(this||p),x=(this||p).parameters.shapes;t.shapes=[];if(Array.isArray(x))for(var C=0,G=x.length;C<G;C++)t.shapes.push(x[C].uuid);else t.shapes.push(x.uuid);return t};return z}(oa),eX=function(u){function z(t,x){var C=u.call(this||p)||this||p;C.type="ShapeGeometry";"object"===typeof x&&(console.warn("THREE.ShapeGeometry: Options parameter has been removed."),x=x.curveSegments);C.parameters={shapes:t,curveSegments:x};C.fromBufferGeometry(new dX(t,x));C.mergeVertices();
return C}g(z,u);z.prototype.toJSON=function(){var t=Rk.prototype.toJSON.call(this||p),x=(this||p).parameters.shapes;t.shapes=[];if(Array.isArray(x))for(var C=0,G=x.length;C<G;C++)t.shapes.push(x[C].uuid);else t.shapes.push(x.uuid);return t};return z}(Rk),VO=function(u){function z(t,x,C,G,L,S,V){var Z=u.call(this||p)||this||p;Z.type="SphereBufferGeometry";Z.parameters={radius:t,widthSegments:x,heightSegments:C,phiStart:G,phiLength:L,thetaStart:S,thetaLength:V};t=t||1;x=Math.max(3,Math.floor(x)||8);
C=Math.max(2,Math.floor(C)||6);G=void 0!==G?G:0;L=void 0!==L?L:2*Math.PI;S=void 0!==S?S:0;V=void 0!==V?V:Math.PI;for(var ja=Math.min(S+V,Math.PI),ua=0,Ca=[],bb=new qc,$a=new qc,ub=[],pb=[],Rc=[],xc=[],kd=0;kd<=C;kd++){var Ec=[],nd=kd/C,Nc=0;0==kd&&0==S?Nc=.5/x:kd==C&&ja==Math.PI&&(Nc=-.5/x);for(var Cd=0;Cd<=x;Cd++){var Xd=Cd/x;bb.x=-t*Math.cos(G+Xd*L)*Math.sin(S+nd*V);bb.y=t*Math.cos(S+nd*V);bb.z=t*Math.sin(G+Xd*L)*Math.sin(S+nd*V);pb.push(bb.x,bb.y,bb.z);$a.copy(bb).normalize();Rc.push($a.x,$a.y,
$a.z);xc.push(Xd+Nc,1-nd);Ec.push(ua++)}Ca.push(Ec)}for(t=0;t<C;t++)for(G=0;G<x;G++)L=Ca[t][G+1],V=Ca[t][G],ua=Ca[t+1][G],bb=Ca[t+1][G+1],(0!==t||0<S)&&ub.push(L,V,bb),(t!==C-1||ja<Math.PI)&&ub.push(V,ua,bb);Z.setIndex(ub);Z.setAttribute("position",new U(pb,3));Z.setAttribute("normal",new U(Rc,3));Z.setAttribute("uv",new U(xc,2));return Z}g(z,u);return z}(oa),daa=function(u){function z(t,x,C,G,L,S,V){var Z=u.call(this||p)||this||p;Z.type="SphereGeometry";Z.parameters={radius:t,widthSegments:x,heightSegments:C,
phiStart:G,phiLength:L,thetaStart:S,thetaLength:V};Z.fromBufferGeometry(new VO(t,x,C,G,L,S,V));Z.mergeVertices();return Z}g(z,u);return z}(Rk),fX=function(u){function z(t,x){var C=u.call(this||p,[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],t,x)||this||p;C.type="TetrahedronBufferGeometry";C.parameters={radius:t,detail:x};return C}g(z,u);return z}(PB),eaa=function(u){function z(t,x){var C=u.call(this||p)||this||p;C.type="TetrahedronGeometry";C.parameters={radius:t,detail:x};C.fromBufferGeometry(new fX(t,
x));C.mergeVertices();return C}g(z,u);return z}(Rk),gX=function(u){function z(t,x){x=x||{};var C=x.font;if(!C||!C.isFont)return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),new oa;t=C.generateShapes(t,x.size);x.depth=void 0!==x.height?x.height:50;void 0===x.bevelThickness&&(x.bevelThickness=10);void 0===x.bevelSize&&(x.bevelSize=8);void 0===x.bevelEnabled&&(x.bevelEnabled=!1);x=u.call(this||p,t,x)||this||p;x.type="TextBufferGeometry";return x}g(z,u);return z}(AI),
faa=function(u){function z(t,x){var C=u.call(this||p)||this||p;C.type="TextGeometry";C.parameters={text:t,parameters:x};C.fromBufferGeometry(new gX(t,x));C.mergeVertices();return C}g(z,u);return z}(Rk),hX=function(u){function z(t,x,C,G,L){var S=u.call(this||p)||this||p;S.type="TorusBufferGeometry";S.parameters={radius:t,tube:x,radialSegments:C,tubularSegments:G,arc:L};t=t||1;x=x||.4;C=Math.floor(C)||8;G=Math.floor(G)||6;L=L||2*Math.PI;for(var V=[],Z=[],ja=[],ua=[],Ca=new qc,bb=new qc,$a=new qc,ub=
0;ub<=C;ub++)for(var pb=0;pb<=G;pb++){var Rc=pb/G*L,xc=ub/C*Math.PI*2;bb.x=(t+x*Math.cos(xc))*Math.cos(Rc);bb.y=(t+x*Math.cos(xc))*Math.sin(Rc);bb.z=x*Math.sin(xc);Z.push(bb.x,bb.y,bb.z);Ca.x=t*Math.cos(Rc);Ca.y=t*Math.sin(Rc);$a.subVectors(bb,Ca).normalize();ja.push($a.x,$a.y,$a.z);ua.push(pb/G);ua.push(ub/C)}for(t=1;t<=C;t++)for(x=1;x<=G;x++)L=(G+1)*(t-1)+x-1,Ca=(G+1)*(t-1)+x,bb=(G+1)*t+x,V.push((G+1)*t+x-1,L,bb),V.push(L,Ca,bb);S.setIndex(V);S.setAttribute("position",new U(Z,3));S.setAttribute("normal",
new U(ja,3));S.setAttribute("uv",new U(ua,2));return S}g(z,u);return z}(oa),gaa=function(u){function z(t,x,C,G,L){var S=u.call(this||p)||this||p;S.type="TorusGeometry";S.parameters={radius:t,tube:x,radialSegments:C,tubularSegments:G,arc:L};S.fromBufferGeometry(new hX(t,x,C,G,L));S.mergeVertices();return S}g(z,u);return z}(Rk),iX=function(u){function z(t,x,C,G,L,S){function V(yd,Ad,Ce,gf,hg){var Cf=Math.sin(yd);Ad=Ce/Ad*yd;Ce=Math.cos(Ad);hg.x=gf*(2+Ce)*.5*Math.cos(yd);hg.y=gf*(2+Ce)*Cf*.5;hg.z=gf*
Math.sin(Ad)*.5}var Z=u.call(this||p)||this||p;Z.type="TorusKnotBufferGeometry";Z.parameters={radius:t,tube:x,tubularSegments:C,radialSegments:G,p:L,q:S};t=t||1;x=x||.4;C=Math.floor(C)||64;G=Math.floor(G)||8;L=L||2;S=S||3;for(var ja=[],ua=[],Ca=[],bb=[],$a=new qc,ub=new qc,pb=new qc,Rc=new qc,xc=new qc,kd=new qc,Ec=new qc,nd=0;nd<=C;++nd){var Nc=nd/C*L*Math.PI*2;V(Nc,L,S,t,pb);V(Nc+.01,L,S,t,Rc);kd.subVectors(Rc,pb);Ec.addVectors(Rc,pb);xc.crossVectors(kd,Ec);Ec.crossVectors(xc,kd);xc.normalize();
Ec.normalize();for(Nc=0;Nc<=G;++Nc){var Cd=Nc/G*Math.PI*2,Xd=-x*Math.cos(Cd);Cd=x*Math.sin(Cd);$a.x=pb.x+(Xd*Ec.x+Cd*xc.x);$a.y=pb.y+(Xd*Ec.y+Cd*xc.y);$a.z=pb.z+(Xd*Ec.z+Cd*xc.z);ua.push($a.x,$a.y,$a.z);ub.subVectors($a,pb).normalize();Ca.push(ub.x,ub.y,ub.z);bb.push(nd/C);bb.push(Nc/G)}}for(t=1;t<=C;t++)for(x=1;x<=G;x++)L=(G+1)*t+(x-1),S=(G+1)*t+x,$a=(G+1)*(t-1)+x,ja.push((G+1)*(t-1)+(x-1),L,$a),ja.push(L,S,$a);Z.setIndex(ja);Z.setAttribute("position",new U(ua,3));Z.setAttribute("normal",new U(Ca,
3));Z.setAttribute("uv",new U(bb,2));return Z}g(z,u);return z}(oa),haa=function(u){function z(t,x,C,G,L,S,V){var Z=u.call(this||p)||this||p;Z.type="TorusKnotGeometry";Z.parameters={radius:t,tube:x,tubularSegments:C,radialSegments:G,p:L,q:S};void 0!==V&&console.warn("THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead.");Z.fromBufferGeometry(new iX(t,x,C,G,L,S));Z.mergeVertices();return Z}g(z,u);return z}(Rk),jX=function(u){function z(t,x,C,G,L){function S(xc){bb=
t.getPointAt(xc/x,bb);var kd=Z.normals[xc];xc=Z.binormals[xc];for(var Ec=0;Ec<=G;Ec++){var nd=Ec/G*Math.PI*2,Nc=Math.sin(nd);nd=-Math.cos(nd);ua.x=nd*kd.x+Nc*xc.x;ua.y=nd*kd.y+Nc*xc.y;ua.z=nd*kd.z+Nc*xc.z;ua.normalize();ub.push(ua.x,ua.y,ua.z);ja.x=bb.x+C*ua.x;ja.y=bb.y+C*ua.y;ja.z=bb.z+C*ua.z;$a.push(ja.x,ja.y,ja.z)}}var V=u.call(this||p)||this||p;V.type="TubeBufferGeometry";V.parameters={path:t,tubularSegments:x,radius:C,radialSegments:G,closed:L};x=x||64;C=C||1;G=G||8;L=L||!1;var Z=t.computeFrenetFrames(x,
L);V.tangents=Z.tangents;V.normals=Z.normals;V.binormals=Z.binormals;var ja=new qc,ua=new qc,Ca=new Ve,bb=new qc,$a=[],ub=[],pb=[],Rc=[];(function(){for(var xc=0;xc<x;xc++)S(xc);S(!1===L?x:0);for(xc=0;xc<=x;xc++)for(var kd=0;kd<=G;kd++)Ca.x=xc/x,Ca.y=kd/G,pb.push(Ca.x,Ca.y);for(xc=1;xc<=x;xc++)for(kd=1;kd<=G;kd++){var Ec=(G+1)*xc+(kd-1),nd=(G+1)*xc+kd,Nc=(G+1)*(xc-1)+kd;Rc.push((G+1)*(xc-1)+(kd-1),Ec,Nc);Rc.push(Ec,nd,Nc)}})();V.setIndex(Rc);V.setAttribute("position",new U($a,3));V.setAttribute("normal",
new U(ub,3));V.setAttribute("uv",new U(pb,2));return V}g(z,u);z.prototype.toJSON=function(){var t=oa.prototype.toJSON.call(this||p);t.path=(this||p).parameters.path.toJSON();return t};return z}(oa),iaa=function(u){function z(t,x,C,G,L,S){var V=u.call(this||p)||this||p;V.type="TubeGeometry";V.parameters={path:t,tubularSegments:x,radius:C,radialSegments:G,closed:L};void 0!==S&&console.warn("THREE.TubeGeometry: taper has been removed.");t=new jX(t,x,C,G,L);V.tangents=t.tangents;V.normals=t.normals;V.binormals=
t.binormals;V.fromBufferGeometry(t);V.mergeVertices();return V}g(z,u);return z}(Rk),kX=function(u){function z(t){var x=u.call(this||p)||this||p;x.type="WireframeGeometry";var C=[],G=[0,0],L={},S=["a","b","c"];if(t&&t.isGeometry){for(var V=t.faces,Z=0,ja=V.length;Z<ja;Z++)for(var ua=V[Z],Ca=0;3>Ca;Ca++){var bb=ua[S[Ca]],$a=ua[S[(Ca+1)%3]];G[0]=Math.min(bb,$a);G[1]=Math.max(bb,$a);bb=G[0]+","+G[1];void 0===L[bb]&&(L[bb]={index1:G[0],index2:G[1]})}for(var ub in L)G=L[ub],V=t.vertices[G.index1],C.push(V.x,
V.y,V.z),V=t.vertices[G.index2],C.push(V.x,V.y,V.z)}else if(t&&t.isBufferGeometry)if(ub=new qc,null!==t.index){S=t.attributes.position;Z=t.index;t=t.groups;0===t.length&&(t=[{start:0,count:Z.count,materialIndex:0}]);ja=0;for(ua=t.length;ja<ua;++ja)for(bb=t[ja],Ca=$a=bb.start,bb=$a+bb.count;Ca<bb;Ca+=3)for($a=0;3>$a;$a++){var pb=Z.getX(Ca+$a),Rc=Z.getX(Ca+($a+1)%3);G[0]=Math.min(pb,Rc);G[1]=Math.max(pb,Rc);pb=G[0]+","+G[1];void 0===L[pb]&&(L[pb]={index1:G[0],index2:G[1]})}for(V in L)G=L[V],ub.fromBufferAttribute(S,
G.index1),C.push(ub.x,ub.y,ub.z),ub.fromBufferAttribute(S,G.index2),C.push(ub.x,ub.y,ub.z)}else for(L=t.attributes.position,G=0,V=L.count/3;G<V;G++)for(t=0;3>t;t++)ub.fromBufferAttribute(L,3*G+t),C.push(ub.x,ub.y,ub.z),ub.fromBufferAttribute(L,3*G+(t+1)%3),C.push(ub.x,ub.y,ub.z);x.setAttribute("position",new U(C,3));return x}g(z,u);return z}(oa),Wp=Object.freeze({__proto__:null,BoxGeometry:UW,BoxBufferGeometry:WH,CircleGeometry:U$,CircleBufferGeometry:VW,ConeGeometry:V$,ConeBufferGeometry:W$,CylinderGeometry:WW,
CylinderBufferGeometry:zI,DodecahedronGeometry:X$,DodecahedronBufferGeometry:XW,EdgesGeometry:ZW,ExtrudeGeometry:$W,ExtrudeBufferGeometry:AI,IcosahedronGeometry:Y$,IcosahedronBufferGeometry:aX,LatheGeometry:Z$,LatheBufferGeometry:bX,OctahedronGeometry:$$,OctahedronBufferGeometry:UO,ParametricGeometry:iI,ParametricBufferGeometry:yE,PlaneGeometry:aaa,PlaneBufferGeometry:TN,PolyhedronGeometry:baa,PolyhedronBufferGeometry:PB,RingGeometry:caa,RingBufferGeometry:cX,ShapeGeometry:eX,ShapeBufferGeometry:dX,
SphereGeometry:daa,SphereBufferGeometry:VO,TetrahedronGeometry:eaa,TetrahedronBufferGeometry:fX,TextGeometry:faa,TextBufferGeometry:gX,TorusGeometry:gaa,TorusBufferGeometry:hX,TorusKnotGeometry:haa,TorusKnotBufferGeometry:iX,TubeGeometry:iaa,TubeBufferGeometry:jX,WireframeGeometry:kX});GB.prototype=Object.create(M.prototype);GB.prototype.constructor=GB;GB.prototype.isShadowMaterial=!0;GB.prototype.copy=function(u){M.prototype.copy.call(this||p,u);(this||p).color.copy(u.color);return this||p};cx.prototype=
Object.create(Na.prototype);cx.prototype.constructor=cx;cx.prototype.isRawShaderMaterial=!0;Jv.prototype=Object.create(M.prototype);Jv.prototype.constructor=Jv;Jv.prototype.isMeshStandardMaterial=!0;Jv.prototype.copy=function(u){M.prototype.copy.call(this||p,u);(this||p).defines={STANDARD:""};(this||p).color.copy(u.color);(this||p).roughness=u.roughness;(this||p).metalness=u.metalness;(this||p).map=u.map;(this||p).lightMap=u.lightMap;(this||p).lightMapIntensity=u.lightMapIntensity;(this||p).aoMap=
u.aoMap;(this||p).aoMapIntensity=u.aoMapIntensity;(this||p).emissive.copy(u.emissive);(this||p).emissiveMap=u.emissiveMap;(this||p).emissiveIntensity=u.emissiveIntensity;(this||p).bumpMap=u.bumpMap;(this||p).bumpScale=u.bumpScale;(this||p).normalMap=u.normalMap;(this||p).normalMapType=u.normalMapType;(this||p).normalScale.copy(u.normalScale);(this||p).displacementMap=u.displacementMap;(this||p).displacementScale=u.displacementScale;(this||p).displacementBias=u.displacementBias;(this||p).roughnessMap=
u.roughnessMap;(this||p).metalnessMap=u.metalnessMap;(this||p).alphaMap=u.alphaMap;(this||p).envMap=u.envMap;(this||p).envMapIntensity=u.envMapIntensity;(this||p).refractionRatio=u.refractionRatio;(this||p).wireframe=u.wireframe;(this||p).wireframeLinewidth=u.wireframeLinewidth;(this||p).wireframeLinecap=u.wireframeLinecap;(this||p).wireframeLinejoin=u.wireframeLinejoin;(this||p).skinning=u.skinning;(this||p).morphTargets=u.morphTargets;(this||p).morphNormals=u.morphNormals;(this||p).vertexTangents=
u.vertexTangents;return this||p};lz.prototype=Object.create(Jv.prototype);lz.prototype.constructor=lz;lz.prototype.isMeshPhysicalMaterial=!0;lz.prototype.copy=function(u){Jv.prototype.copy.call(this||p,u);(this||p).defines={STANDARD:"",PHYSICAL:""};(this||p).clearcoat=u.clearcoat;(this||p).clearcoatMap=u.clearcoatMap;(this||p).clearcoatRoughness=u.clearcoatRoughness;(this||p).clearcoatRoughnessMap=u.clearcoatRoughnessMap;(this||p).clearcoatNormalMap=u.clearcoatNormalMap;(this||p).clearcoatNormalScale.copy(u.clearcoatNormalScale);
(this||p).reflectivity=u.reflectivity;(this||p).sheen=u.sheen?((this||p).sheen||new tg).copy(u.sheen):null;(this||p).transmission=u.transmission;(this||p).transmissionMap=u.transmissionMap;return this||p};mz.prototype=Object.create(M.prototype);mz.prototype.constructor=mz;mz.prototype.isMeshPhongMaterial=!0;mz.prototype.copy=function(u){M.prototype.copy.call(this||p,u);(this||p).color.copy(u.color);(this||p).specular.copy(u.specular);(this||p).shininess=u.shininess;(this||p).map=u.map;(this||p).lightMap=
u.lightMap;(this||p).lightMapIntensity=u.lightMapIntensity;(this||p).aoMap=u.aoMap;(this||p).aoMapIntensity=u.aoMapIntensity;(this||p).emissive.copy(u.emissive);(this||p).emissiveMap=u.emissiveMap;(this||p).emissiveIntensity=u.emissiveIntensity;(this||p).bumpMap=u.bumpMap;(this||p).bumpScale=u.bumpScale;(this||p).normalMap=u.normalMap;(this||p).normalMapType=u.normalMapType;(this||p).normalScale.copy(u.normalScale);(this||p).displacementMap=u.displacementMap;(this||p).displacementScale=u.displacementScale;
(this||p).displacementBias=u.displacementBias;(this||p).specularMap=u.specularMap;(this||p).alphaMap=u.alphaMap;(this||p).envMap=u.envMap;(this||p).combine=u.combine;(this||p).reflectivity=u.reflectivity;(this||p).refractionRatio=u.refractionRatio;(this||p).wireframe=u.wireframe;(this||p).wireframeLinewidth=u.wireframeLinewidth;(this||p).wireframeLinecap=u.wireframeLinecap;(this||p).wireframeLinejoin=u.wireframeLinejoin;(this||p).skinning=u.skinning;(this||p).morphTargets=u.morphTargets;(this||p).morphNormals=
u.morphNormals;return this||p};HB.prototype=Object.create(M.prototype);HB.prototype.constructor=HB;HB.prototype.isMeshToonMaterial=!0;HB.prototype.copy=function(u){M.prototype.copy.call(this||p,u);(this||p).color.copy(u.color);(this||p).map=u.map;(this||p).gradientMap=u.gradientMap;(this||p).lightMap=u.lightMap;(this||p).lightMapIntensity=u.lightMapIntensity;(this||p).aoMap=u.aoMap;(this||p).aoMapIntensity=u.aoMapIntensity;(this||p).emissive.copy(u.emissive);(this||p).emissiveMap=u.emissiveMap;(this||
p).emissiveIntensity=u.emissiveIntensity;(this||p).bumpMap=u.bumpMap;(this||p).bumpScale=u.bumpScale;(this||p).normalMap=u.normalMap;(this||p).normalMapType=u.normalMapType;(this||p).normalScale.copy(u.normalScale);(this||p).displacementMap=u.displacementMap;(this||p).displacementScale=u.displacementScale;(this||p).displacementBias=u.displacementBias;(this||p).alphaMap=u.alphaMap;(this||p).wireframe=u.wireframe;(this||p).wireframeLinewidth=u.wireframeLinewidth;(this||p).wireframeLinecap=u.wireframeLinecap;
(this||p).wireframeLinejoin=u.wireframeLinejoin;(this||p).skinning=u.skinning;(this||p).morphTargets=u.morphTargets;(this||p).morphNormals=u.morphNormals;return this||p};IB.prototype=Object.create(M.prototype);IB.prototype.constructor=IB;IB.prototype.isMeshNormalMaterial=!0;IB.prototype.copy=function(u){M.prototype.copy.call(this||p,u);(this||p).bumpMap=u.bumpMap;(this||p).bumpScale=u.bumpScale;(this||p).normalMap=u.normalMap;(this||p).normalMapType=u.normalMapType;(this||p).normalScale.copy(u.normalScale);
(this||p).displacementMap=u.displacementMap;(this||p).displacementScale=u.displacementScale;(this||p).displacementBias=u.displacementBias;(this||p).wireframe=u.wireframe;(this||p).wireframeLinewidth=u.wireframeLinewidth;(this||p).skinning=u.skinning;(this||p).morphTargets=u.morphTargets;(this||p).morphNormals=u.morphNormals;return this||p};JB.prototype=Object.create(M.prototype);JB.prototype.constructor=JB;JB.prototype.isMeshLambertMaterial=!0;JB.prototype.copy=function(u){M.prototype.copy.call(this||
p,u);(this||p).color.copy(u.color);(this||p).map=u.map;(this||p).lightMap=u.lightMap;(this||p).lightMapIntensity=u.lightMapIntensity;(this||p).aoMap=u.aoMap;(this||p).aoMapIntensity=u.aoMapIntensity;(this||p).emissive.copy(u.emissive);(this||p).emissiveMap=u.emissiveMap;(this||p).emissiveIntensity=u.emissiveIntensity;(this||p).specularMap=u.specularMap;(this||p).alphaMap=u.alphaMap;(this||p).envMap=u.envMap;(this||p).combine=u.combine;(this||p).reflectivity=u.reflectivity;(this||p).refractionRatio=
u.refractionRatio;(this||p).wireframe=u.wireframe;(this||p).wireframeLinewidth=u.wireframeLinewidth;(this||p).wireframeLinecap=u.wireframeLinecap;(this||p).wireframeLinejoin=u.wireframeLinejoin;(this||p).skinning=u.skinning;(this||p).morphTargets=u.morphTargets;(this||p).morphNormals=u.morphNormals;return this||p};KB.prototype=Object.create(M.prototype);KB.prototype.constructor=KB;KB.prototype.isMeshMatcapMaterial=!0;KB.prototype.copy=function(u){M.prototype.copy.call(this||p,u);(this||p).defines=
{MATCAP:""};(this||p).color.copy(u.color);(this||p).matcap=u.matcap;(this||p).map=u.map;(this||p).bumpMap=u.bumpMap;(this||p).bumpScale=u.bumpScale;(this||p).normalMap=u.normalMap;(this||p).normalMapType=u.normalMapType;(this||p).normalScale.copy(u.normalScale);(this||p).displacementMap=u.displacementMap;(this||p).displacementScale=u.displacementScale;(this||p).displacementBias=u.displacementBias;(this||p).alphaMap=u.alphaMap;(this||p).skinning=u.skinning;(this||p).morphTargets=u.morphTargets;(this||
p).morphNormals=u.morphNormals;return this||p};LB.prototype=Object.create(Pl.prototype);LB.prototype.constructor=LB;LB.prototype.isLineDashedMaterial=!0;LB.prototype.copy=function(u){Pl.prototype.copy.call(this||p,u);(this||p).scale=u.scale;(this||p).dashSize=u.dashSize;(this||p).gapSize=u.gapSize;return this||p};var Gra=Object.freeze({__proto__:null,ShadowMaterial:GB,SpriteMaterial:jz,RawShaderMaterial:cx,ShaderMaterial:Na,PointsMaterial:$t,MeshPhysicalMaterial:lz,MeshStandardMaterial:Jv,MeshPhongMaterial:mz,
MeshToonMaterial:HB,MeshNormalMaterial:IB,MeshLambertMaterial:JB,MeshDepthMaterial:cz,MeshDistanceMaterial:dz,MeshBasicMaterial:N,MeshMatcapMaterial:KB,LineDashedMaterial:LB,LineBasicMaterial:Pl,Material:M}),xl={arraySlice:function(u,z,t){return xl.isTypedArray(u)?new u.constructor(u.subarray(z,void 0!==t?t:u.length)):u.slice(z,t)},convertArray:function(u,z,t){return!u||!t&&u.constructor===z?u:"number"===typeof z.BYTES_PER_ELEMENT?new z(u):Array.prototype.slice.call(u)},isTypedArray:function(u){return ArrayBuffer.isView(u)&&
!(u instanceof DataView)},getKeyframeOrder:function(u){for(var z=u.length,t=Array(z),x=0;x!==z;++x)t[x]=x;t.sort(function(C,G){return u[C]-u[G]});return t},sortedArray:function(u,z,t){for(var x=u.length,C=new u.constructor(x),G=0,L=0;L!==x;++G)for(var S=t[G]*z,V=0;V!==z;++V)C[L++]=u[S+V];return C},flattenJSON:function(u,z,t,x){for(var C=1,G=u[0];void 0!==G&&void 0===G[x];)G=u[C++];if(void 0!==G){var L=G[x];if(void 0!==L)if(Array.isArray(L)){do L=G[x],void 0!==L&&(z.push(G.time),t.push.apply(t,L)),
G=u[C++];while(void 0!==G)}else if(void 0!==L.toArray){do L=G[x],void 0!==L&&(z.push(G.time),L.toArray(t,t.length)),G=u[C++];while(void 0!==G)}else{do L=G[x],void 0!==L&&(z.push(G.time),t.push(L)),G=u[C++];while(void 0!==G)}}},subclip:function(u,z,t,x,C){C=C||30;u=u.clone();u.name=z;z=[];for(var G=0;G<u.tracks.length;++G){for(var L=u.tracks[G],S=L.getValueSize(),V=[],Z=[],ja=0;ja<L.times.length;++ja){var ua=L.times[ja]*C;if(!(ua<t||ua>=x))for(V.push(L.times[ja]),ua=0;ua<S;++ua)Z.push(L.values[ja*
S+ua])}0!==V.length&&(L.times=xl.convertArray(V,L.times.constructor),L.values=xl.convertArray(Z,L.values.constructor),z.push(L))}u.tracks=z;t=Infinity;for(x=0;x<u.tracks.length;++x)t>u.tracks[x].times[0]&&(t=u.tracks[x].times[0]);for(x=0;x<u.tracks.length;++x)u.tracks[x].shift(-1*t);u.resetDuration();return u},makeClipAdditive:function(u,z,t,x){void 0===z&&(z=0);void 0===t&&(t=u);if(void 0===x||0>=x)x=30;var C=t.tracks.length,G=z/x;z=function(L){var S=t.tracks[L],V=S.ValueTypeName;if("bool"===V||
"string"===V)return"continue";L=u.tracks.find(function(Rc){return Rc.name===S.name&&Rc.ValueTypeName===V});if(void 0===L)return"continue";var Z=0,ja=S.getValueSize();S.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(Z=ja/3);var ua=0,Ca=L.getValueSize();L.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(ua=Ca/3);var bb=S.times.length-1,$a=void 0;G<=S.times[0]?$a=xl.arraySlice(S.values,Z,ja-Z):G>=S.times[bb]?($a=bb*ja+Z,$a=xl.arraySlice(S.values,$a,$a+ja-Z)):($a=S.createInterpolant(),
bb=Z,Z=ja-Z,$a.evaluate(G),$a=xl.arraySlice($a.resultBuffer,bb,Z));"quaternion"===V&&(new hp).fromArray($a).normalize().conjugate().toArray($a);Z=L.times.length;for(ja=0;ja<Z;++ja)if(bb=ja*Ca+ua,"quaternion"===V)hp.multiplyQuaternionsFlat(L.values,bb,$a,0,L.values,bb);else for(var ub=Ca-2*ua,pb=0;pb<ub;++pb)L.values[bb+pb]-=$a[pb]};for(x=0;x<C;++x)z(x);u.blendMode=2501;return u}};Object.assign(Ar.prototype,{evaluate:function(u){var z=(this||p).parameterPositions,t=(this||p)._cachedIndex,x=z[t],C=
z[t-1];a:{b:{c:{d:if(!(u<x)){for(var G=t+2;;){if(void 0===x){if(u<C)break d;t=z.length;(this||p)._cachedIndex=t;return this.afterEnd_(t-1,u,C)}if(t===G)break;C=x;x=z[++t];if(u<x)break b}x=z.length;break c}if(u>=C)break a;else{G=z[1];u<G&&(t=2,C=G);for(G=t-2;;){if(void 0===C)return(this||p)._cachedIndex=0,this.beforeStart_(0,u,x);if(t===G)break;x=C;C=z[--t-1];if(u>=C)break b}x=t;t=0}}for(;t<x;)C=t+x>>>1,u<z[C]?x=C:t=C+1;x=z[t];C=z[t-1];if(void 0===C)return(this||p)._cachedIndex=0,this.beforeStart_(0,
u,x);if(void 0===x)return t=z.length,(this||p)._cachedIndex=t,this.afterEnd_(t-1,C,u)}(this||p)._cachedIndex=t;this.intervalChanged_(t,C,x)}return this.interpolate_(t,C,u,x)},settings:null,DefaultSettings_:{},getSettings_:function(){return(this||p).settings||(this||p).DefaultSettings_},copySampleValue_:function(u){var z=(this||p).resultBuffer,t=(this||p).sampleValues,x=(this||p).valueSize;u*=x;for(var C=0;C!==x;++C)z[C]=t[u+C];return z},interpolate_:function(){throw Error("call to abstract method");
},intervalChanged_:function(){}});Object.assign(Ar.prototype,{beforeStart_:Ar.prototype.copySampleValue_,afterEnd_:Ar.prototype.copySampleValue_});eO.prototype=Object.assign(Object.create(Ar.prototype),{constructor:eO,DefaultSettings_:{endingStart:2400,endingEnd:2400},intervalChanged_:function(u,z,t){var x=(this||p).parameterPositions,C=u-2,G=u+1,L=x[C],S=x[G];if(void 0===L)switch(this.getSettings_().endingStart){case 2401:C=u;L=2*z-t;break;case 2402:C=x.length-2;L=z+x[C]-x[C+1];break;default:C=u,
L=t}if(void 0===S)switch(this.getSettings_().endingEnd){case 2401:G=u;S=2*t-z;break;case 2402:G=1;S=t+x[1]-x[0];break;default:G=u-1,S=z}u=.5*(t-z);x=(this||p).valueSize;(this||p)._weightPrev=u/(z-L);(this||p)._weightNext=u/(S-t);(this||p)._offsetPrev=C*x;(this||p)._offsetNext=G*x},interpolate_:function(u,z,t,x){var C=(this||p).resultBuffer,G=(this||p).sampleValues,L=(this||p).valueSize;u*=L;var S=u-L,V=(this||p)._offsetPrev,Z=(this||p)._offsetNext,ja=(this||p)._weightPrev,ua=(this||p)._weightNext,
Ca=(t-z)/(x-z);t=Ca*Ca;x=t*Ca;z=-ja*x+2*ja*t-ja*Ca;ja=(1+ja)*x+(-1.5-2*ja)*t+(-.5+ja)*Ca+1;Ca=(-1-ua)*x+(1.5+ua)*t+.5*Ca;ua=ua*x-ua*t;for(t=0;t!==L;++t)C[t]=z*G[V+t]+ja*G[S+t]+Ca*G[u+t]+ua*G[Z+t];return C}});jI.prototype=Object.assign(Object.create(Ar.prototype),{constructor:jI,interpolate_:function(u,z,t,x){var C=(this||p).resultBuffer,G=(this||p).sampleValues,L=(this||p).valueSize;u*=L;var S=u-L;z=(t-z)/(x-z);t=1-z;for(x=0;x!==L;++x)C[x]=G[S+x]*t+G[u+x]*z;return C}});fO.prototype=Object.assign(Object.create(Ar.prototype),
{constructor:fO,interpolate_:function(u){return this.copySampleValue_(u-1)}});Object.assign(Ko,{toJSON:function(u){var z=u.constructor;if(void 0!==z.toJSON)z=z.toJSON(u);else{z={name:u.name,times:xl.convertArray(u.times,Array),values:xl.convertArray(u.values,Array)};var t=u.getInterpolation();t!==u.DefaultInterpolation&&(z.interpolation=t)}z.type=u.ValueTypeName;return z}});Object.assign(Ko.prototype,{constructor:Ko,TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:2301,
InterpolantFactoryMethodDiscrete:function(u){return new fO((this||p).times,(this||p).values,this.getValueSize(),u)},InterpolantFactoryMethodLinear:function(u){return new jI((this||p).times,(this||p).values,this.getValueSize(),u)},InterpolantFactoryMethodSmooth:function(u){return new eO((this||p).times,(this||p).values,this.getValueSize(),u)},setInterpolation:function(u){switch(u){case 2300:var z=(this||p).InterpolantFactoryMethodDiscrete;break;case 2301:z=(this||p).InterpolantFactoryMethodLinear;
break;case 2302:z=(this||p).InterpolantFactoryMethodSmooth}if(void 0===z){z="unsupported interpolation for "+(this||p).ValueTypeName+" keyframe track named "+(this||p).name;if(void 0===(this||p).createInterpolant)if(u!==(this||p).DefaultInterpolation)this.setInterpolation((this||p).DefaultInterpolation);else throw Error(z);console.warn("THREE.KeyframeTrack:",z);return this||p}(this||p).createInterpolant=z;return this||p},getInterpolation:function(){switch((this||p).createInterpolant){case (this||
p).InterpolantFactoryMethodDiscrete:return 2300;case (this||p).InterpolantFactoryMethodLinear:return 2301;case (this||p).InterpolantFactoryMethodSmooth:return 2302}},getValueSize:function(){return(this||p).values.length/(this||p).times.length},shift:function(u){if(0!==u)for(var z=(this||p).times,t=0,x=z.length;t!==x;++t)z[t]+=u;return this||p},scale:function(u){if(1!==u)for(var z=(this||p).times,t=0,x=z.length;t!==x;++t)z[t]*=u;return this||p},trim:function(u,z){for(var t=(this||p).times,x=t.length,
C=0,G=x-1;C!==x&&t[C]<u;)++C;for(;-1!==G&&t[G]>z;)--G;++G;if(0!==C||G!==x)C>=G&&(G=Math.max(G,1),C=G-1),u=this.getValueSize(),(this||p).times=xl.arraySlice(t,C,G),(this||p).values=xl.arraySlice((this||p).values,C*u,G*u);return this||p},validate:function(){var u=!0,z=this.getValueSize();0!==z-Math.floor(z)&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this||p),u=!1);var t=(this||p).times;z=(this||p).values;var x=t.length;0===x&&(console.error("THREE.KeyframeTrack: Track is empty.",
this||p),u=!1);for(var C=null,G=0;G!==x;G++){var L=t[G];if("number"===typeof L&&isNaN(L)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this||p,G,L);u=!1;break}if(null!==C&&C>L){console.error("THREE.KeyframeTrack: Out of order keys.",this||p,G,L,C);u=!1;break}C=L}if(void 0!==z&&xl.isTypedArray(z))for(t=0,x=z.length;t!==x;++t)if(C=z[t],isNaN(C)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this||p,t,C);u=!1;break}return u},optimize:function(){for(var u=xl.arraySlice((this||
p).times),z=xl.arraySlice((this||p).values),t=this.getValueSize(),x=2302===this.getInterpolation(),C=u.length-1,G=1,L=1;L<C;++L){var S=!1,V=u[L];if(V!==u[L+1]&&(1!==L||V!==V[0]))if(x)S=!0;else{V=L*t;for(var Z=V-t,ja=V+t,ua=0;ua!==t;++ua){var Ca=z[V+ua];if(Ca!==z[Z+ua]||Ca!==z[ja+ua]){S=!0;break}}}if(S){if(L!==G)for(u[G]=u[L],S=L*t,V=G*t,Z=0;Z!==t;++Z)z[V+Z]=z[S+Z];++G}}if(0<C){u[G]=u[C];x=C*t;C=G*t;for(L=0;L!==t;++L)z[C+L]=z[x+L];++G}G!==u.length?((this||p).times=xl.arraySlice(u,0,G),(this||p).values=
xl.arraySlice(z,0,G*t)):((this||p).times=u,(this||p).values=z);return this||p},clone:function(){var u=xl.arraySlice((this||p).times,0),z=xl.arraySlice((this||p).values,0);u=new (this||p).constructor((this||p).name,u,z);u.createInterpolant=(this||p).createInterpolant;return u}});gO.prototype=Object.assign(Object.create(Ko.prototype),{constructor:gO,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:2300,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0});hO.prototype=
Object.assign(Object.create(Ko.prototype),{constructor:hO,ValueTypeName:"color"});zE.prototype=Object.assign(Object.create(Ko.prototype),{constructor:zE,ValueTypeName:"number"});iO.prototype=Object.assign(Object.create(Ar.prototype),{constructor:iO,interpolate_:function(u,z,t,x){var C=(this||p).resultBuffer,G=(this||p).sampleValues,L=(this||p).valueSize;z=(t-z)/(x-z);u*=L;for(t=u+L;u!==t;u+=4)hp.slerpFlat(C,0,G,u-L,G,u,z);return C}});kI.prototype=Object.assign(Object.create(Ko.prototype),{constructor:kI,
ValueTypeName:"quaternion",DefaultInterpolation:2301,InterpolantFactoryMethodLinear:function(u){return new iO((this||p).times,(this||p).values,this.getValueSize(),u)},InterpolantFactoryMethodSmooth:void 0});jO.prototype=Object.assign(Object.create(Ko.prototype),{constructor:jO,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:2300,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0});AE.prototype=Object.assign(Object.create(Ko.prototype),{constructor:AE,ValueTypeName:"vector"});
Object.assign(Js,{parse:function(u){for(var z=[],t=u.tracks,x=1/(u.fps||1),C=0,G=t.length;C!==G;++C)z.push(sra(t[C]).scale(x));return new Js(u.name,u.duration,z,u.blendMode)},toJSON:function(u){var z=[],t=u.tracks;u={name:u.name,duration:u.duration,tracks:z,uuid:u.uuid,blendMode:u.blendMode};for(var x=0,C=t.length;x!==C;++x)z.push(Ko.toJSON(t[x]));return u},CreateFromMorphTargetSequence:function(u,z,t,x){for(var C=z.length,G=[],L=0;L<C;L++){var S=[],V=[];S.push((L+C-1)%C,L,(L+1)%C);V.push(0,1,0);
var Z=xl.getKeyframeOrder(S);S=xl.sortedArray(S,1,Z);V=xl.sortedArray(V,1,Z);x||0!==S[0]||(S.push(C),V.push(V[0]));G.push((new zE(".morphTargetInfluences["+z[L].name+"]",S,V)).scale(1/t))}return new Js(u,-1,G)},findByName:function(u,z){var t=u;Array.isArray(u)||(t=u.geometry&&u.geometry.animations||u.animations);for(u=0;u<t.length;u++)if(t[u].name===z)return t[u];return null},CreateClipsFromMorphTargetSequences:function(u,z,t){for(var x={},C=/^([\w-]*?)([\d]+)$/,G=0,L=u.length;G<L;G++){var S=u[G],
V=S.name.match(C);if(V&&1<V.length){V=V[1];var Z=x[V];Z||(x[V]=Z=[]);Z.push(S)}}u=[];for(var ja in x)u.push(Js.CreateFromMorphTargetSequence(ja,x[ja],z,t));return u},parseAnimation:function(u,z){if(!u)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;var t=function(pb,Rc,xc,kd,Ec){if(0!==xc.length){var nd=[],Nc=[];xl.flattenJSON(xc,nd,Nc,kd);0!==nd.length&&Ec.push(new pb(Rc,nd,Nc))}},x=[],C=u.name||"default",G=u.fps||30,L=u.blendMode,S=u.length||-1;u=u.hierarchy||
[];for(var V=0;V<u.length;V++){var Z=u[V].keys;if(Z&&0!==Z.length)if(Z[0].morphTargets){S={};var ja=void 0;for(ja=0;ja<Z.length;ja++)if(Z[ja].morphTargets)for(var ua=0;ua<Z[ja].morphTargets.length;ua++)S[Z[ja].morphTargets[ua]]=-1;for(var Ca in S){ua=[];for(var bb=[],$a=0;$a!==Z[ja].morphTargets.length;++$a){var ub=Z[ja];ua.push(ub.time);bb.push(ub.morphTarget===Ca?1:0)}x.push(new zE(".morphTargetInfluence["+Ca+"]",ua,bb))}S=S.length*(G||1)}else ja=".bones["+z[V].name+"]",t(AE,ja+".position",Z,"pos",
x),t(kI,ja+".quaternion",Z,"rot",x),t(AE,ja+".scale",Z,"scl",x)}return 0===x.length?null:new Js(C,S,x,L)}});Object.assign(Js.prototype,{resetDuration:function(){for(var u=0,z=0,t=(this||p).tracks.length;z!==t;++z){var x=(this||p).tracks[z];u=Math.max(u,x.times[x.times.length-1])}(this||p).duration=u;return this||p},trim:function(){for(var u=0;u<(this||p).tracks.length;u++)(this||p).tracks[u].trim(0,(this||p).duration);return this||p},validate:function(){for(var u=!0,z=0;z<(this||p).tracks.length;z++)u=
u&&(this||p).tracks[z].validate();return u},optimize:function(){for(var u=0;u<(this||p).tracks.length;u++)(this||p).tracks[u].optimize();return this||p},clone:function(){for(var u=[],z=0;z<(this||p).tracks.length;z++)u.push((this||p).tracks[z].clone());return new Js((this||p).name,(this||p).duration,u,(this||p).blendMode)}});var QB={enabled:!1,files:{},add:function(u,z){!1!==(this||p).enabled&&((this||p).files[u]=z)},get:function(u){if(!1!==(this||p).enabled)return(this||p).files[u]},remove:function(u){delete (this||
p).files[u]},clear:function(){(this||p).files={}}},l$=new jW;Object.assign(Jk.prototype,{load:function(){},loadAsync:function(u,z){var t=this||p;return new Promise(function(x,C){t.load(u,x,z,C)})},parse:function(){},setCrossOrigin:function(u){(this||p).crossOrigin=u;return this||p},setWithCredentials:function(u){(this||p).withCredentials=u;return this||p},setPath:function(u){(this||p).path=u;return this||p},setResourcePath:function(u){(this||p).resourcePath=u;return this||p},setRequestHeader:function(u){(this||
p).requestHeader=u;return this||p}});var gu={};Ks.prototype=Object.assign(Object.create(Jk.prototype),{constructor:Ks,load:function(u,z,t,x){void 0===u&&(u="");void 0!==(this||p).path&&(u=(this||p).path+u);u=(this||p).manager.resolveURL(u);var C=this||p,G=QB.get(u);if(void 0!==G)return C.manager.itemStart(u),setTimeout(function(){z&&z(G);C.manager.itemEnd(u)},0),G;if(void 0!==gu[u])gu[u].push({onLoad:z,onProgress:t,onError:x});else{var L=u.match(/^data:(.*?)(;base64)?,(.*)$/);if(L){t=L[1];var S=!!L[2];
L=L[3];L=decodeURIComponent(L);S&&(L=atob(L));try{var V=((this||p).responseType||"").toLowerCase();switch(V){case "arraybuffer":case "blob":var Z=new Uint8Array(L.length);for(S=0;S<L.length;S++)Z[S]=L.charCodeAt(S);var ja="blob"===V?new Blob([Z.buffer],{type:t}):Z.buffer;break;case "document":ja=(new DOMParser).parseFromString(L,t);break;case "json":ja=JSON.parse(L);break;default:ja=L}setTimeout(function(){z&&z(ja);C.manager.itemEnd(u)},0)}catch(Ca){setTimeout(function(){x&&x(Ca);C.manager.itemError(u);
C.manager.itemEnd(u)},0)}}else{gu[u]=[];gu[u].push({onLoad:z,onProgress:t,onError:x});var ua=new XMLHttpRequest;ua.open("GET",u,!0);ua.addEventListener("load",function(Ca){var bb=(this||p).response,$a=gu[u];delete gu[u];if(200===(this||p).status||0===(this||p).status){0===(this||p).status&&console.warn("THREE.FileLoader: HTTP Status 0 received.");QB.add(u,bb);Ca=0;for(var ub=$a.length;Ca<ub;Ca++){var pb=$a[Ca];if(pb.onLoad)pb.onLoad(bb)}}else{bb=0;for(ub=$a.length;bb<ub;bb++)if(pb=$a[bb],pb.onError)pb.onError(Ca);
C.manager.itemError(u)}C.manager.itemEnd(u)},!1);ua.addEventListener("progress",function(Ca){for(var bb=gu[u],$a=0,ub=bb.length;$a<ub;$a++){var pb=bb[$a];if(pb.onProgress)pb.onProgress(Ca)}},!1);ua.addEventListener("error",function(Ca){var bb=gu[u];delete gu[u];for(var $a=0,ub=bb.length;$a<ub;$a++){var pb=bb[$a];if(pb.onError)pb.onError(Ca)}C.manager.itemError(u);C.manager.itemEnd(u)},!1);ua.addEventListener("abort",function(Ca){var bb=gu[u];delete gu[u];for(var $a=0,ub=bb.length;$a<ub;$a++){var pb=
bb[$a];if(pb.onError)pb.onError(Ca)}C.manager.itemError(u);C.manager.itemEnd(u)},!1);void 0!==(this||p).responseType&&(ua.responseType=(this||p).responseType);void 0!==(this||p).withCredentials&&(ua.withCredentials=(this||p).withCredentials);ua.overrideMimeType&&ua.overrideMimeType(void 0!==(this||p).mimeType?(this||p).mimeType:"text/plain");for(S in(this||p).requestHeader)ua.setRequestHeader(S,(this||p).requestHeader[S]);ua.send(null)}C.manager.itemStart(u);return ua}},setResponseType:function(u){(this||
p).responseType=u;return this||p},setMimeType:function(u){(this||p).mimeType=u;return this||p}});kW.prototype=Object.assign(Object.create(Jk.prototype),{constructor:kW,load:function(u,z,t,x){var C=this||p,G=new Ks(C.manager);G.setPath(C.path);G.setRequestHeader(C.requestHeader);G.setWithCredentials(C.withCredentials);G.load(u,function(L){try{z(C.parse(JSON.parse(L)))}catch(S){x?x(S):console.error(S),C.manager.itemError(u)}},t,x)},parse:function(u){for(var z=[],t=0;t<u.length;t++){var x=Js.parse(u[t]);
z.push(x)}return z}});lW.prototype=Object.assign(Object.create(Jk.prototype),{constructor:lW,load:function(u,z,t,x){function C(Ca){V.load(u[Ca],function(bb){bb=G.parse(bb,!0);L[Ca]={width:bb.width,height:bb.height,format:bb.format,mipmaps:bb.mipmaps};Z+=1;6===Z&&(1===bb.mipmapCount&&(S.minFilter=1006),S.format=bb.format,S.needsUpdate=!0,z&&z(S))},t,x)}var G=this||p,L=[],S=new wE;S.image=L;var V=new Ks((this||p).manager);V.setPath((this||p).path);V.setResponseType("arraybuffer");V.setRequestHeader((this||
p).requestHeader);V.setWithCredentials(G.withCredentials);var Z=0;if(Array.isArray(u))for(var ja=0,ua=u.length;ja<ua;++ja)C(ja);else V.load(u,function(Ca){Ca=G.parse(Ca,!0);if(Ca.isCubemap)for(var bb=Ca.mipmaps.length/Ca.mipmapCount,$a=0;$a<bb;$a++){L[$a]={mipmaps:[]};for(var ub=0;ub<Ca.mipmapCount;ub++)L[$a].mipmaps.push(Ca.mipmaps[$a*Ca.mipmapCount+ub]),L[$a].format=Ca.format,L[$a].width=Ca.width,L[$a].height=Ca.height}else S.image.width=Ca.width,S.image.height=Ca.height,S.mipmaps=Ca.mipmaps;1===
Ca.mipmapCount&&(S.minFilter=1006);S.format=Ca.format;S.needsUpdate=!0;z&&z(S)},t,x);return S}});BE.prototype=Object.assign(Object.create(Jk.prototype),{constructor:BE,load:function(u,z,t,x){function C(){V.removeEventListener("load",C,!1);V.removeEventListener("error",G,!1);QB.add(u,this||p);z&&z(this||p);L.manager.itemEnd(u)}function G(Z){V.removeEventListener("load",C,!1);V.removeEventListener("error",G,!1);x&&x(Z);L.manager.itemError(u);L.manager.itemEnd(u)}void 0!==(this||p).path&&(u=(this||p).path+
u);u=(this||p).manager.resolveURL(u);var L=this||p,S=QB.get(u);if(void 0!==S)return L.manager.itemStart(u),setTimeout(function(){z&&z(S);L.manager.itemEnd(u)},0),S;var V=document.createElementNS("http://www.w3.org/1999/xhtml","img");V.addEventListener("load",C,!1);V.addEventListener("error",G,!1);"data:"!==u.substr(0,5)&&void 0!==(this||p).crossOrigin&&(V.crossOrigin=(this||p).crossOrigin);L.manager.itemStart(u);V.src=u;return V}});kO.prototype=Object.assign(Object.create(Jk.prototype),{constructor:kO,
load:function(u,z,t,x){function C(V){L.load(u[V],function(Z){G.images[V]=Z;S++;6===S&&(G.needsUpdate=!0,z&&z(G))},void 0,x)}var G=new jc,L=new BE((this||p).manager);L.setCrossOrigin((this||p).crossOrigin);L.setPath((this||p).path);var S=0;for(t=0;t<u.length;++t)C(t);return G}});lO.prototype=Object.assign(Object.create(Jk.prototype),{constructor:lO,load:function(u,z,t,x){var C=this||p,G=new Pb,L=new Ks((this||p).manager);L.setResponseType("arraybuffer");L.setRequestHeader((this||p).requestHeader);
L.setPath((this||p).path);L.setWithCredentials(C.withCredentials);L.load(u,function(S){if(S=C.parse(S))void 0!==S.image?G.image=S.image:void 0!==S.data&&(G.image.width=S.width,G.image.height=S.height,G.image.data=S.data),G.wrapS=void 0!==S.wrapS?S.wrapS:1001,G.wrapT=void 0!==S.wrapT?S.wrapT:1001,G.magFilter=void 0!==S.magFilter?S.magFilter:1006,G.minFilter=void 0!==S.minFilter?S.minFilter:1006,G.anisotropy=void 0!==S.anisotropy?S.anisotropy:1,void 0!==S.format&&(G.format=S.format),void 0!==S.type&&
(G.type=S.type),void 0!==S.mipmaps&&(G.mipmaps=S.mipmaps,G.minFilter=1008),1===S.mipmapCount&&(G.minFilter=1006),G.needsUpdate=!0,z&&z(G,S)},t,x);return G}});mO.prototype=Object.assign(Object.create(Jk.prototype),{constructor:mO,load:function(u,z,t,x){var C=new r,G=new BE((this||p).manager);G.setCrossOrigin((this||p).crossOrigin);G.setPath((this||p).path);G.load(u,function(L){C.image=L;L=0<u.search(/\.jpe?g($|\?)/i)||0===u.search(/^data:image\/jpeg/);C.format=L?1022:1023;C.needsUpdate=!0;void 0!==
z&&z(C)},t,x);return C}});Object.assign(ah.prototype,{getPoint:function(){console.warn("THREE.Curve: .getPoint() not implemented.");return null},getPointAt:function(u,z){u=this.getUtoTmapping(u);return this.getPoint(u,z)},getPoints:function(u){void 0===u&&(u=5);for(var z=[],t=0;t<=u;t++)z.push(this.getPoint(t/u));return z},getSpacedPoints:function(u){void 0===u&&(u=5);for(var z=[],t=0;t<=u;t++)z.push(this.getPointAt(t/u));return z},getLength:function(){var u=this.getLengths();return u[u.length-1]},
getLengths:function(u){void 0===u&&(u=(this||p).arcLengthDivisions);if((this||p).cacheArcLengths&&(this||p).cacheArcLengths.length===u+1&&!(this||p).needsUpdate)return(this||p).cacheArcLengths;(this||p).needsUpdate=!1;var z=[],t=this.getPoint(0),x=0;z.push(0);for(var C=1;C<=u;C++){var G=this.getPoint(C/u);x+=G.distanceTo(t);z.push(x);t=G}return(this||p).cacheArcLengths=z},updateArcLengths:function(){(this||p).needsUpdate=!0;this.getLengths()},getUtoTmapping:function(u,z){var t=this.getLengths(),x=
t.length;z=z?z:u*t[x-1];for(var C=0,G=x-1,L;C<=G;)if(u=Math.floor(C+(G-C)/2),L=t[u]-z,0>L)C=u+1;else if(0<L)G=u-1;else{G=u;break}u=G;if(t[u]===z)return u/(x-1);C=t[u];return(u+(z-C)/(t[u+1]-C))/(x-1)},getTangent:function(u,z){var t=u-1E-4;u+=1E-4;0>t&&(t=0);1<u&&(u=1);t=this.getPoint(t);u=this.getPoint(u);z=z||(t.isVector2?new Ve:new qc);z.copy(u).sub(t).normalize();return z},getTangentAt:function(u,z){u=this.getUtoTmapping(u);return this.getTangent(u,z)},computeFrenetFrames:function(u,z){for(var t=
new qc,x=[],C=[],G=[],L=new qc,S=new fj,V=0;V<=u;V++)x[V]=this.getTangentAt(V/u,new qc),x[V].normalize();C[0]=new qc;G[0]=new qc;V=Number.MAX_VALUE;var Z=Math.abs(x[0].x),ja=Math.abs(x[0].y),ua=Math.abs(x[0].z);Z<=V&&(V=Z,t.set(1,0,0));ja<=V&&(V=ja,t.set(0,1,0));ua<=V&&t.set(0,0,1);L.crossVectors(x[0],t).normalize();C[0].crossVectors(x[0],L);G[0].crossVectors(x[0],C[0]);for(t=1;t<=u;t++)C[t]=C[t-1].clone(),G[t]=G[t-1].clone(),L.crossVectors(x[t-1],x[t]),L.length()>Number.EPSILON&&(L.normalize(),V=
Math.acos(ai.clamp(x[t-1].dot(x[t]),-1,1)),C[t].applyMatrix4(S.makeRotationAxis(L,V))),G[t].crossVectors(x[t],C[t]);if(!0===z)for(z=Math.acos(ai.clamp(C[0].dot(C[u]),-1,1)),z/=u,0<x[0].dot(L.crossVectors(C[0],C[u]))&&(z=-z),L=1;L<=u;L++)C[L].applyMatrix4(S.makeRotationAxis(x[L],z*L)),G[L].crossVectors(x[L],C[L]);return{tangents:x,normals:C,binormals:G}},clone:function(){return(new (this||p).constructor).copy(this||p)},copy:function(u){(this||p).arcLengthDivisions=u.arcLengthDivisions;return this||
p},toJSON:function(){var u={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};u.arcLengthDivisions=(this||p).arcLengthDivisions;u.type=(this||p).type;return u},fromJSON:function(u){(this||p).arcLengthDivisions=u.arcLengthDivisions;return this||p}});Br.prototype=Object.create(ah.prototype);Br.prototype.constructor=Br;Br.prototype.isEllipseCurve=!0;Br.prototype.getPoint=function(u,z){z=z||new Ve;for(var t=2*Math.PI,x=(this||p).aEndAngle-(this||p).aStartAngle,C=Math.abs(x)<Number.EPSILON;0>
x;)x+=t;for(;x>t;)x-=t;x<Number.EPSILON&&(x=C?0:t);!0!==(this||p).aClockwise||C||(x=x===t?-t:x-t);t=(this||p).aStartAngle+u*x;u=(this||p).aX+(this||p).xRadius*Math.cos(t);var G=(this||p).aY+(this||p).yRadius*Math.sin(t);0!==(this||p).aRotation&&(t=Math.cos((this||p).aRotation),x=Math.sin((this||p).aRotation),C=u-(this||p).aX,G-=(this||p).aY,u=C*t-G*x+(this||p).aX,G=C*x+G*t+(this||p).aY);return z.set(u,G)};Br.prototype.copy=function(u){ah.prototype.copy.call(this||p,u);(this||p).aX=u.aX;(this||p).aY=
u.aY;(this||p).xRadius=u.xRadius;(this||p).yRadius=u.yRadius;(this||p).aStartAngle=u.aStartAngle;(this||p).aEndAngle=u.aEndAngle;(this||p).aClockwise=u.aClockwise;(this||p).aRotation=u.aRotation;return this||p};Br.prototype.toJSON=function(){var u=ah.prototype.toJSON.call(this||p);u.aX=(this||p).aX;u.aY=(this||p).aY;u.xRadius=(this||p).xRadius;u.yRadius=(this||p).yRadius;u.aStartAngle=(this||p).aStartAngle;u.aEndAngle=(this||p).aEndAngle;u.aClockwise=(this||p).aClockwise;u.aRotation=(this||p).aRotation;
return u};Br.prototype.fromJSON=function(u){ah.prototype.fromJSON.call(this||p,u);(this||p).aX=u.aX;(this||p).aY=u.aY;(this||p).xRadius=u.xRadius;(this||p).yRadius=u.yRadius;(this||p).aStartAngle=u.aStartAngle;(this||p).aEndAngle=u.aEndAngle;(this||p).aClockwise=u.aClockwise;(this||p).aRotation=u.aRotation;return this||p};CE.prototype=Object.create(Br.prototype);CE.prototype.constructor=CE;CE.prototype.isArcCurve=!0;var WO=new qc,lX=new mW,mX=new mW,nX=new mW;ip.prototype=Object.create(ah.prototype);
ip.prototype.constructor=ip;ip.prototype.isCatmullRomCurve3=!0;ip.prototype.getPoint=function(u,z){z=z||new qc;var t=(this||p).points,x=t.length;u*=x-((this||p).closed?0:1);var C=Math.floor(u);u-=C;(this||p).closed?C+=0<C?0:(Math.floor(Math.abs(C)/x)+1)*x:0===u&&C===x-1&&(C=x-2,u=1);if((this||p).closed||0<C)var G=t[(C-1)%x];else WO.subVectors(t[0],t[1]).add(t[0]),G=WO;var L=t[C%x],S=t[(C+1)%x];(this||p).closed||C+2<x?t=t[(C+2)%x]:(WO.subVectors(t[x-1],t[x-2]).add(t[x-1]),t=WO);if("centripetal"===
(this||p).curveType||"chordal"===(this||p).curveType){var V="chordal"===(this||p).curveType?.5:.25;x=Math.pow(G.distanceToSquared(L),V);C=Math.pow(L.distanceToSquared(S),V);V=Math.pow(S.distanceToSquared(t),V);1E-4>C&&(C=1);1E-4>x&&(x=C);1E-4>V&&(V=C);lX.initNonuniformCatmullRom(G.x,L.x,S.x,t.x,x,C,V);mX.initNonuniformCatmullRom(G.y,L.y,S.y,t.y,x,C,V);nX.initNonuniformCatmullRom(G.z,L.z,S.z,t.z,x,C,V)}else"catmullrom"===(this||p).curveType&&(lX.initCatmullRom(G.x,L.x,S.x,t.x,(this||p).tension),mX.initCatmullRom(G.y,
L.y,S.y,t.y,(this||p).tension),nX.initCatmullRom(G.z,L.z,S.z,t.z,(this||p).tension));z.set(lX.calc(u),mX.calc(u),nX.calc(u));return z};ip.prototype.copy=function(u){ah.prototype.copy.call(this||p,u);(this||p).points=[];for(var z=0,t=u.points.length;z<t;z++)(this||p).points.push(u.points[z].clone());(this||p).closed=u.closed;(this||p).curveType=u.curveType;(this||p).tension=u.tension;return this||p};ip.prototype.toJSON=function(){var u=ah.prototype.toJSON.call(this||p);u.points=[];for(var z=0,t=(this||
p).points.length;z<t;z++)u.points.push((this||p).points[z].toArray());u.closed=(this||p).closed;u.curveType=(this||p).curveType;u.tension=(this||p).tension;return u};ip.prototype.fromJSON=function(u){ah.prototype.fromJSON.call(this||p,u);(this||p).points=[];for(var z=0,t=u.points.length;z<t;z++){var x=u.points[z];(this||p).points.push((new qc).fromArray(x))}(this||p).closed=u.closed;(this||p).curveType=u.curveType;(this||p).tension=u.tension;return this||p};au.prototype=Object.create(ah.prototype);
au.prototype.constructor=au;au.prototype.isCubicBezierCurve=!0;au.prototype.getPoint=function(u,z){z=z||new Ve;var t=(this||p).v0,x=(this||p).v1,C=(this||p).v2,G=(this||p).v3;z.set(mI(u,t.x,x.x,C.x,G.x),mI(u,t.y,x.y,C.y,G.y));return z};au.prototype.copy=function(u){ah.prototype.copy.call(this||p,u);(this||p).v0.copy(u.v0);(this||p).v1.copy(u.v1);(this||p).v2.copy(u.v2);(this||p).v3.copy(u.v3);return this||p};au.prototype.toJSON=function(){var u=ah.prototype.toJSON.call(this||p);u.v0=(this||p).v0.toArray();
u.v1=(this||p).v1.toArray();u.v2=(this||p).v2.toArray();u.v3=(this||p).v3.toArray();return u};au.prototype.fromJSON=function(u){ah.prototype.fromJSON.call(this||p,u);(this||p).v0.fromArray(u.v0);(this||p).v1.fromArray(u.v1);(this||p).v2.fromArray(u.v2);(this||p).v3.fromArray(u.v3);return this||p};Kv.prototype=Object.create(ah.prototype);Kv.prototype.constructor=Kv;Kv.prototype.isCubicBezierCurve3=!0;Kv.prototype.getPoint=function(u,z){z=z||new qc;var t=(this||p).v0,x=(this||p).v1,C=(this||p).v2,G=
(this||p).v3;z.set(mI(u,t.x,x.x,C.x,G.x),mI(u,t.y,x.y,C.y,G.y),mI(u,t.z,x.z,C.z,G.z));return z};Kv.prototype.copy=function(u){ah.prototype.copy.call(this||p,u);(this||p).v0.copy(u.v0);(this||p).v1.copy(u.v1);(this||p).v2.copy(u.v2);(this||p).v3.copy(u.v3);return this||p};Kv.prototype.toJSON=function(){var u=ah.prototype.toJSON.call(this||p);u.v0=(this||p).v0.toArray();u.v1=(this||p).v1.toArray();u.v2=(this||p).v2.toArray();u.v3=(this||p).v3.toArray();return u};Kv.prototype.fromJSON=function(u){ah.prototype.fromJSON.call(this||
p,u);(this||p).v0.fromArray(u.v0);(this||p).v1.fromArray(u.v1);(this||p).v2.fromArray(u.v2);(this||p).v3.fromArray(u.v3);return this||p};Hq.prototype=Object.create(ah.prototype);Hq.prototype.constructor=Hq;Hq.prototype.isLineCurve=!0;Hq.prototype.getPoint=function(u,z){z=z||new Ve;1===u?z.copy((this||p).v2):(z.copy((this||p).v2).sub((this||p).v1),z.multiplyScalar(u).add((this||p).v1));return z};Hq.prototype.getPointAt=function(u,z){return this.getPoint(u,z)};Hq.prototype.getTangent=function(u,z){u=
z||new Ve;u.copy((this||p).v2).sub((this||p).v1).normalize();return u};Hq.prototype.copy=function(u){ah.prototype.copy.call(this||p,u);(this||p).v1.copy(u.v1);(this||p).v2.copy(u.v2);return this||p};Hq.prototype.toJSON=function(){var u=ah.prototype.toJSON.call(this||p);u.v1=(this||p).v1.toArray();u.v2=(this||p).v2.toArray();return u};Hq.prototype.fromJSON=function(u){ah.prototype.fromJSON.call(this||p,u);(this||p).v1.fromArray(u.v1);(this||p).v2.fromArray(u.v2);return this||p};bu.prototype=Object.create(ah.prototype);
bu.prototype.constructor=bu;bu.prototype.isLineCurve3=!0;bu.prototype.getPoint=function(u,z){z=z||new qc;1===u?z.copy((this||p).v2):(z.copy((this||p).v2).sub((this||p).v1),z.multiplyScalar(u).add((this||p).v1));return z};bu.prototype.getPointAt=function(u,z){return this.getPoint(u,z)};bu.prototype.copy=function(u){ah.prototype.copy.call(this||p,u);(this||p).v1.copy(u.v1);(this||p).v2.copy(u.v2);return this||p};bu.prototype.toJSON=function(){var u=ah.prototype.toJSON.call(this||p);u.v1=(this||p).v1.toArray();
u.v2=(this||p).v2.toArray();return u};bu.prototype.fromJSON=function(u){ah.prototype.fromJSON.call(this||p,u);(this||p).v1.fromArray(u.v1);(this||p).v2.fromArray(u.v2);return this||p};cu.prototype=Object.create(ah.prototype);cu.prototype.constructor=cu;cu.prototype.isQuadraticBezierCurve=!0;cu.prototype.getPoint=function(u,z){z=z||new Ve;var t=(this||p).v0,x=(this||p).v1,C=(this||p).v2;z.set(lI(u,t.x,x.x,C.x),lI(u,t.y,x.y,C.y));return z};cu.prototype.copy=function(u){ah.prototype.copy.call(this||
p,u);(this||p).v0.copy(u.v0);(this||p).v1.copy(u.v1);(this||p).v2.copy(u.v2);return this||p};cu.prototype.toJSON=function(){var u=ah.prototype.toJSON.call(this||p);u.v0=(this||p).v0.toArray();u.v1=(this||p).v1.toArray();u.v2=(this||p).v2.toArray();return u};cu.prototype.fromJSON=function(u){ah.prototype.fromJSON.call(this||p,u);(this||p).v0.fromArray(u.v0);(this||p).v1.fromArray(u.v1);(this||p).v2.fromArray(u.v2);return this||p};Lv.prototype=Object.create(ah.prototype);Lv.prototype.constructor=Lv;
Lv.prototype.isQuadraticBezierCurve3=!0;Lv.prototype.getPoint=function(u,z){z=z||new qc;var t=(this||p).v0,x=(this||p).v1,C=(this||p).v2;z.set(lI(u,t.x,x.x,C.x),lI(u,t.y,x.y,C.y),lI(u,t.z,x.z,C.z));return z};Lv.prototype.copy=function(u){ah.prototype.copy.call(this||p,u);(this||p).v0.copy(u.v0);(this||p).v1.copy(u.v1);(this||p).v2.copy(u.v2);return this||p};Lv.prototype.toJSON=function(){var u=ah.prototype.toJSON.call(this||p);u.v0=(this||p).v0.toArray();u.v1=(this||p).v1.toArray();u.v2=(this||p).v2.toArray();
return u};Lv.prototype.fromJSON=function(u){ah.prototype.fromJSON.call(this||p,u);(this||p).v0.fromArray(u.v0);(this||p).v1.fromArray(u.v1);(this||p).v2.fromArray(u.v2);return this||p};du.prototype=Object.create(ah.prototype);du.prototype.constructor=du;du.prototype.isSplineCurve=!0;du.prototype.getPoint=function(u,z){z=z||new Ve;var t=(this||p).points,x=(t.length-1)*u;u=Math.floor(x);x-=u;var C=t[0===u?u:u-1],G=t[u],L=t[u>t.length-2?t.length-1:u+1];t=t[u>t.length-3?t.length-1:u+2];z.set(m$(x,C.x,
G.x,L.x,t.x),m$(x,C.y,G.y,L.y,t.y));return z};du.prototype.copy=function(u){ah.prototype.copy.call(this||p,u);(this||p).points=[];for(var z=0,t=u.points.length;z<t;z++)(this||p).points.push(u.points[z].clone());return this||p};du.prototype.toJSON=function(){var u=ah.prototype.toJSON.call(this||p);u.points=[];for(var z=0,t=(this||p).points.length;z<t;z++)u.points.push((this||p).points[z].toArray());return u};du.prototype.fromJSON=function(u){ah.prototype.fromJSON.call(this||p,u);(this||p).points=[];
for(var z=0,t=u.points.length;z<t;z++){var x=u.points[z];(this||p).points.push((new Ve).fromArray(x))}return this||p};var oX=Object.freeze({__proto__:null,ArcCurve:CE,CatmullRomCurve3:ip,CubicBezierCurve:au,CubicBezierCurve3:Kv,EllipseCurve:Br,LineCurve:Hq,LineCurve3:bu,QuadraticBezierCurve:cu,QuadraticBezierCurve3:Lv,SplineCurve:du});dx.prototype=Object.assign(Object.create(ah.prototype),{constructor:dx,add:function(u){(this||p).curves.push(u)},closePath:function(){var u=(this||p).curves[0].getPoint(0),
z=(this||p).curves[(this||p).curves.length-1].getPoint(1);u.equals(z)||(this||p).curves.push(new Hq(z,u))},getPoint:function(u){var z=u*this.getLength(),t=this.getCurveLengths();for(u=0;u<t.length;){if(t[u]>=z)return z=t[u]-z,u=(this||p).curves[u],t=u.getLength(),u.getPointAt(0===t?0:1-z/t);u++}return null},getLength:function(){var u=this.getCurveLengths();return u[u.length-1]},updateArcLengths:function(){(this||p).needsUpdate=!0;(this||p).cacheLengths=null;this.getCurveLengths()},getCurveLengths:function(){if((this||
p).cacheLengths&&(this||p).cacheLengths.length===(this||p).curves.length)return(this||p).cacheLengths;for(var u=[],z=0,t=0,x=(this||p).curves.length;t<x;t++)z+=(this||p).curves[t].getLength(),u.push(z);return(this||p).cacheLengths=u},getSpacedPoints:function(u){void 0===u&&(u=40);for(var z=[],t=0;t<=u;t++)z.push(this.getPoint(t/u));(this||p).autoClose&&z.push(z[0]);return z},getPoints:function(u){u=u||12;for(var z=[],t,x=0,C=(this||p).curves;x<C.length;x++){var G=C[x];G=G.getPoints(G&&G.isEllipseCurve?
2*u:G&&(G.isLineCurve||G.isLineCurve3)?1:G&&G.isSplineCurve?u*G.points.length:u);for(var L=0;L<G.length;L++){var S=G[L];t&&t.equals(S)||(z.push(S),t=S)}}(this||p).autoClose&&1<z.length&&!z[z.length-1].equals(z[0])&&z.push(z[0]);return z},copy:function(u){ah.prototype.copy.call(this||p,u);(this||p).curves=[];for(var z=0,t=u.curves.length;z<t;z++)(this||p).curves.push(u.curves[z].clone());(this||p).autoClose=u.autoClose;return this||p},toJSON:function(){var u=ah.prototype.toJSON.call(this||p);u.autoClose=
(this||p).autoClose;u.curves=[];for(var z=0,t=(this||p).curves.length;z<t;z++)u.curves.push((this||p).curves[z].toJSON());return u},fromJSON:function(u){ah.prototype.fromJSON.call(this||p,u);(this||p).autoClose=u.autoClose;(this||p).curves=[];for(var z=0,t=u.curves.length;z<t;z++){var x=u.curves[z];(this||p).curves.push((new oX[x.type]).fromJSON(x))}return this||p}});eu.prototype=Object.assign(Object.create(dx.prototype),{constructor:eu,setFromPoints:function(u){this.moveTo(u[0].x,u[0].y);for(var z=
1,t=u.length;z<t;z++)this.lineTo(u[z].x,u[z].y);return this||p},moveTo:function(u,z){(this||p).currentPoint.set(u,z);return this||p},lineTo:function(u,z){var t=new Hq((this||p).currentPoint.clone(),new Ve(u,z));(this||p).curves.push(t);(this||p).currentPoint.set(u,z);return this||p},quadraticCurveTo:function(u,z,t,x){u=new cu((this||p).currentPoint.clone(),new Ve(u,z),new Ve(t,x));(this||p).curves.push(u);(this||p).currentPoint.set(t,x);return this||p},bezierCurveTo:function(u,z,t,x,C,G){u=new au((this||
p).currentPoint.clone(),new Ve(u,z),new Ve(t,x),new Ve(C,G));(this||p).curves.push(u);(this||p).currentPoint.set(C,G);return this||p},splineThru:function(u){var z=[(this||p).currentPoint.clone()].concat(u);z=new du(z);(this||p).curves.push(z);(this||p).currentPoint.copy(u[u.length-1]);return this||p},arc:function(u,z,t,x,C,G){this.absarc(u+(this||p).currentPoint.x,z+(this||p).currentPoint.y,t,x,C,G);return this||p},absarc:function(u,z,t,x,C,G){this.absellipse(u,z,t,t,x,C,G);return this||p},ellipse:function(u,
z,t,x,C,G,L,S){this.absellipse(u+(this||p).currentPoint.x,z+(this||p).currentPoint.y,t,x,C,G,L,S);return this||p},absellipse:function(u,z,t,x,C,G,L,S){u=new Br(u,z,t,x,C,G,L,S);0<(this||p).curves.length&&(z=u.getPoint(0),z.equals((this||p).currentPoint)||this.lineTo(z.x,z.y));(this||p).curves.push(u);u=u.getPoint(1);(this||p).currentPoint.copy(u);return this||p},copy:function(u){dx.prototype.copy.call(this||p,u);(this||p).currentPoint.copy(u.currentPoint);return this||p},toJSON:function(){var u=dx.prototype.toJSON.call(this||
p);u.currentPoint=(this||p).currentPoint.toArray();return u},fromJSON:function(u){dx.prototype.fromJSON.call(this||p,u);(this||p).currentPoint.fromArray(u.currentPoint);return this||p}});nz.prototype=Object.assign(Object.create(eu.prototype),{constructor:nz,getPointsHoles:function(u){for(var z=[],t=0,x=(this||p).holes.length;t<x;t++)z[t]=(this||p).holes[t].getPoints(u);return z},extractPoints:function(u){return{shape:this.getPoints(u),holes:this.getPointsHoles(u)}},copy:function(u){eu.prototype.copy.call(this||
p,u);(this||p).holes=[];for(var z=0,t=u.holes.length;z<t;z++)(this||p).holes.push(u.holes[z].clone());return this||p},toJSON:function(){var u=eu.prototype.toJSON.call(this||p);u.uuid=(this||p).uuid;u.holes=[];for(var z=0,t=(this||p).holes.length;z<t;z++)u.holes.push((this||p).holes[z].toJSON());return u},fromJSON:function(u){eu.prototype.fromJSON.call(this||p,u);(this||p).uuid=u.uuid;(this||p).holes=[];for(var z=0,t=u.holes.length;z<t;z++){var x=u.holes[z];(this||p).holes.push((new eu).fromJSON(x))}return this||
p}});ll.prototype=Object.assign(Object.create(E.prototype),{constructor:ll,isLight:!0,copy:function(u){E.prototype.copy.call(this||p,u);(this||p).color.copy(u.color);(this||p).intensity=u.intensity;return this||p},toJSON:function(u){u=E.prototype.toJSON.call(this||p,u);u.object.color=(this||p).color.getHex();u.object.intensity=(this||p).intensity;void 0!==(this||p).groundColor&&(u.object.groundColor=(this||p).groundColor.getHex());void 0!==(this||p).distance&&(u.object.distance=(this||p).distance);
void 0!==(this||p).angle&&(u.object.angle=(this||p).angle);void 0!==(this||p).decay&&(u.object.decay=(this||p).decay);void 0!==(this||p).penumbra&&(u.object.penumbra=(this||p).penumbra);void 0!==(this||p).shadow&&(u.object.shadow=(this||p).shadow.toJSON());return u}});nO.prototype=Object.assign(Object.create(ll.prototype),{constructor:nO,isHemisphereLight:!0,copy:function(u){ll.prototype.copy.call(this||p,u);(this||p).groundColor.copy(u.groundColor);return this||p}});Object.assign(ex.prototype,{_projScreenMatrix:new fj,
_lightPositionWorld:new qc,_lookTarget:new qc,getViewportCount:function(){return(this||p)._viewportCount},getFrustum:function(){return(this||p)._frustum},updateMatrices:function(u){var z=(this||p).camera,t=(this||p).matrix,x=(this||p)._projScreenMatrix,C=(this||p)._lookTarget,G=(this||p)._lightPositionWorld;G.setFromMatrixPosition(u.matrixWorld);z.position.copy(G);C.setFromMatrixPosition(u.target.matrixWorld);z.lookAt(C);z.updateMatrixWorld();x.multiplyMatrices(z.projectionMatrix,z.matrixWorldInverse);
(this||p)._frustum.setFromProjectionMatrix(x);t.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1);t.multiply(z.projectionMatrix);t.multiply(z.matrixWorldInverse)},getViewport:function(u){return(this||p)._viewports[u]},getFrameExtents:function(){return(this||p)._frameExtents},copy:function(u){(this||p).camera=u.camera.clone();(this||p).bias=u.bias;(this||p).radius=u.radius;(this||p).mapSize.copy(u.mapSize);return this||p},clone:function(){return(new (this||p).constructor).copy(this||p)},toJSON:function(){var u=
{};0!==(this||p).bias&&(u.bias=(this||p).bias);0!==(this||p).normalBias&&(u.normalBias=(this||p).normalBias);1!==(this||p).radius&&(u.radius=(this||p).radius);if(512!==(this||p).mapSize.x||512!==(this||p).mapSize.y)u.mapSize=(this||p).mapSize.toArray();u.camera=(this||p).camera.toJSON(!1).object;delete u.camera.matrix;return u}});nW.prototype=Object.assign(Object.create(ex.prototype),{constructor:nW,isSpotLightShadow:!0,updateMatrices:function(u){var z=(this||p).camera,t=2*ai.RAD2DEG*u.angle*(this||
p).focus,x=(this||p).mapSize.width/(this||p).mapSize.height,C=u.distance||z.far;if(t!==z.fov||x!==z.aspect||C!==z.far)z.fov=t,z.aspect=x,z.far=C,z.updateProjectionMatrix();ex.prototype.updateMatrices.call(this||p,u)}});oO.prototype=Object.assign(Object.create(ll.prototype),{constructor:oO,isSpotLight:!0,copy:function(u){ll.prototype.copy.call(this||p,u);(this||p).distance=u.distance;(this||p).angle=u.angle;(this||p).penumbra=u.penumbra;(this||p).decay=u.decay;(this||p).target=u.target.clone();(this||
p).shadow=u.shadow.clone();return this||p}});oW.prototype=Object.assign(Object.create(ex.prototype),{constructor:oW,isPointLightShadow:!0,updateMatrices:function(u,z){void 0===z&&(z=0);var t=(this||p).camera,x=(this||p).matrix,C=(this||p)._lightPositionWorld,G=(this||p)._lookTarget,L=(this||p)._projScreenMatrix;C.setFromMatrixPosition(u.matrixWorld);t.position.copy(C);G.copy(t.position);G.add((this||p)._cubeDirections[z]);t.up.copy((this||p)._cubeUps[z]);t.lookAt(G);t.updateMatrixWorld();x.makeTranslation(-C.x,
-C.y,-C.z);L.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse);(this||p)._frustum.setFromProjectionMatrix(L)}});pO.prototype=Object.assign(Object.create(ll.prototype),{constructor:pO,isPointLight:!0,copy:function(u){ll.prototype.copy.call(this||p,u);(this||p).distance=u.distance;(this||p).decay=u.decay;(this||p).shadow=u.shadow.clone();return this||p}});DE.prototype=Object.assign(Object.create(Kb.prototype),{constructor:DE,isOrthographicCamera:!0,copy:function(u,z){Kb.prototype.copy.call(this||
p,u,z);(this||p).left=u.left;(this||p).right=u.right;(this||p).top=u.top;(this||p).bottom=u.bottom;(this||p).near=u.near;(this||p).far=u.far;(this||p).zoom=u.zoom;(this||p).view=null===u.view?null:Object.assign({},u.view);return this||p},setViewOffset:function(u,z,t,x,C,G){null===(this||p).view&&((this||p).view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1});(this||p).view.enabled=!0;(this||p).view.fullWidth=u;(this||p).view.fullHeight=z;(this||p).view.offsetX=t;(this||
p).view.offsetY=x;(this||p).view.width=C;(this||p).view.height=G;this.updateProjectionMatrix()},clearViewOffset:function(){null!==(this||p).view&&((this||p).view.enabled=!1);this.updateProjectionMatrix()},updateProjectionMatrix:function(){var u=((this||p).right-(this||p).left)/(2*(this||p).zoom),z=((this||p).top-(this||p).bottom)/(2*(this||p).zoom),t=((this||p).right+(this||p).left)/2,x=((this||p).top+(this||p).bottom)/2,C=t-u;t+=u;u=x+z;z=x-z;null!==(this||p).view&&(this||p).view.enabled&&(x=((this||
p).right-(this||p).left)/(this||p).view.fullWidth/(this||p).zoom,z=((this||p).top-(this||p).bottom)/(this||p).view.fullHeight/(this||p).zoom,C+=x*(this||p).view.offsetX,t=C+x*(this||p).view.width,u-=z*(this||p).view.offsetY,z=u-z*(this||p).view.height);(this||p).projectionMatrix.makeOrthographic(C,t,u,z,(this||p).near,(this||p).far);(this||p).projectionMatrixInverse.getInverse((this||p).projectionMatrix)},toJSON:function(u){u=E.prototype.toJSON.call(this||p,u);u.object.zoom=(this||p).zoom;u.object.left=
(this||p).left;u.object.right=(this||p).right;u.object.top=(this||p).top;u.object.bottom=(this||p).bottom;u.object.near=(this||p).near;u.object.far=(this||p).far;null!==(this||p).view&&(u.object.view=Object.assign({},(this||p).view));return u}});pW.prototype=Object.assign(Object.create(ex.prototype),{constructor:pW,isDirectionalLightShadow:!0,updateMatrices:function(u){ex.prototype.updateMatrices.call(this||p,u)}});qO.prototype=Object.assign(Object.create(ll.prototype),{constructor:qO,isDirectionalLight:!0,
copy:function(u){ll.prototype.copy.call(this||p,u);(this||p).target=u.target.clone();(this||p).shadow=u.shadow.clone();return this||p}});rO.prototype=Object.assign(Object.create(ll.prototype),{constructor:rO,isAmbientLight:!0});sO.prototype=Object.assign(Object.create(ll.prototype),{constructor:sO,isRectAreaLight:!0,copy:function(u){ll.prototype.copy.call(this||p,u);(this||p).width=u.width;(this||p).height=u.height;return this||p},toJSON:function(u){u=ll.prototype.toJSON.call(this||p,u);u.object.width=
(this||p).width;u.object.height=(this||p).height;return u}});var n$=function(){function u(){Object.defineProperty(this||p,"isSphericalHarmonics3",{value:!0});(this||p).coefficients=[];for(var t=0;9>t;t++)(this||p).coefficients.push(new qc)}var z=u.prototype;z.set=function(t){for(var x=0;9>x;x++)(this||p).coefficients[x].copy(t[x]);return this||p};z.zero=function(){for(var t=0;9>t;t++)(this||p).coefficients[t].set(0,0,0);return this||p};z.getAt=function(t,x){var C=t.x,G=t.y;t=t.z;var L=(this||p).coefficients;
x.copy(L[0]).multiplyScalar(.282095);x.addScaledVector(L[1],.488603*G);x.addScaledVector(L[2],.488603*t);x.addScaledVector(L[3],.488603*C);x.addScaledVector(L[4],1.092548*C*G);x.addScaledVector(L[5],1.092548*G*t);x.addScaledVector(L[6],.315392*(3*t*t-1));x.addScaledVector(L[7],1.092548*C*t);x.addScaledVector(L[8],.546274*(C*C-G*G));return x};z.getIrradianceAt=function(t,x){var C=t.x,G=t.y;t=t.z;var L=(this||p).coefficients;x.copy(L[0]).multiplyScalar(.886227);x.addScaledVector(L[1],1.023328*G);x.addScaledVector(L[2],
1.023328*t);x.addScaledVector(L[3],1.023328*C);x.addScaledVector(L[4],.858086*C*G);x.addScaledVector(L[5],.858086*G*t);x.addScaledVector(L[6],.743125*t*t-.247708);x.addScaledVector(L[7],.858086*C*t);x.addScaledVector(L[8],.429043*(C*C-G*G));return x};z.add=function(t){for(var x=0;9>x;x++)(this||p).coefficients[x].add(t.coefficients[x]);return this||p};z.addScaledSH=function(t,x){for(var C=0;9>C;C++)(this||p).coefficients[C].addScaledVector(t.coefficients[C],x);return this||p};z.scale=function(t){for(var x=
0;9>x;x++)(this||p).coefficients[x].multiplyScalar(t);return this||p};z.lerp=function(t,x){for(var C=0;9>C;C++)(this||p).coefficients[C].lerp(t.coefficients[C],x);return this||p};z.equals=function(t){for(var x=0;9>x;x++)if(!(this||p).coefficients[x].equals(t.coefficients[x]))return!1;return!0};z.copy=function(t){return this.set(t.coefficients)};z.clone=function(){return(new (this||p).constructor).copy(this||p)};z.fromArray=function(t,x){void 0===x&&(x=0);for(var C=(this||p).coefficients,G=0;9>G;G++)C[G].fromArray(t,
x+3*G);return this||p};z.toArray=function(t,x){void 0===t&&(t=[]);void 0===x&&(x=0);for(var C=(this||p).coefficients,G=0;9>G;G++)C[G].toArray(t,x+3*G);return t};u.getBasisAt=function(t,x){var C=t.x,G=t.y;t=t.z;x[0]=.282095;x[1]=.488603*G;x[2]=.488603*t;x[3]=.488603*C;x[4]=1.092548*C*G;x[5]=1.092548*G*t;x[6]=.315392*(3*t*t-1);x[7]=1.092548*C*t;x[8]=.546274*(C*C-G*G)};return u}();Ls.prototype=Object.assign(Object.create(ll.prototype),{constructor:Ls,isLightProbe:!0,copy:function(u){ll.prototype.copy.call(this||
p,u);(this||p).sh.copy(u.sh);return this||p},fromJSON:function(u){(this||p).intensity=u.intensity;(this||p).sh.fromArray(u.sh);return this||p},toJSON:function(u){u=ll.prototype.toJSON.call(this||p,u);u.object.sh=(this||p).sh.toArray();return u}});tO.prototype=Object.assign(Object.create(Jk.prototype),{constructor:tO,load:function(u,z,t,x){var C=this||p,G=new Ks(C.manager);G.setPath(C.path);G.setRequestHeader(C.requestHeader);G.setWithCredentials(C.withCredentials);G.load(u,function(L){try{z(C.parse(JSON.parse(L)))}catch(S){x?
x(S):console.error(S),C.manager.itemError(u)}},t,x)},parse:function(u){function z(S){void 0===t[S]&&console.warn("THREE.MaterialLoader: Undefined texture",S);return t[S]}var t=(this||p).textures,x=new Gra[u.type];void 0!==u.uuid&&(x.uuid=u.uuid);void 0!==u.name&&(x.name=u.name);void 0!==u.color&&x.color.setHex(u.color);void 0!==u.roughness&&(x.roughness=u.roughness);void 0!==u.metalness&&(x.metalness=u.metalness);void 0!==u.sheen&&(x.sheen=(new tg).setHex(u.sheen));void 0!==u.emissive&&x.emissive.setHex(u.emissive);
void 0!==u.specular&&x.specular.setHex(u.specular);void 0!==u.shininess&&(x.shininess=u.shininess);void 0!==u.clearcoat&&(x.clearcoat=u.clearcoat);void 0!==u.clearcoatRoughness&&(x.clearcoatRoughness=u.clearcoatRoughness);void 0!==u.fog&&(x.fog=u.fog);void 0!==u.flatShading&&(x.flatShading=u.flatShading);void 0!==u.blending&&(x.blending=u.blending);void 0!==u.combine&&(x.combine=u.combine);void 0!==u.side&&(x.side=u.side);void 0!==u.opacity&&(x.opacity=u.opacity);void 0!==u.transparent&&(x.transparent=
u.transparent);void 0!==u.alphaTest&&(x.alphaTest=u.alphaTest);void 0!==u.depthTest&&(x.depthTest=u.depthTest);void 0!==u.depthWrite&&(x.depthWrite=u.depthWrite);void 0!==u.colorWrite&&(x.colorWrite=u.colorWrite);void 0!==u.stencilWrite&&(x.stencilWrite=u.stencilWrite);void 0!==u.stencilWriteMask&&(x.stencilWriteMask=u.stencilWriteMask);void 0!==u.stencilFunc&&(x.stencilFunc=u.stencilFunc);void 0!==u.stencilRef&&(x.stencilRef=u.stencilRef);void 0!==u.stencilFuncMask&&(x.stencilFuncMask=u.stencilFuncMask);
void 0!==u.stencilFail&&(x.stencilFail=u.stencilFail);void 0!==u.stencilZFail&&(x.stencilZFail=u.stencilZFail);void 0!==u.stencilZPass&&(x.stencilZPass=u.stencilZPass);void 0!==u.wireframe&&(x.wireframe=u.wireframe);void 0!==u.wireframeLinewidth&&(x.wireframeLinewidth=u.wireframeLinewidth);void 0!==u.wireframeLinecap&&(x.wireframeLinecap=u.wireframeLinecap);void 0!==u.wireframeLinejoin&&(x.wireframeLinejoin=u.wireframeLinejoin);void 0!==u.rotation&&(x.rotation=u.rotation);1!==u.linewidth&&(x.linewidth=
u.linewidth);void 0!==u.dashSize&&(x.dashSize=u.dashSize);void 0!==u.gapSize&&(x.gapSize=u.gapSize);void 0!==u.scale&&(x.scale=u.scale);void 0!==u.polygonOffset&&(x.polygonOffset=u.polygonOffset);void 0!==u.polygonOffsetFactor&&(x.polygonOffsetFactor=u.polygonOffsetFactor);void 0!==u.polygonOffsetUnits&&(x.polygonOffsetUnits=u.polygonOffsetUnits);void 0!==u.skinning&&(x.skinning=u.skinning);void 0!==u.morphTargets&&(x.morphTargets=u.morphTargets);void 0!==u.morphNormals&&(x.morphNormals=u.morphNormals);
void 0!==u.dithering&&(x.dithering=u.dithering);void 0!==u.vertexTangents&&(x.vertexTangents=u.vertexTangents);void 0!==u.visible&&(x.visible=u.visible);void 0!==u.toneMapped&&(x.toneMapped=u.toneMapped);void 0!==u.userData&&(x.userData=u.userData);void 0!==u.vertexColors&&(x.vertexColors="number"===typeof u.vertexColors?0<u.vertexColors?!0:!1:u.vertexColors);if(void 0!==u.uniforms)for(var C in u.uniforms){var G=u.uniforms[C];x.uniforms[C]={};switch(G.type){case "t":x.uniforms[C].value=z(G.value);
break;case "c":x.uniforms[C].value=(new tg).setHex(G.value);break;case "v2":x.uniforms[C].value=(new Ve).fromArray(G.value);break;case "v3":x.uniforms[C].value=(new qc).fromArray(G.value);break;case "v4":x.uniforms[C].value=(new Qk).fromArray(G.value);break;case "m3":x.uniforms[C].value=(new Tp).fromArray(G.value);break;case "m4":x.uniforms[C].value=(new fj).fromArray(G.value);break;default:x.uniforms[C].value=G.value}}void 0!==u.defines&&(x.defines=u.defines);void 0!==u.vertexShader&&(x.vertexShader=
u.vertexShader);void 0!==u.fragmentShader&&(x.fragmentShader=u.fragmentShader);if(void 0!==u.extensions)for(var L in u.extensions)x.extensions[L]=u.extensions[L];void 0!==u.shading&&(x.flatShading=1===u.shading);void 0!==u.size&&(x.size=u.size);void 0!==u.sizeAttenuation&&(x.sizeAttenuation=u.sizeAttenuation);void 0!==u.map&&(x.map=z(u.map));void 0!==u.matcap&&(x.matcap=z(u.matcap));void 0!==u.alphaMap&&(x.alphaMap=z(u.alphaMap));void 0!==u.bumpMap&&(x.bumpMap=z(u.bumpMap));void 0!==u.bumpScale&&
(x.bumpScale=u.bumpScale);void 0!==u.normalMap&&(x.normalMap=z(u.normalMap));void 0!==u.normalMapType&&(x.normalMapType=u.normalMapType);void 0!==u.normalScale&&(C=u.normalScale,!1===Array.isArray(C)&&(C=[C,C]),x.normalScale=(new Ve).fromArray(C));void 0!==u.displacementMap&&(x.displacementMap=z(u.displacementMap));void 0!==u.displacementScale&&(x.displacementScale=u.displacementScale);void 0!==u.displacementBias&&(x.displacementBias=u.displacementBias);void 0!==u.roughnessMap&&(x.roughnessMap=z(u.roughnessMap));
void 0!==u.metalnessMap&&(x.metalnessMap=z(u.metalnessMap));void 0!==u.emissiveMap&&(x.emissiveMap=z(u.emissiveMap));void 0!==u.emissiveIntensity&&(x.emissiveIntensity=u.emissiveIntensity);void 0!==u.specularMap&&(x.specularMap=z(u.specularMap));void 0!==u.envMap&&(x.envMap=z(u.envMap));void 0!==u.envMapIntensity&&(x.envMapIntensity=u.envMapIntensity);void 0!==u.reflectivity&&(x.reflectivity=u.reflectivity);void 0!==u.refractionRatio&&(x.refractionRatio=u.refractionRatio);void 0!==u.lightMap&&(x.lightMap=
z(u.lightMap));void 0!==u.lightMapIntensity&&(x.lightMapIntensity=u.lightMapIntensity);void 0!==u.aoMap&&(x.aoMap=z(u.aoMap));void 0!==u.aoMapIntensity&&(x.aoMapIntensity=u.aoMapIntensity);void 0!==u.gradientMap&&(x.gradientMap=z(u.gradientMap));void 0!==u.clearcoatMap&&(x.clearcoatMap=z(u.clearcoatMap));void 0!==u.clearcoatRoughnessMap&&(x.clearcoatRoughnessMap=z(u.clearcoatRoughnessMap));void 0!==u.clearcoatNormalMap&&(x.clearcoatNormalMap=z(u.clearcoatNormalMap));void 0!==u.clearcoatNormalScale&&
(x.clearcoatNormalScale=(new Ve).fromArray(u.clearcoatNormalScale));void 0!==u.transmission&&(x.transmission=u.transmission);void 0!==u.transmissionMap&&(x.transmissionMap=z(u.transmissionMap));return x},setTextures:function(u){(this||p).textures=u;return this||p}});var pX={decodeText:function(u){if("undefined"!==typeof TextDecoder)return(new TextDecoder).decode(u);for(var z="",t=0,x=u.length;t<x;t++)z+=String.fromCharCode(u[t]);try{return decodeURIComponent(escape(z))}catch(C){return z}},extractUrlBase:function(u){var z=
u.lastIndexOf("/");return-1===z?"./":u.substr(0,z+1)}};nI.prototype=Object.assign(Object.create(oa.prototype),{constructor:nI,isInstancedBufferGeometry:!0,copy:function(u){oa.prototype.copy.call(this||p,u);(this||p).instanceCount=u.instanceCount;return this||p},clone:function(){return(new (this||p).constructor).copy(this||p)},toJSON:function(){var u=oa.prototype.toJSON.call(this||p);u.instanceCount=(this||p).instanceCount;u.isInstancedBufferGeometry=!0;return u}});uO.prototype=Object.assign(Object.create(W.prototype),
{constructor:uO,isInstancedBufferAttribute:!0,copy:function(u){W.prototype.copy.call(this||p,u);(this||p).meshPerAttribute=u.meshPerAttribute;return this||p},toJSON:function(){var u=W.prototype.toJSON.call(this||p);u.meshPerAttribute=(this||p).meshPerAttribute;u.isInstancedBufferAttribute=!0;return u}});vO.prototype=Object.assign(Object.create(Jk.prototype),{constructor:vO,load:function(u,z,t,x){var C=this||p,G=new Ks(C.manager);G.setPath(C.path);G.setRequestHeader(C.requestHeader);G.setWithCredentials(C.withCredentials);
G.load(u,function(L){try{z(C.parse(JSON.parse(L)))}catch(S){x?x(S):console.error(S),C.manager.itemError(u)}},t,x)},parse:function(u){function z(bb,$a){if(void 0!==t[$a])return t[$a];var ub=bb.interleavedBuffers[$a];var pb=ub.buffer;void 0!==x[pb]?pb=x[pb]:(bb=(new Uint32Array(bb.arrayBuffers[pb])).buffer,pb=x[pb]=bb);pb=new XO[ub.type](pb);pb=new zr(pb,ub.stride);pb.uuid=ub.uuid;return t[$a]=pb}var t={},x={},C=u.isInstancedBufferGeometry?new nI:new oa,G=u.data.index;void 0!==G&&(G=new XO[G.type](G.array),
C.setIndex(new W(G,1)));G=u.data.attributes;for(var L in G){var S=G[L],V=void 0;S.isInterleavedBufferAttribute?(V=z(u.data,S.data),V=new iz(V,S.itemSize,S.offset,S.normalized)):(V=new XO[S.type](S.array),V=new (S.isInstancedBufferAttribute?uO:W)(V,S.itemSize,S.normalized));void 0!==S.name&&(V.name=S.name);C.setAttribute(L,V)}if(L=u.data.morphAttributes)for(var Z in L){G=L[Z];S=[];V=0;for(var ja=G.length;V<ja;V++){var ua=G[V],Ca=void 0;ua.isInterleavedBufferAttribute?(Ca=z(u.data,ua.data),Ca=new iz(Ca,
ua.itemSize,ua.offset,ua.normalized)):(Ca=new XO[ua.type](ua.array),Ca=new W(Ca,ua.itemSize,ua.normalized));void 0!==ua.name&&(Ca.name=ua.name);S.push(Ca)}C.morphAttributes[Z]=S}u.data.morphTargetsRelative&&(C.morphTargetsRelative=!0);Z=u.data.groups||u.data.drawcalls||u.data.offsets;if(void 0!==Z)for(L=0,G=Z.length;L!==G;++L)S=Z[L],C.addGroup(S.start,S.count,S.materialIndex);Z=u.data.boundingSphere;void 0!==Z&&(L=new qc,void 0!==Z.center&&L.fromArray(Z.center),C.boundingSphere=new gx(L,Z.radius));
u.name&&(C.name=u.name);u.userData&&(C.userData=u.userData);return C}});var XO={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:"undefined"!==typeof Uint8ClampedArray?Uint8ClampedArray:Uint8Array,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array},Ira=function(u){function z(x){return u.call(this||p,x)||this||p}g(z,u);var t=z.prototype;t.load=function(x,C,G,L){var S=this||p,V=""===(this||p).path?
pX.extractUrlBase(x):(this||p).path;(this||p).resourcePath=(this||p).resourcePath||V;V=new Ks((this||p).manager);V.setPath((this||p).path);V.setRequestHeader((this||p).requestHeader);V.setWithCredentials((this||p).withCredentials);V.load(x,function(Z){var ja=null;try{ja=JSON.parse(Z)}catch(ua){void 0!==L&&L(ua);console.error("THREE:ObjectLoader: Can't parse "+x+".",ua.message);return}Z=ja.metadata;void 0===Z||void 0===Z.type||"geometry"===Z.type.toLowerCase()?console.error("THREE.ObjectLoader: Can't load "+
x):S.parse(ja,C)},G,L)};t.parse=function(x,C){var G=this.parseShape(x.shapes);G=this.parseGeometries(x.geometries,G);var L=this.parseImages(x.images,function(){void 0!==C&&C(S)});L=this.parseTextures(x.textures,L);L=this.parseMaterials(x.materials,L);var S=this.parseObject(x.object,G,L);x.animations&&(S.animations=this.parseAnimations(x.animations));void 0!==x.images&&0!==x.images.length||void 0===C||C(S);return S};t.parseShape=function(x){var C={};if(void 0!==x)for(var G=0,L=x.length;G<L;G++){var S=
(new nz).fromJSON(x[G]);C[S.uuid]=S}return C};t.parseGeometries=function(x,C){var G={};if(void 0!==x)for(var L=new vO,S=0,V=x.length;S<V;S++){var Z=void 0;var ja=x[S];switch(ja.type){case "PlaneGeometry":case "PlaneBufferGeometry":Z=new Wp[ja.type](ja.width,ja.height,ja.widthSegments,ja.heightSegments);break;case "BoxGeometry":case "BoxBufferGeometry":case "CubeGeometry":Z=new Wp[ja.type](ja.width,ja.height,ja.depth,ja.widthSegments,ja.heightSegments,ja.depthSegments);break;case "CircleGeometry":case "CircleBufferGeometry":Z=
new Wp[ja.type](ja.radius,ja.segments,ja.thetaStart,ja.thetaLength);break;case "CylinderGeometry":case "CylinderBufferGeometry":Z=new Wp[ja.type](ja.radiusTop,ja.radiusBottom,ja.height,ja.radialSegments,ja.heightSegments,ja.openEnded,ja.thetaStart,ja.thetaLength);break;case "ConeGeometry":case "ConeBufferGeometry":Z=new Wp[ja.type](ja.radius,ja.height,ja.radialSegments,ja.heightSegments,ja.openEnded,ja.thetaStart,ja.thetaLength);break;case "SphereGeometry":case "SphereBufferGeometry":Z=new Wp[ja.type](ja.radius,
ja.widthSegments,ja.heightSegments,ja.phiStart,ja.phiLength,ja.thetaStart,ja.thetaLength);break;case "DodecahedronGeometry":case "DodecahedronBufferGeometry":case "IcosahedronGeometry":case "IcosahedronBufferGeometry":case "OctahedronGeometry":case "OctahedronBufferGeometry":case "TetrahedronGeometry":case "TetrahedronBufferGeometry":Z=new Wp[ja.type](ja.radius,ja.detail);break;case "RingGeometry":case "RingBufferGeometry":Z=new Wp[ja.type](ja.innerRadius,ja.outerRadius,ja.thetaSegments,ja.phiSegments,
ja.thetaStart,ja.thetaLength);break;case "TorusGeometry":case "TorusBufferGeometry":Z=new Wp[ja.type](ja.radius,ja.tube,ja.radialSegments,ja.tubularSegments,ja.arc);break;case "TorusKnotGeometry":case "TorusKnotBufferGeometry":Z=new Wp[ja.type](ja.radius,ja.tube,ja.tubularSegments,ja.radialSegments,ja.p,ja.q);break;case "TubeGeometry":case "TubeBufferGeometry":Z=new Wp[ja.type]((new oX[ja.path.type]).fromJSON(ja.path),ja.tubularSegments,ja.radius,ja.radialSegments,ja.closed);break;case "LatheGeometry":case "LatheBufferGeometry":Z=
new Wp[ja.type](ja.points,ja.segments,ja.phiStart,ja.phiLength);break;case "PolyhedronGeometry":case "PolyhedronBufferGeometry":Z=new Wp[ja.type](ja.vertices,ja.indices,ja.radius,ja.details);break;case "ShapeGeometry":case "ShapeBufferGeometry":Z=[];for(var ua=0,Ca=ja.shapes.length;ua<Ca;ua++)Z.push(C[ja.shapes[ua]]);Z=new Wp[ja.type](Z,ja.curveSegments);break;case "ExtrudeGeometry":case "ExtrudeBufferGeometry":Z=[];ua=0;for(Ca=ja.shapes.length;ua<Ca;ua++)Z.push(C[ja.shapes[ua]]);ua=ja.options.extrudePath;
void 0!==ua&&(ja.options.extrudePath=(new oX[ua.type]).fromJSON(ua));Z=new Wp[ja.type](Z,ja.options);break;case "BufferGeometry":case "InstancedBufferGeometry":Z=L.parse(ja);break;case "Geometry":console.error('THREE.ObjectLoader: Loading "Geometry" is not supported anymore.');break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type "'+ja.type+'"');continue}Z.uuid=ja.uuid;void 0!==ja.name&&(Z.name=ja.name);!0===Z.isBufferGeometry&&void 0!==ja.userData&&(Z.userData=ja.userData);G[ja.uuid]=
Z}return G};t.parseMaterials=function(x,C){var G={},L={};if(void 0!==x){var S=new tO;S.setTextures(C);C=0;for(var V=x.length;C<V;C++){var Z=x[C];if("MultiMaterial"===Z.type){for(var ja=[],ua=0;ua<Z.materials.length;ua++){var Ca=Z.materials[ua];void 0===G[Ca.uuid]&&(G[Ca.uuid]=S.parse(Ca));ja.push(G[Ca.uuid])}L[Z.uuid]=ja}else void 0===G[Z.uuid]&&(G[Z.uuid]=S.parse(Z)),L[Z.uuid]=G[Z.uuid]}}return L};t.parseAnimations=function(x){for(var C=[],G=0;G<x.length;G++){var L=x[G],S=Js.parse(L);void 0!==L.uuid&&
(S.uuid=L.uuid);C.push(S)}return C};t.parseImages=function(x,C){function G(ub){L.manager.itemStart(ub);return V.load(ub,function(){L.manager.itemEnd(ub)},void 0,function(){L.manager.itemError(ub);L.manager.itemEnd(ub)})}var L=this||p,S={};if(void 0!==x&&0<x.length){C=new jW(C);var V=new BE(C);V.setCrossOrigin((this||p).crossOrigin);C=0;for(var Z=x.length;C<Z;C++){var ja=x[C],ua=ja.url;if(Array.isArray(ua)){S[ja.uuid]=[];for(var Ca=0,bb=ua.length;Ca<bb;Ca++){var $a=ua[Ca];$a=/^(\/\/)|([a-z]+:(\/\/)?)/i.test($a)?
$a:L.resourcePath+$a;S[ja.uuid].push(G($a))}}else ua=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(ja.url)?ja.url:L.resourcePath+ja.url,S[ja.uuid]=G(ua)}}return S};t.parseTextures=function(x,C){function G(ua,Ca){if("number"===typeof ua)return ua;console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",ua);return Ca[ua]}var L={};if(void 0!==x)for(var S=0,V=x.length;S<V;S++){var Z=x[S];void 0===Z.image&&console.warn('THREE.ObjectLoader: No "image" specified for',Z.uuid);void 0===C[Z.image]&&
console.warn("THREE.ObjectLoader: Undefined image",Z.image);var ja=void 0;ja=Array.isArray(C[Z.image])?new jc(C[Z.image]):new r(C[Z.image]);ja.needsUpdate=!0;ja.uuid=Z.uuid;void 0!==Z.name&&(ja.name=Z.name);void 0!==Z.mapping&&(ja.mapping=G(Z.mapping,Hra));void 0!==Z.offset&&ja.offset.fromArray(Z.offset);void 0!==Z.repeat&&ja.repeat.fromArray(Z.repeat);void 0!==Z.center&&ja.center.fromArray(Z.center);void 0!==Z.rotation&&(ja.rotation=Z.rotation);void 0!==Z.wrap&&(ja.wrapS=G(Z.wrap[0],jaa),ja.wrapT=
G(Z.wrap[1],jaa));void 0!==Z.format&&(ja.format=Z.format);void 0!==Z.type&&(ja.type=Z.type);void 0!==Z.encoding&&(ja.encoding=Z.encoding);void 0!==Z.minFilter&&(ja.minFilter=G(Z.minFilter,kaa));void 0!==Z.magFilter&&(ja.magFilter=G(Z.magFilter,kaa));void 0!==Z.anisotropy&&(ja.anisotropy=Z.anisotropy);void 0!==Z.flipY&&(ja.flipY=Z.flipY);void 0!==Z.premultiplyAlpha&&(ja.premultiplyAlpha=Z.premultiplyAlpha);void 0!==Z.unpackAlignment&&(ja.unpackAlignment=Z.unpackAlignment);L[Z.uuid]=ja}return L};t.parseObject=
function(x,C,G){function L(Ca){void 0===C[Ca]&&console.warn("THREE.ObjectLoader: Undefined geometry",Ca);return C[Ca]}function S(Ca){if(void 0!==Ca){if(Array.isArray(Ca)){for(var bb=[],$a=0,ub=Ca.length;$a<ub;$a++){var pb=Ca[$a];void 0===G[pb]&&console.warn("THREE.ObjectLoader: Undefined material",pb);bb.push(G[pb])}return bb}void 0===G[Ca]&&console.warn("THREE.ObjectLoader: Undefined material",Ca);return G[Ca]}}switch(x.type){case "Scene":var V=new RW;void 0!==x.background&&Number.isInteger(x.background)&&
(V.background=new tg(x.background));void 0!==x.fog&&("Fog"===x.fog.type?V.fog=new J$(x.fog.color,x.fog.near,x.fog.far):"FogExp2"===x.fog.type&&(V.fog=new I$(x.fog.color,x.fog.density)));break;case "PerspectiveCamera":V=new kc(x.fov,x.aspect,x.near,x.far);void 0!==x.focus&&(V.focus=x.focus);void 0!==x.zoom&&(V.zoom=x.zoom);void 0!==x.filmGauge&&(V.filmGauge=x.filmGauge);void 0!==x.filmOffset&&(V.filmOffset=x.filmOffset);void 0!==x.view&&(V.view=Object.assign({},x.view));break;case "OrthographicCamera":V=
new DE(x.left,x.right,x.top,x.bottom,x.near,x.far);void 0!==x.zoom&&(V.zoom=x.zoom);void 0!==x.view&&(V.view=Object.assign({},x.view));break;case "AmbientLight":V=new rO(x.color,x.intensity);break;case "DirectionalLight":V=new qO(x.color,x.intensity);break;case "PointLight":V=new pO(x.color,x.intensity,x.distance,x.decay);break;case "RectAreaLight":V=new sO(x.color,x.intensity,x.width,x.height);break;case "SpotLight":V=new oO(x.color,x.intensity,x.distance,x.angle,x.penumbra,x.decay);break;case "HemisphereLight":V=
new nO(x.color,x.groundColor,x.intensity);break;case "LightProbe":V=(new Ls).fromJSON(x);break;case "SkinnedMesh":console.warn("THREE.ObjectLoader.parseObject() does not support SkinnedMesh yet.");case "Mesh":V=L(x.geometry);var Z=S(x.material);V=new gb(V,Z);break;case "InstancedMesh":V=L(x.geometry);Z=S(x.material);var ja=x.instanceMatrix;V=new $N(V,Z,x.count);V.instanceMatrix=new W(new Float32Array(ja.array),16);break;case "LOD":V=new cI;break;case "Line":V=new Is(L(x.geometry),S(x.material),x.mode);
break;case "LineLoop":V=new aO(L(x.geometry),S(x.material));break;case "LineSegments":V=new Up(L(x.geometry),S(x.material));break;case "PointCloud":case "Points":V=new vE(L(x.geometry),S(x.material));break;case "Sprite":V=new aI(S(x.material));break;case "Group":V=new ez;break;default:V=new E}V.uuid=x.uuid;void 0!==x.name&&(V.name=x.name);void 0!==x.matrix?(V.matrix.fromArray(x.matrix),void 0!==x.matrixAutoUpdate&&(V.matrixAutoUpdate=x.matrixAutoUpdate),V.matrixAutoUpdate&&V.matrix.decompose(V.position,
V.quaternion,V.scale)):(void 0!==x.position&&V.position.fromArray(x.position),void 0!==x.rotation&&V.rotation.fromArray(x.rotation),void 0!==x.quaternion&&V.quaternion.fromArray(x.quaternion),void 0!==x.scale&&V.scale.fromArray(x.scale));void 0!==x.castShadow&&(V.castShadow=x.castShadow);void 0!==x.receiveShadow&&(V.receiveShadow=x.receiveShadow);x.shadow&&(void 0!==x.shadow.bias&&(V.shadow.bias=x.shadow.bias),void 0!==x.shadow.normalBias&&(V.shadow.normalBias=x.shadow.normalBias),void 0!==x.shadow.radius&&
(V.shadow.radius=x.shadow.radius),void 0!==x.shadow.mapSize&&V.shadow.mapSize.fromArray(x.shadow.mapSize),void 0!==x.shadow.camera&&(V.shadow.camera=this.parseObject(x.shadow.camera)));void 0!==x.visible&&(V.visible=x.visible);void 0!==x.frustumCulled&&(V.frustumCulled=x.frustumCulled);void 0!==x.renderOrder&&(V.renderOrder=x.renderOrder);void 0!==x.userData&&(V.userData=x.userData);void 0!==x.layers&&(V.layers.mask=x.layers);if(void 0!==x.children)for(ja=x.children,Z=0;Z<ja.length;Z++)V.add(this.parseObject(ja[Z],
C,G));if("LOD"===x.type)for(void 0!==x.autoUpdate&&(V.autoUpdate=x.autoUpdate),x=x.levels,ja=0;ja<x.length;ja++){Z=x[ja];var ua=V.getObjectByProperty("uuid",Z.object);void 0!==ua&&V.addLevel(ua,Z.distance)}return V};t.setTexturePath=function(x){console.warn("THREE.ObjectLoader: .setTexturePath() has been renamed to .setResourcePath().");return this.setResourcePath(x)};return z}(Jk),Hra={UVMapping:300,CubeReflectionMapping:301,CubeRefractionMapping:302,EquirectangularReflectionMapping:303,EquirectangularRefractionMapping:304,
CubeUVReflectionMapping:306,CubeUVRefractionMapping:307},jaa={RepeatWrapping:1E3,ClampToEdgeWrapping:1001,MirroredRepeatWrapping:1002},kaa={NearestFilter:1003,NearestMipmapNearestFilter:1004,NearestMipmapLinearFilter:1005,LinearFilter:1006,LinearMipmapNearestFilter:1007,LinearMipmapLinearFilter:1008};qW.prototype=Object.assign(Object.create(Jk.prototype),{constructor:qW,isImageBitmapLoader:!0,setOptions:function(u){(this||p).options=u;return this||p},load:function(u,z,t,x){void 0===u&&(u="");void 0!==
(this||p).path&&(u=(this||p).path+u);u=(this||p).manager.resolveURL(u);var C=this||p,G=QB.get(u);if(void 0!==G)return C.manager.itemStart(u),setTimeout(function(){z&&z(G);C.manager.itemEnd(u)},0),G;t={};t.credentials="anonymous"===(this||p).crossOrigin?"same-origin":"include";fetch(u,t).then(function(L){return L.blob()}).then(function(L){return createImageBitmap(L,C.options)}).then(function(L){QB.add(u,L);z&&z(L);C.manager.itemEnd(u)}).catch(function(L){x&&x(L);C.manager.itemError(u);C.manager.itemEnd(u)});
C.manager.itemStart(u)}});Object.assign(rW.prototype,{moveTo:function(u,z){(this||p).currentPath=new eu;(this||p).subPaths.push((this||p).currentPath);(this||p).currentPath.moveTo(u,z);return this||p},lineTo:function(u,z){(this||p).currentPath.lineTo(u,z);return this||p},quadraticCurveTo:function(u,z,t,x){(this||p).currentPath.quadraticCurveTo(u,z,t,x);return this||p},bezierCurveTo:function(u,z,t,x,C,G){(this||p).currentPath.bezierCurveTo(u,z,t,x,C,G);return this||p},splineThru:function(u){(this||
p).currentPath.splineThru(u);return this||p},toShapes:function(u,z){function t(pb){for(var Rc=[],xc=0,kd=pb.length;xc<kd;xc++){var Ec=pb[xc],nd=new nz;nd.curves=Ec.curves;Rc.push(nd)}return Rc}function x(pb,Rc){for(var xc=Rc.length,kd=!1,Ec=xc-1,nd=0;nd<xc;Ec=nd++){var Nc=Rc[Ec],Cd=Rc[nd],Xd=Cd.x-Nc.x,yd=Cd.y-Nc.y;if(Math.abs(yd)>Number.EPSILON){if(0>yd&&(Nc=Rc[nd],Xd=-Xd,Cd=Rc[Ec],yd=-yd),!(pb.y<Nc.y||pb.y>Cd.y))if(pb.y===Nc.y){if(pb.x===Nc.x)return!0}else{Ec=yd*(pb.x-Nc.x)-Xd*(pb.y-Nc.y);if(0===
Ec)return!0;0>Ec||(kd=!kd)}}else if(pb.y===Nc.y&&(Cd.x<=pb.x&&pb.x<=Nc.x||Nc.x<=pb.x&&pb.x<=Cd.x))return!0}return kd}var C=lx.isClockWise,G=(this||p).subPaths;if(0===G.length)return[];if(!0===z)return t(G);z=[];if(1===G.length){var L=G[0];var S=new nz;S.curves=L.curves;z.push(S);return z}var V=!C(G[0].getPoints());V=u?!V:V;S=[];var Z=[],ja=[],ua=0;Z[ua]=void 0;ja[ua]=[];for(var Ca=0,bb=G.length;Ca<bb;Ca++){L=G[Ca];var $a=L.getPoints();var ub=C($a);(ub=u?!ub:ub)?(!V&&Z[ua]&&ua++,Z[ua]={s:new nz,p:$a},
Z[ua].s.curves=L.curves,V&&ua++,ja[ua]=[]):ja[ua].push({h:L,p:$a[0]})}if(!Z[0])return t(G);if(1<Z.length){u=!1;C=[];G=0;for(L=Z.length;G<L;G++)S[G]=[];G=0;for(L=Z.length;G<L;G++)for(ub=ja[G],V=0;V<ub.length;V++){ua=ub[V];$a=!0;for(Ca=0;Ca<Z.length;Ca++)x(ua.p,Z[Ca].p)&&(G!==Ca&&C.push({froms:G,tos:Ca,hole:V}),$a?($a=!1,S[Ca].push(ua)):u=!0);$a&&S[G].push(ua)}0<C.length&&(u||(ja=S))}C=0;for(G=Z.length;C<G;C++)for(S=Z[C].s,z.push(S),u=ja[C],L=0,ub=u.length;L<ub;L++)S.holes.push(u[L].h);return z}});
Object.assign(sW.prototype,{isFont:!0,generateShapes:function(u,z){void 0===z&&(z=100);var t=[],x=z;z=(this||p).data;var C=Array.from?Array.from(u):String(u).split("");x/=z.resolution;var G=(z.boundingBox.yMax-z.boundingBox.yMin+z.underlineThickness)*x;u=[];for(var L=0,S=0,V=0;V<C.length;V++){var Z=C[V];if("\n"===Z)L=0,S-=G;else{var ja=Z;Z=x;var ua=L,Ca=S,bb=z,$a=bb.glyphs[ja]||bb.glyphs["?"];if($a){ja=new rW;if($a.o){bb=$a._cachedOutline||($a._cachedOutline=$a.o.split(" "));for(var ub=0,pb=bb.length;ub<
pb;)switch(bb[ub++]){case "m":var Rc=bb[ub++]*Z+ua;var xc=bb[ub++]*Z+Ca;ja.moveTo(Rc,xc);break;case "l":Rc=bb[ub++]*Z+ua;xc=bb[ub++]*Z+Ca;ja.lineTo(Rc,xc);break;case "q":var kd=bb[ub++]*Z+ua;var Ec=bb[ub++]*Z+Ca;var nd=bb[ub++]*Z+ua;var Nc=bb[ub++]*Z+Ca;ja.quadraticCurveTo(nd,Nc,kd,Ec);break;case "b":kd=bb[ub++]*Z+ua,Ec=bb[ub++]*Z+Ca,nd=bb[ub++]*Z+ua,Nc=bb[ub++]*Z+Ca,Rc=bb[ub++]*Z+ua,xc=bb[ub++]*Z+Ca,ja.bezierCurveTo(nd,Nc,Rc,xc,kd,Ec)}}Z={offsetX:$a.ha*Z,path:ja}}else console.error('THREE.Font: character "'+
ja+'" does not exists in font family '+bb.familyName+"."),Z=void 0;L+=Z.offsetX;u.push(Z.path)}}z=0;for(C=u.length;z<C;z++)Array.prototype.push.apply(t,u[z].toShapes());return t}});tW.prototype=Object.assign(Object.create(Jk.prototype),{constructor:tW,load:function(u,z,t,x){var C=this||p,G=new Ks((this||p).manager);G.setPath((this||p).path);G.setRequestHeader((this||p).requestHeader);G.setWithCredentials(C.withCredentials);G.load(u,function(L){try{var S=JSON.parse(L)}catch(V){console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),
S=JSON.parse(L.substring(65,L.length-2))}L=C.parse(S);z&&z(L)},t,x)},parse:function(u){return new sW(u)}});var YO,qX={getContext:function(){void 0===YO&&(YO=new (window.AudioContext||window.webkitAudioContext));return YO},setContext:function(u){YO=u}};wO.prototype=Object.assign(Object.create(Jk.prototype),{constructor:wO,load:function(u,z,t,x){var C=this||p,G=new Ks(C.manager);G.setResponseType("arraybuffer");G.setPath(C.path);G.setRequestHeader(C.requestHeader);G.setWithCredentials(C.withCredentials);
G.load(u,function(L){try{var S=L.slice(0);qX.getContext().decodeAudioData(S,function(V){z(V)})}catch(V){x?x(V):console.error(V),C.manager.itemError(u)}},t,x)}});uW.prototype=Object.assign(Object.create(Ls.prototype),{constructor:uW,isHemisphereLightProbe:!0,copy:function(u){Ls.prototype.copy.call(this||p,u);return this||p},toJSON:function(u){return Ls.prototype.toJSON.call(this||p,u)}});vW.prototype=Object.assign(Object.create(Ls.prototype),{constructor:vW,isAmbientLightProbe:!0,copy:function(u){Ls.prototype.copy.call(this||
p,u);return this||p},toJSON:function(u){return Ls.prototype.toJSON.call(this||p,u)}});var laa=new fj,maa=new fj;Object.assign(o$.prototype,{update:function(u){var z=(this||p)._cache;if(z.focus!==u.focus||z.fov!==u.fov||z.aspect!==u.aspect*(this||p).aspect||z.near!==u.near||z.far!==u.far||z.zoom!==u.zoom||z.eyeSep!==(this||p).eyeSep){z.focus=u.focus;z.fov=u.fov;z.aspect=u.aspect*(this||p).aspect;z.near=u.near;z.far=u.far;z.zoom=u.zoom;z.eyeSep=(this||p).eyeSep;var t=u.projectionMatrix.clone(),x=z.eyeSep/
2,C=x*z.near/z.focus,G=z.near*Math.tan(ai.DEG2RAD*z.fov*.5)/z.zoom;maa.elements[12]=-x;laa.elements[12]=x;x=-G*z.aspect+C;var L=G*z.aspect+C;t.elements[0]=2*z.near/(L-x);t.elements[8]=(L+x)/(L-x);(this||p).cameraL.projectionMatrix.copy(t);x=-G*z.aspect-C;L=G*z.aspect-C;t.elements[0]=2*z.near/(L-x);t.elements[8]=(L+x)/(L-x);(this||p).cameraR.projectionMatrix.copy(t)}(this||p).cameraL.matrixWorld.copy(u.matrixWorld).multiply(maa);(this||p).cameraR.matrixWorld.copy(u.matrixWorld).multiply(laa)}});var naa=
function(){function u(t){(this||p).autoStart=void 0!==t?t:!0;(this||p).startTime=0;(this||p).oldTime=0;(this||p).elapsedTime=0;(this||p).running=!1}var z=u.prototype;z.start=function(){(this||p).startTime=("undefined"===typeof performance?Date:performance).now();(this||p).oldTime=(this||p).startTime;(this||p).elapsedTime=0;(this||p).running=!0};z.stop=function(){this.getElapsedTime();(this||p).running=!1;(this||p).autoStart=!1};z.getElapsedTime=function(){this.getDelta();return(this||p).elapsedTime};
z.getDelta=function(){var t=0;if((this||p).autoStart&&!(this||p).running)return this.start(),0;if((this||p).running){var x=("undefined"===typeof performance?Date:performance).now();t=(x-(this||p).oldTime)/1E3;(this||p).oldTime=x;(this||p).elapsedTime+=t}return t};return u}(),RB=new qc,oaa=new hp,Jra=new qc,SB=new qc,Kra=function(u){function z(){var x=u.call(this||p)||this||p;x.type="AudioListener";x.context=qX.getContext();x.gain=x.context.createGain();x.gain.connect(x.context.destination);x.filter=
null;x.timeDelta=0;x._clock=new naa;return x}g(z,u);var t=z.prototype;t.getInput=function(){return(this||p).gain};t.removeFilter=function(){null!==(this||p).filter&&((this||p).gain.disconnect((this||p).filter),(this||p).filter.disconnect((this||p).context.destination),(this||p).gain.connect((this||p).context.destination),(this||p).filter=null);return this||p};t.getFilter=function(){return(this||p).filter};t.setFilter=function(x){null!==(this||p).filter?((this||p).gain.disconnect((this||p).filter),
(this||p).filter.disconnect((this||p).context.destination)):(this||p).gain.disconnect((this||p).context.destination);(this||p).filter=x;(this||p).gain.connect((this||p).filter);(this||p).filter.connect((this||p).context.destination);return this||p};t.getMasterVolume=function(){return(this||p).gain.gain.value};t.setMasterVolume=function(x){(this||p).gain.gain.setTargetAtTime(x,(this||p).context.currentTime,.01);return this||p};t.updateMatrixWorld=function(x){u.prototype.updateMatrixWorld.call(this||
p,x);x=(this||p).context.listener;var C=(this||p).up;(this||p).timeDelta=(this||p)._clock.getDelta();(this||p).matrixWorld.decompose(RB,oaa,Jra);SB.set(0,0,-1).applyQuaternion(oaa);if(x.positionX){var G=(this||p).context.currentTime+(this||p).timeDelta;x.positionX.linearRampToValueAtTime(RB.x,G);x.positionY.linearRampToValueAtTime(RB.y,G);x.positionZ.linearRampToValueAtTime(RB.z,G);x.forwardX.linearRampToValueAtTime(SB.x,G);x.forwardY.linearRampToValueAtTime(SB.y,G);x.forwardZ.linearRampToValueAtTime(SB.z,
G);x.upX.linearRampToValueAtTime(C.x,G);x.upY.linearRampToValueAtTime(C.y,G);x.upZ.linearRampToValueAtTime(C.z,G)}else x.setPosition(RB.x,RB.y,RB.z),x.setOrientation(SB.x,SB.y,SB.z,C.x,C.y,C.z)};return z}(E),rX=function(u){function z(x){var C=u.call(this||p)||this||p;C.type="Audio";C.listener=x;C.context=x.context;C.gain=C.context.createGain();C.gain.connect(x.getInput());C.autoplay=!1;C.buffer=null;C.detune=0;C.loop=!1;C.loopStart=0;C.loopEnd=0;C.offset=0;C.duration=void 0;C.playbackRate=1;C.isPlaying=
!1;C.hasPlaybackControl=!0;C.source=null;C.sourceType="empty";C._startedAt=0;C._progress=0;C._connected=!1;C.filters=[];return C}g(z,u);var t=z.prototype;t.getOutput=function(){return(this||p).gain};t.setNodeSource=function(x){(this||p).hasPlaybackControl=!1;(this||p).sourceType="audioNode";(this||p).source=x;this.connect();return this||p};t.setMediaElementSource=function(x){(this||p).hasPlaybackControl=!1;(this||p).sourceType="mediaNode";(this||p).source=(this||p).context.createMediaElementSource(x);
this.connect();return this||p};t.setMediaStreamSource=function(x){(this||p).hasPlaybackControl=!1;(this||p).sourceType="mediaStreamNode";(this||p).source=(this||p).context.createMediaStreamSource(x);this.connect();return this||p};t.setBuffer=function(x){(this||p).buffer=x;(this||p).sourceType="buffer";(this||p).autoplay&&this.play();return this||p};t.play=function(x){void 0===x&&(x=0);if(!0===(this||p).isPlaying)console.warn("THREE.Audio: Audio is already playing.");else if(!1===(this||p).hasPlaybackControl)console.warn("THREE.Audio: this Audio has no playback control.");
else return(this||p)._startedAt=(this||p).context.currentTime+x,x=(this||p).context.createBufferSource(),x.buffer=(this||p).buffer,x.loop=(this||p).loop,x.loopStart=(this||p).loopStart,x.loopEnd=(this||p).loopEnd,x.onended=(this||p).onEnded.bind(this||p),x.start((this||p)._startedAt,(this||p)._progress+(this||p).offset,(this||p).duration),(this||p).isPlaying=!0,(this||p).source=x,this.setDetune((this||p).detune),this.setPlaybackRate((this||p).playbackRate),this.connect()};t.pause=function(){if(!1===
(this||p).hasPlaybackControl)console.warn("THREE.Audio: this Audio has no playback control.");else return!0===(this||p).isPlaying&&((this||p)._progress+=Math.max((this||p).context.currentTime-(this||p)._startedAt,0)*(this||p).playbackRate,!0===(this||p).loop&&((this||p)._progress%=(this||p).duration||(this||p).buffer.duration),(this||p).source.stop(),(this||p).source.onended=null,(this||p).isPlaying=!1),this||p};t.stop=function(){if(!1===(this||p).hasPlaybackControl)console.warn("THREE.Audio: this Audio has no playback control.");
else return(this||p)._progress=0,(this||p).source.stop(),(this||p).source.onended=null,(this||p).isPlaying=!1,this||p};t.connect=function(){if(0<(this||p).filters.length){(this||p).source.connect((this||p).filters[0]);for(var x=1,C=(this||p).filters.length;x<C;x++)(this||p).filters[x-1].connect((this||p).filters[x]);(this||p).filters[(this||p).filters.length-1].connect(this.getOutput())}else(this||p).source.connect(this.getOutput());(this||p)._connected=!0;return this||p};t.disconnect=function(){if(0<
(this||p).filters.length){(this||p).source.disconnect((this||p).filters[0]);for(var x=1,C=(this||p).filters.length;x<C;x++)(this||p).filters[x-1].disconnect((this||p).filters[x]);(this||p).filters[(this||p).filters.length-1].disconnect(this.getOutput())}else(this||p).source.disconnect(this.getOutput());(this||p)._connected=!1;return this||p};t.getFilters=function(){return(this||p).filters};t.setFilters=function(x){x||(x=[]);!0===(this||p)._connected?(this.disconnect(),(this||p).filters=x,this.connect()):
(this||p).filters=x;return this||p};t.setDetune=function(x){(this||p).detune=x;if(void 0!==(this||p).source.detune)return!0===(this||p).isPlaying&&(this||p).source.detune.setTargetAtTime((this||p).detune,(this||p).context.currentTime,.01),this||p};t.getDetune=function(){return(this||p).detune};t.getFilter=function(){return this.getFilters()[0]};t.setFilter=function(x){return this.setFilters(x?[x]:[])};t.setPlaybackRate=function(x){if(!1===(this||p).hasPlaybackControl)console.warn("THREE.Audio: this Audio has no playback control.");
else return(this||p).playbackRate=x,!0===(this||p).isPlaying&&(this||p).source.playbackRate.setTargetAtTime((this||p).playbackRate,(this||p).context.currentTime,.01),this||p};t.getPlaybackRate=function(){return(this||p).playbackRate};t.onEnded=function(){(this||p).isPlaying=!1};t.getLoop=function(){return!1===(this||p).hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):(this||p).loop};t.setLoop=function(x){if(!1===(this||p).hasPlaybackControl)console.warn("THREE.Audio: this Audio has no playback control.");
else return(this||p).loop=x,!0===(this||p).isPlaying&&((this||p).source.loop=(this||p).loop),this||p};t.setLoopStart=function(x){(this||p).loopStart=x;return this||p};t.setLoopEnd=function(x){(this||p).loopEnd=x;return this||p};t.getVolume=function(){return(this||p).gain.gain.value};t.setVolume=function(x){(this||p).gain.gain.setTargetAtTime(x,(this||p).context.currentTime,.01);return this||p};return z}(E),TB=new qc,paa=new hp,Lra=new qc,UB=new qc,Mra=function(u){function z(x){x=u.call(this||p,x)||
this||p;x.panner=x.context.createPanner();x.panner.panningModel="HRTF";x.panner.connect(x.gain);return x}g(z,u);var t=z.prototype;t.getOutput=function(){return(this||p).panner};t.getRefDistance=function(){return(this||p).panner.refDistance};t.setRefDistance=function(x){(this||p).panner.refDistance=x;return this||p};t.getRolloffFactor=function(){return(this||p).panner.rolloffFactor};t.setRolloffFactor=function(x){(this||p).panner.rolloffFactor=x;return this||p};t.getDistanceModel=function(){return(this||
p).panner.distanceModel};t.setDistanceModel=function(x){(this||p).panner.distanceModel=x;return this||p};t.getMaxDistance=function(){return(this||p).panner.maxDistance};t.setMaxDistance=function(x){(this||p).panner.maxDistance=x;return this||p};t.setDirectionalCone=function(x,C,G){(this||p).panner.coneInnerAngle=x;(this||p).panner.coneOuterAngle=C;(this||p).panner.coneOuterGain=G;return this||p};t.updateMatrixWorld=function(x){u.prototype.updateMatrixWorld.call(this||p,x);if(!0!==(this||p).hasPlaybackControl||
!1!==(this||p).isPlaying)if((this||p).matrixWorld.decompose(TB,paa,Lra),UB.set(0,0,1).applyQuaternion(paa),x=(this||p).panner,x.positionX){var C=(this||p).context.currentTime+(this||p).listener.timeDelta;x.positionX.linearRampToValueAtTime(TB.x,C);x.positionY.linearRampToValueAtTime(TB.y,C);x.positionZ.linearRampToValueAtTime(TB.z,C);x.orientationX.linearRampToValueAtTime(UB.x,C);x.orientationY.linearRampToValueAtTime(UB.y,C);x.orientationZ.linearRampToValueAtTime(UB.z,C)}else x.setPosition(TB.x,
TB.y,TB.z),x.setOrientation(UB.x,UB.y,UB.z)};return z}(rX),qaa=function(){function u(t,x){(this||p).analyser=t.context.createAnalyser();(this||p).analyser.fftSize=void 0!==x?x:2048;(this||p).data=new Uint8Array((this||p).analyser.frequencyBinCount);t.getOutput().connect((this||p).analyser)}var z=u.prototype;z.getFrequencyData=function(){(this||p).analyser.getByteFrequencyData((this||p).data);return(this||p).data};z.getAverageFrequency=function(){for(var t=0,x=this.getFrequencyData(),C=0;C<x.length;C++)t+=
x[C];return t/x.length};return u}();Object.assign(wW.prototype,{accumulate:function(u,z){var t=(this||p).buffer,x=(this||p).valueSize;u=u*x+x;var C=(this||p).cumulativeWeight;if(0===C){for(C=0;C!==x;++C)t[u+C]=t[C];C=z}else C+=z,this._mixBufferRegion(t,u,0,z/C,x);(this||p).cumulativeWeight=C},accumulateAdditive:function(u){var z=(this||p).buffer,t=(this||p).valueSize,x=t*(this||p)._addIndex;0===(this||p).cumulativeWeightAdditive&&this._setIdentity();this._mixBufferRegionAdditive(z,x,0,u,t);(this||
p).cumulativeWeightAdditive+=u},apply:function(u){var z=(this||p).valueSize,t=(this||p).buffer;u=u*z+z;var x=(this||p).cumulativeWeight,C=(this||p).cumulativeWeightAdditive,G=(this||p).binding;(this||p).cumulativeWeight=0;(this||p).cumulativeWeightAdditive=0;1>x&&this._mixBufferRegion(t,u,z*(this||p)._origIndex,1-x,z);0<C&&this._mixBufferRegionAdditive(t,u,(this||p)._addIndex*z,1,z);x=z;for(C=z+z;x!==C;++x)if(t[x]!==t[x+z]){G.setValue(t,u);break}},saveOriginalState:function(){var u=(this||p).buffer,
z=(this||p).valueSize,t=z*(this||p)._origIndex;(this||p).binding.getValue(u,t);for(var x=z;x!==t;++x)u[x]=u[t+x%z];this._setIdentity();(this||p).cumulativeWeight=0;(this||p).cumulativeWeightAdditive=0},restoreOriginalState:function(){(this||p).binding.setValue((this||p).buffer,3*(this||p).valueSize)},_setAdditiveIdentityNumeric:function(){for(var u=(this||p)._addIndex*(this||p).valueSize,z=u+(this||p).valueSize;u<z;u++)(this||p).buffer[u]=0},_setAdditiveIdentityQuaternion:function(){this._setAdditiveIdentityNumeric();
(this||p).buffer[(this||p)._addIndex*(this||p).valueSize+3]=1},_setAdditiveIdentityOther:function(){for(var u=(this||p)._origIndex*(this||p).valueSize,z=(this||p)._addIndex*(this||p).valueSize,t=0;t<(this||p).valueSize;t++)(this||p).buffer[z+t]=(this||p).buffer[u+t]},_select:function(u,z,t,x,C){if(.5<=x)for(x=0;x!==C;++x)u[z+x]=u[t+x]},_slerp:function(u,z,t,x){hp.slerpFlat(u,z,u,z,u,t,x)},_slerpAdditive:function(u,z,t,x,C){C*=(this||p)._workIndex;hp.multiplyQuaternionsFlat(u,C,u,z,u,t);hp.slerpFlat(u,
z,u,z,u,C,x)},_lerp:function(u,z,t,x,C){for(var G=1-x,L=0;L!==C;++L){var S=z+L;u[S]=u[S]*G+u[t+L]*x}},_lerpAdditive:function(u,z,t,x,C){for(var G=0;G!==C;++G){var L=z+G;u[L]+=u[t+G]*x}}});var Nra=/[\[\]\.:\/]/g,Ora="[^"+"\\[\\]\\.:\\/".replace("\\.","")+"]",Pra=/((?:WC+[\/:])*)/.source.replace("WC","[^\\[\\]\\.:\\/]"),Qra=/(WCOD+)?/.source.replace("WCOD",Ora),Rra=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC","[^\\[\\]\\.:\\/]"),Sra=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC","[^\\[\\]\\.:\\/]"),
Tra=new RegExp("^"+Pra+Qra+Rra+Sra+"$"),Ura=["material","materials","bones"];Object.assign(p$.prototype,{getValue:function(u,z){this.bind();var t=(this||p)._bindings[(this||p)._targetGroup.nCachedObjects_];void 0!==t&&t.getValue(u,z)},setValue:function(u,z){for(var t=(this||p)._bindings,x=(this||p)._targetGroup.nCachedObjects_,C=t.length;x!==C;++x)t[x].setValue(u,z)},bind:function(){for(var u=(this||p)._bindings,z=(this||p)._targetGroup.nCachedObjects_,t=u.length;z!==t;++z)u[z].bind()},unbind:function(){for(var u=
(this||p)._bindings,z=(this||p)._targetGroup.nCachedObjects_,t=u.length;z!==t;++z)u[z].unbind()}});Object.assign(jp,{Composite:p$,create:function(u,z,t){return u&&u.isAnimationObjectGroup?new jp.Composite(u,z,t):new jp(u,z,t)},sanitizeNodeName:function(u){return u.replace(/\s/g,"_").replace(Nra,"")},parseTrackName:function(u){var z=Tra.exec(u);if(!z)throw Error("PropertyBinding: Cannot parse trackName: "+u);z={nodeName:z[2],objectName:z[3],objectIndex:z[4],propertyName:z[5],propertyIndex:z[6]};var t=
z.nodeName&&z.nodeName.lastIndexOf(".");if(void 0!==t&&-1!==t){var x=z.nodeName.substring(t+1);-1!==Ura.indexOf(x)&&(z.nodeName=z.nodeName.substring(0,t),z.objectName=x)}if(null===z.propertyName||0===z.propertyName.length)throw Error("PropertyBinding: can not parse propertyName from trackName: "+u);return z},findNode:function(u,z){if(!z||""===z||"."===z||-1===z||z===u.name||z===u.uuid)return u;if(u.skeleton){var t=u.skeleton.getBoneByName(z);if(void 0!==t)return t}return u.children&&(u=function G(C){for(var L=
0;L<C.length;L++){var S=C[L];if(S.name===z||S.uuid===z||(S=G(S.children)))return S}return null}(u.children))?u:null}});Object.assign(jp.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(u,z){u[z]=(this||p).node[(this||p).propertyName]},function(u,z){for(var t=(this||p).resolvedProperty,x=0,C=t.length;x!==C;++x)u[z++]=
t[x]},function(u,z){u[z]=(this||p).resolvedProperty[(this||p).propertyIndex]},function(u,z){(this||p).resolvedProperty.toArray(u,z)}],SetterByBindingTypeAndVersioning:[[function(u,z){(this||p).targetObject[(this||p).propertyName]=u[z]},function(u,z){(this||p).targetObject[(this||p).propertyName]=u[z];(this||p).targetObject.needsUpdate=!0},function(u,z){(this||p).targetObject[(this||p).propertyName]=u[z];(this||p).targetObject.matrixWorldNeedsUpdate=!0}],[function(u,z){for(var t=(this||p).resolvedProperty,
x=0,C=t.length;x!==C;++x)t[x]=u[z++]},function(u,z){for(var t=(this||p).resolvedProperty,x=0,C=t.length;x!==C;++x)t[x]=u[z++];(this||p).targetObject.needsUpdate=!0},function(u,z){for(var t=(this||p).resolvedProperty,x=0,C=t.length;x!==C;++x)t[x]=u[z++];(this||p).targetObject.matrixWorldNeedsUpdate=!0}],[function(u,z){(this||p).resolvedProperty[(this||p).propertyIndex]=u[z]},function(u,z){(this||p).resolvedProperty[(this||p).propertyIndex]=u[z];(this||p).targetObject.needsUpdate=!0},function(u,z){(this||
p).resolvedProperty[(this||p).propertyIndex]=u[z];(this||p).targetObject.matrixWorldNeedsUpdate=!0}],[function(u,z){(this||p).resolvedProperty.fromArray(u,z)},function(u,z){(this||p).resolvedProperty.fromArray(u,z);(this||p).targetObject.needsUpdate=!0},function(u,z){(this||p).resolvedProperty.fromArray(u,z);(this||p).targetObject.matrixWorldNeedsUpdate=!0}]],getValue:function(u,z){this.bind();this.getValue(u,z)},setValue:function(u,z){this.bind();this.setValue(u,z)},bind:function(){var u=(this||
p).node,z=(this||p).parsedPath,t=z.objectName,x=z.propertyName,C=z.propertyIndex;u||(u=jp.findNode((this||p).rootNode,z.nodeName)||(this||p).rootNode,(this||p).node=u);(this||p).getValue=(this||p)._getValue_unavailable;(this||p).setValue=(this||p)._setValue_unavailable;if(u){if(t){var G=z.objectIndex;switch(t){case "materials":if(!u.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this||p);return}if(!u.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",
this||p);return}u=u.material.materials;break;case "bones":if(!u.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this||p);return}u=u.skeleton.bones;for(t=0;t<u.length;t++)if(u[t].name===G){G=t;break}break;default:if(void 0===u[t]){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this||p);return}u=u[t]}if(void 0!==G){if(void 0===u[G]){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",
this||p,u);return}u=u[G]}}G=u[x];if(void 0===G)console.error("THREE.PropertyBinding: Trying to update property for track: "+z.nodeName+"."+x+" but it wasn't found.",u);else{z=(this||p).Versioning.None;(this||p).targetObject=u;void 0!==u.needsUpdate?z=(this||p).Versioning.NeedsUpdate:void 0!==u.matrixWorldNeedsUpdate&&(z=(this||p).Versioning.MatrixWorldNeedsUpdate);t=(this||p).BindingType.Direct;if(void 0!==C){if("morphTargetInfluences"===x){if(!u.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",
this||p);return}if(u.geometry.isBufferGeometry){if(!u.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this||p);return}void 0!==u.morphTargetDictionary[C]&&(C=u.morphTargetDictionary[C])}else{console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences on THREE.Geometry. Use THREE.BufferGeometry instead.",this||p);return}}t=(this||p).BindingType.ArrayElement;(this||p).resolvedProperty=
G;(this||p).propertyIndex=C}else void 0!==G.fromArray&&void 0!==G.toArray?(t=(this||p).BindingType.HasFromToArray,(this||p).resolvedProperty=G):Array.isArray(G)?(t=(this||p).BindingType.EntireArray,(this||p).resolvedProperty=G):(this||p).propertyName=x;(this||p).getValue=(this||p).GetterByBindingType[t];(this||p).setValue=(this||p).SetterByBindingTypeAndVersioning[t][z]}}else console.error("THREE.PropertyBinding: Trying to update node for track: "+(this||p).path+" but it wasn't found.")},unbind:function(){(this||
p).node=null;(this||p).getValue=(this||p)._getValue_unbound;(this||p).setValue=(this||p)._setValue_unbound}});Object.assign(jp.prototype,{_getValue_unbound:jp.prototype.getValue,_setValue_unbound:jp.prototype.setValue});Object.assign(q$.prototype,{isAnimationObjectGroup:!0,add:function(){for(var u=(this||p)._objects,z=(this||p)._indicesByUUID,t=(this||p)._paths,x=(this||p)._parsedPaths,C=(this||p)._bindings,G=C.length,L=void 0,S=u.length,V=(this||p).nCachedObjects_,Z=0,ja=arguments.length;Z!==ja;++Z){var ua=
arguments[Z],Ca=ua.uuid,bb=z[Ca];if(void 0===bb){bb=S++;z[Ca]=bb;u.push(ua);bb=0;for(var $a=G;bb!==$a;++bb)C[bb].push(new jp(ua,t[bb],x[bb]))}else if(bb<V){L=u[bb];$a=--V;var ub=u[$a];z[ub.uuid]=bb;u[bb]=ub;z[Ca]=$a;u[$a]=ua;Ca=0;for(ub=G;Ca!==ub;++Ca){var pb=C[Ca],Rc=pb[bb];pb[bb]=pb[$a];void 0===Rc&&(Rc=new jp(ua,t[Ca],x[Ca]));pb[$a]=Rc}}else u[bb]!==L&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}(this||
p).nCachedObjects_=V},remove:function(){for(var u=(this||p)._objects,z=(this||p)._indicesByUUID,t=(this||p)._bindings,x=t.length,C=(this||p).nCachedObjects_,G=0,L=arguments.length;G!==L;++G){var S=arguments[G],V=S.uuid,Z=z[V];if(void 0!==Z&&Z>=C){var ja=C++,ua=u[ja];z[ua.uuid]=Z;u[Z]=ua;z[V]=ja;u[ja]=S;S=0;for(V=x;S!==V;++S){ua=t[S];var Ca=ua[Z];ua[Z]=ua[ja];ua[ja]=Ca}}}(this||p).nCachedObjects_=C},uncache:function(){for(var u=(this||p)._objects,z=(this||p)._indicesByUUID,t=(this||p)._bindings,x=
t.length,C=(this||p).nCachedObjects_,G=u.length,L=0,S=arguments.length;L!==S;++L){var V=arguments[L].uuid,Z=z[V];if(void 0!==Z)if(delete z[V],Z<C){V=--C;var ja=u[V],ua=--G,Ca=u[ua];z[ja.uuid]=Z;u[Z]=ja;z[Ca.uuid]=V;u[V]=Ca;u.pop();ja=0;for(Ca=x;ja!==Ca;++ja){var bb=t[ja],$a=bb[ua];bb[Z]=bb[V];bb[V]=$a;bb.pop()}}else for(V=--G,ua=u[V],z[ua.uuid]=Z,u[Z]=ua,u.pop(),ua=0,ja=x;ua!==ja;++ua)Ca=t[ua],Ca[Z]=Ca[V],Ca.pop()}(this||p).nCachedObjects_=C},subscribe_:function(u,z){var t=(this||p)._bindingsIndicesByPath,
x=t[u],C=(this||p)._bindings;if(void 0!==x)return C[x];var G=(this||p)._paths,L=(this||p)._parsedPaths,S=(this||p)._objects,V=(this||p).nCachedObjects_,Z=Array(S.length);x=C.length;t[u]=x;G.push(u);L.push(z);C.push(Z);t=V;for(x=S.length;t!==x;++t)Z[t]=new jp(S[t],u,z);return Z},unsubscribe_:function(u){var z=(this||p)._bindingsIndicesByPath,t=z[u];if(void 0!==t){var x=(this||p)._paths,C=(this||p)._parsedPaths,G=(this||p)._bindings,L=G.length-1,S=G[L];z[u[L]]=t;G[t]=S;G.pop();C[t]=C[L];C.pop();x[t]=
x[L];x.pop()}}});var Vra=function(){function u(t,x,C,G){(this||p)._mixer=t;(this||p)._clip=x;(this||p)._localRoot=C||null;(this||p).blendMode=G||x.blendMode;t=x.tracks;x=t.length;C=Array(x);G={endingStart:2400,endingEnd:2400};for(var L=0;L!==x;++L){var S=t[L].createInterpolant(null);C[L]=S;S.settings=G}(this||p)._interpolantSettings=G;(this||p)._interpolants=C;(this||p)._propertyBindings=Array(x);(this||p)._cacheIndex=null;(this||p)._byClipCacheIndex=null;(this||p)._timeScaleInterpolant=null;(this||
p)._weightInterpolant=null;(this||p).loop=2201;(this||p)._loopCount=-1;(this||p)._startTime=null;(this||p).time=0;(this||p).timeScale=1;(this||p)._effectiveTimeScale=1;(this||p).weight=1;(this||p)._effectiveWeight=1;(this||p).repetitions=Infinity;(this||p).paused=!1;(this||p).enabled=!0;(this||p).clampWhenFinished=!1;(this||p).zeroSlopeAtStart=!0;(this||p).zeroSlopeAtEnd=!0}var z=u.prototype;z.play=function(){(this||p)._mixer._activateAction(this||p);return this||p};z.stop=function(){(this||p)._mixer._deactivateAction(this||
p);return this.reset()};z.reset=function(){(this||p).paused=!1;(this||p).enabled=!0;(this||p).time=0;(this||p)._loopCount=-1;(this||p)._startTime=null;return this.stopFading().stopWarping()};z.isRunning=function(){return(this||p).enabled&&!(this||p).paused&&0!==(this||p).timeScale&&null===(this||p)._startTime&&(this||p)._mixer._isActiveAction(this||p)};z.isScheduled=function(){return(this||p)._mixer._isActiveAction(this||p)};z.startAt=function(t){(this||p)._startTime=t;return this||p};z.setLoop=function(t,
x){(this||p).loop=t;(this||p).repetitions=x;return this||p};z.setEffectiveWeight=function(t){(this||p).weight=t;(this||p)._effectiveWeight=(this||p).enabled?t:0;return this.stopFading()};z.getEffectiveWeight=function(){return(this||p)._effectiveWeight};z.fadeIn=function(t){return this._scheduleFading(t,0,1)};z.fadeOut=function(t){return this._scheduleFading(t,1,0)};z.crossFadeFrom=function(t,x,C){t.fadeOut(x);this.fadeIn(x);if(C){C=(this||p)._clip.duration;var G=t._clip.duration,L=C/G;t.warp(1,G/
C,x);this.warp(L,1,x)}return this||p};z.crossFadeTo=function(t,x,C){return t.crossFadeFrom(this||p,x,C)};z.stopFading=function(){var t=(this||p)._weightInterpolant;null!==t&&((this||p)._weightInterpolant=null,(this||p)._mixer._takeBackControlInterpolant(t));return this||p};z.setEffectiveTimeScale=function(t){(this||p).timeScale=t;(this||p)._effectiveTimeScale=(this||p).paused?0:t;return this.stopWarping()};z.getEffectiveTimeScale=function(){return(this||p)._effectiveTimeScale};z.setDuration=function(t){(this||
p).timeScale=(this||p)._clip.duration/t;return this.stopWarping()};z.syncWith=function(t){(this||p).time=t.time;(this||p).timeScale=t.timeScale;return this.stopWarping()};z.halt=function(t){return this.warp((this||p)._effectiveTimeScale,0,t)};z.warp=function(t,x,C){var G=(this||p)._mixer,L=G.time,S=(this||p).timeScale,V=(this||p)._timeScaleInterpolant;null===V&&(V=G._lendControlInterpolant(),(this||p)._timeScaleInterpolant=V);G=V.parameterPositions;V=V.sampleValues;G[0]=L;G[1]=L+C;V[0]=t/S;V[1]=x/
S;return this||p};z.stopWarping=function(){var t=(this||p)._timeScaleInterpolant;null!==t&&((this||p)._timeScaleInterpolant=null,(this||p)._mixer._takeBackControlInterpolant(t));return this||p};z.getMixer=function(){return(this||p)._mixer};z.getClip=function(){return(this||p)._clip};z.getRoot=function(){return(this||p)._localRoot||(this||p)._mixer._root};z._update=function(t,x,C,G){if((this||p).enabled){var L=(this||p)._startTime;if(null!==L){x=(t-L)*C;if(0>x||0===C)return;(this||p)._startTime=null;
x*=C}x*=this._updateTimeScale(t);C=this._updateTime(x);t=this._updateWeight(t);if(0<t)switch(x=(this||p)._interpolants,L=(this||p)._propertyBindings,(this||p).blendMode){case 2501:G=0;for(var S=x.length;G!==S;++G)x[G].evaluate(C),L[G].accumulateAdditive(t);break;default:S=0;for(var V=x.length;S!==V;++S)x[S].evaluate(C),L[S].accumulate(G,t)}}else this._updateWeight(t)};z._updateWeight=function(t){var x=0;if((this||p).enabled){x=(this||p).weight;var C=(this||p)._weightInterpolant;if(null!==C){var G=
C.evaluate(t)[0];x*=G;t>C.parameterPositions[1]&&(this.stopFading(),0===G&&((this||p).enabled=!1))}}return(this||p)._effectiveWeight=x};z._updateTimeScale=function(t){var x=0;if(!(this||p).paused){x=(this||p).timeScale;var C=(this||p)._timeScaleInterpolant;if(null!==C){var G=C.evaluate(t)[0];x*=G;t>C.parameterPositions[1]&&(this.stopWarping(),0===x?(this||p).paused=!0:(this||p).timeScale=x)}}return(this||p)._effectiveTimeScale=x};z._updateTime=function(t){var x=(this||p)._clip.duration,C=(this||p).loop,
G=(this||p).time+t,L=(this||p)._loopCount,S=2202===C;if(0===t)return-1===L?G:S&&1===(L&1)?x-G:G;if(2200===C)a:{if(-1===L&&((this||p)._loopCount=0,this._setEndings(!0,!0,!1)),G>=x)G=x;else if(0>G)G=0;else{(this||p).time=G;break a}(this||p).clampWhenFinished?(this||p).paused=!0:(this||p).enabled=!1;(this||p).time=G;(this||p)._mixer.dispatchEvent({type:"finished",action:this||p,direction:0>t?-1:1})}else{-1===L&&(0<=t?(L=0,this._setEndings(!0,0===(this||p).repetitions,S)):this._setEndings(0===(this||
p).repetitions,!0,S));if(G>=x||0>G){C=Math.floor(G/x);G-=x*C;L+=Math.abs(C);var V=(this||p).repetitions-L;0>=V?((this||p).clampWhenFinished?(this||p).paused=!0:(this||p).enabled=!1,G=0<t?x:0,(this||p).time=G,(this||p)._mixer.dispatchEvent({type:"finished",action:this||p,direction:0<t?1:-1})):(1===V?(t=0>t,this._setEndings(t,!t,S)):this._setEndings(!1,!1,S),(this||p)._loopCount=L,(this||p).time=G,(this||p)._mixer.dispatchEvent({type:"loop",action:this||p,loopDelta:C}))}else(this||p).time=G;if(S&&1===
(L&1))return x-G}return G};z._setEndings=function(t,x,C){var G=(this||p)._interpolantSettings;C?(G.endingStart=2401,G.endingEnd=2401):(G.endingStart=t?(this||p).zeroSlopeAtStart?2401:2400:2402,G.endingEnd=x?(this||p).zeroSlopeAtEnd?2401:2400:2402)};z._scheduleFading=function(t,x,C){var G=(this||p)._mixer,L=G.time,S=(this||p)._weightInterpolant;null===S&&(S=G._lendControlInterpolant(),(this||p)._weightInterpolant=S);G=S.parameterPositions;S=S.sampleValues;G[0]=L;S[0]=x;G[1]=L+t;S[1]=C;return this||
p};return u}();xW.prototype=Object.assign(Object.create(e.prototype),{constructor:xW,_bindAction:function(u,z){var t=u._localRoot||(this||p)._root,x=u._clip.tracks,C=x.length,G=u._propertyBindings;u=u._interpolants;var L=t.uuid,S=(this||p)._bindingsByRootAndName,V=S[L];void 0===V&&(V={},S[L]=V);for(S=0;S!==C;++S){var Z=x[S],ja=Z.name,ua=V[ja];if(void 0===ua){ua=G[S];if(void 0!==ua){null===ua._cacheIndex&&(++ua.referenceCount,this._addInactiveBinding(ua,L,ja));continue}ua=new wW(jp.create(t,ja,z&&
z._propertyBindings[S].binding.parsedPath),Z.ValueTypeName,Z.getValueSize());++ua.referenceCount;this._addInactiveBinding(ua,L,ja)}G[S]=ua;u[S].resultBuffer=ua.buffer}},_activateAction:function(u){if(!this._isActiveAction(u)){if(null===u._cacheIndex){var z=(u._localRoot||(this||p)._root).uuid,t=u._clip.uuid,x=(this||p)._actionsByClip[t];this._bindAction(u,x&&x.knownActions[0]);this._addInactiveAction(u,t,z)}z=u._propertyBindings;t=0;for(x=z.length;t!==x;++t){var C=z[t];0===C.useCount++&&(this._lendBinding(C),
C.saveOriginalState())}this._lendAction(u)}},_deactivateAction:function(u){if(this._isActiveAction(u)){for(var z=u._propertyBindings,t=0,x=z.length;t!==x;++t){var C=z[t];0===--C.useCount&&(C.restoreOriginalState(),this._takeBackBinding(C))}this._takeBackAction(u)}},_initMemoryManager:function(){(this||p)._actions=[];(this||p)._nActiveActions=0;(this||p)._actionsByClip={};(this||p)._bindings=[];(this||p)._nActiveBindings=0;(this||p)._bindingsByRootAndName={};(this||p)._controlInterpolants=[];(this||
p)._nActiveControlInterpolants=0;var u=this||p;(this||p).stats={actions:{get total(){return u._actions.length},get inUse(){return u._nActiveActions}},bindings:{get total(){return u._bindings.length},get inUse(){return u._nActiveBindings}},controlInterpolants:{get total(){return u._controlInterpolants.length},get inUse(){return u._nActiveControlInterpolants}}}},_isActiveAction:function(u){u=u._cacheIndex;return null!==u&&u<(this||p)._nActiveActions},_addInactiveAction:function(u,z,t){var x=(this||
p)._actions,C=(this||p)._actionsByClip,G=C[z];void 0===G?(G={knownActions:[u],actionByRoot:{}},u._byClipCacheIndex=0,C[z]=G):(z=G.knownActions,u._byClipCacheIndex=z.length,z.push(u));u._cacheIndex=x.length;x.push(u);G.actionByRoot[t]=u},_removeInactiveAction:function(u){var z=(this||p)._actions,t=z[z.length-1],x=u._cacheIndex;t._cacheIndex=x;z[x]=t;z.pop();u._cacheIndex=null;z=u._clip.uuid;t=(this||p)._actionsByClip;x=t[z];var C=x.knownActions,G=C[C.length-1],L=u._byClipCacheIndex;G._byClipCacheIndex=
L;C[L]=G;C.pop();u._byClipCacheIndex=null;delete x.actionByRoot[(u._localRoot||(this||p)._root).uuid];0===C.length&&delete t[z];this._removeInactiveBindingsForAction(u)},_removeInactiveBindingsForAction:function(u){u=u._propertyBindings;for(var z=0,t=u.length;z!==t;++z){var x=u[z];0===--x.referenceCount&&this._removeInactiveBinding(x)}},_lendAction:function(u){var z=(this||p)._actions,t=u._cacheIndex,x=(this||p)._nActiveActions++,C=z[x];u._cacheIndex=x;z[x]=u;C._cacheIndex=t;z[t]=C},_takeBackAction:function(u){var z=
(this||p)._actions,t=u._cacheIndex,x=--(this||p)._nActiveActions,C=z[x];u._cacheIndex=x;z[x]=u;C._cacheIndex=t;z[t]=C},_addInactiveBinding:function(u,z,t){var x=(this||p)._bindingsByRootAndName,C=(this||p)._bindings,G=x[z];void 0===G&&(G={},x[z]=G);G[t]=u;u._cacheIndex=C.length;C.push(u)},_removeInactiveBinding:function(u){var z=(this||p)._bindings,t=u.binding,x=t.rootNode.uuid;t=t.path;var C=(this||p)._bindingsByRootAndName,G=C[x],L=z[z.length-1];u=u._cacheIndex;L._cacheIndex=u;z[u]=L;z.pop();delete G[t];
0===Object.keys(G).length&&delete C[x]},_lendBinding:function(u){var z=(this||p)._bindings,t=u._cacheIndex,x=(this||p)._nActiveBindings++,C=z[x];u._cacheIndex=x;z[x]=u;C._cacheIndex=t;z[t]=C},_takeBackBinding:function(u){var z=(this||p)._bindings,t=u._cacheIndex,x=--(this||p)._nActiveBindings,C=z[x];u._cacheIndex=x;z[x]=u;C._cacheIndex=t;z[t]=C},_lendControlInterpolant:function(){var u=(this||p)._controlInterpolants,z=(this||p)._nActiveControlInterpolants++,t=u[z];void 0===t&&(t=new jI(new Float32Array(2),
new Float32Array(2),1,(this||p)._controlInterpolantsResultBuffer),t.__cacheIndex=z,u[z]=t);return t},_takeBackControlInterpolant:function(u){var z=(this||p)._controlInterpolants,t=u.__cacheIndex,x=--(this||p)._nActiveControlInterpolants,C=z[x];u.__cacheIndex=x;z[x]=u;C.__cacheIndex=t;z[t]=C},_controlInterpolantsResultBuffer:new Float32Array(1),clipAction:function(u,z,t){var x=z||(this||p)._root,C=x.uuid;x="string"===typeof u?Js.findByName(x,u):u;u=null!==x?x.uuid:u;var G=(this||p)._actionsByClip[u],
L=null;void 0===t&&(t=null!==x?x.blendMode:2500);if(void 0!==G){L=G.actionByRoot[C];if(void 0!==L&&L.blendMode===t)return L;L=G.knownActions[0];null===x&&(x=L._clip)}if(null===x)return null;z=new Vra(this||p,x,z,t);this._bindAction(z,L);this._addInactiveAction(z,u,C);return z},existingAction:function(u,z){var t=z||(this||p)._root;z=t.uuid;t="string"===typeof u?Js.findByName(t,u):u;u=(this||p)._actionsByClip[t?t.uuid:u];return void 0!==u?u.actionByRoot[z]||null:null},stopAllAction:function(){for(var u=
(this||p)._actions,z=(this||p)._nActiveActions-1;0<=z;--z)u[z].stop();return this||p},update:function(u){u*=(this||p).timeScale;for(var z=(this||p)._actions,t=(this||p)._nActiveActions,x=(this||p).time+=u,C=Math.sign(u),G=(this||p)._accuIndex^=1,L=0;L!==t;++L)z[L]._update(x,u,C,G);u=(this||p)._bindings;z=(this||p)._nActiveBindings;for(t=0;t!==z;++t)u[t].apply(G);return this||p},setTime:function(u){for(var z=(this||p).time=0;z<(this||p)._actions.length;z++)(this||p)._actions[z].time=0;return this.update(u)},
getRoot:function(){return(this||p)._root},uncacheClip:function(u){var z=(this||p)._actions;u=u.uuid;var t=(this||p)._actionsByClip,x=t[u];if(void 0!==x){x=x.knownActions;for(var C=0,G=x.length;C!==G;++C){var L=x[C];this._deactivateAction(L);var S=L._cacheIndex,V=z[z.length-1];L._cacheIndex=null;L._byClipCacheIndex=null;V._cacheIndex=S;z[S]=V;z.pop();this._removeInactiveBindingsForAction(L)}delete t[u]}},uncacheRoot:function(u){u=u.uuid;var z=(this||p)._actionsByClip;for(x in z){var t=z[x].actionByRoot[u];
void 0!==t&&(this._deactivateAction(t),this._removeInactiveAction(t))}var x=(this||p)._bindingsByRootAndName[u];if(void 0!==x)for(var C in x)u=x[C],u.restoreOriginalState(),this._removeInactiveBinding(u)},uncacheAction:function(u,z){u=this.existingAction(u,z);null!==u&&(this._deactivateAction(u),this._removeInactiveAction(u))}});var raa=function(){function u(z,t){"string"===typeof z&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),z=t);(this||p).value=z}u.prototype.clone=function(){return new u(void 0===
(this||p).value.clone?(this||p).value:(this||p).value.clone())};return u}();yW.prototype=Object.assign(Object.create(zr.prototype),{constructor:yW,isInstancedInterleavedBuffer:!0,copy:function(u){zr.prototype.copy.call(this||p,u);(this||p).meshPerAttribute=u.meshPerAttribute;return this||p},clone:function(u){u=zr.prototype.clone.call(this||p,u);u.meshPerAttribute=(this||p).meshPerAttribute;return u},toJSON:function(u){u=zr.prototype.toJSON.call(this||p,u);u.isInstancedInterleavedBuffer=!0;u.meshPerAttribute=
(this||p).meshPerAttribute;return u}});Object.defineProperty(zW.prototype,"needsUpdate",{set:function(u){!0===u&&(this||p).version++}});Object.assign(zW.prototype,{isGLBufferAttribute:!0,setBuffer:function(u){(this||p).buffer=u;return this||p},setType:function(u,z){(this||p).type=u;(this||p).elementSize=z;return this||p},setItemSize:function(u){(this||p).itemSize=u;return this||p},setCount:function(u){(this||p).count=u;return this||p}});Object.assign(AW.prototype,{set:function(u,z){(this||p).ray.set(u,
z)},setFromCamera:function(u,z){z&&z.isPerspectiveCamera?((this||p).ray.origin.setFromMatrixPosition(z.matrixWorld),(this||p).ray.direction.set(u.x,u.y,.5).unproject(z).sub((this||p).ray.origin).normalize(),(this||p).camera=z):z&&z.isOrthographicCamera?((this||p).ray.origin.set(u.x,u.y,(z.near+z.far)/(z.near-z.far)).unproject(z),(this||p).ray.direction.set(0,0,-1).transformDirection(z.matrixWorld),(this||p).camera=z):console.error("THREE.Raycaster: Unsupported camera type.")},intersectObject:function(u,
z,t){t=t||[];BW(u,this||p,t,z);t.sort(r$);return t},intersectObjects:function(u,z,t){t=t||[];if(!1===Array.isArray(u))return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),t;for(var x=0,C=u.length;x<C;x++)BW(u[x],this||p,t,z);t.sort(r$);return t}});var Wra=function(){function u(t,x,C){void 0===t&&(t=1);void 0===x&&(x=0);void 0===C&&(C=0);(this||p).radius=t;(this||p).phi=x;(this||p).theta=C;return this||p}var z=u.prototype;z.set=function(t,x,C){(this||p).radius=t;(this||
p).phi=x;(this||p).theta=C;return this||p};z.clone=function(){return(new (this||p).constructor).copy(this||p)};z.copy=function(t){(this||p).radius=t.radius;(this||p).phi=t.phi;(this||p).theta=t.theta;return this||p};z.makeSafe=function(){(this||p).phi=Math.max(1E-6,Math.min(Math.PI-1E-6,(this||p).phi));return this||p};z.setFromVector3=function(t){return this.setFromCartesianCoords(t.x,t.y,t.z)};z.setFromCartesianCoords=function(t,x,C){(this||p).radius=Math.sqrt(t*t+x*x+C*C);0===(this||p).radius?((this||
p).theta=0,(this||p).phi=0):((this||p).theta=Math.atan2(t,C),(this||p).phi=Math.acos(ai.clamp(x/(this||p).radius,-1,1)));return this||p};return u}(),Xra=function(){function u(t,x,C){(this||p).radius=void 0!==t?t:1;(this||p).theta=void 0!==x?x:0;(this||p).y=void 0!==C?C:0;return this||p}var z=u.prototype;z.set=function(t,x,C){(this||p).radius=t;(this||p).theta=x;(this||p).y=C;return this||p};z.clone=function(){return(new (this||p).constructor).copy(this||p)};z.copy=function(t){(this||p).radius=t.radius;
(this||p).theta=t.theta;(this||p).y=t.y;return this||p};z.setFromVector3=function(t){return this.setFromCartesianCoords(t.x,t.y,t.z)};z.setFromCartesianCoords=function(t,x,C){(this||p).radius=Math.sqrt(t*t+C*C);(this||p).theta=Math.atan2(t,C);(this||p).y=x;return this||p};return u}(),saa=new Ve,taa=function(){function u(t,x){Object.defineProperty(this||p,"isBox2",{value:!0});(this||p).min=void 0!==t?t:new Ve(Infinity,Infinity);(this||p).max=void 0!==x?x:new Ve(-Infinity,-Infinity)}var z=u.prototype;
z.set=function(t,x){(this||p).min.copy(t);(this||p).max.copy(x);return this||p};z.setFromPoints=function(t){this.makeEmpty();for(var x=0,C=t.length;x<C;x++)this.expandByPoint(t[x]);return this||p};z.setFromCenterAndSize=function(t,x){x=saa.copy(x).multiplyScalar(.5);(this||p).min.copy(t).sub(x);(this||p).max.copy(t).add(x);return this||p};z.clone=function(){return(new (this||p).constructor).copy(this||p)};z.copy=function(t){(this||p).min.copy(t.min);(this||p).max.copy(t.max);return this||p};z.makeEmpty=
function(){(this||p).min.x=(this||p).min.y=Infinity;(this||p).max.x=(this||p).max.y=-Infinity;return this||p};z.isEmpty=function(){return(this||p).max.x<(this||p).min.x||(this||p).max.y<(this||p).min.y};z.getCenter=function(t){void 0===t&&(console.warn("THREE.Box2: .getCenter() target is now required"),t=new Ve);return this.isEmpty()?t.set(0,0):t.addVectors((this||p).min,(this||p).max).multiplyScalar(.5)};z.getSize=function(t){void 0===t&&(console.warn("THREE.Box2: .getSize() target is now required"),
t=new Ve);return this.isEmpty()?t.set(0,0):t.subVectors((this||p).max,(this||p).min)};z.expandByPoint=function(t){(this||p).min.min(t);(this||p).max.max(t);return this||p};z.expandByVector=function(t){(this||p).min.sub(t);(this||p).max.add(t);return this||p};z.expandByScalar=function(t){(this||p).min.addScalar(-t);(this||p).max.addScalar(t);return this||p};z.containsPoint=function(t){return t.x<(this||p).min.x||t.x>(this||p).max.x||t.y<(this||p).min.y||t.y>(this||p).max.y?!1:!0};z.containsBox=function(t){return(this||
p).min.x<=t.min.x&&t.max.x<=(this||p).max.x&&(this||p).min.y<=t.min.y&&t.max.y<=(this||p).max.y};z.getParameter=function(t,x){void 0===x&&(console.warn("THREE.Box2: .getParameter() target is now required"),x=new Ve);return x.set((t.x-(this||p).min.x)/((this||p).max.x-(this||p).min.x),(t.y-(this||p).min.y)/((this||p).max.y-(this||p).min.y))};z.intersectsBox=function(t){return t.max.x<(this||p).min.x||t.min.x>(this||p).max.x||t.max.y<(this||p).min.y||t.min.y>(this||p).max.y?!1:!0};z.clampPoint=function(t,
x){void 0===x&&(console.warn("THREE.Box2: .clampPoint() target is now required"),x=new Ve);return x.copy(t).clamp((this||p).min,(this||p).max)};z.distanceToPoint=function(t){return saa.copy(t).clamp((this||p).min,(this||p).max).sub(t).length()};z.intersect=function(t){(this||p).min.max(t.min);(this||p).max.min(t.max);return this||p};z.union=function(t){(this||p).min.min(t.min);(this||p).max.max(t.max);return this||p};z.translate=function(t){(this||p).min.add(t);(this||p).max.add(t);return this||p};
z.equals=function(t){return t.min.equals((this||p).min)&&t.max.equals((this||p).max)};return u}(),uaa=new qc,ZO=new qc,vaa=function(){function u(t,x){(this||p).start=void 0!==t?t:new qc;(this||p).end=void 0!==x?x:new qc}var z=u.prototype;z.set=function(t,x){(this||p).start.copy(t);(this||p).end.copy(x);return this||p};z.clone=function(){return(new (this||p).constructor).copy(this||p)};z.copy=function(t){(this||p).start.copy(t.start);(this||p).end.copy(t.end);return this||p};z.getCenter=function(t){void 0===
t&&(console.warn("THREE.Line3: .getCenter() target is now required"),t=new qc);return t.addVectors((this||p).start,(this||p).end).multiplyScalar(.5)};z.delta=function(t){void 0===t&&(console.warn("THREE.Line3: .delta() target is now required"),t=new qc);return t.subVectors((this||p).end,(this||p).start)};z.distanceSq=function(){return(this||p).start.distanceToSquared((this||p).end)};z.distance=function(){return(this||p).start.distanceTo((this||p).end)};z.at=function(t,x){void 0===x&&(console.warn("THREE.Line3: .at() target is now required"),
x=new qc);return this.delta(x).multiplyScalar(t).add((this||p).start)};z.closestPointToPointParameter=function(t,x){uaa.subVectors(t,(this||p).start);ZO.subVectors((this||p).end,(this||p).start);t=ZO.dot(ZO);t=ZO.dot(uaa)/t;x&&(t=ai.clamp(t,0,1));return t};z.closestPointToPoint=function(t,x,C){t=this.closestPointToPointParameter(t,x);void 0===C&&(console.warn("THREE.Line3: .closestPointToPoint() target is now required"),C=new qc);return this.delta(C).multiplyScalar(t).add((this||p).start)};z.applyMatrix4=
function(t){(this||p).start.applyMatrix4(t);(this||p).end.applyMatrix4(t);return this||p};z.equals=function(t){return t.start.equals((this||p).start)&&t.end.equals((this||p).end)};return u}();oI.prototype=Object.create(E.prototype);oI.prototype.constructor=oI;oI.prototype.isImmediateRenderObject=!0;var waa=new qc,Yra=function(u){function z(x,C){var G=u.call(this||p)||this||p;G.light=x;G.light.updateMatrixWorld();G.matrix=x.matrixWorld;G.matrixAutoUpdate=!1;G.color=C;x=new oa;C=[0,0,0,0,0,1,0,0,0,
1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(var L=0,S=1;32>L;L++,S++){var V=L/32*Math.PI*2,Z=S/32*Math.PI*2;C.push(Math.cos(V),Math.sin(V),1,Math.cos(Z),Math.sin(Z),1)}x.setAttribute("position",new U(C,3));C=new Pl({fog:!1,toneMapped:!1});G.cone=new Up(x,C);G.add(G.cone);G.update();return G}g(z,u);var t=z.prototype;t.dispose=function(){(this||p).cone.geometry.dispose();(this||p).cone.material.dispose()};t.update=function(){(this||p).light.updateMatrixWorld();var x=(this||p).light.distance?(this||
p).light.distance:1E3,C=x*Math.tan((this||p).light.angle);(this||p).cone.scale.set(C,C,x);waa.setFromMatrixPosition((this||p).light.target.matrixWorld);(this||p).cone.lookAt(waa);void 0!==(this||p).color?(this||p).cone.material.color.set((this||p).color):(this||p).cone.material.color.copy((this||p).light.color)};return z}(E),tz=new qc,$O=new fj,sX=new fj,xaa=function(u){function z(t){var x=s$(t);var C=new oa;for(var G=[],L=[],S=new tg(0,0,1),V=new tg(0,1,0),Z=0;Z<x.length;Z++){var ja=x[Z];ja.parent&&
ja.parent.isBone&&(G.push(0,0,0),G.push(0,0,0),L.push(S.r,S.g,S.b),L.push(V.r,V.g,V.b))}C.setAttribute("position",new U(G,3));C.setAttribute("color",new U(L,3));G=new Pl({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});C=u.call(this||p,C,G)||this||p;C.type="SkeletonHelper";C.isSkeletonHelper=!0;C.root=t;C.bones=x;C.matrix=t.matrixWorld;C.matrixAutoUpdate=!1;return C}g(z,u);z.prototype.updateMatrixWorld=function(t){var x=(this||p).bones,C=(this||p).geometry,G=C.getAttribute("position");
sX.getInverse((this||p).root.matrixWorld);for(var L=0,S=0;L<x.length;L++){var V=x[L];V.parent&&V.parent.isBone&&($O.multiplyMatrices(sX,V.matrixWorld),tz.setFromMatrixPosition($O),G.setXYZ(S,tz.x,tz.y,tz.z),$O.multiplyMatrices(sX,V.parent.matrixWorld),tz.setFromMatrixPosition($O),G.setXYZ(S+1,tz.x,tz.y,tz.z),S+=2)}C.getAttribute("position").needsUpdate=!0;u.prototype.updateMatrixWorld.call(this||p,t)};return z}(Up),Zra=function(u){function z(x,C,G){C=new VO(C,4,2);var L=new N({wireframe:!0,fog:!1,
toneMapped:!1});C=u.call(this||p,C,L)||this||p;C.light=x;C.light.updateMatrixWorld();C.color=G;C.type="PointLightHelper";C.matrix=C.light.matrixWorld;C.matrixAutoUpdate=!1;C.update();return C}g(z,u);var t=z.prototype;t.dispose=function(){(this||p).geometry.dispose();(this||p).material.dispose()};t.update=function(){void 0!==(this||p).color?(this||p).material.color.set((this||p).color):(this||p).material.color.copy((this||p).light.color)};return z}(gb),$ra=new qc,yaa=new tg,zaa=new tg,asa=function(u){function z(x,
C,G){var L=u.call(this||p)||this||p;L.light=x;L.light.updateMatrixWorld();L.matrix=x.matrixWorld;L.matrixAutoUpdate=!1;L.color=G;x=new UO(C);x.rotateY(.5*Math.PI);L.material=new N({wireframe:!0,fog:!1,toneMapped:!1});void 0===L.color&&(L.material.vertexColors=!0);C=x.getAttribute("position");C=new Float32Array(3*C.count);x.setAttribute("color",new W(C,3));L.add(new gb(x,L.material));L.update();return L}g(z,u);var t=z.prototype;t.dispose=function(){(this||p).children[0].geometry.dispose();(this||p).children[0].material.dispose()};
t.update=function(){var x=(this||p).children[0];if(void 0!==(this||p).color)(this||p).material.color.set((this||p).color);else{var C=x.geometry.getAttribute("color");yaa.copy((this||p).light.color);zaa.copy((this||p).light.groundColor);for(var G=0,L=C.count;G<L;G++){var S=G<L/2?yaa:zaa;C.setXYZ(G,S.r,S.g,S.b)}C.needsUpdate=!0}x.lookAt($ra.setFromMatrixPosition((this||p).light.matrixWorld).negate())};return z}(E),Aaa=function(u){function z(t,x,C,G){t=t||10;x=x||10;C=new tg(void 0!==C?C:4473924);G=
new tg(void 0!==G?G:8947848);var L=x/2,S=t/x,V=t/2;t=[];for(var Z=[],ja=0,ua=0,Ca=-V;ja<=x;ja++,Ca+=S){t.push(-V,0,Ca,V,0,Ca);t.push(Ca,0,-V,Ca,0,V);var bb=ja===L?C:G;bb.toArray(Z,ua);ua+=3;bb.toArray(Z,ua);ua+=3;bb.toArray(Z,ua);ua+=3;bb.toArray(Z,ua);ua+=3}x=new oa;x.setAttribute("position",new U(t,3));x.setAttribute("color",new U(Z,3));C=new Pl({vertexColors:!0,toneMapped:!1});x=u.call(this||p,x,C)||this||p;x.type="GridHelper";return x}g(z,u);return z}(Up),bsa=function(u){function z(t,x,C,G,L,
S){t=t||10;x=x||16;C=C||8;G=G||64;L=new tg(void 0!==L?L:4473924);S=new tg(void 0!==S?S:8947848);var V=[];for(var Z=[],ja=0;ja<=x;ja++){var ua=ja/x*2*Math.PI,Ca=Math.sin(ua)*t;ua=Math.cos(ua)*t;V.push(0,0,0);V.push(Ca,0,ua);Ca=ja&1?L:S;Z.push(Ca.r,Ca.g,Ca.b);Z.push(Ca.r,Ca.g,Ca.b)}for(x=0;x<=C;x++)for(ja=x&1?L:S,Ca=t-t/C*x,ua=0;ua<G;ua++){var bb=ua/G*2*Math.PI,$a=Math.sin(bb)*Ca;bb=Math.cos(bb)*Ca;V.push($a,0,bb);Z.push(ja.r,ja.g,ja.b);bb=(ua+1)/G*2*Math.PI;$a=Math.sin(bb)*Ca;bb=Math.cos(bb)*Ca;V.push($a,
0,bb);Z.push(ja.r,ja.g,ja.b)}t=new oa;t.setAttribute("position",new U(V,3));t.setAttribute("color",new U(Z,3));V=new Pl({vertexColors:!0,toneMapped:!1});V=u.call(this||p,t,V)||this||p;V.type="PolarGridHelper";return V}g(z,u);return z}(Up),Baa=new qc,aP=new qc,Caa=new qc,csa=function(u){function z(x,C,G){var L=u.call(this||p)||this||p;L.light=x;L.light.updateMatrixWorld();L.matrix=x.matrixWorld;L.matrixAutoUpdate=!1;L.color=G;void 0===C&&(C=1);x=new oa;x.setAttribute("position",new U([-C,C,0,C,C,0,
C,-C,0,-C,-C,0,-C,C,0],3));C=new Pl({fog:!1,toneMapped:!1});L.lightPlane=new Is(x,C);L.add(L.lightPlane);x=new oa;x.setAttribute("position",new U([0,0,0,0,0,1],3));L.targetLine=new Is(x,C);L.add(L.targetLine);L.update();return L}g(z,u);var t=z.prototype;t.dispose=function(){(this||p).lightPlane.geometry.dispose();(this||p).lightPlane.material.dispose();(this||p).targetLine.geometry.dispose();(this||p).targetLine.material.dispose()};t.update=function(){Baa.setFromMatrixPosition((this||p).light.matrixWorld);
aP.setFromMatrixPosition((this||p).light.target.matrixWorld);Caa.subVectors(aP,Baa);(this||p).lightPlane.lookAt(aP);void 0!==(this||p).color?((this||p).lightPlane.material.color.set((this||p).color),(this||p).targetLine.material.color.set((this||p).color)):((this||p).lightPlane.material.color.copy((this||p).light.color),(this||p).targetLine.material.color.copy((this||p).light.color));(this||p).targetLine.lookAt(aP);(this||p).targetLine.scale.z=Caa.length()};return z}(E),xO=new qc,tm=new Kb,dsa=function(u){function z(t){function x(ub,
pb,Rc){C(ub,Rc);C(pb,Rc)}function C(ub,pb){S.push(0,0,0);V.push(pb.r,pb.g,pb.b);void 0===Z[ub]&&(Z[ub]=[]);Z[ub].push(S.length/3-1)}var G=new oa;var L=new Pl({color:16777215,vertexColors:!0,toneMapped:!1}),S=[],V=[],Z={},ja=new tg(16755200),ua=new tg(16711680),Ca=new tg(43775),bb=new tg(16777215),$a=new tg(3355443);x("n1","n2",ja);x("n2","n4",ja);x("n4","n3",ja);x("n3","n1",ja);x("f1","f2",ja);x("f2","f4",ja);x("f4","f3",ja);x("f3","f1",ja);x("n1","f1",ja);x("n2","f2",ja);x("n3","f3",ja);x("n4","f4",
ja);x("p","n1",ua);x("p","n2",ua);x("p","n3",ua);x("p","n4",ua);x("u1","u2",Ca);x("u2","u3",Ca);x("u3","u1",Ca);x("c","t",bb);x("p","c",$a);x("cn1","cn2",$a);x("cn3","cn4",$a);x("cf1","cf2",$a);x("cf3","cf4",$a);G.setAttribute("position",new U(S,3));G.setAttribute("color",new U(V,3));G=u.call(this||p,G,L)||this||p;G.type="CameraHelper";G.camera=t;G.camera.updateProjectionMatrix&&G.camera.updateProjectionMatrix();G.matrix=t.matrixWorld;G.matrixAutoUpdate=!1;G.pointMap=Z;G.update();return G}g(z,u);
z.prototype.update=function(){var t=(this||p).geometry,x=(this||p).pointMap;tm.projectionMatrixInverse.copy((this||p).camera.projectionMatrixInverse);Jm("c",x,t,tm,0,0,-1);Jm("t",x,t,tm,0,0,1);Jm("n1",x,t,tm,-1,-1,-1);Jm("n2",x,t,tm,1,-1,-1);Jm("n3",x,t,tm,-1,1,-1);Jm("n4",x,t,tm,1,1,-1);Jm("f1",x,t,tm,-1,-1,1);Jm("f2",x,t,tm,1,-1,1);Jm("f3",x,t,tm,-1,1,1);Jm("f4",x,t,tm,1,1,1);Jm("u1",x,t,tm,.7,1.1,-1);Jm("u2",x,t,tm,-.7,1.1,-1);Jm("u3",x,t,tm,0,2,-1);Jm("cf1",x,t,tm,-1,0,1);Jm("cf2",x,t,tm,1,0,
1);Jm("cf3",x,t,tm,0,-1,1);Jm("cf4",x,t,tm,0,1,1);Jm("cn1",x,t,tm,-1,0,-1);Jm("cn2",x,t,tm,1,0,-1);Jm("cn3",x,t,tm,0,-1,-1);Jm("cn4",x,t,tm,0,1,-1);t.getAttribute("position").needsUpdate=!0};return z}(Up),bP=new Ov,Daa=function(u){function z(x,C){void 0===C&&(C=16776960);var G=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),L=new Float32Array(24),S=new oa;S.setIndex(new W(G,1));S.setAttribute("position",new W(L,3));C=u.call(this||p,S,new Pl({color:C,toneMapped:!1}))||this||p;C.object=
x;C.type="BoxHelper";C.matrixAutoUpdate=!1;C.update();return C}g(z,u);var t=z.prototype;t.update=function(x){void 0!==x&&console.warn("THREE.BoxHelper: .update() has no longer arguments.");void 0!==(this||p).object&&bP.setFromObject((this||p).object);if(!bP.isEmpty()){x=bP.min;var C=bP.max,G=(this||p).geometry.attributes.position,L=G.array;L[0]=C.x;L[1]=C.y;L[2]=C.z;L[3]=x.x;L[4]=C.y;L[5]=C.z;L[6]=x.x;L[7]=x.y;L[8]=C.z;L[9]=C.x;L[10]=x.y;L[11]=C.z;L[12]=C.x;L[13]=C.y;L[14]=x.z;L[15]=x.x;L[16]=C.y;
L[17]=x.z;L[18]=x.x;L[19]=x.y;L[20]=x.z;L[21]=C.x;L[22]=x.y;L[23]=x.z;G.needsUpdate=!0;(this||p).geometry.computeBoundingSphere()}};t.setFromObject=function(x){(this||p).object=x;this.update();return this||p};t.copy=function(x){Up.prototype.copy.call(this||p,x);(this||p).object=x.object;return this||p};return z}(Up),esa=function(u){function z(t,x){void 0===x&&(x=16776960);var C=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),G=new oa;G.setIndex(new W(C,1));G.setAttribute("position",
new U([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3));x=u.call(this||p,G,new Pl({color:x,toneMapped:!1}))||this||p;x.box=t;x.type="Box3Helper";x.geometry.computeBoundingSphere();return x}g(z,u);z.prototype.updateMatrixWorld=function(t){var x=(this||p).box;x.isEmpty()||(x.getCenter((this||p).position),x.getSize((this||p).scale),(this||p).scale.multiplyScalar(.5),u.prototype.updateMatrixWorld.call(this||p,t))};return z}(Up),fsa=function(u){function z(t,x,C){C=void 0!==C?C:16776960;
var G=new oa;G.setAttribute("position",new U([1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0],3));G.computeBoundingSphere();G=u.call(this||p,G,new Pl({color:C,toneMapped:!1}))||this||p;G.type="PlaneHelper";G.plane=t;G.size=void 0===x?1:x;t=new oa;t.setAttribute("position",new U([1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1],3));t.computeBoundingSphere();G.add(new gb(t,new N({color:C,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})));return G}g(z,u);z.prototype.updateMatrixWorld=
function(t){var x=-(this||p).plane.constant;1E-8>Math.abs(x)&&(x=1E-8);(this||p).scale.set(.5*(this||p).size,.5*(this||p).size,x);(this||p).children[0].material.side=0>x?1:0;this.lookAt((this||p).plane.normal);u.prototype.updateMatrixWorld.call(this||p,t)};return z}(Is),Eaa=new qc,cP,tX,gsa=function(u){function z(x,C,G,L,S,V){var Z=u.call(this||p)||this||p;Z.type="ArrowHelper";void 0===x&&(x=new qc(0,0,1));void 0===C&&(C=new qc(0,0,0));void 0===G&&(G=1);void 0===L&&(L=16776960);void 0===S&&(S=.2*
G);void 0===V&&(V=.2*S);void 0===cP&&(cP=new oa,cP.setAttribute("position",new U([0,0,0,0,1,0],3)),tX=new zI(0,.5,1,5,1),tX.translate(0,-.5,0));Z.position.copy(C);Z.line=new Is(cP,new Pl({color:L,toneMapped:!1}));Z.line.matrixAutoUpdate=!1;Z.add(Z.line);Z.cone=new gb(tX,new N({color:L,toneMapped:!1}));Z.cone.matrixAutoUpdate=!1;Z.add(Z.cone);Z.setDirection(x);Z.setLength(G,S,V);return Z}g(z,u);var t=z.prototype;t.setDirection=function(x){.99999<x.y?(this||p).quaternion.set(0,0,0,1):-.99999>x.y?(this||
p).quaternion.set(1,0,0,0):(Eaa.set(x.z,0,-x.x).normalize(),(this||p).quaternion.setFromAxisAngle(Eaa,Math.acos(x.y)))};t.setLength=function(x,C,G){void 0===C&&(C=.2*x);void 0===G&&(G=.2*C);(this||p).line.scale.set(1,Math.max(1E-4,x-C),1);(this||p).line.updateMatrix();(this||p).cone.scale.set(G,C,G);(this||p).cone.position.y=x;(this||p).cone.updateMatrix()};t.setColor=function(x){(this||p).line.material.color.set(x);(this||p).cone.material.color.set(x)};t.copy=function(x){u.prototype.copy.call(this||
p,x,!1);(this||p).line.copy(x.line);(this||p).cone.copy(x.cone);return this||p};return z}(E),Faa=function(u){function z(t){void 0===t&&(t=1);var x=[0,0,0,t,0,0,0,0,0,0,t,0,0,0,0,0,0,t];t=new oa;t.setAttribute("position",new U(x,3));t.setAttribute("color",new U([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3));x=new Pl({vertexColors:!0,toneMapped:!1});t=u.call(this||p,t,x)||this||p;t.type="AxesHelper";return t}g(z,u);return z}(Up),mx,Mv=Math.pow(2,8),Gaa=[.125,.215,.35,.446,.526,.582],Haa=5+Gaa.length,
Nv=(mx={},mx[3E3]=0,mx[3001]=1,mx[3002]=2,mx[3004]=3,mx[3005]=4,mx[3006]=5,mx[3007]=6,mx),uX=new DE,vX=function(){for(var u=[],z=[],t=[],x=8,C=0;C<Haa;C++){var G=Math.pow(2,x);z.push(G);var L=1/G;4<C?L=Gaa[C-8+4-1]:0==C&&(L=0);t.push(L);L=1/(G-1);G=-L/2;L=1+L/2;var S=[G,G,L,G,L,L,G,G,L,L,G,L];G=new Float32Array(108);L=new Float32Array(72);for(var V=new Float32Array(36),Z=0;6>Z;Z++){var ja=Z%3*2/3-1,ua=2<Z?0:-1;G.set([ja,ua,0,ja+2/3,ua,0,ja+2/3,ua+1,0,ja,ua,0,ja+2/3,ua+1,0,ja,ua+1,0],18*Z);L.set(S,
12*Z);V.set([Z,Z,Z,Z,Z,Z],6*Z)}S=new oa;S.setAttribute("position",new W(G,3));S.setAttribute("uv",new W(L,2));S.setAttribute("faceIndex",new W(V,1));u.push(S);4<x&&x--}return{_lodPlanes:u,_sizeLods:z,_sigmas:t}}(),BI=vX._lodPlanes,Iaa=vX._sizeLods,dP=vX._sigmas,wX=null,VB=(1+Math.sqrt(5))/2,SE=1/VB,Jaa=[new qc(1,1,1),new qc(-1,1,1),new qc(1,1,-1),new qc(-1,1,-1),new qc(0,VB,SE),new qc(0,VB,-SE),new qc(SE,0,VB),new qc(-SE,0,VB),new qc(VB,SE,0),new qc(-VB,SE,0)],hsa=function(){function u(t){(this||
p)._renderer=t;(this||p)._pingPongRenderTarget=null;t=new Float32Array(20);var x=new qc(0,1,0);t=new cx({name:"SphericalGaussianBlur",defines:{n:20},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:t},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:x},inputEncoding:{value:Nv[3E3]},outputEncoding:{value:Nv[3E3]}},vertexShader:CW(),fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t"+
DW()+"\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t",
blending:0,depthTest:!1,depthWrite:!1});(this||p)._blurMaterial=t;(this||p)._equirectShader=null;(this||p)._cubemapShader=null;this._compileMaterial((this||p)._blurMaterial)}var z=u.prototype;z.fromScene=function(t,x,C,G){void 0===x&&(x=0);void 0===C&&(C=.1);void 0===G&&(G=100);wX=(this||p)._renderer.getRenderTarget();var L=this._allocateTargets();this._sceneToCubeUV(t,C,G,L);0<x&&this._blur(L,0,0,x);this._applyPMREM(L);this._cleanup(L);return L};z.fromEquirectangular=function(t){return this._fromTexture(t)};
z.fromCubemap=function(t){return this._fromTexture(t)};z.compileCubemapShader=function(){null===(this||p)._cubemapShader&&((this||p)._cubemapShader=v$(),this._compileMaterial((this||p)._cubemapShader))};z.compileEquirectangularShader=function(){null===(this||p)._equirectShader&&((this||p)._equirectShader=u$(),this._compileMaterial((this||p)._equirectShader))};z.dispose=function(){(this||p)._blurMaterial.dispose();null!==(this||p)._cubemapShader&&(this||p)._cubemapShader.dispose();null!==(this||p)._equirectShader&&
(this||p)._equirectShader.dispose();for(var t=0;t<BI.length;t++)BI[t].dispose()};z._cleanup=function(t){(this||p)._pingPongRenderTarget.dispose();(this||p)._renderer.setRenderTarget(wX);t.scissorTest=!1;yO(t,0,0,t.width,t.height)};z._fromTexture=function(t){wX=(this||p)._renderer.getRenderTarget();var x=this._allocateTargets(t);this._textureToCubeUV(t,x);this._applyPMREM(x);this._cleanup(x);return x};z._allocateTargets=function(t){var x=void 0===t||1009!==t.type?!1:3E3===t.encoding||3001===t.encoding||
3007===t.encoding;x={magFilter:1003,minFilter:1003,generateMipmaps:!1,type:1009,format:1023,encoding:x?t.encoding:3002,depthBuffer:!1};var C=t$(x);C.depthBuffer=t?!1:!0;(this||p)._pingPongRenderTarget=t$(x);return C};z._compileMaterial=function(t){t=new gb(BI[0],t);(this||p)._renderer.compile(t,uX)};z._sceneToCubeUV=function(t,x,C,G){x=new kc(90,1,x,C);C=[1,-1,1,1,1,1];var L=[1,1,1,-1,-1,-1],S=(this||p)._renderer,V=S.outputEncoding,Z=S.toneMapping,ja=S.getClearColor(),ua=S.getClearAlpha();S.toneMapping=
0;S.outputEncoding=3E3;var Ca=t.background;if(Ca&&Ca.isColor){Ca.convertSRGBToLinear();var bb=Math.min(Math.max(Math.ceil(Math.log2(Math.max(Ca.r,Ca.g,Ca.b))),-128),127);Ca=Ca.multiplyScalar(Math.pow(2,-bb));S.setClearColor(Ca,(bb+128)/255);t.background=null}for(Ca=0;6>Ca;Ca++)bb=Ca%3,0==bb?(x.up.set(0,C[Ca],0),x.lookAt(L[Ca],0,0)):1==bb?(x.up.set(0,0,C[Ca]),x.lookAt(0,L[Ca],0)):(x.up.set(0,C[Ca],0),x.lookAt(0,0,L[Ca])),yO(G,bb*Mv,2<Ca?Mv:0,Mv,Mv),S.setRenderTarget(G),S.render(t,x);S.toneMapping=
Z;S.outputEncoding=V;S.setClearColor(ja,ua)};z._textureToCubeUV=function(t,x){var C=(this||p)._renderer;t.isCubeTexture?null==(this||p)._cubemapShader&&((this||p)._cubemapShader=v$()):null==(this||p)._equirectShader&&((this||p)._equirectShader=u$());var G=t.isCubeTexture?(this||p)._cubemapShader:(this||p)._equirectShader,L=new gb(BI[0],G);G=G.uniforms;G.envMap.value=t;t.isCubeTexture||G.texelSize.value.set(1/t.image.width,1/t.image.height);G.inputEncoding.value=Nv[t.encoding];G.outputEncoding.value=
Nv[x.texture.encoding];yO(x,0,0,3*Mv,2*Mv);C.setRenderTarget(x);C.render(L,uX)};z._applyPMREM=function(t){var x=(this||p)._renderer,C=x.autoClear;x.autoClear=!1;for(var G=1;G<Haa;G++)this._blur(t,G-1,G,Math.sqrt(dP[G]*dP[G]-dP[G-1]*dP[G-1]),Jaa[(G-1)%Jaa.length]);x.autoClear=C};z._blur=function(t,x,C,G,L){var S=(this||p)._pingPongRenderTarget;this._halfBlur(t,S,x,C,G,"latitudinal",L);this._halfBlur(S,t,C,C,G,"longitudinal",L)};z._halfBlur=function(t,x,C,G,L,S,V){var Z=(this||p)._renderer,ja=(this||
p)._blurMaterial;"latitudinal"!==S&&"longitudinal"!==S&&console.error("blur direction must be either latitudinal or longitudinal!");var ua=new gb(BI[G],ja);ja=ja.uniforms;var Ca=Iaa[C]-1;Ca=isFinite(L)?Math.PI/(2*Ca):2*Math.PI/39;var bb=L/Ca,$a=isFinite(L)?1+Math.floor(3*bb):20;20<$a&&console.warn("sigmaRadians, "+L+", is too large and will clip, as it requested "+$a+" samples when the maximum is set to 20");L=[];for(var ub=0,pb=0;20>pb;++pb){var Rc=pb/bb;Rc=Math.exp(-Rc*Rc/2);L.push(Rc);0==pb?ub+=
Rc:pb<$a&&(ub+=2*Rc)}for(bb=0;bb<L.length;bb++)L[bb]/=ub;ja.envMap.value=t.texture;ja.samples.value=$a;ja.weights.value=L;ja.latitudinal.value="latitudinal"===S;V&&(ja.poleAxis.value=V);ja.dTheta.value=Ca;ja.mipInt.value=8-C;ja.inputEncoding.value=Nv[t.texture.encoding];ja.outputEncoding.value=Nv[t.texture.encoding];t=Iaa[G];yO(x,3*Math.max(0,Mv-2*t),(0===G?0:2*Mv)+2*t*(4<G?G-8+4:0),3*t,2*t);Z.setRenderTarget(x);Z.render(ua,uX)};return u}();ah.create=function(u,z){console.log("THREE.Curve.create() has been deprecated");
u.prototype=Object.create(ah.prototype);u.prototype.constructor=u;u.prototype.getPoint=z;return u};Object.assign(dx.prototype,{createPointsGeometry:function(u){console.warn("THREE.CurvePath: .createPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");u=this.getPoints(u);return this.createGeometry(u)},createSpacedPointsGeometry:function(u){console.warn("THREE.CurvePath: .createSpacedPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");
u=this.getSpacedPoints(u);return this.createGeometry(u)},createGeometry:function(u){console.warn("THREE.CurvePath: .createGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");for(var z=new Rk,t=0,x=u.length;t<x;t++){var C=u[t];z.vertices.push(new qc(C.x,C.y,C.z||0))}return z}});Object.assign(eu.prototype,{fromPoints:function(u){console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints().");return this.setFromPoints(u)}});w$.prototype=Object.create(ip.prototype);
x$.prototype=Object.create(ip.prototype);EW.prototype=Object.create(ip.prototype);Object.assign(EW.prototype,{initFromArray:function(){console.error("THREE.Spline: .initFromArray() has been removed.")},getControlPointsArray:function(){console.error("THREE.Spline: .getControlPointsArray() has been removed.")},reparametrizeByArcLength:function(){console.error("THREE.Spline: .reparametrizeByArcLength() has been removed.")}});Aaa.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")};
xaa.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")};Object.assign(Jk.prototype,{extractUrlBase:function(u){console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead.");return pX.extractUrlBase(u)}});Jk.Handlers={add:function(){console.error("THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead.")},get:function(){console.error("THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead.")}};
Object.assign(taa.prototype,{center:function(u){console.warn("THREE.Box2: .center() has been renamed to .getCenter().");return this.getCenter(u)},empty:function(){console.warn("THREE.Box2: .empty() has been renamed to .isEmpty().");return this.isEmpty()},isIntersectionBox:function(u){console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox().");return this.intersectsBox(u)},size:function(u){console.warn("THREE.Box2: .size() has been renamed to .getSize().");return this.getSize(u)}});
Object.assign(Ov.prototype,{center:function(u){console.warn("THREE.Box3: .center() has been renamed to .getCenter().");return this.getCenter(u)},empty:function(){console.warn("THREE.Box3: .empty() has been renamed to .isEmpty().");return this.isEmpty()},isIntersectionBox:function(u){console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox().");return this.intersectsBox(u)},isIntersectionSphere:function(u){console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere().");
return this.intersectsSphere(u)},size:function(u){console.warn("THREE.Box3: .size() has been renamed to .getSize().");return this.getSize(u)}});Object.assign(gx.prototype,{empty:function(){console.warn("THREE.Sphere: .empty() has been renamed to .isEmpty().");return this.isEmpty()}});XH.prototype.setFromMatrix=function(u){console.warn("THREE.Frustum: .setFromMatrix() has been renamed to .setFromProjectionMatrix().");return this.setFromProjectionMatrix(u)};vaa.prototype.center=function(u){console.warn("THREE.Line3: .center() has been renamed to .getCenter().");
return this.getCenter(u)};Object.assign(ai,{random16:function(){console.warn("THREE.Math: .random16() has been deprecated. Use Math.random() instead.");return Math.random()},nearestPowerOfTwo:function(u){console.warn("THREE.Math: .nearestPowerOfTwo() has been renamed to .floorPowerOfTwo().");return ai.floorPowerOfTwo(u)},nextPowerOfTwo:function(u){console.warn("THREE.Math: .nextPowerOfTwo() has been renamed to .ceilPowerOfTwo().");return ai.ceilPowerOfTwo(u)}});Object.assign(Tp.prototype,{flattenToArrayOffset:function(u,
z){console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead.");return this.toArray(u,z)},multiplyVector3:function(u){console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead.");return u.applyMatrix3(this||p)},multiplyVector3Array:function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},applyToBufferAttribute:function(u){console.warn("THREE.Matrix3: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix3( matrix ) instead.");
return u.applyMatrix3(this||p)},applyToVector3Array:function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")}});Object.assign(fj.prototype,{extractPosition:function(u){console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition().");return this.copyPosition(u)},flattenToArrayOffset:function(u,z){console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead.");return this.toArray(u,z)},getPosition:function(){console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead.");
return(new qc).setFromMatrixColumn(this||p,3)},setRotationFromQuaternion:function(u){console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion().");return this.makeRotationFromQuaternion(u)},multiplyToArray:function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},multiplyVector3:function(u){console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead.");return u.applyMatrix4(this||
p)},multiplyVector4:function(u){console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead.");return u.applyMatrix4(this||p)},multiplyVector3Array:function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},rotateAxis:function(u){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead.");u.transformDirection(this||p)},crossVector:function(u){console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead.");
return u.applyMatrix4(this||p)},translate:function(){console.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},applyToBufferAttribute:function(u){console.warn("THREE.Matrix4: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix4( matrix ) instead.");
return u.applyMatrix4(this||p)},applyToVector3Array:function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},makeFrustum:function(u,z,t,x,C,G){console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead.");return this.makePerspective(u,z,x,t,C,G)}});Iv.prototype.isIntersectionLine=function(u){console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine().");return this.intersectsLine(u)};
hp.prototype.multiplyVector3=function(u){console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead.");return u.applyQuaternion(this||p)};Object.assign(EE.prototype,{isIntersectionBox:function(u){console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox().");return this.intersectsBox(u)},isIntersectionPlane:function(u){console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane().");return this.intersectsPlane(u)},
isIntersectionSphere:function(u){console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere().");return this.intersectsSphere(u)}});Object.assign(Xt.prototype,{area:function(){console.warn("THREE.Triangle: .area() has been renamed to .getArea().");return this.getArea()},barycoordFromPoint:function(u,z){console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord().");return this.getBarycoord(u,z)},midpoint:function(u){console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint().");
return this.getMidpoint(u)},normal:function(u){console.warn("THREE.Triangle: .normal() has been renamed to .getNormal().");return this.getNormal(u)},plane:function(u){console.warn("THREE.Triangle: .plane() has been renamed to .getPlane().");return this.getPlane(u)}});Object.assign(Xt,{barycoordFromPoint:function(u,z,t,x,C){console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord().");return Xt.getBarycoord(u,z,t,x,C)},normal:function(u,z,t,x){console.warn("THREE.Triangle: .normal() has been renamed to .getNormal().");
return Xt.getNormal(u,z,t,x)}});Object.assign(nz.prototype,{extractAllPoints:function(u){console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead.");return this.extractPoints(u)},extrude:function(u){console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead.");return new $W(this||p,u)},makeGeometry:function(u){console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead.");return new eX(this||p,u)}});Object.assign(Ve.prototype,
{fromAttribute:function(u,z,t){console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute().");return this.fromBufferAttribute(u,z,t)},distanceToManhattan:function(u){console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo().");return this.manhattanDistanceTo(u)},lengthManhattan:function(){console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength().");return this.manhattanLength()}});Object.assign(qc.prototype,
{setEulerFromRotationMatrix:function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(u){console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition().");return this.setFromMatrixPosition(u)},getScaleFromMatrix:function(u){console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale().");
return this.setFromMatrixScale(u)},getColumnFromMatrix:function(u,z){console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn().");return this.setFromMatrixColumn(z,u)},applyProjection:function(u){console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead.");return this.applyMatrix4(u)},fromAttribute:function(u,z,t){console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute().");return this.fromBufferAttribute(u,
z,t)},distanceToManhattan:function(u){console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo().");return this.manhattanDistanceTo(u)},lengthManhattan:function(){console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength().");return this.manhattanLength()}});Object.assign(Qk.prototype,{fromAttribute:function(u,z,t){console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute().");return this.fromBufferAttribute(u,
z,t)},lengthManhattan:function(){console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength().");return this.manhattanLength()}});Object.assign(Rk.prototype,{computeTangents:function(){console.error("THREE.Geometry: .computeTangents() has been removed.")},computeLineDistances:function(){console.error("THREE.Geometry: .computeLineDistances() has been removed. Use THREE.Line.computeLineDistances() instead.")},applyMatrix:function(u){console.warn("THREE.Geometry: .applyMatrix() has been renamed to .applyMatrix4().");
return this.applyMatrix4(u)}});Object.assign(E.prototype,{getChildByName:function(u){console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName().");return this.getObjectByName(u)},renderDepth:function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},translate:function(u,z){console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead.");return this.translateOnAxis(z,u)},getWorldRotation:function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")},
applyMatrix:function(u){console.warn("THREE.Object3D: .applyMatrix() has been renamed to .applyMatrix4().");return this.applyMatrix4(u)}});Object.defineProperties(E.prototype,{eulerOrder:{get:function(){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order.");return(this||p).rotation.order},set:function(u){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order.");(this||p).rotation.order=u}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},
set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}});Object.assign(gb.prototype,{setDrawMode:function(){console.error("THREE.Mesh: .setDrawMode() has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}});Object.defineProperties(gb.prototype,{drawMode:{get:function(){console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode.");
return 0},set:function(){console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}});Object.defineProperties(cI.prototype,{objects:{get:function(){console.warn("THREE.LOD: .objects has been renamed to .levels.");return(this||p).levels}}});Object.defineProperty(ZN.prototype,"useVertexTexture",{get:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")},
set:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")}});YN.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")};Object.defineProperty(ah.prototype,"__arcLengthDivisions",{get:function(){console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions.");return(this||p).arcLengthDivisions},set:function(u){console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions.");(this||p).arcLengthDivisions=u}});
kc.prototype.setLens=function(u,z){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup.");void 0!==z&&((this||p).filmGauge=z);this.setFocalLength(u)};Object.defineProperties(ll.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(u){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov.");(this||p).shadow.camera.fov=u}},shadowCameraLeft:{set:function(u){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left.");
(this||p).shadow.camera.left=u}},shadowCameraRight:{set:function(u){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right.");(this||p).shadow.camera.right=u}},shadowCameraTop:{set:function(u){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top.");(this||p).shadow.camera.top=u}},shadowCameraBottom:{set:function(u){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom.");(this||p).shadow.camera.bottom=u}},shadowCameraNear:{set:function(u){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near.");
(this||p).shadow.camera.near=u}},shadowCameraFar:{set:function(u){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far.");(this||p).shadow.camera.far=u}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(u){console.warn("THREE.Light: .shadowBias is now .shadow.bias.");(this||p).shadow.bias=u}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},
shadowMapWidth:{set:function(u){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width.");(this||p).shadow.mapSize.width=u}},shadowMapHeight:{set:function(u){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height.");(this||p).shadow.mapSize.height=u}}});Object.defineProperties(W.prototype,{length:{get:function(){console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead.");return(this||p).array.length}},dynamic:{get:function(){console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead.");
return 35048===(this||p).usage},set:function(){console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead.");this.setUsage(35048)}}});Object.assign(W.prototype,{setDynamic:function(u){console.warn("THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead.");this.setUsage(!0===u?35048:35044);return this||p},copyIndicesArray:function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")},setArray:function(){console.error("THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")}});
Object.assign(oa.prototype,{addIndex:function(u){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex().");this.setIndex(u)},addAttribute:function(u,z,t){console.warn("THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute().");return z&&z.isBufferAttribute||z&&z.isInterleavedBufferAttribute?"index"===u?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(z),this||p):this.setAttribute(u,z):(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),
this.setAttribute(u,new W(z,t)))},addDrawCall:function(u,z,t){void 0!==t&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset.");console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup().");this.addGroup(u,z)},clearDrawCalls:function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups().");this.clearGroups()},computeTangents:function(){console.warn("THREE.BufferGeometry: .computeTangents() has been removed.")},computeOffsets:function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")},
removeAttribute:function(u){console.warn("THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute().");return this.deleteAttribute(u)},applyMatrix:function(u){console.warn("THREE.BufferGeometry: .applyMatrix() has been renamed to .applyMatrix4().");return this.applyMatrix4(u)}});Object.defineProperties(oa.prototype,{drawcalls:{get:function(){console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups.");return(this||p).groups}},offsets:{get:function(){console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups.");
return(this||p).groups}}});Object.defineProperties(nI.prototype,{maxInstancedCount:{get:function(){console.warn("THREE.InstancedBufferGeometry: .maxInstancedCount has been renamed to .instanceCount.");return(this||p).instanceCount},set:function(u){console.warn("THREE.InstancedBufferGeometry: .maxInstancedCount has been renamed to .instanceCount.");(this||p).instanceCount=u}}});Object.defineProperties(AW.prototype,{linePrecision:{get:function(){console.warn("THREE.Raycaster: .linePrecision has been deprecated. Use .params.Line.threshold instead.");
return(this||p).params.Line.threshold},set:function(u){console.warn("THREE.Raycaster: .linePrecision has been deprecated. Use .params.Line.threshold instead.");(this||p).params.Line.threshold=u}}});Object.defineProperties(zr.prototype,{dynamic:{get:function(){console.warn("THREE.InterleavedBuffer: .length has been deprecated. Use .usage instead.");return 35048===(this||p).usage},set:function(u){console.warn("THREE.InterleavedBuffer: .length has been deprecated. Use .usage instead.");this.setUsage(u)}}});
Object.assign(zr.prototype,{setDynamic:function(u){console.warn("THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead.");this.setUsage(!0===u?35048:35044);return this||p},setArray:function(){console.error("THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")}});Object.assign(AI.prototype,{getArrays:function(){console.error("THREE.ExtrudeBufferGeometry: .getArrays() has been removed.")},addShapeList:function(){console.error("THREE.ExtrudeBufferGeometry: .addShapeList() has been removed.")},
addShape:function(){console.error("THREE.ExtrudeBufferGeometry: .addShape() has been removed.")}});Object.assign(RW.prototype,{dispose:function(){console.error("THREE.Scene: .dispose() has been removed.")}});Object.defineProperties(raa.prototype,{dynamic:{set:function(){console.warn("THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.")}},onUpdate:{value:function(){console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead.");return this||
p}}});Object.defineProperties(M.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){console.warn("THREE.Material: .wrapRGB has been removed.");return new tg}},shading:{get:function(){console.error("THREE."+
(this||p).type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(u){console.warn("THREE."+(this||p).type+": .shading has been removed. Use the boolean .flatShading instead.");(this||p).flatShading=1===u}},stencilMask:{get:function(){console.warn("THREE."+(this||p).type+": .stencilMask has been removed. Use .stencilFuncMask instead.");return(this||p).stencilFuncMask},set:function(u){console.warn("THREE."+(this||p).type+": .stencilMask has been removed. Use .stencilFuncMask instead.");
(this||p).stencilFuncMask=u}}});Object.defineProperties(mz.prototype,{metal:{get:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead.");return!1},set:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")}}});Object.defineProperties(lz.prototype,{transparency:{get:function(){console.warn("THREE.MeshPhysicalMaterial: .transparency has been renamed to .transmission.");return(this||
p).transmission},set:function(u){console.warn("THREE.MeshPhysicalMaterial: .transparency has been renamed to .transmission.");(this||p).transmission=u}}});Object.defineProperties(Na.prototype,{derivatives:{get:function(){console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives.");return(this||p).extensions.derivatives},set:function(u){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives.");(this||p).extensions.derivatives=u}}});
Object.assign(ZH.prototype,{clearTarget:function(u,z,t,x){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead.");this.setRenderTarget(u);this.clear(z,t,x)},animate:function(u){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop().");this.setAnimationLoop(u)},getCurrentRenderTarget:function(){console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget().");return this.getRenderTarget()},getMaxAnisotropy:function(){console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy().");
return(this||p).capabilities.getMaxAnisotropy()},getPrecision:function(){console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision.");return(this||p).capabilities.precision},resetGLState:function(){console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset().");return(this||p).state.reset()},supportsFloatTextures:function(){console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' ).");return(this||p).extensions.get("OES_texture_float")},
supportsHalfFloatTextures:function(){console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' ).");return(this||p).extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function(){console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' ).");return(this||p).extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' ).");
return(this||p).extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function(){console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' ).");return(this||p).extensions.get("WEBGL_compressed_texture_pvrtc")},supportsBlendMinMax:function(){console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' ).");return(this||p).extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures.");
return(this||p).capabilities.vertexTextures},supportsInstancedArrays:function(){console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' ).");return(this||p).extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(u){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest().");this.setScissorTest(u)},initMaterial:function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},addPrePlugin:function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},
addPostPlugin:function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},updateShadowMap:function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},setFaceCulling:function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")},allocTextureUnit:function(){console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")},setTexture:function(){console.warn("THREE.WebGLRenderer: .setTexture() has been removed.")},setTexture2D:function(){console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.")},
setTextureCube:function(){console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")},getActiveMipMapLevel:function(){console.warn("THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel().");return this.getActiveMipmapLevel()}});Object.defineProperties(ZH.prototype,{shadowMapEnabled:{get:function(){return(this||p).shadowMap.enabled},set:function(u){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled.");(this||p).shadowMap.enabled=u}},shadowMapType:{get:function(){return(this||
p).shadowMap.type},set:function(u){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type.");(this||p).shadowMap.type=u}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}},context:{get:function(){console.warn("THREE.WebGLRenderer: .context has been removed. Use .getContext() instead.");
return this.getContext()}},vr:{get:function(){console.warn("THREE.WebGLRenderer: .vr has been renamed to .xr");return(this||p).xr}},gammaInput:{get:function(){console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.");return!1},set:function(){console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.")}},gammaOutput:{get:function(){console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead.");
return!1},set:function(u){console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead.");(this||p).outputEncoding=!0===u?3001:3E3}},toneMappingWhitePoint:{get:function(){console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed.");return 1},set:function(){console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed.")}}});Object.defineProperties(Y9.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},
set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},
set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}});Object.defineProperties(v.prototype,{wrapS:{get:function(){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS.");return(this||p).texture.wrapS},set:function(u){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS.");(this||p).texture.wrapS=u}},wrapT:{get:function(){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT.");
return(this||p).texture.wrapT},set:function(u){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT.");(this||p).texture.wrapT=u}},magFilter:{get:function(){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter.");return(this||p).texture.magFilter},set:function(u){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter.");(this||p).texture.magFilter=u}},minFilter:{get:function(){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter.");
return(this||p).texture.minFilter},set:function(u){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter.");(this||p).texture.minFilter=u}},anisotropy:{get:function(){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy.");return(this||p).texture.anisotropy},set:function(u){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy.");(this||p).texture.anisotropy=u}},offset:{get:function(){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset.");
return(this||p).texture.offset},set:function(u){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset.");(this||p).texture.offset=u}},repeat:{get:function(){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat.");return(this||p).texture.repeat},set:function(u){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat.");(this||p).texture.repeat=u}},format:{get:function(){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format.");return(this||
p).texture.format},set:function(u){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format.");(this||p).texture.format=u}},type:{get:function(){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type.");return(this||p).texture.type},set:function(u){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type.");(this||p).texture.type=u}},generateMipmaps:{get:function(){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps.");return(this||
p).texture.generateMipmaps},set:function(u){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps.");(this||p).texture.generateMipmaps=u}}});Object.defineProperties(rX.prototype,{load:{value:function(u){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");var z=this||p;(new wO).load(u,function(t){z.setBuffer(t)});return this||p}},startTime:{set:function(){console.warn("THREE.Audio: .startTime is now .play( delay ).")}}});qaa.prototype.getData=
function(){console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData().");return this.getFrequencyData()};Vb.prototype.updateCubeMap=function(u,z){console.warn("THREE.CubeCamera: .updateCubeMap() is now .update().");return this.update(u,z)};oz.crossOrigin=void 0;oz.loadTexture=function(u,z,t,x){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");var C=new mO;C.setCrossOrigin((this||p).crossOrigin);u=C.load(u,t,void 0,x);z&&(u.mapping=z);
return u};oz.loadTextureCube=function(u,z,t,x){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");var C=new kO;C.setCrossOrigin((this||p).crossOrigin);u=C.load(u,t,void 0,x);z&&(u.mapping=z);return u};oz.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")};oz.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")};
"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:"121"}}));b.ACESFilmicToneMapping=4;b.AddEquation=100;b.AddOperation=2;b.AdditiveAnimationBlendMode=2501;b.AdditiveBlending=2;b.AlphaFormat=1021;b.AlwaysDepth=1;b.AlwaysStencilFunc=519;b.AmbientLight=rO;b.AmbientLightProbe=vW;b.AnimationClip=Js;b.AnimationLoader=kW;b.AnimationMixer=xW;b.AnimationObjectGroup=q$;b.AnimationUtils=xl;b.ArcCurve=CE;b.ArrayCamera=UN;b.ArrowHelper=gsa;b.Audio=
rX;b.AudioAnalyser=qaa;b.AudioContext=qX;b.AudioListener=Kra;b.AudioLoader=wO;b.AxesHelper=Faa;b.AxisHelper=function(u){console.warn("THREE.AxisHelper has been renamed to THREE.AxesHelper.");return new Faa(u)};b.BackSide=1;b.BasicDepthPacking=3200;b.BasicShadowMap=0;b.BinaryTextureLoader=function(u){console.warn("THREE.BinaryTextureLoader has been renamed to THREE.DataTextureLoader.");return new lO(u)};b.Bone=dW;b.BooleanKeyframeTrack=gO;b.BoundingBoxHelper=function(u,z){console.warn("THREE.BoundingBoxHelper has been deprecated. Creating a THREE.BoxHelper instead.");
return new Daa(u,z)};b.Box2=taa;b.Box3=Ov;b.Box3Helper=esa;b.BoxBufferGeometry=WH;b.BoxGeometry=UW;b.BoxHelper=Daa;b.BufferAttribute=W;b.BufferGeometry=oa;b.BufferGeometryLoader=vO;b.ByteType=1010;b.Cache=QB;b.Camera=Kb;b.CameraHelper=dsa;b.CanvasRenderer=function(){console.error("THREE.CanvasRenderer has been removed")};b.CanvasTexture=dI;b.CatmullRomCurve3=ip;b.CineonToneMapping=3;b.CircleBufferGeometry=VW;b.CircleGeometry=U$;b.ClampToEdgeWrapping=1001;b.Clock=naa;b.ClosedSplineCurve3=w$;b.Color=
tg;b.ColorKeyframeTrack=hO;b.CompressedTexture=wE;b.CompressedTextureLoader=lW;b.ConeBufferGeometry=W$;b.ConeGeometry=V$;b.CubeCamera=Vb;b.CubeGeometry=UW;b.CubeReflectionMapping=301;b.CubeRefractionMapping=302;b.CubeTexture=jc;b.CubeTextureLoader=kO;b.CubeUVReflectionMapping=306;b.CubeUVRefractionMapping=307;b.CubicBezierCurve=au;b.CubicBezierCurve3=Kv;b.CubicInterpolant=eO;b.CullFaceBack=1;b.CullFaceFront=2;b.CullFaceFrontBack=3;b.CullFaceNone=0;b.Curve=ah;b.CurvePath=dx;b.CustomBlending=5;b.CustomToneMapping=
5;b.CylinderBufferGeometry=zI;b.CylinderGeometry=WW;b.Cylindrical=Xra;b.DataTexture=Pb;b.DataTexture2DArray=lj;b.DataTexture3D=Cj;b.DataTextureLoader=lO;b.DecrementStencilOp=7683;b.DecrementWrapStencilOp=34056;b.DefaultLoadingManager=l$;b.DepthFormat=1026;b.DepthStencilFormat=1027;b.DepthTexture=eI;b.DirectionalLight=qO;b.DirectionalLightHelper=csa;b.DiscreteInterpolant=fO;b.DodecahedronBufferGeometry=XW;b.DodecahedronGeometry=X$;b.DoubleSide=2;b.DstAlphaFactor=206;b.DstColorFactor=208;b.DynamicBufferAttribute=
function(u,z){console.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setUsage( THREE.DynamicDrawUsage ) instead.");return(new W(u,z)).setUsage(35048)};b.DynamicCopyUsage=35050;b.DynamicDrawUsage=35048;b.DynamicReadUsage=35049;b.EdgesGeometry=ZW;b.EdgesHelper=function(u,z){console.warn("THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead.");return new Up(new ZW(u.geometry),new Pl({color:void 0!==z?z:16777215}))};b.EllipseCurve=Br;b.EqualDepth=4;
b.EqualStencilFunc=514;b.EquirectangularReflectionMapping=303;b.EquirectangularRefractionMapping=304;b.Euler=ON;b.EventDispatcher=e;b.ExtrudeBufferGeometry=AI;b.ExtrudeGeometry=$W;b.Face3=VH;b.Face4=function(u,z,t,x,C,G,L){console.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead.");return new VH(u,z,t,C,G,L)};b.FaceColors=1;b.FileLoader=Ks;b.FlatShading=1;b.Float32Attribute=function(u,z){console.warn("THREE.Float32Attribute has been removed. Use new THREE.Float32BufferAttribute() instead.");
return new U(u,z)};b.Float32BufferAttribute=U;b.Float64Attribute=function(u,z){console.warn("THREE.Float64Attribute has been removed. Use new THREE.Float64BufferAttribute() instead.");return new pa(u,z)};b.Float64BufferAttribute=pa;b.FloatType=1015;b.Fog=J$;b.FogExp2=I$;b.Font=sW;b.FontLoader=tW;b.FrontSide=0;b.Frustum=XH;b.GLBufferAttribute=zW;b.GLSL1="100";b.GLSL3="300 es";b.GammaEncoding=3007;b.Geometry=Rk;b.GeometryUtils={merge:function(u,z,t){console.warn("THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead.");
if(z.isMesh){z.matrixAutoUpdate&&z.updateMatrix();var x=z.matrix;z=z.geometry}u.merge(z,x,t)},center:function(u){console.warn("THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead.");return u.center()}};b.GreaterDepth=6;b.GreaterEqualDepth=5;b.GreaterEqualStencilFunc=518;b.GreaterStencilFunc=516;b.GridHelper=Aaa;b.Group=ez;b.HalfFloatType=1016;b.HemisphereLight=nO;b.HemisphereLightHelper=asa;b.HemisphereLightProbe=uW;b.IcosahedronBufferGeometry=aX;b.IcosahedronGeometry=
Y$;b.ImageBitmapLoader=qW;b.ImageLoader=BE;b.ImageUtils=oz;b.ImmediateRenderObject=oI;b.IncrementStencilOp=7682;b.IncrementWrapStencilOp=34055;b.InstancedBufferAttribute=uO;b.InstancedBufferGeometry=nI;b.InstancedInterleavedBuffer=yW;b.InstancedMesh=$N;b.Int16Attribute=function(u,z){console.warn("THREE.Int16Attribute has been removed. Use new THREE.Int16BufferAttribute() instead.");return new Ma(u,z)};b.Int16BufferAttribute=Ma;b.Int32Attribute=function(u,z){console.warn("THREE.Int32Attribute has been removed. Use new THREE.Int32BufferAttribute() instead.");
return new aa(u,z)};b.Int32BufferAttribute=aa;b.Int8Attribute=function(u,z){console.warn("THREE.Int8Attribute has been removed. Use new THREE.Int8BufferAttribute() instead.");return new X(u,z)};b.Int8BufferAttribute=X;b.IntType=1013;b.InterleavedBuffer=zr;b.InterleavedBufferAttribute=iz;b.Interpolant=Ar;b.InterpolateDiscrete=2300;b.InterpolateLinear=2301;b.InterpolateSmooth=2302;b.InvertStencilOp=5386;b.JSONLoader=function(){console.error("THREE.JSONLoader has been removed.")};b.KeepStencilOp=7680;
b.KeyframeTrack=Ko;b.LOD=cI;b.LatheBufferGeometry=bX;b.LatheGeometry=Z$;b.Layers=UV;b.LensFlare=function(){console.error("THREE.LensFlare has been moved to /examples/jsm/objects/Lensflare.js")};b.LessDepth=2;b.LessEqualDepth=3;b.LessEqualStencilFunc=515;b.LessStencilFunc=513;b.Light=ll;b.LightProbe=Ls;b.Line=Is;b.Line3=vaa;b.LineBasicMaterial=Pl;b.LineCurve=Hq;b.LineCurve3=bu;b.LineDashedMaterial=LB;b.LineLoop=aO;b.LinePieces=1;b.LineSegments=Up;b.LineStrip=0;b.LinearEncoding=3E3;b.LinearFilter=1006;
b.LinearInterpolant=jI;b.LinearMipMapLinearFilter=1008;b.LinearMipMapNearestFilter=1007;b.LinearMipmapLinearFilter=1008;b.LinearMipmapNearestFilter=1007;b.LinearToneMapping=1;b.Loader=Jk;b.LoaderUtils=pX;b.LoadingManager=jW;b.LogLuvEncoding=3003;b.LoopOnce=2200;b.LoopPingPong=2202;b.LoopRepeat=2201;b.LuminanceAlphaFormat=1025;b.LuminanceFormat=1024;b.MOUSE={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2};b.Material=M;b.MaterialLoader=tO;b.Math=ai;b.MathUtils=ai;b.Matrix3=Tp;b.Matrix4=fj;b.MaxEquation=
104;b.Mesh=gb;b.MeshBasicMaterial=N;b.MeshDepthMaterial=cz;b.MeshDistanceMaterial=dz;b.MeshFaceMaterial=function(u){console.warn("THREE.MeshFaceMaterial has been removed. Use an Array instead.");return u};b.MeshLambertMaterial=JB;b.MeshMatcapMaterial=KB;b.MeshNormalMaterial=IB;b.MeshPhongMaterial=mz;b.MeshPhysicalMaterial=lz;b.MeshStandardMaterial=Jv;b.MeshToonMaterial=HB;b.MinEquation=103;b.MirroredRepeatWrapping=1002;b.MixOperation=1;b.MultiMaterial=function(u){void 0===u&&(u=[]);console.warn("THREE.MultiMaterial has been removed. Use an Array instead.");
u.isMultiMaterial=!0;u.materials=u;u.clone=function(){return u.slice()};return u};b.MultiplyBlending=4;b.MultiplyOperation=0;b.NearestFilter=1003;b.NearestMipMapLinearFilter=1005;b.NearestMipMapNearestFilter=1004;b.NearestMipmapLinearFilter=1005;b.NearestMipmapNearestFilter=1004;b.NeverDepth=0;b.NeverStencilFunc=512;b.NoBlending=0;b.NoColors=0;b.NoToneMapping=0;b.NormalAnimationBlendMode=2500;b.NormalBlending=1;b.NotEqualDepth=7;b.NotEqualStencilFunc=517;b.NumberKeyframeTrack=zE;b.Object3D=E;b.ObjectLoader=
Ira;b.ObjectSpaceNormalMap=1;b.OctahedronBufferGeometry=UO;b.OctahedronGeometry=$$;b.OneFactor=201;b.OneMinusDstAlphaFactor=207;b.OneMinusDstColorFactor=209;b.OneMinusSrcAlphaFactor=205;b.OneMinusSrcColorFactor=203;b.OrthographicCamera=DE;b.PCFShadowMap=1;b.PCFSoftShadowMap=2;b.PMREMGenerator=hsa;b.ParametricBufferGeometry=yE;b.ParametricGeometry=iI;b.Particle=function(u){console.warn("THREE.Particle has been renamed to THREE.Sprite.");return new aI(u)};b.ParticleBasicMaterial=function(u){console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial.");
return new $t(u)};b.ParticleSystem=function(u,z){console.warn("THREE.ParticleSystem has been renamed to THREE.Points.");return new vE(u,z)};b.ParticleSystemMaterial=function(u){console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial.");return new $t(u)};b.Path=eu;b.PerspectiveCamera=kc;b.Plane=Iv;b.PlaneBufferGeometry=TN;b.PlaneGeometry=aaa;b.PlaneHelper=fsa;b.PointCloud=function(u,z){console.warn("THREE.PointCloud has been renamed to THREE.Points.");return new vE(u,z)};
b.PointCloudMaterial=function(u){console.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial.");return new $t(u)};b.PointLight=pO;b.PointLightHelper=Zra;b.Points=vE;b.PointsMaterial=$t;b.PolarGridHelper=bsa;b.PolyhedronBufferGeometry=PB;b.PolyhedronGeometry=baa;b.PositionalAudio=Mra;b.PropertyBinding=jp;b.PropertyMixer=wW;b.QuadraticBezierCurve=cu;b.QuadraticBezierCurve3=Lv;b.Quaternion=hp;b.QuaternionKeyframeTrack=kI;b.QuaternionLinearInterpolant=iO;b.REVISION="121";b.RGBADepthPacking=
3201;b.RGBAFormat=1023;b.RGBAIntegerFormat=1033;b.RGBA_ASTC_10x10_Format=37819;b.RGBA_ASTC_10x5_Format=37816;b.RGBA_ASTC_10x6_Format=37817;b.RGBA_ASTC_10x8_Format=37818;b.RGBA_ASTC_12x10_Format=37820;b.RGBA_ASTC_12x12_Format=37821;b.RGBA_ASTC_4x4_Format=37808;b.RGBA_ASTC_5x4_Format=37809;b.RGBA_ASTC_5x5_Format=37810;b.RGBA_ASTC_6x5_Format=37811;b.RGBA_ASTC_6x6_Format=37812;b.RGBA_ASTC_8x5_Format=37813;b.RGBA_ASTC_8x6_Format=37814;b.RGBA_ASTC_8x8_Format=37815;b.RGBA_BPTC_Format=36492;b.RGBA_ETC2_EAC_Format=
37496;b.RGBA_PVRTC_2BPPV1_Format=35843;b.RGBA_PVRTC_4BPPV1_Format=35842;b.RGBA_S3TC_DXT1_Format=33777;b.RGBA_S3TC_DXT3_Format=33778;b.RGBA_S3TC_DXT5_Format=33779;b.RGBDEncoding=3006;b.RGBEEncoding=3002;b.RGBEFormat=1023;b.RGBFormat=1022;b.RGBIntegerFormat=1032;b.RGBM16Encoding=3005;b.RGBM7Encoding=3004;b.RGB_ETC1_Format=36196;b.RGB_ETC2_Format=37492;b.RGB_PVRTC_2BPPV1_Format=35841;b.RGB_PVRTC_4BPPV1_Format=35840;b.RGB_S3TC_DXT1_Format=33776;b.RGFormat=1030;b.RGIntegerFormat=1031;b.RawShaderMaterial=
cx;b.Ray=EE;b.Raycaster=AW;b.RectAreaLight=sO;b.RedFormat=1028;b.RedIntegerFormat=1029;b.ReinhardToneMapping=2;b.RepeatWrapping=1E3;b.ReplaceStencilOp=7681;b.ReverseSubtractEquation=102;b.RingBufferGeometry=cX;b.RingGeometry=caa;b.SRGB8_ALPHA8_ASTC_10x10_Format=37851;b.SRGB8_ALPHA8_ASTC_10x5_Format=37848;b.SRGB8_ALPHA8_ASTC_10x6_Format=37849;b.SRGB8_ALPHA8_ASTC_10x8_Format=37850;b.SRGB8_ALPHA8_ASTC_12x10_Format=37852;b.SRGB8_ALPHA8_ASTC_12x12_Format=37853;b.SRGB8_ALPHA8_ASTC_4x4_Format=37840;b.SRGB8_ALPHA8_ASTC_5x4_Format=
37841;b.SRGB8_ALPHA8_ASTC_5x5_Format=37842;b.SRGB8_ALPHA8_ASTC_6x5_Format=37843;b.SRGB8_ALPHA8_ASTC_6x6_Format=37844;b.SRGB8_ALPHA8_ASTC_8x5_Format=37845;b.SRGB8_ALPHA8_ASTC_8x6_Format=37846;b.SRGB8_ALPHA8_ASTC_8x8_Format=37847;b.Scene=RW;b.SceneUtils={createMultiMaterialObject:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")},detach:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")},attach:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")}};
b.ShaderChunk=gj;b.ShaderLib=Yt;b.ShaderMaterial=Na;b.ShadowMaterial=GB;b.Shape=nz;b.ShapeBufferGeometry=dX;b.ShapeGeometry=eX;b.ShapePath=rW;b.ShapeUtils=lx;b.ShortType=1011;b.Skeleton=ZN;b.SkeletonHelper=xaa;b.SkinnedMesh=YN;b.SmoothShading=2;b.Sphere=gx;b.SphereBufferGeometry=VO;b.SphereGeometry=daa;b.Spherical=Wra;b.SphericalHarmonics3=n$;b.Spline=EW;b.SplineCurve=du;b.SplineCurve3=x$;b.SpotLight=oO;b.SpotLightHelper=Yra;b.Sprite=aI;b.SpriteMaterial=jz;b.SrcAlphaFactor=204;b.SrcAlphaSaturateFactor=
210;b.SrcColorFactor=202;b.StaticCopyUsage=35046;b.StaticDrawUsage=35044;b.StaticReadUsage=35045;b.StereoCamera=o$;b.StreamCopyUsage=35042;b.StreamDrawUsage=35040;b.StreamReadUsage=35041;b.StringKeyframeTrack=jO;b.SubtractEquation=101;b.SubtractiveBlending=3;b.TOUCH={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3};b.TangentSpaceNormalMap=0;b.TetrahedronBufferGeometry=fX;b.TetrahedronGeometry=eaa;b.TextBufferGeometry=gX;b.TextGeometry=faa;b.Texture=r;b.TextureLoader=mO;b.TorusBufferGeometry=hX;b.TorusGeometry=
gaa;b.TorusKnotBufferGeometry=iX;b.TorusKnotGeometry=haa;b.Triangle=Xt;b.TriangleFanDrawMode=2;b.TriangleStripDrawMode=1;b.TrianglesDrawMode=0;b.TubeBufferGeometry=jX;b.TubeGeometry=iaa;b.UVMapping=300;b.Uint16Attribute=function(u,z){console.warn("THREE.Uint16Attribute has been removed. Use new THREE.Uint16BufferAttribute() instead.");return new K(u,z)};b.Uint16BufferAttribute=K;b.Uint32Attribute=function(u,z){console.warn("THREE.Uint32Attribute has been removed. Use new THREE.Uint32BufferAttribute() instead.");
return new T(u,z)};b.Uint32BufferAttribute=T;b.Uint8Attribute=function(u,z){console.warn("THREE.Uint8Attribute has been removed. Use new THREE.Uint8BufferAttribute() instead.");return new ea(u,z)};b.Uint8BufferAttribute=ea;b.Uint8ClampedAttribute=function(u,z){console.warn("THREE.Uint8ClampedAttribute has been removed. Use new THREE.Uint8ClampedBufferAttribute() instead.");return new Aa(u,z)};b.Uint8ClampedBufferAttribute=Aa;b.Uniform=raa;b.UniformsLib=eg;b.UniformsUtils=W9;b.UnsignedByteType=1009;
b.UnsignedInt248Type=1020;b.UnsignedIntType=1014;b.UnsignedShort4444Type=1017;b.UnsignedShort5551Type=1018;b.UnsignedShort565Type=1019;b.UnsignedShortType=1012;b.VSMShadowMap=3;b.Vector2=Ve;b.Vector3=qc;b.Vector4=Qk;b.VectorKeyframeTrack=AE;b.Vertex=function(u,z,t){console.warn("THREE.Vertex has been removed. Use THREE.Vector3 instead.");return new qc(u,z,t)};b.VertexColors=2;b.VideoTexture=gW;b.WebGL1Renderer=cW;b.WebGLCubeRenderTarget=Qc;b.WebGLMultisampleRenderTarget=y;b.WebGLRenderTarget=v;b.WebGLRenderTargetCube=
function(u,z,t){console.warn("THREE.WebGLRenderTargetCube( width, height, options ) is now WebGLCubeRenderTarget( size, options ).");return new Qc(u,t)};b.WebGLRenderer=ZH;b.WebGLUtils=Z9;b.WireframeGeometry=kX;b.WireframeHelper=function(u,z){console.warn("THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead.");return new Up(new kX(u.geometry),new Pl({color:void 0!==z?z:16777215}))};b.WrapAroundEnding=2402;b.XHRLoader=function(u){console.warn("THREE.XHRLoader has been renamed to THREE.FileLoader.");
return new Ks(u)};b.ZeroCurvatureEnding=2400;b.ZeroFactor=200;b.ZeroSlopeEnding=2401;b.ZeroStencilOp=0;b.sRGBEncoding=3001;Object.defineProperty(b,"__esModule",{value:!0})});return TH}(),ui=lively.FreezerRuntime.recorderFor("WebGLCanvas/index.js");ui.Canvas=SH;ui.THREE=isa;var kp=ui.THREE;ui.Scene=kp.Scene;ui.SpotLight=kp.SpotLight;ui.MeshBasicMaterial=kp.MeshBasicMaterial;ui.BackSide=kp.BackSide;ui.ImageUtils=kp.ImageUtils;ui.Color=kp.Color;ui.MeshPhongMaterial=kp.MeshPhongMaterial;ui.SphereGeometry=
kp.SphereGeometry;ui.Mesh=kp.Mesh;ui.DirectionalLight=kp.DirectionalLight;ui.AmbientLight=kp.AmbientLight;ui.WebGLRenderer=kp.WebGLRenderer;ui.PerspectiveCamera=kp.PerspectiveCamera;ui.TextureLoader=kp.TextureLoader;ui.BoxGeometry=kp.BoxGeometry;ui.MeshNormalMaterial=kp.MeshNormalMaterial;ui.easings=rr;var Kaa=function(b){var e=lively.FreezerRuntime.recorderFor("WebGLCanvas/index.js"),m=e.hasOwnProperty("WebGLCanvas")&&"function"===typeof e.WebGLCanvas?e.WebGLCanvas:e.WebGLCanvas=function(a){a&&a[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return dc(m,b,[{key:"context",get:function(){return navigator.webdriver?this._canvas&&this._canvas.getContext("2d"):this._canvas&&this._canvas.getContext(this.contextType,{preserveDrawingBuffer:!0})}},{key:"restoreContent",value:function(a,g){this.renderer&&a&&a!==g&&(this.owner.context.drawImage(this.renderer.getContext().canvas,0,0),this.renderer=new ui.WebGLRenderer({context:this.context,antialiasing:!0}),this.renderer.setSize(this.width,
this.height))}},{key:"onExtentChanged",value:function(){}},{key:"relayout",value:function(){var a=this;this.renderLoop&&(setTimeout(function(){return a.owner.context.drawImage(a.renderer.getContext().canvas,0,0)}),this.renderer.setSize(this.width,this.height),this.camera.aspect=this.width/this.height,this.camera.updateProjectionMatrix())}},{key:"stopAnimation",value:function(){this.renderLoop&&(cancelAnimationFrame(this.renderLoop),this.renderer.dispose())}},{key:"renderGlobe",value:function(){var a=
this;this.stopAnimation();this.withContextDo(function(g){var l=a.width,r=a.height,v=new ui.Scene,y=new ui.PerspectiveCamera(45,l/r,.01,1E3);y.position.z=1;y.position.x=.4;y.position.y=.25;a.camera=y;v.add(new ui.AmbientLight(3355443));var A=new ui.SpotLight(16777215,1,200,Math.PI/2,1);A.position.set(1,1,0);A.castShadow=!0;A.shadow.mapSize.width=1024;A.shadow.mapSize.height=1024;A.shadow.camera.near=10;A.shadow.camera.far=100;A.shadow.bias=.01;v.add(A);var E=function(H,I){var M=new ui.TextureLoader;
return new ui.Mesh(new ui.SphereGeometry(H,I,I),new ui.MeshPhongMaterial({map:M.load("assets/globe-textures/2_no_clouds_4k.jpg"),bumpMap:M.load("assets/globe-textures/elev_bump_4k.jpg"),bumpScale:.005,shininess:5,specularMap:M.load("assets/globe-textures/water_4k.png"),specular:new ui.Color("grey")}))}(.5,32);E.rotation.y=5.2;v.add(E);var F=function(H,I){var M=new ui.TextureLoader;return new ui.Mesh(new ui.SphereGeometry(H+.003,I,I),new ui.MeshPhongMaterial({map:M.load("assets/globe-textures/fair_clouds_4k.png"),
transparent:!0}))}(.5,32);F.rotation.y=5.2;v.add(F);A=function(H,I){var M=new ui.TextureLoader;return new ui.Mesh(new ui.SphereGeometry(H,I,I),new ui.MeshBasicMaterial({map:M.load("assets/globe-textures//galaxy_starfield.png"),side:ui.BackSide}))}(90,64);v.add(A);a.renderer=new ui.WebGLRenderer({context:g,antialias:!0});a.renderer.setSize(l,r);a.limitLoop(function(){if(!document.body.contains(a.renderer.getContext().canvas)){if(a.removeScheduled)return;a.removeScheduled=setTimeout(function(){document.body.contains(a.renderer.getContext().canvas)||
a.stopAnimation()},5E3)}E.rotation.y+=5E-4;F.rotation.y+=5E-4;a.renderer.render(v,y)});a.camera.position.z=1;a.camera.position.x=.4;a.camera.position.y=.25})}},{key:"limitLoop",value:function(a,g){var l=this,r=(new Date).getTime(),v=this,y;return(y=function(A){v.renderLoop=requestAnimationFrame(y);A=(new Date).getTime();var E=A-r,F=1E3/(g||l.fps);E>F&&(r=A-E%F,a(),v.firstFrameRendered=!0)})(0)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"WebGLCanvas"}},{key:"properties",get:function(){return{fps:{}}}}],
e,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"WebGLCanvas",version:"0.1.1-56"}}},{start:407,end:6004})}(ui.Canvas);Kaa=ui.WebGLCanvas;ui.default=Kaa;var ni=lively.FreezerRuntime.recorderFor("lively.components/buttons.js");ni.Morph=Ll;ni.morph=sa;ni.Icon=Np;ni.touchInputDevice=sr;ni.Rectangle=He;ni.LinearGradient=Bn;ni.Color=Fg;
ni.pt=xi;ni.signal=Wl;ni.connect=rl;ni.arr=$f;ni.obj=Ag;ni.Closure=Rj;var TE=Da("b4",function(b){var e=lively.FreezerRuntime.recorderFor("lively.components/buttons.js"),m=e.hasOwnProperty("Button")&&"function"===typeof e.Button?e.Button:e.Button=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return dc(m,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){dc._get(Object.getPrototypeOf(m.prototype),Symbol.for("lively-instance-initialize"),
this).call(this,a)}},{key:"isButton",get:function(){return!0}},{key:"enable",value:function(){this.deactivated=!1}},{key:"disable",value:function(){this.deactivated=!0}},{key:"onChange",value:function(a){var g=a.prop;if(this.label)switch(g){case "extent":case "fontSize":case "fontFamily":this.relayout();break;case "padding":this.fit()}return dc._get(Object.getPrototypeOf(m.prototype),"onChange",this).call(this,a)}},{key:"onSubmorphChange",value:function(a,g){g===this.labelMorph&&"extent"===a.prop&&
this.relayout();return dc._get(Object.getPrototypeOf(m.prototype),"onSubmorphChange",this).call(this,a,g)}},{key:"fitLabelMorph",value:function(){var a=this;this.labelMorph.whenFontLoaded().then(function(){a.labelMorph.invalidateTextLayout();a.labelMorph.fit()})}},{key:"relayout",value:function(){var a=this.labelMorph;if(a&&!this._relayouting){this._relayouting=!0;try{var g=this.padding,l=g.top(),r=g.bottom(),v=g.left(),y=g.right(),A=a.height+l+r,E=a.width+v+y;A>this.height&&(this.height=A);E>this.width&&
(this.width=E);var F=this.innerBounds().insetByRect(g);a.center=F.center().subPt(this.origin)}finally{this._relayouting=!1}}}},{key:"fit",value:function(){var a=this.padding,g=this.labelMorph;g.fit();this.extent=a.bottomLeft().addPt(a.bottomRight()).addPt(g.extent);this.relayout();return this}},{key:"trigger",value:function(){try{ni.signal(this,"fire"),"function"==typeof this.action&&this.action()}catch(g){var a=this.world();a?a.logError(g):console.error(g)}}},{key:"considerPress",value:function(a){return ni.touchInputDevice?
!0:this.innerBoundsContainsPoint(a.positionIn(this))}},{key:"onMouseDown",value:function(a){dc._get(Object.getPrototypeOf(m.prototype),"onMouseDown",this).call(this,a);a.isAltDown()||this.deactivated||!this.considerPress(a)||(this.pressed={originalFill:this.fill})}},{key:"onMouseUp",value:function(a){dc._get(Object.getPrototypeOf(m.prototype),"onMouseUp",this).call(this,a);a.isClickTarget(this)&&this.pressed&&(this.trigger(),this.pressed=null)}},{key:"onDragStart",value:function(a){ni.touchInputDevice?
(this.draggable=!0,this.pressed=null):dc._get(Object.getPrototypeOf(m.prototype),"onDragStart",this).call(this,a)}},{key:"onDrag",value:function(a){}},{key:"onHoverOut",value:function(a){!ni.touchInputDevice&&this.pressed&&a.isClickTarget(this)&&(this.pressed=null)}},{key:"onHoverIn",value:function(a){ni.touchInputDevice||this.deactivated||!a.isClickTarget(this)||(this.pressed={originalFill:this.fill})}},{key:"interactivelyChangeLabel",value:function(){var a=this,g;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){if(1==
l.nextAddress)return l.yield(a.world().prompt("edit button label",{input:a.labelMorph.textString,historyId:"lively.morphic-button-edit-label-hist"}),2);g=l.yieldResult;"string"===typeof g&&(a.label=g);l.jumpToEnd()})}},{key:"menuItems",value:function(){var a=this,g=dc._get(Object.getPrototypeOf(m.prototype),"menuItems",this).call(this);g.unshift({isDivider:!0});g.unshift(["change label",function(){return a.interactivelyChangeLabel()}]);return g}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Button"}},
{key:"properties",get:function(){return{padding:{isStyleProp:!0,defaultValue:ni.Rectangle.inset(5,2)},draggable:{defaultValue:!1},extent:{defaultValue:ni.pt(100,20)},borderColor:{defaultValue:ni.Color.gray},borderWidth:{defaultValue:1},borderRadius:{defaultValue:5},nativeCursor:{defaultValue:"pointer"},fill:{defaultValue:new ni.LinearGradient({stops:[{offset:0,color:ni.Color.white},{offset:1,color:ni.Color.rgb(236,240,241)}],vector:0})},deactivated:{group:"button",defaultValue:!1,after:["labelMorph"],
set:function(a){this.setProperty("deactivated",a);this.nativeCursor=a?"not-allowed":"pointer";this.labelMorph.opacity=a?.3:1}},pressed:{group:"_internal",defaultValue:null,set:function(a){this.getProperty("pressed");this.setProperty("pressed",a)}},fontSize:{group:"button styling",derived:!0,type:"Number",min:4,isStyleProp:!0,after:["label"],set:function(a){this.labelMorph.fontSize=a;this.labelMorph._parametrizedProps&&(this.labelMorph._parametrizedProps.fontSize=a)},get:function(){return this.labelMorph.fontSize}},
fontColor:{group:"button styling",derived:!0,isStyleProp:!0,after:["labelMorph"],set:function(a){this.labelMorph.fontColor=a},get:function(){return this.labelMorph.fontColor}},labelMorph:{group:"_internal",after:["submorphs"],serialize:!1,initialize:function(){this.labelMorph=this.getSubmorphNamed("label")||this.addMorph({type:"label",name:"label",value:"no label yet"})},get:function(){return this.getSubmorphNamed("label")},set:function(a){var g=this.labelMorph;g&&g.remove();a.name="label";a.reactsToPointer=
!1;this.addMorphAt(a,0)}},labelWithTextAttributes:{group:"_internal",after:["labelMorph"],derived:!0,get:function(){return this.labelMorph.textAndAttributes},set:function(a){this.labelMorph.textAndAttributes=a}},label:{group:"button",after:["labelMorph"],isStyleProp:!0,type:"RichText",set:function(a){a.isMorph?(this.setProperty("label",a.value),this.labelMorph=a):(this.setProperty("label",a),this.labelMorph.value=a,this.labelMorph._parametrizedProps&&(this.labelMorph._parametrizedProps.value=a));
this.fitLabelMorph()}},fire:{group:"button",derived:!0,readOnly:!0,isSignal:!0},action:{serialize:!1}}}}],e,{pathInPackage:function(){return"buttons.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:251,end:8297})}(ni.Morph));ni.Button=TE;ni.Button=TE;ni.Button=TE;var CI=function(b){var e=lively.FreezerRuntime.recorderFor("lively.components/buttons.js"),
m=e.hasOwnProperty("RadioButton")&&"function"===typeof e.RadioButton?e.RadioButton:e.RadioButton=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return dc(m,b,[{key:"getMaster",value:function(a){return a?"styleguide://SystemPrompts/prompts/buttons/selection/selected":"styleguide://SystemPrompts/prompts/buttons/selection/unselected"}},{key:"reset",value:function(){var a=this.indicator;a.borderWidth=1;a.borderColor=ni.Color.gray;
this.selected=!1;ni.connect(a,"onMouseUp",this,"select")}},{key:"morph",get:function(){var a=this.indicator;return this.submorphs.find(function(g){return g!==a})}},{key:"morph",set:function(a){var g=this.indicator;this.submorphs.forEach(function(l){l!==g&&l.remove()});a.position=ni.pt(50,0);this.addMorph(a)}},{key:"value",get:function(){if(!this.valueFn){try{var a=JSON.parse(this.valueFunctionString)}catch(g){a=this.valueFunctionString}this.valueFn=ni.Closure.fromSource(a).recreateFunc()}return this.morph?
this.valueFn(this.morph):void 0}},{key:"onMouseDown",value:function(a){this.select()}},{key:"select",value:function(){this.selected=!0;this.owner.setSelection(this)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"RadioButton"}},{key:"properties",get:function(){return{indicator:{get:function(){return this.getSubmorphNamed("indicator")}},master:{after:["selected"],initialize:function(){this.master={auto:this.getMaster(this.selected)}}},selectionColor:{},selectionStyle:{},selected:{after:["indicator"],
defaultValue:!1,set:function(a){var g=this;this.whenRendered().then(function(l){g.master={auto:g.getMaster(a)}});this.setProperty("selected",!!a)}},valueFunctionString:{defaultValue:'"function (morph) { return morph.value; }"',set:function(a){this.setProperty("valueFunctionString",a.toString());this.valueFn=void 0}},submorphs:{initialize:function(){this.submorphs=[{type:"ellipse",name:"indicator"}]}}}}}],e,{pathInPackage:function(){return"buttons.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:8306,end:10657})}(ni.Morph);ni.RadioButton=CI;ni.RadioButton=CI;ni.RadioButton=CI;var DI=function(b){var e=lively.FreezerRuntime.recorderFor("lively.components/buttons.js"),m=e.hasOwnProperty("RadioButtonGroup")&&"function"===typeof e.RadioButtonGroup?e.RadioButtonGroup:e.RadioButtonGroup=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return dc(m,b,[{key:"reset",value:function(){this.submorphs.forEach(function(a){return a.reset()});this.layout.layoutableSubmorphs[0].selected=!0}},{key:"removeAllButtons",value:function(){this.removeAllMorphs();this.height=10}},{key:"addButton",value:function(a,g){var l=new ni.RadioButton;l.reset();l.morph=a;void 0!=g&&(l.internalValue=g,l.valueFunctionString="function (morph) { return morph.owner.internalValue; }");this.addMorph(l);return l}},{key:"setSelection",value:function(a){this.submorphs.forEach(function(g){g!==
a&&(g.selected=!1)});a.selected=!0}},{key:"selectedButton",get:function(){return this.submorphs.find(function(a){return a.selected})}},{key:"value",get:function(){var a=this.selectedButton;return a?a.value:null}},{key:"value",set:function(a){var g=this.submorphs.find(function(l){try{return l.value===a}catch(r){return!1}});g?g.select():this.setSelection(null)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"RadioButtonGroup"}},{key:"properties",get:function(){return{choices:{derived:!0,
defaultValue:[],get:function(){return this.submorphs.map(function(a){return a.value})},set:function(a){var g=this;this.removeAllButtons();if(ni.obj.isArray(a)){if(0==a.length)return;a.forEach(function(l){g.addButton(ni.morph({name:"label",type:"label",value:l,reactsToPointer:!1}))})}else{a=[].concat($jscomp.arrayFromIterable(a.entries()));if(0==a.length)return;a.forEach(function(l){var r=$jscomp.makeIterator(l);l=r.next().value;r=r.next().value;g.addButton(ni.morph({name:"label",type:"label",value:l,
reactsToPointer:!1}),r)})}this.submorphs[0].master.whenApplied().then(function(){return g.setSelection(g.submorphs[0])})},value:{derived:!0,after:["submorphs"],get:function(){var a=this.selectedButton;return a?a.value:null},set:function(a){var g=this.submorphs.find(function(l){try{return l.value===a}catch(r){return!1}});g?g.select():this.setSelection(null)}}}}}}],e,{pathInPackage:function(){return"buttons.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:10666,end:13552})}(ni.Morph);ni.RadioButtonGroup=DI;ni.RadioButtonGroup=DI;ni.RadioButtonGroup=DI;var jsa=Object.freeze({__proto__:null,Button:TE,RadioButton:CI,RadioButtonGroup:DI}),Ud=lively.FreezerRuntime.recorderFor("lively.components/list.js");Ud.asItem=sL;Ud.Morph=Ll;Ud.Text=Vt;Ud.StyleSheet=Hv;Ud.Label=Wt;Ud.Icon=Np;Ud.morph=sa;Ud.touchInputDevice=sr;Ud.pt=xi;Ud.LinearGradient=Bn;Ud.Color=Fg;Ud.Rectangle=He;Ud.rect=
zm;Ud.arr=$f;Ud.Path=Ah;Ud.string=pi;Ud.signal=Wl;Ud.once=$q;Ud.Button=TE;Ud.bowser=xs;Ud.asItem=sL;Ud.asItem=sL;var eP=function(b){var e=lively.FreezerRuntime.recorderFor("lively.components/list.js"),m=e.hasOwnProperty("ListItemMorph")&&"function"===typeof e.ListItemMorph?e.ListItemMorph:e.ListItemMorph=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return dc(m,b,[{key:"displayItem",value:function(a,g,l,r,v,y,A){y=void 0===
y?!1:y;var E=a.morph,F=E?"":a.label||a.string||"no item.string";a.annotation?this.valueAndAnnotation={value:F,annotation:a.annotation}:"string"===typeof F?this.textString=F:this.value=F;this.tooltip=this.tooltip||this.textString;this.itemIndex=g;this.position=v;if(A){g=A.fontFamily;v=A.selectionColor;F=A.selectionFontColor;var H=A.nonSelectionFontColor,I=A.borderRadius,M=A.fontSize;A=A.padding;F&&this.selectionFontColor!==F&&(this.selectionFontColor=F);H&&this.nonSelectionFontColor!==H&&(this.nonSelectionFontColor=
H);v&&this.selectionColor!==v&&(this.selectionColor=v);I&&I!=this.borderRadius&&(this.borderRadius=I);M&&this.fontSize!==M&&(this.fontSize=M);g&&this.fontFamily!==g&&(this.fontFamily=g);A&&!this.padding.equals(A)&&(this.padding=A)}a.autoFit&&(E.width=l);this.extent=Ud.pt(E?Math.max(E.width,l):l,r);E?(a=E.getTransform().copy(),this.submorphs=[E],E.setTransform(a),E.position=Ud.pt(0,0)):this.submorphs.length&&(this.submorphs=[]);this.isSelected=y}},{key:"onDragStart",value:function(a){var g=this.owner.owner;
this._dragState={sourceIsSelected:this.isSelected,source:this,itemsTouched:[]};if(!g.multiSelect||!g.multiSelectViaDrag)g.onItemMorphDragged(a,this)}},{key:"onMouseDown",value:function(a){dc._get(Object.getPrototypeOf(m.prototype),"onMouseDown",this).call(this,a);this.owner.owner.clickOnItem(a)}},{key:"onDrag",value:function(a){var g=this.owner.owner;if(g.multiSelect&&g.multiSelectViaDrag){a=a.hand.morphBeneath(a.position);var l=g.selectedIndexes,r=g.itemMorphs;a!==this&&r.includes(a)&&(this._dragState.sourceIsSelected&&
!a.isSelected?(Ud.arr.pushIfNotIncluded(l,a.itemIndex),g.selectedIndexes=l):!this._dragState.sourceIsSelected&&a.isSelected&&(Ud.arr.remove(l,a.itemIndex),g.selectedIndexes=l))}}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ListItemMorph"}},{key:"properties",get:function(){return{clipMode:{defaultValue:"hidden"},autofit:{defaultValue:!1},isSelected:{defaultValue:!1},draggable:{defaultValue:!Ud.touchInputDevice},fill:{derived:!0,get:function(){return Ud.touchInputDevice&&this.pressed?
Ud.Color.gray.withA(.5):this.isSelected?this.selectionColor:Ud.Color.transparent}},itemIndex:{defaultValue:void 0},selectionFontColor:{isStyleProp:!0,defaultValue:Ud.Color.white},selectionColor:{type:"ColorGradient",isStyleProp:!0,defaultValue:Ud.Color.blue},nonSelectionFontColor:{isStyleProp:!0,defaultValue:Ud.Color.rgbHex("333")},fontColor:{derived:!0,get:function(){return this.isSelected?this.selectionFontColor:this.nonSelectionFontColor}}}}}],e,{pathInPackage:function(){return"list.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:900,end:5139})}(Ud.Label);Ud.ListItemMorph=eP;Ud.ListItemMorph=eP;Ud.ListItemMorph=eP;(function(b){var e=lively.FreezerRuntime.recorderFor("lively.components/list.js"),m=e.hasOwnProperty("ListScroller")&&"function"===typeof e.ListScroller?e.ListScroller:e.ListScroller=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return dc(m,b,[{key:"onScroll",value:function(a){return this.owner.update()}},{key:"onMouseDown",value:function(a){var g=this,l=this.scroll.y;if(Ud.touchInputDevice){var r=this.owner.itemForClick(a);r&&(r.pressed=!0,r.makeDirty(),setTimeout(function(){r.pressed=!1;if(0==l-g.scroll.y)return g.owner.clickOnItem(a)},300))}else return this.owner.clickOnItem(a)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ListScroller"}},{key:"properties",get:function(){return{name:{defaultValue:"scroller"},
fill:{defaultValue:Ud.Color.transparent},clipMode:{defaultValue:"auto"},scrollbar:{derived:!0,readOnly:!0,after:["submorphs"],get:function(){return this.submorphs[0]}},submorphs:{initialize:function(){this.submorphs=[{name:"scrollbar"}]}}}}}],e,{pathInPackage:function(){return"list.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:5141,
end:6080})})(Ud.Morph);Ud.listCommands=[{name:"page up",exec:function(b){b.gotoIndex(Math.max(0,b.selectedIndex-Math.round(b.height/b.itemHeight)));return!0}},{name:"page down",exec:function(b){b.gotoIndex(Math.min(b.items.length-1,b.selectedIndex+Math.round(b.height/b.itemHeight)));return!0}},{name:"goto first item",exec:function(b){b.gotoIndex(0);return!0}},{name:"goto last item",exec:function(b){b.gotoIndex(b.items.length-1);return!0}},{name:"arrow up",exec:function(b){b.gotoIndex(b.indexUp());
return!0}},{name:"arrow down",exec:function(b){b.gotoIndex(b.indexDown());return!0}},{name:"select up",exec:function(b){var e=b.selectedIndexes;if(!b.multiSelect||!e.length)return b.execCommand("arrow up");var m=e[0];if("number"!==typeof m)b.selectedIndexes=[m];else{var a=b.indexUp(m);e.includes(m)&&e.includes(a)?b.selectedIndexes=e.filter(function(g){return g!==m}):b.selectedIndexes=[a].concat(e.filter(function(g){return g!==a}))}return!0}},{name:"select down",exec:function(b){var e=b.selectedIndexes;
if(!b.multiSelect||!e.length)return b.execCommand("arrow down");var m=e[0],a=b.indexDown(m);e.includes(m)&&e.includes(a)?b.selectedIndexes=e.filter(function(g){return g!==m}):b.selectedIndexes=[a].concat(e.filter(function(g){return g!==a}));return!0}},{name:"select all",exec:function(b){b.selectedIndexes=Ud.arr.range(b.items.length-1,0);b.scrollIndexIntoView(b.selectedIndexes[0]);return!0}},{name:"select via filter",exec:function(b){var e,m,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(g){if(1==
g.nextAddress)return e=b.selectedIndex||0,g.yield(b.world().filterableListPrompt("Select item",b.items,{preselect:e,requester:b.getWindow()||b,itemPadding:Ud.Rectangle.inset(0,2),multiSelect:!0}),2);m=g.yieldResult;a=m.selected;a.length&&(b.multiSelect?b.selections=a:b.selection=a[0],b.scrollSelectionIntoView(),b.update());return g.return(!0)})}},{name:"realign top-bottom-center",exec:function(b){if(b.selection){var e=b.padding,m=b.itemHeight,a=b.scroll,g=a.x;a=a.y;var l=Ud.pt(0,b.selectedIndex*m);
e=b.height-m-e.top()-e.bottom();a=2>Math.abs(l.y-a)?l.y-e:2>Math.abs(l.y-a-.5*e)?l.y:l.y-.5*e;b.scroll=Ud.pt(g,a);return!0}}},{name:"print contents in text window",exec:function(b){var e="items of "+b.name,m=b.items.map(function(a){if("string"===typeof a)return a;var g=a.string,l=a.label;a=a.annotation;var r="";l?r="string"===typeof l?r+l:r+l.map(function(v,y){return 0==y%2?v:""}).join(""):g&&(r+=g);a&&(r+=" ",r="string"===typeof a?r+a:r+a[0]);return r}).join("\n");return b.world().execCommand("open text window",
{title:e,content:m,name:e,fontFamily:"Monaco, monospace"})}}];var UE=Da("aO",function(b){var e=lively.FreezerRuntime.recorderFor("lively.components/list.js"),m=e.hasOwnProperty("List")&&"function"===typeof e.List?e.List:e.List=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return dc(m,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){a=void 0===a?{}:a;a.bounds||a.extent||(a.extent=Ud.pt(400,360));dc._get(Object.getPrototypeOf(m.prototype),
Symbol.for("lively-instance-initialize"),this).call(this,a);this.update()}},{key:"__additionally_serialize__",value:function(a,g,l,r){var v=this;dc._get(Object.getPrototypeOf(m.prototype),"__additionally_serialize__",this).call(this,a,g,l,r);this.whenRendered().then(function(){return v.update()})}},{key:"onLoad",value:function(){this.scroller.visible=Ud.touchInputDevice}},{key:"initializeSubmorphs",value:function(a){this.submorphs=a=a||this.submorphs||[];for(var g=0;g<a.length;g++)switch(a[g].name){case "listItemContainer":var l=
a[g];continue;case "scroller":var r=a[g]}r||(r=this.addMorph(new Ud.ListScroller({draggable:!1,grabbable:!1,acceptsDrops:!1,halosEnabled:!1,name:"scroller"})));l||this.addMorph({name:"listItemContainer",fill:Ud.Color.transparent,halosEnabled:!1,reactsToPointer:!1,acceptsDrops:!1,draggable:!1});(l||r)&&this.update()}},{key:"isList",get:function(){return!0}},{key:"onChange",value:function(a){"fontFamily fontColor fontSize padding selectionFontColor selectionColor nonSelectionFontColor itemPadding items".split(" ").includes(a.prop)&&
this.update();return dc._get(Object.getPrototypeOf(m.prototype),"onChange",this).call(this,a)}},{key:"itemForClick",value:function(a){a=a.positionIn(this.world()).subPt(this.scroll);a=this.listItemContainer.morphsContainingPoint(a);return a.find(function(g){return g.isListItem})||a[0]}},{key:"clickOnItem",value:function(a){var g=this.itemForClick(a);this[2===a.state.clickCount?"onItemMorphDoubleClicked":"onItemMorphClicked"](a,g)}},{key:"connections",get:function(){return{selection:{signalOnAssignment:!1}}}},
{key:"invalidateCache",value:function(){this.manualItemHeight||this.setProperty("itemHeight",null)}},{key:"find",value:function(a){return this.items.find(function(g){return g===a||g.value===a})}},{key:"findIndex",value:function(a){return this.items.findIndex(function(g){return g===a||g.value===a})}},{key:"addItem",value:function(a){return this.addItemAt(a)}},{key:"addItemAt",value:function(a,g){var l=this;g=void 0===g?this.items.length:g;var r=this.items;g=Math.min(r.length,Math.max(0,g));r.splice(g,
0,Ud.asItem(a));this.addMethodCallChangeDoing({target:this,selector:"addItemAt",args:[a,g],undo:{target:this,selector:"removeItem",args:[a]}},function(){return l.update()})}},{key:"removeItem",value:function(a){var g=this;a=this.find(a);var l=this.items,r=l.indexOf(a);-1!==r&&(l.splice(r,1),this.addMethodCallChangeDoing({target:this,selector:"removeItem",args:[a],undo:{target:this,selector:"addItemAt",args:[a,r]}},function(){return g.update()}))}},{key:"selectItemMorph",value:function(a){this.selectedIndexes=
[a.itemIndex]}},{key:"gotoIndex",value:function(a){this.scrollIndexIntoView(this.selectedIndex=a)}},{key:"indexUp",value:function(a){a="number"===typeof a?a:this.selectedIndex;return(a||this.items.length)-1}},{key:"indexDown",value:function(a){a=void 0===a?this.selectedIndex:a;return(("number"===typeof a?a:-1)+1)%this.items.length}},{key:"update",value:function(){var a=this,g=this.items;g&&this.scroller&&this.dontRecordChangesWhile(function(){var l=a.itemHeight,r=a.itemMorphs,v=a.listItemContainer,
y=a.selectedIndexes,A=a.extent.y,E=a.fontSize,F=a.fontFamily,H=a.fontColor,I=a.padding,M=a.itemPadding,N=a.selectionColor,W=a.selectionFontColor,X=a.nonSelectionFontColor,ea=a.itemBorderRadius,Aa=a.scrollBar,Ma=a.scroller,K=a.scrollable,aa=Ma.scroll.y;I=I||Ud.Rectangle.inset(0);var T=I.top(),U=I.left(),pa=I.bottom();I=I.right();var fa=Math.max(0,Math.floor(aa/l)),oa=Math.min(g.length,fa+A/l+2);A=0;I=a.width-(U+I);r=Ud.arr.sortBy(r,function(Na){return Na.itemIndex});var gb=$jscomp.makeIterator(Ud.arr.partition(r,
function(Na){return Na.itemIndex<fa}));r=gb.next().value;var zb=gb.next().value;zb=$jscomp.makeIterator(Ud.arr.partition(zb,function(Na){return Na.itemIndex>oa-1}));gb=zb.next().value;zb=zb.next().value;r=[].concat($jscomp.arrayFromIterable(gb),$jscomp.arrayFromIterable(zb),$jscomp.arrayFromIterable(r));for(gb=0;gb<oa-fa;gb++){zb=fa+gb;var va=g[zb];if(!va){r.slice(gb).forEach(function(Na){Na.remove()});break}var ma={fontSize:E,fontFamily:F,fontColor:X||H,padding:M,borderRadius:ea||0,selectionFontColor:W,
nonSelectionFontColor:X,selectionColor:N},ta=r[gb];ta||(ta=r[gb]=v.addMorph(new Ud.ListItemMorph(ma)));ta.reactsToPointer=!K;ta.displayItem(va,zb,I,l,Ud.pt(0,l*zb),y.includes(zb),ma);A=Math.max(A,ta.width)}r.slice(oa-fa).forEach(function(Na){return Na.remove()});l=Math.max(T+pa+l*g.length,a.height);v.setBounds(Ud.pt(U,T).subXY(0,aa).extent(Ud.pt(a.width,l)));Ma.extent=a.extent;Aa.left=A-1;Ma.position=Ud.pt(0,0);Aa.extent=Ud.pt(1,l)})}},{key:"scrollSelectionIntoView",value:function(){this.selection&&
this.scrollIndexIntoView(this.selectedIndex)}},{key:"scrollIndexIntoView",value:function(a){var g=this.itemHeight,l=this.itemScroll;a=new Ud.Rectangle(0,a*g,this.width,g);g=this.innerBounds().insetByRect(this.padding).translatedBy(l);var r=0;a.bottom()>g.bottom()&&(r=a.bottom()-g.bottom());a.top()<g.top()&&(r=a.top()-g.top());this.itemScroll=l.addXY(0,r);this.update()}},{key:"onItemMorphDoubleClicked",value:function(a,g){}},{key:"onItemMorphClicked",value:function(a,g){var l=g.itemIndex;g=this.selectedIndexes;
var r=g.includes(l),v=[];if(this.multiSelect)if(a.isShiftDown())if(r)v=g.filter(function(A){return A!=l});else{a=g[0];var y="number"===typeof a?Ud.arr.range(l,a):[l];v=y.concat(g.filter(function(A){return!y.includes(A)}))}else v=this.multiSelectWithSimpleClick||a.isCommandKey()?r?g.filter(function(A){return A!=l}):[l].concat(g.filter(function(A){return A!=l})):[l];else v=[l];this.selectedIndexes=v}},{key:"onItemMorphDragged",value:function(a,g){}},{key:"onHoverIn",value:function(a){this.scrollable&&
(this.scroller.visible=!0)}},{key:"onHoverOut",value:function(a){Ud.touchInputDevice||(this.scroller.visible=!1)}},{key:"onDragStart",value:function(a){}},{key:"onDrag",value:function(a){}},{key:"keybindings",get:function(){return[{keys:"Up|Ctrl-P",command:"arrow up"},{keys:"Down|Ctrl-N",command:"arrow down"},{keys:"Shift-Up",command:"select up"},{keys:"Shift-Down",command:"select down"},{keys:{win:"Ctrl-A",mac:"Meta-A"},command:"select all"},{keys:"Alt-V|PageUp",command:"page up"},{keys:"Ctrl-V|PageDown",
command:"page down"},{keys:"Alt-Shift-,",command:"goto first item"},{keys:"Alt-Shift-.",command:"goto last item"},{keys:"Alt-Space",command:"select via filter"},{keys:"Ctrl-L",command:"realign top-bottom-center"}].concat(dc._get(Object.getPrototypeOf(m.prototype),"keybindings",this))}},{key:"commands",get:function(){return Ud.listCommands}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"List"}},{key:"properties",get:function(){return{fill:{defaultValue:Ud.Color.white},clipMode:{defaultValue:"hidden"},
selectionFontColor:{isStyleProp:!0,defaultValue:Ud.Color.white},selectionColor:{type:"ColorGradient",isStyleProp:!0,defaultValue:Ud.Color.rgb(21,101,192)},nonSelectionFontColor:{isStyleProp:!0,defaultValue:Ud.Color.rgbHex("333")},fontColor:{isStyleProp:!0,defaultValue:Ud.Color.rgbHex("333")},styleClasses:{defaultValue:["default"]},itemScroll:{derived:!0,after:["submorphs"],get:function(){return this.scroller?this.scroller.scroll:Ud.pt(0,0)},set:function(a){this.scroller&&(this.scroller.scroll=a)}},
master:{initialize:function(){this.master={auto:"styleguide://SystemWidgets/list/light"}}},extent:{set:function(a){a.eqPt(this.extent)||(this.setProperty("extent",a),this.update())}},fontFamily:{isStyleProp:!0,defaultValue:"Helvetica Neue, Arial, sans-serif",set:function(a){this.setProperty("fontFamily",a);this.invalidateCache()}},fontSize:{isStyleProp:!0,defaultValue:12,set:function(a){this.setProperty("fontSize",a);this.invalidateCache()}},padding:{isStyleProp:!0,defaultValue:Ud.Rectangle.inset(3)},
itemBorderRadius:{isStyleProp:!0,defaultValue:0,set:function(a){this.setProperty("itemBorderRadius",a);this.invalidateCache()}},itemPadding:{isStyleProp:!0,defaultValue:Ud.Rectangle.inset(1),set:function(a){this.setProperty("itemPadding",a);this.invalidateCache()}},items:{group:"list",defaultValue:[],after:["submorphs"],set:function(a){this.setProperty("items",a.map(Ud.asItem));this.update();this.attributeConnections&&Ud.signal(this,"values",this.values)}},multiSelect:{defaultValue:!1},multiSelectWithSimpleClick:{description:"Does a simple click toggle selections without deselecting?",
defaultValue:!1},multiSelectViaDrag:{description:"Does dragging extend selection?",defaultValue:!0},values:{group:"list",after:["items"],readOnly:!0,get:function(){return this.items.map(function(a){return a.value})}},selectedIndex:{group:"list",defaultValue:[],after:["selectedIndexes"],get:function(){return this.selectedIndexes[0]},set:function(a){return this.selectedIndexes="number"===typeof a?[a]:[]}},selectedIndexes:{get:function(){return this.getProperty("selectedIndexes")||[]},set:function(a){var g=
this.items.length;this.setProperty("selectedIndexes",(a||[]).filter(function(l){return 0<=l&&l<g}));this.update();Ud.signal(this,"selection",this.selection)}},selection:{group:"list",after:["selections"],get:function(){return this.selections[0]},set:function(a){this.selections=[a]}},selections:{group:"list",after:["selectedIndexes"],get:function(){var a=this;return this.selectedIndexes.map(function(g){return a.items[g]&&a.items[g].value})},set:function(a){var g=this;this.selectedIndexes=a.map(function(l){return g.findIndex(l)})}},
selectedItems:{after:["selectedIndexes"],readOnly:!0,get:function(){var a=this;return this.selectedIndexes.map(function(g){return a.items[g]})}},submorphs:{initialize:function(a){this.initializeSubmorphs(a)}},listItemContainer:{after:["submorphs"],readOnly:!0,get:function(){return this.getSubmorphNamed("listItemContainer")}},itemMorphs:{after:["submorphs"],readOnly:!0,get:function(){return this.listItemContainer.submorphs}},scrollBar:{after:["submorphs"],readOnly:!0,get:function(){return this.getSubmorphNamed("scrollbar")}},
scroller:{after:["submorphs"],readOnly:!0,get:function(){return this.getSubmorphNamed("scroller")}},scrollable:{derived:!0,get:function(){return this.padding.top()+this.items.length*this.itemHeight>this.height}},manualItemHeight:{type:"Boolean"},itemHeight:{after:["fontFamily","fontSize","itemPadding"],defaultValue:10,set:function(a){this.setProperty("itemHeight",a);this.manualItemHeight="number"===typeof a},get:function(){var a=this.getProperty("itemHeight");if(a)return a;a=this.env.fontMetric.defaultLineHeight({fontFamily:this.fontFamily,
fontSize:this.fontSize});var g=this.itemPadding;g&&(a+=g.top()+g.bottom());this.setProperty("itemHeight",a);return a}},theme:{after:["styleClasses"],defaultValue:"default",set:function(a){this.removeStyleClass(this.theme);this.addStyleClass(a);this.setProperty("theme",a)}}}}}],e,{pathInPackage:function(){return"list.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",
version:"0.1.0"}}},{start:10477,end:26899})}(Ud.Morph));Ud.List=UE;Ud.List=UE;Ud.List=UE;Ud.connect=rl;var EI=Da("aP",function(b){var e=lively.FreezerRuntime.recorderFor("lively.components/list.js"),m=e.hasOwnProperty("FilterableList")&&"function"===typeof e.FilterableList?e.FilterableList:e.FilterableList=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return dc(m,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){a=
void 0===a?{}:a;a.bounds||a.extent||(a.extent=Ud.pt(400,360));dc._get(Object.getPrototypeOf(m.prototype),Symbol.for("lively-instance-initialize"),this).call(this,a);Ud.connect(this.inputMorph,"inputChanged",this,"updateFilter");Ud.connect(this.listMorph,"selection",this,"selectionChanged");Ud.connect(this.listMorph,"onItemMorphDoubleClicked",this,"acceptInput");this.updateFilter();Ud.connect(this,"extent",this,"relayout")}},{key:"resetConnections",value:function(){var a=this,g=this.attributeConnections;
if(g){var l=["accepted","canceled","remove"];g.filter(function(r){return l.includes(r.sourceAttrName)&&r.targetObj!==a}).forEach(function(r){return r.disconnect()})}}},{key:"isList",get:function(){return!0}},{key:"relayout",value:function(){var a=this.listMorph,g=this.inputMorph,l=this.paddingMorph,r=this.borderWidth;g.topLeft=Ud.pt(r,r);g.width=a.width=this.width-2*r;l&&(l.topLeft=g.bottomLeft);a.position=l?l.bottomLeft:g.bottomLeft;a.height=this.height-a.top-r}},{key:"focus",value:function(){this.get("input").focus()}},
{key:"selectionChanged",value:function(a){Ud.signal(this,"selection",a)}},{key:"scrollSelectionIntoView",value:function(){return this.listMorph.scrollSelectionIntoView()}},{key:"parseInput",value:function(){var a=this.get("input").textString,g=Array.from(a).reduce(function(r,v){if("\\"===v&&!r.escaped)return r.escaped=!0,r;" "!==v||r.escaped?(r.spaceSeen=!1,r.current+=v):(!r.spaceSeen&&r.current&&(r.tokens.push(r.current),r.current=""),r.spaceSeen=!0);r.escaped=!1;return r},{tokens:[],current:"",
escaped:!1,spaceSeen:!1});g.current&&g.tokens.push(g.current);var l=g.tokens.map(function(r){return r.toLowerCase()});return{tokens:g.tokens,lowercasedTokens:l,input:a}}},{key:"updateFilter",value:function(){var a=this,g=this.parseInput(),l=this.filterFunction,r=this.sortFunction,v=this.items.filter(function(E){return l.call(a,g,E)});r&&(v=Ud.arr.sortBy(v,function(E){return r.call(a,g,E)}));var y=this.listMorph,A=this.updateSelectionsAfterFilter?y.selectedIndexes.map(function(E){return v.indexOf(y.items[E])}).filter(function(E){return-1!==
E}):y.selectedIndexes;y.items=v;y.selectedIndexes=A.length?A:v.length?[0]:[];this.scrollSelectionIntoView();Ud.signal(this,"filterChanged",{parsedInput:g,items:y.items})}},{key:"acceptInput",value:function(){var a=this.listMorph;this.get("input").acceptInput();a={filtered:this.items,selected:a.selections,action:this.selectedAction,status:"accepted"};Ud.signal(this,"accepted",a);return a}},{key:"keybindings",get:function(){return[{keys:"Up|Ctrl-P",command:"arrow up"},{keys:"Down|Ctrl-N",command:"arrow down"},
{keys:"Shift-Up",command:"select up"},{keys:"Shift-Down",command:"select down"},{keys:"Alt-V|PageUp",command:"page up"},{keys:"Ctrl-V|PageDown",command:"page down"},{keys:"Alt-Shift-,",command:"goto first item"},{keys:"Alt-Shift-.",command:"goto last item"},{keys:"Enter",command:"accept input"},{keys:"Escape|Ctrl-G",command:"cancel"},{keys:"Tab",command:"choose action"}].concat($jscomp.arrayFromIterable(Ud.arr.range(0,8).map(function(a){return{keys:"Alt-"+(a+1),command:{command:"choose action and accept input",
args:{actionNo:a}}}}))).concat(dc._get(Object.getPrototypeOf(m.prototype),"keybindings",this))}},{key:"commands",get:function(){var a=this;return dc._get(Object.getPrototypeOf(m.prototype),"commands",this).concat([{name:"accept input",exec:function(g){a.acceptInput();return!0}},{name:"cancel",exec:function(g){Ud.signal(g,"canceled");return!0}},{name:"choose action and accept input",exec:function(g,l){l=void 0===l?{}:l;g.selectedAction=(g.actions||[])[void 0===l.actionNo?0:l.actionNo];return g.execCommand("accept input")}},
{name:"choose action",exec:function(g){var l,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){if(!g.actions)return y.return(!0);l=Object.assign({},g.style,{extent:g.extent});r=new Ud.FilterableList(l);r.openInWorld(g.globalPosition);r.items=g.actions;v=g.actions.indexOf(g.selectedAction);-1===v&&(v=0);r.selectedIndex=v;Ud.connect(r,"accepted",g,"selectedAction",{converter:function(A){this.targetObj.focus();this.disconnect();this.sourceObj.remove();return A.selected[0]}});Ud.connect(r,
"canceled",g,"selectedAction",{converter:function(A){this.targetObj.focus();this.disconnect();this.sourceObj.remove();return this.targetObj.selectedAction}});r.focus();return y.return(!0)})}}].concat($jscomp.arrayFromIterable(Ud.listCommands.map(function(g){return Object.assign({},g,{exec:function(l,r,v){return g.exec(a.listMorph,r,v)}})}))))}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"FilterableList"}},{key:"properties",get:function(){return{fill:{defaultValue:Ud.Color.transparent},
borderWidth:{defaultValue:1},updateSelectionsAfterFilter:{defaultValue:!1},theme:{after:["styleClasses","listMorph"],defaultValue:"default",set:function(a){this.removeStyleClass(this.theme);this.listMorph.removeStyleClass(this.theme);this.addStyleClass(a);this.listMorph.addStyleClass(a);this.setProperty("theme",a)}},submorphs:{initialize:function(){var a=this;this.submorphs=[Ud.Text.makeInputLine({name:"input",highlightWhenFocused:!1,fixedHeight:!1,autofit:!1}),new Ud.morph({name:"padding",fill:Ud.Color.transparent}),
new Ud.List({name:"list",items:[],clipMode:"auto"})];this.get("list").whenRendered().then(function(){return a.get("list").update()})}},paddingMorph:{derived:!0,readOnly:!0,after:["submorphs"],get:function(){return this.getSubmorphNamed("padding")}},listMorph:{derived:!0,readOnly:!0,after:["submorphs"],get:function(){return this.getSubmorphNamed("list")}},inputMorph:{derived:!0,readOnly:!0,after:["submorphs"],get:function(){return this.getSubmorphNamed("input")}},fontFamily:{isStyleProp:!0,derived:!0,
after:["submorphs"],get:function(){return this.listMorph.fontFamily},set:function(a){this.listMorph.fontFamily=a;this.inputMorph.fontFamily=a}},padding:{isStyleProp:!0,derived:!0,after:["submorphs"],get:function(){return this.listMorph.padding},set:function(a){this.listMorph.padding=a;this.inputMorph.padding=a}},fontSize:{isStyleProp:!0,group:"styling",derived:!0,after:["submorphs"],get:function(){return this.listMorph.fontSize},set:function(a){this.listMorph.fontSize=a}},itemPadding:{isStyleProp:!0,
derived:!0,after:["submorphs"],get:function(){return this.listMorph.itemPadding},set:function(a){this.listMorph.itemPadding=a}},inputPadding:{isStyleProp:!0,derived:!0,after:["submorphs","padding"],get:function(){return this.inputMorph.padding},set:function(a){this.inputMorph.padding=a}},input:{derived:!0,after:["submorphs"],defaultValue:"",get:function(){return this.inputMorph.input},set:function(a){this.inputMorph.input=a}},historyId:{derived:!0,after:["submorphs"],defaultValue:null,get:function(){return this.inputMorph.historyId},
set:function(a){this.inputMorph.historyId=a}},multiSelect:{derived:!0,after:["submorphs"],get:function(){return this.listMorph.multiSelect},set:function(a){this.listMorph.multiSelect=a}},items:{after:["submorphs","fuzzy","fuzzySortFunction","fuzzyFilterFunction"],defaultValue:[],set:function(a){this.setProperty("items",a.map(Ud.asItem));this.updateFilter()}},visibleItems:{derived:!0,after:["submorphs"],get:function(){return this.listMorph.items}},selection:{derived:!0,after:["submorphs"],get:function(){return this.listMorph.selection},
set:function(a){this.listMorph.selection=a}},selectedIndex:{derived:!0,after:["submorphs"],get:function(){return this.listMorph.selectedIndex},set:function(a){this.listMorph.selectedIndex=a}},selectedIndexes:{derived:!0,after:["submorphs"],get:function(){return this.listMorph.selectedIndexes},set:function(a){this.listMorph.selectedIndexes=a}},selectedItems:{derived:!0,after:["submorphs"],get:function(){return this.listMorph.selectedItems},set:function(a){this.listMorph.selectedItems=a}},selections:{derived:!0,
after:["submorphs"],get:function(){return this.listMorph.selections},set:function(a){this.listMorph.selections=a}},fuzzy:{derived:!0,after:["filterFunction","sortFunction"],set:function(a){this.setProperty("fuzzy",a);a?(this.sortFunction||(this.sortFunction=this.fuzzySortFunction),this.filterFunction==this.defaultFilterFunction&&(this.filterFunction=this.fuzzyFilterFunction)):(this.sortFunction===this.fuzzySortFunction&&(this.sortFunction=null),this.filterFunction===this.fuzzyFilterFunction&&(this.filterFunction=
this.defaultFilterFunction))}},filterFunction:{get:function(){var a=this.getProperty("filterFunction");if(!a)return this.defaultFilterFunction;"string"===typeof a&&(a=eval("("+a+")"));return a}},sortFunction:{},defaultFilterFunction:{readOnly:!0,get:function(){return this._defaultFilterFunction||(this._defaultFilterFunction=function(a,g){return a.lowercasedTokens.every(function(l){return g.string.toLowerCase().includes(l)})})}},fuzzySortFunction:{get:function(){var a=this;return this._fuzzySortFunction||
(this._fuzzySortFunction=function(g,l){var r=String(Ud.Path("string"===typeof a.fuzzy?a.fuzzy:"string").get(l)).toLowerCase(),v=0;g.lowercasedTokens.forEach(function(y){r.startsWith(y)?v-=10:r.includes(y)&&(v-=5)});return Ud.arr.sum(g.lowercasedTokens.map(function(y){return Ud.string.levenshtein(r.toLowerCase(),y)}))+v})}},fuzzyFilterFunction:{get:function(){var a=this;return this._fuzzyFilterFunction||(this._fuzzyFilterFunction=function(g,l){var r="string"===typeof a.fuzzy?a.fuzzy:"string";if(g.lowercasedTokens.every(function(y){return l.string.toLowerCase().includes(y)}))return!0;
var v=String(Ud.Path(r).get(l)).toLowerCase();return 3>=Ud.arr.sum(g.lowercasedTokens.map(function(y){return Ud.string.levenshtein(v,y)}))})}},selectedAction:{get:function(){return this.getProperty("selectedAction")||"default"}},actions:{}}}}],e,{pathInPackage:function(){return"list.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},
{start:27012,end:41351})}(Ud.Morph));Ud.FilterableList=EI;Ud.FilterableList=EI;Ud.FilterableList=EI;var FI=Da("bt",function(b){var e=lively.FreezerRuntime.recorderFor("lively.components/list.js"),m=e.hasOwnProperty("DropDownList")&&"function"===typeof e.DropDownList?e.DropDownList:e.DropDownList=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return dc(m,b,[{key:"fitLabelMorph",value:function(){}},{key:Symbol.for("lively-instance-initialize"),
value:function(a){dc._get(Object.getPrototypeOf(m.prototype),Symbol.for("lively-instance-initialize"),this).call(this,a);Ud.connect(this,"fire",this,"toggleList")}},{key:"onLoad",value:function(){this.listMorph.selection||(this.listMorph.selection=this.labelMorph.value[0])}},{key:"isListVisible",value:function(){return!!this.listMorph.world()}},{key:"removeWhenFocusLost",value:function(a){var g=this;setTimeout(function(){var l=g.listMorph,r=g.world()&&g.world().focusedMorph;if(l!==r&&r!==g&&l.world()&&
!l.withAllSubmorphsDetect(function(v){return v==r}))l.fadeOut(200);else Ud.once(Ud.touchInputDevice?l.scroller:l,"onBlur",g,"removeWhenFocusLost")},100)}},{key:"toggleList",value:function(){var a=this,g,l,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){if(1==v.nextAddress){g=a.listMorph;if(a.isListVisible())return Ud.signal(a,"deactivated"),a.selection=g.selection,g.epiMorph=!1,g.remove(),v.jumpTo(0);Ud.signal(a,"activated");a.openListInWorld?(g.openInWorld(),g.epiMorph=!0,g.hasFixedPosition=
!0,g.setTransform(a.getGlobalTransform()),l=a.globalBounds()):(l=a.innerBounds(),a.addMorph(g));r=g.items.length*g.itemHeight+g.padding.top()+g.padding.bottom();g.extent=Ud.pt(a.width,Math.min(a.listHeight,r));"top"===a.listAlign?g.bottomLeft=l.topLeft():g.topLeft=l.bottomLeft();Ud.once(g,"onItemMorphClicked",a,"toggleList");Ud.once(Ud.touchInputDevice?g.scroller:g,"onBlur",a,"removeWhenFocusLost");return v.yield(g.whenRendered(),3)}if(4!=v.nextAddress)return v.yield(g.whenRendered(),4);Ud.touchInputDevice?
g.scroller.focus():g.focus();g.scrollSelectionIntoView();v.jumpToEnd()})}},{key:"commands",get:function(){var a=this;return[{name:"accept",exec:function(){a.isListVisible()&&a.toggleList();return!0}},{name:"cancel",exec:function(){a.isListVisible()&&a.listMorph.remove();return!0}}].concat(dc._get(Object.getPrototypeOf(m.prototype),"commands",this))}},{key:"keybindings",get:function(){return dc._get(Object.getPrototypeOf(m.prototype),"keybindings",this).concat([{keys:"Enter",command:"accept"},{keys:"Escape|Ctrl-G",
command:"cancel"}])}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"DropDownList"}},{key:"properties",get:function(){return{padding:{defaultValue:Ud.Rectangle.inset(3,2)},listHeight:{defaultValue:100},listAlign:{type:"Enum",values:["bottom","top"],defaultValue:"bottom"},openListInWorld:{defaultValue:!1},listMorph:{after:["labelMorph"],get:function(){var a=this.getProperty("listMorph");if(a)return a;a=new Ud.List({name:"dropDownList"});this.setProperty("listMorph",a);return a}},items:{derived:!0,
after:["listMorph"],get:function(){return this.listMorph.items},set:function(a){this.listMorph.items=a}},selection:{after:["listMorph","items"],derived:!0,get:function(){return this.listMorph.selection},set:function(a){var g=this.listAlign,l=this.listMorph;if(a){var r=l.items,v=l.find(a);v||"string"!==typeof a||(v=r.find(function(A){return A.string===a}));if(!v)return;var y=v.label||[v.string,null];y=[].concat($jscomp.arrayFromIterable(y),[" ",null],$jscomp.arrayFromIterable(Ud.Icon.textAttribute("caret-"+
("bottom"===g?"down":"up"))));y[5]&&(y[5].textStyleClasses=["fa","annotation"]);this.label=y;this.relayout();l.selectedIndex=r.indexOf(v)}else l.selection=null,this.label="";Ud.signal(this,"selection",l.selection)}}}}}],e,{pathInPackage:function(){return"list.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:41361,end:45882})}(Ud.Button));
Ud.DropDownList=FI;Ud.DropDownList=FI;Ud.DropDownList=FI;var fP=function(b){var e=lively.FreezerRuntime.recorderFor("lively.components/list.js"),m=e.hasOwnProperty("InteractiveItem")&&"function"===typeof e.InteractiveItem?e.InteractiveItem:e.InteractiveItem=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return dc(m,b,[{key:"fit",value:function(){}},{key:"onHaloGrabover",value:function(a){this.list.showDropPreviewFor(this,
a)}},{key:"onDrop",value:function(a){var g=this,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){if(1==r.nextAddress){if(!g.item.isPreview)return r.jumpTo(0);l=a.hand.grabbedMorphs[0];dc._get(Object.getPrototypeOf(m.prototype),"onDrop",g).call(g,a);return r.yield(g.list.whenRendered(),3)}g.list.addItemAt({morph:l,isListItem:!0},g.itemIndex);g.list.clearPreviews();r.jumpToEnd()})}},{key:"select",value:function(){this.list.selectedIndex=this.itemIndex;this.item.morph.focus()}},{key:"onMouseDown",
value:function(a){Ud.touchInputDevice?this._touchDown=Date.now():this.select()}},{key:"onMouseUp",value:function(a){Ud.touchInputDevice&&500>Date.now()-this._touchDown&&this.select()}},{key:"displayItem",value:function(a,g,l,r,v,y,A){y=void 0===y?!1:y;dc._get(Object.getPrototypeOf(m.prototype),"displayItem",this).call(this,a,g,l,r,v,y,A);a.morph&&(a.morph.selected=y)}},{key:"onGrab",value:function(a){var g=this.list,l=a.halo&&a.halo.target===this;l&&a.halo.detachFromTarget();var r=this.submorphs.length?
this.submorphs[0]:Ud.morph({type:"label",value:this.value});a.hand.grab(r);r.position=a.hand.localize(this.globalPosition);l&&a.halo.refocus(r);g.removeItem(this.list.items[this.itemIndex]);g.itemMorphs.forEach(function(v){return v.remove()});g.update()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"InteractiveItem"}},{key:"properties",get:function(){return{draggable:{defaultValue:Ud.touchInputDevice?!1:!0},item:{derived:!0,get:function(){return this.list.items[this.itemIndex]}},
list:{drived:!0,get:function(){return this.owner.owner}},isListItem:{get:function(){return!0}}}}}],e,{pathInPackage:function(){return"list.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:45891,end:48165})}(Ud.ListItemMorph);Ud.InteractiveItem=fP;Ud.InteractiveItem=fP;Ud.InteractiveItem=fP;var gP=function(b){var e=lively.FreezerRuntime.recorderFor("lively.components/list.js"),
m=e.hasOwnProperty("MorphList")&&"function"===typeof e.MorphList?e.MorphList:e.MorphList=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return dc(m,b,[{key:"onLoad",value:function(){dc._get(Object.getPrototypeOf(m.prototype),"onLoad",this).call(this);this.clipMode=this.touchInput?"auto":"hidden"}},{key:"showDropPreviewFor",value:function(a,g){a=a.itemIndex;this.items[a].isPreview&&g||(this.clearPreviews(),g&&this.addItemAt({isListItem:!0,
isPreview:!0,morph:Ud.morph({reactsToPointer:!1,acceptsDrops:!1,width:this.width-5,height:this.itemHeight,fill:Ud.Color.orange.withA(.5)})},a))}},{key:"clearPreviews",value:function(){var a=this;this.items.filter(function(g){return g.morph&&g.morph.owner&&!Ud.Path("morph.owner.isListItem").get(g)}).map(function(g){return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){return l.return(a.removeItem(g))})});this.items.filter(function(g){return g.isPreview}).map(function(g){return a.removeItem(g)})}},
{key:"update",value:function(){var a=this,g=this.items;g&&this.listItemContainer&&(this.scroller&&(this.scroller.visible=!1),this.dontRecordChangesWhile(function(){var l=a.itemHeight,r=a.itemMorphs,v=a.listItemContainer,y=a.selectedIndexes,A=a.extent.y,E=a.fontSize,F=a.fontFamily,H=a.fontColor,I=a.padding,M=a.itemPadding,N=a.selectionColor,W=a.selectionFontColor,X=a.nonSelectionFontColor,ea=a.itemBorderRadius,Aa=a.scrollBar,Ma=a.scroll.y;I=I||Ud.Rectangle.inset(0);var K=I.top(),aa=I.left(),T=I.bottom();
I=I.right();var U=Math.max(0,Math.floor(Ma/l)),pa=Math.min(g.length,Math.ceil((Ma+A)/l));A=0;Ma=a.width-(aa+I);r=Ud.arr.sortBy(r,function(gb){return gb.itemIndex});var fa=$jscomp.makeIterator(Ud.arr.partition(r,function(gb){return gb.itemIndex<U}));r=fa.next().value;var oa=fa.next().value;oa=$jscomp.makeIterator(Ud.arr.partition(oa,function(gb){return gb.itemIndex>pa}));fa=oa.next().value;oa=oa.next().value;r=[].concat($jscomp.arrayFromIterable(fa),$jscomp.arrayFromIterable(oa),$jscomp.arrayFromIterable(r));
E={fontSize:E,fontFamily:F,fontColor:X||H,padding:M,borderRadius:ea||0,selectionFontColor:W,nonSelectionFontColor:X,selectionColor:N};r.length&&pa-U>r.length&&(U!=r[0].itemIndex?Ud.arr.pushAt(r,v.addMorph(new Ud.InteractiveItem(E)),0):pa!=Ud.arr.last(r).itemIndex&&r.push(v.addMorph(new Ud.InteractiveItem(E))));for(F=0;F<pa-U;F++){H=U+F;M=g[H];if(!M){r.slice(F).forEach(function(gb){return gb.remove()});break}N=r[F];N||(N=r[F]=v.addMorph(new Ud.InteractiveItem(E)),N.clipMode="visible");N.displayItem(M,
H,Ma,l,Ud.pt(0,l*H),y.includes(H),E);A=Math.max(A,N.width)}l=Math.max(K+T+l*g.length,a.height);y=Ud.pt(a.width,l).subPt(Ud.pt(aa+I,0));v.setBounds(Ud.pt(aa,K).extent(y));Aa.left=A-10;Aa.fill=null;Aa.top=0;Aa.extent=Ud.pt(1,l)}))}},{key:"onHoverIn",value:function(a){this.clipMode="auto"}},{key:"onHoverOut",value:function(a){this.touchInput||(this.clipMode="hidden")}},{key:"onScroll",value:function(a){this.update()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"MorphList"}},{key:"properties",
get:function(){return{touchInput:{get:function(){return Ud.touchInputDevice}},items:{group:"list",defaultValue:[],after:["submorphs"],set:function(a){this.setProperty("items",a.map(Ud.asItem));this.itemMorphs.forEach(function(g){return g.remove()});this.update();this.attributeConnections&&Ud.signal(this,"values",this.values)}}}}}],e,{pathInPackage:function(){return"list.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:48174,end:53401})}(Ud.List);Ud.MorphList=gP;Ud.MorphList=gP;Ud.MorphList=gP;var ksa=Object.freeze({__proto__:null,asItem:sL,ListItemMorph:eP,List:UE,FilterableList:EI,DropDownList:FI,InteractiveItem:fP,MorphList:gP}),hh=lively.FreezerRuntime.recorderFor("lively.components/menus.js");hh.Label=Wt;hh.config=Dn;hh.Morph=Ll;hh.obj=Ag;hh.promise=zh;hh.fun=Pn;hh.pt=xi;hh.Color=Fg;hh.Rectangle=He;var hP=function(b){var e=lively.FreezerRuntime.recorderFor("lively.components/menus.js"),
m=e.hasOwnProperty("MenuDivider")&&"function"===typeof e.MenuDivider?e.MenuDivider:e.MenuDivider=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return dc(m,b,void 0,[{key:Symbol.for("__LivelyClassName__"),get:function(){return"MenuDivider"}},{key:"properties",get:function(){return{isMenuDevider:{defaultValue:!0},fill:{defaultValue:hh.Color.gray.lighter()},extent:{defaultValue:hh.pt(100,5)},reactsToPointer:{defaultValue:!1}}}}],
e,{pathInPackage:function(){return"menus.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:168,end:437})}(hh.Morph);hh.MenuDivider=hP;hh.MenuDivider=hP;hh.MenuDivider=hP;var iP=function(b){var e=lively.FreezerRuntime.recorderFor("lively.components/menus.js"),m=e.hasOwnProperty("MenuItem")&&"function"===typeof e.MenuItem?e.MenuItem:
e.MenuItem=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return dc(m,b,[{key:"onHoverIn",value:function(a){var g=this;this.owner.itemMorphs.forEach(function(l){return l!==g&&(l.selected=!1)});this.selected=!0;this.submenu&&this.owner.openSubMenuDelayed(a,this,this.submenu)}},{key:"onHoverOut",value:function(a){var g=this,l=a.hand;setTimeout(function(){(g.owner?g.owner.submenus:[]).some(function(r){return r.fullContainsWorldPoint(l.globalPosition)})||
(g.selected=!1)},20);this.owner.maybeRemoveSubmenu()}},{key:"onMouseDown",value:function(a){var g=this,l,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){if(1==v.nextAddress){if(g.submenu)return v.return();v.setCatchFinallyBlocks(2);g.owner.startFinish();if("function"!==typeof g.action)throw Error("Menu item "+g.textString+" has no executable action!");return v.yield(g.action(),4)}if(2!=v.nextAddress)return g.owner.completeFinish(),v.leaveTryBlock(0);l=v.enterCatchBlock();(r=g.world())?
r.logError(l):console.error(l);v.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"MenuItem"}},{key:"properties",get:function(){return{acceptsDrops:{defaultValue:!1},fixedWidth:{defaultValue:!1},fixedHeight:{defaultValue:!1},fill:{defaultValue:hh.Color.transparent},fontSize:{defaultValue:14},draggable:{defaultValue:!1},readOnly:{defaultValue:!0},nativeCursor:{defaultValue:"pointer"},selected:{defaultValue:!1,set:function(a){this.selected!==a&&(this.addValueChange("selected",
a),a?(this.fontColor=hh.Color.white,this.fill=hh.Color.rgb(21,101,192)):(this.fill=hh.Color.transparent,this.fontColor=hh.Color.black))}},isMenuItem:{derived:!0,readOnly:!0,get:function(){return!0}},label:{get:function(){return this.valueAndAnnotation.value.map(function(a,g){return 0===g%2?a:""}).join("\n")},set:function(a){this.valueAndAnnotation={value:a,annotation:this.annotation}}},annotation:{get:function(){return this.valueAndAnnotation.annotation},set:function(a){this.valueAndAnnotation={value:this.value,
annotation:a}}},action:{},submenu:{}}}}],e,{pathInPackage:function(){return"menus.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:446,end:2937})}(hh.Label);hh.MenuItem=iP;hh.MenuItem=iP;hh.MenuItem=iP;hh.invalidItem={string:"invalid item",action:function(){return $world.setStatusMessage("invalid item")}};var jP=Da("aQ",function(b){var e=
lively.FreezerRuntime.recorderFor("lively.components/menus.js"),m=e.hasOwnProperty("Menu")&&"function"===typeof e.Menu?e.Menu:e.Menu=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return dc(m,b,[{key:"startFinish",value:function(){this.ownerMenu&&this.ownerMenu.startFinish();this._waitingForFinish=!0}},{key:"completeFinish",value:function(){this.ownerMenu&&this.ownerMenu.completeFinish();this.finishedPromise.resolve(!0)}},
{key:"whenFinished",value:function(){return this.finishedPromise.promise}},{key:"onChange",value:function(a){switch(a.prop){case "itemPadding":case "fontSize":case "fontFamily":this.updateMorphs()}dc._get(Object.getPrototypeOf(m.prototype),"onChange",this).call(this,a)}},{key:"remove",value:function(){var a=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(g){if(1==g.nextAddress)return g.yield(a.animate({opacity:0,duration:300}),2);a._waitingForFinish||a.completeFinish();dc._get(Object.getPrototypeOf(m.prototype),
"remove",a).call(a);g.jumpToEnd()})}},{key:"ensureItem",value:function(a){if(!a)return hh.invalidItem;if(a.title)return this.title=a.title,null;if(a.isDivider)return a;if(a.hasOwnProperty("string")&&a.hasOwnProperty("action"))return hh.obj.select(a,["string","action","annotation"]);if(Array.isArray(a)){var g=$jscomp.makeIterator(a),l=g.next().value;g=g.next().value;return"string"===typeof l||Array.isArray(l)?g&&"function"!==typeof g?"object"===typeof g&&g.getItems?{label:l,submenu:g.getItems,annotation:[" ",
{textStyleClasses:["fa","fa-caret-right"]}]}:Array.isArray(g)?{label:l,submenu:g,annotation:[" ",{textStyleClasses:["fa","fa-caret-right"]}]}:hh.invalidItem:{label:l,action:g||function(){return $world.setStatusMessage(l)}}:hh.invalidItem}if(a.command){var r=a.command,v=a.showKeyShortcuts,y=a.target;g=a.alias;var A=a.args;if(!r||!y)return hh.invalidItem;void 0===v&&(v=!0);a=v?"string"===typeof v?v:y.keysForCommand(r):null;return{string:g||r,annotation:a?["\t"+a,{fontSize:"70%"}]:["",{}],action:function(){return y.execCommand(r,
A)}}}return hh.invalidItem}},{key:"updateMorphs",value:function(){var a=this;this.submorphs=[];var g=this.padding.left(),l=this.padding.right(),r=this.padding.top(),v=this.padding.bottom(),y=0,A=hh.pt(g,r),E={};this.fontFamily&&(E.fontFamily=this.fontFamily);this.fontSize&&(E.fontSize=this.fontSize);this.itemPadding&&(E.padding=this.itemPadding);this.title&&(r=this.addMorph(Object.assign({type:"label",value:this.title,name:"title",position:A,fontWeight:"bold"},E)),A=r.bottomLeft,y=Math.max(r.width,
y));this.items.forEach(function(F){var H=F.label,I=F.string,M=F.annotation,N=F.action,W=F.submenu;F=a.addMorph(F.isDivider?new hh.MenuDivider({position:A}):new hh.MenuItem(Object.assign({label:H||I,annotation:M,action:N,submenu:W,position:A},E)));A=F.bottomLeft;y=Math.max(F.width,y)});this.submorphs.forEach(function(F){F.isLabel&&(F.fit(),F.autofit=!1,F.fixedWidth=!0,F.fixedHeight=!0);F.width=y});this.extent=hh.pt(y+l+g,A.y+v)}},{key:"openSubMenuDelayed",value:function(a,g,l){var r=this;this.openingSubMenuProcess&&
clearTimeout(this.openingSubMenuProcess);this.openingSubMenuProcess=setTimeout(function(){try{r.openSubMenu(a,g,l)}catch(y){var v=r.world();v?v.logError(y):console.error(y)}},200)}},{key:"openSubMenu",value:function(a,g,l){if(g.selected){var r=this.submenu;if(r){if(r.ownerItemMorph===g||this.morphsContainingPoint(a.position).includes(r))return;this.removeSubMenu()}"function"===typeof l&&(l=l());a=this.submenu=this.addMorph(new hh.Menu({items:l,ownerItemMorph:g,ownerMenu:this}));a.updateMorphs();a.offsetForOwnerMenu()}}},
{key:"maybeRemoveSubmenu",value:function(){var a=this;hh.fun.debounceNamed(this.id+"-maybeRemoveSubmenu",300,function(){var g=a.world();if(g){var l=a.submenu,r=a.selectedItemMorph;g=g&&l&&l.fullContainsWorldPoint(g.firstHand.position);l&&l.ownerItemMorph!==r&&!l.ownerItemMorph.selected&&(g?(r&&(r.selected=!1),l.ownerItemMorph.selected=!0):a.removeSubMenu())}})();return this.removeOnMouseOut}},{key:"removeSubMenu",value:function(){if(this.submenu){var a=this.submenu;this.submenu=a.ownerMenu=null;a.remove()}}},
{key:"moveBoundsForVisibility",value:function(a,g){var l=0,r=0;a.right()>g.right()&&(l=-1*(a.right()-g.right()));var v=a.left()+l;0>v&&(l+=-v);a.bottom()>g.bottom()&&(r=-1*(a.bottom()-g.bottom()),l+=1);g=a.top()+r;0>g&&(r+=-g);return a.translatedBy(hh.pt(l,r))}},{key:"moveSubMenuBoundsForVisibility",value:function(a,g,l,r){r||(r=g.right()+a.width>l.right()?"left":"right");a=a.extent();a="left"===r?g.topLeft().addXY(-a.x,0).extent(a):g.topRight().extent(a);a.bottom()>l.bottom()&&(g=-1*(a.bottom()-
l.bottom()),a=a.translatedBy(hh.pt(0,g)));a.top()<l.top()&&(l=l.top()-a.top(),a=a.translatedBy(hh.pt(0,l)));return a}},{key:"offsetForOwnerMenu",value:function(){var a=this.ownerMenu,g=this.world().visibleBounds(),l=a.getGlobalTransform().inverse().transformRectToRect(g);a=this.clipForVisibility(this.moveSubMenuBoundsForVisibility(this.innerBounds(),a.selectedItemMorph?a.selectedItemMorph.bounds():a.innerBounds(),l),g);this.setBounds(a)}},{key:"clipForVisibility",value:function(a,g){a=void 0===a?
this.bounds():a;g=void 0===g?this.world().visibleBounds():g;var l=this.transformRectToMorph(this.world(),a.withX(0).withY(0));g.containsRect(l.insetBy(10))||(a=a.withExtent(hh.pt(5+a.width,Math.min(l.height,g.height))));return a}},{key:"offsetForWorld",value:function(a){a=this.innerBounds().translatedBy(a);if(this.owner.visibleBounds){var g=this.owner.visibleBounds();a=this.clipForVisibility(this.moveBoundsForVisibility(a,g),g)}this.setBounds(a)}},{key:"onHoverOut",value:function(){this.removeOnMouseOut&&
this.remove()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Menu"}},{key:"forItems",value:function(a,g){g=void 0===g?{title:""}:g;return new this(Object.assign({},g,{items:a}))}},{key:"openAt",value:function(a,g,l){l=void 0===l?{title:""}:l;g=this.forItems(g,l).openInWorldNear(a);g.offsetForWorld(a);return g}},{key:"openAtHand",value:function(a,g){g=void 0===g?{title:""}:g;var l=g.hand;a=this.forItems(a,hh.obj.dissoc(g,["hand"]));l=l?l.position:hh.pt(0,0);a.titleMorph&&(l=l.addXY(0,
-a.titleMorph.height));a.openInWorld(l);a.offsetForWorld(l);return a}},{key:"properties",get:function(){return{dropShadow:{initialize:function(){if(hh.config.fastShadows||!this.ownerMenu)this.dropShadow=!0,this.dropShadow.fast=!1}},submorphs:{initialize:function(){this.updateMorphs()}},epiMorph:{defaultValue:!0},acceptsDrops:{defaultValue:!1},hasFixedPosition:{defaultValue:!0},padding:{defaultValue:hh.Rectangle.inset(0,2)},itemPadding:{defaultValue:hh.Rectangle.inset(8,4)},borderWidth:{defaultValue:1},
fill:{defaultValue:hh.Color.white},borderColor:{defaultValue:hh.Color.gray.lighter()},borderRadius:{defaultValue:4},opacity:{defaultValue:.95},fontSize:{defaultValue:16},fontFamily:{defaultValue:"Helvetica Neue, Arial, sans-serif"},title:{get:function(){return this.getProperty("title")},set:function(a){this.addValueChange("title",a)}},finishedPromise:{initialize:function(){this.finishedPromise=hh.promise.deferred()}},ownerMenu:{},submenu:{},submenus:{readOnly:!0,get:function(){return this.submenu?
[this.submenu].concat(this.submenu.submenus):[]}},ownerItemMorph:{},removeOnMouseOut:{},items:{set:function(a){a=a.map(this.ensureItem.bind(this)).filter(Boolean);this.setProperty("items",a)}},selectedItemMorph:{derived:!0,readOnly:!0,get:function(){return this.itemMorphs.find(function(a){return a.selected})}},titleMorph:{derived:!0,readOnly:!0,get:function(){return this.getSubmorphNamed("title")}},itemMorphs:{derived:!0,readOnly:!0,get:function(){return this.submorphs.filter(function(a){return a.isMenuItem})}}}}}],
e,{pathInPackage:function(){return"menus.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:3047,end:15736})}(hh.Morph));hh.Menu=jP;hh.Menu=jP;hh.Menu=jP;var lsa=Object.freeze({__proto__:null,MenuDivider:hP,MenuItem:iP,Menu:jP}),Sk=lively.FreezerRuntime.recorderFor("lively.components/resizers.js");Sk.arr=$f;Sk.pt=xi;Sk.Color=Fg;
Sk.Morph=Ll;var kP=function(b){var e=lively.FreezerRuntime.recorderFor("lively.components/resizers.js"),m=e.hasOwnProperty("VerticalResizer")&&"function"===typeof e.VerticalResizer?e.VerticalResizer:e.VerticalResizer=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return dc(m,b,[{key:"onDrag",value:function(a){this.movedHorizontallyBy(a.position.x-a.state.lastDragPosition.x)}},{key:"divideRelativeToParent",value:function(a){if(!(!this.owner||
"number"!==typeof a||0>a||1<a)){var g=this.owner.extent.x-this.extent.x;if(!(0>g)){var l=this.getRelativeDivide();this.movedHorizontallyBy(g*(a-l))}}}},{key:"getRelativeDivide",value:function(a){var g=this.bounds();a=g.left();g=this.owner.extent.x-g.width;return 0>g?NaN:a/g}},{key:"movedHorizontallyBy",value:function(a){this.resizeIsSave(a)&&(this.fixed.concat(this.scalingRight).forEach(function(g){var l=g.position;g.position=Sk.pt(l.x+a,l.y)}),this.scalingLeft.forEach(function(g){var l=g.extent;
g.extent=Sk.pt(l.x+a,l.y)}),this.scalingRight.forEach(function(g){var l=g.extent;g.extent=Sk.pt(l.x-a,l.y)}),this.position=this.position.addPt(Sk.pt(a,0)))}},{key:"resizeIsSave",value:function(a){var g=this;return this.scalingLeft.every(function(l){return l.extent.x+a>=g.minWidth})&&this.scalingRight.every(function(l){return l.extent.x-a>=g.minWidth})}},{key:"addFixed",value:function(a){Sk.arr.pushIfNotIncluded(this.fixed,a)}},{key:"addScalingLeft",value:function(a){Sk.arr.pushIfNotIncluded(this.scalingLeft,
a)}},{key:"addScalingRight",value:function(a){Sk.arr.pushIfNotIncluded(this.scalingRight,a)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"VerticalResizer"}},{key:"properties",get:function(){return{fill:{defaultValue:Sk.Color.gray.lighter()},nativeCursor:{defaultValue:"ew-resize"},fixed:{defaultValue:[]},scalingLeft:{defaultValue:[]},scalingRight:{defualtValue:[]},minWidth:{defaultValue:20},draggable:{defaultValue:!0}}}}],e,{pathInPackage:function(){return"resizers.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:128,end:2703})}(Sk.Morph);Sk.VerticalResizer=kP;Sk.VerticalResizer=kP;Sk.VerticalResizer=kP;var lP=function(b){var e=lively.FreezerRuntime.recorderFor("lively.components/resizers.js"),m=e.hasOwnProperty("HorizontalResizer")&&"function"===typeof e.HorizontalResizer?e.HorizontalResizer:e.HorizontalResizer=function(a){a&&a[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return dc(m,b,[{key:"onDrag",value:function(a){this.movedVerticallyBy(a.position.y-a.state.lastDragPosition.y)}},{key:"divideRelativeToParent",value:function(a){if(!(!this.owner||"number"!==typeof a||0>a||1<a)){var g=this.owner.extent.y-this.extent.y;if(!(0>g)){var l=this.getRelativeDivide();this.movedVerticallyBy(g*(a-l))}}}},{key:"getRelativeDivide",value:function(a){var g=this.bounds();a=g.top();g=this.owner.extent.y-g.height;
return 0>g?NaN:a/g}},{key:"movedVerticallyBy",value:function(a){this.resizeIsSave(a)&&(this.fixed.concat(this.scalingBelow).forEach(function(g){var l=g.position;g.position=Sk.pt(l.x,l.y+a)}),this.scalingAbove.forEach(function(g){var l=g.extent;g.extent=Sk.pt(l.x,l.y+a)}),this.scalingBelow.forEach(function(g){var l=g.extent;g.extent=Sk.pt(l.x,l.y-a)}),this.position=this.position.addPt(Sk.pt(0,a)))}},{key:"resizeIsSave",value:function(a){var g=this;return this.scalingAbove.every(function(l){return l.extent.y+
a>=g.minHeight})&&this.scalingBelow.every(function(l){return l.extent.y-a>=g.minHeight})}},{key:"addFixed",value:function(a){Sk.arr.pushIfNotIncluded(this.fixed,a)}},{key:"addScalingAbove",value:function(a){Sk.arr.pushIfNotIncluded(this.scalingAbove,a)}},{key:"addScalingBelow",value:function(a){Sk.arr.pushIfNotIncluded(this.scalingBelow,a)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"HorizontalResizer"}},{key:"properties",get:function(){return{fill:{defaultValue:Sk.Color.gray.lighter()},
nativeCursor:{defaultValue:"ns-resize"},fixed:{defaultValue:[]},scalingBelow:{defaultValue:[]},scalingAbove:{defaultValue:[]},minHeight:{defaultValue:20},draggable:{defaultValue:!0}}}}],e,{pathInPackage:function(){return"resizers.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:2713,end:5319})}(Sk.Morph);Sk.HorizontalResizer=
lP;Sk.HorizontalResizer=lP;Sk.HorizontalResizer=lP;var msa=Object.freeze({__proto__:null,VerticalResizer:kP,HorizontalResizer:lP}),Eg=lively.FreezerRuntime.recorderFor("lively.components/tree.js");Eg.arr=$f;Eg.fun=Pn;Eg.obj=Ag;Eg.tree=wu;Eg.string=pi;Eg.promise=zh;Eg.pt=xi;Eg.Rectangle=He;Eg.Color=Fg;Eg.Morph=Ll;Eg.Text=Vt;Eg.config=Dn;Eg.touchInputDevice=sr;Eg.Label=Wt;Eg.connect=rl;Eg.signal=Wl;Eg.bowser=xs;var mP=Da("bs",function(b){var e=lively.FreezerRuntime.recorderFor("lively.components/tree.js"),
m=e.hasOwnProperty("Tree")&&"function"===typeof e.Tree?e.Tree:e.Tree=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return dc(m,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){a=void 0===a?{}:a;if(!a.treeData)throw Error("Cannot create tree without TreeData!");dc._get(Object.getPrototypeOf(m.prototype),Symbol.for("lively-instance-initialize"),this).call(this,a);this.resetCache();this.update()}},{key:"onChange",
value:function(a){dc._get(Object.getPrototypeOf(m.prototype),"onChange",this).call(this,a);"fontSize fontColor selectionColor disableIndent nonSelectionFontColor selectionFontColor".split(" ").includes(a.prop)&&this.update(!0)}},{key:"resetCache",value:function(){this._lineHeightCache=null}},{key:"isTree",get:function(){return!0}},{key:"nodeStyle",get:function(){return{fontFamily:this.fontFamily,fontSize:this.fontSize,fontWeight:this.fontWeight,autofit:!this.resizeNodes}}},{key:"lineBounds",value:function(a){var g=
this.textLayout.charBoundsOfRow(this,a);a=Eg.Rectangle.fromLiteral(Eg.arr.first(g)).topLeft();g=Eg.Rectangle.fromLiteral(Eg.arr.last(g)).bottomRight();return Eg.Rectangle.fromAny(a,g)}},{key:"recoverOriginalLine",value:function(a){for(var g=this.document.getTextAndAttributesOfLine(a),l=0;l<g.length;l++){var r=this._originalColor[l];r&&!Eg.obj.isString(g[l])&&(g[l]?g[l].fontColor=r:g[l]={fontColor:r})}this.document.setTextAndAttributesOfLine(a,g)}},{key:"renderSelectedLine",value:function(a){var g=
this.document.getTextAndAttributesOfLine(a);this._originalColor=Array(g.length);for(var l=0;l<g.length;l++)0===l%2?g[l]&&g[l].isMorph&&(this._originalColor[l]=g[l]?g[l].fontColor||this.nonSelectionFontColor:null,g[l].fontColor=this.selectionFontColor,g[l].isSelected=!0):(this._originalColor[l]=(g[l]?g[l].fontColor:null)||this.nonSelectionFontColor,g[l]?g[l].fontColor=this.selectionFontColor:g[l]={fontColor:this.selectionFontColor});this.document.setTextAndAttributesOfLine(a,g);this.selectLine(a,!0);
this._lastSelectedIndex=this.selectedIndex}},{key:"computeTreeAttributes",value:function(a){if(!a.length)return[];for(var g=Eg.arr.genN(8*(a.length-1),function(){return null}),l=1,r,v,y=this.disableIndent?0:1.3*this.fontSize;l<a.length;l++){r=8*(l-1);v=this.selectedIndex==l;a[l].node.isSelected=v;g[r]=" ";g[r+1]={fontSize:y,fontColor:Eg.Color.transparent,textStyleClasses:["fas"],paddingRight:y*(a[l].depth-1)+"px"};g[r+3]={fontColor:Eg.Color.transparent,textStyleClasses:["fas"],paddingTop:this.fontSize/
10+"px",paddingRight:this.fontSize/8+"px"};this.treeData.isLeaf(a[l].node)?g[r+2]=this.disableIndent?"":"    ":(g[r+2]=this.treeData.isCollapsed(a[l].node)?" \uf0da ":" \uf0d7 ",Object.assign(g[r+3],{paddingRight:this.treeData.isCollapsed(a[l].node)?this.fontSize/4+"px":"0px",paddingTop:"0px",nativeCursor:"pointer",fontColor:this.fontColor}));var A=this.treeData.safeDisplay(a[l].node);A.isMorph&&(A._capturedProps&&Object.assign(A,A._capturedProps),v&&(A._capturedProps=Eg.obj.select(A,["fontColor"])),
A.fontColor=this.nonSelectionFontColor);g[r+4]=A;Eg.arr.isArray(A)?g[r+5]=[]:g[r+5]={fontColor:this.fontColor};g[r+6]="\n";g[r+7]={}}g.push(" ",{fontSize:1.3*this.fontSize,textStyleClasses:["far"]});return 1<a.length?Eg.arr.flatten(g):[]}},{key:"update",value:function(a){var g=this;if(!this._updating&&this.treeData&&this.nodeItemContainer){this._updating=!0;try{this.withMetaDo({isLayoutAction:!0},function(){var l=g.treeData.asListWithIndexAndDepth();g.treeData!==g.lastTreeData||g.lastNumberOfNodes!==
l.length||a?(g.replace({start:{row:0,column:0},end:g.documentEndPosition},g.computeTreeAttributes(l),!1,!1),g.invalidateTextLayout(!0,!1),g.whenRendered().then(function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){g.makeDirty();r.jumpToEnd()})})):g._lastSelectedIndex&&g.recoverOriginalLine(g._lastSelectedIndex-1);g.lastTreeData=g.treeData;g.lastNumberOfNodes=l.length;g.cursorPosition={row:0,column:0};0<g.selectedIndex&&g.renderSelectedLine(g.selectedIndex-1)})}finally{this._updating=
!1}}}},{key:"buildViewState",value:function(a){var g=this;"function"!==typeof a&&(a=function(v){return v});var l=this.selectedNode?a(this.selectedNode):null,r=new Map;Eg.tree.prewalk(this.treeData.root,function(v){return r.set(a(v),g.treeData.isCollapsed(v))},function(v){return g.treeData.getChildrenIfUncollapsed(v)});return{selectionId:l,collapsedMap:r,scroll:this.scroll}}},{key:"applyViewState",value:function(a,g){var l=this,r,v,y,A,E,F,H,I;return $jscomp.asyncExecutePromiseGeneratorProgram(function(M){switch(M.nextAddress){case 1:"function"!==
typeof g&&(g=function(N){return N}),r=a,v=r.selectionId,y=r.collapsedMap,A=r.scroll,E=0,F=-1;case 2:H=l.nodes;if(E>=H.length){M.jumpTo(3);break}I=g(H[E]);v===I&&(F=E);if(!y.has(I)||y.get(I)){M.jumpTo(4);break}return M.yield(l.treeData.collapse(H[E],!1),4);case 4:E++;M.jumpTo(2);break;case 3:return l.selectedIndex=F,l.update(),l.scroll=A,l.scrollSelectionIntoView(),M.yield(Eg.promise.delay(0),0)}})}},{key:"maintainViewStateWhile",value:function(a,g){var l=this,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){return 1==
v.nextAddress?(r=l.buildViewState(g),v.yield(a(),2)):v.yield(l.applyViewState(r,g),0)})}},{key:"onNodeCollapseChanged",value:function(a){var g=a.node,l=a.isCollapsed,r=this,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){if(1==y.nextAddress)return r.resetCache(),y.setCatchFinallyBlocks(2),y.yield(r.treeData.collapse(g,l),4);if(2!=y.nextAddress)return Eg.signal(r,"nodeCollapseChanged",{node:g,isCollapsed:l}),r.update(),y.leaveTryBlock(0);v=y.enterCatchBlock();r.showError(v);y.jumpToEnd()})}},
{key:"uncollapse",value:function(a){a=void 0===a?this.selectedNode:a;var g=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){return 1==l.nextAddress?a&&g.treeData.isCollapsed(a)?l.yield(g.onNodeCollapseChanged({node:a,isCollapsed:!1}),2):l.return():l.return(a)})}},{key:"collapse",value:function(a){a=void 0===a?this.selectedNode:a;var g=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){return 1==l.nextAddress?!a||g.treeData.isCollapsed(a)?l.return():l.yield(g.onNodeCollapseChanged({node:a,
isCollapsed:!0}),2):l.return(a)})}},{key:"selectedPath",value:function(){return this.treeData.pathOf(this.selectedNode)}},{key:"selectPath",value:function(a){var g=this,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){return 1==r.nextAddress?(l=g,r.yield(g.treeData.followPath(a),2)):r.return(l.selectedNode=r.yieldResult)})}},{key:"gotoIndex",value:function(a){this.selectedNode=this.nodes[a];this.scrollIndexIntoView(a)}},{key:"scrollSelectionIntoView",value:function(){this.selectedNode&&
this.scrollIndexIntoView(this.selectedIndex)}},{key:"scrollIndexIntoView",value:function(a){this.scrollToIndex(a,"into view")}},{key:"centerSelection",value:function(){this.selectedNode&&this.scrollToIndex(this.selectedIndex,"center")}},{key:"scrollToIndex",value:function(a){this.scrollPositionIntoView({row:a-1,column:0})}},{key:"contextMenuForNode",value:function(a,g){Eg.signal(this,"contextMenuRequested",{node:a,evt:g})}},{key:"onKeyDown",value:function(a){var g=this.world().focusedMorph;if(!g.isText||
g.readOnly)return dc._get(Object.getPrototypeOf(m.prototype),"onKeyDown",this).call(this,a)}},{key:"onDragStart",value:function(a){dc._get(Object.getPrototypeOf(m.prototype),"onDragStart",this).call(this,a);var g=this.textAttributeAtPoint(a.positionIn(this))||{},l=g.onDragStart,r=g.onDrag;g=g.onDragEnd;r&&(this._onDragHandler=r);g&&(this._onDragEndHandler=g);l&&l(a)}},{key:"onDrag",value:function(a){this._onDragHandler?this._onDragHandler(a):dc._get(Object.getPrototypeOf(m.prototype),"onDrag",this).call(this,
a)}},{key:"onDragEnd",value:function(a){dc._get(Object.getPrototypeOf(m.prototype),"onDragEnd",this).call(this,a);delete this._onDragHandler;this._onDragEndHandler&&this._onDragEndHandler(a);delete this._onDragEndHandler}},{key:"onMouseDown",value:function(a){var g=this,l,r,v,y,A,E;return $jscomp.asyncExecutePromiseGeneratorProgram(function(F){if(1==F.nextAddress)return l=g.textPositionFromPoint(a.positionIn(g)),r=l.row,v=l.column,y=g.nodes[r+1],y?!g.treeData.isLeaf(y)&&4>v?F.yield(y.isCollapsed,
3):(g.selectedIndex!=r+1&&(g.selectedIndex=r+1),F.jumpTo(2)):F.return();2!=F.nextAddress&&(F.yieldResult?g.uncollapse(y):g.collapse(y));A=g.textAttributeAt({row:r,column:v})||{};(E=A.onMouseDown)&&E(a);F.jumpToEnd()})}},{key:"onMouseUp",value:function(a){dc._get(Object.getPrototypeOf(m.prototype),"onMouseUp",this).call(this,a);var g=(this.textAttributeAtPoint(a.positionIn(this))||{}).onMouseUp;g&&g(a)}},{key:"onHoverIn",value:function(a){dc._get(Object.getPrototypeOf(m.prototype),"onHoverIn",this).call(this,
a);this.activateOnHover&&(this.clipMode="auto")}},{key:"onHoverOut",value:function(a){dc._get(Object.getPrototypeOf(m.prototype),"onHoverOut",this).call(this,a);!Eg.touchInputDevice&&this.activateOnHover&&(this.clipMode="hidden")}},{key:"onContextMenu",value:function(a){if(a.targetMorph===this){a.stop();var g=this.textPositionFromPoint(a.positionIn(this));(g=this.nodes[g.row+1])&&this.contextMenuForNode(g,a)}}},{key:"keybindings",get:function(){return[{keys:"Up|Ctrl-P",command:"select node above"},
{keys:"Down|Ctrl-N",command:"select node below"},{keys:"Left",command:"collapse selected node"},{keys:"Right",command:"uncollapse selected node"},{keys:"Alt-V|PageUp",command:"page up"},{keys:"Ctrl-V|PageDown",command:"page down"},{keys:"Alt-Shift-,",command:"goto first item"},{keys:"Alt-Shift-.",command:"goto last item"},{keys:"Alt-Space",command:"select via filter"},{keys:"Ctrl-L",command:"realign top-bottom-center"},{keys:{mac:"Meta-[",win:"Ctrl-["},command:{command:"collapse or uncollapse all siblings",
args:{what:"collapse"}}},{keys:{mac:"Meta-]",win:"Ctrl-]"},command:{command:"collapse or uncollapse all siblings",args:{what:"uncollapse"}}},{keys:"Alt-N",command:"goto next sibling"},{keys:"Alt-P",command:"goto prev sibling"},{keys:"Alt-U",command:"goto parent"}]}},{key:"commands",get:function(){return Eg.treeCommands}},{key:"highlightChangedNodes",value:function(a){this.treeData.diff(a).forEach(function(g){g=$jscomp.makeIterator(g);var l=g.next().value;g.next();return l.renderedNode&&l.renderedNode.highlight()})}}],
[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Tree"}},{key:"properties",get:function(){return{selectionColor:{type:"ColorGradient",defaultValue:Eg.Color.rgb(21,101,192)},fontFamily:{defaultValue:Eg.config.codeEditor.defaultStyle.fontFamily},nativeCursor:{defaultValue:"auto"},selectable:{defaultValue:!1},acceptsDrops:{defaultValue:!1},readOnly:{defaultValue:!0},fixedWidth:{defaultValue:!0},fixedHeight:{defaultValue:!0},disableIndent:{defaultValue:!1},activateOnHover:{defaultValue:!0},
lineHeight:{defaultValue:1.5},clipMode:{defaultValue:"auto"},padding:{defaultValue:Eg.Rectangle.inset(3)},master:{initialize:function(){this.master={auto:"styleguide://SystemWidgets/tree/light"}}},resizeNodes:{defaultValue:!1,set:function(a){this.setProperty("resizeNodes",a);this.resetCache();this.update()}},treeData:{after:["selection"],set:function(a){this.setProperty("treeData",a);this.resetCache();this.update()}},selectedIndex:{derived:!0,after:["selectedNode","nodes"],get:function(){return this.selectedNode?
this.nodes.indexOf(this.selectedNode):-1},set:function(a){this.selectedNode=this.nodes[a]}},nodes:{derived:!0,after:["treeData"],get:function(){return this.treeData.asList()}},defaultViewState:{get:function(){return Object.assign({},dc._get(Object.getPrototypeOf(m),"prototype",this).defaultViewState,{fastScroll:!1})}},selectedNode:{set:function(a){this.setProperty("selectedNode",a);this.update()}},selectedNodeAndSiblings:{readOnly:!0,derived:!0,after:["selectedNode","treeData"],get:function(){return this.selectedNode?
this.treeData.nodeWithSiblings(this.selectedNode):[]}},selectionFontColor:{isStyleProp:!0,defaultValue:Eg.Color.white,set:function(a){this.setProperty("selectionFontColor",a)}},nonSelectionFontColor:{isStyleProp:!0,defaultValue:Eg.Color.rgbHex("333"),set:function(a){this.setProperty("nonSelectionFontColor",a)}},nodeItemContainer:{derived:!0,readOnly:!0,after:["submorphs"],get:function(){return this}},nodeMorphs:{derived:!0,readOnly:!0,after:["submorphs"],get:function(){return this.nodeItemContainer.submorphs.slice()}}}}}],
e,{pathInPackage:function(){return"tree.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:1470,end:17455})}(Eg.Text));Eg.Tree=mP;Eg.Tree=mP;Eg.Tree=mP;var nP=Da("bq",function(b){var e=lively.FreezerRuntime.recorderFor("lively.components/tree.js"),m=e.hasOwnProperty("TreeData")&&"function"===typeof e.TreeData?e.TreeData:e.TreeData=
function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return dc(m,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){this.root=a;this.parentMap=new WeakMap}},{key:"__dont_serialize__",get:function(){return["parentMap"]}},{key:"__deserialize__",value:function(){this.parentMap=new WeakMap}},{key:"display",value:function(a){throw Error("Not yet implemented");}},{key:"isCollapsed",value:function(a){throw Error("Not yet implemented");
}},{key:"collapse",value:function(a,g){throw Error("Not yet implemented");}},{key:"getChildren",value:function(a){throw Error("Not yet implemented");}},{key:"isLeaf",value:function(a){throw Error("Not yet implemented");}},{key:"getChildrenIfUncollapsed",value:function(a){return this.isCollapsed(a)?[]:this.getChildren(a)}},{key:"safeDisplay",value:function(a){try{return this.display(a)}catch(g){return"[TreeData] Error when trying to display node: "+g}}},{key:"nodeToString",value:function(a){a=this.safeDisplay(a);
return"string"===typeof a?a:a&&Array.isArray(a)?a.map(function(g,l){return 0===l%2?g:""}).join(""):String(a)}},{key:"parentNode",value:function(a){var g=this;return this.parentMap.get(a)||Eg.tree.detect(this.root,function(l){return!g.isLeaf(l)&&g.getChildrenIfUncollapsed(l).includes(a)},function(l){return g.getChildrenIfUncollapsed(l)})}},{key:"nodeWithSiblings",value:function(a){return(a=this.parentNode(a))?this.getChildrenIfUncollapsed(a):[]}},{key:"asList",value:function(){return this.asListWithIndexAndDepth().map(function(a){return a.node})}},
{key:"asListWithIndexAndDepth",value:function(a){var g=this;a=void 0===a?!1:a;var l=[];Eg.tree.prewalk(this.root,function(r,v,y){return l.push({node:r,depth:y,i:v})},function(r){return g.getChildrenIfUncollapsed(r)});return a?Eg.arr.filter(l,a):l}},{key:"pathOf",value:function(a){for(var g=[];a;)g.unshift(a),a=this.parentNode(a);return g}},{key:"followPath",value:function(a,g,l){l=void 0===l?this.root:l;var r=this,v,y,A,E;return $jscomp.asyncExecutePromiseGeneratorProgram(function(F){switch(F.nextAddress){case 1:g||
(g=function(H,I){return H===I});v=a.findIndex(function(H){return g(H,l)});a=a.slice(v+1);if(!a.length)return F.return(null);y=l;case 2:if(!a.length){F.jumpTo(3);break}if(!r.isCollapsed(y)){F.jumpTo(4);break}return F.yield(r.collapse(y,!1),4);case 4:A=a.shift();E=r.getChildrenIfUncollapsed(y).find(function(H){return g(A,H)});if(!E)throw Error("Cannot descend into tree, next node of "+a.join(".")+" not found at "+r.safeDisplay(y));y=E;F.jumpTo(2);break;case 3:return F.return(y)}})}},{key:"diff",value:function(a){var g=
[],l=this.asListWithIndexAndDepth();a=a.asListWithIndexAndDepth();if(l.length!=a.length)return[];l=$jscomp.makeIterator(Eg.arr.zip(l,a));for(a=l.next();!a.done;a=l.next()){var r=$jscomp.makeIterator(a.value);a=r.next().value;r=r.next().value;Eg.obj.equals(a.node.value,r&&r.node.value)||g.push([a.node,r.node])}return g}},{key:"patch",value:function(a){var g=this.diff(a);if(0<g.length){a=$jscomp.makeIterator(g);for(g=a.next();!g.done;g=a.next()){var l=$jscomp.makeIterator(g.value);g=l.next().value;
l=l.next().value;g.value=l.value}return this}return a}},{key:"uncollapseAll",value:function(a,g,l){g=void 0===g?0:g;var r=this,v,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(A){switch(A.nextAddress){case 1:if(l){A.jumpTo(2);break}return A.yield(r.uncollapseAll(a,g,r.root),3);case 3:return A.return(A.yieldResult);case 2:if(!a(l,g)){A.jumpTo(0);break}if(!l.isCollapsed){A.jumpTo(5);break}return A.yield(r.collapse(l,!1),6);case 6:case 5:y=A.forIn(l.children);case 7:if(null==(v=y.getNext()))A.jumpTo(0);
else return A.yield(r.uncollapseAll(a,g+1,l.children[v]),7)}})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"TreeData"}}],e,{pathInPackage:function(){return"tree.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:17465,end:22466})}(void 0));Eg.TreeData=nP;Eg.TreeData=nP;Eg.TreeData=nP;Eg.treeCommands=[{name:"select via filter",
exec:function(b){var e,m,a,g,l,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){if(1==v.nextAddress)return e=b.treeData,e.asListWithIndexAndDepth(),e.asListWithIndexAndDepth().map(function(y){return Object.assign(y,{string:e.nodeToString(y.node)})}),m=Eg.string.lines(Eg.string.printTree(e.root,e.nodeToString.bind(e),e.getChildrenIfUncollapsed.bind(e))),a=e.asList().map(function(y,A){return{isListItem:!0,string:m[A],value:y}}),v.yield(b.world().filterableListPrompt("Select item",a),
2);g=v.yieldResult;l=$jscomp.makeIterator(g.selected);if(r=l.next().value)b.selectedNode=r,b.scrollSelectionIntoView();return v.return(!0)})}},{name:"page up",exec:function(b){b.scrollPageUp(1);var e=b.scroll,m=b.padding.top(),a=e.y;e=b.lineHeightCache.findIndex(function(g){return a<=(m+=g)});e--;b.gotoIndex(Math.max(1,e));return!0}},{name:"page down",exec:function(b){b.scrollPageDown(1);var e=b.scroll,m=b.padding.top(),a=e.y+b.height;e=b.lineHeightCache.findIndex(function(g){return a<=(m+=g)});e--;
b.gotoIndex(Math.min(e,b.nodes.length-1));return!0}},{name:"goto first item",exec:function(b){b.gotoIndex(1);return!0}},{name:"goto last item",exec:function(b){b.gotoIndex(b.nodes.length-1);return!0}},{name:"goto next sibling",exec:function(b){var e=b.selectedNodeAndSiblings;if(e=e[e.indexOf(b.selectedNode)+1])b.selectedNode=e,b.scrollSelectionIntoView();return!0}},{name:"goto prev sibling",exec:function(b){var e=b.selectedNodeAndSiblings;if(e=e[e.indexOf(b.selectedNode)-1])b.selectedNode=e,b.scrollSelectionIntoView();
return!0}},{name:"goto parent",exec:function(b){b.selectedNode&&(b.selectedNode=b.treeData.parentNode(b.selectedNode),b.scrollSelectionIntoView());return!0}},{name:"collapse selected node",exec:function(b){var e;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){return 1==m.nextAddress?(e=b.selectedNode,e?b.treeData.isCollapsed(e)?(b.selectedNode=b.treeData.parentNode(e),b.scrollSelectionIntoView(),m.jumpTo(2)):m.yield(b.onNodeCollapseChanged({node:b.selectedNode,isCollapsed:!0}),2):m.return(!0)):
m.return(!0)})}},{name:"uncollapse selected node",exec:function(b){return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){return 1==e.nextAddress?b.selectedNode?e.yield(b.onNodeCollapseChanged({node:b.selectedNode,isCollapsed:!1}),2):e.jumpTo(2):e.return(!0)})}},{name:"collapse or uncollapse all siblings",exec:function(b,e){function m(F){return Eg.arr.filter(l.getChildrenIfUncollapsed(F),function(H){return!l.isLeaf(H)})}function a(F,H){return Promise.all(F.map(function(I){return b.onNodeCollapseChanged({node:I,
isCollapsed:H})}))}e=void 0===e?{what:"collapse"}:e;var g,l,r,v,y,A,E;return $jscomp.asyncExecutePromiseGeneratorProgram(function(F){if(1==F.nextAddress){g="collapse"===e.what;l=b.treeData;if(g){if(l.isCollapsed(b.selectedNode))return F.return(!0);v=l.parentNode(b.selectedNode);y=-1;Eg.tree.prewalk(v,function(H,I,M){M<y||(M>y&&(y=M,r=[]),M===y&&Eg.arr.pushIfNotIncluded(r,l.parentNode(H)))},l.getChildrenIfUncollapsed.bind(l))}else for(A=Eg.arr.compact([l.parentNode(b.selectedNode)]);A.length;){r=Eg.arr.flatmap(A,
function(H){return m(H)});E=r.every(function(H){return l.isCollapsed(H)===g});if(!E)break;A=r}return F.yield(a(r,g),2)}b.scrollSelectionIntoView();return F.return(!0)})}},{name:"select node above",exec:function(b){var e=b.nodes,m=b.selectedIndex;1>=m&&(m=e.length);b.selectedNode=e[m-1];b.scrollSelectionIntoView();return!0}},{name:"select node below",exec:function(b){var e=b.nodes,m=b.selectedIndex;if(-1>=m||m>=e.length-1)m=0;b.selectedNode=e[m+1];b.scrollSelectionIntoView();return!0}},{name:"realign top-bottom-center",
exec:function(b){if(b.selectedNode){var e=b.scroll,m=e.x;e=e.y;var a=b.lineBounds(b.selectedIndex),g=a.topLeft();a=b.height-a.height;e=2>Math.abs(g.y-e)?g.y-a:2>Math.abs(g.y-e-.5*a)?g.y:g.y-.5*a;b.scroll=Eg.pt(m,e);return!0}}},{name:"print contents in text window",exec:function(b){var e=b.treeData;e=Eg.string.printTree(e.root,e.nodeToString.bind(e),e.getChildrenIfUncollapsed.bind(e));var m=b.getWindow()?"printed "+b.getWindow().title:b.name;return b.world().execCommand("open text window",{title:m,
content:e,name:m,fontFamily:Eg.config.codeEditor.defaultStyle.fontFamily})}}];var nsa=Object.freeze({__proto__:null,Tree:mP,TreeData:nP}),uz=lively.FreezerRuntime.recorderFor("lively.components/iframe.js");uz.promise=zh;uz.HTMLMorph=Uy;var oP=function(b){var e=lively.FreezerRuntime.recorderFor("lively.components/iframe.js"),m=e.hasOwnProperty("IFrameMorph")&&"function"===typeof e.IFrameMorph?e.IFrameMorph:e.IFrameMorph=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return dc(m,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){a.src||a.srcdoc||(a.srcdoc="<p>Empty iframe</p>");dc._get(Object.getPrototypeOf(m.prototype),Symbol.for("lively-instance-initialize"),this).call(this,a)}},{key:"changeSrc",value:function(a,g){var l=this,r=this.iframe,v=this._loadPromise;v&&!v.loaded&&v.reject();this._loadPromise=uz.promise.deferred();this._loadPromise.loaded=!1;r.onload=function(y){l._loadPromise.loaded=!0;l._loadPromise.resolve(y)};g=a||g;
v=a?"src":"srcdoc";a=a?"srcdoc":"src";this.addValueChange(a,null);this.addValueChange(v,g);r.removeAttribute(a);r.setAttribute(v,g);this._loadPromise[v]=g}},{key:"whenLoaded",value:function(){return this._loadPromise.promise}},{key:"reload",value:function(){return this.iframe.src=this.src}},{key:"run",value:function(a){return this.innerWindow.eval("("+a+")();")}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"IFrameMorph"}},{key:"printTextMorph",value:function(a){var g,l,r,v,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(A){if(1==
A.nextAddress)return A.yield(a.whenRendered(),2);if(3!=A.nextAddress)return g=a.env.renderer.getNodeForMorph(a),l=uz.IFrameMorph.open({srcdoc:g.outerHTML}),A.yield(l.whenLoaded(),3);r=l.innerWindow.document;r.body.style.whiteSpace="normal";r.body.style.margin="0.5cm";r.querySelector(".Text").style.width="100%";r.querySelector(".Text").style.overflow="visible";r.querySelectorAll(".marker-layer-part").forEach(function(E){return E.parentNode.removeChild(E)});v=r.querySelector(".text-layer");v.style.whiteSpace=
"pre-wrap";y=Array.from(v.querySelectorAll("div"));y.forEach(function(E){E.childNodes[0]&&(Array.from(E.childNodes).forEach(function(F){return v.insertBefore(F,E)}),v.insertBefore(r.createElement("br"),E),v.removeChild(E))});l.innerWindow.print();l.getWindow().remove();A.jumpToEnd()})}},{key:"open",value:function(a){a=void 0===a?{}:a;return(new this(a)).openInWindow({title:a.title||"iframe"}).targetMorph}},{key:"properties",get:function(){return{iframe:{after:["domNode"],readOnly:!0,get:function(){return this.domNode}},
innerWindow:{after:["iframe"],readOnly:!0,get:function(){return this.iframe.contentWindow}},innerWorld:{after:["innerWindow"],readOnly:!0,get:function(){return this.innerWindow.$world}},src:{after:["domNode"],set:function(a){this.changeSrc(a,null)}},srcdoc:{after:["domNode"],set:function(a){this.changeSrc(null,a)}},domNode:{get:function(){this._domNode||(this._domNode=this.document.createElement("iframe"),this._domNode.setAttribute("style","position: absolute; width: 100%; height: 100%;"),this._domNode.setAttribute("allowfullscreen",
!0));return this._domNode},set:function(a){return this._domNode=a}}}}}],e,{pathInPackage:function(){return"iframe.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:622,end:6160})}(uz.HTMLMorph);uz.IFrameMorph=oP;uz.IFrameMorph=oP;uz.IFrameMorph=oP;var osa=Object.freeze({__proto__:null,IFrameMorph:oP}),kg=lively.FreezerRuntime.recorderFor("lively.components/window.js");
kg.arr=$f;kg.promise=zh;kg.pt=xi;kg.LinearGradient=Bn;kg.Color=Fg;kg.Rectangle=He;kg.Label=Wt;kg.morph=sa;kg.Morph=Ll;kg.HorizontalLayout=Gv;kg.StyleSheet=Hv;kg.connect=rl;kg.signal=Wl;kg.easings=rr;var xX=function(b){var e=lively.FreezerRuntime.recorderFor("lively.components/window.js"),m=e.hasOwnProperty("Window")&&"function"===typeof e.Window?e.Window:e.Window=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return dc(m,
b,[{key:"build",value:function(){this.submorphs=[this.buildHeader(),this.buildResizer()]}},{key:"openWindowMenu",value:function(){var a=this,g,l,r,v,y,A,E;return $jscomp.asyncExecutePromiseGeneratorProgram(function(F){return 1==F.nextAddress?(g=a.world()||a.env.world,l=a.targetMorph.world(),r=l.openMenu,v=[["Change Window Title",function(){var H;return $jscomp.asyncExecutePromiseGeneratorProgram(function(I){if(1==I.nextAddress)return I.yield(g.prompt("Enter New Name",{input:a.title}),2);if(H=I.yieldResult)a.title=
H;I.jumpToEnd()})}],["Align and resize",[{alias:"left",target:g,command:"resize active window",args:{window:a,how:"left"}},{alias:"center",target:g,command:"resize active window",args:{window:a,how:"center"}},{alias:"right",target:g,command:"resize active window",args:{window:a,how:"right"}},{alias:"reset",target:g,command:"resize active window",args:{window:a,how:"reset"}}]],{isDivider:!0}],y=v.concat,A=$jscomp,E=A.arrayFromIterable,F.yield(a.targetMorph.menuItems(),2)):F.return(r.call(l,y.call(v,
E.call(A,F.yieldResult))))})}},{key:"toggleFader",value:function(a){var g=this,l,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){switch(v.nextAddress){case 1:l=g.getSubmorphNamed("fader")||g.addMorph({name:"fader",fill:kg.Color.black.withA(.5),opacity:0,extent:g.extent});if(a){r=g.world().visibleBounds().translateForInclusion(g.bounds());g._originalBounds=g.bounds();g.animate({bounds:r,duration:300});g.borderColor=kg.Color.gray.darker();g._faderTriggered=!0;l.opacity=1;v.jumpTo(0);
break}g._originalBounds&&(g.animate({bounds:g._originalBounds,duration:300}),g._originalBounds=null);g._faderTriggered=!1;return v.yield(g.whenRendered(),3);case 3:return v.yield(kg.promise.delay(100),4);case 4:return g.borderColor=kg.Color.gray,g._faderTriggered?v.return():v.yield(l.animate({opacity:0,duration:300}),5);case 5:l.remove(),v.jumpToEnd()}})}},{key:"isWindow",get:function(){return!0}},{key:"targetMorphBounds",value:function(){return new kg.Rectangle(0,25,this.width,this.height-25)}},
{key:"relayoutWindowControls",value:function(){var a=this.innerBounds(),g=this.ui.windowTitle,l=this.ui.resizer,r=a.withHeight(25),v=this.ui.header,y=this.ui.windowControls.bounds().right()+3,A=r.withLeftCenter(kg.pt(y,r.height/2));l.bottomRight=a.bottomRight();!this.minimized&&this.targetMorph&&this.targetMorph.isLayoutable&&this.targetMorph.setBounds(this.targetMorphBounds());g.textBounds().width<r.width-2*y?g.center=r.center():g.leftCenter=A.leftCenter();v.width=this.width}},{key:"ensureNotOverTheTop",
value:function(){var a=this.world();if(a){var g=this.globalBounds();g.top()<a.innerBounds().top()&&this.moveBy(kg.pt(0,a.innerBounds().top()-g.top()))}}},{key:"buildHeader",value:function(){return kg.morph({name:"header",extent:kg.pt(this.width,50),submorphs:[kg.morph({name:"window controls",styleClasses:["buttonGroup"],submorphs:this.buildButtons()}),this.buildTitleLabel()]})}},{key:"buildButtons",value:function(){var a=this.getSubmorphNamed("close")||kg.morph({name:"close",styleClasses:["windowButton",
"closeButton"],tooltip:"close window",submorphs:[kg.Label.icon("times",{name:"label",styleClasses:["defaultLabelStyle","default"]})]});kg.connect(a,"onMouseDown",this,"close");var g=this.getSubmorphNamed("minimize")||kg.morph({name:"minimize",styleClasses:["windowButton","minimizeButton"],tooltip:"collapse window",submorphs:[kg.Label.icon("minus",{name:"label",styleClasses:["defaultLabelStyle","default"]})]});kg.connect(g,"onMouseDown",this,"minimized",{updater:function(r){r(!this.targetObj.minimized)}});
if(this.resizable){var l=this.getSubmorphNamed("menu")||kg.morph({name:"menu",styleClasses:["windowButton","windowMenuButton"],tooltip:"Open Window Menu",submorphs:[kg.Label.icon("chevron-down",{name:"label",styleClasses:["defaultLabelStyle","default"]})]});kg.connect(l,"onMouseDown",this,"openWindowMenu")}return kg.arr.compact([a,g,l])}},{key:"buildTitleLabel",value:function(){return this.addMorph({padding:kg.Rectangle.inset(0,2,0,0),styleClasses:["windowTitleLabel"],type:"label",name:"window title",
reactsToPointer:!1,value:""})}},{key:"resizeBy",value:function(a){dc._get(Object.getPrototypeOf(m.prototype),"resizeBy",this).call(this,a);this.relayoutWindowControls()}},{key:"resizeAt",value:function(a){var g=$jscomp.makeIterator(a);a=g.next().value;g=g.next().value;switch(a){case "right":this.resizeBy(g.withY(0));break;case "bottom right":this.resizeBy(g);break;case "bottom":this.resizeBy(g.withX(0));break;case "left":a=this.right;this.resizeBy(g.withY(0).negated());this.right=a;break;case "bottom left":a=
this.right,this.resizeBy(g.scaleByPt(kg.pt(-1,1))),this.right=a}this.relayoutResizer()}},{key:"relayoutResizer",value:function(){var a=this.getSubmorphNamed("resizer"),g=$jscomp.makeIterator(a.submorphs),l=g.next().value,r=g.next().value,v=g.next().value,y=g.next().value;g=g.next().value;l.height=this.height-10;l.bottomRight=this.extent.subXY(0,10);r.bottomRight=this.extent;v.height=this.height-10;v.bottomLeft=kg.pt(0,this.height-10);y.bottomLeft=kg.pt(0,this.height);g.width=this.width-20;g.bottomLeft=
kg.pt(10,this.height);a.position=kg.pt(0,0)}},{key:"buildResizer",value:function(){var a,g,l,r;var v=kg.Color.transparent;var y=kg.morph({name:"resizer",fill:kg.Color.transparent,position:kg.pt(0,0),submorphs:[a=kg.morph({name:"right resizer",fill:v,width:10,draggable:!0,nativeCursor:"ew-resize"}),g=kg.morph({name:"bottom right resizer",fill:v,extent:kg.pt(10,10),draggable:!0,nativeCursor:"nwse-resize"}),l=kg.morph({name:"right resizer",fill:v,width:10,draggable:!0,nativeCursor:"ew-resize"}),r=kg.morph({name:"bottom left resizer",
draggable:!0,fill:v,extent:kg.pt(10,10),nativeCursor:"nesw-resize"}),v=kg.morph({name:"bottom resizer",draggable:!0,fill:v,height:10,nativeCursor:"ns-resize"})]});kg.connect(g,"onDrag",this,"resizeAt",{converter:function(A){return["bottom right",A.state.dragDelta]}});kg.connect(a,"onDrag",this,"resizeAt",{converter:function(A){return["right",A.state.dragDelta]}});kg.connect(v,"onDrag",this,"resizeAt",{converter:function(A){return["bottom",A.state.dragDelta]}});kg.connect(l,"onDrag",this,"resizeAt",
{converter:function(A){return["left",A.state.dragDelta]}});kg.connect(r,"onDrag",this,"resizeAt",{converter:function(A){return["bottom left",A.state.dragDelta]}});this.addMorph(y);this.relayoutResizer();return y}},{key:"toggleMinimize",value:function(){var a=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(g){a.minimized=!a.minimized;g.jumpToEnd()})}},{key:"applyMinimize",value:function(){var a=this,g,l,r,v,y,A,E,F,H,I,M,N,W;return $jscomp.asyncExecutePromiseGeneratorProgram(function(X){if(1==
X.nextAddress){if(!a.targetMorph)return X.return();g=a;l=g.nonMinizedBounds;r=g.minimized;v=g.width;y=a.ui;A=y.windowTitle;E=y.resizer;F=a.bounds();H=a.getSubmorphNamed("minimize");I=kg.easings.outQuad;if(!r)return a.minimizedBounds=F,a.targetMorph&&(a.targetMorph.visible=!0),l=a.world().bounds().translateForInclusion(l||F),a.animate({bounds:l,styleClasses:["neutral","active"].concat($jscomp.arrayFromIterable(kg.arr.without(a.styleClasses,"minimzed"))),duration:100,easing:I}),H.tooltip="collapse window",
X.jumpTo(2);a.nonMinizedBounds=F;M=(a.minimizedBounds||F).withExtent(kg.pt(v,28));N=A.textBounds();W=a.get("window controls").bounds().right()+3;N.width+2*W<M.width&&(M=M.withWidth(N.width+W+5));a.minimizedBounds=M;H.tooltip="uncollapse window";return X.yield(a.animate({styleClasses:["minimized","active"].concat($jscomp.arrayFromIterable(kg.arr.without(a.styleClasses,"neutral"))),bounds:M,duration:100,easing:I}),3)}2!=X.nextAddress&&a.targetMorph&&(a.targetMorph.visible=!1);E.visible=!a.minimized;
a.relayoutWindowControls();X.jumpToEnd()})}},{key:"close",value:function(){var a=this,g,l,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){if(1==v.nextAddress)return a.targetMorph&&"function"===typeof a.targetMorph.onWindowClose?v.yield(a.targetMorph.onWindowClose(),3):v.jumpTo(2);2!=v.nextAddress&&(g=v.yieldResult);if(!1===g)return v.return();l=a.world();a.deactivate();a.remove();(r=l.activeWindow()||kg.arr.last(l.getWindows()))&&r.activate();kg.signal(a,"windowClosed",a);v.jumpToEnd()})}},
{key:"onMouseDown",value:function(a){this.activate(a)}},{key:"onDragStart",value:function(a){dc._get(Object.getPrototypeOf(m.prototype),"onDragStart",this).call(this,a);this.targetMorph&&(a.state.origReactsToPointer=this.targetMorph.reactsToPointer,this.targetMorph.reactsToPointer=!1)}},{key:"onDragEnd",value:function(a){dc._get(Object.getPrototypeOf(m.prototype),"onDragEnd",this).call(this,a);this.targetMorph&&(this.targetMorph.reactsToPointer=a.state.origReactsToPointer)}},{key:"onDrag",value:function(a){dc._get(Object.getPrototypeOf(m.prototype),
"onDrag",this).call(this,a);this.ensureNotOverTheTop()}},{key:"focus",value:function(){var a=this.world(),g=this.targetMorph;a&&g&&(!a.focusedMorph||a.focusedMorph!==g&&!g.isAncestorOf(a.focusedMorph))&&g.focus()}},{key:"isActive",value:function(){var a=this.world();return a&&"bold"==this.ui.windowTitle.fontWeight?kg.arr.last(a.getWindows())===this:!1}},{key:"activate",value:function(a){var g=this;if(this.isActive())return this.bringToFront(),this.focus(a),this.renderOnGPU=!0,this.relayoutWindowControls(),
this;this.master={auto:"styleguide://System/window/light/active"};this.world()?this.bringToFront():this.openInWorldNearHand();var l=this.world()||this.env.world;kg.arr.without(l.getWindows(),this).forEach(function(r){return r.deactivate()});this.focus(a);kg.signal(this,"windowActivated",this);Promise.resolve(this.master.applyIfNeeded(!0)).then(function(){return g.relayoutWindowControls()});return this}},{key:"deactivate",value:function(){this.master&&"styleguide://System/window/light/inactive"==this.master.auto||
(this.master={auto:"styleguide://System/window/light/inactive"},this.relayoutWindowControls(),this.renderOnGPU=!1)}},{key:"keybindings",get:function(){return dc._get(Object.getPrototypeOf(m.prototype),"keybindings",this).concat([{keys:{mac:"Meta-Shift-L R E N",win:"Ctrl-Shift-L R E N"},command:"[window] change title"}])}},{key:"commands",get:function(){return dc._get(Object.getPrototypeOf(m.prototype),"commands",this).concat([{name:"[window] change title",exec:function(a,g){g=void 0===g?{}:g;var l,
r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){if(1==v.nextAddress)return(l=g.title)?v.jumpTo(2):v.yield(a.world().prompt("Enter new title",{input:a.title,historyId:"lively.morphic-window-title-hist"}),3);2!=v.nextAddress&&(l=v.yieldResult);if(r=l)a.title=r;return v.return(!0)})}}])}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Window"}},{key:"properties",get:function(){return{submorphs:{initialize:function(){this.build()}},ui:{derived:!0,get:function(){return{header:this.get("header"),
resizer:this.get("resizer"),windowControls:this.get("window controls"),windowTitle:this.get("window title")}}},master:{initialize:function(){this.master={auto:"styleguide://System/window/light/active"}}},styleClasses:{defaultValue:["active"]},clipMode:{defaultValue:"hidden"},resizable:{defaultValue:!0},title:{after:["submorphs"],derived:!0,get:function(){return this.ui.windowTitle.textString},set:function(a){var g=this,l,r,v,y,A,E;return $jscomp.asyncExecutePromiseGeneratorProgram(function(F){if(1==
F.nextAddress){l="string"===typeof a?[a,{}]:a;r=[];for(v=0;v<l.length;v+=2)y=l[v],A=l[v+1],y=y.replace(/\n/g,""),E=y.length+0-100,0<E&&(y=y.slice(0,-E)),r.push(y,A||{});g.ui.windowTitle.value=r;return F.yield(g.whenRendered(),2)}g.relayoutWindowControls();F.jumpToEnd()})}},targetMorph:{after:["submorphs"],derived:!0,get:function(){return kg.arr.withoutAll(this.submorphs,[this.get("header"),this.get("resizer")])[0]},set:function(a){var g=[this.get("header"),this.get("resizer")];kg.arr.withoutAll(this.submorphs,
g).forEach(function(l){return l.remove()});a&&this.addMorph(a,this.resizable?this.get("resizer"):!1);this.relayoutWindowControls()}},minimizedBounds:{serialize:!1},nonMinizedBounds:{},nonMaximizedBounds:{},minimized:{set:function(a){this.setProperty("minimized",a);this.applyMinimize()}},maximized:{}}}}],e,{pathInPackage:function(){return"window.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",
version:"0.1.0"}}},{start:343,end:16164})}(kg.Morph);xX=kg.Window;var yX=Da("aN",xX);kg.default=xX;var Xe=lively.FreezerRuntime.recorderFor("lively.components/prompts.js");Xe.Rectangle=He;Xe.rect=zm;Xe.Color=Fg;Xe.pt=xi;Xe.morph=sa;Xe.VerticalLayout=Vy;Xe.Morph=Ll;Xe.StyleSheet=Hv;Xe.Text=Vt;Xe.GridLayout=Wy;Xe.Icon=Np;Xe.HorizontalLayout=Gv;Xe.InputLine=RH;Xe.PasswordInputLine=Zy;Xe.arr=$f;Xe.obj=Ag;Xe.promise=zh;Xe.connect=rl;Xe.List=UE;Xe.FilterableList=EI;Xe.RadioButtonGroup=DI;Xe.RadioButton=
CI;var pP=function(b){var e=lively.FreezerRuntime.recorderFor("lively.components/prompts.js"),m=e.hasOwnProperty("AbstractPrompt")&&"function"===typeof e.AbstractPrompt?e.AbstractPrompt:e.AbstractPrompt=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return dc(m,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){a=void 0===a?{}:a;dc._get(Object.getPrototypeOf(m.prototype),Symbol.for("lively-instance-initialize"),
this).call(this,Xe.obj.dissoc(a,["label","commands","keybindings"]));this.build(a);a.commands&&this.addCommands(a.commands);a.keybindings&&this.addKeyBindings(a.keybindings)}},{key:"isPrompt",get:function(){return!0}},{key:"resolve",value:function(a){return this.answer.resolve(a)}},{key:"reject",value:function(a){return this.answer.resolve(a)}},{key:"activate",value:function(){var a=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(g){a.focus();a.answer=Xe.promise.deferred();a._isActive=
!0;Xe.promise.finally(a.answer.promise,function(){return a._isActive=!1});a.autoRemove&&Xe.promise.finally(a.answer.promise,function(){return a.fadeOut(200)});return g.return(a.answer.promise)})}},{key:"isActive",value:function(){return!!this.world()&&this._isActive}},{key:"build",value:function(){throw Error("Not yet implemented");}},{key:"applyLayout",value:function(){throw Error("Not yet implemented");}},{key:"keybindings",get:function(){return dc._get(Object.getPrototypeOf(m.prototype),"keybindings",
this).concat([{keys:"Enter",command:"resolve"},{keys:"Escape",command:"reject"},{keys:{mac:"Meta-."},command:"reject"}])}},{key:"commands",get:function(){var a=this;return dc._get(Object.getPrototypeOf(m.prototype),"commands",this).concat([{name:"resolve",exec:function(g,l){a.resolve(l);return!0}},{name:"reject",exec:function(g,l){a.reject(l);return!0}}])}},{key:"transitionTo",value:function(a,g){g=void 0===g?300:g;var l=this,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){r=Xe.morph({fill:l.fill,
borderRadius:l.borderRadius});v=Xe.morph({fill:null,origin:Xe.pt(5,5)});a.opacity=0;a.fill=Xe.Color.transparent;a.openInWorld();l.fill=Xe.Color.transparent;$world.addMorph(r,l);r.setBounds(l.bounds());v.openInWorld();v.addMorph(a);a.center=v.origin;v.center=r.center=l.center;v.scale=a.width/l.width;r.whenRendered().then(function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(A){if(1==A.nextAddress)return l.animate({scale:l.width/a.width,opacity:0,duration:g}),a.animate({opacity:1,duration:g}),
v.animate({scale:1,duration:g}),A.yield(r.animate({bounds:v.bounds(),duration:g}),2);a.fill=r.fill;$world.addMorph(a);r.remove();l.remove();v.remove();A.jumpToEnd()})});y.jumpToEnd()})}},{key:"addNamed",value:function(a,g){var l=this.getSubmorphNamed(a)||this.addMorph(g.isMorph?g:Xe.morph(Object.assign({},g,{name:a})));g.label&&(l.label=g.label);g.isMorph&&(l.name=a);return l}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"AbstractPrompt"}},{key:"properties",get:function(){return{fill:{defaultValue:Xe.Color.black.withA(.6)},
extent:{defaultValue:Xe.pt(300,80)},borderRadius:{defaultValue:5},dropShadow:{initialize:function(){this.dopShadow=!0}},clipMode:{defaultValue:"hidden"},_isActive:{defaultValue:!1},autoRemove:{defaultValue:!0},epiMorph:{defaultValue:!0},answer:{defaultValue:null,derived:!0},label:{derived:!0,after:["submorphs"],get:function(){return this.getSubmorphNamed("promptTitle").value},set:function(a){this.getSubmorphNamed("promptTitle").value=a}}}}}],e,{pathInPackage:function(){return"prompts.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:442,end:3898})}(Xe.Morph);Xe.AbstractPrompt=pP;Xe.AbstractPrompt=pP;Xe.AbstractPrompt=pP;var qP=Da("aF",function(b){var e=lively.FreezerRuntime.recorderFor("lively.components/prompts.js"),m=e.hasOwnProperty("InformPrompt")&&"function"===typeof e.InformPrompt?e.InformPrompt:e.InformPrompt=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return dc(m,b,[{key:"build",value:function(a){var g=this,l=a=void 0===a?{}:a,r=l.label,v=this.addNamed("promptTitle",{type:"text",lineWrapping:l.lineWrapping});l=this.addNamed("ok button",{type:"button",label:"OK",width:100});this.addNamed("button wrapper",{submorphs:[l]});v.textString=r;Xe.connect(l,"fire",this,"resolve");a.lineWrapping||(this.opacity=0,this.whenRendered().then(function(){if(v.document){var y=g.center;g.width=Math.max(g.width,v.document.width+100);g.align(g.center,y)}g.opacity=
1}))}},{key:"keybindings",get:function(){return dc._get(Object.getPrototypeOf(m.prototype),"keybindings",this).concat([{keys:"Escape",command:"resolve"}])}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"InformPrompt"}},{key:"properties",get:function(){return{lineWrapping:{defaultValue:!0},master:{initialize:function(){this.master={auto:"styleguide://SystemPrompts/prompts/inform"}}}}}}],e,{pathInPackage:function(){return"prompts.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:3907,end:5141})}(Xe.AbstractPrompt));Xe.InformPrompt=qP;Xe.InformPrompt=qP;Xe.InformPrompt=qP;var rP=Da("aG",function(b){var e=lively.FreezerRuntime.recorderFor("lively.components/prompts.js"),m=e.hasOwnProperty("ConfirmPrompt")&&"function"===typeof e.ConfirmPrompt?e.ConfirmPrompt:e.ConfirmPrompt=function(a){a&&a[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return dc(m,b,[{key:"build",value:function(a){var g=this,l=this.addNamed("promptTitle",{type:"text"});l.value=a.label;a=this.addNamed("ok button",{type:"button",label:this.confirmLabel});var r=this.addNamed("cancel button",{type:"button",label:this.rejectLabel});this.addNamed("button wrapper",{submorphs:[a,r]});Xe.connect(a,"fire",this,"resolve");Xe.connect(r,"fire",this,"reject");l.lineWrapping=this.lineWrapping;this.lineWrapping||
(this.opacity=0,this.whenRendered().then(function(){l.lineWrapping=g.lineWrapping;var v=g.center;g.width=Math.max(g.width,l.document.width+100);g.center=v;g.opacity=1}))}},{key:"resolve",value:function(){dc._get(Object.getPrototypeOf(m.prototype),"resolve",this).call(this,!0)}},{key:"reject",value:function(){dc._get(Object.getPrototypeOf(m.prototype),"resolve",this).call(this,!1)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ConfirmPrompt"}},{key:"properties",get:function(){return{lineWrapping:{defaultValue:!0},
confirmLabel:{defaultValue:"OK"},rejectLabel:{defaultValue:"CANCEL"},master:{initialize:function(){this.master={auto:"styleguide://SystemPrompts/prompts/confirm"}}}}}}],e,{pathInPackage:function(){return"prompts.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:5188,end:6560})}(Xe.AbstractPrompt));Xe.ConfirmPrompt=rP;Xe.ConfirmPrompt=
rP;Xe.ConfirmPrompt=rP;var sP=Da("aH",function(b){var e=lively.FreezerRuntime.recorderFor("lively.components/prompts.js"),m=e.hasOwnProperty("MultipleChoicePrompt")&&"function"===typeof e.MultipleChoicePrompt?e.MultipleChoicePrompt:e.MultipleChoicePrompt=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return dc(m,b,[{key:"resolve",value:function(a){dc._get(Object.getPrototypeOf(m.prototype),"resolve",this).call(this,a||
this.getSubmorphNamed("choices").value)}},{key:"build",value:function(a){var g=a=void 0===a?{choices:["No choice"]}:a;a=g.label;var l=g.choices;g=this.addNamed("ok button",{type:"button"});var r=this.addNamed("cancel button",{type:"button"});a&&(this.addNamed("promptTitle",{type:"text"}).value=a);var v=this.addNamed("choices",{name:"choices",type:Xe.RadioButtonGroup});this.addNamed("button wrapper",{submorphs:[g,r]});g&&Xe.connect(g,"fire",this,"resolve");r&&Xe.connect(r,"fire",this,"reject");this.whenRendered().then(function(){v.choices=
l})}},{key:"onKeyDown",value:function(a){if(/^[0-9]$/.test(a.keyCombo)){var g=this.getSubmorphNamed("button "+(Number(a.keyCombo)-1));if(g)return g.trigger(),a.stop()}return dc._get(Object.getPrototypeOf(m.prototype),"onKeyDown",this).call(this,a)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"MultipleChoicePrompt"}},{key:"properties",get:function(){return{title:{derived:!0,after:["submorphs"],set:function(a){this.getSubmorphNamed("title").value=a}},choices:{after:["submorphs"],
derived:!0,set:function(a){var g;if(g=this.getSubmorphNamed("choices"))g.choices=a}},master:{initialize:function(){this.master={auto:"styleguide://SystemPrompts/prompts/multiple choice"}}}}}}],e,{pathInPackage:function(){return"prompts.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:6649,end:8484})}(Xe.AbstractPrompt));Xe.MultipleChoicePrompt=
sP;Xe.MultipleChoicePrompt=sP;Xe.MultipleChoicePrompt=sP;var tP=Da("aI",function(b){var e=lively.FreezerRuntime.recorderFor("lively.components/prompts.js"),m=e.hasOwnProperty("TextPrompt")&&"function"===typeof e.TextPrompt?e.TextPrompt:e.TextPrompt=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return dc(m,b,[{key:"maxWidth",get:function(){return this.env.world.visibleBounds().width-20}},{key:"build",value:function(a){var g=
this,l=a.label,r=a.input,v=a.historyId;a=a.useLastInput;var y=this.addNamed("promptTitle",{type:"text"});y.value=l;l=this.addNamed("input",Xe.Text.makeInputLine({historyId:v,highlightWhenFocused:!1}));l.viewState.fastScroll=!1;l.textString=r||"";v&&a&&(r=Xe.arr.last(l.inputHistory.items))&&(l.textString=r);this.width=Math.max(this.width,y.textBounds().width+50);r=this.addNamed("ok button",{type:"button",label:"OK"});v=this.addNamed("cancel button",{type:"button",label:"CANCEL"});this.addNamed("button wrapper",
{submorphs:[r,v]});Xe.connect(r,"fire",this,"resolve");Xe.connect(v,"fire",this,"reject");y.lineWrapping=this.lineWrapping;this.lineWrapping||(this.opacity=0,this.whenRendered().then(function(){var A=g.center;g.width=Math.max(350,y.document.width+100);g.opacity=1;g.center=A}));l.gotoDocumentEnd();l.scrollCursorIntoView()}},{key:"resolve",value:function(){dc._get(Object.getPrototypeOf(m.prototype),"resolve",this).call(this,this.getSubmorphNamed("input").acceptInput())}},{key:"initLayout",value:function(){var a=
this;if(!this.layout){var g=this.getSubmorphNamed("promptTitle"),l=this.getSubmorphNamed("input");g.fit();this.whenRendered().then(function(){var r=Math.max(l.textBounds().width,g.textBounds().width)+20;a.width=Math.min(a.maxWidth,r);a.opacity=1});this.layout=new Xe.GridLayout({columns:[0,{paddingLeft:5},1,{paddingLeft:5,paddingRight:2.5,fixed:100},2,{paddingRight:5,paddingLeft:2.5,fixed:100},3,{paddingRight:5}],rows:[0,{fixed:g.textBounds().height+5,paddingBottom:5},1,{fixed:l.height},2,{fixed:35,
paddingTop:5,paddingBottom:5}],grid:[["promptTitle","promptTitle","promptTitle","promptTitle"],["input","input","input","input"],[null,"ok button","cancel button",null]]})}}},{key:"focus",value:function(){this.getSubmorphNamed("input").focus()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"TextPrompt"}},{key:"example",value:function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){return 1==a.nextAddress?a.yield($world.prompt("enter",{input:"a little longer text"}),
2):a.yield($world.prompt("enter\nsomething",{input:"???"}),0)})}},{key:"properties",get:function(){return{lineWrapping:{defaultValue:!0},master:{initialize:function(){this.master={auto:"styleguide://SystemPrompts/prompts/text"}}}}}}],e,{pathInPackage:function(){return"prompts.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:8493,
end:11546})}(Xe.AbstractPrompt));Xe.TextPrompt=tP;Xe.TextPrompt=tP;Xe.TextPrompt=tP;var uP=Da("aJ",function(b){var e=lively.FreezerRuntime.recorderFor("lively.components/prompts.js"),m=e.hasOwnProperty("EditPrompt")&&"function"===typeof e.EditPrompt?e.EditPrompt:e.EditPrompt=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return dc(m,b,[{key:"maxWidth",get:function(){return this.env.world.visibleBounds().width-20}},{key:"build",
value:function(a){var g=a.input,l=a.mode,r=a.textStyle,v=a.evalEnvironment;this.addNamed("promptTitle",{type:"text",textString:a.label});r||(r={});l&&!r.fontFamily&&(r.fontFamily="Monaco, monospace");var y=this.addNamed("editor",{type:"text"});y.textString=g||"";Object.assign(y,r);y.changeEditorMode(l).then(function(){v&&y.editorPlugin&&Object.assign(y.editorPlugin.evalEnvironment,v)});a=y.textBounds().width+50;a>this.width-25&&(this.width=Math.min(this.maxWidth,a+125));a=this.addNamed("ok button",
{type:"button"});g=this.addNamed("cancel button",{type:"button"});this.addNamed("button wrapper",{submorphs:[a,g]});Xe.connect(a,"fire",this,"resolve");Xe.connect(g,"fire",this,"reject");y.gotoDocumentEnd();y.scrollCursorIntoView()}},{key:"resolve",value:function(a){var g=this.getSubmorphNamed("editor").textString.trim();if(this.historyId){a=Xe.InputLine.getHistory(this.historyId);a.items=a.items.filter(function(l){return l!==g});for(a.items.push(g);a.items.length>a.items.max;)a.items.shift();a.index=
a.items.length;Xe.InputLine.setHistory(this.historyId,a)}return dc._get(Object.getPrototypeOf(m.prototype),"resolve",this).call(this,g)}},{key:"keybindings",get:function(){return[{keys:{mac:"Meta-Enter|Meta-S",win:"Ctrl-Enter|Ctrl-S"},command:"resolve"},{keys:"Escape",command:"reject"},{keys:"Alt-P|Alt-Up",command:"history back"},{keys:"Alt-N|Alt-Down",command:"history forward"},{keys:"Alt-H",command:"browse history"}]}},{key:"commands",get:function(){var a=this;return dc._get(Object.getPrototypeOf(m.prototype),
"commands",this).concat([{name:"history back",exec:function(g,l){if(a.historyId){g=Xe.InputLine.getHistory(a.historyId);l=g.items;var r=g.index;g.index=--r;0>r&&(g.index=r=l.length-1);a.get("editor").undoManager.group();a.get("editor").textString=l[r];a.get("editor").undoManager.group()}return!0}},{name:"browse history",exec:function(g,l){var r,v,y,A,E,F;return $jscomp.asyncExecutePromiseGeneratorProgram(function(H){if(1==H.nextAddress){if(!a.historyId)return H.jumpTo(2);r=Xe.InputLine.getHistory(a.historyId);
return H.yield(a.world().editListPrompt("input history "+a.historyId,r.items,{requester:a}),3)}2!=H.nextAddress&&(v=H.yieldResult,y=v.status,A=v.list,E=$jscomp.makeIterator(v.selections),F=E.next().value,"canceled"!==y&&(r.items=A,Xe.InputLine.setHistory(a.historyId,r),F&&(r.index=r.items.indexOf(F),a.get("editor").textString=F)));return H.return(!0)})}},{name:"history forward",exec:function(g,l){if(a.historyId){g=Xe.InputLine.getHistory(a.historyId);l=g.items;var r=g.index;g.index=++r;r>=l.length&&
(g.index=r=0);a.get("editor").undoManager.group();a.get("editor").textString=l[r];a.get("editor").undoManager.group()}return!0}}])}},{key:"focus",value:function(){this.getSubmorphNamed("editor").focus()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"EditPrompt"}},{key:"example",value:function(){var a=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(g){if(1==g.nextAddress)return g.yield($world.editPrompt("enter",{input:"$world.show()",mode:"js",evalEnvironment:{context:23}}),
2);a.editorPlugin.evalEnvironment;g.jumpToEnd()})}},{key:"properties",get:function(){return{extent:{defaultValue:Xe.pt(500,300)},master:{initialize:function(){this.master={auto:"styleguide://SystemPrompts/prompts/edit"}}}}}}],e,{pathInPackage:function(){return"prompts.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:11555,end:16011})}(Xe.AbstractPrompt));
Xe.EditPrompt=uP;Xe.EditPrompt=uP;Xe.EditPrompt=uP;var vP=Da("aK",function(b){var e=lively.FreezerRuntime.recorderFor("lively.components/prompts.js"),m=e.hasOwnProperty("PasswordPrompt")&&"function"===typeof e.PasswordPrompt?e.PasswordPrompt:e.PasswordPrompt=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return dc(m,b,[{key:"build",value:function(a){var g=a.placeholder;this.addNamed("promptTitle",{type:"text",value:a.label,
fixedHeight:!0});this.addNamed("input",{type:Xe.PasswordInputLine,name:"input",placeholder:g||""});a=this.addNamed("ok button",{type:"button",label:"OK"});g=this.addNamed("cancel button",{type:"button",label:"CANCEL"});Xe.connect(a,"fire",this,"resolve");Xe.connect(g,"fire",this,"reject");this.addNamed("button wrapper",{submorphs:[a,g]})}},{key:"resolve",value:function(){dc._get(Object.getPrototypeOf(m.prototype),"resolve",this).call(this,this.get("input").acceptInput())}},{key:"focus",value:function(){var a=
this.get("input");a.whenRendered().then(function(){return a.focus()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"PasswordPrompt"}},{key:"properties",get:function(){return{maxWidth:{readOnly:!0,get:function(){return 800}},master:{initialize:function(){this.master={auto:"styleguide://SystemPrompts/prompts/password"}}}}}}],e,{pathInPackage:function(){return"prompts.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:16020,end:17258})}(Xe.AbstractPrompt));Xe.PasswordPrompt=vP;Xe.PasswordPrompt=vP;Xe.PasswordPrompt=vP;var wP=Da("aL",function(b){var e=lively.FreezerRuntime.recorderFor("lively.components/prompts.js"),m=e.hasOwnProperty("ListPrompt")&&"function"===typeof e.ListPrompt?e.ListPrompt:e.ListPrompt=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return dc(m,
b,[{key:"onChange",value:function(a){dc._get(Object.getPrototypeOf(m.prototype),"onChange",this).call(this,a);"extent"==a.prop&&this.layout&&!this.layout.active&&(a=a.value.subPt(a.prevValue),this.getSubmorphNamed("prompt list").height+=a.y)}},{key:"getMaster",value:function(){return this.filterable?"styleguide://SystemPrompts/prompts/list":"styleguide://SystemPrompts/prompts/edit list"}},{key:"reset",value:function(){this.items=[]}},{key:"build",value:function(a){var g=a.label,l=a.filterable,r=a.multiSelect,
v=a.historyId,y=a.useLastInput,A=a.fuzzy,E=a.filterFunction,F=a.sortFunction,H=a.actions,I=a.selectedAction,M=a.items,N=a.onSelection;this.extent=a.extent||Xe.pt(500,400);this.addNamed("promptTitle",{type:"text"}).textString=g;var W=this.addNamed("prompt list",{type:l?Xe.FilterableList:Xe.List,multiSelect:r,historyId:v,useLastInput:y});l?this.get("list").master=!1:this.get("prompt list").master=!1;W.items=M;l&&A&&(W.fuzzy=A);l&&"function"===typeof E&&(W.filterFunction=E);l&&"function"===typeof F&&
(W.sortFunction=F);N&&"function"===typeof N&&(this.onSelection=N);l&&H&&(W.actions=H);l&&I&&(W.selectedAction=I);a=this.addNamed("ok button",{type:"button"});g=this.addNamed("cancel button",{type:"button"});this.addNamed("button wrapper",{submorphs:[a,g]});Xe.connect(a,"fire",this,"resolve");Xe.connect(g,"fire",this,"reject");l&&(Xe.connect(W,"accepted",this,"resolve"),Xe.connect(W,"canceled",this,"reject"),W.whenRendered().then(function(){return W.relayout()}))}},{key:"resolve",value:function(a){var g=
this.getSubmorphNamed("prompt list");a=a||g instanceof Xe.FilterableList?g.acceptInput():{selected:g.selections,status:"accepted",actions:"default"};return this.answer.resolve(a)}},{key:"reject",value:function(){return this.answer.resolve({prompt:this,selected:[],filtered:[],status:"canceled"})}},{key:"focus",value:function(){this.getSubmorphNamed("prompt list").focus()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ListPrompt"}},{key:"example",value:function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){return a.yield($world.listPrompt("hello",
[1,2,3,4],{multiSelect:!0}),0)})}},{key:"properties",get:function(){return{items:{derived:!0,after:["submorphs"],set:function(a){0<this.submorphs.length&&(this.getSubmorphNamed("prompt list").items=a||[])}},filterable:{},master:{after:["filterable"],initialize:function(){this.master={auto:this.getMaster()}}},preselect:{derived:!0,after:["items"],set:function(a){var g=this.getSubmorphNamed("prompt list");g&&(g.selectedIndex=a,g.scrollSelectionIntoView)}},onSelection:{derived:!0,after:["preselect",
"submorphs"],set:function(a){var g=this,l=this.getSubmorphNamed("prompt list");l&&Xe.connect(l,"selection",function(r){return a(r,g)})}}}}}],e,{pathInPackage:function(){return"prompts.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:17356,end:21454})}(Xe.AbstractPrompt));Xe.ListPrompt=wP;Xe.ListPrompt=wP;Xe.ListPrompt=wP;var xP=
Da("aM",function(b){var e=lively.FreezerRuntime.recorderFor("lively.components/prompts.js"),m=e.hasOwnProperty("EditListPrompt")&&"function"===typeof e.EditListPrompt?e.EditListPrompt:e.EditListPrompt=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return dc(m,b,[{key:"build",value:function(a){dc._get(Object.getPrototypeOf(m.prototype),"build",this).call(this,a);this.getSubmorphNamed("prompt list").items=a.items;a=this.addNamed("add item button",
{type:"button",label:Xe.Icon.makeLabel("plus")});var g=this.addNamed("remove item button",{type:"button",label:Xe.Icon.makeLabel("minus")});this.getSubmorphNamed("button wrapper").addMorph(a);this.getSubmorphNamed("button wrapper").addMorph(g);Xe.connect(a,"fire",this,"addItemToList");Xe.connect(g,"fire",this,"removeSelectedItemsFromList")}},{key:"removeSelectedItemsFromList",value:function(){var a=this,g,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){g=a.get("prompt list");l=1!=
g.selectedItems.length?-1:0===g.selectedIndex?0:g.selectedIndex-1;g.items=Xe.arr.withoutAll(g.items,g.selectedItems);0>l?g.selection=null:g.selectedIndex=l;g.focus();r.jumpToEnd()})}},{key:"addItemToList",value:function(){var a=this,g,l,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){if(1==y.nextAddress)return g=a.get("prompt list"),l=g.selection?g.items[g.selectedIndex].string:"",y.yield(a.world().prompt("Input to add to the list",{historyId:a.historyId||"EditListPrompt-input-history",
input:l}),2);r=y.yieldResult;if(!r)return y.return();g=a.get("list");v=g.selection?g.selectedIndex+1:g.items.length;g.addItemAt(r,v);g.focus();g.selectedIndex=v;y.jumpToEnd()})}},{key:"keybindings",get:function(){return dc._get(Object.getPrototypeOf(m.prototype),"keybindings",this).concat([{keys:{mac:"Meta-Enter",win:"Ctrl-Enter"},command:"resolve"},{keys:"Ctrl-G",command:"deselect"},{keys:"Shift-=|+",command:"add item to list"},{keys:"Delete|-|Backspace",command:"remove item from list"}])}},{key:"commands",
get:function(){var a=this;return dc._get(Object.getPrototypeOf(m.prototype),"commands",this).concat([{name:"deselect",exec:function(){a.get("list").selection=null;return!0}},{name:"add item to list",exec:function(){a.addItemToList();return!0}},{name:"remove item from list",exec:function(){a.removeSelectedItemsFromList();return!0}}])}},{key:"resolve",value:function(){var a=this.get("prompt list");return this.answer.resolve({list:a.values,selections:a.selections})}},{key:"reject",value:function(){return this.answer.resolve({list:[],
selections:[],status:"canceled"})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"EditListPrompt"}},{key:"example",value:function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){return a.yield($world.editListPrompt("hello",[1,2,3,4],{multiSelect:!0}),0)})}},{key:"properties",get:function(){return{master:{initialize:function(){this.master={auto:"styleguide://SystemPrompts/prompts/edit list"}}}}}}],e,{pathInPackage:function(){return"prompts.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:21463,end:24318})}(Xe.ListPrompt));Xe.EditListPrompt=xP;Xe.EditListPrompt=xP;Xe.EditListPrompt=xP;var zX=Object.freeze({__proto__:null,AbstractPrompt:pP,InformPrompt:qP,ConfirmPrompt:rP,MultipleChoicePrompt:sP,TextPrompt:tP,EditPrompt:uP,PasswordPrompt:vP,ListPrompt:wP,EditListPrompt:xP}),Id=lively.FreezerRuntime.recorderFor("lively.components/widgets.js");
Id.obj=Ag;Id.PropertyPath=Ah;Id.string=pi;Id.num=Nm;Id.arr=$f;Id.properties=up;Id.pt=xi;Id.Color=Fg;Id.Rectangle=He;Id.rect=zm;Id.signal=Wl;Id.connect=rl;Id.disconnect=zo;Id.Morph=Ll;Id.ShadowObject=zs;Id.morph=sa;Id.Text=Vt;Id.GridLayout=Wy;Id.HorizontalLayout=Gv;Id.Path=yB;Id.Ellipse=xB;Id.Label=Wt;Id.Tooltip=AB;Id.Icon=Np;Id.kld=Qb;var Laa=Id.kld;Id.Shapes=Laa.Shapes;Id.Intersection=Laa.Intersection;(function(b){var e=lively.FreezerRuntime.recorderFor("lively.components/widgets.js"),m=e.hasOwnProperty("LeashEndpoint")&&
"function"===typeof e.LeashEndpoint?e.LeashEndpoint:e.LeashEndpoint=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return dc(m,b,[{key:"dragTriggerDistance",get:function(){return this.connectedMorph?20:0}},{key:"onDragStart",value:function(a){var g=a.state;a.state.dragDelta=g.lastDragPosition.subPt(g.clickedOnPosition);a.state.endpoint=this;this.leash.onEndpointDrag(a)}},{key:"canConnectTo",value:function(a){return!a.isWorld&&
!a.isHaloItem&&this.leash.canConnectTo(a)&&!a.isHighlighter&&!a.ownerChain().some(function(g){return g.isHaloItem})}},{key:"onDrag",value:function(a){var g=this;if(this.connectedMorph)this.clearConnection();else{var l=a.hand.findDropTarget(a.hand.globalPosition,[this.leash,this.leash.endPoint,this.leash.startPoint],function(r){return g.canConnectTo(r)});this.possibleTarget!=l&&this.highlighter&&this.highlighter.deactivate();if(this.possibleTarget=l)this.closestSide=this.possibleTarget.globalBounds().partNameNearest(Id.obj.keys(Id.Leash.connectionPoints),
this.globalPosition),this.highlighter=$world.highlightMorph($world,this.possibleTarget,!1,[this.closestSide]),this.highlighter.show(),"MorphContainer"==this.possibleTarget.constructor.className&&(this.highlighter.get("name tag").value=this.possibleTarget.target.name)}a.state.endpoint=this;this.leash.onEndpointDrag(a)}},{key:"onDragEnd",value:function(){$world.removeHighlighters();this.possibleTarget&&this.closestSide&&this.attachTo(this.possibleTarget,this.closestSide)}},{key:"getConnectionPoint",
value:function(){var a=this.connectedMorph,g=a.isPath,l=a.isPolygon,r=a.vertices,v=a.origin;a=this.connectedMorph.globalBounds();if((g||l)&&"center"!=this.attachedSide){g=r.map(function(A){return Id.pt(A.x,A.y).addPt(v)});l=Id.Rectangle.unionPts(g);var y=l[this.attachedSide]();l=l.center().addPt(l.center().subPt(y));l=Id.Shapes.line(y.x,y.y,l.x,l.y);g=Id.Shapes.polyline(Id.arr.flatten(g.map(function(A){return[A.x,A.y]})));g=Id.arr.min(Id.Intersection.intersect(g,l).points,function(A){return Id.pt(A.x,
A.y).dist(y)});return Id.pt(g.x,g.y).addPt(a.topLeft())}return a[this.attachedSide]()}},{key:"update",value:function(a){a&&!["position","extent","rotation","scale"].includes(a.prop)&&a.target!=this.connectedMorph||!this.connectedMorph||(a=this.getConnectionPoint(),a=this.leash.localize(a),this.hasFixedPosition&&(a=a.subPt($world.scroll)),this.vertex.position=a,this.relayout())}},{key:"clearConnection",value:function(){this.connectedMorph&&(Id.disconnect(this.connectedMorph,"onChange",this,"update"),
this.connectedMorph=null)}},{key:"relayout",value:function(a){var g=this.vertex.position,l=g.x;g=g.y;var r=this.leash.borderWidth;a&&a.meta&&a.meta.animation?this.animate({center:Id.pt(l+r,g+r),duration:a.duration}):this.center=Id.pt(l+r,g+r)}},{key:"attachTo",value:function(a,g){this.clearConnection();this.leash.openInWorld(this.leash.position);this.connectedMorph=a;this.attachedSide=g;this.vertex.controlPoints=this.leash.controlPointsFor(g,this);this.update();Id.connect(this.connectedMorph,"onChange",
this,"update")}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"LeashEndpoint"}},{key:"properties",get:function(){return{index:{},leash:{},nativeCursor:{defaultValue:"-webkit-grab"},attachedSide:{},connectedMorph:{},draggable:{defaultValue:!0},vertex:{after:["leash"],get:function(){return this.leash.vertices[this.index]},set:function(a){this.leash.vertices[this.index]=a;this.leash.vertices=this.leash.vertices}}}}}],e,{pathInPackage:function(){return"widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:444,end:4584})})(Id.Ellipse);var yP=Da("bR",function(b){var e=lively.FreezerRuntime.recorderFor("lively.components/widgets.js"),m=e.hasOwnProperty("Leash")&&"function"===typeof e.Leash?e.Leash:e.Leash=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return dc(m,b,[{key:"onMouseDown",
value:function(a){this.updateEndpointStyles()}},{key:"updateEndpointStyles",value:function(){Object.assign(this.startPoint,this.getEndpointStyle(0));Object.assign(this.endPoint,this.getEndpointStyle(1));this.relayout()}},{key:"remove",value:function(){dc._get(Object.getPrototypeOf(m.prototype),"remove",this).call(this);this.startPoint.clearConnection();this.endPoint.clearConnection()}},{key:"onEndpointDrag",value:function(a){a.state.endpoint.vertex.position=a.state.endpoint.vertex.position.addPt(a.state.dragDelta);
this.relayout()}},{key:"getEndpointStyle",value:function(a){return Object.assign({},this.endpointStyle,{},0==a?this.endpointStyle.start:this.endpointStyle.end)}},{key:"endpoint",value:function(a){var g=this.vertices[a];return new Id.LeashEndpoint({index:a,leash:this,position:Id.pt(g.x,g.y)})}},{key:"controlPointsFor",value:function(a,g){a=Id.Leash.connectionPoints[a];a=g==this.startPoint?a.negated():a;return{previous:a.scaleBy(100),next:a.negated().scaleBy(100)}}},{key:"relayout",value:function(a){if(!a||
["vertices","position"].includes(a.prop))this.startPoint.relayout(a),this.endPoint.relayout(a)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Leash"}},{key:"connectionPoints",get:function(){return{topCenter:Id.pt(0,-1),topLeft:Id.pt(-1,-1),rightCenter:Id.pt(1,0),bottomRight:Id.pt(1,1),bottomCenter:Id.pt(0,1),bottomLeft:Id.pt(-1,1),leftCenter:Id.pt(-1,0),topRight:Id.pt(1,-1),center:Id.pt(0,0)}}},{key:"properties",get:function(){return{start:{defaultValue:Id.pt(0,0)},end:{defaultValue:Id.pt(0,
0)},canConnectTo:{defaultValue:function(a){return!0}},reactsToPointer:{defaultValue:!1},acceptsDroppedMorphs:{defaultValue:!1},direction:{type:"Enum",values:["unidirectional","outward","inward"],defaultValue:"unidirectional"},endpointStyle:{isStyleProp:!0,defaultValue:{fill:Id.Color.black,origin:Id.pt(3.5,3.5),extent:Id.pt(10,10),nativeCursor:"-webkit-grab"}},borderWidth:{defaultValue:2},borderColor:{defaultValue:Id.Color.black},fill:{defaultValue:Id.Color.transparent},vertices:{after:["start","end",
"borderWidth"],initialize:function(){this.vertices=[this.start,this.end]}},submorphs:{initialize:function(){this.submorphs=[this.startPoint=this.endpoint(0),this.endPoint=this.endpoint(1)];Id.connect(this,"onChange",this,"relayout");this.updateEndpointStyles()}}}}}],e,{pathInPackage:function(){return"widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",
version:"0.1.0"}}},{start:4593,end:7383})}(Id.Path));Id.Leash=yP;Id.Leash=yP;Id.Leash=yP;var zP=Da("bf",function(b){var e=lively.FreezerRuntime.recorderFor("lively.components/widgets.js"),m=e.hasOwnProperty("Slider")&&"function"===typeof e.Slider?e.Slider:e.Slider=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return dc(m,b,[{key:"normalize",value:function(a){return Math.abs(a/(this.max-this.min))}},{key:"update",value:function(a){a=
void 0===a?this.value:a;a=(this.width-15)*this.normalize(a);this.getSubmorphNamed("slideHandle").center=Id.pt(a+7.5,10)}},{key:"onSlide",value:function(a,g){a=Id.num.roundTo(this.value+g.x/this.width,.01);this.value=a=Math.max(this.min,Math.min(this.max,a));this.update(a)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Slider"}},{key:"properties",get:function(){return{value:{},min:{},max:{},height:{defaultValue:20},fill:{defaultValue:Id.Color.transparent},draggable:{defaultValue:!1},
submorphs:{after:["value","max","min"],initialize:function(){var a=new Id.SliderHandle({slider:this,name:"slideHandle"});this.submorphs=[new Id.Path({borderColor:Id.Color.gray.darker(),borderWidth:2,vertices:[Id.pt(0,0),Id.pt(this.width,0)],position:Id.pt(0,this.height/2)}),a];Id.connect(this,"extent",this,"update");this.update()}}}}}],e,{pathInPackage:function(){return"widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:7392,end:8677})}(Id.Morph));Id.Slider=zP;Id.Slider=zP;Id.Slider=zP;(function(b){var e=lively.FreezerRuntime.recorderFor("lively.components/widgets.js"),m=e.hasOwnProperty("SliderHandle")&&"function"===typeof e.SliderHandle?e.SliderHandle:e.SliderHandle=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return dc(m,b,[{key:"onDragStart",value:function(a){this.valueView=
(new Id.Tooltip({description:""})).openInWorld(a.hand.position.addXY(10,10))}},{key:"onDrag",value:function(a){this.slider.onSlide(this,a.state.dragDelta);this.valueView.description=this.slider.value;this.valueView.position=a.hand.position.addXY(10,10)}},{key:"onDragEnd",value:function(a){this.valueView.remove()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"SliderHandle"}},{key:"properties",get:function(){return{slider:{},fill:{defaultValue:Id.Color.gray},borderColor:{defaultValue:Id.Color.gray.darker()},
borderWidth:{defaultValue:1},dropShadow:{defaultValue:new Id.ShadowObject({blur:5})},extent:{defaultValue:Id.pt(15,15)},nativeCursor:{defaultValue:"-webkit-grab"},draggable:{defaultValue:!0}}}}],e,{pathInPackage:function(){return"widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:8679,end:9535})})(Id.Ellipse);var AP=Da("b1",
function(b){var e=lively.FreezerRuntime.recorderFor("lively.components/widgets.js"),m=e.hasOwnProperty("ValueScrubber")&&"function"===typeof e.ValueScrubber?e.ValueScrubber:e.ValueScrubber=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return dc(m,b,[{key:"relayout",value:function(){this.scaleToBounds&&(this.scale=Math.min(1,this.width/(this.textBounds().width+0)))}},{key:"onKeyDown",value:function(a){dc._get(Object.getPrototypeOf(m.prototype),
"onKeyDown",this).call(this,a);if("Enter"==a.keyCombo){var g=$jscomp.makeIterator(this.textString.replace("\n","").split(" ")),l=g.next().value;g.next();"string"==typeof l&&(this.value=parseFloat(l),this.scrub(this.scrubbedValue));a.stop()}}},{key:"scrub",value:function(a){this.field.update(a)}},{key:"onDragStart",value:function(a){this.execCommand("toggle active mark");this.initPos=a.position;this.factorLabel=(new Id.Tooltip({description:"1x"})).openInWorld(a.hand.position.addXY(10,10))}},{key:"getScaleAndOffset",
value:function(a){var g=a.position.subPt(this.initPos);a=g.x;g=Id.num.roundTo(Math.exp(-g.y/$world.height*4),.01)*this.baseFactor;return{offset:a,scale:g}}},{key:"onDrag",value:function(a){var g=this.getScaleAndOffset(a),l=g.scale;g=this.getCurrentValue(g.offset,l);this.scrub(g);g=this.floatingPoint?g.toFixed(3):Id.obj.safeToString(g);this.unit&&(g+=" "+this.unit);this.replace(this.documentRange,g,!1,this.scaleToBounds,!1,!1);this.factorLabel.description=l.toFixed(3)+"x";this.factorLabel.position=
a.hand.position.addXY(10,10);this.relayout()}},{key:"getCurrentValue",value:function(a,g){return Math.max(this.min,Math.min(this.max,this.scrubbedValue+(this.floatingPoint?a*g:Math.round(a*g))))}},{key:"onDragEnd",value:function(a){a=this.getScaleAndOffset(a);this.value=this.getCurrentValue(a.offset,a.scale);this.factorLabel.softRemove()}},{key:"value",set:function(a){this.scrubbedValue=a=Math.max(this.min,Math.min(this.max,a));a=this.floatingPoint?a.toFixed(3):Id.obj.safeToString(a);a=this.unit?
a+(" "+this.unit):a+"";this.replace(this.documentRange,a,!1,!0);this.relayout()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ValueScrubber"}},{key:"properties",get:function(){return{scaleToBounds:{defaultValue:!1,set:function(a){this.fixedWidth=!0;this.setProperty("scaleToBounds",a)}},field:{derived:!0,get:function(){return this.owner}},value:{defaultValue:0},fill:{defaultValue:Id.Color.transparent},draggable:{defaultValue:!0},min:{defaultValue:-Infinity},max:{defaultValue:Infinity},
baseFactor:{defaultValue:1},floatingPoint:{defaultValue:!1}}}}],e,{pathInPackage:function(){return"widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:9544,end:12382})}(Id.Text));Id.ValueScrubber=AP;Id.ValueScrubber=AP;Id.ValueScrubber=AP;var GI=Da("bj",function(b){var e=lively.FreezerRuntime.recorderFor("lively.components/widgets.js"),
m=e.hasOwnProperty("CheckBox")&&"function"===typeof e.CheckBox?e.CheckBox:e.CheckBox=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return dc(m,b,[{key:"trigger",value:function(){try{this.checked=!this.checked,Id.signal(this,"toggle",this.checked)}catch(g){var a=this.world();a?a.logError(g):console.error(g)}}},{key:"onMouseDown",value:function(a){this.active&&this.trigger()}},{key:"render",value:function(a){return a.renderCheckBox(this)}}],
[{key:Symbol.for("__LivelyClassName__"),get:function(){return"CheckBox"}},{key:"properties",get:function(){return{draggable:{defaultValue:!1},extent:{defaultValue:Id.pt(15,15)},borderWidth:{defaultValue:0},active:{defaultValue:!0},checked:{defaultValue:!1},fill:{defaultValue:Id.Color.transparent},nativeCursor:{defaultValue:"pointer"}}}}],e,{pathInPackage:function(){return"widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:12391,end:13117})}(Id.Morph));Id.CheckBox=GI;Id.CheckBox=GI;Id.CheckBox=GI;var BP=Da("b2",function(b){var e=lively.FreezerRuntime.recorderFor("lively.components/widgets.js"),m=e.hasOwnProperty("LabeledCheckBox")&&"function"===typeof e.LabeledCheckBox?e.LabeledCheckBox:e.LabeledCheckBox=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return dc(m,
b,[{key:"disable",value:function(){this.active=!1;this.labelMorph.opacity=.5}},{key:"enable",value:function(){this.active=!0;this.labelMorph.opacity=1}},{key:"trigger",value:function(){this.checkboxMorph.trigger()}},{key:"onMouseDown",value:function(a){this.active&&this.trigger();a.stop()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"LabeledCheckBox"}},{key:"example",value:function(){(new Id.LabeledCheckBox({label:"foo"})).openInWorld()}},{key:"properties",get:function(){return{name:{defaultValue:"LabeledCheckBox"},
alignCheckBox:{defaultValue:"left",type:"Enum",values:["left","right"],set:function(a){this.layout=new Id.HorizontalLayout({direction:"left"==a?"leftToRight":"rightToLeft"});this.setProperty("alignCheckBox",a)}},layout:{initialize:function(){this.layout=new Id.HorizontalLayout({direction:"left"==this.alignCheckBox?"leftToRight":"rightToLeft"})}},label:{defaultValue:"label",after:["submorphs"],derived:!0,get:function(){return this.labelMorph.value},set:function(a){this.labelMorph.value=a}},checked:{after:["submorphs"],
derived:!0,get:function(){return this.checkboxMorph.checked},set:function(a){this.checkboxMorph.checked=a;Id.signal(this,"checked",a)}},active:{after:["submorphs"],derived:!0,get:function(){return this.checkboxMorph.active},set:function(a){this.checkboxMorph.active=a}},labelMorph:{derived:!0,readOnly:!0,get:function(){return this.getSubmorphNamed("label")}},checkboxMorph:{derived:!0,readOnly:!0,get:function(){return this.getSubmorphNamed("checkbox")}},submorphs:{initialize:function(){this.submorphs=
[new Id.CheckBox({name:"checkbox"}),new Id.Label({nativeCursor:"pointer",name:"label",padding:Id.Rectangle.inset(5,3)})];Id.connect(this,"alignCheckBox",this,"extent");Id.connect(this.checkboxMorph,"checked",this,"checked")}}}}}],e,{pathInPackage:function(){return"widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:13126,
end:15659})}(Id.Morph));Id.LabeledCheckBox=BP;Id.LabeledCheckBox=BP;Id.LabeledCheckBox=BP;var CP=Da("be",function(b){var e=lively.FreezerRuntime.recorderFor("lively.components/widgets.js"),m=e.hasOwnProperty("ModeSelector")&&"function"===typeof e.ModeSelector?e.ModeSelector:e.ModeSelector=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return dc(m,b,[{key:"createLabels",value:function(a,g,l){var r=this;l=void 0===l?{}:
l;return Id.arr.zip(a,g).map(function(v){v=$jscomp.makeIterator(v);var y=v.next().value,A=v.next().value;v=l[y];v=Id.morph(Object.assign({name:y+"Label",master:{auto:"styleguide://SystemWidgets/mode label"},type:"label",value:y},v&&{tooltip:v}));Id.connect(v,"onMouseDown",r,"update",{updater:function(E){E(y,A)},varMapping:{name:y,value:A}});return v})}},{key:"relayout",value:function(a){a=void 0===a?!0:a;var g=this,l,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){if(1==v.nextAddress)return g.layout.forceLayout(),
l=g.get("typeMarker"),r=g.currentLabel.bounds(),a?v.yield(l.animate({bounds:r,duration:200}),3):(l.setBounds(r),v.jumpTo(2));v.jumpToEnd()})}},{key:"animateFontColor",value:function(a,g,l){var r=a.fontColor;a.animate({customTween:function(v){return a.fontColor=r.interpolate(v,g)},duration:l})}},{key:"update",value:function(a,g,l){l=void 0===l?!1:l;var r=this,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){v=r.get(a+"Label");if(v==r.currentLabel)return y.return();r.getSubmorphsByStyleClassName("Label").forEach(function(A){A!=
v&&r.animateFontColor(A,r.fontColor,200)});r.currentLabel=v;!l&&Id.signal(r,a,g);!l&&Id.signal(r,"switchLabel",g);r.relayout(!l);return y.yield(r.animateFontColor(v,r.selectionFontColor,200),0)})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ModeSelector"}},{key:"example",value:function(){(new Id.ModeSelector({items:{foo:{},trottel:{},babbel:{}}})).openInWorld()}},{key:"properties",get:function(){return{items:{derived:!0,set:function(a){Id.obj.isArray(a)?this.keys=this.values=a:
(this.keys=Id.obj.keys(a),this.values=Id.obj.values(a))}},height:{defaultValue:30},init:{},keys:{before:["layout"]},values:{before:["layout"]},tooltips:{},fontColor:{defaultValue:Id.Color.black},selectionFontColor:{defaultValue:Id.Color.white},master:{initialize:function(){this.master={auto:"styleguide://SystemWidgets/mode selector"}}},layout:{after:["items","keys","values"],initialize:function(){this.keys&&(this.layout=new Id.GridLayout({rows:[0,{paddingBottom:10}],columns:[0,{fixed:5},this.keys.length+
2,{fixed:5}],grid:[[null].concat($jscomp.arrayFromIterable(Id.arr.interpose(this.keys.map(function(a){return a+"Label"}),null)),[null])],autoAssign:!1,fitToCell:!1}))}},submorphs:{after:["items","keys","values","fontColor"],initialize:function(){this.keys&&(this.submorphs=[{name:"typeMarker",isLayoutable:!1}].concat($jscomp.arrayFromIterable(this.createLabels(this.keys,this.values,this.tooltips))),Id.connect(this,"extent",this,"relayout"),this.update(this.init?this.init:this.keys[0],this.values[this.keys.includes(this.init)?
this.keys.indexOf(this.init):0],!0))}}}}}],e,{pathInPackage:function(){return"widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:15668,end:19301})}(Id.Morph));Id.ModeSelector=CP;Id.ModeSelector=CP;Id.ModeSelector=CP;var DP=Da("b3",function(b){var e=lively.FreezerRuntime.recorderFor("lively.components/widgets.js"),m=e.hasOwnProperty("DropDownSelector")&&
"function"===typeof e.DropDownSelector?e.DropDownSelector:e.DropDownSelector=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return dc(m,b,[{key:"build",value:function(){this.dropDownLabel=Id.Icon.makeLabel("chevron-circle-down",{opacity:0,name:"dropDownIcon"});this.submorphs=[{type:"label",name:"currentValue"},this.dropDownLabel]}},{key:"getMenuEntries",value:function(){var a=this,g=this.getNameFor(this.selectedValue);
return[].concat($jscomp.arrayFromIterable(void 0!=this.selectedValue?[{command:g,target:this}]:[]),$jscomp.arrayFromIterable(Id.arr.compact(this.commands.map(function(l){return l.name!=g&&{command:l.name,target:a}}))))}},{key:"commands",get:function(){var a=this;return Id.obj.isArray(this.values)?this.values.map(function(g){return{name:String(g),exec:function(){Id.signal(a,"update",g);a.selectedValue=g}}}):Id.properties.forEachOwn(this.values,function(g,l){return{name:g,exec:function(){Id.signal(a,
"update",l);a.selectedValue=l}}})}},{key:"getNameFor",value:function(a){return this.getCurrentValue?this.getCurrentValue():Id.obj.isArray(this.values)?Id.obj.safeToString(a):Id.obj.safeToString(Id.properties.nameFor(this.values,a))}},{key:"relayout",value:function(){var a=this.getNameFor(this.selectedValue),g=this.get("currentValue");"undefined"==a?(g.value="Not set",g.fontColor=Id.Color.gray):(g.value=a,g.fontColor=Id.Color.black)}},{key:"onHoverIn",value:function(){this.dropDownLabel.animate({opacity:1,
duration:300})}},{key:"onHoverOut",value:function(){this.dropDownLabel.animate({opacity:0,duration:200})}},{key:"onMouseDown",value:function(a){this.menu=this.world().openWorldMenu(a,this.getMenuEntries());this.menu.hasFixedPosition=!0;this.menu.topLeft=this.globalPosition}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"DropDownSelector"}},{key:"properties",get:function(){return{values:{defaultValue:[]},getCurrentValue:{defaultValue:void 0},selectedValue:{after:["submorphs","values",
"getCurrentValue"],set:function(a){this.setProperty("selectedValue",a);this.relayout()}},fontColor:{isStyleProp:!0,defaultValue:Id.Color.black},fontSize:{isStyleProp:!0,defaultValue:12},fontFamily:{isStyleProp:!0,defaultValue:"Sans-Serif"},border:{defaultValue:{radius:3,color:Id.Color.gray.darker(),style:"solid"}},padding:{defaultValue:1},isSelected:{defaultValue:"false",set:function(a){this.setProperty("isSelected",a);this.fontColor=a?Id.Color.white:Id.Color.black}},layout:{initialize:function(){this.layout=
new Id.HorizontalLayout({spacing:this.padding})}},submorphs:{initialize:function(){this.build()}}}}}],e,{pathInPackage:function(){return"widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:19310,end:22547})}(Id.Morph));Id.DropDownSelector=DP;Id.DropDownSelector=DP;Id.DropDownSelector=DP;var EP=Da("bi",function(b){var e=
lively.FreezerRuntime.recorderFor("lively.components/widgets.js"),m=e.hasOwnProperty("SearchField")&&"function"===typeof e.SearchField?e.SearchField:e.SearchField=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return dc(m,b,[{key:"parseInput",value:function(){var a=Array.from(this.textString).reduce(function(l,r){if("\\"===r&&!l.escaped)return l.escaped=!0,l;" "!==r||l.escaped?(l.spaceSeen=!1,l.current+=r):(!l.spaceSeen&&
l.current&&(l.tokens.push(l.current),l.current=""),l.spaceSeen=!0);l.escaped=!1;return l},{tokens:[],current:"",escaped:!1,spaceSeen:!1});a.current&&a.tokens.push(a.current);var g=a.tokens.map(function(l){return l.toLowerCase()});return{tokens:a.tokens,lowercasedTokens:g}}},{key:"clearInput",value:function(){this.textString="";Id.signal(this,"searchInput",this.parseInput());this.onBlur()}},{key:"matches",value:function(a){return this.textString?this.filterFunction.call(this,this.parseInput(),{string:a}):
!0}},{key:"onChange",value:function(a){dc._get(Object.getPrototypeOf(m.prototype),"onChange",this).call(this,a);a="replace"===a.selector;this.isFocused();this.get("placeholder icon")&&(this.get("placeholder icon").visible=!!this.textString);this.textString.includes("\n")&&(this.textString=this.textString.replace("\n",""),this.owner.focus());this.active&&a&&Id.signal(this,"searchInput",this.parseInput())}},{key:"onBlur",value:function(a){dc._get(Object.getPrototypeOf(m.prototype),"onBlur",this).call(this,
a);this.active=!1;this.get("placeholder").visible=!this.textString;this.animate({styleClasses:["idle"],duration:300})}},{key:"onFocus",value:function(a){dc._get(Object.getPrototypeOf(m.prototype),"onFocus",this).call(this,a);this.animate({styleClasses:["selected"],duration:300});this.get("placeholder").visible=!1;this.active=!0}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"SearchField"}},{key:"properties",get:function(){return{fixedWidth:{defaultValue:!0},master:{initialize:function(){this.master=
{auto:"styleguide://SystemWidgets/search field"}}},selectedFontColor:{isStyleProp:!0,defaultValue:Id.Color.black},idleFontColor:{isStyleProp:!0,defaultValue:Id.Color.gray},borderColor:{defaultValue:Id.Color.gray},layout:{initialize:function(){this.layout=new Id.HorizontalLayout({autoResize:!1,direction:"rightToLeft"})}},fuzzy:{derived:!0,after:["filterFunction","sortFunction"],set:function(a){this.setProperty("fuzzy",a);a?(this.sortFunction||(this.sortFunction=this.fuzzySortFunction),this.filterFunction==
this.defaultFilterFunction&&(this.filterFunction=this.fuzzyFilterFunction)):(this.sortFunction===this.fuzzySortFunction&&(this.sortFunction=null),this.filterFunction===this.fuzzyFilterFunction&&(this.filterFunction=this.defaultFilterFunction))}},filterFunction:{get:function(){var a=this.getProperty("filterFunction");if(!a)return this.defaultFilterFunction;"string"===typeof a&&(a=eval("("+a+")"));return a}},sortFunction:{},defaultFilterFunction:{readOnly:!0,get:function(){return this._defaultFilterFunction||
(this._defaultFilterFunction=function(a,g){return a.lowercasedTokens.every(function(l){return g.string.toLowerCase().includes(l)})})}},fuzzySortFunction:{get:function(){var a=this;return this._fuzzySortFunction||(this._fuzzySortFunction=function(g,l){var r=String(Id.PropertyPath("string"===typeof a.fuzzy?a.fuzzy:"string").get(l)).toLowerCase(),v=0;g.lowercasedTokens.forEach(function(y){r.startsWith(y)?v-=10:r.includes(y)&&(v-=5)});return Id.arr.sum(g.lowercasedTokens.map(function(y){return Id.string.levenshtein(r.toLowerCase(),
y)}))+v})}},fuzzyFilterFunction:{get:function(){var a=this;return this._fuzzyFilterFunction||(this._fuzzyFilterFunction=function(g,l){var r="string"===typeof a.fuzzy?a.fuzzy:"string";if(g.lowercasedTokens.every(function(y){return l.string.toLowerCase().includes(y)}))return!0;var v=String(Id.PropertyPath(r).get(l)).toLowerCase();return 3>=Id.arr.sum(g.lowercasedTokens.map(function(y){return Id.string.levenshtein(v,y)}))})}},placeHolder:{defaultValue:"Search"},submorphs:{after:["placeHolder"],initialize:function(){this.submorphs=
[{type:"label",name:"placeholder",isLayoutable:!1,value:this.placeHolder,reactsToPointer:!1},Id.Icon.makeLabel("times-circle",{padding:Id.rect(2,4,3,0),fontSize:14,visible:!1,fixedHeight:!0,autofit:!1,extent:Id.pt(20,22),name:"placeholder icon",fontColor:Id.Color.gray,nativeCursor:"pointer"})];Id.connect(this.get("placeholder icon"),"onMouseDown",this,"clearInput")}}}}}],e,{pathInPackage:function(){return"widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:22590,end:29177})}(Id.Text));Id.SearchField=EP;Id.SearchField=EP;Id.SearchField=EP;var AX=Object.freeze({__proto__:null,Leash:yP,Slider:zP,ValueScrubber:AP,CheckBox:GI,LabeledCheckBox:BP,ModeSelector:CP,DropDownSelector:DP,SearchField:EP}),uh=lively.FreezerRuntime.recorderFor("lively.components/loading-indicator.js");uh.promise=zh;uh.fun=Pn;uh.num=Nm;uh.Icon=Np;uh.stringToEasing=rq;uh.easings=rr;uh.VerticalLayout=Vy;uh.ShadowObject=
zs;uh.HorizontalLayout=Gv;uh.morph=sa;uh.Morph=Ll;uh.StyleSheet=Hv;uh.Image=Ty;uh.pt=xi;uh.RadialGradient=Lp;uh.rect=zm;uh.Rectangle=He;uh.Color=Fg;uh.connect=rl;(function(b){var e=lively.FreezerRuntime.recorderFor("lively.components/loading-indicator.js"),m=e.hasOwnProperty("ProgressBar")&&"function"===typeof e.ProgressBar?e.ProgressBar:e.ProgressBar=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return dc(m,b,[{key:"test",
value:function(){var a=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(g){1==g.nextAddress&&(a.progress=0);if(!(1>a.progress))return g.jumpTo(0);a.progress+=.1;return g.yield(uh.promise.delay(1E3),2)})}},{key:"update",value:function(){var a=this;setTimeout(function(){a.world()||a.stopStepping()},1E3);if(this._lastWidth){var g=this.get("progress path"),l=uh.stringToEasing(uh.easings.inOutExpo)(uh.num.clamp(Date.now()-this._timeStamp,0,1E3)/1E3),r=this._targetWidth;g.topLeft=uh.pt(0,
0);g.height=this.height;g.width=this._lastWidth>r?r:uh.num.interpolate(l,this._lastWidth,r)}}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ProgressBar"}},{key:"properties",get:function(){return{progress:{after:["submorphs"],initialize:function(){this.progress=0;this.startStepping("update")},set:function(a){var g=this.get("progress path");this._lastWidth=Math.max(g.width,this._targetWidth,1);this._targetWidth=this.width*a;this._timeStamp=Date.now();this.setProperty("progress",a)}},
fill:{defaultValue:uh.Color.darkGray},borderRadius:{defaultValue:5},clipMode:{defaultValue:"hidden"},submorphs:{initialize:function(){this.submorphs=[{name:"progress path",fill:uh.Color.orange,width:1}]}}}}}],e,{pathInPackage:function(){return"loading-indicator.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:336,end:1929})})(uh.Morph);
var BX=function(b){var e=lively.FreezerRuntime.recorderFor("lively.components/loading-indicator.js"),m=e.hasOwnProperty("LoadingIndicator")&&"function"===typeof e.LoadingIndicator?e.LoadingIndicator:e.LoadingIndicator=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return dc(m,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){a=void 0===a?{}:a;dc._get(Object.getPrototypeOf(m.prototype),Symbol.for("lively-instance-initialize"),
this).call(this,a);var g=this.ui;a=g.label;var l=g.closeButton;if(g=g.progressBar)g.opacity=0,g.isLayoutable=!1;uh.connect(this,"extent",this,"relayout");uh.connect(a,"extent",this,"relayout");uh.connect(a,"value",this,"updateLabel");uh.connect(a,"fontSize",this,"updateLabel");uh.connect(a,"fontFamily",this,"updateLabel");uh.connect(l,"fire",this,"remove");l.fit();this.relayout()}},{key:"animateProgress",value:function(a){var g=this,l,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){if(1==
y.nextAddress)return l=g.ui,(r=l.progressBar)||(r=g.addMorph(new uh.ProgressBar({name:"progress bar"}))),v=g.center,0==a?(r.isLayoutable=!1,r.opacity=0):(r.isLayoutable=!0,r.opacity=1),r.progress=a,y.yield(g.whenRendered(),2);g.center=v;y.jumpToEnd()})}},{key:"isEpiMorph",get:function(){return!0}},{key:"updateLabel",value:function(){var a=this.center;this.relayout();this.center=a}},{key:"relayout",value:function(){uh.Rectangle.inset(20,12);var a=this.ui,g=a.label,l=a.progressBar,r=a.status;a.closeButton.topRight=
this.innerBounds().insetBy(2).topRight();l.extent=uh.pt(g.owner.bounds().width,5);r[r.visible?"top":"bottom"]=g.height}},{key:"onHoverIn",value:function(a){this.ui.closeButton.visible=!0}},{key:"onHoverOut",value:function(a){this.ui.closeButton.visible=!1}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"LoadingIndicator"}},{key:"open",value:function(a,g){var l=uh.morph(Object.assign({type:uh.LoadingIndicator},g,{label:a}));if(g&&g.animated)return uh.promise.delay(g.delay||0).then(function(){l.openInWorld();
l.opacity=0;l.whenRendered().then(function(){l.ui.spinner.visible=!0;l.top+=25;l.animate({top:l.top-25,easing:uh.easings.outExpo});l.animate({opacity:1,easing:uh.easings.outExpo})})}),l;l.openInWorld();l.ui.label.whenRendered().then(function(){l.ui.spinner.visible=!0;l.ui.label.fit()});return l}},{key:"forPromise",value:function(a,g,l){var r=this.open(g,l);uh.promise.finally(Promise.resolve(a),function(){return r.remove()});return r}},{key:"runFn",value:function(a,g,l){var r=this,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){switch(y.nextAddress){case 1:return v=
r.open(g,l),y.yield(v.whenRendered(),2);case 2:return y.setFinallyBlock(3),y.yield(a(v),5);case 5:return y.return(y.yieldResult);case 3:y.enterFinallyBlock(),v.remove(),y.leaveFinallyBlock(0)}})}},{key:"properties",get:function(){return{name:{defaultValue:"LoadingIndicator"},styleClasses:{defaultValue:["Halo"]},hasFixedPosition:{defaultValue:!0},ui:{derived:!0,get:function(){return{progressBar:this.getSubmorphNamed("progress bar"),closeButton:this.getSubmorphNamed("closeButton"),spinner:this.getSubmorphNamed("spinner"),
label:this.getSubmorphNamed("ld label"),status:this.getSubmorphNamed("status")}}},progress:{derived:!0,set:function(a){this.animateProgress(uh.num.clamp(a,0,1))}},label:{derived:!0,after:["submorphs"],get:function(){return this.ui.label.value},set:function(a){this.ui.label.value=a}},status:{derived:!0,after:["submorphs"],defaultValue:!1,get:function(){return this.getSubmorphNamed("status").value},set:function(a){var g=this.ui.status;a?(g.visible=!0,g.value=a):(g.visible=!1,g.value="");this.relayout()}},
fontFamily:{derived:!0,after:["submorphs"],get:function(){return this.ui.label.fontFamily},set:function(a){this.ui.label.fontFamily=a}},fontSize:{derived:!0,after:["submorphs"],get:function(){return this.ui.label.fontSize},set:function(a){this.ui.label.fontSize=a}},loadingImage:{defaultValue:System.decanonicalize("lively.morphic/")+"lively-web-logo-small-animate.svg"},master:{initialize:function(){this.master={auto:"styleguide://SystemWidgets/loading indicator"}}},submorphs:{initialize:function(){this.submorphs=
[{name:"wrapper",submorphs:[{type:"html",name:"spinner",extent:uh.pt(86.2,70.2)},{type:"label",name:"ld label",extent:uh.pt(20,100),submorphs:[{type:"label",name:"status"}]}]},{type:"button",name:"closeButton",label:uh.Icon.textAttribute("times")},{type:uh.ProgressBar,name:"progress bar"}]}}}}}],e,{pathInPackage:function(){return"loading-indicator.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",
version:"0.1.0"}}},{start:2085,end:7909})}(uh.Morph);BX=uh.LoadingIndicator;var HI=Da("L",BX);uh.default=BX;var Kk=lively.FreezerRuntime.recorderFor("lively.components/index.js");Object.assign(Kk,ksa);Object.assign(Kk,jsa);Object.assign(Kk,lsa);Object.assign(Kk,msa);Object.assign(Kk,nsa);Object.assign(Kk,osa);Kk.Window=yX;Kk.prompts=zX;Kk.widgets=AX;Kk.LoadingIndicator=HI;Kk.addClassMappings=qa;Kk.List=UE;Kk.DropDownList=FI;Kk.Button=TE;Kk.CheckBox=GI;Kk.addClassMappings({list:Kk.List,dropdownlist:Kk.DropDownList,
button:Kk.Button,checkbox:Kk.CheckBox,labeledcheckbox:Kk.widgets.LabeledCheckBox});Kk.Window=yX;Kk.Window=yX;Kk.LoadingIndicator=HI;Kk.LoadingIndicator=HI;Kk.prompts=zX;Kk.prompts=zX;Kk.widgets=AX;Kk.widgets=AX;var Dr=lively.FreezerRuntime.recorderFor("PartialFreezing/loading-page.js");Dr.Morph=Ll;Dr.MorphicDB=Yw;Dr.LoadingIndicator=HI;Dr.resource=la;var VE=function(b){var e=lively.FreezerRuntime.recorderFor("PartialFreezing/loading-page.js"),m=e.hasOwnProperty("WorldLoadingScreen")&&"function"===
typeof e.WorldLoadingScreen?e.WorldLoadingScreen:e.WorldLoadingScreen=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return dc(m,b,[{key:"commands",get:function(){var a=this;return[{name:"resize on client",exec:function(){$world._cachedWindowBounds=null;a.setBounds($world.windowBounds());a.get("json target indicator").topRight=a.innerBounds().insetBy(25).topRight()}}]}},{key:"__head_html__",get:function(){return'<style type="text/css">@import url("https://fonts.googleapis.com/css?family=Nunito:200,200i,300,300i,400,400i,600,600i,700,700i,800,800i,900,900i&display=swap");</style>'}},
{key:"onLoad",value:function(){var a=this,g,l,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){if(1==v.nextAddress){if(!lively.FreezerRuntime)return v.jumpTo(0);g=a.get("package loading indicator");g.startStepping("updateProgressBar");document.body.style.backgroundColor="black";l=a.getWorldName();(r=a.getFilePath())&&a.get("json target indicator").animate({opacity:1,duration:300});return v.yield(a.transitionToLivelyWorld({worldName:l,filePath:r},g),3)}g.stopStepping();v.jumpToEnd()})}},
{key:"transitionToLivelyWorld",value:function(a,g){var l=a.worldName,r=a.filePath,v=this,y,A,E,F,H,I;return $jscomp.asyncExecutePromiseGeneratorProgram(function(M){switch(M.nextAddress){case 1:return y=v.get("package loading indicator"),M.yield(Promise.resolve().then(function(){return Maa}),2);case 2:A=M.yieldResult;E=A.bootstrap;if(!(F=l&&"__newWorld__"!=l)){M.jumpTo(3);break}return M.yield(Dr.MorphicDB.default.exists("world",l),4);case 4:F=!M.yieldResult.exists;case 3:if(F)return M.return(v.indicateMissingWorld(!0));
if(!(H=r)){M.jumpTo(5);break}return M.yield(Dr.resource(document.location.origin).join(r).exists(),6);case 6:H=!M.yieldResult;case 5:if(H)return M.return(v.indicateMissingWorld(!0));I=Dr.LoadingIndicator.open("...starting bootstrap process...",{animated:!0,delay:1E3});g.opacity=1;return M.yield(E({worldName:l,filePath:r,loadingIndicator:I,progress:y}),0)}})}},{key:"getWorldName",value:function(){return document.location.href.endsWith("worlds/new")?"__newWorld__":Dr.resource(document.location.href).query().name||
!1}},{key:"getFilePath",value:function(){return Dr.resource(document.location.href).query().file||!1}},{key:"indicateMissingWorld",value:function(a){this.get("package loading indicator").visible=!a;this.get("broken heart").visible=this.get("broken heart").isLayoutable=a}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"WorldLoadingScreen"}},{key:"properties",get:function(){return{title:{derived:!0,get:function(){return"lively.next ("+document.location.hostname+")"}}}}}],e,{pathInPackage:function(){return"loading-page.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"PartialFreezing",version:"0.1.1-37"}}},{start:158,end:2907})}(Dr.Morph);Dr.WorldLoadingScreen=VE;Dr.WorldLoadingScreen=VE;Dr.WorldLoadingScreen=VE;var Fi=lively.FreezerRuntime.recorderFor("PartialFreezing/landing-page.js");Fi.Morph=Ll;Fi.MorphicDB=Yw;Fi.World=sy;Fi.easings=rr;Fi.morph=sa;Fi.promise=zh;Fi.string=pi;Fi.date=yu;
Fi.Color=Fg;Fi.pt=xi;Fi.LoadingIndicator=HI;Fi.resource=la;var WE=function(b){var e=lively.FreezerRuntime.recorderFor("PartialFreezing/landing-page.js"),m=e.hasOwnProperty("WorldPreview")&&"function"===typeof e.WorldPreview?e.WorldPreview:e.WorldPreview=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return dc(m,b,[{key:"relayout",value:function(){this.setBounds(this.world().visibleBounds())}},{key:"onLoad",value:function(){this.ui.spinner.visible=
!1}},{key:"displayPreview",value:function(){var a=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(g){return g.yield(a.initWithCommit(a._commit),0)})}},{key:"initWithCommit",value:function(a){var g=this,l,r,v,y,A,E,F,H;return $jscomp.asyncExecutePromiseGeneratorProgram(function(I){if(1==I.nextAddress)return l=g.ui,r=l.preview,v=l.timestamp,y=l.title,A=l.description,E=l.previewContainer,g.opacity=.5,E.opacity=0,I.yield(g.whenRendered(),2);if(3!=I.nextAddress)return g._commit=a,r.imageUrl=
a.preview,F=a.author,H=F.name,H=H.startsWith("guest-")?"guest":H,v.value=[H,{fontSize:13,fontWeight:"bold",paddingTop:"1px"},Fi.date.format(a.timestamp," - d.m.yy HH:MM"),{fontWeight:"bold",fontSize:12,paddingTop:"2px"}],y.value=Fi.string.truncate(a.name,18,"..."),A.value=a.description,I.yield(g.whenRendered(),3);E.opacity=1;g.animate({opacity:1,duration:300});I.jumpToEnd()})}},{key:"openAnimated",value:function(a){a=void 0===a?$world.visibleBounds():a;var g=this,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){switch(r.nextAddress){case 1:return l=
Fi.morph(Object.assign({},g.spec(),{reactsToPointer:!1,renderOnGPU:!0,submorphs:[g.ui.spinner.spec()]})).openInWorld(),l.hasFixedPosition=!0,l.globalPosition=g.globalPosition,l.opacity=0,r.yield(l.whenRendered(),2);case 2:return r.yield(l.animate({opacity:1,duration:300}),3);case 3:return l.dropShadow=!1,l.animate({bounds:a,borderRadius:0,duration:500,easing:Fi.easings.inOutQuint}),l.respondsToVisibleWindow=!0,r.yield(l.ui.spinner.animate({center:l.innerBounds().center(),duration:500,easing:Fi.easings.inOutQuint}),
4);case 4:return r.yield(Fi.promise.delay(1E3),5);case 5:return r.return(l)}})}},{key:"openWorld",value:function(){var a=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(g){if(1==g.nextAddress)return g.yield(a.openAnimated(),2);a.loadWorld();g.jumpToEnd()})}},{key:"loadWorld",value:function(){var a=this,g,l,r,v,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(A){if(1==A.nextAddress){g=a._commit;l=g._id;r=g.name;if(lively.FreezerRuntime)return v=Fi.LoadingIndicator.open("...starting bootstrap process...",
{animated:!0,delay:1E3}),a.transitionToLivelyWorld(document.location.origin,a._commit,v),A.return();y=Fi.LoadingIndicator.open("loading "+r);return A.yield(Fi.World.loadFromCommit(l,void 0,{morphicDB:Fi.MorphicDB.default}),3)}y.remove();A.jumpToEnd()})}},{key:"transitionToLivelyWorld",value:function(a,g,l){var r,v,y,A;return $jscomp.asyncExecutePromiseGeneratorProgram(function(E){switch(E.nextAddress){case 1:return E.yield(Bb.import("./package loading progress indicator-fb5a31ec.js"),3);case 3:if(!(r=
E.yieldResult)){E.jumpTo(4);break}return E.yield(Fi.resource("part://partial freezing/package loading progress indicator"),5);case 5:r=E.yieldResult;case 4:return E.yield(r.read(),2);case 2:return v=E.yieldResult,E.yield(Promise.resolve().then(function(){return Maa}),6);case 6:return y=E.yieldResult,A=y.bootstrap,E.yield(A({commit:g,loadingIndicator:l,progress:v}),0)}})}},{key:"showVersions",value:function(){var a=this,g,l,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){if(1==y.nextAddress)return g=
Fi.easings.inOutExpo,l=a.ui,r=l.previewContainer,v=a.versionContainer,a.addMorph(v),v.reactsToPointer=v.visible=!0,v.initializeFromStartCommit(a._commit),a.animate({width:515,duration:200,easing:g}),r.animate({opacity:0,duration:200}),y.yield(v.animate({opacity:1,duration:200}),2);r.reactsToPointer=r.visible=!1;y.jumpToEnd()})}},{key:"hideVersions",value:function(){var a=this,g,l,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){if(1==y.nextAddress)return g=Fi.easings.inOutExpo,l=
a.ui,r=l.previewContainer,v=a.versionContainer,r.reactsToPointer=r.visible=!0,a.animate({width:245,duration:200,easing:g}),r.animate({opacity:1,duration:200}),y.yield(v.animate({opacity:0,duration:200}),2);v.reset();v.remove();y.jumpToEnd()})}},{key:"toggleDeleteButton",value:function(a){this.ui.deleteButton.visible=a}},{key:"onHoverIn",value:function(a){this.toggleDeleteButton(!0)}},{key:"onHoverOut",value:function(a){this.toggleDeleteButton(!1)}},{key:"tryToDelete",value:function(){var a=this.ui.previewContainer,
g=this.deleteWorldPrompt;this.addMorph(g);g.visible=!0;g.animate({top:0,left:0,opacity:1,duration:100});a.animate({opacity:.3,duration:100})}},{key:"confirmDelete",value:function(){}},{key:"cancelDelete",value:function(){var a=this,g,l,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){if(1==v.nextAddress)return g=a.ui,l=g.previewContainer,r=a.deleteWorldPrompt,l.animate({opacity:1,duration:300}),v.yield(r.animate({opacity:0,duration:300}),2);r.remove();v.jumpToEnd()})}},{key:"onMouseUp",
value:function(a){var g=this.ui,l=g.openButton,r=g.versionButton,v=g.deleteButton,y=g.closeVersionsButton,A=g.cancelDeleteButton;g=g.confirmDeleteButton;switch(a.targetMorph){case l:this.openWorld();break;case r:this.showVersions();break;case v:this.tryToDelete();break;case y:this.hideVersions();break;case g:this.confirmDelete();break;case A:this.cancelDelete()}}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"WorldPreview"}},{key:"properties",get:function(){return{deleteWorldPrompt:{set:function(a){a.isMorph||
(a=Fi.morph(a));this.setProperty("deleteWorldPrompt",a)}},versionContainer:{set:function(a){a.isMorph||(a=Fi.morph(a));this.setProperty("versionContainer",a)}},ui:{readOnly:!0,get:function(){return{previewContainer:this.getSubmorphNamed("preview container"),versionContainer:this.getSubmorphNamed("version container"),preview:this.getSubmorphNamed("preview"),timestamp:this.getSubmorphNamed("timestamp"),title:this.getSubmorphNamed("title"),description:this.getSubmorphNamed("description"),openButton:this.getSubmorphNamed("open button"),
versionButton:this.getSubmorphNamed("version button"),spinner:this.getSubmorphNamed("spinner"),deleteButton:this.getSubmorphNamed("delete button"),closeVersionsButton:this.getSubmorphNamed("close versions button"),versionList:this.getSubmorphNamed("version list"),deleteWorldPrompt:this.getSubmorphNamed("delete world prompt"),cancelDeleteButton:this.getSubmorphNamed("cancel delete button"),confirmDeleteButton:this.getSubmorphNamed("confirm delete button")}}}}}}],e,{pathInPackage:function(){return"landing-page.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"PartialFreezing",version:"0.1.1-37"}}},{start:279,end:7709})}(Fi.Morph);Fi.WorldPreview=WE;Fi.WorldPreview=WE;Fi.WorldPreview=WE;var XE=function(b){var e=lively.FreezerRuntime.recorderFor("PartialFreezing/landing-page.js"),m=e.hasOwnProperty("WorldLandingPage")&&"function"===typeof e.WorldLandingPage?e.WorldLandingPage:e.WorldLandingPage=
function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return dc(m,b,[{key:"__loading_html__",get:function(){return"\n      <style>\n        "+this.loadingScreen.cssDeclaration+"\n      </style>\n      "+this.loadingScreen.html+"\n    "}},{key:"__head_html__",get:function(){return'\n<link type="text/css" rel="stylesheet" id="lively-font-awesome" href="/lively.morphic/assets/font-awesome/css/font-awesome.css">\n<link type="text/css" rel="stylesheet" id="lively-font-inconsolata" href="/lively.morphic/assets/inconsolata/inconsolata.css">\n<style type="text/css" id="WorldLandingPage_7068CDA9_749E_4EC1_9BC4_50DF06EAA2BA-Nunito">@import url("https://fonts.googleapis.com/css?family=Nunito:200,200i,300,300i,400,400i,600,600i,700,700i,800,800i,900,900i&display=swap");</style>'}},
{key:"commands",get:function(){var a=this;return[{name:"resize on client",exec:function(){$world._cachedWindowBounds=null;document.body.style.overflowY="hidden";a.setBounds($world.windowBounds());a.getSubmorphNamed("globe").extent=a.extent;a.ensureUserFlap();var g=a.getSubmorphNamed("a project browser");g&&(g.center=a.extent.scaleBy(.5))}}]}},{key:"ensureUserFlap",value:function(){var a,g;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){switch(l.nextAddress){case 1:return $world.get("user flap")?
l.return():l.yield(Bb.import("./dark-5860a91c.js"),3);case 3:if(!(a=l.yieldResult)){l.jumpTo(4);break}return l.yield(Fi.resource("part://SystemIDE/user flap master/dark"),5);case 5:a=l.yieldResult;case 4:return l.yield(a.read(),2);case 2:return g=l.yieldResult,g.name="user flap",g.showMorphControls=!1,g.hasFixedPosition=!0,g.openInWorld(),g.opacity=0,g.alignInWorld(),g.get("fast load toggler").refresh(),l.yield(Fi.promise.delay(1E3),6);case 6:g.animate({opacity:1}),l.jumpToEnd()}})}},{key:"beforePublish",
value:function(){var a=this.getSubmorphNamed("a project browser");a&&a.remove()}},{key:"onLoad",value:function(){var a=this,g;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){if(1==l.nextAddress)return l.yield(a.whenRendered(),2);if(!lively.FreezerRuntime)return l.return();$world.fill=Fi.Color.black;document.documentElement.style.background=Fi.Color.black;a.showWorldList().then(function(){return document.getElementById("loading-screen").remove()});a.getSubmorphNamed("globe").fullyLoaded();
(g=document.getElementById("loading screen"))&&g.remove();l.jumpToEnd()})}},{key:"showWorldList",value:function(){var a=this,g,l,r,v,y,A;return $jscomp.asyncExecutePromiseGeneratorProgram(function(E){switch(E.nextAddress){case 1:if(g=a.getSubmorphNamed("a poject browser")){E.jumpTo(2);break}l=a;r=l.addMorph;v=l;return E.yield(Bb.import("./project browser-ef40821c.js"),4);case 4:if(!(y=E.yieldResult)){E.jumpTo(5);break}return E.yield(Fi.resource("part://partial freezing/project browser"),6);case 6:y=
E.yieldResult;case 5:return E.yield(y.read(),3);case 3:g=r.call(v,E.yieldResult);case 2:A=g,A.name="a project browser",a.reset(),A.showCloseButton=!1,A.extent=Fi.pt(1110,800).minPt(a.extent.subPt(Fi.pt(50,150))),A.center=a.innerBounds().center(),A.animate({opacity:1,duration:300}),A.displayWorlds(),A.hasFixedPosition=!1,E.jumpToEnd()}})}},{key:"reset",value:function(){var a=this.getSubmorphNamed("a project browser");a.opacity=0;a.center=this.innerBounds().center()}}],[{key:Symbol.for("__LivelyClassName__"),
get:function(){return"WorldLandingPage"}},{key:"properties",get:function(){return{title:{derived:!0,get:function(){return"lively.next ("+document.location.hostname+")"}},loadingScreen:{}}}}],e,{pathInPackage:function(){return"landing-page.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"PartialFreezing",version:"0.1.1-37"}}},{start:7718,end:11036})}(Fi.Morph);Fi.WorldLandingPage=
XE;Fi.WorldLandingPage=XE;Fi.WorldLandingPage=XE;var nx=lively.FreezerRuntime.recorderFor("PartialFreezing/index.js");nx.WorldLoadingScreen=VE;nx.WorldLandingPage=XE;nx.WorldPreview=WE;nx.WorldLoadingScreen=VE;nx.WorldLoadingScreen=VE;nx.WorldLandingPage=XE;nx.WorldLandingPage=XE;nx.WorldPreview=WE;nx.WorldPreview=WE;var Se=lively.FreezerRuntime.recorderFor("PartialFreezing/bootstrap.js");Se.bootstrap=tL;Se.fastPrepLivelySystem=function(b){return Promise.resolve().then(function(){b.status="starting fast system preparation..."}).then(function(){return Se.resource(document.location.origin).join("package-registry.json").readJson()}).then(function(e){System["__lively.modules__packageRegistry"]=
lively.modules.PackageRegistry.fromJSON(System,e);return System}).then(function(){return Se.loadViaScript("/lively.user/dist/lively.user-client.js")})};Se.installFetchHook=function(b){lively.modules.installHook("fetch",function(e,m){Se.loads++;b.status="loading "+Se.string.truncateLeft(m.name.replace(window.System.baseURL,""),25,"...");b.progress=Se.loads/(800-4*Object.keys(Se.extractedModules).length);b.center=$world.innerBounds().center();return e(m)})};Se.extractModules=function(b){Object.keys(lively.FreezerRuntime.registry).filter(function(e){return e.startsWith(b)}).forEach(function(e){Se.extractedModules[window.origin+
"/"+e]=Object.assign({},lively.FreezerRuntime.registry[e].exports)})};Se.loadComponents=function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){switch(b.nextAddress){case 1:return b.yield(Bb.import("./world-a80c67e1.js"),2);case 2:return b.yield(Bb.import("./editor-plugin-14253833.js").then(function(e){return e.e}),3);case 3:return b.yield(Bb.import("./editor-plugin-5dc708ee.js"),4);case 4:return b.yield(Bb.import("./index-a98bf65c.js"),5);case 5:return b.yield(Bb.import("./client-command-6432b2cb.js"),
6);case 6:return b.yield(Bb.import("./client-resource-d0274800.js"),7);case 7:return b.yield(Promise.resolve().then(function(){return Tja}),8);case 8:Se.extractModules("lively.bindings"),Se.extractModules("lively.shell"),Se.extractModules("lively.ide"),Se.extractModules("lively.components"),b.jumpToEnd()}})};Se.bootstrapLivelySystem=function(b,e,m){return Promise.resolve().then(function(){b.status="starting bootstrap process..."}).then(function(){var a,g,l,r,v,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(A){switch(A.nextAddress){case 1:return A.yield(e.whenRendered(),
2);case 2:if("frozen"!=m["lively.lang"]&&!Se.fastLoad){A.jumpTo(3);break}return A.yield(Promise.resolve().then(function(){return S4}),4);case 4:a=A.yieldResult,Se.extractModules("lively.lang"),e.finishPackage({packageName:"lively.lang",frozen:!0}),delete a._prevLivelyGlobal;case 3:if("frozen"!=m["lively.ast"]&&!Se.fastLoad){A.jumpTo(5);break}g=lively;return A.yield(Promise.resolve().then(function(){return d5}),6);case 6:g.ast=A.yieldResult,Se.extractModules("lively.ast"),e.finishPackage({packageName:"lively.ast",
frozen:!0});case 5:if("frozen"!=m["lively.source-transform"]&&!Se.fastLoad){A.jumpTo(7);break}l=lively;return A.yield(Promise.resolve().then(function(){return Qja}),8);case 8:l.sourceTransform=A.yieldResult,Se.extractModules("lively.source-transform"),e.finishPackage({packageName:"lively.source-transform",frozen:!0});case 7:if("frozen"!=m["lively.classes"]&&!Se.fastLoad){A.jumpTo(9);break}return A.yield(Bb.import("./object-classes-eb5d8474.js"),10);case 10:return r=lively,A.yield(Promise.resolve().then(function(){return ala}),
11);case 11:r.classes=A.yieldResult,Se.extractModules("lively.class"),e.finishPackage({packageName:"lively.classes",frozen:!0});case 9:if("frozen"!=m["lively.vm"]&&!Se.fastLoad){A.jumpTo(12);break}v=lively;return A.yield(Promise.resolve().then(function(){return X5}),13);case 13:v.vm=A.yieldResult,Se.extractModules("lively.vm"),e.finishPackage({packageName:"lively.vm",frozen:!0});case 12:if("frozen"!=m["lively.modules"]&&!Se.fastLoad){A.jumpTo(14);break}return A.yield(Promise.resolve().then(function(){return GM}),
15);case 15:Se.extractModules("lively.modules"),e.finishPackage({packageName:"lively.modules",frozen:!0});case 14:if("frozen"!=m["lively.user"]&&!Se.fastLoad){A.jumpTo(16);break}return A.yield(Promise.resolve().then(function(){return Sqa}),17);case 17:return A.yield(Bb.import("./user-ui-0f5aeda0.js"),18);case 18:Se.extractModules("lively.user"),e.finishPackage({packageName:"lively.user",frozen:!0});case 16:if("frozen"!=m["lively.storage"]&&!Se.fastLoad){A.jumpTo(19);break}return A.yield(Promise.resolve().then(function(){return qqa}),
20);case 20:Se.extractModules("lively.storage"),e.finishPackage({packageName:"lively.storage",frozen:!0});case 19:if("frozen"!=m["lively.morphic"]&&!Se.fastLoad){A.jumpTo(0);break}return A.yield(Promise.resolve().then(function(){return Tka}),22);case 22:return Se.extractModules("lively.resources"),A.yield(Bb.import("./client-a01a54f5.js"),23);case 23:return A.yield(Bb.import("./index-792c91c7.js"),24);case 24:return Se.extractModules("lively.2lively"),A.yield(Promise.resolve().then(function(){return Vja}),
25);case 25:return Se.extractModules("lively.serializer2"),A.yield(Se.loadComponents(),26);case 26:return A.yield(Bb.import("./index-3100fe37.js").then(function(E){return E.i}),27);case 27:return Se.extractModules("lively.halos"),A.yield(Bb.import("./index-dd2e460a.js"),28);case 28:return Se.extractModules("lively-system-interface"),A.yield(Promise.resolve().then(function(){return Uja}),29);case 29:return Se.extractModules("lively.graphics"),y=lively,A.yield(Promise.resolve().then(function(){return $qa}),
30);case 30:y.morphic=A.yieldResult,Se.extractModules("lively.morphic"),e.finishPackage({packageName:"lively.morphic",frozen:!0}),A.jumpToEnd()}})}).then(function(){var a,g,l,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){switch(v.nextAddress){case 1:return v.yield(Se.resource(document.location.origin).join("package-registry.json").readJson(),2);case 2:return a=v.yieldResult,v.yield(Se.loadViaScript("/lively.next-node_modules/babel-standalone/babel.js"),3);case 3:return v.yield(Se.loadViaScript("/lively.next-node_modules/systemjs/dist/system.src.js"),
4);case 4:return window.System.config({baseURL:document.location.origin}),v.yield(Se.loadViaScript("/lively.modules/systemjs-init.js"),5);case 5:g=lively.modules.getSystem("bootstrapped",{baseURL:document.location.origin});lively.modules.changeSystem(g,!0);g["__lively.modules__packageRegistry"]=lively.modules.PackageRegistry.fromJSON(g,a);for(l in Se.extractedModules)g.set(l,g.newModule(Se.extractedModules[l])),r=lively.modules.module(l),r._recorder=Se.extractedModules[l],r._frozenModule=!0;Se.installFetchHook(b);
v.jumpToEnd()}})}).then(function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){if("dynamic"==m["lively.lang"]&&!Se.fastLoad)return a.return(Se.importPackageAndDo("lively.lang",function(g){e.finishPackage({packageName:"lively.lang",loaded:!0});delete g._prevLivelyGlobal},b));a.jumpToEnd()})}).then(function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){e.animate({opacity:1,easing:Se.easings.outExpo,duration:300});if("dynamic"==m["lively.ast"]&&!Se.fastLoad)return a.return(Se.importPackageAndDo("lively.ast",
function(g){e.finishPackage({packageName:"lively.ast",loaded:!0});lively.ast=g},b));a.jumpToEnd()})}).then(function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){if("dynamic"==m["lively.source-transform"]&&!Se.fastLoad)return a.return(Se.importPackageAndDo("lively.source-transform",function(g){e.finishPackage({packageName:"lively.source-transform",loaded:!0});lively.sourceTransform=g},b));a.jumpToEnd()})}).then(function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){if("dynamic"==
m["lively.classes"]&&!Se.fastLoad)return a.return(Se.importPackageAndDo("lively.classes",function(g){e.finishPackage({packageName:"lively.classes",loaded:!0});lively.classes=g},b));a.jumpToEnd()})}).then(function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){if("dynamic"==m["lively.vm"]&&!Se.fastLoad)return a.return(Se.importPackageAndDo("lively.vm",function(g){e.finishPackage({packageName:"lively.vm",loaded:!0});lively.vm=g},b));a.jumpToEnd()})}).then(function(){function a(g){lively.modules=
g;lively.modules.unwrapModuleLoad();lively.modules.unwrapModuleResolution();lively.modules.wrapModuleLoad();lively.modules.wrapModuleResolution();Se.installFetchHook(b);var l=System["__lively.modules__packageRegistry"];delete System["__lively.modules__packageRegistry"];g=System["__lively.modules__packageRegistry"]=g.PackageRegistry.ofSystem(System);Object.assign(g,Se.obj.select(l,["packageMap","individualPackageDirs","devPackageDirs","packageBaseDirs"]));g.resetByURL();l=g.allPackages();var r=lively.modules.module("lively.modules/src/packages/package.js").recorder.Package;
l.filter(function(y){return!y.constructor[Symbol.for("lively-module-meta")]}).forEach(function(y){Se.adoptObject(y,r)});l=Object.values(System["__lively.modules__loadedModules"]);var v=lively.modules.module("lively.modules/src/module.js").recorder.ModuleInterface;l.filter(function(y){return!y.constructor[Symbol.for("lively-module-meta")]}).forEach(function(y){Se.adoptObject(y,v)})}return $jscomp.asyncExecutePromiseGeneratorProgram(function(g){if(1==g.nextAddress)return"frozen"==m["lively.modules"]||
Se.fastLoad?(System._scripting=lively.modules.scripting,g.jumpTo(2)):g.yield(Se.importPackageAndDo("lively.modules",a,b),2);e.finishPackage({packageName:"lively.modules",loaded:!0});g.jumpToEnd()})}).then(function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){if("dynamic"==m["lively.user"]&&!Se.fastLoad)return a.return(Se.importPackageAndDo("lively.user",function(g){e.finishPackage({packageName:"lively.user",loaded:!0});lively.user=g},b));a.jumpToEnd()})}).then(function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){if("dynamic"==
m["lively.storage"]&&!Se.fastLoad)return a.return(Se.importPackageAndDo("lively.storage",function(g){e.finishPackage({packageName:"lively.storage",loaded:!0});lively.storage=g},b));a.jumpToEnd()})})};Se.importPackageAndDo=function(b,e,m){var a=b.split("/").slice(-1)[0];m.label="loading "+a;return lively.modules.importPackage(b).then(e||function(){})};Se.polyfills=function(){var b=[];"PointerEvent"in window||b.push(Se.loadViaScript(document.location.origin+"/lively.next-node_modules/pepjs/dist/pep.js"));
"fetch"in window||b.push(Se.loadViaScript("//cdnjs.cloudflare.com/ajax/libs/fetch/1.0.0/fetch.js"));return Promise.all(b)};Se.resource=la;Se.loadViaScript=O;Se.promise=zh;Se.string=pi;Se.obj=Ag;Se.modulePackage=GM;Se.easings=rr;Se.adoptObject=Vr;Se.Color=Fg;lively.modules=Se.modulePackage;Se.loginDone=!0;Se.doBootstrap=!0;Se.askBeforeQuit=!0;Se.worldLoaded=!1;Se.loc=document.location;Se.query=Se.resource(Se.loc.href).query();Se.fastLoad=1==Se.query.fastLoad;Se.bootstrap=tL;Se.bootstrap=tL;Se.loads=
0;Se.extractedModules={};var Maa=Object.freeze({__proto__:null,bootstrap:tL}),R4=JSON.parse('{"id":"undefined_63201297_4125_4434_B638_63C5F5ABFB79","snapshot":{"undefined_63201297_4125_4434_B638_63C5F5ABFB79":{"rev":401298,"props":{"name":{"value":"world landing page"},"draggable":{"value":true},"grabbable":{"value":true},"reactsToPointer":{"value":false},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(65.60078124999927,36.453125)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(1003.0232101304723,594.571136205233)"},"fill":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(0,0,0)"},"submorphs":{"value":[{"__ref__":true,"id":"undefined_749C10F2_6486_4E22_92A9_AA64DE2D0327","rev":785}]},"clipMode":{"value":"hidden"},"styleClasses":{"value":["WorldLandingPage","Morph","morph"]},"installedFonts":{"value":{"__ref__":true,"id":"8ABCEA23-D17D-4960-9F4B-32D1D3D49BE9","rev":0}},"metadata":{"value":{"__ref__":true,"id":"E3B1C2A1-AC58-4995-A744-7042ED752AF3","rev":0}},"loadingScreen":{"value":{"__ref__":true,"id":"undefined_1B4C4213_F388_4483_AC7E_41BFB23F09C5","rev":728}}},"lively.serializer-class-info":{"className":"WorldLandingPage","module":{"package":{"name":"PartialFreezing","version":"0.1.1-36"},"pathInPackage":"landing-page.js"}}},"undefined_749C10F2_6486_4E22_92A9_AA64DE2D0327":{"rev":785,"props":{"attributeConnections":{"value":[{"__ref__":true,"id":"6458CBA9-D300-484A-B642-B46F360772DA","rev":0}]},"name":{"value":"globe"},"reactsToPointer":{"value":false},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(-1.2699218750001364,0.14453125)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(1508.8984375,971.6171875)"},"fill":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(0,0,0)"},"submorphs":{"value":[{"__ref__":true,"id":"undefined_9F8F94E1_6889_4997_8F8A_7BCA6F4D993C","rev":769},{"__ref__":true,"id":"undefined_9C37C781_4B70_49BE_8AF8_80FC3E2CD779","rev":783}]},"styleClasses":{"value":["Globe","Canvas","Morph","morph"]},"borderColor":{"key":"borderColor","verbatim":true,"value":{"top":[0,0,0,1],"right":[0,0,0,1],"bottom":[0,0,0,1],"left":[0,0,0,1]}},"metadata":{"value":{"__ref__":true,"id":"B9E445B9-B38B-4B5F-A9E0-34C483178A38","rev":0}},"canvasExtent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(1508,971)"},"_serializedContents":{"value":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAABeQAAAPLCAYAAAA+EomxAAAgAElEQVR4XuzYMQ0AAAgEMfBvGhXcVAx80jDdjiNAgAABAgQIECBAgAABAgQIECBAgAABAgTeBfZ9wQABAgQIECBAgAABAgQIECBAgAABAgQIECAwgrwnIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBG+p6dkAACAASURBVAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwf8D/nSQAAIABJREFUIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIHDt2DEJAAAAwzD/ruuiVxQMwq4SIECAAAECBAgQIECAwCAgyA/IJggQIECAAAECBAgQIECAAAECBAgQIECAgCDvAwQIECBAgAABAgQIECBAgAABAgQIECBAYBAQ5AdkEwQIECBAgAABAgQIECBAgAABAgQIECBAQJD3AQIECBAgQIAAAQIECBAgQIAAAQIECBAgMAgI8gOyCQIECBAgQIAAAQIECBAgQIAAAQIECBAgIMj7AAECBAgQIECAAAECBAgQIECAAAECBAgQGAQE+QHZBAECBAgQIECAAAECBAgQIECAAAECBAgQEOR9gAABAgQIECBAgAABAgQIECBAgAABAgQIDAKC/IBsggABAgQIECBAgAABAgQIECBAgAABAgQICPI+QIAAAQIECBAgQIAAAQIECBAgQIAAAQIEBgFBfkA2QYAAAQIECBAgQIAAAQIECBAgQIAAAQIEBHkfIECAAAECBAgQIECAAAECBAgQIECAAAECg4AgPyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwPECBAgAABAgQIECBAgAABAgQIECBAgACBQUCQH5BNECBAgAABAgQIECBAgAABAgQIECBAgAABQd4HCBAgQIAAAQIECBAgQIAAAQIECBAgQIDAICDID8gmCBAgQIAAAQIECBAgQIAAAQIECBAgQICAIO8DBAgQIECAAAECBAgQIECAAAECBAgQIEBgEBDkB2QTBAgQIECAAAECBAgQIECAAAECBAgQIEBAkPcBAgQIECBAgAABAgQIECBAgAABAgQIECAwCAjyA7IJAgQIECBAgAABAgQIECBAgAABAgQIECAgyPsAAQIECBAgQIAAAQIECBAgQIAAAQIECBAYBAT5AdkEAQIECBAgQIAAAQIECBAgQIAAAQIECBAQ5H2AAAECBAgQIECAAAECBAgQIECAAAECBAgMAoL8gGyCAAECBAgQIECAAAECBAgQIECAAAECBAgI8j5AgAABAgQIECBAgAABAgQIECBAgAABAgQGAUF+QDZBgAABAgQIECBAgAABAgQIECBAgAABAgQEeR8gQIAAAQIECBAgQIAAAQIECBAgQIAAAQKDgCA/IJsgQIAAAQIECBAgQIAAAQIECBAgQIAAAQKCvA8QIECAAAECBAgQIECAAAECBAgQIECAAIFBQJAfkE0QIECAAAECBAgQIECAAAECBAgQIECAAAFB3gcIECBAgAABAgQIECBAgAABAgQIECBAgMAgIMgPyCYIECBAgAABAgQIECBAgAABAgQIECBAgIAg7wMECBAgQIAAAQIECBAgQIAAAQIECBAgQGAQEOQHZBMECBAgQIAAAQIECBAgQIAAAQIECBAgQECQ9wECBAgQIECAAAECBAgQIECAAAECBAgQIDAICPIDsgkCBAgQIECAAAECBAgQIECAAAECBAgQICDI+wABAgQIECBAgAABAgQIECBAgAABAgQIEBgEBPkB2QQBAgQIECBAgAABAgQIECBAgAABAgQIEBDkfYAAAQIECBAgQIAAAQIECBAgQIAAAQIECAwCgvyAbIIAAQIECBAgQIAAAQIECBAgQIAAAQIECAjyPkCAAAECBAgQIECAAAECBAgQIECAAAECBAYBQX5ANkGAAAECBAgQIECAAAECBAgQIECAAAECBAR5HyBAgAABAgQIECBAgAABAgQIECBAgAABAoOAID8gmyBAgAABAgQIECBAgAABAgQIECBAgAABAoK8DxAgQIAAAQIECBAgQIAAAQIECBAgQIAAgUFAkB+QTRAgQIAAAQIECBAgQIAAAQIECBAgQIAAAUHeBwgQIECAAAECBAgQIECAAAECBAgQIECAwCAgyA/IJggQIECAAAECBAgQIECAAAECBAgQIECAgCDvAwQIECBAgAABAgQIECBAgAABAgQIECBAYBAQ5AdkEwQIECBAgAABAgQIECBAgAABAgQIECBAQJD3AQIECBAgQIAAAQIECBAgQIAAAQIECBAgMAgI8gOyCQIECBAgQIAAAQIECBAgQIAAAQIECBAgIMj7AAECBAgQIECAAAECBAgQIECAAAECBAgQGAQE+QHZBAECBAgQIECAAAECBAgQIECAAAECBAgQEOR9gAABAgQIECBAgAABAgQIECBAgAABAgQIDAKC/IBsggABAgQIECBAgAABAgQIECBAgAABAgQICPI+QIAAAQIECBAgQIAAAQIECBAgQIAAAQIEBgFBfkA2QYAAAQIECBAgQIAAAQIECBAgQIAAAQIEBHkfIECAAAECBAgQIECAAAECBAgQIECAAAECg4AgPyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwPECBAgAABAgQIECBAgAABAgQIECBAgACBQUCQH5BNECBAgAABAgQIECBAgAABAgQIECBAgAABQd4HCBAgQIAAAQIECBAgQIAAAQIECBAgQIDAICDID8gmCBAgQIAAAQIECBAgQIAAAQIECBAgQICAIO8DBAgQIECAAAECBAgQIECAAAECBAgQIEBgEBDkB2QTBAgQIECAAAECBAgQIECAAAECBAgQIEBAkPcBAgQIECBAgAABAgQIECBAgAABAgQIECAwCAjyA7IJAgQIECBAgAABAgQIECBAgAABAgQIECAgyPsAAQIECBAgQIAAAQIECBAgQIAAAQIECBAYBAT5AdkEAQIECBAgQIAAAQIECBAgQIAAAQIECBAQ5H2AAAECBAgQIECAAAECBAgQIECAAAECBAgMAoL8gGyCAAECBAgQIECAAAECBAgQIECAAAECBAgI8j5AgAABAgQIECBAgAABAgQIECBAgAABAgQGAUF+QDZBgAABAgQIECBAgAABAgQIECBAgAABAgQEeR8gQIAAAQIECBAgQIAAAQIECBAgQIAAAQKDgCA/IJsgQIAAAQIECBAgQIAAAQIECBAgQIAAAQKCvA8QIECAAAECBAgQIECAAAECBAgQIECAAIFBQJAfkE0QIECAAAECBAgQIECAAAECBAgQIECAAAFB3gcIECBAgAABAgQIECBAgAABAgQIECBAgMAgIMgPyCYIECBAgAABAgQIECBAgAABAgQIECBAgIAg7wMECBAgQIAAAQIECBAgQIAAAQIECBAgQGAQEOQHZBMECBAgQIAAAQIECBAgQIAAAQIECBAgQECQ9wECBAgQIECAAAECBAgQIECAAAECBAgQIDAICPIDsgkCBAgQIECAAAECBAgQIECAAAECBAgQICDI+wABAgQIECBAgAABAgQIECBAgAABAgQIEBgEBPkB2QQBAgQIECBAgAABAgQIECBAgAABAgQIEBDkfYAAAQIECBAgQIAAAQIECBAgQIAAAQIECAwCgvyAbIIAAQIECBAgQIAAAQIECBAgQIAAAQIECAjyPkCAAAECBAgQIECAAAECBAgQIECAAAECBAYBQX5ANkGAAAECBAgQIECAAAECBAgQIECAAAECBAR5HyBAgAABAgQIECBAgAABAgQIECBAgAABAoOAID8gmyBAgAABAgQIECBAgAABAgQIECBAgAABAoK8DxAgQIAAAQIECBAgQIAAAQIECBAgQIAAgUFAkB+QTRAgQIAAAQIECBAgQIAAAQIECBAgQIAAAUHeBwgQIECAAAECBAgQIECAAAECBAgQIECAwCAgyA/IJggQIECAAAECBAgQIECAAAECBAgQIECAgCDvAwQIECBAgAABAgQIECBAgAABAgQIECBAYBAQ5AdkEwQIECBAgAABAgQIECBAgAABAgQIECBAQJD3AQIECBAgQIAAAQIECBAgQIAAAQIECBAgMAgI8gOyCQIECBAgQIAAAQIECBAgQIAAAQIECBAgIMj7AAECBAgQIECAAAECBAgQIECAAAECBAgQGAQE+QHZBAECBAgQIECAAAECBAgQIECAAAECBAgQEOR9gAABAgQIECBAgAABAgQIECBAgAABAgQIDAKC/IBsggABAgQIECBAgAABAgQIECBAgAABAgQICPI+QIAAAQIECBAgQIAAAQIECBAgQIAAAQIEBgFBfkA2QYAAAQIECBAgQIAAAQIECBAgQIAAAQIEBHkfIECAAAECBAgQIECAAAECBAgQIECAAAECg4AgPyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwPECBAgAABAgQIECBAgAABAgQIECBAgACBQUCQH5BNECBAgAABAgQIECBAgAABAgQIECBAgAABQd4HCBAgQIAAAQIECBAgQIAAAQIECBAgQIDAICDID8gmCBAgQIAAAQIECBAgQIAAAQIECBAgQICAIO8DBAgQIECAAAECBAgQIECAAAECBAgQIEBgEBDkB2QTBAgQIECAAAECBAgQIECAAAECBAgQIEBAkPcBAgQIECBAgAABAgQIECBAgAABAgQIECAwCAjyA7IJAgQIECBAgAABAgQIECBAgAABAgQIECAgyPsAAQIECBAgQIAAAQIECBAgQIAAAQIECBAYBAT5AdkEAQIECBAgQIAAAQIECBAgQIAAAQIECBAQ5H2AAAECBAgQIECAAAECBAgQIECAAAECBAgMAoL8gGyCAAECBAgQIECAAAECBAgQIECAAAECBAgI8j5AgAABAgQIECBAgAABAgQIECBAgAABAgQGAUF+QDZBgAABAgQIECBAgAABAgQIECBAgAABAgQEeR8gQIAAAQIECBAgQIAAAQIECBAgQIAAAQKDgCA/IJsgQIAAAQIECBAgQIAAAQIECBAgQIAAAQKCvA8QIECAAAECBAgQIECAAAECBAgQIECAAIFBQJAfkE0QIECAAAECBAgQIECAAAECBAgQIECAAAFB3gcIECBAgAABAgQIECBAgAABAgQIECBAgMAgIMgPyCYIECBAgAABAgQIECBAgAABAgQIECBAgIAg7wMECBAgQIAAAQIECBAgQIAAAQIECBAgQGAQEOQHZBMECBAgQIAAAQIECBAgQIAAAQIECBAgQECQ9wECBAgQIECAAAECBAgQIECAAAECBAgQIDAICPIDsgkCBAgQIECAAAECBAgQIECAAAECBAgQICDI+wABAgQIECBAgAABAgQIECBAgAABAgQIEBgEBPkB2QQBAgQIECBAgAABAgQIECBAgAABAgQIEBDkfYAAAQIECBAgQIAAAQIECBAgQIAAAQIECAwCgvyAbIIAAQIECBAgQIAAAQIECBAgQIAAAQIECAjyPkCAAAECBAgQIECAAAECBAgQIECAAAECBAYBQX5ANkGAAAECBAgQIECAAAECBAgQIECAAAECBAR5HyBAgAABAgQIECBAgAABAgQIECBAgAABAoOAID8gmyBAgAABAgQIECBAgAABAgQIECBAgAABAoK8DxAgQIAAAQIECBAgQIAAAQIECBAgQIAAgUFAkB+QTRAgQIAAAQIECBAgQIAAAQIECBAgQIAAAUHeBwgQIECAAAECBAgQIECAAAECBAgQIECAwCAgyA/IJggQIECAAAECBAgQIECAAAECBAgQIECAgCDvAwQIECBAgAABAgQIECBAgAABAgQIECBAYBAQ5AdkEwQIECBAgAABAgQIECBAgAABAgQIECBAQJD3AQIECBAgQIAAAQIECBAgQIAAAQIECBAgMAgI8gOyCQIECBAgQIAAAQIECBAgQIAAAQIECBAgIMj7AAECBAgQIECAAAECBAgQIECAAAECBAgQGAQE+QHZBAECBAgQIECAAAECBAgQIECAAAECBAgQEOR9gAABAgQIECBAgAABAgQIECBAgAABAgQIDAKC/IBsggABAgQIECBAgAABAgQIECBAgAABAgQICPI+QIAAAQIECBAgQIAAAQIECBAgQIAAAQIEBgFBfkA2QYAAAQIECBAgQIAAAQIECBAgQIAAAQIEBHkfIECAAAECBAgQIECAAAECBAgQIECAAAECg4AgPyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwPECBAgAABAgQIECBAgAABAgQIECBAgACBQUCQH5BNECBAgAABAgQIECBAgAABAgQIECBAgAABQd4HCBAgQIAAAQIECBAgQIAAAQIECBAgQIDAICDID8gmCBAgQIAAAQIECBAgQIAAAQIECBAgQICAIO8DBAgQIECAAAECBAgQIECAAAECBAgQIEBgEBDkB2QTBAgQIECAAAECBAgQIECAAAECBAgQIEBAkPcBAgQIECBAgAABAgQIECBAgAABAgQIECAwCAjyA7IJAgQIECBAgAABAgQIECBAgAABAgQIECAgyPsAAQIECBAgQIAAAQIECBAgQIAAAQIECBAYBAT5AdkEAQIECBAgQIAAAQIECBAgQIAAAQIECBAQ5H2AAAECBAgQIECAAAECBAgQIECAAAECBAgMAoL8gGyCAAECBAgQIECAAAECBAgQIECAAAECBAgI8j5AgAABAgQIECBAgAABAgQIECBAgAABAgQGAUF+QDZBgAABAgQIECBAgAABAgQIECBAgAABAgQEeR8gQIAAAQIECBAgQIAAAQIECBAgQIAAAQKDgCA/IJsgQIAAAQIECBAgQIAAAQIECBAgQIAAAQKCvA8QIECAAAECBAgQIECAAAECBAgQIECAAIFBQJAfkE0QIECAAAECBAgQIECAAAECBAgQIECAAAFB3gcIECBAgAABAgQIECBAgAABAgQIECBAgMAgIMgPyCYIECBAgAABAgQIECBAgAABAgQIECBAgIAg7wMECBAgQIAAAQIECBAgQIAAAQIECBAgQGAQEOQHZBMECBBYNmpRAAAMNUlEQVQgQIAAAQIECBAgQIAAAQIECBAgQECQ9wECBAgQIECAAAECBAgQIECAAAECBAgQIDAICPIDsgkCBAgQIECAAAECBAgQIECAAAECBAgQICDI+wABAgQIECBAgAABAgQIECBAgAABAgQIEBgEBPkB2QQBAgQIECBAgAABAgQIECBAgAABAgQIEBDkfYAAAQIECBAgQIAAAQIECBAgQIAAAQIECAwCgvyAbIIAAQIECBAgQIAAAQIECBAgQIAAAQIECAjyPkCAAAECBAgQIECAAAECBAgQIECAAAECBAYBQX5ANkGAAAECBAgQIECAAAECBAgQIECAAAECBAR5HyBAgAABAgQIECBAgAABAgQIECBAgAABAoOAID8gmyBAgAABAgQIECBAgAABAgQIECBAgAABAoK8DxAgQIAAAQIECBAgQIAAAQIECBAgQIAAgUFAkB+QTRAgQIAAAQIECBAgQIAAAQIECBAgQIAAAUHeBwgQIECAAAECBAgQIECAAAECBAgQIECAwCAgyA/IJggQIECAAAECBAgQIECAAAECBAgQIECAgCDvAwQIECBAgAABAgQIECBAgAABAgQIECBAYBAQ5AdkEwQIECBAgAABAgQIECBAgAABAgQIECBAQJD3AQIECBAgQIAAAQIECBAgQIAAAQIECBAgMAgI8gOyCQIECBAgQIAAAQIECBAgQIAAAQIECBAgIMj7AAECBAgQIECAAAECBAgQIECAAAECBAgQGAQE+QHZBAECBAgQIECAAAECBAgQIECAAAECBAgQEOR9gAABAgQIECBAgAABAgQIECBAgAABAgQIDAKC/IBsggABAgQIECBAgAABAgQIECBAgAABAgQICPI+QIAAAQIECBAgQIAAAQIECBAgQIAAAQIEBgFBfkA2QYAAAQIECBAgQIAAAQIECBAgQIAAAQIEBHkfIECAAAECBAgQIECAAAECBAgQIECAAAECg4AgPyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwPECBAgAABAgQIECBAgAABAgQIECBAgACBQUCQH5BNECBAgAABAgQIECBAgAABAgQIECBAgAABQd4HCBAgQIAAAQIECBAgQIAAAQIECBAgQIDAICDID8gmCBAgQIAAAQIECBAgQIAAAQIECBAgQICAIO8DBAgQIECAAAECBAgQIECAAAECBAgQIEBgEBDkB2QTBAgQIECAAAECBAgQIECAAAECBAgQIEBAkPcBAgQIECBAgAABAgQIECBAgAABAgQIECAwCAjyA7IJAgQIECBAgAABAgQIECBAgAABAgQIECAgyPsAAQIECBAgQIAAAQIECBAgQIAAAQIECBAYBAT5AdkEAQIECBAgQIAAAQIECBAgQIAAAQIECBAQ5H2AAAECBAgQIECAAAECBAgQIECAAAECBAgMAoL8gGyCAAECBAgQIECAAAECBAgQIECAAAECBAgI8j5AgAABAgQIECBAgAABAgQIECBAgAABAgQGAUF+QDZBgAABAgQIECBAgAABAgQIECBAgAABAgQEeR8gQIAAAQIECBAgQIAAAQIECBAgQIAAAQKDgCA/IJsgQIAAAQIECBAgQIAAAQIECBAgQIAAAQKCvA8QIECAAAECBAgQIECAAAECBAgQIECAAIFBQJAfkE0QIECAAAECBAgQIECAAAECBAgQIECAAAFB3gcIECBAgAABAgQIECBAgAABAgQIECBAgMAgIMgPyCYIECBAgAABAgQIECBAgAABAgQIECBAgIAg7wMECBAgQIAAAQIECBAgQIAAAQIECBAgQGAQEOQHZBMECBAgQIAAAQIECBAgQIAAAQIECBAgQECQ9wECBAgQIECAAAECBAgQIECAAAECBAgQIDAICPIDsgkCBAgQIECAAAECBAgQIECAAAECBAgQICDI+wABAgQIECBAgAABAgQIECBAgAABAgQIEBgEBPkB2QQBAgQIECBAgAABAgQIECBAgAABAgQIEBDkfYAAAQIECBAgQIAAAQIECBAgQIAAAQIECAwCgvyAbIIAAQIECBAgQIAAAQIECBAgQIAAAQIECAjyPkCAAAECBAgQIECAAAECBAgQIECAAAECBAYBQX5ANkGAAAECBAgQIECAAAECBAgQIECAAAECBAR5HyBAgAABAgQIECBAgAABAgQIECBAgAABAoOAID8gmyBAgAABAgQIECBAgAABAgQIECBAgAABAoK8DxAgQIAAAQIECBAgQIAAAQIECBAgQIAAgUFAkB+QTRAgQIAAAQIECBAgQIAAAQIECBAgQIAAAUHeBwgQIECAAAECBAgQIECAAAECBAgQIECAwCAgyA/IJggQIECAAAECBAgQIECAAAECBAgQIECAgCDvAwQIECBAgAABAgQIECBAgAABAgQIECBAYBAQ5AdkEwQIECBAgAABAgQIECBAgAABAgQIECBAQJD3AQIECBAgQIAAAQIECBAgQIAAAQIECBAgMAgI8gOyCQIECBAgQIAAAQIECBAgQIAAAQIECBAgIMj7AAECBAgQIECAAAECBAgQIECAAAECBAgQGAQE+QHZBAECBAgQIECAAAECBAgQIECAAAECBAgQEOR9gAABAgQIECBAgAABAgQIECBAgAABAgQIDAKC/IBsggABAgQIECBAgAABAgQIECBAgAABAgQICPI+QIAAAQIECBAgQIAAAQIECBAgQIAAAQIEBgFBfkA2QYAAAQIECBAgQIAAAQIECBAgQIAAAQIEBHkfIECAAAECBAgQIECAAAECBAgQIECAAAECg4AgPyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwPECBAgAABAgQIECBAgAABAgQIECBAgACBQUCQH5BNECBAgAABAgQIECBAgAABAgQIECBAgAABQd4HCBAgQIAAAQIECBAgQIAAAQIECBAgQIDAICDID8gmCBAgQIAAAQIECBAgQIAAAQIECBAgQICAIO8DBAgQIECAAAECBAgQIECAAAECBAgQIEBgEBDkB2QTBAgQIECAAAECBAgQIECAAAECBAgQIEBAkPcBAgQIECBAgAABAgQIECBAgAABAgQIECAwCAjyA7IJAgQIECBAgAABAgQIECBAgAABAgQIECAgyPsAAQIECBAgQIAAAQIECBAgQIAAAQIECBAYBAT5AdkEAQIECBAgQIAAAQIECBAgQIAAAQIECBAQ5H2AAAECBAgQIECAAAECBAgQIECAAAECBAgMAoL8gGyCAAECBAgQIECAAAECBAgQIECAAAECBAgI8j5AgAABAgQIECBAgAABAgQIECBAgAABAgQGAUF+QDZBgAABAgQIECBAgAABAgQIECBAgAABAgQEeR8gQIAAAQIECBAgQIAAAQIECBAgQIAAAQKDgCA/IJsgQIAAAQIECBAgQIAAAQIECBAgQIAAAQKCvA8QIECAAAECBAgQIECAAAECBAgQIECAAIFBQJAfkE0QIECAAAECBAgQIECAAAECBAgQIECAAAFB3gcIECBAgAABAgQIECBAgAABAgQIECBAgMAgIMgPyCYIECBAgAABAgQIECBAgAABAgQIECBAgIAg7wMECBAgQIAAAQIECBAgQIAAAQIECBAgQGAQEOQHZBMECBAgQIAAAQIECBAgQIAAAQIECBAgQECQ9wECBAgQIECAAAECBAgQIECAAAECBAgQIDAICPIDsgkCBAgQIECAAAECBAgQIECAAAECBAgQICDI+wABAgQIECBAgAABAgQIECBAgAABAgQIEBgEBPkB2QQBAgQIECBAgAABAgQIECBAgAABAgQIEBDkfYAAAQIECBAgQIAAAQIECBAgQIAAAQIECAwCgvyAbIIAAQIECBAgQIAAAQIECBAgQIAAAQIECAjyPkCAAAECBAgQIECAAAECBAgQIECAAAECBAYBQX5ANkGAAAECBAgQIECAAAECBAgQIECAAAECBAR5HyBAgAABAgQIECBAgAABAgQIECBAgAABAoOAID8gmyBAgAABAgQIECBAgAABAgQIECBAgAABAoK8DxAgQIAAAQIECBAgQIAAAQIECBAgQIAAgUFAkB+QTRAgQIAAAQIECBAgQIAAAQIECBAgQIAAAUHeBwgQIECAAAECBAgQIECAAAECBAgQIECAwCAQQrgDzJoZi3wAAAAASUVORK5CYII="}},"lively.serializer-class-info":{"className":"Globe","module":{"package":{"name":"Globe","version":"0.1.1-26"},"pathInPackage":"index.js"}}},"6458CBA9-D300-484A-B642-B46F360772DA":{"rev":0,"props":{"_rev":{"value":0},"doNotSerialize":{"value":["isActive","converter","updater"]},"sourceObj":{"value":{"__ref__":true,"id":"undefined_749C10F2_6486_4E22_92A9_AA64DE2D0327","rev":785}},"sourceAttrName":{"value":"extent"},"targetObj":{"value":{"__ref__":true,"id":"undefined_749C10F2_6486_4E22_92A9_AA64DE2D0327","rev":785}},"targetMethodName":{"value":"onExtentChanged"},"garbageCollect":{"value":true},"signalOnAssignment":{"value":true}},"lively.serializer-class-info":{"className":"AttributeConnection","module":{"package":{"name":"lively.bindings","version":"0.1.2"},"pathInPackage":"index.js"}}},"undefined_9F8F94E1_6889_4997_8F8A_7BCA6F4D993C":{"rev":769,"props":{"attributeConnections":{"value":[{"__ref__":true,"id":"86875369-6B29-4B82-B8D7-0FA5DE92ECEF","rev":0}]},"name":{"value":"webgl canvas"},"reactsToPointer":{"value":false},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(1508.8984375,971.6171875)"},"styleClasses":{"value":["WebGLCanvas","Canvas","Morph","morph"]},"borderColor":{"key":"borderColor","verbatim":true,"value":{"top":[0.9058823529411765,0.2980392156862745,0.23529411764705882,1],"right":[0.9058823529411765,0.2980392156862745,0.23529411764705882,1],"bottom":[0.9058823529411765,0.2980392156862745,0.23529411764705882,1],"left":[0.9058823529411765,0.2980392156862745,0.23529411764705882,1]}},"metadata":{"value":{"__ref__":true,"id":"B18A6303-7CCA-4641-955B-F222306072E9","rev":0}},"contextType":{"value":"webgl"},"canvasExtent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(1508,971)"},"_serializedContents":{"value":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAABeQAAAPLCAYAAAA+EomxAAAgAElEQVR4XuzYMQ0AAAgEMfBvGhXcVAx80jDdjiNAgAABAgQIECBAgAABAgQIECBAgAABAgTeBfZ9wQABAgQIECBAgAABAgQIECBAgAABAgQIECAwgrwnIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBG+p6dkAACAASURBVAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwf8D/nSQAAIABJREFUIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIHDt2DEJAAAAwzD/ruuiVxQMwq4SIECAAAECBAgQIECAwCAgyA/IJggQIECAAAECBAgQIECAAAECBAgQIECAgCDvAwQIECBAgAABAgQIECBAgAABAgQIECBAYBAQ5AdkEwQIECBAgAABAgQIECBAgAABAgQIECBAQJD3AQIECBAgQIAAAQIECBAgQIAAAQIECBAgMAgI8gOyCQIECBAgQIAAAQIECBAgQIAAAQIECBAgIMj7AAECBAgQIECAAAECBAgQIECAAAECBAgQGAQE+QHZBAECBAgQIECAAAECBAgQIECAAAECBAgQEOR9gAABAgQIECBAgAABAgQIECBAgAABAgQIDAKC/IBsggABAgQIECBAgAABAgQIECBAgAABAgQICPI+QIAAAQIECBAgQIAAAQIECBAgQIAAAQIEBgFBfkA2QYAAAQIECBAgQIAAAQIECBAgQIAAAQIEBHkfIECAAAECBAgQIECAAAECBAgQIECAAAECg4AgPyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwPECBAgAABAgQIECBAgAABAgQIECBAgACBQUCQH5BNECBAgAABAgQIECBAgAABAgQIECBAgAABQd4HCBAgQIAAAQIECBAgQIAAAQIECBAgQIDAICDID8gmCBAgQIAAAQIECBAgQIAAAQIECBAgQICAIO8DBAgQIECAAAECBAgQIECAAAECBAgQIEBgEBDkB2QTBAgQIECAAAECBAgQIECAAAECBAgQIEBAkPcBAgQIECBAgAABAgQIECBAgAABAgQIECAwCAjyA7IJAgQIECBAgAABAgQIECBAgAABAgQIECAgyPsAAQIECBAgQIAAAQIECBAgQIAAAQIECBAYBAT5AdkEAQIECBAgQIAAAQIECBAgQIAAAQIECBAQ5H2AAAECBAgQIECAAAECBAgQIECAAAECBAgMAoL8gGyCAAECBAgQIECAAAECBAgQIECAAAECBAgI8j5AgAABAgQIECBAgAABAgQIECBAgAABAgQGAUF+QDZBgAABAgQIECBAgAABAgQIECBAgAABAgQEeR8gQIAAAQIECBAgQIAAAQIECBAgQIAAAQKDgCA/IJsgQIAAAQIECBAgQIAAAQIECBAgQIAAAQKCvA8QIECAAAECBAgQIECAAAECBAgQIECAAIFBQJAfkE0QIECAAAECBAgQIECAAAECBAgQIECAAAFB3gcIECBAgAABAgQIECBAgAABAgQIECBAgMAgIMgPyCYIECBAgAABAgQIECBAgAABAgQIECBAgIAg7wMECBAgQIAAAQIECBAgQIAAAQIECBAgQGAQEOQHZBMECBAgQIAAAQIECBAgQIAAAQIECBAgQECQ9wECBAgQIECAAAECBAgQIECAAAECBAgQIDAICPIDsgkCBAgQIECAAAECBAgQIECAAAECBAgQICDI+wABAgQIECBAgAABAgQIECBAgAABAgQIEBgEBPkB2QQBAgQIECBAgAABAgQIECBAgAABAgQIEBDkfYAAAQIECBAgQIAAAQIECBAgQIAAAQIECAwCgvyAbIIAAQIECBAgQIAAAQIECBAgQIAAAQIECAjyPkCAAAECBAgQIECAAAECBAgQIECAAAECBAYBQX5ANkGAAAECBAgQIECAAAECBAgQIECAAAECBAR5HyBAgAABAgQIECBAgAABAgQIECBAgAABAoOAID8gmyBAgAABAgQIECBAgAABAgQIECBAgAABAoK8DxAgQIAAAQIECBAgQIAAAQIECBAgQIAAgUFAkB+QTRAgQIAAAQIECBAgQIAAAQIECBAgQIAAAUHeBwgQIECAAAECBAgQIECAAAECBAgQIECAwCAgyA/IJggQIECAAAECBAgQIECAAAECBAgQIECAgCDvAwQIECBAgAABAgQIECBAgAABAgQIECBAYBAQ5AdkEwQIECBAgAABAgQIECBAgAABAgQIECBAQJD3AQIECBAgQIAAAQIECBAgQIAAAQIECBAgMAgI8gOyCQIECBAgQIAAAQIECBAgQIAAAQIECBAgIMj7AAECBAgQIECAAAECBAgQIECAAAECBAgQGAQE+QHZBAECBAgQIECAAAECBAgQIECAAAECBAgQEOR9gAABAgQIECBAgAABAgQIECBAgAABAgQIDAKC/IBsggABAgQIECBAgAABAgQIECBAgAABAgQICPI+QIAAAQIECBAgQIAAAQIECBAgQIAAAQIEBgFBfkA2QYAAAQIECBAgQIAAAQIECBAgQIAAAQIEBHkfIECAAAECBAgQIECAAAECBAgQIECAAAECg4AgPyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwPECBAgAABAgQIECBAgAABAgQIECBAgACBQUCQH5BNECBAgAABAgQIECBAgAABAgQIECBAgAABQd4HCBAgQIAAAQIECBAgQIAAAQIECBAgQIDAICDID8gmCBAgQIAAAQIECBAgQIAAAQIECBAgQICAIO8DBAgQIECAAAECBAgQIECAAAECBAgQIEBgEBDkB2QTBAgQIECAAAECBAgQIECAAAECBAgQIEBAkPcBAgQIECBAgAABAgQIECBAgAABAgQIECAwCAjyA7IJAgQIECBAgAABAgQIECBAgAABAgQIECAgyPsAAQIECBAgQIAAAQIECBAgQIAAAQIECBAYBAT5AdkEAQIECBAgQIAAAQIECBAgQIAAAQIECBAQ5H2AAAECBAgQIECAAAECBAgQIECAAAECBAgMAoL8gGyCAAECBAgQIECAAAECBAgQIECAAAECBAgI8j5AgAABAgQIECBAgAABAgQIECBAgAABAgQGAUF+QDZBgAABAgQIECBAgAABAgQIECBAgAABAgQEeR8gQIAAAQIECBAgQIAAAQIECBAgQIAAAQKDgCA/IJsgQIAAAQIECBAgQIAAAQIECBAgQIAAAQKCvA8QIECAAAECBAgQIECAAAECBAgQIECAAIFBQJAfkE0QIECAAAECBAgQIECAAAECBAgQIECAAAFB3gcIECBAgAABAgQIECBAgAABAgQIECBAgMAgIMgPyCYIECBAgAABAgQIECBAgAABAgQIECBAgIAg7wMECBAgQIAAAQIECBAgQIAAAQIECBAgQGAQEOQHZBMECBAgQIAAAQIECBAgQIAAAQIECBAgQECQ9wECBAgQIECAAAECBAgQIECAAAECBAgQIDAICPIDsgkCBAgQIECAAAECBAgQIECAAAECBAgQICDI+wABAgQIECBAgAABAgQIECBAgAABAgQIEBgEBPkB2QQBAgQIECBAgAABAgQIECBAgAABAgQIEBDkfYAAAQIECBAgQIAAAQIECBAgQIAAAQIECAwCgvyAbIIAAQIECBAgQIAAAQIECBAgQIAAAQIECAjyPkCAAAECBAgQIECAAAECBAgQIECAAAECBAYBQX5ANkGAAAECBAgQIECAAAECBAgQIECAAAECBAR5HyBAgAABAgQIECBAgAABAgQIECBAgAABAoOAID8gmyBAgAABAgQIECBAgAABAgQIECBAgAABAoK8DxAgQIAAAQIECBAgQIAAAQIECBAgQIAAgUFAkB+QTRAgQIAAAQIECBAgQIAAAQIECBAgQIAAAUHeBwgQIECAAAECBAgQIECAAAECBAgQIECAwCAgyA/IJggQIECAAAECBAgQIECAAAECBAgQIECAgCDvAwQIECBAgAABAgQIECBAgAABAgQIECBAYBAQ5AdkEwQIECBAgAABAgQIECBAgAABAgQIECBAQJD3AQIECBAgQIAAAQIECBAgQIAAAQIECBAgMAgI8gOyCQIECBAgQIAAAQIECBAgQIAAAQIECBAgIMj7AAECBAgQIECAAAECBAgQIECAAAECBAgQGAQE+QHZBAECBAgQIECAAAECBAgQIECAAAECBAgQEOR9gAABAgQIECBAgAABAgQIECBAgAABAgQIDAKC/IBsggABAgQIECBAgAABAgQIECBAgAABAgQICPI+QIAAAQIECBAgQIAAAQIECBAgQIAAAQIEBgFBfkA2QYAAAQIECBAgQIAAAQIECBAgQIAAAQIEBHkfIECAAAECBAgQIECAAAECBAgQIECAAAECg4AgPyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwPECBAgAABAgQIECBAgAABAgQIECBAgACBQUCQH5BNECBAgAABAgQIECBAgAABAgQIECBAgAABQd4HCBAgQIAAAQIECBAgQIAAAQIECBAgQIDAICDID8gmCBAgQIAAAQIECBAgQIAAAQIECBAgQICAIO8DBAgQIECAAAECBAgQIECAAAECBAgQIEBgEBDkB2QTBAgQIECAAAECBAgQIECAAAECBAgQIEBAkPcBAgQIECBAgAABAgQIECBAgAABAgQIECAwCAjyA7IJAgQIECBAgAABAgQIECBAgAABAgQIECAgyPsAAQIECBAgQIAAAQIECBAgQIAAAQIECBAYBAT5AdkEAQIECBAgQIAAAQIECBAgQIAAAQIECBAQ5H2AAAECBAgQIECAAAECBAgQIECAAAECBAgMAoL8gGyCAAECBAgQIECAAAECBAgQIECAAAECBAgI8j5AgAABAgQIECBAgAABAgQIECBAgAABAgQGAUF+QDZBgAABAgQIECBAgAABAgQIECBAgAABAgQEeR8gQIAAAQIECBAgQIAAAQIECBAgQIAAAQKDgCA/IJsgQIAAAQIECBAgQIAAAQIECBAgQIAAAQKCvA8QIECAAAECBAgQIECAAAECBAgQIECAAIFBQJAfkE0QIECAAAECBAgQIECAAAECBAgQIECAAAFB3gcIECBAgAABAgQIECBAgAABAgQIECBAgMAgIMgPyCYIECBAgAABAgQIECBAgAABAgQIECBAgIAg7wMECBAgQIAAAQIECBAgQIAAAQIECBAgQGAQEOQHZBMECBAgQIAAAQIECBAgQIAAAQIECBAgQECQ9wECBAgQIECAAAECBAgQIECAAAECBAgQIDAICPIDsgkCBAgQIECAAAECBAgQIECAAAECBAgQICDI+wABAgQIECBAgAABAgQIECBAgAABAgQIEBgEBPkB2QQBAgQIECBAgAABAgQIECBAgAABAgQIEBDkfYAAAQIECBAgQIAAAQIECBAgQIAAAQIECAwCgvyAbIIAAQIECBAgQIAAAQIECBAgQIAAAQIECAjyPkCAAAECBAgQIECAAAECBAgQIECAAAECBAYBQX5ANkGAAAECBAgQIECAAAECBAgQIECAAAECBAR5HyBAgAABAgQIECBAgAABAgQIECBAgAABAoOAID8gmyBAgAABAgQIECBAgAABAgQIECBAgAABAoK8DxAgQIAAAQIECBAgQIAAAQIECBAgQIAAgUFAkB+QTRAgQIAAAQIECBAgQIAAAQIECBAgQIAAAUHeBwgQIECAAAECBAgQIECAAAECBAgQIECAwCAgyA/IJggQIECAAAECBAgQIECAAAECBAgQIECAgCDvAwQIECBAgAABAgQIECBAgAABAgQIECBAYBAQ5AdkEwQIECBAgAABAgQIECBAgAABAgQIECBAQJD3AQIECBAgQIAAAQIECBAgQIAAAQIECBAgMAgI8gOyCQIECBAgQIAAAQIECBAgQIAAAQIECBAgIMj7AAECBAgQIECAAAECBAgQIECAAAECBAgQGAQE+QHZBAECBAgQIECAAAECBAgQIECAAAECBAgQEOR9gAABAgQIECBAgAABAgQIECBAgAABAgQIDAKC/IBsggABAgQIECBAgAABAgQIECBAgAABAgQICPI+QIAAAQIECBAgQIAAAQIECBAgQIAAAQIEBgFBfkA2QYAAAQIECBAgQIAAAQIECBAgQIAAAQIEBHkfIECAAAECBAgQIECAAAECBAgQIECAAAECg4AgPyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwPECBAgAABAgQIECBAgAABAgQIECBAgACBQUCQH5BNECBAgAABAgQIECBAgAABAgQIECBAgAABQd4HCBAgQIAAAQIECBAgQIAAAQIECBAgQIDAICDID8gmCBAgQIAAAQIECBAgQIAAAQIECBAgQICAIO8DBAgQIECAAAECBAgQIECAAAECBAgQIEBgEBDkB2QTBAgQIECAAAECBAgQIECAAAECBAgQIEBAkPcBAgQIECBAgAABAgQIECBAgAABAgQIECAwCAjyA7IJAgQIECBAgAABAgQIECBAgAABAgQIECAgyPsAAQIECBAgQIAAAQIECBAgQIAAAQIECBAYBAT5AdkEAQIECBAgQIAAAQIECBAgQIAAAQIECBAQ5H2AAAECBAgQIECAAAECBAgQIECAAAECBAgMAoL8gGyCAAECBAgQIECAAAECBAgQIECAAAECBAgI8j5AgAABAgQIECBAgAABAgQIECBAgAABAgQGAUF+QDZBgAABAgQIECBAgAABAgQIECBAgAABAgQEeR8gQIAAAQIECBAgQIAAAQIECBAgQIAAAQKDgCA/IJsgQIAAAQIECBAgQIAAAQIECBAgQIAAAQKCvA8QIECAAAECBAgQIECAAAECBAgQIECAAIFBQJAfkE0QIECAAAECBAgQIECAAAECBAgQIECAAAFB3gcIECBAgAABAgQIECBAgAABAgQIECBAgMAgIMgPyCYIECBAgAABAgQIECBAgAABAgQIECBAgIAg7wMECBAgQIAAAQIECBAgQIAAAQIECBAgQGAQEOQHZBMECBBYNmpRAAAMNUlEQVQgQIAAAQIECBAgQIAAAQIECBAgQECQ9wECBAgQIECAAAECBAgQIECAAAECBAgQIDAICPIDsgkCBAgQIECAAAECBAgQIECAAAECBAgQICDI+wABAgQIECBAgAABAgQIECBAgAABAgQIEBgEBPkB2QQBAgQIECBAgAABAgQIECBAgAABAgQIEBDkfYAAAQIECBAgQIAAAQIECBAgQIAAAQIECAwCgvyAbIIAAQIECBAgQIAAAQIECBAgQIAAAQIECAjyPkCAAAECBAgQIECAAAECBAgQIECAAAECBAYBQX5ANkGAAAECBAgQIECAAAECBAgQIECAAAECBAR5HyBAgAABAgQIECBAgAABAgQIECBAgAABAoOAID8gmyBAgAABAgQIECBAgAABAgQIECBAgAABAoK8DxAgQIAAAQIECBAgQIAAAQIECBAgQIAAgUFAkB+QTRAgQIAAAQIECBAgQIAAAQIECBAgQIAAAUHeBwgQIECAAAECBAgQIECAAAECBAgQIECAwCAgyA/IJggQIECAAAECBAgQIECAAAECBAgQIECAgCDvAwQIECBAgAABAgQIECBAgAABAgQIECBAYBAQ5AdkEwQIECBAgAABAgQIECBAgAABAgQIECBAQJD3AQIECBAgQIAAAQIECBAgQIAAAQIECBAgMAgI8gOyCQIECBAgQIAAAQIECBAgQIAAAQIECBAgIMj7AAECBAgQIECAAAECBAgQIECAAAECBAgQGAQE+QHZBAECBAgQIECAAAECBAgQIECAAAECBAgQEOR9gAABAgQIECBAgAABAgQIECBAgAABAgQIDAKC/IBsggABAgQIECBAgAABAgQIECBAgAABAgQICPI+QIAAAQIECBAgQIAAAQIECBAgQIAAAQIEBgFBfkA2QYAAAQIECBAgQIAAAQIECBAgQIAAAQIEBHkfIECAAAECBAgQIECAAAECBAgQIECAAAECg4AgPyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwPECBAgAABAgQIECBAgAABAgQIECBAgACBQUCQH5BNECBAgAABAgQIECBAgAABAgQIECBAgAABQd4HCBAgQIAAAQIECBAgQIAAAQIECBAgQIDAICDID8gmCBAgQIAAAQIECBAgQIAAAQIECBAgQICAIO8DBAgQIECAAAECBAgQIECAAAECBAgQIEBgEBDkB2QTBAgQIECAAAECBAgQIECAAAECBAgQIEBAkPcBAgQIECBAgAABAgQIECBAgAABAgQIECAwCAjyA7IJAgQIECBAgAABAgQIECBAgAABAgQIECAgyPsAAQIECBAgQIAAAQIECBAgQIAAAQIECBAYBAT5AdkEAQIECBAgQIAAAQIECBAgQIAAAQIECBAQ5H2AAAECBAgQIECAAAECBAgQIECAAAECBAgMAoL8gGyCAAECBAgQIECAAAECBAgQIECAAAECBAgI8j5AgAABAgQIECBAgAABAgQIECBAgAABAgQGAUF+QDZBgAABAgQIECBAgAABAgQIECBAgAABAgQEeR8gQIAAAQIECBAgQIAAAQIECBAgQIAAAQKDgCA/IJsgQIAAAQIECBAgQIAAAQIECBAgQIAAAQKCvA8QIECAAAECBAgQIECAAAECBAgQIECAAIFBQJAfkE0QIECAAAECBAgQIECAAAECBAgQIECAAAFB3gcIECBAgAABAgQIECBAgAABAgQIECBAgMAgIMgPyCYIECBAgAABAgQIECBAgAABAgQIECBAgIAg7wMECBAgQIAAAQIECBAgQIAAAQIECBAgQGAQEOQHZBMECBAgQIAAAQIECBAgQIAAAQIECBAgQECQ9wECBAgQIECAAAECBAgQIECAAAECBAgQIDAICPIDsgkCBAgQIECAAAECBAgQIECAAAECBAgQICDI+wABAgQIECBAgAABAgQIECBAgAABAgQIEBgEBPkB2QQBAgQIECBAgAABAgQIECBAgAABAgQIEBDkfYAAAQIECBAgQIAAAQIECBAgQIAAAQIECAwCgvyAbIIAAQIECBAgQIAAAQIECBAgQIAAAQIECAjyPkCAAAECBAgQIECAAAECBAgQIECAAAECBAYBQX5ANkGAAAECBAgQIECAAAECBAgQIECAAAECBAR5HyBAgAABAgQIECBAgAABAgQIECBAgAABAoOAID8gmyBAgAABAgQIECBAgAABAgQIECBAgAABAoK8DxAgQIAAAQIECBAgQIAAAQIECBAgQIAAgUFAkB+QTRAgQIAAAQIECBAgQIAAAQIECBAgQIAAAUHeBwgQIECAAAECBAgQIECAAAECBAgQIECAwCAgyA/IJggQIECAAAECBAgQIECAAAECBAgQIECAgCDvAwQIECBAgAABAgQIECBAgAABAgQIECBAYBAQ5AdkEwQIECBAgAABAgQIECBAgAABAgQIECBAQJD3AQIECBAgQIAAAQIECBAgQIAAAQIECBAgMAgI8gOyCQIECBAgQIAAAQIECBAgQIAAAQIECBAgIMj7AAECBAgQIECAAAECBAgQIECAAAECBAgQGAQE+QHZBAECBAgQIECAAAECBAgQIECAAAECBAgQEOR9gAABAgQIECBAgAABAgQIECBAgAABAgQIDAKC/IBsggABAgQIECBAgAABAgQIECBAgAABAgQICPI+QIAAAQIECBAgQIAAAQIECBAgQIAAAQIEBgFBfkA2QYAAAQIECBAgQIAAAQIECBAgQIAAAQIEBHkfIECAAAECBAgQIECAAAECBAgQIECAAAECg4AgPyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwPECBAgAABAgQIECBAgAABAgQIECBAgACBQUCQH5BNECBAgAABAgQIECBAgAABAgQIECBAgAABQd4HCBAgQIAAAQIECBAgQIAAAQIECBAgQIDAICDID8gmCBAgQIAAAQIECBAgQIAAAQIECBAgQICAIO8DBAgQIECAAAECBAgQIECAAAECBAgQIEBgEBDkB2QTBAgQIECAAAECBAgQIECAAAECBAgQIEBAkPcBAgQIECBAgAABAgQIECBAgAABAgQIECAwCAjyA7IJAgQIECBAgAABAgQIECBAgAABAgQIECAgyPsAAQIECBAgQIAAAQIECBAgQIAAAQIECBAYBAT5AdkEAQIECBAgQIAAAQIECBAgQIAAAQIECBAQ5H2AAAECBAgQIECAAAECBAgQIECAAAECBAgMAoL8gGyCAAECBAgQIECAAAECBAgQIECAAAECBAgI8j5AgAABAgQIECBAgAABAgQIECBAgAABAgQGAUF+QDZBgAABAgQIECBAgAABAgQIECBAgAABAgQEeR8gQIAAAQIECBAgQIAAAQIECBAgQIAAAQKDgCA/IJsgQIAAAQIECBAgQIAAAQIECBAgQIAAAQKCvA8QIECAAAECBAgQIECAAAECBAgQIECAAIFBQJAfkE0QIECAAAECBAgQIECAAAECBAgQIECAAAFB3gcIECBAgAABAgQIECBAgAABAgQIECBAgMAgIMgPyCYIECBAgAABAgQIECBAgAABAgQIECBAgIAg7wMECBAgQIAAAQIECBAgQIAAAQIECBAgQGAQEOQHZBMECBAgQIAAAQIECBAgQIAAAQIECBAgQECQ9wECBAgQIECAAAECBAgQIECAAAECBAgQIDAICPIDsgkCBAgQIECAAAECBAgQIECAAAECBAgQICDI+wABAgQIECBAgAABAgQIECBAgAABAgQIEBgEBPkB2QQBAgQIECBAgAABAgQIECBAgAABAgQIEBDkfYAAAQIECBAgQIAAAQIECBAgQIAAAQIECAwCgvyAbIIAAQIECBAgQIAAAQIECBAgQIAAAQIECAjyPkCAAAECBAgQIECAAAECBAgQIECAAAECBAYBQX5ANkGAAAECBAgQIECAAAECBAgQIECAAAECBAR5HyBAgAABAgQIECBAgAABAgQIECBAgAABAoOAID8gmyBAgAABAgQIECBAgAABAgQIECBAgAABAoK8DxAgQIAAAQIECBAgQIAAAQIECBAgQIAAgUFAkB+QTRAgQIAAAQIECBAgQIAAAQIECBAgQIAAAUHeBwgQIECAAAECBAgQIECAAAECBAgQIECAwCAQQrgDzJoZi3wAAAAASUVORK5CYII="},"fps":{"value":15}},"lively.serializer-class-info":{"className":"WebGLCanvas","module":{"package":{"name":"WebGLCanvas","version":"0.1.1-56"},"pathInPackage":"index.js"}}},"86875369-6B29-4B82-B8D7-0FA5DE92ECEF":{"rev":0,"props":{"_rev":{"value":0},"doNotSerialize":{"value":["isActive","converter","updater"]},"sourceObj":{"value":{"__ref__":true,"id":"undefined_9F8F94E1_6889_4997_8F8A_7BCA6F4D993C","rev":769}},"sourceAttrName":{"value":"extent"},"targetObj":{"value":{"__ref__":true,"id":"undefined_9F8F94E1_6889_4997_8F8A_7BCA6F4D993C","rev":769}},"targetMethodName":{"value":"relayout"},"garbageCollect":{"value":true},"signalOnAssignment":{"value":true}},"lively.serializer-class-info":{"className":"AttributeConnection","module":{"package":{"name":"lively.bindings","version":"0.1.2"},"pathInPackage":"index.js"}}},"B18A6303-7CCA-4641-955B-F222306072E9":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"globe\\", _id: \\"5543f15ce9adfccb56c979db92d7b0d38398d6a8\\"})"}}},"undefined_9C37C781_4B70_49BE_8AF8_80FC3E2CD779":{"rev":783,"props":{"name":{"value":"cover"},"draggable":{"value":true},"grabbable":{"value":true},"reactsToPointer":{"value":false},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(1508.8984375,971.6171875)"},"fill":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(0,0,0)"},"styleClasses":{"value":["Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"EC03BD7A-8EFE-4AA6-B22E-BBD8B8A4E8EA","rev":0}}},"lively.serializer-class-info":{"className":"Morph","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"morph.js"}}},"EC03BD7A-8EFE-4AA6-B22E-BBD8B8A4E8EA":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"rectangle\\", _id: \\"44c59c7e6812baaed95b7a3660abcb246296e490\\"})"}}},"B9E445B9-B38B-4B5F-A9E0-34C483178A38":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"globe\\", _id: \\"f71e0d7aa02c9c874eba979fe444380bf583f9f2\\"})"}}},"8ABCEA23-D17D-4960-9F4B-32D1D3D49BE9":{"rev":0,"props":{"_rev":{"value":0},"Nunito":{"value":"https://fonts.googleapis.com/css?family=Nunito:200,200i,300,300i,400,400i,600,600i,700,700i,800,800i,900,900i&display=swap"}}},"E3B1C2A1-AC58-4995-A744-7042ED752AF3":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"world landing page\\", _id: \\"32298ca0ee3f234f9baca22b5b5759595d486064\\"})"},"publishedAlias":{"value":"dashboard"},"excludedPackages":{"value":["kld-intersections"]},"publishedLocation":{"value":"/lively.freezer/dashboard/"}}},"undefined_1B4C4213_F388_4483_AC7E_41BFB23F09C5":{"rev":728,"props":{"name":{"value":"loading screen"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(0,25)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(485.34375,274.29296875)"},"styleClasses":{"value":["HTMLMorph","Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"0910EDAD-5486-4704-9DCD-80CD71384F60","rev":0}},"html":{"value":"<div style=\\"position: fixed; z-index: 1; height: 100%; width: 100%; background-color: black\\">\\n  <div id=\\"loading-bar\\">\\n     <div id=\\"progress\\" style=\\"width: 100%;\\">\\n  </div>\\n</div></div>"},"cssDeclaration":{"value":"#loading-bar {\\n  height: 20px;\\n  width: 400px;\\n  color: gray;\\n  border-style: solid;\\n  border-color: gray;\\n  border-width: 2px;\\n  border-radius: 10px;\\n  position: absolute;\\n  top: 50%;\\n  left: 50%;\\n  overflow: hidden;\\n  margin: 0px 0 0 -202px;\\n}\\n\\n#progress {\\n  background-color: gray;\\n  height: 100%;\\n  animation: load 5s;\\n}\\n\\n@keyframes load {\\n  from { width: 0% }\\n  to { width: 100% }\\n}"}},"lively.serializer-class-info":{"className":"HTMLMorph","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"html-morph.js"}}},"0910EDAD-5486-4704-9DCD-80CD71384F60":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"html-morph\\", _id: \\"3695da8ba64dd32d8645b4c1937b5d361e002bbc\\"})"}}}},"requiredVersion":">=0.1","packagesToRegister":[],"packageDepMap":{"local://lively-object-modules/Globe":[],"local://lively-object-modules/WebGLCanvas":[],"local://lively-object-modules/PartialFreezing":[]}}');
lively.resources={resource:la,loadViaScript:O};lively.morphic={loadMorphFromSnapshot:Uu};Da("bV",void 0)}}});