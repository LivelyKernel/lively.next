System.register(["./__root_module__-7cbd94df.js","kld-intersections"],function(){var Da,Ab,Rb,jc,cc,je,fd,Yd,jd;return{setters:[function(Pc){Da=Pc.ai;Ab=Pc.bP;Rb=Pc.av;jc=Pc.a3;cc=Pc.ap;je=Pc.P;fd=Pc.$;Yd=Pc.at;jd=Pc.as},function(){}],execute:function(){var Pc=lively.FreezerRuntime.recorderFor("ModuleProgress/index.js");Pc.Morph=Da;Pc.stringToEasing=Ab;Pc.easings=Rb;Pc.pt=jc;Pc.num=cc;Pc.Path=je;Pc.promise=fd;Pc.fun=Yd;var vd=function(Ld){var ge=lively.FreezerRuntime.recorderFor("ModuleProgress/index.js"),
Td=ge.hasOwnProperty("ModuleProgress")&&"function"===typeof ge.ModuleProgress?ge.ModuleProgress:ge.ModuleProgress=function(md){md&&md[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return jd(Td,Ld,[{key:"relayout",value:function(){!this.isComponent&&Pc.Path("owner.isWorld").get(this)&&(this.bottomCenter=$world.visibleBounds().center().subXY(0,100))}},{key:"reset",value:function(){var md=this.getAllNamed(/stage/);this.stages=new Map(md.map(function(Za){return[Za,
"not loaded"]}));this.updateProgressVisualization();this.getAllNamed(/label/).map(function(Za){Za._cachedTextBounds=null;Za.fit()})}},{key:"updateProgressBar",value:function(){if(this._lastWidth){this.relayout();var md=this.get("progress path"),Za=Pc.stringToEasing(Pc.easings.inOutExpo)(Pc.num.clamp(Date.now()-this._timeStamp,0,1E3)/1E3);md.width=Pc.num.interpolate(Za,this._lastWidth,this._currentProgress)}}},{key:"fastLoadTest",value:function(){var md=this,Za,Db,ac,ic;return $jscomp.asyncExecutePromiseGeneratorProgram(function(gd){1==
gd.nextAddress&&(md.reset(),Za="lively.lang lively.ast lively.source-transform lively.classes lively.vm lively.modules lively.user lively.storage lively.morphic".split(" "),Db=$jscomp.makeIterator(Za),ac=Db.next());if(3!=gd.nextAddress){if(ac.done)return gd.jumpTo(0);ic=ac.value;md.finishPackage({packageName:ic,loaded:!0});return gd.yield(Pc.promise.delay(200),3)}ac=Db.next();return gd.jumpTo(2)})}},{key:"finishPackage",value:function(md){var Za=this,Db=md.frozen,ac=md.loaded;md="stage "+md.packageName.replace("lively.",
"");md=this.get(md);Db&&this.stages.set(md,"frozen");ac&&this.stages.set(md,"loaded");Pc.fun.debounceNamed("update progress",200,function(){Za.updateProgressVisualization()})()}},{key:"updateProgressVisualization",value:function(){var md=this,Za=this.getSubmorphNamed("progress path"),Db=this.getAllNamed(/stage/),ac=Db[0];Db.forEach(function(ic){var gd=ic.get("checkmark"),fe=ic.get("frozen indicator"),Yb=ic.get("icon");ic=md.stages.get(ic);if("not loaded"!=ic){ac=gd;if("loaded"==ic){if(gd.visible)return;
gd.animate({duration:300,visible:!0})}if("frozen"==ic){if(fe.visible)return;fe.animate({duration:300,visible:!0})}Yb.opacity=1}else gd.visible=!1,fe.visible=!1,Yb.opacity=.2});Db=this.localizePointFrom(Pc.pt(-20,0),ac).x;Db=Math.max(20,Db-Za.left);Za.visible=20==Db?!1:!0;this._lastWidth=Za.width;this._timeStamp=Date.now();this._currentProgress=Db}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ModuleProgress"}},{key:"properties",get:function(){return{stages:{serialize:!1,after:["submorphs"],
initialize:function(){var md=this;this.whenRendered().then(function(){md.reset()})}}}}}],ge,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"ModuleProgress",version:"0.1.1-108"}}},{start:192,end:3478})}(Pc.Morph);vd=Pc.ModuleProgress;Pc.default=vd}}});