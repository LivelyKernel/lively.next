System.register(["./__root_module__-7efb35ac.js","kld-intersections"],function(){var Ba,Cb,Sb,jc,lc,Xd,ed,Yd,id;return{setters:[function(Wc){Ba=Wc.ag;Cb=Wc.bN;Sb=Wc.at;jc=Wc.a1;lc=Wc.an;Xd=Wc.P;ed=Wc._;Yd=Wc.ar;id=Wc.aq},function(){}],execute:function(){var Wc=lively.FreezerRuntime.recorderFor("ModuleProgress/index.js");Wc.Morph=Ba;Wc.stringToEasing=Cb;Wc.easings=Sb;Wc.pt=jc;Wc.num=lc;Wc.Path=Xd;Wc.promise=ed;Wc.fun=Yd;var Ad=function(Cd){var fe=lively.FreezerRuntime.recorderFor("ModuleProgress/index.js"),
Sd=fe.hasOwnProperty("ModuleProgress")&&"function"===typeof fe.ModuleProgress?fe.ModuleProgress:fe.ModuleProgress=function(jd){jd&&jd[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return id(Sd,Cd,[{key:"relayout",value:function(){!this.isComponent&&Wc.Path("owner.isWorld").get(this)&&(this.bottomCenter=$world.visibleBounds().center().subXY(0,100))}},{key:"reset",value:function(){var jd=this.getAllNamed(/stage/);this.stages=new Map(jd.map(function(bb){return[bb,
"not loaded"]}));this.updateProgressVisualization();this.getAllNamed(/label/).map(function(bb){bb._cachedTextBounds=null;bb.fit()})}},{key:"updateProgressBar",value:function(){if(this._lastWidth){this.relayout();var jd=this.get("progress path"),bb=Wc.stringToEasing(Wc.easings.inOutExpo)(Wc.num.clamp(Date.now()-this._timeStamp,0,1E3)/1E3);jd.width=Wc.num.interpolate(bb,this._lastWidth,this._currentProgress)}}},{key:"fastLoadTest",value:function(){var jd=this,bb,Fb,vc,pc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(sd){1==
sd.nextAddress&&(jd.reset(),bb="lively.lang lively.ast lively.source-transform lively.classes lively.vm lively.modules lively.user lively.storage lively.morphic".split(" "),Fb=$jscomp.makeIterator(bb),vc=Fb.next());if(3!=sd.nextAddress){if(vc.done)return sd.jumpTo(0);pc=vc.value;jd.finishPackage({packageName:pc,loaded:!0});return sd.yield(Wc.promise.delay(200),3)}vc=Fb.next();return sd.jumpTo(2)})}},{key:"finishPackage",value:function(jd){var bb=this,Fb=jd.frozen,vc=jd.loaded;jd="stage "+jd.packageName.replace("lively.",
"");jd=this.get(jd);Fb&&this.stages.set(jd,"frozen");vc&&this.stages.set(jd,"loaded");Wc.fun.debounceNamed("update progress",200,function(){bb.updateProgressVisualization()})()}},{key:"updateProgressVisualization",value:function(){var jd=this,bb=this.getSubmorphNamed("progress path"),Fb=this.getAllNamed(/stage/),vc=Fb[0];Fb.forEach(function(pc){var sd=pc.get("checkmark"),pd=pc.get("frozen indicator"),tc=pc.get("icon");pc=jd.stages.get(pc);if("not loaded"!=pc){vc=sd;if("loaded"==pc){if(sd.visible)return;
sd.animate({duration:300,visible:!0})}if("frozen"==pc){if(pd.visible)return;pd.animate({duration:300,visible:!0})}tc.opacity=1}else sd.visible=!1,pd.visible=!1,tc.opacity=.2});Fb=this.localizePointFrom(Wc.pt(-20,0),vc).x;Fb=Math.max(20,Fb-bb.left);bb.visible=20==Fb?!1:!0;this._lastWidth=bb.width;this._timeStamp=Date.now();this._currentProgress=Fb}}],[{key:"className",get:function(){return"ModuleProgress"}},{key:"properties",get:function(){return{stages:{serialize:!1,after:["submorphs"],initialize:function(){var jd=
this;this.whenRendered().then(function(){jd.reset()})}}}}}],fe,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"ModuleProgress",version:"0.1.1-108"}}},{start:192,end:3478})}(Wc.Morph);Ad=Wc.ModuleProgress;Wc.default=Ad}}});