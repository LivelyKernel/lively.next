System.register(["./__root_module__-dce2a509.js","kld-intersections"],function(){var Ba,zb,Ib,nc,bc,Sd,Vc,Ud,Yc;return{setters:[function(Oc){Ba=Oc.an;zb=Oc.bP;Ib=Oc.aa;nc=Oc.a3;bc=Oc.at;Sd=Oc.P;Vc=Oc.$;Ud=Oc.ax;Yc=Oc.aw},function(){}],execute:function(){var Oc=lively.FreezerRuntime.recorderFor("ModuleProgress/index.js");Oc.Morph=Ba;Oc.stringToEasing=zb;Oc.easings=Ib;Oc.pt=nc;Oc.num=bc;Oc.Path=Sd;Oc.promise=Vc;Oc.fun=Ud;var qd=function(ie){var Ye=lively.FreezerRuntime.recorderFor("ModuleProgress/index.js"),
sf=Ye.hasOwnProperty("ModuleProgress")&&"function"===typeof Ye.ModuleProgress?Ye.ModuleProgress:Ye.ModuleProgress=function(ne){ne&&ne[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Yc(sf,ie,[{key:"fadeIntoBack",value:function(){this.animate({blur:5})}},{key:"relayout",value:function(){!this.isComponent&&Oc.Path("owner.isWorld").get(this)&&(this.bottomCenter=$world.visibleBounds().center().subXY(0,100))}},{key:"reset",value:function(){var ne=
this.getAllNamed(/stage/);this.blur=0;this.stages=new Map(ne.map(function(cc){return[cc,"not loaded"]}));this.updateProgressVisualization();this.getAllNamed(/label/).map(function(cc){cc._cachedTextBounds=null;cc.fit()})}},{key:"updateProgressBar",value:function(){if(this._lastWidth){this.relayout();var ne=this.get("progress path"),cc=Oc.stringToEasing(Oc.easings.inOutExpo)(Oc.num.clamp(Date.now()-this._timeStamp,0,1E3)/1E3);ne.width=Oc.num.interpolate(cc,this._lastWidth,this._currentProgress)}}},
{key:"fastLoadTest",value:function(){var ne=this,cc,Hc,Md,fc;return $jscomp.asyncExecutePromiseGeneratorProgram(function($d){1==$d.nextAddress&&(ne.reset(),cc="lively.lang lively.ast lively.source-transform lively.classes lively.vm lively.modules lively.user lively.storage lively.morphic".split(" "),Hc=$jscomp.makeIterator(cc),Md=Hc.next());if(3!=$d.nextAddress){if(Md.done)return $d.jumpTo(0);fc=Md.value;ne.finishPackage({packageName:fc,loaded:!0});return $d.yield(Oc.promise.delay(200),3)}Md=Hc.next();
return $d.jumpTo(2)})}},{key:"finishPackage",value:function(ne){var cc=this,Hc=ne.frozen,Md=ne.loaded;ne="stage "+ne.packageName.replace("lively.","");ne=this.get(ne);Hc&&this.stages.set(ne,"frozen");Md&&this.stages.set(ne,"loaded");Oc.fun.debounceNamed("update progress",200,function(){cc.updateProgressVisualization()})()}},{key:"updateProgressVisualization",value:function(){var ne=this,cc=this.getSubmorphNamed("progress path"),Hc=this.getAllNamed(/stage/),Md=Hc[0];Hc.forEach(function(fc){var $d=
fc.get("checkmark"),pe=fc.get("frozen indicator"),Cc=fc.get("icon");fc=ne.stages.get(fc);if("not loaded"!=fc){Md=$d;if("loaded"==fc){if($d.visible)return;$d.animate({duration:300,visible:!0})}if("frozen"==fc){if(pe.visible)return;pe.animate({duration:300,visible:!0})}Cc.opacity=1}else $d.visible=!1,pe.visible=!1,Cc.opacity=.2});Hc=this.localizePointFrom(Oc.pt(-20,0),Md).x;Hc=Math.max(20,Hc-cc.left);cc.visible=20==Hc?!1:!0;this._lastWidth=cc.width;this._timeStamp=Date.now();this._currentProgress=Hc}}],
[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ModuleProgress"}},{key:"properties",get:function(){return{stages:{serialize:!1,after:["submorphs"],initialize:function(){var ne=this;this.whenRendered().then(function(){ne.reset()})}}}}}],Ye,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"ModuleProgress",version:"0.1.1-109"}}},
{start:192,end:3586})}(Oc.Morph);qd=Oc.ModuleProgress;Oc.default=qd}}});System.register("13",["./__root_module__-dce2a509.js","kld-intersections","./index-7c60e27b.js","./index-0a258dcd.js"],function(){return{setters:[function(){},function(){},function(){},function(){}],execute:function(){}}});