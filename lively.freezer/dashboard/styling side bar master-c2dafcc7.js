System.register("./__root_module__-37c88ebd.js kld-intersections ./index-d63033cc.js ./color-picker-ddc5b515.js ./index-d9e4dc7e.js ./index-e7af5c89.js ./index-22cfc8d9.js".split(" "),function(){var Wa,Ib,Sb,xc,ac,Cd,nd,Ud,bd,Ic,pd,yd,Ne,Pe,Ie,fd,me,Yb,Yc,Nd,gd,ae,Fe,Wb,Cc,Td,Ec,Vd,Lb,ub,uc,dc,Zb,Mc;return{setters:[function($a){Wa=$a.f;Ib=$a.c;Sb=$a._;xc=$a.ay;ac=$a.b;Cd=$a.O;nd=$a.h;Ud=$a.ah;bd=$a.ad;Ic=$a.m;pd=$a.M;yd=$a.I;Ne=$a.p;Pe=$a.R;Ie=$a.C;fd=$a.d;me=$a.a1;Yb=$a.o;Yc=$a.bH;Nd=$a.bE;
gd=$a.a7;ae=$a.i;Fe=$a.t;Wb=$a.e;Cc=$a.bB;Td=$a.g;Ec=$a.bO;Vd=$a.r;Lb=$a.P;ub=$a.bP;uc=$a.bQ},function(){},function($a){dc=$a.I},function($a){Zb=$a.a;Mc=$a.S},function(){},function(){},function(){}],execute:function(){var $a=lively.FreezerRuntime.recorderFor("lively.ide/text/ui.js");$a.fun=Wa;$a.string=Ib;$a.obj=Sb;$a.properties=xc;$a.arr=ac;$a.Text=Cd;$a.config=nd;$a.HorizontalLayout=Ud;$a.VerticalLayout=bd;$a.morph=Ic;$a.Morph=pd;$a.Icon=yd;$a.pt=Ne;$a.Rectangle=Pe;$a.Color=Ie;$a.connect=fd;$a.disconnect=
me;$a.once=Yb;$a.noUpdate=Yc;$a.ColorPicker=Zb;$a.DropDownList=Nd;$a.loadObjectFromPartsbinFolder=gd;$a.cachedControls=new WeakMap;var $b=function(Xb){var Jb=lively.FreezerRuntime.recorderFor("lively.ide/text/ui.js"),Ra=Jb.hasOwnProperty("RichTextControl")&&"function"===typeof Jb.RichTextControl?Jb.RichTextControl:Jb.RichTextControl=function(Ga){Ga&&Ga[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ae(Ra,Xb,[{key:"toggleButton",
value:function(Ga,ea){Ga.master=ea?{auto:this.selectedButtonMaster}:{auto:this.buttonMaster}}},{key:"onLoad",value:function(){this.reset()}},{key:"reset",value:function(){var Ga=this.ui.fontSelection;Ga.items=$a.arr.uniq([].concat($jscomp.arrayFromIterable(this.env.fontMetric.supportedFonts),$jscomp.arrayFromIterable($a.config.text.basicFontItems)));this.target&&(Ga.selection=this.target.fontFamily||Ga.items[0].value,$a.connect(this.target,"selectionChange",this,"update",{garbageCollect:!0}))}},{key:"alignAtTarget",
value:function(Ga){Ga=void 0===Ga?!!this.world():Ga;var ea=this.target,Da=ea.world()||$world,ta=this.globalBounds();ea=(ea.selection.isEmpty()?ea.globalBounds():ea.getGlobalTransform().transformRectToRect(ea.selectionBounds().translatedBy(ea.scroll.negated()))).bottomCenter().subPt(ta.topCenter());Da=Da.visibleBounds().translateForInclusion(ta.translatedBy(ea)).topLeft().subPt(ta.topLeft());Da=this.position.addPt(Da);Ga?this.animate({duration:300,position:Da}):this.position=Da}},{key:"removeFocus",
value:function(){var Ga=this;this.target&&this.target.attributeConnections&&this.target.attributeConnections.forEach(function(ea){return ea.targetObj===Ga&&ea.disconnect()});this.autoRemove&&this.target&&(this.remove(),this.target=null)}},{key:"focusOn",value:function(Ga,ea){ea=void 0===ea?!0:ea;var Da=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ta){if(1==ta.nextAddress)return Da.target&&$a.disconnect(Da.target,"selectionChange",Da,"update"),Da.target=Ga,Da.reset(),Da.update(),
ta.yield(Da.whenRendered(),2);Da.ui.fontSizeField.relayout();ea&&Da.alignAtTarget();ta.jumpToEnd()})}},{key:"setupConnections",value:function(){$a.connect(this.ui.paddingField,"number",this,"setPadding");$a.connect(this.ui.paddingFieldTop,"number",this,"setPaddingTop");$a.connect(this.ui.paddingFieldBottom,"number",this,"setPaddingBottom");$a.connect(this.ui.paddingFieldLeft,"number",this,"setPaddingLeft");$a.connect(this.ui.paddingFieldRight,"number",this,"setPaddingRight")}},{key:"update",value:function(){var Ga=
this,ea=this.target,Da=this.updateSpec,ta=ea.selection;ta=!ea.readOnly&&ta?ta.isEmpty()?ea.textAttributeAt(ta.start):ea.getStyleInRange(ta):{};var Pa=this.managedProps,Ha=$a.obj.select(ea,Pa);ea=$jscomp.makeIterator(Object.entries($a.obj.select(ta||{},Pa)));for(ta=ea.next();!ta.done;ta=ea.next())Pa=$jscomp.makeIterator(ta.value),ta=Pa.next().value,Pa=Pa.next().value,"undefined"!==typeof Pa&&(Ha[ta]=Pa);$a.noUpdate(function(){for(var tb=$jscomp.makeIterator(Object.entries(Ga.ui)),Ac=tb.next();!Ac.done;Ac=
tb.next()){var wb=$jscomp.makeIterator(Ac.value);Ac=wb.next().value;wb=wb.next().value;if(Da[Ac])Da[Ac](Ha,wb)}})}},{key:"relayout",value:function(){}},{key:"changeAttributeInSelectionOrMorph",value:function(Ga,ea){var Da=this.target,ta=Da.selection;Da.isLabel||ta&&ta.isEmpty()?Da[Ga]="function"===typeof ea?ea(Da[Ga]):ea:(Da.undoManager.group(),Da.changeStyleProperty(Ga,function(Pa){return"function"===typeof ea?ea(Pa):ea}),Da.undoManager.group())}},{key:"changeFont",value:function(Ga){var ea=this,
Da;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ta){if(1==ta.nextAddress)return ea._last=Ga,(Da="custom..."===Ga)?ta.yield($world.prompt("Enter font family name",{requester:ea.target,historyId:"lively.morphic-rich-text-font-names",useLastInput:!0}),3):ta.jumpTo(2);if(2!=ta.nextAddress&&(Ga=ta.yieldResult,!Ga))return ta.return();ea.changeAttributeInSelectionOrMorph("fontFamily",Ga);ta.jumpToEnd()})}},{key:"setPadding",value:function(Ga){this.target.padding=$a.Rectangle.inset(Ga)}},{key:"setPaddingTop",
value:function(Ga){var ea=this.target.padding;this.target.padding=$a.Rectangle.inset(ea.left(),Ga,ea.right(),ea.bottom())}},{key:"setPaddingLeft",value:function(Ga){var ea=this.target.padding;this.target.padding=$a.Rectangle.inset(Ga,ea.top(),ea.right(),ea.bottom())}},{key:"setPaddingRight",value:function(Ga){var ea=this.target.padding;this.target.padding=$a.Rectangle.inset(ea.left(),ea.top(),Ga,ea.bottom())}},{key:"setPaddingBottom",value:function(Ga){var ea=this.target.padding;this.target.padding=
$a.Rectangle.inset(ea.left(),ea.top(),ea.right(),Ga)}},{key:"setLineWrapping",value:function(Ga){this.target.lineWrapping=Ga}},{key:"changeFontWeight",value:function(Ga){this.changeAttributeInSelectionOrMorph("fontWeight",Ga)}},{key:"changeTextAlign",value:function(Ga){this.changeAttributeInSelectionOrMorph("textAlign",Ga)}},{key:"changeFontColor",value:function(Ga){this.changeAttributeInSelectionOrMorph("fontColor",Ga)}},{key:"changeFontSize",value:function(Ga){this.changeAttributeInSelectionOrMorph("fontSize",
Ga)}},{key:"changeFixedWidth",value:function(Ga){this.target.fixedWidth=Ga}},{key:"changeFixedHeight",value:function(Ga){this.target.fixedHeight=Ga}},{key:"changeLink",value:function(){var Ga=this,ea,Da,ta,Pa,Ha;return $jscomp.asyncExecutePromiseGeneratorProgram(function(tb){if(1==tb.nextAddress)return ea=Ga.target,Da=ea.selection,ta=ea.getStyleInRange(Da),Pa=ta.link,tb.yield(Ga.world().prompt("Set link",{input:Pa||"https://"}),2);Ha=tb.yieldResult;ea.undoManager.group();ea.setStyleInRange({link:Ha||
void 0},Da);ea.undoManager.group();Ga.autoRemove&&Ga.remove();tb.jumpToEnd()})}},{key:"toggleUnderline",value:function(){this.changeAttributeInSelectionOrMorph("textDecoration",function(Ga){return"underline"===Ga?"none":"underline"})}},{key:"toggleItalic",value:function(){this.changeAttributeInSelectionOrMorph("fontStyle",function(Ga){return"italic"===Ga?"normal":"italic"})}},{key:"toggleBold",value:function(){this.changeAttributeInSelectionOrMorph("fontWeight",function(Ga){return"bold"===Ga||"700"===
Ga?"normal":"bold"})}},{key:"copyStyle",value:function(){var Ga=this,ea=this.target,Da=this.ui.applyStyleButton;ea=ea.selection.isEmpty()?ea.defaultTextStyle:ea.getStyleInRange(ea.selection);var ta=JSON.stringify(ea,null,2);this.constructor.copiedStyle=ea;Da.tooltip="paste style\n"+ta;this.env.eventDispatcher.doCopyWithMimeTypes([{type:"text/plain",data:ta},{type:"application/morphic-text-style",styleString:ta}]).then(function(){return Ga.setStatusMessage("Copied style\n"+ta)}).catch(function(Pa){return Ga.showError(Pa)})}},
{key:"pasteStyle",value:function(){var Ga=this,ea=this.target,Da=this.constructor.copiedStyle;ea.selection.isEmpty()?Object.assign(ea,Da):ea.selections.forEach(function(ta){return ea.addTextAttribute(Ga.constructor.copiedStyle,ta)});this.update()}},{key:"clearStyle",value:function(){var Ga=this.target;Ga.selections.forEach(function(ea){return Ga.resetStyleInRange(ea)});this.update()}},{key:"configureRichTextOptions",value:function(){this.getSubmorphNamed("config panel")&&this.getSubmorphNamed("config panel").remove();
var Ga=this.defaultSpec,ea=this.uiSpec;Ga=this.addMorph({name:"config panel",layout:new $a.VerticalLayout({spacing:5}),epiMorph:!0,submorphs:[].concat($jscomp.arrayFromIterable(Object.keys(Ga).map(function(Da){var ta=ea.rows.some(function(Pa){return Pa.some(function(Ha){return Ha===Da})});return{type:"labeledcheckbox",label:Da,name:Da,checked:ta}})),[{layout:new $a.HorizontalLayout({spacing:3}),submorphs:[{type:"button",name:"OK button",label:"OK"},{type:"button",name:"cancel button",label:"Cancel"}]}])});
Ga.center=this.innerBounds().center();$a.connect(Ga.getSubmorphNamed("OK button"),"fire",this,"configureAccepted");$a.connect(Ga.getSubmorphNamed("cancel button"),"fire",this,"configureCanceled")}},{key:"configureAccepted",value:function(){var Ga=this.getSubmorphNamed("config panel");Ga&&(Ga.remove(),Ga.submorphs.filter(function(ea){return"LabeledCheckBox"===ea.constructor.name}))}},{key:"configureCanceled",value:function(){var Ga=this.getSubmorphNamed("config panel");Ga&&Ga.remove()}},{key:"close",
value:function(){var Ga=this;this.target&&this.target.attributeConnections&&this.target.attributeConnections.forEach(function(ea){return ea.targetObj===Ga&&ea.disconnect()});this.remove()}},{key:"alwaysTargetFocusedMorph",value:function(){this.startStepping(1500,"updateTarget")}},{key:"updateTarget",value:function(){var Ga=this.world();Ga&&(Ga=Ga.focusedMorph)&&(Ga.isLabel||Ga.isText)&&!this.isAncestorOf(Ga)&&this.target!==Ga&&this.focusOn(Ga,!1)}},{key:"onMouseUp",value:function(Ga){var ea=this;
return $jscomp.asyncExecutePromiseGeneratorProgram(function(Da){if(1==Da.nextAddress)return Da.yield(ea.whenRendered(),2);ea.update();Da.jumpToEnd()})}},{key:"attachToWorld",value:function(){$a.connect($world,"onMouseDown",this,"updateTarget",{garbageCollect:!0})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"RichTextControl"}},{key:"properties",get:function(){return{autoRemove:{defaultValue:!1},target:{},toggleColor:{},buttonMaster:{defaultValue:"styleguide://System/dark button"},
selectedButtonMaster:{defaultValue:"styleguide://SystemIDE/selected button"},managedProps:{readOnly:!0,get:function(){return"fontFamily fontWeight fontSize fontStyle isText fontColor textAlign link textDecoration fixedWidth fixedHeight lineWrapping padding".split(" ")}},updateSpec:{get:function(){var Ga=this;return Object.assign({fontSelection:function(ea,Da){var ta=ea.fontFamily;(ea=ta&&Da.items.find(function(Pa){return Pa.value.toLowerCase()===ta.toLowerCase()}))?Da.selection=ea.value:ta&&(Da.items=
Da.items.concat({isListItem:!0,label:[ta,{fontFamily:ta}],value:ta}),Da.selection=$a.arr.last(Da.items))},fontWeightSelection:function(ea,Da){Da.selection="normal"==ea.fontWeight?"Medium":ea.fontWeight?$a.string.capitalize(ea.fontWeight):"Medium"},boldButton:function(ea,Da){Ga.toggleButton(Da,"bold"===ea.fontWeight)},italicButton:function(ea,Da){Ga.toggleButton(Da,"italic"===ea.fontStyle)},underlineButton:function(ea,Da){Ga.toggleButton(Da,"underline"===ea.textDecoration)},linkButton:function(ea,
Da){Ga.toggleButton(Da,!!ea.link)},colorPicker:function(ea,Da){Da.colorValue=ea.fontColor},fontSizeField:function(ea,Da){Da.number=ea.fontSize},fixedWidthControl:function(ea,Da){ea.isText?Da.enable():Da.disable();Da.checked=ea.fixedWidth},fixedHeightControl:function(ea,Da){ea.isText?Da.enable():Da.disable();Da.checked=ea.fixedHeight},lineWrappingControl:function(ea,Da){var ta=$jscomp.makeIterator(Da.submorphs);Da=ta.next().value;ta=ta.next().value;Da.checked=!!ea.lineWrapping;ea.isText?Da.enable():
Da.disable();ta.deactivated=!ea.lineWrapping;ta.deactivated?ta.opacity=.5:(ta.opacity=1,ta.selection=ea.lineWrapping)},paddingControl:function(ea,Da){var ta=ea.padding,Pa=ta.left();ea=ta.top();var Ha=ta.right();ta=ta.bottom();var tb=!$a.arr.every([Pa,ea,Ha,ta],function(Ac){return Ac==Pa});Da.get("multi value indicator").visible=tb;$a.connect(Da.get("multi value indicator"),"onMouseDown",Da.get("padding field"),"number",{converter:"() => left",varMapping:{left:Pa}});Da.get("padding field").number=
Pa;Da.get("padding field").visible=!tb;try{Da.get("padding field top").number=ea,Da.get("padding field left").number=Pa,Da.get("padding field right").number=Ha,Da.get("padding field bottom").number=ta}catch(Ac){}}},["left","center","right","block"].reduce(function(ea,Da){ea[Da+"Align"]=function(ta,Pa){Pa.deactivated=!ta.isText;Ga.toggleButton(Pa,ta.textAlign==Da)};return ea},{}))}},ui:{get:function(){var Ga=this,ea={fontSelection:"font selection",fontWeightSelection:"font weight selection",boldButton:"bold button",
italicButton:"italic button",underlineButton:"underline button",linkButton:"link button",leftAlign:"left align",centerAlign:"center align",rightAlign:"right align",blockAlign:"block align",fontSizeField:"font size field",colorPicker:"color picker",copyStyleButton:"copy style",applyStyleButton:"apply style",removeStyleButton:"remove style",fixedHeightControl:"fixed height control",fixedWidthControl:"fixed width control",lineWrappingControl:"line wrapping control",paddingControl:"padding control",paddingField:"padding field",
paddingFieldTop:"padding field top",paddingFieldLeft:"padding field left",paddingFieldRight:"padding field right",paddingFieldBottom:"padding field bottom"};return $a.obj.extract(ea,$a.obj.keys(ea),function(Da,ta){return Ga.getSubmorphNamed(ta)})}}}}},{key:"openDebouncedFor",value:function(Ga){var ea=Ga.selection;if(ea.isEmpty()){var Da=$a.cachedControls.get(Ga);Da&&(Da.update(),Da.alignAtTarget(),Da.world()||Ga.world().addMorph(Da))}else $a.fun.debounceNamed(Ga.id+"openRichTextControl",600,function(){var ta=
$a.cachedControls.get(Ga);ea.isEmpty()?ta&&ta.removeFocus():(ta&&ta.world()||(ta=new $a.RichTextControl,$a.cachedControls.set(Ga,ta)),Ga.world().addMorph(ta),ta.focusOn(Ga,!0),ta.alwaysTargetFocusedMorph())})()}},{key:"openFor",value:function(Ga){var ea=$a.cachedControls.get(Ga);ea?ea.update():(ea=new $a.RichTextControl,$a.cachedControls.set(Ga,ea),ea.focusOn(Ga,!0),ea.alwaysTargetFocusedMorph());ea.alignAtTarget();ea.world()||Ga.world().addMorph(ea);return ea}}],Jb,{pathInPackage:function(){return"text/ui.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:636,end:17713})}($a.Morph);$a.RichTextControl=$b;$a.RichTextControl=$b;$a.RichTextControl=$b;var Eb=lively.FreezerRuntime.recorderFor("StylingSideBar/index.js");Eb.Morph=pd;Eb.touchInputDevice=Fe;Eb.morph=Ic;Eb.Icon=yd;Eb.easings=Wb;Eb.pt=Ne;Eb.Color=Ie;Eb.fun=Wa;Eb.connect=fd;Eb.TreeData=
Cc;$b=function(Xb){var Jb=lively.FreezerRuntime.recorderFor("StylingSideBar/index.js"),Ra=Jb.hasOwnProperty("SettingsTree")&&"function"===typeof Jb.SettingsTree?Jb.SettingsTree:Jb.SettingsTree=function(Ga){Ga&&Ga[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ae(Ra,Xb,[{key:"display",value:function(Ga){return Ga.panel?[Ga.panel,{}]:Ga.name}},{key:"collapse",value:function(Ga,ea){Ga.isCollapsed=ea}},{key:"isCollapsed",value:function(Ga){return Ga.isCollapsed}},
{key:"isLeaf",value:function(Ga){return!Ga.children}},{key:"getChildren",value:function(Ga){var ea=this;return Ga===this.root?Ga.children.filter(function(Da){return ea.target&&Da.applicabilityCheck?eval(Da.applicabilityCheck)(ea.target):!0}):Ga.children}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"SettingsTree"}},{key:"default",value:function(){return new this({isCollapsed:!1,children:[{isCollapsed:!0,name:[" ",{}].concat($jscomp.arrayFromIterable(Eb.Icon.textAttribute("font")),
[" Rich Text",{fontWeight:"bold"}]),children:[{panel:Eb.morph({})}]},{isCollapsed:!1,name:[" ",{}].concat($jscomp.arrayFromIterable(Eb.Icon.textAttribute("image")),[" Shape",{fontWeight:"bold"}]),children:[{panel:Eb.morph({})}]},{isCollapsed:!1,name:[" ",{}].concat($jscomp.arrayFromIterable(Eb.Icon.textAttribute("border-style")),[" Border",{paddingLeft:"2px",fontWeight:"bold"}]),children:[{panel:Eb.morph({})}]},{isCollapsed:!1,name:[" ",{}].concat($jscomp.arrayFromIterable(Eb.Icon.textAttribute("grip-vertical")),
[" Layout",{paddingLeft:"4px",fontWeight:"bold"}]),children:[{panel:Eb.morph({})}]}]})}},{key:"border",value:function(){return new this({isCollapsed:!1,children:[{isCollapsed:!0,name:[" Type    ",{},Eb.morph({height:20}),{}],children:[{panel:Eb.morph({})}]},{isCollapsed:!1,name:[" Color   ",{},Eb.morph({height:20}),{}],children:[{panel:Eb.morph({})}]},{isCollapsed:!1,name:[" Width  ",{},Eb.morph({height:20}),{}],children:[{panel:Eb.morph({})}]},{isCollapsed:!1,name:[" Radius ",{},Eb.morph({height:20}),
{}],children:[{panel:Eb.morph({})}]}]})}}],Jb,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"StylingSideBar",version:"0.1.1-70"}}},{start:284,end:2663})}(Eb.TreeData);Eb.SettingsTree=$b;Eb.SettingsTree=$b;Eb.SettingsTree=$b;$b=function(Xb){var Jb=lively.FreezerRuntime.recorderFor("StylingSideBar/index.js"),Ra=Jb.hasOwnProperty("StylingSideBar")&&
"function"===typeof Jb.StylingSideBar?Jb.StylingSideBar:Jb.StylingSideBar=function(Ga){Ga&&Ga[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ae(Ra,Xb,[{key:"relayout",value:function(){this.onWorldResize()}},{key:"collapseAll",value:function(){this.getSubmorphsByStyleClassName("Tree").forEach(function(Ga){Ga.nodes.forEach(function(ea){return Ga.treeData.root==ea?Ga.uncollapse(ea):Ga.collapse(ea)})})}},{key:"onWorldResize",value:function(Ga){Ga=
void 0===Ga?!0:Ga;if(this.respondsToVisibleWindow){var ea=$world.visibleBounds(),Da=navigator.standalone&&Eb.touchInputDevice?25:0,ta=this.getSubmorphNamed("horizontal resizer");this.height=ea.height-Da;this.top=Da+ea.top();ta.height=this.height;ta.left=0;ta.top=0;Ga&&(this.visible?this.topRight=ea.topRight():this.topLeft=ea.topRight())}}},{key:"toggle",value:function(Ga){var ea=this,Da,ta;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Pa){switch(Pa.nextAddress){case 1:Da=$world.visibleBounds();
ta=navigator.standalone&&Eb.touchInputDevice?25:0;ea.height=Da.height-ta;ea.top=ta+Da.top();if(Ga)return $world.addMorph(ea,$world.get("lively top bar")),ea.topLeft=Da.topRight(),ea.visible=!0,Pa.yield(ea.whenRendered(),5);ea.detachFromWorld($world);return Pa.yield(ea.animate({opacity:0,topLeft:Da.topRight(),duration:300}),4);case 4:ea.visible=!1;ea.remove();Pa.jumpTo(0);break;case 5:return ea.onWorldResize(!1),Pa.yield(ea.animate({opacity:1,easing:Eb.easings.outCirc,topRight:Da.topRight(),duration:300}),
6);case 6:ea.attachToWorld($world),Pa.jumpToEnd()}})}},{key:"cleanupAnchors",value:function(){for(var Ga=this.withAllSubmorphsSelect(function(Pa){return Pa.anchors&&Pa.anchors.filter(function(Ha){return!Ha.id}).length}),ea={},Da=$jscomp.makeIterator(Ga),ta=Da.next();!ta.done;ea={$jscomp$loop$prop$m$2857:ea.$jscomp$loop$prop$m$2857},ta=Da.next())ea.$jscomp$loop$prop$m$2857=ta.value,ea.$jscomp$loop$prop$m$2857.anchors.forEach(function(Pa){return function(Ha){return!Ha.id&&Pa.$jscomp$loop$prop$m$2857.removeAnchor(Ha)}}(ea));
return Ga.length}},{key:"attachToWorld",value:function(Ga){Eb.connect(Ga,"showHaloFor",this,"focusMorph",{garbageCollect:!0})}},{key:"detachFromWorld",value:function(Ga){var ea=this;Ga.attributeConnections.forEach(function(Da){Da.targetObj===ea&&Da.disconnect()})}},{key:"focusMorph",value:function(Ga){if(!Ga.isMorph||!Ga.ownerChain().includes(this)){(Ga.isLabel||Ga.isText||Ga.isButton)&&this.richTextControl.focusOn(Ga,!1);var ea=this.getSubmorphNamed("style settings tree");ea.treeData.target=Ga;ea.update(!0);
Object.values(this.controls).forEach(function(Da){return Da&&Da.focusOn(Ga)})}}},{key:"onHierarchyChange",value:function(){Object.values(this.controls).forEach(function(Ga){return Ga&&Ga.update()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"StylingSideBar"}},{key:"properties",get:function(){return{controls:{},richTextControl:{},isHaloItem:{get:function(){return!0}}}}}],Jb,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"StylingSideBar",version:"0.1.1-70"}}},{start:2682,end:5727})}(Eb.Morph);$b=Eb.StylingSideBar;Eb.default=$b;var kc=lively.FreezerRuntime.recorderFor("ShapeFormatStyler/index.js");kc.Morph=pd;kc.obj=Sb;kc.string=Ib;kc.connect=fd;kc.noUpdate=Yc;kc.once=Yb;$b=function(Xb){var Jb=lively.FreezerRuntime.recorderFor("ShapeFormatStyler/index.js"),Ra=Jb.hasOwnProperty("ShapeFormatStyler")&&"function"===typeof Jb.ShapeFormatStyler?
Jb.ShapeFormatStyler:Jb.ShapeFormatStyler=function(Ga){Ga&&Ga[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ae(Ra,Xb,[{key:Symbol.for("lively-instance-initialize"),value:function(Ga){ae._get(Object.getPrototypeOf(Ra.prototype),Symbol.for("lively-instance-initialize"),this).call(this,Ga);0<this.submorphs.length&&this.setupConnections()}},{key:"setupConnections",value:function(){for(var Ga=this.ui,ea={},Da=$jscomp.makeIterator(Object.entries(this.uiSpec)),
ta=Da.next();!ta.done;ea={$jscomp$loop$prop$control$2859:ea.$jscomp$loop$prop$control$2859,$jscomp$loop$prop$prop$2860:ea.$jscomp$loop$prop$prop$2860},ta=Da.next()){var Pa=$jscomp.makeIterator(ta.value);ta=Pa.next().value;Pa=$jscomp.makeIterator(Pa.next().value);Pa.next();var Ha=Pa.next().value;ea.$jscomp$loop$prop$prop$2860=Pa.next().value;ea.$jscomp$loop$prop$control$2859=Ga[ta];kc.connect(ea.$jscomp$loop$prop$control$2859,Ha,this,"updateTarget",{updater:function(tb){return function(Ac,wb){tb.$jscomp$loop$prop$control$2859._updating=
!0;Ac(tb.$jscomp$loop$prop$prop$2860,wb);tb.$jscomp$loop$prop$control$2859._updating=!1}}(ea),varMapping:{prop:ea.$jscomp$loop$prop$prop$2860,control:ea.$jscomp$loop$prop$control$2859}})}}},{key:"update",value:function(){var Ga=this,ea=this.target,Da=ea.top,ta=ea.left,Pa=ea.isImage,Ha=ea.isLabel,tb=ea.imageUrl,Ac=ea.textString,wb=ea.clipMode,ud=ea.fill,Tb=ea.dropShadow,te=ea.opacity,cd=ea.height,Lc=ea.width;ea=this.ui;var Hb=ea.clipModeSelector,Be=ea.fillPicker,Ob=ea.opacityField,Gb=ea.shadowPicker,
Ta=ea.heightField,Y=ea.widthField,Ma=ea.posXField,gb=ea.posYField,Nb=ea.imageUrlInput,oc=ea.labelContentInput;kc.noUpdate(function(){Ga.updateControl(Gb,"shadowValue",Tb);Ga.updateControl(Hb,"selection",wb);Ga.updateControl(Be,"colorValue",ud);Ga.updateControl(Ob,"number",te);Ga.updateControl(Ta,"number",cd);Ga.updateControl(Y,"number",Lc);Ga.updateControl(Ma,"number",ta);Ga.updateControl(gb,"number",Da);Be.context=Ga.target;Pa&&Ga.updateControl(Nb,"input",tb);Nb.owner.isLayoutable=Nb.owner.visible=
!!Pa;Ha&&Ga.updateControl(oc,"input",Ac);oc.owner.isLayoutable=oc.owner.visible=!!Ha;var Wc=Ga.getSubmorphNamed("special controls");(Wc.visible=!!Ha||!!Pa)?Ga.height=Wc.bottom:Ga.height=Wc.top})}},{key:"updateTarget",value:function(Ga,ea){this.target[Ga]=ea;this.update()}},{key:"updateControl",value:function(Ga,ea,Da){Ga._updating||kc.obj.equals(Ga[ea],Da)||(Ga[ea]=Da)}},{key:"updateMultiValue",value:function(Ga,ea,Da){var ta=this.ui,Pa=ta[this.join(Ga)],Ha=Pa.get("multi value indicator"),tb=kc.obj.values(ea).some(function(Ac){return!kc.obj.isFunction(Ac)&&
!kc.obj.equals(Ac,ea.valueOf())});Ha.left=0;Pa.visible=Pa.isLayoutable=!tb;if(tb&&Ha.visible!=tb)kc.once(Ha,"onMouseDown",Pa,Da,{converter:function(){return ea.valueOf()},varMapping:{value:ea}});Ha.visible=Ha.isLayoutable=tb;Ha.left=tb?200:0;this.updateControl(Pa,Da,ea.valueOf());Pa=$jscomp.makeIterator(["top","left","bottom","right"]);for(Ha=Pa.next();!Ha.done;Ha=Pa.next())Ha=Ha.value,tb=ta[this.join(Ga,Ha)],this.updateControl(tb,Da,ea[Ha])}},{key:"lower",value:function(Ga){return Ga.charAt(0).toLowerCase()+
Ga.slice(1)}},{key:"join",value:function(Ga,ea){return this.lower(kc.string.camelCaseString(Ga+(ea?" "+ea:"")))}},{key:"unwrap",value:function(Ga,ea,Da){var ta={};ta=(ta[this.lower(kc.string.camelCaseString(Ga))]=[Ga,ea,Da],ta);for(var Pa=$jscomp.makeIterator(["top","left","bottom","right"]),Ha=Pa.next();!Ha.done;Ha=Pa.next()){Ha=Ha.value;var tb=Ga+" "+Ha;ta[this.lower(kc.string.camelCaseString(tb))]=[tb,ea,this.join(Da,Ha)]}return ta}},{key:"focusOn",value:function(Ga){var ea=this,Da;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ta){if(1==
ta.nextAddress)return!Ga||ea.isAncestorOf(Ga)||ea.target===Ga||kc.obj.isArray(Ga)||(ea.target=Ga),Da=ea.visible,ea.visible=!0,ta.yield(ea.whenRendered(),2);if(3!=ta.nextAddress)return ea.update(),ta.yield(ea.whenRendered(),3);ea.getSubmorphsByStyleClassName("NumberWidget").map(function(Pa){return Pa.relayout()});ea.visible=Da;ta.jumpToEnd()})}},{key:"removeFocus",value:function(){this.target=null}},{key:"onHoverIn",value:function(Ga){this.watchForTarget=!1}},{key:"onHoverOut",value:function(Ga){this.watchForTarget=
!0}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ShapeFormatStyler"}},{key:"properties",get:function(){return{uiSpec:{get:function(){return this._uiSpec||(this._uiSpec={clipModeSelector:["clip mode selector","selection","clipMode"],fillPicker:["fill picker","colorValue","fill"],shadowPicker:["shadow picker","shadowValue","dropShadow"],opacityField:["opacity field","number","opacity"],heightField:["height field","number","height"],widthField:["width field","number","width"],posXField:["pos x field",
"number","left"],posYField:["pos y field","number","top"],imageUrlInput:["image url input","inputAccepted","imageUrl"],labelContentInput:["label content input","inputAccepted","textString"]})}},ui:{readOnly:!0,get:function(){var Ga=this,ea=this.uiSpec;return this._ui||(this._ui=kc.obj.extract(ea,kc.obj.keys(ea),function(Da,ta){Da=$jscomp.makeIterator(ta).next().value;return Ga.getSubmorphNamed(Da)}))}}}}}],Jb,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"ShapeFormatStyler",version:"0.1.1-158"}}},{start:176,end:5822})}(kc.Morph);$b=kc.ShapeFormatStyler;kc.default=$b;var tc=lively.FreezerRuntime.recorderFor("ShadowWidget/index.js");tc.Morph=pd;tc.ShadowPopover=Mc;tc.connect=fd;tc.signal=Td;$b=function(Xb){var Jb=lively.FreezerRuntime.recorderFor("ShadowWidget/index.js"),Ra=Jb.hasOwnProperty("ShadowWidget")&&"function"===typeof Jb.ShadowWidget?Jb.ShadowWidget:
Jb.ShadowWidget=function(Ga){Ga&&Ga[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ae(Ra,Xb,[{key:"onHoverIn",value:function(){this.getSubmorphNamed("drop down indicator").animate({opacity:1,duration:200})}},{key:"onHoverOut",value:function(){this.getSubmorphNamed("drop down indicator").animate({opacity:0,duration:200})}},{key:"onMouseDown",value:function(Ga){this.openPopover()}},{key:"update",value:function(Ga){var ea=this.submorphs[0];
ea&&(ea.dropShadow=Ga)}},{key:"openPopover",value:function(){var Ga=this,ea;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Da){if(1==Da.nextAddress)return ea=new tc.ShadowPopover({hasFixedPosition:!!Ga.ownerChain().find(function(ta){return ta.hasFixedPosition}),shadowValue:Ga.shadowValue}),Da.yield(ea.fadeIntoWorld(Ga.globalBounds().center()),2);tc.connect(ea,"shadowValue",Ga,"shadowValue");tc.connect(Ga,"shadowValue",Ga,"update");tc.signal(Ga,"openWidget",ea);Da.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),
get:function(){return"ShadowWidget"}},{key:"properties",get:function(){return{shadowValue:{set:function(Ga){this.setProperty("shadowValue",Ga);this.update(Ga)}}}}}],Jb,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"ShadowWidget",version:"0.1.1-7"}}},{start:194,end:1231})}(tc.Morph);$b=tc.ShadowWidget;tc.default=$b;var Sc=lively.FreezerRuntime.recorderFor("BorderFormatStyler/index.js");
Sc.Morph=pd;Sc.obj=Sb;Sc.string=Ib;Sc.connect=fd;Sc.noUpdate=Yc;Sc.once=Yb;$b=function(Xb){var Jb=lively.FreezerRuntime.recorderFor("BorderFormatStyler/index.js"),Ra=Jb.hasOwnProperty("BorderFormatStyler")&&"function"===typeof Jb.BorderFormatStyler?Jb.BorderFormatStyler:Jb.BorderFormatStyler=function(Ga){Ga&&Ga[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ae(Ra,Xb,[{key:"setupUI",value:function(){var Ga=this;this.getSubmorphsByStyleClassName("NumberWidget").map(function(ea){var Da=
Sc.string.camelCaseString(ea.name);Da=Da[0].toLowerCase()+Da.slice(1);Ga.ui[Da]=ea})}},{key:"cleanupAnchors",value:function(){var Ga=this.withAllSubmorphsSelect(function(ta){return ta.anchors&&ta.anchors.filter(function(Pa){return!Pa.id})}),ea={};Ga=$jscomp.makeIterator(Ga);for(var Da=Ga.next();!Da.done;ea={$jscomp$loop$prop$m$2862:ea.$jscomp$loop$prop$m$2862},Da=Ga.next())ea.$jscomp$loop$prop$m$2862=Da.value,ea.$jscomp$loop$prop$m$2862.anchors.forEach(function(ta){return function(Pa){return!Pa.id&&
ta.$jscomp$loop$prop$m$2862.removeAnchor(Pa)}}(ea))}},{key:Symbol.for("lively-instance-initialize"),value:function(Ga){ae._get(Object.getPrototypeOf(Ra.prototype),Symbol.for("lively-instance-initialize"),this).call(this,Ga);0<this.submorphs.length&&this.setupConnections()}},{key:"setupConnections",value:function(){for(var Ga=this.ui,ea={},Da=$jscomp.makeIterator(Object.entries(this.uiSpec)),ta=Da.next();!ta.done;ea={$jscomp$loop$prop$control$2864:ea.$jscomp$loop$prop$control$2864,$jscomp$loop$prop$prop$2865:ea.$jscomp$loop$prop$prop$2865},
ta=Da.next()){var Pa=$jscomp.makeIterator(ta.value);ta=Pa.next().value;Pa=$jscomp.makeIterator(Pa.next().value);Pa.next();var Ha=Pa.next().value;ea.$jscomp$loop$prop$prop$2865=Pa.next().value;ea.$jscomp$loop$prop$control$2864=Ga[ta];Sc.connect(ea.$jscomp$loop$prop$control$2864,Ha,this,"updateTarget",{updater:function(tb){return function(Ac,wb){tb.$jscomp$loop$prop$control$2864._updating=!0;Ac(tb.$jscomp$loop$prop$prop$2865,wb);tb.$jscomp$loop$prop$control$2864._updating=!1}}(ea),varMapping:{prop:ea.$jscomp$loop$prop$prop$2865,
control:ea.$jscomp$loop$prop$control$2864}})}}},{key:"update",value:function(){var Ga=this,ea=this.target,Da=ea.borderStyle,ta=ea.borderColor,Pa=ea.borderRadius,Ha=ea.borderWidth;Sc.noUpdate(function(){Ga.updateMultiValue("border style selector",Da,"selection");Ga.updateMultiValue("border color picker",ta,"colorValue");Ga.updateMultiValue("border radius field",Pa,"number");Ga.updateMultiValue("border width field",Ha,"number")})}},{key:"updateTarget",value:function(Ga,ea){this.target[Ga]=ea;this.update()}},
{key:"updateControl",value:function(Ga,ea,Da){Ga._updating||Sc.obj.equals(Ga[ea],Da)||(Ga[ea]=Da)}},{key:"updateMultiValue",value:function(Ga,ea,Da){var ta=this.ui,Pa=ta[this.join(Ga)],Ha=Pa.get("multi value indicator"),tb=Sc.obj.values(ea).some(function(Ac){return!Sc.obj.isFunction(Ac)&&!Sc.obj.equals(Ac,ea.valueOf())});Pa.visible=Pa.isLayoutable=!tb;if(tb&&Ha.visible!=tb)Sc.once(Ha,"onMouseDown",Pa,Da,{converter:function(){return ea.valueOf()},varMapping:{value:ea}});Ha.visible=Ha.isLayoutable=
tb;this.updateControl(Pa,Da,ea.valueOf());Pa=$jscomp.makeIterator(["top","left","bottom","right"]);for(Ha=Pa.next();!Ha.done;Ha=Pa.next())Ha=Ha.value,tb=ta[this.join(Ga,Ha)],this.updateControl(tb,Da,ea[Ha])}},{key:"lower",value:function(Ga){return Ga.charAt(0).toLowerCase()+Ga.slice(1)}},{key:"join",value:function(Ga,ea){return this.lower(Sc.string.camelCaseString(Ga+(ea?" "+ea:"")))}},{key:"unwrap",value:function(Ga,ea,Da){var ta={};ta=(ta[this.lower(Sc.string.camelCaseString(Ga))]=[Ga,ea,Da],ta);
for(var Pa=$jscomp.makeIterator(["top","left","bottom","right"]),Ha=Pa.next();!Ha.done;Ha=Pa.next()){Ha=Ha.value;var tb=Ga+" "+Ha;ta[this.lower(Sc.string.camelCaseString(tb))]=[tb,ea,this.join(Da,Ha)]}return ta}},{key:"attachToWorld",value:function(){Sc.connect($world,"showHaloFor",this,"focusOn",{garbageCollect:!0})}},{key:"focusOn",value:function(Ga){var ea=this,Da;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ta){if(1==ta.nextAddress)return!Ga||ea.isAncestorOf(Ga)||ea.target===Ga||
Sc.obj.isArray(Ga)||(ea.target=Ga),Da=ea.visible,ea.visible=!0,ta.yield(ea.whenRendered(),2);if(3!=ta.nextAddress)return ea.update(),ta.yield(ea.whenRendered(),3);ea.getSubmorphsByStyleClassName("NumberWidget").map(function(Pa){return Pa.relayout()});ea.visible=Da;ta.jumpToEnd()})}},{key:"onHoverIn",value:function(Ga){this.watchForTarget=!1}},{key:"onHoverOut",value:function(Ga){this.watchForTarget=!0}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"BorderFormatStyler"}},{key:"properties",
get:function(){return{uiSpec:{derived:!0,serialize:!1,get:function(){return this._uiSpec||(this._uiSpec=Object.assign({},this.unwrap("border style selector","selection","borderStyle"),{},this.unwrap("border color picker","colorValue","borderColor"),{},this.unwrap("border radius field","number","borderRadius"),{},this.unwrap("border width field","number","borderWidth")))}},ui:{initialize:function(){this.setupUI()}}}}}],Jb,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"BorderFormatStyler",version:"0.1.1-16"}}},{start:185,end:5003})}(Sc.Morph);$b=Sc.BorderFormatStyler;Sc.default=$b;var Pd=lively.FreezerRuntime.recorderFor("ShapeLayoutControl/index.js");Pd.Morph=pd;Pd.morph=Ic;Pd.layouts=Ec;Pd.string=Ib;Pd.connect=fd;Pd.noUpdate=Yc;Pd.InteractiveMorphSelector=dc;Pd.Color=Ie;Pd.pt=Ne;$b=function(Xb){var Jb=lively.FreezerRuntime.recorderFor("ShapeLayoutControl/index.js"),
Ra=Jb.hasOwnProperty("ShapeLayoutControl")&&"function"===typeof Jb.ShapeLayoutControl?Jb.ShapeLayoutControl:Jb.ShapeLayoutControl=function(Ga){Ga&&Ga[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ae(Ra,Xb,[{key:"focusOn",value:function(Ga){this.target=Ga;this.update(!1)}},{key:"setupConnections",value:function(){var Ga=this.ui;Pd.connect(Ga.submorphSettingsControl,"fire",this,"chooseSubmorphToChangeLayoutSettings");Pd.connect(Ga.dragmeControl,
"onDragStart",this,"onSubmorphSettingsDragStart");Pd.connect(Ga.xAxisPolicyControl,"selection",this,"updateSubmorphProportionalLayoutSettings",{converter:'policy => ({\n        policy,\n        axis: "x",\n        submorph: self.selectedSubmorph,\n      })',varMapping:{self:this}});Pd.connect(Ga.yAxisPolicyControl,"selection",this,"updateSubmorphProportionalLayoutSettings",{converter:'policy => ({\n        policy,\n        axis: "y",\n        submorph: self.selectedSubmorph,\n      })',varMapping:{self:this}});
for(var ea={},Da=$jscomp.makeIterator(this.managedProps),ta=Da.next();!ta.done;ea={$jscomp$loop$prop$prop$2867:ea.$jscomp$loop$prop$prop$2867},ta=Da.next()){var Pa=$jscomp.makeIterator(ta.value),Ha=Pa.next().value;ta=Pa.next().value;Pa.next().value||(ea.$jscomp$loop$prop$prop$2867=this.join(Ha),Pa=Ga[this.join(Ha,"control")],Pd.connect(Pa,ta,this,"updateLayout",{updater:function(tb){return function(Ac,wb){Ac(tb.$jscomp$loop$prop$prop$2867,wb)}}(ea),varMapping:{prop:ea.$jscomp$loop$prop$prop$2867}}))}}},
{key:"lower",value:function(Ga){return Ga.charAt(0).toLowerCase()+Ga.slice(1)}},{key:"join",value:function(Ga,ea){return this.lower(Pd.string.camelCaseString(Ga+(ea?" "+ea:"")))}},{key:"updateLayoutOfTarget",value:function(Ga){Ga=Pd.layouts[Pd.string.camelCaseString(Ga)];this.target.layout=Ga?new Ga({autoResize:!1}):null;this.update()}},{key:"updateLayout",value:function(Ga,ea){this.target.layout[Ga]=ea}},{key:"update",value:function(Ga){var ea=this;this.target&&Pd.noUpdate(function(){for(var Da=
ea.ui,ta=ea.target.layout||{name:function(){return"No"}},Pa=$jscomp.makeIterator(ea.managedProps),Ha=Pa.next();!Ha.done;Ha=Pa.next()){var tb=$jscomp.makeIterator(Ha.value);Ha=tb.next().value;var Ac=tb.next().value;tb.next();tb=Da[ea.join(Ha,"control")];var wb=Da[ea.join(Ha,"label")];if(Ac)if("type"===Ha)tb.selection=ta.name()+" Layout";else{var ud=ta[ea.join(Ha)],Tb="undefined"!==typeof ud;if(Tb){switch(Ha){case "align":tb.items=ta.possibleAlignValues;break;case "direction":tb.items=ta.possibleDirectionValues;
break;case "axis":tb.items=ta.possibleAxisValues}tb[Ac]=ud}wb.isLayoutable=wb.visible=Tb}}ea.showGridLayoutControl("Grid"===ta.name());ea.showProportionalControl("Proportional"===ta.name())})}},{key:"updateSubmorphProportionalLayoutSettings",value:function(Ga){var ea={};this.target.layout.changeSettingsFor(Ga.submorph,(ea[Ga.axis]=Ga.policy,ea),!0)}},{key:"onSubmorphSettingsDragStart",value:function(Ga){var ea=this;Ga.stop();var Da=this.target.layout,ta=Da.settingsFor(this.selectedSubmorph),Pa=[],
Ha;for(Ha in ta)Pa=[].concat($jscomp.arrayFromIterable(Pa),[Ha+": ",{fontWeight:"bold"},ta[Ha]+" ",{}]);var tb=Pd.morph({type:"label",fontColor:Pd.Color.white,value:Pa,fill:Pd.Color.black.withA(.7),padding:5,borderRadius:10,isLayoutable:!1});tb.wantsToBeDroppedOn=function(Ac){return Da.layoutableSubmorphs.includes(Ac)};tb.onBeingDroppedOn=function(Ac,wb){tb.remove();if(Ac=Da.layoutableSubmorphs.includes(wb)?wb:Ga.world.morphsContainingPoint(Ga.hand.position).find(function(ud){return Da.layoutableSubmorphs.includes(ud)}))ea.updateSubmorphProportionalLayoutSettings({policy:ta.x,
axis:"x",submorph:Ac}),ea.updateSubmorphProportionalLayoutSettings({policy:ta.y,axis:"y",submorph:Ac}),Ac.show(),$world.setStatusMessage("layout settings applied")};Ga.hand.grab(tb);tb.moveBy(Pd.pt(10,10))}},{key:"chooseSubmorphToChangeLayoutSettings",value:function(){var Ga=this,ea,Da,ta,Pa,Ha,tb,Ac,wb,ud;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Tb){switch(Tb.nextAddress){case 1:return ea=Ga.target.layout.layoutableSubmorphs,Ga.manageFocus=!0,Ga.env.eventDispatcher.isKeyPressed("Shift")?
(ta=ea.map(function(te){return{isListItem:!0,string:String(te),value:te}}),Tb.yield($world.listPrompt("Select morph",ta,{onSelection:function(te){return te.show()}}),5)):Tb.yield(Pd.InteractiveMorphSelector.selectMorph(Ga.world(),Ga,function(te){return ea.includes(te)}),4);case 4:Da=Tb.yieldResult;Tb.jumpTo(3);break;case 5:Pa=Tb.yieldResult,Ha=$jscomp.makeIterator(Pa.selected),Da=Ha.next().value;case 3:Ga.manageFocus=!1;Ga.selectedSubmorph=Da;if(!Da)return Tb.return();tb=Ga.ui;Ac=tb.xAxisPolicyControl;
wb=tb.yAxisPolicyControl;ud=Ga.target.layout.settingsFor(Da);Pd.noUpdate(function(){Ac.selection=ud.x;wb.selection=ud.y});Tb.jumpToEnd()}})}},{key:"showProportionalControl",value:function(Ga){var ea=this.ui;[ea.submorphSettingsControl,ea.dragmeControl,ea.xAxisPolicyControl,ea.xAxisPolicyLabel,ea.yAxisPolicyControl,ea.yAxisPolicyLabel].forEach(function(Da){Da.isLayoutable=Ga;Da.visible=Ga})}},{key:"showGridLayoutHalo",value:function(){$world.showLayoutHaloFor(this.target)}},{key:"showGridLayoutControl",
value:function(Ga){var ea=this.ui.configureGridLayoutControl;ea.visible=ea.isLayoutable=Ga}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ShapeLayoutControl"}},{key:"properties",get:function(){return{managedProps:{get:function(){return[["type","selection",!0],["align","selection"],["direction","selection"],["axis","selection"],["spacing","number"],["auto resize","checked"],["resize submorphs","checked"],["x axis policy","selection",!0],["y axis policy","selection",!0],["react to submorph animations",
"checked"],["submorph settings",!1,!0],["order by index","checked"],["dragme",!1,!0],["configure grid layout",!1,!0]]}},ui:{readOnly:!0,get:function(){for(var Ga={labelContainer:this.getSubmorphNamed("label container"),controlContainer:this.getSubmorphNamed("control container")},ea=$jscomp.makeIterator(this.managedProps),Da=ea.next();!Da.done;Da=ea.next()){var ta=$jscomp.makeIterator(Da.value).next().value;Da=ta+" label";ta+=" control";Ga[this.join(Da)]=this.getSubmorphNamed(Da);Ga[this.join(ta)]=
this.getSubmorphNamed(ta)}return Ga}}}}}],Jb,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"ShapeLayoutControl",version:"0.1.1-166"}}},{start:345,end:7771})}(Pd.Morph);$b=Pd.ShapeLayoutControl;Pd.default=$b;var ec=lively.FreezerRuntime.recorderFor("MasterComponentControl/index.js");ec.Morph=pd;ec.resource=Vd;ec.arr=ac;ec.obj=Sb;
ec.string=Ib;ec.Path=Lb;ec.connect=fd;ec.getMastersMenu=ub;ec.resolvedMasters=uc;$b=function(Xb){var Jb=lively.FreezerRuntime.recorderFor("MasterComponentControl/index.js"),Ra=Jb.hasOwnProperty("MasterComponentControl")&&"function"===typeof Jb.MasterComponentControl?Jb.MasterComponentControl:Jb.MasterComponentControl=function(Ga){Ga&&Ga[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ae(Ra,Xb,[{key:"focusOn",value:function(Ga){this.target=
Ga;this.update()}},{key:"onMouseUp",value:function(Ga){var ea=this,Da,ta,Pa,Ha,tb,Ac;return $jscomp.asyncExecutePromiseGeneratorProgram(function(wb){if(1==wb.nextAddress){"auto master selection"==Ga.targetMorph.name&&(Da="auto");"hover master selection"==Ga.targetMorph.name&&(Da="hover");"click master selection"==Ga.targetMorph.name&&(Da="click");ea.refreshButtons();if(!ea.target)return wb.return();ta=$jscomp.makeIterator(["auto","hover","click"]);for(Pa=ta.next();!Pa.done;Pa=ta.next())Ha=Pa.value,
ea.target.master&&ea.target.master[Ha]&&!ea.get(Ha+" master checkbox").checked&&ea.adjustMasterComponent(Ha,null);if(!Da)return wb.jumpTo(0);tb=ea;Ac=tb.openMenu;return wb.yield(ea.getMastersMenu(Da),3)}Ac.call(tb,wb.yieldResult,Ga);wb.jumpToEnd()})}},{key:"getMastersMenu",value:function(Ga){var ea=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Da){return 1==Da.nextAddress?Da.yield(Promise.all([].concat($jscomp.arrayFromIterable(Object.keys(ec.resolvedMasters)),[ea.world().name]).map(function(ta){var Pa,
Ha,tb,Ac;return $jscomp.asyncExecutePromiseGeneratorProgram(function(wb){return 1==wb.nextAddress?(Ha=(Pa=ta==ea.world().name)?"This World":ta,tb=ea,Ac=tb.componentsToMenu,wb.yield(ec.resource("styleguide://"+ta+"/").dirList(),2)):wb.return([Ha,Ac.call(tb,wb.yieldResult,Ga)])})})),2):Da.return(Da.yieldResult)})}},{key:"componentsToMenu",value:function(Ga,ea,Da,ta){var Pa=this;Da=void 0===Da?null:Da;ta=void 0===ta?1:ta;Da||(Da=Ga.map(function(tb){return{name:ec.arr.last(tb.name.split("/")),path:tb.name.split("/"),
value:tb}}));if(0==Da.length||100<ta)return[];var Ha=this;return ec.arr.flatten(Object.entries(ec.arr.groupBy(Da,function(tb){return tb.path[ta-1]})).map(function(tb){var Ac=$jscomp.makeIterator(tb);tb=Ac.next().value;Ac=Ac.next().value;var wb=$jscomp.makeIterator(ec.arr.partition(Ac,function(ud){return ud.path.length<=ta}));Ac=wb.next().value;wb=wb.next().value;tb=[tb,Pa.componentsToMenu(null,ea,wb,ta+1)];return[].concat($jscomp.arrayFromIterable(Ac.map(function(ud){return[ud.name,function(){Ha.adjustMasterComponent(ea,
ud.value)}]})),$jscomp.arrayFromIterable(tb[1].length?[tb]:[]))}),1)}},{key:"getComponentSelectionMenu",value:function(Ga){var ea=this,Da,ta,Pa,Ha,tb,Ac;return $jscomp.asyncExecutePromiseGeneratorProgram(function(wb){if(1==wb.nextAddress)return Da=ea.world().metadata.commit.name,ta=ec.resource("styleguide://"+Da+"/"),wb.yield(ta.dirList(),2);if(3!=wb.nextAddress)return Pa=wb.yieldResult,wb.yield(ec.resource("styleguide://System/").dirList(),3);Ha=wb.yieldResult;tb=ea.componentsToMenu(Pa,Ga);Ac=ea.componentsToMenu(Ha,
Ga);return wb.return([].concat($jscomp.arrayFromIterable(0<tb.length?[].concat($jscomp.arrayFromIterable(tb),[{isDivider:!0}]):[]),$jscomp.arrayFromIterable(Ac)))})}},{key:"adjustMasterComponent",value:function(Ga,ea){if(this.target.master)this.target.master[Ga]=ea;else if(ea){var Da={};this.target.master=(Da[Ga]=ea,Da)}Ga=this.target.master;ea=Ga.hover;Da=Ga.click;Ga.auto||ea||Da||(this.target.master=null);this.update();this.target.withAllSubmorphsDo(function(ta){return delete ta._parametrizedProps});
this.target.requestMasterStyling()}},{key:"componentsToMenu",value:function(Ga,ea,Da,ta){var Pa=this;Da=void 0===Da?null:Da;ta=void 0===ta?1:ta;Da||(Da=Ga.map(function(tb){return{name:ec.arr.last(tb.name.split("/")),path:tb.name.split("/"),value:tb}}));if(0==Da.length||100<ta)return[];var Ha=this;return ec.arr.flatten(Object.entries(ec.arr.groupBy(Da,function(tb){return tb.path[ta-1]})).map(function(tb){var Ac=$jscomp.makeIterator(tb);tb=Ac.next().value;Ac=Ac.next().value;var wb=$jscomp.makeIterator(ec.arr.partition(Ac,
function(ud){return ud.path.length<=ta}));Ac=wb.next().value;wb=wb.next().value;tb=[tb,Pa.componentsToMenu(null,ea,wb,ta+1)];return[].concat($jscomp.arrayFromIterable(Ac.map(function(ud){return[ud.name,function(){Ha.adjustMasterComponent(ea,ud.value)}]})),$jscomp.arrayFromIterable(tb[1].length?[tb]:[]))}),1)}},{key:"update",value:function(){if(this.target){for(var Ga=$jscomp.makeIterator(["auto","hover","click"]),ea=Ga.next();!ea.done;ea=Ga.next()){ea=ea.value;var Da=this.getSubmorphNamed(ea+" master selection"),
ta=this.getSubmorphNamed(ea+" master checkbox");ec.Path(["master",ea]).get(this.target)?ta.checked=!0:ta.checked=!1;Da.label=ec.string.truncateLeft(ec.Path(["master",ea,"name"]).get(this.target)||"select master",15,"...")}this.refreshButtons()}}},{key:"refreshButtons",value:function(){for(var Ga=$jscomp.makeIterator(["auto","hover","click"]),ea=Ga.next();!ea.done;ea=Ga.next()){ea=ea.value;var Da=this.getSubmorphNamed(ea+" master selection"),ta=this.getSubmorphNamed(ea+" master checkbox");Da=Da.deactivated=
!ta.checked;this.getSubmorphNamed(ea+" master selection").opacity=Da?.5:1}Ga=this.getSubmorphNamed("overridden props list");Ga.items=this.getOverriddenProps();this.getSubmorphNamed("clear overridden prop button").deactivated=!Ga.selection}},{key:"getMasterForTarget",value:function(){if(this.target.isMorph)return[this.target].concat($jscomp.arrayFromIterable(this.target.ownerChain())).map(function(Ga){return Ga.master}).find(Boolean)}},{key:"clearSelectedProperty",value:function(){var Ga=this.getSubmorphNamed("overridden props list").selection;
this.getMasterForTarget().clearOverriddenPropertiesFor(this.target,[Ga]);this.refreshButtons()}},{key:"getOverriddenProps",value:function(){var Ga=this.getMasterForTarget();return Ga&&Ga._overriddenProps?(Ga=Ga._overriddenProps.get(this.target))?Object.keys(Ga):[]:[]}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"MasterComponentControl"}}],Jb,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"MasterComponentControl",version:"0.1.1-110"}}},{start:315,end:6250})}(ec.Morph);$b=ec.MasterComponentControl;ec.default=$b}}});