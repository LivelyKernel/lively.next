System.register(["lively.collab","kld-intersections"],function(Ha,tb){var Ab,kc,ac;return{setters:[function(Ld){Ab=Ld.Comment;kc=Ld.CommentBrowser},function(Ld){ac=Ld.default}],execute:function(){function Ld(g,c,k){k=k||0;var d=[];if(g<=c)for(0>=k&&(k=-k||1);g<=c;g+=k)d.push(g);else for(0<=k&&(k=-k||-1);g>=c;g+=k)d.push(g);return d}function Tc(g,c){for(var k=Array(g);0<g;)k[--g]=c;return k}function $d(g,c){for(var k=Array(g);0<g;)k[--g]=c(g);return k}function Uc(g,c,k){for(var d=[],h=0;h<g.length;h++){var n=
g[h];c.call(k,n)&&d.push(n)}return d}function Pc(g,c,k,d){d=void 0===d?!1:d;if(g&&Jb.isArray(g)){for(var h=0,n=g.length-1;h<=n;){var b=h+Math.floor((n-h)/2),e=k?k(g[b]):g[b];if(e===c)return g[b];e>c?n=b-1:h=b+1}if(d){if(!g[h])return g[n];if(!g[n])return g[h];d=k?k(g[h]):g[h];k=k?k(g[n]):g[n];return 0>Math.abs(d-c)-Math.abs(k-c)?g[h]:g[n]}}}function Jd(g,c){var k;g.find(function(d,h){return k=c(d,h)});return k}function pe(g,c){return g.filter(function(k){return!!k[c]})}function Ze(g,c,k){"string"===
typeof c&&(c=new RegExp(c,"i"));return Jb.filter(g,Jb.filter.test.bind(c))}function Ff(g,c){return Jb.filter(g,function(k,d){return!!c[d]})}function te(g,c,k){return Jb.filter(g,function(d,h){return!c.call(k,d,h)})}function Bc(g,c){return Jb.filter(g,function(k){return!k[c]})}function sd(g,c){return Jb.filter(g,function(k){return k!==c})}function le(g,c){return Jb.filter(g,function(k){return-1===c.indexOf(k)})}function jc(g,c){if(!g.length)return g;var k=[g[0]];if(c)for(c=1;c<g.length;c++){var d=
g[c];d!==k[k.length]&&k.push(d)}else for(c=1;c<g.length;c++)d=g[c],-1===k.indexOf(d)&&k.push(d);return k}function je(g,c,k){for(var d=g.slice(),h=d.length;h--;)for(var n=g[h],b=h+1;b<d.length;b++)c.call(k,n,d[b])&&d.splice(b--,1);return d}function Ae(g,c){for(var k={},d=[],h=0;h<g.length;h++){var n=g[h];k[n[c]]||(k[n[c]]=!0,d.push(n))}return d}function Dc(g){return Jb.filter(g,Boolean)}function Mc(g){for(var c=0,k=0,d=g.length;c<d;)g.hasOwnProperty(c)&&(g[k++]=g[c]),c++;for(;k++<d;)g.pop();return g}
function bc(g,c,k){return g.forEach(c,k)}function Gc(){var g=Array.from(arguments),c=g.shift(),k="function"===typeof Jb.last(g)?g.pop():function(h){return h},d=[c].concat(g).map(function(h){return Array.from(h)});return c.map(function(h,n){return k(Jb.pluck(d,n),n)})}function Zc(g,c){if("number"===typeof c){if(0>=c)return g;c--}return g.reduce(function(k,d){return k.concat(Array.isArray(d)?Zc(d,c):[d])},[])}function Rd(g,c,k){for(var d=[],h=0;h<g.length;h++)d.push.apply(d,c.call(k,g[h],h));return d}
function Kd(g,c){return g.reduce(function(k,d){0<k.length&&k.push(c);k.push(d);return k},[])}function rb(g,c){return Jb.interpose(g,c)}function ob(g,c,k){return g.map(c,k)}function Bb(g,c,k,d,h,n,b,e){return g.map(function(l){return l[c](k,d,h,n,b,e)})}function Va(g,c){return g.map(function(k){return k[c]})}function Ta(g,c,k,d){return g.reduce(c,k,d)}function xa(g,c,k,d){return g.reduceRight(c,k,d)}function wa(g,c,k){return g.some(c,k)}function Qa(g,c,k){return g.every(c,k)}function Eb(g,c){var k=
g.length;if(!c||k!==c.length)return!1;for(var d=0;d<k;d++){if(g[d]&&c[d]&&g[d].equals&&c[d].equals)if(g[d].equals(c[d]))continue;else return!1;if(g[d]!=c[d])return!1}return!0}function rc(g,c){var k=g.length;if(!c||k!==c.length)return!1;for(var d=0;d<k;d++)if(!Jb.objectEquals(g[d],c[d]))return!1;return!0}function qb(g,c){if(c)for(c=1;c<g.length;c++){if(g[c-1]<g[c])return!1}else for(c=1;c<g.length;c++)if(g[c-1]>g[c])return!1;return!0}function sb(g,c){return g.sort(c)}function kb(g,c,k){return Jb.pluck(g.map(function(d,
h){return{value:d,criteria:c.call(k,d,h)}}).sort(function(d,h){d=d.criteria;h=h.criteria;return d<h?-1:d>h?1:0}),"value")}function ha(g,c){return Jb.sortBy(g,function(k){return k[c]})}function Pa(g){return g.reverse()}function T(g){return g.slice().reverse()}function ia(g,c,k){k=k||String;return g.map(function(d){return k(d).match(c)})}function Fa(g){return g[0]}function $a(g){return g[g.length-1]}function zb(g,c){return Jb.filter(Jb.uniq(g),function(k){return-1<c.indexOf(k)})}function Cc(g,c){g=
g.slice();for(var k=0;k<c.length;k++){var d=c[k];-1===g.indexOf(d)&&g.push(d)}return g}function Ba(g,c,k){g.splice(k,0,c)}function Ca(g,c){g.splice(c,1)}function Nb(g,c){var k=g.indexOf(c);0<=k&&Jb.removeAt(g,k);return c}function Ec(g,c){g.push.apply(g,c);return g}function fb(g,c,k){g.splice.apply(g,[k,0].concat(c))}function td(g,c){g.includes(c)||g.push(c)}function Xd(g,c,k){g.splice(k,1,c)}function ae(g){g.length=0;return g}function Bf(g,c){for(var k=0;k<g.length;k++)if(!c.includes(g[k]))return!1;
return!0}function ie(g,c,k,d){k=k||Jb.NullFunction;d=d||Jb.GLOBAL;c=c||function(h,n,b){n.call(d,h,b)};return g.reduceRight(function(h,n,b){return function(){c.call(d,h,n,b)}},k)()}function Zf(g,c,k,d,h,n){d=d||function(){};return g.clone().reverse().reduce(function(b,e,l){return function(){c.call(h||Jb.GLOBAL,e,l);n&&0!==l%n?b():b.delay(k)}},d)()}function Hg(){var g=Array.from(arguments),c=g.shift(),k=c.length,d=!1;if(1===g.length){var h=g[0].progressBar;var n=g[0].iterator;var b=g[0].labelFunction;
var e=g[0].whenDone;var l=g[0].context}else h=g[0],n=g[1],b=g[2],e=g[3],l=g[4];l||(l="undefined"!==typeof window?window:global);b||(b=function(a){return a});h||(d=!0,h=(g=("undefined"!==typeof window?window:global).lively&&lively.morphic&&lively.morphic.World.current())?g.addProgressBar():{value:null,label:null,remove:function(){}});h.value=0;c.reduceRight(function(a,f,m){return function(){try{h.value=m/k,b&&(h.label=b.call(l,f,m)),n.call(l,f,m)}catch(r){console.error("Error in forEachShowingProgress at %s (%s)\n%s\n%s",
m,f,r,r.stack)}Jb.delay(a,0)}},function(){h.value=1;d&&function(){h.remove()}.delay(0);e&&e.call(l)})();return c}function Wc(g,c,k){0>c&&(c=g.length+c);0>k&&(k=g.length+k);var d=g[c];g[c]=g[k];g[k]=d;return g}function vc(g,c){c=c||1;return g.slice(c).concat(g.slice(0,c))}function yf(g,c,k){return Jb.Group.fromArray(g,c,k)}function tc(g,c){return Jb.groupBy(g,function(k){return k[c]})}function wb(g,c,k){c=c||function(n){return n};var d=[],h=[];g.forEach(function(n,b){(c.call(k,n,b)?d:h).push(n)});
return[d,h]}function uc(g,c,k){function d(n,b){if(!b.length)return[n,[]];var e=b[0];b=b.slice(1);var l=n.concat([e]);if(c.call(k,l))return d(l,b);n=d(n,b);return[n[0],[e].concat(n[1])]}function h(n,b){if(!b.length)return n;b=d([],b);if(!b[0].length)throw Error("Batchify constrained does not ensure consumption of at least one item per batch!");return h(n.concat([b[0]]),b[1])}return h([],g)}function Q(g,c){c=c||1;return Jb.range(0,Math.ceil(g.length/c)-1).map(function(k){return g.slice(k*c,k*c+c)},
g)}function Da(g,c){for(var k=g.map(function(b,e){return b[c[e]]}),d=c.slice(),h=g.length;h--;0<=h){var n=d[h]+1;if(g[h][n]){d[h]=n;break}else if(0===h){d=void 0;break}else d[h]=0}return[k,d]}function ib(g){for(var c=g.reduce(function(n,b){return n*b.length},1),k=g.map(function(n){return 0}),d=Array(c),h=0;h<c;h++)k=Jb.combinationsPick(g,k),d[h]=k[0],k=k[1];return d}function Kb(g,c){return g.slice(0,c)}function pc(g,c){return g.slice(c)}function Wb(g,c,k){for(var d=0;d<g.length&&c.call(k,g[d],d);d++);
return g.slice(0,d)}function rd(g,c,k){for(var d=0;d<g.length&&c.call(k,g[d],d);d++);return g.slice(d)}function id(g){for(var c=Jb.range(0,g.length-1),k=Array(g.length),d=0;d<g.length;d++){var h=c.splice(Math.round(Math.random()*(c.length-1)),1);k[h]=g[d]}return k}function oe(g,c,k){c=c||function(h){return h};var d;g.reduce(function(h,n,b){b=c.call(k,n,b);if("number"!==typeof b||b<=h)return h;d=n;return b},-Infinity);return d}function Tf(g,c,k){c=c||function(d){return d};return Jb.max(g,function(d,
h){return-c.call(k,d,h)})}function Ce(g){for(var c=0,k=0;k<g.length;k++)c+=g[k];return c}function $e(g,c){return g.reduce(function(k,d){return d===c?k+1:k},0)}function af(g){return g.length}function of(g,c){if("undefined"===typeof c||"number"===typeof c){var k=c||Math.ceil(Math.log(g.length)/Math.log(2)+1),d=Math.ceil(Math.round(g.length/k));return Jb.range(0,k-1).map(function(h){return g.slice(h*d,(h+1)*d)})}if(c instanceof Array)return g.reduce(function(h,n){if(n<c[1])return h[0].push(n),h;for(var b=
1;b<c.length;b++)if(n>=c[b]&&(!c[b+1]||n<=c[b+1]))return h[b].push(n),h;throw Error("Histogram creation: Cannot group data "+n+" into thresholds "+c);},Jb.range(1,c.length).map(function(){return[]}))}function pd(g){return[].concat(g)}function gg(g){return Jb.from(g)}function Sf(g,c,k){return g.forEach(c,k)}function Nf(g,c,k){return g.every(c,k)}function Ag(g,c,k){return g.some(c,k)}function Ig(g,c,k){return g.map(c,k)}function xc(g,c,k){return Jb.filter(g,c,k)}function Wh(g,c,k,d){d&&(k=k.bind(d));
return g.reduce(k,c)}function Di(g,c,k){function d(b,e){if(!n&&(b||e)){n=!0;try{k(b,h)}catch(l){console.error("Error in mapAsyncSeries - callback invocation error:\n"+(l.stack||l))}}}var h=[],n=!1;return g.reduceRight(function(b,e,l){if(!n)return function(a,f){if(a)return d(a);0<l&&h.push(f);try{c(e,l,Jb.once(b))}catch(m){d(m)}}},function(b,e){h.push(e);d(b,!0)})()}function Bh(g,c,k,d){function h(){for(;f<c.parallel&&a<g.length;)m[a++]()}function n(r,v){if(!(-1<e.indexOf(r)||(e.push(r),f--,l)))if(!v&&
e.length<g.length)h();else{l=!0;try{d&&d(v,b)}catch(x){console.error("Error in mapAsync - main callback invocation error:\n"+(x.stack||x))}}}"function"===typeof c&&(d=k,k=c,c=null);c=c||{};if(!g.length)return d&&d(null,[]);c.parallel||(c.parallel=Infinity);var b=[],e=[],l=!1,a=0,f=0,m=g.map(function(r,v){return function(){f++;try{k(r,v,Jb.once(function(x,y){b[v]=x||y;n(v,x)}))}catch(x){n(v,x)}}});return h()}function If(){return function(){}}function Oa(){return function(g){return g}}function db(){return function(){return null}}
function Fb(){return function(){return!1}}function ea(){return function(){return!0}}function Ma(){return function(){throw Error("Not yet implemented");}}function lb(g){var c=[],k;for(k in g)g.__lookupGetter__(k)||"function"!==typeof g[k]||c.push(k);return c}function xb(g){var c=[],k;for(k in g)!g.__lookupGetter__(k)&&g.hasOwnProperty(k)&&"function"===typeof g[k]&&c.push(k);return c}function yc(g){if(g.superclass)return[];var c=g.toString();g="";var k=c.match(/(?:\(([^\)]*)\)|([^\(\)-+!]+))\s*=>/);
k?g=k[1]||k[2]||"":(c=c.match(/^[\s\(]*function[^(]*\(([^)]*)\)/))&&c[1]&&(g=c[1]);return g.replace(/\/\/.*?[\r\n]|\/\*(?:.|[\r\n])*?\*\//g,"").replace(/\s+/g,"").split(",").map(function(d){return d.trim()}).filter(function(d){return!!d})}function Yb(g){var c="";g.declaredClass?c+=g.declaredClass+">>":g.declaredObject&&(c+=g.declaredObject+".");return c+(g.methodName||g.displayName||g.name||"anonymous")}function ad(g){g=String(g).replace(/^function[^\{]+\{\s*/,"").replace(/\}$/,"").trim();for(var c=
g.split(/\n|\r/),k,d=0;d<c.length;d++){var h=c[d].match(/^(\s+)[^\s]/);h&&(void 0===k||h[1].length<k.length)&&(k=h[1])}return k?g.replace(new RegExp("^"+k,"gm"),""):g}function od(g){var c=Date.now();g();return Date.now()-c}function ed(g,c){for(var k=Date.now(),d=0;d<c;d++)g();return(Date.now()-k)/c}function mf(g,c){var k=Array.prototype.slice.call(arguments),d=k.shift();c=1E3*k.shift();return setTimeout(function(){return d.apply(d,k)},c)}function qg(g,c){var k,d,h,n,b,e,l=fd.debounce(c,function(){b=
n=!1});return function(){k=this;d=arguments;h||(h=setTimeout(function(){h=null;b&&g.apply(k,d);l()},c));n?b=!0:e=g.apply(k,d);l();n=!0;return e}}function Yf(g,c,k){var d;return function(){var h=this,n=arguments;k&&!d&&c.apply(h,n);clearTimeout(d);d=setTimeout(function(){d=null;k||c.apply(h,n)},g)}}function Mh(g,c,k){var d=fd._throttledByName;return d[g]?d[g]:d[g]=fd.throttle(function(){fd.debounceNamed(g,c,function(){delete d[g]})();return k.apply(this,arguments)},c)}function Ui(g,c,k,d){var h=fd._debouncedByName;
return h[g]?h[g]:h[g]=fd.debounce(c,function(){delete h[g];return k.apply(this,arguments)},d)}function Fg(g,c){var k=fd._queues,d=k[g]||(k[g]={_workerActive:!1,worker:c,tasks:[],drain:null,push:function(h){d.tasks.push(h);d._workerActive||d.activateWorker()},pushAll:function(h){h.forEach(function(n){d.tasks.push(n)});d._workerActive||d.activateWorker()},pushNoActivate:function(h){d.tasks.push(h)},handleError:function(h){h&&console.error("Error in queue: "+h)},activateWorker:function(){function h(e){d.handleError(e);
d.activateWorker()}var n=d.tasks,b=d._workerActive;if(0===n.length)b&&(d._workerActive=!1,"function"===typeof d.drain&&d.drain()),delete k[g];else{b||(d._workerActive=!0);try{d.worker(n.shift(),h)}catch(e){h(e)}}}});return d}function ph(g,c,k){function d(){a&&clearTimeout(a);e=!0;delete n[g]}function h(f){e||(d(),b.callbacks.forEach(function(m){try{m.apply(null,f)}catch(r){console.error("Error when invoking callbacks in queueUntil ["+g+"]:\n"+String(r.stack||r))}}))}var n=fd._queueUntilCallbacks,
b=n[g];if(b)return b;var e=!1,l=!1;if(k)var a=setTimeout(function(){e||h([Error("timeout")])},k);b=n[g]={callbacks:[],cancel:function(){l=!0;d()},whenDone:function(f){b.callbacks.push(f);return b}};setTimeout(function(){if(!l)try{c(function(){h(arguments)})}catch(f){h([f])}},0);return b}function Bg(){var g=Array.prototype.slice,c=g.call(arguments),k=fd._composeAsyncDefaultEndCallback,d=k,h,n,b=new Promise(function(e,l){h=e;n=l});return c.reverse().reduce(function(e,l,a){var f=!1;return function(){function m(){f=
!0;var x=g.call(arguments),y=x.shift();y?(d(y),n(y)):e.apply(null,x)}var r=g.call(arguments);if(d===k&&a===c.length-1){for(;r.length&&"function"!==typeof r[r.length-1];)r.pop();"function"===typeof r[r.length-1]&&(d=r.pop())}if("function"===typeof l)try{var v=l.apply(this,r.concat([m]));v&&"function"===typeof v.then&&"function"===typeof v.catch&&v.then(function(x){return m(null,x)}).catch(function(x){return m(x)})}catch(x){console.error("composeAsync: ",x.stack||x),f||(d(x),n(x))}else l&&"function"===
typeof l.then&&"function"===typeof l.catch?l.then(function(x){m(null,x)}).catch(function(x){m(x)}):(r=Error("Invalid argument to composeAsync: "+l),d(r),n(r));return b}},function(){var e=g.call(arguments);d.apply(null,[null].concat(e));h(e[0])})}function cl(){return Array.prototype.slice.call(arguments).reverse().reduce(function(g,c){return function(){return g(c.apply(this,arguments))}},function(g){return g})}function Rg(g){return function(){var c=Array.prototype.slice.call(arguments);c=[c[1],c[0]].concat(c.slice(2));
return g.apply(null,c)}}function sk(g){g=g||function(){};return function(){var c=fd.arr.from(arguments);g.apply(null,[null].concat(c))}}function Qf(g,c,k){var d=Date.now(),h=50;k||(k=c,c=g,g=void 0);(function b(){if(c())return k();if(g){var e=Date.now()-d;e=g-e;if(0>=e)return k(Error("timeout"));e<h&&(h=e)}setTimeout(b,h)})()}function Dk(g,c,k){function d(b,e,l,a){if(n.length){var f=null;b=n.indexOf(b);-1<b&&n.splice(b,1);l?(n.length=0,f=Error("in waitForAll at"+("number"===typeof e?" "+e:"")+": \n"+
(l.stack||String(l)))):a&&(h[e]=a);n.length||setTimeout(function(){k(f,h)},0)}}k||(k=c,c=g,g=null);g=g||{};var h=c.map(function(){return null});if(c.length){var n=Array.prototype.slice.call(c);c.forEach(function(b,e){try{b(function(){var l=Array.prototype.slice.call(arguments),a=l.shift();d(b,e,a,l)})}catch(l){d(b,e,l,null)}});g.timeout&&setTimeout(function(){if(n.length){var b=h.map(function(e,l){return null===e&&l}).filter(function(e){return"number"===typeof e}).join(", ");d(null,null,Error("waitForAll timed out, functions at "+
b+" not done"),null)}},g.timeout)}else k(null,h)}function Al(g,c,k,d){function h(){return g.apply(this,n.concat(Array.prototype.slice.call(arguments)))}if(1>=arguments.length)return arguments[0];var n=Array.prototype.slice.call(arguments);g=n.shift();h.isWrapper=!0;h.originalFunction=g;return h}function Dn(g,c){var k=function(){var d=Array.prototype.slice.call(arguments);d=c.isWrapper?d:[g.bind(this)].concat(d);return c.apply(this,d)};k.isWrapper=!0;k.originalFunction=g;return k}function Oo(g){for(;g.originalFunction;)g=
g.originalFunction;return g}function En(g){var c=[];do c.push(g),g=g.originalFunction;while(g);return c}function lm(g,c,k){k.originalFunction=g[c];var d=g.hasOwnProperty(c);g[c]=function(){d?g[c]=k.originalFunction:delete g[c];return k.apply(this,arguments)};return g}function um(g){if(g){if("function"!==typeof g)throw Error("once() expecting a function");var c=!1,k;return function(){if(c)return k;c=!0;return k=g.apply(this,arguments)}}}function rk(){var g=!1;return Array.prototype.slice.call(arguments).map(function(c){return function(){if(!g)return g=
!0,c.apply(this,arguments)}})}function Rh(g,c){var k=Array.prototype.slice.call(arguments),d=fd._eitherNameRegistry;g=k.shift();var h=d[g]||(d[g]={wasCalled:!1,callsLeft:0});h.callsLeft++;return function(){h.callsLeft--;0>=h.callsLeft&&delete d[g];if(!h.wasCalled)return h.wasCalled=!0,c.apply(this,arguments)}}function hf(g){return eval(g)}function vm(g){return fd.evalJS("("+g.toString()+");")}function Lb(g,c){return fd.Closure.fromFunction(g,c).recreateFunc()}function bd(g,c,k,d){var h=k||g.name;
if(!h)throw Error("Function that wants to be a script needs a name: "+this);k=Object.getPrototypeOf(c);var n={this:c};d&&(n=fd.objectMerge([n,d]));k&&k[h]&&(n.$super=fd.Closure.fromFunction(function(){try{return Object.getPrototypeOf(c)[h].apply(c,arguments)}catch(b){return"undefined"!==typeof $world?$world.logError(b,"Error in $super call"):console.error("Error in $super call: "+b+"\n"+b.stack),null}},{obj:c,name:h}).recreateFunc());return fd.addToObject(fd.asScript(g,n),c,h)}function re(g,c,k){g.displayName=
k;var d=c.attributeConnections?c.attributeConnections.filter(function(h){return"update"===h.getSourceAttrName()}):[];d&&d.forEach(function(h){h.disconnect()});c[k]=g;typeof c&&(g.declaredObject=fd.safeToString(c));"undefined"!==typeof lively&&c&&lively.Tracing&&lively.Tracing.stackTracingEnabled&&lively.Tracing.instrumentMethod(c,k,{declaredObject:fd.safeToString(c)});d&&d.forEach(function(h){h.connect()});return g}function he(g,c){return fd.Closure.fromFunction(g,c||{}).recreateFunc()}function bg(g,
c,k){g.hasLivelyClosure&&(g.livelyClosure.funcProperties[c]=k)}function eh(g){return g.hasLivelyClosure?g.livelyClosure.varMapping:g.isWrapper?g.originalFunction.varMapping:g.varMapping?g.varMapping:{}}function Ek(g,c,k){g[c]=k;g.hasLivelyClosure&&(g.livelyClosure.funcProperties[c]=k)}function po(g){for(var c=[],k=g.prototype;k;)c=Object.keys(k).reduce(function(d,h){"function"===typeof k[h]&&-1===d.indexOf(h)&&d.push(h);return d},c),k=Object.getPrototypeOf(k);return c}function bs(g){return Object.keys(g.prototype).filter(function(c){return"function"===
typeof g.prototype[c]})}function ut(g,c){var k=function(d){var h=Array.prototype.slice.call(arguments);h.shift();try{return d.apply(g,h)}catch(n){if("undefined"!==typeof lively&&lively.morphic&&lively.morphic.World&&lively.morphic.World.current())throw lively.morphic.World.current().logError(n),n;c?console.warn("ERROR: %s.%s(%s): err: %s %s",g,c,h,n,n.stack||""):console.warn("ERROR: %s %s",n,n.stack||"");throw n;}};k.methodName="$logErrorsAdvice";k=fd.wrap(g,k);k.originalFunction=g;k.methodName="$logErrorsWrapper";
return k}function Po(g,c){var k=function(d){var h=Array.prototype.slice.call(arguments);h.shift();try{var n=d.apply(g,h)}catch(b){throw console.warn("failed to load "+c+": "+b),"undefined"!==typeof lively&&lively.lang.Execution&&lively.lang.Execution.showStack(),b;}console.log("completed "+c);return n};k.methodName="$logCompletionAdvice::"+c;k=fd.wrap(g,k);k.methodName="$logCompletionWrapper::"+c;k.originalFunction=g;return k}function dq(g,c){var k=function(h){var n=Array.prototype.slice.call(arguments);
n.shift();d=h.apply(g,n);c?console.warn("%s(%s) -> %s",fd.qualifiedMethodName(g),n,d):console.log("%s(%s) -> %s",fd.qualifiedMethodName(g),n,d);return d};k.methodName="$logCallsAdvice::"+fd.qualifiedMethodName(g);var d=fd.wrap(g,k);d.originalFunction=g;d.methodName="$logCallsWrapper::"+fd.qualifiedMethodName(g);return d}function vp(g,c){return fd.wrap(g,function(k){var d=Array.prototype.slice.call(arguments);d.shift();c.push(d);d=k.apply(g,d);c.pop();return d})}function oo(){try{throw Error();}catch(g){return String(g.stack).split(/\n/).slice(2).map(function(c){return c.replace(/^\s*at\s*([^\s]+).*/,
"$1")}).join("\n")}}function cs(g){if(g&&Array.isArray(g))return"["+g.map(cs)+"]";if("string"!==typeof g)return String(g);g=String(g);g=g.replace(/\n/g,"\\n\\\n");g=g.replace(/(")/g,"\\$1");return'"'+g+'"'}function fq(g){return Array.isArray(g)}function Vq(g){return g&&1==g.nodeType}function wp(g){return g instanceof Function}function eq(g){return"boolean"===typeof g}function So(g){return"string"===typeof g}function Wq(g){return"number"===typeof g}function ds(g){return"undefined"===typeof g}function es(g){return g instanceof
RegExp}function Wg(g){return"object"===typeof g}function yd(g){if(!g)return!0;switch(typeof g){case "string":case "number":case "boolean":return!0}return!1}function Yq(g){for(var c in g)if(g.hasOwnProperty(c))return!1;return!0}function To(g,c){if(g===c)return!0;if(!g||!c)return g==c;if(Array.isArray(g))return me.arrayDeepEquals(g,c);switch(g.constructor){case String:case Date:case Boolean:case Number:return g==c}if("function"===typeof g.isEqualNode)return g.isEqualNode(c);if("function"===typeof g.equals)return g.equals(c);
var k=[],d;for(d in g)if(k.push(d),"function"!==typeof g[d]&&!To(g[d],c[d]))return!1;for(d in c)if(-1===k.indexOf(d)&&"function"!==typeof c[d]&&!To(c[d],g[d]))return!1;return!0}function Uo(g){return g?Object.keys(g).map(function(c){return g[c]}):[]}function Xq(g,c){for(var k={},d=0;d<c.length;d++)k[c[d]]=g[c[d]];return k}function Hn(g,c){g=g||{};g=me.getOwnPropertyDescriptors(g);for(var k=0;k<c.length;k++)c[k]in g&&delete g[c[k]];return Object.defineProperties({},g)}function mm(g,c,k,d){c=me.functionFromString(c);
return me.asScriptOf(c,g,k,d)}function Ro(g,c){for(var k=null,d=1;d<arguments.length;d++)if("string"===typeof arguments[d])k=arguments[d],g.categories||(g.categories={}),g.categories[k]||(g.categories[k]=[]),k=g.categories[k];else{c=arguments[d];for(var h in c){var n=c.__lookupGetter__(h),b=c.__lookupSetter__(h);n&&g.__defineGetter__(h,n);b&&g.__defineSetter__(h,b);n||b||(n=c[h],g[h]=n,k&&k.push(h),"function"===typeof n&&(n.displayName||(n.displayName=h),"undefined"!==typeof lively&&lively.Module&&
lively.Module.current&&(n.sourceModule=lively.Module.current())))}}return g}function xp(g){if(me.isPrimitive(g))return g;if(Array.isArray(g))return Array.prototype.slice.call(g);var c={},k;for(k in g)g.hasOwnProperty(k)&&(c[k]=g[k]);return c}function In(g,c,k){for(var d={},h=0;h<c.length;h++)c[h]in g&&(d[c[h]]=k?k(c[h],g[c[h]]):g[c[h]]);return d}function Bj(g,c,k){c=c||{};k=k||0;if(c.customPrinter){var d=c._ignoreSignal||(c._ignoreSignal={}),h=c.customPrinter(g,d,function(r){return Bj(r,c,k+1)});
if(h!==d)return h}if(!g)return me.print(g);if("function"===typeof g)return c.printFunctionSource?String(g):"function"+(g.name?" "+g.name:"")+"("+me.argumentNames(g).join(",")+") {/*...*/}";switch(g.constructor){case String:case Boolean:case RegExp:case Number:return me.print(g)}if("function"===typeof g.serializeExpr)return g.serializeExpr();var n=g&&Array.isArray(g);d=n?"[":"{";h=n?"]":"}";if(c.maxDepth&&k>=c.maxDepth)return d+"/*...*/"+h;var b=[];if(n)b=g.map(function(r){return Bj(r,c,k+1)});else for(var e=
Object.keys(g).sort(function(r,v){var x="function"===typeof g[r];return x===("function"===typeof g[v])?r<v?-1:r>v?1:0:x?1:-1}),l=0;l<e.length;l++){if(l>(c.maxNumberOfKeys||Infinity)){e=e.length-l;b.push("..."+e+" hidden "+(1<e?"entries":"entry")+"...");break}var a=e[l];n&&Bj(g[a],c,k+1);var f=Bj(g[a],c,k+1);b.push((c.escapeKeys?JSON.stringify(a):a)+": "+f)}if(0===b.length)return d+h;e=b.join(", ");l=(!n||c.newLineInArrays)&&(!c.minLengthForNewLine||e.length>=c.minLengthForNewLine);var m=me.indent("",
c.indent||"  ",k);a=me.indent("",c.indent||"  ",k+1);f=l&&!n?"\n"+a:"";n=l&&!n?"\n"+m:"";l&&(e=b.join(","+(l?"\n"+a:"")));return d+f+e+n+h}function Wo(g){return 1<arguments.length?Wo(Array.prototype.slice.call(arguments)):Array.isArray(g[0])?Array.prototype.concat.apply([],g):g.reduce(function(c,k){for(var d in k)k.hasOwnProperty(d)&&(c[d]=k[d]);return c},{})}function Vo(g,c){if(!g)return c;if(!c)return g;if(Array.isArray(g)){if(!Array.isArray(c))return c;var k=g.map(function(d,h){return Vo(d,c[h])});
c.length>g.length&&(k=k.concat(c.slice(g.length)));return k}return"object"!==typeof g||"object"!==typeof c?c:Object.keys(g).concat(Object.keys(c)).reduce(function(d,h){d[h]=g[h]?c[h]?"object"!==typeof g[h]||"object"!==typeof c[h]?c[h]:Vo(g[h],c[h]):g[h]:c[h];return d},{})}function qo(g,c){c=[];for(var k in g){var d=g[k],h=d.hasOwnProperty("before")?d.before:d.before=[];d=d.hasOwnProperty("after")?d.after:d.after=[];for(var n=h.length;n--;){var b=h[n],e=g[b];e?(e.hasOwnProperty("after")||(e.after=
[]),e.after.push(k)):(console.warn("[initializeProperties] "+this+" sortProperties: Property "+(k+" requires to be initialized before "+b+" but that property cannot be found.")),h.splice(n,1))}for(h=d.length;h--;)n=d[h],g[n]||(console.warn("[initializeProperties] "+this+" sortProperties: Property "+(k+" requires to be initialized after "+n+" but that property cannot be found.")),d.splice(h,1));c.push(k)}k=[];d=[];for(h=c.length+1;c.length;){if(h===c.length)throw Error("Circular dependencies in handler order, could not resolve properties "+
c.map(function(l){var a=g[l].before,f=g[l].after;if(!(a&&a.length||f&&f.length))return"";l+="\n";a&&a.length&&(l+="  - before "+a.join(",")+"\n");f&&f.length&&(l+="  - after "+f.join(",")+"\n");return l}).join(""));h=c.length;n=[];for(b=c.length;b--;)e=c[b],me.isSubset(g[e].after,d)&&(c.splice(b,1),d.push(e),n.push(e));k.push(n)}return me.flatten(k,1)}function nm(g){return Object.create(g)}function Zq(g,c){for(var k=[];g;)g.hasOwnProperty(c)&&k.unshift(g[c]),g=Object.getPrototypeOf(g);return k}function yp(g,
c){return me.merge(me.valuesInPropertyHierarchy(g,c))}function gq(g){if(!g||"object"!==typeof g||g instanceof RegExp)return g;var c=Array.isArray(g)?Array(g.length):{},k;for(k in g)g.hasOwnProperty(k)&&(c[k]=gq(g[k]));return c}function fs(g){return null===g?"null":"undefined"===typeof g?"undefined":g.constructor.name}function wm(g){function c(d,h,n,b){if(d.constructor.name===h){k+=n;if(d.length||Object.keys(d).length)k+="...";k+=b}}if(!me.isMutableType(g))return me.safeToString(g);if("Object"!==g.constructor.name&&
!Array.isArray(g)&&g.constructor.name)return g.constructor.name?g.constructor.name:Object.prototype.toString.call(g).split(" ")[1].split("]")[0];var k="";c(g,"Object","{","}");c(g,"Array","[","]");return k}function Ql(g){return-1===["null","undefined","Boolean","Number","String"].indexOf(me.typeStringOf(g))}function ro(g){try{return(g?g.toString():String(g)).replace("\n","")}catch(c){return"<error printing object>"}}function Fn(g){switch(typeof g){case "string":return new String(g);case "boolean":return new Boolean(g);
case "number":return new Number(g);default:return g}}function Bl(g,c){c=void 0===c?"_":c;var k=1;do var d=c+"-"+k++;while(d in g);return d}function zp(){return Fc.formatFromArray(Array.prototype.slice.call(arguments))}function Xo(g){function c(r,v){return""+r}function k(r,v){return r.toString()}function d(r,v){return Fc.inspectObject(r)}var h=g.shift();h||console.log("Error in Strings>>formatFromArray, first arg is undefined");var n={s:c,d:k,i:k,f:function(r,v,x){return-1<x?r.toFixed(x):r.toString()},
o:d},b=/((^%|[^\\]%)(\d+)?(\.)([a-zA-Z]))|((^%|[^\\]%)([a-zA-Z]))/;h=function(r){for(var v=[],x=b.exec(r);x;x=b.exec(r)){var y=x[8]||x[5];y=y in n?n[y]:d;var E=x[3]?parseInt(x[3]):"."==x[4]?-1:0;v.push(r.substr(0,"%"==x[0][0]?x.index:x.index+1));v.push({appender:y,precision:E});r=r.substr(x.index+x[0].length)}r&&v.push(r.toString());return v}(h);for(var e="",l=0,a=0;a<h.length;++a){var f=h[a];if(f&&"object"===typeof f){var m=g[l++];e+=(f.appender||c)(m,e,f.precision)}else e+=""+f}return e}function xm(g,
c,k){if(!k||0>=k)return g;for(var d="";0<k;)k--,d+=c;return Fc.lines(g).map(function(h){return d+h}).join("\n")}function ya(g,c){c||(c="  ");return Fc.min(g.match(new RegExp("^("+c+")*","gm")).map(function(k){return Math.floor(k.length/c.length)}))}function Sa(g,c,k){c||(c="  ");k||(k=0);var d=Fc.minIndent(g,c);if(d===k)return g;if(d<k)return Fc.indent(g,c,k-d);var h=c.repeat(d-k);return Fc.lines(g).map(function(n){return n.slice(h.length)}).join("\n")}function mb(g){return'"'+g.replace(/"/g,'\\"')+
'"'}function Xa(g){return Fc.articles.articlize(g)}function dc(g){return Fc.articles.find(g)}function $b(g){if(g&&Array.isArray(g))return"["+g.map($b)+"]";if("string"!==typeof g)return String(g);g=String(g);g=g.replace(/\n/g,"\\n\\\n");g=g.replace(/(")/g,"\\$1");return'"'+g+'"'}function oc(g,c){c=c||0;return g.reduce(function(k,d){return k+(Array.isArray(d)?oc(d,c+1):Fc.indent(d+"\n","  ",c))},"")}function zc(g,c,k){return k?" ".repeat(c)+g:g+" ".repeat(c)}function Md(g,c){function k(e){return n?
!1:b?!0:c&&Array.isArray(c.align)&&"right"===c.align[e]}var d=[],h=c&&c.separator||" ",n=!c||!c.align||"left"===c.align,b=c&&"right"===c.align;g.forEach(function(e){e.forEach(function(l,a){void 0===d[a]&&(d[a]=0);d[a]=Math.max(d[a],String(l).length)})});return g.map(function(e){return e.map(function(l,a){l=String(l);return Fc.pad(l,d[a]-l.length,k(a))}).join(h)}).join("\n")}function Rf(g,c,k,d){function h(b,e,l){n[e]=d.repeat(b)+c(l,b);l=k(l,b);var a=e+1;if(!l||!l.length)return a;var f=a,m=l.length-
1;l.forEach(function(r,v){a=h(b+1,a,r);r=m===v;var x=n[f].split(""),y=b*d.length+d.length;for(v=b*d.length+1;v<y;v++)x[v]="-";r&&(x[b*d.length]="\\");n[f]=x.join("");r||n.slice(f,a).forEach(function(E,F){E=E.split("");E[b*d.length]="|";n[f+F]=E.join("")});f=a});return a}var n=[];d=d||"  ";h(0,0,g);return n.join("\n")}function Hf(g){return g.split("")}function Vh(g){return g.split(/\n\r?/)}function zg(g,c){var k=c?c.sep:"\n\n";return c&&c.keepEmptyLines?g.split("\n").concat("").reduce(function(d,h){var n=
d[0];d=d[1];/^\s*$/.test(d)===/^\s*$/.test(h)?d+="\n"+h:(d.length&&n.push(d),d=h);return[n,d]},[[],""])[0]:g.split(new RegExp(k+"+"))}function li(g){return Fc.lines(g).compact()}function Xj(g,c){return g.split(c||/\s+/).filter(function(k){return!/^\s*$/.test(k)})}function Fk(g,c){c=c||{};var k=c.cellSplitter||/\s+/,d=/^\s*$/;c=c.hasOwnProperty("convertTypes")?!!c.convertTypes:!0;g=Fc.lines(g);for(var h=[],n=0;n<g.length;n++){var b=Fc.tokens(g[n],k);c&&(b=b.map(function(e){if(e.match(d))return e;var l=
Number(e);if(!isNaN(l))return l;l=new Date(e);return isNaN(+l)?e.trim():l}));0<b.length&&h.push(b)}return h}function Qo(g){if("undefined"===typeof document)throw Error("Cannot unescapeCharacterEntities");var c=document.createElement("div");c.innerHTML=g;return c.textContent}function Gn(g,c){return(g=g.trim().match(/([^?#]*)(#.*)?$/))?g[1].split(c||"&").inject({},function(k,d){if((d=d.split("="))[0]){var h=decodeURIComponent(d.shift());d=1<d.length?d.join("="):d[0];void 0!=d&&(d=decodeURIComponent(d));
h in k?(Array.isArray(k[h])||(k[h]=[k[h]]),k[h].push(d)):k[h]=d}return k}):{}}function qv(g){return btoa(encodeURIComponent(g).replace(/%([0-9A-F]{2})/g,function(c,k){return String.fromCharCode("0x"+k)}))}function vt(g){return decodeURIComponent(atob(g).split("").map(function(c){return"%"+("00"+c.charCodeAt(0).toString(16)).slice(-2)}).join(""))}function gs(g){var c=g.match(Fc.urlStartRe),k=(c=c?c[0]:null)?g.slice(c.length):g;do g=k,k=g.replace(Fc.pathDoubleDotRe,"");while(k!=g);k=k.replace(Fc.pathDoubleSlashRe,
"$1/");k=k.replace(Fc.pathDotRe,"/");c&&(k=c+k);return k}function Uk(){return Fc.normalizePath(Array.prototype.slice.call(arguments).reduce(function(g,c){return"string"===typeof c?g.replace(/\/*$/,"")+"/"+c.replace(/^\/*/,""):g}))}function fh(){return Fc.newUUIDTemplate.replace(Fc.newUUIDRe,Fc.newUUIDReplacer).toUpperCase()}function rv(g,c){return"data:"+(c||"text/plain")+";base64,"+Fc.base64EncodeUnicode(g)}function ug(g){var c=0,k=g.length;if(0==k)return c;for(var d=0;d<k;d++){var h=g.charCodeAt(d);
c=(c<<5)-c+h;c&=c}return c}function wt(g){function c(l,a,f,m,r,v){a=b(b(a,l),b(m,v));return b(a<<r|a>>>32-r,f)}function k(l,a,f,m,r,v,x){return c(a&f|~a&m,l,a,r,v,x)}function d(l,a,f,m,r,v,x){return c(a&m|f&~m,l,a,r,v,x)}function h(l,a,f,m,r,v,x){return c(f^(a|~m),l,a,r,v,x)}function n(l,a){var f=l[0],m=l[1],r=l[2],v=l[3];f=k(f,m,r,v,a[0],7,-680876936);v=k(v,f,m,r,a[1],12,-389564586);r=k(r,v,f,m,a[2],17,606105819);m=k(m,r,v,f,a[3],22,-1044525330);f=k(f,m,r,v,a[4],7,-176418897);v=k(v,f,m,r,a[5],12,
1200080426);r=k(r,v,f,m,a[6],17,-1473231341);m=k(m,r,v,f,a[7],22,-45705983);f=k(f,m,r,v,a[8],7,1770035416);v=k(v,f,m,r,a[9],12,-1958414417);r=k(r,v,f,m,a[10],17,-42063);m=k(m,r,v,f,a[11],22,-1990404162);f=k(f,m,r,v,a[12],7,1804603682);v=k(v,f,m,r,a[13],12,-40341101);r=k(r,v,f,m,a[14],17,-1502002290);m=k(m,r,v,f,a[15],22,1236535329);f=d(f,m,r,v,a[1],5,-165796510);v=d(v,f,m,r,a[6],9,-1069501632);r=d(r,v,f,m,a[11],14,643717713);m=d(m,r,v,f,a[0],20,-373897302);f=d(f,m,r,v,a[5],5,-701558691);v=d(v,f,m,
r,a[10],9,38016083);r=d(r,v,f,m,a[15],14,-660478335);m=d(m,r,v,f,a[4],20,-405537848);f=d(f,m,r,v,a[9],5,568446438);v=d(v,f,m,r,a[14],9,-1019803690);r=d(r,v,f,m,a[3],14,-187363961);m=d(m,r,v,f,a[8],20,1163531501);f=d(f,m,r,v,a[13],5,-1444681467);v=d(v,f,m,r,a[2],9,-51403784);r=d(r,v,f,m,a[7],14,1735328473);m=d(m,r,v,f,a[12],20,-1926607734);f=c(m^r^v,f,m,a[5],4,-378558);v=c(f^m^r,v,f,a[8],11,-2022574463);r=c(v^f^m,r,v,a[11],16,1839030562);m=c(r^v^f,m,r,a[14],23,-35309556);f=c(m^r^v,f,m,a[1],4,-1530992060);
v=c(f^m^r,v,f,a[4],11,1272893353);r=c(v^f^m,r,v,a[7],16,-155497632);m=c(r^v^f,m,r,a[10],23,-1094730640);f=c(m^r^v,f,m,a[13],4,681279174);v=c(f^m^r,v,f,a[0],11,-358537222);r=c(v^f^m,r,v,a[3],16,-722521979);m=c(r^v^f,m,r,a[6],23,76029189);f=c(m^r^v,f,m,a[9],4,-640364487);v=c(f^m^r,v,f,a[12],11,-421815835);r=c(v^f^m,r,v,a[15],16,530742520);m=c(r^v^f,m,r,a[2],23,-995338651);f=h(f,m,r,v,a[0],6,-198630844);v=h(v,f,m,r,a[7],10,1126891415);r=h(r,v,f,m,a[14],15,-1416354905);m=h(m,r,v,f,a[5],21,-57434055);
f=h(f,m,r,v,a[12],6,1700485571);v=h(v,f,m,r,a[3],10,-1894986606);r=h(r,v,f,m,a[10],15,-1051523);m=h(m,r,v,f,a[1],21,-2054922799);f=h(f,m,r,v,a[8],6,1873313359);v=h(v,f,m,r,a[15],10,-30611744);r=h(r,v,f,m,a[6],15,-1560198380);m=h(m,r,v,f,a[13],21,1309151649);f=h(f,m,r,v,a[4],6,-145523070);v=h(v,f,m,r,a[11],10,-1120210379);r=h(r,v,f,m,a[2],15,718787259);m=h(m,r,v,f,a[9],21,-343485551);l[0]=b(f,l[0]);l[1]=b(m,l[1]);l[2]=b(r,l[2]);l[3]=b(v,l[3])}var b=function(l,a){var f=(l&65535)+(a&65535);return(l>>
16)+(a>>16)+(f>>16)<<16|f&65535},e="0123456789abcdef".split("");return function(l){for(var a=l.length,f=0;f<a;f++){for(var m=f,r=l[f],v="",x=0;4>x;x++)v+=e[r>>8*x+4&15]+e[r>>8*x&15];l[m]=v}return l.join("")}(function(l){var a=l.length,f=[1732584193,-271733879,-1732584194,271733878],m;for(m=64;m<=a;m+=64){var r,v=l.substring(m-64,m),x=[];for(r=0;64>r;r+=4)x[r>>2]=v.charCodeAt(r)+(v.charCodeAt(r+1)<<8)+(v.charCodeAt(r+2)<<16)+(v.charCodeAt(r+3)<<24);n(f,x)}l=l.substring(m-64);r=[0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0];v=l.length;for(m=0;m<v;m++)r[m>>2]|=l.charCodeAt(m)<<(m%4<<3);r[m>>2]|=128<<(m%4<<3);if(55<m)for(n(f,r),m=16;m--;)r[m]=0;r[14]=8*a;n(f,r);return f}(g))}function xt(g,c){var k=[];g.replace(c,function(d,h){k.push({match:d,start:h,end:h+d.length})});return k}function sv(g,c,k){function d(b,e){if(e.constructor!==RegExp){if(0===b.indexOf(e))return{match:e,rest:b.slice(e.length)};for(var l=0;l<e.length;l++)if(e[l]!=b[l])return{match:null,pos:l};return{match:null}}return(e=Fc.reMatches(b,e))&&
e.length&&0===e[0].start?{match:e[0].match,rest:b.slice(e[0].end)}:{match:null}}function h(b){var e=Fc.reMatches(b,/__\//g),l=Fc.reMatches(b,/\/__/g);if(e.length!==l.length)throw Error("pattern invalid: "+b+" cannot be split into __/.../__ embedded RegExps\nstarts: "+JSON.stringify(e)+"\nvs ends:\n"+JSON.stringify(l));var a=0;return e.reduce(function(f,m,r){var v=l[r];r=f.pop();m=m.start-a;v=v.end-a;var x;var y=x=3;r=[r.slice(0,m),r.slice(m+x,v-y),r.slice(v)];r[0].length&&(f.push(r[0]),a+=r[0].length);
try{r[1].length&&(f.push(new RegExp(r[1])),a+=r[1].length+3+3)}catch(E){throw Error("Cannot create pattern re from: "+Fc.inspectObject(r));}r[2].length&&f.push(r[2]);return f},[b])}function n(b,e){e=h(e);a:{for(var l=b,a=0,f=0;f<e.length;f++){var m=e[f];l=d(l,m);if(!l.match){e={matched:!1,pos:a+(l.pos||0),pattern:m};break a}a+=l.match.length;l=l.rest}e=l.length?{matched:!1,pos:a}:{matched:!0}}if(e.matched)return e;e.error=b.slice(0,e.pos)+"<--UNMATCHED--\x3e"+b.slice(e.pos);return e}k=k||{};k.normalizeWhiteSpace&&
(g=g.replace(/\s+/g," "));k.ignoreIndent&&(g=g.replace(/^\s+/gm,""),c=c.replace(/^\s+/gm,""));return g==c?{matched:!0}:n(g,c)}function ex(g,c,k){g=g.slice(c);return"string"===typeof k?(g=g.indexOf(k),-1===g?null:g+c):k.constructor===RegExp?(c=Fc.reMatches(g,k),c[0]?c[0].start:null):null}function hq(g,c,k){g=g.slice(0,c);return"string"===typeof k?(g=g.lastIndexOf(k),-1===g?null:g):k.constructor===RegExp?(g=Fc.reMatches(g,k),Fc.last(g)?Fc.last(g).start:null):null}function so(g){var c=Fc.lineRanges(g);
return function(k){for(var d=0;d<c.length;d++){var h=c[d];if(k>=h[0]&&k<h[1])return d}return-1}}function bn(g){return function(c){return Fc.lineRanges(g)[c]}}function om(g){for(var c=0,k=Fc.lines(g),d=[],h=0;h<k.length;h++)g=c+k[h].length+1,d.push([c,g]),c=g;return d}function hs(g,c){var k=g.length;if(0===k)return-1;for(var d=0;;){var h=d+Math.floor((k-d)/2),n=$jscomp.makeIterator(g[h]),b=n.next().value;n=n.next().value;if(c<b){if(0===h)break;k=h}else if(c>n)d=h;else return h}return-1}function $q(g,
c,k){k=void 0===k?0:k;g=this.substring(k||0).search(c);return 0<=g?g+(k||0):g}function to(g,c,k){k=void 0===k?g.length:k;c=c.global?c:new RegExp(c.source,"g"+(c.ignoreCase?"i":"")+(c.multiLine?"m":""));g=this.substring(0,k+1);k=-1;for(var d=0,h;null!=(h=c.exec(g));)k=h.index,c.lastIndex=++d;return k}function fx(g,c){return"undefined"===typeof Fc.JsDiff?"diff not supported":Fc.JsDiff.convertChangesToXML(Fc.JsDiff.diffWordsWithSpace(g,c))}function Yy(g){return""==g}function yt(g){g=g[0];return"A"===
g||"E"===g||"I"===g||"O"===g||"U"===g||"a"===g||"e"===g||"i"===g||"o"===g||"u"===g||!1}function zt(g,c){var k=parseFloat(g);return isNaN(k)?g:k.toFixed(c)}function is(g){return g.length?g.charAt(0).toUpperCase()+g.slice(1):g}function iq(g){return g.split(" ").map(Fc.capitalize).join("")}function cn(g){var c=g.split("-"),k=c.length;if(1==k)return c[0];g="-"==g.charAt(0)?c[0].charAt(0).toUpperCase()+c[0].substring(1):c[0];for(var d=1;d<k;d++)g+=c[d].charAt(0).toUpperCase()+c[d].substring(1);return g}
function uo(g,c,k){c=c||30;k=void 0===k?"...":k;return g.length>c?g.slice(0,c-k.length)+k:String(g)}function Rl(g,c,k){c=c||30;return g.length>c?(void 0===k?"...":k)+g.slice(-c):String(g)}function js(g){return g.replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")}function tv(g){return g.slice(0,g.length-1)+String.fromCharCode(g.charCodeAt(g.length-1)+1)}function gx(g){return g.charCodeAt(0)-48}function hx(g,c){for(var k=[],d=0;d<g.length;d++){k[d]=[];for(var h=0;h<c.length;h++)k[d][h]=
0}for(d=0;d<g.length;d++)k[d][0]=0;for(d=1;d<g.length;d++)for(h=1;h<c.length;h++)k[d][h]=g[d-1]==c[h-1]?k[d-1][h-1]+1:0;for(var n=h=d=-1,b=0;b<g.length;b++)for(var e=0;e<c.length;e++){var l=k[b][e];d<l&&(d=l,h=b-l,n=e-l)}return{length:d,indexA:h,indexB:n,string:0<d?g.slice(h,h+d):""}}function Zy(g,c){return"insert"===c.action?g.slice(0,c.start)+c.lines.join("\n")+g.slice(c.start):"remove"===c.action?g.slice(0,c.start)+g.slice(c.end):g}function ix(g,c){return c.reduce(function(k,d){return Fc.applyChange(g,
d)},g)}function ar(g,c){if(0===g.length)return c.length;if(0===c.length)return g.length;var k;if(g.length>c.length){var d=g;g=c;c=d}var h=Array(g.length+1);for(d=0;d<=g.length;d++)h[d]=d;for(d=1;d<=c.length;d++){var n=d;for(k=1;k<=g.length;k++){var b=c[d-1]===g[k-1]?h[k-1]:Math.min(h[k-1]+1,Math.min(n+1,h[k]+1));h[k-1]=n;n=b}h[g.length]=n}return h[g.length]}function jx(g,c){g=g||0;return Math.round(Math.random()*((c||100)-g)+g)}function kx(g){return Math.floor(Math.random()*g)}function lx(g){if(1E3>
g)return String(Math.round(100*g)/100)+"B";g/=1024;return 1E3>g?String(Math.round(100*g)/100)+"KB":String(Math.round(g/1024*100)/100)+"MB"}function mx(g){return g.reduce(function(c,k){return c+k},0)/g.length}function At(g,c,k){return(g-c)/k+c}function nx(g){var c=g.sort(function(k,d){return d-k});g=g.length;return 0===g%2?.5*(c[g/2-1]+c[g/2]):c[(g-1)/2]}function ox(g,c,k,d){d=d||0;if(c<k)var h=k;else h=c,c=k;return 0<=h-g+d&&0>=c-g-d}function px(g,c,k){return Math.max(c,Math.min(k,g))}function Bt(g){return g.sort(function(c,
k){return c-k})}function ym(g,c){c=c||"px";if((g=g.match(/([0-9\.]+)\s*(.*)/))&&g[1]){var k=parseFloat(g[1]);return Cg.convertLength(k,g[2],c)}}function qx(g){if(!isFinite(g))return 0;for(var c=1,k=0;Math.round(g*c)/c!==g;)c*=10,k++;return k}function Ct(g,c){c=1/c;return Math.round(g*c)/c}function rx(g,c,k,d){var h=Cg.roundTo(g,k);return Math.abs(g-h)<c/2?h:d?g:h+(g-(g<h?h-c/2:h+c/2))*k/(k-c)}function $y(g){return 180*g/Math.PI%360}function az(g){return g/180*Math.PI}function bz(g,c,k){c=void 0===
c?5:c;k=void 0===k?3E4:k;g=Math.min(k,c*Math.pow(2,g));return Math.min(k,c+Math.random()*(3*(g/2+Math.round(g/2*Math.random()))-c))}function uv(g,c,k){return c+g*(k-c)}function vv(g,c){var k=[],d;for(d in g)(g.__lookupGetter__(d)||"function"!==typeof g[d])&&(c?c(d,g):1)&&k.push(d);return k}function Dt(g,c){return Object.getOwnPropertyNames(g).reduce(function(k,d){(c?c(g,d):1)&&k.push(d);return k},[])}function sx(g){var c=[],k;for(k in g)g.hasOwnProperty(k)&&(g.__lookupGetter__(k)||"function"!==g[k])&&
c.push(k);return c}function tx(g,c,k){var d=[],h;for(h in g)if(g.hasOwnProperty(h)){var n=g[h];"function"!==n&&d.push(c.call(k||this,h,n))}return d}function cz(g,c){for(var k in g)if(g[k]===c)return k}function ux(g){var c=[],k;for(k in g)c.push(g[k]);return c}function br(g){var c=[],k;for(k in g)g.hasOwnProperty(k)&&c.push(g[k]);return c}function Et(g,c){for(var k in g)if(c(g,k))return!0;return!1}function wv(g,c){var k=[],d;for(d in g)(c?c(g,d):1)&&k.push(d);return k}function Ft(g){return Object.keys(g).sort().join("").hashCode()}
function Gt(g,c,k){return jq.dateFormat(g,c,k)}function dn(g,c){return c&&c instanceof Date&&c.getTime()===g.getTime()}function kq(g,c,k){k=void 0===k?{}:k;if(!(c instanceof Date)||c<g)return"";if(c===g)return"now";var d="min",h="sec",n="hour",b="day",e=Math.round((c-g)/1E3);g=e%60;c=Math.floor(e/60)%60;var l=Math.floor(e/60/60)%24;e=Math.floor(e/60/60/24);var a=[];0<e&&(a.push(e),1<e&&(b+="s"),a.push(b));if(k.forceHours||0<l&&2>e)a.push(l),1<l&&(n+="s"),a.push(n);if(k.forceMinutes||0<c&&3>l&&0===
e)a.push(c),1<c&&(d+="s"),a.push(d);if(k.forceSeconds||0<g&&3>c&&0===l&&0===e)a.push(g),1<g&&(h+="s"),a.push(h);return a.join(" ")}function hg(g){return"function"===typeof g?hg.convertCallbackFun(g):Promise.resolve(g)}function ti(g,c){return new Promise(function(k){return setTimeout(k,g,c)})}function Ap(g,c){return new Promise(function(k,d){return setTimeout(d,g,c)})}function lq(g,c){return new Promise(function(k,d){var h=!1;setTimeout(function(){return!h&&(h=!0)&&d(Error("Promise timed out"))},g);
c.then(function(n){return!h&&(h=!0)&&k(n)},function(n){return!h&&(h=!0)&&d(n)})})}function xv(g){var c=Date.now();return Promise.resolve(g).then(function(){return Date.now()-c})}function vx(g,c,k){"function"===typeof g&&(c=g,g=void 0);return new Promise(function(d,h){var n=!1,b=!1,e,l,a=setInterval(function(){if(n)clearInterval(a),delete Gg.waitForClosures[a];else{try{l=c()}catch(f){e=f}if(l||e||b)return n=!0,clearInterval(a),delete Gg.waitForClosures[a],e?h(e):b?"undefined"===typeof k?h(Error("timeout")):
d(k):d(l)}},10);Gg.waitForClosures[a]=a;"number"===typeof g&&setTimeout(function(){return b=!0},g)})}function yv(){var g,c,k=new Promise(function(d,h){g=d;c=h});return{resolve:g,reject:c,promise:k}}function dz(g){return function(){var c=Array.from(arguments),k=this;return new Promise(function(d,h){c.push(function(n,b){return n?h(n):d(b)});g.apply(k,c)})}}function zv(g){return function(){var c=Array.from(arguments),k=this;return new Promise(function(d,h){c.push(function(){var n=Array.from(arguments),
b=n.shift();return b?h(b):d(n)});g.apply(k,c)})}}function wx(g,c,k,d,h){var n=g.shift();if(n)try{Promise.resolve(n(c,k)).then(function(b){return wx(g,b,k,d,h)}).catch(function(b){h(b)})}catch(b){h(b)}else d(c)}function ez(g){return new Promise(function(c,k){return Gg._chainResolveNext(g.slice(),void 0,{},c,k)})}function fz(g,c){return Promise.resolve(g).then(function(k){try{c()}catch(d){console.error("Error in promise finally: "+d.stack||d)}return k}).catch(function(k){try{c()}catch(d){console.error("Error in promise finally: "+
d.stack||d)}throw k;})}function oB(g,c){function k(){c--;try{var f=b++;g[f]().then(function(m){c++;h[f]=m;0===--e?l():d()}).catch(function(m){return a(m)})}catch(m){a(m)}}function d(){for(;!n&&0<e&&b<g.length&&0<c;)k()}c=void 0===c?Infinity:c;if(!g.length)return Promise.resolve([]);var h=[],n=null,b=0,e=g.length,l,a;return new Promise(function(f,m){l=function(){return f(h)};a=function(r){return m(n=r)};d()})}function Ih(g,c){if(g instanceof Ih)return g;if(!(this instanceof Ih))return new Ih(g,c);
this.setSplitter(c||".");this.fromPath(g)}function xx(g){var c={},k;for(k in g)c[k]=g[k].slice();return c}function Av(g,c){var k={},d;for(d in g)if(!c.includes(d)){k[d]=[];for(var h=g[d],n=0;n<h.length;n++){var b=h[n];c.includes(b)||k[d].push(b)}}return k}function Ht(g,c,k,d){k=void 0===k?[]:k;d=void 0===d?Infinity:d;if(!Array.isArray(g[c]))return[];for(var h=[],n={},b={},e=0;e<k.length;e++)b[k[e]]=!0;c=g[c].slice();e={};for(var l=c.length;l--;){var a=c[l];a in b?c.splice(l,1):e[a]=1}if(k)for(;0!==
c.length;)for(k=0;k<c.length;k++)if(a=c.shift(),!(a in n||a in b)&&(l=e[a]||0,!(l>d)&&(h.push(a),n[a]=!0,a=g[a])))for(var f=0;f<a.length;f++){var m=a[f];m in n||m in e||(e[m]=l+1,c.push(m))}return h}function Bv(g,c,k,d){d=void 0===d?Infinity:d;k&&(g=Lj.without(g,k));c=[c];k=0;for(var h={};c.length&&k++<d;){var n=c.shift();if(!h[n]){var b=g[n]||[];h[n]=b;c.push.apply(c,$jscomp.arrayFromIterable(b))}}return h}function yx(g){var c={},k;for(k in g)for(var d=g[k],h=0;h<d.length;h++){var n=d[h];c[n]?c[n].push(k):
c[n]=[k]}return c}function cr(g,c){c=[];var k={},d={},h={};for(f in g){k.hasOwnProperty(f)||(k[f]=!0,c.push(f));var n=g[f],b={};if(n){d[f]=[];n=$jscomp.makeIterator(n);for(var e=n.next();!e.done;e=n.next())if(e=e.value,!b.hasOwnProperty(e)&&f!==e){var l=h[e]||(h[e]=[]);l.includes(f)||l.push(f);b[e]=!0;d[f].push(e);k.hasOwnProperty(e)||(k[e]=!0,c.push(e))}}}for(g=[];c.length;){k=Infinity;var a=[];b=[];n=[];for(e=0;e<c.length;e++){var f=c[e];l=d[f]||[];l.length>k||(l.length!==k||l.some(function(m){return a.includes(m)})?
(k=l.length,a=[f],b=[e],n=(h[f]||[]).slice()):(a.push(f),b.push(e),n.push.apply(n,$jscomp.arrayFromIterable(h[f]||[]))))}for(e=b.length;e--;)f=c[b[e]],h[f]=[],c.splice(b[e],1);k=$jscomp.makeIterator(n);for(f=k.next();!f.done;f=k.next())f=f.value,d[f]=d[f].filter(function(m){return!a.includes(m)});g.push(a)}return g}function dr(g,c,k,d,h,n){function b(a){-1<e.indexOf(a)||(d=g.call(n,d,a,l++),e=e.concat([a]),Lj.withoutAll(c[a]||[],e).forEach(function(f){return b(f)}))}var e=h||[],l=0;b(k);return d}
function er(g){g=void 0===g?10:g;for(var c={},k=Lj.range(1,g).map(String),d=0;d<k.length;d++){var h=Math.floor(Math.random()*g);c[k[d]]=Lj.shuffle(k).slice(0,h)}return c}function gz(g){return Array.isArray(g)&&2<=g.length&&g[0]<=g[1]}function zx(g){return g.sort(ui.compare)}function Cv(g,c){return g[0]<c[0]?g[1]<c[0]?-3:g[1]===c[0]?-2:-1:g[0]===c[0]?g[1]===c[1]?0:g[1]<c[1]?-1:1:-1*Cv(c,g)}function mq(g,c,k){switch(this.compare(g,c)){case -3:case 3:return null;case 0:return k&&k(g,c,g),g;case 2:case 1:var d=
g;g=c;c=d;case -2:case -1:return d=[g[0],Math.max(g[1],c[1])],k&&k(g,c,d),d;default:throw Error("Interval compare failed");}}function Ax(g,c){for(var k=[],d=g.length;0<d;){var h=g.shift();d--;for(var n=0;n<d;n++){var b=ui.coalesce(h,g[n],c);b&&(h=b,g.splice(n,1),d--,n--)}k.push(h)}return this.sort(k)}function Bx(g,c,k){for(var d=[];0<g.length;){var h=g.shift(),n=c.map(function(b){b=ui.compare(h,b);return-1===b||0===b||1===b});d.push(k(h,n[0]));d.push(h)}return d}function nq(g,c,k,d,h,n){n=n||ui.GLOBAL;
k=this.sort(k);for(var b,e=[];b=k.shift();)if(!(b[1]<g)){b[0]<g&&(b=Array.prototype.slice.call(b),b[0]=g);var l=c<b[0]?c:b[0];g<l&&e.push(d.call(n,[g,l],!0));c<b[1]&&(b=Array.prototype.slice.call(b),b[1]=c);if(b[0]===b[1]){var a;h&&(a=e.slice(-1)[0])&&h.call(n,a,b,a)}else e.push(d.call(n,b,!1));g=b[1];if(g>=c)break}g<c&&e.push(d.call(n,[g,c],!0));return e}function Dv(g,c,k){return ui.intervalsInRangeDo(g,c,ui.coalesceOverlapping(Array.prototype.slice.call(k)),function(d,h){return h?d:null}).filter(Boolean)}
function hz(g,c){var k=0,d,h;return c.map(function(n){for(;h=g[k];)if(h[0]<n[0])k++;else break;if(h&&h[0]===n[0]){for(d=k;h=g[d];)if(h[1]<n[1])d++;else break;if(h&&h[1]===n[1])return ui.range(k,d)}return[]})}function Cx(g,c,k){k=k||0;k+c>g.length&&(k-=k+c-g.length);return{array:g,from:k,to:k+c}}function Dx(g){return g.array.slice(g.from,g.to)}function It(g,c){return c<g.from||c>=g.to?null:c-g.from}function ks(g,c){return 0>c||c>g.to-g.from?null:g.from+c}function ls(g,c){if(!(c in g.array))return null;
var k=0;c<g.from&&(k=-g.from+c);c>=g.to&&(k=c-g.to+1);return 0===k?g:Yo.create(g.array,g.to-g.from,g.from+k)}function fr(g,c,k){return(g=g[c])?g[k]:void 0}function Ev(g,c,k,d){(g=g[c])&&(g[k]=d);return d}function ms(g,c){return g[c]}function Ex(g,c,k){return g[c]=k}function gr(g,c){return g.reduce(function(k,d){k.push(d[c]);return k},[])}function iz(g,c,k){return g.map(function(d,h){return d[c]?d[c]=k[h]:void 0})}function Fv(g,c,k){for(var d=Array(g);0<g;)d[--g]=Nh.arrayWithN(c,k);return d}function jz(g,
c,k,d){for(var h=Array(g),n=0;n<g;n++){h[n]=Array(c);for(var b=0;b<c;b++)h[n][b]=k.call(d||this,n,b)}return h}function zm(g,c,k){g.forEach(function(d,h){d.forEach(function(n,b){c.call(k||this,n,h,b)})})}function Gv(g,c,k){var d=Array(g.length);g.forEach(function(h,n){d[n]=Array(h.length);h.forEach(function(b,e){d[n][e]=c.call(k||this,b,n,e)})});return d}function ns(g){for(var c=g[0],k=Array(g.length-1),d=1;d<g.length;d++)for(var h=k[d-1]={},n=0;n<c.length;n++)h[c[n]]=g[d][n];return k}function os(g,
c){Array.isArray(g)||(g=[g]);var k=[[]],d=k[0],h=g.reduce(function(n,b){return n.concat([Object.keys(b).reduce(function(e,l){var a=d.indexOf(l);-1===a&&(a=d.length,d.push(l));e[a]=b[l];return e},[])])},[]);c=1===arguments.length?null:c;h.forEach(function(n){for(var b=0;b<d.length;b++)n[b]||(n[b]=c)});return k.concat(h)}function ps(g,c,k,d,h){d=void 0===d?{i:0}:d;h=void 0===h?0:h;var n=d.i++;c(g,n,h);(k(g,n,h)||[]).forEach(function(b){return ps(b,c,k,d,h+1)})}function ml(g,c,k,d,h){d=void 0===d?{i:0}:
d;h=void 0===h?0:h;var n=d.i++;(k(g,n,h)||[]).forEach(function(b){return ml(b,c,k,d,h)});c(g,n,h)}function qs(g,c,k){if(c(g))return g;if((g=k(g))&&g.length)for(var d=0;d<g.length;d++){var h=qs(g[d],c,k);if(h)return h}}function Zo(g,c,k){var d=[];c(g)&&d.push(g);return d.concat(nl.flatten((k(g)||[]).map(function(h){return Zo(h,c,k)})))}function Jt(g,c,k,d){d=void 0===d?0:d;return[c(g,d)].concat(nl.flatten((k(g)||[]).map(function(h){return Jt(h,c,k,d+1)})))}function hr(g,c,k,d){d=void 0===d?0:d;var h=
(k(g)||[]).map(function(n){return hr(n,c,k,d+1)});return c(g,h,d)}function Hv(g){var c=[{name:"send",args:["msg","callback"]},{name:"listen",args:["messenger","callback"]},{name:"close",args:["messenger","callback"]},{name:"isOnline",args:[]}],k=c.map(function(b){return b.name}).concat("id sendHeartbeat heartbeatInterval ignoreUnknownMessages allowConcurrentSends sendTimeout services".split(" "));c.forEach(function(b){if(!g[b.name])throw b="message implementation needs function "+b.name+"("+b.args.join(",")+
")",Error(b);});c=g.sendHeartbeat&&(g.heartbeatInterval||1E3);var d=g.hasOwnProperty("ignoreUnknownMessages")?g.ignoreUnknownMessages:!1,h={_outgoing:[],_inflight:[],_id:g.id||Sl.newUUID(),_ignoreUnknownMessages:d,_services:{},_messageCounter:0,_messageResponseCallbacks:{},_whenOnlineCallbacks:[],_statusWatcherProc:null,_startHeartbeatProcessProc:null,_listenInProgress:null,_heartbeatInterval:c,_status:Sl.OFFLINE,_runWhenOnlineCallbacks:function(){var b=h._whenOnlineCallbacks.slice();h._whenOnlineCallbacks=
[];b.forEach(function(e){try{e.call(null,null,h)}catch(l){console.error("error in _runWhenOnlineCallbacks: %s",l)}})},_ensureStatusWatcher:function(){h._statusWatcherProc||(h._statusWatcherProc=setInterval(function(){h.isOnline()&&h._whenOnlineCallbacks.length&&h._runWhenOnlineCallbacks();var b=h._status;h._status=h.isOnline()?Sl.ONLINE:Sl.OFFLINE;h._status!==Sl.ONLINE&&h._statusWatcherProc&&h.reconnect();if(h._status!==b&&h.onStatusChange)h.onStatusChange()},20))},_addMissingData:function(b){if(!b.target)throw Error("Message needs target!");
if(!b.action)throw Error("Message needs action!");b.data||(b.data=null);b.messageId||(b.messageId=Sl.newUUID());b.sender=h.id();b.messageIndex=h._messageCounter++;return b},_queueSend:function(b,e){if(e&&"function"!==typeof e)throw Error("Expecing a when send callback, got: "+e);h._outgoing.push([b,e])},_deliverMessageQueue:function(){function b(a){if(-1!==h._inflight.indexOf(a)){var f=a[0],m=a[1];m&&(h._messageResponseCallbacks[f.messageId]=m);g.send.call(h,f,function(r){Sl.remove(h._inflight,a);
r&&e(r,a);h._deliverMessageQueue()})}}function e(a,f){var m=f[1];delete h._messageResponseCallbacks[f[0].messageId];console.error(a);m&&m(a)}if(g.allowConcurrentSends||!h._inflight.length){var l=h._outgoing.shift();l&&(h._inflight.push(l),h.isOnline()?b(l):h.whenOnline(function(){b(l)}),function(a){"number"===typeof g.sendTimeout&&setTimeout(function(){-1!==h._inflight.indexOf(a)&&(Sl.remove(h._inflight,a),e(Error("Timeout sending message"),a),h._deliverMessageQueue())},g.sendTimeout)}(l),g.allowConcurrentSends&&
h._outgoing.length&&h._deliverMessageQueue())}},_startHeartbeatProcess:function(){h._startHeartbeatProcessProc||(h._startHeartbeatProcessProc=setTimeout(function(){g.sendHeartbeat.call(h,function(b,e){h._startHeartbeatProcessProc=null;h._startHeartbeatProcess()})},h._heartbeatInterval))},id:function(){return h._id},isOnline:function(){return g.isOnline.call(h)},heartbeatEnabled:function(){return"number"===typeof h._heartbeatInterval},listen:function(b){if(!h._listenInProgress)return h._listenInProgress=
!0,h._ensureStatusWatcher(),g.listen.call(h,function(e){h._listenInProgress=null;b&&b(e);h.heartbeatEnabled()&&h._startHeartbeatProcess()})},reconnect:function(){if(h._status!==Sl.ONLINE)return h.listen(),h},send:function(b,e){h._addMissingData(b);h._queueSend(b,e);h._deliverMessageQueue();return b},sendTo:function(b,e,l,a){return h.send({target:b,action:e,data:l},a)},onMessage:function(b){h.emit("message",b);if(b.inResponseTo){var e=h._messageResponseCallbacks[b.inResponseTo];e&&!b.expectMoreResponses&&
delete h._messageResponseCallbacks[b.inResponseTo];e&&e(null,b)}else if(e=h._services[b.action])try{e.call(null,b,h)}catch(l){e=String(l.stack||l),console.error("Error invoking service: "+e),h.answer(b,{error:e})}else h._ignoreUnknownMessages||h.answer(b,{error:String(Error("messageNotUnderstood: "+b.action))})},answer:function(b,e,l,a){"function"===typeof l&&(a=l,l=!1);b={target:b.sender,action:b.action+"Result",inResponseTo:b.messageId,data:e};l&&(b.expectMoreResponses=!0);return h.send(b,a)},close:function(b){clearInterval(h._statusWatcherProc);
h._statusWatcherProc=null;g.close.call(h,function(e){h._status=Sl.OFFLINE;b&&b(e)});return h},whenOnline:function(b){h._whenOnlineCallbacks.push(b);h.isOnline()&&h._runWhenOnlineCallbacks();return h},outgoingMessages:function(){return Sl.pluck(h._inflight.concat(h._outgoing),0)},addServices:function(b){Object.assign(h._services,b);return h}};g.services&&h.addServices(g.services);Sl.makeEmitter(h);for(var n in g)-1===k.indexOf(n)&&g.hasOwnProperty(n)&&(h[n]=g[n]);return h}function Iv(g,c,k){k||(k=
c,c=g,g=null);g=g||{};var d=g.args||[];g=Oh.create(g);g.run.apply(g,[c].concat(d).concat(k));return g}function Fx(g){g=g||{};g.useMessenger=!0;var c=g.workerId||Oh.newUUID(),k=Oh.messengerCreate({sendTimeout:5E3,send:function(d,h){k.worker.postMessage(d);h()},listen:function(d){var h=k.worker=Oh.isNodejs?Oh.NodejsWorker.create(g):Oh.BrowserWorker.create(g);h.on("message",function(n){k.onMessage(n)});h.on("ready",function(){Oh.NodejsWorker.debug&&console.log("WORKER READY!!!")});h.on("close",function(){Oh.NodejsWorker.debug&&
console.log("WORKER CLOSED...!!!")});h.once("ready",d)},close:function(d){return k.worker.ready?k.sendTo(c,"close",{},function(h,n){(h=h||n.data.error)&&console.error("Error in worker messenger close: "+h.stack||h);if(h)d(h);else{var b=!1;k.worker.once("close",function(){b=!0});Oh.waitFor(1E3,function(){return!!b},d)}}):d(null)},isOnline:function(){return k.worker&&k.worker.ready}});Object.assign(k,{eval:function(d,h){k.sendTo(c,"remoteEval",{expr:d},function(n,b){h(n,b?b.data.result:null)})},run:function(){var d=
Array.prototype.slice.call(arguments),h=d.shift(),n=d.pop();if("function"!==typeof h)throw Error("run: no function that should run in worker passed");if("function"!==typeof n)throw Error("run: no callback passed");return k.sendTo(c,"run",{func:String(h),args:d},function(b,e){n(b||e.data.error,e?e.data.result:null)})}});k.listen();return k}function Xh(){if(!Fd.isNode||Fd.GLOBAL.lively||Fd.GLOBAL.lively)if(Fd.livelyLang._prevLivelyGlobal=Fd.GLOBAL.lively,Fd.GLOBAL.lively||(Fd.GLOBAL.lively={}),Fd.GLOBAL.lively.lang)for(var g in Fd.livelyLang)Fd.GLOBAL.lively.lang[g]=
Fd.livelyLang[g];else Fd.GLOBAL.lively.lang=Fd.livelyLang}function Bp(g){if(!g)return g;if(Array.isArray(g))return Fd.createChain(Fd.arr,g);if("Date"===g.constructor.name)return Fd.createChain(Fd.date,g);switch(typeof g){case "string":return Fd.createChain(Fd.string,g);case "object":return Fd.createChain(Fd.obj,g);case "function":return Fd.createChain(Fd.fun,g);case "number":return Fd.createChain(Fd.num,g)}throw Error("Chain for object "+g+" ("+g.constructor.name+") no supported");}function Vk(){Fd.isNode||
(Fd.livelyLang._prevLivelyGlobal?delete Fd.GLOBAL.lively.lang:delete Fd.GLOBAL.lively);return Fd.livelyLang}function oq(){Object.assign(Fd.livelyLang,{worker:Fd.worker,messenger:Fd.messenger,events:Fd.events,tree:Fd.tree,grid:Fd.grid,arrayProjection:Fd.arrayProjection,interval:Fd.interval,graph:Fd.graph,date:Fd.date,properties:Fd.properties,obj:Fd.obj,arr:Fd.arr,fun:Fd.fun,num:Fd.num,string:Fd.string,Closure:Fd.Closure,promise:Fd.promise,Path:Fd.Path,Group:Fd.Group});Fd.globalInterfaceSpec.forEach(function(g){if("installMethods"===
g.action){var c=Fd.Path(g.target);c.isIn(Fd.GLOBAL)||c.set(Fd.GLOBAL,{},!0);var k=Fd.Path(g.sources[0]);g.methods.forEach(function(d){Fd.installProperty(k.concat([d]),c.concat([d]))});g.alias&&g.alias.forEach(function(d){Fd.installProperty(k.concat([d[1]]),c.concat([d[0]]))})}else if("installObject"===g.action)c=Fd.Path(g.target),g=Fd.Path(g.source).get(Fd.livelyLang),c.set(Fd.GLOBAL,g,!0);else throw Error("Cannot deal with global setup action: "+g.action);})}function kz(){Fd.globalInterfaceSpec.forEach(function(g){if("installMethods"===
g.action){var c=Fd.Path(g.target),k=Fd.Path(g.source).get(Fd.livelyLang),d=c.get(Fd.GLOBAL);d&&(g.methods.filter(function(h){return k===d[h]}).forEach(function(h){delete d[h]}),g.alias&&g.alias.filter(function(h){return k===d[h]}).forEach(function(h){delete d[h[0]]}))}else if("installObject"===g.action)c=Fd.Path(g.target),c.del(Fd.GLOBAL);else throw Error("Cannot deal with global setup action: "+g.action);})}function vo(g){return(g=g.match(v0))?{scheme:g[1],auth:g[2],host:g[3],port:g[4],path:g[5]}:
null}function Jn(g){var c="";g.scheme&&(c+=g.scheme+":");c+="//";g.auth&&(c+=g.auth+"@");g.host&&(c+=g.host);g.port&&(c+=":"+g.port);g.path&&(c+=g.path);return c}function Am(g){var c=g,k=vo(g);if(k){if(!k.path)return g;c=k.path}g=en.isAbsolute(c);c=c.split(/\/+/);for(var d,h=0,n=c.length-1;0<=n;n--)d=c[n],"."===d?c.splice(n,1):".."===d?h++:0<h&&(""===d?(c.splice(n+1,h),h=0):(c.splice(n,2),h--));c=c.join("/");""===c&&(c=g?"/":".");return k?(k.path=c,Jn(k)):c}function mi(g,c){""===g&&(g=".");""===c&&
(c=".");var k=vo(c),d=vo(g);d&&(g=d.path||"/");if(k&&!k.scheme)return d&&(k.scheme=d.scheme),Jn(k);if(k||c.match(gga))return c;if(d&&!d.host&&!d.path)return d.host=c,Jn(d);g="/"===c.charAt(0)?c:Am(g.replace(/\/+$/,"")+"/"+c);return d?(d.path=g,Jn(d)):g}function Wk(g){return g}function Jv(g){return Cp(g)?"$"+g:g}function Kt(g){return Cp(g)?g.slice(1):g}function Cp(g){if(!g)return!1;var c=g.length;if(9>c||95!==g.charCodeAt(c-1)||95!==g.charCodeAt(c-2)||111!==g.charCodeAt(c-3)||116!==g.charCodeAt(c-
4)||111!==g.charCodeAt(c-5)||114!==g.charCodeAt(c-6)||112!==g.charCodeAt(c-7)||95!==g.charCodeAt(c-8)||95!==g.charCodeAt(c-9))return!1;for(c-=10;0<=c;c--)if(36!==g.charCodeAt(c))return!1;return!0}function ir(g,c){return g===c?0:null===g?1:null===c?-1:g>c?1:-1}function Xg(){(this||wo)._array=[];(this||wo)._set=pB?new Map:Object.create(null)}function ah(){(this||rs)._array=[];(this||rs)._sorted=!0;(this||rs)._last={generatedLine:-1,generatedColumn:0}}function Bm(g){g||(g={});(this||vi)._file=Cm.getArg(g,
"file",null);(this||vi)._sourceRoot=Cm.getArg(g,"sourceRoot",null);(this||vi)._skipValidation=Cm.getArg(g,"skipValidation",!1);(this||vi)._sources=new NK;(this||vi)._names=new NK;(this||vi)._mappings=new hga;(this||vi)._sourcesContents=null}function aa(g,c,k,d,h,n){var b=Math.floor((c-g)/2)+g,e=h(k,d[b],!0);return 0===e?b:0<e?1<c-b?aa(b,c,k,d,h,n):n==OK.LEAST_UPPER_BOUND?c<d.length?c:-1:b:1<b-g?aa(g,b,k,d,h,n):n==OK.LEAST_UPPER_BOUND?b:0>g?-1:g}function sa(g,c,k){var d=g[c];g[c]=g[k];g[k]=d}function bb(g,
c,k,d){if(k<d){var h=k-1;sa(g,Math.round(k+Math.random()*(d-k)),d);for(var n=g[d],b=k;b<d;b++)0>=c(g[b],n)&&(h+=1,sa(g,h,b));sa(g,h+1,b);h+=1;bb(g,c,k,h-1);bb(g,c,h+1,d)}}function pb(g,c){var k=g;"string"===typeof g&&(k=vg.parseSourceMapInput(g));return null!=k.sections?new wd(k,c):new Sb(k,c)}function Sb(g,c){var k=g;"string"===typeof g&&(k=vg.parseSourceMapInput(g));g=vg.getArg(k,"version");var d=vg.getArg(k,"sources"),h=vg.getArg(k,"names",[]),n=vg.getArg(k,"sourceRoot",null),b=vg.getArg(k,"sourcesContent",
null),e=vg.getArg(k,"mappings");k=vg.getArg(k,"file",null);if(g!=(this||Ye)._version)throw Error("Unsupported version: "+g);n&&(n=vg.normalize(n));d=d.map(String).map(vg.normalize).map(function(l){return n&&vg.isAbsolute(n)&&vg.isAbsolute(l)?vg.relative(n,l):l});(this||Ye)._names=OD.fromArray(h.map(String),!0);(this||Ye)._sources=OD.fromArray(d,!0);(this||Ye)._absoluteSources=(this||Ye)._sources.toArray().map(function(l){return vg.computeSourceURL(n,l,c)});(this||Ye).sourceRoot=n;(this||Ye).sourcesContent=
b;(this||Ye)._mappings=e;(this||Ye)._sourceMapURL=c;(this||Ye).file=k}function sc(){(this||Ye).generatedLine=0;(this||Ye).generatedColumn=0;(this||Ye).source=null;(this||Ye).originalLine=null;(this||Ye).originalColumn=null;(this||Ye).name=null}function wd(g,c){var k=g;"string"===typeof g&&(k=vg.parseSourceMapInput(g));g=vg.getArg(k,"version");k=vg.getArg(k,"sections");if(g!=(this||Ye)._version)throw Error("Unsupported version: "+g);(this||Ye)._sources=new OD;(this||Ye)._names=new OD;var d={line:-1,
column:0};(this||Ye)._sections=k.map(function(h){if(h.url)throw Error("Support for url field in sections not implemented.");var n=vg.getArg(h,"offset"),b=vg.getArg(n,"line"),e=vg.getArg(n,"column");if(b<d.line||b===d.line&&e<d.column)throw Error("Section offsets must be ordered and non-overlapping.");d=n;return{generatedOffset:{generatedLine:b+1,generatedColumn:e+1},consumer:new pb(vg.getArg(h,"map"),c)}})}function Ie(g,c,k,d,h){(this||vj).children=[];(this||vj).sourceContents={};(this||vj).line=
null==g?null:g;(this||vj).column=null==c?null:c;(this||vj).source=null==k?null:k;(this||vj).name=null==h?null:h;(this||vj).$$$isSourceNode$$$=!0;null!=d&&this.add(d)}function Ve(g,c){c=void 0===c?{}:c;var k=Object.assign({indent:{style:"  ",base:0,adjustMultilineComment:!1,optsIndent:c&&c.format&&c.format.indent||{}},quotes:"double"},jr.obj.dissoc(c&&c.format||{},["indent"]));c=Object.assign({format:k,comment:!1},jr.obj.dissoc(c,["format"]));return jr.es.generate(g,c)}function Uf(g,c){for(var k=65536,
d=0;d<c.length;d+=2){k+=c[d];if(k>g)return!1;k+=c[d+1];if(k>=g)return!0}}function lg(g,c){return 65>g?36===g:91>g?!0:97>g?95===g:123>g?!0:65535>=g?170<=g&&iga.test(String.fromCharCode(g)):!1===c?!1:Uf(g,w0)}function ni(g,c){return 48>g?36===g:58>g?!0:65>g?!1:91>g?!0:97>g?95===g:123>g?!0:65535>=g?170<=g&&jga.test(String.fromCharCode(g)):!1===c?!1:Uf(g,w0)||Uf(g,kga)}function qh(g,c){return new Sj(g,{beforeExpr:!0,binop:c})}function Of(g,c){void 0===c&&(c={});c.keyword=g;return PK[g]=new Sj(g,c)}function dl(g,
c){return 10===g||13===g||!c&&(8232===g||8233===g)}function Gk(g){return new RegExp("^(?:"+g.replace(/ /g,"|")+")$")}function rh(g,c){for(var k=1,d=0;;){PD.lastIndex=d;var h=PD.exec(g);if(h&&h.index<c)++k,d=h.index+h[0].length;else return new QD(k,c-d)}}function xo(g){var c={},k;for(k in QK)c[k]=g&&RK.call(g,k)?g[k]:QK[k];"latest"===c.ecmaVersion?c.ecmaVersion=1E8:null==c.ecmaVersion?(!x0&&"object"===typeof console&&console.warn&&(x0=!0,console.warn("Since Acorn 8.0.0, options.ecmaVersion is required.\nDefaulting to 2020, but this will stop working in the future.")),
c.ecmaVersion=11):2015<=c.ecmaVersion&&(c.ecmaVersion-=2009);null==c.allowReserved&&(c.allowReserved=5>c.ecmaVersion);if(y0(c.onToken)){var d=c.onToken;c.onToken=function(h){return d.push(h)}}y0(c.onComment)&&(c.onComment=Tl(c,c.onComment));return c}function Tl(g,c){return function(k,d,h,n,b,e){k={type:k?"Block":"Line",value:d,start:h,end:n};g.locations&&(k.loc=new NG(this,b,e));g.ranges&&(k.range=[h,n]);c.push(k)}}function Dp(){this.shorthandAssign=this.trailingComma=this.parenthesizedAssign=this.parenthesizedBind=
this.doubleProto=-1}function ss(g,c,k,d){g.type=c;g.end=k;this.options.locations&&(g.loc.end=d);this.options.ranges&&(g.range[1]=k);return g}function kr(g){g=z0[g]={binary:Gk(lga[g]+" Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu"),
nonBinary:{General_Category:Gk("Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu"),
Script:Gk(mga[g])}};g.nonBinary.Script_Extensions=g.nonBinary.Script;g.nonBinary.gc=g.nonBinary.General_Category;g.nonBinary.sc=g.nonBinary.Script;g.nonBinary.scx=g.nonBinary.Script_Extensions}function lz(g){if(65535>=g)return String.fromCharCode(g);g-=65536;return String.fromCharCode((g>>10)+55296,(g&1023)+56320)}function hk(g){return 36===g||40<=g&&43>=g||46===g||63===g||91<=g&&94>=g||123<=g&&125>=g}function ts(g){return 65<=g&&90>=g||97<=g&&122>=g||95===g}function SK(g){return ts(g)||qB(g)}function qB(g){return 48<=
g&&57>=g}function Kv(g){return 48<=g&&57>=g||65<=g&&70>=g||97<=g&&102>=g}function OG(g){return 65<=g&&70>=g?10+(g-65):97<=g&&102>=g?10+(g-97):g-48}function Cj(g){return"function"!==typeof BigInt?null:BigInt(g.replace(/_/g,""))}function Yj(g){if(65535>=g)return String.fromCharCode(g);g-=65536;return String.fromCharCode((g>>10)+55296,(g&1023)+56320)}function us(g){return"string"===typeof g?function(c){return c===g}:g?g:function(){return!0}}function el(g,c){c=Object.create(c||pf);for(var k in g)c[k]=
g[k];return c}function rB(g,c,k){k(g,c)}function $c(g,c,k){}function yo(g,c){for(var k=65536,d=0;d<c.length;d+=2){k+=c[d];if(k>g)return!1;k+=c[d+1];if(k>=g)return!0}}function zo(g,c){return 65>g?36===g:91>g?!0:97>g?95===g:123>g?!0:65535>=g?170<=g&&nga.test(String.fromCharCode(g)):!1===c?!1:yo(g,A0)}function vs(g,c){return 48>g?36===g:58>g?!0:65>g?!1:91>g?!0:97>g?95===g:123>g?!0:65535>=g?170<=g&&oga.test(String.fromCharCode(g)):!1===c?!1:yo(g,A0)||yo(g,pga)}function Dm(g,c){return new Zj(g,{beforeExpr:!0,
binop:c})}function Mi(g,c){void 0===c&&(c={});c.keyword=g;return IS[g]=new Zj(g,c)}function Kn(g,c){return 10===g||13===g||!c&&(8232===g||8233===g)}function $o(g){return new RegExp("^(?:"+g.replace(/ /g,"|")+")$")}function Lv(g,c){for(var k=1,d=0;;){sB.lastIndex=d;var h=sB.exec(g);if(h&&h.index<c)++k,d=h.index+h[0].length;else return new PG(k,c-d)}}function QG(g){var c={},k;for(k in TK)c[k]=g&&UK.call(g,k)?g[k]:TK[k];"latest"===c.ecmaVersion?c.ecmaVersion=1E8:null==c.ecmaVersion?(!B0&&"object"===
typeof console&&console.warn&&(B0=!0,console.warn("Since Acorn 8.0.0, options.ecmaVersion is required.\nDefaulting to 2020, but this will stop working in the future.")),c.ecmaVersion=11):2015<=c.ecmaVersion&&(c.ecmaVersion-=2009);null==c.allowReserved&&(c.allowReserved=5>c.ecmaVersion);if(C0(c.onToken)){var d=c.onToken;c.onToken=function(h){return d.push(h)}}C0(c.onComment)&&(c.onComment=RG(c,c.onComment));return c}function RG(g,c){return function(k,d,h,n,b,e){k={type:k?"Block":"Line",value:d,start:h,
end:n};g.locations&&(k.loc=new RD(this,b,e));g.ranges&&(k.range=[h,n]);c.push(k)}}function Gx(){this.shorthandAssign=this.trailingComma=this.parenthesizedAssign=this.parenthesizedBind=this.doubleProto=-1}function tB(g,c,k,d){g.type=c;g.end=k;this.options.locations&&(g.loc.end=d);this.options.ranges&&(g.range[1]=k);return g}function Lt(g){g=D0[g]={binary:$o(qga[g]+" Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu"),
nonBinary:{General_Category:$o("Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu"),
Script:$o(rga[g])}};g.nonBinary.Script_Extensions=g.nonBinary.Script;g.nonBinary.gc=g.nonBinary.General_Category;g.nonBinary.sc=g.nonBinary.Script;g.nonBinary.scx=g.nonBinary.Script_Extensions}function Hx(g){if(65535>=g)return String.fromCharCode(g);g-=65536;return String.fromCharCode((g>>10)+55296,(g&1023)+56320)}function Mv(g){return 36===g||40<=g&&43>=g||46===g||63===g||91<=g&&94>=g||123<=g&&125>=g}function mz(g){return 65<=g&&90>=g||97<=g&&122>=g||95===g}function Ix(g){return mz(g)||wi(g)}function wi(g){return 48<=
g&&57>=g}function lr(g){return 48<=g&&57>=g||65<=g&&70>=g||97<=g&&102>=g}function fn(g){return 65<=g&&70>=g?10+(g-65):97<=g&&102>=g?10+(g-97):g-48}function Nv(g){return"function"!==typeof BigInt?null:BigInt(g.replace(/_/g,""))}function Mt(g){if(65535>=g)return String.fromCharCode(g);g-=65536;return String.fromCharCode((g>>10)+55296,(g&1023)+56320)}function Ao(g){return"\u2716"===g.name}function ws(){}function Aa(g){return 14>g&&8<g||32===g||160===g||Kn(g)}function pq(g,c,k,d){var h=[];d=d||jf.walk.make(jf.custom.withMemberExpression);
Object.keys(jf.walk.base).forEach(function(n){var b=d[n];d[n]=function(e,l,a){jf.arr.pushIfNotIncluded(h,e);return b(e,l,a)}});d.Property=function(n,b,e){jf.arr.pushIfNotIncluded(h,n);e(n.key,b,"Expression");e(n.value,b,"Expression")};d.LabeledStatement=function(n,b,e){n.label&&e(n.label,b,"Expression");e(n.body,b,"Statement")};jf.walk.findNodeAround(g,c,k,d);return h}function Ul(g,c){function k(h){return null===h?null:d[h.type](h,k)}var d=jf.obj.extend({Program:function(h,n){return{start:h.start,
end:h.end,type:"Program",body:h.body.map(n),source:h.source,astIndex:h.astIndex}},FunctionDeclaration:function(h,n){return{start:h.start,end:h.end,type:"FunctionDeclaration",id:n(h.id),params:h.params.map(n),body:n(h.body),source:h.source,astIndex:h.astIndex}},BlockStatement:function(h,n){return{start:h.start,end:h.end,type:"BlockStatement",body:h.body.map(n),source:h.source,astIndex:h.astIndex}},ExpressionStatement:function(h,n){return{start:h.start,end:h.end,type:"ExpressionStatement",expression:n(h.expression),
source:h.source,astIndex:h.astIndex}},CallExpression:function(h,n){return{start:h.start,end:h.end,type:"CallExpression",callee:n(h.callee),arguments:h.arguments.map(n),source:h.source,astIndex:h.astIndex}},MemberExpression:function(h,n){return{start:h.start,end:h.end,type:"MemberExpression",object:n(h.object),property:n(h.property),computed:h.computed,source:h.source,astIndex:h.astIndex}},NewExpression:function(h,n){return{start:h.start,end:h.end,type:"NewExpression",callee:n(h.callee),arguments:h.arguments.map(n),
source:h.source,astIndex:h.astIndex}},VariableDeclaration:function(h,n){return{start:h.start,end:h.end,type:"VariableDeclaration",declarations:h.declarations.map(n),kind:h.kind,source:h.source,astIndex:h.astIndex}},VariableDeclarator:function(h,n){return{start:h.start,end:h.end,type:"VariableDeclarator",id:n(h.id),init:n(h.init),source:h.source,astIndex:h.astIndex}},FunctionExpression:function(h,n){return{start:h.start,end:h.end,type:"FunctionExpression",id:n(h.id),params:h.params.map(n),body:n(h.body),
source:h.source,astIndex:h.astIndex}},IfStatement:function(h,n){return{start:h.start,end:h.end,type:"IfStatement",test:n(h.test),consequent:n(h.consequent),alternate:n(h.alternate),source:h.source,astIndex:h.astIndex}},ConditionalExpression:function(h,n){return{start:h.start,end:h.end,type:"ConditionalExpression",test:n(h.test),consequent:n(h.consequent),alternate:n(h.alternate),source:h.source,astIndex:h.astIndex}},SwitchStatement:function(h,n){return{start:h.start,end:h.end,type:"SwitchStatement",
discriminant:n(h.discriminant),cases:h.cases.map(n),source:h.source,astIndex:h.astIndex}},SwitchCase:function(h,n){return{start:h.start,end:h.end,type:"SwitchCase",test:n(h.test),consequent:h.consequent.map(n),source:h.source,astIndex:h.astIndex}},BreakStatement:function(h,n){return{start:h.start,end:h.end,type:"BreakStatement",label:h.label,source:h.source,astIndex:h.astIndex}},ContinueStatement:function(h,n){return{start:h.start,end:h.end,type:"ContinueStatement",label:h.label,source:h.source,astIndex:h.astIndex}},
TryStatement:function(h,n){return{start:h.start,end:h.end,type:"TryStatement",block:n(h.block),handler:n(h.handler),finalizer:n(h.finalizer),guardedHandlers:h.guardedHandlers.map(n),source:h.source,astIndex:h.astIndex}},CatchClause:function(h,n){return{start:h.start,end:h.end,type:"CatchClause",param:n(h.param),guard:n(h.guard),body:n(h.body),source:h.source,astIndex:h.astIndex}},ThrowStatement:function(h,n){return{start:h.start,end:h.end,type:"ThrowStatement",argument:n(h.argument),source:h.source,
astIndex:h.astIndex}},ForStatement:function(h,n){return{start:h.start,end:h.end,type:"ForStatement",init:n(h.init),test:n(h.test),update:n(h.update),body:n(h.body),source:h.source,astIndex:h.astIndex}},ForInStatement:function(h,n){return{start:h.start,end:h.end,type:"ForInStatement",left:n(h.left),right:n(h.right),body:n(h.body),source:h.source,astIndex:h.astIndex}},WhileStatement:function(h,n){return{start:h.start,end:h.end,type:"WhileStatement",test:n(h.test),body:n(h.body),source:h.source,astIndex:h.astIndex}},
DoWhileStatement:function(h,n){return{start:h.start,end:h.end,type:"DoWhileStatement",test:n(h.test),body:n(h.body),source:h.source,astIndex:h.astIndex}},WithStatement:function(h,n){return{start:h.start,end:h.end,type:"WithStatement",object:n(h.object),body:n(h.body),source:h.source,astIndex:h.astIndex}},UnaryExpression:function(h,n){return{start:h.start,end:h.end,type:"UnaryExpression",argument:n(h.argument),operator:h.operator,prefix:h.prefix,source:h.source,astIndex:h.astIndex}},BinaryExpression:function(h,
n){return{start:h.start,end:h.end,type:"BinaryExpression",left:n(h.left),operator:h.operator,right:n(h.right),source:h.source,astIndex:h.astIndex}},LogicalExpression:function(h,n){return{start:h.start,end:h.end,type:"LogicalExpression",left:n(h.left),operator:h.operator,right:n(h.right),source:h.source,astIndex:h.astIndex}},AssignmentExpression:function(h,n){return{start:h.start,end:h.end,type:"AssignmentExpression",left:n(h.left),operator:h.operator,right:n(h.right),source:h.source,astIndex:h.astIndex}},
UpdateExpression:function(h,n){return{start:h.start,end:h.end,type:"UpdateExpression",argument:n(h.argument),operator:h.operator,prefix:h.prefix,source:h.source,astIndex:h.astIndex}},ReturnStatement:function(h,n){return{start:h.start,end:h.end,type:"ReturnStatement",argument:n(h.argument),source:h.source,astIndex:h.astIndex}},Identifier:function(h,n){return{start:h.start,end:h.end,type:"Identifier",name:h.name,source:h.source,astIndex:h.astIndex}},Literal:function(h,n){return{start:h.start,end:h.end,
type:"Literal",value:h.value,raw:h.raw,source:h.source,astIndex:h.astIndex}},ObjectExpression:function(h,n){return{start:h.start,end:h.end,type:"ObjectExpression",properties:h.properties.map(function(b){return{key:n(b.key),value:n(b.value),kind:b.kind}}),source:h.source,astIndex:h.astIndex}},ArrayExpression:function(h,n){return{start:h.start,end:h.end,type:"ArrayExpression",elements:h.elements.map(n),source:h.source,astIndex:h.astIndex}},SequenceExpression:function(h,n){return{start:h.start,end:h.end,
type:"SequenceExpression",expressions:h.expressions.map(n),source:h.source,astIndex:h.astIndex}},EmptyStatement:function(h,n){return{start:h.start,end:h.end,type:"EmptyStatement",source:h.source,astIndex:h.astIndex}},ThisExpression:function(h,n){return{start:h.start,end:h.end,type:"ThisExpression",source:h.source,astIndex:h.astIndex}},DebuggerStatement:function(h,n){return{start:h.start,end:h.end,type:"DebuggerStatement",source:h.source,astIndex:h.astIndex}},LabeledStatement:function(h,n){return{start:h.start,
end:h.end,type:"LabeledStatement",label:h.label,body:n(h.body),source:h.source,astIndex:h.astIndex}}},c||{});return k(g)}function qq(g,c,k){if(!c)return[];g=jf.findNodesIncluding(g,c.start);var d=g.indexOf(c);g=g.slice(0,d);g=jf.arr.detect(g.reverse(),function(h){return Array.isArray(h.body)}).body;if(!k)return jf.arr.without(g,c);c=g.indexOf(c);return"before"===k?g.slice(0,c):g.slice(c+1)}function Nt(g,c,k){g.astIndex||null!=k&&!k||jf.addAstIndex(g);var d=null;jf.withMozillaAstDo(g,null,function(h,
n,b){d||n.astIndex<c||(n.astIndex===c?d=n:h())});return d}function ye(g,c,k){k||(k=c,c=g,g=null);g||(g={});c.astIndex||jf.addAstIndex(c);var d,h=!1,n="EmptyStatement BlockStatement ExpressionStatement IfStatement LabeledStatement BreakStatement ContinueStatement WithStatement SwitchStatement ReturnStatement ThrowStatement TryStatement WhileStatement DoWhileStatement ForStatement ForInStatement DebuggerStatement FunctionDeclaration VariableDeclaration ClassDeclaration".split(" ");jf.withMozillaAstDo(c,
{},function(b,e,l,a){if(!(h||e.astIndex<k.astIndex)){if(e===k||e.astIndex===k.astIndex)if(h=!0,g.asPath)d=a;else{e=jf.Path(a);do d=e.get(c),e=e.slice(0,e.size()-1);while(-1==n.indexOf(d.type)&&0<e.size())}!h&&b()}});return d}function tf(g){jf.withMozillaAstDo(g,{index:0},function(c,k,d){c();k.astIndex=d.index++});return g}function Wa(g,c){"string"===typeof g&&(c=g,g=Ph.parse(g));c&&Ph.AllNodesVisitor.run(g,function(k,d,h){return!k.source&&(k.source=c.slice(k.start,k.end))});return g}function Cl(g,
c){c=void 0===c?{}:c;var k=Ph.parse("("+g+")",c);Ph.AllNodesVisitor.run(k,function(d,h,n){if(!d._positionFixed){d._positionFixed=!0;if(d.start||0===d.start)d.start+=-1,d.end+=-1;c.addSource&&!d.source&&(d.source=g.slice(d.start,d.end))}});return k.body[0].expression}function gn(g,c){c=c||{};c.ecmaVersion=c.ecmaVersion||11;c.sourceType=c.sourceType||"module";c.plugins=c.plugins||{};c.plugins.jsx=c.plugins.hasOwnProperty("jsx")?c.plugins.jsx:!0;c.plugins.asyncawait=c.plugins.hasOwnProperty("asyncawait")?
c.plugins.asyncawait:{inAsyncFunction:!0};c.plugins.objectSpread=c.plugins.hasOwnProperty("objectSpread")?c.plugins.objectSpread:!0;var k;"LabeledStatement"===c.type&&(k="$={"+g+"}");try{var d=Ph.parse(k||g,c);k?d=null:c.addSource&&Ph.addSource(d,g)}catch(n){var h=n}h&&void 0!==h.raisedAt?(k&&(h.pos-=3,h.raisedAt-=3,h.loc.column-=3),k=""+g.slice(h.raisedAt-20,h.raisedAt),k=k+"<-error->"+g.slice(h.raisedAt,h.raisedAt+20),c.verbose&&console.log("parse error: "+k),h.parseErrorSource=k):h&&c.verbose&&
console.log(""+h+h.stack);d||(d=Ph.loose.parse(g,c),c.addSource&&Ph.addSource(d,g),d.isFuzzy=!0,d.parseError=h);return d}function Xk(g,c){function k(m){m=h(d(m));b.allComments=m.comments}function d(m){n.forEach(function(r){var v=Ph.arr.detect(Ph.nodesAt(r.start,b).reverse(),function(x){return"BlockStatement"===x.type||"Program"===x.type});v||(v=b);v.comments||(v.comments=[]);v.comments.push(r);m.nodesWithComments.push(v)});return m}function h(m){m.nodesWithComments.forEach(function(r){Ph.arr.clone(r.comments).reduce(function(v,
x){if(x.isBlock)return v.lastComment=null,v;if(!v.lastComment)return v.lastComment=x,v;var y=v.lastComment;if(Ph.arr.detect(r.body,function(F){return F.start>=y.end&&F.end<=x.start}))return v.lastComment=x,v;var E=g.slice(y.end,x.start);if(/[\n\r][\n\r]+/.test(E))return v.lastComment=x,v;y.text+="\n"+x.text;y.end=x.end;Ph.arr.remove(r.comments,x);Ph.arr.remove(m.comments,x);return v},{lastComment:null})});return m}c=c||{};c.ecmaVersion=c.ecmaVersion||11;c.allowAwaitOutsideFunction=!0;c.sourceType=
c.sourceType||"module";c.hasOwnProperty("allowImportExportEverywhere")||(c.allowImportExportEverywhere=!0);c.plugins=c.plugins||{};c.plugins.jsx=c.plugins.hasOwnProperty("jsx")?c.plugins.jsx:!0;c.plugins.asyncawait=c.plugins.hasOwnProperty("asyncawait")?c.plugins.asyncawait:{inAsyncFunction:!0};c.plugins.objectSpread=c.plugins.hasOwnProperty("objectSpread")?c.plugins.objectSpread:!0;if(c.withComments){delete c.withComments;var n=[];c.onComment=function(m,r,v,x,y,E){n.push({isBlock:m,text:r,node:null,
start:v,end:x,line:y,column:E})}}try{var b=Ph.acorn.parse(g,c)}catch(m){if("undefined"!==typeof SyntaxError&&m instanceof SyntaxError&&m.loc){var e=g.split("\n"),l=m,a=l.loc;c=a.line;a=a.column;var f=l.pos;e=e[c-1];l="Syntax error at line "+c+" column "+a+" (index "+f+') "'+l.message+'"\nsource: '+e.slice(0,a)+"<--SyntaxError--\x3e"+e.slice(a);l=new SyntaxError(l);l.loc={line:c,column:a};l.pos=f;throw l;}throw m;}c.addSource&&Ph.addSource(b,g);c.addAstIndex&&!b.hasOwnProperty("astIndex")&&Ph.addAstIndex(b);
b&&n&&k({ast:b,comments:n,nodesWithComments:[]});return b}function nz(g){return cf.identifierRe.test(g)&&-1===g.indexOf("-")}function oz(g){return"this"===g?{type:"ThisExpression"}:{name:String(g),type:"Identifier"}}function pz(g){return{type:"Literal",value:g}}function xs(g){return{type:"ExpressionStatement",expression:g}}function Mj(g){return{type:"ReturnStatement",argument:g}}function rq(){return{type:"EmptyStatement"}}function sl(g,c,k){return{left:g,right:k,operator:c,type:"BinaryExpression"}}
function sq(g,c,k){for(var d=[],h=2;h<arguments.length;++h)d[h-2]=arguments[h];h=g.arrow;var n=g.id,b=g.expression,e=g.generator;c=void 0===c?[]:c;c=c.map(function(l){return"string"===typeof l?cf.id(l):l});return{type:(h?"Arrow":"")+"FunctionExpression",id:n?"string"===typeof n?cf.id(n):n:void 0,params:c,body:b&&1===d.length?d[0]:{body:d,type:"BlockStatement"},expression:b||!1,generator:e||!1}}function Bo(g,c){for(var k=[],d=1;d<arguments.length;++d)k[d-1]=arguments[d];"string"===typeof g&&(g=cf.id(g));
return{type:"CallExpression",callee:g,arguments:k}}function Ov(g,c,k){"string"===typeof g&&(g={name:g,type:"Identifier"});return{type:"VariableDeclaration",kind:k||"var",declarations:[{type:"VariableDeclarator",id:g,init:c}]}}function Em(g,c,k){"string"===typeof g&&(g=cf.id(g));"string"===typeof c?(k||cf.isIdentifier(c)||(k=!0),c=k?cf.literal(c):cf.id(c)):"number"===typeof c?(c=cf.literal(c),k=!0):"Literal"===c.type&&(k=!0);return{type:"MemberExpression",computed:!!k,object:g,property:c}}function Jx(g,
c){for(var k=[],d=1;d<arguments.length;++d)k[d-1]=arguments[d];return k.reduce(function(h,n){return cf.member(h,n)},"object"===typeof g?g:cf.id(g))}function Ln(g,c){return{type:"AssignmentExpression",operator:"=",right:c?"string"===typeof c?cf.id(c):c:cf.id("undefined"),left:"string"===typeof g?cf.id(g):g}}function pm(g){for(var c=[],k=0;k<arguments.length;++k)c[k-0]=arguments[k];return{body:Array.isArray(c[0])?c[0]:c,type:"BlockStatement"}}function Ot(g){for(var c=[],k=0;k<arguments.length;++k)c[k-
0]=arguments[k];return Object.assign(cf.block.apply(cf,$jscomp.arrayFromIterable(c)),{sourceType:"module",type:"Program"})}function Pt(g,c,k,d){for(var h=[],n=3;n<arguments.length;++n)h[n-3]=arguments[n];Array.isArray(k)||(h.unshift(k),k=null);return{block:cf.block(h),finalizer:k?cf.block(k):null,handler:{body:cf.block(c),param:cf.id(g),type:"CatchClause"},type:"TryStatement"}}function uB(g,c){return{type:"Property",key:g,computed:"Identifier"!==g.type,shorthand:!1,value:c}}function vB(g){for(var c=
[],k=0;k<g.length;k+=2){var d=g[k];"string"===typeof d&&(d=cf.id(d));c.push(cf.prop(d,g[k+1]))}return{properties:c,type:"ObjectExpression"}}function SD(g,c,k){c=void 0===c?cf.block():c;k=void 0===k?cf.block():k;return{consequent:c,alternate:k,test:g,type:"IfStatement"}}function Ni(g,c,k){return{type:"ForInStatement",left:"string"===typeof g?cf.varDecl(g):g,right:"string"===typeof c?cf.id(c):c,body:k}}function TD(g,c,k){c=void 0===c?cf.id("undefined"):c;k=void 0===k?cf.id("undefined"):k;return{consequent:c,
alternate:k,test:g,type:"ConditionalExpression"}}function UD(g,c,k){return{operator:g,left:c,right:k,type:"LogicalExpression"}}function mr(g){var c=new Od.ScopeVisitor,k=c.newScope(g,null);c.accept(g,k,[]);return k}function VD(g,c){return Od.withMozillaAstDo(g,[],function(k,d,h){d.start<=c&&c<=d.end&&(h.push(d),k());return h})}function ys(g,c){return Od.tree.filter(Od.scopes(g),function(k){k=k.node;var d=k.start,h=k.end;"FunctionDeclaration"===k.type&&(d=k.params.length?k.params[0].start:k.body.start,
h=k.body.end);return d<=c&&c<=h},function(k){return k.subScopes})}function tq(g,c){return Od.arr.last(Od.scopesAtIndex(g,c))}function zs(g,c){return Od.arr.filter(Od.nodesAt(g,c),function(k){return"Program"===k.type||"FunctionDeclaration"===k.type||"FunctionExpression"===k.type})}function Ep(g){return Od.withMozillaAstDo(g,{root:g,result:[]},function(c,k,d){d.result.push(k);if(k!==d.root&&("Program"===k.type||"FunctionDeclaration"===k.type||"FunctionExpression"===k.type))return d;c();return d}).result}
function Fm(g,c,k){k=void 0===k?[]:k;c&&g.node.id&&g.node.id.name&&k.push(g.node.id);Od.helpers.declIds(g.params,k);for(c=0;c<g.funcDecls.length;c++){var d=g.funcDecls[c].id;d&&k.push(d)}Od.helpers.varDeclIds(g,k);k.push.apply(k,$jscomp.arrayFromIterable(g.catches));for(c=0;c<g.classDecls.length;c++)(d=g.classDecls[c].id)&&k.push(d);k.push.apply(k,$jscomp.arrayFromIterable(g.importSpecifiers));return Od.arr.compact(k)}function WD(g,c){for(var k=[],d=$jscomp.makeIterator(Od.declarationsOfScope(g,!0)),
h=d.next();!h.done;h=d.next())k.push(h.value.name);c&&Od._findJsLintGlobalDeclarations("Program"===g.node.type?g.node:g.node.body,k);return k}function Mn(g,c){c=void 0===c?[]:c;if(!g||!g.comments)return c;g=$jscomp.makeIterator(g.comments);for(var k=g.next();!k.done;k=g.next())if(k=k.value.text.trim(),k.startsWith("global")){k=$jscomp.makeIterator(k.replace(Od.globalDeclRe,"").split(","));for(var d=k.next();!d.done;d=k.next())c.push(d.value.trim())}return c}function Hk(g){return Od.FindToplevelFuncDeclVisitor.run(g)}
function XD(g,c){if(0==c.length)return[null,null];var k=$jscomp.makeIterator(c);c=k.next().value;k=$jscomp.arrayFromIterator(k);var d=c.decls||Od.declarationsWithIdsOfScope(c);c.decls=d;return d.find(function(h){h=$jscomp.makeIterator(h);h.next();return h.next().value.name==g})||XD(g,k)}function Qt(g){function c(d,h){var n=[d].concat(h);d.refs.forEach(function(b){var e=$jscomp.makeIterator(Od.resolveReference(b.name,n)),l=e.next().value;e=e.next().value;k.set(b,{decl:l,declId:e,ref:b})});d.subScopes.forEach(function(b){return c(b,
n)})}if(g.referencesResolvedSafely)return g;var k=g.resolvedRefMap||(g.resolvedRefMap=new Map);c(g,[]);g.referencesResolvedSafely=!0;return g}function qz(g,c){c=$jscomp.makeIterator(c.resolvedRefMap.values());for(var k=c.next();!k.done;k=c.next()){k=k.value;var d=k.ref,h=d.end;if(d.start<=g&&g<=h)return k}}function Rt(g,c){function k(b){var e=Od._declaredVarNames(b,d);return Od.arr.filter(b.subScopes.map(k).reduce(function(l,a){return l.concat(a)},b.refs),function(l){return-1===e.indexOf(l.name)})}
c=c||{};c.withComments=!0;"string"===typeof g&&(g=Od.parse(g,c));g=Od.scopes(g);var d=!!c.jslintGlobalComment;c=Od._declaredVarNames(g,d);var h=g.refs.concat(Od.arr.flatten(g.subScopes.map(k))),n=Od.arr.withoutAll(h.map(function(b){return b.name}),c);return{scope:g,varDecls:g.varDecls,funcDecls:Od.arr.filter(g.funcDecls,function(b){return b.id}),classDecls:Od.arr.filter(g.classDecls,function(b){return b.id}),declaredNames:c,undeclaredNames:n,refs:h,thisRefs:g.thisRefs}}function ap(g,c){g=Od.topLevelDeclsAndRefs(g,
c);var k=g.declaredNames.concat(Od.knownGlobals);return Od.arr.filter(g.refs,function(d){return-1===k.indexOf(d.name)})}function As(g,c,k,d){if(!c&&!g)throw Error("Need at least ast or code");c=c||Od.stringify(g);g=g&&g.loc?g:Od.parse(c,{locations:!0});return Od.withMozillaAstDo(g,[],function(h,n,b){k.every(function(e){return Od.num.between(e,n.loc.start.line,n.loc.end.line)})&&(Od.arr.pushIfNotIncluded(b,n),h());return b})}function Pv(g,c,k,d){k=void 0===k?!0:k;d=void 0===d?{refs:[],decls:[]}:d;
if("this"===c)return d.refs.push.apply(d.refs,$jscomp.arrayFromIterable(g.thisRefs)),d;var h=Od.__varDeclIdsFor(g,c);if(!k&&h.length)return d;k=$jscomp.makeIterator(g.refs);for(var n=k.next();!n.done;n=k.next())n=n.value,n.name===c&&d.refs.push(n);d.decls.push.apply(d.decls,$jscomp.arrayFromIterable(h));g=$jscomp.makeIterator(g.subScopes);for(h=g.next();!h.done;h=g.next())Pv(h.value,c,!1,d);return d}function wB(g,c,k){var d=null;Od.arr.detect(Od.scopesAtIndex(g,k).reverse(),function(h){h=Od.declarationsOfScope(h,
!0);var n=Od.arr.pluck(h,"name").indexOf(c);if(-1===n)return!1;d=h[n];return!0});return d}function hn(g,c){c="string"===typeof c?Od.parse(c):c;return Od.custom.findNodesIncluding(c,g)}function nr(g,c,k){var d=Od.nodesAt(c.start,g).reverse().find(function(n){return Od.arr.include(Od._stmtTypes,n.type)});if(k&&k.asPath){c=new Od.BaseVisitor;var h;c.accept=Od.fun.wrap(c.accept,function(n,b,e,l){if(b===d)throw h=l,Error("stop search");return n(b,e,l)});try{c.accept(g,{},[])}catch(n){}return h}return d}
function YD(g){var c=[];g=g.node.body||[];for(var k=0;k<g.length;k++){var d=g[k];if("ImportDeclaration"===d.type)if(0===d.specifiers.length)c.push({local:null,imported:null,fromModule:d.source.value,node:d});else{var h=d.source?d.source.value:"unknown module";c.push.apply(c,$jscomp.arrayFromIterable(d.specifiers.map(function(n){return{local:n.local?n.local.name:null,imported:"ImportNamespaceSpecifier"===n.type?"*":"ImportDefaultSpecifier"===n.type?"default":"ImportSpecifier"===n.type?n.imported.name:
null,fromModule:h,node:d}})))}}return c}function ZD(g,c){(void 0===c?0:c)&&Od.resolveReferences(g);c=[];for(var k={},d=$jscomp.makeIterator(g.exportDecls),h=d.next();!h.done;k={$jscomp$loop$prop$node$2645:k.$jscomp$loop$prop$node$2645},h=d.next()){k.$jscomp$loop$prop$node$2645=h.value;var n=Od.statementOf(g.node,k.$jscomp$loop$prop$node$2645);if(n){var b=n.source?n.source.value:null;"ExportAllDeclaration"===n.type?c.push({local:null,exported:"*",imported:"*",fromModule:b,node:k.$jscomp$loop$prop$node$2645,
type:"all"}):"ExportDefaultDeclaration"===n.type?Od.helpers.isDeclaration(n.declaration)?c.push({local:n.declaration.id?n.declaration.id.name:null,exported:"default",type:"FunctionDeclaration"===n.declaration.type?"function":"ClassDeclaration"===n.declaration.type?"class":null,fromModule:null,node:k.$jscomp$loop$prop$node$2645,decl:n.declaration,declId:n.declaration.id}):"Identifier"===n.declaration.type?(h=g.resolvedRefMap.get(n.declaration)||{},c.push({local:n.declaration.name,exported:"default",
fromModule:null,node:k.$jscomp$loop$prop$node$2645,type:"id",decl:h.decl,declId:h.declId})):c.push({local:null,exported:"default",fromModule:null,node:k.$jscomp$loop$prop$node$2645,type:"expr",decl:n.declaration,declId:n.declaration}):n.specifiers&&n.specifiers.length?c.push.apply(c,$jscomp.arrayFromIterable(n.specifiers.map(function(e){return function(l){if(b){var a=e.$jscomp$loop$prop$node$2645;var f=l.exported}else l.local&&(a=(f=g.resolvedRefMap.get(l.local))?f.decl:null,f=f?f.declId:null);return{local:!b&&
l.local?l.local.name:null,exported:l.exported?l.exported.name:null,imported:b&&l.local?l.local.name:null,fromModule:b||null,type:"id",node:e.$jscomp$loop$prop$node$2645,decl:a,declId:f}}}(k)))):n.declaration&&n.declaration.declarations?c.push.apply(c,$jscomp.arrayFromIterable(n.declaration.declarations.map(function(e){return function(l){return{local:l.id?l.id.name:"default",exported:l.id?l.id.name:"default",type:n.declaration.kind,fromModule:null,node:e.$jscomp$loop$prop$node$2645,decl:l,declId:l.id}}}(k)))):
n.declaration&&c.push({local:n.declaration.id?n.declaration.id.name:"default",exported:n.declaration.id?n.declaration.id.name:"default",type:"FunctionDeclaration"===n.declaration.type?"function":"ClassDeclaration"===n.declaration.type?"class":null,fromModule:null,node:k.$jscomp$loop$prop$node$2645,decl:n.declaration,declId:n.declaration.id})}}return Od.arr.uniqBy(c,function(e,l){return e.local==l.local&&e.exported==l.exported&&e.fromModule==l.fromModule})}function Kx(g){return(new or.ObjectSpreadTransformer).accept(g,
{},[])}function uq(g,c){if(g.start===c.start&&g.end===c.end)return 0;if(g.end<=c.start)return-1;if(g.start>=c.end||g.start<=c.start&&g.end>=c.end)return 1;if(c.start<=g.start&&c.end>=g.end)return-1;throw Error("Comparing nodes");}function rz(g,c,k){k="object"===typeof k?k:{changes:[],source:k};var d=!1,h=k.changes.reduce(function(b,e){if(b.end<e.pos)return b;var l=e.pos<b.start;d=d||e.pos>=b.start&&e.pos<=b.end;if("add"===e.type)return{start:l?b.start+e.string.length:b.start,end:b.end+e.string.length};
if("del"===e.type)return{start:l?b.start-e.length:b.start,end:b.end-e.length};throw Error("Cannot deal with change "+qe.obj.inspect(e));},{start:g.start,end:g.end}),n=k.source;g=c(g,n.slice(h.start,h.end),d);g="string"===typeof g?g:Array.isArray(g)?g.map(qe._node2string).join("\n"+qe._findIndentAt(n,h.start)):g=qe._node2string(g);h=[{type:"del",pos:h.start,length:h.end-h.start},{type:"add",pos:h.start,string:g}];return{changes:k.changes.concat(h),source:qe._applyChanges(h,n)}}function Qv(g,c){g=g.sort(function(h,
n){return qe._compareNodesForReplacement(h.target,n.target)});c="object"===typeof c?c:{changes:[],source:c};for(var k=0;k<g.length;k++){var d=g[k];c=qe.replaceNode(d.target,d.replacementFunc,c)}return c}function sz(g,c,k,d){d="object"===typeof g?g:null;g="string"===typeof g?g:d.source||qe._node2string(d);return qe.replaceNode(c,k,g)}function VK(g,c){c=void 0===c?[]:c;c.push.apply(c,$jscomp.arrayFromIterable(g.varDecls));g=$jscomp.makeIterator(g.subScopes);for(var k=g.next();!k.done;k=g.next())VK(k.value,
c);return c}function xB(g){var c="object"===typeof g?g:qe.parse(g);g="string"===typeof g?g:c.source||qe._node2string(c);c=qe.scopes(c);var k=qe.__findVarDecls(c);c=[];k=$jscomp.makeIterator(k);for(var d=k.next();!d.done;d=k.next())c.push({target:d.value,replacementFunc:function(h,n,b){b&&(h=qe.parse(n).body[0]);return h.declarations.map(function(e){return{type:"VariableDeclaration",kind:"var",declarations:[e]}})}});return qe.replaceNodes(c,g)}function St(g){var c="object"===typeof g?g:qe.parse(g);
g="string"===typeof g?g:c.source||qe._node2string(c);c=qe.scopes(c);var k=qe.__findVarDecls(c);c=[];k=$jscomp.makeIterator(k);for(var d=k.next();!d.done;d=k.next())c.push({target:d.value,replacementFunc:function(h,n,b){b&&(h=qe.parse(n).body[0]);n=[];h=$jscomp.makeIterator(h.declarations);for(b=h.next();!b.done;b=h.next()){var e=b.value;b={type:"Identifier",name:"__temp"};n.push({type:"VariableDeclaration",kind:"var",declarations:[{type:"VariableDeclarator",id:b,init:e.init}]});e=$jscomp.makeIterator(qe.helpers.objPropertiesAsList(e.id,
[],!1));for(var l=e.next();!l.done;l=e.next())l=l.value.key,n.push(qe.varDecl(l[l.length-2],qe.memberChain.apply(qe,[b.name].concat($jscomp.arrayFromIterable(l))),"var"))}return n}});return qe.replaceNodes(c,g)}function Tt(g,c){c=c||{};var k=qe.parse(g,c),d=qe.arr.last(k.body);if("ExpressionStatement"!==d.type)return c.asAST?k:g;k.body.splice(k.body.length-1,1,qe.returnStmt(d.expression));return c.asAST?k:qe.stringify(k)}function Rv(g,c){c=c||{};g=qe.returnLastStatement(g,c);return c.asAST?qe.program(qe.funcExpr.apply(qe,
[{id:c.id||void 0},[]].concat($jscomp.arrayFromIterable(g.body)))):"function"+(c.id?" "+c.id:"")+"() {\n"+g+"\n}"}function pr(g,c){"string"===typeof g&&(g=qe.parse(g));c=c||{};var k="Program"===g.type,d=c.startFuncNode||qe.id("__start_execution");c=c.endFuncNode||qe.id("__end_execution");var h=qe.topLevelFuncDecls(g),n=g.body,b=[];h.forEach(function(e){var l=e.node;qe.Path(e.path).set(g,qe.exprStmt(l.id));b.push(l)});n.unshift(qe.exprStmt(qe.funcCall(d)));d=qe.arr.last(n);"ExpressionStatement"===
d.type?(n.pop(),n.push(qe.exprStmt(qe.funcCall(c,qe.id("null"),d.expression)))):"VariableDeclaration"===d.type&&"Identifier"===qe.arr.last(d.declarations).id.type?n.push(qe.exprStmt(qe.funcCall(c,qe.id("null"),qe.arr.last(d.declarations).id))):n.push(qe.exprStmt(qe.funcCall(c,qe.id("null"),qe.id("undefined"))));b.push(qe.tryStmt.apply(qe,["err",[qe.exprStmt(qe.funcCall(c,qe.id("err"),qe.id("undefined")))]].concat($jscomp.arrayFromIterable(n))));return k?qe.program.apply(qe,$jscomp.arrayFromIterable(b)):
qe.block.apply(qe,$jscomp.arrayFromIterable(b))}function $D(g){if(!qe.isProbablySingleExpressionRe.test(g)||30<g.split("\n").length)return g;try{var c=qe.fuzzyParse(g);1===c.body.length&&("FunctionDeclaration"===c.body[0].type||"BlockStatement"===c.body[0].type&&"LabeledStatement"===c.body[0].body[0].type)&&(g="("+g.replace(/;\s*$/,"")+")")}catch(k){"undefined"!==typeof $world?$world.logError(k):console.error("Eval preprocess error: %s",k.stack||k)}return g}function bp(g,c){var k=dg.statementOf(g,
c,{asPath:!0}).slice(0,-2);k=dg.Path(k).get(g);return k.comments&&k.comments.length?dg.chain(dg.extractComments(g)).reversed().detect(function(d){return d.followingNode===c}).value():null}function Ut(g,c){function k(v){return dg.arr.detect(v.node.body,function(x){return x.start>v.comment.end})}function d(v){return{type:"unknown",comment:v.comment.text}}function h(v){v=dg.Path(v.path.slice(0,-1)).get(f);return{name:v.id?v.id.name:"<error: no name for function>",args:dg.arr.pluck(v.params,"name")}}
function n(v){for(var x=dg.Path(v.path.slice(0,-2)).get(f),y=x.key?x.key.name:"<error: no name for method>",E=v.path.slice(),F="<error: no object found for method>";E.length&&"init"!==dg.arr.last(E);)E.pop();E.length&&(F=dg.Path(E.slice(0,-1).concat(["id","name"])).get(f));if(dg.string.startsWith(F,"<error")){for(E=v.path.slice();E.length&&"right"!==dg.arr.last(E);)E.pop();E.length&&(F=dg.Path(E.slice(0,-1).concat(["left"])).get(f),F=m.slice(F.start,F.end))}dg.string.startsWith(F,"<error")&&(E=v.path.slice(),
(v=(v=dg.Path(E.slice(0,-6)).get(f))&&"CallExpression"===v.type&&v.arguments[0])&&(F=m.slice(v.start,v.end)));return{name:y,args:dg.arr.pluck(x.value.params,"name"),objectName:F}}function b(v){v=dg.Path(v.path.slice(0,-1)).get(f);if("FunctionExpression"!==v.type&&"FunctionDeclaration"!==v.type)return{};var x=dg.statementOf(f,v);if("ExpressionStatement"!==x.type||"AssignmentExpression"!==x.expression.type)return{};var y=m.slice(x.expression.left.object.start,x.expression.left.object.end);return{name:m.slice(x.expression.left.property.start,
x.expression.left.property.end),objectName:y,args:dg.arr.pluck(v.params,"name")}}function e(v){var x=v.path.slice(0,-3);var y=dg.Path(x).get(f);if(y&&"Property"===y.type){var E=dg.arr.pluck(y.value.callee.params,"name");var F=y.key?y.key.name:"<error: no name for method>"}F||(x=v.path.slice(0,-2),(y=dg.Path(x).get(f))&&"Property"===y.type&&(E=dg.arr.pluck(y.value.params,"name"),F=y.key?y.key.name:"<error: no name for method>"));F||(F="<error: no name for method>",E=[],x=v.path);y=dg.arr.clone(x);
for(v="<error: no object found for method>";y.length&&"init"!==dg.arr.last(y);)y.pop();y.length&&(v=dg.Path(y.slice(0,-1).concat(["id","name"])).get(f));if(dg.string.startsWith(v,"<error")){for(y=dg.arr.clone(x);y.length&&"right"!==dg.arr.last(y);)y.pop();y.length&&(v=dg.Path(y.slice(0,-1).concat(["left"])).get(f),v=m.slice(v.start,v.end))}dg.string.startsWith(v,"<error")&&(y=dg.arr.clone(x),(x=(x=dg.Path(y.slice(0,-4)).get(f))&&"CallExpression"===x.type&&x.arguments[0])&&(v=m.slice(x.start,x.end)));
return{name:F,args:E,objectName:v}}function l(v){return v&&"VariableDeclaration"===v.type&&1===v.declarations.length}function a(v){return"AssignmentExpression"!==v.type?!1:"ObjectExpression"===v.right.type?!0:"AssignmentExpression"===v.right.type?a(v.right):!1}var f="string"===typeof g?dg.parse(g,{withComments:!0}):g,m=c||("string"===typeof g?g:dg.stringify(g)),r=dg.arr.sortBy(function(v){var x=[],y=new dg.Visitor;y.accept=dg.fun.wrap(y.accept,function(E,F,I,J){F.comments&&dg.arr.pushAll(x,F.comments.map(function(P){return{path:J,
comment:P,node:F}}));return E(F,I,J)});y.accept(v,x,[]);return x}(f),function(v){return v.comment.start});return r.map(function(v,x){if(dg.arr.equals(v.path.slice(-2),["value","body"]))return dg.obj.merge([v,v.comment,{type:"method",comment:v.comment.text},n(v)]);var y=v.path.slice(-5);dg.arr.removeAt(y,1);if(dg.arr.equals(y,["properties","value","callee","body"]))return dg.obj.merge([v,v.comment,{type:"method",comment:v.comment.text},e(v)]);if((y=dg.Path(v.path.slice(0,-1)).get(f))&&"FunctionDeclaration"===
y.type)return dg.obj.merge([v,v.comment,{type:"function",comment:v.comment.text},h(v)]);if(dg.arr.equals(v.path.slice(-2),["right","body"]))return dg.obj.merge([v,v.comment,{type:"method",comment:v.comment.text},b(v)]);y=k(v);return y?(x=r[x+1])&&x.comment.start<=y.start?dg.obj.merge([v,v.comment,{followingNode:y},d(v)]):l(y)&&("ObjectExpression"===y.declarations[0].init.type||a(y.declarations[0].init))?dg.obj.merge([v,v.comment,{followingNode:y},{type:"object",comment:v.comment.text},{name:y.declarations[0].id.name}]):
l(y)?dg.obj.merge([v,v.comment,{followingNode:y},{type:"var",comment:v.comment.text},{name:y.declarations[0].id.name}]):dg.obj.merge([v,v.comment,{followingNode:y},d(v)]):dg.obj.merge([v,v.comment,{followingNode:y},d(v)])})}function Vt(g,c){c=c||gi.obj.merge({hideOneLiners:!1},c);"string"===typeof g&&(g=gi.parse(g,{addSource:!0}));for(var k=[],d=$jscomp.makeIterator("Program"===g.type?g.body:g.body.body),h=d.next();!h.done;h=d.next()){h=h.value;h=gi.unwrapExport(h);var n=gi.functionWrapper(h,c)||
gi.varDefs(h)||gi.funcDef(h)||gi.es6ClassDef(h)||gi.someObjectExpressionCall(h);if(n){if(c.hideOneLiners)if(g.loc)n=gi.arr.filter(n,function(e){return!e.node.loc||e.node.loc.start.line!==e.node.loc.end.line});else if(g.source){h=[];n=$jscomp.makeIterator(n);for(var b=n.next();!b.done;b=n.next())b=b.value,(b.parent&&h.includes(b.parent)||(b.node.source||"").includes("\n"))&&h.push(b);n=h}k.push.apply(k,$jscomp.arrayFromIterable(n))}}return k}function Wt(g){return gi.arr.flatmap(g,function(c){return c?
"Identifier"===c.type?[c]:"RestElement"===c.type?[c.argument]:"ObjectPattern"===c.type?Wt(gi.arr.pluck(c.properties,"value")):"ArrayPattern"===c.type?Wt(c.elements):[]:[]})}function Fp(g){return wg.isValidIdentifierRe.test(g)}function qr(){return"undefined"!==typeof System?System.global:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof Global?Global:"undefined"!==typeof self?self:function(){return this}()}function Xt(g,c){c=String(c).match(/function\s*[a-zA-Z0-9_$]*\s*\(([^\)]*)\)/);
return g+"("+(c&&c[1]||"")+")"}function tz(g){return g===g||g===Array||g===Function||g===String||g===Boolean||g===Date||g===RegExp||g===Number||g===Promise?!0:g instanceof Function&&(void 0!==g.superclass||void 0!==g._superclass)}function Gm(g,c){return g.map(function(k){return k[c]})}function yB(g){if(Symbol.keyFor(g))return'Symbol.for("'+Symbol.keyFor(g)+'")';if(hi.knownSymbols.get(g))return hi.knownSymbols.get(g);String(g).match(hi.symMatcher);return String(g)}function Yt(g){if(!g)return String(g);
if(Array.isArray(g))return"["+g.map(Yt).join(",")+"]";if("symbol"===typeof g)return hi.printSymbol(g);try{return String(g)}catch(c){throw Error("Cannot print object: "+c.stack);}}function uz(g,c){c=void 0===c?{}:c;var k=g.value,d=g.isPromise,h=g.promisedValue,n=g.promiseStatus;return g.isError||k instanceof Error?(c=String(k),(h=k.stack||"")&&k.message!==k.stack&&(h=String(h),0===h.indexOf(c)&&(h=h.slice(c.length)),c+="\n"+h),c):d?(g=hi.string.print(n),c="pending"===n?void 0:uz({value:h},c),"Promise({status: "+
g+", "+(void 0===k?"":"value: "+c)+"})"):k instanceof Promise?'Promise({status: "unknown"})':c.inspect?hi.printInspectEvalValue(k,c.inspectDepth||2):String(k)}function Hm(g,c){var k="";return Promise.resolve().then(function(){var d=c.lastIndexOf(".");0<=d?(k=c.slice(d+1),c=c.slice(0,d)):(k=c,c='(typeof window === "undefined" ? global : window)');return g(c)}).then(function(d){return{evalResult:d,startLetters:k,code:c}})}function Lx(g,c,k){g=Vi.getObjectForCompletion(g,c).then(function(d){var h=d.evalResult;
d={completions:Vi.descriptorsOfObjAndProtoProperties(h&&h.isEvalResult?h.value:h),startLetters:d.startLetters,code:d.code};h&&h.isPromise&&("fulfilled"===h.promiseStatus?d.promiseResolvedCompletions=Vi.descriptorsOfObjAndProtoProperties(h.promisedValue):"rejected"===h.promiseStatus&&(d.promiseRejectedCompletions=Vi.descriptorsOfObjAndProtoProperties(h.promisedValue)));return d});"function"===typeof k&&g.then(function(d){return k(null,d)}).catch(function(d){return k(d)});return g}function Sv(g,c,k){c||
(c={type:"Identifier",name:"__rec"});k=Object.assign({ignoreUndeclaredExcept:null,includeRefs:null,excludeRefs:k&&k.exclude||[],includeDecls:null,excludeDecls:k&&k.exclude||[],recordDefRanges:!1,es6ExportFuncId:null,es6ImportFuncId:null,captureObj:c,moduleExportFunc:{name:k&&k.es6ExportFuncId||"_moduleExport",type:"Identifier"},moduleImportFunc:{name:k&&k.es6ImportFuncId||"_moduleImport",type:"Identifier"},declarationWrapper:void 0,classTransform:function(h){return h}},k);c=g;if(k.ignoreUndeclaredExcept){var d=
hc.topLevelDeclsAndRefs(g);k.excludeRefs=hc.arr.withoutAll(d.undeclaredNames,k.ignoreUndeclaredExcept).concat(k.excludeRefs);k.excludeDecls=hc.arr.withoutAll(d.undeclaredNames,k.ignoreUndeclaredExcept).concat(k.excludeDecls)}k.excludeRefs=k.excludeRefs.concat(k.captureObj.name);k.excludeDecls=k.excludeDecls.concat(k.captureObj.name);k.recordDefRanges&&hc.computeDefRanges(c,k);k.excludeRefs=k.excludeRefs.concat(hc.additionalIgnoredRefs(g,k));k.excludeDecls=k.excludeDecls.concat(hc.additionalIgnoredDecls(g,
k));c=hc.fixDefaultAsyncFunctionExportForRegeneratorBug(c,k);k.es6ExportFuncId&&(k.excludeRefs.push(k.es6ExportFuncId),k.excludeRefs.push(k.es6ImportFuncId),c=hc.es6ModuleTransforms(c,k));c=hc.replaceRefs(c,k);c=hc.replaceVarDecls(c,k);c=hc.clearEmptyExports(c,k);c=hc.replaceClassDecls(c,k);c=hc.splitExportDeclarations(c,k);c=hc.insertCapturesForExportDeclarations(c,k);c=hc.insertCapturesForImportDeclarations(c,k);c=hc.insertDeclarationsForExports(c,k);c=hc.putFunctionDeclsInFront(c,k);return c=hc.transformImportMeta(c,
k)}function vz(g,c,k){k=Object.assign({captureObj:c||{type:"Identifier",name:"__rec"},exclude:[],declarationWrapper:void 0},k);c=hc.Path("body.0.expression").get(g);if("System"!==c.callee.object.name)throw Error("rewriteToRegisterModuleToCaptureSetters: input doesn't seem to be a System.register call: "+hc.stringify(g).slice(0,300)+"...");if("register"!==c.callee.property.name)throw Error("rewriteToRegisterModuleToCaptureSetters: input doesn't seem to be a System.register call: "+hc.stringify(g).slice(0,
300)+"...");c=hc.Path("arguments.1.body.body").get(c);var d=hc.arr.last(c);if("ReturnStatement"!==d.type)throw Error("rewriteToRegisterModuleToCaptureSetters: input doesn't seem to be a System.register call, at return statement: "+hc.stringify(g).slice(0,300)+"...");var h=d.argument.properties.find(function(n){return"setters"===n.key.name});if(!h)throw Error("rewriteToRegisterModuleToCaptureSetters: input doesn't seem to be a System.register call, at finding setters: "+hc.stringify(g).slice(0,300)+
"...");d=d.argument.properties.find(function(n){return"execute"===n.key.name});if(!d)throw Error("rewriteToRegisterModuleToCaptureSetters: input doesn't seem to be a System.register call, at finding execute: "+hc.stringify(g).slice(0,300)+"...");h.value.elements.forEach(function(n){n.params[0]=hc.assign(n.params[0],hc.nodes.objectLiteral({}));n.body.body=n.body.body.map(function(b){if("ExpressionStatement"!==b.type||"AssignmentExpression"!==b.expression.type||"Identifier"!==b.expression.left.type||
hc.arr.include(k.exclude,b.expression.left.name))return b;var e=b.expression.left;b=k.declarationWrapper?hc.declarationWrapperCall(k.declarationWrapper,null,hc.literal(e.name),hc.literal("var"),b.expression,k.captureObj,k):b.expression;return hc.exprStmt(hc.assign(hc.member(k.captureObj,e),b))})});(h=d.value.body.body.find(function(n){return"ExpressionStatement"===n.type&&"AssignmentExpression"==n.expression.type&&n.expression.left.name===k.captureObj.name}))||(h=d.value.body.body.find(function(n){return"VariableDeclaration"===
n.type&&n.declarations[0].id&&n.declarations[0].id.name===k.captureObj.name}));h&&(hc.arr.remove(d.value.body.body,h),hc.arr.pushAt(c,h,c.length-1));k.sourceAccessorName&&((h=d.value.body.body.find(function(n){return"ExpressionStatement"===n.type&&"AssignmentExpression"==n.expression.type&&n.expression.left.name===k.sourceAccessorName}))||(h=d.value.body.body.find(function(n){return"VariableDeclaration"===n.type&&n.declarations[0].id&&n.declarations[0].id.name===k.sourceAccessorName})),h&&(hc.arr.remove(d.value.body.body,
h),hc.arr.pushAt(c,h,c.length-1)));return g}function wz(g,c){var k=hc.stringify(c.captureObj),d=0;g.body=g.body.reduce(function(h,n){var b=[n],e="",l=!1;if("ExportNamedDeclaration"===n.type){if(n.source){var a=n.specifiers.map(function(f){return[f.local.name,f.exported.name]});e="import { "+a.map(function(f){var m=$jscomp.makeIterator(f);f=m.next().value;m=m.next().value;return f===m?m:f+" as "+m}).join(",")+" } from "+n.source.raw+";\n";l="export { "+a.map(function(f){f=$jscomp.makeIterator(f);f.next();
return f.next().value}).join(",")+" };\n"}else n.declaration?(a=n.declaration.declarations||[],a=a.map(function(f){return[f.id.name,f.id.name]})):a=n.specifiers.map(function(f){return[f.exported.name,f.local.name]});l&&(b=[],e+=l);b=b.concat(hc.parse(e+a.map(function(f){var m=$jscomp.makeIterator(f);f=m.next().value;m=m.next().value;return k+"."+f+" = "+m+";\n"+(k+"."+m+" = "+m+";\n")}).join("\n")))}"ExportAllDeclaration"===n.type&&(d++,b=b.concat(hc.parse("\n       import * as __captured"+d+"__ from "+
n.source.raw+";\n       Object.assign("+k+", __captured"+d+"__);\n      ")));return h.concat(b)},[]);return g}function zB(g){(this||AB).__wrapped__=g;(this||AB).__actions__=[];(this||AB).__dir__=1;(this||AB).__filtered__=!1;(this||AB).__iteratees__=[];(this||AB).__takeCount__=4294967295;(this||AB).__views__=[]}function Zt(g,c){(this||SG).__wrapped__=g;(this||SG).__actions__=[];(this||SG).__chain__=!!c;(this||SG).__index__=0;(this||SG).__values__=void 0}function $t(g){if(sga(g)&&!tga(g)&&!(g instanceof
uga)){if(g instanceof E0)return g;if(vga.call(g,"__wrapped__"))return wga(g)}return new E0(g)}function Mx(g,c,k,d,h,n,b,e,l,a){function f(){for(var F=arguments.length,I=Array(F),J=F;J--;)I[J]=arguments[J];if(x)var P=xga(f),N=yga(I,P);d&&(I=zga(I,d,h,x));n&&(I=Aga(I,n,b,x));F-=N;if(x&&F<a)return J=Bga(I,P),Cga(g,c,Mx,f.placeholder,k,I,J,e,l,a-F);J=r?k:this||WK;P=v?J[g]:g;F=I.length;e?I=Dga(I,e):y&&1<F&&I.reverse();m&&l<F&&(I.length=l);(this||WK)&&(this||WK)!==Ega&&(this||WK)instanceof f&&(P=E||F0(P));
return P.apply(J,I)}var m=c&128,r=c&1,v=c&2,x=c&24,y=c&512,E=v?void 0:F0(g);return f}function BB(g){return g&&g.__esModule?g:{default:g}}function TG(g){if(Array.isArray(g)){for(var c=0,k=Array(g.length);c<g.length;c++)k[c]=g[c];return k}return Array.from(g)}function Nn(g,c){c=void 0===c?"__lvVarRecorder":c;ik.ensureJSXPlugin();"function"===typeof g&&(g=String(g));if(lively.FreezerRuntime)return g.split(c+".").join("");g="string"===typeof g?ik.parseFunction(g):g;g=ik.ReplaceVisitor.run(g,function(k){return"MemberExpression"===
k.type&&"Identifier"===k.object.type&&k.object.name===c?k.property:k});return ik.stringify(g)}function Nx(g){if("undefined"===typeof babel)return console.warn("[lively.freezer] Skipped async/await transpilation because babel not loaded."),g;ik.ensureJSXPlugin();ik.ensureOptionalCatchBinding();ik.ensureImportMeta();g=babel.transform(g,{sourceMap:void 0,inputSourceMap:void 0,babelrc:!1,presets:[["es2015",{modules:!1}]],plugins:["transform-exponentiation-operator","transform-async-to-generator","syntax-object-rest-spread",
"transform-object-rest-spread"],code:!0,ast:!1}).code;g=g.replace(/\}\)\.call\(undefined\);$/,"}).call(this)");g.startsWith("(function")&&g.endsWith(");")&&(g=g.slice(1,-2));return g}function au(g,c){g=Ng.transform.transformSingleExpression(g);g=Ng.parse(g,{withComments:!0});c=Ng.processInlineCodeTransformOptions(g,c);var k=Ng.query.topLevelDeclsAndRefs(g),d=k.classDecls,h=k.funcDecls;k=k.varDecls;var n={};c.hasOwnProperty("evalId")&&(n.evalId=c.evalId);c.sourceAccessorName&&(n.sourceAccessorName=
c.sourceAccessorName);[].concat($jscomp.arrayFromIterable(d),$jscomp.arrayFromIterable(h)).forEach(function(l){return l["x-lively-object-meta"]=Object.assign({},n,{start:l.start,end:l.end})});k.forEach(function(l){return l.declarations.forEach(function(a){return a["x-lively-object-meta"]=Object.assign({},n,{start:a.start,end:a.end})})});g=Ng.transform.objectSpreadTransform(g);!c.topLevelVarRecorder&&c.topLevelVarRecorderName&&(d=Ng.getGlobal(),c.topLevelVarRecorder="GLOBAL"===c.topLevelVarRecorderName?
Ng.getGlobal():Ng.Path(c.topLevelVarRecorderName).get(d));if(c.topLevelVarRecorder){d=(c.dontTransform||[]).concat(["arguments"]);h=c.recordGlobals?null:Ng.arr.withoutAll(Object.keys(c.topLevelVarRecorder),d);k=Ng.id(c.varRecorderName||"__lvVarRecorder");var b=void 0;if(c.declarationWrapperName||"function"===typeof c.declarationCallback){var e=c.declarationWrapperName||Ng.defaultDeclarationWrapperName;c.declarationWrapper=Ng.member(Ng.id(c.varRecorderName||"__lvVarRecorder"),Ng.literal(e),!0);c.declarationCallback&&
(c.topLevelVarRecorder[e]=c.declarationCallback)}if(c.hasOwnProperty("transformES6Classes")?c.transformES6Classes:1)b={currentModuleAccessor:c.currentModuleAccessor,classHolder:k,functionNode:Ng.member(k,Ng.defaultClassToFunctionConverterName),declarationWrapper:c.declarationWrapper,evalId:c.evalId,sourceAccessorName:c.sourceAccessorName,transform:c.classTransform};g=Ng.capturing.rewriteToCaptureTopLevelVariables(g,k,{es6ImportFuncId:c.es6ImportFuncId,es6ExportFuncId:c.es6ExportFuncId,ignoreUndeclaredExcept:h,
exclude:d,declarationWrapper:c.declarationWrapper||void 0,classToFunction:b,evalId:c.evalId,sourceAccessorName:c.sourceAccessorName,keepTopLevelVarDecls:c.keepTopLevelVarDecls})}c.wrapInStartEndCall&&(g=Ng.transform.wrapInStartEndCall(g,{startFuncNode:c.startFuncNode,endFuncNode:c.endFuncNode}));g=Ng.stringify(g);c.jsx&&(g=Ng.es5Transpilation(g));c.sourceURL&&(g+="\n//# sourceURL="+c.sourceURL.replace(/\s/g,"_"));return g}function rr(g,c){c=void 0===c?{}:c;if(!c.topLevelVarRecorder)return g;if("function"===
typeof c.declarationCallback||c.declarationWrapperName){var k=c.declarationWrapperName||Ng.defaultDeclarationWrapperName;c.declarationWrapper=Ng.member(Ng.id(c.varRecorderName),Ng.literal(k),!0);c.declarationCallback&&(c.topLevelVarRecorder[k]=c.declarationCallback)}g=Ng.parse(g);k=(c.dontTransform||[]).concat(["arguments"]);c.recordGlobals||Ng.arr.withoutAll(Object.keys(c.topLevelVarRecorder),k);c=Ng.capturing.rewriteToRegisterModuleToCaptureSetters(g,Ng.id(c.varRecorderName||"__lvVarRecorder"),
Object.assign({exclude:k},c));return Ng.stringify(c)}function Im(g,c,k){"function"===typeof c&&2===arguments.length&&(k=c,c=null);var d=new gh.EvalResult,h=!1,n=!1;c=gh._normalizeEvalOptions(c);var b=gh.promise.deferred(),e=c.topLevelVarRecorder||gh.getGlobal(),l=g;c.wrapInStartEndCall&&(e[gh.startEvalFunctionName]&&console.warn(d.addWarning("startEvalFunctionName "+gh.startEvalFunctionName+" already exists in recorder!")),e[gh.endEvalFunctionName]&&console.warn(d.addWarning("endEvalFunctionName "+
gh.endEvalFunctionName+" already exists in recorder!")),e[gh.startEvalFunctionName]=function(){if(h)console.warn(d.addWarning("onEvalStartCalled multiple times!"));else if(h=!0,"function"===typeof c.onStartEval)c.onStartEval()},e[gh.endEvalFunctionName]=function(m,r){n?console.warn(d.addWarning("onEvalEndCalled multiple times!")):(n=!0,gh.finishEval(m,r,d,c,e,b,k))});try{g=gh.evalCodeTransform(g,c),c.header&&(g=c.header+g),c.footer&&(g+=c.footer),c.transpiler&&(g=c.transpiler(g,c.transpilerOptions))}catch(m){console.warn(d.addWarning("lively.vm evalCodeTransform not working: "+
m))}try{"undefined"!==typeof $world&&$world.get("log")&&($world.get("log").textString=g);var a=gh._eval.call(c.context,g,c.topLevelVarRecorder,c.originalSource||l)}catch(m){var f=m}if(c.wrapInStartEndCall){if(f&&!n)e[gh.endEvalFunctionName](f,void 0)}else gh.finishEval(f,f||a,d,c,e,b,k);return c.sync?d:b.promise}function sr(g,c){c=Object.assign(c||{},{sync:!0});return gh.runEval(g,c)}function Gp(g,c,k){Jg.getEnv(k).emitter.on(g,c);return c}function On(g,c,k){Jg.getEnv(k).emitter.once(g,c);return c}
function jn(g,c,k,d){c=void 0===c?{}:c;k=void 0===k?Date.now():k;c=Object.assign({type:g,time:k},c);k=Jg.getEnv(d);d=k.emitter;k=k.notifications;d.emit(g,c);d.isLogging&&Jg.log(c);d.isRecording&&Jg.record(k,c);return c}function Ox(g,c,k){Jg.getEnv(k).emitter.removeListener(g,c);return c}function kn(g,c){Jg.getEnv(c).emitter.removeAllListeners(g)}function Tv(g){Jg.getEnv(g).emitter.isRecording=!0}function vq(g){Jg.getEnv(g).emitter.isRecording=!1}function aE(g){g=Jg.getEnv(g).notifications;g.splice(0,
g.length)}function bu(g){return Jg.getEnv(g).notifications}function Px(g){Jg.getEnv(g).emitter.isLogging=!0}function cu(g){Jg.getEnv(g).emitter.isLogging=!1}function Hp(g,c,k){k=Object.assign({targetModule:null,parentModule:null,es6Transpile:!0,transpiler:null,transpilerOptions:null,format:"esm"},k);g.debug&&console.log("[lively.module] runEval: "+c.slice(0,100).replace(/\n/mg," ")+"...");var d=k,h=d.format,n=d.targetModule;n=g.decanonicalize(n||"*scratch*",d.parentModule);k.targetModule=n;h&&((d=
g.getConfig().meta[n])||(d={}),d[n]||(d[n]={}),d[n].format||(d[n].format=h,g.config(d)));h=g.get("@lively-env").moduleEnv(n);d=h.recorder;var b=h.recorderName,e=h.dontTransform,l=xi.getEs6Transpiler(g,k,h),a="var _moduleExport = "+b+"._moduleExport,\n    _moduleImport = "+(b+"._moduleImport;\n");k=Object.assign({waitForPromise:!0,sync:!1,evalId:k.evalId||h.nextEvalId(),sourceAccessorName:(k.hasOwnProperty("embedOriginalCode")?k.embedOriginalCode:1)?"__lvOriginalCode":void 0,originalSource:c},k,{header:a,
recordGlobals:!0,dontTransform:e,varRecorderName:b,topLevelVarRecorder:d,sourceURL:k.sourceURL||k.targetModule,context:k.context||d,wrapInStartEndCall:!0,es6ExportFuncId:"_moduleExport",es6ImportFuncId:"_moduleImport",transpiler:l,declarationWrapperName:h.varDefinitionCallbackName,currentModuleAccessor:xi.funcCall(xi.member(xi.funcCall(xi.member(xi.member("__lvVarRecorder","System"),"get"),xi.literal("@lively-env")),"moduleEnv"),xi.literal(k.targetModule))});if(!k.sync&&!k.importsEnsured&&xi.hasUnimportedImports(g,
c,n))return xi.ensureImportsAreImported(g,c,n).catch(function(f){return null}).then(function(f){return Hp(g,f,Object.assign({},k,{importsEnsured:!0}))});if(!h.record()){if(!k.sync&&!k._moduleImported)return g.import(n).catch(function(f){return null}).then(function(){return Hp(g,c,Object.assign({},k,{_moduleImported:!0}))});h.ensureRecord()}if(k.es6Transpile&&k.transpiler instanceof Promise)if(k.sync||k._transpilerLoaded)console.warn("[lively.vm] sync eval requested but transpiler is not yet loaded, will continue without transpilation!"),
k.transpiler=null;else return k.transpiler.catch(function(f){return console.error(f)}).then(function(f){return Hp(g,c,Object.assign({},k,{transpiler:f,_transpilerLoaded:!0}))});g.debug&&console.log("[lively.module] runEval in module "+n+" started");xi.emit("lively.vm/doitrequest",{code:c,waitForPromise:k.waitForPromise,targetModule:k.targetModule},Date.now(),g);g.get("@lively-env").evaluationStart(n);n=xi.vmRunEval(c,k);return k.sync?xi.evalEnd(g,c,k,n):Promise.resolve(n).then(function(f){return xi.evalEnd(g,
c,k,f)})}function Bs(g,c){var k=c=Object.assign({format:"esm",System:null,targetModule:null},c),d=k.format,h=k.System;k=k.targetModule;h||"undefined"===typeof System||(h=System);return!h&&k?Promise.reject(Error("options to runEval have targetModule but cannot find system loader!")):k&&["esm","es6","register"].includes(d)?tl.esmEval.runEval(h,g,c):tl.globalEval.runEval(g,c)}function Uv(g,c){return tl.globalEval.syncEval(g,c)}function Vv(g){return qf.withSuperclasses(g).slice(1)}function Qx(g){var c=
[];do c.push(g),g=g[qf.superclassSymbol];while(g&&g.name);return c.map(function(k){return k.name}).join("->")}function Wv(g){for(var c=[];g;)c.push(g),g=g[qf.superclassSymbol];return c}function xz(g,c){do if(g===c)return!0;while(g=g[qf.superclassSymbol]);return!1}function yz(g,c){if(g.constructor===c&&g.__proto__===c.prototype)return g;g.constructor=c;g.__proto__=c.prototype;return g}function Rx(g){return g&&"function"===typeof g}function UG(g){var c=qf.RuntimeSourceDescriptor.for(g),k=c.ast;c=c.type;
if("ClassDeclaration"!==c)throw Error("Expected class but got "+c);return qf.Path("body.body").get(k).map(function(d){var h=d.static,n=d.kind;d=d.key;var b=d.value;d=d.name||b;b=qf.isOverridden(g,d);var e=h?g:g.prototype;e="get"===n?e.__lookupGetter__(d):"set"===n?e.__lookupSetter__(d):e[d];return{static:h,name:d,value:e,kind:n,owner:g,overridden:b}})}function zf(g){return qf.runtimeNonStaticMembers(g).concat(qf.runtimeNonStaticMembers(g))}function VG(g){var c=qf.obj.getOwnPropertyDescriptors(g);
return qf.arr.withoutAll(Object.keys(c),["prototype","name","length","toString"]).map(function(k){var d=c[k],h="function"===typeof d.value?"method":"get"in d?"get":"set"in d?"set":"unknown";return{static:!0,name:k,value:"method"===h?d.value:"get"===h?d.get:"set"===h?d.set:null,kind:h,owner:g}})}function WG(g){return qf.arr.uniq(qf.arr.flatmap(qf.arr.without(qf.withSuperclasses(g),Object),function(c){return qf.runtimeStaticClassMembers(c)}))}function bE(g){var c=lj.propertiesAndSettingsInHierarchyOf(g),
k=c.properties;c=c.propertySettings;g[lj.propertiesAndSettingsCacheSym]={properties:k,order:lj.obj.sortKeysWithBeforeAndAfterConstraints(k),propertySettings:c,classHierarchy:lj.getClassHierarchy(g)};k&&"object"===typeof k?lj.prepareClassForProperties(g,c,k):console.warn("Class "+g.name+" indicates it has managed properties but its properties accessor ("+(lj.defaultPropertiesKey+") does not return a valid property descriptor map"))}function du(g,c){c!==g.constructor&&(g.constructor=c,eg.setPrototypeOf(g,
c.prototype))}function zz(g,c){c=c?"function"===typeof c?c:c.value?c.value:Object:Object;var k=g&&g[eg.superclassSymbol];k&&k===c||(eg.ensureInitializeStub(c),g[eg.superclassSymbol]=c,eg.setPrototypeOf(g.prototype,c.prototype),c!==Object&&eg.setPrototypeOf(g,c));return c}function Pb(g,c,k,d,h,n,b){k=void 0===k?[]:k;d=void 0===d?[]:d;h=void 0===h?{}:h;var e=g.name,l=e&&h.hasOwnProperty(e)&&h[e];h=l&&l[eg.superclassSymbol];l&&"function"===typeof l&&h||(l=g);eg.setSuperclass(l,c);eg.installMethods(l,
k,d);l[eg.objMetaSymbol]=b;n&&(g=n.package(),b=l[eg.moduleMetaSymbol],h=Date.now(),l[eg.moduleMetaSymbol]={package:g?{name:g.name,version:g.version}:{},pathInPackage:g?n.pathInPackage():n.id,lastChange:b&&b.lastChange&&h<=b.lastChange?b.lastChange+1:h,lastSuperclassChange:0},c&&c.referencedAs&&(l.hasOwnProperty(eg.moduleSubscribeToToplevelChangesSym)&&n.unsubscribeFromToplevelDefinitionChanges(l[eg.moduleSubscribeToToplevelChangesSym]),l[eg.moduleSubscribeToToplevelChangesSym]=n.subscribeToToplevelDefinitionChanges(function(a,
f){if(a===c.referencedAs){a=f&&f[eg.moduleMetaSymbol];var m=l[eg.moduleMetaSymbol];if(a){if(a.lastChange===m.lastSuperclassChange)return;m.lastSuperclassChange=a.lastChange}eg.setSuperclass(l,f);eg.installMethods(l,k,d);eg.prepareClassForManagedPropertiesAfterCreation(l)}})));l.toString=function(){var a=String(this.prototype[eg.initializeSymbol]).match(eg.constructorArgMatcher),f=this[eg.superclassSymbol];return"class "+this.name+" "+(f?"extends "+f.name:"")+" {\n  constructor"+((a?a[0]:"()")+" { /*...*/ }\n}")};
eg.prepareClassForManagedPropertiesAfterCreation(l);return l}function Az(g){g=new Dd.Color(g);return{red:g.red()/255,green:g.green()/255,blue:g.blue()/255,alpha:g.alpha()}}function Vl(g){return function(c,k,d,h){null==d&&(d=g);null==h&&(h=d);null==k&&(k=Yi.unit(c));var n=Yi.unit(c);if(n===k)return c;var b=Yi.unitLess(c);"px"!==Yi.unit(d)&&console.warn("Parameter fromContext must resolve to a value in pixel units.");"px"!==Yi.unit(h)&&console.warn("Parameter toContext must resolve to a value in pixel units.");
if("px"!==n)if("em"===n)b=Yi.unitLess(c)*Yi.unitLess(d);else if("rem"===n)b=Yi.unitLess(c)*Yi.unitLess(g);else if("ex"===n)b=Yi.unitLess(c)*Yi.unitLess(d)*2;else return"ch"===n||"vw"===n||"vh"===n||"vmin"===n?console.warn(n+" units can't be reliably converted; Returning original value."):console.warn(n+" is an unknown or unsupported length unit; Returning original value."),c;d=b;if("px"!==k)if("em"===k)d=b/Yi.unitLess(h);else if("rem"===k)d=b/Yi.unitLess(g);else if("ex"===k)d=b/Yi.unitLess(h)/2;else return"ch"===
k||"vw"===k||"vh"===k||"vmin"===k?console.warn(k+" units can't be reliably converted; Returning original value."):console.warn(k+" is an unknown or unsupported length unit; Returning original value."),c;return parseFloat(d.toFixed(5))+k}}function Wl(g){return Number(Yi.parseCssLength(g,"px").slice(0,-2))}function dj(g,c,k,d){if("number"===typeof g){var h=g;g=c;c=d}else h=g.x,g=g.y,k=c.x-h,c=c.y-g;return new Vd.Rectangle(h,g,k,c)}function Ei(g,c){return new Vd.Point(g,c)}function Dl(g,c,k,d,h){"function"!==
typeof k||"undefined"!==typeof d&&"object"!==typeof d||(h=d,d="call",h||(h={}),h.updater||(h.updater=function(l,a){return l(null,a)}));var n=g.getConnectionPoints&&g.getConnectionPoints()||g.connections,b=(n=n&&n[c])&&n.map&&lively.morphic&&lively.morphic.GeometryConnection||n&&n.connectionClassType&&lively.Class.forName(n.connectionClassType)||sh.AttributeConnection;"function"===typeof h&&(console.warn("Directly passing a converter function to connect() is deprecated! Use spec object instead!"),
h={converter:h});n&&(h=sh.obj.merge(n,h));b=new b(g,c,k,d,h);var e=b.getExistingConnection();if(e)return e.resetSpec(),e.init(g,c,k,d,h),e;h=b.connect();if("function"===typeof g.onConnect)g.onConnect(c,k,d);n&&n.updateOnConnect&&b.update(g[c]);return h}function mg(g,c,k,d){"function"!==typeof k||"undefined"!==typeof d&&"object"!==typeof d||(d="call");if(g.attributeConnections){for(var h=$jscomp.makeIterator(g.attributeConnections.slice()),n=h.next();!n.done;n=h.next())n=n.value,n.getSourceAttrName()==
c&&n.getTargetObj()===k&&n.getTargetMethodName()==d&&n.disconnect();if("function"==typeof g.onDisconnect)g.onDisconnect(c,k,d)}}function Xv(g){for(var c;g.attributeConnections&&(c=g.attributeConnections[0]);)c.disconnect()}function cp(g,c,k,d,h){"function"!==typeof k||"undefined"!==typeof d&&"object"!==typeof d?h=h||{}:(h=d,d="call",h=h||{},h.updater||(h.updater=function(n,b){return n(null,b)}));h=h||{};h.removeAfterUpdate=!0;return sh.connect(g,c,k,d,h)}function Xl(g,c,k){var d=g.attributeConnections;
if(d){g=g[c];for(var h=0,n=d.length;h<n;h++){var b=d[h];b.getSourceAttrName()==c&&b.update(k,g)}}}function wq(g,c,k,d){if(null!=g[c])k[d](g[c]);else sh.connect(g,c,k,d,{removeAfterUpdate:!0})}function Ip(g,c,k,d){for(var h={key:c.pop(),whenDefined:function(n){sh.callWhenNotNull(n,this.key,k,d)}};0<c.length;)h={key:c.pop(),next:h,whenDefined:function(n){sh.callWhenNotNull(n,this.key,this.next,"whenDefined")}};h.whenDefined(g)}function Jm(g,c){var k=!1;c||"function"!==typeof g||(c=g,k=!0);if(k){g=sh.AttributeConnection.prototype;
g.isActive||(g.isActive=0);g.isActive++;try{var d=c()}finally{g.isActive--,0>=g.isActive&&delete g.isActive}}else{k=g.sourceObj;var h=g.sourceAttribute,n=g.targetObj,b=g.targetAttribute;g=n&&b?function(e){return e.getSourceAttrName()===h&&n===e.getTargetObj()&&b===e.getTargetMethodName()}:function(e){return e.getSourceAttrName()===h};(g=k.attributeConnections&&k.attributeConnections.filter(g))&&sh.arr.invoke(g,"activate");try{d=c()}finally{g&&sh.arr.invoke(g,"deactivate")}}return d}function cE(g){if(null==
g)return!0;g=typeof g;return"boolean"===g||"number"===g||"string"===g?!0:!1}function tr(g){return g.constructor[Nj.classNameProp]||g.constructor.name}function eu(g){if(g&&g.constructor){var c=Nj.getClassName(g);if(c){if(g=g.constructor[Nj.moduleMetaInClassProp],"Object"!==c||g)return g&&(delete g.lastChange,delete g.lastSuperclassChange),{className:c,module:g}}else console.warn("Cannot serialize class info of anonymous class of instance "+g)}}function Cs(g){var c=g.module;if(c){var k=c.pathInPackage;
if(c.package&&c.package.name&&"no group"!==c.package.name){var d=System.decanonicalize(c.package.name.replace(/\/*$/,"/"));k=Nj.string.joinPath(d,k)}d=System.get("@lively-env");if(c=d.moduleEnv(k)||d.moduleEnv(c.pathInPackage))return c.recorder[g.className];console.warn("Trying to deserialize instance of class "+g.className+" but the module "+k+" is not yet loaded")}return System.global[g.className]}function ur(g,c,k){c=void 0===c?function(a){return a}:c;k=void 0===k?{}:k;var d=new Zi.ExpressionSerializer,
h=k,n=k.isMorph?k.propertiesAndPropertySettings().order:[];n=n.length?n:Zi.obj.keys(g);for(var b=$jscomp.makeIterator(n),e=b.next();!e.done;e=b.next()){e=e.value;var l=g[e];if("_env"===e||"env"===e||"__connections__"===e||"__refs__"===e)return;Zi.obj.isString(l)&&d.isSerializedExpression(l)&&(l=d.deserializeExpr(l));["borderColor","borderWidth","borderStyle","borderRadius"].includes(e)&&(l=ur(l,c));l&&l._id&&(l=c(ur(l,c)));h[e]=l}g.submorphs&&(h.submorphs=g.submorphs.map(function(a){return ur(a,c)}));
if(k)for(d=$jscomp.makeIterator(n.filter(function(a){return!!g[a]})),e=d.next();!e.done;e=d.next())n=e.value,k[n]=h[n];if(g.__refs__)for(k=$jscomp.makeIterator(g.__refs__),d=k.next();!d.done;d=k.next())n=$jscomp.makeIterator(d.value),d=n.next().value,n=n.next().value,Zi.Path(d).set(h,Zi.Path(n).get(h));if(g.__connections__)for(k=$jscomp.makeIterator(g.__connections__),d=k.next();!d.done;d=k.next())d=d.value,Zi.connect(Zi.Path(d.pathToSource).get(h),d.sourceAttrName,Zi.Path(d.pathToTarget).get(h),
d.targetMethodName,Object.assign({},Zi.obj.select(d,["garbageCollect","converterString","updaterString","varMapping"])));return h}function Jp(g,c){var k=c=void 0===c?{}:c,d=void 0===k.keepFunctions?!0:k.keepFunctions,h=void 0===k.skipAttributes?[]:k.skipAttributes,n=void 0===k.keepConnections?!0:k.keepConnections,b=void 0===k.asExpression?!1:k.asExpression;c=void 0===k.root?!0:k.root;var e=void 0===k.path?"":k.path,l=void 0===k.skipUnchangedFromDefault?!1:k.skipUnchangedFromDefault,a=void 0===k.nestedExpressions?
{}:k.nestedExpressions,f=void 0===k.objToPath?new WeakMap:k.objToPath,m=void 0===k.objRefs?[]:k.objRefs;k=void 0===k.connections?[]:k.connections;var r={skipAttributes:h,skipUnchangedFromDefault:l,root:!1,keepFunctions:d,asExpression:b,nestedExpressions:a,connections:k,objRefs:m,objToPath:f,keepConnections:n};if(f.has(g))return m.push([e,f.get(g)]),null;f.set(g,e);b&&(d=!1);var v=new Zi.ExpressionSerializer,x=function(za,L){try{if(L=L.__serialize__(),b){var Z=Zi.string.newUUID();a[Z]=L;L=Z}else L=
L.__expr__?v.exprStringEncode(L):L}catch(R){console.log("[export to JSON] failed converting "+za+" to serialized expression")}return L},y={};f.set(g,e);n&&g.attributeConnections&&k.push.apply(k,$jscomp.arrayFromIterable(g.attributeConnections));g.isText&&(y.textAndAttributes=g.textAndAttributes.map(function(za,L){return za&&za.isMorph?Jp(za,Object.assign({},r,{path:e?e+".textAndAttributes."+L:"textAndAttributes."+L})):za}));g.submorphs&&0<g.submorphs.length&&(y.submorphs=g.submorphs.map(function(za,
L){return Jp(za,Object.assign({},r,{path:e?e+".submorphs."+L:"submorphs."+L}))}).filter(Boolean));var E={};for(W in g.spec(l)){E.$jscomp$loop$prop$name$2650=W;l=g[E.$jscomp$loop$prop$name$2650];!l||"object"!==typeof l||Array.isArray(l)||l.isMorph||f.set(l,e?e+"."+E.$jscomp$loop$prop$name$2650:E.$jscomp$loop$prop$name$2650);if("submorphs"!==E.$jscomp$loop$prop$name$2650&&!h.includes(E.$jscomp$loop$prop$name$2650))if("metadata"===E.$jscomp$loop$prop$name$2650&&Zi.Path("commit.__serialize__").get(l))y[E.$jscomp$loop$prop$name$2650]=
Object.assign({},l,{commit:x(E.$jscomp$loop$prop$name$2650+".commit",l.commit)});else if(["borderColor","borderWidth","borderStyle","borderRadius"].includes(E.$jscomp$loop$prop$name$2650)){for(var F={},I=$jscomp.makeIterator(["top","left","right","bottom"]),J=I.next();!J.done;J=I.next()){J=J.value;var P=l[J];if(P&&P.__serialize__&&(P=P.__serialize__())&&P.__expr__)if(b){var N=Zi.string.newUUID();a[N]=P;P=N}else P=v.exprStringEncode(P);F[J]=P}y[E.$jscomp$loop$prop$name$2650]=F}else if(l&&l.isMorph)y[E.$jscomp$loop$prop$name$2650]=
Jp(l,Object.assign({},r,{path:e?e+"."+E.$jscomp$loop$prop$name$2650:E.$jscomp$loop$prop$name$2650}));else if(l&&l.__serialize__)y[E.$jscomp$loop$prop$name$2650]=x(E.$jscomp$loop$prop$name$2650,l);else if(Array.isArray(l))y[E.$jscomp$loop$prop$name$2650]=l.map(function(za){return function(L,Z){return L&&L.isMorph?Jp(L,Object.assign({},r,{path:e?e+"."+za.$jscomp$loop$prop$name$2650+"."+Z:za.$jscomp$loop$prop$name$2650+"."+Z})):L&&L.__serialize__?x(za.$jscomp$loop$prop$name$2650+"."+Z,L):L}}(E));else{if(l&&
!Zi.obj.isString(l)&&!Zi.obj.isNumber(l)&&0<Zi.properties.allOwnPropertiesOrFunctions(l).length)for(var Y in l)l[Y]&&l[Y].isMorph&&(l[Y]=Jp(l[Y],Object.assign({},r,{path:e?e+"."+E.$jscomp$loop$prop$name$2650+"."+Y:E.$jscomp$loop$prop$name$2650+"."+Y})));y[E.$jscomp$loop$prop$name$2650]=l}E={$jscomp$loop$prop$name$2650:E.$jscomp$loop$prop$name$2650}}g.isText&&delete y.textString;b||(y._id=g._id);d?(y.type=g.constructor,Object.keys(g).forEach(function(za){return"function"===typeof g[za]&&(y[za]=g[za])})):
(y.styleSheets&&(y.styleSheets=[]),y.type=Zi.getSerializableClassMeta(g));if(n&&c){var W=[];Y=$jscomp.makeIterator(k);for(d=Y.next();!d.done;d=Y.next())I=d=d.value,h=I.sourceAttrName,n=I.targetMethodName,F=I.targetObj,k=I.updaterString,E=I.converterString,l=I.garbageCollect,I=f.get(I.sourceObj),F=f.get(F),"string"===typeof I&&"string"===typeof F?W.push({pathToSource:I,pathToTarget:F,garbageCollect:l,updaterString:k,converterString:E,sourceAttrName:h,targetMethodName:n,varMapping:{properties:Zi.properties}}):
console.log("skipping:",d);b||(y.__connections__=W)}if(b&&c){c="morph("+Zi.obj.inspect(y)+")";var da={"lively.morphic":["morph"]},va;for(va in a)c=c.replace('"'+va+'"',a[va].__expr__),Object.entries(a[va].bindings||{}).forEach(function(za){var L=$jscomp.makeIterator(za);za=L.next().value;L=L.next().value;da[za]=da[za]?Zi.arr.uniq([].concat($jscomp.arrayFromIterable(da[za]),$jscomp.arrayFromIterable(L))):L});return{__expr__:c,bindings:da}}c&&(y.__refs__=m);return y}function XG(g){var c={},k;for(k in g)c[k]=
Kf.referencesOfId(g,k);return c}function dE(g){return g&&g.__ref__}function eE(g,c){var k={};return Kf.referencesOfId((k[g.id]=g.currentSnapshot,k),g.id,c)}function fE(g,c,k){g=g[c];c=[];for(var d in g.props){var h=g.props[d]||{},n=h.value;h=h.verbatim;Array.isArray(n)?c.push.apply(c,$jscomp.arrayFromIterable(Kf.referencesInArray(n,k&&d))):!h&&n&&Kf.isReference(n)&&c.push(k?{key:d,id:n.id}:n.id)}if(g.hasOwnProperty("entries"))for(d=0;d<g.entries.length;d++)n=g.entries[d],Array.isArray(n)?c.push.apply(c,
$jscomp.arrayFromIterable(Kf.referencesInArray(n,k&&n))):n&&Kf.isReference(n)&&c.push(k?{key:n,id:n.id}:n.id);return c}function ii(g,c){for(var k=[],d=0;d<g.length;d++){var h=g[d];Array.isArray(h)?k.push.apply(k,$jscomp.arrayFromIterable(ii(h,c?c+"["+d+"]":void 0))):h&&Kf.isReference(h)&&k.push(c?{key:c+"["+d+"]",id:h.id}:h.id)}return k}function CB(g,c){return(g[c][Kf.ClassHelper.classMetaForSerializationProp]||{}).module||{}}function gE(g,c){return Kf.referencesOfId(g,c).map(function(k){return k+
":"+Kf.classNameOfId(g,k)})}function Ds(g,c){return(g[c][Kf.ClassHelper.classMetaForSerializationProp]||{}).className||"Object"}function hE(g,c,k,d){function h(x,y,E){if(!f)if(50<E)alert(""+l);else if(x===y)l.push(x),f=l.slice();else if(!a[x]){a[x]=!0;l.push(x);x=Kf.referencesOfId(g,x);for(var F=0;F<x.length;F++)h(x[F],y,E+1);l.pop()}}d=void 0===d?{}:d;var n=void 0===d.showPath?!0:d.showPath,b=d.hasOwnProperty("showClassNames")?d.showClassNames:!n,e=d.hasOwnProperty("showPropNames")?d.showPropNames:
n;d=d.hasOwnProperty("hideId")?d.hideId:n;var l=[],a={},f;h(c,k,0);if(!f)return null;if(!b&&!e)return f;c=[];for(k=0;k<f.length-1;k++){var m=f[k],r=f[k+1],v=[];d||v.push(m);b&&v.push((g[m][Kf.ClassHelper.classMetaForSerializationProp]||{}).className||"Object");e&&(m=Kf.referencesOfId(g,m,!0).find(function(x){return x.id===r})||{key:"????"},v.push(m.key));c.push(v.join(":"))}n&&(c="."+c.join("."));return c}function Sx(g,c,k){k=k.replace(/^\./,"");k=k.replace(/\[([^\]])+\]/g,".$1");k=Kf.Path(k).parts();
var d=g[c];for(c=0;;){if(1E3<c++)throw"stop";var h=k.shift();if(!h)break;if(!d.props||!d.props[h])throw Error("Property "+h+" not found for ref "+JSON.stringify(d));d=d.props[h].value;if(!d)throw Error("Property "+h+" has no value");for(;Array.isArray(d);)d=d[k.shift()];if(!d||!d.__ref__)return d;d=g[d.id]}return d}function vr(g,c,k,d){k=k.replace(/^\./,"");k=k.replace(/\[([^\]])+\]/g,".$1");k=Kf.Path(k).parts();g=g[c];c=k.shift();if(!g.props||!g.props[c])throw Error("Property "+c+" not found for ref "+
JSON.stringify(g));var h=(g.props[c]||{}).value;if(!h)throw Error("Property "+c+" has no value");if(k.length){var n=Kf.Path(k).get(h);Kf.Path(k).set(h,d(g,c,n))}else g.props[c].value=d(g,c,h)}function wr(g,c){var k=Kf.arr.withoutAll(Object.keys(c),g),d=k.filter(function(n){if("AttributeConnection"===Kf.classNameOfId(c,n))return c[n].props.garbageCollect.value}),h=Kf.referenceGraph(Kf.obj.dissoc(Object.assign({},c),d));g.forEach(function(n){n=Kf.graph.subgraphReachableBy(h,n);for(var b=k.length;b--;)k[b]in
n&&k.splice(b,1)});k.forEach(function(n){return delete c[n]});return k}function iE(g){var c={},k;for(k in g){c.$jscomp$loop$prop$id$922$2652=k;if("AttributeConnection"===Kf.classNameOfId(g,c.$jscomp$loop$prop$id$922$2652)){var d=g[c.$jscomp$loop$prop$id$922$2652];if(!g[Kf.Path("props.targetObj.value.id").get(d)]){if(d=g[Kf.Path("props.sourceObj.value.id").get(d)])d.props.attributeConnections.value=d.props.attributeConnections.value.filter(function(h){return function(n){return n.id!=h.$jscomp$loop$prop$id$922$2652}}(c));
delete g[c.$jscomp$loop$prop$id$922$2652]}}c={$jscomp$loop$prop$id$922$2652:c.$jscomp$loop$prop$id$922$2652}}}function fu(g,c){c=void 0===c?Kf.defaultExprSerializer:c;g.snapshot&&(g=g.snapshot);for(var k=[],d=0,h=Object.keys(g);d<h.length;d++){var n=g[h[d]];if(n.__expr__)(n=c.requiredModulesOf__expr__(n.__expr__))&&k.push.apply(k,$jscomp.arrayFromIterable(n));else{var b=Kf.ClassHelper.sourceModulesInObjRef(n);b&&b.length&&k.push.apply(k,$jscomp.arrayFromIterable(b.map(function(a){return(a.package&&
a.package.name||"")+"/"+a.pathInPackage})));if(n.props)for(var e in n.props){b=n.props[e].value;if("string"===typeof b){var l=c.requiredModulesOf__expr__(b);l&&k.push.apply(k,$jscomp.arrayFromIterable(l))}Kf.obj.isArray(b)&&b.forEach(function(a){"string"===typeof a&&(a=c.requiredModulesOf__expr__(a))&&k.push.apply(k,$jscomp.arrayFromIterable(a))})}}}return k=Kf.arr.uniq(k)}function DB(){throw Error("setTimeout has not been defined");}function jE(){throw Error("clearTimeout has not been defined");
}function XK(g){if(Bz===setTimeout)return setTimeout(g,0);if((Bz===DB||!Bz)&&setTimeout)return Bz=setTimeout,setTimeout(g,0);try{return Bz(g,0)}catch(c){try{return Bz.call(null,g,0)}catch(k){return Bz.call(this||kE,g,0)}}}function JS(){lE&&EB&&(lE=!1,EB.length?Tx=EB.concat(Tx):YK=-1,Tx.length&&YG())}function YG(){if(!lE){var g=XK(JS);lE=!0;for(var c=Tx.length;c;){EB=Tx;for(Tx=[];++YK<c;)EB&&EB[YK].run();YK=-1;c=Tx.length}EB=null;lE=!1;(function(k){if(Cz===clearTimeout)return clearTimeout(k);if((Cz===
jE||!Cz)&&clearTimeout)return Cz=clearTimeout,clearTimeout(k);try{Cz(k)}catch(d){try{return Cz.call(null,k)}catch(h){return Cz.call(this||kE,k)}}})(g)}}function ZK(g,c){(this||kE).fun=g;(this||kE).array=c}function yi(){}function Co(){if(G0)return H0;G0=!0;return H0={SEMVER_SPEC_VERSION:"2.0.0",MAX_LENGTH:256,MAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER||9007199254740991,MAX_SAFE_COMPONENT_LENGTH:16}}function Pn(){if(I0)return J0;I0=!0;var g=mj;return J0="object"===typeof g&&g.env&&g.env.NODE_DEBUG&&/\bsemver\b/i.test(g.env.NODE_DEBUG)?
function(c){for(var k=[],d=0;d<arguments.length;++d)k[d-0]=arguments[d];return console.error.apply(console,["SEMVER"].concat($jscomp.arrayFromIterable(k)))}:function(){}}function gu(){if(K0)return Yv;K0=!0;var g=Co().MAX_SAFE_COMPONENT_LENGTH,c=Pn();Yv=Yv={};var k=Yv.re=[],d=Yv.src=[],h=Yv.t={},n=0,b=function(e,l,a){var f=n++;c(f,l);h[e]=f;d[f]=l;k[f]=new RegExp(l,a?"g":void 0)};b("NUMERICIDENTIFIER","0|[1-9]\\d*");b("NUMERICIDENTIFIERLOOSE","[0-9]+");b("NONNUMERICIDENTIFIER","\\d*[a-zA-Z-][a-zA-Z0-9-]*");
b("MAINVERSION","("+d[h.NUMERICIDENTIFIER]+")\\.("+(d[h.NUMERICIDENTIFIER]+")\\.(")+(d[h.NUMERICIDENTIFIER]+")"));b("MAINVERSIONLOOSE","("+d[h.NUMERICIDENTIFIERLOOSE]+")\\.("+(d[h.NUMERICIDENTIFIERLOOSE]+")\\.(")+(d[h.NUMERICIDENTIFIERLOOSE]+")"));b("PRERELEASEIDENTIFIER","(?:"+d[h.NUMERICIDENTIFIER]+"|"+d[h.NONNUMERICIDENTIFIER]+")");b("PRERELEASEIDENTIFIERLOOSE","(?:"+d[h.NUMERICIDENTIFIERLOOSE]+"|"+d[h.NONNUMERICIDENTIFIER]+")");b("PRERELEASE","(?:-("+d[h.PRERELEASEIDENTIFIER]+"(?:\\."+d[h.PRERELEASEIDENTIFIER]+
")*))");b("PRERELEASELOOSE","(?:-?("+d[h.PRERELEASEIDENTIFIERLOOSE]+"(?:\\."+d[h.PRERELEASEIDENTIFIERLOOSE]+")*))");b("BUILDIDENTIFIER","[0-9A-Za-z-]+");b("BUILD","(?:\\+("+d[h.BUILDIDENTIFIER]+"(?:\\."+d[h.BUILDIDENTIFIER]+")*))");b("FULLPLAIN","v?"+d[h.MAINVERSION]+d[h.PRERELEASE]+"?"+d[h.BUILD]+"?");b("FULL","^"+d[h.FULLPLAIN]+"$");b("LOOSEPLAIN","[v=\\s]*"+d[h.MAINVERSIONLOOSE]+d[h.PRERELEASELOOSE]+"?"+d[h.BUILD]+"?");b("LOOSE","^"+d[h.LOOSEPLAIN]+"$");b("GTLT","((?:<|>)?=?)");b("XRANGEIDENTIFIERLOOSE",
d[h.NUMERICIDENTIFIERLOOSE]+"|x|X|\\*");b("XRANGEIDENTIFIER",d[h.NUMERICIDENTIFIER]+"|x|X|\\*");b("XRANGEPLAIN","[v=\\s]*("+d[h.XRANGEIDENTIFIER]+")(?:\\.("+(d[h.XRANGEIDENTIFIER]+")(?:\\.(")+(d[h.XRANGEIDENTIFIER]+")(?:")+(d[h.PRERELEASE]+")?"+d[h.BUILD]+"?)?)?"));b("XRANGEPLAINLOOSE","[v=\\s]*("+d[h.XRANGEIDENTIFIERLOOSE]+")(?:\\.("+(d[h.XRANGEIDENTIFIERLOOSE]+")(?:\\.(")+(d[h.XRANGEIDENTIFIERLOOSE]+")(?:")+(d[h.PRERELEASELOOSE]+")?"+d[h.BUILD]+"?)?)?"));b("XRANGE","^"+d[h.GTLT]+"\\s*"+d[h.XRANGEPLAIN]+
"$");b("XRANGELOOSE","^"+d[h.GTLT]+"\\s*"+d[h.XRANGEPLAINLOOSE]+"$");b("COERCE","(^|[^\\d])(\\d{1,"+g+"})(?:\\.(\\d{1,"+(g+"}))?(?:\\.(\\d{1,")+(g+"}))?(?:$|[^\\d])"));b("COERCERTL",d[h.COERCE],!0);b("LONETILDE","(?:~>?)");b("TILDETRIM","(\\s*)"+d[h.LONETILDE]+"\\s+",!0);Yv.tildeTrimReplace="$1~";b("TILDE","^"+d[h.LONETILDE]+d[h.XRANGEPLAIN]+"$");b("TILDELOOSE","^"+d[h.LONETILDE]+d[h.XRANGEPLAINLOOSE]+"$");b("LONECARET","(?:\\^)");b("CARETTRIM","(\\s*)"+d[h.LONECARET]+"\\s+",!0);Yv.caretTrimReplace=
"$1^";b("CARET","^"+d[h.LONECARET]+d[h.XRANGEPLAIN]+"$");b("CARETLOOSE","^"+d[h.LONECARET]+d[h.XRANGEPLAINLOOSE]+"$");b("COMPARATORLOOSE","^"+d[h.GTLT]+"\\s*("+d[h.LOOSEPLAIN]+")$|^$");b("COMPARATOR","^"+d[h.GTLT]+"\\s*("+d[h.FULLPLAIN]+")$|^$");b("COMPARATORTRIM","(\\s*)"+d[h.GTLT]+"\\s*("+d[h.LOOSEPLAIN]+"|"+d[h.XRANGEPLAIN]+")",!0);Yv.comparatorTrimReplace="$1$2$3";b("HYPHENRANGE","^\\s*("+d[h.XRANGEPLAIN]+")\\s+-\\s+("+(d[h.XRANGEPLAIN]+")\\s*$"));b("HYPHENRANGELOOSE","^\\s*("+d[h.XRANGEPLAINLOOSE]+
")\\s+-\\s+("+(d[h.XRANGEPLAINLOOSE]+")\\s*$"));b("STAR","(<|>)?=?\\s*\\*");b("GTE0","^\\s*>=\\s*0.0.0\\s*$");b("GTE0PRE","^\\s*>=\\s*0.0.0-0\\s*$");return Yv}function Qb(){if(L0)return M0;L0=!0;var g=["includePrerelease","loose","rtl"];return M0=function(c){return c?"object"!==typeof c?{loose:!0}:g.filter(function(k){return c[k]}).reduce(function(k,d){k[d]=!0;return k},{}):{}}}function Do(){if(N0)return O0;N0=!0;var g=/^[0-9]+$/,c=function(k,d){var h=g.test(k),n=g.test(d);h&&n&&(k=+k,d=+d);return k===
d?0:h&&!n?-1:n&&!h?1:k<d?-1:1};return O0={compareIdentifiers:c,rcompareIdentifiers:function(k,d){return c(d,k)}}}function Yl(){if(P0)return Q0;P0=!0;var g=Pn(),c=Co(),k=c.MAX_LENGTH,d=c.MAX_SAFE_INTEGER;c=gu();var h=c.re,n=c.t,b=Qb(),e=Do().compareIdentifiers,l=function(a,f){f=b(f);if(a instanceof l){if(a.loose===!!f.loose&&a.includePrerelease===!!f.includePrerelease)return a;a=a.version}else if("string"!==typeof a)throw new TypeError("Invalid Version: "+a);if(a.length>k)throw new TypeError("version is longer than "+
k+" characters");g("SemVer",a,f);this.options=f;this.loose=!!f.loose;this.includePrerelease=!!f.includePrerelease;f=a.trim().match(f.loose?h[n.LOOSE]:h[n.FULL]);if(!f)throw new TypeError("Invalid Version: "+a);this.raw=a;this.major=+f[1];this.minor=+f[2];this.patch=+f[3];if(this.major>d||0>this.major)throw new TypeError("Invalid major version");if(this.minor>d||0>this.minor)throw new TypeError("Invalid minor version");if(this.patch>d||0>this.patch)throw new TypeError("Invalid patch version");this.prerelease=
f[4]?f[4].split(".").map(function(m){if(/^[0-9]+$/.test(m)){var r=+m;if(0<=r&&r<d)return r}return m}):[];this.build=f[5]?f[5].split("."):[];this.format()};l.prototype.format=function(){this.version=this.major+"."+this.minor+"."+this.patch;this.prerelease.length&&(this.version+="-"+this.prerelease.join("."));return this.version};l.prototype.toString=function(){return this.version};l.prototype.compare=function(a){g("SemVer.compare",this.version,this.options,a);if(!(a instanceof l)){if("string"===typeof a&&
a===this.version)return 0;a=new l(a,this.options)}return a.version===this.version?0:this.compareMain(a)||this.comparePre(a)};l.prototype.compareMain=function(a){a instanceof l||(a=new l(a,this.options));return e(this.major,a.major)||e(this.minor,a.minor)||e(this.patch,a.patch)};l.prototype.comparePre=function(a){a instanceof l||(a=new l(a,this.options));if(this.prerelease.length&&!a.prerelease.length)return-1;if(!this.prerelease.length&&a.prerelease.length)return 1;if(!this.prerelease.length&&!a.prerelease.length)return 0;
var f=0;do{var m=this.prerelease[f],r=a.prerelease[f];g("prerelease compare",f,m,r);if(void 0===m&&void 0===r)return 0;if(void 0===r)return 1;if(void 0===m)return-1;if(m!==r)return e(m,r)}while(++f)};l.prototype.compareBuild=function(a){a instanceof l||(a=new l(a,this.options));var f=0;do{var m=this.build[f],r=a.build[f];g("prerelease compare",f,m,r);if(void 0===m&&void 0===r)return 0;if(void 0===r)return 1;if(void 0===m)return-1;if(m!==r)return e(m,r)}while(++f)};l.prototype.inc=function(a,f){switch(a){case "premajor":this.minor=
this.patch=this.prerelease.length=0;this.major++;this.inc("pre",f);break;case "preminor":this.patch=this.prerelease.length=0;this.minor++;this.inc("pre",f);break;case "prepatch":this.prerelease.length=0;this.inc("patch",f);this.inc("pre",f);break;case "prerelease":0===this.prerelease.length&&this.inc("patch",f);this.inc("pre",f);break;case "major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++;this.patch=this.minor=0;this.prerelease=[];break;case "minor":0===this.patch&&
0!==this.prerelease.length||this.minor++;this.patch=0;this.prerelease=[];break;case "patch":0===this.prerelease.length&&this.patch++;this.prerelease=[];break;case "pre":if(0===this.prerelease.length)this.prerelease=[0];else{for(a=this.prerelease.length;0<=--a;)"number"===typeof this.prerelease[a]&&(this.prerelease[a]++,a=-2);-1===a&&this.prerelease.push(0)}f&&(this.prerelease[0]===f?isNaN(this.prerelease[1])&&(this.prerelease=[f,0]):this.prerelease=[f,0]);break;default:throw Error("invalid increment argument: "+
a);}this.format();this.raw=this.version;return this};return Q0=l}function Zv(){if(R0)return S0;R0=!0;var g=Co().MAX_LENGTH,c=gu(),k=c.re,d=c.t,h=Yl(),n=Qb();return S0=function(b,e){e=n(e);if(b instanceof h)return b;if("string"!==typeof b||b.length>g||!(e.loose?k[d.LOOSE]:k[d.FULL]).test(b))return null;try{return new h(b,e)}catch(l){return null}}}function xq(){if(T0)return U0;T0=!0;var g=Zv();return U0=function(c,k){return(c=g(c,k))?c.version:null}}function $K(){if(V0)return W0;V0=!0;var g=Yl();return W0=
function(c,k,d,h){"string"===typeof d&&(h=d,d=void 0);try{return(new g(c,d)).inc(k,h).version}catch(n){return null}}}function dp(){if(X0)return Y0;X0=!0;var g=Yl();return Y0=function(c,k,d){return(new g(c,d)).compare(new g(k,d))}}function ZG(){if(Z0)return $0;Z0=!0;var g=dp();return $0=function(c,k,d){return 0===g(c,k,d)}}function aL(){if(a1)return b1;a1=!0;var g=Zv(),c=ZG();return b1=function(k,d){if(c(k,d))return null;k=g(k);d=g(d);var h=k.prerelease.length||d.prerelease.length,n=h?"pre":"",b;for(b in k)if(("major"===
b||"minor"===b||"patch"===b)&&k[b]!==d[b])return n+b;return h?"prerelease":""}}function Dz(){if(c1)return d1;c1=!0;var g=Yl();return d1=function(c,k){return(new g(c,k)).major}}function FB(){if(e1)return f1;e1=!0;var g=Yl();return f1=function(c,k){return(new g(c,k)).minor}}function mE(){if(g1)return h1;g1=!0;var g=Zv();return h1=function(c,k){return(c=g(c,k))&&c.prerelease.length?c.prerelease:null}}function bL(){if(i1)return j1;i1=!0;var g=dp();return j1=function(c,k,d){return g(k,c,d)}}function Yk(){if(k1)return l1;
k1=!0;var g=Yl();return l1=function(c,k,d){c=new g(c,d);k=new g(k,d);return c.compare(k)||c.compareBuild(k)}}function $v(){if(m1)return n1;m1=!0;var g=Yk();return n1=function(c,k){return c.sort(function(d,h){return g(h,d,k)})}}function Km(){if(o1)return p1;o1=!0;var g=dp();return p1=function(c,k,d){return 0<g(c,k,d)}}function $G(){if(q1)return r1;q1=!0;var g=dp();return r1=function(c,k,d){return 0>g(c,k,d)}}function Yh(){if(s1)return t1;s1=!0;var g=dp();return t1=function(c,k,d){return 0<=g(c,k,d)}}
function nE(){if(u1)return v1;u1=!0;var g=dp();return v1=function(c,k,d){return 0!==g(c,k,d)}}function aH(){if(w1)return x1;w1=!0;var g=dp();return x1=function(c,k,d){return 0>=g(c,k,d)}}function cL(){if(y1)return z1;y1=!0;var g=ZG(),c=nE(),k=Km(),d=Yh(),h=$G(),n=aH();return z1=function(b,e,l,a){switch(e){case "===":return"object"===typeof b&&(b=b.version),"object"===typeof l&&(l=l.version),b===l;case "!==":return"object"===typeof b&&(b=b.version),"object"===typeof l&&(l=l.version),b!==l;case "":case "=":case "==":return g(b,
l,a);case "!=":return c(b,l,a);case ">":return k(b,l,a);case ">=":return d(b,l,a);case "<":return h(b,l,a);case "<=":return n(b,l,a);default:throw new TypeError("Invalid operator: "+e);}}}function GB(){if(A1)return B1;A1=!0;var g=Yl(),c=Zv(),k=gu(),d=k.re,h=k.t;return B1=function(n,b){if(n instanceof g)return n;"number"===typeof n&&(n=String(n));if("string"!==typeof n)return null;b=b||{};var e=null;if(b.rtl){for(var l;(l=d[h.COERCERTL].exec(n))&&(!e||e.index+e[0].length!==n.length);)e&&l.index+l[0].length===
e.index+e[0].length||(e=l),d[h.COERCERTL].lastIndex=l.index+l[1].length+l[2].length;d[h.COERCERTL].lastIndex=-1}else e=n.match(d[h.COERCE]);return null===e?null:c(e[2]+"."+(e[3]||"0")+"."+(e[4]||"0"),b)}}function wj(g){var c=this;c instanceof wj||(c=new wj);c.tail=null;c.head=null;c.length=0;if(g&&"function"===typeof g.forEach)g.forEach(function(h){c.push(h)});else if(0<arguments.length)for(var k=0,d=arguments.length;k<d;k++)c.push(arguments[k]);return c}function ln(g,c,k,d){if(!(this instanceof ln))return new ln(g,
c,k,d);this.list=d;this.value=g;c?(c.next=this,this.prev=c):this.prev=null;k?(k.prev=this,this.next=k):this.next=null}function uh(){if(C1)return KS;C1=!0;var g=function(N,Y){var W=this;Y=k(Y);if(N instanceof g)return N.loose===!!Y.loose&&N.includePrerelease===!!Y.includePrerelease?N:new g(N.raw,Y);if(N instanceof d)return this.raw=N.value,this.set=[[N]],this.format(),this;this.options=Y;this.loose=!!Y.loose;this.includePrerelease=!!Y.includePrerelease;this.raw=N;this.set=N.split(/\s*\|\|\s*/).map(function(da){return W.parseRange(da.trim())}).filter(function(da){return da.length});
if(!this.set.length)throw new TypeError("Invalid SemVer Range: "+N);if(1<this.set.length)if(N=this.set[0],this.set=this.set.filter(function(da){return"<0.0.0-0"!==da[0].value}),0===this.set.length)this.set=[N];else if(1<this.set.length)for(N=$jscomp.makeIterator(this.set),Y=N.next();!Y.done;Y=N.next())if(Y=Y.value,1===Y.length&&""===Y[0].value){this.set=[Y];break}this.format()};g.prototype.format=function(){return this.range=this.set.map(function(N){return N.join(" ").trim()}).join("||").trim()};
g.prototype.toString=function(){return this.range};g.prototype.parseRange=function(N){var Y=this;N=N.trim();var W="parseRange:"+Object.keys(this.options).join(",")+":"+N,da=c.get(W);if(da)return da;da=this.options.loose;N=N.replace(da?e[l.HYPHENRANGELOOSE]:e[l.HYPHENRANGE],P(this.options.includePrerelease));h("hyphen replace",N);N=N.replace(e[l.COMPARATORTRIM],a);h("comparator trim",N,e[l.COMPARATORTRIM]);N=N.replace(e[l.TILDETRIM],f);N=N.replace(e[l.CARETTRIM],m);N=N.split(/\s+/).join(" ");var va=
da?e[l.COMPARATORLOOSE]:e[l.COMPARATOR];da=N.split(" ").map(function(L){var Z=L;L=Y.options;h("comp",Z,L);Z=E(Z,L);h("caret",Z);Z=x(Z,L);h("tildes",Z);Z=I(Z,L);h("xrange",Z);h("replaceStars",Z,L);Z=Z.trim().replace(e[l.STAR],"");h("stars",Z);return Z}).join(" ").split(/\s+/).map(function(L){var Z=Y.options;h("replaceGTE0",L,Z);return L.trim().replace(e[Z.includePrerelease?l.GTE0PRE:l.GTE0],"")}).filter(this.options.loose?function(L){return!!L.match(va)}:function(){return!0}).map(function(L){return new d(L,
Y.options)});N=new Map;da=$jscomp.makeIterator(da);for(var za=da.next();!za.done;za=da.next()){za=za.value;if("<0.0.0-0"===za.value)return[za];N.set(za.value,za)}1<N.size&&N.has("")&&N.delete("");N=[].concat($jscomp.arrayFromIterable(N.values()));c.set(W,N);return N};g.prototype.intersects=function(N,Y){if(!(N instanceof g))throw new TypeError("a Range is required");return this.set.some(function(W){return r(W,Y)&&N.set.some(function(da){return r(da,Y)&&W.every(function(va){return da.every(function(za){return va.intersects(za,
Y)})})})})};g.prototype.test=function(N){if(!N)return!1;if("string"===typeof N)try{N=new n(N,this.options)}catch(L){return!1}for(var Y=0;Y<this.set.length;Y++){a:{var W=this.set[Y];for(var da=N,va=this.options,za=0;za<W.length;za++)if(!W[za].test(da)){W=!1;break a}if(da.prerelease.length&&!va.includePrerelease){for(va=0;va<W.length;va++)if(h(W[va].semver),W[va].semver!==d.ANY&&0<W[va].semver.prerelease.length&&(za=W[va].semver,za.major===da.major&&za.minor===da.minor&&za.patch===da.patch)){W=!0;break a}W=
!1}else W=!0}if(W)return!0}return!1};KS=g;var c=new Fga({max:1E3}),k=Qb(),d=oE(),h=Pn(),n=Yl(),b=gu(),e=b.re,l=b.t,a=b.comparatorTrimReplace,f=b.tildeTrimReplace,m=b.caretTrimReplace,r=function(N,Y){var W=!0;N=N.slice();for(var da=N.pop();W&&N.length;)W=N.every(function(va){return da.intersects(va,Y)}),da=N.pop();return W},v=function(N){return!N||"x"===N.toLowerCase()||"*"===N},x=function(N,Y){return N.trim().split(/\s+/).map(function(W){return y(W,Y)}).join(" ")},y=function(N,Y){return N.replace(Y.loose?
e[l.TILDELOOSE]:e[l.TILDE],function(W,da,va,za,L){h("tilde",N,W,da,va,za,L);v(da)?W="":v(va)?W=">="+da+".0.0 <"+(+da+1)+".0.0-0":v(za)?W=">="+da+"."+va+".0 <"+da+"."+(+va+1)+".0-0":L?(h("replaceTilde pr",L),W=">="+da+"."+va+"."+za+"-"+L+" <"+da+"."+(+va+1)+".0-0"):W=">="+da+"."+va+"."+za+" <"+da+"."+(+va+1)+".0-0";h("tilde return",W);return W})},E=function(N,Y){return N.trim().split(/\s+/).map(function(W){return F(W,Y)}).join(" ")},F=function(N,Y){h("caret",N,Y);var W=Y.includePrerelease?"-0":"";
return N.replace(Y.loose?e[l.CARETLOOSE]:e[l.CARET],function(da,va,za,L,Z){h("caret",N,da,va,za,L,Z);v(va)?da="":v(za)?da=">="+va+".0.0"+W+" <"+(+va+1)+".0.0-0":v(L)?da="0"===va?">="+va+"."+za+".0"+W+" <"+va+"."+(+za+1)+".0-0":">="+va+"."+za+".0"+W+" <"+(+va+1)+".0.0-0":Z?(h("replaceCaret pr",Z),da="0"===va?"0"===za?">="+va+"."+za+"."+L+"-"+Z+" <"+va+"."+za+"."+(+L+1)+"-0":">="+va+"."+za+"."+L+"-"+Z+" <"+va+"."+(+za+1)+".0-0":">="+va+"."+za+"."+L+"-"+Z+" <"+(+va+1)+".0.0-0"):(h("no pr"),da="0"===
va?"0"===za?">="+va+"."+za+"."+L+W+" <"+va+"."+za+"."+(+L+1)+"-0":">="+va+"."+za+"."+L+W+" <"+va+"."+(+za+1)+".0-0":">="+va+"."+za+"."+L+" <"+(+va+1)+".0.0-0");h("caret return",da);return da})},I=function(N,Y){h("replaceXRanges",N,Y);return N.split(/\s+/).map(function(W){return J(W,Y)}).join(" ")},J=function(N,Y){N=N.trim();return N.replace(Y.loose?e[l.XRANGELOOSE]:e[l.XRANGE],function(W,da,va,za,L,Z){h("xRange",N,W,da,va,za,L,Z);var R=v(va),X=R||v(za);L=X||v(L);"="===da&&L&&(da="");Z=Y.includePrerelease?
"-0":"";R?W=">"===da||"<"===da?"<0.0.0-0":"*":da&&L?(X&&(za=0),L=0,">"===da?(da=">=",X?(va=+va+1,za=0):za=+za+1,L=0):"<="===da&&(da="<",X?va=+va+1:za=+za+1),"<"===da&&(Z="-0"),W=da+va+"."+za+"."+L+Z):X?W=">="+va+".0.0"+Z+" <"+(+va+1)+".0.0-0":L&&(W=">="+va+"."+za+".0"+Z+" <"+va+"."+(+za+1)+".0-0");h("xRange return",W);return W})},P=function(N){return function(Y,W,da,va,za,L,Z,R,X,ja,fa,ua,gb){W=v(da)?"":v(va)?">="+da+".0.0"+(N?"-0":""):v(za)?">="+da+"."+va+".0"+(N?"-0":""):L?">="+W:">="+W+(N?"-0":
"");R=v(X)?"":v(ja)?"<"+(+X+1)+".0.0-0":v(fa)?"<"+X+"."+(+ja+1)+".0-0":ua?"<="+X+"."+ja+"."+fa+"-"+ua:N?"<"+X+"."+ja+"."+(+fa+1)+"-0":"<="+R;return(W+" "+R).trim()}};return KS}function oE(){if(D1)return LS;D1=!0;var g=Symbol("SemVer ANY"),c=function(f,m){m=k(m);if(f instanceof c){if(f.loose===!!m.loose)return f;f=f.value}e("comparator",f,m);this.options=m;this.loose=!!m.loose;this.parse(f);this.value=this.semver===g?"":this.operator+this.semver.version;e("comp",this)};c.prototype.parse=function(f){var m=
f.match(this.options.loose?h[n.COMPARATORLOOSE]:h[n.COMPARATOR]);if(!m)throw new TypeError("Invalid comparator: "+f);this.operator=void 0!==m[1]?m[1]:"";"="===this.operator&&(this.operator="");this.semver=m[2]?new l(m[2],this.options.loose):g};c.prototype.toString=function(){return this.value};c.prototype.test=function(f){e("Comparator.test",f,this.options.loose);if(this.semver===g||f===g)return!0;if("string"===typeof f)try{f=new l(f,this.options)}catch(m){return!1}return b(f,this.operator,this.semver,
this.options)};c.prototype.intersects=function(f,m){if(!(f instanceof c))throw new TypeError("a Comparator is required");m&&"object"===typeof m||(m={loose:!!m,includePrerelease:!1});if(""===this.operator)return""===this.value?!0:(new a(f.value,m)).test(this.value);if(""===f.operator)return""===f.value?!0:(new a(this.value,m)).test(f.semver);var r=(">="===this.operator||">"===this.operator)&&(">="===f.operator||">"===f.operator),v=("<="===this.operator||"<"===this.operator)&&("<="===f.operator||"<"===
f.operator),x=this.semver.version===f.semver.version,y=(">="===this.operator||"<="===this.operator)&&(">="===f.operator||"<="===f.operator),E=b(this.semver,"<",f.semver,m)&&(">="===this.operator||">"===this.operator)&&("<="===f.operator||"<"===f.operator);f=b(this.semver,">",f.semver,m)&&("<="===this.operator||"<"===this.operator)&&(">="===f.operator||">"===f.operator);return r||v||x&&y||E||f};$jscomp.global.Object.defineProperties(c,{ANY:{configurable:!0,enumerable:!0,get:function(){return g}}});
LS=c;var k=Qb(),d=gu(),h=d.re,n=d.t,b=cL(),e=Pn(),l=Yl(),a=uh();return LS}function Ux(){if(E1)return F1;E1=!0;var g=uh();return F1=function(c,k,d){try{k=new g(k,d)}catch(h){return!1}return k.test(c)}}function aw(){if(G1)return H1;G1=!0;var g=Yl(),c=uh();return H1=function(k,d,h){var n=null,b=null,e=null;try{e=new c(d,h)}catch(l){return null}k.forEach(function(l){!e.test(l)||n&&-1!==b.compare(l)||(n=l,b=new g(n,h))});return n}}function MS(){if(I1)return J1;I1=!0;var g=Yl(),c=uh(),k=Km();return J1=
function(d,h){d=new c(d,h);h=new g("0.0.0");if(d.test(h))return h;h=new g("0.0.0-0");if(d.test(h))return h;h=null;for(var n={},b=0;b<d.set.length;n={$jscomp$loop$prop$setMin$2654:n.$jscomp$loop$prop$setMin$2654},++b){var e=d.set[b];n.$jscomp$loop$prop$setMin$2654=null;e.forEach(function(l){return function(a){var f=new g(a.semver.version);switch(a.operator){case ">":0===f.prerelease.length?f.patch++:f.prerelease.push(0),f.raw=f.format();case "":case ">=":if(!l.$jscomp$loop$prop$setMin$2654||k(f,l.$jscomp$loop$prop$setMin$2654))l.$jscomp$loop$prop$setMin$2654=
f;break;case "<":case "<=":break;default:throw Error("Unexpected operation: "+a.operator);}}}(n));!n.$jscomp$loop$prop$setMin$2654||h&&!k(h,n.$jscomp$loop$prop$setMin$2654)||(h=n.$jscomp$loop$prop$setMin$2654)}return h&&d.test(h)?h:null}}function HB(){if(K1)return L1;K1=!0;var g=uh();return L1=function(c,k){try{return(new g(c,k)).range||"*"}catch(d){return null}}}function IB(){if(M1)return N1;M1=!0;var g=uh();return N1=function(c,k,d){c=new g(c,d);k=new g(k,d);return c.intersects(k)}}function yq(){if(O1)return P1;
O1=!0;var g=Zv();return P1=function(c,k){return(c=g(c.trim().replace(/^[=v]+/,""),k))?c.version:null}}function El(){if(Q1)return R1;Q1=!0;var g=Yl();return R1=function(c,k){return(new g(c,k)).patch}}function pE(){if(S1)return T1;S1=!0;var g=dp();return T1=function(c,k){return g(c,k,!0)}}function NS(){if(U1)return V1;U1=!0;var g=Yk();return V1=function(c,k){return c.sort(function(d,h){return g(d,h,k)})}}function OS(){if(W1)return X1;W1=!0;var g=uh();return X1=function(c,k){return(new g(c,k)).set.map(function(d){return d.map(function(h){return h.value}).join(" ").trim().split(" ")})}}
function dL(){if(Y1)return Z1;Y1=!0;var g=Yl(),c=uh();return Z1=function(k,d,h){var n=null,b=null,e=null;try{e=new c(d,h)}catch(l){return null}k.forEach(function(l){!e.test(l)||n&&1!==b.compare(l)||(n=l,b=new g(n,h))});return n}}function Sg(){if($1)return a2;$1=!0;var g=Yl(),c=oE(),k=c.ANY,d=uh(),h=Ux(),n=Km(),b=$G(),e=aH(),l=Yh();return a2=function(a,f,m,r){a=new g(a,r);f=new d(f,r);switch(m){case ">":var v=n;m=e;var x=b;var y=">";var E=">=";break;case "<":v=b;m=l;x=n;y="<";E="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"');
}if(h(a,f,r))return!1;for(var F={},I=0;I<f.set.length;F={$jscomp$loop$prop$high$2656:F.$jscomp$loop$prop$high$2656,$jscomp$loop$prop$low$2657:F.$jscomp$loop$prop$low$2657},++I){var J=f.set[I];F.$jscomp$loop$prop$high$2656=null;F.$jscomp$loop$prop$low$2657=null;J.forEach(function(P){return function(N){N.semver===k&&(N=new c(">=0.0.0"));P.$jscomp$loop$prop$high$2656=P.$jscomp$loop$prop$high$2656||N;P.$jscomp$loop$prop$low$2657=P.$jscomp$loop$prop$low$2657||N;v(N.semver,P.$jscomp$loop$prop$high$2656.semver,
r)?P.$jscomp$loop$prop$high$2656=N:x(N.semver,P.$jscomp$loop$prop$low$2657.semver,r)&&(P.$jscomp$loop$prop$low$2657=N)}}(F));if(F.$jscomp$loop$prop$high$2656.operator===y||F.$jscomp$loop$prop$high$2656.operator===E||(!F.$jscomp$loop$prop$low$2657.operator||F.$jscomp$loop$prop$low$2657.operator===y)&&m(a,F.$jscomp$loop$prop$low$2657.semver)||F.$jscomp$loop$prop$low$2657.operator===E&&x(a,F.$jscomp$loop$prop$low$2657.semver))return!1}return!0}}function hu(){if(b2)return c2;b2=!0;var g=Sg();return c2=
function(c,k,d){return g(c,k,">",d)}}function qE(){if(d2)return e2;d2=!0;var g=Sg();return e2=function(c,k,d){return g(c,k,"<",d)}}function ej(){if(f2)return g2;f2=!0;var g=Ux(),c=dp();return g2=function(k,d,h){var n=[],b=null,e=null;k=k.sort(function(f,m){return c(f,m,h)});for(var l=$jscomp.makeIterator(k),a=l.next();!a.done;a=l.next())a=a.value,g(a,d,h)?(e=a,b||(b=a)):(e&&n.push([b,e]),b=e=null);b&&n.push([b,null]);b=[];n=$jscomp.makeIterator(n);for(e=n.next();!e.done;e=n.next())l=$jscomp.makeIterator(e.value),
e=l.next().value,l=l.next().value,e===l?b.push(e):l||e!==k[0]?l?e===k[0]?b.push("<="+l):b.push(e+" - "+l):b.push(">="+e):b.push("*");k=b.join(" || ");return k.length<("string"===typeof d.raw?d.raw:String(d)).length?k:d}}function eL(){if(h2)return i2;h2=!0;var g=uh(),c=oE(),k=c.ANY,d=Ux(),h=dp(),n=function(l,a,f){if(l===a)return!0;if(1===l.length&&l[0].semver===k){if(1===a.length&&a[0].semver===k)return!0;l=f.includePrerelease?[new c(">=0.0.0-0")]:[new c(">=0.0.0")]}if(1===a.length&&a[0].semver===
k){if(f.includePrerelease)return!0;a=[new c(">=0.0.0")]}var m=new Set,r,v,x=$jscomp.makeIterator(l);for(l=x.next();!l.done;l=x.next())l=l.value,">"===l.operator||">="===l.operator?r=b(r,l,f):"<"===l.operator||"<="===l.operator?v=e(v,l,f):m.add(l.semver);if(1<m.size)return null;if(r&&v){var y=h(r.semver,v.semver,f);if(0<y||0===y&&(">="!==r.operator||"<="!==v.operator))return null}for(l=$jscomp.makeIterator(m).next();!l.done;){y=l.value;if(r&&!d(y,String(r),f)||v&&!d(y,String(v),f))return null;r=$jscomp.makeIterator(a);
for(l=r.next();!l.done;l=r.next())if(!d(y,String(l.value),f))return!1;return!0}m=v&&!f.includePrerelease&&v.semver.prerelease.length?v.semver:!1;x=r&&!f.includePrerelease&&r.semver.prerelease.length?r.semver:!1;m&&1===m.prerelease.length&&"<"===v.operator&&0===m.prerelease[0]&&(m=!1);a=$jscomp.makeIterator(a);for(l=a.next();!l.done;l=a.next()){l=l.value;var E=E||">"===l.operator||">="===l.operator;var F=F||"<"===l.operator||"<="===l.operator;if(r)if(x&&l.semver.prerelease&&l.semver.prerelease.length&&
l.semver.major===x.major&&l.semver.minor===x.minor&&l.semver.patch===x.patch&&(x=!1),">"===l.operator||">="===l.operator){var I=b(r,l,f);if(I===l&&I!==r)return!1}else if(">="===r.operator&&!d(r.semver,String(l),f))return!1;if(v)if(m&&l.semver.prerelease&&l.semver.prerelease.length&&l.semver.major===m.major&&l.semver.minor===m.minor&&l.semver.patch===m.patch&&(m=!1),"<"===l.operator||"<="===l.operator){if(I=e(v,l,f),I===l&&I!==v)return!1}else if("<="===v.operator&&!d(v.semver,String(l),f))return!1;
if(!l.operator&&(v||r)&&0!==y)return!1}return r&&F&&!v&&0!==y||v&&E&&!r&&0!==y||x||m?!1:!0},b=function(l,a,f){if(!l)return a;f=h(l.semver,a.semver,f);return 0<f?l:0>f?a:">"===a.operator&&">="===l.operator?a:l},e=function(l,a,f){if(!l)return a;f=h(l.semver,a.semver,f);return 0>f?l:0<f?a:"<"===a.operator&&"<="===l.operator?a:l};return i2=function(l,a,f){f=void 0===f?{}:f;if(l===a)return!0;l=new g(l,f);a=new g(a,f);var m=!1;l=$jscomp.makeIterator(l.set);var r=l.next();a:for(;!r.done;r=l.next()){r=r.value;
for(var v=$jscomp.makeIterator(a.set),x=v.next();!x.done;x=v.next())if(x=n(r,x.value,f),m=m||null!==x,x)continue a;if(m)return!1}return!0}}function ep(g){g=Object.assign({plugins:Vf.allPlugins,reinitializeIds:!1,skipMigrations:!0},g);if(g.reinitializeIds&&"function"!==typeof g.reinitializeIds)throw Error("serializer option 'reinitializeIds' needs to be a function(id, ref) => id");return g}function bw(g,c){c=Vf.normalizeOptions(c);var k=c.objPool||new Vf.ObjectPool(c);c=">="+Vf.serializerVersion.replace(Vf.majorAndMinorVersionRe,
"");g=k.snapshotObject(g);Vf.removeUnreachableObjects([g.id],g.snapshot);Vf.clearDanglingConnections(g.snapshot);g.requiredVersion=c;return g}function iu(g,c){c=Vf.normalizeOptions(c);var k=g.requiredVersion;k&&!Vf.semver.satisfies(Vf.serializerVersion,k)&&console.warn("[lively.serializer deserialization] snapshot requires version "+(k+" but serializer has incompatible version ")+(Vf.serializerVersion+". Deserialization might fail...!"));return(c.objPool||new Vf.ObjectPool(c)).resolveFromSnapshotAndId(g)}
function JB(g,c,k){function d(){var e=Vf.deserialize(g,k);Vf.runMigrations(n,"objectConverter",g,h);return e}k=Vf.normalizeOptions(k);c.length&&(k.skipMigrations=!1);var h=k.objPool||(k.objPool=new Vf.ObjectPool(k));c=Vf.normalizeMigrations(c);var n=c.after,b;Vf.runMigrations(c.before,"snapshotConverter",g,h);"function"===typeof k.onDeserializationStart&&(b=k.onDeserializationStart(g,k));return b instanceof Promise?b.then(d):d()}function KB(g,c){return Vf.deserialize(Vf.serialize(g,c),c)}function PS(g){return"[object Array]"===
Gga.call(g)}function zq(g,c,k){(this||QS).type=Number(g);(this||QS).vNode=c;(this||QS).patch=k}function bH(g,c){var k=g.vnode;k||(k=g.vnode=g.render(c));if(!(Hga(k)||Iga(k)||Jga(k)))throw Error("thunk did not return a valid node");return k}function fL(g,c){var k;for(k in g){if(!(k in c)){var d=d||{};d[k]=void 0}var h=g[k],n=c[k];if(h!==n)if(j2(h)&&j2(n))if(gL(n)!==gL(h))d=d||{},d[k]=n;else if(Kga(n))d=d||{},d[k]=n;else{if(h=fL(h,n))d=d||{},d[k]=h}else d=d||{},d[k]=n}for(var b in c)b in g||(d=d||{},
d[b]=c[b]);return d}function gL(g){if(Object.getPrototypeOf)return Object.getPrototypeOf(g);if(g.__proto__)return g.__proto__;if(g.constructor)return g.constructor.prototype}function Lm(g,c){var k={a:g};hL(g,c,k,0);return k}function hL(g,c,k,d){if(g!==c){var h=k[d],n=!1;if(iL(g)||iL(c))ju(g,c,k,d);else if(null==c)jL(g)||(cH(g,k,d),Qn(g,k,d),h=k[d]),h=xr(h,new Fl(Fl.REMOVE,g,c));else if(LB(c))if(LB(g))if(g.tagName===c.tagName&&g.namespace===c.namespace&&g.key===c.key){var b=Lga(g.properties,c.properties);
b&&(h=xr(h,new Fl(Fl.PROPS,g,b)));b=d;var e=g.children;c=c.children;var l=dH(c),a=l.keys,f=l.free;if(f.length===c.length)c={children:c,moves:null};else{l=dH(e);var m=l.keys;if(l.free.length===e.length)c={children:c,moves:null};else{l=[];for(var r=0,v=f.length,x=0,y=0;y<e.length;y++){var E=e[y];E.key?a.hasOwnProperty(E.key)?(E=a[E.key],l.push(c[E])):(x++,l.push(null)):r<v?(E=f[r++],l.push(c[E])):(x++,l.push(null))}f=r>=f.length?c.length:f[r];for(r=0;r<c.length;r++)v=c[r],v.key?m.hasOwnProperty(v.key)||
l.push(v):r>=f&&l.push(v);m=l.slice();f=0;r=[];v=[];for(E=0;E<c.length;){var F=c[E];for(y=m[f];null===y&&m.length;)r.push(rE(m,f,null)),y=m[f];y&&y.key===F.key?(f++,E++):F.key?(y&&y.key?a[y.key]!==E+1?(r.push(rE(m,f,y.key)),(y=m[f])&&y.key===F.key?f++:v.push({key:F.key,to:E})):v.push({key:F.key,to:E}):v.push({key:F.key,to:E}),E++):y&&y.key&&r.push(rE(m,f,y.key))}for(;f<m.length;)y=m[f],r.push(rE(m,f,y&&y.key));c=r.length!==x||v.length?{children:l,moves:{removes:r,inserts:v}}:{children:l,moves:null}}}a=
c.children;l=e.length;x=a.length;l=l>x?l:x;for(x=0;x<l;x++)m=e[x],f=a[x],b+=1,m?hL(m,f,k,b):f&&(h=xr(h,new Fl(Fl.INSERT,null,f))),LB(m)&&m.count&&(b+=m.count);c.moves&&(h=xr(h,new Fl(Fl.ORDER,g,c.moves)))}else h=xr(h,new Fl(Fl.VNODE,g,c)),n=!0;else h=xr(h,new Fl(Fl.VNODE,g,c)),n=!0;else k2(c)?k2(g)?g.text!==c.text&&(h=xr(h,new Fl(Fl.VTEXT,g,c))):(h=xr(h,new Fl(Fl.VTEXT,g,c)),n=!0):jL(c)&&(jL(g)||(n=!0),h=xr(h,new Fl(Fl.WIDGET,g,c)));h&&(k[d]=h);n&&(cH(g,k,d),Qn(g,k,d))}}function Qn(g,c,k){if(jL(g))"function"===
typeof g.destroy&&(c[k]=xr(c[k],new Fl(Fl.REMOVE,g,null)));else if(LB(g)&&(g.hasWidgets||g.hasThunks)){g=g.children;for(var d=g.length,h=0;h<d;h++){var n=g[h];k+=1;Qn(n,c,k);LB(n)&&n.count&&(k+=n.count)}}else iL(g)&&ju(g,null,c,k)}function ju(g,c,k,d){g=Mga(g,c);g=Lm(g.a,g.b);a:{for(h in g)if("a"!==h){var h=!0;break a}h=!1}h&&(k[d]=new Fl(Fl.THUNK,null,g))}function cH(g,c,k){if(LB(g)){if(g.hooks){var d=c[k],h=Fl.PROPS,n=g.hooks,b={},e;for(e in n)b[e]=void 0;c[k]=xr(d,new Fl(h,g,b))}if(g.descendantHooks||
g.hasThunks)for(g=g.children,d=g.length,h=0;h<d;h++)n=g[h],k+=1,cH(n,c,k),LB(n)&&n.count&&(k+=n.count)}else iL(g)&&ju(g,null,c,k)}function rE(g,c,k){g.splice(c,1);return{from:c,key:k}}function dH(g){for(var c={},k=[],d=g.length,h=0;h<d;h++){var n=g[h];n.key?c[n.key]=h:k.push(h)}return{keys:c,free:k}}function xr(g,c){return g?(Nga(g)?g.push(c):g=[g,c],g):c}function kL(g,c,k,d){if(d)if(d=d[c],l2(d))d.unhook&&d.unhook(g,c,k);else if("attributes"===c)for(var h in d)g.removeAttribute(h);else if("style"===
c)for(var n in d)g.style[n]="";else g[c]="string"===typeof d?"":null}function lL(g){if(Object.getPrototypeOf)return Object.getPrototypeOf(g);if(g.__proto__)return g.__proto__;if(g.constructor)return g.constructor.prototype}function eH(g,c){var k=c?c.document||m2:m2,d=c?c.warn:null;g=Oga(g).a;if(Pga(g))return g.init();if(Qga(g))return k.createTextNode(g.text);if(!Rga(g))return d&&d("Item is not a valid virtual dom node",g),null;k=null===g.namespace?k.createElement(g.tagName):k.createElementNS(g.namespace,
g.tagName);Sga(k,g.properties);g=g.children;for(d=0;d<g.length;d++){var h=eH(g[d],c);h&&k.appendChild(h)}return k}function mL(g,c,k,d,h){d=d||{};if(g){fH(k,h,h)&&(d[h]=g);var n=c.children;if(n){g=g.childNodes;for(var b=0;b<c.children.length;b++){h+=1;var e=n[b]||Tga,l=h+(e.count||0);fH(k,h,l)&&mL(g[b],e,k,d,h);h=l}}}return d}function fH(g,c,k){if(0===g.length)return!1;for(var d=0,h=g.length-1,n,b;d<=h;){n=(h+d)/2>>0;b=g[n];if(d===h)return b>=c&&b<=k;if(b<c)d=n+1;else if(b>k)h=n-1;else return!0}return!1}
function RS(g,c){return g>c?1:-1}function nL(g,c){"function"===typeof c.destroy&&Uga(c)&&c.destroy(g)}function oL(g,c,k){k=k||{};k.patch=k.patch&&k.patch!==oL?k.patch:SS;k.render=k.render||Vga;return k.patch(g,c,k)}function SS(g,c,k){var d=[];for(h in c)"a"!==h&&d.push(Number(h));if(0===d.length)return g;var h=Wga(g,c.a,d);var n=g.ownerDocument;k.document||n===Xga||(k.document=n);for(n=0;n<d.length;n++){var b=d[n];var e=h[b],l=c[b],a=k;if(e)if(Yga(l))for(var f=0;f<l.length;f++)b=n2(l[f],e,a),e===
g&&(g=b);else b=n2(l,e,a),e===g&&(g=b)}return g}function Ez(g,c,k,d,h){(this||cw).tagName=g;(this||cw).properties=c||Zga;(this||cw).children=k||$ga;(this||cw).key=null!=d?String(d):void 0;(this||cw).namespace="string"===typeof h?h:null;g=k&&k.length||0;d=0;var n=h=!1,b=!1,e;for(a in c)if(c.hasOwnProperty(a)){var l=c[a];aha(l)&&l.unhook&&(e||(e={}),e[a]=l)}for(c=0;c<g;c++){var a=k[c];bha(a)?(d+=a.count||0,!h&&a.hasWidgets&&(h=!0),!n&&a.hasThunks&&(n=!0),b||!a.hooks&&!a.descendantHooks||(b=!0)):!h&&
cha(a)?"function"===typeof a.destroy&&(h=!0):!n&&dha(a)&&(n=!0)}(this||cw).count=g+d;(this||cw).hasWidgets=h;(this||cw).hasThunks=n;(this||cw).hooks=e;(this||cw).descendantHooks=b}function sE(g){(this||eha).text=String(g)}function tE(g){if(!(this instanceof tE))return new tE(g);this.value=g}function ku(g){if(!(this instanceof ku))return new ku(g);this.value=g}function Ik(g,c,k,d){if("string"===typeof g)c.push(new o2(g));else if("number"===typeof g)c.push(new o2(String(g)));else if(pL(g))c.push(g);
else if(p2(g))for(var h=0;h<g.length;h++)Ik(g[h],c,k,d);else if(null!==g&&void 0!==g)throw c={tagName:k,properties:d},k=Error(),k.type="virtual-hyperscript.unexpected.virtual-element",k.message="Unexpected virtual child passed to h().\nExpected a VNode / Vthunk / VWidget / string but:\ngot:\n"+gH(g)+".\nThe parent vnode is:\n"+gH(c),k.foreignObject=g,k.parentVnode=c,k;}function pL(g){return fha(g)||gha(g)||hha(g)||iha(g)}function gH(g){try{return JSON.stringify(g,null,"    ")}catch(c){return String(g)}}
function hH(g,c){if(3===g.nodeType)return new q2(g.nodeValue);if(1===g.nodeType||9===g.nodeType){var k="http://www.w3.org/1999/xhtml"!==g.namespaceURI?g.namespaceURI:null,d=c&&g.getAttribute(c)?g.getAttribute(c):null,h=g.tagName;var n,b={};if(g.hasAttributes()){if(g.namespaceURI&&"http://www.w3.org/1999/xhtml"!==g.namespaceURI)var e=g.namespaceURI;for(var l=0;l<g.attributes.length;l++){if("style"==g.attributes[l].name){var a=g.style;var f={};for(n=0;n<a.length;++n){var m=a.item(n);f[m]=String(a[m]);
-1<f[m].indexOf("url")&&(f[m]=f[m].replace(/"/g,""))}a="style";m=n=void 0}else e?(n=g.attributes[l],a=n.name,f=n.value,n=jha[n.name]||"",m=void 0):(n=void 0,f=g.attributes[l],a=r2[f.name]?r2[f.name]:f.name,0===a.indexOf("data-")||0===a.indexOf("aria-")?(f=f.value,n=!0):f=f.value,m=n||!1,n=void 0);n?b[a]={namespace:n,value:f}:m?(b.attributes||(b.attributes={}),b.attributes[a]=f):b[a]=f}}e=[];for(l=0;l<g.childNodes.length;l++)e.push(hH(g.childNodes[l],c));return new kha(h,b,e,d,k)}return new q2("")}
function Fz(g){var c={};Oi.addFill(g,c);Oi.addTransform(g,c);Oi.addTransformOrigin(g,c);Oi.addDisplay(g,c);Oi.addExtentStyle(g,c);Oi.addBorder(g,c);Oi.addBorderRadius(g,c);Oi.addShadowStyle(g,c);g.grayscale&&(c.filter=(c.filter||"")+" grayscale("+100*g.grayscale+"%)");g.blur&&(c.filter=(c.filter||"")+" blur("+g.blur+"px)");null!=g.opacity&&(c.opacity=g.opacity);g.draggable&&!g.isWorld&&(c["touch-action"]="none");return c}function tk(g,c){var k=g.position,d=g.origin,h=g.scale,n=g.rotation,b=g.flipped,
e=g.tilted,l=g.perspective,a=g.owner,f=Math.round(k.x-d.x-(g._skipWrapping&&a?a.borderWidthLeft:0));k=Math.round(k.y-d.y-(g._skipWrapping&&a?a.borderWidthTop:0));if(g=g.renderOnGPU||g.dropShadow&&!g.dropShadow.fast||0<g.grayscale)c.willChange="transform";a&&a.isText||g?c.transform="translate("+f+"px, "+k+"px)":(c.transform="",c.top=k+"px",c.left=f+"px");c.transform+=" rotate("+n.toFixed(2)+"rad) scale("+h.toFixed(5)+","+h.toFixed(5)+")";l&&(c.perspective=l+"px");b&&(c.transform+=" rotateY("+180*b+
"deg)");e&&(c.transform+=" rotateX("+180*e+"deg)")}function De(g,c){var k=g.width;g=g.height;c.width=k||1;c.height=g||1;c.viewBox=[0,0,k||1,g||1].join(" ");return c}function Vx(g){var c="";if(0<g.length){var k=g[0];var d=k.position;var h=d.y;d=d.x;c+="M "+d+" "+h+" "}for(var n=1;n<g.length-1;n++){var b=g[n],e=b.position,l=e.x;e=e.y;var a=b,f=a.controlPoints.previous;c=a.isSmooth?c+("C "+(d+k.controlPoints.next.x)+" "+(h+k.controlPoints.next.y)+" "+(l+f.x)+" "+(e+f.y)+" "+l+" "+e+" "):c+("L "+l+" "+
e+" ");k=b;d=l;h=e}0<g.length&&(b=g[g.length-1].position,n=b.x,b=b.y,g=g[g.length-1],l=g.controlPoints.previous,c=g.isSmooth?c+("C "+(d+k.controlPoints.next.x)+" "+(h+k.controlPoints.next.y)+" "+(n+l.x)+" "+(b+l.y)+" "+n+" "+b):c+("L "+n+" "+b));return c}function ve(g,c){var k=g.id,d=g.vertices,h=g.fill,n=g.borderColor,b=g.borderWidth;d.length&&(c.d=Oi.getSvgVertices(d));Oi.addSvgBorderStyle(g,c);c["stroke-width"]=b.valueOf();c.fill=h?h.isGradient?"url(#gradient-fill"+k+")":h.toString():"transparent";
c.stroke=n.valueOf().isGradient?"url(#gradient-borderColor"+k+")":n.valueOf().toString();return c}function Es(g){var c=g.reactsToPointer,k=g.nativeCursor,d=g.clipMode,h=Qe.styleProps(g);g=g._animationQueue.maskedProps("css");"backgroundImage"in g&&delete h.background;"visible"!==d&&(h.overflow=d,h["-webkit-overflow-scrolling"]="touch",h["overflow-anchor"]="none");Object.assign(h,g);h.position="absolute";h["pointer-events"]=c?"auto":"none";h.cursor=k;return h}function Qc(g,c){this.morph=g;this.type=
c}function Fs(g,c){c={animation:new Qe.Animation(g),key:g.id,id:g.id,attributes:{},className:(g.hideScrollbars?g.styleClasses.concat("hiddenScrollbar"):g.styleClasses).join(" "),draggable:!1,"morph-after-render-hook":new Qe.MorphAfterRenderHook(g,c)};c.attributes["touch-action"]=Qe.bowser.ios&&g.draggable&&!g.isWorld?"none":Qe.bowser.ios&&"visible"!=g.clipMode&&!g.isWorld?"auto":"manipulation";return c}function Gz(g){var c=new Qe.SvgAnimation(g,"svg"),k={};Qe.addSvgAttributes(g,k);Object.assign(k,
g._animationQueue.maskedProps("svg"));return{animation:c,attributes:k}}function Hz(g){var c=new Qe.SvgAnimation(g,"path"),k={mask:0!==g.drawnProportion?"url(#mask"+g.id+")":""};Qe.addPathAttributes(g,k);Object.assign(k,g._animationQueue.maskedProps("path"));return{animation:c,attributes:k}}function Wx(g,c,k){var d=k=k.valueOf(),h=d.bounds,n=d.focus,b=d.vector;d=d.stops;var e=c.x;c=c.y;g={namespace:"http://www.w3.org/2000/svg",attributes:{id:"gradient-"+g,gradientUnits:"userSpaceOnUse",r:"50%"}};b&&
(g.attributes.gradientTransform="rotate("+Qe.num.toDegrees(b.extent().theta())+", "+e/2+", "+c/2+")");n&&h&&(b=h.width,h=h.height,g.attributes.gradientTransform="matrix(\n"+b/e+", 0, 0, "+h/c+",\n"+(e/2-b/e*(e/2)+n.x*e-e/2)+",\n"+(c/2-h/c*(c/2)+n.y*c-c/2)+")");return Qe.h(k.type,g,d.map(function(l){return Qe.h("stop",{namespace:"http://www.w3.org/2000/svg",attributes:{offset:100*l.offset+"%","stop-opacity":l.color.a,"stop-color":l.color.withA(1).toString()}})}))}function Iz(g,c){c=void 0===c?g.env.renderer:
c;return Qe.createNode(g.render(c),c.domEnvironment)}function Jz(g,c){var k=c.renderMap.get(g),d=c.getNodeForMorph(g);if(d&&k){var h=c.render(g),n=Qe.diff(k,h);if(g=c.renderMap.get(g.owner))g=g.children[0].children,k=g.indexOf(k),g[k]=h,Qe.patch(d,n)}}function Kz(g,c){if(g.needsRerender()){var k=!1,d=c.domNode,h=c.renderMap.get(g)||d&&(k=!0)&&Qe.parser(d)||c.render(g),n=c.render(g);k&&(h.key=n.key);k=Qe.diff(h,n);d=d||(c.domNode=Qe.createNode(h,c.domEnvironment));d.parentNode||Qe.initDOMState(c,g);
Qe.patch(d,k);c.renderFixedMorphs(n.fixedMorphs,g)}}function Lz(g,c,k){return(((1-3*k+3*c)*g+(3*k-6*c))*g+3*c)*g}function be(g){return g}function Gs(g){return Gf.obj.isFunction(g)?g:Gf.Bezier.apply(Gf,$jscomp.arrayFromIterable(eval("(["+g.match(/\((.*)\)/)[1]+"])")))}function lu(g){var c=0,k=0;do c+=g.offsetTop||0,k+=g.offsetLeft||0,g=g.offsetParent;while(g);return{top:c,left:k}}function Yd(){return System.get("@system-env").browser?Ch.createDOMEnvironment_browser():Ch.createDOMEnvironment_node()}
function Xx(){return Ch._defaultEnv||(Ch._defaultEnv=System.get("@system-env").browser?new Ch.DomEnvironment(window,document,function(){}):Ch.createDOMEnvironment())}function Aq(g,c,k){g=void 0===g?"lively-css":g;k=void 0===k?document:k;var d=k.getElementById(g);return d?Ch.setCSSDef(d,c,k):Ch.addCSSDef(g,c,k)}function kd(g,c,k,d){k=void 0===k?document:k;d=void 0===d?!0:d;var h=k.getElementById(g),n=!1;return h?d&&h.getAttribute("href")!==c?(h.setAttribute("href",c),h.onload=function(){return n=!0},
Ch.promise.waitFor(3E4,function(){return!!n&&h})):Promise.resolve():(h=k.createElement("link"),h.type="text/css",h.rel="stylesheet",h.setAttribute("id",g),h.setAttribute("href",c),h.onload=function(){return n=!0},k.head.appendChild(h),Ch.promise.waitFor(3E4,function(){return!!n&&h}))}function mu(g,c){return Array.isArray(g)?g.reduce(function(k,d){return mu(d,k)},c):"string"===typeof g?c.filter(function(k){return k.path()!==g&&k.name()!==g}):g instanceof RegExp?c.filter(function(k){return!g.test(k.path())&&
!g.test(k.name())}):"function"===typeof g?c.filter(function(k){return!g(k)}):c}function Bq(g){g=$jscomp.makeIterator(g.split("?"));g.next();var c=g.next().value;g={};if(!c)return g;if(c=c.split("&"))for(var k=0;k<c.length;k++){var d=c[k].split("="),h=d[0],n=!0;if(1<d.length)if(n=decodeURIComponent(d.slice(1).join("=")),"undefined"===n)n=void 0;else if(n.match(/^(true|false|null|[0-9"[{].*)$/))try{n=JSON.parse(n)}catch(b){"["===n[0]&&(n=n.slice(1,-1).split(","))}g[h]=n}return g}function dw(g){return Object.keys(g).map(function(c){return c+
"="+encodeURIComponent(String(g[c]))}).join("&")}function uE(g){var c=g;do g=c,c=g.replace(Jf.pathDoubleDotRe,"");while(c!=g);c=c.replace(Jf.pathDoubleSlashRe,"$1/");return c=c.replace(Jf.pathDotRe,"/")}function ka(g,c){var k=g.match(Jf.urlRe),d=c.match(Jf.urlRe),h=!0;if(k&&!d||!k&&d)h=!1;if(k&&d){var n=k[1];var b=k[2];var e=d[1];var l=d[2];n!==e?h=!1:b!==l?h=!1:(g=k[3],c=d[3])}if(!h)throw Error("[relativePathBetween] incompatible paths: "+g+" vs. "+c);g=Jf.withRelativePartsResolved(g);c=Jf.withRelativePartsResolved(c);
if(g==c)return"";k=Jf._relativePathBetween_checkPathes(c,g);if(!k)throw Error("pathname differs in relativePathFrom "+g+" vs "+c);return k}function p(g,c){return Jf.withRelativePartsResolved(g.replace(Jf.slashEndRe,"")+"/"+c.replace(Jf.slashStartRe,""))}function w(g){return g.startsWith("/")?g.replace(Jf.slashEndRe,"").split("/").slice(0,-1).join("/")+"/":""}function C(g){var c=[];for(g=Jf.parent(g);g&&(c.unshift(g),g=Jf.parent(g),"/"!==g););return c}function A(g,c){if(!g)throw Error("lively.resource resource constructor: expects url but got "+
g);if(g.isResource)return g;g=String(g);for(var k=0;k<Jf.extensions.length;k++)if(Jf.extensions[k].matches(g))return new Jf.extensions[k].resourceClass(g,c);throw Error("Cannot find resource type for url "+g);}function H(g,c,k){var d,h,n,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){switch(e.nextAddress){case 1:return d=A(g,k).asDirectory(),e.yield(d.ensureExistance(),2);case 2:n=e.forIn(c);case 3:if(null==(h=n.getNext())){e.jumpTo(5);break}if(!c.hasOwnProperty(h)){e.jumpTo(3);
break}b=d.join(h);return"object"===typeof c[h]?e.yield(H(b,c[h],k),9):e.yield(b.write(c[h]),8);case 8:e.jumpTo(7);break;case 9:case 7:e.jumpTo(3);break;case 5:return e.return(d)}})}function M(g){var c=g.name;Jf.extensions=Jf.extensions.filter(function(k){return k.name!==c}).concat(g)}function S(g){var c="string"===typeof g?g:g.name;Jf.extensions=Jf.extensions.filter(function(k){return k.name!==c})}function ba(g,c){var k=void 0===g.useProxy?!0:g.useProxy,d=void 0===g.useCors?!0:g.useCors,h=g.url,n=
g.onLoad,b=g.headers,e=g.onProgress,l=new Kg.XMLHttpRequest,a=Kg.promise.deferred();l.open("PUT",h);k&&(Object.assign(b,{pragma:"no-cache","cache-control":"no-cache","x-lively-proxy-request":h}),h=g.proxyDomain||Kg.defaultOrigin());for(var f in b)l.setRequestHeader(f,b[f]);l.upload.addEventListener("progress",e);l.responseType="json";l.onload=function(){n(l.response);a.resolve(l)};d&&(l.withCredentials=!0);l.send(c);return a.promise}function ra(g,c,k){c=void 0===c?"infinity":c;var d,h,n,b,e,l,a,f,
m,r,v,x;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){switch(y.nextAddress){case 1:return y.yield(g.dirList(c,k),2);case 2:d=y.yieldResult,h={},n=$jscomp.makeIterator(d),b=n.next();case 3:if(b.done){y.jumpTo(5);break}e=b.value;if(e.isDirectory()){l={};y.jumpTo(6);break}return y.yield(e.read(),7);case 7:l=y.yieldResult;case 6:a=l;f=e.asFile().relativePathFrom(g).split("/");m=h;r=$jscomp.makeIterator(f.slice(0,-1));for(v=r.next();!v.done;v=r.next())x=v.value,m[x]||(m[x]={}),m=m[x];
m[f[f.length-1]]=a;b=n.next();y.jumpTo(3);break;case 5:return y.return(h)}})}function la(g){var c,k,d,h,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){if(1==b.nextAddress)return c=document.head,k=c.namespaceURI,d=ji.newUUID(),h=document.createElementNS(k,"script"),h.setAttribute("type","module"),c.appendChild(h),h.innerText="import m from '"+g+"'; window['"+d+"'] = m;",h.setAttributeNS(null,"async",!0),b.yield(ji.waitFor(3E4,function(){return window[d]}),2);n=b.yieldResult;delete window[d];
h.remove();return b.return(n)})}function Ka(g,c){var k=document.head,d=k.namespaceURI;return new Promise(function(h,n){var b=document.createElementNS(d,"script");b.setAttribute("type","text/ecmascript");k.appendChild(b);b.setAttributeNS(null,"id",g);"http://www.w3.org/2000/svg"===b.namespaceURI?b.setAttributeNS("http://www.w3.org/1999/xlink","href",g):b.setAttribute("src",g);b.onload=h;b.onerror=n;b.setAttributeNS(null,"async",!0)})}function cb(){var g,c,k,d;return $jscomp.asyncExecutePromiseGeneratorProgram(function(h){switch(h.nextAddress){case 1:if("fetch"in
System.global&&"Headers"in System.global)return h.return(Promise.resolve());g=System.decanonicalize("lively.resources");if(System.get("@system-env").node){h.setCatchFinallyBlocks(5);c=System._nodeRequire("fetch-ponyfill");h.leaveTryBlock(3);break}return h.yield(System.import("fetch-ponyfill",g),4);case 4:c=h.yieldResult;h.jumpTo(3);break;case 5:return h.enterCatchBlock(),h.yield(System.normalize("fetch-ponyfill",g),7);case 7:return k=h.yieldResult.replace("file://",""),h.yield(System.import(k),8);
case 8:d=h.yieldResult,c=d.default;case 3:Object.assign(System.global,c()),h.jumpToEnd()}})}function yb(g){return g&&g.split(",").map(function(c){c=c.split(" ").filter(function(k){return""!=k}).join(" ");c.includes(" ")&&(c.startsWith("'")&&(c=c.slice(1)),c.endsWith("'")&&(c=c.slice(0,-1)),c.startsWith('"')||(c='"'+c),c.endsWith('"')||(c+='"'));return c}).join(",")}function Cb(g,c){c||(c="undefined"!==typeof document?document.location.search:"");c=(c=c.trim())&&"?"!==c?Fi.parseQuery(c):{};g.endsWith(".json")?
(c.file=g,delete c.name):(delete c.file,c.name=g);return"/worlds/load?"+Fi.stringifyQuery(c)}function Tb(g){Object.assign(Fi.nameToClassMapping,g)}function qc(g,c){g=void 0===g?{}:g;c=void 0===c?{restore:!1}:c;var k=Fi.nameToClassMapping.default;g.type&&("function"===typeof g.type&&(k=g.type),"object"===typeof g.type?k=Fi.locateClass(g.type):"string"===typeof g.type&&(k=Fi.nameToClassMapping[g.type.toLowerCase()]||k));var d={};return c.restore?(new k((d[Symbol.for("lively-instance-restorer")]=!0,
d))).initFromJSON(g):new k(g)}function ic(g){return("function"===typeof g?g[Symbol.for("__LivelyClassName__")]:"string"===typeof g?g.toLowerCase():"")+"_"+Fi.string.newUUID().replace(/-/g,"_")}function Ic(g,c){if("string"===typeof g)return g;if(!g||"object"!==typeof g)return null;switch(c){case "ios":return g.ios||g.mac;case "mac":return g.mac||g.ios;case "win":case "windows":case "windowsphone":return g.win||g.windows;case "linux":return g.linux||g.win||g.windows;case "chromeos":return g.chromeos||
g.linux||g.win||g.windows;case "android":return g.android||g.linux||g.win||g.windows;default:return g.linux||g.win||g.windows}}function Vc(g,c,k,d){d=void 0===d?k.name:d;(g[c]=Cq.fun.wrap(g[c],k)).hookFunc=k;k.hookName=d}function xd(g,c,k){for(var d=[],h=g[c];h;)d.push(h),h=h.originalFunction;h="string"===typeof k?d.find(function(n){return n.hookFunc&&n.hookFunc.hookName===k}):d.find(function(n){return n.hookFunc===k});if(!h)return!1;Cq.arr.remove(d,h);g[c]=d.reduceRight(function(n,b){return Cq.fun.wrap(n,
b.hookFunc||b)});return!0}function Yc(g,c,k){for(g=g[c];g;){if(g.hookFunc&&("string"===typeof k&&g.hookFunc.hookName===k||g.hookFunc===k))return!0;g=g.originalFunction}return!1}function ge(g){if(g.loads){var c=g.loads;return Yx.arr.uniq(Object.keys(Yx.loadedModules(g)).concat(Object.keys(c))).reduce(function(k,d){var h=c[d]?c[d].depMap:{};k[d]=Object.keys(h).map(function(n){var b=h[n];return"@empty"===b?b+"/"+n:b});return k},{})}return Object.keys(g._loader.moduleRecords).reduce(function(k,d){k[d]=
g._loader.moduleRecords[d].dependencies.filter(Boolean).map(function(h){return h.name});return k},{})}function Ue(g,c,k,d,h){var n=g.get("@lively-env").pendingExportChanges;(g=fp.module(g,c).record())&&(k in g.exports||h)&&((n[c]||(n[c]={}))[k]=d)}function fe(g,c){var k=g.get("@lively-env").pendingExportChanges[c];k&&(fp.clearPendingModuleExportChanges(g,c),fp.updateModuleExports(g,c,k))}function Hd(g,c,k,d,h){var n,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){switch(e.nextAddress){case 1:e.setCatchFinallyBlocks(2);
g.debug&&console.log("[module change] "+c+" "+k.slice(0,50).replace(/\n/g,"")+" "+d);if(!d||"es6"===d||"esm"===d||"register"===d||"defined"===d)return e.yield(Jk.moduleSourceChangeEsm(g,c,k,h),8);if("global"!==d)throw Error("moduleSourceChange is not supported for module "+c+" with format "+d);return e.yield(Jk.moduleSourceChangeGlobal(g,c,k,h),7);case 7:n=e.yieldResult;e.jumpTo(5);break;case 8:n=e.yieldResult;case 5:return Jk.emit("lively.modules/modulechanged",{module:c,newSource:k,options:h},Date.now(),
g),e.return(n);case 2:throw b=e.enterCatchBlock(),Jk.emit("lively.modules/modulechanged",{module:c,newSource:k,error:b,options:h},Date.now(),g),b;}})}function df(g){return/\.js/i.test(g)}function Je(g){return Rn.isJsFile(g)?g.replace(/\/[^\/]*$/,""):g.replace(/\/$/,"")}function we(g){return/^[^:\\]+:\/\//.test(g)}function Se(g){var c=g.match(/^([^:]+:\/\/)(.*)/);if(!c)return g;g=c[1];var k=c=c[2];do c=k,k=c.replace(/\/[^\/]+\/\.\./,"");while(k!=c);k=k.replace(/(^|[^:])[\/]+/g,"$1/");k=k.replace(/\/\.\//g,
"/");return g+k}function nf(g,c,k){k=void 0===k?!1:k;var d=ef.classHolder.PackageRegistry.ofSystem(g),h=d.allPackageURLs();g=k?c:ef.normalizePackageURL(g,c,h);return{pkg:d.findPackageWithURL(g),url:g,allPackageURLs:h,registry:d}}function wf(g,c,k){g=ef.lookupPackage(g,c,void 0===k?!1:k);c=g.url;k=g.registry;return g.pkg||k.addPackageAt(c,"devPackageDirs")}function Wf(g,c,k){g=ef.lookupPackage(g,c,void 0===k?!1:k);if(k=g.pkg)return k;throw Error("[getPackage] package "+c+" (as "+g.url+") not found");
}function Dh(g,c,k){return ef.getPackage(g,k).updateConfig(c)}function jk(g,c){return Promise.resolve(ef.ensurePackage(g,c)).then(function(k){return k.import()})}function ak(g,c){return(g=ef.lookupPackage(g,c).pkg)?g.remove():null}function nj(g,c,k){return ef.getPackage(g,c).reload(k)}function vh(g,c,k){return Promise.resolve(ef.ensurePackage(g,c)).then(function(d){return d.register(k)})}function uk(g){return ef.Package.allPackages(g).map(function(c){return c.asSpec()})}function Mm(g,c){g="string"===
typeof g?gd.parse(g):g;c.scope=gd.query.resolveReferences(gd.query.scopes(g));return gd.ClassReplaceVisitor.run(g,c)}function Tj(g,c,k){k=Kp.ensureParent(g,c);var d=g.System._nodeRequire("module");c.startsWith(".")&&(c=Kp.relative(g,c));return d._load(c,k)}function nu(g,c,k){k=Kp.ensureParent(g,c);var d=g.System._nodeRequire("module");c.startsWith(".")&&(c=Kp.relative(g,c));return d._resolveFilename(c,k)}function Dq(g,c,k){var d=bf.livelySystemEnv(g);c=g.decanonicalize(c,k);return d.loadedModules[c]||
(d.loadedModules[c]=new bf.ModuleInterface(g,c))}function ou(g,c,k){k=void 0===k?!1:k;var d=bf.livelySystemEnv(g);return(k?c:g.normalizeSync(c))in d.loadedModules}function pu(g,c,k){k=void 0===k?!1:k;var d,h,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){if(1==b.nextAddress){bf.livelySystemEnv(g);d=k?c:g.normalizeSync(c);if(bf.isModuleLoaded(g,d,!0))return b.return(!0);h=bf.Package.forModuleId(g,d);return h&&"no group"!==h.name?b.yield(h.hasResource(d),3):(n=g.resource(d).exists(),
b.jumpTo(2))}2!=b.nextAddress&&(n=b.yieldResult);return b.return(n)})}function qu(){return Ee.exceptions}function Zh(g){return Ee.exceptions=g}function Kk(g,c,k,d,h){c=String(c);g=d.sourceAccessorName;var n=d.recorder,b=d.recorderName,e=d.dontTransform,l=d.varDefinitionCallbackName,a=void 0===d.embedOriginalCode?!0:d.embedOriginalCode;g=a?g:void 0;d={topLevelVarRecorder:n,varRecorderName:b,sourceAccessorName:g,dontTransform:e,jsx:k.endsWith(".jsx"),recordGlobals:!0,keepPreviouslyDeclaredValues:!0,
declarationWrapperName:l,evalId:d.nextEvalId(),classTransform:Ee.classToFunctionTransform,currentModuleAccessor:Ee.funcCall(Ee.member(Ee.funcCall(Ee.member(Ee.member("__lvVarRecorder","System"),"get"),Ee.literal("@lively-env")),"moduleEnv"),Ee.literal(k))};n=h?'console.log("[lively.modules] executing module '+k+'");\n':"";e="";"System.global"===b?delete d.declarationWrapperName:(n+='SystemJS.get("@lively-env").evaluationStart("'+k+'");\nvar '+(b+' = SystemJS.get("@lively-env").moduleEnv("'+k+'").recorder;\n')+
(a?"\nvar "+g+" = "+JSON.stringify(c)+";\n":""),e+='\nSystemJS.get("@lively-env").evaluationEnd("'+k+'");');try{var f=n+Ee.evalCodeTransform(c,d)+e;h&&"undefined"!==typeof $world&&$world.get("log")&&$world.get("log").isText&&($world.get("log").textString=f);return{source:f,options:d}}catch(m){return console.error("Error in prepareCodeForCustomCompile of "+k+" "+m.stack),{source:c,options:d}}}function bk(g,c,k,d,h,n){c=String(c);g=Object.assign({},h,{classTransform:Ee.classToFunctionTransform,topLevelVarRecorder:d.recorder,
varRecorderName:d.recorderName,dontTransform:d.dontTransform,recordGlobals:!0,declarationWrapperName:d.varDefinitionCallbackName,currentModuleAccessor:Ee.funcCall(Ee.member(Ee.funcCall(Ee.member(Ee.member("__lvVarRecorder","System"),"get"),Ee.literal("@lively-env")),"moduleEnv"),Ee.literal(k))});try{var b=Ee.evalCodeTransformOfSystemRegisterSetters(c,g);n&&"undefined"!==typeof $world&&$world.get("log")&&$world.get("log").isText&&($world.get("log").textString+=b);return b}catch(e){return console.error("Error in prepareTranslatedCodeForSetterCapture",
e.stack),c}}function Sn(g,c){return g.translate(c).then(function(k){var d=Ee.parse(k).body.find(function(n){return n.expression&&"CallExpression"===n.expression.type&&"register"===n.expression.callee.property.name});if(!d)throw Error("Cannot find register call in translated source of "+c.name);var h=d.expression;d=h.arguments[0].elements.map(function(n){return n.value});h=h.arguments[1];k=k.slice(h.start,h.end);k=eval('var __moduleName = "'+c.name+'";('+k+");\n//# sourceURL="+c.name+"\n");g.debug&&
"undefined"!==$world&&$world.get("log")&&$world.get("log").isText&&($world.get("log").textString=k);return{localDeps:d,declare:k}})}function MB(g,c){return g.translate(c).then(function(k){return{translated:k}})}function Zx(g){Ee.isHookInstalled(g,"translate","lively_modules_translate_hook")||Ee.installHook(g,"translate",function(c,k){return Ee.customTranslate.call(g,c,k)},"lively_modules_translate_hook")}function Sh(g){Ee.removeHook(g,"translate","lively_modules_translate_hook")}function Nm(g){g.resource=
wh.resource;wh.isHookInstalled(g,"fetch",wh.fetchResource)&&wh.removeHook(g,"fetch","fetchResource");wh.installHook(g,"fetch",wh.fetchResource);wh.isHookInstalled(g,"resource","livelyProtocol")&&wh.removeHook(g,"fetch","livelyProtocol");wh.installHook(g,"resource",wh.livelyProtocol)}function Eq(g){wh.removeHook(g,"fetch","fetchResource");wh.removeHook(g,"resource","livelyProtocol");delete g.resource}function Mz(g){Id.isHookInstalled(g,"normalize","normalizeHook")||Id.installHook(g,"normalize",Id.normalizeHook,
"normalizeHook");Id.isHookInstalled(g,"decanonicalize","decanonicalizeHook")||Id.installHook(g,"decanonicalize",Id.decanonicalizeHook,"decanonicalizeHook");Id.isHookInstalled(g,"normalizeSync","decanonicalizeHook")||Id.installHook(g,"normalizeSync",Id.decanonicalizeHook,"decanonicalizeHook");Id.isHookInstalled(g,"newModule","newModule_volatile")||Id.installHook(g,"newModule",Id.newModule_volatile,"newModule_volatile");Id.isHookInstalled(g,"instantiate","instantiate_triggerOnLoadCallbacks")||Id.installHook(g,
"instantiate",Id.instantiate_triggerOnLoadCallbacks,"instantiate_triggerOnLoadCallbacks");Id.isHookInstalled(g,"locate","locateHook")||Id.installHook(g,"locate",Id.locateHook,"locateHook")}function qL(g){Id.removeHook(g,"normalize","normalizeHook");Id.removeHook(g,"decanonicalize","decanonicalizeHook");Id.removeHook(g,"normalizeSync","decanonicalizeHook");Id.removeHook(g,"newModule","newModule_volatile");Id.removeHook(g,"instantiate","instantiate_triggerOnLoadCallbacks");Id.removeHook(g,"locate",
"locateHook")}function rL(g){return{moduleEnv:function(c){return Id.classHolder.module(g,c)},get itself(){return g.get(g.decanonicalize("lively.modules/index.js"))},evaluationStart:function(c){Id.classHolder.module(g,c).evaluationStart()},evaluationEnd:function(c){Id.classHolder.module(g,c).evaluationEnd()},dumpConfig:function(){return JSON.stringify({baseURL:g.baseURL,transpiler:g.transpiler,defaultJSExtensions:g.defaultJSExtensions,map:g.map,meta:g.meta,packages:g.packages,paths:g.paths,packageConfigPaths:g.packageConfigPaths},
null,2)},get packageRegistry(){return g["__lively.modules__packageRegistry"]},set packageRegistry(c){g["__lively.modules__packageRegistry"]=c},packages:g["__lively.modules__packages"]||(g["__lively.modules__packages"]={}),loadedModules:g["__lively.modules__loadedModules"]||(g["__lively.modules__loadedModules"]={}),pendingExportChanges:g["__lively.modules__pendingExportChanges"]||(g["__lively.modules__pendingExportChanges"]={}),notifications:g["__lively.modules__notifications"]||(g["__lively.modules__notifications"]=
[]),notificationSubscribers:g["__lively.modules__notificationSubscribers"]||(g["__lively.modules__notificationSubscribers"]={}),options:g["__lively.modules__options"]||(g["__lively.modules__options"]=Id.obj.deepCopy(Id.defaultOptions)),onLoadCallbacks:g["__lively.modules__onLoadCallbacks"]||(g["__lively.modules__onLoadCallbacks"]=[]),modulePackageMapCache:g["__lively.modules__modulePackageMapCache"]}}function NB(g,c){return g&&"string"!==typeof g?g:Id.systems()[g]||(Id.systems()[g]=Id.makeSystem(c))}
function OB(g){g=g&&"string"!==typeof g?Id.nameOfSystem(g):g;delete Id.systems()[g]}function sL(g,c){g.trace=!0;c=c||{};var k=c.hasOwnProperty("useModuleTranslationCache")?c.useModuleTranslationCache:!Id.urlQuery().noModuleCache;g.useModuleTranslationCache=k;g.set("@lively-env",g.newModule(Id.livelySystemEnv(g)));"undefined"!==typeof Id.WorkerGlobalScope&&g.set("@system-env",g.newModule(Object.assign({},g.get("@system-env"),{browser:!0,worker:!0,location:Id.location})));(k="undefined"!==typeof Id.process&&
Id.process.versions&&Id.process.versions.electron)&&g.set("@system-env",g.newModule(Object.assign({electron:k},g.get("@system-env"))));Id.wrapResource(g);Id.wrapModuleLoad(g);Id.wrapModuleResolution(g);k&&(k=["electron"].reduce(function(d,h){d[h]="@node/"+h;return d},{}),c.map=Id.obj.merge(k,c.map));Id.isNode&&(k="addons assert buffer child_process cluster console crypto dgram dns domain events fs http https module net os path punycode querystring readline repl stream stringdecoder timers tls tty url util v8 vm zlib constants".split(" ").reduce(function(d,
h){d[h]="@node/"+h;return d},{}),c.map=Id.obj.merge(k,c.map));c.packageConfigPaths=c.packageConfigPaths||["./node_modules/*/package.json"];c.transpiler||"traceur"!==g.transpiler||(k=Id.GLOBAL.System,"lively.transpiler"===k.transpiler?(g.set("lively.transpiler",k.get("lively.transpiler")),g._loader.transpilerPromise=k._loader.transpilerPromise,g.config({transpiler:"lively.transpiler",babelOptions:Object.assign(k.babelOptions||{},c.babelOptions)})):g.config({map:{"plugin-babel":k.map["plugin-babel"],
"systemjs-babel-build":k.map["systemjs-babel-build"]},transpiler:k.transpiler,babelOptions:Object.assign(k.babelOptions||{},c.babelOptions)}));g.config(c);return g}function tL(g){g=Id.getSystem(g);return JSON.stringify({baseURL:g.baseURL,transpiler:g.transpiler,defaultJSExtensions:g.defaultJSExtensions,defaultExtension:g.defaultExtension,map:g.map,meta:g.meta,packages:g.packages,paths:g.paths,packageConfigPaths:g.packageConfigPaths,bundles:g.bundles},null,2)}function uL(g,c,k){var d=g.decanonicalize(c);
if(g.get(d))try{k(Id.classHolder.module(g,d))}catch(h){console.error(h)}else g.get("@lively-env").onLoadCallbacks.push({moduleName:c,resolved:!1,callback:k})}function vL(g){return g.get("@lively-env").loadedModules}function wL(g){var c=g.loads?Object.keys(g.loads):Object.keys(g._loader.moduleRecords);return Id.arr.uniq(c.concat(Object.keys(Id.loadedModules(g))))}function TS(g,c,k){return Promise.all(Id.obj.values(Id.loadedModules(g)).map(function(d){return d.search(c,k)})).then(function(d){return Id.arr.flatten(d,
1)})}function iH(g,c,k,d){c=void 0===c?{maxDepth:0,excludes:[]}:c;k=void 0===k?{}:k;d=void 0===d?0:d;var h,n,b,e,l,a,f,m,r,v,x,y,E;return $jscomp.asyncExecutePromiseGeneratorProgram(function(F){switch(F.nextAddress){case 1:h=c;n=h.maxDepth;b=h.excludes;if(0<n&&d>n)return F.return(k);F.setCatchFinallyBlocks(2);e=JSON;l=e.parse;return F.yield(mn.resource(g).join("package.json").read(),4);case 4:a=l.call(e,F.yieldResult);f=a.name+"@"+a.version;if(k[f]||b.includes(a.name))return F.return(k);k[f]=Object.assign({url:g},
mn.obj.select(a,["name","version","dependencies","devDependencies","main"]));F.leaveTryBlock(3);break;case 2:return F.enterCatchBlock(),F.return(k);case 3:return F.setCatchFinallyBlocks(5),F.yield(mn.resource(g).join("node_modules").dirList(1),7);case 7:m=F.yieldResult;F.leaveTryBlock(6);break;case 5:return F.enterCatchBlock(),F.return(k);case 6:r=$jscomp.makeIterator(m),v=r.next();case 8:if(v.done){F.jumpTo(10);break}y=x=v.value;E=y.url;return F.yield(iH(E,c,k,d+1),11);case 11:k=F.yieldResult;v=
r.next();F.jumpTo(8);break;case 10:return F.return(k)}})}function xL(g,c){var k=Object.assign({},g.dependencies,{},g.devDependencies);return Object.keys(k).reduce(function(d,h){var n=k[h],b=mn.obj.values(c).find(function(l){var a=l.version;return l.name===h&&lively.modules.semver.satisfies(a,n)})||{},e=b.name;b=b.version;d[h]=e?e+"@"+b:void 0;return d},{})}function yL(g){function c(h,n){var b=h+"@"+n;if(b in d)return d[b];var e=k.find(function(a){var f=a.version;return a.name===h&&lively.modules.semver.satisfies(f,
n)})||{},l=e.name;e=e.version;return d[b]=l?l+"@"+e:void 0}var k=mn.obj.values(g),d={};return Object.keys(g).reduce(function(h,n){var b=g[n],e=Object.assign({},b.dependencies,{},b.devDependencies);h[n]=Object.keys(e).map(function(l){return c(l,e[l])}).filter(function(l){return!!l});return h},{})}function zL(g,c){Xc.defaultSystem=g;c&&(Xc.GLOBAL.System=g);return g}function AL(){Xc._wrapModuleResolution(Xc.defaultSystem)}function BL(){Xc._unwrapModuleResolution(Xc.defaultSystem)}function CL(){return Object.keys(Xc.requireMap())}
function jH(g){return Xc._module(Xc.defaultSystem,g)}function DL(g,c){return Xc._isModuleLoaded(Xc.defaultSystem,g,c)}function EL(g,c){return Xc._doesModuleExist(Xc.defaultSystem,g,c)}function FL(){return Xc._printSystemConfig(Xc.defaultSystem)}function GL(g,c){return Xc._whenLoaded(Xc.defaultSystem,g,c)}function HL(g){return Xc._importPackage(Xc.defaultSystem,g)}function IL(g,c){return Xc._registerPackage(Xc.defaultSystem,g,c)}function JL(g){return Xc._removePackage(Xc.defaultSystem,g)}function KL(g,
c){return Xc._reloadPackage(Xc.defaultSystem,g,c)}function LL(){return Xc.getPackageSpecs(Xc.defaultSystem)}function ML(g,c){return Xc._getPackage(Xc.defaultSystem,g,void 0===c?!1:c)}function NL(g){return Xc.Package.forModuleId(Xc.defaultSystem,g)}function OL(g){return Xc._ensurePackage(Xc.defaultSystem,g)}function PL(g,c){return Xc._applyPackageConfig(Xc.defaultSystem,g,c)}function QL(g,c){return Xc._lookupPackage(Xc.defaultSystem,g,void 0===c?!1:c)}function RL(g,c,k){return Xc._moduleSourceChange(Xc.defaultSystem,
g,c,k)}function SL(){return Xc.computeRequireMap(Xc.defaultSystem)}function TL(g,c){return Xc._isHookInstalled(Xc.defaultSystem,g,c)}function UL(g,c){return Xc._installHook(Xc.defaultSystem,g,c)}function VL(g,c){return Xc._removeHook(Xc.defaultSystem,g,c)}function WL(){Xc._wrapModuleLoad(Xc.defaultSystem)}function XL(){Xc._unwrapModuleLoad(Xc.defaultSystem)}function US(g){return g&&g.__ref__}function YL(){VS=!0;for(var g,c,k=kH.length;k;){c=kH;kH=[];for(g=-1;++g<k;)c[g]();k=kH.length}VS=!1}function vE(g,
c,k){var d=k[k.length-1];g===d.element&&(k.pop(),d=k[k.length-1]);k=d.element;d=d.index;Array.isArray(k)?k.push(g):d===c.length-2?(c=c.pop(),k[c]=g):c.push(g)}function Lk(){Lk.init.call(this)}function ZL(g){if("function"!=typeof g)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof g);}function s2(g,c,k,d){var h,n,b;if(ZL(k),void 0===(n=g._events)?(n=g._events=Object.create(null),g._eventsCount=0):(void 0!==n.newListener&&(g.emit("newListener",c,k.listener?
k.listener:k),n=g._events),b=n[c]),void 0===b)n[c]=k,++g._eventsCount;else if("function"==typeof b?b=n[c]=d?[k,b]:[b,k]:d?b.unshift(k):b.push(k),0<(h=void 0===g._maxListeners?Lk.defaultMaxListeners:g._maxListeners)&&b.length>h&&!b.warned)b.warned=!0,k=Error("Possible EventEmitter memory leak detected. "+b.length+" "+String(c)+" listeners added. Use emitter.setMaxListeners() to increase limit"),k.name="MaxListenersExceededWarning",k.emitter=g,k.type=c,k.count=b.length,console&&console.warn&&console.warn(k);
return g}function lha(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function t2(g,c,k){g={fired:!1,wrapFn:void 0,target:g,type:c,listener:k};c=lha.bind(g);return c.listener=k,g.wrapFn=c,c}function u2(g,c,k){g=g._events;if(void 0===g)return[];c=g[c];if(void 0===c)k=[];else if("function"==typeof c)k=k?[c.listener||c]:[c];else if(k)for(k=Array(c.length),g=0;g<k.length;++g)k[g]=
c[g].listener||c[g];else k=v2(c,c.length);return k}function w2(g){var c=this._events;if(void 0!==c){g=c[g];if("function"==typeof g)return 1;if(void 0!==g)return g.length}return 0}function v2(g,c){for(var k=Array(c),d=0;d<c;++d)k[d]=g[d];return k}function wE(g){return g&&"object"===typeof g&&"default"in g?g["default"]:g}function Nz(){this._store={}}function lH(g){this._store=new Nz;if(g&&Array.isArray(g))for(var c=0,k=g.length;c<k;c++)this.add(g[c])}function nn(g){var c;if(!g||"object"!==typeof g)return g;
if(Array.isArray(g)){var k=[];var d=0;for(c=g.length;d<c;d++)k[d]=nn(g[d]);return k}if(g instanceof Date)return g.toISOString();if("undefined"!==typeof ArrayBuffer&&g instanceof ArrayBuffer||"undefined"!==typeof Blob&&g instanceof Blob)return g instanceof ArrayBuffer?"function"===typeof g.slice?g=g.slice(0):(d=new ArrayBuffer(g.byteLength),k=new Uint8Array(d),g=new Uint8Array(g),k.set(g),g=d):(d=g.size,k=g.type,g="function"===typeof g.slice?g.slice(0,d,k):g.webkitSlice(0,d,k)),g;k=Object.getPrototypeOf(g);
null===k?k=!0:(k=k.constructor,k="function"==typeof k&&k instanceof k&&x2.call(k)==mha);if(!k)return g;k={};for(d in g)Object.prototype.hasOwnProperty.call(g,d)&&(c=nn(g[d]),"undefined"!==typeof c&&(k[d]=c));return k}function y2(g){var c=!1;return xE(function(k){if(c)throw Error("once called more than once");c=!0;g.apply(this,k)})}function z2(g){return xE(function(c){c=nn(c);var k=this,d="function"===typeof c[c.length-1]?c.pop():!1,h=new Promise(function(n,b){var e;try{var l=y2(function(a,f){a?b(a):
n(f)});c.push(l);(e=g.apply(k,c))&&"function"===typeof e.then&&n(e)}catch(a){b(a)}});d&&h.then(function(n){d(null,n)},d);return h})}function nha(g,c,k){if(g.constructor.listeners("debug").length){for(var d=["api",g.name,c],h=0;h<k.length-1;h++)d.push(k[h]);g.constructor.emit("debug",d);var n=k[k.length-1];k[k.length-1]=function(b,e){var l=["api",g.name,c];l=l.concat(b?["error",b]:["success",e]);g.constructor.emit("debug",l);n(b,e)}}}function Om(g,c){return z2(xE(function(k){if(this._closed)return Promise.reject(Error("database is closed"));
if(this._destroyed)return Promise.reject(Error("database is destroyed"));var d=this;nha(d,g,k);return this.taskqueue.isReady?c.apply(this,k):new Promise(function(h,n){d.taskqueue.addTask(function(b){b?n(b):h(d[g].apply(d,k))})})}))}function mH(g,c){for(var k={},d=0,h=c.length;d<h;d++){var n=c[d];n in g&&(k[n]=g[n])}return k}function A2(g){return g}function oha(g){return[{ok:g}]}function B2(g,c,k){function d(){var v=[];f.forEach(function(x){x.docs.forEach(function(y){v.push({id:x.id,docs:[y]})})});
k(null,{results:v})}function h(){if(!(r>=m.length)){var v=m.slice(r,Math.min(r+6,m.length));n(v,r);r+=v.length}}function n(v,x){v.forEach(function(y,E){var F=x+E;E=e.get(y);var I=mH(E[0],["atts_since","attachments"]);I.open_revs=E.map(function(P){return P.rev});I.open_revs=I.open_revs.filter(A2);var J=A2;0===I.open_revs.length&&(delete I.open_revs,J=oha);["revs","attachments","binary","ajax","latest"].forEach(function(P){P in c&&(I[P]=c[P])});g.get(y,I,function(P,N){P=P?[{error:P}]:J(N);f[F]={id:y,
docs:P};++a===l&&d();h()})})}var b=c.docs,e=new yr;b.forEach(function(v){e.has(v.id)?e.get(v.id).push(v):e.set(v.id,[v])});var l=e.size,a=0,f=Array(l),m=[];e.forEach(function(v,x){m.push(x)});var r=0;h()}function pha(g){nH&&addEventListener("storage",function(c){g.emit(c.key)})}function yE(){Fq.EventEmitter.call(this);this._listeners={};pha(this)}function Hs(g){if("undefined"!==typeof console&&"function"===typeof console[g]){var c=Array.prototype.slice.call(arguments,1);console[g].apply(console,c)}}
function qha(g){var c=0;g||(c=2E3);g=parseInt(g,10)||0;c=parseInt(c,10);c=c!==c||c<=g?(g||1)<<1:c+1;6E5<c&&(g=3E5,c=6E5);return~~((c-g)*Math.random()+g)}function WS(g,c){Hs("info","The above "+g+" is totally normal. "+c)}function fl(g,c,k){Error.call(this,k);this.status=g;this.name=c;this.message=k;this.error=!0}function Wi(g,c){function k(d){for(var h in g)"function"!==typeof g[h]&&(this[h]=g[h]);void 0!==d&&(this.reason=d)}k.prototype=fl.prototype;return new k(c)}function zE(g){if("object"!==typeof g){var c=
g;g=C2;g.data=c}"error"in g&&"conflict"===g.error&&(g.name="conflict",g.status=409);"name"in g||(g.name=g.error||"unknown");"status"in g||(g.status=500);"message"in g||(g.message=g.message||g.reason);return g}function XS(g){var c={},k=g.filter&&"function"===typeof g.filter;c.query=g.query_params;return function(d){d.doc||(d.doc={});var h;if(h=k)try{h=!(0,g.filter)(d.doc,c)}catch(b){h=Wi($L,"Filter function threw: "+b.toString())}if("object"===typeof h)return h;if(h)return!1;if(!g.include_docs)delete d.doc;
else if(!g.attachments)for(var n in d.doc._attachments)d.doc._attachments.hasOwnProperty(n)&&(d.doc._attachments[n].stub=!0);return!0}}function aM(g){for(var c=[],k=0,d=g.length;k<d;k++)c=c.concat(g[k]);return c}function D2(g){var c;g?"string"!==typeof g?c=Wi(E2):/^_/.test(g)&&!/^_(design|local)/.test(g)&&(c=Wi(rha)):c=Wi(sha);if(c)throw c;}function ew(g){return"boolean"===typeof g._remote?g._remote:"function"===typeof g.type?(Hs("warn","db.type() is deprecated and will be removed in a future version of PouchDB"),
"http"===g.type()):!1}function YS(g){if(!g)return null;var c=g.split("/");return 2===c.length?c:1===c.length?[g,g]:null}function F2(g){return(g=YS(g))?g.join("/"):null}function G2(g){g=tha.exec(g);for(var c={},k=14;k--;){var d=H2[k],h=g[k]||"",n=-1!==["user","password"].indexOf(d);c[d]=n?decodeURIComponent(h):h}c.queryKey={};c[H2[12]].replace(uha,function(b,e,l){e&&(c.queryKey[e]=l)});return c}function ZS(g,c){var k=[],d=[],h;for(h in c)c.hasOwnProperty(h)&&(k.push(h),d.push(c[h]));k.push(g);return Function.apply(null,
k).apply(null,d)}function bM(g,c,k){return new Promise(function(d,h){g.get(c,function(n,b){if(n){if(404!==n.status)return h(n);b={}}n=b._rev;b=k(b);if(!b)return d({updated:!1,rev:n});b._id=c;b._rev=n;d(vha(g,b,k))})})}function vha(g,c,k){return g.put(c).then(function(d){return{updated:!0,rev:d.rev}},function(d){if(409!==d.status)throw d;return bM(g,c._id,k)})}function $S(g,c){g=g||[];c=c||{};try{return new Blob(g,c)}catch(h){if("TypeError"!==h.name)throw h;for(var k=new ("undefined"!==typeof BlobBuilder?
BlobBuilder:"undefined"!==typeof MSBlobBuilder?MSBlobBuilder:"undefined"!==typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder),d=0;d<g.length;d+=1)k.append(g[d]);return k.getBlob(c.type)}}function aT(g,c){for(var k=g.length,d=new ArrayBuffer(k),h=new Uint8Array(d),n=0;n<k;n++)h[n]=g.charCodeAt(n);return $S([d],{type:c})}function bT(g,c){return aT(atob(g),c)}function I2(g,c){var k=new FileReader,d="function"===typeof k.readAsBinaryString;k.onloadend=function(h){var n=h.target.result||"";if(d)return c(n);
h="";n=new Uint8Array(n);for(var b=n.byteLength,e=0;e<b;e++)h+=String.fromCharCode(n[e]);c(h)};d?k.readAsBinaryString(g):k.readAsArrayBuffer(g)}function J2(g,c){I2(g,function(k){c(k)})}function cT(g,c){J2(g,function(k){c(btoa(k))})}function wha(g,c){var k=new FileReader;k.onloadend=function(d){d=d.target.result||new ArrayBuffer(0);c(d)};k.readAsArrayBuffer(g)}function xha(g,c,k){return g.webkitSlice?g.webkitSlice(c,k):g.slice(c,k)}function yha(g,c,k,d,h){if(0<k||d<c.size)c=xha(c,k,d);wha(c,function(n){g.append(n);
h()})}function zha(g,c,k,d,h){if(0<k||d<c.length)c=c.substring(k,d);g.appendBinary(c);h()}function dT(g,c){function k(){Aha(h)}function d(){var r=f.end(!0);r=btoa(r);c(r);f.destroy()}function h(){var r=a*e,v=r+e;a++;a<l?m(f,g,r,v,k):m(f,g,r,v,d)}var n="string"===typeof g,b=n?g.length:g.size,e=Math.min(32768,b),l=Math.ceil(b/e),a=0,f=n?new cM:new cM.ArrayBuffer,m=n?zha:yha;h()}function K2(g,c){g=nn(g);if(!c)return L2.v4().replace(/-/g,"").toLowerCase();delete g._rev_tree;return cM.hash(JSON.stringify(g))}
function PB(g){g=g.rev_tree.slice();for(var c;c=g.pop();){var k=c.ids,d=k[2];c=c.pos;if(d.length){k=0;for(var h=d.length;k<h;k++)g.push({pos:c+1,ids:d[k]})}else if(d=!!k[1].deleted,k=k[0],!n||(e!==d?e:b!==c?b<c:n<k)){var n=k;var b=c;var e=d}}return b+"-"+n}function QB(g,c){g=g.slice();for(var k;k=g.pop();){var d=k.pos,h=k.ids,n=h[2];k=c(0===n.length,d,h[0],k.ctx,h[1]);h=0;for(var b=n.length;h<b;h++)g.push({pos:d+1,ids:n[h],ctx:k})}}function Bha(g,c){return g.pos-c.pos}function eT(g){var c=[];QB(g,
function(d,h,n,b,e){d&&c.push({rev:h+"-"+n,pos:h,opts:e})});c.sort(Bha).reverse();g=0;for(var k=c.length;g<k;g++)delete c[g].pos;return c}function fT(g){var c=PB(g);g=eT(g.rev_tree);for(var k=[],d=0,h=g.length;d<h;d++){var n=g[d];n.rev===c||n.opts.deleted||k.push(n.rev)}return k}function Cha(g){var c=[];QB(g.rev_tree,function(k,d,h,n,b){"available"!==b.status||k||(c.push(d+"-"+h),b.status="missing")});return c}function M2(g){var c=[];g=g.slice();for(var k;k=g.pop();){var d=k.pos,h=k.ids,n=h[0],b=
h[1];h=h[2];var e=0===h.length;k=k.history?k.history.slice():[];k.push({id:n,opts:b});e&&c.push({pos:d+1-k.length,ids:k});n=0;for(b=h.length;n<b;n++)g.push({pos:d+1,ids:h[n],history:k})}return c.reverse()}function Dha(g,c){return g.pos-c.pos}function N2(g,c){for(var k,d,h=g.length;c<h;c++){var n=g[c];n=[n.id,n.opts,[]];d?(d[2].push(n),d=n):k=d=n}return k}function Eha(g,c){return g[0]<c[0]?-1:1}function O2(g,c){c=[{tree1:g,tree2:c}];for(var k=!1;0<c.length;){var d=c.pop(),h=d.tree1;d=d.tree2;if(h[1].status||
d[1].status)h[1].status="available"===h[1].status||"available"===d[1].status?"available":"missing";for(var n=0;n<d[2].length;n++)if(h[2][0]){for(var b=!1,e=0;e<h[2].length;e++)h[2][e][0]===d[2][n][0]&&(c.push({tree1:h[2][e],tree2:d[2][n]}),b=!0);if(!b){k="new_branch";b=h[2];e=d[2][n];for(var l,a=b,f=e,m=Eha,r=0,v=a.length;r<v;)l=r+v>>>1,0>m(a[l],f)?r=l+1:v=l;b.splice(r,0,e)}}else k="new_leaf",h[2][0]=d[2][n]}return{conflicts:k,tree:g}}function P2(g,c,k){var d=[],h=!1,n=!1;if(!g.length)return{tree:[c],
conflicts:"new_leaf"};for(var b=0,e=g.length;b<e;b++){var l=g[b];if(l.pos===c.pos&&l.ids[0]===c.ids[0])n=O2(l.ids,c.ids),d.push({pos:l.pos,ids:n.tree}),h=h||n.conflicts,n=!0;else if(!0!==k){var a=l.pos<c.pos?l:c,f=l.pos<c.pos?c:l,m=[],r=[];for(r.push({ids:a.ids,diff:f.pos-a.pos,parent:null,parentIdx:null});0<r.length;){var v=r.pop();if(0===v.diff)v.ids[0]===f.ids[0]&&m.push(v);else for(var x=v.ids[2],y=0,E=x.length;y<E;y++)r.push({ids:x[y],diff:v.diff-1,parent:v.ids,parentIdx:y})}(m=m[0])?(n=O2(m.ids,
f.ids),m.parent[2][m.parentIdx]=n.tree,d.push({pos:a.pos,ids:a.ids}),h=h||n.conflicts,n=!0):d.push(l)}else d.push(l)}n||d.push(c);d.sort(Dha);return{tree:d,conflicts:h||"internal_node"}}function Fha(g,c){g=M2(g);for(var k,d,h=0,n=g.length;h<n;h++){var b=g[h],e=b.ids;if(e.length>c){k||(k={});var l=e.length-c;var a={pos:b.pos+l,ids:N2(e,l)};for(var f=0;f<l;f++)k[b.pos+f+"-"+e[f].id]=!0}else a={pos:b.pos,ids:N2(e,0)};d=d?P2(d,a,!0).tree:[a]}k&&QB(d,function(m,r,v){delete k[r+"-"+v]});return{tree:d,revs:k?
Object.keys(k):[]}}function Q2(g,c,k){g=P2(g,c);k=Fha(g.tree,k);return{tree:k.tree,stemmedRevs:k.revs,conflicts:g.conflicts}}function Gha(g){return g.ids}function $x(g,c){c||(c=PB(g));c=c.substring(c.indexOf("-")+1);g=g.rev_tree.map(Gha);for(var k;k=g.pop();){if(k[0]===c)return!!k[1].deleted;g=g.concat(k[2])}}function RB(g){return/^_local/.test(g)}function Hha(g,c){for(var k=c.rev_tree.slice(),d;d=k.pop();){var h=d.pos,n=d.ids,b=n[0],e=n[1];n=n[2];var l=0===n.length;d=d.history?d.history.slice():
[];d.push({id:b,pos:h,opts:e});if(l)for(e=0,l=d.length;e<l;e++){var a=d[e];if(a.pos+"-"+a.id===g)return h+"-"+b}b=0;for(e=n.length;b<e;b++)k.push({pos:h+1,ids:n[b],history:d})}throw Error("Unable to resolve latest revision for id "+c.id+", rev "+g);}function oH(g,c,k){function d(){h.cancel()}Fq.EventEmitter.call(this);var h=this;this.db=g;c=c?nn(c):{};var n=c.complete=y2(function(e,l){e?(l=h,0<("listenerCount"in l?l.listenerCount("error"):Fq.EventEmitter.listenerCount(l,"error"))&&h.emit("error",
e)):h.emit("complete",l);h.removeAllListeners();g.removeListener("destroyed",d)});k&&(h.on("complete",function(e){k(null,e)}),h.on("error",k));g.once("destroyed",d);c.onChange=function(e,l,a){if(!h.isCancelled)try{h.emit("change",e,l,a)}catch(f){Hs("error",'Error in .on("change", function):',f)}};var b=new Promise(function(e,l){c.complete=function(a,f){a?l(a):e(f)}});h.once("cancel",function(){g.removeListener("destroyed",d);c.complete(null,{status:"cancelled"})});this.then=b.then.bind(b);this["catch"]=
b["catch"].bind(b);this.then(function(e){n(null,e)},n);g.taskqueue.isReady?h.validateChanges(c):g.taskqueue.addTask(function(e){e?c.complete(e):h.isCancelled?h.emit("cancel"):h.validateChanges(c)})}function Iha(g,c,k){var d=[{rev:g._rev}];"all_docs"===k.style&&(d=eT(c.rev_tree).map(function(h){return{rev:h.rev}}));d={id:c.id,changes:d,doc:g};$x(c,g._rev)&&(d.deleted=!0);k.conflicts&&(d.doc._conflicts=fT(c),d.doc._conflicts.length||delete d.doc._conflicts);return d}function gT(g,c){return function(k,
d){k||d[0]&&d[0].error?(k=k||d[0],k.docId=c,g(k)):g(null,d.length?d[0]:d)}}function Jha(g){for(var c=0;c<g.length;c++){var k=g[c];if(k._deleted)delete k._attachments;else if(k._attachments)for(var d=Object.keys(k._attachments),h=0;h<d.length;h++){var n=d[h];k._attachments[n]=mH(k._attachments[n],"data digest content_type length revpos stub".split(" "))}}}function Kha(g,c){var k=g._id;var d=c._id;k=k<d?-1:k>d?1:0;if(0!==k)return k;g=g._revisions?g._revisions.start:0;c=c._revisions?c._revisions.start:
0;return g<c?-1:g>c?1:0}function Lha(g){var c={},k=[];QB(g,function(d,h,n,b){h=h+"-"+n;d&&(c[h]=0);void 0!==b&&k.push({from:b,to:h});return h});k.reverse();k.forEach(function(d){c[d.from]=void 0===c[d.from]?1+c[d.to]:Math.min(c[d.from],1+c[d.to])});return c}function Mha(g){var c="limit"in g?g.keys.slice(g.skip,g.limit+g.skip):0<g.skip?g.keys.slice(g.skip):g.keys;g.keys=c;g.skip=0;delete g.limit;g.descending&&(c.reverse(),g.descending=!1)}function R2(g){var c=g._compactionQueue[0],k=c.opts,d=c.callback;
g.get("_local/compaction").catch(function(){return!1}).then(function(h){h&&h.last_seq&&(k.last_seq=h.last_seq);g._compact(k,function(n,b){n?d(n):d(null,b);fw(function(){g._compactionQueue.shift();g._compactionQueue.length&&R2(g)})})})}function ul(){Fq.EventEmitter.call(this);for(var g in ul.prototype)"function"===typeof this[g]&&(this[g]=this[g].bind(this))}function pH(){this.failed=this.isReady=!1;this.queue=[]}function Nha(g,c){var k=g.match(/([a-z-]*):\/\/(.*)/);if(k)return{name:/https?/.test(k[1])?
k[1]+"://"+k[2]:k[2],adapter:k[1]};var d=Pi.adapters,h=Pi.preferredAdapters;k=Pi.prefix;c=c.adapter;if(!c)for(var n=0;n<h.length;++n)if(c=h[n],"idb"===c&&"websql"in d&&nH&&localStorage["_pouch__websqldb_"+k+g])Hs("log",'PouchDB is downgrading "'+g+'" to WebSQL to avoid data loss, because it was already opened with WebSQL.');else break;d=d[c];return{name:(d&&"use_prefix"in d?d.use_prefix:1)?k+g:g,adapter:c}}function Oha(g){function c(d){g.removeListener("closed",k);d||g.constructor.emit("destroyed",
g.name)}function k(){g.removeListener("destroyed",c);g.constructor.emit("unref",g)}g.once("destroyed",c);g.once("closed",k);g.constructor.emit("ref",g)}function Pi(g,c){if(!(this instanceof Pi))return new Pi(g,c);var k=this;c=c||{};g&&"object"===typeof g&&(c=g,g=c.name,delete c.name);void 0===c.deterministic_revs&&(c.deterministic_revs=!0);this.__opts=c=nn(c);k.auto_compaction=c.auto_compaction;k.prefix=Pi.prefix;if("string"!==typeof g)throw Error("Missing/invalid DB name");var d=Nha((c.prefix||"")+
g,c);c.name=d.name;c.adapter=c.adapter||d.adapter;k.name=g;k._adapter=c.adapter;Pi.emit("debug",["adapter","Picked adapter: ",c.adapter]);if(!Pi.adapters[c.adapter]||!Pi.adapters[c.adapter].valid())throw Error("Invalid Adapter: "+c.adapter);ul.call(k);k.taskqueue=new pH;k.adapter=c.adapter;Pi.adapters[c.adapter].call(k,c,function(h){if(h)return k.taskqueue.fail(h);Oha(k);k.emit("created",k);Pi.emit("created",k.name);k.taskqueue.ready(k)})}function S2(g,c){for(var k=0,d=c.length;k<d&&(g=g[c[k]],g);k++);
return g}function T2(g){for(var c=[],k="",d=0,h=g.length;d<h;d++){var n=g[d];"."===n?0<d&&"\\"===g[d-1]?k=k.substring(0,k.length-1)+".":(c.push(k),k=""):k+=n}c.push(k);return c}function Pha(g){return g[Object.keys(g)[0]]}function qH(g){var c={};g.forEach(function(k){Object.keys(k).forEach(function(d){var h=k[d];"object"!==typeof h&&(h={$eq:h});if(-1<U2.indexOf(d))c[d]=h instanceof Array?h.map(function(b){return qH([b])}):qH([h]);else{var n=c[d]=c[d]||{};Object.keys(h).forEach(function(b){var e=h[b];
"$gt"===b||"$gte"===b?"undefined"===typeof n.$eq&&("undefined"!==typeof n.$gte?"$gte"===b?e>n.$gte&&(n.$gte=e):e>=n.$gte&&(delete n.$gte,n.$gt=e):"undefined"!==typeof n.$gt?"$gte"===b?e>n.$gt&&(delete n.$gt,n.$gte=e):e>n.$gt&&(n.$gt=e):n[b]=e):"$lt"===b||"$lte"===b?"undefined"===typeof n.$eq&&("undefined"!==typeof n.$lte?"$lte"===b?e<n.$lte&&(n.$lte=e):e<=n.$lte&&(delete n.$lte,n.$lt=e):"undefined"!==typeof n.$lt?"$lte"===b?e<n.$lt&&(delete n.$lt,n.$lte=e):e<n.$lt&&(n.$lt=e):n[b]=e):"$ne"===b?"$ne"in
n?n.$ne.push(e):n.$ne=[e]:"$eq"===b?(delete n.$gt,delete n.$gte,delete n.$lt,delete n.$lte,delete n.$ne,n.$eq=e):n[b]=e})}})});return c}function V2(g){for(var c in g){if(Array.isArray(g))for(var k in g)g[k].$and&&(g[k]=qH(g[k].$and));var d=g[c];"object"===typeof d&&V2(d)}return g}function W2(g,c){for(var k in g){"$and"===k&&(c=!0);var d=g[k];"object"===typeof d&&(c=W2(d,c))}return c}function Qha(g){var c=nn(g);g=!1;W2(c,!1)&&(c=V2(c),"$and"in c&&(c=qH(c.$and)),g=!0);["$or","$nor"].forEach(function(b){b in
c&&c[b].forEach(function(e){for(var l=Object.keys(e),a=0;a<l.length;a++){var f=l[a],m=e[f];if("object"!==typeof m||null===m)e[f]={$eq:m}}})});"$not"in c&&(c.$not=qH([c.$not]));for(var k=Object.keys(c),d=0;d<k.length;d++){var h=k[d],n=c[h];"object"!==typeof n||null===n?n={$eq:n}:"$ne"in n&&!g&&(n.$ne=[n.$ne]);c[h]=n}return c}function Tn(g,c){if(g===c)return 0;g=SB(g);c=SB(c);var k=hT(g),d=hT(c);if(0!==k-d)return k-d;switch(typeof g){case "number":return g-c;case "boolean":return g<c?-1:1;case "string":return g===
c?0:g>c?1:-1}if(Array.isArray(g))a:{k=Math.min(g.length,c.length);for(d=0;d<k;d++){var h=Tn(g[d],c[d]);if(0!==h){g=h;break a}}g=g.length===c.length?0:g.length>c.length?1:-1}else a:{k=Object.keys(g);d=Object.keys(c);h=Math.min(k.length,d.length);for(var n=0;n<h;n++){var b=Tn(k[n],d[n]);if(0!==b){g=b;break a}b=Tn(g[k[n]],c[d[n]]);if(0!==b){g=b;break a}}g=k.length===d.length?0:k.length>d.length?1:-1}return g}function SB(g){switch(typeof g){case "undefined":return null;case "number":if(Infinity===g||
-Infinity===g||isNaN(g))return null;break;case "object":var c=g;if(Array.isArray(g)){var k=g.length;g=Array(k);for(var d=0;d<k;d++)g[d]=SB(c[d])}else{if(g instanceof Date)return g.toJSON();if(null!==g)for(k in g={},c)c.hasOwnProperty(k)&&(d=c[k],"undefined"!==typeof d&&(g[k]=SB(d)))}}return g}function Rha(g){if(null!==g)switch(typeof g){case "boolean":return g?1:0;case "number":if(0===g)g="1";else{var c=g.toExponential().split(/e\+?/),k=parseInt(c[1],10);g=0>g;k=((g?-k:k)- -324).toString();for(var d=
"",h=3-k.length;d.length<h;)d+="0";k=(g?"0":"2")+(""+(d+k));c=Math.abs(parseFloat(c[0]));g&&(c=10-c);g=c.toFixed(20);g=g.replace(/\.?0+$/,"");g=k+=""+g}return g;case "string":return g.replace(/\u0002/g,"\u0002\u0002").replace(/\u0001/g,"\u0001\u0002").replace(/\u0000/g,"\u0001\u0001");case "object":var n=Array.isArray(g);c=n?g:Object.keys(g);k=-1;d=c.length;h="";if(n)for(;++k<d;)h+=ru(c[k]);else for(;++k<d;)n=c[k],h+=ru(n)+ru(g[n]);return h}return""}function ru(g){g=SB(g);return hT(g)+""+Rha(g)+"\x00"}
function hT(g){var c=["boolean","number","string","object"].indexOf(typeof g);if(~c)return null===g?1:Array.isArray(g)?5:3>c?c+2:c+3;if(Array.isArray(g))return 5}function Sha(g){function c(k){return g.map(function(d){d=Object.keys(d)[0];d=T2(d);return S2(k,d)})}return function(k,d){var h=c(k.doc),n=c(d.doc);h=Tn(h,n);if(0!==h)return h;k=k.doc._id;d=d.doc._id;return k<d?-1:k>d?1:0}}function Tha(g,c,k){g=g.filter(function(h){return AE(h.doc,c.selector,k)});if(c.sort){var d=Sha(c.sort);g=g.sort(d);"string"!==
typeof c.sort[0]&&"desc"===Pha(c.sort[0])&&(g=g.reverse())}if("limit"in c||"skip"in c)d=c.skip||0,g=g.slice(d,("limit"in c?c.limit:g.length)+d);return g}function AE(g,c,k){return k.every(function(d){var h=c[d],n=T2(d),b=S2(g,n);return-1<U2.indexOf(d)?Uha(d,h,g):iT(h,g,n,b)})}function iT(g,c,k,d){return g?"object"===typeof g?Object.keys(g).every(function(h){var n=g[h];if(!X2[h])throw Error('unknown operator "'+h+'" - should be one of $eq, $lte, $lt, $gt, $gte, $exists, $ne, $in, $nin, $size, $mod, $regex, $elemMatch, $type, $allMatch or $all');
return X2[h](c,n,k,d)}):g===d:!0}function Uha(g,c,k){return"$or"===g?c.some(function(d){return AE(k,d,Object.keys(d))}):"$not"===g?!AE(k,c,Object.keys(c)):!c.find(function(d){return AE(k,d,Object.keys(d))})}function rH(g){return"undefined"!==typeof g&&null!==g}function TB(g){return"undefined"!==typeof g}function Y2(g,c){return c.some(function(k){return g instanceof Array?-1<g.indexOf(k):g===k})}function Vha(g,c){return c.every(function(k){return-1<g.indexOf(k)})}function Wha(g,c){switch(c){case "null":return null===
g;case "boolean":return"boolean"===typeof g;case "number":return"number"===typeof g;case "string":return"string"===typeof g;case "array":return g instanceof Array;case "object":return"[object Object]"==={}.toString.call(g)}throw Error(c+" not supported as a type.Please use one of object, string, array, number, boolean or null.");}function Xha(g,c){if(g.selector&&g.filter&&"_selector"!==g.filter)return c(Error('selector invalid for filter "'+("string"===typeof g.filter?g.filter:"function")+'"'));c()}
function Yha(g){g.view&&!g.filter&&(g.filter="_view");g.selector&&!g.filter&&(g.filter="_selector");g.filter&&"string"===typeof g.filter&&("_view"===g.filter?g.view=F2(g.view):g.filter=F2(g.filter))}function Zha(g,c){return c.filter&&"string"===typeof c.filter&&!c.doc_ids&&!ew(g.db)}function $ha(g,c){var k=c.complete;if("_view"===c.filter){if(!c.view||"string"!==typeof c.view){var d=Wi($L,"`view` filter parameter not found or invalid.");return k(d)}var h=YS(c.view);g.db.get("_design/"+h[0],function(b,
e){if(g.isCancelled)return k(null,{status:"cancelled"});if(b)return k(zE(b));b=e&&e.views&&e.views[h[1]]&&e.views[h[1]].map;if(!b)return k(Wi(su,e.views?"missing json key: "+h[1]:"missing json key: views"));e=['return function(doc) {\n  "use strict";\n  var emitted = false;\n  var emit = function (a, b) {\n    emitted = true;\n  };',"  var view = "+b+";","  view(doc);\n  if (emitted) {\n    return true;\n  }\n};"].join("\n");e=ZS(e,{});c.filter=e;g.doChanges(c)})}else if(c.selector)c.filter=function(b){var e=
c.selector;if("object"!==typeof e)throw Error("Selector error: expected a JSON object");e=Qha(e);return(b=Tha([{doc:b}],{selector:e},Object.keys(e)))&&1===b.length},g.doChanges(c);else{var n=YS(c.filter);g.db.get("_design/"+n[0],function(b,e){if(g.isCancelled)return k(null,{status:"cancelled"});if(b)return k(zE(b));b=e&&e.filters&&e.filters[n[1]];if(!b)return k(Wi(su,e&&e.filters?"missing json key: "+n[1]:"missing json key: filters"));c.filter=ZS('"use strict";\nreturn '+b+";",{});g.doChanges(c)})}}
function Z2(g){return g.reduce(function(c,k){c[k]=!0;return c},{})}function $2(g){if(!/^\d+-/.test(g))return Wi(a3);var c=g.indexOf("-"),k=g.substring(0,c);g=g.substring(c+1);return{prefix:parseInt(k,10),id:g}}function b3(g,c,k){k||(k={deterministic_revs:!0});var d={status:"available"};g._deleted&&(d.deleted=!0);if(c){g._id||(g._id=dM());var h=K2(g,k.deterministic_revs);if(g._rev){c=$2(g._rev);if(c.error)return c;g._rev_tree=[{pos:c.prefix,ids:[c.id,{status:"missing"},[[h,d,[]]]]}];var n=c.prefix+
1}else g._rev_tree=[{pos:1,ids:[h,d,[]]}],n=1}else{if(g._revisions){h=g._revisions;n=h.start-h.ids.length+1;h=h.ids;c=[h[0],d,[]];k=1;for(var b=h.length;k<b;k++)c=[h[k],{status:"missing"},[c]];g._rev_tree=[{pos:n,ids:c}];n=g._revisions.start;h=g._revisions.ids[0]}if(!g._rev_tree){c=$2(g._rev);if(c.error)return c;n=c.prefix;h=c.id;g._rev_tree=[{pos:n,ids:[h,d,[]]}]}}D2(g._id);g._rev=n+"-"+h;d={metadata:{},data:{}};for(var e in g)if(Object.prototype.hasOwnProperty.call(g,e)){if((n="_"===e[0])&&!aia[e])throw g=
Wi(c3,e),g.message=c3.message+": "+e,g;n&&!bia[e]?d.metadata[e.slice(1)]=g[e]:d.data[e]=g[e]}return d}function cia(g,c,k){try{var d=atob(g.data)}catch(h){d={error:Wi(d3,"Attachment is not a valid base64 string")}}if(d.error)return k(d.error);g.length=d.length;g.data="blob"===c?aT(d,g.content_type):"base64"===c?btoa(d):d;dT(d,function(h){g.digest="md5-"+h;k()})}function dia(g,c,k){dT(g.data,function(d){g.digest="md5-"+d;g.length=g.data.size||g.data.length||0;"binary"===c?J2(g.data,function(h){g.data=
h;k()}):"base64"===c?cT(g.data,function(h){g.data=h;k()}):k()})}function eia(g,c,k){if(g.stub)return k();"string"===typeof g.data?cia(g,c,k):dia(g,c,k)}function fia(g,c,k){function d(){h++;g.length===h&&(n?k(n):k())}if(!g.length)return k();var h=0,n;g.forEach(function(b){function e(m){n=m;a++;a===l.length&&d()}var l=b.data&&b.data._attachments?Object.keys(b.data._attachments):[],a=0;if(!l.length)return d();for(var f in b.data._attachments)b.data._attachments.hasOwnProperty(f)&&eia(b.data._attachments[f],
c,e)})}function gia(g,c,k,d,h,n,b,e,l){g=g||1E3;var a=e.new_edits,f=new yr,m=0,r=c.length;c.forEach(function(v,x){if(v._id&&RB(v._id))k[v._deleted?"_removeLocal":"_putLocal"](v,{ctx:h},function(E,F){n[x]=E||F;++m===r&&l&&l()});else{var y=v.metadata.id;f.has(y)?(r--,f.get(y).push([v,x])):f.set(y,[[v,x]])}});f.forEach(function(v,x){function y(){++F<v.length?E():++m===r&&l&&l()}function E(){var I=v[F],J=I[0];I=I[1];if(d.has(x)){var P=g,N=d.get(x);b:{var Y=J.metadata.rev;var W=N.rev_tree.slice();var da=
Y.split("-");Y=parseInt(da[0],10);da=da[1];for(var va;va=W.pop();){if(va.pos===Y&&va.ids[0]===da){W=!0;break b}for(var za=va.ids[2],L=0,Z=za.length;L<Z;L++)W.push({pos:va.pos+1,ids:za[L]})}W=!1}W&&!a?(n[I]=J,y()):(da=N.winningRev||PB(N),W="deleted"in N?N.deleted:$x(N,da),Y="deleted"in J.metadata?J.metadata.deleted:$x(J.metadata),va=/^1-/.test(J.metadata.rev),W&&!Y&&a&&va&&(va=J.data,va._rev=da,va._id=J.metadata.id,J=b3(va,a)),da=Q2(N.rev_tree,J.metadata.rev_tree[0],P),a&&(W&&Y&&"new_leaf"!==da.conflicts||
!W&&"new_leaf"!==da.conflicts||W&&!Y&&"new_branch"===da.conflicts)?(J=Wi(BE),n[I]=J,y()):(P=J.metadata.rev,J.metadata.rev_tree=da.tree,J.stemmedRevs=da.stemmedRevs||[],N.rev_map&&(J.metadata.rev_map=N.rev_map),N=PB(J.metadata),Y=$x(J.metadata,N),W=W===Y?0:W<Y?-1:1,P=P===N?Y:$x(J.metadata,P),b(J,N,Y,P,!0,W,I,y)))}else N=Q2([],J.metadata.rev_tree[0],g),J.metadata.rev_tree=N.tree,J.stemmedRevs=N.stemmedRevs||[],N=PB(J.metadata),P=$x(J.metadata,N),"was_delete"in e&&P?(n[I]=Wi(su,"deleted"),y()):a&&"missing"===
J.metadata.rev_tree[0].ids[1].status?(J=Wi(BE),n[I]=J,y()):b(J,N,P,P,!1,P?0:1,I,y)}var F=0;E()})}function gw(g){return function(c){var k="unknown_error";c.target&&c.target.error&&(k=c.target.error.name||c.target.error.message);g(Wi(jT,k,c.type))}}function kT(g,c,k){try{var d=JSON.stringify(g)}catch(h){d=e3.stringify(g)}return{data:d,winningRev:c,deletedOrLocal:k?"1":"0",seq:g.seq,id:g.id}}function UB(g){if(!g)return null;var c=g.data;try{var k=JSON.parse(c)}catch(d){k=e3.parse(c)}k.winningRev=g.winningRev;
k.deleted="1"===g.deletedOrLocal;k.seq=g.seq;return k}function eM(g){if(!g)return g;var c=g._doc_id_rev.lastIndexOf(":");g._id=g._doc_id_rev.substring(0,c-1);g._rev=g._doc_id_rev.substring(c+1);delete g._doc_id_rev;return g}function f3(g,c,k,d){k?g?"string"!==typeof g?d(g):d(bT(g,c)):d($S([""],{type:c})):g?"string"!==typeof g?I2(g,function(h){d(btoa(h))}):d(g):d("")}function g3(g,c,k,d){function h(e,l){var a=e._attachments[l];e=a.digest;k.objectStore("attach-store").get(e).onsuccess=function(f){a.body=
f.target.result.body;++b===n.length&&d&&d()}}var n=Object.keys(g._attachments||{});if(!n.length)return d&&d();var b=0;n.forEach(function(e){c.attachments&&c.include_docs?h(g,e):(g._attachments[e].stub=!0,++b===n.length&&d&&d())})}function lT(g,c){return Promise.all(g.map(function(k){if(k.doc&&k.doc._attachments){var d=Object.keys(k.doc._attachments);return Promise.all(d.map(function(h){var n=k.doc._attachments[h];if("body"in n){var b=n.body,e=n.content_type;return new Promise(function(l){f3(b,e,c,
function(a){k.doc._attachments[h]=CE(mH(n,["digest","content_type"]),{data:a});l()})})}}))}}))}function h3(g,c,k){function d(){h.length&&h.forEach(function(a){e.index("digestSeq").count(IDBKeyRange.bound(a+"::",a+"::\uffff",!1,!1)).onsuccess=function(f){f.target.result||b.delete(a)}})}var h=[],n=k.objectStore("by-sequence"),b=k.objectStore("attach-store"),e=k.objectStore("attach-seq-store"),l=g.length;g.forEach(function(a){n.index("_doc_id_rev").getKey(c+"::"+a).onsuccess=function(f){f=f.target.result;
"number"!==typeof f?(l--,l||d()):(n.delete(f),e.index("seq").openCursor(IDBKeyRange.only(f)).onsuccess=function(m){if(m=m.target.result){var r=m.value.digestSeq.split("::")[0];h.push(r);e.delete(m.primaryKey);m.continue()}else l--,l||d()})}})}function tu(g,c,k){try{return{txn:g.transaction(c,k)}}catch(d){return{error:d}}}function hia(g,c,k,d,h,n){function b(){var hb=tu(h,"document-store by-sequence attach-store local-store attach-seq-store meta-store".split(" "),"readwrite");if(hb.error)return n(hb.error);
P=hb.txn;P.onabort=gw(n);P.ontimeout=gw(n);P.oncomplete=m;N=P.objectStore("document-store");Y=P.objectStore("by-sequence");W=P.objectStore("attach-store");da=P.objectStore("attach-seq-store");va=P.objectStore("meta-store");va.get("meta-store").onsuccess=function(ta){L=ta.target.result;a()};v(function(ta){if(ta)return gb=!0,n(ta);f()})}function e(){X=!0;a()}function l(){gia(g.revs_limit,J,d,ua,P,fa,x,k,e)}function a(){L&&X&&(L.docCount+=ja,va.put(L))}function f(){function hb(Hb){(Hb=UB(Hb.target.result))&&
ua.set(Hb.id,Hb);++ta===J.length&&l()}if(J.length)for(var ta=0,na=0,pa=J.length;na<pa;na++){var La=J[na];La._id&&RB(La._id)?++ta===J.length&&l():N.get(La.metadata.id).onsuccess=hb}}function m(){gb||(sH.notify(d._meta.name),n(null,fa))}function r(hb,ta){W.get(hb).onsuccess=function(na){na.target.result?ta():(na=Wi(iia,"unknown stub attachment with digest "+hb),na.status=412,ta(na))}}function v(hb){var ta=[];J.forEach(function(La){La.data&&La.data._attachments&&Object.keys(La.data._attachments).forEach(function(Hb){Hb=
La.data._attachments[Hb];Hb.stub&&ta.push(Hb.digest)})});if(!ta.length)return hb();var na=0,pa;ta.forEach(function(La){r(La,function(Hb){Hb&&!pa&&(pa=Hb);++na===ta.length&&hb(pa)})})}function x(hb,ta,na,pa,La,Hb,fc,Ob){hb.metadata.winningRev=ta;hb.metadata.deleted=na;var Zb=hb.data;Zb._id=hb.metadata.id;Zb._rev=hb.metadata.rev;pa&&(Zb._deleted=!0);if(Zb._attachments&&Object.keys(Zb._attachments).length)return E(hb,ta,na,La,fc,Ob);ja+=Hb;a();y(hb,ta,na,La,fc,Ob)}function y(hb,ta,na,pa,La,Hb){function fc(dd){var Gd=
hb.stemmedRevs||[];pa&&d.auto_compaction&&(Gd=Gd.concat(Cha(hb.metadata)));Gd&&Gd.length&&h3(Gd,hb.metadata.id,P);Hc.seq=dd.target.result;dd=kT(Hc,ta,na);N.put(dd).onsuccess=Ob}function Ob(){fa[La]={ok:!0,id:Hc.id,rev:Hc.rev};ua.set(hb.metadata.id,hb.metadata);F(hb,Hc.seq,Hb)}var Zb=hb.data,Hc=hb.metadata;Zb._doc_id_rev=Hc.id+"::"+Hc.rev;delete Zb._id;delete Zb._rev;var Gb=Y.put(Zb);Gb.onsuccess=fc;Gb.onerror=function(dd){dd.preventDefault();dd.stopPropagation();Y.index("_doc_id_rev").getKey(Zb._doc_id_rev).onsuccess=
function(Gd){Y.put(Zb,Gd.target.result).onsuccess=fc}}}function E(hb,ta,na,pa,La,Hb){function fc(){Zb===Hc.length&&y(hb,ta,na,pa,La,Hb)}function Ob(){Zb++;fc()}var Zb=0,Hc=Object.keys(hb.data._attachments);Hc.forEach(function(Gb){Gb=hb.data._attachments[Gb];if(Gb.stub)Zb++,fc();else{var dd=Gb.data;delete Gb.data;Gb.revpos=parseInt(ta,10);I(Gb.digest,dd,Ob)}})}function F(hb,ta,na){function pa(){++Hb===fc.length&&na()}function La(Zb){Zb=da.put({seq:ta,digestSeq:hb.data._attachments[Zb].digest+"::"+
ta});Zb.onsuccess=pa;Zb.onerror=function(Hc){Hc.preventDefault();Hc.stopPropagation();pa()}}var Hb=0,fc=Object.keys(hb.data._attachments||{});if(!fc.length)return na();for(var Ob=0;Ob<fc.length;Ob++)La(fc[Ob])}function I(hb,ta,na){W.count(hb).onsuccess=function(pa){if(pa.target.result)return na();W.put({digest:hb,body:ta}).onsuccess=na}}var J=c.docs,P,N,Y,W,da,va,za,L;c=0;for(var Z=J.length;c<Z;c++){var R=J[c];R._id&&RB(R._id)||(R=J[c]=b3(R,k.new_edits,g),R.error&&!za&&(za=R))}if(za)return n(za);
var X=!1,ja=0,fa=Array(J.length),ua=new yr,gb=!1;fia(J,d._meta.blobSupport?"blob":"base64",function(hb){if(hb)return n(hb);b()})}function i3(g,c,k,d,h){function n(r){f=r.target.result;a&&h(a,f,m)}function b(r){a=r.target.result;f&&h(a,f,m)}function e(){if(!a.length)return h();var r=a[a.length-1];if(c&&c.upper)try{var v=IDBKeyRange.bound(r,c.upper,!0,c.upperOpen)}catch(x){if("DataError"===x.name&&0===x.code)return h()}else v=IDBKeyRange.lowerBound(r,!0);c=v;f=a=null;g.getAll(c,d).onsuccess=n;g.getAllKeys(c,
d).onsuccess=b}function l(r){r=r.target.result;if(!r)return h();h([r.key],[r.value],r)}-1===d&&(d=1E3);var a,f;if("function"===typeof g.getAll&&"function"===typeof g.getAllKeys&&1<d&&!k){var m={"continue":e};g.getAll(c,d).onsuccess=n;g.getAllKeys(c,d).onsuccess=b}else k?g.openCursor(c,"prev").onsuccess=l:g.openCursor(c).onsuccess=l}function jia(g,c,k){if("function"===typeof g.getAll)g.getAll(c).onsuccess=k;else{var d=[];g.openCursor(c).onsuccess=function(h){(h=h.target.result)?(d.push(h.value),h.continue()):
k({target:{result:d}})}}}function kia(g,c,k){var d=Array(g.length),h=0;g.forEach(function(n,b){c.get(n).onsuccess=function(e){d[b]=e.target.result?e.target.result:{key:n,error:"not_found"};h++;h===g.length&&k(g,d,{})}})}function lia(g,c,k,d,h){try{if(g&&c)return h?IDBKeyRange.bound(c,g,!k,!1):IDBKeyRange.bound(g,c,!1,!k);if(g)return h?IDBKeyRange.upperBound(g):IDBKeyRange.lowerBound(g);if(c)return h?IDBKeyRange.lowerBound(c,!k):IDBKeyRange.upperBound(c,!k);if(d)return IDBKeyRange.only(d)}catch(n){return{error:n}}return null}
function mia(g,c,k){function d(W,da){W.openCursor(null,"prev").onsuccess=function(va){va=va.target.result;var za=void 0;va&&va.key&&(za=va.key);return da({target:{result:[za]}})}}function h(W,da,va){J.get(W.id+"::"+va).onsuccess=function(za){da.doc=eM(za.target.result)||{};g.conflicts&&(za=fT(W),za.length&&(da.doc._conflicts=za));g3(da.doc,g,I)}}function n(W){for(var da=0,va=W.length;da<va&&P.length!==x;da++){var za=W[da];if(za.error&&r)P.push(za);else{var L=UB(za);za=L.winningRev;var Z={id:L.id,
key:L.id,value:{rev:za}};L.deleted?r&&(P.push(Z),Z.value.deleted=!0,Z.doc=null):0>=v--&&(P.push(Z),g.include_docs&&h(L,Z,za))}}}function b(W,da,va){va&&(n(da),P.length<x&&va.continue())}function e(W){W=W.target.result;g.descending&&(W=W.reverse());n(W)}function l(){var W={total_rows:N,offset:g.skip,rows:P};g.update_seq&&void 0!==Y&&(W.update_seq=Y);k(null,W)}var a="startkey"in g?g.startkey:!1,f="endkey"in g?g.endkey:!1,m="key"in g?g.key:!1,r="keys"in g?g.keys:!1,v=g.skip||0,x="number"===typeof g.limit?
g.limit:-1,y=!1!==g.inclusive_end,E,F;if(!r&&(F=(E=lia(a,f,y,m,g.descending))&&E.error)&&("DataError"!==F.name||0!==F.code))return k(Wi(jT,F.name,F.message));a=["document-store","by-sequence","meta-store"];g.attachments&&a.push("attach-store");c=tu(c,a,"readonly");if(c.error)return k(c.error);var I=c.txn;I.oncomplete=function(){g.attachments?lT(P,g.binary).then(l):l()};I.onabort=gw(k);c=I.objectStore("document-store");a=I.objectStore("by-sequence");f=I.objectStore("meta-store");var J=a.index("_doc_id_rev"),
P=[],N,Y;f.get("meta-store").onsuccess=function(W){N=W.target.result.docCount};g.update_seq&&d(a,function(W){W.target.result&&0<W.target.result.length&&(Y=W.target.result[0])});if(!F&&0!==x){if(r)return kia(g.keys,c,b);if(-1===x)return jia(c,E,e);i3(c,E,g.descending,x+v,b)}}function nia(g){return(new Promise(function(c){var k=$S([""]);k=g.objectStore("detect-blob-support").put(k,"key");k.onsuccess=function(){var d=navigator.userAgent.match(/Chrome\/(\d+)/),h=navigator.userAgent.match(/Edge\//);c(h||
!d||43<=parseInt(d[1],10))};k.onerror=g.onabort=function(d){d.preventDefault();d.stopPropagation();c(!1)}})).catch(function(){return!1})}function oia(g,c){g.objectStore("document-store").index("deletedOrLocal").count(IDBKeyRange.only("0")).onsuccess=function(k){c(k.target.result)}}function pia(g,c,k,d){try{g(c,k)}catch(h){d.emit("error",h)}}function j3(){!mT&&nT.length&&(mT=!0,nT.shift()())}function qia(g,c,k){nT.push(function(){g(function(d,h){pia(c,d,h,k);mT=!1;fw(function(){j3()})})});j3()}function ria(g,
c,k,d){function h(I,J,P,N){if(P.seq!==J)return N();if(P.winningRev===I._rev)return N(P,I);F.get(I._id+"::"+P.winningRev).onsuccess=function(Y){N(P,eM(Y.target.result))}}function n(I,J,P){if(l&&!l.has(I._id))return P();var N=x.get(I._id);if(N)return h(I,J,N,P);E.get(I._id).onsuccess=function(Y){N=UB(Y.target.result);x.set(I._id,N);h(I,J,N,P)}}function b(){g.complete(null,{results:m,last_seq:a})}g=nn(g);if(g.continuous){var e=k+":"+dM();sH.addListener(k,e,c,g);sH.notify(k);return{cancel:function(){sH.removeListener(k,
e)}}}var l=g.doc_ids&&new tH(g.doc_ids);g.since=g.since||0;var a=g.since,f="limit"in g?g.limit:-1;0===f&&(f=1);var m=[],r=0,v=XS(g),x=new yr;c=["document-store","by-sequence"];g.attachments&&c.push("attach-store");d=tu(d,c,"readonly");if(d.error)return g.complete(d.error);var y=d.txn;y.onabort=gw(g.complete);y.oncomplete=function(){!g.continuous&&g.attachments?lT(m).then(b):b()};d=y.objectStore("by-sequence");var E=y.objectStore("document-store");var F=d.index("_doc_id_rev");c=g.since&&!g.descending?
IDBKeyRange.lowerBound(g.since,!0):null;i3(d,c,g.descending,f,function(I,J,P){function N(za,L){var Z=g.processChange(L,za,g);a=Z.seq=za.seq;za=v(Z);if("object"===typeof za)return Promise.reject(za);if(!za)return Promise.resolve();r++;g.return_docs&&m.push(Z);return g.attachments&&g.include_docs?new Promise(function(R){g3(L,g,y,function(){lT([Z],g.binary).then(function(){R(Z)})})}):Promise.resolve(Z)}function Y(){for(var za=[],L=0,Z=W.length;L<Z&&r!==f;L++){var R=W[L];R&&za.push(N(da[L],R))}Promise.all(za).then(function(X){for(var ja=
0,fa=X.length;ja<fa;ja++)if(X[ja])g.onChange(X[ja])}).catch(g.complete);r!==f&&P.continue()}if(P&&I.length){var W=Array(I.length),da=Array(I.length),va=0;J.forEach(function(za,L){za=eM(za);n(za,I[L],function(Z,R){da[L]=Z;W[L]=R;++va===I.length&&Y()})})}})}function k3(g,c){var k=this;qia(function(d){sia(k,g,d)},c,k.constructor)}function sia(g,c,k){function d(r){var v=r.createObjectStore("document-store",{keyPath:"id"});r.createObjectStore("by-sequence",{autoIncrement:!0}).createIndex("_doc_id_rev",
"_doc_id_rev",{unique:!0});r.createObjectStore("attach-store",{keyPath:"digest"});r.createObjectStore("meta-store",{keyPath:"id",autoIncrement:!1});r.createObjectStore("detect-blob-support");v.createIndex("deletedOrLocal","deletedOrLocal",{unique:!1});r.createObjectStore("local-store",{keyPath:"_id"});r=r.createObjectStore("attach-seq-store",{autoIncrement:!0});r.createIndex("seq","seq");r.createIndex("digestSeq","digestSeq",{unique:!0})}function h(r,v){var x=r.objectStore("document-store");x.createIndex("deletedOrLocal",
"deletedOrLocal",{unique:!1});x.openCursor().onsuccess=function(y){if(y=y.target.result){var E=y.value,F=$x(E);E.deletedOrLocal=F?"1":"0";x.put(E);y.continue()}else v()}}function n(r,v){var x=r.objectStore("local-store"),y=r.objectStore("document-store"),E=r.objectStore("by-sequence");y.openCursor().onsuccess=function(F){var I=F.target.result;if(I){var J=I.value;F=J.id;var P=RB(F);J=PB(J);if(P){var N=F+"::"+J;P=F+"::";J=F+"::~";F=E.index("_doc_id_rev");P=IDBKeyRange.bound(P,J,!1,!1);var Y=F.openCursor(P);
Y.onsuccess=function(W){(Y=W.target.result)?(W=Y.value,W._doc_id_rev===N&&x.put(W),E.delete(Y.primaryKey),Y.continue()):(y.delete(I.primaryKey),I.continue())}}else I.continue()}else v&&v()}}function b(r){r=r.createObjectStore("attach-seq-store",{autoIncrement:!0});r.createIndex("seq","seq");r.createIndex("digestSeq","digestSeq",{unique:!0})}function e(r,v){var x=r.objectStore("by-sequence"),y=r.objectStore("attach-store"),E=r.objectStore("attach-seq-store");y.count().onsuccess=function(F){if(!F.target.result)return v();
x.openCursor().onsuccess=function(I){I=I.target.result;if(!I)return v();for(var J=I.value,P=I.primaryKey,N=Object.keys(J._attachments||{}),Y={},W=0;W<N.length;W++)Y[J._attachments[N[W]].digest]=!0;J=Object.keys(Y);for(W=0;W<J.length;W++)E.put({seq:P,digestSeq:J[W]+"::"+P});I.continue()}}}function l(r){function v(E){return E.data?UB(E):(E.deleted="1"===E.deletedOrLocal,E)}var x=r.objectStore("by-sequence"),y=r.objectStore("document-store");y.openCursor().onsuccess=function(E){function F(){var P=kT(J,
J.winningRev,J.deleted);y.put(P).onsuccess=function(){I.continue()}}var I=E.target.result;if(I){var J=v(I.value);J.winningRev=J.winningRev||PB(J);if(J.seq)return F();(function(){var P=J.id+"::",N=J.id+"::\uffff",Y=0;x.index("_doc_id_rev").openCursor(IDBKeyRange.bound(P,N)).onsuccess=function(W){W=W.target.result;if(!W)return J.seq=Y,F();var da=W.primaryKey;da>Y&&(Y=da);W.continue()}})()}}}var a=c.name,f=null;g._meta=null;g._remote=!1;g.type=function(){return"idb"};g._id=z2(function(r){r(null,g._meta.instanceId)});
g._bulkDocs=function(r,v,x){hia(c,r,v,g,f,x)};g._get=function(r,v,x){function y(){x(I,{doc:E,metadata:F,ctx:J})}var E,F,I,J=v.ctx;if(!J){var P=tu(f,["document-store","by-sequence","attach-store"],"readonly");if(P.error)return x(P.error);J=P.txn}J.objectStore("document-store").get(r).onsuccess=function(N){F=UB(N.target.result);if(!F)return I=Wi(su,"missing"),y();if(v.rev)var Y=v.latest?Hha(v.rev,F):v.rev;else if(Y=F.winningRev,$x(F))return I=Wi(su,"deleted"),y();N=J.objectStore("by-sequence");Y=F.id+
"::"+Y;N.index("_doc_id_rev").get(Y).onsuccess=function(W){(E=W.target.result)&&(E=eM(E));if(!E)return I=Wi(su,"missing"),y();y()}}};g._getAttachment=function(r,v,x,y,E){if(y.ctx)r=y.ctx;else{r=tu(f,["document-store","by-sequence","attach-store"],"readonly");if(r.error)return E(r.error);r=r.txn}v=x.digest;var F=x.content_type;r.objectStore("attach-store").get(v).onsuccess=function(I){f3(I.target.result.body,F,y.binary,function(J){E(null,J)})}};g._info=function(r){var v,x,y=tu(f,["meta-store","by-sequence"],
"readonly");if(y.error)return r(y.error);y=y.txn;y.objectStore("meta-store").get("meta-store").onsuccess=function(E){x=E.target.result.docCount};y.objectStore("by-sequence").openCursor(null,"prev").onsuccess=function(E){v=(E=E.target.result)?E.key:0};y.oncomplete=function(){r(null,{doc_count:x,update_seq:v,idb_attachment_format:g._meta.blobSupport?"binary":"base64"})}};g._allDocs=function(r,v){mia(r,f,v)};g._changes=function(r){return ria(r,g,a,f)};g._close=function(r){f.close();DE.delete(a);r()};
g._getRevisionTree=function(r,v){var x=tu(f,["document-store"],"readonly");if(x.error)return v(x.error);x.txn.objectStore("document-store").get(r).onsuccess=function(y){(y=UB(y.target.result))?v(null,y.rev_tree):v(Wi(su))}};g._doCompaction=function(r,v,x){var y=tu(f,["document-store","by-sequence","attach-store","attach-seq-store"],"readwrite");if(y.error)return x(y.error);var E=y.txn;E.objectStore("document-store").get(r).onsuccess=function(F){F=UB(F.target.result);QB(F.rev_tree,function(P,N,Y,W,
da){-1!==v.indexOf(N+"-"+Y)&&(da.status="missing")});h3(v,r,E);var I=F.winningRev,J=F.deleted;E.objectStore("document-store").put(kT(F,I,J))};E.onabort=gw(x);E.oncomplete=function(){x()}};g._getLocal=function(r,v){var x=tu(f,["local-store"],"readonly");if(x.error)return v(x.error);r=x.txn.objectStore("local-store").get(r);r.onerror=gw(v);r.onsuccess=function(y){(y=y.target.result)?(delete y._doc_id_rev,v(null,y)):v(Wi(su))}};g._putLocal=function(r,v,x){"function"===typeof v&&(x=v,v={});delete r._revisions;
var y=r._rev,E=r._id;r._rev=y?"0-"+(parseInt(y.split("-")[1],10)+1):"0-1";var F=v.ctx,I;if(!F){F=tu(f,["local-store"],"readwrite");if(F.error)return x(F.error);F=F.txn;F.onerror=gw(x);F.oncomplete=function(){I&&x(null,I)}}var J=F.objectStore("local-store");y?(E=J.get(E),E.onsuccess=function(P){(P=P.target.result)&&P._rev===y?J.put(r).onsuccess=function(){I={ok:!0,id:r._id,rev:r._rev};v.ctx&&x(null,I)}:x(Wi(BE))}):(E=J.add(r),E.onerror=function(P){x(Wi(BE));P.preventDefault();P.stopPropagation()},
E.onsuccess=function(){I={ok:!0,id:r._id,rev:r._rev};v.ctx&&x(null,I)})};g._removeLocal=function(r,v,x){"function"===typeof v&&(x=v,v={});var y=v.ctx;if(!y){y=tu(f,["local-store"],"readwrite");if(y.error)return x(y.error);y=y.txn;y.oncomplete=function(){E&&x(null,E)}}var E,F=r._id,I=y.objectStore("local-store");y=I.get(F);y.onerror=gw(x);y.onsuccess=function(J){(J=J.target.result)&&J._rev===r._rev?(I.delete(F),E={ok:!0,id:F,rev:"0-0"},v.ctx&&x(null,E)):x(Wi(su))}};g._destroy=function(r,v){sH.removeAllListeners(a);
(r=oT.get(a))&&r.result&&(r.result.close(),DE.delete(a));r=indexedDB.deleteDatabase(a);r.onsuccess=function(){oT.delete(a);nH&&a in localStorage&&delete localStorage[a];v(null,{ok:!0})};r.onerror=gw(v)};var m=DE.get(a);if(m)return f=m.idb,g._meta=m.global,fw(function(){k(null,g)});m=indexedDB.open(a,5);oT.set(a,m);m.onupgradeneeded=function(r){function v(){var I=E[F-1];F++;I&&I(y,v)}var x=r.target.result;if(1>r.oldVersion)return d(x);var y=r.currentTarget.transaction;3>r.oldVersion&&x.createObjectStore("local-store",
{keyPath:"_id"}).createIndex("_doc_id_rev","_doc_id_rev",{unique:!0});4>r.oldVersion&&b(x);var E=[h,n,e,l],F=r.oldVersion;v()};m.onsuccess=function(r){function v(){"undefined"!==typeof J&&E&&(g._meta={name:a,instanceId:P,blobSupport:J},DE.set(a,{idb:f,global:g._meta}),k(null,g))}function x(){if("undefined"!==typeof I&&"undefined"!==typeof F){var N=a+"_id";N in F?P=F[N]:F[N]=P=dM();F.docCount=I;y.objectStore("meta-store").put(F)}}f=r.target.result;f.onversionchange=function(){f.close();DE.delete(a)};
f.onabort=function(N){Hs("error","Database has a global failure",N.target.error);f.close();DE.delete(a)};var y=f.transaction(["meta-store","detect-blob-support","document-store"],"readwrite"),E=!1,F,I,J,P;y.objectStore("meta-store").get("meta-store").onsuccess=function(N){F=N.target.result||{id:"meta-store"};x()};oia(y,function(N){I=N;x()});pT||(pT=nia(y));pT.then(function(N){J=N;v()});y.oncomplete=function(){E=!0;v()};y.onabort=gw(k)};m.onerror=function(r){(r=r.target.error&&r.target.error.message)?
-1!==r.indexOf("stored database is a higher version")&&(r=Error('This DB was created with the newer "indexeddb" adapter, but you are trying to open it with the older "idb" adapter')):r="Failed to open indexedDB, are you in private browsing mode?";Hs("error",r);k(Wi(jT,r))}}function tia(g,c){return new Promise(function(k,d){function h(){l++;g[a++]().then(b,e)}function n(){if(++f===m)r?d(r):k();else for(;l<c&&a<m;)h()}function b(){l--;n()}function e(v){l--;r=r||v;n()}for(var l=0,a=0,f=0,m=g.length,
r;l<c&&a<m;)h()})}function qT(g){var c=(g=g.doc||g.ok)&&g._attachments;c&&Object.keys(c).forEach(function(k){k=c[k];k.data=bT(k.data,k.content_type)})}function VB(g){return/^_design/.test(g)?"_design/"+encodeURIComponent(g.slice(8)):/^_local/.test(g)?"_local/"+encodeURIComponent(g.slice(7)):encodeURIComponent(g)}function l3(g){return g._attachments&&Object.keys(g._attachments)?Promise.all(Object.keys(g._attachments).map(function(c){var k=g._attachments[c];if(k.data&&"string"!==typeof k.data)return(new Promise(function(d){cT(k.data,
d)})).then(function(d){k.data=d})})):Promise.resolve()}function uia(g,c){if(c.prefix){var k=G2(c.prefix).protocol;k="http"===k||"https"===k}else k=!1;k&&(g=c.name.substr(c.prefix.length),g=c.prefix.replace(/\/?$/,"/")+encodeURIComponent(g));c=G2(g);if(c.user||c.password)c.auth={username:c.user,password:c.password};g=c.path.replace(/(^\/|\/$)/g,"").split("/");c.db=g.pop();-1===c.db.indexOf("%")&&(c.db=encodeURIComponent(c.db));c.path=g.join("/");return c}function on(g,c){return fM(g,g.db+"/"+c)}function fM(g,
c){return g.protocol+"://"+g.host+(g.port?":"+g.port:"")+"/"+g.path+(g.path?"/":"")+c}function gM(g){return"?"+Object.keys(g).map(function(c){return c+"="+encodeURIComponent(g[c])}).join("&")}function via(g){var c="undefined"!==typeof navigator&&navigator.userAgent?navigator.userAgent.toLowerCase():"",k=-1!==c.indexOf("msie"),d=-1!==c.indexOf("trident");c=-1!==c.indexOf("edge");g=!("method"in g)||"GET"===g.method;return(k||d||c)&&g}function rT(g,c){function k(m,r){return Om(m,xE(function(v){h().then(function(){return r.apply(this,
v)}).catch(function(x){v.pop()(x)})})).bind(b)}function d(m,r,v){var x={};r=r||{};r.headers=r.headers||new EE;r.headers.get("Content-Type")||r.headers.set("Content-Type","application/json");r.headers.get("Accept")||r.headers.set("Accept","application/json");return a(m,r).then(function(y){x.ok=y.ok;x.status=y.status;return y.json()}).then(function(y){x.data=y;if(!x.ok){x.data.status=x.status;y=zE(x.data);if(v)return v(y);throw y;}Array.isArray(x.data)&&(x.data=x.data.map(function(E){return E.error||
E.missing?zE(E):E}));if(v)v(null,x.data);else return x})}function h(){if(g.skip_setup)return Promise.resolve();if(f)return f;f=d(l).catch(function(m){return m&&m.status&&404===m.status?(WS(404,"PouchDB is just detecting if the remote exists."),d(l,{method:"PUT"})):Promise.reject(m)}).catch(function(m){return m&&m.status&&412===m.status?!0:Promise.reject(m)});f.catch(function(){f=null});return f}function n(m){return m.split("/").map(encodeURIComponent).join("/")}var b=this,e=uia(g.name,g),l=on(e,"");
g=nn(g);var a=function(m,r){r=r||{};r.headers=r.headers||new EE;r.credentials="include";if(g.auth||e.auth){var v=g.auth||e.auth;v=btoa(unescape(encodeURIComponent(v.username+":"+v.password)));r.headers.set("Authorization","Basic "+v)}var x=g.headers||{};Object.keys(x).forEach(function(y){r.headers.append(y,x[y])});via(r)&&(m+=(-1===m.indexOf("?")?"?":"&")+"_nonce="+Date.now());return(g.fetch||m3)(m,r)},f;fw(function(){c(null,b)});b._remote=!0;b.type=function(){return"http"};b.id=k("id",function(m){a(fM(e,
"")).then(function(r){return r.json()}).catch(function(){return{}}).then(function(r){r=r&&r.uuid?r.uuid+e.db:on(e,"");m(null,r)})});b.compact=k("compact",function(m,r){"function"===typeof m&&(r=m,m={});m=nn(m);d(on(e,"_compact"),{method:"POST"}).then(function(){function v(){b.info(function(x,y){y&&!y.compact_running?r(null,{ok:!0}):setTimeout(v,m.interval||200)})}v()})});b.bulkGet=Om("bulkGet",function(m,r){function v(I){var J={};m.revs&&(J.revs=!0);m.attachments&&(J.attachments=!0);m.latest&&(J.latest=
!0);d(on(e,"_bulk_get"+gM(J)),{method:"POST",body:JSON.stringify({docs:m.docs})}).then(function(P){m.attachments&&m.binary&&P.data.results.forEach(function(N){N.docs.forEach(qT)});I(null,P.data)}).catch(I)}function x(){function I(da){return function(va,za){N[da]=za.results;++P===J&&r(null,{results:aM(N)})}}for(var J=Math.ceil(m.docs.length/50),P=0,N=Array(J),Y=0;Y<J;Y++){var W=mH(m,["revs","attachments","binary","latest"]);W.docs=m.docs.slice(50*Y,Math.min(m.docs.length,50*(Y+1)));B2(y,W,I(Y))}}var y=
this,E=fM(e,""),F=sT[E];"boolean"!==typeof F?v(function(I,J){I?(sT[E]=!1,WS(I.status,"PouchDB is just detecting if the remote supports the _bulk_get API."),x()):(sT[E]=!0,r(null,J))}):F?v(r):x()});b._info=function(m){h().then(function(){return a(on(e,""))}).then(function(r){return r.json()}).then(function(r){r.host=on(e,"");m(null,r)}).catch(m)};b.fetch=function(m,r){return h().then(function(){var v="/"===m.substring(0,1)?fM(e,m.substring(1)):on(e,m);return a(v,r)})};b.get=k("get",function(m,r,v){function x(F){function I(N){var Y=
J[N];N=VB(F._id)+"/"+n(N)+"?rev="+F._rev;return a(on(e,N)).then(function(W){return"buffer"in W?W.buffer():W.blob()}).then(function(W){if(r.binary){var da=Object.getOwnPropertyDescriptor(W.__proto__,"type");if(!da||da.set)W.type=Y.content_type;return W}return new Promise(function(va){cT(W,va)})}).then(function(W){delete Y.stub;delete Y.length;Y.data=W})}var J=F._attachments,P=J&&Object.keys(J);if(J&&P.length)return P=P.map(function(N){return function(){return I(N)}}),tia(P,5)}function y(F){return Array.isArray(F)?
Promise.all(F.map(function(I){if(I.ok)return x(I.ok)})):x(F)}"function"===typeof r&&(v=r,r={});r=nn(r);var E={};r.revs&&(E.revs=!0);r.revs_info&&(E.revs_info=!0);r.latest&&(E.latest=!0);r.open_revs&&("all"!==r.open_revs&&(r.open_revs=JSON.stringify(r.open_revs)),E.open_revs=r.open_revs);r.rev&&(E.rev=r.rev);r.conflicts&&(E.conflicts=r.conflicts);r.update_seq&&(E.update_seq=r.update_seq);m=VB(m);E=on(e,m+gM(E));d(E).then(function(F){return Promise.resolve().then(function(){if(r.attachments)return y(F.data)}).then(function(){v(null,
F.data)})}).catch(function(F){F.docId=m;v(F)})});b.remove=k("remove",function(m,r,v,x){"string"===typeof r?(m={_id:m,_rev:r},"function"===typeof v&&(x=v,v={})):"function"===typeof r?(x=r,v={}):(x=v,v=r);r=m._rev||v.rev;r=on(e,VB(m._id))+"?rev="+r;d(r,{method:"DELETE"},x).catch(x)});b.getAttachment=k("getAttachment",function(m,r,v,x){"function"===typeof v&&(x=v,v={});v=v.rev?"?rev="+v.rev:"";m=on(e,VB(m))+"/"+n(r)+v;var y;a(m,{method:"GET"}).then(function(E){y=E.headers.get("content-type");if(E.ok)return"undefined"===
typeof hM||hM.browser||"function"!==typeof E.buffer?E.blob():E.buffer();throw E;}).then(function(E){"undefined"===typeof hM||hM.browser||(E.type=y);x(null,E)}).catch(function(E){x(E)})});b.removeAttachment=k("removeAttachment",function(m,r,v,x){m=on(e,VB(m)+"/"+n(r))+"?rev="+v;d(m,{method:"DELETE"},x).catch(x)});b.putAttachment=k("putAttachment",function(m,r,v,x,y,E){"function"===typeof y&&(E=y,y=x,x=v,v=null);m=VB(m)+"/"+n(r);m=on(e,m);v&&(m+="?rev="+v);if("string"===typeof x){try{var F=atob(x)}catch(I){return E(Wi(d3,
"Attachment is not a valid base64 string"))}x=F?aT(F,y):""}d(m,{headers:new EE({"Content-Type":y}),method:"PUT",body:x},E).catch(E)});b._bulkDocs=function(m,r,v){m.new_edits=r.new_edits;h().then(function(){return Promise.all(m.docs.map(l3))}).then(function(){return d(on(e,"_bulk_docs"),{method:"POST",body:JSON.stringify(m)},v)}).catch(v)};b._put=function(m,r,v){h().then(function(){return l3(m)}).then(function(){return d(on(e,VB(m._id)),{method:"PUT",body:JSON.stringify(m)})}).then(function(x){v(null,
x.data)}).catch(function(x){x.docId=m&&m._id;v(x)})};b.allDocs=k("allDocs",function(m,r){"function"===typeof m&&(r=m,m={});m=nn(m);var v={},x="GET";m.conflicts&&(v.conflicts=!0);m.update_seq&&(v.update_seq=!0);m.descending&&(v.descending=!0);m.include_docs&&(v.include_docs=!0);m.attachments&&(v.attachments=!0);m.key&&(v.key=JSON.stringify(m.key));m.start_key&&(m.startkey=m.start_key);m.startkey&&(v.startkey=JSON.stringify(m.startkey));m.end_key&&(m.endkey=m.end_key);m.endkey&&(v.endkey=JSON.stringify(m.endkey));
"undefined"!==typeof m.inclusive_end&&(v.inclusive_end=!!m.inclusive_end);"undefined"!==typeof m.limit&&(v.limit=m.limit);"undefined"!==typeof m.skip&&(v.skip=m.skip);v=gM(v);if("undefined"!==typeof m.keys){x="POST";var y={keys:m.keys}}d(on(e,"_all_docs"+v),{method:x,body:JSON.stringify(y)}).then(function(E){m.include_docs&&m.attachments&&m.binary&&E.data.rows.forEach(qT);r(null,E.data)}).catch(r)});b._changes=function(m){var r="batch_size"in m?m.batch_size:25;m=nn(m);!m.continuous||"heartbeat"in
m||(m.heartbeat=1E4);var v="timeout"in m?m.timeout:3E4;"timeout"in m&&m.timeout&&5E3>v-m.timeout&&(v=m.timeout+5E3);"heartbeat"in m&&m.heartbeat&&5E3>v-m.heartbeat&&(v=m.heartbeat+5E3);var x={};"timeout"in m&&m.timeout&&(x.timeout=m.timeout);var y="undefined"!==typeof m.limit?m.limit:!1,E=y;m.style&&(x.style=m.style);if(m.include_docs||m.filter&&"function"===typeof m.filter)x.include_docs=!0;m.attachments&&(x.attachments=!0);m.continuous&&(x.feed="longpoll");m.seq_interval&&(x.seq_interval=m.seq_interval);
m.conflicts&&(x.conflicts=!0);m.descending&&(x.descending=!0);m.update_seq&&(x.update_seq=!0);"heartbeat"in m&&m.heartbeat&&(x.heartbeat=m.heartbeat);m.filter&&"string"===typeof m.filter&&(x.filter=m.filter);m.view&&"string"===typeof m.view&&(x.filter="_view",x.view=m.view);if(m.query_params&&"object"===typeof m.query_params)for(var F in m.query_params)m.query_params.hasOwnProperty(F)&&(x[F]=m.query_params[F]);var I="GET";if(m.doc_ids){x.filter="_doc_ids";I="POST";var J={doc_ids:m.doc_ids}}else m.selector&&
(x.filter="_selector",I="POST",J={selector:m.selector});var P=new wia,N,Y=function(va,za){if(!m.aborted){x.since=va;"object"===typeof x.since&&(x.since=JSON.stringify(x.since));m.descending?y&&(x.limit=E):x.limit=!y||E>r?r:E;var L=on(e,"_changes"+gM(x)),Z={signal:P.signal,method:I,body:JSON.stringify(J)};N=va;m.aborted||h().then(function(){return d(L,Z,za)}).catch(za)}},W={results:[]},da=function(va,za){if(!m.aborted){var L=0;if(za&&za.results){L=za.results.length;W.last_seq=za.last_seq;var Z=null,
R=null;"number"===typeof za.pending&&(Z=za.pending);if("string"===typeof W.last_seq||"number"===typeof W.last_seq)R=W.last_seq;za.results=za.results.filter(function(X){E--;var ja=XS(m)(X);ja&&(m.include_docs&&m.attachments&&m.binary&&qT(X),m.return_docs&&W.results.push(X),m.onChange(X,Z,R));return ja})}else if(va){m.aborted=!0;m.complete(va);return}za&&za.last_seq&&(N=za.last_seq);va=y&&0>=E||za&&L<r||m.descending;(!m.continuous||y&&0>=E)&&va?m.complete(null,W):fw(function(){Y(N,da)})}};Y(m.since||
0,da);return{cancel:function(){m.aborted=!0;P.abort()}}};b.revsDiff=k("revsDiff",function(m,r,v){"function"===typeof r&&(v=r);d(on(e,"_revs_diff"),{method:"POST",body:JSON.stringify(m)},v).catch(v)});b._close=function(m){m()};b._destroy=function(m,r){d(on(e,""),{method:"DELETE"}).then(function(v){r(null,v)}).catch(function(v){404===v.status?r(null,{ok:!0}):r(v)})}}function WB(g){this.status=400;this.name="query_parse_error";this.message=g;this.error=!0;try{Error.captureStackTrace(this,WB)}catch(c){}}
function iM(g){this.status=404;this.name="not_found";this.message=g;this.error=!0;try{Error.captureStackTrace(this,iM)}catch(c){}}function jM(g){this.status=500;this.name="invalid_value";this.message=g;this.error=!0;try{Error.captureStackTrace(this,jM)}catch(c){}}function n3(g,c){c&&g.then(function(k){fw(function(){c(null,k)})},function(k){fw(function(){c(k)})});return g}function xia(g){return xE(function(c){var k=c.pop();c=g.apply(this,c);"function"===typeof k&&n3(c,k);return c})}function yia(g,
c){return g.then(function(k){return c().then(function(){return k})},function(k){return c().then(function(){throw k;})})}function tT(g,c){return function(){var k=arguments,d=this;return g.add(function(){return c.apply(d,k)})}}function o3(g){g=new tH(g);var c=Array(g.size),k=-1;g.forEach(function(d){c[++k]=d});return c}function uT(g){var c=Array(g.size),k=-1;g.forEach(function(d,h){c[++k]=h});return c}function p3(g){return new jM("builtin "+g+" function requires map values to be numbers or number arrays")}
function vT(g){for(var c=0,k=0,d=g.length;k<d;k++){var h=g[k];if("number"!==typeof h)if(Array.isArray(h)){c="number"===typeof c?[c]:c;for(var n=0,b=h.length;n<b;n++){var e=h[n];if("number"!==typeof e)throw p3("_sum");"undefined"===typeof c[n]?c.push(e):c[n]+=e}}else throw p3("_sum");else"number"===typeof c?c+=h:c[0]+=h}return c}function q3(g,c){return ZS("return ("+g.replace(/;\s*$/,"")+");",{emit:c,sum:vT,log:zia,isArray:Aia,toJSON:Bia})}function uH(){this.promise=new Promise(function(g){g()})}function r3(g){if(!g)return"undefined";
switch(typeof g){case "function":return g.toString();case "string":return g.toString();default:return JSON.stringify(g)}}function Cia(g,c){return r3(g)+r3(c)+"undefined"}function s3(g,c,k,d,h,n){var b=Cia(k,d);if(!h){var e=g._cachedViews=g._cachedViews||{};if(e[b])return e[b]}var l=g.info().then(function(a){var f=a.db_name+"-mrview-"+(h?"temp":cM.hash(b));return bM(g,"_local/"+n,function(m){m.views=m.views||{};var r=c;-1===r.indexOf("/")&&(r=c+"/"+c);r=m.views[r]=m.views[r]||{};if(!r[f])return r[f]=
!0,m}).then(function(){return g.registerDependentDatabase(f).then(function(m){m=m.db;m.auto_compaction=!0;var r={name:f,db:m,sourceDB:g,adapter:g.adapter,mapFun:k,reduceFun:d};return r.db.get("_local/lastSeq").catch(function(v){if(404!==v.status)throw v;}).then(function(v){r.seq=v?v.seq:0;if(e)r.db.once("destroyed",function(){delete e[b]});return r})})})});e&&(e[b]=l);return l}function wT(g){return-1===g.indexOf("/")?[g,g]:g.split("/")}function Dia(g){return 1===g.length&&/^1-/.test(g[0].rev)}function t3(g,
c){try{g.emit("error",c)}catch(k){Hs("error","The user's map/reduce function threw an uncaught error.\nYou can debug this error by doing:\nmyDatabase.on('error', function (err) { debugger; });\nPlease double-check your map/reduce function."),Hs("error",c)}}function u3(g,c){var k=Object.keys(c._attachments);return Promise.all(k.map(function(d){return g.getAttachment(c._id,d,{rev:c._rev})}))}function Eia(g,c,k){var d=ew(c)&&!ew(g),h=Object.keys(k._attachments);return d?g.get(k._id).then(function(n){return Promise.all(h.map(function(b){return n._attachments&&
n._attachments[b]&&n._attachments[b].digest===k._attachments[b].digest?g.getAttachment(n._id,b):c.getAttachment(k._id,b)}))}).catch(function(n){if(404!==n.status)throw n;return u3(c,k)}):u3(c,k)}function Fia(g){var c=[];Object.keys(g).forEach(function(k){g[k].missing.forEach(function(d){c.push({id:k,rev:d})})});return{docs:c,revs:!0,latest:!0}}function Gia(g,c,k,d){function h(e){return g.allDocs({keys:e,include_docs:!0,conflicts:!0}).then(function(l){if(d.cancelled)throw Error("cancelled");l.rows.forEach(function(a){var f;
(f=a.deleted||!a.doc||!/^1-/.test(a.value.rev))||(f=a.doc,f=f._attachments&&0<Object.keys(f._attachments).length);f||(f=a.doc,f=f._conflicts&&0<f._conflicts.length);f||(a.doc._conflicts&&delete a.doc._conflicts,n.push(a.doc),delete k[a.id])})})}k=nn(k);var n=[],b=!0;return Promise.resolve().then(function(){var e=Object.keys(k).filter(function(l){l=k[l].missing;return 1===l.length&&/^1-/.test(l[0])});if(0<e.length)return h(e)}).then(function(){var e=Fia(k);if(e.docs.length)return g.bulkGet(e).then(function(l){if(d.cancelled)throw Error("cancelled");
return Promise.all(l.results.map(function(a){return Promise.all(a.docs.map(function(f){var m=f.ok;f.error&&(b=!1);return m&&m._attachments?Eia(c,g,m).then(function(r){var v=Object.keys(m._attachments);r.forEach(function(x,y){y=m._attachments[v[y]];delete y.stub;delete y.length;y.data=x});return m}):m}))})).then(function(a){n=n.concat(aM(a).filter(Boolean))})})}).then(function(){return{ok:b,docs:n}})}function xT(g,c,k,d,h){return g.get(c).catch(function(n){if(404===n.status)return"http"!==g.adapter&&
"https"!==g.adapter||WS(404,"PouchDB is just checking if a remote checkpoint exists."),{session_id:d,_id:c,history:[],replicator:"pouchdb",version:1};throw n;}).then(function(n){if(!h.cancelled&&n.last_seq!==k)return n.history=(n.history||[]).filter(function(b){return b.session_id!==d}),n.history.unshift({last_seq:k,session_id:d}),n.history=n.history.slice(0,5),n.version=1,n.replicator="pouchdb",n.session_id=d,n.last_seq=k,g.put(n).catch(function(b){if(409===b.status)return xT(g,c,k,d,h);throw b;
})})}function vH(g,c,k,d,h){this.src=g;this.target=c;this.id=k;this.returnValue=d;this.opts=h||{}}function v3(g,c){var k=g[0],d=g.slice(1),h=c[0],n=c.slice(1);return k&&0!==c.length?yT(k.session_id,c)?{last_seq:k.last_seq,history:g}:yT(h.session_id,d)?{last_seq:h.last_seq,history:n}:v3(d,n):{last_seq:0,history:[]}}function yT(g,c){var k=c[0],d=c.slice(1);return g&&0!==c.length?g===k.session_id?!0:yT(g,d):!1}function w3(g){return"number"===typeof g.status&&4===Math.floor(g.status/100)}function Hia(g,
c,k,d){if(!1===g.retry)c.emit("error",k),c.removeAllListeners();else{"function"!==typeof g.back_off_function&&(g.back_off_function=qha);c.emit("requestError",k);if("active"===c.state||"pending"===c.state){c.emit("paused",k);c.state="stopped";var h=function(){g.current_back_off=0};c.once("paused",function(){c.removeListener("active",h)});c.once("active",h)}g.current_back_off=g.current_back_off||0;g.current_back_off=g.back_off_function(g.current_back_off);setTimeout(d,g.current_back_off)}}function Iia(g){return Object.keys(g).sort(Tn).reduce(function(c,
k){c[k]=g[k];return c},{})}function Jia(g,c,k){var d=k.doc_ids?k.doc_ids.sort(Tn):"",h=k.filter?k.filter.toString():"",n="",b="",e="";k.selector&&(e=JSON.stringify(k.selector));k.filter&&k.query_params&&(n=JSON.stringify(Iia(k.query_params)));k.filter&&"_view"===k.filter&&(b=k.view.toString());return Promise.all([g.id(),c.id()]).then(function(l){var a=l[0]+l[1]+h+b+n+d+e;return new Promise(function(f){dT(a,f)})}).then(function(l){l=l.replace(/\//g,".").replace(/\+/g,"_");return"_local/"+l})}function x3(g,
c,k,d,h){function n(){return gb?Promise.resolve():Jia(g,c,k).then(function(pa){ua=pa;gb=new vH(g,c,ua,d,!1===k.checkpoint?{writeSourceCheckpoint:!1,writeTargetCheckpoint:!1}:"source"===k.checkpoint?{writeSourceCheckpoint:!0,writeTargetCheckpoint:!1}:"target"===k.checkpoint?{writeSourceCheckpoint:!1,writeTargetCheckpoint:!0}:{writeSourceCheckpoint:!0,writeTargetCheckpoint:!0})})}function b(){hb=[];if(0!==N.docs.length){var pa=N.docs;return c.bulkDocs({docs:pa,new_edits:!1},{timeout:k.timeout}).then(function(La){if(d.cancelled)throw v(),
Error("cancelled");var Hb=Object.create(null);La.forEach(function(fc){fc.error&&(Hb[fc.id]=fc)});La=Object.keys(Hb).length;h.doc_write_failures+=La;h.docs_written+=pa.length-La;pa.forEach(function(fc){var Ob=Hb[fc._id];if(Ob)if(h.errors.push(Ob),fc=(Ob.name||"").toLowerCase(),"unauthorized"===fc||"forbidden"===fc)d.emit("denied",nn(Ob));else throw Ob;else hb.push(fc)})},function(La){h.doc_write_failures+=pa.length;throw La;})}}function e(){if(N.error)throw Error("There was a problem getting docs.");
h.last_seq=za=N.seq;var pa=nn(h);hb.length&&(pa.docs=hb,"number"===typeof N.pending&&(pa.pending=N.pending,delete N.pending),d.emit("change",pa));W=!0;return gb.writeCheckpoint(N.seq,ta).then(function(){W=!1;if(d.cancelled)throw v(),Error("cancelled");N=void 0;F()}).catch(function(La){J(La);throw La;})}function l(){var pa={};N.changes.forEach(function(La){"_user/"!==La.id&&(pa[La.id]=La.changes.map(function(Hb){return Hb.rev}))});return c.revsDiff(pa).then(function(La){if(d.cancelled)throw v(),Error("cancelled");
N.diffs=La})}function a(){return Gia(g,c,N.diffs,d).then(function(pa){N.error=!pa.ok;pa.docs.forEach(function(La){delete N.diffs[La._id];h.docs_read++;N.docs.push(La)})})}function f(){d.cancelled||N||(0===P.length?m(!0):(N=P.shift(),l().then(a).then(b).then(e).then(f).catch(function(pa){r("batch processing terminated with error",pa)})))}function m(pa){if(0===Y.changes.length){if(0===P.length&&!N){if(L&&na.live||da)d.state="pending",d.emit("paused");da&&v()}}else if(pa||da||Y.changes.length>=Z){P.push(Y);
Y={seq:0,changes:[],docs:[]};if("pending"===d.state||"stopped"===d.state)d.state="active",d.emit("active");f()}}function r(pa,La){va||(La.message||(La.message=pa),h.ok=!1,h.status="aborting",P=[],Y={seq:0,changes:[],docs:[]},v(La))}function v(pa){if(!va){if(d.cancelled&&(h.status="cancelled",W))return;h.status=h.status||"complete";h.end_time=(new Date).toISOString();h.last_seq=za;va=!0;if(pa){pa=Wi(pa);pa.result=h;var La=(pa.name||"").toLowerCase();"unauthorized"===La||"forbidden"===La?(d.emit("error",
pa),d.removeAllListeners()):Hia(k,d,pa,function(){x3(g,c,k,d)})}else d.emit("complete",h),d.removeAllListeners()}}function x(pa,La,Hb){if(d.cancelled)return v();"number"===typeof La&&(Y.pending=La);XS(k)(pa)&&(Y.seq=pa.seq||Hb,Y.changes.push(pa),fw(function(){m(0===P.length&&na.live)}))}function y(pa){X=!1;if(d.cancelled)return v();if(0<pa.results.length)na.since=pa.results[pa.results.length-1].seq,F(),m(!0);else{var La=function(){L?(na.live=!0,F()):da=!0;m(!0)};N||0!==pa.results.length?La():(W=!0,
gb.writeCheckpoint(pa.last_seq,ta).then(function(){W=!1;h.last_seq=za=pa.last_seq;La()}).catch(J))}}function E(pa){X=!1;if(d.cancelled)return v();r("changes rejected",pa)}function F(){function pa(){Hb.cancel()}function La(){d.removeListener("cancel",pa)}if(!X&&!da&&P.length<R){X=!0;d._changes&&(d.removeListener("cancel",d._abortChanges),d._changes.cancel());d.once("cancel",pa);var Hb=g.changes(na).on("change",x);Hb.then(La,La);Hb.then(y).catch(E);k.retry&&(d._changes=Hb,d._abortChanges=pa)}}function I(){n().then(function(){if(d.cancelled)v();
else return gb.getCheckpoint().then(function(pa){za=pa;na={since:za,limit:Z,batch_size:Z,style:"all_docs",doc_ids:ja,selector:fa,return_docs:!0};k.filter&&("string"!==typeof k.filter?na.include_docs=!0:na.filter=k.filter);"heartbeat"in k&&(na.heartbeat=k.heartbeat);"timeout"in k&&(na.timeout=k.timeout);k.query_params&&(na.query_params=k.query_params);k.view&&(na.view=k.view);F()})}).catch(function(pa){r("getCheckpoint rejected with ",pa)})}function J(pa){W=!1;r("writeCheckpoint completed with error",
pa)}var P=[],N,Y={seq:0,changes:[],docs:[]},W=!1,da=!1,va=!1,za=0,L=k.continuous||k.live||!1,Z=k.batch_size||100,R=k.batches_limit||10,X=!1,ja=k.doc_ids,fa=k.selector,ua,gb,hb=[],ta=dM();h=h||{ok:!0,start_time:(new Date).toISOString(),docs_read:0,docs_written:0,doc_write_failures:0,errors:[]};var na={};d.ready(g,c);d.cancelled?v():(d._addedListeners||(d.once("cancel",v),"function"===typeof k.complete&&(d.once("error",k.complete),d.once("complete",function(pa){k.complete(null,pa)})),d._addedListeners=
!0),"undefined"===typeof k.since?I():n().then(function(){W=!0;return gb.writeCheckpoint(k.since,ta)}).then(function(){W=!1;d.cancelled?v():(za=k.since,I())}).catch(J))}function kM(){Fq.EventEmitter.call(this);this.cancelled=!1;this.state="pending";var g=this,c=new Promise(function(k,d){g.once("complete",k);g.once("error",d)});g.then=function(k,d){return c.then(k,d)};g.catch=function(k){return c.catch(k)};g.catch(function(){})}function lM(g,c){var k=c.PouchConstructor;return"string"===typeof g?new k(g,
c):g}function zT(g,c,k,d){"function"===typeof k&&(d=k,k={});"undefined"===typeof k&&(k={});if(k.doc_ids&&!Array.isArray(k.doc_ids))throw Wi($L,"`doc_ids` filter parameter is not a list.");k.complete=d;k=nn(k);k.continuous=k.continuous||k.live;k.retry="retry"in k?k.retry:!1;k.PouchConstructor=k.PouchConstructor||this;d=new kM(k);g=lM(g,k);c=lM(c,k);x3(g,c,k,d);return d}function Kia(g,c,k,d){"function"===typeof k&&(d=k,k={});"undefined"===typeof k&&(k={});k=nn(k);k.PouchConstructor=k.PouchConstructor||
this;g=lM(g,k);c=lM(c,k);return new AT(g,c,k,d)}function AT(g,c,k,d){function h(J){x.emit("change",{direction:"pull",change:J})}function n(J){x.emit("change",{direction:"push",change:J})}function b(J){x.emit("denied",{direction:"push",doc:J})}function e(J){x.emit("denied",{direction:"pull",doc:J})}function l(){x.pushPaused=!0;x.pullPaused&&x.emit("paused")}function a(){x.pullPaused=!0;x.pushPaused&&x.emit("paused")}function f(){x.pushPaused=!1;x.pullPaused&&x.emit("active",{direction:"push"})}function m(){x.pullPaused=
!1;x.pushPaused&&x.emit("active",{direction:"pull"})}function r(J){return function(P,N){var Y="denied"===P&&(N===e||N===b),W="paused"===P&&(N===a||N===l),da="active"===P&&(N===m||N===f);if("change"===P&&(N===h||N===n)||Y||W||da)P in F||(F[P]={}),F[P][J]=!0,2===Object.keys(F[P]).length&&x.removeAllListeners(P)}}function v(J,P,N){if(-1==J.listeners(P).indexOf(N))J.on(P,N)}var x=this;this.canceled=!1;var y=k.push?CE({},k,k.push):k,E=k.pull?CE({},k,k.pull):k;this.push=zT(g,c,y);this.pull=zT(c,g,E);this.pullPaused=
this.pushPaused=!0;var F={};k.live&&(this.push.on("complete",x.pull.cancel.bind(x.pull)),this.pull.on("complete",x.push.cancel.bind(x.push)));this.on("newListener",function(J){"change"===J?(v(x.pull,"change",h),v(x.push,"change",n)):"denied"===J?(v(x.pull,"denied",e),v(x.push,"denied",b)):"active"===J?(v(x.pull,"active",m),v(x.push,"active",f)):"paused"===J&&(v(x.pull,"paused",a),v(x.push,"paused",l))});this.on("removeListener",function(J){"change"===J?(x.pull.removeListener("change",h),x.push.removeListener("change",
n)):"denied"===J?(x.pull.removeListener("denied",e),x.push.removeListener("denied",b)):"active"===J?(x.pull.removeListener("active",m),x.push.removeListener("active",f)):"paused"===J&&(x.pull.removeListener("paused",a),x.push.removeListener("paused",l))});this.pull.on("removeListener",r("pull"));this.push.on("removeListener",r("push"));var I=Promise.all([this.push,this.pull]).then(function(J){J={push:J[0],pull:J[1]};x.emit("complete",J);d&&d(null,J);x.removeAllListeners();return J},function(J){x.cancel();
d?d(J):x.emit("error",J);x.removeAllListeners();if(d)throw J;});this.then=function(J,P){return I.then(J,P)};this.catch=function(J){return I.catch(J)}}function Oz(){this._store={}}function wH(g){this._store=new Oz;if(g&&Array.isArray(g))for(var c=0,k=g.length;c<k;c++)this.add(g[c])}function Lia(){FE&&XB&&(FE=!1,XB.length?Pz=XB.concat(Pz):xH=-1,Pz.length&&y3())}function y3(){if(!FE){BT=!1;FE=!0;for(var g=Pz.length,c=setTimeout(Lia);g;){XB=Pz;for(Pz=[];XB&&++xH<g;)XB[xH].run();xH=-1;g=Pz.length}XB=null;
xH=-1;FE=!1;clearTimeout(c)}}function z3(g,c){this.fun=g;this.array=c}function gl(g,c,k){Error.call(this,k);this.status=g;this.name=c;this.message=k;this.error=!0}function YB(g){return g.call.bind(g)}function yH(g,c){if("object"!=typeof g)return!1;try{return c(g),!0}catch(k){return!1}}function A3(g){return Gq&&zr?void 0!==Is(g):B3(g)||C3(g)||D3(g)||E3(g)||F3(g)||G3(g)||H3(g)||I3(g)||J3(g)||K3(g)||L3(g)}function B3(g){return Gq&&zr?"Uint8Array"===Is(g):"[object Uint8Array]"===Kl(g)||Mia(g)&&void 0!==
g.buffer}function C3(g){return Gq&&zr?"Uint8ClampedArray"===Is(g):"[object Uint8ClampedArray]"===Kl(g)}function D3(g){return Gq&&zr?"Uint16Array"===Is(g):"[object Uint16Array]"===Kl(g)}function E3(g){return Gq&&zr?"Uint32Array"===Is(g):"[object Uint32Array]"===Kl(g)}function F3(g){return Gq&&zr?"Int8Array"===Is(g):"[object Int8Array]"===Kl(g)}function G3(g){return Gq&&zr?"Int16Array"===Is(g):"[object Int16Array]"===Kl(g)}function H3(g){return Gq&&zr?"Int32Array"===Is(g):"[object Int32Array]"===Kl(g)}
function I3(g){return Gq&&zr?"Float32Array"===Is(g):"[object Float32Array]"===Kl(g)}function J3(g){return Gq&&zr?"Float64Array"===Is(g):"[object Float64Array]"===Kl(g)}function K3(g){return Gq&&zr?"BigInt64Array"===Is(g):"[object BigInt64Array]"===Kl(g)}function L3(g){return Gq&&zr?"BigUint64Array"===Is(g):"[object BigUint64Array]"===Kl(g)}function mM(g){return"[object Map]"===Kl(g)}function nM(g){return"[object Set]"===Kl(g)}function oM(g){return"[object WeakMap]"===Kl(g)}function CT(g){return"[object WeakSet]"===
Kl(g)}function pM(g){return"[object ArrayBuffer]"===Kl(g)}function M3(g){return"undefined"!=typeof ArrayBuffer&&(pM.working?pM(g):g instanceof ArrayBuffer)}function qM(g){return"[object DataView]"===Kl(g)}function N3(g){return"undefined"!=typeof DataView&&(qM.working?qM(g):g instanceof DataView)}function rM(g){return"[object SharedArrayBuffer]"===Kl(g)}function O3(g){return"undefined"!=typeof SharedArrayBuffer&&(rM.working?rM(g):g instanceof SharedArrayBuffer)}function P3(g){return yH(g,Nia)}function Q3(g){return yH(g,
Oia)}function R3(g){return yH(g,Pia)}function S3(g){return T3&&yH(g,Qia)}function U3(g){return DT&&yH(g,Ria)}function Qz(g,c){var k={seen:[],stylize:Sia};return 3<=arguments.length&&(k.depth=arguments[2]),4<=arguments.length&&(k.colors=arguments[3]),ET(c)?k.showHidden=c:c&&$h._extend(k,c),ZB(k.showHidden)&&(k.showHidden=!1),ZB(k.depth)&&(k.depth=2),ZB(k.colors)&&(k.colors=!1),ZB(k.customInspect)&&(k.customInspect=!0),k.colors&&(k.stylize=Tia),sM(k,g,k.depth)}function Tia(g,c){return(c=Qz.styles[c])?
"\u001b["+Qz.colors[c][0]+"m"+g+"\u001b["+Qz.colors[c][1]+"m":g}function Sia(g,c){return g}function sM(g,c,k){if(g.customInspect&&c&&tM(c.inspect)&&c.inspect!==$h.inspect&&(!c.constructor||c.constructor.prototype!==c)){var d=c.inspect(k,g);return uM(d)||(d=sM(g,d,k)),d}var h=function(a,f){if(ZB(f))return a.stylize("undefined","undefined");if(uM(f))return f="'"+JSON.stringify(f).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'",a.stylize(f,"string");if(V3(f))return a.stylize(""+f,"number");
if(ET(f))return a.stylize(""+f,"boolean");if(null===f)return a.stylize("null","null")}(g,c);if(h)return h;h=Object.keys(c);var n=function(a){var f={};return a.forEach(function(m,r){f[m]=!0}),f}(h);if(g.showHidden&&(h=Object.getOwnPropertyNames(c)),zH(c)&&(0<=h.indexOf("message")||0<=h.indexOf("description")))return FT(c);if(0===h.length){if(tM(c))return g.stylize("[Function"+(c.name?": "+c.name:"")+"]","special");if(AH(c))return g.stylize(RegExp.prototype.toString.call(c),"regexp");if(vM(c))return g.stylize(Date.prototype.toString.call(c),
"date");if(zH(c))return FT(c)}var b="",e=!1,l=["{","}"];(W3(c)&&(e=!0,l=["[","]"]),tM(c))&&(b=" [Function"+(c.name?": "+c.name:"")+"]");return AH(c)&&(b=" "+RegExp.prototype.toString.call(c)),vM(c)&&(b=" "+Date.prototype.toUTCString.call(c)),zH(c)&&(b=" "+FT(c)),0!==h.length||e&&0!=c.length?0>k?AH(c)?g.stylize(RegExp.prototype.toString.call(c),"regexp"):g.stylize("[Object]","special"):(g.seen.push(c),d=e?function(a,f,m,r,v){for(var x=[],y=0,E=f.length;y<E;++y)Object.prototype.hasOwnProperty.call(f,
String(y))?x.push(GT(a,f,m,r,String(y),!0)):x.push("");return v.forEach(function(F){F.match(/^\d+$/)||x.push(GT(a,f,m,r,F,!0))}),x}(g,c,k,n,h):h.map(function(a){return GT(g,c,k,n,a,e)}),g.seen.pop(),function(a,f,m){var r=0;return 60<a.reduce(function(v,x){return r++,0<=x.indexOf("\n")&&r++,v+x.replace(/\u001b\[\d\d?m/g,"").length+1},0)?m[0]+(""===f?"":f+"\n ")+" "+a.join(",\n  ")+" "+m[1]:m[0]+f+" "+a.join(", ")+" "+m[1]}(d,b,l)):l[0]+b+l[1]}function FT(g){return"["+Error.prototype.toString.call(g)+
"]"}function GT(g,c,k,d,h,n){var b,e,l;if((l=Object.getOwnPropertyDescriptor(c,h)||{value:c[h]}).get?e=l.set?g.stylize("[Getter/Setter]","special"):g.stylize("[Getter]","special"):l.set&&(e=g.stylize("[Setter]","special")),Object.prototype.hasOwnProperty.call(d,h)||(b="["+h+"]"),e||(0>g.seen.indexOf(l.value)?-1<(e=null===k?sM(g,l.value,null):sM(g,l.value,k-1)).indexOf("\n")&&(e=n?e.split("\n").map(function(a){return"  "+a}).join("\n").substr(2):"\n"+e.split("\n").map(function(a){return"   "+a}).join("\n")):
e=g.stylize("[Circular]","special")),ZB(b)){if(n&&h.match(/^\d+$/))return e;(b=JSON.stringify(""+h)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(b=b.substr(1,b.length-2),b=g.stylize(b,"name")):(b=b.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),b=g.stylize(b,"string"))}return b+": "+e}function W3(g){return Array.isArray(g)}function ET(g){return"boolean"==typeof g}function V3(g){return"number"==typeof g}function uM(g){return"string"==typeof g}function ZB(g){return void 0===g}function AH(g){return GE(g)&&
"[object RegExp]"===Object.prototype.toString.call(g)}function GE(g){return"object"==typeof g&&null!==g}function vM(g){return GE(g)&&"[object Date]"===Object.prototype.toString.call(g)}function zH(g){return GE(g)&&("[object Error]"===Object.prototype.toString.call(g)||g instanceof Error)}function tM(g){return"function"==typeof g}function HT(g){return 10>g?"0"+g.toString(10):g.toString(10)}function Uia(){var g=new Date,c=[HT(g.getHours()),HT(g.getMinutes()),HT(g.getSeconds())].join(":");return[g.getDate(),
Via[g.getMonth()],c].join(" ")}function Wia(g,c){if(!g){var k=Error("Promise was rejected with a falsy value");k.reason=g;g=k}return c(g)}function X3(g){var c=g.length;if(0<c%4)throw Error("Invalid string. Length must be a multiple of 4");g=g.indexOf("=");return-1===g&&(g=c),[g,g===c?0:4-g%4]}function Xia(g,c,k){for(var d,h=[],n=c;n<k;n+=3)c=(g[n]<<16&16711680)+(g[n+1]<<8&65280)+(255&g[n+2]),h.push(hw[(d=c)>>18&63]+hw[d>>12&63]+hw[d>>6&63]+hw[63&d]);return h.join("")}function ay(g){if(2147483647<
g)throw new RangeError('The value "'+g+'" is invalid for option "size"');g=new Uint8Array(g);return Object.setPrototypeOf(g,Te.prototype),g}function Te(g,c,k){if("number"==typeof g){if("string"==typeof c)throw new TypeError('The "string" argument must be of type string. Received type number');return IT(g)}return Y3(g,c,k)}function Y3(g,c,k){if("string"==typeof g)return function(h,n){"string"==typeof n&&""!==n||(n="utf8");if(!Te.isEncoding(n))throw new TypeError("Unknown encoding: "+n);var b=0|Z3(h,
n),e=ay(b);h=e.write(h,n);h!==b&&(e=e.slice(0,h));return e}(g,c);if(ArrayBuffer.isView(g))return JT(g);if(null==g)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof g);if(by(g,ArrayBuffer)||g&&by(g.buffer,ArrayBuffer)||"undefined"!=typeof SharedArrayBuffer&&(by(g,SharedArrayBuffer)||g&&by(g.buffer,SharedArrayBuffer)))return Yia(g,c,k);if("number"==typeof g)throw new TypeError('The "value" argument must not be of type number. Received type number');
var d=g.valueOf&&g.valueOf();if(null!=d&&d!==g)return Te.from(d,c,k);if(d=function(h){if(Te.isBuffer(h)){var n=0|KT(h.length),b=ay(n);return 0===b.length||h.copy(b,0,0,n),b}if(void 0!==h.length)return(n="number"!=typeof h.length)||(n=h.length,n=n!=n),n?ay(0):JT(h);if("Buffer"===h.type&&Array.isArray(h.data))return JT(h.data)}(g))return d;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof g[Symbol.toPrimitive])return Te.from(g[Symbol.toPrimitive]("string"),c,k);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+
typeof g);}function $3(g){if("number"!=typeof g)throw new TypeError('"size" argument must be of type number');if(0>g)throw new RangeError('The value "'+g+'" is invalid for option "size"');}function IT(g){return $3(g),ay(0>g?0:0|KT(g))}function JT(g){for(var c=0>g.length?0:0|KT(g.length),k=ay(c),d=0;d<c;d+=1)k[d]=255&g[d];return k}function Yia(g,c,k){if(0>c||g.byteLength<c)throw new RangeError('"offset" is outside of buffer bounds');if(g.byteLength<c+(k||0))throw new RangeError('"length" is outside of buffer bounds');
var d;return d=void 0===c&&void 0===k?new Uint8Array(g):void 0===k?new Uint8Array(g,c):new Uint8Array(g,c,k),Object.setPrototypeOf(d,Te.prototype),d}function KT(g){if(2147483647<=g)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+(2147483647).toString(16)+" bytes");return 0|g}function Z3(g,c){if(Te.isBuffer(g))return g.length;if(ArrayBuffer.isView(g)||by(g,ArrayBuffer))return g.byteLength;if("string"!=typeof g)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+
typeof g);var k=g.length,d=2<arguments.length&&!0===arguments[2];if(!d&&0===k)return 0;for(var h=!1;;)switch(c){case "ascii":case "latin1":case "binary":return k;case "utf8":case "utf-8":return LT(g).length;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return 2*k;case "hex":return k>>>1;case "base64":return a4(g).length;default:if(h)return d?-1:LT(g).length;c=(""+c).toLowerCase();h=!0}}function Zia(g,c,k){var d=!1;if(((void 0===c||0>c)&&(c=0),c>this.length)||((void 0===k||k>this.length)&&
(k=this.length),0>=k)||(k>>>=0)<=(c>>>=0))return"";for(g||(g="utf8");;)switch(g){case "hex":g=this.length;(!c||0>c)&&(c=0);(!k||0>k||k>g)&&(k=g);for(g="";c<k;++c)g+=$ia[this[c]];return g;case "utf8":case "utf-8":return b4(this,c,k);case "ascii":g="";for(k=Math.min(this.length,k);c<k;++c)g+=String.fromCharCode(127&this[c]);return g;case "latin1":case "binary":g="";for(k=Math.min(this.length,k);c<k;++c)g+=String.fromCharCode(this[c]);return g;case "base64":return 0===c&&k===this.length?MT.fromByteArray(this):
MT.fromByteArray(this.slice(c,k));case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":c=this.slice(c,k);k="";for(g=0;g<c.length;g+=2)k+=String.fromCharCode(c[g]+256*c[g+1]);return k;default:if(d)throw new TypeError("Unknown encoding: "+g);g=(g+"").toLowerCase();d=!0}}function $B(g,c,k){var d=g[c];g[c]=g[k];g[k]=d}function c4(g,c,k,d,h){if(0===g.length)return-1;"string"==typeof k?(d=k,k=0):2147483647<k?k=2147483647:-2147483648>k&&(k=-2147483648);var n=k=+k;if(n!=n&&(k=h?0:g.length-1),0>k&&(k=g.length+
k),k>=g.length){if(h)return-1;k=g.length-1}else if(0>k){if(!h)return-1;k=0}if("string"==typeof c&&(c=Te.from(c,d)),Te.isBuffer(c))return 0===c.length?-1:d4(g,c,k,d,h);if("number"==typeof c)return c&=255,"function"==typeof Uint8Array.prototype.indexOf?h?Uint8Array.prototype.indexOf.call(g,c,k):Uint8Array.prototype.lastIndexOf.call(g,c,k):d4(g,[c],k,d,h);throw new TypeError("val must be string, number or Buffer");}function d4(g,c,k,d,h){function n(a,f){return 1===b?a[f]:a.readUInt16BE(f*b)}var b=1,
e=g.length,l=c.length;if(void 0!==d&&("ucs2"===(d=String(d).toLowerCase())||"ucs-2"===d||"utf16le"===d||"utf-16le"===d)){if(2>g.length||2>c.length)return-1;b=2;e/=2;l/=2;k/=2}if(h)for(d=-1;k<e;k++)if(n(g,k)===n(c,-1===d?0:k-d)){if(-1===d&&(d=k),k-d+1===l)return d*b}else-1!==d&&(k-=k-d),d=-1;else for(k+l>e&&(k=e-l);0<=k;k--){e=!0;for(d=0;d<l;d++)if(n(g,k+d)!==n(c,d)){e=!1;break}if(e)return k}return-1}function e4(g,c,k,d){for(var h=[],n=0;n<c.length;++n)h.push(255&c.charCodeAt(n));return wM(h,g,k,d)}
function b4(g,c,k){k=Math.min(g.length,k);for(var d=[];c<k;){var h,n,b=g[c],e=null,l=239<b?4:223<b?3:191<b?2:1;if(c+l<=k)switch(l){case 1:128>b&&(e=b);break;case 2:128==(192&(h=g[c+1]))&&127<(n=(31&b)<<6|63&h)&&(e=n);break;case 3:h=g[c+1];var a=g[c+2];128==(192&h)&&128==(192&a)&&2047<(n=(15&b)<<12|(63&h)<<6|63&a)&&(55296>n||57343<n)&&(e=n);break;case 4:h=g[c+1];a=g[c+2];var f=g[c+3];128==(192&h)&&128==(192&a)&&128==(192&f)&&65535<(n=(15&b)<<18|(63&h)<<12|(63&a)<<6|63&f)&&1114112>n&&(e=n)}null===e?
(e=65533,l=1):65535<e&&(e-=65536,d.push(e>>>10&1023|55296),e=56320|1023&e);d.push(e);c+=l}g=d.length;if(4096>=g)d=String.fromCharCode.apply(String,d);else{k="";for(h=0;h<g;)k+=String.fromCharCode.apply(String,d.slice(h,h+=4096));d=k}return d}function Un(g,c,k){if(0!=g%1||0>g)throw new RangeError("offset is not uint");if(g+c>k)throw new RangeError("Trying to access beyond buffer length");}function Hq(g,c,k,d,h,n){if(!Te.isBuffer(g))throw new TypeError('"buffer" argument must be a Buffer instance');
if(c>h||c<n)throw new RangeError('"value" argument is out of bounds');if(k+d>g.length)throw new RangeError("Index out of range");}function f4(g,c,k,d,h,n){if(k+d>g.length)throw new RangeError("Index out of range");if(0>k)throw new RangeError("Index out of range");}function g4(g,c,k,d,h){return c=+c,k>>>=0,h||f4(g,0,k,4),HE.write(g,c,k,d,23,4),k+4}function h4(g,c,k,d,h){return c=+c,k>>>=0,h||f4(g,0,k,8),HE.write(g,c,k,d,52,8),k+8}function LT(g,c){var k;c=c||1/0;for(var d=g.length,h=null,n=[],b=0;b<
d;++b){if(55295<(k=g.charCodeAt(b))&&57344>k){if(!h){if(56319<k){-1<(c-=3)&&n.push(239,191,189);continue}if(b+1===d){-1<(c-=3)&&n.push(239,191,189);continue}h=k;continue}if(56320>k){-1<(c-=3)&&n.push(239,191,189);h=k;continue}k=65536+(h-55296<<10|k-56320)}else h&&-1<(c-=3)&&n.push(239,191,189);if(h=null,128>k){if(0>--c)break;n.push(k)}else if(2048>k){if(0>(c-=2))break;n.push(k>>6|192,63&k|128)}else if(65536>k){if(0>(c-=3))break;n.push(k>>12|224,k>>6&63|128,63&k|128)}else{if(!(1114112>k))throw Error("Invalid code point");
if(0>(c-=4))break;n.push(k>>18|240,k>>12&63|128,k>>6&63|128,63&k|128)}}return n}function a4(g){return MT.toByteArray(function(c){if(2>(c=(c=c.split("=")[0]).trim().replace(aja,"")).length)return"";for(;0!=c.length%4;)c+="=";return c}(g))}function wM(g,c,k,d){for(var h=0;h<d&&!(h+k>=c.length||h>=g.length);++h)c[h+k]=g[h];return h}function by(g,c){return g instanceof c||null!=g&&null!=g.constructor&&null!=g.constructor.name&&g.constructor.name===c.name}function i4(g,c){for(var k in g)c[k]=g[k]}function aC(g,
c,k){return iw(g,c,k)}function BH(g){switch(this.encoding=function(c){var k=function(d){if(!d)return"utf8";for(var h;;)switch(d){case "utf8":case "utf-8":return"utf8";case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return"utf16le";case "latin1":case "binary":return"latin1";case "base64":case "ascii":case "hex":return d;default:if(h)return;d=(""+d).toLowerCase();h=!0}}(c);if("string"!=typeof k&&(NT.isEncoding===j4||!j4(c)))throw Error("Unknown encoding: "+c);return k||c}(g),this.encoding){case "utf16le":this.text=
bja;this.end=cja;g=4;break;case "utf8":this.fillLast=dja;g=4;break;case "base64":this.text=eja;this.end=fja;g=3;break;default:return this.write=gja,this.end=hja,void 0}this.lastTotal=this.lastNeed=0;this.lastChar=NT.allocUnsafe(g)}function OT(g){return 127>=g?0:6==g>>5?2:14==g>>4?3:30==g>>3?4:2==g>>6?-1:-2}function dja(g){var c=this.lastTotal-this.lastNeed;a:if(128!=(192&g[0]))var k=(this.lastNeed=0,"\ufffd");else{if(1<this.lastNeed&&1<g.length){if(128!=(192&g[1])){k=(this.lastNeed=1,"\ufffd");break a}if(2<
this.lastNeed&&2<g.length&&128!=(192&g[2])){k=(this.lastNeed=2,"\ufffd");break a}}k=void 0}return void 0!==k?k:this.lastNeed<=g.length?(g.copy(this.lastChar,c,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(g.copy(this.lastChar,c,0,g.length),this.lastNeed-=g.length,void 0)}function bja(g,c){if(0==(g.length-c)%2){if(c=g.toString("utf16le",c)){var k=c.charCodeAt(c.length-1);if(55296<=k&&56319>=k)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=g[g.length-2],this.lastChar[1]=
g[g.length-1],c.slice(0,-1)}return c}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=g[g.length-1],g.toString("utf16le",c,g.length-1)}function cja(g){g=g&&g.length?this.write(g):"";return this.lastNeed?g+this.lastChar.toString("utf16le",0,this.lastTotal-this.lastNeed):g}function eja(g,c){var k=(g.length-c)%3;return 0===k?g.toString("base64",c):(this.lastNeed=3-k,this.lastTotal=3,1===k?this.lastChar[0]=g[g.length-1]:(this.lastChar[0]=g[g.length-2],this.lastChar[1]=g[g.length-1]),g.toString("base64",
c,g.length-k))}function fja(g){g=g&&g.length?this.write(g):"";return this.lastNeed?g+this.lastChar.toString("base64",0,3-this.lastNeed):g}function gja(g){return g.toString(this.encoding)}function hja(g){return g&&g.length?this.write(g):""}function Js(g,c,k){k||(k=Error);var d=function(h,n,b){return b.call(this,"string"==typeof c?c:c(h,n,b))||this};$jscomp.inherits(d,k);d.prototype.name=k.name;d.prototype.code=g;k4[g]=d}function l4(g,c){if(Array.isArray(g)){var k=g.length;return g=g.map(function(d){return String(d)}),
2<k?"one of "+c+" "+g.slice(0,k-1).join(", ")+", or "+g[k-1]:2===k?"one of "+c+" "+g[0]+" or "+g[1]:"of "+c+" "+g[0]}return"of "+c+" "+String(g)}function PT(g){try{if(!QT.localStorage)return!1}catch(c){return!1}g=QT.localStorage[g];return null!=g&&"true"===String(g).toLowerCase()}function m4(g,c){var k=Object.keys(g);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(g);c&&(d=d.filter(function(h){return Object.getOwnPropertyDescriptor(g,h).enumerable}));k.push.apply(k,d)}return k}
function ija(g,c){for(var k=0;k<c.length;k++){var d=c[k];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(g,d.key,d)}}function n4(g,c){RT(g,c);xM(g)}function xM(g){g._writableState&&!g._writableState.emitClose||g._readableState&&!g._readableState.emitClose||g.emit("close")}function RT(g,c){g.emit("error",c)}function jja(){}function Rz(g,c,k){return c in g?Object.defineProperty(g,c,{value:k,enumerable:!0,configurable:!0,writable:!0}):g[c]=k,g}function Sz(g,
c){return{value:g,done:c}}function kja(g){var c=g[Tz];if(null!==c){var k=g[bC].read();null!==k&&(g[cC]=null,g[Tz]=null,g[dC]=null,c(Sz(k,!1)))}}function lja(g){o4.nextTick(kja,g)}function p4(){function g(ta,na,pa){F=F||CH();ta=ta||{};"boolean"!=typeof pa&&(pa=na instanceof F);this.objectMode=!!ta.objectMode;pa&&(this.objectMode=this.objectMode||!!ta.readableObjectMode);this.highWaterMark=Z(this,ta,"readableHighWaterMark",pa);this.buffer=new L;this.length=0;this.pipes=null;this.pipesCount=0;this.flowing=
null;this.reading=this.endEmitted=this.ended=!1;this.sync=!0;this.resumeScheduled=this.readableListening=this.emittedReadable=this.needReadable=!1;this.paused=!0;this.emitClose=!1!==ta.emitClose;this.autoDestroy=!!ta.autoDestroy;this.destroyed=!1;this.defaultEncoding=ta.defaultEncoding||"utf8";this.awaitDrain=0;this.readingMore=!1;this.encoding=this.decoder=null;ta.encoding&&(da||(da=IE.StringDecoder),this.decoder=new da(ta.encoding),this.encoding=ta.encoding)}function c(ta){if(F=F||CH(),!(this instanceof
c))return new c(ta);this._readableState=new g(ta,this,this instanceof F);this.readable=!0;ta&&("function"==typeof ta.read&&(this._read=ta.read),"function"==typeof ta.destroy&&(this._destroy=ta.destroy));J.call(this)}function k(ta,na,pa,La,Hb){W("readableAddChunk",na);var fc,Ob=ta._readableState;if(null===na)Ob.reading=!1,function(Zb,Hc){if(W("onEofChunk"),!Hc.ended){if(Hc.decoder){var Gb=Hc.decoder.end();Gb&&Gb.length&&(Hc.buffer.push(Gb),Hc.length+=Hc.objectMode?1:Gb.length)}Hc.ended=!0;Hc.sync?
n(Zb):(Hc.needReadable=!1,Hc.emittedReadable||(Hc.emittedReadable=!0,b(Zb)))}}(ta,Ob);else if(Hb||(fc=function(Zb,Hc){var Gb;var dd=Hc;P.isBuffer(dd)||dd instanceof N||"string"==typeof Hc||void 0===Hc||Zb.objectMode||(Gb=new X("chunk",["string","Buffer","Uint8Array"],Hc));return Gb}(Ob,na)),fc)gb(ta,fc);else if(Ob.objectMode||na&&0<na.length)if("string"==typeof na||Ob.objectMode||Object.getPrototypeOf(na)===P.prototype||(na=P.from(na)),La)Ob.endEmitted?gb(ta,new ua):d(ta,Ob,na,!0);else if(Ob.ended)gb(ta,
new ja);else{if(Ob.destroyed)return!1;Ob.reading=!1;Ob.decoder&&!pa?(na=Ob.decoder.write(na),Ob.objectMode||0!==na.length?d(ta,Ob,na,!1):e(ta,Ob)):d(ta,Ob,na,!1)}else La||(Ob.reading=!1,e(ta,Ob));return!Ob.ended&&(Ob.length<Ob.highWaterMark||0===Ob.length)}function d(ta,na,pa,La){na.flowing&&0===na.length&&!na.sync?(na.awaitDrain=0,ta.emit("data",pa)):(na.length+=na.objectMode?1:pa.length,La?na.buffer.unshift(pa):na.buffer.push(pa),na.needReadable&&n(ta));e(ta,na)}function h(ta,na){if(0>=ta||0===
na.length&&na.ended)ta=0;else if(na.objectMode)ta=1;else if(ta!=ta)ta=na.flowing&&na.length?na.buffer.head.data.length:na.length;else{if(ta>na.highWaterMark){var pa=ta;var La=(1073741824<=pa?pa=1073741824:(pa--,pa|=pa>>>1,pa|=pa>>>2,pa|=pa>>>4,pa|=pa>>>8,pa|=pa>>>16,pa++),pa);na.highWaterMark=La}ta=ta<=na.length?ta:na.ended?na.length:(na.needReadable=!0,0)}return ta}function n(ta){var na=ta._readableState;W("emitReadable",na.needReadable,na.emittedReadable);na.needReadable=!1;na.emittedReadable||
(W("emitReadable",na.flowing),na.emittedReadable=!0,I.nextTick(b,ta))}function b(ta){var na=ta._readableState;W("emitReadable_",na.destroyed,na.length,na.ended);na.destroyed||!na.length&&!na.ended||(ta.emit("readable"),na.emittedReadable=!1);na.needReadable=!na.flowing&&!na.ended&&na.length<=na.highWaterMark;r(ta)}function e(ta,na){na.readingMore||(na.readingMore=!0,I.nextTick(l,ta,na))}function l(ta,na){for(;!na.reading&&!na.ended&&(na.length<na.highWaterMark||na.flowing&&0===na.length);){var pa=
na.length;if(W("maybeReadMore read 0"),ta.read(0),pa===na.length)break}na.readingMore=!1}function a(ta){var na=ta._readableState;na.readableListening=0<ta.listenerCount("readable");na.resumeScheduled&&!na.paused?na.flowing=!0:0<ta.listenerCount("data")&&ta.resume()}function f(ta){W("readable nexttick read 0");ta.read(0)}function m(ta,na){W("resume",na.reading);na.reading||ta.read(0);na.resumeScheduled=!1;ta.emit("resume");r(ta);na.flowing&&!na.reading&&ta.read(0)}function r(ta){var na=ta._readableState;
for(W("flow",na.flowing);na.flowing&&null!==ta.read(););}function v(ta,na){return 0===na.length?null:(na.objectMode?pa=na.buffer.shift():!ta||ta>=na.length?(pa=na.decoder?na.buffer.join(""):1===na.buffer.length?na.buffer.first():na.buffer.concat(na.length),na.buffer.clear()):pa=na.buffer.consume(ta,na.decoder),pa);var pa}function x(ta){var na=ta._readableState;W("endReadable",na.endEmitted);na.endEmitted||(na.ended=!0,I.nextTick(y,na,ta))}function y(ta,na){if(W("endReadableNT",ta.endEmitted,ta.length),
!ta.endEmitted&&0===ta.length&&(ta.endEmitted=!0,na.readable=!1,na.emit("end"),ta.autoDestroy))ta=na._writableState,(!ta||ta.autoDestroy&&ta.finished)&&na.destroy()}function E(ta,na){for(var pa=0,La=ta.length;pa<La;pa++)if(ta[pa]===na)return pa;return-1}if(q4)return ST;q4=!0;var F,I=mj;ST=c;c.ReadableState=g;jw.EventEmitter;var J=yM,P=oi.Buffer,N=mja.Uint8Array||function(){},Y=$h;var W=Y&&Y.debuglog?Y.debuglog("stream"):function(){};var da,va,za,L=nja;Y=r4;var Z=s4.getHighWaterMark,R=uu.codes,X=R.ERR_INVALID_ARG_TYPE,
ja=R.ERR_STREAM_PUSH_AFTER_EOF,fa=R.ERR_METHOD_NOT_IMPLEMENTED,ua=R.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;zi(c,J);var gb=Y.errorOrDestroy,hb=["error","close","destroy","pause","resume"];Object.defineProperty(c.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(ta){this._readableState&&(this._readableState.destroyed=ta)}});c.prototype.destroy=Y.destroy;c.prototype._undestroy=Y.undestroy;c.prototype._destroy=function(ta,
na){na(ta)};c.prototype.push=function(ta,na){var pa,La=this._readableState;return La.objectMode?pa=!0:"string"==typeof ta&&((na=na||La.defaultEncoding)!==La.encoding&&(ta=P.from(ta,na),na=""),pa=!0),k(this,ta,na,!1,pa)};c.prototype.unshift=function(ta){return k(this,ta,null,!0,!1)};c.prototype.isPaused=function(){return!1===this._readableState.flowing};c.prototype.setEncoding=function(ta){da||(da=IE.StringDecoder);ta=new da(ta);this._readableState.decoder=ta;this._readableState.encoding=this._readableState.decoder.encoding;
for(var na=this._readableState.buffer.head,pa="";null!==na;)pa+=ta.write(na.data),na=na.next;return this._readableState.buffer.clear(),""!==pa&&this._readableState.buffer.push(pa),this._readableState.length=pa.length,this};return c.prototype.read=function(ta){W("read",ta);ta=parseInt(ta,10);var na=this._readableState,pa=ta;if(0!==ta&&(na.emittedReadable=!1),0===ta&&na.needReadable&&((0!==na.highWaterMark?na.length>=na.highWaterMark:0<na.length)||na.ended))return W("read: emitReadable",na.length,na.ended),
0===na.length&&na.ended?x(this):n(this),null;if(0===(ta=h(ta,na))&&na.ended)return 0===na.length&&x(this),null;var La,Hb=na.needReadable;return W("need readable",Hb),(0===na.length||na.length-ta<na.highWaterMark)&&W("length less than watermark",Hb=!0),na.ended||na.reading?W("reading or ended",!1):Hb&&(W("do read"),na.reading=!0,na.sync=!0,0===na.length&&(na.needReadable=!0),this._read(na.highWaterMark),na.sync=!1,na.reading||(ta=h(pa,na))),null===(La=0<ta?v(ta,na):null)?(na.needReadable=na.length<=
na.highWaterMark,ta=0):(na.length-=ta,na.awaitDrain=0),0===na.length&&(na.ended||(na.needReadable=!0),pa!==ta&&na.ended&&x(this)),null!==La&&this.emit("data",La),La},c.prototype._read=function(ta){gb(this,new fa("_read()"))},c.prototype.pipe=function(ta,na){function pa(Ga,Ja){W("onunpipe");Ga===Gb&&Ja&&!1===Ja.hasUnpiped&&(Ja.hasUnpiped=!0,W("cleanup"),ta.removeListener("close",Ob),ta.removeListener("finish",Zb),ta.removeListener("drain",Gd),ta.removeListener("error",fc),ta.removeListener("unpipe",
pa),Gb.removeListener("end",La),Gb.removeListener("end",Hc),Gb.removeListener("data",Hb),ma=!0,!dd.awaitDrain||ta._writableState&&!ta._writableState.needDrain||Gd())}function La(){W("onend");ta.end()}function Hb(Ga){W("ondata");Ga=ta.write(Ga);W("dest.write",Ga);!1===Ga&&((1===dd.pipesCount&&dd.pipes===ta||1<dd.pipesCount&&-1!==E(dd.pipes,ta))&&!ma&&(W("false write response, pause",dd.awaitDrain),dd.awaitDrain++),Gb.pause())}function fc(Ga){W("onerror",Ga);Hc();ta.removeListener("error",fc);0===ta.listeners("error").length&&
gb(ta,Ga)}function Ob(){ta.removeListener("finish",Zb);Hc()}function Zb(){W("onfinish");ta.removeListener("close",Ob);Hc()}function Hc(){W("unpipe");Gb.unpipe(ta)}var Gb=this,dd=this._readableState;switch(dd.pipesCount){case 0:dd.pipes=ta;break;case 1:dd.pipes=[dd.pipes,ta];break;default:dd.pipes.push(ta)}dd.pipesCount+=1;W("pipe count=%d opts=%j",dd.pipesCount,na);na=na&&!1===na.end||ta===I.stdout||ta===I.stderr?Hc:La;dd.endEmitted?I.nextTick(na):Gb.once("end",na);ta.on("unpipe",pa);var Gd=function(Ga){return function(){var Ja=
Ga._readableState;W("pipeOnDrain",Ja.awaitDrain);Ja.awaitDrain&&Ja.awaitDrain--;0===Ja.awaitDrain&&Ga.listeners("data").length&&(Ja.flowing=!0,r(Ga))}}(Gb);ta.on("drain",Gd);var ma=!1;return Gb.on("data",Hb),function(Ga,Ja,vb){if("function"==typeof Ga.prependListener)return Ga.prependListener(Ja,vb);Ga._events&&Ga._events[Ja]?Array.isArray(Ga._events[Ja])?Ga._events[Ja].unshift(vb):Ga._events[Ja]=[vb,Ga._events[Ja]]:Ga.on(Ja,vb)}(ta,"error",fc),ta.once("close",Ob),ta.once("finish",Zb),ta.emit("pipe",
Gb),dd.flowing||(W("pipe resume"),Gb.resume()),ta},c.prototype.unpipe=function(ta){var na=this._readableState,pa={hasUnpiped:!1};if(0===na.pipesCount)return this;if(1===na.pipesCount)return ta&&ta!==na.pipes||(ta||(ta=na.pipes),na.pipes=null,na.pipesCount=0,na.flowing=!1,ta&&ta.emit("unpipe",this,pa)),this;if(!ta){ta=na.pipes;pa=na.pipesCount;na.pipes=null;na.pipesCount=0;na.flowing=!1;for(na=0;na<pa;na++)ta[na].emit("unpipe",this,{hasUnpiped:!1});return this}var La=E(na.pipes,ta);return-1===La||
(na.pipes.splice(La,1),--na.pipesCount,1===na.pipesCount&&(na.pipes=na.pipes[0]),ta.emit("unpipe",this,pa)),this},c.prototype.on=function(ta,na){na=J.prototype.on.call(this,ta,na);var pa=this._readableState;return"data"===ta?(pa.readableListening=0<this.listenerCount("readable"),!1!==pa.flowing&&this.resume()):"readable"===ta&&(pa.endEmitted||pa.readableListening||(pa.readableListening=pa.needReadable=!0,pa.flowing=!1,pa.emittedReadable=!1,W("on readable",pa.length,pa.reading),pa.length?n(this):pa.reading||
I.nextTick(f,this))),na},c.prototype.addListener=c.prototype.on,c.prototype.removeListener=function(ta,na){na=J.prototype.removeListener.call(this,ta,na);return"readable"===ta&&I.nextTick(a,this),na},c.prototype.removeAllListeners=function(ta){var na=J.prototype.removeAllListeners.apply(this,arguments);return"readable"!==ta&&void 0!==ta||I.nextTick(a,this),na},c.prototype.resume=function(){var ta=this._readableState;ta.flowing||(W("resume"),ta.flowing=!ta.readableListening,ta.resumeScheduled||(ta.resumeScheduled=
!0,I.nextTick(m,this,ta)));return ta.paused=!1,this},c.prototype.pause=function(){return W("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(W("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},c.prototype.wrap=function(ta){var na=this,pa=this._readableState,La=!1,Hb;for(Hb in ta.on("end",function(){if(W("wrapped end"),pa.decoder&&!pa.ended){var fc=pa.decoder.end();fc&&fc.length&&na.push(fc)}na.push(null)}),ta.on("data",
function(fc){(W("wrapped data"),pa.decoder&&(fc=pa.decoder.write(fc)),pa.objectMode&&null==fc)||(pa.objectMode||fc&&fc.length)&&(na.push(fc)||(La=!0,ta.pause()))}),ta)void 0===this[Hb]&&"function"==typeof ta[Hb]&&(this[Hb]=function(fc){return function(){return ta[fc].apply(ta,arguments)}}(Hb));for(Hb=0;Hb<hb.length;Hb++)ta.on(hb[Hb],this.emit.bind(this,hb[Hb]));return this._read=function(fc){W("wrapped _read",fc);La&&(La=!1,ta.resume())},this},"function"==typeof Symbol&&(c.prototype[Symbol.asyncIterator]=
function(){return void 0===va&&(va=oja),va(this)}),Object.defineProperty(c.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(c.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(c.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(ta){this._readableState&&(this._readableState.flowing=
ta)}}),c._fromList=v,Object.defineProperty(c.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(c.from=function(ta,na){return void 0===za&&(za=t4),za(c,ta,na)}),ST}function pja(){function g(R){var X=this;this.entry=this.next=null;this.finish=function(){var ja=X.entry;for(X.entry=null;ja;){var fa=ja.callback;R.pendingcb--;fa(void 0);ja=ja.next}R.corkedRequestsFree.next=X;!0}}function c(){}function k(R,X,ja){f=f||CH();R=R||{};"boolean"!=
typeof ja&&(ja=X instanceof f);this.objectMode=!!R.objectMode;ja&&(this.objectMode=this.objectMode||!!R.writableObjectMode);this.highWaterMark=I(this,R,"writableHighWaterMark",ja);this.destroyed=this.finished=this.ended=this.ending=this.needDrain=this.finalCalled=!1;this.decodeStrings=!1!==R.decodeStrings;this.defaultEncoding=R.defaultEncoding||"utf8";this.length=0;this.writing=!1;this.corked=0;this.sync=!0;this.bufferProcessing=!1;this.onwrite=function(fa){!function(ua,gb){var hb=ua._writableState,
ta=hb.sync,na=hb.writecb;if("function"!=typeof na)throw new Y;(function(pa){pa.writing=!1;pa.writecb=null;pa.length-=pa.writelen;pa.writelen=0}(hb),gb)?!function(pa,La,Hb,fc,Ob){--La.pendingcb;Hb?(m.nextTick(Ob,fc),m.nextTick(a,pa,La),pa._writableState.errorEmitted=!0,Z(pa,fc)):(Ob(fc),pa._writableState.errorEmitted=!0,Z(pa,fc),a(pa,La))}(ua,hb,ta,gb,na):((gb=e(hb)||ua.destroyed)||hb.corked||hb.bufferProcessing||!hb.bufferedRequest||b(ua,hb),ta?m.nextTick(n,ua,hb,gb,na):n(ua,hb,gb,na))}(X,fa)};this.writecb=
null;this.writelen=0;this.lastBufferedRequest=this.bufferedRequest=null;this.pendingcb=0;this.errorEmitted=this.prefinished=!1;this.emitClose=!1!==R.emitClose;this.autoDestroy=!!R.autoDestroy;this.bufferedRequestCount=0;this.corkedRequestsFree=new g(this)}function d(R){var X=this instanceof(f=f||CH());if(!X&&!E.call(d,this))return new d(R);this._writableState=new k(R,this,X);this.writable=!0;R&&("function"==typeof R.write&&(this._write=R.write),"function"==typeof R.writev&&(this._writev=R.writev),
"function"==typeof R.destroy&&(this._destroy=R.destroy),"function"==typeof R.final&&(this._final=R.final));v.call(this)}function h(R,X,ja,fa,ua,gb,hb){X.writelen=fa;X.writecb=hb;X.writing=!0;X.sync=!0;X.destroyed?X.onwrite(new da("write")):ja?R._writev(ua,X.onwrite):R._write(ua,gb,X.onwrite);X.sync=!1}function n(R,X,ja,fa){ja||(0===X.length&&X.needDrain&&(X.needDrain=!1,R.emit("drain")),!0);X.pendingcb--;fa();a(R,X)}function b(R,X){X.bufferProcessing=!0;var ja=X.bufferedRequest;if(R._writev&&ja&&
ja.next){var fa=Array(X.bufferedRequestCount),ua=X.corkedRequestsFree;ua.entry=ja;for(var gb=0,hb=!0;ja;)fa[gb]=ja,ja.isBuf||(hb=!1),ja=ja.next,gb+=1;fa.allBuffers=hb;h(R,X,!0,X.length,fa,"",ua.finish);X.pendingcb++;X.lastBufferedRequest=null;ua.next?(X.corkedRequestsFree=ua.next,ua.next=null):X.corkedRequestsFree=new g(X);X.bufferedRequestCount=0}else{for(;ja&&(fa=ja.chunk,h(R,X,!1,X.objectMode?1:fa.length,fa,ja.encoding,ja.callback),ja=ja.next,X.bufferedRequestCount--,!X.writing););null===ja&&(X.lastBufferedRequest=
null)}X.bufferedRequest=ja;X.bufferProcessing=!1}function e(R){return R.ending&&0===R.length&&null===R.bufferedRequest&&!R.finished&&!R.writing}function l(R,X){R._final(function(ja){X.pendingcb--;ja&&Z(R,ja);X.prefinished=!0;R.emit("prefinish");a(R,X)})}function a(R,X){var ja=e(X),fa;if(fa=ja)X.prefinished||X.finalCalled||("function"!=typeof R._final||X.destroyed?(X.prefinished=!0,R.emit("prefinish")):(X.pendingcb++,X.finalCalled=!0,m.nextTick(l,R,X))),fa=(!0,0===X.pendingcb&&(X.finished=!0,R.emit("finish"),
X.autoDestroy));fa&&(X=R._readableState,(!X||X.autoDestroy&&X.endEmitted)&&R.destroy());return ja}if(u4)return TT;u4=!0;var f,m=mj;TT=d;d.WritableState=k;var r={deprecate:v4},v=yM,x=oi.Buffer,y=qja.Uint8Array||function(){},E,F=r4,I=s4.getHighWaterMark,J=uu.codes,P=J.ERR_INVALID_ARG_TYPE,N=J.ERR_METHOD_NOT_IMPLEMENTED,Y=J.ERR_MULTIPLE_CALLBACK,W=J.ERR_STREAM_CANNOT_PIPE,da=J.ERR_STREAM_DESTROYED,va=J.ERR_STREAM_NULL_VALUES,za=J.ERR_STREAM_WRITE_AFTER_END,L=J.ERR_UNKNOWN_ENCODING,Z=F.errorOrDestroy;
return zi(d,v),k.prototype.getBuffer=function(){for(var R=this.bufferedRequest,X=[];R;)X.push(R),R=R.next;return X},function(){try{Object.defineProperty(k.prototype,"buffer",{get:r.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(R){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(E=Function.prototype[Symbol.hasInstance],Object.defineProperty(d,
Symbol.hasInstance,{value:function(R){return!!E.call(this,R)||this===d&&R&&R._writableState instanceof k}})):E=function(R){return R instanceof this},d.prototype.pipe=function(){Z(this,new W)},d.prototype.write=function(R,X,ja){var fa,ua=this._writableState,gb=!1,hb=!ua.objectMode&&(fa=R,x.isBuffer(fa)||fa instanceof y);return hb&&!x.isBuffer(R)&&(R=x.from(R)),"function"==typeof X&&(ja=X,X=null),hb?X="buffer":X||(X=ua.defaultEncoding),"function"!=typeof ja&&(ja=c),ua.ending?function(ta,na){var pa=
new za;Z(ta,pa);m.nextTick(na,pa)}(this,ja):(hb||function(ta,na,pa,La){var Hb;return null===pa?Hb=new va:"string"==typeof pa||na.objectMode||(Hb=new P("chunk",["string","Buffer"],pa)),!Hb||(Z(ta,Hb),m.nextTick(La,Hb),!1)}(this,ua,R,ja))&&(ua.pendingcb++,gb=function(ta,na,pa,La,Hb,fc){if(!pa){var Ob=La;na.objectMode||!1===na.decodeStrings||"string"!=typeof Ob||(Ob=x.from(Ob,Hb));La!==Ob&&(pa=!0,Hb="buffer",La=Ob)}var Zb=na.objectMode?1:La.length;na.length+=Zb;(Ob=na.length<na.highWaterMark)||(na.needDrain=
!0);na.writing||na.corked?(ta=na.lastBufferedRequest,na.lastBufferedRequest={chunk:La,encoding:Hb,isBuf:pa,callback:fc,next:null},ta?ta.next=na.lastBufferedRequest:na.bufferedRequest=na.lastBufferedRequest,na.bufferedRequestCount+=1):h(ta,na,!1,Zb,La,Hb,fc);return Ob}(this,ua,hb,R,X,ja)),gb},d.prototype.cork=function(){this._writableState.corked++},d.prototype.uncork=function(){var R=this._writableState;R.corked&&(R.corked--,R.writing||R.corked||R.bufferProcessing||!R.bufferedRequest||b(this,R))},
d.prototype.setDefaultEncoding=function(R){if("string"==typeof R&&(R=R.toLowerCase()),!(-1<"hex utf8 utf-8 ascii binary base64 ucs2 ucs-2 utf16le utf-16le raw".split(" ").indexOf((R+"").toLowerCase())))throw new L(R);return this._writableState.defaultEncoding=R,this},Object.defineProperty(d.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(d.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),
d.prototype._write=function(R,X,ja){ja(new N("_write()"))},d.prototype._writev=null,d.prototype.end=function(R,X,ja){var fa=this._writableState;"function"==typeof R?(ja=R,R=null,X=null):"function"==typeof X&&(ja=X,X=null);null!=R&&this.write(R,X);fa.corked&&(fa.corked=1,this.uncork());fa.ending||(R=ja,fa.ending=!0,a(this,fa),R&&(fa.finished?m.nextTick(R):this.once("finish",R)),fa.ended=!0,this.writable=!1);return this},Object.defineProperty(d.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),
Object.defineProperty(d.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(R){this._writableState&&(this._writableState.destroyed=R)}}),d.prototype.destroy=F.destroy,d.prototype._undestroy=F.undestroy,d.prototype._destroy=function(R,X){X(R)},TT}function CH(){function g(a){if(!(this instanceof g))return new g(a);n.call(this,a);b.call(this,a);this.allowHalfOpen=!0;a&&(!1===a.readable&&(this.readable=!1),!1===a.writable&&
(this.writable=!1),!1===a.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",c)))}function c(){this._writableState.ended||d.nextTick(k,this)}function k(a){a.end()}if(w4)return UT;w4=!0;var d=mj,h=Object.keys||function(a){var f=[],m;for(m in a)f.push(m);return f};UT=g;var n=p4(),b=pja();zi(g,n);h=h(b.prototype);for(var e=0;e<h.length;e++){var l=h[e];g.prototype[l]||(g.prototype[l]=b.prototype[l])}return Object.defineProperty(g.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),
Object.defineProperty(g.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(g.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(g.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(a){void 0!==this._readableState&&
void 0!==this._writableState&&(this._readableState.destroyed=a,this._writableState.destroyed=a)}}),UT}function rja(){}function x4(g,c){var k=Object.keys(g);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(g);c&&(d=d.filter(function(h){return Object.getOwnPropertyDescriptor(g,h).enumerable}));k.push.apply(k,d)}return k}function sja(g,c){for(var k=0;k<c.length;k++){var d=c[k];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(g,d.key,
d)}}function y4(g,c){VT(g,c);zM(g)}function zM(g){g._writableState&&!g._writableState.emitClose||g._readableState&&!g._readableState.emitClose||g.emit("close")}function VT(g,c){g.emit("error",c)}function Uz(g,c,k){return c in g?Object.defineProperty(g,c,{value:k,enumerable:!0,configurable:!0,writable:!0}):g[c]=k,g}function Vz(g,c){return{value:g,done:c}}function tja(g){var c=g[Wz];if(null!==c){var k=g[eC].read();null!==k&&(g[fC]=null,g[Wz]=null,g[gC]=null,c(Vz(k,!1)))}}function uja(g){z4.nextTick(tja,
g)}function vja(){function g(ta,na,pa){F=F||AM();ta=ta||{};"boolean"!=typeof pa&&(pa=na instanceof F);this.objectMode=!!ta.objectMode;pa&&(this.objectMode=this.objectMode||!!ta.readableObjectMode);this.highWaterMark=Z(this,ta,"readableHighWaterMark",pa);this.buffer=new L;this.length=0;this.pipes=null;this.pipesCount=0;this.flowing=null;this.reading=this.endEmitted=this.ended=!1;this.sync=!0;this.resumeScheduled=this.readableListening=this.emittedReadable=this.needReadable=!1;this.paused=!0;this.emitClose=
!1!==ta.emitClose;this.autoDestroy=!!ta.autoDestroy;this.destroyed=!1;this.defaultEncoding=ta.defaultEncoding||"utf8";this.awaitDrain=0;this.readingMore=!1;this.encoding=this.decoder=null;ta.encoding&&(da||(da=IE.StringDecoder),this.decoder=new da(ta.encoding),this.encoding=ta.encoding)}function c(ta){if(F=F||AM(),!(this instanceof c))return new c(ta);this._readableState=new g(ta,this,this instanceof F);this.readable=!0;ta&&("function"==typeof ta.read&&(this._read=ta.read),"function"==typeof ta.destroy&&
(this._destroy=ta.destroy));J.call(this)}function k(ta,na,pa,La,Hb){W("readableAddChunk",na);var fc,Ob=ta._readableState;if(null===na)Ob.reading=!1,function(Zb,Hc){if(W("onEofChunk"),!Hc.ended){if(Hc.decoder){var Gb=Hc.decoder.end();Gb&&Gb.length&&(Hc.buffer.push(Gb),Hc.length+=Hc.objectMode?1:Gb.length)}Hc.ended=!0;Hc.sync?n(Zb):(Hc.needReadable=!1,Hc.emittedReadable||(Hc.emittedReadable=!0,b(Zb)))}}(ta,Ob);else if(Hb||(fc=function(Zb,Hc){var Gb;var dd=Hc;P.isBuffer(dd)||dd instanceof N||"string"==
typeof Hc||void 0===Hc||Zb.objectMode||(Gb=new X("chunk",["string","Buffer","Uint8Array"],Hc));return Gb}(Ob,na)),fc)gb(ta,fc);else if(Ob.objectMode||na&&0<na.length)if("string"==typeof na||Ob.objectMode||Object.getPrototypeOf(na)===P.prototype||(na=P.from(na)),La)Ob.endEmitted?gb(ta,new ua):d(ta,Ob,na,!0);else if(Ob.ended)gb(ta,new ja);else{if(Ob.destroyed)return!1;Ob.reading=!1;Ob.decoder&&!pa?(na=Ob.decoder.write(na),Ob.objectMode||0!==na.length?d(ta,Ob,na,!1):e(ta,Ob)):d(ta,Ob,na,!1)}else La||
(Ob.reading=!1,e(ta,Ob));return!Ob.ended&&(Ob.length<Ob.highWaterMark||0===Ob.length)}function d(ta,na,pa,La){na.flowing&&0===na.length&&!na.sync?(na.awaitDrain=0,ta.emit("data",pa)):(na.length+=na.objectMode?1:pa.length,La?na.buffer.unshift(pa):na.buffer.push(pa),na.needReadable&&n(ta));e(ta,na)}function h(ta,na){if(0>=ta||0===na.length&&na.ended)ta=0;else if(na.objectMode)ta=1;else if(ta!=ta)ta=na.flowing&&na.length?na.buffer.head.data.length:na.length;else{if(ta>na.highWaterMark){var pa=ta;var La=
(1073741824<=pa?pa=1073741824:(pa--,pa|=pa>>>1,pa|=pa>>>2,pa|=pa>>>4,pa|=pa>>>8,pa|=pa>>>16,pa++),pa);na.highWaterMark=La}ta=ta<=na.length?ta:na.ended?na.length:(na.needReadable=!0,0)}return ta}function n(ta){var na=ta._readableState;W("emitReadable",na.needReadable,na.emittedReadable);na.needReadable=!1;na.emittedReadable||(W("emitReadable",na.flowing),na.emittedReadable=!0,I.nextTick(b,ta))}function b(ta){var na=ta._readableState;W("emitReadable_",na.destroyed,na.length,na.ended);na.destroyed||
!na.length&&!na.ended||(ta.emit("readable"),na.emittedReadable=!1);na.needReadable=!na.flowing&&!na.ended&&na.length<=na.highWaterMark;r(ta)}function e(ta,na){na.readingMore||(na.readingMore=!0,I.nextTick(l,ta,na))}function l(ta,na){for(;!na.reading&&!na.ended&&(na.length<na.highWaterMark||na.flowing&&0===na.length);){var pa=na.length;if(W("maybeReadMore read 0"),ta.read(0),pa===na.length)break}na.readingMore=!1}function a(ta){var na=ta._readableState;na.readableListening=0<ta.listenerCount("readable");
na.resumeScheduled&&!na.paused?na.flowing=!0:0<ta.listenerCount("data")&&ta.resume()}function f(ta){W("readable nexttick read 0");ta.read(0)}function m(ta,na){W("resume",na.reading);na.reading||ta.read(0);na.resumeScheduled=!1;ta.emit("resume");r(ta);na.flowing&&!na.reading&&ta.read(0)}function r(ta){var na=ta._readableState;for(W("flow",na.flowing);na.flowing&&null!==ta.read(););}function v(ta,na){return 0===na.length?null:(na.objectMode?pa=na.buffer.shift():!ta||ta>=na.length?(pa=na.decoder?na.buffer.join(""):
1===na.buffer.length?na.buffer.first():na.buffer.concat(na.length),na.buffer.clear()):pa=na.buffer.consume(ta,na.decoder),pa);var pa}function x(ta){var na=ta._readableState;W("endReadable",na.endEmitted);na.endEmitted||(na.ended=!0,I.nextTick(y,na,ta))}function y(ta,na){if(W("endReadableNT",ta.endEmitted,ta.length),!ta.endEmitted&&0===ta.length&&(ta.endEmitted=!0,na.readable=!1,na.emit("end"),ta.autoDestroy))ta=na._writableState,(!ta||ta.autoDestroy&&ta.finished)&&na.destroy()}function E(ta,na){for(var pa=
0,La=ta.length;pa<La;pa++)if(ta[pa]===na)return pa;return-1}if(A4)return WT;A4=!0;var F,I=mj;WT=c;c.ReadableState=g;jw.EventEmitter;var J=yM,P=oi.Buffer,N=wja.Uint8Array||function(){},Y=$h;var W=Y&&Y.debuglog?Y.debuglog("stream"):function(){};var da,va,za,L=xja;Y=B4;var Z=C4.getHighWaterMark,R=uu.codes,X=R.ERR_INVALID_ARG_TYPE,ja=R.ERR_STREAM_PUSH_AFTER_EOF,fa=R.ERR_METHOD_NOT_IMPLEMENTED,ua=R.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;zi(c,J);var gb=Y.errorOrDestroy,hb=["error","close","destroy","pause",
"resume"];Object.defineProperty(c.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(ta){this._readableState&&(this._readableState.destroyed=ta)}});c.prototype.destroy=Y.destroy;c.prototype._undestroy=Y.undestroy;c.prototype._destroy=function(ta,na){na(ta)};c.prototype.push=function(ta,na){var pa,La=this._readableState;return La.objectMode?pa=!0:"string"==typeof ta&&((na=na||La.defaultEncoding)!==La.encoding&&(ta=P.from(ta,
na),na=""),pa=!0),k(this,ta,na,!1,pa)};c.prototype.unshift=function(ta){return k(this,ta,null,!0,!1)};c.prototype.isPaused=function(){return!1===this._readableState.flowing};c.prototype.setEncoding=function(ta){da||(da=IE.StringDecoder);ta=new da(ta);this._readableState.decoder=ta;this._readableState.encoding=this._readableState.decoder.encoding;for(var na=this._readableState.buffer.head,pa="";null!==na;)pa+=ta.write(na.data),na=na.next;return this._readableState.buffer.clear(),""!==pa&&this._readableState.buffer.push(pa),
this._readableState.length=pa.length,this};return c.prototype.read=function(ta){W("read",ta);ta=parseInt(ta,10);var na=this._readableState,pa=ta;if(0!==ta&&(na.emittedReadable=!1),0===ta&&na.needReadable&&((0!==na.highWaterMark?na.length>=na.highWaterMark:0<na.length)||na.ended))return W("read: emitReadable",na.length,na.ended),0===na.length&&na.ended?x(this):n(this),null;if(0===(ta=h(ta,na))&&na.ended)return 0===na.length&&x(this),null;var La,Hb=na.needReadable;return W("need readable",Hb),(0===
na.length||na.length-ta<na.highWaterMark)&&W("length less than watermark",Hb=!0),na.ended||na.reading?W("reading or ended",!1):Hb&&(W("do read"),na.reading=!0,na.sync=!0,0===na.length&&(na.needReadable=!0),this._read(na.highWaterMark),na.sync=!1,na.reading||(ta=h(pa,na))),null===(La=0<ta?v(ta,na):null)?(na.needReadable=na.length<=na.highWaterMark,ta=0):(na.length-=ta,na.awaitDrain=0),0===na.length&&(na.ended||(na.needReadable=!0),pa!==ta&&na.ended&&x(this)),null!==La&&this.emit("data",La),La},c.prototype._read=
function(ta){gb(this,new fa("_read()"))},c.prototype.pipe=function(ta,na){function pa(Ga,Ja){W("onunpipe");Ga===Gb&&Ja&&!1===Ja.hasUnpiped&&(Ja.hasUnpiped=!0,W("cleanup"),ta.removeListener("close",Ob),ta.removeListener("finish",Zb),ta.removeListener("drain",Gd),ta.removeListener("error",fc),ta.removeListener("unpipe",pa),Gb.removeListener("end",La),Gb.removeListener("end",Hc),Gb.removeListener("data",Hb),ma=!0,!dd.awaitDrain||ta._writableState&&!ta._writableState.needDrain||Gd())}function La(){W("onend");
ta.end()}function Hb(Ga){W("ondata");Ga=ta.write(Ga);W("dest.write",Ga);!1===Ga&&((1===dd.pipesCount&&dd.pipes===ta||1<dd.pipesCount&&-1!==E(dd.pipes,ta))&&!ma&&(W("false write response, pause",dd.awaitDrain),dd.awaitDrain++),Gb.pause())}function fc(Ga){W("onerror",Ga);Hc();ta.removeListener("error",fc);0===ta.listeners("error").length&&gb(ta,Ga)}function Ob(){ta.removeListener("finish",Zb);Hc()}function Zb(){W("onfinish");ta.removeListener("close",Ob);Hc()}function Hc(){W("unpipe");Gb.unpipe(ta)}
var Gb=this,dd=this._readableState;switch(dd.pipesCount){case 0:dd.pipes=ta;break;case 1:dd.pipes=[dd.pipes,ta];break;default:dd.pipes.push(ta)}dd.pipesCount+=1;W("pipe count=%d opts=%j",dd.pipesCount,na);na=na&&!1===na.end||ta===I.stdout||ta===I.stderr?Hc:La;dd.endEmitted?I.nextTick(na):Gb.once("end",na);ta.on("unpipe",pa);var Gd=function(Ga){return function(){var Ja=Ga._readableState;W("pipeOnDrain",Ja.awaitDrain);Ja.awaitDrain&&Ja.awaitDrain--;0===Ja.awaitDrain&&Ga.listeners("data").length&&(Ja.flowing=
!0,r(Ga))}}(Gb);ta.on("drain",Gd);var ma=!1;return Gb.on("data",Hb),function(Ga,Ja,vb){if("function"==typeof Ga.prependListener)return Ga.prependListener(Ja,vb);Ga._events&&Ga._events[Ja]?Array.isArray(Ga._events[Ja])?Ga._events[Ja].unshift(vb):Ga._events[Ja]=[vb,Ga._events[Ja]]:Ga.on(Ja,vb)}(ta,"error",fc),ta.once("close",Ob),ta.once("finish",Zb),ta.emit("pipe",Gb),dd.flowing||(W("pipe resume"),Gb.resume()),ta},c.prototype.unpipe=function(ta){var na=this._readableState,pa={hasUnpiped:!1};if(0===
na.pipesCount)return this;if(1===na.pipesCount)return ta&&ta!==na.pipes||(ta||(ta=na.pipes),na.pipes=null,na.pipesCount=0,na.flowing=!1,ta&&ta.emit("unpipe",this,pa)),this;if(!ta){ta=na.pipes;pa=na.pipesCount;na.pipes=null;na.pipesCount=0;na.flowing=!1;for(na=0;na<pa;na++)ta[na].emit("unpipe",this,{hasUnpiped:!1});return this}var La=E(na.pipes,ta);return-1===La||(na.pipes.splice(La,1),--na.pipesCount,1===na.pipesCount&&(na.pipes=na.pipes[0]),ta.emit("unpipe",this,pa)),this},c.prototype.on=function(ta,
na){na=J.prototype.on.call(this,ta,na);var pa=this._readableState;return"data"===ta?(pa.readableListening=0<this.listenerCount("readable"),!1!==pa.flowing&&this.resume()):"readable"===ta&&(pa.endEmitted||pa.readableListening||(pa.readableListening=pa.needReadable=!0,pa.flowing=!1,pa.emittedReadable=!1,W("on readable",pa.length,pa.reading),pa.length?n(this):pa.reading||I.nextTick(f,this))),na},c.prototype.addListener=c.prototype.on,c.prototype.removeListener=function(ta,na){na=J.prototype.removeListener.call(this,
ta,na);return"readable"===ta&&I.nextTick(a,this),na},c.prototype.removeAllListeners=function(ta){var na=J.prototype.removeAllListeners.apply(this,arguments);return"readable"!==ta&&void 0!==ta||I.nextTick(a,this),na},c.prototype.resume=function(){var ta=this._readableState;ta.flowing||(W("resume"),ta.flowing=!ta.readableListening,ta.resumeScheduled||(ta.resumeScheduled=!0,I.nextTick(m,this,ta)));return ta.paused=!1,this},c.prototype.pause=function(){return W("call pause flowing=%j",this._readableState.flowing),
!1!==this._readableState.flowing&&(W("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},c.prototype.wrap=function(ta){var na=this,pa=this._readableState,La=!1,Hb;for(Hb in ta.on("end",function(){if(W("wrapped end"),pa.decoder&&!pa.ended){var fc=pa.decoder.end();fc&&fc.length&&na.push(fc)}na.push(null)}),ta.on("data",function(fc){(W("wrapped data"),pa.decoder&&(fc=pa.decoder.write(fc)),pa.objectMode&&null==fc)||(pa.objectMode||fc&&fc.length)&&(na.push(fc)||
(La=!0,ta.pause()))}),ta)void 0===this[Hb]&&"function"==typeof ta[Hb]&&(this[Hb]=function(fc){return function(){return ta[fc].apply(ta,arguments)}}(Hb));for(Hb=0;Hb<hb.length;Hb++)ta.on(hb[Hb],this.emit.bind(this,hb[Hb]));return this._read=function(fc){W("wrapped _read",fc);La&&(La=!1,ta.resume())},this},"function"==typeof Symbol&&(c.prototype[Symbol.asyncIterator]=function(){return void 0===va&&(va=yja),va(this)}),Object.defineProperty(c.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),
Object.defineProperty(c.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(c.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(ta){this._readableState&&(this._readableState.flowing=ta)}}),c._fromList=v,Object.defineProperty(c.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(c.from=function(ta,
na){return void 0===za&&(za=t4),za(c,ta,na)}),WT}function D4(){function g(R){var X=this;this.entry=this.next=null;this.finish=function(){var ja=X.entry;for(X.entry=null;ja;){var fa=ja.callback;R.pendingcb--;fa(void 0);ja=ja.next}R.corkedRequestsFree.next=X;!0}}function c(){}function k(R,X,ja){f=f||AM();R=R||{};"boolean"!=typeof ja&&(ja=X instanceof f);this.objectMode=!!R.objectMode;ja&&(this.objectMode=this.objectMode||!!R.writableObjectMode);this.highWaterMark=I(this,R,"writableHighWaterMark",ja);
this.destroyed=this.finished=this.ended=this.ending=this.needDrain=this.finalCalled=!1;this.decodeStrings=!1!==R.decodeStrings;this.defaultEncoding=R.defaultEncoding||"utf8";this.length=0;this.writing=!1;this.corked=0;this.sync=!0;this.bufferProcessing=!1;this.onwrite=function(fa){!function(ua,gb){var hb=ua._writableState,ta=hb.sync,na=hb.writecb;if("function"!=typeof na)throw new Y;(function(pa){pa.writing=!1;pa.writecb=null;pa.length-=pa.writelen;pa.writelen=0}(hb),gb)?!function(pa,La,Hb,fc,Ob){--La.pendingcb;
Hb?(m.nextTick(Ob,fc),m.nextTick(a,pa,La),pa._writableState.errorEmitted=!0,Z(pa,fc)):(Ob(fc),pa._writableState.errorEmitted=!0,Z(pa,fc),a(pa,La))}(ua,hb,ta,gb,na):((gb=e(hb)||ua.destroyed)||hb.corked||hb.bufferProcessing||!hb.bufferedRequest||b(ua,hb),ta?m.nextTick(n,ua,hb,gb,na):n(ua,hb,gb,na))}(X,fa)};this.writecb=null;this.writelen=0;this.lastBufferedRequest=this.bufferedRequest=null;this.pendingcb=0;this.errorEmitted=this.prefinished=!1;this.emitClose=!1!==R.emitClose;this.autoDestroy=!!R.autoDestroy;
this.bufferedRequestCount=0;this.corkedRequestsFree=new g(this)}function d(R){var X=this instanceof(f=f||AM());if(!X&&!E.call(d,this))return new d(R);this._writableState=new k(R,this,X);this.writable=!0;R&&("function"==typeof R.write&&(this._write=R.write),"function"==typeof R.writev&&(this._writev=R.writev),"function"==typeof R.destroy&&(this._destroy=R.destroy),"function"==typeof R.final&&(this._final=R.final));v.call(this)}function h(R,X,ja,fa,ua,gb,hb){X.writelen=fa;X.writecb=hb;X.writing=!0;
X.sync=!0;X.destroyed?X.onwrite(new da("write")):ja?R._writev(ua,X.onwrite):R._write(ua,gb,X.onwrite);X.sync=!1}function n(R,X,ja,fa){ja||(0===X.length&&X.needDrain&&(X.needDrain=!1,R.emit("drain")),!0);X.pendingcb--;fa();a(R,X)}function b(R,X){X.bufferProcessing=!0;var ja=X.bufferedRequest;if(R._writev&&ja&&ja.next){var fa=Array(X.bufferedRequestCount),ua=X.corkedRequestsFree;ua.entry=ja;for(var gb=0,hb=!0;ja;)fa[gb]=ja,ja.isBuf||(hb=!1),ja=ja.next,gb+=1;fa.allBuffers=hb;h(R,X,!0,X.length,fa,"",
ua.finish);X.pendingcb++;X.lastBufferedRequest=null;ua.next?(X.corkedRequestsFree=ua.next,ua.next=null):X.corkedRequestsFree=new g(X);X.bufferedRequestCount=0}else{for(;ja&&(fa=ja.chunk,h(R,X,!1,X.objectMode?1:fa.length,fa,ja.encoding,ja.callback),ja=ja.next,X.bufferedRequestCount--,!X.writing););null===ja&&(X.lastBufferedRequest=null)}X.bufferedRequest=ja;X.bufferProcessing=!1}function e(R){return R.ending&&0===R.length&&null===R.bufferedRequest&&!R.finished&&!R.writing}function l(R,X){R._final(function(ja){X.pendingcb--;
ja&&Z(R,ja);X.prefinished=!0;R.emit("prefinish");a(R,X)})}function a(R,X){var ja=e(X),fa;if(fa=ja)X.prefinished||X.finalCalled||("function"!=typeof R._final||X.destroyed?(X.prefinished=!0,R.emit("prefinish")):(X.pendingcb++,X.finalCalled=!0,m.nextTick(l,R,X))),fa=(!0,0===X.pendingcb&&(X.finished=!0,R.emit("finish"),X.autoDestroy));fa&&(X=R._readableState,(!X||X.autoDestroy&&X.endEmitted)&&R.destroy());return ja}if(E4)return XT;E4=!0;var f,m=mj;XT=d;d.WritableState=k;var r={deprecate:v4},v=yM,x=oi.Buffer,
y=zja.Uint8Array||function(){},E,F=B4,I=C4.getHighWaterMark,J=uu.codes,P=J.ERR_INVALID_ARG_TYPE,N=J.ERR_METHOD_NOT_IMPLEMENTED,Y=J.ERR_MULTIPLE_CALLBACK,W=J.ERR_STREAM_CANNOT_PIPE,da=J.ERR_STREAM_DESTROYED,va=J.ERR_STREAM_NULL_VALUES,za=J.ERR_STREAM_WRITE_AFTER_END,L=J.ERR_UNKNOWN_ENCODING,Z=F.errorOrDestroy;return zi(d,v),k.prototype.getBuffer=function(){for(var R=this.bufferedRequest,X=[];R;)X.push(R),R=R.next;return X},function(){try{Object.defineProperty(k.prototype,"buffer",{get:r.deprecate(function(){return this.getBuffer()},
"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(R){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(E=Function.prototype[Symbol.hasInstance],Object.defineProperty(d,Symbol.hasInstance,{value:function(R){return!!E.call(this,R)||this===d&&R&&R._writableState instanceof k}})):E=function(R){return R instanceof this},d.prototype.pipe=function(){Z(this,new W)},d.prototype.write=function(R,X,ja){var fa,
ua=this._writableState,gb=!1,hb=!ua.objectMode&&(fa=R,x.isBuffer(fa)||fa instanceof y);return hb&&!x.isBuffer(R)&&(R=x.from(R)),"function"==typeof X&&(ja=X,X=null),hb?X="buffer":X||(X=ua.defaultEncoding),"function"!=typeof ja&&(ja=c),ua.ending?function(ta,na){var pa=new za;Z(ta,pa);m.nextTick(na,pa)}(this,ja):(hb||function(ta,na,pa,La){var Hb;return null===pa?Hb=new va:"string"==typeof pa||na.objectMode||(Hb=new P("chunk",["string","Buffer"],pa)),!Hb||(Z(ta,Hb),m.nextTick(La,Hb),!1)}(this,ua,R,ja))&&
(ua.pendingcb++,gb=function(ta,na,pa,La,Hb,fc){if(!pa){var Ob=La;na.objectMode||!1===na.decodeStrings||"string"!=typeof Ob||(Ob=x.from(Ob,Hb));La!==Ob&&(pa=!0,Hb="buffer",La=Ob)}var Zb=na.objectMode?1:La.length;na.length+=Zb;(Ob=na.length<na.highWaterMark)||(na.needDrain=!0);na.writing||na.corked?(ta=na.lastBufferedRequest,na.lastBufferedRequest={chunk:La,encoding:Hb,isBuf:pa,callback:fc,next:null},ta?ta.next=na.lastBufferedRequest:na.bufferedRequest=na.lastBufferedRequest,na.bufferedRequestCount+=
1):h(ta,na,!1,Zb,La,Hb,fc);return Ob}(this,ua,hb,R,X,ja)),gb},d.prototype.cork=function(){this._writableState.corked++},d.prototype.uncork=function(){var R=this._writableState;R.corked&&(R.corked--,R.writing||R.corked||R.bufferProcessing||!R.bufferedRequest||b(this,R))},d.prototype.setDefaultEncoding=function(R){if("string"==typeof R&&(R=R.toLowerCase()),!(-1<"hex utf8 utf-8 ascii binary base64 ucs2 ucs-2 utf16le utf-16le raw".split(" ").indexOf((R+"").toLowerCase())))throw new L(R);return this._writableState.defaultEncoding=
R,this},Object.defineProperty(d.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(d.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),d.prototype._write=function(R,X,ja){ja(new N("_write()"))},d.prototype._writev=null,d.prototype.end=function(R,X,ja){var fa=this._writableState;"function"==typeof R?(ja=R,R=null,X=null):"function"==typeof X&&(ja=X,X=null);
null!=R&&this.write(R,X);fa.corked&&(fa.corked=1,this.uncork());fa.ending||(R=ja,fa.ending=!0,a(this,fa),R&&(fa.finished?m.nextTick(R):this.once("finish",R)),fa.ended=!0,this.writable=!1);return this},Object.defineProperty(d.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(d.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(R){this._writableState&&(this._writableState.destroyed=
R)}}),d.prototype.destroy=F.destroy,d.prototype._undestroy=F.undestroy,d.prototype._destroy=function(R,X){X(R)},XT}function AM(){function g(a){if(!(this instanceof g))return new g(a);n.call(this,a);b.call(this,a);this.allowHalfOpen=!0;a&&(!1===a.readable&&(this.readable=!1),!1===a.writable&&(this.writable=!1),!1===a.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",c)))}function c(){this._writableState.ended||d.nextTick(k,this)}function k(a){a.end()}if(F4)return YT;F4=!0;var d=mj,h=Object.keys||
function(a){var f=[],m;for(m in a)f.push(m);return f};YT=g;var n=vja(),b=D4();zi(g,n);h=h(b.prototype);for(var e=0;e<h.length;e++){var l=h[e];g.prototype[l]||(g.prototype[l]=b.prototype[l])}return Object.defineProperty(g.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(g.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(g.prototype,
"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(g.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(a){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=a,this._writableState.destroyed=a)}}),YT}function Aja(g,c){var k=this._transformState;k.transforming=!1;var d=
k.writecb;if(null===d)return this.emit("error",new Bja);k.writechunk=null;k.writecb=null;null!=c&&this.push(c);d(g);g=this._readableState;g.reading=!1;(g.needReadable||g.length<g.highWaterMark)&&this._read(g.highWaterMark)}function kw(g){if(!(this instanceof kw))return new kw(g);BM.call(this,g);this._transformState={afterTransform:Aja.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null};this._readableState.needReadable=!0;this._readableState.sync=!1;g&&("function"==
typeof g.transform&&(this._transform=g.transform),"function"==typeof g.flush&&(this._flush=g.flush));this.on("prefinish",Cja)}function Cja(){var g=this;"function"!=typeof this._flush||this._readableState.destroyed?G4(this,null,null):this._flush(function(c,k){G4(g,c,k)})}function G4(g,c,k){if(c)return g.emit("error",c);if(null!=k&&g.push(k),g._writableState.length)throw new Dja;if(g._transformState.transforming)throw new Eja;return g.push(null)}function DH(g){if(!(this instanceof DH))return new DH(g);
H4.call(this,g)}function I4(g){if(g)throw g;}function Fja(g,c,k,d){d=function(b){var e=!1;return function(){e||(e=!0,b.apply(void 0,arguments))}}(d);var h=!1;g.on("close",function(){h=!0});void 0===ZT&&(ZT=$T);ZT(g,{readable:c,writable:k},function(b){if(b)return d(b);h=!0;d()});var n=!1;return function(b){if(!h&&!n)return n=!0,g.setHeader&&"function"==typeof g.abort?g.abort():"function"==typeof g.destroy?g.destroy():(d(b||new Gja("pipe")),void 0)}}function J4(g){g()}function Hja(g,c){return g.pipe(c)}
function Ks(){aU.call(this||bU)}function CM(){}function cy(g){K4.call(this);this._block=DM.allocUnsafe(g);this._blockSize=g;this._blockOffset=0;this._length=[0,0,0,0];this._finalized=!1}function JE(){L4.call(this,64);this._a=1732584193;this._b=4023233417;this._c=2562383102;this._d=271733878}function EM(g,c){return g<<c|g>>>32-c}function gp(g,c,k,d,h,n,b){return EM(g+(c&k|~c&d)+h+n|0,b)+c|0}function hp(g,c,k,d,h,n,b){return EM(g+(c&d|k&~d)+h+n|0,b)+c|0}function ip(g,c,k,d,h,n,b){return EM(g+(c^k^d)+
h+n|0,b)+c|0}function jp(g,c,k,d,h,n,b){return EM(g+(k^(c|~d))+h+n|0,b)+c|0}function KE(){M4.call(this,64);this._a=1732584193;this._b=4023233417;this._c=2562383102;this._d=271733878;this._e=3285377520}function Ls(g,c){return g<<c|g>>>32-c}function dy(g,c){(this||vl)._block=N4.alloc(g);(this||vl)._finalSize=c;(this||vl)._blockSize=g;(this||vl)._len=0}function LE(){this.init();(this||pi)._w=Ija;O4.call(this||pi,64,56)}function EH(){this.init();(this||Mk)._w=Jja;P4.call(this||Mk,64,56)}function FH(){this.init();
(this||Nk)._w=Kja;Q4.call(this||Nk,64,56)}function FM(){this.init();(this||Vn)._w=Lja;Mja.call(this||Vn,64,56)}function ME(){this.init();(this||gf)._w=Nja;R4.call(this||gf,128,112)}function Wn(g,c){return g>>>0<c>>>0?1:0}function GM(){this.init();(this||kk)._w=Oja;Pja.call(this||kk,128,112)}function Xn(g){S4.call(this||Zl);(this||Zl).hashMode="string"==typeof g;(this||Zl).hashMode?(this||Zl)[g]=(this||Zl)._finalOrDigest:(this||Zl).final=(this||Zl)._finalOrDigest;(this||Zl)._final&&((this||Zl).__final=
(this||Zl)._final,(this||Zl)._final=null);(this||Zl)._decoder=null;(this||Zl)._encoding=null}function HM(g){T4.call(this,"digest");this._hash=g}function IM(g,c){U4.call(this,"digest");"string"==typeof c&&(c=hC.from(c));this._alg=g;this._key=c;64<c.length?c=g(c):64>c.length&&(c=hC.concat([c,Qja],64));g=this._ipad=hC.allocUnsafe(64);for(var k=this._opad=hC.allocUnsafe(64),d=0;64>d;d++)g[d]=54^c[d],k[d]=92^c[d];this._hash=[g]}function GH(g,c){V4.call(this,"digest");"string"==typeof c&&(c=HH.from(c));
var k="sha512"===g||"sha384"===g?128:64;(this._alg=g,this._key=c,c.length>k)?c=("rmd160"===g?new cU:dU(g)).update(c).digest():c.length<k&&(c=HH.concat([c,Rja],k));for(var d=this._ipad=HH.allocUnsafe(k),h=this._opad=HH.allocUnsafe(k),n=0;n<k;n++)d[n]=54^c[n],h[n]=92^c[n];this._hash="rmd160"===g?new cU:dU(g);this._hash.update(d)}function W4(g,c){if("string"!=typeof g&&!Sja.isBuffer(g))throw new TypeError(c+" must be a buffer or string");}function X4(g,c,k){var d=function(l){function a(f){return Tja(l).update(f).digest()}
return"rmd160"===l||"ripemd160"===l?function(f){return(new Uja).update(f).digest()}:"md5"===l?Vja:a}(g),h="sha512"===g||"sha384"===g?128:64;c.length>h?c=d(c):c.length<h&&(c=vu.concat([c,Wja],h));for(var n=vu.allocUnsafe(h+JM[g]),b=vu.allocUnsafe(h+JM[g]),e=0;e<h;e++)n[e]=54^c[e],b[e]=92^c[e];c=vu.allocUnsafe(h+k+4);n.copy(c,0,0,h);(this||wu).ipad1=c;(this||wu).ipad2=n;(this||wu).opad=b;(this||wu).alg=g;(this||wu).blocksize=h;(this||wu).hash=d;(this||wu).size=JM[g]}function Y4(g,c,k,d,h){return IH.importKey("raw",
g,{name:"PBKDF2"},!1,["deriveBits"]).then(function(n){return IH.deriveBits({name:"PBKDF2",salt:c,iterations:k,hash:{name:h}},n,d<<3)}).then(function(n){return NE.from(n)})}function Z4(g,c){if(!g)throw Error(c||"Assertion failed");}function Ar(g){this.options=g;this.type=this.options.type;this.blockSize=8;this._init();this.buffer=Array(this.blockSize);this.bufferOff=0}function Xja(){this.tmp=Array(2);this.keys=null}function Ms(g){$4.call(this,g);var c=new Xja;this._desState=c;this.deriveKeys(c,g.key)}
function Yja(g){Zja.equal(g.length,8,"Invalid IV length");this.iv=Array(8);for(var c=0;c<this.iv.length;c++)this.iv[c]=g[c]}function $ja(g,c){aka.equal(c.length,24,"Invalid key length");var k=c.slice(0,8),d=c.slice(8,16);c=c.slice(16,24);this.ciphers="encrypt"===g?[Xz.create({type:"encrypt",key:k}),Xz.create({type:"decrypt",key:d}),Xz.create({type:"encrypt",key:c})]:[Xz.create({type:"decrypt",key:c}),Xz.create({type:"encrypt",key:d}),Xz.create({type:"decrypt",key:k})]}function lw(g){a5.call(this,
g);this._edeState=new $ja(this.type,this.options.key)}function KM(g){b5.call(this||LM);var c=g.mode.toLowerCase(),k=JH[c];var d=g.decrypt?"decrypt":"encrypt";var h=g.key;iC.isBuffer(h)||(h=iC.from(h));"des-ede"!==c&&"des-ede-cbc"!==c||(h=iC.concat([h,h.slice(0,8)]));g=g.iv;iC.isBuffer(g)||(g=iC.from(g));(this||LM)._des=k.create({key:h,iv:g,type:d})}function c5(g,c,k){var d=c.length,h=bka(c,g._cache);return g._cache=g._cache.slice(d),g._prev=KH.concat([g._prev,k?c:h]),h}function cka(g){return g._prev=
g._cipher.encryptBlock(g._prev),g._prev}function eU(g){MM.isBuffer(g)||(g=MM.from(g));for(var c=g.length/4|0,k=Array(c),d=0;d<c;d++)k[d]=g.readUInt32BE(4*d);return k}function fU(g){for(;0<g.length;g++)g[0]=0}function d5(g,c,k,d,h){var n=k[0],b=k[1],e=k[2];k=k[3];var l=g[0]^c[0],a=g[1]^c[1],f=g[2]^c[2];g=g[3]^c[3];for(var m=4,r=1;r<h;r++){var v=n[l>>>24]^b[a>>>16&255]^e[f>>>8&255]^k[255&g]^c[m++];var x=n[a>>>24]^b[f>>>16&255]^e[g>>>8&255]^k[255&l]^c[m++];var y=n[f>>>24]^b[g>>>16&255]^e[l>>>8&255]^
k[255&a]^c[m++];var E=n[g>>>24]^b[l>>>16&255]^e[a>>>8&255]^k[255&f]^c[m++];l=v;a=x;f=y;g=E}return v=(d[l>>>24]<<24|d[a>>>16&255]<<16|d[f>>>8&255]<<8|d[255&g])^c[m++],x=(d[a>>>24]<<24|d[f>>>16&255]<<16|d[g>>>8&255]<<8|d[255&l])^c[m++],y=(d[f>>>24]<<24|d[g>>>16&255]<<16|d[l>>>8&255]<<8|d[255&a])^c[m++],E=(d[g>>>24]<<24|d[l>>>16&255]<<16|d[a>>>8&255]<<8|d[255&f])^c[m++],[v>>>0,x>>>0,y>>>0,E>>>0]}function Ns(g){(this||Os)._key=eU(g);this._reset()}function e5(g){var c=OE.allocUnsafe(16);return c.writeUInt32BE(g[0]>>>
0,0),c.writeUInt32BE(g[1]>>>0,4),c.writeUInt32BE(g[2]>>>0,8),c.writeUInt32BE(g[3]>>>0,12),c}function LH(g){(this||Eo).h=g;(this||Eo).state=OE.alloc(16,0);(this||Eo).cache=OE.allocUnsafe(0)}function Yz(g,c,k,d){f5.call(this||ai);var h=Iq.alloc(4,0);(this||ai)._cipher=new dka.AES(c);var n=(this||ai)._cipher.encryptBlock(h);(this||ai)._ghash=new g5(n);c=this||ai;h=k;if(12===h.length)c=(c._finID=Iq.concat([h,Iq.from([0,0,0,1])]),Iq.concat([h,Iq.from([0,0,0,2])]));else{k=new g5(n);n=h.length;var b=n%16;
k.update(h);b&&(b=16-b,k.update(Iq.alloc(b,0)));k.update(Iq.alloc(8,0));h=8*n;n=Iq.alloc(8);n.writeUIntBE(h,0,8);k.update(n);c._finID=k.state;c=Iq.from(c._finID);c=(eka(c),c)}(this||ai)._prev=Iq.from(c);(this||ai)._cache=Iq.allocUnsafe(0);(this||ai)._secCache=Iq.allocUnsafe(0);(this||ai)._decrypt=d;(this||ai)._alen=0;(this||ai)._len=0;(this||ai)._mode=g;(this||ai)._authTag=null;(this||ai)._called=!1}function MH(g,c,k,d){h5.call(this||xu);(this||xu)._cipher=new fka.AES(c);(this||xu)._prev=gU.from(k);
(this||xu)._cache=gU.allocUnsafe(0);(this||xu)._secCache=gU.allocUnsafe(0);(this||xu)._decrypt=d;(this||xu)._mode=g}function NH(g,c,k){i5.call(this||lk);(this||lk)._cache=new NM;(this||lk)._last=void 0;(this||lk)._cipher=new gka.AES(c);(this||lk)._prev=PE.from(k);(this||lk)._mode=g;(this||lk)._autopadding=!0}function NM(){(this||lk).cache=PE.allocUnsafe(0)}function j5(g,c,k){g=k5[g.toLowerCase()];if(!g)throw new TypeError("invalid suite type");if("string"==typeof k&&(k=PE.from(k)),"GCM"!==g.mode&&
k.length!==g.iv)throw new TypeError("invalid iv length "+k.length);if("string"==typeof c&&(c=PE.from(c)),c.length!==g.key/8)throw new TypeError("invalid key length "+c.length);return"stream"===g.type?new hka(g.module,c,k,!0):"auth"===g.type?new ika(g.module,c,k,!0):new NH(g.module,c,k)}function OH(g,c,k){l5.call(this||hl);(this||hl)._cache=new OM;(this||hl)._cipher=new jka.AES(c);(this||hl)._prev=ey.from(k);(this||hl)._mode=g;(this||hl)._autopadding=!0}function OM(){(this||hl).cache=ey.allocUnsafe(0)}
function m5(g,c,k){g=n5[g.toLowerCase()];if(!g)throw new TypeError("invalid suite type");if("string"==typeof c&&(c=ey.from(c)),c.length!==g.key/8)throw new TypeError("invalid key length "+c.length);if("string"==typeof k&&(k=ey.from(k)),"GCM"!==g.mode&&k.length!==g.iv)throw new TypeError("invalid iv length "+k.length);return"stream"===g.type?new kka(g.module,c,k):"auth"===g.type?new lka(g.module,c,k):new OH(g.module,c,k)}function hU(g,c,k){if(g=g.toLowerCase(),Zz[g])return iU.createCipheriv(g,c,k);
if(fy[g])return new o5({key:c,iv:k,mode:g});throw new TypeError("invalid suite type");}function jU(g,c,k){if(g=g.toLowerCase(),Zz[g])return iU.createDecipheriv(g,c,k);if(fy[g])return new o5({key:c,iv:k,mode:g,decrypt:!0});throw new TypeError("invalid suite type");}function $z(g){(this||PM).rand=g}function aA(g){(this||p5).rand=g||new mka.Rand}function kU(g){if(null!==lU)var c=lU;else{c=[2];for(var k=1,d=3;1048576>d;d+=2){for(var h=Math.ceil(Math.sqrt(d)),n=0;n<k&&c[n]<=h&&0!=d%c[n];n++);k!==n&&c[n]<=
h||(c[k++]=d)}c=(lU=c,c)}for(k=0;k<c.length;k++)if(0===g.modn(c[k]))return 0===g.cmpn(c[k]);return!0}function mU(g){var c=kp.mont(g);return 0===nU.toRed(c).redPow(g.subn(1)).fromRed().cmpn(1)}function PH(g,c){if(16>g)return new kp(2===c||5===c?[140,123]:[140,39]);var k,d;for(c=new kp(c);;){for(k=new kp(nka(Math.ceil(g/8)));k.bitLength()>g;)k.ishrn(1);if(k.isEven()&&k.iadd(oka),k.testn(1)||k.iadd(nU),c.cmp(nU)){if(!c.cmp(pka))for(;k.mod(qka).cmp(rka);)k.iadd(q5)}else for(;k.mod(ska).cmp(tka);)k.iadd(q5);
if(kU(d=k.shrn(1))&&kU(k)&&mU(d)&&mU(k)&&r5.test(d)&&r5.test(k))return k}}function uka(g,c){return c=c||"utf8",mw.isBuffer(g)||(g=new mw(g,c)),(this||Dj)._pub=new Ps(g),this||Dj}function vka(g,c){return c=c||"utf8",mw.isBuffer(g)||(g=new mw(g,c)),(this||Dj)._priv=new Ps(g),this||Dj}function yu(g,c,k){this.setGenerator(c);(this||Dj).__prime=new Ps(g);(this||Dj)._prime=Ps.mont((this||Dj).__prime);(this||Dj)._primeLen=g.length;(this||Dj)._pub=void 0;(this||Dj)._priv=void 0;(this||Dj)._primeCode=void 0;
k?((this||Dj).setPublicKey=uka,(this||Dj).setPrivateKey=vka):(this||Dj)._primeCode=8}function QM(g,c){g=new mw(g.toArray());return c?g.toString(c):g}function RM(g,c){var k=s5(c);var d=k.toRed(bA.mont(c.modulus)).redPow(new bA(c.publicExponent)).fromRed();k=k.invm(c.modulus);var h=c.modulus.byteLength();g=(bA.mont(c.modulus),(new bA(g)).mul(d).umod(c.modulus));var n=g.toRed(bA.mont(c.prime1)),b=g.toRed(bA.mont(c.prime2));d=c.coefficient;var e=c.prime1;g=c.prime2;n=n.redPow(c.exponent1);b=b.redPow(c.exponent2);
n=n.fromRed();b=b.fromRed();d=n.isub(b).imul(d).umod(e);return d.imul(g),b.iadd(d),new wka(b.imul(k).umod(c.modulus).toArray(!1,h))}function s5(g){for(var c=g.modulus.byteLength(),k=new bA(t5(c));0<=k.cmp(g.modulus)||!k.umod(g.prime1)||!k.umod(g.prime2);)k=new bA(t5(c));return k}function u5(g){return 1===g.length?"0"+g:g}function v5(g){for(var c="",k=0;k<g.length;k++)c+=u5(g[k].toString(16));return c}function jC(g,c){if(g instanceof jC)return g;this._importDER(g,c)||(xka(g.r&&g.s,"Signature without r or s"),
this.r=new SM(g.r,16),this.s=new SM(g.s,16),void 0===g.recoveryParam?this.recoveryParam=null:this.recoveryParam=g.recoveryParam)}function yka(){this.place=0}function oU(g,c){var k=g[c.place++];if(!(128&k))return k;k&=15;for(var d=0,h=0,n=c.place;h<k;h++,n++)d<<=8,d|=g[n];return c.place=n,d}function w5(g){for(var c=0,k=g.length-1;!(g[c]||128&g[c+1])&&c<k;)c++;return 0===c?g:g.slice(c)}function pU(g,c){if(128>c)return g.push(c),void 0;var k=1+(Math.log(c)/Math.LN2>>>3);for(g.push(128|k);--k;)g.push(c>>>
(k<<3)&255);g.push(c)}function x5(g){return(g>>>24|g>>>8&65280|g<<8&16711680|(255&g)<<24)>>>0}function y5(g){return 1===g.length?"0"+g:g}function z5(g){return 7===g.length?"0"+g:6===g.length?"00"+g:5===g.length?"000"+g:4===g.length?"0000"+g:3===g.length?"00000"+g:2===g.length?"000000"+g:1===g.length?"0000000"+g:g}function TM(){this.pending=null;this.pendingTotal=0;this.blockSize=this.constructor.blockSize;this.outSize=this.constructor.outSize;this.hmacStrength=this.constructor.hmacStrength;this.padLength=
this.constructor.padLength/8;this.endian="big";this._delta8=this.blockSize/8;this._delta32=this.blockSize/32}function Qs(){if(!(this instanceof Qs))return new Qs;A5.call(this);this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209];this.k=zka;this.W=Array(160)}function zu(){if(!(this instanceof zu))return new zu;B5.call(this);this.h=[1779033703,3144134277,1013904242,2773480762,
1359893119,2600822924,528734635,1541459225];this.k=Aka;this.W=Array(64)}function nw(){if(!(this instanceof nw))return new nw;C5.call(this);this.h=[1732584193,4023233417,2562383102,271733878,3285377520];this.W=Array(80)}function gy(){if(!(this instanceof gy))return new gy;D5.call(this);this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}function hy(){if(!(this instanceof hy))return new hy;E5.call(this);this.h=[3418070365,3238371032,1654270250,914150663,2438529370,
812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}function ow(){if(!(this instanceof ow))return new ow;F5.call(this);this.h=[1732584193,4023233417,2562383102,271733878,3285377520];this.endian="little"}function G5(g,c,k,d){return 15>=g?c^k^d:31>=g?c&k|~c&d:47>=g?(c|~k)^d:63>=g?c&d|k&~d:c^(k|~d)}function QE(g,c,k){if(!(this instanceof QE))return new QE(g,c,k);this.Hash=g;this.blockSize=g.blockSize/8;this.outSize=g.outSize/8;this.outer=
this.inner=null;this._init(Bka.toArray(c,k))}function iy(g){if(!(this instanceof iy))return new iy(g);this.hash=g.hash;this.predResist=!!g.predResist;this.outLen=this.hash.outSize;this.minEntropy=g.minEntropy||this.hash.hmacStrength;this.V=this.K=this.reseedInterval=this._reseed=null;var c=kC.toArray(g.entropy,g.entropyEnc||"hex"),k=kC.toArray(g.nonce,g.nonceEnc||"hex");g=kC.toArray(g.pers,g.persEnc||"hex");H5(c.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits");
this._init(c,k,g)}function Au(g,c){this.type=g;this.p=new lC(c.p,16);this.red=c.prime?lC.red(c.prime):lC.mont(this.p);this.zero=(new lC(0)).toRed(this.red);this.one=(new lC(1)).toRed(this.red);this.two=(new lC(2)).toRed(this.red);this.n=c.n&&new lC(c.n,16);this.g=c.g&&this.pointFromJSON(c.g,c.gRed);this._wnafT1=Array(4);this._wnafT2=Array(4);this._wnafT3=Array(4);this._wnafT4=Array(4);this._bitLength=this.n?this.n.bitLength():0;g=this.n&&this.p.div(this.n);!g||0<g.cmpn(100)?this.redN=null:(this._maxwellTrick=
!0,this.redN=this.n.toRed(this.red))}function Rs(g,c){this.curve=g;this.type=c;this.precomputed=null}function Ss(g){RE.call(this,"short",g);this.a=(new $l(g.a,16)).toRed(this.red);this.b=(new $l(g.b,16)).toRed(this.red);this.tinv=this.two.redInvm();this.zeroA=0===this.a.fromRed().cmpn(0);this.threeA=0===this.a.fromRed().sub(this.p).cmpn(-3);this.endo=this._getEndomorphism(g);this._endoWnafT1=Array(4);this._endoWnafT2=Array(4)}function Yn(g,c,k,d){RE.BasePoint.call(this,g,"affine");null===c&&null===
k?(this.x=null,this.y=null,this.inf=!0):(this.x=new $l(c,16),this.y=new $l(k,16),d&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}function Fo(g,c,k,d){RE.BasePoint.call(this,g,"jacobian");null===c&&null===k&&null===d?(this.x=this.curve.one,this.y=this.curve.one,this.z=new $l(0)):(this.x=new $l(c,16),this.y=new $l(k,16),this.z=new $l(d,16));this.x.red||(this.x=this.x.toRed(this.curve.red));
this.y.red||(this.y=this.y.toRed(this.curve.red));this.z.red||(this.z=this.z.toRed(this.curve.red));this.zOne=this.z===this.curve.one}function SE(g){UM.call(this,"mont",g);this.a=(new TE(g.a,16)).toRed(this.red);this.b=(new TE(g.b,16)).toRed(this.red);this.i4=(new TE(4)).toRed(this.red).redInvm();this.two=(new TE(2)).toRed(this.red);this.a24=this.i4.redMul(this.a.redAdd(this.two))}function Zn(g,c,k){UM.BasePoint.call(this,g,"projective");null===c&&null===k?(this.x=this.curve.one,this.z=this.curve.zero):
(this.x=new TE(c,16),this.z=new TE(k,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}function pw(g){this.extended=this.mOneA=(this.twisted=1!=(0|g.a))&&-1==(0|g.a);VM.call(this,"edwards",g);this.a=(new jy(g.a,16)).umod(this.red.m);this.a=this.a.toRed(this.red);this.c=(new jy(g.c,16)).toRed(this.red);this.c2=this.c.redSqr();this.d=(new jy(g.d,16)).toRed(this.red);this.dd=this.d.redAdd(this.d);Cka(!this.twisted||0===this.c.fromRed().cmpn(1));
this.oneC=1==(0|g.c)}function ol(g,c,k,d,h){VM.BasePoint.call(this,g,"projective");null===c&&null===k&&null===d?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new jy(c,16),this.y=new jy(k,16),this.z=d?new jy(d,16):this.curve.one,this.t=h&&new jy(h,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),
this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}function I5(g){"short"===g.type?this.curve=new qU.short(g):"edwards"===g.type?this.curve=new qU.edwards(g):this.curve=new qU.mont(g);this.g=this.curve.g;this.n=this.curve.n;this.hash=g.hash;J5(this.g.validate(),"Invalid curve");J5(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}function cA(g,c){Object.defineProperty(rU,g,{configurable:!0,enumerable:!0,
get:function(){var k=new I5(c);return Object.defineProperty(rU,g,{configurable:!0,enumerable:!0,value:k}),k}})}function $n(g,c){this.ec=g;this.pub=this.priv=null;c.priv&&this._importPrivate(c.priv,c.privEnc);c.pub&&this._importPublic(c.pub,c.pubEnc)}function Ts(g){if(!(this instanceof Ts))return new Ts(g);"string"==typeof g&&(K5(sU.hasOwnProperty(g),"Unknown curve "+g),g=sU[g]);g instanceof sU.PresetCurve&&(g={curve:g});this.curve=g.curve.curve;this.n=this.curve.n;this.nh=this.n.ushrn(1);this.g=this.curve.g;
this.g=g.curve.g;this.g.precompute(g.curve.n.bitLength()+1);this.hash=g.hash||g.curve.hash}function pn(g,c){this.eddsa=g;this._secret=L5(c.secret);g.isPoint(c.pub)?this._pub=c.pub:this._pubBytes=L5(c.pub)}function dA(g,c){this.eddsa=g;"object"!=typeof c&&(c=Dka(c));Array.isArray(c)&&(c={R:c.slice(0,g.encodingLength),S:c.slice(g.encodingLength)});Eka(c.R&&c.S,"Signature without R or S");g.isPoint(c.R)&&(this._R=c.R);c.S instanceof Fka&&(this._S=c.S);this._Rencoded=Array.isArray(c.R)?c.R:c.Rencoded;
this._Sencoded=Array.isArray(c.S)?c.S:c.Sencoded}function Jq(g){if(Gka("ed25519"===g,"only tested with ed25519 so far"),!(this instanceof Jq))return new Jq(g);this.curve=g=Hka[g].curve;this.g=g.g;this.g.precompute(g.n.bitLength()+1);this.pointClass=g.point().constructor;this.encodingLength=Math.ceil(g.n.bitLength()/8);this.hash=Ika.sha512}function Us(g){(this||qn)._reporterState={obj:null,path:[],options:g||{},errors:[]}}function UE(g,c){(this||qn).path=g;this.rethrow(c)}function M5(){function g(n,
b){if(d.call(this||Jh,b),!h.isBuffer(n))return this.error("Input not Buffer"),void 0;(this||Jh).base=n;(this||Jh).offset=0;(this||Jh).length=n.length}function c(n,b){if(Array.isArray(n))(this||Jh).length=0,(this||Jh).value=n.map(function(e){return e instanceof c||(e=new c(e,b)),(this||Jh).length+=e.length,e},this||Jh);else if("number"==typeof n){if(!(0<=n&&255>=n))return b.error("non-byte EncoderBuffer value");(this||Jh).value=n;(this||Jh).length=1}else if("string"==typeof n)(this||Jh).value=n,(this||
Jh).length=h.byteLength(n);else{if(!h.isBuffer(n))return b.error("Unsupported type: "+typeof n);(this||Jh).value=n;(this||Jh).length=n.length}}if(N5)return WM;N5=!0;var k=zi,d=QH().Reporter,h=oi.Buffer;return k(g,d),WM.DecoderBuffer=g,g.prototype.save=function(){return{offset:(this||Jh).offset,reporter:d.prototype.save.call(this||Jh)}},g.prototype.restore=function(n){var b=new g((this||Jh).base);return b.offset=n.offset,b.length=(this||Jh).offset,(this||Jh).offset=n.offset,d.prototype.restore.call(this||
Jh,n.reporter),b},g.prototype.isEmpty=function(){return(this||Jh).offset===(this||Jh).length},g.prototype.readUInt8=function(n){return(this||Jh).offset+1<=(this||Jh).length?(this||Jh).base.readUInt8((this||Jh).offset++,!0):this.error(n||"DecoderBuffer overrun")},g.prototype.skip=function(n,b){if(!((this||Jh).offset+n<=(this||Jh).length))return this.error(b||"DecoderBuffer overrun");b=new g((this||Jh).base);return b._reporterState=(this||Jh)._reporterState,b.offset=(this||Jh).offset,b.length=(this||
Jh).offset+n,(this||Jh).offset+=n,b},g.prototype.raw=function(n){return(this||Jh).base.slice(n?n.offset:(this||Jh).offset,(this||Jh).length)},WM.EncoderBuffer=c,c.prototype.join=function(n,b){return n||(n=new h((this||Jh).length)),b||(b=0),0===(this||Jh).length||(Array.isArray((this||Jh).value)?(this||Jh).value.forEach(function(e){e.join(n,b);b+=e.length}):("number"==typeof(this||Jh).value?n[b]=(this||Jh).value:"string"==typeof(this||Jh).value?n.write((this||Jh).value,b):h.isBuffer((this||Jh).value)&&
(this||Jh).value.copy(n,b),b+=(this||Jh).length)),n},WM}function QH(){if(O5)return tU;O5=!0;var g=tU;return g.Reporter=P5.Reporter,g.DecoderBuffer=M5().DecoderBuffer,g.EncoderBuffer=M5().EncoderBuffer,g.Node=function(){function c(a,f){var m={};(this||Yg)._baseState=m;m.enc=a;m.parent=f||null;m.children=null;m.tag=null;m.args=null;m.reverseArgs=null;m.choice=null;m.optional=!1;m.any=!1;m.obj=!1;m.use=null;m.useDecoder=null;m.key=null;m.default=null;m.explicit=null;m.implicit=null;m.contains=null;m.parent||
(m.children=[],this._wrap())}if(Q5)return uU;Q5=!0;var k=QH().Reporter,d=QH().EncoderBuffer,h=QH().DecoderBuffer,n=Vs,b="seq seqof set setof objid bool gentime utctime null_ enum int objDesc bitstr bmpstr charstr genstr graphstr ia5str iso646str numstr octstr printstr t61str unistr utf8str videostr".split(" "),e="key obj use optional explicit implicit def choice any contains".split(" ").concat(b);uU=c;var l="enc parent children tag args reverseArgs choice optional any obj use alteredUse key default explicit implicit contains".split(" ");
return c.prototype.clone=function(){var a=(this||Yg)._baseState,f={};l.forEach(function(r){f[r]=a[r]});var m=new (this||Yg).constructor(f.parent);return m._baseState=f,m},c.prototype._wrap=function(){var a=(this||Yg)._baseState;e.forEach(function(f){(this||Yg)[f]=function(){var m=new (this||Yg).constructor(this||Yg);return a.children.push(m),m[f].apply(m,arguments)}},this||Yg)},c.prototype._init=function(a){var f=(this||Yg)._baseState;n(null===f.parent);a.call(this||Yg);f.children=f.children.filter(function(m){return m._baseState.parent===
(this||Yg)},this||Yg);n.equal(f.children.length,1,"Root node can have only one child")},c.prototype._useArgs=function(a){var f=(this||Yg)._baseState,m=a.filter(function(r){return r instanceof(this||Yg).constructor},this||Yg);a=a.filter(function(r){return!(r instanceof(this||Yg).constructor)},this||Yg);0!==m.length&&(n(null===f.children),f.children=m,m.forEach(function(r){r._baseState.parent=this||Yg},this||Yg));0!==a.length&&(n(null===f.args),f.args=a,f.reverseArgs=a.map(function(r){if("object"!=
typeof r||r.constructor!==Object)return r;var v={};return Object.keys(r).forEach(function(x){x==(0|x)&&(x|=0);v[r[x]]=x}),v}))},"_peekTag _decodeTag _use _decodeStr _decodeObjid _decodeTime _decodeNull _decodeInt _decodeBool _decodeList _encodeComposite _encodeStr _encodeObjid _encodeTime _encodeNull _encodeInt _encodeBool".split(" ").forEach(function(a){c.prototype[a]=function(){throw Error(a+" not implemented for encoding: "+(this||Yg)._baseState.enc);}}),b.forEach(function(a){c.prototype[a]=function(){var f=
(this||Yg)._baseState,m=Array.prototype.slice.call(arguments);return n(null===f.tag),f.tag=a,this._useArgs(m),this||Yg}}),c.prototype.use=function(a){n(a);var f=(this||Yg)._baseState;return n(null===f.use),f.use=a,this||Yg},c.prototype.optional=function(){return(this||Yg)._baseState.optional=!0,this||Yg},c.prototype.def=function(a){var f=(this||Yg)._baseState;return n(null===f.default),f.default=a,f.optional=!0,this||Yg},c.prototype.explicit=function(a){var f=(this||Yg)._baseState;return n(null===
f.explicit&&null===f.implicit),f.explicit=a,this||Yg},c.prototype.implicit=function(a){var f=(this||Yg)._baseState;return n(null===f.explicit&&null===f.implicit),f.implicit=a,this||Yg},c.prototype.obj=function(){var a=(this||Yg)._baseState,f=Array.prototype.slice.call(arguments);return a.obj=!0,0!==f.length&&this._useArgs(f),this||Yg},c.prototype.key=function(a){var f=(this||Yg)._baseState;return n(null===f.key),f.key=a,this||Yg},c.prototype.any=function(){return(this||Yg)._baseState.any=!0,this||
Yg},c.prototype.choice=function(a){var f=(this||Yg)._baseState;return n(null===f.choice),f.choice=a,this._useArgs(Object.keys(a).map(function(m){return a[m]})),this||Yg},c.prototype.contains=function(a){var f=(this||Yg)._baseState;return n(null===f.use),f.contains=a,this||Yg},c.prototype._decode=function(a,f){var m=(this||Yg)._baseState;if(null===m.parent)return a.wrapResult(m.children[0]._decode(a,f));var r,v=m.default,x=!0,y=null;if(null!==m.key&&(y=a.enterKey(m.key)),m.optional){var E=null;if(null!==
m.explicit?E=m.explicit:null!==m.implicit?E=m.implicit:null!==m.tag&&(E=m.tag),null!==E||m.any){if(x=this._peekTag(a,E,m.any),a.isError(x))return x}else{var F=a.save();try{null===m.choice?this._decodeGeneric(m.tag,a,f):this._decodeChoice(a,f),x=!0}catch(J){x=!1}a.restore(F)}}if(m.obj&&x&&(r=a.enterObject()),x){if(null!==m.explicit){E=this._decodeTag(a,m.explicit);if(a.isError(E))return E;a=E}E=a.offset;if(null===m.use&&null===m.choice){m.any&&(F=a.save());var I=this._decodeTag(a,null!==m.implicit?
m.implicit:m.tag,m.any);if(a.isError(I))return I;m.any?v=a.raw(F):a=I}if(f&&f.track&&null!==m.tag&&f.track(a.path(),E,a.length,"tagged"),f&&f.track&&null!==m.tag&&f.track(a.path(),a.offset,a.length,"content"),v=m.any?v:null===m.choice?this._decodeGeneric(m.tag,a,f):this._decodeChoice(a,f),a.isError(v))return v;(m.any||null!==m.choice||null===m.children||m.children.forEach(function(J){J._decode(a,f)}),!m.contains||"octstr"!==m.tag&&"bitstr"!==m.tag)||(v=new h(v),v=this._getUse(m.contains,a._reporterState.obj)._decode(v,
f))}return m.obj&&x&&(v=a.leaveObject(r)),null===m.key||null===v&&!0!==x?null!==y&&a.exitKey(y):a.leaveKey(y,m.key,v),v},c.prototype._decodeGeneric=function(a,f,m){var r=(this||Yg)._baseState;return"seq"===a||"set"===a?null:"seqof"===a||"setof"===a?this._decodeList(f,a,r.args[0],m):/str$/.test(a)?this._decodeStr(f,a,m):"objid"===a&&r.args?this._decodeObjid(f,r.args[0],r.args[1],m):"objid"===a?this._decodeObjid(f,null,null,m):"gentime"===a||"utctime"===a?this._decodeTime(f,a,m):"null_"===a?this._decodeNull(f,
m):"bool"===a?this._decodeBool(f,m):"objDesc"===a?this._decodeStr(f,a,m):"int"===a||"enum"===a?this._decodeInt(f,r.args&&r.args[0],m):null!==r.use?this._getUse(r.use,f._reporterState.obj)._decode(f,m):f.error("unknown tag: "+a)},c.prototype._getUse=function(a,f){var m=(this||Yg)._baseState;return m.useDecoder=this._use(a,f),n(null===m.useDecoder._baseState.parent),m.useDecoder=m.useDecoder._baseState.children[0],m.implicit!==m.useDecoder._baseState.implicit&&(m.useDecoder=m.useDecoder.clone(),m.useDecoder._baseState.implicit=
m.implicit),m.useDecoder},c.prototype._decodeChoice=function(a,f){var m=(this||Yg)._baseState,r=null,v=!1;return Object.keys(m.choice).some(function(x){var y=a.save(),E=m.choice[x];try{var F=E._decode(a,f);if(a.isError(F))return!1;r={type:x,value:F};v=!0}catch(I){return a.restore(y),!1}return!0},this||Yg),v?r:a.error("Choice not matched")},c.prototype._createEncoderBuffer=function(a){return new d(a,(this||Yg).reporter)},c.prototype._encode=function(a,f,m){var r=(this||Yg)._baseState;if(null===r.default||
r.default!==a)if(a=this._encodeValue(a,f,m),void 0!==a&&!this._skipDefault(a,f,m))return a},c.prototype._encodeValue=function(a,f,m){var r=(this||Yg)._baseState;if(null===r.parent)return r.children[0]._encode(a,f||new k);var v=null;if((this||Yg).reporter=f,r.optional&&void 0===a){if(null===r.default)return;a=r.default}var x=null,y=!1;if(r.any)v=this._createEncoderBuffer(a);else if(r.choice)v=this._encodeChoice(a,f);else if(r.contains)x=this._getUse(r.contains,m)._encode(a,f),y=!0;else if(r.children)x=
r.children.map(function(F){if("null_"===F._baseState.tag)return F._encode(null,f,a);if(null===F._baseState.key)return f.error("Child should have a key");var I=f.enterKey(F._baseState.key);if("object"!=typeof a)return f.error("Child expected, but input is not object");F=F._encode(a[F._baseState.key],f,a);return f.leaveKey(I),F},this||Yg).filter(function(F){return F}),x=this._createEncoderBuffer(x);else if("seqof"===r.tag||"setof"===r.tag){if(!r.args||1!==r.args.length)return f.error("Too many args for : "+
r.tag);if(!Array.isArray(a))return f.error("seqof/setof, but data is not Array");x=this.clone();x._baseState.implicit=null;x=this._createEncoderBuffer(a.map(function(F){return this._getUse((this||Yg)._baseState.args[0],a)._encode(F,f)},x))}else null!==r.use?v=this._getUse(r.use,m)._encode(a,f):(x=this._encodePrimitive(r.tag,a),y=!0);if(!r.any&&null===r.choice){m=null!==r.implicit?r.implicit:r.tag;var E=null===r.implicit?"universal":"context";null===m?null===r.use&&f.error("Tag could be omitted only for .use()"):
null===r.use&&(v=this._encodeComposite(m,y,E,x))}return null!==r.explicit&&(v=this._encodeComposite(r.explicit,!1,"context",v)),v},c.prototype._encodeChoice=function(a,f){var m=(this||Yg)._baseState,r=m.choice[a.type];return r||n(!1,a.type+" not found in "+JSON.stringify(Object.keys(m.choice))),r._encode(a.value,f)},c.prototype._encodePrimitive=function(a,f){var m=(this||Yg)._baseState;if(/str$/.test(a))return this._encodeStr(f,a);if("objid"===a&&m.args)return this._encodeObjid(f,m.reverseArgs[0],
m.args[1]);if("objid"===a)return this._encodeObjid(f,null,null);if("gentime"===a||"utctime"===a)return this._encodeTime(f,a);if("null_"===a)return this._encodeNull();if("int"===a||"enum"===a)return this._encodeInt(f,m.args&&m.reverseArgs[0]);if("bool"===a)return this._encodeBool(f);if("objDesc"===a)return this._encodeStr(f,a);throw Error("Unsupported tag: "+a);},c.prototype._isNumstr=function(a){return/^[0-9 ]*$/.test(a)},c.prototype._isPrintstr=function(a){return/^[A-Za-z0-9 '\(\)\+,\-\.\/:=\?]*$/.test(a)},
uU}(),tU}function R5(){if(S5)return vU;S5=!0;var g=vU;return g._reverse=function(c){var k={};return Object.keys(c).forEach(function(d){(0|d)==d&&(d|=0);k[c[d]]=d}),k},g.der=function(){if(T5)return eA;T5=!0;var c=R5();return eA.tagClass={0:"universal",1:"application",2:"context",3:"private"},eA.tagClassByName=c._reverse(eA.tagClass),eA.tag={0:"end",1:"bool",2:"int",3:"bitstr",4:"octstr",5:"null_",6:"objid",7:"objDesc",8:"external",9:"real",10:"enum",11:"embed",12:"utf8str",13:"relativeOid",16:"seq",
17:"set",18:"numstr",19:"printstr",20:"t61str",21:"videostr",22:"ia5str",23:"utctime",24:"gentime",25:"graphstr",26:"iso646str",27:"genstr",28:"unistr",29:"charstr",30:"bmpstr"},eA.tagByName=c._reverse(eA.tag),eA}(),vU}function U5(){function g(a){(this||fA).enc="der";(this||fA).name=a.name;(this||fA).entity=a;(this||fA).tree=new c;(this||fA).tree._init(a.body)}function c(a){b.Node.call(this||fA,"der",a)}function k(a,f){var m=a.readUInt8(f);if(a.isError(m))return m;var r=l.tagClass[m>>6],v=0==(32&
m);if(31==(31&m)){var x=m;for(m=0;128==(128&x);){if(x=a.readUInt8(f),a.isError(x))return x;m<<=7;m|=127&x}}else m&=31;return{cls:r,primitive:v,tag:m,tagStr:l.tag[m]}}function d(a,f,m){var r=a.readUInt8(m);if(a.isError(r))return r;if(!f&&128===r)return null;if(0==(128&r))return r;f=127&r;if(4<f)return a.error("length octect is too long");for(var v=r=0;v<f;v++){r<<=8;var x=a.readUInt8(m);if(a.isError(x))return x;r|=x}return r}if(V5)return wU;V5=!0;var h=zi,n=XM(),b=n.base,e=n.bignum,l=n.constants.der;
return wU=g,g.prototype.decode=function(a,f){return a instanceof b.DecoderBuffer||(a=new b.DecoderBuffer(a,f)),(this||fA).tree._decode(a,f)},h(c,b.Node),c.prototype._peekTag=function(a,f,m){if(a.isEmpty())return!1;var r=a.save(),v=k(a,'Failed to peek tag: "'+f+'"');return a.isError(v)?v:(a.restore(r),v.tag===f||v.tagStr===f||v.tagStr+"of"===f||m)},c.prototype._decodeTag=function(a,f,m){var r=k(a,'Failed to decode tag of "'+f+'"');if(a.isError(r))return r;var v=d(a,r.primitive,'Failed to get length of "'+
f+'"');if(a.isError(v))return v;if(!m&&r.tag!==f&&r.tagStr!==f&&r.tagStr+"of"!==f)return a.error('Failed to match tag: "'+f+'"');if(r.primitive||null!==v)return a.skip(v,'Failed to match body of: "'+f+'"');m=a.save();r=this._skipUntilEnd(a,'Failed to skip indefinite length body: "'+(this||fA).tag+'"');return a.isError(r)?r:(v=a.offset-m.offset,a.restore(m),a.skip(v,'Failed to match body of: "'+f+'"'))},c.prototype._skipUntilEnd=function(a,f){for(;;){var m=k(a,f);if(a.isError(m))return m;var r,v=d(a,
m.primitive,f);if(a.isError(v))return v;if(r=m.primitive||null!==v?a.skip(v):this._skipUntilEnd(a,f),a.isError(r))return r;if("end"===m.tagStr)break}},c.prototype._decodeList=function(a,f,m,r){for(f=[];!a.isEmpty();){var v=this._peekTag(a,"end");if(a.isError(v))return v;var x=m.decode(a,"der",r);if(a.isError(x)&&v)break;f.push(x)}return f},c.prototype._decodeStr=function(a,f){if("bitstr"===f)return f=a.readUInt8(),a.isError(f)?f:{unused:f,data:a.raw()};if("bmpstr"===f){f=a.raw();if(1==f.length%2)return a.error("Decoding of string type: bmpstr length mismatch");
a="";for(var m=0;m<f.length/2;m++)a+=String.fromCharCode(f.readUInt16BE(2*m));return a}return"numstr"===f?(f=a.raw().toString("ascii"),this._isNumstr(f)?f:a.error("Decoding of string type: numstr unsupported characters")):"octstr"===f||"objDesc"===f?a.raw():"printstr"===f?(f=a.raw().toString("ascii"),this._isPrintstr(f)?f:a.error("Decoding of string type: printstr unsupported characters")):/str$/.test(f)?a.raw().toString():a.error("Decoding of string type: "+f+" unsupported")},c.prototype._decodeObjid=
function(a,f,m){for(var r=[],v=0;!a.isEmpty();){var x=a.readUInt8();v<<=7;v|=127&x;0==(128&x)&&(r.push(v),v=0)}128&x&&r.push(v);a=r[0]/40|0;v=r[0]%40;if(m=m?r:[a,v].concat(r.slice(1)),f)r=f[m.join(" ")],void 0===r&&(r=f[m.join(".")]),void 0!==r&&(m=r);return m},c.prototype._decodeTime=function(a,f){var m=a.raw().toString();if("gentime"===f){a=0|m.slice(0,4);f=0|m.slice(4,6);var r=0|m.slice(6,8),v=0|m.slice(8,10),x=0|m.slice(10,12);m=0|m.slice(12,14)}else{if("utctime"!==f)return a.error("Decoding "+
f+" time is not supported yet");a=0|m.slice(0,2);f=0|m.slice(2,4);r=0|m.slice(4,6);v=0|m.slice(6,8);x=0|m.slice(8,10);m=0|m.slice(10,12);a=70>a?2E3+a:1900+a}return Date.UTC(a,f-1,r,v,x,m,0)},c.prototype._decodeNull=function(a){return null},c.prototype._decodeBool=function(a){var f=a.readUInt8();return a.isError(f)?f:0!==f},c.prototype._decodeInt=function(a,f){a=a.raw();a=new e(a);return f&&(a=f[a.toString(10)]||a),a},c.prototype._use=function(a,f){return"function"==typeof a&&(a=a(f)),a._getDecoder("der").tree},
wU}function Jka(){if(W5)return xU;W5=!0;var g=xU;return g.der=U5(),g.pem=function(){function c(n){h.call(this||yU,n);(this||yU).enc="pem"}if(X5)return zU;X5=!0;var k=zi,d=oi.Buffer,h=U5();return k(c,h),zU=c,c.prototype.decode=function(n,b){n=n.toString().split(/[\r\n]+/g);for(var e=b.label.toUpperCase(),l=/^-----(BEGIN|END) ([^-]+)-----$/,a=-1,f=-1,m=0;m<n.length;m++){var r=n[m].match(l);if(null!==r&&r[2]===e){if(-1!==a){if("END"!==r[1])break;f=m;break}if("BEGIN"!==r[1])break;a=m}}if(-1===a||-1===
f)throw Error("PEM section not found for: "+e);n=n.slice(a+1,f).join("");n.replace(/[^a-z0-9\+\/=]+/gi,"");n=new d(n,"base64");return h.prototype.decode.call(this||yU,n,b)},zU}(),xU}function Y5(){function g(l){(this||rn).enc="der";(this||rn).name=l.name;(this||rn).entity=l;(this||rn).tree=new c;(this||rn).tree._init(l.body)}function c(l){b.Node.call(this||rn,"der",l)}function k(l){return 10>l?"0"+l:l}if(Z5)return AU;Z5=!0;var d=zi,h=oi.Buffer,n=XM(),b=n.base,e=n.constants.der;return AU=g,g.prototype.encode=
function(l,a){return(this||rn).tree._encode(l,a).join()},d(c,b.Node),c.prototype._encodeComposite=function(l,a,f,m){var r;a:{var v=l;l=(this||rn).reporter;"seqof"===v?v="seq":"setof"===v&&(v="set");if(e.tagByName.hasOwnProperty(v))v=e.tagByName[v];else if("number"!=typeof v||(0|v)!==v){f=l.error("Unknown tag: "+v);break a}31<=v?f=l.error("Multi-octet tag encoding unsupported"):(a||(v|=32),f=v|e.tagClassByName[f||"universal"]<<6)}if(128>m.length)return(r=new h(2))[0]=f,r[1]=m.length,this._createEncoderBuffer([r,
m]);l=1;for(a=m.length;256<=a;a>>=8)l++;(r=new h(2+l))[0]=f;r[1]=128|l;a=1+l;for(f=m.length;0<f;a--,f>>=8)r[a]=255&f;return this._createEncoderBuffer([r,m])},c.prototype._encodeStr=function(l,a){if("bitstr"===a)return this._createEncoderBuffer([0|l.unused,l.data]);if("bmpstr"===a){a=new h(2*l.length);for(var f=0;f<l.length;f++)a.writeUInt16BE(l.charCodeAt(f),2*f);return this._createEncoderBuffer(a)}return"numstr"===a?this._isNumstr(l)?this._createEncoderBuffer(l):(this||rn).reporter.error("Encoding of string type: numstr supports only digits and space"):
"printstr"===a?this._isPrintstr(l)?this._createEncoderBuffer(l):(this||rn).reporter.error("Encoding of string type: printstr supports only latin upper and lower case letters, digits, space, apostrophe, left and rigth parenthesis, plus sign, comma, hyphen, dot, slash, colon, equal sign, question mark"):/str$/.test(a)||"objDesc"===a?this._createEncoderBuffer(l):(this||rn).reporter.error("Encoding of string type: "+a+" unsupported")},c.prototype._encodeObjid=function(l,a,f){if("string"==typeof l){if(!a)return(this||
rn).reporter.error("string objid given, but no values map found");if(!a.hasOwnProperty(l))return(this||rn).reporter.error("objid not found in values map");l=a[l].split(/[\s\.]+/g);for(a=0;a<l.length;a++)l[a]|=0}else if(Array.isArray(l))for(l=l.slice(),a=0;a<l.length;a++)l[a]|=0;if(!Array.isArray(l))return(this||rn).reporter.error("objid() should be either array or string, got: "+JSON.stringify(l));if(!f){if(40<=l[1])return(this||rn).reporter.error("Second objid identifier OOB");l.splice(0,2,40*l[0]+
l[1])}var m=0;for(a=0;a<l.length;a++)for(f=l[a],m++;128<=f;f>>=7)m++;m=new h(m);var r=m.length-1;for(a=l.length-1;0<=a;a--)for(f=l[a],m[r--]=127&f;0<(f>>=7);)m[r--]=128|127&f;return this._createEncoderBuffer(m)},c.prototype._encodeTime=function(l,a){var f;l=new Date(l);return"gentime"===a?f=[k(l.getFullYear()),k(l.getUTCMonth()+1),k(l.getUTCDate()),k(l.getUTCHours()),k(l.getUTCMinutes()),k(l.getUTCSeconds()),"Z"].join(""):"utctime"===a?f=[k(l.getFullYear()%100),k(l.getUTCMonth()+1),k(l.getUTCDate()),
k(l.getUTCHours()),k(l.getUTCMinutes()),k(l.getUTCSeconds()),"Z"].join(""):(this||rn).reporter.error("Encoding "+a+" time is not supported yet"),this._encodeStr(f,"octstr")},c.prototype._encodeNull=function(){return this._createEncoderBuffer("")},c.prototype._encodeInt=function(l,a){if("string"==typeof l){if(!a)return(this||rn).reporter.error("String int or enum given, but no values map");if(!a.hasOwnProperty(l))return(this||rn).reporter.error("Values map doesn't contain: "+JSON.stringify(l));l=a[l]}"number"==
typeof l||h.isBuffer(l)||(a=l.toArray(),!l.sign&&128&a[0]&&a.unshift(0),l=new h(a));if(h.isBuffer(l)){var f=l.length;0===l.length&&f++;f=new h(f);return l.copy(f),0===l.length&&(f[0]=0),this._createEncoderBuffer(f)}if(128>l)return this._createEncoderBuffer(l);if(256>l)return this._createEncoderBuffer([0,l]);f=1;for(a=l;256<=a;a>>=8)f++;for(a=(f=Array(f)).length-1;0<=a;a--)f[a]=255&l,l>>=8;return 128&f[0]&&f.unshift(0),this._createEncoderBuffer(new h(f))},c.prototype._encodeBool=function(l){return this._createEncoderBuffer(l?
255:0)},c.prototype._use=function(l,a){return"function"==typeof l&&(l=l(a)),l._getEncoder("der").tree},c.prototype._skipDefault=function(l,a,f){var m=(this||rn)._baseState;if(null===m.default)return!1;l=l.join();if(void 0===m.defaultBuffer&&(m.defaultBuffer=this._encodeValue(m.default,a,f).join()),l.length!==m.defaultBuffer.length)return!1;for(a=0;a<l.length;a++)if(l[a]!==m.defaultBuffer[a])return!1;return!0},AU}function Kka(){if($5)return BU;$5=!0;var g=BU;return g.der=Y5(),g.pem=function(){function c(h){d.call(this||
CU,h);(this||CU).enc="pem"}if(a6)return DU;a6=!0;var k=zi,d=Y5();return k(c,d),DU=c,c.prototype.encode=function(h,n){h=d.prototype.encode.call(this||CU,h).toString("base64");for(var b=["-----BEGIN "+n.label+"-----"],e=0;e<h.length;e+=64)b.push(h.slice(e,e+64));return b.push("-----END "+n.label+"-----"),b.join("\n")},DU}(),BU}function XM(){if(b6)return EU;b6=!0;var g=EU;return g.bignum=Pm,g.define=function(){function c(h,n){(this||Br).name=h;(this||Br).body=n;(this||Br).decoders={};(this||Br).encoders=
{}}if(c6)return FU;c6=!0;var k=XM(),d=zi;return FU.define=function(h,n){return new c(h,n)},c.prototype._createNamed=function(h){try{var n=mC.runInThisContext("(function "+(this||Br).name+"(entity) {\n  this._initNamed(entity);\n})")}catch(b){n=function(e){this._initNamed(e)}}return d(n,h),n.prototype._initNamed=function(b){h.call(this||Br,b)},new n(this||Br)},c.prototype._getDecoder=function(h){return h=h||"der",(this||Br).decoders.hasOwnProperty(h)||((this||Br).decoders[h]=this._createNamed(k.decoders[h])),
(this||Br).decoders[h]},c.prototype.decode=function(h,n,b){return this._getDecoder(n).decode(h,b)},c.prototype._getEncoder=function(h){return h=h||"der",(this||Br).encoders.hasOwnProperty(h)||((this||Br).encoders[h]=this._createNamed(k.encoders[h])),(this||Br).encoders[h]},c.prototype.encode=function(h,n,b){return this._getEncoder(n).encode(h,b)},FU}().define,g.base=QH(),g.constants=R5(),g.decoders=Jka(),g.encoders=Kka(),EU}function VE(g){var c;"object"!=typeof g||GU.isBuffer(g)||(c=g.passphrase,
g=g.key);"string"==typeof g&&(g=GU.from(g));var k=c;g=g.toString();var d=g.match(Lka);if(d){var h="aes"+d[1],n=YM.from(d[2],"hex");var b=YM.from(d[3].replace(/[\r\n]/g,""),"base64");d=RH(k,n.slice(0,8),parseInt(d[1],10)).key;k=[];h=Cr.createDecipheriv(h,d,n);k.push(h.update(b));k.push(h.final());b=YM.concat(k)}else b=g.match(Mka),b=new YM(b[2].replace(/[\r\n]/g,""),"base64");g=g.match(Nka)[1];switch(g){case "CERTIFICATE":var e=Kq.certificate.decode(b,"der").tbsCertificate.subjectPublicKeyInfo;case "PUBLIC KEY":switch(e||
(e=Kq.PublicKey.decode(b,"der")),c=e.algorithm.algorithm.join(".")){case "1.2.840.113549.1.1.1":return Kq.RSAPublicKey.decode(e.subjectPublicKey.data,"der");case "1.2.840.10045.2.1":return e.subjectPrivateKey=e.subjectPublicKey,{type:"ec",data:e};case "1.2.840.10040.4.1":return e.algorithm.params.pub_key=Kq.DSAparam.decode(e.subjectPublicKey.data,"der"),{type:"dsa",data:e.algorithm.params};default:throw Error("unknown key id "+c);}case "ENCRYPTED PRIVATE KEY":k=Kq.EncryptedPrivateKey.decode(b,"der"),
b=c,h=k.algorithm.decrypt.kde.kdeparams.salt,n=parseInt(k.algorithm.decrypt.kde.kdeparams.iters.toString(),10),e=Oka[k.algorithm.decrypt.cipher.algo.join(".")],g=k.algorithm.decrypt.cipher.iv,c=k.subjectPrivateKey,k=parseInt(e.split("-")[1],10)/8,b=Pka.pbkdf2Sync(b,h,n,k,"sha1"),e=Qka.createDecipheriv(e,b,g),g=[],b=(g.push(e.update(c)),g.push(e.final()),GU.concat(g));case "PRIVATE KEY":switch(c=(e=Kq.PrivateKey.decode(b,"der")).algorithm.algorithm.join(".")){case "1.2.840.113549.1.1.1":return Kq.RSAPrivateKey.decode(e.subjectPrivateKey,
"der");case "1.2.840.10045.2.1":return{curve:e.algorithm.curve,privateKey:Kq.ECPrivateKey.decode(e.subjectPrivateKey,"der").privateKey};case "1.2.840.10040.4.1":return e.algorithm.params.priv_key=Kq.DSAparam.decode(e.subjectPrivateKey,"der"),{type:"dsa",params:e.algorithm.params};default:throw Error("unknown key id "+c);}case "RSA PUBLIC KEY":return Kq.RSAPublicKey.decode(b,"der");case "RSA PRIVATE KEY":return Kq.RSAPrivateKey.decode(b,"der");case "DSA PRIVATE KEY":return{type:"dsa",params:Kq.DSAPrivateKey.decode(b,
"der")};case "EC PRIVATE KEY":return{curve:(b=Kq.ECPrivateKey.decode(b,"der")).parameters.value,privateKey:b.privateKey};default:throw Error("unknown key type "+g);}}function d6(g,c,k,d){if((g=new lp(g.toArray())).length<c.byteLength()){var h=new lp(c.byteLength()-g.length);h.fill(0);g=lp.concat([h,g])}h=k.length;k=(k=HU(k,c)).mod(c);k=new lp(k.toArray());k.length<c.byteLength()&&(c=new lp(c.byteLength()-k.length),c.fill(0),k=lp.concat([c,k]));c=k;k=new lp(h);k.fill(1);h=new lp(h);return h.fill(0),
h=nC(d,h).update(k).update(new lp([0])).update(g).update(c).digest(),k=nC(d,h).update(k).digest(),{k:h=nC(d,h).update(k).update(new lp([1])).update(g).update(c).digest(),v:nC(d,h).update(k).digest()}}function HU(g,c){var k=new ZM(g);g=(g.length<<3)-c.bitLength();return 0<g&&k.ishrn(g),k}function e6(g,c,k){var d;do{for(d=new lp(0);8*d.length<g.bitLength();)c.v=nC(k,c.k).update(c.v).digest(),d=lp.concat([d,c.v]);d=HU(d,g);c.k=nC(k,c.k).update(c.v).update(new lp([0])).digest();c.v=nC(k,c.k).update(c.v).digest()}while(-1!==
d.cmp(g));return d}function f6(g,c){if(0>=g.cmpn(0))throw Error("invalid sig");if(g.cmp(c)>=c)throw Error("invalid sig");}function SH(g){$M.Writable.call(this||am);g=oC[g];if(!g)throw Error("Unknown message digest");(this||am)._hashType=g.hash;(this||am)._hash=g6(g.hash);(this||am)._tag=g.id;(this||am)._signType=g.sign}function TH(g){$M.Writable.call(this||am);g=oC[g];if(!g)throw Error("Unknown message digest");(this||am)._hash=g6(g.hash);(this||am)._tag=g.id;(this||am)._signType=g.sign}function h6(g){return new SH(g)}
function i6(g){return new TH(g)}function pC(g){(this||sn).curveType=Dr[g];(this||sn).curveType||((this||sn).curveType={name:g});(this||sn).curve=new Rka.ec((this||sn).curveType.name);(this||sn).keys=void 0}function IU(g,c,k){Array.isArray(g)||(g=g.toArray());g=new ky(g);k&&g.length<k&&(k=new ky(k-g.length),k.fill(0),g=ky.concat([k,g]));return c?g.toString(c):g}function j6(){throw Error("secure random number generation not supported by this browser\nuse chrome, FireFox or Internet Explorer 11");}function k6(g,
c){if("number"!=typeof g||g!=g)throw new TypeError("offset must be a number");if(g>l6||0>g)throw new TypeError("offset must be a uint32");if(g>m6||g>c)throw new RangeError("offset out of range");}function n6(g,c,k){if("number"!=typeof g||g!=g)throw new TypeError("size must be a number");if(g>l6||0>g)throw new TypeError("size must be a uint32");if(g+c>k||g>m6)throw new RangeError("buffer too small");}function o6(g,c,k,d){return JU.browser?(k=new Uint8Array(g.buffer,c,k),KU.getRandomValues(k),d?(JU.nextTick(function(){d(null,
g)}),void 0):g):d?(p6(k,function(h,n){if(h)return d(h);n.copy(g,c);d(null,g)}),void 0):(p6(k).copy(g,c),g)}function Ska(g){var c=[];g.replace(/[a-fA-F0-9]{2}/g,function(k){c.push(parseInt(k,16))});return c}function aN(g){return g&&g.__esModule?g:{default:g}}function q6(g,c){g=g||[];c=c||{};try{return new Blob(g,c)}catch(h){if("TypeError"!==h.name)throw h;for(var k=new ("undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof MSBlobBuilder?MSBlobBuilder:"undefined"!==typeof MozBlobBuilder?
MozBlobBuilder:WebKitBlobBuilder),d=0;d<g.length;d+=1)k.append(g[d]);return k.getBlob(c.type)}}function r6(g){for(var c=g.length,k=new ArrayBuffer(c),d=new Uint8Array(k),h=0;h<c;h++)d[h]=g.charCodeAt(h);return k}function s6(g,c){return q6([r6(g)],{type:c})}function t6(g,c){var k=new FileReader,d="function"===typeof k.readAsBinaryString;k.onloadend=function(h){var n=h.target.result||"";if(d)return c(n);h="";n=new Uint8Array(n);for(var b=n.byteLength,e=0;e<b;e++)h+=String.fromCharCode(n[e]);c(h)};d?
k.readAsBinaryString(g):k.readAsArrayBuffer(g)}function u6(g,c){t6(g,function(k){c(k)})}function Tka(g,c,k){return g.webkitSlice?g.webkitSlice(c,k):g.slice(c,k)}function Uka(g,c,k,d,h){if(0<k||d<c.size)c=Tka(c,k,d);v6.readAsArrayBuffer(c,function(n){g.append(n);h()})}function Vka(g,c,k,d,h){if(0<k||d<c.length)c=c.substring(k,d);g.appendBinary(c);h()}function bN(g){return g&&"object"===typeof g&&"default"in g?g["default"]:g}function UH(g){var c;if(!g||"object"!==typeof g)return g;if(Array.isArray(g)){var k=
[];var d=0;for(c=g.length;d<c;d++)k[d]=UH(g[d]);return k}if(g instanceof Date)return g.toISOString();if("undefined"!==typeof ArrayBuffer&&g instanceof ArrayBuffer||"undefined"!==typeof Blob&&g instanceof Blob)return g instanceof ArrayBuffer?"function"===typeof g.slice?g=g.slice(0):(d=new ArrayBuffer(g.byteLength),k=new Uint8Array(d),g=new Uint8Array(g),k.set(g),g=d):(d=g.size,k=g.type,g="function"===typeof g.slice?g.slice(0,d,k):g.webkitSlice(0,d,k)),g;k=Object.getPrototypeOf(g);null===k?k=!0:(k=
k.constructor,k="function"==typeof k&&k instanceof k&&w6.call(k)==Wka);if(!k)return g;k={};for(d in g)Object.prototype.hasOwnProperty.call(g,d)&&(c=UH(g[d]),"undefined"!==typeof c&&(k[d]=c));return k}function x6(g){var c=!1;return LU(function(k){if(c)throw Error("once called more than once");c=!0;g.apply(this,k)})}function y6(g){return LU(function(c){c=UH(c);var k=this,d="function"===typeof c[c.length-1]?c.pop():!1,h=new Promise(function(n,b){var e;try{var l=x6(function(a,f){a?b(a):n(f)});c.push(l);
(e=g.apply(k,c))&&"function"===typeof e.then&&n(e)}catch(a){b(a)}});d&&h.then(function(n){d(null,n)},d);return h})}function Xka(g,c,k){if(g.constructor.listeners("debug").length){for(var d=["api",g.name,c],h=0;h<k.length-1;h++)d.push(k[h]);g.constructor.emit("debug",d);var n=k[k.length-1];k[k.length-1]=function(b,e){var l=["api",g.name,c];l=l.concat(b?["error",b]:["success",e]);g.constructor.emit("debug",l);n(b,e)}}}function MU(g,c){for(var k={},d=0,h=c.length;d<h;d++){var n=c[d];n in g&&(k[n]=g[n])}return k}
function z6(g){return g}function Yka(g){return[{ok:g}]}function Zka(g){cN&&addEventListener("storage",function(c){g.emit(c.key)})}function WE(){dN.call(this);this._listeners={};Zka(this)}function NU(g){if("undefined"!==typeof console&&"function"===typeof console[g]){var c=Array.prototype.slice.call(arguments,1);console[g].apply(console,c)}}function A6(g){if(!g)return null;var c=g.split("/");return 2===c.length?c:1===c.length?[g,g]:null}function B6(g,c,k){return new Promise(function(d,h){g.get(c,function(n,
b){if(n){if(404!==n.status)return h(n);b={}}n=b._rev;b=k(b);if(!b)return d({updated:!1,rev:n});b._id=c;b._rev=n;d($ka(g,b,k))})})}function $ka(g,c,k){return g.put(c).then(function(d){return{updated:!0,rev:d.rev}},function(d){if(409!==d.status)throw d;return B6(g,c._id,k)})}function C6(g){var c=g.length;if(0<c%4)throw Error("Invalid string. Length must be a multiple of 4");g=g.indexOf("=");-1===g&&(g=c);return[g,g===c?0:4-g%4]}function ala(g,c,k){for(var d=[],h=c;h<k;h+=3)c=(g[h]<<16&16711680)+(g[h+
1]<<8&65280)+(g[h+2]&255),d.push(qw[c>>18&63]+qw[c>>12&63]+qw[c>>6&63]+qw[c&63]);return d.join("")}function ly(g){if(g>OU)throw new RangeError('The value "'+g+'" is invalid for option "size"');g=new Uint8Array(g);Object.setPrototypeOf(g,Fe.prototype);return g}function Fe(g,c,k){if("number"===typeof g){if("string"===typeof c)throw new TypeError('The "string" argument must be of type string. Received type number');return PU(g)}return D6(g,c,k)}function D6(g,c,k){if("string"===typeof g){var d=c;if("string"!==
typeof d||""===d)d="utf8";if(!Fe.isEncoding(d))throw new TypeError("Unknown encoding: "+d);c=E6(g,d)|0;k=ly(c);g=k.write(g,d);g!==c&&(k=k.slice(0,g));return k}if(ArrayBuffer.isView(g))return rw(g,Uint8Array)?(g=new Uint8Array(g),g=F6(g.buffer,g.byteOffset,g.byteLength)):g=QU(g),g;if(null==g)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof g);if(rw(g,ArrayBuffer)||g&&rw(g.buffer,ArrayBuffer)||"undefined"!==
typeof SharedArrayBuffer&&(rw(g,SharedArrayBuffer)||g&&rw(g.buffer,SharedArrayBuffer)))return F6(g,c,k);if("number"===typeof g)throw new TypeError('The "value" argument must not be of type number. Received type number');d=g.valueOf&&g.valueOf();if(null!=d&&d!==g)return Fe.from(d,c,k);if(d=bla(g))return d;if("undefined"!==typeof Symbol&&null!=Symbol.toPrimitive&&"function"===typeof g[Symbol.toPrimitive])return Fe.from(g[Symbol.toPrimitive]("string"),c,k);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+
typeof g);}function G6(g){if("number"!==typeof g)throw new TypeError('"size" argument must be of type number');if(0>g)throw new RangeError('The value "'+g+'" is invalid for option "size"');}function PU(g){G6(g);return ly(0>g?0:RU(g)|0)}function QU(g){for(var c=0>g.length?0:RU(g.length)|0,k=ly(c),d=0;d<c;d+=1)k[d]=g[d]&255;return k}function F6(g,c,k){if(0>c||g.byteLength<c)throw new RangeError('"offset" is outside of buffer bounds');if(g.byteLength<c+(k||0))throw new RangeError('"length" is outside of buffer bounds');
g=void 0===c&&void 0===k?new Uint8Array(g):void 0===k?new Uint8Array(g,c):new Uint8Array(g,c,k);Object.setPrototypeOf(g,Fe.prototype);return g}function bla(g){if(Fe.isBuffer(g)){var c=RU(g.length)|0,k=ly(c);if(0===k.length)return k;g.copy(k,0,0,c);return k}if(void 0!==g.length)return(c="number"!==typeof g.length)||(c=g.length,c=c!==c),c?ly(0):QU(g);if("Buffer"===g.type&&Array.isArray(g.data))return QU(g.data)}function RU(g){if(g>=OU)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+
OU.toString(16)+" bytes");return g|0}function E6(g,c){if(Fe.isBuffer(g))return g.length;if(ArrayBuffer.isView(g)||rw(g,ArrayBuffer))return g.byteLength;if("string"!==typeof g)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof g);var k=g.length,d=2<arguments.length&&!0===arguments[2];if(!d&&0===k)return 0;for(var h=!1;;)switch(c){case "ascii":case "latin1":case "binary":return k;case "utf8":case "utf-8":return SU(g).length;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return 2*
k;case "hex":return k>>>1;case "base64":return eN.toByteArray(H6(g)).length;default:if(h)return d?-1:SU(g).length;c=(""+c).toLowerCase();h=!0}}function cla(g,c,k){var d=!1;if(void 0===c||0>c)c=0;if(c>this.length)return"";if(void 0===k||k>this.length)k=this.length;if(0>=k)return"";k>>>=0;c>>>=0;if(k<=c)return"";for(g||(g="utf8");;)switch(g){case "hex":g=this.length;if(!c||0>c)c=0;if(!k||0>k||k>g)k=g;for(g="";c<k;++c)g+=dla[this[c]];return g;case "utf8":case "utf-8":return I6(this,c,k);case "ascii":g=
"";for(k=Math.min(this.length,k);c<k;++c)g+=String.fromCharCode(this[c]&127);return g;case "latin1":case "binary":g="";for(k=Math.min(this.length,k);c<k;++c)g+=String.fromCharCode(this[c]);return g;case "base64":return c=0===c&&k===this.length?eN.fromByteArray(this):eN.fromByteArray(this.slice(c,k)),c;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":c=this.slice(c,k);k="";for(g=0;g<c.length-1;g+=2)k+=String.fromCharCode(c[g]+256*c[g+1]);return k;default:if(d)throw new TypeError("Unknown encoding: "+
g);g=(g+"").toLowerCase();d=!0}}function qC(g,c,k){var d=g[c];g[c]=g[k];g[k]=d}function J6(g,c,k,d,h){if(0===g.length)return-1;"string"===typeof k?(d=k,k=0):2147483647<k?k=2147483647:-2147483648>k&&(k=-2147483648);k=+k;k!==k&&(k=h?0:g.length-1);0>k&&(k=g.length+k);if(k>=g.length){if(h)return-1;k=g.length-1}else if(0>k)if(h)k=0;else return-1;"string"===typeof c&&(c=Fe.from(c,d));if(Fe.isBuffer(c))return 0===c.length?-1:K6(g,c,k,d,h);if("number"===typeof c)return c&=255,"function"===typeof Uint8Array.prototype.indexOf?
h?Uint8Array.prototype.indexOf.call(g,c,k):Uint8Array.prototype.lastIndexOf.call(g,c,k):K6(g,[c],k,d,h);throw new TypeError("val must be string, number or Buffer");}function K6(g,c,k,d,h){function n(a,f){return 1===b?a[f]:a.readUInt16BE(f*b)}var b=1,e=g.length,l=c.length;if(void 0!==d&&(d=String(d).toLowerCase(),"ucs2"===d||"ucs-2"===d||"utf16le"===d||"utf-16le"===d)){if(2>g.length||2>c.length)return-1;b=2;e/=2;l/=2;k/=2}if(h)for(d=-1;k<e;k++)if(n(g,k)===n(c,-1===d?0:k-d)){if(-1===d&&(d=k),k-d+1===
l)return d*b}else-1!==d&&(k-=k-d),d=-1;else for(k+l>e&&(k=e-l);0<=k;k--){e=!0;for(d=0;d<l;d++)if(n(g,k+d)!==n(c,d)){e=!1;break}if(e)return k}return-1}function I6(g,c,k){k=Math.min(g.length,k);for(var d=[];c<k;){var h=g[c],n=null,b=239<h?4:223<h?3:191<h?2:1;if(c+b<=k)switch(b){case 1:128>h&&(n=h);break;case 2:var e=g[c+1];128===(e&192)&&(h=(h&31)<<6|e&63,127<h&&(n=h));break;case 3:e=g[c+1];var l=g[c+2];128===(e&192)&&128===(l&192)&&(h=(h&15)<<12|(e&63)<<6|l&63,2047<h&&(55296>h||57343<h)&&(n=h));break;
case 4:e=g[c+1];l=g[c+2];var a=g[c+3];128===(e&192)&&128===(l&192)&&128===(a&192)&&(h=(h&15)<<18|(e&63)<<12|(l&63)<<6|a&63,65535<h&&1114112>h&&(n=h))}null===n?(n=65533,b=1):65535<n&&(n-=65536,d.push(n>>>10&1023|55296),n=56320|n&1023);d.push(n);c+=b}g=d.length;if(g<=L6)d=String.fromCharCode.apply(String,d);else{k="";for(c=0;c<g;)k+=String.fromCharCode.apply(String,d.slice(c,c+=L6));d=k}return d}function ao(g,c,k){if(0!==g%1||0>g)throw new RangeError("offset is not uint");if(g+c>k)throw new RangeError("Trying to access beyond buffer length");
}function Lq(g,c,k,d,h,n){if(!Fe.isBuffer(g))throw new TypeError('"buffer" argument must be a Buffer instance');if(c>h||c<n)throw new RangeError('"value" argument is out of bounds');if(k+d>g.length)throw new RangeError("Index out of range");}function M6(g,c,k,d,h,n){if(k+d>g.length)throw new RangeError("Index out of range");if(0>k)throw new RangeError("Index out of range");}function N6(g,c,k,d,h){c=+c;k>>>=0;h||M6(g,c,k,4);XE.write(g,c,k,d,23,4);return k+4}function O6(g,c,k,d,h){c=+c;k>>>=0;h||M6(g,
c,k,8);XE.write(g,c,k,d,52,8);return k+8}function H6(g){g=g.split("=")[0];g=g.trim().replace(ela,"");if(2>g.length)return"";for(;0!==g.length%4;)g+="=";return g}function SU(g,c){c=c||Infinity;for(var k,d=g.length,h=null,n=[],b=0;b<d;++b){k=g.charCodeAt(b);if(55295<k&&57344>k){if(!h){if(56319<k){-1<(c-=3)&&n.push(239,191,189);continue}else if(b+1===d){-1<(c-=3)&&n.push(239,191,189);continue}h=k;continue}if(56320>k){-1<(c-=3)&&n.push(239,191,189);h=k;continue}k=(h-55296<<10|k-56320)+65536}else h&&-1<
(c-=3)&&n.push(239,191,189);h=null;if(128>k){if(0>--c)break;n.push(k)}else if(2048>k){if(0>(c-=2))break;n.push(k>>6|192,k&63|128)}else if(65536>k){if(0>(c-=3))break;n.push(k>>12|224,k>>6&63|128,k&63|128)}else if(1114112>k){if(0>(c-=4))break;n.push(k>>18|240,k>>12&63|128,k>>6&63|128,k&63|128)}else throw Error("Invalid code point");}return n}function fN(g,c,k,d){for(var h=0;h<d&&!(h+k>=c.length||h>=g.length);++h)c[h+k]=g[h];return h}function rw(g,c){return g instanceof c||null!=g&&null!=g.constructor&&
null!=g.constructor.name&&g.constructor.name===c.name}function gA(g){if("object"!==typeof g||null===g)throw new TypeError("First argument must be an abstract-leveldown compliant store");(this||my).db=g;(this||my)._ended=!1;(this||my)._nexting=!1}function Bu(g){if("object"!==typeof g||null===g)throw new TypeError("First argument must be an abstract-leveldown compliant store");(this||tn).db=g;(this||tn)._operations=[];(this||tn)._written=!1}function Gl(g){(this||Er).status="new";(this||Er).supports=
fla(g,{status:!0})}function P6(g,c){var k={},d;for(d in c)if(gla.call(c,d)){var h=c[d];-1!==hla.indexOf(d)&&(h=g._serializeKey(h));k[d]=h}return k}function YE(g,c){Q6.call(this||Cu,g);(this||Cu)._options=c;(this||Cu)._iterator=null;(this||Cu)._operations=[]}function rC(g){R6.call(this||bo,g.supports||{});ila.forEach(function(c){"function"!==typeof g[c]||(this||bo).supports.additionalMethods[c]||((this||bo).supports.additionalMethods[c]=!0)},this||bo);(this||bo)._db=g;(this||bo)._operations=[];S6(this||
bo)}function jla(g){T6.concat("iterator").forEach(function(c){g["_"+c]=function(){return(this||bo)._db[c].apply((this||bo)._db,arguments)}});Object.keys(g.supports.additionalMethods).forEach(function(c){g[c]=function(){return(this||bo)._db[c].apply((this||bo)._db,arguments)}})}function S6(g){T6.forEach(function(c){g["_"+c]=function(){(this||bo)._operations.push({method:c,args:arguments})}});Object.keys(g.supports.additionalMethods).forEach(function(c){g[c]=function(){(this||bo)._operations.push({method:c,
args:arguments})}});g._iterator=function(c){c=new U6(g,c);(this||bo)._operations.push({iterator:c});return c}}function V6(){if(W6)return X6;W6=!0;return X6=jw.EventEmitter}function ZE(){function g(d,h,n){n||(n=Error);var b=function(e,l,a){return n.call(this,"string"===typeof h?h:h(e,l,a))||this};$jscomp.inherits(b,n);b.prototype.name=n.name;b.prototype.code=d;k[d]=b}function c(d,h){if(Array.isArray(d)){var n=d.length;d=d.map(function(b){return String(b)});return 2<n?"one of "+h+" "+d.slice(0,n-1).join(", ")+
", or "+d[n-1]:2===n?"one of "+h+" "+d[0]+" or "+d[1]:"of "+h+" "+d[0]}return"of "+h+" "+String(d)}if(Y6)return TU;Y6=!0;var k={};g("ERR_INVALID_OPT_VALUE",function(d,h){return'The value "'+h+'" is invalid for option "'+d+'"'},TypeError);g("ERR_INVALID_ARG_TYPE",function(d,h,n){var b;if(b="string"===typeof h)b="not "===h.substr(0,4);b?(b="must not be",h=h.replace(/^not /,"")):b="must be";var e=void 0;if(void 0===e||e>d.length)e=d.length;" argument"===d.substring(e-9,e)?d="The "+d+" "+b+" "+c(h,"type"):
(e=void 0,"number"!==typeof e&&(e=0),e=e+1>d.length?!1:-1!==d.indexOf(".",e),d='The "'+d+'" '+(e?"property":"argument")+" "+b+" "+c(h,"type"));return d+(". Received type "+typeof n)},TypeError);g("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF");g("ERR_METHOD_NOT_IMPLEMENTED",function(d){return"The "+d+" method is not implemented"});g("ERR_STREAM_PREMATURE_CLOSE","Premature close");g("ERR_STREAM_DESTROYED",function(d){return"Cannot call "+d+" after a stream was destroyed"});g("ERR_MULTIPLE_CALLBACK",
"Callback called multiple times");g("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable");g("ERR_STREAM_WRITE_AFTER_END","write after end");g("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);g("ERR_UNKNOWN_ENCODING",function(d){return"Unknown encoding: "+d},TypeError);g("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event");TU.codes=k;return TU}function UU(g){try{if(!VU.localStorage)return!1}catch(c){return!1}g=VU.localStorage[g];return null==g?!1:"true"===
String(g).toLowerCase()}function Z6(g,c){for(var k in g)c[k]=g[k]}function sC(g,c,k){return sw(g,c,k)}function kla(g){if(!g)return"utf8";for(var c;;)switch(g){case "utf8":case "utf-8":return"utf8";case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return"utf16le";case "latin1":case "binary":return"latin1";case "base64":case "ascii":case "hex":return g;default:if(c)return;g=(""+g).toLowerCase();c=!0}}function VH(g){var c=kla(g);if("string"!==typeof c&&(WU.isEncoding===$6||!$6(g)))throw Error("Unknown encoding: "+
g);this.encoding=c||g;switch(this.encoding){case "utf16le":this.text=lla;this.end=mla;g=4;break;case "utf8":this.fillLast=nla;g=4;break;case "base64":this.text=ola;this.end=pla;g=3;break;default:this.write=qla;this.end=rla;return}this.lastTotal=this.lastNeed=0;this.lastChar=WU.allocUnsafe(g)}function XU(g){return 127>=g?0:6===g>>5?2:14===g>>4?3:30===g>>3?4:2===g>>6?-1:-2}function sla(g,c,k){var d=c.length-1;if(d<k)return 0;var h=XU(c[d]);if(0<=h)return 0<h&&(g.lastNeed=h-1),h;if(--d<k||-2===h)return 0;
h=XU(c[d]);if(0<=h)return 0<h&&(g.lastNeed=h-2),h;if(--d<k||-2===h)return 0;h=XU(c[d]);return 0<=h?(0<h&&(2===h?h=0:g.lastNeed=h-3),h):0}function nla(g){var c=this.lastTotal-this.lastNeed;a:if(128!==(g[0]&192)){this.lastNeed=0;var k="\ufffd"}else{if(1<this.lastNeed&&1<g.length){if(128!==(g[1]&192)){this.lastNeed=1;k="\ufffd";break a}if(2<this.lastNeed&&2<g.length&&128!==(g[2]&192)){this.lastNeed=2;k="\ufffd";break a}}k=void 0}if(void 0!==k)return k;if(this.lastNeed<=g.length)return g.copy(this.lastChar,
c,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);g.copy(this.lastChar,c,0,g.length);this.lastNeed-=g.length}function lla(g,c){if(0===(g.length-c)%2){if(c=g.toString("utf16le",c)){var k=c.charCodeAt(c.length-1);if(55296<=k&&56319>=k)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=g[g.length-2],this.lastChar[1]=g[g.length-1],c.slice(0,-1)}return c}this.lastNeed=1;this.lastTotal=2;this.lastChar[0]=g[g.length-1];return g.toString("utf16le",c,g.length-1)}function mla(g){g=
g&&g.length?this.write(g):"";return this.lastNeed?g+this.lastChar.toString("utf16le",0,this.lastTotal-this.lastNeed):g}function ola(g,c){var k=(g.length-c)%3;if(0===k)return g.toString("base64",c);this.lastNeed=3-k;this.lastTotal=3;1===k?this.lastChar[0]=g[g.length-1]:(this.lastChar[0]=g[g.length-2],this.lastChar[1]=g[g.length-1]);return g.toString("base64",c,g.length-k)}function pla(g){g=g&&g.length?this.write(g):"";return this.lastNeed?g+this.lastChar.toString("base64",0,3-this.lastNeed):g}function qla(g){return g.toString(this.encoding)}
function rla(g){return g&&g.length?this.write(g):""}function YU(){function g(h){var n=!1;return function(){if(!n){n=!0;for(var b=arguments.length,e=Array(b),l=0;l<b;l++)e[l]=arguments[l];h.apply(this,e)}}}function c(){}function k(h,n,b){if("function"===typeof n)return k(h,null,n);n||(n={});b=g(b||c);var e=n.readable||!1!==n.readable&&h.readable,l=n.writable||!1!==n.writable&&h.writable,a=function(){h.writable||m()},f=h._writableState&&h._writableState.finished,m=function(){l=!1;f=!0;e||b.call(h)},
r=h._readableState&&h._readableState.endEmitted,v=function(){e=!1;r=!0;l||b.call(h)},x=function(F){b.call(h,F)},y=function(){var F;if(e&&!r)return h._readableState&&h._readableState.ended||(F=new d),b.call(h,F);if(l&&!f)return h._writableState&&h._writableState.ended||(F=new d),b.call(h,F)},E=function(){h.req.on("finish",m)};if(h.setHeader&&"function"===typeof h.abort)if(h.on("complete",m),h.on("abort",y),h.req)E();else h.on("request",E);else l&&!h._writableState&&(h.on("end",a),h.on("close",a));
h.on("end",v);h.on("finish",m);if(!1!==n.error)h.on("error",x);h.on("close",y);return function(){h.removeListener("complete",m);h.removeListener("abort",y);h.removeListener("request",E);h.req&&h.req.removeListener("finish",m);h.removeListener("end",a);h.removeListener("close",a);h.removeListener("finish",m);h.removeListener("end",v);h.removeListener("error",x);h.removeListener("close",y)}}if(a7)return b7;a7=!0;var d=ZE().codes.ERR_STREAM_PREMATURE_CLOSE;return b7=k}function tla(){if(c7)return d7;
c7=!0;return d7=function(){throw Error("Readable.from is not available in the browser");}}function ula(){function g(e,l){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(e);l&&(f=f.filter(function(m){return Object.getOwnPropertyDescriptor(e,m).enumerable}));a.push.apply(a,f)}return a}function c(e){for(var l=1;l<arguments.length;l++){var a=null!=arguments[l]?arguments[l]:{};l%2?g(Object(a),!0).forEach(function(f){var m=a[f];f in e?Object.defineProperty(e,f,{value:m,
enumerable:!0,configurable:!0,writable:!0}):e[f]=m}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):g(Object(a)).forEach(function(f){Object.defineProperty(e,f,Object.getOwnPropertyDescriptor(a,f))})}return e}function k(e,l){for(var a=0;a<l.length;a++){var f=l[a];f.enumerable=f.enumerable||!1;f.configurable=!0;"value"in f&&(f.writable=!0);Object.defineProperty(e,f.key,f)}}function d(e,l,a){l&&k(e.prototype,l);a&&k(e,a);return e}if(e7)return f7;e7=!0;
var h=oi.Buffer,n=g7.inspect,b=n&&n.custom||"inspect";return f7=function(){function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.tail=this.head=null;this.length=0}d(e,[{key:"push",value:function(l){l={data:l,next:null};0<this.length?this.tail.next=l:this.head=l;this.tail=l;++this.length}},{key:"unshift",value:function(l){l={data:l,next:this.head};0===this.length&&(this.tail=l);this.head=l;++this.length}},{key:"shift",value:function(){if(0!==this.length){var l=
this.head.data;this.head=1===this.length?this.tail=null:this.head.next;--this.length;return l}}},{key:"clear",value:function(){this.head=this.tail=null;this.length=0}},{key:"join",value:function(l){if(0===this.length)return"";for(var a=this.head,f=""+a.data;a=a.next;)f+=l+a.data;return f}},{key:"concat",value:function(l){if(0===this.length)return h.alloc(0);l=h.allocUnsafe(l>>>0);for(var a=this.head,f=0;a;)h.prototype.copy.call(a.data,l,f),f+=a.data.length,a=a.next;return l}},{key:"consume",value:function(l,
a){l<this.head.data.length?(a=this.head.data.slice(0,l),this.head.data=this.head.data.slice(l)):a=l===this.head.data.length?this.shift():a?this._getString(l):this._getBuffer(l);return a}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(l){var a=this.head,f=1,m=a.data;for(l-=m.length;a=a.next;){var r=a.data,v=l>r.length?r.length:l;m=v===r.length?m+r:m+r.slice(0,l);l-=v;if(0===l){v===r.length?(++f,this.head=a.next?a.next:this.tail=null):(this.head=a,a.data=r.slice(v));
break}++f}this.length-=f;return m}},{key:"_getBuffer",value:function(l){var a=h.allocUnsafe(l),f=this.head,m=1;f.data.copy(a);for(l-=f.data.length;f=f.next;){var r=f.data,v=l>r.length?r.length:l;r.copy(a,a.length-l,0,v);l-=v;if(0===l){v===r.length?(++m,this.head=f.next?f.next:this.tail=null):(this.head=f,f.data=r.slice(v));break}++m}this.length-=m;return a}},{key:b,value:function(l,a){return n(this,c({},a,{depth:0,customInspect:!1}))}}]);return e}()}function h7(){function g(h,n){k(h,n);c(h)}function c(h){h._writableState&&
!h._writableState.emitClose||h._readableState&&!h._readableState.emitClose||h.emit("close")}function k(h,n){h.emit("error",n)}if(i7)return j7;i7=!0;var d=mj;return j7={destroy:function(h,n){var b=this,e=this._writableState&&this._writableState.destroyed;if(this._readableState&&this._readableState.destroyed||e)return n?n(h):h&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,d.nextTick(k,this,h)):d.nextTick(k,this,h)),this;this._readableState&&(this._readableState.destroyed=
!0);this._writableState&&(this._writableState.destroyed=!0);this._destroy(h||null,function(l){!n&&l?b._writableState?b._writableState.errorEmitted?d.nextTick(c,b):(b._writableState.errorEmitted=!0,d.nextTick(g,b,l)):d.nextTick(g,b,l):n?(d.nextTick(c,b),n(l)):d.nextTick(c,b)});return this},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1);this._writableState&&(this._writableState.destroyed=
!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(h,n){var b=h._readableState,e=h._writableState;b&&b.autoDestroy||e&&e.autoDestroy?h.destroy(n):h.emit("error",n)}}}function k7(){if(l7)return m7;l7=!0;var g=ZE().codes.ERR_INVALID_OPT_VALUE;return m7={getHighWaterMark:function(c,k,d,h){k=null!=k.highWaterMark?k.highWaterMark:
h?k[d]:null;if(null!=k){if(!isFinite(k)||Math.floor(k)!==k||0>k)throw new g(h?d:"highWaterMark",k);return Math.floor(k)}return c.objectMode?16:16384}}}function n7(){function g(R){var X=this;this.entry=this.next=null;this.finish=function(){var ja=X.entry;for(X.entry=null;ja;){var fa=ja.callback;R.pendingcb--;fa(void 0);ja=ja.next}R.corkedRequestsFree.next=X}}function c(){}function k(R,X,ja){m=m||$E();R=R||{};"boolean"!==typeof ja&&(ja=X instanceof m);this.objectMode=!!R.objectMode;ja&&(this.objectMode=
this.objectMode||!!R.writableObjectMode);this.highWaterMark=F(this,R,"writableHighWaterMark",ja);this.destroyed=this.finished=this.ended=this.ending=this.needDrain=this.finalCalled=!1;this.decodeStrings=!1!==R.decodeStrings;this.defaultEncoding=R.defaultEncoding||"utf8";this.length=0;this.writing=!1;this.corked=0;this.sync=!0;this.bufferProcessing=!1;this.onwrite=function(fa){var ua=X._writableState,gb=ua.sync,hb=ua.writecb;if("function"!==typeof hb)throw new N;ua.writing=!1;ua.writecb=null;ua.length-=
ua.writelen;ua.writelen=0;fa?(--ua.pendingcb,gb?(f.nextTick(hb,fa),f.nextTick(a,X,ua),X._writableState.errorEmitted=!0,L(X,fa)):(hb(fa),X._writableState.errorEmitted=!0,L(X,fa),a(X,ua))):((fa=e(ua)||X.destroyed)||ua.corked||ua.bufferProcessing||!ua.bufferedRequest||b(X,ua),gb?f.nextTick(n,X,ua,fa,hb):n(X,ua,fa,hb))};this.writecb=null;this.writelen=0;this.lastBufferedRequest=this.bufferedRequest=null;this.pendingcb=0;this.errorEmitted=this.prefinished=!1;this.emitClose=!1!==R.emitClose;this.autoDestroy=
!!R.autoDestroy;this.bufferedRequestCount=0;this.corkedRequestsFree=new g(this)}function d(R){m=m||$E();var X=this instanceof m;if(!X&&!Z.call(d,this))return new d(R);this._writableState=new k(R,this,X);this.writable=!0;R&&("function"===typeof R.write&&(this._write=R.write),"function"===typeof R.writev&&(this._writev=R.writev),"function"===typeof R.destroy&&(this._destroy=R.destroy),"function"===typeof R.final&&(this._final=R.final));v.call(this)}function h(R,X,ja,fa,ua,gb,hb){X.writelen=fa;X.writecb=
hb;X.writing=!0;X.sync=!0;if(X.destroyed)X.onwrite(new W("write"));else ja?R._writev(ua,X.onwrite):R._write(ua,gb,X.onwrite);X.sync=!1}function n(R,X,ja,fa){!ja&&0===X.length&&X.needDrain&&(X.needDrain=!1,R.emit("drain"));X.pendingcb--;fa();a(R,X)}function b(R,X){X.bufferProcessing=!0;var ja=X.bufferedRequest;if(R._writev&&ja&&ja.next){var fa=Array(X.bufferedRequestCount),ua=X.corkedRequestsFree;ua.entry=ja;for(var gb=0,hb=!0;ja;)fa[gb]=ja,ja.isBuf||(hb=!1),ja=ja.next,gb+=1;fa.allBuffers=hb;h(R,X,
!0,X.length,fa,"",ua.finish);X.pendingcb++;X.lastBufferedRequest=null;ua.next?(X.corkedRequestsFree=ua.next,ua.next=null):X.corkedRequestsFree=new g(X);X.bufferedRequestCount=0}else{for(;ja&&(fa=ja.chunk,h(R,X,!1,X.objectMode?1:fa.length,fa,ja.encoding,ja.callback),ja=ja.next,X.bufferedRequestCount--,!X.writing););null===ja&&(X.lastBufferedRequest=null)}X.bufferedRequest=ja;X.bufferProcessing=!1}function e(R){return R.ending&&0===R.length&&null===R.bufferedRequest&&!R.finished&&!R.writing}function l(R,
X){R._final(function(ja){X.pendingcb--;ja&&L(R,ja);X.prefinished=!0;R.emit("prefinish");a(R,X)})}function a(R,X){var ja=e(X);ja&&(X.prefinished||X.finalCalled||("function"!==typeof R._final||X.destroyed?(X.prefinished=!0,R.emit("prefinish")):(X.pendingcb++,X.finalCalled=!0,f.nextTick(l,R,X))),0===X.pendingcb&&(X.finished=!0,R.emit("finish"),X.autoDestroy&&(X=R._readableState,(!X||X.autoDestroy&&X.endEmitted)&&R.destroy())));return ja}if(o7)return ZU;o7=!0;var f=mj;ZU=d;var m;d.WritableState=k;var r=
{deprecate:vla},v=V6(),x=oi.Buffer,y=wla.Uint8Array||function(){},E=h7(),F=k7().getHighWaterMark,I=ZE().codes,J=I.ERR_INVALID_ARG_TYPE,P=I.ERR_METHOD_NOT_IMPLEMENTED,N=I.ERR_MULTIPLE_CALLBACK,Y=I.ERR_STREAM_CANNOT_PIPE,W=I.ERR_STREAM_DESTROYED,da=I.ERR_STREAM_NULL_VALUES,va=I.ERR_STREAM_WRITE_AFTER_END,za=I.ERR_UNKNOWN_ENCODING,L=E.errorOrDestroy;wl(d,v);k.prototype.getBuffer=function(){for(var R=this.bufferedRequest,X=[];R;)X.push(R),R=R.next;return X};(function(){try{Object.defineProperty(k.prototype,
"buffer",{get:r.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(R){}})();if("function"===typeof Symbol&&Symbol.hasInstance&&"function"===typeof Function.prototype[Symbol.hasInstance]){var Z=Function.prototype[Symbol.hasInstance];Object.defineProperty(d,Symbol.hasInstance,{value:function(R){return Z.call(this,R)?!0:this!==d?!1:R&&R._writableState instanceof k}})}else Z=function(R){return R instanceof this};
d.prototype.pipe=function(){L(this,new Y)};d.prototype.write=function(R,X,ja){var fa=this._writableState,ua=!1,gb;if(gb=!fa.objectMode)gb=R,gb=x.isBuffer(gb)||gb instanceof y;gb&&!x.isBuffer(R)&&(R=x.from(R));"function"===typeof X&&(ja=X,X=null);gb?X="buffer":X||(X=fa.defaultEncoding);"function"!==typeof ja&&(ja=c);if(fa.ending)fa=ja,ja=new va,L(this,ja),f.nextTick(fa,ja);else{var hb;if(!(hb=gb)){hb=R;var ta=ja,na;null===hb?na=new da:"string"===typeof hb||fa.objectMode||(na=new J("chunk",["string",
"Buffer"],hb));na?(L(this,na),f.nextTick(ta,na),hb=!1):hb=!0}hb&&(fa.pendingcb++,ua=gb,ua||(na=R,fa.objectMode||!1===fa.decodeStrings||"string"!==typeof na||(na=x.from(na,X)),R!==na&&(ua=!0,X="buffer",R=na)),gb=fa.objectMode?1:R.length,fa.length+=gb,na=fa.length<fa.highWaterMark,na||(fa.needDrain=!0),fa.writing||fa.corked?(gb=fa.lastBufferedRequest,fa.lastBufferedRequest={chunk:R,encoding:X,isBuf:ua,callback:ja,next:null},gb?gb.next=fa.lastBufferedRequest:fa.bufferedRequest=fa.lastBufferedRequest,
fa.bufferedRequestCount+=1):h(this,fa,!1,gb,R,X,ja),ua=na)}return ua};d.prototype.cork=function(){this._writableState.corked++};d.prototype.uncork=function(){var R=this._writableState;R.corked&&(R.corked--,R.writing||R.corked||R.bufferProcessing||!R.bufferedRequest||b(this,R))};d.prototype.setDefaultEncoding=function(R){"string"===typeof R&&(R=R.toLowerCase());if(!(-1<"hex utf8 utf-8 ascii binary base64 ucs2 ucs-2 utf16le utf-16le raw".split(" ").indexOf((R+"").toLowerCase())))throw new za(R);this._writableState.defaultEncoding=
R;return this};Object.defineProperty(d.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});Object.defineProperty(d.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});d.prototype._write=function(R,X,ja){ja(new P("_write()"))};d.prototype._writev=null;d.prototype.end=function(R,X,ja){var fa=this._writableState;"function"===typeof R?(ja=R,X=R=null):"function"===typeof X&&(ja=X,
X=null);null!==R&&void 0!==R&&this.write(R,X);fa.corked&&(fa.corked=1,this.uncork());if(!fa.ending){R=ja;fa.ending=!0;a(this,fa);if(R)if(fa.finished)f.nextTick(R);else this.once("finish",R);fa.ended=!0;this.writable=!1}return this};Object.defineProperty(d.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});Object.defineProperty(d.prototype,"destroyed",{enumerable:!1,get:function(){return void 0===this._writableState?!1:this._writableState.destroyed},set:function(R){this._writableState&&
(this._writableState.destroyed=R)}});d.prototype.destroy=E.destroy;d.prototype._undestroy=E.undestroy;d.prototype._destroy=function(R,X){X(R)};return ZU}function $E(){function g(a){if(!(this instanceof g))return new g(a);n.call(this,a);b.call(this,a);this.allowHalfOpen=!0;a&&(!1===a.readable&&(this.readable=!1),!1===a.writable&&(this.writable=!1),!1===a.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",c)))}function c(){this._writableState.ended||d.nextTick(k,this)}function k(a){a.end()}if(p7)return $U;
p7=!0;var d=mj,h=Object.keys||function(a){var f=[],m;for(m in a)f.push(m);return f};$U=g;var n=q7(),b=n7();wl(g,n);h=h(b.prototype);for(var e=0;e<h.length;e++){var l=h[e];g.prototype[l]||(g.prototype[l]=b.prototype[l])}Object.defineProperty(g.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});Object.defineProperty(g.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});Object.defineProperty(g.prototype,
"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});Object.defineProperty(g.prototype,"destroyed",{enumerable:!1,get:function(){return void 0===this._readableState||void 0===this._writableState?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(a){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=a,this._writableState.destroyed=a)}});return $U}function xla(){function g(F,I,J){I in F?Object.defineProperty(F,
I,{value:J,enumerable:!0,configurable:!0,writable:!0}):F[I]=J;return F}function c(F,I){return{value:F,done:I}}function k(F){var I=F[l];if(null!==I){var J=F[x].read();null!==J&&(F[r]=null,F[l]=null,F[a]=null,I(c(J,!1)))}}function d(F){n.nextTick(k,F)}function h(F,I){return function(J,P){F.then(function(){if(I[m])J(c(void 0,!0));else I[v](J,P)},P)}}if(r7)return s7;r7=!0;var n=mj,b,e=YU(),l=Symbol("lastResolve"),a=Symbol("lastReject"),f=Symbol("error"),m=Symbol("ended"),r=Symbol("lastPromise"),v=Symbol("handlePromise"),
x=Symbol("stream"),y=Object.getPrototypeOf(function(){}),E=Object.setPrototypeOf((b={get stream(){return this[x]},next:function(){var F=this,I=this[f];if(null!==I)return Promise.reject(I);if(this[m])return Promise.resolve(c(void 0,!0));if(this[x].destroyed)return new Promise(function(J,P){n.nextTick(function(){F[f]?P(F[f]):J(c(void 0,!0))})});if(I=this[r])I=new Promise(h(I,this));else{I=this[x].read();if(null!==I)return Promise.resolve(c(I,!1));I=new Promise(this[v])}return this[r]=I}},g(b,Symbol.asyncIterator,
function(){return this}),g(b,"return",function(){var F=this;return new Promise(function(I,J){F[x].destroy(null,function(P){P?J(P):I(c(void 0,!0))})})}),b),y);return s7=function(F){var I,J=Object.create(E,(I={},g(I,x,{value:F,writable:!0}),g(I,l,{value:null,writable:!0}),g(I,a,{value:null,writable:!0}),g(I,f,{value:null,writable:!0}),g(I,m,{value:F._readableState.endEmitted,writable:!0}),g(I,v,{value:function(P,N){var Y=J[x].read();Y?(J[r]=null,J[l]=null,J[a]=null,P(c(Y,!1))):(J[l]=P,J[a]=N)},writable:!0}),
I));J[r]=null;e(F,function(P){if(P&&"ERR_STREAM_PREMATURE_CLOSE"!==P.code){var N=J[a];null!==N&&(J[r]=null,J[l]=null,J[a]=null,N(P));J[f]=P}else P=J[l],null!==P&&(J[r]=null,J[l]=null,J[a]=null,P(c(void 0,!0))),J[m]=!0});F.on("readable",d.bind(null,J));return J}}function q7(){function g(pa,La,Hb){if("function"===typeof pa.prependListener)return pa.prependListener(La,Hb);if(pa._events&&pa._events[La])Array.isArray(pa._events[La])?pa._events[La].unshift(Hb):pa._events[La]=[Hb,pa._events[La]];else pa.on(La,
Hb)}function c(pa,La,Hb){P=P||$E();pa=pa||{};"boolean"!==typeof Hb&&(Hb=La instanceof P);this.objectMode=!!pa.objectMode;Hb&&(this.objectMode=this.objectMode||!!pa.readableObjectMode);this.highWaterMark=L(this,pa,"readableHighWaterMark",Hb);this.buffer=new za;this.length=0;this.pipes=null;this.pipesCount=0;this.flowing=null;this.reading=this.endEmitted=this.ended=!1;this.sync=!0;this.resumeScheduled=this.readableListening=this.emittedReadable=this.needReadable=!1;this.paused=!0;this.emitClose=!1!==
pa.emitClose;this.autoDestroy=!!pa.autoDestroy;this.destroyed=!1;this.defaultEncoding=pa.defaultEncoding||"utf8";this.awaitDrain=0;this.readingMore=!1;this.encoding=this.decoder=null;pa.encoding&&(ua||(ua=aV.StringDecoder),this.decoder=new ua(pa.encoding),this.encoding=pa.encoding)}function k(pa){P=P||$E();if(!(this instanceof k))return new k(pa);this._readableState=new c(pa,this,this instanceof P);this.readable=!0;pa&&("function"===typeof pa.read&&(this._read=pa.read),"function"===typeof pa.destroy&&
(this._destroy=pa.destroy));N.call(this)}function d(pa,La,Hb,fc,Ob){va("readableAddChunk",La);var Zb=pa._readableState;if(null===La)Zb.reading=!1,va("onEofChunk"),Zb.ended||(Zb.decoder&&(La=Zb.decoder.end())&&La.length&&(Zb.buffer.push(La),Zb.length+=Zb.objectMode?1:La.length),Zb.ended=!0,Zb.sync?b(pa):(Zb.needReadable=!1,Zb.emittedReadable||(Zb.emittedReadable=!0,e(pa))));else{if(!Ob){Ob=La;var Hc;Y.isBuffer(Ob)||Ob instanceof W||"string"===typeof Ob||void 0===Ob||Zb.objectMode||(Hc=new R("chunk",
["string","Buffer","Uint8Array"],Ob));var Gb=Hc}if(Gb)ta(pa,Gb);else if(Zb.objectMode||La&&0<La.length)if("string"===typeof La||Zb.objectMode||Object.getPrototypeOf(La)===Y.prototype||(La=Y.from(La)),fc)Zb.endEmitted?ta(pa,new fa):h(pa,Zb,La,!0);else if(Zb.ended)ta(pa,new X);else{if(Zb.destroyed)return!1;Zb.reading=!1;Zb.decoder&&!Hb?(La=Zb.decoder.write(La),Zb.objectMode||0!==La.length?h(pa,Zb,La,!1):l(pa,Zb)):h(pa,Zb,La,!1)}else fc||(Zb.reading=!1,l(pa,Zb))}return!Zb.ended&&(Zb.length<Zb.highWaterMark||
0===Zb.length)}function h(pa,La,Hb,fc){La.flowing&&0===La.length&&!La.sync?(La.awaitDrain=0,pa.emit("data",Hb)):(La.length+=La.objectMode?1:Hb.length,fc?La.buffer.unshift(Hb):La.buffer.push(Hb),La.needReadable&&b(pa));l(pa,La)}function n(pa,La){if(0>=pa||0===La.length&&La.ended)return 0;if(La.objectMode)return 1;if(pa!==pa)return La.flowing&&La.length?La.buffer.head.data.length:La.length;if(pa>La.highWaterMark){var Hb=pa;1073741824<=Hb?Hb=1073741824:(Hb--,Hb|=Hb>>>1,Hb|=Hb>>>2,Hb|=Hb>>>4,Hb|=Hb>>>
8,Hb|=Hb>>>16,Hb++);La.highWaterMark=Hb}return pa<=La.length?pa:La.ended?La.length:(La.needReadable=!0,0)}function b(pa){var La=pa._readableState;va("emitReadable",La.needReadable,La.emittedReadable);La.needReadable=!1;La.emittedReadable||(va("emitReadable",La.flowing),La.emittedReadable=!0,J.nextTick(e,pa))}function e(pa){var La=pa._readableState;va("emitReadable_",La.destroyed,La.length,La.ended);La.destroyed||!La.length&&!La.ended||(pa.emit("readable"),La.emittedReadable=!1);La.needReadable=!La.flowing&&
!La.ended&&La.length<=La.highWaterMark;x(pa)}function l(pa,La){La.readingMore||(La.readingMore=!0,J.nextTick(a,pa,La))}function a(pa,La){for(;!La.reading&&!La.ended&&(La.length<La.highWaterMark||La.flowing&&0===La.length);){var Hb=La.length;va("maybeReadMore read 0");pa.read(0);if(Hb===La.length)break}La.readingMore=!1}function f(pa){return function(){var La=pa._readableState;va("pipeOnDrain",La.awaitDrain);La.awaitDrain&&La.awaitDrain--;0===La.awaitDrain&&pa.listeners("data").length&&(La.flowing=
!0,x(pa))}}function m(pa){var La=pa._readableState;La.readableListening=0<pa.listenerCount("readable");La.resumeScheduled&&!La.paused?La.flowing=!0:0<pa.listenerCount("data")&&pa.resume()}function r(pa){va("readable nexttick read 0");pa.read(0)}function v(pa,La){va("resume",La.reading);La.reading||pa.read(0);La.resumeScheduled=!1;pa.emit("resume");x(pa);La.flowing&&!La.reading&&pa.read(0)}function x(pa){var La=pa._readableState;for(va("flow",La.flowing);La.flowing&&null!==pa.read(););}function y(pa,
La){if(0===La.length)return null;La.objectMode?pa=La.buffer.shift():!pa||pa>=La.length?(pa=La.decoder?La.buffer.join(""):1===La.buffer.length?La.buffer.first():La.buffer.concat(La.length),La.buffer.clear()):pa=La.buffer.consume(pa,La.decoder);return pa}function E(pa){var La=pa._readableState;va("endReadable",La.endEmitted);La.endEmitted||(La.ended=!0,J.nextTick(F,La,pa))}function F(pa,La){va("endReadableNT",pa.endEmitted,pa.length);pa.endEmitted||0!==pa.length||(pa.endEmitted=!0,La.readable=!1,La.emit("end"),
pa.autoDestroy&&(pa=La._writableState,(!pa||pa.autoDestroy&&pa.finished)&&La.destroy()))}function I(pa,La){for(var Hb=0,fc=pa.length;Hb<fc;Hb++)if(pa[Hb]===La)return Hb;return-1}if(t7)return bV;t7=!0;var J=mj;bV=k;var P;k.ReadableState=c;var N=V6(),Y=oi.Buffer,W=yla.Uint8Array||function(){},da=g7;var va=da&&da.debuglog?da.debuglog("stream"):function(){};var za=ula();da=h7();var L=k7().getHighWaterMark,Z=ZE().codes,R=Z.ERR_INVALID_ARG_TYPE,X=Z.ERR_STREAM_PUSH_AFTER_EOF,ja=Z.ERR_METHOD_NOT_IMPLEMENTED,
fa=Z.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,ua,gb,hb;wl(k,N);var ta=da.errorOrDestroy,na=["error","close","destroy","pause","resume"];Object.defineProperty(k.prototype,"destroyed",{enumerable:!1,get:function(){return void 0===this._readableState?!1:this._readableState.destroyed},set:function(pa){this._readableState&&(this._readableState.destroyed=pa)}});k.prototype.destroy=da.destroy;k.prototype._undestroy=da.undestroy;k.prototype._destroy=function(pa,La){La(pa)};k.prototype.push=function(pa,La){var Hb=
this._readableState;if(Hb.objectMode)var fc=!0;else"string"===typeof pa&&(La=La||Hb.defaultEncoding,La!==Hb.encoding&&(pa=Y.from(pa,La),La=""),fc=!0);return d(this,pa,La,!1,fc)};k.prototype.unshift=function(pa){return d(this,pa,null,!0,!1)};k.prototype.isPaused=function(){return!1===this._readableState.flowing};k.prototype.setEncoding=function(pa){ua||(ua=aV.StringDecoder);pa=new ua(pa);this._readableState.decoder=pa;this._readableState.encoding=this._readableState.decoder.encoding;for(var La=this._readableState.buffer.head,
Hb="";null!==La;)Hb+=pa.write(La.data),La=La.next;this._readableState.buffer.clear();""!==Hb&&this._readableState.buffer.push(Hb);this._readableState.length=Hb.length;return this};k.prototype.read=function(pa){va("read",pa);pa=parseInt(pa,10);var La=this._readableState,Hb=pa;0!==pa&&(La.emittedReadable=!1);if(0===pa&&La.needReadable&&((0!==La.highWaterMark?La.length>=La.highWaterMark:0<La.length)||La.ended))return va("read: emitReadable",La.length,La.ended),0===La.length&&La.ended?E(this):b(this),
null;pa=n(pa,La);if(0===pa&&La.ended)return 0===La.length&&E(this),null;var fc=La.needReadable;va("need readable",fc);if(0===La.length||La.length-pa<La.highWaterMark)fc=!0,va("length less than watermark",fc);La.ended||La.reading?va("reading or ended",!1):fc&&(va("do read"),La.reading=!0,La.sync=!0,0===La.length&&(La.needReadable=!0),this._read(La.highWaterMark),La.sync=!1,La.reading||(pa=n(Hb,La)));fc=0<pa?y(pa,La):null;null===fc?(La.needReadable=La.length<=La.highWaterMark,pa=0):(La.length-=pa,La.awaitDrain=
0);0===La.length&&(La.ended||(La.needReadable=!0),Hb!==pa&&La.ended&&E(this));null!==fc&&this.emit("data",fc);return fc};k.prototype._read=function(pa){ta(this,new ja("_read()"))};k.prototype.pipe=function(pa,La){function Hb(vb,Vb){va("onunpipe");vb===Gd&&Vb&&!1===Vb.hasUnpiped&&(Vb.hasUnpiped=!0,va("cleanup"),pa.removeListener("close",Hc),pa.removeListener("finish",Gb),pa.removeListener("drain",Ga),pa.removeListener("error",Zb),pa.removeListener("unpipe",Hb),Gd.removeListener("end",fc),Gd.removeListener("end",
dd),Gd.removeListener("data",Ob),Ja=!0,!ma.awaitDrain||pa._writableState&&!pa._writableState.needDrain||Ga())}function fc(){va("onend");pa.end()}function Ob(vb){va("ondata");vb=pa.write(vb);va("dest.write",vb);!1===vb&&((1===ma.pipesCount&&ma.pipes===pa||1<ma.pipesCount&&-1!==I(ma.pipes,pa))&&!Ja&&(va("false write response, pause",ma.awaitDrain),ma.awaitDrain++),Gd.pause())}function Zb(vb){va("onerror",vb);dd();pa.removeListener("error",Zb);0===pa.listeners("error").length&&ta(pa,vb)}function Hc(){pa.removeListener("finish",
Gb);dd()}function Gb(){va("onfinish");pa.removeListener("close",Hc);dd()}function dd(){va("unpipe");Gd.unpipe(pa)}var Gd=this,ma=this._readableState;switch(ma.pipesCount){case 0:ma.pipes=pa;break;case 1:ma.pipes=[ma.pipes,pa];break;default:ma.pipes.push(pa)}ma.pipesCount+=1;va("pipe count=%d opts=%j",ma.pipesCount,La);La=La&&!1===La.end||pa===J.stdout||pa===J.stderr?dd:fc;if(ma.endEmitted)J.nextTick(La);else Gd.once("end",La);pa.on("unpipe",Hb);var Ga=f(Gd);pa.on("drain",Ga);var Ja=!1;Gd.on("data",
Ob);g(pa,"error",Zb);pa.once("close",Hc);pa.once("finish",Gb);pa.emit("pipe",Gd);ma.flowing||(va("pipe resume"),Gd.resume());return pa};k.prototype.unpipe=function(pa){var La=this._readableState,Hb={hasUnpiped:!1};if(0===La.pipesCount)return this;if(1===La.pipesCount){if(pa&&pa!==La.pipes)return this;pa||(pa=La.pipes);La.pipes=null;La.pipesCount=0;La.flowing=!1;pa&&pa.emit("unpipe",this,Hb);return this}if(!pa){pa=La.pipes;Hb=La.pipesCount;La.pipes=null;La.pipesCount=0;La.flowing=!1;for(La=0;La<Hb;La++)pa[La].emit("unpipe",
this,{hasUnpiped:!1});return this}var fc=I(La.pipes,pa);if(-1===fc)return this;La.pipes.splice(fc,1);--La.pipesCount;1===La.pipesCount&&(La.pipes=La.pipes[0]);pa.emit("unpipe",this,Hb);return this};k.prototype.on=function(pa,La){La=N.prototype.on.call(this,pa,La);var Hb=this._readableState;"data"===pa?(Hb.readableListening=0<this.listenerCount("readable"),!1!==Hb.flowing&&this.resume()):"readable"!==pa||Hb.endEmitted||Hb.readableListening||(Hb.readableListening=Hb.needReadable=!0,Hb.flowing=!1,Hb.emittedReadable=
!1,va("on readable",Hb.length,Hb.reading),Hb.length?b(this):Hb.reading||J.nextTick(r,this));return La};k.prototype.addListener=k.prototype.on;k.prototype.removeListener=function(pa,La){La=N.prototype.removeListener.call(this,pa,La);"readable"===pa&&J.nextTick(m,this);return La};k.prototype.removeAllListeners=function(pa){var La=N.prototype.removeAllListeners.apply(this,arguments);"readable"!==pa&&void 0!==pa||J.nextTick(m,this);return La};k.prototype.resume=function(){var pa=this._readableState;pa.flowing||
(va("resume"),pa.flowing=!pa.readableListening,pa.resumeScheduled||(pa.resumeScheduled=!0,J.nextTick(v,this,pa)));pa.paused=!1;return this};k.prototype.pause=function(){va("call pause flowing=%j",this._readableState.flowing);!1!==this._readableState.flowing&&(va("pause"),this._readableState.flowing=!1,this.emit("pause"));this._readableState.paused=!0;return this};k.prototype.wrap=function(pa){var La=this,Hb=this._readableState,fc=!1;pa.on("end",function(){va("wrapped end");if(Hb.decoder&&!Hb.ended){var Zb=
Hb.decoder.end();Zb&&Zb.length&&La.push(Zb)}La.push(null)});pa.on("data",function(Zb){va("wrapped data");Hb.decoder&&(Zb=Hb.decoder.write(Zb));Hb.objectMode&&(null===Zb||void 0===Zb)||!(Hb.objectMode||Zb&&Zb.length)||La.push(Zb)||(fc=!0,pa.pause())});for(var Ob in pa)void 0===this[Ob]&&"function"===typeof pa[Ob]&&(this[Ob]=function(Zb){return function(){return pa[Zb].apply(pa,arguments)}}(Ob));for(Ob=0;Ob<na.length;Ob++)pa.on(na[Ob],this.emit.bind(this,na[Ob]));this._read=function(Zb){va("wrapped _read",
Zb);fc&&(fc=!1,pa.resume())};return this};"function"===typeof Symbol&&(k.prototype[Symbol.asyncIterator]=function(){void 0===gb&&(gb=xla());return gb(this)});Object.defineProperty(k.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}});Object.defineProperty(k.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}});Object.defineProperty(k.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},
set:function(pa){this._readableState&&(this._readableState.flowing=pa)}});k._fromList=y;Object.defineProperty(k.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});"function"===typeof Symbol&&(k.from=function(pa,La){void 0===hb&&(hb=tla());return hb(k,pa,La)});return bV}function u7(){function g(f,m){var r=this._transformState;r.transforming=!1;var v=r.writecb;if(null===v)return this.emit("error",new b);r.writechunk=null;r.writecb=null;null!=m&&this.push(m);
v(f);f=this._readableState;f.reading=!1;(f.needReadable||f.length<f.highWaterMark)&&this._read(f.highWaterMark)}function c(f){if(!(this instanceof c))return new c(f);a.call(this,f);this._transformState={afterTransform:g.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null};this._readableState.needReadable=!0;this._readableState.sync=!1;f&&("function"===typeof f.transform&&(this._transform=f.transform),"function"===typeof f.flush&&(this._flush=f.flush));this.on("prefinish",
k)}function k(){var f=this;"function"!==typeof this._flush||this._readableState.destroyed?d(this,null,null):this._flush(function(m,r){d(f,m,r)})}function d(f,m,r){if(m)return f.emit("error",m);null!=r&&f.push(r);if(f._writableState.length)throw new l;if(f._transformState.transforming)throw new e;return f.push(null)}if(v7)return cV;v7=!0;cV=c;var h=ZE().codes,n=h.ERR_METHOD_NOT_IMPLEMENTED,b=h.ERR_MULTIPLE_CALLBACK,e=h.ERR_TRANSFORM_ALREADY_TRANSFORMING,l=h.ERR_TRANSFORM_WITH_LENGTH_0,a=$E();wl(c,
a);c.prototype.push=function(f,m){this._transformState.needTransform=!1;return a.prototype.push.call(this,f,m)};c.prototype._transform=function(f,m,r){r(new n("_transform()"))};c.prototype._write=function(f,m,r){var v=this._transformState;v.writecb=r;v.writechunk=f;v.writeencoding=m;v.transforming||(f=this._readableState,(v.needTransform||f.needReadable||f.length<f.highWaterMark)&&this._read(f.highWaterMark))};c.prototype._read=function(f){f=this._transformState;null===f.writechunk||f.transforming?
f.needTransform=!0:(f.transforming=!0,this._transform(f.writechunk,f.writeencoding,f.afterTransform))};c.prototype._destroy=function(f,m){a.prototype._destroy.call(this,f,function(r){m(r)})};return cV}function aF(g,c){if(!((this||Du)instanceof aF))return new aF(g,c);c=c||{};w7.call(this||Du,zla(c,{objectMode:!0}));(this||Du)._iterator=g;(this||Du)._options=c;this.on("end",(this||Du).destroy.bind(this||Du,null,null))}function x7(g,c,k){c&&"string"!=typeof c&&(c=c.message||c.name);Ala(this||Qm,{type:g,
name:g,cause:"string"!=typeof c?c:k,message:c},"ewr")}function dV(g,c){Error.call(this||Qm);Error.captureStackTrace&&Error.captureStackTrace(this||Qm,(this||Qm).constructor);x7.call(this||Qm,"CustomError",g,c)}function Bla(g,c,k){var d=function(h,n){x7.call(this||Qm,c,h,n);"FilesystemError"==c&&((this||Qm).code=(this||Qm).cause.code,(this||Qm).path=(this||Qm).cause.path,(this||Qm).errno=(this||Qm).cause.errno,(this||Qm).message=(g.errno[(this||Qm).cause.errno]?g.errno[(this||Qm).cause.errno].description:
(this||Qm).cause.message)+((this||Qm).cause.path?" ["+(this||Qm).cause.path+"]":""));Error.call(this||Qm);Error.captureStackTrace&&Error.captureStackTrace(this||Qm,d)};d.prototype=k?new k:new dV;return d}function WH(g){(this||Rm).db=(this||Rm)._levelup=g;(this||Rm).batch=g.db.batch();(this||Rm).ops=[];(this||Rm).length=0}function y7(g,c){if(null==g)throw new TypeError("Cannot convert first argument to object");for(var k=Object(g),d=1;d<arguments.length;d++){var h=arguments[d];if(null!=h)for(var n=
Object.keys(Object(h)),b=0,e=n.length;b<e;b++){var l=n[b],a=Object.getOwnPropertyDescriptor(h,l);void 0!==a&&a.enumerable&&(k[l]=h[l])}}return k}function z7(){function g(l){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a})(l)}function c(l){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(a){return a.__proto__||Object.getPrototypeOf(a)})(l)}
function k(l,a){return(k=Object.setPrototypeOf||function(f,m){return f.__proto__=m,f})(l,a)}function d(l,a,f){f||(f=Error);f=function(m){function r(v,x,y){if(!(this instanceof r))throw new TypeError("Cannot call a class as a function");!0;v=c(r).call(this,"string"==typeof a?a:a(v,x,y));if(!v||"object"!==g(v)&&"function"!=typeof v){if(void 0===this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");v=this}return v.code=l,v}return!function(v,x){if("function"!=typeof x&&
null!==x)throw new TypeError("Super expression must either be null or a function");v.prototype=Object.create(x&&x.prototype,{constructor:{value:v,writable:!0,configurable:!0}});x&&k(v,x)}(r,m),r}(f);e[l]=f}function h(l,a){if(Array.isArray(l)){var f=l.length;return l=l.map(function(m){return String(m)}),2<f?"one of ".concat(a," ").concat(l.slice(0,f-1).join(", "),", or ")+l[f-1]:2===f?"one of ".concat(a," ").concat(l[0]," or ").concat(l[1]):"of ".concat(a," ").concat(l[0])}return"of ".concat(a," ").concat(String(l))}
if(A7)return eV;A7=!0;var n,b,e={};return d("ERR_AMBIGUOUS_ARGUMENT",'The "%s" argument is ambiguous. %s',TypeError),d("ERR_INVALID_ARG_TYPE",function(l,a,f){var m;if(void 0===n&&(n=fV()),n("string"==typeof l,"'name' must be a string"),"string"==typeof a&&"not "===a.substr(0,4)?(m="must not be",a=a.replace(/^not /,"")):m="must be",function(v,x,y){return(void 0===y||y>v.length)&&(y=v.length),v.substring(y-x.length,y)===x}(l," argument"))l="The ".concat(l," ").concat(m," ").concat(h(a,"type"));else{var r=
function(v,x,y){return"number"!=typeof y&&(y=0),!(y+x.length>v.length)&&-1!==v.indexOf(x,y)}(l,".")?"property":"argument";l='The "'.concat(l,'" ').concat(r," ").concat(m," ").concat(h(a,"type"))}return l+=". Received type ".concat(g(f))},TypeError),d("ERR_INVALID_ARG_VALUE",function(l,a){var f=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"is invalid";void 0===b&&(b=$h);var m=b.inspect(a);return 128<m.length&&(m="".concat(m.slice(0,128),"...")),"The argument '".concat(l,"' ").concat(f,". Received ").concat(m)},
TypeError),d("ERR_INVALID_RETURN_VALUE",function(l,a,f){var m;return m=f&&f.constructor&&f.constructor.name?"instance of ".concat(f.constructor.name):"type ".concat(g(f)),"Expected ".concat(l,' to be returned from the "').concat(a,'"')+" function but got ".concat(m,".")},TypeError),d("ERR_MISSING_ARGS",function(){for(var l=arguments.length,a=Array(l),f=0;f<l;f++)a[f]=arguments[f];void 0===n&&(n=fV());n(0<a.length,"At least one arg needs to be specified");l="The ";f=a.length;switch(a=a.map(function(m){return'"'.concat(m,
'"')}),f){case 1:l+="".concat(a[0]," argument");break;case 2:l+="".concat(a[0]," and ").concat(a[1]," arguments");break;default:l+=a.slice(0,f-1).join(", "),l+=", and ".concat(a[f-1]," arguments")}return"".concat(l," must be specified")},TypeError),eV.codes=e,eV}function Cla(){function g(N,Y){for(var W=0;W<Y.length;W++){var da=Y[W];da.enumerable=da.enumerable||!1;da.configurable=!0;"value"in da&&(da.writable=!0);Object.defineProperty(N,da.key,da)}}function c(N,Y){return!Y||"object"!==l(Y)&&"function"!=
typeof Y?k(N):Y}function k(N){if(void 0===N)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return N}function d(N){var Y="function"==typeof Map?new Map:void 0;return(d=function(W){function da(){return n(W,arguments,e(this).constructor)}if(null===W||(va=W,-1===Function.toString.call(va).indexOf("[native code]")))return W;var va;if("function"!=typeof W)throw new TypeError("Super expression must either be null or a function");if(void 0!==Y){if(Y.has(W))return Y.get(W);
Y.set(W,da)}return da.prototype=Object.create(W.prototype,{constructor:{value:da,enumerable:!1,writable:!0,configurable:!0}}),b(da,W)})(N)}function h(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(N){return!1}}function n(N,Y,W){return(n=h()?Reflect.construct:function(da,va,za){var L=[null];L.push.apply(L,va);da=new (Function.bind.apply(da,
L));return za&&b(da,za.prototype),da}).apply(null,arguments)}function b(N,Y){return(b=Object.setPrototypeOf||function(W,da){return W.__proto__=da,W})(N,Y)}function e(N){return(e=Object.setPrototypeOf?Object.getPrototypeOf:function(Y){return Y.__proto__||Object.getPrototypeOf(Y)})(N)}function l(N){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(Y){return typeof Y}:function(Y){return Y&&"function"==typeof Symbol&&Y.constructor===Symbol&&Y!==Symbol.prototype?"symbol":typeof Y})(N)}
function a(N,Y,W){return(void 0===W||W>N.length)&&(W=N.length),N.substring(W-Y.length,W)===Y}function f(N){var Y=Object.keys(N),W=Object.create(Object.getPrototypeOf(N));return Y.forEach(function(da){W[da]=N[da]}),Object.defineProperty(W,"message",{value:N.message}),W}function m(N){return x(N,{compact:!1,customInspect:!1,depth:1E3,maxArrayLength:1/0,showHidden:!1,breakLength:1/0,showProxy:!1,sorted:!0,getters:!0})}function r(N,Y,W){var da="",va="",za=0,L="",Z=!1,R=m(N),X=R.split("\n"),ja=m(Y).split("\n"),
fa=0,ua="";if("strictEqual"===W&&"object"===l(N)&&"object"===l(Y)&&null!==N&&null!==Y&&(W="strictEqualObject"),1===X.length&&1===ja.length&&X[0]!==ja[0]){var gb=X[0].length+ja[0].length;if(10>=gb){if(!("object"===l(N)&&null!==N||"object"===l(Y)&&null!==Y||0===N&&0===Y))return"".concat(P[W],"\n\n")+"".concat(X[0]," !== ").concat(ja[0],"\n")}else if("strictEqualObject"!==W&&gb<(v.stderr&&v.stderr.isTTY?v.stderr.columns:80)){for(;X[0][fa]===ja[0][fa];)fa++;2<fa&&(ua="\n  ".concat(function(pa,La){if(La=
Math.floor(La),0==pa.length||0==La)return"";var Hb=pa.length*La;for(La=Math.floor(Math.log(La)/Math.log(2));La;)pa+=pa,La--;return pa+pa.substring(0,Hb-pa.length)}(" ",fa),"^"),fa=0)}}N=X[X.length-1];for(Y=ja[ja.length-1];N===Y&&(2>fa++?L="\n  ".concat(N).concat(L):da=N,X.pop(),ja.pop(),0!==X.length&&0!==ja.length);)N=X[X.length-1],Y=ja[ja.length-1];N=Math.max(X.length,ja.length);if(0===N){da=R.split("\n");if(30<da.length)for(da[26]="".concat(E,"...").concat(J);27<da.length;)da.pop();return"".concat(P.notIdentical,
"\n\n").concat(da.join("\n"),"\n")}3<fa&&(L="\n".concat(E,"...").concat(J).concat(L),Z=!0);""!==da&&(L="\n  ".concat(da).concat(L),da="");R=0;W=P[W]+"\n".concat(F,"+ actual").concat(J," ").concat(I,"- expected").concat(J);Y=" ".concat(E,"...").concat(J," Lines skipped");for(fa=0;fa<N;fa++){gb=fa-za;if(X.length<fa+1)1<gb&&2<fa&&(4<gb?(va+="\n".concat(E,"...").concat(J),Z=!0):3<gb&&(va+="\n  ".concat(ja[fa-2]),R++),va+="\n  ".concat(ja[fa-1]),R++),za=fa,da+="\n".concat(I,"-").concat(J," ").concat(ja[fa]),
R++;else if(ja.length<fa+1)1<gb&&2<fa&&(4<gb?(va+="\n".concat(E,"...").concat(J),Z=!0):3<gb&&(va+="\n  ".concat(X[fa-2]),R++),va+="\n  ".concat(X[fa-1]),R++),za=fa,va+="\n".concat(F,"+").concat(J," ").concat(X[fa]),R++;else{var hb=ja[fa],ta=X[fa],na=ta!==hb&&(!a(ta,",")||ta.slice(0,-1)!==hb);na&&a(hb,",")&&hb.slice(0,-1)===ta&&(na=!1,ta+=",");na?(1<gb&&2<fa&&(4<gb?(va+="\n".concat(E,"...").concat(J),Z=!0):3<gb&&(va+="\n  ".concat(X[fa-2]),R++),va+="\n  ".concat(X[fa-1]),R++),za=fa,va+="\n".concat(F,
"+").concat(J," ").concat(ta),da+="\n".concat(I,"-").concat(J," ").concat(hb),R+=2):(va+=da,da="",1!==gb&&0!==fa||(va+="\n  ".concat(ta),R++))}if(20<R&&fa<N-2)return"".concat(W).concat(Y,"\n").concat(va,"\n").concat(E,"...").concat(J).concat(da,"\n")+"".concat(E,"...").concat(J)}return"".concat(W).concat(Z?Y:"","\n").concat(va).concat(da).concat(L).concat(ua)}if(B7)return C7;B7=!0;var v=mj,x=$h.inspect,y=z7().codes.ERR_INVALID_ARG_TYPE,E="",F="",I="",J="",P={deepStrictEqual:"Expected values to be strictly deep-equal:",
strictEqual:"Expected values to be strictly equal:",strictEqualObject:'Expected "actual" to be reference-equal to "expected":',deepEqual:"Expected values to be loosely deep-equal:",equal:"Expected values to be loosely equal:",notDeepStrictEqual:'Expected "actual" not to be strictly deep-equal to:',notStrictEqual:'Expected "actual" to be strictly unequal to:',notStrictEqualObject:'Expected "actual" not to be reference-equal to "expected":',notDeepEqual:'Expected "actual" not to be loosely deep-equal to:',
notEqual:'Expected "actual" to be loosely unequal to:',notIdentical:"Values identical but not reference-equal:"};return C7=function(N){function Y(da){if(!(this instanceof Y))throw new TypeError("Cannot call a class as a function");if(!0,"object"!==l(da)||null===da)throw new y("options","Object",da);var va=da.message,za=da.operator,L=da.stackStartFn,Z=da.actual;da=da.expected;var R=Error.stackTraceLimit;if(Error.stackTraceLimit=0,null!=va)var X=c(this,e(Y).call(this,String(va)));else if(v.stderr&&
v.stderr.isTTY&&(v.stderr&&v.stderr.getColorDepth&&1!==v.stderr.getColorDepth()?(E="\u001b[34m",F="\u001b[32m",J="\u001b[39m",I="\u001b[31m"):(E="",F="",J="",I="")),"object"===l(Z)&&null!==Z&&"object"===l(da)&&null!==da&&"stack"in Z&&Z instanceof Error&&"stack"in da&&da instanceof Error&&(Z=f(Z),da=f(da)),"deepStrictEqual"===za||"strictEqual"===za)X=c(this,e(Y).call(this,r(Z,da,za)));else if("notDeepStrictEqual"===za||"notStrictEqual"===za){X=P[za];var ja=m(Z).split("\n");if("notStrictEqual"===za&&
"object"===l(Z)&&null!==Z&&(X=P.notStrictEqualObject),30<ja.length)for(ja[26]="".concat(E,"...").concat(J);27<ja.length;)ja.pop();X=1===ja.length?c(this,e(Y).call(this,"".concat(X," ").concat(ja[0]))):c(this,e(Y).call(this,"".concat(X,"\n\n").concat(ja.join("\n"),"\n")))}else{X=m(Z);ja="";var fa=P[za];"notDeepEqual"===za||"notEqual"===za?1024<(X="".concat(P[za],"\n\n").concat(X)).length&&(X="".concat(X.slice(0,1021),"...")):(ja="".concat(m(da)),512<X.length&&(X="".concat(X.slice(0,509),"...")),512<
ja.length&&(ja="".concat(ja.slice(0,509),"...")),"deepEqual"===za||"equal"===za?X="".concat(fa,"\n\n").concat(X,"\n\nshould equal\n\n"):ja=" ".concat(za," ").concat(ja));X=c(this,e(Y).call(this,"".concat(X).concat(ja)))}return Error.stackTraceLimit=R,X.generatedMessage=!va,Object.defineProperty(k(X),"name",{value:"AssertionError [ERR_ASSERTION]",enumerable:!1,writable:!0,configurable:!0}),X.code="ERR_ASSERTION",X.actual=Z,X.expected=da,X.operator=za,Error.captureStackTrace&&Error.captureStackTrace(k(X),
L),X.stack,X.name="AssertionError",c(X)}var W;return!function(da,va){if("function"!=typeof va&&null!==va)throw new TypeError("Super expression must either be null or a function");da.prototype=Object.create(va&&va.prototype,{constructor:{value:da,writable:!0,configurable:!0}});va&&b(da,va)}(Y,N),W=[{key:"toString",value:function(){return"".concat(this.name," [").concat(this.code,"]: ").concat(this.message)}},{key:x.custom,value:function(da,va){return x(this,function(za){for(var L=1;L<arguments.length;L++){var Z=
null!=arguments[L]?arguments[L]:{},R=Object.keys(Z);"function"==typeof Object.getOwnPropertySymbols&&(R=R.concat(Object.getOwnPropertySymbols(Z).filter(function(X){return Object.getOwnPropertyDescriptor(Z,X).enumerable})));R.forEach(function(X){var ja=Z[X];X in za?Object.defineProperty(za,X,{value:ja,enumerable:!0,configurable:!0,writable:!0}):za[X]=ja})}return za}({},va,{customInspect:!1,depth:0}))}}],g(Y.prototype,W),Y}(d(Error))}function D7(g,c){if(!(g=function(k){if(Array.isArray(k))return k}(g)||
function(k,d){var h=[],n=!0,b=!1,e=void 0;try{for(var l,a=k[Symbol.iterator]();!(n=(l=a.next()).done)&&(h.push(l.value),!d||h.length!==d);n=!0);}catch(f){b=!0,e=f}finally{try{n||null==a.return||a.return()}finally{if(b)throw e;}}return h}(g,c)))throw new TypeError("Invalid attempt to destructure non-iterable instance");return g}function Eu(g){return(Eu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(c){return typeof c}:function(c){return c&&"function"==typeof Symbol&&c.constructor===
Symbol&&c!==Symbol.prototype?"symbol":typeof c})(g)}function gV(g){return g.call.bind(g)}function Dla(g){if(0===g.length||10<g.length)return!0;for(var c=0;c<g.length;c++){var k=g.charCodeAt(c);if(48>k||57<k)return!0}return 10===g.length&&g>=Math.pow(2,32)}function gN(g){return Object.keys(g).filter(Dla).concat(hN(g).filter(Object.prototype.propertyIsEnumerable.bind(g)))}function E7(g,c){if(g===c)return 0;for(var k=g.length,d=c.length,h=0,n=Math.min(k,d);h<n;++h)if(g[h]!==c[h]){k=g[h];d=c[h];break}return k<
d?-1:d<k?1:0}function Ws(g,c,k,d){if(g===c)return 0!==g||!k||F7(g,c);if(k){if("object"!==Eu(g))return"number"==typeof g&&hV(g)&&hV(c);if("object"!==Eu(c)||null===g||null===c||Object.getPrototypeOf(g)!==Object.getPrototypeOf(c))return!1}else{if(null===g||"object"!==Eu(g))return(null===c||"object"!==Eu(c))&&g==c;if(null===c||"object"!==Eu(c))return!1}var h=G7(g);if(h!==G7(c))return!1;if(Array.isArray(g)){if(g.length!==c.length)return!1;h=gN(g);var n=gN(c);return h.length===n.length&&XH(g,c,k,d,1,h)}if("[object Object]"===
h&&(!iN(g)&&iN(c)||!jN(g)&&jN(c)))return!1;if(H7(g)){if(!H7(c)||Date.prototype.getTime.call(g)!==Date.prototype.getTime.call(c))return!1}else if(I7(g)){if(!I7(c)||(Ela?g.source!==c.source||g.flags!==c.flags:RegExp.prototype.toString.call(g)!==RegExp.prototype.toString.call(c)))return!1}else if(Fla(g)||g instanceof Error){if(g.message!==c.message||g.name!==c.name)return!1}else{if(Gla(g)){if(k||!Hla(g)&&!Ila(g)){if(!function(b,e){return b.byteLength===e.byteLength&&0===E7(new Uint8Array(b.buffer,b.byteOffset,
b.byteLength),new Uint8Array(e.buffer,e.byteOffset,e.byteLength))}(g,c))return!1}else if(!function(b,e){if(b.byteLength!==e.byteLength)return!1;for(var l=0;l<b.byteLength;l++)if(b[l]!==e[l])return!1;return!0}(g,c))return!1;h=gN(g);n=gN(c);return h.length===n.length&&XH(g,c,k,d,0,h)}if(jN(g))return!(!jN(c)||g.size!==c.size)&&XH(g,c,k,d,2);if(iN(g))return!(!iN(c)||g.size!==c.size)&&XH(g,c,k,d,3);if(Jla(g)){if(g.byteLength!==c.byteLength||0!==E7(new Uint8Array(g),new Uint8Array(c)))return!1}else if(Kla(g)&&
!function(b,e){return J7(b)?J7(e)&&F7(Number.prototype.valueOf.call(b),Number.prototype.valueOf.call(e)):K7(b)?K7(e)&&String.prototype.valueOf.call(b)===String.prototype.valueOf.call(e):L7(b)?L7(e)&&Boolean.prototype.valueOf.call(b)===Boolean.prototype.valueOf.call(e):M7(b)?M7(e)&&BigInt.prototype.valueOf.call(b)===BigInt.prototype.valueOf.call(e):Lla(e)&&Symbol.prototype.valueOf.call(b)===Symbol.prototype.valueOf.call(e)}(g,c))return!1}return XH(g,c,k,d,0)}function N7(g,c){return c.filter(function(k){return kN(g,
k)})}function XH(g,c,k,d,h,n){if(5===arguments.length){n=Object.keys(g);var b=Object.keys(c);if(n.length!==b.length)return!1}for(var e=0;e<n.length;e++)if(!YH(c,n[e]))return!1;if(k&&5===arguments.length)if(b=hN(g),0!==b.length){var l=0;for(e=0;e<b.length;e++){var a=b[e];if(kN(g,a)){if(!kN(c,a))return!1;n.push(a);l++}else if(kN(c,a))return!1}e=hN(c);if(b.length!==e.length&&N7(c,e).length!==l)return!1}else if(b=hN(c),0!==b.length&&0!==N7(c,b).length)return!1;if(0===n.length&&(0===h||1===h&&0===g.length||
0===g.size))return!0;if(void 0===d)d={val1:new Map,val2:new Map,position:0};else{b=d.val1.get(g);if(void 0!==b&&(l=d.val2.get(c),void 0!==l))return b===l;d.position++}d.val1.set(g,d.position);d.val2.set(c,d.position);b=Mla(g,c,k,n,d,h);return d.val1.delete(g),d.val2.delete(c),b}function O7(g,c,k,d){for(var h=lN(g),n=0;n<h.length;n++){var b=h[n];if(Ws(c,b,k,d))return g.delete(b),!0}return!1}function P7(g){switch(Eu(g)){case "undefined":return null;case "object":return;case "symbol":return!1;case "string":g=
+g;case "number":if(hV(g))return!1}return!0}function Q7(g,c,k,d,h,n){for(var b=lN(g),e=0;e<b.length;e++){var l=b[e];if(Ws(k,l,h,n)&&Ws(d,c.get(l),h,n))return g.delete(l),!0}return!1}function Mla(g,c,k,d,h,n){var b=0;if(2===n){if(!function(e,l,a,f){for(var m=null,r=lN(e),v=0;v<r.length;v++){var x=r[v];if("object"===Eu(x)&&null!==x)null===m&&(m=new Set),m.add(x);else if(!l.has(x)){if(a)return!1;var y=e,E=l,F=P7(x);if(null!=F?!F:!E.has(F)||y.has(F))return!1;null===m&&(m=new Set);m.add(x)}}if(null!==
m){l=lN(l);for(r=0;r<l.length;r++)if(v=l[r],"object"===Eu(v)&&null!==v){if(!O7(m,v,a,f))return!1}else if(!a&&!e.has(v)&&!O7(m,v,a,f))return!1;return 0===m.size}return!0}(g,c,k,h))return!1}else if(3===n){if(!function(e,l,a,f){for(var m=null,r=R7(e),v=0;v<r.length;v++){var x=D7(r[v],2),y=x[0],E=x[1];if("object"===Eu(y)&&null!==y)null===m&&(m=new Set),m.add(y);else if(x=l.get(y),void 0===x&&!l.has(y)||!Ws(E,x,a,f)){if(a)return!1;x=e;var F=l,I=f,J=P7(y);if(null!=J)x=J;else{var P=F.get(J);x=!(void 0===
P&&!F.has(J)||!Ws(E,P,!1,I))&&!x.has(J)&&Ws(E,P,!1,I)}if(!x)return!1;null===m&&(m=new Set);m.add(y)}}if(null!==m){l=R7(l);for(r=0;r<l.length;r++)if(v=D7(l[r],2),v=(y=v[0],v[1]),"object"===Eu(y)&&null!==y){if(!Q7(m,e,y,v,a,f))return!1}else if(!(a||e.has(y)&&Ws(e.get(y),v,!1,f)||Q7(m,e,y,v,!1,f)))return!1;return 0===m.size}return!0}(g,c,k,h))return!1}else if(1===n)for(;b<g.length;b++){if(!YH(g,b)){if(YH(c,b))return!1;for(d=Object.keys(g);b<d.length;b++)if(n=d[b],!YH(c,n)||!Ws(g[n],c[n],k,h))return!1;
return d.length===Object.keys(c).length}if(!YH(c,b)||!Ws(g[b],c[b],k,h))return!1}for(b=0;b<d.length;b++)if(n=d[b],!Ws(g[n],c[n],k,h))return!1;return!0}function fV(){function g(X){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(ja){return typeof ja}:function(ja){return ja&&"function"==typeof Symbol&&ja.constructor===Symbol&&ja!==Symbol.prototype?"symbol":typeof ja})(X)}function c(){v=S7.isDeepEqual;x=S7.isDeepStrictEqual}function k(X){if(X.message instanceof Error)throw X.message;
throw new N(X);}function d(X,ja,fa,ua){if(!fa){var gb=!1;if(0===ja)gb=!0,ua="No value argument passed to `assert.ok()`";else if(ua instanceof Error)throw ua;X=new N({actual:fa,expected:!0,message:ua,operator:"==",stackStartFn:X});throw X.generatedMessage=gb,X;}}function h(){for(var X=arguments.length,ja=Array(X),fa=0;fa<X;fa++)ja[fa]=arguments[fa];d.apply(void 0,[h,ja.length].concat(ja))}function n(X,ja,fa,ua){if("function"!=typeof ja){if(da(ja))return ja.test(X);if(2===arguments.length)throw new F("expected",
["Function","RegExp"],ja);if("object"!==g(X)||null===X){var gb=new N({actual:X,expected:ja,message:fa,operator:"deepStrictEqual",stackStartFn:ua});throw gb.operator=ua.name,gb;}var hb=Object.keys(ja);if(ja instanceof Error)hb.push("name","message");else if(0===hb.length)throw new I("error",ja,"may not be an empty object");return void 0===v&&c(),hb.forEach(function(ta){if(!("string"==typeof X[ta]&&da(ja[ta])&&ja[ta].test(X[ta])||ta in X&&x(X[ta],ja[ta]))){if(!fa){ta=new R(X,hb);var na=new R(ja,hb,
X);ta=new N({actual:ta,expected:na,operator:"deepStrictEqual",stackStartFn:ua});throw ta.actual=X,ta.expected=ja,ta.operator=ua.name,ta;}k({actual:X,expected:ja,message:fa,operator:ua.name,stackStartFn:ua})}}),!0}return void 0!==ja.prototype&&X instanceof ja||!Error.isPrototypeOf(ja)&&!0===ja.call({},X)}function b(X){if("function"!=typeof X)throw new F("fn","Function",X);try{X()}catch(ja){return ja}return Z}function e(X){return W(X)||null!==X&&"object"===g(X)&&"function"==typeof X.then&&"function"==
typeof X.catch}function l(X){return Promise.resolve().then(function(){var ja;if("function"==typeof X){if(!e(ja=X()))throw new J("instance of Promise","promiseFn",ja);}else{if(!e(X))throw new F("promiseFn",["Function","Promise"],X);ja=X}return Promise.resolve().then(function(){return ja}).then(function(){return Z}).catch(function(fa){return fa})})}function a(X,ja,fa,ua){if("string"==typeof fa){if(4===arguments.length)throw new F("error",["Object","Error","Function","RegExp"],fa);if("object"===g(ja)&&
null!==ja){if(ja.message===fa)throw new E("error/message",'The error message "'.concat(ja.message,'" is identical to the message.'));}else if(ja===fa)throw new E("error/message",'The error "'.concat(ja,'" is identical to the message.'));ua=fa;fa=void 0}else if(null!=fa&&"object"!==g(fa)&&"function"!=typeof fa)throw new F("error",["Object","Error","Function","RegExp"],fa);if(ja===Z){var gb="";fa&&fa.name&&(gb+=" (".concat(fa.name,")"));gb+=ua?": ".concat(ua):".";k({actual:void 0,expected:fa,operator:X.name,
message:"Missing expected ".concat("rejects"===X.name?"rejection":"exception").concat(gb),stackStartFn:X})}if(fa&&!n(ja,fa,ua,X))throw ja;}function f(X,ja,fa,ua){if(ja!==Z){if("string"==typeof fa&&(ua=fa,fa=void 0),!fa||n(ja,fa))ua=ua?": ".concat(ua):".",k({actual:ja,expected:fa,operator:X.name,message:"Got unwanted ".concat("doesNotReject"===X.name?"rejection":"exception").concat(ua,"\n")+'Actual message: "'.concat(ja&&ja.message,'"'),stackStartFn:X});throw ja;}}function m(){for(var X=arguments.length,
ja=Array(X),fa=0;fa<X;fa++)ja[fa]=arguments[fa];d.apply(void 0,[m,ja.length].concat(ja))}if(T7)return iV;T7=!0;var r=mj,v,x,y=z7().codes,E=y.ERR_AMBIGUOUS_ARGUMENT,F=y.ERR_INVALID_ARG_TYPE,I=y.ERR_INVALID_ARG_VALUE,J=y.ERR_INVALID_RETURN_VALUE,P=y.ERR_MISSING_ARGS,N=Cla(),Y=$h.inspect;y=$h.types;var W=y.isPromise,da=y.isRegExp;y=Object.assign?Object.assign:Nla.assign;var va=Object.is?Object.is:U7,za=!1,L=iV=h,Z={};L.fail=function ta(ja,fa,ua,gb,hb){var na=arguments.length;if(0===na)var pa="Failed";
else 1===na?(ua=ja,ja=void 0):(!1===za&&(za=!0,(r.emitWarning?r.emitWarning:console.warn.bind(console))("assert.fail() with more than one argument is deprecated. Please use assert.strictEqual() instead or only pass a message.","DeprecationWarning","DEP0094")),2===na&&(gb="!="));if(ua instanceof Error)throw ua;na={actual:ja,expected:fa,operator:void 0===gb?"fail":gb,stackStartFn:hb||ta};void 0!==ua&&(na.message=ua);na=new N(na);throw pa&&(na.message=pa,na.generatedMessage=!0),na;};L.AssertionError=
N;L.ok=h;L.equal=function hb(fa,ua,gb){if(2>arguments.length)throw new P("actual","expected");fa!=ua&&k({actual:fa,expected:ua,message:gb,operator:"==",stackStartFn:hb})};L.notEqual=function ta(ua,gb,hb){if(2>arguments.length)throw new P("actual","expected");ua==gb&&k({actual:ua,expected:gb,message:hb,operator:"!=",stackStartFn:ta})};L.deepEqual=function na(gb,hb,ta){if(2>arguments.length)throw new P("actual","expected");void 0===v&&c();v(gb,hb)||k({actual:gb,expected:hb,message:ta,operator:"deepEqual",
stackStartFn:na})};L.notDeepEqual=function pa(hb,ta,na){if(2>arguments.length)throw new P("actual","expected");void 0===v&&c();v(hb,ta)&&k({actual:hb,expected:ta,message:na,operator:"notDeepEqual",stackStartFn:pa})};L.deepStrictEqual=function La(ta,na,pa){if(2>arguments.length)throw new P("actual","expected");void 0===v&&c();x(ta,na)||k({actual:ta,expected:na,message:pa,operator:"deepStrictEqual",stackStartFn:La})};L.notDeepStrictEqual=function Hb(na,pa,La){if(2>arguments.length)throw new P("actual",
"expected");void 0===v&&c();x(na,pa)&&k({actual:na,expected:pa,message:La,operator:"notDeepStrictEqual",stackStartFn:Hb})};L.strictEqual=function fc(pa,La,Hb){if(2>arguments.length)throw new P("actual","expected");va(pa,La)||k({actual:pa,expected:La,message:Hb,operator:"strictEqual",stackStartFn:fc})};L.notStrictEqual=function Ob(La,Hb,fc){if(2>arguments.length)throw new P("actual","expected");va(La,Hb)&&k({actual:La,expected:Hb,message:fc,operator:"notStrictEqual",stackStartFn:Ob})};var R=function Zb(Hb,
fc,Ob){var Hc=this;if(!(this instanceof Zb))throw new TypeError("Cannot call a class as a function");!0;fc.forEach(function(Gb){Gb in Hb&&(void 0!==Ob&&"string"==typeof Ob[Gb]&&da(Hb[Gb])&&Hb[Gb].test(Ob[Gb])?Hc[Gb]=Ob[Gb]:Hc[Gb]=Hb[Gb])})};return L.throws=function Ob(fc){for(var Zb=arguments.length,Hc=Array(1<Zb?Zb-1:0),Gb=1;Gb<Zb;Gb++)Hc[Gb-1]=arguments[Gb];a.apply(void 0,[Ob,b(fc)].concat(Hc))},L.rejects=function Zb(Ob){for(var Hc=arguments.length,Gb=Array(1<Hc?Hc-1:0),dd=1;dd<Hc;dd++)Gb[dd-1]=
arguments[dd];return l(Ob).then(function(Gd){return a.apply(void 0,[Zb,Gd].concat(Gb))})},L.doesNotThrow=function Hc(Zb){for(var Gb=arguments.length,dd=Array(1<Gb?Gb-1:0),Gd=1;Gd<Gb;Gd++)dd[Gd-1]=arguments[Gd];f.apply(void 0,[Hc,b(Zb)].concat(dd))},L.doesNotReject=function Gb(Hc){for(var dd=arguments.length,Gd=Array(1<dd?dd-1:0),ma=1;ma<dd;ma++)Gd[ma-1]=arguments[ma];return l(Hc).then(function(Ga){return f.apply(void 0,[Gb,Ga].concat(Gd))})},L.ifError=function dd(Gb){if(null!=Gb){var Gd="ifError got unwanted exception: ";
"object"===g(Gb)&&"string"==typeof Gb.message?0===Gb.message.length&&Gb.constructor?Gd+=Gb.constructor.name:Gd+=Gb.message:Gd+=Y(Gb);Gd=new N({actual:Gb,expected:null,operator:"ifError",message:Gd,stackStartFn:dd});Gb=Gb.stack;if("string"==typeof Gb){Gb=Gb.split("\n");Gb.shift();for(var ma=Gd.stack.split("\n"),Ga=0;Ga<Gb.length;Ga++){var Ja=ma.indexOf(Gb[Ga]);if(-1!==Ja){ma=ma.slice(0,Ja);break}}Gd.stack="".concat(ma.join("\n"),"\n").concat(Gb.join("\n"))}throw Gd;}},L.strict=y(m,L,{equal:L.strictEqual,
deepEqual:L.deepStrictEqual,notEqual:L.notStrictEqual,notDeepEqual:L.notDeepStrictEqual}),L.strict.strict=L.strict,iV}function il(g,c,k){if(!((this||Gi)instanceof il))return new il(g,c,k);var d=this||Gi;mN.call(this||Gi);this.setMaxListeners(Infinity);"function"===typeof c&&(k=c,c={});c=c||{};if(!g||"object"!==typeof g){g=new Ola("First argument must be an abstract-leveldown compliant store");if("function"===typeof k)return nN.nextTick(k,g);throw g;}Pla.strictEqual(typeof g.status,"string",".status required, old abstract-leveldown");
(this||Gi).options=bF(c);(this||Gi)._db=g;(this||Gi).db=new V7(g);this.open(k||function(h){h&&d.emit("error",h)});(this||Gi).supports=Qla((this||Gi).db.supports,{status:!1,deferredOpen:!0,openCallback:!0,promises:!0,streams:!0});Object.keys((this||Gi).supports.additionalMethods).forEach(function(h){null==(this||Gi)[h]&&((this||Gi)[h]=function(){return(this||Gi).db[h].apply((this||Gi).db,arguments)})},this||Gi)}function ZH(g,c){if(!g._isOpening()&&!g.isOpen())return nN.nextTick(c,new W7("Database is not open")),
!0}function tw(g,c){return Object.hasOwnProperty.call(g,c)&&c}function Rla(g){return g}function oN(g){return g}function jV(g){return void 0===g||null===g||kV.isBuffer(g)}function Lp(g){if(!((this||ny)instanceof Lp))return new Lp(g);(this||ny).opts=g||{};(this||ny).encodings=lV}function Sla(g){return g.toString((this||Og).encoding)}function Tla(g){(this||Og).charReceived=g.length%2;(this||Og).charLength=(this||Og).charReceived?2:0}function Ula(g){(this||Og).charReceived=g.length%3;(this||Og).charLength=
(this||Og).charReceived?3:0}function X7(){function g(F,I,J){(this||Hi).chunk=F;(this||Hi).encoding=I;(this||Hi).callback=J}function c(F,I){var J=cF();F=F||{};var P=F.highWaterMark,N=F.objectMode?16:16384;(this||Hi).highWaterMark=P||0===P?P:N;(this||Hi).objectMode=!!F.objectMode;I instanceof J&&((this||Hi).objectMode=(this||Hi).objectMode||!!F.writableObjectMode);(this||Hi).highWaterMark=~~(this||Hi).highWaterMark;(this||Hi).needDrain=!1;(this||Hi).ending=!1;(this||Hi).ended=!1;(this||Hi).finished=
!1;(this||Hi).decodeStrings=!1!==F.decodeStrings;(this||Hi).defaultEncoding=F.defaultEncoding||"utf8";(this||Hi).length=0;(this||Hi).writing=!1;(this||Hi).corked=0;(this||Hi).sync=!0;(this||Hi).bufferProcessing=!1;(this||Hi).onwrite=function(Y){a(I,Y)};(this||Hi).writecb=null;(this||Hi).writelen=0;(this||Hi).buffer=[];(this||Hi).pendingcb=0;(this||Hi).prefinished=!1;(this||Hi).errorEmitted=!1}function k(F){var I=cF();if(!((this||Hi)instanceof k||(this||Hi)instanceof I))return new k(F);(this||Hi)._writableState=
new c(F,this||Hi);(this||Hi).writable=!0;E.call(this||Hi)}function d(F,I,J){var P=Error("write after end");F.emit("error",P);v.nextTick(function(){J(P)})}function h(F,I,J,P){var N=!0;if(!(y.isBuffer(J)||y.isString(J)||y.isNullOrUndefined(J)||I.objectMode)){var Y=new TypeError("Invalid non-string/buffer chunk");F.emit("error",Y);v.nextTick(function(){P(Y)});N=!1}return N}function n(F,I,J,P,N){var Y=P;!I.objectMode&&!1!==I.decodeStrings&&y.isString(J)&&(J=new x(J,Y));y.isBuffer(J)&&(P="buffer");Y=I.objectMode?
1:J.length;I.length+=Y;var W=I.length<I.highWaterMark;W||(I.needDrain=!0);I.writing||I.corked?I.buffer.push(new g(J,P,N)):b(F,I,!1,Y,J,P,N);return W}function b(F,I,J,P,N,Y,W){I.writelen=P;I.writecb=W;I.writing=!0;I.sync=!0;J?F._writev(N,I.onwrite):F._write(N,Y,I.onwrite);I.sync=!1}function e(F,I,J,P,N){J?v.nextTick(function(){I.pendingcb--;N(P)}):(I.pendingcb--,N(P));F._writableState.errorEmitted=!0;F.emit("error",P)}function l(F){F.writing=!1;F.writecb=null;F.length-=F.writelen;F.writelen=0}function a(F,
I){var J=F._writableState,P=J.sync,N=J.writecb;l(J);if(I)e(F,J,P,I,N);else{var Y=J.ending&&0===J.length&&!J.finished&&!J.writing;Y||J.corked||J.bufferProcessing||!J.buffer.length||m(F,J);P?v.nextTick(function(){f(F,J,Y,N)}):f(F,J,Y,N)}}function f(F,I,J,P){!J&&0===I.length&&I.needDrain&&(I.needDrain=!1,F.emit("drain"));I.pendingcb--;P();r(F,I)}function m(F,I){I.bufferProcessing=!0;if(F._writev&&1<I.buffer.length){for(var J=[],P=0;P<I.buffer.length;P++)J.push(I.buffer[P].callback);I.pendingcb++;b(F,
I,!0,I.length,I.buffer,"",function(W){for(var da=0;da<J.length;da++)I.pendingcb--,J[da](W)});I.buffer=[]}else{for(P=0;P<I.buffer.length;P++){var N=I.buffer[P],Y=N.chunk;b(F,I,!1,I.objectMode?1:Y.length,Y,N.encoding,N.callback);if(I.writing){P++;break}}P<I.buffer.length?I.buffer=I.buffer.slice(P):I.buffer.length=0}I.bufferProcessing=!1}function r(F,I){var J=I.ending&&0===I.length&&!I.finished&&!I.writing;J&&(0===I.pendingcb?(I.prefinished||(I.prefinished=!0,F.emit("prefinish")),I.finished=!0,F.emit("finish")):
I.prefinished||(I.prefinished=!0,F.emit("prefinish")));return J}if(Y7)return mV;Y7=!0;var v=mj;mV=k;var x=oi.Buffer;k.WritableState=c;var y=Sm;y.inherits=wl;var E=tC;y.inherits(k,E);k.prototype.pipe=function(){this.emit("error",Error("Cannot pipe. Not readable."))};k.prototype.write=function(F,I,J){var P=(this||Hi)._writableState,N=!1;y.isFunction(I)&&(J=I,I=null);y.isBuffer(F)?I="buffer":I||(I=P.defaultEncoding);y.isFunction(J)||(J=function(){});P.ended?d(this||Hi,P,J):h(this||Hi,P,F,J)&&(P.pendingcb++,
N=n(this||Hi,P,F,I,J));return N};k.prototype.cork=function(){(this||Hi)._writableState.corked++};k.prototype.uncork=function(){var F=(this||Hi)._writableState;F.corked&&(F.corked--,F.writing||F.corked||F.finished||F.bufferProcessing||!F.buffer.length||m(this||Hi,F))};k.prototype._write=function(F,I,J){J(Error("not implemented"))};k.prototype._writev=null;k.prototype.end=function(F,I,J){var P=(this||Hi)._writableState;y.isFunction(F)?(J=F,I=F=null):y.isFunction(I)&&(J=I,I=null);y.isNullOrUndefined(F)||
this.write(F,I);P.corked&&(P.corked=1,this.uncork());if(!P.ending&&!P.finished){F=this||Hi;P.ending=!0;r(F,P);if(J)if(P.finished)v.nextTick(J);else F.once("finish",J);P.ended=!0}};return mV}function cF(){function g(e){if(!((this||Fu)instanceof g))return new g(e);n.call(this||Fu,e);b.call(this||Fu,e);e&&!1===e.readable&&((this||Fu).readable=!1);e&&!1===e.writable&&((this||Fu).writable=!1);(this||Fu).allowHalfOpen=!0;e&&!1===e.allowHalfOpen&&((this||Fu).allowHalfOpen=!1);this.once("end",c)}function c(){(this||
Fu).allowHalfOpen||(this||Fu)._writableState.ended||k.nextTick((this||Fu).end.bind(this||Fu))}if(Z7)return nV;Z7=!0;var k=mj;nV=g;var d=Object.keys||function(e){var l=[],a;for(a in e)l.push(a);return l},h=Sm;h.inherits=wl;var n=$7(),b=X7();h.inherits(g,n);(function(e,l){for(var a=0,f=e.length;a<f;a++)l(e[a],a)})(d(b.prototype),function(e){g.prototype[e]||(g.prototype[e]=b.prototype[e])});return nV}function $7(){function g(N,Y){var W=cF();N=N||{};var da=N.highWaterMark,va=N.objectMode?16:16384;(this||
Xf).highWaterMark=da||0===da?da:va;(this||Xf).highWaterMark=~~(this||Xf).highWaterMark;(this||Xf).buffer=[];(this||Xf).length=0;(this||Xf).pipes=null;(this||Xf).pipesCount=0;(this||Xf).flowing=null;(this||Xf).ended=!1;(this||Xf).endEmitted=!1;(this||Xf).reading=!1;(this||Xf).sync=!0;(this||Xf).needReadable=!1;(this||Xf).emittedReadable=!1;(this||Xf).readableListening=!1;(this||Xf).objectMode=!!N.objectMode;Y instanceof W&&((this||Xf).objectMode=(this||Xf).objectMode||!!N.readableObjectMode);(this||
Xf).defaultEncoding=N.defaultEncoding||"utf8";(this||Xf).ranOut=!1;(this||Xf).awaitDrain=0;(this||Xf).readingMore=!1;(this||Xf).decoder=null;(this||Xf).encoding=null;N.encoding&&(J||(J=oV.StringDecoder),(this||Xf).decoder=new J(N.encoding),(this||Xf).encoding=N.encoding)}function c(N){cF();if(!((this||Xf)instanceof c))return new c(N);(this||Xf)._readableState=new g(N,this||Xf);(this||Xf).readable=!0;F.call(this||Xf)}function k(N,Y,W,da,va){var za=W;var L=null;I.isBuffer(za)||I.isString(za)||I.isNullOrUndefined(za)||
Y.objectMode||(L=new TypeError("Invalid non-string/buffer chunk"));(za=L)?N.emit("error",za):I.isNullOrUndefined(W)?(Y.reading=!1,Y.ended||(Y.decoder&&!Y.ended&&(W=Y.decoder.end())&&W.length&&(Y.buffer.push(W),Y.length+=Y.objectMode?1:W.length),Y.ended=!0,h(N))):Y.objectMode||W&&0<W.length?Y.ended&&!va?(W=Error("stream.push() after EOF"),N.emit("error",W)):Y.endEmitted&&va?(W=Error("stream.unshift() after end event"),N.emit("error",W)):(!Y.decoder||va||da||(W=Y.decoder.write(W)),va||(Y.reading=!1),
Y.flowing&&0===Y.length&&!Y.sync?(N.emit("data",W),N.read(0)):(Y.length+=Y.objectMode?1:W.length,va?Y.buffer.unshift(W):Y.buffer.push(W),Y.needReadable&&h(N)),b(N,Y)):va||(Y.reading=!1);return!Y.ended&&(Y.needReadable||Y.length<Y.highWaterMark||0===Y.length)}function d(N,Y){if(0===Y.length&&Y.ended)return 0;if(Y.objectMode)return 0===N?0:1;if(isNaN(N)||I.isNull(N))return Y.flowing&&Y.buffer.length?Y.buffer[0].length:Y.length;if(0>=N)return 0;if(N>Y.highWaterMark){var W=N;if(8388608<=W)W=8388608;else{W--;
for(var da=1;32>da;da<<=1)W|=W>>da;W++}Y.highWaterMark=W}if(N>Y.length){if(Y.ended)return Y.length;Y.needReadable=!0;return 0}return N}function h(N){var Y=N._readableState;Y.needReadable=!1;Y.emittedReadable||(P("emitReadable",Y.flowing),Y.emittedReadable=!0,Y.sync?v.nextTick(function(){n(N)}):n(N))}function n(N){P("emit readable");N.emit("readable");a(N)}function b(N,Y){Y.readingMore||(Y.readingMore=!0,v.nextTick(function(){for(var W=Y.length;!Y.reading&&!Y.flowing&&!Y.ended&&Y.length<Y.highWaterMark&&
(P("maybeReadMore read 0"),N.read(0),W!==Y.length);)W=Y.length;Y.readingMore=!1}))}function e(N){return function(){var Y=N._readableState;P("pipeOnDrain",Y.awaitDrain);Y.awaitDrain&&Y.awaitDrain--;0===Y.awaitDrain&&E.listenerCount(N,"data")&&(Y.flowing=!0,a(N))}}function l(N,Y){Y.resumeScheduled||(Y.resumeScheduled=!0,v.nextTick(function(){Y.resumeScheduled=!1;N.emit("resume");a(N);Y.flowing&&!Y.reading&&N.read(0)}))}function a(N){var Y=N._readableState;P("flow",Y.flowing);if(Y.flowing){do var W=
N.read();while(null!==W&&Y.flowing)}}function f(N,Y){var W=Y.buffer,da=Y.length,va=!!Y.decoder;Y=!!Y.objectMode;if(0===W.length)return null;if(0===da)da=null;else if(Y)da=W.shift();else if(!N||N>=da)da=va?W.join(""):y.concat(W,da),W.length=0;else if(N<W[0].length)Y=W[0],da=Y.slice(0,N),W[0]=Y.slice(N);else if(N===W[0].length)da=W.shift();else{da=va?"":new y(N);for(var za=0,L=0,Z=W.length;L<Z&&za<N;L++){Y=W[0];var R=Math.min(N-za,Y.length);va?da+=Y.slice(0,R):Y.copy(da,za,0,R);R<Y.length?W[0]=Y.slice(R):
W.shift();za+=R}}return da}function m(N){var Y=N._readableState;if(0<Y.length)throw Error("endReadable called on non-empty stream");Y.endEmitted||(Y.ended=!0,v.nextTick(function(){Y.endEmitted||0!==Y.length||(Y.endEmitted=!0,N.readable=!1,N.emit("end"))}))}function r(N,Y){for(var W=0,da=N.length;W<da;W++)Y(N[W],W)}if(a8)return pV;a8=!0;var v=mj;pV=c;var x=Vla,y=oi.Buffer;c.ReadableState=g;var E=jw.EventEmitter;E.listenerCount||(E.listenerCount=function(N,Y){return N.listeners(Y).length});var F=tC,
I=Sm;I.inherits=wl;var J,P=Wla;P=P&&P.debuglog?P.debuglog("stream"):function(){};I.inherits(c,F);c.prototype.push=function(N,Y){var W=(this||Xf)._readableState;I.isString(N)&&!W.objectMode&&(Y=Y||W.defaultEncoding,Y!==W.encoding&&(N=new y(N,Y),Y=""));return k(this||Xf,W,N,Y,!1)};c.prototype.unshift=function(N){return k(this||Xf,(this||Xf)._readableState,N,"",!0)};c.prototype.setEncoding=function(N){J||(J=oV.StringDecoder);(this||Xf)._readableState.decoder=new J(N);(this||Xf)._readableState.encoding=
N;return this||Xf};c.prototype.read=function(N){P("read",N);var Y=(this||Xf)._readableState,W=N;if(!I.isNumber(N)||0<N)Y.emittedReadable=!1;if(0===N&&Y.needReadable&&(Y.length>=Y.highWaterMark||Y.ended))return P("read: emitReadable",Y.length,Y.ended),0===Y.length&&Y.ended?m(this||Xf):h(this||Xf),null;N=d(N,Y);if(0===N&&Y.ended)return 0===Y.length&&m(this||Xf),null;var da=Y.needReadable;P("need readable",da);if(0===Y.length||Y.length-N<Y.highWaterMark)da=!0,P("length less than watermark",da);if(Y.ended||
Y.reading)da=!1,P("reading or ended",da);da&&(P("do read"),Y.reading=!0,Y.sync=!0,0===Y.length&&(Y.needReadable=!0),this._read(Y.highWaterMark),Y.sync=!1);da&&!Y.reading&&(N=d(W,Y));da=0<N?f(N,Y):null;I.isNull(da)&&(Y.needReadable=!0,N=0);Y.length-=N;0!==Y.length||Y.ended||(Y.needReadable=!0);W!==N&&Y.ended&&0===Y.length&&m(this||Xf);I.isNull(da)||this.emit("data",da);return da};c.prototype._read=function(N){this.emit("error",Error("not implemented"))};c.prototype.pipe=function(N,Y){function W(gb){P("onunpipe");
gb===ja&&va()}function da(){P("onend");N.end()}function va(){P("cleanup");N.removeListener("close",Z);N.removeListener("finish",R);N.removeListener("drain",ua);N.removeListener("error",L);N.removeListener("unpipe",W);ja.removeListener("end",da);ja.removeListener("end",va);ja.removeListener("data",za);!fa.awaitDrain||N._writableState&&!N._writableState.needDrain||ua()}function za(gb){P("ondata");!1===N.write(gb)&&(P("false write response, pause",ja._readableState.awaitDrain),ja._readableState.awaitDrain++,
ja.pause())}function L(gb){P("onerror",gb);X();N.removeListener("error",L);0===E.listenerCount(N,"error")&&N.emit("error",gb)}function Z(){N.removeListener("finish",R);X()}function R(){P("onfinish");N.removeListener("close",Z);X()}function X(){P("unpipe");ja.unpipe(N)}var ja=this||Xf,fa=(this||Xf)._readableState;switch(fa.pipesCount){case 0:fa.pipes=N;break;case 1:fa.pipes=[fa.pipes,N];break;default:fa.pipes.push(N)}fa.pipesCount+=1;P("pipe count=%d opts=%j",fa.pipesCount,Y);Y=Y&&!1===Y.end||N===
v.stdout||N===v.stderr?va:da;if(fa.endEmitted)v.nextTick(Y);else ja.once("end",Y);N.on("unpipe",W);var ua=e(ja);N.on("drain",ua);ja.on("data",za);if(N._events&&N._events.error)x(N._events.error)?N._events.error.unshift(L):N._events.error=[L,N._events.error];else N.on("error",L);N.once("close",Z);N.once("finish",R);N.emit("pipe",ja);fa.flowing||(P("pipe resume"),ja.resume());return N};c.prototype.unpipe=function(N){var Y=(this||Xf)._readableState;if(0===Y.pipesCount)return this||Xf;if(1===Y.pipesCount){if(N&&
N!==Y.pipes)return this||Xf;N||(N=Y.pipes);Y.pipes=null;Y.pipesCount=0;Y.flowing=!1;N&&N.emit("unpipe",this||Xf);return this||Xf}if(!N){N=Y.pipes;var W=Y.pipesCount;Y.pipes=null;Y.pipesCount=0;Y.flowing=!1;for(var da=0;da<W;da++)N[da].emit("unpipe",this||Xf);return this||Xf}a:{da=Y.pipes;W=0;for(var va=da.length;W<va;W++)if(da[W]===N){da=W;break a}da=-1}if(-1===da)return this||Xf;Y.pipes.splice(da,1);--Y.pipesCount;1===Y.pipesCount&&(Y.pipes=Y.pipes[0]);N.emit("unpipe",this||Xf);return this||Xf};
c.prototype.on=function(N,Y){Y=F.prototype.on.call(this||Xf,N,Y);"data"===N&&!1!==(this||Xf)._readableState.flowing&&this.resume();if("readable"===N&&(this||Xf).readable&&(N=(this||Xf)._readableState,!N.readableListening))if(N.readableListening=!0,N.emittedReadable=!1,N.needReadable=!0,N.reading)N.length&&h(this||Xf);else{var W=this||Xf;v.nextTick(function(){P("readable nexttick read 0");W.read(0)})}return Y};c.prototype.addListener=c.prototype.on;c.prototype.resume=function(){var N=(this||Xf)._readableState;
N.flowing||(P("resume"),N.flowing=!0,N.reading||(P("resume read 0"),this.read(0)),l(this||Xf,N));return this||Xf};c.prototype.pause=function(){P("call pause flowing=%j",(this||Xf)._readableState.flowing);!1!==(this||Xf)._readableState.flowing&&(P("pause"),(this||Xf)._readableState.flowing=!1,this.emit("pause"));return this||Xf};c.prototype.wrap=function(N){var Y=(this||Xf)._readableState,W=!1,da=this||Xf;N.on("end",function(){P("wrapped end");if(Y.decoder&&!Y.ended){var za=Y.decoder.end();za&&za.length&&
da.push(za)}da.push(null)});N.on("data",function(za){P("wrapped data");Y.decoder&&(za=Y.decoder.write(za));za&&(Y.objectMode||za.length)&&!da.push(za)&&(W=!0,N.pause())});for(var va in N)I.isFunction(N[va])&&I.isUndefined((this||Xf)[va])&&((this||Xf)[va]=function(za){return function(){return N[za].apply(N,arguments)}}(va));r(["error","close","destroy","pause","resume"],function(za){N.on(za,da.emit.bind(da,za))});da._read=function(za){P("wrapped _read",za);W&&(W=!1,N.resume())};return da};c._fromList=
f;return pV}function b8(){function g(n,b){(this||co).afterTransform=function(e,l){var a=b._transformState;a.transforming=!1;var f=a.writecb;f?(a.writechunk=null,a.writecb=null,h.isNullOrUndefined(l)||b.push(l),f&&f(e),e=b._readableState,e.reading=!1,(e.needReadable||e.length<e.highWaterMark)&&b._read(e.highWaterMark),e=void 0):e=b.emit("error",Error("no writecb in Transform class"));return e};(this||co).needTransform=!1;(this||co).transforming=!1;(this||co).writecb=null;(this||co).writechunk=null}
function c(n){if(!((this||co)instanceof c))return new c(n);d.call(this||co,n);(this||co)._transformState=new g(n,this||co);var b=this||co;(this||co)._readableState.needReadable=!0;(this||co)._readableState.sync=!1;this.once("prefinish",function(){h.isFunction((this||co)._flush)?this._flush(function(e){k(b,e)}):k(b)})}function k(n,b){if(b)return n.emit("error",b);b=n._transformState;if(n._writableState.length)throw Error("calling transform done when ws.length != 0");if(b.transforming)throw Error("calling transform done when still transforming");
return n.push(null)}if(c8)return qV;c8=!0;qV=c;var d=cF(),h=Sm;h.inherits=wl;h.inherits(c,d);c.prototype.push=function(n,b){(this||co)._transformState.needTransform=!1;return d.prototype.push.call(this||co,n,b)};c.prototype._transform=function(n,b,e){throw Error("not implemented");};c.prototype._write=function(n,b,e){var l=(this||co)._transformState;l.writecb=e;l.writechunk=n;l.writeencoding=b;l.transforming||(n=(this||co)._readableState,(l.needTransform||n.needReadable||n.length<n.highWaterMark)&&
this._read(n.highWaterMark))};c.prototype._read=function(n){n=(this||co)._transformState;h.isNull(n.writechunk)||!n.writecb||n.transforming?n.needTransform=!0:(n.transforming=!0,this._transform(n.writechunk,n.writeencoding,n.afterTransform))};return qV}function Xla(){function g(d){if(!((this||d8)instanceof g))return new g(d);c.call(this||d8,d)}if(e8)return rV;e8=!0;rV=g;var c=b8(),k=Sm;k.inherits=wl;k.inherits(g,c);g.prototype._transform=function(d,h,n){n(null,d)};return rV}function $H(g){return g&&
"object"===typeof g&&"default"in g?g["default"]:g}function Yla(g){var c={},k;for(k in g)c[k]=g[k];return c}function Zla(g,c,k){g.open(function(){});return{apply:function(d,h,n){h=h||{};for(var b=[],e=-1,l=d.length;++e<l;){var a=d[e],f=a,m=a.prefix;m&&m.options&&(f.keyEncoding=f.keyEncoding||m.options.keyEncoding,f.valueEncoding=f.valueEncoding||m.options.valueEncoding);f=a;m=a.prefix;m="function"===typeof m.prefix?m.prefix():m;f.prefix=m;b.push({key:c.encode([a.prefix,k.encodeKey(a.key,h,a)]),value:"del"!==
a.type&&k.encodeValue(a.value,h,a),type:a.type})}g.db.batch(b,h,n)},get:function(d,h,n,b){n.asBuffer=k.valueAsBuffer(n);return g.db.get(c.encode([h,k.encodeKey(d,n,void 0)]),n,function(e,l){e?b(e):b(null,k.decodeValue(l,n))})},createDecoder:function(d){return function(h,n){return{key:k.decodeKey(c.decode(h)[1],d),value:k.decodeValue(n,d)}}},isClosed:function(){return g.isClosed()},close:function(d){return g.close(d)},iterator:function(d){var h=Yla(d||{}),n=d.prefix||[];$la.toLtgt(d,h,function(b){return c.encode([n,
k.encodeKey(b,h,{})])},c.lowerBound,c.upperBound);h.prefix=null;h.keyAsBuffer=h.valueAsBuffer=!1;"number"!==typeof h.limit&&(h.limit=-1);h.keyAsBuffer=c.buffer;h.valueAsBuffer=k.valueAsBuffer(h);return function(b){return{next:function(e){return b.next(e)},end:function(e){b.end(e)}}}(g.db.iterator(h))}}}function sV(){Error.call(this)}function hA(g,c){if(!(this instanceof hA))return new hA(g,c);f8.call(this,{objectMode:!0,highWaterMark:g.highWaterMark});this._waiting=!1;this._options=g;this._makeData=
c}function dF(g){g8.call(this||oy,g);(this||oy)._destroyed=!1}function ama(g,c,k){k(null,g)}function tV(g){return function(c,k,d){"function"==typeof c&&(d=k,k=c,c={});"function"!=typeof k&&(k=ama);"function"!=typeof d&&(d=null);return g(c,k,d)}}function mk(g){this._capacity=h8(g);this._front=this._length=0;if(i8(g)){for(var c=g.length,k=0;k<c;++k)this[k]=g[k];this._length=c}}function h8(g){if("number"!==typeof g)if(i8(g))g=g.length;else return 16;g=Math.min(Math.max(16,g),1073741824);g=(g>>>0)-1;
g|=g>>1;g|=g>>2;g|=g>>4;g|=g>>8;return(g|g>>16)+1}function uV(g){g=g.rev_tree.slice();for(var c;c=g.pop();){var k=c.ids,d=k[2];c=c.pos;if(d.length){k=0;for(var h=d.length;k<h;k++)g.push({pos:c+1,ids:d[k]})}else if(d=!!k[1].deleted,k=k[0],!n||(e!==d?e:b!==c?b<c:n<k)){var n=k;var b=c;var e=d}}return b+"-"+n}function pN(g,c){g=g.slice();for(var k;k=g.pop();){var d=k.pos,h=k.ids,n=h[2];k=c(0===n.length,d,h[0],k.ctx,h[1]);h=0;for(var b=n.length;h<b;h++)g.push({pos:d+1,ids:n[h],ctx:k})}}function bma(g,
c){return g.pos-c.pos}function j8(g){var c=[];pN(g,function(d,h,n,b,e){d&&c.push({rev:h+"-"+n,pos:h,opts:e})});c.sort(bma).reverse();g=0;for(var k=c.length;g<k;g++)delete c[g].pos;return c}function k8(g){var c=[];g=g.slice();for(var k;k=g.pop();){var d=k.pos,h=k.ids,n=h[0],b=h[1];h=h[2];var e=0===h.length;k=k.history?k.history.slice():[];k.push({id:n,opts:b});e&&c.push({pos:d+1-k.length,ids:k});n=0;for(b=h.length;n<b;n++)g.push({pos:d+1,ids:h[n],history:k})}return c.reverse()}function cma(g,c){return g.pos-
c.pos}function l8(g,c){for(var k,d,h=g.length;c<h;c++){var n=g[c];n=[n.id,n.opts,[]];d?(d[2].push(n),d=n):k=d=n}return k}function dma(g,c){return g[0]<c[0]?-1:1}function m8(g,c){c=[{tree1:g,tree2:c}];for(var k=!1;0<c.length;){var d=c.pop(),h=d.tree1;d=d.tree2;if(h[1].status||d[1].status)h[1].status="available"===h[1].status||"available"===d[1].status?"available":"missing";for(var n=0;n<d[2].length;n++)if(h[2][0]){for(var b=!1,e=0;e<h[2].length;e++)h[2][e][0]===d[2][n][0]&&(c.push({tree1:h[2][e],tree2:d[2][n]}),
b=!0);if(!b){k="new_branch";b=h[2];e=d[2][n];for(var l,a=b,f=e,m=dma,r=0,v=a.length;r<v;)l=r+v>>>1,0>m(a[l],f)?r=l+1:v=l;b.splice(r,0,e)}}else k="new_leaf",h[2][0]=d[2][n]}return{conflicts:k,tree:g}}function n8(g,c,k){var d=[],h=!1,n=!1;if(!g.length)return{tree:[c],conflicts:"new_leaf"};for(var b=0,e=g.length;b<e;b++){var l=g[b];if(l.pos===c.pos&&l.ids[0]===c.ids[0])n=m8(l.ids,c.ids),d.push({pos:l.pos,ids:n.tree}),h=h||n.conflicts,n=!0;else if(!0!==k){var a=l.pos<c.pos?l:c,f=l.pos<c.pos?c:l,m=[],
r=[];for(r.push({ids:a.ids,diff:f.pos-a.pos,parent:null,parentIdx:null});0<r.length;){var v=r.pop();if(0===v.diff)v.ids[0]===f.ids[0]&&m.push(v);else for(var x=v.ids[2],y=0,E=x.length;y<E;y++)r.push({ids:x[y],diff:v.diff-1,parent:v.ids,parentIdx:y})}(m=m[0])?(n=m8(m.ids,f.ids),m.parent[2][m.parentIdx]=n.tree,d.push({pos:a.pos,ids:a.ids}),h=h||n.conflicts,n=!0):d.push(l)}else d.push(l)}n||d.push(c);d.sort(cma);return{tree:d,conflicts:h||"internal_node"}}function ema(g,c){g=k8(g);for(var k,d,h=0,n=
g.length;h<n;h++){var b=g[h],e=b.ids;if(e.length>c){k||(k={});var l=e.length-c;var a={pos:b.pos+l,ids:l8(e,l)};for(var f=0;f<l;f++)k[b.pos+f+"-"+e[f].id]=!0}else a={pos:b.pos,ids:l8(e,0)};d=d?n8(d,a,!0).tree:[a]}k&&pN(d,function(m,r,v){delete k[r+"-"+v]});return{tree:d,revs:k?Object.keys(k):[]}}function fma(g){return g.ids}function o8(g){return g.reduce(function(c,k){c[k]=!0;return c},{})}function p8(g){if(!/^\d+-/.test(g))return Fr.createError(Fr.INVALID_REV);var c=g.indexOf("-"),k=g.substring(0,
c);g=g.substring(c+1);return{prefix:parseInt(k,10),id:g}}function q8(g,c,k){k||(k={deterministic_revs:!0});var d={status:"available"};g._deleted&&(d.deleted=!0);if(c){g._id||(g._id=uC.uuid());var h=uC.rev(g,k.deterministic_revs);if(g._rev){c=p8(g._rev);if(c.error)return c;g._rev_tree=[{pos:c.prefix,ids:[c.id,{status:"missing"},[[h,d,[]]]]}];var n=c.prefix+1}else g._rev_tree=[{pos:1,ids:[h,d,[]]}],n=1}else{if(g._revisions){h=g._revisions;n=h.start-h.ids.length+1;h=h.ids;c=[h[0],d,[]];k=1;for(var b=
h.length;k<b;k++)c=[h[k],{status:"missing"},[c]];g._rev_tree=[{pos:n,ids:c}];n=g._revisions.start;h=g._revisions.ids[0]}if(!g._rev_tree){c=p8(g._rev);if(c.error)return c;n=c.prefix;h=c.id;g._rev_tree=[{pos:n,ids:[h,d,[]]}]}}uC.invalidIdError(g._id);g._rev=n+"-"+h;d={metadata:{},data:{}};for(var e in g)if(Object.prototype.hasOwnProperty.call(g,e)){if((n="_"===e[0])&&!gma[e])throw g=Fr.createError(Fr.DOC_VALIDATION,e),g.message=Fr.DOC_VALIDATION.message+": "+e,g;n&&!hma[e]?d.metadata[e.slice(1)]=g[e]:
d.data[e]=g[e]}return d}function ima(g,c,k){try{var d=aI.atob(g.data)}catch(h){d={error:Fr.createError(Fr.BAD_ARG,"Attachment is not a valid base64 string")}}if(d.error)return k(d.error);g.length=d.length;g.data="blob"===c?aI.binaryStringToBlobOrBuffer(d,g.content_type):"base64"===c?aI.btoa(d):d;r8.binaryMd5(d,function(h){g.digest="md5-"+h;k()})}function jma(g,c,k){r8.binaryMd5(g.data,function(d){g.digest="md5-"+d;g.length=g.data.size||g.data.length||0;"binary"===c?aI.blobOrBufferToBinaryString(g.data,
function(h){g.data=h;k()}):"base64"===c?aI.blobOrBufferToBase64(g.data,function(h){g.data=h;k()}):k()})}function kma(g,c,k){if(g.stub)return k();"string"===typeof g.data?ima(g,c,k):jma(g,c,k)}function s8(g,c,k,d,h,n,b,e){if(Mq.revExists(c.rev_tree,k.metadata.rev)&&!e)return d[h]=k,n();var l=c.winningRev||Mq.winningRev(c),a="deleted"in c?c.deleted:Mq.isDeleted(c,l),f="deleted"in k.metadata?k.metadata.deleted:Mq.isDeleted(k.metadata),m=/^1-/.test(k.metadata.rev);a&&!f&&e&&m&&(m=k.data,m._rev=l,m._id=
k.metadata.id,k=q8(m,e));g=Mq.merge(c.rev_tree,k.metadata.rev_tree[0],g);if(e&&(a&&f&&"new_leaf"!==g.conflicts||!a&&"new_leaf"!==g.conflicts||a&&!f&&"new_branch"===g.conflicts))return k=Fr.createError(Fr.REV_CONFLICT),d[h]=k,n();d=k.metadata.rev;k.metadata.rev_tree=g.tree;k.stemmedRevs=g.stemmedRevs||[];c.rev_map&&(k.metadata.rev_map=c.rev_map);c=Mq.winningRev(k.metadata);e=Mq.isDeleted(k.metadata,c);a=a===e?0:a<e?-1:1;d=d===c?e:Mq.isDeleted(k.metadata,d);b(k,c,e,d,!0,a,h,n)}function bI(g){return g&&
"object"===typeof g&&"default"in g?g["default"]:g}function t8(g,c){g=new Uint8Array(g);return cI.blob([g],{type:c})}function lma(g,c){cI.readAsBinaryString(g,c)}function u8(g,c){c=c.prefix()[0];g=g._cache;var k=g.get(c);k||(k=new Gu.Map,g.set(c,k));return k}function vC(){this._batch=[];this._cache=new Gu.Map}function vV(g){return"winningRev"in g?g.winningRev:dI.winningRev(g)}function mma(g,c,k){var d=g.content_type;return new Promise(function(h,n){c.binaryStore.get(g.digest,function(b,e){if(b){if("NotFoundError"!==
b.name)return n(b);b=k.binary?cI.binaryStringToBlobOrBuffer("",d):""}else b=k.binary?t8(e,d):e.toString("base64");delete g.stub;delete g.length;g.data=b;h()})})}function wV(g,c,k){var d=[];g.forEach(function(h){h.doc&&h.doc._attachments&&Object.keys(h.doc._attachments).forEach(function(n){n=h.doc._attachments[n];"data"in n||d.push(n)})});return Promise.all(d.map(function(h){return mma(h,c,k)}))}function xV(g){(this||wC).db=g;(this||wC)._ended=!1;(this||wC)._nexting=!1}function iA(g){(this||Hl)._db=
g;(this||Hl)._operations=[];(this||Hl)._written=!1}function Mp(g){if(!arguments.length||void 0===g)throw Error("constructor requires at least a location argument");if("string"!=typeof g)throw Error("constructor requires a location string argument");(this||qm).location=g;(this||qm).status="new"}function Gr(g,c,k,d,h,n){this._color=g;this.key=c;this.value=k;this.left=d;this.right=h;this._count=n}function uw(g){return new Gr(g._color,g.key,g.value,g.left,g.right,g._count)}function jA(g,c){return new Gr(g,
c.key,c.value,c.left,c.right,c._count)}function Il(g){g._count=1+(g.left?g.left._count:0)+(g.right?g.right._count:0)}function eF(g,c){this._compare=g;this.root=c}function yV(g,c){if(c.left){var k=yV(g,c.left);if(k)return k}if(k=g(c.key,c.value))return k;if(c.right)return yV(g,c.right)}function zV(g,c,k,d){if(0>=c(g,d.key)){if(d.left){var h=zV(g,c,k,d.left);if(h)return h}if(h=k(d.key,d.value))return h}if(d.right)return zV(g,c,k,d.right)}function AV(g,c,k,d,h){var n=k(g,h.key),b=k(c,h.key);if(0>=n&&
(h.left&&(n=AV(g,c,k,d,h.left))||0<b&&(n=d(h.key,h.value))))return n;if(0<b&&h.right)return AV(g,c,k,d,h.right)}function Hr(g,c){this.tree=g;this._stack=c}function v8(g,c){g.key=c.key;g.value=c.value;g.left=c.left;g.right=c.right;g._color=c._color;g._count=c._count}function nma(g,c){return g<c?-1:g>c?1:0}function w8(g,c){for(var k in g)c[k]=g[k]}function fF(g,c,k){return py(g,c,k)}function oma(g){return 0<Ir.compare(g,(this||Lf)._end)}function pma(g){return 0<=Ir.compare(g,(this||Lf)._end)}function qma(g){return 0>
Ir.compare(g,(this||Lf)._end)}function rma(g){return 0>=Ir.compare(g,(this||Lf)._end)}function qN(g,c){x8.call(this||Lf,g);(this||Lf)._limit=c.limit;-1===(this||Lf)._limit&&((this||Lf)._limit=Infinity);g=g._store[g._location];(this||Lf).keyAsBuffer=!1!==c.keyAsBuffer;(this||Lf).valueAsBuffer=!1!==c.valueAsBuffer;(this||Lf)._reverse=c.reverse;(this||Lf)._options=c;(this||Lf)._done=0;(this||Lf)._reverse?((this||Lf)._incr="prev",(this||Lf)._start=Ir.upperBound(c),(this||Lf)._end=Ir.lowerBound(c),"undefined"===
typeof(this||Lf)._start?(this||Lf)._tree=g.end:Ir.upperBoundInclusive(c)?(this||Lf)._tree=g.le((this||Lf)._start):(this||Lf)._tree=g.lt((this||Lf)._start),(this||Lf)._end&&(Ir.lowerBoundInclusive(c)?(this||Lf)._test=pma:(this||Lf)._test=oma)):((this||Lf)._incr="next",(this||Lf)._start=Ir.lowerBound(c),(this||Lf)._end=Ir.upperBound(c),"undefined"===typeof(this||Lf)._start?(this||Lf)._tree=g.begin:Ir.lowerBoundInclusive(c)?(this||Lf)._tree=g.ge((this||Lf)._start):(this||Lf)._tree=g.gt((this||Lf)._start),
(this||Lf)._end&&(Ir.upperBoundInclusive(c)?(this||Lf)._test=rma:(this||Lf)._test=qma))}function Nq(g){if(!((this||Lf)instanceof Nq))return new Nq(g);y8.call(this||Lf,"string"===typeof g?g:"");(this||Lf)._location=(this||Lf).location?"$"+(this||Lf).location:"_tree";(this||Lf)._store=(this||Lf).location?gF:this||Lf;(this||Lf)._store[(this||Lf)._location]=(this||Lf)._store[(this||Lf)._location]||sma(Ir.compare)}function z8(g){return g&&"object"===typeof g&&"default"in g?g["default"]:g}function BV(g,
c){g=tma.assign({db:uma},g);vma.call(this,g,c)}function CV(g){g&&(g.__serialize__=function(){return{__expr__:'({type: "'+g.type+'", name: "'+g.name+'", _id: "'+g._id+'"})'}});return g}function eI(g){var c,k,d,h,n,b,e;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){if(1==l.nextAddress){if(!g||hh.obj.isEmpty(g))return l.return(!1);if(g&&g._rev)return l.return(g);c=g;k=c.type;d=c.name;h=c._id;l.setFinallyBlock(2);n=Object;b=n.assign;e=g;return l.yield(hh.MorphicDB.default.fetchCommit(k,
d,h),4)}2!=l.nextAddress&&b.call(n,e,l.yieldResult);l.enterFinallyBlock();return l.return(g)})}function fI(g){return Object.values(g).filter(function(c){return 1==Sd.Path("props.isComponent.value").get(c)}).map(function(c){return c.props.name.value})}function rN(g){return $jscomp.asyncExecutePromiseGeneratorProgram(function(c){switch(c.nextAddress){case 1:return g.label="loading System Elements",g.progress=0,g.status="core elements...",c.yield(Sd.resource("styleguide://System/buttons/light").read(),
2);case 2:return g.progress=.2,g.status="top bar...",c.yield(Sd.resource("styleguide://SystemIDE/lively top bar master").read(),3);case 3:return g.progress=.4,g.status="scene graph...",c.yield(Sd.resource("styleguide://SystemIDE/styling side bar master").read(),4);case 4:return g.progress=.6,g.status="styling palette...",c.yield(Sd.resource("styleguide://SystemIDE/scene graph side bar master").read(),5);case 5:return g.progress=.8,g.status="world loader...",c.yield(Sd.resource("styleguide://partial freezing/project browser").read(),
6);case 6:return g.progress=1,c.yield(Sd.promise.delay(500),0)}})}function DV(g){delete Sd.fetchedSnapshots[g]}function gI(g,c){return Ke.serialize(g,Ke.normalizeOptions(c))}function hI(g,c){c=void 0===c?{}:c;return Ke.deserializeWithMigrations(g,c.migrations||Ke.migrations,Ke.normalizeOptions(c))}function EV(g){var c,k;return $jscomp.asyncExecutePromiseGeneratorProgram(function(d){return 1==d.nextAddress?(c=Ke,k=c.loadMorphFromSnapshot,d.yield(g.readJson(),2)):d.return(k.call(c,d.yieldResult))})}
function FV(g,c,k){g=void 0===g?Ke.MorphicEnv.default().world:g;var d,h,n,b,e,l,a,f,m,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(x){switch(x.nextAddress){case 1:d=k||{};h=void 0===d.showIndicator?!0:d.showIndicator;n=void 0===d.changeName?!0:d.changeName;b=void 0===d.changeBrowserURL?!0:d.changeBrowserURL;c||(e=Ke.resource(document.location.href),l=e.name(),c=e.join("../"+l.replace(/\.[^\.]+/,"-world.json")).withRelativePartsResolved());"string"===typeof c&&(c=Ke.resource(c));
n&&(g.name=c.nameWithoutExt());b&&(a=encodeURI(k.pathForBrowserHistory||Ke.pathForBrowserHistory(c.path())),window.location.pathname!==a&&window.history.pushState({},"lively.next",a));if(!h){x.jumpTo(2);break}return x.yield(System.import("lively.components/loading-indicator.js"),3);case 3:return m=x.yieldResult,r=m.LoadingIndicator,f=r.open("string"===typeof h?h:"Snapshotting..."),x.yield(f.whenRendered(),4);case 4:return x.yield(Ke.promise.delay(100),2);case 2:return x.setFinallyBlock(6),x.yield(Ke.createMorphSnapshot(g,
k),8);case 8:return v=x.yieldResult,f.label="Uploading...",x.yield(f.whenRendered(),9);case 9:return x.return(c.writeJson(v));case 6:x.enterFinallyBlock(),f&&f.remove(),x.leaveFinallyBlock(0)}})}function sN(g,c){if(void 0===c||!c)return Ke.deserializeMorph(Ke.serializeMorph(g),{migrations:Ke.migrations,reinitializeIds:!0});c=g.comments;g.comments=[];var k=[];g.attributeConnections&&(k=g.attributeConnections.filter(function(h){return h.targetObj.isCommentIndicator}),g.attributeConnections=g.attributeConnections.filter(function(h){return!(h.targetObj.isCommentIndicator||
h.targetObj.isHalo)}));var d=Ke.serializeMorph(g);g.comments=c;g.attributeConnections&&(g.attributeConnections=g.attributeConnections.concat(k));return Ke.deserializeMorph(d,{migrations:Ke.migrations,reinitializeIds:!0})}function xC(g,c){c=void 0===c?{}:c;var k,d,h,n,b,e,l,a,f,m,r,v,x,y,E,F,I,J,P,N,Y,W,da,va;return $jscomp.asyncExecutePromiseGeneratorProgram(function(za){switch(za.nextAddress){case 1:System.get("@system-env");k=c;d=void 0===k.addPreview?!1:k.addPreview;h=void 0===k.previewWidth?100:
k.previewWidth;n=void 0===k.previewHeight?100:k.previewHeight;b=void 0===k.previewType?"png":k.previewType;e=void 0===k.testLoad?!0:k.testLoad;l=void 0===k.addPackages?!0:k.addPackages;a=void 0===k.ignoreMorphs?[]:k.ignoreMorphs;f=void 0===k.frozenSnapshot?!1:k.frozenSnapshot;m=Ke.serializeMorph(g,{frozenSnapshot:f});if(!l){za.jumpTo(2);break}return za.yield(Ke.findRequiredPackagesOfSnapshot(m),3);case 3:r=za.yieldResult,v=r.packages,x=r.depMap,m.packages=v,y=Ke.findLocalComponents(m.snapshot),Object.values(v["local://lively-object-modules/"]||
{}).forEach(function(L){Object.entries(L).forEach(function(Z){var R=$jscomp.makeIterator(Z);Z=R.next().value;R=R.next().value;if(!Z.endsWith(".json")){var X=Ke.ast.parse(R),ja=[],fa=Ke.Path("metadata.commit.name").get($world);Ke.ast.AllNodesVisitor.run(X,function(ua,gb){"Literal"===ua.type&&"string"===typeof ua.value&&(ua.value.match(/^styleguide:\/\/\$world\/.+/)&&!y.includes(ua.value.replace("styleguide://$world/",""))&&ja.push({target:ua,replacementFunc:function(){return JSON.stringify(ua.value.replace("$world",
fa))}}),ua.value.match(/^part:\/\/\$world\/.+/)&&!y.includes(ua.value.replace("part://$world/",""))&&ja.push({target:ua,replacementFunc:function(){return JSON.stringify(ua.value.replace("$world",fa))}}))});L[Z]=Ke.ast.transform.replaceNodes(ja,R).source}})}),m.packageDepMap=x;case 2:if(!d){za.jumpTo(4);break}return za.yield(System.import("lively.morphic/rendering/morph-to-image.js"),5);case 5:return E=za.yieldResult,F=E.renderMorphToDataURI,I=h||g.width,J=n||g.height,P=b||"png",za.setCatchFinallyBlocks(6),
N=m,za.yield(F(g,{width:I,height:J,type:P,ignoreMorphs:[]}),8);case 8:N.preview=za.yieldResult;za.leaveTryBlock(4);break;case 6:return Y=za.enterCatchBlock(),console.error("Error generating morph preview: "+Y),W=m,za.yield(F(Ke.morph({fill:g.fill,width:I,height:J}),{width:I,height:J,type:P,ignoreMorphs:a}),9);case 9:W.preview=za.yieldResult;case 4:m.preview||(m.preview="");if(!e){za.jumpTo(10);break}za.setCatchFinallyBlocks(11);return za.yield(Ke.loadMorphFromSnapshot(m,{highlightBuggyMorphs:!0,rootObject:g}),
13);case 13:da=za.yieldResult;if(!da||!da.isMorph)throw Error("reloading snapshot does not create a morph!");za.leaveTryBlock(10);break;case 11:throw va=za.enterCatchBlock(),Error("Error snapshotting morph: Cannot recreate morph from snapshot!\n"+va.stack);case 10:return za.return(m)}})}function vw(g,c){return Ke.deserializeMorph(g,Object.assign({reinitializeIds:!0,ignoreClassNotFound:!1,onDeserializationStart:Ke.loadPackagesAndModulesOfSnapshot,migrations:Ke.migrations},c))}function A8(g,c){var k,
d,h,n,b,e,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){switch(a.nextAddress){case 1:if(!g.isDirectory())return e=c,l=g.name(),a.yield(g.read(),9);k=c[g.name()]={};return a.yield(g.dirList(),4);case 4:d=a.yieldResult,h=$jscomp.makeIterator(d),n=h.next();case 5:if(n.done)return a.return(c);b=n.value;return a.yield(A8(b,k),6);case 6:n=h.next();a.jumpTo(5);break;case 9:return e[l]=a.yieldResult,a.return(c)}})}function B8(g,c){c=void 0===c?[]:c;var k=[];if(g.hasOwnProperty("package.json")){var d=
c.slice(1).reduceRight(function(n,b){return n.join(b)},Ke.resource(c[0])).url;k.push({files:g,url:d,requiredPackages:g.requiredPackages})}for(var h in g)"object"===typeof g[h]&&k.push.apply(k,$jscomp.arrayFromIterable(B8(g[h],c.concat(h))));return k}function GV(g){var c=Ke.findPackagesInFileSpec(g.packages),k={};g=g.packageDepMap;if(!g)return c;c=$jscomp.makeIterator(c);for(var d=c.next();!d.done;d=c.next())d=d.value,k[d.url]=d;return Ke.arr.flatten(Ke.graph.sortByReference(g)).map(function(h){return k[h]})}
function iI(g){var c,k,d,h,n,b,e,l,a,f,m,r,v,x,y,E,F;return $jscomp.asyncExecutePromiseGeneratorProgram(function(I){switch(I.nextAddress){case 1:if(!g.packagesToRegister){I.jumpTo(2);break}c=$jscomp.makeIterator(g.packagesToRegister);k=c.next();case 3:if(k.done){I.jumpTo(2);break}d=k.value;I.setCatchFinallyBlocks(6);return I.yield(Ke.registerPackage(d),8);case 8:I.leaveTryBlock(4);break;case 6:I.enterCatchBlock(),console.error("Failed to register package "+d);case 4:k=c.next();I.jumpTo(3);break;case 2:if(!g.packages){I.jumpTo(9);
break}h=Ke.packagesOfSnapshot(g);n=$jscomp.makeIterator(h);b=n.next();case 10:if(b.done){I.jumpTo(9);break}l=e=b.value;a=l.files;f=l.url;if(r=(m=Ke.lookupPackage(f))&&m.pkg){v=r.version;x=JSON.parse(a["package.json"]);y=x.version;try{if(y&&v&&Ke.semver.lte(y,v,!0)){console.log("[load morph] Package "+f+" is loaded in version "+v+(" which is newer than "+y+". Will NOT load older variant."));I.jumpTo(11);break}}catch(J){console.warn("Error in package version comparison: ",J)}}return I.yield(Ke.createFiles(f,
a),13);case 13:return I.yield(Ke.ensurePackage(f),14);case 14:return r=I.yieldResult,I.yield(r.reload({forgetEnv:!1,forgetDeps:!1}),15);case 15:return I.yield(System.import("lively.classes/object-classes.js"),16);case 16:E=I.yieldResult,F=E.default,Ke.objectScriptingEnabled=!!F,Ke.objectScriptingEnabled&&F.withId(r.name);case 11:b=n.next();I.jumpTo(10);break;case 9:return I.yield(Promise.all(Ke.requiredModulesOfSnapshot(g).map(function(J){return(System.get(J)?null:System.import(J)).catch(function(P){return console.error("Error loading "+
J,P)})})),0)}})}function tN(g){var c,k,d,h,n,b,e,l,a,f,m,r,v,x,y,E,F,I,J,P,N,Y,W,da,va,za,L,Z,R,X,ja,fa,ua,gb,hb,ta,na;return $jscomp.asyncExecutePromiseGeneratorProgram(function(pa){switch(pa.nextAddress){case 1:c={},k=g.snapshot,d=[],h={},n=!0,b={},e={},a=pa.forIn(k);case 2:if(null==(l=a.getNext())){pa.jumpTo(4);break}f=k[l]["lively.serializer-class-info"];if(!(f&&f.module&&f.module.package)){pa.jumpTo(5);break}m=Ke.getPackage(f.module.package.name);if(!m.address.startsWith("local://")){pa.jumpTo(5);
break}return pa.yield(System.import("lively.classes/object-classes.js"),7);case 7:return r=pa.yieldResult,e.$jscomp$loop$prop$ObjectPackage$2667=r.default,pa.yield(System.import("lively.classes/util.js"),8);case 8:v=pa.yieldResult,x=v.withSuperclasses,Ke.objectScriptingEnabled=!!e.$jscomp$loop$prop$ObjectPackage$2667,y=e.$jscomp$loop$prop$ObjectPackage$2667.forSystemPackage(m),E=y.objectModule.systemModule._recorder[f.className],F=x(E),F.forEach(function(La){return function(Hb){(Hb=La.$jscomp$loop$prop$ObjectPackage$2667.lookupPackageForClass(Hb))&&
d.push(Hb.systemPackage)}}(e));case 5:if(I=k[l].props.metadata)if(J=void 0,I.value&&I.value.__ref__?(P=k[I.value.id],P.props.externalPackages&&(J=P.props.externalPackages.value)):J=I.externalPackages,J)for(n=!0,N=0;N<J.length;N++)h[J[N]]=!0;e={$jscomp$loop$prop$ObjectPackage$2667:e.$jscomp$loop$prop$ObjectPackage$2667};pa.jumpTo(2);break;case 4:n&&(g.packagesToRegister=Object.keys(h)),Y=[],W=$jscomp.makeIterator(d),da=W.next();case 9:if(da.done)return d=[].concat($jscomp.arrayFromIterable(Y),$jscomp.arrayFromIterable(d)),
pa.yield(Promise.all(d.map(function(La){var Hb,fc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ob){if(1==Ob.nextAddress)return Hb=Ke.resource(La.address).asDirectory(),Ob.yield(Ke.resourceToJSON(Hb,{}),2);fc=Ob.yieldResult;c[Hb.parent().url]||(c[Hb.parent().url]={});Object.assign(c[Hb.parent().url],fc);b[La.url]||(b[La.url]=[]);Ob.jumpToEnd()})})),16);va=da.value;za=$jscomp.makeIterator(va.modules());L=za.next();case 12:if(L.done){da=W.next();pa.jumpTo(9);break}Z=L.value;if(Z.id.endsWith(".json")){pa.jumpTo(13);
break}R=$jscomp;X=R.makeIterator;return pa.yield(Z.imports(),15);case 15:for(ja=X.call(R,pa.yieldResult),fa=ja.next();!fa.done;fa=ja.next())if(gb=ua=fa.value,hb=gb.fromModule,ta=Ke.module(hb).package())na=ta.config,na.lively&&na.lively.isObjectPackage&&(Y.push(ta),b[va.url]?Ke.arr.pushIfNotIncluded(b[va.url],ta.url):b[va.url]=[ta.url]);case 13:L=za.next();pa.jumpTo(12);break;case 16:return pa.return({packages:c,depMap:b})}})}function wma(g,c){var k={};c.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(d,
h,n){h&&(k[h]=n)});return k}function xma(g){g=String(g);if(!(100<g.length)&&(g=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(g))){var c=parseFloat(g[1]);switch((g[2]||"ms").toLowerCase()){case "years":case "year":case "yrs":case "yr":case "y":return c*yma;case "days":case "day":case "d":return c*jI;case "hours":case "hour":case "hrs":case "hr":case "h":return 36E5*c;case "minutes":case "minute":case "mins":case "min":case "m":return 6E4*
c;case "seconds":case "second":case "secs":case "sec":case "s":return 1E3*c;case "milliseconds":case "millisecond":case "msecs":case "msec":case "ms":return c}}}function uN(g,c,k){if(!(g<c))return g<1.5*c?Math.floor(g/c)+" "+k:Math.ceil(g/c)+" "+k+"s"}function zma(g){var c=0,k;for(k in g)c=(c<<5)-c+g.charCodeAt(k),c|=0;return fj.colors[Math.abs(c)%fj.colors.length]}function HV(g){function c(){if(c.enabled){var d=+new Date;c.diff=d-(k||d);c.prev=k;k=c.curr=d;var h=Array(arguments.length);for(d=0;d<
h.length;d++)h[d]=arguments[d];h[0]=fj.coerce(h[0]);"string"!==typeof h[0]&&h.unshift("%O");var n=0;h[0]=h[0].replace(/%([a-zA-Z%])/g,function(b,e){if("%%"===b)return b;n++;e=fj.formatters[e];"function"===typeof e&&(b=e.call(c,h[n]),h.splice(n,1),n--);return b});fj.formatArgs.call(c,h);(c.log||fj.log||console.log.bind(console)).apply(c,h)}}var k;c.namespace=g;c.enabled=fj.enabled(g);c.useColors=fj.useColors();c.color=zma(g);c.destroy=Ama;"function"===typeof fj.init&&fj.init(c);fj.instances.push(c);
return c}function Ama(){var g=fj.instances.indexOf(this||Bma);return-1!==g?(fj.instances.splice(g,1),!0):!1}function C8(){try{var g=mp.storage.debug}catch(c){}!g&&"undefined"!==typeof IV&&"env"in IV&&(g=IV.env.DEBUG);return g}function Jr(g){if(g){for(var c in Jr.prototype)g[c]=Jr.prototype[c];return g}}function JV(g,c){if(!g)return g;if(D8(g)){var k={_placeholder:!0,num:c.length};c.push(g);return k}if(KV(g)){k=Array(g.length);for(var d=0;d<g.length;d++)k[d]=JV(g[d],c);return k}if("object"===typeof g&&
!(g instanceof Date)){k={};for(d in g)k[d]=JV(g[d],c);return k}return g}function LV(g,c){if(!g)return g;if(g&&g._placeholder)return c[g.num];if(KV(g))for(var k=0;k<g.length;k++)g[k]=LV(g[k],c);else if("object"===typeof g)for(k in g)g[k]=LV(g[k],c);return g}function E8(){}function F8(g){var c=""+g.type;if(jl.BINARY_EVENT===g.type||jl.BINARY_ACK===g.type)c+=g.attachments+"-";g.nsp&&"/"!==g.nsp&&(c+=g.nsp+",");null!=g.id&&(c+=g.id);if(null!=g.data){try{var k=JSON.stringify(g.data)}catch(d){k=!1}if(!1!==
k)c+=k;else return Cma}MV("encoded %j as %s",g,c);return c}function Dma(g,c){NV.removeBlobs(g,function(k){var d=NV.deconstructPacket(k);k=F8(d.packet);d=d.buffers;d.unshift(k);c(d)})}function vN(){(this||Go).reconstructor=null}function OV(g){(this||Go).reconPack=g;(this||Go).buffers=[]}function wN(g){if(!g||"object"!==typeof g)return!1;if(Ema(g)){for(var c=0,k=g.length;c<k;c++)if(wN(g[c]))return!0;return!1}if("function"===typeof PV&&PV.isBuffer&&PV.isBuffer(g)||"function"===typeof ArrayBuffer&&g instanceof
ArrayBuffer||Fma&&g instanceof Blob||Gma&&g instanceof File)return!0;if(g.toJSON&&"function"===typeof g.toJSON&&1===arguments.length)return wN(g.toJSON(),!0);for(c in g)if(Object.prototype.hasOwnProperty.call(g,c)&&wN(g[c]))return!0;return!1}function Hma(){}function G8(g){return g.map(function(c){if(c.buffer instanceof ArrayBuffer){var k=c.buffer;if(c.byteLength!==k.byteLength){var d=new Uint8Array(c.byteLength);d.set(new Uint8Array(k,c.byteOffset,c.byteLength));k=d.buffer}return k}return c})}function H8(g,
c){c=c||{};var k=new hF;G8(g).forEach(function(d){k.append(d)});return c.type?k.getBlob(c.type):k.getBlob()}function I8(g,c){return new Blob(G8(g),c||{})}function J8(g){for(var c=[],k=0,d=g.length,h,n;k<d;)h=g.charCodeAt(k++),55296<=h&&56319>=h&&k<d?(n=g.charCodeAt(k++),56320==(n&64512)?c.push(((h&1023)<<10)+(n&1023)+65536):(c.push(h),k--)):c.push(h);return c}function K8(g,c){if(55296<=g&&57343>=g){if(c)throw Error("Lone surrogate U+"+g.toString(16).toUpperCase()+" is not a scalar value");return!1}return!0}
function iF(){if(kA>=xN)throw Error("Invalid byte index");var g=yN[kA]&255;kA++;if(128==(g&192))return g&63;throw Error("Invalid continuation byte");}function Ima(g){if(kA>xN)throw Error("Invalid byte index");if(kA==xN)return!1;var c=yN[kA]&255;kA++;if(0==(c&128))return c;if(192==(c&224)){var k=iF();c=(c&31)<<6|k;if(128<=c)return c;throw Error("Invalid continuation byte");}if(224==(c&240)){k=iF();var d=iF();c=(c&15)<<12|k<<6|d;if(2048<=c)return K8(c,g)?c:65533;throw Error("Invalid continuation byte");
}if(240==(c&248)&&(k=iF(),d=iF(),g=iF(),c=(c&7)<<18|k<<12|d<<6|g,65536<=c&&1114111>=c))return c;throw Error("Invalid UTF-8 detected");}function Jma(g,c,k){if(!c)return ck.encodeBase64Packet(g,k);var d=new FileReader;d.onload=function(){ck.encodePacket({type:g.type,data:d.result},c,!0,k)};return d.readAsArrayBuffer(g.data)}function QV(g,c,k){var d=Array(g.length);k=Kma(g.length,k);for(var h=function(b,e,l){c(e,function(a,f){d[b]=f;l(a,d)})},n=0;n<g.length;n++)h(n,g[n],k)}function RV(g){var c="";do c=
L8[g%64]+c,g=Math.floor(g/64);while(0<g);return c}function SV(){var g=RV(+new Date);return g!==M8?(N8=0,M8=g):g+"."+RV(N8++)}function ww(g){(this||xj).path=g.path;(this||xj).hostname=g.hostname;(this||xj).port=g.port;(this||xj).secure=g.secure;(this||xj).query=g.query;(this||xj).timestampParam=g.timestampParam;(this||xj).timestampRequests=g.timestampRequests;(this||xj).readyState="";(this||xj).agent=g.agent||!1;(this||xj).socket=g.socket;(this||xj).enablesXDR=g.enablesXDR;(this||xj).withCredentials=
g.withCredentials;(this||xj).pfx=g.pfx;(this||xj).key=g.key;(this||xj).passphrase=g.passphrase;(this||xj).cert=g.cert;(this||xj).ca=g.ca;(this||xj).ciphers=g.ciphers;(this||xj).rejectUnauthorized=g.rejectUnauthorized;(this||xj).forceNode=g.forceNode;(this||xj).isReactNative=g.isReactNative;(this||xj).extraHeaders=g.extraHeaders;(this||xj).localAddress=g.localAddress}function xw(g){var c=g&&g.forceBase64;if(!Lma||c)(this||Uj).supportsBinary=!1;O8.call(this||Uj,g)}function P8(){}function jF(g){Q8.call(this||
kf,g);(this||kf).requestTimeout=g.requestTimeout;(this||kf).extraHeaders=g.extraHeaders;if("undefined"!==typeof location){var c="https:"===location.protocol,k=location.port;k||(k=c?443:80);(this||kf).xd="undefined"!==typeof location&&g.hostname!==location.hostname||k!==g.port;(this||kf).xs=g.secure!==c}}function un(g){(this||kf).method=g.method||"GET";(this||kf).uri=g.uri;(this||kf).xd=!!g.xd;(this||kf).xs=!!g.xs;(this||kf).async=!1!==g.async;(this||kf).data=void 0!==g.data?g.data:null;(this||kf).agent=
g.agent;(this||kf).isBinary=g.isBinary;(this||kf).supportsBinary=g.supportsBinary;(this||kf).enablesXDR=g.enablesXDR;(this||kf).withCredentials=g.withCredentials;(this||kf).requestTimeout=g.requestTimeout;(this||kf).pfx=g.pfx;(this||kf).key=g.key;(this||kf).passphrase=g.passphrase;(this||kf).cert=g.cert;(this||kf).ca=g.ca;(this||kf).ciphers=g.ciphers;(this||kf).rejectUnauthorized=g.rejectUnauthorized;(this||kf).extraHeaders=g.extraHeaders;this.create()}function R8(){for(var g in un.requests)un.requests.hasOwnProperty(g)&&
un.requests[g].abort()}function Mma(){}function kF(g){TV.call(this||Ej,g);(this||Ej).query=(this||Ej).query||{};zN||(zN=S8.___eio=S8.___eio||[]);(this||Ej).index=zN.length;var c=this||Ej;zN.push(function(k){c.onData(k)});(this||Ej).query.j=(this||Ej).index;"function"===typeof addEventListener&&addEventListener("beforeunload",function(){c.script&&(c.script.onerror=Mma)},!1)}function Xs(g){g&&g.forceBase64&&((this||Zg).supportsBinary=!1);(this||Zg).perMessageDeflate=g.perMessageDeflate;(this||Zg).usingBrowserWebSocket=
AN&&!g.forceNode;(this||Zg).protocols=g.protocols;(this||Zg).usingBrowserWebSocket||(lF=T8);UV.call(this||Zg,g)}function Fj(g,c){if(!((this||Nd)instanceof Fj))return new Fj(g,c);c=c||{};g&&"object"===typeof g&&(c=g,g=null);g?(g=U8(g),c.hostname=g.host,c.secure="https"===g.protocol||"wss"===g.protocol,c.port=g.port,g.query&&(c.query=g.query)):c.host&&(c.hostname=U8(c.host).host);(this||Nd).secure=null!=c.secure?c.secure:"undefined"!==typeof location&&"https:"===location.protocol;c.hostname&&!c.port&&
(c.port=(this||Nd).secure?"443":"80");(this||Nd).agent=c.agent||!1;(this||Nd).hostname=c.hostname||("undefined"!==typeof location?location.hostname:"localhost");(this||Nd).port=c.port||("undefined"!==typeof location&&location.port?location.port:(this||Nd).secure?443:80);(this||Nd).query=c.query||{};"string"===typeof(this||Nd).query&&((this||Nd).query=Nma.decode((this||Nd).query));(this||Nd).upgrade=!1!==c.upgrade;(this||Nd).path=(c.path||"/engine.io").replace(/\/$/,"")+"/";(this||Nd).forceJSONP=!!c.forceJSONP;
(this||Nd).jsonp=!1!==c.jsonp;(this||Nd).forceBase64=!!c.forceBase64;(this||Nd).enablesXDR=!!c.enablesXDR;(this||Nd).withCredentials=!1!==c.withCredentials;(this||Nd).timestampParam=c.timestampParam||"t";(this||Nd).timestampRequests=c.timestampRequests;(this||Nd).transports=c.transports||["polling","websocket"];(this||Nd).transportOptions=c.transportOptions||{};(this||Nd).readyState="";(this||Nd).writeBuffer=[];(this||Nd).prevBufferLen=0;(this||Nd).policyPort=c.policyPort||843;(this||Nd).rememberUpgrade=
c.rememberUpgrade||!1;(this||Nd).binaryType=null;(this||Nd).onlyBinaryUpgrades=c.onlyBinaryUpgrades;(this||Nd).perMessageDeflate=!1!==c.perMessageDeflate?c.perMessageDeflate||{}:!1;!0===(this||Nd).perMessageDeflate&&((this||Nd).perMessageDeflate={});(this||Nd).perMessageDeflate&&null==(this||Nd).perMessageDeflate.threshold&&((this||Nd).perMessageDeflate.threshold=1024);(this||Nd).pfx=c.pfx||null;(this||Nd).key=c.key||null;(this||Nd).passphrase=c.passphrase||null;(this||Nd).cert=c.cert||null;(this||
Nd).ca=c.ca||null;(this||Nd).ciphers=c.ciphers||null;(this||Nd).rejectUnauthorized=void 0===c.rejectUnauthorized?!0:c.rejectUnauthorized;(this||Nd).forceNode=!!c.forceNode;(this||Nd).isReactNative="undefined"!==typeof navigator&&"string"===typeof navigator.product&&"reactnative"===navigator.product.toLowerCase();if("undefined"===typeof self||(this||Nd).isReactNative)c.extraHeaders&&0<Object.keys(c.extraHeaders).length&&((this||Nd).extraHeaders=c.extraHeaders),c.localAddress&&((this||Nd).localAddress=
c.localAddress);(this||Nd).id=null;(this||Nd).upgrades=null;(this||Nd).pingInterval=null;(this||Nd).pingTimeout=null;(this||Nd).pingIntervalTimer=null;(this||Nd).pingTimeoutTimer=null;this.open()}function bm(g,c,k){(this||xf).io=g;(this||xf).nsp=c;(this||xf).json=this||xf;(this||xf).ids=0;(this||xf).acks={};(this||xf).receiveBuffer=[];(this||xf).sendBuffer=[];(this||xf).connected=!1;(this||xf).disconnected=!0;(this||xf).flags={};k&&k.query&&((this||xf).query=k.query);(this||xf).io.autoConnect&&this.open()}
function mF(g){g=g||{};(this||Np).ms=g.min||100;(this||Np).max=g.max||1E4;(this||Np).factor=g.factor||2;(this||Np).jitter=0<g.jitter&&1>=g.jitter?g.jitter:0;(this||Np).attempts=0}function dk(g,c){if(!((this||ne)instanceof dk))return new dk(g,c);g&&"object"===typeof g&&(c=g,g=void 0);c=c||{};c.path=c.path||"/socket.io";(this||ne).nsps={};(this||ne).subs=[];(this||ne).opts=c;this.reconnection(!1!==c.reconnection);this.reconnectionAttempts(c.reconnectionAttempts||Infinity);this.reconnectionDelay(c.reconnectionDelay||
1E3);this.reconnectionDelayMax(c.reconnectionDelayMax||5E3);this.randomizationFactor(c.randomizationFactor||.5);(this||ne).backoff=new Oma({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()});this.timeout(null==c.timeout?2E4:c.timeout);(this||ne).readyState="closed";(this||ne).uri=g;(this||ne).connecting=[];(this||ne).lastPing=null;(this||ne).encoding=!1;(this||ne).packetBuffer=[];g=c.parser||Pma;(this||ne).encoder=new g.Encoder;(this||ne).decoder=new g.Decoder;
(this||ne).autoConnect=!1!==c.autoConnect;(this||ne).autoConnect&&this.open()}function V8(g,c){"object"===typeof g&&(c=g,g=void 0);c=c||{};g=Qma(g);var k=g.source,d=g.id,h=g.path;h=kI[d]&&h in kI[d].nsps;c.forceNew||c["force new connection"]||!1===c.multiplex||h?(W8("ignoring socket cache for %s",k),k=X8(k,c)):(kI[d]||(W8("new io instance for %s",k),kI[d]=X8(k,c)),k=kI[d]);g.query&&!c.query&&(c.query=g.query);return k.socket(g.path,c)}function yC(g,c){c=void 0===c?{}:c;var k=c.l2lClient;if(!k)throw Error("lively.shell client side runCommand needs opts.l2lClient!");
Tg.ClientCommand.installLively2LivelyServices(k);k=new Tg.ClientCommand(k);k.spawn(Object.assign({command:g},Tg.obj.dissoc(c,["l2lClient"])));return k}function lI(g){return Tg.dirCache[g.trackerId]?Tg.dirCache[g.trackerId]:Promise.resolve().then(function(){var c,k,d;return $jscomp.asyncExecutePromiseGeneratorProgram(function(h){if(1==h.nextAddress)return h.yield(g.sendToAndWait(g.trackerId,"lively.shell.info",{}),2);c=h.yieldResult;k=c.data;d=k.defaultDirectory;return h.return(Tg.dirCache[g.trackerId]=
d)})})}function mI(g){var c,k,d;return $jscomp.asyncExecutePromiseGeneratorProgram(function(h){if(1==h.nextAddress)return h.yield(g.sendToAndWait(g.trackerId,"lively.shell.env",{}),2);c=h.yieldResult;k=c.data;d=k.env;return h.return(d)})}function BN(g,c){c=(c=void 0===c?{}:c)||{};var k=Tg.runCommand('cat "'+g+'"',c);return k.whenDone().then(function(){if(k.exitCode)throw Error("Read "+g+" failed: "+k.stderr);return k.output})}function CN(g,c,k){!k&&c&&c.content&&(k=c,c=k.content);var d=Tg.runCommand('tee "'+
g+'"',Object.assign({stdin:c||""},k));return d.whenDone().then(function(){if(d.exitCode)throw Error("Write "+g+" failed: "+d.stderr);return d})}function DN(g,c){c=void 0===c?{}:c;return oj._runCommand(g,Object.assign({l2lClient:oj.L2LClient.ensure(oj.defaultConnection)},c))}function EN(){return oj._defaultDirectory(oj.L2LClient.ensure(oj.defaultConnection))}function VV(){return oj._env(oj.L2LClient.ensure(oj.defaultConnection))}function WV(g){function c(){0<d.length&&k.push(d);d=""}for(var k=[],d=
"",h="normal",n=0,b;b=g[n];n++)if("normal"===h&&/\s/.test(b))c();else{if('"'===b||"'"===b){if("normal"===h){h=b;continue}if(h===b){h="normal";continue}}"\\"===b&&h===g[n+1]&&(n++,b=g[n]);d+=b}c();return k}function XV(g,c,k){var d=k=void 0===k?{}:k,h=d.exclusions,n=void 0===d.fileTypes?[]:d.fileTypes,b=void 0===d.sizeLimit?"+1M":d.sizeLimit;k=void 0===d.charsBefore?80:d.charsBefore;d=void 0===d.charsAfter?80:d.charsAfter;h||(h=oj.defaultGrepExclusions);h=(h=[h.length?"-iname "+h.map(JSON.stringify).join(" -o -iname "):
"",b?"-size "+b:""].filter(Boolean).join(" -o "))?"\\( "+h+" \\) -prune -o":"";n=(n=n.length?"-iname "+n.map(JSON.stringify).join(" -o -iname "):"")?"-a \\( "+n+" \\)":"";b='find %s %s -type f %s -a -print0 | xargs -0 grep -IinH -o ".\\{0,%s\\}%s.\\{0,%s\\}" '.replace(/([\(\);])/g,"\\$1");g=oj.string.format(b,c,h,n,k,g,d);var e=oj.runCommand(g);e.whenDone().then(function(l){var a=l.exitCode;a&&1!==a||(e.results=l.stdout.split("\n").map(function(f){f=f.match(/(.*):([0-9]+):(.*)/);if(!f)return null;
var m=$jscomp.makeIterator(f);m.next();f=m.next().value;var r=m.next().value;m=m.next().value;return{filename:f,lineno:Number(r)-1,match:m}}).filter(Boolean))});return e}function FN(g,c){var k,d,h,n,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(1==e.nextAddress)return k=Xi.fileInfoCommandString(g,c),d=Xi.runCommand(k,c),e.yield(d.whenDone(),2);if(h=0!=d.exitCode?d.output:null)throw h;n=$jscomp.makeIterator(Xi.parseDirectoryListFromLs(d.stdout,c.rootDirectory||"."));b=n.next().value;
return e.return(b)})}function YV(g,c){return Xi.string.lines(g).map(function(k){return k.trim().length?(new Xi.FileInfo(c)).readFromDirectoryListLine(k):null}).filter(Boolean)}function GN(g,c){var k,d,h,n,b,e,l,a,f;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){k=Object.assign({findFilesGroup:"default-find-files-process"},c);d=k.findFilesGroup;h=k.rootDirectory;b=n=Xi.findFilesProcesses[d]||(Xi.findFilesProcesses[d]={promiseState:null,commands:[]});e=b.commands;l=b.promiseState;l||
(n.promiseState=l=Xi.promise.deferred());a=Xi.findFilesCommandString(g,c);e.forEach(function(r){return r.kill()});f=Xi.runCommand(a,c);e.push(f);f.whenDone().then(function(){Xi.arr.remove(e,f);if(e.some(function(v){return v.startTime>f.startTime}))console.log("[findFiles] command "+f+" exited but a newer findFiles command was started for group "+d+", discarding output");else{var r=0!=f.exitCode?f.output:null;r&&console.warn(r);r=r?[]:Xi.parseDirectoryListFromLs(f.stdout,h)||[];l.resolve(r);Object.assign(n,
{promiseState:null,commands:[]})}}).catch(function(r){return console.error(r)});return m.return(l.promise)})}function ZV(g){function c(k){return Array.prototype.concat.apply([k],k.children?k.children.map(c):[])}return c(g).map(function(k){var d=k.fullPath.replace(/^\//,"");return{fileName:d,path:d,rootDirectory:"./",isDirectory:k.isDirectory,isLink:void 0,lastModified:void 0,linkCount:void 0,mode:void 0,size:void 0,group:void 0,user:void 0}})}function $V(g){return[]}function HN(g,c){c=void 0===c?
{}:c;var k,d,h,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){switch(b.nextAddress){case 1:return k=c.morphicDB||Xe.MorphicDB.default,b.yield(k.load("part","string"===typeof g?g:g.name,c,"string"===typeof g?void 0:g),2);case 2:d=b.yieldResult;if(!d.isWindow||!d.targetMorph){b.jumpTo(3);break}h=d.targetMorph;return b.yield(Xe.ensureCommitInfo(d.metadata&&d.metadata.commit),4);case 4:(n=b.yieldResult)&&h.changeMetaData("commit",n,!0,!1);case 3:return b.return(d)}})}function aW(g,c,
k,d,h,n){var b,e,l,a,f,m,r,v,x;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){switch(y.nextAddress){case 1:y.setCatchFinallyBlocks(2);if(g.isMorph){y.jumpTo(4);break}if("function"!==typeof g.beforePublish){y.jumpTo(5);break}return y.yield(g.beforePublish(c,g),5);case 4:b=[],g.withAllSubmorphsDo(function(E){"function"===typeof E.beforePublish&&b.push(E)}),e=$jscomp.makeIterator(b),l=e.next();case 8:if(l.done){y.jumpTo(5);break}a=l.value;return y.yield(a.beforePublish(),9);case 9:l=
e.next();y.jumpTo(8);break;case 5:y.leaveTryBlock(3);break;case 2:f=y.enterCatchBlock(),m="Error in beforePublish of "+g+"\n"+f.stack,"function"===typeof g.world&&g.world()?g.world().logError(Error(m)):console.error(m);case 3:return r=Object.assign({previewWidth:100,previewHeight:100,previewType:"png"},k),v=k.morphicDB||Xe.MorphicDB.default,y.yield(v.snapshotAndCommit("part",c,g,r,d,h,n),12);case 12:return x=y.yieldResult,Xe.emit("lively.partsbin/partpublished",x),y.return(x)}})}function nI(g,c){c=
void 0===c?{}:c;var k,d,h,n,b,e,l,a,f,m,r,v,x,y,E,F,I,J,P,N,Y,W,da,va,za,L,Z,R,X,ja,fa,ua,gb,hb,ta,na,pa,La,Hb,fc,Ob,Zb,Hc,Gb,dd,Gd,ma,Ga,Ja,vb,Vb,vd,ud;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Jc){switch(Jc.nextAddress){case 1:return k=c,d=void 0===k.showPublishDialog?!0:k.showPublishDialog,h=void 0===k.notifications?!0:k.notifications,n=void 0===k.loadingIndicator?!0:k.loadingIndicator,b=void 0===k.preferWindow?!0:k.preferWindow,a=g,f=g.world()||g.env.world,m=g.name,r=[],v="",
Jc.yield(Xe.ensureCommitInfo(Xe.Path("metadata.commit").get(g)||Xe.Path("metadata.commit").get(a)),2);case 2:x=Jc.yieldResult;y=c.morphicDB||Xe.MorphicDB.default;x||(x={type:"part",name:g.name,author:f.getCurrentUser(),tags:[],description:"no description"});if(!d){x&&(E=x,m=E.name,r=E.tags,v=E.description);Jc.jumpTo(3);break}F=f;I=F.openPrompt;return Jc.yield(Xe.loadPart("publish part dialog"),5);case 5:return Jc.yield(I.call(F,Jc.yieldResult,{part:g}),4);case 4:J=Jc.yieldResult;P=J.db;N=J.commit;
if(!N)return Jc.return(null);P&&(c.morphicDB=y=P);Y=N;m=Y.name;r=Y.tags;v=Y.description;case 3:if(!n){Jc.jumpTo(6);break}W=$world.execCommand("open loading indicator","saving "+m+"...");return Jc.yield(Xe.promise.delay(80),6);case 6:Jc.setCatchFinallyBlocks(8,9);da="HEAD";va=x?x.name:g.name;if(va===m){za=x?x._id:void 0;Jc.jumpTo(11);break}return Jc.yield(y.exists("part",m),12);case 12:L=Jc.yieldResult;Z=L.exists;R=L.commitId;if(!Z){Jc.jumpTo(13);break}return Jc.yield(f.confirm('A part "'+m+'" already exists, overwrite?'),
14);case 14:X=Jc.yieldResult;if(!X)return Jc.return(null);za=R;case 13:a.name=m;case 11:return b&&!g.isWindow&&(ja=g.getWindow())&&ja.targetMorph===g&&(g=ja,l=ja.metadata,e=!0),fa={author:g.world().getCurrentUser(),message:"published",tags:r,description:v},Jc.yield(Xe.savePart(g,m,c,fa,da,za),15);case 15:ua=Jc.yieldResult;if(!e){Jc.jumpTo(16);break}if(a.metadata)return hb=a.metadata,Jc.yield(Xe.ensureCommitInfo(ja.metadata.commit),20);gb=a;return Jc.yield(Xe.ensureCommitInfo(ja.metadata.commit),19);
case 19:gb.metadata={commit:Jc.yieldResult};Jc.jumpTo(18);break;case 20:hb.commit=Jc.yieldResult;case 18:ja.metadata=l;case 16:return h&&g.setStatusMessage("saved part "+m),Jc.return(ua);case 9:Jc.enterFinallyBlock();W&&W.remove();Jc.leaveFinallyBlock(0);break;case 8:ta=Jc.enterCatchBlock();na=$jscomp.makeIterator(ta.message.match(/Trying to store "([^"]+)" on top of expected version ([^\s]+) but ref HEAD is of version ([^\s!]+)/)||[]);na.next();na.next();pa=na.next().value;La=na.next().value;if(!pa||
!La){Jc.jumpTo(21);break}Hb=$jscomp;fc=Hb.makeIterator;return Jc.yield(y.log(La,1,!0),22);case 22:return Ob=fc.call(Hb,Jc.yieldResult),Hc=Zb=Ob.next().value,Gb=Hc.author,dd=Gb.name,Gd=Hc.timestamp,ma='The current version of part "'+m+'" is not the most recent!\nA newer version by '+(dd+" was saved on ")+(Xe.date.format(new Date(Gd),"yyyy-mm-dd HH:MM")+". Overwrite?"),Jc.yield(f.confirm(["Version Mismatch\n",{},ma,{fontWeight:"normal",fontSize:16}]),23);case 23:Ga=Jc.yieldResult;if(!Ga)return Jc.return(null);
Ja=Xe.obj.dissoc(Zb,["preview"]);a.changeMetaData("commit",Ja,!0,!1);return Jc.return(nI(a,Object.assign({},c,{morphicDB:y,showPublishDialog:!1})));case 21:vb=$jscomp.makeIterator(ta.message.match(/Trying to store "([^"]+)" on top of expected version ([^\s]+) but no version entry exists/)||[]);vb.next();vb.next();Vb=vb.next().value;if(!Vb){Jc.jumpTo(24);break}vd="Part "+m+" no longer exist in the object database.\nDo you still want to publish it?";return Jc.yield(f.confirm(vd),25);case 25:ud=Jc.yieldResult;
if(!ud)return Jc.return(null);a.changeMetaData("commit",null,!0,!1);return Jc.return(nI(a,Object.assign({},c,{morphicDB:y,showPublishDialog:!1})));case 24:throw console.error(ta),h&&f.logError("Error saving part: "+ta),ta;}})}function bW(g){g=void 0===g?{}:g;var c,k,d,h,n,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(1==e.nextAddress)return c=g.morphicDB||Xe.MorphicDB.default,e.yield(c.latestCommits("part"),2);if(3!=e.nextAddress)return k=e.yieldResult,d=k.map(function(l){return{isListItem:!0,
string:l.name,value:l}}),e.yield($world.filterableListPrompt("Select part to load",d,{fuzzy:!0}),3);h=e.yieldResult;n=$jscomp.makeIterator(h.selected);b=n.next().value;return e.return(b?Xe.loadPart(b):null)})}function cW(g){var c;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){if(1==k.nextAddress)return k.yield($world.prompt("Enter part name to publish object under",{input:g.name||"part-name",historyId:"lively.partsbin-partname-publish-to-folder-input-hist"}),2);c=k.yieldResult;if(!c)throw"canceled";
return k.return(Xe.saveObjectToPartsbinFolder(g,c,{previewWidth:g.width,previewHeight:g.height}))})}function dW(g,c,k){k=void 0===k?{}:k;var d,h,n,b,e,l,a,f,m;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){switch(r.nextAddress){case 1:k=Object.assign({preferWindow:!0},k);k.preferWindow&&(g=(d=g.getWindow())&&d.targetMorph===g?d:g);r.setCatchFinallyBlocks(2);if(g.isMorph){r.jumpTo(4);break}if("function"!==typeof g.beforePublish){r.jumpTo(5);break}return r.yield(g.beforePublish(c,g),
5);case 4:h=[],g.withAllSubmorphsDo(function(v){"function"===typeof v.beforePublish&&h.push(v)}),n=$jscomp.makeIterator(h),b=n.next();case 8:if(b.done){r.jumpTo(5);break}e=b.value;return r.yield(e.beforePublish(),9);case 9:b=n.next();r.jumpTo(8);break;case 5:r.leaveTryBlock(3);break;case 2:l=r.enterCatchBlock(),a="Error in beforePublish of "+g+"\n"+l.stack,"function"===typeof g.world&&g.world()?g.world().logError(Error(a)):console.error(a);case 3:return r.yield(Xe.resource(k.partsbinFolder).ensureExistance(),
12);case 12:return f=Xe.resource(k.partsbinFolder).join(c+".json"),r.yield(Xe.createMorphSnapshot(g,k),13);case 13:return m=r.yieldResult,r.yield(f.write(JSON.stringify(m,null,2)),14);case 14:return r.return({partName:c,url:f.url})}})}function IN(g,c){c=void 0===c?{}:c;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){return k.return(Xe.loadPart(g,c))})}function eW(g){return new Xe.CommitEditor(g)}function JN(g,c,k){var d,h;return $jscomp.asyncExecutePromiseGeneratorProgram(function(n){d=
g.isResource?g:ig.resource(System.decanonicalize(g));h=d.nameWithoutExt();return n.return(ig.loadWorldFromDB(h,void 0,c,k))})}function KN(g,c,k){var d,h,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){if(1==b.nextAddress)return d=ig.MorphicDB.default,b.yield(d.load("world",void 0,k,g),2);h=b.yieldResult;n="undefined"!==typeof document?document.location.search:"";k=Object.assign({pathForBrowserHistory:ig.pathForBrowserHistory(h.name,n)},k);return b.return(ig.loadWorld(h,c,k))})}function LN(g,
c,k,d){var h,n,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(1==e.nextAddress)return h=ig.MorphicDB.default,e.yield(h.load("world",g,d,void 0,c||void 0),2);n=e.yieldResult;b="undefined"!==typeof document?document.location.search:"";d=Object.assign({pathForBrowserHistory:ig.pathForBrowserHistory(g,b)},d);return e.return(ig.loadWorld(n,k,d))})}function MN(g,c,k){k=void 0===k?{}:k;var d,h,n,b,e,l,a,f,m,r,v,x,y,E;return $jscomp.asyncExecutePromiseGeneratorProgram(function(F){switch(F.nextAddress){case 1:d=
k;h=d.env;n=d.root;b=void 0===d.verbose?!0:d.verbose;e=void 0===d.localconfig?!0:d.localconfig;l=void 0===d.l2l?!0:d.l2l;a=void 0===d.shell?!0:d.shell;f=void 0===d.worldLoadDialog?!1:d.worldLoadDialog;m=void 0===d.showUserFlap?"undefined"===typeof g.showsUserFlap?!0:g.showsUserFlap:d.showUserFlap;h=h||(c?c.env:ig.MorphicEnv.default());r=h.domEnv.document||document;v=r.getElementById("dom-loading-indicator");F.setCatchFinallyBlocks(2,3);if(!(x=l)){F.jumpTo(5);break}return F.yield(ig.setupLively2Lively(g),
6);case 6:x=F.yieldResult;case 5:y=x;if(!y||!a){F.jumpTo(7);break}return F.yield(ig.setupLivelyShell({l2lClient:y}),7);case 7:b&&v&&(v.style.display="");if(!e){F.jumpTo(9);break}return F.yield(ig.loadLocalConfig(),10);case 10:case 9:return F.yield(h.setWorld(g,n),11);case 11:f&&g.execCommand("load world");k.pathForBrowserHistory&&window.history.pushState({},"lively.next",k.pathForBrowserHistory);g.showsUserFlap=m;if(c)c.onUnload();ig.emit("world/loaded",g);return F.return(g);case 3:F.enterFinallyBlock();
v&&(v.style.display="none");F.leaveFinallyBlock(0);break;case 2:E=F.enterCatchBlock();console.error("Error loading world: ",E);if(!c){F.jumpTo(12);break}return F.yield(h.setWorld(c),13);case 13:c.showError(E);case 12:throw E;}})}function nF(g,c){var k,d,h,n,b,e,l,a,f,m,r,v,x,y,E,F,I,J,P,N,Y,W,da,va,za,L,Z,R,X,ja,fa,ua,gb,hb,ta,na,pa,La,Hb,fc,Ob,Zb,Hc,Gb,dd,Gd,ma,Ga;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ja){switch(Ja.nextAddress){case 1:return c=Object.assign({showSaveDialog:!0,
useExpectedCommit:!0,errorOnMissingExpectedCommit:!1,confirmOverwrite:!0},c),k=g.name,d=[],h="",Ja.yield(ig.ensureCommitInfo(ig.Path("metadata.commit").get(g)),2);case 2:n=Ja.yieldResult;b=c.morphicdb||ig.MorphicDB.default;e="";l="db";if(!c.showSaveDialog){n&&(a=n,k=a.name,d=a.tags,h=a.description);Ja.jumpTo(3);break}return Ja.yield(ig.resource("part://SystemDialogs/save world dialog").read(),4);case 4:return f=Ja.yieldResult,Ja.yield(g.openPrompt(f,{targetWorld:g}),5);case 5:if(m=Ja.yieldResult,
r=m.commit,v=m.db,x=m.mode,y=m.filePath,v&&(b=v),l=x,e=y,E=r||{},k=E.name,d=E.tags,h=E.description,!k)return Ja.return(null);case 3:return F=$world.execCommand("open loading indicator","saving "+k+"..."),Ja.yield(ig.promise.delay(80),6);case 6:if("json"!=l){Ja.jumpTo(7);break}I=ig.resource(System.baseURL).join(e).withRelativePartsResolved();return Ja.yield(I.exists(),8);case 8:return Ja.yieldResult?(F.visible=!1,Ja.yield($world.confirm(["File Conflict\n",{},"The file you want to save the world to\n",
{fontSize:15,fontWeight:"normal"},I.url,{textStyle:"italic",fontSize:15,fontWeight:"normal"},"\n already exists. Overwrite?",{fontSize:15,fontWeight:"normal"}],{lineWrapping:!1}),12)):Ja.yield(I.ensureExistance(),10);case 12:J=Ja.yieldResult;if(!J)return F.remove(),Ja.return();F.visible=!0;case 10:return g.changeMetaData("file",e,!1,!1),Ja.yield(ig.createMorphSnapshot(g),13);case 13:return P=Ja.yieldResult,Ja.yield(I.writeJson(P),14);case 14:return N=JSON.stringify(P),Y=e.replace(".json",".br.json"),
W=ig,da=W.resource,Ja.yield(ig.defaultDirectory(ig.ShellClientResource.defaultL2lClient),16);case 16:return Ja.yield(da.call(W,Ja.yieldResult+"/..").join(Y).withRelativePartsResolved().brotli(N),15);case 15:return ig.resource(System.baseURL).join("/subserver/ComponentsBrowser/refresh").join(k).read(),F.remove(),g.setStatusMessage("saved world "+k+" to file: "+I.url),Ja.return();case 7:Ja.setCatchFinallyBlocks(17,18);va={previewWidth:200,previewHeight:200,previewType:"png",ignoreMorphs:[F]};za="HEAD";
L=n?n.name:g.name;if(!c.useExpectedCommit){Ja.jumpTo(20);break}if(L===k||!c.confirmOverwrite){Z=n?n._id:void 0;Ja.jumpTo(20);break}return Ja.yield(b.exists("world",k),22);case 22:R=Ja.yieldResult;X=R.exists;ja=R.commitId;if(!X){Ja.jumpTo(23);break}F.center=g.windowBounds().center();F.visible=!1;return Ja.yield(g.confirm(["The world\n",{fontWeight:"normal"},'"'+k+'"',{},"\nalready exists, overwrite?",{fontWeight:"normal"}],{hasFixedPosition:!0,width:350}),24);case 24:fa=Ja.yieldResult;F.visible=!0;
if(!fa)return Ja.return(null);Z=ja;case 23:g.name=k;case 20:return ua={author:g.getCurrentUser(),message:"world save",tags:d,description:h},Ja.yield(b.snapshotAndCommit("world",k,g,va,ua,za,Z),25);case 25:return gb=Ja.yieldResult,window.history&&(hb=ig.pathForBrowserHistory(k),window.history.pushState({},"lively.next",hb)),ig.resource(System.baseURL).join("/subserver/ComponentsBrowser/refresh").join(k).read(),g.setStatusMessage("saved world "+k),g.get("world-list")&&g.get("world-list").onWorldSaved(k),
Ja.return(gb);case 18:Ja.enterFinallyBlock();F.remove();Ja.leaveFinallyBlock(0);break;case 17:ta=Ja.enterCatchBlock();if(ta.message.includes("but no version entry exists")&&!c.errorOnMissingExpectedCommit)return Ja.return(nF(g,Object.assign({},c,{morphicdb:b,useExpectedCommit:!1,showSaveDialog:!1})));na=$jscomp.makeIterator(ta.message.match(/Trying to store "([^"]+)" on top of expected version ([^\s]+) but ref HEAD is of version ([^\s!]+)/)||[]);na.next();na.next();pa=na.next().value;La=na.next().value;
if(!pa||!La){Ja.jumpTo(26);break}Hb=$jscomp;fc=Hb.makeIterator;return Ja.yield(b.log(La,1,!0),27);case 27:Ob=fc.call(Hb,Ja.yieldResult);Zb=Ob.next().value;Hc=!0;if(!c.confirmOverwrite){Ja.jumpTo(28);break}Gb=Zb;dd=Gb.author;Gd=dd.name;ma=Gb.timestamp;Ga="The current version of world "+k+" is not the most recent!\nA newer version by "+(Gd+" was saved on ")+(ig.date.format(new Date(ma),"yyyy-mm-dd HH:MM")+". Overwrite?");return Ja.yield(g.confirm(["Version Conflict\n",null,Ga,{fontSize:16,fontWeight:"normal"}],
{width:600}),29);case 29:Hc=Ja.yieldResult;case 28:if(!Hc)return Ja.return(null);g.changeMetaData("commit",ig.obj.dissoc(Zb,["preview"]),!0,!1);return Ja.return(nF(g,Object.assign({},c,{morphicdb:b,showSaveDialog:!1})));case 26:console.error(ta),g.logError("Error saving world: "+ta),Ja.jumpTo(18)}})}function fW(g,c){var k=g.row;g=g.column;var d=c.row;c=c.column;return k<d?-2:k===d?g<c?-1:g===c?0:1:2}function yw(g,c){return 0>Ll.comparePosition(g,c)}function oF(g,c){return 0>=Ll.comparePosition(g,
c)}function zw(g,c){return 0===Ll.comparePosition(g,c)}function pF(g,c){return Ll.lessPosition(g,c)?g:c}function qF(g,c){return Ll.lessPosition(g,c)?c:g}function gW(g,c){if(!g||!c)return g==c;var k=!0,d={},h;for(h in g)if(d[h]=!0,!c.hasOwnProperty(h)||g[h]!==c[h]){k=!1;break}if(k)for(var n in c)if(!(d[n]||g.hasOwnProperty(n)&&g[n]===c[n])){k=!1;break}return k}function NN(g,c,k,d,h){h=void 0===h?"":h;var n="string"!==typeof g,b="string"!==typeof k;if(n||b){var e=[];n?e.push(g,c):e.push(g+h,c);b?e.push(k,
d):e.push(k+h,d);return e}return!c&&!d||c==d?[g+h+k,c]:c&&d?Qh.shallowEquals(c,d)?[g+h+k,c]:[g+h,c,k,d]:[g+h,c,k,d]}function ON(g,c){c=void 0===c?"":c;if(2>=g.length)return g;var k=[],d=$jscomp.makeIterator(g),h=d.next().value,n=d.next().value;for(d=2;d<g.length;d+=2)n=Qh.concatAttributePair(h,n,g[d],g[d+1],c),2>=n.length?(h=n[0],n=n[1]):(k.push.apply(k,$jscomp.arrayFromIterable(n.slice(0,-2))),n=$jscomp.makeIterator(n.slice(-2)),h=n.next().value,n=n.next().value);k.push(h,n);return k}function PN(g,
c){for(var k=0,d=0;d<g.length;d+=2){var h=g[d],n=k+("string"===typeof h?h.length:1);if(n<c)k=n;else{if(k===c)return[g.slice(0,d),g.slice(d)];if(n===c)return[g.slice(0,d+2),g.slice(d+2)];if("string"!==typeof h)throw Error("Assuming text is a string for splitting it, got "+h+" instead!");var b=g[d+1],e=c-k;n=[].concat($jscomp.arrayFromIterable(g.slice(0,d)),[h.slice(0,e),b]);g=h.length===e?g.slice(d+2):[h.slice(c-k),b].concat($jscomp.arrayFromIterable(g.slice(d+2)));return[n,g]}}return[g,[]]}function QN(g,
c){var k=g;g=0;for(var d=[],h=0;h<c.length;h++){var n=$jscomp.makeIterator(Qh.splitTextAndAttributesAt(k,c[h]-g));k=n.next().value;n=n.next().value;d.push(k);for(var b=0;b<k.length;b+=2)g+="string"===typeof k[b]?k[b].length:1;k=n}d.push(k);return d}function RN(g,c,k){k=void 0===k?!1:k;if(!g.length||2===g.length&&""==g[0])return k?c:c.slice();if(!c.length||2===c.length&&""==c[0])return k?g:g.slice();g=k?g:g.slice();for(k=0;k<c.length;k+=2)g.push(c[k],c[k+1]);return g}function SN(g,c,k){var d=c.start;
c=c.end;if(Qh.eqPosition(d,c))return null;Qh.lessPosition(c,d)&&(c=$jscomp.makeIterator([c,d]),d=c.next().value,c=c.next().value);var h=d;d=h.row;var n=h.column;h=c;c=h.row;h=h.column;var b=g.getLine(d),e=b.textAndAttributes,l=0;n=$jscomp.makeIterator(Qh.splitTextAndAttributesAt(e,n));g=n.next().value;n=n.next().value;e.length=0;Qh.textAndAttributesDo(g,function(m,r){l+="string"===typeof m?m.length:1;e.push(m,r)});if(d===c){var a=$jscomp.makeIterator(Qh.splitTextAndAttributesAt(n,h-l));n=a.next().value;
a=a.next().value}Qh.textAndAttributesDo(n,function(m,r){return e.push(m,k(b,r))});d===c&&Qh.textAndAttributesDo(a,function(m,r){return e.push(m,r)});b._textAttributes=null;b.textAndAttributes=Qh.joinTextAttributes(e);if(d!==c){a={};for(d+=1;d<c;a={$jscomp$loop$prop$textAndAttributes$1531$2676:a.$jscomp$loop$prop$textAndAttributes$1531$2676},d++)b=b.nextLine(),a.$jscomp$loop$prop$textAndAttributes$1531$2676=b.textAndAttributes,g=a.$jscomp$loop$prop$textAndAttributes$1531$2676.slice(),a.$jscomp$loop$prop$textAndAttributes$1531$2676.length=
0,Qh.textAndAttributesDo(g,function(m){return function(r,v){return m.$jscomp$loop$prop$textAndAttributes$1531$2676.push(r,k(b,v))}}(a)),b._textAttributes=null,b.textAndAttributes=Qh.joinTextAttributes(a.$jscomp$loop$prop$textAndAttributes$1531$2676);b=b.nextLine();var f=b.textAndAttributes;d=$jscomp.makeIterator(Qh.splitTextAndAttributesAt(f,h));a=d.next().value;d=d.next().value;f.length=0;Qh.textAndAttributesDo(a,function(m,r){return f.push(m,k(b,r))});Qh.textAndAttributesDo(d,function(m,r){return f.push(m,
r)});b._textAttributes=null;b.textAndAttributes=Qh.joinTextAttributes(f)}}function TN(g,c){var k=g.column;g=g.row;var d=[],h=[];c=$jscomp.makeIterator(Qh.splitTextAndAttributesIntoLines(c));for(var n=c.next();!n.done;n=c.next()){n=n.value;for(var b=0;b<n.length;b+=2){var e=n[b];e=k+("string"===typeof e?e.length:1);d.push({start:{row:g,column:k},end:{row:g,column:e}});h.push(n[b],n[b+1]);k=e}k=0;g++}return{ranges:d,textAndAttributes:h}}function oI(g,c){c=void 0===c?"\n":c;if(!g.length)return[];for(var k=
[],d=[],h=0;h<g.length;h+=2){var n=g[h],b=g[h+1];if("string"!==typeof n)d.push(n,b);else for(;n.length;){var e=n.indexOf(c);if(-1===e){d.push(n,b);break}0<e&&d.push(n.slice(0,e),b);k.push(d);n=n.slice(e+1);d=[]}}d.length?k.push(d):(d=$jscomp.makeIterator(g.slice(-2)),g=d.next().value,d=d.next().value,"string"===typeof g&&g.endsWith(c)&&k.push(["",d]));return k}function UN(g,c){c=void 0===c?g.textAndAttributesInRange(g.selection.range):c;var k=new g.constructor(Object.assign({},g.defaultTextStyle,
{width:g.width,textAndAttributes:c}));c=k.textRenderer.directRenderTextLayerFn(k);g=k.textRenderer.directRenderLineFn(k);c=c();var d=System.global&&System.global.getComputedStyle?System.global.getComputedStyle(c):null;d&&(c.ownerDocument.body.appendChild(c),c.style.whiteSpace=d.whiteSpace,c.style.overflowWrap=d.overflowWrap,c.style.wordBreak=d.wordBreak,c.style.minWidth=d.minWidth,c.parentNode.removeChild(c));k=$jscomp.makeIterator(k.document.lines);for(d=k.next();!d.done;d=k.next())c.appendChild(g(d.value));
return c.outerHTML}function qy(g){return g?g.replace(/^\s+|\s+$/g,""):""}function hW(g,c){var k=g&&"string"===typeof g.type,d=k?g:c,h;for(h in g){var n=g[h];Array.isArray(n)?n.forEach(function(b){hW(b,d)}):n&&"object"===typeof n&&hW(n,d)}k&&Object.defineProperty(g,"parent",{configurable:!0,writable:!0,enumerable:!1,value:c||null});return g}function VN(g){(this||Rma).options=g||{}}function Tm(g){g=g||{};Y8.call(this||lA,g);(this||lA).indentation=g.indent}function zC(g){throw new RangeError(Sma[g]);
}function Z8(g,c){var k=g.split("@"),d="";1<k.length&&(d=k[0]+"@",g=k[1]);g=g.replace(Tma,".").split(".");k=[];for(var h=g.length;h--;)k[h]=c(g[h]);c=k.join(".");return d+c}function $8(g){for(var c=[],k=0,d=g.length;k<d;){var h=g.charCodeAt(k++);if(55296<=h&&56319>=h&&k<d){var n=g.charCodeAt(k++);56320==(64512&n)?c.push(((1023&h)<<10)+(1023&n)+65536):(c.push(h),k--)}else c.push(h)}return c}function Ys(){this.href=this.path=this.pathname=this.query=this.search=this.hash=this.hostname=this.port=this.host=
this.auth=this.slashes=this.protocol=null}function pI(g,c,k){if(g&&Aw.isObject(g)&&g instanceof Ys)return g;var d=new Ys;return d.parse(g,c,k),d}function Bw(g){if("string"!=typeof g)throw new TypeError("Path must be a string. Received "+JSON.stringify(g));}function a9(g,c){for(var k,d="",h=0,n=-1,b=0,e=0;e<=g.length;++e){if(e<g.length)k=g.charCodeAt(e);else{if(47===k)break;k=47}if(47===k){if(n!==e-1&&1!==b)if(n!==e-1&&2===b){if(2>d.length||2!==h||46!==d.charCodeAt(d.length-1)||46!==d.charCodeAt(d.length-
2))if(2<d.length){if(n=d.lastIndexOf("/"),n!==d.length-1){-1===n?(d="",h=0):h=(d=d.slice(0,n)).length-1-d.lastIndexOf("/");n=e;b=0;continue}}else if(2===d.length||1===d.length){d="";h=0;n=e;b=0;continue}c&&(0<d.length?d+="/..":d="..",h=2)}else 0<d.length?d+="/"+g.slice(n+1,e):d=g.slice(n+1,e),h=e-n-1;n=e;b=0}else 46===k&&-1!==b?++b:b=-1}return d}function iW(g,c){try{return decodeURIComponent(g.join(""))}catch(d){}if(1===g.length)return g;c=c||1;var k=g.slice(0,c);g=g.slice(c);return Array.prototype.concat.call([],
iW(k),iW(g))}function jW(){return Array.prototype.reduce.call(arguments,function(g,c){return Uma.resolve(g,c)})}function b9(g){return"\\"===Vma.sep?g.replace(/\\/g,"/").replace(/^[a-z]:\/?/i,"/"):g}function qI(g){return Wma(g.replace(/\+/g,"%2B"))}function WN(g,c,k){Xma.nextTick(function(){g(c,k)})}function rF(g,c){try{return JSON.parse(g.replace(/^\)\]\}'/,""))}catch(k){throw k.sourceMapData=c,k;}}function c9(g,c,k){c=qI(c);try{return String(g(c))}catch(d){throw d.sourceMapData=k,d;}}function d9(g,
c,k,d){try{var h=e9(g,c)}catch(n){return WN(d,n)}if(!h||h.map)return WN(d,null,h);g=qI(h.url);k(g,function(n,b){if(n)return n.sourceMapData=h,d(n);h.map=String(b);try{h.map=rF(h.map,h)}catch(e){return d(e)}d(null,h)})}function f9(g,c,k){g=e9(g,c);if(!g||g.map)return g;g.map=c9(k,g.url,g);g.map=rF(g.map,g);return g}function e9(g,c){c=b9(c);g=(g=g.match(Yma))?g[1]||g[2]||"":null;if(!g)return null;var k=g.match(Zma);if(k){var d=k[1]||"text/plain",h=k[2]||"";k=k[3]||"";c={sourceMappingURL:g,url:null,
sourcesRelativeTo:c,map:k};if(!$ma.test(d)){var n=Error("Unuseful data uri mime type: "+d);n.sourceMapData=c;throw n;}try{if(";base64"===h)if("undefined"===typeof TextDecoder||"undefined"===typeof Uint8Array)n=g9(k);else{var b=g9(k),e=b.length,l=new Uint8Array(e);for(g=0;g<e;g++)l[g]=b.charCodeAt(g);n=(new TextDecoder(ana,{fatal:!0})).decode(l)}else n=decodeURIComponent(k);c.map=rF(n,c)}catch(a){throw a.sourceMapData=c,a;}return c}n=jW(c,g);return{sourceMappingURL:g,url:n,sourcesRelativeTo:n,map:null}}
function h9(g,c,k,d,h){"function"===typeof d&&(h=d,d={});var n=g.sources?g.sources.length:0,b={sourcesResolved:[],sourcesContent:[]};if(0===n)WN(h,null,b);else{var e=function(){n--;0===n&&h(null,b)};i9(g,c,d,function(l,a,f){b.sourcesResolved[f]=l;"string"===typeof a?(b.sourcesContent[f]=a,WN(e,null)):(l=qI(l),k(l,function(m,r){b.sourcesContent[f]=m?m:String(r);e()}))})}}function j9(g,c,k,d){var h={sourcesResolved:[],sourcesContent:[]};if(!g.sources||0===g.sources.length)return h;i9(g,c,d,function(n,
b,e){h.sourcesResolved[e]=n;if(null!==k)if("string"===typeof b)h.sourcesContent[e]=b;else{n=qI(n);try{h.sourcesContent[e]=String(k(n))}catch(l){h.sourcesContent[e]=l}}});return h}function i9(g,c,k,d){k=k||{};c=b9(c);for(var h,n,b=0,e=g.sources.length;b<e;b++)h=null,"string"===typeof k.sourceRoot?h=k.sourceRoot:"string"===typeof g.sourceRoot&&!1!==k.sourceRoot&&(h=g.sourceRoot),h=null===h||""===h?jW(c,g.sources[b]):jW(c,h.replace(bna,"/"),g.sources[b]),n=(g.sourcesContent||[])[b],d(h,n,b)}function eo(g){k9.call(this||
kW,g)}function XN(g){if(g&&g.isListItem&&"string"===typeof g.string)return g;if(!g||!g.isListItem)return{isListItem:!0,string:String(g),value:g};var c=g.string||g.label||"no item.string";g.string=c&&"string"!==typeof c?Array.isArray(c)?c.map(function(k,d){return 0==d%2?String(k):""}).join(""):String(c):String(c);return g}function YN(g){var c=g.filePath,k=g.worldName,d=g.snapshot,h=g.commit,n=g.loadingIndicator,b=g.progress,e=void 0===g.logError?function(ja){return console.log(ja)}:g.logError,l,a,
f,m,r,v,x,y,E,F,I,J,P,N,Y,W,da,va,za,L,Z,R,X;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ja){switch(ja.nextAddress){case 1:return ja.setCatchFinallyBlocks(2),l=JSON.parse(localStorage.getItem("lively.load-config")||'{"lively.lang":"dynamic","lively.ast":"dynamic","lively.source-transform":"dynamic","lively.classes":"dynamic","lively.vm":"dynamic","lively.modules":"dynamic","lively.user":"dynamic","lively.storage":"dynamic","lively.morphic":"dynamic"}'),b.opacity=0,b.hasFixedPosition=
!0,b.openInWorld(),b.bottomCenter=n.topCenter,ja.yield(Ge.polyfills(),4);case 4:return a=$world.env,Ge.doBootstrap?ja.yield(Ge.bootstrapLivelySystem(n,b,l),8):ja.yield(Ge.fastPrepLivelySystem(n),7);case 7:ja.jumpTo(6);break;case 8:case 6:return n.label="Loading lively.2lively...",ja.yield(lively.modules.registerPackage("lively.2lively"),9);case 9:Ge.askBeforeQuit&&window.addEventListener("beforeunload",function(fa){return fa.returnValue="Really?"},!0);if("dynamic"!=l["lively.morphic"]||Ge.fastLoad){f=
lively.morphic;ja.jumpTo(10);break}n.label="Loading lively.morphic...";return ja.yield(lively.modules.importPackage("lively.morphic"),11);case 11:f=ja.yieldResult,b.finishPackage({packageName:"lively.morphic",loaded:!0});case 10:n.label="Loading world...";window.onresize=null;window.loadCompiledFrozenPart=lively.modules.module("lively.morphic/partsbin.js")._recorder.loadPart;lively.FreezerRuntime=!1;m=document.location;window.worldLoadingIndicator=n;ja.setCatchFinallyBlocks(12);r={root:$world.env.renderer.rootNode,
verbose:!0,localconfig:!0,l2l:!0,shell:!0};if(d)return d.startsWith("http")||(d=Ge.resource(System.baseURL).join(d).url),ja.yield(lively.modules.module("lively.morphic/world.js").recorder,33);if(h)return ja.yield(f.World.loadFromCommit(h,void 0,Object.assign({},r,{browserURL:"/worlds/load?name="+h.name})),15);if(k)return"__newWorld__"==k?Object.values(l).every(function(fa){return"frozen"==fa})||Ge.fastLoad?ja.yield(lively.modules.module("lively.ide/world.js").recorder,29):ja.yield(lively.modules.System.import("lively.ide/world.js"),
27):ja.yield(f.World.loadFromDB(k,void 0,void 0,Object.assign({},r,{browserURL:"/worlds/load?name="+k.replace(/\.json($|\?)/,"")})),15);if(!c){ja.jumpTo(15);break}return ja.yield(f.World.loadFromResource(Ge.resource(System.baseURL).join(c),void 0,Object.assign({},r,{browserURL:"/worlds/load?file="+c})),15);case 27:return y=ja.yieldResult,v=y.LivelyWorld,ja.yield(lively.modules.System.import("lively.morphic/world-loading.js"),28);case 28:E=ja.yieldResult;x=E.loadWorld;ja.jumpTo(26);break;case 29:return F=
ja.yieldResult,v=F.LivelyWorld,ja.yield(lively.modules.module("lively.morphic/world-loading.js").recorder,30);case 30:I=ja.yieldResult,x=I.loadWorld;case 26:return ja.yield(x(new v({openNewProjectPrompt:!0}),void 0,r),15);case 33:return Y=ja.yieldResult,J=Y.World,ja.yield(lively.modules.module("lively.morphic/world-loading.js").recorder,34);case 34:return W=ja.yieldResult,N=W.loadWorld,ja.yield(lively.modules.module("lively.morphic/serialization.js").recorder,35);case 35:return da=ja.yieldResult,
va=P=da.loadMorphFromSnapshot,ja.yield(Ge.resource(d).readJson(),37);case 37:return ja.yield(va(ja.yieldResult),36);case 36:return za=ja.yieldResult,ja.yield(N(new J({showsUserFlap:!1,extent:$world.extent}),void 0,r),38);case 38:L=ja.yieldResult,L.addMorph(za),L.onWindowResize();case 15:ja.leaveTryBlock(13,2);break;case 12:Z=ja.enterCatchBlock(2),window.__loadError__=Z;case 13:return b.finishPackage({packageName:"world",loaded:!0}),b.fadeIntoBack(),window.addEventListener("popstate",function(fa){document.location==
m&&document.location.reload()}),Ge.worldLoaded=!0,ja.yield($world.whenReady(),39);case 39:return n.remove(),ja.yield(a.renderer.worldMorph.whenRendered(),40);case 40:"dynamic"!=l["lively.morphic"]||Ge.fastLoad||(a.renderer.clear(),a.fontMetric.uninstall(),a.eventDispatcher.uninstall());ja.leaveTryBlock(0);break;case 2:throw R=ja.enterCatchBlock(),R.originalErr&&(R=R.originalErr),X=R.message,R.stack!==R.message&&(X+=R.stack.includes(R.message)?R.stack.replace(R.message,"\n"):R.stack),e(X),R;}})}Ha({$:hg,
B:Kx,D:wz,F:td,G:yf,H:Uc,J:Nf,K:je,M:Zc,N:cn,O:$a,P:Ih,Q:Cs,R:So,S:Gc,U:fu,V:tN,W:Nb,X:bw,Z:iI,_:DN,a:fE,a2:dj,a3:Ei,aF:Dl,aG:Xl,aJ:Pb,ab:qc,af:IN,ag:HN,ah:nF,ak:cp,b:dE,b0:vw,bB:Uv,bD:gn,bG:Fp,bH:Cl,bM:du,bP:Cb,bQ:Gs,bS:Jm,bT:um,bX:function(g){g=void 0===g?document.body:g;var c;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){Zs.default().world||(c=window.$world=window.$$world=new ry({name:l9.name,extent:Ei(window.innerWidth,window.innerHeight)}),Zs.default().setWorldRenderedOn(c,g,
window.prerenderNode));window.$world.dontRecordChangesWhile(function(){var d=iu(l9,{reinitializeIds:function(h){return h}});if(d.isWorld)d.position=Ei(0,0),Zs.default().setWorldRenderedOn(d,g,window.prerenderNode),"elastic"===d.resizePolicy&&d.execCommand("resize to fit window");else try{g!=document.body?(new window.ResizeObserver(function(h){return d.execCommand("resize on client",h[0])})).observe(g):window.onresize=lively.FreezerRuntime.resizeHandler=function(){return d.execCommand("resize on client")},
d.openInWorld(Ei(0,0)),d.execCommand("resize on client",g)}catch(h){d.position=Ei(0,0)}});k.jumpToEnd()})},bd:Bs,be:tr,bg:rN,bi:mg,bk:Xv,bs:H,bw:Bp,by:fh,c:Ds,e:Nx,f:wr,g:xC,h:cl,i:zb,j:Nn,k:jH,l:Mm,m:CB,n:Ld,o:Dc,p:Xk,q:Hn,r:A,s:gI,t:Ve,u:jc,v:Uo,w:le,x:Qv,y:mr,z:Sv});var sF=lively.FreezerRuntime.recorderFor("lively.lang/closure.js");sF.evalJS=hf;sF.parameterRegex=/function[^\(]*\(([^\)]*)\)|\(?([^\)=]*)\)?\s*=>/;var ek=function(g,c,k,d){this.originalFunc=g;this.varMapping=c||{};this.setFuncSource(k||
g);this.setFuncProperties(g||d)};ek.fromFunction=function(g,c){return new this(g,c||{})};ek.fromSource=function(g,c){return new this(null,c||{},g)};ek.prototype.setFuncSource=function(g){return this.source=g="undefined"!==typeof lively&&lively.sourceTransform&&"function"===typeof lively.sourceTransform.stringifyFunctionWithoutToplevelRecorder?lively.sourceTransform.stringifyFunctionWithoutToplevelRecorder(g):String(g)};ek.prototype.getFuncSource=function(){return this.source||this.setFuncSource(this.originalFunc)};
ek.prototype.hasFuncSource=function(){return this.source&&!0};ek.prototype.getFunc=function(){return this.originalFunc||this.recreateFunc()};ek.prototype.getFuncProperties=function(){return this.funcProperties||(this.funcProperties={})};ek.prototype.setFuncProperties=function(g){var c=this.getFuncProperties(),k;for(k in g)g.hasOwnProperty(k)&&(c[k]=g[k])};ek.prototype.lookup=function(g){return this.varMapping[g]};ek.prototype.parameterNames=function(g){return"undefined"!==typeof lively&&lively.ast&&
lively.ast.parseFunction?(lively.ast.parseFunction(g).params||[]).map(function(c){return"Identifier"===c.type?c.name:c.left&&"Identifier"===c.left.type?c.left.name:null}).filter(Boolean):(g=sF.parameterRegex.exec(g))?(g[1]||g[2]||"").split(",").map(function(c){return c.trim()}):[]};ek.prototype.firstParameter=function(g){return this.parameterNames(g)[0]||null};ek.prototype.recreateFunc=function(){return this.recreateFuncFromSource(this.getFuncSource(),this.originalFunc)};ek.prototype.recreateFuncFromSource=
function(g,c){c=[];var k="$super"===this.firstParameter(g);for(d in this.varMapping)this.varMapping.hasOwnProperty(d)&&"this"!=d&&c.push("var "+d+" = this.varMapping."+d+";\n");var d="";0<c.length&&(d+=c.join("\n"));k&&(d+="(function superWrapperForClosure() { return ");d+="("+g+")";k&&(d+=".apply(this, [$super.bind(this)].concat(Array.from(arguments))) })");try{var h=sF.evalJS.call(this,d)||this.couldNotCreateFunc(d);this.addFuncProperties(h);return this.originalFunc=h}catch(n){throw g="Cannot create function "+
n+" src: "+d,console.error(g),Error(g);}};ek.prototype.addFuncProperties=function(g){var c=this.getFuncProperties(),k;for(k in c)c.hasOwnProperty(k)&&(g[k]=c[k]);this.addClosureInformation(g)};ek.prototype.couldNotCreateFunc=function(g){var c="Could not recreate closure from source: \n"+g;console.error(c);return function(){throw Error(c);}};ek.prototype.asFunction=function(){return this.recreateFunc()};ek.prototype.addClosureInformation=function(g){g.hasLivelyClosure=!0;g.livelyClosure=this;return g};
$jscomp.global.Object.defineProperties(ek.prototype,{isLivelyClosure:{configurable:!0,enumerable:!0,get:function(){return!0}},doNotSerialize:{configurable:!0,enumerable:!0,get:function(){return["originalFunc"]}}});Ha("bq",ek);sF.Closure=ek;sF.default=ek;var mA=lively.FreezerRuntime.recorderFor("lively.lang/Group.js");mA.groupBy=yf;var Ho=function(){};Ho.fromArray=function(g,c,k){for(var d=new mA.Group,h=0,n=g.length;h<n;h++){var b=c.call(k,g[h],h);mA.Group.prototype.hasOwnProperty(b)&&(b="_"+b);d[b]||
(d[b]=[]);d[b].push(g[h])}return d};Ho.prototype.toArray=function(){return this.reduceGroups(function(g,c,k){return g.concat([k])},[])};Ho.prototype.forEach=function(g,c){var k=this;Object.keys(k).forEach(function(d){k[d].forEach(g.bind(c,d))});return k};Ho.prototype.forEachGroup=function(g,c){var k=this;Object.keys(k).forEach(function(d){g.call(c,d,k[d])});return k};Ho.prototype.map=function(g,c){var k=new mA.Group;this.forEachGroup(function(d,h){k[d]=h.map(g.bind(c,d))});return k};Ho.prototype.mapGroups=
function(g,c){var k=new mA.Group;this.forEachGroup(function(d,h){k[d]=g.call(c,d,h)});return k};Ho.prototype.keys=function(){return Object.keys(this)};Ho.prototype.reduceGroups=function(g,c,k){this.forEachGroup(function(d,h){c=g.call(k,c,d,h)});return c};Ho.prototype.count=function(){return this.reduceGroups(function(g,c,k){g[c]=k.length;return g},{})};$jscomp.global.Object.defineProperties(Ho,{by:{configurable:!0,enumerable:!0,get:function(){return mA.groupBy}}});mA.Group=Ho;mA.default=Ho;var Jb=
lively.FreezerRuntime.recorderFor("lively.lang/array.js");Jb.range=Ld;Jb.withN=Tc;Jb.genN=$d;Jb.filter=Uc;Jb.binarySearchFor=Pc;Jb.findAndGet=Jd;Jb.filterByKey=pe;Jb.grep=Ze;Jb.mask=Ff;Jb.reject=te;Jb.rejectByKey=Bc;Jb.without=sd;Jb.withoutAll=le;Jb.uniq=jc;Jb.uniqBy=je;Jb.uniqByKey=Ae;Jb.compact=Dc;Jb.mutableCompact=Mc;Jb.forEach=bc;Jb.zip=Gc;Jb.flatten=Zc;Jb.flatmap=Rd;Jb.interpose=Kd;Jb.delimWith=rb;Jb.map=ob;Jb.invoke=Bb;Jb.pluck=Va;Jb.reduce=Ta;Jb.reduceRight=xa;Jb.some=wa;Jb.every=Qa;Jb.equals=
Eb;Jb.deepEquals=rc;Jb.isSorted=qb;Jb.sort=sb;Jb.sortBy=kb;Jb.sortByKey=ha;Jb.reverse=Pa;Jb.reversed=T;Jb.reMatches=ia;Jb.first=Fa;Jb.last=$a;Jb.intersect=zb;Jb.union=Cc;Jb.pushAt=Ba;Jb.removeAt=Ca;Jb.remove=Nb;Jb.pushAll=Ec;Jb.pushAllAt=fb;Jb.pushIfNotIncluded=td;Jb.replaceAt=Xd;Jb.clear=ae;Jb.isSubset=Bf;Jb.doAndContinue=ie;Jb.nestedDelay=Zf;Jb.forEachShowingProgress=Hg;Jb.swap=Wc;Jb.rotate=vc;Jb.groupBy=yf;Jb.groupByKey=tc;Jb.partition=wb;Jb.batchify=uc;Jb.toTuples=Q;Jb.combinationsPick=Da;Jb.combinations=
ib;Jb.take=Kb;Jb.drop=pc;Jb.takeWhile=Wb;Jb.dropWhile=rd;Jb.shuffle=id;Jb.max=oe;Jb.min=Tf;Jb.sum=Ce;Jb.count=$e;Jb.size=af;Jb.histogram=of;Jb.clone=pd;Jb.toArray=gg;Jb.each=Sf;Jb.all=Nf;Jb.any=Ag;Jb.collect=Ig;Jb.findAll=xc;Jb.inject=Wh;Jb.mapAsyncSeries=Di;Jb.mapAsync=Bh;Jb.objectEquals=To;Jb.delay=mf;Jb.once=um;Jb.NullFunction=db;Jb.Group=Ho;Jb.GLOBAL="undefined"!==typeof System?System.global:"undefined"!==typeof window?window:global;Jb.features={from:!!Array.from,filter:!!Array.prototype.filter,
find:!!Array.prototype.find,findIndex:!!Array.prototype.findIndex,includes:!!Array.prototype.includes};Jb.from=Jb.features.from?Array.from:function(g){if(!g)return[];if(Array.isArray(g))return g;if(g.toArray)return g.toArray();for(var c=g.length,k=Array(c);c--;)k[c]=g[c];return k};Jb.detect=Jb.features.find?function(g,c,k){return g.find(c,k)}:function(g,c,k){for(var d,h=0,n=g.length;h<n;h++)if(d=g[h],c.call(k,d,h))return d};Jb.findIndex=Jb.features.findIndex?function(g,c,k){return g.findIndex(c,k)}:
function(g,c,k){var d=-1;return g.find(function(h,n){d=n;return c.call(h,k)})?d:-1};Jb.isArray=Array.isArray;Jb.includes=Jb.features.includes?function(g,c){return g.includes(c)}:function(g,c){return-1!==g.indexOf(c)};Jb.include=Jb.includes;Jb.permutations=function(){function g(c,k){return c.length?Jb.flatmap(c,function(d,h){return g(c.slice(0,h).concat(c.slice(h+1)),k.concat([d]))}):[k]}return function(c){return g(c,[])}}();Jb.features.from||(Array.from=Jb.from);Jb.features.filter||(Array.prototype.filter=
function(g,c){return Jb.filter(this,g,c)});Jb.features.find||(Array.prototype.find=function(g,c){return Jb.detect(this,g,c)});Jb.features.findIndex||(Array.prototype.findIndex=function(g,c){return Jb.findIndex(this,g,c)});Jb.features.includes||(Array.prototype.includes=function(g){return Jb.includes(this,g)});var lW=Jb.from,mW=Jb.detect,nW=Jb.findIndex,oW=Ha("d",Jb.isArray),pW=Jb.includes,qW=Jb.include,rW=Jb.permutations;Jb.range=Ld;Jb.range=Ld;Jb.from=lW;Jb.from=lW;Jb.withN=Tc;Jb.withN=Tc;Jb.genN=
$d;Jb.genN=$d;Jb.filter=Uc;Jb.filter=Uc;Jb.detect=mW;Jb.detect=mW;Jb.binarySearchFor=Pc;Jb.binarySearchFor=Pc;Jb.findIndex=nW;Jb.findIndex=nW;Jb.findAndGet=Jd;Jb.findAndGet=Jd;Jb.filterByKey=pe;Jb.filterByKey=pe;Jb.grep=Ze;Jb.grep=Ze;Jb.mask=Ff;Jb.mask=Ff;Jb.reject=te;Jb.reject=te;Jb.rejectByKey=Bc;Jb.rejectByKey=Bc;Jb.without=sd;Jb.without=sd;Jb.withoutAll=le;Jb.withoutAll=le;Jb.uniq=jc;Jb.uniq=jc;Jb.uniqBy=je;Jb.uniqBy=je;Jb.uniqByKey=Ae;Jb.uniqByKey=Ae;Jb.compact=Dc;Jb.compact=Dc;Jb.mutableCompact=
Mc;Jb.mutableCompact=Mc;Jb.forEach=bc;Jb.forEach=bc;Jb.zip=Gc;Jb.zip=Gc;Jb.flatten=Zc;Jb.flatten=Zc;Jb.flatmap=Rd;Jb.flatmap=Rd;Jb.interpose=Kd;Jb.interpose=Kd;Jb.delimWith=rb;Jb.delimWith=rb;Jb.map=ob;Jb.map=ob;Jb.invoke=Bb;Jb.invoke=Bb;Jb.pluck=Va;Jb.pluck=Va;Jb.reduce=Ta;Jb.reduce=Ta;Jb.reduceRight=xa;Jb.reduceRight=xa;Jb.isArray=oW;Jb.isArray=oW;Jb.includes=pW;Jb.includes=pW;Jb.include=qW;Jb.include=qW;Jb.some=wa;Jb.some=wa;Jb.every=Qa;Jb.every=Qa;Jb.equals=Eb;Jb.equals=Eb;Jb.deepEquals=rc;Jb.deepEquals=
rc;Jb.isSorted=qb;Jb.isSorted=qb;Jb.sort=sb;Jb.sort=sb;Jb.sortBy=kb;Jb.sortBy=kb;Jb.sortByKey=ha;Jb.sortByKey=ha;Jb.reverse=Pa;Jb.reverse=Pa;Jb.reversed=T;Jb.reversed=T;Jb.reMatches=ia;Jb.reMatches=ia;Jb.first=Fa;Jb.first=Fa;Jb.last=$a;Jb.last=$a;Jb.intersect=zb;Jb.intersect=zb;Jb.union=Cc;Jb.union=Cc;Jb.pushAt=Ba;Jb.pushAt=Ba;Jb.removeAt=Ca;Jb.removeAt=Ca;Jb.remove=Nb;Jb.remove=Nb;Jb.pushAll=Ec;Jb.pushAll=Ec;Jb.pushAllAt=fb;Jb.pushAllAt=fb;Jb.pushIfNotIncluded=td;Jb.pushIfNotIncluded=td;Jb.replaceAt=
Xd;Jb.replaceAt=Xd;Jb.clear=ae;Jb.clear=ae;Jb.isSubset=Bf;Jb.isSubset=Bf;Jb.doAndContinue=ie;Jb.doAndContinue=ie;Jb.nestedDelay=Zf;Jb.nestedDelay=Zf;Jb.forEachShowingProgress=Hg;Jb.forEachShowingProgress=Hg;Jb.swap=Wc;Jb.swap=Wc;Jb.rotate=vc;Jb.rotate=vc;Jb.groupBy=yf;Jb.groupBy=yf;Jb.groupByKey=tc;Jb.groupByKey=tc;Jb.partition=wb;Jb.partition=wb;Jb.batchify=uc;Jb.batchify=uc;Jb.toTuples=Q;Jb.toTuples=Q;Jb.permutations=rW;Jb.permutations=rW;Jb.combinationsPick=Da;Jb.combinationsPick=Da;Jb.combinations=
ib;Jb.combinations=ib;Jb.take=Kb;Jb.take=Kb;Jb.drop=pc;Jb.drop=pc;Jb.takeWhile=Wb;Jb.takeWhile=Wb;Jb.dropWhile=rd;Jb.dropWhile=rd;Jb.shuffle=id;Jb.shuffle=id;Jb.max=oe;Jb.max=oe;Jb.min=Tf;Jb.min=Tf;Jb.sum=Ce;Jb.sum=Ce;Jb.count=$e;Jb.count=$e;Jb.size=af;Jb.size=af;Jb.histogram=of;Jb.histogram=of;Jb.clone=pd;Jb.clone=pd;Jb.toArray=gg;Jb.toArray=gg;Jb.each=Sf;Jb.each=Sf;Jb.all=Nf;Jb.all=Nf;Jb.any=Ag;Jb.any=Ag;Jb.collect=Ig;Jb.collect=Ig;Jb.findAll=xc;Jb.findAll=xc;Jb.inject=Wh;Jb.inject=Wh;Jb.mapAsyncSeries=
Di;Jb.mapAsyncSeries=Di;Jb.mapAsync=Bh;Jb.mapAsync=Bh;var Mf=Object.freeze({__proto__:null,range:Ld,from:lW,withN:Tc,genN:$d,filter:Uc,detect:mW,binarySearchFor:Pc,findIndex:nW,findAndGet:Jd,filterByKey:pe,grep:Ze,mask:Ff,reject:te,rejectByKey:Bc,without:sd,withoutAll:le,uniq:jc,uniqBy:je,uniqByKey:Ae,compact:Dc,mutableCompact:Mc,forEach:bc,zip:Gc,flatten:Zc,flatmap:Rd,interpose:Kd,delimWith:rb,map:ob,invoke:Bb,pluck:Va,reduce:Ta,reduceRight:xa,isArray:oW,includes:pW,include:qW,some:wa,every:Qa,equals:Eb,
deepEquals:rc,isSorted:qb,sort:sb,sortBy:kb,sortByKey:ha,reverse:Pa,reversed:T,reMatches:ia,first:Fa,last:$a,intersect:zb,union:Cc,pushAt:Ba,removeAt:Ca,remove:Nb,pushAll:Ec,pushAllAt:fb,pushIfNotIncluded:td,replaceAt:Xd,clear:ae,isSubset:Bf,doAndContinue:ie,nestedDelay:Zf,forEachShowingProgress:Hg,swap:Wc,rotate:vc,groupBy:yf,groupByKey:tc,partition:wb,batchify:uc,toTuples:Q,permutations:rW,combinationsPick:Da,combinations:ib,take:Kb,drop:pc,takeWhile:Wb,dropWhile:rd,shuffle:id,max:oe,min:Tf,sum:Ce,
count:$e,size:af,histogram:of,clone:pd,toArray:gg,each:Sf,all:Nf,any:Ag,collect:Ig,findAll:xc,inject:Wh,mapAsyncSeries:Di,mapAsync:Bh});Ha("a6",Mf);var fd=lively.FreezerRuntime.recorderFor("lively.lang/function.js");fd.Empty=If;fd.K=Oa;fd.Null=db;fd.False=Fb;fd.True=ea;fd.notYetImplemented=Ma;fd.all=lb;fd.own=xb;fd.argumentNames=yc;fd.qualifiedMethodName=Yb;fd.extractBody=ad;fd.timeToRun=od;fd.timeToRunN=ed;fd.delay=mf;fd.throttle=qg;fd.debounce=Yf;fd.throttleNamed=Mh;fd.debounceNamed=Ui;fd.createQueue=
Fg;fd.workerWithCallbackQueue=ph;fd._composeAsyncDefaultEndCallback=function(g,c){g&&console.error("lively.lang.composeAsync error",g)};fd.composeAsync=Bg;fd.compose=cl;fd.flip=Rg;fd.withNull=sk;fd.waitFor=Qf;fd.waitForAll=Dk;fd.curry=Al;fd.wrap=Dn;fd.getOriginal=Oo;fd.wrapperChain=En;fd.replaceMethodForOneCall=lm;fd.once=um;fd.either=rk;fd.eitherNamed=Rh;fd.evalJS=hf;fd.fromString=vm;fd.asScript=Lb;fd.asScriptOf=bd;fd.addToObject=re;fd.binds=he;fd.setLocalVarValue=bg;fd.getVarMapping=eh;fd.setProperty=
Ek;fd.functionNames=po;fd.localFunctionNames=bs;fd.logErrors=ut;fd.logCompletion=Po;fd.logCalls=dq;fd.traceCalls=vp;fd.webkitStack=oo;fd.objectMerge=Wo;fd.safeToString=ro;fd.Closure=ek;fd.arr=Mf;fd._throttledByName={};fd._debouncedByName={};fd._queues={};fd._queueUntilCallbacks={};fd._eitherNameRegistry={};fd.Empty=If;fd.Empty=If;fd.K=Oa;fd.K=Oa;fd.Null=db;fd.Null=db;fd.False=Fb;fd.False=Fb;fd.True=ea;fd.True=ea;fd.notYetImplemented=Ma;fd.notYetImplemented=Ma;fd.withNull=sk;fd.withNull=sk;fd.all=
lb;fd.all=lb;fd.own=xb;fd.own=xb;fd.argumentNames=yc;fd.argumentNames=yc;fd.qualifiedMethodName=Yb;fd.qualifiedMethodName=Yb;fd.extractBody=ad;fd.extractBody=ad;fd.timeToRun=od;fd.timeToRun=od;fd.timeToRunN=ed;fd.timeToRunN=ed;fd.delay=mf;fd.delay=mf;fd.throttle=qg;fd.throttle=qg;fd.debounce=Yf;fd.debounce=Yf;fd.throttleNamed=Mh;fd.throttleNamed=Mh;fd.debounceNamed=Ui;fd.debounceNamed=Ui;fd.createQueue=Fg;fd.createQueue=Fg;fd.workerWithCallbackQueue=ph;fd.workerWithCallbackQueue=ph;fd.composeAsync=
Bg;fd.composeAsync=Bg;fd.compose=cl;fd.compose=cl;fd.waitFor=Qf;fd.waitFor=Qf;fd.waitForAll=Dk;fd.waitForAll=Dk;fd.flip=Rg;fd.flip=Rg;fd.curry=Al;fd.curry=Al;fd.wrap=Dn;fd.wrap=Dn;fd.binds=he;fd.binds=he;fd.getOriginal=Oo;fd.getOriginal=Oo;fd.wrapperChain=En;fd.wrapperChain=En;fd.replaceMethodForOneCall=lm;fd.replaceMethodForOneCall=lm;fd.once=um;fd.once=um;fd.either=rk;fd.either=rk;fd.eitherNamed=Rh;fd.eitherNamed=Rh;fd.evalJS=hf;fd.evalJS=hf;fd.fromString=vm;fd.fromString=vm;fd.asScript=Lb;fd.asScript=
Lb;fd.asScriptOf=bd;fd.asScriptOf=bd;fd.addToObject=re;fd.addToObject=re;fd.setLocalVarValue=bg;fd.setLocalVarValue=bg;fd.getVarMapping=eh;fd.getVarMapping=eh;fd.setProperty=Ek;fd.setProperty=Ek;fd.functionNames=po;fd.functionNames=po;fd.localFunctionNames=bs;fd.localFunctionNames=bs;fd.logErrors=ut;fd.logErrors=ut;fd.logCompletion=Po;fd.logCompletion=Po;fd.logCalls=dq;fd.logCalls=dq;fd.traceCalls=vp;fd.traceCalls=vp;fd.webkitStack=oo;fd.webkitStack=oo;var vn=Object.freeze({__proto__:null,Empty:If,
K:Oa,Null:db,False:Fb,True:ea,notYetImplemented:Ma,withNull:sk,all:lb,own:xb,argumentNames:yc,qualifiedMethodName:Yb,extractBody:ad,timeToRun:od,timeToRunN:ed,delay:mf,throttle:qg,debounce:Yf,throttleNamed:Mh,debounceNamed:Ui,createQueue:Fg,workerWithCallbackQueue:ph,composeAsync:Bg,compose:cl,waitFor:Qf,waitForAll:Dk,flip:Rg,curry:Al,wrap:Dn,binds:he,getOriginal:Oo,wrapperChain:En,replaceMethodForOneCall:lm,once:um,either:rk,eitherNamed:Rh,evalJS:hf,fromString:vm,asScript:Lb,asScriptOf:bd,addToObject:re,
setLocalVarValue:bg,getVarMapping:eh,setProperty:Ek,functionNames:po,localFunctionNames:bs,logErrors:ut,logCompletion:Po,logCalls:dq,traceCalls:vp,webkitStack:oo});Ha("aO",vn);var me=lively.FreezerRuntime.recorderFor("lively.lang/object.js");me.print=cs;me.indent=function(g,c,k){if(!k||0>=k)return g;for(;0<k;)k--,g=c+g;return g};me.isArray=fq;me.isElement=Vq;me.isFunction=wp;me.isBoolean=eq;me.isString=So;me.isNumber=Wq;me.isUndefined=ds;me.isRegExp=es;me.isObject=Wg;me.isPrimitive=yd;me.isEmpty=
Yq;me.equals=To;me.values=Uo;me.select=Xq;me.dissoc=Hn;me.addScript=mm;me.extend=Ro;me.clone=xp;me.extract=In;me.inspect=Bj;me.merge=Wo;me.deepMerge=Vo;me.sortKeysWithBeforeAndAfterConstraints=qo;me.inherit=nm;me.valuesInPropertyHierarchy=Zq;me.mergePropertyInHierarchy=yp;me.deepCopy=gq;me.typeStringOf=fs;me.shortPrintStringOf=wm;me.isMutableType=Ql;me.safeToString=ro;me.asObject=Fn;me.newKeyIn=Bl;me.functionFromString=vm;me.asScriptOf=bd;me.argumentNames=yc;me.arrayDeepEquals=rc;me.isSubset=Bf;me.flatten=
Zc;me.getOwnPropertyDescriptors="function"===typeof Object.getOwnPropertyDescriptors?Object.getOwnPropertyDescriptors:function(g){var c={},k;for(k in g)Object.prototype.hasOwnProperty.call(g,k)&&Object.defineProperty(c,k,{configurable:!0,enumerable:!0,writable:!0,value:Object.getOwnPropertyDescriptor(g,k)});return c};me.keys=Object.keys;var sW=me.keys,tW=me.getOwnPropertyDescriptors;me.isArray=fq;me.isArray=fq;me.isElement=Vq;me.isElement=Vq;me.isFunction=wp;me.isFunction=wp;me.isBoolean=eq;me.isBoolean=
eq;me.isString=So;me.isString=So;me.isNumber=Wq;me.isNumber=Wq;me.isUndefined=ds;me.isUndefined=ds;me.isRegExp=es;me.isRegExp=es;me.isObject=Wg;me.isObject=Wg;me.isPrimitive=yd;me.isPrimitive=yd;me.isEmpty=Yq;me.isEmpty=Yq;me.equals=To;me.equals=To;me.keys=sW;me.keys=sW;me.values=Uo;me.values=Uo;me.select=Xq;me.select=Xq;me.dissoc=Hn;me.dissoc=Hn;me.addScript=mm;me.addScript=mm;me.extend=Ro;me.extend=Ro;me.clone=xp;me.clone=xp;me.extract=In;me.extract=In;me.inspect=Bj;me.inspect=Bj;me.merge=Wo;me.merge=
Wo;me.deepMerge=Vo;me.deepMerge=Vo;me.inherit=nm;me.inherit=nm;me.valuesInPropertyHierarchy=Zq;me.valuesInPropertyHierarchy=Zq;me.mergePropertyInHierarchy=yp;me.mergePropertyInHierarchy=yp;me.sortKeysWithBeforeAndAfterConstraints=qo;me.sortKeysWithBeforeAndAfterConstraints=qo;me.deepCopy=gq;me.deepCopy=gq;me.typeStringOf=fs;me.typeStringOf=fs;me.shortPrintStringOf=wm;me.shortPrintStringOf=wm;me.isMutableType=Ql;me.isMutableType=Ql;me.safeToString=ro;me.safeToString=ro;me.asObject=Fn;me.asObject=Fn;
me.newKeyIn=Bl;me.newKeyIn=Bl;me.getOwnPropertyDescriptors=tW;me.getOwnPropertyDescriptors=tW;var ng=Object.freeze({__proto__:null,isArray:fq,isElement:Vq,isFunction:wp,isBoolean:eq,isString:So,isNumber:Wq,isUndefined:ds,isRegExp:es,isObject:Wg,isPrimitive:yd,isEmpty:Yq,equals:To,keys:sW,values:Uo,select:Xq,dissoc:Hn,addScript:mm,extend:Ro,clone:xp,extract:In,inspect:Bj,merge:Wo,deepMerge:Vo,inherit:nm,valuesInPropertyHierarchy:Zq,mergePropertyInHierarchy:yp,sortKeysWithBeforeAndAfterConstraints:qo,
deepCopy:gq,typeStringOf:fs,shortPrintStringOf:wm,isMutableType:Ql,safeToString:ro,asObject:Fn,newKeyIn:Bl,getOwnPropertyDescriptors:tW});Ha("a8",ng);var uW={};(function(){var g=[].slice;var c={0:{8:{_:"an"},9:{_:"an"},"-":{1:{1:{_:"an"}},4:{" ":{_:"a"},_:"an"},6:{"-":{_:"an"}},8:{_:"an"}}},1:{1:{0:{_:"a"},1:{_:"a"},2:{_:"a"},3:{_:"a"},4:{_:"a"},5:{_:"a"},6:{_:"a"},7:{_:"a"},8:{_:"a"},9:{_:"a"},_:"an",".":{4:{_:"a"}}},8:{0:{0:{_:"an"},1:{_:"an"},2:{_:"an"},3:{_:"an"},4:{_:"an"},5:{_:"an"},6:{_:"an"},
7:{_:"an"},8:{_:"an"},9:{_:"an"},_:"a"},1:{"-":{_:"a"}," ":{_:"a"}},2:{"-":{_:"a"}," ":{_:"a"}},3:{"-":{_:"a"}," ":{_:"a"}},4:{"-":{_:"a"}," ":{_:"a"}},5:{"-":{_:"a"}," ":{_:"a"}},6:{"-":{_:"a"}," ":{_:"a"}},7:{"-":{_:"a"}," ":{_:"a"}},8:{"-":{_:"a"}," ":{_:"a"}},9:{"-":{_:"a"}," ":{_:"a"}},_:"an"}},8:{0:{0:{x:{_:"a"}}},9:{0:{_:"a"}},_:"an",",":{1:{_:"a"}}},"`":{a:{_:"an"}},"\u00a3":{8:{_:"an"}},"\u221e":{_:"an"},a:{" ":{_:"a"},b:{o:{u:{t:{"-":{_:"an"}},_:"a"}}},g:{a:{i:{_:"a"}}},l:{"-":{I:{_:"a"}},
g:{u:{_:"a"}},t:{h:{_:"a"}}},m:{o:{n:{_:"a"}}},n:{" ":{_:"a"},d:{a:{_:"an"},e:{_:"an"},r:{_:"an"},_:"a"},o:{t:{_:"a"}},y:{w:{_:"a"}}},p:{r:{e:{_:"a"}}},r:{e:{" ":{_:"a"},":":{_:"a"}},t:{"\u00ed":{_:"a"}}},_:"an"},A:{$:{_:"a"},A:{A:{_:"a"}},n:{d:{a:{l:{u:{c:{_:"a"}}}}}},r:{m:{a:{t:{_:"a"}}}},s:{t:{u:{r:{i:{a:{s:{_:"a"}}}}}}},t:{h:{l:{e:{t:{i:{_:"an"}}},o:{_:"an"},_:"a"}}},U:{$:{_:"a"},D:{_:"a"},S:{C:{_:"a"}}},_:"an"},"\u00c1":{_:"an"},"\u00e1":{";":{_:"an"}},"\u00e0":{_:"an"},"\u00c4":{_:"an"},"\u0101":{_:"an"},
"\u00c5":{_:"an"},"\u00e6":{_:"an"},"\u00c6":{n:{_:"a"},_:"an"},D:{"\u00fa":{n:{_:"a"}}},e:{".":{g:{_:"a"}},a:{c:{h:{" ":{_:"a"}}}},i:{t:{h:{e:{r:{" ":{_:"a"},".":{_:"a"}}}}}},l:{"-":{_:"a"},l:{a:{_:"a"}}},m:{p:{e:{z:{_:"a"}}}},n:{o:{u:{g:{_:"a"}}}},u:{p:{" ":{_:"an"}},_:"a"},w:{_:"a"},x:{i:{s:{t:{s:{_:"a"}}}}},_:"an"},E:{m:{p:{e:{z:{_:"a"}}}},n:{a:{m:{_:"a"}}},s:{p:{a:{d:{_:"an"}},e:{_:"an"},o:{_:"an"},_:"a"}},u:{l:{_:"an"},_:"a"},U:{R:{_:"a"}},_:"an"},"\u00e9":{g:{_:"a"},t:{a:{_:"an"},u:{_:"an"},
_:"a"},_:"an"},"\u00c9":{_:"an"},f:{"-":{_:"an"}," ":{_:"an"},"/":{_:"an"},M:{_:"an"},p:{_:"an"},t:{_:"an"}},F:{0:{_:"an"},1:{_:"an"},2:{_:"an"},3:{_:"an"},4:{_:"an"},5:{_:"an"},6:{_:"an"},9:{_:"an"},"'":{_:"an"},"-":{_:"an"}," ":{_:"an"},'"':{_:"an"},"#":{_:"an"},",":{_:"an"},".":{_:"an"},"/":{_:"an"},"\u201d":{_:"an"},A:{C:{_:"a"},D:{_:"a"},I:{R:{_:"a"}},L:{_:"a"},M:{_:"a"},N:{_:"a"},P:{_:"a"},Q:{_:"a"},R:{_:"a"},S:{_:"a"},T:{_:"a"},_:"an"},B:{_:"an"},C:{_:"an"},c:{_:"an"},D:{_:"an"},E:{C:{_:"an"},
I:{_:"an"}},F:{" ":{_:"a"},_:"an"},f:{_:"an"},h:{_:"an"},H:{_:"an"},I:{A:{T:{_:"a"},_:"an"},D:{" ":{_:"an"}},R:{" ":{_:"an"}},S:{" ":{_:"an"}}},K:{_:"an"},L:{C:{_:"an"},N:{_:"an"},P:{_:"an"}},M:{R:{_:"a"},_:"an"},O:{" ":{_:"an"},I:{" ":{_:"an"}}},P:{".":{_:"a"},"?":{_:"a"},C:{"?":{_:"a"}},_:"an"},R:{C:{_:"an"},S:{_:"an"}},S:{_:"an"},T:{S:{_:"a"},T:{_:"a"},_:"an"},U:{" ":{_:"an"},",":{_:"an"},".":{_:"an"}},V:{_:"an"},W:{D:{_:"a"},_:"an"},X:{_:"an"},Y:{_:"an"},"\u03c3":{_:"an"}},G:{h:{a:{e:{_:"an"},
i:{_:"an"}}}},h:{"'":{_:"an"},"-":{U:{_:"a"},_:"an"}," ":{_:"an"},'"':{_:"an"},",":{_:"an"},C:{_:"an"},e:{i:{r:{a:{_:"a"},_:"an"}}},i:{m:{s:{_:"an"}},s:{t:{o:{r:{i:{c:{_:"a"}}}}}}},o:{m:{a:{_:"an"},m:{_:"an"}},n:{e:{y:{_:"a"}},k:{_:"a"},v:{_:"a"},_:"an"},r:{s:{" ":{_:"an"}}},u:{r:{_:"an"}}},t:{t:{p:{" ":{_:"an"}},_:"a"},_:"an"}},H:{1:{_:"an"},2:{_:"an"},3:{_:"an"},4:{_:"an"},5:{_:"an"},"'":{_:"an"},"-":{_:"an"}," ":{_:"an"},'"':{_:"an"},"&":{_:"an"},",":{_:"an"},".":{A:{_:"a"},_:"an"},"+":{_:"an"},
a:{b:{i:{l:{i:{t:{a:{t:{i:{o:{n:{s:{_:"an"}}}}}}}}}}}},B:{_:"an"},C:{_:"an"},D:{B:{_:"a"},_:"an"},e:{i:{r:{_:"an"}}},F:{_:"an"},G:{_:"an"},H:{_:"an"},I:{D:{_:"a"},G:{_:"a"},M:{_:"a"},P:{_:"a"},_:"an"},L:{A:{"-":{D:{_:"a"}}},_:"an"},M:{_:"an"},N:{_:"an"},o:{n:{d:{_:"a"},e:{s:{_:"an"},_:"a"},g:{_:"a"},k:{_:"a"},o:{l:{_:"a"}},_:"an"},u:{r:{_:"an"}}},O:{" ":{_:"an"},V:{_:"an"}},P:{_:"an"},Q:{_:"an"},R:{T:{_:"a"},_:"an"},S:{" ":{_:"a"},R:{_:"a"},T:{_:"a"},_:"an"},T:{P:{_:"a"},_:"an"},V:{_:"an"},W:{T:{_:"an"}}},
i:{".":{e:{_:"a"}},b:{n:{_:"a"}},f:{" ":{_:"a"}},i:{_:"a"},n:{c:{l:{u:{d:{i:{_:"a"}}}}},d:{i:{c:{a:{t:{e:{s:{_:"a"}}}}}}},s:{t:{e:{a:{d:{"?":{_:"an"}},_:"a"}}}}},s:{" ":{_:"a"},".":{_:"a"}},t:{" ":{_:"a"}},u:{_:"a"},_:"an"},I:{"-":{A:{_:"a"},I:{_:"a"}},I:{I:{_:"a"}},l:{b:{_:"a"}},M:{H:{_:"a"}},m:{a:{m:{s:{_:"a"}}}},R:{"\u00a3":{_:"a"}},s:{l:{a:{m:{" ":{_:"a"},",":{_:"a"},".":{_:"a"}},n:{d:{s:{_:"a"}}}}}},_:"an"},"\u0130":{_:"an"},J:{i:{a:{n:{_:"a"},_:"an"}}},k:{u:{" ":{_:"an"}}},l:{" ":{_:"an"},'"':{_:"an"},
p:{_:"an"}},L:{1:{_:"an"},2:{_:"an"},3:{_:"an"},5:{_:"an"},"'":{A:{_:"a"},_:"an"},"-":{a:{_:"a"},_:"an"}," ":{_:"an"},'"':{_:"an"},"&":{_:"an"},",":{_:"an"},".":{_:"an"},"/":{_:"an"},a:{e:{_:"an"},o:{i:{g:{_:"an"}}}},A:{" ":{_:"an"},L:{_:"an"},P:{_:"an"}},B:{_:"an"},C:{_:"an"},D:{_:"an"},E:{A:{_:"a"},E:{_:"a"},G:{_:"a"},O:{_:"a"},P:{_:"a"},T:{_:"a"},_:"an"},F:{_:"an"},G:{_:"an"},H:{_:"an"},I:{R:{_:"an"}},L:{_:"an"},M:{X:{_:"a"},_:"an"},N:{_:"an"},o:{c:{h:{a:{_:"an"}}}},O:{E:{_:"an"}},P:{_:"an"},R:{_:"an"},
S:{_:"an"},T:{_:"an"},U:{" ":{_:"an"}},V:{_:"an"},X:{_:"an"},Z:{_:"an"}},m:{"-":{_:"an"}," ":{_:"an"},'"':{_:"an"},"&":{_:"an"},a:{k:{e:{s:{" ":{_:"an"}}}}},b:{_:"an"},e:{i:{n:{_:"an"}},n:{t:{i:{o:{n:{s:{_:"an"}}}}}}},f:{_:"an"},p:{_:"an"},R:{_:"an"},t:{_:"an"}},M:{1:{9:{0:{_:"an"},_:"a"},_:"an"},2:{_:"an"},3:{_:"an"},4:{_:"an"},5:{_:"an"},6:{_:"an"},7:{_:"an"},8:{_:"an"},9:{_:"an"},"'":{_:"an"},"-":{t:{_:"a"},_:"an"}," ":{_:"an"},'"':{_:"an"},"&":{_:"an"},",":{_:"an"},".":{A:{".":{S:{_:"a"}}},_:"an"},
"/":{_:"an"},A:{C:{_:"a"},D:{_:"a"},F:{_:"a"},G:{_:"a"},J:{_:"a"},L:{_:"a"},M:{_:"a"},N:{_:"a"},P:{_:"a"},R:{_:"a"},S:{_:"a"},T:{_:"a"},X:{_:"a"},Y:{_:"a"},_:"an"},B:{_:"an"},C:{_:"an"},D:{_:"an"},e:{"-":{_:"an"}},E:{d:{_:"an"},n:{_:"an"},P:{_:"an"}},F:{_:"an"},f:{_:"an"},G:{_:"an"},H:{_:"an"},h:{_:"an"},i:{e:{_:"an"}},I:{5:{_:"an"},6:{_:"an"}," ":{_:"an"},A:{_:"an"},T:{_:"an"}},K:{_:"an"},L:{_:"an"},M:{T:{_:"a"},_:"an"},N:{_:"an"},o:{U:{_:"an"}},O:{" ":{_:"an"},T:{" ":{_:"an"}},U:{_:"an"}},P:{_:"an"},
R:{_:"an"},S:{_:"an"},s:{c:{_:"an"}},T:{R:{_:"a"},_:"an"},U:{V:{_:"an"}},V:{_:"an"},X:{_:"an"}},N:{4:{_:"an"},6:{_:"an"},"'":{_:"an"},"-":{a:{_:"a"},S:{_:"a"},_:"an"}," ":{_:"an"},'"':{_:"an"},",":{_:"an"},".":{Y:{_:"a"},_:"an"},"=":{_:"an"},"\u00b2":{_:"an"},a:{o:{_:"an"}},A:{" ":{_:"an"},A:{F:{_:"a"},_:"an"},I:{_:"an"},S:{L:{_:"an"}}},B:{_:"an"},C:{_:"an"},D:{_:"an"},E:{A:{_:"an"},H:{_:"an"},S:{" ":{_:"an"}}},F:{_:"an"},G:{_:"an"},H:{_:"an"},I:{C:{_:"a"},L:{_:"a"},M:{H:{_:"an"},_:"a"},N:{_:"a"},
S:{_:"a"},_:"an"},J:{C:{_:"an"}},K:{_:"an"},L:{S:{_:"a"},_:"an"},M:{_:"an"},N:{R:{_:"an"},T:{_:"an"}},P:{O:{V:{"-":{_:"an"}},_:"a"},_:"an"},R:{J:{_:"a"},T:{_:"a"},_:"an"},S:{W:{_:"a"},_:"an"},T:{$:{_:"a"},_:"an"},U:{S:{_:"an"}},V:{_:"an"},v:{_:"an"},W:{A:{_:"an"}},X:{_:"an"},Y:{P:{_:"an"},U:{_:"an"}}},n:{"-":{_:"an"},"\u2212":{_:"an"}," ":{_:"an"},'"':{_:"an"},"&":{_:"an"},",":{_:"an"},"+":{_:"an"},"\u00d7":{_:"an"},d:{a:{_:"an"}},p:{a:{_:"an"}},t:{_:"an"},V:{_:"an"},W:{_:"an"}},o:{b:{r:{_:"a"}},
c:{c:{u:{r:{s:{_:"a"}}}},h:{o:{_:"a"}}},f:{" ":{_:"a"}},n:{"-":{_:"an"},"/":{_:"an"},b:{_:"an"},c:{o:{_:"an"}},d:{_:"an"},e:{r:{_:"an"}},g:{_:"an"},i:{_:"an"},l:{_:"an"},m:{_:"an"},o:{_:"an"},r:{_:"an"},s:{_:"an"},t:{_:"an"},u:{_:"an"},w:{_:"an"},y:{_:"an"},_:"a"},r:{" ":{_:"a"},",":{_:"a"}},u:{i:{_:"a"}},_:"an"},O:{b:{e:{r:{s:{t:{" ":{_:"an"},l:{_:"an"}},_:"a"}}}},l:{v:{_:"a"}},n:{e:{i:{_:"an"},_:"a"}},N:{E:{_:"a"}},o:{p:{_:"a"}},u:{i:{_:"a"}},_:"an"},"\u00d3":{_:"an"},"\u00d6":{_:"an"},"\u00f6":{_:"an"},
"\u014c":{_:"an"},"\u014d":{_:"an"},P:{h:{o:{b:{_:"an"},i:{_:"an"}}}},r:{"'":{_:"an"},"-":{_:"an"}," ":{_:"an"},'"':{_:"an"},"&":{_:"an"},".":{_:"an"},e:{f:{e:{r:{s:{_:"an"}}}}},f:{_:"an"},m:{_:"an"},s:{_:"an"}},R:{1:{0:{_:"a"},_:"an"},2:{_:"an"},3:{_:"an"},4:{_:"an"},5:{_:"an"},6:{_:"an"},"'":{_:"an"},"-":{_:"an"}," ":{_:"an"},'"':{_:"an"},"&":{_:"an"},",":{_:"an"},".":{C:{_:"a"},_:"an"},"/":{_:"an"},A:{" ":{_:"an"},F:{_:"an"}},B:{_:"an"},C:{_:"an"},D:{_:"an"},E:{" ":{_:"an"},R:{_:"an"}},F:{_:"an"},
f:{_:"an"},G:{_:"an"},H:{S:{_:"an"}},I:{A:{_:"an"},C:{" ":{_:"an"}}},J:{_:"an"},K:{_:"an"},L:{" ":{_:"a"},_:"an"},M:{1:{_:"a"},_:"an"},N:{G:{_:"a"},_:"an"},O:{T:{_:"an"}},P:{_:"an"},Q:{_:"an"},R:{_:"an"},S:{" ":{_:"a"},")":{_:"a"},",":{_:"a"},".":{_:"a"},"?":{_:"a"},T:{_:"a"},_:"an"},T:{_:"an"},U:{_:"an"},V:{_:"an"},X:{_:"an"}},s:{"-":{_:"an"},'"':{_:"an"},")":{_:"an"},",":{_:"an"},".":{_:"an"},a:{y:{s:{_:"an"}}},i:{c:{h:{_:"an"}}},p:{3:{_:"an"},r:{o:{t:{_:"an"}}}},s:{h:{_:"an"}},t:{a:{t:{e:{s:{" ":{_:"an"},
":":{_:"an"}}}}}},v:{a:{_:"a"},e:{_:"a"},_:"an"}},S:{1:{_:"an"},2:{_:"an"},3:{_:"an"},4:{_:"an"},5:{_:"an"},6:{_:"an"},"'":{_:"an"},"-":{_:"an"}," ":{_:"an"},'"':{_:"an"},"&":{W:{_:"a"},_:"an"},",":{_:"an"},".":{B:{_:"an"},M:{_:"an"},O:{_:"an"}},"\u201d":{_:"an"},A:{"-":{1:{_:"a"},_:"an"}," ":{_:"an"},C:{D:{_:"an"}},E:{_:"an"},S:{E:{_:"a"},_:"an"},T:{" ":{_:"an"},B:{_:"an"}}},B:{_:"an"},C:{A:{" ":{_:"an"}},C:{_:"an"},M:{_:"an"},O:{" ":{_:"an"}},R:{A:{_:"a"},_:"an"},T:{_:"an"}},D:{_:"an"},E:{" ":{_:"an"},
C:{O:{_:"a"},R:{_:"a"},_:"an"},I:{_:"an"},O:{_:"an"}},F:{_:"an"},G:{_:"an"},H:{2:{_:"an"},3:{_:"an"},"-":{_:"an"}},I:{" ":{_:"an"}},J:{_:"an"},K:{_:"an"},L:{A:{_:"a"},I:{_:"a"},O:{_:"a"},_:"an"},M:{A:{_:"a"},E:{" ":{_:"an"},_:"a"},I:{_:"a"},_:"an"},N:{A:{_:"a"},E:{_:"a"},O:{_:"a"},_:"an"},O:{"(":{_:"an"},A:{" ":{_:"an"},I:{_:"an"}},E:{_:"an"},I:{_:"an"},S:{_:"an"},V:{_:"an"}},P:{A:{C:{_:"a"},D:{_:"a"},M:{_:"a"},N:{_:"a"},R:{_:"a"}},E:{" ":{_:"an"},_:"a"},I:{C:{_:"a"}},O:{_:"a"},U:{_:"a"},_:"an"},
R:{_:"an"},S:{_:"an"},T:{"-":{_:"an"},A:{" ":{_:"an"}},B:{_:"an"},C:{_:"an"},D:{_:"an"},F:{_:"an"},L:{_:"an"},M:{_:"an"},S:{_:"an"},V:{_:"an"}},u:{r:{a:{" ":{_:"an"}}}},U:{B:{_:"a"},L:{_:"a"},N:{_:"a"},P:{_:"a"},S:{_:"a"},_:"an"},V:{_:"an"},W:{F:{_:"an"},P:{_:"an"},R:{_:"an"}},X:{S:{_:"a"},_:"an"}},t:{"-":{S:{_:"an"}},S:{_:"an"}},T:{a:{v:{e:{s:{_:"an"}}}},"\u00e0":{_:"an"}},u:{"-":{_:"a"}," ":{_:"a"},'"':{_:"a"},".":{_:"a"},b:{e:{_:"an"},_:"a"},f:{_:"a"},k:{a:{_:"an"},_:"a"},l:{u:{_:"a"}},m:{" ":{_:"a"}},
n:{" ":{_:"a"},a:{" ":{_:"a"},n:{a:{_:"an"},n:{_:"an"},s:{_:"an"},t:{_:"an"},_:"a"},r:{y:{_:"a"}}},e:{" ":{_:"a"}},i:{c:{o:{r:{p:{_:"an"}}}},d:{i:{_:"a"},_:"an"},m:{o:{_:"a"},_:"an"},n:{_:"an"},v:{o:{_:"an"}},_:"a"},l:{e:{s:{_:"a"}}}},p:{o:{_:"a"}},r:{a:{_:"a"},e:{_:"a"},i:{_:"a"},l:{_:"a"},o:{_:"a"}},s:{"-":{_:"an"}," ":{_:"an"},h:{_:"an"},_:"a"},t:{m:{_:"an"},t:{_:"an"},_:"a"},v:{_:"a"},w:{_:"a"},_:"an"},U:{1:{_:"an"},"-":{B:{o:{_:"a"},_:"an"}},a:{_:"an"},b:{i:{_:"a"},_:"an"},D:{P:{"-":{_:"an"}}},
d:{_:"an"},g:{l:{_:"an"}},h:{_:"an"},i:{_:"an"},l:{i:{_:"a"},_:"an"},m:{_:"an"},M:{N:{_:"an"}},n:{"-":{_:"an"},a:{n:{_:"a"},_:"an"},b:{_:"an"},c:{_:"an"},d:{_:"an"},e:{s:{_:"a"},_:"an"},f:{_:"an"},g:{_:"an"},h:{_:"an"},i:{d:{_:"an"},n:{_:"an"}},k:{_:"an"},l:{_:"an"},m:{_:"an"},n:{_:"an"},o:{_:"an"},p:{_:"an"},r:{_:"an"},s:{_:"an"},t:{e:{r:{s:{_:"a"}}},_:"an"},u:{_:"an"},w:{_:"an"}},p:{_:"an"},r:{a:{_:"a"},i:{_:"a"},u:{g:{u:{a:{y:{a:{n:{"-":{_:"an"}}}}}}},k:{_:"an"},_:"a"},_:"an"},s:{h:{_:"an"},t:{_:"an"}},
t:{n:{_:"an"},o:{"-":{_:"an"}},r:{_:"an"},t:{_:"an"}},x:{_:"an"},z:{_:"an"}},"\u00fc":{_:"an"},"\u00dc":{_:"an"},V:{I:{I:{_:"an"}}},x:{a:{_:"a"},e:{_:"a"},i:{_:"a"},o:{_:"a"},x:{_:"a"},y:{_:"a"},_:"an"},X:{a:{_:"a"},A:{_:"a"},e:{_:"a"},h:{_:"a"},i:{_:"a"},I:{V:{_:"a"},X:{_:"a"}},o:{_:"a"},u:{_:"a"},U:{_:"a"},V:{_:"a"},X:{" ":{_:"an"},_:"a"},y:{_:"a"},_:"an"},Y:{p:{_:"an"}},"\u03b1":{_:"an"},"\u03b5":{_:"an"},"\u03c9":{_:"an"}};var k=function(d,h,n){null==h&&(h=c);null==n&&(n="a");if(null==d)return n;
var b=d.slice(0,1);h=h[b];return null!=b&&null!=h?k(d.slice(1),h,h._||n):n};uW={find:k,articlize:function(){var d=1<=arguments.length?g.call(arguments,0):[];var h;var n=[];var b=0;for(h=d.length;b<h;b++){var e=d[b];null!=e&&n.push(k(e)+" "+e)}return 1===d.length?n[0]:n}}}).call(uW);var cna=uW,Fc=lively.FreezerRuntime.recorderFor("lively.lang/string.js");Fc.format=zp;Fc.formatFromArray=Xo;Fc.indent=xm;Fc.minIndent=ya;Fc.changeIndent=Sa;Fc.quote=mb;Fc.articlize=Xa;Fc.findArticle=dc;Fc.print=$b;Fc.printNested=
oc;Fc.pad=zc;Fc.printTable=Md;Fc.printTree=Rf;Fc.toArray=Hf;Fc.lines=Vh;Fc.paragraphs=zg;Fc.nonEmptyLines=li;Fc.tokens=Xj;Fc.tableize=Fk;Fc.unescapeCharacterEntities=Qo;Fc.toQueryParams=Gn;Fc.base64EncodeUnicode=qv;Fc.base64DecodeUnicode=vt;Fc.normalizePath=gs;Fc.joinPath=Uk;Fc.newUUID=fh;Fc.createDataURI=rv;Fc.hashCode=ug;Fc.md5=wt;Fc.reMatches=xt;Fc.stringMatch=sv;Fc.peekRight=ex;Fc.peekLeft=hq;Fc.lineIndexComputer=so;Fc.lineNumberToIndexesComputer=bn;Fc.lineRanges=om;Fc.findLineWithIndexInLineRanges=
hs;Fc.regexIndexOf=$q;Fc.regexLastIndexOf=to;Fc.diff=fx;Fc.empty=Yy;Fc.startsWithVowel=yt;Fc.withDecimalPrecision=zt;Fc.capitalize=is;Fc.camelCaseString=iq;Fc.camelize=cn;Fc.truncate=uo;Fc.truncateLeft=Rl;Fc.regExpEscape=js;Fc.succ=tv;Fc.digitValue=gx;Fc.longestCommonSubstring=hx;Fc.applyChange=Zy;Fc.applyChanges=ix;Fc.levenshtein=ar;Fc.inspectObject=Bj;Fc.min=Tf;Fc.last=$a;Fc.articles=cna;Fc.features={repeat:!!String.prototype.repeat,includes:!!String.prototype.includes,startsWith:!!String.prototype.startsWith,
endsWith:!!String.prototype.endsWith};Fc.pathDotRe=/\/\.\//g;Fc.pathDoubleDotRe=/\/[^\/]+\/\.\./;Fc.pathDoubleSlashRe=/(^|[^:])[\/]+/g;Fc.urlStartRe=/^[a-z0-9-_\.]+:\/\//;Fc.newUUIDTemplate="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx";Fc.newUUIDRe=/[xy]/g;Fc.newUUIDReplacer=function(g){var c=16*Math.random()|0;return("x"==g?c:c&3|8).toString(16)};Fc.includes=Fc.features.includes?function(g,c){return g.includes(c)}:function(g,c){return-1<g.indexOf(c)};Fc.include=Fc.includes;Fc.startsWith=Fc.features.startsWith?
function(g,c){return g.startsWith(c)}:function(g,c){return 0===g.indexOf(c)};Fc.endsWith=Fc.features.endsWith?function(g,c){return g.endsWith(c)}:function(g,c){var k=g.length-c.length;return 0<=k&&g.lastIndexOf(c)===k};Fc.times=Fc.features.repeat?function(g,c){return g.repeat(c)}:function(g,c){return 1>c?"":Array(c+1).join(g)};var vW=Fc.includes,wW=Fc.include,xW=Fc.startsWith,yW=Fc.endsWith,zW=Fc.times;Fc.format=zp;Fc.format=zp;Fc.formatFromArray=Xo;Fc.formatFromArray=Xo;Fc.indent=xm;Fc.indent=xm;
Fc.minIndent=ya;Fc.minIndent=ya;Fc.changeIndent=Sa;Fc.changeIndent=Sa;Fc.quote=mb;Fc.quote=mb;Fc.articlize=Xa;Fc.articlize=Xa;Fc.findArticle=dc;Fc.findArticle=dc;Fc.print=$b;Fc.print=$b;Fc.printNested=oc;Fc.printNested=oc;Fc.pad=zc;Fc.pad=zc;Fc.printTable=Md;Fc.printTable=Md;Fc.printTree=Rf;Fc.printTree=Rf;Fc.toArray=Hf;Fc.toArray=Hf;Fc.lines=Vh;Fc.lines=Vh;Fc.paragraphs=zg;Fc.paragraphs=zg;Fc.nonEmptyLines=li;Fc.nonEmptyLines=li;Fc.tokens=Xj;Fc.tokens=Xj;Fc.tableize=Fk;Fc.tableize=Fk;Fc.unescapeCharacterEntities=
Qo;Fc.unescapeCharacterEntities=Qo;Fc.base64EncodeUnicode=qv;Fc.base64EncodeUnicode=qv;Fc.base64DecodeUnicode=vt;Fc.base64DecodeUnicode=vt;Fc.toQueryParams=Gn;Fc.toQueryParams=Gn;Fc.normalizePath=gs;Fc.normalizePath=gs;Fc.joinPath=Uk;Fc.joinPath=Uk;Fc.newUUID=fh;Fc.newUUID=fh;Fc.createDataURI=rv;Fc.createDataURI=rv;Fc.hashCode=ug;Fc.hashCode=ug;Fc.md5=wt;Fc.md5=wt;Fc.reMatches=xt;Fc.reMatches=xt;Fc.stringMatch=sv;Fc.stringMatch=sv;Fc.peekRight=ex;Fc.peekRight=ex;Fc.peekLeft=hq;Fc.peekLeft=hq;Fc.lineIndexComputer=
so;Fc.lineIndexComputer=so;Fc.lineNumberToIndexesComputer=bn;Fc.lineNumberToIndexesComputer=bn;Fc.findLineWithIndexInLineRanges=hs;Fc.findLineWithIndexInLineRanges=hs;Fc.regexIndexOf=$q;Fc.regexIndexOf=$q;Fc.regexLastIndexOf=to;Fc.regexLastIndexOf=to;Fc.lineRanges=om;Fc.lineRanges=om;Fc.diff=fx;Fc.diff=fx;Fc.empty=Yy;Fc.empty=Yy;Fc.includes=vW;Fc.includes=vW;Fc.include=wW;Fc.include=wW;Fc.startsWith=xW;Fc.startsWith=xW;Fc.startsWithVowel=yt;Fc.startsWithVowel=yt;Fc.endsWith=yW;Fc.endsWith=yW;Fc.withDecimalPrecision=
zt;Fc.withDecimalPrecision=zt;Fc.capitalize=is;Fc.capitalize=is;Fc.camelCaseString=iq;Fc.camelCaseString=iq;Fc.camelize=cn;Fc.camelize=cn;Fc.truncate=uo;Fc.truncate=uo;Fc.truncateLeft=Rl;Fc.truncateLeft=Rl;Fc.regExpEscape=js;Fc.regExpEscape=js;Fc.succ=tv;Fc.succ=tv;Fc.digitValue=gx;Fc.digitValue=gx;Fc.times=zW;Fc.times=zW;Fc.longestCommonSubstring=hx;Fc.longestCommonSubstring=hx;Fc.applyChange=Zy;Fc.applyChange=Zy;Fc.applyChanges=ix;Fc.applyChanges=ix;Fc.levenshtein=ar;Fc.levenshtein=ar;var Th=Object.freeze({__proto__:null,
format:zp,formatFromArray:Xo,indent:xm,minIndent:ya,changeIndent:Sa,quote:mb,articlize:Xa,findArticle:dc,print:$b,printNested:oc,pad:zc,printTable:Md,printTree:Rf,toArray:Hf,lines:Vh,paragraphs:zg,nonEmptyLines:li,tokens:Xj,tableize:Fk,unescapeCharacterEntities:Qo,base64EncodeUnicode:qv,base64DecodeUnicode:vt,toQueryParams:Gn,normalizePath:gs,joinPath:Uk,newUUID:fh,createDataURI:rv,hashCode:ug,md5:wt,reMatches:xt,stringMatch:sv,peekRight:ex,peekLeft:hq,lineIndexComputer:so,lineNumberToIndexesComputer:bn,
findLineWithIndexInLineRanges:hs,regexIndexOf:$q,regexLastIndexOf:to,lineRanges:om,diff:fx,empty:Yy,includes:vW,include:wW,startsWith:xW,startsWithVowel:yt,endsWith:yW,withDecimalPrecision:zt,capitalize:is,camelCaseString:iq,camelize:cn,truncate:uo,truncateLeft:Rl,regExpEscape:js,succ:tv,digitValue:gx,times:zW,longestCommonSubstring:hx,applyChange:Zy,applyChanges:ix,levenshtein:ar});Ha("a7",Th);var Cg=lively.FreezerRuntime.recorderFor("lively.lang/number.js");Cg.random=jx;Cg.randomSmallerInteger=
kx;Cg.humanReadableByteSize=lx;Cg.average=mx;Cg.averageInc=At;Cg.median=nx;Cg.between=ox;Cg.clamp=px;Cg.sort=Bt;Cg.parseLength=ym;Cg.precision=qx;Cg.roundTo=Ct;Cg.detent=rx;Cg.toDegrees=$y;Cg.toRadians=az;Cg.backoff=bz;Cg.interpolate=uv;Cg.normalRandom=function(g,c){var k,d=!1;return function(h,n){if(d)return d=!1,k*n+h;do{var b=2*Math.random()-1;var e=2*Math.random()-1;var l=b*b+e*e}while(1<=l||0==l);l=Math.sqrt(-2*Math.log(l)/l);k=e*l;d=!0;return h+n*b*l}}();Cg.convertLength=function(){function g(c,
k){if("cm"===k)return c;if("mm"===k)return.1*c;if("in"===k)return 2.54*c;if("px"===k)return c*g(1/96,"in");if("pt"===k)return c*g(1/72,"in");if("pc"===k)return c*g(12,"pt")}return function n(k,d,h){return d===h?k:"cm"===h?g(k,d):"cm"===d?k/g(1,h):n(n(k,d,"cm"),"cm",h)}}();var AW=Cg.normalRandom,BW=Cg.convertLength;Cg.random=jx;Cg.random=jx;Cg.normalRandom=AW;Cg.normalRandom=AW;Cg.randomSmallerInteger=kx;Cg.randomSmallerInteger=kx;Cg.humanReadableByteSize=lx;Cg.humanReadableByteSize=lx;Cg.average=
mx;Cg.average=mx;Cg.averageInc=At;Cg.averageInc=At;Cg.median=nx;Cg.median=nx;Cg.between=ox;Cg.between=ox;Cg.sort=Bt;Cg.sort=Bt;Cg.parseLength=ym;Cg.parseLength=ym;Cg.convertLength=BW;Cg.convertLength=BW;Cg.roundTo=Ct;Cg.roundTo=Ct;Cg.detent=rx;Cg.detent=rx;Cg.toDegrees=$y;Cg.toDegrees=$y;Cg.toRadians=az;Cg.toRadians=az;Cg.backoff=bz;Cg.backoff=bz;Cg.interpolate=uv;Cg.interpolate=uv;Cg.clamp=px;Cg.clamp=px;Cg.precision=qx;Cg.precision=qx;var Um=Object.freeze({__proto__:null,random:jx,normalRandom:AW,
randomSmallerInteger:kx,humanReadableByteSize:lx,average:mx,averageInc:At,median:nx,between:ox,sort:Bt,parseLength:ym,convertLength:BW,roundTo:Ct,detent:rx,toDegrees:$y,toRadians:az,backoff:bz,interpolate:uv,clamp:px,precision:qx});Ha("aH",Um);var vk=lively.FreezerRuntime.recorderFor("lively.lang/properties.js");vk.all=vv;vk.allOwnPropertiesOrFunctions=Dt;vk.own=sx;vk.forEachOwn=tx;vk.nameFor=cz;vk.values=ux;vk.ownValues=br;vk.any=Et;vk.allProperties=wv;vk.hash=Ft;vk.all=vv;vk.all=vv;vk.allOwnPropertiesOrFunctions=
Dt;vk.allOwnPropertiesOrFunctions=Dt;vk.own=sx;vk.own=sx;vk.forEachOwn=tx;vk.forEachOwn=tx;vk.nameFor=cz;vk.nameFor=cz;vk.values=ux;vk.values=ux;vk.ownValues=br;vk.ownValues=br;vk.any=Et;vk.any=Et;vk.allProperties=wv;vk.allProperties=wv;vk.hash=Ft;vk.hash=Ft;var Kr=Object.freeze({__proto__:null,all:vv,allOwnPropertiesOrFunctions:Dt,own:sx,forEachOwn:tx,nameFor:cz,values:ux,ownValues:br,any:Et,allProperties:wv,hash:Ft});Ha("bj",Kr);var jq=lively.FreezerRuntime.recorderFor("lively.lang/date.js");jq.format=
Gt;jq.equals=dn;jq.relativeTo=kq;jq.dateFormat=function(){var g=function(){var c=/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZ]|"[^"]*"|'[^']*'/g,k=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,d=/[^-+\dA-Z]/g,h=function(n,b){n=String(n);for(b=b||2;n.length<b;)n="0"+n;return n};return function(n,b,e){var l=g;1!=arguments.length||"[object String]"!=Object.prototype.toString.call(n)||/\d/.test(n)||(b=n,n=void 0);
n=n?new Date(n):new Date;if(isNaN(n))throw SyntaxError("invalid date");b=String(l.masks[b]||b||l.masks.default);"UTC:"==b.slice(0,4)&&(b=b.slice(4),e=!0);var a=e?"getUTC":"get",f=n[a+"Date"](),m=n[a+"Day"](),r=n[a+"Month"](),v=n[a+"FullYear"](),x=n[a+"Hours"](),y=n[a+"Minutes"](),E=n[a+"Seconds"]();a=n[a+"Milliseconds"]();var F=e?0:n.getTimezoneOffset(),I={d:f,dd:h(f),ddd:l.i18n.dayNames[m],dddd:l.i18n.dayNames[m+7],m:r+1,mm:h(r+1),mmm:l.i18n.monthNames[r],mmmm:l.i18n.monthNames[r+12],yy:String(v).slice(2),
yyyy:v,h:x%12||12,hh:h(x%12||12),H:x,HH:h(x),M:y,MM:h(y),s:E,ss:h(E),l:h(a,3),L:h(99<a?Math.round(a/10):a),t:12>x?"a":"p",tt:12>x?"am":"pm",T:12>x?"A":"P",TT:12>x?"AM":"PM",Z:e?"UTC":(String(n).match(k)||[""]).pop().replace(d,""),o:(0<F?"-":"+")+h(100*Math.floor(Math.abs(F)/60)+Math.abs(F)%60,4),S:["th","st","nd","rd"][3<f%10?0:(10!=f%100-f%10)*f%10]};return b.replace(c,function(J){return J in I?I[J]:J.slice(1,J.length-1)})}}();g.masks={default:"ddd mmm dd yyyy HH:MM:ss",shortDate:"m/d/yy",mediumDate:"mmm d, yyyy",
longDate:"mmmm d, yyyy",fullDate:"dddd, mmmm d, yyyy",shortTime:"h:MM TT",mediumTime:"h:MM:ss TT",longTime:"h:MM:ss TT Z",isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd'T'HH:MM:ss",isoUtcDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'"};g.i18n={dayNames:"Sun Mon Tue Wed Thu Fri Sat Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),monthNames:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec January February March April May June July August September October November December".split(" ")};
return g}();var CW=jq.dateFormat;jq.format=Gt;jq.format=Gt;jq.equals=dn;jq.equals=dn;jq.relativeTo=kq;jq.relativeTo=kq;jq.dateFormat=CW;jq.dateFormat=CW;var Cw=Object.freeze({__proto__:null,format:Gt,equals:dn,relativeTo:kq,dateFormat:CW});Ha("a5",Cw);var Gg=lively.FreezerRuntime.recorderFor("lively.lang/promise.js");Gg.promise=hg;Gg.delay=ti;Gg.delayReject=Ap;Gg.timeout=lq;Gg.timeToRun=xv;Gg.clearPendingWaitFors=function(){Object.kets(Gg.waitForClosures).forEach(function(g){delete Gg.waitForClosures[g];
clearInterval(g)})};Gg.waitFor=vx;Gg.deferred=yv;Gg.convertCallbackFun=dz;Gg.convertCallbackFunWithManyArgs=zv;Gg._chainResolveNext=wx;Gg.chain=ez;Gg.promise_finally=fz;Gg.parallel=oB;Gg.newUUID=fh;Gg.pushIfNotIncluded=td;Gg.removeAt=Ca;Gg.waitForClosures={};Object.assign(Gg.promise,{delay:Gg.delay,delayReject:Gg.delayReject,timeout:Gg.timeout,waitFor:Gg.waitFor,deferred:Gg.deferred,convertCallbackFun:Gg.convertCallbackFun,convertCallbackFunWithManyArgs:Gg.convertCallbackFunWithManyArgs,chain:Gg.chain,
finally:Gg.promise_finally,parallel:Gg.parallel});Gg.promise=hg;Gg.promise=hg;Gg.delay=ti;Gg.delay=ti;Gg.delayReject=Ap;Gg.delayReject=Ap;Gg.timeout=lq;Gg.timeout=lq;Gg.timeToRun=xv;Gg.timeToRun=xv;Gg.waitFor=vx;Gg.waitFor=vx;Gg.deferred=yv;Gg.deferred=yv;Gg.convertCallbackFun=dz;Gg.convertCallbackFun=dz;Gg.convertCallbackFunWithManyArgs=zv;Gg.convertCallbackFunWithManyArgs=zv;Gg.chain=ez;Gg.chain=ez;Gg.finally=fz;Gg.promise_finally=fz;Gg.parallel=oB;Gg.parallel=oB;Gg.default=hg;var Dw=lively.FreezerRuntime.recorderFor("lively.lang/Path.js");
Dw.Path=Ih;Dw.inspect=Bj;Object.assign(Dw.Path.prototype,{get isPathAccessor(){return!0},fromPath:function(g){"string"===typeof g&&""!==g&&g!==this.splitter?(this._parts=g.split(this.splitter),this._path=g):Array.isArray(g)?(this._parts=[].concat(g),this._path=g.join(this.splitter)):(this._parts=[],this._path="");return this},setSplitter:function(g){g&&(this.splitter=g);return this},map:function(g){this._mapper=g;return this},parts:function(){return this._parts},size:function(){return this._parts.length},
slice:function(g,c){return Dw.Path(this.parts().slice(g,c))},normalizePath:function(){return this._path},isRoot:function(g){return 0===this._parts.length},isIn:function(g){return this.isRoot()?!0:(g=this.get(g,-1))&&g.hasOwnProperty(this._parts[this._parts.length-1])},equals:function(g){return g&&g.isPathAccessor&&this.parts().equals(g.parts())},isParentPathOf:function(g){g=g&&g.isPathAccessor?g:Dw.Path(g);var c=this.parts();g=g.parts();for(var k=0;k<c.length;k++)if(c[k]!=g[k])return!1;return!0},
relativePathTo:function(g){g=Dw.Path(g);return this.isParentPathOf(g)?g.slice(this.size(),g.size()):void 0},del:function(g){if(this.isRoot())return!1;for(var c=0;c<this._parts.length-1;c++){var k=this._parts[c];if(g.hasOwnProperty(k))g=g[k];else return!1}return delete g[this._parts[this._parts.length-1]]},withParentAndKeyDo:function(g,c,k){if(this.isRoot())return k(null,null);for(var d=0;d<this._parts.length-1;d++){var h=this._parts[d];if(!g.hasOwnProperty(h)||"object"!==typeof g[h]&&"function"!==
typeof g[h])if(c)g=g[h]={};else return k(null,h);else g=g[h]}return k(g,this._parts[this._parts.length-1])},set:function(g,c,k){return this.withParentAndKeyDo(g,k,function(d,h){return d?d[h]=c:void 0})},defineProperty:function(g,c,k){return this.withParentAndKeyDo(g,k,function(d,h){return d?Object.defineProperty(d,h,c):void 0})},get:function(g,c){var k=this;return(c?this._parts.slice(0,c):this._parts).reduce(function(d,h){return d?k._mapper?k._mapper(h,d[h]):d[h]:d},g)},concat:function(g,c){return Dw.Path(this.parts().concat(Dw.Path(g,
c).parts()))},toString:function(){return this.normalizePath()},serializeExpr:function(){return"lively.lang.Path("+Dw.inspect(this.parts())+")"},watch:function(g){if(g&&!this.isRoot()){var c=g.target,k=this.get(c,-1),d=this.parts().slice(-1)[0],h="propertyWatcher$"+d,n=k&&k.hasOwnProperty(h),b=g.uninstall,e=g.haltWhenChanged,l=g.showStack,a=k.__lookupGetter__(d),f=k.__lookupSetter__(d);c&&d&&k&&(b?n&&(delete k[d],k[d]=k[h],delete k[h]):n||(a||f?console.log(k+'["'+d+'"] is a getter/setter, watching not support'):
(k[h]=k[d],k.__defineSetter__(d,function(m){var r=k[h];if(g.onSet)g.onSet(m,r);r=k+"."+d+" changed: "+r+" -> "+m;l&&(r+="\n"+("undefined"!==typeof lively?lively.printStack():console.trace()));g.verbose&&console.log(r);if(e)debugger;return k[h]=m}),k.__defineGetter__(d,function(){if(g.onGet)g.onGet(k[h]);return k[h]}),console.log("Watcher for "+k+"."+d+" installed"))))}},debugFunctionWrapper:function(g){var c=g.target,k=this.get(c,-1),d=this.parts().slice(-1)[0],h=void 0===g.haltWhenChanged?!0:g.haltWhenChanged,
n=k&&d&&k[d],b=n&&n.isDebugFunctionWrapper;c&&d&&n&&k&&(g.uninstall?b&&(k[d]=k[d].debugTargetFunction,console.log("Uninstalled debugFunctionWrapper for "+k+"."+d)):b?console.log("debugFunctionWrapper for "+k+"."+d+" already installed"):(g=k[d]=n.wrap(function(e){var l=Array.from(arguments);if(h)debugger;return l.shift().apply(k,l)}),g.isDebugFunctionWrapper=!0,g.debugTargetFunction=n,console.log("debugFunctionWrapper for "+k+"."+d+" installed")))}});Dw.default=Ih;var Lj=lively.FreezerRuntime.recorderFor("lively.lang/graph.js");
Lj.clone=xx;Lj.without=Av;Lj.hull=Ht;Lj.subgraphReachableBy=Bv;Lj.invert=yx;Lj.sortByReference=cr;Lj.reduce=dr;Lj.random=er;Lj.range=Ld;Lj.shuffle=id;Lj.withoutAll=le;Lj.flatten=Zc;Lj.uniq=jc;Lj.values=Uo;Lj.clone=xx;Lj.clone=xx;Lj.without=Av;Lj.without=Av;Lj.hull=Ht;Lj.hull=Ht;Lj.subgraphReachableBy=Bv;Lj.subgraphReachableBy=Bv;Lj.invert=yx;Lj.invert=yx;Lj.sortByReference=cr;Lj.sortByReference=cr;Lj.reduce=dr;Lj.reduce=dr;Lj.random=er;Lj.random=er;var sy=Object.freeze({__proto__:null,clone:xx,without:Av,
hull:Ht,subgraphReachableBy:Bv,invert:yx,sortByReference:cr,reduce:dr,random:er}),ui=lively.FreezerRuntime.recorderFor("lively.lang/interval.js");ui.isInterval=gz;ui.sort=zx;ui.compare=Cv;ui.coalesce=mq;ui.coalesceOverlapping=Ax;ui.mergeOverlapping=Bx;ui.intervalsInRangeDo=nq;ui.intervalsInbetween=Dv;ui.mapToMatchingIndexes=hz;ui.benchmark=function(){function g(c,k,d){return c.name+" "+ui.timeToRunN(function(){return c.apply(null,k,1E5)},d)+"ms"}return["Friday, 20. July 2012:\ncoalesceOverlapping: 0.0003ms\nintervalsInbetween: 0.002ms\nmapToMatchingIndexes: 0.02ms",
"vs.\n"+new Date+":",g(ui.coalesceOverlapping,[[[9,10],[1,8],[3,7],[15,20],[14,21]]],1E5),g(ui.intervalsInbetween,[0,10,[[8,10],[0,2],[3,5]]],1E5),g(ui.mapToMatchingIndexes,[ui.range(0,1E3).map(function(c){return[c,c+1]}),[[4,8],[500,504],[900,1004]]],1E3)].join("\n")};ui.range=Ld;ui.timeToRunN=ed;ui.GLOBAL="undefined"!==typeof System?System.global:"undefined"!==typeof window?window:global;ui.isInterval=gz;ui.isInterval=gz;ui.sort=zx;ui.sort=zx;ui.compare=Cv;ui.compare=Cv;ui.coalesce=mq;ui.coalesce=
mq;ui.coalesceOverlapping=Ax;ui.coalesceOverlapping=Ax;ui.mergeOverlapping=Bx;ui.mergeOverlapping=Bx;ui.intervalsInRangeDo=nq;ui.intervalsInRangeDo=nq;ui.intervalsInbetween=Dv;ui.intervalsInbetween=Dv;ui.mapToMatchingIndexes=hz;ui.mapToMatchingIndexes=hz;var ZN=Object.freeze({__proto__:null,isInterval:gz,sort:zx,compare:Cv,coalesce:mq,coalesceOverlapping:Ax,mergeOverlapping:Bx,intervalsInRangeDo:nq,intervalsInbetween:Dv,mapToMatchingIndexes:hz}),Yo=lively.FreezerRuntime.recorderFor("lively.lang/array-projection.js");
Yo.create=Cx;Yo.toArray=Dx;Yo.originalToProjectedIndex=It;Yo.projectedToOriginalIndex=ks;Yo.transformToIncludeIndex=ls;Yo.create=Cx;Yo.create=Cx;Yo.toArray=Dx;Yo.toArray=Dx;Yo.originalToProjectedIndex=It;Yo.originalToProjectedIndex=It;Yo.projectedToOriginalIndex=ks;Yo.projectedToOriginalIndex=ks;Yo.transformToIncludeIndex=ls;Yo.transformToIncludeIndex=ls;var $N=Object.freeze({__proto__:null,create:Cx,toArray:Dx,originalToProjectedIndex:It,projectedToOriginalIndex:ks,transformToIncludeIndex:ls}),Nh=
lively.FreezerRuntime.recorderFor("lively.lang/grid.js");Nh.get=fr;Nh.set=Ev;Nh.getRow=ms;Nh.setRow=Ex;Nh.getCol=gr;Nh.setCol=iz;Nh.create=Fv;Nh.mapCreate=jz;Nh.forEach=zm;Nh.map=Gv;Nh.toObjects=ns;Nh.tableFromObjects=os;Nh.benchmark=function(){var g=[],c=Nh.create(1E3,200,1);var k=Nh.timeToRunN(function(){Nh.forEach(c,function(h){})},10);g.push("forEach: "+k.toFixed(2)+"ms");k=Nh.timeToRunN(function(){Nh.map(c,function(h,n,b){return n+b+Math.round(100*Math.random())})},10);g.push("map: "+k.toFixed(2)+
"ms");var d=Nh.create(1E3,2E3);k=Nh.timeToRunN(function(){d=Array(1E3);for(var h=0;1E3>h;h++)d[h]=Array(2E3);Nh.forEach(c,function(n,b,e){d[b][e]=b+e+Math.round(100*Math.random())})},10);g.push("map with forEach: "+k+"ms");g.push("--= 2012-09-22 =--\nforEach: 14.9ms\nmap: 19.8ms\nmap with forEach: 38.7ms\n");return g.join("\n")};Nh.arrayWithN=Tc;Nh.timeToRunN=ed;Nh.get=fr;Nh.get=fr;Nh.set=Ev;Nh.set=Ev;Nh.getRow=ms;Nh.getRow=ms;Nh.setRow=Ex;Nh.setRow=Ex;Nh.getCol=gr;Nh.getCol=gr;Nh.setCol=iz;Nh.setCol=
iz;Nh.create=Fv;Nh.create=Fv;Nh.mapCreate=jz;Nh.mapCreate=jz;Nh.forEach=zm;Nh.forEach=zm;Nh.map=Gv;Nh.map=Gv;Nh.toObjects=ns;Nh.toObjects=ns;Nh.tableFromObjects=os;Nh.tableFromObjects=os;var tF=Object.freeze({__proto__:null,get:fr,set:Ev,getRow:ms,setRow:Ex,getCol:gr,setCol:iz,create:Fv,mapCreate:jz,forEach:zm,map:Gv,toObjects:ns,tableFromObjects:os}),nl=lively.FreezerRuntime.recorderFor("lively.lang/tree.js");nl.prewalk=ps;nl.postwalk=ml;nl.find=qs;nl.filter=Zo;nl.map=Jt;nl.mapTree=hr;nl.flatten=
Zc;nl.detect=nl.find;var DW=nl.detect;nl.prewalk=ps;nl.prewalk=ps;nl.postwalk=ml;nl.postwalk=ml;nl.find=qs;nl.find=qs;nl.detect=DW;nl.detect=DW;nl.filter=Zo;nl.filter=Zo;nl.map=Jt;nl.map=Jt;nl.mapTree=hr;nl.mapTree=hr;var ty=Object.freeze({__proto__:null,prewalk:ps,postwalk:ml,find:qs,detect:DW,filter:Zo,map:Jt,mapTree:hr});Ha("a4",ty);var Ew=lively.FreezerRuntime.recorderFor("lively.lang/events.js");Ew.isNode="undefined"!==typeof Ew.process&&Ew.process.versions&&Ew.process.versions.node;Ew.makeEmitter=
Ew.isNode?function(g,c){if(g.on&&g.removeListener)return g;var k="undefined"!==typeof System?System._nodeRequire("events"):Ew.require("events");Object.assign(g,k.EventEmitter.prototype);k.EventEmitter.call(g);c&&c.maxListenerLimit&&g.setMaxListeners(c.maxListenerLimit);return g}:function(g){if(g.on&&g.removeListener)return g;g.listeners={};g.on=function(c,k){k&&(g.listeners[c]||(g.listeners[c]=[]),g.listeners[c].push(k))};g.once=function(c,k){function d(){g.removeListener(c,d);k.apply(this,arguments)}
if(k)g.on(c,d)};g.removeListener=function(c,k){g.listeners[c]&&(g.listeners[c]=g.listeners[c].filter(function(d){return d!==k}))};g.removeAllListeners=function(c){g.listeners[c]&&(g.listeners[c]=[])};g.emit=function(){var c=Array.prototype.slice.call(arguments),k=c.shift();(k=g.listeners[k])&&k.length&&k.forEach(function(d){try{d.apply(null,c)}catch(h){console.error("Error in event handler: %s",h.stack||String(h))}})};return g};var rI=Ew.makeEmitter;Ew.makeEmitter=rI;Ew.makeEmitter=rI;var nA=Object.freeze({__proto__:null,
makeEmitter:rI}),Sl=lively.FreezerRuntime.recorderFor("lively.lang/messenger.js");Sl.create=Hv;Sl.remove=Nb;Sl.pluck=Va;Sl.makeEmitter=rI;Sl.newUUID=fh;Sl.OFFLINE="offline";Sl.ONLINE="online";Sl.CONNECTING="connecting";Sl.create=Hv;Sl.create=Hv;var aO=Object.freeze({__proto__:null,create:Hv}),Oh=lively.FreezerRuntime.recorderFor("lively.lang/worker.js");Oh.fork=Iv;Oh.create=Fx;Oh.makeEmitter=rI;Oh.newUUID=fh;Oh.waitFor=Qf;Oh.messengerCreate=Hv;Oh.Closure=ek;Oh.isNodejs="undefined"!==typeof require&&
"undefined"!==typeof process;Oh.WorkerSetup={loadDependenciesBrowser:function(g){importScripts.apply("undefined"!==typeof self?self:this,g.scriptsToLoad||[])},loadDependenciesNodejs:function(g){(global.lively||(global.lively={})).lang=require(require("path").join(g.libLocation,"index"))},initBrowserGlobals:function(g){remoteWorker.send=function(c){postMessage(c)};g="undefined"!==typeof self?self:this;g=g.Global=g;g.window=g;g.console=g.console||function(){var c={};["log","error","warn"].forEach(function(k){c[k]=
function(){for(var d=arguments[0],h=1;h<arguments.length;h++)d=d.replace("%s",arguments[h]);remoteWorker.send({type:k,message:["[",k.toUpperCase(),"] ",d].join("")})}});return c}()},initOnMessageHandler:function(g){function c(k){k=k.data.data?k.data:k;if(remoteWorker.messenger)remoteWorker.messenger.onMessage(k);else"close"==k.action&&(remoteWorker.send({type:"closed",workerReady:!1}),remoteWorker.close())}if(remoteWorker.on)remoteWorker.on("message",c);else remoteWorker.onmessage=c},initWorkerInterface:function(g){remoteWorker.callStringifiedFunction=
function(c,k,d){try{var h=eval("("+c+")")}catch(e){d(Error("Cannot create function from string: "+e.stack||e));return}c=h.length===k.length+1;var n=lively.lang.fun.once(function(e,l){remoteWorker.isBusy=!1;d(e,l)});remoteWorker.isBusy=!0;c&&k.push(n);try{var b=h.apply(remoteWorker,k.concat([n]))}catch(e){n(e,null);return}c||n(null,b)};remoteWorker.httpRequest=function(c){if(c.url){var k=new XMLHttpRequest,d=c.method||"GET";k.onreadystatechange=function(){4===k.readyState&&c.done&&c.done(k)};k.open(d,
c.url);k.send()}else console.log("Error, httpRequest needs url")};remoteWorker.terminateIfNotBusyIn=function(c){setTimeout(function(){remoteWorker.isBusy?remoteWorker.terminateIfNotBusyIn(c):(remoteWorker.send({type:"closed",workerReady:!1}),remoteWorker.close())},c)}},initWorkerMessenger:function(g){if(!g.useMessenger)return null;if(!lively.lang.messenger)throw Error("worker.create requires messenger.js to be loaded!");if(!lively.lang.events)throw Error("worker.create requires events.js to be loaded!");
return remoteWorker.messenger=lively.lang.messenger.create({services:{remoteEval:function(c,k){try{var d=eval(c.data.expr)}catch(h){d=h.stack||h}k.answer(c,{result:String(d)})},run:function(c,k){var d=c.data.func,h=c.data.args;d?remoteWorker.callStringifiedFunction(d,h,function(n,b){k.answer(c,{error:n?String(n):null,result:b})}):k.answer(c,{error:"no funcString"})},close:function(c,k){k.answer(c,{status:"OK"});remoteWorker.send({type:"closed",workerReady:!1});remoteWorker.close()}},isOnline:function(){return!0},
send:function(c,k){remoteWorker.send(c);k()},listen:function(c){c()},close:function(c){remoteWorker.send({type:"closed",workerReady:!1});remoteWorker.close()}})}};Oh.BrowserWorker={create:function(g){g=g||{};if(!g.libLocation&&!g.scriptsToLoad){var c=document.querySelector('script[src$="worker.js"]');if(!c)throw Error('Cannot find library path to start worker. Use worker.create({libLocation: "..."}) to explicitly define the path!');g.libLocation=c.src.replace(/worker.js$/,"")}c=String(function(){self.onmessage=
function(k){if("setup"!==k.data.action)throw Error("expected setup to be first message but got "+JSON.stringify(k.data));k=k.data.options||{};initBrowserGlobals(k);loadDependenciesBrowser(k);initOnMessageHandler(k);initWorkerInterface(k);initWorkerMessenger(k);postMessage({workerReady:!0})};__FUNCTIONDECLARATIONS__}).split("__lvVarRecorder.").join("").replace("__FUNCTIONDECLARATIONS__",[Oh.WorkerSetup.initBrowserGlobals,Oh.WorkerSetup.loadDependenciesBrowser,Oh.WorkerSetup.initOnMessageHandler,Oh.WorkerSetup.initWorkerInterface,
Oh.WorkerSetup.initWorkerMessenger].join("\n"));c="("+Oh.Closure.fromSource(c).getFuncSource()+")();";c=new Worker(function(k){try{var d=new Blob([k],{type:"text/javascript"})}catch(h){window.BlobBuilder=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder,d=new BlobBuilder,d.append(k),d=d.getBlob()}return("undefined"!==typeof webkitURL?webkitURL:URL).createObjectURL(d)}(c));(function(k,d){Oh.makeEmitter(d);k.scriptsToLoad||(k.scriptsToLoad="base.js events.js object.js collection.js function.js string.js number.js date.js messenger.js worker.js".split(" ").map(function(n){return k.libLocation+
n}));var h=Object.keys(k).reduce(function(n,b){"function"!==typeof k[b]&&(n[b]=k[b]);return n},{});d.onmessage=function(n){void 0!==n.data.workerReady?(d.ready=!!n.data.workerReady,d.ready?d.emit("ready"):d.emit("close")):d.emit("message",n.data)};d.errors=[];d.onerror=function(n){console.error(n);d.errors.push(n);d.emit("error",n)};d.postMessage({action:"setup",options:h})})(g,c);return c}};Oh.NodejsWorker={debug:!1,initCodeFileCreated:!1,create:function(g){g=g||{};var c,k=Oh.makeEmitter({ready:!1,
errors:[],postMessage:function(d){c?k.ready?c.send(d):k.emit("error",Error("nodejs worker process not ready or already closed")):k.emit("error",Error("nodejs worker process not yet created"))}});Oh.NodejsWorker.startWorker(g,function(d,h){d?(k.ready=!1,k.emit("error",d)):(c=h,c.on("message",function(n){Oh.NodejsWorker.debug&&console.log("[WORKER PARENT] got message:",n);k.emit("message",n)}),c.on("close",function(){console.log("[WORKER PARENT] worker closed");k.emit("close")}),c.on("error",function(n){console.log("[WORKER PARENT] error ",
n);k.errors.push(n);k.emit("error",n)}),k.ready=!0,k.emit("ready"))});return k},workerSetupFunction:function(){var g=process;console.log("[WORKER] Starting init");g.on("message",function(c){if("setup"!==c.action)throw Error("expected setup to be first message but got "+JSON.stringify(c.data));g.removeAllListeners("message");c=c.data.options||{};console.log("[WORKER] running setup with options",c);loadDependenciesNodejs(c);initOnMessageHandler(c);initWorkerInterface(c);initWorkerMessenger(c);g.send({workerReady:!0})});
__FUNCTIONDECLARATIONS__},ensureInitCodeFile:function(g,c,k){var d=require("path"),h=require("os"),n=require("fs");h=d.join(h.tmpDir(),"lively-nodejs-workers/");var b=d.join(h,"nodejs-worker-init.js");Oh.NodejsWorker.initCodeFileCreated?n.exists(b,function(e){e?k(null,b):Oh.NodejsWorker.createWorkerCodeFile(g,b,c,k)}):Oh.NodejsWorker.createWorkerCodeFile(g,b,c,k)},createWorkerCodeFile:function(g,c,k,d){g=require("path");var h=require("fs"),n=require("child_process").exec;n("mkdir -p "+g.dirname(c),
function(b,e,l){b?d(Error(["[WORKER PARENT] Could not create worker temp dir:",e,l].join("\n"))):h.writeFile(c,k,function(a){Oh.NodejsWorker.debug&&console.log("worker code file %s created",c);Oh.NodejsWorker.initCodeFileCreated=!0;d(a,c)})})},startWorker:function(g,c){var k=require("util"),d=require("child_process").fork,h=String(Oh.NodejsWorker.workerSetupFunction).replace("__FUNCTIONDECLARATIONS__",[Oh.WorkerSetup.loadDependenciesNodejs,Oh.WorkerSetup.initOnMessageHandler,Oh.WorkerSetup.initWorkerInterface,
Oh.WorkerSetup.initWorkerMessenger].join("\n"));k=k.format("(%s)();\n",h);Oh.NodejsWorker.ensureInitCodeFile(g,k,function(n,b){if(n)return c(n);var e=d(b,{});Oh.NodejsWorker.debug&&console.log("worker forked");e.on("message",function(l){"pong"===l.action?console.log("[WORKER pong] ",l):"log"===l.action&&console.log("[Message from WORKER] ",l.data)});e.once("message",function(l){Oh.NodejsWorker.debug&&console.log("worker setup done");c(null,e,l)});e.on("close",function(){Oh.NodejsWorker.debug&&console.log("[WORKER PARENT] worker closed")});
e.send({action:"setup",data:{options:g}});global.WORKER=e})}};Oh.fork=Iv;Oh.fork=Iv;Oh.create=Fx;Oh.create=Fx;var bO=Object.freeze({__proto__:null,fork:Iv,create:Fx}),Fd=lively.FreezerRuntime.recorderFor("lively.lang/index.js");Fd.createLivelyLangObject=function(){return{chain:Fd.chain,noConflict:Fd.noConflict,installGlobals:Fd.installGlobals,uninstallGlobals:Fd.uninstallGlobals,globalInterfaceSpec:Fd.globalInterfaceSpec,toString:function(){return"[object lively.lang]"}}};Fd.globalInstall=Xh;Fd.chain=
Bp;Fd.createChain=function(g,c){return Object.keys(g).reduce(function(k,d){k[d]=function(){var h=Array.prototype.slice.call(arguments);h=g[d].apply(null,[c].concat(h));return Fd.chain(h)};return k},{value:function(){return c}})};Fd.noConflict=Vk;Fd.installGlobals=oq;Fd.installProperty=function(g,c){if(!g.isIn(Fd.livelyLang))throw c=Error("property not provided by lively.lang: "+g),console.error(c.stack||c),c;g=g.get(Fd.livelyLang);if("function"===typeof g&&"prototype"===c.slice(-2,-1).toString()){var k=
g;g=function(){var d=Array.prototype.slice.call(arguments);d.unshift(this);return k.apply(null,d)};g.toString=function(){return k.toString()}}c.set(Fd.GLOBAL,g,!0)};Fd.uninstallGlobals=kz;Fd.string=Th;Fd.num=Um;Fd.fun=vn;Fd.Closure=ek;Fd.arr=Mf;Fd.obj=ng;Fd.properties=Kr;Fd.date=Cw;Fd.promise=hg;Fd.Path=Ih;Fd.graph=sy;Fd.interval=ZN;Fd.arrayProjection=$N;Fd.Group=Ho;Fd.grid=tF;Fd.tree=ty;Fd.events=nA;Fd.messenger=aO;Fd.worker=bO;Fd.worker=bO;Fd.worker=bO;Fd.messenger=aO;Fd.messenger=aO;Fd.events=
nA;Fd.events=nA;Fd.tree=ty;Fd.tree=ty;Fd.grid=tF;Fd.grid=tF;Fd.arrayProjection=$N;Fd.arrayProjection=$N;Fd.interval=ZN;Fd.interval=ZN;Fd.graph=sy;Fd.graph=sy;Fd.date=Cw;Fd.date=Cw;Fd.properties=Kr;Fd.properties=Kr;Fd.obj=ng;Fd.obj=ng;Fd.arr=Mf;Fd.arr=Mf;Fd.fun=vn;Fd.fun=vn;Fd.num=Um;Fd.num=Um;Fd.string=Th;Fd.string=Th;Fd.Closure=ek;Fd.Closure=ek;Fd.promise=hg;Fd.promise=hg;Fd.Path=Ih;Fd.Path=Ih;Fd.Group=Ho;Fd.Group=Ho;Fd.GLOBAL="undefined"!==typeof window?window:"undefined"!==typeof global?global:
"undefined"!==typeof self?self:void 0;Fd.isNode="undefined"!==typeof Fd.process&&Fd.process.env&&"function"===typeof Fd.process.exit;Fd.globalInterfaceSpec=[{action:"installMethods",target:"Array",sources:["arr"],methods:["from","genN","range","withN"]},{action:"installMethods",target:"Array.prototype",sources:["arr"],methods:"all any batchify clear clone collect compact delimWith detect doAndContinue each equals filterByKey findAll first flatten forEachShowingProgress grep groupBy groupByKey histogram include inject intersect invoke last mapAsync mapAsyncSeries mask max min mutableCompact nestedDelay partition pluck pushAll pushAllAt pushAt pushIfNotIncluded reMatches reject rejectByKey remove removeAt replaceAt rotate shuffle size sortBy sortByKey sum swap toArray toTuples union uniq uniqBy without withoutAll zip".split(" "),
alias:[["select","filter"]]},{action:"installMethods",target:"Date",sources:["date"],methods:[]},{action:"installMethods",target:"Date.prototype",sources:["date"],methods:["equals","format","relativeTo"]},{action:"installMethods",target:"Function",sources:["fun"],methods:["fromString"]},{action:"installMethods",target:"Function.prototype",sources:["fun"],methods:"addToObject argumentNames asScript asScriptOf binds curry delay functionNames localFunctionNames getOriginal getVarMapping logCalls logCompletion logErrors qualifiedMethodName setProperty traceCalls wrap".split(" ")},
{action:"installMethods",target:"Number",sources:["num"],methods:[]},{action:"installMethods",target:"Number.prototype",sources:["num"],methods:["detent","randomSmallerInteger","roundTo","toDegrees","toRadians"]},{action:"installMethods",target:"Object",sources:["obj"],methods:"addScript clone deepCopy extend inherit isArray isBoolean isElement isEmpty isFunction isNumber isObject isRegExp isString isUndefined merge mergePropertyInHierarchy values valuesInPropertyHierarchy".split(" ")},{action:"installMethods",
target:"Object.prototype",sources:["obj"],methods:[]},{action:"installMethods",target:"String.prototype",sources:["string"],methods:"camelize capitalize digitValue empty hashCode include pad regExpEscape startsWithVowel succ times toArray toQueryParams truncate".split(" ")},{action:"installObject",target:"Numbers",source:"num",methods:"average between convertLength humanReadableByteSize median normalRandom parseLength random sort".split(" ")},{action:"installObject",target:"Properties",source:"properties",
methods:"all allOwnPropertiesOrFunctions allProperties any forEachOwn hash nameFor own ownValues values".split(" ")},{action:"installObject",target:"Strings",source:"string",methods:"camelCaseString createDataURI diff format formatFromArray indent lineIndexComputer lines md5 newUUID nonEmptyLines pad paragraphs peekLeft peekRight print printNested printTable printTree quote reMatches stringMatch tableize tokens unescapeCharacterEntities withDecimalPrecision".split(" ")},{action:"installObject",target:"Objects",
source:"obj",methods:"asObject equals inspect isMutableType safeToString shortPrintStringOf typeStringOf".split(" ")},{action:"installObject",target:"Functions",source:"fun",methods:"all compose composeAsync createQueue debounce debounceNamed either extractBody flip notYetImplemented once own throttle throttleNamed timeToRun timeToRunN waitFor workerWithCallbackQueue wrapperChain".split(" ")},{action:"installObject",target:"Grid",source:"grid"},{action:"installObject",target:"Interval",source:"interval"},
{action:"installObject",target:"lively.ArrayProjection",source:"arrayProjection"},{action:"installObject",target:"lively.Closure",source:"Closure"},{action:"installObject",target:"lively.Grouping",source:"Group"},{action:"installObject",target:"lively.PropertyPath",source:"Path"},{action:"installObject",target:"lively.Worker",source:"worker"},{action:"installObject",target:"lively.Class",source:"classHelper"}];var cO=Fd.createLivelyLangObject();Fd.livelyLang=cO;Fd.livelyLang=cO;Fd.livelyLang=cO;Fd.globalInstall=
Xh;Fd.globalInstall=Xh;Fd.chain=Bp;Fd.chain=Bp;Fd.noConflict=Vk;Fd.noConflict=Vk;Fd.installGlobals=oq;Fd.installGlobals=oq;Fd.uninstallGlobals=kz;Fd.uninstallGlobals=kz;var m9=Object.freeze({__proto__:null,worker:bO,messenger:aO,events:nA,tree:ty,grid:tF,arrayProjection:$N,interval:ZN,graph:sy,date:Cw,properties:Kr,obj:ng,arr:Mf,fun:vn,num:Um,string:Th,Closure:ek,promise:hg,Path:Ih,Group:Ho,livelyLang:cO,globalInstall:Xh,chain:Bp,noConflict:Vk,installGlobals:oq,uninstallGlobals:kz}),n9=lively.FreezerRuntime.recorderFor("lively.ast/generated/estree-visitor.js"),
xe=function(){};xe.prototype.accept=function(g,c,k){if(!g)throw Error("Undefined AST node in Visitor.accept:\n  "+k.join(".")+"\n  "+g);if(!g.type)throw Error("Strangee AST node without type in Visitor.accept:\n  "+k.join(".")+"\n  "+JSON.stringify(g));switch(g.type){case "Node":return this.visitNode(g,c,k);case "SourceLocation":return this.visitSourceLocation(g,c,k);case "Position":return this.visitPosition(g,c,k);case "Program":return this.visitProgram(g,c,k);case "Function":return this.visitFunction(g,
c,k);case "Statement":return this.visitStatement(g,c,k);case "Directive":return this.visitDirective(g,c,k);case "SwitchCase":return this.visitSwitchCase(g,c,k);case "CatchClause":return this.visitCatchClause(g,c,k);case "VariableDeclarator":return this.visitVariableDeclarator(g,c,k);case "Expression":return this.visitExpression(g,c,k);case "Property":return this.visitProperty(g,c,k);case "Pattern":return this.visitPattern(g,c,k);case "Super":return this.visitSuper(g,c,k);case "SpreadElement":return this.visitSpreadElement(g,
c,k);case "TemplateElement":return this.visitTemplateElement(g,c,k);case "Class":return this.visitClass(g,c,k);case "ClassBody":return this.visitClassBody(g,c,k);case "MethodDefinition":return this.visitMethodDefinition(g,c,k);case "ModuleDeclaration":return this.visitModuleDeclaration(g,c,k);case "ModuleSpecifier":return this.visitModuleSpecifier(g,c,k);case "JSXEmptyExpression":return this.visitJSXEmptyExpression(g,c,k);case "JSXExpressionContainer":return this.visitJSXExpressionContainer(g,c,k);
case "JSXSpreadChild":return this.visitJSXSpreadChild(g,c,k);case "JSXBoundaryElement":return this.visitJSXBoundaryElement(g,c,k);case "JSXAttribute":return this.visitJSXAttribute(g,c,k);case "JSXText":return this.visitJSXText(g,c,k);case "JSXOpeningFragment":return this.visitJSXOpeningFragment(g,c,k);case "JSXClosingFragment":return this.visitJSXClosingFragment(g,c,k);case "Identifier":return this.visitIdentifier(g,c,k);case "Literal":return this.visitLiteral(g,c,k);case "ExpressionStatement":return this.visitExpressionStatement(g,
c,k);case "BlockStatement":return this.visitBlockStatement(g,c,k);case "EmptyStatement":return this.visitEmptyStatement(g,c,k);case "DebuggerStatement":return this.visitDebuggerStatement(g,c,k);case "WithStatement":return this.visitWithStatement(g,c,k);case "ReturnStatement":return this.visitReturnStatement(g,c,k);case "LabeledStatement":return this.visitLabeledStatement(g,c,k);case "BreakStatement":return this.visitBreakStatement(g,c,k);case "ContinueStatement":return this.visitContinueStatement(g,
c,k);case "IfStatement":return this.visitIfStatement(g,c,k);case "SwitchStatement":return this.visitSwitchStatement(g,c,k);case "ThrowStatement":return this.visitThrowStatement(g,c,k);case "TryStatement":return this.visitTryStatement(g,c,k);case "WhileStatement":return this.visitWhileStatement(g,c,k);case "DoWhileStatement":return this.visitDoWhileStatement(g,c,k);case "ForStatement":return this.visitForStatement(g,c,k);case "ForInStatement":return this.visitForInStatement(g,c,k);case "Declaration":return this.visitDeclaration(g,
c,k);case "ThisExpression":return this.visitThisExpression(g,c,k);case "ArrayExpression":return this.visitArrayExpression(g,c,k);case "ObjectExpression":return this.visitObjectExpression(g,c,k);case "FunctionExpression":return this.visitFunctionExpression(g,c,k);case "UnaryExpression":return this.visitUnaryExpression(g,c,k);case "UpdateExpression":return this.visitUpdateExpression(g,c,k);case "BinaryExpression":return this.visitBinaryExpression(g,c,k);case "AssignmentExpression":return this.visitAssignmentExpression(g,
c,k);case "LogicalExpression":return this.visitLogicalExpression(g,c,k);case "MemberExpression":return this.visitMemberExpression(g,c,k);case "ConditionalExpression":return this.visitConditionalExpression(g,c,k);case "CallExpression":return this.visitCallExpression(g,c,k);case "NewExpression":return this.visitNewExpression(g,c,k);case "SequenceExpression":return this.visitSequenceExpression(g,c,k);case "ArrowFunctionExpression":return this.visitArrowFunctionExpression(g,c,k);case "YieldExpression":return this.visitYieldExpression(g,
c,k);case "TemplateLiteral":return this.visitTemplateLiteral(g,c,k);case "TaggedTemplateExpression":return this.visitTaggedTemplateExpression(g,c,k);case "AssignmentProperty":return this.visitAssignmentProperty(g,c,k);case "ObjectPattern":return this.visitObjectPattern(g,c,k);case "ArrayPattern":return this.visitArrayPattern(g,c,k);case "RestElement":return this.visitRestElement(g,c,k);case "AssignmentPattern":return this.visitAssignmentPattern(g,c,k);case "ClassExpression":return this.visitClassExpression(g,
c,k);case "MetaProperty":return this.visitMetaProperty(g,c,k);case "ImportDeclaration":return this.visitImportDeclaration(g,c,k);case "ImportSpecifier":return this.visitImportSpecifier(g,c,k);case "ImportDefaultSpecifier":return this.visitImportDefaultSpecifier(g,c,k);case "ImportNamespaceSpecifier":return this.visitImportNamespaceSpecifier(g,c,k);case "ExportNamedDeclaration":return this.visitExportNamedDeclaration(g,c,k);case "ExportSpecifier":return this.visitExportSpecifier(g,c,k);case "AnonymousDefaultExportedFunctionDeclaration":return this.visitAnonymousDefaultExportedFunctionDeclaration(g,
c,k);case "AnonymousDefaultExportedClassDeclaration":return this.visitAnonymousDefaultExportedClassDeclaration(g,c,k);case "ExportDefaultDeclaration":return this.visitExportDefaultDeclaration(g,c,k);case "ExportAllDeclaration":return this.visitExportAllDeclaration(g,c,k);case "AwaitExpression":return this.visitAwaitExpression(g,c,k);case "JSXMemberExpression":return this.visitJSXMemberExpression(g,c,k);case "JSXNamespacedName":return this.visitJSXNamespacedName(g,c,k);case "JSXOpeningElement":return this.visitJSXOpeningElement(g,
c,k);case "JSXClosingElement":return this.visitJSXClosingElement(g,c,k);case "JSXSpreadAttribute":return this.visitJSXSpreadAttribute(g,c,k);case "JSXElement":return this.visitJSXElement(g,c,k);case "JSXFragment":return this.visitJSXFragment(g,c,k);case "ImportExpression":return this.visitImportExpression(g,c,k);case "RegExpLiteral":return this.visitRegExpLiteral(g,c,k);case "FunctionBody":return this.visitFunctionBody(g,c,k);case "FunctionDeclaration":return this.visitFunctionDeclaration(g,c,k);
case "VariableDeclaration":return this.visitVariableDeclaration(g,c,k);case "ForOfStatement":return this.visitForOfStatement(g,c,k);case "ClassDeclaration":return this.visitClassDeclaration(g,c,k);case "JSXIdentifier":return this.visitJSXIdentifier(g,c,k);case "BigIntLiteral":return this.visitBigIntLiteral(g,c,k)}throw Error("No visit function in AST visitor Visitor for:\n  "+k.join(".")+"\n  "+JSON.stringify(g));};xe.prototype.visitNode=function(g,c,k){return g};xe.prototype.visitSourceLocation=
function(g,c,k){g.start=this.accept(g.start,c,k.concat(["start"]));g.end=this.accept(g.end,c,k.concat(["end"]));return g};xe.prototype.visitPosition=function(g,c,k){return g};xe.prototype.visitProgram=function(g,c,k){for(var d=[],h=0;h<g.body.length;h++){var n=g.body[h];n=n?this.accept(n,c,k.concat(["body",h])):n;Array.isArray(n)?d.push.apply(d,n):d.push(n)}g.body=d;return g};xe.prototype.visitFunction=function(g,c,k){g.id&&(g.id=this.accept(g.id,c,k.concat(["id"])));for(var d=[],h=0;h<g.params.length;h++){var n=
g.params[h];n=n?this.accept(n,c,k.concat(["params",h])):n;Array.isArray(n)?d.push.apply(d,n):d.push(n)}g.params=d;g.body=this.accept(g.body,c,k.concat(["body"]));return g};xe.prototype.visitStatement=function(g,c,k){return g};xe.prototype.visitDirective=function(g,c,k){g.expression=this.accept(g.expression,c,k.concat(["expression"]));return g};xe.prototype.visitSwitchCase=function(g,c,k){g.test&&(g.test=this.accept(g.test,c,k.concat(["test"])));for(var d=[],h=0;h<g.consequent.length;h++){var n=g.consequent[h];
n=n?this.accept(n,c,k.concat(["consequent",h])):n;Array.isArray(n)?d.push.apply(d,n):d.push(n)}g.consequent=d;return g};xe.prototype.visitCatchClause=function(g,c,k){g.param&&(g.param=this.accept(g.param,c,k.concat(["param"])));g.body=this.accept(g.body,c,k.concat(["body"]));return g};xe.prototype.visitVariableDeclarator=function(g,c,k){g.id=this.accept(g.id,c,k.concat(["id"]));g.init&&(g.init=this.accept(g.init,c,k.concat(["init"])));return g};xe.prototype.visitExpression=function(g,c,k){return g};
xe.prototype.visitProperty=function(g,c,k){g.key=this.accept(g.key,c,k.concat(["key"]));g.value=this.accept(g.value,c,k.concat(["value"]));return g};xe.prototype.visitPattern=function(g,c,k){return g};xe.prototype.visitSuper=function(g,c,k){return g};xe.prototype.visitSpreadElement=function(g,c,k){g.argument=this.accept(g.argument,c,k.concat(["argument"]));return g};xe.prototype.visitTemplateElement=function(g,c,k){return g};xe.prototype.visitClass=function(g,c,k){g.id&&(g.id=this.accept(g.id,c,k.concat(["id"])));
g.superClass&&(g.superClass=this.accept(g.superClass,c,k.concat(["superClass"])));g.body=this.accept(g.body,c,k.concat(["body"]));return g};xe.prototype.visitClassBody=function(g,c,k){for(var d=[],h=0;h<g.body.length;h++){var n=g.body[h];n=n?this.accept(n,c,k.concat(["body",h])):n;Array.isArray(n)?d.push.apply(d,n):d.push(n)}g.body=d;return g};xe.prototype.visitMethodDefinition=function(g,c,k){g.key=this.accept(g.key,c,k.concat(["key"]));g.value=this.accept(g.value,c,k.concat(["value"]));return g};
xe.prototype.visitModuleDeclaration=function(g,c,k){return g};xe.prototype.visitModuleSpecifier=function(g,c,k){g.local=this.accept(g.local,c,k.concat(["local"]));return g};xe.prototype.visitJSXEmptyExpression=function(g,c,k){return g};xe.prototype.visitJSXExpressionContainer=function(g,c,k){g.expression=this.accept(g.expression,c,k.concat(["expression"]));return g};xe.prototype.visitJSXSpreadChild=function(g,c,k){g.expression=this.accept(g.expression,c,k.concat(["expression"]));return g};xe.prototype.visitJSXBoundaryElement=
function(g,c,k){g.name=this.accept(g.name,c,k.concat(["name"]));return g};xe.prototype.visitJSXAttribute=function(g,c,k){g.name=this.accept(g.name,c,k.concat(["name"]));g.value&&(g.value=this.accept(g.value,c,k.concat(["value"])));return g};xe.prototype.visitJSXText=function(g,c,k){return g};xe.prototype.visitJSXOpeningFragment=function(g,c,k){return g};xe.prototype.visitJSXClosingFragment=function(g,c,k){return g};xe.prototype.visitIdentifier=function(g,c,k){return g};xe.prototype.visitLiteral=function(g,
c,k){return g};xe.prototype.visitExpressionStatement=function(g,c,k){g.expression=this.accept(g.expression,c,k.concat(["expression"]));return g};xe.prototype.visitBlockStatement=function(g,c,k){for(var d=[],h=0;h<g.body.length;h++){var n=g.body[h];n=n?this.accept(n,c,k.concat(["body",h])):n;Array.isArray(n)?d.push.apply(d,n):d.push(n)}g.body=d;return g};xe.prototype.visitEmptyStatement=function(g,c,k){return g};xe.prototype.visitDebuggerStatement=function(g,c,k){return g};xe.prototype.visitWithStatement=
function(g,c,k){g.object=this.accept(g.object,c,k.concat(["object"]));g.body=this.accept(g.body,c,k.concat(["body"]));return g};xe.prototype.visitReturnStatement=function(g,c,k){g.argument&&(g.argument=this.accept(g.argument,c,k.concat(["argument"])));return g};xe.prototype.visitLabeledStatement=function(g,c,k){g.label=this.accept(g.label,c,k.concat(["label"]));g.body=this.accept(g.body,c,k.concat(["body"]));return g};xe.prototype.visitBreakStatement=function(g,c,k){g.label&&(g.label=this.accept(g.label,
c,k.concat(["label"])));return g};xe.prototype.visitContinueStatement=function(g,c,k){g.label&&(g.label=this.accept(g.label,c,k.concat(["label"])));return g};xe.prototype.visitIfStatement=function(g,c,k){g.test=this.accept(g.test,c,k.concat(["test"]));g.consequent=this.accept(g.consequent,c,k.concat(["consequent"]));g.alternate&&(g.alternate=this.accept(g.alternate,c,k.concat(["alternate"])));return g};xe.prototype.visitSwitchStatement=function(g,c,k){g.discriminant=this.accept(g.discriminant,c,k.concat(["discriminant"]));
for(var d=[],h=0;h<g.cases.length;h++){var n=g.cases[h];n=n?this.accept(n,c,k.concat(["cases",h])):n;Array.isArray(n)?d.push.apply(d,n):d.push(n)}g.cases=d;return g};xe.prototype.visitThrowStatement=function(g,c,k){g.argument=this.accept(g.argument,c,k.concat(["argument"]));return g};xe.prototype.visitTryStatement=function(g,c,k){g.block=this.accept(g.block,c,k.concat(["block"]));g.handler&&(g.handler=this.accept(g.handler,c,k.concat(["handler"])));g.finalizer&&(g.finalizer=this.accept(g.finalizer,
c,k.concat(["finalizer"])));return g};xe.prototype.visitWhileStatement=function(g,c,k){g.test=this.accept(g.test,c,k.concat(["test"]));g.body=this.accept(g.body,c,k.concat(["body"]));return g};xe.prototype.visitDoWhileStatement=function(g,c,k){g.body=this.accept(g.body,c,k.concat(["body"]));g.test=this.accept(g.test,c,k.concat(["test"]));return g};xe.prototype.visitForStatement=function(g,c,k){g.init&&(g.init=this.accept(g.init,c,k.concat(["init"])));g.test&&(g.test=this.accept(g.test,c,k.concat(["test"])));
g.update&&(g.update=this.accept(g.update,c,k.concat(["update"])));g.body=this.accept(g.body,c,k.concat(["body"]));return g};xe.prototype.visitForInStatement=function(g,c,k){g.left=this.accept(g.left,c,k.concat(["left"]));g.right=this.accept(g.right,c,k.concat(["right"]));g.body=this.accept(g.body,c,k.concat(["body"]));return g};xe.prototype.visitDeclaration=function(g,c,k){return g};xe.prototype.visitThisExpression=function(g,c,k){return g};xe.prototype.visitArrayExpression=function(g,c,k){if(g.elements){for(var d=
[],h=0;h<g.elements.length;h++){var n=g.elements[h];n=n?this.accept(n,c,k.concat(["elements",h])):n;Array.isArray(n)?d.push.apply(d,n):d.push(n)}g.elements=d}return g};xe.prototype.visitObjectExpression=function(g,c,k){for(var d=[],h=0;h<g.properties.length;h++){var n=g.properties[h];n=n?this.accept(n,c,k.concat(["properties",h])):n;Array.isArray(n)?d.push.apply(d,n):d.push(n)}g.properties=d;return g};xe.prototype.visitFunctionExpression=function(g,c,k){g.id&&(g.id=this.accept(g.id,c,k.concat(["id"])));
for(var d=[],h=0;h<g.params.length;h++){var n=g.params[h];n=n?this.accept(n,c,k.concat(["params",h])):n;Array.isArray(n)?d.push.apply(d,n):d.push(n)}g.params=d;g.body=this.accept(g.body,c,k.concat(["body"]));return g};xe.prototype.visitUnaryExpression=function(g,c,k){g.argument=this.accept(g.argument,c,k.concat(["argument"]));return g};xe.prototype.visitUpdateExpression=function(g,c,k){g.argument=this.accept(g.argument,c,k.concat(["argument"]));return g};xe.prototype.visitBinaryExpression=function(g,
c,k){g.left=this.accept(g.left,c,k.concat(["left"]));g.right=this.accept(g.right,c,k.concat(["right"]));return g};xe.prototype.visitAssignmentExpression=function(g,c,k){g.left=this.accept(g.left,c,k.concat(["left"]));g.right=this.accept(g.right,c,k.concat(["right"]));return g};xe.prototype.visitLogicalExpression=function(g,c,k){g.left=this.accept(g.left,c,k.concat(["left"]));g.right=this.accept(g.right,c,k.concat(["right"]));return g};xe.prototype.visitMemberExpression=function(g,c,k){g.object=this.accept(g.object,
c,k.concat(["object"]));g.property=this.accept(g.property,c,k.concat(["property"]));return g};xe.prototype.visitConditionalExpression=function(g,c,k){g.test=this.accept(g.test,c,k.concat(["test"]));g.alternate=this.accept(g.alternate,c,k.concat(["alternate"]));g.consequent=this.accept(g.consequent,c,k.concat(["consequent"]));return g};xe.prototype.visitCallExpression=function(g,c,k){g.callee=this.accept(g.callee,c,k.concat(["callee"]));for(var d=[],h=0;h<g.arguments.length;h++){var n=g.arguments[h];
n=n?this.accept(n,c,k.concat(["arguments",h])):n;Array.isArray(n)?d.push.apply(d,n):d.push(n)}g.arguments=d;return g};xe.prototype.visitNewExpression=function(g,c,k){g.callee=this.accept(g.callee,c,k.concat(["callee"]));for(var d=[],h=0;h<g.arguments.length;h++){var n=g.arguments[h];n=n?this.accept(n,c,k.concat(["arguments",h])):n;Array.isArray(n)?d.push.apply(d,n):d.push(n)}g.arguments=d;return g};xe.prototype.visitSequenceExpression=function(g,c,k){for(var d=[],h=0;h<g.expressions.length;h++){var n=
g.expressions[h];n=n?this.accept(n,c,k.concat(["expressions",h])):n;Array.isArray(n)?d.push.apply(d,n):d.push(n)}g.expressions=d;return g};xe.prototype.visitArrowFunctionExpression=function(g,c,k){g.body=this.accept(g.body,c,k.concat(["body"]));g.id&&(g.id=this.accept(g.id,c,k.concat(["id"])));for(var d=[],h=0;h<g.params.length;h++){var n=g.params[h];n=n?this.accept(n,c,k.concat(["params",h])):n;Array.isArray(n)?d.push.apply(d,n):d.push(n)}g.params=d;return g};xe.prototype.visitYieldExpression=function(g,
c,k){g.argument&&(g.argument=this.accept(g.argument,c,k.concat(["argument"])));return g};xe.prototype.visitTemplateLiteral=function(g,c,k){for(var d=[],h=0;h<g.quasis.length;h++){var n=g.quasis[h];n=n?this.accept(n,c,k.concat(["quasis",h])):n;Array.isArray(n)?d.push.apply(d,n):d.push(n)}g.quasis=d;d=[];for(h=0;h<g.expressions.length;h++)n=(n=g.expressions[h])?this.accept(n,c,k.concat(["expressions",h])):n,Array.isArray(n)?d.push.apply(d,n):d.push(n);g.expressions=d;return g};xe.prototype.visitTaggedTemplateExpression=
function(g,c,k){g.tag=this.accept(g.tag,c,k.concat(["tag"]));g.quasi=this.accept(g.quasi,c,k.concat(["quasi"]));return g};xe.prototype.visitAssignmentProperty=function(g,c,k){g.value=this.accept(g.value,c,k.concat(["value"]));g.key=this.accept(g.key,c,k.concat(["key"]));return g};xe.prototype.visitObjectPattern=function(g,c,k){for(var d=[],h=0;h<g.properties.length;h++){var n=g.properties[h];n=n?this.accept(n,c,k.concat(["properties",h])):n;Array.isArray(n)?d.push.apply(d,n):d.push(n)}g.properties=
d;return g};xe.prototype.visitArrayPattern=function(g,c,k){if(g.elements){for(var d=[],h=0;h<g.elements.length;h++){var n=g.elements[h];n=n?this.accept(n,c,k.concat(["elements",h])):n;Array.isArray(n)?d.push.apply(d,n):d.push(n)}g.elements=d}return g};xe.prototype.visitRestElement=function(g,c,k){g.argument=this.accept(g.argument,c,k.concat(["argument"]));return g};xe.prototype.visitAssignmentPattern=function(g,c,k){g.left=this.accept(g.left,c,k.concat(["left"]));g.right=this.accept(g.right,c,k.concat(["right"]));
return g};xe.prototype.visitClassExpression=function(g,c,k){g.id&&(g.id=this.accept(g.id,c,k.concat(["id"])));g.superClass&&(g.superClass=this.accept(g.superClass,c,k.concat(["superClass"])));g.body=this.accept(g.body,c,k.concat(["body"]));return g};xe.prototype.visitMetaProperty=function(g,c,k){g.meta=this.accept(g.meta,c,k.concat(["meta"]));g.property=this.accept(g.property,c,k.concat(["property"]));return g};xe.prototype.visitImportDeclaration=function(g,c,k){for(var d=[],h=0;h<g.specifiers.length;h++){var n=
g.specifiers[h];n=n?this.accept(n,c,k.concat(["specifiers",h])):n;Array.isArray(n)?d.push.apply(d,n):d.push(n)}g.specifiers=d;g.source=this.accept(g.source,c,k.concat(["source"]));return g};xe.prototype.visitImportSpecifier=function(g,c,k){g.imported=this.accept(g.imported,c,k.concat(["imported"]));g.local=this.accept(g.local,c,k.concat(["local"]));return g};xe.prototype.visitImportDefaultSpecifier=function(g,c,k){g.local=this.accept(g.local,c,k.concat(["local"]));return g};xe.prototype.visitImportNamespaceSpecifier=
function(g,c,k){g.local=this.accept(g.local,c,k.concat(["local"]));return g};xe.prototype.visitExportNamedDeclaration=function(g,c,k){g.declaration&&(g.declaration=this.accept(g.declaration,c,k.concat(["declaration"])));for(var d=[],h=0;h<g.specifiers.length;h++){var n=g.specifiers[h];n=n?this.accept(n,c,k.concat(["specifiers",h])):n;Array.isArray(n)?d.push.apply(d,n):d.push(n)}g.specifiers=d;g.source&&(g.source=this.accept(g.source,c,k.concat(["source"])));return g};xe.prototype.visitExportSpecifier=
function(g,c,k){g.exported=this.accept(g.exported,c,k.concat(["exported"]));g.local=this.accept(g.local,c,k.concat(["local"]));return g};xe.prototype.visitAnonymousDefaultExportedFunctionDeclaration=function(g,c,k){g.id&&(g.id=this.accept(g.id,c,k.concat(["id"])));for(var d=[],h=0;h<g.params.length;h++){var n=g.params[h];n=n?this.accept(n,c,k.concat(["params",h])):n;Array.isArray(n)?d.push.apply(d,n):d.push(n)}g.params=d;g.body=this.accept(g.body,c,k.concat(["body"]));return g};xe.prototype.visitAnonymousDefaultExportedClassDeclaration=
function(g,c,k){g.id&&(g.id=this.accept(g.id,c,k.concat(["id"])));g.superClass&&(g.superClass=this.accept(g.superClass,c,k.concat(["superClass"])));g.body=this.accept(g.body,c,k.concat(["body"]));return g};xe.prototype.visitExportDefaultDeclaration=function(g,c,k){g.declaration=this.accept(g.declaration,c,k.concat(["declaration"]));return g};xe.prototype.visitExportAllDeclaration=function(g,c,k){g.source=this.accept(g.source,c,k.concat(["source"]));return g};xe.prototype.visitAwaitExpression=function(g,
c,k){g.argument=this.accept(g.argument,c,k.concat(["argument"]));return g};xe.prototype.visitJSXMemberExpression=function(g,c,k){g.object=this.accept(g.object,c,k.concat(["object"]));g.property=this.accept(g.property,c,k.concat(["property"]));return g};xe.prototype.visitJSXNamespacedName=function(g,c,k){g.namespace=this.accept(g.namespace,c,k.concat(["namespace"]));g.name=this.accept(g.name,c,k.concat(["name"]));return g};xe.prototype.visitJSXOpeningElement=function(g,c,k){for(var d=[],h=0;h<g.attributes.length;h++){var n=
g.attributes[h];n=n?this.accept(n,c,k.concat(["attributes",h])):n;Array.isArray(n)?d.push.apply(d,n):d.push(n)}g.attributes=d;g.name=this.accept(g.name,c,k.concat(["name"]));return g};xe.prototype.visitJSXClosingElement=function(g,c,k){g.name=this.accept(g.name,c,k.concat(["name"]));return g};xe.prototype.visitJSXSpreadAttribute=function(g,c,k){g.argument=this.accept(g.argument,c,k.concat(["argument"]));return g};xe.prototype.visitJSXElement=function(g,c,k){g.openingElement=this.accept(g.openingElement,
c,k.concat(["openingElement"]));for(var d=[],h=0;h<g.children.length;h++){var n=g.children[h];n=n?this.accept(n,c,k.concat(["children",h])):n;Array.isArray(n)?d.push.apply(d,n):d.push(n)}g.children=d;g.closingElement&&(g.closingElement=this.accept(g.closingElement,c,k.concat(["closingElement"])));return g};xe.prototype.visitJSXFragment=function(g,c,k){g.openingFragment=this.accept(g.openingFragment,c,k.concat(["openingFragment"]));for(var d=[],h=0;h<g.children.length;h++){var n=g.children[h];n=n?
this.accept(n,c,k.concat(["children",h])):n;Array.isArray(n)?d.push.apply(d,n):d.push(n)}g.children=d;g.closingFragment=this.accept(g.closingFragment,c,k.concat(["closingFragment"]));return g};xe.prototype.visitImportExpression=function(g,c,k){g.source=this.accept(g.source,c,k.concat(["source"]));return g};xe.prototype.visitRegExpLiteral=function(g,c,k){return g};xe.prototype.visitFunctionBody=function(g,c,k){for(var d=[],h=0;h<g.body.length;h++){var n=g.body[h];n=n?this.accept(n,c,k.concat(["body",
h])):n;Array.isArray(n)?d.push.apply(d,n):d.push(n)}g.body=d;return g};xe.prototype.visitFunctionDeclaration=function(g,c,k){g.id&&(g.id=this.accept(g.id,c,k.concat(["id"])));for(var d=[],h=0;h<g.params.length;h++){var n=g.params[h];n=n?this.accept(n,c,k.concat(["params",h])):n;Array.isArray(n)?d.push.apply(d,n):d.push(n)}g.params=d;g.body=this.accept(g.body,c,k.concat(["body"]));return g};xe.prototype.visitVariableDeclaration=function(g,c,k){for(var d=[],h=0;h<g.declarations.length;h++){var n=g.declarations[h];
n=n?this.accept(n,c,k.concat(["declarations",h])):n;Array.isArray(n)?d.push.apply(d,n):d.push(n)}g.declarations=d;return g};xe.prototype.visitForOfStatement=function(g,c,k){g.left=this.accept(g.left,c,k.concat(["left"]));g.right=this.accept(g.right,c,k.concat(["right"]));g.body=this.accept(g.body,c,k.concat(["body"]));return g};xe.prototype.visitClassDeclaration=function(g,c,k){g.id=this.accept(g.id,c,k.concat(["id"]));g.superClass&&(g.superClass=this.accept(g.superClass,c,k.concat(["superClass"])));
g.body=this.accept(g.body,c,k.concat(["body"]));return g};xe.prototype.visitJSXIdentifier=function(g,c,k){return g};xe.prototype.visitBigIntLiteral=function(g,c,k){return g};Ha("bF",xe);n9.Visitor=xe;n9.default=xe;var bi=lively.FreezerRuntime.recorderFor("lively.ast/lib/mozilla-ast-visitors.js");bi.obj=ng;bi.Path=Ih;bi.Visitor=xe;var uF=function(){return bi.Visitor.apply(this,arguments)||this};$jscomp.inherits(uF,bi.Visitor);uF.prototype.accept=function(g,c,k){var d=k.map(function(n){return"string"===
typeof n?"."+n:"["+n+"]"}).join(""),h=[];k=bi.Visitor.prototype.accept.call(this,g,{index:c.index,tree:h},k);c.tree.push({node:g,path:d,index:c.index++,children:h});return k};bi.PrinterVisitor=uF;var pl=function(){return bi.Visitor.apply(this,arguments)||this};$jscomp.inherits(pl,bi.Visitor);pl.prototype.recordNotEqual=function(g,c,k,d){k.comparisons.errors.push({node1:g,node2:c,path:k.completePath,msg:d})};pl.prototype.compareType=function(g,c,k){return this.compareField("type",g,c,k)};pl.prototype.compareField=
function(g,c,k,d){k=bi.Path(d.completePath.join(".")).get(k);if(c&&k&&c[g]===k[g]||c&&"*"===c[g]||k&&"*"===k[g])return!0;var h=d.completePath.join(".")+"."+g;this.recordNotEqual(c,k,d,c?k?h+" is not equal: "+c[g]+" vs. "+k[g]:"node2 not defined but node1 ("+h+") is: "+c[g]:"node1 on "+h+" not defined");return!1};pl.prototype.accept=function(g,c,k,d){var h=bi.Path(d.join(".")).get(c);if("*"!==g&&"*"!==h&&(k={completePath:d,comparisons:k.comparisons},this.compareType(g,c,k)))this["visit"+g.type](g,
c,k,d)};pl.prototype.visitFunction=function(g,c,k,d){g.generator&&this.compareField("generator",g,c,k);g.expression&&this.compareField("expression",g,c,k);return bi.Visitor.prototype.visitFunction.call(this,g,c,k,d)};pl.prototype.visitSwitchStatement=function(g,c,k,d){g.lexical&&this.compareField("lexical",g,c,k);return bi.Visitor.prototype.visitSwitchStatement.call(this,g,c,k,d)};pl.prototype.visitForInStatement=function(g,c,k,d){g.each&&this.compareField("each",g,c,k);return bi.Visitor.prototype.visitForInStatement.call(this,
g,c,k,d)};pl.prototype.visitFunctionDeclaration=function(g,c,k,d){g.generator&&this.compareField("generator",g,c,k);g.expression&&this.compareField("expression",g,c,k);return bi.Visitor.prototype.visitFunctionDeclaration.call(this,g,c,k,d)};pl.prototype.visitVariableDeclaration=function(g,c,k,d){this.compareField("kind",g,c,k);return bi.Visitor.prototype.visitVariableDeclaration.call(this,g,c,k,d)};pl.prototype.visitUnaryExpression=function(g,c,k,d){this.compareField("operator",g,c,k);g.prefix&&this.compareField("prefix",
g,c,k);return bi.Visitor.prototype.visitUnaryExpression.call(this,g,c,k,d)};pl.prototype.visitBinaryExpression=function(g,c,k,d){this.compareField("operator",g,c,k);return bi.Visitor.prototype.visitBinaryExpression.call(this,g,c,k,d)};pl.prototype.visitAssignmentExpression=function(g,c,k,d){this.compareField("operator",g,c,k);return bi.Visitor.prototype.visitAssignmentExpression.call(this,g,c,k,d)};pl.prototype.visitUpdateExpression=function(g,c,k,d){this.compareField("operator",g,c,k);g.prefix&&
this.compareField("prefix",g,c,k);return bi.Visitor.prototype.visitUpdateExpression.call(this,g,c,k,d)};pl.prototype.visitLogicalExpression=function(g,c,k,d){this.compareField("operator",g,c,k);return bi.Visitor.prototype.visitLogicalExpression.call(this,g,c,k,d)};pl.prototype.visitMemberExpression=function(g,c,k,d){g.computed&&this.compareField("computed",g,c,k);return bi.Visitor.prototype.visitMemberExpression.call(this,g,c,k,d)};pl.prototype.visitComprehensionBlock=function(g,c,k,d){g.each&&this.compareField("each",
g,c,k);return bi.Visitor.prototype.visitComprehensionBlock.call(this,g,c,k,d)};pl.prototype.visitIdentifier=function(g,c,k,d){this.compareField("name",g,c,k);return bi.Visitor.prototype.visitIdentifier.call(this,g,c,k,d)};pl.prototype.visitLiteral=function(g,c,k,d){this.compareField("value",g,c,k);return bi.Visitor.prototype.visitLiteral.call(this,g,c,k,d)};pl.prototype.visitClassDeclaration=function(g,c,k,d){this.compareField("id",g,c,k);g.superClass&&this.compareField("superClass",g,c,k);this.compareField("body",
g,c,k);return bi.Visitor.prototype.visitClassDeclaration.call(this,g,c,k,d)};pl.prototype.visitClassBody=function(g,c,k,d){this.compareField("body",g,c,k);return bi.Visitor.prototype.visitClassBody.call(this,g,c,k,d)};pl.prototype.visitMethodDefinition=function(g,c,k,d){this.compareField("static",g,c,k);this.compareField("computed",g,c,k);this.compareField("kind",g,c,k);this.compareField("key",g,c,k);this.compareField("value",g,c,k);return bi.Visitor.prototype.visitMethodDefinition.call(this,g,c,
k,d)};bi.ComparisonVisitor=pl;var nk=function(){return bi.Visitor.apply(this,arguments)||this};$jscomp.inherits(nk,bi.Visitor);nk.prototype.newScope=function(g,c){g={node:g,varDecls:[],varDeclPaths:[],funcDecls:[],funcDeclPaths:[],classDecls:[],classDeclPaths:[],classExprs:[],classExprPaths:[],methodDecls:[],methodDeclPaths:[],importSpecifiers:[],importSpecifierPaths:[],exportDecls:[],exportDeclPaths:[],refs:[],thisRefs:[],params:[],catches:[],subScopes:[],resolvedRefMap:new Map};c&&c.subScopes.push(g);
return g};nk.prototype.visitVariableDeclaration=function(g,c,k){c.varDecls.push(g);c.varDeclPaths.push(k);return bi.Visitor.prototype.visitVariableDeclaration.call(this,g,c,k)};nk.prototype.visitVariableDeclarator=function(g,c,k){g.init&&(g.init=this.accept(g.init,c,k.concat(["init"])));return g};nk.prototype.visitFunction=function(g,c,k){var d=this,h=this.newScope(g,c);g.params.forEach(function(n,b){"AssignmentPattern"===n.type&&d.accept(n.right,h,k.concat("params",b,"right"))});h.params=Array.prototype.slice.call(g.params);
return h};nk.prototype.visitFunctionDeclaration=function(g,c,k){var d=this.visitFunction(g,c,k);c.funcDecls.push(g);c.funcDeclPaths.push(k);var h=this;g.defaults&&(g.defaults=g.defaults.reduce(function(n,b,e){b=h.accept(b,d,k.concat(["defaults",e]));Array.isArray(b)?n.push.apply(n,b):n.push(b);return n},[]));g.rest&&(g.rest=h.accept(g.rest,d,k.concat(["rest"])));g.body=h.accept(g.body,d,k.concat(["body"]));g.loc&&(g.loc=h.accept(g.loc,d,k.concat(["loc"])));return g};nk.prototype.visitFunctionExpression=
function(g,c,k){var d=this.visitFunction(g,c,k),h=this;g.defaults&&(g.defaults=g.defaults.reduce(function(n,b,e){b=h.accept(b,d,k.concat(["defaults",e]));Array.isArray(b)?n.push.apply(n,b):n.push(b);return n},[]));g.rest&&(g.rest=h.accept(g.rest,d,k.concat(["rest"])));g.body=h.accept(g.body,d,k.concat(["body"]));g.loc&&(g.loc=h.accept(g.loc,d,k.concat(["loc"])));return g};nk.prototype.visitArrowFunctionExpression=function(g,c,k){var d=this.visitFunction(g,c,k),h=this;g.defaults&&(g.defaults=g.defaults.reduce(function(n,
b,e){b=h.accept(b,d,k.concat(["defaults",e]));Array.isArray(b)?n.push.apply(n,b):n.push(b);return n},[]));g.rest&&(g.rest=h.accept(g.rest,d,k.concat(["rest"])));g.body=h.accept(g.body,d,k.concat(["body"]));g.loc&&(g.loc=h.accept(g.loc,d,k.concat(["loc"])));return g};nk.prototype.visitIdentifier=function(g,c,k){c.refs.push(g);return bi.Visitor.prototype.visitIdentifier.call(this,g,c,k)};nk.prototype.visitMemberExpression=function(g,c,k){g.object=this.accept(g.object,c,k.concat(["object"]));g.computed&&
(g.property=this.accept(g.property,c,k.concat(["property"])));return g};nk.prototype.visitProperty=function(g,c,k){g.computed&&(g.key=this.accept(g.key,c,k.concat(["key"])));g.value=this.accept(g.value,c,k.concat(["value"]));return g};nk.prototype.visitThisExpression=function(g,c,k){c.thisRefs.push(g);return bi.Visitor.prototype.visitThisExpression.call(this,g,c,k)};nk.prototype.visitTryStatement=function(g,c,k){g.block=this.accept(g.block,c,k.concat(["block"]));g.handler&&(g.handler=this.accept(g.handler,
c,k.concat(["handler"])),c.catches.push(g.handler.param));g.finalizer&&(g.finalizer=this.accept(g.finalizer,c,k.concat(["finalizer"])));return g};nk.prototype.visitLabeledStatement=function(g,c,k){g.body=this.accept(g.body,c,k.concat(["body"]));return g};nk.prototype.visitClassDeclaration=function(g,c,k){c.classDecls.push(g);c.classDeclPaths.push(k);g.superClass&&(g.superClass=this.accept(g.superClass,c,k.concat(["superClass"])));g.body=this.accept(g.body,c,k.concat(["body"]));return g};nk.prototype.visitClassExpression=
function(g,c,k){g.id&&(c.classExprs.push(g),c.classExprPaths.push(k));g.superClass&&(g.superClass=this.accept(g.superClass,c,k.concat(["superClass"])));g.body=this.accept(g.body,c,k.concat(["body"]));return g};nk.prototype.visitMethodDefinition=function(g,c,k){g.value=this.accept(g.value,c,k.concat(["value"]));return g};nk.prototype.visitMetaProperty=function(g,c,k){return g};nk.prototype.visitBreakStatement=function(g,c,k){return g};nk.prototype.visitContinueStatement=function(g,c,k){return g};nk.prototype.visitImportSpecifier=
function(g,c,k){c.importSpecifiers.push(g.local);c.importSpecifierPaths.push(k);return g};nk.prototype.visitImportDefaultSpecifier=function(g,c,k){c.importSpecifiers.push(g.local);c.importSpecifierPaths.push(k);return g};nk.prototype.visitImportNamespaceSpecifier=function(g,c,k){c.importSpecifiers.push(g.local);c.importSpecifierPaths.push(k);return g};nk.prototype.visitExportSpecifier=function(g,c,k){g.local=this.accept(g.local,c,k.concat(["local"]));return g};nk.prototype.visitExportNamedDeclaration=
function(g,c,k){c.exportDecls.push(g);c.exportDeclPaths.push(k);g.source||bi.Visitor.prototype.visitExportNamedDeclaration.call(this,g,c,k);return g};nk.prototype.visitExportDefaultDeclaration=function(g,c,k){c.exportDecls.push(g);c.exportDeclPaths.push(k);return bi.Visitor.prototype.visitExportDefaultDeclaration.call(this,g,c,k)};nk.prototype.visitExportAllDeclaration=function(g,c,k){c.exportDecls.push(g);c.exportDeclPaths.push(k);return bi.Visitor.prototype.visitExportAllDeclaration.call(this,g,
c,k)};bi.ScopeVisitor=nk;bi.BaseVisitor=xe;bi.Visitor=xe;bi.PrinterVisitor=uF;bi.PrinterVisitor=uF;bi.ComparisonVisitor=pl;bi.ComparisonVisitor=pl;bi.ScopeVisitor=nk;bi.ScopeVisitor=nk;var $g="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,EW={};(function k(c){function d(I){var J={},P;for(P in I)if(I.hasOwnProperty(P)){var N=I[P];J[P]="object"===typeof N&&null!==N?d(N):N}return J}function h(I,J){var P;var N=I.length;for(P=0;N;){var Y=N>>>1;var W=P+Y;J(I[W])?N=Y:(P=
W+1,N-=Y+1)}return P}function n(I,J){(this||$g).parent=I;(this||$g).key=J}function b(I,J,P,N){(this||$g).node=I;(this||$g).path=J;(this||$g).wrap=P;(this||$g).ref=N}function e(){}function l(I){return null==I?!1:"object"===typeof I&&"string"===typeof I.type}function a(I,J){for(var P=I.length-1;0<=P;--P)if(I[P].node===J)return!0;return!1}function f(I,J){return(new e).traverse(I,J)}function m(I,J){var P=h(J,function(N){return N.range[0]>I.range[0]});I.extendedRange=[I.range[0],I.range[1]];P!==J.length&&
(I.extendedRange[1]=J[P].range[0]);--P;0<=P&&(I.extendedRange[0]=J[P].range[1]);return I}var r={AssignmentExpression:"AssignmentExpression",AssignmentPattern:"AssignmentPattern",ArrayExpression:"ArrayExpression",ArrayPattern:"ArrayPattern",ArrowFunctionExpression:"ArrowFunctionExpression",AwaitExpression:"AwaitExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",CatchClause:"CatchClause",ChainExpression:"ChainExpression",
ClassBody:"ClassBody",ClassDeclaration:"ClassDeclaration",ClassExpression:"ClassExpression",ComprehensionBlock:"ComprehensionBlock",ComprehensionExpression:"ComprehensionExpression",ConditionalExpression:"ConditionalExpression",ContinueStatement:"ContinueStatement",DebuggerStatement:"DebuggerStatement",DirectiveStatement:"DirectiveStatement",DoWhileStatement:"DoWhileStatement",EmptyStatement:"EmptyStatement",ExportAllDeclaration:"ExportAllDeclaration",ExportDefaultDeclaration:"ExportDefaultDeclaration",
ExportNamedDeclaration:"ExportNamedDeclaration",ExportSpecifier:"ExportSpecifier",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForInStatement:"ForInStatement",ForOfStatement:"ForOfStatement",FunctionDeclaration:"FunctionDeclaration",FunctionExpression:"FunctionExpression",GeneratorExpression:"GeneratorExpression",Identifier:"Identifier",IfStatement:"IfStatement",ImportExpression:"ImportExpression",ImportDeclaration:"ImportDeclaration",ImportDefaultSpecifier:"ImportDefaultSpecifier",
ImportNamespaceSpecifier:"ImportNamespaceSpecifier",ImportSpecifier:"ImportSpecifier",Literal:"Literal",LabeledStatement:"LabeledStatement",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",MetaProperty:"MetaProperty",MethodDefinition:"MethodDefinition",ModuleSpecifier:"ModuleSpecifier",NewExpression:"NewExpression",ObjectExpression:"ObjectExpression",ObjectPattern:"ObjectPattern",Program:"Program",Property:"Property",RestElement:"RestElement",ReturnStatement:"ReturnStatement",
SequenceExpression:"SequenceExpression",SpreadElement:"SpreadElement",Super:"Super",SwitchStatement:"SwitchStatement",SwitchCase:"SwitchCase",TaggedTemplateExpression:"TaggedTemplateExpression",TemplateElement:"TemplateElement",TemplateLiteral:"TemplateLiteral",ThisExpression:"ThisExpression",ThrowStatement:"ThrowStatement",TryStatement:"TryStatement",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator",
WhileStatement:"WhileStatement",WithStatement:"WithStatement",YieldExpression:"YieldExpression"};var v={AssignmentExpression:["left","right"],AssignmentPattern:["left","right"],ArrayExpression:["elements"],ArrayPattern:["elements"],ArrowFunctionExpression:["params","body"],AwaitExpression:["argument"],BlockStatement:["body"],BinaryExpression:["left","right"],BreakStatement:["label"],CallExpression:["callee","arguments"],CatchClause:["param","body"],ChainExpression:["expression"],ClassBody:["body"],
ClassDeclaration:["id","superClass","body"],ClassExpression:["id","superClass","body"],ComprehensionBlock:["left","right"],ComprehensionExpression:["blocks","filter","body"],ConditionalExpression:["test","consequent","alternate"],ContinueStatement:["label"],DebuggerStatement:[],DirectiveStatement:[],DoWhileStatement:["body","test"],EmptyStatement:[],ExportAllDeclaration:["source"],ExportDefaultDeclaration:["declaration"],ExportNamedDeclaration:["declaration","specifiers","source"],ExportSpecifier:["exported",
"local"],ExpressionStatement:["expression"],ForStatement:["init","test","update","body"],ForInStatement:["left","right","body"],ForOfStatement:["left","right","body"],FunctionDeclaration:["id","params","body"],FunctionExpression:["id","params","body"],GeneratorExpression:["blocks","filter","body"],Identifier:[],IfStatement:["test","consequent","alternate"],ImportExpression:["source"],ImportDeclaration:["specifiers","source"],ImportDefaultSpecifier:["local"],ImportNamespaceSpecifier:["local"],ImportSpecifier:["imported",
"local"],Literal:[],LabeledStatement:["label","body"],LogicalExpression:["left","right"],MemberExpression:["object","property"],MetaProperty:["meta","property"],MethodDefinition:["key","value"],ModuleSpecifier:[],NewExpression:["callee","arguments"],ObjectExpression:["properties"],ObjectPattern:["properties"],Program:["body"],Property:["key","value"],RestElement:["argument"],ReturnStatement:["argument"],SequenceExpression:["expressions"],SpreadElement:["argument"],Super:[],SwitchStatement:["discriminant",
"cases"],SwitchCase:["test","consequent"],TaggedTemplateExpression:["tag","quasi"],TemplateElement:[],TemplateLiteral:["quasis","expressions"],ThisExpression:[],ThrowStatement:["argument"],TryStatement:["block","handler","finalizer"],UnaryExpression:["argument"],UpdateExpression:["argument"],VariableDeclaration:["declarations"],VariableDeclarator:["id","init"],WhileStatement:["test","body"],WithStatement:["object","body"],YieldExpression:["argument"]};var x={};var y={};var E={};var F={Break:x,Skip:y,
Remove:E};n.prototype.replace=function(I){(this||$g).parent[(this||$g).key]=I};n.prototype.remove=function(){if(Array.isArray((this||$g).parent))return(this||$g).parent.splice((this||$g).key,1),!0;this.replace(null);return!1};e.prototype.path=function(){function I(va,za){if(Array.isArray(za))for(P=0,N=za.length;P<N;++P)va.push(za[P]);else va.push(za)}var J,P,N;if(!(this||$g).__current.path)return null;var Y=[];var W=2;for(J=(this||$g).__leavelist.length;W<J;++W){var da=(this||$g).__leavelist[W];I(Y,
da.path)}I(Y,(this||$g).__current.path);return Y};e.prototype.type=function(){return this.current().type||(this||$g).__current.wrap};e.prototype.parents=function(){var I;var J=[];var P=1;for(I=(this||$g).__leavelist.length;P<I;++P)J.push((this||$g).__leavelist[P].node);return J};e.prototype.current=function(){return(this||$g).__current.node};e.prototype.__execute=function(I,J){var P=void 0;var N=(this||$g).__current;(this||$g).__current=J;(this||$g).__state=null;I&&(P=I.call(this||$g,J.node,(this||
$g).__leavelist[(this||$g).__leavelist.length-1].node));(this||$g).__current=N;return P};e.prototype.notify=function(I){(this||$g).__state=I};e.prototype.skip=function(){this.notify(y)};e.prototype["break"]=function(){this.notify(x)};e.prototype.remove=function(){this.notify(E)};e.prototype.__initialize=function(I,J){(this||$g).visitor=J;(this||$g).root=I;(this||$g).__worklist=[];(this||$g).__leavelist=[];(this||$g).__current=null;(this||$g).__state=null;(this||$g).__fallback=null;"iteration"===J.fallback?
(this||$g).__fallback=Object.keys:"function"===typeof J.fallback&&((this||$g).__fallback=J.fallback);(this||$g).__keys=v;J.keys&&((this||$g).__keys=Object.assign(Object.create((this||$g).__keys),J.keys))};e.prototype.traverse=function(I,J){var P,N,Y;this.__initialize(I,J);var W={};var da=(this||$g).__worklist;var va=(this||$g).__leavelist;da.push(new b(I,null,null,null));for(va.push(new b(null,null,null,null));da.length;)if(I=da.pop(),I===W){I=va.pop();var za=this.__execute(J.leave,I);if((this||$g).__state===
x||za===x)break}else if(I.node){za=this.__execute(J.enter,I);if((this||$g).__state===x||za===x)break;da.push(W);va.push(I);if((this||$g).__state!==y&&za!==y){za=I.node;var L=za.type||I.wrap;var Z=(this||$g).__keys[L];if(!Z)if((this||$g).__fallback)Z=this.__fallback(za);else throw Error("Unknown node type "+L+".");for(P=Z.length;0<=--P;){var R=Z[P];if(Y=za[R])if(Array.isArray(Y))for(N=Y.length;0<=--N;){if(Y[N]&&!a(va,Y[N])){if(L!==r.ObjectExpression&&L!==r.ObjectPattern||"properties"!==Z[P])if(l(Y[N]))I=
new b(Y[N],[R,N],null,null);else continue;else I=new b(Y[N],[R,N],"Property",null);da.push(I)}}else l(Y)&&!a(va,Y)&&da.push(new b(Y,R,null,null))}}}};e.prototype.replace=function(I,J){function P(fa){if(fa.ref.remove()){var ua=fa.ref.key;var gb=fa.ref.parent;for(fa=va.length;fa--;){var hb=va[fa];if(hb.ref&&hb.ref.parent===gb){if(hb.ref.key<ua)break;--hb.ref.key}}}}var N,Y,W;this.__initialize(I,J);var da={};var va=(this||$g).__worklist;var za=(this||$g).__leavelist;var L={root:I};var Z=new b(I,null,
null,new n(L,"root"));va.push(Z);for(za.push(Z);va.length;)if(Z=va.pop(),Z===da){Z=za.pop();var R=this.__execute(J.leave,Z);void 0!==R&&R!==x&&R!==y&&R!==E&&Z.ref.replace(R);(this||$g).__state!==E&&R!==E||P(Z);if((this||$g).__state===x||R===x)break}else{R=this.__execute(J.enter,Z);void 0!==R&&R!==x&&R!==y&&R!==E&&(Z.ref.replace(R),Z.node=R);if((this||$g).__state===E||R===E)P(Z),Z.node=null;if((this||$g).__state===x||R===x)break;if(I=Z.node)if(va.push(da),za.push(Z),(this||$g).__state!==y&&R!==y){R=
I.type||Z.wrap;var X=(this||$g).__keys[R];if(!X)if((this||$g).__fallback)X=this.__fallback(I);else throw Error("Unknown node type "+R+".");for(N=X.length;0<=--N;){var ja=X[N];if(W=I[ja])if(Array.isArray(W))for(Y=W.length;0<=--Y;){if(W[Y]){if(R!==r.ObjectExpression&&R!==r.ObjectPattern||"properties"!==X[N])if(l(W[Y]))Z=new b(W[Y],[ja,Y],null,new n(W,Y));else continue;else Z=new b(W[Y],[ja,Y],"Property",new n(W,Y));va.push(Z)}}else l(W)&&va.push(new b(W,ja,null,new n(I,ja)))}}}return L.root};c.Syntax=
r;c.traverse=f;c.replace=function(I,J){return(new e).replace(I,J)};c.attachComments=function(I,J,P){var N=[],Y;if(!I.range)throw Error("attachComments needs range information");if(!P.length){if(J.length){var W=0;for(Y=J.length;W<Y;W+=1)P=d(J[W]),P.extendedRange=[0,I.range[0]],N.push(P);I.leadingComments=N}return I}W=0;for(Y=J.length;W<Y;W+=1)N.push(m(d(J[W]),P));var da=0;f(I,{enter:function(va){for(var za;da<N.length;){za=N[da];if(za.extendedRange[1]>va.range[0])break;za.extendedRange[1]===va.range[0]?
(va.leadingComments||(va.leadingComments=[]),va.leadingComments.push(za),N.splice(da,1)):da+=1}if(da===N.length)return F.Break;if(N[da].extendedRange[0]>va.range[1])return F.Skip}});da=0;f(I,{leave:function(va){for(var za;da<N.length;){za=N[da];if(va.range[1]<za.extendedRange[0])break;va.range[1]===za.extendedRange[0]?(va.trailingComments||(va.trailingComments=[]),va.trailingComments.push(za),N.splice(da,1)):da+=1}if(da===N.length)return F.Break;if(N[da].extendedRange[0]>va.range[1])return F.Skip}});
return I};c.VisitorKeys=v;c.VisitorOption=F;c.Controller=e;c.cloneEnvironment=function(){return k({})};return c})(EW);var o9={};(function(){function c(d){if(null==d)return!1;switch(d.type){case "BlockStatement":case "BreakStatement":case "ContinueStatement":case "DebuggerStatement":case "DoWhileStatement":case "EmptyStatement":case "ExpressionStatement":case "ForInStatement":case "ForStatement":case "IfStatement":case "LabeledStatement":case "ReturnStatement":case "SwitchStatement":case "ThrowStatement":case "TryStatement":case "VariableDeclaration":case "WhileStatement":case "WithStatement":return!0}return!1}
function k(d){switch(d.type){case "IfStatement":return null!=d.alternate?d.alternate:d.consequent;case "LabeledStatement":case "ForStatement":case "ForInStatement":case "WhileStatement":case "WithStatement":return d.body}return null}o9={isExpression:function(d){if(null==d)return!1;switch(d.type){case "ArrayExpression":case "AssignmentExpression":case "BinaryExpression":case "CallExpression":case "ConditionalExpression":case "FunctionExpression":case "Identifier":case "Literal":case "LogicalExpression":case "MemberExpression":case "NewExpression":case "ObjectExpression":case "SequenceExpression":case "ThisExpression":case "UnaryExpression":case "UpdateExpression":return!0}return!1},
isStatement:c,isIterationStatement:function(d){if(null==d)return!1;switch(d.type){case "DoWhileStatement":case "ForInStatement":case "ForStatement":case "WhileStatement":return!0}return!1},isSourceElement:function(d){return c(d)||null!=d&&"FunctionDeclaration"===d.type},isProblematicIfStatement:function(d){if("IfStatement"!==d.type||null==d.alternate)return!1;d=d.consequent;do{if("IfStatement"===d.type&&null==d.alternate)return!0;d=k(d)}while(d);return!1},trailingStatement:k}})();var dna=o9,p9={};
(function(){function c(f){if(65535>=f)return String.fromCharCode(f);var m=String.fromCharCode(Math.floor((f-65536)/1024)+55296);f=String.fromCharCode((f-65536)%1024+56320);return m+f}var k;var d=/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]/;
var h=/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u08A0-\u08B4\u08B6-\u08BD\u08D4-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D01-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19D9\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1CD0-\u1CD2\u1CD4-\u1CF6\u1CF8\u1CF9\u1D00-\u1DF5\u1DFB-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u2E2F\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099\u309A\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]/;
var n=/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309B-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF30-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDF00-\uDF19]|\uD806[\uDCA0-\uDCDF\uDCFF\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50\uDF93-\uDF9F\uDFE0]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00\uDC01]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1]|\uD87E[\uDC00-\uDE1D]/;
var b=/[\xAA\xB5\xB7\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u08A0-\u08B4\u08B6-\u08BD\u08D4-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D01-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1369-\u1371\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1CD0-\u1CD2\u1CD4-\u1CF6\u1CF8\u1CF9\u1D00-\u1DF5\u1DFB-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF30-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC00-\uDC46\uDC66-\uDC6F\uDC7F-\uDCBA\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDCA-\uDDCC\uDDD0-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE3E\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3C-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC00-\uDC4A\uDC50-\uDC59\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB7\uDEC0-\uDEC9\uDF00-\uDF19\uDF1D-\uDF2B\uDF30-\uDF39]|\uD806[\uDCA0-\uDCE9\uDCFF\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC36\uDC38-\uDC40\uDC50-\uDC59\uDC72-\uDC8F\uDC92-\uDCA7\uDCA9-\uDCB6]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50-\uDF7E\uDF8F-\uDF9F\uDFE0]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00\uDC01]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6\uDD00-\uDD4A\uDD50-\uDD59]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1]|\uD87E[\uDC00-\uDE1D]|\uDB40[\uDD00-\uDDEF]/;
var e=[5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279];var l=Array(128);for(k=0;128>k;++k)l[k]=97<=k&&122>=k||65<=k&&90>=k||36===k||95===k;var a=Array(128);for(k=0;128>k;++k)a[k]=97<=k&&122>=k||65<=k&&90>=k||48<=k&&57>=k||36===k||95===k;p9={isDecimalDigit:function(f){return 48<=f&&57>=f},isHexDigit:function(f){return 48<=f&&57>=f||97<=f&&102>=f||65<=f&&70>=f},isOctalDigit:function(f){return 48<=f&&55>=f},isWhiteSpace:function(f){return 32===f||9===f||11===f||12===
f||160===f||5760<=f&&0<=e.indexOf(f)},isLineTerminator:function(f){return 10===f||13===f||8232===f||8233===f},isIdentifierStartES5:function(f){return 128>f?l[f]:d.test(c(f))},isIdentifierPartES5:function(f){return 128>f?a[f]:h.test(c(f))},isIdentifierStartES6:function(f){return 128>f?l[f]:n.test(c(f))},isIdentifierPartES6:function(f){return 128>f?a[f]:b.test(c(f))}}})();var q9=p9,r9={};(function(){function c(l,a){return a||"yield"!==l?k(l,a):!1}function k(l,a){if(a)a:switch(l){case "implements":case "interface":case "package":case "private":case "protected":case "public":case "static":case "let":a=
!0;break a;default:a=!1}if(a)return!0;switch(l.length){case 2:return"if"===l||"in"===l||"do"===l;case 3:return"var"===l||"for"===l||"new"===l||"try"===l;case 4:return"this"===l||"else"===l||"case"===l||"void"===l||"with"===l||"enum"===l;case 5:return"while"===l||"break"===l||"catch"===l||"throw"===l||"const"===l||"yield"===l||"class"===l||"super"===l;case 6:return"return"===l||"typeof"===l||"delete"===l||"switch"===l||"export"===l||"import"===l;case 7:return"default"===l||"finally"===l||"extends"===
l;case 8:return"function"===l||"continue"===l||"debugger"===l;case 10:return"instanceof"===l;default:return!1}}function d(l,a){return"null"===l||"true"===l||"false"===l||c(l,a)}function h(l,a){return"null"===l||"true"===l||"false"===l||k(l,a)}function n(l){var a;if(0===l.length)return!1;var f=l.charCodeAt(0);if(!e.isIdentifierStartES5(f))return!1;var m=1;for(a=l.length;m<a;++m)if(f=l.charCodeAt(m),!e.isIdentifierPartES5(f))return!1;return!0}function b(l){var a;if(0===l.length)return!1;var f=e.isIdentifierStartES6;
var m=0;for(a=l.length;m<a;++m){var r=l.charCodeAt(m);if(55296<=r&&56319>=r){++m;if(m>=a)return!1;var v=l.charCodeAt(m);if(!(56320<=v&&57343>=v))return!1;r=1024*(r-55296)+(v-56320)+65536}if(!f(r))return!1;f=e.isIdentifierPartES6}return!0}var e=q9;r9={isKeywordES5:c,isKeywordES6:k,isReservedWordES5:d,isReservedWordES6:h,isRestrictedWord:function(l){return"eval"===l||"arguments"===l},isIdentifierNameES5:n,isIdentifierNameES6:b,isIdentifierES5:function(l,a){return n(l)&&!d(l,a)},isIdentifierES6:function(l,
a){return b(l)&&!h(l,a)}}})();var ena=r9,sI={};sI.ast=dna;sI.code=q9;sI.keyword=ena;var en={getArg:function(c,k,d){if(k in c)return c[k];if(3===arguments.length)return d;throw Error('"'+k+'" is a required argument.');}},v0=/^(?:([\w+\-.]+):)?\/\/(?:(\w+:\w+)@)?([\w.-]*)(?::(\d+))?(.*)$/,gga=/^data:.+,.+$/;en.urlParse=vo;en.urlGenerate=Jn;en.normalize=Am;en.join=mi;en.isAbsolute=function(c){return"/"===c.charAt(0)||v0.test(c)};en.relative=function(c,k){""===c&&(c=".");c=c.replace(/\/$/,"");for(var d=
0;0!==k.indexOf(c+"/");){var h=c.lastIndexOf("/");if(0>h)return k;c=c.slice(0,h);if(c.match(/^([^\/]+:\/)?\/*$/))return k;++d}return Array(d+1).join("../")+k.substr(c.length+1)};var s9=!("__proto__"in Object.create(null));en.toSetString=s9?Wk:Jv;en.fromSetString=s9?Wk:Kt;en.compareByOriginalPositions=function(c,k,d){var h=ir(c.source,k.source);if(0!==h)return h;h=c.originalLine-k.originalLine;if(0!==h)return h;h=c.originalColumn-k.originalColumn;if(0!==h||d)return h;h=c.generatedColumn-k.generatedColumn;
if(0!==h)return h;h=c.generatedLine-k.generatedLine;return 0!==h?h:ir(c.name,k.name)};en.compareByGeneratedPositionsDeflated=function(c,k,d){var h=c.generatedLine-k.generatedLine;if(0!==h)return h;h=c.generatedColumn-k.generatedColumn;if(0!==h||d)return h;h=ir(c.source,k.source);if(0!==h)return h;h=c.originalLine-k.originalLine;if(0!==h)return h;h=c.originalColumn-k.originalColumn;return 0!==h?h:ir(c.name,k.name)};en.compareByGeneratedPositionsInflated=function(c,k){var d=c.generatedLine-k.generatedLine;
if(0!==d)return d;d=c.generatedColumn-k.generatedColumn;if(0!==d)return d;d=ir(c.source,k.source);if(0!==d)return d;d=c.originalLine-k.originalLine;if(0!==d)return d;d=c.originalColumn-k.originalColumn;return 0!==d?d:ir(c.name,k.name)};en.parseSourceMapInput=function(c){return JSON.parse(c.replace(/^\)]}'[^\n]*\n/,""))};en.computeSourceURL=function(c,k,d){k=k||"";c&&("/"!==c[c.length-1]&&"/"!==k[0]&&(c+="/"),k=c+k);if(d){c=vo(d);if(!c)throw Error("sourceMapURL could not be parsed");c.path&&(d=c.path.lastIndexOf("/"),
0<=d&&(c.path=c.path.substring(0,d+1)));k=mi(Jn(c),k)}return Am(k)};var dO={},t9="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("");dO.encode=function(c){if(0<=c&&c<t9.length)return t9[c];throw new TypeError("Must be between 0 and 63: "+c);};dO.decode=function(c){return 65<=c&&90>=c?c-65:97<=c&&122>=c?c-97+26:48<=c&&57>=c?c-48+52:43==c?62:47==c?63:-1};var vF={encode:function(c){var k="",d=0>c?(-c<<1)+1:c<<1;do c=d&31,d>>>=5,0<d&&(c|=32),k+=dO.encode(c);while(0<d);return k},
decode:function(c,k,d){var h=c.length,n=0,b=0;do{if(k>=h)throw Error("Expected more digits in base 64 VLQ value.");var e=dO.decode(c.charCodeAt(k++));if(-1===e)throw Error("Invalid base64 digit: "+c.charAt(k-1));var l=!!(e&32);e&=31;n+=e<<b;b+=5}while(l);c=n>>1;d.value=1===(n&1)?-c:c;d.rest=k}},wo="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,FW=en,GW=Object.prototype.hasOwnProperty,pB="undefined"!==typeof Map;Xg.fromArray=function(c,k){for(var d=new Xg,h=0,n=c.length;h<
n;h++)d.add(c[h],k);return d};Xg.prototype.size=function(){return pB?(this||wo)._set.size:Object.getOwnPropertyNames((this||wo)._set).length};Xg.prototype.add=function(c,k){var d=pB?c:FW.toSetString(c),h=pB?this.has(c):GW.call((this||wo)._set,d),n=(this||wo)._array.length;h&&!k||(this||wo)._array.push(c);h||(pB?(this||wo)._set.set(c,n):(this||wo)._set[d]=n)};Xg.prototype.has=function(c){if(pB)return(this||wo)._set.has(c);c=FW.toSetString(c);return GW.call((this||wo)._set,c)};Xg.prototype.indexOf=
function(c){if(pB){var k=(this||wo)._set.get(c);if(0<=k)return k}else if(k=FW.toSetString(c),GW.call((this||wo)._set,k))return(this||wo)._set[k];throw Error('"'+c+'" is not in the set.');};Xg.prototype.at=function(c){if(0<=c&&c<(this||wo)._array.length)return(this||wo)._array[c];throw Error("No element indexed by "+c);};Xg.prototype.toArray=function(){return(this||wo)._array.slice()};var rs="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,u9=en;ah.prototype.unsortedForEach=
function(c,k){(this||rs)._array.forEach(c,k)};ah.prototype.add=function(c){var k=(this||rs)._last,d=k.generatedLine,h=c.generatedLine,n=k.generatedColumn,b=c.generatedColumn;h>d||h==d&&b>=n||0>=u9.compareByGeneratedPositionsInflated(k,c)?(this||rs)._last=c:(this||rs)._sorted=!1;(this||rs)._array.push(c)};ah.prototype.toArray=function(){(this||rs)._sorted||((this||rs)._array.sort(u9.compareByGeneratedPositionsInflated),(this||rs)._sorted=!0);return(this||rs)._array};var vi="undefined"!==typeof globalThis?
globalThis:"undefined"!==typeof self?self:global,Cm=en,NK=Xg,hga=ah;Bm.prototype._version=3;Bm.fromSourceMap=function(c){var k=c.sourceRoot,d=new Bm({file:c.file,sourceRoot:k});c.eachMapping(function(h){var n={generated:{line:h.generatedLine,column:h.generatedColumn}};null!=h.source&&(n.source=h.source,null!=k&&(n.source=Cm.relative(k,n.source)),n.original={line:h.originalLine,column:h.originalColumn},null!=h.name&&(n.name=h.name));d.addMapping(n)});c.sources.forEach(function(h){var n=h;null!==k&&
(n=Cm.relative(k,h));d._sources.has(n)||d._sources.add(n);n=c.sourceContentFor(h);null!=n&&d.setSourceContent(h,n)});return d};Bm.prototype.addMapping=function(c){var k=Cm.getArg(c,"generated"),d=Cm.getArg(c,"original",null),h=Cm.getArg(c,"source",null);c=Cm.getArg(c,"name",null);(this||vi)._skipValidation||this._validateMapping(k,d,h,c);null!=h&&(h=String(h),(this||vi)._sources.has(h)||(this||vi)._sources.add(h));null!=c&&(c=String(c),(this||vi)._names.has(c)||(this||vi)._names.add(c));(this||vi)._mappings.add({generatedLine:k.line,
generatedColumn:k.column,originalLine:null!=d&&d.line,originalColumn:null!=d&&d.column,source:h,name:c})};Bm.prototype.setSourceContent=function(c,k){null!=(this||vi)._sourceRoot&&(c=Cm.relative((this||vi)._sourceRoot,c));null!=k?((this||vi)._sourcesContents||((this||vi)._sourcesContents=Object.create(null)),(this||vi)._sourcesContents[Cm.toSetString(c)]=k):(this||vi)._sourcesContents&&(delete (this||vi)._sourcesContents[Cm.toSetString(c)],0===Object.keys((this||vi)._sourcesContents).length&&((this||
vi)._sourcesContents=null))};Bm.prototype.applySourceMap=function(c,k,d){var h=k;if(null==k){if(null==c.file)throw Error('SourceMapGenerator.prototype.applySourceMap requires either an explicit source file, or the source map\'s "file" property. Both were omitted.');h=c.file}var n=(this||vi)._sourceRoot;null!=n&&(h=Cm.relative(n,h));var b=new NK,e=new NK;(this||vi)._mappings.unsortedForEach(function(l){if(l.source===h&&null!=l.originalLine){var a=c.originalPositionFor({line:l.originalLine,column:l.originalColumn});
null!=a.source&&(l.source=a.source,null!=d&&(l.source=Cm.join(d,l.source)),null!=n&&(l.source=Cm.relative(n,l.source)),l.originalLine=a.line,l.originalColumn=a.column,null!=a.name&&(l.name=a.name))}a=l.source;null==a||b.has(a)||b.add(a);l=l.name;null==l||e.has(l)||e.add(l)},this||vi);(this||vi)._sources=b;(this||vi)._names=e;c.sources.forEach(function(l){var a=c.sourceContentFor(l);null!=a&&(null!=d&&(l=Cm.join(d,l)),null!=n&&(l=Cm.relative(n,l)),this.setSourceContent(l,a))},this||vi)};Bm.prototype._validateMapping=
function(c,k,d,h){if(k&&"number"!==typeof k.line&&"number"!==typeof k.column)throw Error("original.line and original.column are not numbers -- you probably meant to omit the original mapping entirely and only map the generated position. If so, pass null for the original mapping instead of an object with empty or null values.");if(!(c&&"line"in c&&"column"in c&&0<c.line&&0<=c.column&&!k&&!d&&!h||c&&"line"in c&&"column"in c&&k&&"line"in k&&"column"in k&&0<c.line&&0<=c.column&&0<k.line&&0<=k.column&&
d))throw Error("Invalid mapping: "+JSON.stringify({generated:c,source:d,original:k,name:h}));};Bm.prototype._serializeMappings=function(){for(var c=0,k=1,d=0,h=0,n=0,b=0,e="",l,a,f,m=(this||vi)._mappings.toArray(),r=0,v=m.length;r<v;r++){a=m[r];l="";if(a.generatedLine!==k)for(c=0;a.generatedLine!==k;)l+=";",k++;else if(0<r){if(!Cm.compareByGeneratedPositionsInflated(a,m[r-1]))continue;l+=","}l+=vF.encode(a.generatedColumn-c);c=a.generatedColumn;null!=a.source&&(f=(this||vi)._sources.indexOf(a.source),
l+=vF.encode(f-b),b=f,l+=vF.encode(a.originalLine-1-h),h=a.originalLine-1,l+=vF.encode(a.originalColumn-d),d=a.originalColumn,null!=a.name&&(a=(this||vi)._names.indexOf(a.name),l+=vF.encode(a-n),n=a));e+=l}return e};Bm.prototype._generateSourcesContent=function(c,k){return c.map(function(d){if(!(this||vi)._sourcesContents)return null;null!=k&&(d=Cm.relative(k,d));d=Cm.toSetString(d);return Object.prototype.hasOwnProperty.call((this||vi)._sourcesContents,d)?(this||vi)._sourcesContents[d]:null},this||
vi)};Bm.prototype.toJSON=function(){var c={version:(this||vi)._version,sources:(this||vi)._sources.toArray(),names:(this||vi)._names.toArray(),mappings:this._serializeMappings()};null!=(this||vi)._file&&(c.file=(this||vi)._file);null!=(this||vi)._sourceRoot&&(c.sourceRoot=(this||vi)._sourceRoot);(this||vi)._sourcesContents&&(c.sourcesContent=this._generateSourcesContent(c.sources,c.sourceRoot));return c};Bm.prototype.toString=function(){return JSON.stringify(this.toJSON())};var OK={GREATEST_LOWER_BOUND:1,
LEAST_UPPER_BOUND:2,search:function(c,k,d,h){if(0===k.length)return-1;c=aa(-1,k.length,c,k,d,h||OK.GREATEST_LOWER_BOUND);if(0>c)return-1;for(;0<=c-1&&0===d(k[c],k[c-1],!0);)--c;return c}},Ye="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,vg=en,HW=OK,OD=Xg,tI=function(c,k){bb(c,k,0,c.length-1)};pb.fromSourceMap=function(c,k){return Sb.fromSourceMap(c,k)};pb.prototype._version=3;pb.prototype.__generatedMappings=null;Object.defineProperty(pb.prototype,"_generatedMappings",
{configurable:!0,enumerable:!0,get:function(){(this||Ye).__generatedMappings||this._parseMappings((this||Ye)._mappings,(this||Ye).sourceRoot);return(this||Ye).__generatedMappings}});pb.prototype.__originalMappings=null;Object.defineProperty(pb.prototype,"_originalMappings",{configurable:!0,enumerable:!0,get:function(){(this||Ye).__originalMappings||this._parseMappings((this||Ye)._mappings,(this||Ye).sourceRoot);return(this||Ye).__originalMappings}});pb.prototype._charIsMappingSeparator=function(c,
k){c=c.charAt(k);return";"===c||","===c};pb.prototype._parseMappings=function(c,k){throw Error("Subclasses must implement _parseMappings");};pb.GENERATED_ORDER=1;pb.ORIGINAL_ORDER=2;pb.GREATEST_LOWER_BOUND=1;pb.LEAST_UPPER_BOUND=2;pb.prototype.eachMapping=function(c,k,d){k=k||null;switch(d||pb.GENERATED_ORDER){case pb.GENERATED_ORDER:d=(this||Ye)._generatedMappings;break;case pb.ORIGINAL_ORDER:d=(this||Ye)._originalMappings;break;default:throw Error("Unknown order of iteration.");}var h=(this||Ye).sourceRoot;
d.map(function(n){var b=null===n.source?null:(this||Ye)._sources.at(n.source);b=vg.computeSourceURL(h,b,(this||Ye)._sourceMapURL);return{source:b,generatedLine:n.generatedLine,generatedColumn:n.generatedColumn,originalLine:n.originalLine,originalColumn:n.originalColumn,name:null===n.name?null:(this||Ye)._names.at(n.name)}},this||Ye).forEach(c,k)};pb.prototype.allGeneratedPositionsFor=function(c){var k=vg.getArg(c,"line"),d={source:vg.getArg(c,"source"),originalLine:k,originalColumn:vg.getArg(c,"column",
0)};d.source=this._findSourceIndex(d.source);if(0>d.source)return[];var h=[];d=this._findMapping(d,(this||Ye)._originalMappings,"originalLine","originalColumn",vg.compareByOriginalPositions,HW.LEAST_UPPER_BOUND);if(0<=d){var n=(this||Ye)._originalMappings[d];if(void 0===c.column)for(k=n.originalLine;n&&n.originalLine===k;)h.push({line:vg.getArg(n,"generatedLine",null),column:vg.getArg(n,"generatedColumn",null),lastColumn:vg.getArg(n,"lastGeneratedColumn",null)}),n=(this||Ye)._originalMappings[++d];
else for(c=n.originalColumn;n&&n.originalLine===k&&n.originalColumn==c;)h.push({line:vg.getArg(n,"generatedLine",null),column:vg.getArg(n,"generatedColumn",null),lastColumn:vg.getArg(n,"lastGeneratedColumn",null)}),n=(this||Ye)._originalMappings[++d]}return h};Sb.prototype=Object.create(pb.prototype);Sb.prototype.consumer=pb;Sb.prototype._findSourceIndex=function(c){var k=c;null!=(this||Ye).sourceRoot&&(k=vg.relative((this||Ye).sourceRoot,k));if((this||Ye)._sources.has(k))return(this||Ye)._sources.indexOf(k);
for(k=0;k<(this||Ye)._absoluteSources.length;++k)if((this||Ye)._absoluteSources[k]==c)return k;return-1};Sb.fromSourceMap=function(c,k){var d=Object.create(Sb.prototype),h=d._names=OD.fromArray(c._names.toArray(),!0),n=d._sources=OD.fromArray(c._sources.toArray(),!0);d.sourceRoot=c._sourceRoot;d.sourcesContent=c._generateSourcesContent(d._sources.toArray(),d.sourceRoot);d.file=c._file;d._sourceMapURL=k;d._absoluteSources=d._sources.toArray().map(function(r){return vg.computeSourceURL(d.sourceRoot,
r,k)});c=c._mappings.toArray().slice();for(var b=d.__generatedMappings=[],e=d.__originalMappings=[],l=0,a=c.length;l<a;l++){var f=c[l],m=new sc;m.generatedLine=f.generatedLine;m.generatedColumn=f.generatedColumn;f.source&&(m.source=n.indexOf(f.source),m.originalLine=f.originalLine,m.originalColumn=f.originalColumn,f.name&&(m.name=h.indexOf(f.name)),e.push(m));b.push(m)}tI(d.__originalMappings,vg.compareByOriginalPositions);return d};Sb.prototype._version=3;Object.defineProperty(Sb.prototype,"sources",
{get:function(){return(this||Ye)._absoluteSources.slice()}});Sb.prototype._parseMappings=function(c,k){k=1;for(var d=0,h=0,n=0,b=0,e=0,l=c.length,a=0,f={},m={},r=[],v=[],x,y,E,F,I;a<l;)if(";"===c.charAt(a))k++,a++,d=0;else if(","===c.charAt(a))a++;else{x=new sc;x.generatedLine=k;for(F=a;F<l&&!this._charIsMappingSeparator(c,F);F++);y=c.slice(a,F);if(E=f[y])a+=y.length;else{for(E=[];a<F;)vF.decode(c,a,m),I=m.value,a=m.rest,E.push(I);if(2===E.length)throw Error("Found a source, but no line and column");
if(3===E.length)throw Error("Found a source and line, but no column");f[y]=E}x.generatedColumn=d+E[0];d=x.generatedColumn;1<E.length&&(x.source=b+E[1],b+=E[1],x.originalLine=h+E[2],h=x.originalLine,x.originalLine+=1,x.originalColumn=n+E[3],n=x.originalColumn,4<E.length&&(x.name=e+E[4],e+=E[4]));v.push(x);"number"===typeof x.originalLine&&r.push(x)}tI(v,vg.compareByGeneratedPositionsDeflated);(this||Ye).__generatedMappings=v;tI(r,vg.compareByOriginalPositions);(this||Ye).__originalMappings=r};Sb.prototype._findMapping=
function(c,k,d,h,n,b){if(0>=c[d])throw new TypeError("Line must be greater than or equal to 1, got "+c[d]);if(0>c[h])throw new TypeError("Column must be greater than or equal to 0, got "+c[h]);return HW.search(c,k,n,b)};Sb.prototype.computeColumnSpans=function(){for(var c=0;c<(this||Ye)._generatedMappings.length;++c){var k=(this||Ye)._generatedMappings[c];if(c+1<(this||Ye)._generatedMappings.length){var d=(this||Ye)._generatedMappings[c+1];if(k.generatedLine===d.generatedLine){k.lastGeneratedColumn=
d.generatedColumn-1;continue}}k.lastGeneratedColumn=Infinity}};Sb.prototype.originalPositionFor=function(c){var k={generatedLine:vg.getArg(c,"line"),generatedColumn:vg.getArg(c,"column")};c=this._findMapping(k,(this||Ye)._generatedMappings,"generatedLine","generatedColumn",vg.compareByGeneratedPositionsDeflated,vg.getArg(c,"bias",pb.GREATEST_LOWER_BOUND));if(0<=c&&(c=(this||Ye)._generatedMappings[c],c.generatedLine===k.generatedLine)){k=vg.getArg(c,"source",null);null!==k&&(k=(this||Ye)._sources.at(k),
k=vg.computeSourceURL((this||Ye).sourceRoot,k,(this||Ye)._sourceMapURL));var d=vg.getArg(c,"name",null);null!==d&&(d=(this||Ye)._names.at(d));return{source:k,line:vg.getArg(c,"originalLine",null),column:vg.getArg(c,"originalColumn",null),name:d}}return{source:null,line:null,column:null,name:null}};Sb.prototype.hasContentsOfAllSources=function(){return(this||Ye).sourcesContent?(this||Ye).sourcesContent.length>=(this||Ye)._sources.size()&&!(this||Ye).sourcesContent.some(function(c){return null==c}):
!1};Sb.prototype.sourceContentFor=function(c,k){if(!(this||Ye).sourcesContent)return null;var d=this._findSourceIndex(c);if(0<=d)return(this||Ye).sourcesContent[d];null!=(this||Ye).sourceRoot&&(c=vg.relative((this||Ye).sourceRoot,c));var h;if(null!=(this||Ye).sourceRoot&&(h=vg.urlParse((this||Ye).sourceRoot))){d=c.replace(/^file:\/\//,"");if("file"==h.scheme&&(this||Ye)._sources.has(d))return(this||Ye).sourcesContent[(this||Ye)._sources.indexOf(d)];if((!h.path||"/"==h.path)&&(this||Ye)._sources.has("/"+
c))return(this||Ye).sourcesContent[(this||Ye)._sources.indexOf("/"+c)]}if(k)return null;throw Error('"'+c+'" is not in the SourceMap.');};Sb.prototype.generatedPositionFor=function(c){var k=vg.getArg(c,"source");k=this._findSourceIndex(k);if(0>k)return{line:null,column:null,lastColumn:null};k={source:k,originalLine:vg.getArg(c,"line"),originalColumn:vg.getArg(c,"column")};c=this._findMapping(k,(this||Ye)._originalMappings,"originalLine","originalColumn",vg.compareByOriginalPositions,vg.getArg(c,"bias",
pb.GREATEST_LOWER_BOUND));return 0<=c&&(c=(this||Ye)._originalMappings[c],c.source===k.source)?{line:vg.getArg(c,"generatedLine",null),column:vg.getArg(c,"generatedColumn",null),lastColumn:vg.getArg(c,"lastGeneratedColumn",null)}:{line:null,column:null,lastColumn:null}};wd.prototype=Object.create(pb.prototype);wd.prototype.constructor=pb;wd.prototype._version=3;Object.defineProperty(wd.prototype,"sources",{get:function(){for(var c=[],k=0;k<(this||Ye)._sections.length;k++)for(var d=0;d<(this||Ye)._sections[k].consumer.sources.length;d++)c.push((this||
Ye)._sections[k].consumer.sources[d]);return c}});wd.prototype.originalPositionFor=function(c){var k={generatedLine:vg.getArg(c,"line"),generatedColumn:vg.getArg(c,"column")},d=HW.search(k,(this||Ye)._sections,function(h,n){var b=h.generatedLine-n.generatedOffset.generatedLine;return b?b:h.generatedColumn-n.generatedOffset.generatedColumn});return(d=(this||Ye)._sections[d])?d.consumer.originalPositionFor({line:k.generatedLine-(d.generatedOffset.generatedLine-1),column:k.generatedColumn-(d.generatedOffset.generatedLine===
k.generatedLine?d.generatedOffset.generatedColumn-1:0),bias:c.bias}):{source:null,line:null,column:null,name:null}};wd.prototype.hasContentsOfAllSources=function(){return(this||Ye)._sections.every(function(c){return c.consumer.hasContentsOfAllSources()})};wd.prototype.sourceContentFor=function(c,k){for(var d=0;d<(this||Ye)._sections.length;d++){var h=(this||Ye)._sections[d].consumer.sourceContentFor(c,!0);if(h)return h}if(k)return null;throw Error('"'+c+'" is not in the SourceMap.');};wd.prototype.generatedPositionFor=
function(c){for(var k=0;k<(this||Ye)._sections.length;k++){var d=(this||Ye)._sections[k];if(-1!==d.consumer._findSourceIndex(vg.getArg(c,"source"))){var h=d.consumer.generatedPositionFor(c);if(h)return{line:h.line+(d.generatedOffset.generatedLine-1),column:h.column+(d.generatedOffset.generatedLine===h.line?d.generatedOffset.generatedColumn-1:0)}}}return{line:null,column:null}};wd.prototype._parseMappings=function(c,k){(this||Ye).__generatedMappings=[];(this||Ye).__originalMappings=[];for(c=0;c<(this||
Ye)._sections.length;c++){k=(this||Ye)._sections[c];for(var d=k.consumer._generatedMappings,h=0;h<d.length;h++){var n=d[h],b=k.consumer._sources.at(n.source);b=vg.computeSourceURL(k.consumer.sourceRoot,b,(this||Ye)._sourceMapURL);(this||Ye)._sources.add(b);b=(this||Ye)._sources.indexOf(b);var e=null;n.name&&(e=k.consumer._names.at(n.name),(this||Ye)._names.add(e),e=(this||Ye)._names.indexOf(e));n={source:b,generatedLine:n.generatedLine+(k.generatedOffset.generatedLine-1),generatedColumn:n.generatedColumn+
(k.generatedOffset.generatedLine===n.generatedLine?k.generatedOffset.generatedColumn-1:0),originalLine:n.originalLine,originalColumn:n.originalColumn,name:e};(this||Ye).__generatedMappings.push(n);"number"===typeof n.originalLine&&(this||Ye).__originalMappings.push(n)}}tI((this||Ye).__generatedMappings,vg.compareByGeneratedPositionsDeflated);tI((this||Ye).__originalMappings,vg.compareByOriginalPositions)};var vj="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,eO=en,
fna=/(\r?\n)/;Ie.fromStringWithSourceMap=function(c,k,d){function h(r,v){if(null===r||void 0===r.source)n.add(v);else{var x=d?eO.join(d,r.source):r.source;n.add(new Ie(r.originalLine,r.originalColumn,x,v,r.name))}}var n=new Ie,b=c.split(fna),e=0,l=function(){var r=e<b.length?b[e++]:void 0,v=(e<b.length?b[e++]:void 0)||"";return r+v},a=1,f=0,m=null;k.eachMapping(function(r){if(null!==m)if(a<r.generatedLine)h(m,l()),a++,f=0;else{var v=b[e]||"",x=v.substr(0,r.generatedColumn-f);b[e]=v.substr(r.generatedColumn-
f);f=r.generatedColumn;h(m,x);m=r;return}for(;a<r.generatedLine;)n.add(l()),a++;f<r.generatedColumn&&(v=b[e]||"",n.add(v.substr(0,r.generatedColumn)),b[e]=v.substr(r.generatedColumn),f=r.generatedColumn);m=r},this||vj);e<b.length&&(m&&h(m,l()),n.add(b.splice(e).join("")));k.sources.forEach(function(r){var v=k.sourceContentFor(r);null!=v&&(null!=d&&(r=eO.join(d,r)),n.setSourceContent(r,v))});return n};Ie.prototype.add=function(c){if(Array.isArray(c))c.forEach(function(k){this.add(k)},this||vj);else if(c.$$$isSourceNode$$$||
"string"===typeof c)c&&(this||vj).children.push(c);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+c);return this||vj};Ie.prototype.prepend=function(c){if(Array.isArray(c))for(var k=c.length-1;0<=k;k--)this.prepend(c[k]);else if(c.$$$isSourceNode$$$||"string"===typeof c)(this||vj).children.unshift(c);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+c);return this||vj};Ie.prototype.walk=function(c){for(var k,
d=0,h=(this||vj).children.length;d<h;d++)k=(this||vj).children[d],k.$$$isSourceNode$$$?k.walk(c):""!==k&&c(k,{source:(this||vj).source,line:(this||vj).line,column:(this||vj).column,name:(this||vj).name})};Ie.prototype.join=function(c){var k,d=(this||vj).children.length;if(0<d){var h=[];for(k=0;k<d-1;k++)h.push((this||vj).children[k]),h.push(c);h.push((this||vj).children[k]);(this||vj).children=h}return this||vj};Ie.prototype.replaceRight=function(c,k){var d=(this||vj).children[(this||vj).children.length-
1];d.$$$isSourceNode$$$?d.replaceRight(c,k):"string"===typeof d?(this||vj).children[(this||vj).children.length-1]=d.replace(c,k):(this||vj).children.push("".replace(c,k));return this||vj};Ie.prototype.setSourceContent=function(c,k){(this||vj).sourceContents[eO.toSetString(c)]=k};Ie.prototype.walkSourceContents=function(c){for(var k=0,d=(this||vj).children.length;k<d;k++)(this||vj).children[k].$$$isSourceNode$$$&&(this||vj).children[k].walkSourceContents(c);var h=Object.keys((this||vj).sourceContents);
k=0;for(d=h.length;k<d;k++)c(eO.fromSetString(h[k]),(this||vj).sourceContents[h[k]])};Ie.prototype.toString=function(){var c="";this.walk(function(k){c+=k});return c};Ie.prototype.toStringWithSourceMap=function(c){var k="",d=1,h=0,n=new Bm(c),b=!1,e=null,l=null,a=null,f=null;this.walk(function(m,r){k+=m;null!==r.source&&null!==r.line&&null!==r.column?(e===r.source&&l===r.line&&a===r.column&&f===r.name||n.addMapping({source:r.source,original:{line:r.line,column:r.column},generated:{line:d,column:h},
name:r.name}),e=r.source,l=r.line,a=r.column,f=r.name,b=!0):b&&(n.addMapping({generated:{line:d,column:h}}),e=null,b=!1);for(var v=0,x=m.length;v<x;v++)10===m.charCodeAt(v)?(d++,h=0,v+1===x?(e=null,b=!1):b&&n.addMapping({source:r.source,original:{line:r.line,column:r.column},generated:{line:d,column:h},name:r.name})):h++});this.walkSourceContents(function(m,r){n.setSourceContent(m,r)});return{code:k,map:n}};var wn="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,np=
{};(function(){function c(){return{indent:null,base:null,parse:null,comment:!1,format:{indent:{style:"    ",base:0,adjustMultilineComment:!1},newline:"\n",space:" ",json:!1,renumber:!1,hexadecimal:!1,quotes:"single",escapeless:!1,compact:!1,parentheses:!0,semicolons:!0,safeConcatenation:!1,preserveBlankLines:!1},moz:{comprehensionExpressionStartsWithAssignment:!1,starlessGenerator:!1},sourceMap:null,sourceMapRoot:null,sourceMapWithCode:!1,directive:!1,raw:!0,verbatim:null,sourceCode:null}}function k(ma,
Ga){var Ja="";for(Ga|=0;0<Ga;Ga>>>=1,ma+=ma)Ga&1&&(Ja+=ma);return Ja}function d(ma){var Ga=ma.length;return Ga&&Zb.code.isLineTerminator(ma.charCodeAt(Ga-1))}function h(ma,Ga){for(var Ja in Ga)Ga.hasOwnProperty(Ja)&&(ma[Ja]=Ga[Ja]);return ma}function n(ma,Ga){function Ja(vd){return"object"===typeof vd&&vd instanceof Object&&!(vd instanceof RegExp)}var vb;for(vb in Ga)if(Ga.hasOwnProperty(vb)){var Vb=Ga[vb];Ja(Vb)?Ja(ma[vb])?n(ma[vb],Vb):ma[vb]=n({},Vb):ma[vb]=Vb}return ma}function b(ma,Ga){return 8232===
(ma&-2)?(Ga?"u":"\\u")+(8232===ma?"2028":"2029"):10===ma||13===ma?(Ga?"":"\\")+(10===ma?"n":"r"):String.fromCharCode(ma)}function e(ma,Ga){if(8===ma)return"\\b";if(12===ma)return"\\f";if(9===ma)return"\\t";var Ja=ma.toString(16).toUpperCase();return L||255<ma?"\\u"+"0000".slice(Ja.length)+Ja:0!==ma||Zb.code.isDecimalDigit(Ga)?11===ma?"\\x0B":"\\x"+"00".slice(Ja.length)+Ja:"\\0"}function l(ma){if(92===ma)return"\\\\";if(10===ma)return"\\n";if(13===ma)return"\\r";if(8232===ma)return"\\u2028";if(8233===
ma)return"\\u2029";throw Error("Incorrectly classified character");}function a(ma){var Ga,Ja="";var vb=0;for(Ga=ma.length;vb<Ga;++vb){var Vb=ma[vb];Ja+=Array.isArray(Vb)?a(Vb):Vb}return Ja}function f(ma,Ga){if(!Hb)return Array.isArray(ma)?a(ma):ma;if(null==Ga){if(ma instanceof da)return ma;Ga={}}return null==Ga.loc?new da(null,null,Hb,ma,Ga.name||null):new da(Ga.loc.start.line,Ga.loc.start.column,!0===Hb?Ga.loc.source||null:Hb,ma,Ga.name||null)}function m(){return ua?ua:" "}function r(ma,Ga){var Ja=
f(ma).toString();if(0===Ja.length)return[Ga];var vb=f(Ga).toString();if(0===vb.length)return[ma];Ja=Ja.charCodeAt(Ja.length-1);vb=vb.charCodeAt(0);return(43===Ja||45===Ja)&&Ja===vb||Zb.code.isIdentifierPartES5(Ja)&&Zb.code.isIdentifierPartES5(vb)||47===Ja&&105===vb?[ma,m(),Ga]:Zb.code.isWhiteSpace(Ja)||Zb.code.isLineTerminator(Ja)||Zb.code.isWhiteSpace(vb)||Zb.code.isLineTerminator(vb)?[ma,Ga]:[ma,ua,Ga]}function v(ma){var Ga=va;va+=za;ma(va);va=Ga}function x(ma,Ga){if("Line"===ma.type){if(d(ma.value))return"//"+
ma.value;Ga="//"+ma.value;Ob||(Ga+="\n");return Ga}if(pa.format.indent.adjustMultilineComment&&/[\n\r]/.test(ma.value)){var Ja,vb;ma=("/*"+ma.value+"*/").split(/\r\n|[\r\n]/);var Vb=Number.MAX_VALUE;var vd=1;for(Ja=ma.length;vd<Ja;++vd){var ud=ma[vd];for(vb=0;vb<ud.length&&Zb.code.isWhiteSpace(ud.charCodeAt(vb));)++vb;Vb>vb&&(Vb=vb)}"undefined"!==typeof Ga?(ud=va,"*"===ma[1][Vb]&&(Ga+=" "),va=Ga):(Vb&1&&--Vb,ud=va);vd=1;for(Ja=ma.length;vd<Ja;++vd)Ga=f([va,ma[vd].slice(Vb)]),ma[vd]=Hb?Ga.join(""):
Ga;va=ud;return ma.join("\n")}return"/*"+ma.value+"*/"}function y(ma,Ga){var Ja;if(ma.leadingComments&&0<ma.leadingComments.length){var vb=Ga;if(Ob){var Vb=ma.leadingComments[0];Ga=[];var vd=Vb.extendedRange;var ud=Vb.range;var Jc=fc.substring(vd[0],ud[0]);var Re=(Jc.match(/\n/g)||[]).length;0<Re?(Ga.push(k("\n",Re)),Ga.push([va,x(Vb)])):(Ga.push(Jc),Ga.push(x(Vb)));Re=ud;Jc=1;for(Ja=ma.leadingComments.length;Jc<Ja;Jc++)Vb=ma.leadingComments[Jc],ud=Vb.range,Re=fc.substring(Re[1],ud[0]),Re=(Re.match(/\n/g)||
[]).length,Ga.push(k("\n",Re)),Ga.push([va,x(Vb)]),Re=ud;Jc=fc.substring(ud[1],vd[1]);Re=(Jc.match(/\n/g)||[]).length;Ga.push(k("\n",Re))}else for(Vb=ma.leadingComments[0],Ga=[],ta&&ma.type===Hc.Program&&0===ma.body.length&&Ga.push("\n"),Ga.push(x(Vb)),d(f(Ga).toString())||Ga.push("\n"),Jc=1,Ja=ma.leadingComments.length;Jc<Ja;++Jc)Vb=ma.leadingComments[Jc],Vb=[x(Vb)],d(f(Vb).toString())||Vb.push("\n"),Ga.push([va,Vb]);Ga.push([va,vb])}if(ma.trailingComments)if(Ob)Vb=ma.trailingComments[0],vd=Vb.extendedRange,
ud=Vb.range,Jc=fc.substring(vd[0],ud[0]),Re=(Jc.match(/\n/g)||[]).length,0<Re?(Ga.push(k("\n",Re)),Ga.push([va,x(Vb)])):(Ga.push(Jc),Ga.push(x(Vb)));else{vb=!d(f(Ga).toString());Jc=f([va,Ga,za]).toString();for(Ja=Jc.length-1;0<=Ja&&!Zb.code.isLineTerminator(Jc.charCodeAt(Ja));--Ja);vd=k(" ",Jc.length-1-Ja);Jc=0;for(Ja=ma.trailingComments.length;Jc<Ja;++Jc)Vb=ma.trailingComments[Jc],vb?(Ga=0===Jc?[Ga,za]:[Ga,vd],Ga.push(x(Vb,vd))):Ga=[Ga,[va,x(Vb)]],Jc===Ja-1||d(f(Ga).toString())||(Ga=[Ga,"\n"])}return Ga}
function E(ma,Ga,Ja){for(var vb=0;ma<Ga;ma++)"\n"===fc[ma]&&vb++;for(ma=1;ma<vb;ma++)Ja.push(fa)}function F(ma,Ga,Ja){return Ga<Ja?["(",ma,")"]:ma}function I(ma){var Ga;var Ja=ma.split(/\r\n|\n/);ma=1;for(Ga=Ja.length;ma<Ga;ma++)Ja[ma]=fa+va+Ja[ma];return Ja}function J(){}function P(ma){return f(ma.name,ma)}function N(ma,Ga){return ma.async?"async"+(Ga?m():ua):""}function Y(ma){return ma.generator&&!pa.moz.starlessGenerator?"*"+ua:""}function W(ma){var Ga=ma.value,Ja="";Ga.async&&(Ja+=N(Ga,!ma.computed));
Ga.generator&&(Ja+=Y(Ga)?"*":"");return Ja}var da,va,za,L,Z,R,X,ja,fa,ua,gb,hb,ta,na,pa,La,Hb,fc,Ob;var Zb=sI;var Hc=EW.Syntax;var Gb={Sequence:0,Yield:1,Assignment:1,Conditional:2,ArrowFunction:2,LogicalOR:3,LogicalAND:4,BitwiseOR:5,BitwiseXOR:6,BitwiseAND:7,Equality:8,Relational:9,BitwiseSHIFT:10,Additive:11,Multiplicative:12,Exponentiation:13,Await:14,Unary:14,Postfix:15,OptionalChaining:16,Call:17,New:18,TaggedTemplate:19,Member:20,Primary:21};var dd={"||":Gb.LogicalOR,"&&":Gb.LogicalAND,"|":Gb.BitwiseOR,
"^":Gb.BitwiseXOR,"&":Gb.BitwiseAND,"==":Gb.Equality,"!=":Gb.Equality,"===":Gb.Equality,"!==":Gb.Equality,is:Gb.Equality,isnt:Gb.Equality,"<":Gb.Relational,">":Gb.Relational,"<=":Gb.Relational,">=":Gb.Relational,"in":Gb.Relational,"instanceof":Gb.Relational,"<<":Gb.BitwiseSHIFT,">>":Gb.BitwiseSHIFT,">>>":Gb.BitwiseSHIFT,"+":Gb.Additive,"-":Gb.Additive,"*":Gb.Multiplicative,"%":Gb.Multiplicative,"/":Gb.Multiplicative,"**":Gb.Exponentiation};J.prototype.maybeBlock=function(ma,Ga){var Ja,vb=this||wn;
var Vb=!pa.comment||!ma.leadingComments;if(ma.type===Hc.BlockStatement&&Vb)return[ua,this.generateStatement(ma,Ga)];if(ma.type===Hc.EmptyStatement&&Vb)return";";v(function(){Ja=[fa,[va,vb.generateStatement(ma,Ga)]]});return Ja};J.prototype.maybeBlockSuffix=function(ma,Ga){var Ja=d(f(Ga).toString());return ma.type!==Hc.BlockStatement||pa.comment&&ma.leadingComments||Ja?Ja?[Ga,va]:[Ga,fa,va]:[Ga,ua]};J.prototype.generatePattern=function(ma,Ga,Ja){return ma.type===Hc.Identifier?P(ma):this.generateExpression(ma,
Ga,Ja)};J.prototype.generateFunctionParams=function(ma){var Ga;var Ja=!1;if(ma.type!==Hc.ArrowFunctionExpression||ma.rest||ma.defaults&&0!==ma.defaults.length||1!==ma.params.length||ma.params[0].type!==Hc.Identifier){var vb=ma.type===Hc.ArrowFunctionExpression?[N(ma,!1)]:[];vb.push("(");ma.defaults&&(Ja=!0);var Vb=0;for(Ga=ma.params.length;Vb<Ga;++Vb)Ja&&ma.defaults[Vb]?vb.push(this.generateAssignment(ma.params[Vb],ma.defaults[Vb],"=",Gb.Assignment,7)):vb.push(this.generatePattern(ma.params[Vb],Gb.Assignment,
7)),Vb+1<Ga&&vb.push(","+ua);ma.rest&&(ma.params.length&&vb.push(","+ua),vb.push("..."),vb.push(P(ma.rest)));vb.push(")")}else vb=[N(ma,!0),P(ma.params[0])];return vb};J.prototype.generateFunctionBody=function(ma){var Ga=this.generateFunctionParams(ma);ma.type===Hc.ArrowFunctionExpression&&(Ga.push(ua),Ga.push("=>"));ma.expression?(Ga.push(ua),ma=this.generateExpression(ma.body,Gb.Assignment,7),"{"===ma.toString().charAt(0)&&(ma=["(",ma,")"]),Ga.push(ma)):Ga.push(this.maybeBlock(ma.body,9));return Ga};
J.prototype.generateIterationForStatement=function(ma,Ga,Ja){var vb=["for"+(Ga.await?m()+"await":"")+ua+"("],Vb=this||wn;v(function(){Ga.left.type===Hc.VariableDeclaration?v(function(){vb.push(Ga.left.kind+m());vb.push(Vb.generateStatement(Ga.left.declarations[0],0))}):vb.push(Vb.generateExpression(Ga.left,Gb.Call,7));vb=r(vb,ma);vb=[r(vb,Vb.generateExpression(Ga.right,Gb.Assignment,7)),")"]});vb.push(this.maybeBlock(Ga.body,Ja));return vb};J.prototype.generatePropertyKey=function(ma,Ga){var Ja=[];
Ga&&Ja.push("[");Ja.push(this.generateExpression(ma,Gb.Assignment,7));Ga&&Ja.push("]");return Ja};J.prototype.generateAssignment=function(ma,Ga,Ja,vb,Vb){Gb.Assignment<vb&&(Vb|=1);return F([this.generateExpression(ma,Gb.Call,Vb),ua+Ja+ua,this.generateExpression(Ga,Gb.Assignment,Vb)],Gb.Assignment,vb)};J.prototype.semicolon=function(ma){return!hb&&ma&32?"":";"};J.Statement={BlockStatement:function(ma,Ga){var Ja,vb,Vb=["{",fa],vd=this||wn;v(function(){0===ma.body.length&&Ob&&(Ja=ma.range,2<Ja[1]-Ja[0]&&
(vb=fc.substring(Ja[0]+1,Ja[1]-1),"\n"===vb[0]&&(Vb=["{"]),Vb.push(vb)));var ud;var Jc=1;Ga&8&&(Jc|=16);var Re=0;for(ud=ma.body.length;Re<ud;++Re){Ob&&(0===Re&&(ma.body[0].leadingComments&&(Ja=ma.body[0].leadingComments[0].extendedRange,vb=fc.substring(Ja[0],Ja[1]),"\n"===vb[0]&&(Vb=["{"])),ma.body[0].leadingComments||E(ma.range[0],ma.body[0].range[0],Vb)),0<Re&&(ma.body[Re-1].trailingComments||ma.body[Re].leadingComments||E(ma.body[Re-1].range[1],ma.body[Re].range[0],Vb)));Re===ud-1&&(Jc|=32);var Le=
ma.body[Re].leadingComments&&Ob?vd.generateStatement(ma.body[Re],Jc):[va,vd.generateStatement(ma.body[Re],Jc)];Vb.push(Le);d(f(Le).toString())||(Ob&&Re<ud-1?ma.body[Re+1].leadingComments||Vb.push(fa):Vb.push(fa));Ob&&Re===ud-1&&(ma.body[Re].trailingComments||E(ma.body[Re].range[1],ma.range[1],Vb))}});Vb.push([va,"}"]);return Vb},BreakStatement:function(ma,Ga){return ma.label?"break "+ma.label.name+this.semicolon(Ga):"break"+this.semicolon(Ga)},ContinueStatement:function(ma,Ga){return ma.label?"continue "+
ma.label.name+this.semicolon(Ga):"continue"+this.semicolon(Ga)},ClassBody:function(ma,Ga){var Ja=["{",fa],vb=this||wn;v(function(Vb){var vd;var ud=0;for(vd=ma.body.length;ud<vd;++ud)Ja.push(Vb),Ja.push(vb.generateExpression(ma.body[ud],Gb.Sequence,7)),ud+1<vd&&Ja.push(fa)});d(f(Ja).toString())||Ja.push(fa);Ja.push(va);Ja.push("}");return Ja},ClassDeclaration:function(ma,Ga){Ga=["class"];ma.id&&(Ga=r(Ga,this.generateExpression(ma.id,Gb.Sequence,7)));if(ma.superClass){var Ja=r("extends",this.generateExpression(ma.superClass,
Gb.Unary,7));Ga=r(Ga,Ja)}Ga.push(ua);Ga.push(this.generateStatement(ma.body,33));return Ga},DirectiveStatement:function(ma,Ga){if(pa.raw&&ma.raw)return ma.raw+this.semicolon(Ga);ma=ma.directive;var Ja;var vb="double"===X?'"':"'";var Vb=0;for(Ja=ma.length;Vb<Ja;++Vb){var vd=ma.charCodeAt(Vb);if(39===vd){vb='"';break}else if(34===vd){vb="'";break}else 92===vd&&++Vb}return vb+ma+vb+this.semicolon(Ga)},DoWhileStatement:function(ma,Ga){var Ja=r("do",this.maybeBlock(ma.body,1));Ja=this.maybeBlockSuffix(ma.body,
Ja);return r(Ja,["while"+ua+"(",this.generateExpression(ma.test,Gb.Sequence,7),")"+this.semicolon(Ga)])},CatchClause:function(ma,Ga){var Ja,vb=this||wn;v(function(){if(ma.param){if(Ja=["catch"+ua+"(",vb.generateExpression(ma.param,Gb.Sequence,7),")"],ma.guard){var Vb=vb.generateExpression(ma.guard,Gb.Sequence,7);Ja.splice(2,0," if ",Vb)}}else Ja=["catch"]});Ja.push(this.maybeBlock(ma.body,1));return Ja},DebuggerStatement:function(ma,Ga){return"debugger"+this.semicolon(Ga)},EmptyStatement:function(ma,
Ga){return";"},ExportDefaultDeclaration:function(ma,Ga){var Ja=["export"];var vb=Ga&32?33:1;Ja=r(Ja,"default");return Ja=J.Statement.hasOwnProperty(ma.declaration.type)?r(Ja,this.generateStatement(ma.declaration,vb)):r(Ja,this.generateExpression(ma.declaration,Gb.Assignment,7)+this.semicolon(Ga))},ExportNamedDeclaration:function(ma,Ga){var Ja=["export"],vb=this||wn;var Vb=Ga&32?33:1;if(ma.declaration)return r(Ja,this.generateStatement(ma.declaration,Vb));ma.specifiers&&(0===ma.specifiers.length?Ja=
r(Ja,"{"+ua+"}"):ma.specifiers[0].type===Hc.ExportBatchSpecifier?Ja=r(Ja,this.generateExpression(ma.specifiers[0],Gb.Sequence,7)):(Ja=r(Ja,"{"),v(function(vd){var ud;Ja.push(fa);var Jc=0;for(ud=ma.specifiers.length;Jc<ud;++Jc)Ja.push(vd),Ja.push(vb.generateExpression(ma.specifiers[Jc],Gb.Sequence,7)),Jc+1<ud&&Ja.push(","+fa)}),d(f(Ja).toString())||Ja.push(fa),Ja.push(va+"}")),ma.source?Ja=r(Ja,["from"+ua,this.generateExpression(ma.source,Gb.Sequence,7),this.semicolon(Ga)]):Ja.push(this.semicolon(Ga)));
return Ja},ExportAllDeclaration:function(ma,Ga){return["export"+ua,"*"+ua,"from"+ua,this.generateExpression(ma.source,Gb.Sequence,7),this.semicolon(Ga)]},ExpressionStatement:function(ma,Ga){function Ja(Jc){if("class"!==Jc.slice(0,5))return!1;Jc=Jc.charCodeAt(5);return 123===Jc||Zb.code.isWhiteSpace(Jc)||Zb.code.isLineTerminator(Jc)}function vb(Jc){if("function"!==Jc.slice(0,8))return!1;Jc=Jc.charCodeAt(8);return 40===Jc||Zb.code.isWhiteSpace(Jc)||42===Jc||Zb.code.isLineTerminator(Jc)}function Vb(Jc){var Re;
if("async"!==Jc.slice(0,5)||!Zb.code.isWhiteSpace(Jc.charCodeAt(5)))return!1;var Le=6;for(Re=Jc.length;Le<Re&&Zb.code.isWhiteSpace(Jc.charCodeAt(Le));++Le);if(Le===Re||"function"!==Jc.slice(Le,Le+8))return!1;Jc=Jc.charCodeAt(Le+8);return 40===Jc||Zb.code.isWhiteSpace(Jc)||42===Jc||Zb.code.isLineTerminator(Jc)}var vd=[this.generateExpression(ma.expression,Gb.Sequence,7)];var ud=f(vd).toString();123===ud.charCodeAt(0)||Ja(ud)||vb(ud)||Vb(ud)||na&&Ga&16&&ma.expression.type===Hc.Literal&&"string"===typeof ma.expression.value?
vd=["(",vd,")"+this.semicolon(Ga)]:vd.push(this.semicolon(Ga));return vd},ImportDeclaration:function(ma,Ga){var Ja=this||wn;if(0===ma.specifiers.length)return["import",ua,this.generateExpression(ma.source,Gb.Sequence,7),this.semicolon(Ga)];var vb=["import"];var Vb=0;ma.specifiers[Vb].type===Hc.ImportDefaultSpecifier&&(vb=r(vb,[this.generateExpression(ma.specifiers[Vb],Gb.Sequence,7)]),++Vb);ma.specifiers[Vb]&&(0!==Vb&&vb.push(","),ma.specifiers[Vb].type===Hc.ImportNamespaceSpecifier?vb=r(vb,[ua,this.generateExpression(ma.specifiers[Vb],
Gb.Sequence,7)]):(vb.push(ua+"{"),1===ma.specifiers.length-Vb?(vb.push(ua),vb.push(this.generateExpression(ma.specifiers[Vb],Gb.Sequence,7)),vb.push(ua+"}"+ua)):(v(function(vd){var ud;vb.push(fa);var Jc=Vb;for(ud=ma.specifiers.length;Jc<ud;++Jc)vb.push(vd),vb.push(Ja.generateExpression(ma.specifiers[Jc],Gb.Sequence,7)),Jc+1<ud&&vb.push(","+fa)}),d(f(vb).toString())||vb.push(fa),vb.push(va+"}"+ua))));return vb=r(vb,["from"+ua,this.generateExpression(ma.source,Gb.Sequence,7),this.semicolon(Ga)])},VariableDeclarator:function(ma,
Ga){Ga=Ga&1?7:6;return ma.init?[this.generateExpression(ma.id,Gb.Assignment,Ga),ua,"=",ua,this.generateExpression(ma.init,Gb.Assignment,Ga)]:this.generatePattern(ma.id,Gb.Assignment,Ga)},VariableDeclaration:function(ma,Ga){function Ja(){vd=ma.declarations[0];pa.comment&&vd.leadingComments?(Jc.push("\n"),Jc.push([va,ud.generateStatement(vd,Re)])):(Jc.push(m()),Jc.push(ud.generateStatement(vd,Re)));vb=1;for(Vb=ma.declarations.length;vb<Vb;++vb)vd=ma.declarations[vb],pa.comment&&vd.leadingComments?(Jc.push(","+
fa),Jc.push([va,ud.generateStatement(vd,Re)])):(Jc.push(","+ua),Jc.push(ud.generateStatement(vd,Re)))}var vb,Vb,vd,ud=this||wn;var Jc=[ma.kind];var Re=Ga&1?1:0;1<ma.declarations.length?v(Ja):Ja();Jc.push(this.semicolon(Ga));return Jc},ThrowStatement:function(ma,Ga){return[r("throw",this.generateExpression(ma.argument,Gb.Sequence,7)),this.semicolon(Ga)]},TryStatement:function(ma,Ga){var Ja;Ga=["try",this.maybeBlock(ma.block,1)];Ga=this.maybeBlockSuffix(ma.block,Ga);if(ma.handlers){var vb=0;for(Ja=
ma.handlers.length;vb<Ja;++vb)if(Ga=r(Ga,this.generateStatement(ma.handlers[vb],1)),ma.finalizer||vb+1!==Ja)Ga=this.maybeBlockSuffix(ma.handlers[vb].body,Ga)}else{var Vb=ma.guardedHandlers||[];vb=0;for(Ja=Vb.length;vb<Ja;++vb)if(Ga=r(Ga,this.generateStatement(Vb[vb],1)),ma.finalizer||vb+1!==Ja)Ga=this.maybeBlockSuffix(Vb[vb].body,Ga);if(ma.handler)if(Array.isArray(ma.handler))for(vb=0,Ja=ma.handler.length;vb<Ja;++vb){if(Ga=r(Ga,this.generateStatement(ma.handler[vb],1)),ma.finalizer||vb+1!==Ja)Ga=
this.maybeBlockSuffix(ma.handler[vb].body,Ga)}else Ga=r(Ga,this.generateStatement(ma.handler,1)),ma.finalizer&&(Ga=this.maybeBlockSuffix(ma.handler.body,Ga))}ma.finalizer&&(Ga=r(Ga,["finally",this.maybeBlock(ma.finalizer,1)]));return Ga},SwitchStatement:function(ma,Ga){var Ja,vb,Vb=this||wn;v(function(){Ja=["switch"+ua+"(",Vb.generateExpression(ma.discriminant,Gb.Sequence,7),")"+ua+"{"+fa]});if(ma.cases){var vd=1;var ud=0;for(vb=ma.cases.length;ud<vb;++ud)ud===vb-1&&(vd|=32),Ga=[va,this.generateStatement(ma.cases[ud],
vd)],Ja.push(Ga),d(f(Ga).toString())||Ja.push(fa)}Ja.push([va,"}"]);return Ja},SwitchCase:function(ma,Ga){var Ja,vb,Vb,vd,ud,Jc=this||wn;v(function(){Ja=ma.test?[r("case",Jc.generateExpression(ma.test,Gb.Sequence,7)),":"]:["default:"];Vb=0;(vd=ma.consequent.length)&&ma.consequent[0].type===Hc.BlockStatement&&(vb=Jc.maybeBlock(ma.consequent[0],1),Ja.push(vb),Vb=1);Vb===vd||d(f(Ja).toString())||Ja.push(fa);for(ud=1;Vb<vd;++Vb)Vb===vd-1&&Ga&32&&(ud|=32),vb=[va,Jc.generateStatement(ma.consequent[Vb],
ud)],Ja.push(vb),Vb+1===vd||d(f(vb).toString())||Ja.push(fa)});return Ja},IfStatement:function(ma,Ga){var Ja=this||wn;v(function(){Vb=["if"+ua+"(",Ja.generateExpression(ma.test,Gb.Sequence,7),")"]});var vb=1;Ga&32&&(vb|=32);if(ma.alternate){Vb.push(this.maybeBlock(ma.consequent,1));var Vb=this.maybeBlockSuffix(ma.consequent,Vb);Vb=ma.alternate.type===Hc.IfStatement?r(Vb,["else ",this.generateStatement(ma.alternate,vb)]):r(Vb,r("else",this.maybeBlock(ma.alternate,vb)))}else Vb.push(this.maybeBlock(ma.consequent,
vb));return Vb},ForStatement:function(ma,Ga){var Ja,vb=this||wn;v(function(){Ja=["for"+ua+"("];ma.init?ma.init.type===Hc.VariableDeclaration?Ja.push(vb.generateStatement(ma.init,0)):(Ja.push(vb.generateExpression(ma.init,Gb.Sequence,6)),Ja.push(";")):Ja.push(";");ma.test&&(Ja.push(ua),Ja.push(vb.generateExpression(ma.test,Gb.Sequence,7)));Ja.push(";");ma.update&&(Ja.push(ua),Ja.push(vb.generateExpression(ma.update,Gb.Sequence,7)));Ja.push(")")});Ja.push(this.maybeBlock(ma.body,Ga&32?33:1));return Ja},
ForInStatement:function(ma,Ga){return this.generateIterationForStatement("in",ma,Ga&32?33:1)},ForOfStatement:function(ma,Ga){return this.generateIterationForStatement("of",ma,Ga&32?33:1)},LabeledStatement:function(ma,Ga){return[ma.label.name+":",this.maybeBlock(ma.body,Ga&32?33:1)]},Program:function(ma,Ga){var Ja;var vb=ma.body.length;Ga=[ta&&0<vb?"\n":""];var Vb=17;for(Ja=0;Ja<vb;++Ja){ta||Ja!==vb-1||(Vb|=32);Ob&&(0===Ja&&(ma.body[0].leadingComments||E(ma.range[0],ma.body[Ja].range[0],Ga)),0<Ja&&
(ma.body[Ja-1].trailingComments||ma.body[Ja].leadingComments||E(ma.body[Ja-1].range[1],ma.body[Ja].range[0],Ga)));var vd=[va,this.generateStatement(ma.body[Ja],Vb)];Ga.push(vd);Ja+1<vb&&!d(f(vd).toString())&&(Ob?ma.body[Ja+1].leadingComments||Ga.push(fa):Ga.push(fa));Ob&&Ja===vb-1&&(ma.body[Ja].trailingComments||E(ma.body[Ja].range[1],ma.range[1],Ga))}return Ga},FunctionDeclaration:function(ma,Ga){return[N(ma,!0),"function",Y(ma)||m(),ma.id?P(ma.id):"",this.generateFunctionBody(ma)]},ReturnStatement:function(ma,
Ga){return ma.argument?[r("return",this.generateExpression(ma.argument,Gb.Sequence,7)),this.semicolon(Ga)]:["return"+this.semicolon(Ga)]},WhileStatement:function(ma,Ga){var Ja,vb=this||wn;v(function(){Ja=["while"+ua+"(",vb.generateExpression(ma.test,Gb.Sequence,7),")"]});Ja.push(this.maybeBlock(ma.body,Ga&32?33:1));return Ja},WithStatement:function(ma,Ga){var Ja,vb=this||wn;v(function(){Ja=["with"+ua+"(",vb.generateExpression(ma.object,Gb.Sequence,7),")"]});Ja.push(this.maybeBlock(ma.body,Ga&32?33:
1));return Ja}};h(J.prototype,J.Statement);J.Expression={SequenceExpression:function(ma,Ga,Ja){var vb;Gb.Sequence<Ga&&(Ja|=1);var Vb=[];var vd=0;for(vb=ma.expressions.length;vd<vb;++vd)Vb.push(this.generateExpression(ma.expressions[vd],Gb.Assignment,Ja)),vd+1<vb&&Vb.push(","+ua);return F(Vb,Gb.Sequence,Ga)},AssignmentExpression:function(ma,Ga,Ja){return this.generateAssignment(ma.left,ma.right,ma.operator,Ga,Ja)},ArrowFunctionExpression:function(ma,Ga,Ja){return F(this.generateFunctionBody(ma),Gb.ArrowFunction,
Ga)},ConditionalExpression:function(ma,Ga,Ja){Gb.Conditional<Ga&&(Ja|=1);return F([this.generateExpression(ma.test,Gb.LogicalOR,Ja),ua+"?"+ua,this.generateExpression(ma.consequent,Gb.Assignment,Ja),ua+":"+ua,this.generateExpression(ma.alternate,Gb.Assignment,Ja)],Gb.Conditional,Ga)},LogicalExpression:function(ma,Ga,Ja){return this.BinaryExpression(ma,Ga,Ja)},BinaryExpression:function(ma,Ga,Ja){var vb=dd[ma.operator];var Vb="**"===ma.operator?Gb.Postfix:vb;var vd="**"===ma.operator?vb:vb+1;vb<Ga&&
(Ja|=1);Vb=this.generateExpression(ma.left,Vb,Ja);var ud=Vb.toString();ud=47===ud.charCodeAt(ud.length-1)&&Zb.code.isIdentifierPartES5(ma.operator.charCodeAt(0))?[Vb,m(),ma.operator]:r(Vb,ma.operator);Vb=this.generateExpression(ma.right,vd,Ja);"/"===ma.operator&&"/"===Vb.toString().charAt(0)||"<"===ma.operator.slice(-1)&&"!--"===Vb.toString().slice(0,3)?(ud.push(m()),ud.push(Vb)):ud=r(ud,Vb);return"in"!==ma.operator||Ja&1?F(ud,vb,Ga):["(",ud,")"]},CallExpression:function(ma,Ga,Ja){var vb;var Vb=[this.generateExpression(ma.callee,
Gb.Call,3)];ma.optional&&Vb.push("?.");Vb.push("(");var vd=0;for(vb=ma.arguments.length;vd<vb;++vd)Vb.push(this.generateExpression(ma.arguments[vd],Gb.Assignment,7)),vd+1<vb&&Vb.push(","+ua);Vb.push(")");return Ja&2?F(Vb,Gb.Call,Ga):["(",Vb,")"]},ChainExpression:function(ma,Ga,Ja){Gb.OptionalChaining<Ga&&(Ja|=2);ma=this.generateExpression(ma.expression,Gb.OptionalChaining,Ja);return F(ma,Gb.OptionalChaining,Ga)},NewExpression:function(ma,Ga,Ja){var vb=ma.arguments.length;var Vb=r("new",this.generateExpression(ma.callee,
Gb.New,Ja&4&&!gb&&0===vb?5:1));if(!(Ja&4)||gb||0<vb){Vb.push("(");for(Ja=0;Ja<vb;++Ja)Vb.push(this.generateExpression(ma.arguments[Ja],Gb.Assignment,7)),Ja+1<vb&&Vb.push(","+ua);Vb.push(")")}return F(Vb,Gb.New,Ga)},MemberExpression:function(ma,Ga,Ja){var vb=[this.generateExpression(ma.object,Gb.Call,Ja&2?3:1)];ma.computed?(ma.optional&&vb.push("?."),vb.push("["),vb.push(this.generateExpression(ma.property,Gb.Sequence,Ja&2?7:5)),vb.push("]")):(ma.optional||ma.object.type!==Hc.Literal||"number"!==typeof ma.object.value||
(Ja=f(vb).toString(),0>Ja.indexOf(".")&&!/[eExX]/.test(Ja)&&Zb.code.isDecimalDigit(Ja.charCodeAt(Ja.length-1))&&!(2<=Ja.length&&48===Ja.charCodeAt(0))&&vb.push(" ")),vb.push(ma.optional?"?.":"."),vb.push(P(ma.property)));return F(vb,Gb.Member,Ga)},MetaProperty:function(ma,Ga,Ja){Ja=[];Ja.push("string"===typeof ma.meta?ma.meta:P(ma.meta));Ja.push(".");Ja.push("string"===typeof ma.property?ma.property:P(ma.property));return F(Ja,Gb.Member,Ga)},UnaryExpression:function(ma,Ga,Ja){var vb=this.generateExpression(ma.argument,
Gb.Unary,7);if(""===ua)Ja=r(ma.operator,vb);else if(Ja=[ma.operator],2<ma.operator.length)Ja=r(Ja,vb);else{ma=f(Ja).toString();var Vb=ma.charCodeAt(ma.length-1);ma=vb.toString().charCodeAt(0);((43===Vb||45===Vb)&&Vb===ma||Zb.code.isIdentifierPartES5(Vb)&&Zb.code.isIdentifierPartES5(ma))&&Ja.push(m());Ja.push(vb)}return F(Ja,Gb.Unary,Ga)},YieldExpression:function(ma,Ga,Ja){Ja=ma.delegate?"yield*":"yield";ma.argument&&(Ja=r(Ja,this.generateExpression(ma.argument,Gb.Yield,7)));return F(Ja,Gb.Yield,Ga)},
AwaitExpression:function(ma,Ga,Ja){ma=r(ma.all?"await*":"await",this.generateExpression(ma.argument,Gb.Await,7));return F(ma,Gb.Await,Ga)},UpdateExpression:function(ma,Ga,Ja){return ma.prefix?F([ma.operator,this.generateExpression(ma.argument,Gb.Unary,7)],Gb.Unary,Ga):F([this.generateExpression(ma.argument,Gb.Postfix,7),ma.operator],Gb.Postfix,Ga)},FunctionExpression:function(ma,Ga,Ja){Ga=[N(ma,!0),"function"];ma.id?(Ga.push(Y(ma)||m()),Ga.push(P(ma.id))):Ga.push(Y(ma)||ua);Ga.push(this.generateFunctionBody(ma));
return Ga},ArrayPattern:function(ma,Ga,Ja){return this.ArrayExpression(ma,Ga,Ja,!0)},ArrayExpression:function(ma,Ga,Ja,vb){var Vb=this||wn;if(!ma.elements.length)return"[]";var vd=vb?!1:1<ma.elements.length;var ud=["[",vd?fa:""];v(function(Jc){var Re;var Le=0;for(Re=ma.elements.length;Le<Re;++Le)ma.elements[Le]?(ud.push(vd?Jc:""),ud.push(Vb.generateExpression(ma.elements[Le],Gb.Assignment,7))):(vd&&ud.push(Jc),Le+1===Re&&ud.push(",")),Le+1<Re&&ud.push(","+(vd?fa:ua))});vd&&!d(f(ud).toString())&&ud.push(fa);
ud.push(vd?va:"");ud.push("]");return ud},RestElement:function(ma,Ga,Ja){return"..."+this.generatePattern(ma.argument)},ClassExpression:function(ma,Ga,Ja){Ga=["class"];ma.id&&(Ga=r(Ga,this.generateExpression(ma.id,Gb.Sequence,7)));ma.superClass&&(Ja=r("extends",this.generateExpression(ma.superClass,Gb.Unary,7)),Ga=r(Ga,Ja));Ga.push(ua);Ga.push(this.generateStatement(ma.body,33));return Ga},MethodDefinition:function(ma,Ga,Ja){Ga=ma["static"]?["static"+ua]:[];ma="get"===ma.kind||"set"===ma.kind?[r(ma.kind,
this.generatePropertyKey(ma.key,ma.computed)),this.generateFunctionBody(ma.value)]:[W(ma),this.generatePropertyKey(ma.key,ma.computed),this.generateFunctionBody(ma.value)];return r(Ga,ma)},Property:function(ma,Ga,Ja){return"get"===ma.kind||"set"===ma.kind?[ma.kind,m(),this.generatePropertyKey(ma.key,ma.computed),this.generateFunctionBody(ma.value)]:ma.shorthand?"AssignmentPattern"===ma.value.type?this.AssignmentPattern(ma.value,Gb.Sequence,7):this.generatePropertyKey(ma.key,ma.computed):ma.method?
[W(ma),this.generatePropertyKey(ma.key,ma.computed),this.generateFunctionBody(ma.value)]:[this.generatePropertyKey(ma.key,ma.computed),":"+ua,this.generateExpression(ma.value,Gb.Assignment,7)]},ObjectExpression:function(ma,Ga,Ja){var vb,Vb,vd=this||wn;if(!ma.properties.length)return"{}";var ud=1<ma.properties.length;v(function(){Vb=vd.generateExpression(ma.properties[0],Gb.Sequence,7)});if(!ud&&!/[\r\n]/g.test(f(Vb).toString()))return["{",ua,Vb,ua,"}"];v(function(Jc){var Re;vb=["{",fa,Jc,Vb];if(ud){vb.push(","+
fa);var Le=1;for(Re=ma.properties.length;Le<Re;++Le)vb.push(Jc),vb.push(vd.generateExpression(ma.properties[Le],Gb.Sequence,7)),Le+1<Re&&vb.push(","+fa)}});d(f(vb).toString())||vb.push(fa);vb.push(va);vb.push("}");return vb},AssignmentPattern:function(ma,Ga,Ja){return this.generateAssignment(ma.left,ma.right,"=",Ga,Ja)},ObjectPattern:function(ma,Ga,Ja){var vb=this||wn;if(!ma.properties.length)return"{}";var Vb=!1;if(1===ma.properties.length){var vd=ma.properties[0];vd.type===Hc.Property&&vd.value.type!==
Hc.Identifier&&(Vb=!0)}else for(Ga=0,Ja=ma.properties.length;Ga<Ja;++Ga)if(vd=ma.properties[Ga],vd.type===Hc.Property&&!vd.shorthand){Vb=!0;break}var ud=["{",Vb?fa:""];v(function(Jc){var Re;var Le=0;for(Re=ma.properties.length;Le<Re;++Le)ud.push(Vb?Jc:""),ud.push(vb.generateExpression(ma.properties[Le],Gb.Sequence,7)),Le+1<Re&&ud.push(","+(Vb?fa:ua))});Vb&&!d(f(ud).toString())&&ud.push(fa);ud.push(Vb?va:"");ud.push("}");return ud},ThisExpression:function(ma,Ga,Ja){return"this"},Super:function(ma,
Ga,Ja){return"super"},Identifier:function(ma,Ga,Ja){return P(ma)},ImportDefaultSpecifier:function(ma,Ga,Ja){return P(ma.id||ma.local)},ImportNamespaceSpecifier:function(ma,Ga,Ja){Ga=["*"];(ma=ma.id||ma.local)&&Ga.push(ua+"as"+m()+P(ma));return Ga},ImportSpecifier:function(ma,Ga,Ja){Ga=ma.imported;Ja=[Ga.name];(ma=ma.local)&&ma.name!==Ga.name&&Ja.push(m()+"as"+m()+P(ma));return Ja},ExportSpecifier:function(ma,Ga,Ja){Ga=ma.local;Ja=[Ga.name];(ma=ma.exported)&&ma.name!==Ga.name&&Ja.push(m()+"as"+m()+
P(ma));return Ja},Literal:function(ma,Ga,Ja){if(ma.hasOwnProperty("raw")&&La&&pa.raw)try{var vb=La(ma.raw).body[0].expression;if(vb.type===Hc.Literal&&vb.value===ma.value)return ma.raw}catch(Le){}if(ma.regex)return"/"+ma.regex.pattern+"/"+ma.regex.flags;if(null===ma.value)return"null";if("string"===typeof ma.value){ma=ma.value;Ga="";var Vb=0,vd=0,ud;Ja=0;for(vb=ma.length;Ja<vb;++Ja){var Jc=ma.charCodeAt(Ja);if(39===Jc)++Vb;else if(34===Jc)++vd;else if(47===Jc&&L)Ga+="\\";else if(Zb.code.isLineTerminator(Jc)||
92===Jc){Ga+=l(Jc);continue}else if(!Zb.code.isIdentifierPartES5(Jc)&&(L&&32>Jc||!L&&!ja&&(32>Jc||126<Jc))){Ga+=e(Jc,ma.charCodeAt(Ja+1));continue}Ga+=String.fromCharCode(Jc)}var Re=(ud=!("double"===X||"auto"===X&&vd<Vb))?"'":'"';if(ud?Vb:vd){ma=Ga;Ga=Re;Ja=0;for(vb=ma.length;Ja<vb;++Ja){Jc=ma.charCodeAt(Ja);if(39===Jc&&ud||34===Jc&&!ud)Ga+="\\";Ga+=String.fromCharCode(Jc)}ma=Ga+Re}else ma=Re+Ga+Re;return ma}if("number"===typeof ma.value){ma=ma.value;if(ma!==ma)throw Error("Numeric literal whose value is NaN");
if(0>ma||0===ma&&0>1/ma)throw Error("Numeric literal whose value is negative");if(ma===1/0)ma=L?"null":Z?"1e400":"1e+400";else{Ga=""+ma;if(Z&&!(3>Ga.length)){Ja=Ga.indexOf(".");L||48!==Ga.charCodeAt(0)||1!==Ja||(Ja=0,Ga=Ga.slice(1));vb=Ga;Ga=Ga.replace("e+","e");Jc=0;0<(Vb=vb.indexOf("e"))&&(Jc=+vb.slice(Vb+1),vb=vb.slice(0,Vb));0<=Ja&&(Jc-=vb.length-Ja-1,vb=+(vb.slice(0,Ja)+vb.slice(Ja+1))+"");for(Vb=0;48===vb.charCodeAt(vb.length+Vb-1);)--Vb;0!==Vb&&(Jc-=Vb,vb=vb.slice(0,Vb));0!==Jc&&(vb+="e"+Jc);
(vb.length<Ga.length||R&&1E12<ma&&Math.floor(ma)===ma&&(vb="0x"+ma.toString(16)).length<Ga.length)&&+vb===ma&&(Ga=vb)}ma=Ga}return ma}if("boolean"===typeof ma.value)return ma.value?"true":"false";ma=ma.value;Ga=ma.toString();if(ma.source)if(Ja=Ga.match(/\/([^/]*)$/)){Ja=Ja[1];Ga="";ud=vd=!1;vb=0;for(Jc=ma.source.length;vb<Jc;++vb)Vb=ma.source.charCodeAt(vb),ud?(Ga+=b(Vb,ud),ud=!1):(vd?93===Vb&&(vd=!1):47===Vb?Ga+="\\":91===Vb&&(vd=!0),Ga+=b(Vb,ud),ud=92===Vb);ma="/"+Ga+"/"+Ja}else ma=Ga;else ma=Ga;
return ma},GeneratorExpression:function(ma,Ga,Ja){return this.ComprehensionExpression(ma,Ga,Ja)},ComprehensionExpression:function(ma,Ga,Ja){var vb,Vb,vd=this||wn;var ud=ma.type===Hc.GeneratorExpression?["("]:["["];if(pa.moz.comprehensionExpressionStartsWithAssignment){var Jc=this.generateExpression(ma.body,Gb.Assignment,7);ud.push(Jc)}ma.blocks&&v(function(){vb=0;for(Vb=ma.blocks.length;vb<Vb;++vb)Jc=vd.generateExpression(ma.blocks[vb],Gb.Sequence,7),0<vb||pa.moz.comprehensionExpressionStartsWithAssignment?
ud=r(ud,Jc):ud.push(Jc)});ma.filter&&(ud=r(ud,"if"+ua),Jc=this.generateExpression(ma.filter,Gb.Sequence,7),ud=r(ud,["(",Jc,")"]));pa.moz.comprehensionExpressionStartsWithAssignment||(Jc=this.generateExpression(ma.body,Gb.Assignment,7),ud=r(ud,Jc));ud.push(ma.type===Hc.GeneratorExpression?")":"]");return ud},ComprehensionBlock:function(ma,Ga,Ja){Ga=ma.left.type===Hc.VariableDeclaration?[ma.left.kind,m(),this.generateStatement(ma.left.declarations[0],0)]:this.generateExpression(ma.left,Gb.Call,7);Ga=
r(Ga,ma.of?"of":"in");Ga=r(Ga,this.generateExpression(ma.right,Gb.Sequence,7));return["for"+ua+"(",Ga,")"]},SpreadElement:function(ma,Ga,Ja){return["...",this.generateExpression(ma.argument,Gb.Assignment,7)]},TaggedTemplateExpression:function(ma,Ga,Ja){var vb=3;Ja&2||(vb=1);ma=[this.generateExpression(ma.tag,Gb.Call,vb),this.generateExpression(ma.quasi,Gb.Primary,4)];return F(ma,Gb.TaggedTemplate,Ga)},TemplateElement:function(ma,Ga,Ja){return ma.value.raw},TemplateLiteral:function(ma,Ga,Ja){var vb;
Ga=["`"];Ja=0;for(vb=ma.quasis.length;Ja<vb;++Ja)Ga.push(this.generateExpression(ma.quasis[Ja],Gb.Primary,7)),Ja+1<vb&&(Ga.push("${"+ua),Ga.push(this.generateExpression(ma.expressions[Ja],Gb.Sequence,7)),Ga.push(ua+"}"));Ga.push("`");return Ga},ModuleSpecifier:function(ma,Ga,Ja){return this.Literal(ma,Ga,Ja)},ImportExpression:function(ma,Ga,Ja){return F(["import(",this.generateExpression(ma.source,Gb.Assignment,7),")"],Gb.Call,Ga)}};h(J.prototype,J.Expression);J.prototype.generateExpression=function(ma,
Ga,Ja){var vb=ma.type||Hc.Property;if(pa.verbatim&&ma.hasOwnProperty(pa.verbatim))return vb=ma[pa.verbatim],"string"===typeof vb?Ja=F(I(vb),Gb.Sequence,Ga):(Ja=I(vb.content),vb=null!=vb.precedence?vb.precedence:Gb.Sequence,Ja=F(Ja,vb,Ga)),f(Ja,ma);Ga=this[vb](ma,Ga,Ja);pa.comment&&(Ga=y(ma,Ga));return f(Ga,ma)};J.prototype.generateStatement=function(ma,Ga){Ga=this[ma.type](ma,Ga);pa.comment&&(Ga=y(ma,Ga));var Ja=f(Ga).toString();ma.type!==Hc.Program||ta||""!==fa||"\n"!==Ja.charAt(Ja.length-1)||(Ga=
Hb?f(Ga).replaceRight(/\s+$/,""):Ja.replace(/\s+$/,""));return f(Ga,ma)};var Gd=c().format;np.version="2.0.0";np.generate=function(ma,Ga){var Ja=c();null!=Ga?("string"===typeof Ga.indent&&(Ja.format.indent.style=Ga.indent),"number"===typeof Ga.base&&(Ja.format.indent.base=Ga.base),Ga=n(Ja,Ga),za=Ga.format.indent.style,va="string"===typeof Ga.base?Ga.base:k(za,Ga.format.indent.base)):(Ga=Ja,za=Ga.format.indent.style,va=k(za,Ga.format.indent.base));L=Ga.format.json;Z=Ga.format.renumber;R=L?!1:Ga.format.hexadecimal;
X=L?"double":Ga.format.quotes;ja=Ga.format.escapeless;fa=Ga.format.newline;ua=Ga.format.space;Ga.format.compact&&(fa=ua=za=va="");gb=Ga.format.parentheses;hb=Ga.format.semicolons;ta=Ga.format.safeConcatenation;na=Ga.directive;La=L?null:Ga.parse;Hb=Ga.sourceMap;fc=Ga.sourceCode;Ob=Ga.format.preserveBlankLines&&null!==fc;pa=Ga;Hb&&(da=np.browser?wn.sourceMap.SourceNode:Ie);Ja=new J;if(J.Statement.hasOwnProperty(ma.type))ma=Ja.generateStatement(ma,1);else if(J.Expression.hasOwnProperty(ma.type))ma=Ja.generateExpression(ma,
Gb.Sequence,7);else throw Error("Unknown node type: "+ma.type);if(!Hb)return ma={code:ma.toString(),map:null},Ga.sourceMapWithCode?ma:ma.code;ma=ma.toStringWithSourceMap({file:Ga.file,sourceRoot:Ga.sourceMapRoot});Ga.sourceContent&&ma.map.setSourceContent(Ga.sourceMap,Ga.sourceContent);return Ga.sourceMapWithCode?ma:ma.map.toString()};np.attachComments=EW.attachComments;np.Precedence=n({},Gb);np.browser=!1;np.FORMAT_MINIFY={indent:{style:"",base:0},renumber:!0,hexadecimal:!0,quotes:"auto",escapeless:!0,
compact:!0,parentheses:!1,semicolons:!1};np.FORMAT_DEFAULTS=Gd})();var gna=Object.freeze({__proto__:null,"default":np,FORMAT_DEFAULTS:np.FORMAT_DEFAULTS,FORMAT_MINIFY:np.FORMAT_MINIFY,Precedence:np.Precedence,attachComments:np.attachComments,browser:np.browser,generate:np.generate,version:np.version}),jr=lively.FreezerRuntime.recorderFor("lively.ast/lib/stringify.js");jr.stringify=Ve;jr.obj=ng;jr.escodegen=gna;jr.es=jr.escodegen.escodegen||jr.escodegen;var wF=jr.es;jr.escodegen=wF;jr.es=wF;jr.default=
Ve;var IW={3:"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile",5:"class enum extends super const export import",6:"enum",strict:"implements interface let package private protected public static yield",strictBind:"eval arguments"},hna={5:"break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this",
"5module":"break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this export import",6:"break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this const class extends export import super"},ina=/^in(stanceof)?$/,JW="\u00aa\u00b5\u00ba\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u037f\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u052f\u0531-\u0556\u0559\u0560-\u0588\u05d0-\u05ea\u05ef-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u0860-\u086a\u08a0-\u08b4\u08b6-\u08c7\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u09fc\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0af9\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c39\u0c3d\u0c58-\u0c5a\u0c60\u0c61\u0c80\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d04-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d54-\u0d56\u0d5f-\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e86-\u0e8a\u0e8c-\u0ea3\u0ea5\u0ea7-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f5\u13f8-\u13fd\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f8\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1878\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191e\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19b0-\u19c9\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1c80-\u1c88\u1c90-\u1cba\u1cbd-\u1cbf\u1ce9-\u1cec\u1cee-\u1cf3\u1cf5\u1cf6\u1cfa\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2118-\u211d\u2124\u2126\u2128\u212a-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303c\u3041-\u3096\u309b-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312f\u3131-\u318e\u31a0-\u31bf\u31f0-\u31ff\u3400-\u4dbf\u4e00-\u9ffc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua69d\ua6a0-\ua6ef\ua717-\ua71f\ua722-\ua788\ua78b-\ua7bf\ua7c2-\ua7ca\ua7f5-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua8fd\ua8fe\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\ua9e0-\ua9e4\ua9e6-\ua9ef\ua9fa-\ua9fe\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa7e-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uab30-\uab5a\uab5c-\uab69\uab70-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc",
v9="\u200c\u200d\u00b7\u0300-\u036f\u0387\u0483-\u0487\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u0669\u0670\u06d6-\u06dc\u06df-\u06e4\u06e7\u06e8\u06ea-\u06ed\u06f0-\u06f9\u0711\u0730-\u074a\u07a6-\u07b0\u07c0-\u07c9\u07eb-\u07f3\u07fd\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0859-\u085b\u08d3-\u08e1\u08e3-\u0903\u093a-\u093c\u093e-\u094f\u0951-\u0957\u0962\u0963\u0966-\u096f\u0981-\u0983\u09bc\u09be-\u09c4\u09c7\u09c8\u09cb-\u09cd\u09d7\u09e2\u09e3\u09e6-\u09ef\u09fe\u0a01-\u0a03\u0a3c\u0a3e-\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a66-\u0a71\u0a75\u0a81-\u0a83\u0abc\u0abe-\u0ac5\u0ac7-\u0ac9\u0acb-\u0acd\u0ae2\u0ae3\u0ae6-\u0aef\u0afa-\u0aff\u0b01-\u0b03\u0b3c\u0b3e-\u0b44\u0b47\u0b48\u0b4b-\u0b4d\u0b55-\u0b57\u0b62\u0b63\u0b66-\u0b6f\u0b82\u0bbe-\u0bc2\u0bc6-\u0bc8\u0bca-\u0bcd\u0bd7\u0be6-\u0bef\u0c00-\u0c04\u0c3e-\u0c44\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0c66-\u0c6f\u0c81-\u0c83\u0cbc\u0cbe-\u0cc4\u0cc6-\u0cc8\u0cca-\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0ce6-\u0cef\u0d00-\u0d03\u0d3b\u0d3c\u0d3e-\u0d44\u0d46-\u0d48\u0d4a-\u0d4d\u0d57\u0d62\u0d63\u0d66-\u0d6f\u0d81-\u0d83\u0dca\u0dcf-\u0dd4\u0dd6\u0dd8-\u0ddf\u0de6-\u0def\u0df2\u0df3\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0e50-\u0e59\u0eb1\u0eb4-\u0ebc\u0ec8-\u0ecd\u0ed0-\u0ed9\u0f18\u0f19\u0f20-\u0f29\u0f35\u0f37\u0f39\u0f3e\u0f3f\u0f71-\u0f84\u0f86\u0f87\u0f8d-\u0f97\u0f99-\u0fbc\u0fc6\u102b-\u103e\u1040-\u1049\u1056-\u1059\u105e-\u1060\u1062-\u1064\u1067-\u106d\u1071-\u1074\u1082-\u108d\u108f-\u109d\u135d-\u135f\u1369-\u1371\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b4-\u17d3\u17dd\u17e0-\u17e9\u180b-\u180d\u1810-\u1819\u18a9\u1920-\u192b\u1930-\u193b\u1946-\u194f\u19d0-\u19da\u1a17-\u1a1b\u1a55-\u1a5e\u1a60-\u1a7c\u1a7f-\u1a89\u1a90-\u1a99\u1ab0-\u1abd\u1abf\u1ac0\u1b00-\u1b04\u1b34-\u1b44\u1b50-\u1b59\u1b6b-\u1b73\u1b80-\u1b82\u1ba1-\u1bad\u1bb0-\u1bb9\u1be6-\u1bf3\u1c24-\u1c37\u1c40-\u1c49\u1c50-\u1c59\u1cd0-\u1cd2\u1cd4-\u1ce8\u1ced\u1cf4\u1cf7-\u1cf9\u1dc0-\u1df9\u1dfb-\u1dff\u203f\u2040\u2054\u20d0-\u20dc\u20e1\u20e5-\u20f0\u2cef-\u2cf1\u2d7f\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua620-\ua629\ua66f\ua674-\ua67d\ua69e\ua69f\ua6f0\ua6f1\ua802\ua806\ua80b\ua823-\ua827\ua82c\ua880\ua881\ua8b4-\ua8c5\ua8d0-\ua8d9\ua8e0-\ua8f1\ua8ff-\ua909\ua926-\ua92d\ua947-\ua953\ua980-\ua983\ua9b3-\ua9c0\ua9d0-\ua9d9\ua9e5\ua9f0-\ua9f9\uaa29-\uaa36\uaa43\uaa4c\uaa4d\uaa50-\uaa59\uaa7b-\uaa7d\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uaaeb-\uaaef\uaaf5\uaaf6\uabe3-\uabea\uabec\uabed\uabf0-\uabf9\ufb1e\ufe00-\ufe0f\ufe20-\ufe2f\ufe33\ufe34\ufe4d-\ufe4f\uff10-\uff19\uff3f",
iga=new RegExp("["+JW+"]"),jga=new RegExp("["+JW+v9+"]");JW=v9=null;var w0=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,157,310,10,21,11,7,153,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,349,41,7,1,79,28,11,0,9,21,107,20,28,22,13,52,76,44,33,24,27,35,30,0,3,0,9,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,85,6,2,0,2,3,2,
14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,159,52,19,3,21,2,31,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,14,0,72,26,230,43,117,63,32,7,3,0,3,7,2,1,2,23,16,0,2,0,95,7,3,38,17,0,2,0,29,0,11,39,8,0,22,0,12,45,20,0,35,56,264,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,190,0,80,921,103,110,18,195,2749,1070,4050,582,8634,568,8,30,114,29,19,47,17,3,32,20,6,18,689,63,129,74,6,0,67,12,65,1,2,0,29,6135,9,1237,43,8,8952,286,50,2,18,3,9,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,
0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,2357,44,11,6,17,0,370,43,1301,196,60,67,8,0,1205,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42717,35,4148,12,221,3,5761,15,7472,3104,541,1507,4938],kga=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,370,1,154,10,176,2,54,14,32,9,16,3,46,10,54,9,7,2,37,13,2,9,6,1,45,0,
13,2,49,13,9,3,2,11,83,11,7,0,161,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,193,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,84,14,5,9,243,14,166,9,71,5,2,1,3,3,2,0,2,1,13,9,120,6,3,6,4,0,29,9,41,6,2,3,9,0,10,10,47,15,406,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,19306,9,135,4,60,6,26,9,1014,0,2,54,8,3,82,0,12,1,19628,1,5319,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,262,6,10,9,419,13,1495,6,110,6,6,9,4759,
9,787719,239],Sj=function(c,k){void 0===k&&(k={});this.label=c;this.keyword=k.keyword;this.beforeExpr=!!k.beforeExpr;this.startsExpr=!!k.startsExpr;this.isLoop=!!k.isLoop;this.isAssign=!!k.isAssign;this.prefix=!!k.prefix;this.postfix=!!k.postfix;this.binop=k.binop||null;this.updateContext=null},$s={beforeExpr:!0},Lr={startsExpr:!0},PK={},Rb={num:new Sj("num",Lr),regexp:new Sj("regexp",Lr),string:new Sj("string",Lr),name:new Sj("name",Lr),eof:new Sj("eof"),bracketL:new Sj("[",{beforeExpr:!0,startsExpr:!0}),
bracketR:new Sj("]"),braceL:new Sj("{",{beforeExpr:!0,startsExpr:!0}),braceR:new Sj("}"),parenL:new Sj("(",{beforeExpr:!0,startsExpr:!0}),parenR:new Sj(")"),comma:new Sj(",",$s),semi:new Sj(";",$s),colon:new Sj(":",$s),dot:new Sj("."),question:new Sj("?",$s),questionDot:new Sj("?."),arrow:new Sj("=>",$s),template:new Sj("template"),invalidTemplate:new Sj("invalidTemplate"),ellipsis:new Sj("...",$s),backQuote:new Sj("`",Lr),dollarBraceL:new Sj("${",{beforeExpr:!0,startsExpr:!0}),eq:new Sj("=",{beforeExpr:!0,
isAssign:!0}),assign:new Sj("_=",{beforeExpr:!0,isAssign:!0}),incDec:new Sj("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new Sj("!/~",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:qh("||",1),logicalAND:qh("&&",2),bitwiseOR:qh("|",3),bitwiseXOR:qh("^",4),bitwiseAND:qh("&",5),equality:qh("==/!=/===/!==",6),relational:qh("</>/<=/>=",7),bitShift:qh("<</>>/>>>",8),plusMin:new Sj("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:qh("%",10),star:qh("*",10),slash:qh("/",10),starstar:new Sj("**",
{beforeExpr:!0}),coalesce:qh("??",1),_break:Of("break"),_case:Of("case",$s),_catch:Of("catch"),_continue:Of("continue"),_debugger:Of("debugger"),_default:Of("default",$s),_do:Of("do",{isLoop:!0,beforeExpr:!0}),_else:Of("else",$s),_finally:Of("finally"),_for:Of("for",{isLoop:!0}),_function:Of("function",Lr),_if:Of("if"),_return:Of("return",$s),_switch:Of("switch"),_throw:Of("throw",$s),_try:Of("try"),_var:Of("var"),_const:Of("const"),_while:Of("while",{isLoop:!0}),_with:Of("with"),_new:Of("new",{beforeExpr:!0,
startsExpr:!0}),_this:Of("this",Lr),_super:Of("super",Lr),_class:Of("class",Lr),_extends:Of("extends",$s),_export:Of("export"),_import:Of("import",Lr),_null:Of("null",Lr),_true:Of("true",Lr),_false:Of("false",Lr),_in:Of("in",{beforeExpr:!0,binop:7}),_instanceof:Of("instanceof",{beforeExpr:!0,binop:7}),_typeof:Of("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_void:Of("void",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_delete:Of("delete",{beforeExpr:!0,prefix:!0,startsExpr:!0})},Mr=/\r\n?|\n|\u2028|\u2029/,
PD=new RegExp(Mr.source,"g"),KW=/[\u1680\u2000-\u200a\u202f\u205f\u3000\ufeff]/,at=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,w9=Object.prototype,RK=w9.hasOwnProperty,jna=w9.toString,y0=Array.isArray||function(c){return"[object Array]"===jna.call(c)},QD=function(c,k){this.line=c;this.column=k};QD.prototype.offset=function(c){return new QD(this.line,this.column+c)};var NG=function(c,k,d){this.start=k;this.end=d;null!==c.sourceFile&&(this.source=c.sourceFile)},QK={ecmaVersion:null,sourceType:"script",onInsertedSemicolon:null,
onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowAwaitOutsideFunction:!1,allowHashBang:!1,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1},x0=!1,cm=function(c,k,d){this.options=c=xo(c);this.sourceFile=c.sourceFile;this.keywords=Gk(hna[6<=c.ecmaVersion?6:"module"===c.sourceType?"5module":5]);var h="";!0!==c.allowReserved&&(h=IW[6<=c.ecmaVersion?6:5===c.ecmaVersion?5:3],"module"===
c.sourceType&&(h+=" await"));this.reservedWords=Gk(h);h=(h?h+" ":"")+IW.strict;this.reservedWordsStrict=Gk(h);this.reservedWordsStrictBind=Gk(h+" "+IW.strictBind);this.input=String(k);this.containsEsc=!1;d?(this.pos=d,this.lineStart=this.input.lastIndexOf("\n",d-1)+1,this.curLine=this.input.slice(0,this.lineStart).split(Mr).length):(this.pos=this.lineStart=0,this.curLine=1);this.type=Rb.eof;this.value=null;this.start=this.end=this.pos;this.startLoc=this.endLoc=this.curPosition();this.lastTokEndLoc=
this.lastTokStartLoc=null;this.lastTokStart=this.lastTokEnd=this.pos;this.context=this.initialContext();this.exprAllowed=!0;this.strict=(this.inModule="module"===c.sourceType)||this.strictDirective(this.pos);this.potentialArrowAt=-1;this.yieldPos=this.awaitPos=this.awaitIdentPos=0;this.labels=[];this.undefinedExports={};0===this.pos&&c.allowHashBang&&"#!"===this.input.slice(0,2)&&this.skipLineComment(2);this.scopeStack=[];this.enterScope(1);this.regexpState=null},oA={inFunction:{configurable:!0},
inGenerator:{configurable:!0},inAsync:{configurable:!0},allowSuper:{configurable:!0},allowDirectSuper:{configurable:!0},treatFunctionsAsVar:{configurable:!0},inNonArrowFunction:{configurable:!0}};cm.prototype.parse=function(){var c=this.options.program||this.startNode();this.nextToken();return this.parseTopLevel(c)};oA.inFunction.get=function(){return 0<(this.currentVarScope().flags&2)};oA.inGenerator.get=function(){return 0<(this.currentVarScope().flags&8)};oA.inAsync.get=function(){return 0<(this.currentVarScope().flags&
4)};oA.allowSuper.get=function(){return 0<(this.currentThisScope().flags&64)};oA.allowDirectSuper.get=function(){return 0<(this.currentThisScope().flags&128)};oA.treatFunctionsAsVar.get=function(){return this.treatFunctionsAsVarInScope(this.currentScope())};oA.inNonArrowFunction.get=function(){return 0<(this.currentThisScope().flags&2)};cm.extend=function(){for(var c=[],k=arguments.length;k--;)c[k]=arguments[k];k=this;for(var d=0;d<c.length;d++)k=c[d](k);return k};cm.parse=function(c,k){return(new this(k,
c)).parse()};cm.parseExpressionAt=function(c,k,d){c=new this(d,c,k);c.nextToken();return c.parseExpression()};cm.tokenizer=function(c,k){return new this(k,c)};Object.defineProperties(cm.prototype,oA);var Op=cm.prototype,kna=/^(?:'((?:\\.|[^'\\])*?)'|"((?:\\.|[^"\\])*?)")/;Op.strictDirective=function(c){for(;;){at.lastIndex=c;c+=at.exec(this.input)[0].length;var k=kna.exec(this.input.slice(c));if(!k)return!1;if("use strict"===(k[1]||k[2])){at.lastIndex=c+k[0].length;c=at.exec(this.input);k=c.index+
c[0].length;var d=this.input.charAt(k);return";"===d||"}"===d||Mr.test(c[0])&&!(/[(`.[+\-/*%<>=,?^&]/.test(d)||"!"===d&&"="===this.input.charAt(k+1))}c+=k[0].length;at.lastIndex=c;c+=at.exec(this.input)[0].length;";"===this.input[c]&&c++}};Op.eat=function(c){return this.type===c?(this.next(),!0):!1};Op.isContextual=function(c){return this.type===Rb.name&&this.value===c&&!this.containsEsc};Op.eatContextual=function(c){if(!this.isContextual(c))return!1;this.next();return!0};Op.expectContextual=function(c){this.eatContextual(c)||
this.unexpected()};Op.canInsertSemicolon=function(){return this.type===Rb.eof||this.type===Rb.braceR||Mr.test(this.input.slice(this.lastTokEnd,this.start))};Op.insertSemicolon=function(){if(this.canInsertSemicolon()){if(this.options.onInsertedSemicolon)this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc);return!0}};Op.semicolon=function(){this.eat(Rb.semi)||this.insertSemicolon()||this.unexpected()};Op.afterTrailingComma=function(c,k){if(this.type===c){if(this.options.onTrailingComma)this.options.onTrailingComma(this.lastTokStart,
this.lastTokStartLoc);k||this.next();return!0}};Op.expect=function(c){this.eat(c)||this.unexpected()};Op.unexpected=function(c){this.raise(null!=c?c:this.start,"Unexpected token")};Op.checkPatternErrors=function(c,k){c&&(-1<c.trailingComma&&this.raiseRecoverable(c.trailingComma,"Comma is not permitted after the rest element"),c=k?c.parenthesizedAssign:c.parenthesizedBind,-1<c&&this.raiseRecoverable(c,"Parenthesized pattern"))};Op.checkExpressionErrors=function(c,k){if(!c)return!1;var d=c.shorthandAssign;
c=c.doubleProto;if(!k)return 0<=d||0<=c;0<=d&&this.raise(d,"Shorthand property assignments are valid only in destructuring patterns");0<=c&&this.raiseRecoverable(c,"Redefinition of __proto__ property")};Op.checkYieldAwaitInDefaultParams=function(){this.yieldPos&&(!this.awaitPos||this.yieldPos<this.awaitPos)&&this.raise(this.yieldPos,"Yield expression cannot be a default value");this.awaitPos&&this.raise(this.awaitPos,"Await expression cannot be a default value")};Op.isSimpleAssignTarget=function(c){return"ParenthesizedExpression"===
c.type?this.isSimpleAssignTarget(c.expression):"Identifier"===c.type||"MemberExpression"===c.type};var Ii=cm.prototype;Ii.parseTopLevel=function(c){var k={};c.body||(c.body=[]);for(;this.type!==Rb.eof;){var d=this.parseStatement(null,!0,k);c.body.push(d)}if(this.inModule)for(k=0,d=Object.keys(this.undefinedExports);k<d.length;k+=1){var h=d[k];this.raiseRecoverable(this.undefinedExports[h].start,"Export '"+h+"' is not defined")}this.adaptDirectivePrologue(c.body);this.next();c.sourceType=this.options.sourceType;
return this.finishNode(c,"Program")};var LW={kind:"loop"},lna={kind:"switch"};Ii.isLet=function(c){if(6>this.options.ecmaVersion||!this.isContextual("let"))return!1;at.lastIndex=this.pos;var k=at.exec(this.input);k=this.pos+k[0].length;var d=this.input.charCodeAt(k);if(91===d)return!0;if(c)return!1;if(123===d)return!0;if(lg(d,!0)){for(c=k+1;ni(this.input.charCodeAt(c),!0);)++c;c=this.input.slice(k,c);if(!ina.test(c))return!0}return!1};Ii.isAsyncFunction=function(){if(8>this.options.ecmaVersion||!this.isContextual("async"))return!1;
at.lastIndex=this.pos;var c=at.exec(this.input);c=this.pos+c[0].length;return!Mr.test(this.input.slice(this.pos,c))&&"function"===this.input.slice(c,c+8)&&(c+8===this.input.length||!ni(this.input.charAt(c+8)))};Ii.parseStatement=function(c,k,d){var h=this.type,n=this.startNode();if(this.isLet(c)){h=Rb._var;var b="let"}switch(h){case Rb._break:case Rb._continue:return this.parseBreakContinueStatement(n,h.keyword);case Rb._debugger:return this.parseDebuggerStatement(n);case Rb._do:return this.parseDoStatement(n);
case Rb._for:return this.parseForStatement(n);case Rb._function:return c&&(this.strict||"if"!==c&&"label"!==c)&&6<=this.options.ecmaVersion&&this.unexpected(),this.parseFunctionStatement(n,!1,!c);case Rb._class:return c&&this.unexpected(),this.parseClass(n,!0);case Rb._if:return this.parseIfStatement(n);case Rb._return:return this.parseReturnStatement(n);case Rb._switch:return this.parseSwitchStatement(n);case Rb._throw:return this.parseThrowStatement(n);case Rb._try:return this.parseTryStatement(n);
case Rb._const:case Rb._var:return b=b||this.value,c&&"var"!==b&&this.unexpected(),this.parseVarStatement(n,b);case Rb._while:return this.parseWhileStatement(n);case Rb._with:return this.parseWithStatement(n);case Rb.braceL:return this.parseBlock(!0,n);case Rb.semi:return this.parseEmptyStatement(n);case Rb._export:case Rb._import:if(10<this.options.ecmaVersion&&h===Rb._import&&(at.lastIndex=this.pos,c=at.exec(this.input),c=this.input.charCodeAt(this.pos+c[0].length),40===c||46===c))return this.parseExpressionStatement(n,
this.parseExpression());this.options.allowImportExportEverywhere||(k||this.raise(this.start,"'import' and 'export' may only appear at the top level"),this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'"));return h===Rb._import?this.parseImport(n):this.parseExport(n,d);default:if(this.isAsyncFunction())return c&&this.unexpected(),this.next(),this.parseFunctionStatement(n,!0,!c);k=this.value;d=this.parseExpression();return h===Rb.name&&"Identifier"===
d.type&&this.eat(Rb.colon)?this.parseLabeledStatement(n,k,d,c):this.parseExpressionStatement(n,d)}};Ii.parseBreakContinueStatement=function(c,k){var d="break"===k;this.next();this.eat(Rb.semi)||this.insertSemicolon()?c.label=null:this.type!==Rb.name?this.unexpected():(c.label=this.parseIdent(),this.semicolon());for(var h=0;h<this.labels.length;++h){var n=this.labels[h];if(null==c.label||n.name===c.label.name){if(null!=n.kind&&(d||"loop"===n.kind))break;if(c.label&&d)break}}h===this.labels.length&&
this.raise(c.start,"Unsyntactic "+k);return this.finishNode(c,d?"BreakStatement":"ContinueStatement")};Ii.parseDebuggerStatement=function(c){this.next();this.semicolon();return this.finishNode(c,"DebuggerStatement")};Ii.parseDoStatement=function(c){this.next();this.labels.push(LW);c.body=this.parseStatement("do");this.labels.pop();this.expect(Rb._while);c.test=this.parseParenExpression();6<=this.options.ecmaVersion?this.eat(Rb.semi):this.semicolon();return this.finishNode(c,"DoWhileStatement")};Ii.parseForStatement=
function(c){this.next();var k=9<=this.options.ecmaVersion&&(this.inAsync||!this.inFunction&&this.options.allowAwaitOutsideFunction)&&this.eatContextual("await")?this.lastTokStart:-1;this.labels.push(LW);this.enterScope(0);this.expect(Rb.parenL);if(this.type===Rb.semi)return-1<k&&this.unexpected(k),this.parseFor(c,null);var d=this.isLet();if(this.type===Rb._var||this.type===Rb._const||d){var h=this.startNode();d=d?"let":this.value;this.next();this.parseVar(h,!0,d);this.finishNode(h,"VariableDeclaration");
if((this.type===Rb._in||6<=this.options.ecmaVersion&&this.isContextual("of"))&&1===h.declarations.length)return 9<=this.options.ecmaVersion&&(this.type===Rb._in?-1<k&&this.unexpected(k):c.await=-1<k),this.parseForIn(c,h);-1<k&&this.unexpected(k);return this.parseFor(c,h)}h=new Dp;d=this.parseExpression(!0,h);if(this.type===Rb._in||6<=this.options.ecmaVersion&&this.isContextual("of"))return 9<=this.options.ecmaVersion&&(this.type===Rb._in?-1<k&&this.unexpected(k):c.await=-1<k),this.toAssignable(d,
!1,h),this.checkLValPattern(d),this.parseForIn(c,d);this.checkExpressionErrors(h,!0);-1<k&&this.unexpected(k);return this.parseFor(c,d)};Ii.parseFunctionStatement=function(c,k,d){this.next();return this.parseFunction(c,uI|(d?0:MW),!1,k)};Ii.parseIfStatement=function(c){this.next();c.test=this.parseParenExpression();c.consequent=this.parseStatement("if");c.alternate=this.eat(Rb._else)?this.parseStatement("if"):null;return this.finishNode(c,"IfStatement")};Ii.parseReturnStatement=function(c){this.inFunction||
this.options.allowReturnOutsideFunction||this.raise(this.start,"'return' outside of function");this.next();this.eat(Rb.semi)||this.insertSemicolon()?c.argument=null:(c.argument=this.parseExpression(),this.semicolon());return this.finishNode(c,"ReturnStatement")};Ii.parseSwitchStatement=function(c){this.next();c.discriminant=this.parseParenExpression();c.cases=[];this.expect(Rb.braceL);this.labels.push(lna);this.enterScope(0);for(var k,d=!1;this.type!==Rb.braceR;)if(this.type===Rb._case||this.type===
Rb._default){var h=this.type===Rb._case;k&&this.finishNode(k,"SwitchCase");c.cases.push(k=this.startNode());k.consequent=[];this.next();h?k.test=this.parseExpression():(d&&this.raiseRecoverable(this.lastTokStart,"Multiple default clauses"),d=!0,k.test=null);this.expect(Rb.colon)}else k||this.unexpected(),k.consequent.push(this.parseStatement(null));this.exitScope();k&&this.finishNode(k,"SwitchCase");this.next();this.labels.pop();return this.finishNode(c,"SwitchStatement")};Ii.parseThrowStatement=
function(c){this.next();Mr.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw");c.argument=this.parseExpression();this.semicolon();return this.finishNode(c,"ThrowStatement")};var mna=[];Ii.parseTryStatement=function(c){this.next();c.block=this.parseBlock();c.handler=null;if(this.type===Rb._catch){var k=this.startNode();this.next();if(this.eat(Rb.parenL)){k.param=this.parseBindingAtom();var d="Identifier"===k.param.type;this.enterScope(d?32:
0);this.checkLValPattern(k.param,d?4:2);this.expect(Rb.parenR)}else 10>this.options.ecmaVersion&&this.unexpected(),k.param=null,this.enterScope(0);k.body=this.parseBlock(!1);this.exitScope();c.handler=this.finishNode(k,"CatchClause")}c.finalizer=this.eat(Rb._finally)?this.parseBlock():null;c.handler||c.finalizer||this.raise(c.start,"Missing catch or finally clause");return this.finishNode(c,"TryStatement")};Ii.parseVarStatement=function(c,k){this.next();this.parseVar(c,!1,k);this.semicolon();return this.finishNode(c,
"VariableDeclaration")};Ii.parseWhileStatement=function(c){this.next();c.test=this.parseParenExpression();this.labels.push(LW);c.body=this.parseStatement("while");this.labels.pop();return this.finishNode(c,"WhileStatement")};Ii.parseWithStatement=function(c){this.strict&&this.raise(this.start,"'with' in strict mode");this.next();c.object=this.parseParenExpression();c.body=this.parseStatement("with");return this.finishNode(c,"WithStatement")};Ii.parseEmptyStatement=function(c){this.next();return this.finishNode(c,
"EmptyStatement")};Ii.parseLabeledStatement=function(c,k,d,h){for(var n=0,b=this.labels;n<b.length;n+=1)b[n].name===k&&this.raise(d.start,"Label '"+k+"' is already declared");n=this.type.isLoop?"loop":this.type===Rb._switch?"switch":null;for(b=this.labels.length-1;0<=b;b--){var e=this.labels[b];if(e.statementStart===c.start)e.statementStart=this.start,e.kind=n;else break}this.labels.push({name:k,kind:n,statementStart:this.start});c.body=this.parseStatement(h?-1===h.indexOf("label")?h+"label":h:"label");
this.labels.pop();c.label=d;return this.finishNode(c,"LabeledStatement")};Ii.parseExpressionStatement=function(c,k){c.expression=k;this.semicolon();return this.finishNode(c,"ExpressionStatement")};Ii.parseBlock=function(c,k,d){void 0===c&&(c=!0);void 0===k&&(k=this.startNode());k.body=[];this.expect(Rb.braceL);for(c&&this.enterScope(0);this.type!==Rb.braceR;){var h=this.parseStatement(null);k.body.push(h)}d&&(this.strict=!1);this.next();c&&this.exitScope();return this.finishNode(k,"BlockStatement")};
Ii.parseFor=function(c,k){c.init=k;this.expect(Rb.semi);c.test=this.type===Rb.semi?null:this.parseExpression();this.expect(Rb.semi);c.update=this.type===Rb.parenR?null:this.parseExpression();this.expect(Rb.parenR);c.body=this.parseStatement("for");this.exitScope();this.labels.pop();return this.finishNode(c,"ForStatement")};Ii.parseForIn=function(c,k){var d=this.type===Rb._in;this.next();"VariableDeclaration"===k.type&&null!=k.declarations[0].init&&(!d||8>this.options.ecmaVersion||this.strict||"var"!==
k.kind||"Identifier"!==k.declarations[0].id.type)&&this.raise(k.start,(d?"for-in":"for-of")+" loop variable declaration may not have an initializer");c.left=k;c.right=d?this.parseExpression():this.parseMaybeAssign();this.expect(Rb.parenR);c.body=this.parseStatement("for");this.exitScope();this.labels.pop();return this.finishNode(c,d?"ForInStatement":"ForOfStatement")};Ii.parseVar=function(c,k,d){c.declarations=[];for(c.kind=d;;){var h=this.startNode();this.parseVarId(h,d);this.eat(Rb.eq)?h.init=this.parseMaybeAssign(k):
"const"!==d||this.type===Rb._in||6<=this.options.ecmaVersion&&this.isContextual("of")?"Identifier"===h.id.type||k&&(this.type===Rb._in||this.isContextual("of"))?h.init=null:this.raise(this.lastTokEnd,"Complex binding patterns require an initialization value"):this.unexpected();c.declarations.push(this.finishNode(h,"VariableDeclarator"));if(!this.eat(Rb.comma))break}return c};Ii.parseVarId=function(c,k){c.id=this.parseBindingAtom();this.checkLValPattern(c.id,"var"===k?1:2,!1)};var uI=1,MW=2;Ii.parseFunction=
function(c,k,d,h){this.initFunction(c);if(9<=this.options.ecmaVersion||6<=this.options.ecmaVersion&&!h)this.type===Rb.star&&k&MW&&this.unexpected(),c.generator=this.eat(Rb.star);8<=this.options.ecmaVersion&&(c.async=!!h);k&uI&&(c.id=k&4&&this.type!==Rb.name?null:this.parseIdent(),!c.id||k&MW||this.checkLValSimple(c.id,this.strict||c.generator||c.async?this.treatFunctionsAsVar?1:2:3));h=this.yieldPos;var n=this.awaitPos,b=this.awaitIdentPos;this.awaitIdentPos=this.awaitPos=this.yieldPos=0;this.enterScope(2|
(c.async?4:0)|(c.generator?8:0));k&uI||(c.id=this.type===Rb.name?this.parseIdent():null);this.parseFunctionParams(c);this.parseFunctionBody(c,d,!1);this.yieldPos=h;this.awaitPos=n;this.awaitIdentPos=b;return this.finishNode(c,k&uI?"FunctionDeclaration":"FunctionExpression")};Ii.parseFunctionParams=function(c){this.expect(Rb.parenL);c.params=this.parseBindingList(Rb.parenR,!1,8<=this.options.ecmaVersion);this.checkYieldAwaitInDefaultParams()};Ii.parseClass=function(c,k){this.next();var d=this.strict;
this.strict=!0;this.parseClassId(c,k);this.parseClassSuper(c);var h=this.startNode(),n=!1;h.body=[];for(this.expect(Rb.braceL);this.type!==Rb.braceR;){var b=this.parseClassElement(null!==c.superClass);b&&(h.body.push(b),"MethodDefinition"===b.type&&"constructor"===b.kind&&(n&&this.raise(b.start,"Duplicate constructor in the same class"),n=!0))}this.strict=d;this.next();c.body=this.finishNode(h,"ClassBody");return this.finishNode(c,k?"ClassDeclaration":"ClassExpression")};Ii.parseClassElement=function(c){var k=
this;if(this.eat(Rb.semi))return null;var d=this.startNode(),h=function(l,a){void 0===a&&(a=!1);var f=k.start,m=k.startLoc;if(!k.eatContextual(l))return!1;if(!(k.type===Rb.parenL||a&&k.canInsertSemicolon()))return!0;d.key&&k.unexpected();d.computed=!1;d.key=k.startNodeAt(f,m);d.key.name=l;k.finishNode(d.key,"Identifier");return!1};d.kind="method";d.static=h("static");var n=this.eat(Rb.star),b=!1;n||(8<=this.options.ecmaVersion&&h("async",!0)?(b=!0,n=9<=this.options.ecmaVersion&&this.eat(Rb.star)):
h("get")?d.kind="get":h("set")&&(d.kind="set"));d.key||this.parsePropertyName(d);h=d.key;var e=!1;d.computed||d.static||!("Identifier"===h.type&&"constructor"===h.name||"Literal"===h.type&&"constructor"===h.value)?d.static&&"Identifier"===h.type&&"prototype"===h.name&&this.raise(h.start,"Classes may not have a static property named prototype"):("method"!==d.kind&&this.raise(h.start,"Constructor can't have get/set modifier"),n&&this.raise(h.start,"Constructor can't be a generator"),b&&this.raise(h.start,
"Constructor can't be an async method"),d.kind="constructor",e=c);this.parseClassMethod(d,n,b,e);"get"===d.kind&&0!==d.value.params.length&&this.raiseRecoverable(d.value.start,"getter should have no params");"set"===d.kind&&1!==d.value.params.length&&this.raiseRecoverable(d.value.start,"setter should have exactly one param");"set"===d.kind&&"RestElement"===d.value.params[0].type&&this.raiseRecoverable(d.value.params[0].start,"Setter cannot use rest params");return d};Ii.parseClassMethod=function(c,
k,d,h){c.value=this.parseMethod(k,d,h);return this.finishNode(c,"MethodDefinition")};Ii.parseClassId=function(c,k){this.type===Rb.name?(c.id=this.parseIdent(),k&&this.checkLValSimple(c.id,2,!1)):(!0===k&&this.unexpected(),c.id=null)};Ii.parseClassSuper=function(c){c.superClass=this.eat(Rb._extends)?this.parseExprSubscripts():null};Ii.parseExport=function(c,k){this.next();if(this.eat(Rb.star))return 11<=this.options.ecmaVersion&&(this.eatContextual("as")?(c.exported=this.parseIdent(!0),this.checkExport(k,
c.exported.name,this.lastTokStart)):c.exported=null),this.expectContextual("from"),this.type!==Rb.string&&this.unexpected(),c.source=this.parseExprAtom(),this.semicolon(),this.finishNode(c,"ExportAllDeclaration");if(this.eat(Rb._default)){this.checkExport(k,"default",this.lastTokStart);var d;this.type===Rb._function||(d=this.isAsyncFunction())?(k=this.startNode(),this.next(),d&&this.next(),c.declaration=this.parseFunction(k,uI|4,!1,d)):this.type===Rb._class?(d=this.startNode(),c.declaration=this.parseClass(d,
"nullableID")):(c.declaration=this.parseMaybeAssign(),this.semicolon());return this.finishNode(c,"ExportDefaultDeclaration")}if(this.shouldParseExportStatement())c.declaration=this.parseStatement(null),"VariableDeclaration"===c.declaration.type?this.checkVariableExport(k,c.declaration.declarations):this.checkExport(k,c.declaration.id.name,c.declaration.id.start),c.specifiers=[],c.source=null;else{c.declaration=null;c.specifiers=this.parseExportSpecifiers(k);if(this.eatContextual("from"))this.type!==
Rb.string&&this.unexpected(),c.source=this.parseExprAtom();else{d=0;for(k=c.specifiers;d<k.length;d+=1){var h=k[d];this.checkUnreserved(h.local);this.checkLocalExport(h.local)}c.source=null}this.semicolon()}return this.finishNode(c,"ExportNamedDeclaration")};Ii.checkExport=function(c,k,d){c&&(RK.call(c,k)&&this.raiseRecoverable(d,"Duplicate export '"+k+"'"),c[k]=!0)};Ii.checkPatternExport=function(c,k){var d=k.type;if("Identifier"===d)this.checkExport(c,k.name,k.start);else if("ObjectPattern"===d)for(d=
0,k=k.properties;d<k.length;d+=1)this.checkPatternExport(c,k[d]);else if("ArrayPattern"===d)for(d=0,k=k.elements;d<k.length;d+=1){var h=k[d];h&&this.checkPatternExport(c,h)}else"Property"===d?this.checkPatternExport(c,k.value):"AssignmentPattern"===d?this.checkPatternExport(c,k.left):"RestElement"===d?this.checkPatternExport(c,k.argument):"ParenthesizedExpression"===d&&this.checkPatternExport(c,k.expression)};Ii.checkVariableExport=function(c,k){if(c)for(var d=0;d<k.length;d+=1)this.checkPatternExport(c,
k[d].id)};Ii.shouldParseExportStatement=function(){return"var"===this.type.keyword||"const"===this.type.keyword||"class"===this.type.keyword||"function"===this.type.keyword||this.isLet()||this.isAsyncFunction()};Ii.parseExportSpecifiers=function(c){var k=[],d=!0;for(this.expect(Rb.braceL);!this.eat(Rb.braceR);){if(d)d=!1;else if(this.expect(Rb.comma),this.afterTrailingComma(Rb.braceR))break;var h=this.startNode();h.local=this.parseIdent(!0);h.exported=this.eatContextual("as")?this.parseIdent(!0):
h.local;this.checkExport(c,h.exported.name,h.exported.start);k.push(this.finishNode(h,"ExportSpecifier"))}return k};Ii.parseImport=function(c){this.next();this.type===Rb.string?(c.specifiers=mna,c.source=this.parseExprAtom()):(c.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),c.source=this.type===Rb.string?this.parseExprAtom():this.unexpected());this.semicolon();return this.finishNode(c,"ImportDeclaration")};Ii.parseImportSpecifiers=function(){var c=[],k=!0;if(this.type===Rb.name){var d=
this.startNode();d.local=this.parseIdent();this.checkLValSimple(d.local,2);c.push(this.finishNode(d,"ImportDefaultSpecifier"));if(!this.eat(Rb.comma))return c}if(this.type===Rb.star)return k=this.startNode(),this.next(),this.expectContextual("as"),k.local=this.parseIdent(),this.checkLValSimple(k.local,2),c.push(this.finishNode(k,"ImportNamespaceSpecifier")),c;for(this.expect(Rb.braceL);!this.eat(Rb.braceR);){if(k)k=!1;else if(this.expect(Rb.comma),this.afterTrailingComma(Rb.braceR))break;d=this.startNode();
d.imported=this.parseIdent(!0);this.eatContextual("as")?d.local=this.parseIdent():(this.checkUnreserved(d.imported),d.local=d.imported);this.checkLValSimple(d.local,2);c.push(this.finishNode(d,"ImportSpecifier"))}return c};Ii.adaptDirectivePrologue=function(c){for(var k=0;k<c.length&&this.isDirectiveCandidate(c[k]);++k)c[k].directive=c[k].expression.raw.slice(1,-1)};Ii.isDirectiveCandidate=function(c){return"ExpressionStatement"===c.type&&"Literal"===c.expression.type&&"string"===typeof c.expression.value&&
('"'===this.input[c.start]||"'"===this.input[c.start])};var Hu=cm.prototype;Hu.toAssignable=function(c,k,d){if(6<=this.options.ecmaVersion&&c)switch(c.type){case "Identifier":this.inAsync&&"await"===c.name&&this.raise(c.start,"Cannot use 'await' as identifier inside an async function");break;case "ObjectPattern":case "ArrayPattern":case "AssignmentPattern":case "RestElement":break;case "ObjectExpression":c.type="ObjectPattern";d&&this.checkPatternErrors(d,!0);d=0;for(var h=c.properties;d<h.length;d+=
1){var n=h[d];this.toAssignable(n,k);"RestElement"!==n.type||"ArrayPattern"!==n.argument.type&&"ObjectPattern"!==n.argument.type||this.raise(n.argument.start,"Unexpected token")}break;case "Property":"init"!==c.kind&&this.raise(c.key.start,"Object pattern can't contain getter or setter");this.toAssignable(c.value,k);break;case "ArrayExpression":c.type="ArrayPattern";d&&this.checkPatternErrors(d,!0);this.toAssignableList(c.elements,k);break;case "SpreadElement":c.type="RestElement";this.toAssignable(c.argument,
k);"AssignmentPattern"===c.argument.type&&this.raise(c.argument.start,"Rest elements cannot have a default value");break;case "AssignmentExpression":"="!==c.operator&&this.raise(c.left.end,"Only '=' operator can be used for specifying default value.");c.type="AssignmentPattern";delete c.operator;this.toAssignable(c.left,k);break;case "ParenthesizedExpression":this.toAssignable(c.expression,k,d);break;case "ChainExpression":this.raiseRecoverable(c.start,"Optional chaining cannot appear in left-hand side");
break;case "MemberExpression":if(!k)break;default:this.raise(c.start,"Assigning to rvalue")}else d&&this.checkPatternErrors(d,!0);return c};Hu.toAssignableList=function(c,k){for(var d=c.length,h=0;h<d;h++){var n=c[h];n&&this.toAssignable(n,k)}d&&(d=c[d-1],6===this.options.ecmaVersion&&k&&d&&"RestElement"===d.type&&"Identifier"!==d.argument.type&&this.unexpected(d.argument.start));return c};Hu.parseSpread=function(c){var k=this.startNode();this.next();k.argument=this.parseMaybeAssign(!1,c);return this.finishNode(k,
"SpreadElement")};Hu.parseRestBinding=function(){var c=this.startNode();this.next();6===this.options.ecmaVersion&&this.type!==Rb.name&&this.unexpected();c.argument=this.parseBindingAtom();return this.finishNode(c,"RestElement")};Hu.parseBindingAtom=function(){if(6<=this.options.ecmaVersion)switch(this.type){case Rb.bracketL:var c=this.startNode();this.next();c.elements=this.parseBindingList(Rb.bracketR,!0,!0);return this.finishNode(c,"ArrayPattern");case Rb.braceL:return this.parseObj(!0)}return this.parseIdent()};
Hu.parseBindingList=function(c,k,d){for(var h=[],n=!0;!this.eat(c);)if(n?n=!1:this.expect(Rb.comma),k&&this.type===Rb.comma)h.push(null);else if(d&&this.afterTrailingComma(c))break;else if(this.type===Rb.ellipsis){k=this.parseRestBinding();this.parseBindingListItem(k);h.push(k);this.type===Rb.comma&&this.raise(this.start,"Comma is not permitted after the rest element");this.expect(c);break}else{var b=this.parseMaybeDefault(this.start,this.startLoc);this.parseBindingListItem(b);h.push(b)}return h};
Hu.parseBindingListItem=function(c){return c};Hu.parseMaybeDefault=function(c,k,d){d=d||this.parseBindingAtom();if(6>this.options.ecmaVersion||!this.eat(Rb.eq))return d;c=this.startNodeAt(c,k);c.left=d;c.right=this.parseMaybeAssign();return this.finishNode(c,"AssignmentPattern")};Hu.checkLValSimple=function(c,k,d){void 0===k&&(k=0);var h=0!==k;switch(c.type){case "Identifier":this.strict&&this.reservedWordsStrictBind.test(c.name)&&this.raiseRecoverable(c.start,(h?"Binding ":"Assigning to ")+c.name+
" in strict mode");h&&(2===k&&"let"===c.name&&this.raiseRecoverable(c.start,"let is disallowed as a lexically bound name"),d&&(RK.call(d,c.name)&&this.raiseRecoverable(c.start,"Argument name clash"),d[c.name]=!0),5!==k&&this.declareName(c.name,k,c.start));break;case "ChainExpression":this.raiseRecoverable(c.start,"Optional chaining cannot appear in left-hand side");break;case "MemberExpression":h&&this.raiseRecoverable(c.start,"Binding member expression");break;case "ParenthesizedExpression":return h&&
this.raiseRecoverable(c.start,"Binding parenthesized expression"),this.checkLValSimple(c.expression,k,d);default:this.raise(c.start,(h?"Binding":"Assigning to")+" rvalue")}};Hu.checkLValPattern=function(c,k,d){void 0===k&&(k=0);switch(c.type){case "ObjectPattern":var h=0;for(c=c.properties;h<c.length;h+=1)this.checkLValInnerPattern(c[h],k,d);break;case "ArrayPattern":h=0;for(c=c.elements;h<c.length;h+=1){var n=c[h];n&&this.checkLValInnerPattern(n,k,d)}break;default:this.checkLValSimple(c,k,d)}};Hu.checkLValInnerPattern=
function(c,k,d){void 0===k&&(k=0);switch(c.type){case "Property":this.checkLValInnerPattern(c.value,k,d);break;case "AssignmentPattern":this.checkLValPattern(c.left,k,d);break;case "RestElement":this.checkLValPattern(c.argument,k,d);break;default:this.checkLValPattern(c,k,d)}};var $i=cm.prototype;$i.checkPropClash=function(c,k,d){if(!(9<=this.options.ecmaVersion&&"SpreadElement"===c.type||6<=this.options.ecmaVersion&&(c.computed||c.method||c.shorthand))){var h=c.key;switch(h.type){case "Identifier":var n=
h.name;break;case "Literal":n=String(h.value);break;default:return}c=c.kind;6<=this.options.ecmaVersion?"__proto__"===n&&"init"===c&&(k.proto&&(d?0>d.doubleProto&&(d.doubleProto=h.start):this.raiseRecoverable(h.start,"Redefinition of __proto__ property")),k.proto=!0):(n="$"+n,(d=k[n])?("init"===c?this.strict&&d.init||d.get||d.set:d.init||d[c])&&this.raiseRecoverable(h.start,"Redefinition of property"):d=k[n]={init:!1,get:!1,set:!1},d[c]=!0)}};$i.parseExpression=function(c,k){var d=this.start,h=this.startLoc,
n=this.parseMaybeAssign(c,k);if(this.type===Rb.comma){d=this.startNodeAt(d,h);for(d.expressions=[n];this.eat(Rb.comma);)d.expressions.push(this.parseMaybeAssign(c,k));return this.finishNode(d,"SequenceExpression")}return n};$i.parseMaybeAssign=function(c,k,d){if(this.isContextual("yield")){if(this.inGenerator)return this.parseYield(c);this.exprAllowed=!1}var h=!1,n=-1,b=-1;k?(n=k.parenthesizedAssign,b=k.trailingComma,k.parenthesizedAssign=k.trailingComma=-1):(k=new Dp,h=!0);var e=this.start,l=this.startLoc;
if(this.type===Rb.parenL||this.type===Rb.name)this.potentialArrowAt=this.start;var a=this.parseMaybeConditional(c,k);d&&(a=d.call(this,a,e,l));if(this.type.isAssign)return d=this.startNodeAt(e,l),d.operator=this.value,this.type===Rb.eq&&(a=this.toAssignable(a,!1,k)),h||(k.parenthesizedAssign=k.trailingComma=k.doubleProto=-1),k.shorthandAssign>=a.start&&(k.shorthandAssign=-1),this.type===Rb.eq?this.checkLValPattern(a):this.checkLValSimple(a),d.left=a,this.next(),d.right=this.parseMaybeAssign(c),this.finishNode(d,
"AssignmentExpression");h&&this.checkExpressionErrors(k,!0);-1<n&&(k.parenthesizedAssign=n);-1<b&&(k.trailingComma=b);return a};$i.parseMaybeConditional=function(c,k){var d=this.start,h=this.startLoc,n=this.parseExprOps(c,k);return this.checkExpressionErrors(k)?n:this.eat(Rb.question)?(k=this.startNodeAt(d,h),k.test=n,k.consequent=this.parseMaybeAssign(),this.expect(Rb.colon),k.alternate=this.parseMaybeAssign(c),this.finishNode(k,"ConditionalExpression")):n};$i.parseExprOps=function(c,k){var d=this.start,
h=this.startLoc,n=this.parseMaybeUnary(k,!1);return this.checkExpressionErrors(k)?n:n.start===d&&"ArrowFunctionExpression"===n.type?n:this.parseExprOp(n,d,h,-1,c)};$i.parseExprOp=function(c,k,d,h,n){var b=this.type.binop;if(null!=b&&(!n||this.type!==Rb._in)&&b>h){var e=this.type===Rb.logicalOR||this.type===Rb.logicalAND,l=this.type===Rb.coalesce;l&&(b=Rb.logicalAND.binop);var a=this.value;this.next();var f=this.start,m=this.startLoc;b=this.parseExprOp(this.parseMaybeUnary(null,!1),f,m,b,n);c=this.buildBinary(k,
d,c,b,a,e||l);(e&&this.type===Rb.coalesce||l&&(this.type===Rb.logicalOR||this.type===Rb.logicalAND))&&this.raiseRecoverable(this.start,"Logical expressions and coalesce expressions cannot be mixed. Wrap either by parentheses");return this.parseExprOp(c,k,d,h,n)}return c};$i.buildBinary=function(c,k,d,h,n,b){c=this.startNodeAt(c,k);c.left=d;c.operator=n;c.right=h;return this.finishNode(c,b?"LogicalExpression":"BinaryExpression")};$i.parseMaybeUnary=function(c,k){var d=this.start,h=this.startLoc;if(this.isContextual("await")&&
(this.inAsync||!this.inFunction&&this.options.allowAwaitOutsideFunction)){var n=this.parseAwait();k=!0}else if(this.type.prefix){n=this.startNode();var b=this.type===Rb.incDec;n.operator=this.value;n.prefix=!0;this.next();n.argument=this.parseMaybeUnary(null,!0);this.checkExpressionErrors(c,!0);b?this.checkLValSimple(n.argument):this.strict&&"delete"===n.operator&&"Identifier"===n.argument.type?this.raiseRecoverable(n.start,"Deleting local variable in strict mode"):k=!0;n=this.finishNode(n,b?"UpdateExpression":
"UnaryExpression")}else{n=this.parseExprSubscripts(c);if(this.checkExpressionErrors(c))return n;for(;this.type.postfix&&!this.canInsertSemicolon();)c=this.startNodeAt(d,h),c.operator=this.value,c.prefix=!1,c.argument=n,this.checkLValSimple(n),this.next(),n=this.finishNode(c,"UpdateExpression")}return!k&&this.eat(Rb.starstar)?this.buildBinary(d,h,n,this.parseMaybeUnary(null,!1),"**",!1):n};$i.parseExprSubscripts=function(c){var k=this.start,d=this.startLoc,h=this.parseExprAtom(c);if("ArrowFunctionExpression"===
h.type&&")"!==this.input.slice(this.lastTokStart,this.lastTokEnd))return h;k=this.parseSubscripts(h,k,d);c&&"MemberExpression"===k.type&&(c.parenthesizedAssign>=k.start&&(c.parenthesizedAssign=-1),c.parenthesizedBind>=k.start&&(c.parenthesizedBind=-1));return k};$i.parseSubscripts=function(c,k,d,h){for(var n=8<=this.options.ecmaVersion&&"Identifier"===c.type&&"async"===c.name&&this.lastTokEnd===c.end&&!this.canInsertSemicolon()&&5===c.end-c.start&&this.potentialArrowAt===c.start,b=!1;;){var e=this.parseSubscript(c,
k,d,h,n,b);e.optional&&(b=!0);if(e===c||"ArrowFunctionExpression"===e.type)return b&&(c=this.startNodeAt(k,d),c.expression=e,e=this.finishNode(c,"ChainExpression")),e;c=e}};$i.parseSubscript=function(c,k,d,h,n,b){var e=11<=this.options.ecmaVersion,l=e&&this.eat(Rb.questionDot);h&&l&&this.raise(this.lastTokStart,"Optional chaining cannot appear in the callee of new expressions");var a=this.eat(Rb.bracketL);if(a||l&&this.type!==Rb.parenL&&this.type!==Rb.backQuote||this.eat(Rb.dot))k=this.startNodeAt(k,
d),k.object=c,k.property=a?this.parseExpression():this.parseIdent("never"!==this.options.allowReserved),k.computed=!!a,a&&this.expect(Rb.bracketR),e&&(k.optional=l),c=this.finishNode(k,"MemberExpression");else if(!h&&this.eat(Rb.parenL)){h=new Dp;b=this.yieldPos;var f=this.awaitPos,m=this.awaitIdentPos;this.awaitIdentPos=this.awaitPos=this.yieldPos=0;a=this.parseExprList(Rb.parenR,8<=this.options.ecmaVersion,!1,h);if(n&&!l&&!this.canInsertSemicolon()&&this.eat(Rb.arrow))return this.checkPatternErrors(h,
!1),this.checkYieldAwaitInDefaultParams(),0<this.awaitIdentPos&&this.raise(this.awaitIdentPos,"Cannot use 'await' as identifier inside an async function"),this.yieldPos=b,this.awaitPos=f,this.awaitIdentPos=m,this.parseArrowExpression(this.startNodeAt(k,d),a,!0);this.checkExpressionErrors(h,!0);this.yieldPos=b||this.yieldPos;this.awaitPos=f||this.awaitPos;this.awaitIdentPos=m||this.awaitIdentPos;k=this.startNodeAt(k,d);k.callee=c;k.arguments=a;e&&(k.optional=l);c=this.finishNode(k,"CallExpression")}else this.type===
Rb.backQuote&&((l||b)&&this.raise(this.start,"Optional chaining cannot appear in the tag of tagged template expressions"),e=this.startNodeAt(k,d),e.tag=c,e.quasi=this.parseTemplate({isTagged:!0}),c=this.finishNode(e,"TaggedTemplateExpression"));return c};$i.parseExprAtom=function(c){this.type===Rb.slash&&this.readRegexp();var k=this.potentialArrowAt===this.start;switch(this.type){case Rb._super:return this.allowSuper||this.raise(this.start,"'super' keyword outside a method"),k=this.startNode(),this.next(),
this.type!==Rb.parenL||this.allowDirectSuper||this.raise(k.start,"super() call outside constructor of a subclass"),this.type!==Rb.dot&&this.type!==Rb.bracketL&&this.type!==Rb.parenL&&this.unexpected(),this.finishNode(k,"Super");case Rb._this:return k=this.startNode(),this.next(),this.finishNode(k,"ThisExpression");case Rb.name:c=this.start;var d=this.startLoc,h=this.containsEsc,n=this.parseIdent(!1);if(8<=this.options.ecmaVersion&&!h&&"async"===n.name&&!this.canInsertSemicolon()&&this.eat(Rb._function))return this.parseFunction(this.startNodeAt(c,
d),0,!1,!0);if(k&&!this.canInsertSemicolon()){if(this.eat(Rb.arrow))return this.parseArrowExpression(this.startNodeAt(c,d),[n],!1);if(8<=this.options.ecmaVersion&&"async"===n.name&&this.type===Rb.name&&!h)return n=this.parseIdent(!1),!this.canInsertSemicolon()&&this.eat(Rb.arrow)||this.unexpected(),this.parseArrowExpression(this.startNodeAt(c,d),[n],!0)}return n;case Rb.regexp:return c=this.value,k=this.parseLiteral(c.value),k.regex={pattern:c.pattern,flags:c.flags},k;case Rb.num:case Rb.string:return this.parseLiteral(this.value);
case Rb._null:case Rb._true:case Rb._false:return k=this.startNode(),k.value=this.type===Rb._null?null:this.type===Rb._true,k.raw=this.type.keyword,this.next(),this.finishNode(k,"Literal");case Rb.parenL:return d=this.start,k=this.parseParenAndDistinguishExpression(k),c&&(0>c.parenthesizedAssign&&!this.isSimpleAssignTarget(k)&&(c.parenthesizedAssign=d),0>c.parenthesizedBind&&(c.parenthesizedBind=d)),k;case Rb.bracketL:return k=this.startNode(),this.next(),k.elements=this.parseExprList(Rb.bracketR,
!0,!0,c),this.finishNode(k,"ArrayExpression");case Rb.braceL:return this.parseObj(!1,c);case Rb._function:return k=this.startNode(),this.next(),this.parseFunction(k,0);case Rb._class:return this.parseClass(this.startNode(),!1);case Rb._new:return this.parseNew();case Rb.backQuote:return this.parseTemplate();case Rb._import:return 11<=this.options.ecmaVersion?this.parseExprImport():this.unexpected();default:this.unexpected()}};$i.parseExprImport=function(){var c=this.startNode();this.containsEsc&&
this.raiseRecoverable(this.start,"Escape sequence in keyword import");var k=this.parseIdent(!0);switch(this.type){case Rb.parenL:return this.parseDynamicImport(c);case Rb.dot:return c.meta=k,this.parseImportMeta(c);default:this.unexpected()}};$i.parseDynamicImport=function(c){this.next();c.source=this.parseMaybeAssign();if(!this.eat(Rb.parenR)){var k=this.start;this.eat(Rb.comma)&&this.eat(Rb.parenR)?this.raiseRecoverable(k,"Trailing comma is not allowed in import()"):this.unexpected(k)}return this.finishNode(c,
"ImportExpression")};$i.parseImportMeta=function(c){this.next();var k=this.containsEsc;c.property=this.parseIdent(!0);"meta"!==c.property.name&&this.raiseRecoverable(c.property.start,"The only valid meta property for import is 'import.meta'");k&&this.raiseRecoverable(c.start,"'import.meta' must not contain escaped characters");"module"!==this.options.sourceType&&this.raiseRecoverable(c.start,"Cannot use 'import.meta' outside a module");return this.finishNode(c,"MetaProperty")};$i.parseLiteral=function(c){var k=
this.startNode();k.value=c;k.raw=this.input.slice(this.start,this.end);110===k.raw.charCodeAt(k.raw.length-1)&&(k.bigint=k.raw.slice(0,-1).replace(/_/g,""));this.next();return this.finishNode(k,"Literal")};$i.parseParenExpression=function(){this.expect(Rb.parenL);var c=this.parseExpression();this.expect(Rb.parenR);return c};$i.parseParenAndDistinguishExpression=function(c){var k=this.start,d=this.startLoc,h=8<=this.options.ecmaVersion;if(6<=this.options.ecmaVersion){this.next();var n=this.start,b=
this.startLoc,e=[],l=!0,a=!1,f=new Dp,m=this.yieldPos,r=this.awaitPos;for(this.awaitPos=this.yieldPos=0;this.type!==Rb.parenR;)if(l?l=!1:this.expect(Rb.comma),h&&this.afterTrailingComma(Rb.parenR,!0)){a=!0;break}else if(this.type===Rb.ellipsis){var v=this.start;e.push(this.parseParenItem(this.parseRestBinding()));this.type===Rb.comma&&this.raise(this.start,"Comma is not permitted after the rest element");break}else e.push(this.parseMaybeAssign(!1,f,this.parseParenItem));h=this.start;l=this.startLoc;
this.expect(Rb.parenR);if(c&&!this.canInsertSemicolon()&&this.eat(Rb.arrow))return this.checkPatternErrors(f,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=m,this.awaitPos=r,this.parseParenArrowList(k,d,e);e.length&&!a||this.unexpected(this.lastTokStart);v&&this.unexpected(v);this.checkExpressionErrors(f,!0);this.yieldPos=m||this.yieldPos;this.awaitPos=r||this.awaitPos;1<e.length?(c=this.startNodeAt(n,b),c.expressions=e,this.finishNodeAt(c,"SequenceExpression",h,l)):c=e[0]}else c=this.parseParenExpression();
return this.options.preserveParens?(k=this.startNodeAt(k,d),k.expression=c,this.finishNode(k,"ParenthesizedExpression")):c};$i.parseParenItem=function(c){return c};$i.parseParenArrowList=function(c,k,d){return this.parseArrowExpression(this.startNodeAt(c,k),d)};var nna=[];$i.parseNew=function(){this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword new");var c=this.startNode(),k=this.parseIdent(!0);if(6<=this.options.ecmaVersion&&this.eat(Rb.dot))return c.meta=k,k=this.containsEsc,
c.property=this.parseIdent(!0),"target"!==c.property.name&&this.raiseRecoverable(c.property.start,"The only valid meta property for new is 'new.target'"),k&&this.raiseRecoverable(c.start,"'new.target' must not contain escaped characters"),this.inNonArrowFunction||this.raiseRecoverable(c.start,"'new.target' can only be used in functions"),this.finishNode(c,"MetaProperty");k=this.start;var d=this.startLoc,h=this.type===Rb._import;c.callee=this.parseSubscripts(this.parseExprAtom(),k,d,!0);h&&"ImportExpression"===
c.callee.type&&this.raise(k,"Cannot use new with import()");this.eat(Rb.parenL)?c.arguments=this.parseExprList(Rb.parenR,8<=this.options.ecmaVersion,!1):c.arguments=nna;return this.finishNode(c,"NewExpression")};$i.parseTemplateElement=function(c){c=c.isTagged;var k=this.startNode();this.type===Rb.invalidTemplate?(c||this.raiseRecoverable(this.start,"Bad escape sequence in untagged template literal"),k.value={raw:this.value,cooked:null}):k.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,
"\n"),cooked:this.value};this.next();k.tail=this.type===Rb.backQuote;return this.finishNode(k,"TemplateElement")};$i.parseTemplate=function(c){void 0===c&&(c={});c=c.isTagged;void 0===c&&(c=!1);var k=this.startNode();this.next();k.expressions=[];var d=this.parseTemplateElement({isTagged:c});for(k.quasis=[d];!d.tail;)this.type===Rb.eof&&this.raise(this.pos,"Unterminated template literal"),this.expect(Rb.dollarBraceL),k.expressions.push(this.parseExpression()),this.expect(Rb.braceR),k.quasis.push(d=
this.parseTemplateElement({isTagged:c}));this.next();return this.finishNode(k,"TemplateLiteral")};$i.isAsyncProp=function(c){return!c.computed&&"Identifier"===c.key.type&&"async"===c.key.name&&(this.type===Rb.name||this.type===Rb.num||this.type===Rb.string||this.type===Rb.bracketL||this.type.keyword||9<=this.options.ecmaVersion&&this.type===Rb.star)&&!Mr.test(this.input.slice(this.lastTokEnd,this.start))};$i.parseObj=function(c,k){var d=this.startNode(),h=!0,n={};d.properties=[];for(this.next();!this.eat(Rb.braceR);){if(h)h=
!1;else if(this.expect(Rb.comma),5<=this.options.ecmaVersion&&this.afterTrailingComma(Rb.braceR))break;var b=this.parseProperty(c,k);c||this.checkPropClash(b,n,k);d.properties.push(b)}return this.finishNode(d,c?"ObjectPattern":"ObjectExpression")};$i.parseProperty=function(c,k){var d=this.startNode(),h;if(9<=this.options.ecmaVersion&&this.eat(Rb.ellipsis)){if(c)return d.argument=this.parseIdent(!1),this.type===Rb.comma&&this.raise(this.start,"Comma is not permitted after the rest element"),this.finishNode(d,
"RestElement");this.type===Rb.parenL&&k&&(0>k.parenthesizedAssign&&(k.parenthesizedAssign=this.start),0>k.parenthesizedBind&&(k.parenthesizedBind=this.start));d.argument=this.parseMaybeAssign(!1,k);this.type===Rb.comma&&k&&0>k.trailingComma&&(k.trailingComma=this.start);return this.finishNode(d,"SpreadElement")}if(6<=this.options.ecmaVersion){d.method=!1;d.shorthand=!1;if(c||k){var n=this.start;var b=this.startLoc}c||(h=this.eat(Rb.star))}var e=this.containsEsc;this.parsePropertyName(d);if(!c&&!e&&
8<=this.options.ecmaVersion&&!h&&this.isAsyncProp(d)){var l=!0;h=9<=this.options.ecmaVersion&&this.eat(Rb.star);this.parsePropertyName(d,k)}else l=!1;this.parsePropertyValue(d,c,h,l,n,b,k,e);return this.finishNode(d,"Property")};$i.parsePropertyValue=function(c,k,d,h,n,b,e,l){(d||h)&&this.type===Rb.colon&&this.unexpected();this.eat(Rb.colon)?(c.value=k?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,e),c.kind="init"):6<=this.options.ecmaVersion&&this.type===Rb.parenL?(k&&
this.unexpected(),c.kind="init",c.method=!0,c.value=this.parseMethod(d,h)):k||l||!(5<=this.options.ecmaVersion)||c.computed||"Identifier"!==c.key.type||"get"!==c.key.name&&"set"!==c.key.name||this.type===Rb.comma||this.type===Rb.braceR||this.type===Rb.eq?6<=this.options.ecmaVersion&&!c.computed&&"Identifier"===c.key.type?((d||h)&&this.unexpected(),this.checkUnreserved(c.key),"await"!==c.key.name||this.awaitIdentPos||(this.awaitIdentPos=n),c.kind="init",k?c.value=this.parseMaybeDefault(n,b,this.copyNode(c.key)):
this.type===Rb.eq&&e?(0>e.shorthandAssign&&(e.shorthandAssign=this.start),c.value=this.parseMaybeDefault(n,b,this.copyNode(c.key))):c.value=this.copyNode(c.key),c.shorthand=!0):this.unexpected():((d||h)&&this.unexpected(),c.kind=c.key.name,this.parsePropertyName(c),c.value=this.parseMethod(!1),c.value.params.length!==("get"===c.kind?0:1)?(k=c.value.start,"get"===c.kind?this.raiseRecoverable(k,"getter should have no params"):this.raiseRecoverable(k,"setter should have exactly one param")):"set"===
c.kind&&"RestElement"===c.value.params[0].type&&this.raiseRecoverable(c.value.params[0].start,"Setter cannot use rest params"))};$i.parsePropertyName=function(c){if(6<=this.options.ecmaVersion){if(this.eat(Rb.bracketL))return c.computed=!0,c.key=this.parseMaybeAssign(),this.expect(Rb.bracketR),c.key;c.computed=!1}return c.key=this.type===Rb.num||this.type===Rb.string?this.parseExprAtom():this.parseIdent("never"!==this.options.allowReserved)};$i.initFunction=function(c){c.id=null;6<=this.options.ecmaVersion&&
(c.generator=c.expression=!1);8<=this.options.ecmaVersion&&(c.async=!1)};$i.parseMethod=function(c,k,d){var h=this.startNode(),n=this.yieldPos,b=this.awaitPos,e=this.awaitIdentPos;this.initFunction(h);6<=this.options.ecmaVersion&&(h.generator=c);8<=this.options.ecmaVersion&&(h.async=!!k);this.awaitIdentPos=this.awaitPos=this.yieldPos=0;this.enterScope(2|(k?4:0)|(h.generator?8:0)|64|(d?128:0));this.expect(Rb.parenL);h.params=this.parseBindingList(Rb.parenR,!1,8<=this.options.ecmaVersion);this.checkYieldAwaitInDefaultParams();
this.parseFunctionBody(h,!1,!0);this.yieldPos=n;this.awaitPos=b;this.awaitIdentPos=e;return this.finishNode(h,"FunctionExpression")};$i.parseArrowExpression=function(c,k,d){var h=this.yieldPos,n=this.awaitPos,b=this.awaitIdentPos;this.enterScope((d?4:0)|18);this.initFunction(c);8<=this.options.ecmaVersion&&(c.async=!!d);this.awaitIdentPos=this.awaitPos=this.yieldPos=0;c.params=this.toAssignableList(k,!0);this.parseFunctionBody(c,!0,!1);this.yieldPos=h;this.awaitPos=n;this.awaitIdentPos=b;return this.finishNode(c,
"ArrowFunctionExpression")};$i.parseFunctionBody=function(c,k,d){var h=this.strict,n=!1;if(k&&this.type!==Rb.braceL)c.body=this.parseMaybeAssign(),c.expression=!0,this.checkParams(c,!1);else{var b=7<=this.options.ecmaVersion&&!this.isSimpleParamList(c.params);(!h||b)&&(n=this.strictDirective(this.end))&&b&&this.raiseRecoverable(c.start,"Illegal 'use strict' directive in function with non-simple parameter list");b=this.labels;this.labels=[];n&&(this.strict=!0);this.checkParams(c,!h&&!n&&!k&&!d&&this.isSimpleParamList(c.params));
this.strict&&c.id&&this.checkLValSimple(c.id,5);c.body=this.parseBlock(!1,void 0,n&&!h);c.expression=!1;this.adaptDirectivePrologue(c.body.body);this.labels=b}this.exitScope()};$i.isSimpleParamList=function(c){for(var k=0;k<c.length;k+=1)if("Identifier"!==c[k].type)return!1;return!0};$i.checkParams=function(c,k){var d={},h=0;for(c=c.params;h<c.length;h+=1)this.checkLValInnerPattern(c[h],1,k?null:d)};$i.parseExprList=function(c,k,d,h){for(var n=[],b=!0;!this.eat(c);){if(b)b=!1;else if(this.expect(Rb.comma),
k&&this.afterTrailingComma(c))break;if(d&&this.type===Rb.comma)var e=null;else this.type===Rb.ellipsis?(e=this.parseSpread(h),h&&this.type===Rb.comma&&0>h.trailingComma&&(h.trailingComma=this.start)):e=this.parseMaybeAssign(!1,h);n.push(e)}return n};$i.checkUnreserved=function(c){var k=c.start,d=c.end;c=c.name;this.inGenerator&&"yield"===c&&this.raiseRecoverable(k,"Cannot use 'yield' as identifier inside a generator");this.inAsync&&"await"===c&&this.raiseRecoverable(k,"Cannot use 'await' as identifier inside an async function");
this.keywords.test(c)&&this.raise(k,"Unexpected keyword '"+c+"'");6>this.options.ecmaVersion&&-1!==this.input.slice(k,d).indexOf("\\")||!(this.strict?this.reservedWordsStrict:this.reservedWords).test(c)||(this.inAsync||"await"!==c||this.raiseRecoverable(k,"Cannot use keyword 'await' outside an async function"),this.raiseRecoverable(k,"The keyword '"+c+"' is reserved"))};$i.parseIdent=function(c,k){k=this.startNode();this.type===Rb.name?k.name=this.value:this.type.keyword?(k.name=this.type.keyword,
"class"!==k.name&&"function"!==k.name||this.lastTokEnd===this.lastTokStart+1&&46===this.input.charCodeAt(this.lastTokStart)||this.context.pop()):this.unexpected();this.next(!!c);this.finishNode(k,"Identifier");c||(this.checkUnreserved(k),"await"!==k.name||this.awaitIdentPos||(this.awaitIdentPos=k.start));return k};$i.parseYield=function(c){this.yieldPos||(this.yieldPos=this.start);var k=this.startNode();this.next();this.type===Rb.semi||this.canInsertSemicolon()||this.type!==Rb.star&&!this.type.startsExpr?
(k.delegate=!1,k.argument=null):(k.delegate=this.eat(Rb.star),k.argument=this.parseMaybeAssign(c));return this.finishNode(k,"YieldExpression")};$i.parseAwait=function(){this.awaitPos||(this.awaitPos=this.start);var c=this.startNode();this.next();c.argument=this.parseMaybeUnary(null,!0);return this.finishNode(c,"AwaitExpression")};var fO=cm.prototype;fO.raise=function(c,k){var d=rh(this.input,c);k+=" ("+d.line+":"+d.column+")";k=new SyntaxError(k);k.pos=c;k.loc=d;k.raisedAt=this.pos;throw k;};fO.raiseRecoverable=
fO.raise;fO.curPosition=function(){if(this.options.locations)return new QD(this.curLine,this.pos-this.lineStart)};var pA=cm.prototype,ona=function(c){this.flags=c;this.var=[];this.lexical=[];this.functions=[]};pA.enterScope=function(c){this.scopeStack.push(new ona(c))};pA.exitScope=function(){this.scopeStack.pop()};pA.treatFunctionsAsVarInScope=function(c){return c.flags&2||!this.inModule&&c.flags&1};pA.declareName=function(c,k,d){var h=!1;if(2===k)k=this.currentScope(),h=-1<k.lexical.indexOf(c)||
-1<k.functions.indexOf(c)||-1<k.var.indexOf(c),k.lexical.push(c),this.inModule&&k.flags&1&&delete this.undefinedExports[c];else if(4===k)this.currentScope().lexical.push(c);else if(3===k)k=this.currentScope(),h=this.treatFunctionsAsVar?-1<k.lexical.indexOf(c):-1<k.lexical.indexOf(c)||-1<k.var.indexOf(c),k.functions.push(c);else for(k=this.scopeStack.length-1;0<=k;--k){var n=this.scopeStack[k];if(-1<n.lexical.indexOf(c)&&!(n.flags&32&&n.lexical[0]===c)||!this.treatFunctionsAsVarInScope(n)&&-1<n.functions.indexOf(c)){h=
!0;break}n.var.push(c);this.inModule&&n.flags&1&&delete this.undefinedExports[c];if(n.flags&3)break}h&&this.raiseRecoverable(d,"Identifier '"+c+"' has already been declared")};pA.checkLocalExport=function(c){-1===this.scopeStack[0].lexical.indexOf(c.name)&&-1===this.scopeStack[0].var.indexOf(c.name)&&(this.undefinedExports[c.name]=c)};pA.currentScope=function(){return this.scopeStack[this.scopeStack.length-1]};pA.currentVarScope=function(){for(var c=this.scopeStack.length-1;;c--){var k=this.scopeStack[c];
if(k.flags&3)return k}};pA.currentThisScope=function(){for(var c=this.scopeStack.length-1;;c--){var k=this.scopeStack[c];if(k.flags&3&&!(k.flags&16))return k}};var vI=function(c,k,d){this.type="";this.start=k;this.end=0;c.options.locations&&(this.loc=new NG(c,d));c.options.directSourceFile&&(this.sourceFile=c.options.directSourceFile);c.options.ranges&&(this.range=[k,0])},wI=cm.prototype;wI.startNode=function(){return new vI(this,this.start,this.startLoc)};wI.startNodeAt=function(c,k){return new vI(this,
c,k)};wI.finishNode=function(c,k){return ss.call(this,c,k,this.lastTokEnd,this.lastTokEndLoc)};wI.finishNodeAt=function(c,k,d,h){return ss.call(this,c,k,d,h)};wI.copyNode=function(c){var k=new vI(this,c.start,this.startLoc),d;for(d in c)k[d]=c[d];return k};var bt=function(c,k,d,h,n){this.token=c;this.isExpr=!!k;this.preserveSpace=!!d;this.override=h;this.generator=!!n},Ml={b_stat:new bt("{",!1),b_expr:new bt("{",!0),b_tmpl:new bt("${",!1),p_stat:new bt("(",!1),p_expr:new bt("(",!0),q_tmpl:new bt("`",
!0,!0,function(c){return c.tryReadTemplateToken()}),f_stat:new bt("function",!1),f_expr:new bt("function",!0),f_expr_gen:new bt("function",!0,!1,null,!0),f_gen:new bt("function",!1,!1,null,!0)},gO=cm.prototype;gO.initialContext=function(){return[Ml.b_stat]};gO.braceIsBlock=function(c){var k=this.curContext();return k===Ml.f_expr||k===Ml.f_stat?!0:c!==Rb.colon||k!==Ml.b_stat&&k!==Ml.b_expr?c===Rb._return||c===Rb.name&&this.exprAllowed?Mr.test(this.input.slice(this.lastTokEnd,this.start)):c===Rb._else||
c===Rb.semi||c===Rb.eof||c===Rb.parenR||c===Rb.arrow?!0:c===Rb.braceL?k===Ml.b_stat:c===Rb._var||c===Rb._const||c===Rb.name?!1:!this.exprAllowed:!k.isExpr};gO.inGeneratorContext=function(){for(var c=this.context.length-1;1<=c;c--){var k=this.context[c];if("function"===k.token)return k.generator}return!1};gO.updateContext=function(c){var k,d=this.type;d.keyword&&c===Rb.dot?this.exprAllowed=!1:(k=d.updateContext)?k.call(this,c):this.exprAllowed=d.beforeExpr};Rb.parenR.updateContext=Rb.braceR.updateContext=
function(){if(1===this.context.length)this.exprAllowed=!0;else{var c=this.context.pop();c===Ml.b_stat&&"function"===this.curContext().token&&(c=this.context.pop());this.exprAllowed=!c.isExpr}};Rb.braceL.updateContext=function(c){this.context.push(this.braceIsBlock(c)?Ml.b_stat:Ml.b_expr);this.exprAllowed=!0};Rb.dollarBraceL.updateContext=function(){this.context.push(Ml.b_tmpl);this.exprAllowed=!0};Rb.parenL.updateContext=function(c){this.context.push(c===Rb._if||c===Rb._for||c===Rb._with||c===Rb._while?
Ml.p_stat:Ml.p_expr);this.exprAllowed=!0};Rb.incDec.updateContext=function(){};Rb._function.updateContext=Rb._class.updateContext=function(c){!c.beforeExpr||c===Rb._else||c===Rb.semi&&this.curContext()!==Ml.p_stat||c===Rb._return&&Mr.test(this.input.slice(this.lastTokEnd,this.start))||(c===Rb.colon||c===Rb.braceL)&&this.curContext()===Ml.b_stat?this.context.push(Ml.f_stat):this.context.push(Ml.f_expr);this.exprAllowed=!1};Rb.backQuote.updateContext=function(){this.curContext()===Ml.q_tmpl?this.context.pop():
this.context.push(Ml.q_tmpl);this.exprAllowed=!1};Rb.star.updateContext=function(c){c===Rb._function&&(c=this.context.length-1,this.context[c]=this.context[c]===Ml.f_expr?Ml.f_expr_gen:Ml.f_gen);this.exprAllowed=!0};Rb.name.updateContext=function(c){var k=!1;6<=this.options.ecmaVersion&&c!==Rb.dot&&("of"===this.value&&!this.exprAllowed||"yield"===this.value&&this.inGeneratorContext())&&(k=!0);this.exprAllowed=k};var lga={9:"ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS",
10:"ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS Extended_Pictographic",
11:"ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS Extended_Pictographic",
12:"ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS Extended_Pictographic EBase EComp EMod EPres ExtPict"},
mga={9:"Adlam Adlm Ahom Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb",
10:"Adlam Adlm Ahom Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd",
11:"Adlam Adlm Ahom Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho",
12:"Adlam Adlm Ahom Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho Chorasmian Chrs Diak Dives_Akuru Khitan_Small_Script Kits Yezi Yezidi"},
z0={};kr(9);kr(10);kr(11);kr(12);var ih=cm.prototype,uy=function(c){this.parser=c;this.validFlags="gim"+(6<=c.options.ecmaVersion?"uy":"")+(9<=c.options.ecmaVersion?"s":"");this.unicodeProperties=z0[12<=c.options.ecmaVersion?12:c.options.ecmaVersion];this.flags=this.source="";this.start=0;this.switchN=this.switchU=!1;this.lastIntValue=this.pos=0;this.lastStringValue="";this.lastAssertionIsQuantifiable=!1;this.maxBackReference=this.numCapturingParens=0;this.groupNames=[];this.backReferenceNames=[]};
uy.prototype.reset=function(c,k,d){var h=-1!==d.indexOf("u");this.start=c|0;this.source=k+"";this.flags=d;this.switchU=h&&6<=this.parser.options.ecmaVersion;this.switchN=h&&9<=this.parser.options.ecmaVersion};uy.prototype.raise=function(c){this.parser.raiseRecoverable(this.start,"Invalid regular expression: /"+this.source+"/: "+c)};uy.prototype.at=function(c,k){void 0===k&&(k=!1);var d=this.source,h=d.length;if(c>=h)return-1;var n=d.charCodeAt(c);if(!k&&!this.switchU||55295>=n||57344<=n||c+1>=h)return n;
c=d.charCodeAt(c+1);return 56320<=c&&57343>=c?(n<<10)+c-56613888:n};uy.prototype.nextIndex=function(c,k){void 0===k&&(k=!1);var d=this.source,h=d.length;if(c>=h)return h;var n=d.charCodeAt(c),b;return!k&&!this.switchU||55295>=n||57344<=n||c+1>=h||56320>(b=d.charCodeAt(c+1))||57343<b?c+1:c+2};uy.prototype.current=function(c){void 0===c&&(c=!1);return this.at(this.pos,c)};uy.prototype.lookahead=function(c){void 0===c&&(c=!1);return this.at(this.nextIndex(this.pos,c),c)};uy.prototype.advance=function(c){void 0===
c&&(c=!1);this.pos=this.nextIndex(this.pos,c)};uy.prototype.eat=function(c,k){void 0===k&&(k=!1);return this.current(k)===c?(this.advance(k),!0):!1};ih.validateRegExpFlags=function(c){for(var k=c.validFlags,d=c.flags,h=0;h<d.length;h++){var n=d.charAt(h);-1===k.indexOf(n)&&this.raise(c.start,"Invalid regular expression flag");-1<d.indexOf(n,h+1)&&this.raise(c.start,"Duplicate regular expression flag")}};ih.validateRegExpPattern=function(c){this.regexp_pattern(c);!c.switchN&&9<=this.options.ecmaVersion&&
0<c.groupNames.length&&(c.switchN=!0,this.regexp_pattern(c))};ih.regexp_pattern=function(c){c.pos=0;c.lastIntValue=0;c.lastStringValue="";c.lastAssertionIsQuantifiable=!1;c.numCapturingParens=0;c.maxBackReference=0;c.groupNames.length=0;c.backReferenceNames.length=0;this.regexp_disjunction(c);c.pos!==c.source.length&&(c.eat(41)&&c.raise("Unmatched ')'"),(c.eat(93)||c.eat(125))&&c.raise("Lone quantifier brackets"));c.maxBackReference>c.numCapturingParens&&c.raise("Invalid escape");for(var k=0,d=c.backReferenceNames;k<
d.length;k+=1)-1===c.groupNames.indexOf(d[k])&&c.raise("Invalid named capture referenced")};ih.regexp_disjunction=function(c){for(this.regexp_alternative(c);c.eat(124);)this.regexp_alternative(c);this.regexp_eatQuantifier(c,!0)&&c.raise("Nothing to repeat");c.eat(123)&&c.raise("Lone quantifier brackets")};ih.regexp_alternative=function(c){for(;c.pos<c.source.length&&this.regexp_eatTerm(c););};ih.regexp_eatTerm=function(c){return this.regexp_eatAssertion(c)?(c.lastAssertionIsQuantifiable&&this.regexp_eatQuantifier(c)&&
c.switchU&&c.raise("Invalid quantifier"),!0):(c.switchU?this.regexp_eatAtom(c):this.regexp_eatExtendedAtom(c))?(this.regexp_eatQuantifier(c),!0):!1};ih.regexp_eatAssertion=function(c){var k=c.pos;c.lastAssertionIsQuantifiable=!1;if(c.eat(94)||c.eat(36))return!0;if(c.eat(92)){if(c.eat(66)||c.eat(98))return!0;c.pos=k}if(c.eat(40)&&c.eat(63)){var d=!1;9<=this.options.ecmaVersion&&(d=c.eat(60));if(c.eat(61)||c.eat(33))return this.regexp_disjunction(c),c.eat(41)||c.raise("Unterminated group"),c.lastAssertionIsQuantifiable=
!d,!0}c.pos=k;return!1};ih.regexp_eatQuantifier=function(c,k){void 0===k&&(k=!1);return this.regexp_eatQuantifierPrefix(c,k)?(c.eat(63),!0):!1};ih.regexp_eatQuantifierPrefix=function(c,k){return c.eat(42)||c.eat(43)||c.eat(63)||this.regexp_eatBracedQuantifier(c,k)};ih.regexp_eatBracedQuantifier=function(c,k){var d=c.pos;if(c.eat(123)){var h=-1;if(this.regexp_eatDecimalDigits(c)){var n=c.lastIntValue;c.eat(44)&&this.regexp_eatDecimalDigits(c)&&(h=c.lastIntValue);if(c.eat(125))return-1!==h&&h<n&&!k&&
c.raise("numbers out of order in {} quantifier"),!0}c.switchU&&!k&&c.raise("Incomplete quantifier");c.pos=d}return!1};ih.regexp_eatAtom=function(c){return this.regexp_eatPatternCharacters(c)||c.eat(46)||this.regexp_eatReverseSolidusAtomEscape(c)||this.regexp_eatCharacterClass(c)||this.regexp_eatUncapturingGroup(c)||this.regexp_eatCapturingGroup(c)};ih.regexp_eatReverseSolidusAtomEscape=function(c){var k=c.pos;if(c.eat(92)){if(this.regexp_eatAtomEscape(c))return!0;c.pos=k}return!1};ih.regexp_eatUncapturingGroup=
function(c){var k=c.pos;if(c.eat(40)){if(c.eat(63)&&c.eat(58)){this.regexp_disjunction(c);if(c.eat(41))return!0;c.raise("Unterminated group")}c.pos=k}return!1};ih.regexp_eatCapturingGroup=function(c){if(c.eat(40)){9<=this.options.ecmaVersion?this.regexp_groupSpecifier(c):63===c.current()&&c.raise("Invalid group");this.regexp_disjunction(c);if(c.eat(41))return c.numCapturingParens+=1,!0;c.raise("Unterminated group")}return!1};ih.regexp_eatExtendedAtom=function(c){return c.eat(46)||this.regexp_eatReverseSolidusAtomEscape(c)||
this.regexp_eatCharacterClass(c)||this.regexp_eatUncapturingGroup(c)||this.regexp_eatCapturingGroup(c)||this.regexp_eatInvalidBracedQuantifier(c)||this.regexp_eatExtendedPatternCharacter(c)};ih.regexp_eatInvalidBracedQuantifier=function(c){this.regexp_eatBracedQuantifier(c,!0)&&c.raise("Nothing to repeat");return!1};ih.regexp_eatSyntaxCharacter=function(c){var k=c.current();return hk(k)?(c.lastIntValue=k,c.advance(),!0):!1};ih.regexp_eatPatternCharacters=function(c){for(var k=c.pos,d=0;-1!==(d=c.current())&&
!hk(d);)c.advance();return c.pos!==k};ih.regexp_eatExtendedPatternCharacter=function(c){var k=c.current();return-1===k||36===k||40<=k&&43>=k||46===k||63===k||91===k||94===k||124===k?!1:(c.advance(),!0)};ih.regexp_groupSpecifier=function(c){c.eat(63)&&(this.regexp_eatGroupName(c)?(-1!==c.groupNames.indexOf(c.lastStringValue)&&c.raise("Duplicate capture group name"),c.groupNames.push(c.lastStringValue)):c.raise("Invalid group"))};ih.regexp_eatGroupName=function(c){c.lastStringValue="";if(c.eat(60)){if(this.regexp_eatRegExpIdentifierName(c)&&
c.eat(62))return!0;c.raise("Invalid capture group name")}return!1};ih.regexp_eatRegExpIdentifierName=function(c){c.lastStringValue="";if(this.regexp_eatRegExpIdentifierStart(c)){for(c.lastStringValue+=lz(c.lastIntValue);this.regexp_eatRegExpIdentifierPart(c);)c.lastStringValue+=lz(c.lastIntValue);return!0}return!1};ih.regexp_eatRegExpIdentifierStart=function(c){var k=c.pos,d=11<=this.options.ecmaVersion,h=c.current(d);c.advance(d);92===h&&this.regexp_eatRegExpUnicodeEscapeSequence(c,d)&&(h=c.lastIntValue);
d=h;if(lg(d,!0)||36===d||95===d)return c.lastIntValue=h,!0;c.pos=k;return!1};ih.regexp_eatRegExpIdentifierPart=function(c){var k=c.pos,d=11<=this.options.ecmaVersion,h=c.current(d);c.advance(d);92===h&&this.regexp_eatRegExpUnicodeEscapeSequence(c,d)&&(h=c.lastIntValue);d=h;if(ni(d,!0)||36===d||95===d||8204===d||8205===d)return c.lastIntValue=h,!0;c.pos=k;return!1};ih.regexp_eatAtomEscape=function(c){if(this.regexp_eatBackReference(c)||this.regexp_eatCharacterClassEscape(c)||this.regexp_eatCharacterEscape(c)||
c.switchN&&this.regexp_eatKGroupName(c))return!0;c.switchU&&(99===c.current()&&c.raise("Invalid unicode escape"),c.raise("Invalid escape"));return!1};ih.regexp_eatBackReference=function(c){var k=c.pos;if(this.regexp_eatDecimalEscape(c)){var d=c.lastIntValue;if(c.switchU)return d>c.maxBackReference&&(c.maxBackReference=d),!0;if(d<=c.numCapturingParens)return!0;c.pos=k}return!1};ih.regexp_eatKGroupName=function(c){if(c.eat(107)){if(this.regexp_eatGroupName(c))return c.backReferenceNames.push(c.lastStringValue),
!0;c.raise("Invalid named reference")}return!1};ih.regexp_eatCharacterEscape=function(c){return this.regexp_eatControlEscape(c)||this.regexp_eatCControlLetter(c)||this.regexp_eatZero(c)||this.regexp_eatHexEscapeSequence(c)||this.regexp_eatRegExpUnicodeEscapeSequence(c,!1)||!c.switchU&&this.regexp_eatLegacyOctalEscapeSequence(c)||this.regexp_eatIdentityEscape(c)};ih.regexp_eatCControlLetter=function(c){var k=c.pos;if(c.eat(99)){if(this.regexp_eatControlLetter(c))return!0;c.pos=k}return!1};ih.regexp_eatZero=
function(c){return 48!==c.current()||qB(c.lookahead())?!1:(c.lastIntValue=0,c.advance(),!0)};ih.regexp_eatControlEscape=function(c){var k=c.current();return 116===k?(c.lastIntValue=9,c.advance(),!0):110===k?(c.lastIntValue=10,c.advance(),!0):118===k?(c.lastIntValue=11,c.advance(),!0):102===k?(c.lastIntValue=12,c.advance(),!0):114===k?(c.lastIntValue=13,c.advance(),!0):!1};ih.regexp_eatControlLetter=function(c){var k=c.current();return 65<=k&&90>=k||97<=k&&122>=k?(c.lastIntValue=k%32,c.advance(),!0):
!1};ih.regexp_eatRegExpUnicodeEscapeSequence=function(c,k){void 0===k&&(k=!1);var d=c.pos;k=k||c.switchU;if(c.eat(117)){if(this.regexp_eatFixedHexDigits(c,4)){d=c.lastIntValue;if(k&&55296<=d&&56319>=d){k=c.pos;if(c.eat(92)&&c.eat(117)&&this.regexp_eatFixedHexDigits(c,4)){var h=c.lastIntValue;if(56320<=h&&57343>=h)return c.lastIntValue=1024*(d-55296)+(h-56320)+65536,!0}c.pos=k;c.lastIntValue=d}return!0}if(h=k&&c.eat(123)&&this.regexp_eatHexDigits(c)&&c.eat(125))h=c.lastIntValue,h=0<=h&&1114111>=h;
if(h)return!0;k&&c.raise("Invalid unicode escape");c.pos=d}return!1};ih.regexp_eatIdentityEscape=function(c){if(c.switchU)return this.regexp_eatSyntaxCharacter(c)?!0:c.eat(47)?(c.lastIntValue=47,!0):!1;var k=c.current();return 99===k||c.switchN&&107===k?!1:(c.lastIntValue=k,c.advance(),!0)};ih.regexp_eatDecimalEscape=function(c){c.lastIntValue=0;var k=c.current();if(49<=k&&57>=k){do c.lastIntValue=10*c.lastIntValue+(k-48),c.advance();while(48<=(k=c.current())&&57>=k);return!0}return!1};ih.regexp_eatCharacterClassEscape=
function(c){var k=c.current();if(100===k||68===k||115===k||83===k||119===k||87===k)return c.lastIntValue=-1,c.advance(),!0;if(c.switchU&&9<=this.options.ecmaVersion&&(80===k||112===k)){c.lastIntValue=-1;c.advance();if(c.eat(123)&&this.regexp_eatUnicodePropertyValueExpression(c)&&c.eat(125))return!0;c.raise("Invalid property name")}return!1};ih.regexp_eatUnicodePropertyValueExpression=function(c){var k=c.pos;if(this.regexp_eatUnicodePropertyName(c)&&c.eat(61)){var d=c.lastStringValue;if(this.regexp_eatUnicodePropertyValue(c))return this.regexp_validateUnicodePropertyNameAndValue(c,
d,c.lastStringValue),!0}c.pos=k;return this.regexp_eatLoneUnicodePropertyNameOrValue(c)?(this.regexp_validateUnicodePropertyNameOrValue(c,c.lastStringValue),!0):!1};ih.regexp_validateUnicodePropertyNameAndValue=function(c,k,d){RK.call(c.unicodeProperties.nonBinary,k)||c.raise("Invalid property name");c.unicodeProperties.nonBinary[k].test(d)||c.raise("Invalid property value")};ih.regexp_validateUnicodePropertyNameOrValue=function(c,k){c.unicodeProperties.binary.test(k)||c.raise("Invalid property name")};
ih.regexp_eatUnicodePropertyName=function(c){var k;for(c.lastStringValue="";ts(k=c.current());)c.lastStringValue+=lz(k),c.advance();return""!==c.lastStringValue};ih.regexp_eatUnicodePropertyValue=function(c){var k;for(c.lastStringValue="";SK(k=c.current());)c.lastStringValue+=lz(k),c.advance();return""!==c.lastStringValue};ih.regexp_eatLoneUnicodePropertyNameOrValue=function(c){return this.regexp_eatUnicodePropertyValue(c)};ih.regexp_eatCharacterClass=function(c){if(c.eat(91)){c.eat(94);this.regexp_classRanges(c);
if(c.eat(93))return!0;c.raise("Unterminated character class")}return!1};ih.regexp_classRanges=function(c){for(;this.regexp_eatClassAtom(c);){var k=c.lastIntValue;if(c.eat(45)&&this.regexp_eatClassAtom(c)){var d=c.lastIntValue;!c.switchU||-1!==k&&-1!==d||c.raise("Invalid character class");-1!==k&&-1!==d&&k>d&&c.raise("Range out of order in character class")}}};ih.regexp_eatClassAtom=function(c){var k=c.pos;if(c.eat(92)){if(this.regexp_eatClassEscape(c))return!0;if(c.switchU){var d=c.current();(99===
d||48<=d&&55>=d)&&c.raise("Invalid class escape");c.raise("Invalid escape")}c.pos=k}k=c.current();return 93!==k?(c.lastIntValue=k,c.advance(),!0):!1};ih.regexp_eatClassEscape=function(c){var k=c.pos;if(c.eat(98))return c.lastIntValue=8,!0;if(c.switchU&&c.eat(45))return c.lastIntValue=45,!0;if(!c.switchU&&c.eat(99)){if(this.regexp_eatClassControlLetter(c))return!0;c.pos=k}return this.regexp_eatCharacterClassEscape(c)||this.regexp_eatCharacterEscape(c)};ih.regexp_eatClassControlLetter=function(c){var k=
c.current();return qB(k)||95===k?(c.lastIntValue=k%32,c.advance(),!0):!1};ih.regexp_eatHexEscapeSequence=function(c){var k=c.pos;if(c.eat(120)){if(this.regexp_eatFixedHexDigits(c,2))return!0;c.switchU&&c.raise("Invalid escape");c.pos=k}return!1};ih.regexp_eatDecimalDigits=function(c){var k=c.pos,d;for(c.lastIntValue=0;qB(d=c.current());)c.lastIntValue=10*c.lastIntValue+(d-48),c.advance();return c.pos!==k};ih.regexp_eatHexDigits=function(c){var k=c.pos,d;for(c.lastIntValue=0;Kv(d=c.current());)c.lastIntValue=
16*c.lastIntValue+OG(d),c.advance();return c.pos!==k};ih.regexp_eatLegacyOctalEscapeSequence=function(c){if(this.regexp_eatOctalDigit(c)){var k=c.lastIntValue;if(this.regexp_eatOctalDigit(c)){var d=c.lastIntValue;3>=k&&this.regexp_eatOctalDigit(c)?c.lastIntValue=64*k+8*d+c.lastIntValue:c.lastIntValue=8*k+d}else c.lastIntValue=k;return!0}return!1};ih.regexp_eatOctalDigit=function(c){var k=c.current();if(48<=k&&55>=k)return c.lastIntValue=k-48,c.advance(),!0;c.lastIntValue=0;return!1};ih.regexp_eatFixedHexDigits=
function(c,k){for(var d=c.pos,h=c.lastIntValue=0;h<k;++h){var n=c.current();if(!Kv(n))return c.pos=d,!1;c.lastIntValue=16*c.lastIntValue+OG(n);c.advance()}return!0};var hO=function(c){this.type=c.type;this.value=c.value;this.start=c.start;this.end=c.end;c.options.locations&&(this.loc=new NG(c,c.startLoc,c.endLoc));c.options.ranges&&(this.range=[c.start,c.end])},yj=cm.prototype;yj.next=function(c){!c&&this.type.keyword&&this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword "+
this.type.keyword);if(this.options.onToken)this.options.onToken(new hO(this));this.lastTokEnd=this.end;this.lastTokStart=this.start;this.lastTokEndLoc=this.endLoc;this.lastTokStartLoc=this.startLoc;this.nextToken()};yj.getToken=function(){this.next();return new hO(this)};"undefined"!==typeof Symbol&&(yj[Symbol.iterator]=function(){var c=this;return{next:function(){var k=c.getToken();return{done:k.type===Rb.eof,value:k}}}});yj.curContext=function(){return this.context[this.context.length-1]};yj.nextToken=
function(){var c=this.curContext();c&&c.preserveSpace||this.skipSpace();this.start=this.pos;this.options.locations&&(this.startLoc=this.curPosition());if(this.pos>=this.input.length)return this.finishToken(Rb.eof);if(c.override)return c.override(this);this.readToken(this.fullCharCodeAtPos())};yj.readToken=function(c){return lg(c,6<=this.options.ecmaVersion)||92===c?this.readWord():this.getTokenFromCode(c)};yj.fullCharCodeAtPos=function(){var c=this.input.charCodeAt(this.pos);if(55295>=c||57344<=c)return c;
var k=this.input.charCodeAt(this.pos+1);return(c<<10)+k-56613888};yj.skipBlockComment=function(){var c=this.options.onComment&&this.curPosition(),k=this.pos,d=this.input.indexOf("*/",this.pos+=2);-1===d&&this.raise(this.pos-2,"Unterminated comment");this.pos=d+2;if(this.options.locations){PD.lastIndex=k;for(var h;(h=PD.exec(this.input))&&h.index<this.pos;)++this.curLine,this.lineStart=h.index+h[0].length}if(this.options.onComment)this.options.onComment(!0,this.input.slice(k+2,d),k,this.pos,c,this.curPosition())};
yj.skipLineComment=function(c){for(var k=this.pos,d=this.options.onComment&&this.curPosition(),h=this.input.charCodeAt(this.pos+=c);this.pos<this.input.length&&!dl(h);)h=this.input.charCodeAt(++this.pos);if(this.options.onComment)this.options.onComment(!1,this.input.slice(k+c,this.pos),k,this.pos,d,this.curPosition())};yj.skipSpace=function(){a:for(;this.pos<this.input.length;){var c=this.input.charCodeAt(this.pos);switch(c){case 32:case 160:++this.pos;break;case 13:10===this.input.charCodeAt(this.pos+
1)&&++this.pos;case 10:case 8232:case 8233:++this.pos;this.options.locations&&(++this.curLine,this.lineStart=this.pos);break;case 47:switch(this.input.charCodeAt(this.pos+1)){case 42:this.skipBlockComment();break;case 47:this.skipLineComment(2);break;default:break a}break;default:if(8<c&&14>c||5760<=c&&KW.test(String.fromCharCode(c)))++this.pos;else break a}}};yj.finishToken=function(c,k){this.end=this.pos;this.options.locations&&(this.endLoc=this.curPosition());var d=this.type;this.type=c;this.value=
k;this.updateContext(d)};yj.readToken_dot=function(){var c=this.input.charCodeAt(this.pos+1);if(48<=c&&57>=c)return this.readNumber(!0);var k=this.input.charCodeAt(this.pos+2);if(6<=this.options.ecmaVersion&&46===c&&46===k)return this.pos+=3,this.finishToken(Rb.ellipsis);++this.pos;return this.finishToken(Rb.dot)};yj.readToken_slash=function(){var c=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):61===c?this.finishOp(Rb.assign,2):this.finishOp(Rb.slash,1)};
yj.readToken_mult_modulo_exp=function(c){var k=this.input.charCodeAt(this.pos+1),d=1,h=42===c?Rb.star:Rb.modulo;7<=this.options.ecmaVersion&&42===c&&42===k&&(++d,h=Rb.starstar,k=this.input.charCodeAt(this.pos+2));return 61===k?this.finishOp(Rb.assign,d+1):this.finishOp(h,d)};yj.readToken_pipe_amp=function(c){var k=this.input.charCodeAt(this.pos+1);return k===c?12<=this.options.ecmaVersion&&61===this.input.charCodeAt(this.pos+2)?this.finishOp(Rb.assign,3):this.finishOp(124===c?Rb.logicalOR:Rb.logicalAND,
2):61===k?this.finishOp(Rb.assign,2):this.finishOp(124===c?Rb.bitwiseOR:Rb.bitwiseAND,1)};yj.readToken_caret=function(){return 61===this.input.charCodeAt(this.pos+1)?this.finishOp(Rb.assign,2):this.finishOp(Rb.bitwiseXOR,1)};yj.readToken_plus_min=function(c){var k=this.input.charCodeAt(this.pos+1);return k===c?45!==k||this.inModule||62!==this.input.charCodeAt(this.pos+2)||0!==this.lastTokEnd&&!Mr.test(this.input.slice(this.lastTokEnd,this.pos))?this.finishOp(Rb.incDec,2):(this.skipLineComment(3),
this.skipSpace(),this.nextToken()):61===k?this.finishOp(Rb.assign,2):this.finishOp(Rb.plusMin,1)};yj.readToken_lt_gt=function(c){var k=this.input.charCodeAt(this.pos+1),d=1;if(k===c)return d=62===c&&62===this.input.charCodeAt(this.pos+2)?3:2,61===this.input.charCodeAt(this.pos+d)?this.finishOp(Rb.assign,d+1):this.finishOp(Rb.bitShift,d);if(33===k&&60===c&&!this.inModule&&45===this.input.charCodeAt(this.pos+2)&&45===this.input.charCodeAt(this.pos+3))return this.skipLineComment(4),this.skipSpace(),
this.nextToken();61===k&&(d=2);return this.finishOp(Rb.relational,d)};yj.readToken_eq_excl=function(c){var k=this.input.charCodeAt(this.pos+1);return 61===k?this.finishOp(Rb.equality,61===this.input.charCodeAt(this.pos+2)?3:2):61===c&&62===k&&6<=this.options.ecmaVersion?(this.pos+=2,this.finishToken(Rb.arrow)):this.finishOp(61===c?Rb.eq:Rb.prefix,1)};yj.readToken_question=function(){var c=this.options.ecmaVersion;if(11<=c){var k=this.input.charCodeAt(this.pos+1);if(46===k){var d=this.input.charCodeAt(this.pos+
2);if(48>d||57<d)return this.finishOp(Rb.questionDot,2)}if(63===k)return 12<=c&&61===this.input.charCodeAt(this.pos+2)?this.finishOp(Rb.assign,3):this.finishOp(Rb.coalesce,2)}return this.finishOp(Rb.question,1)};yj.getTokenFromCode=function(c){switch(c){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(Rb.parenL);case 41:return++this.pos,this.finishToken(Rb.parenR);case 59:return++this.pos,this.finishToken(Rb.semi);case 44:return++this.pos,this.finishToken(Rb.comma);case 91:return++this.pos,
this.finishToken(Rb.bracketL);case 93:return++this.pos,this.finishToken(Rb.bracketR);case 123:return++this.pos,this.finishToken(Rb.braceL);case 125:return++this.pos,this.finishToken(Rb.braceR);case 58:return++this.pos,this.finishToken(Rb.colon);case 96:if(6>this.options.ecmaVersion)break;++this.pos;return this.finishToken(Rb.backQuote);case 48:c=this.input.charCodeAt(this.pos+1);if(120===c||88===c)return this.readRadixNumber(16);if(6<=this.options.ecmaVersion){if(111===c||79===c)return this.readRadixNumber(8);
if(98===c||66===c)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(c);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo_exp(c);case 124:case 38:return this.readToken_pipe_amp(c);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(c);case 60:case 62:return this.readToken_lt_gt(c);case 61:case 33:return this.readToken_eq_excl(c);
case 63:return this.readToken_question();case 126:return this.finishOp(Rb.prefix,1)}this.raise(this.pos,"Unexpected character '"+Yj(c)+"'")};yj.finishOp=function(c,k){var d=this.input.slice(this.pos,this.pos+k);this.pos+=k;return this.finishToken(c,d)};yj.readRegexp=function(){for(var c,k,d=this.pos;;){this.pos>=this.input.length&&this.raise(d,"Unterminated regular expression");var h=this.input.charAt(this.pos);Mr.test(h)&&this.raise(d,"Unterminated regular expression");if(c)c=!1;else{if("["===h)k=
!0;else if("]"===h&&k)k=!1;else if("/"===h&&!k)break;c="\\"===h}++this.pos}c=this.input.slice(d,this.pos);++this.pos;h=this.pos;k=this.readWord1();this.containsEsc&&this.unexpected(h);h=this.regexpState||(this.regexpState=new uy(this));h.reset(d,c,k);this.validateRegExpFlags(h);this.validateRegExpPattern(h);d=null;try{d=new RegExp(c,k)}catch(n){}return this.finishToken(Rb.regexp,{pattern:c,flags:k,value:d})};yj.readInt=function(c,k,d){var h=12<=this.options.ecmaVersion&&void 0===k;d=d&&48===this.input.charCodeAt(this.pos);
for(var n=this.pos,b=0,e=0,l=0,a=null==k?Infinity:k;l<a;++l,++this.pos){var f=this.input.charCodeAt(this.pos);if(h&&95===f)d&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed in legacy octal numeric literals"),95===e&&this.raiseRecoverable(this.pos,"Numeric separator must be exactly one underscore"),0===l&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed at the first of digits"),e=f;else{var m=97<=f?f-97+10:65<=f?f-65+10:48<=f&&57>=f?f-48:Infinity;if(m>=c)break;e=f;
b=b*c+m}}h&&95===e&&this.raiseRecoverable(this.pos-1,"Numeric separator is not allowed at the last of digits");return this.pos===n||null!=k&&this.pos-n!==k?null:b};yj.readRadixNumber=function(c){var k=this.pos;this.pos+=2;var d=this.readInt(c);null==d&&this.raise(this.start+2,"Expected number in radix "+c);11<=this.options.ecmaVersion&&110===this.input.charCodeAt(this.pos)?(d=Cj(this.input.slice(k,this.pos)),++this.pos):lg(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");
return this.finishToken(Rb.num,d)};yj.readNumber=function(c){var k=this.pos;c||null!==this.readInt(10,void 0,!0)||this.raise(k,"Invalid number");var d=2<=this.pos-k&&48===this.input.charCodeAt(k);d&&this.strict&&this.raise(k,"Invalid number");var h=this.input.charCodeAt(this.pos);if(!d&&!c&&11<=this.options.ecmaVersion&&110===h)return d=Cj(this.input.slice(k,this.pos)),++this.pos,lg(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(Rb.num,d);d&&/[89]/.test(this.input.slice(k,
this.pos))&&(d=!1);46!==h||d||(++this.pos,this.readInt(10),h=this.input.charCodeAt(this.pos));69!==h&&101!==h||d||(h=this.input.charCodeAt(++this.pos),43!==h&&45!==h||++this.pos,null===this.readInt(10)&&this.raise(k,"Invalid number"));lg(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");c=this.input.slice(k,this.pos);d=d?parseInt(c,8):parseFloat(c.replace(/_/g,""));return this.finishToken(Rb.num,d)};yj.readCodePoint=function(){if(123===this.input.charCodeAt(this.pos)){6>
this.options.ecmaVersion&&this.unexpected();var c=++this.pos;var k=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos);++this.pos;1114111<k&&this.invalidStringToken(c,"Code point out of bounds")}else k=this.readHexChar(4);return k};yj.readString=function(c){for(var k="",d=++this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");var h=this.input.charCodeAt(this.pos);if(h===c)break;92===h?(k+=this.input.slice(d,this.pos),k+=this.readEscapedChar(!1),d=
this.pos):(dl(h,10<=this.options.ecmaVersion)&&this.raise(this.start,"Unterminated string constant"),++this.pos)}k+=this.input.slice(d,this.pos++);return this.finishToken(Rb.string,k)};var x9={};yj.tryReadTemplateToken=function(){this.inTemplateElement=!0;try{this.readTmplToken()}catch(c){if(c===x9)this.readInvalidTemplateToken();else throw c;}this.inTemplateElement=!1};yj.invalidStringToken=function(c,k){if(this.inTemplateElement&&9<=this.options.ecmaVersion)throw x9;this.raise(c,k)};yj.readTmplToken=
function(){for(var c="",k=this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated template");var d=this.input.charCodeAt(this.pos);if(96===d||36===d&&123===this.input.charCodeAt(this.pos+1)){if(this.pos===this.start&&(this.type===Rb.template||this.type===Rb.invalidTemplate)){if(36===d)return this.pos+=2,this.finishToken(Rb.dollarBraceL);++this.pos;return this.finishToken(Rb.backQuote)}c+=this.input.slice(k,this.pos);return this.finishToken(Rb.template,c)}if(92===d)c+=this.input.slice(k,
this.pos),c+=this.readEscapedChar(!0),k=this.pos;else if(dl(d)){c+=this.input.slice(k,this.pos);++this.pos;switch(d){case 13:10===this.input.charCodeAt(this.pos)&&++this.pos;case 10:c+="\n";break;default:c+=String.fromCharCode(d)}this.options.locations&&(++this.curLine,this.lineStart=this.pos);k=this.pos}else++this.pos}};yj.readInvalidTemplateToken=function(){for(;this.pos<this.input.length;this.pos++)switch(this.input[this.pos]){case "\\":++this.pos;break;case "$":if("{"!==this.input[this.pos+1])break;
case "`":return this.finishToken(Rb.invalidTemplate,this.input.slice(this.start,this.pos))}this.raise(this.start,"Unterminated template")};yj.readEscapedChar=function(c){var k=this.input.charCodeAt(++this.pos);++this.pos;switch(k){case 110:return"\n";case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return Yj(this.readCodePoint());case 116:return"\t";case 98:return"\b";case 118:return"\x0B";case 102:return"\f";case 13:10===this.input.charCodeAt(this.pos)&&++this.pos;
case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";case 56:case 57:if(this.strict&&this.invalidStringToken(this.pos-1,"Invalid escape sequence"),c)return this.invalidStringToken(this.pos-1,"Invalid escape sequence in template string"),null;default:if(48<=k&&55>=k){var d=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],h=parseInt(d,8);255<h&&(d=d.slice(0,-1),h=parseInt(d,8));this.pos+=d.length-1;k=this.input.charCodeAt(this.pos);"0"===d&&56!==k&&57!==k||!this.strict&&
!c||this.invalidStringToken(this.pos-1-d.length,c?"Octal literal in template string":"Octal literal in strict mode");return String.fromCharCode(h)}return dl(k)?"":String.fromCharCode(k)}};yj.readHexChar=function(c){var k=this.pos;c=this.readInt(16,c);null===c&&this.invalidStringToken(k,"Bad character escape sequence");return c};yj.readWord1=function(){this.containsEsc=!1;for(var c="",k=!0,d=this.pos,h=6<=this.options.ecmaVersion;this.pos<this.input.length;){var n=this.fullCharCodeAtPos();if(ni(n,
h))this.pos+=65535>=n?1:2;else if(92===n)this.containsEsc=!0,c+=this.input.slice(d,this.pos),d=this.pos,117!==this.input.charCodeAt(++this.pos)&&this.invalidStringToken(this.pos,"Expecting Unicode escape sequence \\uXXXX"),++this.pos,n=this.readCodePoint(),(k?lg:ni)(n,h)||this.invalidStringToken(d,"Invalid Unicode escape"),c+=Yj(n),d=this.pos;else break;k=!1}return c+this.input.slice(d,this.pos)};yj.readWord=function(){var c=this.readWord1(),k=Rb.name;this.keywords.test(c)&&(k=PK[c]);return this.finishToken(k,
c)};cm.acorn={Parser:cm,version:"8.0.4",defaultOptions:QK,Position:QD,SourceLocation:NG,getLineInfo:rh,Node:vI,TokenType:Sj,tokTypes:Rb,keywordTypes:PK,TokContext:bt,tokContexts:Ml,isIdentifierChar:ni,isIdentifierStart:lg,Token:hO,isNewLine:dl,lineBreak:Mr,lineBreakG:PD,nonASCIIwhitespace:KW};var Fw=Object.freeze({__proto__:null,Node:vI,Parser:cm,Position:QD,SourceLocation:NG,TokContext:bt,Token:hO,TokenType:Sj,defaultOptions:QK,getLineInfo:rh,isIdentifierChar:ni,isIdentifierStart:lg,isNewLine:dl,
keywordTypes:PK,lineBreak:Mr,lineBreakG:PD,nonASCIIwhitespace:KW,parse:function(c,k){return cm.parse(c,k)},parseExpressionAt:function(c,k,d){return cm.parseExpressionAt(c,k,d)},tokContexts:Ml,tokTypes:Rb,tokenizer:function(c,k){return cm.tokenizer(c,k)},version:"8.0.4"});Ha("bE",Fw);var AC=function(c,k){this.node=c;this.state=k},pf={};pf.Program=pf.BlockStatement=function(c,k,d){var h=0;for(c=c.body;h<c.length;h+=1)d(c[h],k,"Statement")};pf.Statement=rB;pf.EmptyStatement=$c;pf.ExpressionStatement=
pf.ParenthesizedExpression=pf.ChainExpression=function(c,k,d){return d(c.expression,k,"Expression")};pf.IfStatement=function(c,k,d){d(c.test,k,"Expression");d(c.consequent,k,"Statement");c.alternate&&d(c.alternate,k,"Statement")};pf.LabeledStatement=function(c,k,d){return d(c.body,k,"Statement")};pf.BreakStatement=pf.ContinueStatement=$c;pf.WithStatement=function(c,k,d){d(c.object,k,"Expression");d(c.body,k,"Statement")};pf.SwitchStatement=function(c,k,d){d(c.discriminant,k,"Expression");var h=0;
for(c=c.cases;h<c.length;h+=1){var n=c[h];n.test&&d(n.test,k,"Expression");var b=0;for(n=n.consequent;b<n.length;b+=1)d(n[b],k,"Statement")}};pf.SwitchCase=function(c,k,d){c.test&&d(c.test,k,"Expression");var h=0;for(c=c.consequent;h<c.length;h+=1)d(c[h],k,"Statement")};pf.ReturnStatement=pf.YieldExpression=pf.AwaitExpression=function(c,k,d){c.argument&&d(c.argument,k,"Expression")};pf.ThrowStatement=pf.SpreadElement=function(c,k,d){return d(c.argument,k,"Expression")};pf.TryStatement=function(c,
k,d){d(c.block,k,"Statement");c.handler&&d(c.handler,k);c.finalizer&&d(c.finalizer,k,"Statement")};pf.CatchClause=function(c,k,d){c.param&&d(c.param,k,"Pattern");d(c.body,k,"Statement")};pf.WhileStatement=pf.DoWhileStatement=function(c,k,d){d(c.test,k,"Expression");d(c.body,k,"Statement")};pf.ForStatement=function(c,k,d){c.init&&d(c.init,k,"ForInit");c.test&&d(c.test,k,"Expression");c.update&&d(c.update,k,"Expression");d(c.body,k,"Statement")};pf.ForInStatement=pf.ForOfStatement=function(c,k,d){d(c.left,
k,"ForInit");d(c.right,k,"Expression");d(c.body,k,"Statement")};pf.ForInit=function(c,k,d){"VariableDeclaration"===c.type?d(c,k):d(c,k,"Expression")};pf.DebuggerStatement=$c;pf.FunctionDeclaration=function(c,k,d){return d(c,k,"Function")};pf.VariableDeclaration=function(c,k,d){var h=0;for(c=c.declarations;h<c.length;h+=1)d(c[h],k)};pf.VariableDeclarator=function(c,k,d){d(c.id,k,"Pattern");c.init&&d(c.init,k,"Expression")};pf.Function=function(c,k,d){c.id&&d(c.id,k,"Pattern");for(var h=0,n=c.params;h<
n.length;h+=1)d(n[h],k,"Pattern");d(c.body,k,c.expression?"Expression":"Statement")};pf.Pattern=function(c,k,d){"Identifier"===c.type?d(c,k,"VariablePattern"):"MemberExpression"===c.type?d(c,k,"MemberPattern"):d(c,k)};pf.VariablePattern=$c;pf.MemberPattern=rB;pf.RestElement=function(c,k,d){return d(c.argument,k,"Pattern")};pf.ArrayPattern=function(c,k,d){var h=0;for(c=c.elements;h<c.length;h+=1){var n=c[h];n&&d(n,k,"Pattern")}};pf.ObjectPattern=function(c,k,d){var h=0;for(c=c.properties;h<c.length;h+=
1){var n=c[h];"Property"===n.type?(n.computed&&d(n.key,k,"Expression"),d(n.value,k,"Pattern")):"RestElement"===n.type&&d(n.argument,k,"Pattern")}};pf.Expression=rB;pf.ThisExpression=pf.Super=pf.MetaProperty=$c;pf.ArrayExpression=function(c,k,d){var h=0;for(c=c.elements;h<c.length;h+=1){var n=c[h];n&&d(n,k,"Expression")}};pf.ObjectExpression=function(c,k,d){var h=0;for(c=c.properties;h<c.length;h+=1)d(c[h],k)};pf.FunctionExpression=pf.ArrowFunctionExpression=pf.FunctionDeclaration;pf.SequenceExpression=
function(c,k,d){var h=0;for(c=c.expressions;h<c.length;h+=1)d(c[h],k,"Expression")};pf.TemplateLiteral=function(c,k,d){for(var h=0,n=c.quasis;h<n.length;h+=1)d(n[h],k);h=0;for(c=c.expressions;h<c.length;h+=1)d(c[h],k,"Expression")};pf.TemplateElement=$c;pf.UnaryExpression=pf.UpdateExpression=function(c,k,d){d(c.argument,k,"Expression")};pf.BinaryExpression=pf.LogicalExpression=function(c,k,d){d(c.left,k,"Expression");d(c.right,k,"Expression")};pf.AssignmentExpression=pf.AssignmentPattern=function(c,
k,d){d(c.left,k,"Pattern");d(c.right,k,"Expression")};pf.ConditionalExpression=function(c,k,d){d(c.test,k,"Expression");d(c.consequent,k,"Expression");d(c.alternate,k,"Expression")};pf.NewExpression=pf.CallExpression=function(c,k,d){d(c.callee,k,"Expression");if(c.arguments){var h=0;for(c=c.arguments;h<c.length;h+=1)d(c[h],k,"Expression")}};pf.MemberExpression=function(c,k,d){d(c.object,k,"Expression");c.computed&&d(c.property,k,"Expression")};pf.ExportNamedDeclaration=pf.ExportDefaultDeclaration=
function(c,k,d){c.declaration&&d(c.declaration,k,"ExportNamedDeclaration"===c.type||c.declaration.id?"Statement":"Expression");c.source&&d(c.source,k,"Expression")};pf.ExportAllDeclaration=function(c,k,d){c.exported&&d(c.exported,k);d(c.source,k,"Expression")};pf.ImportDeclaration=function(c,k,d){for(var h=0,n=c.specifiers;h<n.length;h+=1)d(n[h],k);d(c.source,k,"Expression")};pf.ImportExpression=function(c,k,d){d(c.source,k,"Expression")};pf.ImportSpecifier=pf.ImportDefaultSpecifier=pf.ImportNamespaceSpecifier=
pf.Identifier=pf.Literal=$c;pf.TaggedTemplateExpression=function(c,k,d){d(c.tag,k,"Expression");d(c.quasi,k,"Expression")};pf.ClassDeclaration=pf.ClassExpression=function(c,k,d){return d(c,k,"Class")};pf.Class=function(c,k,d){c.id&&d(c.id,k,"Pattern");c.superClass&&d(c.superClass,k,"Expression");d(c.body,k)};pf.ClassBody=function(c,k,d){var h=0;for(c=c.body;h<c.length;h+=1)d(c[h],k)};pf.MethodDefinition=pf.Property=function(c,k,d){c.computed&&d(c.key,k,"Expression");d(c.value,k,"Expression")};var Iu=
Object.freeze({__proto__:null,ancestor:function(c,k,d,h,n){var b=[];d||(d=pf);(function m(l,a,f){f=f||l.type;var r=k[f],v=l!==b[b.length-1];v&&b.push(l);d[f](l,a,m);r&&r(l,a||b,b);v&&b.pop()})(c,h,n)},base:pf,findNodeAfter:function(c,k,d,h,n){d=us(d);h||(h=pf);try{(function f(e,l,a){if(!(e.end<k)){a=a||e.type;if(e.start>=k&&d(a,e))throw new AC(e,l);h[a](e,l,f)}})(c,n)}catch(b){if(b instanceof AC)return b;throw b;}},findNodeAround:function(c,k,d,h,n){d=us(d);h||(h=pf);try{(function f(e,l,a){a=a||e.type;
if(!(e.start>k||e.end<k)&&(h[a](e,l,f),d(a,e)))throw new AC(e,l);})(c,n)}catch(b){if(b instanceof AC)return b;throw b;}},findNodeAt:function(c,k,d,h,n,b){n||(n=pf);h=us(h);try{(function m(l,a,f){f=f||l.type;if((null==k||l.start<=k)&&(null==d||l.end>=d))n[f](l,a,m);if(!(null!=k&&l.start!==k||null!=d&&l.end!==d)&&h(f,l))throw new AC(l,a);})(c,b)}catch(e){if(e instanceof AC)return e;throw e;}},findNodeBefore:function(c,k,d,h,n){d=us(d);h||(h=pf);var b;(function m(l,a,f){l.start>k||(f=f||l.type,l.end<=
k&&(!b||b.node.end<l.end)&&d(f,l)&&(b=new AC(l,a)),h[f](l,a,m))})(c,n);return b},full:function(c,k,d,h,n){d||(d=pf);var b;(function m(l,a,f){f=f||l.type;d[f](l,a,m);b!==l&&(k(l,a,f),b=l)})(c,h,n)},fullAncestor:function(c,k,d,h){d||(d=pf);var n=[],b;(function m(l,a,f){f=f||l.type;var r=l!==n[n.length-1];r&&n.push(l);d[f](l,a,m);b!==l&&(k(l,a||n,n,f),b=l);r&&n.pop()})(c,h)},make:el,recursive:function(c,k,d,h,n){var b=d?el(d,h||void 0):h;(function m(l,a,f){b[f||l.type](l,a,m)})(c,k,n)},simple:function(c,
k,d,h,n){d||(d=pf);(function f(e,l,a){a=a||e.type;var m=k[a];d[a](e,l,f);m&&m(e,l)})(c,h,n)}}),NW={3:"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile",5:"class enum extends super const export import",6:"enum",strict:"implements interface let package private protected public static yield",strictBind:"eval arguments"},pna={5:"break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this",
"5module":"break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this export import",6:"break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this const class extends export import super"},qna=/^in(stanceof)?$/,OW="\u00aa\u00b5\u00ba\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u037f\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u052f\u0531-\u0556\u0559\u0560-\u0588\u05d0-\u05ea\u05ef-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u0860-\u086a\u08a0-\u08b4\u08b6-\u08c7\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u09fc\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0af9\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c39\u0c3d\u0c58-\u0c5a\u0c60\u0c61\u0c80\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d04-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d54-\u0d56\u0d5f-\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e86-\u0e8a\u0e8c-\u0ea3\u0ea5\u0ea7-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f5\u13f8-\u13fd\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f8\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1878\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191e\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19b0-\u19c9\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1c80-\u1c88\u1c90-\u1cba\u1cbd-\u1cbf\u1ce9-\u1cec\u1cee-\u1cf3\u1cf5\u1cf6\u1cfa\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2118-\u211d\u2124\u2126\u2128\u212a-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303c\u3041-\u3096\u309b-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312f\u3131-\u318e\u31a0-\u31bf\u31f0-\u31ff\u3400-\u4dbf\u4e00-\u9ffc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua69d\ua6a0-\ua6ef\ua717-\ua71f\ua722-\ua788\ua78b-\ua7bf\ua7c2-\ua7ca\ua7f5-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua8fd\ua8fe\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\ua9e0-\ua9e4\ua9e6-\ua9ef\ua9fa-\ua9fe\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa7e-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uab30-\uab5a\uab5c-\uab69\uab70-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc",
y9="\u200c\u200d\u00b7\u0300-\u036f\u0387\u0483-\u0487\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u0669\u0670\u06d6-\u06dc\u06df-\u06e4\u06e7\u06e8\u06ea-\u06ed\u06f0-\u06f9\u0711\u0730-\u074a\u07a6-\u07b0\u07c0-\u07c9\u07eb-\u07f3\u07fd\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0859-\u085b\u08d3-\u08e1\u08e3-\u0903\u093a-\u093c\u093e-\u094f\u0951-\u0957\u0962\u0963\u0966-\u096f\u0981-\u0983\u09bc\u09be-\u09c4\u09c7\u09c8\u09cb-\u09cd\u09d7\u09e2\u09e3\u09e6-\u09ef\u09fe\u0a01-\u0a03\u0a3c\u0a3e-\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a66-\u0a71\u0a75\u0a81-\u0a83\u0abc\u0abe-\u0ac5\u0ac7-\u0ac9\u0acb-\u0acd\u0ae2\u0ae3\u0ae6-\u0aef\u0afa-\u0aff\u0b01-\u0b03\u0b3c\u0b3e-\u0b44\u0b47\u0b48\u0b4b-\u0b4d\u0b55-\u0b57\u0b62\u0b63\u0b66-\u0b6f\u0b82\u0bbe-\u0bc2\u0bc6-\u0bc8\u0bca-\u0bcd\u0bd7\u0be6-\u0bef\u0c00-\u0c04\u0c3e-\u0c44\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0c66-\u0c6f\u0c81-\u0c83\u0cbc\u0cbe-\u0cc4\u0cc6-\u0cc8\u0cca-\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0ce6-\u0cef\u0d00-\u0d03\u0d3b\u0d3c\u0d3e-\u0d44\u0d46-\u0d48\u0d4a-\u0d4d\u0d57\u0d62\u0d63\u0d66-\u0d6f\u0d81-\u0d83\u0dca\u0dcf-\u0dd4\u0dd6\u0dd8-\u0ddf\u0de6-\u0def\u0df2\u0df3\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0e50-\u0e59\u0eb1\u0eb4-\u0ebc\u0ec8-\u0ecd\u0ed0-\u0ed9\u0f18\u0f19\u0f20-\u0f29\u0f35\u0f37\u0f39\u0f3e\u0f3f\u0f71-\u0f84\u0f86\u0f87\u0f8d-\u0f97\u0f99-\u0fbc\u0fc6\u102b-\u103e\u1040-\u1049\u1056-\u1059\u105e-\u1060\u1062-\u1064\u1067-\u106d\u1071-\u1074\u1082-\u108d\u108f-\u109d\u135d-\u135f\u1369-\u1371\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b4-\u17d3\u17dd\u17e0-\u17e9\u180b-\u180d\u1810-\u1819\u18a9\u1920-\u192b\u1930-\u193b\u1946-\u194f\u19d0-\u19da\u1a17-\u1a1b\u1a55-\u1a5e\u1a60-\u1a7c\u1a7f-\u1a89\u1a90-\u1a99\u1ab0-\u1abd\u1abf\u1ac0\u1b00-\u1b04\u1b34-\u1b44\u1b50-\u1b59\u1b6b-\u1b73\u1b80-\u1b82\u1ba1-\u1bad\u1bb0-\u1bb9\u1be6-\u1bf3\u1c24-\u1c37\u1c40-\u1c49\u1c50-\u1c59\u1cd0-\u1cd2\u1cd4-\u1ce8\u1ced\u1cf4\u1cf7-\u1cf9\u1dc0-\u1df9\u1dfb-\u1dff\u203f\u2040\u2054\u20d0-\u20dc\u20e1\u20e5-\u20f0\u2cef-\u2cf1\u2d7f\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua620-\ua629\ua66f\ua674-\ua67d\ua69e\ua69f\ua6f0\ua6f1\ua802\ua806\ua80b\ua823-\ua827\ua82c\ua880\ua881\ua8b4-\ua8c5\ua8d0-\ua8d9\ua8e0-\ua8f1\ua8ff-\ua909\ua926-\ua92d\ua947-\ua953\ua980-\ua983\ua9b3-\ua9c0\ua9d0-\ua9d9\ua9e5\ua9f0-\ua9f9\uaa29-\uaa36\uaa43\uaa4c\uaa4d\uaa50-\uaa59\uaa7b-\uaa7d\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uaaeb-\uaaef\uaaf5\uaaf6\uabe3-\uabea\uabec\uabed\uabf0-\uabf9\ufb1e\ufe00-\ufe0f\ufe20-\ufe2f\ufe33\ufe34\ufe4d-\ufe4f\uff10-\uff19\uff3f",
nga=new RegExp("["+OW+"]"),oga=new RegExp("["+OW+y9+"]");OW=y9=null;var A0=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,157,310,10,21,11,7,153,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,349,41,7,1,79,28,11,0,9,21,107,20,28,22,13,52,76,44,33,24,27,35,30,0,3,0,9,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,85,6,2,0,2,3,2,
14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,159,52,19,3,21,2,31,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,14,0,72,26,230,43,117,63,32,7,3,0,3,7,2,1,2,23,16,0,2,0,95,7,3,38,17,0,2,0,29,0,11,39,8,0,22,0,12,45,20,0,35,56,264,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,190,0,80,921,103,110,18,195,2749,1070,4050,582,8634,568,8,30,114,29,19,47,17,3,32,20,6,18,689,63,129,74,6,0,67,12,65,1,2,0,29,6135,9,1237,43,8,8952,286,50,2,18,3,9,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,
0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,2357,44,11,6,17,0,370,43,1301,196,60,67,8,0,1205,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42717,35,4148,12,221,3,5761,15,7472,3104,541,1507,4938],pga=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,370,1,154,10,176,2,54,14,32,9,16,3,46,10,54,9,7,2,37,13,2,9,6,1,45,0,
13,2,49,13,9,3,2,11,83,11,7,0,161,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,193,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,84,14,5,9,243,14,166,9,71,5,2,1,3,3,2,0,2,1,13,9,120,6,3,6,4,0,29,9,41,6,2,3,9,0,10,10,47,15,406,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,19306,9,135,4,60,6,26,9,1014,0,2,54,8,3,82,0,12,1,19628,1,5319,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,262,6,10,9,419,13,1495,6,110,6,6,9,4759,
9,787719,239],Zj=function(c,k){void 0===k&&(k={});this.label=c;this.keyword=k.keyword;this.beforeExpr=!!k.beforeExpr;this.startsExpr=!!k.startsExpr;this.isLoop=!!k.isLoop;this.isAssign=!!k.isAssign;this.prefix=!!k.prefix;this.postfix=!!k.postfix;this.binop=k.binop||null;this.updateContext=null},ct={beforeExpr:!0},Nr={startsExpr:!0},IS={},Ya={num:new Zj("num",Nr),regexp:new Zj("regexp",Nr),string:new Zj("string",Nr),name:new Zj("name",Nr),eof:new Zj("eof"),bracketL:new Zj("[",{beforeExpr:!0,startsExpr:!0}),
bracketR:new Zj("]"),braceL:new Zj("{",{beforeExpr:!0,startsExpr:!0}),braceR:new Zj("}"),parenL:new Zj("(",{beforeExpr:!0,startsExpr:!0}),parenR:new Zj(")"),comma:new Zj(",",ct),semi:new Zj(";",ct),colon:new Zj(":",ct),dot:new Zj("."),question:new Zj("?",ct),questionDot:new Zj("?."),arrow:new Zj("=>",ct),template:new Zj("template"),invalidTemplate:new Zj("invalidTemplate"),ellipsis:new Zj("...",ct),backQuote:new Zj("`",Nr),dollarBraceL:new Zj("${",{beforeExpr:!0,startsExpr:!0}),eq:new Zj("=",{beforeExpr:!0,
isAssign:!0}),assign:new Zj("_=",{beforeExpr:!0,isAssign:!0}),incDec:new Zj("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new Zj("!/~",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:Dm("||",1),logicalAND:Dm("&&",2),bitwiseOR:Dm("|",3),bitwiseXOR:Dm("^",4),bitwiseAND:Dm("&",5),equality:Dm("==/!=/===/!==",6),relational:Dm("</>/<=/>=",7),bitShift:Dm("<</>>/>>>",8),plusMin:new Zj("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:Dm("%",10),star:Dm("*",10),slash:Dm("/",10),starstar:new Zj("**",
{beforeExpr:!0}),coalesce:Dm("??",1),_break:Mi("break"),_case:Mi("case",ct),_catch:Mi("catch"),_continue:Mi("continue"),_debugger:Mi("debugger"),_default:Mi("default",ct),_do:Mi("do",{isLoop:!0,beforeExpr:!0}),_else:Mi("else",ct),_finally:Mi("finally"),_for:Mi("for",{isLoop:!0}),_function:Mi("function",Nr),_if:Mi("if"),_return:Mi("return",ct),_switch:Mi("switch"),_throw:Mi("throw",ct),_try:Mi("try"),_var:Mi("var"),_const:Mi("const"),_while:Mi("while",{isLoop:!0}),_with:Mi("with"),_new:Mi("new",{beforeExpr:!0,
startsExpr:!0}),_this:Mi("this",Nr),_super:Mi("super",Nr),_class:Mi("class",Nr),_extends:Mi("extends",ct),_export:Mi("export"),_import:Mi("import",Nr),_null:Mi("null",Nr),_true:Mi("true",Nr),_false:Mi("false",Nr),_in:Mi("in",{beforeExpr:!0,binop:7}),_instanceof:Mi("instanceof",{beforeExpr:!0,binop:7}),_typeof:Mi("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_void:Mi("void",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_delete:Mi("delete",{beforeExpr:!0,prefix:!0,startsExpr:!0})},Or=/\r\n?|\n|\u2028|\u2029/,
sB=new RegExp(Or.source,"g"),z9=/[\u1680\u2000-\u200a\u202f\u205f\u3000\ufeff]/,dt=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,A9=Object.prototype,UK=A9.hasOwnProperty,rna=A9.toString,C0=Array.isArray||function(c){return"[object Array]"===rna.call(c)},PG=function(c,k){this.line=c;this.column=k};PG.prototype.offset=function(c){return new PG(this.line,this.column+c)};var RD=function(c,k,d){this.start=k;this.end=d;null!==c.sourceFile&&(this.source=c.sourceFile)},TK={ecmaVersion:null,sourceType:"script",onInsertedSemicolon:null,
onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowAwaitOutsideFunction:!1,allowHashBang:!1,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1},B0=!1,xn=function(c,k,d){this.options=c=QG(c);this.sourceFile=c.sourceFile;this.keywords=$o(pna[6<=c.ecmaVersion?6:"module"===c.sourceType?"5module":5]);var h="";!0!==c.allowReserved&&(h=NW[6<=c.ecmaVersion?6:5===c.ecmaVersion?5:3],"module"===
c.sourceType&&(h+=" await"));this.reservedWords=$o(h);h=(h?h+" ":"")+NW.strict;this.reservedWordsStrict=$o(h);this.reservedWordsStrictBind=$o(h+" "+NW.strictBind);this.input=String(k);this.containsEsc=!1;d?(this.pos=d,this.lineStart=this.input.lastIndexOf("\n",d-1)+1,this.curLine=this.input.slice(0,this.lineStart).split(Or).length):(this.pos=this.lineStart=0,this.curLine=1);this.type=Ya.eof;this.value=null;this.start=this.end=this.pos;this.startLoc=this.endLoc=this.curPosition();this.lastTokEndLoc=
this.lastTokStartLoc=null;this.lastTokStart=this.lastTokEnd=this.pos;this.context=this.initialContext();this.exprAllowed=!0;this.strict=(this.inModule="module"===c.sourceType)||this.strictDirective(this.pos);this.potentialArrowAt=-1;this.yieldPos=this.awaitPos=this.awaitIdentPos=0;this.labels=[];this.undefinedExports=Object.create(null);0===this.pos&&c.allowHashBang&&"#!"===this.input.slice(0,2)&&this.skipLineComment(2);this.scopeStack=[];this.enterScope(1);this.regexpState=null},qA={inFunction:{configurable:!0},
inGenerator:{configurable:!0},inAsync:{configurable:!0},allowSuper:{configurable:!0},allowDirectSuper:{configurable:!0},treatFunctionsAsVar:{configurable:!0},inNonArrowFunction:{configurable:!0}};xn.prototype.parse=function(){var c=this.options.program||this.startNode();this.nextToken();return this.parseTopLevel(c)};qA.inFunction.get=function(){return 0<(this.currentVarScope().flags&2)};qA.inGenerator.get=function(){return 0<(this.currentVarScope().flags&8)};qA.inAsync.get=function(){return 0<(this.currentVarScope().flags&
4)};qA.allowSuper.get=function(){return 0<(this.currentThisScope().flags&64)};qA.allowDirectSuper.get=function(){return 0<(this.currentThisScope().flags&128)};qA.treatFunctionsAsVar.get=function(){return this.treatFunctionsAsVarInScope(this.currentScope())};qA.inNonArrowFunction.get=function(){return 0<(this.currentThisScope().flags&2)};xn.extend=function(){for(var c=[],k=arguments.length;k--;)c[k]=arguments[k];k=this;for(var d=0;d<c.length;d++)k=c[d](k);return k};xn.parse=function(c,k){return(new this(k,
c)).parse()};xn.parseExpressionAt=function(c,k,d){c=new this(d,c,k);c.nextToken();return c.parseExpression()};xn.tokenizer=function(c,k){return new this(k,c)};Object.defineProperties(xn.prototype,qA);var Pp=xn.prototype,sna=/^(?:'((?:\\.|[^'\\])*?)'|"((?:\\.|[^"\\])*?)")/;Pp.strictDirective=function(c){for(;;){dt.lastIndex=c;c+=dt.exec(this.input)[0].length;var k=sna.exec(this.input.slice(c));if(!k)return!1;if("use strict"===(k[1]||k[2])){dt.lastIndex=c+k[0].length;c=dt.exec(this.input);k=c.index+
c[0].length;var d=this.input.charAt(k);return";"===d||"}"===d||Or.test(c[0])&&!(/[(`.[+\-/*%<>=,?^&]/.test(d)||"!"===d&&"="===this.input.charAt(k+1))}c+=k[0].length;dt.lastIndex=c;c+=dt.exec(this.input)[0].length;";"===this.input[c]&&c++}};Pp.eat=function(c){return this.type===c?(this.next(),!0):!1};Pp.isContextual=function(c){return this.type===Ya.name&&this.value===c&&!this.containsEsc};Pp.eatContextual=function(c){if(!this.isContextual(c))return!1;this.next();return!0};Pp.expectContextual=function(c){this.eatContextual(c)||
this.unexpected()};Pp.canInsertSemicolon=function(){return this.type===Ya.eof||this.type===Ya.braceR||Or.test(this.input.slice(this.lastTokEnd,this.start))};Pp.insertSemicolon=function(){if(this.canInsertSemicolon()){if(this.options.onInsertedSemicolon)this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc);return!0}};Pp.semicolon=function(){this.eat(Ya.semi)||this.insertSemicolon()||this.unexpected()};Pp.afterTrailingComma=function(c,k){if(this.type===c){if(this.options.onTrailingComma)this.options.onTrailingComma(this.lastTokStart,
this.lastTokStartLoc);k||this.next();return!0}};Pp.expect=function(c){this.eat(c)||this.unexpected()};Pp.unexpected=function(c){this.raise(null!=c?c:this.start,"Unexpected token")};Pp.checkPatternErrors=function(c,k){c&&(-1<c.trailingComma&&this.raiseRecoverable(c.trailingComma,"Comma is not permitted after the rest element"),c=k?c.parenthesizedAssign:c.parenthesizedBind,-1<c&&this.raiseRecoverable(c,"Parenthesized pattern"))};Pp.checkExpressionErrors=function(c,k){if(!c)return!1;var d=c.shorthandAssign;
c=c.doubleProto;if(!k)return 0<=d||0<=c;0<=d&&this.raise(d,"Shorthand property assignments are valid only in destructuring patterns");0<=c&&this.raiseRecoverable(c,"Redefinition of __proto__ property")};Pp.checkYieldAwaitInDefaultParams=function(){this.yieldPos&&(!this.awaitPos||this.yieldPos<this.awaitPos)&&this.raise(this.yieldPos,"Yield expression cannot be a default value");this.awaitPos&&this.raise(this.awaitPos,"Await expression cannot be a default value")};Pp.isSimpleAssignTarget=function(c){return"ParenthesizedExpression"===
c.type?this.isSimpleAssignTarget(c.expression):"Identifier"===c.type||"MemberExpression"===c.type};var Ji=xn.prototype;Ji.parseTopLevel=function(c){var k=Object.create(null);c.body||(c.body=[]);for(;this.type!==Ya.eof;){var d=this.parseStatement(null,!0,k);c.body.push(d)}if(this.inModule)for(k=0,d=Object.keys(this.undefinedExports);k<d.length;k+=1){var h=d[k];this.raiseRecoverable(this.undefinedExports[h].start,"Export '"+h+"' is not defined")}this.adaptDirectivePrologue(c.body);this.next();c.sourceType=
this.options.sourceType;return this.finishNode(c,"Program")};var PW={kind:"loop"},tna={kind:"switch"};Ji.isLet=function(c){if(6>this.options.ecmaVersion||!this.isContextual("let"))return!1;dt.lastIndex=this.pos;var k=dt.exec(this.input);k=this.pos+k[0].length;var d=this.input.charCodeAt(k);if(91===d)return!0;if(c)return!1;if(123===d)return!0;if(zo(d,!0)){for(c=k+1;vs(this.input.charCodeAt(c),!0);)++c;c=this.input.slice(k,c);if(!qna.test(c))return!0}return!1};Ji.isAsyncFunction=function(){if(8>this.options.ecmaVersion||
!this.isContextual("async"))return!1;dt.lastIndex=this.pos;var c=dt.exec(this.input);c=this.pos+c[0].length;return!Or.test(this.input.slice(this.pos,c))&&"function"===this.input.slice(c,c+8)&&(c+8===this.input.length||!vs(this.input.charAt(c+8)))};Ji.parseStatement=function(c,k,d){var h=this.type,n=this.startNode();if(this.isLet(c)){h=Ya._var;var b="let"}switch(h){case Ya._break:case Ya._continue:return this.parseBreakContinueStatement(n,h.keyword);case Ya._debugger:return this.parseDebuggerStatement(n);
case Ya._do:return this.parseDoStatement(n);case Ya._for:return this.parseForStatement(n);case Ya._function:return c&&(this.strict||"if"!==c&&"label"!==c)&&6<=this.options.ecmaVersion&&this.unexpected(),this.parseFunctionStatement(n,!1,!c);case Ya._class:return c&&this.unexpected(),this.parseClass(n,!0);case Ya._if:return this.parseIfStatement(n);case Ya._return:return this.parseReturnStatement(n);case Ya._switch:return this.parseSwitchStatement(n);case Ya._throw:return this.parseThrowStatement(n);
case Ya._try:return this.parseTryStatement(n);case Ya._const:case Ya._var:return b=b||this.value,c&&"var"!==b&&this.unexpected(),this.parseVarStatement(n,b);case Ya._while:return this.parseWhileStatement(n);case Ya._with:return this.parseWithStatement(n);case Ya.braceL:return this.parseBlock(!0,n);case Ya.semi:return this.parseEmptyStatement(n);case Ya._export:case Ya._import:if(10<this.options.ecmaVersion&&h===Ya._import&&(dt.lastIndex=this.pos,c=dt.exec(this.input),c=this.input.charCodeAt(this.pos+
c[0].length),40===c||46===c))return this.parseExpressionStatement(n,this.parseExpression());this.options.allowImportExportEverywhere||(k||this.raise(this.start,"'import' and 'export' may only appear at the top level"),this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'"));return h===Ya._import?this.parseImport(n):this.parseExport(n,d);default:if(this.isAsyncFunction())return c&&this.unexpected(),this.next(),this.parseFunctionStatement(n,!0,!c);k=this.value;
d=this.parseExpression();return h===Ya.name&&"Identifier"===d.type&&this.eat(Ya.colon)?this.parseLabeledStatement(n,k,d,c):this.parseExpressionStatement(n,d)}};Ji.parseBreakContinueStatement=function(c,k){var d="break"===k;this.next();this.eat(Ya.semi)||this.insertSemicolon()?c.label=null:this.type!==Ya.name?this.unexpected():(c.label=this.parseIdent(),this.semicolon());for(var h=0;h<this.labels.length;++h){var n=this.labels[h];if(null==c.label||n.name===c.label.name){if(null!=n.kind&&(d||"loop"===
n.kind))break;if(c.label&&d)break}}h===this.labels.length&&this.raise(c.start,"Unsyntactic "+k);return this.finishNode(c,d?"BreakStatement":"ContinueStatement")};Ji.parseDebuggerStatement=function(c){this.next();this.semicolon();return this.finishNode(c,"DebuggerStatement")};Ji.parseDoStatement=function(c){this.next();this.labels.push(PW);c.body=this.parseStatement("do");this.labels.pop();this.expect(Ya._while);c.test=this.parseParenExpression();6<=this.options.ecmaVersion?this.eat(Ya.semi):this.semicolon();
return this.finishNode(c,"DoWhileStatement")};Ji.parseForStatement=function(c){this.next();var k=9<=this.options.ecmaVersion&&(this.inAsync||!this.inFunction&&this.options.allowAwaitOutsideFunction)&&this.eatContextual("await")?this.lastTokStart:-1;this.labels.push(PW);this.enterScope(0);this.expect(Ya.parenL);if(this.type===Ya.semi)return-1<k&&this.unexpected(k),this.parseFor(c,null);var d=this.isLet();if(this.type===Ya._var||this.type===Ya._const||d){var h=this.startNode();d=d?"let":this.value;
this.next();this.parseVar(h,!0,d);this.finishNode(h,"VariableDeclaration");if((this.type===Ya._in||6<=this.options.ecmaVersion&&this.isContextual("of"))&&1===h.declarations.length)return 9<=this.options.ecmaVersion&&(this.type===Ya._in?-1<k&&this.unexpected(k):c.await=-1<k),this.parseForIn(c,h);-1<k&&this.unexpected(k);return this.parseFor(c,h)}h=new Gx;d=this.parseExpression(!0,h);if(this.type===Ya._in||6<=this.options.ecmaVersion&&this.isContextual("of"))return 9<=this.options.ecmaVersion&&(this.type===
Ya._in?-1<k&&this.unexpected(k):c.await=-1<k),this.toAssignable(d,!1,h),this.checkLValPattern(d),this.parseForIn(c,d);this.checkExpressionErrors(h,!0);-1<k&&this.unexpected(k);return this.parseFor(c,d)};Ji.parseFunctionStatement=function(c,k,d){this.next();return this.parseFunction(c,xI|(d?0:QW),!1,k)};Ji.parseIfStatement=function(c){this.next();c.test=this.parseParenExpression();c.consequent=this.parseStatement("if");c.alternate=this.eat(Ya._else)?this.parseStatement("if"):null;return this.finishNode(c,
"IfStatement")};Ji.parseReturnStatement=function(c){this.inFunction||this.options.allowReturnOutsideFunction||this.raise(this.start,"'return' outside of function");this.next();this.eat(Ya.semi)||this.insertSemicolon()?c.argument=null:(c.argument=this.parseExpression(),this.semicolon());return this.finishNode(c,"ReturnStatement")};Ji.parseSwitchStatement=function(c){this.next();c.discriminant=this.parseParenExpression();c.cases=[];this.expect(Ya.braceL);this.labels.push(tna);this.enterScope(0);for(var k,
d=!1;this.type!==Ya.braceR;)if(this.type===Ya._case||this.type===Ya._default){var h=this.type===Ya._case;k&&this.finishNode(k,"SwitchCase");c.cases.push(k=this.startNode());k.consequent=[];this.next();h?k.test=this.parseExpression():(d&&this.raiseRecoverable(this.lastTokStart,"Multiple default clauses"),d=!0,k.test=null);this.expect(Ya.colon)}else k||this.unexpected(),k.consequent.push(this.parseStatement(null));this.exitScope();k&&this.finishNode(k,"SwitchCase");this.next();this.labels.pop();return this.finishNode(c,
"SwitchStatement")};Ji.parseThrowStatement=function(c){this.next();Or.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw");c.argument=this.parseExpression();this.semicolon();return this.finishNode(c,"ThrowStatement")};var una=[];Ji.parseTryStatement=function(c){this.next();c.block=this.parseBlock();c.handler=null;if(this.type===Ya._catch){var k=this.startNode();this.next();if(this.eat(Ya.parenL)){k.param=this.parseBindingAtom();var d="Identifier"===
k.param.type;this.enterScope(d?32:0);this.checkLValPattern(k.param,d?4:2);this.expect(Ya.parenR)}else 10>this.options.ecmaVersion&&this.unexpected(),k.param=null,this.enterScope(0);k.body=this.parseBlock(!1);this.exitScope();c.handler=this.finishNode(k,"CatchClause")}c.finalizer=this.eat(Ya._finally)?this.parseBlock():null;c.handler||c.finalizer||this.raise(c.start,"Missing catch or finally clause");return this.finishNode(c,"TryStatement")};Ji.parseVarStatement=function(c,k){this.next();this.parseVar(c,
!1,k);this.semicolon();return this.finishNode(c,"VariableDeclaration")};Ji.parseWhileStatement=function(c){this.next();c.test=this.parseParenExpression();this.labels.push(PW);c.body=this.parseStatement("while");this.labels.pop();return this.finishNode(c,"WhileStatement")};Ji.parseWithStatement=function(c){this.strict&&this.raise(this.start,"'with' in strict mode");this.next();c.object=this.parseParenExpression();c.body=this.parseStatement("with");return this.finishNode(c,"WithStatement")};Ji.parseEmptyStatement=
function(c){this.next();return this.finishNode(c,"EmptyStatement")};Ji.parseLabeledStatement=function(c,k,d,h){for(var n=0,b=this.labels;n<b.length;n+=1)b[n].name===k&&this.raise(d.start,"Label '"+k+"' is already declared");n=this.type.isLoop?"loop":this.type===Ya._switch?"switch":null;for(b=this.labels.length-1;0<=b;b--){var e=this.labels[b];if(e.statementStart===c.start)e.statementStart=this.start,e.kind=n;else break}this.labels.push({name:k,kind:n,statementStart:this.start});c.body=this.parseStatement(h?
-1===h.indexOf("label")?h+"label":h:"label");this.labels.pop();c.label=d;return this.finishNode(c,"LabeledStatement")};Ji.parseExpressionStatement=function(c,k){c.expression=k;this.semicolon();return this.finishNode(c,"ExpressionStatement")};Ji.parseBlock=function(c,k,d){void 0===c&&(c=!0);void 0===k&&(k=this.startNode());k.body=[];this.expect(Ya.braceL);for(c&&this.enterScope(0);this.type!==Ya.braceR;){var h=this.parseStatement(null);k.body.push(h)}d&&(this.strict=!1);this.next();c&&this.exitScope();
return this.finishNode(k,"BlockStatement")};Ji.parseFor=function(c,k){c.init=k;this.expect(Ya.semi);c.test=this.type===Ya.semi?null:this.parseExpression();this.expect(Ya.semi);c.update=this.type===Ya.parenR?null:this.parseExpression();this.expect(Ya.parenR);c.body=this.parseStatement("for");this.exitScope();this.labels.pop();return this.finishNode(c,"ForStatement")};Ji.parseForIn=function(c,k){var d=this.type===Ya._in;this.next();"VariableDeclaration"===k.type&&null!=k.declarations[0].init&&(!d||
8>this.options.ecmaVersion||this.strict||"var"!==k.kind||"Identifier"!==k.declarations[0].id.type)&&this.raise(k.start,(d?"for-in":"for-of")+" loop variable declaration may not have an initializer");c.left=k;c.right=d?this.parseExpression():this.parseMaybeAssign();this.expect(Ya.parenR);c.body=this.parseStatement("for");this.exitScope();this.labels.pop();return this.finishNode(c,d?"ForInStatement":"ForOfStatement")};Ji.parseVar=function(c,k,d){c.declarations=[];for(c.kind=d;;){var h=this.startNode();
this.parseVarId(h,d);this.eat(Ya.eq)?h.init=this.parseMaybeAssign(k):"const"!==d||this.type===Ya._in||6<=this.options.ecmaVersion&&this.isContextual("of")?"Identifier"===h.id.type||k&&(this.type===Ya._in||this.isContextual("of"))?h.init=null:this.raise(this.lastTokEnd,"Complex binding patterns require an initialization value"):this.unexpected();c.declarations.push(this.finishNode(h,"VariableDeclarator"));if(!this.eat(Ya.comma))break}return c};Ji.parseVarId=function(c,k){c.id=this.parseBindingAtom();
this.checkLValPattern(c.id,"var"===k?1:2,!1)};var xI=1,QW=2;Ji.parseFunction=function(c,k,d,h){this.initFunction(c);if(9<=this.options.ecmaVersion||6<=this.options.ecmaVersion&&!h)this.type===Ya.star&&k&QW&&this.unexpected(),c.generator=this.eat(Ya.star);8<=this.options.ecmaVersion&&(c.async=!!h);k&xI&&(c.id=k&4&&this.type!==Ya.name?null:this.parseIdent(),!c.id||k&QW||this.checkLValSimple(c.id,this.strict||c.generator||c.async?this.treatFunctionsAsVar?1:2:3));h=this.yieldPos;var n=this.awaitPos,b=
this.awaitIdentPos;this.awaitIdentPos=this.awaitPos=this.yieldPos=0;this.enterScope(2|(c.async?4:0)|(c.generator?8:0));k&xI||(c.id=this.type===Ya.name?this.parseIdent():null);this.parseFunctionParams(c);this.parseFunctionBody(c,d,!1);this.yieldPos=h;this.awaitPos=n;this.awaitIdentPos=b;return this.finishNode(c,k&xI?"FunctionDeclaration":"FunctionExpression")};Ji.parseFunctionParams=function(c){this.expect(Ya.parenL);c.params=this.parseBindingList(Ya.parenR,!1,8<=this.options.ecmaVersion);this.checkYieldAwaitInDefaultParams()};
Ji.parseClass=function(c,k){this.next();var d=this.strict;this.strict=!0;this.parseClassId(c,k);this.parseClassSuper(c);var h=this.startNode(),n=!1;h.body=[];for(this.expect(Ya.braceL);this.type!==Ya.braceR;){var b=this.parseClassElement(null!==c.superClass);b&&(h.body.push(b),"MethodDefinition"===b.type&&"constructor"===b.kind&&(n&&this.raise(b.start,"Duplicate constructor in the same class"),n=!0))}this.strict=d;this.next();c.body=this.finishNode(h,"ClassBody");return this.finishNode(c,k?"ClassDeclaration":
"ClassExpression")};Ji.parseClassElement=function(c){var k=this;if(this.eat(Ya.semi))return null;var d=this.startNode(),h=function(l,a){void 0===a&&(a=!1);var f=k.start,m=k.startLoc;if(!k.eatContextual(l))return!1;if(!(k.type===Ya.parenL||a&&k.canInsertSemicolon()))return!0;d.key&&k.unexpected();d.computed=!1;d.key=k.startNodeAt(f,m);d.key.name=l;k.finishNode(d.key,"Identifier");return!1};d.kind="method";d.static=h("static");var n=this.eat(Ya.star),b=!1;n||(8<=this.options.ecmaVersion&&h("async",
!0)?(b=!0,n=9<=this.options.ecmaVersion&&this.eat(Ya.star)):h("get")?d.kind="get":h("set")&&(d.kind="set"));d.key||this.parsePropertyName(d);h=d.key;var e=!1;d.computed||d.static||!("Identifier"===h.type&&"constructor"===h.name||"Literal"===h.type&&"constructor"===h.value)?d.static&&"Identifier"===h.type&&"prototype"===h.name&&this.raise(h.start,"Classes may not have a static property named prototype"):("method"!==d.kind&&this.raise(h.start,"Constructor can't have get/set modifier"),n&&this.raise(h.start,
"Constructor can't be a generator"),b&&this.raise(h.start,"Constructor can't be an async method"),d.kind="constructor",e=c);this.parseClassMethod(d,n,b,e);"get"===d.kind&&0!==d.value.params.length&&this.raiseRecoverable(d.value.start,"getter should have no params");"set"===d.kind&&1!==d.value.params.length&&this.raiseRecoverable(d.value.start,"setter should have exactly one param");"set"===d.kind&&"RestElement"===d.value.params[0].type&&this.raiseRecoverable(d.value.params[0].start,"Setter cannot use rest params");
return d};Ji.parseClassMethod=function(c,k,d,h){c.value=this.parseMethod(k,d,h);return this.finishNode(c,"MethodDefinition")};Ji.parseClassId=function(c,k){this.type===Ya.name?(c.id=this.parseIdent(),k&&this.checkLValSimple(c.id,2,!1)):(!0===k&&this.unexpected(),c.id=null)};Ji.parseClassSuper=function(c){c.superClass=this.eat(Ya._extends)?this.parseExprSubscripts():null};Ji.parseExport=function(c,k){this.next();if(this.eat(Ya.star))return 11<=this.options.ecmaVersion&&(this.eatContextual("as")?(c.exported=
this.parseIdent(!0),this.checkExport(k,c.exported.name,this.lastTokStart)):c.exported=null),this.expectContextual("from"),this.type!==Ya.string&&this.unexpected(),c.source=this.parseExprAtom(),this.semicolon(),this.finishNode(c,"ExportAllDeclaration");if(this.eat(Ya._default)){this.checkExport(k,"default",this.lastTokStart);var d;this.type===Ya._function||(d=this.isAsyncFunction())?(k=this.startNode(),this.next(),d&&this.next(),c.declaration=this.parseFunction(k,xI|4,!1,d)):this.type===Ya._class?
(d=this.startNode(),c.declaration=this.parseClass(d,"nullableID")):(c.declaration=this.parseMaybeAssign(),this.semicolon());return this.finishNode(c,"ExportDefaultDeclaration")}if(this.shouldParseExportStatement())c.declaration=this.parseStatement(null),"VariableDeclaration"===c.declaration.type?this.checkVariableExport(k,c.declaration.declarations):this.checkExport(k,c.declaration.id.name,c.declaration.id.start),c.specifiers=[],c.source=null;else{c.declaration=null;c.specifiers=this.parseExportSpecifiers(k);
if(this.eatContextual("from"))this.type!==Ya.string&&this.unexpected(),c.source=this.parseExprAtom();else{d=0;for(k=c.specifiers;d<k.length;d+=1){var h=k[d];this.checkUnreserved(h.local);this.checkLocalExport(h.local)}c.source=null}this.semicolon()}return this.finishNode(c,"ExportNamedDeclaration")};Ji.checkExport=function(c,k,d){c&&(UK.call(c,k)&&this.raiseRecoverable(d,"Duplicate export '"+k+"'"),c[k]=!0)};Ji.checkPatternExport=function(c,k){var d=k.type;if("Identifier"===d)this.checkExport(c,k.name,
k.start);else if("ObjectPattern"===d)for(d=0,k=k.properties;d<k.length;d+=1)this.checkPatternExport(c,k[d]);else if("ArrayPattern"===d)for(d=0,k=k.elements;d<k.length;d+=1){var h=k[d];h&&this.checkPatternExport(c,h)}else"Property"===d?this.checkPatternExport(c,k.value):"AssignmentPattern"===d?this.checkPatternExport(c,k.left):"RestElement"===d?this.checkPatternExport(c,k.argument):"ParenthesizedExpression"===d&&this.checkPatternExport(c,k.expression)};Ji.checkVariableExport=function(c,k){if(c)for(var d=
0;d<k.length;d+=1)this.checkPatternExport(c,k[d].id)};Ji.shouldParseExportStatement=function(){return"var"===this.type.keyword||"const"===this.type.keyword||"class"===this.type.keyword||"function"===this.type.keyword||this.isLet()||this.isAsyncFunction()};Ji.parseExportSpecifiers=function(c){var k=[],d=!0;for(this.expect(Ya.braceL);!this.eat(Ya.braceR);){if(d)d=!1;else if(this.expect(Ya.comma),this.afterTrailingComma(Ya.braceR))break;var h=this.startNode();h.local=this.parseIdent(!0);h.exported=this.eatContextual("as")?
this.parseIdent(!0):h.local;this.checkExport(c,h.exported.name,h.exported.start);k.push(this.finishNode(h,"ExportSpecifier"))}return k};Ji.parseImport=function(c){this.next();this.type===Ya.string?(c.specifiers=una,c.source=this.parseExprAtom()):(c.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),c.source=this.type===Ya.string?this.parseExprAtom():this.unexpected());this.semicolon();return this.finishNode(c,"ImportDeclaration")};Ji.parseImportSpecifiers=function(){var c=[],k=
!0;if(this.type===Ya.name){var d=this.startNode();d.local=this.parseIdent();this.checkLValSimple(d.local,2);c.push(this.finishNode(d,"ImportDefaultSpecifier"));if(!this.eat(Ya.comma))return c}if(this.type===Ya.star)return k=this.startNode(),this.next(),this.expectContextual("as"),k.local=this.parseIdent(),this.checkLValSimple(k.local,2),c.push(this.finishNode(k,"ImportNamespaceSpecifier")),c;for(this.expect(Ya.braceL);!this.eat(Ya.braceR);){if(k)k=!1;else if(this.expect(Ya.comma),this.afterTrailingComma(Ya.braceR))break;
d=this.startNode();d.imported=this.parseIdent(!0);this.eatContextual("as")?d.local=this.parseIdent():(this.checkUnreserved(d.imported),d.local=d.imported);this.checkLValSimple(d.local,2);c.push(this.finishNode(d,"ImportSpecifier"))}return c};Ji.adaptDirectivePrologue=function(c){for(var k=0;k<c.length&&this.isDirectiveCandidate(c[k]);++k)c[k].directive=c[k].expression.raw.slice(1,-1)};Ji.isDirectiveCandidate=function(c){return"ExpressionStatement"===c.type&&"Literal"===c.expression.type&&"string"===
typeof c.expression.value&&('"'===this.input[c.start]||"'"===this.input[c.start])};var Ju=xn.prototype;Ju.toAssignable=function(c,k,d){if(6<=this.options.ecmaVersion&&c)switch(c.type){case "Identifier":this.inAsync&&"await"===c.name&&this.raise(c.start,"Cannot use 'await' as identifier inside an async function");break;case "ObjectPattern":case "ArrayPattern":case "AssignmentPattern":case "RestElement":break;case "ObjectExpression":c.type="ObjectPattern";d&&this.checkPatternErrors(d,!0);d=0;for(var h=
c.properties;d<h.length;d+=1){var n=h[d];this.toAssignable(n,k);"RestElement"!==n.type||"ArrayPattern"!==n.argument.type&&"ObjectPattern"!==n.argument.type||this.raise(n.argument.start,"Unexpected token")}break;case "Property":"init"!==c.kind&&this.raise(c.key.start,"Object pattern can't contain getter or setter");this.toAssignable(c.value,k);break;case "ArrayExpression":c.type="ArrayPattern";d&&this.checkPatternErrors(d,!0);this.toAssignableList(c.elements,k);break;case "SpreadElement":c.type="RestElement";
this.toAssignable(c.argument,k);"AssignmentPattern"===c.argument.type&&this.raise(c.argument.start,"Rest elements cannot have a default value");break;case "AssignmentExpression":"="!==c.operator&&this.raise(c.left.end,"Only '=' operator can be used for specifying default value.");c.type="AssignmentPattern";delete c.operator;this.toAssignable(c.left,k);break;case "ParenthesizedExpression":this.toAssignable(c.expression,k,d);break;case "ChainExpression":this.raiseRecoverable(c.start,"Optional chaining cannot appear in left-hand side");
break;case "MemberExpression":if(!k)break;default:this.raise(c.start,"Assigning to rvalue")}else d&&this.checkPatternErrors(d,!0);return c};Ju.toAssignableList=function(c,k){for(var d=c.length,h=0;h<d;h++){var n=c[h];n&&this.toAssignable(n,k)}d&&(d=c[d-1],6===this.options.ecmaVersion&&k&&d&&"RestElement"===d.type&&"Identifier"!==d.argument.type&&this.unexpected(d.argument.start));return c};Ju.parseSpread=function(c){var k=this.startNode();this.next();k.argument=this.parseMaybeAssign(!1,c);return this.finishNode(k,
"SpreadElement")};Ju.parseRestBinding=function(){var c=this.startNode();this.next();6===this.options.ecmaVersion&&this.type!==Ya.name&&this.unexpected();c.argument=this.parseBindingAtom();return this.finishNode(c,"RestElement")};Ju.parseBindingAtom=function(){if(6<=this.options.ecmaVersion)switch(this.type){case Ya.bracketL:var c=this.startNode();this.next();c.elements=this.parseBindingList(Ya.bracketR,!0,!0);return this.finishNode(c,"ArrayPattern");case Ya.braceL:return this.parseObj(!0)}return this.parseIdent()};
Ju.parseBindingList=function(c,k,d){for(var h=[],n=!0;!this.eat(c);)if(n?n=!1:this.expect(Ya.comma),k&&this.type===Ya.comma)h.push(null);else if(d&&this.afterTrailingComma(c))break;else if(this.type===Ya.ellipsis){k=this.parseRestBinding();this.parseBindingListItem(k);h.push(k);this.type===Ya.comma&&this.raise(this.start,"Comma is not permitted after the rest element");this.expect(c);break}else{var b=this.parseMaybeDefault(this.start,this.startLoc);this.parseBindingListItem(b);h.push(b)}return h};
Ju.parseBindingListItem=function(c){return c};Ju.parseMaybeDefault=function(c,k,d){d=d||this.parseBindingAtom();if(6>this.options.ecmaVersion||!this.eat(Ya.eq))return d;c=this.startNodeAt(c,k);c.left=d;c.right=this.parseMaybeAssign();return this.finishNode(c,"AssignmentPattern")};Ju.checkLValSimple=function(c,k,d){void 0===k&&(k=0);var h=0!==k;switch(c.type){case "Identifier":this.strict&&this.reservedWordsStrictBind.test(c.name)&&this.raiseRecoverable(c.start,(h?"Binding ":"Assigning to ")+c.name+
" in strict mode");h&&(2===k&&"let"===c.name&&this.raiseRecoverable(c.start,"let is disallowed as a lexically bound name"),d&&(UK.call(d,c.name)&&this.raiseRecoverable(c.start,"Argument name clash"),d[c.name]=!0),5!==k&&this.declareName(c.name,k,c.start));break;case "ChainExpression":this.raiseRecoverable(c.start,"Optional chaining cannot appear in left-hand side");break;case "MemberExpression":h&&this.raiseRecoverable(c.start,"Binding member expression");break;case "ParenthesizedExpression":return h&&
this.raiseRecoverable(c.start,"Binding parenthesized expression"),this.checkLValSimple(c.expression,k,d);default:this.raise(c.start,(h?"Binding":"Assigning to")+" rvalue")}};Ju.checkLValPattern=function(c,k,d){void 0===k&&(k=0);switch(c.type){case "ObjectPattern":var h=0;for(c=c.properties;h<c.length;h+=1)this.checkLValInnerPattern(c[h],k,d);break;case "ArrayPattern":h=0;for(c=c.elements;h<c.length;h+=1){var n=c[h];n&&this.checkLValInnerPattern(n,k,d)}break;default:this.checkLValSimple(c,k,d)}};Ju.checkLValInnerPattern=
function(c,k,d){void 0===k&&(k=0);switch(c.type){case "Property":this.checkLValInnerPattern(c.value,k,d);break;case "AssignmentPattern":this.checkLValPattern(c.left,k,d);break;case "RestElement":this.checkLValPattern(c.argument,k,d);break;default:this.checkLValPattern(c,k,d)}};var aj=xn.prototype;aj.checkPropClash=function(c,k,d){if(!(9<=this.options.ecmaVersion&&"SpreadElement"===c.type||6<=this.options.ecmaVersion&&(c.computed||c.method||c.shorthand))){var h=c.key;switch(h.type){case "Identifier":var n=
h.name;break;case "Literal":n=String(h.value);break;default:return}c=c.kind;6<=this.options.ecmaVersion?"__proto__"===n&&"init"===c&&(k.proto&&(d?0>d.doubleProto&&(d.doubleProto=h.start):this.raiseRecoverable(h.start,"Redefinition of __proto__ property")),k.proto=!0):(n="$"+n,(d=k[n])?("init"===c?this.strict&&d.init||d.get||d.set:d.init||d[c])&&this.raiseRecoverable(h.start,"Redefinition of property"):d=k[n]={init:!1,get:!1,set:!1},d[c]=!0)}};aj.parseExpression=function(c,k){var d=this.start,h=this.startLoc,
n=this.parseMaybeAssign(c,k);if(this.type===Ya.comma){d=this.startNodeAt(d,h);for(d.expressions=[n];this.eat(Ya.comma);)d.expressions.push(this.parseMaybeAssign(c,k));return this.finishNode(d,"SequenceExpression")}return n};aj.parseMaybeAssign=function(c,k,d){if(this.isContextual("yield")){if(this.inGenerator)return this.parseYield(c);this.exprAllowed=!1}var h=!1,n=-1,b=-1;k?(n=k.parenthesizedAssign,b=k.trailingComma,k.parenthesizedAssign=k.trailingComma=-1):(k=new Gx,h=!0);var e=this.start,l=this.startLoc;
if(this.type===Ya.parenL||this.type===Ya.name)this.potentialArrowAt=this.start;var a=this.parseMaybeConditional(c,k);d&&(a=d.call(this,a,e,l));if(this.type.isAssign)return d=this.startNodeAt(e,l),d.operator=this.value,this.type===Ya.eq&&(a=this.toAssignable(a,!1,k)),h||(k.parenthesizedAssign=k.trailingComma=k.doubleProto=-1),k.shorthandAssign>=a.start&&(k.shorthandAssign=-1),this.type===Ya.eq?this.checkLValPattern(a):this.checkLValSimple(a),d.left=a,this.next(),d.right=this.parseMaybeAssign(c),this.finishNode(d,
"AssignmentExpression");h&&this.checkExpressionErrors(k,!0);-1<n&&(k.parenthesizedAssign=n);-1<b&&(k.trailingComma=b);return a};aj.parseMaybeConditional=function(c,k){var d=this.start,h=this.startLoc,n=this.parseExprOps(c,k);return this.checkExpressionErrors(k)?n:this.eat(Ya.question)?(k=this.startNodeAt(d,h),k.test=n,k.consequent=this.parseMaybeAssign(),this.expect(Ya.colon),k.alternate=this.parseMaybeAssign(c),this.finishNode(k,"ConditionalExpression")):n};aj.parseExprOps=function(c,k){var d=this.start,
h=this.startLoc,n=this.parseMaybeUnary(k,!1);return this.checkExpressionErrors(k)?n:n.start===d&&"ArrowFunctionExpression"===n.type?n:this.parseExprOp(n,d,h,-1,c)};aj.parseExprOp=function(c,k,d,h,n){var b=this.type.binop;if(null!=b&&(!n||this.type!==Ya._in)&&b>h){var e=this.type===Ya.logicalOR||this.type===Ya.logicalAND,l=this.type===Ya.coalesce;l&&(b=Ya.logicalAND.binop);var a=this.value;this.next();var f=this.start,m=this.startLoc;b=this.parseExprOp(this.parseMaybeUnary(null,!1),f,m,b,n);c=this.buildBinary(k,
d,c,b,a,e||l);(e&&this.type===Ya.coalesce||l&&(this.type===Ya.logicalOR||this.type===Ya.logicalAND))&&this.raiseRecoverable(this.start,"Logical expressions and coalesce expressions cannot be mixed. Wrap either by parentheses");return this.parseExprOp(c,k,d,h,n)}return c};aj.buildBinary=function(c,k,d,h,n,b){c=this.startNodeAt(c,k);c.left=d;c.operator=n;c.right=h;return this.finishNode(c,b?"LogicalExpression":"BinaryExpression")};aj.parseMaybeUnary=function(c,k){var d=this.start,h=this.startLoc;if(this.isContextual("await")&&
(this.inAsync||!this.inFunction&&this.options.allowAwaitOutsideFunction)){var n=this.parseAwait();k=!0}else if(this.type.prefix){n=this.startNode();var b=this.type===Ya.incDec;n.operator=this.value;n.prefix=!0;this.next();n.argument=this.parseMaybeUnary(null,!0);this.checkExpressionErrors(c,!0);b?this.checkLValSimple(n.argument):this.strict&&"delete"===n.operator&&"Identifier"===n.argument.type?this.raiseRecoverable(n.start,"Deleting local variable in strict mode"):k=!0;n=this.finishNode(n,b?"UpdateExpression":
"UnaryExpression")}else{n=this.parseExprSubscripts(c);if(this.checkExpressionErrors(c))return n;for(;this.type.postfix&&!this.canInsertSemicolon();)c=this.startNodeAt(d,h),c.operator=this.value,c.prefix=!1,c.argument=n,this.checkLValSimple(n),this.next(),n=this.finishNode(c,"UpdateExpression")}return!k&&this.eat(Ya.starstar)?this.buildBinary(d,h,n,this.parseMaybeUnary(null,!1),"**",!1):n};aj.parseExprSubscripts=function(c){var k=this.start,d=this.startLoc,h=this.parseExprAtom(c);if("ArrowFunctionExpression"===
h.type&&")"!==this.input.slice(this.lastTokStart,this.lastTokEnd))return h;k=this.parseSubscripts(h,k,d);c&&"MemberExpression"===k.type&&(c.parenthesizedAssign>=k.start&&(c.parenthesizedAssign=-1),c.parenthesizedBind>=k.start&&(c.parenthesizedBind=-1),c.trailingComma>=k.start&&(c.trailingComma=-1));return k};aj.parseSubscripts=function(c,k,d,h){for(var n=8<=this.options.ecmaVersion&&"Identifier"===c.type&&"async"===c.name&&this.lastTokEnd===c.end&&!this.canInsertSemicolon()&&5===c.end-c.start&&this.potentialArrowAt===
c.start,b=!1;;){var e=this.parseSubscript(c,k,d,h,n,b);e.optional&&(b=!0);if(e===c||"ArrowFunctionExpression"===e.type)return b&&(c=this.startNodeAt(k,d),c.expression=e,e=this.finishNode(c,"ChainExpression")),e;c=e}};aj.parseSubscript=function(c,k,d,h,n,b){var e=11<=this.options.ecmaVersion,l=e&&this.eat(Ya.questionDot);h&&l&&this.raise(this.lastTokStart,"Optional chaining cannot appear in the callee of new expressions");var a=this.eat(Ya.bracketL);if(a||l&&this.type!==Ya.parenL&&this.type!==Ya.backQuote||
this.eat(Ya.dot))k=this.startNodeAt(k,d),k.object=c,k.property=a?this.parseExpression():this.parseIdent("never"!==this.options.allowReserved),k.computed=!!a,a&&this.expect(Ya.bracketR),e&&(k.optional=l),c=this.finishNode(k,"MemberExpression");else if(!h&&this.eat(Ya.parenL)){h=new Gx;b=this.yieldPos;var f=this.awaitPos,m=this.awaitIdentPos;this.awaitIdentPos=this.awaitPos=this.yieldPos=0;a=this.parseExprList(Ya.parenR,8<=this.options.ecmaVersion,!1,h);if(n&&!l&&!this.canInsertSemicolon()&&this.eat(Ya.arrow))return this.checkPatternErrors(h,
!1),this.checkYieldAwaitInDefaultParams(),0<this.awaitIdentPos&&this.raise(this.awaitIdentPos,"Cannot use 'await' as identifier inside an async function"),this.yieldPos=b,this.awaitPos=f,this.awaitIdentPos=m,this.parseArrowExpression(this.startNodeAt(k,d),a,!0);this.checkExpressionErrors(h,!0);this.yieldPos=b||this.yieldPos;this.awaitPos=f||this.awaitPos;this.awaitIdentPos=m||this.awaitIdentPos;k=this.startNodeAt(k,d);k.callee=c;k.arguments=a;e&&(k.optional=l);c=this.finishNode(k,"CallExpression")}else this.type===
Ya.backQuote&&((l||b)&&this.raise(this.start,"Optional chaining cannot appear in the tag of tagged template expressions"),e=this.startNodeAt(k,d),e.tag=c,e.quasi=this.parseTemplate({isTagged:!0}),c=this.finishNode(e,"TaggedTemplateExpression"));return c};aj.parseExprAtom=function(c){this.type===Ya.slash&&this.readRegexp();var k=this.potentialArrowAt===this.start;switch(this.type){case Ya._super:return this.allowSuper||this.raise(this.start,"'super' keyword outside a method"),k=this.startNode(),this.next(),
this.type!==Ya.parenL||this.allowDirectSuper||this.raise(k.start,"super() call outside constructor of a subclass"),this.type!==Ya.dot&&this.type!==Ya.bracketL&&this.type!==Ya.parenL&&this.unexpected(),this.finishNode(k,"Super");case Ya._this:return k=this.startNode(),this.next(),this.finishNode(k,"ThisExpression");case Ya.name:c=this.start;var d=this.startLoc,h=this.containsEsc,n=this.parseIdent(!1);if(8<=this.options.ecmaVersion&&!h&&"async"===n.name&&!this.canInsertSemicolon()&&this.eat(Ya._function))return this.parseFunction(this.startNodeAt(c,
d),0,!1,!0);if(k&&!this.canInsertSemicolon()){if(this.eat(Ya.arrow))return this.parseArrowExpression(this.startNodeAt(c,d),[n],!1);if(8<=this.options.ecmaVersion&&"async"===n.name&&this.type===Ya.name&&!h)return n=this.parseIdent(!1),!this.canInsertSemicolon()&&this.eat(Ya.arrow)||this.unexpected(),this.parseArrowExpression(this.startNodeAt(c,d),[n],!0)}return n;case Ya.regexp:return c=this.value,k=this.parseLiteral(c.value),k.regex={pattern:c.pattern,flags:c.flags},k;case Ya.num:case Ya.string:return this.parseLiteral(this.value);
case Ya._null:case Ya._true:case Ya._false:return k=this.startNode(),k.value=this.type===Ya._null?null:this.type===Ya._true,k.raw=this.type.keyword,this.next(),this.finishNode(k,"Literal");case Ya.parenL:return d=this.start,k=this.parseParenAndDistinguishExpression(k),c&&(0>c.parenthesizedAssign&&!this.isSimpleAssignTarget(k)&&(c.parenthesizedAssign=d),0>c.parenthesizedBind&&(c.parenthesizedBind=d)),k;case Ya.bracketL:return k=this.startNode(),this.next(),k.elements=this.parseExprList(Ya.bracketR,
!0,!0,c),this.finishNode(k,"ArrayExpression");case Ya.braceL:return this.parseObj(!1,c);case Ya._function:return k=this.startNode(),this.next(),this.parseFunction(k,0);case Ya._class:return this.parseClass(this.startNode(),!1);case Ya._new:return this.parseNew();case Ya.backQuote:return this.parseTemplate();case Ya._import:return 11<=this.options.ecmaVersion?this.parseExprImport():this.unexpected();default:this.unexpected()}};aj.parseExprImport=function(){var c=this.startNode();this.containsEsc&&
this.raiseRecoverable(this.start,"Escape sequence in keyword import");var k=this.parseIdent(!0);switch(this.type){case Ya.parenL:return this.parseDynamicImport(c);case Ya.dot:return c.meta=k,this.parseImportMeta(c);default:this.unexpected()}};aj.parseDynamicImport=function(c){this.next();c.source=this.parseMaybeAssign();if(!this.eat(Ya.parenR)){var k=this.start;this.eat(Ya.comma)&&this.eat(Ya.parenR)?this.raiseRecoverable(k,"Trailing comma is not allowed in import()"):this.unexpected(k)}return this.finishNode(c,
"ImportExpression")};aj.parseImportMeta=function(c){this.next();var k=this.containsEsc;c.property=this.parseIdent(!0);"meta"!==c.property.name&&this.raiseRecoverable(c.property.start,"The only valid meta property for import is 'import.meta'");k&&this.raiseRecoverable(c.start,"'import.meta' must not contain escaped characters");"module"===this.options.sourceType||this.options.allowImportExportEverywhere||this.raiseRecoverable(c.start,"Cannot use 'import.meta' outside a module");return this.finishNode(c,
"MetaProperty")};aj.parseLiteral=function(c){var k=this.startNode();k.value=c;k.raw=this.input.slice(this.start,this.end);110===k.raw.charCodeAt(k.raw.length-1)&&(k.bigint=k.raw.slice(0,-1).replace(/_/g,""));this.next();return this.finishNode(k,"Literal")};aj.parseParenExpression=function(){this.expect(Ya.parenL);var c=this.parseExpression();this.expect(Ya.parenR);return c};aj.parseParenAndDistinguishExpression=function(c){var k=this.start,d=this.startLoc,h=8<=this.options.ecmaVersion;if(6<=this.options.ecmaVersion){this.next();
var n=this.start,b=this.startLoc,e=[],l=!0,a=!1,f=new Gx,m=this.yieldPos,r=this.awaitPos;for(this.awaitPos=this.yieldPos=0;this.type!==Ya.parenR;)if(l?l=!1:this.expect(Ya.comma),h&&this.afterTrailingComma(Ya.parenR,!0)){a=!0;break}else if(this.type===Ya.ellipsis){var v=this.start;e.push(this.parseParenItem(this.parseRestBinding()));this.type===Ya.comma&&this.raise(this.start,"Comma is not permitted after the rest element");break}else e.push(this.parseMaybeAssign(!1,f,this.parseParenItem));h=this.start;
l=this.startLoc;this.expect(Ya.parenR);if(c&&!this.canInsertSemicolon()&&this.eat(Ya.arrow))return this.checkPatternErrors(f,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=m,this.awaitPos=r,this.parseParenArrowList(k,d,e);e.length&&!a||this.unexpected(this.lastTokStart);v&&this.unexpected(v);this.checkExpressionErrors(f,!0);this.yieldPos=m||this.yieldPos;this.awaitPos=r||this.awaitPos;1<e.length?(c=this.startNodeAt(n,b),c.expressions=e,this.finishNodeAt(c,"SequenceExpression",h,l)):c=e[0]}else c=
this.parseParenExpression();return this.options.preserveParens?(k=this.startNodeAt(k,d),k.expression=c,this.finishNode(k,"ParenthesizedExpression")):c};aj.parseParenItem=function(c){return c};aj.parseParenArrowList=function(c,k,d){return this.parseArrowExpression(this.startNodeAt(c,k),d)};var vna=[];aj.parseNew=function(){this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword new");var c=this.startNode(),k=this.parseIdent(!0);if(6<=this.options.ecmaVersion&&this.eat(Ya.dot))return c.meta=
k,k=this.containsEsc,c.property=this.parseIdent(!0),"target"!==c.property.name&&this.raiseRecoverable(c.property.start,"The only valid meta property for new is 'new.target'"),k&&this.raiseRecoverable(c.start,"'new.target' must not contain escaped characters"),this.inNonArrowFunction||this.raiseRecoverable(c.start,"'new.target' can only be used in functions"),this.finishNode(c,"MetaProperty");k=this.start;var d=this.startLoc,h=this.type===Ya._import;c.callee=this.parseSubscripts(this.parseExprAtom(),
k,d,!0);h&&"ImportExpression"===c.callee.type&&this.raise(k,"Cannot use new with import()");this.eat(Ya.parenL)?c.arguments=this.parseExprList(Ya.parenR,8<=this.options.ecmaVersion,!1):c.arguments=vna;return this.finishNode(c,"NewExpression")};aj.parseTemplateElement=function(c){c=c.isTagged;var k=this.startNode();this.type===Ya.invalidTemplate?(c||this.raiseRecoverable(this.start,"Bad escape sequence in untagged template literal"),k.value={raw:this.value,cooked:null}):k.value={raw:this.input.slice(this.start,
this.end).replace(/\r\n?/g,"\n"),cooked:this.value};this.next();k.tail=this.type===Ya.backQuote;return this.finishNode(k,"TemplateElement")};aj.parseTemplate=function(c){void 0===c&&(c={});c=c.isTagged;void 0===c&&(c=!1);var k=this.startNode();this.next();k.expressions=[];var d=this.parseTemplateElement({isTagged:c});for(k.quasis=[d];!d.tail;)this.type===Ya.eof&&this.raise(this.pos,"Unterminated template literal"),this.expect(Ya.dollarBraceL),k.expressions.push(this.parseExpression()),this.expect(Ya.braceR),
k.quasis.push(d=this.parseTemplateElement({isTagged:c}));this.next();return this.finishNode(k,"TemplateLiteral")};aj.isAsyncProp=function(c){return!c.computed&&"Identifier"===c.key.type&&"async"===c.key.name&&(this.type===Ya.name||this.type===Ya.num||this.type===Ya.string||this.type===Ya.bracketL||this.type.keyword||9<=this.options.ecmaVersion&&this.type===Ya.star)&&!Or.test(this.input.slice(this.lastTokEnd,this.start))};aj.parseObj=function(c,k){var d=this.startNode(),h=!0,n={};d.properties=[];for(this.next();!this.eat(Ya.braceR);){if(h)h=
!1;else if(this.expect(Ya.comma),5<=this.options.ecmaVersion&&this.afterTrailingComma(Ya.braceR))break;var b=this.parseProperty(c,k);c||this.checkPropClash(b,n,k);d.properties.push(b)}return this.finishNode(d,c?"ObjectPattern":"ObjectExpression")};aj.parseProperty=function(c,k){var d=this.startNode(),h;if(9<=this.options.ecmaVersion&&this.eat(Ya.ellipsis)){if(c)return d.argument=this.parseIdent(!1),this.type===Ya.comma&&this.raise(this.start,"Comma is not permitted after the rest element"),this.finishNode(d,
"RestElement");this.type===Ya.parenL&&k&&(0>k.parenthesizedAssign&&(k.parenthesizedAssign=this.start),0>k.parenthesizedBind&&(k.parenthesizedBind=this.start));d.argument=this.parseMaybeAssign(!1,k);this.type===Ya.comma&&k&&0>k.trailingComma&&(k.trailingComma=this.start);return this.finishNode(d,"SpreadElement")}if(6<=this.options.ecmaVersion){d.method=!1;d.shorthand=!1;if(c||k){var n=this.start;var b=this.startLoc}c||(h=this.eat(Ya.star))}var e=this.containsEsc;this.parsePropertyName(d);if(!c&&!e&&
8<=this.options.ecmaVersion&&!h&&this.isAsyncProp(d)){var l=!0;h=9<=this.options.ecmaVersion&&this.eat(Ya.star);this.parsePropertyName(d,k)}else l=!1;this.parsePropertyValue(d,c,h,l,n,b,k,e);return this.finishNode(d,"Property")};aj.parsePropertyValue=function(c,k,d,h,n,b,e,l){(d||h)&&this.type===Ya.colon&&this.unexpected();this.eat(Ya.colon)?(c.value=k?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,e),c.kind="init"):6<=this.options.ecmaVersion&&this.type===Ya.parenL?(k&&
this.unexpected(),c.kind="init",c.method=!0,c.value=this.parseMethod(d,h)):k||l||!(5<=this.options.ecmaVersion)||c.computed||"Identifier"!==c.key.type||"get"!==c.key.name&&"set"!==c.key.name||this.type===Ya.comma||this.type===Ya.braceR||this.type===Ya.eq?6<=this.options.ecmaVersion&&!c.computed&&"Identifier"===c.key.type?((d||h)&&this.unexpected(),this.checkUnreserved(c.key),"await"!==c.key.name||this.awaitIdentPos||(this.awaitIdentPos=n),c.kind="init",k?c.value=this.parseMaybeDefault(n,b,this.copyNode(c.key)):
this.type===Ya.eq&&e?(0>e.shorthandAssign&&(e.shorthandAssign=this.start),c.value=this.parseMaybeDefault(n,b,this.copyNode(c.key))):c.value=this.copyNode(c.key),c.shorthand=!0):this.unexpected():((d||h)&&this.unexpected(),c.kind=c.key.name,this.parsePropertyName(c),c.value=this.parseMethod(!1),c.value.params.length!==("get"===c.kind?0:1)?(k=c.value.start,"get"===c.kind?this.raiseRecoverable(k,"getter should have no params"):this.raiseRecoverable(k,"setter should have exactly one param")):"set"===
c.kind&&"RestElement"===c.value.params[0].type&&this.raiseRecoverable(c.value.params[0].start,"Setter cannot use rest params"))};aj.parsePropertyName=function(c){if(6<=this.options.ecmaVersion){if(this.eat(Ya.bracketL))return c.computed=!0,c.key=this.parseMaybeAssign(),this.expect(Ya.bracketR),c.key;c.computed=!1}return c.key=this.type===Ya.num||this.type===Ya.string?this.parseExprAtom():this.parseIdent("never"!==this.options.allowReserved)};aj.initFunction=function(c){c.id=null;6<=this.options.ecmaVersion&&
(c.generator=c.expression=!1);8<=this.options.ecmaVersion&&(c.async=!1)};aj.parseMethod=function(c,k,d){var h=this.startNode(),n=this.yieldPos,b=this.awaitPos,e=this.awaitIdentPos;this.initFunction(h);6<=this.options.ecmaVersion&&(h.generator=c);8<=this.options.ecmaVersion&&(h.async=!!k);this.awaitIdentPos=this.awaitPos=this.yieldPos=0;this.enterScope(2|(k?4:0)|(h.generator?8:0)|64|(d?128:0));this.expect(Ya.parenL);h.params=this.parseBindingList(Ya.parenR,!1,8<=this.options.ecmaVersion);this.checkYieldAwaitInDefaultParams();
this.parseFunctionBody(h,!1,!0);this.yieldPos=n;this.awaitPos=b;this.awaitIdentPos=e;return this.finishNode(h,"FunctionExpression")};aj.parseArrowExpression=function(c,k,d){var h=this.yieldPos,n=this.awaitPos,b=this.awaitIdentPos;this.enterScope((d?4:0)|18);this.initFunction(c);8<=this.options.ecmaVersion&&(c.async=!!d);this.awaitIdentPos=this.awaitPos=this.yieldPos=0;c.params=this.toAssignableList(k,!0);this.parseFunctionBody(c,!0,!1);this.yieldPos=h;this.awaitPos=n;this.awaitIdentPos=b;return this.finishNode(c,
"ArrowFunctionExpression")};aj.parseFunctionBody=function(c,k,d){var h=this.strict,n=!1;if(k&&this.type!==Ya.braceL)c.body=this.parseMaybeAssign(),c.expression=!0,this.checkParams(c,!1);else{var b=7<=this.options.ecmaVersion&&!this.isSimpleParamList(c.params);(!h||b)&&(n=this.strictDirective(this.end))&&b&&this.raiseRecoverable(c.start,"Illegal 'use strict' directive in function with non-simple parameter list");b=this.labels;this.labels=[];n&&(this.strict=!0);this.checkParams(c,!h&&!n&&!k&&!d&&this.isSimpleParamList(c.params));
this.strict&&c.id&&this.checkLValSimple(c.id,5);c.body=this.parseBlock(!1,void 0,n&&!h);c.expression=!1;this.adaptDirectivePrologue(c.body.body);this.labels=b}this.exitScope()};aj.isSimpleParamList=function(c){for(var k=0;k<c.length;k+=1)if("Identifier"!==c[k].type)return!1;return!0};aj.checkParams=function(c,k){var d=Object.create(null),h=0;for(c=c.params;h<c.length;h+=1)this.checkLValInnerPattern(c[h],1,k?null:d)};aj.parseExprList=function(c,k,d,h){for(var n=[],b=!0;!this.eat(c);){if(b)b=!1;else if(this.expect(Ya.comma),
k&&this.afterTrailingComma(c))break;if(d&&this.type===Ya.comma)var e=null;else this.type===Ya.ellipsis?(e=this.parseSpread(h),h&&this.type===Ya.comma&&0>h.trailingComma&&(h.trailingComma=this.start)):e=this.parseMaybeAssign(!1,h);n.push(e)}return n};aj.checkUnreserved=function(c){var k=c.start,d=c.end;c=c.name;this.inGenerator&&"yield"===c&&this.raiseRecoverable(k,"Cannot use 'yield' as identifier inside a generator");this.inAsync&&"await"===c&&this.raiseRecoverable(k,"Cannot use 'await' as identifier inside an async function");
this.keywords.test(c)&&this.raise(k,"Unexpected keyword '"+c+"'");6>this.options.ecmaVersion&&-1!==this.input.slice(k,d).indexOf("\\")||!(this.strict?this.reservedWordsStrict:this.reservedWords).test(c)||(this.inAsync||"await"!==c||this.raiseRecoverable(k,"Cannot use keyword 'await' outside an async function"),this.raiseRecoverable(k,"The keyword '"+c+"' is reserved"))};aj.parseIdent=function(c,k){k=this.startNode();this.type===Ya.name?k.name=this.value:this.type.keyword?(k.name=this.type.keyword,
"class"!==k.name&&"function"!==k.name||this.lastTokEnd===this.lastTokStart+1&&46===this.input.charCodeAt(this.lastTokStart)||this.context.pop()):this.unexpected();this.next(!!c);this.finishNode(k,"Identifier");c||(this.checkUnreserved(k),"await"!==k.name||this.awaitIdentPos||(this.awaitIdentPos=k.start));return k};aj.parseYield=function(c){this.yieldPos||(this.yieldPos=this.start);var k=this.startNode();this.next();this.type===Ya.semi||this.canInsertSemicolon()||this.type!==Ya.star&&!this.type.startsExpr?
(k.delegate=!1,k.argument=null):(k.delegate=this.eat(Ya.star),k.argument=this.parseMaybeAssign(c));return this.finishNode(k,"YieldExpression")};aj.parseAwait=function(){this.awaitPos||(this.awaitPos=this.start);var c=this.startNode();this.next();c.argument=this.parseMaybeUnary(null,!0);return this.finishNode(c,"AwaitExpression")};var iO=xn.prototype;iO.raise=function(c,k){var d=Lv(this.input,c);k+=" ("+d.line+":"+d.column+")";k=new SyntaxError(k);k.pos=c;k.loc=d;k.raisedAt=this.pos;throw k;};iO.raiseRecoverable=
iO.raise;iO.curPosition=function(){if(this.options.locations)return new PG(this.curLine,this.pos-this.lineStart)};var rA=xn.prototype,wna=function(c){this.flags=c;this.var=[];this.lexical=[];this.functions=[]};rA.enterScope=function(c){this.scopeStack.push(new wna(c))};rA.exitScope=function(){this.scopeStack.pop()};rA.treatFunctionsAsVarInScope=function(c){return c.flags&2||!this.inModule&&c.flags&1};rA.declareName=function(c,k,d){var h=!1;if(2===k)k=this.currentScope(),h=-1<k.lexical.indexOf(c)||
-1<k.functions.indexOf(c)||-1<k.var.indexOf(c),k.lexical.push(c),this.inModule&&k.flags&1&&delete this.undefinedExports[c];else if(4===k)this.currentScope().lexical.push(c);else if(3===k)k=this.currentScope(),h=this.treatFunctionsAsVar?-1<k.lexical.indexOf(c):-1<k.lexical.indexOf(c)||-1<k.var.indexOf(c),k.functions.push(c);else for(k=this.scopeStack.length-1;0<=k;--k){var n=this.scopeStack[k];if(-1<n.lexical.indexOf(c)&&!(n.flags&32&&n.lexical[0]===c)||!this.treatFunctionsAsVarInScope(n)&&-1<n.functions.indexOf(c)){h=
!0;break}n.var.push(c);this.inModule&&n.flags&1&&delete this.undefinedExports[c];if(n.flags&3)break}h&&this.raiseRecoverable(d,"Identifier '"+c+"' has already been declared")};rA.checkLocalExport=function(c){-1===this.scopeStack[0].lexical.indexOf(c.name)&&-1===this.scopeStack[0].var.indexOf(c.name)&&(this.undefinedExports[c.name]=c)};rA.currentScope=function(){return this.scopeStack[this.scopeStack.length-1]};rA.currentVarScope=function(){for(var c=this.scopeStack.length-1;;c--){var k=this.scopeStack[c];
if(k.flags&3)return k}};rA.currentThisScope=function(){for(var c=this.scopeStack.length-1;;c--){var k=this.scopeStack[c];if(k.flags&3&&!(k.flags&16))return k}};var BC=function(c,k,d){this.type="";this.start=k;this.end=0;c.options.locations&&(this.loc=new RD(c,d));c.options.directSourceFile&&(this.sourceFile=c.options.directSourceFile);c.options.ranges&&(this.range=[k,0])},yI=xn.prototype;yI.startNode=function(){return new BC(this,this.start,this.startLoc)};yI.startNodeAt=function(c,k){return new BC(this,
c,k)};yI.finishNode=function(c,k){return tB.call(this,c,k,this.lastTokEnd,this.lastTokEndLoc)};yI.finishNodeAt=function(c,k,d,h){return tB.call(this,c,k,d,h)};yI.copyNode=function(c){var k=new BC(this,c.start,this.startLoc),d;for(d in c)k[d]=c[d];return k};var Ku=function(c,k,d,h,n){this.token=c;this.isExpr=!!k;this.preserveSpace=!!d;this.override=h;this.generator=!!n},dm={b_stat:new Ku("{",!1),b_expr:new Ku("{",!0),b_tmpl:new Ku("${",!1),p_stat:new Ku("(",!1),p_expr:new Ku("(",!0),q_tmpl:new Ku("`",
!0,!0,function(c){return c.tryReadTemplateToken()}),f_stat:new Ku("function",!1),f_expr:new Ku("function",!0),f_expr_gen:new Ku("function",!0,!1,null,!0),f_gen:new Ku("function",!1,!1,null,!0)},jO=xn.prototype;jO.initialContext=function(){return[dm.b_stat]};jO.braceIsBlock=function(c){var k=this.curContext();return k===dm.f_expr||k===dm.f_stat?!0:c!==Ya.colon||k!==dm.b_stat&&k!==dm.b_expr?c===Ya._return||c===Ya.name&&this.exprAllowed?Or.test(this.input.slice(this.lastTokEnd,this.start)):c===Ya._else||
c===Ya.semi||c===Ya.eof||c===Ya.parenR||c===Ya.arrow?!0:c===Ya.braceL?k===dm.b_stat:c===Ya._var||c===Ya._const||c===Ya.name?!1:!this.exprAllowed:!k.isExpr};jO.inGeneratorContext=function(){for(var c=this.context.length-1;1<=c;c--){var k=this.context[c];if("function"===k.token)return k.generator}return!1};jO.updateContext=function(c){var k,d=this.type;d.keyword&&c===Ya.dot?this.exprAllowed=!1:(k=d.updateContext)?k.call(this,c):this.exprAllowed=d.beforeExpr};Ya.parenR.updateContext=Ya.braceR.updateContext=
function(){if(1===this.context.length)this.exprAllowed=!0;else{var c=this.context.pop();c===dm.b_stat&&"function"===this.curContext().token&&(c=this.context.pop());this.exprAllowed=!c.isExpr}};Ya.braceL.updateContext=function(c){this.context.push(this.braceIsBlock(c)?dm.b_stat:dm.b_expr);this.exprAllowed=!0};Ya.dollarBraceL.updateContext=function(){this.context.push(dm.b_tmpl);this.exprAllowed=!0};Ya.parenL.updateContext=function(c){this.context.push(c===Ya._if||c===Ya._for||c===Ya._with||c===Ya._while?
dm.p_stat:dm.p_expr);this.exprAllowed=!0};Ya.incDec.updateContext=function(){};Ya._function.updateContext=Ya._class.updateContext=function(c){!c.beforeExpr||c===Ya._else||c===Ya.semi&&this.curContext()!==dm.p_stat||c===Ya._return&&Or.test(this.input.slice(this.lastTokEnd,this.start))||(c===Ya.colon||c===Ya.braceL)&&this.curContext()===dm.b_stat?this.context.push(dm.f_stat):this.context.push(dm.f_expr);this.exprAllowed=!1};Ya.backQuote.updateContext=function(){this.curContext()===dm.q_tmpl?this.context.pop():
this.context.push(dm.q_tmpl);this.exprAllowed=!1};Ya.star.updateContext=function(c){c===Ya._function&&(c=this.context.length-1,this.context[c]=this.context[c]===dm.f_expr?dm.f_expr_gen:dm.f_gen);this.exprAllowed=!0};Ya.name.updateContext=function(c){var k=!1;6<=this.options.ecmaVersion&&c!==Ya.dot&&("of"===this.value&&!this.exprAllowed||"yield"===this.value&&this.inGeneratorContext())&&(k=!0);this.exprAllowed=k};var qga={9:"ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS",
10:"ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS Extended_Pictographic",
11:"ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS Extended_Pictographic",
12:"ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS Extended_Pictographic EBase EComp EMod EPres ExtPict"},
rga={9:"Adlam Adlm Ahom Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb",
10:"Adlam Adlm Ahom Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd",
11:"Adlam Adlm Ahom Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho",
12:"Adlam Adlm Ahom Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho Chorasmian Chrs Diak Dives_Akuru Khitan_Small_Script Kits Yezi Yezidi"},
D0={};Lt(9);Lt(10);Lt(11);Lt(12);var jh=xn.prototype,vy=function(c){this.parser=c;this.validFlags="gim"+(6<=c.options.ecmaVersion?"uy":"")+(9<=c.options.ecmaVersion?"s":"");this.unicodeProperties=D0[12<=c.options.ecmaVersion?12:c.options.ecmaVersion];this.flags=this.source="";this.start=0;this.switchN=this.switchU=!1;this.lastIntValue=this.pos=0;this.lastStringValue="";this.lastAssertionIsQuantifiable=!1;this.maxBackReference=this.numCapturingParens=0;this.groupNames=[];this.backReferenceNames=[]};
vy.prototype.reset=function(c,k,d){var h=-1!==d.indexOf("u");this.start=c|0;this.source=k+"";this.flags=d;this.switchU=h&&6<=this.parser.options.ecmaVersion;this.switchN=h&&9<=this.parser.options.ecmaVersion};vy.prototype.raise=function(c){this.parser.raiseRecoverable(this.start,"Invalid regular expression: /"+this.source+"/: "+c)};vy.prototype.at=function(c,k){void 0===k&&(k=!1);var d=this.source,h=d.length;if(c>=h)return-1;var n=d.charCodeAt(c);if(!k&&!this.switchU||55295>=n||57344<=n||c+1>=h)return n;
c=d.charCodeAt(c+1);return 56320<=c&&57343>=c?(n<<10)+c-56613888:n};vy.prototype.nextIndex=function(c,k){void 0===k&&(k=!1);var d=this.source,h=d.length;if(c>=h)return h;var n=d.charCodeAt(c),b;return!k&&!this.switchU||55295>=n||57344<=n||c+1>=h||56320>(b=d.charCodeAt(c+1))||57343<b?c+1:c+2};vy.prototype.current=function(c){void 0===c&&(c=!1);return this.at(this.pos,c)};vy.prototype.lookahead=function(c){void 0===c&&(c=!1);return this.at(this.nextIndex(this.pos,c),c)};vy.prototype.advance=function(c){void 0===
c&&(c=!1);this.pos=this.nextIndex(this.pos,c)};vy.prototype.eat=function(c,k){void 0===k&&(k=!1);return this.current(k)===c?(this.advance(k),!0):!1};jh.validateRegExpFlags=function(c){for(var k=c.validFlags,d=c.flags,h=0;h<d.length;h++){var n=d.charAt(h);-1===k.indexOf(n)&&this.raise(c.start,"Invalid regular expression flag");-1<d.indexOf(n,h+1)&&this.raise(c.start,"Duplicate regular expression flag")}};jh.validateRegExpPattern=function(c){this.regexp_pattern(c);!c.switchN&&9<=this.options.ecmaVersion&&
0<c.groupNames.length&&(c.switchN=!0,this.regexp_pattern(c))};jh.regexp_pattern=function(c){c.pos=0;c.lastIntValue=0;c.lastStringValue="";c.lastAssertionIsQuantifiable=!1;c.numCapturingParens=0;c.maxBackReference=0;c.groupNames.length=0;c.backReferenceNames.length=0;this.regexp_disjunction(c);c.pos!==c.source.length&&(c.eat(41)&&c.raise("Unmatched ')'"),(c.eat(93)||c.eat(125))&&c.raise("Lone quantifier brackets"));c.maxBackReference>c.numCapturingParens&&c.raise("Invalid escape");for(var k=0,d=c.backReferenceNames;k<
d.length;k+=1)-1===c.groupNames.indexOf(d[k])&&c.raise("Invalid named capture referenced")};jh.regexp_disjunction=function(c){for(this.regexp_alternative(c);c.eat(124);)this.regexp_alternative(c);this.regexp_eatQuantifier(c,!0)&&c.raise("Nothing to repeat");c.eat(123)&&c.raise("Lone quantifier brackets")};jh.regexp_alternative=function(c){for(;c.pos<c.source.length&&this.regexp_eatTerm(c););};jh.regexp_eatTerm=function(c){return this.regexp_eatAssertion(c)?(c.lastAssertionIsQuantifiable&&this.regexp_eatQuantifier(c)&&
c.switchU&&c.raise("Invalid quantifier"),!0):(c.switchU?this.regexp_eatAtom(c):this.regexp_eatExtendedAtom(c))?(this.regexp_eatQuantifier(c),!0):!1};jh.regexp_eatAssertion=function(c){var k=c.pos;c.lastAssertionIsQuantifiable=!1;if(c.eat(94)||c.eat(36))return!0;if(c.eat(92)){if(c.eat(66)||c.eat(98))return!0;c.pos=k}if(c.eat(40)&&c.eat(63)){var d=!1;9<=this.options.ecmaVersion&&(d=c.eat(60));if(c.eat(61)||c.eat(33))return this.regexp_disjunction(c),c.eat(41)||c.raise("Unterminated group"),c.lastAssertionIsQuantifiable=
!d,!0}c.pos=k;return!1};jh.regexp_eatQuantifier=function(c,k){void 0===k&&(k=!1);return this.regexp_eatQuantifierPrefix(c,k)?(c.eat(63),!0):!1};jh.regexp_eatQuantifierPrefix=function(c,k){return c.eat(42)||c.eat(43)||c.eat(63)||this.regexp_eatBracedQuantifier(c,k)};jh.regexp_eatBracedQuantifier=function(c,k){var d=c.pos;if(c.eat(123)){var h=-1;if(this.regexp_eatDecimalDigits(c)){var n=c.lastIntValue;c.eat(44)&&this.regexp_eatDecimalDigits(c)&&(h=c.lastIntValue);if(c.eat(125))return-1!==h&&h<n&&!k&&
c.raise("numbers out of order in {} quantifier"),!0}c.switchU&&!k&&c.raise("Incomplete quantifier");c.pos=d}return!1};jh.regexp_eatAtom=function(c){return this.regexp_eatPatternCharacters(c)||c.eat(46)||this.regexp_eatReverseSolidusAtomEscape(c)||this.regexp_eatCharacterClass(c)||this.regexp_eatUncapturingGroup(c)||this.regexp_eatCapturingGroup(c)};jh.regexp_eatReverseSolidusAtomEscape=function(c){var k=c.pos;if(c.eat(92)){if(this.regexp_eatAtomEscape(c))return!0;c.pos=k}return!1};jh.regexp_eatUncapturingGroup=
function(c){var k=c.pos;if(c.eat(40)){if(c.eat(63)&&c.eat(58)){this.regexp_disjunction(c);if(c.eat(41))return!0;c.raise("Unterminated group")}c.pos=k}return!1};jh.regexp_eatCapturingGroup=function(c){if(c.eat(40)){9<=this.options.ecmaVersion?this.regexp_groupSpecifier(c):63===c.current()&&c.raise("Invalid group");this.regexp_disjunction(c);if(c.eat(41))return c.numCapturingParens+=1,!0;c.raise("Unterminated group")}return!1};jh.regexp_eatExtendedAtom=function(c){return c.eat(46)||this.regexp_eatReverseSolidusAtomEscape(c)||
this.regexp_eatCharacterClass(c)||this.regexp_eatUncapturingGroup(c)||this.regexp_eatCapturingGroup(c)||this.regexp_eatInvalidBracedQuantifier(c)||this.regexp_eatExtendedPatternCharacter(c)};jh.regexp_eatInvalidBracedQuantifier=function(c){this.regexp_eatBracedQuantifier(c,!0)&&c.raise("Nothing to repeat");return!1};jh.regexp_eatSyntaxCharacter=function(c){var k=c.current();return Mv(k)?(c.lastIntValue=k,c.advance(),!0):!1};jh.regexp_eatPatternCharacters=function(c){for(var k=c.pos,d=0;-1!==(d=c.current())&&
!Mv(d);)c.advance();return c.pos!==k};jh.regexp_eatExtendedPatternCharacter=function(c){var k=c.current();return-1===k||36===k||40<=k&&43>=k||46===k||63===k||91===k||94===k||124===k?!1:(c.advance(),!0)};jh.regexp_groupSpecifier=function(c){c.eat(63)&&(this.regexp_eatGroupName(c)?(-1!==c.groupNames.indexOf(c.lastStringValue)&&c.raise("Duplicate capture group name"),c.groupNames.push(c.lastStringValue)):c.raise("Invalid group"))};jh.regexp_eatGroupName=function(c){c.lastStringValue="";if(c.eat(60)){if(this.regexp_eatRegExpIdentifierName(c)&&
c.eat(62))return!0;c.raise("Invalid capture group name")}return!1};jh.regexp_eatRegExpIdentifierName=function(c){c.lastStringValue="";if(this.regexp_eatRegExpIdentifierStart(c)){for(c.lastStringValue+=Hx(c.lastIntValue);this.regexp_eatRegExpIdentifierPart(c);)c.lastStringValue+=Hx(c.lastIntValue);return!0}return!1};jh.regexp_eatRegExpIdentifierStart=function(c){var k=c.pos,d=11<=this.options.ecmaVersion,h=c.current(d);c.advance(d);92===h&&this.regexp_eatRegExpUnicodeEscapeSequence(c,d)&&(h=c.lastIntValue);
d=h;if(zo(d,!0)||36===d||95===d)return c.lastIntValue=h,!0;c.pos=k;return!1};jh.regexp_eatRegExpIdentifierPart=function(c){var k=c.pos,d=11<=this.options.ecmaVersion,h=c.current(d);c.advance(d);92===h&&this.regexp_eatRegExpUnicodeEscapeSequence(c,d)&&(h=c.lastIntValue);d=h;if(vs(d,!0)||36===d||95===d||8204===d||8205===d)return c.lastIntValue=h,!0;c.pos=k;return!1};jh.regexp_eatAtomEscape=function(c){if(this.regexp_eatBackReference(c)||this.regexp_eatCharacterClassEscape(c)||this.regexp_eatCharacterEscape(c)||
c.switchN&&this.regexp_eatKGroupName(c))return!0;c.switchU&&(99===c.current()&&c.raise("Invalid unicode escape"),c.raise("Invalid escape"));return!1};jh.regexp_eatBackReference=function(c){var k=c.pos;if(this.regexp_eatDecimalEscape(c)){var d=c.lastIntValue;if(c.switchU)return d>c.maxBackReference&&(c.maxBackReference=d),!0;if(d<=c.numCapturingParens)return!0;c.pos=k}return!1};jh.regexp_eatKGroupName=function(c){if(c.eat(107)){if(this.regexp_eatGroupName(c))return c.backReferenceNames.push(c.lastStringValue),
!0;c.raise("Invalid named reference")}return!1};jh.regexp_eatCharacterEscape=function(c){return this.regexp_eatControlEscape(c)||this.regexp_eatCControlLetter(c)||this.regexp_eatZero(c)||this.regexp_eatHexEscapeSequence(c)||this.regexp_eatRegExpUnicodeEscapeSequence(c,!1)||!c.switchU&&this.regexp_eatLegacyOctalEscapeSequence(c)||this.regexp_eatIdentityEscape(c)};jh.regexp_eatCControlLetter=function(c){var k=c.pos;if(c.eat(99)){if(this.regexp_eatControlLetter(c))return!0;c.pos=k}return!1};jh.regexp_eatZero=
function(c){return 48!==c.current()||wi(c.lookahead())?!1:(c.lastIntValue=0,c.advance(),!0)};jh.regexp_eatControlEscape=function(c){var k=c.current();return 116===k?(c.lastIntValue=9,c.advance(),!0):110===k?(c.lastIntValue=10,c.advance(),!0):118===k?(c.lastIntValue=11,c.advance(),!0):102===k?(c.lastIntValue=12,c.advance(),!0):114===k?(c.lastIntValue=13,c.advance(),!0):!1};jh.regexp_eatControlLetter=function(c){var k=c.current();return 65<=k&&90>=k||97<=k&&122>=k?(c.lastIntValue=k%32,c.advance(),!0):
!1};jh.regexp_eatRegExpUnicodeEscapeSequence=function(c,k){void 0===k&&(k=!1);var d=c.pos;k=k||c.switchU;if(c.eat(117)){if(this.regexp_eatFixedHexDigits(c,4)){d=c.lastIntValue;if(k&&55296<=d&&56319>=d){k=c.pos;if(c.eat(92)&&c.eat(117)&&this.regexp_eatFixedHexDigits(c,4)){var h=c.lastIntValue;if(56320<=h&&57343>=h)return c.lastIntValue=1024*(d-55296)+(h-56320)+65536,!0}c.pos=k;c.lastIntValue=d}return!0}if(h=k&&c.eat(123)&&this.regexp_eatHexDigits(c)&&c.eat(125))h=c.lastIntValue,h=0<=h&&1114111>=h;
if(h)return!0;k&&c.raise("Invalid unicode escape");c.pos=d}return!1};jh.regexp_eatIdentityEscape=function(c){if(c.switchU)return this.regexp_eatSyntaxCharacter(c)?!0:c.eat(47)?(c.lastIntValue=47,!0):!1;var k=c.current();return 99===k||c.switchN&&107===k?!1:(c.lastIntValue=k,c.advance(),!0)};jh.regexp_eatDecimalEscape=function(c){c.lastIntValue=0;var k=c.current();if(49<=k&&57>=k){do c.lastIntValue=10*c.lastIntValue+(k-48),c.advance();while(48<=(k=c.current())&&57>=k);return!0}return!1};jh.regexp_eatCharacterClassEscape=
function(c){var k=c.current();if(100===k||68===k||115===k||83===k||119===k||87===k)return c.lastIntValue=-1,c.advance(),!0;if(c.switchU&&9<=this.options.ecmaVersion&&(80===k||112===k)){c.lastIntValue=-1;c.advance();if(c.eat(123)&&this.regexp_eatUnicodePropertyValueExpression(c)&&c.eat(125))return!0;c.raise("Invalid property name")}return!1};jh.regexp_eatUnicodePropertyValueExpression=function(c){var k=c.pos;if(this.regexp_eatUnicodePropertyName(c)&&c.eat(61)){var d=c.lastStringValue;if(this.regexp_eatUnicodePropertyValue(c))return this.regexp_validateUnicodePropertyNameAndValue(c,
d,c.lastStringValue),!0}c.pos=k;return this.regexp_eatLoneUnicodePropertyNameOrValue(c)?(this.regexp_validateUnicodePropertyNameOrValue(c,c.lastStringValue),!0):!1};jh.regexp_validateUnicodePropertyNameAndValue=function(c,k,d){UK.call(c.unicodeProperties.nonBinary,k)||c.raise("Invalid property name");c.unicodeProperties.nonBinary[k].test(d)||c.raise("Invalid property value")};jh.regexp_validateUnicodePropertyNameOrValue=function(c,k){c.unicodeProperties.binary.test(k)||c.raise("Invalid property name")};
jh.regexp_eatUnicodePropertyName=function(c){var k;for(c.lastStringValue="";mz(k=c.current());)c.lastStringValue+=Hx(k),c.advance();return""!==c.lastStringValue};jh.regexp_eatUnicodePropertyValue=function(c){var k;for(c.lastStringValue="";Ix(k=c.current());)c.lastStringValue+=Hx(k),c.advance();return""!==c.lastStringValue};jh.regexp_eatLoneUnicodePropertyNameOrValue=function(c){return this.regexp_eatUnicodePropertyValue(c)};jh.regexp_eatCharacterClass=function(c){if(c.eat(91)){c.eat(94);this.regexp_classRanges(c);
if(c.eat(93))return!0;c.raise("Unterminated character class")}return!1};jh.regexp_classRanges=function(c){for(;this.regexp_eatClassAtom(c);){var k=c.lastIntValue;if(c.eat(45)&&this.regexp_eatClassAtom(c)){var d=c.lastIntValue;!c.switchU||-1!==k&&-1!==d||c.raise("Invalid character class");-1!==k&&-1!==d&&k>d&&c.raise("Range out of order in character class")}}};jh.regexp_eatClassAtom=function(c){var k=c.pos;if(c.eat(92)){if(this.regexp_eatClassEscape(c))return!0;if(c.switchU){var d=c.current();(99===
d||48<=d&&55>=d)&&c.raise("Invalid class escape");c.raise("Invalid escape")}c.pos=k}k=c.current();return 93!==k?(c.lastIntValue=k,c.advance(),!0):!1};jh.regexp_eatClassEscape=function(c){var k=c.pos;if(c.eat(98))return c.lastIntValue=8,!0;if(c.switchU&&c.eat(45))return c.lastIntValue=45,!0;if(!c.switchU&&c.eat(99)){if(this.regexp_eatClassControlLetter(c))return!0;c.pos=k}return this.regexp_eatCharacterClassEscape(c)||this.regexp_eatCharacterEscape(c)};jh.regexp_eatClassControlLetter=function(c){var k=
c.current();return wi(k)||95===k?(c.lastIntValue=k%32,c.advance(),!0):!1};jh.regexp_eatHexEscapeSequence=function(c){var k=c.pos;if(c.eat(120)){if(this.regexp_eatFixedHexDigits(c,2))return!0;c.switchU&&c.raise("Invalid escape");c.pos=k}return!1};jh.regexp_eatDecimalDigits=function(c){var k=c.pos,d;for(c.lastIntValue=0;wi(d=c.current());)c.lastIntValue=10*c.lastIntValue+(d-48),c.advance();return c.pos!==k};jh.regexp_eatHexDigits=function(c){var k=c.pos,d;for(c.lastIntValue=0;lr(d=c.current());)c.lastIntValue=
16*c.lastIntValue+fn(d),c.advance();return c.pos!==k};jh.regexp_eatLegacyOctalEscapeSequence=function(c){if(this.regexp_eatOctalDigit(c)){var k=c.lastIntValue;if(this.regexp_eatOctalDigit(c)){var d=c.lastIntValue;3>=k&&this.regexp_eatOctalDigit(c)?c.lastIntValue=64*k+8*d+c.lastIntValue:c.lastIntValue=8*k+d}else c.lastIntValue=k;return!0}return!1};jh.regexp_eatOctalDigit=function(c){var k=c.current();if(48<=k&&55>=k)return c.lastIntValue=k-48,c.advance(),!0;c.lastIntValue=0;return!1};jh.regexp_eatFixedHexDigits=
function(c,k){for(var d=c.pos,h=c.lastIntValue=0;h<k;++h){var n=c.current();if(!lr(n))return c.pos=d,!1;c.lastIntValue=16*c.lastIntValue+fn(n);c.advance()}return!0};var kO=function(c){this.type=c.type;this.value=c.value;this.start=c.start;this.end=c.end;c.options.locations&&(this.loc=new RD(c,c.startLoc,c.endLoc));c.options.ranges&&(this.range=[c.start,c.end])},zj=xn.prototype;zj.next=function(c){!c&&this.type.keyword&&this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword "+
this.type.keyword);if(this.options.onToken)this.options.onToken(new kO(this));this.lastTokEnd=this.end;this.lastTokStart=this.start;this.lastTokEndLoc=this.endLoc;this.lastTokStartLoc=this.startLoc;this.nextToken()};zj.getToken=function(){this.next();return new kO(this)};"undefined"!==typeof Symbol&&(zj[Symbol.iterator]=function(){var c=this;return{next:function(){var k=c.getToken();return{done:k.type===Ya.eof,value:k}}}});zj.curContext=function(){return this.context[this.context.length-1]};zj.nextToken=
function(){var c=this.curContext();c&&c.preserveSpace||this.skipSpace();this.start=this.pos;this.options.locations&&(this.startLoc=this.curPosition());if(this.pos>=this.input.length)return this.finishToken(Ya.eof);if(c.override)return c.override(this);this.readToken(this.fullCharCodeAtPos())};zj.readToken=function(c){return zo(c,6<=this.options.ecmaVersion)||92===c?this.readWord():this.getTokenFromCode(c)};zj.fullCharCodeAtPos=function(){var c=this.input.charCodeAt(this.pos);if(55295>=c||57344<=c)return c;
var k=this.input.charCodeAt(this.pos+1);return(c<<10)+k-56613888};zj.skipBlockComment=function(){var c=this.options.onComment&&this.curPosition(),k=this.pos,d=this.input.indexOf("*/",this.pos+=2);-1===d&&this.raise(this.pos-2,"Unterminated comment");this.pos=d+2;if(this.options.locations){sB.lastIndex=k;for(var h;(h=sB.exec(this.input))&&h.index<this.pos;)++this.curLine,this.lineStart=h.index+h[0].length}if(this.options.onComment)this.options.onComment(!0,this.input.slice(k+2,d),k,this.pos,c,this.curPosition())};
zj.skipLineComment=function(c){for(var k=this.pos,d=this.options.onComment&&this.curPosition(),h=this.input.charCodeAt(this.pos+=c);this.pos<this.input.length&&!Kn(h);)h=this.input.charCodeAt(++this.pos);if(this.options.onComment)this.options.onComment(!1,this.input.slice(k+c,this.pos),k,this.pos,d,this.curPosition())};zj.skipSpace=function(){a:for(;this.pos<this.input.length;){var c=this.input.charCodeAt(this.pos);switch(c){case 32:case 160:++this.pos;break;case 13:10===this.input.charCodeAt(this.pos+
1)&&++this.pos;case 10:case 8232:case 8233:++this.pos;this.options.locations&&(++this.curLine,this.lineStart=this.pos);break;case 47:switch(this.input.charCodeAt(this.pos+1)){case 42:this.skipBlockComment();break;case 47:this.skipLineComment(2);break;default:break a}break;default:if(8<c&&14>c||5760<=c&&z9.test(String.fromCharCode(c)))++this.pos;else break a}}};zj.finishToken=function(c,k){this.end=this.pos;this.options.locations&&(this.endLoc=this.curPosition());var d=this.type;this.type=c;this.value=
k;this.updateContext(d)};zj.readToken_dot=function(){var c=this.input.charCodeAt(this.pos+1);if(48<=c&&57>=c)return this.readNumber(!0);var k=this.input.charCodeAt(this.pos+2);if(6<=this.options.ecmaVersion&&46===c&&46===k)return this.pos+=3,this.finishToken(Ya.ellipsis);++this.pos;return this.finishToken(Ya.dot)};zj.readToken_slash=function(){var c=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):61===c?this.finishOp(Ya.assign,2):this.finishOp(Ya.slash,1)};
zj.readToken_mult_modulo_exp=function(c){var k=this.input.charCodeAt(this.pos+1),d=1,h=42===c?Ya.star:Ya.modulo;7<=this.options.ecmaVersion&&42===c&&42===k&&(++d,h=Ya.starstar,k=this.input.charCodeAt(this.pos+2));return 61===k?this.finishOp(Ya.assign,d+1):this.finishOp(h,d)};zj.readToken_pipe_amp=function(c){var k=this.input.charCodeAt(this.pos+1);return k===c?12<=this.options.ecmaVersion&&61===this.input.charCodeAt(this.pos+2)?this.finishOp(Ya.assign,3):this.finishOp(124===c?Ya.logicalOR:Ya.logicalAND,
2):61===k?this.finishOp(Ya.assign,2):this.finishOp(124===c?Ya.bitwiseOR:Ya.bitwiseAND,1)};zj.readToken_caret=function(){return 61===this.input.charCodeAt(this.pos+1)?this.finishOp(Ya.assign,2):this.finishOp(Ya.bitwiseXOR,1)};zj.readToken_plus_min=function(c){var k=this.input.charCodeAt(this.pos+1);return k===c?45!==k||this.inModule||62!==this.input.charCodeAt(this.pos+2)||0!==this.lastTokEnd&&!Or.test(this.input.slice(this.lastTokEnd,this.pos))?this.finishOp(Ya.incDec,2):(this.skipLineComment(3),
this.skipSpace(),this.nextToken()):61===k?this.finishOp(Ya.assign,2):this.finishOp(Ya.plusMin,1)};zj.readToken_lt_gt=function(c){var k=this.input.charCodeAt(this.pos+1),d=1;if(k===c)return d=62===c&&62===this.input.charCodeAt(this.pos+2)?3:2,61===this.input.charCodeAt(this.pos+d)?this.finishOp(Ya.assign,d+1):this.finishOp(Ya.bitShift,d);if(33===k&&60===c&&!this.inModule&&45===this.input.charCodeAt(this.pos+2)&&45===this.input.charCodeAt(this.pos+3))return this.skipLineComment(4),this.skipSpace(),
this.nextToken();61===k&&(d=2);return this.finishOp(Ya.relational,d)};zj.readToken_eq_excl=function(c){var k=this.input.charCodeAt(this.pos+1);return 61===k?this.finishOp(Ya.equality,61===this.input.charCodeAt(this.pos+2)?3:2):61===c&&62===k&&6<=this.options.ecmaVersion?(this.pos+=2,this.finishToken(Ya.arrow)):this.finishOp(61===c?Ya.eq:Ya.prefix,1)};zj.readToken_question=function(){var c=this.options.ecmaVersion;if(11<=c){var k=this.input.charCodeAt(this.pos+1);if(46===k){var d=this.input.charCodeAt(this.pos+
2);if(48>d||57<d)return this.finishOp(Ya.questionDot,2)}if(63===k)return 12<=c&&61===this.input.charCodeAt(this.pos+2)?this.finishOp(Ya.assign,3):this.finishOp(Ya.coalesce,2)}return this.finishOp(Ya.question,1)};zj.getTokenFromCode=function(c){switch(c){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(Ya.parenL);case 41:return++this.pos,this.finishToken(Ya.parenR);case 59:return++this.pos,this.finishToken(Ya.semi);case 44:return++this.pos,this.finishToken(Ya.comma);case 91:return++this.pos,
this.finishToken(Ya.bracketL);case 93:return++this.pos,this.finishToken(Ya.bracketR);case 123:return++this.pos,this.finishToken(Ya.braceL);case 125:return++this.pos,this.finishToken(Ya.braceR);case 58:return++this.pos,this.finishToken(Ya.colon);case 96:if(6>this.options.ecmaVersion)break;++this.pos;return this.finishToken(Ya.backQuote);case 48:c=this.input.charCodeAt(this.pos+1);if(120===c||88===c)return this.readRadixNumber(16);if(6<=this.options.ecmaVersion){if(111===c||79===c)return this.readRadixNumber(8);
if(98===c||66===c)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(c);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo_exp(c);case 124:case 38:return this.readToken_pipe_amp(c);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(c);case 60:case 62:return this.readToken_lt_gt(c);case 61:case 33:return this.readToken_eq_excl(c);
case 63:return this.readToken_question();case 126:return this.finishOp(Ya.prefix,1)}this.raise(this.pos,"Unexpected character '"+Mt(c)+"'")};zj.finishOp=function(c,k){var d=this.input.slice(this.pos,this.pos+k);this.pos+=k;return this.finishToken(c,d)};zj.readRegexp=function(){for(var c,k,d=this.pos;;){this.pos>=this.input.length&&this.raise(d,"Unterminated regular expression");var h=this.input.charAt(this.pos);Or.test(h)&&this.raise(d,"Unterminated regular expression");if(c)c=!1;else{if("["===h)k=
!0;else if("]"===h&&k)k=!1;else if("/"===h&&!k)break;c="\\"===h}++this.pos}c=this.input.slice(d,this.pos);++this.pos;h=this.pos;k=this.readWord1();this.containsEsc&&this.unexpected(h);h=this.regexpState||(this.regexpState=new vy(this));h.reset(d,c,k);this.validateRegExpFlags(h);this.validateRegExpPattern(h);d=null;try{d=new RegExp(c,k)}catch(n){}return this.finishToken(Ya.regexp,{pattern:c,flags:k,value:d})};zj.readInt=function(c,k,d){var h=12<=this.options.ecmaVersion&&void 0===k;d=d&&48===this.input.charCodeAt(this.pos);
for(var n=this.pos,b=0,e=0,l=0,a=null==k?Infinity:k;l<a;++l,++this.pos){var f=this.input.charCodeAt(this.pos);if(h&&95===f)d&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed in legacy octal numeric literals"),95===e&&this.raiseRecoverable(this.pos,"Numeric separator must be exactly one underscore"),0===l&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed at the first of digits"),e=f;else{var m=97<=f?f-97+10:65<=f?f-65+10:48<=f&&57>=f?f-48:Infinity;if(m>=c)break;e=f;
b=b*c+m}}h&&95===e&&this.raiseRecoverable(this.pos-1,"Numeric separator is not allowed at the last of digits");return this.pos===n||null!=k&&this.pos-n!==k?null:b};zj.readRadixNumber=function(c){var k=this.pos;this.pos+=2;var d=this.readInt(c);null==d&&this.raise(this.start+2,"Expected number in radix "+c);11<=this.options.ecmaVersion&&110===this.input.charCodeAt(this.pos)?(d=Nv(this.input.slice(k,this.pos)),++this.pos):zo(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");
return this.finishToken(Ya.num,d)};zj.readNumber=function(c){var k=this.pos;c||null!==this.readInt(10,void 0,!0)||this.raise(k,"Invalid number");var d=2<=this.pos-k&&48===this.input.charCodeAt(k);d&&this.strict&&this.raise(k,"Invalid number");var h=this.input.charCodeAt(this.pos);if(!d&&!c&&11<=this.options.ecmaVersion&&110===h)return d=Nv(this.input.slice(k,this.pos)),++this.pos,zo(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(Ya.num,d);d&&/[89]/.test(this.input.slice(k,
this.pos))&&(d=!1);46!==h||d||(++this.pos,this.readInt(10),h=this.input.charCodeAt(this.pos));69!==h&&101!==h||d||(h=this.input.charCodeAt(++this.pos),43!==h&&45!==h||++this.pos,null===this.readInt(10)&&this.raise(k,"Invalid number"));zo(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");c=this.input.slice(k,this.pos);d=d?parseInt(c,8):parseFloat(c.replace(/_/g,""));return this.finishToken(Ya.num,d)};zj.readCodePoint=function(){if(123===this.input.charCodeAt(this.pos)){6>
this.options.ecmaVersion&&this.unexpected();var c=++this.pos;var k=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos);++this.pos;1114111<k&&this.invalidStringToken(c,"Code point out of bounds")}else k=this.readHexChar(4);return k};zj.readString=function(c){for(var k="",d=++this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");var h=this.input.charCodeAt(this.pos);if(h===c)break;92===h?(k+=this.input.slice(d,this.pos),k+=this.readEscapedChar(!1),d=
this.pos):(Kn(h,10<=this.options.ecmaVersion)&&this.raise(this.start,"Unterminated string constant"),++this.pos)}k+=this.input.slice(d,this.pos++);return this.finishToken(Ya.string,k)};var B9={};zj.tryReadTemplateToken=function(){this.inTemplateElement=!0;try{this.readTmplToken()}catch(c){if(c===B9)this.readInvalidTemplateToken();else throw c;}this.inTemplateElement=!1};zj.invalidStringToken=function(c,k){if(this.inTemplateElement&&9<=this.options.ecmaVersion)throw B9;this.raise(c,k)};zj.readTmplToken=
function(){for(var c="",k=this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated template");var d=this.input.charCodeAt(this.pos);if(96===d||36===d&&123===this.input.charCodeAt(this.pos+1)){if(this.pos===this.start&&(this.type===Ya.template||this.type===Ya.invalidTemplate)){if(36===d)return this.pos+=2,this.finishToken(Ya.dollarBraceL);++this.pos;return this.finishToken(Ya.backQuote)}c+=this.input.slice(k,this.pos);return this.finishToken(Ya.template,c)}if(92===d)c+=this.input.slice(k,
this.pos),c+=this.readEscapedChar(!0),k=this.pos;else if(Kn(d)){c+=this.input.slice(k,this.pos);++this.pos;switch(d){case 13:10===this.input.charCodeAt(this.pos)&&++this.pos;case 10:c+="\n";break;default:c+=String.fromCharCode(d)}this.options.locations&&(++this.curLine,this.lineStart=this.pos);k=this.pos}else++this.pos}};zj.readInvalidTemplateToken=function(){for(;this.pos<this.input.length;this.pos++)switch(this.input[this.pos]){case "\\":++this.pos;break;case "$":if("{"!==this.input[this.pos+1])break;
case "`":return this.finishToken(Ya.invalidTemplate,this.input.slice(this.start,this.pos))}this.raise(this.start,"Unterminated template")};zj.readEscapedChar=function(c){var k=this.input.charCodeAt(++this.pos);++this.pos;switch(k){case 110:return"\n";case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return Mt(this.readCodePoint());case 116:return"\t";case 98:return"\b";case 118:return"\x0B";case 102:return"\f";case 13:10===this.input.charCodeAt(this.pos)&&++this.pos;
case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";case 56:case 57:if(this.strict&&this.invalidStringToken(this.pos-1,"Invalid escape sequence"),c)return this.invalidStringToken(this.pos-1,"Invalid escape sequence in template string"),null;default:if(48<=k&&55>=k){var d=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],h=parseInt(d,8);255<h&&(d=d.slice(0,-1),h=parseInt(d,8));this.pos+=d.length-1;k=this.input.charCodeAt(this.pos);"0"===d&&56!==k&&57!==k||!this.strict&&
!c||this.invalidStringToken(this.pos-1-d.length,c?"Octal literal in template string":"Octal literal in strict mode");return String.fromCharCode(h)}return Kn(k)?"":String.fromCharCode(k)}};zj.readHexChar=function(c){var k=this.pos;c=this.readInt(16,c);null===c&&this.invalidStringToken(k,"Bad character escape sequence");return c};zj.readWord1=function(){this.containsEsc=!1;for(var c="",k=!0,d=this.pos,h=6<=this.options.ecmaVersion;this.pos<this.input.length;){var n=this.fullCharCodeAtPos();if(vs(n,
h))this.pos+=65535>=n?1:2;else if(92===n)this.containsEsc=!0,c+=this.input.slice(d,this.pos),d=this.pos,117!==this.input.charCodeAt(++this.pos)&&this.invalidStringToken(this.pos,"Expecting Unicode escape sequence \\uXXXX"),++this.pos,n=this.readCodePoint(),(k?zo:vs)(n,h)||this.invalidStringToken(d,"Invalid Unicode escape"),c+=Mt(n),d=this.pos;else break;k=!1}return c+this.input.slice(d,this.pos)};zj.readWord=function(){var c=this.readWord1(),k=Ya.name;this.keywords.test(c)&&(k=IS[c]);return this.finishToken(k,
c)};xn.acorn={Parser:xn,version:"8.1.0",defaultOptions:TK,Position:PG,SourceLocation:RD,getLineInfo:Lv,Node:BC,TokenType:Zj,tokTypes:Ya,keywordTypes:IS,TokContext:Ku,tokContexts:dm,isIdentifierChar:vs,isIdentifierStart:zo,Token:kO,isNewLine:Kn,lineBreak:Or,lineBreakG:sB,nonASCIIwhitespace:z9};var Ok=function(c,k){void 0===k&&(k={});this.toks=this.constructor.BaseParser.tokenizer(c,k);this.options=this.toks.options;this.input=this.toks.input;this.tok=this.last={type:Ya.eof,start:0,end:0};this.tok.validateRegExpFlags=
ws;this.tok.validateRegExpPattern=ws;this.options.locations&&(c=this.toks.curPosition(),this.tok.loc=new RD(this.toks,c,c));this.ahead=[];this.context=[];this.curLineStart=this.curIndent=0;this.nextLineStart=this.lineEnd(this.curLineStart)+1;this.inFunction=this.inAsync=!1};Ok.prototype.startNode=function(){return new BC(this.toks,this.tok.start,this.options.locations?this.tok.loc.start:null)};Ok.prototype.storeCurrentPos=function(){return this.options.locations?[this.tok.start,this.tok.loc.start]:
this.tok.start};Ok.prototype.startNodeAt=function(c){return this.options.locations?new BC(this.toks,c[0],c[1]):new BC(this.toks,c)};Ok.prototype.finishNode=function(c,k){c.type=k;c.end=this.last.end;this.options.locations&&(c.loc.end=this.last.loc.end);this.options.ranges&&(c.range[1]=this.last.end);return c};Ok.prototype.dummyNode=function(c){var k=this.startNode();k.type=c;k.end=k.start;this.options.locations&&(k.loc.end=k.loc.start);this.options.ranges&&(k.range[1]=k.start);this.last={type:Ya.name,
start:k.start,end:k.start,loc:k.loc};return k};Ok.prototype.dummyIdent=function(){var c=this.dummyNode("Identifier");c.name="\u2716";return c};Ok.prototype.dummyString=function(){var c=this.dummyNode("Literal");c.value=c.raw="\u2716";return c};Ok.prototype.eat=function(c){return this.tok.type===c?(this.next(),!0):!1};Ok.prototype.isContextual=function(c){return this.tok.type===Ya.name&&this.tok.value===c};Ok.prototype.eatContextual=function(c){return this.tok.value===c&&this.eat(Ya.name)};Ok.prototype.canInsertSemicolon=
function(){return this.tok.type===Ya.eof||this.tok.type===Ya.braceR||Or.test(this.input.slice(this.last.end,this.tok.start))};Ok.prototype.semicolon=function(){return this.eat(Ya.semi)};Ok.prototype.expect=function(c){if(this.eat(c))return!0;for(var k=1;2>=k;k++)if(this.lookAhead(k).type===c){for(c=0;c<k;c++)this.next();return!0}};Ok.prototype.pushCx=function(){this.context.push(this.curIndent)};Ok.prototype.popCx=function(){this.curIndent=this.context.pop()};Ok.prototype.lineEnd=function(c){for(;c<
this.input.length&&!Kn(this.input.charCodeAt(c));)++c;return c};Ok.prototype.indentationAfter=function(c){for(var k=0;;++c){var d=this.input.charCodeAt(c);if(32===d)++k;else if(9===d)k+=this.options.tabSize;else return k}};Ok.prototype.closes=function(c,k,d,h){return this.tok.type===c||this.tok.type===Ya.eof?!0:d!==this.curLineStart&&this.curIndent<k&&this.tokenStartsLine()&&(!h||this.nextLineStart>=this.input.length||this.indentationAfter(this.nextLineStart)<k)};Ok.prototype.tokenStartsLine=function(){for(var c=
this.tok.start-1;c>=this.curLineStart;--c){var k=this.input.charCodeAt(c);if(9!==k&&32!==k)return!1}return!0};Ok.prototype.extend=function(c,k){this[c]=k(this[c])};Ok.prototype.parse=function(){this.next();return this.parseTopLevel()};Ok.extend=function(){for(var c=[],k=arguments.length;k--;)c[k]=arguments[k];k=this;for(var d=0;d<c.length;d++)k=c[d](k);return k};Ok.parse=function(c,k){return(new this(c,k)).parse()};Ok.BaseParser=xn;var lO=Ok.prototype;lO.next=function(){this.last=this.tok;this.tok=
this.ahead.length?this.ahead.shift():this.readToken();if(this.tok.start>=this.nextLineStart){for(;this.tok.start>=this.nextLineStart;)this.curLineStart=this.nextLineStart,this.nextLineStart=this.lineEnd(this.curLineStart)+1;this.curIndent=this.indentationAfter(this.curLineStart)}};lO.readToken=function(){for(;;)try{return this.toks.next(),this.toks.type===Ya.dot&&"."===this.input.substr(this.toks.end,1)&&6<=this.options.ecmaVersion&&(this.toks.end++,this.toks.type=Ya.ellipsis),new kO(this.toks)}catch(h){if(!(h instanceof
SyntaxError))throw h;var c=h.message,k=h.raisedAt,d=!0;if(/unterminated/i.test(c))if(k=this.lineEnd(h.pos+1),/string/.test(c))d={start:h.pos,end:k,type:Ya.string,value:this.input.slice(h.pos+1,k)};else if(/regular expr/i.test(c)){d=this.input.slice(h.pos,k);try{d=new RegExp(d)}catch(n){}d={start:h.pos,end:k,type:Ya.regexp,value:d}}else d=/template/.test(c)?{start:h.pos,end:k,type:Ya.template,value:this.input.slice(h.pos,k)}:!1;else if(/invalid (unicode|regexp|number)|expecting unicode|octal literal|is reserved|directly after number|expected number in radix/i.test(c))for(;k<
this.input.length&&!Aa(this.input.charCodeAt(k));)++k;else if(/character escape|expected hexadecimal/i.test(c))for(;k<this.input.length&&(c=this.input.charCodeAt(k++),34!==c&&39!==c&&!Kn(c)););else if(/unexpected character/i.test(c))k++,d=!1;else if(/regular expression/i.test(c))d=!0;else throw h;this.resetTo(k);!0===d&&(d={start:k,end:k,type:Ya.name,value:"\u2716"});if(d)return this.options.locations&&(d.loc=new RD(this.toks,Lv(this.input,d.start),Lv(this.input,d.end))),d}};lO.resetTo=function(c){this.toks.pos=
c;var k=this.input.charAt(c-1);this.toks.exprAllowed=!k||/[[{(,;:?/*=+\-~!|&%^<>]/.test(k)||/[enwfd]/.test(k)&&/\b(case|else|return|throw|new|in|(instance|type)?of|delete|void)$/.test(this.input.slice(c-10,c));if(this.options.locations){this.toks.curLine=1;this.toks.lineStart=sB.lastIndex=0;for(var d;(d=sB.exec(this.input))&&d.index<c;)++this.toks.curLine,this.toks.lineStart=d.index+d[0].length}};lO.lookAhead=function(c){for(;c>this.ahead.length;)this.ahead.push(this.readToken());return this.ahead[c-
1]};var et=Ok.prototype;et.parseTopLevel=function(){var c=this.startNodeAt(this.options.locations?[0,Lv(this.input,0)]:0);for(c.body=[];this.tok.type!==Ya.eof;)c.body.push(this.parseStatement());this.toks.adaptDirectivePrologue(c.body);this.last=this.tok;c.sourceType=this.options.sourceType;return this.finishNode(c,"Program")};et.parseStatement=function(){var c=this.tok.type,k=this.startNode();if(this.toks.isLet()){c=Ya._var;var d="let"}switch(c){case Ya._break:case Ya._continue:this.next();var h=
c===Ya._break;this.semicolon()||this.canInsertSemicolon()?k.label=null:(k.label=this.tok.type===Ya.name?this.parseIdent():null,this.semicolon());return this.finishNode(k,h?"BreakStatement":"ContinueStatement");case Ya._debugger:return this.next(),this.semicolon(),this.finishNode(k,"DebuggerStatement");case Ya._do:return this.next(),k.body=this.parseStatement(),k.test=this.eat(Ya._while)?this.parseParenExpression():this.dummyIdent(),this.semicolon(),this.finishNode(k,"DoWhileStatement");case Ya._for:this.next();
h=9<=this.options.ecmaVersion&&this.eatContextual("await");this.pushCx();this.expect(Ya.parenL);if(this.tok.type===Ya.semi)return this.parseFor(k,null);if((c=this.toks.isLet())||this.tok.type===Ya._var||this.tok.type===Ya._const)return c=this.parseVar(this.startNode(),!0,c?"let":this.tok.value),1!==c.declarations.length||this.tok.type!==Ya._in&&!this.isContextual("of")?this.parseFor(k,c):(9<=this.options.ecmaVersion&&this.tok.type!==Ya._in&&(k.await=h),this.parseForIn(k,c));c=this.parseExpression(!0);
return this.tok.type===Ya._in||this.isContextual("of")?(9<=this.options.ecmaVersion&&this.tok.type!==Ya._in&&(k.await=h),this.parseForIn(k,this.toAssignable(c))):this.parseFor(k,c);case Ya._function:return this.next(),this.parseFunction(k,!0);case Ya._if:return this.next(),k.test=this.parseParenExpression(),k.consequent=this.parseStatement(),k.alternate=this.eat(Ya._else)?this.parseStatement():null,this.finishNode(k,"IfStatement");case Ya._return:return this.next(),this.eat(Ya.semi)||this.canInsertSemicolon()?
k.argument=null:(k.argument=this.parseExpression(),this.semicolon()),this.finishNode(k,"ReturnStatement");case Ya._switch:c=this.curIndent;d=this.curLineStart;this.next();k.discriminant=this.parseParenExpression();k.cases=[];this.pushCx();for(this.expect(Ya.braceL);!this.closes(Ya.braceR,c,d,!0);)if(this.tok.type===Ya._case||this.tok.type===Ya._default){var n=this.tok.type===Ya._case;h&&this.finishNode(h,"SwitchCase");k.cases.push(h=this.startNode());h.consequent=[];this.next();h.test=n?this.parseExpression():
null;this.expect(Ya.colon)}else h||(k.cases.push(h=this.startNode()),h.consequent=[],h.test=null),h.consequent.push(this.parseStatement());h&&this.finishNode(h,"SwitchCase");this.popCx();this.eat(Ya.braceR);return this.finishNode(k,"SwitchStatement");case Ya._throw:return this.next(),k.argument=this.parseExpression(),this.semicolon(),this.finishNode(k,"ThrowStatement");case Ya._try:return this.next(),k.block=this.parseBlock(),k.handler=null,this.tok.type===Ya._catch&&(h=this.startNode(),this.next(),
this.eat(Ya.parenL)?(h.param=this.toAssignable(this.parseExprAtom(),!0),this.expect(Ya.parenR)):h.param=null,h.body=this.parseBlock(),k.handler=this.finishNode(h,"CatchClause")),k.finalizer=this.eat(Ya._finally)?this.parseBlock():null,k.handler||k.finalizer?this.finishNode(k,"TryStatement"):k.block;case Ya._var:case Ya._const:return this.parseVar(k,!1,d||this.tok.value);case Ya._while:return this.next(),k.test=this.parseParenExpression(),k.body=this.parseStatement(),this.finishNode(k,"WhileStatement");
case Ya._with:return this.next(),k.object=this.parseParenExpression(),k.body=this.parseStatement(),this.finishNode(k,"WithStatement");case Ya.braceL:return this.parseBlock();case Ya.semi:return this.next(),this.finishNode(k,"EmptyStatement");case Ya._class:return this.parseClass(!0);case Ya._import:return 10<this.options.ecmaVersion&&(h=this.lookAhead(1).type,h===Ya.parenL||h===Ya.dot)?(k.expression=this.parseExpression(),this.semicolon(),this.finishNode(k,"ExpressionStatement")):this.parseImport();
case Ya._export:return this.parseExport();default:if(this.toks.isAsyncFunction())return this.next(),this.next(),this.parseFunction(k,!0,!0);h=this.parseExpression();if(Ao(h))return this.next(),this.tok.type===Ya.eof?this.finishNode(k,"EmptyStatement"):this.parseStatement();if(c===Ya.name&&"Identifier"===h.type&&this.eat(Ya.colon))return k.body=this.parseStatement(),k.label=h,this.finishNode(k,"LabeledStatement");k.expression=h;this.semicolon();return this.finishNode(k,"ExpressionStatement")}};et.parseBlock=
function(){var c=this.startNode();this.pushCx();this.expect(Ya.braceL);var k=this.curIndent,d=this.curLineStart;for(c.body=[];!this.closes(Ya.braceR,k,d,!0);)c.body.push(this.parseStatement());this.popCx();this.eat(Ya.braceR);return this.finishNode(c,"BlockStatement")};et.parseFor=function(c,k){c.init=k;c.test=c.update=null;this.eat(Ya.semi)&&this.tok.type!==Ya.semi&&(c.test=this.parseExpression());this.eat(Ya.semi)&&this.tok.type!==Ya.parenR&&(c.update=this.parseExpression());this.popCx();this.expect(Ya.parenR);
c.body=this.parseStatement();return this.finishNode(c,"ForStatement")};et.parseForIn=function(c,k){var d=this.tok.type===Ya._in?"ForInStatement":"ForOfStatement";this.next();c.left=k;c.right=this.parseExpression();this.popCx();this.expect(Ya.parenR);c.body=this.parseStatement();return this.finishNode(c,d)};et.parseVar=function(c,k,d){c.kind=d;this.next();c.declarations=[];do d=this.startNode(),d.id=6<=this.options.ecmaVersion?this.toAssignable(this.parseExprAtom(),!0):this.parseIdent(),d.init=this.eat(Ya.eq)?
this.parseMaybeAssign(k):null,c.declarations.push(this.finishNode(d,"VariableDeclarator"));while(this.eat(Ya.comma));c.declarations.length||(d=this.startNode(),d.id=this.dummyIdent(),c.declarations.push(this.finishNode(d,"VariableDeclarator")));k||this.semicolon();return this.finishNode(c,"VariableDeclaration")};et.parseClass=function(c){var k=this.startNode();this.next();k.id=this.tok.type===Ya.name?this.parseIdent():!0===c?this.dummyIdent():null;k.superClass=this.eat(Ya._extends)?this.parseExpression():
null;k.body=this.startNode();k.body.body=[];this.pushCx();var d=this.curIndent+1,h=this.curLineStart;this.eat(Ya.braceL);this.curIndent+1<d&&(d=this.curIndent,h=this.curLineStart);for(;!this.closes(Ya.braceR,d,h);)if(!this.semicolon()){var n=this.startNode(),b=void 0;6<=this.options.ecmaVersion&&(n.static=!1,b=this.eat(Ya.star));this.parsePropertyName(n);if(Ao(n.key))Ao(this.parseMaybeAssign())&&this.next(),this.eat(Ya.comma);else{"Identifier"!==n.key.type||n.computed||"static"!==n.key.name||this.tok.type===
Ya.parenL||this.tok.type===Ya.braceL?n.static=!1:(n.static=!0,b=this.eat(Ya.star),this.parsePropertyName(n));if(n.computed||"Identifier"!==n.key.type||"async"!==n.key.name||this.tok.type===Ya.parenL||this.canInsertSemicolon())var e=!1;else e=!0,b=9<=this.options.ecmaVersion&&this.eat(Ya.star),this.parsePropertyName(n);5<=this.options.ecmaVersion&&"Identifier"===n.key.type&&!n.computed&&("get"===n.key.name||"set"===n.key.name)&&this.tok.type!==Ya.parenL&&this.tok.type!==Ya.braceL?(n.kind=n.key.name,
this.parsePropertyName(n),n.value=this.parseMethod(!1)):(n.kind=n.computed||n.static||b||e||!("Identifier"===n.key.type&&"constructor"===n.key.name||"Literal"===n.key.type&&"constructor"===n.key.value)?"method":"constructor",n.value=this.parseMethod(b,e));k.body.body.push(this.finishNode(n,"MethodDefinition"))}}this.popCx();this.eat(Ya.braceR)||(this.last.end=this.tok.start,this.options.locations&&(this.last.loc.end=this.tok.loc.start));this.semicolon();this.finishNode(k.body,"ClassBody");return this.finishNode(k,
c?"ClassDeclaration":"ClassExpression")};et.parseFunction=function(c,k,d){var h=this.inAsync,n=this.inFunction;this.initFunction(c);6<=this.options.ecmaVersion&&(c.generator=this.eat(Ya.star));8<=this.options.ecmaVersion&&(c.async=!!d);this.tok.type===Ya.name?c.id=this.parseIdent():!0===k&&(c.id=this.dummyIdent());this.inAsync=c.async;this.inFunction=!0;c.params=this.parseFunctionParams();c.body=this.parseBlock();this.toks.adaptDirectivePrologue(c.body.body);this.inAsync=h;this.inFunction=n;return this.finishNode(c,
k?"FunctionDeclaration":"FunctionExpression")};et.parseExport=function(){var c=this.startNode();this.next();if(this.eat(Ya.star))return 11<=this.options.ecmaVersion&&(this.eatContextual("as")?c.exported=this.parseExprAtom():c.exported=null),c.source=this.eatContextual("from")?this.parseExprAtom():this.dummyString(),this.finishNode(c,"ExportAllDeclaration");if(this.eat(Ya._default)){var k;if(this.tok.type===Ya._function||(k=this.toks.isAsyncFunction())){var d=this.startNode();this.next();k&&this.next();
c.declaration=this.parseFunction(d,"nullableID",k)}else this.tok.type===Ya._class?c.declaration=this.parseClass("nullableID"):(c.declaration=this.parseMaybeAssign(),this.semicolon());return this.finishNode(c,"ExportDefaultDeclaration")}this.tok.type.keyword||this.toks.isLet()||this.toks.isAsyncFunction()?(c.declaration=this.parseStatement(),c.specifiers=[],c.source=null):(c.declaration=null,c.specifiers=this.parseExportSpecifierList(),c.source=this.eatContextual("from")?this.parseExprAtom():null,
this.semicolon());return this.finishNode(c,"ExportNamedDeclaration")};et.parseImport=function(){var c=this.startNode();this.next();if(this.tok.type===Ya.string)c.specifiers=[],c.source=this.parseExprAtom();else{if(this.tok.type===Ya.name&&"from"!==this.tok.value){var k=this.startNode();k.local=this.parseIdent();this.finishNode(k,"ImportDefaultSpecifier");this.eat(Ya.comma)}c.specifiers=this.parseImportSpecifiers();c.source=this.eatContextual("from")&&this.tok.type===Ya.string?this.parseExprAtom():
this.dummyString();k&&c.specifiers.unshift(k)}this.semicolon();return this.finishNode(c,"ImportDeclaration")};et.parseImportSpecifiers=function(){var c=[];if(this.tok.type===Ya.star){var k=this.startNode();this.next();k.local=this.eatContextual("as")?this.parseIdent():this.dummyIdent();c.push(this.finishNode(k,"ImportNamespaceSpecifier"))}else{k=this.curIndent;var d=this.curLineStart,h=this.nextLineStart;this.pushCx();this.eat(Ya.braceL);this.curLineStart>h&&(h=this.curLineStart);for(;!this.closes(Ya.braceR,
k+(this.curLineStart<=h?1:0),d);){var n=this.startNode();if(this.eat(Ya.star))n.local=this.eatContextual("as")?this.parseIdent():this.dummyIdent(),this.finishNode(n,"ImportNamespaceSpecifier");else{if(this.isContextual("from"))break;n.imported=this.parseIdent();if(Ao(n.imported))break;n.local=this.eatContextual("as")?this.parseIdent():n.imported;this.finishNode(n,"ImportSpecifier")}c.push(n);this.eat(Ya.comma)}this.eat(Ya.braceR);this.popCx()}return c};et.parseExportSpecifierList=function(){var c=
[],k=this.curIndent,d=this.curLineStart,h=this.nextLineStart;this.pushCx();this.eat(Ya.braceL);this.curLineStart>h&&(h=this.curLineStart);for(;!this.closes(Ya.braceR,k+(this.curLineStart<=h?1:0),d)&&!this.isContextual("from");){var n=this.startNode();n.local=this.parseIdent();if(Ao(n.local))break;n.exported=this.eatContextual("as")?this.parseIdent():n.local;this.finishNode(n,"ExportSpecifier");c.push(n);this.eat(Ya.comma)}this.eat(Ya.braceR);this.popCx();return c};var Pk=Ok.prototype;Pk.checkLVal=
function(c){if(!c)return c;switch(c.type){case "Identifier":case "MemberExpression":return c;case "ParenthesizedExpression":return c.expression=this.checkLVal(c.expression),c;default:return this.dummyIdent()}};Pk.parseExpression=function(c){var k=this.storeCurrentPos(),d=this.parseMaybeAssign(c);if(this.tok.type===Ya.comma){k=this.startNodeAt(k);for(k.expressions=[d];this.eat(Ya.comma);)k.expressions.push(this.parseMaybeAssign(c));return this.finishNode(k,"SequenceExpression")}return d};Pk.parseParenExpression=
function(){this.pushCx();this.expect(Ya.parenL);var c=this.parseExpression();this.popCx();this.expect(Ya.parenR);return c};Pk.parseMaybeAssign=function(c){if(this.toks.isContextual("yield"))return c=this.startNode(),this.next(),this.semicolon()||this.canInsertSemicolon()||this.tok.type!==Ya.star&&!this.tok.type.startsExpr?(c.delegate=!1,c.argument=null):(c.delegate=this.eat(Ya.star),c.argument=this.parseMaybeAssign()),this.finishNode(c,"YieldExpression");var k=this.storeCurrentPos(),d=this.parseMaybeConditional(c);
return this.tok.type.isAssign?(k=this.startNodeAt(k),k.operator=this.tok.value,k.left=this.tok.type===Ya.eq?this.toAssignable(d):this.checkLVal(d),this.next(),k.right=this.parseMaybeAssign(c),this.finishNode(k,"AssignmentExpression")):d};Pk.parseMaybeConditional=function(c){var k=this.storeCurrentPos(),d=this.parseExprOps(c);return this.eat(Ya.question)?(k=this.startNodeAt(k),k.test=d,k.consequent=this.parseMaybeAssign(),k.alternate=this.expect(Ya.colon)?this.parseMaybeAssign(c):this.dummyIdent(),
this.finishNode(k,"ConditionalExpression")):d};Pk.parseExprOps=function(c){var k=this.storeCurrentPos(),d=this.curIndent,h=this.curLineStart;return this.parseExprOp(this.parseMaybeUnary(!1),k,-1,c,d,h)};Pk.parseExprOp=function(c,k,d,h,n,b){if(this.curLineStart!==b&&this.curIndent<n&&this.tokenStartsLine())return c;var e=this.tok.type.binop;if(null!=e&&(!h||this.tok.type!==Ya._in)&&e>d){var l=this.startNodeAt(k);l.left=c;l.operator=this.tok.value;this.next();this.curLineStart!==b&&this.curIndent<n&&
this.tokenStartsLine()?l.right=this.dummyIdent():(c=this.storeCurrentPos(),l.right=this.parseExprOp(this.parseMaybeUnary(!1),c,e,h,n,b));this.finishNode(l,/&&|\|\||\?\?/.test(l.operator)?"LogicalExpression":"BinaryExpression");return this.parseExprOp(l,k,d,h,n,b)}return c};Pk.parseMaybeUnary=function(c){var k=this.storeCurrentPos();if(8<=this.options.ecmaVersion&&this.toks.isContextual("await")&&(this.inAsync||!this.inFunction&&this.options.allowAwaitOutsideFunction)){var d=this.parseAwait();c=!0}else if(this.tok.type.prefix){d=
this.startNode();var h=this.tok.type===Ya.incDec;h||(c=!0);d.operator=this.tok.value;d.prefix=!0;this.next();d.argument=this.parseMaybeUnary(!0);h&&(d.argument=this.checkLVal(d.argument));d=this.finishNode(d,h?"UpdateExpression":"UnaryExpression")}else if(this.tok.type===Ya.ellipsis)d=this.startNode(),this.next(),d.argument=this.parseMaybeUnary(c),d=this.finishNode(d,"SpreadElement");else for(d=this.parseExprSubscripts();this.tok.type.postfix&&!this.canInsertSemicolon();)h=this.startNodeAt(k),h.operator=
this.tok.value,h.prefix=!1,h.argument=this.checkLVal(d),this.next(),d=this.finishNode(h,"UpdateExpression");return!c&&this.eat(Ya.starstar)?(c=this.startNodeAt(k),c.operator="**",c.left=d,c.right=this.parseMaybeUnary(!1),this.finishNode(c,"BinaryExpression")):d};Pk.parseExprSubscripts=function(){var c=this.storeCurrentPos();return this.parseSubscripts(this.parseExprAtom(),c,!1,this.curIndent,this.curLineStart)};Pk.parseSubscripts=function(c,k,d,h,n){for(var b=11<=this.options.ecmaVersion,e=!1;;){if(this.curLineStart!==
n&&this.curIndent<=h&&this.tokenStartsLine())if(this.tok.type===Ya.dot&&this.curIndent===h)--h;else break;var l="Identifier"===c.type&&"async"===c.name&&!this.canInsertSemicolon(),a=b&&this.eat(Ya.questionDot);a&&(e=!0);if(a&&this.tok.type!==Ya.parenL&&this.tok.type!==Ya.bracketL&&this.tok.type!==Ya.backQuote||this.eat(Ya.dot)){var f=this.startNodeAt(k);f.object=c;this.curLineStart!==n&&this.curIndent<=h&&this.tokenStartsLine()?f.property=this.dummyIdent():f.property=this.parsePropertyAccessor()||
this.dummyIdent();f.computed=!1;b&&(f.optional=a);c=this.finishNode(f,"MemberExpression")}else if(this.tok.type===Ya.bracketL)this.pushCx(),this.next(),f=this.startNodeAt(k),f.object=c,f.property=this.parseExpression(),f.computed=!0,b&&(f.optional=a),this.popCx(),this.expect(Ya.bracketR),c=this.finishNode(f,"MemberExpression");else if(d||this.tok.type!==Ya.parenL)if(this.tok.type===Ya.backQuote)a=this.startNodeAt(k),a.tag=c,a.quasi=this.parseTemplate(),c=this.finishNode(a,"TaggedTemplateExpression");
else break;else{f=this.parseExprList(Ya.parenR);if(l&&this.eat(Ya.arrow))return this.parseArrowExpression(this.startNodeAt(k),f,!0);l=this.startNodeAt(k);l.callee=c;l.arguments=f;b&&(l.optional=a);c=this.finishNode(l,"CallExpression")}}e&&(k=this.startNodeAt(k),k.expression=c,c=this.finishNode(k,"ChainExpression"));return c};Pk.parseExprAtom=function(){switch(this.tok.type){case Ya._this:case Ya._super:var c=this.tok.type===Ya._this?"ThisExpression":"Super";var k=this.startNode();this.next();return this.finishNode(k,
c);case Ya.name:k=this.storeCurrentPos();c=this.parseIdent();var d=!1;if("async"===c.name&&!this.canInsertSemicolon()){if(this.eat(Ya._function))return this.parseFunction(this.startNodeAt(k),!1,!0);this.tok.type===Ya.name&&(c=this.parseIdent(),d=!0)}return this.eat(Ya.arrow)?this.parseArrowExpression(this.startNodeAt(k),[c],d):c;case Ya.regexp:return k=this.startNode(),c=this.tok.value,k.regex={pattern:c.pattern,flags:c.flags},k.value=c.value,k.raw=this.input.slice(this.tok.start,this.tok.end),this.next(),
this.finishNode(k,"Literal");case Ya.num:case Ya.string:return k=this.startNode(),k.value=this.tok.value,k.raw=this.input.slice(this.tok.start,this.tok.end),this.tok.type===Ya.num&&110===k.raw.charCodeAt(k.raw.length-1)&&(k.bigint=k.raw.slice(0,-1).replace(/_/g,"")),this.next(),this.finishNode(k,"Literal");case Ya._null:case Ya._true:case Ya._false:return k=this.startNode(),k.value=this.tok.type===Ya._null?null:this.tok.type===Ya._true,k.raw=this.tok.type.keyword,this.next(),this.finishNode(k,"Literal");
case Ya.parenL:k=this.storeCurrentPos();this.next();c=this.parseExpression();this.expect(Ya.parenR);if(this.eat(Ya.arrow))return c=c.expressions||[c],c.length&&Ao(c[c.length-1])&&c.pop(),this.parseArrowExpression(this.startNodeAt(k),c);this.options.preserveParens&&(k=this.startNodeAt(k),k.expression=c,c=this.finishNode(k,"ParenthesizedExpression"));return c;case Ya.bracketL:return k=this.startNode(),k.elements=this.parseExprList(Ya.bracketR,!0),this.finishNode(k,"ArrayExpression");case Ya.braceL:return this.parseObj();
case Ya._class:return this.parseClass(!1);case Ya._function:return k=this.startNode(),this.next(),this.parseFunction(k,!1);case Ya._new:return this.parseNew();case Ya.backQuote:return this.parseTemplate();case Ya._import:return 11<=this.options.ecmaVersion?this.parseExprImport():this.dummyIdent();default:return this.dummyIdent()}};Pk.parseExprImport=function(){var c=this.startNode(),k=this.parseIdent(!0);switch(this.tok.type){case Ya.parenL:return this.parseDynamicImport(c);case Ya.dot:return c.meta=
k,this.parseImportMeta(c);default:return c.name="import",this.finishNode(c,"Identifier")}};Pk.parseDynamicImport=function(c){c.source=this.parseExprList(Ya.parenR)[0]||this.dummyString();return this.finishNode(c,"ImportExpression")};Pk.parseImportMeta=function(c){this.next();c.property=this.parseIdent(!0);return this.finishNode(c,"MetaProperty")};Pk.parseNew=function(){var c=this.startNode(),k=this.curIndent,d=this.curLineStart,h=this.parseIdent(!0);if(6<=this.options.ecmaVersion&&this.eat(Ya.dot))return c.meta=
h,c.property=this.parseIdent(!0),this.finishNode(c,"MetaProperty");h=this.storeCurrentPos();c.callee=this.parseSubscripts(this.parseExprAtom(),h,!0,k,d);c.arguments=this.tok.type===Ya.parenL?this.parseExprList(Ya.parenR):[];return this.finishNode(c,"NewExpression")};Pk.parseTemplateElement=function(){var c=this.startNode();c.value=this.tok.type===Ya.invalidTemplate?{raw:this.tok.value,cooked:null}:{raw:this.input.slice(this.tok.start,this.tok.end).replace(/\r\n?/g,"\n"),cooked:this.tok.value};this.next();
c.tail=this.tok.type===Ya.backQuote;return this.finishNode(c,"TemplateElement")};Pk.parseTemplate=function(){var c=this.startNode();this.next();c.expressions=[];var k=this.parseTemplateElement();for(c.quasis=[k];!k.tail;)this.next(),c.expressions.push(this.parseExpression()),this.expect(Ya.braceR)?k=this.parseTemplateElement():(k=this.startNode(),k.value={cooked:"",raw:""},k.tail=!0,this.finishNode(k,"TemplateElement")),c.quasis.push(k);this.expect(Ya.backQuote);return this.finishNode(c,"TemplateLiteral")};
Pk.parseObj=function(){var c=this.startNode();c.properties=[];this.pushCx();var k=this.curIndent+1,d=this.curLineStart;this.eat(Ya.braceL);this.curIndent+1<k&&(k=this.curIndent,d=this.curLineStart);for(;!this.closes(Ya.braceR,k,d);){var h=this.startNode(),n=void 0,b=void 0;if(9<=this.options.ecmaVersion&&this.eat(Ya.ellipsis))h.argument=this.parseMaybeAssign(),c.properties.push(this.finishNode(h,"SpreadElement"));else{6<=this.options.ecmaVersion&&(b=this.storeCurrentPos(),h.method=!1,h.shorthand=
!1,n=this.eat(Ya.star));this.parsePropertyName(h);if(this.toks.isAsyncProp(h)){var e=!0;n=9<=this.options.ecmaVersion&&this.eat(Ya.star);this.parsePropertyName(h)}else e=!1;Ao(h.key)?Ao(this.parseMaybeAssign())&&this.next():(this.eat(Ya.colon)?(h.kind="init",h.value=this.parseMaybeAssign()):6<=this.options.ecmaVersion&&(this.tok.type===Ya.parenL||this.tok.type===Ya.braceL)?(h.kind="init",h.method=!0,h.value=this.parseMethod(n,e)):5<=this.options.ecmaVersion&&"Identifier"===h.key.type&&!h.computed&&
("get"===h.key.name||"set"===h.key.name)&&this.tok.type!==Ya.comma&&this.tok.type!==Ya.braceR&&this.tok.type!==Ya.eq?(h.kind=h.key.name,this.parsePropertyName(h),h.value=this.parseMethod(!1)):(h.kind="init",6<=this.options.ecmaVersion?this.eat(Ya.eq)?(n=this.startNodeAt(b),n.operator="=",n.left=h.key,n.right=this.parseMaybeAssign(),h.value=this.finishNode(n,"AssignmentExpression")):h.value=h.key:h.value=this.dummyIdent(),h.shorthand=!0),c.properties.push(this.finishNode(h,"Property")))}this.eat(Ya.comma)}this.popCx();
this.eat(Ya.braceR)||(this.last.end=this.tok.start,this.options.locations&&(this.last.loc.end=this.tok.loc.start));return this.finishNode(c,"ObjectExpression")};Pk.parsePropertyName=function(c){if(6<=this.options.ecmaVersion){if(this.eat(Ya.bracketL)){c.computed=!0;c.key=this.parseExpression();this.expect(Ya.bracketR);return}c.computed=!1}var k=this.tok.type===Ya.num||this.tok.type===Ya.string?this.parseExprAtom():this.parseIdent();c.key=k||this.dummyIdent()};Pk.parsePropertyAccessor=function(){if(this.tok.type===
Ya.name||this.tok.type.keyword)return this.parseIdent()};Pk.parseIdent=function(){var c=this.tok.type===Ya.name?this.tok.value:this.tok.type.keyword;if(!c)return this.dummyIdent();var k=this.startNode();this.next();k.name=c;return this.finishNode(k,"Identifier")};Pk.initFunction=function(c){c.id=null;c.params=[];6<=this.options.ecmaVersion&&(c.generator=!1,c.expression=!1);8<=this.options.ecmaVersion&&(c.async=!1)};Pk.toAssignable=function(c,k){if(c&&"Identifier"!==c.type&&("MemberExpression"!==c.type||
k))if("ParenthesizedExpression"===c.type)this.toAssignable(c.expression,k);else{if(6>this.options.ecmaVersion)return this.dummyIdent();if("ObjectExpression"===c.type){c.type="ObjectPattern";for(var d=0,h=c.properties;d<h.length;d+=1)this.toAssignable(h[d],k)}else if("ArrayExpression"===c.type)c.type="ArrayPattern",this.toAssignableList(c.elements,k);else if("Property"===c.type)this.toAssignable(c.value,k);else if("SpreadElement"===c.type)c.type="RestElement",this.toAssignable(c.argument,k);else if("AssignmentExpression"===
c.type)c.type="AssignmentPattern",delete c.operator;else return this.dummyIdent()}return c};Pk.toAssignableList=function(c,k){for(var d=0;d<c.length;d+=1)this.toAssignable(c[d],k);return c};Pk.parseFunctionParams=function(c){c=this.parseExprList(Ya.parenR);return this.toAssignableList(c,!0)};Pk.parseMethod=function(c,k){var d=this.startNode(),h=this.inAsync,n=this.inFunction;this.initFunction(d);6<=this.options.ecmaVersion&&(d.generator=!!c);8<=this.options.ecmaVersion&&(d.async=!!k);this.inAsync=
d.async;this.inFunction=!0;d.params=this.parseFunctionParams();d.body=this.parseBlock();this.toks.adaptDirectivePrologue(d.body.body);this.inAsync=h;this.inFunction=n;return this.finishNode(d,"FunctionExpression")};Pk.parseArrowExpression=function(c,k,d){var h=this.inAsync,n=this.inFunction;this.initFunction(c);8<=this.options.ecmaVersion&&(c.async=!!d);this.inAsync=c.async;this.inFunction=!0;c.params=this.toAssignableList(k,!0);c.expression=this.tok.type!==Ya.braceL;c.expression?c.body=this.parseMaybeAssign():
(c.body=this.parseBlock(),this.toks.adaptDirectivePrologue(c.body.body));this.inAsync=h;this.inFunction=n;return this.finishNode(c,"ArrowFunctionExpression")};Pk.parseExprList=function(c,k){this.pushCx();var d=this.curIndent,h=this.curLineStart,n=[];for(this.next();!this.closes(c,d+1,h);)if(this.eat(Ya.comma))n.push(k?null:this.dummyIdent());else{var b=this.parseMaybeAssign();if(Ao(b)){if(this.closes(c,d,h))break;this.next()}else n.push(b);this.eat(Ya.comma)}this.popCx();this.eat(c)||(this.last.end=
this.tok.start,this.options.locations&&(this.last.loc.end=this.tok.loc.start));return n};Pk.parseAwait=function(){var c=this.startNode();this.next();c.argument=this.parseMaybeUnary();return this.finishNode(c,"AwaitExpression")};TK.tabSize=4;var mO=Object.freeze({__proto__:null,LooseParser:Ok,isDummy:Ao,parse:function(c,k){return Ok.parse(c,k)}}),jf=lively.FreezerRuntime.recorderFor("lively.ast/lib/acorn-extension.js");jf.forEachNode=function(c,k,d,h){h=h||{};var n=h.traversal||"preorder",b=jf.obj.clone(h.visitors?
h.visitors:jf.walk.make(jf.custom.visitors.withMemberExpression)),e="preorder"===n?function(l,a,f,m,r){k(f,d,m,a);return l(f,m+1,r)}:function(l,a,f,m,r){l=l(f,m+1,r);k(f,d,m,a);return l};Object.keys(b).forEach(function(l){var a=b[l];b[l]=function(f,m,r){return e(a,l,f,m,r)}});jf.walk.recursive(c,0,null,b);return c};jf.matchNodes=function(c,k,d,h){return jf.forEachNode(c,function(n,b,e,l){if(k[n.type])k[n.type](n,b,e,l)},d,h)};jf.findNodesIncluding=pq;jf.withParentInfo=function(c,k,d){function h(a){var f=
{id:jf.string.newUUID(),parentScope:a,containingScopes:[]};a&&a.containingScopes.push(f);return f}d=d||{};var n=jf.walk.make({Function:function(a,f,m){f&&f.scope&&(f.scope=h(f.scope));m(a.body,f,"ScopeBody")},VariableDeclarator:function(a,f,m){a.init&&m(a.init,f,"Expression")},VariableDeclaration:function(a,f,m){for(var r=0;r<a.declarations.length;++r){var v=a.declarations[r];v&&m(v,f,"VariableDeclarator")}},ObjectExpression:function(a,f,m){for(var r=0;r<a.properties.length;++r){var v=a.properties[r];
m(v.key,f,"Expression");m(v.value,f,"Expression")}},MemberExpression:function(a,f,m){m(a.object,f,"Expression");m(a.property,f,"Expression")}},jf.walk.base),b,e=[];jf.forEachNode(c,function(a){jf.arr.withoutAll(Object.keys(a),["end","start","type","source","raw"]).forEach(function(f){if(!a.__lookupGetter__(f)){var m=a[f];a.__defineGetter__(f,function(){b=f;return m});e.push([a,f,a[f]])}})},null,{visitors:n});var l=[];Object.keys(n).forEach(function(a){var f=n[a];n[a]=function(m,r,v){return a===m.type||
d.visitAllNodes?(l.push(k.call(null,m,{scope:r.scope,depth:r.depth,parent:r.parent,type:a,propertyInParent:b})),f(m,{scope:r.scope,parent:m,depth:r.depth+1},v)):f(m,r,v)}});jf.walk.recursive(c,{scope:h(),parent:null,propertyInParent:"",depth:0},null,n);e.forEach(function(a){delete a[0][a[1]];a[0][a[1]]=a[2]});return l};jf.copy=Ul;jf.findSiblings=qq;jf.findNodeByAstIndex=Nt;jf.findStatementOfNode=ye;jf.addAstIndex=tf;jf.obj=ng;jf.arr=Mf;jf.string=Th;jf.Path=Ih;jf.withMozillaAstDo=CC;jf.GLOBAL="undefined"!==
typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:void 0;jf.acorn=Fw;jf.walk=Iu;jf.loose=mO;jf.custom={};jf.custom.forEachNode=jf.forEachNode;jf.custom.matchNodes=jf.matchNodes;jf.custom.findNodesIncluding=jf.findNodesIncluding;jf.custom.withParentInfo=jf.withParentInfo;jf.custom.copy=jf.copy;jf.custom.findSiblings=jf.findSiblings;jf.custom.findNodeByAstIndex=jf.findNodeByAstIndex;jf.custom.findStatementOfNode=jf.findStatementOfNode;jf.custom.addAstIndex=jf.addAstIndex;
var sA=Ha("E",jf.custom);jf.walk=Iu;jf.walk=Iu;jf.loose=mO;jf.loose=mO;jf.acorn=Fw;jf.acorn=Fw;jf.custom=sA;jf.custom=sA;jf.findStatementOfNode=ye;jf.findStatementOfNode=ye;jf.addAstIndex=tf;jf.addAstIndex=tf;jf.findNodesIncluding=pq;jf.findNodesIncluding=pq;jf.findSiblings=qq;jf.findSiblings=qq;jf.findNodeByAstIndex=Nt;jf.findNodeByAstIndex=Nt;jf.copy=Ul;jf.copy=Ul;jf.custom.visitors={stopAtFunctions:jf.walk.make(Object.assign({Function:function(){}},jf.walk.base)),withMemberExpression:jf.walk.make({MemberExpression:function(c,
k,d){d(c.object,k,"Expression");d(c.property,k,"Expression")}},jf.walk.base)};var Gj=lively.FreezerRuntime.recorderFor("lively.ast/lib/visitors.js");Gj.blockInliner=function(c){if(Array.isArray(c.body))for(var k=c.body.length-1;0<=k;k--){var d=c.body[k];"BlockStatement"===d.type&&d[Gj.canBeInlinedSym]&&c.body.splice.apply(c.body,[k,1].concat(d.body))}return c};Gj.block=function(c){return{type:"BlockStatement",body:c}};Gj.Visitor=xe;var Lu=function(){return Gj.Visitor.apply(this,arguments)||this};
$jscomp.inherits(Lu,Gj.Visitor);Lu.prototype.accept=function(c,k,d){this.doFunc(c,k,d);return Gj.Visitor.prototype.accept.call(this,c,k,d)};Lu.run=function(c,k,d){var h=new this;h.doFunc=k;h.accept(c,d,[]);return d};Ha("A",Lu);Gj.AllNodesVisitor=Lu;var DC=function(){return Gj.Visitor.apply(this,arguments)||this};$jscomp.inherits(DC,Gj.Visitor);DC.prototype.accept=function(c,k,d){switch(c.type){case "ArrowFunctionExpression":return c;case "FunctionExpression":return c;case "FunctionDeclaration":return k.unshift({node:c,
path:d}),c;default:return Gj.Visitor.prototype.accept.call(this,c,k,d)}};DC.run=function(c){var k=[];(new this).accept(c,k,[]);return k};Gj.FindToplevelFuncDeclVisitor=DC;Gj.canBeInlinedSym=Symbol("canBeInlined");var ft=function(){return Gj.Visitor.apply(this,arguments)||this};$jscomp.inherits(ft,Gj.Visitor);ft.prototype.accept=function(c,k,d){c=this.replacer(Gj.Visitor.prototype.accept.call(this,c,k,d));k={};return Array.isArray(c)?1===c.length?c[0]:Object.assign(Gj.block(c),(k[Gj.canBeInlinedSym]=
!0,k)):c};ft.prototype.visitBlockStatement=function(c,k,d){return Gj.blockInliner(Gj.Visitor.prototype.visitBlockStatement.call(this,c,k,d))};ft.prototype.visitProgram=function(c,k,d){return Gj.blockInliner(Gj.Visitor.prototype.visitProgram.call(this,c,k,d))};ft.run=function(c,k){var d=new this;d.replacer=k;return d.accept(c,null,[])};Gj.ReplaceManyVisitor=ft;var Mu=function(){return Gj.Visitor.apply(this,arguments)||this};$jscomp.inherits(Mu,Gj.Visitor);Mu.prototype.accept=function(c,k,d){return this.replacer(Gj.Visitor.prototype.accept.call(this,
c,k,d),d)};Mu.run=function(c,k){var d=new this;d.replacer=k;return d.accept(c,null,[])};Gj.ReplaceVisitor=Mu;Gj.AllNodesVisitor=Lu;Gj.AllNodesVisitor=Lu;Gj.FindToplevelFuncDeclVisitor=DC;Gj.FindToplevelFuncDeclVisitor=DC;Gj.ReplaceVisitor=Mu;Gj.ReplaceVisitor=Mu;Gj.ReplaceManyVisitor=ft;Gj.ReplaceManyVisitor=ft;var Ph=lively.FreezerRuntime.recorderFor("lively.ast/lib/parser.js");Ph.addSource=Wa;Ph.nodesAt=function(c,k){k="string"===typeof k?this.parse(k):k;return Ph.findNodesIncluding(k,c)};Ph.parseFunction=
Cl;Ph.fuzzyParse=gn;Ph.acornParseAsyncAware=function(c,k){if(k.onComment){var d=k.onComment;k.onComment=function(b,e,l,a,f,m){return d.call(this,b,e,l-14,a-14,f,m)}}var h=Ph.acorn.parse("async () => {\n"+c+"\n}",k);if(h.loc)var n=h.loc.constructor;h={body:h.body[0].expression.body.body,sourceType:"module",type:"Program"};Ph.AllNodesVisitor.run(h,function(b,e,l){if(!b._positionFixed){b._positionFixed=!0;if(b.start||0===b.start)b.start-=14,b.end-=14;b.loc&&n&&(l=b.loc,e=l.start,l=l.end,b.loc=new n(k,
{column:e.column,line:e.line-1},{column:l.column,line:l.line-1}));k.addSource&&!b.source&&(b.source=c.slice(b.start,b.end))}});h.start=h.body[0].start;h.end=Ph.arr.last(h.body).end;k.addSource&&(h.source=c);h.body[0].loc&&n&&(h.loc=new n(k,h.body[0].loc.start,Ph.arr.last(h.body).loc.end));return h};Ph.parse=Xk;Ph.arr=Mf;Ph.acorn=Fw;Ph.loose=mO;Ph.walk=Iu;Ph.addAstIndex=tf;Ph.findNodesIncluding=pq;Ph.custom=sA;Ph.AllNodesVisitor=Lu;Ph.walk=Iu;Ph.walk=Iu;Ph.parse=Xk;Ph.parse=Xk;Ph.parseFunction=Cl;
Ph.parseFunction=Cl;Ph.fuzzyParse=gn;Ph.fuzzyParse=gn;Ph.addSource=Wa;Ph.addSource=Wa;Ph.custom.addSource=Ph.addSource;var xh=lively.FreezerRuntime.recorderFor("lively.ast/lib/mozilla-ast-visitor-interface.js");xh.string=Th;xh.Path=Ih;xh.BaseVisitor=xe;xh.PrinterVisitor=uF;xh.ComparisonVisitor=pl;xh.stringify=Ve;xh.addAstIndex=tf;xh.parse=Xk;xh.addSource=Wa;xh.methods={withMozillaAstDo:function(c,k,d){var h=new xh.BaseVisitor,n=h.accept;h.accept=function(b,e,l){k=d(function(){n.call(h,b,e,l)},b,e,
l);return b};h.accept(c,k,[]);return k},printAst:function(c,k){k=k||{};var d=k.printSource||!1,h=k.printPositions||!1,n=k.printIndex||!1,b=[];if("string"===typeof c){var e=c;c=xh.parse(c)}else e=k.source||c.source;d&&!c.source&&(e||(e=xh.stringify(c),c=xh.parse(e)),xh.addSource(c,e));(new xh.PrinterVisitor).accept(c,{index:0,tree:b},[]);return xh.string.printTree(b[0],function(l){var a=l.path+":"+l.node.type,f=[];n&&f.push(l.index);h&&f.push(l.node.start+"-"+l.node.end);d&&(l=l.node.source||e.slice(l.node.start,
l.node.end),l=xh.string.print(l.truncate(60).replace(/\n/g,"").replace(/\s+/g," ")),f.push(l));f.length&&(a+="("+f.join(",")+")");return a},function(l){return l.children},"  ")},compareAst:function(c,k){if(!c||!k)throw Error("node"+(c?"1":"2")+" not defined");var d={completePath:[],comparisons:{errors:[]}};(new xh.ComparisonVisitor).accept(c,k,d,[]);return d.comparisons.errors.length?d.comparisons.errors.pluck("msg"):null},pathToNode:function(c,k,d){c.astIndex||xh.addAstIndex(c);d=new xh.BaseVisitor;
var h=null;(d.accept=function(n,b,e,l){if(!h)return b=b.concat(l),n.astIndex===k&&(h={pathString:b.map(function(a){return"string"===typeof a?"."+a:"["+a+"]"}).join(""),path:b,node:n}),this["visit"+n.type](n,b,e,l)}).call(d,c,[],{},[]);return h},rematchAstWithSource:function(c,k,d,h){d=!!d;k=xh.parse(k,d?{locations:!0}:void 0);var n=new xh.BaseVisitor;h&&(k=xh.Path(h).get(k));n.accept=function(b,e,l){l=l||[];var a=l.reduce(function(f,m){return f[m]},c);a.start=b.start;a.end=b.end;d&&(a.loc=b.loc);
return this["visit"+b.type](b,e,l)};n.accept(k)}};xh.withMozillaAstDo=xh.methods.withMozillaAstDo;xh.printAst=xh.methods.printAst;xh.compareAst=xh.methods.compareAst;xh.pathToNode=xh.methods.pathToNode;xh.rematchAstWithSource=xh.methods.rematchAstWithSource;var CC=xh.withMozillaAstDo,zI=xh.printAst,AI=xh.compareAst,BI=xh.pathToNode,CI=xh.rematchAstWithSource;xh.BaseVisitor=xe;xh.BaseVisitor=xe;xh.withMozillaAstDo=CC;xh.withMozillaAstDo=CC;xh.printAst=zI;xh.printAst=zI;xh.compareAst=AI;xh.compareAst=
AI;xh.pathToNode=BI;xh.pathToNode=BI;xh.rematchAstWithSource=CI;xh.rematchAstWithSource=CI;var cf=lively.FreezerRuntime.recorderFor("lively.ast/lib/nodes.js");cf.isIdentifier=nz;cf.id=oz;cf.literal=pz;cf.exprStmt=xs;cf.returnStmt=Mj;cf.empty=rq;cf.binaryExpr=sl;cf.funcExpr=sq;cf.funcCall=Bo;cf.varDecl=Ov;cf.member=Em;cf.memberChain=Jx;cf.assign=Ln;cf.block=pm;cf.program=Ot;cf.tryStmt=Pt;cf.prop=uB;cf.objectLiteral=vB;cf.ifStmt=SD;cf.forIn=Ni;cf.conditional=TD;cf.logical=UD;cf.isIdentifier=nz;cf.isIdentifier=
nz;cf.id=oz;cf.id=oz;cf.literal=pz;cf.literal=pz;cf.objectLiteral=vB;cf.objectLiteral=vB;cf.prop=uB;cf.prop=uB;cf.exprStmt=xs;cf.exprStmt=xs;cf.returnStmt=Mj;cf.returnStmt=Mj;cf.empty=rq;cf.empty=rq;cf.binaryExpr=sl;cf.binaryExpr=sl;cf.funcExpr=sq;cf.funcExpr=sq;cf.funcCall=Bo;cf.funcCall=Bo;cf.varDecl=Ov;cf.varDecl=Ov;cf.member=Em;cf.member=Em;cf.memberChain=Jx;cf.memberChain=Jx;cf.assign=Ln;cf.assign=Ln;cf.block=pm;cf.block=pm;cf.program=Ot;cf.program=Ot;cf.tryStmt=Pt;cf.tryStmt=Pt;cf.ifStmt=SD;
cf.ifStmt=SD;cf.forIn=Ni;cf.forIn=Ni;cf.conditional=TD;cf.conditional=TD;cf.logical=UD;cf.logical=UD;cf.identifierRe=/[_$a-zA-Z\xA0-\uFFFF][_$a-zA-Z0-9\xA0-\uFFFF]*$/;var wy=Object.freeze({__proto__:null,isIdentifier:nz,id:oz,literal:pz,objectLiteral:vB,prop:uB,exprStmt:xs,returnStmt:Mj,empty:rq,binaryExpr:sl,funcExpr:sq,funcCall:Bo,varDecl:Ov,member:Em,memberChain:Jx,assign:Ln,block:pm,program:Ot,tryStmt:Pt,ifStmt:SD,forIn:Ni,conditional:TD,logical:UD}),Od=lively.FreezerRuntime.recorderFor("lively.ast/lib/query.js");
Od.scopes=mr;Od.nodesAtIndex=VD;Od.scopesAtIndex=ys;Od.scopeAtIndex=tq;Od.scopesAtPos=zs;Od.nodesInScopeOf=Ep;Od.declarationsOfScope=Fm;Od.declarationsWithIdsOfScope=function(c){var k=Od.arr.compact(Od.helpers.declIds(c.params).concat(c.catches)),d=[].concat($jscomp.arrayFromIterable(c.node.id&&c.node.id.name?[c.node]:[]),$jscomp.arrayFromIterable(Od.arr.filter(c.funcDecls,function(h){return h.id})),$jscomp.arrayFromIterable(Od.arr.filter(c.classDecls,function(h){return h.id})));return k.map(function(h){return[h,
h]}).concat(d.map(function(h){return[h,h.id]})).concat(Od.helpers.varDecls(c)).concat(c.importSpecifiers.map(function(h){return[Od.statementOf(c.node,h),h]}))};Od._declaredVarNames=WD;Od._findJsLintGlobalDeclarations=Mn;Od.topLevelFuncDecls=Hk;Od.resolveReference=XD;Od.resolveReferences=Qt;Od.refWithDeclAt=qz;Od.topLevelDeclsAndRefs=Rt;Od.findGlobalVarRefs=ap;Od.findNodesIncludingLines=As;Od.__varDeclIdsFor=function(c,k){for(var d=[],h=$jscomp.makeIterator(c.params),n=h.next();!n.done;n=h.next())n=
n.value,n.name===k&&d.push(n);h=$jscomp.makeIterator(c.funcDecls);for(n=h.next();!n.done;n=h.next())n=n.value,n.id&&n.id.name===k&&d.push(n.id);h=$jscomp.makeIterator(c.classDecls);for(n=h.next();!n.done;n=h.next())n=n.value,n.id&&n.id.name===k&&d.push(n.id);h=$jscomp.makeIterator(c.importSpecifiers);for(n=h.next();!n.done;n=h.next())n=n.value,n.name===k&&d.push(n);c=$jscomp.makeIterator(Od.helpers.varDeclIds(c));for(n=c.next();!n.done;n=c.next())n=n.value,n.name===k&&d.push(n);return d};Od.findReferencesAndDeclsInScope=
Pv;Od.findDeclarationClosestToIndex=wB;Od.nodesAt=hn;Od.statementOf=nr;Od.imports=YD;Od.exports=ZD;Od.arr=Mf;Od.chain=Bp;Od.num=Um;Od.tree=ty;Od.fun=vn;Od.obj=ng;Od.BaseVisitor=xe;Od.ScopeVisitor=nk;Od.FindToplevelFuncDeclVisitor=DC;Od.withMozillaAstDo=CC;Od.parse=Xk;Od.acorn=Fw;Od.walk=Iu;Od.custom=sA;Od.stringify=Ve;Od.helpers={declIds:function(c,k){k=void 0===k?[]:k;for(var d=0;d<c.length;d++){var h=c[d];if(h)if("Identifier"===h.type)k.push(h);else if("RestElement"===h.type)k.push(h.argument);
else if("AssignmentPattern"===h.type)Od.helpers.declIds([h.left],k);else if("ObjectPattern"===h.type)for(var n=0;n<h.properties.length;n++){var b=h.properties[n];Od.helpers.declIds([b.value||b],k)}else"ArrayPattern"===h.type&&Od.helpers.declIds(h.elements,k)}return k},varDecls:function(c,k){k=void 0===k?[]:k;c=$jscomp.makeIterator(c.varDecls);for(var d=c.next();!d.done;d=c.next()){d=$jscomp.makeIterator(d.value.declarations);for(var h=d.next();!h.done;h=d.next()){h=h.value;for(var n=$jscomp.makeIterator(Od.helpers.declIds([h.id])),
b=n.next();!b.done;b=n.next())k.push([h,b.value])}}return k},varDeclIds:function(c,k){k=void 0===k?[]:k;c=$jscomp.makeIterator(c.varDecls);for(var d=c.next();!d.done;d=c.next()){d=$jscomp.makeIterator(d.value.declarations);for(var h=d.next();!h.done;h=d.next())Od.helpers.declIds([h.value.id],k)}return k},objPropertiesAsList:function(c,k,d,h){h=void 0===h?[]:h;c=$jscomp.makeIterator(c.properties);for(var n=c.next();!n.done;n=c.next()){n=n.value;var b=n.key.name,e={key:k.concat([b]),value:n.value};
switch(n.value.type){case "ArrayExpression":case "ArrayPattern":d||h.push(e);for(e=0;e<n.value.elements.length;e++)Od.helpers.objPropertiesAsList(n.value.elements[e],k.concat([b,e]),d,h);break;case "ObjectExpression":case "ObjectPattern":d||h.push(e);Od.helpers.objPropertiesAsList(n.value,k.concat([b]),d,h);break;case "AssignmentPattern":d||h.push(e);Od.helpers.objPropertiesAsList(n.left,k.concat([b]),d,h);break;default:h.push(e)}}return h},isDeclaration:function(c){return"FunctionDeclaration"===
c.type||"VariableDeclaration"===c.type||"ClassDeclaration"===c.type}};Od.knownGlobals="closed true false null undefined arguments Object Function Array Number parseFloat parseInt Infinity NaN Boolean String Symbol Date Promise RegExp Error EvalError RangeError ReferenceError SyntaxError TypeError URIError JSON Math console ArrayBuffer Uint8Array Int8Array Uint16Array Int16Array Uint32Array Int32Array Float32Array Float64Array Uint8ClampedArray DataView Map Set WeakMap WeakSet Proxy Reflect decodeURI decodeURIComponent encodeURI encodeURIComponent escape unescape eval isFinite isNaN Intl navigator window document Blob setTimeout clearTimeout setInterval clearInterval requestAnimationFrame cancelAnimationFrame btoa atob sessionStorage localStorage $world lively System customElements performance addEventListener closed".split(" ");
Od.globalDeclRe=/^\s*global\s*/;Od._stmtTypes="EmptyStatement BlockStatement ExpressionStatement IfStatement BreakStatement ContinueStatement WithStatement ReturnStatement ThrowStatement TryStatement WhileStatement DoWhileStatement ForStatement ForInStatement ForOfStatement DebuggerStatement FunctionDeclaration VariableDeclaration ClassDeclaration ImportDeclaration ImportDeclaration ExportNamedDeclaration ExportDefaultDeclaration ExportAllDeclaration".split(" ");var nO=Od.helpers,RW=Od.knownGlobals;
Od.helpers=nO;Od.helpers=nO;Od.knownGlobals=RW;Od.knownGlobals=RW;Od.scopes=mr;Od.scopes=mr;Od.nodesAtIndex=VD;Od.nodesAtIndex=VD;Od.scopesAtIndex=ys;Od.scopesAtIndex=ys;Od.scopeAtIndex=tq;Od.scopeAtIndex=tq;Od.scopesAtPos=zs;Od.scopesAtPos=zs;Od.nodesInScopeOf=Ep;Od.nodesInScopeOf=Ep;Od.declarationsOfScope=Fm;Od.declarationsOfScope=Fm;Od._declaredVarNames=WD;Od._declaredVarNames=WD;Od._findJsLintGlobalDeclarations=Mn;Od._findJsLintGlobalDeclarations=Mn;Od.topLevelDeclsAndRefs=Rt;Od.topLevelDeclsAndRefs=
Rt;Od.topLevelFuncDecls=Hk;Od.topLevelFuncDecls=Hk;Od.findGlobalVarRefs=ap;Od.findGlobalVarRefs=ap;Od.findNodesIncludingLines=As;Od.findNodesIncludingLines=As;Od.findReferencesAndDeclsInScope=Pv;Od.findReferencesAndDeclsInScope=Pv;Od.findDeclarationClosestToIndex=wB;Od.findDeclarationClosestToIndex=wB;Od.nodesAt=hn;Od.nodesAt=hn;Od.statementOf=nr;Od.statementOf=nr;Od.resolveReferences=Qt;Od.resolveReferences=Qt;Od.refWithDeclAt=qz;Od.refWithDeclAt=qz;Od.imports=YD;Od.imports=YD;Od.exports=ZD;Od.exports=
ZD;var Nu=Object.freeze({__proto__:null,helpers:nO,knownGlobals:RW,scopes:mr,nodesAtIndex:VD,scopesAtIndex:ys,scopeAtIndex:tq,scopesAtPos:zs,nodesInScopeOf:Ep,declarationsOfScope:Fm,_declaredVarNames:WD,_findJsLintGlobalDeclarations:Mn,topLevelDeclsAndRefs:Rt,topLevelFuncDecls:Hk,findGlobalVarRefs:ap,findNodesIncludingLines:As,findReferencesAndDeclsInScope:Pv,findDeclarationClosestToIndex:wB,nodesAt:hn,statementOf:nr,resolveReferences:Qt,refWithDeclAt:qz,imports:YD,exports:ZD});Ha("bC",Nu);var or=
lively.FreezerRuntime.recorderFor("lively.ast/lib/object-spread-transform.js");or.objectSpreadTransform=Kx;or.Visitor=xe;or.funcCall=Bo;or.member=Em;var oO=function(){return or.Visitor.apply(this,arguments)||this};$jscomp.inherits(oO,or.Visitor);oO.prototype.accept=function(c,k,d){"ObjectExpression"===c.type&&(c=this.transformSpreadElement(c));return or.Visitor.prototype.accept.call(this,c,k,d)};oO.prototype.transformSpreadElement=function(c){var k=[],d=[k];c.properties.forEach(function(h){"SpreadElement"!==
h.type?(h.shorthand=!1,k.push(h)):(d.push(h),k=[],d.push(k))});if(1===d.length)return c;k.length||d.pop();return or.funcCall.apply(or,[or.member("Object","assign")].concat($jscomp.arrayFromIterable(d.map(function(h){return"SpreadElement"===h.type?h.argument:{properties:h,type:"ObjectExpression"}}))))};or.ObjectSpreadTransformer=oO;or.default=Kx;var qe=lively.FreezerRuntime.recorderFor("lively.ast/lib/transform.js");qe._node2string=function(c){return c.source||qe.stringify(c)};qe._findIndentAt=function(c,
k){var d=qe.string.peekLeft(c,k,/\s+$/);c="number"===typeof d?c.slice(d,k):"";"\n"===c[0]&&(c=c.slice(1));return c};qe._applyChanges=function(c,k){for(var d=0;d<c.length;d++){var h=c[d];if("del"===h.type)k=k.slice(0,h.pos)+k.slice(h.pos+h.length);else if("add"===h.type)k=k.slice(0,h.pos)+h.string+k.slice(h.pos);else throw Error("Unexpected change "+qe.obj.inspect(h));}return k};qe._compareNodesForReplacement=uq;qe.replaceNode=rz;qe.replaceNodes=Qv;qe.replace=sz;qe.__findVarDecls=VK;qe.oneDeclaratorPerVarDecl=
xB;qe.oneDeclaratorForVarsInDestructoring=St;qe.returnLastStatement=Tt;qe.wrapInFunction=Rv;qe.wrapInStartEndCall=pr;qe.transformSingleExpression=$D;qe.arr=Mf;qe.obj=ng;qe.string=Th;qe.chain=Bp;qe.Path=Ih;qe.helpers=nO;qe.scopes=mr;qe.topLevelDeclsAndRefs=Rt;qe.topLevelFuncDecls=Hk;qe.parse=Xk;qe.fuzzyParse=gn;qe.objectSpreadTransform=Kx;qe.varDecl=Ov;qe.memberChain=Jx;qe.id=oz;qe.exprStmt=xs;qe.funcCall=Bo;qe.returnStmt=Mj;qe.tryStmt=Pt;qe.program=Ot;qe.block=pm;qe.funcExpr=sq;qe.stringify=Ve;qe.isProbablySingleExpressionRe=
/^\s*(\{|function\s*\()/;qe.replaceNode=rz;qe.replaceNode=rz;qe.replaceNodes=Qv;qe.replaceNodes=Qv;qe.replace=sz;qe.replace=sz;qe._compareNodesForReplacement=uq;qe._compareNodesForReplacement=uq;qe.oneDeclaratorPerVarDecl=xB;qe.oneDeclaratorPerVarDecl=xB;qe.oneDeclaratorForVarsInDestructoring=St;qe.oneDeclaratorForVarsInDestructoring=St;qe.returnLastStatement=Tt;qe.returnLastStatement=Tt;qe.wrapInFunction=Rv;qe.wrapInFunction=Rv;qe.wrapInStartEndCall=pr;qe.wrapInStartEndCall=pr;qe.transformSingleExpression=
$D;qe.transformSingleExpression=$D;qe.objectSpreadTransform=Kx;qe.objectSpreadTransform=Kx;var EC=Object.freeze({__proto__:null,replaceNode:rz,replaceNodes:Qv,replace:sz,_compareNodesForReplacement:uq,oneDeclaratorPerVarDecl:xB,oneDeclaratorForVarsInDestructoring:St,returnLastStatement:Tt,wrapInFunction:Rv,wrapInStartEndCall:pr,transformSingleExpression:$D,objectSpreadTransform:Kx});Ha("br",EC);var dg=lively.FreezerRuntime.recorderFor("lively.ast/lib/comments.js");dg.getCommentPrecedingNode=bp;dg.extractComments=
Ut;dg.obj=ng;dg.string=Th;dg.Path=Ih;dg.chain=Bp;dg.arr=Mf;dg.fun=vn;dg.parse=Xk;dg.statementOf=nr;dg.Visitor=xe;dg.stringify=Ve;dg.getCommentPrecedingNode=bp;dg.getCommentPrecedingNode=bp;dg.extractComments=Ut;dg.extractComments=Ut;var pO=Object.freeze({__proto__:null,getCommentPrecedingNode:bp,extractComments:Ut}),gi=lively.FreezerRuntime.recorderFor("lively.ast/lib/code-categorizer.js");gi.findDecls=Vt;gi.es6ClassDef=function(c){if("ClassDeclaration"!==c.type)return null;var k={type:"class-decl",
name:c.id.name,node:c,children:[]};k.children.push.apply(k.children,$jscomp.arrayFromIterable(gi.arr.compact(c.body.body.map(function(d,h){return gi.es6ClassMethod(d,k,h)}))));return[k].concat($jscomp.arrayFromIterable(k.children))};gi.es6ClassMethod=function(c,k,d){if("MethodDefinition"!==c.type)return null;var h;"constructor"===c.kind?h="class-constructor":"method"===c.kind?h=c.static?"class-class-method":"class-instance-method":"get"===c.kind?h=c.static?"class-class-getter":"class-instance-getter":
"set"===c.kind&&(h=c.static?"class-class-setter":"class-instance-setter");return h?{type:h,parent:k,node:c,name:c.key.name}:null};gi.varDefs=function(c){if("VariableDeclaration"!==c.type)return null;var k=[],d={};c=$jscomp.makeIterator(gi.withVarDeclIds(c));for(var h=c.next();!h.done;d={$jscomp$loop$prop$def$2648:d.$jscomp$loop$prop$def$2648},h=c.next())if(h=h.value,d.$jscomp$loop$prop$def$2648={name:h.id.name,node:h.node,type:"var-decl"},k.push(d.$jscomp$loop$prop$def$2648),d.$jscomp$loop$prop$def$2648.node.init){for(h=
d.$jscomp$loop$prop$def$2648.node.init;"AssignmentExpression"===h.type;)h=h.right;if("ObjectExpression"===h.type)d.$jscomp$loop$prop$def$2648.type="object-decl",d.$jscomp$loop$prop$def$2648.children=gi.objectKeyValsAsDefs(h).map(function(n){return function(b){return Object.assign({},b,{type:"object-"+b.type,parent:n.$jscomp$loop$prop$def$2648})}}(d)),k.push.apply(k,$jscomp.arrayFromIterable(d.$jscomp$loop$prop$def$2648.children));else if(h=gi.someObjectExpressionCall(h,d.$jscomp$loop$prop$def$2648))d.$jscomp$loop$prop$def$2648.children=
h.map(function(n){return function(b){return Object.assign({},b,{parent:n.$jscomp$loop$prop$def$2648})}}(d)),k.push.apply(k,$jscomp.arrayFromIterable(d.$jscomp$loop$prop$def$2648.children))}return k};gi.funcDef=function(c){return"FunctionStatement"!==c.type&&"FunctionDeclaration"!==c.type||!c.id?null:[{name:c.id.name,node:c,type:"function-decl"}]};gi.someObjectExpressionCall=function(c,k){"ExpressionStatement"===c.type&&(c=c.expression);return"CallExpression"!==c.type?null:(c=c.arguments.find(function(d){return"ObjectExpression"===
d.type}))?gi.objectKeyValsAsDefs(c,k):null};gi.functionWrapper=function(c,k){if(!gi.isFunctionWrapper(c))return null;var d=gi.Path("expression.arguments.0").get(c);k=d&&"FunctionExpression"===d.type&&5<gi.string.lines(d.source||"").length?gi.findDecls(d,k):gi.findDecls(gi.Path("expression.callee").get(c),k);var h={node:c,name:gi.Path("expression.callee.id.name").get(c)};k.forEach(function(n){return n.parent||(n.parent=h)});return k};gi.unwrapExport=function(c){return"ExportNamedDeclaration"!==c.type&&
"ExportDefaultDeclaration"!==c.type||!c.declaration?c:c.declaration};gi.objectKeyValsAsDefs=function(c,k){return c.properties.map(function(d){return{name:d.key.name||d.key.value,type:"FunctionExpression"===d.value.type?"method":"property",node:d,parent:k}})};gi.isFunctionWrapper=function(c){return"CallExpression"===gi.Path("expression.type").get(c)&&"FunctionExpression"===gi.Path("expression.callee.type").get(c)};gi.declIds=Wt;gi.withVarDeclIds=function(c){return c.declarations.map(function(k){!k.source&&
k.init&&(k.source=k.id.name+" = "+k.init.source);return{node:k,id:k.id}})};gi.parse=Xk;gi.arr=Mf;gi.Path=Ih;gi.string=Th;gi.obj=ng;gi.findDecls=Vt;gi.findDecls=Vt;var DI=Object.freeze({__proto__:null,findDecls:Vt}),wg=lively.FreezerRuntime.recorderFor("lively.ast/index.js");wg.isValidIdentifier=Fp;wg.BaseVisitor=xe;wg.BaseVisitor=xe;wg.withMozillaAstDo=CC;wg.withMozillaAstDo=CC;wg.printAst=zI;wg.printAst=zI;wg.compareAst=AI;wg.compareAst=AI;wg.pathToNode=BI;wg.pathToNode=BI;wg.rematchAstWithSource=
CI;wg.rematchAstWithSource=CI;wg.ReplaceManyVisitor=ft;wg.ReplaceManyVisitor=ft;wg.ReplaceVisitor=Mu;wg.ReplaceVisitor=Mu;wg.AllNodesVisitor=Lu;wg.AllNodesVisitor=Lu;wg.parse=Xk;wg.parse=Xk;wg.parseFunction=Cl;wg.parseFunction=Cl;wg.fuzzyParse=gn;wg.fuzzyParse=gn;wg.acorn=Fw;wg.walk=Iu;wg.custom=sA;wg.stringify=Ve;wg.escodegen=wF;wg.escodegen=wF;wg.escodegen=wF;wg.acorn=Fw;wg.acorn=Fw;wg.walk=Iu;wg.walk=Iu;wg.nodes=wy;wg.query=Nu;wg.transform=EC;wg.comments=pO;wg.categorizer=DI;wg.query=Nu;wg.query=
Nu;wg.transform=EC;wg.transform=EC;wg.comments=pO;wg.comments=pO;wg.categorizer=DI;wg.categorizer=DI;wg.stringify=Ve;wg.stringify=Ve;wg.nodes=wy;wg.nodes=wy;wg.custom=sA;wg.custom=sA;wg.isValidIdentifierRe=/^(?!(?:do|if|in|for|let|new|try|var|case|default|else|enum|eval|false|null|this|true|void|with|break|catch|class|const|super|throw|while|yield|delete|export|import|public|return|static|switch|typeof|extends|finally|package|private|continue|debugger|function|arguments|interface|protected|implements|instanceof)$)[$A-Z_a-z\xaa\xb5\xba\xc0-\xd6\xd8-\xf6\xf8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05d0-\u05ea\u05f0-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u08a0\u08a2-\u08ac\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0977\u0979-\u097f\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c33\u0c35-\u0c39\u0c3d\u0c58\u0c59\u0c60\u0c61\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d60\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f0\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1877\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191c\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19c1-\u19c7\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1ce9-\u1cec\u1cee-\u1cf1\u1cf5\u1cf6\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2e2f\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303c\u3041-\u3096\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua697\ua6a0-\ua6ef\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790-\ua793\ua7a0-\ua7aa\ua7f8-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa80-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uabc0-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc][$A-Z_a-z\xaa\xb5\xba\xc0-\xd6\xd8-\xf6\xf8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05d0-\u05ea\u05f0-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u08a0\u08a2-\u08ac\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0977\u0979-\u097f\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c33\u0c35-\u0c39\u0c3d\u0c58\u0c59\u0c60\u0c61\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d60\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f0\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1877\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191c\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19c1-\u19c7\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1ce9-\u1cec\u1cee-\u1cf1\u1cf5\u1cf6\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2e2f\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303c\u3041-\u3096\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua697\ua6a0-\ua6ef\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790-\ua793\ua7a0-\ua7aa\ua7f8-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa80-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uabc0-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc0-9\u0300-\u036f\u0483-\u0487\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u0669\u0670\u06d6-\u06dc\u06df-\u06e4\u06e7\u06e8\u06ea-\u06ed\u06f0-\u06f9\u0711\u0730-\u074a\u07a6-\u07b0\u07c0-\u07c9\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0859-\u085b\u08e4-\u08fe\u0900-\u0903\u093a-\u093c\u093e-\u094f\u0951-\u0957\u0962\u0963\u0966-\u096f\u0981-\u0983\u09bc\u09be-\u09c4\u09c7\u09c8\u09cb-\u09cd\u09d7\u09e2\u09e3\u09e6-\u09ef\u0a01-\u0a03\u0a3c\u0a3e-\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a66-\u0a71\u0a75\u0a81-\u0a83\u0abc\u0abe-\u0ac5\u0ac7-\u0ac9\u0acb-\u0acd\u0ae2\u0ae3\u0ae6-\u0aef\u0b01-\u0b03\u0b3c\u0b3e-\u0b44\u0b47\u0b48\u0b4b-\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b66-\u0b6f\u0b82\u0bbe-\u0bc2\u0bc6-\u0bc8\u0bca-\u0bcd\u0bd7\u0be6-\u0bef\u0c01-\u0c03\u0c3e-\u0c44\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0c66-\u0c6f\u0c82\u0c83\u0cbc\u0cbe-\u0cc4\u0cc6-\u0cc8\u0cca-\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0ce6-\u0cef\u0d02\u0d03\u0d3e-\u0d44\u0d46-\u0d48\u0d4a-\u0d4d\u0d57\u0d62\u0d63\u0d66-\u0d6f\u0d82\u0d83\u0dca\u0dcf-\u0dd4\u0dd6\u0dd8-\u0ddf\u0df2\u0df3\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0e50-\u0e59\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0ed0-\u0ed9\u0f18\u0f19\u0f20-\u0f29\u0f35\u0f37\u0f39\u0f3e\u0f3f\u0f71-\u0f84\u0f86\u0f87\u0f8d-\u0f97\u0f99-\u0fbc\u0fc6\u102b-\u103e\u1040-\u1049\u1056-\u1059\u105e-\u1060\u1062-\u1064\u1067-\u106d\u1071-\u1074\u1082-\u108d\u108f-\u109d\u135d-\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b4-\u17d3\u17dd\u17e0-\u17e9\u180b-\u180d\u1810-\u1819\u18a9\u1920-\u192b\u1930-\u193b\u1946-\u194f\u19b0-\u19c0\u19c8\u19c9\u19d0-\u19d9\u1a17-\u1a1b\u1a55-\u1a5e\u1a60-\u1a7c\u1a7f-\u1a89\u1a90-\u1a99\u1b00-\u1b04\u1b34-\u1b44\u1b50-\u1b59\u1b6b-\u1b73\u1b80-\u1b82\u1ba1-\u1bad\u1bb0-\u1bb9\u1be6-\u1bf3\u1c24-\u1c37\u1c40-\u1c49\u1c50-\u1c59\u1cd0-\u1cd2\u1cd4-\u1ce8\u1ced\u1cf2-\u1cf4\u1dc0-\u1de6\u1dfc-\u1dff\u200c\u200d\u203f\u2040\u2054\u20d0-\u20dc\u20e1\u20e5-\u20f0\u2cef-\u2cf1\u2d7f\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua620-\ua629\ua66f\ua674-\ua67d\ua69f\ua6f0\ua6f1\ua802\ua806\ua80b\ua823-\ua827\ua880\ua881\ua8b4-\ua8c4\ua8d0-\ua8d9\ua8e0-\ua8f1\ua900-\ua909\ua926-\ua92d\ua947-\ua953\ua980-\ua983\ua9b3-\ua9c0\ua9d0-\ua9d9\uaa29-\uaa36\uaa43\uaa4c\uaa4d\uaa50-\uaa59\uaa7b\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uaaeb-\uaaef\uaaf5\uaaf6\uabe3-\uabea\uabec\uabed\uabf0-\uabf9\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\ufe33\ufe34\ufe4d-\ufe4f\uff10-\uff19\uff3f]*$/;
wg.isValidIdentifier=Fp;wg.isValidIdentifier=Fp;wg.parse=Xk;wg.Node=wg.parse("").constructor;Object.defineProperty(wg.Node.prototype,"__serialize__",{configurable:!0,value:function(){return{__expr__:"("+JSON.stringify(this)+")"}}});var qO=Object.freeze({__proto__:null,BaseVisitor:xe,withMozillaAstDo:CC,printAst:zI,compareAst:AI,pathToNode:BI,rematchAstWithSource:CI,ReplaceManyVisitor:ft,ReplaceVisitor:Mu,AllNodesVisitor:Lu,parse:Xk,parseFunction:Cl,fuzzyParse:gn,escodegen:wF,acorn:Fw,walk:Iu,query:Nu,
transform:EC,comments:pO,categorizer:DI,stringify:Ve,nodes:wy,custom:sA,isValidIdentifier:Fp});Ha("bp",qO);var hi=lively.FreezerRuntime.recorderFor("lively.vm/lib/util.js");hi.getGlobal=qr;hi.signatureOf=Xt;hi.isClass=tz;hi.pluck=Gm;hi.printSymbol=yB;hi.safeToString=Yt;hi.printEvalResult=uz;hi.obj=ng;hi.string=Th;hi.getGlobal=qr;hi.getGlobal=qr;hi.signatureOf=Xt;hi.signatureOf=Xt;hi.isClass=tz;hi.isClass=tz;hi.pluck=Gm;hi.pluck=Gm;hi.knownSymbols=function(){return Object.getOwnPropertyNames(Symbol).filter(function(c){return"symbol"===
typeof Symbol[c]}).reduce(function(c,k){return c.set(Symbol[k],"Symbol."+k)},new Map)}();hi.symMatcher=/^Symbol\((.*)\)$/;hi.printSymbol=yB;hi.printSymbol=yB;hi.safeToString=Yt;hi.safeToString=Yt;hi.printEvalResult=uz;hi.printEvalResult=uz;var SW=function(){function c(n,b){"object"===typeof b&&(b=b.maxDepth||2);if(!n)return String(n);if("string"===typeof n)return b=n.includes("\n")?"`":'"',n=n.split("\n").slice(0,1E3).join("\n"),b+n+b;if(n instanceof Error)return n.stack||hi.safeToString(n);if(!hi.obj.isObject(n))return hi.safeToString(n);
try{var e=hi.obj.inspect(n,{customPrinter:d,maxNumberOfKeys:100,maxDepth:b,printFunctionSource:!0})}catch(l){}return"{}"===e?hi.safeToString(n):e}function k(n,b){if("string"===typeof n||Array.isArray(n)||!h||"function"!==typeof n[h])return b;var e="function"===typeof n.entries,l=e?n.entries():n[h](),a=[];b=e?"{":"[";var f=e?"}":"]";n=n.constructor&&n.constructor.name||"Iterable";for(var m=0,r;10>m;m++){r=l.next();if(r.done)break;a.push(r.value)}l=a.map(function(v){return e?String(v[0])+": "+String(v[1]):
c(v,2)}).join(", ");return n+"("+b+l+f+")"}function d(n,b,e){if(!n)return b;if("symbol"===typeof n)return hi.printSymbol(n);if("string"===typeof n)return hi.string.print(hi.string.truncate(n,100));if(n.isMorph)return hi.safeToString(n);if(n instanceof Promise)return"Promise()";if("undefined"!==typeof Node&&n instanceof Node||"undefined"!==typeof ImageData&&n instanceof ImageData)return hi.safeToString(n);var l=n.length||n.byteLength;if(void 0!==l&&10<l&&n.slice)return"["+("string"===typeof n||n.byteLength?
hi.safeToString(n.slice(0,10)):n.slice(0,10).map(e))+",...]";n=k(n,b);return n!==b?n:b}var h="undefined"!==typeof Symbol&&Symbol.iterator;return c}();hi.printInspectEvalValue=SW;hi.printInspectEvalValue=SW;hi.printInspectEvalValue=SW;var Vi=lively.FreezerRuntime.recorderFor("lively.vm/lib/completions.js");Vi.getObjectForCompletion=Hm;Vi.propertyExtract=function(c,k,d){return Object.getOwnPropertyNames(k).concat(Object.getOwnPropertySymbols(k).map(Vi.printSymbol)).filter(function(h){return-1===c.indexOf(h)}).map(d).filter(function(h){return!!h}).sort(function(h,
n){return h.name<n.name?-1:h.name>n.name?1:0})};Vi.getMethodsOf=function(c,k){return Vi.propertyExtract(c,k,function(d){return k.__lookupGetter__&&k.__lookupGetter__(d)||"function"!==typeof k[d]?null:{name:d,completion:Vi.signatureOf(d,k[d])}})};Vi.getAttributesOf=function(c,k){return Vi.propertyExtract(c,k,function(d){return k.__lookupGetter__&&!k.__lookupGetter__(d)&&"function"===typeof k[d]?null:{name:d,completion:d}})};Vi.getProtoChain=function(c){for(var k=[];c;)k.push(c),c=c.__proto__;return k};
Vi.getDescriptorOf=function(c,k){function d(h,n){h.length>n&&(h=h.slice(0,n)+"...");return h.replace(/\n/g,"").replace(/\s+/g," ")}if(c===k){if("function"!==typeof c)return d(Vi.safeToString(c),50);k=c.toString();k=d(k.slice(k.indexOf("{")+1,k.lastIndexOf("}")),50);return Vi.signatureOf(c.displayName||c.name||"function",c)+" {"+k+"}"}return(c=k.hasOwnProperty("constructor")&&k.constructor)?"string"===typeof c.type&&c.type.length?d(c.type,50):"string"===typeof c.name&&c.name.length?d(c.name,50):"anonymous class":
"prototype"};Vi.getCompletionsOfObj=function(c,k){try{var d=[];var h=Vi.getProtoChain(c).map(function(b){var e=Vi.getDescriptorOf(c,b);b=Vi.getMethodsOf(d,b).concat(Vi.getAttributesOf(d,b));d=d.concat(Vi.pluck(b,"name"));return[e,Vi.pluck(b,"completion")]})}catch(b){var n=b}k(n,h)};Vi.descriptorsOfObjAndProtoProperties=function(c){var k=[];return Vi.getProtoChain(c).map(function(d){var h=Vi.getDescriptorOf(c,d);d=Vi.getMethodsOf(k,d).concat(Vi.getAttributesOf(k,d));k=k.concat(Vi.pluck(d,"name"));
return[h,Vi.pluck(d,"completion")]})};Vi.getCompletions=Lx;Vi.lang=m9;Vi.signatureOf=Xt;Vi.pluck=Gm;Vi.safeToString=Yt;Vi.printSymbol=yB;Vi.getObjectForCompletion=Hm;Vi.getObjectForCompletion=Hm;Vi.getCompletions=Lx;Vi.getCompletions=Lx;var EI=Object.freeze({__proto__:null,getObjectForCompletion:Hm,getCompletions:Lx});Ha("bc",EI);var hc=lively.FreezerRuntime.recorderFor("lively.source-transform/capturing.js");hc.rewriteToCaptureTopLevelVariables=Sv;hc.transformImportMeta=function(c,k){return hc.ReplaceVisitor.run(c,
function(d){return"MetaProperty"==d.type&&"import"==d.meta.name?k.classToFunction.currentModuleAccessor?hc.nodes.objectLiteral(["url",hc.nodes.member(k.classToFunction.currentModuleAccessor,"id")]):hc.parse('({url: eval("_context").id})').body[0].expression:d})};hc.rewriteToRegisterModuleToCaptureSetters=vz;hc.clearEmptyExports=function(c,k){k=hc.topLevelDeclsAndRefs(c);k=$jscomp.makeIterator(k.scope.exportDecls);for(var d=k.next();!d.done;d=k.next())d=d.value,d.declaration||!d.specifiers||d.specifiers.length||
hc.arr.remove(c.body,d);return c};hc.replaceRefs=function(c,k){var d=hc.topLevelDeclsAndRefs(c),h=d.refs.filter(function(b){return hc.shouldRefBeCaptured(b,d,k)}),n=[];c=hc.ReplaceVisitor.run(c,function(b,e){if("Property"===b.type&&h.includes(b.key)&&b.shorthand)return hc.prop(hc.id(b.key.name),b.value);if("ExportNamedDeclaration"===b.type){e=b.declaration;var l=b.specifiers;e&&(e.id?n.push(e.id):e.declarations&&n.push.apply(n,$jscomp.arrayFromIterable(e.declarations.map(function(a){return a.id}))));
l&&l.forEach(function(a){return n.push(a.local)});return b}return"AssignmentExpression"===b.type&&h.includes(b.left)&&k.declarationWrapper?Object.assign({},b,{right:hc.declarationWrapperCall(k.declarationWrapper,null,hc.literal(b.left.name),hc.literal("assignment"),b.right,k.captureObj,k)}):b});return hc.ReplaceVisitor.run(c,function(b,e,l){return h.includes(b)&&!n.includes(b)?hc.member(k.captureObj,b):b})};hc.replaceVarDecls=function(c,k){var d=hc.topLevelDeclsAndRefs(c);return hc.ReplaceManyVisitor.run(c,
function(h){if(!d.varDecls.includes(h)||h.declarations.every(function(m){return!hc.shouldDeclBeCaptured(m,k)}))return h;for(var n=[],b=0;b<h.declarations.length;b++){var e=h.declarations[b];if(hc.shouldDeclBeCaptured(e,k)){var l=e.init||{operator:"||",type:"LogicalExpression",left:{computed:!1,object:k.captureObj,property:e.id,type:"MemberExpression"},right:{name:"undefined",type:"Identifier"}};l=k.declarationWrapper&&e.id.name?hc.declarationWrapperCall(k.declarationWrapper,e,hc.literal(e.id.name),
hc.literal(h.kind),l,k.captureObj,k):l;if(e.id.type.includes("Pattern")){var a=hc.generateUniqueName(d.declaredNames,"destructured_1"),f={type:"Identifier",name:a};e=hc.transformPattern(e.id,{parent:f,declaredNames:d.declaredNames}).map(function(m){return m[hc.annotationSym]&&m[hc.annotationSym].capture?hc.assignExpr(k.captureObj,m.declarations[0].id,k.declarationWrapper?hc.declarationWrapperCall(k.declarationWrapper,null,hc.literal(m.declarations[0].id.name),hc.literal(h.kind),m.declarations[0].init,
k.captureObj,k):m.declarations[0].init,!1):m});d.declaredNames.push(a);n.push.apply(n,$jscomp.arrayFromIterable([hc.varDecl(f,l,h.kind)].concat(e)))}else n.push(hc.assignExpr(k.captureObj,e.id,l,!1)),k.keepTopLevelVarDecls&&n.push(hc.varDecl(e.id,hc.member(k.captureObj,e.id)))}else n.push({type:"VariableDeclaration",kind:h.kind||"var",declarations:[e]})}return n})};hc.generateUniqueName=function(c,k){for(var d=1;-1<c.indexOf(k);){if(1E3<d)throw Error("Endless loop searching for unique variable "+
k);k=k.replace(/_[0-9]+$|$/,"_"+ ++d)}return k};hc.additionalIgnoredDecls=function(c,k){k=hc.topLevelDeclsAndRefs(c);for(var d=[],h=0;h<k.scope.varDecls.length;h++){var n=k.scope.varDecls[h],b=hc.Path(k.scope.varDeclPaths[h]).slice(0,-1).get(c);"ForStatement"!==b.type&&"ForInStatement"!==b.type&&"ForOfStatement"!==b.type&&"ExportNamedDeclaration"!==b.type||d.push.apply(d,$jscomp.arrayFromIterable(n.declarations))}return k.scope.catches.map(function(e){return e.name}).concat(d.map(function(e){return e.id.name}))};
hc.additionalIgnoredRefs=function(c,k){k=hc.topLevelDeclsAndRefs(c);for(var d=[],h=0;h<k.scope.varDecls.length;h++){var n=k.scope.varDecls[h],b=hc.Path(k.scope.varDeclPaths[h]).slice(0,-1).get(c);"ForStatement"!==b.type&&"ForInStatement"!==b.type&&"ForOfStatement"!==b.type||d.push.apply(d,$jscomp.arrayFromIterable(n.declarations))}return k.scope.catches.map(function(e){return e.name}).concat(hc.queryHelpers.declIds(d.map(function(e){return e.id})).map(function(e){return e.name}))};hc.shouldDeclBeCaptured=
function(c,k){return-1===k.excludeDecls.indexOf(c.id.name)&&(!k.includeDecls||-1<k.includeDecls.indexOf(c.id.name))};hc.shouldRefBeCaptured=function(c,k,d){if(k.scope.importSpecifiers.includes(c))return!1;for(var h=0;h<k.scope.exportDecls.length;h++){var n=k.scope.exportDecls[h];if(n.declarations&&n.declarations.includes(c)||n.declaration===c)return!1}return d.excludeRefs.includes(c.name)||d.includeRefs&&!d.includeRefs.includes(c.name)?!1:!0};hc.replaceClassDecls=function(c,k){if(k.classToFunction)return k.classToFunction.transform(c,
k.classToFunction);var d=hc.topLevelDeclsAndRefs(c);if(!d.classDecls.length)return c;for(var h=c.body.length-1;0<=h;h--){var n=c.body[h];n.id&&d.classDecls.includes(n)&&c.body.splice(h+1,0,hc.assignExpr(k.captureObj,n.id,n.id,!1))}return c};hc.splitExportDeclarations=function(c,k){k=c.body;for(var d=c.body=[],h=0;h<k.length;h++){var n=k[h];if("ExportNamedDeclaration"!==n.type||!n.declaration||"VariableDeclaration"!==n.declaration.type||1>=n.declaration.declarations.length)d.push(n);else for(var b=
n.declaration.declarations,e=0;e<b.length;e++)d.push({type:"ExportNamedDeclaration",specifiers:[],declaration:hc.varDecl(b[e].id,b[e].init,n.declaration.kind)})}return c};hc.insertCapturesForExportedImports=wz;hc.insertCapturesForExportDeclarations=function(c,k){for(var d=[],h=0;h<c.body.length;h++){var n=c.body[h];d.push(n);if(("ExportNamedDeclaration"===n.type||"ExportDefaultDeclaration"===n.type)&&n.declaration)if("ExportDefaultDeclaration"===n.type&&"Literal"===n.declaration.type){var b=n.declaration,
e=hc.generateUniqueName(hc.topLevelDeclsAndRefs(c).declaredNames,"$"+b.raw.split('"').join(""));n.declaration=hc.id(e);hc.arr.pushAt(d,hc.assignExpr(k.captureObj,e,b.raw,!1),d.indexOf(n))}else n.declaration.declarations?d.push.apply(d,$jscomp.arrayFromIterable(n.declaration.declarations.map(function(l){var a=l.id;k.declarationWrapper&&(l.init.callee&&l.init.callee.name===k.declarationWrapper.name||(a=hc.declarationWrapperCall(k.declarationWrapper,l,hc.literal(l.id.name),hc.literal("assignment"),l.id,
k.captureObj,k)));return hc.assignExpr(k.captureObj,l.id,a,!1)}))):"FunctionDeclaration"!==n.declaration.type&&"ClassDeclaration"===n.declaration.type&&d.push(hc.assignExpr(k.captureObj,n.declaration.id,n.declaration.id,!1))}c.body=d;return c};hc.insertCapturesForImportDeclarations=function(c,k){c.body=c.body.reduce(function(d,h){return d.concat("ImportDeclaration"===h.type&&h.specifiers.length?[h].concat(h.specifiers.map(function(n){return hc.assignExpr(k.captureObj,n.local,n.local,!1)})):[h])},
[]);return c};hc.insertDeclarationsForExports=function(c,k){for(var d=hc.topLevelDeclsAndRefs(c),h=[],n=0;n<c.body.length;n++){var b=c.body[n];k.classToFunction&&"ExportDefaultDeclaration"===b.type&&b.declaration&&!b.declaration.type.includes("Declaration")&&("Identifier"===b.declaration.type||b.declaration.id)?h=h.concat([hc.varDeclOrAssignment(c,{type:"VariableDeclarator",id:b.declaration,init:hc.member(k.captureObj,b.declaration)}),b]):"ExportNamedDeclaration"!==b.type||!b.specifiers.length||b.source?
h.push(b):h=h.concat(b.specifiers.map(function(e){return d.declaredNames.includes(e.local.name)?null:hc.varDeclOrAssignment(c,{type:"VariableDeclarator",id:e.local,init:hc.member(k.captureObj,e.local)})}).filter(Boolean)).concat(b)}c.body=h;return c};hc.fixDefaultAsyncFunctionExportForRegeneratorBug=function(c,k){k=[];for(var d=0;d<c.body.length;d++){var h=c.body[d];"ExportDefaultDeclaration"===h.type&&"FunctionDeclaration"===h.declaration.type&&h.declaration.id&&h.declaration.async&&(k.push(h.declaration),
h.declaration={type:"Identifier",name:h.declaration.id.name});k.push(h)}c.body=k;return c};hc.es6ModuleTransforms=function(c,k){c.body=c.body.reduce(function(d,h){if("ExportNamedDeclaration"===h.type)if(h.source){var n=e=h.source;var b=h.specifiers.map(function(l){return{type:"ExpressionStatement",expression:hc.exportFromImport({type:"Literal",value:l.exported.name},{type:"Literal",value:l.local.name},e,k.moduleExportFunc,k.moduleImportFunc)}})}else b=h.declaration?(b=h.declaration.declarations)?
b.map(function(l){k.excludeDecls.push(l.id);return hc.varDecl(l.id,hc.assignExpr(k.captureObj,l.id,k.declarationWrapper?hc.declarationWrapperCall(k.declarationWrapper,null,hc.literal(l.id.name),hc.literal(h.declaration.kind),l,k.captureObj,k):l.init,!1),h.declaration.kind)}).concat(b.map(function(l){return hc.exportCallStmt(k.moduleExportFunc,l.id.name,l.id)})):[h.declaration].concat(hc.exportCallStmt(k.moduleExportFunc,h.declaration.id.name,h.declaration.id)):h.specifiers.map(function(l){return hc.exportCallStmt(k.moduleExportFunc,
l.exported.name,hc.shouldDeclBeCaptured({id:l.local},k)?hc.member(k.captureObj,l.local):l.local)});else if("ExportDefaultDeclaration"===h.type)b=h.declaration&&h.declaration.id?[h.declaration].concat(hc.exportCallStmt(k.moduleExportFunc,"default",h.declaration.id)):[hc.exportCallStmt(k.moduleExportFunc,"default",h.declaration)];else if("ExportAllDeclaration"===h.type){n={name:k.es6ExportFuncId+"__iterator__",type:"Identifier"};var e=h.source;b=[{type:"ForInStatement",body:{type:"ExpressionStatement",
expression:hc.exportFromImport(n,n,e,k.moduleExportFunc,k.moduleImportFunc)},left:{type:"VariableDeclaration",kind:"var",declarations:[{type:"VariableDeclarator",id:n,init:null}]},right:hc.importCall(null,e,k.moduleImportFunc)}];k.excludeRefs.push(n.name);k.excludeDecls.push(n.name)}else b="ImportDeclaration"===h.type?h.specifiers.length?h.specifiers.map(function(l){return hc.varDeclAndImportCall(c,l.local,"ImportSpecifier"===l.type&&l.imported.name||"ImportDefaultSpecifier"===l.type&&"default"||
null,h.source,k.moduleImportFunc)}):hc.importCallStmt(null,h.source,k.moduleImportFunc):[h];return d.concat(b)},[]);return c};hc.putFunctionDeclsInFront=function(c,k){var d=hc.topLevelDeclsAndRefs(c).scope,h=d.funcDecls;if(!h.length)return c;for(var n=[],b=h.length;b--;){var e=h[b];if(e.id&&hc.shouldDeclBeCaptured(e,k)){var l=d.funcDeclPaths[b].slice(0,-1),a=hc.Path(l).get(d.node);l={type:"Identifier",name:e.id.name};var f=k.declarationWrapper?hc.declarationWrapperCall(k.declarationWrapper,e,hc.literal(l.name),
hc.literal("function"),l,k.captureObj,k):l,m=Object.assign({},e);Array.isArray(a)?a.splice(a.indexOf(e),1,hc.exprStmt(e.id)):"ExportNamedDeclaration"===a.type?(a=d.node.body.indexOf(a),-1<a&&d.node.body.splice(a,1,{type:"ExportNamedDeclaration",specifiers:[{type:"ExportSpecifier",exported:e.id,local:e.id}]})):"ExportDefaultDeclaration"===a.type&&(a.declaration=e.id);n.unshift(hc.assignExpr(k.captureObj,l,f,!1));n.unshift(m)}}c.body=n.concat(c.body);return c};hc.computeDefRanges=function(c,k){c=hc.topLevelDeclsAndRefs(c);
return hc.chain(c.scope.varDecls).pluck("declarations").flatten().value().concat(c.scope.funcDecls.filter(function(d){return d.id})).reduce(function(d,h){d[h.id.name]||(d[h.id.name]=[]);d[h.id.name].push({type:h.type,start:h.start,end:h.end});return d},{})};hc.transformPattern=function(c,k){return"ArrayPattern"===c.type?hc.transformArrayPattern(c,k):"ObjectPattern"===c.type?hc.transformObjectPattern(c,k):[]};hc.transformArrayPattern=function(c,k){for(var d=k.declaredNames,h=hc.annotationSym,n=[],
b=0;b<c.elements.length;b++){var e=c.elements[b];if("Identifier"===e.type)e=hc.varDecl(e,hc.member(k.parent,hc.id(b),!0)),e[h]={capture:!0},n.push(e);else if("RestElement"===e.type)e=hc.varDecl(e.argument,{type:"CallExpression",arguments:[{type:"Literal",value:b}],callee:hc.member(k.parent,hc.id("slice"),!1)}),e[h]={capture:!0},n.push(e);else if("AssignmentPattern"==e.type)e=hc.varDecl(e.left,hc.conditional(hc.binaryExpr(hc.member(k.parent,hc.id(b),!0),"===",hc.id("undefined")),e.right,hc.member(k.parent,
hc.id(b),!0))),e[h]={capture:!0},n.push(e);else{var l=hc.id(hc.generateUniqueName(d,k.parent.name+"$"+b)),a=hc.varDecl(l,hc.member(k.parent,b));d.push(l.name);n.push(a);n.push.apply(n,$jscomp.arrayFromIterable(hc.transformPattern(e,{parent:l,declaredNames:d})))}}return n};hc.transformObjectPattern=function(c,k){for(var d=k.declaredNames,h=hc.annotationSym,n=[],b=0;b<c.properties.length;b++){var e=c.properties[b];if("RestElement"==e.type){var l=c.properties.map(function(m){return m.key&&m.key.name}).filter(Boolean),
a=hc.nodes.varDecl(e.argument.name,hc.nodes.objectLiteral([])),f=hc.nodes.varDecl(e.argument.name,hc.id(e.argument.name));e=hc.nodes.exprStmt(hc.nodes.funcCall(hc.nodes.funcExpr({},[],hc.nodes.forIn("__key",k.parent,hc.nodes.block.apply(hc.nodes,[].concat($jscomp.arrayFromIterable(l.length?l.map(function(m){return hc.nodes.ifStmt(hc.nodes.binaryExpr(hc.nodes.id("__key"),"===",hc.nodes.literal(m)),{type:"ContinueStatement",label:null},null)}):[]),[hc.nodes.exprStmt(hc.nodes.assign(hc.nodes.member(e.argument.name,
hc.nodes.id("__key"),!0),hc.nodes.member(k.parent,hc.nodes.id("__key"),!0)))]))))));f[h]={capture:!0};n.push(a,f,e)}else"Identifier"==e.value.type?(a=hc.varDecl(e.value,hc.member(k.parent,e.key)),a[h]={capture:!0},n.push(a)):"AssignmentPattern"==e.value.type?(a=hc.varDecl(e.value.left,hc.conditional(hc.binaryExpr(hc.member(k.parent,e.key),"===",hc.id("undefined")),e.value.right,hc.member(k.parent,e.key))),a[h]={capture:!0},n.push(a)):(a=hc.id(hc.generateUniqueName(d,k.parent.name+"$"+e.key.name)),
f=hc.varDecl(a,hc.member(k.parent,e.key)),f[h]={capture:!1},d.push(a.name),n.push.apply(n,$jscomp.arrayFromIterable([f].concat(hc.transformPattern(e.value,{parent:a,declaredNames:d})))))}return n};hc.varDeclOrAssignment=function(c,k,d){return-1<hc.topLevelDeclsAndRefs(c).declaredNames.indexOf(k.id.name)?hc.exprStmt(hc.assign(k.id,k.init)):{declarations:[k],kind:d||"var",type:"VariableDeclaration"}};hc.assignExpr=function(c,k,d,h){return hc.exprStmt(hc.assign(hc.member(c,k,h),d||hc.id("undefined")))};
hc.exportFromImport=function(c,k,d,h,n){return hc.exportCall(h,c,hc.importCall(k,d,n))};hc.varDeclAndImportCall=function(c,k,d,h,n){return hc.varDecl(k,hc.importCall(d,h,n))};hc.importCall=function(c,k,d){"string"===typeof c&&(c=hc.literal(c));return{arguments:[k].concat(c||[]),callee:d,type:"CallExpression"}};hc.importCallStmt=function(c,k,d){return hc.exprStmt(hc.importCall(c,k,d))};hc.exportCall=function(c,k,d){"string"===typeof k&&(k=hc.literal(k));d=hc.obj.deepCopy(d);return hc.funcCall(c,k,
d)};hc.exportCallStmt=function(c,k,d){return hc.exprStmt(hc.exportCall(c,k,d))};hc.declarationWrapperCall=function(c,k,d,h,n,b,e){if(k){var l=[],a=!1;if(k["x-lively-object-meta"]){a=k["x-lively-object-meta"];k=a.start;var f=a.end,m=a.evalId,r=a.sourceAccessorName;a=!0;l.push("start",hc.nodes.literal(k),"end",hc.nodes.literal(f))}void 0===m&&e.hasOwnProperty("evalId")&&(m=e.evalId,a=!0);void 0===r&&e.hasOwnProperty("sourceAccessorName")&&(r=e.sourceAccessorName,a=!0);void 0!==m&&l.push("evalId",hc.nodes.literal(m));
r&&l.push("moduleSource",hc.nodes.id(r));if(a)return hc.funcCall(c,d,h,n,b,hc.nodes.objectLiteral(l))}return hc.funcCall(c,d,h,n,b)};hc.obj=ng;hc.string=Th;hc.chain=Bp;hc.arr=Mf;hc.fun=vn;hc.Path=Ih;hc.parse=Xk;hc.stringify=Ve;hc.query=Nu;hc.transform=EC;hc.nodes=wy;hc.Visitor=xe;hc.ReplaceManyVisitor=ft;hc.ReplaceVisitor=Mu;var Gw=hc.nodes;hc.member=Gw.member;hc.prop=Gw.prop;hc.varDecl=Gw.varDecl;hc.assign=Gw.assign;hc.id=Gw.id;hc.literal=Gw.literal;hc.exprStmt=Gw.exprStmt;hc.conditional=Gw.conditional;
hc.binaryExpr=Gw.binaryExpr;hc.funcCall=Gw.funcCall;var C9=hc.query;hc.topLevelDeclsAndRefs=C9.topLevelDeclsAndRefs;hc.queryHelpers=C9.helpers;var D9=hc.transform;hc.transformSingleExpression=D9.transformSingleExpression;hc.wrapInStartEndCall=D9.wrapInStartEndCall;hc.rewriteToCaptureTopLevelVariables=Sv;hc.rewriteToCaptureTopLevelVariables=Sv;hc.rewriteToRegisterModuleToCaptureSetters=vz;hc.rewriteToRegisterModuleToCaptureSetters=vz;hc.insertCapturesForExportedImports=wz;hc.insertCapturesForExportedImports=
wz;hc.annotationSym=Symbol("lively.ast-destructuring-transform");var FI=Object.freeze({__proto__:null,rewriteToCaptureTopLevelVariables:Sv,rewriteToRegisterModuleToCaptureSetters:vz,insertCapturesForExportedImports:wz}),E9={__esModule:!0,default:function(){return{manipulateOptions:function(c,k){k.plugins.push("jsx")}}}},xna=E9=E9["default"],yna={},F9=yna=Array.isArray,rO="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,G9={};G9="object"==typeof rO&&rO&&rO.Object===
Object&&rO;var zna={},Ana="object"==typeof self&&self&&self.Object===Object&&self,FC=zna=G9||Ana||Function("return this")(),Bna={},sO=Bna=FC.Symbol,Cna={},H9=Object.prototype,Dna=H9.hasOwnProperty,Ena=H9.toString,GI=sO?sO.toStringTag:void 0,Fna=Cna=function(c){var k=Dna.call(c,GI),d=c[GI];try{c[GI]=void 0;var h=!0}catch(b){}var n=Ena.call(c);h&&(k?c[GI]=d:delete c[GI]);return n},I9={},Gna=Object.prototype.toString;I9=function(c){return Gna.call(c)};var Hna={},Ina=I9,J9=sO?sO.toStringTag:void 0,TW=
Hna=function(c){return null==c?void 0===c?"[object Undefined]":"[object Null]":J9&&J9 in Object(c)?Fna(c):Ina(c)},Jna={},UW=Jna=function(c){return null!=c&&"object"==typeof c},Kna={},Lna=Kna=function(c){return"string"==typeof c||!F9(c)&&UW(c)&&"[object String]"==TW(c)},Mna={},VW=Mna=function(c){return c},Nna={},Ona=Nna=function(c){return"symbol"==typeof c||UW(c)&&"[object Symbol]"==TW(c)},Pna={},xF=Pna=function(c){var k=typeof c;return null!=c&&("object"==k||"function"==k)},Qna={},Rna=Qna=function(c){if(!xF(c))return!1;
c=TW(c);return"[object Function]"==c||"[object GeneratorFunction]"==c||"[object AsyncFunction]"==c||"[object Proxy]"==c},K9={};K9=FC["__core-js_shared__"];var Sna={},WW=K9,L9=function(){var c=/[^.]+$/.exec(WW&&WW.keys&&WW.keys.IE_PROTO||"");return c?"Symbol(src)_1."+c:""}(),Tna=Sna=function(c){return!!L9&&L9 in c},M9={},Una=Function.prototype.toString;M9=function(c){if(null!=c){try{return Una.call(c)}catch(k){}return c+""}return""};var Vna={},Wna=M9,Xna=/^\[object .+?Constructor\]$/,Yna=RegExp("^"+
Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Zna=Vna=function(c){return!xF(c)||Tna(c)?!1:(Rna(c)?Yna:Xna).test(Wna(c))},N9={};N9=function(c,k){return null==c?void 0:c[k]};var $na={},aoa=N9,O9=$na=function(c,k){c=aoa(c,k);return Zna(c)?c:void 0},boa={},P9=boa=function(){try{var c=O9(Object,"defineProperty");c({},"",{});return c}catch(k){}}(),coa={},Q9=coa=function(c,
k){var d=-1,h=c.length;for(k||(k=Array(h));++d<h;)k[d]=c[d];return k},doa={},R9=Object.create,XW=doa=function(){function c(){}return function(k){if(!xF(k))return{};if(R9)return R9(k);c.prototype=k;k=new c;c.prototype=void 0;return k}}(),eoa={},foa=/^(?:0|[1-9]\d*)$/,goa=eoa=function(c,k){var d=typeof c;k=null==k?9007199254740991:k;return!!k&&("number"==d||"symbol"!=d&&foa.test(c))&&-1<c&&0==c%1&&c<k},hoa={},S9=hoa=function(c,k,d){switch(d.length){case 0:return c.call(k);case 1:return c.call(k,d[0]);
case 2:return c.call(k,d[0],d[1]);case 3:return c.call(k,d[0],d[1],d[2])}return c.apply(k,d)},T9={};T9=function(c){return function(){return c}};var ioa={},joa=T9,koa=ioa=P9?function(c,k){return P9(c,"toString",{configurable:!0,enumerable:!1,value:joa(k),writable:!0})}:VW,loa={},moa=Date.now,U9=loa=function(c){var k=0,d=0;return function(){var h=moa(),n=16-(h-d);d=h;if(0<n){if(800<=++k)return arguments[0]}else k=0;return c.apply(void 0,arguments)}},noa={},ooa=noa=U9(koa),poa={},V9=poa=O9(FC,"WeakMap"),
qoa={},roa=qoa=function(c,k){for(var d=-1,h=null==c?0:c.length;++d<h&&!1!==k(c[d],d,c););return c},W9={},soa=/\s/;W9=function(c){for(var k=c.length;k--&&soa.test(c.charAt(k)););return k};var X9={},toa=W9,uoa=/^\s+/;X9=function(c){return c?c.slice(0,toa(c)+1).replace(uoa,""):c};var voa={},woa=X9,Y9=0/0,xoa=/^[-+]0x[0-9a-f]+$/i,yoa=/^0b[01]+$/i,zoa=/^0o[0-7]+$/i,Aoa=parseInt,Boa=voa=function(c){if("number"==typeof c)return c;if(Ona(c))return Y9;xF(c)&&(c="function"==typeof c.valueOf?c.valueOf():c,c=
xF(c)?c+"":c);if("string"!=typeof c)return 0===c?c:+c;c=woa(c);var k=yoa.test(c);return k||zoa.test(c)?Aoa(c.slice(2),k?2:8):xoa.test(c)?Y9:+c},Coa={},Doa=Coa=function(c,k,d,h){var n=c.length;for(d+=h?1:-1;h?d--:++d<n;)if(k(c[d],d,c))return d;return-1},Z9={},$9=1/0;Z9=function(c){if(!c)return 0===c?c:0;c=Boa(c);return c===$9||c===-$9?1.7976931348623157E308*(0>c?-1:1):c===c?c:0};var Eoa={},Foa=Z9,a$=Eoa=function(c){c=Foa(c);var k=c%1;return c===c?k?c-k:c:0},Goa={},Hoa=Goa=function(c){return c!==c},
b$={};b$=function(c,k,d){--d;for(var h=c.length;++d<h;)if(c[d]===k)return d;return-1};var c$={},Ioa=b$;c$=function(c,k,d){return k===k?Ioa(c,k,d):Doa(c,Hoa,d)};var Joa={},Koa=c$,Loa=Joa=function(c,k){return!(null==c||!c.length)&&-1<Koa(c,k,0)},Moa={},Noa=Moa=function(){},Ooa={},YW=Ooa=function(){},AB="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,Poa={};zB.prototype=XW(YW.prototype);var ZW=Poa=zB.prototype.constructor=zB,SG="undefined"!==typeof globalThis?globalThis:
"undefined"!==typeof self?self:global,Qoa={};Zt.prototype=XW(YW.prototype);var d$=Qoa=Zt.prototype.constructor=Zt,e$={};e$=function(c){if(c instanceof ZW)return c.clone();var k=new d$(c.__wrapped__,c.__chain__);k.__actions__=Q9(c.__actions__);k.__index__=c.__index__;k.__values__=c.__values__;return k};var Roa={},uga=ZW,E0=d$,tga=F9,sga=UW,wga=e$,vga=Object.prototype.hasOwnProperty;$t.prototype=YW.prototype;var Soa=Roa=$t.prototype.constructor=$t,Toa={},tO=Toa=V9&&new V9,Uoa={},f$=Uoa=tO?function(c){return tO.get(c)}:
Noa,g$={};g$={};var h$={},i$=g$,Voa=Object.prototype.hasOwnProperty;h$=function(c){for(var k=c.name+"",d=i$[k],h=Voa.call(i$,k)?d.length:0;h--;){var n=d[h],b=n.func;if(null==b||b==c)return n.name}return k};var Woa={},Xoa=h$,Yoa=Woa=function(c){var k=Xoa(c),d=Soa[k];if("function"!=typeof d||!(k in ZW.prototype))return!1;if(c===d)return!0;k=f$(d);return!!k&&c===k[0]},Zoa={},j$=Zoa=tO?function(c,k){tO.set(c,k);return c}:VW,$oa={},uO=$oa=function(c){return function(){var k=arguments;switch(k.length){case 0:return new c;
case 1:return new c(k[0]);case 2:return new c(k[0],k[1]);case 3:return new c(k[0],k[1],k[2]);case 4:return new c(k[0],k[1],k[2],k[3]);case 5:return new c(k[0],k[1],k[2],k[3],k[4]);case 6:return new c(k[0],k[1],k[2],k[3],k[4],k[5]);case 7:return new c(k[0],k[1],k[2],k[3],k[4],k[5],k[6])}var d=XW(c.prototype);k=c.apply(d,k);return xF(k)?k:d}},vO="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,apa={},bpa=apa=function(c,k,d){function h(){return((this||vO)&&(this||vO)!==
FC&&(this||vO)instanceof h?b:c).apply(n?d:this||vO,arguments)}var n=k&1,b=uO(c);return h},cpa={},dpa=Math.max,k$=cpa=function(c,k,d,h){var n=-1,b=c.length,e=d.length,l=-1,a=k.length,f=dpa(b-e,0),m=Array(a+f);for(h=!h;++l<a;)m[l]=k[l];for(;++n<e;)if(h||n<b)m[d[n]]=c[n];for(;f--;)m[l++]=c[n++];return m},epa={},fpa=Math.max,l$=epa=function(c,k,d,h){var n=-1,b=c.length,e=-1,l=d.length,a=-1,f=k.length,m=fpa(b-l,0),r=Array(m+f);for(h=!h;++n<m;)r[n]=c[n];for(m=n;++a<f;)r[m+a]=k[a];for(;++e<l;)if(h||n<b)r[m+
d[e]]=c[n++];return r},gpa={},hpa=gpa=function(c,k){for(var d=c.length,h=0;d--;)c[d]===k&&++h;return h},ipa={},m$=ipa=U9(j$),jpa={},kpa=/\{\n\/\* \[wrapped with (.+)\] \*/,lpa=/,? & /,mpa=jpa=function(c){return(c=c.match(kpa))?c[1].split(lpa):[]},npa={},opa=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ppa=npa=function(c,k){var d=k.length;if(!d)return c;var h=d-1;k[h]=(1<d?"& ":"")+k[h];k=k.join(2<d?", ":" ");return c.replace(opa,"{\n/* [wrapped with "+k+"] */\n")},n$={},qpa=[["ary",128],["bind",1],
["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]];n$=function(c,k){roa(qpa,function(d){var h="_."+d[0];k&d[1]&&!Loa(c,h)&&c.push(h)});return c.sort()};var rpa={},spa=n$,o$=rpa=function(c,k,d){k+="";return ooa(c,ppa(k,spa(mpa(k),d)))},tpa={},p$=tpa=function(c,k,d,h,n,b,e,l,a,f){var m=k&8;k=(k|(m?32:64))&~(m?64:32);k&4||(k&=-4);n=[c,k,n,m?b:void 0,m?e:void 0,m?void 0:b,m?void 0:e,l,a,f];d=d.apply(void 0,n);Yoa(c)&&m$(d,n);d.placeholder=h;return o$(d,
c,k)},upa={},q$=upa=function(c){return c.placeholder},vpa={},wpa=Math.min,xpa=vpa=function(c,k){for(var d=c.length,h=wpa(k.length,d),n=Q9(c);h--;){var b=k[h];c[h]=goa(b,d)?n[b]:void 0}return c},ypa={},wO=ypa=function(c,k){for(var d=-1,h=c.length,n=0,b=[];++d<h;){var e=c[d];if(e===k||"__lodash_placeholder__"===e)c[d]="__lodash_placeholder__",b[n++]=d}return b},WK="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,zpa={},zga=k$,Aga=l$,yga=hpa,F0=uO,Cga=p$,xga=q$,Dga=xpa,
Bga=wO,Ega=FC,r$=zpa=Mx,xO="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,Apa={},Bpa=Apa=function(c,k,d){function h(){for(var b=arguments.length,e=Array(b),l=b,a=q$(h);l--;)e[l]=arguments[l];l=3>b&&e[0]!==a&&e[b-1]!==a?[]:wO(e,a);b-=l.length;return b<d?p$(c,k,r$,h.placeholder,void 0,e,l,void 0,void 0,d-b):S9((this||xO)&&(this||xO)!==FC&&(this||xO)instanceof h?n:c,this||xO,e)}var n=uO(c);return h},yO="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?
self:global,Cpa={},Dpa=Cpa=function(c,k,d,h){function n(){for(var l=-1,a=arguments.length,f=-1,m=h.length,r=Array(m+a),v=(this||yO)&&(this||yO)!==FC&&(this||yO)instanceof n?e:c;++f<m;)r[f]=h[f];for(;a--;)r[f++]=arguments[++l];return S9(v,b?d:this||yO,r)}var b=k&1,e=uO(c);return n},s$={},Epa=Math.min;s$=function(c,k){var d=c[1],h=k[1],n=d|h,b=128==h&&8==d||128==h&&256==d&&c[7].length<=k[8]||384==h&&k[7].length<=k[8]&&8==d;if(!(131>n||b))return c;h&1&&(c[2]=k[2],n|=d&1?0:4);if(d=k[3])b=c[3],c[3]=b?
k$(b,d,k[4]):d,c[4]=b?wO(c[3],"__lodash_placeholder__"):k[4];if(d=k[5])b=c[5],c[5]=b?l$(b,d,k[6]):d,c[6]=b?wO(c[5],"__lodash_placeholder__"):k[6];(d=k[7])&&(c[7]=d);h&128&&(c[8]=null==c[8]?k[8]:Epa(c[8],k[8]));null==c[9]&&(c[9]=k[9]);c[0]=k[0];c[1]=n;return c};var t$={},Fpa=s$,u$=Math.max;t$=function(c,k,d,h,n,b,e,l){var a=k&2;if(!a&&"function"!=typeof c)throw new TypeError("Expected a function");var f=h?h.length:0;f||(k&=-97,h=n=void 0);e=void 0===e?e:u$(a$(e),0);l=void 0===l?l:a$(l);f-=n?n.length:
0;if(k&64){var m=h,r=n;h=n=void 0}var v=a?void 0:f$(c);b=[c,k,d,h,n,m,r,b,e,l];v&&Fpa(b,v);c=b[0];k=b[1];d=b[2];h=b[3];n=b[4];l=b[9]=void 0===b[9]?a?0:c.length:u$(b[9]-f,0);!l&&k&24&&(k&=-25);d=k&&1!=k?8==k||16==k?Bpa(c,k,l):32!=k&&33!=k||n.length?r$.apply(void 0,b):Dpa(c,k,d,h):bpa(c,k,d);return o$((v?j$:m$)(d,b),c,k)};var Gpa={},Hpa=t$,Ipa=Gpa=function(c,k,d){k=d?void 0:k;k=c&&null==k?c.length:k;return Hpa(c,128,void 0,void 0,void 0,void 0,k)},$W={};Object.defineProperty($W,"__esModule",{value:!0});
$W.default=function(c){var k=c.types,d=function(n){return function(b){var e=n[b.type];if(e)return e(b);throw Error(b.type+" could not be transformed");}},h=function(n,b){var e=b.opts;b=e.useNew;var l=void 0===b?!1:b;b=e.module;var a=e.function;e=e.useVariables;var f=void 0===e?!1:e,m=e=void 0;!0===f?e=/^[A-Z]/:(0,Jpa.default)(f)&&(e=new RegExp(f));var r=l?k.newExpression:k.callExpression;m=function(v){return function(x){return r(v,[x])}};b?(l=n.scope.generateUidIdentifier(l?"JSXNode":"jsx"),m=m(l),
b=k.importDeclaration([k.importDefaultSpecifier(l)],k.stringLiteral(b)),n.findParent(function(v){return v.isProgram()}).unshiftContainer("body",b)):a?(n=a.split(".").map((0,v$.default)(k.identifier,1)).reduce((0,v$.default)(k.memberExpression,2)),m=m(n)):m=Kpa.default;return{variablesRegex:e,jsxObjectTransformer:m}};return{inherits:xna,visitor:{JSXElement:function(n,b){b.get("jsxConfig")||b.set("jsxConfig",h(n,b));var e=b.get("jsxConfig"),l=e.variablesRegex,a=e.jsxObjectTransformer,f=function(J){return k.stringLiteral(J.name)},
m=function(J){return k.stringLiteral(J.namespace.name+":"+J.name.name)},r=d({JSXIdentifier:function(J){return k.identifier(J.name)},JSXMemberExpression:function(J){return k.memberExpression(r(J.object),r(J.property))}}),v=d({JSXIdentifier:l?function(J){return l.test(J.name)?k.identifier(J.name):f(J)}:f,JSXNamespacedName:m,JSXMemberExpression:r});e=function(J){return J.expression};var x=d({JSXIdentifier:f,JSXNamespacedName:m,JSXMemberExpression:r}),y=d({StringLiteral:function(J){return J},JSXExpressionContainer:e}),
E=function(J){var P=[],N=[];J.forEach(function(Y){switch(Y.type){case "JSXAttribute":P||(P=[]);var W=x(Y.name);W=Lpa.default.keyword.isIdentifierNameES6(W.value)?k.identifier(W.value):W;P.push(k.objectProperty(W,y(Y.value)));break;case "JSXSpreadAttribute":P&&(N.push(k.objectExpression(P)),P=null);N.push(Y.argument);break;default:throw Error(Y.type+" cannot be used as a JSX attribute");}});P&&0<P.length&&N.push(k.objectExpression(P));return 0===N.length?k.objectExpression([]):1===N.length?N[0]:k.callExpression(b.addHelper("extends"),
N)};m=function(J){return a(k.objectExpression([k.objectProperty(k.identifier(Mpa),v(J.openingElement.name)),k.objectProperty(k.identifier(Npa),E(J.openingElement.attributes)),k.objectProperty(k.identifier(Opa),J.closingElement?I(J.children):k.nullLiteral())]))};var F=d({JSXText:function(J){if(b.opts.noTrim)return k.stringLiteral(J.value);J=J.value.replace(/\n\s*/g,"");return""===J?null:k.stringLiteral(J)},JSXElement:m,JSXExpressionContainer:e}),I=function(J){return k.arrayExpression(J.map(F).filter(Boolean).reduce(function(P,
N){var Y=0<P.length?P[P.length-1]:null;return"StringLiteral"===N.type&&Y&&"StringLiteral"===Y.type?[].concat(TG(P.slice(0,-1)),[k.stringLiteral(Y.value+N.value)]):[].concat(TG(P),[N])},[]))};n.replaceWith(m(n.node))}}}};var Jpa=BB(Lna),Kpa=BB(VW),v$=BB(Ipa),Lpa=BB(sI),Mpa="elementName",Npa="attributes",Opa="children",HI={};Object.defineProperty(HI,"__esModule",{value:!0});HI.declare=function(c){return function(k,d,h){for(var n,b,e=$jscomp.makeIterator(Object.keys(w$)),l=e.next();!l.done;l=e.next())if(l=
l.value,!k[l]){if(null==b){b=k;var a=null;"string"===typeof b.version&&/^7\./.test(b.version)&&(a=Object.getPrototypeOf(b),!a||Object.prototype.hasOwnProperty.call(a,"version")&&Object.prototype.hasOwnProperty.call(a,"transform")&&Object.prototype.hasOwnProperty.call(a,"template")&&Object.prototype.hasOwnProperty.call(a,"types")||(a=null));b=Object.assign({},a,b)}b[l]=w$[l](b)}return c(null!=(n=b)?n:k,d||{},h)}};var w$={assertVersion:function(c){return function(k){var d=c.version;if("number"===typeof k){if(!Number.isInteger(k))throw Error("Expected string or integer value.");
k="^"+k+".0.0-0"}if("string"!==typeof k)throw Error("Expected string or integer value.");var h=Error.stackTraceLimit;"number"===typeof h&&25>h&&(Error.stackTraceLimit=25);var n="7."===d.slice(0,2)?Error('Requires Babel "^7.0.0-beta.41", but was loaded with "'+d+"\". You'll need to update your @babel/core version."):Error('Requires Babel "'+k+'", but was loaded with "'+d+'". If you are sure you have a compatible version of @babel/core, it is likely that something in your build process is loading the wrong version. Inspect the stack trace of this error to look for the first entry that doesn\'t mention "@babel/core" or "babel-core" to see what is calling Babel.');
"number"===typeof h&&(Error.stackTraceLimit=h);throw Object.assign(n,{code:"BABEL_VERSION_UNSUPPORTED",version:d,range:k});}},targets:function(){return function(){return{}}},assumption:function(){return function(){}}},GC={};Object.defineProperty(GC,"__esModule",{value:!0});GC.default=void 0;var Ppa=(0,HI.declare)(function(c){c.assertVersion(7);return{name:"syntax-optional-catch-binding",manipulateOptions:function(k,d){d.plugins.push("optionalCatchBinding")}}});GC.default=Ppa;var zO={};Object.defineProperty(zO,
"__esModule",{value:!0});zO.default=void 0;var Qpa=GC&&GC.__esModule?GC:{default:GC},Rpa=(0,HI.declare)(function(c){c.assertVersion(7);return{name:"proposal-optional-catch-binding",inherits:Qpa.default,visitor:{CatchClause:function(k){if(!k.node.param){var d=k.scope.generateUidIdentifier("unused");k.get("param").replaceWith(d)}}}}});zO.default=Rpa;var AO={};Object.defineProperty(AO,"__esModule",{value:!0});AO.default=void 0;var Spa=(0,HI.declare)(function(c){c.assertVersion(7);return{name:"syntax-import-meta",
manipulateOptions:function(k,d){d.plugins.push("importMeta")}}});AO.default=Spa;var ik=lively.FreezerRuntime.recorderFor("lively.source-transform/index.js");ik.ensureJSXPlugin=function(){ik.transformJSX&&("undefined"===typeof babel||babel.availablePlugins["transform-jsx"]||(lively||global.lively).FreezerRuntime||babel.registerPlugin("transform-jsx",ik.transformJSX.default))};ik.ensureOptionalCatchBinding=function(){ik.catchBinding&&("undefined"===typeof babel||babel.availablePlugins["optional-catch-binding"]||
(lively||global.lively).FreezerRuntime||babel.registerPlugin("optional-catch-binding",ik.catchBinding.default))};ik.ensureImportMeta=function(){ik.importMeta&&("undefined"===typeof babel||babel.availablePlugins["syntax-import-meta"]||(lively||global.lively).FreezerRuntime||babel.registerPlugin("syntax-import-meta",ik.importMeta.default))};ik.stringifyFunctionWithoutToplevelRecorder=Nn;ik.es5Transpilation=Nx;ik.capturing=FI;ik.capturing=FI;ik.capturing=FI;ik.parseFunction=Cl;ik.stringify=Ve;ik.ReplaceVisitor=
Mu;ik.transformJSX=$W;ik.catchBinding=zO;ik.importMeta=AO;ik.stringifyFunctionWithoutToplevelRecorder=Nn;ik.stringifyFunctionWithoutToplevelRecorder=Nn;ik.es5Transpilation=Nx;ik.es5Transpilation=Nx;var Tpa=Object.freeze({__proto__:null,capturing:FI,stringifyFunctionWithoutToplevelRecorder:Nn,es5Transpilation:Nx}),Ng=lively.FreezerRuntime.recorderFor("lively.vm/lib/eval-support.js");Ng.processInlineCodeTransformOptions=function(c,k){if(!c.comments)return k;c=c.comments.find(function(h){return h.text.startsWith("lively.vm ")});
if(!c)return k;try{var d=eval("inlineOptions = {"+c.text.slice(10)+"};");return Object.assign(k,d)}catch(h){return k}};Ng.evalCodeTransform=au;Ng.evalCodeTransformOfSystemRegisterSetters=rr;Ng.copyProperties=function(c,k,d){d=void 0===d?[]:d;Object.getOwnPropertyNames(c).concat(Object.getOwnPropertySymbols(c)).forEach(function(h){return-1===d.indexOf(h)&&Object.defineProperty(k,h,Object.getOwnPropertyDescriptor(c,h))})};Ng.arr=Mf;Ng.Path=Ih;Ng.parse=Xk;Ng.stringify=Ve;Ng.transform=EC;Ng.query=Nu;
Ng.nodes=wy;Ng.capturing=FI;Ng.es5Transpilation=Nx;Ng.getGlobal=qr;var BO=Ng.nodes;Ng.id=BO.id;Ng.literal=BO.literal;Ng.member=BO.member;Ng.objectLiteral=BO.objectLiteral;Ng.defaultDeclarationWrapperName="lively.capturing-declaration-wrapper";Ng.defaultDeclarationWrapperName="lively.capturing-declaration-wrapper";Ng.defaultDeclarationWrapperName="lively.capturing-declaration-wrapper";Ng.defaultClassToFunctionConverterName="initializeES6ClassForLively";Ng.defaultClassToFunctionConverterName="initializeES6ClassForLively";
Ng.defaultClassToFunctionConverterName="initializeES6ClassForLively";Ng.evalCodeTransform=au;Ng.evalCodeTransform=au;Ng.evalCodeTransformOfSystemRegisterSetters=rr;Ng.evalCodeTransformOfSystemRegisterSetters=rr;var gh=lively.FreezerRuntime.recorderFor("lively.vm/lib/eval.js");gh._normalizeEvalOptions=function(c){c||(c={});c=Object.assign({targetModule:null,sourceURL:c.targetModule,runtime:null,context:gh.getGlobal(),varRecorderName:gh.defaultTopLevelVarRecorderName,dontTransform:[],recordGlobals:null,
returnPromise:!0,promiseTimeout:200,waitForPromise:!0,wrapInStartEndCall:!1,onStartEval:null,onEndEval:null},c);if(c.targetModule){var k=c.runtime&&c.runtime.modules&&c.runtime.modules[c.targetModule];k&&(c=Object.assign(c,k))}c.wrapInStartEndCall&&(c.startFuncNode={type:"MemberExpression",object:{type:"Identifier",name:c.varRecorderName},property:{type:"Literal",value:gh.startEvalFunctionName},computed:!0},c.endFuncNode={type:"MemberExpression",object:{type:"Identifier",name:c.varRecorderName},property:{type:"Literal",
value:gh.endEvalFunctionName},computed:!0});return c};gh.runEval=Im;gh.finishEval=function(c,k,d,h,n,b,e){h.wrapInStartEndCall&&(delete n[gh.startEvalFunctionName],delete n[gh.endEvalFunctionName]);c?(d.isError=!0,d.value=c):d.value=k;d.value instanceof Promise&&(d.isPromise=!0);if(h.sync){if(d.processSync(h),"function"===typeof h.onEndEval)h.onEndEval(c,k)}else d.process(h).then(function(){"function"===typeof e&&e(null,d);"function"===typeof h.onEndEval&&h.onEndEval(c,k);return d},function(l){"function"===
typeof e&&e(l,void 0);"function"===typeof h.onEndEval&&h.onEndEval(l,void 0);return d}).then(b.resolve,b.reject)};gh.syncEval=sr;gh.tryToWaitForPromise=function(c,k){console.assert(c.isPromise,"no promise in tryToWaitForPromise???");var d={},h=new Promise(function(n){return setTimeout(n,k,d)});return Promise.race([h,c.value]).then(function(n){return Object.assign(c,n!==d?{promiseStatus:"fulfilled",promisedValue:n}:{promiseStatus:"pending"})}).catch(function(n){return Object.assign(c,{promiseStatus:"rejected",
promisedValue:n})})};gh.arr=Mf;gh.obj=ng;gh.string=Th;gh.Path=Ih;gh.promise=hg;gh.Closure=ek;gh.evalCodeTransform=au;gh.printEvalResult=uz;gh.getGlobal=qr;gh.defaultTopLevelVarRecorderName="__lvVarRecorder";gh.startEvalFunctionName="lively.vm-on-eval-start";gh.endEvalFunctionName="lively.vm-on-eval-end";gh._eval=gh.Closure.fromSource("function _eval(__lvEvalStatement, __lvVarRecorder/*needed as arg for capturing*/, __lvOriginalCode) {\n  return eval(__lvEvalStatement);\n}").getFunc();var II=function(){this.isEvalResult=
!0;this.value=void 0;this.warnings=[];this.isPromise=this.isError=!1;this.promisedValue=void 0;this.promiseStatus="unknown"};II.prototype.addWarning=function(c){this.warnings.push(c);return c};II.prototype.printed=function(c){c=void 0===c?{}:c;this.value=gh.printEvalResult(this,c)};II.prototype.processSync=function(c){if(c.inspect||c.asString)this.value=this.print(this.value,c);return this};II.prototype.process=function(c){var k=this;if(k.isPromise&&c.waitForPromise)return gh.tryToWaitForPromise(k,
c.promiseTimeout).then(function(){(c.inspect||c.asString)&&k.printed(c);return k});(c.inspect||c.asString)&&k.printed(c);return Promise.resolve(k)};gh.EvalResult=II;var yF=gh.defaultTopLevelVarRecorderName;gh.defaultTopLevelVarRecorderName=yF;gh.defaultTopLevelVarRecorderName=yF;gh.getGlobal=qr;gh.getGlobal=qr;gh.runEval=Im;gh.runEval=Im;gh.syncEval=sr;gh.syncEval=sr;var Upa=Object.freeze({__proto__:null,defaultTopLevelVarRecorderName:yF,getGlobal:qr,runEval:Im,syncEval:sr}),Jg=lively.FreezerRuntime.recorderFor("lively.notifications/index.js");
Jg.getEnv=function(c){if(void 0===c){if("undefined"===typeof System)return void 0!==Jg.env?Jg.env:Jg.env||(Jg.env={emitter:Jg.events.makeEmitter({},{maxListenerLimit:1E4}),notifications:[]});c=System}var k=c.get("@lively-env");k||c.set("@lively-env",c.newModule({options:{}}));k=k.options;if(!k)throw Error("@lively-env registered read-only");k.emitter||Object.assign(k,{emitter:c["__lively.notifications_emitter"]||(c["__lively.notifications_emitter"]=Jg.events.makeEmitter({},{maxListenerLimit:1E4})),
notifications:c["__lively.notifications_notifications"]||(c["__lively.notifications_notifications"]=[])});return{emitter:k.emitter,notifications:k.notifications}};Jg.subscribe=Gp;Jg.subscribeOnce=On;Jg.emit=jn;Jg.unsubscribe=Ox;Jg.unsubscribeAll=kn;Jg.record=function(c,k){c.push(k);c.limit&&c.splice(0,c.length-c.limit)};Jg.startRecording=Tv;Jg.stopRecording=vq;Jg.clearRecord=aE;Jg.getRecord=bu;Jg.log=function(c){var k=c.type+" ".repeat(Math.max(0,32-c.type.length));console.log(k+" "+Jg.obj.inspect(c,
{maxDepth:2}))};Jg.startLogging=Px;Jg.stopLogging=cu;Jg.events=nA;Jg.obj=ng;Jg.env=null;Jg.subscribe=Gp;Jg.subscribe=Gp;Jg.subscribeOnce=On;Jg.subscribeOnce=On;Jg.emit=jn;Jg.emit=jn;Jg.unsubscribe=Ox;Jg.unsubscribe=Ox;Jg.unsubscribeAll=kn;Jg.unsubscribeAll=kn;Jg.startRecording=Tv;Jg.startRecording=Tv;Jg.stopRecording=vq;Jg.stopRecording=vq;Jg.clearRecord=aE;Jg.clearRecord=aE;Jg.getRecord=bu;Jg.getRecord=bu;Jg.startLogging=Px;Jg.startLogging=Px;Jg.stopLogging=cu;Jg.stopLogging=cu;var xi=lively.FreezerRuntime.recorderFor("lively.vm/lib/esm-eval.js");
xi.ensureImportsAreImported=function(c,k,d){var h,n,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){return 1==e.nextAddress?(h=xi.parse(k),n=h.body,b=n.filter(function(l){return"ImportDeclaration"===l.type}),e.yield(Promise.all(b.map(function(l){return c.normalize(l.source.value,d).then(function(a){l.source.value=a;return c.get(a)||c.import(a)})})).catch(function(l){console.error("Error ensuring imports: "+l.message);throw l;}),2)):e.return(xi.stringify(h))})};xi.hasUnimportedImports=
function(c,k,d){k=xi.parse(k).body.filter(function(h){return"ImportDeclaration"===h.type});return 0<xi.arr.uniq(k.map(function(h){return h.source.value})).filter(Boolean).filter(function(h){return!c.get(c.decanonicalize(h,d))}).length};xi.babelTranspilerForAsyncAwaitCode=function(c,k,d,h){return function(n,b){b=Object.assign({sourceMap:void 0,inputSourceMap:void 0,filename:d,code:!0,ast:!1},b);n=k.transform("(async function(__rec) {\n"+n+"\n}).call(this);",b).code;return n=n.replace(/\}\)\.call\(undefined\);$/,
"}).call(this)")}};xi.babelPluginTranspilerForAsyncAwaitCode=function(c,k,d,h){return function(n,b){var e=c.babelOptions||{},l=[];l.push(k.presetES2015);e.stage3&&l.push({plugins:k.pluginsStage3});e.stage2&&l.push({plugins:k.pluginsStage2});e.stage1&&l.push({plugins:k.pluginsStage1});b=Object.assign({sourceMap:void 0,inputSourceMap:void 0,filename:d,babelrc:!1,presets:l,moduleIds:!1,code:!0,ast:!1},b);n=k.babel.transform("(async function(__rec) {\n"+n+"\n}).call(this);",b).code;return n=n.replace(/\}\)\.call\(undefined\);$/,
"}).call(this)")}};xi.getEs6Transpiler=function(c,k,d){if(k.transpiler)return k.transpiler;if(!k.es6Transpile)return null;if("babel"===c.transpiler){var h=c.global[c.transpiler]||c.get(c.decanonicalize(c.transpiler));return h?xi.babelTranspilerForAsyncAwaitCode(c,h,k.targetModule,d):c.import(c.transpiler).then(function(e){return xi.babelTranspilerForAsyncAwaitCode(c,e,k.targetModule,d)})}if("plugin-babel"===c.transpiler){h=c.decanonicalize("plugin-babel").split("/").slice(0,-1).concat("systemjs-babel-browser.js").join("/");
var n=c.get(h);return n?xi.babelPluginTranspilerForAsyncAwaitCode(c,n,k.targetModule,d):c.import(h).then(function(e){return xi.babelPluginTranspilerForAsyncAwaitCode(c,e,k.targetModule,d)})}if("lively.transpiler"===c.transpiler){var b=new (c.get(c.decanonicalize("lively.transpiler")).default)(c,k.targetModule,d);return function(e,l){return b.transpileDoit(e,l)}}throw Error("Sorry, currently only babel is supported as es6 transpiler for runEval!");};xi.runEval=Hp;xi.evalEnd=function(c,k,d,h){c.get("@lively-env").evaluationEnd(d.targetModule);
c.debug&&console.log("[lively.module] runEval in module "+d.targetModule+" done");xi.emit("lively.vm/doitresult",{code:k,result:h,waitForPromise:d.waitForPromise,targetModule:d.targetModule},Date.now(),c);return h};xi.parse=Xk;xi.nodes=wy;xi.stringify=Ve;xi.emit=jn;var CO=xi.nodes;xi.funcCall=CO.funcCall;xi.member=CO.member;xi.id=CO.id;xi.literal=CO.literal;xi.arr=Mf;xi.vmRunEval=Im;xi.runEval=Hp;xi.runEval=Hp;var Vpa=Object.freeze({__proto__:null,runEval:Hp}),wk=lively.FreezerRuntime.recorderFor("lively.vm/lib/eval-strategies.js");
wk.obj=ng;var zF=function(){};zF.prototype.runEval=function(c,k){var d=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(h){return h.return(Promise.reject("runEval(source, options) not yet implemented for "+d.constructor.name))})};zF.prototype.keysOfObject=function(c,k){var d=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(h){return h.return(Promise.reject("keysOfObject(prefix, options) not yet implemented for "+d.constructor.name))})};wk.EvalStrategy=zF;var HC=function(){return wk.EvalStrategy.apply(this,
arguments)||this};$jscomp.inherits(HC,wk.EvalStrategy);HC.prototype.runEval=function(c,k){return $jscomp.asyncExecutePromiseGeneratorProgram(function(d){return d.return(Promise.resolve().then(function(){try{return Promise.resolve({value:eval(c)})}catch(h){return{isError:!0,value:h}}}))})};HC.prototype.keysOfObject=function(c,k){var d=this,h;return $jscomp.asyncExecutePromiseGeneratorProgram(function(n){if(1==n.nextAddress)return n.yield(lively.vm.completions.getCompletions(function(b){return d.runEval(b,
k)},c),2);h=n.yieldResult;return n.return({completions:h.completions,prefix:h.startLetters})})};wk.SimpleEvalStrategy=HC;var tA=function(){return wk.EvalStrategy.apply(this,arguments)||this};$jscomp.inherits(tA,wk.EvalStrategy);tA.prototype.normalizeOptions=function(c){if(!c.targetModule)throw Error("runEval called but options.targetModule not specified!");return Object.assign({sourceURL:c.targetModule+"_doit_"+Date.now()},c)};tA.prototype.runEval=function(c,k){var d=this,h,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){k=
d.normalizeOptions(k);h=k.System||lively.modules.System;n={};h.config({meta:(n[k.targetModule]={format:"esm"},n)});return b.return(lively.vm.runEval(c,k))})};tA.prototype.keysOfObject=function(c,k){var d;return $jscomp.asyncExecutePromiseGeneratorProgram(function(h){if(1==h.nextAddress)return h.yield(lively.vm.completions.getCompletions(function(n){return lively.vm.runEval(n,k)},c),2);d=h.yieldResult;return h.return({completions:d.completions,prefix:d.startLetters})})};wk.LivelyVmEvalStrategy=tA;
var uA=function(){return wk.LivelyVmEvalStrategy.apply(this,arguments)||this};$jscomp.inherits(uA,wk.LivelyVmEvalStrategy);uA.prototype.sourceForRemote=function(c,k,d){var h=wk.obj.isString(d.context)?d.context:!1;d=wk.obj.dissoc(d,["systemInterface","System","context","classTransform"]);return"\n(function() {\n  var arg = "+JSON.stringify(k)+",\n      options = "+JSON.stringify(d)+';\n  if (typeof lively === "undefined" || !lively.vm) {\n    return Promise.resolve({\n      isEvalResult: true,\n      isError: true,\n      value: \'lively.vm not available!\'\n    });\n  }\n  var hasSystem = typeof System !== "undefined"\n  options.context = '+
h+';\n  options.classTransform = lively.classes.classToFunctionTransform;\n  if (!options.context) {\n    options.context = hasSystem\n      ? System.global\n      : typeof window !== "undefined"\n          ? window\n          : typeof global !== "undefined"\n              ? global\n              : typeof self !== "undefined" ? self : this;\n  }\n  async function evalFunction(source, options) {\n    if (hasSystem) {\n      var conf = {meta: {}}; conf.meta[options.targetModule] = {format: "esm"};\n      System.config(conf);\n    } else {\n      options = Object.assign({topLevelVarRecorderName: "GLOBAL"}, options);\n      delete options.targetModule;\n    }\n    let res = await lively.vm.runEval(source, options);\n    try {\n       JSON.stringify(res.value);\n    } catch(e) {\n       res.value = String(res.value);\n    }\n    return res;\n  }\n  function keysOfObjectFunction(prefix, options) {\n    return lively.vm.completions.getCompletions(code => evalFunction(code, options), prefix)\n      .then(result => ({isEvalResult: true, completions: result.completions, prefix: result.startLetters}));\n  }\n  return '+
("eval"===c?"evalFunction":"keysOfObjectFunction")+"(arg, options)\n    .catch(err => ({isEvalResult: true, isError: true, value: String(err.stack || err)}));\n})();\n"};uA.prototype.runEval=function(c,k){var d=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(h){return h.return(d.remoteEval(d.sourceForRemote("eval",c,k),k))})};uA.prototype.keysOfObject=function(c,k){var d=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(h){return h.return(d.remoteEval(d.sourceForRemote("keysOfObject",
c,k),k))})};uA.prototype.remoteEval=function(c,k){var d=this,h,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){if(1==b.nextAddress)return b.setCatchFinallyBlocks(2),b.yield(d.basicRemoteEval(c,k),4);if(2!=b.nextAddress)return h=b.yieldResult,b.return("string"===typeof h?JSON.parse(h):h);n=b.enterCatchBlock();return b.return({isError:!0,value:"Remote eval failed: "+(h||n)})})};uA.prototype.basicRemoteEval=function(c,k){return $jscomp.asyncExecutePromiseGeneratorProgram(function(d){throw Error("Not yet implemented");
})};wk.RemoteEvalStrategy=uA;var Hw=function(c){var k=wk.RemoteEvalStrategy.call(this)||this;k.url=c||k.constructor.defaultURL;return k};$jscomp.inherits(Hw,wk.RemoteEvalStrategy);Hw.prototype.normalizeOptions=function(c){c=wk.RemoteEvalStrategy.prototype.normalizeOptions.call(this,c);return Object.assign({serverEvalURL:this.url},c,{context:null})};Hw.prototype.basicRemoteEval=function(c,k){var d=this,h;return $jscomp.asyncExecutePromiseGeneratorProgram(function(n){return 1==n.nextAddress?(k=d.normalizeOptions(k),
h="basicRemoteEval_"+(System.get("@system-env").node?"node":"web"),n.yield(d[h]({method:"POST",body:c},k.serverEvalURL),2)):n.return(n.yieldResult)})};Hw.prototype.basicRemoteEval_web=function(c,k){var d,h,n,b,e,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){switch(a.nextAddress){case 1:d=$jscomp.makeIterator(k.match(/[^:]+:\/\/[^\/]+/)||[k]);h=d.next().value;n=System.get("@system-env").worker?window.location:document.location;if(b=n.origin!==h)c.headers=Object.assign({},c.headers,
{pragma:"no-cache","cache-control":"no-cache","x-lively-proxy-request":k}),k=n.origin;a.setCatchFinallyBlocks(2);return a.yield(window.fetch(k,c),4);case 4:e=a.yieldResult;a.leaveTryBlock(3);break;case 2:throw l=a.enterCatchBlock(),Error("Cannot reach server at "+k+": "+l.message);case 3:if(!e.ok)throw Error("Server at "+k+": "+e.statusText);return a.return(e.text())}})};Hw.prototype.basicRemoteEval_node=function(c,k){var d,h,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){d=System._nodeRequire("url").parse;
h=System._nodeRequire(k.startsWith("https:")?"https":"http");n=Object.assign({method:c.method||"GET"},d(k));return b.return(new Promise(function(e,l){var a=h.request(n,function(f){f.setEncoding("utf8");var m="";f.on("data",function(r){return m+=r});f.on("end",function(){return e(m)});f.on("error",function(r){return l(r)})});a.on("error",function(f){return l(f)});a.end(c.body)}))})};$jscomp.global.Object.defineProperties(Hw,{defaultURL:{configurable:!0,enumerable:!0,get:function(){return"http://localhost:3000/lively"}}});
wk.HttpEvalStrategy=Hw;var AF=function(c,k){var d=wk.RemoteEvalStrategy.call(this)||this;d.l2lClient=c;d.targetId=k;return d};$jscomp.inherits(AF,wk.RemoteEvalStrategy);AF.prototype.basicRemoteEval=function(c,k){var d=this,h,n,b,e,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){if(1==a.nextAddress)return h=d,n=h.l2lClient,b=h.targetId,a.yield(n.sendToAndWait(b,"remote-eval",{source:c},{ackTimeout:k.ackTimeout||3500}),2);e=a.yieldResult;(l=e.data)&&l.value&&l.value.isEvalResult&&(l=
l.value);return a.return(l)})};wk.L2LEvalStrategy=AF;wk.EvalStrategy=zF;wk.EvalStrategy=zF;wk.SimpleEvalStrategy=HC;wk.SimpleEvalStrategy=HC;wk.LivelyVmEvalStrategy=tA;wk.LivelyVmEvalStrategy=tA;wk.HttpEvalStrategy=Hw;wk.HttpEvalStrategy=Hw;wk.L2LEvalStrategy=AF;wk.L2LEvalStrategy=AF;var JI=Object.freeze({__proto__:null,RemoteEvalStrategy:uA,EvalStrategy:zF,SimpleEvalStrategy:HC,LivelyVmEvalStrategy:tA,HttpEvalStrategy:Hw,L2LEvalStrategy:AF});Ha("bu",JI);var tl=lively.FreezerRuntime.recorderFor("lively.vm/index.js");
tl.runEval=Bs;tl.syncEval=Uv;tl.completions=EI;tl.completions=EI;tl.completions=EI;tl.globalEval=Upa;tl.esmEval=Vpa;tl.defaultTopLevelVarRecorderName=yF;tl.defaultTopLevelVarRecorderName=yF;tl.defaultClassToFunctionConverterName="initializeES6ClassForLively";tl.defaultClassToFunctionConverterName="initializeES6ClassForLively";tl.evalCodeTransform=au;tl.evalCodeTransform=au;tl.evalCodeTransformOfSystemRegisterSetters=rr;tl.evalCodeTransformOfSystemRegisterSetters=rr;tl.runEval=Bs;tl.runEval=Bs;tl.syncEval=
Uv;tl.syncEval=Uv;tl.evalStrategies=JI;tl.evalStrategies=JI;tl.evalStrategies=JI;var x$=Object.freeze({__proto__:null,completions:EI,defaultTopLevelVarRecorderName:yF,defaultClassToFunctionConverterName:"initializeES6ClassForLively",evalCodeTransform:au,evalCodeTransformOfSystemRegisterSetters:rr,runEval:Bs,syncEval:Uv,evalStrategies:JI});Ha("bt",x$);var gj=lively.FreezerRuntime.recorderFor("lively.classes/source-descriptors.js");gj.string=Th;gj.arr=Mf;gj.parse=Xk;gj.query=Nu;gj.runEval=Bs;gj.objMetaSym=
Symbol.for("lively-object-meta");gj.moduleSym=Symbol.for("lively-module-meta");gj.descriptorCache=new Map;var BF=function(c,k){c&&k?this.update(k,c):this.reset()};BF.prototype.reset=function(){this._sourceLocation=null;this._source="";this._ast=null;this._moduleSource="";this._declaredAndUndeclaredNames=this._moduleImports=this._moduleScope=this._moduleAst=null};BF.prototype.update=function(c,k){this._moduleSource===c&&k&&this._sourceLocation&&k.start===this._sourceLocation.start&&k.end===this._sourceLocation.end||
(this.reset(),this._moduleSource=c,this._sourceLocation=k)};BF.prototype.changeSource=function(c){var k=this.moduleSource,d=this.sourceLocation,h=d.start;d=d.end;k=k.slice(0,h)+c+k.slice(d);this.update(k,{start:h,end:h+c.length});this._source=c;return this};BF.prototype.toString=function(){var c=gj.string.truncate(this._source||"NO SOURCE",35).replace(/\n/g,"");return this.constructor.name+"("+c+")"};$jscomp.global.Object.defineProperties(BF.prototype,{sourceLocation:{configurable:!0,enumerable:!0,
get:function(){if(!this._sourceLocation)throw Error("_sourceLocation not defined");return this._sourceLocation}},moduleSource:{configurable:!0,enumerable:!0,get:function(){if(!this._moduleSource)throw Error("_moduleSource not defined!");return this._moduleSource}},moduleAst:{configurable:!0,enumerable:!0,get:function(){return this._moduleAst||(this._moduleAst=gj.parse(this.moduleSource,{withComments:!0}))}},moduleScope:{configurable:!0,enumerable:!0,get:function(){return this._moduleScope||(this._moduleScope=
gj.query.topLevelDeclsAndRefs(this.ast).scope)}},moduleImports:{configurable:!0,enumerable:!0,get:function(){return this._moduleImports||(this._moduleImports=gj.query.imports(this.moduleScope))}},ast:{configurable:!0,enumerable:!0,get:function(){if(this._ast)return this._ast;var c=gj.parse(this.source,{withComments:!0}).body[0];"ExpressionStatement"===c.type&&(c=c.expression);return this._ast=c}},source:{configurable:!0,enumerable:!0,get:function(){if(this._source)return this._source;var c=this.sourceLocation;
return this._source=this.moduleSource.slice(c.start,c.end)}},type:{configurable:!0,enumerable:!0,get:function(){return this.ast.type}},declaredAndUndeclaredNames:{configurable:!0,enumerable:!0,get:function(){if(this._declaredAndUndeclaredNames)return this._declaredAndUndeclaredNames;var c=this.ast,k=gj.query.topLevelDeclsAndRefs(this.moduleAst).declaredNames,d=gj.arr.uniq(this.moduleImports.map(function(n){return n.local})),h=gj.arr.withoutAll(k,d);c=gj.arr.withoutAll(gj.query.findGlobalVarRefs(c).map(function(n){return n.name}),
k);return this._declaredAndUndeclaredNames={declaredNames:k,declaredImports:d,localDeclaredNames:h,undeclaredNames:c}}}});gj.SourceDescriptor=BF;var Oq=function(c,k){this.obj=c;this.System=k;this.reset()};Oq.forObjectWithModuleSource=function(c,k,d){c=this.for(c,d);c.ensureSourceDescriptor(c.sourceLocation,k);return c};Oq.for=function(c,k){var d=gj.descriptorCache.get(c);d||(d=new this(c,k),gj.descriptorCache.set(c,d));return d};Oq.prototype.reset=function(){this._source="";this._ast=this._sourceLocation=
null;this._moduleSource="";this._declaredAndUndeclaredNames=this._moduleImports=this._moduleScope=this._moduleAst=null};Oq.prototype.resetIfChanged=function(){var c=this.meta.moduleSource;this._moduleSource&&c&&this._moduleSource!==c&&this.reset()};Oq.prototype.changeSourceSync=function(c){var k=this.System;this._basicChangeSource(c);this.module.changeSource(this.moduleSource,{doSave:!0});c=gj.runEval(c,{sync:!0,targetModule:this.module.id,System:k});if(c.isError)throw c.value;return this};Oq.prototype.changeSource=
function(c){var k=this,d,h;return $jscomp.asyncExecutePromiseGeneratorProgram(function(n){return 1==n.nextAddress?(d=k,h=d.module,n.yield(h.changeSourceAction(function(b){if(b!==k.moduleSource)throw Error("source of module "+h.id+" and source of "+k+" don't match");k._basicChangeSource(c);return k.moduleSource}),2)):n.return(k)})};Oq.prototype._modifiedSource=function(c){var k=this.moduleSource,d=this.sourceLocation,h=d.start;d=d.end;return{moduleSource:k.slice(0,h)+c+k.slice(d),sourceLocation:{start:h,
end:h+c.length}}};Oq.prototype._renamedSource=function(c){var k=this.ast,d=k.type,h=k.id;k=h.start;h=h.end;if("ClassDeclaration"!==d)throw Error("Don't know how to rename "+d);return this._modifiedSource(this.source.slice(0,k)+c+this.source.slice(h))};Oq.prototype._basicChangeSource=function(c){var k=this.meta,d=this._modifiedSource(c),h=d.moduleSource;d=d.sourceLocation;this.reset();this.meta=Object.assign({},k,{moduleSource:h},d);this._sourceLocation=d;this._moduleSource=h;this._source=c;return this};
Oq.prototype.toString=function(){var c=gj.string.truncate(this.source||String(this.obj),35).replace(/\n/g,"");try{var k=this.module.shortName()}catch(d){k="NO MODULE!"}return this.constructor.name+"("+c+" in "+k+")"};$jscomp.global.Object.defineProperties(Oq.prototype,{System:{configurable:!0,enumerable:!0,get:function(){return this._System||System},set:function(c){this._System=c}},module:{configurable:!0,enumerable:!0,get:function(){var c=this.obj,k=this.System;if(!c[gj.moduleSym])throw Error("runtime object of source descriptor has no module data");
var d=c[gj.moduleSym];c=d.package.name;d=d.pathInPackage;c=d.includes("://")?d:c+"/"+d;k=this.System._scripting.module(k,c);k._frozenModule||k._source||!this.moduleSource||k.setSource(this.moduleSource);return k}},meta:{configurable:!0,enumerable:!0,get:function(){var c=this.obj;if(!c[gj.objMetaSym])throw Error("runtime object of source descriptor has no lively meta data");return c[gj.objMetaSym]},set:function(c){this.obj[gj.objMetaSym]=c;c.hasOwnProperty("start")&&c.hasOwnProperty("end")&&(this._sourceLocation=
{start:c.start,end:c.end});c.hasOwnProperty("moduleSource")&&(this._moduleSource=c.moduleSource)}},sourceLocation:{configurable:!0,enumerable:!0,get:function(){this.resetIfChanged();if(this._sourceLocation)return this._sourceLocation;var c=this.meta,k=c.start;c=c.end;if(void 0===k||void 0===c)throw Error("lively meta data has no start/end");return this._sourceLocation={start:k,end:c}}},moduleSource:{configurable:!0,enumerable:!0,get:function(){this.resetIfChanged();if(this._moduleSource)return this._moduleSource;
var c=this.meta.moduleSource;if(void 0===c)throw Error("lively meta data has no moduleSource");return this._moduleSource=c}},moduleAst:{configurable:!0,enumerable:!0,get:function(){this.resetIfChanged();return this._moduleAst||(this._moduleAst=gj.parse(this.moduleSource,{withComments:!0}))}},moduleScope:{configurable:!0,enumerable:!0,get:function(){this.resetIfChanged();return this._moduleScope||(this._moduleScope=gj.query.topLevelDeclsAndRefs(this.moduleAst).scope)}},moduleImports:{configurable:!0,
enumerable:!0,get:function(){this.resetIfChanged();return this._moduleImports||(this._moduleImports=gj.query.imports(this.moduleScope))}},declaredAndUndeclaredNames:{configurable:!0,enumerable:!0,get:function(){this.resetIfChanged();if(this._declaredAndUndeclaredNames)return this._declaredAndUndeclaredNames;var c=this.ast,k=gj.query.topLevelDeclsAndRefs(this.moduleAst,{jslintGlobalComment:!0}).declaredNames,d=gj.arr.uniq(this.moduleImports.map(function(n){return n.local})),h=gj.arr.withoutAll(k,d);
c=gj.arr.withoutAll(gj.query.findGlobalVarRefs(c).map(function(n){return n.name}),k);return this._declaredAndUndeclaredNames={declaredNames:k,declaredImports:d,localDeclaredNames:h,undeclaredNames:c}}},source:{configurable:!0,enumerable:!0,get:function(){this.resetIfChanged();if(this._source)return this._source;var c=this.sourceLocation;return this._source=this.moduleSource.slice(c.start,c.end)}},ast:{configurable:!0,enumerable:!0,get:function(){this.resetIfChanged();if(this._ast)return this._ast;
var c=gj.parse(this.source,{withComments:!0}).body[0];"ExpressionStatement"===c.type&&(c=c.expression);return this._ast=c}},type:{configurable:!0,enumerable:!0,get:function(){return this.ast.type}},name:{configurable:!0,enumerable:!0,get:function(){if("ClassDeclaration"===this.type){var c=this.ast.id;return this.source.slice(c.start,c.end)}return"unknown"}}});Ha("bK",Oq);gj.RuntimeSourceDescriptor=Oq;var qf=lively.FreezerRuntime.recorderFor("lively.classes/util.js");qf.superclasses=Vv;qf.getClassHierarchy=
Qx;qf.withSuperclasses=Wv;qf.inheritsFrom=xz;qf.changeClass=yz;qf.isClass=Rx;qf.isOverridden=function(c,k){for(;c!=Object;)if(c=c[Symbol.for("lively-instance-superclass")],c.prototype.hasOwnProperty(k))return!0;return!1};qf.lexicalClassMembers=UG;qf.runtimeClassMembers=zf;qf.runtimeClassMembersInProtoChain=function(c){return qf.arr.uniq(qf.arr.flatmap(qf.arr.without(qf.withSuperclasses(c),Object),function(k){return qf.runtimeClassMembers(k)}))};qf.runtimeNonStaticMembers=function(c){var k=c.prototype,
d=qf.obj.getOwnPropertyDescriptors(k);return qf.arr.withoutAll(Object.keys(d),["constructor"]).map(function(h){var n=d[h],b="function"===typeof n.value?"method":"get"in n?"get":"set"in n?"set":"unknown";return{static:!1,name:h,value:"method"===b?n.value:"get"===b?n.get:"set"===b?n.set:null,kind:b,owner:k}})};qf.runtimeNonstaticClassMembersInProtoChain=function(c){return qf.arr.uniq(qf.arr.flatmap(qf.arr.without(qf.withSuperclasses(c),Object),function(k){return qf.runtimeNonStaticMembers(k)}))};qf.runtimeStaticClassMembers=
VG;qf.runtimeStaticClassMembersInProtoChain=WG;qf.arr=Mf;qf.obj=ng;qf.Path=Ih;qf.RuntimeSourceDescriptor=Oq;qf.superclasses=Vv;qf.superclasses=Vv;var DO=Symbol.for("lively-instance-initialize");qf.initializeSymbol=DO;qf.initializeSymbol=DO;qf.initializeSymbol=DO;var aX=Symbol.for("lively-instance-restorer");qf.instanceRestorerSymbol=aX;qf.instanceRestorerSymbol=aX;qf.instanceRestorerSymbol=aX;var EO=Symbol.for("lively-instance-superclass");qf.superclassSymbol=EO;qf.superclassSymbol=EO;qf.superclassSymbol=
EO;var FO=Symbol.for("lively-module-meta");qf.moduleMetaSymbol=FO;qf.moduleMetaSymbol=FO;qf.moduleMetaSymbol=FO;var GO=Symbol.for("lively-object-meta");qf.objMetaSymbol=GO;qf.objMetaSymbol=GO;qf.objMetaSymbol=GO;var HO=Symbol.for("lively-klass-changes-subscriber");qf.moduleSubscribeToToplevelChangesSym=HO;qf.moduleSubscribeToToplevelChangesSym=HO;qf.moduleSubscribeToToplevelChangesSym=HO;qf.getClassHierarchy=Qx;qf.getClassHierarchy=Qx;qf.withSuperclasses=Wv;qf.withSuperclasses=Wv;qf.inheritsFrom=
xz;qf.inheritsFrom=xz;qf.changeClass=yz;qf.changeClass=yz;qf.isClass=Rx;qf.isClass=Rx;qf.lexicalClassMembers=UG;qf.lexicalClassMembers=UG;qf.runtimeClassMembers=zf;qf.runtimeClassMembers=zf;qf.runtimeStaticClassMembers=VG;qf.runtimeStaticClassMembers=VG;qf.runtimeStaticClassMembersInProtoChain=WG;qf.runtimeStaticClassMembersInProtoChain=WG;var bX=Ha("bL",function(){function c(e){return e.replace(b,function(l,a){return a[a.length-1].toUpperCase()})}var k="break case catch class const continue debugger default delete do else enum export extends false finally for function if implements import in instanceof interface let new null package private protected public return static switch super this throw true try typeof undefined var void while with yield".split(" "),
d={"~":"_tilde_","`":"_backtick_","!":"_exclamationmark_","@":"_at_","#":"_pound_","%":"_percent_","^":"_carat_","&":"_amperstand_","*":"_asterisk_","(":"_leftparen_",")":"_rightparen_","+":"_plus_","=":"_equals_","{":"_leftcurly_","}":"_rightcurly_","[":"_leftsquare_","]":"_rightsquare_","|":"_pipe_","-":"_dash_","\\":"_backslash_",'"':"_doublequote_","'":"_singlequote_",":":"_colon_",";":"_semicolon_","<":"_leftangle_",">":"_rightangle_",",":"_comma_",".":"_period_","?":"_questionmark_","/":"_forwardslash_",
"\t":"_tab_","\n":"_newline_","\r":"_carriagereturn_"},h={0:"_zero_",1:"_one_",2:"_two_",3:"_three_",4:"_four_",5:"_five_",6:"_siz_",7:"_seven_",8:"_eight_",9:"_nine_"},n=function(e){return d[e]||"ASCII_"+e.charCodeAt(0)},b=/([\s-]+.)/g;return function(e){e=c(e);return 0<=k.indexOf(e)?e:0===e.length?"_null_":e.replace(/^\d/,function(l){return h[l]}).replace(/[^\w\$_]/g,n)}}());qf.toJsIdentifier=bX;qf.toJsIdentifier=bX;qf.toJsIdentifier=bX;var lj=lively.FreezerRuntime.recorderFor("lively.classes/properties.js");
lj.hasManagedProperties=function(c){return c.hasOwnProperty(lj.defaultPropertiesKey)};lj.prepareClassForManagedPropertiesAfterCreation=bE;lj.prepareClassForProperties=function(c,k,d){lj.ensurePropertyInitializer(c);var h=k.valueStoreProperty,n=k.defaultGetter,b=k.defaultSetter,e=c.prototype;Object.keys(d).forEach(function(l){var a=d[l],f=e.hasOwnProperty(l)&&e.__lookupGetter__(l);if(!f||f._wasGenerated)f=a.get||"function"===typeof n&&function(){return n.call(this,l)}||function(){return this[h][l]},
f._wasGenerated=!0,e.__defineGetter__(l,f);f=e.hasOwnProperty(l)&&e.__lookupSetter__(l);if(!f||f._wasGenerated)if(a.hasOwnProperty("set")||!a.readOnly)a=a.set||"function"===typeof b&&function(m){b.call(this,l,m)}||function(m){this[h][l]=m},a._wasGenerated=!0,e.__defineSetter__(l,a)})};lj.ensurePropertyInitializer=function(c){Object.defineProperty(c.prototype,"propertiesAndPropertySettings",{enumerable:!1,configurable:!0,writable:!0,value:function(){var k=this.constructor,d=k[lj.propertiesAndSettingsCacheSym];
if(d)if(d.classHierarchy!=lj.getClassHierarchy(k)){var h=lj.propertiesAndSettingsInHierarchyOf(k);d=h.properties;h=h.propertySettings;k[lj.propertiesAndSettingsCacheSym]={properties:d,propertySettings:h,order:lj.obj.sortKeysWithBeforeAndAfterConstraints(d),classHierarchy:lj.getClassHierarchy(k)};lj.prepareClassForProperties(k,h,d)}else return d;return k[lj.propertiesAndSettingsCacheSym]||lj.propertiesAndSettingsInHierarchyOf(k)}});Object.defineProperty(c.prototype,"initializeProperties",{enumerable:!1,
configurable:!0,writable:!0,value:function(k){var d=this.propertiesAndPropertySettings();lj.prepareInstanceForProperties(this,d.propertySettings,d.properties,k,d.order);return this}})};lj.propertiesAndSettingsInHierarchyOf=function(c){for(var k=Object.assign({},lj.defaultPropertySettings),d={},h=lj.obj.valuesInPropertyHierarchy(c,"propertySettings"),n=lj.obj.valuesInPropertyHierarchy(c,"properties"),b=0;b<h.length;b++){var e=h[b];e&&"object"===typeof e&&Object.assign(k,e)}for(b=0;b<n.length;b++)if(h=
n[b],"object"!==typeof h)console.error("[initializeProperties] "+c+" encountered property declaration that is not a JS object: "+h);else for(var l in h)d.hasOwnProperty(l)?Object.assign(d[l],h[l]):d[l]=h[l];return{properties:d,propertySettings:k}};lj.prepareInstanceForProperties=function(c,k,d,h,n){var b=k.valueStoreProperty;n=n||lj.obj.sortKeysWithBeforeAndAfterConstraints(d);k=[];var e={};c.hasOwnProperty(b)||(c[b]={});for(var l=0;l<n.length;l++){var a=n[l],f=d[a],m=f.derived,r=!!f.foldable,v=f.hasOwnProperty("defaultValue")?
f.defaultValue:void 0;Array.isArray(v)&&(v=v.slice());m||r||(c[b][a]=v);var x=void 0;f.hasOwnProperty("initialize")?(x=e[a]={initialize:v},k.push(a)):m&&void 0!==v?(x=e[a]={derived:v},k.push(a)):r&&void 0!==v&&(x=e[a]={folded:v},k.push(a));h&&a in h&&(f.readOnly?console.warn("Trying to initialize read-only property "+a+" in "+c+", skipping setting value"):(x||(x=e[a]={},k.push(a)),x.value=h[a]))}for(l=0;l<k.length;l++)h=k[l],n=e[h],b=n.hasOwnProperty("value"),n.hasOwnProperty("initialize")?(d[h].initialize.call(c,
b?n.value:n.initialize),b&&(c[h]=n.value)):n.hasOwnProperty("derived")?c[h]=b?n.value:n.derived:n.hasOwnProperty("folded")?c[h]=b?n.value:n.folded:b&&(c[h]=n.value)};lj.obj=ng;lj.getClassHierarchy=Qx;lj.defaultPropertiesSettingKey="propertySettings";lj.defaultPropertiesKey="properties";lj.defaultInstanceInitializerMethod="initializeProperties";lj.propertiesAndSettingsCacheSym=Symbol.for("lively.classes-properties-and-settings");lj.defaultPropertySettings={defaultSetter:null,defaultGetter:null,valueStoreProperty:"_state"};
lj.prepareClassForManagedPropertiesAfterCreation=bE;lj.prepareClassForManagedPropertiesAfterCreation=bE;var eg=lively.FreezerRuntime.recorderFor("lively.classes/runtime.js");eg.adoptObject=du;eg.setSuperclass=zz;eg.installValueDescriptor=function(c,k,d){d=Object.assign(d,eg.defaultPropertyDescriptorForValue);d.value.displayName=d.key;if(d.needsDeclaringClass){var h=d.value.originalFunction||d.value;d.value=Object.assign(function(){return h.call.apply(h,[this,k].concat($jscomp.arrayFromIterable(arguments)))},
{originalFunction:h,toString:function(){return h.toString()},displayName:d.key})}Object.defineProperty(c,d.key,d)};eg.installGetterSetterDescriptor=function(c,k){k=Object.assign(k,eg.defaultPropertyDescriptorForGetterSetter);Object.defineProperty(c,k.key,k)};eg.installMethods=function(c,k,d){d&&d.forEach(function(e){e.value?eg.installValueDescriptor(c,c,e):eg.installGetterSetterDescriptor(c,e)});k&&k.forEach(function(e){e.value?eg.installValueDescriptor(c.prototype,c,e):eg.installGetterSetterDescriptor(c.prototype,
e)});c.prototype[eg.initializeSymbol]?Object.getOwnPropertySymbols(c.prototype).includes(eg.initializeSymbol)&&c.prototype[eg.initializeSymbol].isDefaultInitializer&&c[eg.superclassSymbol].prototype[eg.initializeSymbol]&&delete c.prototype[eg.initializeSymbol]:(Object.defineProperty(c.prototype,eg.initializeSymbol,{enumerable:!1,configurable:!0,writable:!0,value:function(){}}),c.prototype[eg.initializeSymbol].isDefaultInitializer=!0,c.prototype[eg.initializeSymbol].displayName="lively-initialize");
k=k.map(function(e){return e.key}).concat(["constructor","arguments","caller"]);for(var h=Object.getOwnPropertyNames(c.prototype),n=0;n<h.length;n++){var b=h[n];k.includes(b)||delete c.prototype[b]}d=d.map(function(e){return e.key}).concat(["length","name","prototype","arguments","caller"]);k=Object.getOwnPropertyNames(c);for(h=0;h<k.length;h++)n=k[h],d.includes(n)||delete c[n]};eg.ensureInitializeStub=function(c){c===Object||c.prototype[eg.initializeSymbol]||(Object.defineProperty(c.prototype,eg.initializeSymbol,
{enumerable:!1,configurable:!0,writable:!0,value:function(){c.apply(this,arguments)}}),c.prototype[eg.initializeSymbol].displayName="lively-initialize-stub")};eg.initializeClass=Pb;eg.prepareClassForManagedPropertiesAfterCreation=bE;eg.superclassSymbol=EO;eg.moduleSubscribeToToplevelChangesSym=HO;eg.moduleMetaSymbol=FO;eg.objMetaSymbol=GO;eg.initializeSymbol=DO;eg.constructorArgMatcher=/\([^\\)]*\)/;eg.defaultPropertyDescriptorForGetterSetter={enumerable:!1,configurable:!0};eg.defaultPropertyDescriptorForValue=
{enumerable:!1,configurable:!0,writable:!0};var IO="function"===typeof Object.setPrototypeOf?function(c,k){return Object.setPrototypeOf(c,k)}:function(c,k){return c.__proto__=k};eg.setPrototypeOf=IO;eg.setPrototypeOf=IO;eg.setPrototypeOf=IO;eg.adoptObject=du;eg.adoptObject=du;eg.setSuperclass=zz;eg.setSuperclass=zz;eg.initializeClass=Pb;eg.initializeClass=Pb;eg.initializeClass._get=function n(k,d,h){null===k&&(k=Function.prototype);var b=Object.getOwnPropertyDescriptor(k,d);if(void 0===b)return k=
Object.getPrototypeOf(k),null===k?void 0:n(k,d,h);if("value"in b)return b.value;d=b.get;return void 0===d?void 0:d.call(h)};eg.initializeClass._set=function e(d,h,n,b){var l=Object.getOwnPropertyDescriptor(d,h);void 0===l?(d=Object.getPrototypeOf(d),null!==d&&e(d,h,n,b)):"value"in l&&l.writable?l.value=n:(h=l.set,void 0!==h&&h.call(b,n));return n};var CF=Object.freeze({__proto__:null,setPrototypeOf:IO,adoptObject:du,setSuperclass:zz,initializeClass:Pb}),Dd=lively.FreezerRuntime.recorderFor("lively.graphics/color-parser.js");
Dd.parse=Az;Dd.Color=function(d){this._listeners={};this.subscribe(Dd.Events.RGB_UPDATED,this._RGBUpdated);this.subscribe(Dd.Events.HEX_UPDATED,this._HEXUpdated);this.subscribe(Dd.Events.HSL_UPDATED,this._HSLUpdated);this.subscribe(Dd.Events.HSV_UPDATED,this._HSVUpdated);this.subscribe(Dd.Events.INT_UPDATED,this._INTUpdated);this.parse(d)};Dd.parse=Az;Dd.parse=Az;Dd.Events={RGB_UPDATED:"RGBUpdated",HSL_UPDATED:"HSLUpdated",HSV_UPDATED:"HSVUpdated",HEX_UPDATED:"HexUpdated",INT_UPDATED:"IntUpdated",
UPDATED:"updated"};Dd.namedColors={transparent:"rgba(0, 0, 0, 0)",aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",
darkgray:"#A9A9A9",darkgrey:"#A9A9A9",darkgreen:"#006400",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",
fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",lightgreen:"#90EE90",
lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370D8",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",
mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#D87093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",
sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE"};Dd.absround=function(d){return.5+d<<0};Dd.hue2rgb=function(d,h,n){0>n&&(n+=1);1<n&&--n;return n<1/6?d+6*(h-d)*n:.5>n?h:n<2/3?d+(h-d)*(2/3-n)*6:d};Dd.p2v=function(d){return Dd.isPercent.test(d)?
Dd.absround(2.55*parseInt(d)):d};Dd.isHex=/^#?([0-9a-f]{3}|[0-9a-f]{6})$/i;Dd.isHSL=/^hsla?\((\d{1,3}?),\s*(\d{1,3}%),\s*(\d{1,3}%)(,\s*[01]?\.?\d*)?\)$/;Dd.isRGB=/^rgba?\((\d{1,3}%?),\s*(\d{1,3}%?),\s*(\d{1,3}%?)(,\s*[01]?\.?\d*)?\)$/;Dd.isPercent=/^\d+(\.\d+)*%$/;Dd.hexBit=/([0-9a-f])/gi;Dd.leadHex=/^#/;Dd.matchHSL=/^hsla?\((\d{1,3}),\s*(\d{1,3})%,\s*(\d{1,3})%(,\s*([01]?\.?\d*))?\)$/;Dd.matchRGB=/^rgba?\((\d{1,3}%?),\s*(\d{1,3}%?),\s*(\d{1,3}%?)(,\s*([01]?\.?\d*))?\)$/;Dd.Color.prototype._decimal=
0;Dd.Color.prototype._hex="#000000";Dd.Color.prototype._red=0;Dd.Color.prototype._green=0;Dd.Color.prototype._blue=0;Dd.Color.prototype._hue=0;Dd.Color.prototype._saturation=0;Dd.Color.prototype._lightness=0;Dd.Color.prototype._brightness=0;Dd.Color.prototype._alpha=1;Dd.Color.prototype.parse=function(d){if("undefined"===typeof d)return this;switch(!0){case isFinite(d):this.decimal(d);this.output=Dd.Color.INT;break;case d instanceof Dd.Color:this.copy(d);break;default:switch(typeof d){case "object":this.set(d);
break;case "string":switch(!0){case Dd.namedColors.hasOwnProperty(d):d=Dd.namedColors[d];d=d.replace(Dd.leadHex,"");this.decimal(parseInt(d,16));break;case Dd.isHex.test(d):d=d.replace(Dd.leadHex,"");3==d.length&&(d=d.replace(Dd.hexBit,"$1$1"));this.decimal(parseInt(d,16));break;case Dd.isRGB.test(d):d=d.match(Dd.matchRGB);this.red(Dd.p2v(d[1]));this.green(Dd.p2v(d[2]));this.blue(Dd.p2v(d[3]));this.alpha(parseFloat(d[5])||1);this.output=(Dd.isPercent.test(d[1])?2:1)+(d[5]?2:0);break;case Dd.isHSL.test(d):d=
d.match(Dd.matchHSL),this.hue(parseInt(d[1])),this.saturation(parseInt(d[2])),this.lightness(parseInt(d[3])),this.alpha(parseFloat(d[5])||1),this.output=d[5]?6:5}}}return this};Dd.Color.prototype.clone=function(){return new Dd.Color(this.decimal())};Dd.Color.prototype.copy=function(d){this.set(d.decimal());return this};Dd.Color.prototype.set=function(d,h){if(1==arguments.length)if("object"===typeof d)for(var n in d){if("function"===typeof this[n])this[n](d[n])}else isFinite(d)&&this.decimal(d);else if("function"===
typeof this[d])this[d](h);return this};Dd.Color.prototype.interpolate=function(d,h){d instanceof Dd.Color||(d=new Dd.Color(d));this._red=Dd.absround(+this._red+(d._red-this._red)*h);this._green=Dd.absround(+this._green+(d._green-this._green)*h);this._blue=Dd.absround(+this._blue+(d._blue-this._blue)*h);this._alpha=Dd.absround(+this._alpha+(d._alpha-this._alpha)*h);this.broadcast(Dd.Events.RGB_UPDATED);this.broadcast(Dd.Events.UPDATED);return this};Dd.Color.prototype._RGB2HSL=function(){var d=this._red/
255,h=this._green/255,n=this._blue/255,b=Math.max(d,h,n),e=Math.min(d,h,n),l=(b+e)/2;if(b==e)this._saturation=this._hue=0;else{var a=b-e;e=a/(.5>=l?b+e:2-b-e);this._hue=Dd.absround((b==d?(h-n)/a+(h<n?6:0):b==h?(n-d)/a+2:(d-h)/a+4)/6*360);this._saturation=Dd.absround(100*e)}this._lightness=Dd.absround(100*l);this._brightness=Dd.absround(100*b)};Dd.Color.prototype._HSL2RGB=function(){var d=this._hue/360,h=this._saturation/100,n=this._lightness/100;h=.5>n?n*(1+h):n+h-n*h;n=2*n-h;this._red=Dd.absround(255*
Dd.hue2rgb(n,h,d+1/3));this._green=Dd.absround(255*Dd.hue2rgb(n,h,d));this._blue=Dd.absround(255*Dd.hue2rgb(n,h,d-1/3))};Dd.Color.prototype._HSV2RGB=function(){var d=this._hue/360,h=this._saturation/100,n=this._brightness/100,b=0,e=0,l=0,a=Math.floor(6*d),f=6*d-a;d=n*(1-h);var m=n*(1-f*h);h=n*(1-(1-f)*h);switch(a%6){case 0:b=n;e=h;l=d;break;case 1:b=m;e=n;l=d;break;case 2:b=d;e=n;l=h;break;case 3:b=d;e=m;l=n;break;case 4:b=h;e=d;l=n;break;case 5:b=n,e=d,l=m}this._red=Dd.absround(255*b);this._green=
Dd.absround(255*e);this._blue=Dd.absround(255*l)};Dd.Color.prototype._INT2HEX=function(){var d=this._decimal.toString(16);d="000000".substr(0,6-d.length)+d;this._hex="#"+d.toUpperCase()};Dd.Color.prototype._INT2RGB=function(){this._red=this._decimal>>16;this._green=this._decimal>>8&255;this._blue=this._decimal&255};Dd.Color.prototype._HEX2INT=function(){this._decimal=parseInt(this._hex,16)};Dd.Color.prototype._RGB2INT=function(){this._decimal=this._red<<16|this._green<<8&65535|this._blue};Dd.Color.prototype._RGBUpdated=
function(){this._RGB2INT();this._RGB2HSL();this._INT2HEX()};Dd.Color.prototype._HSLUpdated=function(){this._HSL2RGB();this._RGB2INT();this._INT2HEX()};Dd.Color.prototype._HSVUpdated=function(){this._HSV2RGB();this._RGB2INT();this._INT2HEX()};Dd.Color.prototype._HEXUpdated=function(){this._HEX2INT();this._INT2RGB();this._RGB2HSL()};Dd.Color.prototype._INTUpdated=function(){this._INT2RGB();this._RGB2HSL();this._INT2HEX()};Dd.Color.prototype._broadcastUpdate=function(){this.broadcast(Dd.Events.UPDATED)};
Dd.Color.prototype.decimal=function(d){return this._handle("_decimal",d,Dd.Events.INT_UPDATED)};Dd.Color.prototype.hex=function(d){return this._handle("_hex",d,Dd.Events.HEX_UPDATED)};Dd.Color.prototype.red=function(d){return this._handle("_red",d,Dd.Events.RGB_UPDATED)};Dd.Color.prototype.green=function(d){return this._handle("_green",d,Dd.Events.RGB_UPDATED)};Dd.Color.prototype.blue=function(d){return this._handle("_blue",d,Dd.Events.RGB_UPDATED)};Dd.Color.prototype.hue=function(d){return this._handle("_hue",
d,Dd.Events.HSL_UPDATED)};Dd.Color.prototype.saturation=function(d){return this._handle("_saturation",d,Dd.Events.HSL_UPDATED)};Dd.Color.prototype.lightness=function(d){return this._handle("_lightness",d,Dd.Events.HSL_UPDATED)};Dd.Color.prototype.brightness=function(d){return this._handle("_brightness",d,Dd.Events.HSV_UPDATED)};Dd.Color.prototype.alpha=function(d){return this._handle("_alpha",d)};Dd.Color.prototype._handle=function(d,h,n){"undefined"!==typeof this[d]&&"undefined"!==typeof h&&(h!=
this[d]&&(this[d]=h,n&&this.broadcast(n)),this.broadcast(Dd.Events.UPDATED));return this[d]};Dd.Color.prototype.getHex=function(){return this._hex};Dd.Color.prototype.getRGB=function(){return"rgb("+[Dd.absround(this._red),Dd.absround(this._green),Dd.absround(this._blue)].join(", ")+")"};Dd.Color.prototype.getPRGB=function(){return"rgb("+[Dd.absround(100*this._red/255)+"%",Dd.absround(100*this._green/255)+"%",Dd.absround(100*this._blue/255)+"%"].join(", ")+")"};Dd.Color.prototype.getRGBA=function(){return"rgba("+
[Dd.absround(this._red),Dd.absround(this._green),Dd.absround(this._blue),this._alpha].join(", ")+")"};Dd.Color.prototype.getPRGBA=function(){return"rgba("+[Dd.absround(100*this._red/255)+"%",Dd.absround(100*this._green/255)+"%",Dd.absround(100*this._blue/255)+"%",this._alpha].join(", ")+")"};Dd.Color.prototype.getHSL=function(){return"hsl("+[Dd.absround(this._hue),Dd.absround(this._saturation)+"%",Dd.absround(this._lightness)+"%"].join(", ")+")"};Dd.Color.prototype.getHSLA=function(){return"hsla("+
[Dd.absround(this._hue),Dd.absround(this._saturation)+"%",Dd.absround(this._lightness)+"%",this._alpha].join(", ")+")"};Dd.Color.prototype.format=function(d){var h={r:this._red,g:this._green,b:this._blue,h:this._hue,s:this._saturation,l:this._lightness,v:this._brightness,a:this._alpha,x:this._hex,d:this._decimal},n;for(n in h)d=d.split("%"+n+"%").join(h[n]);return d};Dd.Color.prototype.output=0;Dd.Color.HEX=0;Dd.Color.RGB=1;Dd.Color.PRGB=2;Dd.Color.RGBA=3;Dd.Color.PRGBA=4;Dd.Color.HSL=5;Dd.Color.HSLA=
6;Dd.Color.INT=7;Dd.Color.prototype.toString=function(){switch(this.output){case 1:return this.getRGB();case 2:return this.getPRGB();case 3:return this.getRGBA();case 4:return this.getPRGBA();case 5:return this.getHSL();case 6:return this.getHSLA();case 7:return this._decimal}return this.getHex()};Dd.Color.prototype._listeners=null;Dd.Color.prototype._isSubscribed=function(d){return null!=this._listeners[d]};Dd.Color.prototype.subscribe=function(d,h){this._isSubscribed(d)||(this._listeners[d]=[]);
this._listeners[d].push(h)};Dd.Color.prototype.unsubscribe=function(d,h){if(this._isSubscribed(d))for(var n=this._listeners[d],b=0,e=n.length;b<e;b++)if(n[b]===h)return n.splice(b,1),this.unsubscribe(d,h)};Dd.Color.prototype.broadcast=function(d,h){if(this._isSubscribed(d)){d=this._listeners[d];for(var n=d.length,b=0;b<n;b++)d[b].apply(this,h)}};Dd.Color.prototype.tween=function(d,h){h instanceof Dd.Color||(h=new Dd.Color(h));var n=+new Date,b=this;this.broadcast("tweenStart");var e=setInterval(function(){var l=
Math.min(1,(+new Date-n)/d);b.interpolate(h,l);b.broadcast("tweenProgress");1==l&&(clearInterval(e),b.broadcast("tweenComplete"))},20);return e};Dd.Color.prototype.bind=function(d,h){var n=this;this.subscribe("updated",function(){d[h]=n.toString()})};Dd.Color.random=function(){return new Dd.Color(Dd.absround(16777215*Math.random()))};Dd.Color.bind=function(d,h){var n=new Dd.Color(d[h]);n.bind(d,h);return n};var Yi=lively.FreezerRuntime.recorderFor("lively.graphics/convert-css-length.js");Yi.parseUnit=
function(d,h){h||(h=[0,""]);d=String(d);var n=parseFloat(d,10);h[0]=n;h[1]=d.match(/[\d.\-\+]*\s*(.*)/)[1]||"";return h};Yi.unit=function(d){return Yi.parseUnit(d)[1]};Yi.unitLess=function(d){return Yi.parseUnit(d)[0]};Yi.genericCssLengthParser=Vl;Yi.cssLengthToPixels=Wl;Yi.baseFontSize="16px";if(System.get("@system-env").browser)try{Yi.newBaseFontSize=Yi.genericCssLengthParser(Yi.baseFontSize)(window.getComputedStyle(document.body).fontSize),Yi.newBaseFontSize&&"NaN"!==Yi.newBaseFontSize.slice(0,
3)&&(Yi.baseFontSize=Yi.newBaseFontSize)}catch(d){}Yi.genericCssLengthParser=Vl;Yi.genericCssLengthParser=Vl;var cX=Yi.genericCssLengthParser(Yi.baseFontSize);Yi.parseCssLength=cX;Yi.parseCssLength=cX;Yi.parseCssLength=cX;Yi.cssLengthToPixels=Wl;Yi.cssLengthToPixels=Wl;var Vd=lively.FreezerRuntime.recorderFor("lively.graphics/geometry-2d.js");Vd.rect=dj;Vd.pt=Ei;Vd.num=Um;Vd.string=Th;Vd.grid=tF;Vd.cssLengthToPixels=Wl;var Dg=function(d,h){this.x=d||0;this.y=h||0};Dg.ensure=function(d){return d instanceof
Vd.Point?d:new Vd.Point(d.x,d.y)};Dg.polar=function(d,h){return new Vd.Point(d*Math.cos(h),d*Math.sin(h))};Dg.random=function(d){return new Vd.Point(Vd.num.randomSmallerInteger(d.x),Vd.num.randomSmallerInteger(d.y))};Dg.fromLiteral=function(d){return Vd.pt(d.x,d.y)};Dg.fromTuple=function(d){return Vd.pt(d[0],d[1])};Dg.prototype.getX=function(){return this.x};Dg.prototype.getY=function(){return this.y};Dg.prototype.toFixed=function(d){return new Vd.Point(this.x.toFixed(d),this.y.toFixed(d))};Dg.prototype.addPt=
function(d){return new Vd.Point(this.x+d.x,this.y+d.y)};Dg.prototype.addXY=function(d,h){return new Vd.Point(this.x+d,this.y+h)};Dg.prototype.midPt=function(d){return new Vd.Point((this.x+d.x)/2,(this.y+d.y)/2)};Dg.prototype.subPt=function(d){return new Vd.Point(this.x-d.x,this.y-d.y)};Dg.prototype.subXY=function(d,h){return new Vd.Point(this.x-d,this.y-h)};Dg.prototype.scaleBy=function(d,h){return new Vd.Point(this.x*d,this.y*(h||d))};Dg.prototype.scaleByPt=function(d){return new Vd.Point(this.x*
d.x,this.y*d.y)};Dg.prototype.negated=function(){return new Vd.Point(-this.x,-this.y)};Dg.prototype.inverted=function(){return new Vd.Point(1/this.x,1/this.y)};Dg.prototype.invertedSafely=function(){return new Vd.Point(this.x&&1/this.x,this.y&&1/this.y)};Dg.prototype.lessPt=function(d){return this.x<d.x&&this.y<d.y};Dg.prototype.leqPt=function(d){return this.x<=d.x&&this.y<=d.y};Dg.prototype.eqPt=function(d){return this.x==d.x&&this.y==d.y};Dg.prototype.equals=function(d){return this.x==d.x&&this.y==
d.y};Dg.prototype.withX=function(d){return Vd.pt(d,this.y)};Dg.prototype.withY=function(d){return Vd.pt(this.x,d)};Dg.prototype.copy=function(){return new Vd.Point(this.x,this.y)};Dg.prototype.minPt=function(d,h){h||(h=new Vd.Point(0,0));h.x=Math.min(this.x,d.x);h.y=Math.min(this.y,d.y);return h};Dg.prototype.maxPt=function(d,h){h||(h=new Vd.Point(0,0));h.x=Math.max(this.x,d.x);h.y=Math.max(this.y,d.y);return h};Dg.prototype.random=function(){return Vd.Point.random(this)};Dg.prototype.normalized=
function(){var d=this.r();return Vd.pt(this.x/d,this.y/d)};Dg.prototype.fastNormalized=function(){var d=this.fastR();return Vd.pt(this.x/d,this.y/d)};Dg.prototype.dotProduct=function(d){return this.x*d.x+this.y*d.y};Dg.prototype.matrixTransform=function(d,h){var n=d.a*this.x+d.c*this.y+d.e;d=d.b*this.x+d.d*this.y+d.f;return h?Object.assign(h,{x:n,y:d}):Vd.pt(n,d)};Dg.prototype.matrixTransformDirection=function(d,h){var n=d.a*this.x+d.c*this.y;d=d.b*this.x+d.d*this.y;return h?Object.assign(h,{x:n,
y:d}):Vd.pt(n,d)};Dg.prototype.griddedBy=function(d){return Vd.pt(this.x-this.x%d.x,this.y-this.y%d.y)};Dg.prototype.roundTo=function(d){return new Vd.Point(Vd.num.roundTo(this.x,d),Vd.num.roundTo(this.y,d))};Dg.prototype.dist=function(d){var h=this.x-d.x;d=this.y-d.y;return Math.sqrt(h*h+d*d)};Dg.prototype.distSquared=function(d){var h=this.x-d.x;d=this.y-d.y;return h*h+d*d};Dg.prototype.nearestPointOnLineBetween=function(d,h){if(d.x==h.x)return Vd.pt(d.x,this.y);if(d.y==h.y)return Vd.pt(this.x,
d.y);var n=d.x;d=d.y;var b=h.x-n;h=h.y-d;var e=((this.y-d)/b+(this.x-n)/h)/(b/h+h/b);return Vd.pt(n+e*b,d+e*h)};Dg.prototype.interpolate=function(d,h,n){return void 0===n||n?Vd.pt(Vd.num.interpolate(d,this.x,h.x),Vd.num.interpolate(d,this.y,h.y)):Vd.Point.polar(Vd.num.interpolate(d,this.r(),h.r()),Vd.num.interpolate(d,this.theta(),h.theta()))};Dg.prototype.r=function(){return Math.sqrt(this.x*this.x+this.y*this.y)};Dg.prototype.fastR=function(){for(var d=this.x*this.x+this.y*this.y,h=17,n=0;6>n;n++)h=
(h+d/h)/2;return h};Dg.prototype.theta=function(){return Math.atan2(this.y,this.x)};Dg.prototype.asRectangle=function(){return new Vd.Rectangle(this.x,this.y,0,0)};Dg.prototype.extent=function(d){return new Vd.Rectangle(this.x,this.y,d.x,d.y)};Dg.prototype.extentAsRectangle=function(){return new Vd.Rectangle(0,0,this.x,this.y)};Dg.prototype.lineTo=function(d){return new Vd.Line(this,d)};Dg.prototype.toTuple=function(){return[this.x,this.y]};Dg.prototype.toLiteral=function(){return{x:this.x,y:this.y}};
Dg.prototype.toString=function(d){return void 0===d||d?Vd.string.format("pt(%1.f,%1.f)",this.x,this.y):Vd.string.format("pt(%10.d,%10.d)",this.x,this.y)};Dg.prototype.inspect=function(){return JSON.stringify(this)};Dg.prototype.__serialize__=function(){return{__expr__:this.toString(!1),bindings:{"lively.graphics/geometry-2d.js":["pt"]}}};$jscomp.global.Object.defineProperties(Dg.prototype,{isPoint:{configurable:!0,enumerable:!0,get:function(){return!0}}});Ha("ar",Dg);Vd.Point=Dg;var He=function(d,
h,n,b){this.x=d||0;this.y=h||0;this.width=n||0;this.height=b||0};He.fromAny=function(d,h){return Vd.rect(d.minPt(h),d.maxPt(h))};He.fromLiteral=function(d){return new Vd.Rectangle(d.x,d.y,d.width,d.height)};He.fromTuple=function(d){return new Vd.Rectangle(d[0],d[1],d[2],d[3])};He.unionPts=function(d){for(var h=d[0],n=d[0],b=1;b<d.length;b++)h=h.minPt(d[b]),n=n.maxPt(d[b]);return Vd.rect(h,n)};He.ensure=function(d){return d instanceof Vd.Rectangle?d:new Vd.Rectangle(d.x,d.y,d.width,d.height)};He.fromElement=
function(d){if("function"===typeof d.getBoundingClientRect){var h=d.getBoundingClientRect();return Vd.rect(h.left,h.top,h.width,h.height)}if("http://www.w3.org/1999/xhtml"==d.namespaceURI){h=Vd.cssLengthToPixels(d.style.left||"0px");var n=Vd.cssLengthToPixels(d.style.top||"0px"),b=Vd.cssLengthToPixels(d.style.width||"0px");d=Vd.cssLengthToPixels(d.style.hieght||"0px");return new Vd.Rectangle(h,n,b,d)}if("http://www.w3.org/2000/svg"==d.namespaceURI)return new Vd.Rectangle(d.x.baseVal.value,d.y.baseVal.value,
d.width.baseVal.value,d.height.baseVal.value);throw Error("Cannot create Rectangle from "+d);};He.inset=function(d,h,n,b){void 0===h&&(h=d);void 0===n&&(n=d);void 0===b&&(b=h);return new Vd.Rectangle(d,h,n-d,b-h)};He.prototype.getX=function(){return this.x};He.prototype.getY=function(){return this.y};He.prototype.getWidth=function(){return this.width};He.prototype.getHeight=function(){return this.height};He.prototype.copy=function(){return new Vd.Rectangle(this.x,this.y,this.width,this.height)};He.prototype.toFixed=
function(d){return new Vd.Rectangle(this.x.toFixed(d),this.y.toFixed(d),this.width.toFixed(d),this.height.toFixed(d))};He.prototype.withWidth=function(d){return new Vd.Rectangle(this.x,this.y,d,this.height)};He.prototype.withHeight=function(d){return new Vd.Rectangle(this.x,this.y,this.width,d)};He.prototype.withX=function(d){return new Vd.Rectangle(d,this.y,this.width,this.height)};He.prototype.withY=function(d){return new Vd.Rectangle(this.x,d,this.width,this.height)};He.prototype.withExtent=function(d){return new Vd.Rectangle(this.x,
this.y,d.x,d.y)};He.prototype.withTopLeft=function(d){return Vd.Rectangle.fromAny(d,this.bottomRight())};He.prototype.withTopRight=function(d){return Vd.Rectangle.fromAny(this.bottomLeft(),d)};He.prototype.withBottomRight=function(d){return Vd.Rectangle.fromAny(d,this.topLeft())};He.prototype.withBottomLeft=function(d){return Vd.Rectangle.fromAny(d,this.topRight())};He.prototype.withLeftCenter=function(d){return new Vd.Rectangle(d.x,this.y,this.width+(this.x-d.x),this.height)};He.prototype.withRightCenter=
function(d){return new Vd.Rectangle(this.x,this.y,d.x-this.x,this.height)};He.prototype.withTopCenter=function(d){return new Vd.Rectangle(this.x,d.y,this.width,this.height+(this.y-d.y))};He.prototype.withBottomCenter=function(d){return new Vd.Rectangle(this.x,this.y,this.width,d.y-this.y)};He.prototype.withCenter=function(d){return new Vd.Rectangle(d.x-this.width/2,d.y-this.height/2,this.width,this.height)};He.prototype.insetBy=function(d){return new Vd.Rectangle(this.x+d,this.y+d,this.width-2*d,
this.height-2*d)};He.prototype.insetByPt=function(d){return new Vd.Rectangle(this.x+d.x,this.y+d.y,this.width-2*d.x,this.height-2*d.y)};He.prototype.grid=function(d,h){var n=this.width/h,b=this.height/d;return Vd.grid.mapCreate(d,h,function(e,l){return new Vd.Rectangle(n*l,b*e,n,b)})};He.prototype.divide=function(d){var h=this;return d.map(function(n){return Vd.rect(h.x+h.width*n.x,h.y+h.height*n.y,h.width*n.width,h.height*n.height)})};He.prototype.toTuple=function(){return[this.x,this.y,this.width,
this.height]};He.prototype.lineTo=function(d){var h=this.center(),n=d.center();n=h.lineTo(n);h=this.lineIntersection(n)[0];d=d.lineIntersection(n)[0];return h&&d&&h.lineTo(d)};He.prototype.equals=function(d){return d?this.x==d.x&&this.y==d.y&&this.width==d.width&&this.height==d.height:!1};He.prototype.inspect=function(){return JSON.stringify(this)};He.prototype.topLeft=function(){return new Vd.Point(this.x,this.y)};He.prototype.topRight=function(){return new Vd.Point(this.maxX(),this.y)};He.prototype.bottomRight=
function(){return new Vd.Point(this.maxX(),this.maxY())};He.prototype.bottomLeft=function(){return new Vd.Point(this.x,this.maxY())};He.prototype.leftCenter=function(){return new Vd.Point(this.x,this.center().y)};He.prototype.rightCenter=function(){return new Vd.Point(this.maxX(),this.center().y)};He.prototype.topCenter=function(){return new Vd.Point(this.center().x,this.y)};He.prototype.bottomCenter=function(){return new Vd.Point(this.center().x,this.maxY())};He.prototype.extent=function(){return new Vd.Point(this.width,
this.height)};He.prototype.center=function(){return new Vd.Point(this.x+this.width/2,this.y+this.height/2)};He.prototype.topEdge=function(){return new Vd.Line(this.topLeft(),this.topRight())};He.prototype.bottomEdge=function(){return new Vd.Line(this.bottomLeft(),this.bottomRight())};He.prototype.leftEdge=function(){return new Vd.Line(this.topLeft(),this.bottomLeft())};He.prototype.rightEdge=function(){return new Vd.Line(this.topRight(),this.bottomRight())};He.prototype.edges=function(){return[this.topEdge(),
this.rightEdge(),this.bottomEdge(),this.leftEdge()]};He.prototype.allPoints=function(){for(var d=this.x,h=this.y,n=this.width,b=this.height,e=[],l=h;l<h+b;l++)for(var a=d;a<d+n;a++)e.push(Vd.pt(a,l));return e};He.prototype.isNonEmpty=function(d){return 0<this.width&&0<this.height};He.prototype.containsRect=function(d){return this.x<=d.x&&this.y<=d.y&&d.maxX()<=this.maxX()&&d.maxY()<=this.maxY()};He.prototype.intersects=function(d){return this.intersection(d).isNonEmpty()};He.prototype.containsPoint=
function(d){return this.x<=d.x&&d.x<=this.x+this.width&&this.y<=d.y&&d.y<=this.y+this.height};He.prototype.translatedBy=function(d){return new Vd.Rectangle(this.x+d.x,this.y+d.y,this.width,this.height)};He.prototype.scaleByRect=function(d){return new Vd.Rectangle(this.x+d.x*this.width,this.y+d.y*this.height,d.width*this.width,d.height*this.height)};He.prototype.scaleRectIn=function(d){return new Vd.Rectangle((this.x-d.x)/d.width,(this.y-d.y)/d.height,this.width/d.width,this.height/d.height)};He.prototype.scaleRectTo=
function(d){var h,n;this.width>this.height?n=this.width:h=this.height;d=n?d.width/n:d.height/h;return this.withExtent(this.extent().scaleBy(d)).withCenter(this.center())};He.prototype.expandBy=function(d){return this.insetBy(0-d)};He.prototype.translateForInclusion=function(d){var h=d.x,n=d.y,b=h+d.width,e=n+d.height;b>this.right()&&(h-=b-this.right());e>this.bottom()&&(n-=e-this.bottom());h<this.x&&(h=this.x);n<this.y&&(n=this.y);return Vd.rect(h,n,d.width,d.height)};He.prototype.transformRectForInclusion=
function(d){var h=this.topLeft().maxPt(d.topLeft());d=h.addPt(d.extent());d=this.bottomRight().minPt(d);return Vd.rect(h,d)};He.prototype.insetByRect=function(d){return new Vd.Rectangle(this.x+d.left(),this.y+d.top(),this.width-(d.left()+d.right()),this.height-(d.top()+d.bottom()))};He.prototype.outsetByRect=function(d){return new Vd.Rectangle(this.x-d.left(),this.y-d.top(),this.width+(d.left()+d.right()),this.height+(d.top()+d.bottom()))};He.prototype.interpolate=function(d,h){var n=this.topLeft(),
b=this.bottomRight(),e=h.topLeft();h=h.bottomRight();return Vd.Rectangle.fromAny(n.interpolate(d,e),b.interpolate(d,h))};He.prototype.intersection=function(d){var h=Math.max(this.x,d.x),n=Math.max(this.y,d.y);return new Vd.Rectangle(h,n,Math.min(this.x+this.width,d.x+d.width)-h,Math.min(this.y+this.height,d.y+d.height)-n)};He.prototype.union=function(d){return Vd.rect(this.topLeft().minPt(d.topLeft()),this.bottomRight().maxPt(d.bottomRight()))};He.prototype.lineIntersection=function(d){return this.edges().map(function(h){return h.intersection(d)}).filter(function(h){return!!h})};
He.prototype.dist=function(d){var h=this.closestPointToPt(d.center());d=d.closestPointToPt(h);return h.dist(d)};He.prototype.relativeToAbsPoint=function(d){return new Vd.Point(this.x+this.width*d.x,this.y+this.height*d.y)};He.prototype.closestPointToPt=function(d){return Vd.pt(Math.min(Math.max(this.x,d.x),this.maxX()),Math.min(Math.max(this.y,d.y),this.maxY()))};He.prototype.maxX=function(){return this.x+this.width};He.prototype.maxY=function(){return this.y+this.height};He.prototype.realWidth=function(){return 0>
this.x?-this.x+this.width:this.width};He.prototype.realHeight=function(){return 0>this.y?-this.y+this.height:this.height};He.prototype.area=function(){return(0>this.width&&0>this.height?-1:1)*this.width*this.height};He.prototype.randomPoint=function(){return Vd.Point.random(Vd.pt(this.width,this.height)).addPt(this.topLeft())};He.prototype.constrainPt=function(d){return d.maxPt(this.topLeft()).minPt(this.bottomRight())};He.prototype.left=function(){return this.x};He.prototype.right=function(){return this.maxX()};
He.prototype.top=function(){return this.y};He.prototype.bottom=function(){return this.maxY()};He.prototype.toInsetTuple=function(){return[this.left(),this.top(),this.right(),this.bottom()]};He.prototype.toAttributeValue=function(d){d=.01;var h=[this.left()];this.top()===this.bottom()&&this.left()===this.right()?this.top()===this.left()&&h.push(this.top()):h=h.concat([this.top(),this.right(),this.bottom()]);return h.invoke("roundTo",d||.01)};He.prototype.toLiteral=function(){return{x:this.x,y:this.y,
width:this.width,height:this.height}};He.prototype.partNamed=function(d){return this[d].call(this)};He.prototype.withPartNamed=function(d,h){return this[this.setterName(d)].call(this,h)};He.prototype.setterName=function(d){return"with"+d[0].toUpperCase()+d.slice(1)};He.prototype.partNameNear=function(d,h,n){d=this.partNameNearest(d,h);return h.dist(this.partNamed(d))<n?d:null};He.prototype.partNameNearest=function(d,h){for(var n=1E99,b,e=0;e<d.length;e++){b=d[e];var l=h.dist(this.partNamed(b));if(l<
n){var a=b;n=l}}return a};He.prototype.toString=function(){return Vd.string.format("rect(%s,%s,%s,%s)",this.x,this.y,this.width,this.height)};He.prototype.__serialize__=function(){return{__expr__:this.toString(),bindings:{"lively.graphics/geometry-2d.js":["rect"]}}};$jscomp.global.Object.defineProperties(He.prototype,{corners:{configurable:!0,enumerable:!0,get:function(){return["topLeft","topRight","bottomRight","bottomLeft"]}},sides:{configurable:!0,enumerable:!0,get:function(){return["leftCenter",
"rightCenter","topCenter","bottomCenter"]}},isRectangle:{configurable:!0,enumerable:!0,get:function(){return!0}}});Ha("a1",He);Vd.Rectangle=He;var kl=function(d,h,n){d?d instanceof Vd.Point?(h=h||0,void 0===n&&(n=Vd.pt(1,1)),this.a=this.ensureNumber(n.x*Math.cos(h)),this.b=this.ensureNumber(n.y*Math.sin(h)),this.c=this.ensureNumber(n.x*-Math.sin(h)),this.d=this.ensureNumber(n.y*Math.cos(h)),this.e=this.ensureNumber(d.x),this.f=this.ensureNumber(d.y),1<this.a&&(this.a=Math.round(this.a*Math.pow(10,
2))/Math.pow(10,2)),1<this.d&&(this.d=Math.round(this.d*Math.pow(10,2))/Math.pow(10,2))):this.fromMatrix(d):(this.a=this.d=1,this.b=this.c=this.e=this.f=0)};kl.prototype.copy=function(){return new Vd.Transform(this)};kl.prototype.fromMatrix=function(d){this.a=this.ensureNumber(d.a);this.b=this.ensureNumber(d.b);this.c=this.ensureNumber(d.c);this.d=this.ensureNumber(d.d);this.e=this.ensureNumber(d.e);this.f=this.ensureNumber(d.f)};kl.prototype.getRotation=function(){var d=Vd.num.toDegrees(Math.atan2(-this.c,
this.a));return Math.abs(d)<this.eps?0:d};kl.prototype.getScale=function(){var d=this.a,h=this.c;d=Math.sqrt(d*d+h*h);return Math.abs(d-1)<this.eps?1:d};kl.prototype.getScalePoint=function(){var d=this.a,h=this.b,n=this.c,b=this.d,e=Math.atan2(-n,d);return Vd.pt(Math.sqrt(d*d+n*n),Math.abs(h)>Math.abs(b)?h/Math.sin(e):b/Math.cos(e))};kl.prototype.getTranslation=function(){return Vd.pt(this.e,this.f)};kl.prototype.isTranslation=function(){return 1==this.a&&0==this.b&&0==this.c&&1==this.d};kl.prototype.toSVGAttributeValue=
function(){var d=this.getTranslation();d="translate("+d.x+","+d.y+")";var h=this.getRotation(),n=this.getScalePoint();0!=h&&(d+=" rotate("+this.getRotation()+")");if(1!=n.x||1!=n.y)d+=" scale("+n.x+","+n.y+")";return d};kl.prototype.toCSSValue=function(d){var h="",n=this.getTranslation();h+="translate("+n.x.toFixed(2)+"px,"+n.y.toFixed(2)+"px)";if(d){n=d.width/2;var b=d.height/2;h+=" translate("+n.toFixed(2)+"px,"+b.toFixed(2)+"px)"}0!=this.getRotation()&&(h+=" rotate("+this.getRotation().toFixed(2)+
"deg)");d&&(n=d.width/2,b=d.height/2,h+=" translate("+(-1*n).toFixed(2)+"px,"+(-1*b).toFixed(2)+"px)");d=this.getScalePoint();if(1!=d.x||1!=d.y)h+=" scale("+d.x.toFixed(2)+","+d.y.toFixed(2)+")";return h};kl.prototype.toCSSTransformString=function(){var d=this.getRotation(),h=this.getScale();return"translate("+this.e+"px,"+this.f+"px) rotate("+d+"deg) scale("+h+","+h+")"};kl.prototype.toString=function(){return this.toCSSTransformString()};kl.prototype.toMatrix=function(){return this.copy()};kl.prototype.transformPoint=
function(d,h){return d.matrixTransform(this,h)};kl.prototype.transformDirection=function(d,h){return d.matrixTransformDirection(this,h)};kl.prototype.matrixTransformForMinMax=function(d,h,n){var b=this.a*d.x+this.c*d.y+this.e;d=this.b*d.x+this.d*d.y+this.f;b>n.x&&(n.x=b);d>n.y&&(n.y=d);b<h.x&&(h.x=b);d<h.y&&(h.y=d)};kl.prototype.transformRectToRect=function(d){var h=Vd.pt(Infinity,Infinity),n=Vd.pt(-Infinity,-Infinity);this.matrixTransformForMinMax(d.topLeft(),h,n);this.matrixTransformForMinMax(d.bottomRight(),
h,n);this.isTranslation()||(this.matrixTransformForMinMax(d.topRight(),h,n),this.matrixTransformForMinMax(d.bottomLeft(),h,n));return Vd.rect(h,n)};kl.prototype.preConcatenate=function(d){var h=this.matrix_||this.toMatrix();this.a=d.a*h.a+d.c*h.b;this.b=d.b*h.a+d.d*h.b;this.c=d.a*h.c+d.c*h.d;this.d=d.b*h.c+d.d*h.d;this.e=d.a*h.e+d.c*h.f+d.e;this.f=d.b*h.e+d.d*h.f+d.f;this.matrix_=this.toMatrix();return this};kl.prototype.invert=function(){var d=this.copy(),h=1/(d.a*d.d-d.c*d.b);this.a=d.d*h;this.b=
-d.b*h;this.c=-d.c*h;this.d=d.a*h;this.e=(d.c*d.f-d.e*d.d)*h;this.f=-(d.a*d.f-d.b*d.e)*h;return this};kl.prototype.inverse=function(){var d=this.matrix_||this.toMatrix();d=new this.constructor(d);d.invert();return d};kl.prototype.ensureNumber=function(d){if(isNaN(d))throw Error("not a number");return d};kl.prototype.__serialize__=function(){return{__expr__:"new Transform({a: "+this.a+", b: "+this.b+", c: "+this.c+", d: "+this.d+", e: "+this.e+", f: "+this.f+"})",bindings:{"lively.graphics/geometry-2d.js":["Transform"]}}};
$jscomp.global.Object.defineProperties(kl.prototype,{exp:{configurable:!0,enumerable:!0,get:function(){return 1E-4}},isTransform:{configurable:!0,enumerable:!0,get:function(){return!0}}});Vd.Transform=kl;var yn=function(d,h){this.start=d;this.end=h};yn.fromCoords=function(d,h,n,b){return new Vd.Line(Vd.pt(d,h),Vd.pt(n,b))};yn.prototype.withStart=function(d){return new Vd.Line(d,this.end)};yn.prototype.withEnd=function(d){return new Vd.Line(this.start,d)};yn.prototype.sampleN=function(d){d=d||10;for(var h=
this.end.subPt(this.start).scaleBy(1/d),n=[],b=0;b<=d;b++)n.push(this.start.addPt(h.scaleBy(b)));return n};yn.prototype.sample=function(d){return this.sampleN(this.length()/d)};yn.prototype.length=function(){return this.start.dist(this.end)};yn.prototype.equals=function(d){return d?this.start.eqPt(d.start)&&this.end.eqPt(d.end):!1};yn.prototype.distanceFromLine=function(d){var h=this.start.x,n=this.start.y,b=this.end.x,e=this.end.y;return Math.abs((e-n)*d.x-(b-h)*d.y+b*n-e*h)/Math.sqrt(Math.pow(e-
n,2)+Math.pow(b-h,2))};yn.prototype.includesPoint=function(d,h){var n=this.start.x,b=this.start.y,e=this.end.x,l=this.end.y,a=d.x;d=d.y;var f=0===(e-n)*(d-b)-(a-n)*(l-b);if(h||!f)return f;h=Math.min(b,l);f=Math.max(n,e);b=Math.max(b,l);return Math.min(n,e)<=a&&a<=f&&h<=d&&d<=b};yn.prototype.intersection=function(d,h){var n=this.start,b=this.end,e=d.start,l=d.end;d=n.x;n=n.y;var a=b.x;b=b.y;var f=e.x;e=e.y;var m=l.x;l=l.y;var r=((d*b-n*a)*(f-m)-(d-a)*(f*l-e*m))/((d-a)*(e-l)-(n-b)*(f-m)),v=((d*b-n*
a)*(e-l)-(n-b)*(f*l-e*m))/((d-a)*(e-l)-(n-b)*(f-m));return Infinity!==r&&Infinity!==v&&(h||Vd.num.between(r,d,a,1E-4)&&Vd.num.between(v,n,b,1E-4)&&Vd.num.between(r,f,m,1E-4)&&Vd.num.between(v,e,l,1E-4))?Vd.pt(r,v):null};yn.prototype.perpendicularLine=function(d,h,n){d=void 0===d?0:d;h=void 0===h?1:h;n=void 0===n?"cc":n;var b=this.start,e=this.toVector();d=b.addPt(e.scaleBy(d));n=e.theta()+("cc"===n?-1:1)*Math.PI/2;return new Vd.Line(d,d.addPt(Vd.Point.polar(h,n)))};yn.prototype.toVector=function(){return this.end.subPt(this.start)};
yn.prototype.toString=function(){return Vd.string.format("Line((%s,%s), (%s,%s))",this.start.x,this.start.y,this.end.x,this.end.y)};yn.prototype.__serialize__=function(){return{__expr__:"Line.fromCoords("+this.start.x+", "+this.start.y+", "+this.end.x+", "+this.end.y+")",bindings:{"lively.graphics/geometry-2d.js":["Line"]}}};$jscomp.global.Object.defineProperties(yn.prototype,{isLine:{configurable:!0,enumerable:!0,get:function(){return!0}}});Vd.Line=yn;Vd.rect=dj;Vd.rect=dj;Vd.pt=Ei;Vd.pt=Ei;var Wpa=
Object.freeze({__proto__:null,Point:Dg,Rectangle:He,Transform:kl,Line:yn,rect:dj,pt:Ei}),Qd=lively.FreezerRuntime.recorderFor("lively.graphics/color.js");Qd.floor=function(d){return Math.floor(255.99*d)};Qd.pad=function(d,h,n){n=void 0===n?Qd.arr.last:n;return[].concat($jscomp.arrayFromIterable(d),$jscomp.arrayFromIterable(Array(Math.max(h-d.length,0)).fill(n(d))))};Qd.num=Um;Qd.obj=ng;Qd.arr=Mf;Qd.parse=Az;Qd.Rectangle=He;Qd.rect=dj;Qd.pt=Ei;Qd.Point=Dg;Qd.rgbaRegex=/\s*rgba?\s*\(\s*(\d+)(%?)\s*,\s*(\d+)(%?)\s*,\s*(\d+)(%?)\s*(?:,\s*([0-9\.]+)\s*)?\)\s*/;
var DF=function(){};DF.prototype.offsets=function(){return null};DF.prototype.stepCount=function(){return 0};DF.prototype.stepSize=function(){return 0};DF.prototype.chord=function(d){var h=this,n=d.hue,b=d.saturation,e=d.brightness;return(this.offsets()||Qd.arr.range(0,this.steps()).map(function(l){return l*h.stepSize()})).map(function(l){return Qd.Color.hsb(n+l%360,b,e)})};$jscomp.global.Object.defineProperties(DF.prototype,{name:{configurable:!0,enumerable:!0,get:function(){return"Color Harmony"}}});
Qd.ColorHarmony=DF;var vA=function(){return Qd.ColorHarmony.apply(this,arguments)||this};$jscomp.inherits(vA,Qd.ColorHarmony);vA.prototype.steps=function(){return 1};vA.prototype.stepSize=function(){return 180};$jscomp.global.Object.defineProperties(vA.prototype,{name:{configurable:!0,enumerable:!0,get:function(){return"Complement"}}});Ha("al",vA);Qd.Complementary=vA;var wA=function(){return Qd.ColorHarmony.apply(this,arguments)||this};$jscomp.inherits(wA,Qd.ColorHarmony);wA.prototype.steps=function(){return 2};
wA.prototype.stepSize=function(){return 120};$jscomp.global.Object.defineProperties(wA.prototype,{name:{configurable:!0,enumerable:!0,get:function(){return"Triadic"}}});Ha("am",wA);Qd.Triadic=wA;var IC=function(){return Qd.ColorHarmony.apply(this,arguments)||this};$jscomp.inherits(IC,Qd.ColorHarmony);IC.prototype.offsets=function(){return[0,60,180,240]};$jscomp.global.Object.defineProperties(IC.prototype,{name:{configurable:!0,enumerable:!0,get:function(){return"Tetradic"}}});Ha("an",IC);Qd.Tetradic=
IC;var xA=function(){return Qd.ColorHarmony.apply(this,arguments)||this};$jscomp.inherits(xA,Qd.ColorHarmony);xA.prototype.steps=function(){return 3};xA.prototype.stepSize=function(){return 90};$jscomp.global.Object.defineProperties(xA.prototype,{name:{configurable:!0,enumerable:!0,get:function(){return"Quadratic"}}});Ha("ao",xA);Qd.Quadratic=xA;var yA=function(){return Qd.ColorHarmony.apply(this,arguments)||this};$jscomp.inherits(yA,Qd.ColorHarmony);yA.prototype.steps=function(){return 5};yA.prototype.offsets=
function(){return[-60,-30,0,30,60]};$jscomp.global.Object.defineProperties(yA.prototype,{name:{configurable:!0,enumerable:!0,get:function(){return"Analogous"}}});Ha("ap",yA);Qd.Analogous=yA;var JC=function(){return Qd.ColorHarmony.apply(this,arguments)||this};$jscomp.inherits(JC,Qd.ColorHarmony);JC.prototype.offsets=function(){return[-30,-15,0,15,30]};$jscomp.global.Object.defineProperties(JC.prototype,{name:{configurable:!0,enumerable:!0,get:function(){return"Neutral"}}});Ha("aq",JC);Qd.Neutral=
JC;var xg=function(d,h,n,b){this.r=d||0;this.g=h||0;this.b=n||0;this.a=b||(0===b?0:1)};xg.random=function(d,h){void 0===d&&(d=0);void 0===h&&(h=255);return Qd.Color.rgb(Qd.num.random(d,h),Qd.num.random(d,h),Qd.num.random(d,h))};xg.hsb=function(d,h,n){if(0==h)return new Qd.Color(n,n,n);var b=d%360/60;d=Math.floor(b);var e=b-d;b=(1-h)*n;var l=(1-h*e)*n;h=(1-h*(1-e))*n;switch(d){case 0:return new Qd.Color(n,h,b);case 1:return new Qd.Color(l,n,b);case 2:return new Qd.Color(b,n,h);case 3:return new Qd.Color(b,
l,n);case 4:return new Qd.Color(h,b,n);case 5:return new Qd.Color(n,b,l);default:return new Qd.Color(0,0,0)}};xg.wheel=function(d){return Qd.Color.wheelHsb(void 0===d?10:d,0,.9,.7)};xg.wheelHsb=function(d,h,n,b){for(var e=Array(d),l=360/Math.max(d,1),a=0;a<d;a++)e[a]=Qd.Color.hsb(h+a*l,n,b);return e};xg.rgb=function(d,h,n){return new Qd.Color(d/255,h/255,n/255)};xg.rgbHex=function(d){return(d=this.parseHex(d))&&0<=d[0]&&0<=d[1]&&0<=d[2]?new Qd.Color(d[0],d[1],d[2]):null};xg.rgba=function(d,h,n,b){return new Qd.Color(d/
255,h/255,n/255,b)};xg.fromLiteral=function(d){return new Qd.Color(d.r,d.g,d.b,d.a)};xg.fromTuple=function(d){return new Qd.Color(d[0],d[1],d[2],d[3])};xg.fromTuple8Bit=function(d){return new Qd.Color(d[0]/255,d[1]/255,d[2]/255,d[3]/255)};xg.fromString=function(d){return d&&"none"!==d?this.fromTuple(this.parse(d)):null};xg.parse=function(d){return d&&"none"!==d?(d=Qd.parse(d),[d.red,d.green,d.blue,d.alpha]):null};xg.parseRGB=function(d){var h=d.match(this.rgbaRegex);if(h){d=parseInt(h[1])/(h[2]?100:
255);var n=parseInt(h[3])/(h[4]?100:255),b=parseInt(h[5])/(h[6]?100:255);h=h[7]?parseFloat(h[7]):1;return[d,n,b,h]}return null};xg.parseHex=function(d){var h;var n="";for(h=0;h<d.length;h++){var b=d[h].toLowerCase();if("a"==b||"b"==b||"c"==b||"d"==b||"e"==b||"f"==b||"0"==b||"1"==b||"2"==b||"3"==b||"4"==b||"5"==b||"6"==b||"7"==b||"8"==b||"9"==b)n+=b}if(6==n.length)h=n.substring(0,2),d=n.substring(2,4),n=n.substring(4,6);else if(3==n.length)h=n.substring(0,1),h+=h,d=n.substring(1,2),d+=d,n=n.substring(2,
3),n+=n;else return null;h=parseInt(h,16)/255;d=parseInt(d,16)/255;n=parseInt(n,16)/255;return[h,d,n]};xg.prototype.grayValue=function(){return(this.r+this.g+this.b)/3};xg.prototype.equals=function(d){return d?this.r===d.r&&this.g===d.g&&this.b===d.b&&this.a===d.a:!1};xg.prototype.darker=function(d){var h=this.mixedWith(Qd.Color.black,.5);return 1<d?h.darker(d-1):h};xg.prototype.lighter=function(d){if(0==d)return this;var h=this.mixedWith(Qd.Color.white,.5);return 1<d?h.lighter(d-1):h};xg.prototype.interpolate=
function(d,h){if(h.isGradient)return h.interpolate(1-d,this);h=Qd.obj.isArray(h)?h:h.toTuple();return Qd.Color.fromTuple(this.toTuple().map(function(n,b){return Qd.num.interpolate(d,n,h[b])}))};xg.prototype.toString=function(){return 1===this.a?"rgb("+Qd.floor(this.r)+","+Qd.floor(this.g)+","+Qd.floor(this.b)+")":this.toRGBAString()};xg.prototype.toRGBAString=function(){return"rgba("+Math.floor(255.99*this.r)+","+Math.floor(255.99*this.g)+","+Math.floor(255.99*this.b)+","+this.a+")"};xg.prototype.toHexString=
function(){function d(h){for(;2>h.length;)h="0"+h;return h}return d(Math.floor(255.99*this.r).toString(16))+d(Math.floor(255.99*this.g).toString(16))+d(Math.floor(255.99*this.b).toString(16))};xg.prototype.toTuple=function(){return[this.r,this.g,this.b,this.a]};xg.prototype.toTuple8Bit=function(){return[255*this.r,255*this.g,255*this.b,255*this.a]};xg.prototype.toHSB=function(){var d=Math.max(this.r,this.g,this.b),h=Math.min(this.r,this.g,this.b),n;d==h?n=0:d==this.r?n=(this.g-this.b)/(d-h)*60:d==
this.g?n=60*(2+(this.b-this.r)/(d-h)):d==this.b&&(n=60*(4+(this.r-this.g)/(d-h)));return[(n+360)%360,0==d?0:(d-h)/d,d]};xg.prototype.withA=function(d){return new Qd.Color(this.r,this.g,this.b,d)};xg.prototype.mixedWith=function(d,h){var n=1-h;return new Qd.Color(this.r*h+d.r*n,this.g*h+d.g*n,this.b*h+d.b*n,this.a*h+d.a*n)};xg.prototype.invert=function(){return Qd.Color.rgb(255*(1-this.r),255*(1-this.g),255*(1-this.b))};xg.prototype.toCSSString=function(){return this.toRGBAString()};xg.prototype.__serialize__=
function(){return{__expr__:"Color."+this.toString(),bindings:{"lively.graphics/color.js":["Color"]}}};xg.prototype.toJSExpr=function(){return"Color."+(this.name||this.toString())};$jscomp.global.Object.defineProperties(xg.prototype,{isColor:{configurable:!0,enumerable:!0,get:function(){return!0}},name:{configurable:!0,enumerable:!0,get:function(){var d=this,h=Qd.Color.named;return Object.keys(h).find(function(n){return h[n].equals(d)})}}});$jscomp.global.Object.defineProperties(xg,{rgbaRegex:{configurable:!0,
enumerable:!0,get:function(){return Qd.rgbaRegex}},named:{configurable:!0,enumerable:!0,get:function(){return this._named?this._named:this._named={black:new Qd.Color(0,0,0),almostBlack:Qd.Color.rgb(64,64,64),white:new Qd.Color(1,1,1),gray:new Qd.Color(.8,.8,.8),red:new Qd.Color(.8,0,0),green:new Qd.Color(0,.8,0),yellow:new Qd.Color(.8,.8,0),blue:new Qd.Color(0,0,.8),purple:new Qd.Color(.5,0,.5),magenta:new Qd.Color(1,0,1),pink:Qd.Color.rgb(255,30,153),turquoise:Qd.Color.rgb(0,240,255),tangerine:Qd.Color.rgb(242,
133,0),orange:Qd.Color.rgb(255,153,0),cyan:Qd.Color.rgb(0,255,255),brown:Qd.Color.rgb(182,67,0),limeGreen:Qd.Color.rgb(51,255,0),darkGray:Qd.Color.rgb(102,102,102),lightGray:Qd.Color.rgb(230,230,230),veryLightGray:Qd.Color.rgb(243,243,243),transparent:Qd.Color.rgba(0,0,0,0),lively:Qd.Color.rgb(245,124,0)}}}});Ha("C",xg);Qd.Color=xg;Object.assign(Qd.Color,Qd.Color.named);var xy=function(d){this.stops=d?d.map(function(h){return h}):[]};xy.create=function(d){var h=[],n;for(n in d)h.push({offset:Number(n),
color:d[n]});return new this({stops:h})};xy.parse=function(d){return d.startsWith("radial-gradient")?Qd.RadialGradient.parse(d):d.startsWith("linear-gradient")?Qd.LinearGradient.parse(d):Qd.Color.fromTuple(Qd.Color.parse(d))};xy.prototype.equals=function(d){return d&&d.isGradient?this.toString()==d.toString():!1};xy.prototype.getStopsLighter=function(d){return Qd.arr.collect(this.stops,function(h){return{offset:h.offset,color:h.color.lighter(d)}})};xy.prototype.getStopsDarker=function(d){return Qd.arr.collect(this.stops,
function(h){return{offset:h.offset,color:h.color.darker(d)}})};xy.prototype.interpolateStops=function(d,h){var n=Qd.pad(this.stops,h.length);h=Qd.pad(h,this.stops.length);var b=[],e;for(e=0;e<n.length;e++){var l=n[e];var a=l.color;var f=l.offset;var m=h[e];l=m.color;m=m.offset;b.push({color:a.interpolate(d,l),offset:Qd.num.interpolate(d,f,m)})}return b};xy.prototype.__serialize__=function(){return{__expr__:this.toJSExpr(),bindings:{"lively.graphics/color.js":["Color","RadialGradient","LinearGradient"],
"lively.graphics/geometry-2d.js":["pt","rect"]}}};$jscomp.global.Object.defineProperties(xy.prototype,{isGradient:{configurable:!0,enumerable:!0,get:function(){return!0}}});Qd.Gradient=xy;var zn=function(d){var h=void 0===d?{}:d;d=h.vector;h=Qd.Gradient.call(this,h.stops)||this;h.vector=d;return h};$jscomp.inherits(zn,Qd.Gradient);zn.parse=function(d){d.match(/\((.*)\)/)[1].split(",")};zn.prototype.angleToRect=function(d){return Qd.Point.polar(1,d).extentAsRectangle().withCenter(Qd.pt(.5,.5))};zn.prototype.vectorAsAngle=
function(){return this.vector.extent().theta()};zn.prototype.toString=function(){return this.toCSSString()};zn.prototype.lighter=function(d){return new this.constructor({stops:this.getStopsLighter(d),vector:this.vector})};zn.prototype.darker=function(d){return new this.constructor({stops:this.getStopsDarker(d),vector:this.vector})};zn.prototype.interpolate=function(d,h,n){n=void 0===n?{width:1E3,height:1E3}:n;h.isColor&&(h=new Qd.LinearGradient({vector:this.vector,stops:this.stops.map(function(b){return{color:h,
offset:b.offset}})}));if("radialGradient"==h.type){if(.5>d)return new Qd.LinearGradient({vector:this.vector.interpolate(d,Qd.rect(0,0,0,1)),stops:this.interpolateStops(d,h.stops.map(function(b,e){return{color:b.color,offset:1}}))});if(.5<=d)return new Qd.RadialGradient({stops:this.interpolateStops(d,h.stops),focus:Qd.pt(.5,0).interpolate(d,h.focus),bounds:Qd.rect(0,0,100*n.width,2*n.height).interpolate(d,h.bounds)})}return new Qd.LinearGradient({stops:this.interpolateStops(d,h.stops),vector:this.vector.interpolate(d,
h.vector)})};zn.prototype.toCSSString=function(){var d="linear-gradient("+(Qd.num.toDegrees(this.vectorAsAngle())+90+"deg,")+this.stops.map(function(h){return h.color.toRGBAString()+" "+((100*h.offset).toFixed()+"%")}).join(",");return d+")"};zn.prototype.toJSExpr=function(){return"new LinearGradient({stops: ["+this.stops.map(function(d){return"{offset: "+d.offset+", color: "+d.color.toJSExpr()+"}"}).join(", ")+"], vector: "+this.vector+"})"};$jscomp.global.Object.defineProperties(zn.prototype,{type:{configurable:!0,
enumerable:!0,get:function(){return"linearGradient"}},vectors:{configurable:!0,enumerable:!0,get:function(){return{northsouth:Qd.rect(Qd.pt(0,0),Qd.pt(0,1)),northeast:Qd.rect(Qd.pt(1,0),Qd.pt(0,1)),westeast:Qd.rect(Qd.pt(1,0),Qd.pt(0,0)),southeast:Qd.rect(Qd.pt(1,1),Qd.pt(0,0)),southnorth:Qd.rect(Qd.pt(0,1),Qd.pt(0,0)),southwest:Qd.rect(Qd.pt(0,1),Qd.pt(1,0)),eastwest:Qd.rect(Qd.pt(0,0),Qd.pt(1,0)),northwest:Qd.rect(Qd.pt(0,0),Qd.pt(1,1))}}},vector:{configurable:!0,enumerable:!0,get:function(){return this._vector},
set:function(d){this._vector=d?"string"===typeof d?this.vectors[d.toLowerCase()]:"number"===typeof d?this.angleToRect(d):d:this.vectors.northsouth}}});Ha("aS",zn);Qd.LinearGradient=zn;var Qp=function(d){var h=void 0===d?{}:d;d=h.focus;var n=h.bounds;h=Qd.Gradient.call(this,h.stops)||this;h.focus=d||Qd.pt(.5,.5);h.bounds=n||new Qd.Rectangle(0,0,20,20);return h};$jscomp.inherits(Qp,Qd.Gradient);Qp.parse=function(d){d.match(/\((.*)\)/)[1].split(",")};Qp.prototype.toString=function(){return this.toCSSString()};
Qp.prototype.lighter=function(d){return new this.constructor({stops:this.getStopsLighter(d),focus:this.focus,bounds:this.bounds})};Qp.prototype.darker=function(){return new this.constructor({stops:this.getStopsDarker(),focus:this.focus,bounds:this.bounds})};Qp.prototype.interpolate=function(d,h,n){n=void 0===n?{height:1E3,width:1E3}:n;h.isColor&&(h=new Qd.RadialGradient({vector:this.vector,bounds:this.bounds,stops:this.stops.map(function(b){return{color:h,offset:b.offset}})}));return"linearGradient"==
h.type?h.interpolate(1-d,this,n):new Qd.RadialGradient({bounds:this.bounds.interpolate(d,h.bounds),stops:this.interpolateStops(d,h.stops),focus:this.focus.interpolate(d,h.focus)})};Qp.prototype.toCSSString=function(){var d=this.focus.scaleBy(100),h=this.bounds.extent();d="radial-gradient("+h.x/2+"px "+h.y/2+"px at "+d.x+"% "+d.y+"%";for(h=0;h<this.stops.length;h++)d+=","+this.stops[h].color.toRGBAString()+" "+((100*this.stops[h].offset).toFixed()+"%");return d+")"};Qp.prototype.toJSExpr=function(){return"new RadialGradient({stops: ["+
this.stops.map(function(d){return"{offset: "+d.offset+", color: "+d.color.toJSExpr()+"}"}).join(", ")+"], bounds: "+this.bounds+", focus: "+this.focus.toString(!1)+"})"};$jscomp.global.Object.defineProperties(Qp.prototype,{type:{configurable:!0,enumerable:!0,get:function(){return"radialGradient"}}});Ha("aU",Qp);Qd.RadialGradient=Qp;var KI=Ha("as","#1abc9c #e8f8f5 #d1f2eb #a3e4d7 #76d7c4 #48c9b0 #1abc9c #17a589 #148f77 #117864 #0e6251 #16a085 #e8f6f3 #d0ece7 #a2d9ce #73c6b6 #45b39d #16a085 #138d75 #117a65 #0e6655 #0b5345 #2ecc71 #eafaf1 #d5f5e3 #abebc6 #82e0aa #58d68d #2ecc71 #28b463 #239b56 #1d8348 #186a3b #27ae60 #e9f7ef #d4efdf #a9dfbf #7dcea0 #52be80 #27ae60 #229954 #1e8449 #196f3d #145a32 #3498db #ebf5fb #d6eaf8 #aed6f1 #85c1e9 #5dade2 #3498db #2e86c1 #2874a6 #21618c #1b4f72 #2980b9 #eaf2f8 #d4e6f1 #a9cce3 #7fb3d5 #5499c7 #2980b9 #2471a3 #1f618d #1a5276 #154360 #9b59b6 #f5eef8 #ebdef0 #d7bde2 #c39bd3 #af7ac5 #9b59b6 #884ea0 #76448a #633974 #512e5f #8e44ad #f4ecf7 #e8daef #d2b4de #bb8fce #a569bd #8e44ad #7d3c98 #6c3483 #5b2c6f #4a235a #34495e #ebedef #d6dbdf #aeb6bf #85929e #5d6d7e #34495e #2e4053 #283747 #212f3c #1b2631 #2c3e50 #eaecee #d5d8dc #abb2b9 #808b96 #566573 #2c3e50 #273746 #212f3d #1c2833 #17202a #f1c40f #fef9e7 #fcf3cf #f9e79f #f7dc6f #f4d03f #f1c40f #d4ac0d #b7950b #9a7d0a #7d6608 #f39c12 #fef5e7 #fdebd0 #fad7a0 #f8c471 #f5b041 #f39c12 #d68910 #b9770e #9c640c #7e5109 #e67e22 #fdf2e9 #fae5d3 #f5cba7 #f0b27a #eb984e #e67e22 #ca6f1e #af601a #935116 #784212 #d35400 #fbeee6 #f6ddcc #edbb99 #e59866 #dc7633 #d35400 #ba4a00 #a04000 #873600 #6e2c00 #e74c3c #fdedec #fadbd8 #f5b7b1 #f1948a #ec7063 #e74c3c #cb4335 #b03a2e #943126 #78281f #c0392b #f9ebea #f2d7d5 #e6b0aa #d98880 #cd6155 #c0392b #a93226 #922b21 #7b241c #641e16 #ecf0f1 #fdfefe #fbfcfc #f7f9f9 #f4f6f7 #f0f3f4 #ecf0f1 #d0d3d4 #b3b6b7 #979a9a #7b7d7d #bdc3c7 #f8f9f9 #f2f3f4 #e5e7e9 #d7dbdd #cacfd2 #bdc3c7 #a6acaf #909497 #797d7f #626567 #95a5a6 #f4f6f6 #eaeded #d5dbdb #bfc9ca #aab7b8 #95a5a6 #839192 #717d7e #5f6a6a #4d5656 #7f8c8d #f2f4f4 #e5e8e8 #ccd1d1 #b2babb #99a3a4 #7f8c8d #707b7c #616a6b #515a5a #424949".split(" "));
Qd.flatDesignColors=KI;Qd.flatDesignColors=KI;Qd.flatDesignColors=KI;var LI=Ha("at","#f44336 #ffebee #ffcdd2 #ef9a9a #e57373 #ef5350 #f44336 #e53935 #d32f2f #c62828 #b71c1c #ff8a80 #ff5252 #ff1744 #d50000 #e91e63 #fce4ec #f8bbd0 #f48fb1 #f06292 #ec407a #e91e63 #d81b60 #c2185b #ad1457 #880e4f #ff80ab #ff4081 #f50057 #c51162 #9c27b0 #f3e5f5 #e1bee7 #ce93d8 #ba68c8 #ab47bc #9c27b0 #8e24aa #7b1fa2 #6a1b9a #4a148c #ea80fc #e040fb #d500f9 #aa00ff #673ab7 #ede7f6 #d1c4e9 #b39ddb #9575cd #7e57c2 #673ab7 #5e35b1 #512da8 #4527a0 #311b92 #b388ff #7c4dff #651fff #6200ea #3f51b5 #e8eaf6 #c5cae9 #9fa8da #7986cb #5c6bc0 #3f51b5 #3949ab #303f9f #283593 #1a237e #8c9eff #536dfe #3d5afe #304ffe #2196f3 #e3f2fd #bbdefb #90caf9 #64b5f6 #42a5f5 #2196f3 #1e88e5 #1976d2 #1565c0 #0d47a1 #82b1ff #448aff #2979ff #2962ff #03a9f4 #e1f5fe #b3e5fc #81d4fa #4fc3f7 #29b6f6 #03a9f4 #039be5 #0288d1 #0277bd #01579b #80d8ff #40c4ff #00b0ff #0091ea #00bcd4 #e0f7fa #b2ebf2 #80deea #4dd0e1 #26c6da #00bcd4 #00acc1 #0097a7 #00838f #006064 #84ffff #18ffff #00e5ff #00b8d4 #009688 #e0f2f1 #b2dfdb #80cbc4 #4db6ac #26a69a #009688 #00897b #00796b #00695c #004d40 #a7ffeb #64ffda #1de9b6 #00bfa5 #4caf50 #e8f5e9 #c8e6c9 #a5d6a7 #81c784 #66bb6a #4caf50 #43a047 #388e3c #2e7d32 #1b5e20 #b9f6ca #69f0ae #00e676 #00c853 #8bc34a #f1f8e9 #dcedc8 #c5e1a5 #aed581 #9ccc65 #8bc34a #7cb342 #689f38 #558b2f #33691e #ccff90 #b2ff59 #76ff03 #64dd17 #cddc39 #f9fbe7 #f0f4c3 #e6ee9c #dce775 #d4e157 #cddc39 #c0ca33 #afb42b #9e9d24 #827717 #f4ff81 #eeff41 #c6ff00 #aeea00 #ffeb3b #fffde7 #fff9c4 #fff59d #fff176 #ffee58 #ffeb3b #fdd835 #fbc02d #f9a825 #f57f17 #ffff8d #ffff00 #ffea00 #ffd600 #ffc107 #fff8e1 #ffecb3 #ffe082 #ffd54f #ffca28 #ffc107 #ffb300 #ffa000 #ff8f00 #ff6f00 #ffe57f #ffd740 #ffc400 #ffab00 #ff9800 #fff3e0 #ffe0b2 #ffcc80 #ffb74d #ffa726 #ff9800 #fb8c00 #f57c00 #ef6c00 #e65100 #ffd180 #ffab40 #ff9100 #ff6d00 #ff5722 #fbe9e7 #ffccbc #ffab91 #ff8a65 #ff7043 #ff5722 #f4511e #e64a19 #d84315 #bf360c #ff9e80 #ff6e40 #ff3d00 #dd2c00 #795548 #efebe9 #d7ccc8 #bcaaa4 #a1887f #8d6e63 #795548 #6d4c41 #5d4037 #4e342e #3e2723 #9e9e9e #fafafa #f5f5f5 #eeeeee #e0e0e0 #bdbdbd #9e9e9e #757575 #616161 #424242 #212121 #607d8b #eceff1 #cfd8dc #b0bec5 #90a4ae #78909c #607d8b #546e7a #455a64 #37474f #263238 #ffffff #000000".split(" "));
Qd.materialDesignColors=LI;Qd.materialDesignColors=LI;Qd.materialDesignColors=LI;var MI=Ha("au","ccff00 ccff33 ccff66 ccff99 ccffcc ccffff ffffff ffffcc ffff99 ffff66 ffff33 ffff00 cccc00 cccc33 cccc66 cccc99 cccccc ccccff ffccff ffcccc ffcc99 ffcc66 ffcc33 ffcc00 cc9900 cc9933 cc9966 cc9999 cc99cc cc99ff ff99ff ff99cc ff9999 ff9966 ff9933 ff9900 cc6600 cc6633 cc6666 cc6699 cc66cc cc66ff ff66ff ff66cc ff6699 ff6666 ff6633 ff6600 cc3300 cc3333 cc3366 cc3399 cc33cc cc33ff ff33ff ff33cc ff3399 ff3366 ff3333 ff3300 cc0000 cc0033 cc0066 cc0099 cc00cc cc00ff ff00ff ff00cc ff0099 ff0066 ff0033 ff0000 660000 660033 660066 660099 6600cc 6600ff 9900ff 9900cc 990099 990066 990033 990000 663300 663333 663366 663399 6633cc 6633ff 9933ff 9933cc 993399 993366 993333 993300 666600 666633 666666 666699 6666cc 6666ff 9966ff 9966cc 996699 996666 996633 996600 669900 669933 669966 669999 6699cc 6699ff 9999ff 9999cc 999999 999966 999933 999900 66cc00 66cc33 66cc66 66cc99 66cccc 66ccff 99ccff 99cccc 99cc99 99cc66 99cc33 99cc00 66ff00 66ff33 66ff66 66ff99 66ffcc 66ffff 99ffff 99ffcc 99ff99 99ff66 99ff33 99ff00 00ff00 00ff33 00ff66 00ff99 00ffcc 00ffff 33ffff 33ffcc 33ff99 33ff66 33ff33 33ff00 00cc00 00cc33 00cc66 00cc99 00cccc 00ccff 33ccff 33cccc 33cc99 33cc66 33cc33 33cc00 009900 009933 009966 009999 0099cc 0099ff 3399ff 3399cc 339999 339966 339933 339900 006600 006633 006666 006699 0066cc 0066ff 3366ff 3366cc 336699 336666 336633 336600 003300 003333 003366 003399 0033cc 0033ff 3333ff 3333cc 333399 333366 333333 333300 000000 000033 000066 000099 0000cc 0000ff 3300ff 3300cc 330099 330066 330033 330000".split(" "));
Qd.webSafeColors=MI;Qd.webSafeColors=MI;Qd.webSafeColors=MI;var Xpa=Object.freeze({__proto__:null,Complementary:vA,Triadic:wA,Tetradic:IC,Quadratic:xA,Analogous:yA,Neutral:JC,Color:xg,LinearGradient:zn,RadialGradient:Qp,flatDesignColors:KI,materialDesignColors:LI,webSafeColors:MI}),y$=lively.FreezerRuntime.recorderFor("lively.graphics/index.js");Object.assign(y$,Xpa);Object.assign(y$,Wpa);var Ypa=Object.freeze({__proto__:null,Complementary:vA,Triadic:wA,Tetradic:IC,Quadratic:xA,Analogous:yA,Neutral:JC,
Color:xg,LinearGradient:zn,RadialGradient:Qp,flatDesignColors:KI,materialDesignColors:LI,webSafeColors:MI,Point:Dg,Rectangle:He,Transform:kl,Line:yn,rect:dj,pt:Ei}),Zpa="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,dX={};!function(d,h){dX?dX=h():(this||Zpa)[d]=h()}("bowser",function(){function d(l){function a(R){return(R=l.match(R))&&1<R.length&&R[1]||""}function f(R){return(R=l.match(R))&&1<R.length&&R[2]||""}var m=a(/(ipod|iphone|ipad)/i).toLowerCase(),r=!/like android/i.test(l)&&
/android/i.test(l),v=/nexus\s*[0-6]\s*/i.test(l),x=!v&&/nexus\s*[0-9]+/i.test(l),y=/CrOS/.test(l),E=/silk/i.test(l),F=/sailfish/i.test(l),I=/tizen/i.test(l),J=/(web|hpw)os/i.test(l),P=/windows phone/i.test(l),N=!P&&/windows/i.test(l),Y=!m&&!E&&/macintosh/i.test(l),W=!r&&!F&&!I&&!J&&/linux/i.test(l),da=a(/edge\/(\d+(\.\d+)?)/i),va=a(/version\/(\d+(\.\d+)?)/i),za=/tablet/i.test(l),L=!za&&/[^-]mobi/i.test(l),Z=/xbox/i.test(l);/opera|opr|opios/i.test(l)?y={name:"Opera",opera:!0,version:va||a(/(?:opera|opr|opios)[\s\/](\d+(\.\d+)?)/i)}:
/coast/i.test(l)?y={name:"Opera Coast",coast:!0,version:va||a(/(?:coast)[\s\/](\d+(\.\d+)?)/i)}:/yabrowser/i.test(l)?y={name:"Yandex Browser",yandexbrowser:!0,version:va||a(/(?:yabrowser)[\s\/](\d+(\.\d+)?)/i)}:/ucbrowser/i.test(l)?y={name:"UC Browser",ucbrowser:!0,version:a(/(?:ucbrowser)[\s\/](\d+(?:\.\d+)+)/i)}:/mxios/i.test(l)?y={name:"Maxthon",maxthon:!0,version:a(/(?:mxios)[\s\/](\d+(?:\.\d+)+)/i)}:/epiphany/i.test(l)?y={name:"Epiphany",epiphany:!0,version:a(/(?:epiphany)[\s\/](\d+(?:\.\d+)+)/i)}:
/puffin/i.test(l)?y={name:"Puffin",puffin:!0,version:a(/(?:puffin)[\s\/](\d+(?:\.\d+)?)/i)}:/sleipnir/i.test(l)?y={name:"Sleipnir",sleipnir:!0,version:a(/(?:sleipnir)[\s\/](\d+(?:\.\d+)+)/i)}:/k-meleon/i.test(l)?y={name:"K-Meleon",kMeleon:!0,version:a(/(?:k-meleon)[\s\/](\d+(?:\.\d+)+)/i)}:P?(y={name:"Windows Phone",windowsphone:!0},da?(y.msedge=!0,y.version=da):(y.msie=!0,y.version=a(/iemobile\/(\d+(\.\d+)?)/i))):/msie|trident/i.test(l)?y={name:"Internet Explorer",msie:!0,version:a(/(?:msie |rv:)(\d+(\.\d+)?)/i)}:
y?y={name:"Chrome",chromeos:!0,chromeBook:!0,chrome:!0,version:a(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:/chrome.+? edge/i.test(l)?y={name:"Microsoft Edge",msedge:!0,version:da}:/vivaldi/i.test(l)?y={name:"Vivaldi",vivaldi:!0,version:a(/vivaldi\/(\d+(\.\d+)?)/i)||va}:F?y={name:"Sailfish",sailfish:!0,version:a(/sailfish\s?browser\/(\d+(\.\d+)?)/i)}:/seamonkey\//i.test(l)?y={name:"SeaMonkey",seamonkey:!0,version:a(/seamonkey\/(\d+(\.\d+)?)/i)}:/firefox|iceweasel|fxios/i.test(l)?(y={name:"Firefox",
firefox:!0,version:a(/(?:firefox|iceweasel|fxios)[ \/](\d+(\.\d+)?)/i)},/\((mobile|tablet);[^\)]*rv:[\d\.]+\)/i.test(l)&&(y.firefoxos=!0)):E?y={name:"Amazon Silk",silk:!0,version:a(/silk\/(\d+(\.\d+)?)/i)}:/phantom/i.test(l)?y={name:"PhantomJS",phantom:!0,version:a(/phantomjs\/(\d+(\.\d+)?)/i)}:/slimerjs/i.test(l)?y={name:"SlimerJS",slimer:!0,version:a(/slimerjs\/(\d+(\.\d+)?)/i)}:/blackberry|\bbb\d+/i.test(l)||/rim\stablet/i.test(l)?y={name:"BlackBerry",blackberry:!0,version:va||a(/blackberry[\d]+\/(\d+(\.\d+)?)/i)}:
J?(y={name:"WebOS",webos:!0,version:va||a(/w(?:eb)?osbrowser\/(\d+(\.\d+)?)/i)},/touchpad\//i.test(l)&&(y.touchpad=!0)):/bada/i.test(l)?y={name:"Bada",bada:!0,version:a(/dolfin\/(\d+(\.\d+)?)/i)}:I?y={name:"Tizen",tizen:!0,version:a(/(?:tizen\s?)?browser\/(\d+(\.\d+)?)/i)||va}:/qupzilla/i.test(l)?y={name:"QupZilla",qupzilla:!0,version:a(/(?:qupzilla)[\s\/](\d+(?:\.\d+)+)/i)||va}:/chromium/i.test(l)?y={name:"Chromium",chromium:!0,version:a(/(?:chromium)[\s\/](\d+(?:\.\d+)?)/i)||va}:/chrome|crios|crmo/i.test(l)?
y={name:"Chrome",chrome:!0,version:a(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:r?y={name:"Android",version:va}:/safari|applewebkit/i.test(l)?(y={name:"Safari",safari:!0},va&&(y.version=va)):m?(y={name:"iphone"==m?"iPhone":"ipad"==m?"iPad":"iPod"},va&&(y.version=va)):y=/googlebot/i.test(l)?{name:"Googlebot",googlebot:!0,version:a(/googlebot\/(\d+(\.\d+))/i)||va}:{name:a(/^(.*)\/(.*) /),version:f(/^(.*)\/(.*) /)};!y.msedge&&/(apple)?webkit/i.test(l)?(/(apple)?webkit\/537\.36/i.test(l)?(y.name=y.name||
"Blink",y.blink=!0):(y.name=y.name||"Webkit",y.webkit=!0),!y.version&&va&&(y.version=va)):!y.opera&&/gecko\//i.test(l)&&(y.name=y.name||"Gecko",y.gecko=!0,y.version=y.version||a(/gecko\/(\d+(\.\d+)?)/i));y.msedge||!r&&!y.silk?m?(y[m]=!0,y.ios=!0):Y?y.mac=!0:Z?y.xbox=!0:N?y.windows=!0:W&&(y.linux=!0):y.android=!0;N="";y.windowsphone?N=a(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i):m?(N=a(/os (\d+([_\s]\d+)*) like mac os x/i),N=N.replace(/[_\s]/g,".")):r?N=a(/android[ \/-](\d+(\.\d+)*)/i):y.webos?N=a(/(?:web|hpw)os\/(\d+(\.\d+)*)/i):
y.blackberry?N=a(/rim\stablet\sos\s(\d+(\.\d+)*)/i):y.bada?N=a(/bada\/(\d+(\.\d+)*)/i):y.tizen&&(N=a(/tizen[\/\s](\d+(\.\d+)*)/i));N&&(y.osversion=N);N=N.split(".")[0];if(za||x||"ipad"==m||r&&(3==N||4<=N&&!L)||y.silk)y.tablet=!0;else if(L||"iphone"==m||"ipod"==m||r||v||y.blackberry||y.webos||y.bada)y.mobile=!0;y.msedge||y.msie&&10<=y.version||y.yandexbrowser&&15<=y.version||y.vivaldi&&1<=y.version||y.chrome&&20<=y.version||y.firefox&&20<=y.version||y.safari&&6<=y.version||y.opera&&10<=y.version||
y.ios&&y.osversion&&6<=y.osversion.split(".")[0]||y.blackberry&&10.1<=y.version||y.chromium&&20<=y.version?y.a=!0:y.msie&&10>y.version||y.chrome&&20>y.version||y.firefox&&20>y.version||y.safari&&6>y.version||y.opera&&10>y.version||y.ios&&y.osversion&&6>y.osversion.split(".")[0]||y.chromium&&20>y.version?y.c=!0:y.x=!0;return y}function h(l,a){var f=[],m;if(Array.prototype.map)return Array.prototype.map.call(l,a);for(m=0;m<l.length;m++)f=a(l[m]);return f}function n(l){var a=Math.max(l[0].split(".").length,
l[1].split(".").length);for(l=h(l,function(f){var m=a-f.split(".").length;f+=Array(m+1).join(".0");return h(f.split("."),function(r){return Array(20-r.length).join("0")+r}).reverse()});0<=--a;){if(l[0][a]>l[1][a])return 1;if(l[0][a]===l[1][a]){if(0===a)return 0}else return-1}}function b(l,a,f){var m=e;"string"===typeof a&&(f=a,a=void 0);void 0===a&&(a=!1);f&&(m=d(f));f=""+m.version;for(var r in l)if(l.hasOwnProperty(r)&&m[r])return 0>n([f,l[r]]);return a}var e=d("undefined"!==typeof navigator?navigator.userAgent:
"");e.test=function(l){for(var a=0;a<l.length;++a){var f=l[a];if("string"===typeof f&&f in e)return!0}return!1};e.isUnsupportedBrowser=b;e.compareVersions=n;e.check=function(l,a,f){return!b(l,a,f)};e._detect=d;return e});var gt=dX,Vm=lively.FreezerRuntime.recorderFor("lively.morphic/config.js");Vm.parseURLQuery=function(){if("undefined"===typeof document||!document.location)return{};var d=(document.location.hash||document.location.search).slice(1);d=d&&d.split("&");var h={};if(d)for(var n=0;n<d.length;n++){var b=
d[n].split("="),e=b[0],l=!0;if(1<b.length&&(l=decodeURIComponent(b.slice(1).join("=")),l.match(/^(true|false|null|[0-9"[{].*)$/)))try{l=JSON.parse(l)}catch(a){"["===l[0]&&(l=l.slice(1,-1).split(","))}h[e]=l}return h};Vm.Rectangle=He;Vm.Color=xg;Vm.bowser=gt;Vm.joinPath=Uk;Vm.isMac=!!Vm.bowser.mac;Vm.baseURL=window.SERVER_URL||System.baseURL||document.location.origin;"undefined"!==typeof $world&&$world.withAllSubmorphsDo(function(d){return d.hasOwnProperty("_cachedKeyhandlers")&&(d._cachedKeyhandlers=
null)});Vm.config={onloadURLQuery:Vm.parseURLQuery(),defaultShadow:{fast:!0,distance:18,blur:30,color:Vm.Color.black.withA(.2),spread:0},undoLevels:20,halosEnabled:!0,altClickDefinesThat:!0,verboseLogging:!0,maxStatusMessages:5,repeatClickInterval:250,longClick:{minDur:500,maxDur:1E3,maxDist:2},showTooltipsAfter:.8,users:{authServerURL:"https://auth.lively-next.org",autoLoginAsGuest:!1},ide:{workerEnabled:!1,js:{ignoredPackages:["lively.web","no group",function(d){return d.includes("lively.morphic/objectdb")||
d.includes("lively.next-node_modules")||d.includes("node_modules")||d.includes("custom-npm-modules")||d.includes("mocha-es6")||d.includes("test-resources/es6")}]},modes:{aliases:{text:"text",sh:"shell",markdown:"md",javascript:"js",htmlmixed:"html",haskell:"hs",python:"py"}}},globalKeyBindings:[{keys:{mac:"Meta-Z",win:"Ctrl-Z"},command:"undo"},{keys:{mac:"Meta-Shift-Z",win:"Ctrl-Shift-Z"},command:"redo"},{keys:"Alt-X",command:"run command"},{keys:{mac:"Meta-S",win:"Ctrl-S"},command:"save world"},
{keys:"Meta-Shift-L s a v e",command:"save this world"},{keys:"Meta-H",command:"show halo for focused morph"},{keys:"Meta-Shift-L C O P Y",command:"copy morph"},{keys:"Alt-M",command:"select morph"},{keys:"Escape",command:"escape"},{keys:{win:"Ctrl-Escape",mac:"Meta-Escape"},command:"close active window or morph"},{keys:"Alt-Shift-C",command:"toggle minimize active window"},{keys:{mac:"Meta-Shift-L W S",win:"Ctrl-Shift-L W S"},command:"search workspaces"},{keys:{mac:"Meta-O",win:"Ctrl-O"},command:"open status message of focused morph"},
{keys:{win:"Ctrl-K",mac:"Meta-K"},command:{command:"open javascript workspace",onlyWhenFocused:!1}},{keys:"Alt-Shift-1",command:{command:"open shell terminal",onlyWhenFocused:!1}},{keys:{win:"Ctrl-B",mac:"Meta-B"},command:{command:"open browser",onlyWhenFocused:!1}},{keys:{win:"Ctrl-P",mac:"Meta-P"},command:{command:"open PartsBin",onlyWhenFocused:!0}},{keys:"Alt-T",command:{command:"choose and browse module",onlyWhenFocused:!1}},{keys:"Alt-Shift-T",command:{command:"choose and browse package resources",
onlyWhenFocused:!1}},{keys:{mac:"Ctrl-X D"},command:"open file browser"},{keys:{mac:"Ctrl-X Ctrl-F"},command:"open file"},{keys:{win:"Ctrl-Shift-F",mac:"Meta-Shift-F"},command:{command:"open code search",onlyWhenFocused:!1}},{keys:"Left",command:{command:"move or resize halo target",args:{what:"move",direction:"left",offset:1}}},{keys:"Right",command:{command:"move or resize halo target",args:{what:"move",direction:"right",offset:1}}},{keys:"Up",command:{command:"move or resize halo target",args:{what:"move",
direction:"up",offset:1}}},{keys:"Down",command:{command:"move or resize halo target",args:{what:"move",direction:"down",offset:1}}},{keys:"Meta-Left",command:{command:"move or resize halo target",args:{what:"move",direction:"left",offset:10}}},{keys:"Meta-Right",command:{command:"move or resize halo target",args:{what:"move",direction:"right",offset:10}}},{keys:"Meta-Up",command:{command:"move or resize halo target",args:{what:"move",direction:"up",offset:10}}},{keys:"Meta-Down",command:{command:"move or resize halo target",
args:{what:"move",direction:"down",offset:10}}},{keys:"Alt-Left",command:{command:"move or resize halo target",args:{what:"move",direction:"left",offset:100}}},{keys:"Alt-Right",command:{command:"move or resize halo target",args:{what:"move",direction:"right",offset:100}}},{keys:"Alt-Up",command:{command:"move or resize halo target",args:{what:"move",direction:"up",offset:100}}},{keys:"Alt-Down",command:{command:"move or resize halo target",args:{what:"move",direction:"down",offset:100}}},{keys:"Shift-Left",
command:{command:"move or resize halo target",args:{what:"resize",direction:"left",offset:1}}},{keys:"Shift-Right",command:{command:"move or resize halo target",args:{what:"resize",direction:"right",offset:1}}},{keys:"Shift-Up",command:{command:"move or resize halo target",args:{what:"resize",direction:"up",offset:1}}},{keys:"Shift-Down",command:{command:"move or resize halo target",args:{what:"resize",direction:"down",offset:1}}},{keys:"Meta-Shift-Left",command:{command:"move or resize halo target",
args:{what:"resize",direction:"left",offset:10}}},{keys:"Meta-Shift-Right",command:{command:"move or resize halo target",args:{what:"resize",direction:"right",offset:10}}},{keys:"Meta-Shift-Up",command:{command:"move or resize halo target",args:{what:"resize",direction:"up",offset:10}}},{keys:"Meta-Shift-Down",command:{command:"move or resize halo target",args:{what:"resize",direction:"down",offset:10}}},{keys:"Alt-Shift-Left",command:{command:"move or resize halo target",args:{what:"resize",direction:"left",
offset:100}}},{keys:"Alt-Shift-Right",command:{command:"move or resize halo target",args:{what:"resize",direction:"right",offset:100}}},{keys:"Alt-Shift-Up",command:{command:"move or resize halo target",args:{what:"resize",direction:"up",offset:100}}},{keys:"Alt-Shift-Down",command:{command:"move or resize halo target",args:{what:"resize",direction:"down",offset:100}}},{keys:{win:"Delete",mac:"Delete|Ctrl-D"},command:"close halo target"},{keys:{win:"Ctrl-`|Alt-`",mac:"Meta-1"},command:"window switcher"},
{keys:{mac:"Meta-Shift-L R E S 1",win:"Ctrl-Shift-L R E S 1"},command:{command:"resize active window",args:{how:"col1"}}},{keys:{mac:"Meta-Shift-L R E S 2",win:"Ctrl-Shift-L R E S 2"},command:{command:"resize active window",args:{how:"col2"}}},{keys:{mac:"Meta-Shift-L R E S 3",win:"Ctrl-Shift-L R E S 3"},command:{command:"resize active window",args:{how:"col3"}}},{keys:{mac:"Meta-Shift-L R E S C",win:"Ctrl-Shift-L R E S C"},command:{command:"resize active window",args:{how:"center"}}},{keys:{mac:"Meta-Shift-L R E S L",
win:"Ctrl-Shift-L R E S L"},command:{command:"resize active window",args:{how:"left"}}},{keys:{mac:"Meta-Shift-L R E S R",win:"Ctrl-Shift-L R E S R"},command:{command:"resize active window",args:{how:"right"}}},{keys:{mac:"Meta-Shift-L R E S F",win:"Ctrl-Shift-L R E S F"},command:{command:"resize active window",args:{how:"full"}}},{keys:{mac:"Meta-Shift-L R E S T",win:"Ctrl-Shift-L R E S T"},command:{command:"resize active window",args:{how:"top"}}},{keys:{mac:"Meta-Shift-L R E S B",win:"Ctrl-Shift-L R E S B"},
command:{command:"resize active window",args:{how:"bottom"}}},{keys:{mac:"Meta-Shift-L R E S Escape",win:"Ctrl-Shift-L R E S Escape"},command:{command:"resize active window",args:{how:"reset"}}}],text:{basicFontItems:"Sans-serif;serif;Monospace;Arial Black;Arial Narrow;Comic Sans MS;Garamond;Tahoma;Trebuchet MS;Verdana;custom...".split(";"),cursorBlinkPeriod:.5,useSoftTabs:!0,tabWidth:2,markStackSize:16,undoLevels:50,clipboardBufferLength:100,useMultiSelect:!0,undoGroupDelay:600,defaultKeyBindings:[{keys:{win:"Ctrl-C",
mac:"Meta-C"},command:{command:"clipboard copy",passEvent:!0}},{keys:"Ctrl-W",command:{command:"manual clipboard copy",args:{delete:!0}}},{keys:"Alt-W",command:"manual clipboard copy"},{keys:"Ctrl-Y",command:"manual clipboard paste"},{keys:"Alt-Y",command:{command:"manual clipboard paste",args:{killRingCycleBack:!0}}},{keys:{win:"Ctrl-X",mac:"Meta-X"},command:{command:"clipboard cut",passEvent:!0}},{keys:{win:"Ctrl-V",mac:"Meta-V"},command:{command:"clipboard paste",passEvent:!0}},{keys:{win:"Ctrl-Z|Ctrl-Shift--",
mac:"Meta-Z|Ctrl-Shift--|Ctrl-x u"},command:"text undo"},{keys:{win:"Ctrl-Shift-Z",mac:"Meta-Shift-Z"},command:"text redo"},{keys:{win:"Ctrl-A|Ctrl-X H",mac:"Meta-A|Ctrl-X H"},command:"select all"},{keys:{win:"Alt-Enter",mac:"Meta-D|Alt-Enter"},command:"doit"},{keys:{mac:"Meta-Shift-L X B"},command:"eval all"},{keys:{win:"Alt-Ctrl-Enter",mac:"Meta-P"},command:"printit"},{keys:{win:"Alt-Ctrl-Shift-Enter",mac:"Meta-I"},command:"print inspectit"},{keys:{win:"Ctrl-Shift-I",mac:"Meta-Shift-I"},command:"inspectit"},
{keys:{win:"Ctrl-Shift-E",mac:"Meta-Shift-E"},command:"editit"},{keys:{win:"Ctrl-Shift-U",mac:"Meta-Shift-U"},command:"undefine variable"},{keys:"Backspace",command:"delete backwards"},{keys:"Shift-Backspace",command:"delete backwards"},{keys:{win:"Delete",mac:"Delete|Ctrl-D"},command:"delete"},{keys:{win:"Left|Ctrl-B",mac:"Left|Ctrl-B"},command:"go left"},{keys:{win:"Right|Ctrl-F",mac:"Right|Ctrl-F"},command:"go right"},{keys:{win:"Up|Ctrl-P",mac:"Up|Ctrl-P"},command:"go up"},{keys:{win:"Down|Ctrl-N",
mac:"Down|Ctrl-N"},command:"go down"},{keys:"Shift-Left",command:"select left"},{keys:"Shift-Right",command:"select right"},{keys:"Shift-Up",command:"select up"},{keys:"Shift-Down",command:"select down"},{keys:{win:"Ctrl-Right",mac:"Alt-Right|Alt-F"},command:"goto word right"},{keys:{win:"Ctrl-Left",mac:"Alt-Left|Alt-B"},command:"goto word left"},{keys:{win:"Ctrl-Shift-Right",mac:"Alt-Shift-Right|Alt-Shift-F"},command:{command:"goto word right",args:{select:!0}}},{keys:{win:"Ctrl-Shift-Left",mac:"Alt-Shift-Left|Alt-Shift-B"},
command:{command:"goto word left",args:{select:!0}}},{keys:{win:"Ctrl-Backspace",mac:"Alt-Backspace"},command:"delete word left"},{keys:"Alt-D",command:"delete word right"},{keys:{win:"Alt-Ctrl-K",mac:"Alt-Ctrl-K"},command:"delete word right"},{keys:"Alt-Shift-2",command:"select word right"},{keys:"Ctrl-X Ctrl-X",command:"reverse selection"},{keys:{win:"Ctrl-Shift-L",mac:"Meta-L"},command:"select line"},{keys:{win:"Shift-Home",mac:"Shift-Home|Ctrl-Shift-A"},command:{command:"goto line start",args:{select:!0}}},
{keys:{win:"Home",mac:"Home|Ctrl-A"},command:{command:"goto line start",args:{select:!1}}},{keys:{win:"Shift-End",mac:"Shift-End|Ctrl-Shift-E"},command:{command:"goto line end",args:{select:!0}}},{keys:{win:"End",mac:"End|Ctrl-E"},command:{command:"goto line end",args:{select:!1}}},{keys:"Ctrl-C J",command:{command:"join line",args:{withLine:"before"}}},{keys:"Ctrl-C Shift-J",command:{command:"join line",args:{withLine:"after"}}},{keys:{win:"Ctrl-Shift-D",mac:"Meta-Shift-D|Ctrl-C P"},command:"duplicate line or selection"},
{keys:{win:"Ctrl-Shift-Backspace",mac:"Meta-Backspace"},command:"delete left until beginning of line"},{keys:"Ctrl-K",command:"delete emtpy line or until end of line"},{keys:{win:"Ctrl-Alt-Up|Ctrl-Alt-P",mac:"Ctrl-Meta-Up|Ctrl-Meta-P"},command:"move lines up"},{keys:{win:"Ctrl-Alt-Down|Ctrl-Alt-N",mac:"Ctrl-Meta-Down|Ctrl-Meta-N"},command:"move lines down"},{keys:{win:"PageDown",mac:"PageDown|Ctrl-V"},command:"goto page down"},{keys:{win:"PageUp",mac:"PageUp|Alt-V"},command:"goto page up"},{keys:{win:"Shift-PageDown",
mac:"Shift-PageDown"},command:"goto page down and select"},{keys:{win:"Shift-PageUp",mac:"Shift-PageUp"},command:"goto page up and select"},{keys:"Alt-Ctrl-,",command:"move cursor to screen top in 1/3 steps"},{keys:"Alt-Ctrl-.",command:"move cursor to screen bottom in 1/3 steps"},{keys:{win:"Alt-Left",mac:"Meta-Left"},command:"goto matching left"},{keys:{win:"Alt-Shift-Left",mac:"Meta-Shift-Left"},command:{command:"goto matching left",args:{select:!0}}},{keys:{win:"Alt-Right",mac:"Meta-Right"},command:"goto matching right"},
{keys:{win:"Alt-Shift-Right",mac:"Meta-Shift-Right"},command:{command:"goto matching right",args:{select:!0}}},{keys:"Alt-Ctrl-B",command:"goto matching left"},{keys:"Alt-Ctrl-F",command:"goto matching right"},{keys:"Ctrl-Up",command:"goto paragraph above"},{keys:"Ctrl-Down",command:"goto paragraph below"},{keys:{win:"Ctrl-Shift-Home",mac:"Meta-Shift-Up"},command:{command:"goto start",args:{select:!0}}},{keys:{win:"Ctrl-Shift-End",mac:"Meta-Shift-Down"},command:{command:"goto end",args:{select:!0}}},
{keys:{win:"Ctrl-Home",mac:"Meta-Up|Meta-Home|Alt-Shift-,"},command:"goto start"},{keys:{win:"Ctrl-End",mac:"Meta-Down|Meta-End|Alt-Shift-."},command:"goto end"},{keys:"Ctrl-L",command:"realign top-bottom-center"},{keys:{win:"Ctrl-Shift-L",mac:"Ctrl-Shift-L|Alt-G G"},command:"goto line"},{keys:"Enter",command:"newline"},{keys:"Space",command:{command:"insertstring",args:{string:" ",undoGroup:!0}}},{keys:"Tab",command:{command:"tab - snippet expand or indent"}},{keys:{win:"Ctrl-]",mac:"Meta-]"},command:"indent"},
{keys:{win:"Ctrl-[",mac:"Meta-["},command:"outdent"},{keys:{win:"Ctrl-Enter",mac:"Meta-Enter"},command:{command:"insert line",args:{where:"below"}}},{keys:"Shift-Enter",command:{command:"insert line",args:{where:"above"}}},{keys:"Ctrl-O",command:"split line"},{keys:{mac:"Ctrl-X Ctrl-T"},command:"transpose chars"},{keys:{mac:"Ctrl-C Ctrl-U"},command:"uppercase"},{keys:{mac:"Ctrl-C Ctrl-L"},command:"lowercase"},{keys:{mac:"Meta-Shift-L W t"},command:"remove trailing whitespace"},{keys:{mac:"Ctrl-Space"},
command:"toggle active mark"},{keys:{mac:"Meta-Shift-L M O D E"},command:"change editor mode"},{keys:{mac:"Meta-Shift-L L T"},command:"toggle line wrapping"},{keys:"Esc|Ctrl-G",command:"cancel input"},{keys:{win:"Ctrl-/",mac:"Meta-/"},command:"toggle comment"},{keys:{win:"Alt-Ctrl-/",mac:"Alt-Meta-/|Alt-Meta-\u00f7"},command:"toggle block comment"},{keys:"Meta-Shift-L /  D",command:"comment box"},{keys:{win:"Ctrl-.",mac:"Meta-."},command:"[IyGotoChar] activate"},{keys:{win:"Ctrl-,",mac:"Meta-,"},
command:{command:"[IyGotoChar] activate",args:{backwards:!0}}},{keys:{win:"Ctrl-Space|Ctrl-Shift-P",mac:"Alt-Shift-Space|Alt-Space|Meta-Shift-P"},command:"text completion"},{keys:"\u00f7|Alt-/",command:"text completion first match"},{keys:"Alt-Q",command:"fit text to column"},{keys:{win:"Ctrl-F|Ctrl-G|F3",mac:"Meta-F|Meta-G|Ctrl-S"},command:"search in text"},{keys:{win:"Ctrl-Shift-F|Ctrl-Shift-G",mac:"Meta-Shift-F|Meta-Shift-G|Ctrl-R"},command:{command:"search in text",args:{backwards:!0}}},{keys:"Ctrl-Shift-/|Ctrl-C Ctrl-Shift-,",
command:"[multi select] all like this"},{keys:"Alt-Ctrl-P",command:"[multi select] add cursor above"},{keys:"Alt-Ctrl-N",command:"[multi select] add cursor below"},{keys:"Ctrl-Shift-,",command:"[multi select] more like this backward"},{keys:"Ctrl-Shift-.",command:"[multi select] more like this forward"},{keys:{mac:"Meta-Shift-,"},command:"[multi select] goto previous focused cursor"},{keys:{mac:"Meta-Shift-."},command:"[multi select] goto next focused cursor"},{keys:"Ctrl-Shift-;",command:"[multi select] remove focused cursor"},
{keys:"Alt-Ctrl-A",command:"[multi select] align cursors"},{keys:"Ctrl-X R",command:"[multi select] create rectangular selection"},{keys:{win:"Shift-Ctrl-S|Ctrl-Alt-Space",mac:"Ctrl-Command-space|Ctrl-Alt-Space"},command:"contractRegion"},{keys:{win:"Shift-Ctrl-E|Ctrl-Shift-Space",mac:"Shift-Command-Space|Ctrl-Shift-Space"},command:"expandRegion"},{keys:"Ctrl-Alt-h",command:"markDefun"},{keys:"Ctrl-Alt-d|Ctrl-Alt-Down",command:"forwardDownSexp"},{keys:"Ctrl-Alt-u|Ctrl-Alt-Up",command:"backwardUpSexp"},
{keys:"Ctrl-Alt-b|Ctrl-Alt-Left",command:"backwardSexp"},{keys:"Ctrl-Alt-f|Ctrl-Alt-Right",command:"forwardSexp"},{keys:"Alt-.",command:"selectDefinition"},{keys:"Ctrl-Shift-'",command:"selectSymbolReferenceOrDeclaration"},{keys:"Ctrl-Shift-[",command:"selectSymbolReferenceOrDeclarationPrev"},{keys:"Ctrl-Shift-]",command:"selectSymbolReferenceOrDeclarationNext"},{keys:{win:"Ctrl-=",mac:"Meta-="},command:"increase font size"},{keys:{win:"Ctrl--",mac:"Meta--"},command:"decrease font size"},{keys:"Alt-K",
command:"set link of selection"},{keys:"Alt-O",command:"set doit of selection"},{keys:{win:"Ctrl-\\",mac:"Meta-\\"},command:"reset text style"},{keys:{win:"Ctrl-Shift-L T U I",mac:"Meta-Shift-L T U I"},command:"open text attribute controls"},{keys:{win:"Ctrl-Shift-L T D",mac:"Meta-Shift-L T D"},command:"[todo] toggle todo marker"},{keys:{win:"Ctrl-Shift-L D A T E",mac:"Meta-Shift-L D A T E"},command:"insert date"},{keys:"Ctrl-C Ctrl-I",command:"change string inflection"},{keys:"Alt-Shift-4",command:"spell check word"},
{keys:"Alt-Shift-\\",command:"[shell] run shell command on region"},{keys:"Alt-Shift-;",command:"run code on text morph"},{keys:{win:"Ctrl-Shift-L O P E N",mac:"Meta-Shift-L O P E N"},command:"open file at cursor"},{keys:"Meta-F1",command:"report token at cursor"}]},codeEditor:{defaultTheme:"default",collapseSelection:!1,search:{maxCharsPerLine:1E4,fastHighlightLineCount:4E3,showTextMap:!0},defaultStyle:{fontFamily:"IBM Plex Mono",padding:Vm.Rectangle.inset(4,2,4,2),fontSize:12,clipMode:"auto"},modes:{text:{style:{}}}},
systemBrowser:{fixUndeclaredVarsOnSave:!0},objectEditor:{fixUndeclaredVarsOnSave:!0},remotes:{server:System.get("@system-env").browser?document.location.origin+"/eval":null},css:{ibmPlex:Vm.joinPath(Vm.baseURL,"lively.morphic/assets/ibm-plex/css/ibm-plex.css"),fontAwesome:Vm.joinPath(Vm.baseURL,"/lively.morphic/assets/fontawesome-free-5.12.1/css/all.css"),inconsolata:Vm.joinPath(Vm.baseURL,"/lively.morphic/assets/inconsolata/inconsolata.css")}};var em=Ha("ad",Vm.config);Vm.default=em;var sh=lively.FreezerRuntime.recorderFor("lively.bindings/index.js");
sh.connect=Dl;sh.disconnect=mg;sh.disconnectAll=Xv;sh.once=cp;sh.signal=Xl;sh.callWhenNotNull=wq;sh.callWhenPathNotNull=Ip;sh.noUpdate=Jm;sh.string=Th;sh.arr=Mf;sh.Closure=ek;sh.obj=ng;sh.stringifyFunctionWithoutToplevelRecorder=Nn;sh.connect=Dl;sh.connect=Dl;sh.disconnect=mg;sh.disconnect=mg;sh.disconnectAll=Xv;sh.disconnectAll=Xv;sh.once=cp;sh.once=cp;sh.signal=Xl;sh.signal=Xl;sh.noUpdate=Jm;sh.noUpdate=Jm;var JO=function(d){var h=lively.FreezerRuntime.recorderFor("lively.bindings/index.js"),n=
h.hasOwnProperty("AttributeConnection")&&"function"===typeof h.AttributeConnection?h.AttributeConnection:h.AttributeConnection=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Pb(n,d,[{key:Symbol.for("lively-instance-initialize"),value:function(b,e,l,a,f){this.init(b,e,l,a,f)}},{key:"init",value:function(b,e,l,a,f){this.doNotSerialize=["isActive","converter","updater","varMapping"];this.sourceObj=b;this.sourceAttrName=
e;this.targetObj=l;this.targetMethodName=a;this.varMapping={source:b,target:l};f=Object.assign({removeAfterUpdate:!1,forceAttributeConnection:!1,garbageCollect:!1,signalOnAssignment:!0},f);f.removeAfterUpdate&&(this.removeAfterUpdate=!0);f.forceAttributeConnection&&(this.forceAttributeConnection=!0);"boolean"===typeof f.garbageCollect&&(this.garbageCollect=f.garbageCollect);"boolean"===typeof f.signalOnAssignment&&(this.signalOnAssignment=f.signalOnAssignment);f.converter&&this.setConverter(f.converter);
f.updater&&this.setUpdater(f.updater);f.varMapping&&(this.varMapping=Object.assign(f.varMapping,this.varMapping));this.getSpec();return this}},{key:"__additionally_serialize__",value:function(b,e,l,a){sh.arr.equals(sh.arr.without(Object.keys(this.varMapping),"_rev"),["source","target"])?b.props.varMapping&&delete b.props.varMapping:a("varMapping",this.varMapping)}},{key:"__after_deserialize__",value:function(b,e){this.varMapping||(this.varMapping={});this.varMapping.source=this.sourceObj;this.varMapping.target=
this.targetObj;this.onSourceAndTargetRestored()}},{key:"onSourceAndTargetRestored",value:function(){this.sourceObj&&this.targetObj&&this.connect()}},{key:"copy",value:function(b){return sh.AttributeConnection.fromLiteral(this.toLiteral(),b)}},{key:"fixInstanceAfterCopyingFromSite",value:function(b,e,l){this.disconnect()}},{key:"clone",value:function(){var b=new this.constructor(this.getSourceObj(),this.getSourceAttrName(),this.getTargetObj(),this.getTargetMethodName(),this.getSpec());this.dependedBy&&
(b.dependedBy=this.dependedBy);return b}},{key:"getTargetObj",value:function(){return this.targetObj}},{key:"getSourceObj",value:function(){return this.sourceObj}},{key:"getSourceAttrName",value:function(){return this.sourceAttrName}},{key:"getTargetMethodName",value:function(){return this.targetMethodName}},{key:"getSourceValue",value:function(){return this.getSourceObj()[this.getSourceAttrName()]}},{key:"getPrivateSourceValue",value:function(){return this.sourceObj[this.privateAttrName(this.sourceAttrName)]}},
{key:"getConverter",value:function(){if(!this.converterString)return null;this.converter||(this.converter=sh.Closure.fromSource(this.converterString,this.varMapping).recreateFunc());return this.converter}},{key:"setConverter",value:function(b){delete this.converter;return this.converterString=b?String(b):null}},{key:"getUpdater",value:function(){if(!this.updaterString)return null;this.updater||(this.updater=sh.Closure.fromSource(this.updaterString,this.varMapping).recreateFunc());return this.updater}},
{key:"setUpdater",value:function(b){delete this.updater;return this.updaterString=b?sh.stringifyFunctionWithoutToplevelRecorder(b):null}},{key:"getSpec",value:function(){var b={};this.updaterString&&(b.updater=this.getUpdater());this.converterString&&(b.converter=this.getConverter());this.removeAfterUpdate&&(b.removeAfterUpdate=!0);this.forceAttributeConnection&&(b.forceAttributeConnection=!0);this.hasOwnProperty("garbageCollect")&&(b.garbageCollect=this.garbageCollect);this.hasOwnProperty("signalOnAssignment")&&
(b.signalOnAssignment=this.signalOnAssignment);return b}},{key:"resetSpec",value:function(){delete this.garbageCollect;delete this.signalOnAssignment;delete this.removeAfterUpdate;delete this.forceAttributeConnection;delete this.converter;delete this.converterString;delete this.updater;delete this.updaterString}},{key:"privateAttrName",value:function(b){return"$$"+b}},{key:"activate",value:function(){this.isActive=!0}},{key:"deactivate",value:function(){delete this.isActive}},{key:"connect",value:function(){var b=
this.getExistingConnection();b!==this&&(b&&b.disconnect(),this.addAttributeConnection());b=this.sourceObj;var e=this.sourceAttrName,l=this.forceAttributeConnection,a=b.__lookupSetter__(e),f=b.__lookupGetter__(e),m=!a&&!f&&(this.getSourceValue()||this.getPrivateSourceValue());"function"!==typeof m||l?this.addSourceObjGetterAndSetter(f,a):m.isWrapped||this.addConnectionWrapper(b,e,m);return this}},{key:"disconnect",value:function(){var b=this,e=this.sourceObj;if(!e||!e.attributeConnections)return this.removeSourceObjGetterAndSetter();
e.attributeConnections=e.attributeConnections.filter(function(a){return!b.isSimilarConnection(a)});var l=e.attributeConnections.filter(function(a){return b.getSourceAttrName()==a.getSourceAttrName()});0==e.attributeConnections.length&&delete e.attributeConnections;0==l.length&&this.removeSourceObjGetterAndSetter();return null}},{key:"update",value:function(b,e){if(this.isActive)return null;var l=this,a=this.getUpdater(),f=this.getConverter(),m=this.targetObj,r=this.targetMethodName;if(!m||!r)return e=
"Cannot update "+this.toString(b)+" because of no target ("+m+") or targetProp ("+r+") ",this.isWeakConnection&&this.disconnect(),console.error(e),null;var v=m[r],x=function(E,F,I,J,P,N){I=[E,F,I,J,P,N];f&&(b=f.call(l,E,F),E=I[0]=b);E="function"===typeof v?v.apply(m,I):m[r]=E;l.removeAfterUpdate&&l.disconnect();return E};try{return this.isActive=!0,a?a.call(this,x,b,e):x(b,e)}catch(E){var y=this.sourceObj&&"function"===typeof this.sourceObj.world&&this.sourceObj.world()||this.targetObj&&"function"===
typeof this.targetObj.world&&this.targetObj.world();y?y.logError(E,"AttributeConnection>>update: "):console.error("Error when trying to update "+this+" with value "+b+":\n"+E+"\n"+E.stack)}finally{delete this.isActive}return null}},{key:"addSourceObjGetterAndSetter",value:function(b,e){if(!(b&&b.isAttributeConnectionGetter||e&&e.isAttributeConnectionSetter)){var l=this.sourceObj,a=this.sourceAttrName,f=this.privateAttrName(a);l[f]&&console.warn("newAttrName "+f+" already exists.Are there already other connections?");
l.hasOwnProperty("doNotSerialize")||(l.doNotSerialize=[]);sh.arr.pushIfNotIncluded(l.doNotSerialize,f);l.hasOwnProperty("doNotCopyProperties")||(l.doNotCopyProperties=[]);sh.arr.pushIfNotIncluded(l.doNotCopyProperties,f);b&&(l.hasOwnProperty(a)?l.__defineGetter__(f,b):l.__defineGetter__(f,function(){return l.constructor.prototype.__lookupGetter__(a).bind(l)()}));e&&(l.hasOwnProperty(a)?l.__defineSetter__(f,e):l.__defineSetter__(f,function(m){l.constructor.prototype.__lookupSetter__(a).bind(l)(m)}));
b||e||!l.hasOwnProperty(a)||(l[f]=l[a]);l.__defineSetter__(a,function(m){var r=l[f];l[f]=m;if(void 0===l.attributeConnections)return console.error("Sth wrong with sourceObj, has no attributeConnections"),null;l.attributeConnections.forEach(function(v){v&&v.getSourceAttrName()===a&&v.signalOnAssignment&&v.update(m,r)});return m});l.__lookupSetter__(a).isAttributeConnectionSetter=!0;l.__defineGetter__(a,function(){return l[f]});l.__lookupGetter__(a).isAttributeConnectionGetter=!0}}},{key:"addConnectionWrapper",
value:function(b,e,l){if("function"!==typeof l)throw Error("addConnectionWrapper didnt get a method to wrap");var a;if(a=b.hasOwnProperty(e)){b[this.privateAttrName(e)]=l;var f=function(){return l}}else f=function(){return Object.getPrototypeOf(b)[e]};b[e]=function(){if(void 0===this.attributeConnections)throw Error("[lively.bindings] Something is wrong with connection source object, it has no attributeConnections");for(var m=this.attributeConnections.slice(),r=this[e].originalFunction.apply(this,
arguments),v=0;v<m.length;v++){var x=m[v];x.getSourceAttrName()===e&&x.update(arguments[0])}return r};b[e].isOwnProperty=a;b[e].isWrapped=!0;b[e].isConnectionWrapper=!0;Object.defineProperty(b[e],"originalFunction",{get:f});b[e].toString=function(){return"<Wrapped "+f()+">"}}},{key:"removeSourceObjGetterAndSetter",value:function(){var b=this.sourceAttrName,e=this.privateAttrName(b),l=this.sourceObj;if(l){if(l.__lookupGetter__(b)){if(delete l[b],l.hasOwnProperty(e)){try{l[b]=l[e]}catch(f){}delete l[e]}}else if(l[b]&&
l[b].isConnectionWrapper){var a=l[b];delete l[b];l[b]||(l[b]=a.originalFunction)}l.doNotSerialize&&l.doNotSerialize.includes(e)&&(l.doNotSerialize=sh.arr.without(l.doNotSerialize,e),0==l.doNotSerialize.length&&delete l.doNotSerialize);l.doNotCopyProperties&&l.doNotCopyProperties.includes(e)&&(l.doNotCopyProperties=sh.arr.without(l.doNotCopyProperties,e),0==l.doNotCopyProperties.length&&delete l.doNotCopyProperties)}}},{key:"addAttributeConnection",value:function(){this.sourceObj.attributeConnections||
(this.sourceObj.attributeConnections=[]);this.sourceObj.attributeConnections.push(this)}},{key:"getExistingConnection",value:function(){var b=this.sourceObj&&this.sourceObj.attributeConnections;if(!b)return null;for(var e=0,l=b.length;e<l;e++)if(this.isSimilarConnection(b[e]))return b[e];return null}},{key:"isRecursivelyActivated",value:function(){return this.isActive}},{key:"isSimilarConnection",value:function(b){return b&&b.constructor==this.constructor?this.sourceObj==b.sourceObj&&this.sourceAttrName==
b.sourceAttrName&&this.targetObj==b.targetObj&&this.targetMethodName==b.targetMethodName:!1}},{key:"toString",value:function(b){try{return sh.string.format("AttributeConnection(%s.%s %s %s.%s)",this.getSourceObj(),this.getSourceAttrName(),b?"--\x3e"+String(b)+"--\x3e":"--\x3e",this.getTargetObj(),this.getTargetMethodName())}catch(e){return"<Error in AttributeConnection>>toString>"}}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"AttributeConnection"}}],h,{pathInPackage:function(){return"index.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.bindings",version:"0.1.2"}}},{start:221,end:16605})}(void 0);sh.AttributeConnection=JO;sh.AttributeConnection=JO;sh.AttributeConnection=JO;sh.callWhenNotNull=wq;sh.callWhenNotNull=wq;sh.callWhenPathNotNull=Ip;sh.callWhenPathNotNull=Ip;var $pa=Object.freeze({__proto__:null,connect:Dl,disconnect:mg,disconnectAll:Xv,once:cp,
signal:Xl,noUpdate:Jm,AttributeConnection:JO,callWhenNotNull:wq,callWhenPathNotNull:Ip});lively.FreezerRuntime.recorderFor("lively.serializer2/object-extensions.js");Object.defineProperty(Symbol.prototype,"__serialize__",{configurable:!0,value:function(){var d=function(){return Object.getOwnPropertyNames(Symbol).filter(function(n){return"symbol"===typeof Symbol[n]}).reduce(function(n,b){return n.set(Symbol[b],"Symbol."+b)},new Map)}(),h=/^Symbol\((.*)\)$/;return function(){var n="function"===typeof this[Symbol.toPrimitive]?
this[Symbol.toPrimitive]():this,b=Symbol.keyFor(n);if(b)return{__expr__:'Symbol.for("'+b+'")'};if(d.get(n))return{__expr__:d.get(n)};n=String(n).match(h);return{__expr__:n?'Symbol("'+n[1]+'")':"Symbol()"}}}()});Object.defineProperty(System,"__serialize__",{configurable:!0,value:function(){return{__expr__:"System"}}});Object.defineProperty(System.global,"__serialize__",{configurable:!0,value:function(){return{__expr__:"System.global"}}});Object.defineProperty(Map.prototype,"__serialize__",{configurable:!0,
value:function(d,h,n){var b=d.add(this),e=b.currentRev,l=b.currentSnapshot,a=l.entries=[],f=0;h[b.id]=l;d.classHelper.addClassInfo(b,this,l);l=$jscomp.makeIterator(this);for(var m=l.next();!m.done;m=l.next()){var r=$jscomp.makeIterator(m.value);m=r.next().value;r=r.next().value;f++;m=b.snapshotProperty(b.id,m,n.concat("key",String(f)),h,d);r=b.snapshotProperty(b.id,r,n.concat("value",String(f)),h,d);a.push(m,r)}return b.asRefForSerializedObjMap(e)}});Object.defineProperty(Map.prototype,"__deserialize__",
{configurable:!0,value:function(d,h,n,b,e){d=d.entries;for(var l=0;l<d.length;l+=2){var a=d[l+1],f=h.recreateProperty("key."+l,d[l],n,b,e.concat("key",l));a=h.recreateProperty("value."+l,a,n,b,e.concat("value",l));this.set(f,a)}}});Object.defineProperty(Set.prototype,"__serialize__",{configurable:!0,value:function(d,h,n){var b=d.add(this),e=b.currentRev,l=b.currentSnapshot,a=l.entries=[],f=0;h[b.id]=l;d.classHelper.addClassInfo(b,this,l);l=$jscomp.makeIterator(this);for(var m=l.next();!m.done;m=l.next())m=
m.value,f++,m=b.snapshotProperty(b.id,m,n.concat("entry",String(f)),h,d),a.push(m);return b.asRefForSerializedObjMap(e)}});Object.defineProperty(Set.prototype,"__deserialize__",{configurable:!0,value:function(d,h,n,b,e){d=d.entries;for(var l=0;l<d.length;l++){var a=h.recreateProperty("entry."+l,d[l],n,b,e.concat("key",l));this.add(a)}}});var eX=lively.FreezerRuntime.recorderFor("lively.serializer2/util.js");eX.isPrimitive=cE;eX.isPrimitive=cE;eX.isPrimitive=cE;var Nj=lively.FreezerRuntime.recorderFor("lively.serializer2/class-helper.js");
Nj.getClassName=tr;Nj.getSerializableClassMeta=eu;Nj.locateClass=Cs;Nj.arr=Mf;Nj.string=Th;Nj.classMetaForSerializationProp="lively.serializer-class-info";Nj.classSuperClassProp=Symbol.for("lively-instance-superclass");Nj.classNameProp=Symbol.for("__LivelyClassName__");Nj.moduleMetaInClassProp=Symbol.for("lively-module-meta");Nj.getClassName=tr;Nj.getClassName=tr;Nj.getSerializableClassMeta=eu;Nj.getSerializableClassMeta=eu;Nj.locateClass=Cs;Nj.locateClass=Cs;var Iw=function(d){this.options=Object.assign({ignoreClassNotFound:!0},
d);this[Symbol.for("lively-instance-restorer")]=!0};Iw.prototype.addClassInfo=function(d,h,n){(d=Nj.getSerializableClassMeta(h))&&(n[Nj.classMetaForSerializationProp]=d)};Iw.prototype.restoreIfClassInstance=function(d,h){if(h.hasOwnProperty(Nj.classMetaForSerializationProp)&&(d=h[Nj.classMetaForSerializationProp],d.className)){h=Nj.locateClass(d);if(!h||"function"!==typeof h){h="Trying to deserialize instance of "+JSON.stringify(d)+" but this class cannot be found!";if(!this.options.ignoreClassNotFound)throw Error(h);
console.error(h);return{isClassPlaceHolder:!0,className:d.className}}return h.hasOwnProperty(Symbol.for("lively-instance-superclass"))?new h(this):new h}};Iw.sourceModulesInObjRef=function(d){var h=[];(d=d&&d[Nj.classMetaForSerializationProp])&&d.module&&h.push(d.module);return h};Iw.sourceModulesIn=function(d){var h=[];Object.keys(d).forEach(function(n){(n=d[n])&&n[Nj.classMetaForSerializationProp]&&h.push(n[Nj.classMetaForSerializationProp])});return Nj.arr.uniqBy(h,function(n,b){var e=n.module,
l=b.module;return!e&&!l||e&&!l||!e&&l?n.className===b.className:n.className===b.className&&e.package.name==l.package.name&&e.package.pathInPackage==l.package.pathInPackage})};$jscomp.global.Object.defineProperties(Iw.prototype,{sourceModuleNameProperty:{configurable:!0,enumerable:!0,get:function(){return"__SourceModuleName__"}}});$jscomp.global.Object.defineProperties(Iw,{moduleMetaInClassProp:{configurable:!0,enumerable:!0,get:function(){return Nj.moduleMetaInClassProp}},classMetaForSerializationProp:{configurable:!0,
enumerable:!0,get:function(){return Nj.classMetaForSerializationProp}},classSuperClassProp:{configurable:!0,enumerable:!0,get:function(){return Nj.classSuperClassProp}},classNameProperty:{configurable:!0,enumerable:!0,get:function(){return Nj.classNameProp}}});Nj.ClassHelper=Iw;Nj.default=Iw;var Zi=lively.FreezerRuntime.recorderFor("lively.serializer2/plugins/expression-serializer.js");Zi.deserializeSpec=ur;Zi.serializeSpec=Jp;Zi.string=Th;Zi.Closure=ek;Zi.Path=Ih;Zi.obj=ng;Zi.properties=Kr;Zi.arr=
Mf;Zi.getSerializableClassMeta=eu;Zi.connect=Dl;var fo=function(d){this.prefix=Object.assign({prefix:"__lv_expr__"},d).prefix+":"};fo.prototype.isSerializedExpression=function(d){return 0===d.indexOf(this.prefix)};fo.prototype.requiredModulesOf__expr__=function(d){return this.isSerializedExpression(d)?(d=this.exprStringDecode(d).bindings)?Object.keys(d):null:null};fo.prototype.exprStringDecode=function(d){var h=d.indexOf(":");d.slice(0,h);d=d.slice(h+1);for(var n={},b=!1;d&&d.startsWith("{")&&0<=
(h=d.indexOf("}:"));){b=!0;var e=d.slice(1,h);d=d.slice(h+2);d.includes("https:")&&d.indexOf("https:")<d.indexOf(":")?(d=d.replace("https:","__HTTP_PLACEHOLDER__"),h=d.indexOf(":")-20+6,d=d.replace("__HTTP_PLACEHOLDER__","https:")):h=d.indexOf(":");var l=d.slice(0,h);e=e.split(",").filter(function(a){return!!a.trim()}).map(function(a){if(!a.includes(":"))return a;var f=$jscomp.makeIterator(a.split(":"));a=f.next().value;f=f.next().value;return{exported:a,local:f}});n[l]=e;d=d.slice(h+1)}return{__expr__:d,
bindings:b?n:null}};fo.prototype.exprStringEncode=function(d){var h=d.bindings;d=String(d.__expr__);if(h)for(var n=Object.keys(h),b=0;b<n.length;b++){var e=n[b],l=h[e];Array.isArray(l)&&(l=l.map(function(a){return"string"===typeof a?a:a.exported+":"+a.local}).join(","));d="{"+l+"}:"+e+":"+d}return this.prefix+d};fo.prototype.convert__expr__obj=function(d){console.assert("__expr__"in d,"obj has no property __expr__");return this.prefix+d.__expr__};fo.prototype.__eval__=function(d,h){return Zi.__eval__(d,
h)};fo.prototype.deserializeExpr=function(d){if(!d.startsWith(this.prefix))throw Error('"'+d+'" is not a serialized expression, missing prefix "'+this.prefix+'"');return this.deserializeExprObj(this.exprStringDecode(d))};fo.prototype.deserializeExprObj=function(d){var h=d.__expr__;d=d.bindings;var n={};if(d)for(var b=d?Object.keys(d):[],e=0;e<b.length;e++){var l=b[e],a=d[l];if(lively.FreezerRuntime){var f=lively.FreezerRuntime.get(lively.FreezerRuntime.decanonicalize(l));if(!f){var m=lively.FreezerRuntime.fetchStandaloneFor(l);
m&&(f=m.exports)}f.exports&&(f=f.exports)}else f=System.get(System.decanonicalize(l));if(!f)throw Error("[lively.serializer] expression eval: bindings specify to import "+l+" but this module is not loaded!\nSource: "+h);for(l=0;l<a.length;l++){var r=a[l],v=m=void 0;"string"===typeof r?v=m=r:"object"===typeof r&&(m=r.local,v=r.exported);n[m]=f[v];h="var "+m+" = __boundValues__."+m+";\n"+h}}return this.__eval__(h,n)};Ha("a0",fo);Zi.ExpressionSerializer=fo;Zi.__eval__=Zi.Closure.fromSource("function __eval__(__source__, __boundValues__) { \n  return eval(__source__); \n}").getFunc();
Zi.deserializeSpec=ur;Zi.deserializeSpec=ur;Zi.serializeSpec=Jp;Zi.serializeSpec=Jp;Zi.default=fo;var Oj=lively.FreezerRuntime.recorderFor("lively.serializer2/plugins.js");Oj.obj=ng;Oj.Plugin=function(){};var fX=function(){};fX.prototype.serializeObject=function(d,h,n,b,e){if("function"!==typeof d.__serialize__)return null;(d=d.__serialize__(n,b,e))&&d.hasOwnProperty("__expr__")&&(n=n.expressionSerializer.exprStringEncode(d),d=h?n:{__expr__:n});return d};fX.prototype.deserializeObject=function(d,
h,n,b){return(h=n.__expr__)?d.expressionSerializer.deserializeExpr(h):null};Oj.CustomSerializePlugin=fX;var gX=function(){};gX.prototype.additionallySerialize=function(d,h,n,b){d.classHelper.addClassInfo(h,h.realObj,n)};gX.prototype.deserializeObject=function(d,h,n,b){return d.classHelper.restoreIfClassInstance(h,n)};Oj.ClassPlugin=gX;var z$=function(){};z$.prototype.serializeObject=function(d,h,n,b,e){d&&d.isMorph&&(d.__isBeingSerialized__=!0);return null};Oj.SerializationIndicationPlugin=z$;var A$=
function(){};A$.prototype.additionallySerialize=function(d,h,n,b){h.realObj&&h.realObj.isMorph&&(h.realObj.__isBeingSerialized__=!1)};Oj.SerializationFinishPlugin=A$;var KO=function(){};KO.prototype.additionallySerialize=function(d,h,n,b){var e=h.realObj;e&&"function"===typeof e.__additionally_serialize__&&e.__additionally_serialize__(n,h,d,b)};KO.prototype.additionallyDeserializeBeforeProperties=function(d,h,n,b,e,l,a){"function"===typeof n.__deserialize__&&n.__deserialize__(e,h,l,d,a)};KO.prototype.additionallyDeserializeAfterProperties=
function(d,h,n,b,e,l){"function"===typeof n.__after_deserialize__&&n.__after_deserialize__(b,h,d)};Oj.AdditionallySerializePlugin=KO;var B$=function(){};B$.prototype.propertiesToSerialize=function(d,h,n,b){return(d=h.realObj)&&d.__only_serialize__||null};Oj.OnlySerializePropsPlugin=B$;var C$=function(){};C$.prototype.propertiesToSerialize=function(d,h,n,b){d=h.realObj;if(!d||!d.__dont_serialize__)return null;d=Oj.obj.mergePropertyInHierarchy(d,"__dont_serialize__");h=[];for(n=0;n<b.length;n++){var e=
b[n];d.includes(e)||h.push(e)}return h};Oj.DontSerializePropsPlugin=C$;var hX=function(){};hX.prototype.propertiesToSerialize=function(d,h,n,b){var e=h.realObj;h=e.constructor[Symbol.for("lively.classes-properties-and-settings")];if(!h)return null;d=h.properties;n=h.propertySettings.valueStoreProperty||"_state";h=[];if(e[n]){if(e.__only_serialize__){for(var l=0;l<b.length;l++){e=b[l];var a=d[e];e!==n&&(a&&a&&(a.derived||a.readOnly||a.hasOwnProperty("serialize")&&!a.serialize)||h.push(e))}return h}n=
b.indexOf(n);-1<n&&b.splice(n,1);for(l in d)n=d[l],e=b.indexOf(l),n.derived||n.readOnly||n.hasOwnProperty("serialize")&&!n.serialize?-1<e&&b.splice(e,1):-1===e&&h.push(l);return h.concat(b)}};hX.prototype.additionallyDeserializeBeforeProperties=function(d,h,n,b,e,l,a){var f=n.constructor[Symbol.for("lively.classes-properties-and-settings")];if(!f)return b;var m=f.order;f=f.propertySettings.valueStoreProperty||"_state";b=e.props;if(b[f])return b;b=Oj.obj.clone(b);n.hasOwnProperty(f)||n.initializeProperties();
for(e=0;e<m.length;e++)f=m[e],b.hasOwnProperty(f)&&(h.recreatePropertyAndSetProperty(n,b,f,l,d,a),delete b[f]);return b};Oj.LivelyClassPropertiesPlugin=hX;var iX={livelyClassPropertiesPlugin:new Oj.LivelyClassPropertiesPlugin,dontSerializePropsPlugin:new Oj.DontSerializePropsPlugin,onlySerializePropsPlugin:new Oj.OnlySerializePropsPlugin,additionallySerializePlugin:new Oj.AdditionallySerializePlugin,classPlugin:new Oj.ClassPlugin,customSerializePlugin:new Oj.CustomSerializePlugin,indicationPlugin:new Oj.SerializationIndicationPlugin,
finishPlugin:new Oj.SerializationFinishPlugin};Oj.plugins=iX;Oj.plugins=iX;Oj.plugins=iX;var Jw=[Oj.plugins.indicationPlugin,Oj.plugins.customSerializePlugin,Oj.plugins.classPlugin,Oj.plugins.additionallySerializePlugin,Oj.plugins.onlySerializePropsPlugin,Oj.plugins.dontSerializePropsPlugin,Oj.plugins.livelyClassPropertiesPlugin,Oj.plugins.finishPlugin];Oj.allPlugins=Jw;Oj.allPlugins=Jw;Oj.allPlugins=Jw;var ok=lively.FreezerRuntime.recorderFor("lively.serializer2/object-pool.js");ok.__additionally_serialize__addObjectFunction=
function(d,h,n,b,e){e=void 0===e?[]:e;return function(l,a,f){f=void 0===f?!1:f;return h.props[l]=f?{value:a,verbatim:f}:{value:d.snapshotProperty(d.id,a,e.concat([l]),n,b)}}};ok.arr=Mf;ok.Path=Ih;ok.obj=ng;ok.string=Th;ok.isPrimitive=cE;ok.ClassHelper=Iw;ok.ExpressionSerializer=fo;ok.allPlugins=Jw;ok.debugSerialization=!1;ok.debugDeserialization=!1;var Vj=function(d){this.options=Object.assign({checkForLeaks:!1,ignoreClassNotFound:!0,idPropertyName:"id"},d);this.reset()};Vj.withDefaultPlugins=function(d){return new this(Object.assign({plugins:ok.allPlugins},
d))};Vj.resolveFromSnapshotAndId=function(d,h){return(new this(h)).resolveFromSnapshotAndId(d)};Vj.fromSnapshot=function(d,h){return(new this(h)).readSnapshot(d)};Vj.withObject=function(d,h){h=new this(h);h.add(d);return h};Vj.prototype.reset=function(){this.uuidGen=ok.string.newUUID;this._obj_ref_map=new Map;this._id_ref_map={};var d=this.options;this.classHelper=new ok.ClassHelper(d);this.expressionSerializer=new ok.ExpressionSerializer;d.idPropertyName&&(this.idPropertyName=d.idPropertyName);d.uuidGen&&
(this.uuidGen=d.uuidGen);d.reinitializeIds&&(this.reinitializeIds=d.reinitializeIds);d.hasOwnProperty("ignoreClassNotFound")&&(this.classHelper.options.ignoreClassNotFound=d.ignoreClassNotFound);var h=this.plugins={serializeObject:[],additionallySerialize:[],propertiesToSerialize:[],deserializeObject:[],additionallyDeserializeBeforeProperties:[],additionallyDeserializeAfterProperties:[],afterDeserialization:[],beforeDeserialization:[],afterSerialization:[],beforeSerialization:[]};d.plugins&&d.plugins.forEach(function(n){"function"===
typeof n.serializeObject&&h.serializeObject.push(n);"function"===typeof n.additionallySerialize&&h.additionallySerialize.push(n);"function"===typeof n.propertiesToSerialize&&h.propertiesToSerialize.push(n);"function"===typeof n.deserializeObject&&h.deserializeObject.push(n);"function"===typeof n.additionallyDeserializeBeforeProperties&&h.additionallyDeserializeBeforeProperties.push(n);"function"===typeof n.additionallyDeserializeAfterProperties&&h.additionallyDeserializeAfterProperties.push(n);"function"===
typeof n.beforeDeserialization&&h.beforeDeserialization.push(n);"function"===typeof n.afterDeserialization&&h.afterDeserialization.push(n);"function"===typeof n.beforeSerialization&&h.beforeSerialization.push(n);"function"===typeof n.afterSerialization&&h.afterSerialization.push(n)})};Vj.prototype.knowsId=function(d){return!!this._id_ref_map[d]};Vj.prototype.refForId=function(d){return this._id_ref_map[d]};Vj.prototype.resolveToObj=function(d){return(d=this._id_ref_map[d])?d.realObj:void 0};Vj.prototype.ref=
function(d){return this._obj_ref_map.get(d)};Vj.prototype.objects=function(){return Array.from(this._obj_ref_map.keys())};Vj.prototype.objectRefs=function(){return Array.from(this._obj_ref_map.values())};Vj.prototype.internalAddRef=function(d){d.realObj&&this._obj_ref_map.set(d.realObj,d);return this._id_ref_map[d.id]=d};Vj.prototype.add=function(d){var h=this;if(!ok.isPrimitive(d)){if(Array.isArray(d))return d.map(function(b){return h.add(b)});var n=d.__serialization_id_property__||this.idPropertyName;
return this.ref(d)||this.internalAddRef(new ok.ObjectRef(d[n]||this.uuidGen(),d,void 0,this.idPropertyName))}};Vj.prototype.snapshot=function(d){var h={};this.plugin_beforeSerialization(h,d);for(var n=0,b=Object.keys(this._id_ref_map);n<b.length;n++)this._id_ref_map[b[n]].snapshotObject(h,this);return h=this.plugin_afterSerialization(h,d)};Vj.prototype.snapshotObject=function(d){d=this.add(d).id;var h=this.snapshot(d);return{id:d,snapshot:h}};Vj.prototype.readSnapshot=function(d,h){if(d.hasOwnProperty("id"))throw Error("readSnapshot expects simple serialized object map, not id-snapshot pair!");
if(this.options.skipMigrations)ok.ObjectRef.fromSnapshot(h,d,this,[],this.idPropertyName);else{h=0;for(var n=Object.keys(d);h<n.length;h++)this.resolveToObj(n[h])||ok.ObjectRef.fromSnapshot(n[h],d,this,[],this.idPropertyName)}return this};Vj.prototype.resolveFromSnapshotAndId=function(d){if(!d.hasOwnProperty("id"))throw Error("idAndSnapshot does not have id");if(!d.hasOwnProperty("snapshot"))throw Error("idAndSnapshot does not have snapshot");var h=d=this.plugin_beforeDeserialization(d),n=h.id;this.readSnapshot(h.snapshot,
n);this.plugin_afterDeserialization(d);return this.resolveToObj(n)};Vj.prototype.plugin_beforeSerialization=function(d,h){for(var n=0;n<this.plugins.beforeSerialization.length;n++)this.plugins.beforeSerialization[n].beforeSerialization(this,d,h)};Vj.prototype.plugin_afterSerialization=function(d,h){for(var n=0;n<this.plugins.afterSerialization.length;n++){var b=this.plugins.afterSerialization[n].afterSerialization(this,d,h);b&&(d=b)}return d};Vj.prototype.plugin_beforeDeserialization=function(d){for(var h=
0;h<this.plugins.beforeDeserialization.length;h++){var n=this.plugins.beforeDeserialization[h].beforeDeserialization(this,d);n&&(d=n)}return d};Vj.prototype.plugin_afterDeserialization=function(d){for(var h=0;h<this.plugins.afterDeserialization.length;h++)this.plugins.afterDeserialization[h].afterDeserialization(this,d)};Vj.prototype.plugin_serializeObject=function(d,h,n,b){for(var e=0;e<this.plugins.serializeObject.length;e++){var l=this.plugins.serializeObject[e].serializeObject(d,h,this,n,b);if(l)return l}};
Vj.prototype.plugin_propertiesToSerialize=function(d,h,n){for(var b=0;b<this.plugins.propertiesToSerialize.length;b++){var e=this.plugins.propertiesToSerialize[b].propertiesToSerialize(this,d,h,n);e&&(n=e)}return n};Vj.prototype.plugin_additionallySerialize=function(d,h,n,b){n=this.plugins.additionallySerialize.length?ok.__additionally_serialize__addObjectFunction(d,h,n,this,b):null;for(b=0;b<this.plugins.additionallySerialize.length;b++)this.plugins.additionallySerialize[b].additionallySerialize(this,
d,h,n)};Vj.prototype.plugin_deserializeObject=function(d,h,n){for(var b=0;b<this.plugins.deserializeObject.length;b++){var e=this.plugins.deserializeObject[b].deserializeObject(this,d,h,n);if(e)return e}};Vj.prototype.plugin_additionallyDeserializeBeforeProperties=function(d,h,n,b,e,l){for(var a=0;a<this.plugins.additionallyDeserializeBeforeProperties.length;a++){var f=this.plugins.additionallyDeserializeBeforeProperties[a].additionallyDeserializeBeforeProperties(this,d,h,n,b,e,l);f&&(n=f)}return n};
Vj.prototype.plugin_additionallyDeserializeAfterProperties=function(d,h,n,b,e){for(var l=0;l<this.plugins.additionallyDeserializeAfterProperties.length;l++)this.plugins.additionallyDeserializeAfterProperties[l].additionallyDeserializeAfterProperties(this,d,h,n,b,e)};ok.ObjectPool=Vj;var ht=function(d,h,n,b){this.id=d;this.idPropertyName=void 0===b?"id":b;this.realObj=h;this.snapshotVersions=[];this.snapshots={};n&&(d=n.rev||0,this.snapshotVersions.push(d),this.snapshots[d]=n)};ht.fromSnapshot=function(d,
h,n,b,e){b=void 0===b?[]:b;d=new this(d,void 0,void 0,e);try{return n.internalAddRef(d).recreateObjFromSnapshot(h,n,b)}catch(l){if(n.options.highlightBuggyMorphs)for(;b.length;){if((h=ok.Path(b).map(function(a,f){return"submorphs"==a?f.filter(function(m){return!m.isHand&&!m.isEpiMorph}):f}).get(n.options.rootObject))&&h.isMorph&&h.world()){h.show(!0);n.options.highlightBuggyMorphs=!1;break}b.pop()}throw l;}};ht.prototype.asRefForSerializedObjMap=function(d){return{__ref__:!0,id:this.id,rev:void 0===
d?"????":d}};ht.prototype.snapshotObject=function(d,h,n){n=void 0===n?[]:n;ok.debugSerialization&&console.log("[serialize] "+n.join("."));if(100<n.length)throw Error("Stopping serializer, encountered a possibly infinit loop: "+n.join("."));var b=this.id,e=this.realObj,l=this.snapshots;if(!e)return console.error("Cannot marshall object ref "+b+", no real object!"),Object.assign({},this.asRefForSerializedObjMap(),{isMissing:!0});var a=e._rev||0;var f=this.asRefForSerializedObjMap(a);ok.arr.pushIfNotIncluded(this.snapshotVersions,
a);if(l[a])return d[b]||(d[b]=l[a]),f;var m=typeof b;"number"===m&&(b=String(b),m="string");if("string"!==m)throw Error("Error snapshoting "+e+": id is not a string but "+(b+" (serialization path: ")+(n.join(".")+")"));if(m=h.plugin_serializeObject(e,!1,d,n))return l[a]=d[b]=m,f;m=Object.getOwnPropertyNames(e);var r={};l=l[a]=d[b]={rev:a,props:r};(a=h.plugin_propertiesToSerialize(this,l,m))&&(m=a);for(a=0;a<m.length;a++){var v=m[a];r[v]={value:this.snapshotProperty(b,e[v],n.concat([v]),d,h)}}h.plugin_additionallySerialize(this,
l,d,n);return f};ht.prototype.snapshotProperty=function(d,h,n,b,e){var l=this;if(ok.isPrimitive(h))return h;var a=e.plugin_serializeObject(h,!0,b,n);if(a)return a;if("function"!==typeof h)return Array.isArray(h)?h.map(function(f,m){return l.snapshotProperty(d,f,n.concat(m),b,e)}):(h=e.add(h))&&h.isObjectRef?h.snapshotObject(b,e,n):h};ht.prototype.recreateObjFromSnapshot=function(d,h,n){if(this.realObj)return this;ok.debugDeserialization&&console.log("[deserialize] "+this.id+" (via "+n.join(".")+")");
var b=d[this.id];if(!b)return console.error("Cannot recreateObjFromSnapshot ObjectRef "+(this.id+" b/c of missing snapshot in snapshot map!")),this;var e=b.rev,l;e=e||0;this.snapshotVersions.push(e);this.snapshots[e]=b;(l=h.plugin_deserializeObject(this,b,n))||(l={});"undefined"===typeof l._rev&&"object"===typeof l&&(l._rev=e||0);this.realObj=l;h.internalAddRef(this);if(!l)return this;e=b.props;var a=h.plugin_additionallyDeserializeBeforeProperties(this,l,e,b,d,n);a&&(e=a);if(e)for(var f in e)this.recreatePropertyAndSetProperty(l,
e,f,d,h,n);f=l.__serialization_id_property__||this.idPropertyName;h.reinitializeIds&&l.hasOwnProperty(f)&&(l[f]=h.reinitializeIds(this.id,this));h.plugin_additionallyDeserializeAfterProperties(this,l,b,d,n);return this};ht.prototype.recreatePropertyAndSetProperty=function(d,h,n,b,e,l){try{var a=h[n]||{value:"NON EXISTING"},f=a.value;d[n]=a.verbatim?f:this.recreateProperty(n,f,b,e,l.concat(n))}catch(r){try{var m=String(d)}catch(v){m="[some "+d.constructor.name+"]"}r.__seen?console.error("Error deserializing property "+
n+" of "+m):(d=n+" of "+m+" ("+JSON.stringify(f)+")",console.error("Error deserializing property "+d),r.__seen=!0)}};ht.prototype.recreateProperty=function(d,h,n,b,e){var l=this;if("string"===typeof h&&b.expressionSerializer.isSerializedExpression(h))return b.expressionSerializer.deserializeExpr(h);if(ok.isPrimitive(h))return h;if(Array.isArray(h))return h.map(function(a,f){return l.recreateProperty(f,a,n,b,e.concat(f))});d=h.__serialization_id_property__||this.idPropertyName;return(b.refForId(h[d])||
ok.ObjectRef.fromSnapshot(h[d],n,b,e,this.idPropertyName)).realObj};$jscomp.global.Object.defineProperties(ht.prototype,{isObjectRef:{configurable:!0,enumerable:!0,get:function(){return!0}},currentSnapshot:{configurable:!0,enumerable:!0,get:function(){if(this.snapshotVersions.length)var d=ok.arr.last(this.snapshotVersions);else d=0,this.snapshotVersions.push(d);return this.snapshots[d]||(this.snapshots[d]={rev:d,props:{}})}},currentRev:{configurable:!0,enumerable:!0,get:function(){return this.snapshotVersions.length?
ok.arr.last(this.snapshotVersions):0}}});ok.ObjectRef=ht;var Kf=lively.FreezerRuntime.recorderFor("lively.serializer2/snapshot-navigation.js");Kf.referenceGraph=XG;Kf.isReference=dE;Kf.referencesOfRef=eE;Kf.referencesOfId=fE;Kf.referencesInArray=ii;Kf.moduleOfId=CB;Kf.referencesAndClassNamesOfId=gE;Kf.classNameOfId=Ds;Kf.findPathFromToId=hE;Kf.lookupPath=Sx;Kf.modifyProperty=vr;Kf.removeUnreachableObjects=wr;Kf.clearDanglingConnections=iE;Kf.requiredModulesOfSnapshot=fu;Kf.ClassHelper=Iw;Kf.Path=
Ih;Kf.obj=ng;Kf.arr=Mf;Kf.graph=sy;Kf.ExpressionSerializer=fo;Kf.referenceGraph=XG;Kf.referenceGraph=XG;Kf.isReference=dE;Kf.isReference=dE;Kf.referencesOfRef=eE;Kf.referencesOfRef=eE;Kf.referencesOfId=fE;Kf.referencesOfId=fE;Kf.moduleOfId=CB;Kf.moduleOfId=CB;Kf.referencesAndClassNamesOfId=gE;Kf.referencesAndClassNamesOfId=gE;Kf.classNameOfId=Ds;Kf.classNameOfId=Ds;Kf.findPathFromToId=hE;Kf.findPathFromToId=hE;Kf.lookupPath=Sx;Kf.lookupPath=Sx;Kf.modifyProperty=vr;Kf.modifyProperty=vr;Kf.removeUnreachableObjects=
wr;Kf.removeUnreachableObjects=wr;Kf.clearDanglingConnections=iE;Kf.clearDanglingConnections=iE;Kf.defaultExprSerializer=new Kf.ExpressionSerializer;Kf.requiredModulesOfSnapshot=fu;Kf.requiredModulesOfSnapshot=fu;var D$,kE="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,rm=D$={};try{var Bz="function"==typeof setTimeout?setTimeout:DB}catch(d){Bz=DB}try{var Cz="function"==typeof clearTimeout?clearTimeout:jE}catch(d){Cz=jE}!0;var EB,Tx=[],lE=!1,YK=-1;rm.nextTick=function(d){var h=
Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)h[n-1]=arguments[n];Tx.push(new ZK(d,h));1!==Tx.length||lE||XK(YG)};ZK.prototype.run=function(){(this||kE).fun.apply(null,(this||kE).array)};rm.title="browser";rm.browser=!0;rm.env={};rm.argv=[];rm.version="";rm.versions={};rm.on=yi;rm.addListener=yi;rm.once=yi;rm.off=yi;rm.removeListener=yi;rm.removeAllListeners=yi;rm.emit=yi;rm.prependListener=yi;rm.prependOnceListener=yi;rm.listeners=function(d){return[]};rm.binding=
function(d){throw Error("process.binding is not supported");};rm.cwd=function(){return"/"};rm.chdir=function(d){throw Error("process.chdir is not supported");};rm.umask=function(){return 0};var mj=D$,H0={},G0=!1,J0={},I0=!1,Yv={},K0=!1,M0={},L0=!1,O0={},N0=!1,Q0={},P0=!1,S0={},R0=!1,U0={},T0=!1,W0={},V0=!1,Y0={},X0=!1,$0={},Z0=!1,b1={},a1=!1,d1={},c1=!1,f1={},e1=!1,h1={},g1=!1,j1={},i1=!1,l1={},k1=!1,n1={},m1=!1,p1={},o1=!1,r1={},q1=!1,t1={},s1=!1,v1={},u1=!1,x1={},w1=!1,z1={},y1=!1,B1={},A1=!1,aqa=
{},bqa=aqa=function(d){d.prototype[Symbol.iterator]=function n(){var b=this,e;return $jscomp.generator.createGenerator(n,function(l){1==l.nextAddress&&(e=b.head);if(3!=l.nextAddress)return e?l.yield(e.value,3):l.jumpTo(0);e=e.next;return l.jumpTo(2)})}},E$={};E$=wj;wj.Node=ln;wj.create=wj;wj.prototype.removeNode=function(d){if(d.list!==this)throw Error("removing node which does not belong to this list");var h=d.next,n=d.prev;h&&(h.prev=n);n&&(n.next=h);d===this.head&&(this.head=h);d===this.tail&&
(this.tail=n);d.list.length--;d.next=null;d.prev=null;d.list=null;return h};wj.prototype.unshiftNode=function(d){if(d!==this.head){d.list&&d.list.removeNode(d);var h=this.head;d.list=this;if(d.next=h)h.prev=d;this.head=d;this.tail||(this.tail=d);this.length++}};wj.prototype.pushNode=function(d){if(d!==this.tail){d.list&&d.list.removeNode(d);var h=this.tail;d.list=this;if(d.prev=h)h.next=d;this.tail=d;this.head||(this.head=d);this.length++}};wj.prototype.push=function(){for(var d=0,h=arguments.length;d<
h;d++)this.tail=new ln(arguments[d],this.tail,null,this),this.head||(this.head=this.tail),this.length++;return this.length};wj.prototype.unshift=function(){for(var d=0,h=arguments.length;d<h;d++)this.head=new ln(arguments[d],null,this.head,this),this.tail||(this.tail=this.head),this.length++;return this.length};wj.prototype.pop=function(){if(this.tail){var d=this.tail.value;(this.tail=this.tail.prev)?this.tail.next=null:this.head=null;this.length--;return d}};wj.prototype.shift=function(){if(this.head){var d=
this.head.value;(this.head=this.head.next)?this.head.prev=null:this.tail=null;this.length--;return d}};wj.prototype.forEach=function(d,h){h=h||this;for(var n=this.head,b=0;null!==n;b++)d.call(h,n.value,b,this),n=n.next};wj.prototype.forEachReverse=function(d,h){h=h||this;for(var n=this.tail,b=this.length-1;null!==n;b--)d.call(h,n.value,b,this),n=n.prev};wj.prototype.get=function(d){for(var h=0,n=this.head;null!==n&&h<d;h++)n=n.next;if(h===d&&null!==n)return n.value};wj.prototype.getReverse=function(d){for(var h=
0,n=this.tail;null!==n&&h<d;h++)n=n.prev;if(h===d&&null!==n)return n.value};wj.prototype.map=function(d,h){h=h||this;for(var n=new wj,b=this.head;null!==b;)n.push(d.call(h,b.value,this)),b=b.next;return n};wj.prototype.mapReverse=function(d,h){h=h||this;for(var n=new wj,b=this.tail;null!==b;)n.push(d.call(h,b.value,this)),b=b.prev;return n};wj.prototype.reduce=function(d,h){var n=this.head;if(1<arguments.length)var b=h;else if(this.head)n=this.head.next,b=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");
for(var e=0;null!==n;e++)b=d(b,n.value,e),n=n.next;return b};wj.prototype.reduceReverse=function(d,h){var n=this.tail;if(1<arguments.length)var b=h;else if(this.tail)n=this.tail.prev,b=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var e=this.length-1;null!==n;e--)b=d(b,n.value,e),n=n.prev;return b};wj.prototype.toArray=function(){for(var d=Array(this.length),h=0,n=this.head;null!==n;h++)d[h]=n.value,n=n.next;return d};wj.prototype.toArrayReverse=function(){for(var d=
Array(this.length),h=0,n=this.tail;null!==n;h++)d[h]=n.value,n=n.prev;return d};wj.prototype.slice=function(d,h){h=h||this.length;0>h&&(h+=this.length);d=d||0;0>d&&(d+=this.length);var n=new wj;if(h<d||0>h)return n;0>d&&(d=0);h>this.length&&(h=this.length);for(var b=0,e=this.head;null!==e&&b<d;b++)e=e.next;for(;null!==e&&b<h;b++,e=e.next)n.push(e.value);return n};wj.prototype.sliceReverse=function(d,h){h=h||this.length;0>h&&(h+=this.length);d=d||0;0>d&&(d+=this.length);var n=new wj;if(h<d||0>h)return n;
0>d&&(d=0);h>this.length&&(h=this.length);for(var b=this.length,e=this.tail;null!==e&&b>h;b--)e=e.prev;for(;null!==e&&b>d;b--,e=e.prev)n.push(e.value);return n};wj.prototype.splice=function(d,h,n){for(var b=[],e=2;e<arguments.length;++e)b[e-2]=arguments[e];d>this.length&&(d=this.length-1);0>d&&(d=this.length+d);e=0;for(var l=this.head;null!==l&&e<d;e++)l=l.next;var a=[];for(e=0;l&&e<h;e++)a.push(l.value),l=this.removeNode(l);null===l&&(l=this.tail);l!==this.head&&l!==this.tail&&(l=l.prev);for(e=0;e<
b.length;e++){var f=b[e];l=l===this.head?new ln(f,null,l,this):new ln(f,l,l.next,this);null===l.next&&(this.tail=l);null===l.prev&&(this.head=l);this.length++}return a};wj.prototype.reverse=function(){for(var d=this.head,h=this.tail,n=d;null!==n;n=n.prev){var b=n.prev;n.prev=n.next;n.next=b}this.head=h;this.tail=d;return this};try{bqa(wj)}catch(d){}var cqa={},dqa=E$,KC=Symbol("max"),Pr=Symbol("length"),EF=Symbol("lengthCalculator"),NI=Symbol("allowStale"),LC=Symbol("maxAge"),yy=Symbol("dispose"),
F$=Symbol("noDisposeOnSet"),go=Symbol("lruList"),Ou=Symbol("cache"),G$=Symbol("updateAgeOnGet"),jX=function(){return 1},Io=function(d){"number"===typeof d&&(d={max:d});d||(d={});if(d.max&&("number"!==typeof d.max||0>d.max))throw new TypeError("max must be a non-negative number");this[KC]=d.max||Infinity;var h=d.length||jX;this[EF]="function"!==typeof h?jX:h;this[NI]=d.stale||!1;if(d.maxAge&&"number"!==typeof d.maxAge)throw new TypeError("maxAge must be a number");this[LC]=d.maxAge||0;this[yy]=d.dispose;
this[F$]=d.noDisposeOnSet||!1;this[G$]=d.updateAgeOnGet||!1;this.reset()};Io.prototype.rforEach=function(d,h){h=h||this;for(var n=this[go].tail;null!==n;){var b=n.prev;H$(this,d,n,h);n=b}};Io.prototype.forEach=function(d,h){h=h||this;for(var n=this[go].head;null!==n;){var b=n.next;H$(this,d,n,h);n=b}};Io.prototype.keys=function(){return this[go].toArray().map(function(d){return d.key})};Io.prototype.values=function(){return this[go].toArray().map(function(d){return d.value})};Io.prototype.reset=function(){var d=
this;this[yy]&&this[go]&&this[go].length&&this[go].forEach(function(h){return d[yy](h.key,h.value)});this[Ou]=new Map;this[go]=new dqa;this[Pr]=0};Io.prototype.dump=function(){var d=this;return this[go].map(function(h){return LO(d,h)?!1:{k:h.key,v:h.value,e:h.now+(h.maxAge||0)}}).toArray().filter(function(h){return h})};Io.prototype.dumpLru=function(){return this[go]};Io.prototype.set=function(d,h,n){if((n=n||this[LC])&&"number"!==typeof n)throw new TypeError("maxAge must be a number");var b=n?Date.now():
0,e=this[EF](h,d);if(this[Ou].has(d)){if(e>this[KC])return FF(this,this[Ou].get(d)),!1;var l=this[Ou].get(d).value;if(this[yy]&&!this[F$])this[yy](d,l.value);l.now=b;l.maxAge=n;l.value=h;this[Pr]+=e-l.length;l.length=e;this.get(d);OI(this);return!0}n=new eqa(d,h,e,b,n);if(n.length>this[KC]){if(this[yy])this[yy](d,h);return!1}this[Pr]+=n.length;this[go].unshift(n);this[Ou].set(d,this[go].head);OI(this);return!0};Io.prototype.has=function(d){if(!this[Ou].has(d))return!1;d=this[Ou].get(d).value;return!LO(this,
d)};Io.prototype.get=function(d){return kX(this,d,!0)};Io.prototype.peek=function(d){return kX(this,d,!1)};Io.prototype.pop=function(){var d=this[go].tail;if(!d)return null;FF(this,d);return d.value};Io.prototype.del=function(d){FF(this,this[Ou].get(d))};Io.prototype.load=function(d){this.reset();for(var h=Date.now(),n=d.length-1;0<=n;n--){var b=d[n],e=b.e||0;0===e?this.set(b.k,b.v):(e-=h,0<e&&this.set(b.k,b.v,e))}};Io.prototype.prune=function(){var d=this;this[Ou].forEach(function(h,n){return kX(d,
n,!1)})};$jscomp.global.Object.defineProperties(Io.prototype,{max:{configurable:!0,enumerable:!0,set:function(d){if("number"!==typeof d||0>d)throw new TypeError("max must be a non-negative number");this[KC]=d||Infinity;OI(this)},get:function(){return this[KC]}},allowStale:{configurable:!0,enumerable:!0,set:function(d){this[NI]=!!d},get:function(){return this[NI]}},maxAge:{configurable:!0,enumerable:!0,set:function(d){if("number"!==typeof d)throw new TypeError("maxAge must be a non-negative number");
this[LC]=d;OI(this)},get:function(){return this[LC]}},lengthCalculator:{configurable:!0,enumerable:!0,set:function(d){var h=this;"function"!==typeof d&&(d=jX);d!==this[EF]&&(this[EF]=d,this[Pr]=0,this[go].forEach(function(n){n.length=h[EF](n.value,n.key);h[Pr]+=n.length}));OI(this)},get:function(){return this[EF]}},length:{configurable:!0,enumerable:!0,get:function(){return this[Pr]}},itemCount:{configurable:!0,enumerable:!0,get:function(){return this[go].length}}});var kX=function(d,h,n){if(h=d[Ou].get(h)){var b=
h.value;if(LO(d,b)){if(FF(d,h),!d[NI])return}else n&&(d[G$]&&(h.value.now=Date.now()),d[go].unshiftNode(h));return b.value}},LO=function(d,h){if(!h||!h.maxAge&&!d[LC])return!1;var n=Date.now()-h.now;return h.maxAge?n>h.maxAge:d[LC]&&n>d[LC]},OI=function(d){if(d[Pr]>d[KC])for(var h=d[go].tail;d[Pr]>d[KC]&&null!==h;){var n=h.prev;FF(d,h);h=n}},FF=function(d,h){if(h){var n=h.value;if(d[yy])d[yy](n.key,n.value);d[Pr]-=n.length;d[Ou].delete(n.key);d[go].removeNode(h)}},eqa=function(d,h,n,b,e){this.key=
d;this.value=h;this.length=n;this.now=b;this.maxAge=e||0},H$=function(d,h,n,b){var e=n.value;LO(d,e)&&(FF(d,n),d[NI]||(e=void 0));e&&h.call(b,e.value,e.key,d)},Fga=cqa=Io,KS={},C1=!1,LS={},D1=!1,F1={},E1=!1,H1={},G1=!1,J1={},I1=!1,L1={},K1=!1,N1={},M1=!1,P1={},O1=!1,R1={},Q1=!1,T1={},S1=!1,V1={},U1=!1,X1={},W1=!1,Z1={},Y1=!1,a2={},$1=!1,c2={},b2=!1,e2={},d2=!1,g2={},f2=!1,i2={},h2=!1,I$={},J$=!1,PI=function(){if(J$)return I$;J$=!0;var d=gu();return I$={re:d.re,src:d.src,tokens:d.t,SEMVER_SPEC_VERSION:Co().SEMVER_SPEC_VERSION,
SemVer:Yl(),compareIdentifiers:Do().compareIdentifiers,rcompareIdentifiers:Do().rcompareIdentifiers,parse:Zv(),valid:xq(),clean:yq(),inc:$K(),diff:aL(),major:Dz(),minor:FB(),patch:El(),prerelease:mE(),compare:dp(),rcompare:bL(),compareLoose:pE(),compareBuild:Yk(),sort:NS(),rsort:$v(),gt:Km(),lt:$G(),eq:ZG(),neq:nE(),gte:Yh(),lte:aH(),cmp:cL(),coerce:GB(),Comparator:oE(),Range:uh(),satisfies:Ux(),toComparators:OS(),maxSatisfying:aw(),minSatisfying:dL(),minVersion:MS(),validRange:HB(),outside:Sg(),
gtr:hu(),ltr:qE(),intersects:IB(),simplifyRange:ej(),subset:eL()}}(),Vf=lively.FreezerRuntime.recorderFor("lively.serializer2/index.js");Vf.normalizeOptions=ep;Vf.normalizeMigrations=function(d){d=void 0===d?[]:d;return{before:d.filter(function(h){return"function"===typeof h.snapshotConverter}),after:d.filter(function(h){return"function"===typeof h.objectConverter})}};Vf.runMigrations=function(d,h,n,b){for(var e=0;e<d.length;e++){var l=d[e];try{n=l[h](n,b)}catch(a){console.error("migration "+l.name+
" failed:"),console.error(a)}}return n};Vf.serialize=bw;Vf.deserialize=iu;Vf.deserializeWithMigrations=JB;Vf.copy=KB;Vf.ObjectPool=Vj;Vf.serializerVersion="0.1.3";Vf.requiredModulesOfSnapshot=fu;Vf.removeUnreachableObjects=wr;Vf.clearDanglingConnections=iE;Vf.allPlugins=Jw;Vf.semver=PI;Vf.normalizeOptions=ep;Vf.normalizeOptions=ep;Vf.majorAndMinorVersionRe=/\.[^\.]+$/;Vf.ObjectRef=ht;Vf.ObjectRef=ht;Vf.ObjectPool=Vj;Vf.ObjectPool=Vj;Vf.requiredModulesOfSnapshot=fu;Vf.requiredModulesOfSnapshot=fu;
Vf.removeUnreachableObjects=wr;Vf.removeUnreachableObjects=wr;Vf.serialize=bw;Vf.serialize=bw;Vf.deserialize=iu;Vf.deserialize=iu;Vf.deserializeWithMigrations=JB;Vf.deserializeWithMigrations=JB;Vf.copy=KB;Vf.copy=KB;Vf.ExpressionSerializer=fo;Vf.serializeSpec=Jp;Vf.deserializeSpec=ur;Vf.getSerializableClassMeta=eu;Vf.locateClass=Cs;Vf.getClassName=tr;Vf.ExpressionSerializer=fo;Vf.ExpressionSerializer=fo;Vf.getSerializableClassMeta=eu;Vf.getSerializableClassMeta=eu;Vf.locateClass=Cs;Vf.locateClass=
Cs;Vf.serializeSpec=Jp;Vf.serializeSpec=Jp;Vf.deserializeSpec=ur;Vf.deserializeSpec=ur;Vf.getClassName=tr;Vf.getClassName=tr;Vf.allPlugins=Jw;Vf.allPlugins=Jw;var fqa=Object.freeze({__proto__:null,normalizeOptions:ep,ObjectRef:ht,ObjectPool:Vj,requiredModulesOfSnapshot:fu,removeUnreachableObjects:wr,serialize:bw,deserialize:iu,deserializeWithMigrations:JB,copy:KB,ExpressionSerializer:fo,getSerializableClassMeta:eu,locateClass:Cs,serializeSpec:Jp,deserializeSpec:ur,getClassName:tr,allPlugins:Jw}),
gqa={},Gga=Object.prototype.toString,lX=gqa=Array.isArray||PS,hqa={},QI=hqa="2",QS="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,K$={};zq.NONE=0;zq.VTEXT=1;zq.VNODE=2;zq.WIDGET=3;zq.PROPS=4;zq.ORDER=5;zq.INSERT=6;zq.REMOVE=7;zq.THUNK=8;K$=zq;zq.prototype.version=QI;zq.prototype.type="VirtualPatch";var zy=K$,iqa={},RI=iqa=function(d){return d&&"VirtualNode"===d.type&&d.version===QI},jqa={},MO=jqa=function(d){return d&&"VirtualText"===d.type&&d.version===QI},kqa={},
zA=kqa=function(d){return d&&"Widget"===d.type},lqa={},SI=lqa=function(d){return d&&"Thunk"===d.type},mqa={},Hga=RI,Iga=MO,Jga=zA,L$=mqa=function(d,h){var n=d,b=h;SI(h)&&(b=bH(h,d));SI(d)&&(n=bH(d,null));return{a:n,b:b}},nqa={},NO=nqa=function(d){return"object"===typeof d&&null!==d},oqa={},TI=oqa=function(d){return d&&("function"===typeof d.hook&&!d.hasOwnProperty("hook")||"function"===typeof d.unhook&&!d.hasOwnProperty("unhook"))},M$={},j2=NO,Kga=TI;M$=fL;var N$={},Nga=lX,Fl=zy,LB=RI,k2=MO,jL=zA,
iL=SI,Mga=L$,Lga=M$;N$=Lm;var pqa={},qqa=pqa=N$,rqa=Object.freeze({}),O$="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,sqa={},P$="undefined"!==typeof O$?O$:"undefined"!==typeof window?window:{};if("undefined"!==typeof document)var mX=document;else(mX=P$["__GLOBAL_DOCUMENT_CACHE@4"])||(mX=P$["__GLOBAL_DOCUMENT_CACHE@4"]=rqa);var Q$=sqa=mX,tqa={},l2=TI,R$=tqa=function(d,h,n){for(var b in h){var e=h[b];if(void 0===e)kL(d,b,e,n);else if(l2(e))kL(d,b,e,n),e.hook&&e.hook(d,
b,n?n[b]:void 0);else if(NO(e)){var l=void 0,a=void 0,f=d,m=b,r=n?n[m]:void 0;if("attributes"===m)for(a in e)l=e[a],void 0===l?f.removeAttribute(a):f.setAttribute(a,l);else if(r&&NO(r)&&lL(r)!==lL(e))f[m]=e;else for(l in NO(f[m])||(f[m]={}),a="style"===m?"":void 0,e)r=e[l],f[m][l]=void 0===r?a:r}else d[b]=e}},uqa={},m2=Q$,Sga=R$,Rga=RI,Qga=MO,Pga=zA,Oga=L$,S$=uqa=eH,vqa={},wqa=vqa=function(d,h){return zA(d)&&zA(h)?"name"in d&&"name"in h?d.id===h.id:d.init===h.init:!1},xqa={},Tga={},yqa=xqa=function(d,
h,n,b){return n&&0!==n.length?(n.sort(RS),mL(d,h,n,b,0)):{}},T$={},Uga=zA;T$=function(d,h,n){var b=d.vNode,e=d.patch;switch(d.type){case zy.REMOVE:return(e=h.parentNode)&&e.removeChild(h),nL(h,b),null;case zy.INSERT:return e=n.render(e,n),h&&h.appendChild(e),h;case zy.VTEXT:return 3===h.nodeType?(h.replaceData(0,h.length,e.text),e=h):(b=h.parentNode,e=n.render(e,n),b&&e!==h&&b.replaceChild(e,h)),e;case zy.WIDGET:return e=(d=wqa(b,e))?e.update(b,h)||h:n.render(e,n),(n=h.parentNode)&&e!==h&&n.replaceChild(e,
h),d||nL(h,b),e;case zy.VNODE:return b=h.parentNode,e=n.render(e,n),b&&e!==h&&b.replaceChild(e,h),e;case zy.ORDER:b=h.childNodes;n={};for(var l,a=0;a<e.removes.length;a++)l=e.removes[a],d=b[l.from],l.key&&(n[l.key]=d),h.removeChild(d);a=b.length;for(var f=0;f<e.inserts.length;f++)l=e.inserts[f],d=n[l.key],h.insertBefore(d,l.to>=a++?null:b[l.to]);return h;case zy.PROPS:return R$(h,e,b.properties),h;case zy.THUNK:return e=n.patch(h,e,n),h&&e&&h!==e&&h.parentNode&&h.parentNode.replaceChild(e,h),e;default:return h}};
var U$={},Xga=Q$,Yga=lX,Vga=S$,Wga=yqa,n2=T$;U$=oL;var zqa={},Aqa=zqa=U$,cw="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,V$={},bha=RI,cha=zA,dha=SI,aha=TI;V$=Ez;var Zga={},$ga=[];Ez.prototype.version=QI;Ez.prototype.type="VirtualNode";var nX=V$,eha="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,W$={};W$=sE;sE.prototype.version=QI;sE.prototype.type="VirtualText";var oX=W$,X$={};X$=function(d){var h=String.prototype.split,n=/()??/.exec("")[1]===
d;return function(b,e,l){if("[object RegExp]"!==Object.prototype.toString.call(e))return h.call(b,e,l);var a=[],f=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.extended?"x":"")+(e.sticky?"y":""),m=0;e=new RegExp(e.source,f+"g");var r,v;b+="";n||(r=new RegExp("^"+e.source+"$(?!\\s)",f));for(l=l===d?4294967295:l>>>0;v=e.exec(b);){f=v.index+v[0].length;if(f>m){a.push(b.slice(m,v.index));!n&&1<v.length&&v[0].replace(r,function(){for(var y=1;y<arguments.length-2;y++)arguments[y]===d&&(v[y]=d)});1<v.length&&
v.index<b.length&&Array.prototype.push.apply(a,v.slice(1));var x=v[0].length;m=f;if(a.length>=l)break}e.lastIndex===v.index&&e.lastIndex++}m===b.length?(x||!e.test(""))&&a.push(""):a.push(b.slice(m));return a.length>l?a.slice(0,l):a}}();var Bqa={},Cqa=X$,Dqa=/([\.#]?[a-zA-Z0-9\u007F-\uFFFF_:-]+)/,Eqa=/^\.|#/,Fqa=Bqa=function(d,h){if(!d)return"DIV";var n=!h.hasOwnProperty("id");d=Cqa(d,Dqa);var b=null;Eqa.test(d[1])&&(b="DIV");var e,l;for(l=0;l<d.length;l++)if(e=d[l]){var a=e.charAt(0);if(b)if("."===
a){var f=f||[];f.push(e.substring(1,e.length))}else"#"===a&&n&&(h.id=e.substring(1,e.length));else b=e}f&&(h.className&&f.push(h.className),h.className=f.join(" "));return h.namespace?b:b.toUpperCase()},Y$={};Y$=tE;tE.prototype.hook=function(d,h){d[h]!==this.value&&(d[h]=this.value)};var Gqa=Y$,Z$="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,$$={},pX="undefined"!==typeof window?window:"undefined"!==typeof Z$?Z$:{};$$=function(d,h){return d in pX?pX[d]:pX[d]=h};
var aaa={},baa=$$;aaa=function(d,h,n){var b="__INDIVIDUAL_ONE_VERSION_"+d,e=baa(b+"_ENFORCE_SINGLETON",h);if(e!==h)throw Error("Can only have one copy of "+d+".\nYou already have version "+e+" installed.\nThis means you cannot install version "+h);return baa(b,n)};var caa={};aaa("ev-store","7");caa=function(d){var h=d["__EV_STORE_KEY@7"];h||(h=d["__EV_STORE_KEY@7"]={});return h};var daa={},eaa=caa;daa=ku;ku.prototype.hook=function(d,h){d=eaa(d);h=h.substr(3);d[h]=this.value};ku.prototype.unhook=function(d,
h){d=eaa(d);h=h.substr(3);d[h]=void 0};var faa={},p2=lX,o2=oX,fha=RI,gha=MO,hha=zA,iha=SI,Hqa=daa;faa=function(d,h,n){var b=[],e;if(e=!n)e="string"===typeof h||p2(h)||pL(h);if(e){n=h;var l={}}l=l||h||{};d=Fqa(d,l);if(l.hasOwnProperty("key")){var a=l.key;l.key=void 0}if(l.hasOwnProperty("namespace")){var f=l.namespace;l.namespace=void 0}"INPUT"!==d||f||!l.hasOwnProperty("value")||void 0===l.value||TI(l.value)||(l.value=Gqa(l.value));h=l;for(var m in h)h.hasOwnProperty(m)&&(e=h[m],TI(e)||"ev-"===m.substr(0,
3)&&(h[m]=Hqa(e)));void 0!==n&&null!==n&&Ik(n,b,d,l);return new nX(d,l,b,a,f)};var Iqa={},Jqa=Iqa=faa,gaa={};gaa=S$;var Kqa={},UI=Kqa={diff:qqa,patch:Aqa,h:Jqa,create:gaa,VNode:nX,VText:oX},Lqa={},Mqa=Lqa={abbr:"abbr",accept:"accept","accept-charset":"acceptCharset",accesskey:"accessKey",action:"action",allowfullscreen:"allowFullScreen",allowtransparency:"allowTransparency",alt:"alt",async:"async",autocomplete:"autoComplete",autofocus:"autoFocus",autoplay:"autoPlay",cellpadding:"cellPadding",cellspacing:"cellSpacing",
challenge:"challenge",charset:"charset",checked:"checked",cite:"cite","class":"className",cols:"cols",colspan:"colSpan",command:"command",content:"content",contenteditable:"contentEditable",contextmenu:"contextMenu",controls:"controls",coords:"coords",crossorigin:"crossOrigin",data:"data",datetime:"dateTime","default":"default",defer:"defer",dir:"dir",disabled:"disabled",download:"download",draggable:"draggable",dropzone:"dropzone",enctype:"encType","for":"htmlFor",form:"form",formaction:"formAction",
formenctype:"formEncType",formmethod:"formMethod",formnovalidate:"formNoValidate",formtarget:"formTarget",frameBorder:"frameBorder",headers:"headers",height:"height",hidden:"hidden",high:"high",href:"href",hreflang:"hrefLang","http-equiv":"httpEquiv",icon:"icon",id:"id",inputmode:"inputMode",ismap:"isMap",itemid:"itemId",itemprop:"itemProp",itemref:"itemRef",itemscope:"itemScope",itemtype:"itemType",kind:"kind",label:"label",lang:"lang",list:"list",loop:"loop",manifest:"manifest",max:"max",maxlength:"maxLength",
media:"media",mediagroup:"mediaGroup",method:"method",min:"min",minlength:"minLength",multiple:"multiple",muted:"muted",name:"name",novalidate:"noValidate",open:"open",optimum:"optimum",pattern:"pattern",ping:"ping",placeholder:"placeholder",poster:"poster",preload:"preload",radiogroup:"radioGroup",readonly:"readOnly",rel:"rel",required:"required",role:"role",rows:"rows",rowspan:"rowSpan",sandbox:"sandbox",scope:"scope",scoped:"scoped",scrolling:"scrolling",seamless:"seamless",selected:"selected",
shape:"shape",size:"size",sizes:"sizes",sortable:"sortable",span:"span",spellcheck:"spellCheck",src:"src",srcdoc:"srcDoc",srcset:"srcSet",start:"start",step:"step",style:"style",tabindex:"tabIndex",target:"target",title:"title",translate:"translate",type:"type",typemustmatch:"typeMustMatch",usemap:"useMap",value:"value",width:"width",wmode:"wmode",wrap:"wrap"},haa={};haa={about:null,"accent-height":null,accumulate:null,additive:null,"alignment-baseline":null,alphabetic:null,amplitude:null,"arabic-form":null,
ascent:null,attributeName:null,attributeType:null,azimuth:null,bandwidth:null,baseFrequency:null,baseProfile:null,"baseline-shift":null,bbox:null,begin:null,bias:null,by:null,calcMode:null,"cap-height":null,"class":null,clip:null,"clip-path":null,"clip-rule":null,clipPathUnits:null,color:null,"color-interpolation":null,"color-interpolation-filters":null,"color-profile":null,"color-rendering":null,content:null,contentScriptType:null,contentStyleType:null,cursor:null,cx:null,cy:null,d:null,datatype:null,
defaultAction:null,descent:null,diffuseConstant:null,direction:null,display:null,divisor:null,"dominant-baseline":null,dur:null,dx:null,dy:null,edgeMode:null,editable:null,elevation:null,"enable-background":null,end:null,"ev:event":"http://www.w3.org/2001/xml-events",event:null,exponent:null,externalResourcesRequired:null,fill:null,"fill-opacity":null,"fill-rule":null,filter:null,filterRes:null,filterUnits:null,"flood-color":null,"flood-opacity":null,focusHighlight:null,focusable:null,"font-family":null,
"font-size":null,"font-size-adjust":null,"font-stretch":null,"font-style":null,"font-variant":null,"font-weight":null,format:null,from:null,fx:null,fy:null,g1:null,g2:null,"glyph-name":null,"glyph-orientation-horizontal":null,"glyph-orientation-vertical":null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:null,height:null,"horiz-adv-x":null,"horiz-origin-x":null,"horiz-origin-y":null,id:null,ideographic:null,"image-rendering":null,"in":null,in2:null,initialVisibility:null,
intercept:null,k:null,k1:null,k2:null,k3:null,k4:null,kernelMatrix:null,kernelUnitLength:null,kerning:null,keyPoints:null,keySplines:null,keyTimes:null,lang:null,lengthAdjust:null,"letter-spacing":null,"lighting-color":null,limitingConeAngle:null,local:null,"marker-end":null,"marker-mid":null,"marker-start":null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,
mediaSize:null,mediaTime:null,method:null,min:null,mode:null,name:null,"nav-down":null,"nav-down-left":null,"nav-down-right":null,"nav-left":null,"nav-next":null,"nav-prev":null,"nav-right":null,"nav-up":null,"nav-up-left":null,"nav-up-right":null,numOctaves:null,observer:null,offset:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,"overline-position":null,"overline-thickness":null,"panose-1":null,path:null,pathLength:null,patternContentUnits:null,
patternTransform:null,patternUnits:null,phase:null,playbackOrder:null,"pointer-events":null,points:null,pointsAtX:null,pointsAtY:null,pointsAtZ:null,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:null,r:null,radius:null,refX:null,refY:null,rel:null,"rendering-intent":null,repeatCount:null,repeatDur:null,requiredExtensions:null,requiredFeatures:null,requiredFonts:null,requiredFormats:null,resource:null,restart:null,result:null,rev:null,role:null,rotate:null,
rx:null,ry:null,scale:null,seed:null,"shape-rendering":null,slope:null,snapshotTime:null,spacing:null,specularConstant:null,specularExponent:null,spreadMethod:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,"stop-color":null,"stop-opacity":null,"strikethrough-position":null,"strikethrough-thickness":null,string:null,stroke:null,"stroke-dasharray":null,"stroke-dashoffset":null,"stroke-linecap":null,"stroke-linejoin":null,"stroke-miterlimit":null,"stroke-opacity":null,
"stroke-width":null,surfaceScale:null,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:null,tableValues:null,target:null,targetX:null,targetY:null,"text-anchor":null,"text-decoration":null,"text-rendering":null,textLength:null,timelineBegin:null,title:null,to:null,transform:null,transformBehavior:null,type:null,"typeof":null,u1:null,u2:null,"underline-position":null,"underline-thickness":null,unicode:null,"unicode-bidi":null,"unicode-range":null,
"units-per-em":null,"v-alphabetic":null,"v-hanging":null,"v-ideographic":null,"v-mathematical":null,values:null,version:null,"vert-adv-y":null,"vert-origin-x":null,"vert-origin-y":null,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,"word-spacing":null,"writing-mode":null,x:null,"x-height":null,x1:null,x2:null,xChannelSelector:null,"xlink:actuate":"http://www.w3.org/1999/xlink","xlink:arcrole":"http://www.w3.org/1999/xlink","xlink:href":"http://www.w3.org/1999/xlink","xlink:role":"http://www.w3.org/1999/xlink",
"xlink:show":"http://www.w3.org/1999/xlink","xlink:title":"http://www.w3.org/1999/xlink","xlink:type":"http://www.w3.org/1999/xlink","xml:base":"http://www.w3.org/XML/1998/namespace","xml:id":"http://www.w3.org/XML/1998/namespace","xml:lang":"http://www.w3.org/XML/1998/namespace","xml:space":"http://www.w3.org/XML/1998/namespace",y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null};var Nqa={},kha=nX,q2=oX,qX,r2=Mqa,jha=haa,Oqa=Nqa=function(d,h){if(!d)return hH(document.createTextNode(""));
if("string"===typeof d){if(!("DOMParser"in window))throw Error("DOMParser is not available, so parsing string to DOM node is not possible.");qX=qX||new DOMParser;d=qX.parseFromString(d,"text/html");d=d.body.firstChild?d.getElementsByTagName("body")[0].firstChild:d.head.firstChild&&("TITLE"!==d.head.firstChild.tagName||d.title)?d.head.firstChild:d.firstChild&&"HTML"!==d.firstChild.tagName?d.firstChild:document.createTextNode("")}if("object"!==typeof d||!d||!d.nodeType)throw Error("invalid dom node",
d);return hH(d,h)},Oi=lively.FreezerRuntime.recorderFor("lively.morphic/rendering/property-dom-mapping.js");Oi.styleProps=Fz;Oi.addTransform=tk;Oi.addTransformOrigin=function(d,h){if(d=d.origin)h.transformOrigin=d.x+"px "+d.y+"px"};Oi.addDisplay=function(d,h){d=d.visible;null!=d&&(h.display=d?"":"none")};Oi.addBorderRadius=function(d,h){var n=d.borderRadiusLeft,b=d.borderRadiusRight,e=d.borderRadiusBottom;d=d.borderRadiusTop;h.borderRadius=d+"px "+d+"px "+e+"px "+e+"px / "+n+"px "+b+"px "+b+"px "+
n+"px"};Oi.addBorder=function(d,h){var n=d.borderWidthLeft,b=d.borderColorLeft,e=d.borderStyleLeft,l=d.borderWidthRight,a=d.borderColorRight,f=d.borderStyleRight,m=d.borderColor,r=d.borderWidthBottom,v=d.borderColorBottom,x=d.borderStyleBottom,y=d.borderWidthTop,E=d.borderColorTop;d=d.borderStyleTop;var F=function(I){return Oi.bowser.safari?Oi.string.camelize(I):I};h[F("border-left-style")]=""+e;h[F("border-right-style")]=""+f;h[F("border-bottom-style")]=""+x;h[F("border-top-style")]=""+d;h[F("border-left-width")]=
n+"px";h[F("border-right-width")]=l+"px";h[F("border-bottom-width")]=r+"px";h[F("border-top-width")]=y+"px";h[F("border-top-color")]=E?E.toString():"transparent";h[F("border-right-color")]=a?a.toString():"transparent";h[F("border-bottom-color")]=v?v.toString():"transparent";h[F("border-left-color")]=b?b.toString():"transparent";m&&m.isGradient&&(h["border-image"]=m.toString())};Oi.addFill=function(d,h){(d=d.fill)?d.isGradient?h.backgroundImage=d.toString():h.background=d.toString():h.background=Oi.Color.transparent.toString()};
Oi.addExtentStyle=function(d,h){d=d.extent;h.width=d.x+"px";h.height=d.y+"px"};Oi.shadowCss=function(d){return d.dropShadow?d.dropShadow.toFilterCss():""};Oi.addShadowStyle=function(d,h){d.isSvgMorph||d.isImage?h.filter=Oi.shadowCss(d):(d=d.dropShadow)&&d.fast||d&&d.inset?h.boxShadow=d?d.toCss():"none":h.filter=d?d.toFilterCss():""};Oi.addSvgAttributes=De;Oi.getSvgVertices=Vx;Oi.addPathAttributes=ve;Oi.addSvgBorderStyle=function(d,h){var n=d.borderStyle.valueOf();"dashed"===n?(d=d.borderWidth.valueOf(),
h["stroke-dasharray"]=1.61*d+" "+d):"dotted"===n&&(h["stroke-dasharray"]="1 "+2*d.borderWidth.valueOf(),h["stroke-linecap"]="round",h["stroke-linejoin"]="round");return h};Oi.Color=xg;Oi.string=Th;Oi.bowser=gt;Oi.styleProps=Fz;Oi.styleProps=Fz;Oi.addTransform=tk;Oi.addTransform=tk;Oi.addSvgAttributes=De;Oi.addSvgAttributes=De;Oi.getSvgVertices=Vx;Oi.getSvgVertices=Vx;Oi.addPathAttributes=ve;Oi.addPathAttributes=ve;var Qe=lively.FreezerRuntime.recorderFor("lively.morphic/rendering/morphic-default.js");
Qe.defaultStyle=Es;Qe.MorphAfterRenderHook=function(d,h){this.morph=d;this.renderer=h};Qe.Animation=function(d){this.morph=d};Qe.SvgAnimation=Qc;Qe.defaultAttributes=Fs;Qe.svgAttributes=Gz;Qe.pathAttributes=Hz;Qe.renderGradient=Wx;Qe.initDOMState=function(d,h){d.rootNode.appendChild(d.domNode);d.ensureDefaultCSS().then(function(){return Qe.promise.delay(500)}).then(function(){return h.env.fontMetric&&h.env.fontMetric.reset()}).then(function(){return h.withAllSubmorphsDo(function(n){if(n.isText||n.isLabel){var b=
(n.metadata||{}).serializationInfo;b&&b.recoveredTextBounds||n.forceRerender()}})}).catch(function(n){return console.error(n)})};Qe.renderMorph=Iz;Qe.renderSubTree=Jz;Qe.renderRootMorph=Kz;Qe.vdom=UI;Qe.parser=Oqa;Qe.num=Um;Qe.obj=ng;Qe.arr=Mf;Qe.properties=Kr;Qe.promise=hg;Qe.Color=xg;Qe.RadialGradient=Qp;Qe.pt=Ei;Qe.Point=Dg;Qe.LinearGradient=zn;Qe.rect=dj;Qe.config=em;Qe.styleProps=Fz;Qe.addSvgAttributes=De;Qe.addPathAttributes=ve;Qe.bowser=gt;var OO=Qe.vdom;Qe.h=OO.h;Qe.diff=OO.diff;Qe.patch=
OO.patch;Qe.createNode=OO.create;Qe.defaultCSS="\n\n/*-=- html fixes -=-*/\n\nhtml {\n  overflow: visible;\n}\n\ntextarea.lively-text-input.debug {\n  z-index: 20 !important;\n  opacity: 1 !important;\n  background: rgba(0,255,0,0.5) !important;\n}\n\n.no-html-select {\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -khtml-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n\n.hiddenScrollbar::-webkit-scrollbar {\n  /* This is the magic bit */\n  display: none;\n}\n\n\n/*-=- generic morphic -=-*/\n\n.Morph {\n  outline: none;\n  /*for aliasing issue in chrome: http://stackoverflow.com/questions/6492027/css-transform-jagged-edges-in-chrome*/\n  /* -webkit-backface-visibility: hidden; */\n\n  /*include border size in extent of element*/\n  box-sizing: border-box;\n\n  /*don't use dom selection on morphs*/\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -khtml-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n\n.Morph img {\n  -moz-user-select: none;\n}\n\n.Tooltip {\n  z-index: 3;\n}\n\n.Hand {\n  z-index: 1;\n}\n\n/*-=- halos -=-*/\n\n.Halo {\n  z-index: 2;\n}\n\n.ProportionalLayoutHalo, .FlexLayoutHalo, .GridLayoutHalo, .TilingLayoutHalo {\n  z-index: auto;\n}\n\n.HaloItem:not(.NameHaloItem) {\n  /*FIXME: we shouldn't need to hardcode the size...*/\n  line-height: 24px !important;\n  text-align: center;\n  vertical-align: middle;\n}\n\n.halo-mesh {\n  background-color:transparent;\n  background-image: linear-gradient(rgba(0,0,0,.1) 2px, transparent 2px),\n  linear-gradient(90deg, rgba(0,0,0,.1) 2px, transparent 2px),\n  linear-gradient(rgba(0,0,0,.1) 1px, transparent 1px),\n  linear-gradient(90deg, rgba(0,0,0,.1) 1px, transparent 1px);\n  background-size:100px 100px, 100px 100px, 10px 10px, 10px 10px;\n  background-position:-2px -2px, -2px -2px, -1px -1px, -1px -1px;\n}\n\n/*-=- text -=-*/\n\n.center-text {\n  text-align: center;\n}\n\n.v-center-text {\n  position: relative;\n  top: 50%;\n}\n\ndiv.text-layer span {\n  line-height: normal;\n}\n\n/*-=- text -=-*/\n\n.Label span {\n  white-space: pre;\n  float: left;\n  line-height: initial;\n  -moz-user-select: none;\n}\n\n.Text .annotation {\n  text-align: right;\n  position: absolute;\n  right: 0;\n}\n\n.Label .annotation {\n/*  vertical-align: middle;\n  height: 100%;*/\n  /*vertical align*/\n  float: right;\n  position: relative;\n  top: 50%;\n  text-align: right;\n}\n\n.truncated-text {\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n/*-=- input elements -=-*/\n\ninput::-webkit-input-placeholder {\n  color: rgb(202, 202, 202);\n}\ninput::-moz-placeholder {\n  color: rgb(202, 202, 202);\n}\ninput:-ms-input-placeholder {\n  color: rgb(202, 202, 202);\n}\ninput:-moz-placeholder {\n  color: rgb(202, 202, 202);\n}\ninput:placeholder {\n  color: rgb(202, 202, 202);\n}\n\n/*-=- input elements -=-*/\n.Morph svg .path-point {\n  cursor: move; /* fallback if grab cursor is unsupported */\n  cursor: grab;\n  cursor: -moz-grab;\n  cursor: -webkit-grab;\n  fill: red;\n}\n\n";
Qe.defaultCSS="\n\n/*-=- html fixes -=-*/\n\nhtml {\n  overflow: visible;\n}\n\ntextarea.lively-text-input.debug {\n  z-index: 20 !important;\n  opacity: 1 !important;\n  background: rgba(0,255,0,0.5) !important;\n}\n\n.no-html-select {\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -khtml-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n\n.hiddenScrollbar::-webkit-scrollbar {\n  /* This is the magic bit */\n  display: none;\n}\n\n\n/*-=- generic morphic -=-*/\n\n.Morph {\n  outline: none;\n  /*for aliasing issue in chrome: http://stackoverflow.com/questions/6492027/css-transform-jagged-edges-in-chrome*/\n  /* -webkit-backface-visibility: hidden; */\n\n  /*include border size in extent of element*/\n  box-sizing: border-box;\n\n  /*don't use dom selection on morphs*/\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -khtml-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n\n.Morph img {\n  -moz-user-select: none;\n}\n\n.Tooltip {\n  z-index: 3;\n}\n\n.Hand {\n  z-index: 1;\n}\n\n/*-=- halos -=-*/\n\n.Halo {\n  z-index: 2;\n}\n\n.ProportionalLayoutHalo, .FlexLayoutHalo, .GridLayoutHalo, .TilingLayoutHalo {\n  z-index: auto;\n}\n\n.HaloItem:not(.NameHaloItem) {\n  /*FIXME: we shouldn't need to hardcode the size...*/\n  line-height: 24px !important;\n  text-align: center;\n  vertical-align: middle;\n}\n\n.halo-mesh {\n  background-color:transparent;\n  background-image: linear-gradient(rgba(0,0,0,.1) 2px, transparent 2px),\n  linear-gradient(90deg, rgba(0,0,0,.1) 2px, transparent 2px),\n  linear-gradient(rgba(0,0,0,.1) 1px, transparent 1px),\n  linear-gradient(90deg, rgba(0,0,0,.1) 1px, transparent 1px);\n  background-size:100px 100px, 100px 100px, 10px 10px, 10px 10px;\n  background-position:-2px -2px, -2px -2px, -1px -1px, -1px -1px;\n}\n\n/*-=- text -=-*/\n\n.center-text {\n  text-align: center;\n}\n\n.v-center-text {\n  position: relative;\n  top: 50%;\n}\n\ndiv.text-layer span {\n  line-height: normal;\n}\n\n/*-=- text -=-*/\n\n.Label span {\n  white-space: pre;\n  float: left;\n  line-height: initial;\n  -moz-user-select: none;\n}\n\n.Text .annotation {\n  text-align: right;\n  position: absolute;\n  right: 0;\n}\n\n.Label .annotation {\n/*  vertical-align: middle;\n  height: 100%;*/\n  /*vertical align*/\n  float: right;\n  position: relative;\n  top: 50%;\n  text-align: right;\n}\n\n.truncated-text {\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n/*-=- input elements -=-*/\n\ninput::-webkit-input-placeholder {\n  color: rgb(202, 202, 202);\n}\ninput::-moz-placeholder {\n  color: rgb(202, 202, 202);\n}\ninput:-ms-input-placeholder {\n  color: rgb(202, 202, 202);\n}\ninput:-moz-placeholder {\n  color: rgb(202, 202, 202);\n}\ninput:placeholder {\n  color: rgb(202, 202, 202);\n}\n\n/*-=- input elements -=-*/\n.Morph svg .path-point {\n  cursor: move; /* fallback if grab cursor is unsupported */\n  cursor: grab;\n  cursor: -moz-grab;\n  cursor: -webkit-grab;\n  fill: red;\n}\n\n";
Qe.defaultCSS="\n\n/*-=- html fixes -=-*/\n\nhtml {\n  overflow: visible;\n}\n\ntextarea.lively-text-input.debug {\n  z-index: 20 !important;\n  opacity: 1 !important;\n  background: rgba(0,255,0,0.5) !important;\n}\n\n.no-html-select {\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -khtml-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n\n.hiddenScrollbar::-webkit-scrollbar {\n  /* This is the magic bit */\n  display: none;\n}\n\n\n/*-=- generic morphic -=-*/\n\n.Morph {\n  outline: none;\n  /*for aliasing issue in chrome: http://stackoverflow.com/questions/6492027/css-transform-jagged-edges-in-chrome*/\n  /* -webkit-backface-visibility: hidden; */\n\n  /*include border size in extent of element*/\n  box-sizing: border-box;\n\n  /*don't use dom selection on morphs*/\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -khtml-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n\n.Morph img {\n  -moz-user-select: none;\n}\n\n.Tooltip {\n  z-index: 3;\n}\n\n.Hand {\n  z-index: 1;\n}\n\n/*-=- halos -=-*/\n\n.Halo {\n  z-index: 2;\n}\n\n.ProportionalLayoutHalo, .FlexLayoutHalo, .GridLayoutHalo, .TilingLayoutHalo {\n  z-index: auto;\n}\n\n.HaloItem:not(.NameHaloItem) {\n  /*FIXME: we shouldn't need to hardcode the size...*/\n  line-height: 24px !important;\n  text-align: center;\n  vertical-align: middle;\n}\n\n.halo-mesh {\n  background-color:transparent;\n  background-image: linear-gradient(rgba(0,0,0,.1) 2px, transparent 2px),\n  linear-gradient(90deg, rgba(0,0,0,.1) 2px, transparent 2px),\n  linear-gradient(rgba(0,0,0,.1) 1px, transparent 1px),\n  linear-gradient(90deg, rgba(0,0,0,.1) 1px, transparent 1px);\n  background-size:100px 100px, 100px 100px, 10px 10px, 10px 10px;\n  background-position:-2px -2px, -2px -2px, -1px -1px, -1px -1px;\n}\n\n/*-=- text -=-*/\n\n.center-text {\n  text-align: center;\n}\n\n.v-center-text {\n  position: relative;\n  top: 50%;\n}\n\ndiv.text-layer span {\n  line-height: normal;\n}\n\n/*-=- text -=-*/\n\n.Label span {\n  white-space: pre;\n  float: left;\n  line-height: initial;\n  -moz-user-select: none;\n}\n\n.Text .annotation {\n  text-align: right;\n  position: absolute;\n  right: 0;\n}\n\n.Label .annotation {\n/*  vertical-align: middle;\n  height: 100%;*/\n  /*vertical align*/\n  float: right;\n  position: relative;\n  top: 50%;\n  text-align: right;\n}\n\n.truncated-text {\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n/*-=- input elements -=-*/\n\ninput::-webkit-input-placeholder {\n  color: rgb(202, 202, 202);\n}\ninput::-moz-placeholder {\n  color: rgb(202, 202, 202);\n}\ninput:-ms-input-placeholder {\n  color: rgb(202, 202, 202);\n}\ninput:-moz-placeholder {\n  color: rgb(202, 202, 202);\n}\ninput:placeholder {\n  color: rgb(202, 202, 202);\n}\n\n/*-=- input elements -=-*/\n.Morph svg .path-point {\n  cursor: move; /* fallback if grab cursor is unsupported */\n  cursor: grab;\n  cursor: -moz-grab;\n  cursor: -webkit-grab;\n  fill: red;\n}\n\n";
var it=Ha("aM",function(d){var h=lively.FreezerRuntime.recorderFor("lively.morphic/rendering/morphic-default.js"),n=h.hasOwnProperty("ShadowObject")&&"function"===typeof h.ShadowObject?h.ShadowObject:h.ShadowObject=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Pb(n,d,[{key:Symbol.for("lively-instance-initialize"),value:function(b){Qe.obj.isBoolean(b)&&(b=Qe.config.defaultShadow);var e=b;b=e.rotation;var l=e.distance,
a=e.blur,f=e.color,m=e.morph,r=e.inset,v=e.spread;e=e.fast;this.rotation=Qe.obj.isNumber(b)?b:45;this.distance=Qe.obj.isNumber(l)?l:2;this.blur=Qe.obj.isNumber(a)?a:6;this.inset=r||!1;this.spread=v||0;this.color=f||Qe.Color.gray.darker();this.morph=m;this.fast=e}},{key:"__dont_serialize__",get:function(){return["morph"]}},{key:"distance",get:function(){return this._distance}},{key:"blur",get:function(){return this._blur}},{key:"rotation",get:function(){return this._rotation}},{key:"color",get:function(){return this._color}},
{key:"inset",get:function(){return this._inset}},{key:"inset",set:function(b){this._inset=b;this.morph&&(this.morph.dropShadow=this)}},{key:"distance",set:function(b){this._distance=b;this.morph&&(this.morph.dropShadow=this)}},{key:"blur",set:function(b){this._blur=b;this.morph&&(this.morph.dropShadow=this)}},{key:"rotation",set:function(b){this._rotation=b;this.morph&&(this.morph.dropShadow=this)}},{key:"color",set:function(b){this._color=b;this.morph&&(this.morph.dropShadow=this)}},{key:"isShadowObject",
get:function(){return!0}},{key:"__serialize__",value:function(){var b=this.toJson(),e=b.distance,l=b.rotation,a=b.color,f=b.inset,m=b.blur,r=b.spread;b=b.fast;a=a.toJSExpr();return{__expr__:"new ShadowObject({"+Object.entries({distance:e,rotation:l,color:a,inset:f,blur:m,spread:r,fast:b}).map(function(v){var x=$jscomp.makeIterator(v);v=x.next().value;x=x.next().value;return v+":"+x})+"})",bindings:{"lively.graphics/color.js":["Color"],"lively.morphic":["ShadowObject"]}}}},{key:"with",value:function(b){return new Qe.ShadowObject(Object.assign({distance:this.distance,
rotation:this.rotation,color:this.color,inset:this.inset,blur:this.blur,spread:this.spread,fast:this.fast},b))}},{key:"toCss",value:function(){var b=this.color,e=this.inset,l=this.blur,a=this.spread,f=Qe.Point.polar(this.distance,Qe.num.toRadians(this.rotation)),m=f.y;return(e?"inset":"")+" "+b.toString()+" "+f.x.toFixed(2)+"px "+m.toFixed(2)+"px "+l+"px "+a+"px"}},{key:"toJson",value:function(){return Qe.obj.select(this,"rotation distance blur color inset spread fast".split(" "))}},{key:"equals",
value:function(b){return!!b&&Qe.obj.equals(this.toJson(),b.toJson())}},{key:"toFilterCss",value:function(){var b=this.blur,e=this.color,l=Qe.Point.polar(this.distance,Qe.num.toRadians(this.rotation)),a=l.x;l=l.y;b=Qe.bowser.chrome?b/3:b/2;return"drop-shadow("+a.toFixed(2)+"px "+l.toFixed(2)+"px "+b.toFixed(2)+"px "+e.toString()+")"}},{key:"interpolate",value:function(b,e){return new Qe.ShadowObject({distance:Qe.num.interpolate(b,this.distance,e.distance),rotation:Qe.num.interpolate(b,this.rotation,
e.rotation),color:this.color.interpolate(b,e.color),blur:Qe.num.interpolate(b,this.blur,e.blur),spread:Qe.num.interpolate(b,this.spread,e.spread),inset:e.inset,fast:e.fast})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ShadowObject"}}],h,{pathInPackage:function(){return"rendering/morphic-default.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",
version:"0.1.2"}}},{start:3438,end:7097})}(void 0));Qe.ShadowObject=it;Qe.ShadowObject=it;Qe.ShadowObject=it;Qe.defaultStyle=Es;Qe.defaultStyle=Es;Qe.MorphAfterRenderHook.prototype.hook=function(d,h,n,b){var e=this;b=void 0===b?0:b;var l=!!d.parentNode;l&&(this.morph._submorphOrderChanged&&this.morph.submorphs.length?(this.morph._submorphOrderChanged=!1,this.updateScrollOfSubmorphs(this.morph,this.renderer)):this.morph.isClip()&&this.updateScroll(this.morph,d));l||3<b?(this.morph._rendering=!1,this.morph.onAfterRender(d)):
(b++,setTimeout(function(){return e.hook(d,h,n,b)},20*b))};Qe.MorphAfterRenderHook.prototype.updateScroll=function(d,h,n){var b=this,e=d.env.eventDispatcher.eventState.scroll.interactiveScrollInProgress;if(h&&e)return e.then(function(){return b.updateScroll(d,h,!0)});if(!d.isWorld&&h){e=d.scroll;var l=e.x,a=e.y;if(!d._animationQueue.animations.find(function(m){return m.animatedProps.scroll})){var f=d.isText&&d.viewState.fastScroll?h.querySelector(".scrollLayer"):h;!d._skipScrollUpdate&&f&&(f.scrollTop!==
a&&(f.scrollTop=a),f.scrollLeft!==l&&(f.scrollLeft=l),!n&&requestAnimationFrame(function(){f.scrollTop!==a&&(f.scrollTop=a);f.scrollLeft!==l&&(f.scrollLeft=l)},d.id))}}};Qe.MorphAfterRenderHook.prototype.unhook=function(d,h){};Qe.MorphAfterRenderHook.prototype.updateScrollOfSubmorphs=function(d,h){var n=this;d.submorphs.forEach(function(b){b.isClip()&&n.updateScroll(b,h.getNodeForMorph(b));n.updateScrollOfSubmorphs(b,h)})};Qe.Animation.prototype.hook=function(d){this.morph._animationQueue.startAnimationsFor(d)};
Qe.SvgAnimation=Qc;Qe.SvgAnimation=Qc;Qe.SvgAnimation.prototype.hook=function(d){this.morph._animationQueue.startSvgAnimationsFor(d,this.type)};Qe.defaultAttributes=Fs;Qe.defaultAttributes=Fs;Qe.svgAttributes=Gz;Qe.svgAttributes=Gz;Qe.pathAttributes=Hz;Qe.pathAttributes=Hz;Qe.renderGradient=Wx;Qe.renderGradient=Wx;Qe.renderMorph=Iz;Qe.renderMorph=Iz;Qe.renderSubTree=Jz;Qe.renderSubTree=Jz;Qe.renderRootMorph=Kz;Qe.renderRootMorph=Kz;var wc="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?
self:global,rX={};!function(d,h){h(rX)}(rX,function(d){function h(oa){return 10===oa||13===oa||8232===oa||8233===oa||32===oa||9===oa||11===oa||12===oa||160===oa||5760<=oa&&0<=MC.indexOf(oa)}function n(oa){return 48<=oa&&57>=oa}function b(oa){(this||wc).index=0;(this||wc).path=oa;(this||wc).max=oa.length;(this||wc).result=[];(this||wc).param=0;(this||wc).err="";(this||wc).segmentStart=0;(this||wc).data=[]}function e(oa){for(;oa.index<oa.max&&h(oa.path.charCodeAt(oa.index));)oa.index++}function l(oa){var Na,
Ia=oa.index,Za=Ia,jb=oa.max,Ub=!1,ab=!1,Mb=!1,Db=!1;if(Za>=jb)return void(oa.err="SvgPath: missed param (at pos "+Za+")");if(Na=oa.path.charCodeAt(Za),43!==Na&&45!==Na||(Za++,Na=Za<jb?oa.path.charCodeAt(Za):0),!n(Na)&&46!==Na)return void(oa.err="SvgPath: param should start with 0..9 or `.` (at pos "+Za+")");if(46!==Na){if(Ub=48===Na,Za++,Na=Za<jb?oa.path.charCodeAt(Za):0,Ub&&Za<jb&&Na&&n(Na))return void(oa.err="SvgPath: numbers started with `0` such as `09` are ilegal (at pos "+Ia+")");for(;Za<jb&&
n(oa.path.charCodeAt(Za));)Za++,ab=!0;Na=Za<jb?oa.path.charCodeAt(Za):0}if(46===Na){Db=!0;for(Za++;n(oa.path.charCodeAt(Za));)Za++,Mb=!0;Na=Za<jb?oa.path.charCodeAt(Za):0}if(101===Na||69===Na){if(Db&&!ab&&!Mb||(Za++,Na=Za<jb?oa.path.charCodeAt(Za):0,43!==Na&&45!==Na||Za++,!(Za<jb&&n(oa.path.charCodeAt(Za)))))return void(oa.err="SvgPath: invalid float exponent (at pos "+Za+")");for(;Za<jb&&n(oa.path.charCodeAt(Za));)Za++}oa.index=Za;oa.param=parseFloat(oa.path.slice(Ia,Za))+0}function a(){if(!((this||
wc)instanceof a))return new a;(this||wc).queue=[];(this||wc).cache=null}function f(oa,Na,Ia,Za){var jb=(oa*Ia+Na*Za)/(Math.sqrt(oa*oa+Na*Na)*Math.sqrt(oa*oa+Na*Na));return 1<jb&&(jb=1),-1>jb&&(jb=-1),(0>oa*Za-Na*Ia?-1:1)*Math.acos(jb)}function m(oa,Na,Ia,Za,jb,Ub,ab,Mb,Db,Rc){var Ib=Rc*(oa-Ia)/2+Db*(Na-Za)/2,Ud=-Db*(oa-Ia)/2+Rc*(Na-Za)/2,ue=ab*ab,Cf=Mb*Mb,Df=Ib*Ib,Oe=Ud*Ud,Ef=ue*Cf-ue*Oe-Cf*Df;0>Ef&&(Ef=0);Ef=Math.sqrt(Ef/(ue*Oe+Cf*Df))*(jb===Ub?-1:1);jb=Ef*ab/Mb*Ud;Ef=Ef*-Mb/ab*Ib;oa=Rc*jb-Db*Ef+
(oa+Ia)/2;Na=Db*jb+Rc*Ef+(Na+Za)/2;Za=(Ib-jb)/ab;Db=(Ud-Ef)/Mb;ab=(-Ib-jb)/ab;Ud=(-Ud-Ef)/Mb;Mb=f(1,0,Za,Db);Ud=f(Za,Db,ab,Ud);return 0===Ub&&0<Ud&&(Ud-=NC),1===Ub&&0>Ud&&(Ud+=NC),[oa,Na,Mb,Ud]}function r(oa,Na){var Ia=4/3*Math.tan(Na/4),Za=Math.cos(oa),jb=Math.sin(oa),Ub=Math.cos(oa+Na);oa=Math.sin(oa+Na);return[Za,jb,Za-jb*Ia,jb+Za*Ia,Ub+oa*Ia,oa-Ub*Ia,Ub,oa]}function v(oa,Na,Ia){if(!((this||wc)instanceof v))return new v(oa,Na,Ia);(this||wc).rx=oa;(this||wc).ry=Na;(this||wc).ax=Ia}function x(oa){if(!((this||
wc)instanceof x))return new x(oa);oa=new b(oa);var Na=oa.max;for(e(oa);oa.index<Na&&!oa.err.length;)a:{var Ia,Za=void 0,jb=oa,Ub=jb.max;jb.segmentStart=jb.index;var ab=jb.path.charCodeAt(jb.index);b:{switch(32|ab){case 109:case 122:case 108:case 104:case 118:case 99:case 115:case 113:case 116:case 97:case 114:ab=!0;break b}ab=!1}if(ab){if(Za=Kw[jb.path[jb.index].toLowerCase()],jb.index++,e(jb),jb.data=[],Za)for(ab=!1;;){for(Ia=Za;0<Ia;Ia--){if(l(jb),jb.err.length)break a;jb.data.push(jb.param);e(jb);
ab=!1;jb.index<Ub&&44===jb.path.charCodeAt(jb.index)&&(jb.index++,e(jb),ab=!0)}if(!ab){if(jb.index>=jb.max)break;Ia=jb.path.charCodeAt(jb.index);if(!(48<=Ia&&57>=Ia||43===Ia||45===Ia||46===Ia))break}}Ub=jb;jb=Ub.path[Ub.segmentStart];Za=jb.toLowerCase();ab=Ub.data;if("m"===Za&&2<ab.length&&(Ub.result.push([jb,ab[0],ab[1]]),ab=ab.slice(2),Za="l",jb="m"===jb?"l":"L"),"r"===Za)Ub.result.push([jb].concat(ab));else for(;ab.length>=Kw[Za]&&(Ub.result.push([jb].concat(ab.splice(0,Kw[Za]))),Kw[Za]););}else jb.err=
"SvgPath: bad command "+jb.path[jb.index]+" (at pos "+jb.index+")"}oa=(oa.err.length?oa.result=[]:oa.result.length&&(0>"mM".indexOf(oa.result[0][0])?(oa.err="SvgPath: string should start with `M` or `m`",oa.result=[]):oa.result[0][0]="M"),{err:oa.err,segments:oa.result});(this||wc).segments=oa.segments;(this||wc).err=oa.err;(this||wc).__stack=[]}function y(oa,Na,Ia,Za,jb,Ub,ab,Mb){(this||wc).a={x:oa,y:Na};(this||wc).b={x:Ia,y:Za};(this||wc).c={x:jb,y:Ub};(this||wc).d={x:ab,y:Mb};null!==ab&&void 0!==
ab&&null!==Mb&&void 0!==Mb?((this||wc).getArcLength=W,(this||wc).getPoint=P,(this||wc).getDerivative=F):((this||wc).getArcLength=N,(this||wc).getPoint=J,(this||wc).getDerivative=E);this.init()}function E(oa,Na,Ia){return{x:2*(1-Ia)*(oa[1]-oa[0])+2*Ia*(oa[2]-oa[1]),y:2*(1-Ia)*(Na[1]-Na[0])+2*Ia*(Na[2]-Na[1])}}function F(oa,Na,Ia){return J([3*(oa[1]-oa[0]),3*(oa[2]-oa[1]),3*(oa[3]-oa[2])],[3*(Na[1]-Na[0]),3*(Na[2]-Na[1]),3*(Na[3]-Na[2])],Ia)}function I(oa,Na,Ia,Za,jb){for(var Ub=1,ab=oa/Na,Mb=(oa-Ia(Za,
jb,ab))/Na;.001<Ub;){var Db=Ia(Za,jb,ab+Mb),Rc=Ia(Za,jb,ab-Mb);Db=Math.abs(oa-Db)/Na;Rc=Math.abs(oa-Rc)/Na;Db<Ub?(Ub=Db,ab+=Mb):Rc<Ub?(Ub=Rc,ab-=Mb):Mb/=2}return ab}function J(oa,Na,Ia){return{x:(1-Ia)*(1-Ia)*oa[0]+2*(1-Ia)*Ia*oa[1]+Ia*Ia*oa[2],y:(1-Ia)*(1-Ia)*Na[0]+2*(1-Ia)*Ia*Na[1]+Ia*Ia*Na[2]}}function P(oa,Na,Ia){return{x:(1-Ia)*(1-Ia)*(1-Ia)*oa[0]+3*(1-Ia)*(1-Ia)*Ia*oa[1]+3*(1-Ia)*Ia*Ia*oa[2]+Ia*Ia*Ia*oa[3],y:(1-Ia)*(1-Ia)*(1-Ia)*Na[0]+3*(1-Ia)*(1-Ia)*Ia*Na[1]+3*(1-Ia)*Ia*Ia*Na[2]+Ia*Ia*Ia*Na[3]}}
function N(oa,Na,Ia){void 0===Ia&&(Ia=1);var Za=oa[0]-2*oa[1]+oa[2],jb=Na[0]-2*Na[1]+Na[2],Ub=2*oa[1]-2*oa[0],ab=2*Na[1]-2*Na[0],Mb=4*(Za*Za+jb*jb);if(0===Mb)return Ia*Math.sqrt(Math.pow(oa[2]-oa[0],2)+Math.pow(Na[2]-Na[0],2));oa=4*(Za*Ub+jb*ab)/(2*Mb);Ia+=oa;Ub=(Ub*Ub+ab*ab)/Mb-oa*oa;return Math.sqrt(Mb)/2*(Ia*Math.sqrt(Ia*Ia+Ub)-oa*Math.sqrt(oa*oa+Ub)+Ub*Math.log(Math.abs((Ia+Math.sqrt(Ia*Ia+Ub))/(oa+Math.sqrt(oa*oa+Ub)))))}function Y(oa,Na,Ia){var Za,jb=Ia.length-1;if(0===jb)return 0;if(0===oa){for(Za=
oa=0;Za<=jb;Za++)oa+=sX[jb][Za]*Math.pow(1-Na,jb-Za)*Math.pow(Na,Za)*Ia[Za];return oa}var Ub=Array(jb);for(Za=0;Za<jb;Za++)Ub[Za]=jb*(Ia[Za+1]-Ia[Za]);return Y(oa-1,Na,Ub)}function W(oa,Na,Ia){var Za,jb;void 0===Ia&&(Ia=1);Ia/=2;for(jb=Za=0;20>jb;jb++){var Ub=Ia*tX[20][jb]+Ia;var ab=uX[20][jb],Mb=Na,Db=Ub;Ub=Y(1,Db,oa);Mb=Y(1,Db,Mb);Za+=ab*Math.sqrt(Ub*Ub+Mb*Mb)}return Ia*Za}function da(oa,Na,Ia,Za){var jb=oa*Ia+Na*Za;return 1<jb&&(jb=1),-1>jb&&(jb=-1),(0>oa*Za-Na*Ia?-1:1)*Math.acos(jb)}function va(oa,
Na,Ia,Za,jb,Ub,ab,Mb,Db,Rc){var Ib=Rc*(oa-Ia)/2+Db*(Na-Za)/2,Ud=-Db*(oa-Ia)/2+Rc*(Na-Za)/2,ue=ab*ab,Cf=Mb*Mb,Df=Ib*Ib,Oe=Ud*Ud,Ef=ue*Cf-ue*Oe-Cf*Df;0>Ef&&(Ef=0);Ef=Math.sqrt(Ef/(ue*Oe+Cf*Df))*(jb===Ub?-1:1);jb=Ef*ab/Mb*Ud;Ef=Ef*-Mb/ab*Ib;oa=Rc*jb-Db*Ef+(oa+Ia)/2;Na=Db*jb+Rc*Ef+(Na+Za)/2;Za=(Ib-jb)/ab;Db=(Ud-Ef)/Mb;ab=(-Ib-jb)/ab;Ud=(-Ud-Ef)/Mb;Mb=da(1,0,Za,Db);Ud=da(Za,Db,ab,Ud);return 0===Ub&&0<Ud&&(Ud-=OC),1===Ub&&0>Ud&&(Ud+=OC),[oa,Na,Mb,Ud]}function za(oa,Na){var Ia=4/3*Math.tan(Na/4),Za=Math.cos(oa),
jb=Math.sin(oa),Ub=Math.cos(oa+Na);oa=Math.sin(oa+Na);return[Za,jb,Za-jb*Ia,jb+Za*Ia,Ub+oa*Ia,oa-Ub*Ia,Ub,oa]}function L(oa,Na,Ia,Za,jb,Ub,ab,Mb,Db){var Rc=0,Ib=[],Ud=[];vX(oa,Na,Ia,Za,jb,Ub,ab,Mb,Db).forEach(function(ue){ue=new Qr(ue[0],ue[1],ue[2],ue[3],ue[4],ue[5],ue[6],ue[7]);var Cf=ue.getTotalLength();Rc+=Cf;Ib.push(Cf);Ud.push(ue)});(this||wc).length=Rc;(this||wc).partialLengths=Ib;(this||wc).curves=Ud}function Z(oa,Na,Ia,Za){(this||wc).x0=oa;(this||wc).x1=Na;(this||wc).y0=Ia;(this||wc).y1=
Za}function R(oa,Na){return Math.sqrt((oa[0]-Na[0])*(oa[0]-Na[0])+(oa[1]-Na[1])*(oa[1]-Na[1]))}function X(oa,Na,Ia){return[oa[0]+(Na[0]-oa[0])*Ia,oa[1]+(Na[1]-oa[1])*Ia]}function ja(oa,Na,Ia){var Za=oa.map(function(jb,Ub){return fa(jb,Na[Ub])});return function(jb){var Ub=Za.map(function(ab){return ab(jb)});return Ia?ta(Ub):Ub}}function fa(oa,Na){return function(Ia){return oa.map(function(Za,jb){return Za+Ia*(Na[jb]-Za)})}}function ua(oa){return"number"==typeof oa&&isFinite(oa)}function gb(oa){var Na;
a:{for(Na=0;Na<oa.length-2;Na++){var Ia=oa[Na],Za=oa[Na+1],jb=oa[Na+2];if(Ia[0]*(Za[1]-jb[1])+Za[0]*(jb[1]-Ia[1])+jb[0]*(Ia[1]-Za[1])){Na=!0;break a}}Na=!1}if(Na){jb=-1;var Ub=oa.length,ab=0,Mb=0,Db=oa[Ub-1];for(Na=0;++jb<Ub;)Ia=Db,Db=oa[jb],Na+=Za=Ia[0]*Db[1]-Db[0]*Ia[1],ab+=(Ia[0]+Db[0])*Za,Mb+=(Ia[1]+Db[1])*Za;oa=(Na*=3,[ab/Na,Mb/Na])}else oa=[(oa[0][0]+oa[oa.length-1][0])/2,(oa[0][1]+oa[oa.length-1][1])/2];return oa}function hb(oa){return oa.toString().split("M").map(function(Na,Ia){return Na=
Na.trim(),Ia&&Na?"M"+Na:Na}).filter(function(Na){return Na})}function ta(oa){return"M"+oa.join("L")+"Z"}function na(oa,Na){var Ia=oa.length+Na;Na=Ay(oa)/Na;for(var Za=0,jb=0,Ub=Na/2;oa.length<Ia;){var ab=oa[Za],Mb=oa[(Za+1)%oa.length],Db=R(ab,Mb);Ub<=jb+Db?(oa.splice(Za+1,0,Db?X(ab,Mb,(Ub-jb)/Db):ab.slice(0)),Ub+=Na):(jb+=Db,Za++)}}function pa(oa,Na){var Ia;if("string"==typeof oa){oa=(new PO(oa)).abs();a:{var Za=oa.segments||[];var jb=[];if(Za.length&&"M"===Za[0][0]){for(var Ub=0;Ub<Za.length;Ub++){var ab=
Za[Ub],Mb=ab[0],Db=ab[1];ab=ab[2];if("M"===Mb&&Ub||"Z"===Mb)break;if("M"===Mb||"L"===Mb)jb.push([Db,ab]);else if("H"===Mb)jb.push([Db,jb[jb.length-1][1]]);else{if("V"!==Mb){Za=!1;break a}jb.push([jb[jb.length-1][0],Db])}}Za=!!jb.length&&{ring:jb}}else Za=!1}if(!Za){jb=hb(oa)[0];oa=[];Za=3;if(!jb)throw new TypeError(GF);a:{if("undefined"!=typeof window&&window&&window.document)try{var Rc=window.document.createElementNS("http://www.w3.org/2000/svg","path");var Ib=(Rc.setAttributeNS(null,"d",jb),Rc);
break a}catch(Ud){}Ib=QO(jb)}Rc=Ib;Ib=Rc.getTotalLength();Na&&ua(Na)&&0<Na&&(Za=Math.max(Za,Math.ceil(Ib/Na)));for(jb=0;jb<Za;jb++)Ub=Rc.getPointAtLength(Ib*jb/Za),oa.push([Ub.x,Ub.y]);Za={ring:oa,skipBisect:!0}}Ib=Za;oa=Ib.ring;Za=Ib.skipBisect}else if(!Array.isArray(oa))throw new TypeError(GF);if(Ia=oa.slice(0),!La(Ia))throw new TypeError(GF);1<Ia.length&&1E-9>R(Ia[0],Ia[Ia.length-1])&&Ia.pop();0<AA(Ia)&&Ia.reverse();if(!Za&&Na&&ua(Na)&&0<Na)for(void 0===Na&&(Na=1/0),Ib=0;Ib<Ia.length;Ib++)for(Rc=
Ia[Ib],oa=Ib===Ia.length-1?Ia[0]:Ia[Ib+1];R(Rc,oa)>Na;)oa=X(Rc,oa,.5),Ia.splice(Ib+1,0,oa);return Ia}function La(oa){return oa.every(function(Na){return Array.isArray(Na)&&2<=Na.length&&ua(Na[0])&&ua(Na[1])})}function Hb(oa,Na,Ia){var Za;return Za=oa.length-Na.length,na(oa,0>Za?-1*Za:0),na(Na,0<Za?Za:0),Lw(oa,Na),ja(oa,Na,Ia)}function fc(oa,Na,Ia){Ia=Ia||2;var Za=Na&&Na.length,jb=Za?Na[0]*Ia:oa.length,Ub=Ob(oa,0,jb,Ia,!0),ab=[];if(!Ub)return ab;var Mb;if(Za){var Db=Ia,Rc;var Ib=[];Za=0;for(Rc=Na.length;Za<
Rc;Za++){var Ud=Na[Za]*Db;var ue=Za<Rc-1?Na[Za+1]*Db:oa.length;Ud=Ob(oa,Ud,ue,Db,!1);Ud===Ud.next&&(Ud.steiner=!0);Ib.push(ma(Ud))}Ib.sort(Gb);for(Za=0;Za<Ib.length;Za++){Na=Ib[Za];Db=Ub;if(Db=dd(Na,Db))Na=ud(Db,Na),Zb(Na,Na.next);Ub=Zb(Ub,Ub.next)}}if(oa.length>80*Ia){var Cf=Mb=oa[0];var Df=Za=oa[1];for(Db=Ia;Db<jb;Db+=Ia)Ib=oa[Db],Na=oa[Db+1],Ib<Cf&&(Cf=Ib),Na<Df&&(Df=Na),Ib>Mb&&(Mb=Ib),Na>Za&&(Za=Na);Mb=Math.max(Mb-Cf,Za-Df)}return Hc(Ub,ab,Ia,Cf,Df,Mb),ab}function Ob(oa,Na,Ia,Za,jb){if(jb===0<
Uh(oa,Na,Ia,Za))for(jb=Na;jb<Ia;jb+=Za)var Ub=Jc(jb,oa[jb],oa[jb+1],Ub);else for(jb=Ia-Za;jb>=Na;jb-=Za)Ub=Jc(jb,oa[jb],oa[jb+1],Ub);return Ub&&vb(Ub,Ub.next)&&(Re(Ub),Ub=Ub.next),Ub}function Zb(oa,Na){if(!oa)return oa;Na||(Na=oa);var Ia=oa;do if(oa=!1,Ia.steiner||!vb(Ia,Ia.next)&&0!==Ja(Ia.prev,Ia,Ia.next))Ia=Ia.next;else{if(Re(Ia),(Ia=Na=Ia.prev)===Ia.next)return null;oa=!0}while(oa||Ia!==Na);return Na}function Hc(oa,Na,Ia,Za,jb,Ub,ab){if(oa){if(!ab&&Ub){var Mb=oa,Db=Mb;do null===Db.z&&(Db.z=Gd(Db.x,
Db.y,Za,jb,Ub)),Db.prevZ=Db.prev,Db=Db.nextZ=Db.next;while(Db!==Mb);Db.prevZ.nextZ=null;Db.prevZ=null;Mb=Db;var Rc,Ib,Ud,ue,Cf=1;do{Db=Mb;var Df=Mb=null;for(Ud=0;Db;){Ud++;var Oe=Db;for(Rc=ue=0;Rc<Cf&&(ue++,Oe=Oe.nextZ);Rc++);for(Rc=Cf;0<ue||0<Rc&&Oe;)0===ue?(Ib=Oe,Oe=Oe.nextZ,Rc--):0!==Rc&&Oe?Db.z<=Oe.z?(Ib=Db,Db=Db.nextZ,ue--):(Ib=Oe,Oe=Oe.nextZ,Rc--):(Ib=Db,Db=Db.nextZ,ue--),Df?Df.nextZ=Ib:Mb=Ib,Ib.prevZ=Df,Df=Ib;Db=Oe}Df.nextZ=null;Cf*=2}while(1<Ud)}for(Db=oa;oa.prev!==oa.next;){Ib=oa.prev;Mb=
oa.next;if(Ub)a:{Oe=oa;Rc=Za;var Ef=jb,op=Ub;Df=Oe.prev;Ud=Oe;ue=Oe.next;if(0<=Ja(Df,Ud,ue))Oe=!1;else{var RO=Df.x>Ud.x?Df.x>ue.x?Df.x:ue.x:Ud.x>ue.x?Ud.x:ue.x,wX=Df.y>Ud.y?Df.y>ue.y?Df.y:ue.y:Ud.y>ue.y?Ud.y:ue.y;Cf=Gd(Df.x<Ud.x?Df.x<ue.x?Df.x:ue.x:Ud.x<ue.x?Ud.x:ue.x,Df.y<Ud.y?Df.y<ue.y?Df.y:ue.y:Ud.y<ue.y?Ud.y:ue.y,Rc,Ef,op);Rc=Gd(RO,wX,Rc,Ef,op);for(Ef=Oe.nextZ;Ef&&Ef.z<=Rc;){if(Ef!==Oe.prev&&Ef!==Oe.next&&Ga(Df.x,Df.y,Ud.x,Ud.y,ue.x,ue.y,Ef.x,Ef.y)&&0<=Ja(Ef.prev,Ef,Ef.next)){Oe=!1;break a}Ef=
Ef.nextZ}for(Ef=Oe.prevZ;Ef&&Ef.z>=Cf;){if(Ef!==Oe.prev&&Ef!==Oe.next&&Ga(Df.x,Df.y,Ud.x,Ud.y,ue.x,ue.y,Ef.x,Ef.y)&&0<=Ja(Ef.prev,Ef,Ef.next)){Oe=!1;break a}Ef=Ef.prevZ}Oe=!0}}else a:if(Oe=oa,Df=Oe.prev,Ud=Oe,ue=Oe.next,0<=Ja(Df,Ud,ue))Oe=!1;else{for(Cf=Oe.next.next;Cf!==Oe.prev;){if(Ga(Df.x,Df.y,Ud.x,Ud.y,ue.x,ue.y,Cf.x,Cf.y)&&0<=Ja(Cf.prev,Cf,Cf.next)){Oe=!1;break a}Cf=Cf.next}Oe=!0}if(Oe)Na.push(Ib.i/Ia),Na.push(oa.i/Ia),Na.push(Mb.i/Ia),Re(oa),Db=oa=Mb.next;else if((oa=Mb)===Db){if(ab)if(1===
ab){ab=Na;Ib=Ia;Mb=oa;do Db=Mb.prev,Oe=Mb.next.next,!vb(Db,Oe)&&Vb(Db,Mb,Mb.next,Oe)&&vd(Db,Oe)&&vd(Oe,Db)&&(ab.push(Db.i/Ib),ab.push(Mb.i/Ib),ab.push(Oe.i/Ib),Re(Mb),Re(Mb.next),Mb=oa=Oe),Mb=Mb.next;while(Mb!==oa);oa=Mb;Hc(oa,Na,Ia,Za,jb,Ub,2)}else{if(2===ab)a:{ab=oa;do{for(Ib=ab.next.next;Ib!==ab.prev;){if(Mb=ab.i!==Ib.i){Mb=ab;Db=Ib;if(Oe=Mb.next.i!==Db.i&&Mb.prev.i!==Db.i){b:{Oe=Mb;do{if(Oe.i!==Mb.i&&Oe.next.i!==Mb.i&&Oe.i!==Db.i&&Oe.next.i!==Db.i&&Vb(Oe,Oe.next,Mb,Db)){Oe=!0;break b}Oe=Oe.next}while(Oe!==
Mb);Oe=!1}Oe=!Oe}if(Oe=Oe&&vd(Mb,Db)&&vd(Db,Mb)){Oe=Mb;Df=!1;Ud=(Mb.x+Db.x)/2;Db=(Mb.y+Db.y)/2;do Oe.y>Db!=Oe.next.y>Db&&Ud<(Oe.next.x-Oe.x)*(Db-Oe.y)/(Oe.next.y-Oe.y)+Oe.x&&(Df=!Df),Oe=Oe.next;while(Oe!==Mb);Oe=Df}Mb=Oe}if(Mb){oa=ud(ab,Ib);ab=Zb(ab,ab.next);oa=Zb(oa,oa.next);Hc(ab,Na,Ia,Za,jb,Ub);Hc(oa,Na,Ia,Za,jb,Ub);break a}Ib=Ib.next}ab=ab.next}while(ab!==oa)}}else Hc(Zb(oa),Na,Ia,Za,jb,Ub,1);break}}}}function Gb(oa,Na){return oa.x-Na.x}function dd(oa,Na){var Ia=Na,Za=oa.x,jb=oa.y,Ub=-1/0;do{if(jb<=
Ia.y&&jb>=Ia.next.y){var ab=Ia.x+(jb-Ia.y)*(Ia.next.x-Ia.x)/(Ia.next.y-Ia.y);if(ab<=Za&&ab>Ub){if(Ub=ab,ab===Za){if(jb===Ia.y)return Ia;if(jb===Ia.next.y)return Ia.next}var Mb=Ia.x<Ia.next.x?Ia:Ia.next}}Ia=Ia.next}while(Ia!==Na);if(!Mb)return null;if(Za===Ub)return Mb.prev;var Db;Na=Mb;ab=Mb.x;var Rc=Mb.y,Ib=1/0;for(Ia=Mb.next;Ia!==Na;)Za>=Ia.x&&Ia.x>=ab&&Ga(jb<Rc?Za:Ub,jb,ab,Rc,jb<Rc?Ub:Za,jb,Ia.x,Ia.y)&&((Db=Math.abs(jb-Ia.y)/(Za-Ia.x))<Ib||Db===Ib&&Ia.x>Mb.x)&&vd(Ia,oa)&&(Mb=Ia,Ib=Db),Ia=Ia.next;
return Mb}function Gd(oa,Na,Ia,Za,jb){return oa=32767*(oa-Ia)/jb,Na=32767*(Na-Za)/jb,oa=16711935&(oa|oa<<8),oa=252645135&(oa|oa<<4),oa=858993459&(oa|oa<<2),oa=1431655765&(oa|oa<<1),Na=16711935&(Na|Na<<8),Na=252645135&(Na|Na<<4),Na=858993459&(Na|Na<<2),Na=1431655765&(Na|Na<<1),oa|Na<<1}function ma(oa){var Na=oa,Ia=oa;do Na.x<Ia.x&&(Ia=Na),Na=Na.next;while(Na!==oa);return Ia}function Ga(oa,Na,Ia,Za,jb,Ub,ab,Mb){return 0<=(jb-ab)*(Na-Mb)-(oa-ab)*(Ub-Mb)&&0<=(oa-ab)*(Za-Mb)-(Ia-ab)*(Na-Mb)&&0<=(Ia-ab)*
(Ub-Mb)-(jb-ab)*(Za-Mb)}function Ja(oa,Na,Ia){return(Na.y-oa.y)*(Ia.x-Na.x)-(Na.x-oa.x)*(Ia.y-Na.y)}function vb(oa,Na){return oa.x===Na.x&&oa.y===Na.y}function Vb(oa,Na,Ia,Za){return!!(vb(oa,Na)&&vb(Ia,Za)||vb(oa,Za)&&vb(Ia,Na))||0<Ja(oa,Na,Ia)!=0<Ja(oa,Na,Za)&&0<Ja(Ia,Za,oa)!=0<Ja(Ia,Za,Na)}function vd(oa,Na){return 0>Ja(oa.prev,oa,oa.next)?0<=Ja(oa,Na,oa.next)&&0<=Ja(oa,oa.prev,Na):0>Ja(oa,Na,oa.prev)||0>Ja(oa,oa.next,Na)}function ud(oa,Na){var Ia=new Le(oa.i,oa.x,oa.y),Za=new Le(Na.i,Na.x,Na.y),
jb=oa.next,Ub=Na.prev;return oa.next=Na,Na.prev=oa,Ia.next=jb,jb.prev=Ia,Za.next=Ia,Ia.prev=Za,Ub.next=Za,Za.prev=Ub,Za}function Jc(oa,Na,Ia,Za){oa=new Le(oa,Na,Ia);return Za?(oa.next=Za.next,oa.prev=Za,Za.next.prev=oa,Za.next=oa):(oa.prev=oa,oa.next=oa),oa}function Re(oa){oa.next.prev=oa.prev;oa.prev.next=oa.next;oa.prevZ&&(oa.prevZ.nextZ=oa.nextZ);oa.nextZ&&(oa.nextZ.prevZ=oa.prevZ)}function Le(oa,Na,Ia){(this||wc).i=oa;(this||wc).x=Na;(this||wc).y=Ia;(this||wc).prev=null;(this||wc).next=null;(this||
wc).z=null;(this||wc).prevZ=null;(this||wc).nextZ=null;(this||wc).steiner=!1}function Uh(oa,Na,Ia,Za){for(var jb=0,Ub=Ia-Za;Na<Ia;Na+=Za)jb+=(oa[Ub]-oa[Na])*(oa[Na+1]+oa[Ub+1]),Ub=Na;return jb}function th(oa,Na){var Ia=Na.id,Za=Na.bbox,jb=null==Na.properties?{}:Na.properties;oa=pj(oa,Na);return null==Ia&&null==Za?{type:"Feature",properties:jb,geometry:oa}:null==Za?{type:"Feature",id:Ia,properties:jb,geometry:oa}:{type:"Feature",id:Ia,bbox:Za,properties:jb,geometry:oa}}function pj(oa,Na){function Ia(Rc){return Mb(Rc)}
function Za(Rc){for(var Ib=[],Ud=0,ue=Rc.length;Ud<ue;++Ud){var Cf=Rc[Ud],Df=Ib;Df.length&&Df.pop();for(var Oe=Db[0>Cf?~Cf:Cf],Ef=0,op=Oe.length;Ef<op;++Ef)Df.push(Mb(Oe[Ef],Ef));if(0>Cf)for(Cf=Df,Df=Cf.length,Oe=Df-op;Oe<--Df;)op=Cf[Oe],Cf[Oe++]=Cf[Df],Cf[Df]=op}return 2>Ib.length&&Ib.push(Ib[0]),Ib}function jb(Rc){for(Rc=Za(Rc);4>Rc.length;)Rc.push(Rc[0]);return Rc}function Ub(Rc){return Rc.map(jb)}function ab(Rc){var Ib=Rc.type;switch(Ib){case "GeometryCollection":return{type:Ib,geometries:Rc.geometries.map(ab)};
case "Point":Rc=Mb(Rc.coordinates);break;case "MultiPoint":Rc=Rc.coordinates.map(Ia);break;case "LineString":Rc=Za(Rc.arcs);break;case "MultiLineString":Rc=Rc.arcs.map(Za);break;case "Polygon":Rc=Ub(Rc.arcs);break;case "MultiPolygon":Rc=Rc.arcs.map(Ub);break;default:return null}return{type:Ib,coordinates:Rc}}var Mb=SO(oa.transform),Db=oa.arcs;return ab(Na)}function hj(oa,Na){function Ia(Db){switch(Db.type){case "GeometryCollection":Db.geometries.forEach(Ia);break;case "Polygon":Za(Db.arcs);break;
case "MultiPolygon":Db.arcs.forEach(Za)}}function Za(Db){Db.forEach(function(Rc){Rc.forEach(function(Ib){(Ub[Ib=0>Ib?~Ib:Ib]||(Ub[Ib]=[])).push(Db)})});ab.push(Db)}function jb(Db){Db=pj(oa,{type:"Polygon",arcs:[Db]}).coordinates[0];for(var Rc,Ib=-1,Ud=Db.length,ue=Db[Ud-1],Cf=0;++Ib<Ud;)Rc=ue,ue=Db[Ib],Cf+=Rc[0]*ue[1]-Rc[1]*ue[0];return Math.abs(Cf)}var Ub={},ab=[],Mb=[];return Na.forEach(Ia),ab.forEach(function(Db){if(!Db._){var Rc=[],Ib=[Db];Db._=1;for(Mb.push(Rc);Db=Ib.pop();)Rc.push(Db),Db.forEach(function(Ud){Ud.forEach(function(ue){Ub[0>
ue?~ue:ue].forEach(function(Cf){Cf._||(Cf._=1,Ib.push(Cf))})})})}}),ab.forEach(function(Db){delete Db._}),{type:"MultiPolygon",arcs:Mb.map(function(Db){var Rc=[];if(Db.forEach(function(Df){Df.forEach(function(Oe){Oe.forEach(function(Ef){2>Ub[0>Ef?~Ef:Ef].length&&Rc.push(Ef)})})}),Rc=xX(oa,Rc),1<(Db=Rc.length))for(var Ib,Ud,ue=1,Cf=jb(Rc[0]);ue<Db;++ue)(Ib=jb(Rc[ue]))>Cf&&(Ud=Rc[0],Rc[0]=Rc[ue],Rc[ue]=Ud,Cf=Ib);return Rc})}}function qj(oa){return function(Na,Ia){return BA(oa(Na),Ia)}}function Qi(oa,
Na){var Ia={},Za={type:"Topology",objects:{triangles:{type:"GeometryCollection",geometries:[]}},arcs:[]};return oa.forEach(function(jb){var Ub=[];jb.forEach(function(ab,Mb){Mb=ab[0]<ab[1]?ab.join(","):ab[1]+","+ab[0];ab=ab.map(function(Db){return Na[Db]});Mb in Ia?Ub.push(~Ia[Mb]):(Ub.push(Ia[Mb]=Za.arcs.length),Za.arcs.push(ab))});Za.objects.triangles.geometries.push({type:"Polygon",area:Math.abs(AA(jb.map(function(ab){return Na[ab[0]]}))),arcs:[Ub]})}),Za.objects.triangles.geometries.sort(function(jb,
Ub){return jb.area-Ub.area}),Za}function Ri(oa,Na){for(var Ia=oa.objects.triangles.geometries,Za=VI(function(jb){return jb.area}).left;Ia.length>Na;)!function(){var jb=Ia[0],Ub=yX(Ia)[0][0],ab=Ia[Ub],Mb=hj(oa,[jb,ab]);Mb.area=jb.area+ab.area;Mb.type="Polygon";Mb.arcs=Mb.arcs[0];Ia.splice(Ub,1);Ia.shift();Ia.splice(Za(Ia,Mb.area),0,Mb)}();if(Na>Ia.length)throw new RangeError("Can't collapse topology into "+Na+" pieces.");return PC(oa,oa.objects.triangles).features.map(function(jb){return jb.geometry.coordinates[0].pop(),
jb.geometry.coordinates[0]})}function xk(oa){oa=TO(oa.reduce(function(jb,Ub){return jb.concat([Ub[0]],[Ub[1]])},[]));for(var Na=[],Ia=0,Za=oa.length;Ia<Za;Ia+=3)Na.push([[oa[Ia],oa[Ia+1]],[oa[Ia+1],oa[Ia+2]],[oa[Ia+2],oa[Ia]]]);return Na}function bj(oa,Na,Ia){function Za(ab,Mb,Db){void 0===Mb&&(Mb=[]);void 0===Db&&(Db=0);for(var Rc=0;Rc<ab.length;Rc++){var Ib=ab.splice(Rc,1),Ud=Ia[Ib[0]][Mb.length];Db+Ud<jb&&(ab.length?Za(ab.slice(),Mb.concat(Ib),Db+Ud):(jb=Db+Ud,Ub=Mb.concat(Ib)));ab.length&&ab.splice(Rc,
0,Ib[0])}}var jb=1/0,Ub=oa.map(function(ab,Mb){return Mb});return Za(Ub),Ub}function fk(oa,Na,Ia){void 0===Ia&&(Ia={});var Za=Ia.maxSegmentLength;void 0===Za&&(Za=10);var jb=Ia.string;void 0===jb&&(jb=!0);Ia=Ia.single;void 0===Ia&&(Ia=!1);var Ub=pa(oa,Za);Ub.length<Na.length+2&&na(Ub,Na.length+2-Ub.length);var ab;Ub=UO(Ub,Na.length);var Mb=Na.map(function(Db){return pa(Db,Za)});oa="string"==typeof oa&&oa;return Ia&&!Na.every(function(Db){return"string"==typeof Db})||(ab=Na.slice(0)),Qk(Ub,Mb,{match:!0,
string:jb,single:Ia,t0:oa,t1:ab})}function Qk(oa,Na,Ia){void 0===Ia&&(Ia={});var Za=Ia.string,jb=Ia.single,Ub=Ia.t0,ab=Ia.t1,Mb=(Ia=Ia.match)?WI(oa,Na):oa.map(function(Ib,Ud){return Ud}),Db=Mb.map(function(Ib,Ud){return Hb(oa[Ib],Na[Ud],Za)});if(Ia&&Array.isArray(Ub)&&(Ub=Mb.map(function(Ib){return Ub[Ib]})),jb&&Za&&(Array.isArray(Ub)&&(Ub=Ub.join(" ")),Array.isArray(ab)&&(ab=ab.join(" "))),jb){var Rc=Za?function(Ib){return Db.map(function(Ud){return Ud(Ib)}).join(" ")}:function(Ib){return Db.map(function(Ud){return Ud(Ib)})};
return Za&&(Ub||ab)?function(Ib){return 1E-4>Ib&&Ub||1E-4>1-Ib&&ab||Rc(Ib)}:Rc}return Za?(Ub=Array.isArray(Ub)?Ub.map(function(Ib){return"string"==typeof Ib&&Ib}):[],ab=Array.isArray(ab)?ab.map(function(Ib){return"string"==typeof Ib&&Ib}):[],Db.map(function(Ib,Ud){return Ub[Ud]||ab[Ud]?function(ue){return 1E-4>ue&&Ub[Ud]||1E-4>1-ue&&ab[Ud]||Ib(ue)}:Ib})):Db}function gk(oa,Na,Ia,Za,jb){var Ub=Bd(oa,Na,Ia),ab=oa-Ia+","+Na,Mb="A"+Ia+","+Ia+",0,1,1,";return CA(Ub,Za,"M"+ab+Mb+(oa+Ia+","+Na)+Mb+ab+"Z",
2*Math.PI*Ia,jb)}function Rk(oa,Na,Ia,Za,jb,Ub){var ab=Cd(oa,Na,Ia,Za),Mb=oa+Ia,Db=Na+Za;return CA(ab,jb,"M"+oa+","+Na+"L"+Mb+","+Na+"L"+Mb+","+Db+"L"+oa+","+Db+"Z",2*Ia+2*Za,Ub)}function CA(oa,Na,Ia,Za,jb){void 0===jb&&(jb={});var Ub=jb.maxSegmentLength;void 0===Ub&&(Ub=10);jb=jb.string;void 0===jb&&(jb=!0);var ab,Mb;Na=pa(Na,Ub);return ua(Za)&&Na.length<Za/Ub&&na(Na,Math.ceil(Za/Ub-Na.length)),ab=oa(Na),Mb=ja(ab,Na,jb),jb?function(Db){return 1E-4>Db?Ia:Mb(Db)}:Mb}function Bd(oa,Na,Ia){return function(Za){var jb=
gb(Za),Ub=Ay(Za.concat([Za[0]])),ab=Math.atan2(Za[0][1]-jb[1],Za[0][0]-jb[0]),Mb=0;return Za.map(function(Db,Rc){var Ib;return Rc&&(Mb+=R(Db,Za[Rc-1])),Ib=ab+2*Math.PI*(Ub?Mb/Ub:Rc/Za.length),[Math.cos(Ib)*Ia+oa,Math.sin(Ib)*Ia+Na]})}}function Cd(oa,Na,Ia,Za){return function(jb){var Ub=gb(jb),ab=Ay(jb.concat([jb[0]]));Ub=Math.atan2(jb[0][1]-Ub[1],jb[0][0]-Ub[0]);var Mb=0;0>Ub&&(Ub=2*Math.PI+Ub);var Db=Ub/(2*Math.PI);return jb.map(function(Rc,Ib){Ib&&(Mb+=R(Rc,jb[Ib-1]));Rc=(Db+(ab?Mb/ab:Ib/jb.length))%
1;Rc=.125>=Rc?[1,.5+4*Rc]:.375>=Rc?[1.5-4*Rc,1]:.625>=Rc?[0,2.5-4*Rc]:.875>=Rc?[4*Rc-2.5,0]:[1,4*Rc-3.5];return[oa+Rc[0]*Ia,Na+Rc[1]*Za]})}}var AA=function(oa){for(var Na,Ia=-1,Za=oa.length,jb=oa[Za-1],Ub=0;++Ia<Za;)Na=jb,jb=oa[Ia],Ub+=Na[1]*jb[0]-Na[0]*jb[1];return Ub/2},Ay=function(oa){var Na=-1,Ia=oa.length,Za=oa[Ia-1],jb=Za[0];Za=Za[1];for(var Ub=0;++Na<Ia;){var ab=jb;var Mb=Za;Za=oa[Na];jb=Za[0];Za=Za[1];ab-=jb;Mb-=Za;Ub+=Math.sqrt(ab*ab+Mb*Mb)}return Ub},Kw={a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,
t:2,v:1,z:0},MC=[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279];a.prototype.matrix=function(oa){return 1===oa[0]&&0===oa[1]&&0===oa[2]&&1===oa[3]&&0===oa[4]&&0===oa[5]?this||wc:((this||wc).cache=null,(this||wc).queue.push(oa),this||wc)};a.prototype.translate=function(oa,Na){return 0===oa&&0===Na||((this||wc).cache=null,(this||wc).queue.push([1,0,0,1,oa,Na])),this||wc};a.prototype.scale=function(oa,Na){return 1===oa&&1===Na||((this||wc).cache=null,(this||wc).queue.push([oa,
0,0,Na,0,0])),this||wc};a.prototype.rotate=function(oa,Na,Ia){var Za,jb,Ub;return 0!==oa&&(this.translate(Na,Ia),Za=oa*Math.PI/180,jb=Math.cos(Za),Ub=Math.sin(Za),(this||wc).queue.push([jb,Ub,-Ub,jb,0,0]),(this||wc).cache=null,this.translate(-Na,-Ia)),this||wc};a.prototype.skewX=function(oa){return 0!==oa&&((this||wc).cache=null,(this||wc).queue.push([1,0,Math.tan(oa*Math.PI/180),1,0,0])),this||wc};a.prototype.skewY=function(oa){return 0!==oa&&((this||wc).cache=null,(this||wc).queue.push([1,Math.tan(oa*
Math.PI/180),0,1,0,0])),this||wc};a.prototype.toArray=function(){var oa=this||wc;if((this||wc).cache)return(this||wc).cache;if(!(this||wc).queue.length)return(this||wc).cache=[1,0,0,1,0,0],(this||wc).cache;if((this||wc).cache=(this||wc).queue[0],1===(this||wc).queue.length)return(this||wc).cache;for(var Na=1;Na<(this||wc).queue.length;Na++){var Ia=oa.cache,Za=oa.queue[Na];oa.cache=[Ia[0]*Za[0]+Ia[2]*Za[1],Ia[1]*Za[0]+Ia[3]*Za[1],Ia[0]*Za[2]+Ia[2]*Za[3],Ia[1]*Za[2]+Ia[3]*Za[3],Ia[0]*Za[4]+Ia[2]*Za[5]+
Ia[4],Ia[1]*Za[4]+Ia[3]*Za[5]+Ia[5]]}return(this||wc).cache};a.prototype.calc=function(oa,Na,Ia){var Za;return(this||wc).queue.length?((this||wc).cache||((this||wc).cache=this.toArray()),Za=(this||wc).cache,[oa*Za[0]+Na*Za[2]+(Ia?0:Za[4]),oa*Za[1]+Na*Za[3]+(Ia?0:Za[5])]):[oa,Na]};var QC={matrix:!0,scale:!0,rotate:!0,translate:!0,skewX:!0,skewY:!0},RC=/\s*(matrix|translate|scale|rotate|skewX|skewY)\s*\(\s*(.+?)\s*\)[\s,]*/,SC=/[\s,]+/,TC=function(oa){var Na,Ia,Za=new a;return oa.split(RC).forEach(function(jb){if(jb.length){if(void 0!==
QC[jb])return void(Na=jb);switch(Ia=jb.split(SC).map(function(Ub){return+Ub||0}),Na){case "matrix":return void(6===Ia.length&&Za.matrix(Ia));case "scale":return void(1===Ia.length?Za.scale(Ia[0],Ia[0]):2===Ia.length&&Za.scale(Ia[0],Ia[1]));case "rotate":return void(1===Ia.length?Za.rotate(Ia[0],0,0):3===Ia.length&&Za.rotate(Ia[0],Ia[1],Ia[2]));case "translate":return void(1===Ia.length?Za.translate(Ia[0],0):2===Ia.length&&Za.translate(Ia[0],Ia[1]));case "skewX":return void(1===Ia.length&&Za.skewX(Ia[0]));
case "skewY":return void(1===Ia.length&&Za.skewY(Ia[0]))}}}),Za},NC=2*Math.PI,zX=function(oa,Na,Ia,Za,jb,Ub,ab,Mb,Db){var Rc=Math.sin(Db*NC/360),Ib=Math.cos(Db*NC/360);Db=Ib*(oa-Ia)/2+Rc*(Na-Za)/2;var Ud=-Rc*(oa-Ia)/2+Ib*(Na-Za)/2;if(0===Db&&0===Ud||0===ab||0===Mb)return[];ab=Math.abs(ab);Mb=Math.abs(Mb);Db=Db*Db/(ab*ab)+Ud*Ud/(Mb*Mb);1<Db&&(ab*=Math.sqrt(Db),Mb*=Math.sqrt(Db));var ue=m(oa,Na,Ia,Za,jb,Ub,ab,Mb,Rc,Ib);oa=[];Na=ue[2];Ia=ue[3];Za=Math.max(Math.ceil(Math.abs(Ia)/(NC/4)),1);Ia/=Za;for(jb=
0;jb<Za;jb++)oa.push(r(Na,Ia)),Na+=Ia;return oa.map(function(Cf){for(var Df=0;Df<Cf.length;Df+=2){var Oe=Cf[Df+0],Ef=Cf[Df+1];Oe*=ab;Ef*=Mb;var op=Rc*Oe+Ib*Ef;Cf[Df+0]=Ib*Oe-Rc*Ef+ue[0];Cf[Df+1]=op+ue[1]}return Cf})},VO=Math.PI/180;v.prototype.transform=function(oa){var Na=Math.cos((this||wc).ax*VO),Ia=Math.sin((this||wc).ax*VO),Za=[(this||wc).rx*(oa[0]*Na+oa[2]*Ia),(this||wc).rx*(oa[1]*Na+oa[3]*Ia),(this||wc).ry*(-oa[0]*Ia+oa[2]*Na),(this||wc).ry*(-oa[1]*Ia+oa[3]*Na)];oa=Za[0]*Za[0]+Za[2]*Za[2];
Na=Za[1]*Za[1]+Za[3]*Za[3];Ia=((Za[0]-Za[3])*(Za[0]-Za[3])+(Za[2]+Za[1])*(Za[2]+Za[1]))*((Za[0]+Za[3])*(Za[0]+Za[3])+(Za[2]-Za[1])*(Za[2]-Za[1]));var jb=(oa+Na)/2;if(Ia<1E-10*jb)return(this||wc).rx=(this||wc).ry=Math.sqrt(jb),(this||wc).ax=0,this||wc;Za=Za[0]*Za[1]+Za[2]*Za[3];Ia=Math.sqrt(Ia);var Ub=jb+Ia/2;Ia=jb-Ia/2;return(this||wc).ax=1E-10>Math.abs(Za)&&1E-10>Math.abs(Ub-Na)?90:180*Math.atan(Math.abs(Za)>Math.abs(Ub-Na)?(Ub-oa)/Za:Za/(Ub-Na))/Math.PI,0<=(this||wc).ax?((this||wc).rx=Math.sqrt(Ub),
(this||wc).ry=Math.sqrt(Ia)):((this||wc).ax+=90,(this||wc).rx=Math.sqrt(Ia),(this||wc).ry=Math.sqrt(Ub)),this||wc};v.prototype.isDegenerate=function(){return(this||wc).rx<1E-10*(this||wc).ry||(this||wc).ry<1E-10*(this||wc).rx};x.prototype.__matrix=function(oa){var Na,Ia=this||wc;oa.queue.length&&this.iterate(function(Za,jb,Ub,ab){switch(Za[0]){case "v":var Mb=oa.calc(0,Za[1],!0);Ub=0===Mb[0]?["v",Mb[1]]:["l",Mb[0],Mb[1]];break;case "V":Mb=oa.calc(Ub,Za[1],!1);Ub=Mb[0]===oa.calc(Ub,ab,!1)[0]?["V",
Mb[1]]:["L",Mb[0],Mb[1]];break;case "h":Mb=oa.calc(Za[1],0,!0);Ub=0===Mb[1]?["h",Mb[0]]:["l",Mb[0],Mb[1]];break;case "H":Mb=oa.calc(Za[1],ab,!1);Ub=Mb[1]===oa.calc(Ub,ab,!1)[1]?["H",Mb[0]]:["L",Mb[0],Mb[1]];break;case "a":case "A":Mb=oa.toArray();var Db=v(Za[1],Za[2],Za[3]).transform(Mb);if(0>Mb[0]*Mb[3]-Mb[1]*Mb[2]&&(Za[5]=Za[5]?"0":"1"),Mb=oa.calc(Za[6],Za[7],"a"===Za[0]),"A"===Za[0]&&Za[6]===Ub&&Za[7]===ab||"a"===Za[0]&&0===Za[6]&&0===Za[7]){Ub=["a"===Za[0]?"l":"L",Mb[0],Mb[1]];break}Ub=Db.isDegenerate()?
["a"===Za[0]?"l":"L",Mb[0],Mb[1]]:[Za[0],Db.rx,Db.ry,Db.ax,Za[4],Za[5],Mb[0],Mb[1]];break;case "m":Mb=oa.calc(Za[1],Za[2],0<jb);Ub=["m",Mb[0],Mb[1]];break;default:for(Mb=Za[0],Ub=[Mb],ab=Mb.toLowerCase()===Mb,Na=1;Na<Za.length;Na+=2)Mb=oa.calc(Za[Na],Za[Na+1],ab),Ub.push(Mb[0],Mb[1])}Ia.segments[jb]=Ub},!0)};x.prototype.__evaluateStack=function(){var oa,Na=this||wc;if((this||wc).__stack.length){if(1===(this||wc).__stack.length)return this.__matrix((this||wc).__stack[0]),void((this||wc).__stack=[]);
var Ia=a();for(oa=(this||wc).__stack.length;0<=--oa;)Ia.matrix(Na.__stack[oa].toArray());this.__matrix(Ia);(this||wc).__stack=[]}};x.prototype.toString=function(){var oa=this||wc,Na=[];this.__evaluateStack();for(var Ia=0;Ia<(this||wc).segments.length;Ia++){var Za=oa.segments[Ia][0];Za=0<Ia&&"m"!==Za&&"M"!==Za&&Za===oa.segments[Ia-1][0];Na=Na.concat(Za?oa.segments[Ia].slice(1):oa.segments[Ia])}return Na.join(" ").replace(/ ?([achlmqrstvz]) ?/gi,"$1").replace(/ \-/g,"-").replace(/zm/g,"z m")};x.prototype.translate=
function(oa,Na){return(this||wc).__stack.push(a().translate(oa,Na||0)),this||wc};x.prototype.scale=function(oa,Na){return(this||wc).__stack.push(a().scale(oa,Na||0===Na?Na:oa)),this||wc};x.prototype.rotate=function(oa,Na,Ia){return(this||wc).__stack.push(a().rotate(oa,Na||0,Ia||0)),this||wc};x.prototype.skewX=function(oa){return(this||wc).__stack.push(a().skewX(oa)),this||wc};x.prototype.skewY=function(oa){return(this||wc).__stack.push(a().skewY(oa)),this||wc};x.prototype.matrix=function(oa){return(this||
wc).__stack.push(a().matrix(oa)),this||wc};x.prototype.transform=function(oa){return oa.trim()?((this||wc).__stack.push(TC(oa)),this||wc):this||wc};x.prototype.round=function(oa){var Na,Ia=0,Za=0,jb=0,Ub=0;return oa=oa||0,this.__evaluateStack(),(this||wc).segments.forEach(function(ab){var Mb=ab[0].toLowerCase()===ab[0];switch(ab[0]){case "H":case "h":return Mb&&(ab[1]+=jb),jb=ab[1]-ab[1].toFixed(oa),void(ab[1]=+ab[1].toFixed(oa));case "V":case "v":return Mb&&(ab[1]+=Ub),Ub=ab[1]-ab[1].toFixed(oa),
void(ab[1]=+ab[1].toFixed(oa));case "Z":case "z":return jb=Ia,void(Ub=Za);case "M":case "m":return Mb&&(ab[1]+=jb,ab[2]+=Ub),jb=ab[1]-ab[1].toFixed(oa),Ub=ab[2]-ab[2].toFixed(oa),Ia=jb,Za=Ub,ab[1]=+ab[1].toFixed(oa),void(ab[2]=+ab[2].toFixed(oa));case "A":case "a":return Mb&&(ab[6]+=jb,ab[7]+=Ub),jb=ab[6]-ab[6].toFixed(oa),Ub=ab[7]-ab[7].toFixed(oa),ab[1]=+ab[1].toFixed(oa),ab[2]=+ab[2].toFixed(oa),ab[3]=+ab[3].toFixed(oa+2),ab[6]=+ab[6].toFixed(oa),void(ab[7]=+ab[7].toFixed(oa));default:return Na=
ab.length,Mb&&(ab[Na-2]+=jb,ab[Na-1]+=Ub),jb=ab[Na-2]-ab[Na-2].toFixed(oa),Ub=ab[Na-1]-ab[Na-1].toFixed(oa),void ab.forEach(function(Db,Rc){Rc&&(ab[Rc]=+ab[Rc].toFixed(oa))})}}),this||wc};x.prototype.iterate=function(oa,Na){var Ia,Za=(this||wc).segments,jb={},Ub=!1,ab=0,Mb=0,Db=0,Rc=0;if(Na||this.__evaluateStack(),Za.forEach(function(Ud,ue){var Cf=oa(Ud,ue,ab,Mb);Array.isArray(Cf)&&(jb[ue]=Cf,Ub=!0);ue=Ud[0]===Ud[0].toLowerCase();switch(Ud[0]){case "m":case "M":return ab=Ud[1]+(ue?ab:0),Mb=Ud[2]+
(ue?Mb:0),Db=ab,void(Rc=Mb);case "h":case "H":return void(ab=Ud[1]+(ue?ab:0));case "v":case "V":return void(Mb=Ud[1]+(ue?Mb:0));case "z":case "Z":return ab=Db,void(Mb=Rc);default:ab=Ud[Ud.length-2]+(ue?ab:0),Mb=Ud[Ud.length-1]+(ue?Mb:0)}}),!Ub)return this||wc;var Ib=[];for(Na=0;Na<Za.length;Na++)if(void 0!==jb[Na])for(Ia=0;Ia<jb[Na].length;Ia++)Ib.push(jb[Na][Ia]);else Ib.push(Za[Na]);return(this||wc).segments=Ib,this||wc};x.prototype.abs=function(){return this.iterate(function(oa,Na,Ia,Za){Na=oa[0];
var jb=Na.toUpperCase();if(Na!==jb)switch(oa[0]=jb,Na){case "v":return void(oa[1]+=Za);case "a":return oa[6]+=Ia,void(oa[7]+=Za);default:for(Na=1;Na<oa.length;Na++)oa[Na]+=Na%2?Ia:Za}},!0),this||wc};x.prototype.rel=function(){return this.iterate(function(oa,Na,Ia,Za){var jb=oa[0],Ub=jb.toLowerCase();if(jb!==Ub&&(0!==Na||"M"!==jb))switch(oa[0]=Ub,jb){case "V":return void(oa[1]-=Za);case "A":return oa[6]-=Ia,void(oa[7]-=Za);default:for(Na=1;Na<oa.length;Na++)oa[Na]-=Na%2?Ia:Za}},!0),this||wc};x.prototype.unarc=
function(){return this.iterate(function(oa,Na,Ia,Za){var jb,Ub,ab,Mb=[];Na=oa[0];return"A"!==Na&&"a"!==Na?null:("a"===Na?(Ub=Ia+oa[6],ab=Za+oa[7]):(Ub=oa[6],ab=oa[7]),jb=zX(Ia,Za,Ub,ab,oa[4],oa[5],oa[1],oa[2],oa[3]),0===jb.length?[["a"===oa[0]?"l":"L",oa[6],oa[7]]]:(jb.forEach(function(Db){Mb.push(["C",Db[2],Db[3],Db[4],Db[5],Db[6],Db[7]])}),Mb))}),this||wc};x.prototype.unshort=function(){var oa,Na,Ia,Za,jb,Ub=(this||wc).segments;return this.iterate(function(ab,Mb,Db,Rc){var Ib,Ud=ab[0],ue=Ud.toUpperCase();
Mb&&("T"===ue?(Ib="t"===Ud,Ia=Ub[Mb-1],"Q"===Ia[0]?(oa=Ia[1]-Db,Na=Ia[2]-Rc):"q"===Ia[0]?(oa=Ia[1]-Ia[3],Na=Ia[2]-Ia[4]):(oa=0,Na=0),Za=-oa,jb=-Na,Ib||(Za+=Db,jb+=Rc),Ub[Mb]=[Ib?"q":"Q",Za,jb,ab[1],ab[2]]):"S"===ue&&(Ib="s"===Ud,Ia=Ub[Mb-1],"C"===Ia[0]?(oa=Ia[3]-Db,Na=Ia[4]-Rc):"c"===Ia[0]?(oa=Ia[3]-Ia[5],Na=Ia[4]-Ia[6]):(oa=0,Na=0),Za=-oa,jb=-Na,Ib||(Za+=Db,jb+=Rc),Ub[Mb]=[Ib?"c":"C",Za,jb,ab[1],ab[2],ab[3],ab[4]]))}),this||wc};var PO=x,XI={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},AX=/([astvzqmhlc])([^astvzqmhlc]*)/gi,
CX=function(oa){var Na=[];return oa.replace(AX,function(Ia,Za,jb){Ia=Za.toLowerCase();jb=(jb=jb.match(BX))?jb.map(Number):[];for("m"===Ia&&2<jb.length&&(Na.push([Za].concat(jb.splice(0,2))),Ia="l",Za="m"===Za?"l":"L");0<=jb.length;){if(jb.length===XI[Ia])return jb.unshift(Za),Na.push(jb);if(jb.length<XI[Ia])throw Error("malformed path data");Na.push([Za].concat(jb.splice(0,XI[Ia])))}}),Na},BX=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/gi,Qr=function(oa,Na,Ia,Za,jb,Ub,ab,Mb){return new y(oa,Na,Ia,Za,jb,Ub,ab,
Mb)};y.prototype={constructor:y,init:function(){(this||wc).length=this.getArcLength([(this||wc).a.x,(this||wc).b.x,(this||wc).c.x,(this||wc).d.x],[(this||wc).a.y,(this||wc).b.y,(this||wc).c.y,(this||wc).d.y])},getTotalLength:function(){return(this||wc).length},getPointAtLength:function(oa){oa=I(oa,(this||wc).length,(this||wc).getArcLength,[(this||wc).a.x,(this||wc).b.x,(this||wc).c.x,(this||wc).d.x],[(this||wc).a.y,(this||wc).b.y,(this||wc).c.y,(this||wc).d.y]);return this.getPoint([(this||wc).a.x,
(this||wc).b.x,(this||wc).c.x,(this||wc).d.x],[(this||wc).a.y,(this||wc).b.y,(this||wc).c.y,(this||wc).d.y],oa)},getTangentAtLength:function(oa){oa=I(oa,(this||wc).length,(this||wc).getArcLength,[(this||wc).a.x,(this||wc).b.x,(this||wc).c.x,(this||wc).d.x],[(this||wc).a.y,(this||wc).b.y,(this||wc).c.y,(this||wc).d.y]);oa=this.getDerivative([(this||wc).a.x,(this||wc).b.x,(this||wc).c.x,(this||wc).d.x],[(this||wc).a.y,(this||wc).b.y,(this||wc).c.y,(this||wc).d.y],oa);var Na=Math.sqrt(oa.x*oa.x+oa.y*
oa.y);return 0<Na?{x:oa.x/Na,y:oa.y/Na}:{x:0,y:0}},getPropertiesAtLength:function(oa){oa=I(oa,(this||wc).length,(this||wc).getArcLength,[(this||wc).a.x,(this||wc).b.x,(this||wc).c.x,(this||wc).d.x],[(this||wc).a.y,(this||wc).b.y,(this||wc).c.y,(this||wc).d.y]);var Na=this.getDerivative([(this||wc).a.x,(this||wc).b.x,(this||wc).c.x,(this||wc).d.x],[(this||wc).a.y,(this||wc).b.y,(this||wc).c.y,(this||wc).d.y],oa);var Ia=Math.sqrt(Na.x*Na.x+Na.y*Na.y);Na=0<Ia?{x:Na.x/Ia,y:Na.y/Ia}:{x:0,y:0};oa=this.getPoint([(this||
wc).a.x,(this||wc).b.x,(this||wc).c.x,(this||wc).d.x],[(this||wc).a.y,(this||wc).b.y,(this||wc).c.y,(this||wc).d.y],oa);return{x:oa.x,y:oa.y,tangentX:Na.x,tangentY:Na.y}}};var tX=[[],[],[-.5773502691896257,.5773502691896257],[0,-.7745966692414834,.7745966692414834],[-.33998104358485626,.33998104358485626,-.8611363115940526,.8611363115940526],[0,-.5384693101056831,.5384693101056831,-.906179845938664,.906179845938664],[.6612093864662645,-.6612093864662645,-.2386191860831969,.2386191860831969,-.932469514203152,
.932469514203152],[0,.4058451513773972,-.4058451513773972,-.7415311855993945,.7415311855993945,-.9491079123427585,.9491079123427585],[-.1834346424956498,.1834346424956498,-.525532409916329,.525532409916329,-.7966664774136267,.7966664774136267,-.9602898564975363,.9602898564975363],[0,-.8360311073266358,.8360311073266358,-.9681602395076261,.9681602395076261,-.3242534234038089,.3242534234038089,-.6133714327005904,.6133714327005904],[-.14887433898163122,.14887433898163122,-.4333953941292472,.4333953941292472,
-.6794095682990244,.6794095682990244,-.8650633666889845,.8650633666889845,-.9739065285171717,.9739065285171717],[0,-.26954315595234496,.26954315595234496,-.5190961292068118,.5190961292068118,-.7301520055740494,.7301520055740494,-.8870625997680953,.8870625997680953,-.978228658146057,.978228658146057],[-.1252334085114689,.1252334085114689,-.3678314989981802,.3678314989981802,-.5873179542866175,.5873179542866175,-.7699026741943047,.7699026741943047,-.9041172563704749,.9041172563704749,-.9815606342467192,
.9815606342467192],[0,-.2304583159551348,.2304583159551348,-.44849275103644687,.44849275103644687,-.6423493394403402,.6423493394403402,-.8015780907333099,.8015780907333099,-.9175983992229779,.9175983992229779,-.9841830547185881,.9841830547185881],[-.10805494870734367,.10805494870734367,-.31911236892788974,.31911236892788974,-.5152486363581541,.5152486363581541,-.6872929048116855,.6872929048116855,-.827201315069765,.827201315069765,-.9284348836635735,.9284348836635735,-.9862838086968123,.9862838086968123],
[0,-.20119409399743451,.20119409399743451,-.3941513470775634,.3941513470775634,-.5709721726085388,.5709721726085388,-.7244177313601701,.7244177313601701,-.8482065834104272,.8482065834104272,-.937273392400706,.937273392400706,-.9879925180204854,.9879925180204854],[-.09501250983763744,.09501250983763744,-.2816035507792589,.2816035507792589,-.45801677765722737,.45801677765722737,-.6178762444026438,.6178762444026438,-.755404408355003,.755404408355003,-.8656312023878318,.8656312023878318,-.9445750230732326,
.9445750230732326,-.9894009349916499,.9894009349916499],[0,-.17848418149584785,.17848418149584785,-.3512317634538763,.3512317634538763,-.5126905370864769,.5126905370864769,-.6576711592166907,.6576711592166907,-.7815140038968014,.7815140038968014,-.8802391537269859,.8802391537269859,-.9506755217687678,.9506755217687678,-.9905754753144174,.9905754753144174],[-.0847750130417353,.0847750130417353,-.2518862256915055,.2518862256915055,-.41175116146284263,.41175116146284263,-.5597708310739475,.5597708310739475,
-.6916870430603532,.6916870430603532,-.8037049589725231,.8037049589725231,-.8926024664975557,.8926024664975557,-.9558239495713977,.9558239495713977,-.9915651684209309,.9915651684209309],[0,-.16035864564022537,.16035864564022537,-.31656409996362983,.31656409996362983,-.46457074137596094,.46457074137596094,-.600545304661681,.600545304661681,-.7209661773352294,.7209661773352294,-.8227146565371428,.8227146565371428,-.9031559036148179,.9031559036148179,-.96020815213483,.96020815213483,-.9924068438435844,
.9924068438435844],[-.07652652113349734,.07652652113349734,-.22778585114164507,.22778585114164507,-.37370608871541955,.37370608871541955,-.5108670019508271,.5108670019508271,-.636053680726515,.636053680726515,-.7463319064601508,.7463319064601508,-.8391169718222188,.8391169718222188,-.912234428251326,.912234428251326,-.9639719272779138,.9639719272779138,-.9931285991850949,.9931285991850949],[0,-.1455618541608951,.1455618541608951,-.2880213168024011,.2880213168024011,-.4243421202074388,.4243421202074388,
-.5516188358872198,.5516188358872198,-.6671388041974123,.6671388041974123,-.7684399634756779,.7684399634756779,-.8533633645833173,.8533633645833173,-.9200993341504008,.9200993341504008,-.9672268385663063,.9672268385663063,-.9937521706203895,.9937521706203895],[-.06973927331972223,.06973927331972223,-.20786042668822127,.20786042668822127,-.34193582089208424,.34193582089208424,-.469355837986757,.469355837986757,-.5876404035069116,.5876404035069116,-.6944872631866827,.6944872631866827,-.7878168059792081,
.7878168059792081,-.8658125777203002,.8658125777203002,-.926956772187174,.926956772187174,-.9700604978354287,.9700604978354287,-.9942945854823992,.9942945854823992],[0,-.1332568242984661,.1332568242984661,-.26413568097034495,.26413568097034495,-.3903010380302908,.3903010380302908,-.5095014778460075,.5095014778460075,-.6196098757636461,.6196098757636461,-.7186613631319502,.7186613631319502,-.8048884016188399,.8048884016188399,-.8767523582704416,.8767523582704416,-.9329710868260161,.9329710868260161,
-.9725424712181152,.9725424712181152,-.9947693349975522,.9947693349975522],[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,
.9951872199970213]],uX=[[],[],[1,1],[.8888888888888888,.5555555555555556,.5555555555555556],[.6521451548625461,.6521451548625461,.34785484513745385,.34785484513745385],[.5688888888888889,.47862867049936647,.47862867049936647,.23692688505618908,.23692688505618908],[.3607615730481386,.3607615730481386,.46791393457269104,.46791393457269104,.17132449237917036,.17132449237917036],[.4179591836734694,.3818300505051189,.3818300505051189,.27970539148927664,.27970539148927664,.1294849661688697,.1294849661688697],
[.362683783378362,.362683783378362,.31370664587788727,.31370664587788727,.22238103445337448,.22238103445337448,.10122853629037626,.10122853629037626],[.3302393550012598,.1806481606948574,.1806481606948574,.08127438836157441,.08127438836157441,.31234707704000286,.31234707704000286,.26061069640293544,.26061069640293544],[.29552422471475287,.29552422471475287,.26926671930999635,.26926671930999635,.21908636251598204,.21908636251598204,.1494513491505806,.1494513491505806,.06667134430868814,.06667134430868814],
[.2729250867779006,.26280454451024665,.26280454451024665,.23319376459199048,.23319376459199048,.18629021092773426,.18629021092773426,.1255803694649046,.1255803694649046,.05566856711617366,.05566856711617366],[.24914704581340277,.24914704581340277,.2334925365383548,.2334925365383548,.20316742672306592,.20316742672306592,.16007832854334622,.16007832854334622,.10693932599531843,.10693932599531843,.04717533638651183,.04717533638651183],[.2325515532308739,.22628318026289723,.22628318026289723,.2078160475368885,
.2078160475368885,.17814598076194574,.17814598076194574,.13887351021978725,.13887351021978725,.09212149983772845,.09212149983772845,.04048400476531588,.04048400476531588],[.2152638534631578,.2152638534631578,.2051984637212956,.2051984637212956,.18553839747793782,.18553839747793782,.15720316715819355,.15720316715819355,.12151857068790319,.12151857068790319,.08015808715976021,.08015808715976021,.03511946033175186,.03511946033175186],[.2025782419255613,.19843148532711158,.19843148532711158,.1861610000155622,
.1861610000155622,.16626920581699392,.16626920581699392,.13957067792615432,.13957067792615432,.10715922046717194,.10715922046717194,.07036604748810812,.07036604748810812,.03075324199611727,.03075324199611727],[.1894506104550685,.1894506104550685,.18260341504492358,.18260341504492358,.16915651939500254,.16915651939500254,.14959598881657674,.14959598881657674,.12462897125553388,.12462897125553388,.09515851168249279,.09515851168249279,.062253523938647894,.062253523938647894,.027152459411754096,.027152459411754096],
[.17944647035620653,.17656270536699264,.17656270536699264,.16800410215645004,.16800410215645004,.15404576107681028,.15404576107681028,.13513636846852548,.13513636846852548,.11188384719340397,.11188384719340397,.08503614831717918,.08503614831717918,.0554595293739872,.0554595293739872,.02414830286854793,.02414830286854793],[.1691423829631436,.1691423829631436,.16427648374583273,.16427648374583273,.15468467512626524,.15468467512626524,.14064291467065065,.14064291467065065,.12255520671147846,.12255520671147846,
.10094204410628717,.10094204410628717,.07642573025488905,.07642573025488905,.0497145488949698,.0497145488949698,.02161601352648331,.02161601352648331],[.1610544498487837,.15896884339395434,.15896884339395434,.15276604206585967,.15276604206585967,.1426067021736066,.1426067021736066,.12875396253933621,.12875396253933621,.11156664554733399,.11156664554733399,.09149002162245,.09149002162245,.06904454273764123,.06904454273764123,.0448142267656996,.0448142267656996,.019461788229726478,.019461788229726478],
[.15275338713072584,.15275338713072584,.14917298647260374,.14917298647260374,.14209610931838204,.14209610931838204,.13168863844917664,.13168863844917664,.11819453196151841,.11819453196151841,.10193011981724044,.10193011981724044,.08327674157670475,.08327674157670475,.06267204833410907,.06267204833410907,.04060142980038694,.04060142980038694,.017614007139152118,.017614007139152118],[.14608113364969041,.14452440398997005,.14452440398997005,.13988739479107315,.13988739479107315,.13226893863333747,.13226893863333747,
.12183141605372853,.12183141605372853,.10879729916714838,.10879729916714838,.09344442345603386,.09344442345603386,.0761001136283793,.0761001136283793,.057134425426857205,.057134425426857205,.036953789770852494,.036953789770852494,.016017228257774335,.016017228257774335],[.13925187285563198,.13925187285563198,.13654149834601517,.13654149834601517,.13117350478706238,.13117350478706238,.12325237681051242,.12325237681051242,.11293229608053922,.11293229608053922,.10041414444288096,.10041414444288096,.08594160621706773,
.08594160621706773,.06979646842452049,.06979646842452049,.052293335152683286,.052293335152683286,.03377490158481415,.03377490158481415,.0146279952982722,.0146279952982722],[.13365457218610619,.1324620394046966,.1324620394046966,.12890572218808216,.12890572218808216,.12304908430672953,.12304908430672953,.11499664022241136,.11499664022241136,.10489209146454141,.10489209146454141,.09291576606003515,.09291576606003515,.07928141177671895,.07928141177671895,.06423242140852585,.06423242140852585,.04803767173108467,
.04803767173108467,.030988005856979445,.030988005856979445,.013411859487141771,.013411859487141771],[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,
.0123412297999872,.0123412297999872]],sX=[[1],[1,1],[1,2,1],[1,3,3,1]],OC=2*Math.PI,vX=function(oa,Na,Ia,Za,jb,Ub,ab,Mb,Db){var Rc=Math.sin(jb*OC/360),Ib=Math.cos(jb*OC/360);jb=Ib*(oa-Mb)/2+Rc*(Na-Db)/2;var Ud=-Rc*(oa-Mb)/2+Ib*(Na-Db)/2;if(0===jb&&0===Ud||0===Ia||0===Za)return[];Ia=Math.abs(Ia);Za=Math.abs(Za);jb=jb*jb/(Ia*Ia)+Ud*Ud/(Za*Za);1<jb&&(Ia*=Math.sqrt(jb),Za*=Math.sqrt(jb));var ue=va(oa,Na,Mb,Db,Ub,ab,Ia,Za,Rc,Ib);oa=[];Na=ue[2];Ub=ue[3];ab=Math.max(Math.ceil(Math.abs(Ub)/(OC/4)),1);Ub/=
ab;for(Mb=0;Mb<ab;Mb++)oa.push(za(Na,Ub)),Na+=Ub;return oa.map(function(Cf){for(var Df=0;Df<Cf.length;Df+=2){var Oe=Cf[Df+0],Ef=Cf[Df+1];Oe*=Ia;Ef*=Za;var op=Rc*Oe+Ib*Ef;Cf[Df+0]=Ib*Oe-Rc*Ef+ue[0];Cf[Df+1]=op+ue[1]}return Cf})},WO=function(oa,Na,Ia,Za,jb,Ub,ab,Mb,Db){return new L(oa,Na,Ia,Za,jb,Ub,ab,Mb,Db)};L.prototype={constructor:L,init:function(){},getTotalLength:function(){return(this||wc).length},getPointAtLength:function(oa){var Na=this||wc;0>oa?oa=0:oa>(this||wc).length&&(oa=(this||wc).length);
for(var Ia=(this||wc).partialLengths.length-1;(this||wc).partialLengths[Ia]>=oa&&0<(this||wc).partialLengths[Ia];)Ia--;Ia<(this||wc).partialLengths.length-1&&Ia++;for(var Za=0,jb=0;jb<Ia;jb++)Za+=Na.partialLengths[jb];return(this||wc).curves[Ia].getPointAtLength(oa-Za)},getTangentAtLength:function(oa){var Na=this||wc;0>oa?oa=0:oa>(this||wc).length&&(oa=(this||wc).length);for(var Ia=(this||wc).partialLengths.length-1;(this||wc).partialLengths[Ia]>=oa&&0<(this||wc).partialLengths[Ia];)Ia--;Ia<(this||
wc).partialLengths.length-1&&Ia++;for(var Za=0,jb=0;jb<Ia;jb++)Za+=Na.partialLengths[jb];return(this||wc).curves[Ia].getTangentAtLength(oa-Za)},getPropertiesAtLength:function(oa){var Na=this.getTangentAtLength(oa);oa=this.getPointAtLength(oa);return{x:oa.x,y:oa.y,tangentX:Na.x,tangentY:Na.y}}};var Pu=function(oa,Na,Ia,Za){return new Z(oa,Na,Ia,Za)};Z.prototype.getTotalLength=function(){return Math.sqrt(Math.pow((this||wc).x0-(this||wc).x1,2)+Math.pow((this||wc).y0-(this||wc).y1,2))};Z.prototype.getPointAtLength=
function(oa){oa/=Math.sqrt(Math.pow((this||wc).x0-(this||wc).x1,2)+Math.pow((this||wc).y0-(this||wc).y1,2));return{x:(this||wc).x0+((this||wc).x1-(this||wc).x0)*oa,y:(this||wc).y0+((this||wc).y1-(this||wc).y0)*oa}};Z.prototype.getTangentAtLength=function(){var oa=Math.sqrt(((this||wc).x1-(this||wc).x0)*((this||wc).x1-(this||wc).x0)+((this||wc).y1-(this||wc).y0)*((this||wc).y1-(this||wc).y0));return{x:((this||wc).x1-(this||wc).x0)/oa,y:((this||wc).y1-(this||wc).y0)/oa}};Z.prototype.getPropertiesAtLength=
function(oa){oa=this.getPointAtLength(oa);var Na=this.getTangentAtLength();return{x:oa.x,y:oa.y,tangentX:Na.x,tangentY:Na.y}};var QO=function(oa){function Na(ab){if(!ab)return null;var Mb;ab=CX(ab);for(var Db=[0,0],Rc=[0,0],Ib=0;Ib<ab.length;Ib++)"M"===ab[Ib][0]?(Db=[ab[Ib][1],ab[Ib][2]],jb.push(null)):"m"===ab[Ib][0]?(Db=[ab[Ib][1]+Db[0],ab[Ib][2]+Db[1]],jb.push(null)):"L"===ab[Ib][0]?(Ia+=Math.sqrt(Math.pow(Db[0]-ab[Ib][1],2)+Math.pow(Db[1]-ab[Ib][2],2)),jb.push(new Pu(Db[0],ab[Ib][1],Db[1],ab[Ib][2])),
Db=[ab[Ib][1],ab[Ib][2]]):"l"===ab[Ib][0]?(Ia+=Math.sqrt(Math.pow(ab[Ib][1],2)+Math.pow(ab[Ib][2],2)),jb.push(new Pu(Db[0],ab[Ib][1]+Db[0],Db[1],ab[Ib][2]+Db[1])),Db=[ab[Ib][1]+Db[0],ab[Ib][2]+Db[1]]):"H"===ab[Ib][0]?(Ia+=Math.abs(Db[0]-ab[Ib][1]),jb.push(new Pu(Db[0],ab[Ib][1],Db[1],Db[1])),Db[0]=ab[Ib][1]):"h"===ab[Ib][0]?(Ia+=Math.abs(ab[Ib][1]),jb.push(new Pu(Db[0],Db[0]+ab[Ib][1],Db[1],Db[1])),Db[0]=ab[Ib][1]+Db[0]):"V"===ab[Ib][0]?(Ia+=Math.abs(Db[1]-ab[Ib][1]),jb.push(new Pu(Db[0],Db[0],Db[1],
ab[Ib][1])),Db[1]=ab[Ib][1]):"v"===ab[Ib][0]?(Ia+=Math.abs(ab[Ib][1]),jb.push(new Pu(Db[0],Db[0],Db[1],Db[1]+ab[Ib][1])),Db[1]=ab[Ib][1]+Db[1]):"z"===ab[Ib][0]||"Z"===ab[Ib][0]?(Ia+=Math.sqrt(Math.pow(ab[0][1]-Db[0],2)+Math.pow(ab[0][2]-Db[1],2)),jb.push(new Pu(Db[0],ab[0][1],Db[1],ab[0][2])),Db=[ab[0][1],ab[0][2]]):"C"===ab[Ib][0]?(Mb=new Qr(Db[0],Db[1],ab[Ib][1],ab[Ib][2],ab[Ib][3],ab[Ib][4],ab[Ib][5],ab[Ib][6]),Ia+=Mb.getTotalLength(),Db=[ab[Ib][5],ab[Ib][6]],jb.push(Mb)):"c"===ab[Ib][0]?(Mb=new Qr(Db[0],
Db[1],Db[0]+ab[Ib][1],Db[1]+ab[Ib][2],Db[0]+ab[Ib][3],Db[1]+ab[Ib][4],Db[0]+ab[Ib][5],Db[1]+ab[Ib][6]),Ia+=Mb.getTotalLength(),Db=[ab[Ib][5]+Db[0],ab[Ib][6]+Db[1]],jb.push(Mb)):"S"===ab[Ib][0]?(Mb=0<Ib&&-1<["C","c","S","s"].indexOf(ab[Ib-1][0])?new Qr(Db[0],Db[1],2*Db[0]-ab[Ib-1][ab[Ib-1].length-4],2*Db[1]-ab[Ib-1][ab[Ib-1].length-3],ab[Ib][1],ab[Ib][2],ab[Ib][3],ab[Ib][4]):new Qr(Db[0],Db[1],Db[0],Db[1],ab[Ib][1],ab[Ib][2],ab[Ib][3],ab[Ib][4]),Ia+=Mb.getTotalLength(),Db=[ab[Ib][3],ab[Ib][4]],jb.push(Mb)):
"s"===ab[Ib][0]?(Mb=0<Ib&&-1<["C","c","S","s"].indexOf(ab[Ib-1][0])?new Qr(Db[0],Db[1],Db[0]+Mb.d.x-Mb.c.x,Db[1]+Mb.d.y-Mb.c.y,Db[0]+ab[Ib][1],Db[1]+ab[Ib][2],Db[0]+ab[Ib][3],Db[1]+ab[Ib][4]):new Qr(Db[0],Db[1],Db[0],Db[1],Db[0]+ab[Ib][1],Db[1]+ab[Ib][2],Db[0]+ab[Ib][3],Db[1]+ab[Ib][4]),Ia+=Mb.getTotalLength(),Db=[ab[Ib][3]+Db[0],ab[Ib][4]+Db[1]],jb.push(Mb)):"Q"===ab[Ib][0]?(Mb=new Qr(Db[0],Db[1],ab[Ib][1],ab[Ib][2],ab[Ib][3],ab[Ib][4]),Ia+=Mb.getTotalLength(),jb.push(Mb),Db=[ab[Ib][3],ab[Ib][4]],
Rc=[ab[Ib][1],ab[Ib][2]]):"q"===ab[Ib][0]?(Mb=new Qr(Db[0],Db[1],Db[0]+ab[Ib][1],Db[1]+ab[Ib][2],Db[0]+ab[Ib][3],Db[1]+ab[Ib][4]),Ia+=Mb.getTotalLength(),Rc=[Db[0]+ab[Ib][1],Db[1]+ab[Ib][2]],Db=[ab[Ib][3]+Db[0],ab[Ib][4]+Db[1]],jb.push(Mb)):"T"===ab[Ib][0]?(Mb=0<Ib&&-1<["Q","q","T","t"].indexOf(ab[Ib-1][0])?new Qr(Db[0],Db[1],2*Db[0]-Rc[0],2*Db[1]-Rc[1],ab[Ib][1],ab[Ib][2]):new Pu(Db[0],ab[Ib][1],Db[1],ab[Ib][2]),jb.push(Mb),Ia+=Mb.getTotalLength(),Rc=[2*Db[0]-Rc[0],2*Db[1]-Rc[1]],Db=[ab[Ib][1],ab[Ib][2]]):
"t"===ab[Ib][0]?(Mb=0<Ib&&-1<["Q","q","T","t"].indexOf(ab[Ib-1][0])?new Qr(Db[0],Db[1],2*Db[0]-Rc[0],2*Db[1]-Rc[1],Db[0]+ab[Ib][1],Db[1]+ab[Ib][2]):new Pu(Db[0],Db[0]+ab[Ib][1],Db[1],Db[1]+ab[Ib][2]),Ia+=Mb.getTotalLength(),Rc=[2*Db[0]-Rc[0],2*Db[1]-Rc[1]],Db=[ab[Ib][1]+Db[0],ab[Ib][2]+Db[0]],jb.push(Mb)):"A"===ab[Ib][0]?(Mb=new WO(Db[0],Db[1],ab[Ib][1],ab[Ib][2],ab[Ib][3],ab[Ib][4],ab[Ib][5],ab[Ib][6],ab[Ib][7]),Ia+=Mb.getTotalLength(),Db=[ab[Ib][6],ab[Ib][7]],jb.push(Mb)):"a"===ab[Ib][0]&&(Mb=new WO(Db[0],
Db[1],ab[Ib][1],ab[Ib][2],ab[Ib][3],ab[Ib][4],ab[Ib][5],Db[0]+ab[Ib][6],Db[1]+ab[Ib][7]),Ia+=Mb.getTotalLength(),Db=[Db[0]+ab[Ib][6],Db[1]+ab[Ib][7]],jb.push(Mb)),Za.push(Ia);return Na}var Ia=0,Za=[],jb=[];Na.getTotalLength=function(){return Ia};Na.getPointAtLength=function(ab){ab=Ub(ab);return jb[ab.i].getPointAtLength(ab.fraction)};Na.getTangentAtLength=function(ab){ab=Ub(ab);return jb[ab.i].getTangentAtLength(ab.fraction)};Na.getPropertiesAtLength=function(ab){ab=Ub(ab);return jb[ab.i].getPropertiesAtLength(ab.fraction)};
var Ub=function(ab){0>ab?ab=0:ab>Ia&&(ab=Ia);for(var Mb=Za.length-1;Za[Mb]>=ab&&0<Za[Mb];)Mb--;return Mb++,{fraction:ab-Za[Mb-1],i:Mb}};return Na(oa)},GF='All shapes must be supplied as arrays of [x, y] points or an SVG path string (https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/d).\nExample valid ways of supplying a shape would be:\n[[0, 0], [10, 0], [10, 10]]\n"M0,0 L10,0 L10,10Z"\n',Lw=function(oa,Na){for(var Ia,Za,jb,Ub=oa.length,ab=1/0,Mb=0;Mb<Ub;Mb++)!function(Db){Za=0;Na.forEach(function(Rc,
Ib){Rc=R(oa[(Db+Ib)%Ub],Rc);Za+=Rc*Rc});Za<ab&&(ab=Za,Ia=Db)}(Mb);Ia&&(jb=oa.splice(0,Ia),oa.splice.apply(oa,[oa.length,0].concat(jb)))},TO=fc;fc.deviation=function(oa,Na,Ia,Za){var jb=Na&&Na.length,Ub=Math.abs(Uh(oa,0,jb?Na[0]*Ia:oa.length,Ia));if(jb){jb=0;for(var ab=Na.length;jb<ab;jb++)Ub-=Math.abs(Uh(oa,Na[jb]*Ia,jb<ab-1?Na[jb+1]*Ia:oa.length,Ia))}for(jb=Na=0;jb<Za.length;jb+=3){ab=Za[jb]*Ia;var Mb=Za[jb+1]*Ia,Db=Za[jb+2]*Ia;Na+=Math.abs((oa[ab]-oa[Db])*(oa[Mb+1]-oa[ab+1])-(oa[ab]-oa[Mb])*(oa[Db+
1]-oa[ab+1]))}return 0===Ub&&0===Na?0:Math.abs((Na-Ub)/Ub)};fc.flatten=function(oa){for(var Na=oa[0][0].length,Ia={vertices:[],holes:[],dimensions:Na},Za=0,jb=0;jb<oa.length;jb++){for(var Ub=0;Ub<oa[jb].length;Ub++)for(var ab=0;ab<Na;ab++)Ia.vertices.push(oa[jb][Ub][ab]);0<jb&&(Za+=oa[jb-1].length,Ia.holes.push(Za))}return Ia};var XO=function(oa){return oa},SO=function(oa){if(null==oa)return XO;var Na,Ia,Za=oa.scale[0],jb=oa.scale[1],Ub=oa.translate[0],ab=oa.translate[1];return function(Mb,Db){Db||
(Na=Ia=0);Db=2;var Rc=Mb.length,Ib=Array(Rc);Ib[0]=(Na+=Mb[0])*Za+Ub;for(Ib[1]=(Ia+=Mb[1])*jb+ab;Db<Rc;)Ib[Db]=Mb[Db],++Db;return Ib}},PC=function(oa,Na){return"GeometryCollection"===Na.type?{type:"FeatureCollection",features:Na.geometries.map(function(Ia){return th(oa,Ia)})}:th(oa,Na)},xX=function(oa,Na){function Ia(Rc){var Ib,Ud=oa.arcs[0>Rc?~Rc:Rc],ue=Ud[0];return oa.transform?(Ib=[0,0],Ud.forEach(function(Cf){Ib[0]+=Cf[0];Ib[1]+=Cf[1]})):Ib=Ud[Ud.length-1],0>Rc?[Ib,ue]:[ue,Ib]}function Za(Rc,
Ib){for(var Ud in Rc){var ue=Rc[Ud];delete Ib[ue.start];delete ue.start;delete ue.end;ue.forEach(function(Cf){jb[0>Cf?~Cf:Cf]=1});Mb.push(ue)}}var jb={},Ub={},ab={},Mb=[],Db=-1;return Na.forEach(function(Rc,Ib){var Ud,ue=oa.arcs[0>Rc?~Rc:Rc];3>ue.length&&!ue[1][0]&&!ue[1][1]&&(Ud=Na[++Db],Na[Db]=Rc,Na[Ib]=Ud)}),Na.forEach(function(Rc){var Ib=Ia(Rc);var Ud=Ib[0],ue=Ib[1];(Ib=ab[Ud])?(delete ab[Ib.end],Ib.push(Rc),Ib.end=ue,Rc=Ub[ue])?(delete Ub[Rc.start],Ud=Rc===Ib?Ib:Ib.concat(Rc),Ub[Ud.start=Ib.start]=
ab[Ud.end=Rc.end]=Ud):Ub[Ib.start]=ab[Ib.end]=Ib:(Ib=Ub[ue])?(delete Ub[Ib.start],Ib.unshift(Rc),Ib.start=Ud,Rc=ab[Ud])?(delete ab[Rc.end],Ud=Rc===Ib?Ib:Rc.concat(Ib),Ub[Ud.start=Rc.start]=ab[Ud.end=Ib.end]=Ud):Ub[Ib.start]=ab[Ib.end]=Ib:(Ib=[Rc],Ub[Ib.start=Ud]=ab[Ib.end=ue]=Ib)}),Za(ab,Ub),Za(Ub,ab),Na.forEach(function(Rc){jb[0>Rc?~Rc:Rc]||Mb.push([Rc])}),Mb},YO=function(oa,Na){for(var Ia=0,Za=oa.length;Ia<Za;){var jb=Ia+Za>>>1;oa[jb]<Na?Ia=jb+1:Za=jb}return Ia},yX=function(oa){function Na(Df,Oe){Df.forEach(function(Ef){0>
Ef&&(Ef=~Ef);var op=jb[Ef];op?op.push(Oe):jb[Ef]=[Oe]})}function Ia(Df,Oe){Df.forEach(function(Ef){Na(Ef,Oe)})}function Za(Df,Oe){"GeometryCollection"===Df.type?Df.geometries.forEach(function(Ef){Za(Ef,Oe)}):Df.type in ab&&ab[Df.type](Df.arcs,Oe)}var jb={},Ub=oa.map(function(){return[]}),ab={LineString:Na,MultiLineString:Ia,Polygon:Ia,MultiPolygon:function(Df,Oe){Df.forEach(function(Ef){Ia(Ef,Oe)})}};oa.forEach(Za);for(var Mb in jb){oa=jb[Mb];for(var Db=oa.length,Rc=0;Rc<Db;++Rc)for(var Ib=Rc+1;Ib<
Db;++Ib){var Ud,ue=oa[Rc],Cf=oa[Ib];(Ud=Ub[ue])[Mb=YO(Ud,Cf)]!==Cf&&Ud.splice(Mb,0,Cf);(Ud=Ub[Cf])[Mb=YO(Ud,ue)]!==ue&&Ud.splice(Mb,0,ue)}}return Ub},BA=function(oa,Na){return oa<Na?-1:oa>Na?1:oa>=Na?0:NaN},VI=function(oa){return 1===oa.length&&(oa=qj(oa)),{left:function(Na,Ia,Za,jb){null==Za&&(Za=0);for(null==jb&&(jb=Na.length);Za<jb;){var Ub=Za+jb>>>1;0>oa(Na[Ub],Ia)?Za=Ub+1:jb=Ub}return Za},right:function(Na,Ia,Za,jb){null==Za&&(Za=0);for(null==jb&&(jb=Na.length);Za<jb;){var Ub=Za+jb>>>1;0<oa(Na[Ub],
Ia)?jb=Ub:Za=Ub+1}return Za}}};VI(BA);var UO=function(oa,Na){return Ri(Qi(xk(oa),oa),Na)},WI=function(oa,Na){if(8<oa.length)return oa.map(function(Za,jb){return jb});var Ia=oa.map(function(Za){return Na.map(function(jb){jb=R(gb(Za),gb(jb));return jb*jb})});return bj(oa,Na,Ia)};d.interpolate=function(oa,Na,Ia){void 0===Ia&&(Ia={});var Za=Ia.maxSegmentLength;void 0===Za&&(Za=10);Ia=Ia.string;void 0===Ia&&(Ia=!0);var jb=pa(oa,Za);Za=pa(Na,Za);var Ub=Hb(jb,Za,Ia);return!Ia||"string"!=typeof oa&&"string"!=
typeof Na?Ub:function(ab){return 1E-4>ab&&"string"==typeof oa?oa:1E-4>1-ab&&"string"==typeof Na?Na:Ub(ab)}};d.separate=fk;d.combine=function(oa,Na,Ia){void 0===Ia&&(Ia={});var Za=Ia.maxSegmentLength;void 0===Za&&(Za=10);var jb=Ia.string;void 0===jb&&(jb=!0);Ia=Ia.single;void 0===Ia&&(Ia=!1);var Ub=fk(Na,oa,{maxSegmentLength:Za,string:jb,single:Ia});return Ia?function(ab){return Ub(1-ab)}:Ub.map(function(ab){return function(Mb){return ab(1-Mb)}})};d.interpolateAll=function(oa,Na,Ia){void 0===Ia&&(Ia=
{});var Za=Ia.maxSegmentLength;void 0===Za&&(Za=10);var jb=Ia.string;void 0===jb&&(jb=!0);Ia=Ia.single;if(void 0===Ia&&(Ia=!1),!Array.isArray(oa)||!Array.isArray(Na)||oa.length!==Na.length||!oa.length)throw new TypeError("flubber.all() expects two arrays of equal length as arguments. Each element in both arrays should be an array of [x, y] points or an SVG path string (https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/d).");var Ub,ab,Mb=function(Rc){return pa(Rc,Za)},Db=oa.map(Mb);Mb=Na.map(Mb);
return Ia?(oa.every(function(Rc){return"string"==typeof Rc})&&(Ub=oa.slice(0)),Na.every(function(Rc){return"string"==typeof Rc})&&(ab=Na.slice(0))):(Ub=oa.slice(0),ab=Na.slice(0)),Qk(Db,Mb,{string:jb,single:Ia,t0:Ub,t1:ab,match:!1})};d.splitPathString=function(oa){return hb((new PO(oa)).abs())};d.toPathString=ta;d.fromCircle=gk;d.toCircle=function(oa,Na,Ia,Za,jb){var Ub=gk(Na,Ia,Za,oa,jb);return function(ab){return Ub(1-ab)}};d.fromRect=Rk;d.toRect=function(oa,Na,Ia,Za,jb,Ub){var ab=Rk(Na,Ia,Za,jb,
oa,Ub);return function(Mb){return ab(1-Mb)}};Object.defineProperty(d,"__esModule",{value:!0})});var Pqa={},Qqa="function"===typeof Float32Array,Rqa=Pqa=function(d,h,n,b){if(!(0<=d&&1>=d&&0<=n&&1>=n))throw Error("bezier x values must be in [0, 1] range");if(d===h&&n===b)return be;for(var e=Qqa?new Float32Array(11):Array(11),l=0;11>l;++l)e[l]=Lz(.1*l,d,n);return function(a){if(0===a)return 0;if(1===a)return 1;for(var f=0,m=1;10!==m&&e[m]<=a;++m)f+=.1;--m;m=f+(a-e[m])/(e[m+1]-e[m])*.1;var r=3*(1-3*n+
3*d)*m*m+2*(3*n-6*d)*m+3*d;if(.001<=r){for(f=0;4>f;++f){r=3*(1-3*n+3*d)*m*m+2*(3*n-6*d)*m+3*d;if(0===r)break;var v=Lz(m,d,n)-a;m-=v/r}a=m}else if(0===r)a=m;else{m=f;f+=.1;var x=0;do v=m+(f-m)/2,r=Lz(v,d,n)-a,0<r?f=v:m=v;while(1E-7<Math.abs(r)&&10>++x);a=v}return Lz(a,h,b)}},lc="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global;!function(){var d={},h={};!function(n,b){function e(){(this||lc)._delay=0;(this||lc)._endDelay=0;(this||lc)._fill="none";(this||lc)._iterationStart=
0;(this||lc)._iterations=1;(this||lc)._duration=0;(this||lc)._playbackRate=1;(this||lc)._direction="normal";(this||lc)._easing="linear";(this||lc)._easingFunction=F}function l(){return n.isDeprecated("Invalid timing inputs","2016-03-02","TypeError exceptions will be thrown instead.",!0)}function a(X,ja,fa){var ua=new e;return ja&&(ua.fill="both",ua.duration="auto"),"number"!=typeof X||isNaN(X)?void 0!==X&&Object.getOwnPropertyNames(X).forEach(function(gb){"auto"==X[gb]||("number"==typeof ua[gb]||
"duration"==gb)&&("number"!=typeof X[gb]||isNaN(X[gb]))||"fill"==gb&&-1==y.indexOf(X[gb])||"direction"==gb&&-1==E.indexOf(X[gb])||"playbackRate"==gb&&1!==X[gb]&&n.isDeprecated("AnimationEffectTiming.playbackRate","2014-11-28","Use Animation.playbackRate instead.")||(ua[gb]=X[gb])}):ua.duration=X,ua}function f(X,ja,fa,ua){return 0>X||1<X||0>fa||1<fa?F:function(gb){if(0>=gb){var hb=0;return 0<X?hb=ja/X:!ja&&0<fa&&(hb=ua/fa),hb*gb}if(1<=gb)return hb=0,1>fa?hb=(ua-1)/(fa-1):1==fa&&1>X&&(hb=(ja-1)/(X-
1)),1+hb*(gb-1);hb=0;for(var ta=1;hb<ta;){var na=(hb+ta)/2,pa=3*X*(1-na)*(1-na)*na+3*fa*(1-na)*na*na+na*na*na;if(1E-5>Math.abs(gb-pa))break;pa<gb?hb=na:ta=na}return 3*ja*(1-na)*(1-na)*na+3*ua*(1-na)*na*na+na*na*na}}function m(X,ja){return function(fa){if(1<=fa)return 1;var ua=1/X;return(fa+=ja*ua)-fa%ua}}function r(X){Y||(Y=document.createElement("div").style);Y.animationTimingFunction="";Y.animationTimingFunction=X;var ja=Y.animationTimingFunction;if(""==ja&&l())throw new TypeError(X+" is not a valid value for easing");
return ja}function v(X){if("linear"==X)return F;var ja=W.exec(X);return ja?f.apply(this||lc,ja.slice(1).map(Number)):(ja=da.exec(X))?m(Number(ja[1]),P):(ja=va.exec(X))?m(Number(ja[1]),{start:I,middle:J,end:P}[ja[2]]):N[X]||F}function x(X,ja,fa){if(null==ja)return za;var ua=fa.delay+X+fa.endDelay;return ja<Math.min(fa.delay,ua)?L:ja>=Math.min(fa.delay+X,ua)?Z:R}var y=["backwards","forwards","both","none"],E=["reverse","alternate","alternate-reverse"],F=function(X){return X};e.prototype={_setMember:function(X,
ja){(this||lc)["_"+X]=ja;(this||lc)._effect&&((this||lc)._effect._timingInput[X]=ja,(this||lc)._effect._timing=n.normalizeTimingInput((this||lc)._effect._timingInput),(this||lc)._effect.activeDuration=n.calculateActiveDuration((this||lc)._effect._timing),(this||lc)._effect._animation&&(this||lc)._effect._animation._rebuildUnderlyingAnimation())},get playbackRate(){return(this||lc)._playbackRate},set delay(X){this._setMember("delay",X)},get delay(){return(this||lc)._delay},set endDelay(X){this._setMember("endDelay",
X)},get endDelay(){return(this||lc)._endDelay},set fill(X){this._setMember("fill",X)},get fill(){return(this||lc)._fill},set iterationStart(X){if((isNaN(X)||0>X)&&l())throw new TypeError("iterationStart must be a non-negative number, received: "+X);this._setMember("iterationStart",X)},get iterationStart(){return(this||lc)._iterationStart},set duration(X){if("auto"!=X&&(isNaN(X)||0>X)&&l())throw new TypeError("duration must be non-negative or auto, received: "+X);this._setMember("duration",X)},get duration(){return(this||
lc)._duration},set direction(X){this._setMember("direction",X)},get direction(){return(this||lc)._direction},set easing(X){(this||lc)._easingFunction=v(r(X));this._setMember("easing",X)},get easing(){return(this||lc)._easing},set iterations(X){if((isNaN(X)||0>X)&&l())throw new TypeError("iterations must be non-negative, received: "+X);this._setMember("iterations",X)},get iterations(){return(this||lc)._iterations}};var I=1,J=.5,P=0,N={ease:f(.25,.1,.25,1),"ease-in":f(.42,0,1,1),"ease-out":f(0,0,.58,
1),"ease-in-out":f(.42,0,.58,1),"step-start":m(1,I),"step-middle":m(1,J),"step-end":m(1,P)},Y=null,W=/cubic-bezier\(\s*(-?\d+\.?\d*|-?\.\d+)\s*,\s*(-?\d+\.?\d*|-?\.\d+)\s*,\s*(-?\d+\.?\d*|-?\.\d+)\s*,\s*(-?\d+\.?\d*|-?\.\d+)\s*\)/,da=/steps\(\s*(\d+)\s*\)/,va=/steps\(\s*(\d+)\s*,\s*(start|middle|end)\s*\)/,za=0,L=1,Z=2,R=3;n.cloneTimingInput=function(X){if("number"==typeof X)return X;var ja={},fa;for(fa in X)ja[fa]=X[fa];return ja};n.makeTiming=a;n.numericTimingToObject=function(X){return"number"==
typeof X&&(X=isNaN(X)?{duration:0}:{duration:X}),X};n.normalizeTimingInput=function(X,ja){return X=n.numericTimingToObject(X),a(X,ja)};n.calculateActiveDuration=function(X){return Math.abs((0===X.duration||0===X.iterations?0:X.duration*X.iterations)/X.playbackRate)};n.calculateIterationProgress=function(X,ja,fa){var ua=x(X,ja,fa);a:{var gb=fa.fill;switch(ua){case L:X="backwards"==gb||"both"==gb?0:null;break a;case R:X=ja-fa.delay;break a;case Z:X="forwards"==gb||"both"==gb?X:null;break a;case za:X=
null;break a}X=void 0}if(null===X)return null;ja=fa.duration;gb=fa.iterationStart;ja=(0===ja?ua!==L&&(gb+=fa.iterations):gb+=X/ja,gb);gb=ja===1/0?fa.iterationStart%1:ja%1;X=(0!==gb||ua!==Z||0===fa.iterations||0===X&&0!==fa.duration||(gb=1),gb);gb=ua===Z&&fa.iterations===1/0?1/0:1===X?Math.floor(ja)-1:Math.floor(ja);ja=ua=fa.direction;"normal"!==ua&&"reverse"!==ua&&("alternate-reverse"===ua&&(gb+=1),ja="normal",gb!==1/0&&0!=gb%2&&(ja="reverse"));return fa._easingFunction("normal"===ja?X:1-X)};n.calculatePhase=
x;n.normalizeEasing=r;n.parseEasingFunction=v}(d);(function(n,b){function e(m){var r=[],v;for(v in m)if(!(v in["easing","offset","composite"])){var x=m[v];Array.isArray(x)||(x=[x]);for(var y,E=x.length,F=0;F<E;F++)y={},y.offset="offset"in m?m.offset:1==E?1:F/(E-1),"easing"in m&&(y.easing=m.easing),"composite"in m&&(y.composite=m.composite),y[v]=x[F],r.push(y)}return r.sort(function(I,J){return I.offset-J.offset}),r}var l={background:"backgroundImage backgroundPosition backgroundSize backgroundRepeat backgroundAttachment backgroundOrigin backgroundClip backgroundColor".split(" "),
border:"borderTopColor borderTopStyle borderTopWidth borderRightColor borderRightStyle borderRightWidth borderBottomColor borderBottomStyle borderBottomWidth borderLeftColor borderLeftStyle borderLeftWidth".split(" "),borderBottom:["borderBottomWidth","borderBottomStyle","borderBottomColor"],borderColor:["borderTopColor","borderRightColor","borderBottomColor","borderLeftColor"],borderLeft:["borderLeftWidth","borderLeftStyle","borderLeftColor"],borderRadius:["borderTopLeftRadius","borderTopRightRadius",
"borderBottomRightRadius","borderBottomLeftRadius"],borderRight:["borderRightWidth","borderRightStyle","borderRightColor"],borderTop:["borderTopWidth","borderTopStyle","borderTopColor"],borderWidth:["borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth"],flex:["flexGrow","flexShrink","flexBasis"],font:"fontFamily fontSize fontStyle fontVariant fontWeight lineHeight".split(" "),margin:["marginTop","marginRight","marginBottom","marginLeft"],outline:["outlineColor","outlineStyle",
"outlineWidth"],padding:["paddingTop","paddingRight","paddingBottom","paddingLeft"]},a=document.createElementNS("http://www.w3.org/1999/xhtml","div");b={thin:"1px",medium:"3px",thick:"5px"};var f={borderBottomWidth:b,borderLeftWidth:b,borderRightWidth:b,borderTopWidth:b,fontSize:{"xx-small":"60%","x-small":"75%",small:"89%",medium:"100%",large:"120%","x-large":"150%","xx-large":"200%"},fontWeight:{normal:"400",bold:"700"},outlineWidth:b,textShadow:{none:"0px 0px 0px transparent"},boxShadow:{none:"0px 0px 0px 0px transparent"}};
n.convertToArrayForm=e;n.normalizeKeyframes=function(m){function r(){var F=v.length;null==v[F-1].offset&&(v[F-1].offset=1);1<F&&null==v[0].offset&&(v[0].offset=0);for(var I=0,J=v[0].offset,P=1;P<F;P++){var N=v[P].offset;if(null!=N){for(var Y=1;Y<P-I;Y++)v[I+Y].offset=J+(N-J)*Y/(P-I);I=P;J=N}}}if(null==m)return[];window.Symbol&&Symbol.iterator&&Array.prototype.from&&m[Symbol.iterator]&&(m=Array.from(m));Array.isArray(m)||(m=e(m));var v=m.map(function(F){var I={},J;for(J in F){var P=F[J];if("offset"==
J){if(null!=P){if(P=Number(P),!isFinite(P))throw new TypeError("Keyframe offsets must be numbers.");if(0>P||1<P)throw new TypeError("Keyframe offsets must be between 0 and 1.");}}else if("composite"==J){if("add"==P||"accumulate"==P)throw{type:DOMException.NOT_SUPPORTED_ERR,name:"NotSupportedError",message:"add compositing is not supported"};if("replace"!=P)throw new TypeError("Invalid composite mode "+P+".");}else P="easing"==J?n.normalizeEasing(P):""+P;var N=void 0,Y=J,W=P;P=I;var da=Y;if("display"!==
da&&0!==da.lastIndexOf("animation",0)&&0!==da.lastIndexOf("transition",0))if(da=l[Y])for(N in a.style[Y]=W,da)Y=da[N],W=a.style[Y],P[Y]=Y in f?f[Y][W]||W:W;else P[Y]=Y in f?f[Y][W]||W:W}return void 0==I.offset&&(I.offset=null),void 0==I.easing&&(I.easing="linear"),I});m=!0;for(var x=-1/0,y=0;y<v.length;y++){var E=v[y].offset;if(null!=E){if(E<x)throw new TypeError("Keyframes are not loosely sorted by offset. Sort or specify offsets.");x=E}else m=!1}return v=v.filter(function(F){return 0<=F.offset&&
1>=F.offset}),m||r(),v}})(d);(function(n){var b={};n.isDeprecated=function(e,l,a,f){f=f?"are":"is";var m=new Date;l=new Date(l);return l.setMonth(l.getMonth()+3),!(m<l&&(e in b||console.warn("Web Animations: "+e+" "+f+" deprecated and will stop working on "+l.toDateString()+". "+a),b[e]=!0,1))};n.deprecated=function(e,l,a,f){var m=f?"are":"is";if(n.isDeprecated(e,l,a,f))throw Error(e+" "+m+" no longer supported. "+a);}})(d);(function(){if(document.documentElement.animate){var n=document.documentElement.animate([],
0),b=!0;if(n&&(b=!1,"play currentTime pause reverse playbackRate cancel finish startTime playState".split(" ").forEach(function(e){void 0===n[e]&&(b=!0)})),!b)return}!function(e,l,a){function f(r){for(var v={},x=0;x<r.length;x++)for(var y in r[x])if("offset"!=y&&"easing"!=y&&"composite"!=y){var E={offset:r[x].offset,easing:r[x].easing,value:r[x][y]};v[y]=v[y]||[];v[y].push(E)}for(var F in v)if(r=v[F],0!=r[0].offset||1!=r[r.length-1].offset)throw{type:DOMException.NOT_SUPPORTED_ERR,name:"NotSupportedError",
message:"Partial keyframes are not supported"};return v}function m(r){var v=[],x;for(x in r)for(var y=r[x],E=0;E<y.length-1;E++){var F=E,I=E+1,J=y[F].offset,P=y[I].offset,N=J,Y=P;0==E&&(N=-1/0,0==P&&(I=F));E==y.length-2&&(Y=1/0,1==J&&(F=I));v.push({applyFrom:N,applyTo:Y,startOffset:y[F].offset,endOffset:y[I].offset,easingFunction:e.parseEasingFunction(y[F].easing),property:x,interpolation:l.propertyInterpolation(x,y[F].value,y[I].value)})}return v.sort(function(W,da){return W.startOffset-da.startOffset}),
v}l.convertEffectInput=function(r){r=e.normalizeKeyframes(r);var v=f(r),x=m(v);return function(y,E){if(null!=E)x.filter(function(I){return E>=I.applyFrom&&E<I.applyTo}).forEach(function(I){var J=E-I.startOffset,P=I.endOffset-I.startOffset;J=0==P?0:I.easingFunction(J/P);l.apply(y,I.property,I.interpolation(J))});else for(var F in v)"offset"!=F&&"easing"!=F&&"composite"!=F&&l.clear(y,F)}}}(d,h);(function(e,l,a){function f(v){return v.replace(/-(.)/g,function(x,y){return y.toUpperCase()})}var m={};l.addPropertiesHandler=
function(v,x,y){for(var E=0;E<y.length;E++){var F=v,I=x,J=f(y[E]);m[J]=m[J]||[];m[J].push([F,I])}};var r={backgroundColor:"transparent",backgroundPosition:"0% 0%",borderBottomColor:"currentColor",borderBottomLeftRadius:"0px",borderBottomRightRadius:"0px",borderBottomWidth:"3px",borderLeftColor:"currentColor",borderLeftWidth:"3px",borderRightColor:"currentColor",borderRightWidth:"3px",borderSpacing:"2px",borderTopColor:"currentColor",borderTopLeftRadius:"0px",borderTopRightRadius:"0px",borderTopWidth:"3px",
bottom:"auto",clip:"rect(0px, 0px, 0px, 0px)",color:"black",fontSize:"100%",fontWeight:"400",height:"auto",left:"auto",letterSpacing:"normal",lineHeight:"120%",marginBottom:"0px",marginLeft:"0px",marginRight:"0px",marginTop:"0px",maxHeight:"none",maxWidth:"none",minHeight:"0px",minWidth:"0px",opacity:"1.0",outlineColor:"invert",outlineOffset:"0px",outlineWidth:"3px",paddingBottom:"0px",paddingLeft:"0px",paddingRight:"0px",paddingTop:"0px",right:"auto",strokeDasharray:"none",strokeDashoffset:"0px",
textIndent:"0px",textShadow:"0px 0px 0px transparent",top:"auto",transform:"",verticalAlign:"0px",visibility:"visible",width:"auto",wordSpacing:"normal",zIndex:"auto"};l.propertyInterpolation=function(v,x,y){var E=v;/-/.test(v)&&!e.isDeprecated("Hyphenated property names","2016-03-22","Use camelCase instead.",!0)&&(E=f(v));"initial"!=x&&"initial"!=y||("initial"==x&&(x=r[E]),"initial"==y&&(y=r[E]));v=x==y?[]:m[E];for(E=0;v&&E<v.length;E++){var F=v[E][0](x),I=v[E][0](y);if(void 0!==F&&void 0!==I&&(F=
v[E][1](F,I))){var J=l.Interpolation.apply(null,F);return function(P){return 0==P?x:1==P?y:J(P)}}}return l.Interpolation(!1,!0,function(P){return P?y:x})}})(d,h);(function(e,l,a){function f(m){var r=e.calculateActiveDuration(m),v=function(x){return e.calculateIterationProgress(r,x,m)};return v._totalDuration=m.delay+r+m.endDelay,v}l.KeyframeEffect=function(m,r,v,x){var y,E=f(e.normalizeTimingInput(v)),F=l.convertEffectInput(r);r=function(){F(m,y)};return r._update=function(I){return null!==(y=E(I))},
r._clear=function(){F(m,null)},r._hasSameTarget=function(I){return m===I},r._target=m,r._totalDuration=E._totalDuration,r._id=x,r}})(d,h);(function(e,l){function a(F,I,J){J.enumerable=!0;J.configurable=!0;Object.defineProperty(F,I,J)}function f(F){(this||lc)._element=F;(this||lc)._surrogateStyle=document.createElementNS("http://www.w3.org/1999/xhtml","div").style;(this||lc)._style=F.style;(this||lc)._length=0;(this||lc)._isAnimatedProperty={};var I=window;F=!(!F.namespaceURI||-1==F.namespaceURI.indexOf("/svg"))&&
(r in I||(I[r]=/Trident|MSIE|IEMobile|Edge|Android 4/i.test(I.navigator.userAgent)),I[r]);(this||lc)._updateSvgTransformAttr=F;(this||lc)._savedTransformAttr=null;for(F=0;F<(this||lc)._style.length;F++)I=(this||lc)._style[F],(this||lc)._surrogateStyle[I]=(this||lc)._style[I];this._updateIndices()}function m(F){if(!F._webAnimationsPatchedStyle){var I=new f(F);try{a(F,"style",{get:function(){return I}})}catch(J){F.style._set=function(P,N){F.style[P]=N},F.style._clear=function(P){F.style[P]=""}}F._webAnimationsPatchedStyle=
F.style}}var r="_webAnimationsUpdateSvgTransformAttr";l={cssText:1,length:1,parentRule:1};var v={getPropertyCSSValue:1,getPropertyPriority:1,getPropertyValue:1,item:1,removeProperty:1,setProperty:1},x={removeProperty:1,setProperty:1};f.prototype={get cssText(){return(this||lc)._surrogateStyle.cssText},set cssText(F){for(var I={},J=0;J<(this||lc)._surrogateStyle.length;J++)I[(this||lc)._surrogateStyle[J]]=!0;(this||lc)._surrogateStyle.cssText=F;this._updateIndices();for(J=0;J<(this||lc)._surrogateStyle.length;J++)I[(this||
lc)._surrogateStyle[J]]=!0;for(var P in I)(this||lc)._isAnimatedProperty[P]||(this||lc)._style.setProperty(P,(this||lc)._surrogateStyle.getPropertyValue(P))},get length(){return(this||lc)._surrogateStyle.length},get parentRule(){return(this||lc)._style.parentRule},_updateIndices:function(){for(;(this||lc)._length<(this||lc)._surrogateStyle.length;)Object.defineProperty(this||lc,(this||lc)._length,{configurable:!0,enumerable:!1,get:function(F){return function(){return(this||lc)._surrogateStyle[F]}}((this||
lc)._length)}),(this||lc)._length++;for(;(this||lc)._length>(this||lc)._surrogateStyle.length;)(this||lc)._length--,Object.defineProperty(this||lc,(this||lc)._length,{configurable:!0,enumerable:!1,value:void 0})},_set:function(F,I){(this||lc)._style[F]=I;(this||lc)._isAnimatedProperty[F]=!0;(this||lc)._updateSvgTransformAttr&&"transform"==e.unprefixedPropertyName(F)&&(null==(this||lc)._savedTransformAttr&&((this||lc)._savedTransformAttr=(this||lc)._element.getAttribute("transform")),(this||lc)._element.setAttribute("transform",
e.transformToSvgMatrix(I)))},_clear:function(F){(this||lc)._style[F]=(this||lc)._surrogateStyle[F];(this||lc)._updateSvgTransformAttr&&"transform"==e.unprefixedPropertyName(F)&&((this||lc)._savedTransformAttr?(this||lc)._element.setAttribute("transform",(this||lc)._savedTransformAttr):(this||lc)._element.removeAttribute("transform"),(this||lc)._savedTransformAttr=null);delete (this||lc)._isAnimatedProperty[F]}};for(var y in v)f.prototype[y]=function(F,I){return function(){var J=(this||lc)._surrogateStyle[F].apply((this||
lc)._surrogateStyle,arguments);return I&&((this||lc)._isAnimatedProperty[arguments[0]]||(this||lc)._style[F].apply((this||lc)._style,arguments),this._updateIndices()),J}}(y,y in x);for(var E in document.documentElement.style)E in l||E in v||function(F){a(f.prototype,F,{get:function(){return(this||lc)._surrogateStyle[F]},set:function(I){(this||lc)._surrogateStyle[F]=I;this._updateIndices();(this||lc)._isAnimatedProperty[F]||((this||lc)._style[F]=I)}})}(E);e.apply=function(F,I,J){m(F);F.style._set(e.propertyName(I),
J)};e.clear=function(F,I){F._webAnimationsPatchedStyle&&F.style._clear(e.propertyName(I))}})(h);(function(e){window.Element.prototype.animate=function(l,a){var f="";return a&&a.id&&(f=a.id),e.timeline._play(e.KeyframeEffect(this||lc,l,a,f))}})(h);(function(e,l){function a(f,m,r){if("number"==typeof f&&"number"==typeof m)return f*(1-r)+m*r;if("boolean"==typeof f&&"boolean"==typeof m)return.5>r?f:m;if(f.length==m.length){for(var v=[],x=0;x<f.length;x++)v.push(a(f[x],m[x],r));return v}throw"Mismatched interpolation arguments "+
f+":"+m;}e.Interpolation=function(f,m,r){return function(v){return r(a(f,m,v))}}})(h);(function(e,l){l=function(){function a(f,m){for(var r=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],v=0;4>v;v++)for(var x=0;4>x;x++)for(var y=0;4>y;y++)r[v][x]+=m[v][y]*f[y][x];return r}return function(f,m,r,v,x){for(var y=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],E=0;4>E;E++)y[E][3]=x[E];for(E=0;3>E;E++)for(x=0;3>x;x++)y[3][E]+=f[x]*y[x][E];f=v[0];E=v[1];x=v[2];v=v[3];var F=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]];
F[0][0]=1-2*(E*E+x*x);F[0][1]=2*(f*E-x*v);F[0][2]=2*(f*x+E*v);F[1][0]=2*(f*E+x*v);F[1][1]=1-2*(f*f+x*x);F[1][2]=2*(E*x-f*v);F[2][0]=2*(f*x-E*v);F[2][1]=2*(E*x+f*v);F[2][2]=1-2*(f*f+E*E);y=a(y,F);v=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]];r[2]&&(v[2][1]=r[2],y=a(y,v));r[1]&&(v[2][1]=0,v[2][0]=r[0],y=a(y,v));r[0]&&(v[2][0]=0,v[1][0]=r[0],y=a(y,v));for(E=0;3>E;E++)for(x=0;3>x;x++)y[E][x]*=m[E];return 0==y[0][2]&&0==y[0][3]&&0==y[1][2]&&0==y[1][3]&&0==y[2][0]&&0==y[2][1]&&1==y[2][2]&&0==y[2][3]&&0==
y[3][2]&&1==y[3][3]?[y[0][0],y[0][1],y[1][0],y[1][1],y[3][0],y[3][1]]:y[0].concat(y[1],y[2],y[3])}}();e.composeMatrix=l;e.quat=function(a,f,m){var r=e.dot(a,f);r=Math.max(Math.min(r,1),-1);var v=[];if(1===r)v=a;else for(var x=Math.acos(r),y=1*Math.sin(m*x)/Math.sqrt(1-r*r),E=0;4>E;E++)v.push(a[E]*(Math.cos(m*x)-r*y)+f[E]*y);return v}})(h);(function(e,l,a){e.sequenceNumber=0;var f=function(m,r,v){(this||lc).target=m;(this||lc).currentTime=r;(this||lc).timelineTime=v;(this||lc).type="finish";(this||
lc).bubbles=!1;(this||lc).cancelable=!1;(this||lc).currentTarget=m;(this||lc).defaultPrevented=!1;(this||lc).eventPhase=Event.AT_TARGET;(this||lc).timeStamp=Date.now()};l.Animation=function(m){(this||lc).id="";m&&m._id&&((this||lc).id=m._id);(this||lc)._sequenceNumber=e.sequenceNumber++;(this||lc)._currentTime=0;(this||lc)._startTime=null;(this||lc)._paused=!1;(this||lc)._playbackRate=1;(this||lc)._inTimeline=!0;(this||lc)._finishedFlag=!0;(this||lc).onfinish=null;(this||lc)._finishHandlers=[];(this||
lc)._effect=m;(this||lc)._inEffect=(this||lc)._effect._update(0);(this||lc)._idle=!0;(this||lc)._currentTimePending=!1};l.Animation.prototype={_ensureAlive:function(){0>(this||lc).playbackRate&&0===(this||lc).currentTime?(this||lc)._inEffect=(this||lc)._effect._update(-1):(this||lc)._inEffect=(this||lc)._effect._update((this||lc).currentTime);(this||lc)._inTimeline||!(this||lc)._inEffect&&(this||lc)._finishedFlag||((this||lc)._inTimeline=!0,l.timeline._animations.push(this||lc))},_tickCurrentTime:function(m,
r){m!=(this||lc)._currentTime&&((this||lc)._currentTime=m,(this||lc)._isFinished&&!r&&((this||lc)._currentTime=0<(this||lc)._playbackRate?(this||lc)._totalDuration:0),this._ensureAlive())},get currentTime(){return(this||lc)._idle||(this||lc)._currentTimePending?null:(this||lc)._currentTime},set currentTime(m){m=+m;isNaN(m)||(l.restart(),(this||lc)._paused||null==(this||lc)._startTime||((this||lc)._startTime=(this||lc)._timeline.currentTime-m/(this||lc)._playbackRate),(this||lc)._currentTimePending=
!1,(this||lc)._currentTime!=m&&((this||lc)._idle&&((this||lc)._idle=!1,(this||lc)._paused=!0),this._tickCurrentTime(m,!0),l.applyDirtiedAnimation(this||lc)))},get startTime(){return(this||lc)._startTime},set startTime(m){m=+m;isNaN(m)||(this||lc)._paused||(this||lc)._idle||((this||lc)._startTime=m,this._tickCurrentTime(((this||lc)._timeline.currentTime-(this||lc)._startTime)*(this||lc).playbackRate),l.applyDirtiedAnimation(this||lc))},get playbackRate(){return(this||lc)._playbackRate},set playbackRate(m){if(m!=
(this||lc)._playbackRate){var r=(this||lc).currentTime;(this||lc)._playbackRate=m;(this||lc)._startTime=null;"paused"!=(this||lc).playState&&"idle"!=(this||lc).playState&&((this||lc)._finishedFlag=!1,(this||lc)._idle=!1,this._ensureAlive(),l.applyDirtiedAnimation(this||lc));null!=r&&((this||lc).currentTime=r)}},get _isFinished(){return!(this||lc)._idle&&(0<(this||lc)._playbackRate&&(this||lc)._currentTime>=(this||lc)._totalDuration||0>(this||lc)._playbackRate&&0>=(this||lc)._currentTime)},get _totalDuration(){return(this||
lc)._effect._totalDuration},get playState(){return(this||lc)._idle?"idle":null==(this||lc)._startTime&&!(this||lc)._paused&&0!=(this||lc).playbackRate||(this||lc)._currentTimePending?"pending":(this||lc)._paused?"paused":(this||lc)._isFinished?"finished":"running"},_rewind:function(){if(0<=(this||lc)._playbackRate)(this||lc)._currentTime=0;else{if(!((this||lc)._totalDuration<1/0))throw new DOMException("Unable to rewind negative playback rate animation with infinite duration","InvalidStateError");
(this||lc)._currentTime=(this||lc)._totalDuration}},play:function(){(this||lc)._paused=!1;((this||lc)._isFinished||(this||lc)._idle)&&(this._rewind(),(this||lc)._startTime=null);(this||lc)._finishedFlag=!1;(this||lc)._idle=!1;this._ensureAlive();l.applyDirtiedAnimation(this||lc)},pause:function(){(this||lc)._isFinished||(this||lc)._paused||(this||lc)._idle?(this||lc)._idle&&(this._rewind(),(this||lc)._idle=!1):(this||lc)._currentTimePending=!0;(this||lc)._startTime=null;(this||lc)._paused=!0},finish:function(){(this||
lc)._idle||((this||lc).currentTime=0<(this||lc)._playbackRate?(this||lc)._totalDuration:0,(this||lc)._startTime=(this||lc)._totalDuration-(this||lc).currentTime,(this||lc)._currentTimePending=!1,l.applyDirtiedAnimation(this||lc))},cancel:function(){(this||lc)._inEffect&&((this||lc)._inEffect=!1,(this||lc)._idle=!0,(this||lc)._paused=!1,(this||lc)._finishedFlag=!0,(this||lc)._currentTime=0,(this||lc)._startTime=null,(this||lc)._effect._update(null),l.applyDirtiedAnimation(this||lc))},reverse:function(){(this||
lc).playbackRate*=-1;this.play()},addEventListener:function(m,r){"function"==typeof r&&"finish"==m&&(this||lc)._finishHandlers.push(r)},removeEventListener:function(m,r){"finish"==m&&(m=(this||lc)._finishHandlers.indexOf(r),0<=m&&(this||lc)._finishHandlers.splice(m,1))},_fireEvents:function(m){if((this||lc)._isFinished){if(!(this||lc)._finishedFlag){var r=new f(this||lc,(this||lc)._currentTime,m),v=(this||lc)._finishHandlers.concat((this||lc).onfinish?[(this||lc).onfinish]:[]);setTimeout(function(){v.forEach(function(x){x.call(r.target,
r)})},0);(this||lc)._finishedFlag=!0}}else(this||lc)._finishedFlag=!1},_tick:function(m,r){(this||lc)._idle||(this||lc)._paused||(null==(this||lc)._startTime?r&&((this||lc).startTime=m-(this||lc)._currentTime/(this||lc).playbackRate):(this||lc)._isFinished||this._tickCurrentTime((m-(this||lc)._startTime)*(this||lc).playbackRate));r&&((this||lc)._currentTimePending=!1,this._fireEvents(m))},get _needsTick(){return(this||lc).playState in{pending:1,running:1}||!(this||lc)._finishedFlag},_targetAnimations:function(){var m=
(this||lc)._effect._target;return m._activeAnimations||(m._activeAnimations=[]),m._activeAnimations},_markTarget:function(){var m=this._targetAnimations();-1===m.indexOf(this||lc)&&m.push(this||lc)},_unmarkTarget:function(){var m=this._targetAnimations(),r=m.indexOf(this||lc);-1!==r&&m.splice(r,1)}}})(d,h);(function(e,l,a){function f(W){var da=E;E=[];W<Y.currentTime&&(W=Y.currentTime);Y._animations.sort(m);Y._animations=x(W,!0,Y._animations)[0];da.forEach(function(va){va[1](W)});v()}function m(W,
da){return W._sequenceNumber-da._sequenceNumber}function r(){(this||lc)._animations=[];(this||lc).currentTime=window.performance&&performance.now?performance.now():0}function v(){P.forEach(function(W){W()});P.length=0}function x(W,da,va){N=!0;J=!1;l.timeline.currentTime=W;I=!1;var za=[],L=[],Z=[],R=[];return va.forEach(function(X){X._tick(W,da);X._inEffect?(L.push(X._effect),X._markTarget()):(za.push(X._effect),X._unmarkTarget());X._needsTick&&(I=!0);var ja=X._inEffect||X._needsTick;(X._inTimeline=
ja)?Z.push(X):R.push(X)}),P.push.apply(P,za),P.push.apply(P,L),I&&requestAnimationFrame(function(){}),N=!1,[Z,R]}var y=window.requestAnimationFrame,E=[],F=0;window.requestAnimationFrame=function(W){var da=F++;return 0==E.length&&y(f),E.push([da,W]),da};window.cancelAnimationFrame=function(W){E.forEach(function(da){da[0]==W&&(da[1]=function(){})})};r.prototype={_play:function(W){W._timing=e.normalizeTimingInput(W.timing);W=new l.Animation(W);return W._idle=!1,W._timeline=this||lc,(this||lc)._animations.push(W),
l.restart(),l.applyDirtiedAnimation(W),W}};var I=!1,J=!1;l.restart=function(){return I||(I=!0,requestAnimationFrame(function(){}),J=!0),J};l.applyDirtiedAnimation=function(W){N||(W._markTarget(),W=W._targetAnimations(),W.sort(m),x(l.timeline.currentTime,!1,W.slice())[1].forEach(function(da){da=Y._animations.indexOf(da);-1!==da&&Y._animations.splice(da,1)}),v())};var P=[],N=!1,Y=new r;l.timeline=Y})(d,h);(function(e,l){function a(y,E){for(var F=0,I=0;I<y.length;I++)F+=y[I]*E[I];return F}function f(y,
E){return[y[0]*E[0]+y[4]*E[1]+y[8]*E[2]+y[12]*E[3],y[1]*E[0]+y[5]*E[1]+y[9]*E[2]+y[13]*E[3],y[2]*E[0]+y[6]*E[1]+y[10]*E[2]+y[14]*E[3],y[3]*E[0]+y[7]*E[1]+y[11]*E[2]+y[15]*E[3],y[0]*E[4]+y[4]*E[5]+y[8]*E[6]+y[12]*E[7],y[1]*E[4]+y[5]*E[5]+y[9]*E[6]+y[13]*E[7],y[2]*E[4]+y[6]*E[5]+y[10]*E[6]+y[14]*E[7],y[3]*E[4]+y[7]*E[5]+y[11]*E[6]+y[15]*E[7],y[0]*E[8]+y[4]*E[9]+y[8]*E[10]+y[12]*E[11],y[1]*E[8]+y[5]*E[9]+y[9]*E[10]+y[13]*E[11],y[2]*E[8]+y[6]*E[9]+y[10]*E[10]+y[14]*E[11],y[3]*E[8]+y[7]*E[9]+y[11]*E[10]+
y[15]*E[11],y[0]*E[12]+y[4]*E[13]+y[8]*E[14]+y[12]*E[15],y[1]*E[12]+y[5]*E[13]+y[9]*E[14]+y[13]*E[15],y[2]*E[12]+y[6]*E[13]+y[10]*E[14]+y[14]*E[15],y[3]*E[12]+y[7]*E[13]+y[11]*E[14]+y[15]*E[15]]}function m(y){return 2*((y.deg||0)/360+(y.grad||0)/400+(y.turn||0))*Math.PI+(y.rad||0)}function r(y){switch(y.t){case "rotatex":return y=m(y.d[0]),[1,0,0,0,0,Math.cos(y),Math.sin(y),0,0,-Math.sin(y),Math.cos(y),0,0,0,0,1];case "rotatey":return y=m(y.d[0]),[Math.cos(y),0,-Math.sin(y),0,0,1,0,0,Math.sin(y),
0,Math.cos(y),0,0,0,0,1];case "rotate":case "rotatez":return y=m(y.d[0]),[Math.cos(y),Math.sin(y),0,0,-Math.sin(y),Math.cos(y),0,0,0,0,1,0,0,0,0,1];case "rotate3d":var E=y.d[0],F=y.d[1],I=y.d[2];y=m(y.d[3]);var J=E*E+F*F+I*I;0===J?(E=1,I=F=0):1!==J&&(J=Math.sqrt(J),E/=J,F/=J,I/=J);J=Math.sin(y/2);y=J*Math.cos(y/2);J*=J;return[1-2*(F*F+I*I)*J,2*(E*F*J+I*y),2*(E*I*J-F*y),0,2*(E*F*J-I*y),1-2*(E*E+I*I)*J,2*(F*I*J+E*y),0,2*(E*I*J+F*y),2*(F*I*J-E*y),1-2*(E*E+F*F)*J,0,0,0,0,1];case "scale":return[y.d[0],
0,0,0,0,y.d[1],0,0,0,0,1,0,0,0,0,1];case "scalex":return[y.d[0],0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];case "scaley":return[1,0,0,0,0,y.d[0],0,0,0,0,1,0,0,0,0,1];case "scalez":return[1,0,0,0,0,1,0,0,0,0,y.d[0],0,0,0,0,1];case "scale3d":return[y.d[0],0,0,0,0,y.d[1],0,0,0,0,y.d[2],0,0,0,0,1];case "skew":return E=m(y.d[0]),F=m(y.d[1]),[1,Math.tan(F),0,0,Math.tan(E),1,0,0,0,0,1,0,0,0,0,1];case "skewx":return y=m(y.d[0]),[1,0,0,0,Math.tan(y),1,0,0,0,0,1,0,0,0,0,1];case "skewy":return y=m(y.d[0]),[1,Math.tan(y),
0,0,0,1,0,0,0,0,1,0,0,0,0,1];case "translate":return E=y.d[0].px||0,F=y.d[1].px||0,[1,0,0,0,0,1,0,0,0,0,1,0,E,F,0,1];case "translatex":return E=y.d[0].px||0,[1,0,0,0,0,1,0,0,0,0,1,0,E,0,0,1];case "translatey":return F=y.d[0].px||0,[1,0,0,0,0,1,0,0,0,0,1,0,0,F,0,1];case "translatez":return I=y.d[0].px||0,[1,0,0,0,0,1,0,0,0,0,1,0,0,0,I,1];case "translate3d":return E=y.d[0].px||0,F=y.d[1].px||0,I=y.d[2].px||0,[1,0,0,0,0,1,0,0,0,0,1,0,E,F,I,1];case "perspective":return[1,0,0,0,0,1,0,0,0,0,1,y.d[0].px?
-1/y.d[0].px:0,0,0,0,1];case "matrix":return[y.d[0],y.d[1],0,0,y.d[2],y.d[3],0,0,0,0,1,0,y.d[4],y.d[5],0,1];case "matrix3d":return y.d}}function v(y){return 0===y.length?[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]:y.map(r).reduce(f)}var x=function(){function y(J){return J[0][0]*J[1][1]*J[2][2]+J[1][0]*J[2][1]*J[0][2]+J[2][0]*J[0][1]*J[1][2]-J[0][2]*J[1][1]*J[2][0]-J[1][2]*J[2][1]*J[0][0]-J[2][2]*J[0][1]*J[1][0]}function E(J){var P=F(J);return[J[0]/P,J[1]/P,J[2]/P]}function F(J){return Math.sqrt(J[0]*J[0]+J[1]*
J[1]+J[2]*J[2])}function I(J,P,N,Y){return[N*J[0]+Y*P[0],N*J[1]+Y*P[1],N*J[2]+Y*P[2]]}return function(J){J=[J.slice(0,4),J.slice(4,8),J.slice(8,12),J.slice(12,16)];if(1!==J[3][3])return null;for(var P=[],N=0;4>N;N++)P.push(J[N].slice());for(N=0;3>N;N++)P[N][3]=0;if(0===y(P))return null;var Y=[];if(J[0][3]||J[1][3]||J[2][3]){Y.push(J[0][3]);Y.push(J[1][3]);Y.push(J[2][3]);Y.push(J[3][3]);var W=1/y(P),da=P[0][0],va=P[0][1];N=P[0][2];var za=P[1][0],L=P[1][1],Z=P[1][2],R=P[2][0],X=P[2][1],ja=P[2][2];
W=[[(L*ja-Z*X)*W,(N*X-va*ja)*W,(va*Z-N*L)*W,0],[(Z*R-za*ja)*W,(da*ja-N*R)*W,(N*za-da*Z)*W,0],[(za*X-L*R)*W,(R*va-da*X)*W,(da*L-va*za)*W,0]];da=[];for(va=0;3>va;va++){for(za=N=0;3>za;za++)N+=P[3][za]*W[za][va];da.push(N)}P=(da.push(1),W.push(da),W);P=[[P[0][0],P[1][0],P[2][0],P[3][0]],[P[0][1],P[1][1],P[2][1],P[3][1]],[P[0][2],P[1][2],P[2][2],P[3][2]],[P[0][3],P[1][3],P[2][3],P[3][3]]];W=[];for(da=0;4>da;da++){for(N=va=0;4>N;N++)va+=Y[N]*P[N][da];W.push(va)}Y=W}else Y=[0,0,0,1];P=J[3].slice(0,3);W=
[];W.push(J[0].slice(0,3));da=[];da.push(F(W[0]));W[0]=E(W[0]);va=[];W.push(J[1].slice(0,3));va.push(a(W[0],W[1]));W[1]=I(W[1],W[0],1,-va[0]);da.push(F(W[1]));W[1]=E(W[1]);va[0]/=da[1];W.push(J[2].slice(0,3));va.push(a(W[0],W[2]));W[2]=I(W[2],W[0],1,-va[1]);va.push(a(W[1],W[2]));W[2]=I(W[2],W[1],1,-va[2]);da.push(F(W[2]));W[2]=E(W[2]);va[1]/=da[2];va[2]/=da[2];J=W[1];N=W[2];if(0>a(W[0],[J[1]*N[2]-J[2]*N[1],J[2]*N[0]-J[0]*N[2],J[0]*N[1]-J[1]*N[0]]))for(N=0;3>N;N++)da[N]*=-1,W[N][0]*=-1,W[N][1]*=-1,
W[N][2]*=-1;var fa,ua;J=W[0][0]+W[1][1]+W[2][2]+1;return 1E-4<J?(fa=.5/Math.sqrt(J),ua=[(W[2][1]-W[1][2])*fa,(W[0][2]-W[2][0])*fa,(W[1][0]-W[0][1])*fa,.25/fa]):W[0][0]>W[1][1]&&W[0][0]>W[2][2]?(fa=2*Math.sqrt(1+W[0][0]-W[1][1]-W[2][2]),ua=[.25*fa,(W[0][1]+W[1][0])/fa,(W[0][2]+W[2][0])/fa,(W[2][1]-W[1][2])/fa]):W[1][1]>W[2][2]?(fa=2*Math.sqrt(1+W[1][1]-W[0][0]-W[2][2]),ua=[(W[0][1]+W[1][0])/fa,.25*fa,(W[1][2]+W[2][1])/fa,(W[0][2]-W[2][0])/fa]):(fa=2*Math.sqrt(1+W[2][2]-W[0][0]-W[1][1]),ua=[(W[0][2]+
W[2][0])/fa,(W[1][2]+W[2][1])/fa,.25*fa,(W[1][0]-W[0][1])/fa]),[P,da,va,ua,Y]}}();e.dot=a;e.makeMatrixDecomposition=function(y){return[x(v(y))]};e.transformListToMatrix=v})(h);(function(e){function l(r,v){var x=r.exec(v);if(x)return x=r.ignoreCase?x[0].toLowerCase():x[0],[x,v.substr(x.length)]}function a(r,v){v=v.replace(/^\s*/,"");if(r=r(v))return[r[0],r[1].replace(/^\s*/,"")]}function f(r,v){for(var x=r,y=v;x&&y;)x>y?x%=y:y%=x;return r*v/(x+y)}function m(r,v,x,y,E){for(var F=[],I=[],J=[],P=f(y.length,
E.length),N=0;N<P;N++){var Y=v(y[N%y.length],E[N%E.length]);if(!Y)return;F.push(Y[0]);I.push(Y[1]);J.push(Y[2])}return[F,I,function(W){W=W.map(function(da,va){return J[va](da)}).join(x);return r?r(W):W}]}e.consumeToken=l;e.consumeTrimmed=a;e.consumeRepeated=function(r,v,x){r=a.bind(null,r);for(var y=[];;){var E=r(x);if(!E||(y.push(E[0]),x=E[1],!(E=l(v,x))||""==E[1]))return[y,x];x=E[1]}};e.consumeParenthesised=function(r,v){for(var x=0,y=0;y<v.length&&(!/\s|,/.test(v[y])||0!=x);y++)if("("==v[y])x++;
else if(")"==v[y]&&(x--,0==x&&y++,0>=x))break;r=r(v.substr(0,y));return void 0==r?void 0:[r,v.substr(y)]};e.ignore=function(r){return function(v){v=r(v);return v&&(v[0]=void 0),v}};e.optional=function(r,v){return function(x){return r(x)||[v,x]}};e.consumeList=function(r,v){for(var x=[],y=0;y<r.length;y++){v=e.consumeTrimmed(r[y],v);if(!v||""==v[0])return;void 0!==v[0]&&x.push(v[0]);v=v[1]}if(""==v)return x};e.mergeNestedRepeated=m.bind(null,null);e.mergeWrappedNestedRepeated=m;e.mergeList=function(r,
v,x){for(var y=[],E=[],F=[],I=0,J=0;J<x.length;J++)if("function"==typeof x[J]){var P=x[J](r[I],v[I++]);y.push(P[0]);E.push(P[1]);F.push(P[2])}else!function(N){y.push(!1);E.push(!1);F.push(function(){return x[N]})}(J);return[y,E,function(N){for(var Y="",W=0;W<N.length;W++)Y+=F[W](N[W]);return Y}]}})(h);(function(e){function l(f){var m={inset:!1,lengths:[],color:null};if((f=e.consumeRepeated(function(r){var v=e.consumeToken(/^inset/i,r);return v?(m.inset=!0,v):(v=e.consumeLengthOrPercent(r))?(m.lengths.push(v[0]),
v):(v=e.consumeColor(r),v?(m.color=v[0],v):void 0)},/^/,f))&&f[0].length)return[m,f[1]]}var a=function(f,m,r,v){function x(P){return{inset:P,color:[0,0,0,0],lengths:[{px:0},{px:0},{px:0},{px:0}]}}for(var y=[],E=[],F=0;F<r.length||F<v.length;F++){var I=r[F]||x(v[F].inset),J=v[F]||x(r[F].inset);y.push(I);E.push(J)}return e.mergeNestedRepeated(f,m,y,E)}.bind(null,function(f,m){for(;f.lengths.length<Math.max(f.lengths.length,m.lengths.length);)f.lengths.push({px:0});for(;m.lengths.length<Math.max(f.lengths.length,
m.lengths.length);)m.lengths.push({px:0});if(f.inset==m.inset&&!!f.color==!!m.color){for(var r,v=[],x=[[],0],y=[[],0],E=0;E<f.lengths.length;E++){var F=e.mergeDimensions(f.lengths[E],m.lengths[E],2==E);x[0].push(F[0]);y[0].push(F[1]);v.push(F[2])}f.color&&m.color&&(m=e.mergeColors(f.color,m.color),x[1]=m[0],y[1]=m[1],r=m[2]);return[x,y,function(I){for(var J=f.inset?"inset ":" ",P=0;P<v.length;P++)J+=v[P](I[0][P])+" ";return r&&(J+=r(I[1])),J}]}},", ");e.addPropertiesHandler(function(f){if((f=e.consumeRepeated(l,
/^,/,f))&&""==f[1])return f[0]},a,["box-shadow","text-shadow"])})(h);(function(e,l){function a(x){return x.toFixed(3).replace(/0+$/,"").replace(/\.$/,"")}function f(x,y,E){return Math.min(y,Math.max(x,E))}function m(x){if(/^\s*[-+]?(\d*\.)?\d+\s*$/.test(x))return Number(x)}function r(x,y){return function(E,F){return[E,F,function(I){return a(f(x,y,I))}]}}function v(x){x=x.trim().split(/\s*[\s,]\s*/);if(0!==x.length){for(var y=[],E=0;E<x.length;E++){var F=m(x[E]);if(void 0===F)return;y.push(F)}return y}}
e.clamp=f;e.addPropertiesHandler(v,function(x,y){if(x.length==y.length)return[x,y,function(E){return E.map(a).join(" ")}]},["stroke-dasharray"]);e.addPropertiesHandler(m,r(0,1/0),["border-image-width","line-height"]);e.addPropertiesHandler(m,r(0,1),["opacity","shape-image-threshold"]);e.addPropertiesHandler(m,function(x,y){if(0!=x)return r(0,1/0)(x,y)},["flex-grow","flex-shrink"]);e.addPropertiesHandler(m,function(x,y){return[x,y,function(E){return Math.round(f(1,1/0,E))}]},["orphans","widows"]);
e.addPropertiesHandler(m,function(x,y){return[x,y,Math.round]},["z-index"]);e.parseNumber=m;e.parseNumberList=v;e.mergeNumbers=function(x,y){return[x,y,a]};e.numberToString=a})(h);(function(e,l){e.addPropertiesHandler(String,function(a,f){if("visible"==a||"visible"==f)return[0,1,function(m){return 0>=m?a:1<=m?f:"visible"}]},["visibility"])})(h);(function(e,l){function a(r){r=r.trim();m.fillStyle="#000";m.fillStyle=r;var v=m.fillStyle;if(m.fillStyle="#fff",m.fillStyle=r,v==m.fillStyle)return m.fillRect(0,
0,1,1),r=m.getImageData(0,0,1,1).data,m.clearRect(0,0,1,1),v=r[3]/255,[r[0]*v,r[1]*v,r[2]*v,v]}function f(r,v){return[r,v,function(x){if(x[3])for(var y=0;3>y;y++)x[y]=Math.round(Math.max(0,Math.min(255,x[y]/x[3])));return x[3]=e.numberToString(e.clamp(0,1,x[3])),"rgba("+x.join(",")+")"}]}l=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");l.width=l.height=1;var m=l.getContext("2d");e.addPropertiesHandler(a,f,"background-color border-bottom-color border-left-color border-right-color border-top-color color fill flood-color lighting-color outline-color stop-color stroke text-decoration-color".split(" "));
e.consumeColor=e.consumeParenthesised.bind(null,a);e.mergeColors=f})(h);(function(e,l){function a(E){function F(){var W=Y.exec(E);N=W?W[0]:void 0}function I(){if("("!==N){var W=Number(N);return F(),W}F();W=P();return")"!==N?NaN:(F(),W)}function J(){for(var W=I();"*"===N||"/"===N;){var da=N;F();var va=I();"*"===da?W*=va:W/=va}return W}function P(){for(var W=J();"+"===N||"-"===N;){var da=N;F();var va=J();"+"===da?W+=va:W-=va}return W}var N,Y=/([\+\-\w\.]+|[\(\)\*\/])/g;return F(),P()}function f(E,F){if("0"==
(F=F.trim().toLowerCase())&&0<="px".search(E))return{px:0};if(/^[^(]*$|^calc/.test(F)){F=F.replace(/calc\(/g,"(");var I={};F=F.replace(E,function(W){return I[W]=null,"U"+W});E="U("+E.source+")";for(var J=F.replace(/[-+]?(\d*\.)?\d+([Ee][-+]?\d+)?/g,"N").replace(new RegExp("N"+E,"g"),"D").replace(/\s[+-]\s/g,"O").replace(/\s/g,""),P=[/N\*(D)/g,/(N|D)[*\/]N/g,/(N|D)O\1/g,/\((N|D)\)/g],N=0;N<P.length;)P[N].test(J)?(J=J.replace(P[N],"$1"),N=0):N++;if("D"==J){for(var Y in I){J=a(F.replace(new RegExp("U"+
Y,"g"),"").replace(new RegExp(E,"g"),"*0"));if(!isFinite(J))return;I[Y]=J}return I}}}function m(E,F){return r(E,F,!0)}function r(E,F,I){var J,P=[];for(J in E)P.push(J);for(J in F)0>P.indexOf(J)&&P.push(J);return E=P.map(function(N){return E[N]||0}),F=P.map(function(N){return F[N]||0}),[E,F,function(N){var Y=N.map(function(W,da){return 1==N.length&&I&&(W=Math.max(W,0)),e.numberToString(W)+P[da]}).join(" + ");return 1<N.length?"calc("+Y+")":Y}]}var v=f.bind(null,/px|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc/g);
l=f.bind(null,/px|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|%/g);var x=f.bind(null,/deg|rad|grad|turn/g);e.parseLength=v;e.parseLengthOrPercent=l;e.consumeLengthOrPercent=e.consumeParenthesised.bind(null,l);e.parseAngle=x;e.mergeDimensions=r;v=e.consumeParenthesised.bind(null,v);v=e.consumeRepeated.bind(void 0,v,/^/);var y=e.consumeRepeated.bind(void 0,v,/^,/);e.consumeSizePairList=y;v=e.mergeNestedRepeated.bind(void 0,m," ");x=e.mergeNestedRepeated.bind(void 0,v,",");e.mergeNonNegativeSizePair=
v;e.addPropertiesHandler(function(E){if((E=y(E))&&""==E[1])return E[0]},x,["background-size"]);e.addPropertiesHandler(l,m,"border-bottom-width border-image-width border-left-width border-right-width border-top-width flex-basis font-size height line-height max-height max-width outline-width width".split(" "));e.addPropertiesHandler(l,r,"border-bottom-left-radius border-bottom-right-radius border-top-left-radius border-top-right-radius bottom left letter-spacing margin-bottom margin-left margin-right margin-top min-height min-width outline-offset padding-bottom padding-left padding-right padding-top perspective right shape-margin stroke-dashoffset text-indent top vertical-align word-spacing".split(" "))})(h);
(function(e,l){function a(m){return e.consumeLengthOrPercent(m)||e.consumeToken(/^auto/,m)}function f(m){if((m=e.consumeList([e.ignore(e.consumeToken.bind(null,/^rect/)),e.ignore(e.consumeToken.bind(null,/^\(/)),e.consumeRepeated.bind(null,a,/^,/),e.ignore(e.consumeToken.bind(null,/^\)/))],m))&&4==m[0].length)return m[0]}l=e.mergeWrappedNestedRepeated.bind(null,function(m){return"rect("+m+")"},function(m,r){return"auto"==m||"auto"==r?[!0,!1,function(v){v=v?m:r;if("auto"==v)return"auto";v=e.mergeDimensions(v,
v);return v[2](v[0])}]:e.mergeDimensions(m,r)},", ");e.parseBox=f;e.mergeBoxes=l;e.addPropertiesHandler(f,l,["clip"])})(h);(function(e,l){function a(J){return function(P){var N=0;return J.map(function(Y){return Y===y?P[N++]:Y})}}function f(J){return J}function m(J){if("none"==(J=J.toLowerCase().trim()))return[];for(var P,N=/\s*(\w+)\(([^)]*)\)/g,Y=[],W=0;(P=N.exec(J))&&P.index==W;){W=P.index+P[0].length;var da=P[1],va=I[da];if(!va)break;P=P[2].split(",");va=va[0];if(va.length<P.length)break;for(var za=
[],L=0;L<va.length;L++){var Z=P[L];var R=va[L];if(void 0===(Z=Z?{A:function(X){return"0"==X.trim()?F:e.parseAngle(X)},N:e.parseNumber,T:e.parseLengthOrPercent,L:e.parseLength}[R.toUpperCase()](Z):{a:F,n:za[0],t:E}[R]))return;za.push(Z)}if(Y.push({t:da,d:za}),N.lastIndex==J.length)return Y}}function r(J){return J.toFixed(6).replace(".000000","")}function v(J,P){if(J.decompositionPair!==P){J.decompositionPair=P;var N=e.makeMatrixDecomposition(J)}if(P.decompositionPair!==J){P.decompositionPair=J;var Y=
e.makeMatrixDecomposition(P)}return null==N[0]||null==Y[0]?[[!1],[!0],function(W){return W?P[0].d:J[0].d}]:(N[0].push(0),Y[0].push(1),[N,Y,function(W){var da=e.quat(N[0][3],Y[0][3],W[5]);return e.composeMatrix(W[0],W[1],W[2],da,W[4]).map(r).join(",")}])}function x(J){return J.replace(/(x|y|z|3d)?$/,"3d")}var y=null,E={px:0},F={deg:0},I={matrix:["NNNNNN",[y,y,0,0,y,y,0,0,0,0,1,0,y,y,0,1],f],matrix3d:["NNNNNNNNNNNNNNNN",f],rotate:["A"],rotatex:["A"],rotatey:["A"],rotatez:["A"],rotate3d:["NNNA"],perspective:["L"],
scale:["Nn",a([y,y,1]),f],scalex:["N",a([y,1,1]),a([y,1])],scaley:["N",a([1,y,1]),a([1,y])],scalez:["N",a([1,1,y])],scale3d:["NNN",f],skew:["Aa",null,f],skewx:["A",null,a([y,F])],skewy:["A",null,a([F,y])],translate:["Tt",a([y,y,E]),f],translatex:["T",a([y,E,E]),a([y,E])],translatey:["T",a([E,y,E]),a([E,y])],translatez:["L",a([E,E,y])],translate3d:["TTL",f]};e.addPropertiesHandler(m,function(J,P){var N=e.makeMatrixDecomposition&&!0,Y=!1;if(!J.length||!P.length){J.length||(Y=!0,J=P,P=[]);for(var W=
0;W<J.length;W++){var da=J[W].t,va=J[W].d,za="scale"==da.substr(0,5)?1:0;P.push({t:da,d:va.map(function(ta){if("number"==typeof ta)return za;var na={},pa;for(pa in ta)na[pa]=za;return na})})}}va=[];var L=[],Z=[];if(J.length!=P.length){if(!N)return;var R=v(J,P);va=[R[0]];L=[R[1]];Z=[["matrix",[R[2]]]]}else for(W=0;W<J.length;W++){da=J[W].t;var X=P[W].t,ja=J[W].d,fa=P[W].d;R=I[da];var ua=I[X];if("perspective"==da&&"perspective"==X||!("matrix"!=da&&"matrix3d"!=da||"matrix"!=X&&"matrix3d"!=X)){if(!N)return;
R=v([J[W]],[P[W]]);va.push(R[0]);L.push(R[1]);Z.push(["matrix",[R[2]]])}else{if(da!=X)if(R[2]&&ua[2]&&da.replace(/[xy]/,"")==X.replace(/[xy]/,""))da=da.replace(/[xy]/,""),ja=R[2](ja),fa=ua[2](fa);else{if(!R[1]||!ua[1]||x(da)!=x(X)){if(!N)return;R=v(J,P);va=[R[0]];L=[R[1]];Z=[["matrix",[R[2]]]];break}da=x(da);ja=R[1](ja);fa=ua[1](fa)}ua=[];X=[];for(var gb=[],hb=0;hb<ja.length;hb++)R=("number"==typeof ja[hb]?e.mergeNumbers:e.mergeDimensions)(ja[hb],fa[hb]),ua[hb]=R[0],X[hb]=R[1],gb.push(R[2]);va.push(ua);
L.push(X);Z.push([da,gb])}}Y&&(J=va,va=L,L=J);return[va,L,function(ta){return ta.map(function(na,pa){na=na.map(function(La,Hb){return Z[pa][1][Hb](La)}).join(",");return"matrix"==Z[pa][0]&&16==na.split(",").length&&(Z[pa][0]="matrix3d"),Z[pa][0]+"("+na+")"}).join(" ")}]},["transform"]);e.transformToSvgMatrix=function(J){J=e.transformListToMatrix(m(J));return"matrix("+r(J[0])+" "+r(J[1])+" "+r(J[4])+" "+r(J[5])+" "+r(J[12])+" "+r(J[13])+")"}})(h);(function(e){function l(a){return a=100*Math.round(a/
100),a=e.clamp(100,900,a),400===a?"normal":700===a?"bold":String(a)}e.addPropertiesHandler(function(a){a=Number(a);if(!(isNaN(a)||100>a||900<a||0!=a%100))return a},function(a,f){return[a,f,l]},["font-weight"])})(h);(function(e){function l(v){return e.consumeToken(/^(left|center|right|top|bottom)\b/i,v)||e.consumeLengthOrPercent(v)}function a(v,x){if((x=e.consumeRepeated(l,/^/,x))&&""==x[1]&&(x=x[0],x[0]=x[0]||"center",x[1]=x[1]||"center",3==v&&(x[2]=x[2]||{px:0}),x.length==v)){if(/top|bottom/.test(x[0])||
/left|right/.test(x[1]))v=x[0],x[0]=x[1],x[1]=v;if(/left|right|center|Object/.test(x[0])&&/top|bottom|center|Object/.test(x[1]))return x.map(function(y){return"object"==typeof y?y:m[y]})}}function f(v){if(v=e.consumeRepeated(l,/^/,v)){for(var x=v[0],y=[{"%":50},{"%":50}],E=0,F=!1,I=0;I<x.length;I++){var J=x[I];if("string"==typeof J)F=/bottom|right/.test(J),E={left:0,right:0,center:E,top:1,bottom:1}[J],y[E]=m[J],"center"==J&&E++;else{if(F){F=void 0;var P={};for(F in J)P[F]=-J[F];J=P;J["%"]=(J["%"]||
0)+100}y[E]=J;E++;F=!1}}return[y,v[1]]}}var m={left:{"%":0},center:{"%":50},right:{"%":100},top:{"%":0},bottom:{"%":100}},r=e.mergeNestedRepeated.bind(null,e.mergeDimensions," ");e.addPropertiesHandler(a.bind(null,3),r,["transform-origin"]);e.addPropertiesHandler(a.bind(null,2),r,["perspective-origin"]);e.consumePosition=f;e.mergeOffsetList=r;r=e.mergeNestedRepeated.bind(null,r,", ");e.addPropertiesHandler(function(v){if((v=e.consumeRepeated(f,/^,/,v))&&""==v[1])return v[0]},r,["background-position",
"object-position"])})(h);(function(e){var l=e.consumeParenthesised.bind(null,e.parseLengthOrPercent),a=e.consumeRepeated.bind(void 0,l,/^/),f=e.mergeNestedRepeated.bind(void 0,e.mergeDimensions," "),m=e.mergeNestedRepeated.bind(void 0,f,",");e.addPropertiesHandler(function(r){var v=e.consumeToken(/^circle/,r);return v&&v[0]?["circle"].concat(e.consumeList([e.ignore(e.consumeToken.bind(void 0,/^\(/)),l,e.ignore(e.consumeToken.bind(void 0,/^at/)),e.consumePosition,e.ignore(e.consumeToken.bind(void 0,
/^\)/))],v[1])):(v=e.consumeToken(/^ellipse/,r))&&v[0]?["ellipse"].concat(e.consumeList([e.ignore(e.consumeToken.bind(void 0,/^\(/)),a,e.ignore(e.consumeToken.bind(void 0,/^at/)),e.consumePosition,e.ignore(e.consumeToken.bind(void 0,/^\)/))],v[1])):(r=e.consumeToken(/^polygon/,r))&&r[0]?["polygon"].concat(e.consumeList([e.ignore(e.consumeToken.bind(void 0,/^\(/)),e.optional(e.consumeToken.bind(void 0,/^nonzero\s*,|^evenodd\s*,/),"nonzero,"),e.consumeSizePairList,e.ignore(e.consumeToken.bind(void 0,
/^\)/))],r[1])):void 0},function(r,v){if(r[0]===v[0])return"circle"==r[0]?e.mergeList(r.slice(1),v.slice(1),["circle(",e.mergeDimensions," at ",e.mergeOffsetList,")"]):"ellipse"==r[0]?e.mergeList(r.slice(1),v.slice(1),["ellipse(",e.mergeNonNegativeSizePair," at ",e.mergeOffsetList,")"]):"polygon"==r[0]&&r[1]==v[1]?e.mergeList(r.slice(2),v.slice(2),["polygon(",r[1],m,")"]):void 0},["shape-outside"])})(h);(function(e,l){function a(r,v){v.concat([r]).forEach(function(x){x in document.documentElement.style&&
(f[r]=x);m[x]=r})}var f={},m={};a("transform",["webkitTransform","msTransform"]);a("transformOrigin",["webkitTransformOrigin"]);a("perspective",["webkitPerspective"]);a("perspectiveOrigin",["webkitPerspectiveOrigin"]);e.propertyName=function(r){return f[r]||r};e.unprefixedPropertyName=function(r){return m[r]||r}})(h)})();(function(){if(void 0===document.createElement("div").animate([]).oncancel){var n=window.performance&&performance.now?function(){return performance.now()}:function(){return Date.now()};
var b=function(l,a,f){(this||lc).target=l;(this||lc).currentTime=a;(this||lc).timelineTime=f;(this||lc).type="cancel";(this||lc).bubbles=!1;(this||lc).cancelable=!1;(this||lc).currentTarget=l;(this||lc).defaultPrevented=!1;(this||lc).eventPhase=Event.AT_TARGET;(this||lc).timeStamp=Date.now()},e=window.Element.prototype.animate;window.Element.prototype.animate=function(l,a){l=e.call(this||lc,l,a);l._cancelHandlers=[];l.oncancel=null;var f=l.cancel;l.cancel=function(){f.call(this||lc);var v=new b(this||
lc,null,n()),x=(this||lc)._cancelHandlers.concat((this||lc).oncancel?[(this||lc).oncancel]:[]);setTimeout(function(){x.forEach(function(y){y.call(v.target,v)})},0)};var m=l.addEventListener;l.addEventListener=function(v,x){"function"==typeof x&&"cancel"==v?(this||lc)._cancelHandlers.push(x):m.call(this||lc,v,x)};var r=l.removeEventListener;return l.removeEventListener=function(v,x){"cancel"==v?(v=(this||lc)._cancelHandlers.indexOf(x),0<=v&&(this||lc)._cancelHandlers.splice(v,1)):r.call(this||lc,v,
x)},l}}})();(function(n){var b=document.documentElement,e=null,l=!1;try{var a="0"==getComputedStyle(b).getPropertyValue("opacity")?"1":"0";e=b.animate({opacity:[a,a]},{duration:1});e.currentTime=0;l=getComputedStyle(b).getPropertyValue("opacity")==a}catch(m){}finally{e&&e.cancel()}if(!l){var f=window.Element.prototype.animate;window.Element.prototype.animate=function(m,r){return window.Symbol&&Symbol.iterator&&Array.prototype.from&&m[Symbol.iterator]&&(m=Array.from(m)),Array.isArray(m)||null===m||
(m=n.convertToArrayForm(m)),f.call(this||lc,m,r)}}})(d)}();var Gf=lively.FreezerRuntime.recorderFor("lively.morphic/rendering/animations.js");Gf.convertToSvgEasing=function(d){for(var h in Gf.easings)if(Gf.easings[h]===d){if(h.includes("inOut"))return h.replace("inOut","").toLowerCase()+"InOut";if(h.includes("out"))return h.replace("out","").toLowerCase()+"Out";if(h.includes("in"))return h.replace("in","").toLowerCase()+"In"}};Gf.stringToEasing=Gs;Gf.obj=ng;Gf.promise=hg;Gf.fun=vn;Gf.num=Um;Gf.properties=
Kr;Gf.arr=Mf;Gf.string=Th;Gf.Color=xg;Gf.styleProps=Fz;Gf.addPathAttributes=ve;Gf.addSvgAttributes=De;Gf.flubber=rX;Gf.Bezier=Rqa;Gf.ShadowObject=it;var Rr=Ha("aa",{inQuad:"cubic-bezier(0.550,  0.085, 0.680, 0.530)",inCubic:"cubic-bezier(0.550,  0.055, 0.675, 0.190)",inQuart:"cubic-bezier(0.895,  0.030, 0.685, 0.220)",inQuint:"cubic-bezier(0.755,  0.050, 0.855, 0.060)",inSine:"cubic-bezier(0.470,  0.000, 0.745, 0.715)",inExpo:"cubic-bezier(0.950,  0.050, 0.795, 0.035)",inCirc:"cubic-bezier(0.600,  0.040, 0.980, 0.335)",
inBack:"cubic-bezier(0.600, -0.280, 0.735, 0.045)",outQuad:"cubic-bezier(0.250,  0.460, 0.450, 0.940)",outCubic:"cubic-bezier(0.215,  0.610, 0.355, 1.000)",outQuart:"cubic-bezier(0.165,  0.840, 0.440, 1.000)",outQuint:"cubic-bezier(0.230,  1.000, 0.320, 1.000)",outSine:"cubic-bezier(0.390,  0.575, 0.565, 1.000)",outExpo:"cubic-bezier(0.190,  1.000, 0.220, 1.000)",outCirc:"cubic-bezier(0.075,  0.820, 0.165, 1.000)",outBack:"cubic-bezier(0.175,  0.885, 0.320, 1.275)",inOutQuad:"cubic-bezier(0.455,  0.030, 0.515, 0.955)",
inOutCubic:"cubic-bezier(0.645,  0.045, 0.355, 1.000)",inOutQuart:"cubic-bezier(0.770,  0.000, 0.175, 1.000)",inOutQuint:"cubic-bezier(0.860,  0.000, 0.070, 1.000)",inOutSine:"cubic-bezier(0.445,  0.050, 0.550, 0.950)",inOutExpo:"cubic-bezier(1.000,  0.000, 0.000, 1.000)",inOutCirc:"cubic-bezier(0.785,  0.135, 0.150, 0.860)",inOutBack:"cubic-bezier(0.680, -0.550, 0.265, 1.550)",linear:"cubic-bezier(0.5, 0.5, 0.5, 0.5)"});Gf.easings=Rr;Gf.easings=Rr;Gf.easings=Rr;Gf.stringToEasing=Gs;Gf.stringToEasing=
Gs;var ZO=function(d){var h=lively.FreezerRuntime.recorderFor("lively.morphic/rendering/animations.js"),n=h.hasOwnProperty("AnimationQueue")&&"function"===typeof h.AnimationQueue?h.AnimationQueue:h.AnimationQueue=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Pb(n,d,[{key:Symbol.for("lively-instance-initialize"),value:function(b){this.morph=b;this.animations=[]}},{key:"maskedProps",value:function(b){return 0<this.animations.length?
Gf.obj.merge(this.animations.map(function(e){return e.getAnimationProps(b)[0]})):{}}},{key:"animationsActive",get:function(){return!0}},{key:"registerAnimation",value:function(b){var e=this,l=new Gf.PropertyAnimation(this,this.morph,b);this.morph.makeDirty();return this.morph.withMetaDo({animation:l},function(){var a=l.affectsMorph&&e.animations.find(function(m){return m.equals(l)});if(!a){var f;if(f=e.animations.find(function(m){return m.canMerge(l)}))return f.mergeWith(l),f;if(l.affectsMorph)return l.assignProps(),
e.animations.push(l),l}return a})}},{key:"startAnimationsFor",value:function(b){for(var e=0;e<this.animations.length;e++)this.animations[e].start(b)}},{key:"startSvgAnimationsFor",value:function(b,e){this.animations.forEach(function(l){return l.startSvg(b,e)})}},{key:"removeAnimation",value:function(b){Gf.arr.remove(this.animations,b)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"AnimationQueue"}}],h,{pathInPackage:function(){return"rendering/animations.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:2443,end:3747})}(void 0);Gf.AnimationQueue=ZO;Gf.AnimationQueue=ZO;Gf.AnimationQueue=ZO;var DX=function(d){var h=lively.FreezerRuntime.recorderFor("lively.morphic/rendering/animations.js"),n=h.hasOwnProperty("PropertyAnimation")&&"function"===typeof h.PropertyAnimation?h.PropertyAnimation:h.PropertyAnimation=function(b){b&&b[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Pb(n,d,[{key:Symbol.for("lively-instance-initialize"),value:function(b,e,l){var a=this;this.queue=b;this.morph=e;if(e.isPath&&"fill"in l){var f=e.fill||Gf.Color.transparent,m=l.fill;l.customTween=Gf.fun.compose(function(E){e.fill=f.interpolate(E,m);return E},l.customTween||function(E){});delete l.fill;e.fill=f}if("dropShadow"in l){var r=e.dropShadow||new Gf.ShadowObject({blur:0,distance:0,spread:0}),v=l.dropShadow;l.customTween=
Gf.fun.compose(function(E){e.dropShadow=r.interpolate(E,v||new Gf.ShadowObject({blur:0,distance:0,spread:0}));1==E&&(e.dropShadow=v);return E},l.customTween||function(E){});delete l.dropShadow;e.dropShadow=r}if("visible"in l&&l.visible!=e.visible){var x=void 0===b.originalOpacity?e.opacity:b.originalOpacity;b.originalOpacity=x;var y=l.visible;l.customTween=Gf.fun.compose(function(E){if(a._otherVisibleTransformationInProgress)return E;0==E&&1==y&&(e.visible=!0);e.opacity=y?Gf.num.interpolate(E,0,x):
Gf.num.interpolate(E,x,0);1==E&&(e.visible=y,e.opacity=x,delete b.originalOpacity);return E},l.customTween||function(E){});this.queue.animations.forEach(function(E){return E._otherVisibleTransformationInProgress=!0});delete l.visible}this.config=this.convertBounds(l);this.needsAnimation={svg:e.isSvgMorph,path:e.isPath};this.capturedProperties=Gf.obj.select(this.morph,this.propsToCapture)}},{key:"propsToCapture",get:function(){return["fill","origin"]}},{key:"asPromise",value:function(){var b=this;
return this._promise||(this._promise=new Promise(function(e,l){b.resolveCallback=function(){b.onFinish(b);b.subAnimations?b.subAnimations.then(e):e(b.morph)}}))}},{key:"finish",value:function(b){var e=this;this.config.scale&&this.morph.whenRendered().then(function(){return e.morph.withAllSubmorphsDo(function(l){return l.isText&&l.invalidateTextLayout(!0,!0)})});this.needsAnimation[b]=!1;Gf.arr.any(Gf.obj.values(this.needsAnimation),Boolean)||(this.queue.removeAnimation(this),this.resolveCallback?
this.resolveCallback():this.onFinish())}},{key:"convertBounds",value:function(b){var e=b.bounds,l=b.origin,a=b.rotation,f=b.scale;l=l||this.morph.origin;a=a||this.morph.rotation;f=f||this.morph.scale;return e?Object.assign({},Gf.obj.dissoc(b,["bounds"]),{origin:l,rotation:a,scale:f,position:e.topLeft().addPt(l),extent:e.extent()}):b}},{key:"equals",value:function(b){return!this.config.customTween&&!b.config.customTweem&&Gf.obj.equals(this.animatedProps,b.animatedProps)}},{key:"canMerge",value:function(b){return this.easing==
b.easing&&this.duration==b.duration}},{key:"mergeWith",value:function(b){var e=this.config.customTween;Object.assign(this.morph,b.animatedProps);Object.assign(this.config,b.config);this.config.customTween=function(l){e&&e(l);b.config.customTween&&b.config.customTween(l);return l};this.afterProps=this.gatherAnimationProps()}},{key:"affectsMorph",get:function(){var b=this;return!!this.config.customTween||Gf.properties.any(this.animatedProps,function(e,l){return!Gf.obj.equals(e[l],b.morph[l])})}},{key:"animatedProps",
get:function(){return Gf.obj.dissoc(this.config,["customTween","easing","onFinish","duration"])}},{key:"easing",get:function(){return this.config.easing||Gf.easings.inOutQuad}},{key:"onFinish",get:function(){return this.config.onFinish||function(){}}},{key:"setonFinish",value:function(b){this.config.onFinish=b}},{key:"duration",get:function(){return this.config.duration||1E3}},{key:"getChangedProps",value:function(b,e){var l=[],a;for(a in b)Gf.obj.equals(e[a],b[a])&&l.push(a);return[Gf.obj.dissoc(b,
l),Gf.obj.dissoc(e,l)]}},{key:"getAnimationProps",value:function(b){var e=$jscomp.makeIterator(this.getChangedProps(this.beforeProps[b],this.afterProps[b])),l=e.next().value;e=e.next().value;var a=this.capturedProperties.fill,f=this.config.fill;this.morph.isPolygon&&"css"==b&&(a=f=!1,delete l.background,delete e.background,delete l.backgroundImage,delete e.backgroundImage);"none"==l.filter&&e.boxShadow&&(delete l.filter,l.boxShadow="none");"none"==e.filter&&l.boxShadow&&(delete e.filter,e.boxShadow=
"none");a&&f&&(a.isGradient||f.isGradient)&&(this.tweenGradient=this.interpolate("gradient",a,f));b=$jscomp.makeIterator(Gf.arr.union(Gf.obj.keys(l),Gf.obj.keys(e)));for(a=b.next();!a.done;a=b.next())a=a.value,a in l||(l[a]=e[a]),a in e||(e[a]=l[a]);return[Gf.obj.isEmpty(l)?!1:l,Gf.obj.isEmpty(e)?!1:e]}},{key:"gatherAnimationProps",value:function(){var b=this.morph,e=b.isSvgMorph,l=b.isPath,a=b.isPolygon,f={};f.css=Gf.styleProps(this.morph);e&&(f.svg=Gf.addSvgAttributes(b,{}));l&&(f.path=Gf.addPathAttributes(b,
{}));a&&(f.polygon=Gf.addPathAttributes(b,{}));return f}},{key:"assignProps",value:function(){var b=this.morph.styleClasses;this.beforeProps=this.gatherAnimationProps();Object.assign(this.morph,this.animatedProps);this.afterProps=this.gatherAnimationProps();this.config.styleClasses&&(this.morph._animatedStyleClasses={removed:Gf.arr.withoutAll(b,this.morph.styleClasses),added:Gf.arr.withoutAll(this.morph.styleClasses,b),animation:this})}},{key:"interpolate",value:function(b,e,l){var a=this;switch(b){case "scrollTop":case "scrollLeft":return function(f){return Gf.num.interpolate(f,
e,l)};case "d":return Gf.flubber.interpolate(e,l);case "stroke-width":return function(f){return Gf.num.interpolate(f,e,l)};case "stroke":return function(f){return Gf.Color.fromString(e).interpolate(f,Gf.Color.fromString(l),a.morph.bounds())};case "gradient":return function(f){return e.interpolate(f,l,a.morph.bounds())};case "fill":return e=Gf.Color.fromString(e),l=Gf.Color.fromString(l),function(f){return e.interpolate(f,l)}}}},{key:"startSvg",value:function(b,e){var l=this;if(this.needsAnimation[e]){this.needsAnimation[e]=
!1;var a=$jscomp.makeIterator(this.getAnimationProps(e)),f=a.next().value;a=a.next().value;var m={},r=Gf.stringToEasing(this.easing),v;for(v in f)m[v]=this.interpolate(v,f[v],a[v]);var x,y=function(E){x||(x=E);E-=x;if(1<E/l.duration)return l.finish(e);for(var F in m)m[F]&&b.setAttribute(F,m[F](r(E/l.duration)));requestAnimationFrame(y)};requestAnimationFrame(y)}}},{key:"start",value:function(b){if(!this.active)try{this.active=!0;var e=$jscomp.makeIterator(this.getAnimationProps("css")),l=e.next().value,
a=e.next().value;b&&this.tween(b,l,a);if(this.config.origin){var f=this.capturedProperties.origin,m=this.config.origin,r=b.childNodes[0];r&&this.tween(r,r.style.top?{left:f.x+"px",top:f.y+"px"}:{transform:"translate3d("+f.x+"px, "+f.y+"px, 0px)"},r.style.top?{left:f.x+"px",top:f.y+"px"}:{transform:"translate3d("+m.x+"px, "+m.y+"px, 0px)"})}}catch(v){this.active=!1}}},{key:"tween",value:function(b,e,l,a){var f=this;a=void 0===a?!0:a;var m=this.animatedProps.scroll,r=this.config.customTween,v=!1,x=
function(){a&&(f.finish("css"),f.morph.makeDirty())};if(r){var y,E=Gf.stringToEasing(this.easing),F=function(fa){y||(y=fa);var ua=Math.min(1,(fa-y)/f.duration);f.morph.dontRecordChangesWhile(function(){return r(E(ua))});if(1<=ua)return f.finish("css");requestAnimationFrame(F)};requestAnimationFrame(F);v=!0}if(m){var I,J=this.morph.env.eventDispatcher.eventState;v=Gf.promise.deferred();var P=v.promise,N=v.resolve,Y=this.interpolate("scrollLeft",b.scrollLeft,m.x),W=this.interpolate("scrollTop",b.scrollTop,
m.y),da=Gf.stringToEasing(this.easing),va=function(fa){I||(I=fa);fa-=I;var ua=Math.min(1,fa/f.duration);b.scrollTop=W(da(ua));b.scrollLeft=Y(da(ua));if(1<=fa/f.duration)return J.scroll.interactiveScrollInProgress=null,N(),f.finish("css");requestAnimationFrame(va)};P.debounce=function(){};requestAnimationFrame(va);v=!0}if(this.tweenGradient&&!this.morph.isPolygon){var za,L=Gf.stringToEasing(this.easing),Z=function(fa){za||(za=fa);fa-=za;if(1<=fa/f.duration)return f.finish("css");b.style.setProperty("background-image",
f.tweenGradient(L(fa/f.duration)));requestAnimationFrame(Z)};delete e.backgroundImage;delete l.backgroundImage;delete e.background;delete l.background;requestAnimationFrame(Z);v=!0}else this.tweenGradient&&(v=!0);if(b&&e&&l){m={};P={};for(var R in e)m[Gf.string.camelize(R)]=e[R];for(var X in l)P[Gf.string.camelize(X)]=l[X];try{var ja=b.animate([m,P],{duration:this.duration,easing:this.easing,fill:"forwards",composite:"replace"});ja.onfinish=function(){x();setTimeout(function(){return ja.cancel()},
200)};v=!0}catch(fa){v=!1}}v||x()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"PropertyAnimation"}}],h,{pathInPackage:function(){return"rendering/animations.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:3756,end:17169})}(void 0);Gf.PropertyAnimation=DX;Gf.PropertyAnimation=DX;Gf.PropertyAnimation=DX;var Ch=
lively.FreezerRuntime.recorderFor("lively.morphic/rendering/dom-helper.js");Ch.cumulativeOffset=lu;Ch.createIFrame=function(d,h,n){h=void 0===h?"about:blank":h;n=void 0===n?new Ch.Rectangle(0,0,700,700):n;return new Promise(function(b,e){if(!d)throw Error("Need parent element!");var l=document.createElement("iframe");l.style.position="absolute";l.style.top=n.top()+"px";l.style.left=n.left()+"px";l.style.width=n.width+"px";l.style.height=n.height+"px";l.src=h;var a=!1;l.onload=function(f){a=!0;l.onload=
null;b(l)};Ch.promise.waitFor(1E3,function(){return!!a}).catch(function(f){return e(Error("iframe load timeout"))});d.appendChild(l)})};Ch.requestAnimationFramePolyfill=function(d){for(var h=0,n=["ms","moz","webkit","o"],b=0;b<n.length&&!d.requestAnimationFrame;++b)d.requestAnimationFrame=d[n[b]+"RequestAnimationFrame"],d.cancelAnimationFrame=d[n[b]+"CancelAnimationFrame"]||d[n[b]+"CancelRequestAnimationFrame"];d.requestAnimationFrame||(d.requestAnimationFrame=function(e,l){var a=Date.now(),f=Math.max(0,
16-(a-h));l=d.setTimeout(function(){e(a+f)},f);h=a+f;return l});d.cancelAnimationFrame||(d.cancelAnimationFrame=function(e){clearTimeout(e)})};Ch.createDOMEnvironment_browser=function(){var d;return $jscomp.asyncExecutePromiseGeneratorProgram(function(h){return 1==h.nextAddress?(d=Ch.IFramedDomEnvironment,h.yield(Ch.createIFrame(document.body),2)):h.return(new d(h.yieldResult))})};Ch.createDOMEnvironment_node=function(){System.decanonicalize("lively.morphic/").replace(/file:\/\//,"");var d=System._nodeRequire("jsdom"),
h=d.createVirtualConsole().sendTo(console);return new Promise(function(n,b){d.env("<div></div>",["https://code.jquery.com/pep/0.4.1/pep.js"],{virtualConsole:h},function(e,l){return e?b(e):n(new Ch.DomEnvironment(l,l.document,function(){return l.close()}))})})};Ch.createDOMEnvironment=Yd;Ch.defaultDOMEnv=Xx;Ch.setCSSDef=function(d,h,n){Ch.arr.from(d.childNodes).forEach(function(b){return d.removeChild(b)});h=n.createTextNode(h);d.styleSheet?d.styleSheet.cssText=h.nodeValue:d.appendChild(h);return d};
Ch.addCSSDef=function(d,h,n){var b=n.createElement("style");b.type="text/css";d&&b.setAttribute("id",d);Ch.setCSSDef(b,h,n);n.head.appendChild(b);return b};Ch.addOrChangeCSSDeclaration=Aq;Ch.addOrChangeLinkedCSS=kd;Ch.promise=hg;Ch.obj=ng;Ch.arr=Mf;Ch.Rectangle=He;Ch.cumulativeOffset=lu;Ch.cumulativeOffset=lu;Ch.createDOMEnvironment=Yd;Ch.createDOMEnvironment=Yd;(function(d){var h=lively.FreezerRuntime.recorderFor("lively.morphic/rendering/dom-helper.js"),n=h.hasOwnProperty("DomEnvironment")&&"function"===
typeof h.DomEnvironment?h.DomEnvironment:h.DomEnvironment=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Pb(n,d,[{key:Symbol.for("lively-instance-initialize"),value:function(b,e,l){Ch.requestAnimationFramePolyfill(b);this.window=b;this.document=e;this.destroyFn=l}},{key:"destroy",value:function(){"function"===typeof this.destroyFn&&this.destroyFn()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"DomEnvironment"}}],
h,{pathInPackage:function(){return"rendering/dom-helper.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:3079,end:3372})})(void 0);(function(d){var h=lively.FreezerRuntime.recorderFor("lively.morphic/rendering/dom-helper.js"),n=h.hasOwnProperty("IFramedDomEnvironment")&&"function"===typeof h.IFramedDomEnvironment?h.IFramedDomEnvironment:
h.IFramedDomEnvironment=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Pb(n,d,[{key:Symbol.for("lively-instance-initialize"),value:function(b){Pb._get(Object.getPrototypeOf(n.prototype),Symbol.for("lively-instance-initialize"),this).call(this,b.contentWindow,b.contentWindow.document,function(){b.contentWindow&&b.contentWindow.close();b.parentNode&&b.parentNode.removeChild(b)});this.iframe=b}}],[{key:Symbol.for("__LivelyClassName__"),
get:function(){return"IFramedDomEnvironment"}}],h,{pathInPackage:function(){return"rendering/dom-helper.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:3374,end:3718})})(Ch.DomEnvironment);Ch._defaultEnv=Ch._defaultEnv||void 0;Ch.defaultDOMEnv=Xx;Ch.defaultDOMEnv=Xx;Ch.addOrChangeCSSDeclaration=Aq;Ch.addOrChangeCSSDeclaration=
Aq;Ch.addOrChangeLinkedCSS=kd;Ch.addOrChangeLinkedCSS=kd;var $O=function(){return function(d){d=void 0===d?window.document:d;return function(h,n,b){var e=n||void 0;"undefined"===typeof b&&(b=n,e=void 0);var l=h.split(".");if(1<l.length)for(h=l.shift(),n=0;n<l.length;n++){var a=l[n],f;-1<(f=a.indexOf("#"))&&(a.slice(f+1),a.slice(0,f))}n=h.split("#");1<n.length&&(h=n[0]);h=d.createElement(h);if(e){for(var m in e)"style"!==m&&"dataset"!==m&&"attributes"!==m&&(h[m]=e[m]);if(m=e.style)for(var r in m)h.style[r]=
m[r];if(r=e.dataset)if(h.dataset)for(var v in r)h.dataset[v]=r[v];else for(v in r)h.setAttribute("data-"+v,r[v]);if(e=e.attributes)for(var x in e)e[x]&&Ch.obj.isBoolean(e[x])?h.toggleAttribute(x):h.setAttribute(x,e[x])}b||(b="");if("string"===typeof b)h.appendChild(d.createTextNode(b));else if(Array.isArray(b))for(n=0;n<b.length;n++)x=b[n],h.appendChild("string"===typeof x?d.createTextNode(x):x);else h.appendChild("string"===typeof b?d.createTextNode(b):b);return h}}}();Ch.hyperscriptFnForDocument=
$O;Ch.hyperscriptFnForDocument=$O;Ch.hyperscriptFnForDocument=$O;var Jf=lively.FreezerRuntime.recorderFor("lively.resources/src/helpers.js");Jf.applyExclude=mu;Jf.parseQuery=Bq;Jf.stringifyQuery=dw;Jf.withRelativePartsResolved=uE;Jf._relativePathBetween_checkPathes=function(d,h){d.startsWith("/")&&(d=d.slice(1));h.startsWith("/")&&(h=h.slice(1));d=d.split("/");h=h.split("/");for(var n=0;n<h.length&&d[n]&&d[n]==h[n];n++);return"../".repeat(Math.max(0,h.length-n-1))+d.splice(n,d.length).join("/")};
Jf.relativePathBetween=ka;Jf.join=p;Jf.parent=w;Jf.parents=C;Jf.resource=A;Jf.createFiles=H;Jf.registerExtension=M;Jf.unregisterExtension=S;Jf.applyExclude=mu;Jf.applyExclude=mu;Jf.parseQuery=Bq;Jf.parseQuery=Bq;Jf.stringifyQuery=dw;Jf.stringifyQuery=dw;Jf.slashEndRe=/\/+$/;Jf.slashStartRe=/^\/+/;Jf.protocolRe=/^[a-z0-9-_\.]+:/;Jf.urlRe=/^([^:\/]+):\/\/([^\/]*)(.*)/;Jf.slashslashRe=/^\/\/[^\/]+/;Jf.pathDotRe=/\/\.\//g;Jf.pathDoubleDotRe=/\/[^\/]+\/\.\./;Jf.pathDoubleSlashRe=/(^|[^:])[\/]+/g;Jf.withRelativePartsResolved=
uE;Jf.withRelativePartsResolved=uE;Jf.relativePathBetween=ka;Jf.relativePathBetween=ka;Jf.join=p;Jf.join=p;Jf.parent=w;Jf.parent=w;Jf.parents=C;Jf.parents=C;var UC=Jf.extensions||[];Jf.extensions=UC;Jf.extensions=UC;Jf.extensions=UC;Jf.resource=A;Jf.resource=A;Jf.createFiles=H;Jf.createFiles=H;Jf.registerExtension=M;Jf.registerExtension=M;Jf.unregisterExtension=S;Jf.unregisterExtension=S;var aP=/^file:\/\/\/[a-z]:\//i;Jf.windowsURLPrefixRe=aP;Jf.windowsURLPrefixRe=aP;Jf.windowsURLPrefixRe=aP;var bP=
/^[a-z]:\//i;Jf.windowsPathPrefixRe=bP;Jf.windowsPathPrefixRe=bP;Jf.windowsPathPrefixRe=bP;var cP=/^[a-z]:\/$/i;Jf.windowsRootPathRe=cP;Jf.windowsRootPathRe=cP;Jf.windowsRootPathRe=cP;var Pj=lively.FreezerRuntime.recorderFor("lively.resources/src/resource.js");Pj.nyi=function(d,h){throw Error(h+" for "+d.constructor.name+" not yet implemented");};Pj.resource=A;Pj.parseQuery=Bq;Pj.withRelativePartsResolved=uE;Pj.relativePathBetween=ka;Pj.windowsPathPrefixRe=bP;Pj.stringifyQuery=dw;Pj.slashEndRe=/\/+$/;
Pj.slashStartRe=/^\/+/;Pj.protocolRe=/^[a-z0-9-_\.]+:/;Pj.slashslashRe=/^\/\/[^\/]+/;var Pg=function(d,h){if(!d)throw Error("Cannot create resource without url");this.url=String(d);this.binary=!1;this.linkCount=this._isLink=this._isDirectory=this.mode=this.group=this.user=this.contentType=this.type=this.size=this.etag=this.created=this.lastModified=void 0};Pg.fromProps=function(d){d=void 0===d?{}:d;return(new this(d.url)).assignProperties(d)};Pg.prototype.equals=function(d){if(!d||this.constructor!==
d.constructor)return!1;var h=this.url;d=d.url;"/"===h[h.length-1]&&(h=h.slice(0,-1));"/"===d[d.length-1]&&(d=d.slice(0,-1));return h===d};Pg.prototype.toString=function(){return this.constructor.name+'("'+this.url+'")'};Pg.prototype.newResource=function(d){return Pj.resource(d,this)};Pg.prototype.path=function(){var d=this.url.replace(Pj.protocolRe,"").replace(Pj.slashslashRe,"");return""===d?"/":d};Pg.prototype.pathWithoutQuery=function(){return this.path().split("?")[0]};Pg.prototype.name=function(){var d=
this.path(),h=d.lastIndexOf("?");-1<h&&(d=d.slice(0,h));d.endsWith("/")&&(d=d.slice(0,-1));d=d.split("/");return decodeURIComponent(d[d.length-1])};Pg.prototype.ext=function(){var d=this.url;if(d.endsWith("/"))return"";d=$jscomp.makeIterator(d.match(/\.([^\/\.]+$)/)||["",""]);d.next();return d.next().value.toLowerCase()};Pg.prototype.nameWithoutExt=function(){var d=this.name(),h=d.lastIndexOf(".");0<h&&(d=d.slice(0,h));return d};Pg.prototype.scheme=function(){return this.url.split(":")[0]};Pg.prototype.host=
function(){var d=this.url.indexOf("://");if(-1===d)return null;d=this.url.slice(d+3);var h=d.indexOf("/");return d.slice(0,-1<h?h:d.length)};Pg.prototype.schemeAndHost=function(){return this.isRoot()?this.asFile().url:this.url.slice(0,this.url.length-this.path().length)};Pg.prototype.parent=function(){return this.isRoot()?null:this.newResource(this.url.split("?")[0].replace(Pj.slashEndRe,"").split("/").slice(0,-1).join("/")+"/")};Pg.prototype.parents=function(){for(var d=[],h=this.parent();h;)d.unshift(h),
h=h.parent();return d};Pg.prototype.isParentOf=function(d){var h=this;return d.schemeAndHost()===this.schemeAndHost()&&d.parents().some(function(n){return n.equals(h)})};Pg.prototype.query=function(){return Pj.parseQuery(this.url)};Pg.prototype.withQuery=function(d){var h=Object.assign({},this.query(),{},d);d=$jscomp.makeIterator(this.url.split("?")).next().value;h=Pj.stringifyQuery(h);return this.newResource(d+"?"+h)};Pg.prototype.commonDirectory=function(d){if(d.schemeAndHost()!==this.schemeAndHost())return null;
if(this.isDirectory()&&this.equals(d))return this;if(this.isRoot())return this.asDirectory();if(d.isRoot())return d.asDirectory();d=d.parents();for(var h=this.parents(),n=this.root(),b=0;b<h.length;b++){var e=h[b],l=d[b];if(!l||!e.equals(l))break;n=e}return n};Pg.prototype.withRelativePartsResolved=function(){var d=this.path(),h=Pj.withRelativePartsResolved(d);if(h===d)return this;h.startsWith("/")&&(h=h.slice(1));h[1]===":".startsWith("/")?h=h.slice(1):":"===h[1]&&h.match(Pj.windowsPathPrefixRe)&&
(h=h.slice(3));return this.newResource(this.root().url+h)};Pg.prototype.relativePathFrom=function(d){return Pj.relativePathBetween(d.url,this.url)};Pg.prototype.withPath=function(d){return(this.isRoot()?this:this.root()).join(d)};Pg.prototype.join=function(d){return this.newResource(this.url.replace(Pj.slashEndRe,"")+"/"+d.replace(Pj.slashStartRe,""))};Pg.prototype.isRoot=function(){return"/"===this.path()};Pg.prototype.isFile=function(){return!this.isRoot()&&!this.url.match(Pj.slashEndRe)};Pg.prototype.isDirectory=
function(){return!this.isFile()};Pg.prototype.asDirectory=function(){return this.url.endsWith("/")?this:this.newResource(this.url.replace(Pj.slashEndRe,"")+"/")};Pg.prototype.root=function(){if(this.isRoot())return this;var d=this.url.slice(0,-this.path().length);return this.newResource(d+"/")};Pg.prototype.asFile=function(){return this.url.endsWith("/")?this.newResource(this.url.replace(Pj.slashEndRe,"")):this};Pg.prototype.assignProperties=function(d){for(var h in d)if("url"!==h){var n=h;if("isLink"===
h||"isDirectory"===h)n="_"+h;this[n]=d[h]}return this};Pg.prototype.ensureExistance=function(d){var h=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(n){switch(n.nextAddress){case 1:return n.yield(h.exists(),2);case 2:return n.yieldResult?n.return(h):n.yield(h.parent().ensureExistance(),3);case 3:return h.isFile()?n.yield(h.write(d||""),5):n.yield(h.mkdir(),5);case 5:return n.return(h)}})};Pg.prototype.copyTo=function(d,h){h=void 0===h?!0:h;var n=this,b,e,l,a,f;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){switch(m.nextAddress){case 1:if(n.isFile()){l=
d.isFile()?d:d.join(n.name());if(!h){m.jumpTo(8);break}return m.yield(l.parent().ensureExistance(),8)}if(!d.isDirectory())throw Error("Cannot copy a directory to a file!");return m.yield(n.dirList("infinity"),4);case 4:return b=m.yieldResult,e=b.map(function(r){return d.join(r.relativePathFrom(n))}),m.yield(d.ensureExistance(),5);case 5:return m.yield(b.reduceRight(function(r,v,x){return function(){return Promise.resolve(v.isDirectory()&&e[x].ensureExistance()).then(r)}},function(){return Promise.resolve()})(),
6);case 6:return m.yield(b.reduceRight(function(r,v,x){return function(){return Promise.resolve(v.isFile()&&v.copyTo(e[x],!1)).then(r)}},function(){return Promise.resolve()})(),3);case 8:return a=l,f=a.write,m.yield(n.read(),11);case 11:return m.yield(f.call(a,m.yieldResult),3);case 3:return m.return(n)}})};Pg.prototype.rename=function(d){var h=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(n){if(1==n.nextAddress)return n.yield(h.copyTo(d),2);h.remove();return n.return(d)})};Pg.prototype.beBinary=
function(d){return this.setBinary(!0)};Pg.prototype.setBinary=function(d){this.binary=d;return this};Pg.prototype.read=function(){var d=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(h){Pj.nyi(d,"read");h.jumpToEnd()})};Pg.prototype.write=function(){var d=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(h){Pj.nyi(d,"write");h.jumpToEnd()})};Pg.prototype.mkdir=function(){var d=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(h){Pj.nyi(d,"mkdir");h.jumpToEnd()})};
Pg.prototype.exists=function(){var d=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(h){Pj.nyi(d,"exists");h.jumpToEnd()})};Pg.prototype.remove=function(){var d=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(h){Pj.nyi(d,"remove");h.jumpToEnd()})};Pg.prototype.dirList=function(d,h){var n=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){Pj.nyi(n,"dirList");b.jumpToEnd()})};Pg.prototype.readProperties=function(d){var h=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(n){Pj.nyi(h,
"readProperties");n.jumpToEnd()})};Pg.prototype.writeJson=function(d,h){return this.write((void 0===h?0:h)?JSON.stringify(d,null,2):JSON.stringify(d))};Pg.prototype.readJson=function(d){var h=this,n,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){return 1==e.nextAddress?(n=JSON,b=n.parse,e.yield(h.read(),2)):e.return(b.call(n,e.yieldResult))})};Pg.prototype.__serialize__=function(){return{__expr__:'var r = null; try { r = resource("'+this.url+'");} catch (err) {}; r',bindings:{"lively.resources":["resource"]}}};
$jscomp.global.Object.defineProperties(Pg.prototype,{isResource:{configurable:!0,enumerable:!0,get:function(){return!0}},canDealWithJSON:{configurable:!0,enumerable:!0,get:function(){return!1}}});Pj.Resource=Pg;Pj.default=Pg;var Kg=lively.FreezerRuntime.recorderFor("lively.resources/src/http-resource.js");Kg.davNs=function(d){return(d=d.match(/\/([a-z]+?):multistatus/i))?d[1]:"d"};Kg.propfindRequestPayload=function(){return'<?xml version="1.0" encoding="utf-8" ?>\n    <D:propfind xmlns:D="DAV:">\n      <D:prop>\n        <D:creationdate/>\n        <D:getcontentlength/>\n        <D:getcontenttype/>\n        <D:getetag/>\n        <D:getlastmodified/>\n        <D:resourcetype/>\n      </D:prop>\n    </D:propfind>'};
Kg.readPropertyNode=function(d,h){h=void 0===h?{}:h;var n=d.tagName.replace(/[^:]+:/,"");n=Kg.propertyNodeMap[n];d=d.textContent;switch(n){case "lastModified":case "created":d=new Date(d);break;case "size":d=Number(d)}h[n]=d;return h};Kg.readXMLPropfindResult=function(d){var h=(new Kg.DOMParser).parseFromString(d,"text/xml");d=Kg.davNs(d);h=(new Kg.XPathQuery("/"+d+":multistatus/"+d+":response")).findAll(h.documentElement);var n=new Kg.XPathQuery(d+":href"),b=new Kg.XPathQuery(d+":propstat/"+d+":prop");
return h.map(function(e){var l=b.findFirst(e);l=Array.from(l.childNodes).reduce(function(a,f){return Kg.readPropertyNode(f,a)},{});e=n.findFirst(e);l.url=e.textContent||e.text;return l})};Kg.defaultOrigin=function(){return System.baseURL||document.location.origin};Kg.makeRequest=function(d,h,n,b,e){b=void 0===b?{}:b;e=d.url;var l=d.useCors,a=d.useProxy,f=d.headers;l="undefined"!==typeof l?l:!0;h={method:void 0===h?"GET":h};if("undefined"!==typeof a?a:1)Object.assign(b,{"cache-control":"no-cache",
"x-lively-proxy-request":e}),e=d.proxyDomain||Kg.defaultOrigin();l&&(h.mode="cors");n&&(h.body=n);h.redirect="follow";h.headers=Object.assign({},b,{},f);return fetch(e,h)};Kg.upload=ba;Kg.Resource=Pg;Kg.applyExclude=mu;Kg.promise=hg;Kg.num=Um;var YI=function(d){this.expression=d;this.contextNode=null;this.xpe=new Kg.XPathEvaluator};YI.prototype.establishContext=function(d){this.nsResolver||(d=d.ownerDocument?d.ownerDocument.documentElement:d.documentElement,d!==this.contextNode&&(this.contextNode=
d,this.nsResolver=this.xpe.createNSResolver(d)))};YI.prototype.manualNSLookup=function(){this.nsResolver=function(d){return Kg.Namespace[d.toUpperCase()]||null};return this};YI.prototype.findAll=function(d,h){this.establishContext(d);d=this.xpe.evaluate(this.expression,d,this.nsResolver,Kg.XPathResult.ANY_TYPE,null);for(var n=[],b;b=d.iterateNext();)n.push(b);return 0<n.length||void 0===h?n:h};YI.prototype.findFirst=function(d){this.establishContext(d);return this.xpe.evaluate(this.expression,d,this.nsResolver,
Kg.XPathResult.ANY_TYPE,null).iterateNext()};Kg.XPathQuery=YI;Kg.propertyNodeMap={getlastmodified:"lastModified",creationDate:"created",getetag:"etag",getcontentlength:"size",resourcetype:"type",getcontenttype:"contentType"};Kg.binaryExtensions="3ds 3g2 3gp 7z a aac adp ai aif aiff alz ape apk ar arj asf au avi bak bh bin bk bmp btif bz2 bzip2 cab caf cgm class cmx cpio cr2 csv cur dat deb dex djvu dll dmg dng doc docm docx dot dotm dra DS_Store dsk dts dtshd dvb dwg dxf ecelp4800 ecelp7470 ecelp9600 egg eol eot epub exe f4v fbs fh fla flac fli flv fpx fst fvt g3 gif graffle gz gzip h261 h263 h264 icns ico ief img ipa iso jar jpeg jpg jpgv jpm jxr key ktx lha lvp lz lzh lzma lzo m3u m4a m4v mar mdi mht mid midi mj2 mka mkv mmr mng mobi mov movie mp3 mp4 mp4a mpeg mpg mpga mxu nef npx numbers o oga ogg ogv otf pages pbm pcx pdf pea pgm pic png pnm pot potm potx ppa ppam ppm pps ppsm ppsx ppt pptm pptx psd pya pyc pyo pyv qt rar ras raw rgb rip rlc rmf rmvb rtf rz s3m s7z scpt sgi shar sil sketch slk smv so sub swf tar tbz tbz2 tga tgz thmx tif tiff tlz ttc ttf txz udf uvh uvi uvm uvp uvs uvu viv vob war wav wax wbmp wdp weba webm webp whl wim wm wma wmv wmx woff woff2 wvx xbm xif xla xlam xls xlsb xlsm xlsx xlt xltm xltx xm xmind xpi xpm xwd xz z zip zipx".split(" ");
Kg.isNode="undefined"!==typeof System?System.get("@system-env").node:"undefined"!==typeof global&&"undefined"!==typeof Kg.process;Kg.upload=ba;Kg.upload=ba;var Wm=function(d,h){h=void 0===h?{}:h;d=Kg.Resource.call(this,d,h)||this;d.onLoad=h.onLoad||function(){};d.onProgress=h.onProgress||function(){};d.useProxy=h.hasOwnProperty("useProxy")?h.useProxy:!1;d.proxyDomain=h.proxyDomain||void 0;d.useCors=h.hasOwnProperty("useCors")?h.useCors:!1;d.headers=h.headers||{};d.binary=d.isFile()?Kg.binaryExtensions.includes(d.ext()):
!1;d.errorOnHTTPStatusCodes=h.hasOwnProperty("errorOnHTTPStatusCodes")?h.errorOnHTTPStatusCodes:!0;return d};$jscomp.inherits(Wm,Kg.Resource);Wm.prototype.join=function(d){return Object.assign(Kg.Resource.prototype.join.call(this,d),{headers:this.headers,useCors:this.useCors,useProxy:this.useProxy,proxyDomain:this.proxyDomain})};Wm.prototype.makeProxied=function(d){void 0!==d&&(this.proxyDomain=d);return this.useProxy?this:new this.constructor(this.url,{headers:this.headers,useCors:this.useCors,useProxy:!0,
proxyDomain:this.proxyDomain})};Wm.prototype.noErrorOnHTTPStatusCodes=function(){this.errorOnHTTPStatusCodes=!1;return this};Wm.prototype.read=function(){var d=this,h;return $jscomp.asyncExecutePromiseGeneratorProgram(function(n){if(1==n.nextAddress)return n.yield(Kg.makeRequest(d),2);h=n.yieldResult;if(!h.ok&&d.errorOnHTTPStatusCodes)throw Error("Cannot read "+d.url+": "+h.statusText+" "+h.status);if(!d.binary)return n.return(h.text());if("blob"===d.binary)return n.return(h.blob());if("function"===
typeof h.arrayBuffer)return n.return(h.arrayBuffer());if("function"===typeof h.buffer)return n.return(h.buffer());throw Error("Don't now how to read binary resource "+d+"'");})};Wm.prototype.write=function(d){var h=this,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){if(1==b.nextAddress){if(!h.isFile())throw Error("Cannot write a non-file: "+h.url);return b.yield(Kg.upload(h,d),2)}n=b.yieldResult;if(!Kg.num.between(n.status,200,300)&&h.errorOnHTTPStatusCodes)throw Error("Cannot write "+
h.url+": "+n.statusText+" "+n.status);return b.return(h)})};Wm.prototype.mkdir=function(){var d=this,h;return $jscomp.asyncExecutePromiseGeneratorProgram(function(n){if(1==n.nextAddress){if(d.isFile())throw Error("Cannot mkdir on a file: "+d.url);return n.yield(Kg.makeRequest(d,"MKCOL"),2)}h=n.yieldResult;if(!h.ok&&d.errorOnHTTPStatusCodes)throw Error("Cannot create directory "+d.url+": "+h.statusText+" "+h.status);return n.return(d)})};Wm.prototype.exists=function(){var d=this,h;return $jscomp.asyncExecutePromiseGeneratorProgram(function(n){if(1==
n.nextAddress)return d.isRoot()?(h=!0,n.jumpTo(2)):n.yield(Kg.makeRequest(d,"HEAD"),3);2!=n.nextAddress&&(h=!!n.yieldResult.ok);return n.return(h)})};Wm.prototype.remove=function(){var d=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(h){return 1==h.nextAddress?h.yield(Kg.makeRequest(d,"DELETE"),2):h.return(d)})};Wm.prototype._propfind=function(){var d=this,h,n,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(1==e.nextAddress)return e.yield(Kg.makeRequest(d,"PROPFIND",
null,{"Content-Type":"text/xml"}),2);if(3!=e.nextAddress){h=e.yieldResult;if(!h.ok&&d.errorOnHTTPStatusCodes)throw Error("Error in dirList for "+d.url+": "+h.statusText);return e.yield(h.text(),3)}n=e.yieldResult;b=d.root();return e.return(Kg.readXMLPropfindResult(n).map(function(l){return b.join(l.url).assignProperties(l)}))})};Wm.prototype.dirList=function(d,h){d=void 0===d?1:d;h=void 0===h?{}:h;var n=this,b,e,l,a,f;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){if(1==m.nextAddress){if("number"!==
typeof d&&"infinity"!==d)throw Error("dirList \u2013 invalid depth argument: "+d);b=h;e=b.exclude;0>=d&&(d=1);return 1===d?m.yield(n._propfind(),5):m.yield(n.dirList(1,h),4)}if(5!=m.nextAddress)return l=m.yieldResult,a=l.filter(function(r){return r.isDirectory()}),m.return(Promise.all(a.map(function(r){return r.dirList("number"===typeof d?d-1:d,h)})).then(function(r){return r.reduce(function(v,x){return v.concat(x)},l)}));f=m.yieldResult;f.shift();e&&(f=Kg.applyExclude(e,f));return m.return(f)})};
Wm.prototype.readProperties=function(d){var h=this,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){if(1==b.nextAddress)return b.yield(h._propfind(),2);n=b.yieldResult[0];return b.return(h.assignProperties(n))})};Wm.prototype.post=function(d){d=void 0===d?null:d;var h=this,n,b,e;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){switch(l.nextAddress){case 1:return"string"!==typeof d&&(d=JSON.stringify(d)),l.yield(Kg.makeRequest(h,"POST",d,{}),2);case 2:return n=l.yieldResult,
l.setCatchFinallyBlocks(3),l.yield(n.text(),5);case 5:b=l.yieldResult;l.leaveTryBlock(4);break;case 3:l.enterCatchBlock();case 4:if(b&&"application/json"===n.headers.get("content-type"))try{e=JSON.parse(b)}catch(a){}if(!n.ok&&h.errorOnHTTPStatusCodes)throw Error("Error in POST "+h.url+": "+(b||n.statusText));return l.return(e||b)}})};Wm.prototype.copyTo=function(d,h){h=void 0===h?!0:h;var n=this,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(n.isFile()&&(b=d.isFile()?d:d.join(n.name()),
Kg.isNode)){if(b.isHTTPResource)return e.return(n._copyTo_file_nodejs_http(b,h));if(b.isNodeJSFileResource)return e.return(n._copyTo_file_nodejs_fs(b,h))}return e.return(Kg.Resource.prototype.copyTo.call(n,d,h))})};Wm.prototype._copyFrom_file_nodejs_fs=function(d,h){h=void 0===h?!0:h;var n=this,b,e,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){if(1==a.nextAddress)return h?a.yield(n.parent().ensureExistance(),2):a.jumpTo(2);if(4!=a.nextAddress)return e=d._createReadStream(),e.on("error",
function(f){return b=f}),a.yield(Kg.makeRequest(n,"PUT",e),4);l=a.yieldResult;if(b)throw b;if(!l.ok&&n.errorOnHTTPStatusCodes)throw Error("copyTo: Cannot GET: "+l.statusText+" "+l.status);return a.return(n)})};Wm.prototype._copyTo_file_nodejs_fs=function(d,h){h=void 0===h?!0:h;var n=this,b,e;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){if(1==l.nextAddress)return h?l.yield(d.parent().ensureExistance(),2):l.jumpTo(2);if(4!=l.nextAddress)return l.yield(Kg.makeRequest(n,"GET"),4);b=
l.yieldResult;if(!b.ok&&n.errorOnHTTPStatusCodes)throw Error("copyTo: Cannot GET: "+b.statusText+" "+b.status);return l.return(new Promise(function(a,f){return b.body.pipe(d._createWriteStream()).on("error",function(m){return e=m}).on("finish",function(){return e?f(e):a(n)})}))})};Wm.prototype._copyTo_file_nodejs_http=function(d,h){h=void 0===h?!0:h;var n=this,b,e;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){switch(l.nextAddress){case 1:if(!h){l.jumpTo(2);break}return l.yield(d.parent().ensureExistance(),
2);case 2:return l.yield(Kg.makeRequest(n,"GET"),4);case 4:b=l.yieldResult;if(!b.ok&&n.errorOnHTTPStatusCodes)throw Error("copyTo: Cannot GET: "+b.statusText+" "+b.status);return l.yield(Kg.makeRequest(d,"PUT",b.body),5);case 5:e=l.yieldResult;if(!b.ok&&n.errorOnHTTPStatusCodes)throw Error("copyTo: Cannot PUT: "+e.statusText+" "+e.status);l.jumpToEnd()}})};$jscomp.global.Object.defineProperties(Wm.prototype,{isHTTPResource:{configurable:!0,enumerable:!0,get:function(){return!0}}});Kg.WebDAVResource=
Wm;var dP={name:"http-webdav-resource",matches:function(d){return d.startsWith("http:")||d.startsWith("https:")},resourceClass:Kg.WebDAVResource};Kg.resourceExtension=dP;Kg.resourceExtension=dP;Kg.resourceExtension=dP;Kg.default=Wm;var Qu=System.get("@system-env").node?require("fs"):{},Sqa=Qu.readFile,Tqa=Qu.writeFile,Uqa=Qu.exists,Vqa=Qu.readdir,Wqa=Qu.mkdir,Xqa=Qu.rmdir,Yqa=Qu.unlink,Zqa=Qu.lstat,$qa=Qu.rename,ara=Qu.createWriteStream,bra=Qu.createReadStream,$f=lively.FreezerRuntime.recorderFor("lively.resources/src/fs-resource.js");
$f.wrapInPromise=function(d){return function(h){for(var n=[],b=0;b<arguments.length;++b)n[b-0]=arguments[b];return new Promise(function(e,l){return d.apply(null,n.concat(function(a,f){return a?l(a):e(f)}))})}};$f.Resource=Pg;$f.applyExclude=mu;$f.windowsURLPrefixRe=aP;$f.windowsRootPathRe=cP;$f.createWriteStream=ara;$f.createReadStream=bra;$f.readFile=Sqa;$f.writeFile=Tqa;$f.exists=Uqa;$f.mkdir=Wqa;$f.rmdir=Xqa;$f.unlink=Yqa;$f.readdir=Vqa;$f.lstat=Zqa;$f.rename=$qa;$f.readFileP=$f.wrapInPromise($f.readFile);
$f.writeFileP=$f.wrapInPromise($f.writeFile);$f.existsP=function(d){return new Promise(function(h,n){return $f.exists(d,function(b){return h(!!b)})})};$f.readdirP=$f.wrapInPromise($f.readdir);$f.mkdirP=$f.wrapInPromise($f.mkdir);$f.rmdirP=$f.wrapInPromise($f.rmdir);$f.unlinkP=$f.wrapInPromise($f.unlink);$f.lstatP=$f.wrapInPromise($f.lstat);$f.renameP=$f.wrapInPromise($f.rename);var ho=function(){return $f.Resource.apply(this,arguments)||this};$jscomp.inherits(ho,$f.Resource);ho.prototype.path=function(){return this.url.replace("file://",
"")};ho.prototype.stat=function(){var d=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(h){return h.return($f.lstatP(d.path()))})};ho.prototype.read=function(){var d=this,h;return $jscomp.asyncExecutePromiseGeneratorProgram(function(n){h=$f.readFileP(d.path());return n.return(d.binary?h:h.then(String))})};ho.prototype.write=function(d){var h=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(n){if(1==n.nextAddress){if(h.isDirectory())throw Error("Cannot write into a directory: "+
h.path());return n.yield($f.writeFileP(h.path(),d),2)}return n.return(h)})};ho.prototype.mkdir=function(){var d=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(h){if(1==h.nextAddress){if(d.isFile())throw Error("Cannot mkdir on a file: "+d.path());return h.yield($f.mkdirP(d.path()),2)}return h.return(d)})};ho.prototype.exists=function(){var d=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(h){return h.return(d.isRoot()?!0:$f.existsP(d.path()))})};ho.prototype.dirList=
function(d,h){d=void 0===d?1:d;h=void 0===h?{}:h;var n=this,b,e,l,a,f,m,r,v,x,y,E,F;return $jscomp.asyncExecutePromiseGeneratorProgram(function(I){switch(I.nextAddress){case 1:if("number"!==typeof d&&"infinity"!==d)throw Error("dirList \u2013 invalid depth argument: "+d);b=h;e=b.exclude;0>=d&&(d=1);if(1!==d){I.jumpTo(2);break}l=[];a=$jscomp;f=a.makeIterator;return I.yield($f.readdirP(n.path()),3);case 3:m=f.call(a,I.yieldResult),r=m.next();case 4:if(r.done){I.jumpTo(6);break}v=r.value;x=n.join(v);
return I.yield(x.stat(),7);case 7:y=I.yieldResult;x=y.isDirectory()?x.asDirectory():x;x._assignPropsFromStat(y);l.push(x);r=m.next();I.jumpTo(4);break;case 6:return e&&(l=$f.applyExclude(e,l)),I.return(l);case 2:return I.yield(n.dirList(1,h),8);case 8:return E=I.yieldResult,F=E.filter(function(J){return J.isDirectory()}),I.return(Promise.all(F.map(function(J){return J.dirList("number"===typeof d?d-1:d,h)})).then(function(J){return J.reduce(function(P,N){return P.concat(N)},E)}))}})};ho.prototype.isEmptyDirectory=
function(){var d=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(h){return 1==h.nextAddress?h.yield(d.dirList(),2):h.return(0===h.yieldResult.length)})};ho.prototype.rename=function(d){var h=this,n,b,e,l,a,f,m,r,v,x,y,E,F;return $jscomp.asyncExecutePromiseGeneratorProgram(function(I){switch(I.nextAddress){case 1:if(!(d instanceof h.constructor))return I.return($f.Resource.prototype.rename.call(h,d));if(h.isFile()){d=d.asFile();$f.renameP(h.path(),d.path());I.jumpTo(2);break}d=d.asDirectory();
return I.yield(d.ensureExistance(),3);case 3:return n=[],b=[],e=$jscomp,l=e.makeIterator,I.yield(h.dirList("infinity"),4);case 4:a=l.call(e,I.yieldResult);for(f=a.next();!f.done;f=a.next())m=f.value,m.isDirectory()?b.push(m):n.push(m);r=$jscomp.makeIterator(b);v=r.next();case 5:if(v.done){I.jumpTo(7);break}x=v.value;return I.yield(d.join(x.relativePathFrom(h)).ensureExistance(),6);case 6:v=r.next();I.jumpTo(5);break;case 7:y=$jscomp.makeIterator(n),E=y.next();case 9:if(E.done)return I.yield(h.remove(),
2);F=E.value;return I.yield(F.rename(d.join(F.relativePathFrom(h))),10);case 10:E=y.next();I.jumpTo(9);break;case 2:return I.return(d)}})};ho.prototype.remove=function(){var d=this,h,n,b,e,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){switch(a.nextAddress){case 1:return a.yield(d.exists(),2);case 2:if(!a.yieldResult){a.jumpTo(3);break}return d.isDirectory()?(h=$jscomp,n=h.makeIterator,a.yield(d.dirList(),7)):a.yield($f.unlinkP(d.path()),3);case 7:b=n.call(h,a.yieldResult),e=b.next();
case 8:if(e.done)return a.yield($f.rmdirP(d.path()),3);l=e.value;return a.yield(l.remove(),9);case 9:e=b.next();a.jumpTo(8);break;case 3:return a.return(d)}})};ho.prototype.readProperties=function(){var d=this,h,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){return 1==b.nextAddress?(h=d,n=h._assignPropsFromStat,b.yield(d.stat(),2)):b.return(n.call(h,b.yieldResult))})};ho.prototype.copyTo=function(d,h){h=void 0===h?!0:h;var n=this,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){return n.isFile()&&
(b=d.isFile()?d:d.join(n.name()),b.isHTTPResource)?e.return(b._copyFrom_file_nodejs_fs(n,h=!0)):e.return($f.Resource.prototype.copyTo.call(n,d,h))})};ho.prototype._assignPropsFromStat=function(d){return this.assignProperties({lastModified:d.mtime,created:d.ctime,size:d.size,type:d.isDirectory()?"directory":"file",isLink:d.isSymbolicLink()})};ho.prototype._createWriteStream=function(){return $f.createWriteStream(this.path())};ho.prototype._createReadStream=function(){return $f.createReadStream(this.path())};
$jscomp.global.Object.defineProperties(ho.prototype,{isNodeJSFileResource:{configurable:!0,enumerable:!0,get:function(){return!0}}});$f.NodeJSFileResource=ho;var ZI=function(d,h){"file:///"!==d.slice(0,8)&&"file://"===d.slice(0,7)&&(d="file:///"+d.slice(7));d.includes("\\")&&(d=d.replace(/\\/g,"/"));return $f.NodeJSFileResource.call(this,d,h)||this};$jscomp.inherits(ZI,$f.NodeJSFileResource);ZI.prototype.path=function(){return this.url.replace("file:///","")};ZI.prototype.isRoot=function(){return!!this.path().match($f.windowsRootPathRe)};
ZI.prototype.root=function(){if(this.isRoot())return this;console.log(this.url);var d=this.url.match($f.windowsURLPrefixRe);if(d)return this.newResource(d[0]);throw Error("Could not determine root path of windows file resource for url "+this.url);};$f.NodeJSWindowsFileResource=ZI;var eP={name:"nodejs-file-resource",matches:function(d){return d.startsWith("file:")},resourceClass:"undefined"!==typeof $f.process&&"win32"===$f.process.platform?$f.NodeJSWindowsFileResource:$f.NodeJSFileResource};$f.resourceExtension=
eP;$f.resourceExtension=eP;$f.resourceExtension=eP;var xl=lively.FreezerRuntime.recorderFor("lively.resources/src/local-resource.js");xl.applyExclude=function(d,h){return h?"string"===typeof h?!d.url.includes(h):"function"===typeof h?!h(d):h instanceof RegExp?!h.test(d.url):!0:!0};xl.Resource=Pg;xl.createFiles=H;xl.debug=!1;xl.slashRe=/\//g;var jt=function(d,h){h=void 0===h?{}:h;if(!d||"string"!==typeof d)throw Error("LocalResourceInMemoryBackend needs name!");this.name=d;this._filespec=h};jt.removeHost=
function(d){delete this.hosts[d]};jt.ensure=function(d,h){var n=this;h=void 0===h?{}:h;var b=this.named(h.host);return Promise.resolve().then(function(){return d?xl.createFiles("local://"+b.name,d):null}).then(function(){return n})};jt.named=function(d){d||(d="default");return this.hosts[d]||(this.hosts[d]=new this(d))};jt.prototype.get=function(d){return this._filespec[d]};jt.prototype.set=function(d,h){this._filespec[d]=h};jt.prototype.write=function(d,h){var n=this._filespec[d];n||(n=this._filespec[d]=
{created:new Date});n.content=h;n.isDirectory=!1;n.lastModified=new Date};jt.prototype.read=function(d){return(d=this._filespec[d])&&d.content?d.content:""};jt.prototype.mkdir=function(d){var h=this._filespec[d];h&&h.isDirectory||(h||(h=this._filespec[d]={created:new Date}),h.content&&delete h.content,h.isDirectory=!0,h.lastModified=new Date)};jt.prototype.partialFilespec=function(d,h){d=void 0===d?"/":d;h=void 0===h?Infinity:h;for(var n={},b=this.filespec,e=Object.keys(b),l=0;l<e.length;l++){var a=
e[l];if(a.startsWith(d)&&d!==a){var f=a.slice(d.length);(f.includes("/")?f.match(xl.slashRe).length+1:1)>h||(n[a]=b[a])}}return n};$jscomp.global.Object.defineProperties(jt.prototype,{filespec:{configurable:!0,enumerable:!0,get:function(){return this._filespec},set:function(d){this._filespec=d}}});$jscomp.global.Object.defineProperties(jt,{hosts:{configurable:!0,enumerable:!0,get:function(){return this._hosts||(this._hosts={})}}});xl.LocalResourceInMemoryBackend=jt;var Ru=function(){return xl.Resource.apply(this,
arguments)||this};$jscomp.inherits(Ru,xl.Resource);Ru.prototype.read=function(){return Promise.resolve(this.localBackend.read(this.path()))};Ru.prototype.write=function(d){xl.debug&&console.log("["+this+"] write");if(this.isDirectory())throw Error("Cannot write into a directory! ("+this.url+")");var h=this.localBackend.get(this.path());if(h&&h.isDirectory)throw Error(this.url+" already exists and is a directory (cannot write into it!)");this.localBackend.write(this.path(),d);return Promise.resolve(this)};
Ru.prototype.mkdir=function(){xl.debug&&console.log("["+this+"] mkdir");if(!this.isDirectory())throw Error("Cannot mkdir a file! ("+this.url+")");var d=this.localBackend.get(this.path());if(d&&d.isDirectory)return Promise.resolve(this);if(d&&!d.isDirectory)throw Error(this.url+" already exists and is a file (cannot mkdir it!)");this.localBackend.mkdir(this.path());return Promise.resolve(this)};Ru.prototype.exists=function(){xl.debug&&console.log("["+this+"] exists");return Promise.resolve(this.isRoot()||
this.path()in this.localBackend.filespec)};Ru.prototype.remove=function(){var d=this;xl.debug&&console.log("["+this+"] remove");var h=this.path();Object.keys(this.localBackend.filespec).forEach(function(n){return n.startsWith(h)&&delete d.localBackend.filespec[n]});return Promise.resolve(this)};Ru.prototype.readProperties=function(){xl.debug&&console.log("["+this+"] readProperties");throw Error("not yet implemented");};Ru.prototype.dirList=function(d,h){d=void 0===d?1:d;h=void 0===h?{}:h;xl.debug&&
console.log("["+this+"] dirList");if(!this.isDirectory())return this.asDirectory().dirList(d,h);h=h.exclude;var n=this.path(),b=[],e=Object.keys(this.localBackend.filespec);"infinity"===d&&(d=Infinity);for(var l={},a=0;a<e.length;l={$jscomp$loop$prop$dirToChild$2659:l.$jscomp$loop$prop$dirToChild$2659},a++){var f=e[a];f.startsWith(n)&&n!==f&&(f=f.slice(n.length),(f.includes("/")?f.match(xl.slashRe).length+1:1)>d?(l.$jscomp$loop$prop$dirToChild$2659=this.join(f.split("/").slice(0,d).join("/")+"/"),
b.some(function(m){return function(r){return r.equals(m.$jscomp$loop$prop$dirToChild$2659)}}(l))||b.push(l.$jscomp$loop$prop$dirToChild$2659)):(f=this.join(f),h&&!xl.applyExclude(f,h)||b.push(f)))}return Promise.resolve(b)};$jscomp.global.Object.defineProperties(Ru.prototype,{localBackend:{configurable:!0,enumerable:!0,get:function(){return xl.LocalResourceInMemoryBackend.named(this.host())}}});xl.LocalResource=Ru;var fP={name:"local-resource",matches:function(d){return d.startsWith("local:")},resourceClass:xl.LocalResource};
xl.resourceExtension=fP;xl.resourceExtension=fP;xl.resourceExtension=fP;xl.default=Ru;var ji=lively.FreezerRuntime.recorderFor("lively.resources/index.js");ji.createFileSpec=ra;ji.importModuleViaNative=la;ji.loadViaScript=Ka;ji.ensureFetch=cb;ji.default=Pg;ji.Resource=Pg;ji.unregisterExtension=S;ji.registerExtension=M;ji.parseQuery=Bq;ji.extensions=UC;ji.createFiles=H;ji.resource=A;ji.httpResourceExtension=dP;ji.fileResourceExtension=eP;ji.localResourceExtension=fP;ji.newUUID=fh;ji.waitFor=vx;ji.registerExtension(ji.localResourceExtension);
ji.registerExtension(ji.httpResourceExtension);ji.registerExtension(ji.fileResourceExtension);ji.createFileSpec=ra;ji.createFileSpec=ra;ji.importModuleViaNative=la;ji.importModuleViaNative=la;ji.loadViaScript=Ka;ji.loadViaScript=Ka;ji.ensureFetch=cb;ji.ensureFetch=cb;ji.registerExtension=M;ji.registerExtension=M;ji.unregisterExtension=S;ji.unregisterExtension=S;ji.parseQuery=Bq;ji.parseQuery=Bq;ji.extensions=UC;ji.extensions=UC;ji.createFiles=H;ji.createFiles=H;ji.resource=A;ji.resource=A;var cra=
Object.freeze({__proto__:null,Resource:Pg,createFileSpec:ra,importModuleViaNative:la,loadViaScript:Ka,ensureFetch:cb,registerExtension:M,unregisterExtension:S,parseQuery:Bq,extensions:UC,createFiles:H,resource:A}),Fi=lively.FreezerRuntime.recorderFor("lively.morphic/helpers.js");Fi.sanitizeFont=yb;Fi.pathForBrowserHistory=Cb;Fi.addClassMappings=Tb;Fi.morph=qc;Fi.newMorphId=ic;Fi.lazyInspect=function(d){var h,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){if(1==b.nextAddress)return b.yield(System.import("lively.ide/js/inspector.js"),
2);h=b.yieldResult;n=h.inspect;Fi.inspect=n;return b.return(n(d))})};Fi.locateClass=Cs;Fi.string=Th;Fi.parseQuery=Bq;Fi.stringifyQuery=dw;Fi.touchInput=Fi.touchInput||void 0;try{document.createEvent("TouchEvent"),Fi.touchInput=!0}catch(d){Fi.touchInput=!1}var Sr=Ha("a_",Fi.touchInput);Fi.touchInputDevice=Sr;Fi.touchInputDevice=Sr;Fi.touchInputDevice=Sr;Fi.nameToClassMapping=Fi.nameToClassMapping||{};Fi.sanitizeFont=yb;Fi.sanitizeFont=yb;Fi.pathForBrowserHistory=Cb;Fi.pathForBrowserHistory=Cb;Fi.addClassMappings=
Tb;Fi.addClassMappings=Tb;Fi.morph=qc;Fi.morph=qc;Fi.newMorphId=ic;Fi.newMorphId=ic;var VC=Ha("a9",Fi.lazyInspect);Fi.inspect=VC;Fi.inspect=VC;Fi.inspect=VC;var kt=lively.FreezerRuntime.recorderFor("lively.morphic/text/icons.js");kt.obj=ng;kt.morph=qc;var Rp=Ha("aK",function(d){var h=lively.FreezerRuntime.recorderFor("lively.morphic/text/icons.js"),n=h.hasOwnProperty("Icon")&&"function"===typeof h.Icon?h.Icon:h.Icon=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return Pb(n,d,void 0,[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Icon"}},{key:"makeLabel",value:function(b,e){var l=e=void 0===e?{prefix:"",suffix:""}:e,a=l.prefix;l=l.suffix;var f=[];a&&f.push.apply(f,$jscomp.arrayFromIterable("string"===typeof a?[a||"",{}]:a));f.push.apply(f,$jscomp.arrayFromIterable(this.textAttribute(b,kt.obj.dissoc(e,["fontSize"]))));l&&f.push.apply(f,$jscomp.arrayFromIterable("string"===typeof l?[l||"",{}]:l));return kt.morph(Object.assign({type:"label",
value:f},kt.obj.dissoc(e,["prefix","suffix"])))}},{key:"textAttribute",value:function(b,e){e=void 0===e?{}:e;var l=e.textStyleClasses&&e.textStyleClasses.includes("far");return[kt.Icons[b].code||"icon "+b+" not found",Object.assign({fontFamily:'"Font Awesome 5 Free", "Font Awesome 5 Brands"',fontWeight:l?"400":"900",textStyleClasses:["fas"]},e)]}},{key:"setIcon",value:function(b,e){b.textAndAttributes=this.textAttribute(e)}}],h,{pathInPackage:function(){return"text/icons.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:683,end:1811})}(void 0));kt.Icon=Rp;kt.Icon=Rp;kt.Icon=Rp;var gP=Ha("aR",{"500px":{code:"\uf26e"},"accessible-icon":{code:"\uf368"},accusoft:{code:"\uf369"},"acquisitions-incorporated":{code:"\uf6af"},ad:{code:"\uf641"},"address-book":{code:"\uf2b9"},"address-card":{code:"\uf2bb"},adjust:{code:"\uf042"},adn:{code:"\uf170"},adobe:{code:"\uf778"},adversal:{code:"\uf36a"},
affiliatetheme:{code:"\uf36b"},"air-freshener":{code:"\uf5d0"},airbnb:{code:"\uf834"},algolia:{code:"\uf36c"},"align-center":{code:"\uf037"},"align-justify":{code:"\uf039"},"align-left":{code:"\uf036"},"align-right":{code:"\uf038"},alipay:{code:"\uf642"},allergies:{code:"\uf461"},amazon:{code:"\uf270"},"amazon-pay":{code:"\uf42c"},ambulance:{code:"\uf0f9"},"american-sign-language-interpreting":{code:"\uf2a3"},amilia:{code:"\uf36d"},anchor:{code:"\uf13d"},android:{code:"\uf17b"},angellist:{code:"\uf209"},
"angle-double-down":{code:"\uf103"},"angle-double-left":{code:"\uf100"},"angle-double-right":{code:"\uf101"},"angle-double-up":{code:"\uf102"},"angle-down":{code:"\uf107"},"angle-left":{code:"\uf104"},"angle-right":{code:"\uf105"},"angle-up":{code:"\uf106"},angry:{code:"\uf556"},angrycreative:{code:"\uf36e"},angular:{code:"\uf420"},ankh:{code:"\uf644"},"app-store":{code:"\uf36f"},"app-store-ios":{code:"\uf370"},apper:{code:"\uf371"},apple:{code:"\uf179"},"apple-alt":{code:"\uf5d1"},"apple-pay":{code:"\uf415"},
archive:{code:"\uf187"},archway:{code:"\uf557"},"arrow-alt-circle-down":{code:"\uf358"},"arrow-alt-circle-left":{code:"\uf359"},"arrow-alt-circle-right":{code:"\uf35a"},"arrow-alt-circle-up":{code:"\uf35b"},"arrow-circle-down":{code:"\uf0ab"},"arrow-circle-left":{code:"\uf0a8"},"arrow-circle-right":{code:"\uf0a9"},"arrow-circle-up":{code:"\uf0aa"},"arrow-down":{code:"\uf063"},"arrow-left":{code:"\uf060"},"arrow-right":{code:"\uf061"},"arrow-up":{code:"\uf062"},"arrows-alt":{code:"\uf0b2"},"arrows-alt-h":{code:"\uf337"},
"arrows-alt-v":{code:"\uf338"},artstation:{code:"\uf77a"},"assistive-listening-systems":{code:"\uf2a2"},asterisk:{code:"\uf069"},asymmetrik:{code:"\uf372"},at:{code:"\uf1fa"},atlas:{code:"\uf558"},atlassian:{code:"\uf77b"},atom:{code:"\uf5d2"},audible:{code:"\uf373"},"audio-description":{code:"\uf29e"},autoprefixer:{code:"\uf41c"},avianex:{code:"\uf374"},aviato:{code:"\uf421"},award:{code:"\uf559"},aws:{code:"\uf375"},baby:{code:"\uf77c"},"baby-carriage":{code:"\uf77d"},backspace:{code:"\uf55a"},
backward:{code:"\uf04a"},bacon:{code:"\uf7e5"},bahai:{code:"\uf666"},"balance-scale":{code:"\uf24e"},"balance-scale-left":{code:"\uf515"},"balance-scale-right":{code:"\uf516"},ban:{code:"\uf05e"},"band-aid":{code:"\uf462"},bandcamp:{code:"\uf2d5"},barcode:{code:"\uf02a"},bars:{code:"\uf0c9"},"baseball-ball":{code:"\uf433"},"basketball-ball":{code:"\uf434"},bath:{code:"\uf2cd"},"battery-empty":{code:"\uf244"},"battery-full":{code:"\uf240"},"battery-half":{code:"\uf242"},"battery-quarter":{code:"\uf243"},
"battery-three-quarters":{code:"\uf241"},"battle-net":{code:"\uf835"},bed:{code:"\uf236"},beer:{code:"\uf0fc"},behance:{code:"\uf1b4"},"behance-square":{code:"\uf1b5"},bell:{code:"\uf0f3"},"bell-slash":{code:"\uf1f6"},"bezier-curve":{code:"\uf55b"},bible:{code:"\uf647"},bicycle:{code:"\uf206"},biking:{code:"\uf84a"},bimobject:{code:"\uf378"},binoculars:{code:"\uf1e5"},biohazard:{code:"\uf780"},"birthday-cake":{code:"\uf1fd"},bitbucket:{code:"\uf171"},bitcoin:{code:"\uf379"},bity:{code:"\uf37a"},"black-tie":{code:"\uf27e"},
blackberry:{code:"\uf37b"},blender:{code:"\uf517"},"blender-phone":{code:"\uf6b6"},blind:{code:"\uf29d"},blog:{code:"\uf781"},blogger:{code:"\uf37c"},"blogger-b":{code:"\uf37d"},bluetooth:{code:"\uf293"},"bluetooth-b":{code:"\uf294"},bold:{code:"\uf032"},bolt:{code:"\uf0e7"},bomb:{code:"\uf1e2"},bone:{code:"\uf5d7"},bong:{code:"\uf55c"},book:{code:"\uf02d"},"book-dead":{code:"\uf6b7"},"book-medical":{code:"\uf7e6"},"book-open":{code:"\uf518"},"book-reader":{code:"\uf5da"},bookmark:{code:"\uf02e"},
bootstrap:{code:"\uf836"},"border-all":{code:"\uf84c"},"border-none":{code:"\uf850"},"border-style":{code:"\uf853"},"bowling-ball":{code:"\uf436"},box:{code:"\uf466"},"box-open":{code:"\uf49e"},boxes:{code:"\uf468"},braille:{code:"\uf2a1"},brain:{code:"\uf5dc"},"bread-slice":{code:"\uf7ec"},briefcase:{code:"\uf0b1"},"briefcase-medical":{code:"\uf469"},"broadcast-tower":{code:"\uf519"},broom:{code:"\uf51a"},brush:{code:"\uf55d"},btc:{code:"\uf15a"},buffer:{code:"\uf837"},bug:{code:"\uf188"},building:{code:"\uf1ad"},
bullhorn:{code:"\uf0a1"},bullseye:{code:"\uf140"},burn:{code:"\uf46a"},buromobelexperte:{code:"\uf37f"},bus:{code:"\uf207"},"bus-alt":{code:"\uf55e"},"business-time":{code:"\uf64a"},"buy-n-large":{code:"\uf8a6"},buysellads:{code:"\uf20d"},calculator:{code:"\uf1ec"},calendar:{code:"\uf133"},"calendar-alt":{code:"\uf073"},"calendar-check":{code:"\uf274"},"calendar-day":{code:"\uf783"},"calendar-minus":{code:"\uf272"},"calendar-plus":{code:"\uf271"},"calendar-times":{code:"\uf273"},"calendar-week":{code:"\uf784"},
camera:{code:"\uf030"},"camera-retro":{code:"\uf083"},campground:{code:"\uf6bb"},"canadian-maple-leaf":{code:"\uf785"},"candy-cane":{code:"\uf786"},cannabis:{code:"\uf55f"},capsules:{code:"\uf46b"},car:{code:"\uf1b9"},"car-alt":{code:"\uf5de"},"car-battery":{code:"\uf5df"},"car-crash":{code:"\uf5e1"},"car-side":{code:"\uf5e4"},caravan:{code:"\uf8ff"},"caret-down":{code:"\uf0d7"},"caret-left":{code:"\uf0d9"},"caret-right":{code:"\uf0da"},"caret-square-down":{code:"\uf150"},"caret-square-left":{code:"\uf191"},
"caret-square-right":{code:"\uf152"},"caret-square-up":{code:"\uf151"},"caret-up":{code:"\uf0d8"},carrot:{code:"\uf787"},"cart-arrow-down":{code:"\uf218"},"cart-plus":{code:"\uf217"},"cash-register":{code:"\uf788"},cat:{code:"\uf6be"},"cc-amazon-pay":{code:"\uf42d"},"cc-amex":{code:"\uf1f3"},"cc-apple-pay":{code:"\uf416"},"cc-diners-club":{code:"\uf24c"},"cc-discover":{code:"\uf1f2"},"cc-jcb":{code:"\uf24b"},"cc-mastercard":{code:"\uf1f1"},"cc-paypal":{code:"\uf1f4"},"cc-stripe":{code:"\uf1f5"},"cc-visa":{code:"\uf1f0"},
centercode:{code:"\uf380"},centos:{code:"\uf789"},certificate:{code:"\uf0a3"},chair:{code:"\uf6c0"},chalkboard:{code:"\uf51b"},"chalkboard-teacher":{code:"\uf51c"},"charging-station":{code:"\uf5e7"},"chart-area":{code:"\uf1fe"},"chart-bar":{code:"\uf080"},"chart-line":{code:"\uf201"},"chart-pie":{code:"\uf200"},check:{code:"\uf00c"},"check-circle":{code:"\uf058"},"check-double":{code:"\uf560"},"check-square":{code:"\uf14a"},cheese:{code:"\uf7ef"},chess:{code:"\uf439"},"chess-bishop":{code:"\uf43a"},
"chess-board":{code:"\uf43c"},"chess-king":{code:"\uf43f"},"chess-knight":{code:"\uf441"},"chess-pawn":{code:"\uf443"},"chess-queen":{code:"\uf445"},"chess-rook":{code:"\uf447"},"chevron-circle-down":{code:"\uf13a"},"chevron-circle-left":{code:"\uf137"},"chevron-circle-right":{code:"\uf138"},"chevron-circle-up":{code:"\uf139"},"chevron-down":{code:"\uf078"},"chevron-left":{code:"\uf053"},"chevron-right":{code:"\uf054"},"chevron-up":{code:"\uf077"},child:{code:"\uf1ae"},chrome:{code:"\uf268"},chromecast:{code:"\uf838"},
church:{code:"\uf51d"},circle:{code:"\uf111"},"circle-notch":{code:"\uf1ce"},city:{code:"\uf64f"},"clinic-medical":{code:"\uf7f2"},clipboard:{code:"\uf328"},"clipboard-check":{code:"\uf46c"},"clipboard-list":{code:"\uf46d"},clock:{code:"\uf017"},clone:{code:"\uf24d"},"closed-captioning":{code:"\uf20a"},cloud:{code:"\uf0c2"},"cloud-download-alt":{code:"\uf381"},"cloud-meatball":{code:"\uf73b"},"cloud-moon":{code:"\uf6c3"},"cloud-moon-rain":{code:"\uf73c"},"cloud-rain":{code:"\uf73d"},"cloud-showers-heavy":{code:"\uf740"},
"cloud-sun":{code:"\uf6c4"},"cloud-sun-rain":{code:"\uf743"},"cloud-upload-alt":{code:"\uf382"},cloudscale:{code:"\uf383"},cloudsmith:{code:"\uf384"},cloudversify:{code:"\uf385"},cocktail:{code:"\uf561"},code:{code:"\uf121"},"code-branch":{code:"\uf126"},codepen:{code:"\uf1cb"},codiepie:{code:"\uf284"},coffee:{code:"\uf0f4"},cog:{code:"\uf013"},cogs:{code:"\uf085"},coins:{code:"\uf51e"},columns:{code:"\uf0db"},comment:{code:"\uf075"},"comment-alt":{code:"\uf27a"},"comment-dollar":{code:"\uf651"},
"comment-dots":{code:"\uf4ad"},"comment-medical":{code:"\uf7f5"},"comment-slash":{code:"\uf4b3"},comments:{code:"\uf086"},"comments-dollar":{code:"\uf653"},"compact-disc":{code:"\uf51f"},compass:{code:"\uf14e"},compress:{code:"\uf066"},"compress-alt":{code:"\uf422"},"compress-arrows-alt":{code:"\uf78c"},"concierge-bell":{code:"\uf562"},confluence:{code:"\uf78d"},connectdevelop:{code:"\uf20e"},contao:{code:"\uf26d"},cookie:{code:"\uf563"},"cookie-bite":{code:"\uf564"},copy:{code:"\uf0c5"},copyright:{code:"\uf1f9"},
"cotton-bureau":{code:"\uf89e"},couch:{code:"\uf4b8"},cpanel:{code:"\uf388"},"creative-commons":{code:"\uf25e"},"creative-commons-by":{code:"\uf4e7"},"creative-commons-nc":{code:"\uf4e8"},"creative-commons-nc-eu":{code:"\uf4e9"},"creative-commons-nc-jp":{code:"\uf4ea"},"creative-commons-nd":{code:"\uf4eb"},"creative-commons-pd":{code:"\uf4ec"},"creative-commons-pd-alt":{code:"\uf4ed"},"creative-commons-remix":{code:"\uf4ee"},"creative-commons-sa":{code:"\uf4ef"},"creative-commons-sampling":{code:"\uf4f0"},
"creative-commons-sampling-plus":{code:"\uf4f1"},"creative-commons-share":{code:"\uf4f2"},"creative-commons-zero":{code:"\uf4f3"},"credit-card":{code:"\uf09d"},"critical-role":{code:"\uf6c9"},crop:{code:"\uf125"},"crop-alt":{code:"\uf565"},cross:{code:"\uf654"},crosshairs:{code:"\uf05b"},crow:{code:"\uf520"},crown:{code:"\uf521"},crutch:{code:"\uf7f7"},css3:{code:"\uf13c"},"css3-alt":{code:"\uf38b"},cube:{code:"\uf1b2"},cubes:{code:"\uf1b3"},cut:{code:"\uf0c4"},cuttlefish:{code:"\uf38c"},"d-and-d":{code:"\uf38d"},
"d-and-d-beyond":{code:"\uf6ca"},dailymotion:{code:"\uf952"},dashcube:{code:"\uf210"},database:{code:"\uf1c0"},deaf:{code:"\uf2a4"},delicious:{code:"\uf1a5"},democrat:{code:"\uf747"},deploydog:{code:"\uf38e"},deskpro:{code:"\uf38f"},desktop:{code:"\uf108"},dev:{code:"\uf6cc"},deviantart:{code:"\uf1bd"},dharmachakra:{code:"\uf655"},dhl:{code:"\uf790"},diagnoses:{code:"\uf470"},diaspora:{code:"\uf791"},dice:{code:"\uf522"},"dice-d20":{code:"\uf6cf"},"dice-d6":{code:"\uf6d1"},"dice-five":{code:"\uf523"},
"dice-four":{code:"\uf524"},"dice-one":{code:"\uf525"},"dice-six":{code:"\uf526"},"dice-three":{code:"\uf527"},"dice-two":{code:"\uf528"},digg:{code:"\uf1a6"},"digital-ocean":{code:"\uf391"},"digital-tachograph":{code:"\uf566"},directions:{code:"\uf5eb"},discord:{code:"\uf392"},discourse:{code:"\uf393"},divide:{code:"\uf529"},dizzy:{code:"\uf567"},dna:{code:"\uf471"},dochub:{code:"\uf394"},docker:{code:"\uf395"},dog:{code:"\uf6d3"},"dollar-sign":{code:"\uf155"},dolly:{code:"\uf472"},"dolly-flatbed":{code:"\uf474"},
donate:{code:"\uf4b9"},"door-closed":{code:"\uf52a"},"door-open":{code:"\uf52b"},"dot-circle":{code:"\uf192"},dove:{code:"\uf4ba"},download:{code:"\uf019"},draft2digital:{code:"\uf396"},"drafting-compass":{code:"\uf568"},dragon:{code:"\uf6d5"},"draw-polygon":{code:"\uf5ee"},dribbble:{code:"\uf17d"},"dribbble-square":{code:"\uf397"},dropbox:{code:"\uf16b"},drum:{code:"\uf569"},"drum-steelpan":{code:"\uf56a"},"drumstick-bite":{code:"\uf6d7"},drupal:{code:"\uf1a9"},dumbbell:{code:"\uf44b"},dumpster:{code:"\uf793"},
"dumpster-fire":{code:"\uf794"},dungeon:{code:"\uf6d9"},dyalog:{code:"\uf399"},earlybirds:{code:"\uf39a"},ebay:{code:"\uf4f4"},edge:{code:"\uf282"},edit:{code:"\uf044"},egg:{code:"\uf7fb"},eject:{code:"\uf052"},elementor:{code:"\uf430"},"ellipsis-h":{code:"\uf141"},"ellipsis-v":{code:"\uf142"},ello:{code:"\uf5f1"},ember:{code:"\uf423"},empire:{code:"\uf1d1"},envelope:{code:"\uf0e0"},"envelope-open":{code:"\uf2b6"},"envelope-open-text":{code:"\uf658"},"envelope-square":{code:"\uf199"},envira:{code:"\uf299"},
equals:{code:"\uf52c"},eraser:{code:"\uf12d"},erlang:{code:"\uf39d"},ethereum:{code:"\uf42e"},ethernet:{code:"\uf796"},etsy:{code:"\uf2d7"},"euro-sign":{code:"\uf153"},evernote:{code:"\uf839"},"exchange-alt":{code:"\uf362"},exclamation:{code:"\uf12a"},"exclamation-circle":{code:"\uf06a"},"exclamation-triangle":{code:"\uf071"},expand:{code:"\uf065"},"expand-alt":{code:"\uf424"},"expand-arrows-alt":{code:"\uf31e"},expeditedssl:{code:"\uf23e"},"external-link-alt":{code:"\uf35d"},"external-link-square-alt":{code:"\uf360"},
eye:{code:"\uf06e"},"eye-dropper":{code:"\uf1fb"},"eye-slash":{code:"\uf070"},facebook:{code:"\uf09a"},"facebook-f":{code:"\uf39e"},"facebook-messenger":{code:"\uf39f"},"facebook-square":{code:"\uf082"},fan:{code:"\uf863"},"fantasy-flight-games":{code:"\uf6dc"},"fast-backward":{code:"\uf049"},"fast-forward":{code:"\uf050"},fax:{code:"\uf1ac"},feather:{code:"\uf52d"},"feather-alt":{code:"\uf56b"},fedex:{code:"\uf797"},fedora:{code:"\uf798"},female:{code:"\uf182"},"fighter-jet":{code:"\uf0fb"},figma:{code:"\uf799"},
file:{code:"\uf15b"},"file-alt":{code:"\uf15c"},"file-archive":{code:"\uf1c6"},"file-audio":{code:"\uf1c7"},"file-code":{code:"\uf1c9"},"file-contract":{code:"\uf56c"},"file-csv":{code:"\uf6dd"},"file-download":{code:"\uf56d"},"file-excel":{code:"\uf1c3"},"file-export":{code:"\uf56e"},"file-image":{code:"\uf1c5"},"file-import":{code:"\uf56f"},"file-invoice":{code:"\uf570"},"file-invoice-dollar":{code:"\uf571"},"file-medical":{code:"\uf477"},"file-medical-alt":{code:"\uf478"},"file-pdf":{code:"\uf1c1"},
"file-powerpoint":{code:"\uf1c4"},"file-prescription":{code:"\uf572"},"file-signature":{code:"\uf573"},"file-upload":{code:"\uf574"},"file-video":{code:"\uf1c8"},"file-word":{code:"\uf1c2"},fill:{code:"\uf575"},"fill-drip":{code:"\uf576"},film:{code:"\uf008"},filter:{code:"\uf0b0"},fingerprint:{code:"\uf577"},fire:{code:"\uf06d"},"fire-alt":{code:"\uf7e4"},"fire-extinguisher":{code:"\uf134"},firefox:{code:"\uf269"},"firefox-browser":{code:"\uf907"},"first-aid":{code:"\uf479"},"first-order":{code:"\uf2b0"},
"first-order-alt":{code:"\uf50a"},firstdraft:{code:"\uf3a1"},fish:{code:"\uf578"},"fist-raised":{code:"\uf6de"},flag:{code:"\uf024"},"flag-checkered":{code:"\uf11e"},"flag-usa":{code:"\uf74d"},flask:{code:"\uf0c3"},flickr:{code:"\uf16e"},flipboard:{code:"\uf44d"},flushed:{code:"\uf579"},fly:{code:"\uf417"},folder:{code:"\uf07b"},"folder-minus":{code:"\uf65d"},"folder-open":{code:"\uf07c"},"folder-plus":{code:"\uf65e"},font:{code:"\uf031"},"font-awesome":{code:"\uf2b4"},"font-awesome-alt":{code:"\uf35c"},
"font-awesome-flag":{code:"\uf425"},"font-awesome-logo-full":{code:"\uf4e6"},fonticons:{code:"\uf280"},"fonticons-fi":{code:"\uf3a2"},"football-ball":{code:"\uf44e"},"fort-awesome":{code:"\uf286"},"fort-awesome-alt":{code:"\uf3a3"},forumbee:{code:"\uf211"},forward:{code:"\uf04e"},foursquare:{code:"\uf180"},"free-code-camp":{code:"\uf2c5"},freebsd:{code:"\uf3a4"},frog:{code:"\uf52e"},frown:{code:"\uf119"},"frown-open":{code:"\uf57a"},fulcrum:{code:"\uf50b"},"funnel-dollar":{code:"\uf662"},futbol:{code:"\uf1e3"},
"galactic-republic":{code:"\uf50c"},"galactic-senate":{code:"\uf50d"},gamepad:{code:"\uf11b"},"gas-pump":{code:"\uf52f"},gavel:{code:"\uf0e3"},gem:{code:"\uf3a5"},genderless:{code:"\uf22d"},"get-pocket":{code:"\uf265"},gg:{code:"\uf260"},"gg-circle":{code:"\uf261"},ghost:{code:"\uf6e2"},gift:{code:"\uf06b"},gifts:{code:"\uf79c"},git:{code:"\uf1d3"},"git-alt":{code:"\uf841"},"git-square":{code:"\uf1d2"},github:{code:"\uf09b"},"github-alt":{code:"\uf113"},"github-square":{code:"\uf092"},gitkraken:{code:"\uf3a6"},
gitlab:{code:"\uf296"},gitter:{code:"\uf426"},"glass-cheers":{code:"\uf79f"},"glass-martini":{code:"\uf000"},"glass-martini-alt":{code:"\uf57b"},"glass-whiskey":{code:"\uf7a0"},glasses:{code:"\uf530"},glide:{code:"\uf2a5"},"glide-g":{code:"\uf2a6"},globe:{code:"\uf0ac"},"globe-africa":{code:"\uf57c"},"globe-americas":{code:"\uf57d"},"globe-asia":{code:"\uf57e"},"globe-europe":{code:"\uf7a2"},gofore:{code:"\uf3a7"},"golf-ball":{code:"\uf450"},goodreads:{code:"\uf3a8"},"goodreads-g":{code:"\uf3a9"},
google:{code:"\uf1a0"},"google-drive":{code:"\uf3aa"},"google-play":{code:"\uf3ab"},"google-plus":{code:"\uf2b3"},"google-plus-g":{code:"\uf0d5"},"google-plus-square":{code:"\uf0d4"},"google-wallet":{code:"\uf1ee"},gopuram:{code:"\uf664"},"graduation-cap":{code:"\uf19d"},gratipay:{code:"\uf184"},grav:{code:"\uf2d6"},"greater-than":{code:"\uf531"},"greater-than-equal":{code:"\uf532"},grimace:{code:"\uf57f"},grin:{code:"\uf580"},"grin-alt":{code:"\uf581"},"grin-beam":{code:"\uf582"},"grin-beam-sweat":{code:"\uf583"},
"grin-hearts":{code:"\uf584"},"grin-squint":{code:"\uf585"},"grin-squint-tears":{code:"\uf586"},"grin-stars":{code:"\uf587"},"grin-tears":{code:"\uf588"},"grin-tongue":{code:"\uf589"},"grin-tongue-squint":{code:"\uf58a"},"grin-tongue-wink":{code:"\uf58b"},"grin-wink":{code:"\uf58c"},"grip-horizontal":{code:"\uf58d"},"grip-lines":{code:"\uf7a4"},"grip-lines-vertical":{code:"\uf7a5"},"grip-vertical":{code:"\uf58e"},gripfire:{code:"\uf3ac"},grunt:{code:"\uf3ad"},guitar:{code:"\uf7a6"},gulp:{code:"\uf3ae"},
"h-square":{code:"\uf0fd"},"hacker-news":{code:"\uf1d4"},"hacker-news-square":{code:"\uf3af"},hackerrank:{code:"\uf5f7"},hamburger:{code:"\uf805"},hammer:{code:"\uf6e3"},hamsa:{code:"\uf665"},"hand-holding":{code:"\uf4bd"},"hand-holding-heart":{code:"\uf4be"},"hand-holding-usd":{code:"\uf4c0"},"hand-lizard":{code:"\uf258"},"hand-middle-finger":{code:"\uf806"},"hand-paper":{code:"\uf256"},"hand-peace":{code:"\uf25b"},"hand-point-down":{code:"\uf0a7"},"hand-point-left":{code:"\uf0a5"},"hand-point-right":{code:"\uf0a4"},
"hand-point-up":{code:"\uf0a6"},"hand-pointer":{code:"\uf25a"},"hand-rock":{code:"\uf255"},"hand-scissors":{code:"\uf257"},"hand-spock":{code:"\uf259"},hands:{code:"\uf4c2"},"hands-helping":{code:"\uf4c4"},handshake:{code:"\uf2b5"},hanukiah:{code:"\uf6e6"},"hard-hat":{code:"\uf807"},hashtag:{code:"\uf292"},"hat-cowboy":{code:"\uf8c0"},"hat-cowboy-side":{code:"\uf8c1"},"hat-wizard":{code:"\uf6e8"},hdd:{code:"\uf0a0"},heading:{code:"\uf1dc"},headphones:{code:"\uf025"},"headphones-alt":{code:"\uf58f"},
headset:{code:"\uf590"},heart:{code:"\uf004"},"heart-broken":{code:"\uf7a9"},heartbeat:{code:"\uf21e"},helicopter:{code:"\uf533"},highlighter:{code:"\uf591"},hiking:{code:"\uf6ec"},hippo:{code:"\uf6ed"},hips:{code:"\uf452"},"hire-a-helper":{code:"\uf3b0"},history:{code:"\uf1da"},"hockey-puck":{code:"\uf453"},"holly-berry":{code:"\uf7aa"},home:{code:"\uf015"},hooli:{code:"\uf427"},hornbill:{code:"\uf592"},horse:{code:"\uf6f0"},"horse-head":{code:"\uf7ab"},hospital:{code:"\uf0f8"},"hospital-alt":{code:"\uf47d"},
"hospital-symbol":{code:"\uf47e"},"hot-tub":{code:"\uf593"},hotdog:{code:"\uf80f"},hotel:{code:"\uf594"},hotjar:{code:"\uf3b1"},hourglass:{code:"\uf254"},"hourglass-end":{code:"\uf253"},"hourglass-half":{code:"\uf252"},"hourglass-start":{code:"\uf251"},"house-damage":{code:"\uf6f1"},houzz:{code:"\uf27c"},hryvnia:{code:"\uf6f2"},html5:{code:"\uf13b"},hubspot:{code:"\uf3b2"},"i-cursor":{code:"\uf246"},"ice-cream":{code:"\uf810"},icicles:{code:"\uf7ad"},icons:{code:"\uf86d"},"id-badge":{code:"\uf2c1"},
"id-card":{code:"\uf2c2"},"id-card-alt":{code:"\uf47f"},ideal:{code:"\uf913"},igloo:{code:"\uf7ae"},image:{code:"\uf03e"},images:{code:"\uf302"},imdb:{code:"\uf2d8"},inbox:{code:"\uf01c"},indent:{code:"\uf03c"},industry:{code:"\uf275"},infinity:{code:"\uf534"},info:{code:"\uf129"},"info-circle":{code:"\uf05a"},instagram:{code:"\uf16d"},"instagram-square":{code:"\uf955"},intercom:{code:"\uf7af"},"internet-explorer":{code:"\uf26b"},invision:{code:"\uf7b0"},ioxhost:{code:"\uf208"},italic:{code:"\uf033"},
"itch-io":{code:"\uf83a"},itunes:{code:"\uf3b4"},"itunes-note":{code:"\uf3b5"},java:{code:"\uf4e4"},jedi:{code:"\uf669"},"jedi-order":{code:"\uf50e"},jenkins:{code:"\uf3b6"},jira:{code:"\uf7b1"},joget:{code:"\uf3b7"},joint:{code:"\uf595"},joomla:{code:"\uf1aa"},"journal-whills":{code:"\uf66a"},js:{code:"\uf3b8"},"js-square":{code:"\uf3b9"},jsfiddle:{code:"\uf1cc"},kaaba:{code:"\uf66b"},kaggle:{code:"\uf5fa"},key:{code:"\uf084"},keybase:{code:"\uf4f5"},keyboard:{code:"\uf11c"},keycdn:{code:"\uf3ba"},
khanda:{code:"\uf66d"},kickstarter:{code:"\uf3bb"},"kickstarter-k":{code:"\uf3bc"},kiss:{code:"\uf596"},"kiss-beam":{code:"\uf597"},"kiss-wink-heart":{code:"\uf598"},"kiwi-bird":{code:"\uf535"},korvue:{code:"\uf42f"},landmark:{code:"\uf66f"},language:{code:"\uf1ab"},laptop:{code:"\uf109"},"laptop-code":{code:"\uf5fc"},"laptop-medical":{code:"\uf812"},laravel:{code:"\uf3bd"},lastfm:{code:"\uf202"},"lastfm-square":{code:"\uf203"},laugh:{code:"\uf599"},"laugh-beam":{code:"\uf59a"},"laugh-squint":{code:"\uf59b"},
"laugh-wink":{code:"\uf59c"},"layer-group":{code:"\uf5fd"},leaf:{code:"\uf06c"},leanpub:{code:"\uf212"},lemon:{code:"\uf094"},less:{code:"\uf41d"},"less-than":{code:"\uf536"},"less-than-equal":{code:"\uf537"},"level-down-alt":{code:"\uf3be"},"level-up-alt":{code:"\uf3bf"},"life-ring":{code:"\uf1cd"},lightbulb:{code:"\uf0eb"},line:{code:"\uf3c0"},link:{code:"\uf0c1"},linkedin:{code:"\uf08c"},"linkedin-in":{code:"\uf0e1"},linode:{code:"\uf2b8"},linux:{code:"\uf17c"},"lira-sign":{code:"\uf195"},list:{code:"\uf03a"},
"list-alt":{code:"\uf022"},"list-ol":{code:"\uf0cb"},"list-ul":{code:"\uf0ca"},"location-arrow":{code:"\uf124"},lock:{code:"\uf023"},"lock-open":{code:"\uf3c1"},"long-arrow-alt-down":{code:"\uf309"},"long-arrow-alt-left":{code:"\uf30a"},"long-arrow-alt-right":{code:"\uf30b"},"long-arrow-alt-up":{code:"\uf30c"},"low-vision":{code:"\uf2a8"},"luggage-cart":{code:"\uf59d"},lyft:{code:"\uf3c3"},magento:{code:"\uf3c4"},magic:{code:"\uf0d0"},magnet:{code:"\uf076"},"mail-bulk":{code:"\uf674"},mailchimp:{code:"\uf59e"},
male:{code:"\uf183"},mandalorian:{code:"\uf50f"},map:{code:"\uf279"},"map-marked":{code:"\uf59f"},"map-marked-alt":{code:"\uf5a0"},"map-marker":{code:"\uf041"},"map-marker-alt":{code:"\uf3c5"},"map-pin":{code:"\uf276"},"map-signs":{code:"\uf277"},markdown:{code:"\uf60f"},marker:{code:"\uf5a1"},mars:{code:"\uf222"},"mars-double":{code:"\uf227"},"mars-stroke":{code:"\uf229"},"mars-stroke-h":{code:"\uf22b"},"mars-stroke-v":{code:"\uf22a"},mask:{code:"\uf6fa"},mastodon:{code:"\uf4f6"},maxcdn:{code:"\uf136"},
mdb:{code:"\uf8ca"},medal:{code:"\uf5a2"},medapps:{code:"\uf3c6"},medium:{code:"\uf23a"},"medium-m":{code:"\uf3c7"},medkit:{code:"\uf0fa"},medrt:{code:"\uf3c8"},meetup:{code:"\uf2e0"},megaport:{code:"\uf5a3"},meh:{code:"\uf11a"},"meh-blank":{code:"\uf5a4"},"meh-rolling-eyes":{code:"\uf5a5"},memory:{code:"\uf538"},mendeley:{code:"\uf7b3"},menorah:{code:"\uf676"},mercury:{code:"\uf223"},meteor:{code:"\uf753"},microblog:{code:"\uf91a"},microchip:{code:"\uf2db"},microphone:{code:"\uf130"},"microphone-alt":{code:"\uf3c9"},
"microphone-alt-slash":{code:"\uf539"},"microphone-slash":{code:"\uf131"},microscope:{code:"\uf610"},microsoft:{code:"\uf3ca"},minus:{code:"\uf068"},"minus-circle":{code:"\uf056"},"minus-square":{code:"\uf146"},mitten:{code:"\uf7b5"},mix:{code:"\uf3cb"},mixcloud:{code:"\uf289"},mixer:{code:"\uf956"},mizuni:{code:"\uf3cc"},mobile:{code:"\uf10b"},"mobile-alt":{code:"\uf3cd"},modx:{code:"\uf285"},monero:{code:"\uf3d0"},"money-bill":{code:"\uf0d6"},"money-bill-alt":{code:"\uf3d1"},"money-bill-wave":{code:"\uf53a"},
"money-bill-wave-alt":{code:"\uf53b"},"money-check":{code:"\uf53c"},"money-check-alt":{code:"\uf53d"},monument:{code:"\uf5a6"},moon:{code:"\uf186"},"mortar-pestle":{code:"\uf5a7"},mosque:{code:"\uf678"},motorcycle:{code:"\uf21c"},mountain:{code:"\uf6fc"},mouse:{code:"\uf8cc"},"mouse-pointer":{code:"\uf245"},"mug-hot":{code:"\uf7b6"},music:{code:"\uf001"},napster:{code:"\uf3d2"},neos:{code:"\uf612"},"network-wired":{code:"\uf6ff"},neuter:{code:"\uf22c"},newspaper:{code:"\uf1ea"},nimblr:{code:"\uf5a8"},
node:{code:"\uf419"},"node-js":{code:"\uf3d3"},"not-equal":{code:"\uf53e"},"notes-medical":{code:"\uf481"},npm:{code:"\uf3d4"},ns8:{code:"\uf3d5"},nutritionix:{code:"\uf3d6"},"object-group":{code:"\uf247"},"object-ungroup":{code:"\uf248"},odnoklassniki:{code:"\uf263"},"odnoklassniki-square":{code:"\uf264"},"oil-can":{code:"\uf613"},"old-republic":{code:"\uf510"},om:{code:"\uf679"},opencart:{code:"\uf23d"},openid:{code:"\uf19b"},opera:{code:"\uf26a"},"optin-monster":{code:"\uf23c"},orcid:{code:"\uf8d2"},
osi:{code:"\uf41a"},otter:{code:"\uf700"},outdent:{code:"\uf03b"},page4:{code:"\uf3d7"},pagelines:{code:"\uf18c"},pager:{code:"\uf815"},"paint-brush":{code:"\uf1fc"},"paint-roller":{code:"\uf5aa"},palette:{code:"\uf53f"},palfed:{code:"\uf3d8"},pallet:{code:"\uf482"},"paper-plane":{code:"\uf1d8"},paperclip:{code:"\uf0c6"},"parachute-box":{code:"\uf4cd"},paragraph:{code:"\uf1dd"},parking:{code:"\uf540"},passport:{code:"\uf5ab"},pastafarianism:{code:"\uf67b"},paste:{code:"\uf0ea"},patreon:{code:"\uf3d9"},
pause:{code:"\uf04c"},"pause-circle":{code:"\uf28b"},paw:{code:"\uf1b0"},paypal:{code:"\uf1ed"},peace:{code:"\uf67c"},pen:{code:"\uf304"},"pen-alt":{code:"\uf305"},"pen-fancy":{code:"\uf5ac"},"pen-nib":{code:"\uf5ad"},"pen-square":{code:"\uf14b"},"pencil-alt":{code:"\uf303"},"pencil-ruler":{code:"\uf5ae"},"penny-arcade":{code:"\uf704"},"people-carry":{code:"\uf4ce"},"pepper-hot":{code:"\uf816"},percent:{code:"\uf295"},percentage:{code:"\uf541"},periscope:{code:"\uf3da"},"person-booth":{code:"\uf756"},
phabricator:{code:"\uf3db"},"phoenix-framework":{code:"\uf3dc"},"phoenix-squadron":{code:"\uf511"},phone:{code:"\uf095"},"phone-alt":{code:"\uf879"},"phone-slash":{code:"\uf3dd"},"phone-square":{code:"\uf098"},"phone-square-alt":{code:"\uf87b"},"phone-volume":{code:"\uf2a0"},"photo-video":{code:"\uf87c"},php:{code:"\uf457"},"pied-piper":{code:"\uf2ae"},"pied-piper-alt":{code:"\uf1a8"},"pied-piper-hat":{code:"\uf4e5"},"pied-piper-pp":{code:"\uf1a7"},"pied-piper-square":{code:"\uf91e"},"piggy-bank":{code:"\uf4d3"},
pills:{code:"\uf484"},pinterest:{code:"\uf0d2"},"pinterest-p":{code:"\uf231"},"pinterest-square":{code:"\uf0d3"},"pizza-slice":{code:"\uf818"},"place-of-worship":{code:"\uf67f"},plane:{code:"\uf072"},"plane-arrival":{code:"\uf5af"},"plane-departure":{code:"\uf5b0"},play:{code:"\uf04b"},"play-circle":{code:"\uf144"},playstation:{code:"\uf3df"},plug:{code:"\uf1e6"},plus:{code:"\uf067"},"plus-circle":{code:"\uf055"},"plus-square":{code:"\uf0fe"},podcast:{code:"\uf2ce"},poll:{code:"\uf681"},"poll-h":{code:"\uf682"},
poo:{code:"\uf2fe"},"poo-storm":{code:"\uf75a"},poop:{code:"\uf619"},portrait:{code:"\uf3e0"},"pound-sign":{code:"\uf154"},"power-off":{code:"\uf011"},pray:{code:"\uf683"},"praying-hands":{code:"\uf684"},prescription:{code:"\uf5b1"},"prescription-bottle":{code:"\uf485"},"prescription-bottle-alt":{code:"\uf486"},print:{code:"\uf02f"},procedures:{code:"\uf487"},"product-hunt":{code:"\uf288"},"project-diagram":{code:"\uf542"},pushed:{code:"\uf3e1"},"puzzle-piece":{code:"\uf12e"},python:{code:"\uf3e2"},
qq:{code:"\uf1d6"},qrcode:{code:"\uf029"},question:{code:"\uf128"},"question-circle":{code:"\uf059"},quidditch:{code:"\uf458"},quinscape:{code:"\uf459"},quora:{code:"\uf2c4"},"quote-left":{code:"\uf10d"},"quote-right":{code:"\uf10e"},quran:{code:"\uf687"},"r-project":{code:"\uf4f7"},radiation:{code:"\uf7b9"},"radiation-alt":{code:"\uf7ba"},rainbow:{code:"\uf75b"},random:{code:"\uf074"},"raspberry-pi":{code:"\uf7bb"},ravelry:{code:"\uf2d9"},react:{code:"\uf41b"},reacteurope:{code:"\uf75d"},readme:{code:"\uf4d5"},
rebel:{code:"\uf1d0"},receipt:{code:"\uf543"},"record-vinyl":{code:"\uf8d9"},recycle:{code:"\uf1b8"},"red-river":{code:"\uf3e3"},reddit:{code:"\uf1a1"},"reddit-alien":{code:"\uf281"},"reddit-square":{code:"\uf1a2"},redhat:{code:"\uf7bc"},redo:{code:"\uf01e"},"redo-alt":{code:"\uf2f9"},registered:{code:"\uf25d"},"remove-format":{code:"\uf87d"},renren:{code:"\uf18b"},reply:{code:"\uf3e5"},"reply-all":{code:"\uf122"},replyd:{code:"\uf3e6"},republican:{code:"\uf75e"},researchgate:{code:"\uf4f8"},resolving:{code:"\uf3e7"},
restroom:{code:"\uf7bd"},retweet:{code:"\uf079"},rev:{code:"\uf5b2"},ribbon:{code:"\uf4d6"},ring:{code:"\uf70b"},road:{code:"\uf018"},robot:{code:"\uf544"},rocket:{code:"\uf135"},rocketchat:{code:"\uf3e8"},rockrms:{code:"\uf3e9"},route:{code:"\uf4d7"},rss:{code:"\uf09e"},"rss-square":{code:"\uf143"},"ruble-sign":{code:"\uf158"},ruler:{code:"\uf545"},"ruler-combined":{code:"\uf546"},"ruler-horizontal":{code:"\uf547"},"ruler-vertical":{code:"\uf548"},running:{code:"\uf70c"},"rupee-sign":{code:"\uf156"},
"sad-cry":{code:"\uf5b3"},"sad-tear":{code:"\uf5b4"},safari:{code:"\uf267"},salesforce:{code:"\uf83b"},sass:{code:"\uf41e"},satellite:{code:"\uf7bf"},"satellite-dish":{code:"\uf7c0"},save:{code:"\uf0c7"},schlix:{code:"\uf3ea"},school:{code:"\uf549"},screwdriver:{code:"\uf54a"},scribd:{code:"\uf28a"},scroll:{code:"\uf70e"},"sd-card":{code:"\uf7c2"},search:{code:"\uf002"},"search-dollar":{code:"\uf688"},"search-location":{code:"\uf689"},"search-minus":{code:"\uf010"},"search-plus":{code:"\uf00e"},searchengin:{code:"\uf3eb"},
seedling:{code:"\uf4d8"},sellcast:{code:"\uf2da"},sellsy:{code:"\uf213"},server:{code:"\uf233"},servicestack:{code:"\uf3ec"},shapes:{code:"\uf61f"},share:{code:"\uf064"},"share-alt":{code:"\uf1e0"},"share-alt-square":{code:"\uf1e1"},"share-square":{code:"\uf14d"},"shekel-sign":{code:"\uf20b"},"shield-alt":{code:"\uf3ed"},ship:{code:"\uf21a"},"shipping-fast":{code:"\uf48b"},shirtsinbulk:{code:"\uf214"},"shoe-prints":{code:"\uf54b"},shopify:{code:"\uf957"},"shopping-bag":{code:"\uf290"},"shopping-basket":{code:"\uf291"},
"shopping-cart":{code:"\uf07a"},shopware:{code:"\uf5b5"},shower:{code:"\uf2cc"},"shuttle-van":{code:"\uf5b6"},sign:{code:"\uf4d9"},"sign-in-alt":{code:"\uf2f6"},"sign-language":{code:"\uf2a7"},"sign-out-alt":{code:"\uf2f5"},signal:{code:"\uf012"},signature:{code:"\uf5b7"},"sim-card":{code:"\uf7c4"},simplybuilt:{code:"\uf215"},sistrix:{code:"\uf3ee"},sitemap:{code:"\uf0e8"},sith:{code:"\uf512"},skating:{code:"\uf7c5"},sketch:{code:"\uf7c6"},skiing:{code:"\uf7c9"},"skiing-nordic":{code:"\uf7ca"},skull:{code:"\uf54c"},
"skull-crossbones":{code:"\uf714"},skyatlas:{code:"\uf216"},skype:{code:"\uf17e"},slack:{code:"\uf198"},"slack-hash":{code:"\uf3ef"},slash:{code:"\uf715"},sleigh:{code:"\uf7cc"},"sliders-h":{code:"\uf1de"},slideshare:{code:"\uf1e7"},smile:{code:"\uf118"},"smile-beam":{code:"\uf5b8"},"smile-wink":{code:"\uf4da"},smog:{code:"\uf75f"},smoking:{code:"\uf48d"},"smoking-ban":{code:"\uf54d"},sms:{code:"\uf7cd"},snapchat:{code:"\uf2ab"},"snapchat-ghost":{code:"\uf2ac"},"snapchat-square":{code:"\uf2ad"},snowboarding:{code:"\uf7ce"},
snowflake:{code:"\uf2dc"},snowman:{code:"\uf7d0"},snowplow:{code:"\uf7d2"},socks:{code:"\uf696"},"solar-panel":{code:"\uf5ba"},sort:{code:"\uf0dc"},"sort-alpha-down":{code:"\uf15d"},"sort-alpha-down-alt":{code:"\uf881"},"sort-alpha-up":{code:"\uf15e"},"sort-alpha-up-alt":{code:"\uf882"},"sort-amount-down":{code:"\uf160"},"sort-amount-down-alt":{code:"\uf884"},"sort-amount-up":{code:"\uf161"},"sort-amount-up-alt":{code:"\uf885"},"sort-down":{code:"\uf0dd"},"sort-numeric-down":{code:"\uf162"},"sort-numeric-down-alt":{code:"\uf886"},
"sort-numeric-up":{code:"\uf163"},"sort-numeric-up-alt":{code:"\uf887"},"sort-up":{code:"\uf0de"},soundcloud:{code:"\uf1be"},sourcetree:{code:"\uf7d3"},spa:{code:"\uf5bb"},"space-shuttle":{code:"\uf197"},speakap:{code:"\uf3f3"},"speaker-deck":{code:"\uf83c"},"spell-check":{code:"\uf891"},spider:{code:"\uf717"},spinner:{code:"\uf110"},splotch:{code:"\uf5bc"},spotify:{code:"\uf1bc"},"spray-can":{code:"\uf5bd"},square:{code:"\uf0c8"},"square-full":{code:"\uf45c"},"square-root-alt":{code:"\uf698"},squarespace:{code:"\uf5be"},
"stack-exchange":{code:"\uf18d"},"stack-overflow":{code:"\uf16c"},stackpath:{code:"\uf842"},stamp:{code:"\uf5bf"},star:{code:"\uf005"},"star-and-crescent":{code:"\uf699"},"star-half":{code:"\uf089"},"star-half-alt":{code:"\uf5c0"},"star-of-david":{code:"\uf69a"},"star-of-life":{code:"\uf621"},staylinked:{code:"\uf3f5"},steam:{code:"\uf1b6"},"steam-square":{code:"\uf1b7"},"steam-symbol":{code:"\uf3f6"},"step-backward":{code:"\uf048"},"step-forward":{code:"\uf051"},stethoscope:{code:"\uf0f1"},"sticker-mule":{code:"\uf3f7"},
"sticky-note":{code:"\uf249"},stop:{code:"\uf04d"},"stop-circle":{code:"\uf28d"},stopwatch:{code:"\uf2f2"},store:{code:"\uf54e"},"store-alt":{code:"\uf54f"},strava:{code:"\uf428"},stream:{code:"\uf550"},"street-view":{code:"\uf21d"},strikethrough:{code:"\uf0cc"},stripe:{code:"\uf429"},"stripe-s":{code:"\uf42a"},stroopwafel:{code:"\uf551"},studiovinari:{code:"\uf3f8"},stumbleupon:{code:"\uf1a4"},"stumbleupon-circle":{code:"\uf1a3"},subscript:{code:"\uf12c"},subway:{code:"\uf239"},suitcase:{code:"\uf0f2"},
"suitcase-rolling":{code:"\uf5c1"},sun:{code:"\uf185"},superpowers:{code:"\uf2dd"},superscript:{code:"\uf12b"},supple:{code:"\uf3f9"},surprise:{code:"\uf5c2"},suse:{code:"\uf7d6"},swatchbook:{code:"\uf5c3"},swift:{code:"\uf8e1"},swimmer:{code:"\uf5c4"},"swimming-pool":{code:"\uf5c5"},symfony:{code:"\uf83d"},synagogue:{code:"\uf69b"},sync:{code:"\uf021"},"sync-alt":{code:"\uf2f1"},syringe:{code:"\uf48e"},table:{code:"\uf0ce"},"table-tennis":{code:"\uf45d"},tablet:{code:"\uf10a"},"tablet-alt":{code:"\uf3fa"},
tablets:{code:"\uf490"},"tachometer-alt":{code:"\uf3fd"},tag:{code:"\uf02b"},tags:{code:"\uf02c"},tape:{code:"\uf4db"},tasks:{code:"\uf0ae"},taxi:{code:"\uf1ba"},teamspeak:{code:"\uf4f9"},teeth:{code:"\uf62e"},"teeth-open":{code:"\uf62f"},telegram:{code:"\uf2c6"},"telegram-plane":{code:"\uf3fe"},"temperature-high":{code:"\uf769"},"temperature-low":{code:"\uf76b"},"tencent-weibo":{code:"\uf1d5"},tenge:{code:"\uf7d7"},terminal:{code:"\uf120"},"text-height":{code:"\uf034"},"text-width":{code:"\uf035"},
th:{code:"\uf00a"},"th-large":{code:"\uf009"},"th-list":{code:"\uf00b"},"the-red-yeti":{code:"\uf69d"},"theater-masks":{code:"\uf630"},themeco:{code:"\uf5c6"},themeisle:{code:"\uf2b2"},thermometer:{code:"\uf491"},"thermometer-empty":{code:"\uf2cb"},"thermometer-full":{code:"\uf2c7"},"thermometer-half":{code:"\uf2c9"},"thermometer-quarter":{code:"\uf2ca"},"thermometer-three-quarters":{code:"\uf2c8"},"think-peaks":{code:"\uf731"},"thumbs-down":{code:"\uf165"},"thumbs-up":{code:"\uf164"},thumbtack:{code:"\uf08d"},
"ticket-alt":{code:"\uf3ff"},times:{code:"\uf00d"},"times-circle":{code:"\uf057"},tint:{code:"\uf043"},"tint-slash":{code:"\uf5c7"},tired:{code:"\uf5c8"},"toggle-off":{code:"\uf204"},"toggle-on":{code:"\uf205"},toilet:{code:"\uf7d8"},"toilet-paper":{code:"\uf71e"},toolbox:{code:"\uf552"},tools:{code:"\uf7d9"},tooth:{code:"\uf5c9"},torah:{code:"\uf6a0"},"torii-gate":{code:"\uf6a1"},tractor:{code:"\uf722"},"trade-federation":{code:"\uf513"},trademark:{code:"\uf25c"},"traffic-light":{code:"\uf637"},
trailer:{code:"\uf941"},train:{code:"\uf238"},tram:{code:"\uf7da"},transgender:{code:"\uf224"},"transgender-alt":{code:"\uf225"},trash:{code:"\uf1f8"},"trash-alt":{code:"\uf2ed"},"trash-restore":{code:"\uf829"},"trash-restore-alt":{code:"\uf82a"},tree:{code:"\uf1bb"},trello:{code:"\uf181"},tripadvisor:{code:"\uf262"},trophy:{code:"\uf091"},truck:{code:"\uf0d1"},"truck-loading":{code:"\uf4de"},"truck-monster":{code:"\uf63b"},"truck-moving":{code:"\uf4df"},"truck-pickup":{code:"\uf63c"},tshirt:{code:"\uf553"},
tty:{code:"\uf1e4"},tumblr:{code:"\uf173"},"tumblr-square":{code:"\uf174"},tv:{code:"\uf26c"},twitch:{code:"\uf1e8"},twitter:{code:"\uf099"},"twitter-square":{code:"\uf081"},typo3:{code:"\uf42b"},uber:{code:"\uf402"},ubuntu:{code:"\uf7df"},uikit:{code:"\uf403"},umbraco:{code:"\uf8e8"},umbrella:{code:"\uf0e9"},"umbrella-beach":{code:"\uf5ca"},underline:{code:"\uf0cd"},undo:{code:"\uf0e2"},"undo-alt":{code:"\uf2ea"},uniregistry:{code:"\uf404"},unity:{code:"\uf949"},"universal-access":{code:"\uf29a"},
university:{code:"\uf19c"},unlink:{code:"\uf127"},unlock:{code:"\uf09c"},"unlock-alt":{code:"\uf13e"},untappd:{code:"\uf405"},upload:{code:"\uf093"},ups:{code:"\uf7e0"},usb:{code:"\uf287"},user:{code:"\uf007"},"user-alt":{code:"\uf406"},"user-alt-slash":{code:"\uf4fa"},"user-astronaut":{code:"\uf4fb"},"user-check":{code:"\uf4fc"},"user-circle":{code:"\uf2bd"},"user-clock":{code:"\uf4fd"},"user-cog":{code:"\uf4fe"},"user-edit":{code:"\uf4ff"},"user-friends":{code:"\uf500"},"user-graduate":{code:"\uf501"},
"user-injured":{code:"\uf728"},"user-lock":{code:"\uf502"},"user-md":{code:"\uf0f0"},"user-minus":{code:"\uf503"},"user-ninja":{code:"\uf504"},"user-nurse":{code:"\uf82f"},"user-plus":{code:"\uf234"},"user-secret":{code:"\uf21b"},"user-shield":{code:"\uf505"},"user-slash":{code:"\uf506"},"user-tag":{code:"\uf507"},"user-tie":{code:"\uf508"},"user-times":{code:"\uf235"},users:{code:"\uf0c0"},"users-cog":{code:"\uf509"},usps:{code:"\uf7e1"},ussunnah:{code:"\uf407"},"utensil-spoon":{code:"\uf2e5"},utensils:{code:"\uf2e7"},
vaadin:{code:"\uf408"},"vector-square":{code:"\uf5cb"},venus:{code:"\uf221"},"venus-double":{code:"\uf226"},"venus-mars":{code:"\uf228"},viacoin:{code:"\uf237"},viadeo:{code:"\uf2a9"},"viadeo-square":{code:"\uf2aa"},vial:{code:"\uf492"},vials:{code:"\uf493"},viber:{code:"\uf409"},video:{code:"\uf03d"},"video-slash":{code:"\uf4e2"},vihara:{code:"\uf6a7"},vimeo:{code:"\uf40a"},"vimeo-square":{code:"\uf194"},"vimeo-v":{code:"\uf27d"},vine:{code:"\uf1ca"},vk:{code:"\uf189"},vnv:{code:"\uf40b"},voicemail:{code:"\uf897"},
"volleyball-ball":{code:"\uf45f"},"volume-down":{code:"\uf027"},"volume-mute":{code:"\uf6a9"},"volume-off":{code:"\uf026"},"volume-up":{code:"\uf028"},"vote-yea":{code:"\uf772"},"vr-cardboard":{code:"\uf729"},vuejs:{code:"\uf41f"},walking:{code:"\uf554"},wallet:{code:"\uf555"},warehouse:{code:"\uf494"},water:{code:"\uf773"},"wave-square":{code:"\uf83e"},waze:{code:"\uf83f"},weebly:{code:"\uf5cc"},weibo:{code:"\uf18a"},weight:{code:"\uf496"},"weight-hanging":{code:"\uf5cd"},weixin:{code:"\uf1d7"},
whatsapp:{code:"\uf232"},"whatsapp-square":{code:"\uf40c"},wheelchair:{code:"\uf193"},whmcs:{code:"\uf40d"},wifi:{code:"\uf1eb"},"wikipedia-w":{code:"\uf266"},wind:{code:"\uf72e"},"window-close":{code:"\uf410"},"window-maximize":{code:"\uf2d0"},"window-minimize":{code:"\uf2d1"},"window-restore":{code:"\uf2d2"},windows:{code:"\uf17a"},"wine-bottle":{code:"\uf72f"},"wine-glass":{code:"\uf4e3"},"wine-glass-alt":{code:"\uf5ce"},wix:{code:"\uf5cf"},"wizards-of-the-coast":{code:"\uf730"},"wolf-pack-battalion":{code:"\uf514"},
"won-sign":{code:"\uf159"},wordpress:{code:"\uf19a"},"wordpress-simple":{code:"\uf411"},wpbeginner:{code:"\uf297"},wpexplorer:{code:"\uf2de"},wpforms:{code:"\uf298"},wpressr:{code:"\uf3e4"},wrench:{code:"\uf0ad"},"x-ray":{code:"\uf497"},xbox:{code:"\uf412"},xing:{code:"\uf168"},"xing-square":{code:"\uf169"},"y-combinator":{code:"\uf23b"},yahoo:{code:"\uf19e"},yammer:{code:"\uf840"},yandex:{code:"\uf413"},"yandex-international":{code:"\uf414"},yarn:{code:"\uf7e3"},yelp:{code:"\uf1e9"},"yen-sign":{code:"\uf157"},
"yin-yang":{code:"\uf6ad"},yoast:{code:"\uf2b1"},youtube:{code:"\uf167"},"youtube-square":{code:"\uf431"},zhihu:{code:"\uf63f"}});kt.Icons=gP;kt.Icons=gP;kt.Icons=gP;var ze=lively.FreezerRuntime.recorderFor("lively.morphic/rendering/renderer.js");ze.vdom=UI;ze.promise=hg;ze.arr=Mf;ze.tree=ty;ze.obj=ng;ze.string=Th;ze.addOrChangeCSSDeclaration=Aq;ze.addOrChangeLinkedCSS=kd;ze.defaultStyle=Es;ze.renderGradient=Wx;ze.defaultAttributes=Fs;ze.defaultCSS="\n\n/*-=- html fixes -=-*/\n\nhtml {\n  overflow: visible;\n}\n\ntextarea.lively-text-input.debug {\n  z-index: 20 !important;\n  opacity: 1 !important;\n  background: rgba(0,255,0,0.5) !important;\n}\n\n.no-html-select {\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -khtml-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n\n.hiddenScrollbar::-webkit-scrollbar {\n  /* This is the magic bit */\n  display: none;\n}\n\n\n/*-=- generic morphic -=-*/\n\n.Morph {\n  outline: none;\n  /*for aliasing issue in chrome: http://stackoverflow.com/questions/6492027/css-transform-jagged-edges-in-chrome*/\n  /* -webkit-backface-visibility: hidden; */\n\n  /*include border size in extent of element*/\n  box-sizing: border-box;\n\n  /*don't use dom selection on morphs*/\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -khtml-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n\n.Morph img {\n  -moz-user-select: none;\n}\n\n.Tooltip {\n  z-index: 3;\n}\n\n.Hand {\n  z-index: 1;\n}\n\n/*-=- halos -=-*/\n\n.Halo {\n  z-index: 2;\n}\n\n.ProportionalLayoutHalo, .FlexLayoutHalo, .GridLayoutHalo, .TilingLayoutHalo {\n  z-index: auto;\n}\n\n.HaloItem:not(.NameHaloItem) {\n  /*FIXME: we shouldn't need to hardcode the size...*/\n  line-height: 24px !important;\n  text-align: center;\n  vertical-align: middle;\n}\n\n.halo-mesh {\n  background-color:transparent;\n  background-image: linear-gradient(rgba(0,0,0,.1) 2px, transparent 2px),\n  linear-gradient(90deg, rgba(0,0,0,.1) 2px, transparent 2px),\n  linear-gradient(rgba(0,0,0,.1) 1px, transparent 1px),\n  linear-gradient(90deg, rgba(0,0,0,.1) 1px, transparent 1px);\n  background-size:100px 100px, 100px 100px, 10px 10px, 10px 10px;\n  background-position:-2px -2px, -2px -2px, -1px -1px, -1px -1px;\n}\n\n/*-=- text -=-*/\n\n.center-text {\n  text-align: center;\n}\n\n.v-center-text {\n  position: relative;\n  top: 50%;\n}\n\ndiv.text-layer span {\n  line-height: normal;\n}\n\n/*-=- text -=-*/\n\n.Label span {\n  white-space: pre;\n  float: left;\n  line-height: initial;\n  -moz-user-select: none;\n}\n\n.Text .annotation {\n  text-align: right;\n  position: absolute;\n  right: 0;\n}\n\n.Label .annotation {\n/*  vertical-align: middle;\n  height: 100%;*/\n  /*vertical align*/\n  float: right;\n  position: relative;\n  top: 50%;\n  text-align: right;\n}\n\n.truncated-text {\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n/*-=- input elements -=-*/\n\ninput::-webkit-input-placeholder {\n  color: rgb(202, 202, 202);\n}\ninput::-moz-placeholder {\n  color: rgb(202, 202, 202);\n}\ninput:-ms-input-placeholder {\n  color: rgb(202, 202, 202);\n}\ninput:-moz-placeholder {\n  color: rgb(202, 202, 202);\n}\ninput:placeholder {\n  color: rgb(202, 202, 202);\n}\n\n/*-=- input elements -=-*/\n.Morph svg .path-point {\n  cursor: move; /* fallback if grab cursor is unsupported */\n  cursor: grab;\n  cursor: -moz-grab;\n  cursor: -webkit-grab;\n  fill: red;\n}\n\n";
ze.pathAttributes=Hz;ze.svgAttributes=Gz;ze.renderMorph=Iz;ze.Transform=kl;ze.pt=Ei;ze.getSvgVertices=Vx;ze.config=em;var hP=ze.vdom;ze.h=hP.h;ze.diff=hP.diff;ze.patch=hP.patch;ze.createNode=hP.create;ze.svgNs="http://www.w3.org/2000/svg";ze.CanvasHook=function(d){this.canvasMorph=d};ze.CanvasHook.prototype.hook=function(d,h,n){this.canvasMorph.afterRender(d,this.canvasMorph._canvas!==d&&"CANVAS"==d.tagName)};ze.InitStroke=function(d,h,n){this.path=d;this.renderer=h;this.reverse=n};ze.InitStroke.prototype.hook=
function(d,h,n){h=this.path.drawnProportion||0;0!=h&&(d.setAttribute("stroke-width",this.path.borderWidth.valueOf()+1),d.setAttribute("stroke-dasharray",d.getTotalLength()),d.setAttribute("stroke-dashoffset",d.getTotalLength()*(this.reverse?1-h:-1+(1-h))))};var iP=function(d){var h=lively.FreezerRuntime.recorderFor("lively.morphic/rendering/renderer.js"),n=h.hasOwnProperty("Renderer")&&"function"===typeof h.Renderer?h.Renderer:h.Renderer=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return Pb(n,d,[{key:Symbol.for("lively-instance-initialize"),value:function(b,e,l){if(!b||!b.isMorph)throw Error("Trying to initialize renderer with an invalid world morph: "+b);if(!(e&&"nodeType"in e))throw Error("Trying to initialize renderer with an invalid root node: "+e);l||(l={window:System.global,document:e.ownerDocument});this.worldMorph=b;b._renderer=this;this.rootNode=e;this.domNode=null;this.domEnvironment=l;this.renderMap=new WeakMap;this.fixedMorphNodeMap=new Map;this.renderWorldLoopLater=
this.renderWorldLoopProcess=null;this.requestAnimationFrame=l.window.requestAnimationFrame.bind(l.window)}},{key:"clear",value:function(){var b=this,e,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){switch(a.nextAddress){case 1:return e=b.domNode,a.setCatchFinallyBlocks(2),a.yield(b.stopRenderWorldLoop(),4);case 4:a.leaveTryBlock(3);break;case 2:a.enterCatchBlock();case 3:e&&(l=e.parentNode,l.removeChild(e),[].concat($jscomp.arrayFromIterable(b.fixedMorphNodeMap.values())).forEach(function(f){return l.removeChild(f)})),
b.domNode=null,b.renderMap=new WeakMap,a.jumpToEnd()}})}},{key:"ensureDefaultCSS",value:function(){var b=this;return ze.promise.waitFor(3E3,function(){return b.domNode.ownerDocument}).then(function(e){return Promise.all([ze.addOrChangeCSSDeclaration("lively-morphic-css",ze.defaultCSS,e),ze.addOrChangeLinkedCSS("lively-ibm-plex",ze.config.css.ibmPlex),ze.addOrChangeLinkedCSS("lively-font-awesome",ze.config.css.fontAwesome,e,!1),ze.addOrChangeLinkedCSS("lively-font-inconsolata",ze.config.css.inconsolata,
e,!1)])})}},{key:"startRenderWorldLoop",value:function(){var b=this;this._stopped=!1;this._renderWorldLoopLater=null;this.renderWorldLoopProcess=this.requestAnimationFrame(function(){return b.startRenderWorldLoop()});return this.renderStep()}},{key:"stopRenderWorldLoop",value:function(){var b=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){b._stopped=!0;b.domEnvironment.window.cancelAnimationFrame(b.renderWorldLoopProcess);b.renderWorldLoopProcess=null;b.domEnvironment.window.cancelAnimationFrame(b.renderWorldLoopLater);
b.renderWorldLoopLater=null;return e.yield(ze.promise.waitFor(2E3,function(){return!b.worldMorph.needsRerender()}),0)})}},{key:"renderLater",value:function(b){var e=this;this.renderWorldLoopLaterCounter=void 0===b?10:b;this.renderWorldLoopLater||this._stopped||(this.renderWorldLoopLater=this.requestAnimationFrame(function(){e.renderWorldLoopLater=null;0<e.renderWorldLoopLaterCounter&&e.renderLater(e.renderWorldLoopLaterCounter-1);try{e.renderStep()}catch(l){console.error("Error rendering morphs:",
l)}}))}},{key:"renderStep",value:function(){this.worldMorph.renderAsRoot(this);return this}},{key:"getNodeForMorph",value:function(b){var e="#"+ze.string.regExpEscape(b.id),l=this.domNode&&this.domNode.querySelector(e);this.domNode&&this.domNode.id==b.id&&(l=this.domNode);if(l)return l;b=$jscomp.makeIterator(this.fixedMorphNodeMap.values());for(l=b.next();!l.done;l=b.next())if(l=l.value.querySelector(e))return l;return null}},{key:"getMorphForNode",value:function(b){return this.worldMorph?this.worldMorph.withAllSubmorphsDetect(function(e){return e.id===
b.id}):null}},{key:"render",value:function(b){if(!b.needsRerender()){var e=this.renderMap.get(b);if(e)return e}b.aboutToRender(this);e=b.render(this);this.renderMap.set(b,e);return e}},{key:"renderAsFixed",value:function(b){var e=this.render(b);b.isHTMLMorph||(e.properties.style.position="fixed");if(this.worldMorph.isEmbedded){b=this.domNode.getBoundingClientRect();var l=e.properties.style,a=l.left;e.properties.style.top=Number.parseInt(l.top)+b.y+"px";e.properties.style.left=Number.parseInt(a)+b.x+
"px"}return e}},{key:"renderFixedMorphs",value:function(b,e){var l=this;e=this.domNode;var a=this.fixedMorphNodeMap;if((b.length||a.size)&&e&&e.parentNode){e=e.parentNode;for(var f=$jscomp.makeIterator(a),m=f.next();!m.done;m=f.next()){var r=$jscomp.makeIterator(m.value);m=r.next().value;r=r.next().value;b.includes(m)||(r.parentNode&&r.parentNode.removeChild(r),a.delete(m))}m=b.map(function(I){return a.get(I)});var v=b.map(function(I){return I.id});f=[].concat($jscomp.arrayFromIterable(e.children)).map(function(I){return I.id}).filter(function(I){return v.includes(I)});
f=!ze.arr.equals(v,f);var x=new WeakMap;if(f){var y=new WeakMap;r=ze.arr.compact(ze.arr.flatten(b.map(function(I){return I.withAllSubmorphsDo(function(J){return l.getNodeForMorph(J)})})));r.forEach(function(I){return y.set(I,I.scrollTop)});m.map(function(I){return I&&I.parentNode&&I.parentNode.removeChild(I)});r.forEach(function(I){y.get(I)!=I.scrollTop&&x.set(I,y.get(I))})}b=$jscomp.makeIterator(b);for(m=b.next();!m.done;m=b.next()){m=m.value;r=this.renderMap.get(m)||this.renderAsFixed(m);var E=
this.renderAsFixed(m);E=ze.diff(r,E);var F=a.get(m);F||(F=ze.createNode(r,this.domEnvironment),a.set(m,F));F.parentNode||e.appendChild(F);f&&m.withAllSubmorphsDo(function(I){return l.getNodeForMorph(I)}).forEach(function(I){x.has(I)&&(I.scrollTop=x.get(I))});ze.patch(F,E)}}}},{key:"renderMorph",value:function(b){var e=this.renderSubmorphs(b);return ze.h("div",Object.assign({},ze.defaultAttributes(b,this),{style:ze.defaultStyle(b)}),e)}},{key:"renderSubmorphs",value:function(b){return this.renderSelectedSubmorphs(b,
b.submorphs)}},{key:"renderSelectedSubmorphs",value:function(b,e){var l=b.borderWidthLeft,a=b.borderWidthTop,f=b.origin,m=f.x;f=f.y;for(var r=e.length-1,v=Array(r+1);0<=r;r--)v[r]=this.render(e[r]);e={};return ze.h("div",{style:Object.assign({position:"absolute",left:m-(b.isPath?0:l)+"px",top:f-(b.isPath?0:a)+"px"},b.isPolygon?Object.assign({height:"100%",width:"100%",overflow:b.clipMode},"visible"!==b.clipMode?(e[navigator.userAgent.includes("AppleWebKit")?"-webkit-clip-path":"clip-path"]="url(#clipPath"+
b.id+")",e):{}):{})},v)}},{key:"renderWorld",value:function(b){for(var e=b.submorphs,l=[],a=[],f=0;f<e.length;f++){var m=e[f];m.hasFixedPosition?a.push(m):l.push(m)}e=this.renderSelectedSubmorphs(b,l);b=ze.h("div",Object.assign({},ze.defaultAttributes(b,this),{style:ze.defaultStyle(b)}),e);b.fixedMorphs=a;return b}},{key:"renderImage",value:function(b){var e=b.imageUrl;if(e.startsWith("data:")){var l=e.indexOf(","),a=e.substring(5,l),f=$jscomp.makeIterator(a.split(";"));a=f.next().value;f=f.next().value;
l=e.substring(l+1);"base64"!==f&&(e=ze.string.createDataURI(l,a))}return ze.h("div",Object.assign({},ze.defaultAttributes(b,this),{style:ze.defaultStyle(b)}),[ze.h("img",{src:e,alt:b.tooltip||"",draggable:!1,style:{"pointer-events":"none",position:"absolute",left:0,width:"100%",height:"100%"}}),this.renderSubmorphs(b)])}},{key:"renderCanvas",value:function(b){return ze.h("div",Object.assign({},ze.defaultAttributes(b,this),{style:ze.defaultStyle(b)}),[ze.h("canvas",{width:b.width,height:b.height,style:{"pointer-events":"none",
position:"absolute"},canvasHook:new ze.CanvasHook(b)}),this.renderSubmorphs(b)])}},{key:"renderCheckBox",value:function(b){return ze.h("div",Object.assign({},ze.defaultAttributes(b,this),{style:ze.defaultStyle(b)}),[ze.h("input",{type:"checkbox",checked:b.checked,disabled:!b.active,draggable:!1,style:{"pointer-events":"none",width:"15px",height:"15px",position:"absolute"}}),this.renderSubmorphs(b)])}},{key:"renderPath",value:function(b){var e=b.startMarker,l=b.endMarker,a=b.showControlPoints,f=ze.getSvgVertices(b.vertices),
m=ze.h("path",Object.assign({namespace:ze.svgNs,id:"svg"+b.id},ze.pathAttributes(b))),r=ze.h("mask",{namespace:ze.svgNs,id:"mask"+b.id},[ze.h("rect",{namespace:ze.svgNs,attributes:{fill:"white",x:0,y:0,width:b.width+20,height:b.height+20}}),ze.h("path",{namespace:ze.svgNs,initStroke:new ze.InitStroke(b,this,!0),attributes:{d:f,stroke:"black",fill:"none"}}),ze.h("path",{namespace:ze.svgNs,initStroke:new ze.InitStroke(b,this,!1),attributes:{d:f,stroke:"white",fill:"none"}})]);f=[ze.h("clipPath",{namespace:ze.svgNs,
id:"clipPath"+b.id},ze.h("path",{namespace:ze.svgNs,attributes:{d:f,fill:"white"}})),r];e&&(e.id||(e.id="start-marker"),m.properties.attributes["marker-start"]="url(#"+b.id+"-"+e.id+")",f=[],f.push(this._renderPath_Marker(b,e)));l&&(l.id||(l.id="end-marker"),m.properties.attributes["marker-end"]="url(#"+b.id+"-"+l.id+")",f||(f=[]),f.push(this._renderPath_Marker(b,l)));var v;a&&(v=ze.h("g",{namespace:ze.svgNs},this._renderPath_ControlPoints(b)));return this.renderSvgMorph(b,m,f,v)}},{key:"_renderPath_ControlPoints",
value:function(b,e){function l(Y,W,da,va,za,L){var Z=va?12:Math.min(8,Math.max(3,m));da="path-point path-point-"+da;va=va?"orange":r;"string"===typeof za&&(da+="-"+za);L&&(Z=Math.max(3,Math.ceil(Z/2)));return L?ze.h("circle",{namespace:ze.svgNs,style:{fill:"white","stroke-width":2,stroke:va},attributes:{class:da,cx:Y,cy:W,r:Z}}):ze.h("circle",{namespace:ze.svgNs,style:{fill:va},attributes:{class:da,cx:Y,cy:W,r:Z}})}var a=b.vertices;e=b.borderWidth;var f=b.showControlPoints;b=b._controlPointDrag;var m=
0==e?6:e+2,r="red";e=[];if("object"===typeof f){var v=f.radius;(f=f.fill)&&(r=String(f));"number"===typeof v&&(m=v)}if(a.length){f=0;var x=a[0];v=x.x;var y=x.y;x=x.controlPoints.next;var E=b&&b.maybeMerge&&b.maybeMerge.includes(f);e.push(l(v,y,f,E));for(f=1;f<a.length-1;f++){var F=a[f];E=F.isSmooth;var I=F.x,J=F.y,P=F.controlPoints;F=P.previous;P=P.next;var N=b&&b.maybeMerge&&b.maybeMerge.includes(f);E?e.push(l(I,J,f,N),l(v+x.x,y+x.y,f-1,!1,"control-2",!0),l(I+F.x,J+F.y,f,!1,"control-1",!0)):e.push(l(I,
J,f,N));v=I;y=J;x=P}J=a[a.length-1];a=J.isSmooth;E=J.x;I=J.y;J=J.controlPoints.previous;b=b&&b.maybeMerge&&b.maybeMerge.includes(f);a?e.push(l(E,I,f,b),l(v+x.x,y+x.y,f-1,!1,"control-2",!0),l(E+J.x,I+J.y,f,!1,"control-1",!0)):e.push(l(E,I,f,b))}return e}},{key:"_renderPath_Marker",value:function(b,e){function l(a){var f=a.tagName,m=a.id,r=a.children,v=a.style;r=r?r.map(l):void 0;m&&(m=b.id+"-"+m);return ze.h(f,{namespace:ze.svgNs,id:m,style:v,attributes:ze.obj.dissoc(a,["tagName","id","children","style"])},
r)}return l(e)}},{key:"renderSvgMorph",value:function(b,e,l,a){a=void 0===a?[]:a;var f=ze.svgAttributes(b),m=b.innerBounds(),r=m.width;m=m.height;var v,x=[];b.fill&&b.fill.isGradient&&(v||(v=[]),v.push(ze.renderGradient("fill"+b.id,b.extent,b.fill)));b.borderColor&&b.borderColor.valueOf().isGradient&&(v||(v=[]),v.push(ze.renderGradient("borderColor"+b.id,b.extent,b.borderColor)));l&&l.length&&(v||(v=[]),v.push.apply(v,$jscomp.arrayFromIterable(l)));x.push(e);v&&x.push(ze.h("defs",{namespace:ze.svgNs},
v));e=ze.obj.select(ze.defaultStyle(b),"position filter display opacity transform top left transformOrigin cursor overflow".split(" "));return ze.h("div",Object.assign({},ze.defaultAttributes(b,this),{style:Object.assign({},e,{width:r+"px",height:m+"px","pointer-events":b.reactsToPointer?"auto":"none"})}),[ze.h("svg",Object.assign({namespace:ze.svgNs,version:"1.1",style:{position:"absolute","stroke-linejoin":b.cornerStyle||"mint","stroke-linecap":b.endStyle||"round",overflow:"visible"}},f),x),this.renderSubmorphs(b),
ze.h("svg",Object.assign({namespace:ze.svgNs,version:"1.1",style:{position:"absolute",overflow:"visible"}},f),a)])}},{key:"renderPreview",value:function(b,e){var l=void 0===e.center?!0:e.center,a=void 0===e.ignoreMorphs?[]:e.ignoreMorphs,f=void 0===e.asNode?!1:e.asNode,m=b.origin,r=b.rotation,v=void 0===e.width?100:e.width;e=void 0===e.height?100:e.height;var x=Math.max(.1,1/b.scale);x=(new ze.Transform(b.position.negated(),0,ze.pt(x,x))).transformRectToRect(b.bounds());var y=Math.max(.1,Math.min(v/
x.width,e/x.height));m=new ze.Transform(x.topLeft().negated().scaleBy(y).subPt(m),r,ze.pt(y,y));r=(r=this.getNodeForMorph(b))?r.cloneNode(!0):ze.renderMorph(b);l&&(b=m.transformRectToRect(b.extent.extentAsRectangle()),m=m.preConcatenate(new ze.Transform(ze.pt(b.width<v?(v-b.width)/2:0,b.height<e?(e-b.height)/2:0))));r.style.transform=m.toCSSTransformString();r.style.pointerEvents="";ze.tree.prewalk(r,function(E){if("string"===typeof E.className){var F=E.className.split(" ").map(function(I){return I.trim()}).filter(Boolean);
F.includes("Morph")&&(E.className=ze.arr.withoutAll(F,["morph","Morph"]).join(" "),a.find(function(I){return I.id===E.id})&&E.remove(),E.id="")}},function(E){return Array.from(E.childNodes)});return f?r:r.outerHTML}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Renderer"}},{key:"default",value:function(){return this._default||new this}}],h,{pathInPackage:function(){return"rendering/renderer.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:1406,end:21817})}(void 0);ze.Renderer=iP;ze.Renderer=iP;ze.Renderer=iP;var HF=lively.FreezerRuntime.recorderFor("lively.morphic/rendering/font-detector.js"),iaa=function(d){var h=lively.FreezerRuntime.recorderFor("lively.morphic/rendering/font-detector.js"),n=h.hasOwnProperty("FontDetector")&&"function"===typeof h.FontDetector?h.FontDetector:h.FontDetector=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return Pb(n,d,[{key:Symbol.for("lively-instance-initialize"),value:function(b){this.document=b;this.prepared=!1;this.defaultWidth={};this.defaultHeight={};this.possibleFontWeights="normal bold bolder lighter 100 200 300 400 500 600 700 800 900".split(" ");this.namedToNumeric=new Map("Thin;Extra Light;Light;Normal;Medium;Semi Bold;Bold;Extra Bold;Ultra Bold".split(";").map(function(e,l){return[e,String(100*(l+1))]}));this.baseFonts=["monospace","sans-serif","serif","Comic Sans MS"];this.span=
null}},{key:"prepare",value:function(){var b=this.defaultWidth,e=this.defaultHeight,l=this.possibleFontWeights,a=this.baseFonts,f=this.document.getElementsByTagName("body")[0],m=this.span||this.document.createElement("span");m.style.fontSize="72px";m.style.opacity=0;m.innerHTML="mmmmmmmmmmlli";if(!m.parentNode){var r=this.document.createElement("div");r.style.position="absolute";r.style.width="100%";r.style.overflow="hidden";r.style["pointer-events"]="none";r.style["-webkit-user-select"]="none";r.appendChild(m);
f.appendChild(r)}for(var v in l)for(var x in a)m.style.fontFamily=a[x],m.style.fontWeight=l[v],b[a[x]+"@"+l[v]]=m.offsetWidth,e[a[x]+"@"+l[v]]=m.offsetHeight;this.span=m;this.prepared=!0}},{key:"isFontSupported",value:function(b,e){e=void 0===e?"normal":e;this.possibleFontWeights.includes(e)||(e=this.namedToNumeric.get(e)||"normal");this.prepared||this.prepare();var l=this.defaultWidth,a=this.defaultHeight,f=this.baseFonts,m=this.span,r=this.document.body;m.parentNode||r.appendChild(m);for(var v in f)if(m.style.fontWeight=
e,m.style.fontFamily=b+","+f[v],m.offsetWidth!=l[f[v]+"@"+e]||m.offsetHeight!=a[f[v]+"@"+e])return!0;return!1}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"FontDetector"}},{key:"fonts",get:function(){return HF.fonts}}],h,{pathInPackage:function(){return"rendering/font-detector.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},
{start:15,end:3680})}(void 0),dra=iaa=HF.FontDetector,EX=[{name:"serif",type:"default"},{name:"sans-serif",type:"default"},{name:"monospace",type:"default"},{name:"Adobe Jenson",type:"serif"},{name:"Albertus",type:"serif"},{name:"Aldus",type:"serif"},{name:"Alexandria",type:"serif"},{name:"Algerian",type:"serif"},{name:"American Typewriter",type:"serif"},{name:"Antiqua",type:"serif"},{name:"Arno",type:"serif"},{name:"Aster",type:"serif"},{name:"Aurora",type:"serif"},{name:"News 706",type:"serif"},
{name:"Baskerville",type:"serif"},{name:"Bell",type:"serif"},{name:"Belwe Roman",type:"serif"},{name:"Bembo",type:"serif"},{name:"Berkeley Old Style",type:"serif"},{name:"Bernhard Modern",type:"serif"},{name:"Bodoni",type:"serif"},{name:"Book Antiqua",type:"serif"},{name:"Bookman",type:"serif"},{name:"Bulmer",type:"serif"},{name:"Caledonia",type:"serif"},{name:"Californian FB",type:"serif"},{name:"Calisto MT",type:"serif"},{name:"Cambria",type:"serif"},{name:"Capitals",type:"serif"},{name:"Cartier",
type:"serif"},{name:"Caslon",type:"serif"},{name:"Wyld",type:"serif"},{name:"Caslon Antique / Fifteenth Century",type:"serif"},{name:"Catull",type:"serif"},{name:"Centaur",type:"serif"},{name:"Century Old Style",type:"serif"},{name:"Century Schoolbook",type:"serif"},{name:"New Century Schoolbook",type:"serif"},{name:"Century Schoolbook Infant",type:"serif"},{name:"Charis SIL",type:"serif"},{name:"Charter (typeface)",type:"serif"},{name:"Cheltenham",type:"serif"},{name:"Clearface",type:"serif"},{name:"Cochin",
type:"serif"},{name:"Colonna",type:"serif"},{name:"Computer Modern",type:"serif"},{name:"Concrete Roman",type:"serif"},{name:"Constantia",type:"serif"},{name:"Cooper Black",type:"serif"},{name:"Copperplate Gothic",type:"serif"},{name:"Corona",type:"serif"},{name:"News 705",type:"serif"},{name:"DejaVu Serif",type:"serif"},{name:"Didot",type:"serif"},{name:"Droid Serif",type:"serif"},{name:"Elephant",type:"serif"},{name:"Emerson",type:"serif"},{name:"Excelsior",type:"serif"},{name:"News 702",type:"serif"},
{name:"Fairfield",type:"serif"},{name:"FF Scala",type:"serif"},{name:"Footlight",type:"serif"},{name:"FreeSerif",type:"serif"},{name:"Friz Quadrata",type:"serif"},{name:"Garamond",type:"serif"},{name:"Gentium",type:"serif"},{name:"Georgia",type:"serif"},{name:"Gloucester",type:"serif"},{name:"Goudy",type:"serif"},{name:"Granjon",type:"serif"},{name:"High Tower Text",type:"serif"},{name:"Hoefler Text",type:"serif"},{name:"Imprint",type:"serif"},{name:"Ionic No. 5",type:"serif"},{name:"News 701",type:"serif"},
{name:"ITC Benguiat",type:"serif"},{name:"Janson",type:"serif"},{name:"Jokerman",type:"serif"},{name:"Joanna",type:"serif"},{name:"Korinna",type:"serif"},{name:"Lexicon",type:"serif"},{name:"Liberation Serif",type:"serif"},{name:"Linux Libertine",type:"serif"},{name:"Literaturnaya",type:"serif"},{name:"Lucida Bright",type:"serif"},{name:"Melior",type:"serif"},{name:"Memphis",type:"serif"},{name:"Miller",type:"serif"},{name:"Minion",type:"serif"},{name:"Modern",type:"serif"},{name:"Mona Lisa",type:"serif"},
{name:"Mrs Eaves",type:"serif"},{name:"MS Serif",type:"serif"},{name:"New York",type:"serif"},{name:"Nimbus Roman",type:"serif"},{name:"NPS Rawlinson Roadway",type:"serif"},{name:"OCR A Extended",type:"serif"},{name:"Palatino",type:"serif"},{name:"Book Antiqua",type:"serif"},{name:"Perpetua",type:"serif"},{name:"Plantin",type:"serif"},{name:"Playbill",type:"serif"},{name:"Primer",type:"serif"},{name:"Renault",type:"serif"},{name:"Requiem",type:"serif"},{name:"Rotis Serif",type:"serif"},{name:"Sabon",
type:"serif"},{name:"Sistina",type:"serif"},{name:"Souvenir",type:"serif"},{name:"XITS",type:"serif"},{name:"Sylfaen",type:"serif"},{name:"Times New Roman",type:"serif"},{name:"Times",type:"serif"},{name:"Torino",type:"serif"},{name:"Trajan",type:"serif"},{name:"Trinit\u00e9",type:"serif"},{name:"Trump Mediaeval",type:"serif"},{name:"Utopia",type:"serif"},{name:"Vera Serif",type:"serif"},{name:"Wide Latin",type:"serif"},{name:"Windsor",type:"serif"},{name:"XITS",type:"serif"},{name:"Playfair Display",
type:"serif",isGoogleFont:!0},{name:"Cormorant",type:"serif",isGoogleFont:!0},{name:"Eczar",type:"serif",isGoogleFont:!0},{name:"Alegreya",type:"serif",isGoogleFont:!0},{name:"Lora",type:"serif",isGoogleFont:!0},{name:"Source Serif Pro",type:"serif",isGoogleFont:!0},{name:"Roboto Slab",type:"serif",isGoogleFont:!0},{name:"BioRhyme",type:"serif",isGoogleFont:!0},{name:"Libre Baskerville",type:"serif",isGoogleFont:!0},{name:"Crimson Text",type:"serif",isGoogleFont:!0},{name:"Old Standard TT",type:"serif",
isGoogleFont:!0},{name:"Domine",type:"serif",isGoogleFont:!0},{name:"Bitter",type:"serif",isGoogleFont:!0},{name:"Gentium Basic",type:"serif",isGoogleFont:!0},{name:"PT Serif",type:"serif",isGoogleFont:!0},{name:"Cardo",type:"serif",isGoogleFont:!0},{name:"Neuton",type:"serif",isGoogleFont:!0},{name:"Arvo",type:"serif",isGoogleFont:!0},{name:"Merriweather",type:"serif",isGoogleFont:!0},{name:"Alexandria",type:"slab serif"},{name:"American Typewriter",type:"slab serif"},{name:"Archer",type:"slab serif"},
{name:"Athens",type:"slab serif"},{name:"Candida",type:"slab serif"},{name:"Cholla Slab",type:"slab serif"},{name:"City",type:"slab serif"},{name:"Clarendon",type:"slab serif"},{name:"Concrete Roman",type:"slab serif"},{name:"Courier",type:"slab serif"},{name:"Egyptienne",type:"slab serif"},{name:"Guardian Egyptian",type:"slab serif"},{name:"Ionic No. 5",type:"slab serif"},{name:"Lexia",type:"slab serif"},{name:"Memphis",type:"slab serif"},{name:"Nilland",type:"slab serif"},{name:"Roboto Slab",type:"slab serif"},
{name:"Rockwell",type:"slab serif"},{name:"Schadow",type:"slab serif"},{name:"Serifa",type:"slab serif"},{name:"Skeleton Antique",type:"slab serif"},{name:"Sreda",type:"slab serif"},{name:"Swift",type:"slab serif"},{name:"Tower",type:"slab serif"},{name:"Agency FB",type:"sans-serif"},{name:"Akzidenz-Grotesk",type:"sans-serif"},{name:"Andal\u00e9 Sans",type:"sans-serif"},{name:"Antique Olive",type:"sans-serif"},{name:"Arial",type:"sans-serif"},{name:"Arial Unicode MS",type:"sans-serif"},{name:"Avant Garde Gothic",
type:"sans-serif"},{name:"Avenir",type:"sans-serif"},{name:"Bank Gothic",type:"sans-serif"},{name:"Bauhaus",type:"sans-serif"},{name:"Bell Centennial",type:"sans-serif"},{name:"Bell Gothic",type:"sans-serif"},{name:"Benguiat Gothic",type:"sans-serif"},{name:"Berlin Sans",type:"sans-serif"},{name:"Brandon Grotesque",type:"sans-serif"},{name:"Calibri",type:"sans-serif"},{name:"Casey",type:"sans-serif"},{name:"Century Gothic",type:"sans-serif"},{name:"Charcoal",type:"sans-serif"},{name:"Chicago",type:"sans-serif"},
{name:"Clearview",type:"sans-serif"},{name:"Comic Sans",type:"sans-serif"},{name:"Compacta",type:"sans-serif"},{name:"Corbel",type:"sans-serif"},{name:"DejaVu Sans",type:"sans-serif"},{name:"DIN",type:"sans-serif"},{name:"Dotum",type:"sans-serif"},{name:"Droid Sans",type:"sans-serif"},{name:"Dyslexie",type:"sans-serif"},{name:"Ecofont",type:"sans-serif"},{name:"Eras",type:"sans-serif"},{name:"Esseltub",type:"sans-serif"},{name:"Espy Sans",type:"sans-serif"},{name:"Eurocrat",type:"sans-serif"},{name:"Eurostile",
type:"sans-serif"},{name:"Square 721",type:"sans-serif"},{name:"FF Dax",type:"sans-serif"},{name:"FF Meta",type:"sans-serif"},{name:"FF Scala Sans",type:"sans-serif"},{name:"Fira Sans",type:"sans-serif"},{name:"Folio",type:"sans-serif"},{name:"Franklin Gothic",type:"sans-serif"},{name:"FreeSans",type:"sans-serif"},{name:"Frutiger",type:"sans-serif"},{name:"Futura",type:"sans-serif"},{name:"Geneva",type:"sans-serif"},{name:"Gill Sans",type:"sans-serif"},{name:"Gill Sans Schoolbook",type:"sans-serif"},
{name:"Gotham",type:"sans-serif"},{name:"Haettenschweiler",type:"sans-serif"},{name:"Handel Gothic",type:"sans-serif"},{name:"Hei",type:"sans-serif"},{name:"Helvetica",type:"sans-serif"},{name:"Helvetica Neue",type:"sans-serif"},{name:"Swiss 721",type:"sans-serif"},{name:"Highway Gothic",type:"sans-serif"},{name:"Hobo",type:"sans-serif"},{name:"Impact",type:"sans-serif"},{name:"Industria",type:"sans-serif"},{name:"Interstate",type:"sans-serif"},{name:"Johnston/New Johnston",type:"sans-serif"},{name:"Kabel",
type:"sans-serif"},{name:"Klavika",type:"sans-serif"},{name:"Lexia Readable",type:"sans-serif"},{name:"Liberation Sans",type:"sans-serif"},{name:"Linux Biolinum",type:"sans-serif"},{name:"Lucida Sans",type:"sans-serif"},{name:"Lucida Grande",type:"sans-serif"},{name:"Lucida Sans Unicode",type:"sans-serif"},{name:"Lydian",type:"sans-serif"},{name:"Meiryo",type:"sans-serif"},{name:"Meta",type:"sans-serif"},{name:"Microgramma",type:"sans-serif"},{name:"Modern",type:"sans-serif"},{name:"Motorway",type:"sans-serif"},
{name:"Arial",type:"sans-serif"},{name:"Myriad",type:"sans-serif"},{name:"Neutraface",type:"sans-serif"},{name:"Neuzeit S",type:"sans-serif"},{name:"News Gothic",type:"sans-serif"},{name:"Nimbus Sans L",type:"sans-serif"},{name:"Open Sans",type:"sans-serif"},{name:"Optima",type:"sans-serif"},{name:"Paris",type:"sans-serif"},{name:"Product Sans",type:"sans-serif"},{name:"Proxima Nova",type:"sans-serif"},{name:"Russian Federation",type:"sans-serif"},{name:"Rail Alphabet",type:"sans-serif"},{name:"Roboto",
type:"sans-serif"},{name:"Rotis Sans",type:"sans-serif"},{name:"Segoe UI",type:"sans-serif"},{name:"Skia",type:"sans-serif"},{name:"Source Sans Pro",type:"sans-serif"},{name:"Sweden Sans",type:"sans-serif"},{name:"Syntax",type:"sans-serif"},{name:"Tahoma",type:"sans-serif"},{name:"Template Gothic",type:"sans-serif"},{name:"Thesis Sans",type:"sans-serif"},{name:"Tiresias",type:"sans-serif"},{name:"Trade Gothic",type:"sans-serif"},{name:"Transport",type:"sans-serif"},{name:"Trebuchet MS",type:"sans-serif"},
{name:"Twentieth Century (Tw Cen MT)",type:"sans-serif"},{name:"Ubuntu",type:"sans-serif"},{name:"Univers",type:"sans-serif"},{name:"Zurich",type:"sans-serif"},{name:"Vera Sans",type:"sans-serif"},{name:"Verdana",type:"sans-serif"},{name:"Work Sans",type:"sans-serif",isGoogleFont:!0},{name:"Rubik",type:"sans-serif",isGoogleFont:!0},{name:"Libre Franklin",type:"sans-serif",isGoogleFont:!0},{name:"Fira Sans",type:"sans-serif",isGoogleFont:!0},{name:"Alegreya Sans",type:"sans-serif",isGoogleFont:!0},
{name:"Chivo",type:"sans-serif",isGoogleFont:!0},{name:"Source Sans Pro",type:"sans-serif",isGoogleFont:!0},{name:"Roboto",type:"sans-serif",isGoogleFont:!0},{name:"Poppins",type:"sans-serif",isGoogleFont:!0},{name:"Archivo Narrow",type:"sans-serif",isGoogleFont:!0},{name:"Karla",type:"sans-serif",isGoogleFont:!0},{name:"Montserrat",type:"sans-serif",isGoogleFont:!0},{name:"Rajdhani",type:"sans-serif",isGoogleFont:!0},{name:"PT Sans",type:"sans-serif",isGoogleFont:!0},{name:"Lato",type:"sans-serif",
isGoogleFont:!0},{name:"Open Sans",type:"sans-serif",isGoogleFont:!0},{name:"Cabin",type:"sans-serif",isGoogleFont:!0},{name:"Raleway",type:"sans-serif",isGoogleFont:!0},{name:"Nyala",type:"semi-serif"},{name:"Rotis Semi Serif",type:"semi-serif"},{name:"Easyreading",type:"semi-serif"},{name:"Andal\u00e9 Mono",type:"monospace"},{name:"Arial",type:"monospace"},{name:"Bitstream Vera (Vera Sans Mono)",type:"monospace"},{name:"Consolas",type:"monospace"},{name:"Courier",type:"monospace"},{name:"Courier New",
type:"monospace"},{name:"DejaVu Sans Mono",type:"monospace"},{name:"Droid Sans Mono",type:"monospace"},{name:"Everson Mono",type:"monospace"},{name:"Fixed",type:"monospace"},{name:"Fixedsys",type:"monospace"},{name:"Fixedsys Excelsior",type:"monospace"},{name:"HyperFont",type:"monospace"},{name:"Inconsolata",type:"monospace"},{name:"Letter Gothic",type:"monospace"},{name:"Liberation Mono",type:"monospace"},{name:"Lucida Console",type:"monospace"},{name:"Lucida Sans Typewriter",type:"monospace"},{name:"Lucida Typewriter",
type:"monospace"},{name:"Menlo",type:"monospace"},{name:"MICR",type:"monospace"},{name:"Monaco",type:"monospace"},{name:"Monospace",type:"monospace"},{name:"MS Gothic",type:"monospace"},{name:"MS Mincho",type:"monospace"},{name:"Nimbus Mono L",type:"monospace"},{name:"OCR-A",type:"monospace"},{name:"OCR-B",type:"monospace"},{name:"PragmataPro",type:"monospace"},{name:"Prestige Elite",type:"monospace"},{name:"ProFont",type:"monospace"},{name:"Proggy programming fonts",type:"monospace"},{name:"SimHei",
type:"monospace"},{name:"SimSun",type:"monospace"},{name:"Source Code Pro",type:"monospace"},{name:"Terminal",type:"monospace"},{name:"Trixie",type:"monospace"},{name:"Ubuntu Mono",type:"monospace"},{name:"Vera Sans Mono (Bitstream Vera)",type:"monospace"},{name:"Space Mono",type:"monospace",isGoogleFont:!0},{name:"Inconsolata",type:"monospace",isGoogleFont:!0},{name:"Anonymous Pro",type:"monospace",isGoogleFont:!0},{name:"Balloon",type:"script"},{name:"Brush Script",type:"script"},{name:"Choc",type:"script"},
{name:"Dom Casual",type:"script"},{name:"Mistral",type:"script"},{name:"Papyrus",type:"script"},{name:"Segoe Script",type:"script"},{name:"Utopia",type:"script"},{name:"Coronet",type:"script"},{name:"Curlz",type:"script"},{name:"Gravura",type:"script"},{name:"Script",type:"script"},{name:"Wiesbaden Swing",type:"script"},{name:"American Scribe",type:"script"},{name:"AMS Euler",type:"script"},{name:"Apple Chancery",type:"script"},{name:"Forte",type:"script"},{name:"French Script",type:"script"},{name:"ITC Zapf Chancery",
type:"script"},{name:"Kuenstler Script",type:"script"},{name:"Monotype Corsiva",type:"script"},{name:"Old English Text MT",type:"script"},{name:"Zapfino",type:"script"},{name:"Andy",type:"handwriting"},{name:"Ashley Script",type:"handwriting"},{name:"C\u00e9zanne",type:"handwriting"},{name:"Chalkboard",type:"handwriting"},{name:"Comic Sans MS",type:"handwriting"},{name:"Dom Casual",type:"handwriting"},{name:"Kristen",type:"handwriting"},{name:"Lucida Handwriting",type:"handwriting"},{name:"Bastard",
type:"blackletter"},{name:"Breitkopf Fraktur",type:"blackletter"},{name:"Cloister Black",type:"blackletter"},{name:"Fette Fraktur",type:"blackletter"},{name:"Fletcher",type:"blackletter"},{name:"Fraktur",type:"blackletter"},{name:"Lucida Blackletter",type:"blackletter"},{name:"Old English Text",type:"blackletter"},{name:"Schwabacher",type:"blackletter"},{name:"Aharoni",type:"non-latin"},{name:"Aparajita",type:"non-latin"},{name:"Arial",type:"non-latin"},{name:"Calibri",type:"non-latin"},{name:"Chandas",
type:"non-latin"},{name:"Gadugi",type:"non-latin"},{name:"Grecs du roi",type:"non-latin"},{name:"Javanese script",type:"non-latin"},{name:"Japanese Gothic",type:"non-latin"},{name:"Jomolhari",type:"non-latin"},{name:"Kiran",type:"non-latin"},{name:"Kochi",type:"non-latin"},{name:"Koren",type:"non-latin"},{name:"Kruti Dev",type:"non-latin"},{name:"Malgun Gothic",type:"non-latin"},{name:"Meiryo",type:"non-latin"},{name:"Microsoft JhengHei",type:"non-latin"},{name:"Microsoft YaHei",type:"non-latin"},
{name:"Minch\u014d",type:"non-latin"},{name:"Ming",type:"non-latin"},{name:"Mona",type:"non-latin"},{name:"MS Gothic",type:"non-latin"},{name:"Nastaliq Navees",type:"non-latin"},{name:"Porson",type:"non-latin"},{name:"Segoe UI Symbol",type:"non-latin"},{name:"Shruti",type:"non-latin"},{name:"SimSun",type:"non-latin"},{name:"Sylfaen",type:"non-latin"},{name:"Tahoma",type:"non-latin"},{name:"Tengwar",type:"non-latin"},{name:"Tibetan Machine Uni",type:"non-latin"},{name:"Wilson Greek",type:"non-latin"},
{name:"SMP",type:"unicode"},{name:"Microsoft Office",type:"unicode"},{name:"Bitstream Cyberbit",type:"unicode"},{name:"DejaVu fonts",type:"unicode"},{name:"Charis SIL",type:"unicode"},{name:"BMP",type:"unicode"},{name:"SMP",type:"unicode"},{name:"Code2002",type:"unicode"},{name:"DejaVu fonts",type:"unicode"},{name:"IPA",type:"unicode"},{name:"Everson Mono",type:"unicode"},{name:"Windows",type:"unicode"},{name:"Fixedsys Excelsior",type:"unicode"},{name:"FreeFont",type:"unicode"},{name:"Gentium",type:"unicode"},
{name:"GNU Unifont",type:"unicode"},{name:"Georgia Ref",type:"unicode"},{name:"Microsoft Office",type:"unicode"},{name:"Junicode",type:"unicode"},{name:"Mac OS 8.5",type:"unicode"},{name:"macOS",type:"unicode"},{name:"ISO 8859-x",type:"unicode"},{name:"MS Gothic",type:"unicode"},{name:"MS Mincho",type:"unicode"},{name:"Nimbus Sans Global",type:"unicode"},{name:"Noto",type:"unicode"},{name:"Fabrizio Schiavi",type:"unicode"},{name:"Squarish Sans CT",type:"unicode"},{name:"XITS",type:"unicode"},{name:"Titus Cyberbit Basic",
type:"unicode"},{name:"Verdana Ref",type:"unicode"},{name:"XITS",type:"unicode"},{name:"Apple Symbols",type:"symbol"},{name:"Asana-Math",type:"symbol"},{name:"Blackboard bold",type:"symbol"},{name:"Bookshelf Symbol 7",type:"symbol"},{name:"Cambria Math",type:"symbol"},{name:"Computer Modern",type:"symbol"},{name:"Lucida Math",type:"symbol"},{name:"Marlett",type:"symbol"},{name:"Symbol",type:"symbol"},{name:"Webdings",type:"symbol"},{name:"Wingdings",type:"symbol"},{name:"Wingdings 2",type:"symbol"},
{name:"Wingdings 3",type:"symbol"},{name:"Zapf Dingbats",type:"symbol"},{name:"Ad Lib",type:"decorative"},{name:"Allegro",type:"decorative"},{name:"Andreas",type:"decorative"},{name:"Arnold B\u00f6cklin",type:"decorative"},{name:"Astur",type:"decorative"},{name:"Banco",type:"decorative"},{name:"Bauhaus",type:"decorative"},{name:"Braggadocio",type:"decorative"},{name:"Broadway",type:"decorative"},{name:"Caslon Antique",type:"decorative"},{name:"Cooper Black",type:"decorative"},{name:"Curlz",type:"decorative"},
{name:"Ellington",type:"decorative"},{name:"Exocet",type:"decorative"},{name:"FIG Script",type:"decorative"},{name:"Forte",type:"decorative"},{name:"Gabriola",type:"decorative"},{name:"Horizon",type:"decorative"},{name:"Jim Crow",type:"decorative"},{name:"Lo-Type",type:"decorative"},{name:"Neuland",type:"decorative"},{name:"Peignot",type:"decorative"},{name:"San Francisco",type:"decorative"},{name:"Stencil",type:"decorative"},{name:"Umbra",type:"decorative"},{name:"Westminster",type:"decorative"},
{name:"Willow",type:"decorative"},{name:"Windsor",type:"decorative"},{name:"Lithos",type:"mimicry"},{name:"Skia",type:"mimicry"},{name:"3x3",type:"misc"},{name:"Compatil",type:"misc"},{name:"Generis",type:"misc"},{name:"Grasset",type:"misc"},{name:"LED",type:"misc"},{name:"Luxi",type:"misc"},{name:"System",type:"misc"}];HF.fonts=EX;HF.fonts=EX;HF.fonts=EX;HF.default=iaa;var Si=lively.FreezerRuntime.recorderFor("lively.morphic/rendering/font-metric.js");Si.textlayerNodeForFontMeasure=function(d){var h=
d.viewState,n=h.text_layer_node;h=h.fontmetric_text_layer_node;n&&!n.className.includes("newtext-text-layer")&&(d.viewState.text_layer_node=n=n.parentNode.querySelector(".newtext-text-layer.actual"));h&&!h.className.includes("newtext-text-layer")&&(d.viewState.fontmetric_text_layer_node=h=null);n&&!h&&n.parentNode&&(h=d.viewState.fontmetric_text_layer_node=n.parentNode.querySelector(".newtext-text-layer.font-measure"));return h};Si.isExtendingChar=function(d){return 768<=d.charCodeAt(0)&&Si.extendingChars.test(d)};
Si.skipExtendingChars=function(d,h,n){for(;(0>n?0<h:h<d.length)&&Si.isExtendingChar(d.charAt(h));)h+=n;return h};Si.charBoundsOfBigMonospacedLine=function(d,h,n,b,e,l,a,f){e=void 0===e?0:e;l=void 0===l?0:l;n=n.text.length;if(500>n||h.isProportional(Si.getComputedFontFamily(b)))return null;var m=Infinity,r=a.defaultTextStyle;a.lineWrapping&&(m=b.getBoundingClientRect().width);h=h._domMeasure.defaultCharExtent(d,{defaultTextStyle:r},f);d=h.width;h=h.height;b=Array(n);for(a=0;a<n;a++)e+d>m&&(e=0,l+=
h),b[a]={x:e,y:l,width:d,height:h},e+=d;return b};Si.charBoundsOfLine=function(d,h,n,b){n=void 0===n?0:n;b=void 0===b?0:b;d=h.ELEMENT_NODE;var e=h.TEXT_NODE,l=h.ownerDocument,a=[],f=0;if(h)if(h.className.includes("line")){n-=h.offsetLeft;b-=h.offsetTop;var m=h.childNodes[0]}else m=h.getElementsByClassName("line")[0].childNodes[0],n=n-h.offsetLeft+Si.getComputedMarginLeft(h),b-=h.offsetTop;else m=null;if(!m){var r=m=l.createElement("br");h.appendChild(r)}for(;m&&!(Infinity<f);){var v="BR"!==m.tagName&&
m.nodeType===d&&m.childNodes[0]||m;if(v.nodeType===e)for(var x=v.length,y=0;y<x;y++){var E=Si.measureCharInner(l,v,y,"right");var F=E.left;var I=E.top;h=E.width;E=E.height;F+=n;I+=b;a[f++]={x:F,y:I,width:h,height:E}}else if(m.nodeType===d)v=m.getBoundingClientRect(),F=v.left,I=v.top,h=v.width,E=v.height,F+=n,I+=b,a[f++]={x:F,y:I,width:h,height:E};else throw Error("Cannot deal with node "+m);m=m.nextSibling}r&&r.parentNode.removeChild(r);return a};Si.measureCharInner=function(d,h,n,b){b=void 0===b?
"left":b;var e=n;n+=1;if(3==h.nodeType)for(var l=0;4>l;l++){var a=Si.getUsefulRect(Si.range(d,h,e,n).getClientRects(),b);if(a.left||a.right||0==e)break;n=e;--e}return a};Si.range=function(d,h,n,b,e){d=d.createRange();d.setEnd(e||h,b);d.setStart(h,n);return d};Si.getUsefulRect=function(d,h){var n={left:0,right:0,top:0,bottom:0};if("left"==h)for(h=0;h<d.length&&(n=d[h]).left==n.right;h++);else for(h=d.length-1;0<=h&&(n=d[h]).left==n.right;h--);return n};Si.string=Th;Si.obj=ng;Si.FontDetector=dra;Si.cumulativeOffset=
lu;Si.config=em;Si.debug=!!Si.config.onloadURLQuery["debug-font-metric"];Si.checkTimeout=1E3;var jaa=function(d){var h=lively.FreezerRuntime.recorderFor("lively.morphic/rendering/font-metric.js"),n=h.hasOwnProperty("FontMetric")&&"function"===typeof h.FontMetric?h.FontMetric:h.FontMetric=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Pb(n,d,[{key:Symbol.for("lively-instance-initialize"),value:function(){this.charMap=
{};this.cachedBoundsInfo={};this.supportedFontCache={};this.canvasElement=this.element=null;this.isProportionalCache={}}},{key:"reset",value:function(b){if(this.element){var e=this.element.parentNode;var l=this.element.ownerDocument}this.uninstall();this.charMap={};this.cachedBoundsInfo={};l&&e&&this.install(l,e,b)}},{key:"install",value:function(b,e,l){this.element=b.createElement("div");this.element.name="fontMetric";this.setMeasureNodeStyles(this.element.style,!0);e.appendChild(this.element);this._domMeasure=
(new Si.DOMTextMeasure).install(b,e,l)}},{key:"uninstall",value:function(){this.element&&(this.element.parentNode&&this.element.parentNode.removeChild(this.element),this.element=null,this._domMeasure&&this._domMeasure.uninstall())}},{key:"setMeasureNodeStyles",value:function(b,e){b.width=b.height="auto";b.left=b.top="0px";b.visibility="hidden";b.position="absolute";b.whiteSpace="pre";b.font="inherit";b.overflow=e?"hidden":"visible"}},{key:"measure",value:function(b,e){var l=b.fontFamily,a=b.fontSize,
f=b.fontWeight,m=b.fontStyle,r=b.textDecoration,v=b.textStyleClasses;b=b.transform;var x=this.element;b&&(b=b.inverse());x.textContent=e;Object.assign(x.style,{"-webkit-text-size-adjust":"none",fontFamily:l,fontWeight:f,fontStyle:m,textDecoration:r,transform:b,fontSize:a+"px"});x.className=v?v.join(" "):"";try{var y=x.getBoundingClientRect();var E=y.width;var F=y.height}catch(I){return{width:0,height:0}}return{height:F,width:E}}},{key:"charBoundsFor",value:function(b,e){var l=e.length,a=Array(l),
f=this.cachedBoundsInfo,m=f.bounds,r=f.str;f=f.style;if(this.isProportional(b.fontFamily)){f=m&&Si.obj.equals(f,b);for(var v=!b.fixedCharacterSpacing,x=0,y=0;x<l;x++){var E=e[x];if(v)if(f=f&&E===r[x]){var F=m[x];E=F.width;F=F.height}else E=e.substr(0,x+1),F=this.measure(b,E),E=F.width,F=F.height,E-=y;else F=this.sizeFor(b,E),E=F.width,F=F.height;a[x]={x:y,y:0,width:Math.ceil(E),height:Math.ceil(F)};y+=E}v&&(this.cachedBoundsInfo={bounds:a,str:e,style:b})}else for(e=this.sizeFor(b,"x",!0),b=this.sizeFor(b,
"xx",!0).width-e.width,e=e.height,r=0;r<l;r++)m=b*r,a[r]={x:m,y:0,width:b,height:e};return a}},{key:"isProportional",value:function(b){if(this.isProportionalCache.hasOwnProperty(b))return this.isProportionalCache[b];var e={fontFamily:b,fontSize:12},l=this.sizeFor(e,"w").width;e=this.sizeFor(e,"i").width;return this.isProportionalCache[b]=l!==e}},{key:"sizeFor",value:function(b,e,l){e=void 0===e?"":e;var a=b.fontFamily,f=b.fontSize,m=b.fontWeight,r=b.fontStyle,v=b.textDecoration,x=b.textStyleClasses;
b={fontFamily:a,fontSize:f,fontWeight:m,fontStyle:r,textDecoration:v,textStyleClasses:x};if((void 0===l||!l)&&1<e.length)return this.measure(b,e);l=x?x.join(" "):"";a=[a,f,m,r,v,l].join("-");this.charMap[a]||(this.charMap[a]={});this.charMap[a][e]||(this.charMap[a][e]=this.measure(b,e));return this.charMap[a][e]}},{key:"defaultLineHeight",value:function(b){return this.sizeFor(b," ").height}},{key:"isFontSupported",value:function(b,e){e=void 0===e?"normal":e;var l=this.fontDetector||(this.fontDetector=
new Si.FontDetector(this.element.ownerDocument));if(this.supportedFontCache[b+"-"+e]){var a=this.supportedFontCache[b+"-"+e],f=a.ts;a=a.value;if(Date.now()-f<Si.checkTimeout)return a}l=l.isFontSupported(b,e);this.supportedFontCache[b+"-"+e]={ts:Date.now(),value:l};return l}},{key:"defaultCharExtent",value:function(b,e,l){return this._domMeasure.defaultCharExtent(b,e,l)}},{key:"manuallyComputeCharBoundsOfLine",value:function(b,e,l,a,f,m,r){return this._domMeasure.computeCharBBoxes(b,e,0,0,f,m,r,this)}},
{key:"manuallyComputeBoundsOfLines",value:function(b,e,l,a,f,m,r){return this._domMeasure.computeBBoxesOfLines(b,e,0,0,f,m,r)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"FontMetric"}},{key:"default",value:function(){if(!this._fontMetric)throw Error("FontMetric has not yet been initialized!");return this._fontMetric}},{key:"initDefault",value:function(b){if(!this._fontMetric){if(!b&&"undefined"===typeof document)throw Error("Cannot initialize FontMetric without document");b||(b=
{document:document});this._fontMetric=this.forDOMEnv(b)}return this._fontMetric}},{key:"removeDefault",value:function(){this._fontMetric&&(this._fontMetric.uninstall(),this._fontMetric=null)}},{key:"forDOMEnv",value:function(b){b=b.document;var e=new Si.FontMetric;e.install(b,b.body);return e}}],h,{pathInPackage:function(){return"rendering/font-metric.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:316,end:7623})}(void 0),era=jaa=Si.FontMetric;Si.extendingChars=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;
(function(d){var h=lively.FreezerRuntime.recorderFor("lively.morphic/rendering/font-metric.js"),n=h.hasOwnProperty("DOMTextMeasure")&&"function"===typeof h.DOMTextMeasure?h.DOMTextMeasure:h.DOMTextMeasure=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Pb(n,d,[{key:"reset",value:function(){if(this.element){var b=this.element.parentNode;var e=this.element.ownerDocument}this.uninstall();e&&b&&this.install(e,b);return this}},
{key:"install",value:function(b,e,l){this.maxLineBBoxCacheCount=(this.debug=l=void 0===l?!1:l)?1:3E3;this.lineBBoxCacheCount=0;this.lineBBoxCache={};this.maxTextlayerNodeCacheCount=l?1:30;this.textlayerNodeCacheCount=0;this.textlayerNodeCache={};this.defaultCharWidthHeightCache={};this.doc=b;b=this.element=b.createElement("div");b.className="dom-measure"+(l?" debug":"");this.setMeasureNodeStyles(b.style,!0);e.appendChild(b);return this}},{key:"uninstall",value:function(){var b=this.element;b&&(b.parentNode&&
b.parentNode.removeChild(b),this.element=null)}},{key:"setMeasureNodeStyles",value:function(b,e){b.width=b.height="auto";this.debug||(b.left=b.top="0px",b.visibility="hidden");b.position="absolute";b.whiteSpace="pre";b.font="inherit";b.overflow=e&&!this.debug?"hidden":"visible"}},{key:"generateStyleKey",value:function(b){var e=b.defaultTextStyle;return[e.fontFamily,e.fontSize,e.fontWeight,e.fontStyle,e.textDecoration,e.textStyleClasses,b.paddingLeft,b.paddingRight,b.paddingTop,b.paddingBottom,b.width,
b.height,b.clipMode,b.lineWrapping,b.textAlign].join("-")}},{key:"defaultCharExtent",value:function(b,e,l){var a=this,f=this.generateStyleKey(e),m=this.defaultCharWidthHeightCache[f];if("undefined"!==typeof m&&(0!==m.height||0!==m.width))return m;var r=this.doc;return this.withTextLayerNodeDo(b,l,e,f,function(v){var x=r.createElement("span");x.className="line";x.style.whiteSpace="pre";v.appendChild(x);x.textContent="abcdefghijklmnopqrstufwxyz ABCDEFGHIJKLMNOPQRSTUFWXYZ 1234567890 {}[];,./<>?'\"!@#$%^&*()-=_+";
var y=x.getBoundingClientRect().width,E=r.createElement("span");E.className="line";E.style.whiteSpace="pre";v.appendChild(E);E.textContent="H\ne\nll\no";var F=E.getBoundingClientRect().height;v.removeChild(x);v.removeChild(E);return a.defaultCharWidthHeightCache[f]={width:y/92,height:Math.ceil(F/4)}})}},{key:"computeBBoxesOfLines",value:function(b,e,l,a,f,m,r){var v=this;l=void 0===l?0:l;a=void 0===a?0:a;for(var x=this.generateStyleKey(f),y=Array(e.length),E=!0,F=0;F<e.length;F++){var I=!e[F].textAttributes.length&&
this.lineBBoxCache[x+"_"+e[F].text];I&&I.height&&I.width?y[F]=I:E=!1}return E?y:this.withTextLayerNodeDo(b,m,f,x,function(J,P,N){for(var Y=Array(e.length),W=Array(e.length),da=0;da<e.length;da++)if(!W[da]){var va=r(e[da]);va.style.display="inline-block";J.appendChild(va);Y[da]=va}for(da=0;da<Y.length;da++)if(!W[da]){va=Y[da];var za=va.getBoundingClientRect();v.lineBBoxCache[x+"_"+e[da].text]=W[da]={x:za.left-va.offsetLeft+l-P,y:za.top-va.offsetTop+a-N,width:za.width,height:za.height}}for(P=0;P<Y.length;P++)J.removeChild(Y[P]);
return W})}},{key:"computeCharBBoxes",value:function(b,e,l,a,f,m,r,v){var x=this;l=void 0===l?0:l;a=void 0===a?0:a;return this.withTextLayerNodeDo(b,m,f,this.generateStyleKey(f),function(y,E,F){var I=r(e);y.appendChild(I);y=1E4<e.stringSize&&Si.charBoundsOfBigMonospacedLine(b,v,e,I,l,a,f,m)||Si.charBoundsOfLine(e,I,l-E,a-F);x.debug||I.parentNode.removeChild(I);return y})}},{key:"withTextLayerNodeDo",value:function(b,e,l,a,f){var m=this.doc,r=this.textlayerNodeCache,v=this.element,x=Si.textlayerNodeForFontMeasure(b);
x||(x=r[a]);if(!x){this.textlayerNodeCacheCount++;x=r[a]=e(l,[]);x.id=a;e=l.width;var y=l.clipMode;l.width||l.clipMode&&"visible"!==l.clipMode?(l=m.createElement("div"),l.style.position="absolute",y&&(l.style.overflow=y),e&&(l.style.width=e+"px"),l.id=a,l.appendChild(x),v.appendChild(l)):v.appendChild(x)}a=b.getGlobalTransform().inverse();b.env.renderer&&b.env.renderer.getNodeForMorph(b)&&(1!=a.getScale()||0!=a.getRotation())&&(a.e=a.f=0,x.style.transform=a.toString());a=x.getBoundingClientRect();
b=a.left;a=a.top;try{return f(x,b,a)}finally{if(x.style.transform="",!this.debug&&this.textlayerNodeCacheCount>this.maxTextlayerNodeCacheCount){f=Math.ceil(this.maxTextlayerNodeCacheCount/2);for(var E;f--&&(E=v.childNodes[0]);)r[E.id]=null,v.removeChild(E);this.textlayerNodeCacheCount-=f}}}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"DOMTextMeasure"}}],h,{pathInPackage:function(){return"rendering/font-metric.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:11292,end:19738})})(void 0);Si.GLOBAL="undefined"!==typeof System?System.global:window||global||self||void 0;Si.getComputedFontFamily="function"===typeof Si.GLOBAL.getComputedStyle?function(d){return Si.GLOBAL.getComputedStyle(d).fontFamily}:function(){return""};Si.getComputedMarginLeft="function"===typeof Si.GLOBAL.getComputedStyle?function(d){return parseInt(Si.GLOBAL.getComputedStyle(d).marginLeft)||
0}:function(){return 0};Si.default=jaa;var rj=lively.FreezerRuntime.recorderFor("lively.morphic/changes.js");rj.signalBindings=function(d,h,n){if(d=d.attributeConnections){d=d.slice();for(var b=0;b<d.length;b++)d[b].sourceAttrName===h&&d[b].update(n)}};rj.informMorph=function(d,h,n){try{n.onChange(h);rj.signalBindings(n,"change",h);for(var b=n.owner;b;)b.onSubmorphChange(h,n),b=b.owner}catch(e){console.error("Error in informMorph: "+e.stack)}};rj.arr=Mf;rj.string=Th;rj.obj=ng;rj.connect=Dl;rj.signal=
Xl;rj.disconnect=mg;(function(d){var h=lively.FreezerRuntime.recorderFor("lively.morphic/changes.js"),n=h.hasOwnProperty("Change")&&"function"===typeof h.Change?h.Change:h.Change=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Pb(n,d,[{key:Symbol.for("lively-instance-initialize"),value:function(b){this.target=b;this.group=null}},{key:"type",get:function(){return"abstract change"}},{key:"apply",value:function(){throw Error("Not yet implemented");
}},{key:"reverseApply",value:function(){throw Error("Not yet implemented");}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Change"}}],h,{pathInPackage:function(){return"changes.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:769,end:1025})})(void 0);var FX=function(d){var h=lively.FreezerRuntime.recorderFor("lively.morphic/changes.js"),
n=h.hasOwnProperty("GroupChange")&&"function"===typeof h.GroupChange?h.GroupChange:h.GroupChange=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Pb(n,d,[{key:Symbol.for("lively-instance-initialize"),value:function(b){Pb._get(Object.getPrototypeOf(n.prototype),Symbol.for("lively-instance-initialize"),this).call(this,b);this.changes=[]}},{key:"consumesChanges",value:function(){return!0}},{key:"addChange",value:function(b){this.changes.push(b);
b.group=this}},{key:"apply",value:function(){this.changes.slice().forEach(function(b){return b.apply()});return this}},{key:"reverseApply",value:function(){this.changes.slice().reverse().forEach(function(b){return b.reverseApply()});return this}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"GroupChange"}}],h,{pathInPackage:function(){return"changes.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:1034,end:1463})}(rj.Change);rj.GroupChange=FX;rj.GroupChange=FX;rj.GroupChange=FX;var GX=function(d){var h=lively.FreezerRuntime.recorderFor("lively.morphic/changes.js"),n=h.hasOwnProperty("ValueChange")&&"function"===typeof h.ValueChange?h.ValueChange:h.ValueChange=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Pb(n,d,[{key:"type",get:function(){return"setter"}},
{key:Symbol.for("lively-instance-initialize"),value:function(b,e,l,a){Pb._get(Object.getPrototypeOf(n.prototype),Symbol.for("lively-instance-initialize"),this).call(this,b);this.prop=e;this.value=l;this.prevValue=null;this.meta=a}},{key:"apply",value:function(){this.target[this.prop]=this.value}},{key:"reverseApply",value:function(){this.target[this.prop]=this.prevValue}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ValueChange"}}],h,{pathInPackage:function(){return"changes.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:1472,end:1893})}(rj.Change);rj.ValueChange=GX;rj.ValueChange=GX;rj.ValueChange=GX;var HX=function(d){var h=lively.FreezerRuntime.recorderFor("lively.morphic/changes.js"),n=h.hasOwnProperty("MethodCallChange")&&"function"===typeof h.MethodCallChange?h.MethodCallChange:h.MethodCallChange=
function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Pb(n,d,[{key:"type",get:function(){return"method-call"}},{key:Symbol.for("lively-instance-initialize"),value:function(b,e,l,a,f){Pb._get(Object.getPrototypeOf(n.prototype),Symbol.for("lively-instance-initialize"),this).call(this,b);this.selector=e;this.args=l;this.undo=a;this.meta=f}},{key:"apply",value:function(){var b=this.target;b[this.selector].apply(b,this.args)}},
{key:"reverseApply",value:function(){if(this.undo)if("function"===typeof this.undo)this.undo();else{var b=this.undo,e=b.target;e[b.selector].apply(e,b.args)}}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"MethodCallChange"}}],h,{pathInPackage:function(){return"changes.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},
{start:1902,end:2486})}(rj.GroupChange);rj.MethodCallChange=HX;rj.MethodCallChange=HX;rj.MethodCallChange=HX;var jP=function(d){var h=lively.FreezerRuntime.recorderFor("lively.morphic/changes.js"),n=h.hasOwnProperty("ChangeManager")&&"function"===typeof h.ChangeManager?h.ChangeManager:h.ChangeManager=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Pb(n,d,[{key:Symbol.for("lively-instance-initialize"),value:function(){this.reset()}},
{key:"reset",value:function(){this.changes=[];this.changeRecordedListeners=[];this.revision=0;this.changeRecordersPerMorph=new WeakMap;this.changeRecorders={};this.changeGroupStack=[];this.defaultMeta={};this.metaStack=[]}},{key:"changesFor",value:function(b){return this.changes.filter(function(e){return e.target===b})}},{key:"apply",value:function(b,e){e.apply()}},{key:"doWithValueChangeMeta",value:function(b,e,l){this.defaultMeta=b;this.metaStack.push(b);try{var a=l(e)}finally{return this.metaStack.pop(),
this.defaultMeta=rj.arr.last(this.metaStack)||{},a}}},{key:"addValueChange",value:function(b,e,l,a){e=new rj.ValueChange(b,e,l,Object.assign({},this.defaultMeta,{},a));return this._record(b,e)}},{key:"addMethodCallChangeDoing",value:function(b,e,l){var a=b.target,f=b.selector,m=b.args;(b=b.undo)||(b=function(){return console.warn("No undo recorded for "+a+"."+f)});m=new rj.MethodCallChange(a,f,m,b,this.defaultMeta);e.groupChangesWhile(m,l);return m}},{key:"_record",value:function(b,e){rj.signal(this,
"changeRecorded",e);e.hasOwnProperty("value")&&(e.prevValue=b._morphicState[e.prop],b._morphicState[e.prop]=e.value);b.makeDirty(e);var l=rj.arr.last(this.changeGroupStack);l&&l.consumesChanges()?l.addChange(e):(this.changes.push(e),b._rev=++this.revision,this.informChangeListeners(e));rj.informMorph(this,e,b);return e}},{key:"groupChangesWhile",value:function(b,e,l,a){a=void 0===a?!0:a;e||(e=new rj.GroupChange(b));this.changeGroupStack.push(e);try{return l(),rj.arr.remove(this.changeGroupStack,e),
a?this._record(b,e):e}catch(f){throw rj.arr.remove(this.changeGroupStack,e),f;}}},{key:"dontRecordChangesWhile",value:function(b,e){return this.groupChangesWhile(b,void 0,e,!1)}},{key:"recordChangesWhile",value:function(b,e){var l=this.changes.length;b();b=this.changes.slice(l,this.changes.length);return e?b.filter(e):b}},{key:"addChangeListener",value:function(b){rj.arr.pushIfNotIncluded(this.changeRecordedListeners,b)}},{key:"removeChangeListener",value:function(b){rj.arr.remove(this.changeRecordedListeners,
b)}},{key:"informChangeListeners",value:function(b){this.changeRecordedListeners.forEach(function(e){return e(b)})}},{key:"recordChangesStart",value:function(b,e){e=rj.obj.newKeyIn(this.changeRecorders,(void 0===e?"":e)+"__change_recorder_"+Date.now());var l=b?function(f){return b(f)&&a.changes.push(f)}:function(f){return a.changes.push(f)},a=this.changeRecorders[e]={id:e,filter:b,changes:[],listener:l};this.addChangeListener(l);return a}},{key:"recordChangesStop",value:function(b){if(!(b in this.changeRecorders))return[];
var e=this.changeRecorders[b],l=e.changes;e=e.listener;delete this.changeRecorders[b];this.removeChangeListener(e);return l}},{key:"recordChangesStartForMorph",value:function(b,e){e=this.recordChangesStart(e,b.id);var l=this.changeRecordersPerMorph.get(b);l||(l=[],this.changeRecordersPerMorph.set(b,l));l.push(e.id);return e}},{key:"recordChangesStopForMorph",value:function(b,e){var l=this.changeRecordersPerMorph.get(b);if(!l||!l.length)return console.warn("Cannot endMorphChangeRecorder for morph "+
b+": recorder not found"),[];(b=e)?rj.arr.remove(l,b):b=l.pop();return this.recordChangesStop(b)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ChangeManager"}}],h,{pathInPackage:function(){return"changes.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:2495,end:7620})}(void 0);rj.ChangeManager=jP;rj.ChangeManager=
jP;rj.ChangeManager=jP;var Xm=lively.FreezerRuntime.recorderFor("lively.morphic/undo.js");Xm.printArg=function(d){return Xm.obj.inspect(d,{maxDepth:1}).replace(/\n/g,"").replace(/\s+/g," ")};Xm.obj=ng;Xm.arr=Mf;Xm.events=nA;Xm.fun=vn;(function(d){var h=lively.FreezerRuntime.recorderFor("lively.morphic/undo.js"),n=h.hasOwnProperty("Undo")&&"function"===typeof h.Undo?h.Undo:h.Undo=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};
return Pb(n,d,[{key:Symbol.for("lively-instance-initialize"),value:function(b,e,l){e=void 0===e?[]:e;this.name=b;this.targets=e;this.timestamp=this.changes=this.recorder=null;this.no=void 0===l?0:l}},{key:"recorded",value:function(){return!!this.changes}},{key:"isRecording",value:function(){return!!this.recorder}},{key:"startRecording",value:function(b){var e=this;if(this.recorded()||this.isRecording())throw Error("Undo already recorded / recording");if(!this.targets.length)throw Error("Undo has no target morphs");
this.timestamp=Date.now();this.recorder=this.targets[0].recordChangesStart(function(l){var a=l.target;return a.isUsedAsEpiMorph()||!e.targets.some(function(f){return f===a||f.isAncestorOf(a)})?!1:"function"===typeof b?b(l):!0});return this}},{key:"stopRecording",value:function(){var b=this.recorder.id;this.changes=$jscomp.makeIterator(this.targets).next().value.recordChangesStop(b);this.recorder=this.targets=null}},{key:"apply",value:function(){if(!this.recorded())throw Error("Cannot apply undo that has no changes recorded yet");
this.changes.slice().forEach(function(b){return b.apply()});return this}},{key:"reverseApply",value:function(){if(!this.recorded())throw Error("Cannot reverseApply undo that has no changes recorded yet");this.changes.slice().reverse().forEach(function(b){return b.reverseApply()});return this}},{key:"addTarget",value:function(b){Xm.arr.pushIfNotIncluded(this.targets,b)}},{key:"addUndos",value:function(b){b=Xm.arr.sortBy(b.concat(this).filter(function(e){return e.recorded()}),function(e){return e.no});
b.length&&(this.changes=Xm.arr.flatmap(b,function(e){return e.changes}),this.timestamp=b[0].timestamp,this.no=b[0].no,this.name=b.map(function(e){return e.name}).join("-"))}},{key:"toString",value:function(){var b=this.name,e=this.changes,l=this.no,a=this.isRecording();e=e.length?"\n  "+e.map(function(f){var m=f.selector,r=f.args,v=f.prop,x=f.value;f=f.target;return m?f+"."+m+"("+r.map(Xm.printArg)+")":f+"."+v+" = "+Xm.printArg(x)}).join("\n  "):"no changes";return"Undo("+l+":"+b+" "+(a?"RECORDING ":
"")+e+")"}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Undo"}}],h,{pathInPackage:function(){return"undo.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:54,end:2504})})(void 0);var $I=function(d){var h=lively.FreezerRuntime.recorderFor("lively.morphic/undo.js"),n=h.hasOwnProperty("UndoManager")&&"function"===
typeof h.UndoManager?h.UndoManager:h.UndoManager=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Pb(n,d,[{key:Symbol.for("lively-instance-initialize"),value:function(b){this.reset();this.filter=b}},{key:"reset",value:function(){this.undos=[];this.redos=[];this.undoInProgress=null;this.counter=this.applyCount=0;this.grouping={current:[],debounce:null,debouncedCanceled:!1,debounceTime:31}}},{key:"group",value:function(b){b=
void 0===b?null:b;this.groupLaterCancel();b&&this.undos.includes(b)&&(this.grouping.current=Xm.arr.uniq(this.undos.slice(this.undos.indexOf(b)).concat(this.grouping.current)));this.grouping.current.length&&(b=this.grouping.current.slice(1),this.grouping.current[0].addUndos(b),this.undos=Xm.arr.withoutAll(this.undos,b),this.grouping.current=[])}},{key:"ensureNewGroup",value:function(b,e){e=void 0===e?"new undo group":e;this.group();this.undoStart(b,e);return this.undoStop()}},{key:"groupLaterCancel",
value:function(){var b=this.grouping;b.debounce&&(b.debouncedCanceled=!0,this.grouping=Object.assign({},b,{debounce:null,debouncedCanceled:!1}))}},{key:"groupLater",value:function(b){var e=this,l=this.grouping;(l.debounce||(l.debounce=Xm.fun.debounce(b||l.debounceTime,function(){l.debounce=null;l.debouncedCanceled||e.group()})))()}},{key:"undoStart",value:function(b,e){if(!this.applyCount)if(this.undoInProgress)console.warn("There is already an undo recorded");else return this.undoInProgress=(new Xm.Undo(e,
[b],this.counter++)).startRecording(this.filter)}},{key:"undoStop",value:function(){var b=this.undoInProgress;if(!b)return null;b.stopRecording();this.undoInProgress=null;this.undos.push(b);this.grouping.current.push(b);this.redos.length&&(this.redos.length=0);return b}},{key:"removeLatestUndo",value:function(){this.undoStop();var b=this.undos.pop();Xm.arr.remove(this.grouping.current,b);return b}},{key:"undo",value:function(){var b=this.removeLatestUndo();if(b){Xm.arr.remove(this.grouping.current,
b);this.redos.unshift(b);this.applyCount++;try{b.reverseApply()}finally{this.applyCount--}return b}}},{key:"redo",value:function(){this.undoStop();var b=this.redos.shift();if(b){this.undos.push(b);this.applyCount++;try{b.apply()}finally{this.applyCount--}return b}}},{key:"toString",value:function(){var b=0===this.undos.length?"":"\n  "+(20<this.undos.length?"...\n  ":"")+this.undos.slice(-20).join("\n  ");return"UndoManager("+this.undos.length+" undos, "+this.redos.length+" redos, "+(this.undoInProgress?
", UNDO IN PROGRESS":"")+b+")"}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"UndoManager"}}],h,{pathInPackage:function(){return"undo.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:2639,end:5829})}(void 0);Xm.UndoManager=$I;Xm.UndoManager=$I;Xm.UndoManager=$I;var io=lively.FreezerRuntime.recorderFor("lively.morphic/events/TextInput.js");
io.promise=hg;io.bowser=gt;io.touchInputDevice=Sr;io.placeholderValue="\u0001\u0001";io.placeholderRe=/\u0001/g;var kaa=function(d){var h=lively.FreezerRuntime.recorderFor("lively.morphic/events/TextInput.js"),n=h.hasOwnProperty("TextInput")&&"function"===typeof h.TextInput?h.TextInput:h.TextInput=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Pb(n,d,[{key:Symbol.for("lively-instance-initialize"),value:function(b){this.eventDispatcher=
b;this.domState={rootNode:null,textareaNode:null,eventHandlers:[],isInstalled:!1};this.inputState={composition:null,manualCopy:null,manualPaste:null,positionChangedTime:0,scrollLeftWhenChanged:0,scrollTopWhenChanged:0}}},{key:"install",value:function(b,e){var l=this,a=this.domState,f=a.isInstalled,m=a.rootNode;this.world=e;if(f){if(m===b)return;this.uninstall()}a.isInstalled=!0;a.rootNode=b;b.tabIndex=1;e=a.textareaNode=b.ownerDocument.createElement("textarea");e.setAttribute("style","\n      position: absolute;\n      /*extent cannot be 0, input won't work correctly in Chrome 52.0*/\n      width: 20px; height: 20px;\n      z-index: 0;\n      opacity: 1;\n      background: transparent;\n      -moz-appearance: none;\n      appearance: none;\n      border: none;\n      resize: none;\n      outline: none;\n      overflow: hidden;\n      font: inherit;\n      padding: 0 1px;\n      margin: 0 -1px;\n      text-indent: -1em;\n      -ms-user-select: text;\n      -moz-user-select: text;\n      -webkit-user-select: text;\n      user-select: text;\n      /*with pre-line chrome inserts &nbsp; instead of space*/\n      white-space: pre!important;");
io.touchInputDevice&&e.setAttribute("x-palm-disable-auto-cap",!0);e.setAttribute("wrap","off");e.setAttribute("autocorrect","off");e.setAttribute("autocapitalize","off");e.setAttribute("spellcheck",!1);e.setAttribute("aria-label","Lively Textinput Node");e.className="lively-text-input";e.value="";b.insertBefore(e,b.firstChild);io.touchInputDevice&&(e.setAttribute("disabled",!0),e.style.setProperty("transform","scale(0)"));a.eventHandlers=[{type:"focusin",node:b,fn:function(r){return l.onRootNodeFocus(r)},
capturing:!0},{type:"focusin",node:a.textareaNode,fn:function(r){return l.onTextAreaFocus(r)},capturing:!0},{type:"blur",node:a.textareaNode,fn:function(r){return l.onTextAreaBlur(r)},capturing:!0},{type:"keydown",node:a.textareaNode,fn:function(r){return l.eventDispatcher.dispatchDOMEvent(r)},capturing:!1},{type:"keyup",node:a.textareaNode,fn:function(r){return l.eventDispatcher.dispatchDOMEvent(r)},capturing:!1},{type:"cut",node:a.textareaNode,fn:function(r){return l.eventDispatcher.dispatchDOMEvent(r)},
capturing:!1},{type:"copy",node:a.textareaNode,fn:function(r){return l.inputState.manualCopy?l.inputState.manualCopy.onEvent(r):l.eventDispatcher.dispatchDOMEvent(r)},capturing:!1},{type:"paste",node:a.textareaNode,fn:function(r){return l.inputState.manualPaste?l.inputState.manualPaste.onEvent(r):l.eventDispatcher.dispatchDOMEvent(r)},capturing:!1},{type:"compositionstart",node:a.textareaNode,fn:function(r){return l.onCompositionStart(r)},capturing:!1},{type:"compositionend",node:a.textareaNode,fn:function(r){return l.onCompositionEnd(r)},
capturing:!1},{type:"compositionupdate",node:a.textareaNode,fn:function(r){return l.onCompositionUpdate(r)},capturing:!1},{type:"input",node:a.textareaNode,fn:function(r){return l.onInput(r)},capturing:!1}];a.eventHandlers.forEach(function(r){return r.node.addEventListener(r.type,r.fn,r.capturing)});return this}},{key:"uninstall",value:function(){var b=this.domState;b.isInstalled=!1;b.eventHandlers.forEach(function(l){return l.node.removeEventListener(l.type,l.fn,l.capturing)});var e=b.textareaNode;
e&&e.parentNode&&e.parentNode.removeChild(e);b.rootNode=null;return this}},{key:"resetValue",value:function(){var b=this.domState.textareaNode;b&&(b.value=io.placeholderValue)}},{key:"readValue",value:function(){var b=this.domState.textareaNode;return b?b.value.replace(io.placeholderRe,""):""}},{key:"focus",value:function(b,e){var l=this.domState.textareaNode;l&&(io.touchInputDevice&&b&&b.isText&&!b.readOnly&&l.removeAttribute("disabled"),b&&b.stealFocus||l.ownerDocument.activeElement!==l&&l.focus(),
io.bowser.firefox&&Promise.resolve().then(function(){return l.ownerDocument.activeElement!==l&&l.focus()}),b&&b.isText&&b.focusable?(io.touchInputDevice&&l.focus(),this.ensureBeingAtCursorOfText(b)):e&&this.ensureBeingInVisibleBoundsOfWorld(e))}},{key:"blur",value:function(){var b=this.domState.textareaNode;io.touchInputDevice&&b.setAttribute("disabled",!0);b&&b.blur()}},{key:"doCopyWithMimeTypes",value:function(b){var e=this;return this.execCommand("manualCopy",function(){var l=e.domState.textareaNode,
a=function(f){l.removeEventListener("copy",a);f.preventDefault();b.forEach(function(m){return f.clipboardData.setData(m.type,m.data)})};setTimeout(function(){return l.removeEventListener("copy",a)},300);l.addEventListener("copy",a);l.value="";l.select();l.ownerDocument.execCommand("copy")})}},{key:"doCopy",value:function(b){var e=this;return this.execCommand("manualCopy",function(){var l=e.domState.textareaNode;l.value=b;l.select();l.ownerDocument.execCommand("copy")})}},{key:"doPaste",value:function(){var b=
this;return this.execCommand("manualPaste",function(){var e=b.domState.textareaNode;e.value="";e.select();e.ownerDocument.execCommand("paste")})}},{key:"execCommand",value:function(b,e){var l=this,a,f,m,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){switch(v.nextAddress){case 1:if(!l.domState.isInstalled)throw Error("Cannot copy to clipboard \u2013 input helper is not installed into DOM!");a=l.inputState;if(!a[b]){v.jumpTo(2);break}v.setCatchFinallyBlocks(3);return v.yield(a[b].promise,
5);case 5:v.leaveTryBlock(2);break;case 3:v.enterCatchBlock();case 2:return f=io.promise.deferred(),m=!1,a[b]={onEvent:function(x){m||(a[b]=null,m=!0,f.resolve(x))},promise:f.promise},e(),v.setCatchFinallyBlocks(6),v.yield(io.promise.waitFor(1E3,function(){return m}),8);case 8:v.leaveTryBlock(7);break;case 6:r=v.enterCatchBlock(),a[b]=null,m=!0,f.reject(r);case 7:return v.return(f.promise)}})}},{key:"onTextAreaBlur",value:function(b){var e=this;setTimeout(function(){var l=e.domState||{},a=l.textareaNode;
l=l.rootNode;!l||document.activeElement!==l||e.world.focusedMorph&&e.world.focusedMorph.stealFocus||io.touchInputDevice||lively.FreezerRuntime||a&&a.focus()})}},{key:"onTextAreaFocus",value:function(b){}},{key:"onRootNodeFocus",value:function(b){var e=this.domState||{},l=e.rootNode;if(b.target===e.textareaNode||b.target===l)this.world.focusedMorph&&this.world.focusedMorph.stealFocus||this.focus();this.inputState.composition=null}},{key:"onInput",value:function(b){if(!this.inputState.composition){if(!b.data){var e=
this.readValue();b.__defineGetter__("data",function(){return e})}this.resetValue();this.eventDispatcher.dispatchDOMEvent(b)}}},{key:"onCompositionStart",value:function(b){this.inputState.composition={};this.eventDispatcher.dispatchDOMEvent(b)}},{key:"onCompositionUpdate",value:function(b){var e=this.inputState.composition,l=this.readValue();e.lastValue!==l&&(e.lastValue=l,this.eventDispatcher.dispatchDOMEvent(b))}},{key:"onCompositionEnd",value:function(b){this.inputState.composition=null;this.eventDispatcher.dispatchDOMEvent(b)}},
{key:"setPosition",value:function(b){var e=(this.domState||{}).textareaNode;e&&(e.style.left=b.x+"px",e.style.top=b.y+"px")}},{key:"ensureBeingInVisibleBoundsOfWorld",value:function(b){this.setPosition(b.visibleBounds().center())}},{key:"ensureBeingAtCursorOfText",value:function(b){var e=b.world();if(e){var l=b.whatsVisible,a=b.cursorPosition,f=a.row;a=a.column;f=Math.max(l.startRow,Math.min(f,l.endRow));l=b.charBoundsFromTextPosition({row:f,column:a}).topLeft();b=e.visibleBounds().insetBy(10).constrainPt(b.worldPoint(l.subPt(b.scroll)));
this.inputState.positionChangedTime=Date.now();this.inputState.scrollLeftWhenChanged=document.documentElement.scrollLeft;this.inputState.scrollTopWhenChanged=document.documentElement.scrollTop;this.setPosition(b)}}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"TextInput"}}],h,{pathInPackage:function(){return"events/TextInput.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",
version:"0.1.2"}}},{start:237,end:12306})}(void 0),fra=kaa=io.TextInput;io.default=kaa;var IX=lively.FreezerRuntime.recorderFor("lively.morphic/events/KillRing.js");IX.arr=Mf;var laa=function(d){var h=lively.FreezerRuntime.recorderFor("lively.morphic/events/KillRing.js"),n=h.hasOwnProperty("KillRing")&&"function"===typeof h.KillRing?h.KillRing:h.KillRing=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Pb(n,d,[{key:Symbol.for("lively-instance-initialize"),
value:function(b){this.size=void 0===b?0:b;this.buffer=[];this.pointer=-1}},{key:"isCycling",value:function(){return this.pointer!==this.buffer.length-1}},{key:"add",value:function(b){var e=this.buffer;e.push(b);this.size&&e.length>this.size&&e.splice(0,e.length-this.size);this.pointer=this.buffer.length-1;return b}},{key:"yank",value:function(){return this.buffer[this.pointer]||""}},{key:"back",value:function(){this.pointer=(0>=this.pointer?this.buffer.length:this.pointer)-1;return this.yank()}}],
[{key:Symbol.for("__LivelyClassName__"),get:function(){return"KillRing"}}],h,{pathInPackage:function(){return"events/KillRing.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:51,end:621})}(void 0),gra=laa=IX.KillRing;IX.default=laa;var qi=lively.FreezerRuntime.recorderFor("lively.morphic/events/Keys.js");qi.computeHashIdOfEvent=
function(d){var h=d.key;d=0|(d.ctrlKey?1:0)|(d.altKey?2:0)|(d.shiftKey?4:0)|(d.metaKey?8:0);0===d&&!qi.canonicalizeFunctionKey(h)&&h&&qi.letterRe.test(h)&&(d=-1);return d};qi.isModifier=function(d){if(qi.isNumber(d))return!1;d=d.replace(/-$/,"").toLowerCase();return qi.arr.withoutAll(Object.keys(qi.KEY_MODS),["","input-"]).includes(d)};qi.canonicalizeFunctionKey=function(d){d&&(d=d.toLowerCase());switch(d){case "space":d="space";break;case "esc":d="escape";break;case "return":d="enter";break;case "arrowleft":d=
"left";break;case "arrowright":d="right";break;case "arrowup":d="up";break;case "arrowdown":d="down"}return qi.FUNCTION_KEYS.includes(d)?qi.string.capitalize(d):""};qi.decodeKeyIdentifier=function(d,h){var n=/u\+?([\d\w]{4})/gi,b=function(e,l){return String.fromCharCode(parseInt(l,16))};d=d&&d.replace(n,b);if("Command"===d||"Cmd"===d)d="Meta";" "===d&&(d="Space");8===h&&(d="Backspace");return d};qi.identifyKeyFromCode=function(d){d=d.code;if("string"!==typeof d)return null;if(d.startsWith("Key"))return d.slice(3);
if(d.startsWith("Numpad"))return d;if(d.startsWith("Digit")||d.startsWith("Arrow"))return d.slice(5);if(d.match(/^F[0-9]{1-2}$/))return d;switch(d){case "Insert":case "Home":case "PageUp":case "PageDown":return d;case "Period":return".";case "Comma":return",";case "Help":return"Insert";case "Equal":return"=";case "Backslash":case "IntlBackslash":return"\\";case "Equal":return"=";case "Minus":return"-";case "BracketRight":return"]";case "BracketLeft":return"[";case "Quote":return"'";case "Backquote":return"`";
case "Semicolon":return";"}return null};qi.dedasherize=function(d){for(var h=[];;){var n=d.indexOf("-");if(-1===n)return d&&h.push(d),h;0===n?(h.push(d[0]),d=d.slice(2)):(h.push(d.slice(0,n)),d=d.slice(n+1))}};qi.bowser=gt;qi.arr=Mf;qi.string=Th;qi.letterRe=/[a-z]/i;qi.MODIFIER_KEYS={16:"Shift",17:"Ctrl",18:"Alt",224:"Meta"};qi.KEY_MODS=function(){for(var d={control:1,ctrl:1,alt:2,option:2,shift:4,super:8,win:8,meta:8,command:8,cmd:8},h=["alt","ctrl","meta","shift"],n=Math.pow(2,h.length);n--;)d[n]=
h.filter(function(b){return n&d[b]}).join("-")+"-";d[0]="";d[-1]="input-";return d}();qi.isNumber=function(){var d=/^[0-9]+$/;return function(h){return d.test(h)}}();qi.FUNCTION_KEYS="backspace;tab;enter;pause;escape; ;pageup;pagedown;end;home;left;up;right;down;print;insert;delete;numpad0;numpad1;numpad2;numpad3;numpad4;numpad5;numpad6;numpad7;numpad8;numpad9;numpadenter;f1;f2;f3;f4;f5;f6;f7;f8;f9;f10;f11;f12;numlock;scrolllock".split(";");qi.Keys={computeHashIdOfEvent:qi.computeHashIdOfEvent,keyComboToEventSpec:function(d,
h){h=Object.assign({_isLivelyKeyEventSpec:!0,keyCombo:"",key:"",ctrlKey:!1,shiftKey:!1,altKey:!1,metaKey:!1,altGraphKey:!1,isFunctionKey:!1,isModified:!1,onlyModifiers:!1},h);var n=qi.dedasherize(d),b={shift:"shiftKey",control:"ctrlKey",ctrl:"ctrlKey",alt:"altKey",meta:"metaKey",command:"metaKey",cmd:"metaKey"};if("input"===n[0]&&2===n.length)return h.keyCombo=d,h.key=n[1],h;for(var e=n.length-1;0<=e;e--){var l=b[n[e].toLowerCase()];l&&(n.splice(e,1),h.isModified=!0,h[l]=!0)}if(!n.length)return h.keyCombo=
qi.Keys.eventToKeyCombo(h),h.key=qi.arr.last(qi.dedasherize(h.keyCombo)),h.onlyModifiers=!0,h;1<n.length&&console.warn('Strange key "'+d+'" encountered in keyComboToEventSpec, parsing probably failed');d=qi.arr.last(n);(n=qi.canonicalizeFunctionKey(d))?(h.isFunctionKey=!0,h.key=n):h.key=h.isModified?qi.string.capitalize(d):d;h.keyCombo=qi.Keys.eventToKeyCombo(h);return h},eventToKeyCombo:function(d,h){Object.assign({ignoreModifiersIfNoCombo:!1,ignoreKeys:[]},h);h=d.key;var n=d.data,b=d.keyIdentifier;
if("string"===typeof n)return"input-"+n;if(!h&&b&&(h=qi.decodeKeyIdentifier(b,d.which||d.keyCode),d.key=h=h[d.shiftKey?"toUpperCase":"toLowerCase"](),qi.isModifier(h)))return qi.string.capitalize(h);n=qi.KEY_MODS[qi.computeHashIdOfEvent(d)];if("input-"===n)return n+h;d.code&&(h=qi.identifyKeyFromCode(d)||h);d=!h||qi.isModifier(h)?n.replace(/-$/,""):n+h;d.match(/\s$/)&&(d=d.replace(/\s$/,"Space"));return d.replace(/(^|-)([a-z])/g,function(e,l,a){return l+a.toUpperCase()})},canonicalizeKeyCombo:function(d){return qi.Keys.eventToKeyCombo(qi.Keys.keyComboToEventSpec(d))},
canonicalizeEvent:function(d){return d._isLivelyKeyEventSpec?d:qi.Keys.keyComboToEventSpec(qi.Keys.eventToKeyCombo(d))}};var JX=qi.Keys;qi.default=JX;var ri=lively.FreezerRuntime.recorderFor("lively.morphic/events/Event.js");ri.bowser=gt;ri.obj=ng;ri.pt=Ei;ri.Keys=JX;ri.cumulativeOffset=lu;var KX="pointerover pointerenter pointerout pointerleave pointerdown pointermove pointerup pointercancel gotpointercapture lostpointercapture".split(" ");ri.pointerEvents=KX;ri.pointerEvents=KX;ri.pointerEvents=
KX;var LX="mouseover mouseenter mousedown mousemove mouseup mouseout mouseleave click dblclick contextmenu mousewheel".split(" ");ri.mouseEvents=LX;ri.mouseEvents=LX;ri.mouseEvents=LX;var MX=["keydown","keyup","keypress"];ri.keyboardEvents=MX;ri.keyboardEvents=MX;ri.keyboardEvents=MX;var kP=ri.keyboardEvents.concat("input","compositionstart","compositionupdate","compositionend");ri.keyLikeEvents=kP;ri.keyLikeEvents=kP;ri.keyLikeEvents=kP;var lP=function(d){var h=lively.FreezerRuntime.recorderFor("lively.morphic/events/Event.js"),
n=h.hasOwnProperty("Event")&&"function"===typeof h.Event?h.Event:h.Event=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Pb(n,d,[{key:Symbol.for("lively-instance-initialize"),value:function(b,e,l,a,f,m,r){this.type=b;this.domEvt=e;this.dispatcher=l;this.targetMorphs=a;this.hand=f;this.halo=m;this.layoutHalo=r;this.stopped=!1;this._keyCombo=void 0;this.onDispatchCallbacks=[];this.onAfterDispatchCallbacks=[];this.onStopCallbacks=
[]}},{key:"onDispatch",value:function(b){this.onDispatchCallbacks.push(b);return this}},{key:"onAfterDispatch",value:function(b){this.onAfterDispatchCallbacks.push(b);return this}},{key:"onStop",value:function(b){this.onStopCallbacks.push(b);return this}},{key:"data",get:function(){return this.domEvt.data}},{key:"world",get:function(){return this.dispatcher.world}},{key:"state",get:function(){return this.dispatcher.eventState}},{key:"keyInputState",get:function(){return this.state.keyInputState}},
{key:"isMouseEvent",value:function(){return ri.pointerEvents.includes(this.type)||ri.mouseEvents.includes(this.type)}},{key:"isKeyboardEvent",value:function(){return!this.isMouseEvent()&&ri.keyboardEvents.includes(this.type)}},{key:"stop",value:function(){this.stopped=!0;this.domEvt&&"function"===typeof this.domEvt.stopPropagation&&this.domEvt.stopPropagation();this.domEvt&&"function"===typeof this.domEvt.preventDefault&&this.domEvt.preventDefault();this.onStopCallbacks.forEach(function(b){return b()})}},
{key:"targetMorph",get:function(){return this.targetMorphs[0]}},{key:"timestamp",get:function(){return this.domEvt.timeStamp}},{key:"position",get:function(){if(!this.domEvt)return ri.pt(0,0);for(var b=this.domEvt.target;b&&b.id!==this.world.id;)b=b.parentNode;b||(b=this.domEvt.target,b=(b.nodeType===b.DOCUMENT_NODE?b:b.ownerDocument).getElementById(this.world.id));if(!b)return console.error("event position: cannot find world node for determining the position!"),ri.pt(0,0);b=ri.cumulativeOffset(b);
var e=this.domEvt;b=ri.pt((e.pageX||0)-b.left,(e.pageY||0)-b.top);1!==this.world.scale&&(b=b.scaleBy(1/this.world.scale));return b}},{key:"startPosition",get:function(){return this.state.clickedOnPosition}},{key:"pressure",get:function(){return this.domEvt?this.domEvt.pressure:.5}},{key:"positionIn",value:function(b){return b.localize(this.position)}},{key:"isClickTarget",value:function(b){var e=this.state.clickedOnMorph;return e&&(b===e||b.isAncestorOf(e))}},{key:"leftMouseButtonPressed",value:function(){return this.domEvt?
1===this.domEvt.buttons:!1}},{key:"rightMouseButtonPressed",value:function(){return this.domEvt?2===this.domEvt.buttons:!1}},{key:"middleMouseButtonPressed",value:function(){return this.domEvt?4===this.domEvt.buttons:!1}},{key:"isCommandKey",value:function(){var b=this.domEvt;if(!b)return!1;var e=!1;ri.bowser.mac||(e=e||b.ctrlKey);if(ri.bowser.tablet||ri.bowser.tablet)e=e||!1;return e||b.metaKey||"Meta"===b.keyIdentifier}},{key:"isShiftDown",value:function(){return this.domEvt&&!!this.domEvt.shiftKey}},
{key:"isCtrlDown",value:function(){return this.domEvt&&!!this.domEvt.ctrlKey}},{key:"isAltDown",value:function(){return this.domEvt&&!!this.domEvt.altKey}},{key:"keyCombo",get:function(){return this._keyCombo||(this._keyCombo=ri.Keys.eventToKeyCombo(this.domEvt))}},{key:"keyCombo",set:function(b){return this._keyCombo=b}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Event"}}],h,{pathInPackage:function(){return"events/Event.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:957,end:4837})}(void 0);ri.Event=lP;ri.Event=lP;ri.Event=lP;var mP=function(d){var h=lively.FreezerRuntime.recorderFor("lively.morphic/events/Event.js"),n=h.hasOwnProperty("KeyEvent")&&"function"===typeof h.KeyEvent?h.KeyEvent:h.KeyEvent=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};
return Pb(n,d,[{key:Symbol.for("lively-instance-initialize"),value:function(b,e,l,a,f,m,r){console.assert(ri.keyLikeEvents.includes(b),"not a keyboard event: "+b);Pb._get(Object.getPrototypeOf(n.prototype),Symbol.for("lively-instance-initialize"),this).call(this,b,e,l,a,f,m,r);Object.assign(this,ri.Keys.canonicalizeEvent(e))}},{key:"isKeyEvent",get:function(){return!0}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"KeyEvent"}}],h,{pathInPackage:function(){return"events/Event.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:4846,end:5216})}(ri.Event);ri.KeyEvent=mP;ri.KeyEvent=mP;ri.KeyEvent=mP;var nP=function(d){var h=lively.FreezerRuntime.recorderFor("lively.morphic/events/Event.js"),n=h.hasOwnProperty("SimulatedDOMEvent")&&"function"===typeof h.SimulatedDOMEvent?h.SimulatedDOMEvent:h.SimulatedDOMEvent=
function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Pb(n,d,[{key:Symbol.for("lively-instance-initialize"),value:function(b){b=void 0===b?{}:b;if(b.position){var e=b.position,l=e.x;e=e.y;b=ri.obj.dissoc(b,["position"]);b.pageX=l;b.pageY=e}!b.hasOwnProperty("pointerId")&&ri.mouseEvents.concat(ri.pointerEvents).includes(b.type)&&(b=Object.assign({},b,{pointerId:1}));Object.assign(this,Object.assign({type:void 0,target:void 0,
pageX:void 0,pageY:void 0,pointerId:void 0,pointerType:"mouse",buttons:0,keyCode:void 0,keyString:"",keyIdentifier:void 0,altKey:!1,ctrlKey:!1,shiftKey:!1,metaKey:!1,stopped:!1},b))}},{key:"preventDefault",value:function(){this.defaultPrevented=!0}},{key:"stopPropagation",value:function(){this.propagationStopped=!0}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"SimulatedDOMEvent"}}],h,{pathInPackage:function(){return"events/Event.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:5225,end:6130})}(void 0);ri.SimulatedDOMEvent=nP;ri.SimulatedDOMEvent=nP;ri.SimulatedDOMEvent=nP;var uf=lively.FreezerRuntime.recorderFor("lively.morphic/events/EventDispatcher.js");uf.dragStartEvent=function(d,h,n,b,e,l,a){var f=(new uf.Event("morphicdragstart",d,h,[n],e,l,a)).onDispatch(function(){b.draggedMorph=n;b.dragStartMorphPosition=n.position;b.dragStartPosition=
f.position;b.lastDragPosition=f.position;b.dragDelta=uf.pt(0,0);b.absDragDelta=uf.pt(0,0)}).onStop(function(){b.draggedMorph=null;h.schedule(uf.dragEndEvent(d,h,n,b,e,l,a))});return f};uf.dragEvent=function(d,h,n,b,e,l,a){var f=(new uf.Event("morphicdrag",d,h,[b.draggedMorph],e,l,a)).onDispatch(function(){b.dragDelta=(b.draggedMorph.owner||h.world).getInverseTransform().transformDirection(f.position.subPt(b.lastDragPosition));b.absDragDelta=f.position.subPt(b.clickedOnPosition)}).onAfterDispatch(function(){return b.lastDragPosition=
f.position}).onStop(function(){b.draggedMorph=null;h.schedule(uf.dragEndEvent(d,h,n,b,e,l,a))});return f};uf.dragEndEvent=function(d,h,n,b,e,l,a){var f=b.draggedMorph||n,m=(new uf.Event("morphicdragend",d,h,[f],e,l,a)).onDispatch(function(){b.dragDelta=(f.owner||h.world).getInverseTransform().transformDirection(m.position.subPt(b.lastDragPosition));b.absDragDelta=m.position.subPt(b.clickedOnPosition)}).onAfterDispatch(function(){b.draggedMorph=null;b.lastDragPosition=null;b.dragDelta=uf.pt(0,0);b.absDragDelta=
uf.pt(0,0);b.dragStartMorphPosition=null;b.dragStartPosition=null});return m};uf.focusEvents=function(d,h){var n=d.eventState;if(n.focusedMorph===h)return[];d=[];n.focusedMorph&&d.push((new uf.Event("blur",null,this,[n.focusedMorph],null,null,null)).onDispatch(function(){return n.focusedMorph=null}));d.push((new uf.Event("focus",null,this,[h],null,null,null)).onDispatch(function(){return n.focusedMorph=h}));return d};uf.arr=Mf;uf.fun=vn;uf.Path=Ih;uf.promise=hg;uf.pt=Ei;uf.config=em;uf.TextInput=
fra;uf.KillRing=gra;uf.Event=lP;uf.KeyEvent=mP;uf.SimulatedDOMEvent=nP;uf.keyLikeEvents=kP;uf.cumulativeOffset=lu;uf.bowser=gt;uf.domEventsWeListenTo=[{type:"pointerdown",capturing:!1},{type:"pointerup",capturing:!1},{type:"pointermove",capturing:!1,passive:!1},{type:"pointerover",capturing:!1,passive:!1},{type:"pointerout",capturing:!1,passive:!1},{type:"contextmenu",capturing:!1},{type:"wheel",capturing:!1,passive:!1},{type:"scroll",capturing:!0,passive:!1},{type:"drag",capturing:!1},{type:"dragstart",
capturing:!1},{type:"dragend",capturing:!1},{type:"dragover",capturing:!1},{type:"dragenter",capturing:!1},{type:"dragleave",capturing:!1},{type:"drop",capturing:!1}];uf.eventsCausingImmediateRender=new Set(["pointerdown","pointerup","keydown","keyup","input"]);uf.globalDomEventsWeListenTo=[{type:"resize",capturing:!1,morphMethod:"onWindowResize"},{type:"orientationchange",capturing:!1,morphMethod:"onWindowResize"},{type:"scroll",capturing:!1,passive:!1,morphMethod:"onWindowScroll"},{type:"wheel",
capturing:!1,passive:!1,morphToMethod:"onMouseWheel"},{type:"beforeunload",capturing:!1,passive:!1,morphMethod:"onBeforeUnload"}];uf.typeToMethodMap={pointerdown:"onMouseDown",pointerup:"onMouseUp",pointermove:"onMouseMove",longclick:"onLongClick",hoverin:"onHoverIn",hoverout:"onHoverOut",morphicdrag:"onDrag",morphicdragstart:"onDragStart",morphicdragend:"onDragEnd",grab:"onGrab",morphicdrop:"onDrop",morphicdrophoverin:"onDropHoverIn",morphicdrophoverout:"onDropHoverOut",morphicdrophoverupdate:"onDropHoverUpdate",
keydown:"onKeyDown",keyup:"onKeyUp",input:"onTextInput",compositionstart:"onCompositionStart",compositionupdate:"onCompositionUpdate",compositionend:"onCompositionEnd",blur:"onBlur",focus:"onFocus",contextmenu:"onContextMenu",cut:"onCut",copy:"onCopy",paste:"onPaste",scroll:"onScroll",wheel:"onMouseWheel",drag:"onNativeDrag",dragstart:"onNativeDragstart",dragend:"onNativeDragend",dragover:"onNativeDragover",dragenter:"onNativeDragenter",dragleave:"onNativeDragleave",drop:"onNativeDrop"};uf.focusTargetingEvents=
"keydown keyup keypress input compositionstart compositionupdate compositionend cut copy paste".split(" ");uf.textOnlyEvents=["input","compositionstart","compositionupdate","compositionend"];var maa=function(d){var h=lively.FreezerRuntime.recorderFor("lively.morphic/events/EventDispatcher.js"),n=h.hasOwnProperty("EventDispatcher")&&"function"===typeof h.EventDispatcher?h.EventDispatcher:h.EventDispatcher=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return Pb(n,d,[{key:Symbol.for("lively-instance-initialize"),value:function(b,e){this.activations=0;this.emitter=b;this.keyInputHelper=null;this.world=e;this.installed=!1;this.handlerFunctions=[];this.killRing=new uf.KillRing(uf.config.text.clipboardBufferLength);this.nodeMorphMap=new WeakMap;this.timestampBase=uf.Path("performance.timing.navigationStart").get(b)||0;this.resetState()}},{key:"resetState",value:function(){this.eventState={timeOfLastActivity:0,focusedMorph:null,clickedOnPosition:null,
clickedOnMorph:null,clickCount:0,prevClick:{},draggedMorph:null,dragDelta:null,absDragDelta:null,lastDragPosition:null,dragStartMorphPosition:null,dragStartPosition:null,hover:{hoveredOverMorphs:[],unresolvedPointerOut:!1},scroll:{interactiveScrollInProgress:null},keyInputState:null,pressedKeys:{},html5Drag:{},dropHoverTarget:null};this.resetKeyInputState()}},{key:"resetKeyInputState",value:function(){this.eventState.keyInputState={keyChain:"",count:void 0}}},{key:"focusMorph",value:function(b){var e=
this;this.keyInputHelper&&this.keyInputHelper.focus(b,this.world);uf.focusEvents(this,b).forEach(function(l){return e.dispatchEvent(l)})}},{key:"isMorphFocused",value:function(b){return this.eventState.focusedMorph===b}},{key:"isMorphHovered",value:function(b){return this.eventState.hover.hoveredOverMorphs.includes(b)}},{key:"isMorphClicked",value:function(b){return this.eventState.clickedMorph==b}},{key:"isKeyPressed",value:function(b){return Object.keys(this.eventState.pressedKeys).map(function(e){return e.toLowerCase()}).includes(b.toLowerCase())}},
{key:"whenIdle",value:function(){var b=this;return uf.promise.waitFor(function(){return 0===b.activations})}},{key:"install",value:function(b){var e=this;if(this.installed)return this;this.installed=!0;var l=this.emitter,a=System.global;uf.domEventsWeListenTo.forEach(function(f){var m=f.type,r=f.capturing;f=f.passive;var v=function(x){return e.dispatchDOMEvent(x)};e.handlerFunctions.push({node:l,type:m,fn:v,capturing:r});l.addEventListener(m,v,{capture:r,passive:f})});a.addEventListener&&uf.globalDomEventsWeListenTo.forEach(function(f){var m=
f.type,r=f.capturing,v=f.morphMethod;f=f.passive;var x=function(y){return e.dispatchDOMEvent(y,e.world,v)};e.handlerFunctions.push({node:a,type:m,fn:x,capturing:r});a.addEventListener(m,x,{capture:r,passive:f})});this.keyInputHelper=(new uf.TextInput(this)).install(b,this.world);uf.bowser.ios&&b.setAttribute("touch-action","auto");return this}},{key:"uninstallHandler",value:function(b){var e=this.handlerFuntions.find(function(l){return l.type==b});e&&e.node.removeEventListener(e.node,e.fn,e.capturing)}},
{key:"uninstall",value:function(){this.installed=!1;var b=this.handlerFunctions;b.forEach(function(e){e.node.removeEventListener(e.type,e.fn,e.capturing)});b.length=0;this.keyInputHelper&&this.keyInputHelper.uninstall();this.keyInputHelper=null;return this}},{key:"processDOMEvent",value:function(b,e){var l=this,a=b.type,f=this.eventState,m=[e].concat(e.ownerChain()),r="touch"===b.pointerType,v=b.pointerId,x="number"===typeof v?this.world.handForPointerId(v,b.isPrimary):this.world.firstHand,y="number"!==
typeof v||r?null:this.world.haloForPointerId(v),E="number"!==typeof v||r?null:this.world.layoutHaloForPointerId(v),F=new (uf.keyLikeEvents.includes(a)?uf.KeyEvent:uf.Event)(a,b,this,m,x,y,E),I=[F],J=[];switch(a){case "keydown":f.pressedKeys[F.key]=!0;break;case "keyup":"Meta"===F.key?f.pressedKeys={}:delete f.pressedKeys[F.key];break;case "click":I=this.processDOMEvent(Object.assign({},b,{type:"pointerdown"}),e).events;a=this.processDOMEvent(Object.assign({},b,{type:"pointerup"}),e).events;I=I.concat(a);
break;case "pointerdown":F.onDispatch(function(){l.focusMorph(e);f.clickedOnMorph=e;f.clickedOnPosition=F.position;f.downTimeStamp=b.timeStamp;var P=!1,N=0;if(f.prevClick){N=f.prevClick;P=N.clickedOnMorph;var Y=N.clickedAtTime;N=N.clickCount;Y=Date.now()-Y;P=P===e&&Y<uf.config.repeatClickInterval}f.clickCount=P?N+1:1});break;case "pointerup":F.onAfterDispatch(function(){var P=f.clickedOnMorph,N=f.clickedOnPosition,Y=f.clickCount,W=Date.now();f.prevClick={clickedOnMorph:P,clickedOnPosition:N,clickedAtTime:W,
clickCount:Y};f.clickedOnMorph=null;f.clickCount=0;P=b.timeStamp-f.downTimeStamp;N=f.clickedOnPosition.dist(F.position);Y=uf.config.longClick;W=Y.minDur;var da=Y.maxDur;N<Y.maxDist&&P>=W&&P<=da&&(P=new uf.Event("longclick",b,l,m,x,y,E),l.schedule(P))});f.draggedMorph&&(I.push(uf.dragEndEvent(b,this,e,f,x,y,E)),F.targetMorphs=[this.world]);x.carriesMorphs()&&(f.dropHoverTarget?(I.push(new uf.Event("morphicdrophoverout",b,this,[f.dropHoverTarget],x,y,E)),e=f.dropHoverTarget,f.dropHoverTarget=null):
e=x.findDropTarget(F.position,x.grabbedMorphs),x.isAncestorOf(e)&&(e=this.world),I.push(new uf.Event("morphicdrop",b,this,[e],x,y,E)),F.targetMorphs=[this.world]);break;case "pointermove":x.carriesMorphs()?(F.targetMorphs=[this.world],a=x.findDropTarget(F.position,x.grabbedMorphs)||this.world,f.dropHoverTarget===a?I.push(new uf.Event("morphicdrophoverupdate",b,this,[a],x,y,E)):(f.dropHoverTarget&&I.push(new uf.Event("morphicdrophoverout",b,this,[f.dropHoverTarget],x,y,E)),f.dropHoverTarget=a,I.push(new uf.Event("morphicdrophoverin",
b,this,[a],x,y,E)))):f.draggedMorph?(F.targetMorphs=[this.world],I.push(uf.dragEvent(b,this,e,f,x,y,E))):f.clickedOnMorph&&f.clickedOnPosition&&f.clickedOnMorph.draggable&&!f.draggedMorph&&!x.carriesMorphs()&&(a=f.clickedOnPosition.dist(F.position),r=f.clickedOnMorph,a>r.dragTriggerDistance&&(r.grabbable?I.push(new uf.Event("grab",b,this,[r],x,y,E)):r.draggable&&I.push(uf.dragStartEvent(b,this,r,f,x,y,E)),F.targetMorphs=[this.world]));break;case "pointerover":f.hover.unresolvedPointerOut&&(f.hover.unresolvedPointerOut=
!1);a=[e].concat(e.ownerChain()).reverse();I=uf.arr.withoutAll(f.hover.hoveredOverMorphs,a).map(function(P){return(new uf.Event("hoverout",b,l,[P],x,y,E)).onDispatch(function(){return uf.arr.remove(f.hover.hoveredOverMorphs,P)})});a=uf.arr.withoutAll(a,f.hover.hoveredOverMorphs).map(function(P){return(new uf.Event("hoverin",b,l,[P],x,y,E)).onDispatch(function(){return uf.arr.pushIfNotIncluded(f.hover.hoveredOverMorphs,P)})});I=I.concat(a);break;case "pointerout":I=[];f.hover.unresolvedPointerOut=
!0;J.push(function(){if(f.hover.unresolvedPointerOut)return Promise.all(f.hover.hoveredOverMorphs.map(function(P){return l.schedule((new uf.Event("hoverout",b,l,[P],x,y,E)).onAfterDispatch(function(){return uf.arr.remove(f.hover.hoveredOverMorphs,P)}))}))});r&&this.world.removeHandForPointerId(v);break;case "blur":I=[(new uf.Event(a,b,this,[e],x,y,E)).onDispatch(function(){return f.focusedMorph=null})];break;case "focus":I=uf.focusEvents(this,e);break;case "scroll":I=[(new uf.Event(a,b,this,[e],x,
y,E)).onDispatch(function(){if(!f.scroll.interactiveScrollInProgress){var P=uf.promise.deferred(),N=P.promise,Y=P.resolve;P="Firefox"==uf.bowser.name?500:250;"Safari"==uf.bowser.name&&(P=1E3);f.scroll.interactiveScrollInProgress=N;N.debounce=uf.fun.debounce(P,function(){f.scroll.interactiveScrollInProgress=null;Y()})}f.scroll.interactiveScrollInProgress.debounce();N=b.target.documentElement||b.target;P=N.scrollLeft;var W=N.scrollTop,da=e.scroll,va=da.x;da=da.y;if("hidden"!=N.style.overflow&&va!==
P||da!==W)e.scroll=uf.pt(P,W)})];break;case "input":case "compositionstart":case "compositionupdate":case "compositionend":e.isText?F.targetMorphs=[e]:I=[];break;case "drag":case "dragstart":case "dragend":case "dragover":case "dragenter":case "dragleave":case "drop":"drop"!==a&&"dragover"!==a||b.preventDefault()}return{events:I,later:J}}},{key:"schedule",value:function(b){var e=this;this.activations++;return Promise.resolve().then(function(){return e.dispatchEvent(b)}).then(function(){return e.activations--},
function(l){e.activations--;throw l;})}},{key:"dispatchEvent",value:function(b,e){e=e||uf.typeToMethodMap[b.type];if(!e)throw Error("dispatchEvent: "+b.type+" not yet supported!");b.onDispatchCallbacks.forEach(function(f){return f()});this.activations++;for(var l,a=b.targetMorphs.length-1;0<=a;a--){try{b.targetMorphs[a][e](b)}catch(f){l=Error("Error in event handler "+b.targetMorphs[a]+"."+e+": "+(f.stack||f)),l.originalError=f,"undefined"!==typeof this.world?this.world.logError(l):console.error(l)}if(l||
b.stopped)break}this.activations--;b.onAfterDispatchCallbacks.forEach(function(f){return f()});if(l)throw l;}},{key:"dispatchDOMEvent",value:function(b,e,l){var a=this,f=this.world,m=this.eventState,r=this.nodeMorphMap,v=b.type;m.timeOfLastActivity=this.timestampBase+b.timeStamp;if(!e&&uf.focusTargetingEvents.includes(v))e=m.focusedMorph||f;else if(!e){for(m=b.target;;){e=m.className||"";"string"!==typeof e&&"baseVal"in e&&(e=e.baseVal);if(e&&e.includes("Morph"))break;if(!(m=m.parentNode))return}e=
r.get(m);if(!e){var x=m.id;(e=f.withAllSubmorphsDetect(function(y){return y.id===x}))&&r.set(m,e)}}e&&(b=this.processDOMEvent(b,e),r=b.events,b.later.map(function(y){a.activations++;return uf.promise.delay(0).then(y).then(function(){return a.activations--},function(E){a.activations--;throw E;})}),r.forEach(function(y){return a.dispatchEvent(y,l)}),f&&f.needsRerender()&&uf.eventsCausingImmediateRender.has(v)&&f.env.renderer.renderLater())}},{key:"simulateDOMEvents",value:function(b){for(var e=[],l=
0;l<arguments.length;++l)e[l-0]=arguments[l];l=this.emitter.document||this.emitter.ownerDocument;var a=[];e=$jscomp.makeIterator(e);for(var f=e.next();!f.done;f=e.next()){var m=f=f.value,r=m.target,v=m.position;m=m.type;if(uf.focusTargetingEvents.includes(m)){if(!this.keyInputHelper.domState.textareaNode)throw Error("Cannot simulate event of type "+m+", no keyInputHelper installed!");f=Object.assign({},f,{target:this.keyInputHelper.textareaNode})}r||(r=v?this.world.morphsContainingPoint(v)[0]:this.world);
r.isMorph&&(f=Object.assign({},f,{target:l.getElementById(r.id)}));f.position&&(r=uf.cumulativeOffset(l.getElementById(this.world.id)),f.position=f.position.addXY(r.left,r.top));"scroll"===m&&("scrollLeft"in f||"scrollTop"in f)&&(f.target.scrollLeft=f.scrollLeft||0,f.target.scrollTop=f.scrollTop||0);f=new uf.SimulatedDOMEvent(f);a.push(f);this.dispatchDOMEvent(f)}return a}},{key:"doCopy",value:function(b){return this.keyInputHelper.doCopy(b)}},{key:"doCopyWithMimeTypes",value:function(b){return this.keyInputHelper.doCopyWithMimeTypes(b)}},
{key:"doPaste",value:function(){return this.keyInputHelper.doPaste()}},{key:"cancelGrab",value:function(b,e){var l=this,a=[],f=this.eventState;f.clickedOnMorph=null;f.dropHoverTarget&&(a.push(new uf.Event("morphicdrophoverout",e.domEvt,this,[f.dropHoverTarget],b,null,null)),f.dropHoverTarget=null);a.forEach(function(m){return l.dispatchEvent(m)})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"EventDispatcher"}}],h,{pathInPackage:function(){return"events/EventDispatcher.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:7120,end:29815})}(void 0),hra=maa=uf.EventDispatcher;uf.default=maa;var fm=lively.FreezerRuntime.recorderFor("lively.morphic/env.js");fm.defaultDOMEnv=Xx;fm.Renderer=iP;fm.FontMetric=era;fm.ChangeManager=jP;fm.UndoManager=$I;fm.EventDispatcher=hra;fm.subscribe=Gp;fm.unsubscribe=Ox;var Zs=Ha("bh",function(d){var h=lively.FreezerRuntime.recorderFor("lively.morphic/env.js"),
n=h.hasOwnProperty("MorphicEnv")&&"function"===typeof h.MorphicEnv?h.MorphicEnv:h.MorphicEnv=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Pb(n,d,[{key:Symbol.for("lively-instance-initialize"),value:function(b){var e=this;b=void 0===b?fm.defaultDOMEnv():b;this.initialized=!1;this.synchronizer=this.objPool=this.systemChangeHandlers=this.world=this.eventDispatcher=this.renderer=this.fontMetric=null;this.changeManager=
new fm.ChangeManager;this.undoManager=new fm.UndoManager;this.installSystemChangeHandlers();this.whenRenderedRequesters=new Map;this.whenRenderedTickingProcess=null;"function"===typeof b.then?this._waitForDOMEnv=b.then(function(l){e._waitForDOMEnv=null;e.initWithDOMEnv(l);e.initialized=!0}).catch(function(l){return console.error("Error initializing MorphicEnv with dom env: "+l.stack)}):(this.initWithDOMEnv(b),this.initialized=!0)}},{key:"isDefault",value:function(){return this.constructor.default()===
this}},{key:"initWithDOMEnv",value:function(b){this.domEnv=b;this.fontMetric=fm.FontMetric.forDOMEnv(b)}},{key:"uninstallWorldRelated",value:function(){this.renderer&&this.renderer.clear();this.eventDispatcher&&this.eventDispatcher.uninstall();this.world&&this.world.suspendSteppingAll()}},{key:"uninstall",value:function(){var b=this;if(this._waitForDOMEnv)return this._waitForDOMEnv.then(function(){return b.uninstall()});this.deleteHistory();this.uninstallWorldRelated();this.fontMetric&&(this.fontMetric.uninstall(),
this.fontMetric=null);this.domEnv&&this.whenRenderedTickingProcess&&(this.domEnv.window.cancelAnimationFrame(this.whenRenderedTickingProcess),this.whenRenderedTickingProcess=null);this.whenRenderedRequesters=new Map;this.domEnv&&this.domEnv.destroy();this.initialized=!1;return Promise.resolve()}},{key:"setWorld",value:function(b,e){var l=this;e=void 0===e?this.renderer?this.renderer.rootNode:this.domEnv.document.body:e;return this._waitForDOMEnv?this._waitForDOMEnv.then(function(){return l.setWorld(b)}):
this.setWorldRenderedOn(b,e)}},{key:"setWorldRenderedOn",value:function(b,e,l){var a=this;l=void 0===l?null:l;if(!b||!b.isWorld)throw Error("world object does not look like a morphic world");if(this._waitForDOMEnv)return this._waitForDOMEnv.then(function(){return a.setWorldRenderedOn(b,e,l)});this.deleteHistory();this.uninstallWorldRelated();this.world=b;this.renderer=new fm.Renderer(b,e,this.domEnv);this.renderer.domNode=l;this.eventDispatcher=(new fm.EventDispatcher(this.domEnv.window,b)).install(e);
b.resumeSteppingAll();this.isDefault()&&(this.domEnv.window.$world=b);b.focus();b.makeDirty();this.renderer.renderLater();return b.whenRendered().then(function(){return a})}},{key:"installSystemChangeHandlers",value:function(){var b=this;if(!this.systemChangeHandlers){var e=this.systemChangeHandlers={};e["lively.modules/moduleloaded"]=[fm.subscribe("lively.modules/moduleloaded",function(l){return b.getTargetsFor("onModuleLoaded").forEach(function(a){return a.onModuleLoaded(l)})})];e["lively.modules/modulechanged"]=
[fm.subscribe("lively.modules/modulechanged",function(l){return b.getTargetsFor("onModuleChanged").forEach(function(a){return a.onModuleChanged(l)})})];e["lively.partsbin/partpublished"]=[fm.subscribe("lively.partsbin/partpublished",function(l){return b.getTargetsFor("onPartPublished").forEach(function(a){return a.onPartPublished(l)})})];e["lively.user/userchanged"]=[fm.subscribe("lively.user/userchanged",function(l){return b.getTargetsFor("onUserChanged").forEach(function(a){return a.onUserChanged(l)})})]}}},
{key:"uninstallSystemChangeHandlers",value:function(){var b=this.systemChangeHandlers;b&&(this.systemChangeHandlers=null,Object.keys(b).forEach(function(e){return b[e].forEach(function(l){return fm.unsubscribe(e,l)})}))}},{key:"getTargetsFor",value:function(b){var e=this.world,l=[];if(!e||!e.submorphs)return l;"function"===typeof e[b]&&l.push(e);e=$jscomp.makeIterator(e.submorphs);for(var a=e.next();!a.done;a=e.next())a=a.value,"function"===typeof a[b]&&l.push(a),a.isWindow&&a.targetMorph&&"function"===
typeof a.targetMorph[b]&&l.push(a.targetMorph);return l}},{key:"cleanupCaches",value:function(){this.world.withAllSubmorphsDo(function(b){return b._pathDependants=b._pathDependants.filter(function(e){return e.world()})})}},{key:"deleteHistory",value:function(){var b=this.changeManager,e=this.world,l=this.fontMetric;b&&(b.changes.length=0);e&&e.withAllSubmorphsDo(function(a){return a.undoManager&&a.undoManager.reset()});l&&l.reset()}},{key:"printStatus",value:function(){var b=this.changeManager,e=
this.world,l=0,a=0;e&&e.withAllSubmorphsDo(function(f){f.undoManager&&(l++,a+=f.undoManager.undos.length+f.undoManager.redos.length)});return b.changes.length+" changes recorded\n"+l+" morphs with undos\n"+a+" undo changes"}},{key:"updateWhenRenderedRequests",value:function(){for(var b=this,e=this.whenRenderedRequesters,l=0,a=$jscomp.makeIterator(e),f=a.next();!f.done;f=a.next()){var m=$jscomp.makeIterator(f.value);f=m.next().value;var r=m=m.next().value,v=r.maxAttempts,x=r.resolve;r=r.reject;f._dirty||
f._rendering?++m.currentAttempt>v?(e.delete(f),r(Error("Failed to wait for whenRendered of "+f+" (tried "+v+"x)"))):l++:(e.delete(f),x(f))}this.whenRenderedTickingProcess=l?this.domEnv.window.requestAnimationFrame(function(){return b.updateWhenRenderedRequests()}):null}},{key:"whenRendered",value:function(b,e){var l=this;e=void 0===e?50:e;var a=this.whenRenderedRequesters,f=this.whenRenderedTickingProcess,m=a.get(b);if(!m){var r,v;m=new Promise(function(x,y){r=x;v=y});a.set(b,m={maxAttempts:e,currentAttempt:0,
resolve:r,reject:v,promise:m})}f||(this.whenRenderedTickingProcess=this.domEnv.window.requestAnimationFrame(function(){return l.updateWhenRenderedRequests()}));return m.promise}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"MorphicEnv"}},{key:"reset",value:function(){for(;;){var b=this.popDefault();if(!b)break;try{b.uninstall()}catch(e){console.error("Error uninstalling MorphicEnv: "+(e.stack||e))}}}},{key:"default",value:function(){var b=this.envs;b.length||this.pushDefault(new this);
return b[b.length-1]}},{key:"pushDefault",value:function(b){this.envs.push(b);return b}},{key:"popDefault",value:function(){return this.envs.pop()}},{key:"envs",get:function(){return this._envs||(this._envs=[])}}],h,{pathInPackage:function(){return"env.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:405,end:8336})}(void 0));fm.MorphicEnv=
Zs;fm.MorphicEnv=Zs;fm.MorphicEnv=Zs;var ira=Object.freeze({__proto__:null,MorphicEnv:Zs}),By=lively.FreezerRuntime.recorderFor("lively.morphic/CommandHandler.js");By.printArg=function(d){return By.obj.inspect(d,{maxDepth:1}).replace(/\n/g,"").replace(/\s+/g," ")};By.obj=ng;By.arr=Mf;By.promise=hg;var naa=function(d){var h=lively.FreezerRuntime.recorderFor("lively.morphic/CommandHandler.js"),n=h.hasOwnProperty("CommandHandler")&&"function"===typeof h.CommandHandler?h.CommandHandler:h.CommandHandler=
function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Pb(n,d,[{key:Symbol.for("lively-instance-initialize"),value:function(){this.history=[];this.maxHistorySize=1E3}},{key:"addToHistory",value:function(b){this.history.push(b);this.history.length>this.maxHistorySize&&this.history.splice(0,this.history.length-this.maxHistorySize)}},{key:"printHistory",value:function(){return this.history.map(this.printCommand).join("\n")}},
{key:"printCommand",value:function(b){var e=b.target.string,l=b.args,a=b.count,f=b.evt,m=b.keyCombo;return'"'+b.name+'" '+(f?f+" ":"")+(m?m+" ":"")+(l?By.printArg(l):"")+("number"===typeof a?" x"+a:"")+" "+e}},{key:"lookupCommand",value:function(b,e){var l;if(!b)return{};"string"===typeof b&&(l=b);"string"===typeof b.command&&(l=b.command);if(b.exec){var a=b;l=a.name}a||(a=e.commands.find(function(f){return f.name===l}));return{name:l,command:a}}},{key:"exec",value:function(b,e,l,a,f){var m=this,
r=this.lookupCommand(b,e)||{},v=r.name,x=r.command;if(!x)return console.warn("Cannot find command "+(v||b)),null;if(v){if(f){var y=f.type;if(f.isKeyEvent)var E=f.keyCombo}this.addToHistory({name:v,target:{string:String(e),id:e.id},args:l,count:a,time:Date.now(),evt:y,keyCombo:E})}var F=e.world();"string"===typeof x.progressIndicator&&(this.progressIndicator=F.execCommand("open loading indicator",x.progressIndicator));if("function"===typeof x.exec)try{var I=x.exec(e,l,x.handlesCount?a:void 0,f)}catch(J){I=
J,b="Error in interactive command "+v+": "+(J.stack||J),F?F.logError(b):console.error(b)}else console.error("command "+v+" has no exec function!");this.progressIndicator&&this.progressIndicator.remove();I&&"function"===typeof I.catch?(I.catch(function(J){var P="Error in interactive command "+v+": "+J+"\n"+(J.stack||J);F?F.logError(P):console.error(P);throw J;}),this.progressIndicator&&By.promise.finally(I,function(){return m.progressIndicator.remove()})):this.progressIndicator&&this.progressIndicator.remove();
I&&"number"===typeof a&&1<a&&!x.handlesCount&&(I="function"===typeof I.then?I.then(function(){return m.exec(x,e,l,a-1,f,null)}):this.exec(x,e,l,a-1,f,null));return I}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"CommandHandler"}}],h,{pathInPackage:function(){return"CommandHandler.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},
{start:194,end:3656})}(void 0),jra=naa=By.CommandHandler;By.default=naa;var Lg=lively.FreezerRuntime.recorderFor("lively.morphic/events/KeyHandler.js");Lg.ensureSpaces=function(d){return d.length?d:" "};Lg.invokeKeyHandlers=function(d,h,n){n=void 0===n?!1:n;var b=h=Lg.Keys.canonicalizeEvent(h),e=b.key,l=b.data,a,f=!1,m=d.keyhandlers,r=h.keyInputState||{};b=b.keyCombo.startsWith("input-");var v=!1,x=r.count,y=r.keyChain||"",E=!1;if(!m||n&&b)return!1;for(n=m.length;n--;)if((a=m[n].eventCommandLookup(d,
h))&&a.command){E=a;a=E.command;var F=E.args,I=E.passEvent,J=E.count;v=E.keyChain;var P=E.onlyWhenFocused;E=!0;x=J;y=v;v="null"===a;if(P&&(P=d.world())&&P.focusedMorph&&P.focusedMorph!==d)continue;f=v?!1:d.execCommand(a,F,J,h);!f||b&&"insertstring"===a||I||"function"!==typeof h.stop||h.stop();if(f||v)break}f||v||!b||!d.onTextInput||y||(f=d.execCommand("insertstring",{string:l||e,undoGroup:Lg.config.text.undoGroupDelay},r.count,h));if(E)if("function"===typeof h.onAfterDispatch)h.onAfterDispatch(function(){r.count=
f?void 0:x;r.keyChain=f?"":y});else r.count=f?void 0:x,r.keyChain=f?"":y;return f&&!v};Lg.simulateKeys=function(d,h,n){n=void 0===n?{keyChain:void 0,count:void 0}:n;var b,e,l,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){1==f.nextAddress&&(b=1===h.length?[h]:h.split(/ /g).map(Lg.ensureSpaces),e=$jscomp.makeIterator(b),l=e.next());if(3!=f.nextAddress){if(l.done)return f.jumpTo(0);a=l.value;return f.yield(Lg.simulateKey(d,a,n),3)}l=e.next();return f.jumpTo(2)})};Lg.simulateKey=function(d,
h,n){return Lg.invokeKeyHandlers(d,Object.assign({},Lg.Keys.keyComboToEventSpec(h),{keyInputState:n}))};Lg.bowserOS=function(){return Lg.bowser.mac?"mac":Lg.bowser.windows?"windows":Lg.bowser.windowsphone?"windowsphone":Lg.bowser.linux?"linux":Lg.bowser.chromeos?"chromeos":Lg.bowser.android?"android":Lg.bowser.ios?"ios":Lg.bowser.blackberry?"blackberry":Lg.bowser.firefoxos?"firefoxos":Lg.bowser.webos?"webos":Lg.bowser.bada?"bada":Lg.bowser.tizen?"tizen":Lg.bowser.sailfish?"sailfish":"unknown"};Lg.findKeysForPlatform=
Ic;Lg.Keys=JX;Lg.bowser=gt;Lg.config=em;Lg.arr=Mf;Lg.findKeysForPlatform=Ic;Lg.findKeysForPlatform=Ic;Lg.regexps={meta:/Meta|Cmd|Command/gi,alt:/Alt/gi,ctrl:/Ctrl|Control/gi,tab:/Tab/gi,enter:/Enter|Return/gi,shift:/Shift/gi,backspace:/Backspace/gi,delete:/del(ete)?/gi,left:/left/gi,right:/right/gi,up:/up/gi,down:/down/gi,keySpacer:/([^-])-/g,seqSpacer:/([^\s])\s/g};var NX=function(d){var h=lively.FreezerRuntime.recorderFor("lively.morphic/events/KeyHandler.js"),n=h.hasOwnProperty("KeyHandler")&&
"function"===typeof h.KeyHandler?h.KeyHandler:h.KeyHandler=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Pb(n,d,[{key:Symbol.for("lively-instance-initialize"),value:function(b){this.platform=b=void 0===b?Lg.bowserOS():b;this.keyBindings={}}},{key:"eventCommandLookup",value:function(b,e){return this.lookup(e.keyCombo,e.keyInputState)}},{key:"lookup",value:function(b,e){var l=this;e=void 0===e?{keyChain:void 0,
count:void 0}:e;b=Lg.Keys.canonicalizeKeyCombo(b);var a=e.keyChain||"";e=e.count;if(!a&&b.startsWith("Ctrl-")){var f=b.match(/^Ctrl-([0-9]+)/);if(f)return{command:"null",count:parseInt(("number"===typeof e?e:"")+f[1])};if("Ctrl-U"===b)return{command:"null",count:4,keyChain:"Ctrl-U"}}f=[b];if(!r&&b.startsWith("input-")){r=b.replace(/^(input-)(.*)$/,function(v,x,y){return x+y.toUpperCase()});var m=b.replace(/^(input-)(.*)$/,function(v,x,y){return x+y.toLowerCase()});f.push(r,m)}var r=f.map(function(v){return l.keyBindings[v]})[0];
a&&(f=f.find(function(v){return l.keyBindings[a+" "+v]}))&&(a+=" "+f,r=this.keyBindings[a]||r);if(r&&"chainKeys"===r)return a=a||b,b={command:"null",keyChain:a},void 0!==e&&(b.count=e),b;if(r)return b="object"===typeof r?Object.assign({},r):{command:r},void 0!==e&&(b.count=e),b}},{key:"bindKey",value:function(b,e){var l=this;"object"===typeof b&&b&&!Array.isArray(b)&&(b=Lg.findKeysForPlatform(b,this.platform));if(b){if("function"===typeof e)return this.addCommand({exec:e,bindKey:b,name:e.name||b});
(Array.isArray(b)?b:b.includes("|")?b.split("|"):[b]).forEach(function(a){var f="";if(-1!=a.indexOf(" ")){var m=a.split(/\s+/);a=m.pop();m.forEach(function(r){r=Lg.Keys.canonicalizeKeyCombo(r);f+=(f?" ":"")+r;l.addCommandToBinding(f,"chainKeys")});f+=" "}l.addCommandToBinding(f+Lg.Keys.canonicalizeKeyCombo(a),e)});this.cleanupUnusedKeyChains()}}},{key:"unbindKey",value:function(b){this.bindKey(b,null)}},{key:"cleanupUnusedKeyChains",value:function(){var b=this,e=Object.keys(this.keyBindings),l=e.filter(function(a){return"chainKeys"===
b.keyBindings[a]});l=Lg.arr.sortBy(l,function(a){return a.length}).reverse();l.forEach(function(a){e.some(function(f){return a!==f&&f.startsWith(a)})||(delete b.keyBindings[a],Lg.arr.remove(e,a),Lg.arr.remove(l,a))})}},{key:"addCommand",value:function(b){return b&&b.bindKey?this.addCommandToBinding(b.bindKey,b):void 0}},{key:"addCommandToBinding",value:function(b,e){var l=this;"chainKeys"===this.keyBindings[b]&&"chainKeys"!=e&&Object.keys(this.keyBindings).forEach(function(a){a.startsWith(b)&&delete l.keyBindings[a]});
e?this.keyBindings[b]=e:delete this.keyBindings[b];"chainKeys"!==e&&this.cleanupUnusedKeyChains()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"KeyHandler"}},{key:"invokeKeyHandlers",value:function(b,e,l){return Lg.invokeKeyHandlers(b,e,void 0===l?!1:l)}},{key:"simulateKeys",value:function(b,e,l){return Lg.simulateKeys(b,e,l)}},{key:"withBindings",value:function(b,e){var l=new this(e);b.forEach(function(a){return l.bindKey(a.keys,a.command)});return l}},{key:"prettyCombo",value:function(b){var e=
this._prettyCombos||(this._prettyCombos={});return this._prettyCombos[b]?e[b]:e[b]=b.replace(Lg.regexps.meta,"\u2318").replace(Lg.regexps.alt,"\u2325").replace(Lg.regexps.ctrl,"\u2303").replace(Lg.regexps.tab,"\u21e5").replace(Lg.regexps.enter,"\u23ce").replace(Lg.regexps.shift,"\u21e7").replace(Lg.regexps.backspace,"\u232b").replace(Lg.regexps.delete,"\u2326").replace(Lg.regexps.left,"\u2192").replace(Lg.regexps.right,"\u2190").replace(Lg.regexps.up,"\u2191").replace(Lg.regexps.down,"\u2193").replace(Lg.regexps.keySpacer,
"$1").replace(Lg.regexps.seqSpacer,"$1-")}},{key:"generateCommandToKeybindingMap",value:function(b,e,l){function a(v){if(r[v.id])return r[v.id];var x=m[v.id]||(m[v.id]=v.keyCommandMap);return r[v.id]=Lg.arr.groupBy(Object.keys(x),function(y){return x[y].name})}var f=this;l=void 0===l?!0:l;var m={},r={};return((void 0===e?0:e)?b.commandsIncludingOwners:b.commands.map(function(v){return{command:v,target:b}})).map(function(v){var x=v.target;v=v.command;var y=a(x)[v.name];return{keys:y,target:x,command:v,
prettyKeys:y&&l?y.map(function(E){return f.prettyCombo(E)}):null}})}}],h,{pathInPackage:function(){return"events/KeyHandler.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:6052,end:12987})}(void 0);NX=Lg.KeyHandler;var OX=Ha("ae",NX);Lg.default=NX;var DA=lively.FreezerRuntime.recorderFor("lively.morphic/ticking.js"),oaa=function(d){var h=
lively.FreezerRuntime.recorderFor("lively.morphic/ticking.js"),n=h.hasOwnProperty("Script")&&"function"===typeof h.Script?h.Script:h.Script=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Pb(n,d,[{key:Symbol.for("lively-instance-initialize"),value:function(){this.suspended=!1;this.stopped=!0;this.currentTimeout=this.type=this.tickTime=null}},{key:"__additionally_serialize__",value:function(b,e,l){b.props.suspended.value=
!0}},{key:"isScript",get:function(){return!0}},{key:"global",get:function(){return System.global}},{key:"execute",value:function(){throw Error("subclass responsibility");}},{key:"tick",value:function(){try{this.execute()}catch(b){console.error("Error executing script "+this+": "+b+"\n"+b.stack);return}this.stopped||this.startTicking(this.tickTime)}},{key:"startTicking",value:function(b){this.stopped=!1;this.tickTime=b;this.type="number"===typeof b?"setTimeout":"requestAnimationFrame";this.currentTimeout=
"setTimeout"===this.type?this.global.setTimeout(this.tick.bind(this),b):this.global.requestAnimationFrame(this.tick.bind(this))}},{key:"stop",value:function(){this.global["setTimeout"===this.type?"clearTimeout":"cancelAnimationFrame"](this.currentTimeout);this.stopped=!0}},{key:"resume",value:function(b){b=void 0===b?this.tickTime:b;this.suspended&&(this.suspended=!1,this.startTicking(this.tickTime=b))}},{key:"suspend",value:function(){this.stop();this.suspended=!0}}],[{key:Symbol.for("__LivelyClassName__"),
get:function(){return"Script"}}],h,{pathInPackage:function(){return"ticking.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:21,end:1376})}(void 0),PX=function(d){var h=lively.FreezerRuntime.recorderFor("lively.morphic/ticking.js"),n=h.hasOwnProperty("TargetScript")&&"function"===typeof h.TargetScript?h.TargetScript:h.TargetScript=
function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Pb(n,d,[{key:Symbol.for("lively-instance-initialize"),value:function(b,e,l){Pb._get(Object.getPrototypeOf(n.prototype),Symbol.for("lively-instance-initialize"),this).call(this);this.target=b;this.selector=e;this.args=l||[]}},{key:"execute",value:function(){this.target.isMorph&&!this.target.tickingScripts.includes(this)&&this.stop();"function"===typeof this.target[this.selector]&&
this.target[this.selector].apply(this.target,this.args)}},{key:"equals",value:function(b){return b.isScript&&this.target==b.target&&this.selector==b.selector}},{key:"toString",value:function(){return"Script("+this.target+">>"+this.selector+"("+this.args.join(",")+"))"}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"TargetScript"}}],h,{pathInPackage:function(){return"ticking.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:1378,end:2013})}(DA.Script),paa=function(d){var h=lively.FreezerRuntime.recorderFor("lively.morphic/ticking.js"),n=h.hasOwnProperty("FunctionScript")&&"function"===typeof h.FunctionScript?h.FunctionScript:h.FunctionScript=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Pb(n,d,[{key:Symbol.for("lively-instance-initialize"),value:function(b){Pb._get(Object.getPrototypeOf(n.prototype),
Symbol.for("lively-instance-initialize"),this).call(this);this.callback=b}},{key:"execute",value:function(){this.callback()}},{key:"equals",value:function(b){return b.isScript&&this.callback==b.callback}},{key:"toString",value:function(){return"Script("+(this.callback.toString().replace(/\n/g,"").slice(0,40)+"...)")}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"FunctionScript"}}],h,{pathInPackage:function(){return"ticking.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:2015,end:2354})}(DA.Script);DA.Script=oaa;DA.Script=oaa;DA.TargetScript=PX;DA.TargetScript=PX;DA.FunctionScript=paa;DA.FunctionScript=paa;var Cq=lively.FreezerRuntime.recorderFor("lively.modules/src/hooks.js");Cq.install=Vc;Cq.remove=xd;Cq.isInstalled=Yc;Cq.arr=Mf;Cq.fun=vn;Cq.install=Vc;Cq.install=Vc;Cq.remove=xd;Cq.remove=xd;Cq.isInstalled=Yc;Cq.isInstalled=
Yc;var oP=lively.FreezerRuntime.recorderFor("lively.modules/src/cycle-breaker.js");oP.classHolder={};var Cy=oP.classHolder;oP.classHolder=Cy;oP.classHolder=Cy;var Yx=lively.FreezerRuntime.recorderFor("lively.modules/src/dependencies.js");Yx.computeRequireMap=ge;Yx.graph=sy;Yx.arr=Mf;Yx.obj=ng;Yx.loadedModules=vL;Yx.computeRequireMap=ge;Yx.computeRequireMap=ge;var fp=lively.FreezerRuntime.recorderFor("lively.modules/src/import-export.js");fp.scheduleModuleExportsChange=Ue;fp.runScheduledExportChanges=
fe;fp.clearPendingModuleExportChanges=function(d,h){delete d.get("@lively-env").pendingExportChanges[h]};fp.updateModuleExports=function(d,h,n){var b=d.debug;fp.module(d,h).updateRecord(function(e){var l=[],a=[];Object.keys(n).forEach(function(E){var F=n[E];b&&console.log("[lively.vm es6 updateModuleExports] %s export %s = %s",h,E,String(F).slice(0,30).replace(/\n/g,"")+"...");var I=!(E in e.exports);I&&(e.__lively_modules__.evalOnlyExport[E]=!0);e.exports[E]=F;I?l.push(E):a.push(E)});if(l.length){var f=
d.get(h);Object.isFrozen(f)?(console.warn("[lively.vm es6 updateModuleExports] Since module %s is frozen a new module object was installed in the system. Note that only(!) exisiting module bindings are updated. New exports that were added will only be available in already loaded modules after those are reloaded!",h),d.set(h,d.newModule(e.exports))):(b&&console.log("[lively.vm es6 updateModuleExports] adding new exports to %s",h),l.forEach(function(E){Object.defineProperty(f,E,{configurable:!1,enumerable:!0,
get:function(){return e.exports[E]},set:function(){throw Error("exports cannot be changed from the outside");}})}))}if(a.length){b&&console.log("[lively.vm es6 updateModuleExports] updating %s dependents of %s",e.importers.length,h);for(var m=0,r=e.importers.length;m<r;m++){var v=e.importers[m];if(!v.locked){var x;if(v.dependencies.some(function(E,F){x=F;return E&&E.name===e.name})){if(b){var y=fp.module(d,v.name);console.log("[lively.vm es6 updateModuleExports] calling setters of "+y["package"]().name+
"/"+y.pathInPackage())}fp.module(d,v.name).evaluationStart();v.setters[x](e.exports);fp.module(d,v.name).evaluationEnd()}}}}})};fp.module=Dq;fp.scheduleModuleExportsChange=Ue;fp.scheduleModuleExportsChange=Ue;fp.runScheduledExportChanges=fe;fp.runScheduledExportChanges=fe;var Jk=lively.FreezerRuntime.recorderFor("lively.modules/src/change.js");Jk.moduleSourceChange=Hd;Jk.moduleSourceChangeEsm=function(d,h,n,b){var e,l,a,f,m,r,v,x,y,E,F,I,J,P,N;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Y){switch(Y.nextAddress){case 1:return e=
d.debug,l={status:"loading",source:n,name:h,address:h,linkSets:[],dependencies:[],metadata:{format:"esm"}},Y.yield(Jk.instrumentSourceOfEsmModuleLoad(d,l),2);case 2:a=Y.yieldResult,f=function(W,da){return Jk.scheduleModuleExportsChange(d,l.name,W,da,!0)},m=a.declare(f),e&&console.log("[lively.vm es6] sourceChange of %s with deps",l.name,a.localDeps),r=[],v=$jscomp.makeIterator(a.localDeps),x=v.next();case 3:if(x.done){Y.jumpTo(5);break}y=x.value;return Y.yield(d.normalize(y,l.name),6);case 6:return E=
Y.yieldResult,F=Jk.classHolder.module(d,E),Y.yield(F.load(),7);case 7:I=Y.yieldResult;r.push({name:y,fullname:E,module:F,exports:I});x=v.next();Y.jumpTo(3);break;case 5:if(J=d.loads&&d.loads[l.name])J.deps=r.map(function(W){return W.name}),J.depMap=r.reduce(function(W,da){W[da.name]=da.fullname;return W},{}),J.metadata&&J.metadata.entry&&(J.metadata.entry.deps=J.deps,J.metadata.entry.normalizedDeps=r.map(function(W){return W.fullname}),J.metadata.entry.declare=a.declare);P=Jk.classHolder.module(d,
l.name);N=P.record();r.forEach(function(W,da){return P.addDependencyToModuleRecord(W.module,m.setters[da])});N&&(N.execute=m.execute);r.forEach(function(W,da){return m.setters[da](W.exports)});return Y.return(m.execute())}})};Jk.moduleSourceChangeGlobal=function(d,h,n,b){var e,l,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){if(1==f.nextAddress)return e={status:"loading",source:n,name:h,address:h,linkSets:[],dependencies:[],metadata:{format:"global"}},d.get(h)?f.jumpTo(2):f.yield(d["import"](h),
2);if(4!=f.nextAddress)return f.yield(Jk.instrumentSourceOfGlobalModuleLoad(d,e),4);l=f.yieldResult;e.source=l.translated;a=Jk.doInstantiateGlobalModule(d,e);d.delete(h);d.set(a.name,a.esModule);return f.return(a.module)})};Jk.doInstantiateGlobalModule=function(d,h){var n=Jk.__createEntry();n.name=h.name;n.esmExports=!0;h.metadata.entry=n;n.deps=[];for(var b in h.metadata.globals){var e=h.metadata.globals[b];e&&n.deps.push(e)}n.execute=function(l,a,f){(a=(a=Jk.classHolder.module(d,f.id).metadata())&&
a.entry&&a.entry.module&&a.entry.module.exports)&&Object.keys(a).forEach(function(v){try{delete d.global[v]}catch(x){console.warn('[lively.modules] executeGlobalModule: Cannot delete global["'+v+'"]')}});if(h.metadata.globals){var m={};for(var r in h.metadata.globals)h.metadata.globals[r]&&(m[r]=l(h.metadata.globals[r]))}if(l=h.metadata.exports)h.source+='\nSystem.global["'+l+'"] = '+l+";";f=d.get("@@global-helpers").prepareGlobal(f.id,l,m);Jk.__evaluateGlobalLoadSource(d,h);return f()};return Jk.runExecuteOfGlobalModule(d,
n)};Jk.__createEntry=function(){return{name:null,deps:null,originalIndices:null,declare:null,execute:null,executingRequire:!1,declarative:!1,normalizedDeps:null,groupIndex:null,evaluated:!1,module:null,esModule:null,esmExports:!1}};Jk.__evaluateGlobalLoadSource=function(d,h){function n(){0==--e&&(l.System=l.SystemJS=b)}var b,e=0,l=d.global;return function(a){try{0==e++&&(b=l.System),l.System=l.SystemJS=this,(0,eval)(a.source),n()}catch(f){throw n(),Error("Error evaluating "+a.address+":\n"+f.stack);
}}.call(d,h)};Jk.runExecuteOfGlobalModule=function(d,h){var n={},b=h.module={exports:n,id:h.name};h.evaluated=!0;if(n=h.execute.call(d.global,function(e){var l=h.deps.find(function(a){return a===e});if(l=l&&d.get(h.normalizedDeps[h.deps.indexOf(l)])||d.get(d.decanonicalize(e,h.name)))return l;throw Error("Module "+e+" not declared as a dependency of "+h.name);},n,b))b.exports=n;n=b.exports;b=d.get("@system-env").constructor;h.esModule=n&&(n.__esModule||n instanceof b)?n:h.esmExports&&n!==d.global?
d.newModule(n):{"default":n};return h};Jk.arr=Mf;Jk.emit=jn;Jk.instrumentSourceOfEsmModuleLoad=Sn;Jk.instrumentSourceOfGlobalModuleLoad=MB;Jk.scheduleModuleExportsChange=Ue;Jk.classHolder=Cy;Jk.moduleSourceChange=Hd;Jk.moduleSourceChange=Hd;var Rn=lively.FreezerRuntime.recorderFor("lively.modules/src/url-helpers.js");Rn.isJsFile=df;Rn.asDir=Je;Rn.isURL=we;Rn.urlResolve=Se;Rn.string=Th;Rn.isJsFile=df;Rn.isJsFile=df;Rn.asDir=Je;Rn.asDir=Je;var aJ=Rn.string.joinPath;Rn.join=aJ;Rn.join=aJ;Rn.join=aJ;
Rn.isURL=we;Rn.isURL=we;Rn.urlResolve=Se;Rn.urlResolve=Se;var lt=lively.FreezerRuntime.recorderFor("lively.modules/src/packages/configuration.js");lt.arr=Mf;lt.obj=ng;lt.isURL=we;lt.installHook=Vc;lt.isHookInstalled=Yc;var Mw=function(d){this.pkg=d};Mw.prototype.applyConfig=function(d){var h=this.System,n=this.packageURL,b=this.pkg;d=lt.obj.deepMerge(b.config,d);var e=d.name||n.split("/").slice(-1)[0],l=d.version,a=d.systemjs||{},f=d.lively,m=d.main||"index.js",r={},v={};h.config({map:(r[e]=n,r),
packages:(v[n]=Object.assign({},a,{meta:Object.assign({"package.json":{format:"json"}},a.meta),configured:!0}),v)});h.packages[n].configured=!0;h=h.getConfig().packages[n]||{};h.map||(h.map={});a&&(f&&f.main?m=f.main:a.main&&(m=a.main),this.applySystemJSConfig(a));m.match(/\.[^\/\.]+/)||(m+=".js");h.main=m;b.version=l;b.config=d;b._name=e;b.mergeWithConfig(h);return f?this.applyLivelyConfig(f):{subPackages:[]}};Mw.prototype.applySystemJSConfig=function(d){var h=this.System;d.packageConfigPaths&&h.config({packageConfigPaths:lt.arr.uniq(h.packageConfigPaths.concat(d.packageConfigPaths))});
d.packages&&h.config({packages:d.packages});d.globalmap&&h.config({map:d.globalmap});d.babelOptions&&h.config({babelOptions:d.babelOptions});d.meta&&h.config({meta:d.meta})};Mw.prototype.applyLivelyConfig=function(d){this.applyLivelyConfigMeta(d);this.applyLivelyConfigHooks(d);this.applyLivelyConfigBundles(d)};Mw.prototype.applyLivelyConfigHooks=function(d){var h=this;(d.hooks||[]).forEach(function(n){try{var b=eval("("+n.source+")");b.name&&lt.isHookInstalled(h.System,n.target,b.name)||lt.installHook(h.System,
n.target,b)}catch(e){console.error("Error installing hook for %s: %s",h.packageURL,e,n)}})};Mw.prototype.applyLivelyConfigBundles=function(d){var h=this;if(!d.bundles)return Promise.resolve();var n=Object.keys(d.bundles).reduce(function(b,e){var l=h.packageURL+"/"+e;e=d.bundles[e].map(function(a){return h.System.decanonicalize(a,h.packageURL+"/")});b[l]=e;return b},{});this.System.config({bundles:n});return Promise.resolve()};Mw.prototype.applyLivelyConfigMeta=function(d){if(d.meta){var h={},n=this.System.getConfig().packages[this.packageURL]||
{},b={meta:{},packages:(h[this.packageURL]=n,h)};Object.keys(d.meta).forEach(function(e){var l=d.meta[e];lt.isURL(e)?b.meta[e]=l:(n.meta||(n.meta={}),n.meta[e]=l)});this.System.config(b)}};$jscomp.global.Object.defineProperties(Mw.prototype,{System:{configurable:!0,enumerable:!0,get:function(){return this.pkg.System}},packageURL:{configurable:!0,enumerable:!0,get:function(){return this.pkg.url}}});lt.PackageConfiguration=Mw;lt.default=Mw;var ef=lively.FreezerRuntime.recorderFor("lively.modules/src/packages/package.js");
ef.normalizePackageURL=function(d,h,n){n=void 0===n?[]:n;if(n.some(function(b){return b===h}))return h;d=d.decanonicalize(h.replace(/[\/]+$/,"")+"/");if(!ef.isURL(d))throw Error("Strange package URL: "+d+" is not a valid URL");d.match(/\.js/)&&(d=-1<d.indexOf(d+".js")?d.replace(/\.js$/,""):d.split("/").slice(0,-1).join("/"));d.match(/\.js$/)&&console.warn("packageURL is expected to point to a directory but seems to be a .js file: "+d);return String(d).replace(/\/$/,"")};ef.lookupPackage=nf;ef.ensurePackage=
wf;ef.getPackage=Wf;ef.applyConfig=Dh;ef.importPackage=jk;ef.removePackage=ak;ef.reloadPackage=nj;ef.registerPackage=vh;ef.getPackageSpecs=uk;ef.arr=Mf;ef.promise=hg;ef.obj=ng;ef.emit=jn;ef.module=Dq;ef.resource=A;ef.PackageConfiguration=Mw;ef.isURL=we;ef.join=aJ;ef.classHolder=Cy;var Hj=function(d,h,n,b,e){e=void 0===e?{}:e;this.System=d;this.url=h;this.registerProcess=null;this.map={};this.setConfig(e)};Hj.allPackages=function(d){return ef.obj.values(ef.classHolder.PackageRegistry.ofSystem(d).byURL)};
Hj.allPackageURLs=function(d){return ef.classHolder.PackageRegistry.ofSystem(d).allPackageURLs()};Hj.forModule=function(d,h){return this.forModuleId(d,h.id)};Hj.forModuleId=function(d,h){return(h=ef.classHolder.ModulePackageMapping.forSystem(d).getPackageURLForModuleId(h))?ef.getPackage(d,h,!0):null};Hj.fromJSON=function(d,h){return(new ef.Package(d)).fromJSON(h)};Hj.prototype.setConfig=function(d){this._name=d.name;this.version=d.version;this.dependencies=d.dependencies||{};this.devDependencies=
d.devDependencies||{};this.main=d.main||"index.js";this.systemjs=d.systemjs;this.lively=d.lively};Hj.prototype.toJSON=function(){var d=this.System,h=ef.obj.select(this,"url _name version map dependencies devDependencies main systemjs lively".split(" "));h.url.startsWith(d.baseURL)&&(h.url=h.url.slice(d.baseURL.length).replace(/^\//,""));return h};Hj.prototype.fromJSON=function(d){var h=this.System;this.url=d.url;this._name=d._name;this.version=d.version;this.map=d.map||{};this.main=d.main;this.dependencies=
d.dependencies||{};this.devDependencies=d.devDependencies||{};this.systemjs=d.systemjs;this.lively=d.lively;ef.isURL(this.url)||(this.url=ef.join(h.baseURL,this.url));this.registerWithConfig();return this};Hj.prototype.asSpec=function(){return Object.assign({},ef.obj.select(this,"name main map meta url address version lively".split(" ")),{modules:this.modules().map(function(d){return{name:d.id,deps:d.directRequirements().map(function(h){return h.id})}})})};Hj.prototype.path=function(){var d=this.System.baseURL;
return 0===this.url.indexOf(d)?this.url.slice(d.length):this.url};Hj.prototype.modules=function(){var d=this.url,h=this.System;return ef.classHolder.ModulePackageMapping.forSystem(h).getModuleIdsForPackageURL(d).map(function(n){return ef.module(h,n)})};Hj.prototype.resources=function(d,h){h=void 0===h?[".git","node_modules",".module_cache","lively.next-node_modules"]:h;var n=this,b,e,l,a,f,m,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(x){if(1==x.nextAddress)return b=n,e=b.System,
l=b.url,a=ef.Package.allPackageURLs(e),f=a.filter(function(y){return y!==l&&!l.startsWith(y)}),x.yield(ef.resource(l).dirList("infinity",{exclude:h}),2);m=x.yieldResult;r=m.filter(function(y){return!y.isDirectory()&&!f.some(function(E){return y.url.startsWith(E)})}).map(function(y){return y.url});v=ef.arr.pluck(n.modules(),"id");d&&(r=r.filter(d));return x.return(r.map(function(y){var E=y.replace(l,"").replace(/^\//,"");return{isLoaded:v.includes(y),url:y,nameInPackage:E,package:n}}))})};Hj.prototype.hasResource=
function(d){var h=this.url;return(d.startsWith(h)?ef.resource(d):ef.resource(h).join(d)).exists()};Hj.prototype.toString=function(){return"Package("+this.name+" - "+this.path()+"/)"};Hj.prototype.mergeWithConfig=function(d){var h=d=Object.assign({},d),n=h.name;h=h.map;n&&(delete d.name,this._name=n);h&&(delete d.map,Object.assign(this.map,h));Object.assign(this,d);return this};Hj.prototype.addMapping=function(d,h){this.map[d]=h;var n={},b={};this.System.config({packages:(b[this.url]={map:(n[d]=h,
n)},b)})};Hj.prototype.tryToLoadPackageConfig=function(){var d=this,h,n,b,e,l,a,f,m,r,v,x;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){switch(y.nextAddress){case 1:h=d;n=h.System;b=h.url;e=b+"/package.json";l={};a={};n.config({meta:(l[e]={format:"json"},l),packages:(a[b]={meta:{"package.json":{format:"json"}}},a)});n.debug&&console.log("[lively.modules package reading config] %s",e);y.setCatchFinallyBlocks(2);if(f=n.get(e)){y.jumpTo(4);break}return y.yield(n.import(e),5);case 5:f=
y.yieldResult;case 4:return m=f,r=[].concat($jscomp.arrayFromIterable(n.packageConfigPaths)),ef.arr.pushIfNotIncluded(r,e),n.config({packageConfigPaths:r}),y.return(m);case 2:return v=y.enterCatchBlock(),console.log("[lively.modules package] Unable loading package config %s for package: ",e,v),delete n.meta[e],x=b.split("/").slice(-1)[0],y.return({name:x})}})};Hj.prototype.import=function(){var d=this,h,n,b,e,l,a,f,m;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){switch(r.nextAddress){case 1:return r.yield(d.register(),
2);case 2:return h=d,n=h.url,b=h.System,e=ef,l=e.module,a=b,r.yield(b.normalize(n),3);case 3:return f=l.call(e,a,r.yieldResult),r.yield(b.import(f.id),4);case 4:return m=r.yieldResult,r.yield(ef.promise.waitFor(1E3,function(){return f.isLoaded()}),5);case 5:return r.return(m)}})};Hj.prototype.isRegistering=function(){return!!this.registerProcess};Hj.prototype.register=function(d){var h=this,n,b,e,l,a,f,m;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){switch(r.nextAddress){case 1:if(h.isRegistering())return r.return(h.registerProcess.promise);
n=h;b=n.System;e=n.url;h.registerProcess=ef.promise.deferred();l=h.registerProcess.promise;b.debug&&console.log("[lively.modules package register] %s",e);r.setCatchFinallyBlocks(2,3);if(a=d){r.jumpTo(5);break}return r.yield(h.tryToLoadPackageConfig(),6);case 6:a=r.yieldResult;case 5:f=a,h.registerWithConfig(f),h.registerProcess.resolve(f);case 3:r.enterFinallyBlock();delete h.registerProcess;r.leaveFinallyBlock(4);break;case 2:throw m=r.enterCatchBlock(),h.registerProcess.reject(m),m;case 4:return r.return(l)}})};
Hj.prototype.updateConfig=function(d){d=Object.assign({},this.runtimeConfig,{},d);var h=this.name,n=this.version,b=d,e=b.name;b=b.version;(new ef.PackageConfiguration(this)).applyConfig(d);if(h!==d.name||n!==d.version)console.log("[lively.modules] Updating registry "+h+"@"+n+" => "+e+"@"+b),ef.classHolder.PackageRegistry.ofSystem(this.System).updateNameAndVersionOf(this,h,n,e,b)};Hj.prototype.registerWithConfig=function(d){d=void 0===d?this.runtimeConfig:d;var h=this.System,n=this.url,b=(new ef.PackageConfiguration(this)).applyConfig(d),
e=ef.join(n,"package.json");h.get(e)||h.set(e,h.newModule(Object.assign({},d,{default:d})));ef.emit("lively.modules/packageregistered",{"package":n},Date.now(),h);return b};Hj.prototype.remove=function(d){d=Object.assign({forgetEnv:!0,forgetDeps:!1,unloadModules:!0},d);var h=this.System,n=this.url;n=n.replace(/\/$/,"");d.unloadModules&&this.modules().forEach(function(f){return f.unload(d)});ef.classHolder.PackageRegistry.ofSystem(h).removePackage(this);var b=h.getConfig(),e=n+"/package.json";h.delete(String(e));
ef.arr.remove(b.packageConfigPaths||[],e);var l={},a={};h.config({meta:(l[e]={},l),packages:(a[n]={},a),packageConfigPaths:b.packageConfigPaths});delete h.packages[n];ef.emit("lively.modules/packageremoved",{"package":this.url},Date.now(),h)};Hj.prototype.reload=function(d){var h=this.url,n=ef.classHolder.PackageRegistry.ofSystem(this.System),b=n.coversDirectory(h);this.remove(d);d={};n.addPackageAt(h,b||"devPackageDirs",(d[h]=this,d));return this.import()};Hj.prototype.fork=function(d,h){var n=this;
return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){return 1==b.nextAddress?(h||(h=ef.resource(n.url).join("../"+d).withRelativePartsResolved().url),b.yield(n.changeAddress(h,d,!1),2)):b.return(b.yieldResult)})};Hj.prototype.rename=function(d){var h=this,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){return 1==b.nextAddress?(n=ef.resource(h.url).join("../"+d).withRelativePartsResolved().url,b.yield(h.changeAddress(n,d,!0),2)):b.return(b.yieldResult)})};Hj.prototype.changeAddress=
function(d,h,n){h=void 0===h?null:h;n=void 0===n?!0:n;var b=this,e,l,a,f,m,r,v,x,y,E,F,I,J,P,N,Y,W,da,va,za,L,Z,R,X;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ja){switch(ja.nextAddress){case 1:return d=d.replace(/\/?/,""),e=b,l=e.System,a=e.url,ja.yield(b.runtimeConfig,2);case 2:return f=ja.yieldResult,m=ef.resource(a).asDirectory(),r=new ef.Package(l,d),ja.yield(ef.resource(d).asDirectory(),3);case 3:return v=ja.yieldResult,f.name=h||b.name,x=ef.classHolder.PackageRegistry.ofSystem(l),
y=x.coversDirectory(a),ef.classHolder.ModulePackageMapping.forSystem(l).clearCache(),l.packages[a]&&(l.packages[d]=l.packages[a],n&&delete l.packages[a]),Object.assign(r,ef.obj.select(b,["_name","map","config"])),ja.yield(v.ensureExistance(),4);case 4:return ja.yield(b.resources(void 0,[]),5);case 5:E=ja.yieldResult.map(function(fa){return fa.url}),F=b.modules(),I=$jscomp.makeIterator(F),J=I.next();case 6:if(J.done){ja.jumpTo(8);break}P=J.value;N=v.join(P.pathInPackage()).url;return n?ja.yield(P.renameTo(N),
10):ja.yield(P.copyTo(N),10);case 10:Y=E.indexOf(P.id);-1<Y&&E.splice(Y,1);J=I.next();ja.jumpTo(6);break;case 8:W=$jscomp.makeIterator(E),da=W.next();case 13:if(da.done){if(!n){ja.jumpTo(17);break}return ja.yield(b.remove({forgetEnv:!0,forgetDeps:!1}),18)}va=da.value;za=ef.resource(va);L=za.relativePathFrom(m);return ja.yield(za.copyTo(v.join(L)),14);case 14:da=W.next();ja.jumpTo(13);break;case 18:return ja.yield(m.remove(),17);case 17:if(!h){ja.jumpTo(20);break}r.name=h;r.config.name=h;Z=ef.resource(d).join("package.json");
ja.setCatchFinallyBlocks(21);return ja.yield(Z.exists(),23);case 23:if(!ja.yieldResult){ja.jumpTo(24);break}return ja.yield(Z.readJson(),25);case 25:R=ja.yieldResult;if(R.name!==b.name){ja.jumpTo(26);break}R.name=h;return ja.yield(Z.writeJson(R,!0),26);case 26:(X=l.get(Z.url))&&l.set(Z.url,l.newModule(Object.assign({},X,{name:h})));case 24:ja.leaveTryBlock(20);break;case 21:ja.enterCatchBlock();case 20:return y=y||"individualPackageDirs","individualPackageDirs"!==y&&"devPackageDirs"!==y||x._addPackageDir(d,
y,!0),x._addPackageWithConfig(r,f,d,y),x.resetByURL(),x._updateLatestPackages(),ja.return(r)}})};Hj.prototype.search=function(d,h){h=void 0===h?{}:h;var n=this,b,e;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){if(1==l.nextAddress)return h.includeUnloaded?l.yield(n.resources(function(a){return a.endsWith(".js")},[".git","node_modules","dist",".module_cache","lively.next-node_modules"]),3):(b=n.modules().filter(function(a){return a.isLoaded()}),l.jumpTo(2));2!=l.nextAddress&&(b=l.yieldResult.map(function(a){return ef.module(n.System,
a.url)}));e=b;return l.return(Promise.all(e.map(function(a){return a.search(d,h).catch(function(f){console.error("Error searching module "+a.name+":\n"+f.stack);return[]})})).then(function(a){return ef.arr.flatten(a,1)}))})};$jscomp.global.Object.defineProperties(Hj.prototype,{isPackage:{configurable:!0,enumerable:!0,get:function(){return!0}},name:{configurable:!0,enumerable:!0,get:function(){if(this._name)return this._name;var d=this.System.get(this.url+"/package.json");return d&&d.name?d.name:ef.arr.last(this.url.replace(/[\/]+$/,
"").split("/"))},set:function(d){return this._name=d}},nameAndVersion:{configurable:!0,enumerable:!0,get:function(){return this.name+"@"+this.version}},address:{configurable:!0,enumerable:!0,get:function(){return this.url},set:function(d){return this.url=d}},runtimeConfig:{configurable:!0,enumerable:!0,get:function(){var d=this.main,h=this.systemjs,n=this.lively,b={name:this.name,version:this.version,dependencies:this.dependencies||{},devDependencies:this.devDependencies||{}};d&&(b.main=d);h&&(b.systemjs=
h);n&&(b.lively=n);return b}}});ef.Package=Hj;ef.ensurePackage=wf;ef.ensurePackage=wf;ef.importPackage=jk;ef.importPackage=jk;ef.removePackage=ak;ef.removePackage=ak;ef.reloadPackage=nj;ef.reloadPackage=nj;ef.registerPackage=vh;ef.registerPackage=vh;ef.getPackage=Wf;ef.getPackage=Wf;ef.lookupPackage=nf;ef.lookupPackage=nf;ef.applyConfig=Dh;ef.applyConfig=Dh;ef.getPackageSpecs=uk;ef.getPackageSpecs=uk;ef.Package=Hj;ef.Package=Hj;var gd=lively.FreezerRuntime.recorderFor("lively.classes/class-to-function-transform.js");
gd.isFunctionNode=function(d){return"ArrowFunctionExpression"===d.type||"FunctionExpression"===d.type||"FunctionDeclaration"===d.type};gd.ensureIdentifier=function(d){return d.replace(gd.firstIdRe,"_").replace(gd.trailingIdRe,"_")};gd.constructorTemplate=function(d){return gd.funcExpr({id:d?gd.id(d):null},["__first_arg__"],gd.ifStmt(gd.binaryExpr(gd.id("__first_arg__"),"&&",gd.member("__first_arg__",gd.funcCall(gd.member("Symbol","for"),gd.literal("lively-instance-restorer")),!0)),gd.block(),gd.block(gd.exprStmt(gd.funcCall(gd.member(gd.member("this",
gd.funcCall(gd.member("Symbol","for"),gd.literal("lively-instance-initialize")),!0),"apply"),gd.id("this"),gd.id("arguments"))))))};gd.replaceSuper=function(d,h,n,b){console.assert("Super"===d.type);(h=h.currentMethod)||console.warn("[lively.classes] Trying to transform es6 class but got super call outside a method! "+gd.stringify(d)+" in "+n.join("."));b=$jscomp.makeIterator(n.slice(-2));n=b.next().value;b=b.next().value;return"callee"===n&&"object"===b||"callee"===b?d:h&&"static"===h[gd.methodKindSymbol]?
gd.funcCall(gd.member("Object","getPrototypeOf"),gd.id(gd.tempLivelyClassVar)):gd.funcCall(gd.member("Object","getPrototypeOf"),gd.member(gd.id(gd.tempLivelyClassVar),"prototype"))};gd.replaceSuperMethodCall=function(d,h,n,b){console.assert("CallExpression"===d.type);console.assert("Super"===d.callee.object.type);return gd.funcCall.apply(gd,[gd.member(gd.funcCall(gd.member(b.functionNode,"_get"),gd.replaceSuper(d.callee.object,h,n.concat(["callee","object"]),b),gd.literal(d.callee.property.value||
d.callee.property.name),gd.id("this")),"call"),gd.id("this")].concat($jscomp.arrayFromIterable(d.arguments)))};gd.replaceDirectSuperCall=function(d,h,n,b){console.assert("CallExpression"===d.type);console.assert("Super"===d.callee.type);return gd.funcCall.apply(gd,[gd.member(gd.funcCall(gd.member(b.functionNode,"_get"),gd.replaceSuper(d.callee,h,n.concat(["callee"]),b),gd.funcCall(gd.member("Symbol","for"),gd.literal("lively-instance-initialize")),gd.id("this")),"call"),gd.id("this")].concat($jscomp.arrayFromIterable(d.arguments)))};
gd.replaceSuperGetter=function(d,h,n,b){console.assert("MemberExpression"===d.type);console.assert("Super"===d.object.type);return gd.funcCall(gd.member(b.functionNode,"_get"),gd.replaceSuper(d.object,h,n.concat(["object"]),b),gd.literal(d.property.value||d.property.name),gd.id("this"))};gd.replaceSuperSetter=function(d,h,n,b){console.assert("AssignmentExpression"===d.type);console.assert("Super"===d.left.object.type);return gd.funcCall(gd.member(b.functionNode,"_set"),gd.replaceSuper(d.left.object,
h,n.concat(["left","object"]),b),gd.literal(d.left.property.value||d.left.property.name),d.right,gd.id("this"))};gd.replaceClass=function(d,h,n,b){console.assert("ClassDeclaration"===d.type||"ClassExpression"===d.type);var e=d.body.body,l=d.superClass;n=d.id;var a=d.type,f=d.start,m=d.end,r=void 0===b.addClassNameGetter?!0:b.addClassNameGetter,v=gd.id("undefined"),x=gd.id("undefined"),y=n?n.name:"anonymous_class",E=b.evalId,F=b.sourceAccessorName;d=d["x-lively-object-meta"]||{start:f,end:m};e.length&&
(r=e.reduce(function(N,Y){var W=Y.key,da=Y.kind,va=Y.value,za=Y.static;"Literal"!==W.type&&"Identifier"!==W.type&&console.warn("Unexpected key in classToFunctionTransform! "+JSON.stringify(W));if("method"===da){da={};Y=gd.id(y+"_"+gd.ensureIdentifier(W.name||W.value||gd.Path("property.name").get(W))+"_");va=["key",gd.literal(W.name||W.value||gd.Path("property.name").get(W)),"value",Object.assign({},va,(da.id=Y,da[gd.methodKindSymbol]=za?"static":"proto",da))];var L=gd.objectLiteral(va)}else"get"===
da||"set"===da?(Y={},L=gd.objectLiteral(["key",gd.literal(W.name||W.value||gd.Path("property.name").get(W)),da,Object.assign({},va,(Y.id=gd.id(da),Y[gd.methodKindSymbol]=za?"static":"proto",Y))])):"constructor"===da?(W={},va=["key",gd.funcCall(gd.member("Symbol","for"),gd.literal("lively-instance-initialize")),"value",Object.assign({},va,(W.id=gd.id(y+"_initialize_"),W[gd.methodKindSymbol]="proto",W))],L=gd.objectLiteral(va)):console.warn("[lively.classes] classToFunctionTransform encountered unknown class property with kind "+
da+", ignoring it, "+JSON.stringify(Y));(za?N.clazz:N.inst).push(L);return N},{inst:[],clazz:r?[gd.parse('({ key: Symbol.for("__LivelyClassName__"), get: function get() { return "'+y+'"; } })').body[0].expression]:[]}),e=r.inst,r=r.clazz,e.length&&(v={type:"ArrayExpression",elements:e}),r.length&&(x={type:"ArrayExpression",elements:r}));e=b.scope;if(l&&b.currentModuleAccessor)if(b.classHolder===l.object){var I=l;var J=l.property.name}else{var P=e&&e.resolvedRefMap&&e.resolvedRefMap.get(l);P&&P.decl&&
e.decls&&e.decls.find(function(N){return $jscomp.makeIterator(N).next().value===P.decl})&&(I=l,J=l.name)}J=I?gd.objectLiteral(["referencedAs",gd.literal(J),"value",I]):l||gd.id("undefined");I=n&&"ClassDeclaration"===a;l=["start",gd.literal(d.start),"end",gd.literal(d.end)];"undefined"!==typeof E&&l.push("evalId",gd.literal(E));F&&l.push("moduleSource",gd.nodes.id(F));E=gd.objectLiteral(l);v=gd.funcCall(gd.funcExpr({},["superclass"],gd.varDecl(gd.tempLivelyClassHolderVar,h.classHolder),gd.varDecl(gd.tempLivelyClassVar,
I?{type:"ConditionalExpression",test:gd.binaryExpr(gd.funcCall(gd.member(gd.tempLivelyClassHolderVar,"hasOwnProperty"),gd.literal(n.name)),"&&",gd.binaryExpr({argument:gd.member(gd.tempLivelyClassHolderVar,n),operator:"typeof",prefix:!0,type:"UnaryExpression"},"===",gd.literal("function"))),consequent:gd.member(gd.tempLivelyClassHolderVar,n),alternate:gd.assign(gd.member(gd.tempLivelyClassHolderVar,n),gd.constructorTemplate(n.name))}:n?gd.constructorTemplate(n.name):gd.constructorTemplate(null)),
gd.returnStmt(gd.funcCall(b.functionNode,gd.id(gd.tempLivelyClassVar),gd.id("superclass"),v,x,gd.id(gd.tempLivelyClassHolderVar),b.currentModuleAccessor||gd.id("undefined"),E))),J);if("ClassExpression"===a)return v;a=v;b.declarationWrapper&&h.classHolder===b.classHolder&&(a=gd.funcCall(b.declarationWrapper,gd.literal(n.name),gd.literal("class"),a,b.classHolder,E));a=gd.varDecl(n,a,"var");a[gd.isTransformedClassVarDeclSymbol]=!0;return a};gd.splitExportDefaultWithClass=function(d,h,n,b){return d.declaration&&
d.declaration[gd.isTransformedClassVarDeclSymbol]?[d.declaration,{declaration:d.declaration.declarations[0].id,type:"ExportDefaultDeclaration"}]:d};gd.classToFunctionTransform=Mm;gd.arr=Mf;gd.Path=Ih;gd.parse=Xk;gd.stringify=Ve;gd.query=Nu;gd.nodes=wy;gd.Visitor=xe;var Tr=gd.nodes;gd.assign=Tr.assign;gd.member=Tr.member;gd.id=Tr.id;gd.exprStmt=Tr.exprStmt;gd.funcCall=Tr.funcCall;gd.literal=Tr.literal;gd.objectLiteral=Tr.objectLiteral;gd.varDecl=Tr.varDecl;gd.funcExpr=Tr.funcExpr;gd.returnStmt=Tr.returnStmt;
gd.binaryExpr=Tr.binaryExpr;gd.ifStmt=Tr.ifStmt;gd.block=Tr.block;gd.firstIdRe=/^[^_a-z]/i;gd.trailingIdRe=/[^_a-z0-9]/ig;gd.isTransformedClassVarDeclSymbol=Symbol();gd.methodKindSymbol=Symbol();gd.tempLivelyClassVar="__lively_class__";gd.tempLivelyClassHolderVar="__lively_classholder__";var pP=function(){return gd.Visitor.apply(this,arguments)||this};$jscomp.inherits(pP,gd.Visitor);pP.prototype.accept=function(d,h,n){gd.isFunctionNode(d)&&(h=Object.assign({},h,{classHolder:gd.objectLiteral([]),currentMethod:d[gd.methodKindSymbol]?
d:h.currentMethod}));if("ClassExpression"===d.type||"ClassDeclaration"===d.type)d=gd.replaceClass(d,h,n,h.options);"Super"===d.type&&(d=gd.replaceSuper(d,h,n,h.options));"MemberExpression"===d.type&&d.object&&"Super"===d.object.type&&(d=gd.replaceSuperGetter(d,h,n,h.options));"AssignmentExpression"===d.type&&"MemberExpression"===d.left.type&&"Super"===d.left.object.type&&(d=gd.replaceSuperSetter(d,h,n,h.options));"CallExpression"===d.type&&"Super"===d.callee.type&&(d=gd.replaceDirectSuperCall(d,h,
n,h.options));"CallExpression"===d.type&&d.callee.object&&"Super"===d.callee.object.type&&(d=gd.replaceSuperMethodCall(d,h,n,h.options));d=gd.Visitor.prototype.accept.call(this,d,h,n);return"ExportDefaultDeclaration"===d.type?gd.splitExportDefaultWithClass(d,h,n,h.options):d};pP.run=function(d,h){var n=new this,b=h.classHolder||gd.objectLiteral([]);return n.accept(d,{options:h,classHolder:b},[])};gd.ClassReplaceVisitor=pP;gd.classToFunctionTransform=Mm;gd.classToFunctionTransform=Mm;var IF=lively.FreezerRuntime.recorderFor("lively.classes/index.js");
IF.runtime=CF;IF.classToFunctionTransform=Mm;IF.runtime=CF;IF.runtime=CF;IF.classToFunctionTransform=Mm;IF.classToFunctionTransform=Mm;var kra=Object.freeze({__proto__:null,runtime:CF,classToFunctionTransform:Mm}),Qj=lively.FreezerRuntime.recorderFor("lively.modules/src/import-modification.js");Qj.arr=Mf;Qj.Path=Ih;Qj.fuzzyParse=gn;Qj.query=Nu;Qj.stringify=Ve;Qj.resource=A;var Nw=function(d,h,n,b,e,l,a){this.System=d;this.intoModuleId=h;this.intoPackage=n;this.intoModuleSource=b;this.fromModuleId=
e.moduleId;this.importData=e;this.alias=l;this.parsed=a||Qj.fuzzyParse(b)};Nw.run=function(d,h,n,b,e,l,a){return(new this(d,h,n,b,e,l,a)).run()};Nw.prototype.run=function(){var d=this.generateImportStatement(),h=d.standaloneImport,n=d.importedVarName,b=this.existingImportsOfFromModule(),e=b.imports,l=b.importsOfFromModule;b=b.importsOfVar;l=this.importsToBeReused(l,b,d);if(b.length)return{status:"not modified",newSource:this.intoModuleSource,generated:"",importedVarName:"",standaloneImport:h,from:b[0].start,
to:b[0].end};if(l.length&&(d=this.modifyExistingImport(l,h)))return d;e=Qj.arr.last(e);return this.insertNewImport(l,h,n,e?e.end:0)};Nw.prototype.importsToBeReused=function(d,h,n){n.isDefault&&(d=d.filter(function(b){return!b.specifiers.some(function(e){return"ImportDefaultSpecifier"==e.type})}));return d};Nw.prototype.generateImportStatement=function(){var d=this.intoModuleId,h=this.fromModuleId,n=this.importData,b=this.intoPackage,e="default"===n.exported,l=this.alias||(e?n.local:n.exported),a=
!e&&n.exported!==l;b=b&&b.name;var f=h,m=n.packageName,r=n.pathInPackage;if(n.isMain)f=m;else if(b===m)try{f=Qj.resource(h).relativePathFrom(Qj.resource(d)),f.startsWith(".")||(f="./"+f)}catch(v){m&&"no group"!==m&&r&&(f=m+"/"+r)}else m&&"no group"!==m&&r&&(f=m+"/"+r);return{isDefault:e,standaloneImport:e?"import "+l+' from "'+f+'";':"import { "+n.exported+(a?" as "+l:"")+' } from "'+f+'";',importedVarName:l}};Nw.prototype.existingImportsOfFromModule=function(){var d=this.System,h=this.fromModuleId,
n=this.intoModuleId,b=this.importData,e=b.exported,l=b.local,a=this.alias,f="default"===e;b=this.parsed.body.filter(function(r){return"ImportDeclaration"===r.type});var m=f?a||l:a||e;l=b.filter(function(r){if(!r.source||"string"!==typeof r.source.value)return null;r=d.decanonicalize(r.source.value,n);return h===r});a=l.filter(function(r){return(r.specifiers||[]).some(function(v){return f?"ImportDefaultSpecifier"===v.type&&v.local.name===m:Qj.Path("imported.name").get(v)===e&&Qj.Path("local.name").get(v)===
m})});return{imports:b,importsOfFromModule:l,importsOfVar:a}};Nw.prototype.modifyExistingImport=function(d,h){d=Qj.arr.flatmap(d,function(m){return m.specifiers||[]});if(!d.length)return null;d=$jscomp.makeIterator(Qj.arr.partition(d,function(m){return"ImportDefaultSpecifier"===m.type}));var n=$jscomp.makeIterator(d.next().value).next().value,b=$jscomp.makeIterator(d.next().value).next().value;d=this.alias;var e=this.intoModuleSource,l=this.importData,a=l.exported;l=l.local;var f="default"===a;f?
console.assert(!!b,"no ImportSpecifier found"):console.assert(b||n,"at least one kine of specifier is expected");if(f){n=e.slice(0,b.start).lastIndexOf("{")-1;if(0>n)return null;b=(d||l)+",";a=e.slice(0,n);e=e.slice(n);a.endsWith(" ")&&a.endsWith("\n")||(b=" "+b);e.startsWith(" ")||(b+=" ");return{status:"modified",newSource:""+a+b+e,generated:b,standaloneImport:h,importedVarName:d||l,from:n,to:n+b.length}}n=b?b.end:n.end;f=(l=d&&d!==a)?a+" as "+d:a;b=b?", "+f:", { "+f+" }";return{status:"modified",
newSource:""+e.slice(0,n)+b+e.slice(n),generated:b,standaloneImport:h,importedVarName:l?d:a,from:n,to:n+b.length}};Nw.prototype.insertNewImport=function(d,h,n,b){b=void 0===b?0:b;d&&d.length&&(b=Qj.arr.last(d).end);var e=this.intoModuleSource;d=e.slice(0,b);e=e.slice(b);var l=h;d.length&&!d.endsWith("\n")&&(l="\n"+l);e.length&&!e.startsWith("\n")&&(l+="\n");return{status:"modified",newSource:d+l+e,generated:l,standaloneImport:h,importedVarName:n,from:b,to:b+l.length}};Qj.ImportInjector=Nw;var qP=
function(){};qP.getGlobals=function(d,h){d=h||Qj.fuzzyParse(d,{withComments:!0});h=(h=d.comments?d.comments.find(function(b){return b.isBlock&&b.text.startsWith("global")}):null)?h.text.replace(/^global\s*/,"").split(",").map(function(b){return b.trim()}).filter(Boolean):[];var n=[].concat($jscomp.arrayFromIterable(h),$jscomp.arrayFromIterable(Qj.query.knownGlobals));d=Qj.query.findGlobalVarRefs(d,{jslintGlobalComment:!0}).filter(function(b){return!n.includes(b.name)}).map(function(b){return b.name});
return Qj.arr.compact([].concat($jscomp.arrayFromIterable(h),$jscomp.arrayFromIterable(d)))};qP.run=function(d,h,n){n=n||Qj.fuzzyParse(d,{withComments:!0});var b=(n=n.comments?n.comments.find(function(l){return l.isBlock&&l.text.startsWith("global")}):null)?n.text.replace(/^global\s*/,"").split(",").map(function(l){return l.trim()}).filter(Boolean):[],e=h.filter(function(l){return!b.includes(l)});if(!e.length)return{status:"not modified",newSource:d,generated:"",from:0,to:0};if(!n)return n="/*global "+
e.join(",")+"*/\n",{status:"modified",newSource:n+d,generated:n,from:0,to:n.length};h=n.start+2+n.text.length;e=e.join(",");b.length?e=","+e:n.text.startsWith("global ")||(e=" "+e);n=h+e.length;return{status:"modified",newSource:d.slice(0,h)+e+d.slice(h),generated:e,from:h,to:n}};Qj.GlobalInjector=qP;var bJ=function(){};bJ.removeImports=function(d,h,n){n=n||Qj.fuzzyParse(d);var b=Qj.arr.flatmap(n.body,function(e){return"ImportDeclaration"===e.type&&e.specifiers.length?e.specifiers.map(function(l){return{local:l.local,
importStmt:e}}):[]}).filter(function(e){return h.some(function(l){return l.local===e.local.name})});n=b.map(function(e){return{local:e.local.name,from:e.importStmt.source.value}});d=Qj.arr.uniq(b.map(function(e){var l=e.importStmt.specifiers.find(function(a){return e.local===a.local});Qj.arr.remove(e.importStmt.specifiers,l);return e.importStmt})).slice().reverse().reduce(function(e,l){var a=e.source;e=e.changes;var f=l.start,m=l.end,r=l.specifiers,v=a.slice(0,f),x=a.slice(m);a=a.slice(f,m);(l=r.length?
Qj.stringify(l):"")&&l.includes("\n")&&!a.includes("\n")&&(l=l.replace(/\s+/g," "));a=v+l+x;e=e.concat({replacement:l,start:f,end:m});return{source:a,changes:e}},{source:d,changes:[]});return Object.assign({},d,{removedImports:n})};bJ.findUnusedImports=function(d){var h="string"===typeof d?Qj.fuzzyParse(d):d;d=Qj.arr.flatmap(h.body,function(e){return"ImportDeclaration"===e.type&&e.specifiers.length?e.specifiers.map(function(l){return{local:l.local,from:e.source?e.source.value:"",importStmt:e}}):[]});
var n=d.map(function(e){return e.local});h=Qj.query.resolveReferences(Qj.query.scopes(h));h=Array.from(h.resolvedRefMap.keys()).filter(function(e){return!n.includes(e)});var b=Qj.arr.uniq(h.map(function(e){return e.name}));return d.filter(function(e){return!b.includes(e.local.name)}).map(function(e){return Object.assign({},e,{local:e.local.name})})};bJ.removeUnusedImports=function(d){var h=Qj.fuzzyParse(d);return this.removeImports(d,this.findUnusedImports(h),h)};Qj.ImportRemover=bJ;var Kp=lively.FreezerRuntime.recorderFor("lively.modules/src/nodejs.js");
Kp.ensureParent=function(d,h,n){if(n)return n;n=d.id;var b=d.System;h=n.startsWith("file://")?n.replace("file://",""):n;if(n=b._nodeRequire("module").Module._cache[n])return n;n={id:h,filename:h,paths:[]};(d=d.package())&&n.paths.push(Kp.resource(d.url).join("node_modules/").path());return n};Kp.relative=function(d,h){return Kp.resource(d.id).parent().join(h).url.replace("file://","")};Kp._require=Tj;Kp._resolve=nu;Kp.resource=A;Kp._require=Tj;Kp._require=Tj;Kp._resolve=nu;Kp._resolve=nu;var bf=lively.FreezerRuntime.recorderFor("lively.modules/src/module.js");
bf.module=Dq;bf.isModuleLoaded=ou;bf.doesModuleExist=pu;bf.arr=Mf;bf.obj=ng;bf.graph=sy;bf.parse=Xk;bf.query=Nu;bf.computeRequireMap=ge;bf.moduleSourceChange=Hd;bf.scheduleModuleExportsChange=Ue;bf.runScheduledExportChanges=fe;bf.livelySystemEnv=rL;bf.Package=Hj;bf.isURL=we;bf.emit=jn;bf.subscribe=Gp;bf.defaultClassToFunctionConverterName="initializeES6ClassForLively";bf.classRuntime=CF;bf.ImportInjector=Nw;bf.GlobalInjector=qP;bf.ImportRemover=bJ;bf._require=Tj;bf._resolve=nu;bf.classHolder=Cy;var rP=
function(){var d=/['"]format (esm|es6)['"];/,h=/['"]format cjs['"];/,n=/(^\s*|[}\);\n]\s*)(import\s+(['"]|(\*\s+as\s+)?[^"'\(\)\n;]+\s+from\s+['"]|\{)|export\s+\*\s+from\s+["']|export\s+(\{|default|function|class|var|const|let|async\s+function))/;return function(b,e){return e&&e.format?("es6"==e.format&&"esm"==e.format,e.format):d.test(b.slice(0,5E3))||!h.test(b.slice(0,5E3))&&n.test(b)?"esm":h.test(b.slice(0,5E3))?"cjs":"global"}}();bf.detectModuleFormat=rP;bf.detectModuleFormat=rP;bf.detectModuleFormat=
rP;bf.classHolder.module=bf.module;bf.isModuleLoaded=ou;bf.isModuleLoaded=ou;bf.doesModuleExist=pu;bf.doesModuleExist=pu;bf.globalProps={initialized:!1,descriptors:{}};var Eg=function(d,h){var n=this;if(!bf.isURL(h)&&!/^@/.test(h))throw Error("ModuleInterface constructor called with "+h+" that does not seem to be a fully normalized module id.");this.System=d;this.id=h;this.recorderName="__lvVarRecorder";this.sourceAccessorName="__lvOriginalCode";this._scope=this._ast=this._source=this._recorder=null;
this._observersOfTopLevelState=[];this._evaluationsInProgress=0;this._evalId=1;this.createdAt=this.lastModifiedAt=new Date;bf.subscribe("lively.modules/modulechanged",function(b){b.module===n.id&&n.reset()})};Eg.prototype.fullName=function(){return this.id};Eg.prototype.shortName=function(){return this.package().name+"/"+this.pathInPackage()};Eg.prototype.source=function(){var d=this;return"@empty"===this.id?Promise.resolve(""):this._source?Promise.resolve(this._source):this.System.resource(this.id).read().then(function(h){return d._source=
h})};Eg.prototype.setSource=function(d){this.sourceAccessorName&&this.recorderName&&d.includes("var "+this.recorderName)&&d.includes("var "+this.sourceAccessorName)||this._source===d||(this.reset(),this._source=d)};Eg.prototype.ast=function(){var d=this,h,n,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(1==e.nextAddress){if(d._ast)return e.return(d._ast);h=d;n=bf;b=n.parse;return e.yield(d.source(),2)}return e.return(h._ast=b.call(n,e.yieldResult))})};Eg.prototype.scope=function(){var d=
this,h;return $jscomp.asyncExecutePromiseGeneratorProgram(function(n){if(1==n.nextAddress)return d._scope?n.return(d._scope):n.yield(d.ast(),2);h=n.yieldResult;return n.return(d._scope=bf.query.topLevelDeclsAndRefs(h).scope)})};Eg.prototype.resolvedScope=function(){var d=this,h,n,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){return 1==e.nextAddress?(h=d,n=bf.query,b=n.resolveReferences,e.yield(d.scope(),2)):e.return(h._scope=b.call(n,e.yieldResult))})};Eg.prototype.metadata=function(){var d=
this.System.loads?this.System.loads[this.id]:null;return d?d.metadata:null};Eg.prototype.addMetadata=function(d){var h=this.System,n=this.id,b=this.metadata();d=b?Object.assign(b,d):d;b={};h.config({meta:(b[n]=d,b)});return h.meta[n]};Eg.prototype.format=function(){var d=this.metadata();return d&&d.format?d.format:this._source?bf.detectModuleFormat(this._source):"global"};Eg.prototype.setFormat=function(d){return this.addMetadata({format:d})};Eg.prototype.reset=function(){this._scope=this._ast=this._source=
null};Eg.prototype.get=function(){return this.System.get(this.id)};Eg.prototype.load=function(d){var h=this,n,b,e,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){if(1==a.nextAddress)return n=h,b=n.id,e=n.System,d&&h.addMetadata(d),(l=e.get(b))?a.jumpTo(2):a.yield(e.import(b),3);2!=a.nextAddress&&(l=a.yieldResult);return a.return(l)})};Eg.prototype.isLoaded=function(){return!!this.System.get(this.id)};Eg.prototype.unloadEnv=function(){this._recorder=null;this._observersOfTopLevelState=
[];delete bf.livelySystemEnv(this.System).loadedModules[this.id]};Eg.prototype.unloadDeps=function(d){var h=this;d=bf.obj.merge({forgetDeps:!0,forgetEnv:!0},d);this.dependents().forEach(function(n){h.System.delete(n.id);h.System.loads&&delete h.System.loads[n.id];d.forgetEnv&&n.unloadEnv()})};Eg.prototype.unload=function(d){var h=this,n,b,e,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){if(1==a.nextAddress)return d=Object.assign({reset:!0,forgetDeps:!0,forgetEnv:!0},d),n=h,b=n.System,
e=n.id,d.reset&&h.reset(),d.forgetDeps&&h.unloadDeps(d),h.System.delete(e),b.loads&&delete b.loads[e],b.meta&&delete b.meta[e],d.forgetEnv&&h.unloadEnv(),(l=b._livelyModulesTranslationCache)?a.yield(l.deleteCachedData(e),2):a.jumpTo(2);bf.emit("lively.modules/moduleunloaded",{module:h.id},Date.now(),h.System);a.jumpToEnd()})};Eg.prototype.reload=function(d){var h=this,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){return 1==b.nextAddress?(d=bf.obj.merge({reloadDeps:!0,resetEnv:!0},
d),n=[h],d.reloadDeps&&(n=h.dependents().concat(n)),b.yield(h.unload({forgetDeps:d.reloadDeps,forgetEnv:d.resetEnv}),2)):3!=b.nextAddress?b.yield(Promise.all(n.map(function(e){return e.id!==h.id&&e.load()})),3):b.yield(h.load(),0)})};Eg.prototype.copyTo=function(d){var h=this,n,b,e,l,a,f;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){if(1==m.nextAddress)return n=h.System.resource(d),b=n.write,m.yield(h.source(),3);if(2!=m.nextAddress)return m.yield(b.call(n,m.yieldResult),2);e=h;l=
e.System;a=bf.module(l,d);f=bf.obj.select(h,"_observersOfTopLevelState _scope _ast _source _recorder sourceAccessorName recorderName".split(" "));Object.assign(a,f);l.set(d,l.newModule(l.get(h.id)));return m.return(a)})};Eg.prototype.renameTo=function(d,h){h=void 0===h?{}:h;var n=this,b,e,l,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){switch(f.nextAddress){case 1:return b=h,e=void 0===b.unload?!0:b.unload,l=void 0===b.removeFile?!0:b.removeFile,f.yield(n.copyTo(d),2);case 2:a=
f.yieldResult;if(!e){f.jumpTo(3);break}return f.yield(n.unload({reset:!0,forgetDeps:!1,forgetEnv:!0}),3);case 3:if(!l){f.jumpTo(5);break}return f.yield(n.System.resource(n.id).remove(),5);case 5:return f.return(a)}})};Eg.prototype.whenLoaded=function(d){if(this.isLoaded())try{d(this)}catch(h){console.error(h)}else bf.livelySystemEnv(this.System).onLoadCallbacks.push({moduleName:this.id,resolved:!0,callback:d})};Eg.prototype.changeSourceAction=function(d){var h=this;return Promise.resolve(this.source()).then(function(n){return d(n)}).then(function(n){return h.changeSource(n)})};
Eg.prototype.changeSource=function(d,h){h=Object.assign({doSave:!0,doEval:!0},h);var n=this.System,b=this.id,e=this.format(),l;this.reset();this.lastModifiedAt=new Date;return Promise.all([h.doSave&&this.System.resource(b).write(d),h.doEval&&bf.moduleSourceChange(n,b,d,e,h).then(function(a){return l=a})]).then(function(){return l})};Eg.prototype.addDependencyToModuleRecord=function(d,h){var n=this;h=void 0===h?function(){}:h;var b=this.record(),e=d.record();if(b&&e){var l,a=b.dependencies.some(function(m,
r){if(m)return l=r,m&&m.name===d.id});a?e!==b.dependencies[l]&&b.dependencies.splice(l,1,e):b.dependencies.push(e);a&&b.setters[l]||(b.setters[a?l:b.dependencies.length-1]=h);var f;e.importers.some(function(m,r){if(m)return f=r,m&&m.name===n.id})?b!==e.importers[f]&&e.importers.splice(f,1,b):e.importers.push(b)}};Eg.prototype.dependents=function(){var d=this;return bf.graph.hull(bf.graph.invert(bf.computeRequireMap(this.System)),this.id).map(function(h){return bf.module(d.System,h)})};Eg.prototype.requirements=
function(){var d=this;return bf.graph.hull(bf.computeRequireMap(this.System),this.id).map(function(h){return bf.module(d.System,h)})};Eg.prototype.directRequirements=function(){var d=this,h=(this.record()||{}).dependencies||[];return bf.arr.pluck(h.filter(Boolean),"name").map(function(n){return bf.module(d.System,n)})};Eg.prototype.isMochaTest=function(){if(!this._source)return!1;var d=this._scope||(this._scope=bf.query.topLevelDeclsAndRefs(bf.parse(this._source)).scope);return bf.query.imports(d).map(function(h){return h.fromModule}).some(function(h){return h.endsWith("mocha-es6")||
h.endsWith("mocha-es6/index.js")})?!0:!1};Eg.prototype.define=function(d,h,n,b){n=void 0===n?!0:n;var e=this.System,l=this.id,a=this.recorder,f=Symbol.for("lively-object-meta"),m=Symbol.for("lively-module-meta");"function"!==typeof h||!b||"function"!==b.kind&&"class"!==b.kind||(h[f]=b);h&&h[f]&&!h[m]&&(b=this.pathInPackage(),f=this.package(),h[m]={package:f?{name:f.name,version:f.version}:{},pathInPackage:b});a[d]=h;bf.scheduleModuleExportsChange(e,l,d,h,!1);this.notifyTopLevelObservers(d);(n=n||
!this.isEvalutionInProgress())&&bf.runScheduledExportChanges(e,l);return h};Eg.prototype.undefine=function(d){delete this.recorder[d]};Eg.prototype.subscribeToToplevelDefinitionChanges=function(d){this._observersOfTopLevelState.push(d);return d};Eg.prototype.notifyTopLevelObservers=function(d){var h=this.recorder;bf.arr.include(["createOrExtendES6ClassForLively","lively.capturing-declaration-wrapper"],d)||this._observersOfTopLevelState.forEach(function(n){return n(d,h[d])})};Eg.prototype.unsubscribeFromToplevelDefinitionChanges=
function(d){this._observersOfTopLevelState="string"===typeof d?this._observersOfTopLevelState.filter(function(h){return h.name!==d}):this._observersOfTopLevelState.filter(function(h){return h!==d})};Eg.prototype.evaluationStart=function(){this._evaluationsInProgress++};Eg.prototype.evaluationEnd=function(){this._evaluationsInProgress--;bf.runScheduledExportChanges(this.System,this.id)};Eg.prototype.nextEvalId=function(){return this._evalId++};Eg.prototype.isEvalutionInProgress=function(){return 0<
this._evaluationsInProgress};Eg.prototype.env=function(){return this};Eg.prototype.package=function(){return bf.Package.forModule(this.System,this)};Eg.prototype.pathInPackage=function(){var d=this.package();return d&&0===this.id.indexOf(d.address)?this.id.slice(d.address.length).replace(/^\//,""):this.id};Eg.prototype.imports=function(){var d=this,h,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){return 1==b.nextAddress?(h=bf.query,n=h.imports,b.yield(d.scope(),2)):b.return(n.call(h,
b.yieldResult))})};Eg.prototype.exports=function(){var d=this,h,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){return 1==b.nextAddress?(h=bf.query,n=h.exports,b.yield(d.scope(),2)):b.return(n.call(h,b.yieldResult))})};Eg.prototype.addImports=function(d){var h=this,n,b,e,l,a,f,m,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(x){if(1==x.nextAddress)return x.yield(h.source(),2);n=x.yieldResult;b=$jscomp.makeIterator(d);for(e=b.next();!e.done;e=b.next())l=e.value,a=
bf.module(h.System,l.from||l.moduleId),f=a.package(),m={exported:l.exported||l.local,moduleId:a.id,packageName:f.name,packageURL:f.url,pathInPackage:a.pathInPackage()},r=l.local,v=bf.ImportInjector.run(h.System,h.id,h.package(),n,m,r),n=v.newSource;return x.yield(h.changeSource(n),0)})};Eg.prototype.addGlobalDeclaration=function(d){var h=this,n,b,e,l,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){return 1==f.nextAddress?f.yield(h.source(),2):3!=f.nextAddress?(n=f.yieldResult,b=bf.GlobalInjector.run(n,
d),e=b.status,l=b.newSource,(a="modified"===e)?f.yield(h.changeSource(l),3):f.jumpTo(3)):f.return(a)})};Eg.prototype.removeImports=function(d){var h=this,n,b,e,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){switch(a.nextAddress){case 1:return d.length?a.yield(h.source(),2):a.return();case 2:return n=a.yieldResult,a.yield(bf.ImportRemover.removeImports(n,d),3);case 3:return b=a.yieldResult,e=b.source,l=b.removedImports,a.yield(h.changeSource(e),4);case 4:l.forEach(function(f){return delete h.recorder[f.local]}),
a.jumpToEnd()}})};Eg.prototype._localDeclForRefAt=function(d){var h=this,n,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(1==e.nextAddress)return e.yield(h.resolvedScope(),2);n=e.yieldResult;b=bf.query.refWithDeclAt(d,n);return e.return(b&&{decl:b.decl,id:b.declId,declModule:h})})};Eg.prototype._localDeclForName=function(d){var h=this,n,b,e,l,a,f,m,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){if(1==v.nextAddress)return v.yield(h.resolvedScope(),2);n=v.yieldResult;
e=$jscomp.makeIterator(n.resolvedRefMap.values());for(l=e.next();!l.done;l=e.next())if(f=a=l.value,m=f.ref,r=m.name,d===r){b=a;break}return v.return(b&&{decl:b.decl,id:b.declId,declModule:h})})};Eg.prototype._importForNSRefAt=function(d){var h=this,n,b,e,l,a,f,m,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(x){if(1==x.nextAddress)return x.yield(h.resolvedScope(),2);n=x.yieldResult;b=n.node;e=bf.query.nodesAtIndex(b,d);if(2>e.length)return x.return([null,null]);l=e[e.length-1];a=
e[e.length-2];if("Identifier"!=l.type||"MemberExpression"!=a.type||a.computed||"Identifier"!==a.object.type)return x.return([null,null]);f=n.resolvedRefMap.get(a.object)||{};m=f.decl;if(!m||"ImportDeclaration"!==m.type)return x.return([null,null]);r=a.object.name;v=m.specifiers.find(function(y){return y.local.name===r});return x.return("ImportNamespaceSpecifier"!==v.type?[null,null]:[m,v.local,l.name])})};Eg.prototype._resolveImportedDecl=function(d){var h=this,n,b,e,l,a,f,m;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){switch(r.nextAddress){case 1:if(!d)return r.return([]);
n=d.id;b=n.name;return r.yield(h.imports(),2);case 2:e=r.yieldResult;l=e.find(function(v){return v.local==b});if(!l){r.jumpTo(3);break}a=bf.module(h.System,l.fromModule,h.id);f=[d];m=f.concat;return r.yield(a.bindingPathForExport(l.imported),4);case 4:return r.return(m.call(f,r.yieldResult));case 3:return r.return([d])}})};Eg.prototype.bindingPathFor=function(d){var h=this,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){return 1==b.nextAddress?b.yield(h._localDeclForName(d),2):4!=
b.nextAddress?(n=b.yieldResult)?b.yield(h._resolveImportedDecl(n),4):b.jumpTo(0):b.return(b.yieldResult)})};Eg.prototype.bindingPathForExport=function(d){var h=this,n,b,e,l,a,f;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){switch(m.nextAddress){case 1:return m.yield(h.resolvedScope(),2);case 2:return m.yield(h.exports(),3);case 3:n=m.yieldResult;b=n.find(function(r){return r.exported===d});if(!b.fromModule)return m.return(h._resolveImportedDecl({decl:b.decl,id:b.declId,declModule:b&&
b.decl?h:null}));e=bf.module(h.System,b.fromModule,h.id);l={decl:b.node,id:b.declId,declModule:h};a=[l];f=a.concat;return m.yield(e.bindingPathForExport(b.imported),5);case 5:return m.return(f.call(a,m.yieldResult))}})};Eg.prototype.bindingPathForRefAt=function(d){var h=this,n,b,e,l,a,f,m,r,v,x;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){switch(y.nextAddress){case 1:return y.yield(h._localDeclForRefAt(d),2);case 2:n=y.yieldResult;if(!n){y.jumpTo(3);break}return y.yield(h._resolveImportedDecl(n),
4);case 4:return y.return(y.yieldResult);case 3:return b=$jscomp,e=b.makeIterator,y.yield(h._importForNSRefAt(d),5);case 5:l=e.call(b,y.yieldResult);a=l.next().value;f=l.next().value;m=l.next().value;if(!a)return y.return([]);r=bf.module(h.System,a.source.value,h.id);v=[{decl:a,declModule:h,id:f}];x=v.concat;return y.yield(r.bindingPathForExport(m),6);case 6:return y.return(x.call(v,y.yieldResult))}})};Eg.prototype.definitionForRefAt=function(d){var h=this,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){if(1==
b.nextAddress)return b.yield(h.bindingPathForRefAt(d),2);n=b.yieldResult;return b.return(1>n.length?null:n[n.length-1].decl)})};Eg.prototype.ensureRecord=function(){var d=this.System,h=d._loader.moduleRecords;return h[this.id]?h[this.id]:h[this.id]={name:this.id,exports:d.newModule({}),dependencies:[],importers:[],setters:[]}};Eg.prototype.record=function(){var d=this.System._loader.moduleRecords[this.id];if(!d)return null;d.hasOwnProperty("__lively_modules__")||(d.__lively_modules__={evalOnlyExport:{}});
return d};Eg.prototype.updateRecord=function(d){var h=this.record();if(!h)throw Error("es6 environment global of "+this.id+": module not loaded, cannot get export object!");h.locked=!0;try{return d(h)}finally{h.locked=!1}};Eg.prototype.search=function(d,h){var n=this,b,e,l,a,f,m,r,v,x,y,E,F,I,J;return $jscomp.asyncExecutePromiseGeneratorProgram(function(P){if(1==P.nextAddress)return h=Object.assign({excludedModules:[]},h),h.excludedModules.some(function(N){return"string"===typeof N?N===n.id:N instanceof
RegExp?N.test(n.id):"function"===typeof N?N(n.id):!1})?P.return([]):P.yield(n.source(),2);b=P.yieldResult;d instanceof RegExp?(l="g",d.ignoreCase&&(l+="i"),d.multiline&&(l+="m"),e=RegExp(d.source,l)):e=RegExp(d,"g");for(f=[];null!==(a=e.exec(b));)f.push([a.index,a[0].length]);r=m=0;v=1;for(x=0;m<b.length&&r<f.length;m++)"\n"==b[m]&&(v++,x=m+1),y=$jscomp.makeIterator(f[r]),E=y.next().value,F=y.next().value,m===E&&(I=b.slice(x).indexOf("\n"),I=-1===I?b.length:I+x,J=n.package(),f[r]={moduleId:n.id,packageName:J?
J.name:void 0,pathInPackage:J?n.pathInPackage():n.id,isLoaded:n.isLoaded(),length:F,line:v,column:m-x,lineString:1E3<I-x?"..."+b.slice(m-10,m+100)+"...":b.slice(x,I)},r++);return P.return(f)})};Eg.prototype.toString=function(){return"module("+this.id+")"};$jscomp.global.Object.defineProperties(Eg.prototype,{dontTransform:{configurable:!0,enumerable:!0,get:function(){return[this.recorderName,this.sourceAccessorName,"global","self","_moduleExport","_moduleImport","localStorage","prompt","alert","fetch",
"getComputedStyle"].concat($jscomp.arrayFromIterable(this.isMochaTest()?[]:bf.GlobalInjector.getGlobals(this._source))).concat(bf.query.knownGlobals)}},recorder:{configurable:!0,enumerable:!0,set:function(d){return this._recorder=d},get:function(){if(this._recorder)return this._recorder;var d=this.System,h=this;if(!bf.globalProps.initialized){bf.globalProps.initialized=!0;for(var n in d.global)if(d.global.__lookupGetter__(n)||"closed"==n)bf.globalProps.descriptors[n]={value:void 0,configurable:!0,
writable:!0}}n={};if(d.get("@system-env").node){var b=bf._require.bind(null,this);b.resolve=bf._resolve.bind(null,this);n.require={configurable:!0,writable:!0,value:b}}b={};return this._recorder=Object.create(d.global,Object.assign({},bf.globalProps.descriptors,{},n,(b.event={configurable:!0,writable:!0,value:void 0},b.System={configurable:!0,writable:!0,value:d},b.__currentLivelyModule={value:h},b[bf.defaultClassToFunctionConverterName]={configurable:!0,writable:!0,value:bf.classRuntime.initializeClass},
b[this.varDefinitionCallbackName]={value:function(e,l,a,f,m){m=m||{};m.kind=l;return h.define(e,a,!1,m)}},b._moduleExport={value:function(e,l){bf.scheduleModuleExportsChange(d,h.id,e,l,!0)}},b._moduleImport={value:function(e,l){var a=d.decanonicalize(e,h.id),f=d.get(a);if(f){h.addDependencyToModuleRecord(bf.module(d,a),function(m){return Object.assign(h.recorder,m)});if(void 0==l)return f;f.hasOwnProperty(l)||console.warn("import from "+f+": Has no export "+l+"!");return f[l]}console.warn("import of "+
l+" failed: "+e+" (tried as "+h.id+") is not loaded!")}},b)))}},varDefinitionCallbackName:{configurable:!0,enumerable:!0,get:function(){return"defVar_"+this.id}}});bf.ModuleInterface=Eg;bf.default=Dq;var Ee=lively.FreezerRuntime.recorderFor("lively.modules/src/instrumentation.js");Ee.canonicalURL=function(d){var h=d.match(/([^:]+:\/\/)(.*)/);if(h){var n=h[1];d=h[2]}d=d.replace(/([^:])\/[\/]+/g,"$1/");return(n||"")+d};Ee.prepareNodejsCaching=function(){var d=System._nodeRequire("fs"),h=System._nodeRequire("path"),
n="win32"===Ee.process.platform;h=n||"/"!==Ee.process.cwd()?Ee.process.cwd():h.join(Ee.process.env.HOME,".lively.next");Ee.nodejsCacheDirURL=n?"file:///"+h.replace(/\\/g,"/"):"file://"+h;d.existsSync(h)||d.mkdirSync(h)};Ee.getExceptions=qu;Ee.setExceptions=Zh;Ee.prepareCodeForCustomCompile=Kk;Ee.prepareTranslatedCodeForSetterCapture=bk;Ee.getCachedNodejsModule=function(d,h){try{var n=d._nodeRequire("module").Module,b=n._resolveFilename(h.name.replace(/^file:\/\//,"").replace(/^\/([a-z]:\/)/i,"$1"));
return n._cache[b]}catch(e){d.debug&&console.log("[lively.modules getCachedNodejsModule] %s unknown to nodejs",h.name)}return null};Ee.addNodejsWrapperSource=function(d,h){var n=Ee.getCachedNodejsModule(d,h);if(n)return h.metadata.format="esm",h.source="var exports = System._nodeRequire('"+n.id+"'); export default exports;\n"+Ee.properties.allOwnPropertiesOrFunctions(n.exports).map(function(b){return Ee.isValidIdentifier(b)?"export var "+b+" = exports['"+b+"'];":'/*ignoring export "'+b+'" b/c it is not a valid identifier*/'}).join("\n"),
d.debug&&console.log("[lively.modules customTranslate] loading %s from nodejs module cache",h.name),!0;d.debug&&console.log("[lively.modules customTranslate] %s not yet in nodejs module cache",h.name);return!1};Ee.customTranslate=function(d,h){var n=this,b,e,l,a,f,m,r,v,x,y,E,F,I,J,P,N,Y,W,da;return $jscomp.asyncExecutePromiseGeneratorProgram(function(va){switch(va.nextAddress){case 1:b=n;e=b.debug;if(a=(l=h.metadata)&&l.hasOwnProperty("instrument")&&!l.instrument||Ee.exceptions.some(function(za){return za(h.name)}))return e&&
console.log("[lively.modules customTranslate ignoring] %s",h.name),va.return(d(h));if(Ee.isNode&&Ee.addNodejsWrapperSource(b,h))return e&&console.log("[lively.modules] loaded %s from nodejs cache",h.name),va.return(d(h));f=Date.now();m=Ee.detectModuleFormat(h.source,l);r=Ee.module(b,h.name);v=!1;x="esm"===m;r.setSource(h.source);va.setCatchFinallyBlocks(2);y=b.useModuleTranslationCache;E=b.global.indexedDB;F=y&&String(Ee.string.hashCode(h.source));if(y&&E&&x)return I=b._livelyModulesTranslationCache||
(b._livelyModulesTranslationCache=new Ee.BrowserModuleTranslationCache),va.yield(I.fetchStoredModuleSource(h.name),8);if(!(Ee.isNode&&y&&x)){va.jumpTo(5);break}I=b._livelyModulesTranslationCache||(b._livelyModulesTranslationCache=new Ee.NodeModuleTranslationCache);return va.yield(I.fetchStoredModuleSource(h.name),7);case 7:if((J=va.yieldResult)&&J.hash==F&&J.timestamp>=Ee.NodeModuleTranslationCache.earliestDate&&J.source)return l.format="register",l.deps=[],e&&console.log("[lively.modules customTranslate] loaded %s from filesystem cache after %sms",
h.name,Date.now()-f),va.return(Promise.resolve(J.source));va.jumpTo(5);break;case 8:if((J=va.yieldResult)&&J.hash==F&&J.timestamp>=Ee.BrowserModuleTranslationCache.earliestDate&&J.source)return l.format="register",l.deps=[],e&&console.log("[lively.modules customTranslate] loaded %s from browser cache after %sms",h.name,Date.now()-f),va.return(Promise.resolve(J.source));case 5:va.leaveTryBlock(3);break;case 2:P=va.enterCatchBlock(),console.error("[lively.modules customTranslate] error reading module translation cache: "+
P.stack);case 3:return N={},x?(r.recorderName="__lvVarRecorder",r.recorder===b.global&&r.unloadEnv(),h.metadata.format="esm",Y=Ee.prepareCodeForCustomCompile(b,h.source,h.name,r,e),N=Y.options,W=Y.source,h.source=W,v=h.metadata["lively.modules instrumented"]=!0,e&&console.log("[lively.modules] loaded %s as es6 module",h.name)):"global"===h.metadata.format&&(r.recorderName="System.global",r.recorder=b.global,h.metadata.format="global",da=Ee.prepareCodeForCustomCompile(b,h.source,h.name,r,e),N=da.options,
W=da.source,h.source=W,v=h.metadata["lively.modules instrumented"]=!0,e&&console.log("[lively.modules] loaded %s as instrumented global module",h.name)),v||e&&console.log("[lively.modules] customTranslate ignoring %s b/c don't know how to handle format %s",h.name,h.metadata.format),va.return(d(h).then(function(za){var L,Z,R;return $jscomp.asyncExecutePromiseGeneratorProgram(function(X){switch(X.nextAddress){case 1:0===za.indexOf("System.register(")&&(e&&console.log("[lively.modules customTranslate] Installing System.register setter captures for %s",
h.name),za=Ee.prepareTranslatedCodeForSetterCapture(b,za,h.name,r,N,e));if(Ee.isNode&&y&&x)return L=b._livelyModulesTranslationCache||(b._livelyModulesTranslationCache=new Ee.NodeModuleTranslationCache),X.setCatchFinallyBlocks(8),X.yield(L.cacheModuleSource(h.name,F,za),10);if(!(y&&E&&x)){X.jumpTo(3);break}L=b._livelyModulesTranslationCache||(b._livelyModulesTranslationCache=new Ee.BrowserModuleTranslationCache);X.setCatchFinallyBlocks(5);return X.yield(L.cacheModuleSource(h.name,F,za),7);case 7:e&&
console.log("[lively.modules customTranslate] stored cached version for %s",h.name);X.leaveTryBlock(3);break;case 5:Z=X.enterCatchBlock();console.error("[lively.modules customTranslate] failed storing module cache: "+Z.stack);X.jumpTo(3);break;case 10:e&&console.log("[lively.modules customTranslate] stored cached version in filesystem for %s",h.name);X.leaveTryBlock(3);break;case 8:R=X.enterCatchBlock(),console.error("[lively.modules customTranslate] failed storing module cache: "+R.stack);case 3:return e&&
console.log("[lively.modules customTranslate] done %s after %sms",h.name,Date.now()-f),X.return(za)}})}))}})};Ee.instrumentSourceOfEsmModuleLoad=Sn;Ee.instrumentSourceOfGlobalModuleLoad=MB;Ee.wrapModuleLoad=Zx;Ee.unwrapModuleLoad=Sh;Ee.parse=Xk;Ee.nodes=wy;Ee.isValidIdentifier=Fp;var QX=Ee.nodes;Ee.funcCall=QX.funcCall;Ee.member=QX.member;Ee.literal=QX.literal;Ee.evalCodeTransform=au;Ee.evalCodeTransformOfSystemRegisterSetters=rr;Ee.arr=Mf;Ee.string=Th;Ee.properties=Kr;Ee.module=Dq;Ee.detectModuleFormat=
rP;Ee.resource=A;Ee.installHook=Vc;Ee.removeHook=xd;Ee.isHookInstalled=Yc;Ee.classToFunctionTransform=Mm;Ee.isNode=System.get("@system-env").node;var cJ=function(){};cJ.prototype.cacheModuleSource=function(d,h,n){throw Error("not yet implemented");};cJ.prototype.fetchStoredModuleSource=function(d){throw Error("not yet implemented");};cJ.prototype.deleteCachedData=function(d){throw Error("not yet implemented");};$jscomp.global.Object.defineProperties(cJ,{earliestDate:{configurable:!0,enumerable:!0,
get:function(){return+new Date("Sun Oct 18 2020 16:00:00 GMT-0800 (PST)")}}});Ee.ModuleTranslationCache=cJ;Ee.nodejsCacheDirURL=null;var Dy=function(){return Ee.ModuleTranslationCache.apply(this,arguments)||this};$jscomp.inherits(Dy,Ee.ModuleTranslationCache);Dy.prototype.ensurePath=function(d){var h=this,n,b,e,l,a,f,m;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){switch(r.nextAddress){case 1:return r.yield(h.moduleCacheDir.join(d).exists(),2);case 2:if(r.yieldResult)return r.return();
n="";l=$jscomp.makeIterator(d.split("/"));a=l.next();case 3:if(a.done){r.jumpTo(0);break}f=a.value;n+=f+"/";b=h.moduleCacheDir.join(n);return r.yield(b.exists(),6);case 6:if(r.yieldResult){r.jumpTo(7);break}r.setCatchFinallyBlocks(8);return r.yield(b.mkdir(),10);case 10:r.leaveTryBlock(7);break;case 8:if(m=r.enterCatchBlock(),"EEXIST"!=m.code)throw m;case 7:return b=Ee.resource("file://"+n+"/package.json"),r.yield(b.exists(),11);case 11:if(!r.yieldResult){r.jumpTo(4);break}return r.yield(b.read(),
13);case 13:return e=r.yieldResult,r.yield(h.moduleCacheDir.join(n+"/package.json").write(e),4);case 4:a=l.next(),r.jumpTo(3)}})};Dy.prototype.dumpModuleCache=function(){var d=this,h,n,b,e,l,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){switch(f.nextAddress){case 1:n=f.forIn(System._nodeRequire("module").Module._cache);case 2:if(null==(h=n.getNext())){f.jumpTo(0);break}b=Ee.resource("file://"+h);return f.yield(b.exists(),5);case 5:if(!f.yieldResult){f.jumpTo(2);break}e=d;l=e.cacheModuleSource;
a=h;return f.yield(b.read(),8);case 8:return f.yield(l.call(e,a,"NO_HASH",f.yieldResult),2)}})};Dy.prototype.getFileName=function(d){return d.match(/([^\/]*.)(\.js)?$/)[0]};Dy.prototype.fetchStoredModuleSource=function(d){var h=this,n,b,e,l,a,f,m;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){switch(r.nextAddress){case 1:return d=d.replace("file://",""),n=h.getFileName(d),b=d.replace(n,""),e=h.moduleCacheDir.join(d),r.yield(e.exists(),2);case 2:return r.yieldResult?r.yield(e.stat(),
3):r.return(null);case 3:return l=r.yieldResult,a=l.birthtime,r.yield(e.read(),4);case 4:return f=r.yieldResult,r.yield(h.moduleCacheDir.join(b+"/.hash_"+n).read(),5);case 5:return m=r.yieldResult,r.return({source:f,timestamp:a,hash:m})}})};Dy.prototype.cacheModuleSource=function(d,h,n){var b=this,e,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){return 1==a.nextAddress?(d=d.replace("file://",""),e=b.getFileName(d),l=d.replace(e,""),a.yield(b.ensurePath(l),2)):3!=a.nextAddress?a.yield(b.moduleCacheDir.join(d).write(n),
3):a.yield(b.moduleCacheDir.join(l+"/.hash_"+e).write(h),0)})};Dy.prototype.deleteCachedData=function(d){var h=this,n,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){return 1==e.nextAddress?(d=d.replace("file://",""),n=h.getFileName(d),d.replace(n,""),b=h.moduleCacheDir.join(d),e.yield(b.exists(),2)):3!=e.nextAddress?e.yieldResult?e.yield(b.remove(),3):e.return(!1):e.return(!0)})};$jscomp.global.Object.defineProperties(Dy.prototype,{moduleCacheDir:{configurable:!0,enumerable:!0,get:function(){Ee.nodejsCacheDirURL||
Ee.prepareNodejsCaching();return Ee.resource(Ee.nodejsCacheDirURL+"/.module_cache/")}}});Ee.NodeModuleTranslationCache=Dy;var Ey=function(d){d=void 0===d?"lively.modules-module-translation-cache":d;var h=Ee.ModuleTranslationCache.call(this)||this;h.version=2;h.sourceCodeCacheStoreName="sourceCodeStore";h.dbName=d;h.db=h.openDb();return h};$jscomp.inherits(Ey,Ee.ModuleTranslationCache);Ey.prototype.openDb=function(){var d=this,h=System.global.indexedDB.open(this.version);return new Promise(function(n,
b){h.onsuccess=function(e){n(this.result)};h.onerror=function(e){return b(e.target)};h.onupgradeneeded=function(e){return e.currentTarget.result.createObjectStore(d.sourceCodeCacheStoreName,{keyPath:"moduleId"})}})};Ey.prototype.deleteDb=function(){var d=System.global.indexedDB.deleteDatabase(this.dbName);return new Promise(function(h,n){d.onerror=function(b){return n(b.target)};d.onsuccess=function(b){return h(b)}})};Ey.prototype.closeDb=function(){var d=this,h,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){if(1==
b.nextAddress)return b.yield(d.db,2);h=b.yieldResult;n=h.close();return b.return(new Promise(function(e,l){n.onsuccess=function(a){e(this.result)};n.onerror=function(a){return l(a.target.errorCode)}}))})};Ey.prototype.cacheModuleSource=function(d,h,n){var b=this,e;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){if(1==l.nextAddress)return l.yield(b.db,2);e=l.yieldResult;return l.return(new Promise(function(a,f){var m=e.transaction([b.sourceCodeCacheStoreName],"readwrite"),r=m.objectStore(b.sourceCodeCacheStoreName),
v=Date.now();r.put({moduleId:d,hash:h,source:n,timestamp:v});m.oncomplete=a;m.onerror=f}))})};Ey.prototype.fetchStoredModuleSource=function(d){var h=this,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){if(1==b.nextAddress)return b.yield(h.db,2);n=b.yieldResult;return b.return(new Promise(function(e,l){var a=n.transaction([h.sourceCodeCacheStoreName]).objectStore(h.sourceCodeCacheStoreName).get(d);a.onerror=l;a.onsuccess=function(f){return e(a.result)}}))})};Ey.prototype.deleteCachedData=
function(d){var h=this,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){if(1==b.nextAddress)return b.yield(h.db,2);n=b.yieldResult;return b.return(new Promise(function(e,l){var a=n.transaction([h.sourceCodeCacheStoreName],"readwrite").objectStore(h.sourceCodeCacheStoreName).delete(d);a.onerror=l;a.onsuccess=function(f){return e(a.result)}}))})};Ha("ai",Ey);Ee.BrowserModuleTranslationCache=Ey;Ee.node_modulesDir=System.decanonicalize("lively.modules/node_modules/");Ee.exceptions=[function(d){return!d.endsWith(".js")&&
!d.endsWith(".jsx")&&!d.startsWith("https://jspm.dev")},function(d){return d.endsWith("dist/acorn.js")||d.endsWith("dist/escodegen.browser.js")||d.endsWith("bowser.js")||d.endsWith("TweenMax.min.js")},function(d){return d.endsWith("babel-core/browser.js")||d.endsWith("system.src.js")||d.includes("systemjs-plugin-babel")}];Ee.pendingConfigs=[];Ee.configInitialized=!1;Ee.prepareCodeForCustomCompile=Kk;Ee.prepareCodeForCustomCompile=Kk;Ee.prepareTranslatedCodeForSetterCapture=bk;Ee.prepareTranslatedCodeForSetterCapture=
bk;Ee.wrapModuleLoad=Zx;Ee.wrapModuleLoad=Zx;Ee.unwrapModuleLoad=Sh;Ee.unwrapModuleLoad=Sh;Ee.getExceptions=qu;Ee.getExceptions=qu;Ee.setExceptions=Zh;Ee.setExceptions=Zh;Ee.instrumentSourceOfEsmModuleLoad=Sn;Ee.instrumentSourceOfEsmModuleLoad=Sn;Ee.instrumentSourceOfGlobalModuleLoad=MB;Ee.instrumentSourceOfGlobalModuleLoad=MB;var wh=lively.FreezerRuntime.recorderFor("lively.modules/src/resource.js");wh.fetchResource=function(d,h){var n=this,b,e,l,a,f,m,r,v,x,y,E,F,I,J,P,N,Y,W,da,va,za,L,Z;return $jscomp.asyncExecutePromiseGeneratorProgram(function(R){switch(R.nextAddress){case 1:b=
n;e=25E4;l=b.resource(h.name);a=b.get("@system-env").node&&!l.isNodeJSFileResource;if(!a){R.jumpTo(2);break}return R.yield(lra(h.name),3);case 3:l=R.yieldResult;case 2:if(!l)return R.return(d(h));if(wh.jsFileHashMap||b.get("@system-env").node){R.jumpTo(4);break}r=wh;return R.yield(b.resource(b.baseURL).join("__JS_FILE_HASHES__").readJson(),5);case 5:r.jsFileHashMap=R.yieldResult;case 4:v=b.useModuleTranslationCache;x=b.global.indexedDB;y=b._livelyModulesTranslationCache;if(b.get("@system-env").node||
!v||!x||!y){R.jumpTo(6);break}return R.yield(y.fetchStoredModuleSource(h.name),7);case 7:if((E=R.yieldResult)&&(wh.jsFileHashMap[h.name.replace(b.baseURL,"/")]==E.hash||h.name.includes("jspm")))return h.metadata.instrument=!1,R.return(E.source);case 6:if(l.isResource&&l.ext()&&l.ext().startsWith("css"))return R.return("");R.setCatchFinallyBlocks(8);if(!l.isResource){F=l;R.jumpTo(10);break}return R.yield(l.read(),11);case 11:F=R.yieldResult;case 10:f=F;R.leaveTryBlock(9);break;case 8:m=I=R.enterCatchBlock();
case 9:if(!m||!b.get("@system-env").browser){R.jumpTo(12);break}J=l.url.startsWith("http");P=!l.url.startsWith(document.location.origin);if(!J||!P){R.jumpTo(12);break}R.setCatchFinallyBlocks(14);return R.yield(l.makeProxied(b.baseURL).read(),16);case 16:f=R.yieldResult;m=null;R.leaveTryBlock(12);break;case 14:R.enterCatchBlock();case 12:if(m)throw m;if(!a){R.jumpTo(17);break}N=f.headers||{};Y=N._headers;W=$jscomp.makeIterator(Y&&Y["content-encoding"]||[]);da=W.next().value;return"br"==da?(va=wh.Buffer,
za=va.from,L=wh.brotli,Z=L.decompress,R.yield(f.buffer(),21)):R.yield(f.text(),20);case 20:f=R.yieldResult;R.jumpTo(17);break;case 21:f=za.call(va,Z.call(L,R.yieldResult)).toString();case 17:if(!(f.length>e&&$world)||b._loadingIndicator){R.jumpTo(22);break}b._loadingIndicator=$world.execCommand("open loading indicator",{label:"loading module",status:h.name.replace(b.baseURL,"")});return R.yield(wh.promise.delay(500),23);case 23:if(!b._loadingIndicator){R.jumpTo(22);break}return R.yield(b._loadingIndicator.whenRendered(),
22);case 22:return R.return(f)}})};wh.livelyProtocol=function(d,h){var n=h.match(wh.livelyURLRe);if(!n)return d(h);d=$jscomp.makeIterator(n);d.next();d.next();var b=d.next().value;return{read:function(){var e="undefined"!==typeof $world&&$world.getMorphWithId(b);return Promise.resolve(e?e.textString:"/*Could not locate "+b+"*/")},write:function(e){var l="undefined"!==typeof $world&&$world.getMorphWithId(b);if(!l)return Promise.reject("Could not save morph "+b);l.textString=e;return Promise.resolve(this)}}};
wh.wrapResource=Nm;wh.unwrapResource=Eq;wh.resource=A;wh.Resource=Pg;wh.installHook=Vc;wh.removeHook=xd;wh.isHookInstalled=Yc;wh.brotli=wh.brotli||void 0;if(System.get("@system-env").node){var lra=System._nodeRequire("node-fetch");wh.brotli=System._nodeRequire("brotli")}wh.jsFileHashMap=wh.jsFileHashMap||void 0;wh.livelyURLRe=/^lively:\/\/([^\/]+)\/(.*)$/;wh.wrapResource=Nm;wh.wrapResource=Nm;wh.unwrapResource=Eq;wh.unwrapResource=Eq;var WC=function(){return wh.Resource.apply(this,arguments)||this};
$jscomp.inherits(WC,wh.Resource);WC.prototype.read=function(){var d=this,h,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){h=d.morphId;n="undefined"!==typeof $world&&$world.getMorphWithId(h);return b.return(Promise.resolve(n?n.textString:"/*Could not locate "+h+"*/"))})};WC.prototype.write=function(d){var h=this,n,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){n=h.morphId;b="undefined"!==typeof $world&&$world.getMorphWithId(n);if(!b)return e.return(Promise.reject("Could not save morph "+
n));b.textString=d;return e.return(Promise.resolve(h))})};WC.prototype.exists=function(){var d=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(h){return h.return("undefined"!==typeof $world&&$world.getMorphWithId(d.morphId))})};WC.prototype.remove=function(){var d=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(h){"undefined"!==typeof $world&&$world.getMorphWithId(d.morphId).remove();return h.return(!0)})};$jscomp.global.Object.defineProperties(WC.prototype,{canDealWithJSON:{configurable:!0,
enumerable:!0,get:function(){return!1}},morphId:{configurable:!0,enumerable:!0,get:function(){var d=this.url.match(wh.livelyURLRe);d=$jscomp.makeIterator(d);d.next();d.next();return d.next().value}}});wh.LivelyResource=WC;var RX={name:"lively.modules",matches:function(d){return d.match(wh.livelyURLRe)},resourceClass:wh.LivelyResource};wh.resourceExtension=RX;wh.resourceExtension=RX;wh.resourceExtension=RX;wh.registerExtension=M;wh.promise=hg;wh.registerExtension(wh.resourceExtension);var Id=lively.FreezerRuntime.recorderFor("lively.modules/src/system.js");
Id.wrapModuleResolution=Mz;Id.unwrapModuleResolution=qL;Id.livelySystemEnv=rL;Id.systems=function(){System.constructor.systems||(System.constructor.systems={});return System.constructor.systems};Id.nameOfSystem=function(d){return Object.keys(Id.systems()).detect(function(h){return Id.systems()[h]===d})};Id.getSystem=NB;Id.removeSystem=OB;Id.makeSystem=function(d){return Id.prepareSystem(new System.constructor,d)};Id.prepareSystem=sL;Id.urlQuery=function(){return"undefined"!==typeof document&&document.location?
(document.location.search||"").replace(/^\?/,"").split("&").reduce(function(d,h){var n=h.split("=");h=n[0];n=n[1];"true"===n||"false"===n?n=eval(n):isNaN(Number(n))||(n=Number(n));d[h]=n;return d},{}):{}};Id.preNormalize=function(d,h,n){".."===h&&(h="../index.js");h=h.replace(Id.doubleSlashRe,function(f){return":"===f[0]?f:f[0]+"/"});var b=d.get("@lively-env").packageRegistry;if(b){var e=n&&b.findPackageHavingURL(n);if(e){var l=e.map,a=e.url;if(l=l&&l[h]||d.map[h])"object"===typeof l&&(l=Id.normalize_doMapWithObject(l,
e,d)),"string"===typeof l&&""!==l&&(h=l),h.startsWith(".")&&(h=Id.urlResolve(Id.join(a,h)))}}b&&(d=b.resolvePath(h,n))&&(d.endsWith("/")&&!h.endsWith("/")&&(d=d.slice(0,-1)),!d.endsWith("/")&&h.endsWith("/")&&(d+="/"),h=d);return h};Id.postNormalize=function(d,h,n){n=h.replace(Id.jsExtRe,"");if(h.endsWith("/"))return h;var b=d.get("@lively-env").packageRegistry;if(b){if(b=b.findPackageWithURL(n))return b=(b.main||"index.js").replace(Id.dotSlashStartRe,""),d=n.replace(Id.trailingSlashRe,"")+"/"+b}else if(n in
d.packages&&(b=d.packages[n].main))return d=n.replace(Id.trailingSlashRe,"")+"/"+b.replace(Id.dotSlashStartRe,"");n=h.match(Id.jsonJsExtRe);d.debug&&console.log(">> [postNormalize] "+(n?n[1]:h));return n?n[1]:h};Id.checkExistence=function(d,h){var n,b,e,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){switch(a.nextAddress){case 1:h._fileCheckMap=h._fileCheckMap||{};if(d in h._fileCheckMap)return a.return(h._fileCheckMap[d]);n=h._livelyModulesTranslationCache;if(!(b=n)){a.jumpTo(2);
break}return a.yield(n.fetchStoredModuleSource(d),3);case 3:b=a.yieldResult;case 2:if(b)return a.return(h._fileCheckMap[d]=!0);e=h._fileCheckMap;l=d;return a.yield(Id.resource(d).exists(),4);case 4:return a.return(e[l]=a.yieldResult)}})};Id.normalizeHook=function(d,h,n,b){var e=this,l,a,f,m,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(x){switch(x.nextAddress){case 1:if(n&&"cjs"==h)return x.return("cjs");l=e;a=Id.preNormalize(l,h,n);return x.yield(d(a,n,b),2);case 2:f=x.yieldResult;
m=Id.postNormalize(l,f||a,!1);r=m.startsWith("file:");l.debug&&console.log("[normalize] "+h+" => "+m);if(Id.jsExtRe.test(h)||Id.jsxExtRe.test(h)||Id.jsonExtRe.test(m)||Id.nodeModRe.test(m)||Id.nodeExtRe.test(m)||l.loads&&l.loads[m]){x.jumpTo(3);break}if(Id.jsExtRe.test(m))return x.yield(Id.checkExistence(m,l),9);if(m.includes("jspm.dev")||"@empty"==m){x.jumpTo(3);break}return x.yield(Id.checkExistence(m+".js",l),7);case 7:return x.yieldResult?x.return(m+".js"):x.yield(Id.checkExistence(m+"/index.js",
l),8);case 8:if(x.yieldResult)return x.return(m+"/index.js");x.jumpTo(3);break;case 9:if(x.yieldResult)return x.return(m);v=m.replace(".js","/index.js");return x.yield(Id.checkExistence(v,l),10);case 10:return x.yieldResult||!r?x.return(v):x.return(m.replace(".js","/index.node"));case 3:return Id.jsxJsExtRe.test(m)&&(m=m.replace(".jsx.js",".jsx")),x.return(m)}})};Id.decanonicalizeHook=function(d,h,n,b){if(h&&h.endsWith("!cjs")){h=h.replace("!cjs","");var e="!cjs"}var l=Id.preNormalize(this,h,n);d=
d(l,n,b);d=Id.postNormalize(this,d,!0);e&&(d+=e);this.debug&&console.log("[normalizeSync] "+h+" => "+d);return d};Id.locateHook=function(d,h){var n,b,e;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){if(1==l.nextAddress)return n=$jscomp.makeIterator(h.name.split("!")),b=n.next().value,n.next(),h.name=b,l.yield(d(h),2);e=l.yieldResult;return l.return(e)})};Id.normalize_doMapWithObject=function(d,h,n){h=n.get(h.map["@env"]||"@system-env");var b;for(b in d){var e=(n="~"==b[0])?b.substr(1):
b,l=h;for(e=e.split(".");e.length;)l=l[e.shift()];if(!n&&l||n&&!l){var a=d[b];break}}if(a&&"string"!==typeof a)throw Error("Unable to map a package conditional to a package conditional.");return a};Id.normalize_packageOfURL=function(d,h){var n=Object.keys(h.packages||{}).map(function(b){return 0===d.indexOf(b)?{url:b,penalty:d.slice(b.length).length}:null}).filter(function(b){return!!b});return(h=(n=n.length?n.reduce(function(b,e){return b.penalty>e.penalty?e:b}).url:null)&&h.packages[n])?{systemPackage:h,
packageURL:n}:null};Id.newModule_volatile=function(d,h){var n=Object.freeze;Object.freeze=function(b){return b};d=d(h);Object.freeze=n;return d};Id.printSystemConfig=tL;Id.instantiate_triggerOnLoadCallbacks=function(d,h){var n=this;return d(h).then(function(b){var e={};Id.promise.waitFor(6E4,function(){return n.get(h.name)},e).then(function(l){if(l===e)console.warn("[lively.modules] instantiate_triggerOnLoadCallbacks for "+h.name+" timed out");else{l=h.name;for(var a=Id.classHolder.module(n,l),f=
n.get("@lively-env").onLoadCallbacks,m=f.length;m--;){var r=f[m],v=r.moduleName,x=r.callback;if((r.resolved?v:n.decanonicalize(v))===l){f.splice(m,1);try{x(a)}catch(y){console.error(y)}}}Id.emit("lively.modules/moduleloaded",{module:h.name},Date.now(),n);n._loadingIndicator&&(n._loadingIndicator.remove(),n._loadingIndicator=null)}});return b})};Id.whenLoaded=uL;Id.loadedModules=vL;Id.knownModuleNames=wL;Id.searchLoadedModules=TS;Id.arr=Mf;Id.obj=ng;Id.promise=hg;Id.removeHook=xd;Id.installHook=Vc;
Id.isHookInstalled=Yc;Id.classHolder=Cy;Id.isNode=System.get("@system-env").node;Id.GLOBAL="undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:void 0;Id.defaultOptions={notificationLimit:null};Id.wrapModuleResolution=Mz;Id.wrapModuleResolution=Mz;Id.unwrapModuleResolution=qL;Id.unwrapModuleResolution=qL;Id.wrapModuleLoad=Zx;Id.wrapResource=Nm;Id.emit=jn;Id.join=aJ;Id.urlResolve=Se;Id.resource=A;Id.dotSlashStartRe=/^\.?\//;Id.trailingSlashRe=/\/$/;Id.jsExtRe=
/\.js$/;Id.jsxExtRe=/\.jsx$/;Id.nodeExtRe=/\.node$/;Id.jsonExtRe=/\.json$/;Id.jsonJsExtRe=/(.*\.json)\.js$/i;Id.jsxJsExtRe=/(.*\.jsx)\.js$/i;Id.doubleSlashRe=/.\/{2,}/g;Id.nodeModRe=/@node.*/;Id.whenLoaded=uL;Id.whenLoaded=uL;Id.getSystem=NB;Id.getSystem=NB;Id.removeSystem=OB;Id.removeSystem=OB;Id.prepareSystem=sL;Id.prepareSystem=sL;Id.printSystemConfig=tL;Id.printSystemConfig=tL;Id.livelySystemEnv=rL;Id.livelySystemEnv=rL;Id.loadedModules=vL;Id.loadedModules=vL;Id.knownModuleNames=wL;Id.knownModuleNames=
wL;Id.searchLoadedModules=TS;Id.searchLoadedModules=TS;var bh=lively.FreezerRuntime.recorderFor("lively.modules/src/packages/package-registry.js");bh.isAbsolute=function(d){return d.startsWith("/")||d.startsWith("http:")||d.startsWith("https:")||d.startsWith("file:")||d.match(bh.urlStartRe)};bh.ensureResource=function(d){return d.isResource?d:bh.resource(d)};bh.semver=PI;bh.arr=Mf;bh.obj=ng;bh.promise=hg;bh.getPackage=Wf;bh.Package=Hj;bh.resource=A;bh.isURL=we;bh.classHolder=Cy;bh.urlStartRe=/^[a-z\.-_\+]+:/i;
var ij=function(d,h){h=void 0===h?{}:h;this.System=d;this.packageBaseDirs=h.packageBaseDirs||[];this.devPackageDirs=h.devPackageDirs||[];this.individualPackageDirs=h.individualPackageDirs||[];this._readyPromise=null;this.packageMap={};this._byURL=null};ij.ofSystem=function(d){var h=d.get("@lively-env").packageRegistry;h||(h=d["__lively.modules__packageRegistry"]=new this(d));return h};ij.forDirectory=function(d,h){return new this(d,{packageBaseDirs:[bh.ensureResource(h)]})};ij.fromJSON=function(d,
h){return(new this(d)).fromJSON(h)};ij.prototype.resetByURL=function(){this._byURL=null};ij.prototype.allPackageURLs=function(){return Object.keys(this.byURL)};ij.prototype.toJSON=function(){function d(v){v=v.url;return v.startsWith(h.baseURL)?v.slice(h.baseURL.length).replace(/^\//,""):v}var h=this.System,n=this.packageMap,b=this.individualPackageDirs,e=this.devPackageDirs,l=this.packageBaseDirs,a={},f;for(f in n){var m=n[f];a[f]={};a[f].latest=m.latest;a[f].versions={};for(var r in m.versions)a[f].versions[r]=
m.versions[r].toJSON()}return{packageMap:a,individualPackageDirs:b.map(d),devPackageDirs:e.map(d),packageBaseDirs:l.map(d)}};ij.prototype.fromJSON=function(d){function h(v){return bh.isURL(v)?bh.resource(v):bh.resource(b.baseURL).join(v)}var n={},b=this.System,e=bh.resource(b.baseURL),l;for(l in d.packageMap){var a=d.packageMap[l];n[l]={};n[l].latest=a.latest;n[l].versions={};for(var f in a.versions){var m=a.versions[f],r=m.url;bh.isAbsolute(r)||(r=e.join(r).url);m=bh.Package.fromJSON(b,Object.assign({},
m,{url:r}));n[l].versions[f]=m}}this.packageMap=n;this.individualPackageDirs=d.individualPackageDirs.map(h);this.devPackageDirs=d.devPackageDirs.map(h);this.packageBaseDirs=d.packageBaseDirs.map(h);this.resetByURL();bh.classHolder.ModulePackageMapping.forSystem(b).clearCache();return this};ij.prototype.updateFromJSON=function(d){var h=this.packageMap,n;for(n in d.packageMap){var b=d.packageMap[n];h[n]||(h[n]={});h[n].latest?bh.semver.gt(b.latest,h[n].latest)&&(h[n].latest=b.latest):h[n].latest;h[n].versions||
(h[n].versions={});var e=this.System,l=bh.resource(e.baseURL),a;for(a in b.versions){var f=b.versions[a],m=f.url;bh.isAbsolute(m)||(m=l.join(m).url);f=new bh.Package.fromJSON(e,Object.assign({},f,{url:m}));h[n].versions[a]=f}}this.resetByURL();bh.classHolder.ModulePackageMapping.forSystem(System).clearCache();return this};ij.prototype.whenReady=function(){return this._readyPromise||Promise.resolve()};ij.prototype.isReady=function(){return!this._readyPromise};ij.prototype.withPackagesDo=function(d){for(var h in this.packageMap){var n=
this.packageMap[h].versions,b;for(b in n)d(n[b])}};ij.prototype.findPackage=function(d){for(var h in this.packageMap){var n=this.packageMap[h].versions,b;for(b in n){var e=n[b];if(d(e))return e}}return null};ij.prototype.filterPackages=function(d){var h=[];this.withPackagesDo(function(n){return d(n)&&h.push(n)});return h};ij.prototype.allPackages=function(){var d=[],h;for(h in this.packageMap){var n=this.packageMap[h].versions,b;for(b in n)d.push(n[b])}return d};ij.prototype.sortPackagesByVersion=
function(d){return d.sort(function(h,n){return bh.semver.compare(h.version,n.version,!0)})};ij.prototype.matches=function(d,h,n){var b=d.version;return d.name!==h?!1:!n||bh.semver.validRange(b||"",!0)&&bh.semver.satisfies(b,n,!0)?!0:!1};ij.prototype.coversDirectory=function(d){d=bh.ensureResource(d).asDirectory();var h=this.packageBaseDirs,n=this.devPackageDirs;if(this.individualPackageDirs.some(function(e){return e.equals(d)}))return"individualPackageDirs";if(n.some(function(e){return e.equals(d)}))return"devPackageDirs";
var b=d.parent().parent();return h.some(function(e){return e.equals(b)})?this.allPackages().find(function(e){return bh.ensureResource(e.url).equals(d)})?"packageCollectionDirs":"maybe packageCollectionDirs":null};ij.prototype.lookup=function(d,h){var n=this,b=this.packageMap[d];if(!b)return null;if(!h||"latest"===h)return b.versions[b.latest];if(!bh.semver.validRange(h,!0))throw Error("PackageRegistry>>lookup of "+d+": Invalid version - "+h);b=bh.obj.values(b.versions).filter(function(e){return n.matches(e,
d,h)});return 1>=b.length?b[0]:bh.arr.last(this.sortPackagesByVersion(b))};ij.prototype.findPackageDependency=function(d,h,n){n||(n=d.dependencies[h]||d.devDependencies[h]);bh.semver.validRange(n,!0)||(n=null);return this.lookup(h,n)};ij.prototype.findPackageWithURL=function(d){d.isResource&&(d=d.url);d.endsWith("/")&&(d=d.slice(0,-1));return this.byURL[d]};ij.prototype.findPackageHavingURL=function(d){d.isResource&&(d=d.url);d.endsWith("/")&&(d=d.slice(0,-1));var h=Infinity,n=null,b=this.byURL,e;
for(e in b)if(0===d.indexOf(e)){var l=d.slice(e.length).length;l>=h||(h=l,n=b[e])}return n};ij.prototype.findPackageForPath=function(d,h){if(bh.isAbsolute(d))return this.findPackageHavingURL(d);if(d.startsWith("."))return null;d=$jscomp.makeIterator(d.split("/")).next().value;if(!d)return null;var n=d.indexOf("@");if(-1<n){var b=d.slice(n+1);d=d.slice(0,n)}return!b&&h?this.findPackageDependency(h,d):this.lookup(d,b)};ij.prototype.resolvePath=function(d,h){if(bh.isAbsolute(d))return d;var n=h&&h.isPackage||
null;if(!n&&h){if(d.startsWith("."))return h=bh.resource(h),h.isDirectory()||(h=h.parent()),h.join(d).withRelativePartsResolved().url;n=this.findPackageHavingURL(h)}h=this.findPackageForPath(d,n);if(!h)return null;n=d.indexOf("/");return(d=-1===n||n===d.length-1?"":d.slice(n))?bh.resource(h.url).join(d).url:h.url};ij.prototype.update=function(){var d=this,h,n,b,e,l,a,f,m,r,v,x,y,E,F,I,J,P,N,Y,W,da,va,za,L,Z;return $jscomp.asyncExecutePromiseGeneratorProgram(function(R){switch(R.nextAddress){case 1:if(!d.isReady())return R.return(d.whenReady().then(function(){return d.update()}));
h=bh.promise.deferred();d._readyPromise=h.promise;d.packageBaseDirs=d.packageBaseDirs.map(function(X){return X.asDirectory()});d.individualPackageDirs=d.individualPackageDirs.map(function(X){return X.asDirectory()});d.devPackageDirs=d.devPackageDirs.map(function(X){return X.asDirectory()});n={};R.setCatchFinallyBlocks(2,3);b=$jscomp.makeIterator(d.packageBaseDirs);e=b.next();case 5:if(e.done){R.jumpTo(7);break}l=e.value;a=$jscomp;f=a.makeIterator;return R.yield(l.dirList(1),8);case 8:m=f.call(a,R.yieldResult),
r=m.next();case 9:if(r.done){e=b.next();R.jumpTo(5);break}v=r.value;x=$jscomp;y=x.makeIterator;return R.yield(v.dirList(1),12);case 12:E=y.call(x,R.yieldResult.filter(function(X){return X.isDirectory()})),F=E.next();case 13:if(F.done){r=m.next();R.jumpTo(9);break}I=F.value;return R.yield(d._discoverPackagesIn(I,n,"packageCollectionDirs"),16);case 16:n=R.yieldResult;F=E.next();R.jumpTo(13);break;case 7:J=$jscomp.makeIterator(d.individualPackageDirs),e=J.next();case 17:if(e.done){R.jumpTo(19);break}P=
e.value;return R.yield(d._discoverPackagesIn(P,n,"individualPackageDirs"),20);case 20:n=R.yieldResult;e=J.next();R.jumpTo(17);break;case 19:N=$jscomp.makeIterator(d.devPackageDirs),e=N.next();case 21:if(e.done){R.jumpTo(23);break}Y=e.value;return R.yield(d._discoverPackagesIn(Y,n,"devPackageDirs"),24);case 24:n=R.yieldResult;e=N.next();R.jumpTo(21);break;case 23:for(W in n)da=n[W],va=da.pkg,za=da.config,L=da.covered,d.System.debug&&console.log("[PackageRegistry] Adding discovered package "+W+" (from "+
L+")"),d._addPackageWithConfig(va,za,W+"/",L);d._updateLatestPackages();h.resolve();case 3:R.enterFinallyBlock();d._readyPromise=null;d.resetByURL();bh.classHolder.ModulePackageMapping.forSystem(d.System).clearCache();R.leaveFinallyBlock(4);break;case 2:Z=R.enterCatchBlock();h.reject(Z);R.jumpTo(3);break;case 4:return R.return(d)}})};ij.prototype.addPackageAt=function(d,h,n){h=void 0===h?"individualPackageDirs":h;var b=this,e,l,a,f,m,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(x){if(1==
x.nextAddress){e=d.isResource?d.url:d;e.endsWith("/")&&e.slice(0,-1);if(b.byURL[e])throw Error("package in "+e+" already added to registry");return x.yield(b._discoverPackagesIn(bh.ensureResource(d).asDirectory(),{},void 0,n),2)}l=x.yieldResult;for(a in l)b.byURL[a]||(f=l[a],m=f.pkg,r=f.config,v=b._addPackageDir(a,h,!0),b._addPackageWithConfig(m,r,a+"/",v));b.resetByURL();bh.classHolder.ModulePackageMapping.forSystem(b.System).clearCache();b._updateLatestPackages();return x.return(b.findPackageWithURL(d))})};
ij.prototype.removePackage=function(d,h){h=void 0===h?!0:h;var n=d.name,b=d.version,e=bh.ensureResource(d.url),l=this.coversDirectory(e);"devPackageDirs"===l?this.devPackageDirs=this.devPackageDirs.filter(function(a){return!a.equals(e)}):"individualPackageDirs"===l&&(this.individualPackageDirs=this.individualPackageDirs.filter(function(a){return!a.equals(e)}));l=this.packageMap;l[n]&&(delete l[n].versions[b],0===Object.keys(l[n].versions).length&&delete l[n]);this.resetByURL();bh.classHolder.ModulePackageMapping.forSystem(this.System).clearCache();
h&&this._updateLatestPackages(d.name)};ij.prototype.updateNameAndVersionOf=function(d,h,n,b,e){var l=this.packageMap;l[h]?l[h].versions[n]||console.warn("[PackageRegistry>>updateNameAndVersionOf] No version entry "+n+" of "+h+" found in registry ("+d.url+")"):console.warn("[PackageRegistry>>updateNameAndVersionOf] "+h+"@"+n+" not found in registry ("+d.url+")");this._addToPackageMap(d,b,e);l[h]&&l[h].versions[n]&&(delete l[h].versions[n],0===Object.keys(l[h].versions).length&&delete l[h]);this._updateLatestPackages(d.name)};
ij.prototype._updateLatestPackages=function(d){var h=this.packageMap;if(d&&h[d])h[d].latest=bh.arr.last(bh.semver.sort(Object.keys(h[d].versions),!0));else for(var n in h)h[n].latest=bh.arr.last(bh.semver.sort(Object.keys(h[n].versions),!0))};ij.prototype._discoverPackagesIn=function(d,h,n,b){b=void 0===b?null:b;var e=this,l,a,f,m,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(x){if(1==x.nextAddress){if(!d.isDirectory())return x.return(h);l=d.asFile().url;if(h.hasOwnProperty(l))return x.return(h);
x.setCatchFinallyBlocks(2);a=b&&b[l]||new bh.Package(e.System,l);return x.yield(a.tryToLoadPackageConfig(),4)}if(2!=x.nextAddress)return f=x.yieldResult,a.setConfig(f),h[l]={pkg:a,config:f,covered:n},e.System.debug&&(m=f,r=m.name,v=m.version,console.log("[lively.modules] package "+r+"@"+v+" discovered in "+d.url)),x.return(h);x.enterCatchBlock();return x.return(h)})};ij.prototype._addToPackageMap=function(d,h,n,b){if(!h)throw Error("Cannot add package without name");n||(n="0.0.0");var e=this.packageMap;
h=e[h]||(e[h]={versions:{},latest:null});if(h.versions[n])if(e="Redefining version "+n+" of package "+d.url,void 0===b||b)console.warn(e);else throw Error(e+" not allowed");h.versions[n]=d};ij.prototype._addPackageWithConfig=function(d,h,n,b){(void 0===b?0:b)||this._addPackageDir(n,"individualPackageDirs",!0);d.registerWithConfig(h);this._addToPackageMap(d,d.name,d.version);return d};ij.prototype._addPackageDir=function(d,h,n){h=void 0===h?"individualPackageDirs":h;n=void 0===n?!0:n;d=bh.ensureResource(d).asDirectory();
if(("packageCollectionDirs"===h||"maybe packageCollectionDirs"===h)&&(this.coversDirectory(d)||"").includes("packageCollectionDirs"))return"packageCollectionDirs";d=this[h].concat(d);this[h]=n?bh.arr.uniqBy(d,function(b,e){return b.equals(e)}):d;return h};$jscomp.global.Object.defineProperties(ij.prototype,{byURL:{configurable:!0,enumerable:!0,get:function(){if(!this._byURL){this._byURL={};for(var d=$jscomp.makeIterator(this.allPackages()),h=d.next();!h.done;h=d.next())h=h.value,this._byURL[h.url]=
h}return this._byURL}}});bh.PackageRegistry=ij;var jo=lively.FreezerRuntime.recorderFor("lively.modules/src/export-lookup.js");jo.arr=Mf;jo.obj=ng;jo.subscribe=Gp;jo.unsubscribe=Ox;jo.module=Dq;var Jo=function(d){this.System=d;this.subscribeToSystemChanges()};Jo.forSystem=function(d){this._forSystemMap||(this._forSystemMap=new WeakMap);var h=this._forSystemMap.get(d);if(h)return h;h=new this(d);this._forSystemMap.set(d,h);return h};Jo.run=function(d,h){d=void 0===d?System:d;return this.forSystem(d).systemExports(h)};
Jo.findExportOfValue=function(d,h){h=void 0===h?System:h;var n=this,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(1==e.nextAddress)return e.yield(n.run(h),2);b=e.yieldResult;return e.return(b.find(function(l){var a=l.local;l=jo.module(h,l.moduleId);l=l.recorder||h.get(l.id)||{};try{return l[a]===d}catch(f){return!1}}))})};Jo.prototype.subscribeToSystemChanges=function(){var d=this;if(!this._notificationHandlers){var h=this.System;this._notificationHandlers=[jo.subscribe("lively.modules/moduleloaded",
function(n){return d.clearCacheFor(n.module)},h),jo.subscribe("lively.modules/modulechanged",function(n){return d.clearCacheFor(n.module)},h),jo.subscribe("lively.vm/doitresult",function(n){return d.clearCacheFor(n.targetModule)},h)]}};Jo.prototype.unsubscribeFromSystemChanges=function(){if(this._notificationHandlers){var d=this.System;jo.unsubscribe("lively.modules/moduleloaded",this._notificationHandlers[0],d);jo.unsubscribe("lively.modules/modulechanged",this._notificationHandlers[1],d);jo.unsubscribe("lively.vm/doitresult",
this._notificationHandlers[2],d);this._notificationHandlers=null}};Jo.prototype.clearCacheFor=function(d){this.exportByModuleCache[d]=null};Jo.prototype.systemExports=function(d){var h=this,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){if(1==b.nextAddress)return b.yield(h.rawExportsByModule(d),2);n=b.yieldResult;Object.keys(n).forEach(function(e){return h.resolveExportsOfModule(e,n)});return b.return(jo.arr.flatmap(Object.keys(n),function(e){return n[e]?n[e].resolvedExports||n[e].rawExports:
[]}))})};Jo.prototype.rawExportsByModule=function(d){var h=this,n,b,e,l,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){return 1==f.nextAddress?(d=d||{},n=h.System,b=n.get("@lively-env")||{},e=Object.keys(b.loadedModules||{}),l={},a=function(m){1>m%50&&d.progress.step&&d.progress.step("Scanning ...",m/e.length)},f.yield(Promise.all(e.map(function(m,r){d.progress&&a(r);return h.rawExportsOfModule(m,d,l).then(function(v){return v?l[m]=v:null})})),2)):f.return(l)})};Jo.prototype.rawExportsOfModule=
function(d,h){h=void 0===h?{}:h;var n=this,b,e,l,a,f,m,r,v,x,y,E,F,I,J,P,N,Y,W,da,va,za,L;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Z){switch(Z.nextAddress){case 1:b=n;e=b.System;l=b.exportByModuleCache;a=h.excludedPackages||[];f=h.excludedURLs||(h.excludedURLs=a.filter(function(R){return"string"===typeof R}));m=h.excludeFns||(h.excludeFns=a.filter(function(R){return"function"===typeof R}));r=h.excludedPackageURLs||(h.excludedPackageURLs=f.concat(f.map(function(R){return e.decanonicalize(R.replace(/\/?$/,
"/")).replace(/\/$/,"")})));v=h.livelyEnv||(h.livelyEnv=e.get("@lively-env")||{});h.modes||(h.modes=Object.keys(v.loadedModules||{}));if(l[d])return x=l[d].rawExports,Z.return(r.includes(x.packageURL)||m.some(function(R){return R(x.packageURL)})?null:l[d]);y=jo.module(e,d);E=y.pathInPackage();I=(F=y.package())&&F.main&&E===F.main;J=F?F.url:"";P=F?F.name:"";N=F?F.version:"";Y={moduleId:d,isMain:I,pathInPackage:E,packageName:P,packageURL:J,packageVersion:N,exports:[]};if(r.includes(J)||m.some(function(R){return R(J)}))return Z.return(null);
Z.setCatchFinallyBlocks(2);W=y.format();return["register","es6","esm"].includes(W)?(za=Y,Z.yield(y.exports(),7)):Z.yield(y.load(),6);case 6:da=Z.yieldResult;Y.exports=[];for(va in da)"__useDefault"!==va&&"default"!==va&&Y.exports.push({exported:va,local:va,type:"id"});Z.jumpTo(5);break;case 7:za.exports=Z.yieldResult;case 5:Z.leaveTryBlock(3);break;case 2:L=Z.enterCatchBlock(),Y.error=L;case 3:return Z.return(l[d]={rawExports:Y})}})};Jo.prototype.resolveExportsOfModule=function(d,h,n){var b=this;
n=void 0===n?{}:n;if(!n[d]){n[d]=!0;var e=h[d];if(e&&!e.resolvedExports){var l=this.System,a=jo.obj.select(e.rawExports,"moduleId isMain packageName packageURL packageVersion pathInPackage".split(" "));e.resolvedExports=jo.arr.flatmap(e.rawExports.exports,function(f){var m=f.type,r=f.exported,v=f.local,x=f.fromModule;if("all"!==m)return[Object.assign({},a,{type:m,exported:r,local:v,fromModule:x})];f=l.decanonicalize(x,d);b.resolveExportsOfModule(f,h,n);return(h[f]&&h[f].resolvedExports||[]).map(function(y){return Object.assign({},
a,{type:y.type,exported:y.exported,local:y.local,fromModule:y.fromModule||x})})});n[d]=!1}}};$jscomp.global.Object.defineProperties(Jo.prototype,{exportByModuleCache:{configurable:!0,enumerable:!0,get:function(){return this._exportByModuleCache||(this._exportByModuleCache={})}}});Ha("bJ",Jo);jo.ExportLookup=Jo;jo.default=Jo;var mn=lively.FreezerRuntime.recorderFor("lively.modules/cjs/dependencies.js");mn.buildPackageMap=iH;mn.resolvePackageDependencies=xL;mn.dependencyGraph=yL;mn.arr=Mf;mn.fun=vn;
mn.promise=hg;mn.obj=ng;mn.resource=A;mn.buildPackageMap=iH;mn.buildPackageMap=iH;mn.resolvePackageDependencies=xL;mn.resolvePackageDependencies=xL;mn.dependencyGraph=yL;mn.dependencyGraph=yL;var sP=Object.freeze({__proto__:null,buildPackageMap:iH,resolvePackageDependencies:xL,dependencyGraph:yL}),ko=lively.FreezerRuntime.recorderFor("lively.modules/src/packages/module-package-mapping.js");ko.arr=Mf;ko.unsubscribe=Ox;ko.subscribe=Gp;ko.knownModuleNames=wL;ko.classHolder=Cy;var mt=function(d){this.System=
d;this._notificationHandlers=null;this.clearCache();this.subscribeToSystemChanges()};mt.forSystem=function(d){var h=d["__lively.modules__modulePackageMapCache"];if(h)return h;h=new this(d);return d["__lively.modules__modulePackageMapCache"]=h};mt.prototype.subscribeToSystemChanges=function(){var d=this;if(!this._notificationHandlers){var h=this.System;this._notificationHandlers=[ko.subscribe("lively.modules/moduleloaded",function(n){return d.addModuleIdToCache(n.module)},h),ko.subscribe("lively.modules/moduleunloaded",
function(n){return d.removeModuleFromCache(n.module)},h),ko.subscribe("lively.modules/packageregistered",function(n){return d.clearCache()},h),ko.subscribe("lively.modules/packageremoved",function(n){return d.clearCache()},h)]}};mt.prototype.unsubscribeFromSystemChanges=function(){if(this._notificationHandlers){var d=this.System;ko.unsubscribe("lively.modules/moduleloaded",this._notificationHandlers[0],d);ko.unsubscribe("lively.modules/moduleunloaded",this._notificationHandlers[1],d);ko.unsubscribe("lively.modules/packageregistered",
this._notificationHandlers[2],d);ko.unsubscribe("lively.modules/packageremoved",this._notificationHandlers[3],d);this._notificationHandlers=null}};mt.prototype.clearCache=function(){this._cacheInitialized=!1;this.packageToModule={};this.modulesToPackage={};this.modulesWithoutPackage={}};mt.prototype.ensureCache=function(){var d=this.System,h=this.packageToModule,n=this.modulesToPackage,b=this.modulesWithoutPackage;if(this._cacheInitialized)return this;for(var e=ko.classHolder.Package.allPackageURLs(d),
l=0;l<e.length;l++)h[e[l]]=[];d=ko.knownModuleNames(d);for(l=0;l<d.length;l++){for(var a=d[l],f=void 0,m=0;m<e.length;m++){var r=e[m];a.startsWith(r)&&(!f||f.length<r.length)&&(f=r)}f?(h[f].push(a),n[a]=f):b[a]={}}this._cacheInitialized=!0;return this};mt.prototype.addModuleIdToCache=function(d){this.ensureCache();var h=this.packageToModule,n=this.modulesToPackage,b=this.modulesWithoutPackage;if(n[d])return n[d];if(b[d])return null;for(var e=Object.keys(h),l,a=0;a<e.length;a++){var f=e[a];d.startsWith(f)&&
(!l||l.length<f.length)&&(l=f)}if(l)return(h[l]||(h[l]=[])).push(d),n[d]=l;b[d]={};return null};mt.prototype.removeModuleFromCache=function(d){if(this._cacheInitialized){var h=this.packageToModule,n=this.modulesToPackage,b=this.modulesWithoutPackage;if(b.hasOwnProperty(d))delete b[d];else if(b=n[d])delete n[d],h[b]&&ko.arr.remove(h[b],d)}};mt.prototype.getPackageURLForModuleId=function(d){return this.modulesToPackage[d]||this.addModuleIdToCache(d)};mt.prototype.getModuleIdsForPackageURL=function(d){this.ensureCache();
return this.packageToModule[d]||[]};ko.ModulePackageMapping=mt;ko.default=mt;var Xc=lively.FreezerRuntime.recorderFor("lively.modules/index.js");Xc.changeSystem=zL;Xc.wrapModuleResolution=AL;Xc.unwrapModuleResolution=BL;Xc.loadedModules=CL;Xc.module=jH;Xc.isModuleLoaded=DL;Xc.doesModuleExist=EL;Xc.printSystemConfig=FL;Xc.whenLoaded=GL;Xc.importPackage=HL;Xc.registerPackage=IL;Xc.removePackage=JL;Xc.reloadPackage=KL;Xc.getPackages=LL;Xc.getPackage=ML;Xc.getPackageOfModule=NL;Xc.ensurePackage=OL;Xc.applyPackageConfig=
PL;Xc.lookupPackage=QL;Xc.moduleSourceChange=RL;Xc.requireMap=SL;Xc.isHookInstalled=TL;Xc.installHook=UL;Xc.removeHook=VL;Xc.wrapModuleLoad=WL;Xc.unwrapModuleLoad=XL;Xc.getSystem=NB;Xc.removeSystem=OB;Xc.prepareSystem=sL;Xc._printSystemConfig=tL;Xc._unwrapModuleResolution=qL;Xc._wrapModuleResolution=Mz;Xc._whenLoaded=uL;Xc._module=Dq;Xc._doesModuleExist=pu;Xc._isModuleLoaded=ou;Xc.GLOBAL="undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:void 0;Xc.defaultSystem=
Xc.defaultSystem||Xc.prepareSystem(Xc.GLOBAL.System);var SX=Xc.defaultSystem;Xc.System=SX;Xc.defaultSystem=SX;Xc.getSystem=NB;Xc.getSystem=NB;Xc.removeSystem=OB;Xc.removeSystem=OB;Xc.loadedModules=CL;Xc.loadedModules=CL;Xc.printSystemConfig=FL;Xc.printSystemConfig=FL;Xc.whenLoaded=GL;Xc.whenLoaded=GL;Xc.changeSystem=zL;Xc.changeSystem=zL;Xc.module=jH;Xc.module=jH;Xc.doesModuleExist=EL;Xc.doesModuleExist=EL;Xc.isModuleLoaded=DL;Xc.isModuleLoaded=DL;Xc.unwrapModuleResolution=BL;Xc.unwrapModuleResolution=
BL;Xc.wrapModuleResolution=AL;Xc.wrapModuleResolution=AL;Xc.Package=Hj;Xc._getPackage=Wf;Xc._ensurePackage=wf;Xc.getPackageSpecs=uk;Xc._applyPackageConfig=Dh;Xc._importPackage=jk;Xc._removePackage=ak;Xc._reloadPackage=nj;Xc._registerPackage=vh;Xc._lookupPackage=nf;Xc.importPackage=HL;Xc.importPackage=HL;Xc.registerPackage=IL;Xc.registerPackage=IL;Xc.removePackage=JL;Xc.removePackage=JL;Xc.reloadPackage=KL;Xc.reloadPackage=KL;Xc.getPackages=LL;Xc.getPackages=LL;Xc.getPackage=ML;Xc.getPackage=ML;Xc.getPackageOfModule=
NL;Xc.getPackageOfModule=NL;Xc.ensurePackage=OL;Xc.ensurePackage=OL;Xc.applyPackageConfig=PL;Xc.applyPackageConfig=PL;Xc.lookupPackage=QL;Xc.lookupPackage=QL;Xc.PackageRegistry=ij;Xc.PackageRegistry=ij;Xc.PackageRegistry=ij;Xc._moduleSourceChange=Hd;Xc.moduleSourceChange=RL;Xc.moduleSourceChange=RL;Xc.computeRequireMap=ge;Xc.requireMap=SL;Xc.requireMap=SL;Xc._isHookInstalled=Yc;Xc._installHook=Vc;Xc._removeHook=xd;Xc.isHookInstalled=TL;Xc.isHookInstalled=TL;Xc.installHook=UL;Xc.installHook=UL;Xc.removeHook=
VL;Xc.removeHook=VL;Xc._wrapModuleLoad=Zx;Xc._unwrapModuleLoad=Sh;Xc.wrapModuleLoad=WL;Xc.wrapModuleLoad=WL;Xc.unwrapModuleLoad=XL;Xc.unwrapModuleLoad=XL;Xc.default=Jo;Xc.ExportLookup=Jo;Xc.cjs=sP;Xc.cjs=sP;Xc.cjs=sP;Xc.default=PI;Xc.semver=PI;Xc.ImportInjector=Nw;Xc.scripting=Xc.defaultSystem._scripting={module:Xc._module,ensurePackage:Xc._ensurePackage,registerPackage:Xc._registerPackage,importPackage:Xc._importPackage,lookupPackage:Xc._lookupPackage,ImportInjector:Xc.ImportInjector};Xc.defaultClassToFunctionConverterName=
"initializeES6ClassForLively";Xc.classRuntime=CF;Xc.defaultSystem.global[Xc.defaultClassToFunctionConverterName]=Xc.classRuntime.initializeClass;Xc.classHolder=Cy;Xc.ModulePackageMapping=mt;Xc.classHolder.ModulePackageMapping=Xc.ModulePackageMapping;Xc.classHolder.Package=Xc.Package;Xc.classHolder.PackageRegistry=Xc.PackageRegistry;var TX=Ha("bI",Xc.scripting);Xc.scripting=TX;Xc.scripting=TX;var tP=Object.freeze({__proto__:null,System:SX,getSystem:NB,removeSystem:OB,loadedModules:CL,printSystemConfig:FL,
whenLoaded:GL,changeSystem:zL,module:jH,doesModuleExist:EL,isModuleLoaded:DL,unwrapModuleResolution:BL,wrapModuleResolution:AL,importPackage:HL,registerPackage:IL,removePackage:JL,reloadPackage:KL,getPackages:LL,getPackage:ML,getPackageOfModule:NL,ensurePackage:OL,applyPackageConfig:PL,lookupPackage:QL,PackageRegistry:ij,moduleSourceChange:RL,requireMap:SL,isHookInstalled:TL,installHook:UL,removeHook:VL,wrapModuleLoad:WL,unwrapModuleLoad:XL,ExportLookup:Jo,cjs:sP,semver:PI,scripting:TX});Ha("T",tP);
var An=lively.FreezerRuntime.recorderFor("lively.morphic/object-migration.js");An.isReference=US;An.removeUnreachableObjects=wr;An.obj=ng;An.Path=Ih;An.connect=Dl;An.disconnectAll=Xv;An.isReference=US;An.isReference=US;var uP=[{date:"2017-04-08",name:"Text and Label textAndAttributes format change",description:"\nChanging the format from\n  [[string1, attr1_1, attr1_2], [string2, attr2_1, attr2_2], ...]\nto\n  [string1, attr1, string2, attr2, ...].\n    ",snapshotConverter:function(d){var h=d.snapshot,
n;for(n in h){var b=h[n],e=b.props&&b.props.textAndAttributes;if(e){var l=e.value;if(!Array.isArray(l))console.warn("object migrator found textAndAttributes field but it is not an Array!");else if(l.length&&"string"!==typeof l[0]){l=[].concat.apply([],l);for(var a=0;a<l.length;a+=2){var f=l[a+1];f&&Array.isArray(f)&&(l[a+1]=Object.assign.apply(Object,[{}].concat($jscomp.arrayFromIterable(f))))}b.props.textAndAttributes=Object.assign({},e,{value:l})}}}return d}},{date:"2017-04-29",name:"Window button fix",
description:'\nA recent change in the structure of windows, that now adds a "button wrapper"\nmorph breaks old windows without it.\n',objectConverter:function(d,h){(h=h.refForId(d.id).realObj)&&h.isMorph&&h.withAllSubmorphsDo(function(n){n.isWindow&&(n.submorphs.some(function(b){return"button wrapper"===b.name})&&n.get("button wrapper").submorphs.some(function(b){return"window menu button"===b.name}),n.minimizedBounds=null,An.disconnectAll(n.get("minimize")),An.connect(n.get("minimize"),"onMouseDown",
n,"minimized",{updater:function(b){b(!this.targetObj.minimized)}}))});return d}},{date:"2017-05-03",name:"Style Sheet Status Fix",description:"\nState management of the style sheets has changes substantially, moving all of the style sheets that are being applied to the world.\n",snapshotConverter:function(d){var h=d.id,n=d.snapshot,b;for(b in n){var e=n[b].props;e&&e.styleSheets&&(e.styleSheets.value||(e.styleSheets.value=[]),e.styleSheets.value=e.styleSheets.value&&e.styleSheets.value.filter(function(l){l=
n[l.id];var a=n[l.props.rules.value.id];return!l.props.styledMorphs&&!("lively.serializer-class-info"in a)}))}An.removeUnreachableObjects([h],n);return d}},{date:"2017-05-22",name:"Removal of ChromeTheme and GithubTheme",description:"\nFor now only a simple default theme...\n",snapshotConverter:function(d){var h=d.snapshot,n;for(n in h){var b=h[n],e=b["lively.serializer-class-info"];e&&("ChromeTheme"===e.className||"GithubTheme"===e.className?(e.className="DefaultTheme",e.module.pathInPackage="ide/themes/default.js"):
"JavaScriptTokenizer"===e.className&&delete b["lively.serializer-class-info"])}return d}},{date:"2017-06-20",name:"Unwrapped Style Sheet Props",description:"Style Sheets now store foldable props in their nested format.",objectConverter:function(d,h){(h=h.refForId(d.id).realObj)&&h.isMorph&&h.withAllSubmorphsDo(function(n){n.styleSheets&&0<n.styleSheets.length&&n.styleSheets.forEach(function(b){for(var e in An.obj.dissoc(b.rules,["_rev"]))b.rules[e]=b.unwrapFoldedProps(b.rules[e])})});return d}},{date:"2017-07-13",
name:"Renamed style-rules.js to style-sheets.js",snapshotConverter:function(d){var h=d.snapshot,n;for(n in h){var b=h[n]["lively.serializer-class-info"];b&&"StyleSheet"===b.className&&(b.module.pathInPackage="style-sheets.js")}return d}},{date:"2017-07-26",name:"components, ide, and halo extraction",snapshotConverter:function(d){var h=d.snapshot,n=d.packages,b=n&&n["local://lively-object-modules/"]||{};n=[["lively.morphic/halo","lively.halos"],["lively.morphic/components/markers.js","lively.halos"],
["lively.morphic/components/icons.js","lively.morphic"],["lively.morphic/components/loading-indicator.js","lively.components",function(y){return"{"+y+"}"}],["lively.morphic/components","lively.components"],["lively.components/markers.js","lively.halos"],["lively.morphic/ide","lively.ide"],["lively.morphic/text/ui.js","lively.ide",null,"text/ui.js"]];for(var e in b){for(var l=b[e]["index.js"],a=$jscomp.makeIterator(n),f=a.next();!f.done;f=a.next()){var m=$jscomp.makeIterator(f.value),r=m.next().value;
f=m.next().value;if(m=m.next().value){r=new RegExp('(import\\s)(.*)(\\sfrom \\"'+r+")","g");var v=r.exec(l);v&&(l=l.replace(r,"import "+m(v[2])+'from "'+f))}else l=l.replace(new RegExp(r,"g"),f)}b[e]["index.js"]=l}for(var x in h)if((e=h[x]["lively.serializer-class-info"])&&e.module)for(b=e.module.package.name+"/"+e.module.pathInPackage,l=$jscomp.makeIterator(n),a=l.next();!a.done;a=l.next())if(m=$jscomp.makeIterator(a.value),a=m.next().value,f=m.next().value,m.next(),m=m.next().value,b.includes(a)){e.module.package.name=
f;e.module.package.version="0.1.0";e.module.pathInPackage=m||b.substring(b.indexOf(a)+a.length+1)||"index.js";break}return d}},{date:"2017-10-16",name:"change scroll implementation of list items",objectConverter:function(d,h){h=$jscomp.makeIterator(h.objectRefs());for(var n=h.next();!n.done;n=h.next())n=n.value.realObj,n.isList&&"function"===typeof n.initializeSubmorphs&&n.initializeSubmorphs();return d}},{date:"2017-10-30",name:"change implementation of tree",snapshotConverter:function(d){var h=
d.snapshot,n;for(n in h){var b=h[n],e=b["lively.serializer-class-info"];e&&e.module&&("Tree"==e.className&&b.props.submorphs&&(b.props.submorphs.value=[]),"TreeNode"==e.className&&delete h[n],"InspectorTreeData"==e.className&&delete h[n],["PropertyNode","InspectionNode","MorphNode","FoldedNode"].includes(e.className)&&(e.module.pathInPackage="js/inspector/context.js"),"nodeItemContainer"==b.props.name&&delete h[n])}return d}},{date:"2019-02-17",name:"change storage of commit metadata",snapshotConverter:function(d){var h=
d.id,n=d.snapshot;Object.values(n).map(function(b){if(b.props.metadata&&An.isReference(b.props.metadata.value)&&(b=n[b.props.metadata.value.id],b.props.commit&&An.isReference(b.props.commit.value))){var e=n[b.props.commit.value.id].props,l=e.type,a=e.name;e=e._id;l&&a&&e&&(b.props.commit.value='__lv_expr__:({type: "'+l.value+'", name: "'+a.value+'", _id: "'+e.value+'"})')}});An.removeUnreachableObjects([h],n);return d}},{date:"2019-07-25",name:"world superclass extraction",snapshotConverter:function(d){var h=
d.packages,n,b=An.Path(["local://lively-object-modules/","EmptyWorld","index.js"]);if(n=b.get(h))n=n.replace('import { World, morph } from "lively.morphic";','import { morph } from "lively.morphic";\nimport { LivelyWorld as World } from "lively.ide/world.js"').replace('import { World } from "lively.morphic";','import { LivelyWorld as World } from "lively.ide/world.js"'),b.set(h,n);return d}},{date:"2019-08-05",name:"remove Camphor from system",snapshotConverter:function(d){Object.values(d.snapshot).map(function(h){h.props.fontFamily&&
"Camphor"==h.props.fontFamily.value&&(h.props.fontFamily.value="Nunito")});return d}},{date:"2020-10-09",name:"remove style guide",snapshotConverter:function(d){var h=d.snapshot;Object.values(h).map(function(n){n.props.master&&"string"===typeof n.props.master.value&&(n.props.master.value=n.props.master.value.split("styleguide://style guide").join("styleguide://System"));n.props.master&&n.props.master.value.id&&(n=h[n.props.master.value.id],n.props.auto.value=n.props.auto.value.split("styleguide://style guide").join("styleguide://System"))});
return d}}];An.migrations=uP;An.migrations=uP;An.migrations=uP;var Ow="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,mra={},qaa=Ow.MutationObserver||Ow.WebKitMutationObserver;if(qaa){var raa=0,nra=new qaa(YL),saa=Ow.document.createTextNode("");nra.observe(saa,{characterData:!0});var UX=function(){saa.data=raa=++raa%2}}else if(Ow.setImmediate||"undefined"===typeof Ow.MessageChannel)UX="document"in Ow&&"onreadystatechange"in Ow.document.createElement("script")?function(){var d=
Ow.document.createElement("script");d.onreadystatechange=function(){YL();d.onreadystatechange=null;d.parentNode.removeChild(d);d=null};Ow.document.documentElement.appendChild(d)}:function(){setTimeout(YL,0)};else{var taa=new Ow.MessageChannel;taa.port1.onmessage=YL;UX=function(){taa.port2.postMessage(0)}}var VS,kH=[],ora=mra=function(d){1!==kH.push(d)||VS||UX()},VX={},uaa="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==
typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(uaa){var vaa=new Uint8Array(16);VX=function(){uaa(vaa);return vaa}}else{var waa=Array(16);VX=function(){for(var d=0,h;16>d;d++)0===(d&3)&&(h=4294967296*Math.random()),waa[d]=h>>>((d&3)<<3)&255;return waa}}for(var xaa=VX,pra={},Ko=[],vP=0;256>vP;++vP)Ko[vP]=(vP+256).toString(16).substr(1);var yaa=pra=function(d,h){h=h||0;return[Ko[d[h++]],Ko[d[h++]],Ko[d[h++]],Ko[d[h++]],"-",Ko[d[h++]],Ko[d[h++]],"-",Ko[d[h++]],Ko[d[h++]],
"-",Ko[d[h++]],Ko[d[h++]],"-",Ko[d[h++]],Ko[d[h++]],Ko[d[h++]],Ko[d[h++]],Ko[d[h++]],Ko[d[h++]]].join("")},qra={},zaa,WX,XX=0,YX=0,rra=qra=function(d,h,n){n=h&&n||0;var b=h||[];d=d||{};var e=d.node||zaa,l=void 0!==d.clockseq?d.clockseq:WX;if(null==e||null==l){var a=xaa();null==e&&(e=zaa=[a[0]|1,a[1],a[2],a[3],a[4],a[5]]);null==l&&(l=WX=(a[6]<<8|a[7])&16383)}a=void 0!==d.msecs?d.msecs:(new Date).getTime();var f=void 0!==d.nsecs?d.nsecs:YX+1,m=a-XX+(f-YX)/1E4;0>m&&void 0===d.clockseq&&(l=l+1&16383);
(0>m||a>XX)&&void 0===d.nsecs&&(f=0);if(1E4<=f)throw Error("uuid.v1(): Can't create more than 10M uuids/sec");XX=a;YX=f;WX=l;a+=122192928E5;d=(1E4*(a&268435455)+f)%4294967296;b[n++]=d>>>24&255;b[n++]=d>>>16&255;b[n++]=d>>>8&255;b[n++]=d&255;d=a/4294967296*1E4&268435455;b[n++]=d>>>8&255;b[n++]=d&255;b[n++]=d>>>24&15|16;b[n++]=d>>>16&255;b[n++]=l>>>8|128;b[n++]=l&255;for(l=0;6>l;++l)b[n+l]=e[l];return h?h:yaa(b)},Aaa={};Aaa=function(d,h,n){n=h&&n||0;"string"==typeof d&&(h="binary"===d?Array(16):null,
d=null);d=d||{};d=d.random||(d.rng||xaa)();d[6]=d[6]&15|64;d[8]=d[8]&63|128;if(h)for(var b=0;16>b;++b)h[n+b]=d[b];return h||yaa(d)};var sra={},ZX=Aaa;ZX.v1=rra;var tra=sra=ZX.v4=ZX,ci="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,ura={},vra=ura=function(d){function h(v,x){var y=v[0],E=v[1],F=v[2],I=v[3];y+=(E&F|~E&I)+x[0]-680876936|0;y=(y<<7|y>>>25)+E|0;I+=(y&E|~y&F)+x[1]-389564586|0;I=(I<<12|I>>>20)+y|0;F+=(I&y|~I&E)+x[2]+606105819|0;F=(F<<17|F>>>15)+I|0;E+=(F&
I|~F&y)+x[3]-1044525330|0;E=(E<<22|E>>>10)+F|0;y+=(E&F|~E&I)+x[4]-176418897|0;y=(y<<7|y>>>25)+E|0;I+=(y&E|~y&F)+x[5]+1200080426|0;I=(I<<12|I>>>20)+y|0;F+=(I&y|~I&E)+x[6]-1473231341|0;F=(F<<17|F>>>15)+I|0;E+=(F&I|~F&y)+x[7]-45705983|0;E=(E<<22|E>>>10)+F|0;y+=(E&F|~E&I)+x[8]+1770035416|0;y=(y<<7|y>>>25)+E|0;I+=(y&E|~y&F)+x[9]-1958414417|0;I=(I<<12|I>>>20)+y|0;F+=(I&y|~I&E)+x[10]-42063|0;F=(F<<17|F>>>15)+I|0;E+=(F&I|~F&y)+x[11]-1990404162|0;E=(E<<22|E>>>10)+F|0;y+=(E&F|~E&I)+x[12]+1804603682|0;y=(y<<
7|y>>>25)+E|0;I+=(y&E|~y&F)+x[13]-40341101|0;I=(I<<12|I>>>20)+y|0;F+=(I&y|~I&E)+x[14]-1502002290|0;F=(F<<17|F>>>15)+I|0;E+=(F&I|~F&y)+x[15]+1236535329|0;E=(E<<22|E>>>10)+F|0;y+=(E&I|F&~I)+x[1]-165796510|0;y=(y<<5|y>>>27)+E|0;I+=(y&F|E&~F)+x[6]-1069501632|0;I=(I<<9|I>>>23)+y|0;F+=(I&E|y&~E)+x[11]+643717713|0;F=(F<<14|F>>>18)+I|0;E+=(F&y|I&~y)+x[0]-373897302|0;E=(E<<20|E>>>12)+F|0;y+=(E&I|F&~I)+x[5]-701558691|0;y=(y<<5|y>>>27)+E|0;I+=(y&F|E&~F)+x[10]+38016083|0;I=(I<<9|I>>>23)+y|0;F+=(I&E|y&~E)+x[15]-
660478335|0;F=(F<<14|F>>>18)+I|0;E+=(F&y|I&~y)+x[4]-405537848|0;E=(E<<20|E>>>12)+F|0;y+=(E&I|F&~I)+x[9]+568446438|0;y=(y<<5|y>>>27)+E|0;I+=(y&F|E&~F)+x[14]-1019803690|0;I=(I<<9|I>>>23)+y|0;F+=(I&E|y&~E)+x[3]-187363961|0;F=(F<<14|F>>>18)+I|0;E+=(F&y|I&~y)+x[8]+1163531501|0;E=(E<<20|E>>>12)+F|0;y+=(E&I|F&~I)+x[13]-1444681467|0;y=(y<<5|y>>>27)+E|0;I+=(y&F|E&~F)+x[2]-51403784|0;I=(I<<9|I>>>23)+y|0;F+=(I&E|y&~E)+x[7]+1735328473|0;F=(F<<14|F>>>18)+I|0;E+=(F&y|I&~y)+x[12]-1926607734|0;E=(E<<20|E>>>12)+F|
0;y+=(E^F^I)+x[5]-378558|0;y=(y<<4|y>>>28)+E|0;I+=(y^E^F)+x[8]-2022574463|0;I=(I<<11|I>>>21)+y|0;F+=(I^y^E)+x[11]+1839030562|0;F=(F<<16|F>>>16)+I|0;E+=(F^I^y)+x[14]-35309556|0;E=(E<<23|E>>>9)+F|0;y+=(E^F^I)+x[1]-1530992060|0;y=(y<<4|y>>>28)+E|0;I+=(y^E^F)+x[4]+1272893353|0;I=(I<<11|I>>>21)+y|0;F+=(I^y^E)+x[7]-155497632|0;F=(F<<16|F>>>16)+I|0;E+=(F^I^y)+x[10]-1094730640|0;E=(E<<23|E>>>9)+F|0;y+=(E^F^I)+x[13]+681279174|0;y=(y<<4|y>>>28)+E|0;I+=(y^E^F)+x[0]-358537222|0;I=(I<<11|I>>>21)+y|0;F+=(I^y^E)+
x[3]-722521979|0;F=(F<<16|F>>>16)+I|0;E+=(F^I^y)+x[6]+76029189|0;E=(E<<23|E>>>9)+F|0;y+=(E^F^I)+x[9]-640364487|0;y=(y<<4|y>>>28)+E|0;I+=(y^E^F)+x[12]-421815835|0;I=(I<<11|I>>>21)+y|0;F+=(I^y^E)+x[15]+530742520|0;F=(F<<16|F>>>16)+I|0;E+=(F^I^y)+x[2]-995338651|0;E=(E<<23|E>>>9)+F|0;y+=(F^(E|~I))+x[0]-198630844|0;y=(y<<6|y>>>26)+E|0;I+=(E^(y|~F))+x[7]+1126891415|0;I=(I<<10|I>>>22)+y|0;F+=(y^(I|~E))+x[14]-1416354905|0;F=(F<<15|F>>>17)+I|0;E+=(I^(F|~y))+x[5]-57434055|0;E=(E<<21|E>>>11)+F|0;y+=(F^(E|~I))+
x[12]+1700485571|0;y=(y<<6|y>>>26)+E|0;I+=(E^(y|~F))+x[3]-1894986606|0;I=(I<<10|I>>>22)+y|0;F+=(y^(I|~E))+x[10]-1051523|0;F=(F<<15|F>>>17)+I|0;E+=(I^(F|~y))+x[1]-2054922799|0;E=(E<<21|E>>>11)+F|0;y+=(F^(E|~I))+x[8]+1873313359|0;y=(y<<6|y>>>26)+E|0;I+=(E^(y|~F))+x[15]-30611744|0;I=(I<<10|I>>>22)+y|0;F+=(y^(I|~E))+x[6]-1560198380|0;F=(F<<15|F>>>17)+I|0;E+=(I^(F|~y))+x[13]+1309151649|0;E=(E<<21|E>>>11)+F|0;y+=(F^(E|~I))+x[4]-145523070|0;y=(y<<6|y>>>26)+E|0;I+=(E^(y|~F))+x[11]-1120210379|0;I=(I<<10|I>>>
22)+y|0;F+=(y^(I|~E))+x[2]+718787259|0;F=(F<<15|F>>>17)+I|0;E+=(I^(F|~y))+x[9]-343485551|0;v[0]=y+v[0]|0;v[1]=((E<<21|E>>>11)+F|0)+v[1]|0;v[2]=F+v[2]|0;v[3]=I+v[3]|0}function n(v){var x=[],y;for(y=0;64>y;y+=4)x[y>>2]=v.charCodeAt(y)+(v.charCodeAt(y+1)<<8)+(v.charCodeAt(y+2)<<16)+(v.charCodeAt(y+3)<<24);return x}function b(v){var x=[],y;for(y=0;64>y;y+=4)x[y>>2]=v[y]+(v[y+1]<<8)+(v[y+2]<<16)+(v[y+3]<<24);return x}function e(v){var x=v.length,y=[1732584193,-271733879,-1732584194,271733878],E;for(E=
64;E<=x;E+=64)h(y,n(v.substring(E-64,E)));v=v.substring(E-64);var F=v.length;var I=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(E=0;E<F;E+=1)I[E>>2]|=v.charCodeAt(E)<<(E%4<<3);I[E>>2]|=128<<(E%4<<3);if(55<E)for(h(y,I),E=0;16>E;E+=1)I[E]=0;x=(8*x).toString(16).match(/(.*?)(.{0,8})$/);v=parseInt(x[2],16);x=parseInt(x[1],16)||0;I[14]=v;I[15]=x;h(y,I);return y}function l(v){var x;for(x=0;x<v.length;x+=1){var y=x,E,F=v[x],I="";for(E=0;4>E;E+=1)I+=r[F>>8*E+4&15]+r[F>>8*E&15];v[y]=I}return v.join("")}function a(v){/[\u0080-\uFFFF]/.test(v)&&
(v=unescape(encodeURIComponent(v)));return v}function f(v){var x=[],y=v.length,E;for(E=0;E<y-1;E+=2)x.push(parseInt(v.substr(E,2),16));return String.fromCharCode.apply(String,x)}function m(){this.reset()}var r="0123456789abcdef".split("");l(e("hello"));"undefined"===typeof ArrayBuffer||ArrayBuffer.prototype.slice||function(){function v(x,y){x=x|0||0;return 0>x?Math.max(x+y,0):Math.min(x,y)}ArrayBuffer.prototype.slice=function(x,y){var E=(this||ci).byteLength;x=v(x,E);var F=E;y!==d&&(F=v(y,E));if(x>
F)return new ArrayBuffer(0);F-=x;y=new ArrayBuffer(F);E=new Uint8Array(y);x=new Uint8Array(this||ci,x,F);E.set(x);return y}}();m.prototype.append=function(v){this.appendBinary(a(v));return this||ci};m.prototype.appendBinary=function(v){(this||ci)._buff+=v;(this||ci)._length+=v.length;v=(this||ci)._buff.length;var x;for(x=64;x<=v;x+=64)h((this||ci)._hash,n((this||ci)._buff.substring(x-64,x)));(this||ci)._buff=(this||ci)._buff.substring(x-64);return this||ci};m.prototype.end=function(v){var x=(this||
ci)._buff,y=x.length,E,F=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(E=0;E<y;E+=1)F[E>>2]|=x.charCodeAt(E)<<(E%4<<3);this._finish(F,y);x=l((this||ci)._hash);v&&(x=f(x));this.reset();return x};m.prototype.reset=function(){(this||ci)._buff="";(this||ci)._length=0;(this||ci)._hash=[1732584193,-271733879,-1732584194,271733878];return this||ci};m.prototype.getState=function(){return{buff:(this||ci)._buff,length:(this||ci)._length,hash:(this||ci)._hash}};m.prototype.setState=function(v){(this||ci)._buff=v.buff;
(this||ci)._length=v.length;(this||ci)._hash=v.hash;return this||ci};m.prototype.destroy=function(){delete (this||ci)._hash;delete (this||ci)._buff;delete (this||ci)._length};m.prototype._finish=function(v,x){v[x>>2]|=128<<(x%4<<3);if(55<x)for(h((this||ci)._hash,v),x=0;16>x;x+=1)v[x]=0;var y=8*(this||ci)._length;y=y.toString(16).match(/(.*?)(.{0,8})$/);x=parseInt(y[2],16);y=parseInt(y[1],16)||0;v[14]=x;v[15]=y;h((this||ci)._hash,v)};m.hash=function(v,x){return m.hashBinary(a(v),x)};m.hashBinary=function(v,
x){v=e(v);v=l(v);return x?f(v):v};m.ArrayBuffer=function(){this.reset()};m.ArrayBuffer.prototype.append=function(v){var x=(this||ci)._buff.buffer,y=new Uint8Array(x.byteLength+v.byteLength);y.set(new Uint8Array(x));y.set(new Uint8Array(v),x.byteLength);x=y.length;(this||ci)._length+=v.byteLength;for(v=64;v<=x;v+=64)h((this||ci)._hash,b(y.subarray(v-64,v)));(this||ci)._buff=v-64<x?new Uint8Array(y.buffer.slice(v-64)):new Uint8Array(0);return this||ci};m.ArrayBuffer.prototype.end=function(v){var x=
(this||ci)._buff,y=x.length,E=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],F;for(F=0;F<y;F+=1)E[F>>2]|=x[F]<<(F%4<<3);this._finish(E,y);x=l((this||ci)._hash);v&&(x=f(x));this.reset();return x};m.ArrayBuffer.prototype.reset=function(){(this||ci)._buff=new Uint8Array(0);(this||ci)._length=0;(this||ci)._hash=[1732584193,-271733879,-1732584194,271733878];return this||ci};m.ArrayBuffer.prototype.getState=function(){var v=m.prototype.getState.call(this||ci);v.buff=String.fromCharCode.apply(null,new Uint8Array(v.buff));
return v};m.ArrayBuffer.prototype.setState=function(v){var x=v.buff,y=x.length,E=new ArrayBuffer(y);E=new Uint8Array(E);var F;for(F=0;F<y;F+=1)E[F]=x.charCodeAt(F);v.buff=E;return m.prototype.setState.call(this||ci,v)};m.ArrayBuffer.prototype.destroy=m.prototype.destroy;m.ArrayBuffer.prototype._finish=m.prototype._finish;m.ArrayBuffer.hash=function(v,x){var y=new Uint8Array(v),E=y.length;v=[1732584193,-271733879,-1732584194,271733878];var F;for(F=64;F<=E;F+=64)h(v,b(y.subarray(F-64,F)));y=F-64<E?
y.subarray(F-64):new Uint8Array(0);var I=y.length;var J=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(F=0;F<I;F+=1)J[F>>2]|=y[F]<<(F%4<<3);J[F>>2]|=128<<(F%4<<3);if(55<F)for(h(v,J),F=0;16>F;F+=1)J[F]=0;E=(8*E).toString(16).match(/(.*?)(.{0,8})$/);y=parseInt(E[2],16);E=parseInt(E[1],16)||0;J[14]=y;J[15]=E;h(v,J);v=l(v);return x?f(v):v};return m}(),JF={stringify:function(d){var h=[];h.push({obj:d});d="";for(var n,b,e,l,a,f,m;n=h.pop();)if(b=n.obj,e=n.prefix||"",n=n.val||"",d+=e,n)d+=n;else if("object"!==typeof b)d+=
"undefined"===typeof b?null:JSON.stringify(b);else if(null===b)d+="null";else if(Array.isArray(b)){h.push({val:"]"});for(e=b.length-1;0<=e;e--)n=0===e?"":",",h.push({obj:b[e],prefix:n});h.push({val:"["})}else{n=[];for(l in b)b.hasOwnProperty(l)&&n.push(l);h.push({val:"}"});for(e=n.length-1;0<=e;e--)a=n[e],f=b[a],m=0<e?",":"",m+=JSON.stringify(a)+":",h.push({obj:f,prefix:m});h.push({val:"{"})}return d},parse:function(d){for(var h=[],n=[],b=0,e,l,a,f;;)if(e=d[b++],"}"===e||"]"===e||"undefined"===typeof e){if(1===
h.length)return h.pop();vE(h.pop(),h,n)}else switch(e){case " ":case "\t":case "\n":case ":":case ",":break;case "n":b+=3;vE(null,h,n);break;case "t":b+=3;vE(!0,h,n);break;case "f":b+=4;vE(!1,h,n);break;case "0":case "1":case "2":case "3":case "4":case "5":case "6":case "7":case "8":case "9":case "-":e="";for(b--;;)if(l=d[b++],/[\d\.\-e\+]/.test(l))e+=l;else{b--;break}vE(parseFloat(e),h,n);break;case '"':e="";l=void 0;for(a=0;;)if(f=d[b++],'"'!==f||"\\"===l&&1===a%2)e+=f,l=f,"\\"===l?a++:a=0;else break;
vE(JSON.parse('"'+e+'"'),h,n);break;case "[":e={element:[],index:h.length};h.push(e.element);n.push(e);break;case "{":e={element:{},index:h.length};h.push(e.element);n.push(e);break;default:throw Error("unexpectedly reached end of input: "+e);}}},wra={},$X=wra=function(d){return function(){var h=arguments.length;if(h){for(var n=[],b=-1;++b<h;)n[b]=arguments[b];return d.call(this,n)}return d.call(this,[])}},xra={},wl=xra="function"===typeof Object.create?function(d,h){h&&(d.super_=h,d.prototype=Object.create(h.prototype,
{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}))}:function(d,h){if(h){d.super_=h;var n=function(){};n.prototype=h.prototype;d.prototype=new n;d.prototype.constructor=d}},KF="object"==typeof Reflect?Reflect:null,Baa=KF&&"function"==typeof KF.apply?KF.apply:function(d,h,n){return Function.prototype.apply.call(d,h,n)};var yra=KF&&"function"==typeof KF.ownKeys?KF.ownKeys:Object.getOwnPropertySymbols?function(d){return Object.getOwnPropertyNames(d).concat(Object.getOwnPropertySymbols(d))}:
function(d){return Object.getOwnPropertyNames(d)};var Caa=Number.isNaN||function(d){return d!=d};Lk.EventEmitter=Lk;Lk.prototype._events=void 0;Lk.prototype._eventsCount=0;Lk.prototype._maxListeners=void 0;var Daa=10;Object.defineProperty(Lk,"defaultMaxListeners",{enumerable:!0,get:function(){return Daa},set:function(d){if("number"!=typeof d||0>d||Caa(d))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+d+".");Daa=d}});Lk.init=function(){void 0!==
this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0);this._maxListeners=this._maxListeners||void 0};Lk.prototype.setMaxListeners=function(d){if("number"!=typeof d||0>d||Caa(d))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+d+".");return this._maxListeners=d,this};Lk.prototype.getMaxListeners=function(){return void 0===this._maxListeners?Lk.defaultMaxListeners:this._maxListeners};
Lk.prototype.emit=function(d){for(var h=[],n=1;n<arguments.length;n++)h.push(arguments[n]);n="error"===d;var b=this._events;if(void 0!==b)n=n&&void 0===b.error;else if(!n)return!1;if(n){var e;if(0<h.length&&(e=h[0]),e instanceof Error)throw e;h=Error("Unhandled error."+(e?" ("+e.message+")":""));throw h.context=e,h;}n=b[d];if(void 0===n)return!1;if("function"==typeof n)Baa(n,this,h);else for(e=n.length,b=v2(n,e),n=0;n<e;++n)Baa(b[n],this,h);return!0};Lk.prototype.addListener=function(d,h){return s2(this,
d,h,!1)};Lk.prototype.on=Lk.prototype.addListener;Lk.prototype.prependListener=function(d,h){return s2(this,d,h,!0)};Lk.prototype.once=function(d,h){return ZL(h),this.on(d,t2(this,d,h)),this};Lk.prototype.prependOnceListener=function(d,h){return ZL(h),this.prependListener(d,t2(this,d,h)),this};Lk.prototype.removeListener=function(d,h){var n,b,e;if((ZL(h),void 0===(b=this._events))||void 0===(n=b[d]))return this;if(n===h||n.listener===h)0==--this._eventsCount?this._events=Object.create(null):(delete b[d],
b.removeListener&&this.emit("removeListener",d,n.listener||h));else if("function"!=typeof n){var l=-1;for(e=n.length-1;0<=e;e--)if(n[e]===h||n[e].listener===h){var a=n[e].listener;l=e;break}if(0>l)return this;if(0===l)n.shift();else{for(;l+1<n.length;l++)n[l]=n[l+1];n.pop();!0}1===n.length&&(b[d]=n[0]);void 0!==b.removeListener&&this.emit("removeListener",d,a||h)}return this};Lk.prototype.off=Lk.prototype.removeListener;Lk.prototype.removeAllListeners=function(d){var h,n;if(void 0===(n=this._events))return this;
if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[d]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[d]),this;if(0===arguments.length){var b=Object.keys(n);for(n=0;n<b.length;++n)"removeListener"!==(h=b[n])&&this.removeAllListeners(h);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(h=n[d]))this.removeListener(d,h);else if(void 0!==
h)for(n=h.length-1;0<=n;n--)this.removeListener(d,h[n]);return this};Lk.prototype.listeners=function(d){return u2(this,d,!0)};Lk.prototype.rawListeners=function(d){return u2(this,d,!1)};Lk.listenerCount=function(d,h){return"function"==typeof d.listenerCount?d.listenerCount(h):w2.call(d,h)};Lk.prototype.listenerCount=w2;Lk.prototype.eventNames=function(){return 0<this._eventsCount?yra(this._events):[]};var jw=Lk,Eaa="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,zra=
{},hM=mj,fw=wE(ora),L2=wE(tra),cM=wE(vra),e3=wE(JF),xE=wE($X),Su=wE(wl),Fq=jw;Nz.prototype.get=function(d){return this._store["$"+d]};Nz.prototype.set=function(d,h){this._store["$"+d]=h;return!0};Nz.prototype.has=function(d){return"$"+d in this._store};Nz.prototype.delete=function(d){d="$"+d;var h=d in this._store;delete this._store[d];return h};Nz.prototype.forEach=function(d){for(var h=Object.keys(this._store),n=0,b=h.length;n<b;n++){var e=h[n],l=this._store[e];e=e.substring(1);d(l,e)}};Object.defineProperty(Nz.prototype,
"size",{get:function(){return Object.keys(this._store).length}});lH.prototype.add=function(d){return this._store.set(d,!0)};lH.prototype.has=function(d){return this._store.has(d)};lH.prototype.forEach=function(d){this._store.forEach(function(h,n){d(n)})};Object.defineProperty(lH.prototype,"size",{get:function(){return this._store.size}});if(function(){if("undefined"===typeof Symbol||"undefined"===typeof Map||"undefined"===typeof Set)return!1;var d=Object.getOwnPropertyDescriptor(Map,Symbol.species);
return d&&"get"in d&&Map[Symbol.species]===Map}()){var tH=Set;var yr=Map}else tH=lH,yr=Nz;var x2=Function.prototype.toString,mha=x2.call(Object);try{localStorage.setItem("_pouch_check_localstorage",1);var nH=!!localStorage.getItem("_pouch_check_localstorage")}catch(d){nH=!1}Su(yE,Fq.EventEmitter);yE.prototype.addListener=function(d,h,n,b){function e(){if(l._listeners[h])if(a)a="waiting";else{a=!0;var f=mH(b,"style include_docs attachments conflicts filter doc_ids view since query_params binary return_docs".split(" "));
n.changes(f).on("change",function(m){m.seq>b.since&&!b.cancelled&&(b.since=m.seq,b.onChange(m))}).on("complete",function(){"waiting"===a&&fw(e);a=!1}).on("error",function(){a=!1})}}if(!this._listeners[h]){var l=this,a=!1;this._listeners[h]=e;this.on(d,e)}};yE.prototype.removeListener=function(d,h){h in this._listeners&&(Fq.EventEmitter.prototype.removeListener.call(this,d,this._listeners[h]),delete this._listeners[h])};yE.prototype.notifyLocalWindows=function(d){nH&&(localStorage[d]="a"===localStorage[d]?
"b":"a")};yE.prototype.notify=function(d){this.emit(d);this.notifyLocalWindows(d)};var CE="function"===typeof Object.assign?Object.assign:function(d){for(var h=Object(d),n=1;n<arguments.length;n++){var b=arguments[n];if(null!=b)for(var e in b)Object.prototype.hasOwnProperty.call(b,e)&&(h[e]=b[e])}return h};Su(fl,Error);fl.prototype.toString=function(){return JSON.stringify({status:this.status,name:this.name,message:this.message,reason:this.reason})};new fl(401,"unauthorized","Name or password is incorrect.");
var Ara=new fl(400,"bad_request","Missing JSON list of 'docs'"),su=new fl(404,"not_found","missing"),BE=new fl(409,"conflict","Document update conflict"),E2=new fl(400,"bad_request","_id field must contain a string"),sha=new fl(412,"missing_id","_id is required for puts"),rha=new fl(400,"bad_request","Only reserved document ids may start with underscore.");new fl(412,"precondition_failed","Database not open");var C2=new fl(500,"unknown_error","Database encountered an unknown error"),d3=new fl(500,
"badarg","Some query argument is invalid");new fl(400,"invalid_request","Request was invalid");var Bra=new fl(400,"query_parse_error","Some query parameter is invalid"),c3=new fl(500,"doc_validation","Bad special document member"),$L=new fl(400,"bad_request","Something wrong with the request"),aY=new fl(400,"bad_request","Document must be a JSON object");new fl(404,"not_found","Database not found");var jT=new fl(500,"indexed_db_went_bad","unknown");new fl(500,"web_sql_went_bad","unknown");new fl(500,
"levelDB_went_went_bad","unknown");new fl(403,"forbidden","Forbidden by design doc validate_doc_update function");var a3=new fl(400,"bad_request","Invalid rev format");new fl(412,"file_exists","The database could not be created, the file already exists.");var iia=new fl(412,"missing_stub","A pre-existing attachment stub wasn't found");new fl(413,"invalid_url","Provided URL is invalid");var H2="source protocol authority userInfo user password host port relative path directory file query anchor".split(" "),
uha=/(?:^|&)([^&=]*)=?([^&]*)/g,tha=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,Aha=Eaa.setImmediate||Eaa.setTimeout,dM=L2.v4;Su(oH,Fq.EventEmitter);oH.prototype.cancel=function(){this.isCancelled=!0;this.db.taskqueue.isReady&&this.emit("cancel")};oH.prototype.validateChanges=function(d){var h=d.complete,n=this;Pi._changesFilterPlugin?Pi._changesFilterPlugin.validate(d,
function(b){if(b)return h(b);n.doChanges(d)}):n.doChanges(d)};oH.prototype.doChanges=function(d){var h=this,n=d.complete;d=nn(d);"live"in d&&!("continuous"in d)&&(d.continuous=d.live);d.processChange=Iha;"latest"===d.since&&(d.since="now");d.since||(d.since=0);if("now"===d.since)this.db.info().then(function(l){h.isCancelled?n(null,{status:"cancelled"}):(d.since=l.update_seq,h.doChanges(d))},n);else{if(Pi._changesFilterPlugin){if(Pi._changesFilterPlugin.normalize(d),Pi._changesFilterPlugin.shouldFilter(this,
d))return Pi._changesFilterPlugin.filter(this,d)}else["doc_ids","filter","selector","view"].forEach(function(l){l in d&&Hs("warn",'The "'+l+'" option was passed in to changes/replicate, but pouchdb-changes-filter plugin is not installed, so it was ignored. Please install the plugin to enable filtering.')});"descending"in d||(d.descending=!1);d.limit=0===d.limit?1:d.limit;d.complete=n;var b=this.db._changes(d);if(b&&"function"===typeof b.cancel){var e=h.cancel;h.cancel=xE(function(l){b.cancel();e.apply(this,
l)})}}};Su(ul,Fq.EventEmitter);ul.prototype.post=Om("post",function(d,h,n){"function"===typeof h&&(n=h,h={});if("object"!==typeof d||Array.isArray(d))return n(Wi(aY));this.bulkDocs({docs:[d]},h,gT(n,d._id))});ul.prototype.put=Om("put",function(d,h,n){function b(){var a=d._rev.split("-"),f=a[1];a=parseInt(a[0],10)+1;var m=K2();d._revisions={start:a,ids:[m,f]};d._rev=a+"-"+m;h.new_edits=!1}function e(a){"function"===typeof l._put&&!1!==h.new_edits?l._put(d,h,a):l.bulkDocs({docs:[d]},h,gT(a,d._id))}
"function"===typeof h&&(n=h,h={});if("object"!==typeof d||Array.isArray(d))return n(Wi(aY));D2(d._id);if(RB(d._id)&&"function"===typeof this._putLocal)return d._deleted?this._removeLocal(d,n):this._putLocal(d,n);var l=this;h.force&&d._rev?(b(),e(function(a){n(a,a?null:{ok:!0,id:d._id,rev:d._rev})})):e(n)});ul.prototype.putAttachment=Om("putAttachment",function(d,h,n,b,e){function l(f){var m="_rev"in f?parseInt(f._rev,10):0;f._attachments=f._attachments||{};f._attachments[h]={content_type:e,data:b,
revpos:++m};return a.put(f)}var a=this;"function"===typeof e&&(e=b,b=n,n=null);"undefined"===typeof e&&(e=b,b=n,n=null);e||Hs("warn","Attachment",h,"on document",d,"is missing content_type");return a.get(d).then(function(f){if(f._rev!==n)throw Wi(BE);return l(f)},function(f){if(f.reason===su.message)return l({_id:d});throw f;})});ul.prototype.removeAttachment=Om("removeAttachment",function(d,h,n,b){var e=this;e.get(d,function(l,a){if(l)b(l);else if(a._rev!==n)b(Wi(BE));else{if(!a._attachments)return b();
delete a._attachments[h];0===Object.keys(a._attachments).length&&delete a._attachments;e.put(a,b)}})});ul.prototype.remove=Om("remove",function(d,h,n,b){"string"===typeof h?(d={_id:d,_rev:h},"function"===typeof n&&(b=n,n={})):"function"===typeof h?(b=h,n={}):(b=n,n=h);n=n||{};n.was_delete=!0;h={_id:d._id,_rev:d._rev||n.rev,_deleted:!0};if(RB(h._id)&&"function"===typeof this._removeLocal)return this._removeLocal(d,b);this.bulkDocs({docs:[h]},n,gT(b,h._id))});ul.prototype.revsDiff=Om("revsDiff",function(d,
h,n){function b(m,r){f.has(m)||f.set(m,{missing:[]});f.get(m).missing.push(r)}function e(m,r){var v=d[m].slice(0);QB(r,function(x,y,E,F,I){x=y+"-"+E;y=v.indexOf(x);-1!==y&&(v.splice(y,1),"available"!==I.status&&b(m,x))});v.forEach(function(x){b(m,x)})}"function"===typeof h&&(n=h,h={});var l=Object.keys(d);if(!l.length)return n(null,{});var a=0,f=new yr;l.map(function(m){this._getRevisionTree(m,function(r,v){if(r&&404===r.status&&"missing"===r.message)f.set(m,{missing:d[m]});else{if(r)return n(r);
e(m,v)}if(++a===l.length){var x={};f.forEach(function(y,E){x[E]=y});return n(null,x)}})},this)});ul.prototype.bulkGet=Om("bulkGet",function(d,h){B2(this,d,h)});ul.prototype.compactDocument=Om("compactDocument",function(d,h,n){var b=this;this._getRevisionTree(d,function(e,l){if(e)return n(e);var a=Lha(l),f=[],m=[];Object.keys(a).forEach(function(r){a[r]>h&&f.push(r)});QB(l,function(r,v,x,y,E){r=v+"-"+x;"available"===E.status&&-1!==f.indexOf(r)&&m.push(r)});b._doCompaction(d,m,n)})});ul.prototype.compact=
Om("compact",function(d,h){"function"===typeof d&&(h=d,d={});d=d||{};this._compactionQueue=this._compactionQueue||[];this._compactionQueue.push({opts:d,callback:h});1===this._compactionQueue.length&&R2(this)});ul.prototype._compact=function(d,h){var n=this,b=[];n.changes({return_docs:!1,last_seq:d.last_seq||0}).on("change",function(e){b.push(n.compactDocument(e.id,0))}).on("complete",function(e){var l=e.last_seq;Promise.all(b).then(function(){return bM(n,"_local/compaction",function(a){return!a.last_seq||
a.last_seq<l?(a.last_seq=l,a):!1})}).then(function(){h(null,{ok:!0})}).catch(h)}).on("error",h)};ul.prototype.get=Om("get",function(d,h,n){function b(){var m=[],r=e.length;if(!r)return n(null,m);e.forEach(function(v){l.get(d,{rev:v,revs:h.revs,latest:h.latest,attachments:h.attachments,binary:h.binary},function(x,y){if(x)m.push({missing:v});else{x=0;for(var E=m.length;x<E;x++)if(m[x].ok&&m[x].ok._rev===y._rev){var F=!0;break}F||m.push({ok:y})}r--;r||n(null,m)})})}"function"===typeof h&&(n=h,h={});
if("string"!==typeof d)return n(Wi(E2));if(RB(d)&&"function"===typeof this._getLocal)return this._getLocal(d,n);var e=[],l=this;if(h.open_revs)if("all"===h.open_revs)this._getRevisionTree(d,function(m,r){if(m)return n(m);e=eT(r).map(function(v){return v.rev});b()});else if(Array.isArray(h.open_revs)){e=h.open_revs;for(var a=0;a<e.length;a++){var f=e[a];if("string"!==typeof f||!/^\d+-/.test(f))return n(Wi(a3))}b()}else return n(Wi(C2,"function_clause"));else return this._get(d,h,function(m,r){if(m)return m.docId=
d,n(m);var v=r.doc,x=r.metadata,y=r.ctx;h.conflicts&&(r=fT(x),r.length&&(v._conflicts=r));$x(x,v._rev)&&(v._deleted=!0);if(h.revs||h.revs_info){m=v._rev.split("-");r=parseInt(m[0],10);m=m[1];var E=M2(x.rev_tree);x=null;for(var F=0;F<E.length;F++){var I=E[F],J=I.ids.map(function(da){return da.id}).indexOf(m);if(J===r-1||!x&&-1!==J)x=I}if(!x)return m=Error("invalid rev tree"),m.docId=d,n(m);r=x.ids.map(function(da){return da.id}).indexOf(v._rev.split("-")[1])+1;x.ids.splice(r,x.ids.length-r);x.ids.reverse();
h.revs&&(v._revisions={start:x.pos+x.ids.length-1,ids:x.ids.map(function(da){return da.id})});if(h.revs_info){var P=x.pos+x.ids.length;v._revs_info=x.ids.map(function(da){P--;return{rev:P+"-"+da.id,status:da.opts.status}})}}if(h.attachments&&v._attachments){var N=v._attachments,Y=Object.keys(N).length;if(0===Y)return n(null,v);Object.keys(N).forEach(function(da){this._getAttachment(v._id,da,N[da],{rev:v._rev,binary:h.binary,ctx:y},function(va,za){va=v._attachments[da];va.data=za;delete va.stub;delete va.length;
--Y||n(null,v)})},l)}else{if(v._attachments)for(var W in v._attachments)v._attachments.hasOwnProperty(W)&&(v._attachments[W].stub=!0);n(null,v)}})});ul.prototype.getAttachment=Om("getAttachment",function(d,h,n,b){var e=this;n instanceof Function&&(b=n,n={});this._get(d,n,function(l,a){if(l)return b(l);if(a.doc._attachments&&a.doc._attachments[h])n.ctx=a.ctx,n.binary=!0,e._getAttachment(d,h,a.doc._attachments[h],n,b);else return b(Wi(su))})});ul.prototype.allDocs=Om("allDocs",function(d,h){"function"===
typeof d&&(h=d,d={});d.skip="undefined"!==typeof d.skip?d.skip:0;d.start_key&&(d.startkey=d.start_key);d.end_key&&(d.endkey=d.end_key);if("keys"in d){if(!Array.isArray(d.keys))return h(new TypeError("options.keys must be an array"));var n=["startkey","endkey","key"].filter(function(b){return b in d})[0];if(n){h(Wi(Bra,"Query parameter `"+n+"` is not compatible with multi-get"));return}if(!ew(this)&&(Mha(d),0===d.keys.length))return this._allDocs({limit:0},h)}return this._allDocs(d,h)});ul.prototype.changes=
function(d,h){"function"===typeof d&&(h=d,d={});d=d||{};d.return_docs="return_docs"in d?d.return_docs:!d.live;return new oH(this,d,h)};ul.prototype.close=Om("close",function(d){this._closed=!0;this.emit("closed");return this._close(d)});ul.prototype.info=Om("info",function(d){var h=this;this._info(function(n,b){if(n)return d(n);b.db_name=b.db_name||h.name;b.auto_compaction=!(!h.auto_compaction||ew(h));b.adapter=h.adapter;d(null,b)})});ul.prototype.id=Om("id",function(d){return this._id(d)});ul.prototype.type=
function(){return"function"===typeof this._type?this._type():this.adapter};ul.prototype.bulkDocs=Om("bulkDocs",function(d,h,n){"function"===typeof h&&(n=h,h={});h=h||{};Array.isArray(d)&&(d={docs:d});if(!d||!d.docs||!Array.isArray(d.docs))return n(Wi(Ara));for(var b=0;b<d.docs.length;++b)if("object"!==typeof d.docs[b]||Array.isArray(d.docs[b]))return n(Wi(aY));var e;d.docs.forEach(function(f){f._attachments&&Object.keys(f._attachments).forEach(function(m){var r;(r=e)||(r="_"===m.charAt(0)?m+" is not a valid attachment name, attachment names cannot start with '_'":
!1);e=r;f._attachments[m].content_type||Hs("warn","Attachment",m,"on document",f._id,"is missing content_type")})});if(e)return n(Wi($L,e));"new_edits"in h||(h.new_edits="new_edits"in d?d.new_edits:!0);var l=this;h.new_edits||ew(l)||d.docs.sort(Kha);Jha(d.docs);var a=d.docs.map(function(f){return f._id});return this._bulkDocs(d,h,function(f,m){if(f)return n(f);h.new_edits||(m=m.filter(function(v){return v.error}));if(!ew(l)){f=0;for(var r=m.length;f<r;f++)m[f].id=m[f].id||a[f]}n(null,m)})});ul.prototype.registerDependentDatabase=
Om("registerDependentDatabase",function(d,h){var n=new this.constructor(d,this.__opts);bM(this,"_local/_pouch_dependentDbs",function(b){b.dependentDbs=b.dependentDbs||{};if(b.dependentDbs[d])return!1;b.dependentDbs[d]=!0;return b}).then(function(){h(null,{db:n})}).catch(h)});ul.prototype.destroy=Om("destroy",function(d,h){function n(){b._destroy(d,function(l,a){if(l)return h(l);b._destroyed=!0;b.emit("destroyed");h(null,a||{ok:!0})})}"function"===typeof d&&(h=d,d={});var b=this,e="use_prefix"in b?
b.use_prefix:!0;if(ew(b))return n();b.get("_local/_pouch_dependentDbs",function(l,a){if(l)return 404!==l.status?h(l):n();var f=b.constructor;l=Object.keys(a.dependentDbs).map(function(m){m=e?m.replace(new RegExp("^"+f.prefix),""):m;return(new f(m,b.__opts)).destroy()});Promise.all(l).then(n,h)})});pH.prototype.execute=function(){var d;if(this.failed)for(;d=this.queue.shift();)d(this.failed);else for(;d=this.queue.shift();)d()};pH.prototype.fail=function(d){this.failed=d;this.execute()};pH.prototype.ready=
function(d){this.isReady=!0;this.db=d;this.execute()};pH.prototype.addTask=function(d){this.queue.push(d);this.failed&&this.execute()};Su(Pi,ul);var wia="undefined"!==typeof AbortController?AbortController:function(){return{abort:function(){}}},m3=fetch,EE=Headers;Pi.adapters={};Pi.preferredAdapters=[];Pi.prefix="_pouch_";var Faa=new Fq.EventEmitter;(function(d){Object.keys(Fq.EventEmitter.prototype).forEach(function(n){"function"===typeof Fq.EventEmitter.prototype[n]&&(d[n]=Faa[n].bind(Faa))});var h=
d._destructionListeners=new yr;d.on("ref",function(n){h.has(n.name)||h.set(n.name,[]);h.get(n.name).push(n)});d.on("unref",function(n){if(h.has(n.name)){var b=h.get(n.name),e=b.indexOf(n);0>e||(b.splice(e,1),1<b.length?h.set(n.name,b):h.delete(n.name))}});d.on("destroyed",function(n){if(h.has(n)){var b=h.get(n);h.delete(n);b.forEach(function(e){e.emit("destroyed",!0)})}})})(Pi);Pi.adapter=function(d,h,n){h.valid()&&(Pi.adapters[d]=h,n&&Pi.preferredAdapters.push(d))};Pi.plugin=function(d){if("function"===
typeof d)d(Pi);else{if("object"!==typeof d||0===Object.keys(d).length)throw Error('Invalid plugin: got "'+d+'", expected an object or a function');Object.keys(d).forEach(function(h){Pi.prototype[h]=d[h]})}this.__defaults&&(Pi.__defaults=CE({},this.__defaults));return Pi};Pi.defaults=function(d){function h(n,b){if(!(this instanceof h))return new h(n,b);b=b||{};n&&"object"===typeof n&&(b=n,n=b.name,delete b.name);b=CE({},h.__defaults,b);Pi.call(this,n,b)}Su(h,Pi);h.preferredAdapters=Pi.preferredAdapters.slice();
Object.keys(Pi).forEach(function(n){n in h||(h[n]=Pi[n])});h.__defaults=CE({},this.__defaults,d);return h};Pi.fetch=function(d,h){return m3(d,h)};var U2=["$or","$nor","$not"],X2={$elemMatch:function(d,h,n,b){return Array.isArray(b)&&0!==b.length?"object"===typeof b[0]?b.some(function(e){return AE(e,h,Object.keys(h))}):b.some(function(e){return iT(h,d,n,e)}):!1},$allMatch:function(d,h,n,b){return Array.isArray(b)&&0!==b.length?"object"===typeof b[0]?b.every(function(e){return AE(e,h,Object.keys(h))}):
b.every(function(e){return iT(h,d,n,e)}):!1},$eq:function(d,h,n,b){return TB(b)&&0===Tn(b,h)},$gte:function(d,h,n,b){return TB(b)&&0<=Tn(b,h)},$gt:function(d,h,n,b){return TB(b)&&0<Tn(b,h)},$lte:function(d,h,n,b){return TB(b)&&0>=Tn(b,h)},$lt:function(d,h,n,b){return TB(b)&&0>Tn(b,h)},$exists:function(d,h,n,b){return h?TB(b):!TB(b)},$mod:function(d,h,n,b){if(d=rH(b)){d=h[0];h=h[1];if(0===d)throw Error("Bad divisor, cannot divide by zero");if(parseInt(d,10)!==d)throw Error("Divisor is not an integer");
if(parseInt(h,10)!==h)throw Error("Modulus is not an integer");d=parseInt(b,10)!==b?!1:b%d===h}return d},$ne:function(d,h,n,b){return h.every(function(e){return 0!==Tn(b,e)})},$in:function(d,h,n,b){return rH(b)&&Y2(b,h)},$nin:function(d,h,n,b){return rH(b)&&!Y2(b,h)},$size:function(d,h,n,b){return rH(b)&&b.length===h},$all:function(d,h,n,b){return Array.isArray(b)&&Vha(b,h)},$regex:function(d,h,n,b){if(d=rH(b))d=(new RegExp(h)).test(b);return d},$type:function(d,h,n,b){return Wha(b,h)}};Pi.plugin(function(d){d._changesFilterPlugin=
{validate:Xha,normalize:Yha,shouldFilter:Zha,filter:$ha}});Pi.version="7.2.1";var aia=Z2("_id _rev _attachments _deleted _revisions _revs_info _conflicts _deleted_conflicts _local_seq _rev_tree _replication_id _replication_state _replication_state_time _replication_state_reason _replication_stats _removed".split(" ")),bia=Z2("_attachments _replication_id _replication_state _replication_state_time _replication_state_reason _replication_stats".split(" ")),sH=new yE,mT=!1,nT=[],DE=new yr,pT,oT=new yr;
k3.valid=function(){return"undefined"!==typeof indexedDB&&"undefined"!==typeof IDBKeyRange};var sT={};rT.valid=function(){return!0};Su(WB,Error);Su(iM,Error);Su(jM,Error);var zia=Hs.bind(null,"log"),Aia=Array.isArray,Bia=JSON.parse;uH.prototype.add=function(d){return this.promise=this.promise.catch(function(){}).then(function(){return d()})};uH.prototype.finish=function(){return this.promise};var Gaa={},Haa=new uH,Cra=function(d,h){return vT(h)},Dra=function(d,h){return h.length},Era=function(d,h){d=
vT(h);for(var n=Math.min.apply(null,h),b=Math.max.apply(null,h),e=h.length,l=0,a=0,f=h.length;a<f;a++){var m=h[a];l+=m*m}return{sum:d,min:n,max:b,count:e,sumsqr:l}},Iaa=function(d,h,n,b){function e(fa,ua,gb,hb,ta){try{return{output:ua(gb,hb,ta)}}catch(na){return t3(fa,na),{error:na}}}function l(fa,ua){var gb=Tn(fa.key,ua.key);return 0!==gb?gb:Tn(fa.value,ua.value)}function a(fa,ua,gb){gb=gb||0;return"number"===typeof ua?fa.slice(gb,ua+gb):0<gb?fa.slice(gb):fa}function f(fa){var ua=fa.value;return ua&&
"object"===typeof ua&&ua._id||fa.id}function m(fa){fa.rows.forEach(function(ua){var gb=ua.doc&&ua.doc._attachments;gb&&Object.keys(gb).forEach(function(hb){var ta=gb[hb];gb[hb].data=bT(ta.data,ta.content_type)})})}function r(fa){return function(ua){fa.include_docs&&fa.attachments&&fa.binary&&m(ua);return ua}}function v(fa,ua,gb,hb){ua=ua[fa];"undefined"!==typeof ua&&(hb&&(ua=encodeURIComponent(JSON.stringify(ua))),gb.push(fa+"="+ua))}function x(fa){if("undefined"!==typeof fa){var ua=Number(fa);return isNaN(ua)||
ua!==parseInt(fa,10)?fa:ua}}function y(fa){fa.group_level=x(fa.group_level);fa.limit=x(fa.limit);fa.skip=x(fa.skip);return fa}function E(fa,ua){var gb=fa.descending?"endkey":"startkey",hb=fa.descending?"startkey":"endkey";if("undefined"!==typeof fa[gb]&&"undefined"!==typeof fa[hb]&&0<Tn(fa[gb],fa[hb]))throw new WB("No rows can match your key range, reverse your start_key and end_key or set {descending : true}");if(ua.reduce&&!1!==fa.reduce){if(fa.include_docs)throw new WB("{include_docs:true} is invalid for reduce");
if(fa.keys&&1<fa.keys.length&&!fa.group&&!fa.group_level)throw new WB("Multi-key fetches for reduce views must use {group: true}");}["group_level","limit","skip"].forEach(function(ta){a:{if(ta=fa[ta]){if("number"!==typeof ta){ta=new WB('Invalid value for integer: "'+ta+'"');break a}if(0>ta){ta=new WB('Invalid value for positive integer: "'+ta+'"');break a}}ta=void 0}if(ta)throw ta;})}function F(fa,ua,gb){var hb=[],ta,na="GET",pa,La;v("reduce",gb,hb);v("include_docs",gb,hb);v("attachments",gb,hb);
v("limit",gb,hb);v("descending",gb,hb);v("group",gb,hb);v("group_level",gb,hb);v("skip",gb,hb);v("stale",gb,hb);v("conflicts",gb,hb);v("startkey",gb,hb,!0);v("start_key",gb,hb,!0);v("endkey",gb,hb,!0);v("end_key",gb,hb,!0);v("inclusive_end",gb,hb);v("key",gb,hb,!0);v("update_seq",gb,hb);hb=hb.join("&");hb=""===hb?"":"?"+hb;if("undefined"!==typeof gb.keys){var Hb="keys="+encodeURIComponent(JSON.stringify(gb.keys));2E3>=Hb.length+hb.length+1?hb+=("?"===hb[0]?"&":"?")+Hb:(na="POST","string"===typeof ua?
ta={keys:gb.keys}:ua.keys=gb.keys)}if("string"===typeof ua)return Hb=wT(ua),fa.fetch("_design/"+Hb[0]+"/_view/"+Hb[1]+hb,{headers:new EE({"Content-Type":"application/json"}),method:na,body:JSON.stringify(ta)}).then(function(fc){pa=fc.ok;La=fc.status;return fc.json()}).then(function(fc){if(!pa)throw fc.status=La,zE(fc);fc.rows.forEach(function(Ob){if(Ob.value&&Ob.value.error&&"builtin_reduce_error"===Ob.value.error)throw Error(Ob.reason);});return fc}).then(r(gb));ta=ta||{};Object.keys(ua).forEach(function(fc){Array.isArray(ua[fc])?
ta[fc]=ua[fc]:ta[fc]=ua[fc].toString()});return fa.fetch("_temp_view"+hb,{headers:new EE({"Content-Type":"application/json"}),method:"POST",body:JSON.stringify(ta)}).then(function(fc){pa=fc.ok;La=fc.status;return fc.json()}).then(function(fc){if(!pa)throw fc.status=La,zE(fc);return fc}).then(r(gb))}function I(fa,ua,gb){return new Promise(function(hb,ta){fa._query(ua,gb,function(na,pa){if(na)return ta(na);hb(pa)})})}function J(fa){return new Promise(function(ua,gb){fa._viewCleanup(function(hb,ta){if(hb)return gb(hb);
ua(ta)})})}function P(fa){return function(ua){if(404===ua.status)return fa;throw ua;}}function N(fa,ua,gb){function hb(La,Hb){for(var fc=[],Ob=new tH,Zb=0,Hc=Hb.rows.length;Zb<Hc;Zb++){var Gb=Hb.rows[Zb].doc;if(Gb&&(fc.push(Gb),Ob.add(Gb._id),Gb._deleted=!pa.has(Gb._id),!Gb._deleted)){var dd=pa.get(Gb._id);"value"in dd&&(Gb.value=dd.value)}}Hb=uT(pa);Hb.forEach(function(Gd){if(!Ob.has(Gd)){var ma={_id:Gd};Gd=pa.get(Gd);"value"in Gd&&(ma.value=Gd.value);fc.push(ma)}});La.keys=o3(Hb.concat(La.keys));
fc.push(La);return fc}var ta="_local/doc_"+fa,na={_id:ta,keys:[]};fa=gb.get(fa);var pa=fa[0];ta=Dia(fa[1])?Promise.resolve(na):ua.db.get(ta).catch(P(na));return ta.then(function(La){return(La.keys.length?ua.db.allDocs({keys:La.keys,include_docs:!0}):Promise.resolve({rows:[]})).then(function(Hb){return hb(La,Hb)})})}function Y(fa,ua,gb){return fa.db.get("_local/lastSeq").catch(P({_id:"_local/lastSeq",seq:0})).then(function(hb){var ta=uT(ua);return Promise.all(ta.map(function(na){return N(na,fa,ua)})).then(function(na){na=
aM(na);hb.seq=gb;na.push(hb);return fa.db.bulkDocs({docs:na})})})}function W(fa){fa="string"===typeof fa?fa:fa.name;var ua=Gaa[fa];ua||(ua=Gaa[fa]=new uH);return ua}function da(fa){return tT(W(fa),function(){return va(fa)})()}function va(fa){function ua(fc,Ob){return function(){return Y(fa,fc,Ob)}}function gb(){return fa.sourceDB.changes({return_docs:!0,conflicts:!0,include_docs:!0,style:"all_docs",since:La,limit:50}).then(hb)}function hb(fc){fc=fc.results;if(fc.length){for(var Ob=new yr,Zb=0,Hc=
fc.length;Zb<Hc;Zb++){var Gb=fc[Zb];if("_"!==Gb.doc._id[0]){ta=[];na=Gb.doc;if(!na._deleted){var dd=fa.sourceDB;try{pa(na)}catch(vd){t3(dd,vd)}}ta.sort(l);dd=void 0;for(var Gd=ta,ma=new yr,Ga=0,Ja=Gd.length;Ga<Ja;Ga++){var vb=Gd[Ga],Vb=[vb.key,vb.id];0<Ga&&0===Tn(vb.key,dd)&&Vb.push(Ga);ma.set(ru(Vb),vb);dd=vb.key}Ob.set(Gb.doc._id,[ma,Gb.changes])}La=Gb.seq}Hb.add(ua(Ob,La));if(!(50>fc.length))return gb()}}var ta,na,pa=h(fa.mapFun,function(fc,Ob){fc={id:na._id,key:SB(fc)};"undefined"!==typeof Ob&&
null!==Ob&&(fc.value=SB(Ob));ta.push(fc)}),La=fa.seq||0,Hb=new uH;return gb().then(function(){return Hb.finish()}).then(function(){fa.seq=La})}function za(fa,ua,gb){0===gb.group_level&&delete gb.group_level;var hb=gb.group||gb.group_level,ta=n(fa.reduceFun),na=[],pa=isNaN(gb.group_level)?Number.POSITIVE_INFINITY:gb.group_level;ua.forEach(function(Zb){var Hc=na[na.length-1],Gb=hb?Zb.key:null;hb&&Array.isArray(Gb)&&(Gb=Gb.slice(0,pa));Hc&&0===Tn(Hc.groupKey,Gb)?(Hc.keys.push([Zb.key,Zb.id]),Hc.values.push(Zb.value)):
na.push({keys:[[Zb.key,Zb.id]],values:[Zb.value],groupKey:Gb})});ua=[];for(var La=0,Hb=na.length;La<Hb;La++){var fc=na[La],Ob=e(fa.sourceDB,ta,fc.keys,fc.values,!1);if(Ob.error&&Ob.error instanceof jM)throw Ob.error;ua.push({value:Ob.error?null:Ob.output,key:fc.groupKey})}return{rows:a(ua,gb.limit,gb.skip)}}function L(fa,ua){return tT(W(fa),function(){return Z(fa,ua)})()}function Z(fa,ua){function gb(Ob){Ob.include_docs=!0;return fa.db.allDocs(Ob).then(function(Zb){ta=Zb.total_rows;return Zb.rows.map(function(Hc){if("value"in
Hc.doc&&"object"===typeof Hc.doc.value&&null!==Hc.doc.value){var Gb=Object.keys(Hc.doc.value).sort(),dd=["id","key","value"];if(!(Gb<dd||Gb>dd))return Hc.doc.value}a:{Gb=Hc.doc._id;dd=[];for(var Gd=[],ma=0;;){var Ga=Gb[ma++];if("\x00"===Ga)if(1===dd.length){Gb=dd.pop();break a}else{var Ja=dd;var vb=Gd;Ga=Ja.pop();if(vb.length){var Vb=vb[vb.length-1];Ga===Vb.element&&(vb.pop(),Vb=vb[vb.length-1]);vb=Vb.element;Vb=Vb.index;Array.isArray(vb)?vb.push(Ga):Vb===Ja.length-2?(Ja=Ja.pop(),vb[Ja]=Ga):Ja.push(Ga)}continue}switch(Ga){case "1":dd.push(null);
break;case "2":dd.push("1"===Gb[ma]);ma++;break;case "3":Vb=Gb;Ja=Ga=ma;if("1"===Vb[Ga])Vb=0,Ga++;else{vb="0"===Vb[Ga];Ga++;var vd="",ud=Vb.substring(Ga,Ga+3);ud=parseInt(ud,10)+-324;vb&&(ud=-ud);for(Ga+=3;;){var Jc=Vb[Ga];if("\x00"===Jc)break;else vd+=Jc;Ga++}vd=vd.split(".");Vb=1===vd.length?parseInt(vd,10):parseFloat(vd[0]+"."+vd[1]);vb&&(Vb-=10);0!==ud&&(Vb=parseFloat(Vb+"e"+ud))}vb=Vb;Ga-=Ja;dd.push(vb);ma+=Ga;break;case "4":for(Ga="";;){Ja=Gb[ma];if("\x00"===Ja)break;Ga+=Ja;ma++}Ga=Ga.replace(/\u0001\u0001/g,
"\x00").replace(/\u0001\u0002/g,"\u0001").replace(/\u0002\u0002/g,"\u0002");dd.push(Ga);break;case "5":Ga={element:[],index:dd.length};dd.push(Ga.element);Gd.push(Ga);break;case "6":Ga={element:{},index:dd.length};dd.push(Ga.element);Gd.push(Ga);break;default:throw Error("bad collationIndex or unexpectedly reached end of input: "+Ga);}}}return{key:Gb[0],id:Gb[1],value:"value"in Hc.doc?Hc.doc.value:null}})})}function hb(Ob){var Zb=na?za(fa,Ob,ua):{total_rows:ta,offset:pa,rows:Ob};ua.update_seq&&(Zb.update_seq=
fa.seq);if(ua.include_docs){var Hc=o3(Ob.map(f));return fa.sourceDB.allDocs({keys:Hc,include_docs:!0,conflicts:ua.conflicts,attachments:ua.attachments,binary:ua.binary}).then(function(Gb){var dd=new yr;Gb.rows.forEach(function(Gd){dd.set(Gd.id,Gd.doc)});Ob.forEach(function(Gd){var ma=f(Gd);if(ma=dd.get(ma))Gd.doc=ma});return Zb})}return Zb}var ta,na=fa.reduceFun&&!1!==ua.reduce,pa=ua.skip||0;"undefined"===typeof ua.keys||ua.keys.length||(ua.limit=0,delete ua.keys);if("undefined"!==typeof ua.keys){var La=
ua.keys.map(function(Ob){Ob={startkey:ru([Ob]),endkey:ru([Ob,{}])};ua.update_seq&&(Ob.update_seq=!0);return gb(Ob)});return Promise.all(La).then(aM).then(hb)}La={descending:ua.descending};ua.update_seq&&(La.update_seq=!0);if("start_key"in ua)var Hb=ua.start_key;"startkey"in ua&&(Hb=ua.startkey);if("end_key"in ua)var fc=ua.end_key;"endkey"in ua&&(fc=ua.endkey);"undefined"!==typeof Hb&&(La.startkey=ua.descending?ru([Hb,{}]):ru([Hb]));"undefined"!==typeof fc&&(Hb=!1!==ua.inclusive_end,ua.descending&&
(Hb=!Hb),La.endkey=ru(Hb?[fc,{}]:[fc]));"undefined"!==typeof ua.key&&(fc=ru([ua.key]),Hb=ru([ua.key,{}]),La.descending?(La.endkey=fc,La.startkey=Hb):(La.startkey=fc,La.endkey=Hb));na||("number"===typeof ua.limit&&(La.limit=ua.limit),La.skip=pa);return gb(La).then(hb)}function R(fa){return fa.fetch("_view_cleanup",{headers:new EE({"Content-Type":"application/json"}),method:"POST"}).then(function(ua){return ua.json()})}function X(fa){return fa.get("_local/"+d).then(function(ua){var gb=new yr;Object.keys(ua.views).forEach(function(ta){var na=
wT(ta);ta="_design/"+na[0];na=na[1];var pa=gb.get(ta);pa||(pa=new tH,gb.set(ta,pa));pa.add(na)});var hb={keys:uT(gb),include_docs:!0};return fa.allDocs(hb).then(function(ta){var na={};ta.rows.forEach(function(pa){var La=pa.key.substring(8);gb.get(pa.key).forEach(function(Hb){var fc=La+"/"+Hb;ua.views[fc]||(fc=Hb);fc=Object.keys(ua.views[fc]);var Ob=pa.doc&&pa.doc.views&&pa.doc.views[Hb];fc.forEach(function(Zb){na[Zb]=na[Zb]||Ob})})});ta=Object.keys(na).filter(function(pa){return!na[pa]}).map(function(pa){return tT(W(pa),
function(){return(new fa.constructor(pa,fa.__opts)).destroy()})()});return Promise.all(ta).then(function(){return{ok:!0}})})},P({ok:!0}))}function ja(fa,ua,gb){if("function"===typeof fa._query)return I(fa,ua,gb);if(ew(fa))return F(fa,ua,gb);if("string"!==typeof ua)return E(gb,ua),Haa.add(function(){return s3(fa,"temp_view/temp_view",ua.map,ua.reduce,!0,d).then(function(na){return yia(da(na).then(function(){return L(na,gb)}),function(){return na.db.destroy()})})}),Haa.finish();var hb=wT(ua),ta=hb[1];
return fa.get("_design/"+hb[0]).then(function(na){var pa=na.views&&na.views[ta];if(!pa)throw new iM("ddoc "+na._id+" has no view named "+ta);b(na,ta);E(gb,pa);return s3(fa,ua,pa.map,pa.reduce,!1,d).then(function(La){return"ok"===gb.stale||"update_after"===gb.stale?("update_after"===gb.stale&&fw(function(){da(La)}),L(La,gb)):da(La).then(function(){return L(La,gb)})})})}return{query:function(fa,ua,gb){var hb=this;"function"===typeof ua&&(gb=ua,ua={});ua=ua?y(ua):{};"function"===typeof fa&&(fa={map:fa});
var ta=Promise.resolve().then(function(){return ja(hb,fa,ua)});n3(ta,gb);return ta},viewCleanup:xia(function(){return"function"===typeof this._viewCleanup?J(this):ew(this)?R(this):X(this)})}}("mrviews",function(d,h){return"function"===typeof d&&2===d.length?function(n){return d(n,h)}:q3(d.toString(),h)},function(d){d=d.toString();if(/^_sum/.test(d))var h=Cra;else if(/^_count/.test(d))h=Dra;else if(/^_stats/.test(d))h=Era;else{if(/^_/.test(d))throw Error(d+" is not a supported reduce function.");h=
void 0}return h?h:q3(d)},function(d,h){var n=d.views&&d.views[h];if("string"!==typeof n.map)throw new iM("ddoc "+d._id+" has no string view named "+h+", instead found object of type: "+typeof n.map);});vH.prototype.writeCheckpoint=function(d,h){var n=this;return this.updateTarget(d,h).then(function(){return n.updateSource(d,h)})};vH.prototype.updateTarget=function(d,h){return this.opts.writeTargetCheckpoint?xT(this.target,this.id,d,h,this.returnValue):Promise.resolve(!0)};vH.prototype.updateSource=
function(d,h){if(this.opts.writeSourceCheckpoint){var n=this;return xT(this.src,this.id,d,h,this.returnValue).catch(function(b){if(w3(b))return n.opts.writeSourceCheckpoint=!1,!0;throw b;})}return Promise.resolve(!0)};var Jaa={undefined:function(d,h){return 0===Tn(d.last_seq,h.last_seq)?h.last_seq:0},1:function(d,h){d=h.session_id===d.session_id?{last_seq:h.last_seq,history:h.history}:v3(h.history,d.history);return d.last_seq}};vH.prototype.getCheckpoint=function(){var d=this;return d.opts&&d.opts.writeSourceCheckpoint&&
!d.opts.writeTargetCheckpoint?d.src.get(d.id).then(function(h){return h.last_seq||0}).catch(function(h){if(404!==h.status)throw h;return 0}):d.target.get(d.id).then(function(h){return d.opts&&d.opts.writeTargetCheckpoint&&!d.opts.writeSourceCheckpoint?h.last_seq||0:d.src.get(d.id).then(function(n){if(h.version!==n.version)return 0;var b=h.version?h.version.toString():"undefined";return b in Jaa?Jaa[b](h,n):0},function(n){if(404===n.status&&h.last_seq)return d.src.put({_id:d.id,last_seq:0}).then(function(){return 0},
function(b){return w3(b)?(d.opts.writeSourceCheckpoint=!1,h.last_seq):0});throw n;})}).catch(function(h){if(404!==h.status)throw h;return 0})};Su(kM,Fq.EventEmitter);kM.prototype.cancel=function(){this.cancelled=!0;this.state="cancelled";this.emit("cancel")};kM.prototype.ready=function(d,h){function n(){b.cancel()}var b=this;b._readyCalled||(b._readyCalled=!0,d.once("destroyed",n),h.once("destroyed",n),b.once("complete",function(){d.removeListener("destroyed",n);h.removeListener("destroyed",n)}))};
Su(AT,Fq.EventEmitter);AT.prototype.cancel=function(){this.canceled||(this.canceled=!0,this.push.cancel(),this.pull.cancel())};Pi.plugin(function(d){d.adapter("idb",k3,!0)}).plugin(function(d){d.adapter("http",rT,!1);d.adapter("https",rT,!1)}).plugin({query:function(d,h,n){return Iaa.query.call(this,d,h,n)},viewCleanup:function(d){return Iaa.viewCleanup.call(this,d)}}).plugin(function(d){d.replicate=zT;d.sync=Kia;Object.defineProperty(d.prototype,"replicate",{get:function(){var h=this;"undefined"===
typeof this.replicateMethods&&(this.replicateMethods={from:function(n,b,e){return h.constructor.replicate(n,h,b,e)},to:function(n,b,e){return h.constructor.replicate(h,n,b,e)}});return this.replicateMethods}});d.prototype.sync=function(h,n,b){return this.constructor.sync(this,h,n,b)}});var Fra=zra=Pi,EA={};Object.defineProperty(EA,"__esModule",{value:!0});Oz.prototype.get=function(d){return this._store["$"+d]};Oz.prototype.set=function(d,h){this._store["$"+d]=h;return!0};Oz.prototype.has=function(d){return"$"+
d in this._store};Oz.prototype.delete=function(d){d="$"+d;var h=d in this._store;delete this._store[d];return h};Oz.prototype.forEach=function(d){for(var h=Object.keys(this._store),n=0,b=h.length;n<b;n++){var e=h[n],l=this._store[e];e=e.substring(1);d(l,e)}};Object.defineProperty(Oz.prototype,"size",{get:function(){return Object.keys(this._store).length}});wH.prototype.add=function(d){return this._store.set(d,!0)};wH.prototype.has=function(d){return this._store.has(d)};wH.prototype.forEach=function(d){this._store.forEach(function(h,
n){d(n)})};Object.defineProperty(wH.prototype,"size",{get:function(){return this._store.size}});(function(){if("undefined"===typeof Symbol||"undefined"===typeof Map||"undefined"===typeof Set)return!1;var d=Object.getOwnPropertyDescriptor(Map,Symbol.species);return d&&"get"in d&&Map[Symbol.species]===Map})()?(EA.Set=Set,EA.Map=Map):(EA.Set=wH,EA.Map=Oz);var bY={},cY=mj;bY.test=function(){return"undefined"!==typeof cY&&!cY.browser};bY.install=function(d){return function(){cY.nextTick(d)}};var Kaa="undefined"!==
typeof globalThis?globalThis:"undefined"!==typeof self?self:global,dY="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,eY={},Laa=dY.MutationObserver||dY.WebKitMutationObserver;eY.test=function(){return Laa};eY.install=function(d){var h=0;d=new Laa(d);var n=dY.document.createTextNode("");d.observe(n,{characterData:!0});return function(){n.data=h=++h%2}};var fY="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,wP="undefined"!==typeof globalThis?
globalThis:"undefined"!==typeof self?self:global,Gra={},dJ=[bY,{test:function(){return"function"===typeof Kaa.queueMicrotask},install:function(d){return function(){Kaa.queueMicrotask(d)}}},eY,{test:function(){return fY.setImmediate?!1:"undefined"!==typeof fY.MessageChannel},install:function(d){var h=new fY.MessageChannel;h.port1.onmessage=d;return function(){h.port2.postMessage(0)}}},{test:function(){return"document"in wP&&"onreadystatechange"in wP.document.createElement("script")},install:function(d){return function(){var h=
wP.document.createElement("script");h.onreadystatechange=function(){d();h.onreadystatechange=null;h.parentNode.removeChild(h);h=null};wP.document.documentElement.appendChild(h);return d}}},{test:function(){return!0},install:function(d){return function(){setTimeout(d,0)}}}],FE,XB,xH=-1,Pz=[],BT=!1,eJ=-1,Hra=dJ.length;for(;++eJ<Hra;)if(dJ[eJ]&&dJ[eJ].test&&dJ[eJ].test()){var Ira=dJ[eJ].install(y3);break}z3.prototype.run=function(){var d=this.fun,h=this.array;switch(h.length){case 0:return d();case 1:return d(h[0]);
case 2:return d(h[0],h[1]);case 3:return d(h[0],h[1],h[2]);default:return d.apply(null,h)}};var Rj=Gra=function(d){var h=Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)h[n-1]=arguments[n];Pz.push(new z3(d,h));BT||FE||(BT=!0,Ira())},Qg={};Object.defineProperty(Qg,"__esModule",{value:!0});(wl&&"object"===typeof wl&&"default"in wl?wl["default"]:wl)(gl,Error);gl.prototype.toString=function(){return JSON.stringify({status:this.status,name:this.name,message:this.message,
reason:this.reason})};var Jra=new gl(401,"unauthorized","Name or password is incorrect."),Kra=new gl(400,"bad_request","Missing JSON list of 'docs'"),Lra=new gl(404,"not_found","missing"),Mra=new gl(409,"conflict","Document update conflict"),Nra=new gl(400,"bad_request","_id field must contain a string"),Ora=new gl(412,"missing_id","_id is required for puts"),Pra=new gl(400,"bad_request","Only reserved document ids may start with underscore."),Qra=new gl(412,"precondition_failed","Database not open"),
Maa=new gl(500,"unknown_error","Database encountered an unknown error"),Rra=new gl(500,"badarg","Some query argument is invalid"),Sra=new gl(400,"invalid_request","Request was invalid"),Tra=new gl(400,"query_parse_error","Some query parameter is invalid"),Ura=new gl(500,"doc_validation","Bad special document member"),Vra=new gl(400,"bad_request","Something wrong with the request"),Wra=new gl(400,"bad_request","Document must be a JSON object"),Xra=new gl(404,"not_found","Database not found"),Yra=new gl(500,
"indexed_db_went_bad","unknown"),Zra=new gl(500,"web_sql_went_bad","unknown"),$ra=new gl(500,"levelDB_went_went_bad","unknown"),asa=new gl(403,"forbidden","Forbidden by design doc validate_doc_update function"),bsa=new gl(400,"bad_request","Invalid rev format"),csa=new gl(412,"file_exists","The database could not be created, the file already exists."),dsa=new gl(412,"missing_stub","A pre-existing attachment stub wasn't found"),esa=new gl(413,"invalid_url","Provided URL is invalid");Qg.UNAUTHORIZED=
Jra;Qg.MISSING_BULK_DOCS=Kra;Qg.MISSING_DOC=Lra;Qg.REV_CONFLICT=Mra;Qg.INVALID_ID=Nra;Qg.MISSING_ID=Ora;Qg.RESERVED_ID=Pra;Qg.NOT_OPEN=Qra;Qg.UNKNOWN_ERROR=Maa;Qg.BAD_ARG=Rra;Qg.INVALID_REQUEST=Sra;Qg.QUERY_PARSE_ERROR=Tra;Qg.DOC_VALIDATION=Ura;Qg.BAD_REQUEST=Vra;Qg.NOT_AN_OBJECT=Wra;Qg.DB_MISSING=Xra;Qg.WSQ_ERROR=Zra;Qg.LDB_ERROR=$ra;Qg.FORBIDDEN=asa;Qg.INVALID_REV=bsa;Qg.FILE_EXISTS=csa;Qg.MISSING_STUB=dsa;Qg.IDB_ERROR=Yra;Qg.INVALID_URL=esa;Qg.createError=function(d,h){function n(b){for(var e=
Object.getOwnPropertyNames(d),l=0,a=e.length;l<a;l++)"function"!==typeof d[e[l]]&&(this[e[l]]=d[e[l]]);void 0!==b&&(this.reason=b)}n.prototype=gl.prototype;return new n(h)};Qg.generateErrorFromResponse=function(d){if("object"!==typeof d){var h=d;d=Maa;d.data=h}"error"in d&&"conflict"===d.error&&(d.name="conflict",d.status=409);"name"in d||(d.name=d.error||"unknown");"status"in d||(d.status=500);"message"in d||(d.message=d.message||d.reason);return d};var fsa="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag,
gY=Object.prototype.toString,xP=function(d){return!(fsa&&d&&"object"==typeof d&&Symbol.toStringTag in d)&&"[object Arguments]"===gY.call(d)},Naa=function(d){return!!xP(d)||null!==d&&"object"==typeof d&&"number"==typeof d.length&&0<=d.length&&"[object Array]"!==gY.call(d)&&"[object Function]"===gY.call(d.callee)},gsa=function(){return xP(arguments)}();xP.isLegacyArguments=Naa;var hsa=gsa?xP:Naa,isa=Object.prototype.toString,jsa=Function.prototype.toString,ksa=/^\s*(?:function)?\*/,Oaa="function"==
typeof Symbol&&"symbol"==typeof Symbol.toStringTag,Paa=Object.getPrototypeOf;a:if(Oaa){try{var yP=Function("return function*() {}")();break a}catch(d){}yP=void 0}else yP=!1;var lsa=yP?Paa(yP):{},zi="function"==typeof Object.create?function(d,h){h&&(d.super_=h,d.prototype=Object.create(h.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}))}:function(d,h){if(h){d.super_=h;var n=function(){};n.prototype=h.prototype;d.prototype=new n;d.prototype.constructor=d}},Qaa=function(d){return d&&
"object"==typeof d&&"function"==typeof d.copy&&"function"==typeof d.fill&&"function"==typeof d.readUInt8},sj={},Mia=Qaa,T3="undefined"!=typeof BigInt,DT="undefined"!=typeof Symbol,zr=DT&&void 0!==Symbol.toStringTag,Gq="undefined"!=typeof Uint8Array,msa="undefined"!=typeof ArrayBuffer;if(Gq&&zr)var nsa=Object.getPrototypeOf(Uint8Array.prototype),Is=YB(Object.getOwnPropertyDescriptor(nsa,Symbol.toStringTag).get);var Kl=YB(Object.prototype.toString),Nia=YB(Number.prototype.valueOf),Oia=YB(String.prototype.valueOf),
Pia=YB(Boolean.prototype.valueOf);if(T3)var Qia=YB(BigInt.prototype.valueOf);if(DT)var Ria=YB(Symbol.prototype.valueOf);sj.isArgumentsObject=hsa;sj.isGeneratorFunction=function(d){return"function"==typeof d&&(!!ksa.test(jsa.call(d))||(Oaa?Paa(d)===lsa:"[object GeneratorFunction]"===isa.call(d)))};sj.isPromise=function(d){return"undefined"!=typeof Promise&&d instanceof Promise||null!==d&&"object"==typeof d&&"function"==typeof d.then&&"function"==typeof d.catch};sj.isArrayBufferView=function(d){return msa&&
ArrayBuffer.isView?ArrayBuffer.isView(d):A3(d)||N3(d)};sj.isTypedArray=A3;sj.isUint8Array=B3;sj.isUint8ClampedArray=C3;sj.isUint16Array=D3;sj.isUint32Array=E3;sj.isInt8Array=F3;sj.isInt16Array=G3;sj.isInt32Array=H3;sj.isFloat32Array=I3;sj.isFloat64Array=J3;sj.isBigInt64Array=K3;sj.isBigUint64Array=L3;mM.working="undefined"!=typeof Map&&mM(new Map);sj.isMap=function(d){return"undefined"!=typeof Map&&(mM.working?mM(d):d instanceof Map)};nM.working="undefined"!=typeof Set&&nM(new Set);sj.isSet=function(d){return"undefined"!=
typeof Set&&(nM.working?nM(d):d instanceof Set)};oM.working="undefined"!=typeof WeakMap&&oM(new WeakMap);sj.isWeakMap=function(d){return"undefined"!=typeof WeakMap&&(oM.working?oM(d):d instanceof WeakMap)};CT.working="undefined"!=typeof WeakSet&&CT(new WeakSet);sj.isWeakSet=function(d){return CT(d)};pM.working="undefined"!=typeof ArrayBuffer&&pM(new ArrayBuffer);sj.isArrayBuffer=M3;qM.working="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView&&qM(new DataView(new ArrayBuffer(1),0,1));sj.isDataView=
N3;rM.working="undefined"!=typeof SharedArrayBuffer&&rM(new SharedArrayBuffer);sj.isSharedArrayBuffer=O3;sj.isAsyncFunction=function(d){return"[object AsyncFunction]"===Kl(d)};sj.isMapIterator=function(d){return"[object Map Iterator]"===Kl(d)};sj.isSetIterator=function(d){return"[object Set Iterator]"===Kl(d)};sj.isGeneratorObject=function(d){return"[object Generator]"===Kl(d)};sj.isWebAssemblyCompiledModule=function(d){return"[object WebAssembly.Module]"===Kl(d)};sj.isNumberObject=P3;sj.isStringObject=
Q3;sj.isBooleanObject=R3;sj.isBigIntObject=S3;sj.isSymbolObject=U3;sj.isBoxedPrimitive=function(d){return P3(d)||Q3(d)||R3(d)||S3(d)||U3(d)};sj.isAnyArrayBuffer=function(d){return Gq&&(M3(d)||O3(d))};["isProxy","isExternal","isModuleNamespaceObject"].forEach(function(d){Object.defineProperty(sj,d,{enumerable:!1,value:function(){throw Error(d+" is not supported in userland");}})});var fJ="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,$h={},Pw=mj,Raa=Object.getOwnPropertyDescriptors||
function(d){for(var h=Object.keys(d),n={},b=0;b<h.length;b++)n[h[b]]=Object.getOwnPropertyDescriptor(d,h[b]);return n},osa=/%[sdj%]/g;$h.format=function(d){if(!uM(d)){for(var h=[],n=0;n<arguments.length;n++)h.push(Qz(arguments[n]));return h.join(" ")}n=1;var b=arguments,e=b.length;h=String(d).replace(osa,function(a){if("%%"===a)return"%";if(n>=e)return a;switch(a){case "%s":return String(b[n++]);case "%d":return Number(b[n++]);case "%j":try{return JSON.stringify(b[n++])}catch(f){return"[Circular]"}default:return a}});
for(var l=b[n];n<e;l=b[++n])null!==l&&GE(l)?h+=" "+Qz(l):h+=" "+l;return h};$h.deprecate=function(d,h){if(void 0!==Pw&&!0===Pw.noDeprecation)return d;if(void 0===Pw)return function(){return $h.deprecate(d,h).apply(this||fJ,arguments)};var n=!1;return function(){if(!n){if(Pw.throwDeprecation)throw Error(h);Pw.traceDeprecation?console.trace(h):console.error(h);n=!0}return d.apply(this||fJ,arguments)}};var zP={},Saa=/^$/;if(Pw.env.NODE_DEBUG){var hY=Pw.env.NODE_DEBUG;hY=hY.replace(/[|\\{}()[\]^$+?.]/g,
"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase();Saa=new RegExp("^"+hY+"$","i")}$h.debuglog=function(d){if(d=d.toUpperCase(),!zP[d])if(Saa.test(d)){var h=Pw.pid;zP[d]=function(){var n=$h.format.apply($h,arguments);console.error("%s %d: %s",d,h,n)}}else zP[d]=function(){};return zP[d]};$h.inspect=Qz;Qz.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,
39]};Qz.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};$h.types=sj;$h.isArray=W3;$h.isBoolean=ET;$h.isNull=function(d){return null===d};$h.isNullOrUndefined=function(d){return null==d};$h.isNumber=V3;$h.isString=uM;$h.isSymbol=function(d){return"symbol"==typeof d};$h.isUndefined=ZB;$h.isRegExp=AH;$h.types.isRegExp=AH;$h.isObject=GE;$h.isDate=vM;$h.types.isDate=vM;$h.isError=zH;$h.types.isNativeError=zH;$h.isFunction=
tM;$h.isPrimitive=function(d){return null===d||"boolean"==typeof d||"number"==typeof d||"string"==typeof d||"symbol"==typeof d||void 0===d};$h.isBuffer=Qaa;var Via="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ");$h.log=function(){console.log("%s - %s",Uia(),$h.format.apply($h,arguments))};$h.inherits=zi;$h._extend=function(d,h){if(!h||!GE(h))return d;for(var n=Object.keys(h),b=n.length;b--;)d[n[b]]=h[n[b]];return d};var XC="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;
$h.promisify=function(d){function h(){for(var n,b,e=new Promise(function(f,m){n=f;b=m}),l=[],a=0;a<arguments.length;a++)l.push(arguments[a]);l.push(function(f,m){f?b(f):n(m)});try{d.apply(this||fJ,l)}catch(f){b(f)}return e}if("function"!=typeof d)throw new TypeError('The "original" argument must be of type Function');if(XC&&d[XC]){if("function"!=typeof(h=d[XC]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(h,XC,{value:h,enumerable:!1,
writable:!1,configurable:!0}),h}return Object.setPrototypeOf(h,Object.getPrototypeOf(d)),XC&&Object.defineProperty(h,XC,{value:h,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(h,Raa(d))};$h.promisify.custom=XC;$h.callbackify=function(d){function h(){for(var n=[],b=0;b<arguments.length;b++)n.push(arguments[b]);var e=n.pop();if("function"!=typeof e)throw new TypeError("The last argument must be of type Function");var l=this||fJ,a=function(){return e.apply(l,arguments)};d.apply(this||
fJ,n).then(function(f){Pw.nextTick(a.bind(null,null,f))},function(f){Pw.nextTick(Wia.bind(null,f,a))})}if("function"!=typeof d)throw new TypeError('The "original" argument must be of type Function');return Object.setPrototypeOf(h,Object.getPrototypeOf(d)),Object.defineProperties(h,Raa(d)),h};for(var hw=[],nt=[],psa="undefined"!=typeof Uint8Array?Uint8Array:Array,LF=0;64>LF;++LF)hw[LF]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[LF],nt["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charCodeAt(LF)]=
LF;nt[45]=62;nt[95]=63;var oi={},MT={byteLength:function(d){d=X3(d);var h=d[1];return 3*(d[0]+h)/4-h},toByteArray:function(d){var h=X3(d);var n=h[0];h=h[1];var b=new psa(3*(n+h)/4-h),e=0,l=0<h?n-4:n;for(n=0;n<l;n+=4){var a=nt[d.charCodeAt(n)]<<18|nt[d.charCodeAt(n+1)]<<12|nt[d.charCodeAt(n+2)]<<6|nt[d.charCodeAt(n+3)];b[e++]=a>>16&255;b[e++]=a>>8&255;b[e++]=255&a}2===h&&(a=nt[d.charCodeAt(n)]<<2|nt[d.charCodeAt(n+1)]>>4,b[e++]=255&a);1===h&&(a=nt[d.charCodeAt(n)]<<10|nt[d.charCodeAt(n+1)]<<4|nt[d.charCodeAt(n+
2)]>>2,b[e++]=a>>8&255,b[e++]=255&a);return b},fromByteArray:function(d){for(var h,n=d.length,b=n%3,e=[],l=0,a=n-b;l<a;l+=16383)e.push(Xia(d,l,l+16383>a?a:l+16383));1===b?(h=d[n-1],e.push(hw[h>>2]+hw[h<<4&63]+"==")):2===b&&(h=(d[n-2]<<8)+d[n-1],e.push(hw[h>>10]+hw[h>>4&63]+hw[h<<2&63]+"="));return e.join("")}},HE={read:function(d,h,n,b,e){var l=8*e-b-1;var a=(1<<l)-1,f=a>>1,m=-7;e=n?e-1:0;var r=n?-1:1,v=d[h+e];e+=r;n=v&(1<<-m)-1;v>>=-m;for(m+=l;0<m;n=256*n+d[h+e],e+=r,m-=8);l=n&(1<<-m)-1;n>>=-m;for(m+=
b;0<m;l=256*l+d[h+e],e+=r,m-=8);if(0===n)n=1-f;else{if(n===a)return l?NaN:1/0*(v?-1:1);l+=Math.pow(2,b);n-=f}return(v?-1:1)*l*Math.pow(2,n-b)},write:function(d,h,n,b,e,l){var a,f,m,r=8*l-e-1,v=(1<<r)-1,x=v>>1,y=23===e?Math.pow(2,-24)-Math.pow(2,-77):0;l=b?0:l-1;b=b?1:-1;var E=0>h||0===h&&0>1/h?1:0;h=Math.abs(h);for(isNaN(h)||h===1/0?(f=isNaN(h)?1:0,a=v):(a=Math.floor(Math.log(h)/Math.LN2),1>h*(m=Math.pow(2,-a))&&(a--,m*=2),2<=(h+=1<=a+x?y/m:y*Math.pow(2,1-x))*m&&(a++,m/=2),a+x>=v?(f=0,a=v):1<=a+x?
(f=(h*m-1)*Math.pow(2,e),a+=x):(f=h*Math.pow(2,x-1)*Math.pow(2,e),a=0));8<=e;d[n+l]=255&f,l+=b,f/=256,e-=8);a=a<<e|f;for(r+=e;0<r;d[n+l]=255&a,l+=b,a/=256,r-=8);d[n+l-b]|=128*E}},Taa="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;oi.Buffer=Te;oi.SlowBuffer=function(d){+d!=d&&(d=0);return Te.alloc(+d)};oi.INSPECT_MAX_BYTES=50;oi.kMaxLength=2147483647;Te.TYPED_ARRAY_SUPPORT=function(){try{var d=new Uint8Array(1),h={foo:function(){return 42}};return Object.setPrototypeOf(h,
Uint8Array.prototype),Object.setPrototypeOf(d,h),42===d.foo()}catch(n){return!1}}();Te.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");Object.defineProperty(Te.prototype,"parent",{enumerable:!0,get:function(){if(Te.isBuffer(this))return this.buffer}});Object.defineProperty(Te.prototype,"offset",{enumerable:!0,
get:function(){if(Te.isBuffer(this))return this.byteOffset}});Te.poolSize=8192;Te.from=function(d,h,n){return Y3(d,h,n)};Object.setPrototypeOf(Te.prototype,Uint8Array.prototype);Object.setPrototypeOf(Te,Uint8Array);Te.alloc=function(d,h,n){return $3(d),0>=d?ay(d):void 0!==h?"string"==typeof n?ay(d).fill(h,n):ay(d).fill(h):ay(d)};Te.allocUnsafe=function(d){return IT(d)};Te.allocUnsafeSlow=function(d){return IT(d)};Te.isBuffer=function(d){return null!=d&&!0===d._isBuffer&&d!==Te.prototype};Te.compare=
function(d,h){if(by(d,Uint8Array)&&(d=Te.from(d,d.offset,d.byteLength)),by(h,Uint8Array)&&(h=Te.from(h,h.offset,h.byteLength)),!Te.isBuffer(d)||!Te.isBuffer(h))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(d===h)return 0;for(var n=d.length,b=h.length,e=0,l=Math.min(n,b);e<l;++e)if(d[e]!==h[e]){n=d[e];b=h[e];break}return n<b?-1:b<n?1:0};Te.isEncoding=function(d){switch(String(d).toLowerCase()){case "hex":case "utf8":case "utf-8":case "ascii":case "latin1":case "binary":case "base64":case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return!0;
default:return!1}};Te.concat=function(d,h){if(!Array.isArray(d))throw new TypeError('"list" argument must be an Array of Buffers');if(0===d.length)return Te.alloc(0);var n;if(void 0===h)for(n=h=0;n<d.length;++n)h+=d[n].length;h=Te.allocUnsafe(h);var b=0;for(n=0;n<d.length;++n){var e=d[n];if(by(e,Uint8Array)&&(e=Te.from(e)),!Te.isBuffer(e))throw new TypeError('"list" argument must be an Array of Buffers');e.copy(h,b);b+=e.length}return h};Te.byteLength=Z3;Te.prototype._isBuffer=!0;Te.prototype.swap16=
function(){var d=this.length;if(0!=d%2)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var h=0;h<d;h+=2)$B(this,h,h+1);return this};Te.prototype.swap32=function(){var d=this.length;if(0!=d%4)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var h=0;h<d;h+=4)$B(this,h,h+3),$B(this,h+1,h+2);return this};Te.prototype.swap64=function(){var d=this.length;if(0!=d%8)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var h=0;h<d;h+=8)$B(this,h,
h+7),$B(this,h+1,h+6),$B(this,h+2,h+5),$B(this,h+3,h+4);return this};Te.prototype.toString=function(){var d=this.length;return 0===d?"":0===arguments.length?b4(this,0,d):Zia.apply(this,arguments)};Te.prototype.toLocaleString=Te.prototype.toString;Te.prototype.equals=function(d){if(!Te.isBuffer(d))throw new TypeError("Argument must be a Buffer");return this===d||0===Te.compare(this,d)};Te.prototype.inspect=function(){var d="",h=oi.INSPECT_MAX_BYTES;return d=this.toString("hex",0,h).replace(/(.{2})/g,
"$1 ").trim(),this.length>h&&(d+=" ... "),"<Buffer "+d+">"};Taa&&(Te.prototype[Taa]=Te.prototype.inspect);Te.prototype.compare=function(d,h,n,b,e){if(by(d,Uint8Array)&&(d=Te.from(d,d.offset,d.byteLength)),!Te.isBuffer(d))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof d);if(void 0===h&&(h=0),void 0===n&&(n=d?d.length:0),void 0===b&&(b=0),void 0===e&&(e=this.length),0>h||n>d.length||0>b||e>this.length)throw new RangeError("out of range index");
if(b>=e&&h>=n)return 0;if(b>=e)return-1;if(h>=n)return 1;if(this===d)return 0;var l=(e>>>=0)-(b>>>=0),a=(n>>>=0)-(h>>>=0),f=Math.min(l,a);b=this.slice(b,e);d=d.slice(h,n);for(h=0;h<f;++h)if(b[h]!==d[h]){l=b[h];a=d[h];break}return l<a?-1:a<l?1:0};Te.prototype.includes=function(d,h,n){return-1!==this.indexOf(d,h,n)};Te.prototype.indexOf=function(d,h,n){return c4(this,d,h,n,!0)};Te.prototype.lastIndexOf=function(d,h,n){return c4(this,d,h,n,!1)};Te.prototype.write=function(d,h,n,b){if(void 0===h)b="utf8",
n=this.length,h=0;else if(void 0===n&&"string"==typeof h)b=h,n=this.length,h=0;else{if(!isFinite(h))throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");h>>>=0;isFinite(n)?(n>>>=0,void 0===b&&(b="utf8")):(b=n,n=void 0)}var e=this.length-h;if((void 0===n||n>e)&&(n=e),0<d.length&&(0>n||0>h)||h>this.length)throw new RangeError("Attempt to write outside buffer bounds");b||(b="utf8");for(e=!1;;)switch(b){case "hex":a:{h=Number(h)||0;b=this.length-h;n?(n=Number(n))>b&&
(n=b):n=b;b=d.length;n>b/2&&(n=b/2);for(b=0;b<n;++b){e=parseInt(d.substr(2*b,2),16);if(e!=e){n=b;break a}this[h+b]=e}n=b}return n;case "utf8":case "utf-8":return wM(LT(d,this.length-h),this,h,n);case "ascii":return e4(this,d,h,n);case "latin1":case "binary":return e4(this,d,h,n);case "base64":return wM(a4(d),this,h,n);case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":b=n;e=this.length-h;for(var l=[],a=0;a<d.length&&!(0>(e-=2));++a){var f=d.charCodeAt(a);n=f>>8;f%=256;l.push(f);l.push(n)}return wM(l,
this,h,b);default:if(e)throw new TypeError("Unknown encoding: "+b);b=(""+b).toLowerCase();e=!0}};Te.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};Te.prototype.slice=function(d,h){var n=this.length;0>(d=~~d)?0>(d+=n)&&(d=0):d>n&&(d=n);0>(h=void 0===h?n:~~h)?0>(h+=n)&&(h=0):h>n&&(h=n);h<d&&(h=d);d=this.subarray(d,h);return Object.setPrototypeOf(d,Te.prototype),d};Te.prototype.readUIntLE=function(d,h,n){d>>>=0;h>>>=0;n||Un(d,h,this.length);n=this[d];
for(var b=1,e=0;++e<h&&(b*=256);)n+=this[d+e]*b;return n};Te.prototype.readUIntBE=function(d,h,n){d>>>=0;h>>>=0;n||Un(d,h,this.length);n=this[d+--h];for(var b=1;0<h&&(b*=256);)n+=this[d+--h]*b;return n};Te.prototype.readUInt8=function(d,h){return d>>>=0,h||Un(d,1,this.length),this[d]};Te.prototype.readUInt16LE=function(d,h){return d>>>=0,h||Un(d,2,this.length),this[d]|this[d+1]<<8};Te.prototype.readUInt16BE=function(d,h){return d>>>=0,h||Un(d,2,this.length),this[d]<<8|this[d+1]};Te.prototype.readUInt32LE=
function(d,h){return d>>>=0,h||Un(d,4,this.length),(this[d]|this[d+1]<<8|this[d+2]<<16)+16777216*this[d+3]};Te.prototype.readUInt32BE=function(d,h){return d>>>=0,h||Un(d,4,this.length),16777216*this[d]+(this[d+1]<<16|this[d+2]<<8|this[d+3])};Te.prototype.readIntLE=function(d,h,n){d>>>=0;h>>>=0;n||Un(d,h,this.length);n=this[d];for(var b=1,e=0;++e<h&&(b*=256);)n+=this[d+e]*b;return n>=128*b&&(n-=Math.pow(2,8*h)),n};Te.prototype.readIntBE=function(d,h,n){d>>>=0;h>>>=0;n||Un(d,h,this.length);n=h;for(var b=
1,e=this[d+--n];0<n&&(b*=256);)e+=this[d+--n]*b;return e>=128*b&&(e-=Math.pow(2,8*h)),e};Te.prototype.readInt8=function(d,h){return d>>>=0,h||Un(d,1,this.length),128&this[d]?-1*(255-this[d]+1):this[d]};Te.prototype.readInt16LE=function(d,h){d>>>=0;h||Un(d,2,this.length);d=this[d]|this[d+1]<<8;return 32768&d?4294901760|d:d};Te.prototype.readInt16BE=function(d,h){d>>>=0;h||Un(d,2,this.length);d=this[d+1]|this[d]<<8;return 32768&d?4294901760|d:d};Te.prototype.readInt32LE=function(d,h){return d>>>=0,
h||Un(d,4,this.length),this[d]|this[d+1]<<8|this[d+2]<<16|this[d+3]<<24};Te.prototype.readInt32BE=function(d,h){return d>>>=0,h||Un(d,4,this.length),this[d]<<24|this[d+1]<<16|this[d+2]<<8|this[d+3]};Te.prototype.readFloatLE=function(d,h){return d>>>=0,h||Un(d,4,this.length),HE.read(this,d,!0,23,4)};Te.prototype.readFloatBE=function(d,h){return d>>>=0,h||Un(d,4,this.length),HE.read(this,d,!1,23,4)};Te.prototype.readDoubleLE=function(d,h){return d>>>=0,h||Un(d,8,this.length),HE.read(this,d,!0,52,8)};
Te.prototype.readDoubleBE=function(d,h){return d>>>=0,h||Un(d,8,this.length),HE.read(this,d,!1,52,8)};Te.prototype.writeUIntLE=function(d,h,n,b){(d=+d,h>>>=0,n>>>=0,b)||Hq(this,d,h,n,Math.pow(2,8*n)-1,0);b=1;var e=0;for(this[h]=255&d;++e<n&&(b*=256);)this[h+e]=d/b&255;return h+n};Te.prototype.writeUIntBE=function(d,h,n,b){(d=+d,h>>>=0,n>>>=0,b)||Hq(this,d,h,n,Math.pow(2,8*n)-1,0);b=n-1;var e=1;for(this[h+b]=255&d;0<=--b&&(e*=256);)this[h+b]=d/e&255;return h+n};Te.prototype.writeUInt8=function(d,h,
n){return d=+d,h>>>=0,n||Hq(this,d,h,1,255,0),this[h]=255&d,h+1};Te.prototype.writeUInt16LE=function(d,h,n){return d=+d,h>>>=0,n||Hq(this,d,h,2,65535,0),this[h]=255&d,this[h+1]=d>>>8,h+2};Te.prototype.writeUInt16BE=function(d,h,n){return d=+d,h>>>=0,n||Hq(this,d,h,2,65535,0),this[h]=d>>>8,this[h+1]=255&d,h+2};Te.prototype.writeUInt32LE=function(d,h,n){return d=+d,h>>>=0,n||Hq(this,d,h,4,4294967295,0),this[h+3]=d>>>24,this[h+2]=d>>>16,this[h+1]=d>>>8,this[h]=255&d,h+4};Te.prototype.writeUInt32BE=function(d,
h,n){return d=+d,h>>>=0,n||Hq(this,d,h,4,4294967295,0),this[h]=d>>>24,this[h+1]=d>>>16,this[h+2]=d>>>8,this[h+3]=255&d,h+4};Te.prototype.writeIntLE=function(d,h,n,b){(d=+d,h>>>=0,b)||(b=Math.pow(2,8*n-1),Hq(this,d,h,n,b-1,-b));b=0;var e=1,l=0;for(this[h]=255&d;++b<n&&(e*=256);)0>d&&0===l&&0!==this[h+b-1]&&(l=1),this[h+b]=(d/e>>0)-l&255;return h+n};Te.prototype.writeIntBE=function(d,h,n,b){(d=+d,h>>>=0,b)||(b=Math.pow(2,8*n-1),Hq(this,d,h,n,b-1,-b));b=n-1;var e=1,l=0;for(this[h+b]=255&d;0<=--b&&(e*=
256);)0>d&&0===l&&0!==this[h+b+1]&&(l=1),this[h+b]=(d/e>>0)-l&255;return h+n};Te.prototype.writeInt8=function(d,h,n){return d=+d,h>>>=0,n||Hq(this,d,h,1,127,-128),0>d&&(d=255+d+1),this[h]=255&d,h+1};Te.prototype.writeInt16LE=function(d,h,n){return d=+d,h>>>=0,n||Hq(this,d,h,2,32767,-32768),this[h]=255&d,this[h+1]=d>>>8,h+2};Te.prototype.writeInt16BE=function(d,h,n){return d=+d,h>>>=0,n||Hq(this,d,h,2,32767,-32768),this[h]=d>>>8,this[h+1]=255&d,h+2};Te.prototype.writeInt32LE=function(d,h,n){return d=
+d,h>>>=0,n||Hq(this,d,h,4,2147483647,-2147483648),this[h]=255&d,this[h+1]=d>>>8,this[h+2]=d>>>16,this[h+3]=d>>>24,h+4};Te.prototype.writeInt32BE=function(d,h,n){return d=+d,h>>>=0,n||Hq(this,d,h,4,2147483647,-2147483648),0>d&&(d=4294967295+d+1),this[h]=d>>>24,this[h+1]=d>>>16,this[h+2]=d>>>8,this[h+3]=255&d,h+4};Te.prototype.writeFloatLE=function(d,h,n){return g4(this,d,h,!0,n)};Te.prototype.writeFloatBE=function(d,h,n){return g4(this,d,h,!1,n)};Te.prototype.writeDoubleLE=function(d,h,n){return h4(this,
d,h,!0,n)};Te.prototype.writeDoubleBE=function(d,h,n){return h4(this,d,h,!1,n)};Te.prototype.copy=function(d,h,n,b){if(!Te.isBuffer(d))throw new TypeError("argument should be a Buffer");if((n||(n=0),b||0===b||(b=this.length),h>=d.length&&(h=d.length),h||(h=0),0<b&&b<n&&(b=n),b===n)||0===d.length||0===this.length)return 0;if(0>h)throw new RangeError("targetStart out of bounds");if(0>n||n>=this.length)throw new RangeError("Index out of range");if(0>b)throw new RangeError("sourceEnd out of bounds");
b>this.length&&(b=this.length);d.length-h<b-n&&(b=d.length-h+n);var e=b-n;if(this===d&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(h,n,b);else if(this===d&&n<h&&h<b)for(b=e-1;0<=b;--b)d[b+h]=this[b+n];else Uint8Array.prototype.set.call(d,this.subarray(n,b),h);return e};Te.prototype.fill=function(d,h,n,b){if("string"==typeof d){if("string"==typeof h?(b=h,h=0,n=this.length):"string"==typeof n&&(b=n,n=this.length),void 0!==b&&"string"!=typeof b)throw new TypeError("encoding must be a string");
if("string"==typeof b&&!Te.isEncoding(b))throw new TypeError("Unknown encoding: "+b);if(1===d.length){var e=d.charCodeAt(0);("utf8"===b&&128>e||"latin1"===b)&&(d=e)}}else"number"==typeof d?d&=255:"boolean"==typeof d&&(d=Number(d));if(0>h||this.length<h||this.length<n)throw new RangeError("Out of range index");if(n<=h)return this;if(h>>>=0,n=void 0===n?this.length:n>>>0,d||(d=0),"number"==typeof d)for(b=h;b<n;++b)this[b]=d;else{e=Te.isBuffer(d)?d:Te.from(d,b);var l=e.length;if(0===l)throw new TypeError('The value "'+
d+'" is invalid for argument "value"');for(b=0;b<n-h;++b)this[b+h]=e[b%l]}return this};var aja=/[^+/0-9A-Za-z-_]/g,$ia=function(){for(var d=Array(256),h=0;16>h;++h)for(var n=16*h,b=0;16>b;++b)d[n+b]="0123456789abcdef"[h]+"0123456789abcdef"[b];return d}(),AP={},BP=oi,iw=BP.Buffer;iw.from&&iw.alloc&&iw.allocUnsafe&&iw.allocUnsafeSlow?AP=BP:(i4(BP,AP),AP.Buffer=aC);aC.prototype=Object.create(iw.prototype);i4(iw,aC);aC.from=function(d,h,n){if("number"==typeof d)throw new TypeError("Argument must not be a number");
return iw(d,h,n)};aC.alloc=function(d,h,n){if("number"!=typeof d)throw new TypeError("Argument must be a number");d=iw(d);return void 0!==h?"string"==typeof n?d.fill(h,n):d.fill(h):d.fill(0),d};aC.allocUnsafe=function(d){if("number"!=typeof d)throw new TypeError("Argument must be a number");return iw(d)};aC.allocUnsafeSlow=function(d){if("number"!=typeof d)throw new TypeError("Argument must be a number");return BP.SlowBuffer(d)};var Aj=AP,IE={},NT=Aj.Buffer,j4=NT.isEncoding||function(d){switch((d=
""+d)&&d.toLowerCase()){case "hex":case "utf8":case "utf-8":case "ascii":case "binary":case "base64":case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":case "raw":return!0;default:return!1}};IE.StringDecoder=BH;BH.prototype.write=function(d){if(0===d.length)return"";var h;if(this.lastNeed){if(void 0===(h=this.fillLast(d)))return"";var n=this.lastNeed;this.lastNeed=0}else n=0;return n<d.length?h?h+this.text(d,n):this.text(d,n):h||""};BH.prototype.end=function(d){d=d&&d.length?this.write(d):"";
return this.lastNeed?d+"\ufffd":d};BH.prototype.text=function(d,h){var n=d.length-1;if(n<h)n=0;else{var b=OT(d[n]);n=0<=b?(0<b&&(this.lastNeed=b-1),b):--n<h||-2===b?0:0<=(b=OT(d[n]))?(0<b&&(this.lastNeed=b-2),b):--n<h||-2===b?0:0<=(b=OT(d[n]))?(0<b&&(2===b?b=0:this.lastNeed=b-3),b):0}if(!this.lastNeed)return d.toString("utf8",h);this.lastTotal=n;b=d.length-(n-this.lastNeed);return d.copy(this.lastChar,0,b),d.toString("utf8",h,b)};BH.prototype.fillLast=function(d){if(this.lastNeed<=d.length)return d.copy(this.lastChar,
this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);d.copy(this.lastChar,this.lastTotal-this.lastNeed,0,d.length);this.lastNeed-=d.length};var yM=jw.EventEmitter,uu={},k4={};Js("ERR_INVALID_OPT_VALUE",function(d,h){return'The value "'+h+'" is invalid for option "'+d+'"'},TypeError);Js("ERR_INVALID_ARG_TYPE",function(d,h,n){var b;d=("string"==typeof h&&"not "===h.substr(0,4)?(b="must not be",h=h.replace(/^not /,"")):b="must be",function(e,l,a){return(void 0===
a||a>e.length)&&(a=e.length),e.substring(a-l.length,a)===l}(d," argument"))?"The "+d+" "+b+" "+l4(h,"type"):'The "'+d+'" '+(function(e,l,a){return"number"!=typeof a&&(a=0),!(a+l.length>e.length)&&-1!==e.indexOf(l,a)}(d,".")?"property":"argument")+" "+b+" "+l4(h,"type");return d+=". Received type "+typeof n,d},TypeError);Js("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF");Js("ERR_METHOD_NOT_IMPLEMENTED",function(d){return"The "+d+" method is not implemented"});Js("ERR_STREAM_PREMATURE_CLOSE",
"Premature close");Js("ERR_STREAM_DESTROYED",function(d){return"Cannot call "+d+" after a stream was destroyed"});Js("ERR_MULTIPLE_CALLBACK","Callback called multiple times");Js("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable");Js("ERR_STREAM_WRITE_AFTER_END","write after end");Js("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);Js("ERR_UNKNOWN_ENCODING",function(d){return"Unknown encoding: "+d},TypeError);Js("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event");
uu.codes=k4;var t4=function(){throw Error("Readable.from is not available in the browser");},QT="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,v4=function(d,h){if(PT("noDeprecation"))return d;var n=!1;return function(){if(!n){if(PT("throwDeprecation"))throw Error(h);PT("traceDeprecation")?console.trace(h):console.warn(h);n=!0}return d.apply(this||QT,arguments)}},CP=oi.Buffer,iY=$h.inspect,qsa=iY&&iY.custom||"inspect",nja=function(){function d(){if(!(this instanceof
d))throw new TypeError("Cannot call a class as a function");!0;this.tail=this.head=null;this.length=0}var h;return h=[{key:"push",value:function(n){n={data:n,next:null};0<this.length?this.tail.next=n:this.head=n;this.tail=n;++this.length}},{key:"unshift",value:function(n){n={data:n,next:this.head};0===this.length&&(this.tail=n);this.head=n;++this.length}},{key:"shift",value:function(){if(0!==this.length){var n=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,
--this.length,n}}},{key:"clear",value:function(){this.head=this.tail=null;this.length=0}},{key:"join",value:function(n){if(0===this.length)return"";for(var b=this.head,e=""+b.data;b=b.next;)e+=n+b.data;return e}},{key:"concat",value:function(n){if(0===this.length)return CP.alloc(0);for(var b,e,l=CP.allocUnsafe(n>>>0),a=this.head,f=0;a;)n=a.data,b=l,e=f,void CP.prototype.copy.call(n,b,e),f+=a.data.length,a=a.next;return l}},{key:"consume",value:function(n,b){var e;return n<this.head.data.length?(e=
this.head.data.slice(0,n),this.head.data=this.head.data.slice(n)):e=n===this.head.data.length?this.shift():b?this._getString(n):this._getBuffer(n),e}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(n){var b=this.head,e=1,l=b.data;for(n-=l.length;b=b.next;){var a=b.data,f=n>a.length?a.length:n;if(f===a.length?l+=a:l+=a.slice(0,n),0==(n-=f)){f===a.length?(++e,b.next?this.head=b.next:this.head=this.tail=null):(this.head=b,b.data=a.slice(f));break}++e}return this.length-=
e,l}},{key:"_getBuffer",value:function(n){var b=CP.allocUnsafe(n),e=this.head,l=1;e.data.copy(b);for(n-=e.data.length;e=e.next;){var a=e.data,f=n>a.length?a.length:n;if(a.copy(b,b.length-n,0,f),0==(n-=f)){f===a.length?(++l,e.next?this.head=e.next:this.head=this.tail=null):(this.head=e,e.data=a.slice(f));break}++l}return this.length-=l,b}},{key:qsa,value:function(n,b){return iY(this,function(e){for(var l=1;l<arguments.length;l++){var a=null!=arguments[l]?arguments[l]:{};l%2?m4(Object(a),!0).forEach(function(f){var m=
a[f];f in e?Object.defineProperty(e,f,{value:m,enumerable:!0,configurable:!0,writable:!0}):e[f]=m}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):m4(Object(a)).forEach(function(f){Object.defineProperty(e,f,Object.getOwnPropertyDescriptor(a,f))})}return e}({},b,{depth:0,customInspect:!1}))}}],ija(d.prototype,h),d}(),YC=mj,r4={destroy:function(d,h){var n=this,b=this._writableState&&this._writableState.destroyed;return this._readableState&&this._readableState.destroyed||
b?(h?h(d):d&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,YC.nextTick(RT,this,d)):YC.nextTick(RT,this,d)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(d||null,function(e){!h&&e?n._writableState?n._writableState.errorEmitted?YC.nextTick(xM,n):(n._writableState.errorEmitted=!0,YC.nextTick(n4,n,e)):YC.nextTick(n4,n,e):h?(YC.nextTick(xM,n),h(e)):YC.nextTick(xM,n)}),this)},
undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1);this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(d,h){var n=d._readableState,b=d._writableState;n&&n.autoDestroy||
b&&b.autoDestroy?d.destroy(h):d.emit("error",h)}},rsa=uu.codes.ERR_INVALID_OPT_VALUE,s4={getHighWaterMark:function(d,h,n,b){h=null!=h.highWaterMark?h.highWaterMark:b?h[n]:null;if(null!=h){if(!isFinite(h)||Math.floor(h)!==h||0>h)throw new rsa(b?n:"highWaterMark",h);return Math.floor(h)}return d.objectMode?16:16384}},Uaa=uu.codes.ERR_STREAM_PREMATURE_CLOSE,jY,o4=mj,ssa=function e(h,n,b){if("function"==typeof n)return e(h,null,n);n||(n={});b=function(I){var J=!1;return function(){if(!J){J=!0;for(var P=
arguments.length,N=Array(P),Y=0;Y<P;Y++)N[Y]=arguments[Y];I.apply(this,N)}}}(b||jja);var l=n.readable||!1!==n.readable&&h.readable,a=n.writable||!1!==n.writable&&h.writable,f=function(){h.writable||r()},m=h._writableState&&h._writableState.finished,r=function(){a=!1;m=!0;l||b.call(h)},v=h._readableState&&h._readableState.endEmitted,x=function(){l=!1;v=!0;a||b.call(h)},y=function(I){b.call(h,I)},E=function(){var I;return l&&!v?(h._readableState&&h._readableState.ended||(I=new Uaa),b.call(h,I)):a&&
!m?(h._writableState&&h._writableState.ended||(I=new Uaa),b.call(h,I)):void 0},F=function(){h.req.on("finish",r)};return h.setHeader&&"function"==typeof h.abort?(h.on("complete",r),h.on("abort",E),h.req?F():h.on("request",F)):a&&!h._writableState&&(h.on("end",f),h.on("close",f)),h.on("end",x),h.on("finish",r),!1!==n.error&&h.on("error",y),h.on("close",E),function(){h.removeListener("complete",r);h.removeListener("abort",E);h.removeListener("request",F);h.req&&h.req.removeListener("finish",r);h.removeListener("end",
f);h.removeListener("close",f);h.removeListener("finish",r);h.removeListener("end",x);h.removeListener("error",y);h.removeListener("close",E)}},Tz=Symbol("lastResolve"),dC=Symbol("lastReject"),gJ=Symbol("error"),DP=Symbol("ended"),cC=Symbol("lastPromise"),kY=Symbol("handlePromise"),bC=Symbol("stream"),tsa=Object.getPrototypeOf(function(){}),usa=Object.setPrototypeOf((Rz(jY={get stream(){return this[bC]},next:function(){var h=this,n=this[gJ];if(null!==n)return Promise.reject(n);if(this[DP])return Promise.resolve(Sz(void 0,
!0));if(this[bC].destroyed)return new Promise(function(b,e){o4.nextTick(function(){h[gJ]?e(h[gJ]):b(Sz(void 0,!0))})});if(n=this[cC])n=new Promise(function(b,e){return function(l,a){b.then(function(){if(e[DP])return l(Sz(void 0,!0)),void 0;e[kY](l,a)},a)}}(n,this));else{n=this[bC].read();if(null!==n)return Promise.resolve(Sz(n,!1));n=new Promise(this[kY])}return this[cC]=n,n}},Symbol.asyncIterator,function(){return this}),Rz(jY,"return",function(){var h=this;return new Promise(function(n,b){h[bC].destroy(null,
function(e){if(e)return b(e),void 0;n(Sz(void 0,!0))})})}),jY),tsa),oja=function(h){var n,b=Object.create(usa,(Rz(n={},bC,{value:h,writable:!0}),Rz(n,Tz,{value:null,writable:!0}),Rz(n,dC,{value:null,writable:!0}),Rz(n,gJ,{value:null,writable:!0}),Rz(n,DP,{value:h._readableState.endEmitted,writable:!0}),Rz(n,kY,{value:function(e,l){var a=b[bC].read();a?(b[cC]=null,b[Tz]=null,b[dC]=null,e(Sz(a,!1))):(b[Tz]=e,b[dC]=l)},writable:!0}),n));return b[cC]=null,ssa(h,function(e){if(e&&"ERR_STREAM_PREMATURE_CLOSE"!==
e.code){var l=b[dC];return null!==l&&(b[cC]=null,b[Tz]=null,b[dC]=null,l(e)),b[gJ]=e,void 0}e=b[Tz];null!==e&&(b[cC]=null,b[Tz]=null,b[dC]=null,e(Sz(void 0,!0)));b[DP]=!0}),h.on("readable",lja.bind(null,b)),b},ST={},q4=!1,mja="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,TT={},u4=!1,qja="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,UT={},w4=!1,vsa=p4(),Vaa=uu.codes.ERR_STREAM_PREMATURE_CLOSE,$T=function l(n,b,e){if("function"==typeof b)return l(n,
null,b);b||(b={});e=function(J){var P=!1;return function(){if(!P){P=!0;for(var N=arguments.length,Y=Array(N),W=0;W<N;W++)Y[W]=arguments[W];J.apply(this,Y)}}}(e||rja);var a=b.readable||!1!==b.readable&&n.readable,f=b.writable||!1!==b.writable&&n.writable,m=function(){n.writable||v()},r=n._writableState&&n._writableState.finished,v=function(){f=!1;r=!0;a||e.call(n)},x=n._readableState&&n._readableState.endEmitted,y=function(){a=!1;x=!0;f||e.call(n)},E=function(J){e.call(n,J)},F=function(){var J;return a&&
!x?(n._readableState&&n._readableState.ended||(J=new Vaa),e.call(n,J)):f&&!r?(n._writableState&&n._writableState.ended||(J=new Vaa),e.call(n,J)):void 0},I=function(){n.req.on("finish",v)};return n.setHeader&&"function"==typeof n.abort?(n.on("complete",v),n.on("abort",F),n.req?I():n.on("request",I)):f&&!n._writableState&&(n.on("end",m),n.on("close",m)),n.on("end",y),n.on("finish",v),!1!==b.error&&n.on("error",E),n.on("close",F),function(){n.removeListener("complete",v);n.removeListener("abort",F);
n.removeListener("request",I);n.req&&n.req.removeListener("finish",v);n.removeListener("end",m);n.removeListener("close",m);n.removeListener("finish",v);n.removeListener("end",y);n.removeListener("error",E);n.removeListener("close",F)}},EP=oi.Buffer,lY=$h.inspect,wsa=lY&&lY.custom||"inspect",xja=function(){function n(){if(!(this instanceof n))throw new TypeError("Cannot call a class as a function");!0;this.tail=this.head=null;this.length=0}var b;return b=[{key:"push",value:function(e){e={data:e,next:null};
0<this.length?this.tail.next=e:this.head=e;this.tail=e;++this.length}},{key:"unshift",value:function(e){e={data:e,next:this.head};0===this.length&&(this.tail=e);this.head=e;++this.length}},{key:"shift",value:function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}}},{key:"clear",value:function(){this.head=this.tail=null;this.length=0}},{key:"join",value:function(e){if(0===this.length)return"";for(var l=this.head,
a=""+l.data;l=l.next;)a+=e+l.data;return a}},{key:"concat",value:function(e){if(0===this.length)return EP.alloc(0);for(var l,a,f=EP.allocUnsafe(e>>>0),m=this.head,r=0;m;)e=m.data,l=f,a=r,void EP.prototype.copy.call(e,l,a),r+=m.data.length,m=m.next;return f}},{key:"consume",value:function(e,l){var a;return e<this.head.data.length?(a=this.head.data.slice(0,e),this.head.data=this.head.data.slice(e)):a=e===this.head.data.length?this.shift():l?this._getString(e):this._getBuffer(e),a}},{key:"first",value:function(){return this.head.data}},
{key:"_getString",value:function(e){var l=this.head,a=1,f=l.data;for(e-=f.length;l=l.next;){var m=l.data,r=e>m.length?m.length:e;if(r===m.length?f+=m:f+=m.slice(0,e),0==(e-=r)){r===m.length?(++a,l.next?this.head=l.next:this.head=this.tail=null):(this.head=l,l.data=m.slice(r));break}++a}return this.length-=a,f}},{key:"_getBuffer",value:function(e){var l=EP.allocUnsafe(e),a=this.head,f=1;a.data.copy(l);for(e-=a.data.length;a=a.next;){var m=a.data,r=e>m.length?m.length:e;if(m.copy(l,l.length-e,0,r),
0==(e-=r)){r===m.length?(++f,a.next?this.head=a.next:this.head=this.tail=null):(this.head=a,a.data=m.slice(r));break}++f}return this.length-=f,l}},{key:wsa,value:function(e,l){return lY(this,function(a){for(var f=1;f<arguments.length;f++){var m=null!=arguments[f]?arguments[f]:{};f%2?x4(Object(m),!0).forEach(function(r){var v=m[r];r in a?Object.defineProperty(a,r,{value:v,enumerable:!0,configurable:!0,writable:!0}):a[r]=v}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(m)):
x4(Object(m)).forEach(function(r){Object.defineProperty(a,r,Object.getOwnPropertyDescriptor(m,r))})}return a}({},l,{depth:0,customInspect:!1}))}}],sja(n.prototype,b),n}(),ZC=mj,B4={destroy:function(n,b){var e=this,l=this._writableState&&this._writableState.destroyed;return this._readableState&&this._readableState.destroyed||l?(b?b(n):n&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,ZC.nextTick(VT,this,n)):ZC.nextTick(VT,this,n)),this):(this._readableState&&
(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(n||null,function(a){!b&&a?e._writableState?e._writableState.errorEmitted?ZC.nextTick(zM,e):(e._writableState.errorEmitted=!0,ZC.nextTick(y4,e,a)):ZC.nextTick(y4,e,a):b?(ZC.nextTick(zM,e),b(a)):ZC.nextTick(zM,e)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1);this._writableState&&
(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(n,b){var e=n._readableState,l=n._writableState;e&&e.autoDestroy||l&&l.autoDestroy?n.destroy(b):n.emit("error",b)}},xsa=uu.codes.ERR_INVALID_OPT_VALUE,mY,C4={getHighWaterMark:function(n,b,e,l){b=null!=b.highWaterMark?b.highWaterMark:l?b[e]:null;
if(null!=b){if(!isFinite(b)||Math.floor(b)!==b||0>b)throw new xsa(l?e:"highWaterMark",b);return Math.floor(b)}return n.objectMode?16:16384}},z4=mj,ysa=$T,Wz=Symbol("lastResolve"),gC=Symbol("lastReject"),hJ=Symbol("error"),FP=Symbol("ended"),fC=Symbol("lastPromise"),nY=Symbol("handlePromise"),eC=Symbol("stream"),zsa=Object.getPrototypeOf(function(){}),Asa=Object.setPrototypeOf((Uz(mY={get stream(){return this[eC]},next:function(){var n=this,b=this[hJ];if(null!==b)return Promise.reject(b);if(this[FP])return Promise.resolve(Vz(void 0,
!0));if(this[eC].destroyed)return new Promise(function(e,l){z4.nextTick(function(){n[hJ]?l(n[hJ]):e(Vz(void 0,!0))})});if(b=this[fC])b=new Promise(function(e,l){return function(a,f){e.then(function(){if(l[FP])return a(Vz(void 0,!0)),void 0;l[nY](a,f)},f)}}(b,this));else{b=this[eC].read();if(null!==b)return Promise.resolve(Vz(b,!1));b=new Promise(this[nY])}return this[fC]=b,b}},Symbol.asyncIterator,function(){return this}),Uz(mY,"return",function(){var n=this;return new Promise(function(b,e){n[eC].destroy(null,
function(l){if(l)return e(l),void 0;b(Vz(void 0,!0))})})}),mY),zsa),yja=function(n){var b,e=Object.create(Asa,(Uz(b={},eC,{value:n,writable:!0}),Uz(b,Wz,{value:null,writable:!0}),Uz(b,gC,{value:null,writable:!0}),Uz(b,hJ,{value:null,writable:!0}),Uz(b,FP,{value:n._readableState.endEmitted,writable:!0}),Uz(b,nY,{value:function(l,a){var f=e[eC].read();f?(e[fC]=null,e[Wz]=null,e[gC]=null,l(Vz(f,!1))):(e[Wz]=l,e[gC]=a)},writable:!0}),b));return e[fC]=null,ysa(n,function(l){if(l&&"ERR_STREAM_PREMATURE_CLOSE"!==
l.code){var a=e[gC];return null!==a&&(e[fC]=null,e[Wz]=null,e[gC]=null,a(l)),e[hJ]=l,void 0}l=e[Wz];null!==l&&(e[fC]=null,e[Wz]=null,e[gC]=null,l(Vz(void 0,!0)));e[FP]=!0}),n.on("readable",uja.bind(null,e)),e},WT={},A4=!1,wja="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,XT={},E4=!1,zja="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,YT={},F4=!1,Bsa=D4(),Waa=CH(),GP=uu.codes,Csa=GP.ERR_METHOD_NOT_IMPLEMENTED,Bja=GP.ERR_MULTIPLE_CALLBACK,
Eja=GP.ERR_TRANSFORM_ALREADY_TRANSFORMING,Dja=GP.ERR_TRANSFORM_WITH_LENGTH_0,BM=Waa;zi(kw,BM);kw.prototype.push=function(n,b){return this._transformState.needTransform=!1,BM.prototype.push.call(this,n,b)};kw.prototype._transform=function(n,b,e){e(new Csa("_transform()"))};kw.prototype._write=function(n,b,e){var l=this._transformState;(l.writecb=e,l.writechunk=n,l.writeencoding=b,l.transforming)||(n=this._readableState,(l.needTransform||n.needReadable||n.length<n.highWaterMark)&&this._read(n.highWaterMark))};
kw.prototype._read=function(n){n=this._transformState;null===n.writechunk||n.transforming?n.needTransform=!0:(n.transforming=!0,this._transform(n.writechunk,n.writeencoding,n.afterTransform))};kw.prototype._destroy=function(n,b){BM.prototype._destroy.call(this,n,function(e){b(e)})};var H4=kw;zi(DH,H4);DH.prototype._transform=function(n,b,e){e(null,n)};var ZT,Xaa=uu.codes,Dsa=Xaa.ERR_MISSING_ARGS,Gja=Xaa.ERR_STREAM_DESTROYED,bU="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:
global,aU=jw.EventEmitter;zi(Ks,aU);Ks.Readable=vsa;Ks.Writable=Bsa;Ks.Duplex=Waa;Ks.Transform=kw;Ks.PassThrough=DH;Ks.finished=$T;Ks.pipeline=function(){for(var n=arguments.length,b=Array(n),e=0;e<n;e++)b[e]=arguments[e];var l,a=b.length?"function"!=typeof b[b.length-1]?I4:b.pop():I4;if(Array.isArray(b[0])&&(b=b[0]),2>b.length)throw new Dsa("streams");var f=b.map(function(m,r){var v=r<b.length-1;return Fja(m,v,0<r,function(x){l||(l=x);x&&f.forEach(J4);v||(f.forEach(J4),a(l))})});return b.reduce(Hja)};
Ks.Stream=Ks;Ks.prototype.pipe=function(n,b){function e(y){n.writable&&!1===n.write(y)&&v.pause&&v.pause()}function l(){v.readable&&v.resume&&v.resume()}function a(){x||(x=!0,n.end())}function f(){x||(x=!0,"function"==typeof n.destroy&&n.destroy())}function m(y){if(r(),0===aU.listenerCount(this||bU,"error"))throw y;}function r(){v.removeListener("data",e);n.removeListener("drain",l);v.removeListener("end",a);v.removeListener("close",f);v.removeListener("error",m);n.removeListener("error",m);v.removeListener("end",
r);v.removeListener("close",r);n.removeListener("close",r)}var v=this||bU;v.on("data",e);n.on("drain",l);n._isStdio||b&&!1===b.end||(v.on("end",a),v.on("close",f));var x=!1;return v.on("error",m),n.on("error",m),v.on("end",r),v.on("close",r),n.on("close",r),n.emit("pipe",v),n};var tC=Ks,HP="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,mC={},MF=function(n){if(Object.keys)return Object.keys(n);var b=[],e;for(e in n)b.push(e);return b},$C=function(n,b){if(n.forEach)return n.forEach(b);
for(var e=0;e<n.length;e++)b(n[e],e,n)},Esa=function(){try{return Object.defineProperty({},"_",{}),function(n,b,e){Object.defineProperty(n,b,{writable:!0,enumerable:!1,configurable:!0,value:e})}}catch(n){return function(b,e,l){b[e]=l}}}(),Yaa="Array Boolean Date Error EvalError Function Infinity JSON Math NaN Number Object RangeError ReferenceError RegExp String SyntaxError TypeError URIError decodeURI decodeURIComponent encodeURI encodeURIComponent escape eval isFinite isNaN parseFloat parseInt undefined unescape".split(" ");
CM.prototype={};var Qw=mC.Script=function(n){if(!((this||HP)instanceof Qw))return new Qw(n);(this||HP).code=n};Qw.prototype.runInContext=function(n){if(!(n instanceof CM))throw new TypeError("needs a 'context' argument.");var b=document.createElement("iframe");b.style||(b.style={});b.style.display="none";document.body.appendChild(b);var e=b.contentWindow,l=e.eval,a=e.execScript;!l&&a&&(a.call(e,"null"),l=e.eval);$C(MF(n),function(m){e[m]=n[m]});$C(Yaa,function(m){n[m]&&(e[m]=n[m])});var f=MF(e);l=
l.call(e,(this||HP).code);return $C(MF(e),function(m){var r;if(!(r=m in n)){a:if(f.indexOf)r=f.indexOf(m);else{for(r=0;r<f.length;r++)if(f[r]===m)break a;r=-1}r=-1===r}r&&(n[m]=e[m])}),$C(Yaa,function(m){m in n||Esa(n,m,e[m])}),document.body.removeChild(b),l};Qw.prototype.runInThisContext=function(){return eval((this||HP).code)};Qw.prototype.runInNewContext=function(n){var b=Qw.createContext(n),e=this.runInContext(b);return n&&$C(MF(b),function(l){n[l]=b[l]}),e};$C(MF(Qw.prototype),function(n){mC[n]=
Qw[n]=function(b){var e=Qw(b);return e[n].apply(e,[].slice.call(arguments,1))}});mC.isContext=function(n){return n instanceof CM};mC.createScript=function(n){return mC.Script(n)};mC.createContext=Qw.createContext=function(n){var b=new CM;return"object"==typeof n&&$C(MF(n),function(e){b[e]=n[e]}),b};var Zaa="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,Fsa=mj,Gsa=Aj.Buffer,IP=Zaa.crypto||Zaa.msCrypto,FA=IP&&IP.getRandomValues?function(n,b){if(4294967295<n)throw new RangeError("requested too many random bytes");
var e=Gsa.allocUnsafe(n);if(0<n)if(65536<n)for(var l=0;l<n;l+=65536)IP.getRandomValues(e.slice(l,l+65536));else IP.getRandomValues(e);return"function"==typeof b?Fsa.nextTick(function(){b(null,e)}):e}:function(){throw Error("Secure random number generation is not supported by this browser.\nUse Chrome, Firefox or Internet Explorer 11");},DM=Aj.Buffer,K4=tC.Transform;zi(cy,K4);cy.prototype._transform=function(n,b,e){var l=null;try{this.update(n,b)}catch(a){l=a}e(l)};cy.prototype._flush=function(n){var b=
null;try{this.push(this.digest())}catch(e){b=e}n(b)};cy.prototype.update=function(n,b){var e=n;if(!DM.isBuffer(e)&&"string"!=typeof e)throw new TypeError("Data must be a string or a buffer");if(!0,this._finalized)throw Error("Digest already called");DM.isBuffer(n)||(n=DM.from(n,b));b=this._block;for(e=0;this._blockOffset+n.length-e>=this._blockSize;){for(var l=this._blockOffset;l<this._blockSize;)b[l++]=n[e++];this._update();this._blockOffset=0}for(;e<n.length;)b[this._blockOffset++]=n[e++];b=0;for(n=
8*n.length;0<n;++b)this._length[b]+=n,0<(n=this._length[b]/4294967296|0)&&(this._length[b]-=4294967296*n);return this};cy.prototype._update=function(){throw Error("_update is not implemented");};cy.prototype.digest=function(n){if(this._finalized)throw Error("Digest already called");this._finalized=!0;var b=this._digest();void 0!==n&&(b=b.toString(n));this._block.fill(0);for(n=this._blockOffset=0;4>n;++n)this._length[n]=0;return b};cy.prototype._digest=function(){throw Error("_digest is not implemented");
};var L4=cy,Hsa=Aj.Buffer,rg=Array(16);zi(JE,L4);JE.prototype._update=function(){for(var n=0;16>n;++n)rg[n]=this._block.readInt32LE(4*n);n=this._a;var b=this._b,e=this._c,l=this._d;n=gp(n,b,e,l,rg[0],3614090360,7);l=gp(l,n,b,e,rg[1],3905402710,12);e=gp(e,l,n,b,rg[2],606105819,17);b=gp(b,e,l,n,rg[3],3250441966,22);n=gp(n,b,e,l,rg[4],4118548399,7);l=gp(l,n,b,e,rg[5],1200080426,12);e=gp(e,l,n,b,rg[6],2821735955,17);b=gp(b,e,l,n,rg[7],4249261313,22);n=gp(n,b,e,l,rg[8],1770035416,7);l=gp(l,n,b,e,rg[9],
2336552879,12);e=gp(e,l,n,b,rg[10],4294925233,17);b=gp(b,e,l,n,rg[11],2304563134,22);n=gp(n,b,e,l,rg[12],1804603682,7);l=gp(l,n,b,e,rg[13],4254626195,12);e=gp(e,l,n,b,rg[14],2792965006,17);n=hp(n,b=gp(b,e,l,n,rg[15],1236535329,22),e,l,rg[1],4129170786,5);l=hp(l,n,b,e,rg[6],3225465664,9);e=hp(e,l,n,b,rg[11],643717713,14);b=hp(b,e,l,n,rg[0],3921069994,20);n=hp(n,b,e,l,rg[5],3593408605,5);l=hp(l,n,b,e,rg[10],38016083,9);e=hp(e,l,n,b,rg[15],3634488961,14);b=hp(b,e,l,n,rg[4],3889429448,20);n=hp(n,b,e,
l,rg[9],568446438,5);l=hp(l,n,b,e,rg[14],3275163606,9);e=hp(e,l,n,b,rg[3],4107603335,14);b=hp(b,e,l,n,rg[8],1163531501,20);n=hp(n,b,e,l,rg[13],2850285829,5);l=hp(l,n,b,e,rg[2],4243563512,9);e=hp(e,l,n,b,rg[7],1735328473,14);n=ip(n,b=hp(b,e,l,n,rg[12],2368359562,20),e,l,rg[5],4294588738,4);l=ip(l,n,b,e,rg[8],2272392833,11);e=ip(e,l,n,b,rg[11],1839030562,16);b=ip(b,e,l,n,rg[14],4259657740,23);n=ip(n,b,e,l,rg[1],2763975236,4);l=ip(l,n,b,e,rg[4],1272893353,11);e=ip(e,l,n,b,rg[7],4139469664,16);b=ip(b,
e,l,n,rg[10],3200236656,23);n=ip(n,b,e,l,rg[13],681279174,4);l=ip(l,n,b,e,rg[0],3936430074,11);e=ip(e,l,n,b,rg[3],3572445317,16);b=ip(b,e,l,n,rg[6],76029189,23);n=ip(n,b,e,l,rg[9],3654602809,4);l=ip(l,n,b,e,rg[12],3873151461,11);e=ip(e,l,n,b,rg[15],530742520,16);n=jp(n,b=ip(b,e,l,n,rg[2],3299628645,23),e,l,rg[0],4096336452,6);l=jp(l,n,b,e,rg[7],1126891415,10);e=jp(e,l,n,b,rg[14],2878612391,15);b=jp(b,e,l,n,rg[5],4237533241,21);n=jp(n,b,e,l,rg[12],1700485571,6);l=jp(l,n,b,e,rg[3],2399980690,10);e=
jp(e,l,n,b,rg[10],4293915773,15);b=jp(b,e,l,n,rg[1],2240044497,21);n=jp(n,b,e,l,rg[8],1873313359,6);l=jp(l,n,b,e,rg[15],4264355552,10);e=jp(e,l,n,b,rg[6],2734768916,15);b=jp(b,e,l,n,rg[13],1309151649,21);n=jp(n,b,e,l,rg[4],4149444226,6);l=jp(l,n,b,e,rg[11],3174756917,10);e=jp(e,l,n,b,rg[2],718787259,15);b=jp(b,e,l,n,rg[9],3951481745,21);this._a=this._a+n|0;this._b=this._b+b|0;this._c=this._c+e|0;this._d=this._d+l|0};JE.prototype._digest=function(){this._block[this._blockOffset++]=128;56<this._blockOffset&&
(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0);this._block.fill(0,this._blockOffset,56);this._block.writeUInt32LE(this._length[0],56);this._block.writeUInt32LE(this._length[1],60);this._update();var n=Hsa.allocUnsafe(16);return n.writeInt32LE(this._a,0),n.writeInt32LE(this._b,4),n.writeInt32LE(this._c,8),n.writeInt32LE(this._d,12),n};var oY=oi.Buffer,M4=cy,Tu=Array(16),iJ=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,
2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],jJ=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],kJ=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],lJ=[8,
9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],mJ=[0,1518500249,1859775393,2400959708,2840853838],nJ=[1352829926,1548603684,1836072691,2053994217,0];zi(KE,M4);KE.prototype._update=function(){for(var n=0;16>n;++n)Tu[n]=this._block.readInt32LE(4*n);var b=0|this._a;n=0|this._b;for(var e=0|this._c,l=0|this._d,a=0|this._e,f=0|this._a,m=0|this._b,r=0|this._c,
v=0|this._d,x=0|this._e,y=0;80>y;y+=1){if(16>y){var E=a;E=Ls(b+(n^e^l)+Tu[iJ[y]]+mJ[0]|0,kJ[y])+E|0;b=x;var F=Ls(f+(m^(r|~v))+Tu[jJ[y]]+nJ[0]|0,lJ[y])+b|0}else 32>y?(E=a,E=Ls(b+(n&e|~n&l)+Tu[iJ[y]]+mJ[1]|0,kJ[y])+E|0,b=x,F=Ls(f+(m&v|r&~v)+Tu[jJ[y]]+nJ[1]|0,lJ[y])+b|0):48>y?(E=a,E=Ls(b+((n|~e)^l)+Tu[iJ[y]]+mJ[2]|0,kJ[y])+E|0,b=x,F=Ls(f+((m|~r)^v)+Tu[jJ[y]]+nJ[2]|0,lJ[y])+b|0):64>y?(E=a,E=Ls(b+(n&l|e&~l)+Tu[iJ[y]]+mJ[3]|0,kJ[y])+E|0,b=x,F=Ls(f+(m&r|~m&v)+Tu[jJ[y]]+nJ[3]|0,lJ[y])+b|0):(E=a,E=Ls(b+(n^
(e|~l))+Tu[iJ[y]]+mJ[4]|0,kJ[y])+E|0,b=x,F=Ls(f+(m^r^v)+Tu[jJ[y]]+nJ[4]|0,lJ[y])+b|0);b=a;a=l;l=Ls(e,10);e=n;n=E;f=x;x=v;v=Ls(r,10);r=m;m=F}e=this._b+e+v|0;this._b=this._c+l+x|0;this._c=this._d+a+f|0;this._d=this._e+b+m|0;this._e=this._a+n+r|0;this._a=e};KE.prototype._digest=function(){this._block[this._blockOffset++]=128;56<this._blockOffset&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0);this._block.fill(0,this._blockOffset,56);this._block.writeUInt32LE(this._length[0],
56);this._block.writeUInt32LE(this._length[1],60);this._update();var n=oY.alloc?oY.alloc(20):new oY(20);return n.writeInt32LE(this._a,0),n.writeInt32LE(this._b,4),n.writeInt32LE(this._c,8),n.writeInt32LE(this._d,12),n.writeInt32LE(this._e,16),n};var vl="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,N4=Aj.Buffer;dy.prototype.update=function(n,b){"string"==typeof n&&(b=b||"utf8",n=N4.from(n,b));b=(this||vl)._block;for(var e=(this||vl)._blockSize,l=n.length,a=(this||vl)._len,
f=0;f<l;){for(var m=a%e,r=Math.min(l-f,e-m),v=0;v<r;v++)b[m+v]=n[f+v];f+=r;0==(a+=r)%e&&this._update(b)}return(this||vl)._len+=l,this||vl};dy.prototype.digest=function(n){var b=(this||vl)._len%(this||vl)._blockSize;(this||vl)._block[b]=128;(this||vl)._block.fill(0,b+1);b>=(this||vl)._finalSize&&(this._update((this||vl)._block),(this||vl)._block.fill(0));b=8*(this||vl)._len;if(4294967295>=b)(this||vl)._block.writeUInt32BE(b,(this||vl)._blockSize-4);else{var e=(4294967295&b)>>>0;(this||vl)._block.writeUInt32BE((b-
e)/4294967296,(this||vl)._blockSize-8);(this||vl)._block.writeUInt32BE(e,(this||vl)._blockSize-4)}this._update((this||vl)._block);b=this._hash();return n?b.toString(n):b};dy.prototype._update=function(){throw Error("_update must be implemented by subclass");};var pi="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,O4=dy,Isa=Aj.Buffer,Jsa=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,
2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,
2428436474,2756734187,3204031479,3329325298],Ija=Array(64);zi(LE,O4);LE.prototype.init=function(){return(this||pi)._a=1779033703,(this||pi)._b=3144134277,(this||pi)._c=1013904242,(this||pi)._d=2773480762,(this||pi)._e=1359893119,(this||pi)._f=2600822924,(this||pi)._g=528734635,(this||pi)._h=1541459225,this||pi};LE.prototype._update=function(n){for(var b,e=(this||pi)._w,l=0|(this||pi)._a,a=0|(this||pi)._b,f=0|(this||pi)._c,m=0|(this||pi)._d,r=0|(this||pi)._e,v=0|(this||pi)._f,x=0|(this||pi)._g,y=0|
(this||pi)._h,E=0;16>E;++E)e[E]=n.readInt32BE(4*E);for(;64>E;++E){n=E;var F=(((b=e[E-2])>>>17|b<<15)^(b>>>19|b<<13)^b>>>10)+e[E-7],I=e[E-15];e[n]=0|F+((I>>>7|I<<25)^(I>>>18|I<<14)^I>>>3)+e[E-16]}for(b=0;64>b;++b)E=y+((r>>>6|r<<26)^(r>>>11|r<<21)^(r>>>25|r<<7))+(x^r&(v^x))+Jsa[b]+e[b]|0,n=((l>>>2|l<<30)^(l>>>13|l<<19)^(l>>>22|l<<10))+(l&a|f&(l|a))|0,y=x,x=v,v=r,r=m+E|0,m=f,f=a,a=l,l=E+n|0;(this||pi)._a=l+(this||pi)._a|0;(this||pi)._b=a+(this||pi)._b|0;(this||pi)._c=f+(this||pi)._c|0;(this||pi)._d=
m+(this||pi)._d|0;(this||pi)._e=r+(this||pi)._e|0;(this||pi)._f=v+(this||pi)._f|0;(this||pi)._g=x+(this||pi)._g|0;(this||pi)._h=y+(this||pi)._h|0};LE.prototype._hash=function(){var n=Isa.allocUnsafe(32);return n.writeInt32BE((this||pi)._a,0),n.writeInt32BE((this||pi)._b,4),n.writeInt32BE((this||pi)._c,8),n.writeInt32BE((this||pi)._d,12),n.writeInt32BE((this||pi)._e,16),n.writeInt32BE((this||pi)._f,20),n.writeInt32BE((this||pi)._g,24),n.writeInt32BE((this||pi)._h,28),n};var Mk="undefined"!=typeof globalThis?
globalThis:"undefined"!=typeof self?self:global,P4=dy,Ksa=Aj.Buffer,Lsa=[1518500249,1859775393,-1894007588,-899497514],Jja=Array(80);zi(EH,P4);EH.prototype.init=function(){return(this||Mk)._a=1732584193,(this||Mk)._b=4023233417,(this||Mk)._c=2562383102,(this||Mk)._d=271733878,(this||Mk)._e=3285377520,this||Mk};EH.prototype._update=function(n){for(var b,e=(this||Mk)._w,l=0|(this||Mk)._a,a=0|(this||Mk)._b,f=0|(this||Mk)._c,m=0|(this||Mk)._d,r=0|(this||Mk)._e,v=0;16>v;++v)e[v]=n.readInt32BE(4*v);for(;80>
v;++v)e[v]=e[v-3]^e[v-8]^e[v-14]^e[v-16];for(n=0;80>n;++n)v=~~(n/20),v=0|((b=l)<<5|b>>>27)+(0===v?a&f|~a&m:2===v?a&f|a&m|f&m:a^f^m)+r+e[n]+Lsa[v],r=m,m=f,f=a<<30|a>>>2,a=l,l=v;(this||Mk)._a=l+(this||Mk)._a|0;(this||Mk)._b=a+(this||Mk)._b|0;(this||Mk)._c=f+(this||Mk)._c|0;(this||Mk)._d=m+(this||Mk)._d|0;(this||Mk)._e=r+(this||Mk)._e|0};EH.prototype._hash=function(){var n=Ksa.allocUnsafe(20);return n.writeInt32BE(0|(this||Mk)._a,0),n.writeInt32BE(0|(this||Mk)._b,4),n.writeInt32BE(0|(this||Mk)._c,8),
n.writeInt32BE(0|(this||Mk)._d,12),n.writeInt32BE(0|(this||Mk)._e,16),n};var Nk="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,Q4=dy,Msa=Aj.Buffer,Nsa=[1518500249,1859775393,-1894007588,-899497514],Kja=Array(80);zi(FH,Q4);FH.prototype.init=function(){return(this||Nk)._a=1732584193,(this||Nk)._b=4023233417,(this||Nk)._c=2562383102,(this||Nk)._d=271733878,(this||Nk)._e=3285377520,this||Nk};FH.prototype._update=function(n){for(var b,e=(this||Nk)._w,l=0|(this||Nk)._a,a=
0|(this||Nk)._b,f=0|(this||Nk)._c,m=0|(this||Nk)._d,r=0|(this||Nk)._e,v=0;16>v;++v)e[v]=n.readInt32BE(4*v);for(;80>v;++v)e[v]=(b=e[v-3]^e[v-8]^e[v-14]^e[v-16])<<1|b>>>31;for(n=0;80>n;++n)b=~~(n/20),b=(l<<5|l>>>27)+(0===b?a&f|~a&m:2===b?a&f|a&m|f&m:a^f^m)+r+e[n]+Nsa[b]|0,r=m,m=f,f=a<<30|a>>>2,a=l,l=b;(this||Nk)._a=l+(this||Nk)._a|0;(this||Nk)._b=a+(this||Nk)._b|0;(this||Nk)._c=f+(this||Nk)._c|0;(this||Nk)._d=m+(this||Nk)._d|0;(this||Nk)._e=r+(this||Nk)._e|0};FH.prototype._hash=function(){var n=Msa.allocUnsafe(20);
return n.writeInt32BE(0|(this||Nk)._a,0),n.writeInt32BE(0|(this||Nk)._b,4),n.writeInt32BE(0|(this||Nk)._c,8),n.writeInt32BE(0|(this||Nk)._d,12),n.writeInt32BE(0|(this||Nk)._e,16),n};var Vn="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,Mja=dy,Osa=Aj.Buffer,Lja=Array(64);zi(FM,LE);FM.prototype.init=function(){return(this||Vn)._a=3238371032,(this||Vn)._b=914150663,(this||Vn)._c=812702999,(this||Vn)._d=4144912697,(this||Vn)._e=4290775857,(this||Vn)._f=1750603025,(this||
Vn)._g=1694076839,(this||Vn)._h=3204075428,this||Vn};FM.prototype._hash=function(){var n=Osa.allocUnsafe(28);return n.writeInt32BE((this||Vn)._a,0),n.writeInt32BE((this||Vn)._b,4),n.writeInt32BE((this||Vn)._c,8),n.writeInt32BE((this||Vn)._d,12),n.writeInt32BE((this||Vn)._e,16),n.writeInt32BE((this||Vn)._f,20),n.writeInt32BE((this||Vn)._g,24),n};var gf="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,R4=dy,Psa=Aj.Buffer,$aa=[1116352408,3609767458,1899447441,602891725,
3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,
766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,
506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,
587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],Nja=Array(160);zi(ME,R4);ME.prototype.init=function(){return(this||gf)._ah=1779033703,(this||gf)._bh=3144134277,(this||gf)._ch=1013904242,(this||gf)._dh=2773480762,(this||gf)._eh=1359893119,(this||gf)._fh=2600822924,(this||gf)._gh=528734635,(this||gf)._hh=1541459225,(this||gf)._al=4089235720,(this||gf)._bl=2227873595,(this||gf)._cl=4271175723,
(this||gf)._dl=1595750129,(this||gf)._el=2917565137,(this||gf)._fl=725511199,(this||gf)._gl=4215389547,(this||gf)._hl=327033209,this||gf};ME.prototype._update=function(n){for(var b=(this||gf)._w,e=0|(this||gf)._ah,l=0|(this||gf)._bh,a=0|(this||gf)._ch,f=0|(this||gf)._dh,m=0|(this||gf)._eh,r=0|(this||gf)._fh,v=0|(this||gf)._gh,x=0|(this||gf)._hh,y=0|(this||gf)._al,E=0|(this||gf)._bl,F=0|(this||gf)._cl,I=0|(this||gf)._dl,J=0|(this||gf)._el,P=0|(this||gf)._fl,N=0|(this||gf)._gl,Y=0|(this||gf)._hl,W=
0;32>W;W+=2)b[W]=n.readInt32BE(4*W),b[W+1]=n.readInt32BE(4*W+4);for(;160>W;W+=2){n=b[W-30];var da=b[W-30+1],va=(n>>>1|da<<31)^(n>>>8|da<<24)^n>>>7,za=(da>>>1|n<<31)^(da>>>8|n<<24)^(da>>>7|n<<25);var L=n=b[W-4];var Z=da=b[W-4+1];L=(L>>>19|Z<<13)^(Z>>>29|L<<3)^L>>>6;da=(da>>>19|n<<13)^(n>>>29|da<<3)^(da>>>6|n<<26);Z=b[W-32];var R=b[W-32+1];n=za+b[W-14+1]|0;va=va+b[W-14]+Wn(n,za)|0;va=(va=va+L+Wn(n=n+da|0,da)|0)+Z+Wn(n=n+R|0,R)|0;b[W]=va;b[W+1]=n}for(W=0;160>W;W+=2){va=b[W];n=b[W+1];da=e&l|a&(e|l);var X=
y&E|F&(y|E);Z=(e>>>28|y<<4)^(y>>>2|e<<30)^(y>>>7|e<<25);R=(y>>>28|e<<4)^(e>>>2|y<<30)^(e>>>7|y<<25);var ja=$aa[W],fa=$aa[W+1],ua=v^m&(r^v),gb=N^J&(P^N);za=Y+((J>>>14|m<<18)^(J>>>18|m<<14)^(m>>>9|J<<23))|0;L=x+((m>>>14|J<<18)^(m>>>18|J<<14)^(J>>>9|m<<23))+Wn(za,Y)|0;L=(L=(L=L+ua+Wn(za=za+gb|0,gb)|0)+ja+Wn(za=za+fa|0,fa)|0)+va+Wn(za=za+n|0,n)|0;n=R+X|0;va=Z+da+Wn(n,R)|0;x=v;Y=N;v=r;N=P;r=m;P=J;m=f+L+Wn(J=I+za|0,I)|0;f=a;I=F;a=l;F=E;l=e;E=y;e=L+va+Wn(y=za+n|0,za)|0}(this||gf)._al=(this||gf)._al+y|0;
(this||gf)._bl=(this||gf)._bl+E|0;(this||gf)._cl=(this||gf)._cl+F|0;(this||gf)._dl=(this||gf)._dl+I|0;(this||gf)._el=(this||gf)._el+J|0;(this||gf)._fl=(this||gf)._fl+P|0;(this||gf)._gl=(this||gf)._gl+N|0;(this||gf)._hl=(this||gf)._hl+Y|0;(this||gf)._ah=(this||gf)._ah+e+Wn((this||gf)._al,y)|0;(this||gf)._bh=(this||gf)._bh+l+Wn((this||gf)._bl,E)|0;(this||gf)._ch=(this||gf)._ch+a+Wn((this||gf)._cl,F)|0;(this||gf)._dh=(this||gf)._dh+f+Wn((this||gf)._dl,I)|0;(this||gf)._eh=(this||gf)._eh+m+Wn((this||gf)._el,
J)|0;(this||gf)._fh=(this||gf)._fh+r+Wn((this||gf)._fl,P)|0;(this||gf)._gh=(this||gf)._gh+v+Wn((this||gf)._gl,N)|0;(this||gf)._hh=(this||gf)._hh+x+Wn((this||gf)._hl,Y)|0};ME.prototype._hash=function(){function n(e,l,a){b.writeInt32BE(e,a);b.writeInt32BE(l,a+4)}var b=Psa.allocUnsafe(64);return n((this||gf)._ah,(this||gf)._al,0),n((this||gf)._bh,(this||gf)._bl,8),n((this||gf)._ch,(this||gf)._cl,16),n((this||gf)._dh,(this||gf)._dl,24),n((this||gf)._eh,(this||gf)._el,32),n((this||gf)._fh,(this||gf)._fl,
40),n((this||gf)._gh,(this||gf)._gl,48),n((this||gf)._hh,(this||gf)._hl,56),b};var kk="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,Pja=dy,Qsa=Aj.Buffer,Oja=Array(160);zi(GM,ME);GM.prototype.init=function(){return(this||kk)._ah=3418070365,(this||kk)._bh=1654270250,(this||kk)._ch=2438529370,(this||kk)._dh=355462360,(this||kk)._eh=1731405415,(this||kk)._fh=2394180231,(this||kk)._gh=3675008525,(this||kk)._hh=1203062813,(this||kk)._al=3238371032,(this||kk)._bl=914150663,
(this||kk)._cl=812702999,(this||kk)._dl=4144912697,(this||kk)._el=4290775857,(this||kk)._fl=1750603025,(this||kk)._gl=1694076839,(this||kk)._hl=3204075428,this||kk};GM.prototype._hash=function(){function n(e,l,a){b.writeInt32BE(e,a);b.writeInt32BE(l,a+4)}var b=Qsa.allocUnsafe(48);return n((this||kk)._ah,(this||kk)._al,0),n((this||kk)._bh,(this||kk)._bl,8),n((this||kk)._ch,(this||kk)._cl,16),n((this||kk)._dh,(this||kk)._dl,24),n((this||kk)._eh,(this||kk)._el,32),n((this||kk)._fh,(this||kk)._fl,40),
b};var GA,aba=GA={};(GA=aba=function(n){n=n.toLowerCase();var b=GA[n];if(!b)throw Error(n+" is not supported (we accept pull requests)");return new b}).sha=EH;GA.sha1=FH;GA.sha224=FM;GA.sha256=LE;GA.sha384=GM;GA.sha512=ME;var pY=aba,Zl="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,bba=Aj.Buffer,S4=tC.Transform,Rsa=IE.StringDecoder;zi(Xn,S4);Xn.prototype.update=function(n,b,e){"string"==typeof n&&(n=bba.from(n,b));n=this._update(n);return(this||Zl).hashMode?this||Zl:
(e&&(n=this._toString(n,e)),n)};Xn.prototype.setAutoPadding=function(){};Xn.prototype.getAuthTag=function(){throw Error("trying to get auth tag in unsupported state");};Xn.prototype.setAuthTag=function(){throw Error("trying to set auth tag in unsupported state");};Xn.prototype.setAAD=function(){throw Error("trying to set aad in unsupported state");};Xn.prototype._transform=function(n,b,e){try{(this||Zl).hashMode?this._update(n):this.push(this._update(n))}catch(a){var l=a}finally{e(l)}};Xn.prototype._flush=
function(n){try{this.push(this.__final())}catch(e){var b=e}n(b)};Xn.prototype._finalOrDigest=function(n){var b=this.__final()||bba.alloc(0);return n&&(b=this._toString(b,n,!0)),b};Xn.prototype._toString=function(n,b,e){if((this||Zl)._decoder||((this||Zl)._decoder=new Rsa(b),(this||Zl)._encoding=b),(this||Zl)._encoding!==b)throw Error("can't switch encodings");n=(this||Zl)._decoder.write(n);return e&&(n+=(this||Zl)._decoder.end()),n};var T4=Xn;zi(HM,T4);HM.prototype._update=function(n){this._hash.update(n)};
HM.prototype._final=function(){return this._hash.digest()};var oJ=function(n){return"md5"===(n=n.toLowerCase())?new JE:"rmd160"===n||"ripemd160"===n?new KE:new HM(pY(n))},cba=function(n){return(new JE).update(n).digest()},Ssa=zi,hC=Aj.Buffer,U4=Xn,Qja=hC.alloc(128);Ssa(IM,U4);IM.prototype._update=function(n){this._hash.push(n)};IM.prototype._final=function(){var n=this._alg(hC.concat(this._hash));return this._alg(hC.concat([this._opad,n]))};var Tsa=zi,V4=Xn,HH=Aj.Buffer,cU=KE,dU=pY,Rja=HH.alloc(128);
Tsa(GH,V4);GH.prototype._update=function(n){this._hash.update(n)};GH.prototype._final=function(){var n=this._hash.digest();return("rmd160"===this._alg?new cU:dU(this._alg)).update(this._opad).update(n).digest()};var dba=function(n,b){return"rmd160"===(n=n.toLowerCase())||"ripemd160"===n?new GH("rmd160",b):"md5"===n?new IM(cba,b):new GH(n,b)},eba={sha224WithRSAEncryption:{sign:"rsa",hash:"sha224",id:"302d300d06096086480165030402040500041c"},"RSA-SHA224":{sign:"ecdsa/rsa",hash:"sha224",id:"302d300d06096086480165030402040500041c"},
sha256WithRSAEncryption:{sign:"rsa",hash:"sha256",id:"3031300d060960864801650304020105000420"},"RSA-SHA256":{sign:"ecdsa/rsa",hash:"sha256",id:"3031300d060960864801650304020105000420"},sha384WithRSAEncryption:{sign:"rsa",hash:"sha384",id:"3041300d060960864801650304020205000430"},"RSA-SHA384":{sign:"ecdsa/rsa",hash:"sha384",id:"3041300d060960864801650304020205000430"},sha512WithRSAEncryption:{sign:"rsa",hash:"sha512",id:"3051300d060960864801650304020305000440"},"RSA-SHA512":{sign:"ecdsa/rsa",hash:"sha512",
id:"3051300d060960864801650304020305000440"},"RSA-SHA1":{sign:"rsa",hash:"sha1",id:"3021300906052b0e03021a05000414"},"ecdsa-with-SHA1":{sign:"ecdsa",hash:"sha1",id:""},sha256:{sign:"ecdsa",hash:"sha256",id:""},sha224:{sign:"ecdsa",hash:"sha224",id:""},sha384:{sign:"ecdsa",hash:"sha384",id:""},sha512:{sign:"ecdsa",hash:"sha512",id:""},"DSA-SHA":{sign:"dsa",hash:"sha1",id:""},"DSA-SHA1":{sign:"dsa",hash:"sha1",id:""},DSA:{sign:"dsa",hash:"sha1",id:""},"DSA-WITH-SHA224":{sign:"dsa",hash:"sha224",id:""},
"DSA-SHA224":{sign:"dsa",hash:"sha224",id:""},"DSA-WITH-SHA256":{sign:"dsa",hash:"sha256",id:""},"DSA-SHA256":{sign:"dsa",hash:"sha256",id:""},"DSA-WITH-SHA384":{sign:"dsa",hash:"sha384",id:""},"DSA-SHA384":{sign:"dsa",hash:"sha384",id:""},"DSA-WITH-SHA512":{sign:"dsa",hash:"sha512",id:""},"DSA-SHA512":{sign:"dsa",hash:"sha512",id:""},"DSA-RIPEMD160":{sign:"dsa",hash:"rmd160",id:""},ripemd160WithRSA:{sign:"rsa",hash:"rmd160",id:"3021300906052b2403020105000414"},"RSA-RIPEMD160":{sign:"rsa",hash:"rmd160",
id:"3021300906052b2403020105000414"},md5WithRSAEncryption:{sign:"rsa",hash:"md5",id:"3020300c06082a864886f70d020505000410"},"RSA-MD5":{sign:"rsa",hash:"md5",id:"3020300c06082a864886f70d020505000410"}},Sja=oi.Buffer,Usa=Math.pow(2,30)-1,qY,fba=function(n,b,e,l){if(W4(n,"Password"),W4(b,"Salt"),"number"!=typeof e)throw new TypeError("Iterations not a number");if(0>e)throw new TypeError("Bad iterations");if("number"!=typeof l)throw new TypeError("Key length not a number");if(0>l||l>Usa||l!=l)throw new TypeError("Bad key length");
},gba=mj;gba.browser?qY="utf-8":qY=6<=parseInt(gba.version.split(".")[0].slice(1),10)?"utf-8":"binary";var JP=qY,wu="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,Vja=cba,Uja=KE,Tja=pY,vu=Aj.Buffer,Wja=vu.alloc(128),JM={md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,rmd160:20,ripemd160:20};X4.prototype.run=function(n,b){return n.copy(b,(this||wu).blocksize),this.hash(b).copy((this||wu).opad,(this||wu).blocksize),this.hash((this||wu).opad)};var rY,sY=function(n,
b,e,l,a){fba(n,b,e,l);vu.isBuffer(n)||(n=vu.from(n,JP));vu.isBuffer(b)||(b=vu.from(b,JP));n=new X4(a=a||"sha1",n,b.length);var f=vu.allocUnsafe(l),m=vu.allocUnsafe(b.length+4);b.copy(m,0,0,b.length);var r=0;a=JM[a];l=Math.ceil(l/a);for(var v=1;v<=l;v++){m.writeUInt32BE(v,b.length);for(var x=n.run(m,n.ipad1),y=x,E=1;E<e;E++){y=n.run(y,n.ipad2);for(var F=0;F<a;F++)x[F]^=y[F]}x.copy(f,r);r+=a}return f},pJ="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,tY=mj,NE=Aj.Buffer,
IH=pJ.crypto&&pJ.crypto.subtle,Vsa={sha:"SHA-1","sha-1":"SHA-1",sha1:"SHA-1",sha256:"SHA-256","sha-256":"SHA-256",sha384:"SHA-384","sha-384":"SHA-384","sha-512":"SHA-512",sha512:"SHA-512"},uY=[],KP={pbkdf2:function(n,b,e,l,a,f){"function"==typeof a&&(f=a,a=void 0);var m=Vsa[(a=a||"sha1").toLowerCase()];if(!m||"function"!=typeof pJ.Promise)return tY.nextTick(function(){try{var r=sY(n,b,e,l,a)}catch(v){return f(v)}f(null,r)});if(fba(n,b,e,l),"function"!=typeof f)throw Error("No callback provided to pbkdf2");
NE.isBuffer(n)||(n=NE.from(n,JP));NE.isBuffer(b)||(b=NE.from(b,JP));(function(r,v){r.then(function(x){tY.nextTick(function(){v(null,x)})},function(x){tY.nextTick(function(){v(x)})})})(function(r){if(pJ.process&&!pJ.process.browser||!IH||!IH.importKey||!IH.deriveBits)return Promise.resolve(!1);if(void 0!==uY[r])return uY[r];var v=Y4(rY=rY||NE.alloc(8),rY,10,128,r).then(function(){return!0}).catch(function(){return!1});return uY[r]=v,v}(m).then(function(r){return r?Y4(n,b,e,l,m):sY(n,b,e,l,a)}),f)}};
KP.pbkdf2Sync=sY;Z4.equal=function(n,b,e){if(n!=b)throw Error(e||"Assertion failed: "+n+" != "+b);};var Vs=Z4,Jl={readUInt32BE:function(n,b){return(n[0+b]<<24|n[1+b]<<16|n[2+b]<<8|n[3+b])>>>0},writeUInt32BE:function(n,b,e){n[0+e]=b>>>24;n[1+e]=b>>>16&255;n[2+e]=b>>>8&255;n[3+e]=255&b},ip:function(n,b,e,l){for(var a=0,f=0,m=6;0<=m;m-=2){for(var r=0;24>=r;r+=8)a<<=1,a|=b>>>r+m&1;for(r=0;24>=r;r+=8)a<<=1,a|=n>>>r+m&1}for(m=6;0<=m;m-=2){for(r=1;25>=r;r+=8)f<<=1,f|=b>>>r+m&1;for(r=1;25>=r;r+=8)f<<=1,f|=
n>>>r+m&1}e[l+0]=a>>>0;e[l+1]=f>>>0},rip:function(n,b,e,l){for(var a=0,f=0,m=0;4>m;m++)for(var r=24;0<=r;r-=8)a<<=1,a|=b>>>r+m&1,a<<=1,a|=n>>>r+m&1;for(m=4;8>m;m++)for(r=24;0<=r;r-=8)f<<=1,f|=b>>>r+m&1,f<<=1,f|=n>>>r+m&1;e[l+0]=a>>>0;e[l+1]=f>>>0},pc1:function(n,b,e,l){for(var a=0,f=0,m=7;5<=m;m--){for(var r=0;24>=r;r+=8)a<<=1,a|=b>>r+m&1;for(r=0;24>=r;r+=8)a<<=1,a|=n>>r+m&1}for(r=0;24>=r;r+=8)a<<=1,a|=b>>r+m&1;for(m=1;3>=m;m++){for(r=0;24>=r;r+=8)f<<=1,f|=b>>r+m&1;for(r=0;24>=r;r+=8)f<<=1,f|=n>>
r+m&1}for(r=0;24>=r;r+=8)f<<=1,f|=n>>r+m&1;e[l+0]=a>>>0;e[l+1]=f>>>0},r28shl:function(n,b){return n<<b&268435455|n>>>28-b}},LP=[14,11,17,4,27,23,25,0,13,22,7,18,5,9,16,24,2,20,12,21,1,8,15,26,15,4,25,19,9,1,26,16,5,11,23,8,12,7,17,0,22,3,10,14,6,20,27,24];Jl.pc2=function(n,b,e,l){for(var a=0,f=0,m=LP.length>>>1,r=0;r<m;r++)a<<=1,a|=n>>>LP[r]&1;for(r=m;r<LP.length;r++)f<<=1,f|=b>>>LP[r]&1;e[l+0]=a>>>0;e[l+1]=f>>>0};Jl.expand=function(n,b,e){var l=0;var a=(1&n)<<5|n>>>27;for(var f=23;15<=f;f-=4)a<<=
6,a|=n>>>f&63;for(f=11;3<=f;f-=4)l|=n>>>f&63,l<<=6;b[e+0]=a>>>0;b[e+1]=(l|(31&n)<<1|n>>>31)>>>0};var hba=[14,0,4,15,13,7,1,4,2,14,15,2,11,13,8,1,3,10,10,6,6,12,12,11,5,9,9,5,0,3,7,8,4,15,1,12,14,8,8,2,13,4,6,9,2,1,11,7,15,5,12,11,9,3,7,14,3,10,10,0,5,6,0,13,15,3,1,13,8,4,14,7,6,15,11,2,3,8,4,14,9,12,7,0,2,1,13,10,12,6,0,9,5,11,10,5,0,13,14,8,7,10,11,1,10,3,4,15,13,4,1,2,5,11,8,6,12,7,6,12,9,0,3,5,2,14,15,9,10,13,0,7,9,0,14,9,6,3,3,4,15,6,5,10,1,2,13,8,12,5,7,14,11,12,4,11,2,15,8,1,13,1,6,10,4,13,
9,0,8,6,15,9,3,8,0,7,11,4,1,15,2,14,12,3,5,11,10,5,14,2,7,12,7,13,13,8,14,11,3,5,0,6,6,15,9,0,10,3,1,4,2,7,8,2,5,12,11,1,12,10,4,14,15,9,10,3,6,15,9,0,0,6,12,10,11,1,7,13,13,8,15,9,1,4,3,5,14,11,5,12,2,7,8,2,4,14,2,14,12,11,4,2,1,12,7,4,10,7,11,13,6,1,8,5,5,0,3,15,15,10,13,3,0,9,14,8,9,6,4,11,2,8,1,12,11,7,10,1,13,14,7,2,8,13,15,6,9,15,12,0,5,9,6,10,3,4,0,5,14,3,12,10,1,15,10,4,15,2,9,7,2,12,6,9,8,5,0,6,13,1,3,13,4,14,14,0,7,11,5,3,11,8,9,4,14,3,15,2,5,12,2,9,8,5,12,15,3,10,7,11,0,14,4,1,10,7,1,6,
13,0,11,8,6,13,4,13,11,0,2,11,14,7,15,4,0,9,8,1,13,10,3,14,12,3,9,5,7,12,5,2,10,15,6,8,1,6,1,6,4,11,11,13,13,8,12,1,3,4,7,10,14,7,10,9,15,5,6,0,8,15,0,14,5,2,9,3,2,12,13,1,2,15,8,13,4,8,6,10,15,3,11,7,1,4,10,12,9,5,3,6,14,11,5,0,0,14,12,9,7,2,7,2,11,1,4,14,1,7,9,4,12,10,14,8,2,13,0,15,6,12,10,9,13,0,15,3,3,5,5,6,8,11];Jl.substitute=function(n,b){for(var e=0,l=0;4>l;l++)e<<=4,e|=hba[64*l+(n>>>18-6*l&63)];for(l=0;4>l;l++)e<<=4,e|=hba[256+64*l+(b>>>18-6*l&63)];return e>>>0};var iba=[16,25,12,11,3,20,
4,15,31,17,9,6,27,14,1,22,30,24,8,18,0,5,29,23,13,19,2,26,10,21,28,7];Jl.permute=function(n){for(var b=0,e=0;e<iba.length;e++)b<<=1,b|=n>>>iba[e]&1;return b>>>0};Jl.padSplit=function(n,b,e){for(n=n.toString(2);n.length<b;)n="0"+n;for(var l=[],a=0;a<b;a+=e)l.push(n.slice(a,a+e));return l.join(" ")};var Wsa=Vs;Ar.prototype._init=function(){};Ar.prototype.update=function(n){return 0===n.length?[]:"decrypt"===this.type?this._updateDecrypt(n):this._updateEncrypt(n)};Ar.prototype._buffer=function(n,b){for(var e=
Math.min(this.buffer.length-this.bufferOff,n.length-b),l=0;l<e;l++)this.buffer[this.bufferOff+l]=n[b+l];return this.bufferOff+=e,e};Ar.prototype._flushBuffer=function(n,b){return this._update(this.buffer,0,n,b),this.bufferOff=0,this.blockSize};Ar.prototype._updateEncrypt=function(n){var b=0,e=0,l=Array(((this.bufferOff+n.length)/this.blockSize|0)*this.blockSize);0!==this.bufferOff&&(b+=this._buffer(n,b),this.bufferOff===this.buffer.length&&(e+=this._flushBuffer(l,e)));for(var a=n.length-(n.length-
b)%this.blockSize;b<a;b+=this.blockSize)this._update(n,b,l,e),e+=this.blockSize;for(;b<n.length;b++,this.bufferOff++)this.buffer[this.bufferOff]=n[b];return l};Ar.prototype._updateDecrypt=function(n){for(var b=0,e=0,l=Math.ceil((this.bufferOff+n.length)/this.blockSize)-1,a=Array(l*this.blockSize);0<l;l--)b+=this._buffer(n,b),e+=this._flushBuffer(a,e);return this._buffer(n,b),a};Ar.prototype.final=function(n){var b,e;return n&&(b=this.update(n)),e="encrypt"===this.type?this._finalEncrypt():this._finalDecrypt(),
b?b.concat(e):e};Ar.prototype._pad=function(n,b){if(0===b)return!1;for(;b<n.length;)n[b++]=0;return!0};Ar.prototype._finalEncrypt=function(){if(!this._pad(this.buffer,this.bufferOff))return[];var n=Array(this.blockSize);return this._update(this.buffer,0,n,0),n};Ar.prototype._unpad=function(n){return n};Ar.prototype._finalDecrypt=function(){Wsa.equal(this.bufferOff,this.blockSize,"Not enough data to decrypt");var n=Array(this.blockSize);return this._flushBuffer(n,0),this._unpad(n)};var jba=Vs,$4=Ar;
zi(Ms,$4);Ms.create=function(n){return new Ms(n)};var Xsa=[1,1,2,2,2,2,2,2,1,2,2,2,2,2,2,1];Ms.prototype.deriveKeys=function(n,b){n.keys=Array(32);jba.equal(b.length,this.blockSize,"Invalid key length");var e=Jl.readUInt32BE(b,0);b=Jl.readUInt32BE(b,4);Jl.pc1(e,b,n.tmp,0);e=n.tmp[0];b=n.tmp[1];for(var l=0;l<n.keys.length;l+=2){var a=Xsa[l>>>1];e=Jl.r28shl(e,a);b=Jl.r28shl(b,a);Jl.pc2(e,b,n.keys,l)}};Ms.prototype._update=function(n,b,e,l){var a=this._desState,f=Jl.readUInt32BE(n,b);n=Jl.readUInt32BE(n,
b+4);Jl.ip(f,n,a.tmp,0);f=a.tmp[0];n=a.tmp[1];"encrypt"===this.type?this._encrypt(a,f,n,a.tmp,0):this._decrypt(a,f,n,a.tmp,0);f=a.tmp[0];n=a.tmp[1];Jl.writeUInt32BE(e,f,l);Jl.writeUInt32BE(e,n,l+4)};Ms.prototype._pad=function(n,b){for(var e=n.length-b;b<n.length;b++)n[b]=e;return!0};Ms.prototype._unpad=function(n){for(var b=n[n.length-1],e=n.length-b;e<n.length;e++)jba.equal(n[e],b);return n.slice(0,n.length-b)};Ms.prototype._encrypt=function(n,b,e,l,a){for(var f=0;f<n.keys.length;f+=2){var m=n.keys[f],
r=n.keys[f+1];Jl.expand(e,n.tmp,0);m^=n.tmp[0];r^=n.tmp[1];m=Jl.substitute(m,r);r=e;e=(b^Jl.permute(m))>>>0;b=r}Jl.rip(e,b,l,a)};Ms.prototype._decrypt=function(n,b,e,l,a){for(var f=n.keys.length-2;0<=f;f-=2){var m=n.keys[f],r=n.keys[f+1];Jl.expand(e,n.tmp,0);m^=n.tmp[0];r^=n.tmp[1];m=Jl.substitute(m,r);r=e;e=(b^Jl.permute(m))>>>0;b=r}Jl.rip(e,b,l,a)};var MP={},Zja=Vs,Ysa=zi,NP={};MP.instantiate=function(n){function b(f){n.call(this,f);this._cbcInit()}Ysa(b,n);for(var e=Object.keys(NP),l=0;l<e.length;l++){var a=
e[l];b.prototype[a]=NP[a]}return b.create=function(f){return new b(f)},b};NP._cbcInit=function(){this._cbcState=new Yja(this.options.iv)};NP._update=function(n,b,e,l){var a=this.constructor.super_.prototype,f=this._cbcState.iv;if("encrypt"===this.type){for(var m=0;m<this.blockSize;m++)f[m]^=n[b+m];a._update.call(this,f,0,e,l);for(m=0;m<this.blockSize;m++)f[m]=e[l+m]}else{a._update.call(this,n,b,e,l);for(m=0;m<this.blockSize;m++)e[l+m]^=f[m];for(m=0;m<this.blockSize;m++)f[m]=n[b+m]}};var aka=Vs,a5=
Ar,Xz=Ms;zi(lw,a5);lw.create=function(n){return new lw(n)};lw.prototype._update=function(n,b,e,l){var a=this._edeState;a.ciphers[0]._update(n,b,e,l);a.ciphers[1]._update(e,l,e,l);a.ciphers[2]._update(e,l,e,l)};lw.prototype._pad=Xz.prototype._pad;lw.prototype._unpad=Xz.prototype._unpad;var LM="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,b5=Xn,Zsa=zi,iC=Aj.Buffer,JH={"des-ede3-cbc":MP.instantiate(lw),"des-ede3":lw,"des-ede-cbc":MP.instantiate(lw),"des-ede":lw,"des-cbc":MP.instantiate(Ms),
"des-ecb":Ms};JH.des=JH["des-cbc"];JH.des3=JH["des-ede3-cbc"];Zsa(KM,b5);KM.prototype._update=function(n){return iC.from((this||LM)._des.update(n))};KM.prototype._final=function(){return iC.from((this||LM)._des.final())};var $sa=oi.Buffer,NF=function(n,b){for(var e=Math.min(n.length,b.length),l=new $sa(e),a=0;a<e;++a)l[a]=n[a]^b[a];return l},kba=function(n){for(var b,e=n.length;e--;){if(255!==(b=n.readUInt8(e))){b++;n.writeUInt8(b,e);break}n.writeUInt8(0,e)}},lba={},KH=Aj.Buffer,bka=NF;lba.encrypt=
function(n,b,e){for(var l,a=KH.allocUnsafe(0);b.length;){if(0===n._cache.length&&(n._cache=n._cipher.encryptBlock(n._prev),n._prev=KH.allocUnsafe(0)),!(n._cache.length<=b.length)){a=KH.concat([a,c5(n,b,e)]);break}l=n._cache.length;a=KH.concat([a,c5(n,b.slice(0,l),e)]);b=b.slice(l)}return a};var mba={},vY=Aj.Buffer;mba.encrypt=function(n,b,e){for(var l=b.length,a=vY.allocUnsafe(l),f=-1;++f<l;){var m=f;var r=n;var v=b[f],x=e,y=r._cipher.encryptBlock(r._prev)[0]^v;r=(r._prev=vY.concat([r._prev.slice(1),
vY.from([x?v:y])]),y);a[m]=r}return a};var nba={},OP=Aj.Buffer;nba.encrypt=function(n,b,e){for(var l=b.length,a=OP.allocUnsafe(l),f=-1;++f<l;){for(var m=f,r,v,x=n,y=b[f],E=e,F=-1,I=0;8>++F;){v=y&1<<7-F?128:0;I+=(128&(r=x._cipher.encryptBlock(x._prev)[0]^v))>>F%8;var J=x,P=x._prev;r=E?v:r;v=P.length;var N=-1,Y=OP.allocUnsafe(P.length);for(P=OP.concat([P,OP.from([r])]);++N<v;)Y[N]=P[N]<<1|P[N+1]>>7;J._prev=Y}a[m]=I}return a};var oba={},ata=oi.Buffer;oba.encrypt=function(n,b){for(;n._cache.length<b.length;)n._cache=
ata.concat([n._cache,cka(n)]);var e=n._cache.slice(0,b.length);return n._cache=n._cache.slice(b.length),NF(b,e)};var wY={},pba=Aj.Buffer;wY.encrypt=function(n,b){var e=Math.ceil(b.length/16),l=n._cache.length;n._cache=pba.concat([n._cache,pba.allocUnsafe(16*e)]);for(var a=0;a<e;a++){var f=n;var m=f._cipher.encryptBlockRaw(f._prev);f=(kba(f._prev),m);m=l+16*a;n._cache.writeUInt32BE(f[0],m+0);n._cache.writeUInt32BE(f[1],m+4);n._cache.writeUInt32BE(f[2],m+8);n._cache.writeUInt32BE(f[3],m+12)}e=n._cache.slice(0,
b.length);return n._cache=n._cache.slice(b.length),NF(b,e)};var aD={"aes-128-ecb":{cipher:"AES",key:128,iv:0,mode:"ECB",type:"block"},"aes-192-ecb":{cipher:"AES",key:192,iv:0,mode:"ECB",type:"block"},"aes-256-ecb":{cipher:"AES",key:256,iv:0,mode:"ECB",type:"block"},"aes-128-cbc":{cipher:"AES",key:128,iv:16,mode:"CBC",type:"block"},"aes-192-cbc":{cipher:"AES",key:192,iv:16,mode:"CBC",type:"block"},"aes-256-cbc":{cipher:"AES",key:256,iv:16,mode:"CBC",type:"block"},aes128:{cipher:"AES",key:128,iv:16,
mode:"CBC",type:"block"},aes192:{cipher:"AES",key:192,iv:16,mode:"CBC",type:"block"},aes256:{cipher:"AES",key:256,iv:16,mode:"CBC",type:"block"},"aes-128-cfb":{cipher:"AES",key:128,iv:16,mode:"CFB",type:"stream"},"aes-192-cfb":{cipher:"AES",key:192,iv:16,mode:"CFB",type:"stream"},"aes-256-cfb":{cipher:"AES",key:256,iv:16,mode:"CFB",type:"stream"},"aes-128-cfb8":{cipher:"AES",key:128,iv:16,mode:"CFB8",type:"stream"},"aes-192-cfb8":{cipher:"AES",key:192,iv:16,mode:"CFB8",type:"stream"},"aes-256-cfb8":{cipher:"AES",
key:256,iv:16,mode:"CFB8",type:"stream"},"aes-128-cfb1":{cipher:"AES",key:128,iv:16,mode:"CFB1",type:"stream"},"aes-192-cfb1":{cipher:"AES",key:192,iv:16,mode:"CFB1",type:"stream"},"aes-256-cfb1":{cipher:"AES",key:256,iv:16,mode:"CFB1",type:"stream"},"aes-128-ofb":{cipher:"AES",key:128,iv:16,mode:"OFB",type:"stream"},"aes-192-ofb":{cipher:"AES",key:192,iv:16,mode:"OFB",type:"stream"},"aes-256-ofb":{cipher:"AES",key:256,iv:16,mode:"OFB",type:"stream"},"aes-128-ctr":{cipher:"AES",key:128,iv:16,mode:"CTR",
type:"stream"},"aes-192-ctr":{cipher:"AES",key:192,iv:16,mode:"CTR",type:"stream"},"aes-256-ctr":{cipher:"AES",key:256,iv:16,mode:"CTR",type:"stream"},"aes-128-gcm":{cipher:"AES",key:128,iv:12,mode:"GCM",type:"auth"},"aes-192-gcm":{cipher:"AES",key:192,iv:12,mode:"GCM",type:"auth"},"aes-256-gcm":{cipher:"AES",key:256,iv:12,mode:"GCM",type:"auth"}},bta={ECB:{encrypt:function(n,b){return n._cipher.encryptBlock(b)},decrypt:function(n,b){return n._cipher.decryptBlock(b)}},CBC:{encrypt:function(n,b){b=
NF(b,n._prev);return n._prev=n._cipher.encryptBlock(b),n._prev},decrypt:function(n,b){var e=n._prev;n._prev=b;n=n._cipher.decryptBlock(b);return NF(n,e)}},CFB:lba,CFB8:mba,CFB1:nba,OFB:oba,CTR:wY,GCM:wY},xY;for(xY in aD)aD[xY].module=bta[aD[xY].mode];var Os="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,qJ={},MM=Aj.Buffer,cta=[0,1,2,4,8,16,32,64,128,27,54],Ym=function(){for(var n=Array(256),b=0;256>b;b++)n[b]=128>b?b<<1:b<<1^283;b=[];for(var e=[],l=[[],[],[],[]],a=
[[],[],[],[]],f=0,m=0,r=0;256>r;++r){var v=m^m<<1^m<<2^m<<3^m<<4;v=v>>>8^255&v^99;b[f]=v;e[v]=f;var x=n[f],y=n[x],E=n[y],F=257*n[v]^16843008*v;l[0][f]=F<<24|F>>>8;l[1][f]=F<<16|F>>>16;l[2][f]=F<<8|F>>>24;l[3][f]=F;F=16843009*E^65537*y^257*x^16843008*f;a[0][v]=F<<24|F>>>8;a[1][v]=F<<16|F>>>16;a[2][v]=F<<8|F>>>24;a[3][v]=F;0===f?f=m=1:(f=x^n[n[n[E^x]]],m^=n[n[m]])}return{SBOX:b,INV_SBOX:e,SUB_MIX:l,INV_SUB_MIX:a}}();Ns.blockSize=16;Ns.keySize=32;Ns.prototype.blockSize=Ns.blockSize;Ns.prototype.keySize=
Ns.keySize;Ns.prototype._reset=function(){for(var n=(this||Os)._key,b=n.length,e=b+6,l=4*(e+1),a=[],f=0;f<b;f++)a[f]=n[f];for(f=b;f<l;f++)n=a[f-1],0==f%b?(n=n<<8|n>>>24,n=Ym.SBOX[n>>>24]<<24|Ym.SBOX[n>>>16&255]<<16|Ym.SBOX[n>>>8&255]<<8|Ym.SBOX[255&n],n^=cta[f/b|0]<<24):6<b&&4==f%b&&(n=Ym.SBOX[n>>>24]<<24|Ym.SBOX[n>>>16&255]<<16|Ym.SBOX[n>>>8&255]<<8|Ym.SBOX[255&n]),a[f]=a[f-b]^n;b=[];for(f=0;f<l;f++){n=l-f;var m=a[n-(f%4?0:4)];b[f]=4>f||4>=n?m:Ym.INV_SUB_MIX[0][Ym.SBOX[m>>>24]]^Ym.INV_SUB_MIX[1][Ym.SBOX[m>>>
16&255]]^Ym.INV_SUB_MIX[2][Ym.SBOX[m>>>8&255]]^Ym.INV_SUB_MIX[3][Ym.SBOX[255&m]]}(this||Os)._nRounds=e;(this||Os)._keySchedule=a;(this||Os)._invKeySchedule=b};Ns.prototype.encryptBlockRaw=function(n){return d5(eU(n),(this||Os)._keySchedule,Ym.SUB_MIX,Ym.SBOX,(this||Os)._nRounds)};Ns.prototype.encryptBlock=function(n){n=this.encryptBlockRaw(n);var b=MM.allocUnsafe(16);return b.writeUInt32BE(n[0],0),b.writeUInt32BE(n[1],4),b.writeUInt32BE(n[2],8),b.writeUInt32BE(n[3],12),b};Ns.prototype.decryptBlock=
function(n){var b=(n=eU(n))[1];n[1]=n[3];n[3]=b;n=d5(n,(this||Os)._invKeySchedule,Ym.INV_SUB_MIX,Ym.INV_SBOX,(this||Os)._nRounds);b=MM.allocUnsafe(16);return b.writeUInt32BE(n[0],0),b.writeUInt32BE(n[3],4),b.writeUInt32BE(n[2],8),b.writeUInt32BE(n[1],12),b};Ns.prototype.scrub=function(){fU((this||Os)._keySchedule);fU((this||Os)._invKeySchedule);fU((this||Os)._key)};qJ.AES=Ns;var Eo="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,OE=Aj.Buffer,dta=OE.alloc(16,0);LH.prototype.ghash=
function(n){for(var b=-1;++b<n.length;)(this||Eo).state[b]^=n[b];this._multiply()};LH.prototype._multiply=function(){for(var n,b,e=[(n=(this||Eo).h).readUInt32BE(0),n.readUInt32BE(4),n.readUInt32BE(8),n.readUInt32BE(12)],l=[0,0,0,0],a=-1;128>++a;){0!=((this||Eo).state[~~(a/8)]&1<<7-a%8)&&(l[0]^=e[0],l[1]^=e[1],l[2]^=e[2],l[3]^=e[3]);b=0!=(1&e[3]);for(n=3;0<n;n--)e[n]=e[n]>>>1|(1&e[n-1])<<31;e[0]>>>=1;b&&(e[0]^=-520093696)}(this||Eo).state=e5(l)};LH.prototype.update=function(n){for((this||Eo).cache=
OE.concat([(this||Eo).cache,n]);16<=(this||Eo).cache.length;)n=(this||Eo).cache.slice(0,16),(this||Eo).cache=(this||Eo).cache.slice(16),this.ghash(n)};LH.prototype.final=function(n,b){return(this||Eo).cache.length&&this.ghash(OE.concat([(this||Eo).cache,dta],16)),this.ghash(e5([0,n,0,b])),(this||Eo).state};var ai="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,dka=qJ,Iq=Aj.Buffer,f5=Xn,g5=LH,eka=kba;zi(Yz,f5);Yz.prototype._update=function(n){if(!(this||ai)._called&&
(this||ai)._alen){var b=16-(this||ai)._alen%16;16>b&&(b=Iq.alloc(b,0),(this||ai)._ghash.update(b))}(this||ai)._called=!0;b=(this||ai)._mode.encrypt(this||ai,n);return(this||ai)._decrypt?(this||ai)._ghash.update(n):(this||ai)._ghash.update(b),(this||ai)._len+=n.length,b};Yz.prototype._final=function(){if((this||ai)._decrypt&&!(this||ai)._authTag)throw Error("Unsupported state or unable to authenticate data");var n=NF((this||ai)._ghash.final(8*(this||ai)._alen,8*(this||ai)._len),(this||ai)._cipher.encryptBlock((this||
ai)._finID)),b;if(b=(this||ai)._decrypt){b=(this||ai)._authTag;var e=0;n.length!==b.length&&e++;for(var l=Math.min(n.length,b.length),a=0;a<l;++a)e+=n[a]^b[a];b=e}if(b)throw Error("Unsupported state or unable to authenticate data");(this||ai)._authTag=n;(this||ai)._cipher.scrub()};Yz.prototype.getAuthTag=function(){if((this||ai)._decrypt||!Iq.isBuffer((this||ai)._authTag))throw Error("Attempting to get auth tag in unsupported state");return(this||ai)._authTag};Yz.prototype.setAuthTag=function(n){if(!(this||
ai)._decrypt)throw Error("Attempting to set auth tag in unsupported state");(this||ai)._authTag=n};Yz.prototype.setAAD=function(n){if((this||ai)._called)throw Error("Attempting to set AAD in unsupported state");(this||ai)._ghash.update(n);(this||ai)._alen+=n.length};var xu="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,fka=qJ,gU=Aj.Buffer,h5=Xn;zi(MH,h5);MH.prototype._update=function(n){return(this||xu)._mode.encrypt(this||xu,n,(this||xu)._decrypt)};MH.prototype._final=
function(){(this||xu)._cipher.scrub()};var bD=Aj.Buffer,RH=function(n,b,e,l){if(bD.isBuffer(n)||(n=bD.from(n,"binary")),b&&(bD.isBuffer(b)||(b=bD.from(b,"binary")),8!==b.length))throw new RangeError("salt should be Buffer with 8 byte length");e/=8;for(var a=bD.alloc(e),f=bD.alloc(l||0),m=bD.alloc(0);0<e||0<l;){var r=new JE;r.update(m);r.update(n);b&&r.update(b);m=r.digest();r=0;if(0<e){var v=a.length-e;r=Math.min(e,m.length);m.copy(a,v,0,r);e-=r}r<m.length&&0<l&&(v=Math.min(l,m.length-r),m.copy(f,
f.length-l,r,r+v),l-=v)}return m.fill(0),{key:a,iv:f}},lk="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,ika=Yz,PE=Aj.Buffer,k5=aD,hka=MH,i5=Xn,gka=qJ;zi(NH,i5);NH.prototype._update=function(n){var b;(this||lk)._cache.add(n);for(n=[];b=(this||lk)._cache.get((this||lk)._autopadding);)b=(this||lk)._mode.decrypt(this||lk,b),n.push(b);return PE.concat(n)};NH.prototype._final=function(){var n=(this||lk)._cache.flush();if((this||lk)._autopadding){n=(this||lk)._mode.decrypt(this||
lk,n);var b=n[15];if(1>b||16<b)throw Error("unable to decrypt data");for(var e=-1;++e<b;)if(n[e+(16-b)]!==b)throw Error("unable to decrypt data");n=16===b?void 0:n.slice(0,16-b);return n}if(n)throw Error("data not multiple of block length");};NH.prototype.setAutoPadding=function(n){return(this||lk)._autopadding=!!n,this||lk};NM.prototype.add=function(n){(this||lk).cache=PE.concat([(this||lk).cache,n])};NM.prototype.get=function(n){var b;if(n){if(16<(this||lk).cache.length)return b=(this||lk).cache.slice(0,
16),(this||lk).cache=(this||lk).cache.slice(16),b}else if(16<=(this||lk).cache.length)return b=(this||lk).cache.slice(0,16),(this||lk).cache=(this||lk).cache.slice(16),b;return null};NM.prototype.flush=function(){if((this||lk).cache.length)return(this||lk).cache};var hl="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,n5=aD,lka=Yz,ey=Aj.Buffer,kka=MH,l5=Xn,jka=qJ;zi(OH,l5);OH.prototype._update=function(n){var b;(this||hl)._cache.add(n);for(n=[];b=(this||hl)._cache.get();)b=
(this||hl)._mode.encrypt(this||hl,b),n.push(b);return ey.concat(n)};var eta=ey.alloc(16,16);OH.prototype._final=function(){var n=(this||hl)._cache.flush();if((this||hl)._autopadding)return n=(this||hl)._mode.encrypt(this||hl,n),(this||hl)._cipher.scrub(),n;if(!n.equals(eta))throw(this||hl)._cipher.scrub(),Error("data not multiple of block length");};OH.prototype.setAutoPadding=function(n){return(this||hl)._autopadding=!!n,this||hl};OM.prototype.add=function(n){(this||hl).cache=ey.concat([(this||hl).cache,
n])};OM.prototype.get=function(){if(15<(this||hl).cache.length){var n=(this||hl).cache.slice(0,16);return(this||hl).cache=(this||hl).cache.slice(16),n}return null};OM.prototype.flush=function(){for(var n=16-(this||hl).cache.length,b=ey.allocUnsafe(n),e=-1;++e<n;)b.writeUInt8(n,e);return ey.concat([(this||hl).cache,b])};var Cr={};Cr.createCipher=Cr.Cipher=function(n,b){var e=n5[n.toLowerCase()];if(!e)throw new TypeError("invalid suite type");b=RH(b,!1,e.key,e.iv);return m5(n,b.key,b.iv)};Cr.createCipheriv=
Cr.Cipheriv=m5;Cr.createDecipher=Cr.Decipher=function(n,b){var e=k5[n.toLowerCase()];if(!e)throw new TypeError("invalid suite type");b=RH(b,!1,e.key,e.iv);return j5(n,b.key,b.iv)};Cr.createDecipheriv=Cr.Decipheriv=j5;Cr.listCiphers=Cr.getCiphers=function(){return Object.keys(aD)};var HA={"des-ecb":{key:8,iv:0}};HA["des-cbc"]=HA.des={key:8,iv:8};HA["des-ede3-cbc"]=HA.des3={key:24,iv:8};HA["des-ede3"]={key:24,iv:0};HA["des-ede-cbc"]={key:16,iv:8};HA["des-ede"]={key:16,iv:0};var qba,rba,sba,o5=KM,iU=
Cr,Zz=aD,fy=HA;var fta=qba=function(n,b){if(n=n.toLowerCase(),Zz[n]){var e=Zz[n].key;var l=Zz[n].iv}else{if(!fy[n])throw new TypeError("invalid suite type");e=8*fy[n].key;l=fy[n].iv}b=RH(b,!1,e,l);return hU(n,b.key,b.iv)};var gta=rba=function(n,b){if(n=n.toLowerCase(),Zz[n]){var e=Zz[n].key;var l=Zz[n].iv}else{if(!fy[n])throw new TypeError("invalid suite type");e=8*fy[n].key;l=fy[n].iv}b=RH(b,!1,e,l);return jU(n,b.key,b.iv)};var hta=sba=function(){return Object.keys(fy).concat(iU.getCiphers())};var ita=
Object.freeze({}),eb="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,tba={},uba={exports:tba};!function(n,b){function e(L,Z){if(!L)throw Error(Z||"Assertion failed");}function l(L,Z){L.super_=Z;var R=function(){};R.prototype=Z.prototype;L.prototype=new R;L.prototype.constructor=L}function a(L,Z,R){if(a.isBN(L))return L;(this||eb).negative=0;(this||eb).words=null;(this||eb).length=0;(this||eb).red=null;null!==L&&("le"!==Z&&"be"!==Z||(R=Z,Z=10),this._init(L||0,Z||10,R||
"be"))}function f(L,Z,R){var X=0;for(R=Math.min(L.length,R);Z<R;Z++){var ja=L.charCodeAt(Z)-48;X<<=4;X|=49<=ja&&54>=ja?ja-49+10:17<=ja&&22>=ja?ja-17+10:15&ja}return X}function m(L,Z,R,X){var ja=0;for(R=Math.min(L.length,R);Z<R;Z++){var fa=L.charCodeAt(Z)-48;ja*=X;ja+=49<=fa?fa-49+10:17<=fa?fa-17+10:fa}return ja}function r(L,Z,R){R.negative=Z.negative^L.negative;var X=L.length+Z.length|0;R.length=X;X=X-1|0;var ja=(0|L.words[0])*(0|Z.words[0]),fa=ja/67108864|0;R.words[0]=67108863&ja;for(var ua=1;ua<
X;ua++){var gb=fa>>>26;ja=67108863&fa;fa=Math.min(ua,Z.length-1);for(var hb=Math.max(0,ua-L.length+1);hb<=fa;hb++)gb+=(ja=(0|L.words[ua-hb|0])*(0|Z.words[hb])+ja)/67108864|0,ja&=67108863;R.words[ua]=0|ja;fa=0|gb}return 0!==fa?R.words[ua]=0|fa:R.length--,R.strip()}function v(L,Z){(this||eb).x=L;(this||eb).y=Z}function x(L,Z){(this||eb).name=L;(this||eb).p=new a(Z,16);(this||eb).n=(this||eb).p.bitLength();(this||eb).k=(new a(1)).iushln((this||eb).n).isub((this||eb).p);(this||eb).tmp=this._tmp()}function y(){x.call(this||
eb,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function E(){x.call(this||eb,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function F(){x.call(this||eb,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function I(){x.call(this||eb,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function J(L){"string"==typeof L?(L=a._prime(L),(this||eb).m=L.p,(this||eb).prime=L):(e(L.gtn(1),"modulus must be greater than 1"),
(this||eb).m=L,(this||eb).prime=null)}function P(L){J.call(this||eb,L);(this||eb).shift=(this||eb).m.bitLength();0!=(this||eb).shift%26&&((this||eb).shift+=26-(this||eb).shift%26);(this||eb).r=(new a(1)).iushln((this||eb).shift);(this||eb).r2=this.imod((this||eb).r.sqr());(this||eb).rinv=(this||eb).r._invmp((this||eb).m);(this||eb).minv=(this||eb).rinv.mul((this||eb).r).isubn(1).div((this||eb).m);(this||eb).minv=(this||eb).minv.umod((this||eb).r);(this||eb).minv=(this||eb).r.sub((this||eb).minv)}
"object"==typeof n?n.exports=a:b.BN=a;a.BN=a;a.wordSize=26;try{var N=ita.Buffer}catch(L){}a.isBN=function(L){return L instanceof a||null!==L&&"object"==typeof L&&L.constructor.wordSize===a.wordSize&&Array.isArray(L.words)};a.max=function(L,Z){return 0<L.cmp(Z)?L:Z};a.min=function(L,Z){return 0>L.cmp(Z)?L:Z};a.prototype._init=function(L,Z,R){if("number"==typeof L)return this._initNumber(L,Z,R);if("object"==typeof L)return this._initArray(L,Z,R);"hex"===Z&&(Z=16);e(Z===(0|Z)&&2<=Z&&36>=Z);var X=0;"-"===
(L=L.toString().replace(/\s+/g,""))[0]&&X++;16===Z?this._parseHex(L,X):this._parseBase(L,Z,X);"-"===L[0]&&((this||eb).negative=1);this.strip();"le"===R&&this._initArray(this.toArray(),Z,R)};a.prototype._initNumber=function(L,Z,R){0>L&&((this||eb).negative=1,L=-L);67108864>L?((this||eb).words=[67108863&L],(this||eb).length=1):4503599627370496>L?((this||eb).words=[67108863&L,L/67108864&67108863],(this||eb).length=2):(e(9007199254740992>L),(this||eb).words=[67108863&L,L/67108864&67108863,1],(this||eb).length=
3);"le"===R&&this._initArray(this.toArray(),Z,R)};a.prototype._initArray=function(L,Z,R){if(e("number"==typeof L.length),0>=L.length)return(this||eb).words=[0],(this||eb).length=1,this||eb;(this||eb).length=Math.ceil(L.length/3);(this||eb).words=Array((this||eb).length);for(Z=0;Z<(this||eb).length;Z++)(this||eb).words[Z]=0;var X=0;if("be"===R)for(Z=L.length-1,R=0;0<=Z;Z-=3){var ja=L[Z]|L[Z-1]<<8|L[Z-2]<<16;(this||eb).words[R]|=ja<<X&67108863;(this||eb).words[R+1]=ja>>>26-X&67108863;26<=(X+=24)&&(X-=
26,R++)}else if("le"===R)for(R=Z=0;Z<L.length;Z+=3)ja=L[Z]|L[Z+1]<<8|L[Z+2]<<16,(this||eb).words[R]|=ja<<X&67108863,(this||eb).words[R+1]=ja>>>26-X&67108863,26<=(X+=24)&&(X-=26,R++);return this.strip()};a.prototype._parseHex=function(L,Z){(this||eb).length=Math.ceil((L.length-Z)/6);(this||eb).words=Array((this||eb).length);for(var R=0;R<(this||eb).length;R++)(this||eb).words[R]=0;var X,ja=0;R=L.length-6;for(X=0;R>=Z;R-=6){var fa=f(L,R,R+6);(this||eb).words[X]|=fa<<ja&67108863;(this||eb).words[X+1]|=
fa>>>26-ja&4194303;26<=(ja+=24)&&(ja-=26,X++)}R+6!==Z&&(fa=f(L,Z,R+6),(this||eb).words[X]|=fa<<ja&67108863,(this||eb).words[X+1]|=fa>>>26-ja&4194303);this.strip()};a.prototype._parseBase=function(L,Z,R){(this||eb).words=[0];(this||eb).length=1;for(var X=0,ja=1;67108863>=ja;ja*=Z)X++;X--;ja=ja/Z|0;var fa=L.length-R,ua=fa%X;fa=Math.min(fa,fa-ua)+R;for(var gb=R;gb<fa;gb+=X)R=m(L,gb,gb+X,Z),this.imuln(ja),67108864>(this||eb).words[0]+R?(this||eb).words[0]+=R:this._iaddn(R);if(0!==ua){X=1;R=m(L,gb,L.length,
Z);for(gb=0;gb<ua;gb++)X*=Z;this.imuln(X);67108864>(this||eb).words[0]+R?(this||eb).words[0]+=R:this._iaddn(R)}};a.prototype.copy=function(L){L.words=Array((this||eb).length);for(var Z=0;Z<(this||eb).length;Z++)L.words[Z]=(this||eb).words[Z];L.length=(this||eb).length;L.negative=(this||eb).negative;L.red=(this||eb).red};a.prototype.clone=function(){var L=new a(null);return this.copy(L),L};a.prototype._expand=function(L){for(;(this||eb).length<L;)(this||eb).words[(this||eb).length++]=0;return this||
eb};a.prototype.strip=function(){for(;1<(this||eb).length&&0===(this||eb).words[(this||eb).length-1];)(this||eb).length--;return this._normSign()};a.prototype._normSign=function(){return 1===(this||eb).length&&0===(this||eb).words[0]&&((this||eb).negative=0),this||eb};a.prototype.inspect=function(){return((this||eb).red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var Y=" 0 00 000 0000 00000 000000 0000000 00000000 000000000 0000000000 00000000000 000000000000 0000000000000 00000000000000 000000000000000 0000000000000000 00000000000000000 000000000000000000 0000000000000000000 00000000000000000000 000000000000000000000 0000000000000000000000 00000000000000000000000 000000000000000000000000 0000000000000000000000000".split(" "),
W=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],da=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1E7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64E6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243E5,28629151,33554432,39135393,45435424,52521875,60466176];a.prototype.toString=function(L,Z){if(Z=0|Z||1,16===(L=L||10)||"hex"===L){var R="";for(var X=L=0,ja=0;ja<(this||
eb).length;ja++){var fa=(this||eb).words[ja],ua=(16777215&(fa<<L|X)).toString(16);R=0!==(X=fa>>>24-L&16777215)||ja!==(this||eb).length-1?Y[6-ua.length]+ua+R:ua+R;26<=(L+=2)&&(L-=26,ja--)}for(0!==X&&(R=X.toString(16)+R);0!=R.length%Z;)R="0"+R;return 0!==(this||eb).negative&&(R="-"+R),R}if(L===(0|L)&&2<=L&&36>=L){X=W[L];ja=da[L];R="";fa=this.clone();for(fa.negative=0;!fa.isZero();)ua=fa.modn(ja).toString(L),R=(fa=fa.idivn(ja)).isZero()?ua+R:Y[X-ua.length]+ua+R;for(this.isZero()&&(R="0"+R);0!=R.length%
Z;)R="0"+R;return 0!==(this||eb).negative&&(R="-"+R),R}e(!1,"Base should be between 2 and 36")};a.prototype.toNumber=function(){var L=(this||eb).words[0];return 2===(this||eb).length?L+=67108864*(this||eb).words[1]:3===(this||eb).length&&1===(this||eb).words[2]?L+=4503599627370496+67108864*(this||eb).words[1]:2<(this||eb).length&&e(!1,"Number can only safely store up to 53 bits"),0!==(this||eb).negative?-L:L};a.prototype.toJSON=function(){return this.toString(16)};a.prototype.toBuffer=function(L,
Z){return e(void 0!==N),this.toArrayLike(N,L,Z)};a.prototype.toArray=function(L,Z){return this.toArrayLike(Array,L,Z)};a.prototype.toArrayLike=function(L,Z,R){var X=this.byteLength();R=R||Math.max(1,X);e(X<=R,"byte array longer than desired length");e(0<R,"Requested array length <= 0");this.strip();var ja="le"===Z;L=new L(R);Z=this.clone();if(ja){for(ja=0;!Z.isZero();ja++)X=Z.andln(255),Z.iushrn(8),L[ja]=X;for(;ja<R;ja++)L[ja]=0}else{for(ja=0;ja<R-X;ja++)L[ja]=0;for(ja=0;!Z.isZero();ja++)X=Z.andln(255),
Z.iushrn(8),L[R-ja-1]=X}return L};Math.clz32?a.prototype._countBits=function(L){return 32-Math.clz32(L)}:a.prototype._countBits=function(L){var Z=0;return 4096<=L&&(Z+=13,L>>>=13),64<=L&&(Z+=7,L>>>=7),8<=L&&(Z+=4,L>>>=4),2<=L&&(Z+=2,L>>>=2),Z+L};a.prototype._zeroBits=function(L){if(0===L)return 26;var Z=0;return 0==(8191&L)&&(Z+=13,L>>>=13),0==(127&L)&&(Z+=7,L>>>=7),0==(15&L)&&(Z+=4,L>>>=4),0==(3&L)&&(Z+=2,L>>>=2),0==(1&L)&&Z++,Z};a.prototype.bitLength=function(){var L=this._countBits((this||eb).words[(this||
eb).length-1]);return 26*((this||eb).length-1)+L};a.prototype.zeroBits=function(){if(this.isZero())return 0;for(var L=0,Z=0;Z<(this||eb).length;Z++){var R=this._zeroBits((this||eb).words[Z]);if(L+=R,26!==R)break}return L};a.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)};a.prototype.toTwos=function(L){return 0!==(this||eb).negative?this.abs().inotn(L).iaddn(1):this.clone()};a.prototype.fromTwos=function(L){return this.testn(L-1)?this.notn(L).iaddn(1).ineg():this.clone()};a.prototype.isNeg=
function(){return 0!==(this||eb).negative};a.prototype.neg=function(){return this.clone().ineg()};a.prototype.ineg=function(){return this.isZero()||((this||eb).negative^=1),this||eb};a.prototype.iuor=function(L){for(;(this||eb).length<L.length;)(this||eb).words[(this||eb).length++]=0;for(var Z=0;Z<L.length;Z++)(this||eb).words[Z]|=L.words[Z];return this.strip()};a.prototype.ior=function(L){return e(0==((this||eb).negative|L.negative)),this.iuor(L)};a.prototype.or=function(L){return(this||eb).length>
L.length?this.clone().ior(L):L.clone().ior(this||eb)};a.prototype.uor=function(L){return(this||eb).length>L.length?this.clone().iuor(L):L.clone().iuor(this||eb)};a.prototype.iuand=function(L){var Z=(this||eb).length>L.length?L:this||eb;for(var R=0;R<Z.length;R++)(this||eb).words[R]&=L.words[R];return(this||eb).length=Z.length,this.strip()};a.prototype.iand=function(L){return e(0==((this||eb).negative|L.negative)),this.iuand(L)};a.prototype.and=function(L){return(this||eb).length>L.length?this.clone().iand(L):
L.clone().iand(this||eb)};a.prototype.uand=function(L){return(this||eb).length>L.length?this.clone().iuand(L):L.clone().iuand(this||eb)};a.prototype.iuxor=function(L){var Z,R;(this||eb).length>L.length?(Z=this||eb,R=L):(Z=L,R=this||eb);for(L=0;L<R.length;L++)(this||eb).words[L]=Z.words[L]^R.words[L];if((this||eb)!==Z)for(;L<Z.length;L++)(this||eb).words[L]=Z.words[L];return(this||eb).length=Z.length,this.strip()};a.prototype.ixor=function(L){return e(0==((this||eb).negative|L.negative)),this.iuxor(L)};
a.prototype.xor=function(L){return(this||eb).length>L.length?this.clone().ixor(L):L.clone().ixor(this||eb)};a.prototype.uxor=function(L){return(this||eb).length>L.length?this.clone().iuxor(L):L.clone().iuxor(this||eb)};a.prototype.inotn=function(L){e("number"==typeof L&&0<=L);var Z=0|Math.ceil(L/26);L%=26;this._expand(Z);0<L&&Z--;for(var R=0;R<Z;R++)(this||eb).words[R]=67108863&~(this||eb).words[R];return 0<L&&((this||eb).words[R]=~(this||eb).words[R]&67108863>>26-L),this.strip()};a.prototype.notn=
function(L){return this.clone().inotn(L)};a.prototype.setn=function(L,Z){e("number"==typeof L&&0<=L);var R=L/26|0;L%=26;return this._expand(R+1),(this||eb).words[R]=Z?(this||eb).words[R]|1<<L:(this||eb).words[R]&~(1<<L),this.strip()};a.prototype.iadd=function(L){var Z,R,X;if(0!==(this||eb).negative&&0===L.negative)return(this||eb).negative=0,this.isub(L),(this||eb).negative^=1,this._normSign();if(0===(this||eb).negative&&0!==L.negative)return L.negative=0,Z=this.isub(L),L.negative=1,Z._normSign();
(this||eb).length>L.length?(R=this||eb,X=L):(R=L,X=this||eb);for(L=Z=0;L<X.length;L++)Z=(0|R.words[L])+(0|X.words[L])+Z,(this||eb).words[L]=67108863&Z,Z>>>=26;for(;0!==Z&&L<R.length;L++)Z=(0|R.words[L])+Z,(this||eb).words[L]=67108863&Z,Z>>>=26;if((this||eb).length=R.length,0!==Z)(this||eb).words[(this||eb).length]=Z,(this||eb).length++;else if(R!==(this||eb))for(;L<R.length;L++)(this||eb).words[L]=R.words[L];return this||eb};a.prototype.add=function(L){var Z;return 0!==L.negative&&0===(this||eb).negative?
(L.negative=0,Z=this.sub(L),L.negative^=1,Z):0===L.negative&&0!==(this||eb).negative?((this||eb).negative=0,Z=L.sub(this||eb),(this||eb).negative=1,Z):(this||eb).length>L.length?this.clone().iadd(L):L.clone().iadd(this||eb)};a.prototype.isub=function(L){if(0!==L.negative){L.negative=0;var Z=this.iadd(L);return L.negative=1,Z._normSign()}if(0!==(this||eb).negative)return(this||eb).negative=0,this.iadd(L),(this||eb).negative=1,this._normSign();var R,X;Z=this.cmp(L);if(0===Z)return(this||eb).negative=
0,(this||eb).length=1,(this||eb).words[0]=0,this||eb;0<Z?(R=this||eb,X=L):(R=L,X=this||eb);for(var ja=L=0;ja<X.length;ja++)L=(Z=(0|R.words[ja])-(0|X.words[ja])+L)>>26,(this||eb).words[ja]=67108863&Z;for(;0!==L&&ja<R.length;ja++)L=(Z=(0|R.words[ja])+L)>>26,(this||eb).words[ja]=67108863&Z;if(0===L&&ja<R.length&&R!==(this||eb))for(;ja<R.length;ja++)(this||eb).words[ja]=R.words[ja];return(this||eb).length=Math.max((this||eb).length,ja),R!==(this||eb)&&((this||eb).negative=1),this.strip()};a.prototype.sub=
function(L){return this.clone().isub(L)};var va=function(L,Z,R){var X=L.words,ja=Z.words,fa=R.words,ua=0|X[0],gb=8191&ua;ua>>>=13;var hb=0|X[1],ta=8191&hb;hb>>>=13;var na=0|X[2],pa=8191&na;na>>>=13;var La=0|X[3],Hb=8191&La;La>>>=13;var fc=0|X[4],Ob=8191&fc;fc>>>=13;var Zb=0|X[5],Hc=8191&Zb;Zb>>>=13;var Gb=0|X[6],dd=8191&Gb;Gb>>>=13;var Gd=0|X[7],ma=8191&Gd;Gd>>>=13;var Ga=0|X[8],Ja=8191&Ga;Ga>>>=13;var vb=0|X[9];X=8191&vb;vb>>>=13;var Vb=0|ja[0],vd=8191&Vb,ud=Vb>>>13,Jc=0|ja[1];Vb=8191&Jc;var Re=
Jc>>>13,Le=0|ja[2];Jc=8191&Le;var Uh=Le>>>13,th=0|ja[3];Le=8191&th;var pj=th>>>13,hj=0|ja[4];th=8191&hj;var qj=hj>>>13,Qi=0|ja[5];hj=8191&Qi;var Ri=Qi>>>13,xk=0|ja[6];Qi=8191&xk;var bj=xk>>>13,fk=0|ja[7];xk=8191&fk;var Qk=fk>>>13,gk=0|ja[8];fk=8191&gk;gk>>>=13;var Rk=0|ja[9];ja=8191&Rk;Rk>>>=13;R.negative=L.negative^Z.negative;R.length=19;var CA=(0+Math.imul(gb,vd)|0)+((8191&(L=(L=Math.imul(gb,ud))+Math.imul(ua,vd)|0))<<13)|0;Z=(Math.imul(ua,ud)+(L>>>13)|0)+(CA>>>26)|0;CA&=67108863;var Bd=Math.imul(ta,
vd);L=(L=Math.imul(ta,ud))+Math.imul(hb,vd)|0;var Cd=Math.imul(hb,ud);var AA=(Z+(Bd+Math.imul(gb,Vb)|0)|0)+((8191&(L=(L=L+Math.imul(gb,Re)|0)+Math.imul(ua,Vb)|0))<<13)|0;Z=((Cd+Math.imul(ua,Re)|0)+(L>>>13)|0)+(AA>>>26)|0;AA&=67108863;Bd=Math.imul(pa,vd);L=(L=Math.imul(pa,ud))+Math.imul(na,vd)|0;Cd=Math.imul(na,ud);Bd=Bd+Math.imul(ta,Vb)|0;L=(L=L+Math.imul(ta,Re)|0)+Math.imul(hb,Vb)|0;Cd=Cd+Math.imul(hb,Re)|0;var Ay=(Z+(Bd+Math.imul(gb,Jc)|0)|0)+((8191&(L=(L=L+Math.imul(gb,Uh)|0)+Math.imul(ua,Jc)|
0))<<13)|0;Z=((Cd+Math.imul(ua,Uh)|0)+(L>>>13)|0)+(Ay>>>26)|0;Ay&=67108863;Bd=Math.imul(Hb,vd);L=(L=Math.imul(Hb,ud))+Math.imul(La,vd)|0;Cd=Math.imul(La,ud);Bd=Bd+Math.imul(pa,Vb)|0;L=(L=L+Math.imul(pa,Re)|0)+Math.imul(na,Vb)|0;Cd=Cd+Math.imul(na,Re)|0;Bd=Bd+Math.imul(ta,Jc)|0;L=(L=L+Math.imul(ta,Uh)|0)+Math.imul(hb,Jc)|0;Cd=Cd+Math.imul(hb,Uh)|0;var Kw=(Z+(Bd+Math.imul(gb,Le)|0)|0)+((8191&(L=(L=L+Math.imul(gb,pj)|0)+Math.imul(ua,Le)|0))<<13)|0;Z=((Cd+Math.imul(ua,pj)|0)+(L>>>13)|0)+(Kw>>>26)|0;Kw&=
67108863;Bd=Math.imul(Ob,vd);L=(L=Math.imul(Ob,ud))+Math.imul(fc,vd)|0;Cd=Math.imul(fc,ud);Bd=Bd+Math.imul(Hb,Vb)|0;L=(L=L+Math.imul(Hb,Re)|0)+Math.imul(La,Vb)|0;Cd=Cd+Math.imul(La,Re)|0;Bd=Bd+Math.imul(pa,Jc)|0;L=(L=L+Math.imul(pa,Uh)|0)+Math.imul(na,Jc)|0;Cd=Cd+Math.imul(na,Uh)|0;Bd=Bd+Math.imul(ta,Le)|0;L=(L=L+Math.imul(ta,pj)|0)+Math.imul(hb,Le)|0;Cd=Cd+Math.imul(hb,pj)|0;var MC=(Z+(Bd+Math.imul(gb,th)|0)|0)+((8191&(L=(L=L+Math.imul(gb,qj)|0)+Math.imul(ua,th)|0))<<13)|0;Z=((Cd+Math.imul(ua,qj)|
0)+(L>>>13)|0)+(MC>>>26)|0;MC&=67108863;Bd=Math.imul(Hc,vd);L=(L=Math.imul(Hc,ud))+Math.imul(Zb,vd)|0;Cd=Math.imul(Zb,ud);Bd=Bd+Math.imul(Ob,Vb)|0;L=(L=L+Math.imul(Ob,Re)|0)+Math.imul(fc,Vb)|0;Cd=Cd+Math.imul(fc,Re)|0;Bd=Bd+Math.imul(Hb,Jc)|0;L=(L=L+Math.imul(Hb,Uh)|0)+Math.imul(La,Jc)|0;Cd=Cd+Math.imul(La,Uh)|0;Bd=Bd+Math.imul(pa,Le)|0;L=(L=L+Math.imul(pa,pj)|0)+Math.imul(na,Le)|0;Cd=Cd+Math.imul(na,pj)|0;Bd=Bd+Math.imul(ta,th)|0;L=(L=L+Math.imul(ta,qj)|0)+Math.imul(hb,th)|0;Cd=Cd+Math.imul(hb,qj)|
0;var QC=(Z+(Bd+Math.imul(gb,hj)|0)|0)+((8191&(L=(L=L+Math.imul(gb,Ri)|0)+Math.imul(ua,hj)|0))<<13)|0;Z=((Cd+Math.imul(ua,Ri)|0)+(L>>>13)|0)+(QC>>>26)|0;QC&=67108863;Bd=Math.imul(dd,vd);L=(L=Math.imul(dd,ud))+Math.imul(Gb,vd)|0;Cd=Math.imul(Gb,ud);Bd=Bd+Math.imul(Hc,Vb)|0;L=(L=L+Math.imul(Hc,Re)|0)+Math.imul(Zb,Vb)|0;Cd=Cd+Math.imul(Zb,Re)|0;Bd=Bd+Math.imul(Ob,Jc)|0;L=(L=L+Math.imul(Ob,Uh)|0)+Math.imul(fc,Jc)|0;Cd=Cd+Math.imul(fc,Uh)|0;Bd=Bd+Math.imul(Hb,Le)|0;L=(L=L+Math.imul(Hb,pj)|0)+Math.imul(La,
Le)|0;Cd=Cd+Math.imul(La,pj)|0;Bd=Bd+Math.imul(pa,th)|0;L=(L=L+Math.imul(pa,qj)|0)+Math.imul(na,th)|0;Cd=Cd+Math.imul(na,qj)|0;Bd=Bd+Math.imul(ta,hj)|0;L=(L=L+Math.imul(ta,Ri)|0)+Math.imul(hb,hj)|0;Cd=Cd+Math.imul(hb,Ri)|0;var RC=(Z+(Bd+Math.imul(gb,Qi)|0)|0)+((8191&(L=(L=L+Math.imul(gb,bj)|0)+Math.imul(ua,Qi)|0))<<13)|0;Z=((Cd+Math.imul(ua,bj)|0)+(L>>>13)|0)+(RC>>>26)|0;RC&=67108863;Bd=Math.imul(ma,vd);L=(L=Math.imul(ma,ud))+Math.imul(Gd,vd)|0;Cd=Math.imul(Gd,ud);Bd=Bd+Math.imul(dd,Vb)|0;L=(L=L+
Math.imul(dd,Re)|0)+Math.imul(Gb,Vb)|0;Cd=Cd+Math.imul(Gb,Re)|0;Bd=Bd+Math.imul(Hc,Jc)|0;L=(L=L+Math.imul(Hc,Uh)|0)+Math.imul(Zb,Jc)|0;Cd=Cd+Math.imul(Zb,Uh)|0;Bd=Bd+Math.imul(Ob,Le)|0;L=(L=L+Math.imul(Ob,pj)|0)+Math.imul(fc,Le)|0;Cd=Cd+Math.imul(fc,pj)|0;Bd=Bd+Math.imul(Hb,th)|0;L=(L=L+Math.imul(Hb,qj)|0)+Math.imul(La,th)|0;Cd=Cd+Math.imul(La,qj)|0;Bd=Bd+Math.imul(pa,hj)|0;L=(L=L+Math.imul(pa,Ri)|0)+Math.imul(na,hj)|0;Cd=Cd+Math.imul(na,Ri)|0;Bd=Bd+Math.imul(ta,Qi)|0;L=(L=L+Math.imul(ta,bj)|0)+Math.imul(hb,
Qi)|0;Cd=Cd+Math.imul(hb,bj)|0;var SC=(Z+(Bd+Math.imul(gb,xk)|0)|0)+((8191&(L=(L=L+Math.imul(gb,Qk)|0)+Math.imul(ua,xk)|0))<<13)|0;Z=((Cd+Math.imul(ua,Qk)|0)+(L>>>13)|0)+(SC>>>26)|0;SC&=67108863;Bd=Math.imul(Ja,vd);L=(L=Math.imul(Ja,ud))+Math.imul(Ga,vd)|0;Cd=Math.imul(Ga,ud);Bd=Bd+Math.imul(ma,Vb)|0;L=(L=L+Math.imul(ma,Re)|0)+Math.imul(Gd,Vb)|0;Cd=Cd+Math.imul(Gd,Re)|0;Bd=Bd+Math.imul(dd,Jc)|0;L=(L=L+Math.imul(dd,Uh)|0)+Math.imul(Gb,Jc)|0;Cd=Cd+Math.imul(Gb,Uh)|0;Bd=Bd+Math.imul(Hc,Le)|0;L=(L=L+
Math.imul(Hc,pj)|0)+Math.imul(Zb,Le)|0;Cd=Cd+Math.imul(Zb,pj)|0;Bd=Bd+Math.imul(Ob,th)|0;L=(L=L+Math.imul(Ob,qj)|0)+Math.imul(fc,th)|0;Cd=Cd+Math.imul(fc,qj)|0;Bd=Bd+Math.imul(Hb,hj)|0;L=(L=L+Math.imul(Hb,Ri)|0)+Math.imul(La,hj)|0;Cd=Cd+Math.imul(La,Ri)|0;Bd=Bd+Math.imul(pa,Qi)|0;L=(L=L+Math.imul(pa,bj)|0)+Math.imul(na,Qi)|0;Cd=Cd+Math.imul(na,bj)|0;Bd=Bd+Math.imul(ta,xk)|0;L=(L=L+Math.imul(ta,Qk)|0)+Math.imul(hb,xk)|0;Cd=Cd+Math.imul(hb,Qk)|0;var TC=(Z+(Bd+Math.imul(gb,fk)|0)|0)+((8191&(L=(L=L+Math.imul(gb,
gk)|0)+Math.imul(ua,fk)|0))<<13)|0;Z=((Cd+Math.imul(ua,gk)|0)+(L>>>13)|0)+(TC>>>26)|0;TC&=67108863;Bd=Math.imul(X,vd);L=(L=Math.imul(X,ud))+Math.imul(vb,vd)|0;Cd=Math.imul(vb,ud);Bd=Bd+Math.imul(Ja,Vb)|0;L=(L=L+Math.imul(Ja,Re)|0)+Math.imul(Ga,Vb)|0;Cd=Cd+Math.imul(Ga,Re)|0;Bd=Bd+Math.imul(ma,Jc)|0;L=(L=L+Math.imul(ma,Uh)|0)+Math.imul(Gd,Jc)|0;Cd=Cd+Math.imul(Gd,Uh)|0;Bd=Bd+Math.imul(dd,Le)|0;L=(L=L+Math.imul(dd,pj)|0)+Math.imul(Gb,Le)|0;Cd=Cd+Math.imul(Gb,pj)|0;Bd=Bd+Math.imul(Hc,th)|0;L=(L=L+Math.imul(Hc,
qj)|0)+Math.imul(Zb,th)|0;Cd=Cd+Math.imul(Zb,qj)|0;Bd=Bd+Math.imul(Ob,hj)|0;L=(L=L+Math.imul(Ob,Ri)|0)+Math.imul(fc,hj)|0;Cd=Cd+Math.imul(fc,Ri)|0;Bd=Bd+Math.imul(Hb,Qi)|0;L=(L=L+Math.imul(Hb,bj)|0)+Math.imul(La,Qi)|0;Cd=Cd+Math.imul(La,bj)|0;Bd=Bd+Math.imul(pa,xk)|0;L=(L=L+Math.imul(pa,Qk)|0)+Math.imul(na,xk)|0;Cd=Cd+Math.imul(na,Qk)|0;Bd=Bd+Math.imul(ta,fk)|0;L=(L=L+Math.imul(ta,gk)|0)+Math.imul(hb,fk)|0;Cd=Cd+Math.imul(hb,gk)|0;gb=(Z+(Bd+Math.imul(gb,ja)|0)|0)+((8191&(L=(L=L+Math.imul(gb,Rk)|0)+
Math.imul(ua,ja)|0))<<13)|0;Z=((Cd+Math.imul(ua,Rk)|0)+(L>>>13)|0)+(gb>>>26)|0;gb&=67108863;Bd=Math.imul(X,Vb);L=(L=Math.imul(X,Re))+Math.imul(vb,Vb)|0;Cd=Math.imul(vb,Re);Bd=Bd+Math.imul(Ja,Jc)|0;L=(L=L+Math.imul(Ja,Uh)|0)+Math.imul(Ga,Jc)|0;Cd=Cd+Math.imul(Ga,Uh)|0;Bd=Bd+Math.imul(ma,Le)|0;L=(L=L+Math.imul(ma,pj)|0)+Math.imul(Gd,Le)|0;Cd=Cd+Math.imul(Gd,pj)|0;Bd=Bd+Math.imul(dd,th)|0;L=(L=L+Math.imul(dd,qj)|0)+Math.imul(Gb,th)|0;Cd=Cd+Math.imul(Gb,qj)|0;Bd=Bd+Math.imul(Hc,hj)|0;L=(L=L+Math.imul(Hc,
Ri)|0)+Math.imul(Zb,hj)|0;Cd=Cd+Math.imul(Zb,Ri)|0;Bd=Bd+Math.imul(Ob,Qi)|0;L=(L=L+Math.imul(Ob,bj)|0)+Math.imul(fc,Qi)|0;Cd=Cd+Math.imul(fc,bj)|0;Bd=Bd+Math.imul(Hb,xk)|0;L=(L=L+Math.imul(Hb,Qk)|0)+Math.imul(La,xk)|0;Cd=Cd+Math.imul(La,Qk)|0;Bd=Bd+Math.imul(pa,fk)|0;L=(L=L+Math.imul(pa,gk)|0)+Math.imul(na,fk)|0;Cd=Cd+Math.imul(na,gk)|0;ua=(Z+(Bd+Math.imul(ta,ja)|0)|0)+((8191&(L=(L=L+Math.imul(ta,Rk)|0)+Math.imul(hb,ja)|0))<<13)|0;Z=((Cd+Math.imul(hb,Rk)|0)+(L>>>13)|0)+(ua>>>26)|0;ua&=67108863;Bd=
Math.imul(X,Jc);L=(L=Math.imul(X,Uh))+Math.imul(vb,Jc)|0;Cd=Math.imul(vb,Uh);Bd=Bd+Math.imul(Ja,Le)|0;L=(L=L+Math.imul(Ja,pj)|0)+Math.imul(Ga,Le)|0;Cd=Cd+Math.imul(Ga,pj)|0;Bd=Bd+Math.imul(ma,th)|0;L=(L=L+Math.imul(ma,qj)|0)+Math.imul(Gd,th)|0;Cd=Cd+Math.imul(Gd,qj)|0;Bd=Bd+Math.imul(dd,hj)|0;L=(L=L+Math.imul(dd,Ri)|0)+Math.imul(Gb,hj)|0;Cd=Cd+Math.imul(Gb,Ri)|0;Bd=Bd+Math.imul(Hc,Qi)|0;L=(L=L+Math.imul(Hc,bj)|0)+Math.imul(Zb,Qi)|0;Cd=Cd+Math.imul(Zb,bj)|0;Bd=Bd+Math.imul(Ob,xk)|0;L=(L=L+Math.imul(Ob,
Qk)|0)+Math.imul(fc,xk)|0;Cd=Cd+Math.imul(fc,Qk)|0;Bd=Bd+Math.imul(Hb,fk)|0;L=(L=L+Math.imul(Hb,gk)|0)+Math.imul(La,fk)|0;Cd=Cd+Math.imul(La,gk)|0;ta=(Z+(Bd+Math.imul(pa,ja)|0)|0)+((8191&(L=(L=L+Math.imul(pa,Rk)|0)+Math.imul(na,ja)|0))<<13)|0;Z=((Cd+Math.imul(na,Rk)|0)+(L>>>13)|0)+(ta>>>26)|0;ta&=67108863;Bd=Math.imul(X,Le);L=(L=Math.imul(X,pj))+Math.imul(vb,Le)|0;Cd=Math.imul(vb,pj);Bd=Bd+Math.imul(Ja,th)|0;L=(L=L+Math.imul(Ja,qj)|0)+Math.imul(Ga,th)|0;Cd=Cd+Math.imul(Ga,qj)|0;Bd=Bd+Math.imul(ma,
hj)|0;L=(L=L+Math.imul(ma,Ri)|0)+Math.imul(Gd,hj)|0;Cd=Cd+Math.imul(Gd,Ri)|0;Bd=Bd+Math.imul(dd,Qi)|0;L=(L=L+Math.imul(dd,bj)|0)+Math.imul(Gb,Qi)|0;Cd=Cd+Math.imul(Gb,bj)|0;Bd=Bd+Math.imul(Hc,xk)|0;L=(L=L+Math.imul(Hc,Qk)|0)+Math.imul(Zb,xk)|0;Cd=Cd+Math.imul(Zb,Qk)|0;Bd=Bd+Math.imul(Ob,fk)|0;L=(L=L+Math.imul(Ob,gk)|0)+Math.imul(fc,fk)|0;Cd=Cd+Math.imul(fc,gk)|0;hb=(Z+(Bd+Math.imul(Hb,ja)|0)|0)+((8191&(L=(L=L+Math.imul(Hb,Rk)|0)+Math.imul(La,ja)|0))<<13)|0;Z=((Cd+Math.imul(La,Rk)|0)+(L>>>13)|0)+(hb>>>
26)|0;hb&=67108863;Bd=Math.imul(X,th);L=(L=Math.imul(X,qj))+Math.imul(vb,th)|0;Cd=Math.imul(vb,qj);Bd=Bd+Math.imul(Ja,hj)|0;L=(L=L+Math.imul(Ja,Ri)|0)+Math.imul(Ga,hj)|0;Cd=Cd+Math.imul(Ga,Ri)|0;Bd=Bd+Math.imul(ma,Qi)|0;L=(L=L+Math.imul(ma,bj)|0)+Math.imul(Gd,Qi)|0;Cd=Cd+Math.imul(Gd,bj)|0;Bd=Bd+Math.imul(dd,xk)|0;L=(L=L+Math.imul(dd,Qk)|0)+Math.imul(Gb,xk)|0;Cd=Cd+Math.imul(Gb,Qk)|0;Bd=Bd+Math.imul(Hc,fk)|0;L=(L=L+Math.imul(Hc,gk)|0)+Math.imul(Zb,fk)|0;Cd=Cd+Math.imul(Zb,gk)|0;pa=(Z+(Bd+Math.imul(Ob,
ja)|0)|0)+((8191&(L=(L=L+Math.imul(Ob,Rk)|0)+Math.imul(fc,ja)|0))<<13)|0;Z=((Cd+Math.imul(fc,Rk)|0)+(L>>>13)|0)+(pa>>>26)|0;pa&=67108863;Bd=Math.imul(X,hj);L=(L=Math.imul(X,Ri))+Math.imul(vb,hj)|0;Cd=Math.imul(vb,Ri);Bd=Bd+Math.imul(Ja,Qi)|0;L=(L=L+Math.imul(Ja,bj)|0)+Math.imul(Ga,Qi)|0;Cd=Cd+Math.imul(Ga,bj)|0;Bd=Bd+Math.imul(ma,xk)|0;L=(L=L+Math.imul(ma,Qk)|0)+Math.imul(Gd,xk)|0;Cd=Cd+Math.imul(Gd,Qk)|0;Bd=Bd+Math.imul(dd,fk)|0;L=(L=L+Math.imul(dd,gk)|0)+Math.imul(Gb,fk)|0;Cd=Cd+Math.imul(Gb,gk)|
0;na=(Z+(Bd+Math.imul(Hc,ja)|0)|0)+((8191&(L=(L=L+Math.imul(Hc,Rk)|0)+Math.imul(Zb,ja)|0))<<13)|0;Z=((Cd+Math.imul(Zb,Rk)|0)+(L>>>13)|0)+(na>>>26)|0;na&=67108863;Bd=Math.imul(X,Qi);L=(L=Math.imul(X,bj))+Math.imul(vb,Qi)|0;Cd=Math.imul(vb,bj);Bd=Bd+Math.imul(Ja,xk)|0;L=(L=L+Math.imul(Ja,Qk)|0)+Math.imul(Ga,xk)|0;Cd=Cd+Math.imul(Ga,Qk)|0;Bd=Bd+Math.imul(ma,fk)|0;L=(L=L+Math.imul(ma,gk)|0)+Math.imul(Gd,fk)|0;Cd=Cd+Math.imul(Gd,gk)|0;Hb=(Z+(Bd+Math.imul(dd,ja)|0)|0)+((8191&(L=(L=L+Math.imul(dd,Rk)|0)+
Math.imul(Gb,ja)|0))<<13)|0;Z=((Cd+Math.imul(Gb,Rk)|0)+(L>>>13)|0)+(Hb>>>26)|0;Hb&=67108863;Bd=Math.imul(X,xk);L=(L=Math.imul(X,Qk))+Math.imul(vb,xk)|0;Cd=Math.imul(vb,Qk);Bd=Bd+Math.imul(Ja,fk)|0;L=(L=L+Math.imul(Ja,gk)|0)+Math.imul(Ga,fk)|0;Cd=Cd+Math.imul(Ga,gk)|0;La=(Z+(Bd+Math.imul(ma,ja)|0)|0)+((8191&(L=(L=L+Math.imul(ma,Rk)|0)+Math.imul(Gd,ja)|0))<<13)|0;Z=((Cd+Math.imul(Gd,Rk)|0)+(L>>>13)|0)+(La>>>26)|0;La&=67108863;Bd=Math.imul(X,fk);L=(L=Math.imul(X,gk))+Math.imul(vb,fk)|0;Cd=Math.imul(vb,
gk);Ob=(Z+(Bd+Math.imul(Ja,ja)|0)|0)+((8191&(L=(L=L+Math.imul(Ja,Rk)|0)+Math.imul(Ga,ja)|0))<<13)|0;Z=((Cd+Math.imul(Ga,Rk)|0)+(L>>>13)|0)+(Ob>>>26)|0;Ob&=67108863;fc=(Z+Math.imul(X,ja)|0)+((8191&(L=(L=Math.imul(X,Rk))+Math.imul(vb,ja)|0))<<13)|0;return Z=(Math.imul(vb,Rk)+(L>>>13)|0)+(fc>>>26)|0,fc&=67108863,fa[0]=CA,fa[1]=AA,fa[2]=Ay,fa[3]=Kw,fa[4]=MC,fa[5]=QC,fa[6]=RC,fa[7]=SC,fa[8]=TC,fa[9]=gb,fa[10]=ua,fa[11]=ta,fa[12]=hb,fa[13]=pa,fa[14]=na,fa[15]=Hb,fa[16]=La,fa[17]=Ob,fa[18]=fc,0!==Z&&(fa[19]=
Z,R.length++),R};Math.imul||(va=r);a.prototype.mulTo=function(L,Z){var R=(this||eb).length+L.length;if(10===(this||eb).length&&10===L.length)L=va(this||eb,L,Z);else if(63>R)L=r(this||eb,L,Z);else if(1024>R){R=this||eb;Z.negative=L.negative^R.negative;Z.length=R.length+L.length;for(var X=0,ja=0,fa=0;fa<Z.length-1;fa++){var ua=ja;ja=0;X&=67108863;for(var gb=Math.min(fa,L.length-1),hb=Math.max(0,fa-R.length+1);hb<=gb;hb++){var ta=(0|R.words[fa-hb])*(0|L.words[hb]),na=67108863&ta;X=67108863&(na=na+X|
0);ja+=(ua=(ua=ua+(ta/67108864|0)|0)+(na>>>26)|0)>>>26;ua&=67108863}Z.words[fa]=X;X=ua}L=(0!==X?Z.words[fa]=X:Z.length--,Z.strip())}else R=this||eb,L=(new v).mulp(R,L,Z);return L};v.prototype.makeRBT=function(L){for(var Z=Array(L),R=a.prototype._countBits(L)-1,X=0;X<L;X++)Z[X]=this.revBin(X,R,L);return Z};v.prototype.revBin=function(L,Z,R){if(0===L||L===R-1)return L;for(var X=R=0;X<Z;X++)R|=(1&L)<<Z-X-1,L>>=1;return R};v.prototype.permute=function(L,Z,R,X,ja,fa){for(var ua=0;ua<fa;ua++)X[ua]=Z[L[ua]],
ja[ua]=R[L[ua]]};v.prototype.transform=function(L,Z,R,X,ja,fa){this.permute(fa,L,Z,R,X,ja);for(L=1;L<ja;L<<=1){Z=L<<1;fa=Math.cos(2*Math.PI/Z);for(var ua=Math.sin(2*Math.PI/Z),gb=0;gb<ja;gb+=Z)for(var hb=fa,ta=ua,na=0;na<L;na++){var pa=R[gb+na],La=X[gb+na],Hb=R[gb+na+L],fc=X[gb+na+L],Ob=hb*Hb-ta*fc;fc=hb*fc+ta*Hb;Hb=Ob;R[gb+na]=pa+Hb;X[gb+na]=La+fc;R[gb+na+L]=pa-Hb;X[gb+na+L]=La-fc;na!==Z&&(Ob=fa*hb-ua*ta,ta=fa*ta+ua*hb,hb=Ob)}}};v.prototype.guessLen13b=function(L,Z){L=1|Math.max(Z,L);Z=1&L;var R=
0;for(L=L/2|0;L;L>>>=1)R++;return 1<<R+1+Z};v.prototype.conjugate=function(L,Z,R){if(!(1>=R))for(var X=0;X<R/2;X++){var ja=L[X];L[X]=L[R-X-1];L[R-X-1]=ja;ja=Z[X];Z[X]=-Z[R-X-1];Z[R-X-1]=-ja}};v.prototype.normalize13b=function(L,Z){for(var R=0,X=0;X<Z/2;X++)R=8192*Math.round(L[2*X+1]/Z)+Math.round(L[2*X]/Z)+R,L[X]=67108863&R,R=67108864>R?0:R/67108864|0;return L};v.prototype.convert13b=function(L,Z,R,X){for(var ja=0,fa=0;fa<Z;fa++)ja+=0|L[fa],R[2*fa]=8191&ja,ja>>>=13,R[2*fa+1]=8191&ja,ja>>>=13;for(fa=
2*Z;fa<X;++fa)R[fa]=0;e(0===ja);e(0==(-8192&ja))};v.prototype.stub=function(L){for(var Z=Array(L),R=0;R<L;R++)Z[R]=0;return Z};v.prototype.mulp=function(L,Z,R){var X=2*this.guessLen13b(L.length,Z.length),ja=this.makeRBT(X),fa=this.stub(X),ua=Array(X),gb=Array(X),hb=Array(X),ta=Array(X),na=Array(X),pa=Array(X),La=R.words;La.length=X;this.convert13b(L.words,L.length,ua,X);this.convert13b(Z.words,Z.length,ta,X);this.transform(ua,fa,gb,hb,X,ja);this.transform(ta,fa,na,pa,X,ja);for(ua=0;ua<X;ua++)ta=gb[ua]*
na[ua]-hb[ua]*pa[ua],hb[ua]=gb[ua]*pa[ua]+hb[ua]*na[ua],gb[ua]=ta;return this.conjugate(gb,hb,X),this.transform(gb,hb,La,fa,X,ja),this.conjugate(La,fa,X),this.normalize13b(La,X),R.negative=L.negative^Z.negative,R.length=L.length+Z.length,R.strip()};a.prototype.mul=function(L){var Z=new a(null);return Z.words=Array((this||eb).length+L.length),this.mulTo(L,Z)};a.prototype.mulf=function(L){var Z=new a(null);Z.words=Array((this||eb).length+L.length);var R=this||eb;return(new v).mulp(R,L,Z)};a.prototype.imul=
function(L){return this.clone().mulTo(L,this||eb)};a.prototype.imuln=function(L){e("number"==typeof L);e(67108864>L);for(var Z=0,R=0;R<(this||eb).length;R++){var X=(0|(this||eb).words[R])*L,ja=(67108863&X)+(67108863&Z);Z>>=26;Z+=X/67108864|0;Z+=ja>>>26;(this||eb).words[R]=67108863&ja}return 0!==Z&&((this||eb).words[R]=Z,(this||eb).length++),this||eb};a.prototype.muln=function(L){return this.clone().imuln(L)};a.prototype.sqr=function(){return this.mul(this||eb)};a.prototype.isqr=function(){return this.imul(this.clone())};
a.prototype.pow=function(L){for(var Z=Array(L.bitLength()),R=0;R<Z.length;R++){var X=R%26;Z[R]=(L.words[R/26|0]&1<<X)>>>X}if(0===Z.length)return new a(1);L=this||eb;for(R=0;R<Z.length&&0===Z[R];R++,L=L.sqr());if(++R<Z.length)for(X=L.sqr();R<Z.length;R++,X=X.sqr())0!==Z[R]&&(L=L.mul(X));return L};a.prototype.iushln=function(L){e("number"==typeof L&&0<=L);var Z=L%26,R=(L-Z)/26,X=67108863>>>26-Z<<26-Z;if(0!==Z){var ja=0;for(L=0;L<(this||eb).length;L++){var fa=(this||eb).words[L]&X;(this||eb).words[L]=
(0|(this||eb).words[L])-fa<<Z|ja;ja=fa>>>26-Z}ja&&((this||eb).words[L]=ja,(this||eb).length++)}if(0!==R){for(L=(this||eb).length-1;0<=L;L--)(this||eb).words[L+R]=(this||eb).words[L];for(L=0;L<R;L++)(this||eb).words[L]=0;(this||eb).length+=R}return this.strip()};a.prototype.ishln=function(L){return e(0===(this||eb).negative),this.iushln(L)};a.prototype.iushrn=function(L,Z,R){e("number"==typeof L&&0<=L);Z=Z?(Z-Z%26)/26:0;var X=L%26,ja=Math.min((L-X)/26,(this||eb).length);L=67108863^67108863>>>X<<X;
if(Z-=ja,Z=Math.max(0,Z),R){for(var fa=0;fa<ja;fa++)R.words[fa]=(this||eb).words[fa];R.length=ja}if(0!==ja)if((this||eb).length>ja)for((this||eb).length-=ja,fa=0;fa<(this||eb).length;fa++)(this||eb).words[fa]=(this||eb).words[fa+ja];else(this||eb).words[0]=0,(this||eb).length=1;ja=0;for(fa=(this||eb).length-1;0<=fa&&(0!==ja||fa>=Z);fa--){var ua=0|(this||eb).words[fa];(this||eb).words[fa]=ja<<26-X|ua>>>X;ja=ua&L}return R&&0!==ja&&(R.words[R.length++]=ja),0===(this||eb).length&&((this||eb).words[0]=
0,(this||eb).length=1),this.strip()};a.prototype.ishrn=function(L,Z,R){return e(0===(this||eb).negative),this.iushrn(L,Z,R)};a.prototype.shln=function(L){return this.clone().ishln(L)};a.prototype.ushln=function(L){return this.clone().iushln(L)};a.prototype.shrn=function(L){return this.clone().ishrn(L)};a.prototype.ushrn=function(L){return this.clone().iushrn(L)};a.prototype.testn=function(L){e("number"==typeof L&&0<=L);var Z=L%26;L=(L-Z)/26;return!((this||eb).length<=L)&&!!((this||eb).words[L]&1<<
Z)};a.prototype.imaskn=function(L){e("number"==typeof L&&0<=L);var Z=L%26;L=(L-Z)/26;if(e(0===(this||eb).negative,"imaskn works only with positive numbers"),(this||eb).length<=L)return this||eb;if(0!==Z&&L++,(this||eb).length=Math.min(L,(this||eb).length),0!==Z)(this||eb).words[(this||eb).length-1]&=67108863^67108863>>>Z<<Z;return this.strip()};a.prototype.maskn=function(L){return this.clone().imaskn(L)};a.prototype.iaddn=function(L){return e("number"==typeof L),e(67108864>L),0>L?this.isubn(-L):0!==
(this||eb).negative?1===(this||eb).length&&(0|(this||eb).words[0])<L?((this||eb).words[0]=L-(0|(this||eb).words[0]),(this||eb).negative=0,this||eb):((this||eb).negative=0,this.isubn(L),(this||eb).negative=1,this||eb):this._iaddn(L)};a.prototype._iaddn=function(L){(this||eb).words[0]+=L;for(L=0;L<(this||eb).length&&67108864<=(this||eb).words[L];L++)(this||eb).words[L]-=67108864,L===(this||eb).length-1?(this||eb).words[L+1]=1:(this||eb).words[L+1]++;return(this||eb).length=Math.max((this||eb).length,
L+1),this||eb};a.prototype.isubn=function(L){if(e("number"==typeof L),e(67108864>L),0>L)return this.iaddn(-L);if(0!==(this||eb).negative)return(this||eb).negative=0,this.iaddn(L),(this||eb).negative=1,this||eb;if((this||eb).words[0]-=L,1===(this||eb).length&&0>(this||eb).words[0])(this||eb).words[0]=-(this||eb).words[0],(this||eb).negative=1;else for(L=0;L<(this||eb).length&&0>(this||eb).words[L];L++)(this||eb).words[L]+=67108864,--(this||eb).words[L+1];return this.strip()};a.prototype.addn=function(L){return this.clone().iaddn(L)};
a.prototype.subn=function(L){return this.clone().isubn(L)};a.prototype.iabs=function(){return(this||eb).negative=0,this||eb};a.prototype.abs=function(){return this.clone().iabs()};a.prototype._ishlnsubmul=function(L,Z,R){var X;this._expand(L.length+R);var ja=0;for(X=0;X<L.length;X++){var fa=(0|(this||eb).words[X+R])+ja;ja=(0|L.words[X])*Z;ja=((fa-=67108863&ja)>>26)-(ja/67108864|0);(this||eb).words[X+R]=67108863&fa}for(;X<(this||eb).length-R;X++)ja=(fa=(0|(this||eb).words[X+R])+ja)>>26,(this||eb).words[X+
R]=67108863&fa;if(0===ja)return this.strip();e(-1===ja);for(X=ja=0;X<(this||eb).length;X++)ja=(fa=-(0|(this||eb).words[X])+ja)>>26,(this||eb).words[X]=67108863&fa;return(this||eb).negative=1,this.strip()};a.prototype._wordDiv=function(L,Z){var R=((this||eb).length,L.length),X=this.clone(),ja=0|L.words[L.length-1];0!==(R=26-this._countBits(ja))&&(L=L.ushln(R),X.iushln(R),ja=0|L.words[L.length-1]);var fa,ua=X.length-L.length;if("mod"!==Z){(fa=new a(null)).length=ua+1;fa.words=Array(fa.length);for(var gb=
0;gb<fa.length;gb++)fa.words[gb]=0}gb=X.clone()._ishlnsubmul(L,1,ua);0===gb.negative&&(X=gb,fa&&(fa.words[ua]=1));for(--ua;0<=ua;ua--){gb=67108864*(0|X.words[L.length+ua])+(0|X.words[L.length+ua-1]);gb=Math.min(gb/ja|0,67108863);for(X._ishlnsubmul(L,gb,ua);0!==X.negative;)gb--,X.negative=0,X._ishlnsubmul(L,1,ua),X.isZero()||(X.negative^=1);fa&&(fa.words[ua]=gb)}return fa&&fa.strip(),X.strip(),"div"!==Z&&0!==R&&X.iushrn(R),{div:fa||null,mod:X}};a.prototype.divmod=function(L,Z,R){return e(!L.isZero()),
this.isZero()?{div:new a(0),mod:new a(0)}:0!==(this||eb).negative&&0===L.negative?(fa=this.neg().divmod(L,Z),"mod"!==Z&&(X=fa.div.neg()),"div"!==Z&&(ja=fa.mod.neg(),R&&0!==ja.negative&&ja.iadd(L)),{div:X,mod:ja}):0===(this||eb).negative&&0!==L.negative?(fa=this.divmod(L.neg(),Z),"mod"!==Z&&(X=fa.div.neg()),{div:X,mod:fa.mod}):0!=((this||eb).negative&L.negative)?(fa=this.neg().divmod(L.neg(),Z),"div"!==Z&&(ja=fa.mod.neg(),R&&0!==ja.negative&&ja.isub(L)),{div:fa.div,mod:ja}):L.length>(this||eb).length||
0>this.cmp(L)?{div:new a(0),mod:this||eb}:1===L.length?"div"===Z?{div:this.divn(L.words[0]),mod:null}:"mod"===Z?{div:null,mod:new a(this.modn(L.words[0]))}:{div:this.divn(L.words[0]),mod:new a(this.modn(L.words[0]))}:this._wordDiv(L,Z);var X,ja,fa};a.prototype.div=function(L){return this.divmod(L,"div",!1).div};a.prototype.mod=function(L){return this.divmod(L,"mod",!1).mod};a.prototype.umod=function(L){return this.divmod(L,"mod",!0).mod};a.prototype.divRound=function(L){var Z=this.divmod(L);if(Z.mod.isZero())return Z.div;
var R=0!==Z.div.negative?Z.mod.isub(L):Z.mod,X=L.ushrn(1);L=L.andln(1);R=R.cmp(X);return 0>R||1===L&&0===R?Z.div:0!==Z.div.negative?Z.div.isubn(1):Z.div.iaddn(1)};a.prototype.modn=function(L){e(67108863>=L);for(var Z=67108864%L,R=0,X=(this||eb).length-1;0<=X;X--)R=(Z*R+(0|(this||eb).words[X]))%L;return R};a.prototype.idivn=function(L){e(67108863>=L);for(var Z=0,R=(this||eb).length-1;0<=R;R--)Z=(0|(this||eb).words[R])+67108864*Z,(this||eb).words[R]=Z/L|0,Z%=L;return this.strip()};a.prototype.divn=
function(L){return this.clone().idivn(L)};a.prototype.egcd=function(L){e(0===L.negative);e(!L.isZero());var Z=this||eb,R=L.clone();Z=0!==Z.negative?Z.umod(L):Z.clone();L=new a(1);for(var X=new a(0),ja=new a(0),fa=new a(1),ua=0;Z.isEven()&&R.isEven();)Z.iushrn(1),R.iushrn(1),++ua;for(var gb=R.clone(),hb=Z.clone();!Z.isZero();){for(var ta=0,na=1;0==(Z.words[0]&na)&&26>ta;++ta,na<<=1);if(0<ta)for(Z.iushrn(ta);0<ta--;)(L.isOdd()||X.isOdd())&&(L.iadd(gb),X.isub(hb)),L.iushrn(1),X.iushrn(1);ta=0;for(na=
1;0==(R.words[0]&na)&&26>ta;++ta,na<<=1);if(0<ta)for(R.iushrn(ta);0<ta--;)(ja.isOdd()||fa.isOdd())&&(ja.iadd(gb),fa.isub(hb)),ja.iushrn(1),fa.iushrn(1);0<=Z.cmp(R)?(Z.isub(R),L.isub(ja),X.isub(fa)):(R.isub(Z),ja.isub(L),fa.isub(X))}return{a:ja,b:fa,gcd:R.iushln(ua)}};a.prototype._invmp=function(L){e(0===L.negative);e(!L.isZero());var Z=this||eb,R=L.clone();Z=0!==Z.negative?Z.umod(L):Z.clone();for(var X,ja=new a(1),fa=new a(0),ua=R.clone();0<Z.cmpn(1)&&0<R.cmpn(1);){for(var gb=0,hb=1;0==(Z.words[0]&
hb)&&26>gb;++gb,hb<<=1);if(0<gb)for(Z.iushrn(gb);0<gb--;)ja.isOdd()&&ja.iadd(ua),ja.iushrn(1);gb=0;for(hb=1;0==(R.words[0]&hb)&&26>gb;++gb,hb<<=1);if(0<gb)for(R.iushrn(gb);0<gb--;)fa.isOdd()&&fa.iadd(ua),fa.iushrn(1);0<=Z.cmp(R)?(Z.isub(R),ja.isub(fa)):(R.isub(Z),fa.isub(ja))}return 0>(X=0===Z.cmpn(1)?ja:fa).cmpn(0)&&X.iadd(L),X};a.prototype.gcd=function(L){if(this.isZero())return L.abs();if(L.isZero())return this.abs();var Z=this.clone();L=L.clone();Z.negative=0;for(var R=L.negative=0;Z.isEven()&&
L.isEven();R++)Z.iushrn(1),L.iushrn(1);for(;;){for(;Z.isEven();)Z.iushrn(1);for(;L.isEven();)L.iushrn(1);var X=Z.cmp(L);if(0>X)X=Z,Z=L,L=X;else if(0===X||0===L.cmpn(1))break;Z.isub(L)}return L.iushln(R)};a.prototype.invm=function(L){return this.egcd(L).a.umod(L)};a.prototype.isEven=function(){return 0==(1&(this||eb).words[0])};a.prototype.isOdd=function(){return 1==(1&(this||eb).words[0])};a.prototype.andln=function(L){return(this||eb).words[0]&L};a.prototype.bincn=function(L){e("number"==typeof L);
var Z=L%26;L=(L-Z)/26;Z=1<<Z;if((this||eb).length<=L)return this._expand(L+1),(this||eb).words[L]|=Z,this||eb;for(;0!==Z&&L<(this||eb).length;L++){var R=0|(this||eb).words[L];Z=(R+=Z)>>>26;R&=67108863;(this||eb).words[L]=R}return 0!==Z&&((this||eb).words[L]=Z,(this||eb).length++),this||eb};a.prototype.isZero=function(){return 1===(this||eb).length&&0===(this||eb).words[0]};a.prototype.cmpn=function(L){var Z=0>L;if(0!==(this||eb).negative&&!Z)return-1;if(0===(this||eb).negative&&Z)return 1;(this.strip(),
1<(this||eb).length)?L=1:(Z&&(L=-L),e(67108863>=L,"Number is too big"),Z=0|(this||eb).words[0],L=Z===L?0:Z<L?-1:1);return 0!==(this||eb).negative?0|-L:L};a.prototype.cmp=function(L){if(0!==(this||eb).negative&&0===L.negative)return-1;if(0===(this||eb).negative&&0!==L.negative)return 1;L=this.ucmp(L);return 0!==(this||eb).negative?0|-L:L};a.prototype.ucmp=function(L){if((this||eb).length>L.length)return 1;if((this||eb).length<L.length)return-1;for(var Z=0,R=(this||eb).length-1;0<=R;R--){var X=0|(this||
eb).words[R],ja=0|L.words[R];if(X!==ja){X<ja?Z=-1:X>ja&&(Z=1);break}}return Z};a.prototype.gtn=function(L){return 1===this.cmpn(L)};a.prototype.gt=function(L){return 1===this.cmp(L)};a.prototype.gten=function(L){return 0<=this.cmpn(L)};a.prototype.gte=function(L){return 0<=this.cmp(L)};a.prototype.ltn=function(L){return-1===this.cmpn(L)};a.prototype.lt=function(L){return-1===this.cmp(L)};a.prototype.lten=function(L){return 0>=this.cmpn(L)};a.prototype.lte=function(L){return 0>=this.cmp(L)};a.prototype.eqn=
function(L){return 0===this.cmpn(L)};a.prototype.eq=function(L){return 0===this.cmp(L)};a.red=function(L){return new J(L)};a.prototype.toRed=function(L){return e(!(this||eb).red,"Already a number in reduction context"),e(0===(this||eb).negative,"red works only with positives"),L.convertTo(this||eb)._forceRed(L)};a.prototype.fromRed=function(){return e((this||eb).red,"fromRed works only with numbers in reduction context"),(this||eb).red.convertFrom(this||eb)};a.prototype._forceRed=function(L){return(this||
eb).red=L,this||eb};a.prototype.forceRed=function(L){return e(!(this||eb).red,"Already a number in reduction context"),this._forceRed(L)};a.prototype.redAdd=function(L){return e((this||eb).red,"redAdd works only with red numbers"),(this||eb).red.add(this||eb,L)};a.prototype.redIAdd=function(L){return e((this||eb).red,"redIAdd works only with red numbers"),(this||eb).red.iadd(this||eb,L)};a.prototype.redSub=function(L){return e((this||eb).red,"redSub works only with red numbers"),(this||eb).red.sub(this||
eb,L)};a.prototype.redISub=function(L){return e((this||eb).red,"redISub works only with red numbers"),(this||eb).red.isub(this||eb,L)};a.prototype.redShl=function(L){return e((this||eb).red,"redShl works only with red numbers"),(this||eb).red.shl(this||eb,L)};a.prototype.redMul=function(L){return e((this||eb).red,"redMul works only with red numbers"),(this||eb).red._verify2(this||eb,L),(this||eb).red.mul(this||eb,L)};a.prototype.redIMul=function(L){return e((this||eb).red,"redMul works only with red numbers"),
(this||eb).red._verify2(this||eb,L),(this||eb).red.imul(this||eb,L)};a.prototype.redSqr=function(){return e((this||eb).red,"redSqr works only with red numbers"),(this||eb).red._verify1(this||eb),(this||eb).red.sqr(this||eb)};a.prototype.redISqr=function(){return e((this||eb).red,"redISqr works only with red numbers"),(this||eb).red._verify1(this||eb),(this||eb).red.isqr(this||eb)};a.prototype.redSqrt=function(){return e((this||eb).red,"redSqrt works only with red numbers"),(this||eb).red._verify1(this||
eb),(this||eb).red.sqrt(this||eb)};a.prototype.redInvm=function(){return e((this||eb).red,"redInvm works only with red numbers"),(this||eb).red._verify1(this||eb),(this||eb).red.invm(this||eb)};a.prototype.redNeg=function(){return e((this||eb).red,"redNeg works only with red numbers"),(this||eb).red._verify1(this||eb),(this||eb).red.neg(this||eb)};a.prototype.redPow=function(L){return e((this||eb).red&&!L.red,"redPow(normalNum)"),(this||eb).red._verify1(this||eb),(this||eb).red.pow(this||eb,L)};var za=
{k256:null,p224:null,p192:null,p25519:null};x.prototype._tmp=function(){var L=new a(null);return L.words=Array(Math.ceil((this||eb).n/13)),L};x.prototype.ireduce=function(L){do{this.split(L,(this||eb).tmp);var Z=(L=(L=this.imulK(L)).iadd((this||eb).tmp)).bitLength()}while(Z>(this||eb).n);Z=Z<(this||eb).n?-1:L.ucmp((this||eb).p);return 0===Z?(L.words[0]=0,L.length=1):0<Z?L.isub((this||eb).p):L.strip(),L};x.prototype.split=function(L,Z){L.iushrn((this||eb).n,0,Z)};x.prototype.imulK=function(L){return L.imul((this||
eb).k)};l(y,x);y.prototype.split=function(L,Z){for(var R=Math.min(L.length,9),X=0;X<R;X++)Z.words[X]=L.words[X];if(Z.length=R,9>=L.length)return L.words[0]=0,L.length=1,void 0;R=L.words[9];Z.words[Z.length++]=4194303&R;for(X=10;X<L.length;X++)Z=0|L.words[X],L.words[X-10]=(4194303&Z)<<4|R>>>22,R=Z;R>>>=22;L.words[X-10]=R;0===R&&10<L.length?L.length-=10:L.length-=9};y.prototype.imulK=function(L){L.words[L.length]=0;L.words[L.length+1]=0;L.length+=2;for(var Z=0,R=0;R<L.length;R++){var X=0|L.words[R];
Z+=977*X;L.words[R]=67108863&Z;Z=64*X+(Z/67108864|0)}return 0===L.words[L.length-1]&&(L.length--,0===L.words[L.length-1]&&L.length--),L};l(E,x);l(F,x);l(I,x);I.prototype.imulK=function(L){for(var Z=0,R=0;R<L.length;R++){Z=19*(0|L.words[R])+Z;var X=67108863&Z;Z>>>=26;L.words[R]=X}return 0!==Z&&(L.words[L.length++]=Z),L};a._prime=function(L){if(za[L])return za[L];if("k256"===L)var Z=new y;else if("p224"===L)Z=new E;else if("p192"===L)Z=new F;else{if("p25519"!==L)throw Error("Unknown prime "+L);Z=new I}return za[L]=
Z,Z};J.prototype._verify1=function(L){e(0===L.negative,"red works only with positives");e(L.red,"red works only with red numbers")};J.prototype._verify2=function(L,Z){e(0==(L.negative|Z.negative),"red works only with positives");e(L.red&&L.red===Z.red,"red works only with red numbers")};J.prototype.imod=function(L){return(this||eb).prime?(this||eb).prime.ireduce(L)._forceRed(this||eb):L.umod((this||eb).m)._forceRed(this||eb)};J.prototype.neg=function(L){return L.isZero()?L.clone():(this||eb).m.sub(L)._forceRed(this||
eb)};J.prototype.add=function(L,Z){this._verify2(L,Z);L=L.add(Z);return 0<=L.cmp((this||eb).m)&&L.isub((this||eb).m),L._forceRed(this||eb)};J.prototype.iadd=function(L,Z){this._verify2(L,Z);L=L.iadd(Z);return 0<=L.cmp((this||eb).m)&&L.isub((this||eb).m),L};J.prototype.sub=function(L,Z){this._verify2(L,Z);L=L.sub(Z);return 0>L.cmpn(0)&&L.iadd((this||eb).m),L._forceRed(this||eb)};J.prototype.isub=function(L,Z){this._verify2(L,Z);L=L.isub(Z);return 0>L.cmpn(0)&&L.iadd((this||eb).m),L};J.prototype.shl=
function(L,Z){return this._verify1(L),this.imod(L.ushln(Z))};J.prototype.imul=function(L,Z){return this._verify2(L,Z),this.imod(L.imul(Z))};J.prototype.mul=function(L,Z){return this._verify2(L,Z),this.imod(L.mul(Z))};J.prototype.isqr=function(L){return this.imul(L,L.clone())};J.prototype.sqr=function(L){return this.mul(L,L)};J.prototype.sqrt=function(L){if(L.isZero())return L.clone();var Z=(this||eb).m.andln(3);if(e(1==Z%2),3===Z)return Z=(this||eb).m.add(new a(1)).iushrn(2),this.pow(L,Z);for(var R=
(this||eb).m.subn(1),X=0;!R.isZero()&&0===R.andln(1);)X++,R.iushrn(1);e(!R.isZero());Z=(new a(1)).toRed(this||eb);var ja=Z.redNeg(),fa=(this||eb).m.subn(1).iushrn(1),ua=(this||eb).m.bitLength();for(ua=(new a(2*ua*ua)).toRed(this||eb);0!==this.pow(ua,fa).cmp(ja);)ua.redIAdd(ja);fa=this.pow(ua,R);ja=this.pow(L,R.addn(1).iushrn(1));L=this.pow(L,R);for(R=X;0!==L.cmp(Z);){ua=L;for(X=0;0!==ua.cmp(Z);X++)ua=ua.redSqr();e(X<R);fa=this.pow(fa,(new a(1)).iushln(R-X-1));ja=ja.redMul(fa);fa=fa.redSqr();L=L.redMul(fa);
R=X}return ja};J.prototype.invm=function(L){L=L._invmp((this||eb).m);return 0!==L.negative?(L.negative=0,this.imod(L).redNeg()):this.imod(L)};J.prototype.pow=function(L,Z){if(Z.isZero())return(new a(1)).toRed(this||eb);if(0===Z.cmpn(1))return L.clone();var R=Array(16);R[0]=(new a(1)).toRed(this||eb);R[1]=L;for(var X=2;X<R.length;X++)R[X]=this.mul(R[X-1],L);L=R[0];var ja=0,fa=0,ua=Z.bitLength()%26;0===ua&&(ua=26);for(X=Z.length-1;0<=X;X--){var gb=Z.words[X];for(--ua;0<=ua;ua--){var hb=gb>>ua&1;L!==
R[0]&&(L=this.sqr(L));0!==hb||0!==ja?(ja<<=1,ja|=hb,(4===++fa||0===X&&0===ua)&&(L=this.mul(L,R[ja]),fa=0,ja=0)):fa=0}ua=26}return L};J.prototype.convertTo=function(L){var Z=L.umod((this||eb).m);return Z===L?Z.clone():Z};J.prototype.convertFrom=function(L){L=L.clone();return L.red=null,L};a.mont=function(L){return new P(L)};l(P,J);P.prototype.convertTo=function(L){return this.imod(L.ushln((this||eb).shift))};P.prototype.convertFrom=function(L){L=this.imod(L.mul((this||eb).rinv));return L.red=null,
L};P.prototype.imul=function(L,Z){if(L.isZero()||Z.isZero())return L.words[0]=0,L.length=1,L;L=L.imul(Z);Z=L.maskn((this||eb).shift).mul((this||eb).minv).imaskn((this||eb).shift).mul((this||eb).m);Z=L=L.isub(Z).iushrn((this||eb).shift);return 0<=L.cmp((this||eb).m)?Z=L.isub((this||eb).m):0>L.cmpn(0)&&(Z=L.iadd((this||eb).m)),Z._forceRed(this||eb)};P.prototype.mul=function(L,Z){if(L.isZero()||Z.isZero())return(new a(0))._forceRed(this||eb);L=L.mul(Z);Z=L.maskn((this||eb).shift).mul((this||eb).minv).imaskn((this||
eb).shift).mul((this||eb).m);Z=L=L.isub(Z).iushrn((this||eb).shift);return 0<=L.cmp((this||eb).m)?Z=L.isub((this||eb).m):0>L.cmpn(0)&&(Z=L.iadd((this||eb).m)),Z._forceRed(this||eb)};P.prototype.invm=function(L){return this.imod(L._invmp((this||eb).m).mul((this||eb).r2))._forceRed(this||eb)}}(uba,tba);var Pm=uba.exports,PP,yY,vba=Object.freeze({}),PM="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global;if((PP=function(n){return yY||(yY=new $z(null)),yY.generate(n)}).Rand=
$z,$z.prototype.generate=function(n){return this._rand(n)},$z.prototype._rand=function(n){if((this||PM).rand.getBytes)return(this||PM).rand.getBytes(n);n=new Uint8Array(n);for(var b=0;b<n.length;b++)n[b]=(this||PM).rand.getByte();return n},"object"==typeof self)self.crypto&&self.crypto.getRandomValues?$z.prototype._rand=function(n){n=new Uint8Array(n);return self.crypto.getRandomValues(n),n}:self.msCrypto&&self.msCrypto.getRandomValues?$z.prototype._rand=function(n){n=new Uint8Array(n);return self.msCrypto.getRandomValues(n),
n}:"object"==typeof window&&($z.prototype._rand=function(){throw Error("Not implemented yet");});else try{if("function"!=typeof vba.randomBytes)throw Error("Not supported");$z.prototype._rand=function(n){return vba.randomBytes(n)}}catch(n){}var p5="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,cD=Pm,mka=PP;aA.create=function(n){return new aA(n)};aA.prototype._randbelow=function(n){var b=n.bitLength();b=Math.ceil(b/8);do var e=new cD((this||p5).rand.generate(b));while(0<=
e.cmp(n));return e};aA.prototype._randrange=function(n,b){b=b.sub(n);return n.add(this._randbelow(b))};aA.prototype.test=function(n,b,e){var l=n.bitLength(),a=cD.mont(n),f=(new cD(1)).toRed(a);b||(b=Math.max(1,l/48|0));l=n.subn(1);for(var m=0;!l.testn(m);m++);n=n.shrn(m);for(var r=l.toRed(a);0<b;b--){var v=this._randrange(new cD(2),l);e&&e(v);v=v.toRed(a).redPow(n);if(0!==v.cmp(f)&&0!==v.cmp(r)){for(var x=1;x<m;x++){if(0===(v=v.redSqr()).cmp(f))return!1;if(0===v.cmp(r))break}if(x===m)return!1}}return!0};
aA.prototype.getDivisor=function(n,b){var e=n.bitLength(),l=cD.mont(n),a=(new cD(1)).toRed(l);b||(b=Math.max(1,e/48|0));e=n.subn(1);for(var f=0;!e.testn(f);f++);for(var m=n.shrn(f),r=e.toRed(l);0<b;b--){var v=this._randrange(new cD(2),e),x=n.gcd(v);if(0!==x.cmpn(1))return x;v=v.toRed(l).redPow(m);if(0!==v.cmp(a)&&0!==v.cmp(r)){for(x=1;x<f;x++){if(0===(v=v.redSqr()).cmp(a))return v.fromRed().subn(1).gcd(n);if(0===v.cmp(r))break}if(x===f)return v.redSqr().fromRed().subn(1).gcd(n)}}return!1};var nka=
FA;PH.simpleSieve=kU;PH.fermatTest=mU;var kp=Pm,ska=new kp(24),r5=new aA,oka=new kp(1),nU=new kp(2),pka=new kp(5),qka=(new kp(16),new kp(8),new kp(10)),rka=new kp(3),tka=(new kp(7),new kp(11)),q5=new kp(4),lU=(new kp(12),null),Dj="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,mw=oi.Buffer,Ps=Pm,wba=new aA,jta=new Ps(24),kta=new Ps(11),lta=new Ps(10),mta=new Ps(3),nta=new Ps(7),QP={};Object.defineProperty(yu.prototype,"verifyError",{enumerable:!0,get:function(){if("number"!=
typeof(this||Dj)._primeCode){var n=(this||Dj).__prime;var b=(this||Dj).__gen.toString("hex"),e=[b,n.toString(16)].join("_");if(e in QP)n=QP[e];else{var l,a=0;if(!n.isEven()&&PH.simpleSieve&&PH.fermatTest(n)&&wba.test(n)){switch(wba.test(n.shrn(1))||(a+=2),b){case "02":n.mod(jta).cmp(kta)&&(a+=8);break;case "05":(l=n.mod(lta)).cmp(mta)&&l.cmp(nta)&&(a+=8);break;default:a+=4}n=(QP[e]=a,a)}else n=(a+=1,a+="02"===b||"05"===b?8:4,QP[e]=a,a)}(this||Dj)._primeCode=n}return(this||Dj)._primeCode}});yu.prototype.generateKeys=
function(){return(this||Dj)._priv||((this||Dj)._priv=new Ps(FA((this||Dj)._primeLen))),(this||Dj)._pub=(this||Dj)._gen.toRed((this||Dj)._prime).redPow((this||Dj)._priv).fromRed(),this.getPublicKey()};yu.prototype.computeSecret=function(n){n=(new Ps(n)).toRed((this||Dj)._prime).redPow((this||Dj)._priv).fromRed();n=new mw(n.toArray());var b=this.getPrime();n.length<b.length&&(b=new mw(b.length-n.length),b.fill(0),n=mw.concat([b,n]));return n};yu.prototype.getPublicKey=function(n){return QM((this||Dj)._pub,
n)};yu.prototype.getPrivateKey=function(n){return QM((this||Dj)._priv,n)};yu.prototype.getPrime=function(n){return QM((this||Dj).__prime,n)};yu.prototype.getGenerator=function(n){return QM((this||Dj)._gen,n)};yu.prototype.setGenerator=function(n,b){return b=b||"utf8",mw.isBuffer(n)||(n=new mw(n,b)),(this||Dj).__gen=n,(this||Dj)._gen=new Ps(n),this||Dj};var xba,yba,zba,IA=oi.Buffer,Aba={modp1:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a63a3620ffffffffffffffff"},
modp2:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece65381ffffffffffffffff"},modp5:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca237327ffffffffffffffff"},
modp14:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aacaa68ffffffffffffffff"},
modp15:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a93ad2caffffffffffffffff"},
modp16:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c934063199ffffffffffffffff"},
modp17:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dcc4024ffffffffffffffff"},
modp18:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dbe115974a3926f12fee5e438777cb6a932df8cd8bec4d073b931ba3bc832b68d9dd300741fa7bf8afc47ed2576f6936ba424663aab639c5ae4f5683423b4742bf1c978238f16cbe39d652de3fdb8befc848ad922222e04a4037c0713eb57a81a23f0c73473fc646cea306b4bcbc8862f8385ddfa9d4b7fa2c087e879683303ed5bdd3a062b3cf5b3a278a66d2a13f83f44f82ddf310ee074ab6a364597e899a0255dc164f31cc50846851df9ab48195ded7ea1b1d510bd7ee74d73faf36bc31ecfa268359046f4eb879f924009438b481c6cd7889a002ed5ee382bc9190da6fc026e479558e4475677e9aa9e3050e2765694dfc81f56e880b96e7160c980dd98edd3dfffffffffffffffff"}},
ota={binary:!0,hex:!0,base64:!0};var pta=xba=yba=function(n){var b=new IA(Aba[n].prime,"hex");n=new IA(Aba[n].gen,"hex");return new yu(b,n)};var qta=zba=function f(b,e,l,a){return IA.isBuffer(e)||void 0===ota[e]?f(b,"binary",e,l):(e=e||"binary",a=a||"binary",l=l||new IA([2]),IA.isBuffer(l)||(l=new IA(l,a)),"number"==typeof b?new yu(PH(b,l),l,!0):(IA.isBuffer(b)||(b=new IA(b,e)),new yu(b,l,!0)))};var wka=oi.Buffer,bA=Pm,t5=FA;RM.getr=s5;var JA={toArray:function(b,e){if(Array.isArray(b))return b.slice();
if(!b)return[];var l=[];if("string"!=typeof b){for(e=0;e<b.length;e++)l[e]=0|b[e];return l}if("hex"===e)for(0!=(b=b.replace(/[^a-z0-9]+/gi,"")).length%2&&(b="0"+b),e=0;e<b.length;e+=2)l.push(parseInt(b[e]+b[e+1],16));else for(e=0;e<b.length;e++){var a=b.charCodeAt(e),f=a>>8;a&=255;f?l.push(f,a):l.push(a)}return l}};JA.zero2=u5;JA.toHex=v5;JA.encode=function(b,e){return"hex"===e?v5(b):b};var Ti={},rta=Pm;Ti.assert=Vs;Ti.toArray=JA.toArray;Ti.zero2=JA.zero2;Ti.toHex=JA.toHex;Ti.encode=JA.encode;Ti.getNAF=
function(b,e,l){l=Array(Math.max(b.bitLength(),l)+1);l.fill(0);e=1<<e+1;b=b.clone();for(var a=0;a<l.length;a++){var f,m=b.andln(e-1);b.isOdd()?(f=m>(e>>1)-1?(e>>1)-m:m,b.isubn(f)):f=0;l[a]=f;b.iushrn(1)}return l};Ti.getJSF=function(b,e){var l=[[],[]];b=b.clone();e=e.clone();for(var a=0,f=0;0<b.cmpn(-a)||0<e.cmpn(-f);){var m;var r=b.andln(3)+a&3;var v=e.andln(3)+f&3;var x=(3===r&&(r=-1),3===v&&(v=-1),0==(1&r))?0:3!==(m=b.andln(7)+a&7)&&5!==m||2!==v?r:-r;r=(l[0].push(x),0==(1&v))?0:3!==(m=e.andln(7)+
f&7)&&5!==m||2!==r?v:-v;l[1].push(r);2*a===x+1&&(a=1-a);2*f===r+1&&(f=1-f);b.iushrn(1);e.iushrn(1)}return l};Ti.cachedProperty=function(b,e,l){var a="_"+e;b.prototype[e]=function(){return void 0!==this[a]?this[a]:this[a]=l.call(this)}};Ti.parseBytes=function(b){return"string"==typeof b?Ti.toArray(b,"hex"):b};Ti.intFromLE=function(b){return new rta(b,"hex","le")};var SM=Pm,xka=Ti.assert;jC.prototype._importDER=function(b,e){b=Ti.toArray(b,e);var l=new yka;if(48!==b[l.place++]||oU(b,l)+l.place!==b.length||
2!==b[l.place++])return!1;var a=oU(b,l);e=b.slice(l.place,a+l.place);if(l.place+=a,2!==b[l.place++])return!1;a=oU(b,l);if(b.length!==a+l.place)return!1;b=b.slice(l.place,a+l.place);return 0===e[0]&&128&e[1]&&(e=e.slice(1)),0===b[0]&&128&b[1]&&(b=b.slice(1)),this.r=new SM(e),this.s=new SM(b),this.recoveryParam=null,!0};jC.prototype.toDER=function(b){var e=this.r.toArray(),l=this.s.toArray();128&e[0]&&(e=[0].concat(e));128&l[0]&&(l=[0].concat(l));e=w5(e);for(l=w5(l);!(l[0]||128&l[1]);)l=l.slice(1);
var a=[2];pU(a,e.length);(a=a.concat(e)).push(2);pU(a,l.length);e=a.concat(l);l=[48];return pU(l,e.length),l=l.concat(e),Ti.encode(l,b)};var cg={},sta=Vs;cg.inherits=zi;cg.toArray=function(b,e){if(Array.isArray(b))return b.slice();if(!b)return[];var l=[];if("string"==typeof b)if(e){if("hex"===e)for(0!=(b=b.replace(/[^a-z0-9]+/gi,"")).length%2&&(b="0"+b),a=0;a<b.length;a+=2)l.push(parseInt(b[a]+b[a+1],16))}else for(var a=e=0;a<b.length;a++){var f=b.charCodeAt(a);if(128>f)l[e++]=f;else if(2048>f)l[e++]=
f>>6|192,l[e++]=63&f|128;else{var m=b,r=a;55296!=(64512&m.charCodeAt(r))||0>r||r+1>=m.length||56320!=(64512&m.charCodeAt(r+1))?(l[e++]=f>>12|224,l[e++]=f>>6&63|128,l[e++]=63&f|128):(f=65536+((1023&f)<<10)+(1023&b.charCodeAt(++a)),l[e++]=f>>18|240,l[e++]=f>>12&63|128,l[e++]=f>>6&63|128,l[e++]=63&f|128)}}else for(a=0;a<b.length;a++)l[a]=0|b[a];return l};cg.toHex=function(b){for(var e="",l=0;l<b.length;l++)e+=y5(b[l].toString(16));return e};cg.htonl=x5;cg.toHex32=function(b,e){for(var l="",a=0;a<b.length;a++){var f=
b[a];"little"===e&&(f=x5(f));l+=z5(f.toString(16))}return l};cg.zero2=y5;cg.zero8=z5;cg.join32=function(b,e,l,a){l-=e;sta(0==l%4);l=Array(l/4);for(var f=0;f<l.length;f++,e+=4)l[f]=("big"===a?b[e]<<24|b[e+1]<<16|b[e+2]<<8|b[e+3]:b[e+3]<<24|b[e+2]<<16|b[e+1]<<8|b[e])>>>0;return l};cg.split32=function(b,e){for(var l=Array(4*b.length),a=0,f=0;a<b.length;a++,f+=4){var m=b[a];"big"===e?(l[f]=m>>>24,l[f+1]=m>>>16&255,l[f+2]=m>>>8&255,l[f+3]=255&m):(l[f+3]=m>>>24,l[f+2]=m>>>16&255,l[f+1]=m>>>8&255,l[f]=255&
m)}return l};cg.rotr32=function(b,e){return b>>>e|b<<32-e};cg.rotl32=function(b,e){return b<<e|b>>>32-e};cg.sum32=function(b,e){return b+e>>>0};cg.sum32_3=function(b,e,l){return b+e+l>>>0};cg.sum32_4=function(b,e,l,a){return b+e+l+a>>>0};cg.sum32_5=function(b,e,l,a,f){return b+e+l+a+f>>>0};cg.sum64=function(b,e,l,a){var f=a+b[e+1]>>>0;b[e]=(f<a?1:0)+l+b[e]>>>0;b[e+1]=f};cg.sum64_hi=function(b,e,l,a){return(e+a>>>0<e?1:0)+b+l>>>0};cg.sum64_lo=function(b,e,l,a){return e+a>>>0};cg.sum64_4_hi=function(b,
e,l,a,f,m,r,v){var x=0,y=e;return x+=(y=y+a>>>0)<e?1:0,x+=(y=y+m>>>0)<m?1:0,b+l+f+r+(x+(y+v>>>0<v?1:0))>>>0};cg.sum64_4_lo=function(b,e,l,a,f,m,r,v){return e+a+m+v>>>0};cg.sum64_5_hi=function(b,e,l,a,f,m,r,v,x,y){var E=0,F=e;return E+=(F=F+a>>>0)<e?1:0,E+=(F=F+m>>>0)<m?1:0,E+=(F=F+v>>>0)<v?1:0,b+l+f+r+x+(E+(F+y>>>0<y?1:0))>>>0};cg.sum64_5_lo=function(b,e,l,a,f,m,r,v,x,y){return e+a+m+v+y>>>0};cg.rotr64_hi=function(b,e,l){return(e<<32-l|b>>>l)>>>0};cg.rotr64_lo=function(b,e,l){return(b<<32-l|e>>>l)>>>
0};cg.shr64_hi=function(b,e,l){return b>>>l};cg.shr64_lo=function(b,e,l){return(b<<32-l|e>>>l)>>>0};var OF={},tta=Vs;OF.BlockHash=TM;TM.prototype.update=function(b,e){if(b=cg.toArray(b,e),this.pending?this.pending=this.pending.concat(b):this.pending=b,this.pendingTotal+=b.length,this.pending.length>=this._delta8)for(e=(b=this.pending).length%this._delta8,this.pending=b.slice(b.length-e,b.length),0===this.pending.length&&(this.pending=null),b=cg.join32(b,0,b.length-e,this.endian),e=0;e<b.length;e+=
this._delta32)this._update(b,e,e+this._delta32);return this};TM.prototype.digest=function(b){return this.update(this._pad()),tta(null===this.pending),this._digest(b)};TM.prototype._pad=function(){var b=this.pendingTotal,e=this._delta8,l=e-(b+this.padLength)%e;e=Array(l+this.padLength);e[0]=128;for(var a=1;a<l;a++)e[a]=0;if(b<<=3,"big"===this.endian){for(l=8;l<this.padLength;l++)e[a++]=0;e[a++]=0;e[a++]=0;e[a++]=0;e[a++]=0;e[a++]=b>>>24&255;e[a++]=b>>>16&255;e[a++]=b>>>8&255;e[a++]=255&b}else for(e[a++]=
255&b,e[a++]=b>>>8&255,e[a++]=b>>>16&255,e[a++]=b>>>24&255,e[a++]=0,e[a++]=0,e[a++]=0,e[a++]=0,l=8;l<this.padLength;l++)e[a++]=0;return e};var uta=Vs,Rw=cg.rotr64_hi,Sw=cg.rotr64_lo,Bba=cg.shr64_hi,Cba=cg.shr64_lo,KA=cg.sum64,zY=cg.sum64_hi,AY=cg.sum64_lo,vta=cg.sum64_4_hi,wta=cg.sum64_4_lo,xta=cg.sum64_5_hi,yta=cg.sum64_5_lo,A5=OF.BlockHash,zka=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,
2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,
3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,
1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,
4234509866,1607167915,987167468,1816402316,1246189591];cg.inherits(Qs,A5);Qs.blockSize=1024;Qs.outSize=512;Qs.hmacStrength=192;Qs.padLength=128;Qs.prototype._prepareBlock=function(b,e){for(var l=this.W,a=0;32>a;a++)l[a]=b[e+a];for(;a<l.length;a+=2){b=l[a-4];e=l[a-3];e=Rw(b,e,19)^Rw(e,b,29)^Bba(b,e,6);b=(0>e&&(e+=4294967296),e);e=l[a-4];var f=l[a-3];f=Sw(e,f,19)^Sw(f,e,29)^Cba(e,f,6);e=(0>f&&(f+=4294967296),f);f=l[a-14];var m=l[a-13];var r=l[a-30];var v=l[a-29];v=Rw(r,v,1)^Rw(r,v,8)^Bba(r,v,7);r=(0>
v&&(v+=4294967296),v);v=l[a-30];var x=l[a-29];x=Sw(v,x,1)^Sw(v,x,8)^Cba(v,x,7);v=(0>x&&(x+=4294967296),x);x=l[a-32];var y=l[a-31];l[a]=vta(b,e,f,m,r,v,x,y);l[a+1]=wta(b,e,f,m,r,v,x,y)}};Qs.prototype._update=function(b,e){this._prepareBlock(b,e);b=this.W;e=this.h[0];var l=this.h[1],a=this.h[2],f=this.h[3],m=this.h[4],r=this.h[5],v=this.h[6],x=this.h[7],y=this.h[8],E=this.h[9],F=this.h[10],I=this.h[11],J=this.h[12],P=this.h[13],N=this.h[14],Y=this.h[15];uta(this.k.length===b.length);for(var W=0;W<b.length;W+=
2){var da=y;var va=E;da=Rw(da,va,14)^Rw(da,va,18)^Rw(va,da,9);va=(0>da&&(da+=4294967296),da);da=y;var za=E;da=Sw(da,za,14)^Sw(da,za,18)^Sw(za,da,9);var L=(0>da&&(da+=4294967296),da);da=y&F^~y&J;za=(0>da&&(da+=4294967296),da);da=E&I^~E&P;var Z=(0>da&&(da+=4294967296),da);var R=this.k[W],X=this.k[W+1],ja=b[W],fa=b[W+1];da=xta(N,Y,va,L,za,Z,R,X,ja,fa);za=yta(N,Y,va,L,za,Z,R,X,ja,fa);N=e;Y=l;Y=Rw(N,Y,28)^Rw(Y,N,2)^Rw(Y,N,7);N=(0>Y&&(Y+=4294967296),Y);Y=e;va=l;va=Sw(Y,va,28)^Sw(va,Y,2)^Sw(va,Y,7);Y=(0>
va&&(va+=4294967296),va);L=e&a^e&m^a&m;va=(0>L&&(L+=4294967296),L);Z=l&f^l&r^f&r;L=(0>Z&&(Z+=4294967296),Z);Z=zY(N,Y,va,L);va=AY(N,Y,va,L);N=J;Y=P;J=F;P=I;F=y;I=E;y=zY(v,x,da,za);E=AY(x,x,da,za);v=m;x=r;m=a;r=f;a=e;f=l;e=zY(da,za,Z,va);l=AY(da,za,Z,va)}KA(this.h,0,e,l);KA(this.h,2,a,f);KA(this.h,4,m,r);KA(this.h,6,v,x);KA(this.h,8,y,E);KA(this.h,10,F,I);KA(this.h,12,J,P);KA(this.h,14,N,Y)};Qs.prototype._digest=function(b){return"hex"===b?cg.toHex32(this.h,"big"):cg.split32(this.h,"big")};var Tw=cg.rotr32,
zta=Vs,Uu=cg.sum32,Ata=cg.sum32_4,Bta=cg.sum32_5,B5=OF.BlockHash,Aka=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,
2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];cg.inherits(zu,B5);zu.blockSize=512;zu.outSize=256;zu.hmacStrength=192;zu.padLength=64;zu.prototype._update=function(b,e){for(var l=this.W,a=0;16>a;a++)l[a]=b[e+a];for(;a<l.length;a++){b=a;e=l[a-2];e=Tw(e,17)^Tw(e,19)^e>>>10;var f=l[a-7];var m=l[a-15];m=
Tw(m,7)^Tw(m,18)^m>>>3;l[b]=Ata(e,f,m,l[a-16])}b=this.h[0];e=this.h[1];f=this.h[2];m=this.h[3];var r=this.h[4],v=this.h[5],x=this.h[6],y=this.h[7];zta(this.k.length===l.length);for(a=0;a<l.length;a++){var E=y;y=r;y=Tw(y,6)^Tw(y,11)^Tw(y,25);E=Bta(E,y,r&v^~r&x,this.k[a],l[a]);y=b;y=Tw(y,2)^Tw(y,13)^Tw(y,22);var F=Uu(y,b&e^b&f^e&f);y=x;x=v;v=r;r=Uu(m,E);m=f;f=e;e=b;b=Uu(E,F)}this.h[0]=Uu(this.h[0],b);this.h[1]=Uu(this.h[1],e);this.h[2]=Uu(this.h[2],f);this.h[3]=Uu(this.h[3],m);this.h[4]=Uu(this.h[4],
r);this.h[5]=Uu(this.h[5],v);this.h[6]=Uu(this.h[6],x);this.h[7]=Uu(this.h[7],y)};zu.prototype._digest=function(b){return"hex"===b?cg.toHex32(this.h,"big"):cg.split32(this.h,"big")};var BY=cg.rotl32,rJ=cg.sum32,Cta=cg.sum32_5,C5=OF.BlockHash,Dta=[1518500249,1859775393,2400959708,3395469782];cg.inherits(nw,C5);nw.blockSize=512;nw.outSize=160;nw.hmacStrength=80;nw.padLength=64;nw.prototype._update=function(b,e){for(var l=this.W,a=0;16>a;a++)l[a]=b[e+a];for(;a<l.length;a++)l[a]=BY(l[a-3]^l[a-8]^l[a-
14]^l[a-16],1);b=this.h[0];e=this.h[1];var f=this.h[2],m=this.h[3],r=this.h[4];for(a=0;a<l.length;a++){var v=~~(a/20);v=Cta(BY(b,5),0===v?e&f^~e&m:1===v||3===v?e^f^m:2===v?e&f^e&m^f&m:void 0,r,l[a],Dta[v]);r=m;m=f;f=BY(e,30);e=b;b=v}this.h[0]=rJ(this.h[0],b);this.h[1]=rJ(this.h[1],e);this.h[2]=rJ(this.h[2],f);this.h[3]=rJ(this.h[3],m);this.h[4]=rJ(this.h[4],r)};nw.prototype._digest=function(b){return"hex"===b?cg.toHex32(this.h,"big"):cg.split32(this.h,"big")};var D5=zu;cg.inherits(gy,D5);gy.blockSize=
512;gy.outSize=224;gy.hmacStrength=192;gy.padLength=64;gy.prototype._digest=function(b){return"hex"===b?cg.toHex32(this.h.slice(0,7),"big"):cg.split32(this.h.slice(0,7),"big")};var E5=Qs;cg.inherits(hy,E5);hy.blockSize=1024;hy.outSize=384;hy.hmacStrength=192;hy.padLength=128;hy.prototype._digest=function(b){return"hex"===b?cg.toHex32(this.h.slice(0,12),"big"):cg.split32(this.h.slice(0,12),"big")};var PF={};PF.sha1=nw;PF.sha224=gy;PF.sha256=zu;PF.sha384=hy;PF.sha512=Qs;var Dba={},RP=cg.rotl32,Eba=
cg.sum32,sJ=cg.sum32_3,Fba=cg.sum32_4,F5=OF.BlockHash;cg.inherits(ow,F5);Dba.ripemd160=ow;ow.blockSize=512;ow.outSize=160;ow.hmacStrength=192;ow.padLength=64;ow.prototype._update=function(b,e){for(var l=this.h[0],a=this.h[1],f=this.h[2],m=this.h[3],r=this.h[4],v=l,x=a,y=f,E=m,F=r,I=0;80>I;I++){var J=Eba(RP(Fba(l,G5(I,a,f,m),b[Eta[I]+e],15>=I?0:31>=I?1518500249:47>=I?1859775393:63>=I?2400959708:2840853838),Fta[I]),r);l=r;r=m;m=RP(f,10);f=a;a=J;J=Eba(RP(Fba(v,G5(79-I,x,y,E),b[Gta[I]+e],15>=I?1352829926:
31>=I?1548603684:47>=I?1836072691:63>=I?2053994217:0),Hta[I]),F);v=F;F=E;E=RP(y,10);y=x;x=J}J=sJ(this.h[1],f,E);this.h[1]=sJ(this.h[2],m,F);this.h[2]=sJ(this.h[3],r,v);this.h[3]=sJ(this.h[4],l,x);this.h[4]=sJ(this.h[0],a,y);this.h[0]=J};ow.prototype._digest=function(b){return"hex"===b?cg.toHex32(this.h,"little"):cg.split32(this.h,"little")};var Eta=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,
2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],Gta=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],Fta=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],Hta=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,
8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],Bka=cg,Ita=Vs;QE.prototype._init=function(b){b.length>this.blockSize&&(b=(new this.Hash).update(b).digest());Ita(b.length<=this.blockSize);for(var e=b.length;e<this.blockSize;e++)b.push(0);for(e=0;e<b.length;e++)b[e]^=54;this.inner=(new this.Hash).update(b);for(e=0;e<b.length;e++)b[e]^=106;this.outer=(new this.Hash).update(b)};QE.prototype.update=function(b,
e){return this.inner.update(b,e),this};QE.prototype.digest=function(b){return this.outer.update(this.inner.digest()),this.outer.digest(b)};var ll={};ll.utils=cg;ll.common=OF;ll.sha=PF;ll.ripemd=Dba;ll.hmac=QE;ll.sha1=ll.sha.sha1;ll.sha256=ll.sha.sha256;ll.sha224=ll.sha.sha224;ll.sha384=ll.sha.sha384;ll.sha512=ll.sha.sha512;ll.ripemd160=ll.ripemd.ripemd160;var kC=JA,H5=Vs;iy.prototype._init=function(b,e,l){b=b.concat(e).concat(l);this.K=Array(this.outLen/8);this.V=Array(this.outLen/8);for(e=0;e<this.V.length;e++)this.K[e]=
0,this.V[e]=1;this._update(b);this._reseed=1;this.reseedInterval=281474976710656};iy.prototype._hmac=function(){return new ll.hmac(this.hash,this.K)};iy.prototype._update=function(b){var e=this._hmac().update(this.V).update([0]);b&&(e=e.update(b));this.K=e.digest();this.V=this._hmac().update(this.V).digest();b&&(this.K=this._hmac().update(this.V).update([1]).update(b).digest(),this.V=this._hmac().update(this.V).digest())};iy.prototype.reseed=function(b,e,l,a){"string"!=typeof e&&(a=l,l=e,e=null);
b=kC.toArray(b,e);l=kC.toArray(l,a);H5(b.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits");this._update(b.concat(l||[]));this._reseed=1};iy.prototype.generate=function(b,e,l,a){if(this._reseed>this.reseedInterval)throw Error("Reseed is required");"string"!=typeof e&&(a=l,l=e,e=null);l&&(l=kC.toArray(l,a||"hex"),this._update(l));for(a=[];a.length<b;)this.V=this._hmac().update(this.V).digest(),a=a.concat(this.V);b=a.slice(0,b);return this._update(l),this._reseed++,
kC.encode(b,e)};var lC=Pm,SP=Ti.getNAF,Jta=Ti.getJSF,TP=Ti.assert;Au.prototype.point=function(){throw Error("Not implemented");};Au.prototype.validate=function(){throw Error("Not implemented");};Au.prototype._fixedNafMul=function(b,e){TP(b.precomputed);b=b._getDoubles();var l=SP(e,1,this._bitLength),a=(1<<b.step+1)-(0==b.step%2?2:1);a/=3;for(var f=[],m=0;m<l.length;m+=b.step){var r=0;for(e=m+b.step-1;e>=m;e--)r=(r<<1)+l[e];f.push(r)}e=this.jpoint(null,null,null);for(l=this.jpoint(null,null,null);0<
a;a--){for(m=0;m<f.length;m++)(r=f[m])===a?l=l.mixedAdd(b.points[m]):r===-a&&(l=l.mixedAdd(b.points[m].neg()));e=e.add(l)}return e.toP()};Au.prototype._wnafMul=function(b,e){var l=b._getNAFPoints(4),a=l.points;l=SP(e,l.wnd,this._bitLength);for(var f=this.jpoint(null,null,null),m=l.length-1;0<=m;m--){for(e=0;0<=m&&0===l[m];m--)e++;if(0<=m&&e++,f=f.dblp(e),0>m)break;e=l[m];TP(0!==e);f="affine"===b.type?0<e?f.mixedAdd(a[e-1>>1]):f.mixedAdd(a[-e-1>>1].neg()):0<e?f.add(a[e-1>>1]):f.add(a[-e-1>>1].neg())}return"affine"===
b.type?f.toP():f};Au.prototype._wnafMulAdd=function(b,e,l,a,f){for(var m=this._wnafT1,r=this._wnafT2,v=this._wnafT3,x=0,y=0;y<a;y++){var E=(N=e[y])._getNAFPoints(b);m[y]=E.wnd;r[y]=E.points}for(y=a-1;1<=y;y-=2){E=y-1;var F=y;if(1===m[E]&&1===m[F]){var I=[e[E],null,null,e[F]];0===e[E].y.cmp(e[F].y)?(I[1]=e[E].add(e[F]),I[2]=e[E].toJ().mixedAdd(e[F].neg())):0===e[E].y.cmp(e[F].y.redNeg())?(I[1]=e[E].toJ().mixedAdd(e[F]),I[2]=e[E].add(e[F].neg())):(I[1]=e[E].toJ().mixedAdd(e[F]),I[2]=e[E].toJ().mixedAdd(e[F].neg()));
var J=[-3,-1,-5,-7,0,7,5,1,3],P=Jta(l[E],l[F]);x=Math.max(P[0].length,x);v[E]=Array(x);v[F]=Array(x);for(b=0;b<x;b++)v[E][b]=J[3*((0|P[0][b])+1)+((0|P[1][b])+1)],v[F][b]=0,r[E]=I}else v[E]=SP(l[E],m[E],this._bitLength),v[F]=SP(l[F],m[F],this._bitLength),x=Math.max(v[E].length,x),x=Math.max(v[F].length,x)}e=this.jpoint(null,null,null);l=this._wnafT4;for(y=x;0<=y;y--){for(x=0;0<=y;){m=!0;for(b=0;b<a;b++)l[b]=0|v[b][y],0!==l[b]&&(m=!1);if(!m)break;x++;y--}if(0<=y&&x++,e=e.dblp(x),0>y)break;for(b=0;b<
a;b++){var N;x=l[b];0!==x&&(0<x?N=r[b][x-1>>1]:0>x&&(N=r[b][-x-1>>1].neg()),e="affine"===N.type?e.mixedAdd(N):e.add(N))}}for(y=0;y<a;y++)r[y]=null;return f?e:e.toP()};Au.BasePoint=Rs;Rs.prototype.eq=function(){throw Error("Not implemented");};Rs.prototype.validate=function(){return this.curve.validate(this)};Au.prototype.decodePoint=function(b,e){b=Ti.toArray(b,e);e=this.p.byteLength();if((4===b[0]||6===b[0]||7===b[0])&&b.length-1==2*e)return 6===b[0]?TP(0==b[b.length-1]%2):7===b[0]&&TP(1==b[b.length-
1]%2),this.point(b.slice(1,1+e),b.slice(1+e,1+2*e));if((2===b[0]||3===b[0])&&b.length-1===e)return this.pointFromX(b.slice(1,1+e),3===b[0]);throw Error("Unknown point format");};Rs.prototype.encodeCompressed=function(b){return this.encode(b,!0)};Rs.prototype._encode=function(b){var e=this.curve.p.byteLength(),l=this.getX().toArray("be",e);return b?[this.getY().isEven()?2:3].concat(l):[4].concat(l,this.getY().toArray("be",e))};Rs.prototype.encode=function(b,e){return Ti.encode(this._encode(e),b)};
Rs.prototype.precompute=function(b){if(this.precomputed)return this;var e={doubles:null,naf:null,beta:null};return e.naf=this._getNAFPoints(8),e.doubles=this._getDoubles(4,b),e.beta=this._getBeta(),this.precomputed=e,this};Rs.prototype._hasDoubles=function(b){if(!this.precomputed)return!1;var e=this.precomputed.doubles;return!!e&&e.points.length>=Math.ceil((b.bitLength()+1)/e.step)};Rs.prototype._getDoubles=function(b,e){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;
for(var l=[this],a=this,f=0;f<e;f+=b){for(var m=0;m<b;m++)a=a.dbl();l.push(a)}return{step:b,points:l}};Rs.prototype._getNAFPoints=function(b){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var e=[this],l=(1<<b)-1,a=1===l?null:this.dbl(),f=1;f<l;f++)e[f]=e[f-1].add(a);return{wnd:b,points:e}};Rs.prototype._getBeta=function(){return null};Rs.prototype.dblp=function(b){for(var e=this,l=0;l<b;l++)e=e.dbl();return e};var $l=Pm,CY=zi,RE=Au,Kta=Ti.assert;CY(Ss,RE);Ss.prototype._getEndomorphism=
function(b){if(this.zeroA&&this.g&&this.n&&1===this.p.modn(3)){if(b.beta)var e=(new $l(b.beta,16)).toRed(this.red);else e=this._getEndoRoots(this.p),e=(e=0>e[0].cmp(e[1])?e[0]:e[1]).toRed(this.red);if(b.lambda)var l=new $l(b.lambda,16);else{var a=this._getEndoRoots(this.n);0===this.g.mul(a[0]).x.cmp(this.g.x.redMul(e))?l=a[0]:(l=a[1],Kta(0===this.g.mul(l).x.cmp(this.g.x.redMul(e))))}return{beta:e,lambda:l,basis:b.basis?b.basis.map(function(f){return{a:new $l(f.a,16),b:new $l(f.b,16)}}):this._getEndoBasis(l)}}};
Ss.prototype._getEndoRoots=function(b){var e=b===this.p?this.red:$l.mont(b),l=(new $l(2)).toRed(e).redInvm();b=l.redNeg();e=(new $l(3)).toRed(e).redNeg().redSqrt().redMul(l);return[b.redAdd(e).fromRed(),b.redSub(e).fromRed()]};Ss.prototype._getEndoBasis=function(b){for(var e,l,a,f,m,r,v,x=this.n.ushrn(Math.floor(this.n.bitLength()/2)),y=this.n.clone(),E=new $l(1),F=new $l(0),I=new $l(0),J=new $l(1),P=0;0!==b.cmpn(0);){var N=y.div(b);v=y.sub(N.mul(b));r=I.sub(N.mul(E));N=J.sub(N.mul(F));if(!a&&0>v.cmp(x))e=
m.neg(),l=E,a=v.neg(),f=r;else if(a&&2==++P)break;m=v;y=b;b=v;I=E;E=r;J=F;F=N}m=v.neg();v=a.sqr().add(f.sqr());return 0<=m.sqr().add(r.sqr()).cmp(v)&&(m=e,r=l),a.negative&&(a=a.neg(),f=f.neg()),m.negative&&(m=m.neg(),r=r.neg()),[{a:a,b:f},{a:m,b:r}]};Ss.prototype._endoSplit=function(b){var e=this.endo.basis,l=e[0],a=e[1],f=a.b.mul(b).divRound(this.n),m=l.b.neg().mul(b).divRound(this.n);e=f.mul(l.a);var r=m.mul(a.a);l=f.mul(l.b);a=m.mul(a.b);return{k1:b.sub(e).sub(r),k2:l.add(a).neg()}};Ss.prototype.pointFromX=
function(b,e){(b=new $l(b,16)).red||(b=b.toRed(this.red));var l=b.redSqr().redMul(b).redIAdd(b.redMul(this.a)).redIAdd(this.b),a=l.redSqrt();if(0!==a.redSqr().redSub(l).cmp(this.zero))throw Error("invalid point");l=a.fromRed().isOdd();return(e&&!l||!e&&l)&&(a=a.redNeg()),this.point(b,a)};Ss.prototype.validate=function(b){if(b.inf)return!0;var e=b.x;b=b.y;var l=this.a.redMul(e);e=e.redSqr().redMul(e).redIAdd(l).redIAdd(this.b);return 0===b.redSqr().redISub(e).cmpn(0)};Ss.prototype._endoWnafMulAdd=
function(b,e,l){for(var a=this._endoWnafT1,f=this._endoWnafT2,m=0;m<b.length;m++){var r=this._endoSplit(e[m]),v=b[m],x=v._getBeta();r.k1.negative&&(r.k1.ineg(),v=v.neg(!0));r.k2.negative&&(r.k2.ineg(),x=x.neg(!0));a[2*m]=v;a[2*m+1]=x;f[2*m]=r.k1;f[2*m+1]=r.k2}b=this._wnafMulAdd(1,a,f,2*m,l);for(e=0;e<2*m;e++)a[e]=null,f[e]=null;return b};CY(Yn,RE.BasePoint);Ss.prototype.point=function(b,e,l){return new Yn(this,b,e,l)};Ss.prototype.pointFromJSON=function(b,e){return Yn.fromJSON(this,b,e)};Yn.prototype._getBeta=
function(){if(this.curve.endo){var b=this.precomputed;if(b&&b.beta)return b.beta;var e=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(b){var l=this.curve,a=function(f){return l.point(f.x.redMul(l.endo.beta),f.y)};b.beta=e;e.precomputed={beta:null,naf:b.naf&&{wnd:b.naf.wnd,points:b.naf.points.map(a)},doubles:b.doubles&&{step:b.doubles.step,points:b.doubles.points.map(a)}}}return e}};Yn.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&
{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]};Yn.fromJSON=function(b,e,l){function a(m){return b.point(m[0],m[1],l)}"string"==typeof e&&(e=JSON.parse(e));var f=b.point(e[0],e[1],l);if(!e[2])return f;e=e[2];return f.precomputed={beta:null,doubles:e.doubles&&{step:e.doubles.step,points:[f].concat(e.doubles.points.map(a))},naf:e.naf&&{wnd:e.naf.wnd,
points:[f].concat(e.naf.points.map(a))}},f};Yn.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"};Yn.prototype.isInfinity=function(){return this.inf};Yn.prototype.add=function(b){if(this.inf)return b;if(b.inf)return this;if(this.eq(b))return this.dbl();if(this.neg().eq(b)||0===this.x.cmp(b.x))return this.curve.point(null,null);var e=this.y.redSub(b.y);0!==e.cmpn(0)&&(e=e.redMul(this.x.redSub(b.x).redInvm()));
b=e.redSqr().redISub(this.x).redISub(b.x);e=e.redMul(this.x.redSub(b)).redISub(this.y);return this.curve.point(b,e)};Yn.prototype.dbl=function(){if(this.inf)return this;var b=this.y.redAdd(this.y);if(0===b.cmpn(0))return this.curve.point(null,null);var e=this.curve.a,l=this.x.redSqr();b=b.redInvm();l=l.redAdd(l).redIAdd(l).redIAdd(e).redMul(b);e=l.redSqr().redISub(this.x.redAdd(this.x));l=l.redMul(this.x.redSub(e)).redISub(this.y);return this.curve.point(e,l)};Yn.prototype.getX=function(){return this.x.fromRed()};
Yn.prototype.getY=function(){return this.y.fromRed()};Yn.prototype.mul=function(b){return b=new $l(b,16),this.isInfinity()?this:this._hasDoubles(b)?this.curve._fixedNafMul(this,b):this.curve.endo?this.curve._endoWnafMulAdd([this],[b]):this.curve._wnafMul(this,b)};Yn.prototype.mulAdd=function(b,e,l){e=[this,e];b=[b,l];return this.curve.endo?this.curve._endoWnafMulAdd(e,b):this.curve._wnafMulAdd(1,e,b,2)};Yn.prototype.jmulAdd=function(b,e,l){e=[this,e];b=[b,l];return this.curve.endo?this.curve._endoWnafMulAdd(e,
b,!0):this.curve._wnafMulAdd(1,e,b,2,!0)};Yn.prototype.eq=function(b){return this===b||this.inf===b.inf&&(this.inf||0===this.x.cmp(b.x)&&0===this.y.cmp(b.y))};Yn.prototype.neg=function(b){if(this.inf)return this;var e=this.curve.point(this.x,this.y.redNeg());if(b&&this.precomputed){b=this.precomputed;var l=function(a){return a.neg()};e.precomputed={naf:b.naf&&{wnd:b.naf.wnd,points:b.naf.points.map(l)},doubles:b.doubles&&{step:b.doubles.step,points:b.doubles.points.map(l)}}}return e};Yn.prototype.toJ=
function(){return this.inf?this.curve.jpoint(null,null,null):this.curve.jpoint(this.x,this.y,this.curve.one)};CY(Fo,RE.BasePoint);Ss.prototype.jpoint=function(b,e,l){return new Fo(this,b,e,l)};Fo.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var b=this.z.redInvm(),e=b.redSqr(),l=this.x.redMul(e);b=this.y.redMul(e).redMul(b);return this.curve.point(l,b)};Fo.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)};Fo.prototype.add=function(b){if(this.isInfinity())return b;
if(b.isInfinity())return this;var e=b.z.redSqr(),l=this.z.redSqr(),a=this.x.redMul(e),f=b.x.redMul(l);e=this.y.redMul(e.redMul(b.z));l=b.y.redMul(l.redMul(this.z));f=a.redSub(f);l=e.redSub(l);if(0===f.cmpn(0))return 0!==l.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var m=f.redSqr(),r=m.redMul(f);m=a.redMul(m);a=l.redSqr().redIAdd(r).redISub(m).redISub(m);e=l.redMul(m.redISub(a)).redISub(e.redMul(r));b=this.z.redMul(b.z).redMul(f);return this.curve.jpoint(a,e,b)};Fo.prototype.mixedAdd=function(b){if(this.isInfinity())return b.toJ();
if(b.isInfinity())return this;var e=this.z.redSqr(),l=this.x,a=b.x.redMul(e),f=this.y;b=b.y.redMul(e).redMul(this.z);a=l.redSub(a);b=f.redSub(b);if(0===a.cmpn(0))return 0!==b.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var m=a.redSqr();e=m.redMul(a);m=l.redMul(m);l=b.redSqr().redIAdd(e).redISub(m).redISub(m);f=b.redMul(m.redISub(l)).redISub(f.redMul(e));a=this.z.redMul(a);return this.curve.jpoint(l,f,a)};Fo.prototype.dblp=function(b){if(0===b||this.isInfinity())return this;if(!b)return this.dbl();
if(this.curve.zeroA||this.curve.threeA){for(var e=this,l=0;l<b;l++)e=e.dbl();return e}e=this.curve.a;var a=this.curve.tinv,f=this.x;l=this.y;var m=this.z,r=m.redSqr().redSqr(),v=l.redAdd(l);for(l=0;l<b;l++){var x=f.redSqr(),y=v.redSqr(),E=y.redSqr();x=x.redAdd(x).redIAdd(x).redIAdd(e.redMul(r));y=f.redMul(y);f=x.redSqr().redISub(y.redAdd(y));y=y.redISub(f);x=x.redMul(y);x=x.redIAdd(x).redISub(E);m=v.redMul(m);l+1<b&&(r=r.redMul(E));v=x}return this.curve.jpoint(f,v.redMul(a),m)};Fo.prototype.dbl=function(){return this.isInfinity()?
this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()};Fo.prototype._zeroDbl=function(){if(this.zOne){var b=this.x.redSqr();var e=this.y.redSqr();var l=e.redSqr();e=this.x.redAdd(e).redSqr().redISub(b).redISub(l);e=e.redIAdd(e);b=b.redAdd(b).redIAdd(b);var a=b.redSqr().redISub(e).redISub(e),f=l.redIAdd(l);f=(f=f.redIAdd(f)).redIAdd(f);l=a;b=b.redMul(e.redISub(a)).redISub(f);e=this.y.redAdd(this.y)}else{a=this.x.redSqr();b=this.y.redSqr();l=b.redSqr();b=this.x.redAdd(b).redSqr().redISub(a).redISub(l);
b=b.redIAdd(b);a=a.redAdd(a).redIAdd(a);f=a.redSqr();var m=l.redIAdd(l);m=(m=m.redIAdd(m)).redIAdd(m);l=f.redISub(b).redISub(b);b=a.redMul(b.redISub(l)).redISub(m);e=(e=this.y.redMul(this.z)).redIAdd(e)}return this.curve.jpoint(l,b,e)};Fo.prototype._threeDbl=function(){var b;if(this.zOne){var e=this.x.redSqr();var l=this.y.redSqr();var a=l.redSqr();l=this.x.redAdd(l).redSqr().redISub(e).redISub(a);l=l.redIAdd(l);var f=e.redAdd(e).redIAdd(e).redIAdd(this.curve.a);e=b=f.redSqr().redISub(l).redISub(l);
a=a.redIAdd(a);a=(a=a.redIAdd(a)).redIAdd(a);a=f.redMul(l.redISub(b)).redISub(a);b=this.y.redAdd(this.y)}else b=this.z.redSqr(),l=this.y.redSqr(),e=this.x.redMul(l),a=this.x.redSub(b).redMul(this.x.redAdd(b)),a=a.redAdd(a).redIAdd(a),f=e.redIAdd(e),e=(f=f.redIAdd(f)).redAdd(f),e=a.redSqr().redISub(e),b=this.y.redAdd(this.z).redSqr().redISub(l).redISub(b),l=l.redSqr(),l=(l=(l=l.redIAdd(l)).redIAdd(l)).redIAdd(l),a=a.redMul(f.redISub(e)).redISub(l);return this.curve.jpoint(e,a,b)};Fo.prototype._dbl=
function(){var b=this.curve.a,e=this.x,l=this.y,a=this.z,f=a.redSqr().redSqr(),m=e.redSqr(),r=l.redSqr();b=m.redAdd(m).redIAdd(m).redIAdd(b.redMul(f));e=e.redAdd(e);f=e.redIAdd(e).redMul(r);e=b.redSqr().redISub(f.redAdd(f));f=f.redISub(e);r=r.redSqr();r=(r=(r=r.redIAdd(r)).redIAdd(r)).redIAdd(r);r=b.redMul(f).redISub(r);l=l.redAdd(l).redMul(a);return this.curve.jpoint(e,r,l)};Fo.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var b=this.x.redSqr(),e=this.y.redSqr(),l=this.z.redSqr(),
a=e.redSqr(),f=b.redAdd(b).redIAdd(b),m=f.redSqr();b=this.x.redAdd(e).redSqr().redISub(b).redISub(a);var r=(b=(b=(b=b.redIAdd(b)).redAdd(b).redIAdd(b)).redISub(m)).redSqr();a=a.redIAdd(a);a=(a=(a=a.redIAdd(a)).redIAdd(a)).redIAdd(a);f=f.redIAdd(b).redSqr().redISub(m).redISub(r).redISub(a);e=e.redMul(f);e=(e=e.redIAdd(e)).redIAdd(e);e=this.x.redMul(r).redISub(e);e=(e=e.redIAdd(e)).redIAdd(e);a=this.y.redMul(f.redMul(a.redISub(f)).redISub(b.redMul(r)));a=(a=(a=a.redIAdd(a)).redIAdd(a)).redIAdd(a);l=
this.z.redAdd(b).redSqr().redISub(l).redISub(r);return this.curve.jpoint(e,a,l)};Fo.prototype.mul=function(b,e){return b=new $l(b,e),this.curve._wnafMul(this,b)};Fo.prototype.eq=function(b){if("affine"===b.type)return this.eq(b.toJ());if(this===b)return!0;var e=this.z.redSqr(),l=b.z.redSqr();if(0!==this.x.redMul(l).redISub(b.x.redMul(e)).cmpn(0))return!1;e=e.redMul(this.z);l=l.redMul(b.z);return 0===this.y.redMul(l).redISub(b.y.redMul(e)).cmpn(0)};Fo.prototype.eqXToP=function(b){var e=this.z.redSqr(),
l=b.toRed(this.curve.red).redMul(e);if(0===this.x.cmp(l))return!0;b=b.clone();for(e=this.curve.redN.redMul(e);;){if(b.iadd(this.curve.n),0<=b.cmp(this.curve.p))return!1;if(l.redIAdd(e),0===this.x.cmp(l))return!0}};Fo.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"};Fo.prototype.isInfinity=function(){return 0===this.z.cmpn(0)};var TE=Pm,Gba=zi,UM=Au;Gba(SE,UM);SE.prototype.validate=
function(b){b=b.normalize().x;var e=b.redSqr();b=e.redMul(b).redAdd(e.redMul(this.a)).redAdd(b);return 0===b.redSqrt().redSqr().cmp(b)};Gba(Zn,UM.BasePoint);SE.prototype.decodePoint=function(b,e){return this.point(Ti.toArray(b,e),1)};SE.prototype.point=function(b,e){return new Zn(this,b,e)};SE.prototype.pointFromJSON=function(b){return Zn.fromJSON(this,b)};Zn.prototype.precompute=function(){};Zn.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())};Zn.fromJSON=function(b,
e){return new Zn(b,e[0],e[1]||b.one)};Zn.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"};Zn.prototype.isInfinity=function(){return 0===this.z.cmpn(0)};Zn.prototype.dbl=function(){var b=this.x.redAdd(this.z).redSqr(),e=this.x.redSub(this.z).redSqr(),l=b.redSub(e);b=b.redMul(e);e=l.redMul(e.redAdd(this.curve.a24.redMul(l)));return this.curve.point(b,e)};Zn.prototype.add=function(){throw Error("Not supported on Montgomery curve");
};Zn.prototype.diffAdd=function(b,e){var l=this.x.redAdd(this.z),a=this.x.redSub(this.z),f=b.x.redAdd(b.z);b=b.x.redSub(b.z).redMul(l);f=f.redMul(a);a=e.z.redMul(b.redAdd(f).redSqr());e=e.x.redMul(b.redISub(f).redSqr());return this.curve.point(a,e)};Zn.prototype.mul=function(b){var e=b.clone();b=this;for(var l=this.curve.point(null,null),a=[];0!==e.cmpn(0);e.iushrn(1))a.push(e.andln(1));for(e=a.length-1;0<=e;e--)0===a[e]?(b=b.diffAdd(l,this),l=l.dbl()):(l=b.diffAdd(l,this),b=b.dbl());return l};Zn.prototype.mulAdd=
function(){throw Error("Not supported on Montgomery curve");};Zn.prototype.jumlAdd=function(){throw Error("Not supported on Montgomery curve");};Zn.prototype.eq=function(b){return 0===this.getX().cmp(b.getX())};Zn.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this};Zn.prototype.getX=function(){return this.normalize(),this.x.fromRed()};var jy=Pm,Hba=zi,VM=Au,Cka=Ti.assert;Hba(pw,VM);pw.prototype._mulA=function(b){return this.mOneA?b.redNeg():this.a.redMul(b)};
pw.prototype._mulC=function(b){return this.oneC?b:this.c.redMul(b)};pw.prototype.jpoint=function(b,e,l,a){return this.point(b,e,l,a)};pw.prototype.pointFromX=function(b,e){(b=new jy(b,16)).red||(b=b.toRed(this.red));var l=b.redSqr(),a=this.c2.redSub(this.a.redMul(l));l=this.one.redSub(this.c2.redMul(this.d).redMul(l));l=a.redMul(l.redInvm());a=l.redSqrt();if(0!==a.redSqr().redSub(l).cmp(this.zero))throw Error("invalid point");l=a.fromRed().isOdd();return(e&&!l||!e&&l)&&(a=a.redNeg()),this.point(b,
a)};pw.prototype.pointFromY=function(b,e){(b=new jy(b,16)).red||(b=b.toRed(this.red));var l=b.redSqr(),a=l.redSub(this.c2);l=l.redMul(this.d).redMul(this.c2).redSub(this.a);a=a.redMul(l.redInvm());if(0===a.cmp(this.zero)){if(e)throw Error("invalid point");return this.point(this.zero,b)}l=a.redSqrt();if(0!==l.redSqr().redSub(a).cmp(this.zero))throw Error("invalid point");return l.fromRed().isOdd()!==e&&(l=l.redNeg()),this.point(l,b)};pw.prototype.validate=function(b){if(b.isInfinity())return!0;b.normalize();
var e=b.x.redSqr(),l=b.y.redSqr();b=e.redMul(this.a).redAdd(l);e=this.c2.redMul(this.one.redAdd(this.d.redMul(e).redMul(l)));return 0===b.cmp(e)};Hba(ol,VM.BasePoint);pw.prototype.pointFromJSON=function(b){return ol.fromJSON(this,b)};pw.prototype.point=function(b,e,l,a){return new ol(this,b,e,l,a)};ol.fromJSON=function(b,e){return new ol(b,e[0],e[1],e[2])};ol.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,
2)+" z: "+this.z.fromRed().toString(16,2)+">"};ol.prototype.isInfinity=function(){return 0===this.x.cmpn(0)&&(0===this.y.cmp(this.z)||this.zOne&&0===this.y.cmp(this.curve.c))};ol.prototype._extDbl=function(){var b=this.x.redSqr(),e=this.y.redSqr(),l=this.z.redSqr();l=l.redIAdd(l);var a=this.curve._mulA(b),f=this.x.redAdd(this.y).redSqr().redISub(b).redISub(e);b=a.redAdd(e);l=b.redSub(l);var m=a.redSub(e);e=f.redMul(l);a=b.redMul(m);f=f.redMul(m);b=l.redMul(b);return this.curve.point(e,a,b,f)};ol.prototype._projDbl=
function(){var b=this.x.redAdd(this.y).redSqr();var e=this.x.redSqr();var l=this.y.redSqr();if(this.curve.twisted){var a=(m=this.curve._mulA(e)).redAdd(l);if(this.zOne)b=b.redSub(e).redSub(l).redMul(a.redSub(this.curve.two)),e=a.redMul(m.redSub(l)),a=a.redSqr().redSub(a).redSub(a);else{var f=this.z.redSqr();f=a.redSub(f).redISub(f);b=b.redSub(e).redISub(l).redMul(f);e=a.redMul(m.redSub(l));a=a.redMul(f)}}else{var m=e.redAdd(l);f=this.curve._mulC(this.z).redSqr();f=m.redSub(f).redSub(f);b=this.curve._mulC(b.redISub(m)).redMul(f);
e=this.curve._mulC(m).redMul(e.redISub(l));a=m.redMul(f)}return this.curve.point(b,e,a)};ol.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()};ol.prototype._extAdd=function(b){var e=this.y.redSub(this.x).redMul(b.y.redSub(b.x)),l=this.y.redAdd(this.x).redMul(b.y.redAdd(b.x)),a=this.t.redMul(this.curve.dd).redMul(b.t),f=this.z.redMul(b.z.redAdd(b.z)),m=l.redSub(e);b=f.redSub(a);a=f.redAdd(a);f=l.redAdd(e);e=m.redMul(b);l=a.redMul(f);m=m.redMul(f);
b=b.redMul(a);return this.curve.point(e,l,b,m)};ol.prototype._projAdd=function(b){var e,l,a=this.z.redMul(b.z),f=a.redSqr(),m=this.x.redMul(b.x),r=this.y.redMul(b.y),v=this.curve.d.redMul(m).redMul(r),x=f.redSub(v);f=f.redAdd(v);b=this.x.redAdd(this.y).redMul(b.x.redAdd(b.y)).redISub(m).redISub(r);b=a.redMul(x).redMul(b);return this.curve.twisted?(e=a.redMul(f).redMul(r.redSub(this.curve._mulA(m))),l=x.redMul(f)):(e=a.redMul(f).redMul(r.redSub(m)),l=this.curve._mulC(x).redMul(f)),this.curve.point(b,
e,l)};ol.prototype.add=function(b){return this.isInfinity()?b:b.isInfinity()?this:this.curve.extended?this._extAdd(b):this._projAdd(b)};ol.prototype.mul=function(b){return this._hasDoubles(b)?this.curve._fixedNafMul(this,b):this.curve._wnafMul(this,b)};ol.prototype.mulAdd=function(b,e,l){return this.curve._wnafMulAdd(1,[this,e],[b,l],2,!1)};ol.prototype.jmulAdd=function(b,e,l){return this.curve._wnafMulAdd(1,[this,e],[b,l],2,!0)};ol.prototype.normalize=function(){if(this.zOne)return this;var b=this.z.redInvm();
return this.x=this.x.redMul(b),this.y=this.y.redMul(b),this.t&&(this.t=this.t.redMul(b)),this.z=this.curve.one,this.zOne=!0,this};ol.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())};ol.prototype.getX=function(){return this.normalize(),this.x.fromRed()};ol.prototype.getY=function(){return this.normalize(),this.y.fromRed()};ol.prototype.eq=function(b){return this===b||0===this.getX().cmp(b.getX())&&0===this.getY().cmp(b.getY())};ol.prototype.eqXToP=
function(b){var e=b.toRed(this.curve.red).redMul(this.z);if(0===this.x.cmp(e))return!0;b=b.clone();for(var l=this.curve.redN.redMul(this.z);;){if(b.iadd(this.curve.n),0<=b.cmp(this.curve.p))return!1;if(e.redIAdd(l),0===this.x.cmp(e))return!0}};ol.prototype.toP=ol.prototype.normalize;ol.prototype.mixedAdd=ol.prototype.add;var QF={};QF.base=Au;QF.short=Ss;QF.mont=SE;QF.edwards=pw;var Lta={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],
["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],
["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],
["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],
["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],
["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],
["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],
["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],
["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],
["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],
["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],
["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],
["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],
["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],
["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],
["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],
["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},
naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],
["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],
["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],
["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],
["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],
["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],
["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],
["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],
["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],
["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],
["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],
["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],
["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],
["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],
["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],
["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],
["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],
["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],
["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],
["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],
["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],
["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],
["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],
["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],
["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],
["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],
["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],
["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],
["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],
["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],
["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],
["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}},UP={},rU=UP,qU=QF,J5=Ti.assert;rU.PresetCurve=I5;cA("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",
a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:ll.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]});cA("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",
n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:ll.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]});cA("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",
hash:ll.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]});cA("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",
n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:ll.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]});cA("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",
a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:ll.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66",
"00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]});cA("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:ll.sha256,gRed:!1,g:["9"]});cA("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",
a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:ll.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});try{var Iba=Lta}catch(b){Iba=void 0}cA("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",
h:"1",hash:ll.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",Iba]});var Mta=Pm,Jba=Ti.assert;
$n.fromPublic=function(b,e,l){return e instanceof $n?e:new $n(b,{pub:e,pubEnc:l})};$n.fromPrivate=function(b,e,l){return e instanceof $n?e:new $n(b,{priv:e,privEnc:l})};$n.prototype.validate=function(){var b=this.getPublic();return b.isInfinity()?{result:!1,reason:"Invalid public key"}:b.validate()?b.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}};$n.prototype.getPublic=function(b,e){return"string"==
typeof b&&(e=b,b=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),e?this.pub.encode(e,b):this.pub};$n.prototype.getPrivate=function(b){return"hex"===b?this.priv.toString(16,2):this.priv};$n.prototype._importPrivate=function(b,e){this.priv=new Mta(b,e||16);this.priv=this.priv.umod(this.ec.curve.n)};$n.prototype._importPublic=function(b,e){if(b.x||b.y)return"mont"===this.ec.curve.type?Jba(b.x,"Need x coordinate"):"short"!==this.ec.curve.type&&"edwards"!==this.ec.curve.type||Jba(b.x&&b.y,"Need both x and y coordinate"),
this.pub=this.ec.curve.point(b.x,b.y),void 0;this.pub=this.ec.curve.decodePoint(b,e)};$n.prototype.derive=function(b){return b.mul(this.priv).getX()};$n.prototype.sign=function(b,e,l){return this.ec.sign(b,this,e,l)};$n.prototype.verify=function(b,e){return this.ec.verify(b,e,this)};$n.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"};var dD=Pm,sU=UP,K5=Ti.assert;Ts.prototype.keyPair=function(b){return new $n(this,
b)};Ts.prototype.keyFromPrivate=function(b,e){return $n.fromPrivate(this,b,e)};Ts.prototype.keyFromPublic=function(b,e){return $n.fromPublic(this,b,e)};Ts.prototype.genKeyPair=function(b){b||(b={});b=new iy({hash:this.hash,pers:b.pers,persEnc:b.persEnc||"utf8",entropy:b.entropy||PP(this.hash.hmacStrength),entropyEnc:b.entropy&&b.entropyEnc||"utf8",nonce:this.n.toArray()});for(var e=this.n.byteLength(),l=this.n.sub(new dD(2));;){var a=new dD(b.generate(e));if(!(0<a.cmp(l)))return a.iaddn(1),this.keyFromPrivate(a)}};
Ts.prototype._truncateToN=function(b,e){var l=8*b.byteLength()-this.n.bitLength();return 0<l&&(b=b.ushrn(l)),!e&&0<=b.cmp(this.n)?b.sub(this.n):b};Ts.prototype.sign=function(b,e,l,a){"object"==typeof l&&(a=l,l=null);a||(a={});e=this.keyFromPrivate(e,l);b=this._truncateToN(new dD(b,16));var f=this.n.byteLength();l=e.getPrivate().toArray("be",f);f=b.toArray("be",f);f=new iy({hash:this.hash,entropy:l,nonce:f,pers:a.pers,persEnc:a.persEnc||"utf8"});for(var m=this.n.sub(new dD(1)),r=0;;r++){var v=a.k?
a.k(r):new dD(f.generate(this.n.byteLength()));if(!(0>=(v=this._truncateToN(v,!0)).cmpn(1)||0<=v.cmp(m))){var x=this.g.mul(v);if(!x.isInfinity()){var y=x.getX();l=y.umod(this.n);if(0!==l.cmpn(0)&&(v=v.invm(this.n).mul(l.mul(e.getPrivate()).iadd(b)),0!==(v=v.umod(this.n)).cmpn(0)))return b=(x.getY().isOdd()?1:0)|(0!==y.cmp(l)?2:0),a.canonical&&0<v.cmp(this.nh)&&(v=this.n.sub(v),b^=1),new jC({r:l,s:v,recoveryParam:b})}}}};Ts.prototype.verify=function(b,e,l,a){b=this._truncateToN(new dD(b,16));l=this.keyFromPublic(l,
a);a=(e=new jC(e,"hex")).r;e=e.s;if(0>a.cmpn(1)||0<=a.cmp(this.n)||0>e.cmpn(1)||0<=e.cmp(this.n))return!1;var f;e=e.invm(this.n);b=e.mul(b).umod(this.n);e=e.mul(a).umod(this.n);return this.curve._maxwellTrick?!(f=this.g.jmulAdd(b,l.getPublic(),e)).isInfinity()&&f.eqXToP(a):!(f=this.g.mulAdd(b,l.getPublic(),e)).isInfinity()&&0===f.getX().umod(this.n).cmp(a)};Ts.prototype.recoverPubKey=function(b,e,l,a){K5((3&l)===l,"The recovery param is more than two bits");e=new jC(e,a);a=this.n;var f=new dD(b);
b=e.r;var m=e.s,r=1&l;l>>=1;if(0<=b.cmp(this.curve.p.umod(this.curve.n))&&l)throw Error("Unable to find sencond key candinate");b=l?this.curve.pointFromX(b.add(this.curve.n),r):this.curve.pointFromX(b,r);e=e.r.invm(a);l=a.sub(f).mul(e).umod(a);a=m.mul(e).umod(a);return this.g.mulAdd(l,b,a)};Ts.prototype.getKeyRecoveryParam=function(b,e,l,a){if(null!==(e=new jC(e,a)).recoveryParam)return e.recoveryParam;for(a=0;4>a;a++){try{var f=this.recoverPubKey(b,e,a)}catch(m){continue}if(f.eq(l))return a}throw Error("Unable to find valid recovery factor");
};var Kba=Ti.assert,L5=Ti.parseBytes,RF=Ti.cachedProperty;pn.fromPublic=function(b,e){return e instanceof pn?e:new pn(b,{pub:e})};pn.fromSecret=function(b,e){return e instanceof pn?e:new pn(b,{secret:e})};pn.prototype.secret=function(){return this._secret};RF(pn,"pubBytes",function(){return this.eddsa.encodePoint(this.pub())});RF(pn,"pub",function(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())});RF(pn,"privBytes",function(){var b=this.eddsa,e=this.hash(),
l=b.encodingLength-1;b=e.slice(0,b.encodingLength);return b[0]&=248,b[l]&=127,b[l]|=64,b});RF(pn,"priv",function(){return this.eddsa.decodeInt(this.privBytes())});RF(pn,"hash",function(){return this.eddsa.hash().update(this.secret()).digest()});RF(pn,"messagePrefix",function(){return this.hash().slice(this.eddsa.encodingLength)});pn.prototype.sign=function(b){return Kba(this._secret,"KeyPair can only verify"),this.eddsa.sign(b,this)};pn.prototype.verify=function(b,e){return this.eddsa.verify(b,e,
this)};pn.prototype.getSecret=function(b){return Kba(this._secret,"KeyPair is public only"),Ti.encode(this.secret(),b)};pn.prototype.getPublic=function(b){return Ti.encode(this.pubBytes(),b)};var Fka=Pm,Eka=Ti.assert,VP=Ti.cachedProperty,Dka=Ti.parseBytes;VP(dA,"S",function(){return this.eddsa.decodeInt(this.Sencoded())});VP(dA,"R",function(){return this.eddsa.decodePoint(this.Rencoded())});VP(dA,"Rencoded",function(){return this.eddsa.encodePoint(this.R())});VP(dA,"Sencoded",function(){return this.eddsa.encodeInt(this.S())});
dA.prototype.toBytes=function(){return this.Rencoded().concat(this.Sencoded())};dA.prototype.toHex=function(){return Ti.encode(this.toBytes(),"hex").toUpperCase()};var Ika=ll,Hka=UP,Gka=Ti.assert,Lba=Ti.parseBytes;Jq.prototype.sign=function(b,e){b=Lba(b);var l=this.keyFromSecret(e),a=this.hashInt(l.messagePrefix(),b);e=this.g.mul(a);var f=this.encodePoint(e);b=this.hashInt(f,l.pubBytes(),b).mul(l.priv());b=a.add(b).umod(this.curve.n);return this.makeSignature({R:e,S:b,Rencoded:f})};Jq.prototype.verify=
function(b,e,l){b=Lba(b);e=this.makeSignature(e);l=this.keyFromPublic(l);b=this.hashInt(e.Rencoded(),l.pubBytes(),b);var a=this.g.mul(e.S());return e.R().add(l.pub().mul(b)).eq(a)};Jq.prototype.hashInt=function(){for(var b=this.hash(),e=0;e<arguments.length;e++)b.update(arguments[e]);return Ti.intFromLE(b.digest()).umod(this.curve.n)};Jq.prototype.keyFromPublic=function(b){return pn.fromPublic(this,b)};Jq.prototype.keyFromSecret=function(b){return pn.fromSecret(this,b)};Jq.prototype.makeSignature=
function(b){return b instanceof dA?b:new dA(this,b)};Jq.prototype.encodePoint=function(b){var e=b.getY().toArray("le",this.encodingLength);return e[this.encodingLength-1]|=b.getX().isOdd()?128:0,e};Jq.prototype.decodePoint=function(b){var e=(b=Ti.parseBytes(b)).length-1,l=b.slice(0,e).concat(-129&b[e]);b=0!=(128&b[e]);l=Ti.intFromLE(l);return this.curve.pointFromY(l,b)};Jq.prototype.encodeInt=function(b){return b.toArray("le",this.encodingLength)};Jq.prototype.decodeInt=function(b){return Ti.intFromLE(b)};
Jq.prototype.isPoint=function(b){return b instanceof this.pointClass};var Fy={version:"6.5.2"};Fy.utils=Ti;Fy.rand=PP;Fy.curve=QF;Fy.curves=UP;Fy.ec=Ts;Fy.eddsa=Jq;var FU={},c6=!1,Br="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,qn="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,P5={},Nta=zi;P5.Reporter=Us;Us.prototype.isError=function(b){return b instanceof UE};Us.prototype.save=function(){var b=(this||qn)._reporterState;return{obj:b.obj,
pathLen:b.path.length}};Us.prototype.restore=function(b){var e=(this||qn)._reporterState;e.obj=b.obj;e.path=e.path.slice(0,b.pathLen)};Us.prototype.enterKey=function(b){return(this||qn)._reporterState.path.push(b)};Us.prototype.exitKey=function(b){var e=(this||qn)._reporterState;e.path=e.path.slice(0,b-1)};Us.prototype.leaveKey=function(b,e,l){var a=(this||qn)._reporterState;this.exitKey(b);null!==a.obj&&(a.obj[e]=l)};Us.prototype.path=function(){return(this||qn)._reporterState.path.join("/")};Us.prototype.enterObject=
function(){var b=(this||qn)._reporterState,e=b.obj;return b.obj={},e};Us.prototype.leaveObject=function(b){var e=(this||qn)._reporterState,l=e.obj;return e.obj=b,l};Us.prototype.error=function(b){var e=(this||qn)._reporterState,l=b instanceof UE;if(b=l?b:new UE(e.path.map(function(a){return"["+JSON.stringify(a)+"]"}).join(""),b.message||b,b.stack),!e.options.partial)throw b;return l||e.errors.push(b),b};Us.prototype.wrapResult=function(b){var e=(this||qn)._reporterState;return e.options.partial?{result:this.isError(b)?
null:b,errors:e.errors}:b};Nta(UE,Error);UE.prototype.rethrow=function(b){if((this||qn).message=b+" at: "+((this||qn).path||"(shallow)"),Error.captureStackTrace&&Error.captureStackTrace(this||qn,UE),!(this||qn).stack)try{throw Error((this||qn).message);}catch(e){(this||qn).stack=e.stack}return this||qn};var WM={},N5=!1,Jh="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,uU={},Q5=!1,Yg="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,tU={},
O5=!1,eA={},T5=!1,vU={},S5=!1,wU={},V5=!1,fA="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,zU={},X5=!1,yU="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,xU={},W5=!1,AU={},Z5=!1,rn="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,DU={},a6=!1,CU="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,BU={},$5=!1,EU={},b6=!1,gm=XM(),Mba=gm.define("Time",function(){this.choice({utcTime:this.utctime(),
generalTime:this.gentime()})}),Ota=gm.define("AttributeTypeValue",function(){this.seq().obj(this.key("type").objid(),this.key("value").any())}),DY=gm.define("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("parameters").optional(),this.key("curve").objid().optional())}),Pta=gm.define("SubjectPublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(DY),this.key("subjectPublicKey").bitstr())}),Qta=gm.define("RelativeDistinguishedName",function(){this.setof(Ota)}),
Rta=gm.define("RDNSequence",function(){this.seqof(Qta)}),Nba=gm.define("Name",function(){this.choice({rdnSequence:this.use(Rta)})}),Sta=gm.define("Validity",function(){this.seq().obj(this.key("notBefore").use(Mba),this.key("notAfter").use(Mba))}),Tta=gm.define("Extension",function(){this.seq().obj(this.key("extnID").objid(),this.key("critical").bool().def(!1),this.key("extnValue").octstr())}),Uta=gm.define("TBSCertificate",function(){this.seq().obj(this.key("version").explicit(0).int().optional(),
this.key("serialNumber").int(),this.key("signature").use(DY),this.key("issuer").use(Nba),this.key("validity").use(Sta),this.key("subject").use(Nba),this.key("subjectPublicKeyInfo").use(Pta),this.key("issuerUniqueID").implicit(1).bitstr().optional(),this.key("subjectUniqueID").implicit(2).bitstr().optional(),this.key("extensions").explicit(3).seqof(Tta).optional())}),Vta=gm.define("X509Certificate",function(){this.seq().obj(this.key("tbsCertificate").use(Uta),this.key("signatureAlgorithm").use(DY),
this.key("signatureValue").bitstr())}),Vu={};Vu.certificate=Vta;var Wta=gm.define("RSAPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("modulus").int(),this.key("publicExponent").int(),this.key("privateExponent").int(),this.key("prime1").int(),this.key("prime2").int(),this.key("exponent1").int(),this.key("exponent2").int(),this.key("coefficient").int())});Vu.RSAPrivateKey=Wta;var Xta=gm.define("RSAPublicKey",function(){this.seq().obj(this.key("modulus").int(),this.key("publicExponent").int())});
Vu.RSAPublicKey=Xta;var Yta=gm.define("SubjectPublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(Oba),this.key("subjectPublicKey").bitstr())});Vu.PublicKey=Yta;var Oba=gm.define("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("none").null_().optional(),this.key("curve").objid().optional(),this.key("params").seq().obj(this.key("p").int(),this.key("q").int(),this.key("g").int()).optional())}),Zta=gm.define("PrivateKeyInfo",function(){this.seq().obj(this.key("version").int(),
this.key("algorithm").use(Oba),this.key("subjectPrivateKey").octstr())});Vu.PrivateKey=Zta;var $ta=gm.define("EncryptedPrivateKeyInfo",function(){this.seq().obj(this.key("algorithm").seq().obj(this.key("id").objid(),this.key("decrypt").seq().obj(this.key("kde").seq().obj(this.key("id").objid(),this.key("kdeparams").seq().obj(this.key("salt").octstr(),this.key("iters").int())),this.key("cipher").seq().obj(this.key("algo").objid(),this.key("iv").octstr()))),this.key("subjectPrivateKey").octstr())});
Vu.EncryptedPrivateKey=$ta;var aua=gm.define("DSAPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("p").int(),this.key("q").int(),this.key("g").int(),this.key("pub_key").int(),this.key("priv_key").int())});Vu.DSAPrivateKey=aua;Vu.DSAparam=gm.define("DSAparam",function(){this.int()});var cua=gm.define("ECPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("privateKey").octstr(),this.key("parameters").optional().explicit(0).use(bua),this.key("publicKey").optional().explicit(1).bitstr())});
Vu.ECPrivateKey=cua;var bua=gm.define("ECParameters",function(){this.choice({namedCurve:this.objid()})});Vu.signature=gm.define("signature",function(){this.seq().obj(this.key("r").int(),this.key("s").int())});var Lka=/Proc-Type: 4,ENCRYPTED[\n\r]+DEK-Info: AES-((?:128)|(?:192)|(?:256))-CBC,([0-9A-H]+)[\n\r]+([0-9A-z\n\r\+\/=]+)[\n\r]+/m,Nka=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----/m,Mka=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----([0-9A-z\n\r\+\/=]+)-----END \1-----$/m,YM=Aj.Buffer,Kq=Vu,Oka={"2.16.840.1.101.3.4.1.1":"aes-128-ecb",
"2.16.840.1.101.3.4.1.2":"aes-128-cbc","2.16.840.1.101.3.4.1.3":"aes-128-ofb","2.16.840.1.101.3.4.1.4":"aes-128-cfb","2.16.840.1.101.3.4.1.21":"aes-192-ecb","2.16.840.1.101.3.4.1.22":"aes-192-cbc","2.16.840.1.101.3.4.1.23":"aes-192-ofb","2.16.840.1.101.3.4.1.24":"aes-192-cfb","2.16.840.1.101.3.4.1.41":"aes-256-ecb","2.16.840.1.101.3.4.1.42":"aes-256-cbc","2.16.840.1.101.3.4.1.43":"aes-256-ofb","2.16.840.1.101.3.4.1.44":"aes-256-cfb"},Qka=Cr,Pka=KP,GU=Aj.Buffer;VE.signature=Kq.signature;var Pba={"1.3.132.0.10":"secp256k1",
"1.3.132.0.33":"p224","1.2.840.10045.3.1.1":"p192","1.2.840.10045.3.1.7":"p256","1.3.132.0.34":"p384","1.3.132.0.35":"p521"},EY={},lp=oi.Buffer,nC=dba,dua=Fy.ec,ZM=Pm;(EY=function(b,e,l,a,f){e=VE(e);if(e.curve){if("ecdsa"!==a&&"ecdsa/rsa"!==a)throw Error("wrong private key type");return function(m,r){var v=Pba[r.curve.join(".")];if(!v)throw Error("unknown curve "+r.curve.join("."));m=(new dua(v)).keyFromPrivate(r.privateKey).sign(m);return new lp(m.toDER())}(b,e)}if("dsa"===e.type){if("dsa"!==a)throw Error("wrong private key type");
return function(m,r,v){var x=r.params.priv_key,y=r.params.p,E=r.params.q;r=r.params.g;var F=new ZM(0),I=HU(m,E).mod(E);var J=!1;for(m=d6(x,E,m,v);!1===J;){F=J=e6(E,m,v);var P=E;F=r.toRed(ZM.mont(y)).redPow(F).fromRed().mod(P);0===(J=J.invm(E).imul(I.add(x.mul(F))).mod(E)).cmpn(0)&&(J=!1,F=new ZM(0))}v=J;x=F.toArray();v=v.toArray();128&x[0]&&(x=[0].concat(x));128&v[0]&&(v=[0].concat(v));y=[48,x.length+v.length+4,2,x.length];return y=y.concat(x,[2,v.length],v),new lp(y)}(b,e,l)}if("rsa"!==a&&"ecdsa/rsa"!==
a)throw Error("wrong private key type");b=lp.concat([f,b]);a=e.modulus.byteLength();for(l=[0,1];b.length+l.length+1<a;)l.push(255);l.push(0);for(a=-1;++a<b.length;)l.push(b[a]);return RM(l,e)}).getKey=d6;EY.makeKey=e6;var FY=oi.Buffer,tJ=Pm,eua=Fy.ec,am="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,WP=oi.Buffer,g6=oJ,$M=tC,Qba=zi,fua=EY,gua=function(b,e,l,a,f){l=VE(l);if("ec"===l.type){if("ecdsa"!==a&&"ecdsa/rsa"!==a)throw Error("wrong public key type");return function(v,
x,y){var E=Pba[y.data.algorithm.curve.join(".")];if(!E)throw Error("unknown curve "+y.data.algorithm.curve.join("."));return(new eua(E)).verify(x,v,y.data.subjectPrivateKey.data)}(b,e,l)}if("dsa"===l.type){if("dsa"!==a)throw Error("wrong public key type");return function(v,x,y){var E=y.data.p,F=y.data.q,I=y.data.g;y=y.data.pub_key;var J=VE.signature.decode(v,"der");v=J.s;J=J.r;f6(v,F);f6(J,F);var P=tJ.mont(E);v=v.invm(F);return 0===I.toRed(P).redPow((new tJ(x)).mul(v).mod(F)).fromRed().mul(y.toRed(P).redPow(J.mul(v).mod(F)).fromRed()).mod(E).mod(F).cmp(J)}(b,
e,l)}if("rsa"!==a&&"ecdsa/rsa"!==a)throw Error("wrong public key type");e=FY.concat([f,e]);f=l.modulus.byteLength();a=[1];for(var m=0;e.length+a.length+2<f;)a.push(255),m++;a.push(0);for(var r=-1;++r<e.length;)a.push(e[r]);a=new FY(a);e=tJ.mont(l.modulus);b=(b=(new tJ(b)).toRed(e)).redPow(new tJ(l.publicExponent));b=new FY(b.fromRed().toArray());e=8>m?1:0;f=Math.min(b.length,a.length);b.length!==a.length&&(e=1);for(r=-1;++r<f;)e|=b[r]^a[r];return 0===e},oC=eba;Object.keys(oC).forEach(function(b){oC[b].id=
new WP(oC[b].id,"hex");oC[b.toLowerCase()]=oC[b]});Qba(SH,$M.Writable);SH.prototype._write=function(b,e,l){(this||am)._hash.update(b);l()};SH.prototype.update=function(b,e){return"string"==typeof b&&(b=new WP(b,e)),(this||am)._hash.update(b),this||am};SH.prototype.sign=function(b,e){this.end();var l=(this||am)._hash.digest();b=fua(l,b,(this||am)._hashType,(this||am)._signType,(this||am)._tag);return e?b.toString(e):b};Qba(TH,$M.Writable);TH.prototype._write=function(b,e,l){(this||am)._hash.update(b);
l()};TH.prototype.update=function(b,e){return"string"==typeof b&&(b=new WP(b,e)),(this||am)._hash.update(b),this||am};TH.prototype.verify=function(b,e,l){"string"==typeof e&&(e=new WP(e,l));this.end();l=(this||am)._hash.digest();return gua(e,l,b,(this||am)._signType,(this||am)._tag)};var sn="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,ky=oi.Buffer,Rka=Fy,hua=Pm,Dr={secp256k1:{name:"secp256k1",byteLength:32},secp224r1:{name:"p224",byteLength:28},prime256v1:{name:"p256",
byteLength:32},prime192v1:{name:"p192",byteLength:24},ed25519:{name:"ed25519",byteLength:32},secp384r1:{name:"p384",byteLength:48},secp521r1:{name:"p521",byteLength:66}};Dr.p224=Dr.secp224r1;Dr.p256=Dr.secp256r1=Dr.prime256v1;Dr.p192=Dr.secp192r1=Dr.prime192v1;Dr.p384=Dr.secp384r1;Dr.p521=Dr.secp521r1;pC.prototype.generateKeys=function(b,e){return(this||sn).keys=(this||sn).curve.genKeyPair(),this.getPublicKey(b,e)};pC.prototype.computeSecret=function(b,e,l){return e=e||"utf8",ky.isBuffer(b)||(b=new ky(b,
e)),IU((this||sn).curve.keyFromPublic(b).getPublic().mul((this||sn).keys.getPrivate()).getX(),l,(this||sn).curveType.byteLength)};pC.prototype.getPublicKey=function(b,e){var l=(this||sn).keys.getPublic("compressed"===e,!0);return"hybrid"===e&&(l[l.length-1]%2?l[0]=7:l[0]=6),IU(l,b)};pC.prototype.getPrivateKey=function(b){return IU((this||sn).keys.getPrivate(),b)};pC.prototype.setPublicKey=function(b,e){return e=e||"utf8",ky.isBuffer(b)||(b=new ky(b,e)),(this||sn).keys._importPublic(b),this||sn};pC.prototype.setPrivateKey=
function(b,e){e=e||"utf8";ky.isBuffer(b)||(b=new ky(b,e));b=new hua(b);return b=b.toString(16),(this||sn).keys=(this||sn).curve.genKeyPair(),(this||sn).keys._importPrivate(b),this||sn};var GY=Aj.Buffer,XP=function(b,e){for(var l,a=GY.alloc(0),f=0;a.length<e;){l=f++;var m=GY.allocUnsafe(4);l=(m.writeUInt32BE(l,0),m);a=GY.concat([a,oJ("sha1").update(b).update(l).digest()])}return a.slice(0,e)},YP=function(b,e){for(var l=b.length,a=-1;++a<l;)b[a]^=e[a];return b},Rba=Pm,iua=Aj.Buffer,Sba=function(b,e){return iua.from(b.toRed(Rba.mont(e.modulus)).redPow(new Rba(e.publicExponent)).fromRed().toArray())},
HY=Pm,Wu=Aj.Buffer,Tba=Pm,uJ=Aj.Buffer,SF={publicEncrypt:function(b,e,l){var a=b.padding?b.padding:l?1:4;b=VE(b);if(4===a)e=function(f,m){f=f.modulus.byteLength();var r=m.length,v=oJ("sha1").update(Wu.alloc(0)).digest(),x=v.length,y=2*x;if(r>f-y-2)throw Error("message too long");y=Wu.alloc(f-r-y-2);var E=f-x-1;r=FA(x);m=YP(Wu.concat([v,y,Wu.alloc(1,1),m],E),XP(r,E));x=YP(r,XP(m,x));return new HY(Wu.concat([Wu.alloc(1),x,m],f))}(b,e);else if(1===a)e=function(f,m,r){var v=m.length;f=f.modulus.byteLength();
if(v>f-11)throw Error("message too long");if(r)var x=Wu.alloc(f-v-3,255);else{v=f-v-3;for(var y=Wu.allocUnsafe(v),E=0,F=FA(2*v),I=0;E<v;)I===F.length&&(F=FA(2*v),I=0),(x=F[I++])&&(y[E++]=x);x=y}return new HY(Wu.concat([Wu.from([0,r?1:2]),x,Wu.alloc(1),m],f))}(b,e,l);else{if(3!==a)throw Error("unknown padding");if(0<=(e=new HY(e)).cmp(b.modulus))throw Error("data too long for modulus");}return l?RM(e,b):Sba(e,b)},privateDecrypt:function(b,e,l){var a=b.padding?b.padding:l?1:4;b=VE(b);var f=b.modulus.byteLength();
if(e.length>f||0<=(new Tba(e)).cmp(b.modulus))throw Error("decryption error");e=l?Sba(new Tba(e),b):RM(e,b);var m=uJ.alloc(f-e.length);if(e=uJ.concat([m,e],f),4===a)return function(r,v){var x=r.modulus.byteLength(),y=oJ("sha1").update(uJ.alloc(0)).digest();r=y.length;if(0!==v[0])throw Error("decryption error");var E=v.slice(1,r+1);v=v.slice(r+1);E=YP(E,XP(v,r));x=YP(v,XP(E,x-r-1));v=x.slice(0,r);y=uJ.from(y);v=uJ.from(v);E=0;var F=y.length;y.length!==v.length&&(E++,F=Math.min(y.length,v.length));
for(var I=-1;++I<F;)E+=y[I]^v[I];if(E)throw Error("decryption error");for(;0===x[r];)r++;if(1!==x[r++])throw Error("decryption error");return x.slice(r)}(b,e);if(1===a)return function(r,v,x){r=v.slice(0,2);for(var y=2,E=0;0!==v[y++];)if(y>=v.length){E++;break}var F=v.slice(2,y-1);("0002"!==r.toString("hex")&&!x||"0001"!==r.toString("hex")&&x)&&E++;8>F.length&&E++;if(E)throw Error("decryption error");return v.slice(y)}(0,e,l);if(3===a)return e;throw Error("unknown padding");},privateEncrypt:function(b,
e){return SF.publicEncrypt(b,e,!0)},publicDecrypt:function(b,e){return SF.privateDecrypt(b,e,!0)}},ZP="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,IY,JY,JU=mj,p6=FA,Uba=Aj.Buffer,m6=Aj.kMaxLength,KU=ZP.crypto||ZP.msCrypto,l6=Math.pow(2,32)-1;KU&&KU.getRandomValues||!JU.browser?(IY=function(b,e,l,a){if(!(Uba.isBuffer(b)||b instanceof ZP.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');if("function"==typeof e)a=e,e=0,l=b.length;else if("function"==
typeof l)a=l,l=b.length-e;else if("function"!=typeof a)throw new TypeError('"cb" argument must be a function');return k6(e,b.length),n6(l,e,b.length),o6(b,e,l,a)},JY=function(b,e,l){void 0===e&&(e=0);if(!(Uba.isBuffer(b)||b instanceof ZP.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');k6(e,b.length);void 0===l&&(l=b.length-e);return n6(l,e,b.length),o6(b,e,l)}):(IY=j6,JY=j6);var yh={};yh.randomBytes=yh.rng=yh.pseudoRandomBytes=yh.prng=FA;yh.createHash=yh.Hash=oJ;yh.createHmac=
yh.Hmac=dba;var jua=Object.keys(eba),kua="sha1 sha224 sha256 sha384 sha512 md5 rmd160".split(" ").concat(jua);yh.getHashes=function(){return kua};yh.pbkdf2=KP.pbkdf2;yh.pbkdf2Sync=KP.pbkdf2Sync;yh.Cipher=qba;yh.createCipher=fta;yh.Cipheriv=hU;yh.createCipheriv=hU;yh.Decipher=rba;yh.createDecipher=gta;yh.Decipheriv=jU;yh.createDecipheriv=jU;yh.getCiphers=sba;yh.listCiphers=hta;yh.DiffieHellmanGroup=pta;yh.createDiffieHellmanGroup=xba;yh.getDiffieHellman=yba;yh.createDiffieHellman=qta;yh.DiffieHellman=
zba;yh.createSign=h6;yh.Sign=h6;yh.createVerify=i6;yh.Verify=i6;yh.createECDH=function(b){return new pC(b)};yh.publicEncrypt=SF.publicEncrypt;yh.privateEncrypt=SF.privateEncrypt;yh.publicDecrypt=SF.publicDecrypt;yh.privateDecrypt=SF.privateDecrypt;yh.randomFill=IY;yh.randomFillSync=JY;yh.createCredentials=function(){throw Error("sorry, createCredentials is not implemented yet\nwe accept pull requests\nhttps://github.com/crypto-browserify/crypto-browserify");};yh.constants={DH_CHECK_P_NOT_SAFE_PRIME:2,
DH_CHECK_P_NOT_PRIME:1,DH_UNABLE_TO_CHECK_GENERATOR:4,DH_NOT_SUITABLE_GENERATOR:8,NPN_ENABLED:1,ALPN_ENABLED:1,RSA_PKCS1_PADDING:1,RSA_SSLV23_PADDING:2,RSA_NO_PADDING:3,RSA_PKCS1_OAEP_PADDING:4,RSA_X931_PADDING:5,RSA_PKCS1_PSS_PADDING:6,POINT_CONVERSION_COMPRESSED:2,POINT_CONVERSION_UNCOMPRESSED:4,POINT_CONVERSION_HYBRID:6};var Uw={};Object.defineProperty(Uw,"__esModule",{value:!0});Uw.default=function(){return lua.default.randomFillSync(mua)};var lua=yh&&yh.__esModule?yh:{default:yh},mua=new Uint8Array(16),
Sp={};Object.defineProperty(Sp,"__esModule",{value:!0});Sp.default=void 0;for(var Lo=[],KY=0;256>KY;++KY)Lo.push((KY+256).toString(16).substr(1));Sp.default=function(b,e){e=e||0;return(Lo[b[e+0]]+Lo[b[e+1]]+Lo[b[e+2]]+Lo[b[e+3]]+"-"+Lo[b[e+4]]+Lo[b[e+5]]+"-"+Lo[b[e+6]]+Lo[b[e+7]]+"-"+Lo[b[e+8]]+Lo[b[e+9]]+"-"+Lo[b[e+10]]+Lo[b[e+11]]+Lo[b[e+12]]+Lo[b[e+13]]+Lo[b[e+14]]+Lo[b[e+15]]).toLowerCase()};var $P={};Object.defineProperty($P,"__esModule",{value:!0});$P.default=void 0;var nua=Uw&&Uw.__esModule?
Uw:{default:Uw},oua=Sp&&Sp.__esModule?Sp:{default:Sp},Vba,LY,MY=0,NY=0;$P.default=function(b,e,l){l=e&&l||0;var a=e||[];b=b||{};var f=b.node||Vba,m=void 0!==b.clockseq?b.clockseq:LY;if(null==f||null==m){var r=b.random||(b.rng||nua.default)();null==f&&(f=Vba=[r[0]|1,r[1],r[2],r[3],r[4],r[5]]);null==m&&(m=LY=(r[6]<<8|r[7])&16383)}r=void 0!==b.msecs?b.msecs:Date.now();var v=void 0!==b.nsecs?b.nsecs:NY+1,x=r-MY+(v-NY)/1E4;0>x&&void 0===b.clockseq&&(m=m+1&16383);(0>x||r>MY)&&void 0===b.nsecs&&(v=0);if(1E4<=
v)throw Error("uuid.v1(): Can't create more than 10M uuids/sec");MY=r;NY=v;LY=m;r+=122192928E5;b=(1E4*(r&268435455)+v)%4294967296;a[l++]=b>>>24&255;a[l++]=b>>>16&255;a[l++]=b>>>8&255;a[l++]=b&255;b=r/4294967296*1E4&268435455;a[l++]=b>>>8&255;a[l++]=b&255;a[l++]=b>>>24&15|16;a[l++]=b>>>16&255;a[l++]=m>>>8|128;a[l++]=m&255;for(m=0;6>m;++m)a[l+m]=f[m];return e||(0,oua.default)(a)};var Pq={};Object.defineProperty(Pq,"__esModule",{value:!0});Pq.default=function(b,e,l){function a(f,m,r,v){v=r&&v||0;if("string"===
typeof f){f=unescape(encodeURIComponent(f));for(var x=[],y=0;y<f.length;++y)x.push(f.charCodeAt(y));f=x}"string"===typeof m&&(m=Ska(m));if(!Array.isArray(f))throw TypeError("value must be an array of bytes");if(!Array.isArray(m)||16!==m.length)throw TypeError("namespace must be uuid string or an Array of 16 byte values");m=l(m.concat(f));m[6]=m[6]&15|e;m[8]=m[8]&63|128;if(r)for(f=0;16>f;++f)r[v+f]=m[f];return r||(0,pua.default)(m)}try{a.name=b}catch(f){}a.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8";
a.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8";return a};Pq.URL=Pq.DNS=void 0;var pua=Sp&&Sp.__esModule?Sp:{default:Sp};Pq.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8";Pq.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8";var eD={},Wba=oi.Buffer;Object.defineProperty(eD,"__esModule",{value:!0});eD.default=void 0;var qua=yh&&yh.__esModule?yh:{default:yh};eD.default=function(b){Array.isArray(b)?b=Wba.from(b):"string"===typeof b&&(b=Wba.from(b,"utf8"));return qua.default.createHash("md5").update(b).digest()};var aQ=
{};Object.defineProperty(aQ,"__esModule",{value:!0});aQ.default=void 0;var rua=Pq&&Pq.__esModule?Pq:{default:Pq},sua=eD&&eD.__esModule?eD:{default:eD},tua=(0,rua.default)("v3",48,sua.default);aQ.default=tua;var bQ={};Object.defineProperty(bQ,"__esModule",{value:!0});bQ.default=void 0;var uua=Uw&&Uw.__esModule?Uw:{default:Uw},vua=Sp&&Sp.__esModule?Sp:{default:Sp};bQ.default=function(b,e,l){"string"===typeof b&&(e="binary"===b?new Uint8Array(16):null,b=null);b=b||{};b=b.random||(b.rng||uua.default)();
b[6]=b[6]&15|64;b[8]=b[8]&63|128;if(e){l=l||0;for(var a=0;16>a;++a)e[l+a]=b[a];return e}return(0,vua.default)(b)};var fD={},Xba=oi.Buffer;Object.defineProperty(fD,"__esModule",{value:!0});fD.default=void 0;var wua=yh&&yh.__esModule?yh:{default:yh};fD.default=function(b){Array.isArray(b)?b=Xba.from(b):"string"===typeof b&&(b=Xba.from(b,"utf8"));return wua.default.createHash("sha1").update(b).digest()};var cQ={};Object.defineProperty(cQ,"__esModule",{value:!0});cQ.default=void 0;var xua=Pq&&Pq.__esModule?
Pq:{default:Pq},yua=fD&&fD.__esModule?fD:{default:fD},zua=(0,xua.default)("v5",80,yua.default);cQ.default=zua;var gD={};Object.defineProperty(gD,"__esModule",{value:!0});Object.defineProperty(gD,"v1",{enumerable:!0,get:function(){return Aua.default}});Object.defineProperty(gD,"v3",{enumerable:!0,get:function(){return Bua.default}});Object.defineProperty(gD,"v4",{enumerable:!0,get:function(){return Cua.default}});Object.defineProperty(gD,"v5",{enumerable:!0,get:function(){return Dua.default}});var Aua=
aN($P),Bua=aN(aQ),Cua=aN(bQ),Dua=aN(cQ),Mo={};Object.defineProperty(Mo,"__esModule",{value:!0});Mo.atob=function(b){return Yba(b)};Mo.btoa=function(b){return Zba(b)};Mo.base64StringToBlobOrBuffer=function(b,e){return s6(Yba(b),e)};Mo.binaryStringToArrayBuffer=r6;Mo.binaryStringToBlobOrBuffer=s6;Mo.blob=q6;Mo.blobOrBufferToBase64=function(b,e){u6(b,function(l){e(Zba(l))})};Mo.blobOrBufferToBinaryString=u6;Mo.readAsArrayBuffer=function(b,e){var l=new FileReader;l.onloadend=function(a){a=a.target.result||
new ArrayBuffer(0);e(a)};l.readAsArrayBuffer(b)};Mo.readAsBinaryString=t6;Mo.typedBuffer=function(){};var Yba=Mo.atob,Zba=Mo.btoa,di="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,Eua={},vJ=Eua=function(b){function e(E,F){var I=E[0],J=E[1],P=E[2],N=E[3];I+=(J&P|~J&N)+F[0]-680876936|0;I=(I<<7|I>>>25)+J|0;N+=(I&J|~I&P)+F[1]-389564586|0;N=(N<<12|N>>>20)+I|0;P+=(N&I|~N&J)+F[2]+606105819|0;P=(P<<17|P>>>15)+N|0;J+=(P&N|~P&I)+F[3]-1044525330|0;J=(J<<22|J>>>10)+P|0;I+=(J&
P|~J&N)+F[4]-176418897|0;I=(I<<7|I>>>25)+J|0;N+=(I&J|~I&P)+F[5]+1200080426|0;N=(N<<12|N>>>20)+I|0;P+=(N&I|~N&J)+F[6]-1473231341|0;P=(P<<17|P>>>15)+N|0;J+=(P&N|~P&I)+F[7]-45705983|0;J=(J<<22|J>>>10)+P|0;I+=(J&P|~J&N)+F[8]+1770035416|0;I=(I<<7|I>>>25)+J|0;N+=(I&J|~I&P)+F[9]-1958414417|0;N=(N<<12|N>>>20)+I|0;P+=(N&I|~N&J)+F[10]-42063|0;P=(P<<17|P>>>15)+N|0;J+=(P&N|~P&I)+F[11]-1990404162|0;J=(J<<22|J>>>10)+P|0;I+=(J&P|~J&N)+F[12]+1804603682|0;I=(I<<7|I>>>25)+J|0;N+=(I&J|~I&P)+F[13]-40341101|0;N=(N<<12|
N>>>20)+I|0;P+=(N&I|~N&J)+F[14]-1502002290|0;P=(P<<17|P>>>15)+N|0;J+=(P&N|~P&I)+F[15]+1236535329|0;J=(J<<22|J>>>10)+P|0;I+=(J&N|P&~N)+F[1]-165796510|0;I=(I<<5|I>>>27)+J|0;N+=(I&P|J&~P)+F[6]-1069501632|0;N=(N<<9|N>>>23)+I|0;P+=(N&J|I&~J)+F[11]+643717713|0;P=(P<<14|P>>>18)+N|0;J+=(P&I|N&~I)+F[0]-373897302|0;J=(J<<20|J>>>12)+P|0;I+=(J&N|P&~N)+F[5]-701558691|0;I=(I<<5|I>>>27)+J|0;N+=(I&P|J&~P)+F[10]+38016083|0;N=(N<<9|N>>>23)+I|0;P+=(N&J|I&~J)+F[15]-660478335|0;P=(P<<14|P>>>18)+N|0;J+=(P&I|N&~I)+F[4]-
405537848|0;J=(J<<20|J>>>12)+P|0;I+=(J&N|P&~N)+F[9]+568446438|0;I=(I<<5|I>>>27)+J|0;N+=(I&P|J&~P)+F[14]-1019803690|0;N=(N<<9|N>>>23)+I|0;P+=(N&J|I&~J)+F[3]-187363961|0;P=(P<<14|P>>>18)+N|0;J+=(P&I|N&~I)+F[8]+1163531501|0;J=(J<<20|J>>>12)+P|0;I+=(J&N|P&~N)+F[13]-1444681467|0;I=(I<<5|I>>>27)+J|0;N+=(I&P|J&~P)+F[2]-51403784|0;N=(N<<9|N>>>23)+I|0;P+=(N&J|I&~J)+F[7]+1735328473|0;P=(P<<14|P>>>18)+N|0;J+=(P&I|N&~I)+F[12]-1926607734|0;J=(J<<20|J>>>12)+P|0;I+=(J^P^N)+F[5]-378558|0;I=(I<<4|I>>>28)+J|0;N+=(I^
J^P)+F[8]-2022574463|0;N=(N<<11|N>>>21)+I|0;P+=(N^I^J)+F[11]+1839030562|0;P=(P<<16|P>>>16)+N|0;J+=(P^N^I)+F[14]-35309556|0;J=(J<<23|J>>>9)+P|0;I+=(J^P^N)+F[1]-1530992060|0;I=(I<<4|I>>>28)+J|0;N+=(I^J^P)+F[4]+1272893353|0;N=(N<<11|N>>>21)+I|0;P+=(N^I^J)+F[7]-155497632|0;P=(P<<16|P>>>16)+N|0;J+=(P^N^I)+F[10]-1094730640|0;J=(J<<23|J>>>9)+P|0;I+=(J^P^N)+F[13]+681279174|0;I=(I<<4|I>>>28)+J|0;N+=(I^J^P)+F[0]-358537222|0;N=(N<<11|N>>>21)+I|0;P+=(N^I^J)+F[3]-722521979|0;P=(P<<16|P>>>16)+N|0;J+=(P^N^I)+F[6]+
76029189|0;J=(J<<23|J>>>9)+P|0;I+=(J^P^N)+F[9]-640364487|0;I=(I<<4|I>>>28)+J|0;N+=(I^J^P)+F[12]-421815835|0;N=(N<<11|N>>>21)+I|0;P+=(N^I^J)+F[15]+530742520|0;P=(P<<16|P>>>16)+N|0;J+=(P^N^I)+F[2]-995338651|0;J=(J<<23|J>>>9)+P|0;I+=(P^(J|~N))+F[0]-198630844|0;I=(I<<6|I>>>26)+J|0;N+=(J^(I|~P))+F[7]+1126891415|0;N=(N<<10|N>>>22)+I|0;P+=(I^(N|~J))+F[14]-1416354905|0;P=(P<<15|P>>>17)+N|0;J+=(N^(P|~I))+F[5]-57434055|0;J=(J<<21|J>>>11)+P|0;I+=(P^(J|~N))+F[12]+1700485571|0;I=(I<<6|I>>>26)+J|0;N+=(J^(I|~P))+
F[3]-1894986606|0;N=(N<<10|N>>>22)+I|0;P+=(I^(N|~J))+F[10]-1051523|0;P=(P<<15|P>>>17)+N|0;J+=(N^(P|~I))+F[1]-2054922799|0;J=(J<<21|J>>>11)+P|0;I+=(P^(J|~N))+F[8]+1873313359|0;I=(I<<6|I>>>26)+J|0;N+=(J^(I|~P))+F[15]-30611744|0;N=(N<<10|N>>>22)+I|0;P+=(I^(N|~J))+F[6]-1560198380|0;P=(P<<15|P>>>17)+N|0;J+=(N^(P|~I))+F[13]+1309151649|0;J=(J<<21|J>>>11)+P|0;I+=(P^(J|~N))+F[4]-145523070|0;I=(I<<6|I>>>26)+J|0;N+=(J^(I|~P))+F[11]-1120210379|0;N=(N<<10|N>>>22)+I|0;P+=(I^(N|~J))+F[2]+718787259|0;P=(P<<15|P>>>
17)+N|0;J+=(N^(P|~I))+F[9]-343485551|0;E[0]=I+E[0]|0;E[1]=((J<<21|J>>>11)+P|0)+E[1]|0;E[2]=P+E[2]|0;E[3]=N+E[3]|0}function l(E){var F=[],I;for(I=0;64>I;I+=4)F[I>>2]=E.charCodeAt(I)+(E.charCodeAt(I+1)<<8)+(E.charCodeAt(I+2)<<16)+(E.charCodeAt(I+3)<<24);return F}function a(E){var F=[],I;for(I=0;64>I;I+=4)F[I>>2]=E[I]+(E[I+1]<<8)+(E[I+2]<<16)+(E[I+3]<<24);return F}function f(E){var F=E.length,I=[1732584193,-271733879,-1732584194,271733878],J;for(J=64;J<=F;J+=64)e(I,l(E.substring(J-64,J)));E=E.substring(J-
64);var P=E.length;var N=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(J=0;J<P;J+=1)N[J>>2]|=E.charCodeAt(J)<<(J%4<<3);N[J>>2]|=128<<(J%4<<3);if(55<J)for(e(I,N),J=0;16>J;J+=1)N[J]=0;F=(8*F).toString(16).match(/(.*?)(.{0,8})$/);E=parseInt(F[2],16);F=parseInt(F[1],16)||0;N[14]=E;N[15]=F;e(I,N);return I}function m(E){var F;for(F=0;F<E.length;F+=1){var I=F,J,P=E[F],N="";for(J=0;4>J;J+=1)N+=y[P>>8*J+4&15]+y[P>>8*J&15];E[I]=N}return E.join("")}function r(E){/[\u0080-\uFFFF]/.test(E)&&(E=unescape(encodeURIComponent(E)));
return E}function v(E){var F=[],I=E.length,J;for(J=0;J<I-1;J+=2)F.push(parseInt(E.substr(J,2),16));return String.fromCharCode.apply(String,F)}function x(){this.reset()}var y="0123456789abcdef".split("");m(f("hello"));"undefined"===typeof ArrayBuffer||ArrayBuffer.prototype.slice||function(){function E(F,I){F=F|0||0;return 0>F?Math.max(F+I,0):Math.min(F,I)}ArrayBuffer.prototype.slice=function(F,I){var J=(this||di).byteLength;F=E(F,J);var P=J;I!==b&&(P=E(I,J));if(F>P)return new ArrayBuffer(0);P-=F;I=
new ArrayBuffer(P);J=new Uint8Array(I);F=new Uint8Array(this||di,F,P);J.set(F);return I}}();x.prototype.append=function(E){this.appendBinary(r(E));return this||di};x.prototype.appendBinary=function(E){(this||di)._buff+=E;(this||di)._length+=E.length;E=(this||di)._buff.length;var F;for(F=64;F<=E;F+=64)e((this||di)._hash,l((this||di)._buff.substring(F-64,F)));(this||di)._buff=(this||di)._buff.substring(F-64);return this||di};x.prototype.end=function(E){var F=(this||di)._buff,I=F.length,J,P=[0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0];for(J=0;J<I;J+=1)P[J>>2]|=F.charCodeAt(J)<<(J%4<<3);this._finish(P,I);F=m((this||di)._hash);E&&(F=v(F));this.reset();return F};x.prototype.reset=function(){(this||di)._buff="";(this||di)._length=0;(this||di)._hash=[1732584193,-271733879,-1732584194,271733878];return this||di};x.prototype.getState=function(){return{buff:(this||di)._buff,length:(this||di)._length,hash:(this||di)._hash.slice()}};x.prototype.setState=function(E){(this||di)._buff=E.buff;(this||di)._length=E.length;
(this||di)._hash=E.hash;return this||di};x.prototype.destroy=function(){delete (this||di)._hash;delete (this||di)._buff;delete (this||di)._length};x.prototype._finish=function(E,F){E[F>>2]|=128<<(F%4<<3);if(55<F)for(e((this||di)._hash,E),F=0;16>F;F+=1)E[F]=0;var I=8*(this||di)._length;I=I.toString(16).match(/(.*?)(.{0,8})$/);F=parseInt(I[2],16);I=parseInt(I[1],16)||0;E[14]=F;E[15]=I;e((this||di)._hash,E)};x.hash=function(E,F){return x.hashBinary(r(E),F)};x.hashBinary=function(E,F){E=f(E);E=m(E);return F?
v(E):E};x.ArrayBuffer=function(){this.reset()};x.ArrayBuffer.prototype.append=function(E){var F=(this||di)._buff.buffer,I=new Uint8Array(F.byteLength+E.byteLength);I.set(new Uint8Array(F));I.set(new Uint8Array(E),F.byteLength);F=I.length;(this||di)._length+=E.byteLength;for(E=64;E<=F;E+=64)e((this||di)._hash,a(I.subarray(E-64,E)));(this||di)._buff=E-64<F?new Uint8Array(I.buffer.slice(E-64)):new Uint8Array(0);return this||di};x.ArrayBuffer.prototype.end=function(E){var F=(this||di)._buff,I=F.length,
J=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],P;for(P=0;P<I;P+=1)J[P>>2]|=F[P]<<(P%4<<3);this._finish(J,I);F=m((this||di)._hash);E&&(F=v(F));this.reset();return F};x.ArrayBuffer.prototype.reset=function(){(this||di)._buff=new Uint8Array(0);(this||di)._length=0;(this||di)._hash=[1732584193,-271733879,-1732584194,271733878];return this||di};x.ArrayBuffer.prototype.getState=function(){var E=x.prototype.getState.call(this||di);E.buff=String.fromCharCode.apply(null,new Uint8Array(E.buff));return E};x.ArrayBuffer.prototype.setState=
function(E){var F=E.buff,I=F.length,J=new ArrayBuffer(I);J=new Uint8Array(J);var P;for(P=0;P<I;P+=1)J[P]=F.charCodeAt(P);E.buff=J;return x.prototype.setState.call(this||di,E)};x.ArrayBuffer.prototype.destroy=x.prototype.destroy;x.ArrayBuffer.prototype._finish=x.prototype._finish;x.ArrayBuffer.hash=function(E,F){var I=new Uint8Array(E),J=I.length;E=[1732584193,-271733879,-1732584194,271733878];var P;for(P=64;P<=J;P+=64)e(E,a(I.subarray(P-64,P)));I=P-64<J?I.subarray(P-64):new Uint8Array(0);var N=I.length;
var Y=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(P=0;P<N;P+=1)Y[P>>2]|=I[P]<<(P%4<<3);Y[P>>2]|=128<<(P%4<<3);if(55<P)for(e(E,Y),P=0;16>P;P+=1)Y[P]=0;J=(8*J).toString(16).match(/(.*?)(.{0,8})$/);I=parseInt(J[2],16);J=parseInt(J[1],16)||0;Y[14]=I;Y[15]=J;e(E,Y);E=m(E);return F?v(E):E};return x}(),TF={};Object.defineProperty(TF,"__esModule",{value:!0});var v6=Mo,OY=vJ&&"object"===typeof vJ&&"default"in vJ?vJ["default"]:vJ,Fua=self.setImmediate||self.setTimeout;TF.binaryMd5=function(b,e){function l(){Fua(f)}
function a(){var I=E.end(!0);I=v6.btoa(I);e(I);E.destroy()}function f(){var I=y*v,J=I+v;y++;y<x?F(E,b,I,J,l):F(E,b,I,J,a)}var m="string"===typeof b,r=m?b.length:b.size,v=Math.min(32768,r),x=Math.ceil(r/v),y=0,E=m?new OY:new OY.ArrayBuffer,F=m?Vka:Uka;f()};TF.stringMd5=function(b){return OY.hash(b)};var Eh={};Object.defineProperty(Eh,"__esModule",{value:!0});var LU=bN($X),Gua=bN(wl),$ba=bN(Rj),dN=bN(jw),w6=Function.prototype.toString,Wka=w6.call(Object);try{localStorage.setItem("_pouch_check_localstorage",
1);var cN=!!localStorage.getItem("_pouch_check_localstorage")}catch(b){cN=!1}Gua(WE,dN);WE.prototype.addListener=function(b,e,l,a){function f(){if(m._listeners[e])if(r)r="waiting";else{r=!0;var v=MU(a,"style include_docs attachments conflicts filter doc_ids view since query_params binary return_docs".split(" "));l.changes(v).on("change",function(x){x.seq>a.since&&!a.cancelled&&(a.since=x.seq,a.onChange(x))}).on("complete",function(){"waiting"===r&&$ba(f);r=!1}).on("error",function(){r=!1})}}if(!this._listeners[e]){var m=
this,r=!1;this._listeners[e]=f;this.on(b,f)}};WE.prototype.removeListener=function(b,e){e in this._listeners&&(dN.prototype.removeListener.call(this,b,this._listeners[e]),delete this._listeners[e])};WE.prototype.notifyLocalWindows=function(b){cN&&(localStorage[b]="a"===localStorage[b]?"b":"a")};WE.prototype.notify=function(b){this.emit(b);this.notifyLocalWindows(b)};var Hua="function"===typeof Object.assign?Object.assign:function(b){for(var e=Object(b),l=1;l<arguments.length;l++){var a=arguments[l];
if(null!=a)for(var f in a)Object.prototype.hasOwnProperty.call(a,f)&&(e[f]=a[f])}return e},Iua=function(){}.name?function(b){return b.name}:function(b){return(b=b.toString().match(/^\s*function\s*(?:(\S+)\s*)?\(/))&&b[1]?b[1]:""},aca="source protocol authority userInfo user password host port relative path directory file query anchor".split(" "),Jua=/(?:^|&)([^&=]*)=?([^&]*)/g,Kua=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,
Lua=gD.v4;Eh.adapterFun=function(b,e){return y6(LU(function(l){if(this._closed)return Promise.reject(Error("database is closed"));if(this._destroyed)return Promise.reject(Error("database is destroyed"));var a=this;Xka(a,b,l);return this.taskqueue.isReady?e.apply(this,l):new Promise(function(f,m){a.taskqueue.addTask(function(r){r?m(r):f(a[b].apply(a,l))})})}))};Eh.assign=Hua;Eh.bulkGetShim=function(b,e,l){function a(){var J=[];E.forEach(function(P){P.docs.forEach(function(N){J.push({id:P.id,docs:[N]})})});
l(null,{results:J})}function f(){if(!(I>=F.length)){var J=F.slice(I,Math.min(I+6,F.length));m(J,I);I+=J.length}}function m(J,P){J.forEach(function(N,Y){var W=P+Y;Y=v.get(N);var da=MU(Y[0],["atts_since","attachments"]);da.open_revs=Y.map(function(za){return za.rev});da.open_revs=da.open_revs.filter(z6);var va=z6;0===da.open_revs.length&&(delete da.open_revs,va=Yka);["revs","attachments","binary","ajax","latest"].forEach(function(za){za in e&&(da[za]=e[za])});b.get(N,da,function(za,L){za=za?[{error:za}]:
va(L);E[W]={id:N,docs:za};++y===x&&a();f()})})}var r=e.docs,v=new EA.Map;r.forEach(function(J){v.has(J.id)?v.get(J.id).push(J):v.set(J.id,[J])});var x=v.size,y=0,E=Array(x),F=[];v.forEach(function(J,P){F.push(P)});var I=0;f()};Eh.changesHandler=WE;Eh.clone=UH;Eh.defaultBackOff=function(b){var e=0;b||(e=2E3);b=parseInt(b,10)||0;e=parseInt(e,10);e=e!==e||e<=b?(b||1)<<1:e+1;6E5<e&&(b=3E5,e=6E5);return~~((e-b)*Math.random()+b)};Eh.explainError=function(b,e){NU("info","The above "+b+" is totally normal. "+
e)};Eh.filterChange=function(b){var e={},l=b.filter&&"function"===typeof b.filter;e.query=b.query_params;return function(a){a.doc||(a.doc={});var f;if(f=l)try{f=!(0,b.filter)(a.doc,e)}catch(r){f=Qg.createError(Qg.BAD_REQUEST,"Filter function threw: "+r.toString())}if("object"===typeof f)return f;if(f)return!1;if(!b.include_docs)delete a.doc;else if(!b.attachments)for(var m in a.doc._attachments)a.doc._attachments.hasOwnProperty(m)&&(a.doc._attachments[m].stub=!0);return!0}};Eh.flatten=function(b){for(var e=
[],l=0,a=b.length;l<a;l++)e=e.concat(b[l]);return e};Eh.functionName=Iua;Eh.guardedConsole=NU;Eh.hasLocalStorage=function(){return cN};Eh.invalidIdError=function(b){var e;b?"string"!==typeof b?e=Qg.createError(Qg.INVALID_ID):/^_/.test(b)&&!/^_(design|local)/.test(b)&&(e=Qg.createError(Qg.RESERVED_ID)):e=Qg.createError(Qg.MISSING_ID);if(e)throw e;};Eh.isRemote=function(b){return"boolean"===typeof b._remote?b._remote:"function"===typeof b.type?(NU("warn","db.type() is deprecated and will be removed in a future version of PouchDB"),
"http"===b.type()):!1};Eh.listenerCount=function(b,e){return"listenerCount"in b?b.listenerCount(e):dN.listenerCount(b,e)};Eh.nextTick=$ba;Eh.normalizeDdocFunctionName=function(b){return(b=A6(b))?b.join("/"):null};Eh.once=x6;Eh.parseDdocFunctionName=A6;Eh.parseUri=function(b){b=Kua.exec(b);for(var e={},l=14;l--;){var a=aca[l],f=b[l]||"",m=-1!==["user","password"].indexOf(a);e[a]=m?decodeURIComponent(f):f}e.queryKey={};e[aca[12]].replace(Jua,function(r,v,x){v&&(e.queryKey[v]=x)});return e};Eh.pick=
MU;Eh.rev=function(b,e){b=UH(b);if(!e)return gD.v4().replace(/-/g,"").toLowerCase();delete b._rev_tree;return TF.stringMd5(JSON.stringify(b))};Eh.scopeEval=function(b,e){var l=[],a=[],f;for(f in e)e.hasOwnProperty(f)&&(l.push(f),a.push(e[f]));l.push(b);return Function.apply(null,l).apply(null,a)};Eh.toPromise=y6;Eh.upsert=B6;Eh.uuid=Lua;var bca={};bca=function(){for(var b={},e=0;e<arguments.length;e++){var l=arguments[e],a;for(a in l)Mua.call(l,a)&&(b[a]=l[a])}return b};var Mua=Object.prototype.hasOwnProperty,
LA=bca,cca={};cca=function(b){for(var e=1;e<arguments.length;e++){var l=arguments[e],a;for(a in l)Nua.call(l,a)&&(b[a]=l[a])}return b};for(var Nua=Object.prototype.hasOwnProperty,Oua={},Pua=cca,dca=Oua=function(){var b=LA.apply(null,arguments);return Pua(b,{bufferKeys:b.bufferKeys||!1,snapshots:b.snapshots||!1,permanence:b.permanence||!1,seek:b.seek||!1,clear:b.clear||!1,status:b.status||!1,createIfMissing:b.createIfMissing||!1,errorIfExists:b.errorIfExists||!1,deferredOpen:b.deferredOpen||!1,openCallback:b.openCallback||
!1,promises:b.promises||!1,streams:b.streams||!1,encodings:b.encodings||!1,additionalMethods:LA(b.additionalMethods)})},qw=[],ot=[],Qua="undefined"!==typeof Uint8Array?Uint8Array:Array,UF=0;64>UF;++UF)qw[UF]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[UF],ot["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charCodeAt(UF)]=UF;ot[45]=62;ot[95]=63;var eN={byteLength:function(b){b=C6(b);var e=b[1];return 3*(b[0]+e)/4-e},toByteArray:function(b){var e=C6(b);var l=
e[0];e=e[1];var a=new Qua(3*(l+e)/4-e),f=0,m=0<e?l-4:l,r;for(r=0;r<m;r+=4)l=ot[b.charCodeAt(r)]<<18|ot[b.charCodeAt(r+1)]<<12|ot[b.charCodeAt(r+2)]<<6|ot[b.charCodeAt(r+3)],a[f++]=l>>16&255,a[f++]=l>>8&255,a[f++]=l&255;2===e&&(l=ot[b.charCodeAt(r)]<<2|ot[b.charCodeAt(r+1)]>>4,a[f++]=l&255);1===e&&(l=ot[b.charCodeAt(r)]<<10|ot[b.charCodeAt(r+1)]<<4|ot[b.charCodeAt(r+2)]>>2,a[f++]=l>>8&255,a[f++]=l&255);return a},fromByteArray:function(b){for(var e=b.length,l=e%3,a=[],f=0,m=e-l;f<m;f+=16383)a.push(ala(b,
f,f+16383>m?m:f+16383));1===l?(b=b[e-1],a.push(qw[b>>2]+qw[b<<4&63]+"==")):2===l&&(b=(b[e-2]<<8)+b[e-1],a.push(qw[b>>10]+qw[b>>4&63]+qw[b<<2&63]+"="));return a.join("")}},XE={read:function(b,e,l,a,f){var m=8*f-a-1;var r=(1<<m)-1,v=r>>1,x=-7;f=l?f-1:0;var y=l?-1:1,E=b[e+f];f+=y;l=E&(1<<-x)-1;E>>=-x;for(x+=m;0<x;l=256*l+b[e+f],f+=y,x-=8);m=l&(1<<-x)-1;l>>=-x;for(x+=a;0<x;m=256*m+b[e+f],f+=y,x-=8);if(0===l)l=1-v;else{if(l===r)return m?NaN:Infinity*(E?-1:1);m+=Math.pow(2,a);l-=v}return(E?-1:1)*m*Math.pow(2,
l-a)},write:function(b,e,l,a,f,m){var r,v=8*m-f-1,x=(1<<v)-1,y=x>>1,E=23===f?Math.pow(2,-24)-Math.pow(2,-77):0;m=a?0:m-1;var F=a?1:-1,I=0>e||0===e&&0>1/e?1:0;e=Math.abs(e);isNaN(e)||Infinity===e?(e=isNaN(e)?1:0,a=x):(a=Math.floor(Math.log(e)/Math.LN2),1>e*(r=Math.pow(2,-a))&&(a--,r*=2),e=1<=a+y?e+E/r:e+E*Math.pow(2,1-y),2<=e*r&&(a++,r/=2),a+y>=x?(e=0,a=x):1<=a+y?(e=(e*r-1)*Math.pow(2,f),a+=y):(e=e*Math.pow(2,y-1)*Math.pow(2,f),a=0));for(;8<=f;b[l+m]=e&255,m+=F,e/=256,f-=8);a=a<<f|e;for(v+=f;0<v;b[l+
m]=a&255,m+=F,a/=256,v-=8);b[l+m-F]|=128*I}},eca="function"===typeof Symbol&&"function"===typeof Symbol["for"]?Symbol["for"]("nodejs.util.inspect.custom"):null;var fca=Fe;var OU=2147483647;Fe.TYPED_ARRAY_SUPPORT=function(){try{var b=new Uint8Array(1),e={foo:function(){return 42}};Object.setPrototypeOf(e,Uint8Array.prototype);Object.setPrototypeOf(b,e);return 42===b.foo()}catch(l){return!1}}();Fe.TYPED_ARRAY_SUPPORT||"undefined"===typeof console||"function"!==typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");
Object.defineProperty(Fe.prototype,"parent",{enumerable:!0,get:function(){if(Fe.isBuffer(this))return this.buffer}});Object.defineProperty(Fe.prototype,"offset",{enumerable:!0,get:function(){if(Fe.isBuffer(this))return this.byteOffset}});Fe.poolSize=8192;Fe.from=function(b,e,l){return D6(b,e,l)};Object.setPrototypeOf(Fe.prototype,Uint8Array.prototype);Object.setPrototypeOf(Fe,Uint8Array);Fe.alloc=function(b,e,l){G6(b);b=0>=b?ly(b):void 0!==e?"string"===typeof l?ly(b).fill(e,l):ly(b).fill(e):ly(b);
return b};Fe.allocUnsafe=function(b){return PU(b)};Fe.allocUnsafeSlow=function(b){return PU(b)};Fe.isBuffer=function(b){return null!=b&&!0===b._isBuffer&&b!==Fe.prototype};Fe.compare=function(b,e){rw(b,Uint8Array)&&(b=Fe.from(b,b.offset,b.byteLength));rw(e,Uint8Array)&&(e=Fe.from(e,e.offset,e.byteLength));if(!Fe.isBuffer(b)||!Fe.isBuffer(e))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(b===e)return 0;for(var l=b.length,a=e.length,f=0,m=Math.min(l,
a);f<m;++f)if(b[f]!==e[f]){l=b[f];a=e[f];break}return l<a?-1:a<l?1:0};Fe.isEncoding=function(b){switch(String(b).toLowerCase()){case "hex":case "utf8":case "utf-8":case "ascii":case "latin1":case "binary":case "base64":case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return!0;default:return!1}};Fe.concat=function(b,e){if(!Array.isArray(b))throw new TypeError('"list" argument must be an Array of Buffers');if(0===b.length)return Fe.alloc(0);var l;if(void 0===e)for(l=e=0;l<b.length;++l)e+=b[l].length;
e=Fe.allocUnsafe(e);var a=0;for(l=0;l<b.length;++l){var f=b[l];if(rw(f,Uint8Array))a+f.length>e.length?Fe.from(f).copy(e,a):Uint8Array.prototype.set.call(e,f,a);else if(Fe.isBuffer(f))f.copy(e,a);else throw new TypeError('"list" argument must be an Array of Buffers');a+=f.length}return e};Fe.byteLength=E6;Fe.prototype._isBuffer=!0;Fe.prototype.swap16=function(){var b=this.length;if(0!==b%2)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<b;e+=2)qC(this,e,e+1);return this};
Fe.prototype.swap32=function(){var b=this.length;if(0!==b%4)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<b;e+=4)qC(this,e,e+3),qC(this,e+1,e+2);return this};Fe.prototype.swap64=function(){var b=this.length;if(0!==b%8)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<b;e+=8)qC(this,e,e+7),qC(this,e+1,e+6),qC(this,e+2,e+5),qC(this,e+3,e+4);return this};Fe.prototype.toString=function(){var b=this.length;return 0===b?"":0===arguments.length?
I6(this,0,b):cla.apply(this,arguments)};Fe.prototype.toLocaleString=Fe.prototype.toString;Fe.prototype.equals=function(b){if(!Fe.isBuffer(b))throw new TypeError("Argument must be a Buffer");return this===b?!0:0===Fe.compare(this,b)};Fe.prototype.inspect=function(){var b=this.toString("hex",0,50).replace(/(.{2})/g,"$1 ").trim();50<this.length&&(b+=" ... ");return"<Buffer "+b+">"};eca&&(Fe.prototype[eca]=Fe.prototype.inspect);Fe.prototype.compare=function(b,e,l,a,f){rw(b,Uint8Array)&&(b=Fe.from(b,b.offset,
b.byteLength));if(!Fe.isBuffer(b))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof b);void 0===e&&(e=0);void 0===l&&(l=b?b.length:0);void 0===a&&(a=0);void 0===f&&(f=this.length);if(0>e||l>b.length||0>a||f>this.length)throw new RangeError("out of range index");if(a>=f&&e>=l)return 0;if(a>=f)return-1;if(e>=l)return 1;e>>>=0;l>>>=0;a>>>=0;f>>>=0;if(this===b)return 0;var m=f-a,r=l-e,v=Math.min(m,r);a=this.slice(a,f);b=b.slice(e,l);for(e=0;e<
v;++e)if(a[e]!==b[e]){m=a[e];r=b[e];break}return m<r?-1:r<m?1:0};Fe.prototype.includes=function(b,e,l){return-1!==this.indexOf(b,e,l)};Fe.prototype.indexOf=function(b,e,l){return J6(this,b,e,l,!0)};Fe.prototype.lastIndexOf=function(b,e,l){return J6(this,b,e,l,!1)};Fe.prototype.write=function(b,e,l,a){if(void 0===e)a="utf8",l=this.length,e=0;else if(void 0===l&&"string"===typeof e)a=e,l=this.length,e=0;else if(isFinite(e))e>>>=0,isFinite(l)?(l>>>=0,void 0===a&&(a="utf8")):(a=l,l=void 0);else throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");
var f=this.length-e;if(void 0===l||l>f)l=f;if(0<b.length&&(0>l||0>e)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");a||(a="utf8");for(f=!1;;)switch(a){case "hex":a:{e=Number(e)||0;a=this.length-e;l?(l=Number(l),l>a&&(l=a)):l=a;a=b.length;l>a/2&&(l=a/2);for(a=0;a<l;++a){f=parseInt(b.substr(2*a,2),16);if(f!==f){b=a;break a}this[e+a]=f}b=a}return b;case "utf8":case "utf-8":return fN(SU(b,this.length-e),this,e,l);case "ascii":case "latin1":case "binary":a=[];for(f=0;f<b.length;++f)a.push(b.charCodeAt(f)&
255);return fN(a,this,e,l);case "base64":return fN(eN.toByteArray(H6(b)),this,e,l);case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":a=b;f=this.length-e;for(var m=[],r=0;r<a.length&&!(0>(f-=2));++r){var v=a.charCodeAt(r);b=v>>8;v%=256;m.push(v);m.push(b)}return fN(m,this,e,l);default:if(f)throw new TypeError("Unknown encoding: "+a);a=(""+a).toLowerCase();f=!0}};Fe.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var L6=4096;Fe.prototype.slice=
function(b,e){var l=this.length;b=~~b;e=void 0===e?l:~~e;0>b?(b+=l,0>b&&(b=0)):b>l&&(b=l);0>e?(e+=l,0>e&&(e=0)):e>l&&(e=l);e<b&&(e=b);b=this.subarray(b,e);Object.setPrototypeOf(b,Fe.prototype);return b};Fe.prototype.readUintLE=Fe.prototype.readUIntLE=function(b,e,l){b>>>=0;e>>>=0;l||ao(b,e,this.length);l=this[b];for(var a=1,f=0;++f<e&&(a*=256);)l+=this[b+f]*a;return l};Fe.prototype.readUintBE=Fe.prototype.readUIntBE=function(b,e,l){b>>>=0;e>>>=0;l||ao(b,e,this.length);l=this[b+--e];for(var a=1;0<
e&&(a*=256);)l+=this[b+--e]*a;return l};Fe.prototype.readUint8=Fe.prototype.readUInt8=function(b,e){b>>>=0;e||ao(b,1,this.length);return this[b]};Fe.prototype.readUint16LE=Fe.prototype.readUInt16LE=function(b,e){b>>>=0;e||ao(b,2,this.length);return this[b]|this[b+1]<<8};Fe.prototype.readUint16BE=Fe.prototype.readUInt16BE=function(b,e){b>>>=0;e||ao(b,2,this.length);return this[b]<<8|this[b+1]};Fe.prototype.readUint32LE=Fe.prototype.readUInt32LE=function(b,e){b>>>=0;e||ao(b,4,this.length);return(this[b]|
this[b+1]<<8|this[b+2]<<16)+16777216*this[b+3]};Fe.prototype.readUint32BE=Fe.prototype.readUInt32BE=function(b,e){b>>>=0;e||ao(b,4,this.length);return 16777216*this[b]+(this[b+1]<<16|this[b+2]<<8|this[b+3])};Fe.prototype.readIntLE=function(b,e,l){b>>>=0;e>>>=0;l||ao(b,e,this.length);l=this[b];for(var a=1,f=0;++f<e&&(a*=256);)l+=this[b+f]*a;l>=128*a&&(l-=Math.pow(2,8*e));return l};Fe.prototype.readIntBE=function(b,e,l){b>>>=0;e>>>=0;l||ao(b,e,this.length);l=e;for(var a=1,f=this[b+--l];0<l&&(a*=256);)f+=
this[b+--l]*a;f>=128*a&&(f-=Math.pow(2,8*e));return f};Fe.prototype.readInt8=function(b,e){b>>>=0;e||ao(b,1,this.length);return this[b]&128?-1*(255-this[b]+1):this[b]};Fe.prototype.readInt16LE=function(b,e){b>>>=0;e||ao(b,2,this.length);b=this[b]|this[b+1]<<8;return b&32768?b|4294901760:b};Fe.prototype.readInt16BE=function(b,e){b>>>=0;e||ao(b,2,this.length);b=this[b+1]|this[b]<<8;return b&32768?b|4294901760:b};Fe.prototype.readInt32LE=function(b,e){b>>>=0;e||ao(b,4,this.length);return this[b]|this[b+
1]<<8|this[b+2]<<16|this[b+3]<<24};Fe.prototype.readInt32BE=function(b,e){b>>>=0;e||ao(b,4,this.length);return this[b]<<24|this[b+1]<<16|this[b+2]<<8|this[b+3]};Fe.prototype.readFloatLE=function(b,e){b>>>=0;e||ao(b,4,this.length);return XE.read(this,b,!0,23,4)};Fe.prototype.readFloatBE=function(b,e){b>>>=0;e||ao(b,4,this.length);return XE.read(this,b,!1,23,4)};Fe.prototype.readDoubleLE=function(b,e){b>>>=0;e||ao(b,8,this.length);return XE.read(this,b,!0,52,8)};Fe.prototype.readDoubleBE=function(b,
e){b>>>=0;e||ao(b,8,this.length);return XE.read(this,b,!1,52,8)};Fe.prototype.writeUintLE=Fe.prototype.writeUIntLE=function(b,e,l,a){b=+b;e>>>=0;l>>>=0;a||Lq(this,b,e,l,Math.pow(2,8*l)-1,0);a=1;var f=0;for(this[e]=b&255;++f<l&&(a*=256);)this[e+f]=b/a&255;return e+l};Fe.prototype.writeUintBE=Fe.prototype.writeUIntBE=function(b,e,l,a){b=+b;e>>>=0;l>>>=0;a||Lq(this,b,e,l,Math.pow(2,8*l)-1,0);a=l-1;var f=1;for(this[e+a]=b&255;0<=--a&&(f*=256);)this[e+a]=b/f&255;return e+l};Fe.prototype.writeUint8=Fe.prototype.writeUInt8=
function(b,e,l){b=+b;e>>>=0;l||Lq(this,b,e,1,255,0);this[e]=b&255;return e+1};Fe.prototype.writeUint16LE=Fe.prototype.writeUInt16LE=function(b,e,l){b=+b;e>>>=0;l||Lq(this,b,e,2,65535,0);this[e]=b&255;this[e+1]=b>>>8;return e+2};Fe.prototype.writeUint16BE=Fe.prototype.writeUInt16BE=function(b,e,l){b=+b;e>>>=0;l||Lq(this,b,e,2,65535,0);this[e]=b>>>8;this[e+1]=b&255;return e+2};Fe.prototype.writeUint32LE=Fe.prototype.writeUInt32LE=function(b,e,l){b=+b;e>>>=0;l||Lq(this,b,e,4,4294967295,0);this[e+3]=
b>>>24;this[e+2]=b>>>16;this[e+1]=b>>>8;this[e]=b&255;return e+4};Fe.prototype.writeUint32BE=Fe.prototype.writeUInt32BE=function(b,e,l){b=+b;e>>>=0;l||Lq(this,b,e,4,4294967295,0);this[e]=b>>>24;this[e+1]=b>>>16;this[e+2]=b>>>8;this[e+3]=b&255;return e+4};Fe.prototype.writeIntLE=function(b,e,l,a){b=+b;e>>>=0;a||(a=Math.pow(2,8*l-1),Lq(this,b,e,l,a-1,-a));a=0;var f=1,m=0;for(this[e]=b&255;++a<l&&(f*=256);)0>b&&0===m&&0!==this[e+a-1]&&(m=1),this[e+a]=(b/f>>0)-m&255;return e+l};Fe.prototype.writeIntBE=
function(b,e,l,a){b=+b;e>>>=0;a||(a=Math.pow(2,8*l-1),Lq(this,b,e,l,a-1,-a));a=l-1;var f=1,m=0;for(this[e+a]=b&255;0<=--a&&(f*=256);)0>b&&0===m&&0!==this[e+a+1]&&(m=1),this[e+a]=(b/f>>0)-m&255;return e+l};Fe.prototype.writeInt8=function(b,e,l){b=+b;e>>>=0;l||Lq(this,b,e,1,127,-128);0>b&&(b=255+b+1);this[e]=b&255;return e+1};Fe.prototype.writeInt16LE=function(b,e,l){b=+b;e>>>=0;l||Lq(this,b,e,2,32767,-32768);this[e]=b&255;this[e+1]=b>>>8;return e+2};Fe.prototype.writeInt16BE=function(b,e,l){b=+b;e>>>=
0;l||Lq(this,b,e,2,32767,-32768);this[e]=b>>>8;this[e+1]=b&255;return e+2};Fe.prototype.writeInt32LE=function(b,e,l){b=+b;e>>>=0;l||Lq(this,b,e,4,2147483647,-2147483648);this[e]=b&255;this[e+1]=b>>>8;this[e+2]=b>>>16;this[e+3]=b>>>24;return e+4};Fe.prototype.writeInt32BE=function(b,e,l){b=+b;e>>>=0;l||Lq(this,b,e,4,2147483647,-2147483648);0>b&&(b=4294967295+b+1);this[e]=b>>>24;this[e+1]=b>>>16;this[e+2]=b>>>8;this[e+3]=b&255;return e+4};Fe.prototype.writeFloatLE=function(b,e,l){return N6(this,b,e,
!0,l)};Fe.prototype.writeFloatBE=function(b,e,l){return N6(this,b,e,!1,l)};Fe.prototype.writeDoubleLE=function(b,e,l){return O6(this,b,e,!0,l)};Fe.prototype.writeDoubleBE=function(b,e,l){return O6(this,b,e,!1,l)};Fe.prototype.copy=function(b,e,l,a){if(!Fe.isBuffer(b))throw new TypeError("argument should be a Buffer");l||(l=0);a||0===a||(a=this.length);e>=b.length&&(e=b.length);e||(e=0);0<a&&a<l&&(a=l);if(a===l||0===b.length||0===this.length)return 0;if(0>e)throw new RangeError("targetStart out of bounds");
if(0>l||l>=this.length)throw new RangeError("Index out of range");if(0>a)throw new RangeError("sourceEnd out of bounds");a>this.length&&(a=this.length);b.length-e<a-l&&(a=b.length-e+l);var f=a-l;this===b&&"function"===typeof Uint8Array.prototype.copyWithin?this.copyWithin(e,l,a):Uint8Array.prototype.set.call(b,this.subarray(l,a),e);return f};Fe.prototype.fill=function(b,e,l,a){if("string"===typeof b){"string"===typeof e?(a=e,e=0,l=this.length):"string"===typeof l&&(a=l,l=this.length);if(void 0!==
a&&"string"!==typeof a)throw new TypeError("encoding must be a string");if("string"===typeof a&&!Fe.isEncoding(a))throw new TypeError("Unknown encoding: "+a);if(1===b.length){var f=b.charCodeAt(0);if("utf8"===a&&128>f||"latin1"===a)b=f}}else"number"===typeof b?b&=255:"boolean"===typeof b&&(b=Number(b));if(0>e||this.length<e||this.length<l)throw new RangeError("Out of range index");if(l<=e)return this;e>>>=0;l=void 0===l?this.length:l>>>0;b||(b=0);if("number"===typeof b)for(a=e;a<l;++a)this[a]=b;else{f=
Fe.isBuffer(b)?b:Fe.from(b,a);var m=f.length;if(0===m)throw new TypeError('The value "'+b+'" is invalid for argument "value"');for(a=0;a<l-e;++a)this[a+e]=f[a%m]}return this};var ela=/[^+/0-9A-Za-z-_]/g,dla=function(){for(var b=Array(256),e=0;16>e;++e)for(var l=16*e,a=0;16>a;++a)b[l+a]="0123456789abcdef"[e]+"0123456789abcdef"[a];return b}(),my="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,Rua={};gA.prototype.next=function(b){var e=this||my;if("function"!==typeof b)throw Error("next() requires a callback argument");
if(e._ended)return Rj(b,Error("cannot call next() after end()")),e;if(e._nexting)return Rj(b,Error("cannot call next() before previous next() has completed")),e;e._nexting=!0;e._next(function(){e._nexting=!1;b.apply(null,arguments)});return e};gA.prototype._next=function(b){Rj(b)};gA.prototype.seek=function(b){if((this||my)._ended)throw Error("cannot call seek() after end()");if((this||my)._nexting)throw Error("cannot call seek() before next() has completed");b=(this||my).db._serializeKey(b);this._seek(b)};
gA.prototype._seek=function(b){};gA.prototype.end=function(b){if("function"!==typeof b)throw Error("end() requires a callback argument");if((this||my)._ended)return Rj(b,Error("end() already called on iterator"));(this||my)._ended=!0;this._end(b)};gA.prototype._end=function(b){Rj(b)};gA.prototype._nextTick=Rj;var gca=Rua=gA,tn="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,Sua={};Bu.prototype._checkWritten=function(){if((this||tn)._written)throw Error("write() already called on this batch");
};Bu.prototype.put=function(b,e){this._checkWritten();var l=(this||tn).db._checkKey(b)||(this||tn).db._checkValue(e);if(l)throw l;b=(this||tn).db._serializeKey(b);e=(this||tn).db._serializeValue(e);this._put(b,e);return this||tn};Bu.prototype._put=function(b,e){(this||tn)._operations.push({type:"put",key:b,value:e})};Bu.prototype.del=function(b){this._checkWritten();var e=(this||tn).db._checkKey(b);if(e)throw e;b=(this||tn).db._serializeKey(b);this._del(b);return this||tn};Bu.prototype._del=function(b){(this||
tn)._operations.push({type:"del",key:b})};Bu.prototype.clear=function(){this._checkWritten();this._clear();return this||tn};Bu.prototype._clear=function(){(this||tn)._operations=[]};Bu.prototype.write=function(b,e){this._checkWritten();"function"===typeof b&&(e=b);if("function"!==typeof e)throw Error("write() requires a callback argument");if("object"!==typeof b||null===b)b={};(this||tn)._written=!0;this._write(b,e)};Bu.prototype._write=function(b,e){(this||tn).db._batch((this||tn)._operations,b,
e)};Bu.prototype._nextTick=Rj;var Tua=Sua=Bu,Er="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,hca={},fla=dca,gla=Object.prototype.hasOwnProperty,hla="start end gt gte lt lte".split(" ");Gl.prototype.open=function(b,e){var l=this||Er,a=(this||Er).status;"function"===typeof b&&(e=b);if("function"!==typeof e)throw Error("open() requires a callback argument");if("object"!==typeof b||null===b)b={};b.createIfMissing=!1!==b.createIfMissing;b.errorIfExists=!!b.errorIfExists;
(this||Er).status="opening";this._open(b,function(f){if(f)return l.status=a,e(f);l.status="open";e()})};Gl.prototype._open=function(b,e){Rj(e)};Gl.prototype.close=function(b){var e=this||Er,l=(this||Er).status;if("function"!==typeof b)throw Error("close() requires a callback argument");(this||Er).status="closing";this._close(function(a){if(a)return e.status=l,b(a);e.status="closed";b()})};Gl.prototype._close=function(b){Rj(b)};Gl.prototype.get=function(b,e,l){"function"===typeof e&&(l=e);if("function"!==
typeof l)throw Error("get() requires a callback argument");var a=this._checkKey(b);if(a)return Rj(l,a);b=this._serializeKey(b);if("object"!==typeof e||null===e)e={};e.asBuffer=!1!==e.asBuffer;this._get(b,e,l)};Gl.prototype._get=function(b,e,l){Rj(function(){l(Error("NotFound"))})};Gl.prototype.put=function(b,e,l,a){"function"===typeof l&&(a=l);if("function"!==typeof a)throw Error("put() requires a callback argument");var f=this._checkKey(b)||this._checkValue(e);if(f)return Rj(a,f);b=this._serializeKey(b);
e=this._serializeValue(e);if("object"!==typeof l||null===l)l={};this._put(b,e,l,a)};Gl.prototype._put=function(b,e,l,a){Rj(a)};Gl.prototype.del=function(b,e,l){"function"===typeof e&&(l=e);if("function"!==typeof l)throw Error("del() requires a callback argument");var a=this._checkKey(b);if(a)return Rj(l,a);b=this._serializeKey(b);if("object"!==typeof e||null===e)e={};this._del(b,e,l)};Gl.prototype._del=function(b,e,l){Rj(l)};Gl.prototype.batch=function(b,e,l){if(!arguments.length)return this._chainedBatch();
"function"===typeof e&&(l=e);"function"===typeof b&&(l=b);if("function"!==typeof l)throw Error("batch(array) requires a callback argument");if(!Array.isArray(b))return Rj(l,Error("batch(array) requires an array argument"));if(0===b.length)return Rj(l);if("object"!==typeof e||null===e)e={};for(var a=Array(b.length),f=0;f<b.length;f++){if("object"!==typeof b[f]||null===b[f])return Rj(l,Error("batch(array) element must be an object and not `null`"));var m=LA(b[f]);if("put"!==m.type&&"del"!==m.type)return Rj(l,
Error("`type` must be 'put' or 'del'"));var r=this._checkKey(m.key);if(r)return Rj(l,r);m.key=this._serializeKey(m.key);if("put"===m.type){if(r=this._checkValue(m.value))return Rj(l,r);m.value=this._serializeValue(m.value)}a[f]=m}this._batch(a,e,l)};Gl.prototype._batch=function(b,e,l){Rj(l)};Gl.prototype.clear=function(b,e){if("function"===typeof b)e=b;else if("function"!==typeof e)throw Error("clear() requires a callback argument");b=P6(this||Er,b);b.reverse=!!b.reverse;b.limit="limit"in b?b.limit:
-1;this._clear(b,e)};Gl.prototype._clear=function(b,e){b.keys=!0;b.values=!1;b.keyAsBuffer=!0;b.valueAsBuffer=!0;var l=this._iterator(b),a={},f=this||Er,m=function(r){if(r)return l.end(function(){e(r)});l.next(function(v,x){if(v)return m(v);if(void 0===x)return l.end(e);f._del(x,a,m)})};m()};Gl.prototype._setupIteratorOptions=function(b){b=P6(this||Er,b);b.reverse=!!b.reverse;b.keys=!1!==b.keys;b.values=!1!==b.values;b.limit="limit"in b?b.limit:-1;b.keyAsBuffer=!1!==b.keyAsBuffer;b.valueAsBuffer=
!1!==b.valueAsBuffer;return b};Gl.prototype.iterator=function(b){if("object"!==typeof b||null===b)b={};b=this._setupIteratorOptions(b);return this._iterator(b)};Gl.prototype._iterator=function(b){return new gca(this||Er)};Gl.prototype._chainedBatch=function(){return new Tua(this||Er)};Gl.prototype._serializeKey=function(b){return b};Gl.prototype._serializeValue=function(b){return b};Gl.prototype._checkKey=function(b){if(null===b||void 0===b)return Error("key cannot be `null` or `undefined`");if(fca.isBuffer(b)&&
0===b.length)return Error("key cannot be an empty Buffer");if(""===b)return Error("key cannot be an empty String");if(Array.isArray(b)&&0===b.length)return Error("key cannot be an empty Array")};Gl.prototype._checkValue=function(b){if(null===b||void 0===b)return Error("value cannot be `null` or `undefined`")};Gl.prototype._nextTick=Rj;hca=Gl;var Uua=hca;var Cu="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,ica={},Q6=gca;wl(YE,Q6);YE.prototype.setDb=function(b){var e=
(this||Cu)._iterator=b.iterator((this||Cu)._options);(this||Cu)._operations.forEach(function(l){e[l.method].apply(e,l.args)})};YE.prototype._operation=function(b,e){if((this||Cu)._iterator)return(this||Cu)._iterator[b].apply((this||Cu)._iterator,e);(this||Cu)._operations.push({method:b,args:e})};["next","end"].forEach(function(b){YE.prototype["_"+b]=function(){this._operation(b,arguments)}});YE.prototype.seek=function(){this._operation("seek",arguments)};ica=YE;var bo="undefined"!==typeof globalThis?
globalThis:"undefined"!==typeof self?self:global,PY={},R6=Uua,U6=ica,T6=["put","get","del","batch","clear"],ila=["approximateSize","compactRange"];wl(rC,R6);rC.prototype.type="deferred-leveldown";rC.prototype._open=function(b,e){var l=this||bo;(this||bo)._db.open(b,function(a){if(a)return e(a);l._operations.forEach(function(f){f.iterator?f.iterator.setDb(l._db):l._db[f.method].apply(l._db,f.args)});l._operations=[];jla(l);e()})};rC.prototype._close=function(b){var e=this||bo;(this||bo)._db.close(function(l){if(l)return b(l);
S6(e);b()})};rC.prototype._serializeKey=function(b){return b};rC.prototype._serializeValue=function(b){return b};PY=rC;PY.DeferredIterator=U6;var Vua=PY,X6={},W6=!1,TU={},Y6=!1,VU="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,Wua={},vla=Wua=function(b,e){if(UU("noDeprecation"))return b;var l=!1;return function(){if(!l){if(UU("throwDeprecation"))throw Error(e);UU("traceDeprecation")?console.trace(e):console.warn(e);l=!0}return b.apply(this||VU,arguments)}},dQ={},
eQ=oi,sw=eQ.Buffer;sw.from&&sw.alloc&&sw.allocUnsafe&&sw.allocUnsafeSlow?dQ=eQ:(Z6(eQ,dQ),dQ.Buffer=sC);sC.prototype=Object.create(sw.prototype);Z6(sw,sC);sC.from=function(b,e,l){if("number"===typeof b)throw new TypeError("Argument must not be a number");return sw(b,e,l)};sC.alloc=function(b,e,l){if("number"!==typeof b)throw new TypeError("Argument must be a number");b=sw(b);void 0!==e?"string"===typeof l?b.fill(e,l):b.fill(e):b.fill(0);return b};sC.allocUnsafe=function(b){if("number"!==typeof b)throw new TypeError("Argument must be a number");
return sw(b)};sC.allocUnsafeSlow=function(b){if("number"!==typeof b)throw new TypeError("Argument must be a number");return eQ.SlowBuffer(b)};var aV={},WU=dQ.Buffer,$6=WU.isEncoding||function(b){b=""+b;switch(b&&b.toLowerCase()){case "hex":case "utf8":case "utf-8":case "ascii":case "binary":case "base64":case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":case "raw":return!0;default:return!1}};aV.StringDecoder=VH;VH.prototype.write=function(b){if(0===b.length)return"";if(this.lastNeed){var e=
this.fillLast(b);if(void 0===e)return"";var l=this.lastNeed;this.lastNeed=0}else l=0;return l<b.length?e?e+this.text(b,l):this.text(b,l):e||""};VH.prototype.end=function(b){b=b&&b.length?this.write(b):"";return this.lastNeed?b+"\ufffd":b};VH.prototype.text=function(b,e){var l=sla(this,b,e);if(!this.lastNeed)return b.toString("utf8",e);this.lastTotal=l;l=b.length-(l-this.lastNeed);b.copy(this.lastChar,0,l);return b.toString("utf8",e,l)};VH.prototype.fillLast=function(b){if(this.lastNeed<=b.length)return b.copy(this.lastChar,
this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);b.copy(this.lastChar,this.lastTotal-this.lastNeed,0,b.length);this.lastNeed-=b.length};var b7={},a7=!1,d7={},c7=!1,g7=Object.freeze({}),f7={},e7=!1,j7={},i7=!1,m7={},l7=!1,ZU={},o7=!1,wla="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,$U={},p7=!1,s7={},r7=!1,bV={},t7=!1,yla="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,cV={},v7=!1,
QY={},jca=!1,kca={},lca=!1,Ur={},mca=!1;mca||(mca=!0,Ur=Ur=q7(),Ur.Stream=Ur,Ur.Readable=Ur,Ur.Writable=n7(),Ur.Duplex=$E(),Ur.Transform=u7(),Ur.PassThrough=function(){function b(l){if(!(this instanceof b))return new b(l);e.call(this,l)}if(jca)return QY;jca=!0;QY=b;var e=u7();wl(b,e);b.prototype._transform=function(l,a,f){f(null,l)};return QY}(),Ur.finished=YU(),Ur.pipeline=function(){function b(y){var E=!1;return function(){E||(E=!0,y.apply(void 0,arguments))}}function e(y){if(y)throw y;}function l(y,
E,F,I){I=b(I);var J=!1;y.on("close",function(){J=!0});void 0===m&&(m=YU());m(y,{readable:E,writable:F},function(N){if(N)return I(N);J=!0;I()});var P=!1;return function(N){if(!J&&!P){P=!0;if(y.setHeader&&"function"===typeof y.abort)return y.abort();if("function"===typeof y.destroy)return y.destroy();I(N||new x("pipe"))}}}function a(y){y()}function f(y,E){return y.pipe(E)}if(lca)return kca;lca=!0;var m,r=ZE().codes,v=r.ERR_MISSING_ARGS,x=r.ERR_STREAM_DESTROYED;return kca=function(){for(var y=arguments.length,
E=Array(y),F=0;F<y;F++)E[F]=arguments[F];var I=E.length?"function"!==typeof E[E.length-1]?e:E.pop():e;Array.isArray(E[0])&&(E=E[0]);if(2>E.length)throw new v("streams");var J,P=E.map(function(N,Y){var W=Y<E.length-1;return l(N,W,0<Y,function(da){J||(J=da);da&&P.forEach(a);W||(P.forEach(a),I(J))})});return E.reduce(f)}}());var nca=Ur;var Du="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,oca={},Xua=wl,w7=nca.Readable,zla=LA;oca=aF;Xua(aF,w7);aF.prototype._read=function(){var b=
this||Du,e=(this||Du)._options;(this||Du).destroyed||(this||Du)._iterator.next(function(l,a,f){if(!b.destroyed){if(l)return b.destroy(l);void 0===a&&void 0===f?b.push(null):!1!==e.keys&&!1===e.values?b.push(a):!1===e.keys&&!1!==e.values?b.push(f):b.push({key:a,value:f})}})};aF.prototype._destroy=function(b,e){(this||Du)._iterator.end(function(l){e(b||l)})};var Yua=oca,fQ={};(function(b,e,l){fQ?fQ=l():e[b]=l()})("prr",fQ,function(){var b="function"==typeof Object.defineProperty?function(l,a,f){Object.defineProperty(l,
a,f);return l}:function(l,a,f){l[a]=f.value;return l},e=function(l,a){var f="object"==typeof a,m=!f&&"string"==typeof a,r=function(v){return f?!!a[v]:m?-1<a.indexOf(v[0]):!1};return{enumerable:r("enumerable"),configurable:r("configurable"),writable:r("writable"),value:l}};return function(l,a,f,m){var r;m=e(f,m);if("object"==typeof a){for(r in a)Object.hasOwnProperty.call(a,r)&&(m.value=a[r],b(l,r,m));return l}return b(l,a,m)}});var Qm="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?
self:global,Zua={},Ala=fQ;dV.prototype=Error();var $ua=Zua=function(b){var e=function(l,a){return Bla(b,l,a)};return{CustomError:dV,FilesystemError:e("FilesystemError"),createError:e}},Vw={},ava=Vw.all=[{errno:-2,code:"ENOENT",description:"no such file or directory"},{errno:-1,code:"UNKNOWN",description:"unknown error"},{errno:0,code:"OK",description:"success"},{errno:1,code:"EOF",description:"end of file"},{errno:2,code:"EADDRINFO",description:"getaddrinfo error"},{errno:3,code:"EACCES",description:"permission denied"},
{errno:4,code:"EAGAIN",description:"resource temporarily unavailable"},{errno:5,code:"EADDRINUSE",description:"address already in use"},{errno:6,code:"EADDRNOTAVAIL",description:"address not available"},{errno:7,code:"EAFNOSUPPORT",description:"address family not supported"},{errno:8,code:"EALREADY",description:"connection already in progress"},{errno:9,code:"EBADF",description:"bad file descriptor"},{errno:10,code:"EBUSY",description:"resource busy or locked"},{errno:11,code:"ECONNABORTED",description:"software caused connection abort"},
{errno:12,code:"ECONNREFUSED",description:"connection refused"},{errno:13,code:"ECONNRESET",description:"connection reset by peer"},{errno:14,code:"EDESTADDRREQ",description:"destination address required"},{errno:15,code:"EFAULT",description:"bad address in system call argument"},{errno:16,code:"EHOSTUNREACH",description:"host is unreachable"},{errno:17,code:"EINTR",description:"interrupted system call"},{errno:18,code:"EINVAL",description:"invalid argument"},{errno:19,code:"EISCONN",description:"socket is already connected"},
{errno:20,code:"EMFILE",description:"too many open files"},{errno:21,code:"EMSGSIZE",description:"message too long"},{errno:22,code:"ENETDOWN",description:"network is down"},{errno:23,code:"ENETUNREACH",description:"network is unreachable"},{errno:24,code:"ENFILE",description:"file table overflow"},{errno:25,code:"ENOBUFS",description:"no buffer space available"},{errno:26,code:"ENOMEM",description:"not enough memory"},{errno:27,code:"ENOTDIR",description:"not a directory"},{errno:28,code:"EISDIR",
description:"illegal operation on a directory"},{errno:29,code:"ENONET",description:"machine is not on the network"},{errno:31,code:"ENOTCONN",description:"socket is not connected"},{errno:32,code:"ENOTSOCK",description:"socket operation on non-socket"},{errno:33,code:"ENOTSUP",description:"operation not supported on socket"},{errno:34,code:"ENOENT",description:"no such file or directory"},{errno:35,code:"ENOSYS",description:"function not implemented"},{errno:36,code:"EPIPE",description:"broken pipe"},
{errno:37,code:"EPROTO",description:"protocol error"},{errno:38,code:"EPROTONOSUPPORT",description:"protocol not supported"},{errno:39,code:"EPROTOTYPE",description:"protocol wrong type for socket"},{errno:40,code:"ETIMEDOUT",description:"connection timed out"},{errno:41,code:"ECHARSET",description:"invalid Unicode character"},{errno:42,code:"EAIFAMNOSUPPORT",description:"address family for hostname not supported"},{errno:44,code:"EAISERVICE",description:"servname not supported for ai_socktype"},
{errno:45,code:"EAISOCKTYPE",description:"ai_socktype not supported"},{errno:46,code:"ESHUTDOWN",description:"cannot send after transport endpoint shutdown"},{errno:47,code:"EEXIST",description:"file already exists"},{errno:48,code:"ESRCH",description:"no such process"},{errno:49,code:"ENAMETOOLONG",description:"name too long"},{errno:50,code:"EPERM",description:"operation not permitted"},{errno:51,code:"ELOOP",description:"too many symbolic links encountered"},{errno:52,code:"EXDEV",description:"cross-device link not permitted"},
{errno:53,code:"ENOTEMPTY",description:"directory not empty"},{errno:54,code:"ENOSPC",description:"no space left on device"},{errno:55,code:"EIO",description:"i/o error"},{errno:56,code:"EROFS",description:"read-only file system"},{errno:57,code:"ENODEV",description:"no such device"},{errno:58,code:"ESPIPE",description:"invalid seek"},{errno:59,code:"ECANCELED",description:"operation canceled"}];Vw.errno={};Vw.code={};ava.forEach(function(b){Vw.errno[b.errno]=b;Vw.code[b.code]=b});Vw.custom=$ua(Vw);
Vw.create=Vw.custom.createError;var bva={},hD=Vw.create,iD=hD("LevelUPError"),RY=hD("NotFoundError",iD);RY.prototype.notFound=!0;RY.prototype.status=404;var jD=bva={LevelUPError:iD,InitializationError:hD("InitializationError",iD),OpenError:hD("OpenError",iD),ReadError:hD("ReadError",iD),WriteError:hD("WriteError",iD),NotFoundError:RY,EncodingError:hD("EncodingError",iD)},cva={},MA=cva=function(){var b,e=new Promise(function(l,a){b=function(f,m){f?a(f):l(m)}});b.promise=e;return b};var VF=function(b,
e){return"function"===typeof b?b:e};var pca=function(b){return"object"===typeof b&&null!==b?b:{}};var Rm="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,dva={},wJ=jD.WriteError;WH.prototype.put=function(b,e){try{(this||Rm).batch.put(b,e)}catch(l){throw new wJ(l);}(this||Rm).ops.push({type:"put",key:b,value:e});(this||Rm).length++;return this||Rm};WH.prototype.del=function(b){try{(this||Rm).batch.del(b)}catch(e){throw new wJ(e);}(this||Rm).ops.push({type:"del",key:b});
(this||Rm).length++;return this||Rm};WH.prototype.clear=function(){try{(this||Rm).batch.clear()}catch(b){throw new wJ(b);}(this||Rm).ops=[];(this||Rm).length=0;return this||Rm};WH.prototype.write=function(b,e){var l=(this||Rm)._levelup,a=(this||Rm).ops;e=VF(b,e);if(!e){e=MA();var f=e.promise}b=pca(b);try{(this||Rm).batch.write(b,function(m){if(m)return e(new wJ(m));l.emit("batch",a);e()})}catch(m){throw new wJ(m);}return f};var eva=dva=WH,Nla={assign:y7,polyfill:function(){Object.assign||Object.defineProperty(Object,
"assign",{enumerable:!1,configurable:!0,writable:!0,value:y7})}},qca=Object.prototype.toString,rca=function(b){var e=qca.call(b),l="[object Arguments]"===e;return l||(l="[object Array]"!==e&&null!==b&&"object"==typeof b&&"number"==typeof b.length&&0<=b.length&&"[object Function]"===qca.call(b.callee)),l};if(!Object.keys){var gQ=Object.prototype.hasOwnProperty,sca=Object.prototype.toString,tca=Object.prototype.propertyIsEnumerable,fva=!tca.call({toString:null},"toString"),gva=tca.call(function(){},
"prototype"),hQ="toString toLocaleString valueOf hasOwnProperty isPrototypeOf propertyIsEnumerable constructor".split(" "),SY=function(b){var e=b.constructor;return e&&e.prototype===b},hva={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,
$webkitStorageInfo:!0,$window:!0},iva=function(){if("undefined"==typeof window)return!1;for(var b in window)try{if(!hva["$"+b]&&gQ.call(window,b)&&null!==window[b]&&"object"==typeof window[b])try{SY(window[b])}catch(e){return!0}}catch(e){return!0}return!1}();var jva=function(b){var e=null!==b&&"object"==typeof b,l="[object Function]"===sca.call(b),a=rca(b),f=e&&"[object String]"===sca.call(b),m=[];if(!e&&!l&&!a)throw new TypeError("Object.keys called on a non-object");e=gva&&l;if(f&&0<b.length&&!gQ.call(b,
0))for(f=0;f<b.length;++f)m.push(String(f));if(a&&0<b.length)for(a=0;a<b.length;++a)m.push(String(a));else for(var r in b)e&&"prototype"===r||!gQ.call(b,r)||m.push(String(r));if(fva){if("undefined"!=typeof window&&iva)try{var v=SY(b)}catch(x){v=!1}else v=SY(b);for(a=0;a<hQ.length;++a)v&&"constructor"===hQ[a]||!gQ.call(b,hQ[a])||m.push(hQ[a])}return m}}var kva=jva,lva=Array.prototype.slice,uca=Object.keys,iQ=uca?function(b){return uca(b)}:kva,vca=Object.keys;iQ.shim=function(){Object.keys?function(){var b=
Object.keys(arguments);return b&&b.length===arguments.length}(1,2)||(Object.keys=function(b){return rca(b)?vca(lva.call(b)):vca(b)}):Object.keys=iQ;return Object.keys||iQ};var mva="function"==typeof Symbol&&"symbol"==typeof Symbol("foo"),nva=Object.prototype.toString,ova=Array.prototype.concat,TY=Object.defineProperty,wca=TY&&function(){var b={};try{for(var e in TY(b,"x",{enumerable:!1,value:b}),b)return!1;return b.x===b}catch(l){return!1}}(),xJ=function(b,e){var l=2<arguments.length?arguments[2]:
{},a=iQ(e);mva&&(a=ova.call(a,Object.getOwnPropertySymbols(e)));for(var f=0;f<a.length;f+=1){var m=void 0,r=b,v=a[f],x=e[a[f]],y=l[a[f]];(!(v in r)||"function"==typeof(m=y)&&"[object Function]"===nva.call(m)&&y())&&(wca?TY(r,v,{configurable:!0,enumerable:!1,value:x,writable:!0}):r[v]=x)}};xJ.supportsDescriptors=!!wca;var xca=("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global).Symbol,pva=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;
if("symbol"==typeof Symbol.iterator)return!0;var b={},e=Symbol("test"),l=Object(e);if("string"==typeof e||"[object Symbol]"!==Object.prototype.toString.call(e)||"[object Symbol]"!==Object.prototype.toString.call(l))return!1;for(e in b[e]=42,b)return!1;if("function"==typeof Object.keys&&0!==Object.keys(b).length||"function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(b).length)return!1;l=Object.getOwnPropertySymbols(b);return 1!==l.length||l[0]!==e||!Object.prototype.propertyIsEnumerable.call(b,
e)||"function"==typeof Object.getOwnPropertyDescriptor&&(b=Object.getOwnPropertyDescriptor(b,e),42!==b.value||!0!==b.enumerable)?!1:!0},UY=Array.prototype.slice,qva=Object.prototype.toString,rva=function(b){var e=this;if("function"!=typeof e||"[object Function]"!==qva.call(e))throw new TypeError("Function.prototype.bind called on incompatible "+e);for(var l,a=UY.call(arguments,1),f=Math.max(0,e.length-a.length),m=[],r=0;r<f;r++)m.push("$"+r);if(l=Function("binder","return function ("+m.join(",")+
"){ return binder.apply(this,arguments); }")(function(){if(this instanceof l){var v=e.apply(this,a.concat(UY.call(arguments)));return Object(v)===v?v:this}return e.apply(b,a.concat(UY.call(arguments)))}),e.prototype)f=function(){},f.prototype=e.prototype,l.prototype=new f,f.prototype=null;return l},VY=Function.prototype.bind||rva,yJ=TypeError,kD=Object.getOwnPropertyDescriptor;if(kD)try{kD({},"")}catch(b){kD=null}var WY=function(){throw new yJ;},sva=kD?function(){try{return arguments.callee,WY}catch(b){try{return kD(arguments,
"callee").get}catch(e){return WY}}}():WY,lD="function"==typeof xca&&"function"==typeof Symbol&&"symbol"==typeof xca("foo")&&"symbol"==typeof Symbol("bar")&&pva(),mD=Object.getPrototypeOf||function(b){return b.__proto__},XY="undefined"==typeof Uint8Array?void 0:mD(Uint8Array),YY={"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?void 0:ArrayBuffer,"%ArrayBufferPrototype%":"undefined"==typeof ArrayBuffer?void 0:ArrayBuffer.prototype,"%ArrayIteratorPrototype%":lD?mD([][Symbol.iterator]()):
void 0,"%ArrayPrototype%":Array.prototype,"%ArrayProto_entries%":Array.prototype.entries,"%ArrayProto_forEach%":Array.prototype.forEach,"%ArrayProto_keys%":Array.prototype.keys,"%ArrayProto_values%":Array.prototype.values,"%AsyncFromSyncIteratorPrototype%":void 0,"%AsyncFunction%":void 0,"%AsyncFunctionPrototype%":void 0,"%AsyncGenerator%":void 0,"%AsyncGeneratorFunction%":void 0,"%AsyncGeneratorPrototype%":void 0,"%AsyncIteratorPrototype%":void 0,"%Atomics%":"undefined"==typeof Atomics?void 0:Atomics,
"%Boolean%":Boolean,"%BooleanPrototype%":Boolean.prototype,"%DataView%":"undefined"==typeof DataView?void 0:DataView,"%DataViewPrototype%":"undefined"==typeof DataView?void 0:DataView.prototype,"%Date%":Date,"%DatePrototype%":Date.prototype,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%ErrorPrototype%":Error.prototype,"%eval%":eval,"%EvalError%":EvalError,"%EvalErrorPrototype%":EvalError.prototype,
"%Float32Array%":"undefined"==typeof Float32Array?void 0:Float32Array,"%Float32ArrayPrototype%":"undefined"==typeof Float32Array?void 0:Float32Array.prototype,"%Float64Array%":"undefined"==typeof Float64Array?void 0:Float64Array,"%Float64ArrayPrototype%":"undefined"==typeof Float64Array?void 0:Float64Array.prototype,"%Function%":Function,"%FunctionPrototype%":Function.prototype,"%Generator%":void 0,"%GeneratorFunction%":void 0,"%GeneratorPrototype%":void 0,"%Int8Array%":"undefined"==typeof Int8Array?
void 0:Int8Array,"%Int8ArrayPrototype%":"undefined"==typeof Int8Array?void 0:Int8Array.prototype,"%Int16Array%":"undefined"==typeof Int16Array?void 0:Int16Array,"%Int16ArrayPrototype%":"undefined"==typeof Int16Array?void 0:Int8Array.prototype,"%Int32Array%":"undefined"==typeof Int32Array?void 0:Int32Array,"%Int32ArrayPrototype%":"undefined"==typeof Int32Array?void 0:Int32Array.prototype,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":lD?mD(mD([][Symbol.iterator]())):void 0,"%JSON%":"object"==
typeof JSON?JSON:void 0,"%JSONParse%":"object"==typeof JSON?JSON.parse:void 0,"%Map%":"undefined"==typeof Map?void 0:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&lD?mD((new Map)[Symbol.iterator]()):void 0,"%MapPrototype%":"undefined"==typeof Map?void 0:Map.prototype,"%Math%":Math,"%Number%":Number,"%NumberPrototype%":Number.prototype,"%Object%":Object,"%ObjectPrototype%":Object.prototype,"%ObjProto_toString%":Object.prototype.toString,"%ObjProto_valueOf%":Object.prototype.valueOf,"%parseFloat%":parseFloat,
"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?void 0:Promise,"%PromisePrototype%":"undefined"==typeof Promise?void 0:Promise.prototype,"%PromiseProto_then%":"undefined"==typeof Promise?void 0:Promise.prototype.then,"%Promise_all%":"undefined"==typeof Promise?void 0:Promise.all,"%Promise_reject%":"undefined"==typeof Promise?void 0:Promise.reject,"%Promise_resolve%":"undefined"==typeof Promise?void 0:Promise.resolve,"%Proxy%":"undefined"==typeof Proxy?void 0:Proxy,"%RangeError%":RangeError,
"%RangeErrorPrototype%":RangeError.prototype,"%ReferenceError%":ReferenceError,"%ReferenceErrorPrototype%":ReferenceError.prototype,"%Reflect%":"undefined"==typeof Reflect?void 0:Reflect,"%RegExp%":RegExp,"%RegExpPrototype%":RegExp.prototype,"%Set%":"undefined"==typeof Set?void 0:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&lD?mD((new Set)[Symbol.iterator]()):void 0,"%SetPrototype%":"undefined"==typeof Set?void 0:Set.prototype,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?void 0:
SharedArrayBuffer,"%SharedArrayBufferPrototype%":"undefined"==typeof SharedArrayBuffer?void 0:SharedArrayBuffer.prototype,"%String%":String,"%StringIteratorPrototype%":lD?mD(""[Symbol.iterator]()):void 0,"%StringPrototype%":String.prototype,"%Symbol%":lD?Symbol:void 0,"%SymbolPrototype%":lD?Symbol.prototype:void 0,"%SyntaxError%":SyntaxError,"%SyntaxErrorPrototype%":SyntaxError.prototype,"%ThrowTypeError%":sva,"%TypedArray%":XY,"%TypedArrayPrototype%":XY?XY.prototype:void 0,"%TypeError%":yJ,"%TypeErrorPrototype%":yJ.prototype,
"%Uint8Array%":"undefined"==typeof Uint8Array?void 0:Uint8Array,"%Uint8ArrayPrototype%":"undefined"==typeof Uint8Array?void 0:Uint8Array.prototype,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?void 0:Uint8ClampedArray,"%Uint8ClampedArrayPrototype%":"undefined"==typeof Uint8ClampedArray?void 0:Uint8ClampedArray.prototype,"%Uint16Array%":"undefined"==typeof Uint16Array?void 0:Uint16Array,"%Uint16ArrayPrototype%":"undefined"==typeof Uint16Array?void 0:Uint16Array.prototype,"%Uint32Array%":"undefined"==
typeof Uint32Array?void 0:Uint32Array,"%Uint32ArrayPrototype%":"undefined"==typeof Uint32Array?void 0:Uint32Array.prototype,"%URIError%":URIError,"%URIErrorPrototype%":URIError.prototype,"%WeakMap%":"undefined"==typeof WeakMap?void 0:WeakMap,"%WeakMapPrototype%":"undefined"==typeof WeakMap?void 0:WeakMap.prototype,"%WeakSet%":"undefined"==typeof WeakSet?void 0:WeakSet,"%WeakSetPrototype%":"undefined"==typeof WeakSet?void 0:WeakSet.prototype},yca=VY.call(Function.call,String.prototype.replace),tva=
/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,uva=/\\(\\)?/g,vva=function(b){var e=[];return yca(b,tva,function(l,a,f,m){e[e.length]=f?yca(m,uva,"$1"):a||l}),e},zca,Aca=function(b,e){if("string"!=typeof b||0===b.length)throw new TypeError("intrinsic name must be a non-empty string");if(1<arguments.length&&"boolean"!=typeof e)throw new TypeError('"allowMissing" argument must be a boolean');var l=vva(b);var a="%"+(0<l.length?l[0]:"")+"%";if(!(a in
YY))throw new SyntaxError("intrinsic "+a+" does not exist!");if(void 0===YY[a]&&!e)throw new yJ("intrinsic "+a+" exists, but is not available. Please file an issue!");a=YY[a];for(var f=1;f<l.length;f+=1)if(null!=a)if(kD&&f+1>=l.length){var m=kD(a,l[f]);if(!(e||l[f]in a))throw new yJ("base intrinsic for "+b+" exists, but the property is not available.");a=m?m.get||m.value:a[l[f]]}else a=a[l[f]];return a}("%Function%"),wva=Aca.apply,xva=Aca.call;(zca=function(){return VY.apply(xva,arguments)}).apply=
function(){return VY.apply(wva,arguments)};var ZY,jQ,yva=(ZY=function(b,e){return 0===b&&0===e?1/b==1/e:b===e||!(b==b||e==e)},ZY),zva=(jQ=function(){return"function"==typeof Object.is?Object.is:yva},jQ),Bca=zca(jQ(),Object);xJ(Bca,{getPolyfill:jQ,implementation:ZY,shim:function(){var b=zva();return xJ(Object,{is:b},{is:function(){return Object.is!==b}}),b}});var U7=Bca;var Cca=function(b){return b!=b};var kQ,Ava=Cca,Bva=(kQ=function(){return Number.isNaN&&Number.isNaN(NaN)&&!Number.isNaN("a")?Number.isNaN:
Ava},xJ),Cva=Cca,Dca=kQ();xJ(Dca,{getPolyfill:kQ,implementation:Cva,shim:function(){var b=kQ();return Bva(Number,{isNaN:b},{isNaN:function(){return Number.isNaN!==b}}),b}});var eV={},A7=!1,C7={},B7=!1,Ela=void 0!==/a/g.flags,lN=function(b){var e=[];return b.forEach(function(l){return e.push(l)}),e},R7=function(b){var e=[];return b.forEach(function(l,a){return e.push([a,l])}),e},F7=Object.is?Object.is:U7,hN=Object.getOwnPropertySymbols?Object.getOwnPropertySymbols:function(){return[]},hV=Number.isNaN?
Number.isNaN:Dca,YH=gV(Object.prototype.hasOwnProperty),kN=gV(Object.prototype.propertyIsEnumerable),G7=gV(Object.prototype.toString),Tp=$h.types,Jla=Tp.isAnyArrayBuffer,Gla=Tp.isArrayBufferView,H7=Tp.isDate,iN=Tp.isMap,I7=Tp.isRegExp,jN=Tp.isSet,Fla=Tp.isNativeError,Kla=Tp.isBoxedPrimitive,J7=Tp.isNumberObject,K7=Tp.isStringObject,L7=Tp.isBooleanObject,M7=Tp.isBigIntObject,Lla=Tp.isSymbolObject,Hla=Tp.isFloat32Array,Ila=Tp.isFloat64Array,S7={isDeepEqual:function(b,e){return Ws(b,e,!1)},isDeepStrictEqual:function(b,
e){return Ws(b,e,!0)}},iV={},T7=!1,Dva=fV(),Gi="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,Eva={},nN=mj,mN=jw.EventEmitter,Fva=$h.inherits,V7=Vua,Qla=dca,Pla=Dva,bF=pca,lQ=jD.WriteError,W7=jD.ReadError,Gva=jD.NotFoundError,Hva=jD.OpenError,Ola=jD.InitializationError;il.prototype.emit=mN.prototype.emit;il.prototype.once=mN.prototype.once;Fva(il,mN);il.prototype.open=function(b,e){var l=this||Gi;"function"===typeof b&&(e=b,b=null);if(!e){e=MA();var a=e.promise}b||
(b=(this||Gi).options);if(this.isOpen())return nN.nextTick(e,null,l),a;if(this._isOpening())return this.once("open",function(){e(null,l)}),a;this.emit("opening");(this||Gi).db.open(b,function(f){if(f)return e(new Hva(f));l.db=l._db;e(null,l);l.emit("open");l.emit("ready")});return a};il.prototype.close=function(b){var e=this||Gi;if(!b){b=MA();var l=b.promise}if(this.isOpen())(this||Gi).db.close(function(){e.emit("closed");b.apply(null,arguments)}),this.emit("closing"),(this||Gi).db=new V7((this||
Gi)._db);else if(this.isClosed())nN.nextTick(b);else if("closing"===(this||Gi).db.status)this.once("closed",b);else if(this._isOpening())this.once("open",function(){e.close(b)});return l};il.prototype.isOpen=function(){return"open"===(this||Gi).db.status};il.prototype._isOpening=function(){return"opening"===(this||Gi).db.status};il.prototype.isClosed=function(){return/^clos|new/.test((this||Gi).db.status)};il.prototype.get=function(b,e,l){l=VF(e,l);if(!l){l=MA();var a=l.promise}if(ZH(this||Gi,l))return a;
e=bF(e);(this||Gi).db.get(b,e,function(f,m){if(f)return f=/notfound/i.test(f)||f.notFound?new Gva("Key not found in database ["+b+"]",f):new W7(f),l(f);l(null,m)});return a};il.prototype.put=function(b,e,l,a){var f=this||Gi;a=VF(l,a);if(!a){a=MA();var m=a.promise}if(ZH(this||Gi,a))return m;l=bF(l);(this||Gi).db.put(b,e,l,function(r){if(r)return a(new lQ(r));f.emit("put",b,e);a()});return m};il.prototype.del=function(b,e,l){var a=this||Gi;l=VF(e,l);if(!l){l=MA();var f=l.promise}if(ZH(this||Gi,l))return f;
e=bF(e);(this||Gi).db.del(b,e,function(m){if(m)return l(new lQ(m));a.emit("del",b);l()});return f};il.prototype.batch=function(b,e,l){if(!arguments.length)return new eva(this||Gi);var a=this||Gi;l="function"===typeof b?b:VF(e,l);if(!l){l=MA();var f=l.promise}if(ZH(this||Gi,l))return f;e=bF(e);(this||Gi).db.batch(b,e,function(m){if(m)return l(new lQ(m));a.emit("batch",b);l()});return f};il.prototype.iterator=function(b){return(this||Gi).db.iterator(b)};il.prototype.clear=function(b,e){var l=this||
Gi;e=VF(b,e);b=bF(b);if(!e){e=MA();var a=e.promise}if(ZH(this||Gi,e))return a;(this||Gi).db.clear(b,function(f){if(f)return e(new lQ(f));l.emit("clear",b);e()});return a};il.prototype.readStream=il.prototype.createReadStream=function(b){b=LA({keys:!0,values:!0},b);"number"!==typeof b.limit&&(b.limit=-1);return new Yua((this||Gi).db.iterator(b),b)};il.prototype.keyStream=il.prototype.createKeyStream=function(b){return this.createReadStream(LA(b,{keys:!0,values:!1}))};il.prototype.valueStream=il.prototype.createValueStream=
function(b){return this.createReadStream(LA(b,{keys:!1,values:!0}))};il.prototype.toString=function(){return"LevelUP"};il.prototype.type="levelup";il.errors=jD;var Iva=Eva=il.default=il,hm={},Jva=oi.Buffer;hm.compare=function(b,e){if(Jva.isBuffer(b)){for(var l=Math.min(b.length,e.length),a=0;a<l;a++){var f=b[a]-e[a];if(f)return f}return b.length-e.length}return b<e?-1:b>e?1:0};var Kva=hm.lowerBoundKey=function(b){return tw(b,"gt")||tw(b,"gte")||tw(b,"min")||(b.reverse?tw(b,"end"):tw(b,"start"))||
void 0},$Y=hm.lowerBound=function(b,e){var l=Kva(b);return l?b[l]:e},aZ=hm.lowerBoundInclusive=function(b){return Object.hasOwnProperty.call(b,"gt")?!1:!0},bZ=hm.upperBoundInclusive=function(b){return Object.hasOwnProperty.call(b,"lt")?!1:!0},Lva=hm.lowerBoundExclusive=function(b){return!aZ(b)},Mva=hm.upperBoundExclusive=function(b){return!bZ(b)},Nva=hm.upperBoundKey=function(b){return tw(b,"lt")||tw(b,"lte")||tw(b,"max")||(b.reverse?tw(b,"start"):tw(b,"end"))||void 0},cZ=hm.upperBound=function(b,
e){var l=Nva(b);return l?b[l]:e};hm.start=function(b,e){return b.reverse?cZ(b,e):$Y(b,e)};hm.end=function(b,e){return b.reverse?$Y(b,e):cZ(b,e)};hm.startInclusive=function(b){return b.reverse?bZ(b):aZ(b)};hm.endInclusive=function(b){return b.reverse?aZ(b):bZ(b)};hm.toLtgt=function(b,e,l,a,f){e=e||{};l=l||Rla;var m=3<arguments.length,r=hm.lowerBoundKey(b),v=hm.upperBoundKey(b);r?"gt"===r?e.gt=l(b.gt,!1):e.gte=l(b[r],!1):m&&(e.gte=l(a,!1));v?"lt"===v?e.lt=l(b.lt,!0):e.lte=l(b[v],!0):m&&(e.lte=l(f,!0));
null!=b.reverse&&(e.reverse=!!b.reverse);Object.hasOwnProperty.call(e,"max")&&delete e.max;Object.hasOwnProperty.call(e,"min")&&delete e.min;Object.hasOwnProperty.call(e,"start")&&delete e.start;Object.hasOwnProperty.call(e,"end")&&delete e.end;return e};hm.contains=function(b,e,l){l=l||hm.compare;var a=$Y(b);if(void 0!==a&&""!==a&&(a=l(e,a),0>a||0===a&&Lva(b)))return!1;a=cZ(b);return void 0!==a&&""!==a&&(a=l(e,a),0<a||0===a&&Mva(b))?!1:!0};hm.filter=function(b,e){return function(l){return hm.contains(b,
l,e)}};var Gy={},kV=fca;Gy.utf8=Gy["utf-8"]={encode:function(b){return jV(b)?b:String(b)},decode:oN,buffer:!1,type:"utf8"};Gy.json={encode:JSON.stringify,decode:JSON.parse,buffer:!1,type:"json"};Gy.binary={encode:function(b){return jV(b)?b:kV.from(b)},decode:oN,buffer:!0,type:"binary"};Gy.none={encode:oN,decode:oN,buffer:!1,type:"id"};Gy.id=Gy.none;"hex ascii base64 ucs2 ucs-2 utf16le utf-16le".split(" ").forEach(function(b){Gy[b]={encode:function(e){return jV(e)?e:kV.from(e,b)},decode:function(e){return e.toString(b)},
buffer:!0,type:b}});var ny="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,Eca={},lV=Gy;Eca=Lp;Lp.prototype._encoding=function(b){"string"===typeof b&&(b=lV[b]);b||(b=lV.id);return b};Lp.prototype._keyEncoding=function(b,e){return this._encoding(e&&e.keyEncoding||b&&b.keyEncoding||(this||ny).opts.keyEncoding)};Lp.prototype._valueEncoding=function(b,e){return this._encoding(e&&(e.valueEncoding||e.encoding)||b&&(b.valueEncoding||b.encoding)||(this||ny).opts.valueEncoding||
(this||ny).opts.encoding)};Lp.prototype.encodeKey=function(b,e,l){return this._keyEncoding(e,l).encode(b)};Lp.prototype.encodeValue=function(b,e,l){return this._valueEncoding(e,l).encode(b)};Lp.prototype.decodeKey=function(b,e){return this._keyEncoding(e).decode(b)};Lp.prototype.decodeValue=function(b,e){return this._valueEncoding(e).decode(b)};Lp.prototype.encodeBatch=function(b,e){var l=this||ny;return b.map(function(a){var f={type:a.type,key:l.encodeKey(a.key,e,a)};l.keyAsBuffer(e,a)&&(f.keyEncoding=
"binary");a.prefix&&(f.prefix=a.prefix);"value"in a&&(f.value=l.encodeValue(a.value,e,a),l.valueAsBuffer(e,a)&&(f.valueEncoding="binary"));return f})};var Ova="lt gt lte gte start end".split(" ");Lp.prototype.encodeLtgt=function(b){var e=this||ny,l={};Object.keys(b).forEach(function(a){l[a]=-1<Ova.indexOf(a)?e.encodeKey(b[a],b):b[a]});return l};Lp.prototype.createStreamDecoder=function(b){var e=this||ny;return b.keys&&b.values?function(l,a){return{key:e.decodeKey(l,b),value:e.decodeValue(a,b)}}:b.keys?
function(l){return e.decodeKey(l,b)}:b.values?function(l,a){return e.decodeValue(a,b)}:function(){}};Lp.prototype.keyAsBuffer=function(b){return this._keyEncoding(b).buffer};Lp.prototype.valueAsBuffer=function(b){return this._valueEncoding(b).buffer};var Pva=Eca,Qva={},Vla=Qva=Array.isArray||function(b){return"[object Array]"==Object.prototype.toString.call(b)},Sm={},Rva=oi.Buffer;Sm.isArray=function(b){return Array.isArray?Array.isArray(b):"[object Array]"===Object.prototype.toString.call(b)};Sm.isBoolean=
function(b){return"boolean"===typeof b};Sm.isNull=function(b){return null===b};Sm.isNullOrUndefined=function(b){return null==b};Sm.isNumber=function(b){return"number"===typeof b};Sm.isString=function(b){return"string"===typeof b};Sm.isSymbol=function(b){return"symbol"===typeof b};Sm.isUndefined=function(b){return void 0===b};Sm.isRegExp=function(b){return"[object RegExp]"===Object.prototype.toString.call(b)};Sm.isObject=function(b){return"object"===typeof b&&null!==b};Sm.isDate=function(b){return"[object Date]"===
Object.prototype.toString.call(b)};Sm.isError=function(b){return"[object Error]"===Object.prototype.toString.call(b)||b instanceof Error};Sm.isFunction=function(b){return"function"===typeof b};Sm.isPrimitive=function(b){return null===b||"boolean"===typeof b||"number"===typeof b||"string"===typeof b||"symbol"===typeof b||"undefined"===typeof b};Sm.isBuffer=Rva.isBuffer;var Og="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,oV={},Fca=oi.Buffer,Sva=Fca.isEncoding||function(b){switch(b&&
b.toLowerCase()){case "hex":case "utf8":case "utf-8":case "ascii":case "binary":case "base64":case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":case "raw":return!0;default:return!1}},dZ=oV.StringDecoder=function(b){(this||Og).encoding=(b||"utf8").toLowerCase().replace(/[-_]/,"");if(b&&!Sva(b))throw Error("Unknown encoding: "+b);switch((this||Og).encoding){case "utf8":(this||Og).surrogateSize=3;break;case "ucs2":case "utf16le":(this||Og).surrogateSize=2;(this||Og).detectIncompleteChar=Tla;break;
case "base64":(this||Og).surrogateSize=3;(this||Og).detectIncompleteChar=Ula;break;default:(this||Og).write=Sla;return}(this||Og).charBuffer=new Fca(6);(this||Og).charReceived=0;(this||Og).charLength=0};dZ.prototype.write=function(b){for(var e="";(this||Og).charLength;){e=b.length>=(this||Og).charLength-(this||Og).charReceived?(this||Og).charLength-(this||Og).charReceived:b.length;b.copy((this||Og).charBuffer,(this||Og).charReceived,0,e);(this||Og).charReceived+=e;if((this||Og).charReceived<(this||
Og).charLength)return"";b=b.slice(e,b.length);e=(this||Og).charBuffer.slice(0,(this||Og).charLength).toString((this||Og).encoding);var l=e.charCodeAt(e.length-1);if(55296<=l&&56319>=l)(this||Og).charLength+=(this||Og).surrogateSize,e="";else{(this||Og).charReceived=(this||Og).charLength=0;if(0===b.length)return e;break}}this.detectIncompleteChar(b);var a=b.length;(this||Og).charLength&&(b.copy((this||Og).charBuffer,0,b.length-(this||Og).charReceived,a),a-=(this||Og).charReceived);e+=b.toString((this||
Og).encoding,0,a);a=e.length-1;l=e.charCodeAt(a);return 55296<=l&&56319>=l?(l=(this||Og).surrogateSize,(this||Og).charLength+=l,(this||Og).charReceived+=l,(this||Og).charBuffer.copy((this||Og).charBuffer,l,0,l),b.copy((this||Og).charBuffer,0,0,l),e.substring(0,a)):e};dZ.prototype.detectIncompleteChar=function(b){for(var e=3<=b.length?3:b.length;0<e;e--){var l=b[b.length-e];if(1==e&&6==l>>5){(this||Og).charLength=2;break}if(2>=e&&14==l>>4){(this||Og).charLength=3;break}if(3>=e&&30==l>>3){(this||Og).charLength=
4;break}}(this||Og).charReceived=e};dZ.prototype.end=function(b){var e="";b&&b.length&&(e=this.write(b));(this||Og).charReceived&&(b=(this||Og).encoding,e+=(this||Og).charBuffer.slice(0,(this||Og).charReceived).toString(b));return e};var Wla=Object.freeze({}),mV={},Y7=!1,Hi="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,nV={},Z7=!1,Fu="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,pV={},a8=!1,Xf="undefined"!==typeof globalThis?globalThis:
"undefined"!==typeof self?self:global,qV={},c8=!1,co="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,rV={},e8=!1,d8="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,pt={},Gca=!1,Tva=function(){if(Gca)return pt;Gca=!0;var b=mj;pt=pt=$7();pt.Stream=tC;pt.Readable=pt;pt.Writable=X7();pt.Duplex=cF();pt.Transform=b8();pt.PassThrough=Xla();b.browser||"disable"!==b.env.READABLE_STREAM||(pt=tC);return pt}(),Uva={},$la=$H(hm),Vva=$H(jw),Wva=
$H(Pva),Xva=$H(Tva),Hca=$H(wl);Hca(sV,Error);sV.prototype.name="NotFoundError";var Yva=Vva.EventEmitter,Zva=new sV,Ica=function(b,e,l,a){function f(r){var v={},x;if(a)for(x in a)"undefined"!==typeof a[x]&&(v[x]=a[x]);if(r)for(x in r)"undefined"!==typeof r[x]&&(v[x]=r[x]);return v}var m=new Yva;m.sublevels={};m.options=a;m.version="6.5.4";m.methods={};e=e||[];m.put=function(r,v,x,y){"function"===typeof x&&(y=x,x={});b.apply([{key:r,value:v,prefix:e.slice(),type:"put"}],f(x),function(E){if(E)return y(E);
m.emit("put",r,v);y(null)})};m.prefix=function(){return e.slice()};m.batch=function(r,v,x){"function"===typeof v&&(x=v,v={});r=r.map(function(y){return{key:y.key,value:y.value,prefix:y.prefix||e,keyEncoding:y.keyEncoding,valueEncoding:y.valueEncoding,type:y.type}});b.apply(r,f(v),function(y){if(y)return x(y);m.emit("batch",r);x(null)})};m.get=function(r,v,x){"function"===typeof v&&(x=v,v={});b.get(r,e,f(v),function(y,E){y?x(Zva):x(null,E)})};m.sublevel=function(r,v){return m.sublevels[r]=m.sublevels[r]||
Ica(b,e.concat(r),l,f(v))};m.readStream=m.createReadStream=function(r){r=f(r);r.prefix=e;var v=b.iterator(r);r=l(r,b.createDecoder(r));r.setIterator(v);return r};m.close=function(r){b.close(r)};m.isOpen=b.isOpen;m.isClosed=b.isClosed;return m},f8=Xva.Readable;Hca(hA,f8);hA.prototype.setIterator=function(b){this._iterator=b;return this._destroyed?b.end(function(){}):this._waiting?(this._waiting=!1,this._read()):this};hA.prototype._read=function(){var b=this;if(!b._destroyed){if(!b._iterator)return this._waiting=
!0;b._iterator.next(function(e,l,a){if(e||void 0===l&&void 0===a)return e||b._destroyed||b.push(null),b._cleanup(e);a=b._makeData(l,a);b._destroyed||b.push(a)})}};hA.prototype._cleanup=function(b){if(!this._destroyed){this._destroyed=!0;var e=this;b&&"iterator has ended"!==b.message&&e.emit("error",b);e._iterator?e._iterator.end(function(){e._iterator=null;e.emit("close")}):e.emit("close")}};hA.prototype.destroy=function(){this._cleanup()};var $va={encode:function(b){return"\u00ff"+b[0]+"\u00ff"+
b[1]},decode:function(b){b=b.toString();var e=b.indexOf("\u00ff",1);return[b.substring(1,e),b.substring(e+1)]},lowerBound:"\x00",upperBound:"\u00ff"},awa=new Wva,bwa=Uva=function(b){return Ica(Zla(b,$va,awa),[],hA,b.options)},oy="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,mQ={},cwa=mj,g8=nca.Transform,Jca=wl;Jca(dF,g8);dF.prototype.destroy=function(b){if(!(this||oy)._destroyed){(this||oy)._destroyed=!0;var e=this||oy;cwa.nextTick(function(){b&&e.emit("error",b);
e.emit("close")})}};mQ=tV(function(b,e,l){b=new dF(b);b._transform=e;l&&(b._flush=l);return b});mQ.ctor=tV(function(b,e,l){function a(f){if(!((this||oy)instanceof a))return new a(f);(this||oy).options=Object.assign({},b,f);dF.call(this||oy,(this||oy).options)}Jca(a,dF);a.prototype._transform=e;l&&(a.prototype._flush=l);return a});mQ.obj=tV(function(b,e,l){b=new dF(Object.assign({objectMode:!0,highWaterMark:16},b));b._transform=e;l&&(b._flush=l);return b});var Kca=mQ,dwa={};mk.prototype.toArray=function(){for(var b=
this._length,e=Array(b),l=this._front,a=this._capacity,f=0;f<b;++f)e[f]=this[l+f&a-1];return e};mk.prototype.push=function(b){var e=arguments.length,l=this._length;if(1<e){var a=this._capacity;if(l+e>a){for(var f=0;f<e;++f){this._checkCapacity(l+1);var m=this._front+l&this._capacity-1;this[m]=arguments[f];l++;this._length=l}return l}m=this._front;for(f=0;f<e;++f)this[m+l&a-1]=arguments[f],m++;this._length=l+e;return l+e}if(0===e)return l;this._checkCapacity(l+1);f=this._front+l&this._capacity-1;this[f]=
b;this._length=l+1;return l+1};mk.prototype.pop=function(){var b=this._length;if(0!==b){var e=this._front+b-1&this._capacity-1,l=this[e];this[e]=void 0;this._length=b-1;return l}};mk.prototype.shift=function(){var b=this._length;if(0!==b){var e=this._front,l=this[e];this[e]=void 0;this._front=e+1&this._capacity-1;this._length=b-1;return l}};mk.prototype.unshift=function(b){var e=this._length,l=arguments.length;if(1<l){var a=this._capacity;if(e+l>a){for(var f=l-1;0<=f;f--){this._checkCapacity(e+1);
a=this._capacity;var m=(this._front-1&a-1^a)-a;this[m]=arguments[f];e++;this._length=e;this._front=m}return e}m=this._front;for(f=l-1;0<=f;f--)m=(m-1&a-1^a)-a,this[m]=arguments[f];this._front=m;this._length=e+l;return e+l}if(0===l)return e;this._checkCapacity(e+1);a=this._capacity;f=(this._front-1&a-1^a)-a;this[f]=b;this._length=e+1;this._front=f;return e+1};mk.prototype.peekBack=function(){var b=this._length;if(0!==b)return this[this._front+b-1&this._capacity-1]};mk.prototype.peekFront=function(){if(0!==
this._length)return this[this._front]};mk.prototype.get=function(b){if(b===(b|0)){var e=this._length;0>b&&(b+=e);if(!(0>b||b>=e))return this[this._front+b&this._capacity-1]}};mk.prototype.isEmpty=function(){return 0===this._length};mk.prototype.clear=function(){for(var b=this._length,e=this._front,l=this._capacity,a=0;a<b;++a)this[e+a&l-1]=void 0;this._front=this._length=0};mk.prototype.toString=function(){return this.toArray().toString()};mk.prototype.valueOf=mk.prototype.toString;mk.prototype.removeFront=
mk.prototype.shift;mk.prototype.removeBack=mk.prototype.pop;mk.prototype.insertFront=mk.prototype.unshift;mk.prototype.insertBack=mk.prototype.push;mk.prototype.enqueue=mk.prototype.push;mk.prototype.dequeue=mk.prototype.shift;mk.prototype.toJSON=mk.prototype.toArray;Object.defineProperty(mk.prototype,"length",{get:function(){return this._length},set:function(){throw new RangeError("");}});mk.prototype._checkCapacity=function(b){this._capacity<b&&this._resizeTo(h8(1.5*this._capacity+16))};mk.prototype._resizeTo=
function(b){var e=this._capacity;this._capacity=b;b=this._front;var l=this._length;if(b+l>e)for(b=b+l&e-1,l=0;l<b;++l)this[l+e]=this[l+0],this[l+0]=void 0};var i8=Array.isArray,ewa=dwa=mk,fwa={},Ww=oi.Buffer,gwa=Object.prototype.toString,eZ="function"===typeof Ww.alloc&&"function"===typeof Ww.allocUnsafe&&"function"===typeof Ww.from,hwa=fwa=function(b,e,l){if("number"===typeof b)throw new TypeError('"value" argument must not be a number');if("ArrayBuffer"===gwa.call(b).slice(8,-1)){e>>>=0;var a=b.byteLength-
e;if(0>a)throw new RangeError("'offset' is out of bounds");if(void 0===l)l=a;else if(l>>>=0,l>a)throw new RangeError("'length' is out of bounds");return eZ?Ww.from(b.slice(e,e+l)):new Ww(new Uint8Array(b.slice(e,e+l)))}if("string"===typeof b){l=e;if("string"!==typeof l||""===l)l="utf8";if(!Ww.isEncoding(l))throw new TypeError('"encoding" must be a valid string encoding');return eZ?Ww.from(b,l):new Ww(b,l)}return eZ?Ww.from(b):new Ww(b)},Qq={};Object.defineProperty(Qq,"__esModule",{value:!0});Qq.collectConflicts=
function(b){var e=uV(b);b=j8(b.rev_tree);for(var l=[],a=0,f=b.length;a<f;a++){var m=b[a];m.rev===e||m.opts.deleted||l.push(m.rev)}return l};Qq.collectLeaves=j8;Qq.compactTree=function(b){var e=[];pN(b.rev_tree,function(l,a,f,m,r){"available"!==r.status||l||(e.push(a+"-"+f),r.status="missing")});return e};Qq.isDeleted=function(b,e){e||(e=uV(b));e=e.substring(e.indexOf("-")+1);b=b.rev_tree.map(fma);for(var l;l=b.pop();){if(l[0]===e)return!!l[1].deleted;b=b.concat(l[2])}};Qq.isLocalId=function(b){return/^_local/.test(b)};
Qq.merge=function(b,e,l){b=n8(b,e);l=ema(b.tree,l);return{tree:l.tree,stemmedRevs:l.revs,conflicts:b.conflicts}};Qq.revExists=function(b,e){b=b.slice();var l=e.split("-");e=parseInt(l[0],10);l=l[1];for(var a;a=b.pop();){if(a.pos===e&&a.ids[0]===l)return!0;for(var f=a.ids[2],m=0,r=f.length;m<r;m++)b.push({pos:a.pos+1,ids:f[m]})}return!1};Qq.rootToLeaf=k8;Qq.traverseRevTree=pN;Qq.winningRev=uV;Qq.latest=function(b,e){for(var l=e.rev_tree.slice(),a;a=l.pop();){var f=a.pos,m=a.ids,r=m[0],v=m[1];m=m[2];
var x=0===m.length;a=a.history?a.history.slice():[];a.push({id:r,pos:f,opts:v});if(x)for(v=0,x=a.length;v<x;v++){var y=a[v];if(y.pos+"-"+y.id===b)return f+"-"+r}r=0;for(v=m.length;r<v;r++)l.push({pos:f+1,ids:m[r],history:a})}throw Error("Unable to resolve latest revision for id "+e.id+", rev "+b);};var Bn={};Object.defineProperty(Bn,"__esModule",{value:!0});var uC=Eh,aI=Mo,r8=TF,Fr=Qg,Mq=Qq,gma=o8("_id _rev _attachments _deleted _revisions _revs_info _conflicts _deleted_conflicts _local_seq _rev_tree _replication_id _replication_state _replication_state_time _replication_state_reason _replication_stats _removed".split(" ")),
hma=o8("_attachments _replication_id _replication_state _replication_state_time _replication_state_reason _replication_stats".split(" "));Bn.invalidIdError=uC.invalidIdError;Bn.normalizeDdocFunctionName=uC.normalizeDdocFunctionName;Bn.parseDdocFunctionName=uC.parseDdocFunctionName;Bn.isDeleted=Mq.isDeleted;Bn.isLocalId=Mq.isLocalId;Bn.allDocsKeysQuery=function(b,e){var l={offset:e.skip};return Promise.all(e.keys.map(function(a){var f=uC.assign({key:a,deleted:"ok"},e);["limit","skip","keys"].forEach(function(m){delete f[m]});
return new Promise(function(m,r){b._allDocs(f,function(v,x){if(v)return r(v);e.update_seq&&void 0!==x.update_seq&&(l.update_seq=x.update_seq);l.total_rows=x.total_rows;m(x.rows[0]||{key:a,error:"not_found"})})})})).then(function(a){l.rows=a;return l})};Bn.parseDoc=q8;Bn.preprocessAttachments=function(b,e,l){function a(){f++;b.length===f&&(m?l(m):l())}if(!b.length)return l();var f=0,m;b.forEach(function(r){function v(F){m=F;y++;y===x.length&&a()}var x=r.data&&r.data._attachments?Object.keys(r.data._attachments):
[],y=0;if(!x.length)return a();for(var E in r.data._attachments)r.data._attachments.hasOwnProperty(E)&&kma(r.data._attachments[E],e,v)})};Bn.processDocs=function(b,e,l,a,f,m,r,v,x){b=b||1E3;var y=v.new_edits,E=new EA.Map,F=0,I=e.length;e.forEach(function(J,P){if(J._id&&Mq.isLocalId(J._id))l[J._deleted?"_removeLocal":"_putLocal"](J,{ctx:f},function(Y,W){m[P]=Y||W;++F===I&&x&&x()});else{var N=J.metadata.id;E.has(N)?(I--,E.get(N).push([J,P])):E.set(N,[[J,P]])}});E.forEach(function(J,P){function N(){++W<
J.length?Y():++F===I&&x&&x()}function Y(){var da=J[W],va=da[0];da=da[1];if(a.has(P))s8(b,a.get(P),va,m,da,N,r,y);else{var za=Mq.merge([],va.metadata.rev_tree[0],b);va.metadata.rev_tree=za.tree;va.stemmedRevs=za.stemmedRevs||[];za=Mq.winningRev(va.metadata);var L=Mq.isDeleted(va.metadata,za);"was_delete"in v&&L?(m[da]=Fr.createError(Fr.MISSING_DOC,"deleted"),N()):y&&"missing"===va.metadata.rev_tree[0].ids[1].status?(va=Fr.createError(Fr.REV_CONFLICT),m[da]=va,N()):r(va,za,L,L,!1,L?0:1,da,N)}}var W=
0;Y()})};Bn.updateDoc=s8;var zJ={};Object.defineProperty(zJ,"__esModule",{value:!0});var Lca=JF&&"object"===typeof JF&&"default"in JF?JF["default"]:JF;zJ.safeJsonParse=function(b){try{return JSON.parse(b)}catch(e){return Lca.parse(b)}};zJ.safeJsonStringify=function(b){try{return JSON.stringify(b)}catch(e){return Lca.stringify(b)}};var iwa={},jwa=bI(Iva),kwa=bI(bwa),nQ=bI($X),lwa=bI(ewa),mwa=bI(hwa),dI=Qq,cI=Mo,Gu=EA;vC.prototype.get=function(b,e,l){var a=u8(this,b),f=a.get(e);if(f)return Eh.nextTick(function(){l(null,
f)});if(null===f)return Eh.nextTick(function(){l({name:"NotFoundError"})});b.get(e,function(m,r){if(m)return"NotFoundError"===m.name&&a.set(e,null),l(m);a.set(e,r);l(null,r)})};vC.prototype.batch=function(b){for(var e=0,l=b.length;e<l;e++){var a=b[e],f=u8(this,a.prefix);"put"===a.type?f.set(a.key,a.value):f.set(a.key,null)}this._batch=this._batch.concat(b)};vC.prototype.execute=function(b,e){for(var l=new Gu.Set,a=[],f=this._batch.length-1;0<=f;f--){var m=this._batch[f],r=m.prefix.prefix()[0]+"\u00ff"+
m.key;l.has(r)||(l.add(r),a.push(m))}b.batch(a,e)};var AJ=new Gu.Map,nwa={encode:zJ.safeJsonStringify,decode:zJ.safeJsonParse,buffer:!1,type:"cheap-json"},BJ=new Eh.changesHandler,owa=iwa=function(b,e){function l(){N.docStore=L.sublevel("document-store",{valueEncoding:nwa});N.bySeqStore=L.sublevel("by-sequence",{valueEncoding:"json"});N.attachmentStore=L.sublevel("attach-store",{valueEncoding:"json"});N.binaryStore=L.sublevel("attach-binary-store",{valueEncoding:"binary"});N.localStore=L.sublevel("local-store",
{valueEncoding:"json"});N.metaStore=L.sublevel("meta-store",{valueEncoding:"json"});"object"===typeof b.migrate?b.migrate.doMigrationTwo(L,N,a):a()}function a(){N.metaStore.get("_local_last_update_seq",function(Z,R){"undefined"===typeof L._updateSeq&&(L._updateSeq=R||0);N.metaStore.get("_local_doc_count",function(X,ja){L._docCount=X?0:ja;N.metaStore.get("_local_uuid",function(fa,ua){P=fa?Eh.uuid():ua;N.metaStore.put("_local_uuid",P,function(){Eh.nextTick(function(){e(null,J)})})})})})}function f(Z){return L.isClosed()?
Z(Error("database is closed")):Z(null,L._docCount)}function m(Z,R){try{Z.apply(null,R)}catch(X){R[R.length-1](X)}}function r(){var Z=L._queue.peekFront();"read"===Z.type?v(Z):x(Z)}function v(Z){var R=[Z];Z=1;for(var X=L._queue.get(Z);"undefined"!==typeof X&&"read"===X.type;)R.push(X),Z++,X=L._queue.get(Z);var ja=0;R.forEach(function(fa){var ua=fa.args,gb=ua[ua.length-1];ua[ua.length-1]=nQ(function(hb){gb.apply(null,hb);++ja===R.length&&Eh.nextTick(function(){R.forEach(function(){L._queue.shift()});
L._queue.length&&r()})});m(fa.fun,ua)})}function x(Z){var R=Z.args,X=R[R.length-1];R[R.length-1]=nQ(function(ja){X.apply(null,ja);Eh.nextTick(function(){L._queue.shift();L._queue.length&&r()})});m(Z.fun,R)}function y(Z){return nQ(function(R){L._queue.push({fun:Z,args:R,type:"write"});1===L._queue.length&&Eh.nextTick(r)})}function E(Z){return nQ(function(R){L._queue.push({fun:Z,args:R,type:"read"});1===L._queue.length&&Eh.nextTick(r)})}function F(Z){return("0000000000000000"+Z).slice(-16)}function I(Z,
R){"destroy"in da?da.destroy(Z,R):R(null)}b=Eh.clone(b);var J=this,P,N={},Y=b.revs_limit,W=b.name;"undefined"===typeof b.createIfMissing&&(b.createIfMissing=!0);var da=b.db,va=Eh.functionName(da);if(AJ.has(va))var za=AJ.get(va);else za=new Gu.Map,AJ.set(va,za);if(za.has(W)){var L=za.get(W);l()}else za.set(W,kwa(jwa(da(W),b,function(Z){if(Z)return za.delete(W),e(Z);L=za.get(W);L._docCount=-1;L._queue=new lwa;"object"===typeof b.migrate?b.migrate.doMigrationOne(W,L,l):l()})));J._remote=!1;J.type=function(){return"leveldb"};
J._id=function(Z){Z(null,P)};J._info=function(Z){var R={doc_count:L._docCount,update_seq:L._updateSeq,backend_adapter:Eh.functionName(da)};return Eh.nextTick(function(){Z(null,R)})};J._get=E(function(Z,R,X){R=Eh.clone(R);N.docStore.get(Z,function(ja,fa){if(ja||!fa)return X(Qg.createError(Qg.MISSING_DOC,"missing"));if(R.rev)var ua=R.latest?dI.latest(R.rev,fa):R.rev;else if(ua=vV(fa),"deleted"in fa?fa.deleted:Bn.isDeleted(fa,ua))return X(Qg.createError(Qg.MISSING_DOC,"deleted"));N.bySeqStore.get(F(fa.rev_map[ua]),
function(gb,hb){if(!hb)return X(Qg.createError(Qg.MISSING_DOC));if("_id"in hb&&hb._id!==fa.id)return X(Error("wrong doc returned"));hb._id=fa.id;if("_rev"in hb){if(hb._rev!==ua)return X(Error("wrong doc returned"))}else hb._rev=ua;return X(null,{doc:hb,metadata:fa})})})});J._getAttachment=function(Z,R,X,ja,fa){var ua=X.content_type;N.binaryStore.get(X.digest,function(gb,hb){if(gb)return"NotFoundError"!==gb.name?fa(gb):fa(null,ja.binary?cI.blob([""],{type:ua}):"");ja.binary?fa(null,t8(hb,ua)):fa(null,
hb.toString("base64"))})};J._bulkDocs=y(function(Z,R,X){function ja(Ja,vb){Hc.get(N.attachmentStore,Ja,function(Vb){Vb?(Vb=Qg.createError(Qg.MISSING_STUB,"unknown stub attachment with digest "+Ja),vb(Vb)):vb()})}function fa(Ja){function vb(){if(++Vb===Gd.length)return Ja(vd)}var Vb=0,vd;Gd.forEach(function(ud){if(ud._id&&Bn.isLocalId(ud._id))return vb();Hc.get(N.docStore,ud._id,function(Jc,Re){Jc?"NotFoundError"!==Jc.name&&(vd=Jc):Ob.set(ud._id,Re);vb()})})}function ua(Ja,vb){var Vb=Promise.resolve();
Ja.forEach(function(vd,ud){Vb=Vb.then(function(){return new Promise(function(Jc,Re){J._doCompactionNoLock(ud,vd,{ctx:Hc},function(Le){if(Le)return Re(Le);Jc()})})})});Vb.then(function(){vb()},vb)}function gb(Ja){var vb=new Gu.Map;Ob.forEach(function(Vb,vd){vb.set(vd,dI.compactTree(Vb))});ua(vb,Ja)}function hb(){ua(Zb,function(Ja){Ja&&La(Ja);if(J.auto_compaction)return gb(La);La()})}function ta(Ja,vb,Vb,vd,ud,Jc,Re,Le){function Uh(bj){Qi++;qj||(bj?(qj=bj,Le(qj)):Qi===Ri.length&&hj())}function th(bj,
fk,Qk,gk){return function(Rk){pa(bj,"md5-"+Rk,fk,Qk,gk)}}function pj(bj,fk,Qk){return function(gk){TF.binaryMd5(gk,th(bj,fk,gk,Qk))}}function hj(){var bj=Ja.metadata.rev_map[Ja.metadata.rev];if(bj)return Le();bj=++dd;Ja.metadata.rev_map[Ja.metadata.rev]=Ja.metadata.seq=bj;bj=[{key:F(bj),value:Ja.data,prefix:N.bySeqStore,type:"put"},{key:Ja.metadata.id,value:Ja.metadata,prefix:N.docStore,type:"put"}];Hc.batch(bj);fc[Re]={ok:!0,id:Ja.metadata.id,rev:Ja.metadata.rev};Ob.set(Ja.metadata.id,Ja.metadata);
Le()}Gb+=Jc;var qj=null,Qi=0;Ja.metadata.winningRev=vb;Ja.metadata.deleted=Vb;Ja.data._id=Ja.metadata.id;Ja.data._rev=Ja.metadata.rev;vd&&(Ja.data._deleted=!0);Ja.stemmedRevs.length&&Zb.set(Ja.metadata.id,Ja.stemmedRevs);var Ri=Ja.data._attachments?Object.keys(Ja.data._attachments):[];for(vb=0;vb<Ri.length;vb++)if(Vb=Ri[vb],vd=Ja.data._attachments[Vb],vd.stub)na(Ja.data._id,Ja.data._rev,vd.digest,Uh);else if("string"===typeof vd.data){try{var xk=cI.atob(vd.data)}catch(bj){X(Qg.createError(Qg.BAD_ARG,
"Attachment is not a valid base64 string"));return}pj(Ja,Vb,Uh)(xk)}else lma(vd.data,pj(Ja,Vb,Uh));Ri.length||hj()}function na(Ja,vb,Vb,vd){function ud(){return new Promise(function(Le,Uh){Hc.get(N.attachmentStore,Vb,function(th,pj){if(th&&"NotFoundError"!==th.name)return Uh(th);Le(pj)})})}function Jc(Le){var Uh=[Ja,vb].join("@"),th={};Le?Le.refs&&(th.refs=Le.refs,th.refs[Uh]=!0):(th.refs={},th.refs[Uh]=!0);return new Promise(function(pj){Hc.batch([{type:"put",prefix:N.attachmentStore,key:Vb,value:th}]);
pj(!Le)})}var Re=Ga[Vb]||Promise.resolve();Ga[Vb]=Re.then(function(){return ud().then(Jc).then(function(Le){vd(null,Le)},vd)})}function pa(Ja,vb,Vb,vd,ud){Vb=Ja.data._attachments[Vb];delete Vb.data;Vb.digest=vb;Vb.length=vd.length;var Jc=Ja.metadata.id;Ja=Ja.metadata.rev;Vb.revpos=parseInt(Ja,10);na(Jc,Ja,vb,function(Re,Le){if(Re||0===vd.length||!Le)return ud(Re);Hc.batch([{type:"put",prefix:N.binaryStore,key:vb,value:mwa(vd,"binary")}]);ud()})}function La(Ja){if(Ja)return Eh.nextTick(function(){X(Ja)});
Hc.batch([{prefix:N.metaStore,type:"put",key:"_local_last_update_seq",value:dd},{prefix:N.metaStore,type:"put",key:"_local_doc_count",value:L._docCount+Gb}]);Hc.execute(L,function(vb){if(vb)return X(vb);L._docCount+=Gb;L._updateSeq=dd;BJ.notify(W);Eh.nextTick(function(){X(null,fc)})})}var Hb=R.new_edits,fc=Array(Z.docs.length),Ob=new Gu.Map,Zb=new Gu.Map,Hc=new vC,Gb=0,dd=L._updateSeq,Gd=Z.docs,ma=Gd.map(function(Ja){if(Ja._id&&Bn.isLocalId(Ja._id))return Ja;Ja=Bn.parseDoc(Ja,Hb,J.__opts);Ja.metadata&&
!Ja.metadata.rev_map&&(Ja.metadata.rev_map={});return Ja});Z=ma.filter(function(Ja){return Ja.error});if(Z.length)return X(Z[0]);var Ga={};if(!ma.length)return X(null,[]);(function(Ja){var vb=[];Gd.forEach(function(ud){ud&&ud._attachments&&Object.keys(ud._attachments).forEach(function(Jc){Jc=ud._attachments[Jc];Jc.stub&&vb.push(Jc.digest)})});if(!vb.length)return Ja();var Vb=0,vd;vb.forEach(function(ud){ja(ud,function(Jc){Jc&&!vd&&(vd=Jc);++Vb===vb.length&&Ja(vd)})})})(function(Ja){if(Ja)return X(Ja);
fa(function(vb){if(vb)return X(vb);Bn.processDocs(Y,ma,J,Ob,Hc,fc,ta,R,hb)})})});J._allDocs=function(Z,R){return"keys"in Z?Bn.allDocsKeysQuery(this,Z):E(function(X,ja){X=Eh.clone(X);f(function(fa,ua){if(fa)return ja(fa);fa={};var gb=X.skip||0;X.startkey&&(fa.gte=X.startkey);X.endkey&&(fa.lte=X.endkey);X.key&&(fa.gte=fa.lte=X.key);if(X.descending){fa.reverse=!0;var hb=fa.lte;fa.lte=fa.gte;fa.gte=hb}if("number"===typeof X.limit)var ta=X.limit;if(0===ta||"gte"in fa&&"lte"in fa&&fa.gte>fa.lte)return fa=
{total_rows:ua,offset:X.skip,rows:[]},X.update_seq&&(fa.update_seq=L._updateSeq),ja(null,fa);var na=[],pa=N.docStore.readStream(fa),La=Kca.obj(function(Hb,fc,Ob){function Zb(Gd){var ma={id:Hc.id,key:Hc.id,value:{rev:Gb}};if(X.include_docs){ma.doc=Gd;ma.doc._rev=ma.value.rev;X.conflicts&&(Gd=dI.collectConflicts(Hc),Gd.length&&(ma.doc._conflicts=Gd));for(var Ga in ma.doc._attachments)ma.doc._attachments.hasOwnProperty(Ga)&&(ma.doc._attachments[Ga].stub=!0)}if(!1===X.inclusive_end&&Hc.id===X.endkey)return Ob();
if(dd)if("ok"===X.deleted)ma.value.deleted=!0,ma.doc=null;else return Ob();na.push(ma);Ob()}var Hc=Hb.value,Gb=vV(Hc),dd="deleted"in Hc?Hc.deleted:Bn.isDeleted(Hc,Gb);if(!dd){if(0<gb--){Ob();return}if("number"===typeof ta&&0>=ta--){pa.unpipe();pa.destroy();Ob();return}}else if("ok"!==X.deleted){Ob();return}X.include_docs?N.bySeqStore.get(F(Hc.rev_map[Gb]),function(Gd,ma){Zb(ma)}):Zb()},function(Hb){Promise.resolve().then(function(){if(X.include_docs&&X.attachments)return wV(na,N,X)}).then(function(){var fc=
{total_rows:ua,offset:X.skip,rows:na};X.update_seq&&(fc.update_seq=L._updateSeq);ja(null,fc)},ja);Hb()}).on("unpipe",function(){La.end()});pa.on("error",ja);pa.pipe(La)})})(Z,R)};J._changes=function(Z){function R(){Z.done=!0;Z.return_docs&&Z.limit&&Z.limit<fa.length&&(fa.length=Z.limit);Hb.unpipe(fc);Hb.destroy();Z.continuous||Z.cancelled||(Z.include_docs&&Z.attachments&&Z.return_docs?wV(fa,N,Z).then(function(){Z.complete(null,{results:fa,last_seq:ua})}):Z.complete(null,{results:fa,last_seq:ua}))}
Z=Eh.clone(Z);if(Z.continuous){var X=W+":"+Eh.uuid();BJ.addListener(W,X,J,Z);BJ.notify(W);return{cancel:function(){BJ.removeListener(W,X)}}}var ja=Z.descending,fa=[],ua=Z.since||0,gb=0,hb={reverse:ja};if("limit"in Z&&0<Z.limit)var ta=Z.limit;hb.reverse||(hb.start=F(Z.since||0));var na=Z.doc_ids&&new Gu.Set(Z.doc_ids),pa=Eh.filterChange(Z),La=new Gu.Map,Hb=N.bySeqStore.readStream(hb),fc=Kca.obj(function(Ob,Zb,Hc){function Gb(ma){function Ga(vb){var Vb=Z.processChange(vb,ma,Z);Vb.seq=ma.seq;vb=pa(Vb);
if("object"===typeof vb)return Z.complete(vb);if(vb){gb++;if(Z.attachments&&Z.include_docs)wV([Vb],N,Z).then(function(){Z.onChange(Vb)});else Z.onChange(Vb);Z.return_docs&&fa.push(Vb)}Hc()}var Ja=vV(ma);if(ma.seq!==dd)return Hc();ua=dd;if(Ja===Gd._rev)return Ga(Gd);N.bySeqStore.get(F(ma.rev_map[Ja]),function(vb,Vb){Ga(Vb)})}if(ta&&gb>=ta)return R(),Hc();if(Z.cancelled||Z.done)return Hc();var dd=parseInt(Ob.key,10),Gd=Ob.value;if(dd===Z.since&&!ja||na&&!na.has(Gd._id))return Hc();if(Ob=La.get(Gd._id))return Gb(Ob);
N.docStore.get(Gd._id,function(ma,Ga){if(Z.cancelled||Z.done||L.isClosed()||Bn.isLocalId(Ga.id))return Hc();La.set(Gd._id,Ga);Gb(Ga)})},function(Ob){if(Z.cancelled)return Ob();Z.return_docs&&Z.limit&&Z.limit<fa.length&&(fa.length=Z.limit);Ob()}).on("unpipe",function(){fc.end();R()});Hb.pipe(fc);return{cancel:function(){Z.cancelled=!0;R()}}};J._close=function(Z){if(L.isClosed())return Z(Qg.createError(Qg.NOT_OPEN));L.close(function(R){R?Z(R):(za.delete(W),Z())})};J._getRevisionTree=function(Z,R){N.docStore.get(Z,
function(X,ja){X?R(Qg.createError(Qg.MISSING_DOC)):R(null,ja.rev_tree)})};J._doCompaction=y(function(Z,R,X,ja){J._doCompactionNoLock(Z,R,X,ja)});J._doCompactionNoLock=function(Z,R,X,ja){"function"===typeof X&&(ja=X,X={});if(!R.length)return ja();var fa=X.ctx||new vC;fa.get(N.docStore,Z,function(ua,gb){function hb(Ob){Ob&&(fc=Ob);if(++Hb===R.length){if(fc)return ja(fc);na()}}function ta(Ob){if(Ob)return ja(Ob);fa.batch(pa);if(X.ctx)return ja();fa.execute(L,ja)}function na(){function Ob(Gd){Gd&&(Gb=
Gd);++Hc===Zb.length&&ta(Gb)}var Zb=Object.keys(La);if(!Zb.length)return ta();var Hc=0,Gb,dd=new Gu.Map;R.forEach(function(Gd){dd.set(Z+"@"+Gd,!0)});Zb.forEach(function(Gd){fa.get(N.attachmentStore,Gd,function(ma,Ga){if(ma)return"NotFoundError"===ma.name?Ob():Ob(ma);ma=Object.keys(Ga.refs||{}).filter(function(vb){return!dd.has(vb)});var Ja={};ma.forEach(function(vb){Ja[vb]=!0});ma.length?pa.push({key:Gd,type:"put",value:{refs:Ja},prefix:N.attachmentStore}):pa=pa.concat([{key:Gd,type:"del",prefix:N.attachmentStore},
{key:Gd,type:"del",prefix:N.binaryStore}]);Ob()})})}if(ua)return ja(ua);ua=R.map(function(Ob){var Zb=gb.rev_map[Ob];delete gb.rev_map[Ob];return Zb});dI.traverseRevTree(gb.rev_tree,function(Ob,Zb,Hc,Gb,dd){-1!==R.indexOf(Zb+"-"+Hc)&&(dd.status="missing")});var pa=[];pa.push({key:gb.id,value:gb,type:"put",prefix:N.docStore});var La={},Hb=0,fc;ua.forEach(function(Ob){pa.push({key:F(Ob),type:"del",prefix:N.bySeqStore});fa.get(N.bySeqStore,F(Ob),function(Zb,Hc){if(Zb)return"NotFoundError"===Zb.name?hb():
hb(Zb);Object.keys(Hc._attachments||{}).forEach(function(Gb){La[Hc._attachments[Gb].digest]=!0});hb()})})})};J._getLocal=function(Z,R){N.localStore.get(Z,function(X,ja){X?R(Qg.createError(Qg.MISSING_DOC)):R(null,ja)})};J._putLocal=function(Z,R,X){"function"===typeof R&&(X=R,R={});R.ctx?J._putLocalNoLock(Z,R,X):J._putLocalWithLock(Z,R,X)};J._putLocalWithLock=y(function(Z,R,X){J._putLocalNoLock(Z,R,X)});J._putLocalNoLock=function(Z,R,X){delete Z._revisions;var ja=Z._rev,fa=Z._id,ua=R.ctx||new vC;ua.get(N.localStore,
fa,function(gb,hb){if(gb&&ja||hb&&hb._rev!==ja)return X(Qg.createError(Qg.REV_CONFLICT));Z._rev=ja?"0-"+(parseInt(ja.split("-")[1],10)+1):"0-1";ua.batch([{type:"put",prefix:N.localStore,key:fa,value:Z}]);var ta={ok:!0,id:Z._id,rev:Z._rev};if(R.ctx)return X(null,ta);ua.execute(L,function(na){if(na)return X(na);X(null,ta)})})};J._removeLocal=function(Z,R,X){"function"===typeof R&&(X=R,R={});R.ctx?J._removeLocalNoLock(Z,R,X):J._removeLocalWithLock(Z,R,X)};J._removeLocalWithLock=y(function(Z,R,X){J._removeLocalNoLock(Z,
R,X)});J._removeLocalNoLock=function(Z,R,X){var ja=R.ctx||new vC;ja.get(N.localStore,Z._id,function(fa,ua){if(fa)return"NotFoundError"!==fa.name?X(fa):X(Qg.createError(Qg.MISSING_DOC));if(ua._rev!==Z._rev)return X(Qg.createError(Qg.REV_CONFLICT));ja.batch([{prefix:N.localStore,type:"del",key:Z._id}]);var gb={ok:!0,id:Z._id,rev:"0-0"};if(R.ctx)return X(null,gb);ja.execute(L,function(hb){if(hb)return X(hb);X(null,gb)})})};J._destroy=function(Z,R){Z=Eh.functionName(da);if(AJ.has(Z))var X=AJ.get(Z);else return I(W,
R);X.has(W)?(BJ.removeAllListeners(W),X.get(W).close(function(){X.delete(W);I(W,R)})):I(W,R)}},wC="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,pwa={},Mca=mj;xV.prototype.next=function(b){var e=this||wC;if("function"!=typeof b)throw Error("next() requires a callback argument");if(e._ended)return b(Error("cannot call next() after end()"));if(e._nexting)return b(Error("cannot call next() before previous next() has completed"));e._nexting=!0;if("function"==typeof e._next)return e._next(function(){e._nexting=
!1;b.apply(null,arguments)});Mca.nextTick(function(){e._nexting=!1;b()})};xV.prototype.end=function(b){if("function"!=typeof b)throw Error("end() requires a callback argument");if((this||wC)._ended)return b(Error("end() already called on iterator"));(this||wC)._ended=!0;if("function"==typeof(this||wC)._end)return this._end(b);Mca.nextTick(b)};var Nca=pwa=xV,Hl="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,qwa={},rwa=mj;iA.prototype._serializeKey=function(b){return(this||
Hl)._db._serializeKey(b)};iA.prototype._serializeValue=function(b){return(this||Hl)._db._serializeValue(b)};iA.prototype._checkWritten=function(){if((this||Hl)._written)throw Error("write() already called on this batch");};iA.prototype.put=function(b,e){this._checkWritten();var l=(this||Hl)._db._checkKey(b,"key",(this||Hl)._db._isBuffer);if(l)throw l;b=this._serializeKey(b);e=this._serializeValue(e);"function"==typeof(this||Hl)._put?this._put(b,e):(this||Hl)._operations.push({type:"put",key:b,value:e});
return this||Hl};iA.prototype.del=function(b){this._checkWritten();var e=(this||Hl)._db._checkKey(b,"key",(this||Hl)._db._isBuffer);if(e)throw e;b=this._serializeKey(b);"function"==typeof(this||Hl)._del?this._del(b):(this||Hl)._operations.push({type:"del",key:b});return this||Hl};iA.prototype.clear=function(){this._checkWritten();(this||Hl)._operations=[];"function"==typeof(this||Hl)._clear&&this._clear();return this||Hl};iA.prototype.write=function(b,e){this._checkWritten();"function"==typeof b&&
(e=b);if("function"!=typeof e)throw Error("write() requires a callback argument");"object"!=typeof b&&(b={});(this||Hl)._written=!0;if("function"==typeof(this||Hl)._write)return this._write(e);if("function"==typeof(this||Hl)._db._batch)return(this||Hl)._db._batch((this||Hl)._operations,b,e);rwa.nextTick(e)};var swa=qwa=iA,qm="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,Oca={},twa=oi.Buffer,NA=mj;Mp.prototype.open=function(b,e){var l=this||qm,a=(this||qm).status;
"function"==typeof b&&(e=b);if("function"!=typeof e)throw Error("open() requires a callback argument");"object"!=typeof b&&(b={});b.createIfMissing=0!=b.createIfMissing;b.errorIfExists=!!b.errorIfExists;"function"==typeof(this||qm)._open?((this||qm).status="opening",this._open(b,function(f){if(f)return l.status=a,e(f);l.status="open";e()})):((this||qm).status="open",NA.nextTick(e))};Mp.prototype.close=function(b){var e=this||qm,l=(this||qm).status;if("function"!=typeof b)throw Error("close() requires a callback argument");
"function"==typeof(this||qm)._close?((this||qm).status="closing",this._close(function(a){if(a)return e.status=l,b(a);e.status="closed";b()})):((this||qm).status="closed",NA.nextTick(b))};Mp.prototype.get=function(b,e,l){var a;"function"==typeof e&&(l=e);if("function"!=typeof l)throw Error("get() requires a callback argument");if(a=this._checkKey(b,"key"))return l(a);b=this._serializeKey(b);"object"!=typeof e&&(e={});e.asBuffer=0!=e.asBuffer;if("function"==typeof(this||qm)._get)return this._get(b,
e,l);NA.nextTick(function(){l(Error("NotFound"))})};Mp.prototype.put=function(b,e,l,a){var f;"function"==typeof l&&(a=l);if("function"!=typeof a)throw Error("put() requires a callback argument");if(f=this._checkKey(b,"key"))return a(f);b=this._serializeKey(b);e=this._serializeValue(e);"object"!=typeof l&&(l={});if("function"==typeof(this||qm)._put)return this._put(b,e,l,a);NA.nextTick(a)};Mp.prototype.del=function(b,e,l){var a;"function"==typeof e&&(l=e);if("function"!=typeof l)throw Error("del() requires a callback argument");
if(a=this._checkKey(b,"key"))return l(a);b=this._serializeKey(b);"object"!=typeof e&&(e={});if("function"==typeof(this||qm)._del)return this._del(b,e,l);NA.nextTick(l)};Mp.prototype.batch=function(b,e,l){if(!arguments.length)return this._chainedBatch();"function"==typeof e&&(l=e);"function"==typeof b&&(l=b);if("function"!=typeof l)throw Error("batch(array) requires a callback argument");if(!Array.isArray(b))return l(Error("batch(array) requires an array argument"));e&&"object"==typeof e||(e={});for(var a=
0,f=b.length,m,r;a<f;a++)if(m=b[a],"object"==typeof m&&((r=this._checkKey(m.type,"type"))||(r=this._checkKey(m.key,"key"))))return l(r);if("function"==typeof(this||qm)._batch)return this._batch(b,e,l);NA.nextTick(l)};Mp.prototype.approximateSize=function(b,e,l){if(null==b||null==e||"function"==typeof b||"function"==typeof e)throw Error("approximateSize() requires valid `start`, `end` and `callback` arguments");if("function"!=typeof l)throw Error("approximateSize() requires a callback argument");b=
this._serializeKey(b);e=this._serializeKey(e);if("function"==typeof(this||qm)._approximateSize)return this._approximateSize(b,e,l);NA.nextTick(function(){l(null,0)})};Mp.prototype._setupIteratorOptions=function(b){var e=this||qm;b=LA(b);"start end gt gte lt lte".split(" ").forEach(function(l){b[l]&&e._isBuffer(b[l])&&0===b[l].length&&delete b[l]});b.reverse=!!b.reverse;b.keys=0!=b.keys;b.values=0!=b.values;b.limit="limit"in b?b.limit:-1;b.keyAsBuffer=0!=b.keyAsBuffer;b.valueAsBuffer=0!=b.valueAsBuffer;
return b};Mp.prototype.iterator=function(b){"object"!=typeof b&&(b={});b=this._setupIteratorOptions(b);return"function"==typeof(this||qm)._iterator?this._iterator(b):new Nca(this||qm)};Mp.prototype._chainedBatch=function(){return new swa(this||qm)};Mp.prototype._isBuffer=function(b){return twa.isBuffer(b)};Mp.prototype._serializeKey=function(b){return this._isBuffer(b)?b:String(b)};Mp.prototype._serializeValue=function(b){return null==b?"":this._isBuffer(b)||NA.browser?b:String(b)};Mp.prototype._checkKey=
function(b,e){if(null===b||void 0===b)return Error(e+" cannot be `null` or `undefined`");if(this._isBuffer(b)&&0===b.length)return Error(e+" cannot be an empty Buffer");if(""===String(b))return Error(e+" cannot be an empty String")};Oca=Mp;var uwa=Oca;var Pca={};Pca=function(b){return new eF(b||nma,null)};var Up=eF.prototype;Object.defineProperty(Up,"keys",{get:function(){var b=[];this.forEach(function(e,l){b.push(e)});return b}});Object.defineProperty(Up,"values",{get:function(){var b=[];this.forEach(function(e,
l){b.push(l)});return b}});Object.defineProperty(Up,"length",{get:function(){return this.root?this.root._count:0}});Up.insert=function(b,e){for(var l=this._compare,a=this.root,f=[],m=[];a;){var r=l(b,a.key);f.push(a);m.push(r);a=0>=r?a.left:a.right}f.push(new Gr(0,b,e,null,null,1));for(b=f.length-2;0<=b;--b)a=f[b],f[b]=0>=m[b]?new Gr(a._color,a.key,a.value,f[b+1],a.right,a._count+1):new Gr(a._color,a.key,a.value,a.left,f[b+1],a._count+1);for(b=f.length-1;1<b;--b){m=f[b-1];a=f[b];if(1===m._color||
1===a._color)break;e=f[b-2];if(e.left===m)if(m.left===a)if((r=e.right)&&0===r._color)m._color=1,e.right=jA(1,r),e._color=0,--b;else{e._color=0;e.left=m.right;m._color=1;m.right=e;f[b-2]=m;f[b-1]=a;Il(e);Il(m);3<=b&&(b=f[b-3],b.left===e?b.left=m:b.right=m);break}else if((r=e.right)&&0===r._color)m._color=1,e.right=jA(1,r),e._color=0,--b;else{m.right=a.left;e._color=0;e.left=a.right;a._color=1;a.left=m;a.right=e;f[b-2]=a;f[b-1]=m;Il(e);Il(m);Il(a);3<=b&&(b=f[b-3],b.left===e?b.left=a:b.right=a);break}else if(m.right===
a)if((r=e.left)&&0===r._color)m._color=1,e.left=jA(1,r),e._color=0,--b;else{e._color=0;e.right=m.left;m._color=1;m.left=e;f[b-2]=m;f[b-1]=a;Il(e);Il(m);3<=b&&(b=f[b-3],b.right===e?b.right=m:b.left=m);break}else if((r=e.left)&&0===r._color)m._color=1,e.left=jA(1,r),e._color=0,--b;else{m.left=a.right;e._color=0;e.right=a.left;a._color=1;a.right=m;a.left=e;f[b-2]=a;f[b-1]=m;Il(e);Il(m);Il(a);3<=b&&(b=f[b-3],b.right===e?b.right=a:b.left=a);break}}f[0]._color=1;return new eF(l,f[0])};Up.forEach=function(b,
e,l){if(this.root)switch(arguments.length){case 1:return yV(b,this.root);case 2:return zV(e,this._compare,b,this.root);case 3:if(!(0<=this._compare(e,l)))return AV(e,l,this._compare,b,this.root)}};Object.defineProperty(Up,"begin",{get:function(){for(var b=[],e=this.root;e;)b.push(e),e=e.left;return new Hr(this,b)}});Object.defineProperty(Up,"end",{get:function(){for(var b=[],e=this.root;e;)b.push(e),e=e.right;return new Hr(this,b)}});Up.at=function(b){if(0>b)return new Hr(this,[]);for(var e=this.root,
l=[];;){l.push(e);if(e.left){if(b<e.left._count){e=e.left;continue}b-=e.left._count}if(!b)return new Hr(this,l);--b;if(e.right){if(b>=e.right._count)break;e=e.right}else break}return new Hr(this,[])};Up.ge=function(b){for(var e=this._compare,l=this.root,a=[],f=0;l;){var m=e(b,l.key);a.push(l);0>=m&&(f=a.length);l=0>=m?l.left:l.right}a.length=f;return new Hr(this,a)};Up.gt=function(b){for(var e=this._compare,l=this.root,a=[],f=0;l;){var m=e(b,l.key);a.push(l);0>m&&(f=a.length);l=0>m?l.left:l.right}a.length=
f;return new Hr(this,a)};Up.lt=function(b){for(var e=this._compare,l=this.root,a=[],f=0;l;){var m=e(b,l.key);a.push(l);0<m&&(f=a.length);l=0>=m?l.left:l.right}a.length=f;return new Hr(this,a)};Up.le=function(b){for(var e=this._compare,l=this.root,a=[],f=0;l;){var m=e(b,l.key);a.push(l);0<=m&&(f=a.length);l=0>m?l.left:l.right}a.length=f;return new Hr(this,a)};Up.find=function(b){for(var e=this._compare,l=this.root,a=[];l;){var f=e(b,l.key);a.push(l);if(0===f)return new Hr(this,a);l=0>=f?l.left:l.right}return new Hr(this,
[])};Up.remove=function(b){return(b=this.find(b))?b.remove():this};Up.get=function(b){for(var e=this._compare,l=this.root;l;){var a=e(b,l.key);if(0===a)return l.value;l=0>=a?l.left:l.right}};var qt=Hr.prototype;Object.defineProperty(qt,"valid",{get:function(){return 0<this._stack.length}});Object.defineProperty(qt,"node",{get:function(){return 0<this._stack.length?this._stack[this._stack.length-1]:null},enumerable:!0});qt.clone=function(){return new Hr(this.tree,this._stack.slice())};qt.remove=function(){var b=
this._stack;if(0===b.length)return this.tree;var e=Array(b.length),l=b[b.length-1];e[e.length-1]=new Gr(l._color,l.key,l.value,l.left,l.right,l._count);for(var a=b.length-2;0<=a;--a)l=b[a],e[a]=l.left===b[a+1]?new Gr(l._color,l.key,l.value,e[a+1],l.right,l._count):new Gr(l._color,l.key,l.value,l.left,e[a+1],l._count);l=e[e.length-1];if(l.left&&l.right){b=e.length;for(l=l.left;l.right;)e.push(l),l=l.right;a=e[b-1];e.push(new Gr(l._color,a.key,a.value,l.left,l.right,l._count));e[b-1].key=l.key;e[b-
1].value=l.value;for(a=e.length-2;a>=b;--a)l=e[a],e[a]=new Gr(l._color,l.key,l.value,l.left,e[a+1],l._count);e[b-1].left=e[b]}l=e[e.length-1];if(0===l._color)for(a=e[e.length-2],a.left===l?a.left=null:a.right===l&&(a.right=null),e.pop(),a=0;a<e.length;++a)e[a]._count--;else if(l.left||l.right)for(l.left?v8(l,l.left):l.right&&v8(l,l.right),l._color=1,a=0;a<e.length-1;++a)e[a]._count--;else{if(1===e.length)return new eF(this.tree._compare,null);for(a=0;a<e.length;++a)e[a]._count--;a=e[e.length-2];for(var f,
m,r,v=e.length-1;0<=v;--v){b=e[v];if(0===v){b._color=1;break}f=e[v-1];if(f.left===b){m=f.right;if(m.right&&0===m.right._color){m=f.right=uw(m);r=m.right=uw(m.right);f.right=m.left;m.left=f;m.right=r;m._color=f._color;b._color=1;f._color=1;r._color=1;Il(f);Il(m);if(1<v){var x=e[v-2];x.left===f?x.left=m:x.right=m}e[v-1]=m;break}else if(m.left&&0===m.left._color){m=f.right=uw(m);r=m.left=uw(m.left);f.right=r.left;m.left=r.right;r.left=f;r.right=m;r._color=f._color;f._color=1;m._color=1;b._color=1;Il(f);
Il(m);Il(r);1<v&&(x=e[v-2],x.left===f?x.left=r:x.right=r);e[v-1]=r;break}if(1===m._color)if(0===f._color){f._color=1;f.right=jA(0,m);break}else f.right=jA(0,m);else m=uw(m),f.right=m.left,m.left=f,m._color=f._color,f._color=0,Il(f),Il(m),1<v&&(x=e[v-2],x.left===f?x.left=m:x.right=m),e[v-1]=m,e[v]=f,v+1<e.length?e[v+1]=b:e.push(b),v+=2}else{m=f.left;if(m.left&&0===m.left._color){m=f.left=uw(m);r=m.left=uw(m.left);f.left=m.right;m.right=f;m.left=r;m._color=f._color;b._color=1;f._color=1;r._color=1;
Il(f);Il(m);1<v&&(x=e[v-2],x.right===f?x.right=m:x.left=m);e[v-1]=m;break}else if(m.right&&0===m.right._color){m=f.left=uw(m);r=m.right=uw(m.right);f.left=r.right;m.right=r.left;r.right=f;r.left=m;r._color=f._color;f._color=1;m._color=1;b._color=1;Il(f);Il(m);Il(r);1<v&&(x=e[v-2],x.right===f?x.right=r:x.left=r);e[v-1]=r;break}if(1===m._color)if(0===f._color){f._color=1;f.left=jA(0,m);break}else f.left=jA(0,m);else m=uw(m),f.left=m.right,m.right=f,m._color=f._color,f._color=0,Il(f),Il(m),1<v&&(x=e[v-
2],x.right===f?x.right=m:x.left=m),e[v-1]=m,e[v]=f,v+1<e.length?e[v+1]=b:e.push(b),v+=2}}a.left===l?a.left=null:a.right=null}return new eF(this.tree._compare,e[0])};Object.defineProperty(qt,"key",{get:function(){if(0<this._stack.length)return this._stack[this._stack.length-1].key},enumerable:!0});Object.defineProperty(qt,"value",{get:function(){if(0<this._stack.length)return this._stack[this._stack.length-1].value},enumerable:!0});Object.defineProperty(qt,"index",{get:function(){var b=0,e=this._stack;
if(0===e.length)return(b=this.tree.root)?b._count:0;e[e.length-1].left&&(b=e[e.length-1].left._count);for(var l=e.length-2;0<=l;--l)e[l+1]===e[l].right&&(++b,e[l].left&&(b+=e[l].left._count));return b},enumerable:!0});qt.next=function(){var b=this._stack;if(0!==b.length){var e=b[b.length-1];if(e.right)for(e=e.right;e;)b.push(e),e=e.left;else for(b.pop();0<b.length&&b[b.length-1].right===e;)e=b[b.length-1],b.pop()}};Object.defineProperty(qt,"hasNext",{get:function(){var b=this._stack;if(0===b.length)return!1;
if(b[b.length-1].right)return!0;for(var e=b.length-1;0<e;--e)if(b[e-1].left===b[e])return!0;return!1}});qt.update=function(b){var e=this._stack;if(0===e.length)throw Error("Can't update empty node!");var l=Array(e.length),a=e[e.length-1];l[l.length-1]=new Gr(a._color,a.key,b,a.left,a.right,a._count);for(b=e.length-2;0<=b;--b)a=e[b],l[b]=a.left===e[b+1]?new Gr(a._color,a.key,a.value,l[b+1],a.right,a._count):new Gr(a._color,a.key,a.value,a.left,l[b+1],a._count);return new eF(this.tree._compare,l[0])};
qt.prev=function(){var b=this._stack;if(0!==b.length){var e=b[b.length-1];if(e.left)for(e=e.left;e;)b.push(e),e=e.right;else for(b.pop();0<b.length&&b[b.length-1].left===e;)e=b[b.length-1],b.pop()}};Object.defineProperty(qt,"hasPrev",{get:function(){var b=this._stack;if(0===b.length)return!1;if(b[b.length-1].left)return!0;for(var e=b.length-1;0<e;--e)if(b[e-1].right===b[e])return!0;return!1}});var vwa=Pca,oQ={},pQ=oi,py=pQ.Buffer;py.from&&py.alloc&&py.allocUnsafe&&py.allocUnsafeSlow?oQ=pQ:(w8(pQ,
oQ),oQ.Buffer=fF);w8(py,fF);fF.from=function(b,e,l){if("number"===typeof b)throw new TypeError("Argument must not be a number");return py(b,e,l)};fF.alloc=function(b,e,l){if("number"!==typeof b)throw new TypeError("Argument must be a number");b=py(b);void 0!==e?"string"===typeof l?b.fill(e,l):b.fill(e):b.fill(0);return b};fF.allocUnsafe=function(b){if("number"!==typeof b)throw new TypeError("Argument must be a number");return py(b)};fF.allocUnsafeSlow=function(b){if("number"!==typeof b)throw new TypeError("Argument must be a number");
return pQ.SlowBuffer(b)};var Lf="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,wwa={},Qca=wl,y8=uwa,x8=Nca,Ir=hm,sma=vwa,qQ=oQ.Buffer,gF={};Qca(qN,x8);qN.prototype._next=function(b){if((this||Lf)._done++>=(this||Lf)._limit||!(this||Lf)._tree.valid)return Rj(b);var e=(this||Lf)._tree.key;var l=(this||Lf)._tree.value;if(!this._test(e))return Rj(b);(this||Lf).keyAsBuffer&&(e=qQ.from(e));(this||Lf).valueAsBuffer&&(l=qQ.from(l));(this||Lf)._tree[(this||Lf)._incr]();Rj(function(){b(null,
e,l)})};qN.prototype._test=function(){return!0};Nq.clearGlobalStore=function(b){b?Object.keys(gF).forEach(function(e){delete gF[e]}):gF={}};Qca(Nq,y8);Nq.prototype._open=function(b,e){var l=this||Lf;Rj(function(){e(null,l)})};Nq.prototype._put=function(b,e,l,a){if("undefined"===typeof e||null===e)e="";l=(this||Lf)._store[(this||Lf)._location].find(b);(this||Lf)._store[(this||Lf)._location]=l.valid?l.update(e):(this||Lf)._store[(this||Lf)._location].insert(b,e);Rj(a)};Nq.prototype._get=function(b,
e,l){var a=(this||Lf)._store[(this||Lf)._location].get(b);if("undefined"===typeof a)return Rj(function(){l(Error("NotFound"))});!1===e.asBuffer||this._isBuffer(a)||(a=qQ.from(String(a)));Rj(function(){l(null,a)})};Nq.prototype._del=function(b,e,l){(this||Lf)._store[(this||Lf)._location]=(this||Lf)._store[(this||Lf)._location].remove(b);Rj(l)};Nq.prototype._batch=function(b,e,l){e=-1;for(var a,f,m,r=b.length,v=(this||Lf)._store[(this||Lf)._location];++e<r;)b[e]&&(a=this._isBuffer(b[e].key)?b[e].key:
String(b[e].key),m=v.find(a),"put"===b[e].type?(f=this._isBuffer(b[e].value)?b[e].value:String(b[e].value),v=m.valid?m.update(f):v.insert(a,f)):v=m.remove());(this||Lf)._store[(this||Lf)._location]=v;Rj(l)};Nq.prototype._iterator=function(b){return new qN(this||Lf,b)};Nq.prototype._isBuffer=function(b){return qQ.isBuffer(b)};Nq.destroy=function(b,e){b="$"+b;b in gF&&delete gF[b];Rj(e)};var xwa=wwa=Nq.default=Nq,ywa={},tma=Eh,vma=z8(owa),uma=z8(xwa);BV.valid=function(){return!0};BV.use_prefix=!1;var zwa=
ywa=function(b){b.adapter("memory",BV,!0)},ki=lively.FreezerRuntime.recorderFor("lively.storage/database.js");ki.nodejsRequire=function(b){if(!ki.isNode)throw Error("nodejsRequire can only be used in nodejs!");return"undefined"!==typeof System?System._nodeRequire(b):require("module")._load(b)};ki.nodejs_leveldbPath=function(b){if(b.startsWith("/"))return b;if(b.match(/[^\/]+:\/\//))return b.startsWith("file:")&&(b=b.replace(/^file:\/\//,"")),b;if(!ki.isNode)throw Error("nodejs_leveldbPath called under non-nodejs environment");
var e="undefined"!==typeof System&&System.baseURL.startsWith("file://")?System.baseURL.replace("file://",""):ki.GLOBAL.process.cwd(),l=ki.nodejsRequire("path").join,a=ki.nodejsRequire("fs"),f=a.mkdirSync,m=a.existsSync;a=a.readFileSync;if(b.includes("/"))return l(e,b);try{var r=a(l(e,"../package.json")),v=JSON.parse(r);if("lively.web"===v.name||"lively.next"===v.name){var x=l(e,"../.livelydbs");m(x)||f(x);return l(x,b)}}catch(y){}e=l(e,".livelydbs");m(e)||f(e);return l(e,b)};ki.nodejs_attemptToLoadProperPouchDB=
function(){if(!ki.isNode)throw Error("nodejs_attemptToLoadProperPouchDB called under non-nodejs environment");if("undefined"!==typeof System){var b=System._nodeRequire("path").join,e=System.normalizeSync("lively.storage/index.js");e=System.normalizeSync("pouchdb",e).replace(/file:\/\//,"");b=b(e,"../../lib/index.js");try{return ki.PouchDB=System._nodeRequire(b),ki.PouchDB.plugin(ki.pouchdbAdapterMem),!0}catch(l){return!1}}try{return ki.PouchDB=require("pouchdb"),ki.PouchDB.plugin(ki.pouchdbAdapterMem),
!0}catch(l){return!1}};ki._PouchDB=Fra;ki.pouchdbAdapterMem=zwa;ki.Path=Ih;ki.GLOBAL="undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:void 0;ki.isNode="undefined"!==typeof global&&"undefined"!==typeof process;ki.PouchDB=ki._PouchDB;ki.PouchDB.plugin&&ki.pouchdbAdapterMem&&ki.PouchDB.plugin(ki.pouchdbAdapterMem);ki.createPouchDB=ki.isNode?function(){var b=!1,e=!1;return function(l,a){a=void 0===a?{}:a;b||(b=!0,e=ki.nodejs_attemptToLoadProperPouchDB());
a.adapter||(a.adapter=l.startsWith("http")?"http":e?"leveldb":"memory");"leveldb"==a.adapter&&(l=ki.nodejs_leveldbPath(l));a=Object.assign({},a,{name:l});return new ki.PouchDB(a)}}():function(b,e){return new ki.PouchDB(Object.assign({name:b},e))};var zh=function(b,e){e=void 0===e?{}:e;this.name=b;this.options=e;this._pouchdb=null};zh.findDB=function(b){return this.databases.get(b)};zh.ensureDB=function(b,e){var l=this.findDB(b);if(l)return l;l=new this(b,e);this.databases.set(b,l);b.endsWith("lively.storage-meta")||
this.createMetaEntryForDB(b,e);return l};zh.knownDBs=function(b,e){return ki.Database.ensureDB("lively.storage-meta").getAll().then(function(l){return l.map(function(a){return a._id})})};zh.createMetaEntryForDB=function(b,e){var l=ki.Database.ensureDB("lively.storage-meta");l.has(b).then(function(a){return!a&&l.set(b,{created:Date.now(),options:e})})};zh.knowsDB=function(b){var e=this,l,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){return 1==f.nextAddress?(l=e.ensureDB(b),f.yield(l.docCount(),
2)):3!=f.nextAddress?(a=f.yieldResult,0<a?f.return(!0):f.yield(l.destroy(),3)):f.return(!1)})};zh.prototype.close=function(){this._pouchdb&&(this._pouchdb.close(),delete this._pouchdb)};zh.prototype.isDestroyed=function(){return!!this.pouchdb._destroyed};zh.prototype.destroy=function(b){this.constructor.databases.delete(this.name);return this.isDestroyed()?{ok:!0}:this.pouchdb.destroy(b)};zh.prototype.update=function(b,e,l,a){a=void 0===a?0:a;var f=this,m,r,v,x,y,E,F,I,J,P,N,Y,W;return $jscomp.asyncExecutePromiseGeneratorProgram(function(da){switch(da.nextAddress){case 1:return m=
l=l||{},r=void 0===m.ensure?!0:m.ensure,v=void 0===m.retryOnConflict?!0:m.retryOnConflict,x=void 0===m.maxUpdateAttempts?10:m.maxUpdateAttempts,y={latest:!0},E=f,F=E.pouchdb,da.setCatchFinallyBlocks(2),da.yield(F.get(b,y),4);case 4:I=da.yieldResult;da.leaveTryBlock(3);break;case 2:if(P=da.enterCatchBlock(),"not_found"!==P.name||!r)throw P;case 3:return da.yield(e(I),5);case 5:J=da.yieldResult;if(!J||"object"!==typeof J)return da.return(null);J._id!==b&&(J._id=b);I&&J._rev!==I._rev&&(J._rev=I._rev);
da.setCatchFinallyBlocks(6);return da.yield(F.put(J),8);case 8:return N=da.yieldResult,Y=N.rev,da.return(Object.assign(J,{_rev:Y}));case 6:W=da.enterCatchBlock();if("conflict"===W.name&&v&&a<x)return da.return(f.update(b,e,l,a+1));throw W;}})};zh.prototype.mixin=function(b,e,l){var a=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){return f.return(a.update(b,function(m){return Object.assign(m||{_id:b},e)},l))})};zh.prototype.set=function(b,e,l){var a=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){return f.return(a.update(b,
function(m){return e},l))})};zh.prototype.get=function(b,e){e=void 0===e?{}:e;var l=this,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){if(1==f.nextAddress)return f.setCatchFinallyBlocks(2),f.yield(l.pouchdb.get(b,e),4);if(2!=f.nextAddress)return f.return(f.yieldResult);a=f.enterCatchBlock();if("not_found"===a.name)return f.return(void 0);throw a;})};zh.prototype.has=function(b){var e=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){return 1==l.nextAddress?l.yield(e.get(b),
2):l.return(!!l.yieldResult)})};zh.prototype.add=function(b){var e=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){return l.return(e.pouchdb.post(b))})};zh.prototype.docList=function(b){b=void 0===b?{}:b;var e=this,l,a,f,m,r,v,x,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(E){if(1==E.nextAddress)return E.yield(e.pouchdb.allDocs(b),2);l=E.yieldResult;a=l.rows;f=[];for(m=0;m<a.length;m++)r=a[m],v=r.id,x=r.value,y=x.rev,f.push({id:v,rev:y});return E.return(f)})};
zh.prototype.docCount=function(){var b=this,e;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){if(1==l.nextAddress)return l.yield(b.pouchdb.allDocs(),2);e=l.yieldResult;return l.return(e.rows.length)})};zh.prototype.revList=function(b){var e=this,l,a,f,m;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){if(1==r.nextAddress)return r.yield(e.pouchdb.get(b,{revs:!0}),2);l=r.yieldResult;a=l._revisions;f=a.start;m=a.ids;return r.return(m.map(function(v){return f--+"-"+v}))})};
zh.prototype.getAllRevisions=function(b,e){e=void 0===e?{}:e;var l=this,a,f,m,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(x){return 1==x.nextAddress?(a=e,f=void 0===a.skip?0:a.skip,m=void 0===a.limit?0:a.limit,x.yield(l.revList(b),2)):3!=x.nextAddress?(r=x.yieldResult,0<f&&(r=r.slice(f)),0<m&&(r=r.slice(0,m)),v=r.map(function(y){return{rev:y,id:b}}),x.yield(l.getDocuments(v),3)):x.return(x.yieldResult)})};zh.prototype.getAll=function(b){b=void 0===b?{}:b;var e=this,l,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){if(1==
f.nextAddress)return f.yield(e.pouchdb.allDocs(Object.assign({},b,{include_docs:!0})),2);l=f.yieldResult;a=l.rows;return f.return(a.map(function(m){return m.doc}))})};zh.prototype.setDocuments=function(b,e){var l=this,a,f,m,r,v,x,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(E){switch(E.nextAddress){case 1:return E.yield(l.pouchdb.bulkDocs(b,e),2);case 2:a=E.yieldResult,f=0;case 3:if(!(f<a.length)){E.jumpTo(5);break}m=b[f];r=a[f];if(r.ok||"conflict"!==r.name||m._rev){E.jumpTo(4);break}return E.yield(l.set(m._id,
m),7);case 7:v=E.yieldResult,x=v._id,y=v._rev,a[f]={ok:!0,id:x,rev:y};case 4:f++;E.jumpTo(3);break;case 5:return E.return(a)}})};zh.prototype.updateDocuments=function(b,e,l){var a=this,f,m,r,v,x,y,E,F,I,J,P;return $jscomp.asyncExecutePromiseGeneratorProgram(function(N){switch(N.nextAddress){case 1:return N.yield(a.pouchdb.bulkDocs(b,l),2);case 2:f=N.yieldResult,m=[],r={},v=0;case 3:if(!(v<f.length)){if(!m.length){N.jumpTo(8);break}I=Object;J=I.assign;P=r;return N.yield(a.updateDocuments(m,e,l),9)}x=
b[v];y=f[v];r[y._id||x._id]=y;if(y.ok||"conflict"!==y.name){N.jumpTo(4);break}return N.yield(a.get(x._id),7);case 7:if(E=N.yieldResult,F=e(E,x))F._id||(F._id=x._id),F._rev||(F._rev=E._rev),m.push(F);case 4:v++;N.jumpTo(3);break;case 9:r=J.call(I,{},P,{},N.yieldResult);case 8:return N.return(r)}})};zh.prototype.getDocuments=function(b,e){e=void 0===e?{}:e;var l=this,a,f,m,r,v,x,y,E,F,I,J;return $jscomp.asyncExecutePromiseGeneratorProgram(function(P){if(1==P.nextAddress)return a=e,f=void 0===a.ignoreErrors?
!0:a.ignoreErrors,P.yield(l.pouchdb.bulkGet({docs:b}),2);m=P.yieldResult;r=m.results;v=[];for(x=0;x<r.length;x++)for(y=r[x],E=y.docs,F=y.id,console.assert(1===E.length,"getDocuments: expected only one doc for "+F),I=0;I<E.length;I++)J=E[I],f&&!J.ok||v.push(J.ok||J.error||J);return P.return(v)})};zh.prototype.query=function(b,e){return this.pouchdb.query(b,e)};zh.prototype.remove=function(b,e,l){var a=this,f,m;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){if(1==r.nextAddress)return"undefined"!==
typeof e?(f={_id:b,_rev:e},r.jumpTo(2)):r.yield(a.get(b),3);2!=r.nextAddress&&(f=r.yieldResult);m=f;return r.return(m?a.pouchdb.remove(m):void 0)})};zh.prototype.removeAll=function(){var b=this,e,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){return 1==a.nextAddress?(e=b.pouchdb,a.yield(e.allDocs(),2)):3!=a.nextAddress?(l=a.yieldResult,a.yield(Promise.all(l.rows.map(function(f){return e.remove(f.id,f.value.rev)})),3)):a.return(a.yieldResult)})};zh.prototype.replicateTo=function(b,
e){b instanceof ki.Database&&(b=b.pouchdb);return this.pouchdb.replicate.to(b,e)};zh.prototype.replicateFrom=function(b,e){b instanceof ki.Database&&(b=b.pouchdb);return this.pouchdb.replicate.from(b,e)};zh.prototype.sync=function(b,e){b instanceof ki.Database&&(b=b.pouchdb);return this.pouchdb.sync(b,e)};zh.prototype.getConflicts=function(b){var e=this,l,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){if(1==f.nextAddress)return f.yield(e.pouchdb.query("conflict_index/conflict_index",
Object.assign({reduce:!1,include_docs:!0,conflicts:!0},b)),2);l=f.yieldResult;a=l.rows;return f.return(a.map(function(m){var r={id:m.id,rev:m.doc._rev,doc:m.doc};m.doc._conflicts&&(r.conflicts=m.doc._conflicts,delete m.doc._conflicts);return r}))})};zh.prototype.resolveConflicts=function(b,e){var l=this,a,f,m,r,v,x,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(E){switch(E.nextAddress){case 1:return E.yield(l.pouchdb.get(b,{conflicts:!0}),2);case 2:return a=E.yieldResult,f=a._conflicts.map(function(F){return{id:b,
rev:F}}),E.yield(l.getDocuments(f),3);case 3:m=E.yieldResult,r=a,v=$jscomp.makeIterator(m),x=v.next();case 4:if(x.done){E.jumpTo(6);break}y=x.value;return E.yield(e(r,y),7);case 7:return(r=E.yieldResult)?E.yield(l.set(b,r),8):E.return(null);case 8:return r=E.yieldResult,E.yield(l.pouchdb.remove(y),5);case 5:x=v.next();E.jumpTo(4);break;case 6:return E.return(r)}})};zh.prototype.diffWith=function(b){var e=this,l,a,f,m,r,v,x,y,E,F,I,J,P;return $jscomp.asyncExecutePromiseGeneratorProgram(function(N){if(1==
N.nextAddress)return N.yield(b.docList(),2);if(3!=N.nextAddress)return l=N.yieldResult,N.yield(e.docList(),3);a=N.yieldResult;f=l.reduce(function(Y,W){var da={};return Object.assign(Y,(da[W.id]=W.rev,da))},{});m=a.reduce(function(Y,W){var da={};return Object.assign(Y,(da[W.id]=W.rev,da))},{});r=[];v=[];x=[];for(y in f)E=f[y],(F=m[y])?E!=F&&x.push({right:{id:y,rev:E},left:{id:y,rev:F}}):v.push({id:y,rev:E});for(I in m)J=m[I],(P=f[I])||r.push({id:I,rev:J});return N.return({inLeft:r,inRight:v,changed:x})})};
zh.loadDump=function(b,e){e=void 0===e?{}:e;var l=this,a,f,m,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(x){return 1==x.nextAddress?(a=b,f=a.header,m=a.docs,r=e.name||f.name,v=l.ensureDB(r),x.yield(v.setDocuments(m,{new_edits:!1}),2)):x.return(v)})};zh.prototype.dump=function(b){b=void 0===b?{}:b;var e=this,l,a,f,m,r,v,x,y,E,F,I,J,P,N,Y,W;return $jscomp.asyncExecutePromiseGeneratorProgram(function(da){if(1==da.nextAddress)return l=b,a=l.filterFn,f=l.name,m=l.type,r=l.dbInfo,v=
e,x=v.name,y=v.pouchdb,F=E=f||x,I=m||y.type(),J=(new Date).toJSON(),P=Object,N=P.assign,da.yield(y.info(),2);if(3!=da.nextAddress)return Y={name:F,db_type:I,start_time:J,db_info:N.call(P,{},da.yieldResult,{db_name:E},r)},da.yield(e.getAll({attachments:!0}),3);W=da.yieldResult;"function"===typeof a&&(W=a(W,Y));return da.return({header:Y,docs:W})})};zh.prototype.backup=function(b){b=void 0===b?1:b;var e=this,l,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){return 1==f.nextAddress?
(l=e.name+"_backup_"+b,a=e.constructor.ensureDB(l),f.yield(e.replicateTo(a),2)):f.return(a)})};zh.prototype.migrate=function(b){var e=this,l,a,f,m,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(x){if(1==x.nextAddress)return x.yield(e.getAll(),2);if(3!=x.nextAddress){l=x.yieldResult;a=[];f=[];for(m=0;m<l.length;m++)r=l[m],(v=b(r,m))?(v.hasOwnProperty("_id")||(v._id=r._id),v.hasOwnProperty("_rev")&&delete v._rev,a.push(v)):f.push(r);return x.yield(e.setDocuments(a),3)}return x.return({migrated:a.length,
unchanged:f.length})})};zh.prototype.createDesignDocs=function(b){return b.map(this.createDesignDoc)};zh.prototype.createDesignDoc=function(b){var e=b.name,l=b.mapFn,a=b.reduceFn,f=b.filterFn;b={_id:"_design/"+e,version:void 0===b.version?1:b.version};f&&ki.Path("filters."+e).set(b,f.toString(),!0);l&&ki.Path("views."+e+".map").set(b,l.toString(),!0);a&&ki.Path("views."+e+".reduce").set(b,a.toString(),!0);return b};zh.prototype.addDesignDocs=function(b,e){e=void 0===e?!1:e;var l=this,a,f;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){return 1==
m.nextAddress?(a=l.createDesignDocs(b),m.yield(l.updateDocuments(a,function(r,v){return!r.hasOwnProperty("version")||v.hasOwnProperty("version")&&v.version>r.version?v:null}),2)):3!=m.nextAddress?(f=m.yieldResult,e?m.yield(Promise.all(a.map(function(r){return l.designDocDoQueryStale(r._id)})),3):m.jumpTo(3)):m.return(f)})};zh.prototype.addDesignDoc=function(b,e){var l=b.name,a=b.mapFn,f=b.reduceFn,m=b.version;e=void 0===e?!1:e;var r=this,v,x;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){return 1==
y.nextAddress?(v=r.createDesignDoc({name:l,mapFn:a,reduceFn:f,version:m}),y.yield(r.set(v._id,v),2)):3!=y.nextAddress?(x=y.yieldResult,e?y.yield(r.designDocDoQueryStale(v._id),3):y.jumpTo(3)):y.return(x)})};zh.prototype.removeDesignDoc=function(b){return this.remove("_design/"+b)};zh.prototype.designDocDoQueryStale=function(b){b=$jscomp.makeIterator(b.split("/"));b.next();b=b.next().value;return this.query(b,{stale:"update_after"})};$jscomp.global.Object.defineProperties(zh.prototype,{pouchdb:{configurable:!0,
enumerable:!0,get:function(){return this._pouchdb?this._pouchdb:this._pouchdb=ki.createPouchDB(this.name,this.options)}}});$jscomp.global.Object.defineProperties(zh,{PouchDB:{configurable:!0,enumerable:!0,get:function(){return ki.PouchDB},set:function(b){ki.PouchDB=b}},databases:{configurable:!0,enumerable:!0,get:function(){return this._databases||(this._databases=new Map)}}});ki.Database=zh;ki.default=zh;var Be=lively.FreezerRuntime.recorderFor("lively.storage/objectdb.js");Be.isHash=function(b){return"string"===
typeof b&&40===b.length&&b.match(Be.hashRe)};Be.checkArg=function(b,e,l){if("undefined"===typeof e&&"string"===typeof l&&!l.includes("undefined"))throw Error("parameter "+b+" is undefined");if(null===e&&"string"===typeof l&&!l.includes("null"))throw Error("parameter "+b+" is null");if("string"===typeof l){var a=typeof e,f=e?e.constructor.name:"";if(!l.split("|").some(function(m){return a===m||f===m}))throw Error('parameter "'+b+'" expected to be of type '+l+" but is "+(f||a));}if("function"===typeof l&&
(e=l(e))&&e.error)throw Error('check of parameter "'+b+'" failed: '+e.error);};Be.checkArgs=function(b,e,l){for(var a in e)Be.checkArg(a,b[a],e[a]);if("function"===typeof l&&(e=l(b))&&e.error)throw Error(e.error);return b};Be.Database=zh;Be.resource=A;Be.obj=ng;Be.promise=hg;Be.arr=Mf;Be.string=Th;Be.Path=Ih;Be.parse=Xk;Be.categorizer=DI;Be.sha1=function(){function b(){var m=f.createHash("sha1");return{update:function(r){return m.update(r)},digest:function(){return m.digest("hex")}}}function e(m){function r(da){y[N]|=
(255&da)<<Y;Y?Y-=8:(N++,Y=24);16===N&&v()}function v(){for(var da=16;80>da;da++){var va=y[da-3]^y[da-8]^y[da-14]^y[da-16];y[da]=va<<1|va>>>31}var za,L;va=E;var Z=F,R=I,X=J,ja=P;for(da=0;80>da;da++){20>da?(za=X^Z&(R^X),L=1518500249):40>da?(za=Z^R^X,L=1859775393):60>da?(za=Z&R|X&(Z|R),L=2400959708):(za=Z^R^X,L=3395469782);var fa=(va<<5|va>>>27)+za+ja+L+(0|y[da]);ja=X;X=R;R=Z<<30|Z>>>2;Z=va;va=fa}E=E+va|0;F=F+Z|0;I=I+R|0;J=J+X|0;P=P+ja|0;for(da=N=0;16>da;da++)y[da]=0}function x(da){for(var va="",za=
28;0<=za;za-=4)va+=(da>>za&15).toString(16);return va}var y,E=1732584193,F=4023233417,I=2562383102,J=271733878,P=3285377520,N=0,Y=24,W=0;return y=m?l:new Uint32Array(80),{update:function(da){if("string"==typeof da){var va=da.length;W+=8*va;for(var za=0;za<va;za++)r(da.charCodeAt(za))}else for(va=da.length,W+=8*va,za=0;za<va;za++)r(da[za])},digest:function(){r(128);(14<N||14===N&&24>Y)&&v();N=14;Y=24;r(0);r(0);r(0xffffffffff<W?W/1099511627776:0);r(4294967295<W?W/4294967296:0);for(var da=24;0<=da;da-=
8)r(W>>da);return x(E)+x(F)+x(I)+x(J)+x(P)}}}var l,a,f;return"object"==typeof process&&"object"==typeof process.versions&&process.versions.node&&"renderer"!==process.__atom_type?(f="undefined"!=typeof System?System._nodeRequire("crypto"):require("crypto"),a=b):(l=new Uint32Array(80),a=e),function(m){if(void 0===m)return a(!1);var r=a(!0);return r.update(m),r.digest()}}();Be.hashRe=/^[0-9a-f]+$/i;Be.objectDBs=Be.objectDBs||new Map;var ei=function(b,e){this.name=b;if(!e.snapshotLocation||!e.snapshotLocation.isResource)throw Error("ObjectDB needs snapshotLocation!");
this.snapshotLocation=e.snapshotLocation;this.__versionDB=this.__commitDB=null};ei.dbList=function(){var b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){return 1==e.nextAddress?(b=Be.Database.ensureDB("internal__objectdb-meta"),e.yield(b.getAll(),2)):e.return(e.yieldResult.map(function(l){return l._id}))})};ei.find=function(b){var e=this,l,a,f;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){if(1==m.nextAddress){if(l=Be.objectDBs.get(b))return m.return(l);a=Be.Database.ensureDB("internal__objectdb-meta");
return m.yield(a.get(b),2)}return(f=m.yieldResult)?m.return(e.named(b,f)):m.return()})};ei.named=function(b,e){e=void 0===e?{}:e;var l=Be.objectDBs.get(b);if(l)return l;if(!e||!e.snapshotLocation)throw Error("need snapshotLocation");if("string"===typeof e.snapshotLocation)try{e.snapshotLocation=Be.resource(e.snapshotLocation)}catch(a){e.snapshotLocation=Be.resource(System.baseURL).join(e.snapshotLocation)}l=new this(b,e);Be.objectDBs.set(b,l);Be.Database.ensureDB("internal__objectdb-meta").set(b,
Object.assign({},e,{snapshotLocation:e.snapshotLocation.url})).catch(function(a){return console.error("error writing objectdb meta:",a)});return l};ei.prototype.destroy=function(){var b=this,e,l,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){if(1==f.nextAddress)return(e=Be.Database.findDB(b.name+"-commits"))?f.yield(e.destroy(),2):f.jumpTo(2);if(4!=f.nextAddress)return(l=Be.Database.findDB(b.name+"-version-graph"))?f.yield(l.destroy(),4):f.jumpTo(4);Be.objectDBs.delete(b.name);a=
Be.Database.ensureDB("internal__objectdb-meta");return f.yield(a.remove(b.name),0)})};ei.prototype.snapshotResourceFor=function(b){var e=b.content.slice(0,2);b=b.content.slice(2);return this.snapshotLocation.join(e+"/"+b+".json")};ei.prototype.snapshotObject=function(b,e,l,a,f,m,r,v){var x=this,y,E;return $jscomp.asyncExecutePromiseGeneratorProgram(function(F){if(1==F.nextAddress)return y=function(I){return I},F.yield(y(l),2);E=F.yieldResult;return F.return(x.commit(b,e,E,f,m,r,v))})};ei.prototype.loadObject=
function(b,e,l,a,f){var m=this,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(x){if(1==x.nextAddress)return x.yield(m.loadSnapshot(b,e,a,f),2);r=x.yieldResult;v=function(y){return y};return x.return(v(r))})};ei.prototype.has=function(b,e){var l=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){return 1==a.nextAddress?a.yield(l.objectStats(b,e),2):a.return(!!a.yieldResult)})};ei.prototype.objects=function(b){var e=this,l,a,f;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){if(1==
m.nextAddress)return m.yield(e.objectStats(b),2);l=m.yieldResult;if(b)return m.return(Object.keys(l||{}));a={};for(f in l)a[f]=Object.keys(l[f]);return m.return(a)})};ei.prototype.objectStats=function(b,e){var l=this,a,f,m,r,v,x,y,E,F,I,J,P,N,Y,W,da,va,za,L,Z;return $jscomp.asyncExecutePromiseGeneratorProgram(function(R){switch(R.nextAddress){case 1:a={};if(f=l.__commitDB){R.jumpTo(2);break}return R.yield(l._commitDB(),3);case 3:f=R.yieldResult;case 2:return m=f,r={reduce:!0,group:!0},b&&e?r.key=
b+"\x00"+e:b&&(r.startkey=b+"\x00",r.endkey=b+"\ufff0"),R.setCatchFinallyBlocks(4),R.yield(m.pouchdb.query("nameWithMaxMinTimestamp_index",r),6);case 6:v=R.yieldResult;x=v.rows;y=$jscomp.makeIterator(x);for(E=y.next();!E.done;E=y.next())I=F=E.value,J=I.key,P=I.value,N=P.count,Y=P.max,W=P.min,da=$jscomp.makeIterator(J.split("\x00")),va=da.next().value,za=da.next().value,L=a[va]||(a[va]={}),L[za]={count:N,newest:Y,oldest:W};R.leaveTryBlock(5);break;case 4:return Z=R.enterCatchBlock(),console.error(Z),
R.return(a);case 5:return b&&e?R.return((a[b]||{})[e]):b?R.return(a[b]):R.return(a)}})};ei.prototype.getCommits=function(b,e,l,a){l=void 0===l?"HEAD":l;a=void 0===a?Infinity:a;var f=this,m,r,v,x;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){switch(y.nextAddress){case 1:return y.yield(f._log(b,e,l,a),2);case 2:m=y.yieldResult;if(!m.length)return y.return([]);if(r=f.__commitDB){y.jumpTo(3);break}return y.yield(f._commitDB(),4);case 4:r=y.yieldResult;case 3:return v=r,y.yield(v.getDocuments(m.map(function(E){return{id:E}})),
5);case 5:return x=y.yieldResult,y.return(x)}})};ei.prototype.getCommit=function(b){var e=this,l,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){if(1==f.nextAddress)return(l=e.__commitDB)?f.jumpTo(2):f.yield(e._commitDB(),3);2!=f.nextAddress&&(l=f.yieldResult);a=l;return f.return(a.get(b))})};ei.prototype.getCommitsWithIds=function(b){var e=this,l,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){if(1==f.nextAddress)return b.length?(l=e.__commitDB)?f.jumpTo(2):f.yield(e._commitDB(),
3):f.return([]);2!=f.nextAddress&&(l=f.yieldResult);a=l;return f.return(a.getDocuments(b.map(function(m){return{id:m}})))})};ei.prototype.getLatestCommit=function(b,e,l,a){l=void 0===l?"HEAD":l;a=void 0===a?!1:a;var f=this,m,r,v,x,y,E,F;return $jscomp.asyncExecutePromiseGeneratorProgram(function(I){switch(I.nextAddress){case 1:return m=$jscomp,r=m.makeIterator,I.yield(f._log(b,e,l,1),2);case 2:v=r.call(m,I.yieldResult);x=v.next().value;if(!x)return I.return(null);if(y=f.__commitDB){I.jumpTo(3);break}return I.yield(f._commitDB(),
4);case 4:y=I.yieldResult;case 3:return E=y,I.yield(E.get(x),5);case 5:return(F=I.yieldResult)&&F.deleted&&!a?I.return(null):I.return(F)}})};ei.prototype.commit=function(b,e,l,a,f,m,r){m=void 0===m?"HEAD":m;var v=this,x,y,E,F,I,J,P,N,Y,W,da,va,za,L,Z,R,X,ja,fa;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ua){switch(ua.nextAddress){case 1:x=a;y=x.author;E=void 0===x.description?"no description":x.description;F=void 0===x.tags?[]:x.tags;I=x.timestamp;J=void 0===x.message?"":x.message;
P=x.metadata;N=x.preview;if(!b)throw Error("object needs a type");if(!e)throw Error("object needs a name");if(!y)throw Error("Cannot commit "+b+"/"+e+" without user");if(Y=v.__versionDB){ua.jumpTo(2);break}return ua.yield(v._versionDB(),3);case 3:Y=ua.yieldResult;case 2:return W=Y,ua.yield(v.versionGraph(b,e),4);case 4:za=(va=(da=ua.yieldResult)?da.refs[m]:null)?[va]:[];if(r){if(!da)throw Error('Trying to store "'+b+"/"+e+'" on top of expected version '+r+" but no version entry exists!");if(va!==
r)throw Error('Trying to store "'+b+"/"+e+'" on top of expected version '+r+" but ref "+m+" is of version "+va+"!");}Z=(L=Be.isHash(l))?null:l?JSON.stringify(l):null;R=v._createCommit(b,e,E,F,P,y,I,J,za,L?null:l,Z,f||N,L?l:null);if(!l||L){ua.jumpTo(5);break}X=v.snapshotResourceFor(R);return ua.yield(X.parent().ensureExistance(),6);case 6:return X.canDealWithJSON?ua.yield(X.writeJson(l),5):ua.yield(X.write(Z),5);case 5:if(ja=v.__commitDB){ua.jumpTo(11);break}return ua.yield(v._commitDB(),12);case 12:ja=
ua.yieldResult;case 11:return fa=ja,ua.yield(fa.set(R._id,R),13);case 13:return R=ua.yieldResult,da||(da={refs:{},history:{}}),da.refs[m]=R._id,da.history[R._id]=za,ua.yield(W.set(b+"/"+e,da),14);case 14:return ua.return(R)}})};ei.prototype.loadSnapshot=function(b,e,l,a){a=void 0===a?"HEAD":a;var f=this,m,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(x){switch(x.nextAddress){case 1:if(l&&"string"!==typeof l){m=l;x.jumpTo(2);break}if(l){if(r=f.__commitDB){x.jumpTo(6);break}return x.yield(f._commitDB(),
7)}return x.yield(f.getLatestCommit(b,e,a),5);case 5:m=x.yieldResult;x.jumpTo(2);break;case 7:r=x.yieldResult;case 6:return v=r,x.yield(v.get(l),8);case 8:m=x.yieldResult;case 2:if(!m)throw Error("Cannot find commit to loadSnapshot for "+b+"/"+e+" (using "+l+")");return x.return(f.snapshotResourceFor(m).readJson())}})};ei.prototype.revert=function(b,e,l,a){var f=this,m,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(x){switch(x.nextAddress){case 1:if(m=f.__versionDB){x.jumpTo(2);break}return x.yield(f._versionDB(),
3);case 3:m=x.yieldResult;case 2:return r=m,x.yield(r.get(b+"/"+e),4);case 4:return v=x.yieldResult,v.refs[l||"HEAD"]=a,delete v.deleted,x.yield(r.set(b+"/"+e,v),5);case 5:return x.return(v)}})};ei.prototype._createCommit=function(b,e,l,a,f,m,r,v,x,y,E,F,I){v=void 0===v?"":v;x=void 0===x?[]:x;!F&&y&&y.preview&&(F=y.preview);return this._createCommitFromSpec({name:e,type:b,timestamp:r||Date.now(),author:{name:m.name,email:m.email,realm:m.realm},tags:a,description:l,preview:F,message:v,content:I||E&&
Be.sha1(E)||null,deleted:!I&&!y,metadata:f,ancestors:x},!0)};ei.prototype._createCommitFromSpec=function(b,e){e=void 0===e?!1:e;if(!b.name)throw Error("commit needs name");if(!b.type)throw Error("commit needs type");if(!b.author)throw Error("commit needs author");if(!b.author.name)throw Error("commit needs author.name");b.timestamp||(b.timestamp=Date.now());b.tags||(b.tags=[]);!e&&b.content&&(e=Be.isHash(b.content),e||(b.content=Be.sha1(b.content)));e=Be.obj.dissoc(b,["preview"]);e=Be.sha1(JSON.stringify(e));
return Object.assign(b,{_id:e})};ei.prototype._commitDB=function(){var b=this,e,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){if(1==a.nextAddress){if(b.__commitDB)return a.return(b.__commitDB);e=b.name+"-commits";if(l=Be.Database.findDB(e))return a.return(b.__commitDB=l);l=Be.Database.ensureDB(e);return a.yield(l.addDesignDocs(b._commitdb_indexes),2)}return a.return(b.__commitDB=l)})};ei.prototype.close=function(){var b=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){switch(e.nextAddress){case 1:if(!b.__commitDB){e.jumpTo(2);
break}return e.yield(b.__commitDB.close(),3);case 3:b.__commitDB=null;case 2:if(!b.__versionDB){e.jumpTo(0);break}return e.yield(b.__versionDB.close(),5);case 5:b.__versionDB=null,e.jumpToEnd()}})};ei.prototype.versionGraph=function(b,e){var l=this,a,f,m;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){switch(r.nextAddress){case 1:if(a=l.__versionDB){r.jumpTo(2);break}return r.yield(l._versionDB(),3);case 3:a=r.yieldResult;case 2:return f=a,r.yield(f.get(b+"/"+e),4);case 4:return m=
r.yieldResult,r.return(!m||m.deleted||m._deleted?null:m)}})};ei.prototype._log=function(b,e,l,a){a=void 0===a?Infinity:a;var f=this,m,r,v,x;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){if(1==y.nextAddress)return y.yield(f.versionGraph(b,e),2);m=y.yieldResult;if(!m||m.deleted||m._deleted)return y.return([]);r=m.refs.HEAD;for(v=[];;){if(v.includes(r))throw Error("cyclic version graph???");v.push(r);x=$jscomp.makeIterator(m.history[r]||[]);r=x.next().value;if(!r||v.length>=a)break}return y.return(v)})};
ei.prototype._findTimestampedVersionsOfObjectNamed=function(b,e){e=void 0===e?{}:e;var l=this,a,f,m,r,v,x,y,E,F,I,J;return $jscomp.asyncExecutePromiseGeneratorProgram(function(P){switch(P.nextAddress){case 1:a=e;f=void 0===a.include_docs?!0:a.include_docs;m=void 0===a.descending?!0:a.descending;r=void 0===a.startTime?"0".repeat(13):a.startTime;v=void 0===a.endTime?"9".repeat(13):a.endTime;x=b+"\x00"+(m?v:r);y=b+"\x00"+(m?r:v);if(E=l.__commitDB){P.jumpTo(2);break}return P.yield(l._commitDB(),3);case 3:E=
P.yieldResult;case 2:return F=E,P.yield(F.pouchdb.query("nameAndTimestamp_index",Object.assign({},e,{descending:m,include_docs:f,startkey:x,endkey:y})),4);case 4:return I=P.yieldResult,J=I.rows,P.return(f?J.map(function(N){return N.doc}):J.map(function(N){return N.id}))}})};ei.prototype._versionDB=function(){var b=this,e,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){if(1==a.nextAddress){if(b.__versionDB)return a.return(b.__versionDB);e=b.name+"-version-graph";if(l=Be.Database.findDB(e))return a.return(b.__versionDB=
l);l=Be.Database.ensureDB(e);return a.yield(l.addDesignDocs(b._versiondb_indexes),2)}return a.return(b.__versionDB=l)})};ei.prototype.exportToDir=function(b,e,l,a){l=void 0===l?!1:l;a=void 0===a?!1:a;var f=this,m,r,v,x,y,E,F,I,J,P,N,Y,W,da,va,za,L,Z,R,X,ja,fa,ua,gb,hb,ta,na,pa,La,Hb,fc,Ob,Zb,Hc,Gb,dd,Gd,ma,Ga,Ja,vb,Vb,vd,ud,Jc,Re;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Le){switch(Le.nextAddress){case 1:"string"===typeof b&&(b=Be.resource(b));if(f.__commitDB){Le.jumpTo(2);break}return Le.yield(f._commitDB(),
3);case 3:case 2:if(m=f.__versionDB){Le.jumpTo(4);break}return Le.yield(f._versionDB(),5);case 5:m=Le.yieldResult;case 4:r=m;v=[];if(!e)return Le.yield(r.getAll(),13);x=$jscomp.makeIterator(e);y=x.next();case 8:if(y.done){Le.jumpTo(7);break}F=E=y.value;I=F.name;J=F.type;P=b.join(J).join(I).asDirectory();return Le.yield(f.versionGraph(J,I),11);case 11:return N=Le.yieldResult,Y=N.refs,W=N.history,da=Object.keys(W),Le.yield(f.getCommitsWithIds(da),12);case 12:va=Le.yieldResult;v.push({refs:Y,history:W,
currentExportDir:P,commits:va,name:I,type:J});y=x.next();Le.jumpTo(8);break;case 13:za=Le.yieldResult,L=$jscomp.makeIterator(za),Z=L.next();case 14:if(Z.done){Le.jumpTo(7);break}X=R=Z.value;ja=X.refs;fa=X.history;ua=X._id;if(ua.startsWith("_")){Le.jumpTo(15);break}return Le.yield(f.getCommit(ja.HEAD||Object.keys(fa)[0]),17);case 17:return gb=Le.yieldResult,hb=gb.type,ta=gb.name,na=b.join(hb).join(ta).asDirectory(),pa=Object.keys(fa),Le.yield(f.getCommitsWithIds(pa),18);case 18:La=Le.yieldResult,v.push({refs:ja,
history:fa,currentExportDir:na,commits:La,name:ta,type:hb});case 15:Z=L.next();Le.jumpTo(14);break;case 7:Hb={},fc=$jscomp.makeIterator(v),Ob=fc.next();case 19:if(Ob.done){Le.jumpTo(0);break}Hc=Zb=Ob.value;Gb=Hc.refs;dd=Hc.history;Hb.$jscomp$loop$prop$currentExportDir$1313$2661=Hc.currentExportDir;Gd=Hc.commits;ma=Hc.name;Ga=Hc.type;a||(Gd=Gd.filter(function(Uh){return!Uh.deleted}));Ja=l?Gd.map(function(Uh){return function(th){if(th.deleted||th._deleted||!th.content)return null;delete th._rev;th=
f.snapshotResourceFor(th);var pj=Uh.$jscomp$loop$prop$currentExportDir$1313$2661.join(th.parent().name()+"/"+th.name());return{from:th,to:pj}}}(Hb)).filter(Boolean):[];l||Gd.forEach(function(Uh){delete Uh._rev});return Le.yield(Hb.$jscomp$loop$prop$currentExportDir$1313$2661.ensureExistance(),22);case 22:return Le.yield(Hb.$jscomp$loop$prop$currentExportDir$1313$2661.join("index.json").writeJson({name:ma,type:Ga}),23);case 23:return Le.yield(Hb.$jscomp$loop$prop$currentExportDir$1313$2661.join("commits.json").writeJson(Gd),
24);case 24:return Le.yield(Hb.$jscomp$loop$prop$currentExportDir$1313$2661.join("history.json").writeJson({refs:Gb,history:dd}),25);case 25:vb=$jscomp.makeIterator(Ja),Vb=vb.next();case 26:if(Vb.done){Hb={$jscomp$loop$prop$currentExportDir$1313$2661:Hb.$jscomp$loop$prop$currentExportDir$1313$2661};Ob=fc.next();Le.jumpTo(19);break}ud=vd=Vb.value;Jc=ud.from;Re=ud.to;return Le.yield(Jc.copyTo(Re),27);case 27:Vb=vb.next(),Le.jumpTo(26)}})};ei.prototype.exportToSpecs=function(b,e){e=void 0===e?!1:e;var l=
this,a,f,m,r,v,x,y,E,F,I,J,P,N,Y,W;return $jscomp.asyncExecutePromiseGeneratorProgram(function(da){switch(da.nextAddress){case 1:a=[];if(b){da.jumpTo(2);break}b=[];return da.yield(l.objectStats(),3);case 3:for(m in f=da.yieldResult||{},f)for(r in f[m])b.push({type:m,name:r});case 2:v=$jscomp.makeIterator(b),x=v.next();case 4:if(x.done){da.jumpTo(6);break}E=y=x.value;F=E.name;I=E.type;return da.yield(l.versionGraph(I,F),7);case 7:return J=da.yieldResult,P=J.refs,N=J.history,Y=Object.keys(N),da.yield(l.getCommitsWithIds(Y),
8);case 8:W=da.yieldResult;e||(W=W.filter(function(va){return!va.deleted}));W.forEach(function(va){delete va._rev});a.push({type:I,name:F,commits:W,history:{refs:P,history:N}});x=v.next();da.jumpTo(4);break;case 6:return da.return(a)}})};ei.prototype.importFromDir=function(b,e,l){function a(J){var P,N,Y,W,da,va,za,L,Z,R;return $jscomp.asyncExecutePromiseGeneratorProgram(function(X){switch(X.nextAddress){case 1:return P=$jscomp,N=P.makeIterator,X.yield(Promise.all([J.join("index.json").readJson(),
J.join("commits.json").readJson(),J.join("history.json").readJson()]),2);case 2:Y=N.call(P,X.yieldResult);W=Y.next().value;da=W.type;va=W.name;za=Y.next().value;L=Y.next().value;if(!l){Z=[];X.jumpTo(3);break}return X.yield(J.dirList(1,{exclude:function(ja){return!ja.isDirectory()}}),4);case 4:Z=X.yieldResult;case 3:return R=Z,X.return({dir:J,type:da,name:va,commits:za,history:L,snapshotDirs:R})}})}e=void 0===e?!1:e;l=void 0===l?!1:l;var f=this,m,r,v,x,y,E,F,I;return $jscomp.asyncExecutePromiseGeneratorProgram(function(J){switch(J.nextAddress){case 1:return J.yield(b.dirList(3,
{exclude:function(P){return!P.isDirectory()&&"index.json"!==P.name()}}),2);case 2:m=J.yieldResult,m=m.filter(function(P){return"index.json"===P.name()}),r=m.map(function(P){return P.parent()}),v=[],x=$jscomp.makeIterator(r),y=x.next();case 3:if(y.done){J.jumpTo(5);break}E=y.value;F=v;I=F.push;return J.yield(a(E),6);case 6:I.call(F,J.yieldResult);y=x.next();J.jumpTo(3);break;case 5:return J.return(f.importFromSpecs(v,e,l))}})};ei.prototype.importFromSpecs=function(b,e,l){e=void 0===e?!1:e;l=void 0===
l?!1:l;var a=this,f,m,r,v,x,y,E,F,I,J,P;return $jscomp.asyncExecutePromiseGeneratorProgram(function(N){switch(N.nextAddress){case 1:if(e){N.jumpTo(2);break}if(f=a.__versionDB){N.jumpTo(3);break}return N.yield(a._versionDB(),4);case 4:f=N.yieldResult;case 3:m=f,r=$jscomp.makeIterator(b),v=r.next();case 5:if(v.done){N.jumpTo(2);break}y=x=v.value;E=y.type;F=y.name;return N.yield(m.get(E+"/"+F),8);case 8:if(N.yieldResult)throw Error("Import failed: object "+E+"/"+F+" already exists and overwrite is not allowed");
v=r.next();N.jumpTo(5);break;case 2:I=$jscomp.makeIterator(b),J=I.next();case 9:if(J.done){N.jumpTo(11);break}P=J.value;return N.yield(a.importFromSpec(P,!0,l),10);case 10:J=I.next();N.jumpTo(9);break;case 11:return N.return(b)}})};ei.prototype.importFromSpec=function(b,e,l){e=void 0===e?!1:e;l=void 0===l?!1:l;var a=this,f,m,r,v,x,y,E,F,I,J,P,N,Y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(W){switch(W.nextAddress){case 1:if(f=a.__versionDB){W.jumpTo(2);break}return W.yield(a._versionDB(),
3);case 3:f=W.yieldResult;case 2:m=f;if(r=a.__commitDB){W.jumpTo(4);break}return W.yield(a._commitDB(),5);case 5:r=W.yieldResult;case 4:v=r;x=a;y=x.snapshotLocation;E=b;F=E.type;I=E.name;J=E.commits;P=E.history;N=E.snapshotDirs;if(!(Y=!e)){W.jumpTo(6);break}return W.yield(m.get(F+"/"+I),7);case 7:Y=W.yieldResult;case 6:if(Y)throw Error("Import failed: object "+F+"/"+I+" already exists and overwrite is not allowed");return W.yield(Promise.all([v.setDocuments(J),m.set(F+"/"+I,P)].concat($jscomp.arrayFromIterable(N&&
l?N.map(function(da){return da.copyTo(y.join(da.name()).asDirectory())}):[]))),8);case 8:return W.return(b)}})};ei.prototype.importFromResource=function(b,e,l,a,f){f=void 0===f?!1:f;var m=this,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(x){switch(x.nextAddress){case 1:return x.yield(l.readJson(),2);case 2:r=x.yieldResult;if(!(v=f)){x.jumpTo(3);break}return x.yield(m.has(b,e),4);case 4:v=x.yieldResult;case 3:if(!v){x.jumpTo(5);break}return x.yield(m.delete(b,e,!1),5);case 5:return x.return(m.commit(b,
e,r,a))}})};ei.prototype.replicateTo=function(b,e,l,a){return(new Be.Synchronization(this,b,e,l,Object.assign({method:"replicateTo"},a))).start()};ei.prototype.replicateFrom=function(b,e,l,a){return(new Be.Synchronization(this,b,e,l,Object.assign({method:"replicateFrom"},a))).start()};ei.prototype.sync=function(b,e,l,a){return(new Be.Synchronization(this,b,e,l,Object.assign({method:"sync"},a))).start()};ei.prototype.getConflicts=function(b,e){function l(y,E){var F;return $jscomp.asyncExecutePromiseGeneratorProgram(function(I){return 1==
I.nextAddress?I.yield(y.getConflicts({include_docs:!0}),2):3!=I.nextAddress?(F=I.yieldResult,I.yield(Promise.all(F.map(function(J){var P,N,Y,W,da,va;return $jscomp.asyncExecutePromiseGeneratorProgram(function(za){if(1==za.nextAddress){P=J;N=P.id;Y=P.rev;W=P.conflicts;da=P.doc;if(e&&e[E]&&!e[E][N])return za.return(null);if(!b)return za.jumpTo(2);va=W.map(function(L){return{id:N,rev:L}});return za.yield(y.getDocuments(va),3)}2!=za.nextAddress&&(W=za.yieldResult);b?Be.obj.dissoc(da,["_conflicts"]):da=
null;return za.return({id:N,rev:Y,conflicts:W,kind:E,doc:da})})})),3)):I.return(I.yieldResult.filter(Boolean))})}var a=this,f,m,r,v,x;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){switch(y.nextAddress){case 1:if(f=a.__commitDB){y.jumpTo(2);break}return y.yield(a._commitDB(),3);case 3:f=y.yieldResult;case 2:m=f;if(r=a.__versionDB){y.jumpTo(4);break}return y.yield(a._versionDB(),5);case 5:r=y.yieldResult;case 4:return v=r,y.yield(l(v,"versions"),6);case 6:return x=y.yieldResult,y.yield(l(m,
"commits"),8);case 8:return y.yield(y.yieldResult,7);case 7:return y.return({versionConflicts:x,commitConflicts:y.yieldResult})}})};ei.prototype.resolveConflict=function(b){var e=this,l,a,f,m,r,v,x,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(E){switch(E.nextAddress){case 1:l=b;a=l.resolved;f=l.delete;m=l.kind;r=l.id;if("versions"===m){if(y=e.__versionDB){E.jumpTo(7);break}return E.yield(e._versionDB(),8)}if("commits"!==m)throw Error("Unknown conflict kind: "+m);if(x=e.__commitDB){E.jumpTo(5);
break}return E.yield(e._commitDB(),6);case 6:x=E.yieldResult;case 5:v=x;E.jumpTo(3);break;case 8:y=E.yieldResult;case 7:v=y;case 3:return E.yield(v.set(r,a),9);case 9:return E.yield(Promise.all(f.map(function(F){return v.pouchdb.remove(r,F)})),0)}})};ei.prototype.getDiff=function(b,e){var l=this,a,f,m,r,v,x,y,E,F,I,J,P,N,Y,W,da,va,za,L,Z,R,X,ja,fa,ua,gb,hb,ta,na,pa,La,Hb,fc,Ob,Zb,Hc,Gb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(dd){switch(dd.nextAddress){case 1:a=b;"string"===typeof b&&
(a=Be.Database.ensureDB(b+"-commits"),e=Be.Database.ensureDB(b+"-version-graph"));if(f=l.__commitDB){dd.jumpTo(2);break}return dd.yield(l._commitDB(),3);case 3:f=dd.yieldResult;case 2:m=f;if(r=l.__versionDB){dd.jumpTo(4);break}return dd.yield(l._versionDB(),5);case 5:r=dd.yieldResult;case 4:return v=r,dd.yield(m.diffWith(a),6);case 6:return x=dd.yieldResult,dd.yield(v.diffWith(e),7);case 7:return y=dd.yieldResult,dd.yield(Promise.all(y.inLeft.map(function(Gd){var ma;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ga){return 1==
Ga.nextAddress?(ma=Gd.id,Ga.yield(v.get(Gd.id),2)):Ga.return({id:ma,doc:Ga.yieldResult})})})),8);case 8:return E=dd.yieldResult,F=Be.arr,I=F.groupBy,dd.yield(e.getAll(),9);case 9:return J=I.call(F,dd.yieldResult,function(Gd){return Gd._id}),dd.yield(Promise.all(y.inRight.map(function(Gd){return $jscomp.asyncExecutePromiseGeneratorProgram(function(ma){return ma.return({id:Gd.id,doc:J[Gd.id]})})})),10);case 10:return P=dd.yieldResult,dd.yield(Promise.all(y.changed.map(function(Gd){var ma,Ga,Ja,vb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Vb){return 1==
Vb.nextAddress?(ma=Object,Ga=ma.assign,Ja=Gd.left,Vb.yield(v.get(Gd.left.id),2)):3!=Vb.nextAddress?(vb=Vb.yieldResult,Vb.yield(e.get(Gd.right.id),3)):Vb.return(Ga.call(ma,{},Ja,{docA:vb,docB:Vb.yieldResult}))})})),11);case 11:return N=dd.yieldResult,Y=Be.arr,W=Y.groupBy,dd.yield(a.getAll(),12);case 12:da=W.call(Y,dd.yieldResult,function(Gd){return Gd._id}),va=[],za=[],L=[],Z=$jscomp.makeIterator(x.inLeft),R=Z.next();case 13:if(R.done){dd.jumpTo(15);break}X=R.value;ja=va;fa=ja.push;return dd.yield(m.get(X.id),
16);case 16:fa.call(ja,dd.yieldResult);R=Z.next();dd.jumpTo(13);break;case 15:ua=$jscomp.makeIterator(x.inRight),R=ua.next();case 17:if(R.done){dd.jumpTo(19);break}gb=R.value;hb=za;ta=hb.push;return dd.yield(da[gb.id],20);case 20:ta.call(hb,dd.yieldResult);R=ua.next();dd.jumpTo(17);break;case 19:na=$jscomp.makeIterator(x.changed),R=na.next();case 21:if(R.done){dd.jumpTo(23);break}pa=R.value;La=L;Hb=La.push;return dd.yield(m.get(pa.left.id),24);case 24:return Hb.call(La,dd.yieldResult),fc=L,Ob=fc.push,
dd.yield(a.get(pa.right.id),25);case 25:Ob.call(fc,dd.yieldResult);R=na.next();dd.jumpTo(21);break;case 23:return Zb=va.map(function(Gd){return Be.obj.select(Gd,["_id","name","type"])}),Hc=za.map(function(Gd){return Be.obj.select(Gd,["_id","name","type"])}),Gb=L.map(function(Gd){return Be.obj.select(Gd,["_id","name","type"])}),dd.return({changed:N,remote:P,local:E,changedCommitTypeAndNames:Gb,remoteCommitTypeAndNames:Hc,localCommitTypeAndNames:Zb})}})};ei.prototype.delete=function(b,e,l){l=void 0===
l?!0:l;var a=this,f,m,r,v,x,y,E,F,I,J,P,N,Y,W,da,va,za,L;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Z){switch(Z.nextAddress){case 1:f=[];m=[];if(r=a.__commitDB){Z.jumpTo(2);break}return Z.yield(a._commitDB(),3);case 3:r=Z.yieldResult;case 2:return v=r,x={include_docs:!0,startkey:b+"\x00"+e+"\x00",endkey:b+"\x00"+e+"\uffff"},Z.yield(v.query("nameAndTimestamp_index",x),4);case 4:y=Z.yieldResult;E=y.rows;F=$jscomp.makeIterator(E);for(I=F.next();!I.done;I=F.next())P=J=I.value,N=P.doc,
N.deleted||N._deleted||!N.content||f.push(a.snapshotResourceFor(N)),m.push(Object.assign({},N,{_deleted:!0}));if(Y=a.__versionDB){Z.jumpTo(5);break}return Z.yield(a._versionDB(),6);case 6:Y=Z.yieldResult;case 5:return W=Y,Z.yield(W.get(b+"/"+e),7);case 7:da=Z.yieldResult;va=da._id;za=da._rev;L={_id:va,_rev:za,_deleted:!0};if(l){Z.jumpTo(8);break}return Z.yield(v.setDocuments(m),9);case 9:return Z.yield(W.setDocuments([L]),10);case 10:Promise.all(f.map(function(R){return R.remove()}));case 8:return Z.return({commits:m,
history:L,resources:f})}})};ei.prototype.deleteCommit=function(b,e,l){e=void 0===e?!0:e;l=void 0===l?"HEAD":l;var a=this,f,m,r,v,x,y,E,F,I,J,P,N,Y,W,da;return $jscomp.asyncExecutePromiseGeneratorProgram(function(va){switch(va.nextAddress){case 1:if(b&&"string"!==typeof b){f=b;va.jumpTo(2);break}if(!b){va.jumpTo(2);break}if(m=a.__commitDB){va.jumpTo(4);break}return va.yield(a._commitDB(),5);case 5:m=va.yieldResult;case 4:return r=m,va.yield(r.get(b),6);case 6:f=va.yieldResult;case 2:if(!f)throw Error("commit needed!");
if(v=a.__versionDB){va.jumpTo(7);break}return va.yield(a._versionDB(),8);case 8:v=va.yieldResult;case 7:x=v;if(y=a.__commitDB){va.jumpTo(9);break}return va.yield(a._commitDB(),10);case 10:y=va.yieldResult;case 9:return E=y,F=f,I=F.name,J=F.type,P=f.deleted||f._deleted||!f.content?[]:[a.snapshotResourceFor(f)],N=[Object.assign({},f,{_deleted:!0})],va.yield(x.get(J+"/"+I),11);case 11:Y=va.yieldResult;if(!Y)throw Error("No history for "+J+"/"+I+"@"+f._id);if(!Y.refs[l])throw Error("Cannot delete commit "+
J+"/"+I+"@"+f._id+" b/c it is not where ref "+l+" is pointing!");W=$jscomp.makeIterator(Y.history[f._id]||[]);da=W.next().value;if(!da&&1>=Object.keys(Y.history).length)Y._deleted=!0;else if(da)delete Y.history[f._id],Y.refs[l]=da;else throw Error("Cannot delete commit "+J+"/"+I+"@"+f._id+" b/c it has no ancestor but there are still other commits!");if(e){va.jumpTo(12);break}return va.yield(x.set(J+"/"+I,Y),13);case 13:return va.yield(E.setDocuments(N),14);case 14:return va.yield(Promise.all(P.map(function(za){return za.remove()})),
12);case 12:return va.return({commits:N,history:Y,resources:P})}})};$jscomp.global.Object.defineProperties(ei.prototype,{_commitdb_indexes:{configurable:!0,enumerable:!0,get:function(){return[{name:"name_index",version:4,mapFn:'function (doc) { emit(doc.type + "\x00" + doc.name); }'},{name:"nameAndTimestamp_index",version:3,mapFn:'function (doc) { emit(doc.type + "\x00" + doc.name + "\x00" + doc.timestamp + "\x00" + doc._id); }'},{name:"nameWithMaxMinTimestamp_index",version:3,mapFn:'function(doc) { emit(doc.type + "\x00" + doc.name, doc.timestamp); }',
reduceFn:"_stats"},{name:"nameTypeFilter",version:9,filterFn:'function(doc, req) {\n          if (doc._id[0] === "_" || !req || !req.query) return true;\n          if (req.query.onlyIds) return !!req.query.onlyIds[doc._id];\n          if (req.query.onlyTypesAndNames)\n            return !!req.query.onlyTypesAndNames[doc.type + "/" + doc.name];\n          return true;\n        }'},{name:"conflict_index",version:4,mapFn:"function(doc) { if (doc._conflicts) emit(doc._id); }"}]}},_versiondb_indexes:{configurable:!0,
enumerable:!0,get:function(){return[{name:"nameTypeFilter",version:3,filterFn:'function(doc, req) {\n          if (doc._id[0] === "_" || !req || !req.query) return true;\n          if (req.query.onlyIds) return !!req.query.onlyIds[doc._id];\n          if (req.query.onlyTypesAndNames) return !!req.query.onlyTypesAndNames[doc._id];\n          return true;\n        }'},{name:"conflict_index",version:4,mapFn:"function(doc) { if (doc._conflicts) emit(doc._id); }"}]}}});Be.ObjectDB=ei;var Hy=function(b,
e,l,a,f){f=void 0===f?{}:f;this.options=Object.assign({debug:!1,live:!1,method:"sync",replicationFilter:void 0},f);this.state="not started";this.method="";this.fromObjectDB=b;this.remoteCommitDB=e;this.remoteVersionDB=l;this.remoteLocation=a;this.deferred=Be.promise.deferred();this.conflicts=[];this.changes=[];this.errors=[]};Hy.prototype.whenPaused=function(){var b=this;return Promise.resolve().then(function(){return Be.promise.waitFor(function(){return b.isPaused||b.isComplete})}).then(function(){return b})};
Hy.prototype.waitForIt=function(){return this.deferred.promise};Hy.prototype.start=function(){this.isSynchonizing||this._startReplicationAndCopy().catch(function(b){return console.error("Error starting synchronization: ",b)});return this};Hy.prototype._startReplicationAndCopy=function(){function b(Ob){return"paused"===fc&&"paused"===Hb&&0>=La.copyCalls&&0>=La.copyCallsWaiting?Ob.state="paused":"complete"===fc&&"complete"===Hb&&La.isComplete()?Ob.state="complete":Ob.state="running"}function e(Ob,Zb){if(Zb.length||
"complete"===Hb&&"complete"===fc&&La.isComplete()){X.cancel();if(Zb.length){Ob.state="complete";Ob.errors=Zb;na.cancel();pa.cancel();var Hc=Error("Synchronization error:\n  "+Zb.join("\n  "));Hc.errors=Zb;console.log(Ob+" errored")}else console.log(Ob+" completed");Hc?Ob.deferred.reject(Hc):Ob.deferred.resolve(Ob)}}function l(Ob){if(!Ob.content)return null;var Zb=Ob.content.slice(0,2);Ob=Ob.content.slice(2);return Zb+"/"+Ob+".json"}var a=this,f,m,r,v,x,y,E,F,I,J,P,N,Y,W,da,va,za,L,Z,R,X,ja,fa,ua,
gb,hb,ta,na,pa,La,Hb,fc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ob){switch(Ob.nextAddress){case 1:f=a;m=f.fromObjectDB;r=f.remoteCommitDB;v=f.remoteVersionDB;x=f.remoteLocation;y=f.options;E=y.debug;F=void 0===y.live?!1:y.live;I=void 0===y.retry?!1:y.retry;J=y.method;P=y.replicationFilter;N=void 0===y.pushDesignDocToRemote?!1:y.pushDesignDocToRemote;if(Y=m.__versionDB){Ob.jumpTo(2);break}return Ob.yield(m._versionDB(),3);case 3:Y=Ob.yieldResult;case 2:W=Y;if(da=m.__commitDB){Ob.jumpTo(4);
break}return Ob.yield(m._commitDB(),5);case 5:da=Ob.yieldResult;case 4:va=da;za=m;L=za._commitdb_indexes;Z=za._versiondb_indexes;R=za.snapshotLocation;a.method=J;fa=L.find(function(Zb){return"nameTypeFilter"===Zb.name});ua=Z.find(function(Zb){return"nameTypeFilter"===Zb.name});if(!N){Ob.jumpTo(6);break}console.log("adding commitNameTypeFilter");return Ob.yield(r.addDesignDoc(fa),7);case 7:return console.log("adding versionNameTypeFilter"),Ob.yield(v.addDesignDoc(ua),6);case 6:return gb={live:F,retry:I},
hb=Object.assign({},gb),ta=Object.assign({},gb),P&&(hb.filter=eval("("+fa.filterFn+")"),hb.query_params=P,ta.filter=eval("("+ua.filterFn+")"),ta.query_params=P),na=va[J](r,hb),pa=W[J](v,ta),La={copyCalls:0,copyCallsWaiting:0,nFilesToCopy:0,nFilesCopied:0,stopped:!1,isComplete:function(){return this.stopped||0>=this.copyCalls&&0>=this.copyCallsWaiting}},fc=Hb="not started",a.versionReplication=pa,a.commitReplication=na,a.snapshotReplication=La,ja=r.pouchdb.changes({include_docs:!0,live:!0,conflicts:!0}),
X=v.pouchdb.changes({include_docs:!0,live:!0,conflicts:!0}),ja.on("change",function(Zb){var Hc=Zb.id,Gb=Zb.changes;Zb=Zb.doc._conflicts;E&&console.log("commit changes "+Hc+":",Gb,Zb);Zb&&(console.log("commit conflict "+Hc+":",Gb,Zb),a.conflicts.push({db:"commits",id:Hc,changes:Gb,conflicts:Zb}))}),X.on("change",function(Zb){var Hc=Zb.id,Gb=Zb.changes;Zb=Zb.doc._conflicts;E&&console.log("version changes "+Hc+":",Gb,Zb);Zb&&(console.log("version conflict "+Hc+":",Gb,Zb),a.conflicts.push({db:"versions",
id:Hc,changes:Gb,conflicts:Zb}))}),na.on("change",function(Zb){var Hc,Gb,dd,Gd,ma,Ga,Ja,vb,Vb,vd,ud;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Jc){switch(Jc.nextAddress){case 1:"replicateTo"===J?Zb={direction:"push",change:Zb}:"replicateFrom"===J&&(Zb={direction:"pull",change:Zb});Hc=Zb;Gb=Hc.direction;dd=Hc.change;Gd=dd.docs;console.log(a+" "+("push"===Gb?"send":"received")+" "+Gd.length+" commits");Jc.setCatchFinallyBlocks(2,3);Ga=[];Ja=$jscomp.makeIterator(Gd);for(vb=Ja.next();!vb.done;vb=
Ja.next())Vb=vb.value,Vb._id.startsWith("_")||(a.changes.push({direction:Gb,kind:"commits",id:Vb._id,type:Vb.type,name:Vb.name}),(vd=l(Vb))&&Ga.push(vd));La.nFilesToCopy+=Ga.length;if(!(0<La.copyCalls)){Jc.jumpTo(5);break}La.copyCallsWaiting++;return Jc.yield(Be.promise.waitFor(function(){return 0>=La.copyCalls}),6);case 6:La.copyCallsWaiting--;case 5:return La.copyCalls++,b(a),console.log(a+" copying "+Ga.length+" snapshots..."),Jc.yield(Be.promise.parallel(Ga.map(function(Re){return function(){var Le=
("push"===Gb?R:x).join(Re),Uh=("push"===Gb?x:R).join(Re);return La.stopped?(console.warn(a+" Stopping copying resources b/c synchronization ended ("+La.copyCalls+", "+Le.url+" => "+Uh.url+")"),Promise.resolve()):Uh.exists().then(function(th){function pj(hj){hj=void 0===hj?0:hj;return Le.copyTo(Uh).catch(function(qj){if(5<=hj)throw qj;return pj(hj+1)})}return th?(E&&console.log("Skip copying to "+Uh.url+", already exist"),Promise.resolve()):Le.exists().then(function(hj){if(!hj)return console.warn("Skip copying "+
Le.url+", does not exist"),Promise.resolve();E&&console.log(a+" Copying "+Le.url+" => "+Uh.url);return pj(0).then(function(qj){La.nFilesCopied++;La.stopped||0!==La.nFilesCopied%10||console.log(a+" copied "+La.nFilesCopied+" of "+La.nFilesToCopy+" snapshots");return qj})})})}}),5),7);case 7:console.log(a+" sending files done");case 3:Jc.enterFinallyBlock();La.copyCalls--;b(a);e(a,ma?[ma]:[]);Jc.leaveFinallyBlock(0);break;case 2:throw ud=Jc.enterCatchBlock(),console.error("error in commitReplication onChange",
ud),ma=ud,ud;}})}).on("paused",function(){Hb="paused";b(a);E&&console.log(a+" commit replication paused")}).on("active",function(){Hb="active";b(a);E&&console.log(a+" commit replication active")}).on("error",function(Zb){Hb="complete";b(a);console.error(a+" commit replication error",Zb);e(a,[Zb])}).on("complete",function(Zb){Hb="complete";b(a);Zb="sync"===J?Zb.push.errors.concat(Zb.pull.errors):Zb.errors;e(a,Zb)}),pa.on("change",function(Zb){"replicateTo"===J?Zb={direction:"push",change:Zb}:"replicateFrom"===
J&&(Zb={direction:"pull",change:Zb});var Hc=Zb.direction;Zb=Zb.change.docs;E&&console.log(a+" "+("push"===Hc?"send":"received")+" "+Zb.length+" histories");Zb.forEach(function(Gb){Gb._id.startsWith("_")||a.changes.push({direction:Hc,kind:"versions",id:Gb._id})})}).on("paused",function(){fc="paused";b(a);E&&console.log(a+" version replication paused")}).on("active",function(Zb){fc="active";b(a);E&&console.log(a+" version replication active",Zb)}).on("error",function(Zb){fc="complete";b(a);console.error(a+
" version replication error",Zb);e(a,[Zb])}).on("complete",function(Zb){fc="complete";b(a);Zb="sync"===J?Zb.push.errors.concat(Zb.pull.errors):Zb.errors;e(a,Zb)}),a.state="running",Ob.return(a)}})};Hy.prototype.safeStop=function(){var b=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){return 1==e.nextAddress?"not started"!==b.state&&b.isSynchonizing?e.yield(b.whenPaused(),2):e.return(b):e.return(b.stop())})};Hy.prototype.stop=function(){if("not started"===this.state||!this.isSynchonizing)return this;
this.commitReplication.cancel();this.versionReplication.cancel();this.snapshotReplication.stopped=!0;return this};Hy.prototype.toString=function(){var b=this.method;return"Synchronization("+this.state+": "+this.fromObjectDB.name+" "+("sync"===b?"<=>":"replicateTo"===b?"=>":"replicateFrom"===b?"<=":"??")+")"};$jscomp.global.Object.defineProperties(Hy.prototype,{isSynchonizing:{configurable:!0,enumerable:!0,get:function(){return this.isPaused||this.isRunning}},isComplete:{configurable:!0,enumerable:!0,
get:function(){return"complete"===this.state}},isRunning:{configurable:!0,enumerable:!0,get:function(){return"running"===this.state}},isPaused:{configurable:!0,enumerable:!0,get:function(){return"paused"===this.state}},changesByTypeAndName:{configurable:!0,enumerable:!0,get:function(){var b={push:{},pull:{}};this.changes.forEach(function(e){var l=e.direction,a=e.id,f=e.kind;if("_"!==a[0]){if("versions"===f)var m=b[l][a]||(b[l][a]=[]);else"commits"===f&&(a=e.type+"/"+e.name,m=b[l][a]||(b[l][a]=[]));
m.push(e)}});return b}}});Be.Synchronization=Hy;var nD={describe:function(b){function e(v,x){v=v.find(function(I){return I.name===x}).node.value.body;var y=v.body||[],E=(v.comments||[]).find(function(I){return I.end<y[0].start});v={name:x,parameters:[],sideEffect:!1,returns:null,description:""};if(E&&E.text.trim()){E=Be.string.changeIndent(E.text," ",0).split("\n");E=$jscomp.makeIterator(E);for(var F=E.next();!F.done;F=E.next()){F=F.value;if(F.startsWith("ignore-in-doc")){v.description="";break}F.startsWith("side effect:")?
v.sideEffect=JSON.parse(F.split(":")[1]):F.startsWith("returns:")?v.returns=F.split(":")[1].trim():v.description+=F+"\n"}}E=$jscomp.makeIterator(y);for(F=E.next();!F.done;F=E.next())if(F=F.value,"checkArgs"===Be.Path("declarations.0.init.callee.name").get(F)&&(F=Be.Path("declarations.0.id.properties").get(F)))v.parameters=F.map(function(I){return I.key.name});return v}var l=this,a,f,m,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){switch(v.nextAddress){case 1:v.setCatchFinallyBlocks(2);
if(l._methodSpecs){v.jumpTo(4);break}return v.yield(lively.modules.module("lively.storage/objectdb.js").source(),5);case 5:a=v.yieldResult,f=Be.parse(a,{withComments:!0}),m=Be.categorizer.findDecls(f),l._methodSpecs=m.filter(function(x){return x.parent&&"ObjectDBInterface"===x.parent.name});case 4:return v.return(b?e(l._methodSpecs,b):l._methodSpecs.map(function(x){return e(l._methodSpecs,x.name)}).filter(Boolean));case 2:return r=v.enterCatchBlock(),v.return("Error in describe "+r)}})},ensureDB:function(b){var e,
l,a,f;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){if(1==m.nextAddress)return e=Be.checkArgs(b,{db:"string",snapshotLocation:"string|Resource"}),l=e.db,a=e.snapshotLocation,m.yield(Be.ObjectDB.find(l),2);if(f=m.yieldResult)return m.return(!1);Be.ObjectDB.named(l,{snapshotLocation:a});return m.return(!0)})},destroyDB:function(b){var e,l,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){return 1==f.nextAddress?(e=Be.checkArgs(b,{db:"string"}),l=e.db,f.yield(Be.ObjectDB.find(l),
2)):3!=f.nextAddress?(a=f.yieldResult)?f.yield(a.destroy(),3):f.return(!1):f.return(!0)})},fetchCommits:function(b){var e,l,a,f,m,r,v,x,y,E,F,I,J,P,N,Y,W,da,va,za,L,Z,R,X,ja,fa,ua,gb,hb,ta,na,pa,La;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Hb){switch(Hb.nextAddress){case 1:return e=Be.checkArgs(b,{db:"string",ref:"string|undefined",type:"string|undefined",typesAndNames:"Array|undefined",knownCommitIds:"object|undefined",includeDeleted:"boolean|undefined",filterFn:"string|undefined"}),
l=e.db,a=e.ref,f=e.type,m=e.typesAndNames,r=e.knownCommitIds,v=e.includeDeleted,x=e.filterFn,Hb.yield(Be.ObjectDB.find(l),2);case 2:y=Hb.yieldResult;a||(a="HEAD");if(!y)throw Error("db "+l+" does not exist");if(y.__commitDB){Hb.jumpTo(3);break}return Hb.yield(y._commitDB(),4);case 4:case 3:if(E=y.__versionDB){Hb.jumpTo(5);break}return Hb.yield(y._versionDB(),6);case 6:E=Hb.yieldResult;case 5:F=E;I={};J={};if(m)for(P=I.keys=[],N=$jscomp.makeIterator(m),Y=N.next();!Y.done;Y=N.next())da=W=Y.value,va=
da.type,za=da.name,L=da.ref,P.push(va+"/"+za),L&&(J[va+"/"+za]=L);else f&&(I.startkey=f+'/\x00"',I.endkey=f+'/\uffff"');return Hb.yield(F.getAll(I),7);case 7:Z=Hb.yieldResult;R=[];X=$jscomp.makeIterator(Z);for(ja=X.next();!ja.done;ja=X.next())!(fa=ja.value)||fa.deleted||fa._deleted||(ua=fa,gb=ua._id,hb=ua.refs,gb.startsWith("_")||(ta=hb[J[gb]||a]||a,!ta||r&&r.hasOwnProperty(ta)||R.push(ta)));return Hb.yield(y.getCommitsWithIds(R),8);case 8:na=Hb.yieldResult;v||(na=na.filter(function(fc){return fc&&
!fc.deleted}));if(x)try{pa=eval("("+x+")");if("function"!==typeof pa)throw Error(x+" does not eval to a function!");La=na.filter(pa);if(Array.isArray(La))na=La;else throw Error(x+" does not return an array!");}catch(fc){console.error("fetchCommits filterFn failed:",fc)}return Hb.return(na)}})},fetchVersionGraph:function(b){var e,l,a,f,m,r,v,x;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){if(1==y.nextAddress)return e=Be.checkArgs(b,{db:"string",type:"string",name:"string"}),l=e.db,
a=e.type,f=e.name,y.yield(Be.ObjectDB.find(l),2);if(3!=y.nextAddress){m=y.yieldResult;if(!m)throw Error("db "+l+" does not exist");return y.yield(m.versionGraph(a,f),3)}r=y.yieldResult;v=r.refs;x=r.history;return y.return({refs:v,history:x})})},exists:function(b){var e,l,a,f,m,r,v,x;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){if(1==y.nextAddress)return e=Be.checkArgs(b,{db:"string",type:"string",name:"string",ref:"string|undefined"}),l=e.db,a=e.type,f=e.name,m=e.ref,y.yield(Be.ObjectDB.find(l),
2);if(3!=y.nextAddress)return r=y.yieldResult,y.yield(r.versionGraph(a,f),3);v=y.yieldResult;if(!v)return y.return({exists:!1,commitId:void 0});m=m||"HEAD";return(x=v.refs[m])?y.return({exists:!0,commitId:x}):y.return({exists:!1,commitId:void 0})})},fetchLog:function(b){var e,l,a,f,m,r,v,x,y,E,F,I,J,P,N,Y,W,da,va,za,L,Z;return $jscomp.asyncExecutePromiseGeneratorProgram(function(R){switch(R.nextAddress){case 1:return e=Be.checkArgs(b,{db:"string",type:"string|undefined",name:"string|undefined",ref:"string|undefined",
commit:"string|undefined",limit:"number|undefined",includeCommits:"boolean|undefined",knownCommitIds:"object|undefined"},function(X){return X.type&&X.name||X.commit?null:{error:"Eiter .type + .name or .commit needed!"}}),l=e.db,a=e.type,f=e.name,m=e.ref,r=e.commit,v=e.limit,x=e.includeCommits,y=e.knownCommitIds,R.yield(Be.ObjectDB.find(l),2);case 2:E=R.yieldResult;F=m||"HEAD";if(!E)throw Error("db "+l+" does not exist");v||(v=Infinity);r||m||(m=F);if(!r){R.jumpTo(3);break}I=r;if(a&&f){R.jumpTo(3);
break}return R.yield(E.getCommit(r),5);case 5:J=R.yieldResult;if(!J)throw Error("fetchLog: specified commit "+r+" but no commit with this id is in the database!");P=J;a=P.type;f=P.name;case 3:return R.yield(E.versionGraph(a,f),6);case 6:N=R.yieldResult;if(!N)throw Error("Unknown object "+a+"/"+f);Y=N;W=Y.refs;da=Y.history;I||(I=W[m]);va=I;for(za=[];za.length<v&&!za.includes(va);){za.push(va);L=da[va];if(!L||!L.length)break;Z=$jscomp.makeIterator(L);va=Z.next().value}if(!x){R.jumpTo(7);break}y&&(za=
za.filter(function(X){return!y.hasOwnProperty(X)}));return R.yield(E.getCommitsWithIds(za),8);case 8:za=R.yieldResult;case 7:return R.return(za)}})},fetchSnapshot:function(b){var e,l,a,f,m,r,v,x,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(E){switch(E.nextAddress){case 1:return e=Be.checkArgs(b,{db:"string",type:"string|undefined",name:"string|undefined",ref:"string|undefined",commit:"string|undefined"},function(F){return F.type&&F.name||F.commit?null:{error:"Eiter .type + .name or .commit needed!"}}),
l=e.db,a=e.type,f=e.name,m=e.ref,r=e.commit,E.yield(Be.ObjectDB.find(l),2);case 2:v=E.yieldResult;m=m||"HEAD";if(!v)throw Error("db "+l+" does not exist");if(r){E.jumpTo(3);break}return E.yield(v.versionGraph(a,f),4);case 4:x=E.yieldResult;if(!x)throw Error("Unknown object "+a+"/"+f);r=x.refs[m];if(!r)throw Error("Cannot find commit for ref "+m+" of "+a+"/"+f);case 3:return E.yield(v.getCommit(r),5);case 5:y=E.yieldResult;if(!y)throw Error("Cannot find commit "+r);return E.return(v.loadSnapshot(void 0,
void 0,y))}})},revert:function(b){var e,l,a,f,m,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(x){if(1==x.nextAddress)return e=Be.checkArgs(b,{db:"string",type:"string",name:"string",ref:"string|undefined",toCommitId:"string"}),l=e.db,a=e.type,f=e.name,m=e.ref,r=e.toCommitId,x.yield(Be.ObjectDB.find(l),2);v=x.yieldResult;m||(m="HEAD");return x.return(v.revert(a,f,m,r))})},commit:function(b){var e,l,a,f,m,r,v,x,y,E;return $jscomp.asyncExecutePromiseGeneratorProgram(function(F){if(1==
F.nextAddress)return e=Be.checkArgs(b,{db:"string",type:"string",name:"string",ref:"string|undefined",snapshot:"object|string|undefined",preview:"string|undefined",commitSpec:"object",expectedParentCommit:"string|undefined"}),l=e.db,a=e.type,f=e.name,m=e.ref,r=e.expectedParentCommit,v=e.commitSpec,x=e.snapshot,y=e.preview,F.yield(Be.ObjectDB.find(l),2);E=F.yieldResult;m||(m="HEAD");return F.return(E.commit(a,f,x,v,y,m,r))})},exportToSpecs:function(b){var e,l,a,f;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){if(1==
m.nextAddress)return e=Be.checkArgs(b,{db:"string",nameAndTypes:"Array|undefined",includeDeleted:"boolean|undefined"}),l=e.db,a=e.nameAndTypes,m.yield(Be.ObjectDB.find(l),2);f=m.yieldResult;if(!f)throw Error("db "+l+" does not exist");return m.return(f.exportToSpecs(a))})},exportToDir:function(b){var e,l,a,f,m,r,v,x;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){if(1==y.nextAddress)return e=Be.checkArgs(b,{db:"string",url:"string",nameAndTypes:"Array|undefined",copyResources:"boolean|undefined",
includeDeleted:"boolean|undefined"}),l=e.db,a=e.url,f=e.nameAndTypes,m=e.copyResources,r=e.includeDeleted,y.yield(Be.ObjectDB.find(l),2);v=y.yieldResult;if(!v)throw Error("db "+l+" does not exist");try{x=Be.resource(a)}catch(E){x=Be.resource(System.baseURL).join(a)}return y.return(v.exportToDir(x,f,m,r))})},importFromDir:function(b){var e,l,a,f,m,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(x){if(1==x.nextAddress)return e=Be.checkArgs(b,{db:"string",url:"string",overwrite:"boolean|undefined",
copyResources:"boolean|undefined"}),l=e.db,a=e.url,f=e.overwrite,m=e.copyResources,x.yield(Be.ObjectDB.find(l),2);r=x.yieldResult;if(!r)throw Error("db "+l+" does not exist");try{v=Be.resource(a)}catch(y){v=Be.resource(System.baseURL).join(a)}return x.return(r.importFromDir(v,f,m))})},importFromSpecs:function(b){var e,l,a,f,m,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){if(1==v.nextAddress)return e=Be.checkArgs(b,{db:"string",specs:"object",overwrite:"boolean|undefined",copyResources:"boolean|undefined"}),
l=e.db,a=e.specs,f=e.overwrite,m=e.copyResources,v.yield(Be.ObjectDB.find(l),2);r=v.yieldResult;if(!r)throw Error("db "+l+" does not exist");return v.return(r.importFromSpecs(a,f,m))})},importFromResource:function(b){var e,l,a,f,m,r,v,x,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(E){if(1==E.nextAddress)return e=Be.checkArgs(b,{db:"string",type:"string",name:"string",url:"string",commitSpec:"object",purgeHistory:"boolean|undefined"}),l=e.db,a=e.type,f=e.name,m=e.url,r=e.commitSpec,
v=e.purgeHistory,E.yield(Be.ObjectDB.find(l),2);x=E.yieldResult;if(!x)throw Error("db "+l+" does not exist");try{y=Be.resource(m)}catch(F){y=Be.resource(System.baseURL).join(m)}return E.return(x.importFromResource(a,f,y,r,v))})},delete:function(b){var e,l,a,f,m,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){if(1==v.nextAddress)return e=Be.checkArgs(b,{db:"string",type:"string",name:"string",dryRun:"boolean|undefined"}),l=e.db,a=e.type,f=e.name,m=e.dryRun,v.yield(Be.ObjectDB.find(l),
2);r=v.yieldResult;return v.return(r.delete(a,f,"undefined"===typeof m||m))})},deleteCommit:function(b){var e,l,a,f,m;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){if(1==r.nextAddress)return e=Be.checkArgs(b,{db:"string",commit:"string",dryRun:"boolean|undefined"}),l=e.db,a=e.commit,f=e.dryRun,r.yield(Be.ObjectDB.find(l),2);m=r.yieldResult;return r.return(m.deleteCommit(a,"undefined"===typeof f||f))})},fetchConflicts:function(b){var e,l,a,f,m;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){if(1==
r.nextAddress)return e=Be.checkArgs(b,{db:"string",includeDocs:"boolean|undefined",only:"object|undefined"}),l=e.db,a=e.includeDocs,f=e.only,r.yield(Be.ObjectDB.find(l),2);m=r.yieldResult;return r.return(m.getConflicts(a,f))})},resolveConflict:function(b){var e,l,a,f,m,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(x){if(1==x.nextAddress)return e=Be.checkArgs(b,{db:"string",id:"string",kind:"string",delete:"Array",resolved:"object"}),l=e.db,a=e.resolved,f=e.delete,m=e.kind,r=e.id,
x.yield(Be.ObjectDB.find(l),2);v=x.yieldResult;return x.return(v.resolveConflict({resolved:a,delete:f,kind:m,id:r}))})},fetchDiff:function(b){var e,l,a,f;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){if(1==m.nextAddress)return e=Be.checkArgs(b,{db:"string",otherDB:"string"}),l=e.db,a=e.otherDB,m.yield(Be.ObjectDB.find(l),2);f=m.yieldResult;return m.return(f.getDiff(a))})},synchronize:function(b){var e,l,a,f,m,r,v,x,y,E,F,I,J;return $jscomp.asyncExecutePromiseGeneratorProgram(function(P){switch(P.nextAddress){case 1:return e=
Be.checkArgs(b,{db:"string",otherDB:"string",otherDBSnapshotLocation:"string|undefined",onlyTypesAndNames:"object|undefined",method:"string|undefined"}),l=e.db,a=e.otherDB,f=e.otherDBSnapshotLocation,m=e.onlyTypesAndNames,r=e.method,P.yield(Be.ObjectDB.find(l),2);case 2:return f||(f=a.replace(/\/$/,"")+"/snapshots"),r||(r="replicateTo"),P.yield(Be.ObjectDB.find(l),3);case 3:return v=P.yieldResult,P.yield(Be.ObjectDB.named(a,{snapshotLocation:f}),4);case 4:return x=P.yieldResult,P.yield(x._commitDB(),
5);case 5:return y=P.yieldResult,P.yield(x._versionDB(),6);case 6:return E=P.yieldResult,F=x.snapshotLocation,I={replicationFilter:m?{onlyTypesAndNames:m}:void 0,retry:!0,live:!0},J=v[r](y,E,F,I),P.yield(J.whenPaused(),7);case 7:return P.yield(J.safeStop(),8);case 8:return P.yield(J.waitForIt(),9);case 9:return P.return(Be.obj.select(J,["state","method","conflicts","errors","changesByTypeAndName"]))}})}};Be.ObjectDBInterface=nD;Be.ObjectDBInterface=nD;Be.ObjectDBInterface=nD;var yk=function(b){this.serverURL=
b=void 0===b?document.location.origin+"/objectdb/":b};yk.prototype._processResponse=function(b){var e,l,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){if(1==f.nextAddress)return e=b.headers.get("content-type"),f.yield(b.text(),2);l=f.yieldResult;if("application/json"===e)try{a=JSON.parse(l)}catch(m){}if(!b.ok||a&&a.error)throw Error(a&&a.error||l||b.statusText);return f.return(a||l)})};yk.prototype._GET=function(b,e){e=void 0===e?{}:e;var l=this,a,f,m,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){return 1==
v.nextAddress?(a=Object.keys(e).map(function(x){var y=e[x];"object"===typeof y&&(y=JSON.stringify(y));return x+"="+encodeURIComponent(y)}).join("&"),f=l.serverURL+b+"?"+a,m=l,r=m._processResponse,v.yield(fetch(f),2)):v.return(r.call(m,v.yieldResult))})};yk.prototype._POST=function(b,e){e=void 0===e?{}:e;var l=this,a,f,m;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){return 1==r.nextAddress?(a=l.serverURL+b,f=l,m=f._processResponse,r.yield(fetch(a,{method:"POST",body:JSON.stringify(e),
headers:{"content-type":"application/json"}}),2)):r.return(m.call(f,r.yieldResult))})};yk.prototype.describe=function(b){var e=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){return l.return(e._GET("describe",b))})};yk.prototype.ensureDB=function(b){var e=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){return l.return(e._POST("ensureDB",b))})};yk.prototype.destroyDB=function(b){var e=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){return l.return(e._POST("destroyDB",
b))})};yk.prototype.fetchCommits=function(b){var e=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){return l.return(e._GET("fetchCommits",b))})};yk.prototype.fetchVersionGraph=function(b){var e=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){return l.return(e._GET("fetchVersionGraph",b))})};yk.prototype.exists=function(b){var e=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){return l.return(e._GET("exists",b))})};yk.prototype.fetchLog=function(b){var e=
this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){return l.return(e._GET("fetchLog",b))})};yk.prototype.fetchSnapshot=function(b){var e=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){return l.return(e._GET("fetchSnapshot",b))})};yk.prototype.revert=function(b){var e=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){return l.return(e._POST("revert",b))})};yk.prototype.commit=function(b){var e=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){return l.return(e._POST("commit",
b))})};yk.prototype.exportToSpecs=function(b){var e=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){return l.return(e._GET("exportToSpecs",b))})};yk.prototype.exportToDir=function(b){var e=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){return l.return(e._POST("exportToDir",b))})};yk.prototype.importFromDir=function(b){var e=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){return l.return(e._POST("importFromDir",b))})};yk.prototype.importFromSpecs=
function(b){var e=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){return l.return(e._POST("importFromSpecs",b))})};yk.prototype.importFromResource=function(b){var e=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){return l.return(e._POST("importFromResource",b))})};yk.prototype.delete=function(b){var e=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){return l.return(e._POST("delete",b))})};yk.prototype.deleteCommit=function(b){var e=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){return l.return(e._POST("deleteCommit",
b))})};yk.prototype.fetchConflicts=function(b){var e=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){return l.return(e._GET("fetchConflicts",b))})};yk.prototype.resolveConflict=function(b){var e=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){return l.return(e._POST("resolveConflict",b))})};yk.prototype.fetchDiff=function(b){var e=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){return l.return(e._GET("fetchDiff",b))})};yk.prototype.synchronize=
function(b){var e=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){return l.return(e._POST("synchronize",b))})};Be.ObjectDBHTTPInterface=yk;Be.default=ei;var zk=lively.FreezerRuntime.recorderFor("lively.storage/storage-resource.js");zk.applyExclude=function(b,e){return e?"string"===typeof e?!b.url.includes(e):"function"===typeof e?!e(b):e instanceof RegExp?!e.test(b.url):!0:!0};zk.Resource=Pg;zk.Database=zh;zk.debug=!1;zk.slashRe=/\//g;var fZ=function(){return zk.Database.apply(this,
arguments)||this};$jscomp.inherits(fZ,zk.Database);fZ.ensureDB=function(b,e){return zk.Database.ensureDB.call(this,"lively.storage-"+b,e)};zk.StorageDatabase=fZ;var Vr=function(){return zk.Resource.apply(this,arguments)||this};$jscomp.inherits(Vr,zk.Resource);Vr.prototype.read=function(){var b=this,e,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){if(1==a.nextAddress)return zk.debug&&console.log("["+b+"] read"),a.yield(b.db.get(b.pathWithoutQuery()),2);l=(e=a.yieldResult)&&e.content;
return a.return(l?"string"===typeof l?l:JSON.stringify(l):"")})};Vr.prototype.readJson=function(){var b=this,e;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){if(1==l.nextAddress)return l.yield(b.read(),2);e=l.yieldResult;return l.return("string"===typeof e?JSON.parse(e):e)})};Vr.prototype.write=function(b){var e=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){if(1==l.nextAddress){zk.debug&&console.log("["+e+"] write");b||(b="");if(e.isDirectory())throw Error("Cannot write into a directory! ("+
e.url+")");return l.yield(e.db.update(e.pathWithoutQuery(),function(a){if(a&&a.isDirectory)throw Error(e.url+" already exists and is a directory (cannot write into it!)");var f=Date.now();return a?Object.assign({},a,{lastModified:f,size:b.length,content:b}):{etag:void 0,type:void 0,contentType:void 0,user:void 0,group:void 0,mode:void 0,lastModified:f,created:f,size:"string"===typeof b?b.length:0,content:b}}),2)}return l.return(e)})};Vr.prototype.writeJson=function(b){return this.write(b)};Vr.prototype.mkdir=
function(){var b=this,e,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){if(1==a.nextAddress){zk.debug&&console.log("["+b+"] mkdir");if(!b.isDirectory())throw Error("Cannot mkdir a file! ("+b.url+")");return a.yield(b.db.get(b.pathWithoutQuery()),2)}if(3!=a.nextAddress){if(e=a.yieldResult){if(!e.isDirectory)throw Error(b.url+" already exists and is a file (cannot mkdir it!)");return a.return(b)}l=Date.now();return a.yield(b.db.set(b.pathWithoutQuery(),{etag:void 0,type:void 0,contentType:void 0,
user:void 0,group:void 0,mode:void 0,lastModified:l,created:l,isDirectory:!0}),3)}return a.return(b)})};Vr.prototype.exists=function(){var b=this,e;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){if(1==l.nextAddress)return zk.debug&&console.log("["+b+"] exists"),(e=b.isRoot())?l.jumpTo(2):l.yield(b.db.get(b.pathWithoutQuery()),3);2!=l.nextAddress&&(e=!!l.yieldResult);return l.return(e)})};Vr.prototype.remove=function(){var b=this,e,l,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){return 1==
f.nextAddress?(zk.debug&&console.log("["+b+"] remove"),e=b.pathWithoutQuery(),l=b.db,f.yield(l.docList({startkey:e,endkey:e+"\uffff"}),2)):3!=f.nextAddress?(a=f.yieldResult,f.yield(l.setDocuments(a.map(function(m){return{_id:m.id,_rev:m.rev,_deleted:!0}})),3)):f.return(b)})};Vr.prototype.readProperties=function(){zk.debug&&console.log("["+this+"] readProperties");return this.db.get(this.pathWithoutQuery())};Vr.prototype.dirList=function(b,e){b=void 0===b?1:b;e=void 0===e?{}:e;var l=this,a,f,m,r,v,
x,y,E,F,I,J,P,N,Y,W;return $jscomp.asyncExecutePromiseGeneratorProgram(function(da){if(1==da.nextAddress){zk.debug&&console.log("["+l+"] dirList");if(!l.isDirectory())return da.return(l.asDirectory().dirList(b,e));a=e;f=a.exclude;m=l.pathWithoutQuery();r=[];return da.yield(l.db.getAll({startkey:m,endkey:m+"\uffff"}),2)}v=da.yieldResult;"infinity"===b&&(b=Infinity);x={};for(y=0;y<v.length;x={$jscomp$loop$prop$dirToChild$2663:x.$jscomp$loop$prop$dirToChild$2663},y++)if(F=E=v[y],I=F._id,I.startsWith(m)&&
m!==I)if(J=I.slice(m.length),P=J.includes("/")?J.match(zk.slashRe).length+1:1,P>b)x.$jscomp$loop$prop$dirToChild$2663=l.join(J.split("/").slice(0,b).join("/")+"/"),r.some(function(va){return function(za){return za.equals(va.$jscomp$loop$prop$dirToChild$2663)}}(x))||r.push(x.$jscomp$loop$prop$dirToChild$2663);else if(N=l.join(J),!f||zk.applyExclude(N,f))for(r.push(N),Y="created lastModified mode group user contentType type etag size".split(" "),W=0;W<Y.length;W++)N[Y[W]]=E[Y[W]];return da.return(r)})};
$jscomp.global.Object.defineProperties(Vr.prototype,{canDealWithJSON:{configurable:!0,enumerable:!0,get:function(){return!0}},db:{configurable:!0,enumerable:!0,get:function(){return this._db||(this._db=zk.StorageDatabase.ensureDB(this.host()))}}});zk.LivelyStorageResource=Vr;var gZ={name:"lively.storage",matches:function(b){return b.startsWith("lively.storage:")},resourceClass:zk.LivelyStorageResource};zk.resourceExtension=gZ;zk.resourceExtension=gZ;zk.resourceExtension=gZ;zk.registerExtension=M;
zk.registerExtension(zk.resourceExtension);zk.default=Vr;var Xu=lively.FreezerRuntime.recorderFor("lively.storage/index.js");Xu.default=zh;Xu.Database=zh;Xu.ObjectDB=ei;Xu.ObjectDBInterface=nD;Xu.ObjectDBHTTPInterface=yk;Xu.ObjectDB=ei;Xu.ObjectDB=ei;Xu.ObjectDBInterface=nD;Xu.ObjectDBInterface=nD;Xu.ObjectDBHTTPInterface=yk;Xu.ObjectDBHTTPInterface=yk;var Awa=Object.freeze({__proto__:null,Database:zh,ObjectDB:ei,ObjectDBInterface:nD,ObjectDBHTTPInterface:yk}),hh=lively.FreezerRuntime.recorderFor("lively.morphic/morphicdb/db.js");
hh.convertToSerializableCommit=CV;hh.ensureCommitInfo=eI;hh.ObjectDBHTTPInterface=yk;hh.Database=zh;hh.loadMorphFromSnapshot=vw;hh.createMorphSnapshot=xC;hh.resource=A;hh.obj=ng;hh.Path=Ih;hh.arr=Mf;hh.string=Th;hh.morphicDBs=hh.morphicDBs||(hh.morphicDBs=new Map);hh.getDefaultServerUrl=function(){return hh.resource("undefined"!==typeof document?window.SERVER_URL||System.baseURL:"http://localhost:9001").join("objectdb/").url};hh.convertToSerializableCommit=CV;hh.convertToSerializableCommit=CV;hh.ensureCommitInfo=
eI;hh.ensureCommitInfo=eI;var hZ=function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/morphicdb/db.js"),l=e.hasOwnProperty("MorphicDB")&&"function"===typeof e.MorphicDB?e.MorphicDB:e.MorphicDB=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Pb(l,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a,f){var m=f.snapshotLocation;f=f.serverURL;this.name=a;this.serverURL=f;this.snapshotLocation=
m||a+"/snapshots/";this.httpDB=new hh.ObjectDBHTTPInterface(f);this._initialized=!1}},{key:"__serialize__",value:function(){return{__expr__:'MorphicDB.named("'+this.name+'", {snapshotLocation: "'+this.snapshotLocation+'", serverURL: "'+this.serverURL+'"})',bindings:{"lively.morphic/morphicdb/index.js":["MorphicDB"]}}}},{key:"initializeIfNecessary",value:function(){var a=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){if(1==f.nextAddress)return a._initialized?f.return():f.yield(a.ensureDB(),
2);a._initialized=!0;f.jumpToEnd()})}},{key:"snapshotResourceFor",value:function(a){var f=a.content.slice(0,2);a=a.content.slice(2);return hh.resource(System.decanonicalize(this.snapshotLocation)).join(f+"/"+a+".json")}},{key:"ensureDB",value:function(){return this.httpDB.ensureDB({db:this.name,snapshotLocation:this.snapshotLocation})}},{key:"destroyDB",value:function(){this._initialized=!1;return this.httpDB.destroyDB({db:this.name})}},{key:"latestCommits",value:function(a,f){a=void 0===a?"world":
a;f=void 0===f?!1:f;var m=this,r,v,x;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){if(1==y.nextAddress)return y.yield(m.initializeIfNecessary(),2);r=m;v=r.name;x={};return y.return(m.httpDB.fetchCommits({db:v,type:a,ref:"HEAD",knownCommitIds:x,includeDeleted:f}))})}},{key:"fetchCommit",value:function(a,f,m){var r=this,v,x;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){if(1==y.nextAddress)return y.yield(r.initializeIfNecessary(),2);if(3!=y.nextAddress)return v=[{type:a,
name:f,ref:m}],y.yield(r.httpDB.fetchCommits({db:r.name,ref:m,type:a,typesAndNames:v,knownCommitIds:{}}),3);x=y.yieldResult;return y.return(hh.convertToSerializableCommit(x[0]))})}},{key:"fetchSnapshot",value:function(a,f,m,r){var v=this,x=arguments,y,E,F;return $jscomp.asyncExecutePromiseGeneratorProgram(function(I){if(1==I.nextAddress)return y=a,1===x.length&&y.type&&y.name&&(a=y.type,f=y.name,m=y._id),I.yield(v.initializeIfNecessary(),2);E=v;F=E.name;return I.return(v.httpDB.fetchSnapshot({db:F,
type:a,name:f,ref:r,commit:m}))})}},{key:"exists",value:function(a,f,m){var r=this,v,x;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){if(1==y.nextAddress)return y.yield(r.initializeIfNecessary(),2);v=r;x=v.name;return y.return(r.httpDB.exists({db:x,type:a,name:f,ref:m}))})}},{key:"history",value:function(a,f){var m=this,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(x){if(1==x.nextAddress)return x.yield(m.initializeIfNecessary(),2);r=m;v=r.name;return x.return(m.httpDB.fetchVersionGraph({db:v,
type:a,name:f}))})}},{key:"log",value:function(a,f,m,r){m=void 0===m?!1:m;var v=this,x,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(E){return 1==E.nextAddress?E.yield(v.initializeIfNecessary(),2):3!=E.nextAddress?(x=v,y=x.name,E.yield(v.httpDB.fetchLog({db:y,commit:a,limit:f,includeCommits:m,knownCommitIds:r}),3)):E.return(E.yieldResult.map(hh.convertToSerializableCommit))})}},{key:"revert",value:function(a,f,m,r){r=void 0===r?"HEAD":r;var v=this,x,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(E){if(1==
E.nextAddress)return E.yield(v.initializeIfNecessary(),2);x=v;y=x.name;return E.return(v.httpDB.revert({db:y,type:a,name:f,toCommitId:m,ref:r}))})}},{key:"snapshotAndCommit",value:function(a,f,m,r,v,x,y){var E=this,F,I;return $jscomp.asyncExecutePromiseGeneratorProgram(function(J){if(1==J.nextAddress)return J.yield(hh.createMorphSnapshot(m,r),2);if(3!=J.nextAddress)return F=J.yieldResult,J.yield(E.commit(a,f,F,v,x,y),3);I=J.yieldResult;I=hh.convertToSerializableCommit(I);m.changeMetaData("commit",
hh.obj.dissoc(I,["preview"]),!0,!1);return J.return(I)})}},{key:"commit",value:function(a,f,m,r,v,x){var y=this,E=arguments,F,I,J;return $jscomp.asyncExecutePromiseGeneratorProgram(function(P){if(1==P.nextAddress)return F=a,1===E.length&&F.type&&F.name&&(a=F.type,f=F.name,m=F.snapshot||F.content,r=hh.obj.dissoc(F,["snapshot","_rev","_id","ancestors","deleted"]),x=F._id),P.yield(y.initializeIfNecessary(),2);I=y;J=I.name;return P.return(y.httpDB.commit({db:J,type:a,name:f,ref:v,expectedParentCommit:x,
commitSpec:r,snapshot:m}))})}},{key:"load",value:function(a,f,m,r,v){var x=this,y,E,F,I,J,P,N;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Y){switch(Y.nextAddress){case 1:"object"===typeof a?r=a:y=a;E=r;if(!E)return Y.yield(x.fetchCommit(y,f,v),6);if("string"!==typeof E){Y.jumpTo(3);break}F=$jscomp;I=F.makeIterator;return Y.yield(x.log(E,1,!0),5);case 5:J=I.call(F,Y.yieldResult);E=J.next().value;Y.jumpTo(3);break;case 6:E=Y.yieldResult;case 3:return Y.yield(x.fetchSnapshot(void 0,void 0,
E._id),7);case 7:return P=Y.yieldResult,Y.yield(hh.loadMorphFromSnapshot(P,m),8);case 8:return N=Y.yieldResult,E=hh.convertToSerializableCommit(E),N.changeMetaData("commit",hh.obj.dissoc(E,["preview"]),!0,!1),Y.return(N)}})}},{key:"fetchDiff",value:function(a){var f=this,m,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){if(1==v.nextAddress)return v.yield(f.initializeIfNecessary(),2);m=f;r=m.name;return v.return(f.httpDB.fetchDiff({db:r,otherDB:a}))})}},{key:"fetchConflicts",value:function(a,
f){var m=this,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(x){if(1==x.nextAddress)return x.yield(m.initializeIfNecessary(),2);r=m;v=r.name;return x.return(m.httpDB.fetchConflicts({db:v,includeDocs:a,only:f}))})}},{key:"resolveConflict",value:function(a){var f=this,m,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){if(1==v.nextAddress)return v.yield(f.initializeIfNecessary(),2);m=f;r=m.name;return v.return(f.httpDB.resolveConflict(Object.assign({db:r},a)))})}},{key:"synchronize",
value:function(a){var f=a.method,m=a.otherDB,r=a.otherDBSnapshotLocation,v=a.onlyTypesAndNames,x=this,y,E;return $jscomp.asyncExecutePromiseGeneratorProgram(function(F){if(1==F.nextAddress)return F.yield(x.initializeIfNecessary(),2);y=x;E=y.name;return F.return(x.httpDB.synchronize({db:E,method:f,otherDB:m,otherDBSnapshotLocation:r,onlyTypesAndNames:v}))})}},{key:"softDelete",value:function(a,f,m,r,v){var x=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){return y.return(x.commit(a,
f,void 0,m,r,v))})}},{key:"delete",value:function(a,f,m){m=void 0===m?!0:m;var r=this,v,x;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){if(1==y.nextAddress)return y.yield(r.initializeIfNecessary(),2);v=r;x=v.name;return y.return(r.httpDB.delete({db:x,type:a,name:f,dryRun:m}))})}},{key:"deleteCommit",value:function(a,f){f=void 0===f?!0:f;var m=this,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(x){if(1==x.nextAddress)return x.yield(m.initializeIfNecessary(),2);r=m;
v=r.name;return x.return(m.httpDB.deleteCommit({db:v,commit:a,dryRun:f}))})}},{key:"codeSearchInPackages",value:function(a,f,m,r){f=void 0===f?"part":f;var v=this,x,y,E,F,I,J,P;return $jscomp.asyncExecutePromiseGeneratorProgram(function(N){switch(N.nextAddress){case 1:return N.yield(v.latestCommits(f),2);case 2:x=N.yieldResult,y=[],E=0,"function"===typeof r&&(x=x.filter(r)),F=$jscomp.makeIterator(x),I=F.next();case 3:if(I.done){N.jumpTo(5);break}J=I.value;"function"===typeof m&&m(J.name,E++,x.length);
return N.yield(v._textSearchInSnapshotOfCommit(a,J),6);case 6:P=N.yieldResult;P.length&&y.push.apply(y,$jscomp.arrayFromIterable(P));I=F.next();N.jumpTo(3);break;case 5:return N.return(y)}})}},{key:"_textSearchInSnapshotOfCommit",value:function(a,f,m){var r=this,v,x,y,E;return $jscomp.asyncExecutePromiseGeneratorProgram(function(F){if(1==F.nextAddress)return v=f,x=v._id,(y=m)?F.jumpTo(2):F.yield(r.fetchSnapshot(void 0,void 0,x),3);2!=F.nextAddress&&(y=F.yieldResult);E=y;return F.return((new hh.SnapshotPackageHelper(E)).textSearch(a,
f))})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"MorphicDB"}},{key:"default",get:function(){return this.named("lively.morphic/objectdb/morphicdb",{serverURL:hh.getDefaultServerUrl()})}},{key:"named",value:function(a,f){var m=hh.morphicDBs.get(a);if(m)return m;if(!f.serverURL)throw Error("Needs serverURL!");f=new this(a,f);hh.morphicDBs.set(a,f);return f}},{key:"wellKnownMorphicDBs",value:function(){var a=this,f,m,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){if(1==
v.nextAddress)return f=hh.Database.ensureDB("lively.morphic/morphicdb/well-known-morphic-dbs"),v.yield(f.getAll(),2);m=v.yieldResult;r=m.reduce(function(x,y){var E={};return Object.assign(x,(E[y._id]=a.named(y.name,{serverURL:y.serverURL,snapshotLocation:y.snapshotLocation}),E))},{});r.default||(r.default=a.default);return v.return(r)})}},{key:"addWellKnownMorphicDB",value:function(a,f){var m,r,v,x,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(E){m=f;r=m.name;v=m.snapshotLocation;
x=m.serverURL;y=hh.Database.ensureDB("lively.morphic/morphicdb/well-known-morphic-dbs");return E.yield(y.set(a,{name:r,snapshotLocation:v,serverURL:x}),0)})}},{key:"removeWellKnownMorphicDB",value:function(a){var f;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){f=hh.Database.ensureDB("lively.morphic/morphicdb/well-known-morphic-dbs");return m.yield(f.remove(a),0)})}}],e,{pathInPackage:function(){return"morphicdb/db.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:1570,end:10352})}(void 0);hZ=hh.MorphicDB;var Xw=Ha("Y",hZ),rQ=function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/morphicdb/db.js"),l=e.hasOwnProperty("SnapshotPackageHelper")&&"function"===typeof e.SnapshotPackageHelper?e.SnapshotPackageHelper:e.SnapshotPackageHelper=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return Pb(l,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){this.snapshot=a}},{key:"textSearch",value:function(a,f){var m=a&&a instanceof RegExp,r=[];if(!a)return r;for(var v={},x=$jscomp.makeIterator(this.filesInPackages()),y=x.next();!y.done;v={$jscomp$loop$prop$file$2665:v.$jscomp$loop$prop$file$2665},y=x.next()){v.$jscomp$loop$prop$file$2665=y.value;y=v.$jscomp$loop$prop$file$2665.get(this.snapshot);var E=hh.string.lineIndexComputer(y),F=hh.string.lineRanges(y);
if(m)y=hh.string.reMatches(y,a),y.length&&r.push.apply(r,$jscomp.arrayFromIterable(y.map(function(da){return function(va){return Object.assign(va,{commit:f,file:da.$jscomp$loop$prop$file$2665})}}(v))));else for(var I=0,J=0;0<=(I=y.indexOf(a));){var P=I+J,N=P+a.length,Y=E(P),W=y.slice.apply(y,$jscomp.arrayFromIterable(F[Y]));r.push({match:a,start:P,end:N,length:a.length,line:Y,lineString:W,commit:f,file:v.$jscomp$loop$prop$file$2665});J+=I+a.length;y=y.slice(I+a.length)}}return r}},{key:"filesInPackages",
value:function(){function a(r,v,x,y,E){E=void 0===E?[]:E;if(r["package.json"]&&"string"===typeof r["package.json"])try{var F=JSON.parse(r["package.json"]);y={url:x,path:v,name:F.name||hh.arr.last(v)}}catch(J){}F=[];for(var I in r)"string"===typeof r[I]?E.push({path:v.concat(I),url:hh.string.joinPath(x,I),package:y,get:function(J){return hh.Path(this.path).get(J.packages)},set:function(J,P){hh.Path(this.path).set(J.packages,P)}}):F.push(I);F.forEach(function(J){return a(r[J],v.concat(J),hh.string.joinPath(x,
J),y,E)});return E}var f=[],m;for(m in this.snapshot.packages)a(this.snapshot.packages[m],[m],m,null,f);return f}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"SnapshotPackageHelper"}}],e,{pathInPackage:function(){return"morphicdb/db.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:10361,end:13434})}(void 0);hh.SnapshotPackageHelper=
rQ;hh.SnapshotPackageHelper=rQ;hh.SnapshotPackageHelper=rQ;hh.default=hZ;var Sd=lively.FreezerRuntime.recorderFor("lively.morphic/style-guide.js");Sd.ensureAbsoluteComponentRefs=function(b){var e=b.snapshotAndPackages,l=void 0===b.localComponents?fI(snapshot):b.localComponents,a=void 0===b.localWorldName?Ih("metadata.commit.name").get($world):b.localWorldName;Object.values(e.packages["local://lively-object-modules/"]||{}).forEach(function(f){Object.entries(f).forEach(function(m){var r=$jscomp.makeIterator(m);
m=r.next().value;r=r.next().value;if(!m.endsWith(".json")){var v=Sd.ast.parse(r),x=[];Sd.ast.AllNodesVisitor.run(v,function(y,E){"Literal"===y.type&&"string"===typeof y.value&&(y.value.match(/^styleguide:\/\/\$world\/.+/)&&!l.includes(y.value.replace("styleguide://$world/",""))&&x.push({target:y,replacementFunc:function(){return JSON.stringify(y.value.replace("$world",a))}}),y.value.match(/^part:\/\/\$world\/.+/)&&!l.includes(y.value.replace("part://$world/",""))&&x.push({target:y,replacementFunc:function(){return JSON.stringify(y.value.replace("$world",
a))}}))});f[m]=Sd.ast.transform.replaceNodes(x,r).source}})})};Sd.findLocalComponents=fI;Sd.prefetchCoreStyleguides=rN;Sd.getProjectName=function(b){return Sd.Path("metadata.commit.name").get(b)||b.name};Sd.clearSnapshot=DV;Sd.arr=Mf;Sd.properties=Kr;Sd.Path=Ih;Sd.promise=hg;Sd.obj=ng;Sd.registerExtension=M;Sd.Resource=Pg;Sd.resource=A;Sd.pt=Ei;Sd.MorphicDB=Xw;Sd.ObjectPool=Vj;Sd.allPlugins=Jw;Sd.normalizeOptions=ep;Sd.deserializeMorph=hI;Sd.loadPackagesAndModulesOfSnapshot=iI;Sd.subscribeOnce=On;
Sd.once=cp;Sd.ast=qO;Sd.findLocalComponents=fI;Sd.findLocalComponents=fI;var sQ=function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/style-guide.js"),l=e.hasOwnProperty("StyleguidePlugin")&&"function"===typeof e.StyleguidePlugin?e.StyleguidePlugin:e.StyleguidePlugin=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Pb(l,b,[{key:"afterSerialization",value:function(a,f,m){var r={},v="styleguide://"+Sd.getProjectName($world);
Sd.findLocalComponents(f).forEach(function(x){return r[v+"/"+x]="styleguide://$world/"+x});Object.values(f).forEach(function(x){if((x=x.props.master)&&x.value){for(var y in r)x.value.includes(y)&&(x.value=x.value.split(y).join(r[y]));x.value=x.value.split(v).join("styleguide://$world")}})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"StyleguidePlugin"}}],e,{pathInPackage:function(){return"style-guide.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:3123,end:4008})}(void 0);Sd.StyleguidePlugin=sQ;Sd.StyleguidePlugin=sQ;Sd.StyleguidePlugin=sQ;Sd.prefetchCoreStyleguides=rN;Sd.prefetchCoreStyleguides=rN;var tQ=function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/style-guide.js"),l=e.hasOwnProperty("ComponentPolicy")&&"function"===typeof e.ComponentPolicy?e.ComponentPolicy:e.ComponentPolicy=
function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Pb(l,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a,f){this.derivedMorph=a;this._overriddenProps=new WeakMap;if(f.isMorph||"string"===typeof f)this.auto=f,f.isMorph&&(this.auto.isComponent=!0),"string"===typeof f&&this.resolveMasterComponents();else{a=f.click;var m=f.auto,r=f.hover,v=void 0===f.light?{}:f.light;f=void 0===f.dark?{}:f.dark;v&&(this.light=
v);f&&(this.dark=f);a&&(this.click=a);m&&(this.auto=m);r&&(this.hover=r);this.resolveMasterComponents()}}},{key:"uses",value:function(a){return[this.auto,this.click,this.hover].includes(a)}},{key:"spec",value:function(){return Sd.obj.select(this,["auto","click","hover","light","dark"])}},{key:"equals",value:function(a){if(!a)return!1;if("string"===typeof a)return lively.FreezerRuntime||(a=a.replace("styleguide://$world","styleguide://"+Sd.getProjectName($world))),this.getResourceUrlFor(this.auto)==
a;for(var f=$jscomp.makeIterator(["auto","click","hover"]),m=f.next();!m.done;m=f.next())if(m=m.value,"string"===typeof a[m]){if(this.getResourceUrlFor(this[m])!=a[m])return!1}else if((this[m]||null)!=(a[m]||null))return!1;return!0}},{key:"getManagedMorphs",value:function(){var a=this,f=[];this.derivedMorph.withAllSubmorphsDo(function(m){a.managesMorph(m)&&0<Object.keys(a._overriddenProps.get(m)).filter(function(r){return"_rev"!=r}).length&&f.push([m,Object.keys(a._overriddenProps.get(m))])});return f}},
{key:"__dont_serialize__",get:function(){var a=["_overriddenProps","_applying","_appliedMaster","_hasUnresolvedMaster"];Sd.obj.isEmpty(this.dark)&&a.push("dark");Sd.obj.isEmpty(this.light)&&a.push("light");return a}},{key:"__serialize__",value:function(){var a={};this.auto&&(a.auto=this.getResourceUrlFor(this.auto));this.click&&(a.click=this.getResourceUrlFor(this.click));this.hover&&(a.hover=this.getResourceUrlFor(this.hover));return{__expr__:"("+JSON.stringify(a)+")"}}},{key:"__after_deserialize__",
value:function(a,f){this._overriddenProps=new WeakMap;delete this.managedMorphs;this.resolveMasterComponents()}},{key:"whenApplied",value:function(){var a=this,f,m,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){return 1==v.nextAddress?(f=Sd.promise.deferred(),m=f.promise,r=f.resolve,Sd.once(a,"_appliedMaster",r),v.yield(a._hasUnresolvedMaster,2)):3!=v.nextAddress?a._appliedMaster?v.jumpTo(3):v.yield(m,3):v.return(!0)})}},{key:"whenReady",value:function(){var a=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){return f.yield(a._hasUnresolvedMaster,
0)})}},{key:"getResourceUrlFor",value:function(a){return a?a._resourceHandle?a._resourceHandle.url.replace("$world",Sd.getProjectName($world)):void 0==a.name?null:"styleguide://"+Sd.getProjectName($world)+"/"+a.name:null}},{key:"getWorldUrlFor",value:function(a){a=Sd.resource("string "===typeof a?a:this.getResourceUrlFor(a)).worldName;return a==Sd.getProjectName($world)?document.location.href:Sd.worldToUrl[a]}},{key:"resolveMasterComponents",value:function(){var a=this,f,m,r,v,x,y,E,F,I,J,P,N,Y,W,
da,va;return $jscomp.asyncExecutePromiseGeneratorProgram(function(za){switch(za.nextAddress){case 1:f=Sd.promise.deferred(),a._hasUnresolvedMaster=f.promise,m=a,r=void 0===m.light?{}:m.light,v=void 0===m.dark?{}:m.dark,x=["auto","click","hover"],y=[],za.setCatchFinallyBlocks(2),E=$jscomp.makeIterator(x),F=E.next();case 4:if(F.done){za.leaveTryBlock(3);break}I=F.value;if("string"!==typeof a[I]){za.jumpTo(7);break}J=a;P=I;return za.yield(Sd.resource(a[I]).read(),8);case 8:J[P]=za.yieldResult;case 7:if("string"!==
typeof r[I]){za.jumpTo(9);break}N=r;Y=I;return za.yield(Sd.resource(r[I]).read(),10);case 10:N[Y]=za.yieldResult;case 9:if("string"!==typeof v[I]){za.jumpTo(11);break}W=v;da=I;return za.yield(Sd.resource(v[I]).read(),12);case 12:W[da]=za.yieldResult;case 11:y.push(a[I],r[I],v[I]);F=E.next();za.jumpTo(4);break;case 2:throw va=za.enterCatchBlock(),Error("Encountered invalid master component reference: "+va.message);case 3:Sd.arr.compact(y).forEach(function(L){L.isComponent||(L.isComponent=!0)}),f.resolve(),
a._hasUnresolvedMaster=!1,za.jumpToEnd()}})}},{key:"applyAnimated",value:function(a){a=void 0===a?{duration:1E3}:a;var f=Sd.promise.deferred(),m=f.promise;f=f.resolve;this.applyIfNeeded(!0,a);Sd.once(this,"_animationConfig",f);return m}},{key:"applyIfNeeded",value:function(a,f){var m=this;a=void 0===a?!1:a;if(f=void 0===f?!1:f)this._animationConfig=f;var r=this.derivedMorph;if(r.env.world)if(r.env.eventDispatcher){if(this._hasUnresolvedMaster)return this._originalOpacity=r.opacity,r.withMetaDo({metaInteraction:!0},
function(){f||[r].concat($jscomp.arrayFromIterable(r.ownerChain())).find(function(x){return x.isComponent})||(r.opacity=0)}),this._hasUnresolvedMaster.then(function(){m.applyIfNeeded(a);r.withMetaDo({metaInteraction:!0},function(){r.opacity=m._originalOpacity});delete m._originalOpacity;delete m._capturedExtents});var v=this.determineMaster(r);v&&this._appliedMaster!=v&&(a=!0);v&&a&&(this.apply(r,v),this._appliedMaster=v)}else Sd.once(r.env,"eventDispatcher",function(){m.applyIfNeeded(a,f)});else Sd.once(r.env,
"world",function(){m.applyIfNeeded(a,f)})}},{key:"getStyleProperties",value:function(a){var f=a.propertiesAndPropertySettings();a=f.properties;var m=[];f=$jscomp.makeIterator(f.order);for(var r=f.next();!r.done;r=f.next())r=r.value,a[r].isStyleProp&&m.push(r);return m}},{key:"apply",value:function(a,f,m){var r=this;m=void 0===m?this._animationConfig:m;if(!this._applying){this._applying=!0;try{var v=function(){return a.withMetaDo({metaInteraction:!0},function(){var x=r.prepareSubmorphsToBeManaged(a,
f);f.withAllSubmorphsDoExcluding(function(y){var E=y==f,F=E?a:x[y.name];if(F)if(Sd.obj.isArray(F)&&(F=F.pop()),!y.master||E||y.master.equals(F.master)||r._overriddenProps.get(F).master||(F.master=y.master.spec(),F.requestMasterStyling()),F.master&&!E)E=F.master._overriddenProps.get(F)||{},E.position||(F.position=y.position),E.extent||(F.extent=y.extent);else{E=$jscomp.makeIterator(r.getStyleProperties(y));for(var I=E.next();!I.done;I=E.next())if(I=I.value,!r._overriddenProps.get(F)[I])if("layout"==
I)F.layout&&y.layout&&F.layout.name()==y.layout.name()&&F.layout.equals(y.layout)||(F.layout=y.layout?y.layout.copy():void 0);else{if(y==f){if("extent"==I&&!F.extent.equals(Sd.pt(10,10))&&(!F.owner||F.owner.isWorld||F.ownerChain().find(function(J){return J.master&&J.master.managesMorph(F)})))continue;if("position"==I)continue}F.isLabel&&"extent"==I||["border","borderTop","borderBottom","borderRight","borderLeft"].includes(I)||(Sd.obj.equals(F[I],y[I])||(F[I]=y[I]),["fixedHeight","fixedWidth"].includes(I)&&
F._parametrizedProps&&F._parametrizedProps.extent&&(F.extent=F._parametrizedProps.extent))}F._parametrizedProps&&delete F._parametrizedProps}},function(y){return f!=y&&y.master})})};m?a.withAnimationDo(v,m).then(function(){r._animationConfig=!1;r._applying=!1}):a.dontRecordChangesWhile(v)}finally{m||(this._applying=!1),delete a._parametrizedProps}}}},{key:"clearOverriddenPropertiesFor",value:function(a,f){var m=this._overriddenProps.get(a);this._overriddenProps.set(a,Sd.obj.dissoc(m,f))}},{key:"prepareSubmorphsToBeManaged",
value:function(a,f){var m=this,r={};a.withAllSubmorphsDoExcluding(function(v){r[v.name]&&(Sd.obj.isArray(r[v.name])?r[v.name].push(v):r[v.name]=[r[v.name],v]);r[v.name]=v},function(v){return v!=a&&v.master});f.withAllSubmorphsDoExcluding(function(v){if(v=v==f?a:r[v.name])Sd.obj.isArray(v)&&(v=v.pop()),m.prepareMorphToBeManaged(v)},function(v){return v!=f&&v.master});return r}},{key:"managedMorphs",get:function(){var a=this,f=Sd.arr.groupBy(this.derivedMorph.withAllSubmorphsSelect(function(r){return a.managesMorph(r)}),
function(r){return r.name}),m;for(m in f)f[m]=f[m][0];return f}},{key:"reconcileSubmorphs",value:function(){var a=this,f,m,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){if(1==v.nextAddress)return v.yield(a.whenReady(),2);f=a.managedMorphs;m=[];r=a._appliedMaster||a.auto;f[r.name]=a.derivedMorph;if(!r)return v.return();r.withAllSubmorphsDo(function(x){if(r&&x==r)m.push(x,a.derivedMorph);else{var y;if(y=f[x.name])if(y.owner.name==x.owner.name)m.push(y);else{var E;if(E=f[x.owner.name])x=
x.owner.submorphs.indexOf(x),m.push(E.addMorphAt(y,x));else throw Error("Missing a owner that had to be added previously....");}else y=f[x.name]=x.copy(),E=f[x.owner.name],x=x.owner.submorphs.indexOf(x),y.master||(y.submorphs=[]),m.push(E.addMorphAt(y,x))}});m=Sd.arr.compact(m);Object.values(Sd.obj.dissoc(f,m.map(function(x){return x.name}))).forEach(function(x){console.log(f,m.map(function(y){return y.name}));x.remove()});v.jumpToEnd()})}},{key:"managesMorph",value:function(a){return this._overriddenProps.has(a)}},
{key:"propsToSerializeForMorph",value:function(a,f){if(!this.managesMorph(a))return f;for(var m=[],r=$jscomp.makeIterator(this.getStyleProperties(a)),v=r.next();!v.done;v=r.next())v=v.value,this._overriddenProps.get(a)[v]||!("position"==v&&a==this.derivedMorph||"extent"==v&&a==this.derivedMorph)&&m.push(v);return Sd.arr.withoutAll(f,m)}},{key:"prepareMorphToBeManaged",value:function(a){if(!this._overriddenProps.has(a)){var f={},m;for(m in a._parametrizedProps)"__takenFromSnapshot__"!=m&&(f[m]=!0);
this._overriddenProps.set(a,f)}}},{key:"determineMaster",value:function(a){var f=a.env.world.colorScheme,m=a.env.eventDispatcher.isMorphHovered(a);a=a.env.eventDispatcher.isMorphClicked(a);var r=this.getMasterForState(this,{isHovered:m,isClicked:a});this.light&&"light"==f&&(r=this.getMasterForState(this.light,{isHovered:m,isClicked:a})||r);this.dark&&"dark"==f&&(r=this.getMasterForState(this.light,{isHovered:m,isClicked:a})||r);return r}},{key:"getMasterForState",value:function(a,f){var m=a.auto,
r=a.hover,v=a.click,x=f.isClicked;a=m;if(f.isHovered)if(r)a=r;else for(f=a&&a.master,r=[];f;){if(f.hover){a=f.hover;break}f=Sd.Path("auto.master").get(f);if(r.includes(f))break;r.push(f)}if(x)if(a=m,v)a=v;else for(m=a&&a.master;m;){if(m.click){a=m.click;break}m=Sd.Path("auto.master").get(m)}return a}},{key:"onMorphChange",value:function(a,f){if(!this._applying&&!Sd.Path("meta.metaInteraction").get(f)&&!["_rev","name"].includes(f.prop)&&("opacity"==f.prop&&delete this._originalOpacity,"master"==f.prop&&
this.managesMorph(a)&&(this._overriddenProps.get(a).master=!0),a.styleProperties.includes(f.prop)))if(this.managesMorph(a)){if(!a.master||a.master==this||["extent","position"].includes(f.prop))this._overriddenProps.get(a)[f.prop]=!0}else if(a._parametrizedProps)a._parametrizedProps[f.prop]=f.value;else{var m={};a._parametrizedProps=(m[f.prop]=f.value,m)}}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ComponentPolicy"}},{key:"for",value:function(a,f){f=f.constructor===Sd.ComponentPolicy?
f:new this(a,f);a.master&&(f._overriddenProps=a.master._overriddenProps);return f}}],e,{pathInPackage:function(){return"style-guide.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:4902,end:26959})}(void 0);Sd.ComponentPolicy=tQ;Sd.ComponentPolicy=tQ;Sd.ComponentPolicy=tQ;Sd.styleGuideURLRe=/^styleguide:\/\/([^\/]+)\/(.*)$/;Sd.fetchedSnapshots=
Sd.fetchedSnapshots||{};Sd.resolvedMasters=Sd.resolvedMasters||{};Sd.modulesToLoad=Sd.modulesToLoad||{};Sd.li=Sd.li||void 0;Sd.localNamePromise=Sd.localNamePromise||void 0;Sd.masterComponentFetches=Sd.masterComponentFetches||{};Sd.worldToUrl=Sd.worldToUrl||{};var Rca=Ha("bW",Sd.resolvedMasters);Sd.resolvedMasters=Rca;Sd.resolvedMasters=Rca;Sd.clearSnapshot=DV;Sd.clearSnapshot=DV;(function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/style-guide.js"),l=e.hasOwnProperty("StyleGuideResource")&&
"function"===typeof e.StyleGuideResource?e.StyleGuideResource:e.StyleGuideResource=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Pb(l,b,[{key:"canDealWithJSON",get:function(){return!1}},{key:"componentName",get:function(){var a=this.url.match(Sd.styleGuideURLRe);a=$jscomp.makeIterator(a);a.next();a.next();return a.next().value}},{key:"worldName",get:function(){var a=this.url.match(Sd.styleGuideURLRe);a=$jscomp.makeIterator(a);
a.next();var f=a.next().value;a.next();lively.FreezerRuntime||"$world"!=f||(f=this.localWorldName());return f}},{key:"dirList",value:function(a,f){var m=this,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){return m.worldName==Sd.getProjectName($world)?v.return($world.withAllSubmorphsSelect(function(x){return x.isComponent})):(r=Sd.resolvedMasters[m.worldName])?v.return(Object.values(r)):v.return([])})}},{key:"localWorldName",value:function(){var a;if(a=Sd.getProjectName($world))return a;
if(Sd.localNamePromise)return Sd.localNamePromise;a=Sd.promise.deferred();var f=a.resolve;Sd.localNamePromise=a.promise;if("__newWorld__"==Sd.resource(document.location.href).query().name)return f("__newWorld__"),Sd.localNamePromise;Sd.subscribeOnce("world/loaded",function(){f(Sd.getProjectName($world))},System);return Sd.localNamePromise}},{key:"fetchFromMasterDir",value:function(a,f){var m=a.join(this.worldName).join(f+".json");if(Sd.masterComponentFetches[m.url])return Sd.masterComponentFetches[m.url];
Sd.masterComponentFetches[m.url]=function(){var r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(x){return 1==x.nextAddress?(r=Sd,v=r.deserializeMorph,x.yield(m.readJson(),2)):x.return(v.call(r,x.yieldResult))})}();return Sd.masterComponentFetches[m.url]}},{key:"read",value:function(){var a=this,f,m,r,v,x,y,E,F,I,J,P,N,Y,W,da,va;return $jscomp.asyncExecutePromiseGeneratorProgram(function(za){switch(za.nextAddress){case 1:f=a.componentName;if(m=Sd.Path([a.worldName,a.componentName]).get(Sd.resolvedMasters))return za.return(m);
if(!lively.FreezerRuntime){za.jumpTo(2);break}r=Sd.resource(System.baseURL);r.isFile()&&(r=r.parent());v=r.join("masters/");return za.yield(a.fetchFromMasterDir(v,f),3);case 3:m=za.yieldResult;case 2:if(lively.FreezerRuntime){za.jumpTo(4);break}Sd.fetchedSnapshots[a.worldName]||(console.log("scheduling fetch of",a.worldName),y=Sd.promise.deferred(),x=y.resolve,Sd.fetchedSnapshots[a.worldName]=y.promise);return za.yield(a.localWorldName(),5);case 5:if(za.yieldResult==a.worldName){m="undefined"!==typeof $world&&
($world.getSubmorphNamed(f)||$world.localComponents.find(function(L){return L.name==f}));if(!m)throw Error('Master component "'+f+'" can not be found in "'+a.worldName+'"');return za.return(m)}return x?(F=Sd.MorphicDB.default,za.yield(F.fetchCommit("world",a.worldName),9)):za.yield(Sd.fetchedSnapshots[a.worldName],8);case 8:E=za.yieldResult;za.jumpTo(7);break;case 9:if(za.yieldResult)return za.yield(F.fetchSnapshot("world",a.worldName),15);I=Sd.resource(System.baseURL).join("lively.morphic/styleguides").join(a.worldName+
".json");return za.yield(I.exists(),12);case 12:if(!za.yieldResult){x(null);za.jumpTo(11);break}return za.yield(I.readJson(),14);case 14:E=za.yieldResult;Sd.worldToUrl[a.worldName]=Sd.resource(System.baseURL).join("worlds/load").withQuery({file:"lively.morphic/styleguides/"+a.worldName+".json"}).url;za.jumpTo(11);break;case 15:E=za.yieldResult,Sd.worldToUrl[a.worldName]=Sd.resource(System.baseURL).join("worlds/load").withQuery({name:a.worldName}).url;case 11:return Sd.ensureAbsoluteComponentRefs({snapshotAndPackages:E,
localComponents:[],localWorldName:a.worldName}),za.yield(Sd.loadPackagesAndModulesOfSnapshot(E),16);case 16:Object.values(E.snapshot).filter(function(L){return L.props.master}).forEach(function(L){var Z=L.props.master.value;Sd.obj.isString(Z)&&(L.props.master.value=Z.split("$world").join(a.worldName))}),x(E);case 7:J=new Sd.ObjectPool(Sd.normalizeOptions({plugins:[new Sd.StyleguidePlugin].concat($jscomp.arrayFromIterable(Sd.allPlugins))}));P=$jscomp.makeIterator(Object.entries(E.snapshot).find(function(L){L=
$jscomp.makeIterator(L);L.next();L=L.next().value;return Sd.Path("props.isComponent.value").get(L)&&Sd.Path("props.name.value").get(L)==f})||[]);N=P.next().value;if(!N)throw Error('Master component "'+f+'" can not be found in "'+a.worldName+'"');m=J.resolveFromSnapshotAndId(Object.assign({},E,{id:N}));case 4:Sd.resolvedMasters[a.worldName]?Sd.resolvedMasters[a.worldName][f]=m:(Y={},Sd.resolvedMasters[a.worldName]=(Y[f]=m,Y));m._resourceHandle=a;if(!m._pool.mastersInSubHierarchy){za.jumpTo(17);break}W=
$jscomp.makeIterator(m._pool.mastersInSubHierarchy);da=W.next();case 18:if(da.done){za.jumpTo(20);break}va=da.value;return za.yield(va.applyIfNeeded(!0),21);case 21:va.derivedMorph.ownerChain().includes(m)||va.derivedMorph.requestMasterStyling();da=W.next();za.jumpTo(18);break;case 20:delete m._pool;case 17:return za.return(Promise.resolve(m))}})}},{key:"write",value:function(a){return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){throw Error("Master Components can not be written to!");
})}},{key:"exists",value:function(){var a=this,f;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){f="undefined"!==typeof $world&&$world.getSubmorphNamed(a.morphName);return m.return(f&&f.isComponent)})}},{key:"remove",value:function(){var a=this,f;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){if(f="undefined"!==typeof $world&&$world.getSubmorphNamed(a.morphName))f.isComponent=!1;return m.return(!0)})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"StyleGuideResource"}}],
e,{pathInPackage:function(){return"style-guide.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:30633,end:36940})})(Sd.Resource);var iZ={name:"styleguide",matches:function(b){return b.match(Sd.styleGuideURLRe)},resourceClass:Sd.StyleGuideResource};Sd.resourceExtension=iZ;Sd.resourceExtension=iZ;Sd.resourceExtension=iZ;Sd.registerExtension(Sd.resourceExtension);
(function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/style-guide.js"),l=e.hasOwnProperty("StyleGuide")&&"function"===typeof e.StyleGuide?e.StyleGuide:e.StyleGuide=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Pb(l,b,void 0,void 0,e,{pathInPackage:function(){return"style-guide.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:37126,end:37610})})(void 0);var Ke=lively.FreezerRuntime.recorderFor("lively.morphic/serialization.js");Ke.normalizeOptions=function(b){b=Object.assign({reinitializeIds:!1,plugins:[].concat($jscomp.arrayFromIterable(Ke.allPlugins),[new Ke.StyleguidePlugin])},b);b.reinitializeIds&&(b.reinitializeIds="function"===typeof b.reinitializeIds?b.reinitializeIds:function(e,l){return l.realObj.isMorph?Ke.newMorphId(l.realObj.constructor):
null});return b};Ke.serializeMorph=gI;Ke.deserializeMorph=hI;Ke.loadWorldFromResource=EV;Ke.saveWorldToResource=FV;Ke.copyMorph=sN;Ke.createMorphSnapshot=xC;Ke.loadMorphFromSnapshot=vw;Ke.resourceToJSON=A8;Ke.findPackagesInFileSpec=B8;Ke.packagesOfSnapshot=GV;Ke.loadPackagesAndModulesOfSnapshot=iI;Ke.findRequiredPackagesOfSnapshot=tN;Ke.requiredModulesOfSnapshot=fu;Ke.deserializeWithMigrations=JB;Ke.serialize=bw;Ke.allPlugins=Jw;Ke.MorphicEnv=Zs;Ke.resource=A;Ke.newMorphId=ic;Ke.morph=qc;Ke.pathForBrowserHistory=
Cb;Ke.ast=qO;Ke.serializeMorph=gI;Ke.serializeMorph=gI;Ke.deserializeMorph=hI;Ke.deserializeMorph=hI;Ke.loadWorldFromResource=EV;Ke.loadWorldFromResource=EV;Ke.saveWorldToResource=FV;Ke.saveWorldToResource=FV;Ke.copyMorph=sN;Ke.copyMorph=sN;Ke.modules=tP;Ke.createFiles=H;Ke.promise=hg;Ke.Path=Ih;Ke.graph=sy;Ke.arr=Mf;Ke.migrations=uP;Ke.StyleguidePlugin=sQ;Ke.findLocalComponents=fI;var WF=Ke.modules;Ke.registerPackage=WF.registerPackage;Ke.module=WF.module;Ke.getPackage=WF.getPackage;Ke.ensurePackage=
WF.ensurePackage;Ke.lookupPackage=WF.lookupPackage;Ke.semver=WF.semver;Ke.objectScriptingEnabled=!1;Ke.createMorphSnapshot=xC;Ke.createMorphSnapshot=xC;Ke.loadMorphFromSnapshot=vw;Ke.loadMorphFromSnapshot=vw;Ke.packagesOfSnapshot=GV;Ke.packagesOfSnapshot=GV;Ke.loadPackagesAndModulesOfSnapshot=iI;Ke.loadPackagesAndModulesOfSnapshot=iI;Ke.findRequiredPackagesOfSnapshot=tN;Ke.findRequiredPackagesOfSnapshot=tN;var mc=lively.FreezerRuntime.recorderFor("lively.morphic/morph.js");mc.generateUnfolded=function(b,
e,l){e=void 0===e?["top","left","right","bottom"]:e;l=void 0===l?"core":l;var a={},f={};e=$jscomp.makeIterator(e);for(var m=e.next();!m.done;f={$jscomp$loop$prop$m$1368$2670:f.$jscomp$loop$prop$m$1368$2670},m=e.next())f.$jscomp$loop$prop$m$1368$2670=m.value,a[b+mc.string.capitalize(f.$jscomp$loop$prop$m$1368$2670)]={group:l,derived:!0,generated:!0,after:[b],get:function(r){return function(){return this.getProperty(b)[r.$jscomp$loop$prop$m$1368$2670]}}(f),set:function(r){return function(v){var x={};
this[b]=Object.assign({},this.getProperty(b),(x[r.$jscomp$loop$prop$m$1368$2670]=v,x))}}(f)};return a};mc.Color=xg;mc.Line=yn;mc.Point=Dg;mc.pt=Ei;mc.rect=dj;mc.Rectangle=He;mc.Transform=kl;mc.string=Th;mc.properties=Kr;mc.obj=ng;mc.arr=Mf;mc.num=Um;mc.promise=hg;mc.tree=ty;mc.PropertyPath=Ih;mc.signal=Xl;mc.copy=KB;mc.deserializeSpec=ur;mc.ExpressionSerializer=fo;mc.serializeSpec=Jp;mc.getClassName=tr;mc.renderRootMorph=Kz;mc.ShadowObject=it;mc.AnimationQueue=ZO;mc.easings=Rr;mc.addOrChangeCSSDeclaration=
Aq;mc.Icon=Rp;mc.morph=qc;mc.newMorphId=ic;mc.sanitizeFont=yb;mc.MorphicEnv=Zs;mc.config=em;mc.CommandHandler=jra;mc.KeyHandler=OX;mc.findKeysForPlatform=Ic;mc.TargetScript=PX;mc.copyMorph=sN;mc.ComponentPolicy=tQ;mc.Comment=Ab;mc.CommentBrowser=kc;mc.defaultCommandHandler=new mc.CommandHandler;var ql=Ha("av",function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/morph.js"),l=e.hasOwnProperty("Morph")&&"function"===typeof e.Morph?e.Morph:e.Morph=function(a){a&&a[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Pb(l,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){a||(a={});var f=a.env||mc.MorphicEnv.default();this._env=f;this._rev=f.changeManager.revision;this._owner=null;this._dirty=!0;this._submorphOrderChanged=this._rendering=!1;this._id=mc.newMorphId(mc.getClassName(this));this._animationQueue=new mc.AnimationQueue(this);this._cachedPaths={};this._pathDependants=[];this._tickingScripts=[];this._parametrizedProps=
mc.obj.select(a,mc.arr.intersect(Object.keys(a),this.styleProperties));this.initializeProperties(a);a.bounds&&(this.setBounds(a.bounds),this._parametrizedProps.extent=this.extent,this._parametrizedProps.position=this.position);if(void 0!=a.height||void 0!=a.width)this._parametrizedProps.extent=this.extent;a.layout&&(this.layout=a.layout);if("function"===typeof this.onLoad&&!this.isComponent)this.onLoad()}},{key:"__serialization_id_property__",get:function(){return"_id"}},{key:"__deserialize__",value:function(a,
f,m,r){this._env=mc.MorphicEnv.default();this._rev=a.rev;this._owner=null;this._dirty=!0;this._submorphOrderChanged=this._rendering=!1;this._id=f.id;this._animationQueue=new mc.AnimationQueue(this);this._cachedPaths={};this._pathDependants=[];this._tickingScripts=[];this._parametrizedProps=mc.obj.select(a.props,mc.arr.intersect(Object.keys(a.props),this.styleProperties));this._parametrizedProps.__takenFromSnapshot__=!0;a=r.expressionSerializer;for(var v in this._parametrizedProps)(f=this._parametrizedProps[v].value)&&
mc.obj.isString(f)&&a.isSerializedExpression(f)&&(this._parametrizedProps[v]=a.deserializeExpr(f));this.initializeProperties();this._pool=r}},{key:"__after_deserialize__",value:function(a,f,m){this.resumeStepping();if("function"===typeof this.onLoad)try{this.onLoad()}catch(r){console.error("[lively.morphic] "+this+".onLoad() error: "+r.stack)}this.isComponent&&!this.owner||delete this._pool;this.master&&(m.mastersInSubHierarchy?m.mastersInSubHierarchy.push(this.master):m.mastersInSubHierarchy=[this.master])}},
{key:"__only_serialize__",get:function(){var a=this.defaultProperties,f=this.propertiesAndPropertySettings().properties,m=[];0<this._tickingScripts.length&&m.push("_tickingScripts");this.attributeConnections&&m.push("attributeConnections");var r=[this].concat($jscomp.arrayFromIterable(this.ownerChain())).map(function(y){return y.__isBeingSerialized__&&y.master}).find(Boolean),v;for(v in f){var x=f[v];r&&r.managesMorph(this)&&void 0!=r._overriddenProps.get(this)[v]?m.push(v):x.readOnly||x.derived||
mc.obj.equals(this[v],a[v])||x.hasOwnProperty("serialize")&&!x.serialize||m.push(v)}return r&&!this.isComponent?r.propsToSerializeForMorph(this,m):m}},{key:"__additionally_serialize__",value:function(a,f,m,r){if((f=a.props.submorphs)&&!this.isEpiMorph)for(f=f.value,r=f.length;r--;)m.refForId(f[r].id).realObj.isEpiMorph&&mc.arr.removeAt(f,r);m=$jscomp.makeIterator(mc.arr.intersect(this.__only_serialize__,["borderColor","borderWidth","borderStyle","borderRadius"]));for(f=m.next();!f.done;f=m.next())f=
f.value,a.props[f]={key:f,verbatim:!0,value:mc.obj.extract(this[f],["top","right","bottom","left"],function(v,x){return x&&x.isColor?x.toTuple():x})}}},{key:"isMorph",get:function(){return!0}},{key:"id",get:function(){return this._id}},{key:"env",get:function(){return this._env}},{key:"spec",value:function(a,f){a=void 0===a?!0:a;f=void 0===f?new WeakMap:f;var m=this.defaultProperties,r=this.propertiesAndPropertySettings().properties,v={submorphs:!0},x={};if(f.has(this))return f.get(this);f.set(this,
x);for(var y in r){var E=r[y];E&&(E.readOnly||E.derived||E.hasOwnProperty("serialize")&&!E.serialize||y in v||a&&(mc.obj.equals(this[y],m[y])||this[y]&&m[y]&&this[y].valueOf&&m[y].valueOf&&mc.obj.equals(this[y].valueOf(),m[y].valueOf()))||(x[y]=this[y]&&this[y].isMorph?this[y].spec(a,f):this[y]&&"layout"===y?this[y].copy():this[y]))}x.submorphs=this.submorphs.map(function(F){return F.spec(a,f)});x.type=this.constructor;return x}},{key:"printSpec",value:function(a,f){f=void 0===f?0:f;a=(void 0===a?
null:a)||this.spec();var m={name:!0,type:!0,submorphs:!0},r="  ".repeat(f+1),v="  ".repeat(f)+"{\n"+(r+'name: "'+a.name+'",\n')+(r+'type: "'+a.type+'",\n'),x;for(x in a)m[x]||(v+=""+r+x+": "+mc.string.print(a[x])+",\n");if(a.submorphs){v+=r+"submorphs: [\n";a=$jscomp.makeIterator(a.submorphs);for(m=a.next();!m.done;m=a.next())v+=this.printSpec(m.value,f+1);v+="]\n"}return v+="  ".repeat(f)+"}\n"}},{key:"defaultProperties",get:function(){var a=this.constructor,f=a[Symbol.for("lively-instance-superclass")];
if(!a._morphicDefaultPropertyValues||a._morphicDefaultPropertyValues==(f&&f._morphicDefaultPropertyValues)){a=this.constructor._morphicDefaultPropertyValues={};f=this.propertiesAndPropertySettings().properties;for(var m in f){var r=f[m];r.hasOwnProperty("defaultValue")&&(r=r.defaultValue,Array.isArray(r)&&(r=r.slice()),a[m]=r)}}return this.constructor._morphicDefaultPropertyValues}},{key:"defaultProperty",value:function(a){return this.defaultProperties[a]}},{key:"getProperty",value:function(a){return this._morphicState[a]}},
{key:"setProperty",value:function(a,f,m){return this.addValueChange(a,f,m)}},{key:"changeMetaData",value:function(a,f,m,r){m=void 0===m?!0:m;r=void 0===r?!0:r;var v=this.metadata;v||(v={});(new mc.PropertyPath(a)).withParentAndKeyDo(v,!0,function(x,y){x[y]=r?Object.assign({},x[y],{},f):f;var E=x.__dont_serialize__;m?E&&E.includes(y)&&(mc.arr.remove(E,y),0===E.length&&delete x.__dont_serialize__):(E||(E=x.__dont_serialize__=[]),mc.arr.pushIfNotIncluded(E,y))});this.metadata=v}},{key:"installFont",
value:function(a,f){var m={};this.installedFonts=Object.assign({},this.installedFonts,(m[a]=f,m));this.insertFontCSS(a,f)}},{key:"uninstallFont",value:function(a){delete this.installedFonts[a];(a=document.getElementById(this.id+"-"+a))&&a.remove()}},{key:"ensureInstalledFonts",value:function(a,f){a=$jscomp.makeIterator(a);for(var m=a.next();!m.done;m=a.next())(m=document.getElementById(this.id+"-"+m.value))&&m.remove();f=$jscomp.makeIterator(f);for(m=f.next();!m.done;m=f.next())a=m.value,this.env.fontMetric.isFontSupported(mc.sanitizeFont(a))||
this.insertFontCSS(a,this.installedFonts[a])}},{key:"insertFontCSS",value:function(a,f){var m=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){if(1==r.nextAddress)return r.yield(m.whenRendered(),2);f.endsWith(".otf")?mc.addOrChangeCSSDeclaration(m.id+"-"+a,"@font-face {\n             font-family: "+a+';\n             src: url("'+m.installedFonts[a]+'") format("opentype");\n         }'):mc.addOrChangeCSSDeclaration(m.id+"-"+a,'@import url("'+m.installedFonts[a]+'");');r.jumpToEnd()})}},
{key:"toString",value:function(){return"<"+mc.getClassName(this)+" - "+(this.name?this.name:this.id)+">"}},{key:"edit",value:function(a){return this.env.world.execCommand("open object editor",Object.assign({className:mc.getClassName(this)},a,{target:this}))}},{key:"inspect",value:function(a){return this.env.world.execCommand("open object inspector",Object.assign({},a,{target:this}))}},{key:"livelyCustomInspect",value:function(){var a={_id:!0,_owner:!0},f={},m=this.propertiesAndPropertySettings().properties,
r=[],v;for(v in m)a[v]||m[v].derived&&!m[v].showInInspector||(f[v]=!0,r.push({key:v,value:this[v]}));r.push({key:"id",value:this.id});r.push({key:"owner",value:this.owner});r=r.sort(function(y,E){y=y.key.toLowerCase();E=E.key.toLowerCase();return y<E?-1:y===E?0:1});if(this.attributeConnections)for(m=$jscomp.makeIterator(this.attributeConnections),v=m.next();!v.done;v=m.next())v=v.value,a["$$"+v.sourceAttrName,""+v.sourceAttrName]=!0;Object.assign(f,a);a=$jscomp.makeIterator("attributeConnections _animationQueue _morphicState _dirty doNotCopyProperties doNotSerialize _env _cachedPaths _pathDependants _rendering _rev _submorphOrderChanged _tickingScripts _transform _invTransform _styleSheetProps _renderer _tooltipViewer layout".split(" "));
for(m=a.next();!m.done;m=a.next())m=m.value,m in this&&(f[m]=!0,r.push({key:m,value:this[m],keyString:"[internal] "+m}));for(var x in this)!f[x]&&this.hasOwnProperty(x)&&r.unshift({key:x,value:this[x],keyString:"[UNKNOWN PROPERTY] "+x});return{sort:!1,includeDefault:!1,properties:r}}},{key:"show",value:function(a){return $world.execCommand("show morph",{morph:this,loop:a})}},{key:"setStatusMessage",value:function(a,f,m,r){var v=this.world();r=Object.assign({maxLines:7},r);return v?v.setStatusMessageFor(this,
a,f,m,r):console.log(a)}},{key:"showError",value:function(a){var f=this.world();return f?f.showErrorFor(this,a):console.error(a)}},{key:"onChange",value:function(a){var f=this,m=a.meta&&a.meta.animation,r=a.prop,v=a.value;if("position"===r||"rotation"===r||"scale"===r||"origin"===r||"reactsToPointer"===r)this.onBoundsChanged(this.bounds()),m={},this.updateTransform((m[r]=v,m));else if("extent"==r)this.onBoundsChanged(this.bounds());else"layout"==r&&(m?v&&v.attachAnimated(m.duration,this,m.easing):
v&&v.attach());this.layout&&this.layout.onChange(a);this.isComponent&&!mc.PropertyPath("meta.metaInteraction").get(a)&&(r=this.world(),delete this._preview,(r?r.withAllSubmorphsSelect(function(x){return x.master&&x.master.uses(f)}):[]).forEach(function(x){x.requestMasterStyling()}));if(this.master)this.master.onMorphChange(this,a)}},{key:"onBoundsChanged",value:function(a){var f=this;mc.signal(this,"bounds",a);[].concat($jscomp.arrayFromIterable(a.corners),$jscomp.arrayFromIterable(a.sides)).forEach(function(m){mc.signal(f,
m,a.partNamed(m))})}},{key:"onSubmorphChange",value:function(a,f){var m=this;if(this.isComponent&&!mc.PropertyPath("meta.metaInteraction").get(a)&&!mc.PropertyPath("meta.layoutAction").get(a)){var r=this.world();r&&r.withAllSubmorphsDo(function(v){v.master&&v.master.uses(m)&&v.requestMasterStyling()})}if(this.master)this.master.onMorphChange(f,a);this.layout&&this.layout.onSubmorphChange(f,a)}},{key:"changes",get:function(){return this.env.changeManager.changesFor(this)}},{key:"applyChange",value:function(a){this.env.changeManager.apply(this,
a)}},{key:"addValueChange",value:function(a,f,m){return this.env.changeManager.addValueChange(this,a,f,m)}},{key:"addMethodCallChangeDoing",value:function(a,f){return this.env.changeManager.addMethodCallChangeDoing(a,this,f)}},{key:"groupChangesWhile",value:function(a,f){return this.env.changeManager.groupChangesWhile(this,a,f)}},{key:"dontRecordChangesWhile",value:function(a){return this.env.changeManager.dontRecordChangesWhile(this,a)}},{key:"recordChangesWhile",value:function(a,f){return this.env.changeManager.recordChangesWhile(a,
f)}},{key:"recordChangesStart",value:function(a){return this.env.changeManager.recordChangesStartForMorph(this,a)}},{key:"recordChangesStop",value:function(a){return this.env.changeManager.recordChangesStopForMorph(this,a)}},{key:"withMetaDo",value:function(a,f){return this.env.changeManager.doWithValueChangeMeta(a,this,f)}},{key:"undoStart",value:function(a){return this.env.undoManager.undoStart(this,a)}},{key:"undoStop",value:function(a){return this.env.undoManager.undoStop(this,a)}},{key:"undoInProgress",
get:function(){return this.env.undoManager.undoInProgress}},{key:"animate",value:function(a){var f=this,m;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){return 1==r.nextAddress?(m=f._animationQueue.registerAnimation(a),f._animationQueue.animationsActive?m?r.yield(m.asPromise(),3):r.jumpTo(2):(m&&m.finish(),r.return(Promise.resolve(f)))):2!=r.nextAddress?r.return(r.yieldResult):r.return(Promise.resolve(f))})}},{key:"withAnimationDo",value:function(a,f){var m=this,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(x){r=
m.groupChangesWhile(!1,a);v=r.changes;return x.yield(Promise.all(Object.values(mc.arr.groupBy(v,function(y){return y.target.id})).map(function(y){var E=Object.assign({},f),F;y.forEach(function(I){F=I.target;I.reverseApply();E[I.prop]=I.value});return F&&F.animate(E)})),0)})}},{key:"isClip",value:function(){return"visible"!==this.clipMode}},{key:"scrollExtent",get:function(){return(this.submorphs.length?this.innerBounds().union(this.submorphBounds()):this.innerBounds()).extent().addPt(this.scrollbarOffset)}},
{key:"scrollBounds",value:function(){var a=this.scroll,f=this.scrollExtent;return new mc.Rectangle(a.x,a.y,f.x,f.y)}},{key:"scrollDown",value:function(a){this.scroll=this.scroll.addXY(0,a)}},{key:"scrollUp",value:function(a){this.scrollDown(50*-a)}},{key:"scrollLeft",value:function(a){this.scroll=this.scroll.addXY(a,0)}},{key:"scrollRight",value:function(a){this.scrollLeft(-a)}},{key:"scrollPageDown",value:function(){this.scrollDown(this.height)}},{key:"scrollPageUp",value:function(){this.scrollUp(this.height)}},
{key:"addStyleClass",value:function(a){this.styleClasses=mc.arr.uniq(this.styleClasses.concat(a))}},{key:"removeStyleClass",value:function(a){this.styleClasses=this.styleClasses.filter(function(f){return f!=a})}},{key:"adjustOrigin",value:function(a){var f=this.origin,m=this.globalBounds().topLeft();this.origin=a;this.submorphs.forEach(function(v){return v.position=v.position.subPt(a.subPt(f))});var r=this.globalBounds().topLeft();m=m.subPt(r);this.globalPosition=this.globalPosition.addPt(m)}},{key:"setBounds",
value:function(a){this.extent=a.extent();this.position=a.topLeft().addPt(this.origin)}},{key:"innerBounds",value:function(){var a=this.extent;return mc.rect(0,0,a.x,a.y)}},{key:"relativeBounds",value:function(a){a=a||this.world();var f=this.origin.negated().extent(this.extent);f=a?this.transformRectToMorph(a,f):this.getGlobalTransform().transformRectToRect(f);this.isClip()||this.submorphs.forEach(function(m){f=f.union(m.relativeBounds(a))});return f}},{key:"bounds",value:function(){return this.relativeBounds(this.owner)}},
{key:"relativeSubmorphBounds",value:function(){var a=this.innerBounds();return this.submorphs.map(function(f){f=f.bounds();return mc.rect(f.x/a.width,f.y/a.height,f.width/a.width,f.height/a.height)})}},{key:"globalBounds",value:function(){return this.relativeBounds(this.world())}},{key:"submorphBounds",value:function(a){a=mc.arr.filter(this.submorphs,void 0===a?function(){return!0}:a);return 1>a.length?this.innerBounds():a.map(function(f){return f.bounds()}).reduce(function(f,m){return f.union(m)})}},
{key:"fitToSubmorphs",value:function(a){a=void 0===a?mc.Rectangle.inset(0):a;var f=this.submorphs;if(f.length){f=f.reduce(function(v,x){return v.union(x.bounds())},f[0].bounds());var m=f.top()-a.top(),r=f.left()-a.left();this.moveBy(mc.pt(r,m));mc.arr.invoke(this.submorphs,"moveBy",mc.pt(-r,-m));this.extent=mc.pt(f.width+a.left()+a.right(),f.height+a.top()+a.bottom())}}},{key:"align",value:function(a,f){return this.moveBy(f.subPt(a))}},{key:"moveBy",value:function(a){this.position=this.position.addPt(a);
return this}},{key:"rotateBy",value:function(a){this.rotation+=a}},{key:"resizeBy",value:function(a){this.extent=this.extent.addPt(a)}},{key:"snap",value:function(a){this.position=this.position.roundTo(a||1)}},{key:"isEpiMorph",get:function(){return this.getProperty("epiMorph")&&!this.isComponent}},{key:"isUsedAsEpiMorph",value:function(){for(var a=this;a;){if(a.isEpiMorph)return!0;a=a.owner}return!1}},{key:"replaceWith",value:function(a,f,m){m=void 0===m?!0:m;if(this===a||!a)return a;if(this===a.owner)return a.replaceWith(this),
a;var r=this.owner,v=this.submorphs,x=this.getTransform().copy();f="number"===typeof f?f:r?r.submorphs.indexOf(this):-1;var y=a.owner,E=mc.arr.without(a.submorphs,this),F=a.getTransform().copy(),I=y?y.submorphs.indexOf(a):-1;r&&this.remove();y&&a.remove();m&&(this.submorphs=[],a.submorphs=[]);r===a?(y&&y.addMorphAt(this,I),m&&(this.submorphs=E.slice(0,f).concat(a).concat(E.slice(f)),a.submorphs=v)):(r&&r.addMorphAt(a,f),y&&y.addMorphAt(this,I),m&&(a.submorphs=v,this.submorphs=E));a.setTransform(x);
this.setTransform(F);return a}},{key:"addMorphAt",value:function(a,f){var m=this;if(!a||"object"!==typeof a)throw Error(a+" cannot be added as a submorph to "+this);if(a.isMorph){if(a.isAncestorOf(this))return this.env.world.logError(Error("addMorph: Circular relationships between morphs not allowed\ntried to add "+a+" to "+this)),null;if(a===this)return this.env.world.logError(Error("addMorph: Trying to add itself as a submorph: "+this)),null}a.isMorph||(a=mc.morph(a));var r=this.submorphs.indexOf(a);
if(!(-1<r&&r===f))return this.addMethodCallChangeDoing({target:this,selector:"addMorphAt",args:[a,f],undo:{target:this,selector:"removeMorph",args:[a]}},function(){var v=a.owner,x=m.submorphs;if(v&&v!==m){var y=a.transformForNewOwner(m);a.remove()}a._env!==m._env&&(a._env=m._env);f=Math.min(x.length,Math.max(0,f));-1<r&&(x.splice(r,1),r<f&&f--);x.splice(f,0,a);a._owner=m;a._cachedPaths={};y&&a.setTransform(y);a.requestStyling();m._morphicState.submorphs=x;m._submorphOrderChanged=!0;m.makeDirty();
a.resumeSteppingAll();a.withAllSubmorphsDo(function(E){return E.onOwnerChanged(m)});m.world()&&a._requestMasterStyling&&(a.master&&a.master.applyIfNeeded(!0),a._requestMasterStyling=!1)}),a}},{key:"addMorph",value:function(a,f){var m=this.submorphs;f=f?m.indexOf(f):-1;return this.addMorphAt(a,-1===f?m.length:f)}},{key:"addMorphBack",value:function(a){return this.addMorph(a,a===this.submorphs[0]?this.submorphs[1]:this.submorphs[0])}},{key:"removeMorph",value:function(a){var f=this.submorphs.indexOf(a);
-1!==f&&((this.getProperty("submorphs")||[]).splice(f,1),this.addMethodCallChangeDoing({target:this,selector:"removeMorph",args:[a],undo:{target:this,selector:"addMorphAt",args:[a,f]}},function(){a.suspendSteppingAll();a._owner=null}),this._pathDependants=mc.arr.withoutAll(this._pathDependants,a._pathDependants))}},{key:"remove",value:function(){var a=this;this.ownerChain().forEach(function(f){f._stylingVisitor&&f._stylingVisitor.deleteFromCache(a)});this.owner&&this.owner.removeMorph(this);this._cachedPaths=
{};this._pathDependants.forEach(function(f){return f._cachedPaths={}});this._pathDependants=[];this.withAllSubmorphsDo(function(f){return f.onOwnerChanged(null)});return this}},{key:"abandon",value:function(){this.emptyComments();this.remove();this.submorphs.forEach(function(a){return a.abandon()})}},{key:"onOwnerChanged",value:function(a){a&&this.master&&this.requestMasterStyling()}},{key:"fadeOut",value:function(a){a=void 0===a?1E3:a;var f=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){if(1==
m.nextAddress)return m.yield(f.animate({opacity:0,duration:a,easing:mc.easings.outQuad}),2);f.remove();f.opacity=1;m.jumpToEnd()})}},{key:"fadeIn",value:function(a){a=void 0===a?1E3:a;var f=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){f.opacity=0;f.animate({opacity:1,duration:a});return m.return(f)})}},{key:"fadeIntoWorld",value:function(a,f){a=void 0===a?$world.visibleBounds().center():a;f=void 0===f?200:f;var m=this,r,v,x;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){if(1==
y.nextAddress)return r=new mc.Morph({opacity:0,scale:0,epiMorph:!0,hasFixedPosition:!0,fill:mc.Color.transparent}),v=m.env.world,r.openInWorld(),r.addMorph(m),m.position=r.extent.scaleBy(.5),r.center=a,r.scale=.8,y.yield(r.animate({opacity:1,scale:1,duration:f}),2);x=m.globalBounds();v.addMorph(m);m.top=x.top();m.left=x.left();r.remove();return y.return(m)})}},{key:"removeAllMorphs",value:function(){this.submorphs=[]}},{key:"bringToFront",value:function(){this.owner&&mc.arr.last(this.owner.submorphs)!==
this&&this.owner.addMorph(this);return this}},{key:"owner",get:function(){return this._owner}},{key:"withAllSubmorphsDetect",value:function(a){if(a(this))return this;for(var f=$jscomp.makeIterator(this.submorphs),m=f.next();!m.done;m=f.next())if(m=m.value.withAllSubmorphsDetect(a))return m}},{key:"withAllSubmorphsDoExcluding",value:function(a,f){var m=[a(this)];if(f(this))return m;for(var r=$jscomp.makeIterator(this.submorphs),v=r.next();!v.done;v=r.next())mc.arr.pushAll(m,v.value.withAllSubmorphsDoExcluding(a,
f));return m}},{key:"withAllSubmorphsDo",value:function(a){for(var f=[a(this)],m=$jscomp.makeIterator(this.submorphs),r=m.next();!r.done;r=m.next())mc.arr.pushAll(f,r.value.withAllSubmorphsDo(a));return f}},{key:"withAllSubmorphsSelect",value:function(a){var f=[];this.withAllSubmorphsDo(function(m){return a(m)&&f.push(m)});return f}},{key:"ownerChain",value:function(){return this.owner?[this.owner].concat(this.owner.ownerChain()):[]}},{key:"world",value:function(){return this.owner?this.owner.world():
null}},{key:"getWindow",value:function(){return this.isWindow?this:this.ownerChain().find(function(a){return a.isWindow})}},{key:"openInWorldNear",value:function(a,f){var m=this;f=f||this.world()||this.env.world;if(!f)return this;this.master&&(this.opacity=0,this.master.whenApplied().then(function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){if(1==r.nextAddress)return r.yield(m.whenRendered(),2);m.opacity=1;r.jumpToEnd()})}));this.center=a;this.setBounds(f.visibleBoundsExcludingTopBar().translateForInclusion(this.bounds()));
return this.openInWorld(this.position)}},{key:"openInWorldNearHand",value:function(a){a=a||this.world()||this.env.world;var f=a.firstHand?a.firstHand.position.addPt(this.hasFixedPosition?mc.pt(0,0):a.scroll):mc.pt(0,0);return a?this.openInWorldNear(f):void 0}},{key:"openInWorld",value:function(a,f){f=f||this.world()||this.env.world;if(!f)return console.warn("Cannot open morph "+this+", world morph not found;"),this;a?this.position=a:(this.center=this.hasFixedPosition?f.visibleBounds().extent().scaleBy(.5,
.5):f.visibleBounds().center(),this.snap());f.addMorph(this);return this}},{key:"openInHand",value:function(a){a||(a=(this.world()||this.env.world).firstHand);a.grab(this);this.center=mc.pt(0,0)}},{key:"openInWindow",value:function(a){a=void 0===a?{title:this.name,name:"window for "+this.name,world:null}:a;return(a.world||this.world()||this.env.world).openInWindow(this,mc.obj.dissoc(a,["world"]))}},{key:"isAncestorOf",value:function(a){for(a=a.owner;a;){if(a===this)return!0;a=a.owner}return!1}},{key:"morphsContainingPoint",
value:function(a,f){f||(f=[]);if(!this.fullContainsWorldPoint(a))return f;for(var m=this.submorphs.length-1;0<=m;m--)this.submorphs[m].morphsContainingPoint(a,f);this.innerBoundsContainsWorldPoint(a)&&f.push(this);return f}},{key:"morphBeneath",value:function(a){var f=this.world()||this.owner;if(!f)return null;a=f.morphsContainingPoint(a);f=a.indexOf(this);return a[f+1]}},{key:"transformTillMorph",value:function(a,f){if("down"==(void 0===f?"up":f))return a.transformTillMorph(this,"up").inverse();
f=new mc.Transform;for(var m=this;m&&m!=a;m=m.owner){var r=m,v=r.origin;r=r.scroll;0===v.x&&0===v.y||f.preConcatenate(new mc.Transform(m.origin));f.preConcatenate(m.getTransform());m!=this&&(0===r.x&&0===r.y||!m.owner||f.preConcatenate(new mc.Transform(r.negated())));m.hasFixedPosition&&m.owner&&f.preConcatenate(new mc.Transform(m.owner.scroll))}return f}},{key:"localize",value:function(a){var f=this.world(),m=a.x,r=a.y;return f?f.transformPointToMorph(this,mc.pt(m,r)):a}},{key:"worldPoint",value:function(a){var f=
this.world(),m=a.x,r=a.y;return f?this.transformPointToMorph(f,mc.pt(m,r)):a.addPt(this.position)}},{key:"transformToMorph",value:function(a){var f=this.getGlobalTransform(),m=a.getGlobalTransform().inverse();f.preConcatenate(m);m=a.scroll;0===m.x&&0===m.y||!a.owner||f.preConcatenate(new mc.Transform(m));return f}},{key:"transformPointToMorph",value:function(a,f){for(var m=this.hasFixedPosition,r=$jscomp.makeIterator(this.pathToMorph(a)),v=r.next();!v.done;v=r.next()){var x=$jscomp.makeIterator(v.value);
v=x.next().value;x=x.next().value;this!=x&&"up"==v&&(f.x-=x.scroll.x,f.y-=x.scroll.y,x.hasFixedPosition&&(m=x.owner&&x.owner.isWorld),x.hasFixedPosition&&x.owner&&x.owner.owner&&(f.x+=x.owner.scroll.x,f.y+=x.owner.scroll.y));this.applyTransform(v,x,f);this!=x&&"down"==v&&(f.x+=x.scroll.x,f.y+=x.scroll.y,x.hasFixedPosition&&(m=x.owner&&x.owner.isWorld),x.hasFixedPosition&&x.owner&&x.owner.owner&&(f.x-=x.owner.scroll.x,f.y-=x.owner.scroll.y))}m&&a.isWorld&&(f.x=f.x-a.position.x+a.scroll.x,f.y=f.y-a.position.y+
a.scroll.y);m&&this.isWorld&&(f.x=f.x+this.position.x-this.scroll.x,f.y=f.y+this.position.y-this.scroll.y);return f}},{key:"transformRectToMorph",value:function(a,f){var m=this,r,v,x;[r=f.topLeft(),v=f.topRight(),x=f.bottomRight(),f=f.bottomLeft()].forEach(function(y){return m.transformPointToMorph(a,y)});return mc.Rectangle.unionPts([r,v,x,f])}},{key:"applyTransform",value:function(a,f,m){"up"==a?(m.x+=f.origin.x,m.y+=f.origin.y,m.matrixTransform(f.getTransform(),m)):(m.matrixTransform(f.getInverseTransform(),
m),m.x-=f.origin.x,m.y-=f.origin.y)}},{key:"_addPathDependant",value:function(a){this._pathDependants.includes(a)||this._pathDependants.push(a)}},{key:"pathToMorph",value:function(a){var f;if(f=this._cachedPaths[a.id])return f;f=this.closestCommonAncestor(a)||this;var m=this,r=[],v=[];for(f._addPathDependant(this);m&&m!=f;)v.push(["up",m]),m._addPathDependant(this),m=m.owner;for(m=a;m&&m!=f;)r.push(["down",m]),m._addPathDependant(this),m=m.owner;return this._cachedPaths[a.id]=f=[].concat($jscomp.arrayFromIterable(v),
$jscomp.arrayFromIterable(r.reverse()))}},{key:"closestCommonAncestor",value:function(a){return mc.arr.intersect([this].concat($jscomp.arrayFromIterable(this.ownerChain())),[a].concat($jscomp.arrayFromIterable(a.ownerChain())))[0]}},{key:"transformForNewOwner",value:function(a){return new mc.Transform(this.transformToMorph(a))}},{key:"localizePointFrom",value:function(a,f){var m=a.x;a=a.y;try{return f.transformPointToMorph(this,mc.pt(m,a))}catch(r){return console.warn("problem "+r+" in localizePointFrom"),
mc.pt}}},{key:"getGlobalTransform",value:function(){return this.transformTillMorph(this.world())}},{key:"globalPosition",get:function(){return this.worldPoint(mc.pt(0,0))}},{key:"globalPosition",set:function(a){return this.position=this.owner?this.owner.localize(a):a}},{key:"ensureToBeInWorldBounds",value:function(){var a=this.world();if(a){var f=this.globalBounds();a=a.innerBounds().translateForInclusion(f).topLeft().subPt(f.topLeft());this.moveBy(a)}}},{key:"getTransform",value:function(){this._transform||
this.updateTransform();return this._transform}},{key:"getInverseTransform",value:function(){this._invTransform||this.updateTransform();return this._invTransform}},{key:"updateTransform",value:function(a){a=void 0===a?{}:a;var f=a.position,m=a.scale,r=a.origin,v=a.rotation;a=this._transform||new mc.Transform;var x=this._invTransform||new mc.Transform;f=f||this.position;r=r||this.origin;m=m||this.scale;v=v||this.rotation;a.a=m*Math.cos(v);a.b=m*Math.sin(v);a.c=m*-Math.sin(v);a.d=m*Math.cos(v);a.e=a.a*
-r.x+a.c*-r.y+f.x;a.f=a.b*-r.x+a.d*-r.y+f.y;f=a.a;m=a.b;r=a.c;v=a.d;var y=a.e,E=a.f,F=1/(f*v-r*m);x.a=v*F;x.b=-m*F;x.c=-r*F;x.d=f*F;x.e=(r*E-y*v)*F;x.f=-(f*E-m*y)*F;this._transform=a;this._invTransform=x}},{key:"setTransform",value:function(a){this.position=a.getTranslation();this.rotation=mc.num.toRadians(a.getRotation());this.scale=a.getScalePoint().x;this.updateTransform(this)}},{key:"fullContainsWorldPoint",value:function(a){return this.fullContainsPoint(null==this.owner?a:this.owner.localize(a))}},
{key:"fullContainsPoint",value:function(a){return this.bounds().containsPoint(a)}},{key:"innerBoundsContainsWorldPoint",value:function(a){return this.innerBoundsContainsPoint(this.localize(a))}},{key:"innerBoundsContainsPoint",value:function(a){return this.innerBounds().containsPoint(a.addPt(this.origin).subPt(this.scroll))}},{key:"get",value:function(a){if(!a)return null;try{return this.getSubmorphNamed(a)||this.getNameTest(this,a)&&this||this.getOwnerOrOwnerSubmorphNamed(a)}catch(f){if(f.constructor==
RangeError&&"Maximum call stack size exceeded"==f.message)throw Error("'get' failed due to a stack overflow. The most\nlikely source of the problem is using 'get' as part of\ntoString, because 'get' calls 'getOwnerOrOwnerSubmorphNamed', which\ncalls 'toString' on this. Try using 'getSubmorphNamed' instead,\nwhich only searches in this' children.\nOriginal error:\n"+f.stack);throw f;}}},{key:"getNameTest",value:function(a,f){if(mc.obj.isRegExp(f)){if(f.test(a.name)||f.test(String(a)))return!0}else if(a.name===
f||String(a)===f)return!0;return!1}},{key:"getAllNamed",value:function(a,f){f=void 0===f?[]:f;if(!this._morphicState||!this.submorphs.length)return f;for(var m=0;m<this.submorphs.length;m++){var r=this.submorphs[m];this.getNameTest(r,a)&&f.push(r)}for(m=0;m<this.submorphs.length;m++)this.submorphs[m].getAllNamed(a,f);return f}},{key:"getSubmorphNamed",value:function(a){if(!this._morphicState||!this.submorphs.length)return null;for(var f=0;f<this.submorphs.length;f++){var m=this.submorphs[f];if(this.getNameTest(m,
a))return m}for(f=0;f<this.submorphs.length;f++)if(m=this.submorphs[f].getSubmorphNamed(a))return m;return null}},{key:"getSubmorphsByStyleClassName",value:function(a){return this.withAllSubmorphsSelect(function(f){return f.styleClasses.includes(a)})}},{key:"getOwnerNamed",value:function(a){return this.ownerChain().find(function(f){return f.name===a})}},{key:"getOwnerOrOwnerSubmorphNamed",value:function(a){var f=this.owner;if(!f)return null;if(f.name===a)return f;for(var m=0;m<f.submorphs.length;m++){var r=
f.submorphs[m];if(r!==this&&(this.getNameTest(r,a)||(r=r.getSubmorphNamed(a))))return r}return this.owner.getOwnerOrOwnerSubmorphNamed(a)}},{key:"getMorphWithId",value:function(a){return this.withAllSubmorphsDetect(function(f){return a===f.id})}},{key:"setMirrored",value:function(a){a?this.removeStyleClass("hidden-in-mirror"):this.addStyleClass("hidden-in-mirror")}},{key:"isMirrored",value:function(){return 0<=this.styleClasses.indexOf("hidden-in-mirror")?!0:!1}},{key:"dragTriggerDistance",get:function(){return 0}},
{key:"onMouseDown",value:function(a){if(this===a.targetMorph&&(a.state.clickedMorph=this,1==a.state.prevClick.clickCount&&200>=Date.now()-a.state.prevClick.clickedAtTime)){this.onDoubleMouseDown(a);return}this===a.targetMorph&&this.master&&this.requestMasterStyling()}},{key:"onDoubleMouseDown",value:function(a){}},{key:"onMouseUp",value:function(a){a.state.clickedMorph=null;this===a.targetMorph&&this.master&&this.requestMasterStyling()}},{key:"onMouseMove",value:function(a){}},{key:"onLongClick",
value:function(a){}},{key:"addKeyBindings",value:function(a){var f=this;this.addMethodCallChangeDoing({target:this,selector:"addKeyBindings",args:[a],undo:null},function(){f._keybindings||(f._keybindings=[]);f._cachedKeyhandlers=null;f._keybindings.unshift.apply(f._keybindings,$jscomp.arrayFromIterable(a))})}},{key:"keybindings",get:function(){return this._keybindings||[]}},{key:"keybindings",set:function(a){this._cachedKeyhandlers=null;return this._keybindings=a}},{key:"keyhandlers",get:function(){return this._cachedKeyhandlers||
(this._cachedKeyhandlers=[mc.KeyHandler.withBindings(this.keybindings)])}},{key:"keyCommandMap",get:function(){var a=this.keyhandlers[0].platform;return this.keybindings.reduce(function(f,m){var r=mc.findKeysForPlatform(m.keys,a),v=m.command,x="string"===typeof v?v:v.command||v.name;return"string"!==typeof r?f:r.split("|").reduce(function(y,E){var F={};return Object.assign(y,(F[E]={name:x,command:v,prettyKeys:mc.KeyHandler.prettyCombo(E)},F))},f)},{})}},{key:"keysForCommand",value:function(a,f){f=
void 0===f?!0:f;var m=this.keyCommandMap,r=Object.keys(m).find(function(v){return m[v].name===a});return r&&f?m[r].prettyKeys:r}},{key:"simulateKeys",value:function(a){return mc.KeyHandler.simulateKeys(this,a)}},{key:"onKeyDown",value:function(a){mc.KeyHandler.invokeKeyHandlers(this,a,!1)&&a.stop()}},{key:"onKeyUp",value:function(a){}},{key:"onContextMenu",value:function(a){var f=this;a.targetMorph===this&&(lively.FreezerRuntime||a.stop(),Promise.resolve(this.menuItems(a)).then(function(m){return f.openMenu(m,
a)}).catch(function(m){return $world.logError(m)}))}},{key:"openMenu",value:function(a,f){var m=this.world();return a&&a.length&&m?m.openWorldMenu(f,a):null}},{key:"menuItems",value:function(a){return $world.defaultMenuItems(this,a)}},{key:"onCut",value:function(a){}},{key:"onCopy",value:function(a){}},{key:"onPaste",value:function(a){}},{key:"onDragStart",value:function(a){this.undoStart("drag-move");a=a.state;this.position=a.dragStartMorphPosition.addPt(a.absDragDelta)}},{key:"onDragEnd",value:function(a){this.undoStop("drag-move");
$world.execCommand("remove snap to guides",this)}},{key:"onDrag",value:function(a){var f=a.state;this.position=f.dragStartMorphPosition.addPt(f.absDragDelta);$world.execCommand("show and snap to guides",{target:this,showGuides:a.isCtrlDown(),snap:a.isCtrlDown()})}},{key:"onGrab",value:function(a){if(a.isShiftDown()){var f=this.copy();f.position=this.transformPointToMorph(a.hand,mc.pt(0,0));a.hand.grab(f)}else a.hand.grab(this)}},{key:"onDrop",value:function(a){a.hand.dropMorphsOn(this)}},{key:"doNotAcceptDropsForThisAndSubmorphs",
value:function(){this.withAllSubmorphsDo(function(a){return a.acceptsDrops=!1})}},{key:"acceptDropsForThisAndSubmorphs",value:function(){this.withAllSubmorphsDo(function(a){return a.acceptsDrops=!0})}},{key:"wantsToBeDroppedOn",value:function(a){return!0}},{key:"onDropHoverIn",value:function(a){}},{key:"onDropHoverUpdate",value:function(a){}},{key:"onDropHoverOut",value:function(a){}},{key:"onBeingDroppedOn",value:function(a,f){f.addMorph(this)}},{key:"onHoverIn",value:function(a){this.master&&this.requestMasterStyling()}},
{key:"onHoverOut",value:function(a){this.master&&this.requestMasterStyling()}},{key:"onScroll",value:function(a){}},{key:"onMouseWheel",value:function(a){}},{key:"onNativeDrop",value:function(a){}},{key:"onNativeDragleave",value:function(a){}},{key:"onNativeDragenter",value:function(a){}},{key:"onNativeDragover",value:function(a){}},{key:"onNativeDragend",value:function(a){}},{key:"onNativeDragstart",value:function(a){}},{key:"onNativeDrag",value:function(a){}},{key:"focus",value:function(){var a=
this.env.eventDispatcher;a&&a.focusMorph(this)}},{key:"onFocus",value:function(a){}},{key:"onBlur",value:function(a){}},{key:"isFocused",value:function(){var a=this.env.eventDispatcher;return a&&a.isMorphFocused(this)}},{key:"exportToJSON",value:function(a){return mc.serializeSpec(this,a)}},{key:"initFromJSON",value:function(a){var f=this;this._env=a.env||a._env||mc.MorphicEnv.default();this._rev=0;this._owner=null;this._dirty=!0;this._submorphOrderChanged=this._rendering=!1;this._id=a._id||mc.newMorphId(mc.getClassName(this));
this._animationQueue=new mc.AnimationQueue(this);this._cachedPaths={};this._pathDependants=[];this._tickingScripts=[];this.dontRecordChangesWhile(function(){f.initializeProperties();mc.deserializeSpec(a,function(m){return mc.morph(m)},f)});return this}},{key:"copyViaJSON",value:function(){var a=this.exportToJSON();mc.tree.prewalk(a,function(f){return f._id=mc.newMorphId(f.type)},function(f){return f.submorphs});a.name=a.name.replace(/copy( [0-9]+)?$/,function(f,m){return"copy "+(m&&m.trim()?Number(m)+
1:"1")});return mc.morph({type:a.type}).initFromJSON(a)}},{key:"canBeCopied",value:function(){return!0}},{key:"copy",value:function(a){return mc.copyMorph(this,void 0===a?!1:a)}},{key:"interactivelyPublish",value:function(){var a=this,f,m,r,v,x;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){switch(y.nextAddress){case 1:return f=a.world()||a.env.world,y.setCatchFinallyBlocks(2),y.yield(System.import("lively.morphic/partsbin.js"),4);case 4:return m=y.yieldResult,r=m.interactivelySavePart,
y.yield(r(a,{notifications:!1,loadingIndicator:!0}),5);case 5:v=y.yieldResult;f.setStatusMessage(v?"Published "+a+" as "+v.name:"Failed to publish part "+a,v?mc.Color.green:mc.Color.red);y.leaveTryBlock(0);break;case 2:x=y.enterCatchBlock(),"canceled"!=x&&f.showError(x),y.jumpToEnd()}})}},{key:"makeDirty",value:function(a){this._dirty=!0;this.owner&&this.owner.makeDirty()}},{key:"needsRerender",value:function(){return this._dirty}},{key:"aboutToRender",value:function(a){this._dirty=!1;this._rendering=
!0}},{key:"onAfterRender",value:function(a){}},{key:"whenRendered",value:function(a){return this.env.whenRendered(this,void 0===a?50:a).then(function(){return!0}).catch(function(){return!1})}},{key:"render",value:function(a){this._requestMasterStyling&&(this.master&&this.master.applyIfNeeded(!0),this._requestMasterStyling=!1);return a.renderMorph(this)}},{key:"applyLayoutIfNeeded",value:function(){if(this._dirty){for(var a=0;a<this.submorphs.length;a++)this.submorphs[a].applyLayoutIfNeeded();this.layout&&
!this.layout.manualUpdate&&this.layout.forceLayout()}}},{key:"requestMasterStyling",value:function(){var a=this;this._rendering||(this.master&&this.master._hasUnresolvedMaster&&(this.master._capturedExtents=new WeakMap,this.withAllSubmorphsDo(function(f){return a.master._capturedExtents.set(f,f.extent)})),this.master&&(this._requestMasterStyling=!0,this.makeDirty()))}},{key:"requestStyling",value:function(){this.withAllSubmorphsDo(function(a){a._wantsStyling=!0;a.makeDirty()})}},{key:"renderAsRoot",
value:function(a){var f=this;this.dontRecordChangesWhile(function(){f.applyLayoutIfNeeded()});return mc.renderRootMorph(this,a)}},{key:"renderPreview",value:function(a,f){a=void 0===a?{}:a;f=void 0===f?this.env.renderer:f;return f.renderPreview(this,a)}},{key:"startStepping",value:function(){var a=Array.from(arguments),f="number"===typeof a[0]?a.shift():null,m=a.shift();a=new mc.TargetScript(this,m,a);this.removeEqualScripts(a);this._tickingScripts.push(a);a.startTicking(f);return a}},{key:"tickingScripts",
get:function(){return this._tickingScripts}},{key:"stopStepping",value:function(){mc.arr.invoke(this._tickingScripts,"stop");this._tickingScripts.length=[]}},{key:"stopSteppingScriptNamed",value:function(a){var f=this._tickingScripts.filter(function(m){return m.selector===a});this.stopScripts(f)}},{key:"stopScripts",value:function(a){mc.arr.invoke(a,"stop");this._tickingScripts=mc.arr.withoutAll(this._tickingScripts,a)}},{key:"suspendStepping",value:function(){this._tickingScripts&&mc.arr.invoke(this._tickingScripts,
"suspend")}},{key:"suspendSteppingAll",value:function(){this.withAllSubmorphsDo(function(a){return a.suspendStepping()})}},{key:"resumeStepping",value:function(){mc.arr.invoke(this._tickingScripts,"resume")}},{key:"resumeSteppingAll",value:function(){this.withAllSubmorphsDo(function(a){return mc.arr.invoke(a._tickingScripts,"resume")})}},{key:"removeEqualScripts",value:function(a){this.stopScripts(this._tickingScripts.filter(function(f){return f.equals(a)}))}},{key:"addComment",value:function(a,f){f=
void 0===f?mc.pt(0,0):f;var m=this,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){return 1==v.nextAddress?(r=new mc.Comment(a,f),m.comments.push(r),v.yield(mc.CommentBrowser.addCommentForMorph(r,m),2)):v.return(r)})}},{key:"removeComment",value:function(a){var f=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){f.comments=f.comments.filter(function(r){return!a.equals(r)});mc.CommentBrowser.removeCommentForMorph(a,f);m.jumpToEnd()})}},{key:"emptyComments",value:function(){var a=
this;this.comments.forEach(function(f){return mc.CommentBrowser.removeCommentForMorph(f,a)});this.comments=[]}},{key:"commands",get:function(){return this._commands||[]}},{key:"commands",set:function(a){this._commands&&this.removeCommands(this._commands);this.addCommands(a)}},{key:"commandsIncludingOwners",get:function(){return mc.arr.flatmap([this].concat(this.ownerChain()),function(a){return mc.arr.sortByKey(a.commands,"name").map(function(f){return{target:a,command:f}})})}},{key:"addCommands",
value:function(a){var f=this;this.addMethodCallChangeDoing({target:this,selector:"addCommands",args:[a],undo:{target:this,selector:"removeCommands",args:[a]}},function(){f.removeCommands(a);f._commands=(f._commands||[]).concat(a)})}},{key:"removeCommands",value:function(a){var f=this;this.addMethodCallChangeDoing({target:this,selector:"removeCommands",args:[a],undo:{target:this,selector:"addCommands",args:[a]}},function(){var m=a.map(function(v){return"string"===typeof v?v:v.name}),r=(f._commands||
[]).filter(function(v){return!m.includes(v.name)});r.length?f._commands=r:delete f._commands})}},{key:"commandHandler",get:function(){return this._commandHandler||mc.defaultCommandHandler}},{key:"lookupCommand",value:function(a){return(a=this.commandHandler.lookupCommand(a,this))&&a.command?a:null}},{key:"execCommand",value:function(a,f,m,r){return this.commandHandler.exec(a,this,f,m,r)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Morph"}},{key:"propertySettings",get:function(){return{defaultGetter:function(a){return this.getProperty(a)},
defaultSetter:function(a,f){this.setProperty(a,f)},valueStoreProperty:"_morphicState"}}},{key:"properties",get:function(){return Object.assign({name:{group:"core",initialize:function(a){a||(a=mc.getClassName(this),a=mc.string.findArticle(a)+a);this.name=a}},isComponent:{group:"core",defaultValue:!1,after:["master"],set:function(a){this.setProperty("isComponent",a);a&&(this.master||delete this._parametrizedProps)}},master:{before:["metadata"],group:"core",set:function(a){this.master&&this.master.equals(a)||
(this.setProperty("master",a?mc.ComponentPolicy.for(this,a):0==a?!1:null),a&&this.requestMasterStyling())}},renderOnGPU:{group:"core",defaultValue:!1},draggable:{group:"interaction",isStyleProp:!0,defaultValue:!1},grabbable:{group:"interaction",isStyleProp:!0,defaultValue:!1,set:function(a){a&&!this.draggable&&(this.draggable=!0);this.setProperty("grabbable",a)}},acceptsDrops:{group:"interaction",isStyleProp:!0,defaultValue:!0},grayscale:{group:"styling",type:"Number",isStyleProp:!0,defaultValue:0,
min:0,max:1,isFloat:!0},blur:{group:"styling",type:"Number",isStyleProp:!0,defaultValue:0,min:0,isFloat:!0},dropShadow:{group:"styling",type:"Shadow",isStyleProp:!0,defaultValue:null,set:function(a){a&&!a.isShadowObject&&(a=new mc.ShadowObject(a),a.morph=this);this.setProperty("dropShadow",a)}},tooltip:{group:"core",defaultValue:null},focusable:{group:"interaction",defaultValue:!0},nativeCursor:{group:"interaction",type:"Enum",values:"auto default none context-menu help pointer progress wait cell crosshair text vertical-text alias copy move no-drop not-allowed e-resize n-resize ne-resize nw-resize s-resize se-resize sw-resize w-resize ew-resize ns-resize nesw-resize nwse-resize col-resize row-resize all-scroll zoom-in zoom-out grab grabbing".split(" "),
isStyleProp:!0,defaultValue:"auto"},halosEnabled:{group:"interaction",isStyleProp:!0,defaultValue:!!mc.config.halosEnabled},reactsToPointer:{group:"interaction",isStyleProp:!0,defaultValue:!0},position:{group:"geometry",type:"Point",isStyleProp:!0,defaultValue:mc.pt(0,0)},origin:{group:"geometry",type:"Point",isStyleProp:!0,defaultValue:mc.pt(0,0)},extent:{group:"geometry",type:"Point",isStyleProp:!0,defaultValue:mc.pt(10,10),set:function(a){var f=this.extent;this.setProperty("extent",a);this.origin.equals(mc.pt(0,
0))||(a=mc.pt(a.x/f.x,a.y/f.y),this.adjustOrigin(this.origin.scaleByPt(a)))}},width:{group:"geometry",derived:!0,after:["extent"],before:["submorphs"],get:function(){return this.extent.x},set:function(a){return this.extent=mc.pt(a,this.extent.y)}},height:{group:"geometry",derived:!0,after:["extent"],before:["submorphs"],get:function(){return this.extent.y},set:function(a){return this.extent=mc.pt(this.extent.x,a)}},left:{group:"geometry",derived:!0,after:["extent","submorphs","layout"],get:function(){return this.bounds().left()},
set:function(a){return this.moveBy(mc.pt(a-this.left),0)}},right:{group:"geometry",derived:!0,after:["extent","submorphs","layout"],get:function(){return this.bounds().right()},set:function(a){return this.moveBy(mc.pt(a-this.right),0)}},top:{group:"geometry",derived:!0,after:["extent","submorphs","layout"],get:function(){return this.bounds().top()},set:function(a){return this.moveBy(mc.pt(0,a-this.top))}},bottom:{group:"geometry",derived:!0,after:["extent","submorphs","layout"],get:function(){return this.bounds().bottom()},
set:function(a){return this.moveBy(mc.pt(0,a-this.bottom))}},center:{group:"geometry",derived:!0,after:["extent","submorphs","layout"],get:function(){return this.bounds().center()},set:function(a){return this.align(this.center,a)}},topLeft:{group:"geometry",derived:!0,after:["extent","submorphs","layout"],get:function(){return this.bounds().topLeft()},set:function(a){return this.align(this.topLeft,a)}},topRight:{group:"geometry",derived:!0,after:["extent","submorphs","layout"],get:function(){return this.bounds().topRight()},
set:function(a){return this.align(this.topRight,a)}},bottomRight:{group:"geometry",derived:!0,after:["extent","layout"],get:function(){return this.bounds().bottomRight()},set:function(a){return this.align(this.bottomRight,a)}},bottomLeft:{group:"geometry",derived:!0,after:["extent","submorphs","layout"],get:function(){return this.bounds().bottomLeft()},set:function(a){return this.align(this.bottomLeft,a)}},bottomCenter:{group:"geometry",derived:!0,after:["extent","submorphs","layout"],get:function(){return this.bounds().bottomCenter()},
set:function(a){return this.align(this.bottomCenter,a)}},topCenter:{group:"geometry",derived:!0,after:["extent","submorphs","layout"],get:function(){return this.bounds().topCenter()},set:function(a){return this.align(this.topCenter,a)}},leftCenter:{group:"geometry",derived:!0,after:["extent","submorphs"],get:function(){return this.bounds().leftCenter()},set:function(a){return this.align(this.leftCenter,a)}},rightCenter:{group:"geometry",derived:!0,after:["extent","submorphs"],get:function(){return this.bounds().rightCenter()},
set:function(a){return this.align(this.rightCenter,a)}},rotation:{group:"geometry",type:"Number",isFloat:!0,isStyleProp:!0,defaultValue:0},flipped:{group:"geometry",type:"Number",isFloat:!0,isStyleProp:!0,defaultValue:0,min:0,max:1},tilted:{group:"geometry",type:"Number",isFloat:!0,isStyleProp:!0,defaultValue:0,min:0,max:1},perspective:{group:"geometry",type:"Number",isStyleProp:!0,defaultValue:0,min:0},scale:{group:"geometry",type:"Number",min:0,isFloat:!0,isStyleProp:!0,defaultValue:1},hasFixedPosition:{group:"geometry",
doc:"When morph is submorph of world hasFixedPosition == true will keep the morph at the same position relative to top left of the browser window. This means, when the world is scrolled, the morph keeps its place.",defaultValue:!1},opacity:{group:"styling",type:"Number",isFloat:!0,min:0,max:1,isStyleProp:!0,defaultValue:1},fill:{group:"styling",type:"ColorGradient",isStyleProp:!0,defaultValue:mc.Color.white},visible:{group:"styling",isStyleProp:!0,defaultValue:!0,set:function(a){a||this.makeDirty();
this.setProperty("visible",a)}},submorphs:{group:"core",defaultValue:[],after:["isLayoutable","origin","position","rotation","scale"],get:function(){return(this.getProperty("submorphs")||[]).concat()},set:function(a){var f=this,m=this.layout,r=m&&m.isEnabled();r&&m.disable();this.submorphs.forEach(function(v){return a.includes(v)||v.remove()});a.forEach(function(v,x){return f.submorphs[x]!==v&&f.addMorph(v,f.submorphs[x])});r&&m.enable()}},clipMode:{group:"styling",type:"Enum",values:["visible","hidden",
"scroll","auto"],isStyleProp:!0,defaultValue:"visible",set:function(a){this.setProperty("clipMode",a);this.isClip()||(this.scroll=mc.pt(0,0))}},scroll:{group:"geometry",defaultValue:mc.pt(0,0),after:["clipMode","submorphs"],type:"Point",set:function(a){var f=a.x;a=a.y;if(this.isClip()){var m=this.scrollExtent.subPt(this.extent),r=m.y;f=Math.max(0,Math.min(m.x,f));a=Math.max(0,Math.min(r,a));this.setProperty("scroll",mc.pt(f,a));this.makeDirty()}}},scrollbarOffset:{group:"styling",defaultValue:mc.pt(15,
15)},styleClasses:{group:"styling",isStyleProp:!0,defaultValue:["morph"],get:function(){return this._cachedStyleClasses||(this._cachedStyleClasses=this.constructor.styleClasses.concat(this.getProperty("styleClasses")))},set:function(a){this._cachedStyleClasses=null;this.setProperty("styleClasses",mc.arr.withoutAll(a,this.constructor.styleClasses));this.requestStyling()}},layout:{group:"layouting",isStyleProp:!0,type:"Layout",after:["submorphs","extent","origin","position","isLayoutable"],set:function(a){a&&
(a.container=this);this.setProperty("layout",a)}},isLayoutable:{group:"layouting",isStyleProp:!0,defaultValue:!0},borderLeft:{group:"styling",isStyleProp:!0,derived:!0,after:["borderStyleLeft","borderWidthLeft","borderColorLeft"],get:function(){return{style:this.borderStyleLeft,width:this.borderWidthLeft,color:this.borderColorLeft}},set:function(a){"style"in a&&(this.borderStyleLeft=a.style);"width"in a&&(this.borderWidthLeft=a.width);"color"in a&&(this.borderColorLeft=a.color);"radius"in a&&(this.borderRadiusLeft=
a.radius)}},borderRight:{group:"styling",isStyleProp:!0,derived:!0,after:["borderStyleRight","borderWidthRight","borderColorRight"],get:function(){return{style:this.borderStyleRight,width:this.borderWidthRight,color:this.borderColorRight}},set:function(a){"style"in a&&(this.borderStyleRight=a.style);"width"in a&&(this.borderWidthRight=a.width);"color"in a&&(this.borderColorRight=a.color);"radius"in a&&(this.borderRadiusRight=a.radius)}},borderBottom:{group:"styling",isStyleProp:!0,derived:!0,after:["borderStyleBottom",
"borderWidthBottom","borderColorBottom"],get:function(){return{style:this.borderStyleBottom,width:this.borderWidthBottom,color:this.borderColorBottom}},set:function(a){"style"in a&&(this.borderStyleBottom=a.style);"width"in a&&(this.borderWidthBottom=a.width);"color"in a&&(this.borderColorBottom=a.color);"radius"in a&&(this.borderRadiusBottom=a.radius)}},borderTop:{group:"styling",isStyleProp:!0,derived:!0,after:["borderStyleTop","borderWidthTop","borderColorTop"],get:function(){return{style:this.borderStyleTop,
width:this.borderWidthTop,color:this.borderColorTop}},set:function(a){"style"in a&&(this.borderStyleTop=a.style);"width"in a&&(this.borderWidthTop=a.width);"color"in a&&(this.borderColorTop=a.color);"radius"in a&&(this.borderRadiusTop=a.radius)}},borderWidth:{group:"styling",isStyleProp:!0,type:"Number",foldable:["top","left","right","bottom"],min:0,defaultValue:{top:0,bottom:0,left:0,right:0,valueOf:function(){return 0}},get:function(){var a=this.getProperty("borderWidth");return Object.assign({},
a,{valueOf:function(){return a.left}})},set:function(a){mc.obj.isNumber(a)&&(a={left:a,right:a,top:a,bottom:a});this.setProperty("borderWidth",a)}}},mc.generateUnfolded("borderWidth",void 0,"styling"),{borderRadius:{group:"styling",isStyleProp:!0,type:"Number",min:0,foldable:["top","left","right","bottom"],defaultValue:{top:0,bottom:0,right:0,left:0,valueOf:function(){return 0}},get:function(){var a=this.getProperty("borderRadius");return Object.assign({},a,{valueOf:function(){return a.left}})},set:function(a){a||
(a=0);mc.obj.isNumber(a)&&(a={left:a,right:a,top:a,bottom:a});a.isRectangle&&(a={left:a.left(),right:a.right(),top:a.top(),bottom:a.bottom()});this.setProperty("borderRadius",a)}}},mc.generateUnfolded("borderRadius",void 0,"styling"),{borderStyle:{group:"styling",isStyleProp:!0,type:"Enum",foldable:["top","left","right","bottom"],values:"none hidden dotted dashed solid double groove ridge inset outset".split(" "),defaultValue:{top:"solid",left:"solid",bottom:"solid",right:"solid",valueOf:function(){return"solid"}},
get:function(){var a=this.getProperty("borderStyle");return Object.assign({},a,{valueOf:function(){return a.left}})},set:function(a){mc.obj.isString(a)&&(a={left:a,right:a,top:a,bottom:a});this.setProperty("borderStyle",a)}}},mc.generateUnfolded("borderStyle",void 0,"styling"),{borderColor:{group:"styling",isStyleProp:!0,type:"Color",foldable:["top","left","right","bottom"],defaultValue:{top:mc.Color.white,left:mc.Color.white,bottom:mc.Color.white,right:mc.Color.white,valueOf:function(){return mc.Color.white}},
get:function(){var a=this.getProperty("borderColor");return Object.assign({},a,{valueOf:function(){return a.left}})},set:function(a){a||(a=mc.Color.white);a.isColor&&(a={top:a,left:a,right:a,bottom:a});this.setProperty("borderColor",a?mc.obj.extract(a,["top","left","right","bottom"],function(f,m){return mc.obj.isArray(m)?mc.Color.fromTuple(m):m}):a)}}},mc.generateUnfolded("borderColor",void 0,"styling"),{border:{group:"styling",isStyleProp:!0,derived:!0,after:["borderStyle","borderWidth","borderColor"],
get:function(){var a=this;return{get style(){return a.borderStyle},set style(f){a.borderStyle=f},get width(){return a.borderWidth},set width(f){a.borderWidth=f},get color(){return a.borderColor},set color(f){a.borderColor=f},get borderRadius(){return a.borderRadius},set borderRadius(f){a.borderRadius=f}}},set:function(a){"style"in a&&(this.borderStyle=a.style);"width"in a&&(this.borderWidth=a.width);"color"in a&&(this.borderColor=a.color);"radius"in a&&(this.borderRadius=a.radius)}},styleProperties:{group:"styling",
derived:!0,readOnly:!0,get:function(){var a=this.propertiesAndPropertySettings(),f=a.properties,m=[];a=$jscomp.makeIterator(a.order);for(var r=a.next();!r.done;r=a.next())r=r.value,f[r].isStyleProp&&m.push(r);return m}},style:{group:"styling",derived:!0,readOnly:!0,get:function(){for(var a=this.styleProperties,f={},m=0;m<a.length;m++){var r=a[m];f[r]=this[r]}return f}},epiMorph:{group:"core",doc:"epi morphs are 'transient' morphs, i.e. meta objects that should not be serialized like halo items, menus, etc.",
defaultValue:!1},respondsToVisibleWindow:{group:"interaction",doc:"Morphs will respond to changes to the visible browser window and a call will be made to the morph's relayout function, supplying the event generated",defaultValue:!1},installedFonts:{doc:"custom fonts can be installed from a respective morph, and are then kept as part of this morph's state in order to be loaded again the next time the it is cold loaded. (i.e. deserialization of a part)",defaultValue:{},set:function(a){var f=mc.arr.without(mc.obj.keys(this.installedFonts||
{}),"_rev"),m=mc.arr.without(mc.obj.keys(a||{}),"_rev");this.setProperty("installedFonts",a);this.ensureInstalledFonts(f,m)},get:function(){return this.getProperty("installedFonts")||{}}},comments:{doc:"Holds all comments belonging to this Morph.",type:"list",defaultValue:[]},metadata:{group:"core"}})}},{key:"styleClasses",get:function(){if(this.hasOwnProperty("_styclassNames"))return this._styleClasses;for(var a=this,f=[];a&&a!==Object;)f.push(a[Symbol.for("__LivelyClassName__")]),a=a[Symbol.for("lively-instance-superclass")];
return this._styleClasses=f}}],e,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:1725,end:82199})}(void 0));mc.Morph=ql;mc.Morph=ql;mc.Morph=ql;var oD=Ha("aA",function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/morph.js"),l=e.hasOwnProperty("Ellipse")&&"function"===typeof e.Ellipse?
e.Ellipse:e.Ellipse=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Pb(l,b,void 0,[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Ellipse"}},{key:"properties",get:function(){return{borderRadius:{derived:!0,get:function(){var a=this;return{top:this.borderRadiusTop,right:this.borderRadiusRight,left:this.borderRadiusLeft,bottom:this.borderRadiusBottom,valueOf:function(){return a.borderRadiusLeft}}}},
borderRadiusLeft:{get:function(){return this.height},set:function(){}},borderRadiusRight:{get:function(){return this.height},set:function(){}},borderRadiusTop:{get:function(){return this.width},set:function(){}},borderRadiusBottom:{get:function(){return this.width},set:function(){}}}}}],e,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",
version:"0.1.2"}}},{start:82208,end:82965})}(mc.Morph));mc.Ellipse=oD;mc.Ellipse=oD;mc.Ellipse=oD;var XF=function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/morph.js"),l=e.hasOwnProperty("Triangle")&&"function"===typeof e.Triangle?e.Triangle:e.Triangle=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Pb(l,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){a=void 0===a?{}:a;Pb._get(Object.getPrototypeOf(l.prototype),
Symbol.for("lively-instance-initialize"),this).call(this,a);this.update()}},{key:"onChange",value:function(a){("extent"==a.prop||"direction"==a.prop||"fill"==a.prop&&a.value)&&this.update();Pb._get(Object.getPrototypeOf(l.prototype),"onChange",this).call(this,a)}},{key:"update",value:function(){var a=this.extent,f=a.x;a=a.y;f!=a&&(this.extent=mc.pt(Math.max(f,a),Math.max(f,a)));this.origin=mc.pt(f/2,a/2);var m=this.triangleFill=this.fill||this.triangleFill;this.fill=null;f={width:f/2,style:"solid",
color:m};a={width:a/2,style:"solid",color:mc.Color.transparent};switch(this.direction){case "down":var r="borderLeft";var v="borderRight";var x="borderTop";break;case "up":r="borderLeft";v="borderRight";x="borderBottom";break;case "left":r="borderBottom";v="borderTop";x="borderRight";break;case "right":r="borderBottom",v="borderTop",x="borderLeft"}m={};Object.assign(this,(m[r]=a,m[v]=a,m[x]=f,m))}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Triangle"}},{key:"properties",get:function(){return{direction:{defaultValue:"up"},
triangleFill:{after:["fill"],initialize:function(){this.triangleFill=this.fill}}}}}],e,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:82974,end:84432})}(mc.Morph);mc.Triangle=XF;mc.Triangle=XF;mc.Triangle=XF;var OA=Ha("I",function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/morph.js"),
l=e.hasOwnProperty("Image")&&"function"===typeof e.Image?e.Image:e.Image=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Pb(l,b,[{key:"__deserialize__",value:function(a,f,m,r){this._isDeserializing=!0;Pb._get(Object.getPrototypeOf(l.prototype),"__deserialize__",this).call(this,a,f,m,r)}},{key:"__after_deserialize__",value:function(a,f,m){delete this._isDeserializing;Pb._get(Object.getPrototypeOf(l.prototype),"__after_deserialize__",
this).call(this,a,f,m)}},{key:"isImage",get:function(){return!0}},{key:"ratio",get:function(){var a=this.naturalExtent;return a.x/a.y}},{key:"setWidthKeepingRatio",value:function(a){this.width=a;this.height=a/this.ratio}},{key:"setHeightKeepingRatio",value:function(a){this.width=this.ratio*a;this.height=a}},{key:"loadUrl",value:function(a,f){var m=this;f=void 0===f?this.autoResize:f;var r=this.autoResize;this.autoResize=f;this.imageUrl=a;return mc.promise.finally(this.whenLoaded(),function(){return m.autoResize=
r})}},{key:"whenLoaded",value:function(){var a=this;return this.isLoaded?Promise.resolve(this):new Promise(function(f,m){var r=a.imageUrl;a.imageElement(function(v){a.imageUrl!==r&&m(Error("url changed ("+r+" => "+a.imageUrl+")"));a.naturalExtent=mc.pt(v.width,v.height);a.isLoaded=!0;f(a)})})}},{key:"determineNaturalExtent",value:function(){var a=this;return this.whenLoaded().then(function(){return a.naturalExtent})}},{key:"render",value:function(a){this._requestMasterStyling&&(this.master&&this.master.applyIfNeeded(!0),
this._requestMasterStyling=!1);return a.renderImage(this)}},{key:"clear",value:function(){return this.loadUrl("data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",!1)}},{key:"imageElement",value:function(a){var f=this;return new Promise(function(m,r){var v=f.env.domEnv.document.createElement("img");v.onload=function(){m(v);"function"===typeof a&&a(v)};v.src=f.imageUrl})}},{key:"canvasElementAndContext",value:function(){var a=this,f,m,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(x){if(1==
x.nextAddress)return f=a.env.domEnv.document,x.yield(a.imageElement(),2);m=x.yieldResult;r=f.createElement("canvas");v=r.getContext("2d");r.width=m.width;r.height=m.height;v.drawImage(m,0,0,m.width,m.height);return x.return({canvas:r,ctx:v,image:m})})}},{key:"imageData",value:function(a){var f=this,m,r,v,x,y,E,F,I;return $jscomp.asyncExecutePromiseGeneratorProgram(function(J){if(1==J.nextAddress)return J.yield(f.canvasElementAndContext(),2);m=J.yieldResult;r=m.ctx;v=m.image;a||(a=mc.rect(0,0,v.width,
v.height));x=a;y=x.x;E=x.y;F=x.width;I=x.height;console.log(y,E);return J.return(r.getImageData(y,E,F,I))})}},{key:"pixelAt",value:function(a){var f=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){return 1==m.nextAddress?m.yield(f.imageData(a.extent(mc.pt(1,1))),2):m.return(m.yieldResult.data)})}},{key:"colorAt",value:function(a){var f=this,m,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){return 1==v.nextAddress?(m=mc.Color,r=m.fromTuple8Bit,v.yield(f.pixelAt(a),
2)):v.return(r.call(m,v.yieldResult))})}},{key:"loadArrayBuffer",value:function(a,f){a=new Uint8Array(a);a=new Blob([a],{type:"image/jpeg"});this.imageUrl=(window.URL||window.webkitURL).createObjectURL(a);this.makeDirty()}},{key:"convertToBase64",value:function(){var a=this,f,m,r,v,x,y,E;return $jscomp.asyncExecutePromiseGeneratorProgram(function(F){if(1==F.nextAddress)return f=a.imageUrl,m=f.slice(f.lastIndexOf(".")+1,f.length).toLowerCase(),"jpg"===m?m="jpeg":"svg"===m&&(m="svg+xml"),["gif","jpeg",
"png","tiff","svg+xml"].includes(m)||(m="gif"),f.startsWith("http")||(f=mc.location.origin+"/"+f),F.yield(System.import("lively.ide/shell/shell-interface"),2);if(3!=F.nextAddress)return r=F.yieldResult,v=r.runCommand,x='curl --silent "'+f+'" | openssl base64',F.yield(v(x).whenDone(),3);y=F.yieldResult;E=y.stdout;return F.return(a.loadUrl("data:image/"+m+";base64,"+E,!1))})}},{key:"downloadImage",value:function(){var a=this.imageUrl;if(a.match(/^data:image/)){var f=this.name||"image-from-lively";var m=
a.match(/image\/([^;]+)/);m&&m[1]&&(f+="."+m[1])}else f||(f=mc.arr.last(a.split("/")));m=document.createElement("a");m.download=f;m.href=a;m.click()}},{key:"convertTo",value:function(a,f){f||(f=1);var m=this.canvasElementAndContext(),r=m.ctx,v=m.canvas;m=m.image;var x=this.width,y=this.height;v.width=m.width;v.height=m.height;r.drawImage(m,0,0,x,y);return this.loadUrl(v.toDataURL(a,f),!1)}},{key:"resampleImageToFitBounds",value:function(){var a=this,f,m,r,v,x,y,E,F,I,J,P;return $jscomp.asyncExecutePromiseGeneratorProgram(function(N){if(1==
N.nextAddress)return N.yield(a.canvasElementAndContext(),2);f=N.yieldResult;m=f.ctx;r=f.canvas;v=f.image;x=a;y=x.width;E=x.height;F=v;I=F.width;J=F.height;r.width=I;r.height=J;m.drawImage(v,0,0,y,E);P=m.getImageData(0,0,I,J);r.width=y;r.height=E;m.putImageData(P,0,0);return N.return(a.loadUrl(r.toDataURL(),!1))})}},{key:"crop",value:function(a){var f=this.canvasElementAndContext(),m=f.ctx,r=f.canvas;f=f.image;var v=this.innerBounds(),x=f.width,y=f.height;a=v.intersection(a);a=new mc.Rectangle(a.x/
v.width,a.y/v.height,a.width/v.width,a.height/v.height);a=$jscomp.makeIterator((new mc.Rectangle(0,0,x,y)).divide([a])).next().value;r.width=x;r.height=y;m.drawImage(f,0,0,x,y);f=m.getImageData(a.x,a.y,a.width,a.height);r.width=a.width;r.height=a.height;m.putImageData(f,0,0);return this.loadUrl(r.toDataURL(),!1)}},{key:"interactivelyChangeImageURL",value:function(){var a=this,f;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){if(1==m.nextAddress)return m.yield(a.world().prompt("Enter image url",
{historyId:"lively.morphic-image-url-inputs",input:a.imageUrl.startsWith("data:")?"":a.imageUrl,requester:a}),2);f=m.yieldResult;"string"===typeof f&&(a.imageUrl=f);m.jumpToEnd()})}},{key:"menuItems",value:function(){var a=this,f=Pb._get(Object.getPrototypeOf(l.prototype),"menuItems",this).call(this);f.unshift(["change image url...",function(){return a.interactivelyChangeImageURL()}],["resize image to to fit world",function(){var m=Math.min(a.world().visibleBounds().width/a.naturalExtent.x,a.world().visibleBounds().height/
a.naturalExtent.y);a.extent=a.naturalExtent.scaleBy(m)}],["resize image to its real image size",function(){var m;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){return 1==r.nextAddress?(m=a,r.yield(a.determineNaturalExtent(),2)):r.return(m.extent=r.yieldResult)})}],["resample image to fit current bounds",function(){return a.resampleImageToFitBounds()}],{isDivider:!0});return f}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Image"}},{key:"properties",get:function(){return{imageUrl:{isStyleProp:!0,
copyAssetOnFreeze:!0,after:["extent","autoResize"],defaultValue:System.decanonicalize("lively.morphic/lively-web-logo-small.svg"),set:function(a){var f=this;this.isLoaded=!1;this.setProperty("imageUrl",a);this.setProperty("naturalExtent",null);var m=this.autoResize&&!this._isDeserializing;this.whenLoaded().then(function(){f.imageUrl===a&&(f.isLoaded=!0,m&&(f.extent=f.naturalExtent))})}},fill:{defaultValue:mc.Color.transparent},naturalExtent:{defaultValue:null},isLoaded:{defaultValue:!1,serialize:!1},
autoResize:{isStyleProp:!0,defaultValue:!1}}}}],e,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:84441,end:93803})}(mc.Morph));mc.Image=OA;mc.Image=OA;mc.Image=OA;var CJ=function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/morph.js"),l=e.hasOwnProperty("PathPoint")&&"function"===
typeof e.PathPoint?e.PathPoint:e.PathPoint=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Pb(l,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a,f){f=void 0===f?{}:f;this.path=a;this._isSmooth=f.isSmooth||!1;this.x=f.position?f.position.x:f.x||0;this.y=f.position?f.position.y:f.y||0;this._controlPoints=f.controlPoints}},{key:"__dont_serialize__",get:function(){return["attributeConnections","$$controlPoints",
"$$position","doNotCopyProperties","doNotSerialize"]}},{key:"isPathPoint",get:function(){return!0}},{key:"isSmooth",get:function(){return this._isSmooth||!1}},{key:"isSmooth",set:function(a){this._isSmooth!==a&&(this._isSmooth=a,this.adaptControlPoints(a))}},{key:"position",get:function(){return mc.pt(this.x,this.y)}},{key:"position",set:function(a){var f=a.y;this.x=a.x;this.y=f;this.path.makeDirty()}},{key:"moveBy",value:function(a){this.position=this.position.addPt(a);this.path.onVertexChanged(this);
return this}},{key:"copy",value:function(){var a=new mc.ExpressionSerializer;return new mc.PathPoint(this.path,a.deserializeExprObj(this.__serialize__()))}},{key:"__serialize__",value:function(){return{__expr__:("({\n         position: "+this.position.toString(!1)+",\n         isSmooth: "+this.isSmooth+",\n         controlPoints: {\n           next: "+this.controlPoints.next.toString(!1)+",\n           previous: "+this.controlPoints.previous.toString(!1)+"\n         }\n      })").replace(/[\n|\s]/g,
""),bindings:{"lively.graphics/geometry-2d.js":["pt"]}}}},{key:"controlPoints",get:function(){return this._controlPoints||{next:mc.pt(0,0),previous:mc.pt(0,0)}}},{key:"controlPoints",set:function(a){var f=a=void 0===a?{}:a;a=f.next;f=f.previous;this._controlPoints={next:a?mc.Point.fromLiteral(a):mc.pt(0,0),previous:f?mc.Point.fromLiteral(f):mc.pt(0,0)};this.path.makeDirty()}},{key:"moveNextControlPoint",value:function(a){this.moveControlPoint("next",a)}},{key:"movePreviousControlPoint",value:function(a){this.moveControlPoint("previous",
a)}},{key:"moveControlPoint",value:function(a,f){var m=this.controlPoints[a];m=m?m.addPt(f):f;f="next"==a?"previous":"next";var r=this.controlPoints[f];this.isSmooth&&(r=m.negated().normalized().scaleBy(r.r()));var v={};this.controlPoints=(v[a]=m,v[f]=r,v);this.path.onVertexChanged(this)}},{key:"pointOnLine",value:function(a,f,m,r){a=mc.pt(a.x,a.y);f=mc.pt(f.x,f.y);a=f.subPt(a);var v=a.scaleBy(1/a.r());m=f.subPt(m).dotProduct(v);return f.subPt(v.scaleBy(Math.max(1,Math.min(m,a.r())))).addXY(r,r)}},
{key:"nextVertex",get:function(){return this.path.vertexAfter(this)}},{key:"previousVertex",get:function(){return this.path.vertexBefore(this)}},{key:"interpolate",value:function(a,f){var m=this.copy();m.position=m.position.interpolate(a,f);return m}},{key:"adaptControlPoints",value:function(a){var f=this.nextVertex,m=this.previousVertex,r=this.position,v=this.path,x=v.vertices,y=x.indexOf(this),E=0===y;x=y===x.length-1;m=m?m.position:r;f=f?f.position:r;a?(a=this.pointOnLine(m,f,r,v.borderWidth),
this.controlPoints={previous:E?mc.pt(0,0):a.subPt(f),next:a.subPt(m)}):this.controlPoints={previous:E?mc.pt(0,0):m.subPt(r).scaleBy(.5),next:x?mc.pt(0,0):f.subPt(r).scaleBy(.5)};v.onVertexChanged(this)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"PathPoint"}}],e,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",
version:"0.1.2"}}},{start:93812,end:97777})}(void 0);mc.PathPoint=CJ;mc.PathPoint=CJ;mc.PathPoint=CJ;var pD=Ha("aY",function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/morph.js"),l=e.hasOwnProperty("Path")&&"function"===typeof e.Path?e.Path:e.Path=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Pb(l,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){a=void 0===a?{}:a;Pb._get(Object.getPrototypeOf(l.prototype),
Symbol.for("lively-instance-initialize"),this).call(this,Object.assign({},mc.obj.dissoc(a,"origin")));this.adjustOrigin(a.origin||this.origin);this.position=a.position||this.position;this.updateBounds(this.vertices)}},{key:"__after_deserialize__",value:function(a,f,m){Pb._get(Object.getPrototypeOf(l.prototype),"__after_deserialize__",this).call(this,a,f,m);this.updateBounds(this.vertices)}},{key:"__additionally_serialize__",value:function(a,f,m,r){Pb._get(Object.getPrototypeOf(l.prototype),"__additionally_serialize__",
this).call(this,a,f,m,r);f=this.getProperty("draggable");f!=this.propertiesAndPropertySettings().properties.draggable.defaultValue&&(a.props.draggable={value:f});if(f=this.borderColor.valueOf())a.props.borderColor={key:"borderColor",value:m.expressionSerializer.exprStringEncode({__expr__:f.toJSExpr(),bindings:{"lively.graphics/geometry-2d.js":["pt","rect"],"lively.graphics/color.js":["Color",mc.getClassName(f)]}})}}},{key:"isPath",get:function(){return!0}},{key:"isSvgMorph",get:function(){return!0}},
{key:"onVertexChanged",value:function(a){this.makeDirty();this.updateBounds(this.vertices)}},{key:"copyVertices",value:function(){return this.vertices.map(function(a){return a.copy()})}},{key:"updateBounds",value:function(a){a=void 0===a?this.vertices:a;if(a.length&&!this._adjustingVertices){this._adjustingVertices=!0;var f=this.origin,m=this.extent,r=f.x/m.x;m=f.y/m.y;var v=[];a.forEach(function(y,E){var F=y.isSmooth,I=y.position,J=y.controlPoints||{};y=J.next;J=J.previous;v.push(I);F&&0<E&&E<a.length-
1&&v.push(I.addPt(y),I.addPt(J))});f=mc.Rectangle.unionPts(v);r=mc.pt(f.width*r,f.height*m);var x=f.topLeft();a.forEach(function(y){return y.moveBy(x.negated())});this.moveBy(this.getTransform().transformDirection(x));this.extent=f.extent().maxPt(mc.pt(this.borderWidth,this.borderWidth));this.origin=r;this._adjustingVertices=!1}}},{key:"onChange",value:function(a){var f=a.prop,m=a.value,r=a.prevValue,v=this._adjustingVertices,x=this._adjustingOrigin;"extent"==f&&m&&r&&!v&&this.adjustVertices(m.scaleByPt(r.inverted()));
(!x&&"vertices"===f||"borderWidthLeft"===f)&&this.updateBounds("vertices"==f?m:this.vertices);v||"origin"!==f||this.updateBounds(this.vertices);Pb._get(Object.getPrototypeOf(l.prototype),"onChange",this).call(this,a)}},{key:"vertexBefore",value:function(a){a=this.vertices.indexOf(a)-1;return this.vertices[0<=a?a:this.vertices.length-1]}},{key:"vertexAfter",value:function(a){a=this.vertices.indexOf(a)+1;return this.vertices[a>this.vertices.length-1?0:a]}},{key:"adjustVertices",value:function(a){var f=
this,m=this.vertices;m&&m.forEach(function(r){var v=r.controlPoints,x=v.next;v=v.previous;x=x.scaleByPt(a);v=v.scaleByPt(a);r.position=r.position.addPt(f.origin).scaleByPt(a).subPt(f.origin);r.controlPoints={next:x,previous:v}})}},{key:"adjustOrigin",value:function(a){this._adjustingOrigin=!0;var f=this.origin;this.vertices.forEach(function(m){return m.position=f.subPt(a).addXY(m.x,m.y)});Pb._get(Object.getPrototypeOf(l.prototype),"adjustOrigin",this).call(this,a);this._adjustingOrigin=!1}},{key:"addVertex",
value:function(a,f){f=void 0===f?null:f;var m=this.vertices;f="number"===typeof f?f:f&&f.isPathPoint?m.indexOf(f):void 0;"number"===typeof f&&-1<f?m.splice(f,0,a):m.push(a);this.vertices=m}},{key:"addVertexCloseTo",value:function(a){var f=this.verticesCloseTo(a),m=f.closest,r=m.length;m=m.vertex;f=f.next;a=this.findClosestPointOnPath(a,10,3);return this.addVertex(a.point,a.length<=r?m:f?f.vertex:null)}},{key:"render",value:function(a){return a.renderPath(this)}},{key:"_pathNode",get:function(){var a=
mc.PropertyPath("env.renderer").get(this);return(a=a&&a.getNodeForMorph(this))&&a.querySelector("#svg"+mc.string.regExpEscape(this.id))}},{key:"verticesCloseTo",value:function(a,f){f=void 0===f?!0:f;for(var m=this.vertices,r=Infinity,v=-1,x=0;x<m.length;x++){var y=m[x].position.dist(a);y>=r||(r=y,v=x)}a=0===v?null:{index:v-1,vertex:m[v-1]};r=v===m.length-1?null:{index:v+1,vertex:m[v+1]};m={index:v,vertex:m[v]};f&&(f=this._pathNode,a&&(v=this.findClosestPointOnPath(a.vertex.position,6,3,f).length,
a.length=v),r&&(v=this.findClosestPointOnPath(r.vertex.position,6,3,f).length,r.length=v),f=this.findClosestPointOnPath(m.vertex.position,20,3,f).length,m.length=f);return{previous:a,next:r,closest:m}}},{key:"findClosestPointOnPath",value:function(a,f,m,r){function v(x,y,E,F,I,J,P){E=void 0===E?10:E;F=void 0===F?3:F;I=void 0===I?0:I;J=void 0===J?x.getTotalLength():J;P=void 0===P?0:P;var N=J,Y=E;J=[];var W=(I-N)/(Y-1),da=0;J.push([mc.Point.ensure(x.getPointAtLength(N)),N,da]);for(da=1;da<Y-1;da++){var va=
N+da*W;J.push([mc.Point.ensure(x.getPointAtLength(va)),va,da])}J.push([mc.Point.ensure(x.getPointAtLength(I)),I,da]);I=Infinity;N=-1;Y=$jscomp.makeIterator(J);for(W=Y.next();!W.done;W=Y.next())da=$jscomp.makeIterator(W.value),W=da.next().value,da.next(),da=da.next().value,W=y.dist(W),W>=I||(I=W,N=da);if(P>=F)return y=$jscomp.makeIterator(J[N]),x=y.next().value,y=y.next().value,{point:x,length:y};I=J[Math.max(0,N-1)][1];J=J[Math.min(J.length-1,N+1)][1];return v(x,y,E,F,I,J,P+1)}r||(r=(r=this.env.renderer.getNodeForMorph(this))&&
r.querySelector("#svg"+mc.string.regExpEscape(this.id)));return r?v(r,a,f,m):{length:0,point:a}}},{key:"onDragStart",value:function(a){var f=a.domEvt.target,m=(new mc.PropertyPath("attributes.class.value")).get(f);if(m&&m.includes("path-point"))m=$jscomp.makeIterator(m.match(/path-point-([0-9]+)(?:-control-([0-9]+))?$/)),m.next(),a=m.next().value,m=m.next().value,this._controlPointDrag={marker:f,n:Number(a)},void 0!==m&&(this._controlPointDrag.ctrlN=Number(m));else return Pb._get(Object.getPrototypeOf(l.prototype),
"onDragStart",this).call(this,a)}},{key:"onDrag",value:function(a){if(!this._controlPointDrag)return Pb._get(Object.getPrototypeOf(l.prototype),"onDrag",this).call(this,a);var f=this._controlPointDrag,m=f.n,r=f.ctrlN,v=this.vertices;if(f=v[m])a=this.getInverseTransform().transformDirection(a.state.dragDelta),void 0===r?(f.moveBy(a),a=v[m-1],v=v[m+1],a&&10>a.position.dist(f.position)?this._controlPointDrag.maybeMerge=[m-1,m]:v&&10>v.position.dist(f.position)?this._controlPointDrag.maybeMerge=[m,m+
1]:this._controlPointDrag.maybeMerge=void 0):1===r?f.movePreviousControlPoint(a):2===r&&f.moveNextControlPoint(a)}},{key:"onDragEnd",value:function(a){a=this.vertices;var f=this._controlPointDrag;if(f&&(f=f.maybeMerge,delete this._controlPointDrag,f)){var m=$jscomp.makeIterator(f);f=m.next().value;m=m.next().value;a[f].controlPoints.next=a[m].controlPoints.next;a.splice(m,1);this.vertices=a}}},{key:"onMouseDown",value:function(a){Pb._get(Object.getPrototypeOf(l.prototype),"onMouseDown",this).call(this,
a);2===a.state.clickCount&&this.addVertexCloseTo(this.localize(a.position))}},{key:"menuItems",value:function(){var a=this,f=mc.Icon.textAttribute("check-square",{textStyleClasses:["far"]}),m=mc.Icon.textAttribute("square",{textStyleClasses:["far"]});m[1].paddingRight="7px";f[1].paddingRight="5px";return[[[].concat($jscomp.arrayFromIterable(this.showControlPoints?f:m),[" control points"]),function(){return a.showControlPoints=!a.showControlPoints}],[[].concat($jscomp.arrayFromIterable(this.isSmooth?
f:m),[" smooth"]),function(){return a.isSmooth=!a.isSmooth}],{isDivider:!0}].concat($jscomp.arrayFromIterable(Pb._get(Object.getPrototypeOf(l.prototype),"menuItems",this).call(this)))}},{key:"getPointOnPath",value:function(a){if(!this._pathNode)return mc.pt(0,0);a=this._pathNode.getPointAtLength(this._pathNode.getTotalLength()*a)||mc.pt(0,0);return mc.pt(a.x,a.y)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Path"}},{key:"properties",get:function(){return{borderColor:{isStyleProp:!0,
type:"ColorGradient",foldable:["top","left","right","bottom"],set:function(a){a||(a=mc.Color.white);if(a.isColor||a.isGradient)a={top:a,left:a,right:a,bottom:a};this.setProperty("borderColor",mc.obj.extract(a,["top","left","right","bottom"],function(f,m){return mc.obj.isArray(m)?mc.Color.fromTuple(m):m}))}},showControlPoints:{defaultValue:!1},vertices:{defaultValue:[],isStyleProp:!0,after:["isSmooth","borderWidth"],before:["extent","origin"],type:"Vertices",set:function(a){var f=this,m=this.isSmooth;
this._adjustingVertices=!0;a=a.map(function(r){return r.isPathPoint?Object.assign(r,{path:f}):new mc.PathPoint(f,Object.assign({isSmooth:m},r))});this.setProperty("vertices",a);this._adjustingVertices=!1;this.updateBounds(a)}},startMarker:{defaultValue:null,type:"Object"},endMarker:{defaultValue:null,type:"Object"},endStyle:{isStyleProp:!0,type:"Enum",values:["butt","round","square"],defaultValue:"butt"},drawnProportion:{type:"Number",isStyleProp:!0,isFloat:!0,min:-1,max:1,defaultValue:0},cornerStyle:{type:"Enum",
isStyleProp:!0,values:["arcs","bevel","miter","miter-clip","round"],defaultValue:"miter"},draggable:{get:function(){return this.getProperty("draggable")||this.showControlPoints}},isSmooth:{defaultValue:!1,before:["vertices"],type:"Boolean",set:function(a){this.setProperty("isSmooth",a);this.vertices&&(this._adjustingVertices=!0,this.vertices.forEach(function(f){return f.isSmooth=a}),this._adjustingVertices=!1,this.updateBounds(this.vertices))}}}}}],e,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:97786,end:111483})}(mc.Morph));mc.Path=pD;mc.Path=pD;mc.Path=pD;var YF=Ha("aZ",function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/morph.js"),l=e.hasOwnProperty("Polygon")&&"function"===typeof e.Polygon?e.Polygon:e.Polygon=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};
return Pb(l,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){if(a.vertices&&2<a.vertices.length)Pb._get(Object.getPrototypeOf(l.prototype),Symbol.for("lively-instance-initialize"),this).call(this,a);else throw Error("A polygon requires 3 or more vertices!");}},{key:"isPolygon",get:function(){return!0}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Polygon"}}],e,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:111492,end:111746})}(mc.Path));mc.Polygon=YF;mc.Polygon=YF;mc.Polygon=YF;var ZF=function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/morph.js"),l=e.hasOwnProperty("LineMorph")&&"function"===typeof e.LineMorph?e.LineMorph:e.LineMorph=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return Pb(l,b,[{key:"isPolygon",get:function(){return!0}},{key:"update",value:function(){if(!this._isUpdating){this._isUpdating=!0;var a=this.line,f=this.height,m=a.toVector();this.setProperty("position",this.position.addPt(a.perpendicularLine(0,f,"cc").toVector()));this.width=m.fastR();this.rotation=m.theta();this.vec=m;this._isUpdating=!1}}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"LineMorph"}},{key:"properties",get:function(){return{borderWidth:{defaultValue:0},
fill:{defaultValue:mc.Color.black},height:{defaultValue:1},line:{defaultValue:mc.Line.fromCoords(0,0,0,0),set:function(a){this.setProperty("line",a);this.update(a)}},start:{derived:!0,after:["line"],get:function(a){return this.line.start},set:function(a){this.line=this.line.withStart(a)}},end:{derived:!0,after:["line"],get:function(a){return this.line.end},set:function(a){this.line=this.line.withEnd(a)}},position:{derived:!0,after:["line"],get:function(a){return this.start},set:function(a){var f=
a.subPt(this.start),m=this.rotation;this.line=new mc.Line(a,this.end.addPt(f));this.rotation=m}}}}}],e,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:111755,end:113247})}(mc.Morph);mc.LineMorph=ZF;mc.LineMorph=ZF;mc.LineMorph=ZF;var Bwa=Object.freeze({__proto__:null,Morph:ql,Ellipse:oD,Triangle:XF,
Image:OA,PathPoint:CJ,Path:pD,Polygon:YF,LineMorph:ZF}),pp=lively.FreezerRuntime.recorderFor("lively.morphic/tooltips.js");pp.pt=Ei;pp.Morph=ql;pp.morph=qc;pp.config=em;pp.fun=vn;var $F=function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/tooltips.js"),l=e.hasOwnProperty("TooltipViewer")&&"function"===typeof e.TooltipViewer?e.TooltipViewer:e.TooltipViewer=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};
return Pb(l,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){this.currentMorph=a}},{key:"__dont_serialize__",get:function(){return["currentTooltip","currentMorph"]}},{key:"notPartOfCurrentTooltip",value:function(a){return!a.ownerChain().includes(this.currentMorph)}},{key:"invalidatesCurrentTooltip",value:function(a){return a.tooltip||this.notPartOfCurrentTooltip(a)}},{key:"mouseMove",value:function(a){var f=this,m=a.hand,r=$world.morphsContainingPoint(a.positionIn($world)).filter(function(E){return E.reactsToPointer||
E.tooltip});r=$jscomp.makeIterator(r.slice(r.indexOf(m)+1));for(var v=r.next();!v.done;v=r.next()){v=v.value;if(y&&!y.ownerChain().includes(v))break;if(v.tooltip){var x=v;break}var y=v}for(;x&&!x.visible;)x=x.morphBeneath(a.positionIn($world));x?this.currentMorph!==x&&this.invalidatesCurrentTooltip(x)&&(this.hoverOutOfMorph(this.currentMorph),this.hoverIntoMorph(x,m),this.currentMorph=x):this.currentTooltip?this.currentTooltip.softRemove().then(function(){f.currentTooltip&&!f.currentTooltip.owner&&
(f.currentTooltip=null)}):this.currentMorph=null}},{key:"mouseDown",value:function(a){this.currentTooltip&&this.currentTooltip.remove();this.currentTooltip=null}},{key:"hoverIntoMorph",value:function(a,f){this.clearScheduledTooltip();this.currentTooltip?this.showTooltipFor(a,f):this.scheduleTooltipFor(a,f)}},{key:"hoverOutOfMorph",value:function(a){var f=this;this.currentTooltip&&this.currentTooltip.softRemove(function(m){return f.currentTooltip==m&&(f.currentTooltip=null)})}},{key:"scheduleTooltipFor",
value:function(a,f){var m=this;this.timer=setTimeout(function(){m.currentMorph&&m.showTooltipFor(a,f)},1E3*pp.config.showTooltipsAfter)}},{key:"clearScheduledTooltip",value:function(){clearTimeout(this.timer)}},{key:"clearCurrentTooltip",value:function(){var a=this.currentTooltip;a&&a.remove()}},{key:"showTooltipFor",value:function(a,f){a.tooltip&&a.world()&&(this.clearCurrentTooltip(),f=f?f.position.addXY(10,7):a.globalBounds().bottomRight(),this.currentTooltip=new pp.Tooltip({position:f,description:a.tooltip}),
$world.addMorph(this.currentTooltip),this.currentTooltip.update(a))}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"TooltipViewer"}}],e,{pathInPackage:function(){return"tooltips.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:189,end:3045})}(void 0);pp.TooltipViewer=$F;pp.TooltipViewer=$F;pp.TooltipViewer=$F;var qD=
Ha("aV",function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/tooltips.js"),l=e.hasOwnProperty("Tooltip")&&"function"===typeof e.Tooltip?e.Tooltip:e.Tooltip=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Pb(l,b,[{key:"update",value:function(a){this.position=a.globalBounds().bottomCenter().subPt(a.world().scroll).addPt(pp.pt(0,7))}},{key:"softRemove",value:function(a){var f=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){if(1==
m.nextAddress)return m.yield(f.animate({opacity:0,duration:300}),2);a&&a(f);f.remove();m.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Tooltip"}},{key:"properties",get:function(){return{hasFixedPosition:{defaultValue:!0},reactsToPointer:{defaultValue:!1},isEpiMorph:{defaultValue:!0},master:{initialize:function(){this.master={auto:"styleguide://System/tooltip"}}},description:{after:["submorphs"],derived:!0,get:function(){return $jscomp.makeIterator(this.submorphs).next().value.value},
set:function(a){var f=$jscomp.makeIterator(this.submorphs).next().value;f.value=a;f.fit()}},submorphs:{initialize:function(){this.submorphs=[new pp.morph({reactsToPointer:!1,type:"label",width:200})]}}}}}],e,{pathInPackage:function(){return"tooltips.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:3054,end:4249})}(pp.Morph));pp.Tooltip=
qD;pp.Tooltip=qD;pp.Tooltip=qD;var Cwa=Object.freeze({__proto__:null,TooltipViewer:$F,Tooltip:qD}),Sca=lively.FreezerRuntime.recorderFor("lively.morphic/morphicdb/index.js");Sca.default=Xw;Sca.MorphicDB=Xw;var Dwa=Object.freeze({__proto__:null,MorphicDB:Xw}),Zm=lively.FreezerRuntime.recorderFor("lively.2lively/interface.js");Zm.nyi=function(b){throw Error("Not yet implemented: "+b);};Zm.string=Th;Zm.promise=hg;Zm.debugMessageOrder=!1;var Zk=function(b){this.id=Zm.string.newUUID();this.actions={};
this.options={ackTimeout:3500,debug:!1};this._incomingOrderNumberingBySenders=new Map;this._outgoingOrderNumberingByTargets=new Map;this._outOfOrderCacheBySenders=new Map};Zk.prototype.isOnline=function(){Zm.nyi("isOnline")};Zk.prototype.open=function(){Zm.nyi("open")};Zk.prototype.close=function(){Zm.nyi("close")};Zk.prototype.remove=function(){Zm.nyi("remove")};Zk.prototype.whenOnline=function(b){var e=this;return Zm.promise.waitFor(b,function(){return e.isOnline()}).then(function(){return e}).catch(function(l){return Promise.reject(/timeout/i.test(String(l))?
Error("Timeout in "+e+".whenOnline"):l)})};Zk.prototype.onError=function(b){this.debug&&console.log("["+this+"] error: "+b)};Zk.prototype.removeService=function(b){delete this.actions[b]};Zk.prototype.removeServices=function(b){var e=this;b.forEach(function(l){return e.removeService(l)})};Zk.prototype.addService=function(b,e){this.actions[b]=e};Zk.prototype.addServices=function(b){var e=this;Object.keys(b).forEach(function(l){return e.addService(l,b[l])})};Zk.prototype.ping=function(b){var e=this,
l,a,f,m,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){if(1==v.nextAddress)return l=Date.now(),v.yield(e.sendToAndWait(b,"l2l-ping",{timestamp:l}),2);a=v.yieldResult;f=a.data;m=f.timestamp;r=Date.now();return v.return({to:m-l,from:r-m,roundtrip:r-l})})};Zk.prototype.send=function(b,e){Zm.nyi("send")};Zk.prototype.sendAndWait=function(b){var e=this,l,a,f,m;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){switch(r.nextAddress){case 1:return l=new Promise(function(v,x){return e.send(b,
v)}),a={},f=e.options.ackTimeout+400,"ackTimeout"in b&&(f=!b.ackTimeout||0>b.ackTimeout?null:b.ackTimeout+400),f?r.yield(Promise.race([Zm.promise.delay(f,a),l]),5):r.yield(l,4);case 4:m=r.yieldResult;r.jumpTo(3);break;case 5:m=r.yieldResult;case 3:if(m===a)throw Error("Timeout sending "+b.action);return r.return(m)}})};Zk.prototype.sendTo=function(b,e,l,a){return this.send({target:b,action:e,data:l},a)};Zk.prototype.sendToAndWait=function(b,e,l,a){return this.sendAndWait(Object.assign({target:b,action:e,
data:l},a))};Zk.prototype.prepareSend=function(b,e){var l=b.target,a=b.action,f=b.messageId,m=b.sender;if(!a)throw Error("Trying to send a message without specifying action!");if(!l)throw Error("Trying to send message "+a+" without specifying target!");f||(b.messageId=Zm.string.newUUID());m||(b.sender=this.id);a=b.n=this._outgoingOrderNumberingByTargets.get(l)||0;this._outgoingOrderNumberingByTargets.set(l,a+1);if("function"===typeof e){m=this;var r=e;e=function(v){var x=m._incomingOrderNumberingBySenders.get(v.sender)||
0;m.debug&&Zm.debugMessageOrder&&console.log("[MSG ORDER] "+m+" received ack for "+v.action+" as msg "+x);try{r.apply(null,arguments)}catch(y){console.error("Error in ack fn of "+m+": "+y.stack)}m._incomingOrderNumberingBySenders.set(v.sender,x+1);setTimeout(function(){return m.invokeOutOfOrderMessages(v.sender)},0)}}this.debug&&Zm.debugMessageOrder&&console.log("[MSG ORDER] "+this+" sending "+a+" ("+b.action+") to "+l);return[b,e]};Zk.prototype.prepareAnswerMessage=function(b,e){return{action:b.action+
"-response",inResponseTo:b.messageId,target:b.sender,data:e,sender:this.id}};Zk.prototype.installEventToMessageTranslator=function(b){var e=this,l=b.onevent;b.onevent=function(a){var f=a.data||[];l.call(this,a);a.data=["*"].concat(f);l.call(this,a)};b.on("*",function(a,f){a&&"object"===typeof a&&a.action&&(f=a,a=f.action);var m=arguments[arguments.length-1];m="function"===typeof m?m:null;(f=f===m?null:f)&&f.data&&("number"===typeof f.n||f.broadcast)&&f.sender?e.receive(f,b,m):(console.warn(e+" received non-conformant message "+
a+":",arguments),"function"===typeof m&&m({data:{error:"invalid l2l message"}}))})};Zk.prototype.receive=function(b,e,l){this.dispatchL2LMessageToSelf(b,e,l)};Zk.prototype.dispatchL2LMessageToSelf=function(b,e,l){var a=this,f=b.action;if(b.broadcast)this.safeInvokeServiceHandler(f,b,l,e);else try{var m=this._incomingOrderNumberingBySenders.get(b.sender)||0,r="register"===f||"unregister";if(!r&&b.n<m)console.error("[MSG ORDER] ["+this+"] received message no. "+b.n+" but expected >= "+m+", dropping "+
f);else if(!r&&b.n>m){this.debug&&Zm.debugMessageOrder&&console.log("[MSG ORDER] ["+this+"] storing out of order message "+f+" ("+b.n+") for later invocation");var v=this._outOfOrderCacheBySenders.get(b.sender);v||(v=[],this._outOfOrderCacheBySenders.set(b.sender,v));v.push([f,b,l,e])}else this.safeInvokeServiceHandler(f,b,l,e),setTimeout(function(){return a.invokeOutOfOrderMessages(b.sender)},0)}catch(x){console.error("Error message ordering when handling "+f+": "+(x.stack||x)),"function"===typeof l&&
l(this.prepareAnswerMessage(b,{isError:!0,error:String(x.stack||x)}))}};Zk.prototype.invokeOutOfOrderMessages=function(b){var e=this._outOfOrderCacheBySenders.get(b);if(e&&e.length){var l=this._incomingOrderNumberingBySenders.get(b)||0;b=e.findIndex(function(a){a=$jscomp.makeIterator(a);a.next();return a.next().value.n===l});-1!==b&&(e.splice(b,1),this.invokeServiceHandler.apply(this,e[b]))}};Zk.prototype.renameTarget=function(b,e){if(b!==e){var l=this._outgoingOrderNumberingByTargets.get(b);this._outgoingOrderNumberingByTargets.delete(b);
this._outgoingOrderNumberingByTargets.set(e,l)}};Zk.prototype.safeInvokeServiceHandler=function(b,e,l,a){try{"function"===typeof this.actions[b]?this.invokeServiceHandler(b,e,l,a):a._events&&Object.keys(a._events).includes(b)||(console.warn("WARNING ["+this+"] Unhandled message: "+b),"function"===typeof l&&l(this.prepareAnswerMessage(e,{isError:!0,error:"message not understood: "+b})))}catch(f){console.error("Error when handling "+b+": "+(f.stack||f)),"function"===typeof l&&l(this.prepareAnswerMessage(e,
{isError:!0,error:String(f.stack||f)}))}};Zk.prototype.invokeServiceHandler=function(b,e,l,a){var f=this;this.debug&&Zm.debugMessageOrder&&console.log("[MSG ORDER] "+this+" received "+e.n+" ("+e.action+") from "+e.sender);this._incomingOrderNumberingBySenders.set(e.sender,e.n+1);if("function"===typeof l){var m=!1,r=!1,v="ackTimeout"in e?e.ackTimeout:this.options.ackTimeout,x=this._outgoingOrderNumberingByTargets.get(e.sender)||0;this._outgoingOrderNumberingByTargets.set(e.sender,x+1);var y=function(E){r?
console.warn("["+f+"] ackFn for "+e.action+" called after it timed out, dropping answer!"):m?console.warn("["+f+"] ack function called repeatedly when handling "+e.action):(m=!0,l(f.prepareAnswerMessage(e,E)),f.debug&&Zm.debugMessageOrder&&console.log("[MSG ORDER] "+f+" sending "+x+" (ack for "+e.action+")"))};v&&setTimeout(function(){m||(y({isError:!0,error:"Timeout error: "+f+" did not send answer for "+e.action+" after "+v+"ms"}),r=!0)},v)}try{this.actions[b].call(this,this,e,y,a)}catch(E){console.error("["+
this+"] Error handling "+b+": "+(E.stack||E)),y&&y({error:E.stack})}};$jscomp.global.Object.defineProperties(Zk.prototype,{debug:{configurable:!0,enumerable:!0,get:function(){return this.options.debug},set:function(b){this.options.debug=b}}});Zm.L2LConnection=Zk;Zm.default=Zk;var Iy=lively.FreezerRuntime.recorderFor("lively.2lively/default-actions.js"),uQ={"l2l-ping":function(b,e,l,a){a=e.sender;e=e.data.timestamp;var f=Date.now();"function"===typeof l&&l({timestamp:f});b.debug&&console.log("[undefined] got ping from "+
a+", time: "+(f-e)+"ms")},"remote-eval":function(b,e,l,a){var f=e.data.source;Promise.resolve().then(function(){return eval(f)}).then(function(m){return l({value:m})}).catch(function(m){m.originalErr&&(m=m.originalErr);console.error("eval error: "+m);"function"===typeof l&&l({isError:!0,value:String(m.stack||m)})})},"remote-eval-2":function(b,e,l,a){var f=e.data.source;Promise.resolve().then(function(){var m=eval(f);if(!(m instanceof Promise))throw console.error("unexpected eval result:"+m),Error("unexpected eval result:"+
m);return m}).then(function(m){return l(m)}).catch(function(m){console.error("eval error: "+m);m.originalErr&&(m=m.originalErr);"function"===typeof l&&l({isError:!0,value:String(m.stack||m)})})}};Iy.defaultActions=uQ;Iy.defaultActions=uQ;Iy.defaultActions=uQ;var PA={},jZ=(PA["[broadcast] send"]=function(b,e,l,a){var f=e.sender,m=e.data,r,v,x,y,E,F,I,J,P,N,Y,W;return $jscomp.asyncExecutePromiseGeneratorProgram(function(da){r=m;v=r.action;x=r.broadcast;y=r.room;E=r.namespace;F=r.isSystemBroadcast;I=
r.isMultiServerBroadcast;J=[];I?(console.log(".......isMultiServerBroadcast"),P=b,N=P.id,Y=b.getTrackerList(),console.log(Y),J=Y.map(function(va){return va.id!=N?va.io.nsps["/"+va.namespace]:a.broadcast})):(F&&(E=b.namespace),J.push(E?b.io.nsps["/"+E]:a.broadcast));J.forEach(function(va){console.log(v,{action:v,sender:f,broadcast:!0,data:x});va.to(y).emit(v,{action:v,sender:f,broadcast:!0,data:x})});l&&"function"===typeof l&&(W="message broadcasted to "+y,E&&(W+=" in namespace "+E),1<J.length&&(W+=
" "+J.length+" trackers"),console.log(W),l({status:W}));da.jumpToEnd()})},PA["[broadcast] join room"]=function(b,e,l,a){var f=e.sender,m=e.data.room,r,v,x,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(E){if(1==E.nextAddress)return v=!1,x=b.io.nsps["/"+b.namespace].adapter.rooms,(y=x[m]&&x[m].sockets&&x[m].sockets[a.id])?(r=f+" already in "+m,E.jumpTo(2)):E.yield(new Promise(function(F,I){return a.join(m,function(J){return J?I(J):F()})}),3);2!=E.nextAddress&&(r=f+" joined "+m,v=!0);
l&&"function"===typeof l&&l({status:r,joined:v});E.jumpToEnd()})},PA["[broadcast] leave room"]=function(b,e,l,a){var f=e.sender,m=e.data.room,r,v,x,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(E){if(1==E.nextAddress)return v=!1,x=b.io.nsps["/"+b.namespace].adapter.rooms,y=x[m]&&x[m].sockets&&x[m].sockets[a.id],y?E.yield(new Promise(function(F,I){return a.leave(m,function(J){return J?I(J):F()})}),3):(r=f+" not in "+m,E.jumpTo(2));2!=E.nextAddress&&(r=f+" left room "+m,v=!0);console.log(r);
l&&"function"===typeof l&&l({left:v,status:r});E.jumpToEnd()})},PA["[broadcast] my rooms"]=function(b,e,l,a){l(a.rooms)},PA["[broadcast] all rooms"]=function(b,e,l,a){l(b.io.nsps["/"+b.namespace].adapter.rooms)},PA["[broadcast] list room members"]=function(b,e,l,a){e=e.data.room;a=b.io;e?(b=a.nsps["/"+b.namespace].adapter.rooms[e],l({room:e,sockets:b?b.sockets:{},length:b?b.length:0})):l({isError:!0,error:"`room` paramerter missing!"})},PA.getClients=function(b,e,l){b.removeDisconnectedClients();
l(Array.from(b.clients))},PA);Iy.defaultTrackerActions=jZ;Iy.defaultTrackerActions=jZ;Iy.defaultTrackerActions=jZ;var DJ={},vQ=(DJ.getRoomList=function(b){var e=b.client,l=b.ackFn,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){a=e._socketioClient.rooms;l(a);f.jumpToEnd()})},DJ["ask for"]=function(b,e,l,a){var f=e.sender,m=e.data.query,r=this,v,x;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){if(1==y.nextAddress)return v=m.match(/password|sudo/i)?"passwordPrompt":
"prompt",y.yield($world[v](m),2);x=y.yieldResult;"function"===typeof l&&l({answer:x});b.debug&&console.log("["+r+"] message 'ask for' from "+f+", query: "+m);y.jumpToEnd()})},DJ["open editor"]=function(b,e,l,a){var f=e.data.args,m;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){if(1==r.nextAddress)return f.length?r.yield($world.execCommand("open file for EDITOR",{url:f[0]}),2):(l({error:"no file specified"}),r.return());m=r.yieldResult;"function"===typeof l&&l("aborted"===m?{error:String(m)}:
{status:m});r.jumpToEnd()})},DJ.changeWorkingDirectory=function(b,e,l,a){var f=e.data.args,m,r,v,x,y,E;return $jscomp.asyncExecutePromiseGeneratorProgram(function(F){m=$jscomp.makeIterator(f||[]);r=m.next().value;v=m.next().value;x="OK";try{if(r)if(v){if(y=$world.getMorphWithId(v))if(y.__lookupSetter__("cwd"))y.cwd=r;else if("function"===typeof y.changeWorkingDirectory)y.changeWorkingDirectory(r);else if("function"===typeof y.pluginFind){if(E=y.pluginFind(function(I){return I.isShellEditorPlugin}))E.cwd=
r}else x="[changeWorkingDirectory] cannot figure pout how to set dir"}else x="[changeWorkingDirectory] No command morph";else x="[changeWorkingDirectory] No directory received"}catch(I){x=String(I)}"OK"!==x&&console.warn(x);"function"===typeof l&&l(x);F.jumpToEnd()})},DJ);Iy.defaultClientActions=vQ;Iy.defaultClientActions=vQ;Iy.defaultClientActions=vQ;var Ewa={},Fwa=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,
Gwa="source protocol authority userInfo user password host port relative path directory file query anchor".split(" "),Tca=Ewa=function(b){var e=b,l=b.indexOf("["),a=b.indexOf("]");-1!=l&&-1!=a&&(b=b.substring(0,l)+b.substring(l,a).replace(/:/g,";")+b.substring(a,b.length));var f=Fwa.exec(b||"");b={};for(var m=14;m--;)b[Gwa[m]]=f[m]||"";-1!=l&&-1!=a&&(b.source=e,b.host=b.host.substring(1,b.host.length-1).replace(/;/g,":"),b.authority=b.authority.replace("[","").replace("]","").replace(/;/g,":"),b.ipv6uri=
!0);e=b.path;l=e.replace(/\/{2,9}/g,"/").split("/");"/"!=e.substr(0,1)&&0!==e.length||l.splice(0,1);"/"==e.substr(e.length-1,1)&&l.splice(l.length-1,1);b.pathNames=l;b.queryKey=wma(b,b.query);return b},Hwa={},jI=864E5,yma=365.25*jI,Iwa=Hwa=function(b,e){e=e||{};var l=typeof b;if("string"===l&&0<b.length)return xma(b);if("number"===l&&!1===isNaN(b))return e.long?uN(b,jI,"day")||uN(b,36E5,"hour")||uN(b,6E4,"minute")||uN(b,1E3,"second")||b+" ms":b>=jI?Math.round(b/jI)+"d":36E5<=b?Math.round(b/36E5)+
"h":6E4<=b?Math.round(b/6E4)+"m":1E3<=b?Math.round(b/1E3)+"s":b+"ms";throw Error("val is not a non-empty string or a valid number. val="+JSON.stringify(b));},Bma="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,fj={};fj=fj=HV.debug=HV["default"]=HV;fj.coerce=function(b){return b instanceof Error?b.stack||b.message:b};fj.disable=function(){fj.enable("")};fj.enable=function(b){fj.save(b);fj.names=[];fj.skips=[];var e,l=("string"===typeof b?b:"").split(/[\s,]+/),a=l.length;
for(e=0;e<a;e++)l[e]&&(b=l[e].replace(/\*/g,".*?"),"-"===b[0]?fj.skips.push(new RegExp("^"+b.substr(1)+"$")):fj.names.push(new RegExp("^"+b+"$")));for(e=0;e<fj.instances.length;e++)b=fj.instances[e],b.enabled=fj.enabled(b.namespace)};fj.enabled=function(b){if("*"===b[b.length-1])return!0;var e;var l=0;for(e=fj.skips.length;l<e;l++)if(fj.skips[l].test(b))return!1;l=0;for(e=fj.names.length;l<e;l++)if(fj.names[l].test(b))return!0;return!1};fj.humanize=Iwa;fj.instances=[];fj.names=[];fj.skips=[];fj.formatters=
{};var wQ="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,mp={},IV=mj;mp=mp=fj;mp.log=function(){return"object"===typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)};mp.formatArgs=function(b){var e=(this||wQ).useColors;b[0]=(e?"%c":"")+(this||wQ).namespace+(e?" %c":" ")+b[0]+(e?"%c ":" ")+"+"+mp.humanize((this||wQ).diff);if(e){e="color: "+(this||wQ).color;b.splice(1,0,e,"color: inherit");var l=0,a=0;b[0].replace(/%[a-zA-Z%]/g,
function(f){"%%"!==f&&(l++,"%c"===f&&(a=l))});b.splice(a,0,e)}};mp.save=function(b){try{null==b?mp.storage.removeItem("debug"):mp.storage.debug=b}catch(e){}};mp.load=C8;mp.useColors=function(){return"undefined"!==typeof window&&window.process&&"renderer"===window.process.type?!0:"undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:"undefined"!==typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||
"undefined"!==typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&31<=parseInt(RegExp.$1,10)||"undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)};var Jwa=mp;if("undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage)var kZ=chrome.storage.local;else a:{try{kZ=window.localStorage;
break a}catch(b){}kZ=void 0}Jwa.storage=kZ;mp.colors="#0000CC #0000FF #0033CC #0033FF #0066CC #0066FF #0099CC #0099FF #00CC00 #00CC33 #00CC66 #00CC99 #00CCCC #00CCFF #3300CC #3300FF #3333CC #3333FF #3366CC #3366FF #3399CC #3399FF #33CC00 #33CC33 #33CC66 #33CC99 #33CCCC #33CCFF #6600CC #6600FF #6633CC #6633FF #66CC00 #66CC33 #9900CC #9900FF #9933CC #9933FF #99CC00 #99CC33 #CC0000 #CC0033 #CC0066 #CC0099 #CC00CC #CC00FF #CC3300 #CC3333 #CC3366 #CC3399 #CC33CC #CC33FF #CC6600 #CC6633 #CC9900 #CC9933 #CCCC00 #CCCC33 #FF0000 #FF0033 #FF0066 #FF0099 #FF00CC #FF00FF #FF3300 #FF3333 #FF3366 #FF3399 #FF33CC #FF33FF #FF6600 #FF6633 #FF9900 #FF9933 #FFCC00 #FFCC33".split(" ");
mp.formatters.j=function(b){try{return JSON.stringify(b)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}};mp.enable(C8());var Jy=mp,yl="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,Uca={};Uca=Jr;Jr.prototype.on=Jr.prototype.addEventListener=function(b,e){(this||yl)._callbacks=(this||yl)._callbacks||{};((this||yl)._callbacks["$"+b]=(this||yl)._callbacks["$"+b]||[]).push(e);return this||yl};Jr.prototype.once=function(b,e){function l(){this.off(b,l);e.apply(this||
yl,arguments)}l.fn=e;this.on(b,l);return this||yl};Jr.prototype.off=Jr.prototype.removeListener=Jr.prototype.removeAllListeners=Jr.prototype.removeEventListener=function(b,e){(this||yl)._callbacks=(this||yl)._callbacks||{};if(0==arguments.length)return(this||yl)._callbacks={},this||yl;var l=(this||yl)._callbacks["$"+b];if(!l)return this||yl;if(1==arguments.length)return delete (this||yl)._callbacks["$"+b],this||yl;for(var a,f=0;f<l.length;f++)if(a=l[f],a===e||a.fn===e){l.splice(f,1);break}0===l.length&&
delete (this||yl)._callbacks["$"+b];return this||yl};Jr.prototype.emit=function(b){(this||yl)._callbacks=(this||yl)._callbacks||{};for(var e=Array(arguments.length-1),l=(this||yl)._callbacks["$"+b],a=1;a<arguments.length;a++)e[a-1]=arguments[a];if(l){l=l.slice(0);a=0;for(var f=l.length;a<f;++a)l[a].apply(this||yl,e)}return this||yl};Jr.prototype.listeners=function(b){(this||yl)._callbacks=(this||yl)._callbacks||{};return(this||yl)._callbacks["$"+b]||[]};Jr.prototype.hasListeners=function(b){return!!this.listeners(b).length};
var rD=Uca,Kwa={},Lwa={}.toString,lZ=Kwa=Array.isArray||function(b){return"[object Array]"==Lwa.call(b)},Vca={},mZ=oi.Buffer;Vca=function(b){var e;!(e=Mwa&&mZ.isBuffer(b))&&(e=Nwa)&&((e=b instanceof ArrayBuffer)||(e="function"===typeof ArrayBuffer.isView?ArrayBuffer.isView(b):b.buffer instanceof ArrayBuffer));return e};var Mwa="function"===typeof mZ&&"function"===typeof mZ.isBuffer,Nwa="function"===typeof ArrayBuffer,Wca=Vca,Xca="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?
self:global,xQ={},KV=lZ,D8=Wca,Yca=Object.prototype.toString,Owa="function"===typeof Blob||"undefined"!==typeof Blob&&"[object BlobConstructor]"===Yca.call(Blob),Pwa="function"===typeof File||"undefined"!==typeof File&&"[object FileConstructor]"===Yca.call(File);xQ.deconstructPacket=function(b){var e=[];b.data=JV(b.data,e);b.attachments=e.length;return{packet:b,buffers:e}};xQ.reconstructPacket=function(b,e){b.data=LV(b.data,e);b.attachments=void 0;return b};xQ.removeBlobs=function(b,e){function l(m,
r,v){if(!m)return m;if(Owa&&m instanceof Blob||Pwa&&m instanceof File){a++;var x=new FileReader;x.onload=function(){v?v[r]=(this||Xca).result:f=(this||Xca).result;--a||e(f)};x.readAsArrayBuffer(m)}else if(KV(m))for(x=0;x<m.length;x++)l(m[x],x,m);else if("object"===typeof m&&!D8(m))for(x in m)l(m[x],x,m)}var a=0,f=b;l(f);a||e(f)};var Go="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,jl={},MV=Jy("socket.io-parser"),NV=xQ;jl.protocol=4;jl.types="CONNECT DISCONNECT EVENT ACK ERROR BINARY_EVENT BINARY_ACK".split(" ");
jl.CONNECT=0;jl.DISCONNECT=1;jl.EVENT=2;jl.ACK=3;jl.ERROR=4;jl.BINARY_EVENT=5;jl.BINARY_ACK=6;jl.Encoder=E8;jl.Decoder=vN;var Cma=jl.ERROR+'"encode error"';E8.prototype.encode=function(b,e){MV("encoding packet %j",b);jl.BINARY_EVENT===b.type||jl.BINARY_ACK===b.type?Dma(b,e):(b=F8(b),e([b]))};rD(vN.prototype);vN.prototype.add=function(b){if("string"===typeof b){a:{var e=0,l={type:Number(b.charAt(0))};if(null==jl.types[l.type])b={type:jl.ERROR,data:"parser error: unknown packet type "+l.type};else{if(jl.BINARY_EVENT===
l.type||jl.BINARY_ACK===l.type){for(var a=e+1;"-"!==b.charAt(++e)&&e!=b.length;);a=b.substring(a,e);if(a!=Number(a)||"-"!==b.charAt(e))throw Error("Illegal attachments");l.attachments=Number(a)}if("/"===b.charAt(e+1)){for(a=e+1;++e;){var f=b.charAt(e);if(","===f)break;if(e===b.length)break}l.nsp=b.substring(a,e)}else l.nsp="/";a=b.charAt(e+1);if(""!==a&&Number(a)==a){for(a=e+1;++e;){f=b.charAt(e);if(null==f||Number(f)!=f){--e;break}if(e===b.length)break}l.id=Number(b.substring(a,e+1))}if(b.charAt(++e)){e=
b.substr(e);try{var m=JSON.parse(e)}catch(r){m=!1}if(!1===m||l.type!==jl.ERROR&&!lZ(m)){b={type:jl.ERROR,data:"parser error: invalid payload"};break a}else l.data=m}MV("decoded %s as %j",b,l);b=l}}jl.BINARY_EVENT===b.type||jl.BINARY_ACK===b.type?((this||Go).reconstructor=new OV(b),0===(this||Go).reconstructor.reconPack.attachments&&this.emit("decoded",b)):this.emit("decoded",b)}else if(Wca(b)||b.base64)if((this||Go).reconstructor){if(b=(this||Go).reconstructor.takeBinaryData(b))(this||Go).reconstructor=
null,this.emit("decoded",b)}else throw Error("got binary data when not reconstructing a packet");else throw Error("Unknown type: "+b);};vN.prototype.destroy=function(){(this||Go).reconstructor&&(this||Go).reconstructor.finishedReconstruction()};OV.prototype.takeBinaryData=function(b){(this||Go).buffers.push(b);return(this||Go).buffers.length===(this||Go).reconPack.attachments?(b=NV.reconstructPacket((this||Go).reconPack,(this||Go).buffers),this.finishedReconstruction(),b):null};OV.prototype.finishedReconstruction=
function(){(this||Go).reconPack=null;(this||Go).buffers=[]};var nZ={};try{nZ="undefined"!==typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(b){nZ=!1}var Qwa=nZ,Rwa={},oZ=Rwa="undefined"!==typeof self?self:"undefined"!==typeof window?window:Function("return this")(),Swa={},pZ=Swa=function(b){var e=b.xdomain,l=b.xscheme;b=b.enablesXDR;try{if("undefined"!==typeof XMLHttpRequest&&(!e||Qwa))return new XMLHttpRequest}catch(a){}try{if("undefined"!==typeof XDomainRequest&&!l&&b)return new XDomainRequest}catch(a){}if(!e)try{return new (oZ[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(a){}},
Twa={},PV=oi.Buffer,Ema=lZ,Zca=Object.prototype.toString,Fma="function"===typeof Blob||"undefined"!==typeof Blob&&"[object BlobConstructor]"===Zca.call(Blob),Gma="function"===typeof File||"undefined"!==typeof File&&"[object FileConstructor]"===Zca.call(File),qZ=Twa=wN,Uwa={},yQ=Uwa=function(b,e,l){var a=b.byteLength;e=e||0;l=l||a;if(b.slice)return b.slice(e,l);0>e&&(e+=a);0>l&&(l+=a);l>a&&(l=a);if(e>=a||e>=l||0===a)return new ArrayBuffer(0);b=new Uint8Array(b);a=new Uint8Array(l-e);for(var f=0;e<
l;e++,f++)a[f]=b[e];return a.buffer},Vwa={},Wwa=Vwa=function(b,e,l){function a(m,r){if(0>=a.count)throw Error("after called too many times");--a.count;m?(f=!0,e(m),e=l):0!==a.count||f||e(null,r)}var f=!1;l=l||Hma;a.count=b;return 0===b?e():a},rZ={};(function(b){rZ.encode=function(e){e=new Uint8Array(e);var l,a=e.length,f="";for(l=0;l<a;l+=3)f+=b[e[l]>>2],f+=b[(e[l]&3)<<4|e[l+1]>>4],f+=b[(e[l+1]&15)<<2|e[l+2]>>6],f+=b[e[l+2]&63];2===a%3?f=f.substring(0,f.length-1)+"=":1===a%3&&(f=f.substring(0,f.length-
2)+"==");return f};rZ.decode=function(e){var l=.75*e.length,a=e.length,f=0;"="===e[e.length-1]&&(l--,"="===e[e.length-2]&&l--);var m=new ArrayBuffer(l),r=new Uint8Array(m);for(l=0;l<a;l+=4){var v=b.indexOf(e[l]);var x=b.indexOf(e[l+1]);var y=b.indexOf(e[l+2]);var E=b.indexOf(e[l+3]);r[f++]=v<<2|x>>4;r[f++]=(x&15)<<4|y>>2;r[f++]=(y&3)<<6|E&63}return m}})("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/");var $ca={},hF="undefined"!==typeof hF?hF:"undefined"!==typeof WebKitBlobBuilder?
WebKitBlobBuilder:"undefined"!==typeof MSBlobBuilder?MSBlobBuilder:"undefined"!==typeof MozBlobBuilder?MozBlobBuilder:!1;try{var sZ=2===(new Blob(["hi"])).size}catch(b){sZ=!1}var zQ;if(zQ=sZ)try{zQ=2===(new Blob([new Uint8Array([1,2])])).size}catch(b){zQ=!1}var Xwa=zQ,Ywa=hF&&hF.prototype.append&&hF.prototype.getBlob;"undefined"!==typeof Blob&&(H8.prototype=Blob.prototype,I8.prototype=Blob.prototype);$ca=sZ?Xwa?Blob:I8:Ywa?H8:void 0;var Wr=$ca,Zwa={},$wa=Zwa=Object.keys||function(b){var e=[],l=Object.prototype.hasOwnProperty,
a;for(a in b)l.call(b,a)&&e.push(a);return e},ada={},Yw=String.fromCharCode,yN,xN,kA;ada={version:"2.1.2",encode:function(b,e){e=e||{};e=!1!==e.strict;b=J8(b);for(var l=b.length,a=-1,f,m="";++a<l;){f=b[a];var r=e;if(0==(f&4294967168))f=Yw(f);else{var v="";0==(f&4294965248)?v=Yw(f>>6&31|192):0==(f&4294901760)?(K8(f,r)||(f=65533),v=Yw(f>>12&15|224),v+=Yw(f>>6&63|128)):0==(f&4292870144)&&(v=Yw(f>>18&7|240),v+=Yw(f>>12&63|128),v+=Yw(f>>6&63|128));f=v+=Yw(f&63|128)}m+=f}return m},decode:function(b,e){e=
e||{};e=!1!==e.strict;yN=J8(b);xN=yN.length;kA=0;b=[];for(var l;!1!==(l=Ima(e));)b.push(l);e=b.length;l=-1;for(var a,f="";++l<e;)a=b[l],65535<a&&(a-=65536,f+=Yw(a>>>10&1023|55296),a=56320|a&1023),f+=Yw(a);return f}};var ck={},Kma=Wwa,bda=ada,tZ;"undefined"!==typeof ArrayBuffer&&(tZ=rZ);var axa="undefined"!==typeof navigator&&/Android/i.test(navigator.userAgent),bxa="undefined"!==typeof navigator&&/PhantomJS/i.test(navigator.userAgent),cda=axa||bxa;ck.protocol=3;var AQ=ck.packets={open:0,close:1,ping:2,
pong:3,message:4,upgrade:5,noop:6},EJ=$wa(AQ),Yu={type:"error",data:"parser error"};ck.encodePacket=function(b,e,l,a){"function"===typeof e&&(a=e,e=!1);"function"===typeof l&&(a=l,l=null);var f=void 0===b.data?void 0:b.data.buffer||b.data;if("undefined"!==typeof ArrayBuffer&&f instanceof ArrayBuffer){if(e){l=b.data;e=new Uint8Array(l);l=new Uint8Array(1+l.byteLength);l[0]=AQ[b.type];for(b=0;b<e.length;b++)l[b+1]=e[b];b=a(l.buffer)}else b=ck.encodeBase64Packet(b,a);return b}if("undefined"!==typeof Wr&&
f instanceof Wr)return e?cda?b=Jma(b,e,a):(e=new Uint8Array(1),e[0]=AQ[b.type],b=new Wr([e.buffer,b.data]),b=a(b)):b=ck.encodeBase64Packet(b,a),b;if(f&&f.base64)return a("b"+ck.packets[b.type]+b.data.data);e=AQ[b.type];void 0!==b.data&&(e+=l?bda.encode(String(b.data),{strict:!1}):String(b.data));return a(""+e)};ck.encodeBase64Packet=function(b,e){var l="b"+ck.packets[b.type];if("undefined"!==typeof Wr&&b.data instanceof Wr){var a=new FileReader;a.onload=function(){var r=a.result.split(",")[1];e(l+
r)};return a.readAsDataURL(b.data)}try{var f=String.fromCharCode.apply(null,new Uint8Array(b.data))}catch(r){b=new Uint8Array(b.data);f=Array(b.length);for(var m=0;m<b.length;m++)f[m]=b[m];f=String.fromCharCode.apply(null,f)}l+=btoa(f);return e(l)};ck.decodePacket=function(b,e,l){if(void 0===b)return Yu;if("string"===typeof b){if("b"===b.charAt(0))return ck.decodeBase64Packet(b.substr(1),e);if(l){a:{e=b;try{e=bda.decode(e,{strict:!1})}catch(a){b=!1;break a}b=e}if(!1===b)return Yu}l=b.charAt(0);return Number(l)==
l&&EJ[l]?1<b.length?{type:EJ[l],data:b.substring(1)}:{type:EJ[l]}:Yu}l=(new Uint8Array(b))[0];b=yQ(b,1);Wr&&"blob"===e&&(b=new Wr([b]));return{type:EJ[l],data:b}};ck.decodeBase64Packet=function(b,e){var l=EJ[b.charAt(0)];if(!tZ)return{type:l,data:{base64:!0,data:b.substr(1)}};b=tZ.decode(b.substr(1));"blob"===e&&Wr&&(b=new Wr([b]));return{type:l,data:b}};ck.encodePayload=function(b,e,l){"function"===typeof e&&(l=e,e=null);var a=qZ(b);if(e&&a)return Wr&&!cda?ck.encodePayloadAsBlob(b,l):ck.encodePayloadAsArrayBuffer(b,
l);if(!b.length)return l("0:");QV(b,function(f,m){ck.encodePacket(f,a?e:!1,!1,function(r){m(null,r.length+":"+r)})},function(f,m){return l(m.join(""))})};ck.decodePayload=function(b,e,l){if("string"!==typeof b)return ck.decodePayloadAsBinary(b,e,l);"function"===typeof e&&(l=e,e=null);if(""===b)return l(Yu,0,1);var a="";for(var f,m,r=0,v=b.length;r<v;r++)if(m=b.charAt(r),":"!==m)a+=m;else{if(""===a||a!=(f=Number(a)))return l(Yu,0,1);m=b.substr(r+1,f);if(a!=m.length)return l(Yu,0,1);if(m.length){a=
ck.decodePacket(m,e,!1);if(Yu.type===a.type&&Yu.data===a.data)return l(Yu,0,1);if(!1===l(a,r+f,v))return}r+=f;a=""}if(""!==a)return l(Yu,0,1)};ck.encodePayloadAsArrayBuffer=function(b,e){if(!b.length)return e(new ArrayBuffer(0));QV(b,function(l,a){ck.encodePacket(l,!0,!0,function(f){return a(null,f)})},function(l,a){l=a.reduce(function(r,v){v="string"===typeof v?v.length:v.byteLength;return r+v.toString().length+v+2},0);var f=new Uint8Array(l),m=0;a.forEach(function(r){var v="string"===typeof r,x=
r;if(v){x=new Uint8Array(r.length);for(var y=0;y<r.length;y++)x[y]=r.charCodeAt(y);x=x.buffer}v?f[m++]=0:f[m++]=1;r=x.byteLength.toString();for(y=0;y<r.length;y++)f[m++]=parseInt(r[y]);f[m++]=255;x=new Uint8Array(x);for(y=0;y<x.length;y++)f[m++]=x[y]});return e(f.buffer)})};ck.encodePayloadAsBlob=function(b,e){QV(b,function(l,a){ck.encodePacket(l,!0,!0,function(f){var m=new Uint8Array(1);m[0]=1;if("string"===typeof f){for(var r=new Uint8Array(f.length),v=0;v<f.length;v++)r[v]=f.charCodeAt(v);f=r.buffer;
m[0]=0}r=(f instanceof ArrayBuffer?f.byteLength:f.size).toString();var x=new Uint8Array(r.length+1);for(v=0;v<r.length;v++)x[v]=parseInt(r[v]);x[r.length]=255;Wr&&(f=new Wr([m.buffer,x.buffer,f]),a(null,f))})},function(l,a){return e(new Wr(a))})};ck.decodePayloadAsBinary=function(b,e,l){"function"===typeof e&&(l=e,e=null);for(var a=[];0<b.byteLength;){for(var f=new Uint8Array(b),m=0===f[0],r="",v=1;255!==f[v];v++){if(310<r.length)return l(Yu,0,1);r+=f[v]}b=yQ(b,2+r.length);r=parseInt(r);f=yQ(b,0,
r);if(m)try{f=String.fromCharCode.apply(null,new Uint8Array(f))}catch(y){for(m=new Uint8Array(f),f="",v=0;v<m.length;v++)f+=String.fromCharCode(m[v])}a.push(f);b=yQ(b,r)}var x=a.length;a.forEach(function(y,E){l(ck.decodePacket(y,e,!0),E,x)})};for(var BQ={encode:function(b){var e="",l;for(l in b)b.hasOwnProperty(l)&&(e.length&&(e+="&"),e+=encodeURIComponent(l)+"="+encodeURIComponent(b[l]));return e},decode:function(b){var e={};b=b.split("&");for(var l=0,a=b.length;l<a;l++){var f=b[l].split("=");e[decodeURIComponent(f[0])]=
decodeURIComponent(f[1])}return e}},cxa={},CQ=cxa=function(b,e){var l=function(){};l.prototype=e.prototype;b.prototype=new l;b.prototype.constructor=b},dxa={},L8="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),dda={},N8=0,QA=0,M8;64>QA;QA++)dda[L8[QA]]=QA;SV.encode=RV;SV.decode=function(b){var e=0;for(QA=0;QA<b.length;QA++)e=64*e+dda[b.charAt(QA)];return e};var eda=dxa=SV,xj="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,fda={},exa=ck;
fda=ww;rD(ww.prototype);ww.prototype.onError=function(b,e){b=Error(b);b.type="TransportError";b.description=e;this.emit("error",b);return this||xj};ww.prototype.open=function(){if("closed"===(this||xj).readyState||""===(this||xj).readyState)(this||xj).readyState="opening",this.doOpen();return this||xj};ww.prototype.close=function(){if("opening"===(this||xj).readyState||"open"===(this||xj).readyState)this.doClose(),this.onClose();return this||xj};ww.prototype.send=function(b){if("open"===(this||xj).readyState)this.write(b);
else throw Error("Transport not open");};ww.prototype.onOpen=function(){(this||xj).readyState="open";(this||xj).writable=!0;this.emit("open")};ww.prototype.onData=function(b){b=exa.decodePacket(b,(this||xj).socket.binaryType);this.onPacket(b)};ww.prototype.onPacket=function(b){this.emit("packet",b)};ww.prototype.onClose=function(){(this||xj).readyState="closed";this.emit("close")};var uZ=fda,Uj="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,gda={},O8=uZ,hda=ck,Zu=
Jy("engine.io-client:polling");gda=xw;var Lma=null!=(new pZ({xdomain:!1})).responseType;CQ(xw,O8);xw.prototype.name="polling";xw.prototype.doOpen=function(){this.poll()};xw.prototype.pause=function(b){function e(){Zu("paused");l.readyState="paused";b()}var l=this||Uj;(this||Uj).readyState="pausing";if((this||Uj).polling||!(this||Uj).writable){var a=0;(this||Uj).polling&&(Zu("we are currently polling - waiting to pause"),a++,this.once("pollComplete",function(){Zu("pre-pause polling complete");--a||
e()}));(this||Uj).writable||(Zu("we are currently writing - waiting to pause"),a++,this.once("drain",function(){Zu("pre-pause writing complete");--a||e()}))}else e()};xw.prototype.poll=function(){Zu("polling");(this||Uj).polling=!0;this.doPoll();this.emit("poll")};xw.prototype.onData=function(b){var e=this||Uj;Zu("polling got data %s",b);hda.decodePayload(b,(this||Uj).socket.binaryType,function(l,a,f){if("opening"===e.readyState)e.onOpen();if("close"===l.type)return e.onClose(),!1;e.onPacket(l)});
"closed"!==(this||Uj).readyState&&((this||Uj).polling=!1,this.emit("pollComplete"),"open"===(this||Uj).readyState?this.poll():Zu('ignoring poll - transport state "%s"',(this||Uj).readyState))};xw.prototype.doClose=function(){function b(){Zu("writing close packet");e.write([{type:"close"}])}var e=this||Uj;"open"===(this||Uj).readyState?(Zu("transport open - closing"),b()):(Zu("transport not open - deferring close"),this.once("open",b))};xw.prototype.write=function(b){var e=this||Uj;(this||Uj).writable=
!1;var l=function(){e.writable=!0;e.emit("drain")};hda.encodePayload(b,(this||Uj).supportsBinary,function(a){e.doWrite(a,l)})};xw.prototype.uri=function(){var b=(this||Uj).query||{},e=(this||Uj).secure?"https":"http",l="";!1!==(this||Uj).timestampRequests&&(b[(this||Uj).timestampParam]=eda());(this||Uj).supportsBinary||b.sid||(b.b64=1);b=BQ.encode(b);(this||Uj).port&&("https"===e&&443!==Number((this||Uj).port)||"http"===e&&80!==Number((this||Uj).port))&&(l=":"+(this||Uj).port);b.length&&(b="?"+b);
var a=-1!==(this||Uj).hostname.indexOf(":");return e+"://"+(a?"["+(this||Uj).hostname+"]":(this||Uj).hostname)+l+(this||Uj).path+b};var ida=gda,kf="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,vZ={},Q8=ida,wZ=Jy("engine.io-client:polling-xhr");vZ=jF;vZ.Request=un;CQ(jF,Q8);jF.prototype.supportsBinary=!0;jF.prototype.request=function(b){b=b||{};b.uri=this.uri();b.xd=(this||kf).xd;b.xs=(this||kf).xs;b.agent=(this||kf).agent||!1;b.supportsBinary=(this||kf).supportsBinary;
b.enablesXDR=(this||kf).enablesXDR;b.withCredentials=(this||kf).withCredentials;b.pfx=(this||kf).pfx;b.key=(this||kf).key;b.passphrase=(this||kf).passphrase;b.cert=(this||kf).cert;b.ca=(this||kf).ca;b.ciphers=(this||kf).ciphers;b.rejectUnauthorized=(this||kf).rejectUnauthorized;b.requestTimeout=(this||kf).requestTimeout;b.extraHeaders=(this||kf).extraHeaders;return new un(b)};jF.prototype.doWrite=function(b,e){b=this.request({method:"POST",data:b,isBinary:"string"!==typeof b&&void 0!==b});var l=this||
kf;b.on("success",e);b.on("error",function(a){l.onError("xhr post error",a)});(this||kf).sendXhr=b};jF.prototype.doPoll=function(){wZ("xhr poll");var b=this.request(),e=this||kf;b.on("data",function(l){e.onData(l)});b.on("error",function(l){e.onError("xhr poll error",l)});(this||kf).pollXhr=b};rD(un.prototype);un.prototype.create=function(){var b={agent:(this||kf).agent,xdomain:(this||kf).xd,xscheme:(this||kf).xs,enablesXDR:(this||kf).enablesXDR};b.pfx=(this||kf).pfx;b.key=(this||kf).key;b.passphrase=
(this||kf).passphrase;b.cert=(this||kf).cert;b.ca=(this||kf).ca;b.ciphers=(this||kf).ciphers;b.rejectUnauthorized=(this||kf).rejectUnauthorized;var e=(this||kf).xhr=new pZ(b),l=this||kf;try{wZ("xhr open %s: %s",(this||kf).method,(this||kf).uri);e.open((this||kf).method,(this||kf).uri,(this||kf).async);try{if((this||kf).extraHeaders){e.setDisableHeaderCheck&&e.setDisableHeaderCheck(!0);for(var a in(this||kf).extraHeaders)(this||kf).extraHeaders.hasOwnProperty(a)&&e.setRequestHeader(a,(this||kf).extraHeaders[a])}}catch(f){}if("POST"===
(this||kf).method)try{(this||kf).isBinary?e.setRequestHeader("Content-type","application/octet-stream"):e.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(f){}try{e.setRequestHeader("Accept","*/*")}catch(f){}"withCredentials"in e&&(e.withCredentials=(this||kf).withCredentials);(this||kf).requestTimeout&&(e.timeout=(this||kf).requestTimeout);this.hasXDR()?(e.onload=function(){l.onLoad()},e.onerror=function(){l.onError(e.responseText)}):e.onreadystatechange=function(){if(2===e.readyState)try{var f=
e.getResponseHeader("Content-Type");if(l.supportsBinary&&"application/octet-stream"===f||"application/octet-stream; charset=UTF-8"===f)e.responseType="arraybuffer"}catch(m){}if(4===e.readyState)if(200===e.status||1223===e.status)l.onLoad();else setTimeout(function(){l.onError("number"===typeof e.status?e.status:0)},0)};wZ("xhr data %s",(this||kf).data);e.send((this||kf).data)}catch(f){setTimeout(function(){l.onError(f)},0);return}"undefined"!==typeof document&&((this||kf).index=un.requestsCount++,
un.requests[(this||kf).index]=this||kf)};un.prototype.onSuccess=function(){this.emit("success");this.cleanup()};un.prototype.onData=function(b){this.emit("data",b);this.onSuccess()};un.prototype.onError=function(b){this.emit("error",b);this.cleanup(!0)};un.prototype.cleanup=function(b){if("undefined"!==typeof(this||kf).xhr&&null!==(this||kf).xhr){this.hasXDR()?(this||kf).xhr.onload=(this||kf).xhr.onerror=P8:(this||kf).xhr.onreadystatechange=P8;if(b)try{(this||kf).xhr.abort()}catch(e){}"undefined"!==
typeof document&&delete un.requests[(this||kf).index];(this||kf).xhr=null}};un.prototype.onLoad=function(){try{try{var b=(this||kf).xhr.getResponseHeader("Content-Type")}catch(l){}var e="application/octet-stream"===b||"application/octet-stream; charset=UTF-8"===b?(this||kf).xhr.response||(this||kf).xhr.responseText:(this||kf).xhr.responseText}catch(l){this.onError(l)}if(null!=e)this.onData(e)};un.prototype.hasXDR=function(){return"undefined"!==typeof XDomainRequest&&!(this||kf).xs&&(this||kf).enablesXDR};
un.prototype.abort=function(){this.cleanup()};un.requestsCount=0;un.requests={};"undefined"!==typeof document&&("function"===typeof attachEvent?attachEvent("onunload",R8):"function"===typeof addEventListener&&addEventListener("onpagehide"in oZ?"pagehide":"unload",R8,!1));var fxa=vZ,gxa={},hxa=[].indexOf,xZ=gxa=function(b,e){if(hxa)return b.indexOf(e);for(var l=0;l<b.length;++l)if(b[l]===e)return l;return-1},Ej="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,jda={},
TV=ida,S8=oZ;jda=kF;var ixa=/\n/g,jxa=/\\n/g,zN;CQ(kF,TV);kF.prototype.supportsBinary=!1;kF.prototype.doClose=function(){(this||Ej).script&&((this||Ej).script.parentNode.removeChild((this||Ej).script),(this||Ej).script=null);(this||Ej).form&&((this||Ej).form.parentNode.removeChild((this||Ej).form),(this||Ej).form=null,(this||Ej).iframe=null);TV.prototype.doClose.call(this||Ej)};kF.prototype.doPoll=function(){var b=this||Ej,e=document.createElement("script");(this||Ej).script&&((this||Ej).script.parentNode.removeChild((this||
Ej).script),(this||Ej).script=null);e.async=!0;e.src=this.uri();e.onerror=function(a){b.onError("jsonp poll error",a)};var l=document.getElementsByTagName("script")[0];l?l.parentNode.insertBefore(e,l):(document.head||document.body).appendChild(e);(this||Ej).script=e;"undefined"!==typeof navigator&&/gecko/i.test(navigator.userAgent)&&setTimeout(function(){var a=document.createElement("iframe");document.body.appendChild(a);document.body.removeChild(a)},100)};kF.prototype.doWrite=function(b,e){function l(){a();
e()}function a(){if(f.iframe)try{f.form.removeChild(f.iframe)}catch(y){f.onError("jsonp polling iframe removal error",y)}try{x=document.createElement('<iframe src="javascript:0" name="'+f.iframeId+'">')}catch(y){x=document.createElement("iframe"),x.name=f.iframeId,x.src="javascript:0"}x.id=f.iframeId;f.form.appendChild(x);f.iframe=x}var f=this||Ej;if(!(this||Ej).form){var m=document.createElement("form"),r=document.createElement("textarea"),v=(this||Ej).iframeId="eio_iframe_"+(this||Ej).index,x;m.className=
"socketio";m.style.position="absolute";m.style.top="-1000px";m.style.left="-1000px";m.target=v;m.method="POST";m.setAttribute("accept-charset","utf-8");r.name="d";m.appendChild(r);document.body.appendChild(m);(this||Ej).form=m;(this||Ej).area=r}(this||Ej).form.action=this.uri();a();b=b.replace(jxa,"\\\n");(this||Ej).area.value=b.replace(ixa,"\\n");try{(this||Ej).form.submit()}catch(y){}(this||Ej).iframe.attachEvent?(this||Ej).iframe.onreadystatechange=function(){"complete"===f.iframe.readyState&&
l()}:(this||Ej).iframe.onload=l};var kxa=jda,lxa=Object.freeze({}),Zg="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,kda={},mxa=oi.Buffer,UV=uZ,nxa=ck,oxa=Jy("engine.io-client:websocket"),AN;"undefined"!==typeof WebSocket?AN=WebSocket:"undefined"!==typeof self&&(AN=self.WebSocket||self.MozWebSocket);if("undefined"===typeof window)try{var T8=lxa}catch(b){}var lF=AN||T8;kda=Xs;CQ(Xs,UV);Xs.prototype.name="websocket";Xs.prototype.supportsBinary=!0;Xs.prototype.doOpen=
function(){if(this.check()){var b=this.uri(),e=(this||Zg).protocols,l={};(this||Zg).isReactNative||(l.agent=(this||Zg).agent,l.perMessageDeflate=(this||Zg).perMessageDeflate,l.pfx=(this||Zg).pfx,l.key=(this||Zg).key,l.passphrase=(this||Zg).passphrase,l.cert=(this||Zg).cert,l.ca=(this||Zg).ca,l.ciphers=(this||Zg).ciphers,l.rejectUnauthorized=(this||Zg).rejectUnauthorized);(this||Zg).extraHeaders&&(l.headers=(this||Zg).extraHeaders);(this||Zg).localAddress&&(l.localAddress=(this||Zg).localAddress);
try{(this||Zg).ws=(this||Zg).usingBrowserWebSocket&&!(this||Zg).isReactNative?e?new lF(b,e):new lF(b):new lF(b,e,l)}catch(a){return this.emit("error",a)}void 0===(this||Zg).ws.binaryType&&((this||Zg).supportsBinary=!1);(this||Zg).ws.supports&&(this||Zg).ws.supports.binary?((this||Zg).supportsBinary=!0,(this||Zg).ws.binaryType="nodebuffer"):(this||Zg).ws.binaryType="arraybuffer";this.addEventListeners()}};Xs.prototype.addEventListeners=function(){var b=this||Zg;(this||Zg).ws.onopen=function(){b.onOpen()};
(this||Zg).ws.onclose=function(){b.onClose()};(this||Zg).ws.onmessage=function(e){b.onData(e.data)};(this||Zg).ws.onerror=function(e){b.onError("websocket error",e)}};Xs.prototype.write=function(b){function e(){l.emit("flush");setTimeout(function(){l.writable=!0;l.emit("drain")},0)}var l=this||Zg;(this||Zg).writable=!1;for(var a=b.length,f=0,m=a;f<m;f++)(function(r){nxa.encodePacket(r,l.supportsBinary,function(v){if(!l.usingBrowserWebSocket){var x={};r.options&&(x.compress=r.options.compress);l.perMessageDeflate&&
("string"===typeof v?mxa.byteLength(v):v.length)<l.perMessageDeflate.threshold&&(x.compress=!1)}try{l.usingBrowserWebSocket?l.ws.send(v):l.ws.send(v,x)}catch(y){oxa("websocket closed before onclose event")}--a||e()})})(b[f])};Xs.prototype.onClose=function(){UV.prototype.onClose.call(this||Zg)};Xs.prototype.doClose=function(){"undefined"!==typeof(this||Zg).ws&&(this||Zg).ws.close()};Xs.prototype.uri=function(){var b=(this||Zg).query||{},e=(this||Zg).secure?"wss":"ws",l="";(this||Zg).port&&("wss"===
e&&443!==Number((this||Zg).port)||"ws"===e&&80!==Number((this||Zg).port))&&(l=":"+(this||Zg).port);(this||Zg).timestampRequests&&(b[(this||Zg).timestampParam]=eda());(this||Zg).supportsBinary||(b.b64=1);b=BQ.encode(b);b.length&&(b="?"+b);var a=-1!==(this||Zg).hostname.indexOf(":");return e+"://"+(a?"["+(this||Zg).hostname+"]":(this||Zg).hostname)+l+(this||Zg).path+b};Xs.prototype.check=function(){return!!lF&&!("__initialize"in lF&&(this||Zg).name===Xs.prototype.name)};var DQ={},pxa=kda;DQ.polling=
function(b){var e=!1,l=!1,a=!1!==b.jsonp;"undefined"!==typeof location&&(l="https:"===location.protocol,(e=location.port)||(e=l?443:80),e=b.hostname!==location.hostname||e!==b.port,l=b.secure!==l);b.xdomain=e;b.xscheme=l;if("open"in new pZ(b)&&!b.forceJSONP)return new fxa(b);if(!a)throw Error("JSONP disabled");return new kxa(b)};DQ.websocket=pxa;var Nd="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,lda={},$m=Jy("engine.io-client:socket"),mda=ck,U8=Tca,Nma=BQ;lda=
Fj;Fj.priorWebsocketSuccess=!1;rD(Fj.prototype);Fj.protocol=mda.protocol;Fj.Socket=Fj;Fj.Transport=uZ;Fj.transports=DQ;Fj.parser=ck;Fj.prototype.createTransport=function(b){$m('creating transport "%s"',b);var e=(this||Nd).query,l={},a;for(a in e)e.hasOwnProperty(a)&&(l[a]=e[a]);l.EIO=mda.protocol;l.transport=b;e=(this||Nd).transportOptions[b]||{};(this||Nd).id&&(l.sid=(this||Nd).id);return new DQ[b]({query:l,socket:this||Nd,agent:e.agent||(this||Nd).agent,hostname:e.hostname||(this||Nd).hostname,
port:e.port||(this||Nd).port,secure:e.secure||(this||Nd).secure,path:e.path||(this||Nd).path,forceJSONP:e.forceJSONP||(this||Nd).forceJSONP,jsonp:e.jsonp||(this||Nd).jsonp,forceBase64:e.forceBase64||(this||Nd).forceBase64,enablesXDR:e.enablesXDR||(this||Nd).enablesXDR,withCredentials:e.withCredentials||(this||Nd).withCredentials,timestampRequests:e.timestampRequests||(this||Nd).timestampRequests,timestampParam:e.timestampParam||(this||Nd).timestampParam,policyPort:e.policyPort||(this||Nd).policyPort,
pfx:e.pfx||(this||Nd).pfx,key:e.key||(this||Nd).key,passphrase:e.passphrase||(this||Nd).passphrase,cert:e.cert||(this||Nd).cert,ca:e.ca||(this||Nd).ca,ciphers:e.ciphers||(this||Nd).ciphers,rejectUnauthorized:e.rejectUnauthorized||(this||Nd).rejectUnauthorized,perMessageDeflate:e.perMessageDeflate||(this||Nd).perMessageDeflate,extraHeaders:e.extraHeaders||(this||Nd).extraHeaders,forceNode:e.forceNode||(this||Nd).forceNode,localAddress:e.localAddress||(this||Nd).localAddress,requestTimeout:e.requestTimeout||
(this||Nd).requestTimeout,protocols:e.protocols||void 0,isReactNative:(this||Nd).isReactNative})};Fj.prototype.open=function(){if((this||Nd).rememberUpgrade&&Fj.priorWebsocketSuccess&&-1!==(this||Nd).transports.indexOf("websocket"))var b="websocket";else{if(0===(this||Nd).transports.length){var e=this||Nd;setTimeout(function(){e.emit("error","No transports available")},0);return}b=(this||Nd).transports[0]}(this||Nd).readyState="opening";try{b=this.createTransport(b)}catch(l){(this||Nd).transports.shift();
this.open();return}b.open();this.setTransport(b)};Fj.prototype.setTransport=function(b){$m("setting transport %s",b.name);var e=this||Nd;(this||Nd).transport&&($m("clearing existing transport %s",(this||Nd).transport.name),(this||Nd).transport.removeAllListeners());(this||Nd).transport=b;b.on("drain",function(){e.onDrain()}).on("packet",function(l){e.onPacket(l)}).on("error",function(l){e.onError(l)}).on("close",function(){e.onClose("transport close")})};Fj.prototype.probe=function(b){function e(){if(E.onlyBinaryUpgrades){var F=
!(this||Nd).supportsBinary&&E.transport.supportsBinary;y=y||F}y||($m('probe transport "%s" opened',b),x.send([{type:"ping",data:"probe"}]),x.once("packet",function(I){y||("pong"===I.type&&"probe"===I.data?($m('probe transport "%s" pong',b),E.upgrading=!0,E.emit("upgrading",x),x&&(Fj.priorWebsocketSuccess="websocket"===x.name,$m('pausing current transport "%s"',E.transport.name),E.transport.pause(function(){y||"closed"===E.readyState||($m("changing transport and sending upgrade packet"),v(),E.setTransport(x),
x.send([{type:"upgrade"}]),E.emit("upgrade",x),x=null,E.upgrading=!1,E.flush())}))):($m('probe transport "%s" failed',b),I=Error("probe error"),I.transport=x.name,E.emit("upgradeError",I)))}))}function l(){y||(y=!0,v(),x.close(),x=null)}function a(F){var I=Error("probe error: "+F);I.transport=x.name;l();$m('probe transport "%s" failed because of error: %s',b,F);E.emit("upgradeError",I)}function f(){a("transport closed")}function m(){a("socket closed")}function r(F){x&&F.name!==x.name&&($m('"%s" works - aborting "%s"',
F.name,x.name),l())}function v(){x.removeListener("open",e);x.removeListener("error",a);x.removeListener("close",f);E.removeListener("close",m);E.removeListener("upgrading",r)}$m('probing transport "%s"',b);var x=this.createTransport(b,{probe:1}),y=!1,E=this||Nd;Fj.priorWebsocketSuccess=!1;x.once("open",e);x.once("error",a);x.once("close",f);this.once("close",m);this.once("upgrading",r);x.open()};Fj.prototype.onOpen=function(){$m("socket open");(this||Nd).readyState="open";Fj.priorWebsocketSuccess=
"websocket"===(this||Nd).transport.name;this.emit("open");this.flush();if("open"===(this||Nd).readyState&&(this||Nd).upgrade&&(this||Nd).transport.pause){$m("starting upgrade probes");for(var b=0,e=(this||Nd).upgrades.length;b<e;b++)this.probe((this||Nd).upgrades[b])}};Fj.prototype.onPacket=function(b){if("opening"===(this||Nd).readyState||"open"===(this||Nd).readyState||"closing"===(this||Nd).readyState)switch($m('socket receive: type "%s", data "%s"',b.type,b.data),this.emit("packet",b),this.emit("heartbeat"),
b.type){case "open":this.onHandshake(JSON.parse(b.data));break;case "pong":this.setPing();this.emit("pong");break;case "error":var e=Error("server error");e.code=b.data;this.onError(e);break;case "message":this.emit("data",b.data),this.emit("message",b.data)}else $m('packet received with socket readyState "%s"',(this||Nd).readyState)};Fj.prototype.onHandshake=function(b){this.emit("handshake",b);(this||Nd).id=b.sid;(this||Nd).transport.query.sid=b.sid;(this||Nd).upgrades=this.filterUpgrades(b.upgrades);
(this||Nd).pingInterval=b.pingInterval;(this||Nd).pingTimeout=b.pingTimeout;this.onOpen();"closed"!==(this||Nd).readyState&&(this.setPing(),this.removeListener("heartbeat",(this||Nd).onHeartbeat),this.on("heartbeat",(this||Nd).onHeartbeat))};Fj.prototype.onHeartbeat=function(b){clearTimeout((this||Nd).pingTimeoutTimer);var e=this||Nd;e.pingTimeoutTimer=setTimeout(function(){if("closed"!==e.readyState)e.onClose("ping timeout")},b||e.pingInterval+e.pingTimeout)};Fj.prototype.setPing=function(){var b=
this||Nd;clearTimeout(b.pingIntervalTimer);b.pingIntervalTimer=setTimeout(function(){$m("writing ping packet - expecting pong within %sms",b.pingTimeout);b.ping();b.onHeartbeat(b.pingTimeout)},b.pingInterval)};Fj.prototype.ping=function(){var b=this||Nd;this.sendPacket("ping",function(){b.emit("ping")})};Fj.prototype.onDrain=function(){(this||Nd).writeBuffer.splice(0,(this||Nd).prevBufferLen);(this||Nd).prevBufferLen=0;0===(this||Nd).writeBuffer.length?this.emit("drain"):this.flush()};Fj.prototype.flush=
function(){"closed"!==(this||Nd).readyState&&(this||Nd).transport.writable&&!(this||Nd).upgrading&&(this||Nd).writeBuffer.length&&($m("flushing %d packets in socket",(this||Nd).writeBuffer.length),(this||Nd).transport.send((this||Nd).writeBuffer),(this||Nd).prevBufferLen=(this||Nd).writeBuffer.length,this.emit("flush"))};Fj.prototype.write=Fj.prototype.send=function(b,e,l){this.sendPacket("message",b,e,l);return this||Nd};Fj.prototype.sendPacket=function(b,e,l,a){"function"===typeof e&&(a=e,e=void 0);
"function"===typeof l&&(a=l,l=null);if("closing"!==(this||Nd).readyState&&"closed"!==(this||Nd).readyState){l=l||{};l.compress=!1!==l.compress;b={type:b,data:e,options:l};this.emit("packetCreate",b);(this||Nd).writeBuffer.push(b);if(a)this.once("flush",a);this.flush()}};Fj.prototype.close=function(){function b(){a.onClose("forced close");$m("socket closing - telling transport to close");a.transport.close()}function e(){a.removeListener("upgrade",e);a.removeListener("upgradeError",e);b()}function l(){a.once("upgrade",
e);a.once("upgradeError",e)}if("opening"===(this||Nd).readyState||"open"===(this||Nd).readyState){(this||Nd).readyState="closing";var a=this||Nd;if((this||Nd).writeBuffer.length)this.once("drain",function(){(this||Nd).upgrading?l():b()});else(this||Nd).upgrading?l():b()}return this||Nd};Fj.prototype.onError=function(b){$m("socket error %j",b);Fj.priorWebsocketSuccess=!1;this.emit("error",b);this.onClose("transport error",b)};Fj.prototype.onClose=function(b,e){if("opening"===(this||Nd).readyState||
"open"===(this||Nd).readyState||"closing"===(this||Nd).readyState){$m('socket close with reason: "%s"',b);var l=this||Nd;clearTimeout((this||Nd).pingIntervalTimer);clearTimeout((this||Nd).pingTimeoutTimer);(this||Nd).transport.removeAllListeners("close");(this||Nd).transport.close();(this||Nd).transport.removeAllListeners();(this||Nd).readyState="closed";(this||Nd).id=null;this.emit("close",b,e);l.writeBuffer=[];l.prevBufferLen=0}};Fj.prototype.filterUpgrades=function(b){for(var e=[],l=0,a=b.length;l<
a;l++)~xZ((this||Nd).transports,b[l])&&e.push(b[l]);return e};var yZ={};yZ=lda;yZ.parser=ck;var qxa=yZ,rxa={},zZ=rxa=function(b,e){for(var l=[],a=(e=e||0)||0;a<b.length;a++)l[a-e]=b[a];return l},sxa={},nda=[].slice,Ky=sxa=function(b,e){"string"==typeof e&&(e=b[e]);if("function"!=typeof e)throw Error("bind() requires a function");var l=nda.call(arguments,2);return function(){return e.apply(b,l.concat(nda.call(arguments)))}},txa={},$u=txa=function(b,e,l){b.on(e,l);return{destroy:function(){b.removeListener(e,
l)}}},xf="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,AZ={},Vp=jl,av=Jy("socket.io-client:socket");AZ=AZ=bm;var uxa={connect:1,connect_error:1,connect_timeout:1,connecting:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1,ping:1,pong:1},BZ=rD.prototype.emit;rD(bm.prototype);bm.prototype.subEvents=function(){if(!(this||xf).subs){var b=(this||xf).io;(this||xf).subs=[$u(b,"open",Ky(this||xf,"onopen")),$u(b,"packet",
Ky(this||xf,"onpacket")),$u(b,"close",Ky(this||xf,"onclose"))]}};bm.prototype.open=bm.prototype.connect=function(){if((this||xf).connected)return this||xf;this.subEvents();(this||xf).io.reconnecting||(this||xf).io.open();if("open"===(this||xf).io.readyState)this.onopen();this.emit("connecting");return this||xf};bm.prototype.send=function(){var b=zZ(arguments);b.unshift("message");(this||xf).emit.apply(this||xf,b);return this||xf};bm.prototype.emit=function(b){if(uxa.hasOwnProperty(b))return BZ.apply(this||
xf,arguments),this||xf;var e=zZ(arguments),l={type:(void 0!==(this||xf).flags.binary?(this||xf).flags.binary:qZ(e))?Vp.BINARY_EVENT:Vp.EVENT,data:e,options:{}};l.options.compress=!(this||xf).flags||!1!==(this||xf).flags.compress;"function"===typeof e[e.length-1]&&(av("emitting packet with ack id %d",(this||xf).ids),(this||xf).acks[(this||xf).ids]=e.pop(),l.id=(this||xf).ids++);(this||xf).connected?this.packet(l):(this||xf).sendBuffer.push(l);(this||xf).flags={};return this||xf};bm.prototype.packet=
function(b){b.nsp=(this||xf).nsp;(this||xf).io.packet(b)};bm.prototype.onopen=function(){av("transport is open - connecting");if("/"!==(this||xf).nsp)if((this||xf).query){var b="object"===typeof(this||xf).query?BQ.encode((this||xf).query):(this||xf).query;av("sending connect packet with query %s",b);this.packet({type:Vp.CONNECT,query:b})}else this.packet({type:Vp.CONNECT})};bm.prototype.onclose=function(b){av("close (%s)",b);(this||xf).connected=!1;(this||xf).disconnected=!0;delete (this||xf).id;
this.emit("disconnect",b)};bm.prototype.onpacket=function(b){var e=b.type===Vp.ERROR&&"/"===b.nsp;if(b.nsp===(this||xf).nsp||e)switch(b.type){case Vp.CONNECT:this.onconnect();break;case Vp.EVENT:this.onevent(b);break;case Vp.BINARY_EVENT:this.onevent(b);break;case Vp.ACK:this.onack(b);break;case Vp.BINARY_ACK:this.onack(b);break;case Vp.DISCONNECT:this.ondisconnect();break;case Vp.ERROR:this.emit("error",b.data)}};bm.prototype.onevent=function(b){var e=b.data||[];av("emitting event %j",e);null!=b.id&&
(av("attaching ack callback to event"),e.push(this.ack(b.id)));(this||xf).connected?BZ.apply(this||xf,e):(this||xf).receiveBuffer.push(e)};bm.prototype.ack=function(b){var e=this||xf,l=!1;return function(){if(!l){l=!0;var a=zZ(arguments);av("sending ack %j",a);e.packet({type:qZ(a)?Vp.BINARY_ACK:Vp.ACK,id:b,data:a})}}};bm.prototype.onack=function(b){var e=(this||xf).acks[b.id];"function"===typeof e?(av("calling ack %s with %j",b.id,b.data),e.apply(this||xf,b.data),delete (this||xf).acks[b.id]):av("bad ack %s",
b.id)};bm.prototype.onconnect=function(){(this||xf).connected=!0;(this||xf).disconnected=!1;this.emit("connect");this.emitBuffered()};bm.prototype.emitBuffered=function(){var b;for(b=0;b<(this||xf).receiveBuffer.length;b++)BZ.apply(this||xf,(this||xf).receiveBuffer[b]);(this||xf).receiveBuffer=[];for(b=0;b<(this||xf).sendBuffer.length;b++)this.packet((this||xf).sendBuffer[b]);(this||xf).sendBuffer=[]};bm.prototype.ondisconnect=function(){av("server disconnect (%s)",(this||xf).nsp);this.destroy();
this.onclose("io server disconnect")};bm.prototype.destroy=function(){if((this||xf).subs){for(var b=0;b<(this||xf).subs.length;b++)(this||xf).subs[b].destroy();(this||xf).subs=null}(this||xf).io.destroy(this||xf)};bm.prototype.close=bm.prototype.disconnect=function(){(this||xf).connected&&(av("performing disconnect (%s)",(this||xf).nsp),this.packet({type:Vp.DISCONNECT}));this.destroy();if((this||xf).connected)this.onclose("io client disconnect");return this||xf};bm.prototype.compress=function(b){(this||
xf).flags.compress=b;return this||xf};bm.prototype.binary=function(b){(this||xf).flags.binary=b;return this||xf};var oda=AZ,Np="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,pda={};pda=mF;mF.prototype.duration=function(){var b=(this||Np).ms*Math.pow((this||Np).factor,(this||Np).attempts++);if((this||Np).jitter){var e=Math.random(),l=Math.floor(e*(this||Np).jitter*b);b=0==(Math.floor(10*e)&1)?b-l:b+l}return Math.min(b,(this||Np).max)|0};mF.prototype.reset=function(){(this||
Np).attempts=0};mF.prototype.setMin=function(b){(this||Np).ms=b};mF.prototype.setMax=function(b){(this||Np).max=b};mF.prototype.setJitter=function(b){(this||Np).jitter=b};var vxa=pda,wxa={},qda=Jy("socket.io-client:url"),xxa=wxa=function(b,e){var l=b;e=e||"undefined"!==typeof location&&location;null==b&&(b=e.protocol+"//"+e.host);"string"===typeof b&&("/"===b.charAt(0)&&(b="/"===b.charAt(1)?e.protocol+b:e.host+b),/^(https?|wss?):\/\//.test(b)||(qda("protocol-less url %s",b),b="undefined"!==typeof e?
e.protocol+"//"+b:"https://"+b),qda("parse %s",b),l=Tca(b));l.port||(/^(http|ws)$/.test(l.protocol)?l.port="80":/^(http|ws)s$/.test(l.protocol)&&(l.port="443"));l.path=l.path||"/";b=-1!==l.host.indexOf(":")?"["+l.host+"]":l.host;l.id=l.protocol+"://"+b+":"+l.port;l.href=l.protocol+"://"+b+(e&&e.port===l.port?"":":"+l.port);return l},ne="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,rda={},Pma=jl,qp=Jy("socket.io-client:manager"),Oma=vxa,sda=Object.prototype.hasOwnProperty;
rda=dk;dk.prototype.emitAll=function(){(this||ne).emit.apply(this||ne,arguments);for(var b in(this||ne).nsps)sda.call((this||ne).nsps,b)&&(this||ne).nsps[b].emit.apply((this||ne).nsps[b],arguments)};dk.prototype.updateSocketIds=function(){for(var b in(this||ne).nsps)sda.call((this||ne).nsps,b)&&((this||ne).nsps[b].id=this.generateId(b))};dk.prototype.generateId=function(b){return("/"===b?"":b+"#")+(this||ne).engine.id};rD(dk.prototype);dk.prototype.reconnection=function(b){if(!arguments.length)return(this||
ne)._reconnection;(this||ne)._reconnection=!!b;return this||ne};dk.prototype.reconnectionAttempts=function(b){if(!arguments.length)return(this||ne)._reconnectionAttempts;(this||ne)._reconnectionAttempts=b;return this||ne};dk.prototype.reconnectionDelay=function(b){if(!arguments.length)return(this||ne)._reconnectionDelay;(this||ne)._reconnectionDelay=b;(this||ne).backoff&&(this||ne).backoff.setMin(b);return this||ne};dk.prototype.randomizationFactor=function(b){if(!arguments.length)return(this||ne)._randomizationFactor;
(this||ne)._randomizationFactor=b;(this||ne).backoff&&(this||ne).backoff.setJitter(b);return this||ne};dk.prototype.reconnectionDelayMax=function(b){if(!arguments.length)return(this||ne)._reconnectionDelayMax;(this||ne)._reconnectionDelayMax=b;(this||ne).backoff&&(this||ne).backoff.setMax(b);return this||ne};dk.prototype.timeout=function(b){if(!arguments.length)return(this||ne)._timeout;(this||ne)._timeout=b;return this||ne};dk.prototype.maybeReconnectOnOpen=function(){!(this||ne).reconnecting&&(this||
ne)._reconnection&&0===(this||ne).backoff.attempts&&this.reconnect()};dk.prototype.open=dk.prototype.connect=function(b,e){qp("readyState %s",(this||ne).readyState);if(~(this||ne).readyState.indexOf("open"))return this||ne;qp("opening %s",(this||ne).uri);(this||ne).engine=qxa((this||ne).uri,(this||ne).opts);var l=(this||ne).engine,a=this||ne;(this||ne).readyState="opening";(this||ne).skipReconnect=!1;var f=$u(l,"open",function(){a.onopen();b&&b()});e=$u(l,"error",function(v){qp("connect_error");a.cleanup();
a.readyState="closed";a.emitAll("connect_error",v);if(b){var x=Error("Connection error");x.data=v;b(x)}else a.maybeReconnectOnOpen()});if(!1!==(this||ne)._timeout){var m=(this||ne)._timeout;qp("connect attempt will timeout after %d",m);0===m&&f.destroy();var r=setTimeout(function(){qp("connect attempt timed out after %d",m);f.destroy();l.close();l.emit("error","timeout");a.emitAll("connect_timeout",m)},m);(this||ne).subs.push({destroy:function(){clearTimeout(r)}})}(this||ne).subs.push(f);(this||ne).subs.push(e);
return this||ne};dk.prototype.onopen=function(){qp("open");this.cleanup();(this||ne).readyState="open";this.emit("open");var b=(this||ne).engine;(this||ne).subs.push($u(b,"data",Ky(this||ne,"ondata")));(this||ne).subs.push($u(b,"ping",Ky(this||ne,"onping")));(this||ne).subs.push($u(b,"pong",Ky(this||ne,"onpong")));(this||ne).subs.push($u(b,"error",Ky(this||ne,"onerror")));(this||ne).subs.push($u(b,"close",Ky(this||ne,"onclose")));(this||ne).subs.push($u((this||ne).decoder,"decoded",Ky(this||ne,"ondecoded")))};
dk.prototype.onping=function(){(this||ne).lastPing=new Date;this.emitAll("ping")};dk.prototype.onpong=function(){this.emitAll("pong",new Date-(this||ne).lastPing)};dk.prototype.ondata=function(b){(this||ne).decoder.add(b)};dk.prototype.ondecoded=function(b){this.emit("packet",b)};dk.prototype.onerror=function(b){qp("error",b);this.emitAll("error",b)};dk.prototype.socket=function(b,e){function l(){~xZ(f.connecting,a)||f.connecting.push(a)}var a=(this||ne).nsps[b];if(!a){a=new oda(this||ne,b,e);(this||
ne).nsps[b]=a;var f=this||ne;a.on("connecting",l);a.on("connect",function(){a.id=f.generateId(b)});(this||ne).autoConnect&&l()}return a};dk.prototype.destroy=function(b){b=xZ((this||ne).connecting,b);~b&&(this||ne).connecting.splice(b,1);(this||ne).connecting.length||this.close()};dk.prototype.packet=function(b){qp("writing packet %j",b);var e=this||ne;b.query&&0===b.type&&(b.nsp+="?"+b.query);e.encoding?e.packetBuffer.push(b):(e.encoding=!0,(this||ne).encoder.encode(b,function(l){for(var a=0;a<l.length;a++)e.engine.write(l[a],
b.options);e.encoding=!1;e.processPacketQueue()}))};dk.prototype.processPacketQueue=function(){if(0<(this||ne).packetBuffer.length&&!(this||ne).encoding){var b=(this||ne).packetBuffer.shift();this.packet(b)}};dk.prototype.cleanup=function(){qp("cleanup");for(var b=(this||ne).subs.length,e=0;e<b;e++)(this||ne).subs.shift().destroy();(this||ne).packetBuffer=[];(this||ne).encoding=!1;(this||ne).lastPing=null;(this||ne).decoder.destroy()};dk.prototype.close=dk.prototype.disconnect=function(){qp("disconnect");
(this||ne).skipReconnect=!0;(this||ne).reconnecting=!1;"opening"===(this||ne).readyState&&this.cleanup();(this||ne).backoff.reset();(this||ne).readyState="closed";(this||ne).engine&&(this||ne).engine.close()};dk.prototype.onclose=function(b){qp("onclose");this.cleanup();(this||ne).backoff.reset();(this||ne).readyState="closed";this.emit("close",b);(this||ne)._reconnection&&!(this||ne).skipReconnect&&this.reconnect()};dk.prototype.reconnect=function(){if((this||ne).reconnecting||(this||ne).skipReconnect)return this||
ne;var b=this||ne;if((this||ne).backoff.attempts>=(this||ne)._reconnectionAttempts)qp("reconnect failed"),(this||ne).backoff.reset(),this.emitAll("reconnect_failed"),(this||ne).reconnecting=!1;else{var e=(this||ne).backoff.duration();qp("will wait %dms before reconnect attempt",e);(this||ne).reconnecting=!0;var l=setTimeout(function(){b.skipReconnect||(qp("attempting reconnect"),b.emitAll("reconnect_attempt",b.backoff.attempts),b.emitAll("reconnecting",b.backoff.attempts),b.skipReconnect||b.open(function(a){a?
(qp("reconnect attempt error"),b.reconnecting=!1,b.reconnect(),b.emitAll("reconnect_error",a.data)):(qp("reconnect success"),b.onreconnect())}))},e);(this||ne).subs.push({destroy:function(){clearTimeout(l)}})}};dk.prototype.onreconnect=function(){var b=(this||ne).backoff.attempts;(this||ne).reconnecting=!1;(this||ne).backoff.reset();this.updateSocketIds();this.emitAll("reconnect",b)};var tda=rda,RA={},Qma=xxa,yxa=jl,X8=tda,W8=Jy("socket.io-client");RA=RA=V8;var kI=RA.managers={};RA.protocol=yxa.protocol;
RA.connect=V8;RA.Manager=tda;RA.Socket=oda;var zxa=RA,ch=lively.FreezerRuntime.recorderFor("lively.2lively/client.js");ch.determineLocation=function(){return"undefined"!==typeof document&&document.location?System.baseURL||document.location.origin:ch.isNode?System._nodeRequire("os").hostname():System.baseURL};ch.promise=hg;ch.fun=vn;ch.obj=ng;ch.events=nA;ch.num=Um;ch.L2LConnection=Zk;ch.defaultActions=uQ;ch.defaultClientActions=vQ;ch.isNode="undefined"!==typeof System?System.get("@system-env").node:
"undefined"!==typeof ch.process&&ch.process.env;ch._ioClient=zxa;ch.resource=A;ch.ioClient=ch.ioClient||void 0;ch.isNode?(ch.require=System._nodeRequire("module")._load,ch.ioClient=ch.require("socket.io-client")):ch.ioClient=ch._ioClient;ch.urlHelper={isRoot:function(b){return"/"===ch.urlHelper.path(b)},root:function(b){return ch.urlHelper.isRoot(b)?b:b.slice(0,-ch.urlHelper.path(b).length)+"/"},path:function(){var b=/^[a-z0-9-_\.]+:/,e=/^\/\/[^\/]+/;return function(l){l=l.replace(b,"").replace(e,
"");return""===l?"/":l}}(),join:function(b,e){b.endsWith("/")&&(b=b.slice(0,-1));e.startsWith("/")&&(e=e.slice(1));return b+"/"+e}};var Ak=function(b,e,l,a){var f=ch.L2LConnection.call(this)||this;ch.events.makeEmitter(f);f.info=a;f.origin=b;f.path=e;f.namespace=l.replace(/^\/?/,"/");f.trackerId=null;f._socketioClient=null;f._reconnectState={closed:!1,autoReconnect:!0,isReconnecting:!1,isReconnectingViaSocketio:!1,registerAttempt:0,registerProcess:null,isOpening:!1};Object.keys(ch.defaultActions).forEach(function(m){return f.addService(m,
ch.defaultActions[m])});Object.keys(ch.defaultClientActions).forEach(function(m){return f.addService(m,ch.defaultClientActions[m])});return f};$jscomp.inherits(Ak,ch.L2LConnection);Ak.clientKey=function(b,e,l){b=b.replace(/\/$/,"");e=e.replace(/^\//,"");l=l.replace(/^\//,"");return b+"-"+e+"-"+l};Ak.forLivelyInBrowser=function(b){var e=!!b;b=Object.assign({type:"lively.morphic browser"},b);var l=this.default();if(!l)return ch.L2LClient.ensure({url:ch.resource(ch.determineLocation()).join("/lively-socket.io").url,
namespace:"l2l",info:b});e&&!ch.obj.equals(l.info,b)&&l.isRegistered()&&(l.info=b,l.unregister().then(function(){return l.register()}).catch(function(a){return console.error("l2l re-register on info change errored: "+a)}));return l};Ak.default=function(){var b=ch.L2LClient.clients.keys().next().value;return ch.L2LClient.clients.get(b)};Ak.create=function(b){var e=b=void 0===b?{}:b;b=void 0===e.debug?!1:e.debug;var l=e.url,a=e.namespace,f=void 0===e.autoOpen?!0:e.autoOpen;e=void 0===e.info?{}:e.info;
if(!l)throw Error("L2LClient needs server url!");var m=ch.urlHelper.root(l).replace(/\/+$/,"");l=ch.urlHelper.path(l);a=new this(m,l,a||"",e);f&&a.register();a.debug=b;return a};Ak.ensure=function(b){var e=b=void 0===b?{}:b,l=e.url;e=e.namespace;if(!l)throw Error("L2LClient needs server url!");var a=ch.urlHelper.root(l).replace(/\/+$/,""),f=ch.urlHelper.path(l);a=this.clientKey(a,f,e||"");(f=this.clients.get(a))||this.clients.set(a,f=this.create(Object.assign({},b,{url:l,namespace:e})));return f};
Ak.prototype.isOnline=function(){return this.socket&&this.socket.connected};Ak.prototype.isRegistered=function(){return this.isOnline()&&!!this.trackerId};Ak.prototype.open=function(){var b=this,e,l,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){if(1==f.nextAddress)return b.isOnline()||b._reconnectState.isOpening?f.return(b):f.yield(b.close(),2);b._reconnectState.closed=!1;e=ch.urlHelper.join(b.origin,b.namespace);l={path:b.path,transports:["websocket","polling"]};a=b._socketioClient=
ch.ioClient(e,l);b.debug&&console.log("["+b+"] connecting");a.on("error",function(m){b._reconnectState.isOpening=!1;b.debug&&console.log("["+b+"] errored: "+m)});a.on("close",function(m){return b.debug&&console.log("["+b+"] closed: "+m)});a.on("reconnect_failed",function(){return b.debug&&console.log("["+b+"] could not reconnect")});a.on("reconnect_error",function(m){return b.debug&&console.log("["+b+"] reconnect error "+m)});a.on("connect",function(){b.debug&&console.log("["+b+"] connected");b.emit("connected",
b);b._reconnectState.isOpening=!1;b._reconnectState.isReconnecting=!1;b._reconnectState.isReconnectingViaSocketio=!1});a.on("disconnect",function(){b._reconnectState.isOpening=!1;b.debug&&console.log("["+b+"] disconnected");b.emit("disconnected",b);b.trackerId?("tracker"!==b.trackerId&&(b.renameTarget(b.trackerId,"tracker"),b.trackerId=null),b._reconnectState.closed?b.debug&&console.log("["+b+"] won't reconnect b/c client is marked as closed"):b._reconnectState.autoReconnect?(b._reconnectState.isReconnecting=
!0,setTimeout(function(){b._reconnectState.closed?b.debug&&console.log("["+b+"] won't reconnect b/c client is marked as closed 2"):b._reconnectState.isReconnectingViaSocketio?b.debug&&console.log("["+b+"] won't reconnect again, client already reconnecting"):(b.debug&&console.log("["+b+"] initiating reconnection to tracker"),b.register())},20)):b.debug&&console.log("["+b+"] won't reconnect b/c client has reconnection disabled")):(b.debug&&console.log("["+b+"] disconnect: don't have a tracker id, won't try reconnect"),
b.trackerId="tracker")});a.on("reconnecting",function(){b.debug&&console.log("["+b+"] reconnecting",b._reconnectState);b.emit("reconnecting",b);b._reconnectState.closed?(b._reconnectState.isReconnecting=!1,b._reconnectState.isReconnectingViaSocketio=!1,a.close(),b.close()):(b._reconnectState.isReconnecting=!0,b._reconnectState.isReconnectingViaSocketio=!0)});a.on("reconnect",function(){b.debug&&console.log("["+b+"] reconnected");b._reconnectState.isReconnecting=!1;b._reconnectState.isReconnectingViaSocketio=
!1;b.register();if(b.onReconnect&&"function"===typeof b.onReconnect)b.onReconnect()});b.installEventToMessageTranslator(a);b._reconnectState.isOpening=!0;return f.return((new Promise(function(m,r){a.once("error",r);a.once("connect",m)})).then(function(){return b}))})};Ak.prototype.onReconnect=function(){var b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){b=(new Date).toLocaleDateString();console.log("Reconnected at "+b);e.jumpToEnd()})};Ak.prototype.close=function(){var b=this,e,
l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){if(1==a.nextAddress){b._reconnectState.closed=!0;if(e=b.socket)e.removeAllListeners("reconnect"),e.removeAllListeners("reconnecting"),e.removeAllListeners("disconnect"),e.removeAllListeners("connect"),e.removeAllListeners("reconnect_error"),e.removeAllListeners("reconnect_failed"),e.removeAllListeners("close"),e.removeAllListeners("error"),e.close();b.debug&&console.log("["+b+"] closing...");return b.isRegistered()?a.yield(b.unregister(),
2):a.jumpTo(2)}return b.isOnline()||b.socket?e&&!e.connected?(b.debug&&console.log("["+b+"] socket not connected, considering client closed"),a.return(b)):a.return(Promise.race([ch.promise.delay(2E3).then(function(){return e.removeAllListeners("disconnect")}),new Promise(function(f){return e.once("disconnect",f)})]).then(function(){b.debug&&console.log("["+b+"] closed");return b})):(b.debug&&(l=b.isOnline()?"no socket":"not online",b.debug&&console.log("["+b+"] cannot close: "+l)),a.return(b))})};
Ak.prototype.remove=function(){var b=this.constructor.clientKey(this.origin,this.path,this.namespace);this.constructor.clients.delete(b);return this.close()};Ak.prototype.register=function(){var b=this,e,l,a,f,m,r,v,x,y,E;return $jscomp.asyncExecutePromiseGeneratorProgram(function(F){switch(F.nextAddress){case 1:if(b.isRegistered())return F.return();if(b._reconnectState.closed)return b.debug&&console.log("["+b+"] not registering this b/c closed"),b._reconnectState.registerAttempt=0,F.return();if(b._reconnectState.registerProcess)return b.debug&&
console.log("["+b+"] not registering this b/c register process exists"),F.return();F.setCatchFinallyBlocks(2);if(b.isOnline()){F.jumpTo(4);break}return F.yield(b.open(),4);case 4:return b.debug&&console.log("["+b+"] register"),F.yield(b.sendToAndWait("tracker","register",Object.assign({userName:"unknown",type:"l2l "+(ch.isNode?"node":"browser"),location:ch.determineLocation()},b.info)),6);case 6:e=F.yieldResult;if(!e.data)throw l=Error("Register answer is empty!"),b.emit("error",l),l;if(e.data.isError)throw a=
Error(e.data.error),b.emit("error",a),a;b._reconnectState.registerAttempt=0;f=e;m=f.data;r=m.trackerId;v=m.messageNumber;b.trackerId=r;b._incomingOrderNumberingBySenders.set(r,v||0);b.emit("registered",{trackerId:r});F.leaveTryBlock(0);break;case 2:x=F.enterCatchBlock(),console.error("Error in register request of "+b+": "+x),y=b._reconnectState.registerAttempt++,E=ch.num.backoff(y,4,3E5),b._reconnectState.registerProcess=setTimeout(function(){b._reconnectState.registerProcess=null;b.register()},E),
F.jumpToEnd()}})};Ak.prototype.unregister=function(){var b=this,e;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){switch(l.nextAddress){case 1:if(!b.isRegistered())return l.return();b.debug&&console.log("["+b+"] unregister");e=b.trackerId;l.setCatchFinallyBlocks(2);return l.yield(b.sendToAndWait(b.trackerId,"unregister",{}),4);case 4:l.leaveTryBlock(3);break;case 2:l.enterCatchBlock();case 3:b.renameTarget(e,"tracker"),b.trackerId=null,b.emit("unregistered",b),l.jumpToEnd()}})};Ak.prototype.whenRegistered=
function(b){var e=this;return ch.promise.waitFor(b,function(){return e.isRegistered()}).catch(function(l){return Promise.reject(/timeout/i.test(String(l))?Error("Timeout in "+e+".whenRegistered"):l)})};Ak.prototype.send=function(b,e){var l=this,a=$jscomp.makeIterator(this.prepareSend(b,e));b=a.next().value;e=a.next().value;this.whenOnline().then(function(){var f=l.socket,m=b,r=m.action;m=m.target;if(!f)throw Error("Trying to send message "+r+" to "+m+" but cannot find a connection to it!");"function"===
typeof e?f.emit(r,b,e):f.emit(r,b)})};Ak.prototype.joinRoom=function(b){var e=this;return this.whenOnline().then(function(){return e.sendToAndWait(e.trackerId,"[broadcast] join room",{room:b})})};Ak.prototype.leaveRoom=function(b){var e=this;return this.whenOnline().then(function(){return e.sendToAndWait(e.trackerId,"[broadcast] leave room",{room:b})})};Ak.prototype.broadcast=function(b,e,l,a,f){var m=this,r={action:e,room:b,broadcast:l};if(void 0===a?0:a)r.isSystemBroadcast=!0;if(void 0===f?0:f)r.isMultiServerBroadcast=
!0;return this.whenOnline().then(function(){return m.sendToAndWait(m.trackerId,"[broadcast] send",r)})};Ak.prototype.listRoomMembers=function(b){var e=this,l,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){if(1==f.nextAddress)return f.yield(e.sendToAndWait(e.trackerId,"[broadcast] list room members",{room:b}),2);l=f.yieldResult;a=l.data;return f.return(a)})};Ak.prototype.joinedRooms=function(){var b=this,e,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){if(1==a.nextAddress)return a.yield(b.sendToAndWait(b.trackerId,
"[broadcast] my rooms",{}),2);e=a.yieldResult;l=e.data;return a.return(l)})};Ak.prototype.listRooms=function(){var b=this,e,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){if(1==a.nextAddress)return a.yield(b.sendToAndWait(b.trackerId,"[broadcast] all rooms",{}),2);e=a.yieldResult;l=e.data;return a.return(l)})};Ak.prototype.listPeers=function(b){b=void 0===b?!1:b;var e=this,l,a,f,m,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(x){if(1==x.nextAddress)return l=e,a=
l._peersCached,f=Date.now(),!b&&a&&1E3>f-a.timestamp?x.return(e._peersCached.sessions):e.isOnline()?x.yield(e.sendToAndWait(e.trackerId,"getClients",{}),2):x.return([]);m=x.yieldResult;r=m.data;v=r.map(function(y){var E=$jscomp.makeIterator(y);y=E.next().value;var F=E.next().value,I=F.info||{};E=I.userRealm;var J=I.userToken,P=I.l2lUserToken,N=I.location,Y=I.type;I=I.world;y=Object.assign({},ch.obj.dissoc(F,["info"]),{id:y,world:I,location:N,type:Y});(J=J||P)&&"null"!==J&&(lively.user?y.user=lively.user.ClientUser.fromToken(J,
E):(y.userToken=J,y.userRealm=E));return y});e._peersCached={timestamp:f,sessions:v};return x.return(v)})};Ak.prototype.toString=function(){var b=this.origin,e=this.path,l=this.namespace,a=this.id,f=this.isOnline()?this.isRegistered()?"registered":"unregistered":"disconnected";return"L2LClient("+(a||"").slice(0,5)+" "+b+e+" - "+l+" "+f+")"};$jscomp.global.Object.defineProperties(Ak.prototype,{socket:{configurable:!0,enumerable:!0,get:function(){return this._socketioClient}},socketId:{configurable:!0,
enumerable:!0,get:function(){return this.socket?this.socket.id:null}}});$jscomp.global.Object.defineProperties(Ak,{clients:{configurable:!0,enumerable:!0,get:function(){return this._clients||(this._clients=new Map)}}});ch.L2LClient=Ak;ch.default=Ak;var uda=Object.freeze({__proto__:null,"default":Ak});Ha("bY",uda);var sD=lively.FreezerRuntime.recorderFor("lively.shell/command-interface.js");sD.promise=hg;sD.events=nA;var Xr=function(){this._stderr=this._stdout="";this.exitCode=void 0;this.commandString=
"";this.process=null;this._whenDone=sD.promise.deferred();this._whenStarted=sD.promise.deferred();this.startTime=0;this.lastSignal=null;sD.events.makeEmitter(this)};Xr.findCommand=function(b){return this.commands.find(function(e){return e.pid===b})};Xr.prototype.isRunning=function(){return this.process&&void 0===this.exitCode};Xr.prototype.isDone=function(){return void 0!=this.exitCode};Xr.prototype.whenStarted=function(){return this._whenStarted.promise};Xr.prototype.whenDone=function(){return this._whenDone.promise};
Xr.prototype.spawn=function(b){throw Error("not yet implemented");};Xr.prototype.kill=function(b){this.lastSignal=void 0===b?"KILL":b};Xr.prototype.toString=function(){return this.constructor.name+"("+this.commandString+", "+this.status+")"};$jscomp.global.Object.defineProperties(Xr.prototype,{isShellCommand:{configurable:!0,enumerable:!0,get:function(){return!0}},status:{configurable:!0,enumerable:!0,get:function(){return this.process?void 0===this.exitCode?"running, pid "+this.pid:"exited "+this.exitCode+
", pid "+this.pid:"not started"}},pid:{configurable:!0,enumerable:!0,get:function(){return this.process?this.process.pid:null}},output:{configurable:!0,enumerable:!0,get:function(){return this.stdout+(this.stderr?"\n"+this.stderr:"")}},stdout:{configurable:!0,enumerable:!0,get:function(){return this._stdout}},stderr:{configurable:!0,enumerable:!0,get:function(){return this._stderr}}});$jscomp.global.Object.defineProperties(Xr,{commands:{configurable:!0,enumerable:!0,get:function(){return this._commands||
(this._commands=[])}}});sD.CommandInterface=Xr;sD.default=Xr;var Tg=lively.FreezerRuntime.recorderFor("lively.shell/client-command.js");Tg.runCommand=yC;Tg.defaultDirectory=lI;Tg.env=mI;Tg.readFile=BN;Tg.writeFile=CN;Tg.CommandInterface=Xr;Tg.promise=hg;Tg.arr=Mf;Tg.obj=ng;Tg.signal=Xl;Tg.debug=!1;Tg.runCommand=yC;Tg.runCommand=yC;Tg.dirCache={};Tg.defaultDirectory=lI;Tg.defaultDirectory=lI;Tg.env=mI;Tg.env=mI;Tg.readFile=BN;Tg.readFile=BN;Tg.writeFile=CN;Tg.writeFile=CN;var rt=function(b){var e=
Tg.CommandInterface.call(this)||this;e.debug=Tg.debug;e.l2lClient=b;return e};$jscomp.inherits(rt,Tg.CommandInterface);rt.installLively2LivelyServices=function(b){Object.keys(Tg.L2LServices).forEach(function(e){return b.addService(e,function(l,a,f){return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){return m.return(Tg.L2LServices[e](l,a,f))})})})};rt.prototype.envForCommand=function(b){var e=this.l2lClient,l=e.id,a=e.origin,f=e.path;e=e.namespace;var m=b||{};b=m.env;m=m.owner;b=b||{};m&&
(b.LIVELY_COMMAND_OWNER=m);return Object.assign({ASKPASS_SESSIONID:l,L2L_EDITOR_SESSIONID:l,L2L_SESSIONTRACKER_SERVER:a,L2L_SESSIONTRACKER_PATH:f,L2L_SESSIONTRACKER_NS:e},b)};rt.prototype.spawn=function(b){b=void 0===b?{command:null,env:{},cwd:null,stdin:null}:b;var e=this,l,a,f,m,r,v,x,y,E,F,I;return $jscomp.asyncExecutePromiseGeneratorProgram(function(J){if(1==J.nextAddress)return l=e,a=l.l2lClient,f=b,m=f.command,r=f.env,v=f.cwd,x=f.stdin,e.startTime=new Date,r=e.envForCommand(b),e.debug&&console.log(e+
" spawning "+m),e.debug&&e.whenStarted().then(function(){return console.log(e+" started")}),e.debug&&e.whenDone().then(function(){return console.log(e+" exited")}),Tg.arr.pushIfNotIncluded(e.constructor.commands,e),e.commandString=Array.isArray(m)?m.join(""):m,J.yield(a.sendToAndWait(a.trackerId,"lively.shell.spawn",{command:m,env:r,cwd:v,stdin:x},{ackTimeout:3E4}),2);y=J.yieldResult;E=y.data;F=E.error;I=E.pid;if(F)throw Tg.debug&&console.error("["+e+"] error at start: "+F),e.process={error:F},e.exitCode=
1,Tg.signal(e,"error",F),Error(F);e.process={pid:I};Tg.debug&&console.log("["+e+"] got pid "+I);Tg.signal(e,"pid",I);e._whenStarted.resolve();return J.return(e)})};rt.prototype.writeToStdin=function(b){var e=this,l,a,f;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){if(!e.isRunning())return m.return();l=e;a=l.l2lClient;f=l.pid;return m.yield(a.sendToAndWait(a.trackerId,"lively.shell.writeToStdin",{pid:f,stdin:String(b)}),0)})};rt.prototype.kill=function(b){b=void 0===b?"KILL":b;var e=
this,l,a,f,m,r,v,x;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){if(1==y.nextAddress){if(!e.isRunning())return y.return();Tg.debug&&console.log(e+" signaling "+b);e.lastSignal=b;l=e;a=l.pid;f=l.l2lClient;return y.yield(f.sendToAndWait(f.trackerId,"lively.shell.kill",{pid:a}),2)}m=y.yieldResult;r=m.data;v=r.status;x=r.error;Tg.debug&&console.log(e+" kill send: "+(x||v));if(x)throw Error(x);return y.return(e.whenDone())})};rt.prototype.onOutput=function(b){var e=b.stdout;b=b.stderr;
e&&(this._stdout+=e,Tg.signal(this,"stdout",e),this.emit("stdout",e));b&&(this._stderr+=b,Tg.signal(this,"stderr",b),this.emit("stderr",b))};rt.prototype.onClose=function(b){Tg.arr.remove(this.constructor.commands,this);this.exitCode=b;this.emit("close",b);Tg.signal(this,"close",b);this._whenDone.resolve(this)};rt.prototype.onError=function(b){Tg.arr.remove(this.constructor.commands,this);this._stderr+=b.stack;this.exitCode=1;this.emit("error",b.stack);Tg.signal(this,"error",b.stack);this._whenDone.reject(b)};
Tg.ClientCommand=rt;Tg.L2LServices={"lively.shell.onOutput":function(b,e,l,a){b=e.data;var f=b.pid,m=b.stdout,r=b.stderr,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(x){switch(x.nextAddress){case 1:return Tg.debug&&console.log("[lively.shell] client received lively.shell.onOutput for command "+f),x.setCatchFinallyBlocks(2),x.yield(Tg.promise.waitFor(1E3,function(){return Tg.ClientCommand.findCommand(f)}),4);case 4:v=x.yieldResult;x.leaveTryBlock(3);break;case 2:return x.enterCatchBlock(),
console.warn("[lively.shell] received output for command "+f+" but it isn't registered!'"),x.return();case 3:v.onOutput({stdout:m,stderr:r}),x.jumpToEnd()}})},"lively.shell.onExit":function(b,e,l,a){b=e.data;var f=b.pid,m=b.code,r=b.error,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(x){switch(x.nextAddress){case 1:return Tg.debug&&console.log("[lively.shell] client received lively.shell.onExit for command "+f),x.setCatchFinallyBlocks(2),x.yield(Tg.promise.waitFor(1E3,function(){return Tg.ClientCommand.findCommand(f)}),
4);case 4:v=x.yieldResult;x.leaveTryBlock(3);break;case 2:return x.enterCatchBlock(),console.warn("[lively.shell] received exit message for command "+f+" but it isn't registered!'"),x.return();case 3:if(r)"string"===typeof r&&(r=Error(r)),v.onError(r);else v.onClose(m);x.jumpToEnd()}})}};Tg.default=rt;var Axa=Object.freeze({__proto__:null,runCommand:yC,defaultDirectory:lI,env:mI,readFile:BN,writeFile:CN,"default":rt}),oj=lively.FreezerRuntime.recorderFor("lively.ide/shell/shell-interface.js");oj.runCommand=
DN;oj.defaultDirectory=EN;oj.env=VV;oj.readFile=function(b,e){e=(e=void 0===e?{}:e)||{};var l=oj.runCommand('cat "'+b+'"',e);return l.whenDone().then(function(){return l.output})};oj.writeFile=function(b,e,l){"string"===typeof e&&(e={content:e});e=e||{};e.content=e.content||"";"win32"!==this.PLATFORM&&(b='"'+b+'"');b=this.run("tee "+b,{stdin:e.content,cwd:e.cwd});e.onEnd&&lively.bindings.connect(b,"end",e,"onEnd");l&&lively.bindings.connect(b,"end",{thenDo:l},"thenDo");return b};oj.parseCommand=WV;
oj.doGrep=XV;oj.L2LClient=Ak;oj._runCommand=yC;oj._env=mI;oj._defaultDirectory=lI;oj.string=Th;oj.defaultConnection={url:document.location.origin+"/lively-socket.io",namespace:"l2l"};oj.runCommand=DN;oj.runCommand=DN;oj.defaultDirectory=EN;oj.defaultDirectory=EN;oj.env=VV;oj.env=VV;oj.parseCommand=WV;oj.parseCommand=WV;oj.defaultGrepExclusions=".svn .git node_modules dist .module_cache lively.next-node_modules".split(" ");oj.doGrep=XV;oj.doGrep=XV;var Xi=lively.FreezerRuntime.recorderFor("lively.shell/client-fs-helper.js");
Xi.fileInfo=FN;Xi.fileInfoCommandString=function(b,e){var l=e=void 0===e?{}:e;e=l.rootDirectory;l=l.platform;e=e||".";var a="win32"===l?"\\":"/";"win32"===l||e.endsWith(a)||(e+=a);return"win32"===l?"cd "+e+' && ls -lLd --time-style=locale "'+b+'"':'if [ "$(uname)" = "Darwin" ];\n      then timeformat=\'-T\'; else\n      timeformat="--time-style=+%b %d %T %Y";\n    fi && env TZ=GMT LANG=en_US.UTF-8 cd '+(e+' && ls -lLd "$timeformat" "'+b+'"')};Xi.parseDirectoryListFromLs=YV;Xi.findFiles=GN;Xi.findFilesCommandString=
function(b,e){var l=e=void 0===e?{}:e,a=l.rootDirectory,f=l.exclude,m=l.depth;l=l.platform;a=a||".";f=f||"-iname "+Xi.defaultExcludes.map(Xi.string.print).join(" -o -iname ");var r="win32"===l?"\\":"/";"win32"===l||a.endsWith(r)||(a+=r);b=Xi.string.format('%s "%s"',e.re?"-iregex":e.matchPath?"-ipath":"-iname",b);m="number"===typeof m?" -maxdepth "+m:"";return"win32"===l?Xi.string.format("find %s %s ( %s ) -prune -o %s %s -print0 | xargs -0 -I{} ls -lLd --time-style=locale {}",a,e.re?"-E ":"",f.replace(/"/g,
""),b.replace(/"/g,""),m):'if [ "$(uname)" = "Darwin" ];\n      then timeformat=\'-T\'; else\n      timeformat="--time-style=+%b %d %T %Y";\n    fi && '+Xi.string.format('env TZ=GMT LANG=en_US.UTF-8 find %s %s \\( %s \\) -prune -o %s %s -print0 | xargs -0 -I{} ls -lLd "$timeformat" "{}"',a,e.re?"-E ":"",f,b,m)};Xi.convertDirectoryUploadEntriesToFileInfos=ZV;Xi.runCommand=yC;Xi.string=Th;Xi.promise=hg;Xi.arr=Mf;Xi.fileInfo=FN;Xi.fileInfo=FN;Xi.parseDirectoryListFromLs=YV;Xi.parseDirectoryListFromLs=
YV;var EQ=function(b){this.rootDirectory=b;this.fileName=this.path="";this.isDirectory=!1;this.lastModified=null;this.mode="";this.isLink=!1;this.linkCount=0;this.group=this.user="";this.size=0;this.rootDirectory=null};EQ.prototype.readFromDirectoryListLine=function(b){var e=this;if(!b.trim().length)return null;var l=b;this.reader.forEach(function(a){return l=a(l,e)});return this};EQ.prototype.toString=function(){return this.path};$jscomp.global.Object.defineProperties(EQ.prototype,{reader:{configurable:!0,
enumerable:!0,get:function(){return[function(b,e){var l=b.indexOf(" ");e.mode=b.slice(0,l);e.isDirectory="d"===e.mode[0];return b.slice(l+1).trim()},function(b,e){var l=b.indexOf(" ");e.linkCount=Number(b.slice(0,l));return b.slice(l+1).trim()},function(b,e){var l=b.indexOf(" ");e.user=b.slice(0,l);return b.slice(l+1).trim()},function(b,e){var l=Xi.string.peekRight(b,0,/\s+[0-9]/);e.group=b.slice(0,l).trim();return b.slice(l).trim()},function(b,e){var l=b.indexOf(" ");e.size=Number(b.slice(0,l));
return b.slice(l+1).trim()},function(b,e){var l=Xi.string.reMatches(b,/[^s]+\s+[0-9:\s]+/);if(!l||!l[0])return b;e.lastModified=new Date(l[0].match+" GMT");return b.slice(l[0].end).trim()},function(b,e){var l=(b=b.replace(/^\.\/+/g,"").replace(/\/\//g,"/"))&&b.split(" -> "),a=""===b?!1:b&&2===l.length,f=(l=a?l[0]:b)&&0===l.indexOf(e.rootDirectory)?l.slice(e.rootDirectory.length):l;e.fileName=""===b?".":f;e.path=l;e.isLink=a;return f}]}}});Xi.FileInfo=EQ;Xi.findFilesProcesses={};Xi.findFiles=GN;Xi.findFiles=
GN;Xi.defaultExcludes=[".svn",".git","node_modules",".module_cache"];Xi.convertDirectoryUploadEntriesToFileInfos=ZV;Xi.convertDirectoryUploadEntriesToFileInfos=ZV;var Wj=lively.FreezerRuntime.recorderFor("lively.shell/client-resource.js");Wj.Resource=Pg;Wj.runCommand=yC;Wj.fileInfo=FN;Wj.findFiles=GN;Wj.string=Th;Wj.promise=hg;Wj.arr=Mf;Wj.obj=ng;var rp=function(b,e,l){l=void 0===l?{}:l;b=Wj.Resource.call(this,b)||this;b.options=Object.assign({},l,{l2lClient:e||b.constructor.defaultL2lClient});return b};
$jscomp.inherits(rp,Wj.Resource);rp.prototype.newResource=function(b){return new this.constructor(b,this.options.l2lClient,this.options)};rp.prototype.read=function(){var b=this,e=Wj.runCommand('cat "'+this.url+'"',this.options);return e.whenDone().then(function(){if(e.exitCode)throw Error("Read "+b.url+" failed: "+e.stderr);return e.output})};rp.prototype.write=function(b){var e=this,l,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){switch(f.nextAddress){case 1:return b?f.yield(Wj.runCommand('touch "'+
e.url+'" && tee "'+e.url+'"',Object.assign({stdin:String(b)},e.options)).whenDone(),4):f.yield(Wj.runCommand('echo -n > "'+e.url+'"',Object.assign({},e.options)).whenDone(),5);case 4:l=f.yieldResult;f.jumpTo(3);break;case 5:l=f.yieldResult;case 3:a=l;if(a.exitCode)throw Error("Write "+e.url+" failed: "+a.stderr);return f.return(e)}})};rp.prototype.mkdir=function(){var b=this,e;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){if(1==l.nextAddress)return l.yield(Wj.runCommand('mkdir -p "'+
b.url+'"',b.options).whenDone(),2);e=l.yieldResult;if(e.exitCode)throw Error(b+" cannot create directory: "+e.stderr);return l.return(b)})};rp.prototype.exists=function(){var b=Wj.runCommand('test -d "'+this.url+'" || test -f "'+this.url+'"',this.options);return b.whenDone().then(function(){return 0===b.exitCode})};rp.prototype.remove=function(){var b=this,e=Wj.runCommand('rm -rf "'+this.url+'"',this.options);return e.whenDone().then(function(){if(e.exitCode)throw Error("Remove of "+b.url+" failed: "+
e.stderr);return b})};rp.prototype.gzip=function(b){var e=this,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){l=Wj.runCommand('gzip > "'+e.url+'"',Object.assign({stdin:String(b)},e.options));return a.return(l.whenDone().then(function(){if(l.exitCode)throw Error("Gzip compression of "+e.url+" failed: "+l.stderr);return e}))})};rp.prototype.brotli=function(b){var e=this,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){l=Wj.runCommand('brotli > "'+e.url+'"',Object.assign({stdin:String(b)},
e.options));return a.return(l.whenDone().then(function(){if(l.exitCode)throw Error("Brotli compression of "+e.url+" failed: "+l.stderr);return e}))})};rp.prototype.readProperties=function(){var b=this,e;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){if(1==l.nextAddress)return l.yield(Wj.fileInfo(b.url,b.options),2);e=l.yieldResult;b.assignProperties(Wj.obj.dissoc(e,["fileName","path","rootDirectory"]));return l.return(b)})};rp.prototype.dirList=function(b,e){b=void 0===b?1:b;e=void 0===
e?{}:e;var l=this,a,f,m,r,v,x,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(E){if(1==E.nextAddress)return a=e,f=a.exclude,Array.isArray(f)&&(f="-iname "+f.map(Wj.string.print).join(" -o -iname ")),m=l,r=m.url,v=m.options,x=v.l2lClient,E.yield(Wj.findFiles("*",{exclude:f,depth:b,rootDirectory:r,l2lClient:x}),2);y=E.yieldResult;y[0].path.replace(/\/$/,"")===l.url.replace(/\/$/,"")&&y.shift();return E.return(y.map(function(F){var I=F.path;F.isDirectory&&(I=I.replace(/\/?$/,"/"));I=new l.constructor(I,
x,l.options);I.assignProperties(Wj.obj.dissoc(F,["fileName","path","rootDirectory"]));return I}))})};$jscomp.global.Object.defineProperties(rp,{defaultL2lClient:{configurable:!0,enumerable:!0,get:function(){return this._defaultL2lClient||Wj._defaultL2LClient},set:function(b){this._defaultL2lClient=Wj._defaultL2LClient=b}}});Wj.ShellClientResource=rp;Wj._defaultL2LClient=Wj._defaultL2LClient||void 0;var FQ={name:"shell-client",matches:function(b){return b.startsWith("/")||b.match(/[a-z]:\\/i)},resourceClass:Wj.ShellClientResource};
Wj.resourceExtension=FQ;Wj.resourceExtension=FQ;Wj.resourceExtension=FQ;Wj.default=rp;var Bxa=Object.freeze({__proto__:null,"default":rp,resourceExtension:FQ}),Zd=lively.FreezerRuntime.recorderFor("lively.morphic/layout.js");Zd.pt=Ei;Zd.Rectangle=He;Zd.rect=dj;Zd.arr=Mf;Zd.Closure=ek;Zd.num=Um;Zd.grid=tF;Zd.obj=ng;Zd.once=cp;(function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/layout.js"),l=e.hasOwnProperty("Layout")&&"function"===typeof e.Layout?e.Layout:e.Layout=function(a){a&&a[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Pb(l,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){var f=a=void 0===a?{}:a;a=f.spacing;var m=f.padding,r=f.border,v=f.container,x=f.manualUpdate,y=f.autoResize,E=f.ignore,F=f.onScheduleApply,I=f.layoutOrder;f=f.reactToSubmorphAnimations;this.applyRequests=!1;this.border=Object.assign({top:0,left:0,right:0,bottom:0},r);this.ignore=E||[];this.lastBoundsExtent=this.container&&this.container.bounds().extent();
this.active=!1;this.container=v;this.manualUpdate=x;this.reactToSubmorphAnimations=f||!1;this.autoResize=void 0!=y?y:!0;this.onScheduleApply=F||function(J,P,N){};I&&(this.layoutOrder=I,this.layoutOrderSource=JSON.stringify(String(I)));this.spacing=a||0;this._padding=m?"number"===typeof m?Zd.Rectangle.inset(m):m:null}},{key:"attach",value:function(){this.apply();this.refreshBoundsCache()}},{key:"copy",value:function(){return new this.constructor(this)}},{key:"description",value:function(){return"Describe the layout behavior here."}},
{key:"name",value:function(){return"Name presented to the user."}},{key:"isEnabled",value:function(){return!this.active}},{key:"disable",value:function(){this.active=!0}},{key:"enable",value:function(a){this.active=!1;this.scheduleApply(null,a)}},{key:"padding",get:function(){return this._padding}},{key:"padding",set:function(a){"number"===typeof a&&(a=Zd.Rectangle.inset(a));this._padding=a;this.apply()}},{key:"boundsChanged",value:function(a){return!(this.lastBoundsExtent&&a.bounds().extent().equals(this.lastBoundsExtent))}},
{key:"extentChanged",value:function(a){return!(this.lastExtent&&a.extent.equals(this.lastExtent))}},{key:"equals",value:function(a){return a.name()==this.name()}},{key:"layoutableSubmorphs",get:function(){var a=this;this.layoutOrder||(this.layoutOrder=Zd.Closure.fromSource(JSON.parse(this.layoutOrderSource)).recreateFunc());return Zd.arr.sortBy(this.container.submorphs.filter(function(f){return f.isLayoutable&&!a.ignore.includes(f.name)}),function(f){return a.layoutOrder(f)})}},{key:"layoutOrder",
value:function(a){return this.container.submorphs.indexOf(a)}},{key:"submorphBoundsChanged",get:function(){var a=this.layoutableSubmorphs,f=this.layoutableSubmorphBounds;if(!f||a.length!=f.length)return!0;for(var m=0;m<a.length;m++)if(!f[m].equals(a[m].bounds()))return!0;return!1}},{key:"refreshBoundsCache",value:function(){this.lastExtent=this.container.extent;this.layoutableSubmorphBounds=this.layoutableSubmorphs.map(function(a){return a.bounds()})}},{key:"onContainerRender",value:function(){this.forceLayout()}},
{key:"noLayoutActionNeeded",get:function(){return!this.submorphBoundsChanged&&!this.boundsChanged(this.container)&&!this.extentChanged(this.container)&&!this.submorphsChanged}},{key:"__dont_serialize__",get:function(){return["lastAnim","animationPromise"]}},{key:"forceLayout",value:function(){var a=this;this.applyRequests&&(this.applyRequests=!1,this.noLayoutActionNeeded||(this.refreshBoundsCache(),this.container.withMetaDo({isLayoutAction:!0,animation:this.lastAnim},function(){return a.apply(a.lastAnim)}),
this.lastAnim=!1))}},{key:"forceLayoutsOfMorph",value:function(a){var f=this;a.layout?a.layout.forceLayout():a.submorphs.forEach(function(m){return f.forceLayoutsOfMorph(m)})}},{key:"forceLayoutsInNextLevel",value:function(){var a=this;this.layoutableSubmorphs.forEach(function(f){return a.forceLayoutsOfMorph(f)})}},{key:"scheduleApply",value:function(a,f,m){m=void 0===m?{}:m;if("function"===typeof this.onScheduleApply)this.onScheduleApply(a,f,m);this.active||(f&&(this.lastAnim=f),this.applyRequests=
!0)}},{key:"onSubmorphResized",value:function(a,f){this.scheduleApply(a,this.reactToSubmorphAnimations&&f.meta.animation,f)}},{key:"onSubmorphAdded",value:function(a,f){this.submorphsChanged=!0;this.scheduleApply(a,f)}},{key:"onSubmorphRemoved",value:function(a,f){this.submorphsChanged=!0;this.scheduleApply(a,f)}},{key:"onChange",value:function(a){var f=a.args,m=a.prop,r=a.value,v=a.prevValue,x=a.meta;x=this.reactToSubmorphAnimations&&x&&x.animation;f=f&&f[0];switch(a.selector){case "removeMorph":this.onSubmorphRemoved(f,
x);break;case "addMorphAt":this.onSubmorphAdded(f,x)}"extent"===m&&r&&v&&(v.x!==r.x||v.y!==r.y)&&this.scheduleApply(f,x)}},{key:"affectsLayout",value:function(a,f){a=f.value;var m=f.prevValue;return["position","scale","rotation","isLayoutable","extent"].includes(f.prop)&&!Zd.obj.equals(a,m)}},{key:"onSubmorphChange",value:function(a,f){if(f.meta&&f.meta.isLayoutAction)return this.scheduleApply(a,this.reactToSubmorphAnimation&&f.meta.animation);if(this.affectsLayout(a,f))this.onSubmorphResized(a,f)}},
{key:"changePropertyAnimated",value:function(a,f,m,r){if(r){var v=r.duration;r=r.easing;var x={};this.animationPromise=a.animate((x[f]=m,x.duration=v,x.easing=r,x))}else a[f]=m}},{key:"attachAnimated",value:function(a,f,m){this.active||(this.container=f,this.active=!0,f.layout=this,this.active=!1,this.lastAnim={duration:void 0===a?0:a,easing:m})}},{key:"apply",value:function(a){this.active||(this.active=!0,this.submorphsChanged=!1,this.lastBoundsExtent=this.container&&this.container.bounds().extent(),
this.active=!1)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Layout"}}],e,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:156,end:6611})})(void 0);var FJ=Ha("aw",function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/layout.js"),l=e.hasOwnProperty("CustomLayout")&&
"function"===typeof e.CustomLayout?e.CustomLayout:e.CustomLayout=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Pb(l,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){a=void 0===a?{}:a;this.relayout=a.relayout;this.layouterString=JSON.stringify(String(a.relayout));this.varMapping=a.varMapping||{};Pb._get(Object.getPrototypeOf(l.prototype),Symbol.for("lively-instance-initialize"),this).call(this,
a)}},{key:"name",value:function(){return"Custom Layout"}},{key:"apply",value:function(a){if(!this.active&&this.container){Pb._get(Object.getPrototypeOf(l.prototype),"apply",this).call(this,a);this.active=!0;this.relayout||(this.relayout=Zd.Closure.fromSource(JSON.parse(this.layouterString),this.varMapping).recreateFunc());try{this.relayout(this.container,a)}catch(f){console.error("Error in relayout() of a custom layout:",f)}this.lastBoundsExtent=this.container&&this.container.bounds().extent();this.active=
!1}}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"CustomLayout"}}],e,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:6620,end:7548})}(Zd.Layout));Zd.CustomLayout=FJ;Zd.CustomLayout=FJ;Zd.CustomLayout=FJ;var GJ=Ha("aI",function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/layout.js"),
l=e.hasOwnProperty("SnapLayout")&&"function"===typeof e.SnapLayout?e.SnapLayout:e.SnapLayout=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Pb(l,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){a=void 0===a?{}:a;Pb._get(Object.getPrototypeOf(l.prototype),Symbol.for("lively-instance-initialize"),this).call(this,a);this._spacing=a.spacing}},{key:"name",value:function(){return"Snap"}},{key:"description",
value:function(){return"Fits the parent morph to the combined bounds of all its submorphs."}},{key:"apply",value:function(a){var f=this;a=void 0===a?!1:a;if(!this.active&&this.container){Pb._get(Object.getPrototypeOf(l.prototype),"apply",this).call(this,a);var m=this.container.submorphBounds().insetBy(-this.spacing),r=Zd.pt(this.spacing,this.spacing).subPt(m.topLeft());r.r()&&this.container.submorphs.forEach(function(v){return f.changePropertyAnimated(v,"position",v.position.addPt(r),a)});this.changePropertyAnimated(this.container,
"extent",m.extent(),a)}}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"SnapLayout"}}],e,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:7557,end:8354})}(Zd.Layout));Zd.SnapLayout=GJ;Zd.SnapLayout=GJ;Zd.SnapLayout=GJ;(function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/layout.js"),
l=e.hasOwnProperty("FloatLayout")&&"function"===typeof e.FloatLayout?e.FloatLayout:e.FloatLayout=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Pb(l,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){a=void 0===a?{}:a;Pb._get(Object.getPrototypeOf(l.prototype),Symbol.for("lively-instance-initialize"),this).call(this,a);this._orderByIndex=a.orderByIndex||!1;this._resizeSubmorphs="undefined"!==typeof a.resizeSubmorphs?
a.resizeSubmorphs:!1}},{key:"copy",value:function(){return new this.constructor(this.getSpec())}},{key:"layoutOrder",value:function(a){return this.orderByIndex?this.container.submorphs.indexOf(a):a.left}},{key:"orderByIndex",get:function(){return this._orderByIndex}},{key:"orderByIndex",set:function(a){this._orderByIndex=a;this.apply()}},{key:"direction",get:function(){return this._direction}},{key:"direction",set:function(a){this._direction=a;this.apply()}},{key:"align",get:function(){return this._align}},
{key:"align",set:function(a){this._align=a;this.apply()}},{key:"autoResize",get:function(){return this._autoResize}},{key:"autoResize",set:function(a){this._autoResize=a;this.apply()}},{key:"spacing",get:function(){return this._spacing}},{key:"spacing",set:function(a){this._spacing=a;this.apply()}},{key:"resizeSubmorphs",get:function(){return this._resizeSubmorphs}},{key:"resizeSubmorphs",set:function(a){this._resizeSubmorphs=a;this.apply()}},{key:"equals",value:function(a){return this.spacing!=a.spacing||
this.align!=a.align||this.direction!=a.direction?!1:!0}},{key:"getSpec",value:function(){return{spacing:this.spacing,resizeSubmorphs:this.resizeSubmorphs,autoResize:this.autoResize,align:this.align,direction:this.direction,padding:this.padding,reactToSubmorphAnimations:this.reactToSubmorphAnimations,orderByIndex:this.orderByIndex}}},{key:"inspect",value:function(a){}},{key:"apply",value:function(a){a=void 0===a?!1:a;var f=this,m;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){if(f.active||
!f.container||!f.container.submorphs.length||!f.layoutableSubmorphs.length)return r.return();f.layoutableSubmorphBounds||f.refreshBoundsCache();Pb._get(Object.getPrototypeOf(l.prototype),"apply",f).call(f,a);f.active=!0;try{m=f.computeMinContainerExtent(),f.layoutSubmorphs(m,a),m=f.computeMinContainerExtent(),f.resizeContainer(m,a),f.lastBoundsExtent=f.container.bounds().extent()}finally{f.active=!1,f.layoutRequests=!1}return r.return(f.animationPromise)})}},{key:"resizeContainer",value:function(){}}],
[{key:Symbol.for("__LivelyClassName__"),get:function(){return"FloatLayout"}}],e,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:8356,end:10764})})(Zd.Layout);var SA=Ha("ax",function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/layout.js"),l=e.hasOwnProperty("VerticalLayout")&&
"function"===typeof e.VerticalLayout?e.VerticalLayout:e.VerticalLayout=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Pb(l,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){a=void 0===a?{}:a;Pb._get(Object.getPrototypeOf(l.prototype),Symbol.for("lively-instance-initialize"),this).call(this,a);this._align=a.align||"left";this._direction=a.direction||"topToBottom"}},{key:"name",value:function(){return"Vertical"}},
{key:"description",value:function(){return"Assemble the submorphs in a vertically growing list."}},{key:"equals",value:function(a){return Pb._get(Object.getPrototypeOf(l.prototype),"equals",this).call(this,a)&&a.name&&"Vertical"==a.name()?!0:!1}},{key:"possibleDirectionValues",get:function(){return["topToBottom","bottomToTop","centered"]}},{key:"possibleAlignValues",get:function(){return["left","center","right"]}},{key:"__serialize__",value:function(){return{__expr__:"new VerticalLayout("+Zd.obj.inspect(this.getSpec())+
")",bindings:{"lively.morphic":["VerticalLayout"]}}}},{key:"layoutSubmorphs",value:function(a,f){var m=this,r=this.container,v=this.layoutableSubmorphs,x=this.spacing,y=this.autoResize,E=this.align,F=this.resizeSubmorphs,I=this.getStartY(a),J=[];a=F?r.width:a.x;y=y&&!F;var P=function(N,Y){v.reduce(function(W,da){F&&m.changePropertyAnimated(da,"width",r.width-2*x,f);m.forceLayoutsOfMorph(da);m.changePropertyAnimated(da,N,W,f);W=da.bounds();J.push(W);return W[N]().addXY(0,W.height+x)},Y)};this.layoutableSubmorphBounds=
J;"left"===E?P("topLeft",Zd.pt(x,I)):"right"===E?P("topRight",Zd.pt(a+(y?x:-x),I)):P("topCenter",Zd.pt((a+(y?2*x:0))/2,I))}},{key:"resizeContainer",value:function(a,f){var m=this.direction,r=this.layoutableSubmorphs,v=this.resizeSubmorphs,x=this.spacing,y=this.container;this.autoResize&&("centered"===m?(m=r[0].top,r=Zd.arr.last(r).bottom+m):r=Zd.arr.last(r).bottom+x,a=Zd.pt(v?y.width:a.x+2*x,Math.max(r,a.y)),this.changePropertyAnimated(y,"extent",a,f))}},{key:"getStartY",value:function(a){var f=this.layoutableSubmorphBounds,
m=this.spacing,r=this.direction;var v=(f.length-1)*m;f=$jscomp.makeIterator(f);for(var x=f.next();!x.done;x=f.next())v+=x.value.height;return Math.max(0,"bottomToTop"===r?a.y-v-2*m:"centered"===r?a.y/2-v/2-m:0)+m}},{key:"computeMinContainerExtent",value:function(){for(var a=this.container,f=this.layoutableSubmorphs,m=this.autoResize,r=(f.length+1)*this.spacing,v=0,x=0,y=0;y<f.length;y++){var E=f[y].bounds(),F=E.width;x+=E.height;v=Math.max(F,v)}f=Zd.pt(v,x+r);m||(f=f.maxPt(a.extent));return f}},{key:"layoutOrder",
value:function(a){return this.orderByIndex?this.container.submorphs.indexOf(a):a.top}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"VerticalLayout"}}],e,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:10773,end:14741})}(Zd.FloatLayout));Zd.VerticalLayout=SA;Zd.VerticalLayout=
SA;Zd.VerticalLayout=SA;var bv=Ha("ay",function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/layout.js"),l=e.hasOwnProperty("HorizontalLayout")&&"function"===typeof e.HorizontalLayout?e.HorizontalLayout:e.HorizontalLayout=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Pb(l,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){a=void 0===a?{}:a;Pb._get(Object.getPrototypeOf(l.prototype),
Symbol.for("lively-instance-initialize"),this).call(this,a);this._direction=a.direction||"leftToRight";this._align=a.align||"top"}},{key:"name",value:function(){return"Horizontal"}},{key:"description",value:function(){return"Assemble the submorphs in a horizontally growing list."}},{key:"possibleDirectionValues",get:function(){return["leftToRight","rightToLeft","centered"]}},{key:"possibleAlignValues",get:function(){return["top","center","bottom"]}},{key:"__serialize__",value:function(){return{__expr__:"new HorizontalLayout("+
Zd.obj.inspect(this.getSpec())+")",bindings:{"lively.morphic":["HorizontalLayout"]}}}},{key:"equals",value:function(a){return Pb._get(Object.getPrototypeOf(l.prototype),"equals",this).call(this,a)&&a.name&&"Horizontal"==a.name()?!0:!1}},{key:"layoutSubmorphs",value:function(a,f){var m=this,r=this.container,v=this.layoutableSubmorphs,x=this.resizeSubmorphs,y=this.spacing,E=this.autoResize,F=this.align,I=this.getStartX(a),J=[];a=x?r.height:a.y;E=E&&!x;var P=function(N,Y){v.reduce(function(W,da){x&&
m.changePropertyAnimated(da,"height",r.height-2*y,f);m.forceLayoutsOfMorph(da);m.changePropertyAnimated(da,N,W,f);W=da.bounds();J.push(W);return W[N]().addXY(W.width+y,0)},Y)};this.layoutableSubmorphBounds=J;"top"===F?P("topLeft",Zd.pt(I,y)):"bottom"===F?P("bottomLeft",Zd.pt(I,a+(E?y:-y))):P("leftCenter",Zd.pt(I,(a+(E?2*y:0))/2))}},{key:"resizeContainer",value:function(a,f){var m=this.direction,r=this.layoutableSubmorphBounds,v=this.resizeSubmorphs,x=this.spacing,y=this.container;this.autoResize&&
("centered"===m?(m=r[0].left(),r=Zd.arr.last(r).right()+m):r=Zd.arr.last(r).right()+x,a=Zd.pt(Math.max(a.x,r),v?y.height:a.y+2*x),this.changePropertyAnimated(y,"extent",a,f))}},{key:"getStartX",value:function(a){var f=this.layoutableSubmorphBounds,m=this.spacing,r=this.direction;var v=(f.length-1)*m;f=$jscomp.makeIterator(f);for(var x=f.next();!x.done;x=f.next())v+=x.value.width;return Math.max(0,"rightToLeft"===r?a.x-v-2*m:"centered"===r?a.x/2-v/2-m:0)+m}},{key:"computeMinContainerExtent",value:function(){for(var a=
this.container,f=this.layoutableSubmorphBounds,m=this.autoResize,r=(f.length+1)*this.spacing,v=0,x=0,y=0;y<f.length;y++){var E=f[y],F=E.height;v+=E.width;x=Math.max(F,x)}f=Zd.pt(v+r,x);m||(f=f.maxPt(a.extent));return f}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"HorizontalLayout"}}],e,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",
version:"0.1.2"}}},{start:14750,end:18667})}(Zd.FloatLayout));Zd.HorizontalLayout=bv;Zd.HorizontalLayout=bv;Zd.HorizontalLayout=bv;var HJ=Ha("aL",function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/layout.js"),l=e.hasOwnProperty("ProportionalLayout")&&"function"===typeof e.ProportionalLayout?e.ProportionalLayout:e.ProportionalLayout=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Pb(l,b,[{key:"name",
value:function(){return"Proportional"}},{key:"description",value:function(){return"Resizes, scales, and moves morphs according to their original position."}},{key:"inspect",value:function(a){}},{key:Symbol.for("lively-instance-initialize"),value:function(a){Pb._get(Object.getPrototypeOf(l.prototype),Symbol.for("lively-instance-initialize"),this).call(this,a);this.extentDelta=Zd.pt(0,0);this.proportionalLayoutSettingsForMorphs=new WeakMap;this.submorphSettings=a&&a.submorphSettings||[];this.lastExtent=
a.lastExtent;delete this.spacing;delete this.autoResize}},{key:"getSpec",value:function(){return{submorphSettings:this.submorphSettings,reactToSubmorphAnimations:this.reactToSubmorphAnimations,lastExtent:this.lastExtent}}},{key:"__serialize__",value:function(){return{__expr__:"new ProportionalLayout("+Zd.obj.inspect(this.getSpec())+")",bindings:{"lively.morphic":["ProportionalLayout"]}}}},{key:"__dont_serialize__",get:function(){return[].concat($jscomp.arrayFromIterable(Pb._get(Object.getPrototypeOf(l.prototype),
"__dont_serialize__",this)),["extentDelta","lastExtent"])}},{key:"__after_deserialize__",value:function(a,f){var m=this._submorphSettings;a=this.container;f=this.proportionalLayoutSettingsForMorphs||new WeakMap;this.extentDelta=Zd.pt(0,0);if(m&&a){m=$jscomp.makeIterator(m);for(var r=m.next();!r.done;r=m.next()){var v=$jscomp.makeIterator(r.value);r=v.next().value;v=v.next().value;(r=$jscomp.makeIterator(this._morphsMatchingSelector(a,r)).next().value)&&f.set(r,v)}this.proportionalLayoutSettingsForMorphs=
f}}},{key:"onSubmorphChange",value:function(a,f,m,r){"name"===f.prop&&(m=this.proportionalLayoutSettingsForMorphs.get(a))&&this.changeSettingsFor(a,m,!0);return Pb._get(Object.getPrototypeOf(l.prototype),"onSubmorphChange",this).call(this,a,f)}},{key:"settingsFor",value:function(a){return this.proportionalLayoutSettingsForMorphs.get(a)||{x:"scale",y:"scale"}}},{key:"changeSettingsFor",value:function(a,f,m){m=void 0===m?!1:m;"string"===typeof f&&(f={x:f,y:f});this.proportionalLayoutSettingsForMorphs.set(a,
Object.assign({},this.settingsFor(a),{},f));m&&(f=this.submorphSettings.filter(function(r){return r[0]!==a.name}),f.push([a.name,this.settingsFor(a)]),this._submorphSettings=f)}},{key:"submorphSettings",get:function(){return this._submorphSettings}},{key:"submorphSettings",set:function(a){if(this.container)this._submorphSettings=a,this.changeSubmorphSettings(a);else Zd.once(this,"container",this,"submorphSettings",{converter:"function () { return submorphSettings }",varMapping:{submorphSettings:a}})}},
{key:"changeSubmorphSettings",value:function(a){var f=this,m={};a=$jscomp.makeIterator(a);for(var r=a.next();!r.done;m={$jscomp$loop$prop$setting$2672:m.$jscomp$loop$prop$setting$2672},r=a.next()){r=$jscomp.makeIterator(r.value);var v=r.next().value;m.$jscomp$loop$prop$setting$2672=r.next().value;this._morphsMatchingSelector(this.container,v).forEach(function(x){return function(y){return f.changeSettingsFor(y,x.$jscomp$loop$prop$setting$2672)}}(m))}}},{key:"_morphsMatchingSelector",value:function(a,
f){var m=this,r=[];if(!f)return r;f.isMorph?r=[f]:f instanceof RegExp?r=a.submorphs.filter(function(v){return v.name.match(f)}):"string"===typeof f?r=a.submorphs.filter(function(v){return v.name===f}):Array.isArray(f)&&(r=Zd.arr.flatmap(f,function(v){return m._morphsMatchingSelector(a,v)}));return r}},{key:"refreshBoundsCache",value:function(){var a=this.container.extent,f=this.lastExtent;f&&!a.eqPt(f)&&(this.extentDelta=this.extentDelta.addPt(a.subPt(f)));this.lastExtent=a;this.layoutableSubmorphBounds=
this.layoutableSubmorphs.map(function(m){return m.bounds()})}},{key:"apply",value:function(a){a=void 0===a?!1:a;var f=this.container,m=this.extentDelta,r=m.x;m=m.y;var v=(f||{}).extent;if(!this.active&&f&&(0!=r||0!=m)){this.extentDelta=Zd.pt(0,0);this.active=!0;Pb._get(Object.getPrototypeOf(l.prototype),"apply",this).call(this,a);var x=this.layoutableSubmorphs;f=v.scaleByPt(v.addXY(-r,-m).invertedSafely());v=$jscomp.makeIterator(x);for(x=v.next();!x.done;x=v.next()){x=x.value;var y=this.settingsFor(x),
E=y.x,F=y.y,I=y=0,J=0,P=0;"move"===E&&(y=r);"move"===F&&(I=m);"resize"===E&&(J=r);"resize"===F&&(P=m);if("scale"===E||"scale"===F)E=Zd.pt("scale"===E?f.x:1,"scale"===F?f.y:1),this.changePropertyAnimated(x,"position",x.position.scaleByPt(E),a),this.changePropertyAnimated(x,"extent",x.extent.scaleByPt(E),a);(y||I)&&this.changePropertyAnimated(x,"position",x.position.addXY(y,I),a);(J||P)&&this.changePropertyAnimated(x,"extent",x.extent.addXY(J,P),a)}this.forceLayoutsInNextLevel();this.active=!1}}},{key:"copy",
value:function(){return new this.constructor(this.getSpec())}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ProportionalLayout"}}],e,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:18676,end:24220})}(Zd.Layout));Zd.ProportionalLayout=HJ;Zd.ProportionalLayout=HJ;Zd.ProportionalLayout=
HJ;var IJ=function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/layout.js"),l=e.hasOwnProperty("CenteredTilingLayout")&&"function"===typeof e.CenteredTilingLayout?e.CenteredTilingLayout:e.CenteredTilingLayout=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Pb(l,b,[{key:"name",value:function(){return"CenteredTiling"}},{key:"description",value:function(){return"Similar to TilingLayout but center the rows."}},
{key:"apply",value:function(a){a=void 0===a?!1:a;if(!this.active&&this.container){this.active=!0;Pb._get(Object.getPrototypeOf(l.prototype),"apply",this).call(this,a);a=this.getOptimalWidth(this.container);var f=this.spacing,m=this.layoutableSubmorphs,r=f+this.border.top;m=m.slice();for(var v={};m.length;){v.$jscomp$loop$prop$remainingWidth$2674=a;var x=Zd.arr.takeWhile(m,function(F){return function(I){I=F.$jscomp$loop$prop$remainingWidth$2674-(I.width+2*f);if(0>I)return!1;F.$jscomp$loop$prop$remainingWidth$2674=
I;return!0}}(v));x.length?m=Zd.arr.withoutAll(m,x):(x=[m.shift()],v.$jscomp$loop$prop$remainingWidth$2674=0);var y=Zd.pt(v.$jscomp$loop$prop$remainingWidth$2674/2+f+this.border.left,r);x=$jscomp.makeIterator(x);for(var E=x.next();!E.done;E=x.next())E=E.value,E.position=y,y=y.addXY(2*f+E.width,0),r=Math.max(r,E.bottom);r+=2*f;v={$jscomp$loop$prop$remainingWidth$2674:v.$jscomp$loop$prop$remainingWidth$2674}}this.active=!1}}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"CenteredTilingLayout"}}],
e,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:24229,end:25525})}(Zd.TilingLayout);Zd.CenteredTilingLayout=IJ;Zd.CenteredTilingLayout=IJ;Zd.CenteredTilingLayout=IJ;var JJ=Ha("az",function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/layout.js"),l=e.hasOwnProperty("TilingLayout")&&
"function"===typeof e.TilingLayout?e.TilingLayout:e.TilingLayout=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Pb(l,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){a=void 0===a?{}:a;Pb._get(Object.getPrototypeOf(l.prototype),Symbol.for("lively-instance-initialize"),this).call(this,a);this._axis=a.axis||"row";this._align=a.align||"left";this._verticalAlign=a.verticalAlign||"top";this._orderByIndex=
a.orderByIndex||!1;delete this.autoResize}},{key:"name",value:function(){return"Tiling"}},{key:"description",value:function(){return"Make the submorphs fill their owner, inserting breaks to defer intersecting the bounds as much as possible."}},{key:"inspect",value:function(a){}},{key:"__serialize__",value:function(){return{__expr__:"new TilingLayout("+Zd.obj.inspect(this.getSpec())+")",bindings:{"lively.morphic":["TilingLayout"]}}}},{key:"copy",value:function(){return new this.constructor(this.getSpec())}},
{key:"getSpec",value:function(){return{axis:this.axis,align:this.align,spacing:this.spacing,orderByIndex:this.orderByIndex,reactToSubmorphAnimations:this.reactToSubmorphAnimations}}},{key:"possibleAxisValues",get:function(){return["row","columns"]}},{key:"possibleAlignValues",get:function(){return["left","center","right"]}},{key:"orderByIndex",get:function(){return this._orderByIndex}},{key:"orderByIndex",set:function(a){this._orderByIndex=a;this.apply()}},{key:"axis",get:function(){return this._axis}},
{key:"axis",set:function(a){this._axis=a;this.apply()}},{key:"align",get:function(){return this._align}},{key:"align",set:function(a){this._align=a;this.apply()}},{key:"spacing",get:function(){return this._spacing}},{key:"spacing",set:function(a){this._spacing=a;this.apply()}},{key:"apply",value:function(a){a=void 0===a?!1:a;if(!this.active&&this.container){this.active=!0;Pb._get(Object.getPrototypeOf(l.prototype),"apply",this).call(this,a);var f=this.axis,m=this.align,r=this.border,v=this.spacing,
x=this.layoutableSubmorphs,y=this.getOptimalWidth(this.container),E=(f="row"==f)?"left":"top",F=f?"x":"y",I=f?"y":"x",J=0,P=v+r[f?"top":"left"],N="topLeft";switch(this._verticalAlign){case "top":N="topLeft";break;case "center":N="leftCenter";break;case "bottom":N="bottomLeft"}for(;x.length;){var Y=y-v,W=Zd.arr.takeWhile(x,function(za){za=za.bounds().extent();za=Y-(za[F]+v);if(0>za)return!1;Y=za;return!0});W.length?x.splice(0,W.length):(W=[x.shift()],Y=0);J=Zd.arr.max(W.map(function(za){return za.bounds().extent()[I]}));
if(f)switch(m){case "left":var da=Zd.pt(v,P);break;case "center":da=Zd.pt(Y/2+v+r[E],P);break;case "right":da=Zd.pt(Y-v,P)}else switch(m){case "left":da=Zd.pt(P,v);break;case "center":da=Zd.pt(P,Y/2+v+r[E]);break;case "right":da=Zd.pt(P,Y-v)}"bottomLeft"==N&&(da=da.addXY(0,J));W=$jscomp.makeIterator(W);for(var va=W.next();!va.done;va=W.next())va=va.value,this.changePropertyAnimated(va,N,da,a),va=va.bounds().extent(),da=f?da.addXY(v+va[F],0):da.addXY(0,v+va[F]);P+=v+J;J=0}this.active=!1}}},{key:"getMinWidth",
value:function(){var a=this.border,f=a.left;a=a.right;return this.layoutableSubmorphs.reduce(function(m,r){return r.bounds().width>m?r.bounds().width:m},0)+f+a}},{key:"getMinHeight",value:function(){var a=this.border,f=a.top;a=a.bottom;return this.layoutableSubmorphs.reduce(function(m,r){return r.bounds().height>m?r.bounds().height:m},0)+f+a}},{key:"getOptimalWidth",value:function(a){var f=this.axis,m=this.border,r=m.left,v=m.top,x=m.right;m=m.bottom;a="row"==f?a.width-r-x:a.height-v-m;f="row"==f?
this.getMinWidth():this.getMinHeight();return Math.max(a,f)}},{key:"layoutOrder",value:function(a){return this.orderByIndex?this.container.submorphs.indexOf(a):"row"===this.axis?1E6*(a.top-a.top%15)+a.left:1E6*(a.left-a.left%15)+a.top}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"TilingLayout"}}],e,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:25534,end:31071})}(Zd.Layout));Zd.TilingLayout=JJ;Zd.TilingLayout=JJ;Zd.TilingLayout=JJ;var KJ=function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/layout.js"),l=e.hasOwnProperty("CellGroup")&&"function"===typeof e.CellGroup?e.CellGroup:e.CellGroup=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Pb(l,b,[{key:Symbol.for("lively-instance-initialize"),
value:function(a){var f=a.morph,m=a.layout;this.state={cells:[a.cell],layout:m,align:a.align,resize:m.fitToCell};m&&m.addGroup(this);this.morph=f}},{key:"morph",get:function(){var a=this.state,f=a.morph;a=a.layout;return f?f.isMorph?f:a.layoutableSubmorphs.find(function(m){return m.name==f}):null}},{key:"compensateOrigin",get:function(){return this.layout.compensateOrigin}},{key:"resize",get:function(){return this.state.resize}},{key:"resize",set:function(a){this.state.resize=a;this.layout.apply()}},
{key:"align",get:function(){return this.state.align||"topLeft"}},{key:"align",set:function(a){this.state.align=a;this.layout.apply()}},{key:"morph",set:function(a){var f=a&&this.layout.getCellGroupFor(a);f&&(f.morph=null);this.state.morph=a;this.layout.apply()}},{key:"manages",value:function(a){return this.morph&&(this.morph==a||this.morph.name==a)}},{key:"apply",value:function(a){a=void 0===a?!1:a;var f=this.morph;if(f){var m=this.bounds(),r=this.compensateOrigin?this.layout.container.origin.negated():
Zd.pt(0,0);if(a){var v=this.resize?m.extent():f.extent,x=a;a=x.duration;x=x.easing;var y={};f.animate((y[this.alignedProperty||this.align]=m[this.align]().addPt(r),y.extent=v,y.duration=a,y.easing=x,y))}else this.resize&&(f.extent=m.extent()),f[this.alignedProperty||this.align]=m[this.align]().addPt(r);this.layout.forceLayoutsInNextLevel()}}},{key:"cells",get:function(){return this.state.cells}},{key:"layout",get:function(){return this.state.layout}},{key:"bounds",value:function(){return 0<this.cells.length?
this.cells.map(function(a){return a.bounds()}).reduce(function(a,f){return a.union(f)}):Zd.rect(0,0,0,0)}},{key:"includes",value:function(a){return this.cells.find(function(f){return f==a})}},{key:"connect",value:function(a){void 0==this.morph&&(this.morph=a.group.morph);a.group?a.group.disconnect(a,this):a.group=this;this.cells.push(a)}},{key:"disconnect",value:function(a,f){a.group=(void 0===f?null:f)||new Zd.CellGroup({morph:null,layout:this.layout,cell:a});Zd.arr.remove(this.cells,a);1>this.cells.length&&
this.layout&&this.layout.removeGroup(this)}},{key:"merge",value:function(a){var f=this;a.cells.forEach(function(m){f.connect(m)})}},{key:"topLeft",get:function(){var a=this;return this.cells.find(function(f){return(null==f.left||f.left.group!=a)&&(null==f.top||f.top.group!=a)})}},{key:"bottomRight",get:function(){var a=this;return this.cells.find(function(f){return(null==f.right||f.right.group!=a)&&(null==f.bottom||f.bottom.group!=a)})}},{key:"position",get:function(){return this.topLeft.position}}],
[{key:Symbol.for("__LivelyClassName__"),get:function(){return"CellGroup"}}],e,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:31080,end:34312})}(void 0);Zd.CellGroup=KJ;Zd.CellGroup=KJ;Zd.CellGroup=KJ;(function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/layout.js"),l=e.hasOwnProperty("LayoutAxis")&&
"function"===typeof e.LayoutAxis?e.LayoutAxis:e.LayoutAxis=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Pb(l,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){this.origin=a}},{key:"otherAxis",get:function(){return[].concat($jscomp.arrayFromIterable(this.axisBefore),$jscomp.arrayFromIterable(this.axisAfter))}},{key:"axisBefore",get:function(){for(var a=this,f=[];a=a.before;)f=[a].concat($jscomp.arrayFromIterable(f));
return f}},{key:"axisAfter",get:function(){for(var a=this,f=[];a=a.after;)f=[].concat($jscomp.arrayFromIterable(f),[a]);return f}},{key:"before",get:function(){throw Error("before() not implemented!");}},{key:"after",get:function(){throw Error("after() not implemented!");}},{key:"containerLength",get:function(){return this.container[this.dimension]}},{key:"containerLength",set:function(a){this.container[this.dimension]=a}},{key:"getRoot",value:function(){return(this.axisBefore[0]||this).items[0]}},
{key:"container",get:function(){return this.origin.container}},{key:"layout",get:function(){return this.origin.layout}},{key:"frozen",get:function(){return this.origin.frozen[this.dimension]}},{key:"frozen",set:function(a){this.origin.frozen[this.dimension]=a}},{key:"align",set:function(a){this.items.forEach(function(f){return f.group.state.align=a})}},{key:"fixed",get:function(){return this.origin.fixed[this.dimension]}},{key:"fixed",set:function(a){var f=this;if(Zd.obj.isNumber(a)){var m=a;a=!0}this.items.forEach(function(v){v.fixed[f.dimension]=
a});var r=this.containerLength;void 0!=m&&(this[this.dimension]=m);this.adjustOtherProportions(a);this.containerLength=r}},{key:"length",get:function(){return this.origin[this.dimension]}},{key:"length",set:function(a){var f=this;this.items.forEach(function(m){m[f.dimension]=Zd.num.roundTo(a,1)})}},{key:"proportion",get:function(){return this.origin.proportion[this.dimension]}},{key:"proportion",set:function(a){var f=this;this.items.forEach(function(m){m.proportion[f.dimension]=a})}},{key:"min",get:function(){return this.origin.min[this.dimension]}},
{key:"min",set:function(a){this.adjustMin(a-this.min)}},{key:"adjustMin",value:function(a){var f=this;this.items.forEach(function(m){m.min[f.dimension]=0>m.min[f.dimension]+a?0:m.min[f.dimension]+a});this.layout.apply()}},{key:"adjustProportion",value:function(){this.fixed||(this.proportion=0<this.dynamicLength?this.length/this.dynamicLength:0)}},{key:"adjustOtherProportions",value:function(a){var f=this,m=this.axisBefore,r=this.axisAfter,v=Zd.arr.sum([].concat($jscomp.arrayFromIterable(m),$jscomp.arrayFromIterable(r)).filter(function(E){return!E.fixed}).map(function(E){return E.proportion})),
x=function(E){return E.proportion/=v},y=function(E){return E.proportion*=f.origin.removedDynamicProportions};a&&(this.origin.removedDynamicProportions=v);m.forEach(a?x:y);r.forEach(a?x:y)}},{key:"prepareForResize",value:function(a){a=this.proportion*Math.max(0,a-this.staticLength);this.frozen&&a>=this.min?(this.fixed=this.frozen=!1,this.length=a):!this.frozen&&this.min>a&&(this.fixed=this.frozen=!0,this.length=this.min);return this}},{key:"adjustLength",value:function(a){var f;0>this.length+a&&(a=
-this.length);(f=this.axisAfter.find(function(m){return!m.fixed}))?(a=Math.min(a,f.length),this.length+=a,f.length-=a,this.adjustProportion(),f.adjustProportion()):(f=this.axisBefore.reverse().find(function(m){return!m.fixed}))?(f.length-=a,this.length+=a,this.adjustProportion(),f.adjustProportion()):(this.length+=a,this.adjustProportion(),this.otherAxis.forEach(function(m){return m.adjustProportion()}),this.containerLength+=a)}},{key:"equalizeDynamicAxis",value:function(){var a=[].concat($jscomp.arrayFromIterable(this.otherAxis.filter(function(m){return!m.fixed})),
$jscomp.arrayFromIterable(this.fixed?[]:[this])),f=(this.containerLength-this.staticLength)/a.length;a.map(function(m){m.fixed||(m.length=f);return m}).forEach(function(m){return m.adjustProportion()})}},{key:"addBefore",value:function(){var a=this.emptyAxis();this.before&&this.before.attachTo(a);a.attachTo(this);this.equalizeDynamicAxis();this.layout.grid=this.getRoot()}},{key:"addAfter",value:function(){var a=this.emptyAxis();this.after&&a.attachTo(this.after);this.attachTo(a);this.equalizeDynamicAxis();
this.layout.grid=this.getRoot()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"LayoutAxis"}}],e,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:34952,end:40669})})(void 0);var LJ=function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/layout.js"),l=e.hasOwnProperty("LayoutColumn")&&
"function"===typeof e.LayoutColumn?e.LayoutColumn:e.LayoutColumn=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Pb(l,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){Pb._get(Object.getPrototypeOf(l.prototype),Symbol.for("lively-instance-initialize"),this).call(this,a);this.items=[].concat($jscomp.arrayFromIterable(a.above),[a],$jscomp.arrayFromIterable(a.below))}},{key:"dimension",get:function(){return"width"}},
{key:"before",get:function(){return this._before||(this._before=this.origin.left&&new Zd.LayoutColumn(this.origin.left))}},{key:"after",get:function(){return this._after||(this._after=this.origin.right&&new Zd.LayoutColumn(this.origin.right))}},{key:"row",value:function(a){return this.items[a]}},{key:"dynamicLength",get:function(){return this.origin.dynamicWidth}},{key:"staticLength",get:function(){return this.origin.totalStaticWidth}},{key:"width",get:function(){return this.length}},{key:"width",
set:function(a){a-=this.width;this.fixed?(this.length+=a,this.container.width+=a):this.adjustLength(a);!this.layout.manualUpdate&&this.layout.apply()}},{key:"paddingLeft",set:function(a){this.items.forEach(function(f){f.padding.x=a});this.layout.apply()}},{key:"paddingLeft",get:function(){return this.items[0].padding.x}},{key:"paddingRight",set:function(a){this.items.forEach(function(f){f.padding.width=a});this.layout.apply()}},{key:"paddingRight",get:function(){return this.items[0].padding.width}},
{key:"emptyAxis",value:function(){var a=new Zd.LayoutColumn(new Zd.LayoutCell({column:Zd.arr.withN(this.items.length,null),layout:this.layout}));Zd.arr.zip(a.items,this.items).forEach(function(f){var m=$jscomp.makeIterator(f);f=m.next().value;m=m.next().value;f.height=m.height;f.fixed.height=m.fixed.height;f.frozen.height=m.frozen.height;f.proportion.height=m.proportion.height;f.min.height=m.min.height});return a}},{key:"attachTo",value:function(a){this.after&&(this.after._before=null);this._after=
null;Zd.arr.zip(this.items,a.items).forEach(function(f){var m=$jscomp.makeIterator(f);f=m.next().value;m=m.next().value;f.right=m;m.left=f});this.equalizeDynamicAxis();return a}},{key:"remove",value:function(){var a=this,f=this.before||this.after;this.items.forEach(function(m){m.left&&(m.left.right=m.right);m.right&&(m.right.left=m.left);m.group.disconnect(m);a.layout.removeGroup(m.group)});this.before&&(this.before._after=null);this.after&&(this.after._before=null);this.before||(this.layout.grid=
this.after.getRoot());f.equalizeDynamicAxis()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"LayoutColumn"}}],e,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:40678,end:43052})}(Zd.LayoutAxis);Zd.LayoutColumn=LJ;Zd.LayoutColumn=LJ;Zd.LayoutColumn=LJ;var MJ=function(b){var e=
lively.FreezerRuntime.recorderFor("lively.morphic/layout.js"),l=e.hasOwnProperty("LayoutRow")&&"function"===typeof e.LayoutRow?e.LayoutRow:e.LayoutRow=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Pb(l,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){Pb._get(Object.getPrototypeOf(l.prototype),Symbol.for("lively-instance-initialize"),this).call(this,a);this.items=[].concat($jscomp.arrayFromIterable(a.before),
[a],$jscomp.arrayFromIterable(a.after))}},{key:"dimension",get:function(){return"height"}},{key:"emptyAxis",value:function(){var a=new Zd.LayoutRow(new Zd.LayoutCell({row:Zd.arr.withN(this.items.length,null),layout:this.layout}));Zd.arr.zip(a.items,this.items).forEach(function(f){var m=$jscomp.makeIterator(f);f=m.next().value;m=m.next().value;f.width=m.width;f.fixed.width=m.fixed.width;f.frozen.width=m.frozen.width;f.proportion.width=m.proportion.width;f.min.width=m.min.width});return a}},{key:"paddingTop",
set:function(a){this.items.forEach(function(f){f.padding.y=a});this.layout.apply()}},{key:"paddingTop",get:function(){return this.items[0].padding.y}},{key:"paddingBottom",set:function(a){this.items.forEach(function(f){f.padding.height=a});this.layout.apply()}},{key:"paddingBottom",get:function(){return this.items[0].padding.height}},{key:"before",get:function(){return this._before||(this._before=this.origin.top&&new Zd.LayoutRow(this.origin.top))}},{key:"after",get:function(){return this._after||
(this._after=this.origin.bottom&&new Zd.LayoutRow(this.origin.bottom))}},{key:"dynamicLength",get:function(){return this.origin.dynamicHeight}},{key:"staticLength",get:function(){return this.origin.totalStaticHeight}},{key:"attachTo",value:function(a){this.after&&(this.after._before=null);this._after=null;Zd.arr.zip(this.items,a.items).forEach(function(f){var m=$jscomp.makeIterator(f);f=m.next().value;m=m.next().value;f.bottom=m;m.top=f});this.equalizeDynamicAxis();return a}},{key:"col",value:function(a){return this.items[a]}},
{key:"height",get:function(){return this.length}},{key:"height",set:function(a){a-=this.height;this.fixed?(this.length+=a,this.container.height+=a):(this.adjustLength(a),this.proportion=0<this.origin.dynamicHeight?this.height/this.origin.dynamicHeight:0);!this.layout.manualUpdate&&this.layout.apply()}},{key:"remove",value:function(){var a=this,f=this.before||this.after;this.items.forEach(function(m){m.top&&(m.top.bottom=m.bottom);m.bottom&&(m.bottom.top=m.top);m.group.disconnect(m);a.layout.removeGroup(m.group)});
this.before&&(this.before._after=null);this.after&&(this.after._before=null);this.before||(this.layout.grid=this.after.getRoot());f.equalizeDynamicAxis()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"LayoutRow"}}],e,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:43061,
end:45522})}(Zd.LayoutAxis);Zd.LayoutRow=MJ;Zd.LayoutRow=MJ;Zd.LayoutRow=MJ;var NJ=function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/layout.js"),l=e.hasOwnProperty("LayoutCell")&&"function"===typeof e.LayoutCell?e.LayoutCell:e.LayoutCell=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Pb(l,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){var f=a.row,m=a.column,r=a.top,v=a.left,
x=a.right,y=a.bottom;a=a.layout;var E;f=$jscomp.makeIterator(f||[]);var F=f.next().value;f=$jscomp.arrayFromIterator(f);m=$jscomp.makeIterator(m||[]);var I=m.next().value;m=$jscomp.arrayFromIterator(m);this.layout=a;this.fixed={width:!1,height:!1};this.frozen={width:!1,height:!1};this.min={width:0,height:0};this.top=r;this.left=v;this.bottom=y;this.right=x;this.padding=Zd.rect(0,0,0,0);0<f.length?this.right=new Zd.LayoutCell({row:f,left:this,layout:a}):0<m.length&&(this.bottom=new Zd.LayoutCell({column:m,
top:this,layout:a}));this.proportion={width:1/(1+this.before.length+this.after.length),height:1/(1+this.above.length+this.below.length)};this.height=this.container.height*this.proportion.height;this.width=this.container.width*this.proportion.width;(E=a&&a.getCellGroupFor(F||I))?E.connect(this):this.group=new Zd.CellGroup({cell:this,morph:F||I,layout:a})}},{key:"container",get:function(){return this.layout.container}},{key:"above",get:function(){return this.collect({neighbor:"top",prepend:!0})}},{key:"below",
get:function(){return this.collect({neighbor:"bottom",append:!0})}},{key:"before",get:function(){return this.collect({neighbor:"left",prepend:!0})}},{key:"after",get:function(){return this.collect({neighbor:"right",append:!0})}},{key:"collect",value:function(a){var f=a.neighbor,m=a.prepend;a=a.append;for(var r=[],v=this;v=v[f];)m&&(r=[v].concat($jscomp.arrayFromIterable(r))),a&&(r=[].concat($jscomp.arrayFromIterable(r),[v]));return r}},{key:"col",value:function(a){for(var f=this,m=a;0<m&&f;)f=f.right,
m--;if(!f)throw Error(a+" out of bounds! Last column was "+(a-m-1));return new Zd.LayoutColumn(f)}},{key:"row",value:function(a){for(var f=this,m=a;0<m&&f;)f=f.bottom,m--;if(!f)throw Error(a+" out of bounds! Last row was "+(a-m-1));return new Zd.LayoutRow(f)}},{key:"extent",get:function(){return Zd.pt(this.width,this.height)}},{key:"staticWidth",get:function(){return this.fixed.width||this.min.width==this.width}},{key:"staticHeight",get:function(){return this.fixed.height||this.min.height==this.height}},
{key:"totalStaticWidth",get:function(){return Zd.arr.sum([this].concat($jscomp.arrayFromIterable(this.before),$jscomp.arrayFromIterable(this.after)).filter(function(a){return a.staticWidth}).map(function(a){return a.width}))}},{key:"totalStaticHeight",get:function(){return Zd.arr.sum([this].concat($jscomp.arrayFromIterable(this.above),$jscomp.arrayFromIterable(this.below)).filter(function(a){return a.staticHeight}).map(function(a){return a.height}))}},{key:"dynamicWidth",get:function(){return Zd.arr.sum([this].concat($jscomp.arrayFromIterable(this.before),
$jscomp.arrayFromIterable(this.after)).filter(function(a){return!a.staticWidth}).map(function(a){return a.width}))}},{key:"dynamicHeight",get:function(){return Zd.arr.sum([this].concat($jscomp.arrayFromIterable(this.above),$jscomp.arrayFromIterable(this.below)).filter(function(a){return!a.staticHeight}).map(function(a){return a.height}))}},{key:"height",get:function(){return Math.max(this.min.height,this._height||0)}},{key:"height",set:function(a){this._height=a}},{key:"width",get:function(){return Math.max(this.min.width,
this._width||0)}},{key:"width",set:function(a){this._width=a}},{key:"position",get:function(){return Zd.pt(Zd.arr.sum(this.before.map(function(a){return a.width})),Zd.arr.sum(this.above.map(function(a){return a.height})))}},{key:"bounds",value:function(){return this.position.addPt(this.padding.topLeft()).extent(this.extent.subPt(this.padding.extent()).subPt(this.padding.topLeft()))}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"LayoutCell"}}],e,{pathInPackage:function(){return"layout.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:45531,end:49183})}(void 0);Zd.LayoutCell=NJ;Zd.LayoutCell=NJ;Zd.LayoutCell=NJ;var TA=Ha("aN",function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/layout.js"),l=e.hasOwnProperty("GridLayout")&&"function"===typeof e.GridLayout?e.GridLayout:e.GridLayout=function(a){a&&a[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Pb(l,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){Pb._get(Object.getPrototypeOf(l.prototype),Symbol.for("lively-instance-initialize"),this).call(this,a);a=Object.assign({autoAssign:!0,fitToCell:!0},a);this.cellGroups=[];this.config=a}},{key:"name",value:function(){return"Grid"}},{key:"description",value:function(){return"Aligns the submorphs alongside a configurable grid. Columns and rows and be configured to have different proportional, minimal or fixed sizes. Cells can further be grouped such that submorphs fill up multiple slots of the grid."}},
{key:"copy",value:function(){return new this.constructor(this.getSpec())}},{key:"getSpec",value:function(){for(var a=[],f=[],m=[],r={},v=$jscomp.makeIterator(Zd.arr.range(0,this.rowCount-1)),x=v.next();!x.done;x=v.next())a.push(this.grid.row(x.value).items.map(function(E){return E.group.state.morph?E.group.state.morph.name||E.group.state.morph:null}));v=$jscomp.makeIterator(Zd.arr.range(0,this.rowCount-1));for(x=v.next();!x.done;x=v.next()){x=x.value;var y=this.grid.row(x);f.push(x,Object.assign({},
y.fixed?{fixed:y.length}:{height:y.height},{paddingTop:y.paddingTop,paddingBottom:y.paddingBottom}))}v=$jscomp.makeIterator(Zd.arr.range(0,this.columnCount-1));for(x=v.next();!x.done;x=v.next())x=x.value,y=this.grid.col(x),m.push(x,Object.assign({},y.fixed?{fixed:y.length}:{},{paddingLeft:y.paddingLeft,paddingRight:y.paddingRight}));v=$jscomp.makeIterator(this.cellGroups);for(x=v.next();!x.done;x=v.next())x=x.value,x.state.morph&&(r["string"===typeof x.state.morph?x.state.morph:x.morph.name]=Zd.obj.select(x,
["align","resize"]));return{autoAssign:!1,grid:a,rows:f,columns:m,groups:r}}},{key:"__serialize__",value:function(){return{__expr__:"new GridLayout("+Zd.obj.inspect(this.getSpec(),{escapeKeys:!0})+")",bindings:{"lively.morphic":["GridLayout"]}}}},{key:"initGrid",value:function(){var a=this,f=this.ensureGrid(this.config).map(function(m){return new Zd.LayoutRow(new Zd.LayoutCell({row:m,layout:a}))});f.reduce(function(m,r){return m.attachTo(r)});this.config.autoAssign&&this.autoAssign(this.notInLayout);
this.grid=f[0].col(0);this.col(0).equalizeDynamicAxis();this.row(0).equalizeDynamicAxis();this.initRowsAndColumns();this.initGroups()}},{key:"initGroups",value:function(){var a=this.config.groups;if(a)for(var f in a){var m=this.getCellGroupFor(this.container.getSubmorphNamed(f)),r=a[f],v=r.resize,x=void 0===r.align?"topLeft":r.align;r=void 0===r.alignedProperty?"topLeft":r.alignedProperty;m&&(void 0!=v&&(m.resize=v),m.align=x,m.alignedProperty=r)}}},{key:"initRowsAndColumns",value:function(){var a=
this.config,f=void 0===a.columns?[]:a.columns,m=$jscomp.makeIterator(Zd.arr.toTuples(void 0===a.rows?[]:a.rows,2));for(a=m.next();!a.done;a=m.next()){var r=$jscomp.makeIterator(a.value);a=r.next().value;r=r.next().value;Object.assign(this.row(a),r)}f=$jscomp.makeIterator(Zd.arr.toTuples(f,2));for(a=f.next();!a.done;a=f.next())m=$jscomp.makeIterator(a.value),a=m.next().value,r=m.next().value,Object.assign(this.col(a),r)}},{key:"compensateOrigin",get:function(){return this.config.compensateOrigin}},
{key:"compensateOrigin",set:function(a){this.config.compensateOrigin=a;this.apply()}},{key:"fitToCell",get:function(){return this.config.fitToCell}},{key:"fitToCell",set:function(a){this.config.fitToCell=a;this.cellGroups.forEach(function(f){return f.resize=a});this.apply()}},{key:"notInLayout",get:function(){return Zd.arr.withoutAll(this.layoutableSubmorphs,this.cellGroups.map(function(a){return a.morph}))}},{key:"col",value:function(a){return this.grid.col(a)}},{key:"row",value:function(a){return this.grid.row(a)}},
{key:"rowCount",get:function(){return this.grid.col(0).items.length}},{key:"columnCount",get:function(){return this.grid.row(0).items.length}},{key:"addGroup",value:function(a){this.cellGroups.push(a)}},{key:"removeGroup",value:function(a){Zd.arr.remove(this.cellGroups,a)}},{key:"fitAxis",value:function(){var a=this,f,m;[this.grid.row(0)].concat($jscomp.arrayFromIterable(this.grid.row(0).axisAfter)).map(function(r){r.prepareForResize(a.container.height);f=a.grid.totalStaticHeight;return r}).forEach(function(r){r.fixed||
(r.length=r.proportion*Math.max(0,a.container.height-f))});[this.grid.col(0)].concat($jscomp.arrayFromIterable(this.grid.col(0).axisAfter)).map(function(r){r.prepareForResize(a.container.width);m=a.grid.totalStaticWidth;return r}).forEach(function(r){r.fixed||(r.length=r.proportion*Math.max(0,a.container.width-m))})}},{key:"apply",value:function(a){a=void 0===a?!1:a;this.active||(this.active=!0,Pb._get(Object.getPrototypeOf(l.prototype),"apply",this).call(this,a),this.grid||this.initGrid(),this.fitAxis(),
this.container.extent=Zd.pt(Math.max(this.grid.totalStaticWidth,this.container.width),Math.max(this.grid.totalStaticHeight,this.container.height)),this.fitAxis(),this.cellGroups.forEach(function(f){f&&f.apply(a)}),this.lastBoundsExtent=this.container.bounds().extent(),this.active=!1)}},{key:"submorphBoundsChanged",get:function(){for(var a=$jscomp.makeIterator(this.cellGroups),f=a.next();!f.done;f=a.next())if(f=f.value,f.morph&&!f.bounds().equals(f.morph.bounds()))return!0;return!1}},{key:"getCellGroupFor",
value:function(a){return a&&this.cellGroups.find(function(f){return f.morph==a})}},{key:"onSubmorphRemoved",value:function(a){var f=this.getCellGroupFor(a);f&&(f.morph=null);Pb._get(Object.getPrototypeOf(l.prototype),"onSubmorphRemoved",this).call(this,a)}},{key:"inspect",value:function(a){}},{key:"ensureGrid",value:function(a){var f=this,m=a.grid,r=a.rowCount,v=a.columnCount;m=m||[[]];r=r||m.length;v=v||Zd.arr.max(m.map(function(x){return x.length}));m.length<r&&(m=m.concat(Zd.arr.withN(r-m.length,
[])));return m=m.map(function(x){x.length<v&&(x=x.concat(Zd.arr.withN(v-x.length,null)));return x.map(function(y){return y&&y.isMorph?(y.owner!=f.container&&f.container.addMorph(y),y):y?f.container.getSubmorphNamed(y)||y:y})})}},{key:"autoAssign",value:function(a){var f=this;a.forEach(function(m){var r,v=Infinity;f.cellGroups.forEach(function(x){x.morph||x.cells.forEach(function(y){y=y.position.dist(m.position);y<v&&(r=x,v=y)})});r&&(r.morph=m)})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"GridLayout"}}],
e,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:49192,end:56229})}(Zd.Layout));Zd.GridLayout=TA;Zd.GridLayout=TA;Zd.GridLayout=TA;var vda=Object.freeze({__proto__:null,CustomLayout:FJ,SnapLayout:GJ,VerticalLayout:SA,HorizontalLayout:bv,ProportionalLayout:HJ,CenteredTilingLayout:IJ,TilingLayout:JJ,
CellGroup:KJ,LayoutColumn:LJ,LayoutRow:MJ,LayoutCell:NJ,GridLayout:TA});Ha("bU",vda);var Xe=lively.FreezerRuntime.recorderFor("lively.morphic/partsbin.js");Xe.getAllPartResources=$V;Xe.loadPart=HN;Xe.savePart=aW;Xe.interactivelySavePart=nI;Xe.interactivelyLoadObjectFromPartsBinFolder=bW;Xe.interactivelySaveObjectToPartsBinFolder=cW;Xe.saveObjectToPartsbinFolder=dW;Xe.loadObjectFromPartsbinFolder=IN;Xe.buildCommitEditor=eW;Xe.resource=A;Xe.Resource=Pg;Xe.registerExtension=M;Xe.Path=Ih;Xe.obj=ng;Xe.date=
Cw;Xe.promise=hg;Xe.HorizontalLayout=bv;Xe.VerticalLayout=SA;Xe.morph=qc;Xe.Morph=ql;Xe.pt=Ei;Xe.Color=xg;Xe.Rectangle=He;Xe.connect=Dl;Xe.emit=jn;Xe.SnapshotPackageHelper=rQ;Xe.ensureCommitInfo=eI;Xe.MorphicDB=Xw;Xe.createMorphSnapshot=xC;Xe.getClassName=tr;Xe.getAllPartResources=$V;Xe.getAllPartResources=$V;Xe.loadPart=HN;Xe.loadPart=HN;Xe.savePart=aW;Xe.savePart=aW;Xe.interactivelySavePart=nI;Xe.interactivelySavePart=nI;Xe.interactivelyLoadObjectFromPartsBinFolder=bW;Xe.interactivelyLoadObjectFromPartsBinFolder=
bW;Xe.interactivelySaveObjectToPartsBinFolder=cW;Xe.interactivelySaveObjectToPartsBinFolder=cW;Xe.saveObjectToPartsbinFolder=dW;Xe.saveObjectToPartsbinFolder=dW;Xe.loadObjectFromPartsbinFolder=IN;Xe.loadObjectFromPartsbinFolder=IN;var CZ=function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/partsbin.js"),l=e.hasOwnProperty("SnapshotEditor")&&"function"===typeof e.SnapshotEditor?e.SnapshotEditor:e.SnapshotEditor=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return Pb(l,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a,f,m){this.commit=a;this.snapshot=f;this._db=m}},{key:"db",get:function(){return this._db||Xe.MorphicDB.default}},{key:"saveModifiedSnapshot",value:function(a,f){var m=this,r,v,x,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(E){if(1==E.nextAddress){r=a;v=r._id;x=r.name;y=r.type;if(!v)throw Error("No id of commit, cannot save!");return E.yield(m.db.commit(y,x,f,a,void 0,v),2)}a=E.yieldResult;m.commit=
a;m.snapshot=f;return E.return(a)})}},{key:"interactivelySaveModifiedSnapshot",value:function(a,f){var m=this,r,v,x,y,E;return $jscomp.asyncExecutePromiseGeneratorProgram(function(F){r=Xe.promise.deferred();v=r.promise;x=r.resolve;y=r.reject;E=m;Object.assign(Xe.buildCommitEditor(),{commit:Object.assign({},m.commit,{},a),cancel:function(){(this.getWindow()||this).remove();y("canceled")},accept:function(){var I=this,J,P;return $jscomp.asyncExecutePromiseGeneratorProgram(function(N){if(1==N.nextAddress)return N.setCatchFinallyBlocks(2),
N.yield(E.saveModifiedSnapshot(I.commit,f),4);if(2!=N.nextAddress)return J=N.yieldResult,(I.getWindow()||I).remove(),x(I.commit=J),N.leaveTryBlock(0);P=N.enterCatchBlock();I.showError(P);y(P);N.jumpToEnd()})}}).openInWindow({title:"commit"});return F.return(v)})}},{key:"interactivelyEditMetadata",value:function(a){var f=this,m;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){if(1==r.nextAddress)return r.yield(f.interactivelySaveModifiedSnapshot(f.commit,f.snapshot),2);m=r.yieldResult;
"function"===typeof a&&a({commit:m,snapshot:f.snapshot});return r.return(m)})}},{key:"interactivelyEditSnapshotJSON",value:function(a){var f=this,m,r,v,x,y,E,F,I,J,P;return $jscomp.asyncExecutePromiseGeneratorProgram(function(N){if(1==N.nextAddress)return m=f,r=m.commit,v=m.snapshot,x=r,y=x._id,E=x.name,F=x.type,N.yield(System.import("lively.ide/text-editor.js"),2);J=N.yieldResult;P=J.default;P.openURL("<"+F+"/"+E+">",{historyId:"object-serialization-debugger-editor",customSaveAction:function(Y){var W,
da,va,za,L,Z;return $jscomp.asyncExecutePromiseGeneratorProgram(function(R){switch(R.nextAddress){case 1:if(W=v){R.jumpTo(2);break}return R.yield(f.db.fetchSnapshot(void 0,void 0,y),3);case 3:W=R.yieldResult;case 2:da=W;va=JSON.stringify(da,null,2);if(va===I){R.jumpTo(4);break}return R.yield($world.confirm(["The content you are editing was changed in the mean time.\nDo you want to save anyway and overwrite those changes?",{fontWeight:"normal"}]),5);case 5:if(za=R.yieldResult,!za)return R.return({saved:!1,
message:"canceled"});case 4:return L=JSON.parse(Y.ui.contentText.textString),R.yield(f.interactivelySaveModifiedSnapshot(f.commit,L),6);case 6:return r=R.yieldResult,v=L,I=Y.ui.contentText.textString,Z={saved:!0,snapshot:L,commit:r},"function"===typeof a&&a(Z),R.return(Z)}})},customLoadContentAction:function(Y,W){var da,va;return $jscomp.asyncExecutePromiseGeneratorProgram(function(za){if(1==za.nextAddress)return(da=v)?za.jumpTo(2):za.yield(f.db.fetchSnapshot(void 0,void 0,y),3);2!=za.nextAddress&&
(da=za.yieldResult);va=da;return za.return({content:I=JSON.stringify(va,null,2),url:F+"/"+E+".json"})})}});N.jumpToEnd()})}},{key:"interactivelyEditPackageCode",value:function(a){var f=this,m,r,v,x,y,E,F,I,J,P,N,Y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(W){switch(W.nextAddress){case 1:m=f;r=m.commit;v=m.snapshot;x=r;y=x._id;if(E=v){W.jumpTo(2);break}return W.yield(f.db.fetchSnapshot(void 0,void 0,y),3);case 3:E=W.yieldResult;case 2:return F=E,I=(new Xe.SnapshotPackageHelper(F)).filesInPackages(),
J=I.map(function(da){return{isListItem:!0,string:da.url,value:da}}),W.yield($world.filterableListPrompt("Select file to edit",J,{historyId:"object-serialization-debugger-hist"}),4);case 4:return P=W.yieldResult,N=$jscomp.makeIterator(P.selected),(Y=N.next().value)?W.return(f.interactivelyEditFileInSnapshotPackage(Y,a)):W.return()}})}},{key:"interactivelyEditFileInSnapshotPackage",value:function(a,f,m){var r=this,v,x,y,E,F,I,J,P,N,Y,W,da;return $jscomp.asyncExecutePromiseGeneratorProgram(function(va){switch(va.nextAddress){case 1:v=
r;x=v.snapshot;y=v.commit;E=y._id;F=y.name;I=y.type;if(J=x){va.jumpTo(2);break}return va.yield(r.db.fetchSnapshot(void 0,void 0,E),3);case 3:J=va.yieldResult;case 2:return P=J,N=a.get(P),va.yield(System.import("lively.ide/text-editor.js"),4);case 4:return Y=va.yieldResult,W=Y.default,da=W.openURL("<"+I+"/"+F+" - "+a.path.slice(1).join("/")+">",{historyId:"interactivelyEditFileInSnapshotPackage-hist",customSaveAction:function(za){var L,Z,R,X;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ja){switch(ja.nextAddress){case 1:L=
a.get(P);if(L===N){ja.jumpTo(2);break}return ja.yield($world.confirm(["The content you are editing was changed in the mean time.\nDo you want to save anyway and overwrite those changes?",{fontWeight:"normal"}]),3);case 3:if(Z=ja.yieldResult,!Z)return ja.return({saved:!1,message:"canceled"});case 2:return a.set(P,za.ui.contentText.textString),R=r,ja.yield(r.interactivelySaveModifiedSnapshot(r.commit,P),4);case 4:return R.commit=ja.yieldResult,X={commit:r.commit,snapshot:P,saved:!0},"function"===typeof f&&
f(X),ja.return(X)}})},customLoadContentAction:function(za,L){return{content:a.get(P),url:a.url}}}),m&&da.whenRendered().then(function(){return da.lineNumber=m.row}),va.return(da)}})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"SnapshotEditor"}}],e,{pathInPackage:function(){return"partsbin.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",
version:"0.1.2"}}},{start:9614,end:14833})}(void 0);Xe.SnapshotEditor=CZ;Xe.SnapshotEditor=CZ;Xe.SnapshotEditor=CZ;Xe.partURLRe=/^part:\/\/([^\/]+)\/(.*)$/;(function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/partsbin.js"),l=e.hasOwnProperty("PartResource")&&"function"===typeof e.PartResource?e.PartResource:e.PartResource=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Pb(l,b,[{key:"canDealWithJSON",
get:function(){return!1}},{key:"dirList",value:function(a,f){var m=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){return 1==r.nextAddress?r.yield(Xe.resource(m.url.replace("part://","styleguide://")).dirList(a,f),2):r.return(r.yieldResult)})}},{key:"write",value:function(a){return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){throw Error("Part urls are ready only! Please go to the world they are defined in and change the exported component directly.");})}},{key:"read",
value:function(){var a=this,f,m,r,v,x,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(E){switch(E.nextAddress){case 1:return E.yield(Xe.resource(a.url.replace("part://","styleguide://")).read(),2);case 2:f=E.yieldResult;if(!f.master){E.jumpTo(3);break}return E.yield(f.master.whenReady(),3);case 3:m=f.copy();m.isComponent=!1;m.name="a"+Xe.getClassName(m);m.withAllSubmorphsDoExcluding(function(F){F!=m&&F.master||delete F._parametrizedProps},function(F){return F.master&&F!=m});r=m.master;
m.master=f;if(!m._pool.mastersInSubHierarchy){E.jumpTo(5);break}v=$jscomp.makeIterator(m._pool.mastersInSubHierarchy);x=v.next();case 6:if(x.done){E.jumpTo(5);break}y=x.value;if(r==y){E.jumpTo(7);break}return E.yield(y.applyIfNeeded(!0),9);case 9:y.derivedMorph.ownerChain().includes(m)||y.derivedMorph.requestMasterStyling();case 7:x=v.next();E.jumpTo(6);break;case 5:return m.master.applyIfNeeded(!0),delete m._pool,m.withAllSubmorphsDo(function(F){if("function"===typeof F.onLoad)F.onLoad()}),E.return(m)}})}}],
[{key:Symbol.for("__LivelyClassName__"),get:function(){return"PartResource"}}],e,{pathInPackage:function(){return"partsbin.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:14883,end:16657})})(Xe.Resource);var DZ={name:"part",matches:function(b){return b.match(Xe.partURLRe)},resourceClass:Xe.PartResource};Xe.resourceExtension=DZ;
Xe.resourceExtension=DZ;Xe.resourceExtension=DZ;Xe.registerExtension(Xe.resourceExtension);(function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/partsbin.js"),l=e.hasOwnProperty("CommitEditor")&&"function"===typeof e.CommitEditor?e.CommitEditor:e.CommitEditor=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Pb(l,b,[{key:"onLoad",value:function(){Xe.connect(this.ui.okButton,"fire",this,"accept");Xe.connect(this.ui.cancelButton,
"fire",this,"cancel")}},{key:"accept",value:function(){}},{key:"cancel",value:function(){}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"CommitEditor"}},{key:"properties",get:function(){return{name:{defaultValue:"commit editor"},extent:{defaultValue:Xe.pt(420,24)},layout:{initialize:function(){this.layout=new Xe.VerticalLayout({resizeSubmorphs:!0,spacing:3})}},commit:{set:function(a){this._commit=a;var f=a.type,m=a.timestamp,r=a.author,v=a.tags,x=a.description,y=a.metadata,E=this.ui,
F=E.typeInput,I=E.timestampInput,J=E.authorNameInput,P=E.authorEmailInput,N=E.authorRealmInput,Y=E.tagsInput,W=E.descriptionInput,da=E.messageInput,va=E.metadataInput;E.nameInput.input=a.name;F.input=f;I.input=String(new Date(m));J.input=r.name;P.input=r.email;N.input=r.realm;Y.input=v.join(" ");W.textString=x;da.textString="";va.textString=y?JSON.stringify(y,null,2):""},get:function(){var a=this._commit;if(!a)throw Error("commit editor does not have a _commit object");var f=this.ui,m=f.authorNameInput,
r=f.authorEmailInput,v=f.authorRealmInput,x=f.tagsInput,y=f.descriptionInput,E=f.messageInput,F=f.metadataInput,I=f.nameInput.input;f=f.typeInput.input;if(a.name!==I)throw Error("name does not match _commit.name: "+I+" vs "+a.name);if(a.type!==f)throw Error("type does not match _commit.type: "+f+" vs "+a.type);a.author.name=m.input;a.author.email=r.input;a.author.realm=v.input;a.tags=x.input.split(" ").map(function(J){return J.trim()}).filter(Boolean);a.description=y.textString;a.message=E.textString;
a.metadata=F.textString?JSON.parse(F.textString):null;return a}},ui:{get:function(){return{metadataInput:this.get("metadata input"),messageInput:this.get("message input"),descriptionInput:this.get("description input"),tagsInput:this.get("tags input"),authorRealmInput:this.get("author.realm input"),authorEmailInput:this.get("author.email input"),authorNameInput:this.get("author.name input"),timestampInput:this.get("timestamp input"),typeInput:this.get("type input"),nameInput:this.get("name input"),
cancelButton:this.get("cancel button"),okButton:this.get("ok button")}}},submorphs:{initialize:function(){var a={type:"input",extent:Xe.pt(420,24),fixedWidth:!0,fixedHeight:!0,padding:Xe.Rectangle.inset(4,4),border:{color:Xe.Color.gray,width:1}};this.submorphs=[Object.assign({},a,{name:"name input",placeholder:"name"}),Object.assign({},a,{name:"type input",placeholder:"type"}),Object.assign({},a,{name:"timestamp input",placeholder:"timestamp"}),{layout:new Xe.VerticalLayout({resizeSubmorphs:!0,spacing:3}),
submorphs:[Object.assign({},a,{name:"author.name input",placeholder:"author name"}),Object.assign({},a,{name:"author.email input",placeholder:"author email"}),Object.assign({},a,{name:"author.realm input",placeholder:"author realm"})]},Object.assign({},a,{name:"tags input",placeholder:"tags"}),Object.assign({},a,{height:70,name:"description input",type:"text"}),Object.assign({},a,{height:70,name:"message input",type:"text"}),Object.assign({},a,{height:70,name:"metadata input",type:"text"}),{layout:new Xe.HorizontalLayout({spacing:3,
direction:"centered"}),submorphs:[{type:"button",name:"ok button",label:"OK"},{type:"button",name:"cancel button",label:"Cancel"}]}]}}}}}],e,{pathInPackage:function(){return"partsbin.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:16843,end:21937})})(Xe.Morph);Xe.buildCommitEditor=eW;Xe.buildCommitEditor=eW;var ig=lively.FreezerRuntime.recorderFor("lively.morphic/world-loading.js");
ig.loadWorldFromURL=JN;ig.loadWorldFromCommit=KN;ig.loadWorldFromDB=LN;ig.loadWorld=MN;ig.loadLocalConfig=function(){var b,e;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){switch(l.nextAddress){case 1:return b=lively.modules.module("localconfig.js"),l.setCatchFinallyBlocks(2),l.yield(ig.resource(b.id).exists(),4);case 4:if(!l.yieldResult){l.jumpTo(5);break}return l.yield(b.reload({resetEnv:!1,reloadDeps:!1}),5);case 5:l.leaveTryBlock(0);break;case 2:e=l.enterCatchBlock(),console.error("Error loading localconfig:",
e),"undefined"!==typeof $world&&$world.showError("Error loading localconfig.js: "+e),l.jumpToEnd()}})};ig.setupLivelyShell=function(b){var e,l,a,f,m,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){switch(v.nextAddress){case 1:return v.yield(lively.modules.importPackage("lively.shell"),2);case 2:return v.yield(System.import("lively.shell/client-command.js"),3);case 3:return e=v.yieldResult,l=e.default,v.yield(System.import("lively.shell/client-resource.js"),4);case 4:a=v.yieldResult,
f=a.resourceExtension,m=b,r=m.l2lClient,l.installLively2LivelyServices(r),f.resourceClass.defaultL2lClient=r,ig.registerResourceExension(f),console.log("[lively] lively.shell setup"),v.jumpToEnd()}})};ig.setupLively2Lively=function(b){var e,l,a,f,m;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){switch(r.nextAddress){case 1:return e=b.getCurrentUser(),l={world:b.name},e&&(l.userToken=e.token,l.userRealm=e.realm),r.yield(lively.modules.importPackage("lively.2lively"),2);case 2:return r.yield(System.import("lively.2lively/client.js"),
3);case 3:return a=r.yieldResult,f=a.default,r.yield(f.forLivelyInBrowser(l),4);case 4:return m=r.yieldResult,console.log("[lively] lively2lively client created "+m),m._onUserChange?ig.reportWorldLoad(b,e):(m._onUserChange=function(v){m.isOnline()&&v.user&&(v=v.user,m.info=Object.assign({},m.info,{userToken:v.token,userRealm:v.realm}),m.unregister().then(function(){return m.register()}).then(function(){return console.log("re-registered after user change")}))},ig.subscribe("lively.user/userchanged",
m._onUserChange,System),m.once("registered",function(){ig.reportWorldLoad(b,e)}),m.on("registered",function(){var v=b.get("user flap");v&&v.updateNetworkIndicator(m)}),m.on("connected",function(){var v=b.get("user flap");v&&v.updateNetworkIndicator(m)}),m.on("reconnecting",function(){var v=b.get("user flap");v&&v.updateNetworkIndicator(m)}),m.on("disconnected",function(){var v=b.get("user flap");v&&v.updateNetworkIndicator(m)})),r.return(m)}})};ig.interactivelySaveWorld=nF;ig.reportWorldLoad=function(b,
e){e=e?e.name+" ("+(e.token||"").slice(0,5)+")":"---";fetch("/report-world-load",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:e+" logged in at "+b.name+" ["+window._livelyLoadId+"]"})}).catch(function(l){return console.warn("report-world-load failed: "+l)})};ig.resource=A;ig.registerResourceExension=M;ig.Color=xg;ig.Path=Ih;ig.obj=ng;ig.date=Cw;ig.promise=hg;ig.MorphicEnv=Zs;ig.createMorphSnapshot=xC;ig.MorphicDB=Xw;ig.ensureCommitInfo=eI;ig.pathForBrowserHistory=
Cb;ig.subscribe=Gp;ig.emit=jn;ig.defaultDirectory=EN;ig.ShellClientResource=rp;ig.loadWorldFromURL=JN;ig.loadWorldFromURL=JN;ig.loadWorldFromCommit=KN;ig.loadWorldFromCommit=KN;ig.loadWorldFromDB=LN;ig.loadWorldFromDB=LN;ig.loadWorld=MN;ig.loadWorld=MN;ig.interactivelySaveWorld=nF;ig.interactivelySaveWorld=nF;var Sk=lively.FreezerRuntime.recorderFor("lively.user/client/user.js");Sk.jwtTokenDecode=function(b){b=$jscomp.makeIterator(b.split("."));b.next();var e=b.next().value;b.next();return JSON.parse(atob(e))};
Sk.guid=function(){var b=function(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)};return b()+b()+"-"+b()+"-"+b()+"-"+b()+"-"+b()+b()+b()};Sk.makeRequest=function(b,e,l,a){a=void 0===a?{}:a;e={method:void 0===e?"GET":e,mode:"cors"};l&&(e.body=l);e.redirect="follow";e.headers=Object.assign({},a);return fetch(b,e)};Sk.POST=function(b,e){var l,a,f;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){switch(m.nextAddress){case 1:return"string"!==typeof e&&(e=JSON.stringify(e)),
m.yield(Sk.makeRequest(b,"POST",e,{}),2);case 2:return l=m.yieldResult,m.setCatchFinallyBlocks(3),m.yield(l.text(),5);case 5:a=m.yieldResult;m.leaveTryBlock(4);break;case 3:m.enterCatchBlock();case 4:if(a&&"application/json"===l.headers.get("content-type"))try{f=JSON.parse(a)}catch(r){}if(!f)throw Error("Unexpected response: "+a);return m.return(f)}})};var tD=Ha("bO",function(b){var e=lively.FreezerRuntime.recorderFor("lively.user/client/user.js"),l=e.hasOwnProperty("User")&&"function"===typeof e.User?
e.User:e.User=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Pb(l,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a,f){this.realm=f;this.name=a;this.roles={};this.createdAt=0;this.token=this.email=null}},{key:"isLoggedIn",value:function(){return!!this.token}},{key:"loginOrRegister",value:function(a,f,m){var r=this,v,x,y,E,F,I,J,P,N,Y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(W){if(1==
W.nextAddress)return v=r,x=v.email,y=v.createdAt,E=v.roles,F=v.name,I="register"===a?{password:f,email:x,createdAt:y,roles:E,name:F}:{password:f,name:F},W.yield(Sk.POST(m+"/"+a,I),2);J=W.yieldResult;if(J.error)return W.return(J);P=J;N=P.token;Y=Sk.jwtTokenDecode(N);E=Y.roles;y=Y.createdAt;x=Y.email;Object.assign(r,{roles:E,createdAt:y,email:x,token:N});return W.return({status:J.status})})}},{key:"verify",value:function(){var a=this,f,m;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){if(1==
r.nextAddress)return r.yield(Sk.POST(a.realm+"/verify",{token:a.token}),2);f=r.yieldResult;m=f.error;return r.return(m?!1:!0)})}},{key:"login",value:function(a){return this.loginOrRegister("login",a,this.realm)}},{key:"register",value:function(a){return this.loginOrRegister("register",a,this.realm)}},{key:"checkPassword",value:function(a){var f=this,m,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(x){if(1==x.nextAddress){if(!f.isLoggedIn)throw Error("To check password, user needs to login.");
return x.yield(Sk.POST(f.realm+"/check-password",{token:f.token,password:a}),2)}m=x.yieldResult;r=m.error;v=m.status;if(r)throw Error(r);return x.return(v)})}},{key:"modify",value:function(a){var f=this,m,r,v,x,y,E,F,I;return $jscomp.asyncExecutePromiseGeneratorProgram(function(J){if(1==J.nextAddress)return J.yield(Sk.POST(f.realm+"/modify",{token:f.token,changes:a}),2);m=J.yieldResult;r=m.error;v=m.status;x=m.token;if(r)return J.return({error:r});x&&(y=Sk.jwtTokenDecode(x),E=y.roles,F=y.createdAt,
I=y.email,Object.assign(f,{roles:E,createdAt:F,email:I,token:x}));return J.return({status:v})})}},{key:"toString",value:function(){return"<"+this.constructor.name+" "+this.name+" "+(this.isLoggedIn()?"":"not ")+"logged in>"}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"User"}},{key:"guest",get:function(){return Sk.guestUser}},{key:"named",value:function(a,f){var m=a+"-"+f,r=Sk.userMap.get(m);r||(r=new this(a,f),Sk.userMap.set(m,r));return r}},{key:"fromToken",value:function(a,f){var m=
Sk.jwtTokenDecode(a),r=m.roles,v=m.createdAt,x=m.email;return Object.assign(this.named(m.name,f),{roles:r,createdAt:v,email:x,token:a})}},{key:"clearCache",value:function(){Sk.userMap=new Map}}],e,{pathInPackage:function(){return"client/user.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.user",version:"0.2.0"}}},{start:1032,end:3466})}(void 0));Sk.User=tD;Sk.User=
tD;Sk.User=tD;var uD=function(b){var e=lively.FreezerRuntime.recorderFor("lively.user/client/user.js"),l=e.hasOwnProperty("GuestUser")&&"function"===typeof e.GuestUser?e.GuestUser:e.GuestUser=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Pb(l,b,[{key:"isGuestUser",get:function(){return!0}},{key:"isLoggedIn",value:function(){return!1}},{key:"loginOrRegister",value:function(a,f,m){return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){throw Error("Guest user cannot "+
a+"!");})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"GuestUser"}}],e,{pathInPackage:function(){return"client/user.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.user",version:"0.2.0"}}},{start:3476,end:3702})}(Sk.User);Sk.GuestUser=uD;Sk.GuestUser=uD;Sk.GuestUser=uD;Sk.userMap=Sk.userMap||new Map;Sk.guestUser=Sk.guestUser||Sk.GuestUser.named("guest-"+
Sk.guid(),null);var cv=lively.FreezerRuntime.recorderFor("lively.user/client/user-registry.js");cv.User=tD;cv.GuestUser=uD;cv.emit=jn;var EZ=function(b){var e=lively.FreezerRuntime.recorderFor("lively.user/client/user-registry.js"),l=e.hasOwnProperty("UserRegistry")&&"function"===typeof e.UserRegistry?e.UserRegistry:e.UserRegistry=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Pb(l,b,[{key:"isTrackingGuestUsers",
get:function(){return!1}},{key:"hasUserStored",value:function(){try{return!!localStorage["lively.user"]||!!sessionStorage["lively.user"]}catch(a){return!1}}},{key:"login",value:function(a,f){var m=this,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(x){if(1==x.nextAddress)return a.isGuestUser?x.jumpTo(2):x.yield(a.login(f),3);if(2!=x.nextAddress&&(r=x.yieldResult,v=r.error))throw Error(v);m.saveUserToLocalStorage(a);return x.return(a)})}},{key:"logout",value:function(a){var f=this;
return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){try{f.isTrackingGuestUsers||(delete localStorage["lively.user"],delete sessionStorage["lively.user"])}catch(r){}a=a&&a.isGuestUser?a:cv.User.guest;cv.emit("lively.user/userchanged",{user:a},Date.now(),System);return m.return(a)})}},{key:"register",value:function(a,f){var m=this,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(x){if(1==x.nextAddress){if(!a||a.isGuestUser)throw Error("guest users cannot register");return x.yield(a.register(f),
2)}r=x.yieldResult;if(v=r.error)throw Error(v);m.saveUserToLocalStorage(a);return x.return(a)})}},{key:"loadUserFromLocalStorage",value:function(a){try{var f=localStorage["lively.user"]||sessionStorage["lively.user"];if(f)return f=JSON.parse(f),f.isGuest?cv.GuestUser.named(f.name,null):cv.User.fromToken(f.token,a)}catch(m){console.warn("Could not read user from localStorage: "+m)}return this.isTrackingGuestUsers?!1:cv.GuestUser.guest}},{key:"saveUserToLocalStorage",value:function(a){if(!a||!a.isGuestUser&&
!a.token)return!1;cv.emit("lively.user/userchanged",{user:a},Date.now(),System);try{return a.isGuestUser&&!this.isTrackingGuestUsers?(sessionStorage["lively.user"]=JSON.stringify({isGuest:!0,name:a.name}),delete localStorage["lively.user"]):localStorage["lively.user"]=a.isGuestUser&&this.isTrackingGuestUsers?JSON.stringify({isGuest:!0,name:a.name}):JSON.stringify({token:a.token}),!0}catch(f){return console.warn("Could not save user into local/sessionStorage: "+f),!1}}}],[{key:Symbol.for("__LivelyClassName__"),
get:function(){return"UserRegistry"}},{key:"current",get:function(){return this._current||(this._current=new this)}}],e,{pathInPackage:function(){return"client/user-registry.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.user",version:"0.2.0"}}},{start:135,end:2531})}(void 0);EZ=cv.UserRegistry;var GQ=Ha("bN",EZ);cv.default=EZ;var aG=lively.FreezerRuntime.recorderFor("lively.user/index.js");
aG.User=tD;aG.ClientUser=tD;aG.GuestUser=uD;aG.GuestUser=uD;aG.default=GQ;aG.UserRegistry=GQ;var Cxa=Object.freeze({__proto__:null,ClientUser:tD,GuestUser:uD,UserRegistry:GQ});lively.FreezerRuntime.recorderFor("lively.collab/comments/commentMorph.js");lively.FreezerRuntime.recorderFor("lively.collab/comments/commentIndicator.js");lively.FreezerRuntime.recorderFor("lively.collab/comments/commentBrowser.js");lively.FreezerRuntime.recorderFor("lively.collab/comments/comment.js");lively.FreezerRuntime.recorderFor("lively.collab/comments/badge.js");
var st=lively.FreezerRuntime.recorderFor("lively.collab/index.js");st.CommentGroupMorph=void 0;st.CommentGroupMorph=void 0;st.CommentMorph=void 0;st.CommentMorph=void 0;st.CommentIndicator=void 0;st.CommentIndicator=void 0;st.CommentBrowser=void 0;st.CommentBrowser=void 0;st.Comment=void 0;st.Comment=void 0;st.Badge=void 0;st.Badge=void 0;var og=lively.FreezerRuntime.recorderFor("lively.morphic/world.js");og.bowser=gt;og.Rectangle=He;og.Color=xg;og.pt=Ei;og.arr=Mf;og.promise=hg;og.Path=Ih;og.obj=
ng;og.signal=Xl;og.config=em;og.MorphicEnv=Zs;og.Morph=ql;og.TooltipViewer=$F;og.Tooltip=qD;og.loadWorldFromURL=JN;og.loadWorldFromDB=LN;og.loadWorldFromCommit=KN;og.loadWorld=MN;og.touchInputDevice=Sr;og.UserRegistry=GQ;og.emit=jn;og.resource=A;og.loadMorphFromSnapshot=vw;og.CommentBrowser=void 0;var ry=Ha("a$",function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/world.js"),l=e.hasOwnProperty("World")&&"function"===typeof e.World?e.World:e.World=function(a){a&&a[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Pb(l,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){Pb._get(Object.getPrototypeOf(l.prototype),Symbol.for("lively-instance-initialize"),this).call(this,a);this._renderer=null;this._tooltipViewer=new og.TooltipViewer(this)}},{key:"__deserialize__",value:function(a,f,m,r){Pb._get(Object.getPrototypeOf(l.prototype),"__deserialize__",this).call(this,a,f,m,r);this._renderer=null;this._tooltipViewer=new og.TooltipViewer(this)}},
{key:"__additionally_serialize__",value:function(a,f,m,r){Pb._get(Object.getPrototypeOf(l.prototype),"__additionally_serialize__",this).call(this,a,f,m,r);if(a.props.submorphs)for(a=a.props.submorphs.value,f=a.length;f--;)m.refForId(a[f].id).realObj.isHand&&og.arr.removeAt(a,f)}},{key:"commands",get:function(){return[].concat($jscomp.arrayFromIterable(Pb._get(Object.getPrototypeOf(l.prototype),"commands",this)),[{name:"resize to fit window",exec:function(a){var f,m,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(x){switch(x.nextAddress){case 1:f=
function(){a.extent=lively.FreezerRuntime?a.windowBounds().extent():a.windowBounds().union(a.submorphBounds(function(y){return!y.isEpiMorph&&!y.hasFixedPosition})).extent()},m=function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){if(1==y.nextAddress)return y.yield(a.whenRendered(),2);delete a._cachedWindowBounds;return y.return(!a.windowBounds().extent().equals(a.extent))})},r=0;case 2:if(!(v=5>r)){x.jumpTo(4);break}return x.yield(m(),5);case 5:v=x.yieldResult;case 4:if(!v){x.jumpTo(3);
break}r++;f();x.jumpTo(2);break;case 3:return a.relayout(),x.return(!0)}})}}])}},{key:"isWorld",get:function(){return!0}},{key:"whenReady",value:function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){return a.return(!0)})}},{key:"render",value:function(a){return a.renderWorld(this)}},{key:"grabbable",get:function(){return!1}},{key:"grabbable",set:function(a){}},{key:"existingHandForPointerId",value:function(a){return this.submorphs.find(function(f){return f instanceof og.Hand&&
f.pointerId===a})}},{key:"layoutHaloForPointerId",value:function(a){}},{key:"haloForPointerId",value:function(a){}},{key:"handForPointerId",value:function(a,f){f=void 0===f?!1:f;var m=this.existingHandForPointerId(a);return m?m:!m&&this.firstHand&&f?(this.firstHand.pointerId=a,this.firstHand):this.addMorph(new og.Hand(a),this.submorphs[0])}},{key:"removeHandForPointerId",value:function(a){(a=this.existingHandForPointerId(a))&&1<this.hands.length&&a.remove()}},{key:"world",value:function(){return this}},
{key:"makeDirty",value:function(){if(!this._dirty){this._dirty=!0;var a=this.env.renderer;a&&a.renderLater()}}},{key:"hands",get:function(){return og.arr.sortBy(this.submorphs.filter(function(a){return a.isHand}),function(a){return a.pointerId})}},{key:"firstHand",get:function(){return this.hands[0]}},{key:"getCurrentUser",value:function(){return og.UserRegistry.current.loadUserFromLocalStorage(window.AUTH_SERVER_URL||og.config.users.authServerURL)}},{key:"focusedMorph",get:function(){var a=this.env.eventDispatcher;
return(a=a&&a.eventState.focusedMorph)&&a.world()===this?a:this}},{key:"onMouseMove",value:function(a){a.hand&&a.hand.update(a);this._tooltipViewer.mouseMove(a)}},{key:"onMouseDown",value:function(a){a.state.menu&&a.state.menu.remove();this.onWindowScroll();this._tooltipViewer.mouseDown(a)}},{key:"onMouseUp",value:function(a){a.isCommandKey()&&a.stop();if(a.isAltDown()&&og.config.altClickDefinesThat){var f=this.morphsContainingPoint(a.position)[0];setTimeout(function(){return System.global.that=f},
100);f.show();a.stop();console.log('Set global "that" to '+f)}}},{key:"onMouseWheel",value:function(a){a.isShiftDown()&&(window.scrollBy(-a.domEvt.wheelDeltaX,-a.domEvt.wheelDeltaY),a.stop())}},{key:"onBeforeUnload",value:function(a){return this.onUnload(a)}},{key:"onUnload",value:function(a){this.submorphs.forEach(function(f){if("function"===typeof f.onWorldUnload)f.onWorldUnload(a)})}},{key:"updateVisibleWindowMorphs",value:function(){this.withAllSubmorphsDo(function(a){if(a.respondsToVisibleWindow){if("function"!==
typeof a.relayout)return a.showError(Error(a+" listed as responding to visible window change, but has no relayout instruction"));a.relayout()}})}},{key:"onWindowScroll",value:function(){var a=this.env.eventDispatcher.keyInputHelper.inputState,f=a.positionChangedTime,m=a.scrollLeftWhenChanged;a=a.scrollTopWhenChanged;var r=document.documentElement;500>Date.now()-f&&!og.bowser.firefox?(r.scrollLeft=m,r.scrollTop=a):(this.setProperty("scroll",og.pt(r.scrollLeft,r.scrollTop)),this._cachedWindowBounds=
null,this.updateVisibleWindowMorphs())}},{key:"onWindowResize",value:function(a){var f=this,m,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(x){if(1==x.nextAddress)return x.yield(f.whenRendered(),2);if(3!=x.nextAddress)return f._cachedWindowBounds=null,"elastic"!==f.resizePolicy?x.jumpTo(3):x.yield(f.execCommand("resize to fit window"),3);f.updateVisibleWindowMorphs();m=$jscomp.makeIterator(f.submorphs);for(r=m.next();!r.done;r=m.next())if(v=r.value,"function"===typeof v.onWorldResize)v.onWorldResize(a);
x.jumpToEnd()})}},{key:"relayCommandExecutionToFocusedMorph",value:function(a){if(!a)return null;var f=this.focusedMorph,m=og.arr.findAndGet(og.arr.without([f].concat($jscomp.arrayFromIterable(f.ownerChain())),this),function(r){return og.arr.findAndGet(r.keyhandlers,function(v){return(v=v.eventCommandLookup(r,a))?{command:v,morph:r}:null})})||{};f=m.command;m=m.morph;return f?m.execCommand(f):null}},{key:"visibleBounds",value:function(){return this.env.renderer?this.windowBounds().intersection(this.innerBounds()):
this.innerBounds()}},{key:"visibleBoundsExcludingTopBar",value:function(){return this.visibleBounds()}},{key:"windowBounds",value:function(a){if(this._cachedWindowBounds)return this._cachedWindowBounds;a=this.env.domEnv.window;var f=1/this.scale;return this._cachedWindowBounds=new og.Rectangle(a.scrollX*f,a.scrollY*f,(a.innerWidth||this.width)*f,(a.innerHeight||this.height)*f)}},{key:"logError",value:function(a){console.log(a)}},{key:"relayout",value:function(){}},{key:"defaultMenuItems",value:function(a){return[]}},
{key:"serveFileAsDownload",value:function(a,f){var m=void 0===f?{}:f;f=void 0===m.fileName?"file.txt":m.fileName;m=void 0===m.type?"text/plain":m.type;var r=/^\s*data:([a-z]+\/[a-z]+(;[a-z\-]+=[a-z\-]+)?)?(;base64)?,[a-z0-9!\$&',\(\)\*\+,;=\-\._~:@\/\?%\s]*\s*$/i,v=a instanceof Blob,x=window.document.createElement("a");x.href=og.obj.isString(a)&&a.match(r)?a:window.URL.createObjectURL(v?a:new Blob([a],{type:m}));x.download=f;document.body.appendChild(x);x.click();document.body.removeChild(x)}}],[{key:Symbol.for("__LivelyClassName__"),
get:function(){return"World"}},{key:"properties",get:function(){return{resizePolicy:{doc:"how the world behaves on window size changes 'elastic': resizes to window extent, 'static': leaves its extent unchanged",defaultValue:"elastic",after:["clipMode"],type:"Enum",values:["static","elastic"],set:function(a){this.setProperty("resizePolicy",a);this.clipMode="static"===a?"visible":"hidden";"elastic"==a&&this.execCommand("resize to fit window")}},colorScheme:{derived:!0,get:function(){return window.matchMedia("(prefers-color-scheme: dark)").matches?
"dark":"light"}},showsUserFlap:{defaultValue:!0,set:function(a){var f=this,m=og.resource(document.location.href).query().showsUserFlap;"undefined"!==typeof m&&(a=m);this.setProperty("showsUserFlap",a);System.import("lively.user/morphic/user-ui.js").then(function(r){return r.UserUI[a?"showUserFlap":"hideUserFlap"](f).then(function(){a&&(f.enableComments=!0)})})}},enableComments:{defaultValue:!0,set:function(a){this.setProperty("enableComments",a);a&&og.CommentBrowser.initializeCommentBrowser()}}}}},
{key:"defaultWorld",value:function(){return og.MorphicEnv.default().world}},{key:"loadWorldFromURL",value:function(a,f,m){f=void 0===f?this.defaultWorld():f;m=void 0===m?{}:m;return og.loadWorldFromURL(a,f,m)}},{key:"loadWorld",value:function(a,f,m){f=void 0===f?this.defaultWorld():f;m=void 0===m?{}:m;return og.loadWorld(a,f,m)}},{key:"loadFromCommit",value:function(a,f,m){f=void 0===f?this.defaultWorld():f;m=void 0===m?{}:m;return og.loadWorldFromCommit(a,f,m)}},{key:"loadFromDB",value:function(a,
f,m,r){m=void 0===m?this.defaultWorld():m;r=void 0===r?{}:r;return og.loadWorldFromDB(a,f,m,r)}},{key:"loadFromResource",value:function(a,f,m){f=void 0===f?this.defaultWorld():f;m=void 0===m?{}:m;var r,v,x,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(E){switch(E.nextAddress){case 1:return r=og,v=r.loadWorld,x=og,y=x.loadMorphFromSnapshot,E.yield(a.readJson(),4);case 4:return E.yield(y.call(x,E.yieldResult),3);case 3:return E.yield(v.call(r,E.yieldResult,f,m),2);case 2:return E.return(E.yieldResult)}})}}],
e,{pathInPackage:function(){return"world.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:823,end:12344})}(og.Morph));og.World=ry;og.World=ry;og.World=ry;var bG=function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/world.js"),l=e.hasOwnProperty("Hand")&&"function"===typeof e.Hand?e.Hand:e.Hand=function(a){a&&a[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Pb(l,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){Pb._get(Object.getPrototypeOf(l.prototype),Symbol.for("lively-instance-initialize"),this).call(this,{pointerId:a})}},{key:"__deserialize__",value:function(a,f,m,r){Pb._get(Object.getPrototypeOf(l.prototype),"__deserialize__",this).call(this,a,f,m,r);this.reset()}},{key:"reset",value:function(){this._grabbedMorphProperties=new WeakMap}},{key:"isHand",
get:function(){return!0}},{key:"pointerId",get:function(){return this.getProperty("pointerId")}},{key:"pointerId",set:function(a){this.setProperty("pointerId",a)}},{key:"draggable",get:function(){return!1}},{key:"draggable",set:function(a){}},{key:"grabbable",get:function(){return!1}},{key:"grabbable",set:function(a){}},{key:"grabbedMorphs",get:function(){return this.submorphs}},{key:"carriesMorphs",value:function(){return!!this.grabbedMorphs.length}},{key:"morphsContainingPoint",value:function(a,
f){return f}},{key:"update",value:function(a){this.position=a.position.subXY(window.scrollX,window.scrollY)}},{key:"cancelGrab",value:function(a,f){a=void 0===a?!0:a;var m=this,r,v,x,y,E,F,I,J,P;return $jscomp.asyncExecutePromiseGeneratorProgram(function(N){if(!m.grabbedMorphs.length)return N.return();m.env.eventDispatcher.cancelGrab(m,f);r=[];v=$jscomp.makeIterator(m.grabbedMorphs);for(x=v.next();!x.done;x=v.next())y=x.value,E=m._grabbedMorphProperties.get(y)||{},F=E.prevOwner,I=E.prevIndex,J=E.prevPosition,
P=E.pointerAndShadow,Object.assign(y,P),F?(F.addMorphAt(y,I),a?r.push(y.animate({position:J})):y.position=J):y.remove();return N.return(r.length?Promise.all(r):null)})}},{key:"grab",value:function(a){var f=this;if(og.obj.isArray(a))return a.forEach(function(m){return f.grab(m)});this.withMetaDo({metaInteraction:!0},function(){f._grabbedMorphProperties.set(a,{prevOwner:a.owner,prevPosition:a.position,prevIndex:a.owner?a.owner.submorphs.indexOf(a):-1,pointerAndShadow:og.obj.select(a,["dropShadow","reactsToPointer"])});
a.reactsToPointer=!1;a.dropShadow=!0;f.addMorph(a)});og.signal(this,"grab",a)}},{key:"dropMorphsOn",value:function(a){var f=this;this.withMetaDo({metaInteraction:!0},function(){f.grabbedMorphs.forEach(function(m){try{var r=(f._grabbedMorphProperties.get(m)||{}).pointerAndShadow;Object.assign(m,r);og.signal(f,"drop",m);m.onBeingDroppedOn(f,a)}catch(v){console.error(v),f.world().showError("Error dropping "+m+" onto "+a+":\n"+v.stack),m.owner!==a&&f.world().addMorph(a)}})})}},{key:"findDropTarget",value:function(a,
f,m){var r=this;a=void 0===a?this.globalPosition:a;f=void 0===f?this.grabbedMorphs:f;a=this.world().morphsContainingPoint(a);return og.arr.sortBy(a,function(v){return[v].concat($jscomp.arrayFromIterable(v.ownerChain())).find(function(x){return og.Path("owner.isWorld").get(x)&&x.hasFixedPosition})?0:1}).find("function"===typeof m?function(v,x){return!r.isAncestorOf(v)&&v.acceptsDrops&&!f.includes(v)&&f.every(function(y){return y.wantsToBeDroppedOn(v)})&&m(v,x)}:function(v){return!r.isAncestorOf(v)&&
v.acceptsDrops&&v.ownerChain().every(function(x){return x.visible})&&f.every(function(x){return x.wantsToBeDroppedOn(v)})})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Hand"}},{key:"properties",get:function(){return{hasFixedPosition:{defaultValue:!0},fill:{defaultValue:og.touchInputDevice?og.Color.transparent:og.Color.orange},extent:{defaultValue:og.pt(1,1)},reactsToPointer:{defaultValue:!1},_grabbedMorphProperties:{serialize:!1,initialize:function(){this._grabbedMorphProperties=
new WeakMap}}}}}],e,{pathInPackage:function(){return"world.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:12353,end:16399})}(og.Morph);og.Hand=bG;og.Hand=bG;og.Hand=bG;var Dxa=Object.freeze({__proto__:null,World:ry,Hand:bG}),Ll=lively.FreezerRuntime.recorderFor("lively.morphic/text/position.js");Ll.comparePosition=fW;Ll.lessPosition=
yw;Ll.lessEqPosition=oF;Ll.eqPosition=zw;Ll.minPosition=pF;Ll.maxPosition=qF;Ll.comparePosition=fW;Ll.comparePosition=fW;Ll.lessPosition=yw;Ll.lessPosition=yw;Ll.lessEqPosition=oF;Ll.lessEqPosition=oF;Ll.eqPosition=zw;Ll.eqPosition=zw;Ll.minPosition=pF;Ll.minPosition=pF;Ll.maxPosition=qF;Ll.maxPosition=qF;var kh=lively.FreezerRuntime.recorderFor("lively.morphic/text/range.js");kh.lessPosition=yw;kh.lessEqPosition=oF;kh.eqPosition=zw;kh.minPosition=pF;kh.maxPosition=qF;var UA=Ha("bv",function(b){var e=
lively.FreezerRuntime.recorderFor("lively.morphic/text/range.js"),l=e.hasOwnProperty("Range")&&"function"===typeof e.Range?e.Range:e.Range=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Pb(l,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){var f=a=void 0===a?{start:{row:0,column:0},end:{row:0,column:0}}:a,m=f.start;a=m.row;m=m.column;var r=f.end;f=r.row;r=r.column;if(f<a||f===a&&r<m)m=$jscomp.makeIterator([a,
m,f,r]),f=m.next().value,r=m.next().value,a=m.next().value,m=m.next().value;this.start={row:a,column:m};this.end={row:f,column:r}}},{key:"isRange",get:function(){return!0}},{key:"isEmpty",value:function(){return this.start.row===this.end.row&&this.start.column===this.end.column}},{key:"equals",value:function(a){return a&&a.start&&a.end?kh.eqPosition(this.start,a.start)&&kh.eqPosition(this.end,a.end):!1}},{key:"copy",value:function(){return new kh.Range(this)}},{key:"toLiteral",value:function(){return{start:this.start,
end:this.end}}},{key:"merge",value:function(a){a.isRange||(a=new kh.Range(a));return kh.lessPosition(this.end,a.start)||kh.lessPosition(a.end,this.start)?this:kh.Range.fromPositions(kh.minPosition(this.start,a.start),kh.maxPosition(this.end,a.end))}},{key:"without",value:function(a){a.isRange||(a=new kh.Range(a));var f=kh.Range.compare(this,a);return 0===f?kh.Range.fromPositions(this.start,this.start):5<=Math.abs(f)?this:0>f?kh.Range.fromPositions(this.start,a.start):kh.Range.fromPositions(a.end,
this.end)}},{key:"intersect",value:function(a){a.isRange||(a=new kh.Range(a));var f=kh.Range.compare(this,a),m=0>f?this:a;a=0>f?a:this;switch(Math.abs(f)){case 0:case 1:return new kh.Range(m);case 2:case 3:return new kh.Range(a);case 4:return kh.Range.fromPositions(a.start,m.end);case 5:return kh.Range.at(a.start);case 6:return kh.Range.at(m.end)}}},{key:"subtract",value:function(a){a.isRange||(a=new kh.Range(a));switch(kh.Range.compare(this,a)){case -6:case -5:case 5:case 6:return[new kh.Range(this)];
case -1:case 0:case 2:case 3:return[kh.Range.at(this.start)];case 1:case 4:return[kh.Range.fromPositions(a.end,this.end)];case -4:case -3:return[kh.Range.fromPositions(this.start,a.start)];case -2:return[kh.Range.fromPositions(this.start,a.start),kh.Range.fromPositions(a.end,this.end)]}}},{key:"containsPosition",value:function(a){return kh.lessEqPosition(this.start,a)&&kh.lessEqPosition(a,this.end)}},{key:"toString",value:function(){var a=this.start,f=this.end;return"Range("+a.row+"/"+a.column+" -> "+
f.row+"/"+f.column+")"}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Range"}},{key:"sort",value:function(a){return a.sort(kh.Range.compare)}},{key:"compare",value:function(a,f){var m=a.start,r=a.end,v=f.start,x=f.end;return kh.lessPosition(m,v)?kh.lessPosition(r,v)?-6:kh.eqPosition(r,v)?-5:kh.lessPosition(r,x)?-4:kh.eqPosition(r,x)?-3:-2:kh.eqPosition(m,v)?kh.eqPosition(r,x)?0:kh.lessPosition(r,x)?-1:1:-1*kh.Range.compare(f,a)}},{key:"at",value:function(a){return new this({start:a,
end:a})}},{key:"fromPositions",value:function(a,f){return new this({start:a,end:f})}},{key:"create",value:function(a,f,m,r){return new this({start:{row:a,column:f},end:{row:m,column:r}})}},{key:"isValidLiteral",value:function(a){return a?a.isRange?!0:a.start&&a.end&&"number"===typeof a.start.row&&"number"===typeof a.start.column&&"number"===typeof a.end.row&&"number"===typeof a.end.column:!1}}],e,{pathInPackage:function(){return"text/range.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:108,end:5369})}(void 0));kh.Range=UA;kh.Range=UA;kh.Range=UA;var HQ=new kh.Range;kh.defaultRange=HQ;kh.defaultRange=HQ;kh.defaultRange=HQ;var Bk=lively.FreezerRuntime.recorderFor("lively.morphic/text/selection.js");Bk.lessPosition=yw;Bk.Range=UA;Bk.defaultRange=HQ;Bk.config=em;Bk.string=Th;Bk.arr=Mf;Bk.signal=Xl;var IQ=function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/text/selection.js"),
l=e.hasOwnProperty("Selection")&&"function"===typeof e.Selection?e.Selection:e.Selection=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Pb(l,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a,f){this.textMorph=a;this.initialize(f)}},{key:"isSelection",get:function(){return!0}},{key:"initialize",value:function(a){this._goalX=this._goalColumn=void 0;this._isReverse=!1;var f=Bk.string.newUUID();this.startAnchor=
this.textMorph.addAnchor("selection-start-"+f);this.endAnchor=this.textMorph.addAnchor("selection-end-"+f);this.range=Bk.Range.isValidLiteral(a)?a:Bk.defaultRange;this._cursorVisible=!0;this.cursorBlinkProcess=null}},{key:"isSelection",get:function(){return!0}},{key:"uninstall",value:function(){this.cursorBlinkStop();this.textMorph.removeAnchor(this.startAnchor);this.textMorph.removeAnchor(this.endAnchor)}},{key:"compareRangesForMerge",value:function(a,f){var m=a.start,r=m.row;m=m.column;var v=a.end,
x=v.row;v=v.column;var y=f.start,E=y.row;y=y.column;var F=f.end,I=F.row;F=F.column;return r<E||r===E&&m<y?x<E||x===E&&v<y?"separate":x===E&&v===y?E===I&&y===F?"overlapping":"bordering":"overlapping":r===E&&m===y?x===I&&v===F?"equal":"overlapping":this.compareRangesForMerge(f,a)}},{key:"mergeWith",value:function(a){if(!a||!a.isSelection)return!1;var f=this.compareRangesForMerge(this.range,a.range);if("separate"===f||"bordering"===f)return!1;this.range=this.range.merge(a.range);a.isReverse()!=this.isReverse()&&
this.reverse();return!0}},{key:"range",get:function(){return this._range}},{key:"range",set:function(a){if(a){var f=a,m=f.start;f=f.end;if(void 0!==m&&void 0!==f){var r=this.textMorph.document;"number"===typeof m&&(a.start=m=r.indexToPosition(m));"number"===typeof f&&(a.end=f=r.indexToPosition(f));if(Bk.Range.isValidLiteral(a)){m=r.clipPositionToLines(m);f=r.clipPositionToLines(f);if(this._isReverse=Bk.lessPosition(f,m))f=$jscomp.makeIterator([f,m]),m=f.next().value,f=f.next().value;a.start=m;a.end=
f;a.isRange||(a=new Bk.Range(a));a.equals(this._range)||(this._range=a,this._goalColumn=this.textMorph.lineWrapping?this.textMorph.columnInWrappedLine(this.lead):this.lead.column,this._goalX=this.textMorph.charBoundsFromTextPosition(this.lead).x,this.startAnchor.position=a.start,this.endAnchor.position=a.end,this.textMorph.makeDirty(),Bk.signal(this.textMorph,"selectionChange",this))}}}}},{key:"directedRange",get:function(){return{end:this.lead,start:this.anchor}}},{key:"updateFromAnchors",value:function(){this.range=
{start:this.startAnchor.position,end:this.endAnchor.position}}},{key:"start",get:function(){return this.range.start}},{key:"start",set:function(a){this.range=Bk.Range.fromPositions(a,this.end)}},{key:"end",get:function(){return this.range.end}},{key:"end",set:function(a){this.range=Bk.Range.fromPositions(this.start,a)}},{key:"selectionColor",get:function(){return this.textMorph.selectionColor||"#bed8f7"}},{key:"anchor",get:function(){return this.isReverse()?this.range.end:this.range.start}},{key:"anchor",
set:function(a){this.range={start:a,end:this.lead}}},{key:"lead",get:function(){return this.isReverse()?this.range.start:this.range.end}},{key:"lead",set:function(a){this.range={start:this.anchor,end:a}}},{key:"text",get:function(){return this.textMorph.document.textInRange(this.range)}},{key:"text",set:function(a){this.replace(a)}},{key:"replace",value:function(a,f,m,r){var v=this.range,x=this.textMorph,y=this.isReverse();this.range=x.replace(v,a,f,m,r);y&&this.reverse();return this.range}},{key:"selectedRows",
get:function(){return{first:this.start.row,last:this.end.row}}},{key:"reverse",value:function(){this._isReverse=!this.isEmpty()&&!this._isReverse;return this}},{key:"isReverse",value:function(){return this._isReverse&&!this.isEmpty()}},{key:"isEmpty",value:function(){return this.range.isEmpty()}},{key:"collapse",value:function(a){a=void 0===a?this.start:a;this.range={start:a,end:a};return this}},{key:"collapseToEnd",value:function(){this.collapse(this.end);return this}},{key:"growLeft",value:function(a){var f=
this.textMorph.document,m=f.positionToIndex(this.end);a=Math.min(m,f.positionToIndex(this.start)-a);m=this.isReverse();this.start=f.indexToPosition(a);this._isReverse=m;return this}},{key:"growRight",value:function(a){var f=this.textMorph.document,m=f.positionToIndex(this.start);a=Math.max(m,f.positionToIndex(this.end)+a);m=this.isReverse();this.end=f.indexToPosition(a);this._isReverse=m;return this}},{key:"selectAll",value:function(){this.range={start:{row:0,column:0},end:this.textMorph.document.endPosition};
return this}},{key:"selectLine",value:function(a,f){a=void 0===a?this.lead.row:a;this.includingLineEnd=void 0===f?!1:f;this.range={start:{row:a,column:0},end:{row:a,column:this.textMorph.getLine(a).length}};return this}},{key:"gotoLineEnd",value:function(a){a=void 0===a?this.lead.row:a;a={row:a,column:this.textMorph.getLine(a).length};this.range={start:a,end:a}}},{key:"selectLeft",value:function(a){a=void 0===a?1:a;this.isEmpty()?(this.growLeft(a),this.reverse()):this.isReverse()?this.growLeft(a):
this.growRight(-a);return this}},{key:"selectRight",value:function(a){a=void 0===a?1:a;this.isReverse()?this.growLeft(-a):this.growRight(a);return this}},{key:"selectUp",value:function(a,f){return this.goUp(void 0===a?1:a,f,!0)}},{key:"selectDown",value:function(a,f){return this.selectUp(-(void 0===a?1:a),f)}},{key:"goUp",value:function(a,f,m){a=void 0===a?1:a;m=void 0===m?!1:m;if(0===a)return this;var r=this._goalColumn,v=this._goalX;this.lead=this.textMorph.getPositionAboveOrBelow(a,this.lead,void 0===
f?!1:f,r,v);m||(this.anchor=this.lead);this._goalColumn=r;this._goalX=v;return this}},{key:"goDown",value:function(a,f){return this.goUp(-(void 0===a?1:a),f)}},{key:"goLeft",value:function(a){a=void 0===a?1:a;this.isEmpty()&&this.growLeft(a);this.collapse();return this}},{key:"goRight",value:function(a){a=void 0===a?1:a;this.isEmpty()&&this.growRight(a);this.collapseToEnd();return this}},{key:"cursorVisible",get:function(){return this._cursorVisible&&this.textMorph.isFocused()&&!this.textMorph.rejectsInput()}},
{key:"cursorBlinkStart",value:function(){var a=this;this.cursorBlinkStop();var f=Bk.config.text.cursorBlinkPeriod;if(f){var m=this.textMorph,r=m.env.renderer.getNodeForMorph(m);this.cursorBlinkProcess=setInterval(function(){r||(r=m.env.renderer.getNodeForMorph(m));if(r){a._cursorVisible=!a._cursorVisible;var v=r.className.split(" "),x=v.indexOf("hidden-cursor");a._cursorVisible&&-1<x&&(v.splice(x,1),r.className=v.join(" "));a._cursorVisible||-1!==x||(r.className=[].concat($jscomp.arrayFromIterable(v),
["hidden-cursor"]).join(" "))}},1E3*f)}}},{key:"cursorBlinkStop",value:function(){this.cursorBlinkProcess&&clearInterval(this.cursorBlinkProcess);this.cursorBlinkProcess=null;this._cursorVisible=!0;var a=this.textMorph;if(a=a.env.renderer.getNodeForMorph(a)){var f=a.className.split(" "),m=f.indexOf("hidden-cursor");-1<m&&(f.splice(m,1),a.className=f.join(" "))}}},{key:"toString",value:function(){var a=this.anchor,f=this.lead;return"Selection("+a.row+"/"+a.column+" -> "+f.row+"/"+f.column+")"}}],[{key:Symbol.for("__LivelyClassName__"),
get:function(){return"Selection"}}],e,{pathInPackage:function(){return"text/selection.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:224,end:9243})}(void 0);Bk.Selection=IQ;Bk.Selection=IQ;Bk.Selection=IQ;var JQ=function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/text/selection.js"),l=e.hasOwnProperty("MultiSelection")&&
"function"===typeof e.MultiSelection?e.MultiSelection:e.MultiSelection=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Pb(l,b,[{key:"initialize",value:function(a){this._selections=[new Bk.Selection(this.textMorph,a)]}},{key:"__deserialize__",value:function(a,f){this._selections=[]}},{key:"selections",get:function(){return this._selections}},{key:"selections",set:function(a){var f=this._selections?this._selections.filter(function(m){return!a.includes(m)}):
[];this._selections=a;f.forEach(function(m){return m.uninstall()})}},{key:"isMultiSelection",get:function(){return!0}},{key:"uninstall",value:function(){this.selections.forEach(function(a){return a.uninstall()})}},{key:"defaultSelection",get:function(){return Bk.arr.last(this.selections)}},{key:"removeSelections",value:function(a){a=this.selections.slice(void 0===a?1:a);a.forEach(function(f){return f.uninstall()});this.selections=Bk.arr.withoutAll(this.selections,a)}},{key:"disableMultiSelect",value:function(){Bk.arr.without(this.selections,
this.defaultSelection).forEach(function(a){return a.uninstall()});this.selections=[this.defaultSelection]}},{key:"range",get:function(){return this.defaultSelection.range}},{key:"range",set:function(a){this.disableMultiSelect();this.defaultSelection.range=a}},{key:"updateFromAnchors",value:function(){this.selections.forEach(function(a){return a.updateFromAnchors()})}},{key:"start",get:function(){return this.defaultSelection.start}},{key:"start",set:function(a){this.defaultSelection.start=a}},{key:"end",
get:function(){return this.defaultSelection.end}},{key:"end",set:function(a){this.defaultSelection.end=a}},{key:"anchor",get:function(){return this.defaultSelection.anchor}},{key:"anchor",set:function(a){this.defaultSelection.anchor=a}},{key:"lead",get:function(){return this.defaultSelection.lead}},{key:"lead",set:function(a){this.defaultSelection.lead=a}},{key:"text",get:function(){return this.selections.map(function(a){return a.text}).join("\n")}},{key:"text",set:function(a){this.selections.forEach(function(f){return f.text=
a})}},{key:"selectedRows",get:function(){return this.defaultSelection.selectedRows}},{key:"reverse",value:function(){this.defaultSelection.reverse()}},{key:"isReverse",value:function(){return this.defaultSelection.isReverse()}},{key:"isEmpty",value:function(){return this.defaultSelection.isEmpty()}},{key:"collapse",value:function(a){this.defaultSelection.collapse(a);return this}},{key:"collapseToEnd",value:function(){this.defaultSelection.collapseToEnd();return this}},{key:"growLeft",value:function(a){this.defaultSelection.growLeft(a);
return this}},{key:"growRight",value:function(a){this.defaultSelection.growRight(a);return this}},{key:"selectAll",value:function(){this.disableMultiSelect();this.defaultSelection.selectAll();return this}},{key:"selectLine",value:function(a,f){this.includingLineEnd=f;this.defaultSelection.selectLine(a,f);return this}},{key:"gotoLineEnd",value:function(a){this.defaultSelection.gotoLineEnd(a)}},{key:"selectLeft",value:function(a){this.defaultSelection.selectLeft(a);return this}},{key:"selectRight",
value:function(a){this.defaultSelection.selectRight(a);return this}},{key:"selectUp",value:function(a,f){this.defaultSelection.selectUp(a,f);return this}},{key:"selectDown",value:function(a,f){this.defaultSelection.selectDown(a,f);return this}},{key:"goUp",value:function(a,f){return this.defaultSelection.goUp(a,f)}},{key:"goDown",value:function(a,f){return this.defaultSelection.goDown(a,f)}},{key:"goLeft",value:function(a){return this.defaultSelection.goLeft(a)}},{key:"goRight",value:function(a){return this.defaultSelection.goRight(a)}},
{key:"cursorVisible",get:function(){return this.defaultSelection.cursorVisible}},{key:"style",set:function(a){this.defaultSelection.style=a}},{key:"getTextAttributes",value:function(){return this.defaultSelection.getTextAttributes()}},{key:"toString",value:function(){return"MultiSelection("+this.selections.join(", ")+")"}},{key:"mergeSelections",value:function(){for(var a=this.selections.slice(),f=a.length-1;0<=f;f--)for(var m=a.length-1;0<=m;m--)if(f!==m&&a[m].mergeWith(a[f])){a.splice(f,1);break}this.selections=
a}},{key:"ranges",get:function(){return this.selections.map(function(a){return a.range})}},{key:"ranges",set:function(a){for(var f=0;f<a.length;f++){var m=this.selections[f];m?m.range=a[f]:this.addRange(a[f],!1)}this.removeSelections(f);this.mergeSelections()}},{key:"addRange",value:function(a,f){f=void 0===f?!0:f;this.selections.push(new Bk.Selection(this.textMorph,a));f&&this.mergeSelections();return Bk.arr.last(this.selections).range}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"MultiSelection"}}],
e,{pathInPackage:function(){return"text/selection.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:9252,end:13920})}(Bk.Selection);Bk.MultiSelection=JQ;Bk.MultiSelection=JQ;Bk.MultiSelection=JQ;var Qh=lively.FreezerRuntime.recorderFor("lively.morphic/text/attributes.js");Qh.shallowEquals=gW;Qh.concatAttributePair=NN;Qh.joinTextAttributes=
ON;Qh.splitTextAndAttributesAt=PN;Qh.splitTextAndAttributesAtColumns=QN;Qh.concatTextAndAttributes=RN;Qh.modifyAttributesInRange=SN;Qh.textAndAttributesWithSubRanges=TN;Qh.textAndAttributesDo=function(b,e){for(var l=0;l<b.length;l+=2)e(b[l],b[l+1])};Qh.splitTextAndAttributesIntoLines=oI;Qh.eqPosition=zw;Qh.lessPosition=yw;Qh.shallowEquals=gW;Qh.shallowEquals=gW;Qh.concatAttributePair=NN;Qh.concatAttributePair=NN;Qh.joinTextAttributes=ON;Qh.joinTextAttributes=ON;Qh.splitTextAndAttributesAt=PN;Qh.splitTextAndAttributesAt=
PN;Qh.splitTextAndAttributesAtColumns=QN;Qh.splitTextAndAttributesAtColumns=QN;Qh.concatTextAndAttributes=RN;Qh.concatTextAndAttributes=RN;Qh.modifyAttributesInRange=SN;Qh.modifyAttributesInRange=SN;Qh.textAndAttributesWithSubRanges=TN;Qh.textAndAttributesWithSubRanges=TN;Qh.splitTextAndAttributesIntoLines=oI;Qh.splitTextAndAttributesIntoLines=oI;var ke=lively.FreezerRuntime.recorderFor("lively.morphic/text/document.js");ke.arr=Mf;ke.num=Um;ke.string=Th;ke.lessEqPosition=oF;ke.minPosition=pF;ke.maxPosition=
qF;ke.lessPosition=yw;ke.eqPosition=zw;ke.concatTextAndAttributes=RN;ke.splitTextAndAttributesAtColumns=QN;ke.splitTextAndAttributesIntoLines=oI;ke.joinTextAttributes=ON;ke.modifyAttributesInRange=SN;ke.concatAttributePair=NN;ke.splitTextAndAttributesAt=PN;ke.objectReplacementChar="\ufffd";ke.objectReplacementChar="\ufffd";ke.objectReplacementChar="\ufffd";ke.defaultOptions={maxLeafSize:3,minLeafSize:2,leafSplit:.5,maxNodeSize:10,minNodeSize:5,nodeSplit:.5};(function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/text/document.js"),
l=e.hasOwnProperty("TreeNode")&&"function"===typeof e.TreeNode?e.TreeNode:e.TreeNode=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Pb(l,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){this.parent=a}},{key:"root",get:function(){return this.parent?this.parent.root:this}},{key:"isRoot",get:function(){return!this.parent}},{key:"withParents",value:function(){for(var a=this,f=[];a;)f.push(a),a=a.parent;
return f}},{key:"traverse",value:function(a){var f=[a.call(null,this)];if(this.isLeaf)return f;for(var m=0;m<this.children.length;m++)f.push.apply(f,$jscomp.arrayFromIterable(this.children[m].traverse(a)));return f}},{key:"consistencyCheck",value:function(){var a=[],f=this.isRoot,m=this.isLeaf,r=this.children,v=this.size,x=this.stringSize,y=this.height,E=this.width,F=this.options,I=F.maxLeafSize,J=F.maxNodeSize,P=F.minLeafSize;F=F.minNodeSize;f||0!==v||a.push({error:"size of "+this+" expected to be > 0!"});
if(!Array.isArray(r))return a.push({error:this+".children is not an array but "+r}),a;var N=ke.arr.sum(ke.arr.pluck(r,"size"));N!=v&&a.push({error:"Sum of child sizes is not size of "+this+": "+N+" != "+v});v=ke.arr.sum(ke.arr.pluck(r,"stringSize"));v!=x&&a.push({error:"Sum of child stringSize is not stringSIze of "+this+": "+v+" != "+x});x=ke.arr.sum(ke.arr.pluck(r,"height"));Number.parseInt(x)!=Number.parseInt(y)&&a.push({error:"Sum of child Height is not Height of "+this+": "+x+" != "+y});y=r.length?
Math.max.apply(null,ke.arr.pluck(r,"width")):0;(r.find(function(Y){return Y.isLine&&Y.hasEstimatedExtent})?Number.parseInt(y)>Number.parseInt(E):Number.parseInt(y)!=Number.parseInt(E))&&a.push({error:"max width of children of "+this+" is not node width: "+y+" != "+E});E=m?I:J;!f&&r.length>E&&a.push({error:"children count of "+this+" expected to be between "+(m?P:F)+" and "+E+" but is "+r.length});for(f=0;f<r.length;f++)(P=r[f])?(m&&!P.isLine?a.push({error:"child "+f+" of leaf "+this+" is not a line!"}):
!m&&P.isLine&&a.push({error:"child of non-leaf "+this+" is a line!"}),this!==P.parent&&a.push({error:"child.parent is "+P.parent+" but should be "+this})):a.push({error:"child "+f+" of "+this+" is nullish!"});a.push.apply(a,$jscomp.arrayFromIterable(ke.arr.flatmap(r,function(Y){return Y.consistencyCheck()})));return a}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"TreeNode"}}],e,{pathInPackage:function(){return"text/document.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:1422,end:4636})})(void 0);(function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/text/document.js"),l=e.hasOwnProperty("InnerTreeNode")&&"function"===typeof e.InnerTreeNode?e.InnerTreeNode:e.InnerTreeNode=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Pb(l,
b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){Pb._get(Object.getPrototypeOf(l.prototype),Symbol.for("lively-instance-initialize"),this).call(this,a.parent);this.options=a.options;this.children=a.children;this.size=a.size;this.stringSize=a.stringSize;this.height=a.height;this.width=a.width;this.isLeaf=!0}},{key:"isNode",get:function(){return!0}},{key:"resize",value:function(a,f,m){this.size+=a;this.height+=f;this.stringSize+=m;for(var r=0,v=0;v<this.children.length;v++){var x=
this.children[v].width;x>r&&(r=x)}this.width=r;this.parent&&this.parent.resize(a,f,m)}},{key:"lines",value:function(a){a=void 0===a?[]:a;if(this.isLeaf)return a.push.apply(a,$jscomp.arrayFromIterable(this.children)),a;for(var f=0;f<this.children.length;f++)this.children[f].lines(a);return a}},{key:"findRow",value:function(a){if(0>a||a>=this.size)return null;if(this.isLeaf)return this.children[a];for(var f=0;f<this.children.length;f++){var m=this.children[f],r=m.size;if(a<r)return m.findRow(a);a-=
r}return null}},{key:"findLineByVerticalOffset",value:function(a,f,m){f=void 0===f?0:f;m=void 0===m?0:m;if(0>a||a>this.height)return null;for(var r=0;r<this.children.length;r++){var v=this.children[r],x=v.height;if(a<=x)return this.isLeaf?{line:v,offset:a,y:f,row:m}:v.findLineByVerticalOffset(a,f,m);a-=x;f+=x;m+=v.size}return null}},{key:"computeVerticalOffsetOf",value:function(a,f){f=void 0===f?0:f;if(0>a||a>=this.size)return console.warn("strange row in computeVerticalOffsetOf: "+a),f;if(this.isLeaf){for(var m=
0;m<Math.min(a,this.children.length);m++)f+=this.children[m].height;return f}for(m=0;m<this.children.length;m++){var r=this.children[m],v=r.size;if(a<v)return r.computeVerticalOffsetOf(a,f);a-=v;f+=r.height}return f}},{key:"ensureLine",value:function(a){a||(a="");var f="string"===typeof a;return!f&&a.isLine?(a.parent=this,a):new ke.Line({parent:this,width:f?0:a.width||0,height:f?0:a.height||0,textAndAttributes:f?[a,null]:a.textAndAttributes||[a.text||"",null]})}},{key:"insert",value:function(a,f){f=
void 0===f?this.size:f;var m=this.children,r=this.options;if(this.isLeaf){var v=[],x=0,y=0;for(r=0;r<a.length;r++){var E=this.ensureLine(a[r]);v.push(E);x+=E.height;y+=E.stringSize;m.splice(f++,0,E)}this.resize(v.length,x,y);this.balanceAfterGrowth();return v}0===m.length&&m.push(new ke.InnerTreeNode({parent:this,children:[],size:0,stringSize:0,width:0,height:0,options:r}));for(r=0;r<m.length;r++){v=m[r];x=v.size;if(f<=x)return v.insert(a,f);f-=x}f=m[r-1];return f.insert(a,f.size)}},{key:"withParentChainsUpToCommonParentDo",
value:function(a,f,m){for(var r=this.withParents(),v,x=0;a;){if(r.includes(a)){v=a;break}f(a,x++);a=a.parent}f=r.indexOf(v);0>f&&(f=r.length);r=r.slice(0,f);for(f=0;f<r.length;f++)m(r[f],f)}},{key:"findLineWithTextIndex",value:function(a,f){f=void 0===f?0:f;if(this.isLeaf){for(var m=0;m<this.children.length;m++){var r=this.children[m],v=r.stringSize;if(a<v)return{line:r,column:a,row:f};a-=v;f++}a=ke.arr.last(this.children);return{line:a,row:f-1,column:a.stringSize-1}}for(r=m=0;r<this.children.length;r++){v=
this.children[r];var x=v.stringSize;if(a<m+x)return v.findLineWithTextIndex(a-m,f);f+=v.size;m+=x}return ke.arr.last(this.children).findLineWithTextIndex(a-m)}},{key:"findLeafs",value:function(a,f,m){m=void 0===m?0:m;if(a>m+this.size||f<m)return[];if(this.isLeaf){a=Math.max(0,a-m);var r=this.children.length-1;f=Math.min(r,f-m);m=!1;0===a&&f===r&&(m=!0,f=r);return[{node:this,firstLine:a,lastLine:f,full:m}]}r=[];for(var v=0;v<this.children.length;v++){var x=this.children[v];r.push.apply(r,$jscomp.arrayFromIterable(x.findLeafs(a,
f,m)));m+=x.size}return r}},{key:"removeFromToInRoot",value:function(a,f,m){var r=this;if(!this.isRoot)throw Error("removeFromTo() should be called on the root node");a>f&&(f=$jscomp.makeIterator([f,a]),a=f.next().value,f=f.next().value);var v=this.size,x=this.options.minLeafSize,y=this.findLeafs(a,f),E=y.shift();f=y.pop();var F=[],I=!1,J=!1;if(!(a>=v)){f&&E.node===f.node&&(f=null);E.full?(m&&m.log("Removing complete first line "+E),y.push(E)):I=E.node.children.length-(E.lastLine-E.firstLine+1)<x;
f&&(f.full?(m&&m.log("Removing complete last line "+f),y.push(f)):(J=f,J=J.node.children.length-(J.lastLine-J.firstLine+1)<x));if(I||J){var P=(P=E.node.children[0].prevLine())?P.parent:null;var N=(N=ke.arr.last(f?f.node.children:E.node.children).nextLine())?N.parent:null}for(a=0;a<y.length;a++){x=y[a].node;v=x.children.length;for(var Y=0,W=0,da=0;da<v;da++){var va=x.children[da];Y+=va.height;W+=va.stringSize;va.parent=null}x.children.length=0;x.resize(-v,-Y,-W);if(v=x.parent)x.parent=null,v.children.splice(v.children.indexOf(x),
1),F.includes(v)||F.push(v)}if(!E.full){x=E.firstLine;y=E.node;a=E.lastLine-x+1;x=y.children.splice(x,a);for(W=Y=v=0;W<x.length;W++)da=x[W],v+=da.height,Y+=da.stringSize,da.parent=null;y.resize(-a,-v,-Y)}if(f&&!f.full){a=f;x=a.firstLine;y=a.node;a=a.lastLine-x+1;x=y.children.splice(x,a);for(W=Y=v=0;W<x.length;W++)da=x[W],v+=da.height,Y+=da.stringSize,da.parent=null;y.resize(-a,-v,-Y)}m&&m.dump(""+this.print(!1));I&&E.node.balanceByMergeOrTheft(P,!f||f.full?N:f.node,m);f&&J&&f.node.root===this&&(J=
!0,P=E.full||!E.node.parent?P:E.node,I&&(f.node.root!==this&&(J=!1),P&&P.root!==this&&(P=null),N&&N.root!==this&&(N=null)),J&&f.node.balanceByMergeOrTheft(P,N,m));F.forEach(function(za){return za.root===r&&za.balanceAfterShrink(m)})}}},{key:"balanceByMergeOrTheft",value:function(a,f,m){var r=this,v=this.children,x=this.options,y=this.isLeaf,E=y?x.maxLeafSize:x.maxNodeSize;x=y?x.minLeafSize:x.minNodeSize;y=a&&a.children.length+v.length<=E;E=!y&&f&&f.children.length+v.length<=E;var F=y?a:E?f:null;if(F){m&&
m.log("[balanceByMergeOrTheft] merging "+this+" "+(y?"left":"right")+" into "+F);var I=this.size,J=this.width,P=this.height,N=this.stringSize;v.forEach(function(R){return R.parent=F});y?F.children.push.apply(F.children,$jscomp.arrayFromIterable(v)):F.children.unshift.apply(F.children,$jscomp.arrayFromIterable(v));this.width=v.length=0;this.withParentChainsUpToCommonParentDo(F,function(R){J>R.width&&(R.width=J);R.height+=P;R.size+=I;R.stringSize+=N},function(R){if(J===R.width)for(var X=0;X<R.children.length;X++){var ja=
R.children[X];ja.width>R.width&&(R.width=ja.width)}R.height-=P;R.size-=I;R.stringSize-=N})}else{y=a?Math.ceil((a.children.length-x)/2):0;var Y=f?Math.ceil((f.children.length-x)/2):0;if((E=0<y&&y>=Y)||!E&&0<Y){x=E?a.children.splice(a.children.length-y,y):f.children.splice(0,Y);var W=E?a:f,da=E?y:Y,va=0,za=0,L=0,Z=0;m&&m.log("[balanceByMergeOrTheft] "+this+" steals from "+(E?"left":"right")+" node "+W+" "+da+" nodes");for(a=0;a<x.length;a++)va+=x[a].height,za+=x[a].stringSize,L=Math.max(L,x[a].width);
for(a=0;a<W.children.length;a++)Z=Math.max(Z,W.children[a].width);this.withParentChainsUpToCommonParentDo(W,function(R){if(Z<L&&Z<R.width){if(R===W)R.width=Z;else{for(var X=!1,ja=0;ja<R.children.length;ja++)if(R.children[ja].width>Z){X=!0;break}X||(R.width=Z)}R.width=L}R.height-=va;R.size-=da;R.stringSize-=za},function(R){R.width<L&&(R.width=L);R.height+=va;R.size+=da;R.stringSize+=za});x.forEach(function(R){return R.parent=r});E?this.children.unshift.apply(this.children,$jscomp.arrayFromIterable(x)):
this.children.push.apply(this.children,$jscomp.arrayFromIterable(x))}}a=this.parent;0===v.length&&(this.parent=null,a&&a.children.splice(a.children.indexOf(this),1));a&&a.balanceAfterShrink(m)}},{key:"balanceAfterGrowth",value:function(){var a=this.isLeaf,f=this.size,m=this.stringSize,r=this.parent,v=this.children,x=this.width,y=this.height,E=this.options,F=a?E.maxLeafSize:E.maxNodeSize;if(v.length>F){r||(r=this.parent=new ke.InnerTreeNode({parent:null,children:[this],size:f,width:x,height:y,stringSize:m,
options:E}),r.isLeaf=!1);var I=Math.floor(v.length/2),J=0,P=0,N=f=0,Y=m=0,W=x=0;for(y=0;J<I;J++)P+=v[J].size,N=Math.max(N,v[J].width),Y+=v[J].height,W+=v[J].stringSize;for(;J<v.length;J++)f+=v[J].size,m=Math.max(m,v[J].width),x+=v[J].height,y+=v[J].stringSize;this.children=v.slice(0,I);this.size=P;this.width=N;this.height=Y;this.stringSize=W;J=r.children.indexOf(this);v=v.slice(I);var da=new ke.InnerTreeNode({parent:r,children:v,size:f,height:x,width:m,stringSize:y,options:E});da.isLeaf=a;v.forEach(function(va){return va.parent=
da});r.children.splice(J+1,0,da);da.children.length>F&&da.balanceAfterGrowth();this.children.length>F&&this.balanceAfterGrowth();this.parent.balanceAfterGrowth()}}},{key:"balanceAfterShrink",value:function(a){var f=this,m=this.isLeaf,r=this.parent,v=this.children,x=this.options,y=x.maxLeafSize,E=x.maxNodeSize,F=x.minLeafSize,I=x.minNodeSize;x=m?y:E;F=m?F:I;I=!1;for(var J=v.length;J--;)0===v[J].size&&(v.splice(J,1),I=!0,a&&a.log("[balanceAfterShrink] "+this+" removes node "+J+" b/c it is empty, remaining children: "+
v.length+" (min: "+F+", max: "+x+")"));I&&a&&a.dump(""+this.root.print(!1));if(v.length>=F)r&&r.balanceAfterShrink(a);else if(0===v.length)r&&r.balanceAfterShrink(a);else if(m)r&&(1===r.children.length?(a&&a.log("[balanceAfterShrink] "+this+" is the only child - will remove it's parent and take its position"),a&&a.dump(""+this.root.print(!1)),this.parent=null,r.children.length=0,r.children.push.apply(r.children,$jscomp.arrayFromIterable(v)),v.forEach(function(N){return N.parent=r}),r.isLeaf=!0):(y=
(y=v[0].prevLine())&&y.parent,v=ke.arr.last(v).nextLine(),this.balanceByMergeOrTheft(y,v&&v.parent,a))),this.parent&&this.parent.balanceAfterShrink(a);else{m=[];x=I=F=!1;for(J=0;J<v.length;J++){var P=v[J];!F&&P.isLeaf&&(F=!0);I||P.isLeaf||(I=!0);if(F&&I){x=!0;break}m.push.apply(m,$jscomp.arrayFromIterable(P.children))}!x&&m.length<=(F?y:E)&&(a&&a.log("[balanceAfterShrink] "+this+" grandChildren.length is "+m.length+" and <= max size so it is removing all its children and adopting their children"),
v.forEach(function(N){return N.parent=null}),m.forEach(function(N){return N.parent=f}),v.length=0,v.push.apply(v,$jscomp.arrayFromIterable(m)),this.isLeaf=F,a&&a.log("[balanceAfterShrink] "+v.join("\n")),a&&a.dump(""+this.root.print(!1)));r&&r.balanceAfterShrink(a)}}},{key:"print",value:function(a,f,m,r){a=void 0===a?!0:a;f=void 0===f?0:f;m=void 0===m?0:m;var v=this.isLeaf,x=this.size,y=this.stringSize,E=this.width,F=this.height,I=this.children;r=r||(v?"leaf":"node");y=""+" ".repeat(m)+r+" (size: "+
x+" width: "+Math.round(E)+" height: "+Math.round(F)+" text length: "+y+")";if(I.length){E="";f+=x;for(x=I.length;x--;)F=I[x],f-=F.size,E="\n"+F.print(a,f,m+1)+E;y+=E}return y}},{key:"toString",value:function(){var a=this.isLeaf,f=this.size,m=this.width,r=this.height,v=this.children;return"node ("+(a?"leaf, ":"")+(a&&v.length?"rows: "+v[0].row+"-"+ke.arr.last(v).row+" ":"")+("size: "+f+" "+m+"x"+r+")")}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"InnerTreeNode"}}],e,{pathInPackage:function(){return"text/document.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:4638,end:29081})})(ke.TreeNode);var FZ=function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/text/document.js"),l=e.hasOwnProperty("Line")&&"function"===typeof e.Line?e.Line:e.Line=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return Pb(l,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){Pb._get(Object.getPrototypeOf(l.prototype),Symbol.for("lively-instance-initialize"),this).call(this,a.parent);this.textAndAttributes=ke.joinTextAttributes(a.textAndAttributes||[]);this._text="";this._textAttributes=null;this.width=a.width;this.height=a.height;this.hasEstimatedExtent=!1;this.modeState=null;this.textAlign="left";this.lineHeight=null;this.marginBottom=this.marginTop=0}},{key:"isLine",get:function(){return!0}},
{key:"size",get:function(){return 1}},{key:"stringSize",get:function(){return this.text.length+1}},{key:"text",get:function(){if(this._text)return this._text;for(var a="",f=this.textAndAttributes,m=0;m<f.length;m+=2)a+="string"===typeof f[m]?f[m]:ke.objectReplacementChar;return this._text=a}},{key:"textAttributes",get:function(){if(this._textAttributes)return this._textAttributes;for(var a=[],f=this.textAndAttributes,m=0;m<f.length;m+=2){var r=f[m+1];r&&!a.includes(r)&&a.push(r)}return this._textAttributes=
a}},{key:"row",get:function(){if(!this.parent)return 0;var a=this.withParents();if(1===a.length)return a.children.indexOf(this);for(var f=0,m=a.length-1;1<=m;m--)for(var r=a[m],v=r.children.indexOf(a[m-1]),x=0;x<v;x++)f+=r.children[x].size;return f}},{key:"nextLine",value:function(){var a=this.parent;return a?(a=a.children[a.children.indexOf(this)+1])?a:this.root.findRow(this.row+1):null}},{key:"prevLine",value:function(){var a=this.parent;return a?(a=a.children[a.children.indexOf(this)-1])?a:this.root.findRow(this.row-
1):null}},{key:"changeExtent",value:function(a,f,m){var r=this.height,v=this.width,x=this.parent;this.width=a;this.height=f;this.hasEstimatedExtent=void 0===m?!1:m;if(v!==a||r!==f)for(f-=r;x;){x.height+=f;if(a>=x.width)x.width=a;else if(v===x.width){for(r=m=0;r<x.children.length;r++){var y=x.children[r].width;y>m&&(m=y)}x.width=m}x=x.parent}return this}},{key:"changeText",value:function(a,f){f=void 0===f?null:f;var m=this.parent,r=this.height,v=a.length+1-(this.text.length+1),x=0;this.modeState&&
this.modeState._string!==a&&(this.modeState=null);this.height||this.width?this.hasEstimatedExtent=!0:(this.width=this.height=0,this.hasEstimatedExtent=!1,x=-r);this._text=a;this._textAttributes=null;this.textAndAttributes=f||(f=[a,null]);if(0!==f.length%2)throw Error("textAndAttributes list is strange, expected flat pairs of text/attr");for(a=0;a<f.length;a+=2)if((r=f[a+1])&&Array.isArray(r))throw Error("invalid attr part of text/attr pair, its an array: "+r);for(;m;){m.stringSize+=v;m.height+=x;
for(a=f=0;a<m.children.length;a++)r=m.children[a].width,r>f&&(f=r);m.width=f;m=m.parent}return this}},{key:"changeTextAndAttributes",value:function(a){a=ke.joinTextAttributes(a);for(var f="",m=0;m<a.length;m+=2)f+="string"===typeof a[m]?a[m]:ke.objectReplacementChar;return this.changeText(f,a)}},{key:"print",value:function(a,f,m){a=void 0===a?!0:a;f=void 0===f?0:f;f=" ".repeat(void 0===m?0:m)+"line "+f+" (size: 1 width: "+Math.round(this.width)+" height: "+Math.round(this.height)+" text length: "+
this.stringSize;m=ke.arr.toTuples(this.textAndAttributes,2).map(function(r){var v=$jscomp.makeIterator(r);r=v.next().value;v=v.next().value;return("string"===typeof r?'"'+r+'"':String(r))+(","+JSON.stringify(v))}).join(",");return f+(a?")":" content: ["+m+"])")}},{key:"toString",value:function(){var a=this.width,f=this.height;return'line ("'+ke.string.truncate(this._text,30)+'", '+a+"x"+f+")"}},{key:"consistencyCheck",value:function(){var a=[];if(!this.parent)return a.push("line "+this+" has no parent!"),
a}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Line"}}],e,{pathInPackage:function(){return"text/document.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:29090,end:35532})}(ke.TreeNode);ke.Line=FZ;ke.Line=FZ;ke.Line=FZ;ke.documentFuzzier={makeString:function(b,e){b=void 0===b?5:b;e=void 0===e?50:e;var l=ke.arr.range(65,
90).map(function(a){return String.fromCharCode(a)}).join("");l+=l.toLowerCase()+" \n";b=ke.num.random(b,e);return ke.arr.shuffle(Array.from(l.repeat(Math.ceil(b/l.length)))).slice(0,b).join("")},randomDocPosition:function(b){var e=0===b.rowCount?0:ke.num.random(0,b.rowCount-1);b=ke.num.random(0,b.getLineString(e).length-1);return{row:e,column:b}},insertRandom:function(b,e,l,a){l=[this.makeString(l,a),null];a=this.randomDocPosition(b);e.push(["insertTextAndAttributes",l,a]);b.insertTextAndAttributes(l,
a)},deleteRandom:function(b,e,l,a){l={start:this.randomDocPosition(b),end:this.randomDocPosition(b)};e.push(["remove",l]);b.remove(l)},maybe:function(){return.5>Math.random()},replay:function(b,e,l,a){l=void 0===l?!1:l;a=void 0===a?!1:a;l&&(b.debug=l,l=b.debugHelper(),l.reset());var f=new ke.Document([""]);e.forEach(function(m,r){var v=$jscomp.makeIterator(m);m=v.next().value;v=$jscomp.arrayFromIterator(v);if(a&&r==e.length-1)debugger;f[m].apply(f,[].concat($jscomp.arrayFromIterable(v),[l]))});b.changeDocument(f)},
run:function(){var b=Date.now(),e=0,l=new ke.Document([],{maxLeafSize:3,minLeafSize:2,leafSplit:.5,maxNodeSize:10,minNodeSize:5,nodeSplit:.5}),a=[];try{for(;1E4>l.stringSize&&1E4>e++;)this.maybe()?this.deleteRandom(l,a):this.insertRandom(l,a),l.consistencyCheck()}catch(m){var f=m}b=Date.now()-b;return{error:f,doc:l,actions:a,time:b}}};ke.newline="\n";ke.newlineLength=1;var wda=function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/text/document.js"),l=e.hasOwnProperty("Document")&&"function"===
typeof e.Document?e.Document:e.Document=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Pb(l,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a,f){this.options=Object.assign({},ke.defaultOptions,{},f);this.lines=a}},{key:"balance",value:function(){this.root.balanceAfterGrowth();this.fixRoot()}},{key:"fixRoot",value:function(){var a=this.root.root;this.root!==a&&(this.root=a)}},{key:"height",get:function(){return this.root.height}},
{key:"width",get:function(){return this.root.width}},{key:"rowCount",get:function(){return this.root.size}},{key:"stringSize",get:function(){return 0===this.rowCount?0:this.root.stringSize-1}},{key:"lineStrings",get:function(){return this.lines.map(function(a){return a.text})}},{key:"lines",get:function(){return this.root.lines()}},{key:"lines",set:function(a){a=void 0===a?[]:a;this.root=new ke.InnerTreeNode({parent:null,children:[],size:0,width:0,height:0,stringSize:0,options:this.options});this.insertLines(a)}},
{key:"clipRow",value:function(a){return Math.max(0,Math.min(a,this.rowCount-1))}},{key:"clipPositionToLines",value:function(a){var f=a.row;a=a.column;var m=this.rowCount;if(0===m)return{row:0,column:0};0>f?f=0:f>=m&&(f=m-1,a=Infinity);0>a?a=0:(m=this.getLineString(f).length,a>m&&(a=m));return{row:f,column:a}}},{key:"findLineByVerticalOffset",value:function(a){return this.root.findLineByVerticalOffset(a)}},{key:"computeVerticalOffsetOf",value:function(a){return this.root.computeVerticalOffsetOf(a)}},
{key:"getLine",value:function(a){return this.root.findRow(this.clipRow(a))}},{key:"getLineString",value:function(a){return(a=this.getLine(a))?a.text:""}},{key:"insertLine",value:function(a,f){f=void 0===f?this.root.rowCount:f;return this.insertLines([a],f)[0]}},{key:"removeLine",value:function(a){this.root.removeFromToInRoot(a,a)}},{key:"removeLines",value:function(a,f,m){this.root.removeFromToInRoot(a,f,m)}},{key:"insertLines",value:function(a,f){a=this.root.insert(a,f);this.fixRoot();return a}},
{key:"textString",get:function(){var a="",f=this.lines;if(!f.length)return a;for(var m=0;m<f.length-1;m++)a=a+f[m].text+ke.newline;return a+=f[m].text}},{key:"textString",set:function(a){this.lines=a.split(ke.newline)}},{key:"endPosition",get:function(){var a=this.rowCount;if(0===a)return{row:0,column:0};--a;var f=this.getLine(a);return{row:a,column:f.stringSize-1}}},{key:"textAndAttributes",get:function(){var a=this.lines;if(!a.length)return[];for(var f=ke.newline,m=a.length-1,r=a[0].textAndAttributes.slice(),
v=1;v<=m;v++){var x=a[v],y=r.pop()||null,E=r.pop()||"";x=x.textAndAttributes;r.push.apply(r,$jscomp.arrayFromIterable(ke.concatAttributePair(E,y,x[0]||"",x[1]||null,f)));for(y=2;y<x.length;y+=2)r.push(x[y],x[y+1])}return r}},{key:"textAndAttributes",set:function(a){this.lines=ke.splitTextAndAttributesIntoLines(a,ke.newline).map(function(f){return new ke.Line({parent:null,width:0,height:0,textAndAttributes:f})})}},{key:"getTextAndAttributesOfLine",value:function(a){return this.getLine(a).textAndAttributes}},
{key:"setTextAndAttributesOfLine",value:function(a,f){this.getLine(a).changeTextAndAttributes(f);return f}},{key:"mixinTextAttribute",value:function(a,f){ke.modifyAttributesInRange(this,f,function(m,r){m._textAttributes=null;return Object.assign({},r,a)})}},{key:"setTextAttribute",value:function(a,f){ke.modifyAttributesInRange(this,f,function(m,r){m._textAttributes=null;return a})}},{key:"mixoutTextAttribute",value:function(a,f){f=void 0===f?{start:{row:0,column:0},end:this.endPosition}:f;if(a){var m=
Object.keys(a);ke.modifyAttributesInRange(this,f,function(r,v){if(!v)return v;r._textAttributes=null;r=0;var x={},y;for(y in v)m.includes(y)||(x[y]=v[y],r++);return 0===r?null:x})}}},{key:"setTextAttributesWithSortedRanges",value:function(a){function f(J,P,N,Y){Y=void 0===Y?0:Y;var W=0,da=P.length;if(0>=N.length-Y)return{attributes:[P,null],index:Y};for(var va=[];Y<N.length&&!(W>=da);Y+=2){var za=N[Y],L=za.start;za=za.end;var Z=N[Y+1];if(za.row<J)W=0;else{L.row===J&&W<L.column&&(va.push(P.slice(W,
L.column),null),W=L.column);if(za.row>J){va.push(Z.embeddedMorph||P.slice(W,da),Z);W=da;break}W<za.column&&va.push(Z.embeddedMorph||P.slice(W,za.column),Z);W=za.column}}W<da&&va.push(P.slice(W,da),null);return{attributes:va,index:Y}}if(!(2>a.length)){var m=a[0].start,r=a.slice(-2)[0].end,v=this.getLine(m.row);if(m.row===r.row){if(!(m.column>=r.column)){var x=f(m.row,v.text,a,0).attributes,y=$jscomp.makeIterator(ke.splitTextAndAttributesAtColumns(v.textAndAttributes,[m.column,r.column]));a=y.next().value;
y.next();y=y.next().value;r=$jscomp.makeIterator(ke.splitTextAndAttributesAtColumns(x,[m.column,r.column]));r.next();m=r.next().value;r.next();v.changeTextAndAttributes([].concat($jscomp.arrayFromIterable(a),$jscomp.arrayFromIterable(m),$jscomp.arrayFromIterable(y)))}}else{y=m.row;var E=m.column;m=f(y,v.text,a,0);var F=m.attributes;m=m.index;var I=$jscomp.makeIterator(ke.splitTextAndAttributesAt(v.textAndAttributes,E));x=I.next().value;I.next();E=$jscomp.makeIterator(ke.splitTextAndAttributesAt(F,
E));E.next();E=E.next().value;for(v.changeTextAndAttributes([].concat($jscomp.arrayFromIterable(x),$jscomp.arrayFromIterable(E)));v=v.nextLine();){y++;if(y===r.row)break;m=f(y,v.text,a,m);x=m.attributes;m=m.index;v.changeTextAndAttributes(x)}v&&(r=r.column,a=f(y,v.text,a,m).attributes,y=$jscomp.makeIterator(ke.splitTextAndAttributesAt(v.textAndAttributes,r)),y.next(),y=y.next().value,r=$jscomp.makeIterator(ke.splitTextAndAttributesAt(a,r)).next().value,v.changeTextAndAttributes([].concat($jscomp.arrayFromIterable(r),
$jscomp.arrayFromIterable(y))))}}}},{key:"resetTextAttributes",value:function(){this.lines.forEach(function(a){return a.changeText(a.text)})}},{key:"textAttributeAt",value:function(a){var f=a.row;a=a.column;a=Math.max(0,a);var m=this.getLine(f);if(!m)return null;f=0;m=m.textAndAttributes;for(var r=0;r<m.length;r+=2){var v=m[r],x=m[r+1];f+="string"===typeof v?v.length:1;if(a<f)return x}return m[m.length-1]}},{key:"textAndAttributesInRange",value:function(a){var f=a.start,m=a.end;if(ke.eqPosition(f,
m))return["",null];ke.lessPosition(m,f)&&(a=$jscomp.makeIterator([m,f]),f=a.next().value,m=a.next().value);f=ke.maxPosition(f,{column:0,row:0});m=ke.minPosition(m,this.endPosition);var r=this.getLine(f.row),v=r;if(m.row===f.row)return a=f.column,m=m.column,a===m&&m++,a=$jscomp.makeIterator(ke.splitTextAndAttributesAtColumns(v.textAndAttributes,[a,m])),a.next(),a.next().value;a=[r];for(var x=0;x<m.row-f.row;x++)a.push(r=r.nextLine());r=a[a.length-1];f=$jscomp.makeIterator(ke.splitTextAndAttributesAt(v.textAndAttributes,
f.column));f.next();f=f.next().value;m=$jscomp.makeIterator(ke.splitTextAndAttributesAt(r.textAndAttributes,m.column)).next().value;0===f.length&&(f=["",null]);if(1===a.length)return ke.concatTextAndAttributes(f,m,!0);for(v=1;v<a.length-1;v++)"string"===typeof f[f.length-2]&&(f[f.length-2]+=ke.newline),ke.concatTextAndAttributes(f,a[v].textAndAttributes,!0);"string"===typeof f[f.length-2]&&(f[f.length-2]+=ke.newline);ke.concatTextAndAttributes(f,m,!0);return ke.joinTextAttributes(f,"")}},{key:"textInRange",
value:function(a){var f=a.start,m=a.end;f=this.clipPositionToLines(f);m=this.clipPositionToLines(m);ke.lessPosition(m,f)&&(a=$jscomp.makeIterator([m,f]),f=a.next().value,m=a.next().value);a=f;f=a.row;a=a.column;var r=m;m=r.row;r=r.column;if(f===m)return a===r?"":this.getLineString(f).slice(a,r);var v=this.getLine(f);for(a=v.text.slice(a);(v=v.nextLine())&&++f<m;)a+=ke.newline+v.text;return a+ke.newline+this.getLineString(m).slice(0,r)}},{key:"setTextInRange",value:function(a,f){this.remove(f);return this.insertText(a,
f.start,!1)}},{key:"indexToPosition",value:function(a){0>a&&(a=0);a=this.root.findLineWithTextIndex(a,0);return{row:a.row,column:a.column}}},{key:"positionToIndex",value:function(a){var f=a.column,m=this.getLine(a.row);f=Math.max(0,Math.min(f,m.stringSize-1));for(a=m.parent;a;){m=a.children.indexOf(m);m=a.children.slice(0,m);for(var r=0;r<m.length;r++)f+=m[r].stringSize;m=a;a=a.parent}return f}},{key:"insertTextAndAttributes",value:function(a,f,m){m=void 0===m?!1:m;if(!a||!a.length||2===a.length&&
!a[0])return{start:f,end:f};m&&!m.debugDocumentUpdate&&(m=!1);m&&!m.log&&(m=console);var r=f.row;f=f.column;0>r&&(r=0);0>f&&(f=0);var v=this.getLine(r);a=ke.splitTextAndAttributesIntoLines(a,ke.newline);m&&(m.log||(m={log:console.log.bind(console),dump:console.log.bind(console)}));if(!v)return r=this.insertLines(a.map(function(Y){return new ke.Line({parent:null,width:0,height:0,textAndAttributes:Y})})),m&&m.log("insert "+r.length+" lines into empty text"),{start:{row:0,column:0},end:{row:r.length,
column:ke.arr.last(r).text.length}};if(r>=this.rowCount){var x=this.endPosition;m&&m.log("insertion after doc end, "+r+"/"+f+", inserting "+(r-x.row)+" rows");for(f=0;f<r-x.row;f++)a.unshift(["",null]);r=x.row;f=x.column}if(1===a.length&&""===a[0][0])return m&&m.log("insert just newline at "+r+"/"+f),r=this.splitLineAt({row:r,column:f}),m&&m.dump(""+this.root.print(!1)),r;var y=a.shift(),E=a.length;x={row:r,column:f};var F=v.stringSize-1;f>F&&(m&&m.log("filling up insertion column at "+r+"/"+f+": "+
(f-F)),F=" ".repeat(f-F),y.length?"string"===typeof y[0]?y[0]=F+y[0]:y.unshift(F,null):y.push(F,null));F=$jscomp.makeIterator(ke.splitTextAndAttributesAt(v.textAndAttributes,f));var I=F.next().value;F=F.next().value;""===I[0]&&(I=[]);I=ke.concatTextAndAttributes(I,y,!0);if(0===E){for(var J=0,P=0;P<y.length;P+=2){var N=y[P];J+="string"===typeof N?N.length:1}x.column=f+J;ke.concatTextAndAttributes(I,F,!0)}v.changeTextAndAttributes(I);if(0===E)return m&&(m.log("single line inserted at "+r+"/"+f),m&&
m.dump(""+this.root.print(!1))),{start:{row:r,column:f},end:x};v=a[E-1];for(I=y=0;I<v.length;I+=2)J=v[I],y+="string"===typeof J?J.length:1;x.row+=E;x.column=y;a=this.insertLines(a.map(function(Y){return new ke.Line({parent:null,width:0,height:0,textAndAttributes:Y})}),r+1);E=ke.arr.last(a);E.changeTextAndAttributes(ke.concatTextAndAttributes(E.textAndAttributes,F,!0));m&&(m.log(a.length+" inserted at "+r+"/"+f),m&&m.dump(""+this.root.print(!1)));return{start:{row:r,column:f},end:x}}},{key:"insertText",
value:function(a,f,m){m=void 0===m?!1:m;if(!a)return{start:f,end:f};var r=f.row;f=f.column;0>r&&(r=0);0>f&&(f=0);var v=this.getLine(r);if(!v)return r=this.insertLines(a.split(ke.newline)),{start:{row:0,column:0},end:{row:r.length,column:ke.arr.last(r).text.length}};r>=this.rowCount&&(f=this.endPosition,a="\n".repeat(r-f.row)+a,r=f.row,f=f.column);var x=a.split(ke.newline),y=x.shift(),E=x.length;a={row:r,column:f};var F=v.stringSize-1;f>F&&(y=" ".repeat(f-F)+y);F=$jscomp.makeIterator(ke.splitTextAndAttributesAt(v.textAndAttributes,
f));var I=F.next().value;F=F.next().value;""===I[0]&&(I=[]);m=ke.concatTextAndAttributes(I,[y,m&&I.length?I[I.length-1]:null],!0);0===E&&(a.column=f+y.length,ke.concatTextAndAttributes(m,F,!0));v.changeTextAndAttributes(m);if(0===E)return{start:{row:r,column:f},end:a};a.row+=E;a.column=x[E-1].length;m=this.insertLines(x,r+1);m=ke.arr.last(m);m.changeTextAndAttributes(ke.concatTextAndAttributes(m.textAndAttributes,F,!0));return{start:{row:r,column:f},end:a}}},{key:"remove",value:function(a,f){f=void 0===
f?!1:f;if(0!==this.rowCount){var m=a.start,r=a.end;if(m.row!==r.row||m.column!==r.column){ke.lessPosition(r,m)&&(r=$jscomp.makeIterator([r,m]),m=r.next().value,r=r.next().value);var v=this.endPosition;if(!ke.lessEqPosition(v,m)){var x=ke.maxPosition(m,{column:0,row:0});m=x.row;x=x.column;v=ke.minPosition(r,v);r=v.row;var y=v.column;0>x&&(x=0);0>y&&(y=0);f&&!f.debugDocumentUpdate&&(f=!1);f&&(f.log||(f={log:console.log.bind(console),dump:console.log.bind(console),group:console.group.bind(console),groupEnd:console.groupEnd.bind(console)}),
f.group("document.remove "+JSON.stringify(a)),f.log("[text doc] removing "+m+"/"+x+" => "+r+"/"+y));var E=this.getLine(m);a=E;v=[E];for(var F=0;F<r-m;F++)v.push(E=E.nextLine());E=v[v.length-1];x=$jscomp.makeIterator(ke.splitTextAndAttributesAt(a.textAndAttributes,x)).next().value;y=$jscomp.makeIterator(ke.splitTextAndAttributesAt(E.textAndAttributes,y));y.next();y=y.next().value;a.changeTextAndAttributes(ke.concatTextAndAttributes(x,y,!0));f&&f.log('[text doc removal] what remains of start/end line: "'+
a.textAndAttributes+'"');1<v.length&&this.removeLines(m+1,r,f);f&&f.groupEnd("[text doc removal]")}}}}},{key:"splitLineAt",value:function(a){var f=a.row;a=a.column;var m=this.getLine(f),r=$jscomp.makeIterator(ke.splitTextAndAttributesAt(m.textAndAttributes,a)),v=r.next().value;r=r.next().value;m.changeTextAndAttributes(v);m=new ke.Line({parent:null,width:0,height:0,textAndAttributes:r});this.insertLines([m],f+1);return{start:{row:f,column:a},end:{row:f+1,column:0}}}},{key:"replace",value:function(a,
f,m){var r=a.start;a=a.end;if(!f.length)return this.remove({start:r,end:a},m),{removed:{start:r,end:a},inserted:{start:r,end:r}};var v=this.clipPositionToLines(r),x=this.clipPositionToLines(a);v.row===x.row&&this.remove({start:v,end:x},m);if(v.row===x.row||ke.lessEqPosition(this.endPosition,r)){var y;"string"===typeof f?f.length&&(y=f.length&&this.insertText(f,r)):f.length&&(2!==f.length||f[0])&&(y=this.insertTextAndAttributes(f,r,m));y||(y={start:v,end:v});return{removed:{start:r,end:a},inserted:y}}r=
v;a=x;m=r;y=m.row;x=m.column;v=a.row;if("string"===typeof f){m=[];f=f.split(ke.newline);for(var E=0;E<f.length;E++)m.push([f[E],null])}else m=ke.splitTextAndAttributesIntoLines(f,ke.newline);var F=!m.length||1===m.length&&(!m[0].length||!m[0][0].length);F&&(m=[]);var I=f=this.getLine(y);E=this.getLine(v);x=$jscomp.makeIterator(ke.splitTextAndAttributesAt(I.textAndAttributes,x));var J=x.next().value;x.next();for(I.changeTextAndAttributes(F?J:ke.concatTextAndAttributes(J,m.shift(),!0));m.length;){f=
f.nextLine();y++;if(f===E)break;f.changeTextAndAttributes(m.shift())}if(!m.length)return m=f.stringSize-1,this.remove({start:{row:y,column:f.stringSize},end:a}),{removed:{start:r,end:a},inserted:{start:r,end:{row:y,column:m}}};console.assert(y==v,"not end row");console.assert(f.row==y,"row != last line.row");this.remove({start:{row:y,column:0},end:a});v=[];f=m.length;for(x=0;x<f-1;x++)E=m[x],E.length||(E=["",null]),"string"===typeof E[E.length-2]?E[E.length-2]+=ke.newline:E.push(ke.newline,null),
v.push.apply(v,$jscomp.arrayFromIterable(E));v.push.apply(v,$jscomp.arrayFromIterable(m[f-1]));m=this.insertTextAndAttributes(v,{row:y,column:0}).end;return{removed:{start:r,end:a},inserted:{start:r,end:m}}}},{key:"wordsOfLine",value:function(a){for(var f=this.getLineString(a),m=[],r,v=0;v<f.length;v++)/[^a-z0-9_]/i.test(f[v])?r&&(r.range.end.column=v,m.push(r),r=null):(r=r||{index:m.length,string:"",range:{start:{row:a,column:v},end:{row:a,column:v}}},r.string+=f[v]);r&&(r.range.end.column=v,m.push(r));
return m}},{key:"wordAt",value:function(a,f){var m=a.row,r=a.column;f=void 0===f?this.wordsOfLine(m):f;return f.find(function(v){v=v.range;var x=v.end.column;return v.start.column<=r&&r<=x})||{range:{start:{column:r,row:m},end:{column:r,row:m}},string:""}}},{key:"wordLeft",value:function(a){var f=a.row,m=a.column,r=this.wordsOfLine(f);if(!r.length||ke.lessEqPosition(a,r[0].range.start)){for(;0<=--f;)if(r=this.wordsOfLine(f),r.length)return ke.arr.last(r);return{range:{start:a,end:a},string:""}}f=
this.wordAt(a);return f.string?ke.eqPosition(f.range.start,a)?r[f.index-1]:f:r.slice().reverse().find(function(v){return v.range.end.column<=m})||{range:{start:a,end:a},string:""}}},{key:"wordRight",value:function(a){var f=a.column,m=a.row,r=this.wordsOfLine(a.row);if(!r.length||ke.lessEqPosition(ke.arr.last(r).range.end,a)){for(;++m<this.lines.length;)if(r=this.wordsOfLine(m),r.length)return r[0];return{range:{start:a,end:a},string:""}}m=this.wordAt(a);return m.string?ke.eqPosition(m.range.end,a)?
r[m.index+1]:m:r.find(function(v){return v.range.start.column>=f})||{range:{start:a,end:a},string:""}}},{key:"scanForward",value:function(a,f){var m=a.row,r=a.column;a=this.getLine(m);for(var v=a.text;r<a.stringSize-1;r++){var x=f(v[r],{row:m,column:r});if(x)return x}for(;a=a.nextLine();)for(m++,v=a.text,r=0;r<a.stringSize-1;r++)if(x=f(v[r],{row:m,column:r}))return x;return null}},{key:"scanBackward",value:function(a,f){var m=a.row,r=a.column;a=this.getLine(m);var v=a.text;for(--r;0<=r;r--){var x=
f(v[r],{row:m,column:r});if(x)return x}for(;a=a.prevLine();)for(m--,v=a.text,r=a.stringSize-2;0<=r;r--)if(x=f(v[r],{row:m,column:r}))return x;return null}},{key:"copy",value:function(){return new this.constructor(this.lines.slice(),this.options)}},{key:"toString",value:function(){return"Document("+this.rowCount+" lines)"}},{key:"consistencyCheck",value:function(){var a=[],f=this.rowCount,m=this.stringSize,r=this.lines,v=this.textString,x=this.root;f!==r.length&&a.push({error:"document "+this+" row count: "+
f+" !== "+r.length});v.length!==m&&a.push({error:"document "+this+" textString.length vs stringSize: "+v.length+" !== "+m});a.push.apply(a,$jscomp.arrayFromIterable(x.consistencyCheck()));f=0;for(m=r[0];m;)m!=r[f]&&a.push({error:"line iteration at "+f+" is broken: nextLine() of "+r[f-1]+" is not "+r[f]+"!"}),f++,m=m.nextLine();r[f]&&a.push({error:"nextLine() of\n  "+r[f-1]+"\nis nullish but \n  "+r[f]+"\nexists in tree!"});if(a.length)throw Error("Consistency check of document revealed "+a.length+
" error"+(1<a.length?"s":"")+":\n"+a.map(function(y){return y.error}).filter(Boolean).join("\n"));}},{key:"print",value:function(){return this.root.print(!1,0,0,"root")}},{key:"print2",value:function(){var a=System.decanonicalize("lively.lang/text-graphics.js"),f=(System.get(a)||{}).printTree;return f?f(this.root,function(m){return m.toString()},function(m){return m.children},{padding:[2,1,2,1]}):(lively.module.module(a).load().then(function(){return console.log("lively.lang/text-graphics.js loaded")}).catch(function(m){return console.error(m)}),
"Loading lively.lang/text-graphics.js lib, please try again later :P")}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Document"}},{key:"fuzzyTest",value:function(){return ke.documentFuzzier.run()}},{key:"newline",get:function(){return ke.newline}},{key:"fromString",value:function(a,f){return new this(a.split(ke.newline),f)}}],e,{pathInPackage:function(){return"text/document.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:37798,end:71716})}(void 0),Exa=wda=ke.Document;ke.default=wda;var Yr=lively.FreezerRuntime.recorderFor("lively.morphic/text/anchors.js");Yr.lessPosition=yw;Yr.lessEqPosition=oF;Yr.eqPosition=zw;var cG=function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/text/anchors.js"),l=e.hasOwnProperty("Anchor")&&"function"===typeof e.Anchor?e.Anchor:e.Anchor=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return Pb(l,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a,f,m){f=void 0===f?{column:0,row:0}:f;this.id=a||""+(this.constructor._id=(this.constructor._id||0)+1);this.position=f;this.insertBehavior=void 0===m?"move":m}},{key:"isAnchor",get:function(){return!0}},{key:"onDelete",value:function(a){if(Yr.lessEqPosition(this.position,a.start))return!1;if(Yr.lessEqPosition(a.start,this.position)&&Yr.lessEqPosition(this.position,a.end))return this.position=a.start,!0;var f=
this.position,m=f.column,r=a.start,v=r.column,x=a.end;a=x.row;x=x.column;this.position={column:a!==this.position.row?m:v===x?m-(x-v):v+(m-x),row:f.row-(a-r.row)};return!0}},{key:"onInsert",value:function(a){if(Yr.lessPosition(this.position,a.start)||Yr.eqPosition(this.position,a.start)&&"stay"===this.insertBehavior)return!1;var f=this.position,m=a.start,r=m.row;m=m.column;a=a.end;var v=a.column;this.position={column:f.column+(r!==this.position.row?0:v-m),row:f.row+(a.row-r)};return!0}},{key:"equalsPosition",
value:function(a){return a?a.isAnchor?Yr.eqPosition(this.position,a.position):Yr.eqPosition(this.position,a):!1}},{key:"toString",value:function(){var a=this.position;return"Anchor("+this.id+" "+a.row+"/"+a.column+")"}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Anchor"}}],e,{pathInPackage:function(){return"text/anchors.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",
version:"0.1.2"}}},{start:82,end:3025})}(void 0);Yr.Anchor=cG;Yr.Anchor=cG;Yr.Anchor=cG;var Fxa=Object.freeze({__proto__:null,Anchor:cG}),sg=lively.FreezerRuntime.recorderFor("lively.morphic/text/search.js");sg.pt=Ei;sg.Color=xg;sg.connect=Dl;sg.once=cp;sg.disconnect=mg;sg.Path=Ih;sg.morph=qc;sg.GridLayout=TA;sg.config=em;sg.Morph=ql;sg.lessPosition=yw;sg.minPosition=pF;sg.maxPosition=qF;sg.Icon=Rp;var KQ=function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/text/search.js"),l=e.hasOwnProperty("TextSearcher")&&
"function"===typeof e.TextSearcher?e.TextSearcher:e.TextSearcher=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Pb(l,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){this.morph=a;this.STOP={}}},{key:"doc",get:function(){return this.morph.document}},{key:"processFind",value:function(a,f){var m=this.doc.positionToIndex(a);m=this.doc.indexToPosition(m+f.length);return{range:{start:a,end:m},match:f}}},
{key:"stringSearch",value:function(a,f,m,r,v,x,y){if(v&&(sg.lessPosition(y,v.start)||sg.lessPosition(v.end,y)))return this.STOP;m||(x=x.toLowerCase());if(x!==f[0])return null;v=y.row;y=y.column;x=a[v];a=1>=r?"":"\n"+a.slice(v+1,v+1+(r-1)).join("\n");a=x.slice(y)+a;return 0!==(m?a:a.toLowerCase()).indexOf(f)?null:this.processFind({row:v,column:y},a.slice(0,f.length))}},{key:"reSearch",value:function(a,f,m,r,v,x){if(r&&(sg.lessPosition(x,r.start)||sg.lessPosition(r.end,x)))return this.STOP;r=x.row;
x=x.column;return(a=(a[r].slice(x)+(m?"\n"+a.slice(r+1).join("\n"):"")).match(f))?this.processFind({row:r,column:x},a[0]):null}},{key:"search",value:function(a){var f=Object.assign({start:this.morph.cursorPosition,needle:"",backwards:!1,caseSensitive:!1,inRange:null},a);a=f.start;var m=f.needle,r=f.backwards,v=f.caseSensitive;f=f.inRange;if(!m)return null;f&&(a=r?sg.minPosition(f.end,a):sg.maxPosition(f.start,a));if(m instanceof RegExp){var x=(m.flags||"").split(""),y=!!m.multiline;x.splice(x.indexOf("m"),
1);v||x.includes("i")||x.push("i");m=new RegExp("^"+m.source.replace(/^\^+/,""),x.join(""));m=this.reSearch.bind(this,this.doc.lineStrings,m,y,f)}else m=String(m),v||(m=m.toLowerCase()),x=m.split(this.doc.constructor.newline).length,m=this.stringSearch.bind(this,this.doc.lineStrings,m,v,x,f);a=this.doc[r?"scanBackward":"scanForward"](a,m);return a===this.STOP?null:a}},{key:"searchForAll",value:function(a){for(var f=[],m=0;;){if(1E4<m++)throw Error("endless loop");var r=this.search(a);if(!r)return f;
f.push(r);a=Object.assign({},a,{start:a.backwards?r.range.start:r.range.end})}}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"TextSearcher"}}],e,{pathInPackage:function(){return"text/search.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:538,end:3748})}(void 0);sg.TextSearcher=KQ;sg.TextSearcher=KQ;sg.TextSearcher=
KQ;var GZ=function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/text/search.js"),l=e.hasOwnProperty("SearchWidget")&&"function"===typeof e.SearchWidget?e.SearchWidget:e.SearchWidget=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Pb(l,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){var f=this;a=void 0===a?{}:a;a.targetText&&(a.target=a.targetText);if(!a.target)throw Error("SearchWidget needs a target text morph!");
Pb._get(Object.getPrototypeOf(l.prototype),Symbol.for("lively-instance-initialize"),this).call(this,a);a=this.getSubmorphNamed("replaceButton");var m=this.getSubmorphNamed("replaceAllButton");this.getSubmorphNamed("replaceInput");var r=this.getSubmorphNamed("searchInput"),v=this.getSubmorphNamed("prevButton"),x=this.getSubmorphNamed("nextButton"),y=this.getSubmorphNamed("cancelButton"),E=this.getSubmorphNamed("acceptButton");sg.connect(E,"fire",this,"execCommand",{converter:function(){return"accept search"}});
sg.connect(y,"fire",this,"execCommand",{converter:function(){return"cancel search and reset cursor in text"}});sg.connect(x,"fire",this,"execCommand",{converter:function(){return"search next"}});sg.connect(v,"fire",this,"execCommand",{converter:function(){return"search prev"}});sg.connect(r,"inputChanged",this,"search");sg.connect(a,"fire",this,"execCommand",{converter:function(){return"replace and go to next"}});sg.connect(m,"fire",this,"execCommand",{converter:function(){return"replace all"}});
this.state={backwards:!1,before:null,position:null,inProgress:null,last:null};r.addCommands([{name:"realign top-bottom-center",exec:function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(F){f.target.execCommand("realign top-bottom-center");f.addSearchMarkersForPreview(f.state.inProgress&&f.state.inProgress.found,!1);return F.return(!0)})}}])}},{key:"focus",value:function(){var a=this;this.get("searchInput").focus();this.whenRendered().then(function(){return a.get("searchInput").invalidateTextLayout(!0,
!0)})}},{key:"onBlur",value:function(a){var f=this,m=this.world();m&&setTimeout(function(){var r=m.focusedMorph;f.withAllSubmorphsDetect(function(v){return v.isFocused()})?f.get("searchInput")!=r&&f.get("replaceInput")!=r&&f.get("searchInput").focus():f.cancelSearch(!1)})}},{key:"cleanup",value:function(){this.removeSearchMarkers();this.state.inProgress=null;this.textMap&&this.textMap.update()}},{key:"cancelSearch",value:function(a){this.state.inProgress&&(this.state.last=this.state.inProgress);this.cleanup();
this.removeTextMap();if(this.state.before&&a){a=this.state.before;var f=a.scroll;this.target.selection=a.selectionRange;this.target.scroll=f;this.state.before=null}this.remove();this.target.focus()}},{key:"acceptSearch",value:function(){this.state.inProgress&&(this.state.last=this.state.inProgress);this.applySearchResult(this.state.inProgress)&&this.state.before&&this.target.saveMark(this.state.before.position);this.get("searchInput").acceptInput();this.cleanup();this.removeTextMap();this.state.before=
null;this.remove();this.target.focus()}},{key:"applySearchResult",value:function(a){if(!a||!a.found)return null;var f=this.target,m=f.selection,r=!!f.activeMark||!m.isEmpty(),v=a.found.range,x=v.start;v=v.end;x=a.backwards?x:v;r?m.lead=x:f.cursorPosition=x;f.isLineFullyVisible(x.row)||f.centerRow();return a}},{key:"removeSearchMarkers",value:function(){var a=this;(this.target.markers||[]).forEach(function(f){f=f.id;return f.startsWith("search-highlight")&&a.target.removeMarker(f)})}},{key:"addSearchMarkers",
value:function(a,f,m){m=void 0===m?!1:m;this.removeSearchMarkers();f=this.target;var r=this.textMap,v=f.whatsVisible,x=v.startRow;v=v.endRow;var y=f.document.lineStrings,E=0,F=sg.config.codeEditor.search,I=F.maxCharsPerLine;F=F.fastHighlightLineCount;r&&3<=a.match.length&&y.length<F&&(x=0,v=y.length-1);F=!1;for(var J=window.performance.now();x<=v&&!F;x++)for(var P=y[x]||"",N=0;N<Math.min(P.length,I);N++){if(300<window.performance.now()-J){F=!0;break}if(m?0===P.slice(N).indexOf(a.match):0===P.slice(N).toLowerCase().indexOf(a.match.toLowerCase()))f.addMarker({id:"search-highlight-"+
E++,range:{start:{row:x,column:N},end:{row:x,column:N+a.match.length}},style:{"border-radius":"4px","background-color":"rgba(255, 200, 0, 0.3)","box-shadow":"0 0 4px rgba(255, 200, 0, 0.3)","pointer-events":"none"}}),N+=a.match.length}this.state.backwards?(m=a.range.start,a=m.row,m=m.column,a={start:{row:a,column:m},end:{row:a,column:m+1}}):(m=a.range.end,a=m.row,m=m.column,a={start:{row:a,column:m-1},end:{row:a,column:m}});m={};f.addMarker({id:"search-highlight-cursor",range:a,style:(m["pointer-events"]=
"none",m["box-sizing"]="border-box",m[this.state.backwards?"border-left":"border-right"]="3px red solid",m)});r&&r.update()}},{key:"addSearchMarkersForPreview",value:function(a,f){f=void 0===f?!0:f;a&&(this.addSearchMarkers(a),f&&this.target.removeMarker("search-highlight-cursor"))}},{key:"prepareForNewSearch",value:function(){var a=this.target,f=this.state,m=a.world();if(m){this.openInWorld(m.visibleBounds().center(),m);this.topRight=a.globalBounds().insetBy(5).topRight();if(a.getWindow())sg.once(a.getWindow(),
"remove",this,"remove");m=this.get("searchInput");var r=a.scroll;a=a.selection;f.position=a.lead;f.before={scroll:r,position:a.lead,selectionRange:a.range,selectionReverse:a.isReverse()};f.last&&f.last.found&&(sg.disconnect(m,"inputChanged",this,"search"),this.input=f.last.needle,sg.connect(m,"inputChanged",this,"search"),this.addSearchMarkersForPreview(f.last.found));this.focus();m.selectAll()}}},{key:"advance",value:function(a){var f=this.state.inProgress;if(f&&f.found){var m=f.found.range;f=m.start;
m=m.end;this.state.position=a!==this.state.backwards?a?m:f:a?f:m}this.state.backwards=a;return this.search()}},{key:"searchNext",value:function(){return this.advance(!1)}},{key:"searchPrev",value:function(){return this.advance(!0)}},{key:"search",value:function(){if(!this.input)return this.cleanup(),null;var a=this.state,f=a.backwards,m={backwards:f,start:a.position};a=this.target.search(this.input,m);m=this.state.inProgress=Object.assign({},m,{needle:this.input,found:a});this.applySearchResult(m);
a?this.addSearchMarkers(a,f):this.cleanup();return m}},{key:"showTextMap",value:function(){var a=this,f;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){if(1==m.nextAddress)return m.yield(System.import("lively.morphic/text/map.js"),2);f=a.textMap=sg.morph({type:"textmap"});f.attachTo(a.target);f.isLayoutable=!1;a.addMorph(f);f.topRight=a.innerBounds().bottomRight().addXY(0,5);f.height=a.target.height-a.height-15;f.update();a.renderOnGPU=!0;return m.return(f)})}},{key:"removeTextMap",
value:function(){this.textMap&&(this.textMap.remove(),this.textMap.detachFromCurrentTextMorph(),this.textMap=null)}},{key:"keybindings",get:function(){return[{keys:"Enter",command:"search next or replace and go to next"},{keys:"Alt-Enter",command:"only search prev"},{keys:"Tab",command:"change focus"},{keys:"Ctrl-O",command:"occur with search term"},{keys:"Ctrl-W",command:"yank next word from text"},{keys:"Escape",command:"cancel search"},{keys:{win:"Ctrl-F|Ctrl-S|Ctrl-G",mac:"Meta-F|Ctrl-S|Meta-G"},
command:"search next"},{keys:{win:"Ctrl-Shift-F|Ctrl-R|Ctrl-Shift-G",mac:"Meta-Shift-F|Ctrl-R|Meta-Shift-G"},command:"search prev"}]}},{key:"commands",get:function(){var a=this;return[{name:"occur with search term",exec:function(){var f,m;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){if(1==r.nextAddress)return r.yield(System.import("lively.morphic/text/occur.js"),2);f=r.yieldResult;m=f.occurStartCommand;a.target.addCommands([m]);a.execCommand("accept search");return r.return(a.target.execCommand("occur",
{needle:a.input}))})}},{name:"accept search",exec:function(){a.acceptSearch();return!0}},{name:"cancel search and reset cursor in text",exec:function(){a.cancelSearch(!0);return!0}},{name:"cancel search",exec:function(){a.cancelSearch(!1);return!0}},{name:"search next",exec:function(){a.searchNext();return!0}},{name:"search prev",exec:function(){a.searchPrev();return!0}},{name:"only search prev",exec:function(){if(a.get("searchInput").isFocused())return a.searchPrev(),!0}},{name:"search next or replace and go to next",
exec:function(f,m,r){a.get("searchInput").acceptInput();return a.execCommand(a.get("replaceInput").isFocused()?"replace and go to next":"search next",m,r)}},{name:"replace current search location with replace input",exec:function(){var f=sg.Path("state.inProgress").get(a);if(f.found){var m=a.get("replaceInput").textString;a.get("replaceInput").get("replaceInput").acceptInput();f.needle instanceof RegExp&&(m=f.found.match.replace(f.needle,m));a.target.replace(f.found.range,m)}return!0}},{name:"replace and go to next",
exec:function(){a.execCommand("replace current search location with replace input");a.execCommand(a.state.backwards?"search prev":"search next");return!0}},{name:"replace all",exec:function(){var f=sg.Path("state.inProgress").get(a);if(f.found){f=Object.assign({},f,{start:{row:0,column:0}});var m=a.get("replaceInput").textString;a.get("replaceInput").get("replaceInput").acceptInput();var r=(new sg.TextSearcher(a.target)).searchForAll(f);a.target.undoManager.group();r.forEach(function(v){var x=v.range;
v=v.match;f.needle instanceof RegExp&&(m=v.replace(f.needle,m));a.target.replace(x,m,!0,!0,!1)});a.target.undoManager.group();a.acceptSearch()}return!0}},{name:"change focus",exec:function(){a.get("searchInput").isFocused()?a.get("replaceInput").focus():a.get("searchInput").focus();return!0}},{name:"yank next word from text",exec:function(){var f=a.target,m=f.wordRight(),r=a.get("searchInput");r.selection.isEmpty()||(r.selection.text="");f=f.textInRange({start:f.cursorPosition,end:m.range.end});r.textString+=
f;return!0}}]}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"SearchWidget"}},{key:"properties",get:function(){return{name:{defaultValue:"search widget"},borderWidth:{defaultValue:1},borderColor:{defaultValue:sg.Color.gray},borderRadius:{defaultValue:3},fill:{defaultValue:sg.Color.black.withA(.6)},epiMorph:{defaultValue:!0},target:{},state:{},master:{initialize:function(){this.master={auto:"styleguide://SystemWidgets/search widget"}}},input:{after:["submorphs"],get:function(){var a=
this.get("searchInput").textString,f=a.match(/^\/(.*)\/([a-z]*)$/);return f?new RegExp(f[1],f[2]):a},set:function(a){this.get("searchInput").textString=String(a)}},fontSize:{after:["submorphs"],get:function(){return this.get("searchInput").fontSize},set:function(a){this.get("replaceInput").fontSize=a}},fontFamily:{after:["submorphs"],get:function(){return this.get("searchInput").fontFamily},set:function(a){this.get("searchInput").fontFamily=a;this.get("replaceInput").fontFamily=a}},layout:{initialize:function(){this.layout=
new sg.GridLayout({groups:{nextButton:{resize:!1},prevButton:{resize:!1},acceptButton:{resize:!1},cancelButton:{resize:!1}},rows:[0,{fixed:28,paddingTop:5,paddingBottom:2.5},1,{fixed:28,paddingTop:2.5,paddingBottom:5}],columns:[0,{paddingLeft:5,paddingRight:5},1,{fixed:25},2,{fixed:25},3,{fixed:5},4,{fixed:25},5,{fixed:25},6,{fixed:10}],grid:[["searchInput","nextButton","prevButton",null,"acceptButton","cancelButton",null],["replaceInput","replaceButton","replaceButton",null,"replaceAllButton","replaceAllButton",
null]]})}},submorphs:{after:["extent"],initialize:function(){this.submorphs=[sg.morph({type:"button",name:"acceptButton",label:sg.Icon.textAttribute("check-circle")}).fit(),sg.morph({type:"button",name:"cancelButton",label:sg.Icon.textAttribute("times-circle")}).fit(),sg.morph({type:"button",name:"nextButton",label:sg.Icon.textAttribute("arrow-alt-circle-down",{textStyleClasses:["far"]})}).fit(),sg.morph({type:"button",name:"prevButton",label:sg.Icon.textAttribute("arrow-alt-circle-up",{textStyleClasses:["far"]})}).fit(),
sg.morph({type:"input",name:"searchInput",placeholder:"search input",historyId:"lively.morphic-text search"}),sg.morph({type:"input",name:"replaceInput",placeholder:"replace input",historyId:"lively.morphic-text replace"}),sg.morph({type:"button",styleClasses:["replace"],name:"replaceButton",label:"replace"}),sg.morph({type:"button",styleClasses:["replace"],name:"replaceAllButton",label:"replace all"})];sg.connect(this.get("searchInput"),"onBlur",this,"onBlur");sg.connect(this.get("replaceInput"),
"onBlur",this,"onBlur")}},textMap:{after:["submorphs"]}}}}],e,{pathInPackage:function(){return"text/search.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:3867,end:21654})}(sg.Morph);sg.SearchWidget=GZ;sg.SearchWidget=GZ;sg.SearchWidget=GZ;var LQ=[{name:"search in text",exec:function(b,e){e=void 0===e?{backwards:!1}:e;b=b._searchWidget||
(b._searchWidget=new sg.SearchWidget({target:b,extent:sg.pt(300,20)}));b.state.backwards=e.backwards;b.prepareForNewSearch();sg.config.codeEditor.search.showTextMap&&b.showTextMap();return!0}}];sg.searchCommands=LQ;sg.searchCommands=LQ;sg.searchCommands=LQ;var sm=lively.FreezerRuntime.recorderFor("lively.morphic/text/layout.js");sm.todo=function(b){throw Error("not yet implemented "+b);};sm.Rectangle=He;sm.rect=dj;sm.pt=Ei;sm.arr=Mf;sm.Range=UA;var xda=function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/text/layout.js"),
l=e.hasOwnProperty("TextLayout")&&"function"===typeof e.TextLayout?e.TextLayout:e.TextLayout=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Pb(l,b,[{key:Symbol.for("lively-instance-initialize"),value:function(){this.reset()}},{key:"reset",value:function(){this.resetLineCharBoundsCache()}},{key:"restore",value:function(a,f){var m=function(x){var y=0;return sm.arr.flatten(sm.arr.histogram(x,x.length/3).map(function(E){var F=
$jscomp.makeIterator(E);E=F.next().value;var I=F.next().value;F=F.next().value;for(var J=[],P=0;P<E;P++)J.push(sm.rect(y,0,I,F)),y+=I;return J}))};a=$jscomp.makeIterator(a);for(var r=a.next();!r.done;r=a.next()){var v=$jscomp.makeIterator(r.value);r=v.next().value;v=v.next().value;v=m(v);this.lineCharBoundsCache.set(f.document.getLine(r),v)}}},{key:"resetLineCharBoundsCache",value:function(a){this.lineCharBoundsCache=new WeakMap;a&&!a._isDeserializing&&(this.estimateLineHeights(a),a.makeDirty())}},
{key:"resetLineCharBoundsCacheOfLine",value:function(a){a&&this.lineCharBoundsCache.set(a,null)}},{key:"resetLineCharBoundsCacheOfRow",value:function(a,f){var m=a.document;a._isDeserializing&&a._initializedByCachedBounds||m&&this.resetLineCharBoundsCacheOfLine(m.getLine(f))}},{key:"resetLineCharBoundsCacheOfRange",value:function(a,f){for(var m=f.start.row;m<=f.end.row;m++)this.resetLineCharBoundsCacheOfRow(a,m)}},{key:"estimateLineHeightsInRange",value:function(a,f){for(var m=a.document,r=a.getGlobalTransform(),
v=f.start.row;v<=f.end.row;v++)this.resetLineCharBoundsCacheOfRow(a,m.getLine(v),r)}},{key:"estimateExtentOfLine",value:function(a,f,m){m=void 0===m?a.getGlobalTransform():m;var r=a.fontMetric,v=a.lineWrapping,x=a.padding,y=a.textRenderer,E=a.debug,F=a.defaultTextStyle,I=a.getProperty("extent").x,J=x.left(),P=x.right(),N=x.top();x=x.bottom();y=y.directRenderTextLayerFn(a);var Y=f.textAndAttributes,W=[],da;I=I-J-P;if(Y&&Y.length)for(var va=0,za=0;va<Y.length;va+=2)(da=Y[va])&&da.isMorph?(da.position=
this.pixelPositionFor(a,{row:f.row,column:za}).subPt(a.origin),za++):da&&(za+=da.length),W.push(Object.assign({},F,{},Y[va+1]));else W.push(F);Y=W.length;for(va=F=da=0;va<Y;va++){za=r.defaultCharExtent(a,{defaultTextStyle:W[va],width:1E3,transform:m,paddingBottom:x,paddingTop:N,paddingRight:P,paddingLeft:J},y);var L=za.width;F=Math.max(za.height,F);da+=L}a=F;m=f.text.length||1;r=Math.round(da/Y);J=m*r;J=v?Math.min(J,I):J;v&&(a=Math.round((Math.ceil(m/Math.max(3,I/r))||1)*F));E&&console.log(f.row+
": "+f.height+" => "+a);f.changeExtent(J,a,!0)}},{key:"estimateLineHeights",value:function(a,f){var m=a.fontMetric,r=a.textRenderer,v=a.document,x=a.defaultTextStyle,y=a.clipMode,E=a.textAlign,F=a.padding,I=a.lineWrapping,J=a.debug,P=a.getProperty("extent"),N=P.x,Y=P.y;P=a.getGlobalTransform();var W=F.left(),da=F.right(),va=F.top();F=F.bottom();v=v.lines;var za=r.directRenderTextLayerFn(a);J&&(J=a.debugHelper(J),J.debugTextLayout||(J=!1));if(!J&&10>a.lineCount()&&3E3>a.document.stringSize&&!sm.arr.any(a.textAndAttributes,
function(L){return L&&void 0!=L.fontFamily}))for(f=r.directRenderLineFn(a),f=m.manuallyComputeBoundsOfLines(a,v,0,0,{defaultTextStyle:x,width:N,height:Y,clipMode:y,lineWrapping:I,textAlign:E,transform:P,paddingLeft:W,paddingRight:da,paddingTop:va,paddingBottom:F},za,f),x=0;x<v.length;x++)J=f[x],v[x].changeExtent(J.width,J.height,!m.isFontSupported(a.fontFamily,a.fontWeight));else{for(x=m=0;x<v.length;x++)y=v[x],!f&&0<y.height||(m++,this.estimateExtentOfLine(a,y,P));a.viewState._textLayoutStale=!1;
J&&J.log("estimateLineHeights, "+m+"/"+v.length+" updated, force: "+f)}}},{key:"defaultCharExtent",value:function(a){var f=a.textRenderer,m=a.fontMetric,r=a.defaultTextStyle,v=a.getGlobalTransform();f=f.directRenderTextLayerFn(a);return m.defaultCharExtent(a,{transform:v,defaultTextStyle:r,width:1E3},f)}},{key:"textBounds",value:function(a){var f=a.document,m=a.padding,r=a.borderWidthLeft,v=a.borderWidthRight,x=a.borderWidthTop;a=a.borderWidthBottom;return new sm.Rectangle(m.left(),m.top(),Math.round(f.width+
r+v),Math.round(f.height+x+a))}},{key:"isFirstLineVisible",value:function(a){return 0>=a.viewState.firstVisibleRow}},{key:"isLastLineVisible",value:function(a){return a.viewState.lastVisibleRow>=a.lineCount()-1}},{key:"isLineVisible",value:function(a,f){return f>=a.viewState.firstVisibleRow&&f<=a.viewState.lastVisibleRow}},{key:"isLineFullyVisible",value:function(a,f){return f>=a.viewState.firstFullyVisibleRow&&f<=a.viewState.lastFullyVisibleRow}},{key:"whatsVisible",value:function(a){var f=a.viewState.firstVisibleRow,
m=a.viewState.lastVisibleRow;return{lines:a.document.lines.slice(f,m),startRow:f,endRow:m}}},{key:"firstFullVisibleLine",value:function(a){return a.viewState.firstFullyVisibleRow}},{key:"lastFullVisibleLine",value:function(a){return a.viewState.lastFullyVisibleRow}},{key:"screenLineRange",value:function(a,f,m){var r=f.row,v=f.column;v=Math.max(0,v);r=Math.min(a.lineCount()-1,Math.max(0,r));var x=this.charBoundsOfRow(a,r);v>x.length-1&&(v=x.length-1);for(var y=x[v],E=f=v,F=v+1;F<x.length&&!(x[F].y>
y.y+y.height);F++)E=F;E===x.length-1&&E++;for(F=v-1;0<=F&&!(x[F].y<y.y+y.height);F--)f=F;m&&(a=a.getLine(r).slice(f,E).match(/^\s*/)[0].length,f+=a);return new sm.Range({start:{row:r,column:f},end:{row:r,column:E}})}},{key:"rangesOfWrappedLine",value:function(a,f){for(var m=a.getLine(f).length,r=0,v=[];;){var x=this.screenLineRange(a,{row:f,column:r},!1);v.push(x);if(x.end.column>=m)break;var y=x.end.column+1;if(y>=m)break;if(y<=r){if(!a.env.renderer.getNodeForMorph(a))break;throw Error("should not happen "+
x.end.column+" vs "+r);}r=y}return v}},{key:"chunkAtPos",value:function(a,f){sm.todo("chunkAtPos")}},{key:"charBoundsOfRow",value:function(a,f){f=a.document.getLine(f);a._initializedByCachedBounds&&!this._restored&&(this.restore(a._initializedByCachedBounds,a),this._restored=!0);var m=this.lineCharBoundsCache.get(f);if(m)return m;var r=a.getProperty("extent");m=r.x;r=r.y;var v=a.fontMetric,x=a.textRenderer,y=a.defaultTextStyle,E=a.clipMode,F=a.textAlign,I=a.padding,J=a.lineWrapping,P=a.getGlobalTransform(),
N=I.left(),Y=I.right(),W=I.top();I=I.bottom();var da=x.directRenderLineFn(a);x=x.directRenderTextLayerFn(a);a=v.manuallyComputeCharBoundsOfLine(a,f,0,0,{defaultTextStyle:y,width:m,height:r,clipMode:E,lineWrapping:J,textAlign:F,paddingLeft:N,paddingRight:Y,paddingTop:W,paddingBottom:I,transform:P},x,da);if(a.find(function(va){return void 0==va.width&&void 0==va.height}))return a;this.lineCharBoundsCache.set(f,a);return a}},{key:"computeMaxBoundsForLineSelection",value:function(a,f){var m=f.start,r=
f.end,v=a.textLayout,x=v.rangesOfWrappedLine(a,m.row).find(function(y){return y.containsPosition(m)});r=a.lineWrapping&&x?x.intersect(f).end:r;r=r.row==m.row?r:{row:r.row,column:-1};f=v.charBoundsOfRow(a,m.row);f=0>r.column?f.slice(m.column):f.slice(m.column,r.column+1);r=m.column+(f?f.indexOf(sm.arr.max(f,function(y){return y.height})):0);return v.boundsFor(a,{row:m.row,column:r})}},{key:"boundsFor",value:function(a,f){var m=f.row;f=f.column;f=Math.max(0,f);m=Math.min(a.lineCount()-1,Math.max(0,
m));var r=this.charBoundsOfRow(a,m);if(0<r.length)if(f>=r.length){var v=r[r.length-1];v=new sm.Rectangle(v.x+v.width,v.y,0,v.height)}else v=sm.Rectangle.fromLiteral(r[f]);v||(console.warn("Cannot compute bounds for line "+m+"/"+f),v=new sm.Rectangle(0,0,0,0));f=a.document;a=a.padding;v.x+=a.left();v.y=v.y+f.computeVerticalOffsetOf(m)+a.top();return v}},{key:"pixelPositionFor",value:function(a,f){return this.boundsFor(a,f).topLeft()}},{key:"textPositionFromPoint",value:function(a,f){var m=f.addPt(a.origin),
r=m.x,v=m.y,x=a.document;m=a.padding;var y=m.left(),E=m.top();if(v>x.height+E)return x.endPosition;if(v<E)return{row:0,column:0};m=x.findLineByVerticalOffset(v-E);if(!m)return{row:0,column:0};var F=m.line.row;a=this.charBoundsOfRow(a,F);var I=a.length,J=a[0],P=a[I-1];m={row:F,column:0};r-=y;v-=E+x.computeVerticalOffsetOf(F);if(0===I||r<=J.x+Math.round(J.width/2)&&v>=J.y&&v<=J.y+J.height)return m;if(r>P.x+Math.round(P.width/2)&&v>=P.y&&v<=P.y+P.height)return m.column=I,m;y=[];for(x=I-1;0<=x;x--)if(P=
E=a[x],F=P.x,I=P.width,J=P.y,P=P.height,!(v<J||v>J+P)&&(y.push(E),r>=F+Math.round(I/2)))return m.column=1===y.length?x:x+1,m;if(y.length)return m.column=a.indexOf(sm.arr.last(y)),m;r=Infinity;v=-1;for(x=0;x<a.length;x++)y=a[x],y=f.distSquared(sm.pt(y.x+y.width/2,y.y+y.height/2)),y>=r||(r=y,v=x);m.column=v;return m}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"TextLayout"}}],e,{pathInPackage:function(){return"text/layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:244,end:17181})}(void 0),Gxa=xda=sm.TextLayout;sm.default=xda;var Af=lively.FreezerRuntime.recorderFor("lively.morphic/text/renderer.js");Af.printViewState=function(b){var e=b.viewState,l=e.scrollTop,a=e.scrollHeight,f=e.textHeight,m=e.firstVisibleRow;e=e.lastVisibleRow;var r=b.document.lines;console.log(b+" #"+b.id.slice(0,12)+"\nscroll: "+l+" + "+a+"\nlines: "+
m+" - "+e+"\nvisible lines: "+(e-m)+"\nheight: "+f+", "+r.length+" lines")};Af.installCSS=function(b){Af.cssInstalled=!0;Af.addOrChangeCSSDeclaration("new-text-css","\n\n    /* markers */\n\n    .newtext-marker-layer {\n      position: absolute;\n    }\n\n    /* selection / cursor */\n\n    .newtext-cursor {\n      z-index: 5;\n      pointer-events: none;\n      position: absolute;\n      background-color: black;\n    }\n\n    .hidden-cursor .newtext-cursor {\n      background-color: transparent !important;\n    }\n\n    .newtext-cursor.diminished {\n      background-color: gray;\n    }\n\n    .newtext-selection-layer {\n      position: absolute;\n    }\n\n    /*-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-*/\n    /* text layer / content */\n\n    .newtext-text-layer {\n      box-sizing: border-box;\n      position: absolute;\n      white-space: pre;\n      z-index: 0;\n      min-width: 100%;\n      pointer-events: none;\n    }\n\n    .newtext-before-filler {}\n\n    .newtext-text-layer.wrap-by-words {\n      white-space: pre-wrap;\n      overflow-wrap: break-word;\n      max-width: 100%;\n    }\n\n    .newtext-text-layer.only-wrap-by-words {\n      white-space: pre-wrap;\n      overflow-wrap: break-all;\n      max-width: 100%;\n    }\n\n    .newtext-text-layer.wrap-by-chars {\n      white-space: pre-wrap;\n      word-break: break-all;\n      max-width: 100%;\n    }\n\n    .newtext-text-layer.no-wrapping {\n    }\n\n    .newtext-text-layer a {\n       pointer-events: auto;\n    }\n\n    .newtext-text-layer.auto-width .line {\n      width: fit-content;\n    }\n\n    .newtext-text-layer .line {\n      -moz-border-radius: 0;\n      -webkit-border-radius: 0;\n      border-radius: 0;\n      border-width: 0;\n      background: transparent;\n      font-family: inherit;\n      font-size: inherit;\n      margin: 0;\n      word-wrap: normal;\n      line-height: inherit;\n      color: inherit;\n      position: relative;\n      overflow: visible;\n      -webkit-tap-highlight-color: transparent;\n      -webkit-font-variant-ligatures: contextual;\n      font-variant-ligatures: contextual;\n    }\n\n    .line > .Morph {\n      display: inline-block !important;\n      vertical-align: top !important;\n    }\n\n    blockquote {\n      margin: 0;\n      -webkit-margin-start: 0;\n      -webkit-margin-end: 0;\n    }\n\n    .newtext-text-layer blockquote {\n      margin-left: 2em;\n      margin-right: 2em;\n      border-left: 2px lightgray solid;\n      padding-left: 2%;\n    }\n\n    /* -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-*/\n    /* debug styling */\n\n    .debug-info {\n      position: absolute;\n      outline: 1px solid green;\n      pointer-events: none;\n      z-index: 4;\n      text-align: center;\n      font-family: monospace;\n      color: green;\n      background-color: white;\n      font-size: small;\n      vertical-align: baseline;\n    }\n\n    .debug-line {\n      position: absolute;\n      outline: 1px solid red;\n      pointer-events: none;\n      z-index: 4,\n      text-align: right;\n      font-family: monospace;\n      font-size: small;\n      vertical-align: baseline;\n      color: red;\n    }\n\n    .debug-char {\n      position: absolute;\n      outline: 1px solid orange;\n      pointer-events: none;\n      z-index: 3\n    }\n\n  ",
b.document)};Af.extractHTMLFromTextMorph=UN;Af.obj=ng;Af.arr=Mf;Af.num=Um;Af.pt=Ei;Af.Rectangle=He;Af.vdom=UI;Af.defaultAttributes=Fs;Af.defaultStyle=Es;Af.addOrChangeCSSDeclaration=Aq;Af.hyperscriptFnForDocument=$O;Af.objectReplacementChar="\ufffd";Af.config=em;Af.getSvgVertices=Vx;var MQ=Af.vdom;Af.h=MQ.h;Af.create=MQ.create;Af.patch=MQ.patch;Af.diff=MQ.diff;Af.cssInstalled=!1;Af.debug=!!Af.config.onloadURLQuery["debug-text"];Af.nextTick=function(b,e,l,a,f,m){for(;!f&&l<e.length;)f=b[e[l++]+"equestAnimationFrame"];
return f&&f.bind(b)||b.setImmediate||function(r){b.setTimeout(r,0)}}("undefined"!==typeof window?window:global,["r","webkitR","mozR","msR","oR"],0);(function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/text/renderer.js"),l=e.hasOwnProperty("AfterTextRenderHook")&&"function"===typeof e.AfterTextRenderHook?e.AfterTextRenderHook:e.AfterTextRenderHook=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Pb(l,
b,[{key:"reset",value:function(a){this.morph=a;this.needsRerender=this.called=!1}},{key:"updateLineHeightOfNode",value:function(a,f,m){if(0===f.height||f.hasEstimatedExtent){var r=a.getGlobalTransform().inverse();r.e=r.f=0;var v=1!=r.getScale()||0!=r.getRotation();v&&(m.style.transform=r.toString());var x=m.getBoundingClientRect();r=x.height;x=x.width;v&&(m.style.transform="");r&&x&&(f.height!==r||f.width!==x)&&a.fontMetric.isFontSupported(a.fontFamily,a.fontWeight)&&(f.changeExtent(x,r,!1),a.textLayout.resetLineCharBoundsCacheOfLine(f),
this.needsRerender=!0,a.viewState._needsFit=!0);if(f.textAndAttributes&&f.textAndAttributes.length)for(x=v=0;v<f.textAndAttributes.length;v+=2)(m=f.textAndAttributes[v])&&m.isMorph?(a._positioningSubmorph=m,m.position=a.textLayout.pixelPositionFor(a,{row:f.row,column:x}).subPt(a.origin),m._dirty=!1,a._positioningSubmorph=null,x++):m&&(x+=m.length);return r}return f.height}},{key:"updateExtentsOfLines",value:function(a){var f=this.morph,m=f.viewState,r=f.fontMetric;m.dom_nodes=[];m.dom_nodeFirstRow=
0;m.textWidth=a.scrollWidth;a=a.children;for(var v=0,x;v<a.length&&"line"!=a[v].className;)v++;if(v<a.length){x=a[v];var y=x.dataset;y=Number(y?y.row:x.getAttribute("data-row"));if("number"===typeof y&&!isNaN(y)){m.dom_nodeFirstRow=y;x=0;y=f.document.getLine(y);for(var E;v<a.length;v++){var F=a[v];m.dom_nodes.push(F);y&&(E||(E=y.hasEstimatedExtent),y.hasEstimatedExtent=E,x+=this.updateLineHeightOfNode(f,y,F),y.hasEstimatedExtent=!r.isFontSupported(f.fontFamily,f.fontWeight),y=y.nextLine())}this.needsRerender?
(f.fitIfNeeded(),f.makeDirty()):f._dirty=!!f.submorphs.find(function(I){return I.needsRerender()})}}}},{key:"hook",value:function(a,f,m){a&&a.parentNode&&(f=this.morph.viewState,f.text_layer_node=a,f.fontmetric_text_layer_node=null,this.called=!0,this.updateExtentsOfLines(a))}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"AfterTextRenderHook"}}],e,{pathInPackage:function(){return"text/renderer.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:4957,end:9032})})(void 0);var yda=function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/text/renderer.js"),l=e.hasOwnProperty("TextRenderer")&&"function"===typeof e.TextRenderer?e.TextRenderer:e.TextRenderer=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Pb(l,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){a?
Af.cssInstalled||Af.installCSS(a):console.warn("Text renderer initialized without domEnv. Depending on what you want to do you might have bad luck...!");this.domEnv=a}},{key:"directRenderLineFn",value:function(a){var f=this,m=a.viewState._renderLineFn;if(!m){var r=Af.hyperscriptFnForDocument(this.domEnv.document);m=a.viewState._renderLineFn=function(v){return f.renderLine(r,null,a,v)}}return m}},{key:"directRenderTextLayerFn",value:function(a){var f=this,m=a.viewState._renderTextLayerFn;if(!m){var r=
Af.hyperscriptFnForDocument(this.domEnv.document);m=a.viewState._renderTextLayerFn=function(v){return f.renderJustTextLayerNode(r,a,v,[])}}return m}},{key:"renderMorph",value:function(a,f){var m=a.cursorWidth||1,r=[],v=a.selection;if(a.inMultiSelectMode()){m=v.selections;for(v=0;v<m.length-1;v++)r.push.apply(r,$jscomp.arrayFromIterable(this.renderSelectionLayer(a,m[v],!0,2)));r.push.apply(r,$jscomp.arrayFromIterable(this.renderSelectionLayer(a,m[v],!1,4)))}else r=this.renderSelectionLayer(a,v,!1,
m);m=this.renderTextLayer(a,f);v=this.renderJustTextLayerNode(Af.h,a,null,[]);var x=this.renderMarkerLayer(a,f),y=a.document.width>a.width?a.scrollbarOffset:Af.pt(0,0);y=Af.h("div",{className:"scrollLayer",style:Object.assign({position:"absolute",top:"0px"},a.viewState.fastScroll?{overflow:a.scrollActive?a.clipMode:"hidden"}:{},{width:a.width+"px",height:a.height+"px"})},[Af.h("div",{style:{width:Math.max(a.document.width,a.width)+"px",height:Math.max(a.document.height,a.height)-y.y+"px"}})]);m.properties.className+=
" actual";m.properties.style.overflow="visible"===a.clipMode?"visible":"hidden";v.properties.className+=" font-measure";var E=a.embeddedMorphMap,F=E?a.submorphs.filter(function(I){return!E.has(I)}):a.submorphs;r=[].concat($jscomp.arrayFromIterable(r),[x,v,m,f.renderSelectedSubmorphs(a,F)]);return Af.h("div",Object.assign({},Af.defaultAttributes(a,f),{style:Object.assign({},Af.defaultStyle(a),{},a.viewState.fastScroll?{overflow:"visible"==a.clipMode?"visible":"hidden"}:{},{"-moz-user-select":"none",
cursor:"auto"===a.nativeCursor?a.readOnly?"default":"text":a.nativeCursor})}),[y].concat($jscomp.arrayFromIterable(a.viewState.fastScroll?[Af.h("div",{className:"scrollWrapper",style:{"pointer-events":"none",position:"absolute",width:"100%",height:"100%",transform:"translate(-"+a.scroll.x+"px, -"+a.scroll.y+"px)"}},r)]:r)))}},{key:"renderTextLayer",value:function(a,f){var m=this,r=a.debug?[].concat($jscomp.arrayFromIterable(this.renderDebugLayer(a)),$jscomp.arrayFromIterable(this.renderLines(Af.h,
f,a))):this.renderLines(Af.h,f,a);r=this.renderJustTextLayerNode(Af.h,a,null,r);r.properties.style.position="absolute";var v=a.viewState.afterTextRenderHook||(a.viewState.afterTextRenderHook=new Af.AfterTextRenderHook);v.reset(a);r.properties["after-text-render-hook"]=v;Af.nextTick(function(){m.manuallyTriggerTextRenderHook(a,f)});return r}},{key:"manuallyTriggerTextRenderHook",value:function(a,f){var m=a.viewState.afterTextRenderHook;m&&!m.called&&((f=(f=f.getNodeForMorph(a))&&f.querySelector(".actual.newtext-text-layer"))&&
m.hook(f),a.ownerChain().every(function(r){return r.visible})&&a.fit())}},{key:"renderJustTextLayerNode",value:function(a,f,m,r){var v=f.padding,x=v.x,y=v.y,E=f.fixedWidth,F=f.fixedHeight,I=f.backgroundColor,J=f.fontColor,P=f.textAlign,N=f.fontSize,Y=f.textDecoration,W=f.fontStyle,da=f.fontWeight,va=f.fontFamily,za=f.lineHeight,L=f.wordSpacing,Z=f.letterSpacing,R=f.tabWidth,X=x+v.width;v=y+v.height;var ja=Math.max(f.document.height,f.height),fa="newtext-text-layer";switch(f.lineWrapping){case !0:case "by-words":fa+=
" wrap-by-words";break;case "only-by-words":fa+=" only-wrap-by-words";break;case "by-chars":fa+=" wrap-by-chars";break;case !1:fa+=" no-wrapping"}E||(fa+=" auto-width");F||(fa+=" auto-height");f={height:ja+"px"};0<x&&(f.paddingLeft=x+"px");0<X&&(f.paddingRight=X+"px");0<y&&(f.paddingTop=y+"px");0<v&&(f.paddingBottom=v+"px");Z&&(f.letterSpacing=Z);L&&(f.wordSpacing=L);za&&(f.lineHeight=za);va&&(f.fontFamily=va);da&&(f.fontWeight=da);W&&(f.fontStyle=W);Y&&(f.textDecoration=Y);N&&(f.fontSize=N+"px");
P&&(f.textAlign=P);J&&(f.color=String(J));I&&(f.backgroundColor=I);8!==R&&(f.tabSize=R);x={className:fa,style:f};f.overflow="hidden";m&&(y=m.clipMode,I=m.height,m=m.width,"number"===typeof m&&(f.width=m+"px"),"number"===typeof I&&(f.height=I+"px"),y&&(f.overflow=y));return a("div",x,r)}},{key:"renderLines",value:function(a,f,m){var r=m.height,v=m.scroll,x=m.padding.y,y=m.document,E=m.clipMode;f.getNodeForMorph(m);v=v.y;var F=y.rowCount-1,I=y.height,J="visible"!==E,P=y.findLineByVerticalOffset(J?Math.max(0,
J?v-x:0):0)||{row:0,y:0,offset:0,line:y.getLine(0)},N=P.line,Y=P.offset;E=P.y;P=P.row;x=y.findLineByVerticalOffset(J?Math.min(I,v-x+r):I)||{row:F,offset:0,y:0,line:y.getLine(F)};y=x.line;var W=x.offset,da=x.row;x=J?P:0;Y=0===Y?P:P+1;F=J?da+1:F;J=y&&W!==y.height?da-1:da;this.maxVisibleLines=Math.max(this.maxVisibleLines||1,F-x+1);P=[];y=[];y.push(a("div.newtext-before-filler",{key:"filler",style:{height:E+"px"}}));for(W=0;W<this.maxVisibleLines&&(P.push(N),da=this.renderLine(a,f,m,N),y.push(da),da.key=
N.row%this.maxVisibleLines,W++,N=N.nextLine(),N););Object.assign(m.viewState,{scrollTop:v,scrollHeight:r,scrollBottom:v+r,heightBefore:E,textHeight:I,firstVisibleRow:x,lastVisibleRow:F,firstFullyVisibleRow:Y,lastFullyVisibleRow:J,visibleLines:P});m.debug&&Af.printViewState(m);return y}},{key:"renderLine",value:function(a,f,m,r){var v=r.textAndAttributes,x=[],y=v.length,E=m.fontSize;if(0<y)for(var F=0;F<y;F+=2){var I=v[F]||"\u00a0";var J=v[F+1];if("string"!==typeof I)x.push(I.isMorph?this.renderEmbeddedSubmorph(a,
f,I,J):Af.objectReplacementChar);else if(J){var P=J.fontSize&&(Af.obj.isString(J.fontSize)?J.fontSize:J.fontSize+"px");var N=J.fontFamily;var Y=J.fontWeight;var W=J.fontStyle;var da=J.textDecoration;var va=J.fontColor;var za=J.backgroundColor;var L=J.nativeCursor;var Z=J.textStyleClasses;var R=J.link;var X=J.lineHeight||X;var ja=J.textAlign||ja;var fa=J.wordSpacing||fa;var ua=J.letterSpacing||ua;var gb=J.paddingRight;var hb=J.paddingLeft;var ta=J.paddingTop;var na=J.paddingBottom;var pa=J.verticalAlign;
var La=J.textStroke;var Hb=J.quote||Hb;var fc="span";var Ob={};var Zb={style:Ob};P&&J.fontSize<E&&(E=J.fontSize);R&&(fc="a",(Zb.href=R)&&R.startsWith("http")&&(Zb.target="_blank"));if(R||L)Ob.pointerEvents="auto";P&&(Ob.fontSize=P);N&&(Ob.fontFamily=N);Y&&(Ob.fontWeight=Y);W&&(Ob.fontStyle=W);da&&(Ob.textDecoration=da);va&&(Ob.color=String(va));za&&(Ob.backgroundColor=String(za));L&&(Ob.cursor=L);gb&&(Ob.paddingRight=gb);hb&&(Ob.paddingLeft=hb);ta&&(Ob.paddingTop=ta);na&&(Ob.paddingBottom=na);pa&&
(Ob.verticalAlign=pa);La&&(Ob["-webkit-text-stroke"]=La);J.doit&&(Ob.pointerEvents="auto",Ob.cursor="pointer");Z&&Z.length&&(Zb.className=Z.join(" "));x.push(a(fc,Zb,I))}else x.push(I)}else x.push(a("br"));f={};m.fontSize>E&&(f.fontSize=E+"px");X&&(f.lineHeight=X);ja&&(f.textAlign=ja);ua&&(f.letterSpacing=ua);fa&&(f.wordSpacing=fa);m=a("div",{className:"line",style:f,dataset:{row:r.row}},x);if(Hb)for("number"!==typeof Hb&&(Hb=1);Hb--;)m=a("blockquote",{},m);return m}},{key:"renderEmbeddedSubmorph",
value:function(a,f,m,r){r=r||{};if(f)return a=f.render(m),a.properties.style.position="relative",a.properties.style.transform="",a.properties.style.textAlign="initial",r.paddingTop&&(a.properties.style.marginTop=r.paddingTop),r.paddingLeft&&(a.properties.style.marginLeft=r.paddingLeft),r.paddingRight&&(a.properties.style.marginRight=r.paddingRight),r.paddingBottom&&(a.properties.style.marginBottom=r.paddingBottom),a;f=m.extent;r=f.x+"px";f=f.y+"px";return a("div",{className:m.styleClasses.join(" "),
style:{width:r,height:f}},[])}},{key:"renderSelectionLayer",value:function(a,f,m,r){m=void 0===m?!1:m;r=void 0===r?2:r;if(!f)return[];var v=a.textLayout,x=f.start,y=f.end,E=f.cursorVisible,F=f.selectionColor,I=a.document,J=a.cursorColor,P=f.isReverse();x=v.boundsFor(a,x);var N=v.computeMaxBoundsForLineSelection(a,f),Y=v.boundsFor(a,y);Af.pt(x.x,N.y);N=Af.pt(Y.x,Y.y);y=x.height;Y=Y.height;x=P?Af.pt(x.x,x.y):N;m=this.cursor(x,P?y:Y,E,m,r,J);if(f.isEmpty())return[m];r=[];E=f.start.row;J=I.computeVerticalOffsetOf(E)+
a.padding.top();P=a.padding.left();for(var W,da,va;E<=f.end.row;){y=I.getLine(E);if(!(E<a.viewState.firstVisibleRow-50)){if(E>a.viewState.lastVisibleRow+50)break;x=v.charBoundsOfRow(a,E).map(Af.Rectangle.fromLiteral);Y=E==f.start.row;if(va=x[0].bottom()<Af.arr.last(x).top()){N=v.rangesOfWrappedLine(a,E).map(function(R){return R.intersect(f)});da=Y;var za=0,L=W=void 0,Z=$jscomp.makeIterator(N);for(N=Z.next();!N.done;N=Z.next())N=N.value,N.isEmpty()||(W=x.slice(N.start.column,N.end.column),za=da?Af.arr.min(W.map(function(R){return R.top()})):
za,L=Af.arr.max(W.map(function(R){return R.bottom()})),da=W[0],N=Af.pt(P+da.left(),J+za),da=Af.arr.last(W),W=Af.pt(P+da.right(),J+L),za=L,da=!1,r.push(Af.Rectangle.fromAny(N,W)))}va||(va=E==f.end.row,N=Y?f.start.column:0,za=va?f.end.column:x.length-1,Y=Y&&Af.arr.min(x.slice(N,za+1).map(function(R){return R.top()}))||0,Z=N>=za?5:0,da=x[N],N=Af.pt(P+(da?da.left():Af.arr.last(x).right()),J+Y),da=x[za],f.includingLineEnd?W=Af.pt(a.width-a.padding.right(),J+Y+y.height):(va=va&&f.end.column<=x.length-1,
W=Af.pt(P+(da?va?da.left():da.right():Af.arr.last(x).right())+Z,J+Y+y.height)),r.push(Af.Rectangle.fromAny(N,W)))}J+=y.height;E++}a=this.selectionLayerRounded(r,F,a);a.push(m);return a}},{key:"selectionLayerRounded",value:function(a,f,m){var r=[m={left:[],right:[]}];a=$jscomp.makeIterator(a);for(var v=a.next();!v.done;v=a.next()){v=v.value;x&&(x.left()>v.right()||x.right()<v.left())&&r.push(m={left:[],right:[]});m.left.push(v.topLeft(),v.bottomLeft());m.right.push(v.topRight(),v.bottomRight());var x=
v}x=[];m={};r=$jscomp.makeIterator(r);for(a=r.next();!a.done;m={$jscomp$loop$prop$pos$2678:m.$jscomp$loop$prop$pos$2678},a=r.next())if(a=a.value,a.left.length){m.$jscomp$loop$prop$pos$2678=a.left.reduce(function(P,N){return P.minPt(N)});v=a.left.concat(a.right.reverse());a=[];for(var y=0;y<v.length;y++){var E=v[y-1]||Af.arr.last(v),F=v[y],I=v[y+1]||Af.arr.first(v),J=E.subPt(F).normalized().scaleBy(6);E=F.addPt(J);E._next=J.scaleBy(-1);I=I.subPt(F).normalized().scaleBy(6);F=F.addPt(I);F._prev=I.scaleBy(-1);
a.push(E,F)}a=a.map(function(P){return function(N){return{position:N.subPt(P.$jscomp$loop$prop$pos$2678),isSmooth:!0,controlPoints:{next:N._next||Af.pt(0),previous:N._prev||Af.pt(0)}}}}(m));v=Af.getSvgVertices(a);F=a.map(function(P){return P.position}).reduce(function(P,N){return P.minPt(N)});y=F.y;F=F.x;a=a.map(function(P){return P.position}).reduce(function(P,N){return P.maxPt(N)});x.push(Af.h("svg",{namespace:"http://www.w3.org/2000/svg",version:"1.1",style:{position:"absolute",left:m.$jscomp$loop$prop$pos$2678.x+
"px",top:m.$jscomp$loop$prop$pos$2678.y+"px",width:a.x-F,height:a.y-y}},Af.h("path",{namespace:"http://www.w3.org/2000/svg",attributes:{d:v,fill:f.toString()}})))}return x}},{key:"cursor",value:function(a,f,m,r,v,x){return Af.h("div",{className:"newtext-cursor"+(r?" diminished":""),style:{left:a.x-Math.ceil(v/2)+"px",top:a.y+"px",width:v+"px",height:f+"px",display:m?"":"none",background:x||"black"}})}},{key:"renderMarkerLayer",value:function(a){var f=a.markers,m=a.textLayout,r=a.viewState,v=r.firstVisibleRow;
r=r.lastVisibleRow;var x=[];if(!f)return x;f=$jscomp.makeIterator(f);for(var y=f.next();!y.done;y=f.next()){var E=y.value;y=E.style;E=E.range;var F=E.start;E=E.end;if(!(E.row<v||F.row>r))if(F.row===E.row)x.push(this.renderMarkerPart(m,a,F,E,y));else{x.push(this.renderMarkerPart(m,a,F,a.lineRange(F.row).end,y));for(F=F.row+1;F<=E.row-1;F++){var I=a.lineRange(F);x.push(this.renderMarkerPart(m,a,I.start,I.end,y,!0))}x.push(this.renderMarkerPart(m,a,{row:E.row,column:0},E,y))}}return x}},{key:"renderMarkerPart",
value:function(a,f,m,r,v,x){x=void 0===x?!1:x;var y=f.document;var E=y.getLine(m.row);x?(a=f.padding,x=a.left(),m=a.top()+y.computeVerticalOffsetOf(m.row),a=x+E.width,E=E.height):(E=a.boundsFor(f,m),x=E.x,m=E.y,E=a.boundsFor(f,r),a=E.x,E=E.height);E=Math.ceil(E);return Af.h("div.newtext-marker-layer",{style:Object.assign({},v,{left:x+"px",top:m+"px",height:E+"px",width:a-x+"px"})})}},{key:"renderDebugLayer",value:function(a){var f=[],m=a.viewState,r=m.heightBefore,v=m.firstVisibleRow,x=m.lastVisibleRow;
m=m.visibleLines;var y=a.padding,E=a.scroll,F=E.x,I=E.y;E=y.left();var J=y.right(),P=y.top();y.bottom();f.push(Af.h("div.debug-info",{style:{left:F+E+"px",top:I+"px",width:a.width-J+"px"}},Af.h("span","visible rows: "+v+" - "+x)));for(y=0;v<x;y++,v++){var N=m[y];I=a.textLayout.lineCharBoundsCache.get(N);N=N.height;f.push(Af.h("div.debug-line",{style:{left:F+E+"px",top:P+r+"px",width:a.width-J+"px",height:N+"px"}},Af.h("span",String(v))));if(I)for(var Y=0;Y<I.length;Y++){var W=I[Y];f.push(Af.h("div.debug-char",
{style:{left:E+W.x+"px",top:P+r+W.y+"px",width:W.width+"px",height:W.height+"px"}}))}r+=N}return f}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"TextRenderer"}}],e,{pathInPackage:function(){return"text/renderer.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:9049,end:36001})}(void 0),Hxa=yda=Af.TextRenderer;
Af.extractHTMLFromTextMorph=UN;Af.extractHTMLFromTextMorph=UN;Af.default=yda;var Zr=lively.FreezerRuntime.recorderFor("lively.morphic/text/iy-goto-char.js");Zr.arr=Mf;Zr.eqPosition=zw;Zr.KeyHandler=OX;Zr.commands={activate:{name:"[IyGotoChar] activate",exec:function(b,e){e=void 0===e?{backwards:!1}:e;Zr.IyGotoCharKeyHandler.installInto(b,e.backwards);return!0}},moveTo:{name:"[IyGotoChar] move to",exec:function(b,e){b.saveMark();var l=b.selection,a=l.lead,f=a.row,m=a.column;a=!!b.activeMark||!l.isEmpty();
var r={row:f,column:m-1};b=b.document[e.backwards?"scanBackward":"scanForward"](r,function(v,x){return v!==e.needle||Zr.eqPosition(r,x)?null:x});if(!b)return!0;b.column++;l.lead=b;a||(l.anchor=b);return!0},multiSelectAction:"forEach",readOnly:!0}};var NQ=Zr.commands.activate;Zr.activate=NQ;Zr.activate=NQ;Zr.activate=NQ;(function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/text/iy-goto-char.js"),l=e.hasOwnProperty("IyGotoCharKeyHandler")&&"function"===typeof e.IyGotoCharKeyHandler?e.IyGotoCharKeyHandler:
e.IyGotoCharKeyHandler=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Pb(l,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){a=void 0===a?!1:a;Pb._get(Object.getPrototypeOf(l.prototype),Symbol.for("lively-instance-initialize"),this).call(this);this.charToFind=void 0;this.backwards=a}},{key:"isIyGoToChar",get:function(){return!0}},{key:"uninstallFrom",value:function(a){a._cachedKeyhandlers=null;
Zr.arr.remove(a._keyhandlers||[],this)}},{key:"eventCommandLookup",value:function(a,f){var m=f.keyCombo,r=m.startsWith("input-");if(f.onlyModifiers||m.startsWith("Shift-")||!r&&!f.isModified&&!f.isFunctionKey)return{command:"null",passEvent:!0};f=r&&m.slice(6);if(!this.charToFind)if(r)this.charToFind=f;else return this.uninstallFrom(a),null;return f!==this.charToFind?(this.uninstallFrom(a),null):{command:Zr.commands.moveTo,args:{backwards:this.backwards,needle:f}}}}],[{key:Symbol.for("__LivelyClassName__"),
get:function(){return"IyGotoCharKeyHandler"}},{key:"installInto",value:function(a,f){f=void 0===f?!1:f;a.keyhandlers.filter(function(m){return m.isIyGoToChar}).forEach(function(m){return m.uninstallFrom(a)});a._cachedKeyhandlers=null;a._keyhandlers=(a._keyhandlers||[]).concat(new this(f))}}],e,{pathInPackage:function(){return"text/iy-goto-char.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",
version:"0.1.2"}}},{start:1063,end:3067})})(Zr.KeyHandler);var Ki=lively.FreezerRuntime.recorderFor("lively.morphic/text/commands.js");Ki.chain=Bp;Ki.arr=Mf;Ki.string=Th;Ki.date=Cw;Ki.pt=Ei;Ki.Range=UA;Ki.eqPosition=zw;Ki.commands=[{name:"clipboard copy",doc:"placeholder for native copy",scrollCursorIntoView:!1,exec:function(b){b.selection.isEmpty()&&b.selectLine(b.cursorPosition.row);return!0}},{name:"manual clipboard copy",doc:"attempts to copy selection via browser interface",scrollCursorIntoView:!1,
multiSelectAction:"single",exec:function(b,e){e=void 0===e?{collapseSelection:!0,delete:!1,dontTryNativeClipboard:!1}:e;var l=b.selection,a=l.text,f=e.hasOwnProperty("collapseSelection")?e.collapseSelection:!0;b.saveMark(l.anchor);b.activeMark=null;(l.isMultiSelection?l.selections.slice():[l]).forEach(function(m){var r=m.isEmpty()?b.lineRange():m.range,v=b.textInRange(r);b.env.eventDispatcher.killRing.add(v);e.delete?b.deleteText(r):!m.isEmpty()&&f&&m.collapse(m.lead)});e.dontTryNativeClipboard||
b.env.eventDispatcher.doCopy(a);return!0}},{name:"clipboard cut",doc:"placeholder for native cut",exec:function(b){b.selection.isEmpty()&&b.selectLine(b.cursorPosition.row,!0);return!0}},{name:"clipboard paste",doc:"placeholder for native paste",exec:function(){return!0}},{name:"manual clipboard paste",doc:"attempts to paste from the clipboard to lively \u2013 currently requires browser extension!",multiSelectAction:"single",exec:function(b,e){e=void 0===e?{killRingCycleBack:!1}:e;var l,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){a=
b.env.eventDispatcher.killRing;e.killRingCycleBack&&(Ki.arr.last(Ki.arr.pluck(b.commandHandler.history,"name"))||"").includes("clipboard paste")&&(l=a.back());!l&&a.isCycling()&&(l=a.yank());l||(l=a.yank());b.selection.isMultiSelection?(b.undoManager.group(),b.selection.selections.slice(0,-1).reverse().map(function(m,r){r=a.pointer-1-r;0>r&&(r=a.buffer.length-1);return{selection:m,pasted:a.buffer[r]||""}}).concat({selection:b.selection.defaultSelection,pasted:l}).forEach(function(m){return m.selection.text=
m.pasted}),b.undoManager.group()):l&&(b.undoManager.group(),b.selection.text=l,b.undoManager.group());return f.return(!0)})}},{name:"browse clipboard",exec:function(b){var e,l,a,f,m,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){if(1==v.nextAddress)return e=b.env.eventDispatcher.killRing,l=e.pointer,a=e.buffer,f=a.map(function(x){return{isListItem:!0,string:Ki.string.truncate(x,80).replace(/\n/g,""),value:x}}),v.yield(b.world().filterableListPrompt("select items to paste",f,{preselect:l,
multiSelect:!0}),2);m=v.yieldResult;r=m.selected;r.length&&(b.undoManager.group(),b.insertTextAndSelect(r.join("\n")),b.undoManager.group());return v.return(!0)})}},{name:"text undo",doc:"undo text changes",multiSelectAction:"single",exec:function(b){b.textUndo();return!0}},{name:"text redo",doc:"redo text changes",multiSelectAction:"single",exec:function(b){b.textRedo();return!0}},{name:"select all",doc:"Selects entire text contents.",scrollCursorIntoView:!1,multiSelectAction:"single",exec:function(b){b.saveMark();
b.selectAll();return!0}},{name:"delete backwards",doc:"Delete the character in front of the cursor or the selection.",exec:function(b){if(b.rejectsInput())return!1;if(b.editorPlugin&&"function"===typeof b.editorPlugin.cmd_newline&&b.editorPlugin.cmd_delete_backwards())return!0;var e=b.selection;e.isEmpty()&&e.growLeft(1);e.text="";e.collapse();b.activeMark&&(b.activeMark=null);return!0}},{name:"delete",doc:"Delete the character following the cursor or the selection.",exec:function(b){var e=b.selection;
if(b.rejectsInput())return!1;e.isEmpty()&&e.growRight(1);e.text="";e.collapse();b.activeMark&&(b.activeMark=null);return!0}},{name:"indent",scrollCursorIntoView:!1,exec:function(b){b.undoManager.group();b.withSelectedLinesDo(function(e,l){return b.insertText(b.tab,l.start)});b.undoManager.group();return!0}},{name:"outdent",scrollCursorIntoView:!1,exec:function(b){b.undoManager.group();b.withSelectedLinesDo(function(e,l){return e.startsWith(b.tab)&&b.deleteText({start:l.start,end:{row:l.start.row,
column:b.tab.length}})});b.undoManager.group();return!0}},{name:"indent according to mode",exec:function(b,e){e=void 0===e?{}:e;var l,a,f,m,r,v,x,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(E){if(1==E.nextAddress){l=b.editorPlugin&&b.editorPlugin.mode;if(!l)return E.return(!0);m=e.hasOwnProperty("undo")?e.undo:!0;e.hasOwnProperty("firstRow")&&e.hasOwnProperty("lastRow")?(r=e,a=r.firstRow,f=r.lastRow):b.selection.isEmpty()?a=f=b.cursorPosition.row:(v=b.selection.selectedRows,a=v.first,
f=v.last);return E.yield(System.import("lively.ide/editor-modes.js"),2)}x=E.yieldResult;y=x.indentLines;m&&b.undoManager.group();y(b,l,a,f,"smart",!0,e);m&&b.undoManager.group();return E.return(!0)})}},{name:"tab - snippet expand or indent",scrollCursorIntoView:!0,exec:function(b){var e=b.snippets.find(function(l){return l.canExpand(b)});return e?(e.expandAtCursor(b),!0):b.selection.isEmpty()?b.execCommand("insertstring",{string:b.tab}):b.execCommand("indent according to mode")}},{name:"browse snippets",
scrollCursorIntoView:!0,exec:function(b){var e,l,a,f;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){if(1==m.nextAddress)return e=b.snippets.map(function(r){return{isListItem:!0,string:r.trigger+" - "+r.expansion,value:r}}),m.yield(b.world().filterableListPrompt("select snippet",e,{requester:b}),2);l=m.yieldResult;a=$jscomp.makeIterator(l.selected);(f=a.next().value)&&f.expandAtCursor(b);return m.return(!0)})}},{name:"transpose chars",exec:function(b){if(b.selection.isEmpty()){var e=
b.cursorPosition,l=e.row,a=e.column;e=Ki.Range.create(l,a-1,l,a+1);var f=b.getLine(l);l=f[a-1];a=f[a];l&&a&&b.replace(e,a+l,!0)}return!0}},{name:"cycle selection contents",documentation:"If there are multiple selections, will take the text of the first one and replace the second one with it, the text of the second will replace the third, the last selection contents will replace the contents of the first.",multiSelectAction:"single",exec:function(b){var e=b.selection.selections;b.undoManager.group();
e.reduce(function(l,a){var f=a.text;a.text=l;return f},Ki.arr.last(e).text);b.undoManager.group();return!0}},{name:"go left",doc:"Move the cursor 1 character left. At the beginning of a line move the cursor up. If a selection is active, collapse the selection left.",exec:function(b){b.activeMark?b.selection.selectLeft(1):b.selection.goLeft(1);return!0}},{name:"go right",doc:"Move the cursor 1 character right. At the end of a line move the cursor down. If a selection is active, collapse the selection right.",
exec:function(b){b.activeMark?b.selection.selectRight(1):b.selection.goRight(1);return!0}},{name:"go up",doc:"Move the cursor 1 line. At the end of a line move the cursor down. If a selection is active, collapse the selection right.",scrollCursorIntoView:!0,exec:function(b){b.activeMark?b.selection.selectUp(1):b.selection.goUp(1,!0);return!0}},{name:"go down",exec:function(b){b.activeMark?b.selection.selectDown(1):b.selection.goDown(1,!0);return!0}},{name:"select left",exec:function(b){b.selection.selectLeft(1);
return!0}},{name:"select right",exec:function(b){b.selection.selectRight(1);return!0}},{name:"select up",exec:function(b){b.selection.selectUp(1,!0);return!0}},{name:"select down",exec:function(b){b.selection.selectDown(1,!0);return!0}},{name:"select line",exec:function(b){var e=b.selection,l=e.lead.row,a=b.lineRange(l,!1);e.range=e.range.equals(a)?b.lineRange(l,!0):a;return!0}},{name:"goto line start",exec:function(b,e){e=void 0===e?{select:!1}:e;e=e.select||!!b.activeMark;var l=b.selection,a=l.lead;
b=b.screenLineRange(a,!0);l.lead=Ki.eqPosition(a,b.start)?{column:0,row:a.row}:b.start;!e&&(l.anchor=l.lead);return!0}},{name:"goto line end",exec:function(b,e){e=void 0===e?{select:!1}:e;e=e.select||!!b.activeMark;var l=b.selection;b=b.screenLineRange(l.lead,!0);l.lead=b.end;!e&&(l.anchor=l.lead);return!0}},{name:"goto page up",exec:function(b){b.pageUpOrDown({direction:"up",select:!!b.activeMark});return!0}},{name:"goto page down",exec:function(b){b.pageUpOrDown({direction:"down",select:!!b.activeMark});
return!0}},{name:"goto page up and select",exec:function(b){b.pageUpOrDown({direction:"up",select:!0});return!0}},{name:"goto page down and select",exec:function(b){b.pageUpOrDown({direction:"down",select:!0});return!0}},{name:"goto start",exec:function(b,e){e=void 0===e?{select:!!b.activeMark}:e;b.gotoDocumentStart(Object.assign({},e));return!0}},{name:"goto end",exec:function(b,e){e=void 0===e?{select:!!b.activeMark}:e;b.gotoDocumentEnd(Object.assign({},e));return!0}},{name:"goto paragraph above",
exec:function(b,e){e=void 0===e?{select:!!b.activeMark}:e;var l=b.paragraphRangeAbove(b.cursorPosition.row);l.start.row--;b.selection.lead=l.start;e.select||b.collapseSelection();return!0}},{name:"goto paragraph below",exec:function(b,e){e=void 0===e?{select:!!b.activeMark}:e;var l=b.paragraphRangeBelow(b.cursorPosition.row);l.end.row++;b.selection.lead=l.end;e.select||b.collapseSelection();return!0}},{name:"move cursor to screen bottom in 1/3 steps",readOnly:!0,exec:function(b){var e=!!b.activeMark,
l=b.cursorPosition,a=b.textLayout.firstFullVisibleLine(b),f=b.textLayout.lastFullVisibleLine(b),m=a+Math.floor((f-a)/2);if(l.row<a)l.row=a;else if(l.row<m)l.row=m;else if(l.row<f)l.row=f;else return!0;b.selection.lead=l;e||(b.selection.anchor=b.selection.lead);return!0}},{name:"move cursor to screen top in 1/3 steps",readOnly:!0,exec:function(b){var e=!!b.activeMark,l=b.cursorPosition,a=b.textLayout.firstFullVisibleLine(b),f=b.textLayout.lastFullVisibleLine(b),m=a+Math.floor((f-a)/2);if(l.row<=a)return!0;
l.row=l.row<=m?a:l.row<=f?m:f;b.selection.lead=l;e||(b.selection.anchor=b.selection.lead);return!0}},{name:"goto line",exec:function(b){var e,l,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){if(1==f.nextAddress)return e=!!b.activeMark,l=Number,f.yield(b.world().prompt("Enter line number"),2);a=l(f.yieldResult);isNaN(a)||(e?b.selection.lead={row:a,column:0}:b.cursorPosition={row:a,column:0},b.scrollCursorIntoView(),b.focus());return f.return(!0)})}},{name:"join line",exec:function(b,
e){e=void 0===e?{withLine:"before"}:e;var l=b.selection,a=l.start,f=l.end;l=l.lead;if(!b.selection.isEmpty()){if(a.row===f.row)return!0;e=b.undoManager.ensureNewGroup(b,"join line");f=Ki.arr.range(0,f.row-1-a.row).map(function(m){return b.joinLine(a.row)});b.undoManager.group(e);b.selection.isMultiSelection&&(b.cursorPosition=f[0],f.slice(1).forEach(function(m){return b.selection.addRange({start:m,end:m})}));return!0}f=l.row;if("before"===e.withLine&&0>=f||"after"===e.withLine&&f>=b.document.endPosition.row)return!0;
b.undoManager.group();b.cursorPosition=b.joinLine("before"===e.withLine?f-1:f);b.undoManager.group();return!0}},{name:"split line",exec:function(b){var e=b.cursorPosition,l=b.getLine(e.row).match(/^\s*/)[0].length;b.insertText("\n"+" ".repeat(l),e);b.cursorPosition=e;return!0}},{name:"insert line",exec:function(b,e){e=void 0===e?{where:"above"}:e;var l=b.cursorPosition.row,a=b.getLine(l).match(/^\s*/)[0].length;"below"===e.where&&l++;b.insertText(" ".repeat(a)+"\n",{column:0,row:l});b.cursorPosition=
{column:a,row:l};return!0}},{name:"duplicate line or selection",exec:function(b){b.undoManager.group();var e=b.selection.end;if(b.selection.isEmpty())b.insertText(b.getLine(e.row)+"\n",{column:0,row:e.row+1});else{var l=b.selection.range;b.insertText(b.selection.text,e);b.selection=l}b.undoManager.group();return!0}},{name:"delete emtpy line or until end of line",exec:function(b){var e=b.cursorPosition,l=b.getLine(e.row);if(Ki.eqPosition(b.document.endPosition,e))return!0;e=l.trim()?{start:e,end:{row:e.row,
column:l.length}}:{start:{row:e.row,column:0},end:{row:e.row+1,column:0}};b.env.eventDispatcher.doCopy(b.textInRange(e));b.undoManager.group();b.deleteText(e);b.undoManager.group();return!0}},{name:"delete left until beginning of line",exec:function(b){b.activeMark&&(b.activeMark=null);if(!b.selection.isEmpty())return b.selection.text="",!0;var e=b.lineRange(),l=b.cursorPosition;if(Ki.eqPosition({row:l.row,column:0},l))return!0;e={start:Ki.eqPosition(e.start,l)?{row:l.row,column:0}:e.start,end:l};
b.deleteText(e);return!0}},{name:"move lines up",multiSelectAction:"single",exec:function(b){var e=b.selection;if(b.inMultiSelectMode()){var l=e.selections.map(function(m){return m.range});l.slice().sort(Ki.Range.compare).forEach(function(m){b.selection=m;b.execCommand("move lines up")});l.forEach(function(m){m.start.row--;m.end.row--});b.selection.ranges=l;return!0}e.isEmpty()||0!==e.end.column||e.growRight(-1);l=e.start;e=e.end;var a=b.getLine(l.row-1),f=b.undoManager.ensureNewGroup(b);b.insertText(a+
"\n",{row:e.row+1,column:0});b.deleteText({start:{row:l.row-1,column:0},end:{row:l.row,column:0}});b.undoManager.group(f);return!0}},{name:"move lines down",multiSelectAction:"single",exec:function(b){var e=b.selection;if(b.inMultiSelectMode()){var l=e.selections.map(function(m){return m.range});l.slice().sort(Ki.Range.compare).reverse().forEach(function(m){b.selection=m;b.execCommand("move lines down")});l.forEach(function(m){m.start.row++;m.end.row++});b.selection.ranges=l;return!0}e.isEmpty()||
0!==e.end.column||e.growRight(-1);var a=e.range,f=a;l=f.start;f=f.end;e.isEmpty()?a={start:{row:l.row,column:0},end:{row:l.row+1,column:0}}:0!==f.column&&(a={start:l,end:{row:f.row+1,column:0}});e=b.undoManager.ensureNewGroup(b);a=b.deleteText(a);b.insertText(a,{row:l.row+1,column:0});b.undoManager.group(e);b.selection={start:Object.assign({},l,{row:l.row+1}),end:Object.assign({},f,{row:f.row+1})};return!0}},{name:"old select word",exec:function(b){var e=b.selection;e.range=b.wordAt(e.lead).range;
return!0}},{name:"select word",exec:function(b){var e=b.selection;if(b=b.selectMatchingBrackets(b.textString,b.positionToIndex(e.lead)))e.range={start:b[0],end:b[1]+1};return!0}},{name:"select word right",exec:function(b){var e=b.selection;e.anchor=b.wordRight(e.end).range.end;return!0}},{name:"goto word left",exec:function(b,e){e=void 0===e?{select:!1}:e;e=e.select||!!b.activeMark;var l=b.wordLeft().range;b.selection.lead=l.start;e||(b.selection.anchor=l.start);return!0}},{name:"goto word right",
exec:function(b,e){e=void 0===e?{select:!1}:e;e=e.select||!!b.activeMark;var l=b.wordRight().range;b.selection.lead=l.end;e||(b.selection.anchor=l.end);return!0}},{name:"delete word right",exec:function(b){b.undoManager.group();var e=b.wordRight().range.end;e={start:b.cursorPosition,end:e};b.env.eventDispatcher.doCopy(b.textInRange(e));b.deleteText(e);b.undoManager.group();return!0}},{name:"delete word left",exec:function(b){b.undoManager.group();var e={start:b.wordLeft().range.start,end:b.cursorPosition};
b.deleteText(e);b.undoManager.group();return!0}},{name:"goto matching right",exec:function(b,e){e=void 0===e?{select:!!b.activeMark}:e;var l=e.pairs||{"{":"}","[":"]","(":")","<":">"};if(l=b.findMatchingForward(b.cursorPosition,"right",l)||b.findMatchingForward(b.cursorPosition,"left",l))b.selection.lead=l,e.select||(b.selection.anchor=b.selection.lead);return!0}},{name:"goto matching left",exec:function(b,e){e=void 0===e?{select:!!b.activeMark}:e;var l=e.pairs||{"}":"{","]":"[",")":"(",">":"<"};
if(l=b.findMatchingBackward(b.cursorPosition,"left",l)||b.findMatchingBackward(b.cursorPosition,"right",l))b.selection.lead=l,e.select||(b.selection.anchor=b.selection.lead);return!0}},{name:"realign top-bottom-center",doc:"Cycles through centering the cursor position, aligning it at the top, aligning it at the bottom.",scrollCursorIntoView:!1,multiSelectAction:"single",exec:function(b){var e=b.charBoundsFromTextPosition(b.cursorPosition),l=e.topLeft();e=b.height-e.height;var a=b.scroll,f=a.x;a=a.y;
a=2>Math.abs(l.y-a)?l.y-e:2>Math.abs(l.y-a-.5*e)?l.y:l.y-.5*e;b.scroll=Ki.pt(f,a);return!0}},{name:"reverse selection",doc:"switches the selection lead and anchor",exec:function(b){var e=b.selection;if(e.isEmpty()){var l=b.popSavedMark();l&&(b.saveMark(b.cursorPosition),e.lead=l.position)}else e.reverse();return!0}},{name:"toggle active mark",doc:"....",handlesCount:!0,multiSelectAction:"single",exec:function(b,e,l){var a=b.activeMark;e=b.selection;var f=!e.isEmpty();if(4===l){if(b=b.popSavedMark())e.lead=
b.position,f||(e.anchor=e.lead);return!0}if(!a&&!f)return b.activeMark=e.lead,!0;b.saveMark(a||e.anchor);b.activeMark=null;f&&(b.inMultiSelectMode()?e.selections:[e]).forEach(function(m){return m.anchor=m.lead});return!0}},{name:"fit text to column",handlesCount:!0,multiSelectAction:"forEach",exec:function(b,e,l){function a(x,y,E){if(x.length<=f)return[y+x.trim()];E=x.slice(0,f);var F=Ki.arr.last(Ki.string.reMatches(E,r)),I=F&&0<F.start?F.start:f;F=E.slice(0,I);x=y+(E.slice(I)+x.slice(f)).trimLeft();
return[F].concat(a(x,y))}if(4===l)return b.execCommand("join line");b.selection.isEmpty()&&b.selectLine();e=b.selection;var f=l||80,m=e.selectedRows;l=e.range;var r=/[ ]+/g,v=/^[\s\t]+/;e=Ki.string.paragraphs(Ki.arr.range(m.first,m.last).map(function(x){return b.getLine(x)}).join("\n"),{keepEmptyLines:!0});e=Ki.chain(e.map(function(x){if(!/^\s*$/.test(x)){x=x.split("\n").join(" ");if(""===x.trim())x=[""];else{var y=x.match(v);y=y?y[0]:"";x=a(y+x.trim(),y)}x=x.join("\n")+"\n"}return x})).flatten().value().join("\n");
b.undoManager.group();b.replace(l,e);b.undoManager.group();return!0}},{name:"lowercase",exec:function(b){b.undoManager.group();b.selection.isEmpty()&&(b.selection=b.wordAt().range);b.selection.text=b.selection.text.toLowerCase();b.undoManager.group();return!0}},{name:"remove trailing whitespace",exec:function(b){b.undoManager.group();var e=0;b.withLinesDo(0,b.documentEndPosition.row,function(l,a){return l.match(/\s+$/)&&++e&&b.replace(a,l.trimRight())});b.world().setStatusMessage(e+" lines cleaned up");
b.undoManager.group();return!0}},{name:"uppercase",exec:function(b){b.undoManager.group();b.selection.isEmpty()&&(b.selection=b.wordAt().range);b.selection.text=b.selection.text.toUpperCase();b.undoManager.group();return!0}},{name:"newline",exec:function(b){var e=b.cursorPosition,l=b.getLine(e.row),a=l.match(/^\s*/)[0].length;b.undoManager.group();!l.trim()&&a&&(b.deleteText({start:{row:e.row,column:0},end:{row:e.row,column:a}}),e.column=0);if(b.editorPlugin&&"function"===typeof b.editorPlugin.cmd_newline&&
b.editorPlugin.cmd_newline(e,l,a))return!0;b.selection.text="\n"+" ".repeat(a);b.selection.collapseToEnd();b.undoManager.group();return!0}},{name:"insertstring",exec:function(b,e){var l=e=void 0===e?{string:null,undoGroup:!1}:e;e=l.string;l=l.undoGroup;var a="string"===typeof e&&e.length;a||console.warn("command insertstring called with not string value");if(b.rejectsInput()||!a)return!1;b.saveActiveMarkAndDeactivate();if(b.editorPlugin&&"function"===typeof b.editorPlugin.cmd_insertstring&&b.editorPlugin.cmd_insertstring(e))return!0;
a=b.selection;var f=!a.isEmpty();f&&b.undoManager.group();var m=a.lead;a.replace(e,!0,!0,!0,!(1===e.length&&"\n"!==e&&0<m.column));a.collapseToEnd();f&&b.undoManager.group();l&&(/^[\s\.,\?\+=]+$/.test(e)||"number"!==typeof l?b.undoManager.group():b.undoManager.groupLater(l));return!0}},{name:"toggle line wrapping",scrollCursorIntoView:!1,multiSelectAction:"single",exec:function(b){b.keepPosAtSameScrollOffsetWhile(function(){return b.lineWrapping=b.lineWrapping?!1:b.fontMetric.isProportional(b.fontFamily)?
!0:"by-chars"});return!0}},{name:"cancel input",scrollCursorIntoView:!1,multiSelectAction:"single",exec:function(b,e,l,a){b.env.eventDispatcher.resetKeyInputState();b.selection.disableMultiSelect&&b.selection.disableMultiSelect();b.selection.isEmpty()||(b.selection.anchor=b.selection.lead);b.activeMark&&(b.activeMark=null);return!0}}];Ki.usefulEditorCommands=[{name:"insert date",handlesCount:!0,exec:function(b,e,l){e=Ki.date.format(new Date,l?"mediumDate":"isoDate");b.undoManager.group();b.insertText(e);
b.undoManager.group();return!0}},{name:"[todo] toggle todo marker",exec:function(b){var e=b.selection;e.isEmpty()&&b.selectLine();b=/\[\s*\]/g;var l=/\[X\]/g,a=e.text;a=b.test(a)?a.replace(b,"[X]"):l.test(a)?a.replace(l,"[ ]"):"[ ] "+a.trimLeft();e.text=a;return!0}},{name:"selected lines: sort",exec:function(b){var e=b.selection,l=e.start.row;e=e.end.row;var a=[];b.withLinesDo(l,e,function(f){var m=a.findIndex(function(r){return r>f});-1<m?a.splice(m,0,f):a.push(f)});b.undoManager.group();b.replace({start:{row:l,
column:0},end:{row:e+1,column:0}},a.join("\n")+"\n");b.undoManager.group();return!0}},{name:"selected lines: reverse",exec:function(b){var e=b.selection,l=e.start.row;e=e.end.row;var a=[];b.withLinesDo(l,e,function(f){return a.push(f)});b.undoManager.group();b.replace({start:{row:l,column:0},end:{row:e+1,column:0}},a.reverse().join("\n")+"\n");b.undoManager.group();return!0}},{name:"selected lines: remove duplicates (uniq)",exec:function(b){var e=b.selection,l=e.start.row;e=e.end.row;var a=[];b.withLinesDo(l,
e,function(f){return Ki.arr.pushIfNotIncluded(a,f)});b.undoManager.group();b.replace({start:{row:l,column:0},end:{row:e+1,column:0}},a.join("\n")+"\n");b.undoManager.group();return!0}},{name:"change string inflection",handlesCount:!0,multiSelectAction:"single",exec:function(b,e,l){function a(I,J){var P,N,Y=f(I).trim();"uppercased"===Y?P=/\s*[A-Z0-9]+/g:"dashed"===Y?P=/-\w/g:"spaced"===Y&&(P=/\s+.?/g);"uppercased"===J?N=function(W){return W.trim().replace(/^-/,"").toUpperCase()}:"dashed"===J?N=function(W){return"-"+
W.trim().replace(/^-/,"").toLowerCase()}:"spaced"===J&&(N=function(W){return" "+W.trim().replace(/^-/,"").toLowerCase()});return I.replace(P,N)}function f(I){return I.match(/[A-Z]/)?"uppercased":I.match(/-/)?"dashed":I.match(/\s/)?"spaced":"unknown"}var m,r,v,x,y,E,F;return $jscomp.asyncExecutePromiseGeneratorProgram(function(I){if(1==I.nextAddress){b.selection.isEmpty()&&(b.selection=b.wordAt().range);m=b.selection.ranges;r=b.textInRange(m[0]);if(!r)return b.setStatusMessage("Please select some text"),
I.return(!0);v=f(r);x=Ki.arr.without(["uppercased","dashed","spaced"],v);return I.yield(b.world().listPrompt("Convert "+v+" into?",x,{}),2)}y=I.yieldResult;E=$jscomp.makeIterator(y.selected);F=E.next().value;if(!F)return I.return(!0);b.undoManager.group();m.forEach(function(J,P){P=b.textInRange(J);P=a(P,F);b.replace(J,P)});b.undoManager.group();b.focus();return I.return(!0)})}},{name:"spell check word",exec:function(b,e){var l,a,f,m,r,v,x;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){switch(y.nextAddress){case 1:return l=
b.wordAt(),l.string?y.yield(System.import("lively.ide/shell/spell-checker.js"),2):(b.setStatusMessage("no word for spellcheck!"),y.return(!0));case 2:return a=y.yieldResult,f=a.spellCheckWord,y.yield(f(l.string),3);case 3:return m=y.yieldResult,m.length?y.yield(b.world().filterableListPrompt("Choose replacement for "+l.string,m),4):(b.setStatusMessage("no suggestions for word "+l.string),y.return(!0));case 4:r=y.yieldResult;v=$jscomp.makeIterator(r.selected);if(x=v.next().value)b.undoManager.group(),
b.replace(l.range,x),b.undoManager.group();return y.return(!0)}})}},{name:"[shell] run shell command on region",multiSelectAction:"single",exec:function(b,e){var l,a,f,m,r,v,x,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(E){switch(E.nextAddress){case 1:return a=(l=b.textInRange(b.selection))&&0!==l.length?{stdin:l}:{},E.yield(b.world().prompt("Enter shell command to run on region.",{historyId:"lively.ide.execShellCommand"}),2);case 2:return f=E.yieldResult,E.yield(System.import("lively.ide/shell/shell-interface.js"),
3);case 3:m=E.yieldResult;r=m.runCommand;if(!f)return E.return(b.setStatusMessage("No command entered, aborting...!"));v=r(f,a);E.setCatchFinallyBlocks(4);return E.yield(v.whenDone(),6);case 6:x=v.output.trim();b.undoManager.group();b.selection.selections.forEach(function(F){return F.text=x});b.undoManager.group();E.leaveTryBlock(5);break;case 4:y=E.enterCatchBlock(),b.showError(y);case 5:return E.return(!0)}})}},{name:"open file at cursor",exec:function(b,e){var l,a,f,m,r,v,x,y,E;return $jscomp.asyncExecutePromiseGeneratorProgram(function(F){if(1==
F.nextAddress)return b.getLine(),l=b.cursorPosition.row,a=b.document.scanBackward(b.cursorPosition,function(I,J){return(0>=J.column||I.match(/\s/))&&J})||{row:0,column:0},f=b.document.scanForward(b.cursorPosition,function(I,J){return(J.row!=l||I.match(/\s/))&&J})||b.documentEndPosition,m=b.textInRange({start:a,end:f}).replace(/\s/g,""),r=m.split(":"),v=r[0].match(/^file|http/)?r.shift()+":"+r.shift():r.shift(),r[0].match(/^[0-9]+$/)&&(v+=":"+r.shift()),F.yield(System.import("lively.ide/text-editor.js"),
2);x=F.yieldResult;y=x.default;E=y.openInWindow();E.location=v;return F.return(E)})}},{name:"run code on text morph",doc:"...",exec:function(b,e){var l,a,f,m,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){switch(v.nextAddress){case 1:return l={targetModule:"lively://code-on-text-morph",context:b},v.yield(b.world().editPrompt("Run code on selection. Use this.selection.text to access it",{requester:b,mode:"js",evalEnvironment:l,historyId:"run-code-on-text-morph-hist"}),2);case 2:return a=
v.yieldResult,v.setCatchFinallyBlocks(3),b.undoManager.group(),v.yield(lively.vm.runEval(a,l),5);case 5:m=v.yieldResult;b.undoManager.group();f=m.isError?m.value:null;v.leaveTryBlock(4);break;case 3:f=r=v.enterCatchBlock();case 4:return f&&b.showError(f),v.return(void 0)}})}},{name:"change editor mode",exec:function(b){var e,l,a,f,m,r,v,x,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(E){switch(E.nextAddress){case 1:return e=function(F){return!F.endsWith("ide/editor-plugin.js")&&F.endsWith("editor-plugin.js")},
E.yield(lively.modules.getPackage("lively.ide").resources(e),2);case 2:return l=E.yieldResult,a=b.editorPlugin||{},f=a.shortName,m=0,r=["<no mode>"].concat(l.map(function(F,I){var J=F.url.match(/([^\/]+)\/editor-plugin.js/)[1];J===f&&(m=I);return{isListItem:!0,string:J,value:F}})),E.yield(b.world().filterableListPrompt("choose mode",r,{requester:b,preselect:m,historyId:"lively.morphic/text-change-editor-mode-hist",fuzzy:!0}),3);case 3:v=E.yieldResult;x=$jscomp.makeIterator(v.selected);y=x.next().value;
if(!y)return E.return();if("<no mode>"!==y){E.jumpTo(4);break}return E.yield(b.changeEditorMode(null),5);case 5:return b.resetTextAttributes(),E.return();case 4:if(y.isLoaded){E.jumpTo(6);break}return E.yield(lively.modules.module(y.url).load(),6);case 6:return E.yield(b.changeEditorMode(y.url),0)}})}},{name:"report token at cursor",exec:function(b){var e,l,a,f;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){e=b.tokenAt(b.cursorPosition)||{};l=e.token;a=e.start;f=e.end;b.setStatusMessage(l?
l+" "+a.column+" => "+f.column:"no token");return m.return(!0)})}}];Ki.commands.push.apply(Ki.commands,$jscomp.arrayFromIterable(Ki.usefulEditorCommands));Ki.iyGotoCharActivate=NQ;Ki.commands.push(Ki.iyGotoCharActivate);Ki.searchCommands=LQ;Ki.commands.push.apply(Ki.commands,$jscomp.arrayFromIterable(Ki.searchCommands));var zda=Ki.commands;Ki.default=zda;var hd=lively.FreezerRuntime.recorderFor("lively.morphic/text/morph.js");hd.Rectangle=He;hd.Point=Dg;hd.rect=dj;hd.Color=xg;hd.pt=Ei;hd.string=Th;
hd.num=Um;hd.obj=ng;hd.fun=vn;hd.promise=hg;hd.arr=Mf;hd.signal=Xl;hd.noUpdate=Jm;hd.connect=Dl;hd.disconnect=mg;hd.bowser=gt;hd.morph=qc;hd.touchInputDevice=Sr;hd.sanitizeFont=yb;hd.config=em;hd.Morph=ql;hd.Selection=IQ;hd.MultiSelection=JQ;hd.Document=Exa;hd.objectReplacementChar="\ufffd";hd.Anchor=cG;hd.Range=UA;hd.eqPosition=zw;hd.lessPosition=yw;hd.KeyHandler=OX;hd.UndoManager=$I;hd.TextSearcher=KQ;hd.TextLayout=Gxa;hd.Renderer=Hxa;hd.extractHTMLFromTextMorph=UN;hd.commands=zda;hd.textAndAttributesWithSubRanges=
TN;hd.serializeMorph=gI;hd.deserializeMorph=hI;hd.getSvgVertices=Vx;hd.renderSubTree=Jz;hd.ShadowObject=it;hd.getClassName=tr;var dv=Ha("ac",function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/text/morph.js"),l=e.hasOwnProperty("Text")&&"function"===typeof e.Text?e.Text:e.Text=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Pb(l,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){var f=
a=void 0===a?{}:a,m=f.position,r=f.rightCenter,v=f.leftCenter,x=f.topCenter,y=f.bottom,E=f.top,F=f.right,I=f.left,J=f.bottomCenter,P=f.bottomLeft,N=f.bottomRight,Y=f.topRight,W=f.topLeft;f=f.center;Pb._get(Object.getPrototypeOf(l.prototype),Symbol.for("lively-instance-initialize"),this).call(this,a);this.undoManager.reset();this.fit();void 0!==m&&(this.position=m);void 0!==r&&(this.rightCenter=r);void 0!==v&&(this.leftCenter=v);void 0!==x&&(this.topCenter=x);void 0!==y&&(this.bottom=y);void 0!==E&&
(this.top=E);void 0!==F&&(this.right=F);void 0!==I&&(this.left=I);void 0!==J&&(this.bottomCenter=J);void 0!==P&&(this.bottomLeft=P);void 0!==N&&(this.bottomRight=N);void 0!==Y&&(this.topRight=Y);void 0!==W&&(this.topLeft=W);void 0!==f&&(this.center=f)}},{key:"__deserialize__",value:function(a,f,m,r){Pb._get(Object.getPrototypeOf(l.prototype),"__deserialize__",this).call(this,a,f,m,r);this.viewState=this.defaultViewState;this.markers=[];this.textRenderer=new hd.Renderer(this.env.domEnv);this.textLayout=
new hd.TextLayout(this);this.changeDocument(hd.Document.fromString(""));this.ensureUndoManager();a.cachedLineBounds&&(this._initializedByCachedBounds=a.cachedLineBounds);this._isDeserializing=!0}},{key:"__after_deserialize__",value:function(a,f,m){var r=this;Pb._get(Object.getPrototypeOf(l.prototype),"__after_deserialize__",this).call(this,a,f,m);this._isDeserializing=!1;this.whenRendered().then(function(){r.embeddedMorphs.forEach(function(v){return v.top=0})})}},{key:"__only_serialize__",get:function(){return hd.arr.withoutAll(Pb._get(Object.getPrototypeOf(l.prototype),
"__only_serialize__",this),["document","textRenderer","viewState","undoManager","markers","textLayout","embeddedMorphMap",this.displacingMorphMap.size?"":"displacingMorphMap"])}},{key:"__additionally_serialize__",value:function(a,f,m,r){Pb._get(Object.getPrototypeOf(l.prototype),"__additionally_serialize__",this).call(this,a,f,m,r);a.props.selections={key:"selections",verbatim:!0,value:(this.selection.isMultiSelection?this.selection.ranges:[this.selection.range]).map(function(J){return hd.obj.select(J,
["start","end"])})};a.props.anchors&&this.selection.isEmpty()&&(a.props.anchors.value=a.props.anchors.value.filter(function(J){return!J.id.includes("selection-")}));a.props.textAndAttributes={key:"textAndAttributes",value:this.textAndAttributes.map(function(J){if(!J)return J;if(J.isMorph)return m.ref(J).asRefForSerializedObjMap();if(hd.obj.isObject(J)){var P={};J=JSON.stringify(J,function(N,Y){return Y&&Y.__serialize__?(Y=Y.__serialize__(),Object.assign(P,Y.bindings),"->["+(Y.__expr__+"]")):Y});J=
J.replace(/"->\[.*\]"/g,function(N){return N.slice(4,-2)});return m.expressionSerializer.exprStringEncode({__expr__:"("+J+")",bindings:P})}return J})};f=[];r=$jscomp.makeIterator(this.document.lines);for(var v=r.next();!v.done;v=r.next()){v=v.value;var x=this.textLayout.lineCharBoundsCache.get(v);if(x){var y=[],E=void 0,F=0;if(x){x=$jscomp.makeIterator(x);for(var I=x.next();!I.done;I=x.next()){I=I.value;if(E){if(hd.num.roundTo(E.width,.001)==hd.num.roundTo(I.width||0,.001)&&I.height==E.height){F++;
continue}y.push([F,hd.num.roundTo(E.width||0,.001),E.height||0])}F=1;E=I}}E&&y.push([F,hd.num.roundTo(E.width||0,.001),E.height||0]);f.push([v.row,hd.arr.flatten(y)])}}a.cachedLineBounds=f}},{key:"spec",value:function(){var a=Pb._get(Object.getPrototypeOf(l.prototype),"spec",this).call(this);a.textString=this.textString;return hd.obj.dissoc(a,"anchors embeddedMorphMap plugins savedMarks textLayout textRenderer viewState undoManager metadata document displacingMorphMap".split(" "))}},{key:"isText",
get:function(){return!0}},{key:"makeDirty",value:function(){this._positioningSubmorph||Pb._get(Object.getPrototypeOf(l.prototype),"makeDirty",this).call(this)}},{key:"onChange",value:function(a){var f=this,m=a.prop,r=a.selector,v=a.meta,x=this.lineWrapping,y=!1,E=!1,F=!1,I=!1,J=!1,P=!1;if(r)y="replace"===r,I="addTextAttribute"===r,this._displacementChange=!this._displacing&&y;else switch(m){case "scroll":J=E=!0;break;case "extent":E=!0;m=a.prevValue.subPt(a.value);P=(F=this.fixedWidth&&!!this.lineWrapping&&
!!m.x)&&(!this.fixedWidth||!this.fixedHeight);break;case "wordSpacing":case "letterSpacing":case "tabWidth":x&&(I=!0);break;case "fontFamily":case "fontSize":case "lineHeight":case "textAlign":case "fontWeight":case "fontStyle":case "textStyleClasses":case "fixedWidth":I=a.prevValue!=a.value;break;case "lineWrapping":I=!0;break;case "borderWidth":case "fixedHeight":F=a.prevValue!=a.value;break;case "padding":F=!0}Pb._get(Object.getPrototypeOf(l.prototype),"onChange",this).call(this,a);m=function(){f._textChange=
!0;J&&(f.viewState.wasScrolled=!0);(I||P||F&&!v.styleSheetChange)&&f.invalidateTextLayout(I,I);(F||I)&&f.document&&f.world()&&f.document.lines.forEach(function(N){return N.hasEstimatedExtent=!0});f._displacementChange&&(f._displacementChange=!1);y&&hd.signal(f,"textChange",a);E&&hd.signal(f,"viewChange",a);f._textChange=!1};v.animation?hd.promise.delay(v.animation.duration).then(m):this.ownerChain().every(function(N){return N.visible})&&m()}},{key:"onSubmorphChange",value:function(a,f){var m=this,
r,v,x,y,E,F,I,J,P;return $jscomp.asyncExecutePromiseGeneratorProgram(function(N){if(1==N.nextAddress){if(a.meta&&a.meta.styleSheetChange)return N.return();Pb._get(Object.getPrototypeOf(l.prototype),"onSubmorphChange",m).call(m,a,f);return a.meta.animation?N.yield(a.meta.animation.asPromise(),2):N.jumpTo(2)}if(m._textChange||m._positioningSubmorph===f)return N.return();r=a;v=r.prop;x="position"==v||"extent"==v||"scale"==v||"rotation"==v;m.displacingMorphMap.get(f)&&x&&[].concat($jscomp.arrayFromIterable(m.displacingMorphMap.keys())).filter(function(Y){return Y.top>=
f.top}).forEach(function(Y){m._intersectionShapeCache&&m._intersectionShapeCache.delete(Y);m.updateTextDisplacementFor(Y)});y=m.embeddedMorphMap.get(f)||{};if((E=y.anchor)&&x){if("position"==v)return m._positioningSubmorph=f,f.position=a.prevValue,m._positioningSubmorph=null,N.return();F=f.bounds();I=f._lastBounds;J=E.position.row;P=m.document.getLine(J);I&&I.height==F.height&&I.bottom()==F.bottom()||(P.hasEstimatedExtent=!0,f._lastBounds=F)}N.jumpToEnd()})}},{key:"removeMorph",value:function(a,f){f=
void 0===f?!0:f;var m=this.embeddedMorphMap,r=this.displacingMorphMap;r&&r.has(a)&&this.toggleTextWrappingAround(a,!1);if(m&&m.has(a)){if(r=m.get(a).anchor){var v=r.position;r=v.row;v=v.column;this.replace({start:{row:r,column:v},end:{row:r,column:v+1}},[],!0,f);this.replace}m.delete(a)}return Pb._get(Object.getPrototypeOf(l.prototype),"removeMorph",this).call(this,a)}},{key:"toggleTextWrappingAround",value:function(a,f){var m=this;if(f)this.displacingMorphMap.has(a)||(this.embeddedMorphMap.has(a)&&
this.addMorph(a.remove()),this.displacingMorphMap.set(a,[]),this.updateTextDisplacementFor(a));else if(f=this.displacingMorphMap.get(a))this._displacing=!0,f.forEach(function(r){return m.removeMorph(r)}),this._displacing=!1,this.displacingMorphMap.delete(a)}},{key:"updateTextDisplacementFor",value:function(a){var f=this;if(!this._displacing){this._displacing=!0;var m=this.displacingMorphMap.get(a),r=this.computeDisplacementRectsFor(a).values(),v=[];m.forEach(function(I){return f.removeMorph(I,!1)});
this.textLayout.resetLineCharBoundsCacheOfRange(this,a._displacementRange);r=$jscomp.makeIterator(r);for(var x=r.next();!x.done;x=r.next()){x=x.value;var y=m.shift()||hd.morph({visible:!0,reactsToPointer:!1,isDisplacementMorph:!0}),E=this.textLayout.textPositionFromPoint(this,x.leftCenter());y.setBounds(x);this.insertText([y,{}],E);this.viewState._needsFit=!1;if(F==y.top)y.remove();else{var F=y.top;v.push(y)}}m.forEach(function(I){return f.removeMorph(I,!1)});this.displacingMorphMap.set(a,v);this._displacing=
!1}}},{key:"computeDisplacementRectsFor",value:function(a){var f=this.textLayout,m=f.textPositionFromPoint(this,a.topLeft),r=f.textPositionFromPoint(this,a.bottomLeft),v=[];a._displacementRange=hd.Range.fromPositions(m,r);for(m=m.row;m<r.row+1;m++)v.push.apply(v,$jscomp.arrayFromIterable(f.rangesOfWrappedLine(this,m)));this._intersectionShapeCache||(this._intersectionShapeCache=new Map);(r=this._intersectionShapeCache.get(a))||(r=a.isPath?hd.Shapes.path(hd.getSvgVertices(a.vertices)):"Ellipse"==hd.getClassName(a)?
hd.Shapes.ellipse(a.center.x,a.center.y,a.width/2,a.height/2):hd.Shapes.rectangle(a.left,a.top,a.width,a.height));this._intersectionShapeCache.set(a,r);a=this.width;m=new Map;v=$jscomp.makeIterator(v);for(var x=v.next();!x.done;x=v.next()){x=x.value;var y=f.computeMaxBoundsForLineSelection(this,x),E=y.height;y=y.y;var F=hd.Shapes.rectangle(a,E,0,y);F=hd.Intersection.intersect(F,r);1>F.points.length||(F=hd.Rectangle.unionPts(F.points.map(hd.Point.fromLiteral)),F.y=y,F.height=E,F.x-=15,F.width+=30,
m.set(x,F))}return m}},{key:"rejectsInput",value:function(){return this.readOnly}},{key:"addAnchor",value:function(a){if(a){"string"===typeof a&&(a={id:a,row:0,column:0});if(!a.isAnchor){var f=a,m=f.column,r=f.row;a=new hd.Anchor(f.id,"number"===typeof r&&"number"===typeof m?{row:r,column:m}:void 0,f.insertBehavior||"move")}if(f=a.id&&this.anchors.find(function(v){return v.id===a.id}))return Object.assign(f,a);this.anchors.push(a);return a}}},{key:"removeAnchor",value:function(a){for(var f=this.anchors,
m,r=f.length;r--;){var v=f[r];if(v.id==a||v===a)m=v,f.splice(r,1)}return m}},{key:"addMarker",value:function(a){this.removeMarker(a.id);this.markers.push(a);this.makeDirty();return a}},{key:"removeMarker",value:function(a){var f="string"===typeof a?a:a.id;this.markers=this.markers.filter(function(m){return m.id!==f});this.makeDirty()}},{key:"saveMark",value:function(a,f){a=void 0===a?this.cursorPosition:a;var m=this.activeMark;m&&m!==a&&!m.equalsPosition(a)&&(this.savedMarks=this.savedMarks.concat(m));
f?this.activeMark=a:this.savedMarks=this.savedMarks.concat(a)}},{key:"saveActiveMarkAndDeactivate",value:function(){var a=this.activeMark;a&&(this.saveMark(a),this.activeMark=null)}},{key:"popSavedMark",value:function(){var a=this.activeMark;if(a)return this.activeMark=null,a;a=hd.arr.last(this.savedMarks);this.savedMarks=this.savedMarks.slice(0,-1);return a}},{key:"lastSavedMark",get:function(){return this.activeMark||hd.arr.last(this.savedMarks)}},{key:"savedMarkForSelection",value:function(a){var f=
this.selection,m=this.savedMarks,r=this.multiSelect?this.multiSelect.getAllRanges().length:1;r=m.length-(r-(f.index||0));f=m[r]||f.anchor;a&&"row"in a&&"column"in a&&(this.savedMarks=m.slice(0,r).concat(a).concat(m.slice(r+1)));return f}},{key:"addPlugin",value:function(a){this.plugins.includes(a)||(this.plugins.push(a),this._cachedKeyhandlers=null,"function"===typeof a.attach&&a.attach(this));return a}},{key:"removePlugin",value:function(a){if(!this.plugins.includes(a))return!1;this._cachedKeyhandlers=
null;hd.arr.remove(this.plugins,a);"function"===typeof a.detach&&a.detach(this);return!0}},{key:"pluginCollect",value:function(a,f){f=void 0===f?[]:f;this.plugins.forEach(function(m){return"function"===typeof m[a]&&(f=m[a](f))});return f}},{key:"pluginInvokeFirst",value:function(a,f){for(var m=[],r=1;r<arguments.length;++r)m[r-1]=arguments[r];return(r=this.pluginFind(function(v){return"function"===typeof v[a]}))?r[a].apply(r,$jscomp.arrayFromIterable(m)):void 0}},{key:"pluginFind",value:function(a){return this.plugins.slice().reverse().find(a)}},
{key:"editorPlugin",get:function(){return this.pluginFind(function(a){return a.isEditorPlugin})}},{key:"lookupEditorPluginNamed",value:function(a){var f,m,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(x){if(1==x.nextAddress)return a=hd.config.ide.modes.aliases[a]||a,m=(f=/^[^:\\]+:\/\//.test(a))?a:"lively.ide/"+a+"/editor-plugin.js",x.yield(lively.modules.doesModuleExist(m),2);if(3!=x.nextAddress)return x.yieldResult?x.yield(lively.modules.module(m).load(),3):x.return(null);r=x.yieldResult;
v=r.default;return x.return(v)})}},{key:"changeEditorMode",value:function(a){var f=this,m,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){if(1==v.nextAddress)return m=f.plugins.filter(function(x){return!x.isEditorPlugin}),a?"string"!==typeof a?v.jumpTo(2):v.yield(f.lookupEditorPluginNamed(a),3):(f.plugins=m,v.return(null));if(2!=v.nextAddress){r=v.yieldResult;if(!r)throw Error("Cannot find editor mode "+a);a=new r(hd.config.codeEditor.defaultTheme);f.evalEnvironment&&(a.evalEnvironment=
f.evalEnvironment)}f.plugins=m.concat(a);return v.return(a)})}},{key:"invalidateTextLayout",value:function(a,f){f=void 0===f?!1:f;if(!this._isDeserializing){var m=this.viewState;m&&(this.fixedWidth&&this.fixedHeight||(m._needsFit=!0),m=this.textLayout)&&((void 0===a?0:a)&&m.resetLineCharBoundsCache(this),m.estimateLineHeights(this,f))}}},{key:"textBounds",value:function(){return this.textLayout.textBounds(this)}},{key:"defaultCharExtent",value:function(){return this.textLayout.defaultCharExtent(this)}},
{key:"scrollExtent",get:function(){return this.textBounds().extent().addPt(this.padding.topLeft()).addPt(this.padding.bottomRight()).addPt(this.scrollbarOffset).maxPt(Pb._get(Object.getPrototypeOf(l.prototype),"scrollExtent",this))}},{key:"commands",get:function(){return this.pluginCollect("getCommands",(this._commands||[]).concat(hd.commands))}},{key:"execCommand",value:function(a,f,m,r){function v(W){(y.hasOwnProperty("scrollCursorIntoView")?y.scrollCursorIntoView:1)&&hd.fun.debounceNamed("execCommand-scrollCursorIntoView-"+
W.id,100,function(){return W.scrollCursorIntoView()})()}var x=this,y=(this.lookupCommand(a)||{}).command;if(y){var E=this.inMultiSelectMode(),F=y.hasOwnProperty("multiSelectAction")?y.multiSelectAction:"forEach";if(E&&"forEach"===F){var I=this.selection;E=this.selection.selections.slice().reverse();this.selection=E[0];this._multiSelection=I;try{var J=this.execCommand(a,f,m,r)}catch(W){throw this.selection=I,this._multiSelection=null,this.selection.mergeSelections(),W;}if(!J)return J;var P=[J];if("function"===
typeof J.then&&"function"===typeof J.catch)return hd.promise.finally(hd.promise.chain([function(){return J}].concat(E.slice(1).map(function(W){return function(){x.selection=W;return Promise.resolve(x.execCommand(a,f,m,r)).then(function(da){return P.push(da)})}}))).then(function(){return P}),function(){x.selection=I;x._multiSelection=null;x.selection.mergeSelections()});try{for(var N=$jscomp.makeIterator(E.slice(1)),Y=N.next();!Y.done;Y=N.next())this.selection=Y.value,P.push(this.execCommand(a,f,m,
r))}finally{this.selection=I,this._multiSelection=null,this.selection.mergeSelections()}return P}(J=this.commandHandler.exec(a,this,f,m,r))&&("function"===typeof J.then&&"function"===typeof J.catch?J.then(function(){return v(x)}):v(this));return J}}},{key:"changeDocument",value:function(a,f){f=void 0===f?!1:f;if(this.document)var m=this.defaultTextStyle;else f=!1;this.document=a;this.textLayout.reset();f&&(this.defaultTextStyle=m);this.makeDirty();this.consistencyCheck()}},{key:"textInRange",value:function(a){return this.document.textInRange(a)}},
{key:"charRight",value:function(a){a=void 0===a?this.cursorPosition:a;var f=a.column;return this.getLine(a.row).slice(f,f+1)}},{key:"charLeft",value:function(a){a=void 0===a?this.cursorPosition:a;var f=a.column;return this.getLine(a.row).slice(f-1,f)}},{key:"indexToPosition",value:function(a){return this.document.indexToPosition(a)}},{key:"positionToIndex",value:function(a){return this.document.positionToIndex(a)}},{key:"getVisibleLine",value:function(a){a=void 0===a?this.cursorPosition.row:a;return this.textLayout.wrappedLines(this)[a].text}},
{key:"isLineVisible",value:function(a){a=void 0===a?this.cursorPosition.row:a;return this.textLayout.isLineVisible(this,a)}},{key:"isLineFullyVisible",value:function(a){a=void 0===a?this.cursorPosition.row:a;return this.textLayout.isLineFullyVisible(this,a)}},{key:"getLine",value:function(a){a=void 0===a?this.cursorPosition.row:a;return this.document.getLineString(a)}},{key:"lineCount",value:function(){return this.document.rowCount}},{key:"isLineEmpty",value:function(a){return!this.getLine(a).trim()}},
{key:"isAtLineEnd",value:function(a){a=void 0===a?this.cursorPosition:a;var f=this.getLine(a.row);return a.column===f.length}},{key:"wordsOfLine",value:function(a){a=void 0===a?this.cursorPosition.row:a;return this.document.wordsOfLine(a)}},{key:"wordAt",value:function(a){a=void 0===a?this.cursorPosition:a;return this.document.wordAt(a)}},{key:"wordLeft",value:function(a){a=void 0===a?this.cursorPosition:a;return this.document.wordLeft(a)}},{key:"wordRight",value:function(a){a=void 0===a?this.cursorPosition:
a;return this.document.wordRight(a)}},{key:"lineRange",value:function(a,f){a=void 0===a?this.cursorPosition.row:a;f=void 0===f?!0:f;"number"!==typeof a&&this.cursorPosition.row;var m=this.getLine(a);a={start:{column:0,row:a},end:{column:m.length,row:a}};m=m.match(/^\s*/);m[0].length&&f&&(a.start.column+=m[0].length);return new hd.Range(a)}},{key:"screenLineRange",value:function(a,f){a=void 0===a?this.cursorPosition:a;return this.textLayout.screenLineRange(this,a,void 0===f?!0:f)}},{key:"insertTextAndSelect",
value:function(a,f){f=void 0===f?null:f;a=String(a);f?this.selection.range=this.insertText(a,f):this.selection.text=a}},{key:"append",value:function(a){var f=this;return this.saveExcursion(function(){return f.insertText(a,f.documentEndPosition)})}},{key:"insertText",value:function(a,f,m,r){f=void 0===f?this.cursorPosition:f;return this.replace({start:f,end:f},a,void 0===m?!0:m,void 0===r?!0:r)}},{key:"deleteText",value:function(a,f){f=void 0===f?!0:f;var m=this.textAndAttributesInRange(a);this.replace(a,
[],!1,f);return m}},{key:"replace",value:function(a,f,m,r,v,x){var y=this;m=void 0===m?!0:m;r=void 0===r?!0:r;v=void 0===v?!0:v;x=void 0===x?!0:x;a=a.isRange?a:new hd.Range(a);var E="string"===typeof f?[f,null]:Array.isArray(f)?f:[String(f||""),null];f=!E.length||2==E.length&&!E[0];var F=a.isEmpty();if(f&&F)return a;var I;m&&(I=this.textAttributeAt({row:a.start.row,column:a.start.column-(0<a.start.column?1:0)}));var J=[];for(m=0;m<E.length;m+=2)f=E[m],F=E[m+1],f.isMorph&&J.push(f),I&&(E[m+1]=Object.assign({},
I,{},F));v&&this.undoManager.undoStart(this,"replace");var P=this.textAndAttributesInRange(a),N=this.document.replace(a,E,this.debug&&this.debugHelper(this.debug)).inserted;this.addMethodCallChangeDoing({target:this,selector:"replace",args:[a,E],undo:{target:this,selector:"replace",args:[N,P,!1]}},function(){r&&(y.invalidateTextLayout(!1,!1),y.textLayout.resetLineCharBoundsCacheOfRange(y,N));if(!hd.eqPosition(a.end,N.end)){if(hd.lessPosition(N.end,a.end)){var Y=$jscomp.makeIterator((new hd.Range(a)).subtract(N)).next().value;
y.anchors.forEach(function(da){return da.onDelete(Y)})}else{var W=$jscomp.makeIterator((new hd.Range(N)).subtract(a)).next().value;y.anchors.forEach(function(da){return da.onInsert(W)})}y._multiSelection?y._multiSelection.updateFromAnchors():y.selection.updateFromAnchors()}y._updateEmbeddedMorphsDuringReplace(J,N,E,P);y._isDeserializing&&y._initializedByCachedBounds||y.textLayout.estimateLineHeights(y,!1);x&&y.consistencyCheck()});v&&this.undoManager.undoStop();return N}},{key:"_updateEmbeddedMorphsDuringReplace",
value:function(a,f,m,r){for(var v=this.embeddedMorphMap,x=0;x<r.length;x+=2){var y=r[x];if(y.isMorph&&!a.includes(y)){if(v){var E=v.get(y);E&&E.anchor&&(this.removeAnchor(E.anchor),hd.disconnect(E.anchor,"position",y,"position"));v.set(y,Object.assign({},E,{anchor:null}))}y.remove()}}if(a.length)for(m=hd.textAndAttributesWithSubRanges(f.start,m),f=m.ranges,m=m.textAndAttributes,r=0;r<f.length;r++)x=m[2*r],x.isMorph&&(console.assert(a.includes(x),"????"),y=f[r].start,x.owner!==this&&this.addMorph(x),
v&&(v.has(x)?v.get(x).anchor.position=y:(y=this.addAnchor(Object.assign({id:"embedded-"+x.id},y)),hd.connect(y,"position",x,"position",{updater:function(F,I){var J=this.targetObj.owner,P=this.targetObj;I=J&&J.isText?J.charBoundsFromTextPosition(I).topLeft().subPt(J.origin):P.position;J&&(J._positioningSubmorph=P);F(I);J&&(J._positioningSubmorph=!1)}}).update(y.position),v.set(x,{anchor:y}))))}},{key:"applyJsDiffPatch",value:function(a){function f(F,I,J,P){var N=r.indexToPosition(F+J),Y=r.indexToPosition(I+
J);P.push(r.deleteText({start:N,end:Y}));return J-(I-F)}function m(F,I,J,P){P.push(r.insertText(I,r.indexToPosition(F+J)));return J}var r=this,v=[],x=0,y=0;a=$jscomp.makeIterator(a);for(var E=a.next();!E.done;E=a.next())E=E.value,E.removed?y=f(x,x+E.count,y,v):E.added&&(y=m(x,E.value,y,v)),x+=E.count;return v}},{key:"applyTextChanges",value:function(a,f,m,r){f=void 0===f?0:f;m=void 0===m?!0:m;var v=[];a=$jscomp.makeIterator(a);for(var x=a.next();!x.done;x=a.next()){var y=$jscomp.makeIterator(x.value);
x=y.next().value;var E=y.next().value;y=y.next().value;f&&(E="number"===typeof E?E:this.positionToIndex(E),y&&"string"!==typeof y&&!Array.isArray(y)&&(y=("number"===typeof y?y:this.positionToIndex(y))+f),E+=f);E="number"===typeof E?this.indexToPosition(E):E;switch(x){case "delete":case "remove":x="number"===typeof y?this.indexToPosition(y):y;v.push(this.deleteText({start:E,end:x},r));break;case "insert":v.push(this.insertText(y,E,m,r));break;default:console.warn("[applyTextChanges] unknown type: "+
x)}}return v}},{key:"modifyLines",value:function(a,f,m){var r=this;m=hd.arr.range(a,f).map(function(v){return r.getLine(v)}).map(m).join("\n")+"\n";this.deleteText({start:{row:a,column:0},end:{row:f+1,column:0}},!1);this.insertText(m,{row:a,column:0})}},{key:"modifySelectedLines",value:function(a){var f=this.selection.isEmpty()?this.lineRange(void 0,!1):this.selection.range;return this.modifyLines(f.start.row,f.end.row,a)}},{key:"withLinesDo",value:function(a,f,m){var r=this;return hd.arr.range(a,
f).map(function(v){var x=r.getLine(v);v=hd.Range.create(v,0,v,x.length);return m(x,v)})}},{key:"withSelectedLinesDo",value:function(a){var f=this.selection.isEmpty()?this.lineRange(void 0,!1):this.selection.range,m=f.start.row;f=f.end;var r=f.row;return this.withLinesDo(m,0===f.column&&r>m?r-1:r,a)}},{key:"joinLine",value:function(a){a=void 0===a?this.cursorPosition.row:a;var f=this.getLine(a),m=this.getLine(a+1);m=f+m.replace(/^\s+/,"")+this.document.constructor.newline;this.replace({start:{column:0,
row:a},end:{column:0,row:a+2}},m,!0);return{row:a,column:f.length}}},{key:"whatsVisible",get:function(){return this.textLayout.whatsVisible(this)}},{key:"flash",value:function(a,f){var m=this;a=void 0===a?this.selection.range:a;f=Object.assign({time:1E3,fill:hd.Color.orange},f);var r=f.id||"flash"+hd.string.newUUID();this.addMarker({id:r,range:a,style:{"background-color":f.fill.toCSSString(),"pointer-events":"none"}});hd.fun.debounceNamed("flash-"+r,f.time,function(){return m.removeMarker(r)})()}},
{key:"addTextAttribute",value:function(a,f){var m=this;f=void 0===f?this.selection:f;var r={start:f.start,end:f.end};this.undoManager.undoStart(this,"addTextAttribute");this.addMethodCallChangeDoing({target:this,selector:"addTextAttribute",args:[a,r],undo:{target:this,selector:"removeTextAttribute",args:[a,r]}},function(){m.document.mixinTextAttribute(a,r);m.onAttributesChanged(r);m.consistencyCheck()});this.undoManager.undoStop();return a}},{key:"removeTextAttribute",value:function(a,f){var m=this;
f=void 0===f?this.selection:f;var r={start:f.start,end:f.end};this.undoManager.undoStart(this,"removeTextAttribute");this.addMethodCallChangeDoing({target:this,selector:"removeTextAttribute",args:[a,r],undo:{target:this,selector:"addTextAttribute",args:[a,r]}},function(){m.document.mixoutTextAttribute(a,r);m.onAttributesChanged(r);m.consistencyCheck()});this.undoManager.undoStop()}},{key:"setTextAttributesWithSortedRanges",value:function(a){this.document.setTextAttributesWithSortedRanges(a);this.consistencyCheck();
for(var f=0;f<a.length;)this.onAttributesChanged(a[f]),f+=2}},{key:"textAttributeAt",value:function(a){return this.document.textAttributeAt(a)}},{key:"textAttributeAtPoint",value:function(a){return this.textAttributeAt(this.textLayout.textPositionFromPoint(this,a))}},{key:"textAndAttributesInRange",value:function(a){a=void 0===a?this.selection.range:a;return this.document.textAndAttributesInRange(a)}},{key:"resetTextAttributes",value:function(){this.document.resetTextAttributes();this.onAttributesChanged(this.documentRange);
this.consistencyCheck()}},{key:"onAttributesChanged",value:function(a){this.invalidateTextLayout(!1,!1);var f=this.textLayout;f&&f.resetLineCharBoundsCacheOfRange(this,a);this.makeDirty()}},{key:"styleAt",value:function(a){return(a=this.textLayout.chunkAtPos(this,a))?a.style:Object.assign({},this.defaultTextStyle)}},{key:"getStyleInRange",value:function(a){a=void 0===a?this.selection:a;return this.textAndAttributesInRange(a).filter(function(f,m){return 0!=m%2}).reduce(function(f,m){for(var r in m){var v=
m[r];if(!f.hasOwnProperty(r)||void 0!==v&&null!==v)f[r]=v}return f},{})}},{key:"setStyleInRange",value:function(a,f){var m=this;f=void 0===f?this.selection:f;for(var r=this.textAndAttributesInRange(f),v={start:Object.assign({},f.start),end:Object.assign({},f.start)},x=[],y=0;y<r.length;y+=2){var E=r[y],F=r[y+1],I=-1;"string"!==typeof E&&(E=hd.objectReplacementChar);for(;-1<(I=E.indexOf("\n"));)0<I&&(v.end.column+=I,x.push(v,F)),v={row:v.end.row+1,column:0},v={start:v,end:Object.assign({},v)},E=E.slice(I+
1);v.end.column+=E.length;x.push(v,F);v={start:Object.assign({},v.end),end:Object.assign({},v.end)}}this.undoManager.undoStart(this,"setStyleInRange");this.addMethodCallChangeDoing({target:this,selector:"setStyleInRange",args:[a,f],undo:{target:this,selector:"setTextAttributesWithSortedRanges",args:[x]}},function(){m.document.setTextAttribute(a,f);m.consistencyCheck();m.onAttributesChanged(f)});this.undoManager.undoStop()}},{key:"resetStyleInRange",value:function(a){a=void 0===a?this.selection:a;
for(var f=this.document.textAndAttributesInRange(a),m={},r=0;r<f.length;r+=2)Object.assign(m,f[r+1]);this.removeTextAttribute(m,a)}},{key:"changeStyleProperty",value:function(a,f,m){var r=this;m=void 0===m?this.selection:m;m=this.getStyleInRange(m)[a];var v=f(m);this.selections.forEach(function(x){var y={};return r.addTextAttribute((y[a]=v,y),x)})}},{key:"inMultiSelectMode",value:function(){return this.selection.selections&&1<this.selection.selections.length}},{key:"selectionBounds",value:function(){var a=
this;return this.selections.map(function(f){var m=a.charBoundsFromTextPosition(f.start),r=a.charBoundsFromTextPosition(f.end);return f.start.row===f.end.row?m.union(r):hd.rect(hd.pt(a.padding.left(),m.top()),hd.pt(a.width-a.padding.left(),r.bottom()))}).reduce(function(f,m){return m.union(f)})}},{key:"documentEndPosition",get:function(){return this.document?this.document.endPosition:{row:0,column:0}}},{key:"isAtDocumentEnd",value:function(){return hd.eqPosition(this.cursorPosition,this.documentEndPosition)}},
{key:"documentRange",get:function(){return{start:{row:0,column:0},end:this.documentEndPosition}}},{key:"cursorUp",value:function(a){return this.selection.goUp(void 0===a?1:a)}},{key:"cursorDown",value:function(a){return this.selection.goDown(void 0===a?1:a)}},{key:"cursorLeft",value:function(a){return this.selection.goLeft(void 0===a?1:a)}},{key:"cursorRight",value:function(a){return this.selection.goRight(void 0===a?1:a)}},{key:"getPositionAboveOrBelow",value:function(a,f,m,r,v){function x(I,J){I=
I.slice();I.push({x:hd.arr.last(I).x+hd.arr.last(I).width});for(var P=0,N=Infinity,Y=0;Y<I.length;Y++){var W=Math.abs(I[Y].x-J);W<N&&(N=W,P=Y)}return P}a=void 0===a?1:a;f=void 0===f?this.cursorPosition:f;m=void 0===m?!1:m;if(0===a)return f;"number"===typeof v&&(v-=this.padding.left());var y=f.row,E=f.column;if(m&&this.lineWrapping){y=this.textLayout.rangesOfWrappedLine(this,f.row);if(!y.length)return f;E=y.length-1-y.slice().reverse().findIndex(function(I){return I.start.column<=f.column});if(1<=
a){var F=0===E?0>=f.row?null:hd.arr.last(this.textLayout.rangesOfWrappedLine(this,f.row-1)):y[E-1];if(!F)return f}else if(-1>=a&&(F=(y.length-1===E?f.row>=this.lineCount()-1?[]:this.textLayout.rangesOfWrappedLine(this,f.row+1):y.slice(E+1))[0],!F))return f;y=F.start.row;E=this.textLayout.charBoundsOfRow(this,y).slice(F.start.column,F.end.column+1);E=F.start.column+x(E,v)}else y=Math.min(Math.max(0,f.row-a),this.lineCount()-1),"number"===typeof v&&(F=this.textLayout.charBoundsOfRow(this,y),E=x(F,v));
F={row:y,column:E};return 1<Math.abs(a)?this.getPositionAboveOrBelow(a+(1<a?-1:1),F,m,r,v):F}},{key:"collapseSelection",value:function(){this.selection.collapse(this.selection.lead);return this.selection}},{key:"selectAll",value:function(){this.selection.selectAll();return this.selection}},{key:"selectLine",value:function(a,f){a=void 0===a?this.cursorPosition.row:a;this.selection.selectLine(a,void 0===f?!1:f);return this.selection}},{key:"selectionOrLineString",value:function(){var a=this.selection,
f=a.start;return a.text||this.getLine(f.row)}},{key:"scrollCursorIntoView",value:function(){this.scrollPositionIntoView(this.cursorPosition)}},{key:"centerRange",value:function(a,f,m){a=void 0===a?this.selection.range:a;f=void 0===f?hd.pt(0,0):f;m=void 0===m?!0:m;var r=this.charBoundsFromTextPosition(a.start).top();a=this.charBoundsFromTextPosition(a.end).bottom()-r;this.scroll=a<this.height||!1===m?this.scroll.withY(r+a/2-this.height/2).addPt(f):this.scroll.withY(r).addPt(f)}},{key:"centerRow",value:function(a,
f){a=void 0===a?this.cursorPosition.row:a;f=void 0===f?hd.pt(0,0):f;return this.alignRowAtTop(a,f.addXY(0,-this.height/2))}},{key:"alignRowAtTop",value:function(a,f){a=void 0===a?this.cursorPosition.row:a;f=void 0===f?hd.pt(0,0):f;this.scroll=this.charBoundsFromTextPosition({row:a,column:0}).topLeft().addXY(-this.padding.left(),0).addPt(f)}},{key:"alignRowAtBottom",value:function(a,f){a=void 0===a?this.cursorPosition.row:a;f=void 0===f?hd.pt(0,0):f;var m=this.charBoundsFromTextPosition({row:a,column:0}).height;
this.alignRowAtTop(a,f.addXY(0,-this.textPageHeight()+m))}},{key:"scrollPositionIntoView",value:function(a,f){f=void 0===f?hd.pt(0,0):f;if(this.isClip()){var m=this.scroll;m=this.innerBounds().translatedBy(m).insetByRect(this.padding).insetBy(this.borderWidth);a=this.charBoundsFromTextPosition(a);this.lineWrapping||(a=a.insetByPt(hd.pt(-20,0)));var r=20<m.bottom()-a.bottom()?"bottomLeft":"topLeft";m=a[r]().subPt(m.translateForInclusion(a)[r]()).addPt(f);if(0!=m.x||0!=m.y)this.scroll=this.scroll.addPt(m).addPt(f),
this.isFocused()&&this.ensureKeyInputHelperAtCursor()}}},{key:"keepPosAtSameScrollOffsetWhile",value:function(a,f){var m=this;f=void 0===f?this.cursorPosition:f;var r=this.scroll;f=this.selection.lead;var v=this.charBoundsFromTextPosition(f).y-r.y;r=!1;var x=function(){return m.scroll=m.scroll.withY(m.charBoundsFromTextPosition(f).y-v)};try{var y=a();r=y&&y instanceof Promise}finally{!r&&x()}r&&hd.promise.finally(y,x);return y}},{key:"saveExcursion",value:function(a,f){var m=this;f=Object.assign({useAnchors:!1},
f);var r=this.selection.isMultiSelection?this.selection.selections.map(function(E){return E.directedRange}):[this.selection],v=f.useAnchors?r.map(function(E){var F=E.end;return[m.addAnchor(Object.assign({},E.start,{id:"save-excursion-"+hd.string.newUUID()})),m.addAnchor(Object.assign({},F,{id:"save-excursion-"+hd.string.newUUID()}))]}):null,x=!1;f=f.useAnchors?function(){var E=v.map(function(F){var I=$jscomp.makeIterator(F);F=I.next().value.position;I=I.next().value.position;return{start:F,end:I}});
m.selections=E;v.forEach(function(F){var I=$jscomp.makeIterator(F);F=I.next().value;I=I.next().value;m.removeAnchor(F);m.removeAnchor(I)})}:function(){return m.selections=r};try{var y=this.keepPosAtSameScrollOffsetWhile(a);x=y&&y instanceof Promise}finally{!x&&f()}x&&hd.promise.finally(y,f);return y}},{key:"alignRow",value:function(a,f){f=void 0===f?"center":f;if(this.isClip()){var m=this.scroll,r=this.padding;m=this.innerBounds().insetByRect(r).translatedBy(m);a=this.charBoundsFromTextPosition({row:a,
column:0});if(f="top"===f||"bottom"===f?m[f]()-a[f]():"center"===f?m[f]().y-a[f]().y:0)this.scroll=this.scroll.addXY(0,-f)}}},{key:"fit",value:function(){var a=this,f=this.viewState,m=this.fixedWidth,r=this.fixedHeight;f._needsFit=!1;if(r&&m||!this.textLayout||this.master&&!this.master._appliedMaster)return this;var v=this.textBounds().outsetByRect(this.padding),x=function(){r||a.height==v.height||(a.height=v.height);m||a.width==v.width||(a.width=v.width);a.embeddedMorphs.forEach(function(y){y=a.embeddedMorphMap.get(y).anchor;
y.position=y.position})};f._needsFit=!1;this.document.lines.find(function(y){return y.hasEstimatedExtent})?this.whenRendered().then(x):x();return this}},{key:"fitIfNeeded",value:function(){this.viewState._needsFit&&this.fit()}},{key:"defaultLineHeight",get:function(){var a=this.padding;return a.top()+a.bottom()+this.fontMetric.defaultLineHeight({fontSize:this.fontSize,fontFamily:this.fontFamily})}},{key:"columnInWrappedLine",value:function(a){if(!this.lineWrapping)return a.column;var f=this.screenLineRange(a,
!0).start.column;return a.column-f}},{key:"textPositionFromPoint",value:function(a){return this.textLayout.textPositionFromPoint(this,a)}},{key:"charBoundsFromTextPosition",value:function(a){return this.textLayout.boundsFor(this,a)}},{key:"forceRerender",value:function(){this.textLayout.reset();this.makeDirty()}},{key:"aboutToRender",value:function(a){Pb._get(Object.getPrototypeOf(l.prototype),"aboutToRender",this).call(this,a)}},{key:"applyLayoutIfNeeded",value:function(){this._requestMasterStyling&&
(this.master&&this.master.applyIfNeeded(!0),this._requestMasterStyling=!1);this.fitIfNeeded();Pb._get(Object.getPrototypeOf(l.prototype),"applyLayoutIfNeeded",this).call(this)}},{key:"render",value:function(a){return this.textRenderer.renderMorph(this,a)}},{key:"directRender",value:function(){var a=this.env.renderer,f=this.textRenderer;a&&f&&!a._stopped&&(hd.renderSubTree(this,a),f.manuallyTriggerTextRenderHook(this,a))}},{key:"onMouseDown",value:function(a){if(!a.rightMouseButtonPressed()){this.activeMark&&
(this.activeMark=null);var f=a.state;if(f.clickedOnMorph===this){f=(f.clickCount-1)%3+1;var m=this.localize(a.position),r=this.textPositionFromPoint(m);a.leftMouseButtonPressed()&&!a.isShiftDown()&&!a.isAltDown()&&this.callTextAttributeDoitFromMouseEvent(a,m);this.selectable&&(a.isShiftDown()?this.selection.lead=r:a.isAltDown()?this.selection.addRange(hd.Range.at(r)):(this.selection.disableMultiSelect(),1===f?a.isShiftDown()?this.selection.lead=r:this.selection={start:r,end:r}:2===f?this.execCommand("select word",
null,1,a):3===f&&this.execCommand("select line",null,1,a)),this.isFocused()&&this.ensureKeyInputHelperAtCursor())}}}},{key:"evalEnvForDoit",value:function(a){var f="lively://text-doit/"+this.id;lively.modules.module(f);return{context:a.context||this,format:"esm",targetModule:f}}},{key:"callTextAttributeDoitFromMouseEvent",value:function(a,f){var m=this;f=(f=this.textAttributeAtPoint(f)||[],f.doit);if(!f||!f.code)return!1;var r=this.evalEnvForDoit(f),v=lively.modules.module(r.targetModule);v.recorder.evt=
a;lively.vm.runEval(f.code,r).catch(function(x){return m.world().logError(Error("Error in text doit: "+x.stack))}).then(function(){return v.recorder.evt=null});return!0}},{key:"onMouseMove",value:function(a){a.leftMouseButtonPressed()&&this.selectable&&a.state.clickedOnMorph===this&&(this.selection.lead=this.textPositionFromPoint(this.localize(a.position)))}},{key:"selectMatchingBrackets",value:function(a,f){function m(F){return"\t"===F||" "===F}function r(F,I,J,P,N){for(var Y=1;(0>N?0<=P-1:P+1<F.length)&&
(P+=N,F[P]==I&&I!=J&&Y++,F[P]==J&&Y--,0!=Y););return P}function v(F,I,J,P){for(var N=I;0>J?0<=N-1:N+1<F.length;)if(N+=J,F[N]==P)return 0<J?[I,N]:[N+1,I];return 0<J?[I+1,F.length-1]:[0,I]}if(!a)return f;if(0==f||f==a.length)return[0,a.length-1];var x=f-1;if(0<f){if("\n"==a[f-1]||"\r"==a[f-1])return v(a,f,1,a[f-1]);var y="*({[<'\"`".indexOf(a[f-1]);"*"==a[f-1]&&(0>f-2||"/"!=a[f-2])&&(y=-1);if(0<=y)return x=r(a,"*({[<'\"`"[y],"*)}]>'\"`"[y],f-1,1),[f,x-1]}if(f<a.length){if("\n"==a[f]||"\r"==a[f])return v(a,
f,-1,a[f]);y="*)}]>'\"`".indexOf(a[f]);"*"==a[f]&&(f+1>=a.length||"/"!=a[f+1])&&(y=-1);if(0<=y)return f=r(a,"*)}]>'\"`"[y],"*({[<'\"`"[y],f,-1),[f+1,x]}if("/"===a[f-1]&&"/"===a[f-2]){for(;x+1<a.length&&"\n"!==a[x+1]&&"\r"!==a[x+1];)x++;return[f,x]}y=f;for(var E=x;0<=y-1&&m(a[y-1]);)y--;for(;E<a.length&&m(a[E+1]);)E++;if(1<=E-y)return[y,E];for(y=f<a.length?a[f]:"";0<=f-1&&((a[f-1]||"").match(/^[a-zA-Z0-9\-]+$/)||("."!=a[f-1]?0:0<="0123456789".indexOf(y)));)y=a[f-1],f--;for(;x+1<a.length&&((a[x+1]||
"").match(/^[a-zA-Z0-9\-]+$/)||("."!=a[x+1]?0:0<="0123456789".indexOf(y)));)y=a[x+1],x++;return[f,x]}},{key:"onContextMenu",value:function(a){var f=this;if(a.targetMorph===this){a.stop();var m=this.textPositionFromPoint(this.localize(a.position)),r=this.selection.selections||[this.selection];if(this.selection.isEmpty()||r.every(function(v){return!v.range.containsPosition(m)}))this.cursorPosition=m;Promise.resolve(this.menuItemsForContextMenu()).then(function(v){return f.openMenu(v,a)}).catch(function(v){return $world.logError(v)})}}},
{key:"onDrop",value:function(a){var f=a.hand.grabbedMorphs.filter(function(r){return r.isLayoutable});Pb._get(Object.getPrototypeOf(l.prototype),"onDrop",this).call(this,a);if(f[0]){var m=this.textPositionFromPoint(this.localize(a.hand.globalPosition));this.insertText([f[0],null],m);f[0].opacity=a.state.originalOpacity||1}}},{key:"buildDropHoverGrid",value:function(a){var f=this;if(a.simpleDrop)return null;var m=this.whatsVisible,r=m.startRow;m=Math.min(this.documentEndPosition.row,m.endRow);var v=
this.document,x=this.padding.left(),y=this.padding.top();r=hd.arr.range(r,m).reduce(function(E,F){var I=f.textLayout.charBoundsOfRow(f,F).slice();1<=I.length&&0==hd.arr.last(I).width&&(hd.arr.last(I).width=12);if(1<I.length){var J=hd.arr.last(I);I.push({x:J.x+J.width,y:J.y,height:J.height,width:J.width||12})}I=I.map(function(P,N){P=hd.Rectangle.fromLiteral(P).translatedBy(hd.pt(x,y+v.computeVerticalOffsetOf(F)));var Y=f.getGlobalTransform().transformRectToRect(P);return{textPos:{row:F,column:N},bounds:P,
globalBounds:Y,morph:a.showDropGrid?hd.morph({reactsToPointer:!1,acceptsDrops:!1,bounds:P,border:{width:1,color:hd.Color.green},fill:null}):null}});return E.concat(I)},[]);r.forEach(function(E){return E.morph&&f.addMorph(E.morph)});return r}},{key:"onDropHoverIn",value:function(a){var f={simpleDrop:window.hasOwnProperty("simpleDrop")?window.simpleDrop:!0,showDropGrid:window.hasOwnProperty("showDropGrid")?window.showDropGrid:!1,useTextFlowPlaceholder:window.hasOwnProperty("useTextFlowPlaceholder")?
window.useTextFlowPlaceholder:!1},m=a.hand.grabbedMorphs[0];m&&(a.state.originalOpacity=m.opacity,m.opacity=.3);m=this.buildDropHoverGrid(f);a=a.state.dropHover||(a.state.dropHover=new WeakMap);var r=a.get(this);r||(r={},a.set(this,r));r.config=f;r.dropGrid=m}},{key:"onDropHoverUpdate",value:function(a){var f=a.hand.grabbedMorphs[0];if(f){var m=a.state.dropHover;if(m&&(m=m.get(this)))if(m.dropGrid){var r=m.config;a=a.positionIn(this);for(var v,x,y=Infinity,E=$jscomp.makeIterator(m.dropGrid),F=E.next();!F.done;F=
E.next()){F=F.value;if(F.bounds.containsPoint(a)){v=F;break}var I=F.bounds.closestPointToPt(a).dist(a);I<y&&(y=I,x=F)}v||(v=x);v&&(x=m.placeholder,x||(m.placeholder=x=hd.morph({fill:f.fill,extent:f.extent,reactsToPointer:!1,acceptsDrops:!1})),hd.obj.equals(x._textPos||{},v.textPos)||(this!==x.owner&&this.addMorph(x),x.position=v.bounds.topLeft(),r&&r.useTextFlowPlaceholder&&(x.remove(),x._textPos=v.textPos,this.insertText([x,null],v.textPos))))}else f=this.textPositionFromPoint(a.positionIn(this)),
this.focus(),this.cursorPosition=f}}},{key:"onDropHoverOut",value:function(a){var f=a.hand.grabbedMorphs[0];f&&(f.opacity=a.state.originalOpacity||1);if(a=a.state.dropHover)if(f=a.get(this))a.delete(this),f.dropGrid&&(f.dropGrid.forEach(function(m){return m.morph&&m.morph.remove()}),f.dropGrid=null),f.placeholder&&(f.placeholder.remove(),f.placeholder=null)}},{key:"menuItems",value:function(){var a=this,f,m,r,v,x;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){if(1==y.nextAddress)return f=
$jscomp,m=f.makeIterator,y.yield(Promise.all([Pb._get(Object.getPrototypeOf(l.prototype),"menuItems",a).call(a),a.menuItemsForContextMenu()]),2);r=m.call(f,y.yieldResult);v=r.next().value;x=r.next().value;return y.return(v.concat({isDivider:!0}).concat(x))})}},{key:"menuItemsForContextMenu",value:function(){var a=this,f,m,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(x){switch(x.nextAddress){case 1:f=[{command:"text undo",alias:"undo",target:a,showKeyShortcuts:!0},{command:"text redo",
alias:"redo",target:a,showKeyShortcuts:!0},{command:"manual clipboard copy",alias:"copy",target:a,showKeyShortcuts:a.keysForCommand("clipboard copy"),args:{collapseSelection:!1,delete:!1}},{command:"manual clipboard paste",alias:"paste",target:a,showKeyShortcuts:a.keysForCommand("clipboard paste")},{command:"open text attribute controls",alias:"edit text attributes",target:a},{isDivider:!0},{command:"toggle line wrapping",alias:(a.lineWrapping?"disable":"enable")+" line wrapping",target:a,showKeyShortcuts:!0},
["run command",function(){a.focus();a.world().execCommand("run command")}]],m=$jscomp.makeIterator(a.plugins),r=m.next();case 2:if(r.done){x.jumpTo(4);break}v=r.value;if("function"!==typeof v.getMenuItems){x.jumpTo(3);break}return x.yield(v.getMenuItems(f),6);case 6:f=x.yieldResult;case 3:r=m.next();x.jumpTo(2);break;case 4:return x.return(f)}})}},{key:"keybindings",get:function(){var a=this.world();a=a&&a.getCurrentUser()&&a.getCurrentUser().config&&a.getCurrentUser().config.textKeyBindings||[];
a=Pb._get(Object.getPrototypeOf(l.prototype),"keybindings",this).concat(a).concat(hd.config.text.defaultKeyBindings);return this.pluginCollect("getKeyBindings",a)}},{key:"keybindings",set:function(a){Pb._set(Object.getPrototypeOf(l.prototype),"keybindings",a,this)}},{key:"keyhandlers",get:function(){if(this._cachedKeyhandlers)return this._cachedKeyhandlers;var a=Pb._get(Object.getPrototypeOf(l.prototype),"keyhandlers",this).concat(this._keyhandlers||[]);return this._cachedKeyhandlers=a=this.pluginCollect("getKeyHandlers",
a)}},{key:"snippets",get:function(){return this.pluginCollect("getSnippets",[])}},{key:"onHoverIn",value:function(a){Pb._get(Object.getPrototypeOf(l.prototype),"onHoverIn",this).call(this,a);this.scrollActive=!0;this.makeDirty()}},{key:"onHoverOut",value:function(a){Pb._get(Object.getPrototypeOf(l.prototype),"onHoverOut",this).call(this,a);hd.touchInputDevice||(this.scrollActive=!1,this.makeDirty())}},{key:"onKeyDown",value:function(a){this.compositionRange||a.targetMorph!=this||(this.selection.cursorBlinkStart(),
hd.KeyHandler.invokeKeyHandlers(this,a,!0))}},{key:"onTextInput",value:function(a){hd.KeyHandler.invokeKeyHandlers(this,a,!1)}},{key:"onCompositionStart",value:function(a){this.insertTextAndSelect(a.data);this.compositionRange=this.selection.range}},{key:"onCompositionUpdate",value:function(a){this.selection.range=this.compositionRange;this.selection.text=[a.data,{textDecoration:"underline"}];this.compositionRange=this.selection.range}},{key:"onCompositionEnd",value:function(a){this.selection.range=
this.compositionRange;this.selection.text=a.data;this.cursorPosition=this.compositionRange.end;this.compositionRange=null}},{key:"onCut",value:function(a){if(!this.rejectsInput()&&this.isFocused()&&!hd.config.emacs)this.onCopy(a,!this.rejectsInput())}},{key:"onCopy",value:function(a,f){f=void 0===f?!1:f;if(this.isFocused()){a.stop();var m=this.selection;try{for(var r=this.textAndAttributesInRange(this.selection.range),v=this.defaultTextStyle,x={},y=0;y<r.length;y+=2){var E=r[y];if(E.isMorph)if(E.isDisplacementMorph)r[y]=
"";else{var F=x[y]=hd.serializeMorph(r[y]);r[y]=hd.deserializeMorph(F,{reinitializeIds:!0})}}var I=hd.extractHTMLFromTextMorph(this,r);a.domEvt.clipboardData.setData("text/html",I);for(var J in x)r[J]=x[J];var P=JSON.stringify({textAndAttributes:r,defaultTextStyle:v});a.domEvt.clipboardData.setData("application/x-lively-text",P)}catch(N){$world.logError(N)}a.domEvt.clipboardData.setData("text/plain",m.text);this.execCommand("manual clipboard copy",{collapseSelection:hd.config.codeEditor.collapseSelection||
!1,delete:f,dontTryNativeClipboard:!0})}}},{key:"onPaste",value:function(a){var f=this;if(!this.rejectsInput()){a.stop();var m="";try{m=a.domEvt.clipboardData.getData("text")}catch(y){console.warn(y)}if(!this.editorPlugin)try{var r=a.domEvt.clipboardData.getData("application/x-lively-text");var v=r&&JSON.parse(r);var x=v.textAndAttributes;for(a=0;a<x.length;a+=2)"string"!==typeof x[a]&&(x[a]=hd.deserializeMorph(x[a],{reinitializeIds:!0}))}catch(y){console.warn(y)}x=this.selection;x=x.isMultiSelection?
x.selections:[x];v&&this.undoManager.group();x.forEach(function(y){v?f.replace(y.range,v.textAndAttributes,!1,!0,!0):y.text=m;f.saveMark(y.start);y.collapseToEnd()});v&&this.undoManager.group()}}},{key:"onFocus",value:function(a){var f=this;Pb._get(Object.getPrototypeOf(l.prototype),"onFocus",this).call(this,a);this.makeDirty();this.selection.cursorBlinkStart();if(!this._originalShadow){var m=this.haloShadow||this.propertiesAndPropertySettings().properties.haloShadow.defaultValue;m&&!m.equals&&(m=
new hd.ShadowObject(m));m&&!m.equals(this.dropShadow)&&(this._originalShadow=this.dropShadow);this.withMetaDo({metaInteraction:!0},function(){f.highlightWhenFocused&&f.animate({dropShadow:m,duration:200})})}}},{key:"onBlur",value:function(a){this.makeDirty();this.selection.cursorBlinkStop();this.highlightWhenFocused&&this.animate({dropShadow:this._originalShadow||null,duration:200});this._originalShadow=null;Pb._get(Object.getPrototypeOf(l.prototype),"onBlur",this).call(this,a)}},{key:"onScroll",
value:function(a){this.isFocused()&&this.ensureKeyInputHelperAtCursor();(a=this.env.renderer.getNodeForMorph(this))&&hd.signal(this,"viewChanged",{prop:"scroll",value:hd.pt(a.scrollLeft,a.scrollTop)})}},{key:"ensureKeyInputHelperAtCursor",value:function(){this.env.eventDispatcher.keyInputHelper&&this.env.eventDispatcher.keyInputHelper.ensureBeingAtCursorOfText(this)}},{key:"textPageHeight",value:function(){var a=this.padding,f=this.borderWidthBottom,m=this.borderWidthTop;return this.height-a.top()-
a.bottom()-f-m}},{key:"scrollPageDown",value:function(){this.scrollDown(this.textPageHeight())}},{key:"scrollPageUp",value:function(){this.scrollUp(this.textPageHeight())}},{key:"pageUpOrDown",value:function(a){var f=a=void 0===a?{direction:"up",select:!1}:a;a=f.direction;f=f.select;var m=this.textLayout["down"===a?"lastFullVisibleLine":"firstFullVisibleLine"](this),r=this.cursorPosition.column,v=this.padding;f?this.selection.lead={row:m,column:r}:this.cursorPosition={row:m,column:r};"down"===a?this.alignRowAtTop(m,
hd.pt(0,-v.top()-v.bottom())):(this.alignRowAtBottom(m,hd.pt(0,0)),this.alignRowAtBottom(m,hd.pt(0,v.top()+v.bottom())))}},{key:"gotoDocumentStart",value:function(a){a=void 0===a?{select:!1}:a;this.selection.lead={row:0,column:0};a&&a.select||(this.selection.anchor=this.selection.lead)}},{key:"gotoDocumentEnd",value:function(a){a=void 0===a?{select:!1}:a;this.selection.lead=this.documentEndPosition;a&&a.select||(this.selection.anchor=this.selection.lead)}},{key:"paragraphRangeAbove",value:function(a){if(this.isLineEmpty(a)){for(var f=
a-1;0<=f;f--)if(!this.isLineEmpty(f)){var m=f;break}if(void 0===m)return{start:{row:a,column:0},end:{row:a,column:0}}}else m=a;return this.paragraphRange(m)}},{key:"paragraphRangeBelow",value:function(a){var f=this.isLineEmpty(a),m=this.documentEndPosition;if(f){for(f=a+1;f<=m.row;f++)if(!this.isLineEmpty(f)){var r=f;break}if(void 0===r)return{start:{row:a,column:0},end:{row:a,column:0}}}else r=a;return this.paragraphRange(r)}},{key:"paragraphRange",value:function(a){if(this.isLineEmpty(a))return{start:{row:a,
column:0},end:{row:a,column:0}};var f=this.documentEndPosition;for(a+=1;a<=f.row;a++)if(this.isLineEmpty(a)){var m={row:a-1,column:this.getLine(a-1).length};break}m||(m=f);for(a=m.row-1;0<=a;a--)if(this.isLineEmpty(a)){var r={row:a+1,column:0};break}r||(r={row:0,column:0});return{start:r,end:m}}},{key:"astNodeRange",value:function(a){return{start:this.document.indexToPosition(a.start),end:this.document.indexToPosition(a.end)}}},{key:"parseIntoLines",value:function(a){return a.split("\n")}},{key:"computeTextRangeForChanges",
value:function(a){function f(y,E){for(var F="",I=0;I<y.length;I+=2)F+="string"===typeof y[I]?y[I]:hd.objectReplacementChar;y=r.parseIntoLines(F);return 1===y.length?hd.Range.fromPositions(E,{row:E.row,column:E.column+y[0].length}):1<y.length?hd.Range.fromPositions(E,{row:E.row+y.length-1,column:hd.arr.last(y).length}):hd.Range.at(E)}var m=hd.Range.at(this.cursorPosition);if(!a.length)return m;var r=this,v=a[0];m="replace"===v.selector?f(v.args[1],v.args[0].start):m;for(v=1;v<a.length;v++){var x=a[v];
m="replace"===x.selector?m.merge(f(x.args[1],x.args[0].start)):m}return m}},{key:"ensureUndoManager",value:function(){if(this.undoManager)return this.undoManager;var a=["addTextAttribute","removeTextAttribute","setStyleInRange","replace"];return this.undoManager=new hd.UndoManager(function(f){return a.includes(f.selector)})}},{key:"textUndo",value:function(){var a=this.undoManager.undo();a&&(a=a.changes.slice().reverse().map(function(f){return f.undo}),this.selection=this.computeTextRangeForChanges(a))}},
{key:"textRedo",value:function(){var a=this.undoManager.redo();a&&(a=a.changes.slice(),this.selection=this.computeTextRangeForChanges(a))}},{key:"findMatchingForward",value:function(a,f,m){f=void 0===f?"right":f;m=void 0===m?{}:m;var r=this["right"===f?"charRight":"charLeft"](a),v=m[r];if(!v)return null;var x="right"===f?-1:0;return this.document.scanForward(a,function(y,E){if(y===v){if(0===x)return"right"===f?{row:E.row,column:E.column+1}:E;x--}else y===r&&x++;return null})}},{key:"findMatchingBackward",
value:function(a,f,m){f=void 0===f?"right":f;m=void 0===m?{}:m;var r=this["right"===f?"charRight":"charLeft"](a),v=m[r];if(!v)return null;var x="left"===f?-1:0;return this.document.scanBackward(a,function(y,E){if(y===v){if(0===x)return"right"===f?{row:E.row,column:E.column+1}:E;x--}else y===r&&x++;return null})}},{key:"search",value:function(a,f){f=void 0===f?{start:this.cursorPosition,backwards:!1,caseSensitive:!1}:f;return(new hd.TextSearcher(this)).search(Object.assign({needle:a},f))}},{key:"searchForAll",
value:function(a,f){f=void 0===f?{caseSensitive:!1}:f;return(new hd.TextSearcher(this)).searchForAll(Object.assign({needle:a},f))}},{key:"tokenAt",value:function(a){return this.pluginInvokeFirst("tokenAt",a)}},{key:"astAt",value:function(a){return this.pluginInvokeFirst("astAt",a)}},{key:"evalEnvironment",get:function(){var a=this.editorPlugin;return a&&a.evalEnvironment}},{key:"evalEnvironment",set:function(a){var f=this.editorPlugin;f&&(f.evalEnvironment=a)}},{key:"doitContext",get:function(){return(this.evalEnvironment||
{}).context}},{key:"doitContext",set:function(a){(this.evalEnvironment||{}).context=a}},{key:"logDoit",value:function(a,f){f=void 0===f?{}:f;f=void 0===f.time?Date.now():f.time;if(!(12E4<a.length)){try{var m=JSON.parse(localStorage["lively.next-js-ide-doitlog"])}catch(r){}m||(m=[]);if(!m.some(function(r){return"string"===typeof r?r===a:r.source===a})){m.push({source:a,time:f});50<m.length&&(m=m.slice(-50));try{localStorage["lively.next-js-ide-doitlog"]=JSON.stringify(m)}catch(r){}}}}},{key:"doEval",
value:function(a,f,m){a=void 0===a?this.selection.isEmpty()?this.lineRange():this.selection.range:a;m=void 0===m?this.textInRange(a):m;a=this.pluginFind(function(r){return r.isEditorPlugin&&"function"===typeof r.runEval});if(!a)throw Error("doit not possible: cannot find js editor plugin of !"+this);f&&f.logDoit&&this.logDoit(m,f);return a.runEval(m,f)}},{key:"maybeSelectCommentOrLine",value:function(){var a=this.selection,f=a.lead,m=f.row;f=f.column;var r=this.selectionOrLineString();if(a.isEmpty()){var v=
r.indexOf("//");-1===v||f<v||0<v&&0<=":\"'".indexOf(r[v-1])?this.selectLine(m):a.range={start:{row:m,column:v+2},end:{row:m,column:r.length}}}}},{key:"debugHelper",value:function(a){a=Object.assign({debugDocumentUpdate:!0,debugTextLayout:!0},a);return this._debugHelper?Object.assign(this._debugHelper,a):this._debugHelper=Object.assign({},a,{logged:[],groups:[],reset:function(){this.groups=[[]];this.logged=this.groups[0]},log:function(f){for(var m=[],r=0;r<arguments.length;++r)m[r-0]=arguments[r];
console.log.apply(console,$jscomp.arrayFromIterable(m));this.logged.push({args:m})},dump:function(f){console.log(f.split("\n").map(function(m){return m.slice(0,100)}).join("\n"));this.logged.push({dump:f})},group:function(f){this.groups.push([]);this.logged=hd.arr.last(this.groups);console.group(f)},groupEnd:function(f){console.groupEnd(f)},steps:function(f){for(var m=[];f.length;){var r=hd.arr.takeWhile(f,function(x){return!x.dump});f=f.slice(r.length);var v=(f.shift()||{}).dump;m.push({actions:r,
dump:v})}return m},printToConsole:function(){var f=this;console.clear();this.groups.forEach(function(m){var r=f.steps(m);console.group(r.length);f.steps(m).forEach(function(v,x){v=v.actions;console.group("step "+(x+1));v.forEach(function(y){return console.log.apply(console,$jscomp.arrayFromIterable(y.args))});console.groupEnd("step "+(x+1))});console.groupEnd(r.length)})},report:function(){var f=this,m,r,v,x,y,E,F;return $jscomp.asyncExecutePromiseGeneratorProgram(function(I){if(1==I.nextAddress)return I.yield(System.import("jsdiff",
System.decanonicalize("lively.morphic")),2);if(3!=I.nextAddress)return m=I.yieldResult,I.yield(System.import("lively.ide/diff/editor-plugin.js"),3);r=I.yieldResult;v=r.default;x=0;y="";E=[];F=0;f.groups.forEach(function(J,P){y+=">>> group "+(P+1)+"\n";F++;x++;var N=f.steps(J);N.forEach(function(Y,W){var da=Y.actions;Y=Y.dump;y+=hd.string.indent(">>> step "+(W+1)," ",x)+"\n";F++;x++;da.forEach(function(va){va=hd.string.indent(hd.string.formatFromArray(va.args.slice()).trim()," ",x);F+=va.split("\n").length;
y+=va+"\n"});1<=W&&Y&&N[W-1].dump&&(da=new v,Y=m.createPatch(String(W),N[W-1].dump,Y),da.tokenize(Y),E.push.apply(E,$jscomp.arrayFromIterable(da.styledRanges(F,x))),y+=Y,F+=Y.split("\n").length-1);y+=hd.string.indent("<< step "+(W+1)," ",x)+"\n";F++;x--});y+="<<< group "+(P+1)+"\n";F++;x--});return I.return({report:y,reportStyles:E})})},openReport:function(){var f=this,m,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(x){if(1==x.nextAddress)return x.yield(f.report(),2);m=x.yieldResult;
r=m.reportStyles;v=m.report;return x.return($world.execCommand("open text window",{title:"text debug",fontFamily:"monospace",content:v,rangesAndStyles:r}))})}})}},{key:"consistencyCheck",value:function(){if(this.debug)return this.document.consistencyCheck();try{return this.document.consistencyCheck()}catch(r){var a=this.document;this.brokenDocument||(this.brokenDocument=a);var f=this.world()||$world;try{var m=new hd.Document([]);m.textAndAttributes=a.textAndAttributes;this.changeDocument(m)}catch(v){f?
f.logError("Broken document could not be fixed"):console.error("Broken document could not be fixed")}f?f.logError(r):console.error(r)}}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Text"}},{key:"makeLabel",value:function(a,f){return new hd.morph(Object.assign({type:"label",value:a,fontFamily:"IBM Plex, Helvetica Neue, Arial, sans-serif",fontColor:hd.Color.almostBlack,fontSize:11},f))}},{key:"makeInputLine",value:function(a){return new (System.get(System.decanonicalize("lively.morphic")).InputLine)(a)}},
{key:"defaultTextStyle",get:function(){if(this._defaultTextStyle)return this._defaultTextStyle;for(var a=this.prototype.propertiesAndPropertySettings().properties,f=this.defaultTextStyleProps,m={},r=0;r<f.length;r++){var v=f[r];m[v]=a[v].defaultValue}return this._defaultTextStyle=m}},{key:"defaultTextStyleProps",get:function(){if(this._defaultTextStyleProps)return this._defaultTextStyleProps;var a=this.prototype.propertiesAndPropertySettings().properties,f=[],m;for(m in a)a[m].isDefaultTextStyleProp&&
f.push(m);return this._defaultTextStyleProps=f}},{key:"properties",get:function(){return{clipMode:{isStyleProp:!0,defaultValue:"visible",set:function(a){this.setProperty("clipMode",a);this.fixedWidth=this.fixedHeight=this.isClip()}},fontMetric:{group:"_rendering",serialize:!1,get:function(){return this.getProperty("fontMetric")||this.env.fontMetric}},undoManager:{group:"core",before:["document"],initialize:function(){this.ensureUndoManager()}},textRenderer:{group:"_rendering",after:["viewState"],
initialize:function(){this.textRenderer=new hd.Renderer(this.env.domEnv)}},debug:{group:"_debugging",isStyleProp:!0,after:["textRenderer","textLayout"],defaultValue:!1,doc:"For visualizing and debugging text layout and rendering"},defaultViewState:{group:"_rendering",derived:!0,readOnly:!0,get:function(){return{_needsFit:!0,text_layer_node:null,fontmetric_text_layer_node:null,dom_nodes:[],dom_nodeFirstRow:[],scrollTop:0,scrollHeight:0,scrollBottom:0,textHeight:0,textWidth:0,firstVisibleRow:0,lastVisibleRow:0,
heightBefore:0,wasScrolled:!1,afterTextRenderHook:null,fastScroll:!0}}},viewState:{group:"_rendering",initialize:function(){this.viewState=this.defaultViewState}},displacingMorphMap:{group:"_rendering",initialize:function(){this.displacingMorphMap=new Map}},embeddedMorphMap:{group:"_rendering",initialize:function(){this.embeddedMorphMap=new Map}},embeddedMorphs:{group:"text",derived:!0,readOnly:!0,after:["embeddedMorphMap"],get:function(){return this.embeddedMorphMap?Array.from(this.embeddedMorphMap.keys()):
[]}},textLayout:{group:"_rendering",after:["textRenderer"],initialize:function(){this.textLayout=new hd.TextLayout(this)}},document:{group:"text",initialize:function(){this.document=hd.Document.fromString("",{maxLeafSize:50,minLeafSize:25,maxNodeSize:35,minNodeSize:7});this.consistencyCheck()}},draggable:{defaultValue:!1},useSoftTabs:{group:"text",isStyleProp:!0,defaultValue:void 0!==hd.config.text.useSoftTabs?hd.config.text.useSoftTabs:!0},tabWidth:{group:"text",isStyleProp:!0,defaultValue:hd.config.text.tabWidth||
2},tab:{group:"text",after:["useSoftTabs","tabWidth"],readOnly:!0,derived:!0,get:function(){return this.useSoftTabs?" ".repeat(this.tabWidth):"\t"}},autoInsertPairs:{group:"text",defaultValue:!0},extent:{get:function(){var a=this,f=this.getProperty("extent");!this._textChange&&this.viewState&&this.viewState._needsFit&&!this._rendering&&!this._measuringTextBox&&f&&this.owner&&(this._measuringTextBox=!0,hd.noUpdate(function(){a.directRender()}),this._measuringTextBox=!1);return this.getProperty("extent")}},
fixedWidth:{group:"text",isStyleProp:!0,after:["clipMode","viewState"],defaultValue:!1},fixedHeight:{group:"text",isStyleProp:!0,after:["clipMode","viewState"],defaultValue:!1},readOnly:{group:"text",isStyleProp:!0,defaultValue:!1,set:function(a){this.nativeCursor=a?"default":"auto";this.setProperty("readOnly",a)}},selectable:{group:"selection",isStyleProp:!0,after:["selection"],defaultValue:!0,set:function(a){this.setProperty("selectable",a);a||this.selection.collapse()}},padding:{group:"styling",
type:"Rectangle",isStyleProp:!0,after:["textLayout","viewState"],defaultValue:hd.Rectangle.inset(0),set:function(a){this.setProperty("padding","number"===typeof a?hd.Rectangle.inset(a):a)}},haloShadow:{group:"styling",type:"Shadow",isStyleProp:!0,defaultValue:null},highlightWhenFocused:{group:"styling",defaultValue:!1,after:["haloShadow"],set:function(a){this.setProperty("highlightWhenFocused",a);a&&!this.haloShadow&&(this.haloShadow={blur:6,color:hd.Color.rgb(52,152,219),distance:0,rotation:45})}},
cursorPosition:{group:"selection",derived:!0,after:["selection"],get:function(){return this.selection.lead},set:function(a){this.selection.range={start:a,end:a}}},selection:{group:"selection",derived:!0,after:["document","anchors"],get:function(){var a=this.getProperty("selection");if(a)return a;a=new (hd.config.text.useMultiSelect?hd.MultiSelection:hd.Selection)(this);this.setProperty("selection",a);return a},set:function(a){this._isDeserializing&&this._initializedByCachedBounds&&this.textLayout.restore(this._initializedByCachedBounds,
this);a?a.isSelection?this.setProperty("selection",a):this.selection.range=a:(this.selection.isMultiSelection&&this.selection.disableMultiSelect(),this.selection.collapse())}},selections:{group:"selection",derived:!0,after:["selection"],get:function(){return this.selection.isMultiSelection?this.selection.selections:[this.selection]},set:function(a){var f=this;this.selection=a[0];this.selection.isMultiSelection&&a.slice(1).forEach(function(m){return f.selection.addRange(m)})}},textString:{group:"text",
after:["document"],derived:!0,get:function(){return this.document?this.document.textString:""},set:function(a){a=null!=a?String(a):"";this._isDeserializing&&this._initializedByCachedBounds&&this.textLayout.restore(this._initializedByCachedBounds,this);this.deleteText({start:{column:0,row:0},end:this.document.endPosition});this.insertText(a,{column:0,row:0})}},value:{group:"text",after:["document","embeddedMorphMap"],derived:!0,get:function(){var a=this.textAndAttributes;if(1===a.length){var f=$jscomp.makeIterator(a[0]),
m=f.next().value;f=f.next().value;if(!Object.keys(f||{}).length)return m}return a},set:function(a){"string"===typeof a?this.textString=a:this.textAndAttributes=a}},textAndAttributes:{group:"text",derived:!0,after:["document"],get:function(){return this.document.textAndAttributes},set:function(a){this._isDeserializing&&this._initializedByCachedBounds&&this.textLayout.restore(this._initializedByCachedBounds,this);this.replace({start:{row:0,column:0},end:this.documentEndPosition},a)}},defaultTextStyleProps:{group:"_internal",
readOnly:!0,derived:!0,get:function(){return this.constructor.defaultTextStyleProps}},defaultTextStyle:{group:"styling",after:["viewState"],derived:!0,get:function(){return hd.obj.select(this,this.defaultTextStyleProps)},set:function(a){Object.assign(this,a)}},customizedTextStyle:{group:"styling",readOnly:!0,derived:!0,get:function(){for(var a={},f=this.defaultTextStyleProps,m=this.constructor.defaultTextStyle,r=0;r<f.length;r++){var v=f[r],x=this[v];x!==m[v]&&(a[v]=x)}return a}},nativeCursor:{defaultValue:"",
isDefaultTextStyleProp:!0},fontFamily:{group:"text styling",type:"Enum",values:hd.config.text.basicFontItems,defaultValue:"IBM Plex Sans, Sans-Serif",isStyleProp:!0,isDefaultTextStyleProp:!0,after:["defaultTextStyle"],set:function(a){this.setProperty("fontFamily",hd.sanitizeFont(a))}},fontSize:{group:"text styling",type:"Number",min:1,unit:"pt",defaultValue:12,isStyleProp:!0,isDefaultTextStyleProp:!0,after:["defaultTextStyle"]},selectionColor:{group:"text styling",type:"Color",defaultValue:hd.Color.rgba(212,
230,241,.8),isStyleProp:!0,after:["defaultTextStyle"]},cursorColor:{group:"text styling",type:"Color",isStyleProp:!0,after:["defaultTextStyle"],defaultValue:hd.Color.black},fontColor:{group:"text styling",type:"Color",defaultValue:hd.Color.black,isStyleProp:!0,isDefaultTextStyleProp:!0,after:["defaultTextStyle"]},fontWeight:{group:"text styling",type:"Enum",values:["bold","bolder","light","lighter","normal"],defaultValue:"normal",isStyleProp:!0,isDefaultTextStyleProp:!0,after:["defaultTextStyle"]},
fontStyle:{group:"text styling",type:"Enum",values:["normal","italic","oblique"],defaultValue:"normal",isStyleProp:!0,isDefaultTextStyleProp:!0,after:["defaultTextStyle"]},textDecoration:{group:"text styling",type:"Enum",values:["none","underline"],defaultValue:"none",isStyleProp:!0,isDefaultTextStyleProp:!0,after:["defaultTextStyle"]},textStyleClasses:{group:"text styling",isStyleProp:!0,isDefaultTextStyleProp:!0,after:["defaultTextStyle"]},backgroundColor:{group:"text styling",type:"Color",isStyleProp:!0,
isDefaultTextStyleProp:!0,after:["defaultTextStyle"]},textAlign:{group:"text styling",type:"Enum",values:["center","justify","left","right"],isStyleProp:!0,isDefaultTextStyleProp:!0,after:["document","defaultTextStyle","viewState"]},lineHeight:{group:"text styling",type:"Number",min:1,isFloat:!0,isStyleProp:!0,isDefaultTextStyleProp:!0,defaultValue:1.4,after:["document","defaultTextStyle","viewState"]},letterSpacing:{group:"text styling",isStyleProp:!0,isDefaultTextStyleProp:!0,after:["document",
"defaultTextStyle","viewState"]},wordSpacing:{group:"text styling",isStyleProp:!0,isDefaultTextStyleProp:!0,after:["document","defaultTextStyle","viewState"]},lineWrapping:{group:"text",type:"Enum",values:[!1,!0,"by-words","anywhere","only-by-words","wider","by-chars"],isStyleProp:!0,defaultValue:!1,after:["document","viewState"]},anchors:{group:"core",defaultValue:[],set:function(a){var f=this,m=hd.arr.withoutAll(a,this.anchors);hd.arr.withoutAll(this.anchors,a).forEach(function(r){return f.removeAnchor(r)});
m.forEach(function(r){return f.addAnchor(r)})}},markers:{group:"core",defaultValue:[]},savedMarks:{group:"core",defaultValue:[],after:["anchors"],set:function(a){var f=this;a=a.map(function(r){return r.isAnchor?r:f.addAnchor(Object.assign({},r,{id:"saved-mark-"+hd.string.newUUID()}))});var m=this.savedMarks.filter(function(r){return!a.includes(r)});a>hd.config.text.markStackSize&&m.push.apply(m,$jscomp.arrayFromIterable(a.splice(0,a.length-hd.config.text.markStackSize)));m.map(function(r){return f.removeAnchor(r)});
return this.setProperty("savedMarks",a)}},activeMarkPosition:{group:"_internal",after:["activeMark"],derived:!0,get:function(){var a=this.activeMark;return a?a.position:null}},activeMark:{group:"core",after:["anchors"],set:function(a){if(a)a=this.addAnchor(a.isAnchor?a:Object.assign({},a,{id:"saved-mark-"+hd.string.newUUID()}));else{var f=this.activeMark;this.savedMarks.includes(f)||this.removeAnchor(f)}this.setProperty("activeMark",a)}},plugins:{group:"plugins",defaultValue:[],after:["value"],set:function(a){var f=
this,m=this.getProperty("plugins");hd.arr.withoutAll(m,a).forEach(function(r){return r&&f.removePlugin(r)});a.forEach(function(r){return r&&f.addPlugin(r)})}},editorModeName:{group:"plugins",derived:!0,after:["plugins"],get:function(){var a=this.editorPlugin;return a?a.shortName:null},set:function(a){this.changeEditorMode(a)}}}}}],e,{pathInPackage:function(){return"text/morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:1319,end:113566})}(hd.Morph));hd.Text=dv;hd.Text=dv;hd.Text=dv;var Ixa=Object.freeze({__proto__:null,Text:dv}),Kh=lively.FreezerRuntime.recorderFor("lively.morphic/text/label.js");Kh.obj=ng;Kh.promise=hg;Kh.arr=Mf;Kh.string=Th;Kh.properties=Kr;Kh.Rectangle=He;Kh.Color=xg;Kh.signal=Xl;Kh.connect=Dl;Kh.vdom=UI;Kh.Morph=ql;Kh.config=em;Kh.defaultStyle=Es;Kh.defaultAttributes=Fs;Kh.Icon=Rp;Kh.Icons=gP;Kh.splitTextAndAttributesIntoLines=
oI;Kh.h=Kh.vdom.h;var ev=Ha("aX",function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/text/label.js"),l=e.hasOwnProperty("Label")&&"function"===typeof e.Label?e.Label:e.Label=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Pb(l,b,[{key:"onChange",value:function(a){Pb._get(Object.getPrototypeOf(l.prototype),"onChange",this).call(this,a);a.prop&&a.prop.includes("borderWidth")&&this.fit()}},{key:Symbol.for("lively-instance-initialize"),
value:function(a){var f=a=void 0===a?{}:a,m=f.fontMetric,r=f.position,v=f.rightCenter,x=f.leftCenter,y=f.topCenter,E=f.bottom,F=f.top,I=f.right,J=f.left,P=f.bottomCenter,N=f.bottomLeft,Y=f.bottomRight,W=f.topRight,da=f.topLeft,va=f.center;f=f.extent;Pb._get(Object.getPrototypeOf(l.prototype),Symbol.for("lively-instance-initialize"),this).call(this,Kh.obj.dissoc(a,["fontMetric"]));m&&(this._fontMetric=m);this._cachedTextBounds=null;this.fit();void 0!==f&&(this.extent=f);void 0!==r&&(this.position=
r);void 0!==v&&(this.rightCenter=v);void 0!==x&&(this.leftCenter=x);void 0!==y&&(this.topCenter=y);void 0!==E&&(this.bottom=E);void 0!==F&&(this.top=F);void 0!==I&&(this.right=I);void 0!==J&&(this.left=J);void 0!==P&&(this.bottomCenter=P);void 0!==N&&(this.bottomLeft=N);void 0!==Y&&(this.bottomRight=Y);void 0!==W&&(this.topRight=W);void 0!==da&&(this.topLeft=da);void 0!==va&&(this.center=va)}},{key:"__additionally_serialize__",value:function(a,f,m,r){Pb._get(Object.getPrototypeOf(l.prototype),"__additionally_serialize__",
this).call(this,a,f,m,r);this.autofit&&this.fitIfNeeded();a._cachedTextBounds=this._cachedTextBounds&&this._cachedTextBounds.toTuple()}},{key:"__after_deserialize__",value:function(a,f,m){Pb._get(Object.getPrototypeOf(l.prototype),"__after_deserialize__",this).call(this,a,f,m);a._cachedTextBounds&&(this.changeMetaData("deserializeInfo",{recoveredTextBounds:!0}),this._cachedTextBounds=Kh.Rectangle.fromTuple(a._cachedTextBounds))}},{key:"isLabel",get:function(){return!0}},{key:"textStyle",get:function(){return Kh.obj.select(this,
"textStyleClasses textDecoration fontStyle fontWeight textShadow fontColor fontSize fontFamily".split(" "))}},{key:"fit",value:function(){this.extent=this.textBounds().extent().addXY(this.borderWidthLeft+this.borderWidthRight,this.borderWidthTop+this.borderWidthBottom);this.visible?this._needsFit=!1:this._cachedTextBounds=null;return this}},{key:"fitIfNeeded",value:function(){this._needsFit&&this.allFontsLoaded()&&this.fit()}},{key:"textAndAttributesOfLines",get:function(){return Kh.splitTextAndAttributesIntoLines(this.textAndAttributes,
"\n")}},{key:"allFontsLoaded",value:function(){var a=this,f=this.env.fontMetric;return[this].concat($jscomp.arrayFromIterable(this.textAndAttributes.map(function(m,r){if(r%2)return{fontFamily:m&&m.fontFamily||a.fontFamily,fontWeight:m&&m.fontWeight||a.fontWeight}}).filter(Boolean))).every(function(m){return f.isFontSupported(m.fontFamily,m.fontWeight)})}},{key:"whenFontLoaded",value:function(){var a=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){return f.return(Kh.promise.waitFor(5E3,
function(){return a.allFontsLoaded()}))})}},{key:"textBoundsSingleChunk",value:function(){var a=this._fontMetric||this.env.fontMetric,f=$jscomp.makeIterator(this.textAndAttributes),m=f.next().value;f=f.next().value;var r=Object.assign({},this.textStyle,{},f);f=this.padding;a.isProportional(r.fontFamily)?(a=a.sizeFor(r,m),m=a.width,a=a.height):(r=a.sizeFor(r,"x"),a=r.height,m=m.length*r.width);return new Kh.Rectangle(0,0,Math.ceil(f.left()+f.right()+m),Math.ceil(f.top()+f.bottom()+a))}},{key:"textBoundsAllChunks",
value:function(){for(var a=this._fontMetric||this.env.fontMetric,f=this.padding,m=this.textStyle,r=this.textAndAttributesOfLines,v=!a.isProportional(m.fontFamily),x=a.sizeFor(m,"x").height,y=0,E=0,F=0;F<r.length;F++){var I=r[F];if(I.length){for(var J=0,P=0,N=0;N<I.length;N+=2){var Y=I[N],W=I[N+1]||{},da=Object.assign({},m,{},W);v&&!W.fontFamily||!a.isProportional(da.fontFamily)?(da=a.sizeFor(da,"x"),W=da.height,P+=Y.length*da.width,J=Math.max(J,W)):(Y=a.sizeFor(da,Y),W=Y.height,P+=Y.width,da.paddingRight&&
(P+=Number.parseInt(da.paddingRight)),da.paddingLeft&&(P+=Number.parseInt(da.paddingLeft)),J=Math.max(J,W))}y+=J;E=Math.max(E,P)}else y+=x}return new Kh.Rectangle(0,0,Math.ceil(f.left()+f.right()+E),Math.ceil(f.top()+f.bottom()+y))}},{key:"invalidateTextLayout",value:function(){this._cachedTextBounds=null;this.autofit&&(this._needsFit=!0);this.makeDirty()}},{key:"textBounds",value:function(){var a=this.textAndAttributes;return this._cachedTextBounds||(this._cachedTextBounds=2>=a.length?this.textBoundsSingleChunk():
this.textBoundsAllChunks())}},{key:"forceRerender",value:function(){this._cachedTextBounds=null;this.makeDirty()}},{key:"applyLayoutIfNeeded",value:function(){this.fitIfNeeded();Pb._get(Object.getPrototypeOf(l.prototype),"applyLayoutIfNeeded",this).call(this)}},{key:"render",value:function(a){this._requestMasterStyling&&(this.master&&this.master.applyIfNeeded(!0),this._requestMasterStyling=!1);for(var f=[],m=this.textAndAttributesOfLines.length,r=0;r<m;r++){for(var v=this.textAndAttributesOfLines[r],
x=0;x<v.length;x+=2){var y=v[x+1];f.push(this.renderChunk(v[x],y))}r<m-1&&f.push(Kh.h("br"))}y=this.textStyle;var E=y.fontColor,F=y.fontSize;m=y.fontStyle;r=y.fontWeight;v=y.textShadow;x=y.textDecoration;var I=y.textStyleClasses,J=this.padding;y={fontFamily:y.fontFamily,fontSize:"number"===typeof F?F+"px":F,color:E?String(E):"transparent",position:"absolute",cursor:this.nativeCursor};E=Kh.defaultAttributes(this,a);v&&(y.textShadow=v);"normal"!==r&&(y.fontWeight=r);"normal"!==m&&(y.fontStyle=m);"none"!==
x&&(y.textDecoration=x);I&&I.length&&(E.className=(E.className||"")+" "+I.join(" "));E.style=Object.assign({},Kh.defaultStyle(this),{},y);return Kh.h("div",E,[Kh.h("div",{style:{pointerEvents:"none",position:"absolute",paddingLeft:J.left()+"px",paddingRight:J.right()+"px",paddingTop:J.top()+"px",paddingBottom:J.bottom()+"px",width:"calc(100% - "+J.left()+"px - "+J.right()+"px)"}},f),a.renderSubmorphs(this)])}},{key:"renderChunk",value:function(a,f){var m=f=f||{},r=m.backgroundColor,v=m.fontColor,
x=m.fontFamily,y=m.fontStyle,E=m.fontWeight,F=m.textShadow,I=m.textDecoration,J=m.textStyleClasses,P=m.textAlign,N=m.float,Y=m.display,W=m.lineHeight,da=m.opacity;m={};var va={style:m};N&&(m.float=N);Y&&(m.display=Y);r&&(m.backgroundColor=String(r));x&&(m.fontFamily=x);v&&(m.color=String(v));F&&(m.textShadow=F);"normal"!==E&&(m.fontWeight=E);"normal"!==y&&(m.fontStyle=y);"none"!==I&&(m.textDecoration=I);P&&(m.textAlign=P);W&&(m.lineHeight=W);da&&(m.opacity=da);J&&J.length&&(va.className=J.join(" "));
r="fontSize width height maxWidth maxHeight top left padding paddingLeft paddingRight paddingBottom paddingTop marginTop marginRight marginLeft marginBottom".split(" ");for(v=0;v<r.length;v++)x=r[v],f.hasOwnProperty(x)&&(y=f[x],m[x]="number"===typeof y?y+"px":y);return Kh.h("span",va,a)}},{key:"interactivelyChangeLabel",value:function(){var a=this,f;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){if(1==m.nextAddress)return m.yield(a.world().prompt("edit label",{input:a.textString,historyId:"lively.morphic-label-edit-hist"}),
2);f=m.yieldResult;"string"===typeof f&&(a.textString=f);m.jumpToEnd()})}},{key:"interactivelySetIcon",value:function(){var a=this,f,m,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){if(1==v.nextAddress)return v.yield(a.world().filterableListPrompt("Select Icon",Object.keys(Kh.Icons).map(function(x){return{isListItem:!0,label:[].concat($jscomp.arrayFromIterable(Kh.Icon.textAttribute(x,{paddingRight:"10px"})),[x,{}]),value:x}})),2);f=v.yieldResult;m=$jscomp.makeIterator(f.selected);
if(r=m.next().value)a.value=Kh.Icon.textAttribute(r);v.jumpToEnd()})}},{key:"menuItems",value:function(){var a=this,f=Pb._get(Object.getPrototypeOf(l.prototype),"menuItems",this).call(this);f.unshift({isDivider:!0});f.unshift(["edit label as rich text",function(){var m;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){if(1==r.nextAddress)return r.yield($world.editPrompt("rich text",{input:a.value,resolveTextAttributes:!0}),2);if(m=r.yieldResult)a.value=m;r.jumpToEnd()})}]);f.unshift(["change label",
function(){return a.interactivelyChangeLabel()}]);f.unshift(["set Icon",function(){return a.interactivelySetIcon()}]);return f}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Label"}},{key:"properties",get:function(){return{acceptsDrops:{defaultValue:!1},fill:{defaultValue:Kh.Color.transparent},draggable:{defaultValue:!1},nativeCursor:{defaultValue:"default"},isIcon:{derived:!0,get:function(){return Kh.properties.values(Kh.Icons).map(function(a){return a.code}).includes(this.textString)}},
value:{derived:!0,after:["textAndAttributes","textString"],get:function(){var a=this.textAndAttributes;if(2>=a.length){var f=$jscomp.makeIterator(a),m=f.next().value;f=f.next().value;if(!Object.keys(f||{}).length)return m||""}return a},set:function(a){"string"===typeof a?this.textString=a:this.textAndAttributes=a}},textString:{derived:!0,after:["textAndAttributes"],get:function(){return this.textAndAttributes.map(function(a,f){return 0==f%2?a:""}).join("")},set:function(a){this.textAndAttributes=
[a,null]}},textAndAttributes:{after:["autofit"],get:function(){var a=this.getProperty("textAndAttributes");if(!a||1>a.length)a=["",null];return a},set:function(a){Array.isArray(a)||(a=[String(a),{}]);0===a.length&&(a=["",{}]);this.setProperty("textAndAttributes",a);this.autofit&&this.invalidateTextLayout();Kh.signal(this,"value",a)}},valueAndAnnotation:{derived:!0,after:["textAndAttributes"],get:function(){var a=this.textAndAttributes,f=null;if(2<a.length){var m=$jscomp.makeIterator(a.slice(-2)),
r=m.next().value;(m=m.next().value)&&m.textStyleClasses&&m.textStyleClasses.includes("annotation")&&(a=a.slice(0,-2),f=[r,m])}return{value:a,annotation:f}},set:function(a){var f=a.value;a=a.annotation;f||(f="");"string"===typeof f&&(f=[f,null]);Array.isArray(f)||(f=[String(f),null]);f=f.slice();if(a){"string"===typeof a&&(a=[a,null]);var m=a[1];m||(m=a[1]={});f.push.apply(f,$jscomp.arrayFromIterable(a));m.textStyleClasses=(m.textStyleClasses||[]).concat("annotation");m.textStyleClasses.includes("annotation")||
m.textStyleClasses.push("annotation")}this.textAndAttributes=f}},autofit:{defaultValue:!0,set:function(a){this.setProperty("autofit",a);a&&(this._needsFit=!0)}},padding:{type:"Rectangle",isStyleProp:!0,defaultValue:Kh.Rectangle.inset(0),after:["autofit"],initialize:function(a){this.padding=a},set:function(a){a||(a=Kh.Rectangle.inset(0));var f=this.padding;this.setProperty("padding","number"===typeof a?Kh.Rectangle.inset(a):a);this.autofit&&!f.equals(a)&&this.invalidateTextLayout()}},fontFamily:{isStyleProp:!0,
type:"Enum",values:Kh.config.text.basicFontItems,after:["autofit"],defaultValue:"IBM Plex Sans, Sans-Serif",set:function(a){var f=this.fontFamily;this.setProperty("fontFamily",a);this.autofit&&f!=a&&this.invalidateTextLayout()}},fontSize:{type:"Number",min:1,isStyleProp:!0,defaultValue:12,after:["autofit"],set:function(a){var f=this.fontSize;this.setProperty("fontSize",a);this.autofit&&a!=f&&this.invalidateTextLayout()}},fontColor:{type:"Color",isStyleProp:!0,defaultValue:Kh.Color.black},fontWeight:{type:"Enum",
values:["bold","bolder","light","lighter"],isStyleProp:!0,defaultValue:"normal",after:["autofit"],set:function(a){var f=this.fontWeight;this.setProperty("fontWeight",a);this.autofit&&f!=a&&this.invalidateTextLayout()}},fontStyle:{type:"Enum",values:["normal","italic","oblique"],isStyleProp:!0,defaultValue:"normal",after:["autofit"],set:function(a){var f=this.fontStyle;this.setProperty("fontStyle",a);this.autofit&&f!=a&&this.invalidateTextLayout()}},textShadow:{type:"String",isStyleProp:!0,defaultValue:""},
textDecoration:{defaultValue:"none"},textStyleClasses:{defaultValue:void 0,after:["autofit"],set:function(a){this.setProperty("textStyleClasses",a);this.autofit&&this.invalidateTextLayout()}}}}},{key:"icon",value:function(a,f){f=void 0===f?{prefix:"",suffix:""}:f;return Kh.Icon.makeLabel(a,f)}}],e,{pathInPackage:function(){return"text/label.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",
version:"0.1.2"}}},{start:499,end:18882})}(Kh.Morph));Kh.Label=ev;Kh.Label=ev;Kh.Label=ev;var Jxa=Object.freeze({__proto__:null,Label:ev}),HZ="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,Kxa={},Ada=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,Lxa=Kxa=function(b,e){function l(fa){var ua=fa.match(/\n/g);ua&&(za+=ua.length);ua=fa.lastIndexOf("\n");L=~ua?fa.length-ua:L+fa.length}function a(){var fa={line:za,column:L};return function(ua){ua.position=new f(fa);y(/^\s*/);return ua}}
function f(fa){(this||HZ).start=fa;(this||HZ).end={line:za,column:L};(this||HZ).source=e.source}function m(fa){var ua=Error(e.source+":"+za+":"+L+": "+fa);ua.reason=fa;ua.filename=e.source;ua.line=za;ua.column=L;ua.source=b;if(e.silent)Z.push(ua);else throw ua;}function r(){return y(/^{\s*/)}function v(){return y(/^}/)}function x(){var fa,ua=[];y(/^\s*/);for(E(ua);b.length&&"}"!=b.charAt(0)&&(fa=da()||va());)!1!==fa&&(ua.push(fa),E(ua));return ua}function y(fa){if(fa=fa.exec(b)){var ua=fa[0];l(ua);
b=b.slice(ua.length);return fa}}function E(fa){var ua;for(fa=fa||[];ua=F();)!1!==ua&&fa.push(ua);return fa}function F(){var fa=a();if("/"==b.charAt(0)&&"*"==b.charAt(1)){for(var ua=2;""!=b.charAt(ua)&&("*"!=b.charAt(ua)||"/"!=b.charAt(ua+1));)++ua;ua+=2;if(""===b.charAt(ua-1))return m("End of comment missing");var gb=b.slice(2,ua-2);L+=2;l(gb);b=b.slice(ua);L+=2;return fa({type:"comment",comment:gb})}}function I(){var fa=y(/^([^{]+)/);if(fa)return qy(fa[0]).replace(/\/\*([^*]|[\r\n]|(\*+([^*/]|[\r\n])))*\*\/+/g,
"").replace(/"(?:\\"|[^"])*"|'(?:\\'|[^'])*'/g,function(ua){return ua.replace(/,/g,"\u200c")}).split(/\s*(?![^(]*\)),\s*/).map(function(ua){return ua.replace(/\u200C/g,",")})}function J(){var fa=a(),ua=y(/^(\*?[-#\/\*\\\w]+(\[[0-9a-z_-]+\])?)\s*/);if(ua){ua=qy(ua[0]);if(!y(/^:\s*/))return m("property missing ':'");var gb=y(/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^\)]*?\)|[^};])+)/);fa=fa({type:"declaration",property:ua.replace(Ada,""),value:gb?qy(gb[0]).replace(Ada,""):""});y(/^[;\s]*/);return fa}}function P(){var fa=
[];if(!r())return m("missing '{'");E(fa);for(var ua;ua=J();)!1!==ua&&(fa.push(ua),E(fa));return v()?fa:m("missing '}'")}function N(){for(var fa,ua=[],gb=a();fa=y(/^((\d+\.\d+|\.\d+|\d+)%?|[a-z]+)\s*/);)ua.push(fa[1]),y(/^,\s*/);if(ua.length)return gb({type:"keyframe",values:ua,declarations:P()})}function Y(){var fa=a(),ua=y(/^@([-\w]+)?keyframes\s*/);if(ua){var gb=ua[1];ua=y(/^([-\w]+)\s*/);if(!ua)return m("@keyframes missing name");ua=ua[1];if(!r())return m("@keyframes missing '{'");for(var hb,ta=
E();hb=N();)ta.push(hb),ta=ta.concat(E());return v()?fa({type:"keyframes",name:ua,vendor:gb,keyframes:ta}):m("@keyframes missing '}'")}}function W(fa){var ua=new RegExp("^@"+fa+"\\s*([^;]+);");return function(){var gb=a(),hb=y(ua);if(hb){var ta={type:fa};ta[fa]=hb[1].trim();return gb(ta)}}}function da(){if("@"==b[0]){var fa;if(!(fa=Y())){fa=a();var ua=y(/^@media *([^{]+)/);if(ua)if(ua=qy(ua[1]),r()){var gb=E().concat(x());fa=v()?fa({type:"media",media:ua,rules:gb}):m("@media missing '}'")}else fa=
m("@media missing '{'");else fa=void 0}fa||(fa=a(),fa=(ua=y(/^@custom-media\s+(--[^\s]+)\s*([^{;]+);/))?fa({type:"custom-media",name:qy(ua[1]),media:qy(ua[2])}):void 0);fa||(fa=a(),(ua=y(/^@supports *([^{]+)/))?(ua=qy(ua[1]),r()?(gb=E().concat(x()),fa=v()?fa({type:"supports",supports:ua,rules:gb}):m("@supports missing '}'")):fa=m("@supports missing '{'")):fa=void 0);if(!(fa=fa||R()||X()||ja()))if(fa=a(),gb=y(/^@([-\w]+)?document *([^{]+)/))if(ua=qy(gb[1]),gb=qy(gb[2]),r()){var hb=E().concat(x());
fa=v()?fa({type:"document",document:gb,vendor:ua,rules:hb}):m("@document missing '}'")}else fa=m("@document missing '{'");else fa=void 0;if(!fa)if(fa=a(),y(/^@page */))if(ua=I()||[],r()){for(gb=E();hb=J();)gb.push(hb),gb=gb.concat(E());fa=v()?fa({type:"page",selectors:ua,declarations:gb}):m("@page missing '}'")}else fa=m("@page missing '{'");else fa=void 0;fa||(fa=a(),y(/^@host\s*/)?r()?(ua=E().concat(x()),fa=v()?fa({type:"host",rules:ua}):m("@host missing '}'")):fa=m("@host missing '{'"):fa=void 0);
if(!fa)if(fa=a(),y(/^@font-face\s*/))if(r()){for(ua=E();gb=J();)ua.push(gb),ua=ua.concat(E());fa=v()?fa({type:"font-face",declarations:ua}):m("@font-face missing '}'")}else fa=m("@font-face missing '{'");else fa=void 0;return fa}}function va(){var fa=a(),ua=I();if(!ua)return m("selector missing");E();return fa({type:"rule",selectors:ua,declarations:P()})}e=e||{};var za=1,L=1;f.prototype.content=b;var Z=[],R=W("import"),X=W("charset"),ja=W("namespace");return hW(function(){var fa=x();return{type:"stylesheet",
stylesheet:{source:e.source,rules:fa,parsingErrors:Z}}}())},Rma="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,Bda={};Bda=VN;VN.prototype.emit=function(b){return b};VN.prototype.visit=function(b){return this[b.type](b)};VN.prototype.mapVisit=function(b,e){var l="";e=e||"";for(var a=0,f=b.length;a<f;a++)l+=this.visit(b[a]),e&&a<f-1&&(l+=this.emit(e));return l};var Cda=Bda,lA="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,Dda={},Y8=
Cda,Mxa=wl;Dda=Tm;Mxa(Tm,Y8);Tm.prototype.compile=function(b){return this.stylesheet(b)};Tm.prototype.stylesheet=function(b){return this.mapVisit(b.stylesheet.rules,"\n\n")};Tm.prototype.comment=function(b){return this.emit(this.indent()+"/*"+b.comment+"*/",b.position)};Tm.prototype.import=function(b){return this.emit("@import "+b.import+";",b.position)};Tm.prototype.media=function(b){return this.emit("@media "+b.media,b.position)+this.emit(" {\n"+this.indent(1))+this.mapVisit(b.rules,"\n\n")+this.emit(this.indent(-1)+
"\n}")};Tm.prototype.document=function(b){return this.emit("@"+(b.vendor||"")+"document "+b.document,b.position)+this.emit("  {\n"+this.indent(1))+this.mapVisit(b.rules,"\n\n")+this.emit(this.indent(-1)+"\n}")};Tm.prototype.charset=function(b){return this.emit("@charset "+b.charset+";",b.position)};Tm.prototype.namespace=function(b){return this.emit("@namespace "+b.namespace+";",b.position)};Tm.prototype.supports=function(b){return this.emit("@supports "+b.supports,b.position)+this.emit(" {\n"+this.indent(1))+
this.mapVisit(b.rules,"\n\n")+this.emit(this.indent(-1)+"\n}")};Tm.prototype.keyframes=function(b){return this.emit("@"+(b.vendor||"")+"keyframes "+b.name,b.position)+this.emit(" {\n"+this.indent(1))+this.mapVisit(b.keyframes,"\n")+this.emit(this.indent(-1)+"}")};Tm.prototype.keyframe=function(b){var e=b.declarations;return this.emit(this.indent())+this.emit(b.values.join(", "),b.position)+this.emit(" {\n"+this.indent(1))+this.mapVisit(e,"\n")+this.emit(this.indent(-1)+"\n"+this.indent()+"}\n")};
Tm.prototype.page=function(b){var e=b.selectors.length?b.selectors.join(", ")+" ":"";return this.emit("@page "+e,b.position)+this.emit("{\n")+this.emit(this.indent(1))+this.mapVisit(b.declarations,"\n")+this.emit(this.indent(-1))+this.emit("\n}")};Tm.prototype["font-face"]=function(b){return this.emit("@font-face ",b.position)+this.emit("{\n")+this.emit(this.indent(1))+this.mapVisit(b.declarations,"\n")+this.emit(this.indent(-1))+this.emit("\n}")};Tm.prototype.host=function(b){return this.emit("@host",
b.position)+this.emit(" {\n"+this.indent(1))+this.mapVisit(b.rules,"\n\n")+this.emit(this.indent(-1)+"\n}")};Tm.prototype["custom-media"]=function(b){return this.emit("@custom-media "+b.name+" "+b.media+";",b.position)};Tm.prototype.rule=function(b){var e=this.indent(),l=b.declarations;return l.length?this.emit(b.selectors.map(function(a){return e+a}).join(",\n"),b.position)+this.emit(" {\n")+this.emit(this.indent(1))+this.mapVisit(l,"\n")+this.emit(this.indent(-1))+this.emit("\n"+this.indent()+"}"):
""};Tm.prototype.declaration=function(b){return this.emit(this.indent())+this.emit(b.property+": "+b.value,b.position)+this.emit(";")};Tm.prototype.indent=function(b){(this||lA).level=(this||lA).level||1;return null!=b?((this||lA).level+=b,""):Array((this||lA).level).join((this||lA).indentation||"  ")};var Nxa=Dda,IZ={},Eda=oi.Buffer;(function(b){var e=function(l){return"function"===typeof l?l:"function"===typeof Eda?function(a){return(new Eda(a,"base64")).toString("binary")}:"object"===typeof b.base64js?
function(a){a=b.base64js.b64ToByteArray(a);return Array.prototype.map.call(a,function(f){return String.fromCharCode(f)}).join("")}:function(){throw Error("You're probably in an old browser or an iOS webworker. It might help to include beatgammit's base64-js.");}}(b.atob);b.atob=e;IZ&&(IZ=e)})(window);var Oxa=IZ,Pxa=/^xn--/,Qxa=/[^\0-\x7E]/,Tma=/[\x2E\u3002\uFF0E\uFF61]/g,Sma={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},
Zw=Math.floor,JZ=String.fromCharCode,Fda=function(b,e){return b+22+75*(26>b)-((0!=e)<<5)},Gda=function(b,e,l){var a=0;b=l?Zw(b/700):b>>1;for(b+=Zw(b/e);455<b;a+=36)b=Zw(b/35);return Zw(a+36*b/(b+38))},Hda=function(b){var e=[],l=b.length,a=0,f=128,m=72,r=b.lastIndexOf("-");0>r&&(r=0);for(var v=0;v<r;++v)128<=b.charCodeAt(v)&&zC("not-basic"),e.push(b.charCodeAt(v));for(r=0<r?r+1:0;r<l;){v=a;for(var x=1,y=36;;y+=36){r>=l&&zC("invalid-input");var E=10>(I=b.charCodeAt(r++))-48?I-22:26>I-65?I-65:26>I-97?
I-97:36;(36<=E||E>Zw((2147483647-a)/x))&&zC("overflow");a+=E*x;var F=y<=m?1:y>=m+26?26:y-m;if(E<F)break;E=36-F;x>Zw(2147483647/E)&&zC("overflow");x*=E}x=e.length+1;m=Gda(a-v,x,0==v);Zw(a/x)>2147483647-f&&zC("overflow");f+=Zw(a/x);a%=x;e.splice(a++,0,f)}var I;return String.fromCodePoint.apply(String,$jscomp.arrayFromIterable(e))},Ida=function(b){for(var e=[],l=(b=$8(b)).length,a=128,f=0,m=72,r=$jscomp.makeIterator(b),v=r.next();!v.done;v=r.next()){var x=v.value;128>x&&e.push(JZ(x))}for((x=r=e.length)&&
e.push("-");x<l;){var y=2147483647,E=$jscomp.makeIterator(b);for(v=E.next();!v.done;v=E.next())v=v.value,v>=a&&v<y&&(y=v);v=x+1;y-a>Zw((2147483647-f)/v)&&zC("overflow");f+=(y-a)*v;a=y;y=$jscomp.makeIterator(b);for(E=y.next();!E.done;E=y.next())if(E=E.value,E<a&&2147483647<++f&&zC("overflow"),E==a){var F=f;for(E=36;;E+=36){var I=E<=m?1:E>=m+26?26:E-m;if(F<I)break;F-=I;var J=36-I;e.push(JZ(Fda(I+F%J,0)));F=Zw(F/J)}e.push(JZ(Fda(F,0)));m=Gda(f,v,x==r);f=0;++x}++f;++a}return e.join("")},Rxa={version:"2.1.0",
ucs2:{decode:$8,encode:function(b){return String.fromCodePoint.apply(String,$jscomp.arrayFromIterable(b))}},decode:Hda,encode:Ida,toASCII:function(b){return Z8(b,function(e){return Qxa.test(e)?"xn--"+Ida(e):e})},toUnicode:function(b){return Z8(b,function(e){return Pxa.test(e)?Hda(e.slice(4).toLowerCase()):e})}},OJ=function(b){switch(typeof b){case "string":return b;case "boolean":return b?"true":"false";case "number":return isFinite(b)?b:"";default:return""}},vD={};vD.decode=vD.parse=function(b,e,
l,a){l=l||"=";var f={};if("string"!=typeof b||0===b.length)return f;var m=/\+/g;b=b.split(e||"&");e=1E3;a&&"number"==typeof a.maxKeys&&(e=a.maxKeys);a=b.length;0<e&&a>e&&(a=e);for(e=0;e<a;++e){var r,v;var x=b[e].replace(m,"%20");var y=x.indexOf(l);0<=y?(r=x.substr(0,y),v=x.substr(y+1)):(r=x,v="");x=decodeURIComponent(r);y=decodeURIComponent(v);Object.prototype.hasOwnProperty.call(f,x)?Array.isArray(f[x])?f[x].push(y):f[x]=[f[x],y]:f[x]=y}return f};vD.encode=vD.stringify=function(b,e,l,a){return e=
e||"&",l=l||"=",null===b&&(b=void 0),"object"==typeof b?Object.keys(b).map(function(f){var m=encodeURIComponent(OJ(f))+l;return Array.isArray(b[f])?b[f].map(function(r){return m+encodeURIComponent(OJ(r))}).join(e):m+encodeURIComponent(OJ(b[f]))}).join(e):a?encodeURIComponent(OJ(a))+l+encodeURIComponent(OJ(b)):""};var dG={},Aw={isString:function(b){return"string"==typeof b},isObject:function(b){return"object"==typeof b&&null!==b},isNull:function(b){return null===b},isNullOrUndefined:function(b){return null==
b}};dG.parse=pI;dG.resolve=function(b,e){return pI(b,!1,!0).resolve(e)};dG.resolveObject=function(b,e){return b?pI(b,!1,!0).resolveObject(e):e};dG.format=function(b){Aw.isString(b)&&(b=pI(b));return b instanceof Ys?b.format():Ys.prototype.format.call(b)};dG.Url=Ys;var Sxa=/^([a-z0-9.+-]+:)/i,Txa=/:[0-9]*$/,Uxa=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,Vxa="{}|\\^`".split("").concat('<>"` \r\n\t'.split("")),KZ=["'"].concat(Vxa),Jda=["%","/","?",";","#"].concat(KZ),Kda=["/","?","#"],Lda=/^[+a-z0-9A-Z_-]{0,63}$/,
Wxa=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,Xxa={javascript:!0,"javascript:":!0},LZ={javascript:!0,"javascript:":!0},eG={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};Ys.prototype.parse=function(b,e,l){if(!Aw.isString(b))throw new TypeError("Parameter 'url' must be a string, not "+typeof b);var a=b.indexOf("?");a=-1!==a&&a<b.indexOf("#")?"?":"#";b=b.split(a);b[0]=b[0].replace(/\\/g,"/");a=b=b.join(a);if(a=a.trim(),!l&&1===b.split("#").length)if(b=Uxa.exec(a))return this.path=
a,this.href=a,this.pathname=b[1],b[2]?(this.search=b[2],this.query=e?vD.parse(this.search.substr(1)):this.search.substr(1)):e&&(this.search="",this.query={}),this;if(b=Sxa.exec(a)){var f=(b=b[0]).toLowerCase();this.protocol=f;a=a.substr(b.length)}if(l||b||a.match(/^\/\/[^@\/]+@[^@\/]+/)){var m="//"===a.substr(0,2);!m||b&&LZ[b]||(a=a.substr(2),this.slashes=!0)}if(!LZ[b]&&(m||b&&!eG[b])){var r,v;m=-1;for(l=0;l<Kda.length;l++)-1!==(x=a.indexOf(Kda[l]))&&(-1===m||x<m)&&(m=x);-1!==(v=-1===m?a.lastIndexOf("@"):
a.lastIndexOf("@",m))&&(r=a.slice(0,v),a=a.slice(v+1),this.auth=decodeURIComponent(r));m=-1;for(l=0;l<Jda.length;l++){var x;-1!==(x=a.indexOf(Jda[l]))&&(-1===m||x<m)&&(m=x)}-1===m&&(m=a.length);this.host=a.slice(0,m);a=a.slice(m);this.parseHost();this.hostname=this.hostname||"";r="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!r)for(m=this.hostname.split(/\./),v=(l=0,m.length);l<v;l++)if((x=m[l])&&!x.match(Lda)){b="";for(var y=0,E=x.length;y<E;y++)127<x.charCodeAt(y)?b+="x":
b+=x[y];if(!b.match(Lda)){v=m.slice(0,l);l=m.slice(l+1);(x=x.match(Wxa))&&(v.push(x[1]),l.unshift(x[2]));l.length&&(a="/"+l.join(".")+a);this.hostname=v.join(".");break}}255<this.hostname.length?this.hostname="":this.hostname=this.hostname.toLowerCase();r||(this.hostname=Rxa.toASCII(this.hostname));l=this.port?":"+this.port:"";this.host=(this.hostname||"")+l;this.href+=this.host;r&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==a[0]&&(a="/"+a))}if(!Xxa[f])for(l=0,v=KZ.length;l<
v;l++)r=KZ[l],-1!==a.indexOf(r)&&(x=encodeURIComponent(r),x===r&&(x=escape(r)),a=a.split(r).join(x));l=a.indexOf("#");-1!==l&&(this.hash=a.substr(l),a=a.slice(0,l));l=a.indexOf("?");if(-1!==l?(this.search=a.substr(l),this.query=a.substr(l+1),e&&(this.query=vD.parse(this.query)),a=a.slice(0,l)):e&&(this.search="",this.query={}),a&&(this.pathname=a),eG[f]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search)l=this.pathname||"",this.path=l+(this.search||"");return this.href=
this.format(),this};Ys.prototype.format=function(){var b=this.auth||"";b&&(b=(b=encodeURIComponent(b)).replace(/%3A/i,":"),b+="@");var e=this.protocol||"",l=this.pathname||"",a=this.hash||"",f=!1,m="";this.host?f=b+this.host:this.hostname&&(f=b+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(f+=":"+this.port));this.query&&Aw.isObject(this.query)&&Object.keys(this.query).length&&(m=vD.stringify(this.query));b=this.search||m&&"?"+m||"";return e&&":"!==e.substr(-1)&&
(e+=":"),this.slashes||(!e||eG[e])&&!1!==f?(f="//"+(f||""),l&&"/"!==l.charAt(0)&&(l="/"+l)):f||(f=""),a&&"#"!==a.charAt(0)&&(a="#"+a),b&&"?"!==b.charAt(0)&&(b="?"+b),e+f+(l=l.replace(/[?#]/g,function(r){return encodeURIComponent(r)}))+(b=b.replace("#","%23"))+a};Ys.prototype.resolve=function(b){return this.resolveObject(pI(b,!1,!0)).format()};Ys.prototype.resolveObject=function(b){if(Aw.isString(b)){var e=new Ys;e.parse(b,!1,!0);b=e}e=new Ys;for(var l=Object.keys(this),a=0;a<l.length;a++){var f=l[a];
e[f]=this[f]}if(e.hash=b.hash,""===b.href)return e.href=e.format(),e;if(b.slashes&&!b.protocol){var m=Object.keys(b);for(l=0;l<m.length;l++)a=m[l],"protocol"!==a&&(e[a]=b[a]);return eG[e.protocol]&&e.hostname&&!e.pathname&&(e.path=e.pathname="/"),e.href=e.format(),e}if(b.protocol&&b.protocol!==e.protocol){if(!eG[b.protocol]){m=Object.keys(b);for(l=0;l<m.length;l++)a=m[l],e[a]=b[a];return e.href=e.format(),e}if(e.protocol=b.protocol,b.host||LZ[b.protocol])e.pathname=b.pathname;else{for(var r=(b.pathname||
"").split("/");r.length&&!(b.host=r.shift()););b.host||(b.host="");b.hostname||(b.hostname="");""!==r[0]&&r.unshift("");2>r.length&&r.unshift("");e.pathname=r.join("/")}if(e.search=b.search,e.query=b.query,e.host=b.host||"",e.auth=b.auth,e.hostname=b.hostname||b.host,e.port=b.port,e.pathname||e.search)e.path=(e.pathname||"")+(e.search||"");return e.slashes=e.slashes||b.slashes,e.href=e.format(),e}l=e.pathname&&"/"===e.pathname.charAt(0);var v=b.host||b.pathname&&"/"===b.pathname.charAt(0),x=l=v||
l||e.host&&b.pathname;a=e.pathname&&e.pathname.split("/")||[];f=(r=b.pathname&&b.pathname.split("/")||[],e.protocol&&!eG[e.protocol]);if(f&&(e.hostname="",e.port=null,e.host&&(""===a[0]?a[0]=e.host:a.unshift(e.host)),e.host="",b.protocol&&(b.hostname=null,b.port=null,b.host&&(""===r[0]?r[0]=b.host:r.unshift(b.host)),b.host=null),l=l&&(""===r[0]||""===a[0])),v)e.host=b.host||""===b.host?b.host:e.host,e.hostname=b.hostname||""===b.hostname?b.hostname:e.hostname,e.search=b.search,e.query=b.query,a=r;
else if(r.length)a||(a=[]),a.pop(),a=a.concat(r),e.search=b.search,e.query=b.query;else if(!Aw.isNullOrUndefined(b.search))return f&&(e.hostname=e.host=a.shift(),(m=!!(e.host&&0<e.host.indexOf("@"))&&e.host.split("@"))&&(e.auth=m.shift(),e.host=e.hostname=m.shift())),e.search=b.search,e.query=b.query,Aw.isNull(e.pathname)&&Aw.isNull(e.search)||(e.path=(e.pathname?e.pathname:"")+(e.search?e.search:"")),e.href=e.format(),e;if(!a.length)return e.pathname=null,e.search?e.path="/"+e.search:e.path=null,
e.href=e.format(),e;v=a.slice(-1)[0];r=(e.host||b.host||1<a.length)&&("."===v||".."===v)||""===v;for(var y=0,E=a.length;0<=E;E--)"."===(v=a[E])?a.splice(E,1):".."===v?(a.splice(E,1),y++):y&&(a.splice(E,1),y--);if(!l&&!x)for(;y--;y)a.unshift("..");!l||""===a[0]||a[0]&&"/"===a[0].charAt(0)||a.unshift("");r&&"/"!==a.join("/").substr(-1)&&a.push("");x=""===a[0]||a[0]&&"/"===a[0].charAt(0);f&&(e.hostname=e.host=x?"":a.length?a.shift():"",(m=!!(e.host&&0<e.host.indexOf("@"))&&e.host.split("@"))&&(e.auth=
m.shift(),e.host=e.hostname=m.shift()));return(l||e.host&&a.length)&&!x&&a.unshift(""),a.length?e.pathname=a.join("/"):(e.pathname=null,e.path=null),Aw.isNull(e.pathname)&&Aw.isNull(e.search)||(e.path=(e.pathname?e.pathname:"")+(e.search?e.search:"")),e.auth=b.auth||e.auth,e.slashes=e.slashes||b.slashes,e.href=e.format(),e};Ys.prototype.parseHost=function(){var b=this.host,e=Txa.exec(b);e&&(":"!==(e=e[0])&&(this.port=e.substr(1)),b=b.substr(0,b.length-e.length));b&&(this.hostname=b)};var Yxa=mj,PJ=
{resolve:function(){for(var b,e="",l=!1,a=arguments.length-1;-1<=a&&!l;a--){var f;0<=a?f=arguments[a]:(void 0===b&&(b=Yxa.cwd()),f=b);Bw(f);0!==f.length&&(e=f+"/"+e,l=47===f.charCodeAt(0))}return e=a9(e,!l),l?0<e.length?"/"+e:"/":0<e.length?e:"."},normalize:function(b){if(Bw(b),0===b.length)return".";var e=47===b.charCodeAt(0),l=47===b.charCodeAt(b.length-1);return 0!==(b=a9(b,!e)).length||e||(b="."),0<b.length&&l&&(b+="/"),e?"/"+b:b},isAbsolute:function(b){return Bw(b),0<b.length&&47===b.charCodeAt(0)},
join:function(){if(0===arguments.length)return".";for(var b,e=0;e<arguments.length;++e){var l=arguments[e];Bw(l);0<l.length&&(void 0===b?b=l:b+="/"+l)}return void 0===b?".":PJ.normalize(b)},relative:function(b,e){if((Bw(b),Bw(e),b===e)||(b=PJ.resolve(b))===(e=PJ.resolve(e)))return"";for(var l=1;l<b.length&&47===b.charCodeAt(l);++l);for(var a=b.length,f=a-l,m=1;m<e.length&&47===e.charCodeAt(m);++m);for(var r=e.length-m,v=f<r?f:r,x=-1,y=0;y<=v;++y){if(y===v){if(r>v){if(47===e.charCodeAt(m+y))return e.slice(m+
y+1);if(0===y)return e.slice(m+y)}else f>v&&(47===b.charCodeAt(l+y)?x=y:0===y&&(x=0));break}var E=b.charCodeAt(l+y);if(E!==e.charCodeAt(m+y))break;47===E&&(x=y)}f="";for(y=l+x+1;y<=a;++y)y!==a&&47!==b.charCodeAt(y)||(0===f.length?f+="..":f+="/..");return 0<f.length?f+e.slice(m+x):(m+=x,47===e.charCodeAt(m)&&++m,e.slice(m))},_makeLong:function(b){return b},dirname:function(b){if(Bw(b),0===b.length)return".";for(var e=47===b.charCodeAt(0),l=-1,a=!0,f=b.length-1;1<=f;--f)if(47===b.charCodeAt(f)){if(!a){l=
f;break}}else a=!1;return-1===l?e?"/":".":e&&1===l?"//":b.slice(0,l)},basename:function(b,e){if(void 0!==e&&"string"!=typeof e)throw new TypeError('"ext" argument must be a string');Bw(b);var l,a=0,f=-1,m=!0;if(void 0!==e&&0<e.length&&e.length<=b.length){if(e.length===b.length&&e===b)return"";var r=e.length-1,v=-1;for(l=b.length-1;0<=l;--l){var x=b.charCodeAt(l);if(47===x){if(!m){a=l+1;break}}else-1===v&&(m=!1,v=l+1),0<=r&&(x===e.charCodeAt(r)?-1==--r&&(f=l):(r=-1,f=v))}return a===f?f=v:-1===f&&(f=
b.length),b.slice(a,f)}for(l=b.length-1;0<=l;--l)if(47===b.charCodeAt(l)){if(!m){a=l+1;break}}else-1===f&&(m=!1,f=l+1);return-1===f?"":b.slice(a,f)},extname:function(b){Bw(b);for(var e=-1,l=0,a=-1,f=!0,m=0,r=b.length-1;0<=r;--r){var v=b.charCodeAt(r);if(47!==v)-1===a&&(f=!1,a=r+1),46===v?-1===e?e=r:1!==m&&(m=1):-1!==e&&(m=-1);else if(!f){l=r+1;break}}return-1===e||-1===a||0===m||1===m&&e===a-1&&e===l+1?"":b.slice(e,a)},format:function(b){if(null===b||"object"!=typeof b)throw new TypeError('The "pathObject" argument must be of type Object. Received type '+
typeof b);var e=b.dir||b.root,l=b.base||(b.name||"")+(b.ext||"");return e?e===b.root?e+l:e+"/"+l:l},parse:function(b){Bw(b);var e={root:"",dir:"",base:"",ext:"",name:""};if(0===b.length)return e;var l,a=b.charCodeAt(0),f=47===a;f?(e.root="/",l=1):l=0;for(var m=-1,r=0,v=-1,x=!0,y=b.length-1,E=0;y>=l;--y)if(47!==(a=b.charCodeAt(y)))-1===v&&(x=!1,v=y+1),46===a?-1===m?m=y:1!==E&&(E=1):-1!==m&&(E=-1);else if(!x){r=y+1;break}return-1===m||-1===v||0===E||1===E&&m===v-1&&m===r+1?-1!==v&&(e.base=e.name=0===
r&&f?b.slice(1,v):b.slice(r,v)):(0===r&&f?(e.name=b.slice(1,m),e.base=b.slice(1,v)):(e.name=b.slice(r,m),e.base=b.slice(r,v)),e.ext=b.slice(m,v)),0<r?e.dir=b.slice(0,r-1):f&&(e.dir="/"),e},sep:"/",delimiter:":",win32:null,posix:null},MZ=PJ.posix=PJ,Mda={},Nda=/%[a-f0-9]{2}/gi,Oda=/(%[a-f0-9]{2})+/gi;Mda=function(b){if("string"!==typeof b)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof b+"`");try{return b=b.replace(/\+/g," "),decodeURIComponent(b)}catch(r){for(var e=
{"%FE%FF":"\ufffd\ufffd","%FF%FE":"\ufffd\ufffd"},l=Oda.exec(b);l;){try{e[l[0]]=decodeURIComponent(l[0])}catch(v){var a=l[0];try{var f=decodeURIComponent(a)}catch(x){f=a.match(Nda);for(var m=1;m<f.length;m++)a=iW(f,m).join(""),f=a.match(Nda);f=a}f!==l[0]&&(e[l[0]]=f)}l=Oda.exec(b)}e["%C2"]="\ufffd";l=Object.keys(e);for(a=0;a<l.length;a++)f=l[a],b=b.replace(new RegExp(f,"g"),e[f]);return b}};var Zxa={},Xma=mj,g9=Oxa,Uma=dG,Vma=MZ,Wma=Mda,Pda=/[#@] sourceMappingURL=([^\s'"]*)/,Yma=RegExp("(?:/\\*(?:\\s*\r?\n(?://)?)?(?:"+
Pda.source+")\\s*\\*/|//(?:"+Pda.source+"))\\s*"),Zma=/^data:([^,;]*)(;[^,;]*)*(?:,(.*))?$/,$ma=/^(?:application|text)\/json$/,ana="utf-8",bna=/\/?$/,$xa=Zxa={resolveSourceMap:d9,resolveSourceMapSync:f9,resolveSources:h9,resolveSourcesSync:j9,resolve:function(b,e,l,a,f){function m(v){h9(v.map,v.sourcesRelativeTo,l,a,function(x,y){if(x)return f(x);v.sourcesResolved=y.sourcesResolved;v.sourcesContent=y.sourcesContent;f(null,v)})}"function"===typeof a&&(f=a,a={});if(null===b){var r={sourceMappingURL:null,
url:e,sourcesRelativeTo:e,map:null};b=qI(e);l(b,function(v,x){if(v)return v.sourceMapData=r,f(v);r.map=String(x);try{r.map=rF(r.map,r)}catch(y){return f(y)}m(r)})}else d9(b,e,l,function(v,x){if(v)return f(v);if(!x)return f(null,null);m(x)})},resolveSync:function(b,e,l,a){if(null===b)b={sourceMappingURL:null,url:e,sourcesRelativeTo:e,map:null},b.map=c9(l,e,b),b.map=rF(b.map,b);else if(b=f9(b,e,l),!b)return null;e=j9(b.map,b.sourcesRelativeTo,l,a);b.sourcesResolved=e.sourcesResolved;b.sourcesContent=
e.sourcesContent;return b},parseMapToJSON:rF},aya=function(){throw Error("Node.js fs module is not supported by jspm core"+("undefined"!=typeof Deno?". Deno support here is tracking in https://github.com/jspm/jspm-core/issues/4, +1's are appreciated!":" in the browser"));},kW="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,Qda={},k9=Cda,bya=wl;Qda=eo;bya(eo,k9);eo.prototype.compile=function(b){return b.stylesheet.rules.map((this||kW).visit,this||kW).join("")};eo.prototype.comment=
function(b){return this.emit("",b.position)};eo.prototype.import=function(b){return this.emit("@import "+b.import+";",b.position)};eo.prototype.media=function(b){return this.emit("@media "+b.media,b.position)+this.emit("{")+this.mapVisit(b.rules)+this.emit("}")};eo.prototype.document=function(b){return this.emit("@"+(b.vendor||"")+"document "+b.document,b.position)+this.emit("{")+this.mapVisit(b.rules)+this.emit("}")};eo.prototype.charset=function(b){return this.emit("@charset "+b.charset+";",b.position)};
eo.prototype.namespace=function(b){return this.emit("@namespace "+b.namespace+";",b.position)};eo.prototype.supports=function(b){return this.emit("@supports "+b.supports,b.position)+this.emit("{")+this.mapVisit(b.rules)+this.emit("}")};eo.prototype.keyframes=function(b){return this.emit("@"+(b.vendor||"")+"keyframes "+b.name,b.position)+this.emit("{")+this.mapVisit(b.keyframes)+this.emit("}")};eo.prototype.keyframe=function(b){var e=b.declarations;return this.emit(b.values.join(","),b.position)+this.emit("{")+
this.mapVisit(e)+this.emit("}")};eo.prototype.page=function(b){var e=b.selectors.length?b.selectors.join(", "):"";return this.emit("@page "+e,b.position)+this.emit("{")+this.mapVisit(b.declarations)+this.emit("}")};eo.prototype["font-face"]=function(b){return this.emit("@font-face",b.position)+this.emit("{")+this.mapVisit(b.declarations)+this.emit("}")};eo.prototype.host=function(b){return this.emit("@host",b.position)+this.emit("{")+this.mapVisit(b.rules)+this.emit("}")};eo.prototype["custom-media"]=
function(b){return this.emit("@custom-media "+b.name+" "+b.media+";",b.position)};eo.prototype.rule=function(b){var e=b.declarations;return e.length?this.emit(b.selectors.join(","),b.position)+this.emit("{")+this.mapVisit(e)+this.emit("}"):""};eo.prototype.declaration=function(b){return this.emit(b.property+":"+b.value,b.position)+this.emit(";")};var cya=Qda,Wp="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,Ly={};Ly=function(b){b._comment=b.comment;b.map=new Bm;b.position=
{line:1,column:1};b.files={};for(var e in Ly)b[e]=Ly[e]};var Rda=function(b){return"\\"===MZ.sep?b.replace(/\\/g,"/").replace(/^[a-z]:\/?/i,"/"):b};Ly.updatePosition=function(b){var e=b.match(/\n/g);e&&((this||Wp).position.line+=e.length);e=b.lastIndexOf("\n");(this||Wp).position.column=~e?b.length-e:(this||Wp).position.column+b.length};Ly.emit=function(b,e){if(e){var l=Rda(e.source||"source.css");(this||Wp).map.addMapping({source:l,generated:{line:(this||Wp).position.line,column:Math.max((this||
Wp).position.column-1,0)},original:{line:e.start.line,column:e.start.column-1}});this.addFile(l,e)}this.updatePosition(b);return b};Ly.addFile=function(b,e){"string"!==typeof e.content||Object.prototype.hasOwnProperty.call((this||Wp).files,b)||((this||Wp).files[b]=e.content)};Ly.applySourceMaps=function(){Object.keys((this||Wp).files).forEach(function(b){var e=(this||Wp).files[b];(this||Wp).map.setSourceContent(b,e);if(!1!==(this||Wp).options.inputSourcemaps&&(e=$xa.resolveSync(e,b,aya))){var l=new pb(e.map);
(this||Wp).map.applySourceMap(l,b,Rda(MZ.dirname(e.sourcesRelativeTo)))}},this||Wp)};Ly.comment=function(b){return/^# sourceMappingURL=/.test(b.comment)?this.emit("",b.position):this._comment(b)};var dya=Ly,eya={},fya=eya=function(b,e){e=e||{};var l=e.compress?new cya(e):new Nxa(e);return e.sourcemap?(dya(l),b=l.compile(b),l.applySourceMaps(),e="generator"===e.sourcemap?l.map:l.map.toJSON(),{code:b,map:e}):b=l.compile(b)},NZ={};NZ.parse=Lxa;NZ.stringify=fya;var tj=lively.FreezerRuntime.recorderFor("lively.morphic/html-morph.js");
tj.obj=ng;tj.promise=hg;tj.string=Th;tj.pt=Ei;tj.Morph=ql;tj.vdom=UI;tj.addOrChangeCSSDeclaration=Aq;tj.css=NZ;var OQ=tj.vdom;tj.diff=OQ.diff;tj.patch=OQ.patch;tj.h=OQ.h;tj.createElement=OQ.create;(function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/html-morph.js"),l=e.hasOwnProperty("CustomVNode")&&"function"===typeof e.CustomVNode?e.CustomVNode:e.CustomVNode=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};
return Pb(l,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a,f){this.morph=a;this.renderer=f;this.morphVtree=null;this.key="custom-"+a.id}},{key:"type",get:function(){return"Widget"}},{key:"renderMorph",value:function(){var a=this.morph,f=this.morphVtree=this.renderer.renderMorph(a),m="customNode-key-"+a.id;f.children[0]&&f.children[0].key===m||f.children.unshift(tj.h(a.domNodeTagName||"div",{key:m},[]));a._updateCSSDeclaration&&(a.ensureCSSDeclaration(),a._updateCSSDeclaration=!1);
return f}},{key:"init",value:function(){var a=tj.createElement(this.renderMorph(),this.renderer.domEnvironment);a.childNodes[0].appendChild(this.morph.domNode);this.morph.cssDeclaration&&this.morph.ensureCSSDeclaration();return a}},{key:"update",value:function(a,f){a=a.morphVtree||this.renderMorph();var m=this.renderMorph();a=tj.diff(a,m);tj.patch(f,a);return null}},{key:"destroy",value:function(a){(a=this.renderer.domEnvironment.document.getElementById("css-for-"+this.morph.id))&&a.remove();console.log("[HTMLMorph] node of "+
this.morph.name+" gets removed from DOM")}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"CustomVNode"}}],e,{pathInPackage:function(){return"html-morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:426,end:2427})})(void 0);var VA=Ha("aW",function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/html-morph.js"),
l=e.hasOwnProperty("HTMLMorph")&&"function"===typeof e.HTMLMorph?e.HTMLMorph:e.HTMLMorph=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Pb(l,b,[{key:"isHTMLMorph",get:function(){return!0}},{key:"ensureCSSDeclaration",value:function(){var a=this;try{var f=tj.css.parse(this.cssDeclaration);this.whenRendered().then(function(){f.stylesheet.rules.forEach(function(m){m.selectors&&(m.selectors=m.selectors.map(function(r){return"#"+
a.id+" "+r}))});tj.addOrChangeCSSDeclaration("css-for-"+a.id,tj.css.stringify(f))})}catch(m){console.error("Error setting cssDeclaration of "+this+": "+m)}}},{key:"defaultHTML",get:function(){return'\n<div style="display: flex;\n            align-items: center;\n            justify-content: center;\n            height: 100%;\n            background: -webkit-gradient(linear, 0% 0%, 0% 100%, color-stop(0%, rgba(242,243,244,1)),color-stop(100%, rgba(229,231,233,1)))">\n  <p style="font: bold 40pt Inconsolata, monospace; color: lightgray;">&lt;HTML&#x2F;&gt;</p>\n</div>'}},
{key:"render",value:function(a){this._requestMasterStyling&&(this.master&&this.master.applyIfNeeded(!0),this._requestMasterStyling=!1);return new tj.CustomVNode(this,a)}},{key:"menuItems",value:function(){var a=this,f=Pb._get(Object.getPrototypeOf(l.prototype),"menuItems",this).call(this);f.unshift(["edit CSS...",function(){return a.world().execCommand("open workspace",{language:"css",content:a.cssDeclaration,target:a})}],["edit html...",function(){return a.world().execCommand("open workspace",{language:"html",
content:a.html,target:a})}],{isDivider:!0});return f}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"HTMLMorph"}},{key:"properties",get:function(){return{extent:{defaultValue:tj.pt(420,330)},html:{after:["cssDeclaration"],isStyleProp:!0,initialize:function(){this.html=this.defaultHTML},get:function(){return this.domNode.innerHTML},set:function(a){this.domNode.innerHTML=a;if(this.master)this.master.onMorphChange(this,{prop:"html",value:a});if(a.includes("<script")){a=this.domNode.querySelectorAll("script");
a=$jscomp.makeIterator(a);for(var f=a.next();!f.done;f=a.next()){var m=f.value;f=m.parentNode;m.remove();for(var r=document.createElement("script"),v=$jscomp.makeIterator(m.attributes),x=v.next();!x.done;x=v.next())x=x.value,r.setAttribute(x.name,x.value);m=$jscomp.makeIterator(m.childNodes);for(v=m.next();!v.done;v=m.next())r.appendChild(v.value);f.appendChild(r)}}}},domNodeTagName:{readOnly:!0,get:function(){return"div"}},domNodeStyle:{readOnly:!0,get:function(){return"position: absolute; width: 100%; height: 100%;"}},
domNode:{derived:!0,get:function(){this._domNode||(this._domNode=this.document.createElement(this.domNodeTagName),this._domNode.setAttribute("style",this.domNodeStyle));return this._domNode},set:function(a){this.domNode.parentNode&&this.domNode.parentNode.replaceChild(a,this.domNode);return this._domNode=a}},document:{readOnly:!0,get:function(){return this.env.domEnv.document}},scrollExtent:{readOnly:!0,get:function(){return tj.pt(this.domNode.scrollWidth,this.domNode.scrollHeight)}},cssDeclaration:{isStyleProp:!0,
set:function(a){this.setProperty("cssDeclaration",a);a?(this.makeDirty(),this._updateCSSDeclaration=!0):(a=this.env.domEnv.document.getElementById("css-for-"+this.id))&&a.remove()}}}}}],e,{pathInPackage:function(){return"html-morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:2752,end:7055})}(tj.Morph));tj.HTMLMorph=VA;tj.HTMLMorph=
VA;tj.HTMLMorph=VA;var QJ=function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/html-morph.js"),l=e.hasOwnProperty("IFrameMorph")&&"function"===typeof e.IFrameMorph?e.IFrameMorph:e.IFrameMorph=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Pb(l,b,[{key:"updateDocument",value:function(){this.srcDoc="<head><style>"+this.cssDeclaration+"</style></head><body>"+this.body+"</body>"}},{key:"isIFrameMorph",
get:function(){return!0}},{key:"reload",value:function(){return this.src?this.loadURL(this.src):this.srcDoc?this.displayHTML(this.srcDoc):null}},{key:"whenLoaded",value:function(){return this._whenLoaded||Promise.resolve()}},{key:"displayHTML",value:function(a,f){f=void 0===f?{}:f;var m=this,r,v,x;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){if(1==y.nextAddress){r=f;if(v=void 0===r.keepScroll?!0:r.keepScroll)x=m.iframeScroll;m.srcDoc=a;return y.yield(m.whenLoaded(),2)}v&&x&&(m.iframeScroll=
x);return y.return(m)})}},{key:"loadURL",value:function(a,f){f=void 0===f?{}:f;var m=this,r,v,x;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){if(1==y.nextAddress){r=f;if(v=void 0===r.keepScroll?!0:r.keepScroll)x=m.iframeScroll;m.src=a;return y.yield(m.whenLoaded(),2)}v&&x&&(m.iframeScroll=x);return y.return(m)})}},{key:"defaultSrcDoc",get:function(){return'\n    <div style="display: flex;\n                align-items: center;\n                justify-content: center;\n                height: 100%;\n                background: -webkit-gradient(linear, 0% 0%, 0% 100%, color-stop(0%, rgba(242,243,244,1)),color-stop(100%, rgba(229,231,233,1)))">\n      <p style="font: bold 40pt Inconsolata, monospace; color: lightgray;">&lt;iFrame&#x2F;&gt;</p>\n    </div>'}},
{key:"defaultHTML",get:function(){return'<iframe width="100%" height="100%" frameBorder="false" srcdoc=""></iframe>'}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"IFrameMorph"}},{key:"example",value:function(){var a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){if(1==f.nextAddress)return a=(new tj.IFrameMorph).openInWindow({title:"iframe"}).targetMorph,a.srcDoc="",a.src="http://localhost:9011/worlds/html%20export",f.yield(a.loadURL("https://google.com"),2);a.iframe.src;
a.iframe.srcDoc;a.src="";a.srcDoc="fooo";return f.yield(a.reload(),0)})}},{key:"properties",get:function(){return{html:{initialize:function(){this.html=this.defaultHTML;this.srcDoc=this.defaultSrcDoc}},body:{set:function(a){this.setProperty("body",a);this.updateDocument()}},cssDeclaration:{isStyleProp:!0,set:function(a){this.setProperty("cssDeclaration",a);this.updateDocument()}},iframe:{derived:!0,readOnly:!0,after:["domNode"],get:function(){return this.domNode.querySelector("iframe")}},src:{derived:!0,
after:["iframe"],get:function(){return this.iframe.src},set:function(a){this.iframe.removeAttribute("srcDoc");this.iframe.src=a;var f=tj.promise.deferred().resolve;this._whenLoaded=tj.promise;this.iframe.onload=function(m){return f(m)}}},srcDoc:{derived:!0,after:["iframe"],get:function(){return this.iframe.srcdoc},set:function(a){this.iframe.removeAttribute("src");this.iframe.srcdoc=a;this._whenLoaded=this.whenRendered().then(function(){return tj.promise.delay(20)})}},iframeScroll:{derived:!0,after:["iframe"],
get:function(){try{var a=this.iframe.contentWindow;return tj.pt(a.scrollX,a.scrollY)}catch(f){return tj.pt(0,0)}},set:function(a){try{this.iframe.contentWindow.scrollTo(a.x,a.y)}catch(f){}}}}}}],e,{pathInPackage:function(){return"html-morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:7066,end:10790})}(tj.HTMLMorph);tj.IFrameMorph=
QJ;tj.IFrameMorph=QJ;tj.IFrameMorph=QJ;var gya=Object.freeze({__proto__:null,HTMLMorph:VA,IFrameMorph:QJ}),Nl=lively.FreezerRuntime.recorderFor("lively.morphic/style-sheets.js");Nl.arr=Mf;Nl.obj=ng;Nl.rect=dj;Nl.ShadowObject=it;Nl.morph=qc;var $w=Ha("aB",function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/style-sheets.js"),l=e.hasOwnProperty("StyleSheet")&&"function"===typeof e.StyleSheet?e.StyleSheet:e.StyleSheet=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return Pb(l,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a,f){Nl.obj.isObject(a)&&!f&&(f=a,a=null);this.rules=f;for(var m in f)f[m]=this.unwrapFoldedProps(f[m]);this.name=a}},{key:"copy",value:function(){var a={},f;for(f in this.rules)a[f]=Object.assign({},this.rules[f]);return new Nl.StyleSheet(this.name,a)}},{key:"__only_serialize__",get:function(){return["rules","context"]}},{key:"context",set:function(a){this._context=a}},{key:"context",get:function(){return this._context}},
{key:"unwrapFoldedProps",value:function(a){["borderRadius","borderWidth","borderColor","borderStyle"].forEach(function(f){if(f in a){var m=a[f];m||(m=0);a[f]=4==Nl.arr.intersect(Nl.obj.keys(m),["top","left","bottom","right"]).length?m:{top:m,bottom:m,right:m,left:m,valueOf:function(){return m}}}});return a}},{key:"removeRule",value:function(a){delete this.rules[a];this.context.requestStyling()}},{key:"setRule",value:function(a,f){this.rules[a]=this.unwrapFoldedProps(f);this.context.requestStyling()}},
{key:"toggleRule",value:function(a,f){this.rules[a]._deactivated=!f;this.context.requestStyling()}},{key:"applicableRules",value:function(){var a={},f;for(f in this.rules)a[f]={styleSheet:this,rule:f};return a}},{key:"toJSExpr",value:function(){return"new StyleSheet("+Nl.obj.inspect(this.rules,{customPrinter:function(a,f,m){return a&&a.isColor||a&&a.isGradient?a.toJSExpr():a&&a.isPoint?a.toString():a&&Nl.arr.all([a.top,a.left,a.right,a.bottom],function(r){return r&&Nl.obj.equals(r,a.top)})?m(a.top):
a&&Nl.obj.keys(a).includes("_rev")?m(Nl.obj.dissoc(a,["_rev","_deactivated"])):f},escapeKeys:!0})+")"}},{key:"applyRule",value:function(a,f,m){var r=this.rules[a];if(r._deactivated)return{};r=Nl.obj.dissoc(r,["_deactivated"]);return f.withMetaDo({styleSheetChange:!0},function(){if("layout"in r){var v=r.layout.copy();v.container=f;r.layout=v}"dropShadow"in r&&(r.dropShadow=new Nl.ShadowObject(r.dropShadow),r.dropShadow.morph=f);"padding"in r&&(r.padding=r.padding.isRect?r.padding:Nl.rect(r.padding,
r.padding));v=Nl.obj.keys(r).filter(function(F){return!Nl.obj.equals(f[F],r[F])});v=Nl.obj.select(r,v);var x=f.propertiesAndPropertySettings().properties,y={},E;for(E in r)y[E]=x[E]&&x[E].defaultValue||f[E];m?f.animate(Object.assign({},v,{duration:m.duration,easing:m.easing})):Object.assign(f,v);return y})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"StyleSheet"}}],e,{pathInPackage:function(){return"style-sheets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:203,end:3712})}(void 0));Nl.StyleSheet=$w;Nl.StyleSheet=$w;Nl.StyleSheet=$w;var Vg=lively.FreezerRuntime.recorderFor("lively.morphic/text/input-line.js");Vg.obj=ng;Vg.arr=Mf;Vg.num=Um;Vg.Rectangle=He;Vg.rect=dj;Vg.Color=xg;Vg.pt=Ei;Vg.connect=Dl;Vg.noUpdate=Jm;Vg.signal=Xl;Vg.disconnect=mg;Vg.Text=dv;Vg.Range=UA;Vg.HTMLMorph=VA;Vg.Icon=Rp;Vg.morph=qc;var OZ=
function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/text/input-line.js"),l=e.hasOwnProperty("InputLine")&&"function"===typeof e.InputLine?e.InputLine:e.InputLine=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Pb(l,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){a=void 0===a?{}:a;Pb._get(Object.getPrototypeOf(l.prototype),Symbol.for("lively-instance-initialize"),this).call(this,
a);Vg.connect(this,"textChange",this,"onInputChanged");Vg.connect(this,"selectionChange",this,"fixCursor")}},{key:"menuItems",value:function(){var a=this,f,m,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(x){return 1==x.nextAddress?(f=[{command:"change placeholder",target:a},{isDivider:!0}],m=f.concat,r=$jscomp,v=r.arrayFromIterable,x.yield(Pb._get(Object.getPrototypeOf(l.prototype),"menuItems",a).call(a),2)):x.return(m.call(f,v.call(r,x.yieldResult)))})}},{key:"onChange",value:function(a){"extent fontSize padding fontFamily position selection".split(" ").includes(a.prop)&&
this.updatePlaceholder();return Pb._get(Object.getPrototypeOf(l.prototype),"onChange",this).call(this,a)}},{key:"isInputLine",get:function(){return!0}},{key:"allowDuplicatesInHistory",get:function(){return!1}},{key:"resetHistory",value:function(){this.inputHistory={items:[],max:50,index:0}}},{key:"inputHistory",get:function(){return this._inputHistory?this._inputHistory:this._inputHistory=this.historyId?this.constructor.getHistory(this.historyId):{items:[],max:30,index:0}}},{key:"inputHistory",set:function(a){this._inputHistory=
a;this.historyId&&this.constructor.setHistory(this.historyId,this._inputHistory)}},{key:"clear",value:function(){this.input=""}},{key:"focus",value:function(){this.fixCursor();Pb._get(Object.getPrototypeOf(l.prototype),"focus",this).call(this)}},{key:"onBlur",value:function(a){Pb._get(Object.getPrototypeOf(l.prototype),"onBlur",this).call(this,a);this.updatePlaceholder()}},{key:"fitToLineHeight",value:function(){this.height=this.defaultLineHeight+this.padding.top()+this.padding.bottom()}},{key:"indicateError",
value:function(a){var f=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){if(1==m.nextAddress)return f.borderWidth=3,f.borderColor=Vg.Color.red,f._errorIcon=f.addMorph(f._errorIcon||Vg.morph({type:"label",value:[" "+a,{fontSize:18}," ",{}].concat($jscomp.arrayFromIterable(Vg.Icon.textAttribute("exclamation-circle",{paddingTop:"2px"}))),fontSize:20,fontColor:Vg.Color.red,opacity:0,reactsToPointer:!1,fill:Vg.Color.white.withA(.9)})),m.yield(f.whenRendered(),2);f._errorIcon.opacity=
1;f._errorIcon.rightCenter=f.innerBounds().insetBy(10).rightCenter();m.jumpToEnd()})}},{key:"clearError",value:function(){this._errorIcon&&(this._errorIcon&&this._errorIcon.remove(),this._errorIcon=null,this.borderColor=Vg.Color.transparent)}},{key:"updatePlaceholder",value:function(){var a=this.getSubmorphNamed("placeholder");if(a)if(this.input.length)a.visible=!1;else{var f=this.innerBounds();a.fontSize=this.fontSize;a.visible=!0;a.height=this.height;a.padding=this.padding;a.defaultTextStyle=this.defaultTextStyle;
a.lineHeight=this.height+"px";a.fit();a.leftCenter=this.label.length?f.rightCenter().addXY(0,this.borderWidth):f.leftCenter().withX(0)}}},{key:"fixCursor",value:function(){this.label&&(this.positionToIndex(this.selection.lead)<this.label.length&&(this.selection.lead=this.indexToPosition(this.label.length)),this.positionToIndex(this.selection.anchor)<this.label.length&&(this.selection.anchor=this.indexToPosition(this.label.length)))}},{key:"acceptInput",value:function(){var a=this.input;this.onInput(a);
return a}},{key:"onInput",value:function(a){0<this.input.length&&this.addInputToHistory(this.input);this.clearOnInput&&this.clear();Vg.signal(this,"inputAccepted",a)}},{key:"onInputChanged",value:function(a){Vg.signal(this,"inputChanged",a);this.clearError();this.updatePlaceholder()}},{key:"onMouseDown",value:function(a){Pb._get(Object.getPrototypeOf(l.prototype),"onMouseDown",this).call(this,a);this._errorIcon&&this._errorIcon.remove()}},{key:"deleteText",value:function(a){a=a.isRange?a:new Vg.Range(a);
if(!a.isEmpty())return a=a.subtract({start:{row:0,column:0},end:{row:0,column:this.label.length}})[0],Pb._get(Object.getPrototypeOf(l.prototype),"deleteText",this).call(this,a)}},{key:"addInputToHistory",value:function(a){var f=this.inputHistory,m=f.items;if(Vg.arr.last(m)!==a){m.push(a);m.length>f.max&&(f.items=m=m.slice(-f.max));f.index=m.length-1;if(!this.allowDuplicatesInHistory)for(m=f.items.length-1;m--;)f.items[m]===a&&(f.items.splice(m,1),f.index--);this.historyId&&this.constructor.addHistoryToLocalStorage(this.historyId,
f)}}},{key:"browseHistory",value:function(){var a=this,f,m,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(x){if(1==x.nextAddress)return f=a.inputHistory.items.map(function(y,E){return{isListItem:!0,string:y,value:E}}).reverse(),x.yield(a.world().filterableListPrompt("Choose item:",f,{commands:[a.histEditCommandForHistBrowse()]}),2);m=x.yieldResult;r=$jscomp.makeIterator(m.selected);v=r.next().value;"number"===typeof v&&a.setAndShowHistItem(v);a.focus();x.jumpToEnd()})}},{key:"histEditCommandForHistBrowse",
value:function(){var a=this;return{name:"edit history "+this.historyId,exec:function(f){var m,r,v,x;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){if(1==y.nextAddress)return m=a.inputHistory.items.slice().reverse(),y.yield(f.world().editListPrompt("edit history "+a.historyId,m),2);r=y.yieldResult;v=r.status;x=r.list;if("canceled"===v)return y.return(!0);m=m.filter(function(E){return E.isListItem?x.includes(E.value):x.includes(E)});a.inputHistory=Object.assign({},a.inputHistory,{items:m});
f.get("list").items=m.map(function(E,F){return{isListItem:!0,string:E,value:F}}).reverse();return y.return(!0)})}}}},{key:"setAndShowHistItem",value:function(a){var f=this.inputHistory,m=f.items,r=m.length-1;Vg.num.between(a,0,r+1)?f.index=a:f.index=a=r;this.input!==m[a]&&"undefined"!==typeof m[a]&&(this.input=m[a])}},{key:"showHistItem",value:function(a){a=a||"next";var f=this.inputHistory,m=f.items,r=m.length-1,v=f.index;Vg.num.between(v,0,r+1)||(f.index=v=r);if(this.input!==m[v]&&"undefined"!==
typeof m[v])this.input=m[v];else{if("next"===a){if(v>r)return;v=++f.index}else{if(0>=v)return;v=--f.index}this.input=m[v]||""}}},{key:"commands",get:function(){var a=this;return[{name:"change placeholder",exec:function(){var f;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){if(1==m.nextAddress)return m.yield(a.world().prompt("Enter Placeholder:",{input:a.placeholder}),2);if(f=m.yieldResult)a.placeholder=f;m.jumpToEnd()})}},{name:"accept input",exec:function(){a.acceptInput();return!0}},
{name:"show previous input from history",exec:function(){a.showHistItem("prev");return!0}},{name:"show next input from history",exec:function(){a.showHistItem("next");return!0}},{name:"browse history",exec:function(){a.browseHistory();return!0}},{name:"remove items from history",exec:function(f){var m,r,v,x;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){if(1==y.nextAddress)return m=f.inputHistory,r=m.items.map(function(E,F){return{isListItem:!0,string:E,value:F}}).reverse(),y.yield(f.world().filterableListPrompt("Choose items to delete:",
r,{multiSelect:!0}),2);v=y.yieldResult;x=v.selected;Vg.arr.sort(x).reverse().forEach(function(E){E<m.index&&m.index--;m.items.splice(E,1)});f.inputHistory=m;return y.return(!0)})}}].concat(Pb._get(Object.getPrototypeOf(l.prototype),"commands",this))}},{key:"keybindings",get:function(){return Pb._get(Object.getPrototypeOf(l.prototype),"keybindings",this).concat([{keys:"Enter",command:"accept input"},{keys:{mac:"Meta-S",win:"Ctrl-S"},command:"accept input"},{keys:"Up|Ctrl-Up|Alt-P",command:"show previous input from history"},
{keys:"Down|Ctrl-Down|Alt-N",command:"show next input from history"},{keys:"Alt-H",command:"browse history"},{keys:"Alt-Shift-H",command:"remove items from history"}])}},{key:"htmlExport_transformNode",value:function(a){var f=a.ownerDocument.createElement("input"),m=a.querySelector(".newtext-text-layer.actual");f.id=a.id;f.className=a.className;f.style=a.style.cssText;Object.assign(f.style,Vg.obj.select(m.style,"padding font-family font-weight font-style text-decoration font-size color".split(" ")));
f.placeholder=this.placeholder;f.type="text";f.autocomplete=f.name=this.name.replace(/[\s"]/g,"-");return f}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"InputLine"}},{key:"getHistoryFromLocalSorage",value:function(a){if("undefined"===typeof localStorage)return null;try{var f=localStorage.getItem("lively.morphic-inputline-"+a);return f?JSON.parse(f):null}catch(m){return null}}},{key:"addHistoryToLocalStorage",value:function(a,f){if("undefined"!==typeof localStorage)try{localStorage.setItem("lively.morphic-inputline-"+
a,JSON.stringify(f))}catch(m){console.error(m)}}},{key:"histories",get:function(){this._histories||(this._histories=new Map);return this._histories}},{key:"getHistory",value:function(a){var f=this.histories.get(a);if(f)return f;f=this.getHistoryFromLocalSorage(a)||{items:[],max:50,index:0};this.histories.set(a,f);return f}},{key:"setHistory",value:function(a,f){f=void 0===f?{items:[],max:50,index:0}:f;this.histories.set(a,f);this.addHistoryToLocalStorage(a,f);return f}},{key:"properties",get:function(){return{fixedWidth:{defaultValue:!0},
fixedHeight:{defaultValue:!0},extent:{defaultValue:Vg.pt(100,20)},padding:{defaultValue:Vg.Rectangle.inset(2,4)},clipMode:{defaultValue:"hidden"},lineWrapping:{defaultValue:!1},historyId:{defaultValue:null},clearOnInput:{defaultValue:!1},label:{after:["textAndAttributes","extent","padding","submorphs"],defaultValue:"",set:function(a){var f=this;this.setProperty("label",a);this.textString.startsWith(a)||Vg.noUpdate(function(){f.textString=a+f.input})}},input:{after:["label"],derived:!0,get:function(){return this.textString.slice(this.label.length)},
set:function(a){this.textString=this.label+(a?String(a):"");this.updatePlaceholder()}},placeholder:{after:["submorphs","label","defaultTextStyle"],dervied:!0,get:function(){var a=this.getSubmorphNamed("placeholder");return a?a.value:null},set:function(a){var f=this.getSubmorphNamed("placeholder");a?f?(f.defaultTextStyle=Object.assign({},this.defaultTextStyle,{fontColor:Vg.Color.gray}),f.value=a):this.addMorph(Vg.Text.makeLabel(a,Object.assign({},this.defaultTextStyle,{name:"placeholder",reactsToPointer:!1,
fontColor:Vg.Color.gray}))):f&&f.remove();this.updatePlaceholder()}}}}}],e,{pathInPackage:function(){return"text/input-line.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:466,end:14853})}(Vg.Text);OZ=Vg.InputLine;var RJ=Ha("bl",OZ),WA=function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/text/input-line.js"),l=e.hasOwnProperty("PasswordInputLine")&&
"function"===typeof e.PasswordInputLine?e.PasswordInputLine:e.PasswordInputLine=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Pb(l,b,[{key:"onChange",value:function(a){Pb._get(Object.getPrototypeOf(l.prototype),"onChange",this).call(this,a);"borderRadius"==a.prop&&this.updateHtml(this.input)}},{key:Symbol.for("lively-instance-initialize"),value:function(a){a=void 0===a?{}:a;Pb._get(Object.getPrototypeOf(l.prototype),
Symbol.for("lively-instance-initialize"),this).call(this,a);this.onLoad()}},{key:"onChange",value:function(a){Pb._get(Object.getPrototypeOf(l.prototype),"onChange",this).call(this,a);["fill","borderRadius"].includes(a.prop)&&this.updateHtml(this.input)}},{key:"onLoad",value:function(){var a=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){if(1==f.nextAddress)return f.yield(a.whenRendered(),2);a.ensureInputNode().then(function(m){a.updateHtml(a.input);m.onkeydown=function(r){return a.env.eventDispatcher.dispatchDOMEvent(r,
a,"onKeyDown")};m.onkeyup=function(r){return a.env.eventDispatcher.dispatchDOMEvent(r,a,"onKeyUp")}});f.jumpToEnd()})}},{key:"onMouseDown",value:function(a){Pb._get(Object.getPrototypeOf(l.prototype),"onMouseDown",this).call(this,a);this._errorIcon&&this._errorIcon.remove()}},{key:"onAfterRender",value:function(a){this.ensureInputNode()}},{key:"ensureInputNode",value:function(){var a=this;return this.whenRendered().then(function(){var f=a.domNode;f.parentNode&&"INPUT"==f.parentNode.tagName&&(f.parentNode.remove(),
f=a.env.renderer.getNodeForMorph(a),f.insertBefore(a.domNode,f.firstChild));return a.domNode})}},{key:"onKeyDown",value:function(a){Pb._get(Object.getPrototypeOf(l.prototype),"onKeyDown",this).call(this,a);if(this.input!=this.lastInput)this.onInputChanged(this.input);this.lastInput=this.input}},{key:"focus",value:function(){Pb._get(Object.getPrototypeOf(l.prototype),"focus",this).call(this);this.domNode&&this.domNode.focus()}},{key:"onFocus",value:function(a){Pb._get(Object.getPrototypeOf(l.prototype),
"onFocus",this).call(this,a);this._originalShadow||(this._originalShadow=this.dropShadow,this.highlightWhenFocused&&this.animate({dropShadow:this.haloShadow,duration:200}))}},{key:"onBlur",value:function(a){Pb._get(Object.getPrototypeOf(l.prototype),"onBlur",this).call(this,a);this.highlightWhenFocused&&this.animate({dropShadow:this._originalShadow||null,duration:200});this._originalShadow=null}},{key:"indicateError",value:function(a){var f=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){if(1==
m.nextAddress)return f.borderWidth=3,f.borderColor=Vg.Color.red,f._errorIcon=f.addMorph(f._errorIcon||Vg.morph({type:"label",value:[" "+a,{fontSize:18}," ",{}].concat($jscomp.arrayFromIterable(Vg.Icon.textAttribute("exclamation-circle",{paddingTop:"2px"}))),fontSize:20,fontColor:Vg.Color.red,opacity:0,reactsToPointer:!1,fill:Vg.Color.white.withA(.9)})),m.yield(f.whenRendered(),2);f._errorIcon.opacity=1;f._errorIcon.rightCenter=f.innerBounds().insetBy(10).rightCenter();m.jumpToEnd()})}},{key:"clearError",
value:function(){this._errorIcon&&(this._errorIcon&&this._errorIcon.remove(),this._errorIcon=null,this.borderColor=Vg.Color.transparent)}},{key:"acceptInput",value:function(){var a=this.input;Vg.signal(this,"inputAccepted",a);return a}},{key:"onInputChanged",value:function(a){this.clearError();Vg.signal(this,"inputChanged",a)}},{key:"updateHtml",value:function(a){var f=this,m,r,v,x,y,E,F,I,J,P,N,Y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(W){if(1==W.nextAddress)return m=f,r=m.fontSize,
v=m.fontFamily,x=m.padding,y=m.placeholder,E=void 0===m.fill?xg.white:m.fill,F=m.borderRadius,I=x.top(),J=x.right(),P=x.bottom(),N=x.left(),W.yield(f.ensureInputNode(),2);Y=W.yieldResult;Y.setAttribute("type","password");Y.setAttribute("placeholder",y);Y.setAttribute("value",a);Object.assign(Y.style,{position:"absolute",width:"calc(100% - "+N+"px - "+J+"px)","border-width":0,outline:"none","border-radius":F.valueOf()+"px",background:E.toString(),padding:I+"px "+J+"px "+P+"px "+N+"px","font-size":r+
"px","font-family":""+v});W.jumpToEnd()})}},{key:"commands",get:function(){var a=this;return[{name:"accept input",exec:function(){a.acceptInput();return!0}}].concat(Pb._get(Object.getPrototypeOf(l.prototype),"commands",this))}},{key:"keybindings",get:function(){return Pb._get(Object.getPrototypeOf(l.prototype),"keybindings",this).concat([{keys:"Enter",command:"accept input"},{keys:{mac:"Meta-S",win:"Ctrl-S"},command:"accept input"}])}},{key:"htmlExport_transformNode",value:function(a){var f=a.ownerDocument,
m=f.createElement("div"),r=a.querySelector("input");f=f.createElement("input");r.childNodes[0]&&"INPUT"===r.childNodes[0].tagName&&(r=r.childNodes[0]);f.id=a.id;f.className=a.className;m.style=a.style.cssText;Object.assign(f.style,Vg.obj.select(r.style,"padding font-family font-weight font-style text-decoration font-size border-radius color".split(" ")));f.style.position="absolute";f.style.width=a.style.width;f.style.height=a.style.height;f.style["border-width"]=a.style["border-width"];f.placeholder=
this.placeholder;f.type="password";f.autocomplete=f.name=this.name.replace(/[\s"]/g,"-");m.appendChild(f);m.appendChild(a.childNodes[1]);return m}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"PasswordInputLine"}},{key:"properties",get:function(){return{extent:{defaultValue:Vg.pt(100,20)},html:{derived:!0,initialize:function(){},get:function(){return""},set:function(a){}},highlightWhenFocused:{defaultValue:!0},haloShadow:{type:"Shadow"},domNodeTagName:{readOnly:!0,get:function(){return"input"}},
domNodeStyle:{readOnly:!0,get:function(){return"background: grey"}},input:{derived:!0,after:["domNode"],get:function(){return this.domNode&&this.domNode.value||""},set:function(a){this.domNode.value=a;this.updateHtml(this.input)}},placeholder:{after:["domNode"],set:function(a){this.setProperty("placeholder",a);this.updateHtml(this.input)}},fontSize:{defaultValue:12,after:["input"],set:function(a){this.setProperty("fontSize",a);this.updateHtml(this.input)}},fontFamily:{defaultValue:"sans-serif",after:["input"],
set:function(a){this.setProperty("fontFamily",a);this.updateHtml(this.input)}},padding:{defaultValue:Vg.Rectangle.inset(2),after:["input"],set:function(a){this.setProperty("padding",a);this.updateHtml(this.input)}}}}}],e,{pathInPackage:function(){return"text/input-line.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:14929,end:21857})}(Vg.HTMLMorph);
Vg.PasswordInputLine=WA;Vg.PasswordInputLine=WA;Vg.PasswordInputLine=WA;Vg.default=OZ;var ag=lively.FreezerRuntime.recorderFor("lively.morphic/index.js");ag.default=em;ag.config=em;Object.assign(ag,Bwa);Object.assign(ag,Dxa);Object.assign(ag,Ixa);Object.assign(ag,Jxa);Object.assign(ag,Fxa);Object.assign(ag,gya);Object.assign(ag,ira);Object.assign(ag,vda);ag.StyleSheet=$w;ag.StyleSheet=$w;ag.ShadowObject=it;ag.ShadowObject=it;ag.addOrChangeCSSDeclaration=Aq;ag.addOrChangeCSSDeclaration=Aq;ag.addOrChangeLinkedCSS=
kd;ag.addOrChangeLinkedCSS=kd;ag.easings=Rr;ag.easings=Rr;ag.stringToEasing=Gs;ag.stringToEasing=Gs;Object.assign(ag,Cwa);ag.Icon=Rp;ag.Icon=Rp;ag.loadMorphFromSnapshot=vw;ag.loadMorphFromSnapshot=vw;Object.assign(ag,Dwa);ag.World=ry;ag.Hand=bG;ag.Morph=ql;ag.Image=OA;ag.Ellipse=oD;ag.Triangle=XF;ag.Path=pD;ag.Polygon=YF;ag.LineMorph=ZF;ag.Text=dv;ag.Label=ev;ag.HTMLMorph=VA;ag.InputLine=RJ;ag.PasswordInputLine=WA;ag.InputLine=RJ;ag.InputLine=RJ;ag.PasswordInputLine=WA;ag.PasswordInputLine=WA;ag.locateClass=
Cs;ag.morph=qc;ag.addClassMappings=Tb;ag.inspect=VC;ag.touchInputDevice=Sr;ag.addClassMappings({default:ag.Morph,world:ag.World,hand:ag.Hand,image:ag.Image,ellipse:ag.Ellipse,triangle:ag.Triangle,path:ag.Path,text:ag.Text,input:ag.InputLine,label:ag.Label,polygon:ag.Polygon,line:ag.LineMorph,html:ag.HTMLMorph});ag.morph=qc;ag.morph=qc;ag.inspect=VC;ag.inspect=VC;ag.touchInputDevice=Sr;ag.touchInputDevice=Sr;var hya=Object.freeze({__proto__:null,config:em,StyleSheet:$w,ShadowObject:it,addOrChangeCSSDeclaration:Aq,
addOrChangeLinkedCSS:kd,easings:Rr,stringToEasing:Gs,Icon:Rp,loadMorphFromSnapshot:vw,InputLine:RJ,PasswordInputLine:WA,morph:qc,inspect:VC,touchInputDevice:Sr,Morph:ql,Ellipse:oD,Triangle:XF,Image:OA,PathPoint:CJ,Path:pD,Polygon:YF,LineMorph:ZF,World:ry,Hand:bG,Text:dv,Label:ev,Anchor:cG,HTMLMorph:VA,IFrameMorph:QJ,MorphicEnv:Zs,CustomLayout:FJ,SnapLayout:GJ,VerticalLayout:SA,HorizontalLayout:bv,ProportionalLayout:HJ,CenteredTilingLayout:IJ,TilingLayout:JJ,CellGroup:KJ,LayoutColumn:LJ,LayoutRow:MJ,
LayoutCell:NJ,GridLayout:TA,TooltipViewer:$F,Tooltip:qD,MorphicDB:Xw}),Ah=lively.FreezerRuntime.recorderFor("lively.components/loading-indicator.js");Ah.promise=hg;Ah.fun=vn;Ah.num=Um;Ah.Icon=Rp;Ah.stringToEasing=Gs;Ah.easings=Rr;Ah.VerticalLayout=SA;Ah.ShadowObject=it;Ah.HorizontalLayout=bv;Ah.morph=qc;Ah.Morph=ql;Ah.StyleSheet=$w;Ah.Image=OA;Ah.pt=Ei;Ah.RadialGradient=Qp;Ah.rect=dj;Ah.Rectangle=He;Ah.Color=xg;Ah.connect=Dl;(function(b){var e=lively.FreezerRuntime.recorderFor("lively.components/loading-indicator.js"),
l=e.hasOwnProperty("ProgressBar")&&"function"===typeof e.ProgressBar?e.ProgressBar:e.ProgressBar=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Pb(l,b,[{key:"test",value:function(){var a=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){1==f.nextAddress&&(a.progress=0);if(!(1>a.progress))return f.jumpTo(0);a.progress+=.1;return f.yield(Ah.promise.delay(1E3),2)})}},{key:"update",value:function(){var a=
this;setTimeout(function(){a.world()||a.stopStepping()},1E3);if(this._lastWidth){var f=this.get("progress path"),m=Ah.stringToEasing(Ah.easings.inOutExpo)(Ah.num.clamp(Date.now()-this._timeStamp,0,1E3)/1E3),r=this._targetWidth;f.topLeft=Ah.pt(0,0);f.height=this.height;f.width=this._lastWidth>r?r:Ah.num.interpolate(m,this._lastWidth,r)}}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ProgressBar"}},{key:"properties",get:function(){return{progress:{after:["submorphs"],initialize:function(){this.progress=
0;this.startStepping("update")},set:function(a){var f=this.get("progress path");this._lastWidth=Math.max(f.width,this._targetWidth,1);this._targetWidth=this.width*a;this._timeStamp=Date.now();this.setProperty("progress",a)}},fill:{defaultValue:Ah.Color.darkGray},borderRadius:{defaultValue:5},clipMode:{defaultValue:"hidden"},submorphs:{initialize:function(){this.submorphs=[{name:"progress path",fill:Ah.Color.orange,width:1}]}}}}}],e,{pathInPackage:function(){return"loading-indicator.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:336,end:1943})})(Ah.Morph);var PZ=function(b){var e=lively.FreezerRuntime.recorderFor("lively.components/loading-indicator.js"),l=e.hasOwnProperty("LoadingIndicator")&&"function"===typeof e.LoadingIndicator?e.LoadingIndicator:e.LoadingIndicator=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return Pb(l,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){a=void 0===a?{}:a;Pb._get(Object.getPrototypeOf(l.prototype),Symbol.for("lively-instance-initialize"),this).call(this,a);var f=this.ui;a=f.label;var m=f.closeButton;if(f=f.progressBar)f.opacity=0,f.isLayoutable=!1;Ah.connect(this,"extent",this,"relayout");Ah.connect(a,"extent",this,"relayout");Ah.connect(a,"value",this,"updateLabel");Ah.connect(a,"fontSize",this,"updateLabel");Ah.connect(a,"fontFamily",this,
"updateLabel");Ah.connect(m,"fire",this,"remove");m.fit();this.relayout()}},{key:"animateProgress",value:function(a){var f=this,m,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(x){if(1==x.nextAddress)return m=f.ui,(r=m.progressBar)||(r=f.addMorph(new Ah.ProgressBar({name:"progress bar"}))),v=f.center,0==a?(r.isLayoutable=!1,r.opacity=0):(r.isLayoutable=!0,r.opacity=1),r.progress=a,x.yield(f.whenRendered(),2);f.center=v;x.jumpToEnd()})}},{key:"hideSpinner",value:function(){var a=this;
return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){if(!a.ui.spinner)return f.return();a.ui.spinner.visible=!1;a.ui.spinner.width=50;a.ui.spinner.remove();return f.yield(a.whenRendered(),0)})}},{key:"isEpiMorph",get:function(){return!0}},{key:"updateLabel",value:function(){var a=this.center;this.relayout();this.center=a}},{key:"relayout",value:function(){Ah.Rectangle.inset(20,12);var a=this.ui,f=a.label,m=a.progressBar,r=a.status;a.closeButton.topRight=this.innerBounds().insetBy(2).topRight();
m.extent=Ah.pt(f.owner.bounds().width,5);r[r.visible?"top":"bottom"]=f.height}},{key:"onHoverIn",value:function(a){this.ui.closeButton.visible=!0}},{key:"onHoverOut",value:function(a){this.ui.closeButton.visible=!1}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"LoadingIndicator"}},{key:"open",value:function(a,f){var m=Ah.morph(Object.assign({type:Ah.LoadingIndicator},f,{label:a}));if(f&&f.animated)return Ah.promise.delay(f.delay||0).then(function(){m.openInWorld();m.opacity=0;m.whenRendered().then(function(){m.ui.spinner&&
(m.ui.spinner.visible=!0);m.top+=25;m.animate({top:m.top-25,easing:Ah.easings.outExpo});m.animate({opacity:1,easing:Ah.easings.outExpo})})}),m;m.openInWorld();m.ui.label.whenRendered().then(function(){m.ui.spinner&&(m.ui.spinner.visible=!0);m.ui.label.fit()});return m}},{key:"forPromise",value:function(a,f,m){var r=this.open(f,m);Ah.promise.finally(Promise.resolve(a),function(){return r.remove()});return r}},{key:"runFn",value:function(a,f,m){var r=this,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(x){switch(x.nextAddress){case 1:return v=
r.open(f,m),x.yield(v.whenRendered(),2);case 2:return x.setFinallyBlock(3),x.yield(a(v),5);case 5:return x.return(x.yieldResult);case 3:x.enterFinallyBlock(),v.remove(),x.leaveFinallyBlock(0)}})}},{key:"properties",get:function(){return{name:{defaultValue:"LoadingIndicator"},styleClasses:{defaultValue:["Halo"]},hasFixedPosition:{defaultValue:!0},ui:{derived:!0,get:function(){return{progressBar:this.getSubmorphNamed("progress bar"),closeButton:this.getSubmorphNamed("closeButton"),spinner:this.getSubmorphNamed("spinner"),
label:this.getSubmorphNamed("ld label"),status:this.getSubmorphNamed("status")}}},progress:{derived:!0,set:function(a){this.animateProgress(Ah.num.clamp(a,0,1))}},label:{derived:!0,after:["submorphs"],get:function(){return this.ui.label.value},set:function(a){this.ui.label.value=a}},status:{derived:!0,after:["submorphs"],defaultValue:!1,get:function(){return this.getSubmorphNamed("status").value},set:function(a){var f=this.ui.status;a?(f.visible=!0,f.value=a):(f.visible=!1,f.value="");this.relayout()}},
fontFamily:{derived:!0,after:["submorphs"],get:function(){return this.ui.label.fontFamily},set:function(a){this.ui.label.fontFamily=a}},fontSize:{derived:!0,after:["submorphs"],get:function(){return this.ui.label.fontSize},set:function(a){this.ui.label.fontSize=a}},loadingImage:{defaultValue:System.decanonicalize("lively.morphic/")+"lively-web-logo-small-animate.svg"},master:{initialize:function(){this.master={auto:"styleguide://SystemWidgets/loading indicator"}}},submorphs:{initialize:function(){this.submorphs=
[{name:"wrapper",submorphs:[{type:"html",name:"spinner",extent:Ah.pt(86.2,70.2)},{type:"label",name:"ld label",extent:Ah.pt(20,100),submorphs:[{type:"label",name:"status"}]}]},{type:"button",name:"closeButton",label:Ah.Icon.textAttribute("times")},{type:Ah.ProgressBar,name:"progress bar"}]}}}}}],e,{pathInPackage:function(){return"loading-indicator.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",
version:"0.1.0"}}},{start:2099,end:8211})}(Ah.Morph);PZ=Ah.LoadingIndicator;var fG=Ha("L",PZ);Ah.default=PZ;var cj=lively.FreezerRuntime.recorderFor("WorldVersionViewer/index.js");cj.Morph=ql;cj.World=ry;cj.HorizontalLayout=bv;cj.morph=qc;cj.MorphicDB=Xw;cj.graph=sy;cj.promise=hg;cj.date=Cw;cj.string=Th;cj.arr=Mf;cj.Color=xg;cj.pt=Ei;cj.LoadingIndicator=fG;cj.missingSVG='data:image/svg+xml;utf8,\n<svg aria-hidden="true" focusable="false" data-prefix="far" data-icon="question-circle" class="svg-inline--fa fa-question-circle fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="lightgray" d="M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 448c-110.532 0-200-89.431-200-200 0-110.495 89.472-200 200-200 110.491 0 200 89.471 200 200 0 110.53-89.431 200-200 200zm107.244-255.2c0 67.052-72.421 68.084-72.421 92.863V300c0 6.627-5.373 12-12 12h-45.647c-6.627 0-12-5.373-12-12v-8.659c0-35.745 27.1-50.034 47.579-61.516 17.561-9.845 28.324-16.541 28.324-29.579 0-17.246-21.999-28.693-39.784-28.693-23.189 0-33.894 10.977-48.942 29.969-4.057 5.12-11.46 6.071-16.666 2.124l-27.824-21.098c-5.107-3.872-6.251-11.066-2.644-16.363C184.846 131.491 214.94 112 261.794 112c49.071 0 101.45 38.304 101.45 88.8zM298 368c0 23.159-18.841 42-42 42s-42-18.841-42-42 18.841-42 42-42 42 18.841 42 42z"></path></svg>\n';
cj.missingSVG='data:image/svg+xml;utf8,\n<svg aria-hidden="true" focusable="false" data-prefix="far" data-icon="question-circle" class="svg-inline--fa fa-question-circle fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="lightgray" d="M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 448c-110.532 0-200-89.431-200-200 0-110.495 89.472-200 200-200 110.491 0 200 89.471 200 200 0 110.53-89.431 200-200 200zm107.244-255.2c0 67.052-72.421 68.084-72.421 92.863V300c0 6.627-5.373 12-12 12h-45.647c-6.627 0-12-5.373-12-12v-8.659c0-35.745 27.1-50.034 47.579-61.516 17.561-9.845 28.324-16.541 28.324-29.579 0-17.246-21.999-28.693-39.784-28.693-23.189 0-33.894 10.977-48.942 29.969-4.057 5.12-11.46 6.071-16.666 2.124l-27.824-21.098c-5.107-3.872-6.251-11.066-2.644-16.363C184.846 131.491 214.94 112 261.794 112c49.071 0 101.45 38.304 101.45 88.8zM298 368c0 23.159-18.841 42-42 42s-42-18.841-42-42 18.841-42 42-42 42 18.841 42 42z"></path></svg>\n';
cj.missingSVG='data:image/svg+xml;utf8,\n<svg aria-hidden="true" focusable="false" data-prefix="far" data-icon="question-circle" class="svg-inline--fa fa-question-circle fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="lightgray" d="M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 448c-110.532 0-200-89.431-200-200 0-110.495 89.472-200 200-200 110.491 0 200 89.471 200 200 0 110.53-89.431 200-200 200zm107.244-255.2c0 67.052-72.421 68.084-72.421 92.863V300c0 6.627-5.373 12-12 12h-45.647c-6.627 0-12-5.373-12-12v-8.659c0-35.745 27.1-50.034 47.579-61.516 17.561-9.845 28.324-16.541 28.324-29.579 0-17.246-21.999-28.693-39.784-28.693-23.189 0-33.894 10.977-48.942 29.969-4.057 5.12-11.46 6.071-16.666 2.124l-27.824-21.098c-5.107-3.872-6.251-11.066-2.644-16.363C184.846 131.491 214.94 112 261.794 112c49.071 0 101.45 38.304 101.45 88.8zM298 368c0 23.159-18.841 42-42 42s-42-18.841-42-42 18.841-42 42-42 42 18.841 42 42z"></path></svg>\n';
(function(b){var e=lively.FreezerRuntime.recorderFor("WorldVersionViewer/index.js"),l=e.hasOwnProperty("WorldVersion")&&"function"===typeof e.WorldVersion?e.WorldVersion:e.WorldVersion=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Pb(l,b,[{key:"update",value:function(){var a=$jscomp.makeIterator(this.submorphs),f=a.next().value;a=a.next().value;f.imageUrl=this.commit.preview||cj.missingSVG;a.textAndAttributes=
this.info;a.fontColor=this.selected?cj.Color.white:cj.Color.darkGray}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"WorldVersion"}},{key:"properties",get:function(){return{commit:{},fill:{defaultValue:cj.Color.transparent},info:{derived:!0,get:function(){var a=this.commit,f=a.message,m=a.name,r=a.timestamp;return[a._id.slice(0,6)+" ",{fontWeight:"bold"},cj.string.truncate(f.split("\n")[0],40)+" ",{}," ("+m+" ",{},""+cj.date.format(new Date(r),"yyyy-mm-dd HH:MM Z"),{}]}},selected:{set:function(a){this.setProperty("selected",
a);this.update()}},layout:{initialize:function(){this.layout=new cj.HorizontalLayout({align:"center",spacing:5})}},submorphs:{initialize:function(){this.submorphs=[{type:"image",extent:cj.pt(30,30),name:"preview",reactsToPointer:!1},{reactsToPointer:!1,type:"label",fill:null,name:"commit info",fontFamily:"Nunito",fontColor:cj.Color.gray}]}}}}}],e,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"WorldVersionViewer",version:"0.1.1-34"}}},{start:1327,end:2884})})(cj.Morph);var Sda=function(b){var e=lively.FreezerRuntime.recorderFor("WorldVersionViewer/index.js"),l=e.hasOwnProperty("WorldVersionViewer")&&"function"===typeof e.WorldVersionViewer?e.WorldVersionViewer:e.WorldVersionViewer=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Pb(l,b,[{key:"reset",value:function(){this.getSubmorphNamed("version list").items=
[];this.getSubmorphNamed("version list spinner").visible=!1}},{key:"onMouseDown",value:function(a){switch(a.targetMorph.name){case "visit button":this.visitSelectedCommit();break;case "revert button":this.revertToSelectedCommit()}}},{key:"visitSelectedCommit",value:function(){var a=this,f,m,r,v,x,y,E,F;return $jscomp.asyncExecutePromiseGeneratorProgram(function(I){switch(I.nextAddress){case 1:return f=a.get("version list").selection,m=cj.LoadingIndicator.open("Loading "+f.name+"..."),r=$world,v=a.db||
cj.MorphicDB.default,x=f._id,I.setCatchFinallyBlocks(2,3),x?I.yield(cj.World.loadFromCommit(x,void 0,{morphicDB:v}),8):I.yield(cj.World.loadFromDB(f.name,f.ref,void 0,{morphicDB:v}),7);case 7:y=I.yieldResult;I.jumpTo(6);break;case 8:y=I.yieldResult;case 6:return E=y,I.return(E);case 3:I.enterFinallyBlock();m.remove();I.leaveFinallyBlock(0);break;case 2:F=I.enterCatchBlock(),console.error(F),r.showError("Error loading world:"+F),I.jumpTo(3)}})}},{key:"revertToSelectedCommit",value:function(){var a=
this,f,m,r,v,x,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(E){if(1==E.nextAddress){f=a.get("version list").selection;if(!f)return E.return();m=a.db||cj.MorphicDB.default;r=f;v=r._id;x=r.name;y=r.type;return E.yield(m.revert(y,x,v,"HEAD"),2)}return E.return(a.initializeFromStartCommit(f,m,{showRevertButton:!0}))})}},{key:"initializeFromStartCommit",value:function(a,f,m){f=void 0===f?cj.MorphicDB.default:f;m=void 0===m?{}:m;var r=this,v,x,y,E,F,I,J,P,N,Y,W,da,va,za,L,Z,R,X,ja,fa,ua,
gb,hb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ta){switch(ta.nextAddress){case 1:return v=m,x=void 0===v.showRefs?!0:v.showRefs,y=r.startCommit=a,E=y._id,F=y.type,I=y.name,J=r.getSubmorphNamed("version list spinner"),J.visible=!0,J.center=r.get("version list").center,r.db=f,ta.yield(f.history(F,I),2);case 2:P=ta.yieldResult,N=P.refs,Y=P.history,W=E,da=cj.graph.invert(Y),va=cj.graph.hull(da,E),za={_id:!0},L=[a],Z=$jscomp.makeIterator(va),R=Z.next();case 3:if(R.done)return fa=cj.arr.max(L,
function(na){return na.timestamp}),W=fa._id,ta.yield(f.log(W,void 0,!0),7);X=R.value;return ta.yield(f.log(X,void 0,!0,za),6);case 6:ja=ta.yieldResult;L.push.apply(L,$jscomp.arrayFromIterable(ja));ja.forEach(function(na){return za[na._id]=!0});R=Z.next();ta.jumpTo(3);break;case 7:ua=ta.yieldResult;if(x)for(gb in N);hb=ua.map(function(na){var pa=new cj.WorldVersion({reactsToPointer:!1,commit:na});pa.update();return{isListItem:!0,morph:pa,value:na}});r.get("version list").items=hb;J.visible=!1;ta.jumpToEnd()}})}}],
[{key:Symbol.for("__LivelyClassName__"),get:function(){return"WorldVersionViewer"}}],e,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"WorldVersionViewer",version:"0.1.1-34"}}},{start:2901,end:6778})}(cj.Morph);Sda=cj.WorldVersionViewer;cj.default=Sda;var Ol=lively.FreezerRuntime.recorderFor("lively.components/canvas.js");Ol.pt=Ei;
Ol.Point=Dg;Ol.rect=dj;Ol.Color=xg;Ol.Morph=ql;Ol.Image=OA;Ol.connect=Dl;Ol.promise=hg;var SJ=Ha("bf",function(b){var e=lively.FreezerRuntime.recorderFor("lively.components/canvas.js"),l=e.hasOwnProperty("Canvas")&&"function"===typeof e.Canvas?e.Canvas:e.Canvas=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Pb(l,b,[{key:"context",get:function(){if(this._canvas)return this._canvas.getContext(this.contextType);this.world()&&
this.env.renderer.getNodeForMorph(this)||console.warn("Context not yet rendered. Please ensure that the Canvas Morph has been rendered first before accessing the context. This can be achieved by waiting for the whenRendered() promise before you proceed accessing the context property.");return null}},{key:"_canvas",set:function(a){var f=this.__canvas__;this.__canvas__=a;this.restoreContent(f,a)}},{key:"_canvas",get:function(){return this.__canvas__}},{key:Symbol.for("lively-instance-initialize"),value:function(a){a=
void 0===a?{}:a;Pb._get(Object.getPrototypeOf(l.prototype),Symbol.for("lively-instance-initialize"),this).call(this,a);Ol.connect(this,"extent",this,"onExtentChanged")}},{key:"afterRender",value:function(a,f){f?this._canvas=a:"function"===typeof this.__canvas_init__&&(this.__canvas_init__(),delete this.__canvas_init__)}},{key:"restoreContent",value:function(a,f){var m=this.contextType,r=this.preserveContents;"function"===typeof this.__canvas_init__?(this.__canvas_init__(),delete this.__canvas_init__):
r&&"2d"==m&&a&&a!==f&&this.context.drawImage(a,0,0)}},{key:"onExtentChanged",value:function(){var a=this;if(this._canvas&&this.preserveContents&&this.context.getImageData){var f=this._canvas,m=this.context.getImageData(0,0,f.width,f.height);this.__canvas_init__=function(){a.context.putImageData(m,0,0)}}}},{key:"clear",value:function(a){var f=this.context;if(f){var m=this._canvas,r=m.width;m=m.height;f.save();f.setTransform(1,0,0,1,0,0);a?(a.toCSSString&&(a=a.toCSSString()),f.fillStyle=a,f.fillRect(0,
0,r,m)):f.clearRect(0,0,r,m);f.restore()}}},{key:"render",value:function(a){return a.renderCanvas(this)}},{key:"withContextDo",value:function(a){var f=this;this._canvas?a(this.context):this.__canvas_init__=function(){return a(f.context)}}},{key:"toDataURI",value:function(){return this._canvas&&this._canvas.toDataURL()}},{key:"fromDataURI",value:function(a){var f=this,m,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(x){m=f.env.domEnv.document;r=m.createElement("img");v=Ol.promise.deferred();
r.onload=function(){f.context.drawImage(r,0,0);v.resolve()};r.src=a;return x.return(v.promise)})}},{key:"imageData",value:function(a){a||(a=this.canvasBounds);return this.context.getImageData(a.x,a.y,a.width,a.height)}},{key:"nonTransparentArea",value:function(){for(var a=this.imageData(),f=a.data,m=a.width,r=a.height,v=m,x=r,y=0;y<r;y++)for(var E=0;E<v;E++)0<f[4*(y*m+E)+3]&&(v=E,x>y&&(x=y));if(v===m)return Ol.rect(0,0,0,0);y=v;E=x;for(--r;r>x;r--)for(var F=m-1;F>y;F--)0<f[4*(r*m+F)+3]&&(y=F,E<r&&
(E=r));return{imageData:a,bounds:Ol.rect(v,x,y-v+1,E-x+1)}}},{key:"trimNonTransparent",value:function(){var a=this.nonTransparentArea(),f=a.imageData;a=a.bounds;if(!a.topLeft().equals(Ol.pt(0,0))){var m=a.x,r=a.y;this.context.putImageData(f,-m,-r,m,r,a.width,a.height);this.position=this.position.addPt(a.topLeft())}a.extent().equals(this.extent)||(this.extent=a.extent())}},{key:"finishDraw",value:function(a){a=void 0===a?{}:a;var f=this.context,m=a,r=void 0===m.color?"rgba(0,0,0,0.6)":m.color,v=void 0===
m.width?4:m.width;m=void 0===m.fill?!1:m.fill;a=a.fillColor||r;r.toCSSString&&(r=r.toCSSString());a.toCSSString&&(a=a.toCSSString());f.strokeStyle=r;f.lineWidth=v;f.stroke();f.closePath();m&&(f.fillStyle=a,f.fill())}},{key:"line",value:function(a,f,m){m=void 0===m?{}:m;var r=this.context;r.beginPath();r.moveTo(a.x,a.y);r.lineTo(f.x,f.y);r.lineCap="round";this.finishDraw(m)}},{key:"arc",value:function(a,f,m,r,v,x){v=void 0===v?!1:v;x=void 0===x?{}:x;var y=this.context;y.beginPath();y.arc(a.x,a.y,f,
m,r,v);this.finishDraw(x)}},{key:"polygon",value:function(a,f){f=void 0===f?{}:f;var m=this.context;m.beginPath();m.moveTo(a[0].x,a[0].y);for(var r=0;r<a.length;r++)m.lineTo(a[r].x,a[r].y);m.lineTo(a[0].x,a[0].y);this.finishDraw(f)}},{key:"text",value:function(a,f,m){m=void 0===m?{}:m;var r=this.context,v=m,x=void 0===v.color?"black":v.color,y=void 0===v.font?"14px Arial":v.font,E=void 0===v.align?"start":v.align;v=void 0===v.baseline?"bottom":v.baseline;r.save();r.font=y;r.fillStyle=x;r.textAlign=
E;r.textBaseline=v;m.angle&&!isNaN(m.angle)&&(r.translate(f.x,f.y),r.rotate(m.angle),r.translate(-f.x,-f.y));r.fillText(a,f.x,f.y);r.restore()}},{key:"line",value:function(a,f,m){m=void 0===m?{}:m;var r=this.context,v=m.color||"rgba(0,0,0,0.6)";m=m.width||4;v.toCSSString&&(v=v.toCSSString());r.strokeStyle=v;r.beginPath();r.lineWidth=m;r.moveTo(a.x,a.y);r.lineTo(f.x,f.y);r.stroke();r.closePath()}},{key:"spiral",value:function(){this.clear(Ol.Color.white);for(var a=this.innerBounds().center(),f=0,m=
1,r=0;150>r;r++){var v=a.addPt(Ol.Point.polar(m,f));this.line(a,v,{color:Ol.Color.random()});a=v;f+=Math.PI/10;m+=.3}}},{key:"rect",value:function(a,f,m){m=void 0===m?{}:m;var r=this.context;r.beginPath();r.rect(a.x,a.y,f.x,f.y);this.finishDraw(m)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Canvas"}},{key:"properties",get:function(){return{extent:{defaultValue:Ol.pt(200,200)},fill:{defaultValue:Ol.Color.transparent},contextType:{defaultValue:"2d"},preserveContents:{defaultValue:!0},
canvasExtent:{get:function(){return this._canvas&&Ol.pt(this._canvas.width,this._canvas.height)}},pixelRatio:{derived:!0,set:function(a){this._canvas&&(this._canvas.width=a*this.width,this._canvas.height=a*this.height)}},canvasBounds:{readOnly:!0,get:function(){return this._canvas&&this.canvasExtent.extentAsRectangle()}},_serializedContents:{get:function(){return this.preserveContents&&this.toDataURI()},set:function(a){var f=this;this.withContextDo(function(){return f.fromDataURI(a)})}}}}}],e,{pathInPackage:function(){return"canvas.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:281,end:8971})}(Ol.Morph));Ol.Canvas=SJ;Ol.Canvas=SJ;Ol.Canvas=SJ;var My=lively.FreezerRuntime.recorderFor("Globe/index.js");My.Canvas=SJ;My.promise=hg;My.easings=Rr;var Tda=function(b){var e=lively.FreezerRuntime.recorderFor("Globe/index.js"),l=e.hasOwnProperty("Globe")&&"function"===
typeof e.Globe?e.Globe:e.Globe=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Pb(l,b,[{key:"fullyLoaded",value:function(){var a=this,f;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){return 1==m.nextAddress?(f=a.get("webgl canvas"),m.yield(My.promise.waitFor(5E3,function(){return f.firstFrameRendered}),2)):m.return(m.yieldResult)})}},{key:"onLoad",value:function(){var a=this,f;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){switch(m.nextAddress){case 1:return navigator.webdriver||
!lively.FreezerRuntime?m.return():m.yield(a.whenRendered(),2);case 2:return f=a.get("webgl canvas"),f.renderGlobe(),m.yield(a.fullyLoaded(),3);case 3:return m.yield(My.promise.delay(500),4);case 4:a.get("cover").animate({opacity:0,easing:My.easings.inOutCubic}),f.relayout(),m.jumpToEnd()}})}},{key:"beforePublish",value:function(){this.get("cover").opacity=1}},{key:"onExtentChanged",value:function(){Pb._get(Object.getPrototypeOf(l.prototype),"onExtentChanged",this).call(this);this.get("webgl canvas").extent=
this.extent;this.get("cover").extent=this.extent}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Globe"}}],e,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"Globe",version:"0.1.1-26"}}},{start:169,end:918})}(My.Canvas);Tda=My.Globe;My.default=Tda;var gG={},Uda=!1,q="undefined"!==typeof globalThis?globalThis:"undefined"!==
typeof self?self:global,uza=function(){var b;if(Uda)return gG;Uda=!0;(function(e,l){"object"===typeof gG?l(gG):"function"===typeof define&&define.amd?define(["exports"],l):(e="undefined"!==typeof globalThis?globalThis:e||self,l(e.THREE={}))})(gG,function(e){function l(z,D,t,u,B,G,K){try{var O=z[G](K),U=O.value}catch(V){t(V);return}O.done?D(U):Promise.resolve(U).then(u,B)}function a(z){return function(){var D=this||q,t=arguments;return new Promise(function(u,B){function G(U){l(O,u,B,G,K,"next",U)}
function K(U){l(O,u,B,G,K,"throw",U)}var O=z.apply(D,t);G(void 0)})}}function f(z,D){for(var t=0;t<D.length;t++){var u=D[t];u.enumerable=u.enumerable||!1;u.configurable=!0;"value"in u&&(u.writable=!0);Object.defineProperty(z,u.key,u)}}function m(z,D,t){D&&f(z.prototype,D);t&&f(z,t);return z}function r(z,D){z.prototype=Object.create(D.prototype);z.prototype.constructor=z;v(z,D)}function v(z,D){v=Object.setPrototypeOf||function(t,u){t.__proto__=u;return t};return v(z,D)}function x(z){if(void 0===z)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
return z}function y(z,D){if(z){if("string"===typeof z)return E(z,D);var t=Object.prototype.toString.call(z).slice(8,-1);"Object"===t&&z.constructor&&(t=z.constructor.name);if("Map"===t||"Set"===t)return Array.from(z);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return E(z,D)}}function E(z,D){if(null==D||D>z.length)D=z.length;for(var t=0,u=Array(D);t<D;t++)u[t]=z[t];return u}function F(z,D){var t;if("undefined"===typeof Symbol||null==z[Symbol.iterator]){if(Array.isArray(z)||
(t=y(z))||D&&z&&"number"===typeof z.length){t&&(z=t);var u=0;return function(){return u>=z.length?{done:!0}:{done:!1,value:z[u++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}t=z[Symbol.iterator]();return t.next.bind(t)}function I(){}function J(z){if("undefined"!==typeof HTMLImageElement&&z instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&z instanceof HTMLCanvasElement||
"undefined"!==typeof ImageBitmap&&z instanceof ImageBitmap)return wD.getDataURL(z);if(z.data)return{data:Array.prototype.slice.call(z.data),width:z.width,height:z.height,type:z.data.constructor.name};console.warn("THREE.Texture: Unable to serialize Texture.");return{}}function P(z,D,t,u,B){for(var G=0,K=z.length-3;G<=K;G+=3){xD.fromArray(z,G);var O=B.x*Math.abs(xD.x)+B.y*Math.abs(xD.y)+B.z*Math.abs(xD.z),U=D.dot(xD),V=t.dot(xD),ca=u.dot(xD);if(Math.max(-Math.max(U,V,ca),Math.min(U,V,ca))>O)return!1}return!0}
function N(){Object.defineProperty(this||q,"id",{value:iya++});(this||q).uuid=Fh.generateUUID();(this||q).name="";(this||q).type="Object3D";(this||q).parent=null;(this||q).children=[];(this||q).up=N.DefaultUp.clone();var z=new cc,D=new TJ,t=new lo,u=new cc(1,1,1);D._onChange(function(){t.setFromEuler(D,!1)});t._onChange(function(){D.setFromQuaternion(t,void 0,!1)});Object.defineProperties(this||q,{position:{configurable:!0,enumerable:!0,value:z},rotation:{configurable:!0,enumerable:!0,value:D},quaternion:{configurable:!0,
enumerable:!0,value:t},scale:{configurable:!0,enumerable:!0,value:u},modelViewMatrix:{value:new Ug},normalMatrix:{value:new Cn}});(this||q).matrix=new Ug;(this||q).matrixWorld=new Ug;(this||q).matrixAutoUpdate=N.DefaultMatrixAutoUpdate;(this||q).matrixWorldNeedsUpdate=!1;(this||q).layers=new QZ;(this||q).visible=!0;(this||q).castShadow=!1;(this||q).receiveShadow=!1;(this||q).frustumCulled=!0;(this||q).renderOrder=0;(this||q).animations=[];(this||q).userData={}}function Y(){Object.defineProperty(this||
q,"id",{value:jya++});(this||q).uuid=Fh.generateUUID();(this||q).name="";(this||q).type="Material";(this||q).fog=!0;(this||q).blending=1;(this||q).side=0;(this||q).vertexColors=!1;(this||q).opacity=1;(this||q).transparent=!1;(this||q).blendSrc=204;(this||q).blendDst=205;(this||q).blendEquation=100;(this||q).blendSrcAlpha=null;(this||q).blendDstAlpha=null;(this||q).blendEquationAlpha=null;(this||q).depthFunc=3;(this||q).depthTest=!0;(this||q).depthWrite=!0;(this||q).stencilWriteMask=255;(this||q).stencilFunc=
519;(this||q).stencilRef=0;(this||q).stencilFuncMask=255;(this||q).stencilFail=7680;(this||q).stencilZFail=7680;(this||q).stencilZPass=7680;(this||q).stencilWrite=!1;(this||q).clippingPlanes=null;(this||q).clipIntersection=!1;(this||q).clipShadows=!1;(this||q).shadowSide=null;(this||q).colorWrite=!0;(this||q).precision=null;(this||q).polygonOffset=!1;(this||q).polygonOffsetFactor=0;(this||q).polygonOffsetUnits=0;(this||q).dithering=!1;(this||q).alphaTest=0;(this||q).premultipliedAlpha=!1;(this||q).visible=
!0;(this||q).toneMapped=!0;(this||q).userData={};(this||q).version=0}function W(z,D,t){0>t&&(t+=1);1<t&&--t;return t<1/6?z+6*(D-z)*t:.5>t?D:t<2/3?z+6*(D-z)*(2/3-t):z}function da(z){return.04045>z?.0773993808*z:Math.pow(.9478672986*z+.0521327014,2.4)}function va(z){return.0031308>z?12.92*z:1.055*Math.pow(z,.41666)-.055}function za(z,D,t){if(Array.isArray(z))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");(this||q).name="";(this||q).array=z;(this||q).itemSize=D;(this||q).count=
void 0!==z?z.length/D:0;(this||q).normalized=!0===t;(this||q).usage=35044;(this||q).updateRange={offset:0,count:-1};(this||q).version=0}function L(z,D,t){za.call(this||q,new Int8Array(z),D,t)}function Z(z,D,t){za.call(this||q,new Uint8Array(z),D,t)}function R(z,D,t){za.call(this||q,new Uint8ClampedArray(z),D,t)}function X(z,D,t){za.call(this||q,new Int16Array(z),D,t)}function ja(z,D,t){za.call(this||q,new Uint16Array(z),D,t)}function fa(z,D,t){za.call(this||q,new Int32Array(z),D,t)}function ua(z,
D,t){za.call(this||q,new Uint32Array(z),D,t)}function gb(z,D,t){za.call(this||q,new Uint16Array(z),D,t)}function hb(z,D,t){za.call(this||q,new Float32Array(z),D,t)}function ta(z,D,t){za.call(this||q,new Float64Array(z),D,t)}function na(z){if(0===z.length)return-Infinity;for(var D=z[0],t=1,u=z.length;t<u;++t)z[t]>D&&(D=z[t]);return D}function pa(){Object.defineProperty(this||q,"id",{value:kya++});(this||q).uuid=Fh.generateUUID();(this||q).name="";(this||q).type="BufferGeometry";(this||q).index=null;
(this||q).attributes={};(this||q).morphAttributes={};(this||q).morphTargetsRelative=!1;(this||q).groups=[];(this||q).boundingBox=null;(this||q).boundingSphere=null;(this||q).drawRange={start:0,count:Infinity};(this||q).userData={}}function La(z,D){void 0===z&&(z=new pa);void 0===D&&(D=new Ny);N.call(this||q);(this||q).type="Mesh";(this||q).geometry=z;(this||q).material=D;this.updateMorphTargets()}function Hb(z,D,t,u,B,G,K,O,U,V,ca,qa){XA.fromBufferAttribute(B,V);YA.fromBufferAttribute(B,ca);ZA.fromBufferAttribute(B,
qa);B=z.morphTargetInfluences;if(D.morphTargets&&G&&B){PQ.set(0,0,0);QQ.set(0,0,0);RQ.set(0,0,0);for(var Ea=0,Ra=G.length;Ea<Ra;Ea++){var Ua=B[Ea],ub=G[Ea];0!==Ua&&(RZ.fromBufferAttribute(ub,V),SZ.fromBufferAttribute(ub,ca),TZ.fromBufferAttribute(ub,qa),K?(PQ.addScaledVector(RZ,Ua),QQ.addScaledVector(SZ,Ua),RQ.addScaledVector(TZ,Ua)):(PQ.addScaledVector(RZ.sub(XA),Ua),QQ.addScaledVector(SZ.sub(YA),Ua),RQ.addScaledVector(TZ.sub(ZA),Ua)))}XA.add(PQ);YA.add(QQ);ZA.add(RQ)}z.isSkinnedMesh&&D.skinning&&
(z.boneTransform(V,XA),z.boneTransform(ca,YA),z.boneTransform(qa,ZA));G=XA;K=YA;B=ZA;Ea=UZ;null===(1===D.side?u.intersectTriangle(B,K,G,!0,Ea):u.intersectTriangle(G,K,B,2!==D.side,Ea))?z=null:(SQ.copy(Ea),SQ.applyMatrix4(z.matrixWorld),D=t.ray.origin.distanceTo(SQ),z=D<t.near||D>t.far?null:{distance:D,point:SQ.clone(),object:z});z&&(O&&(TQ.fromBufferAttribute(O,V),UQ.fromBufferAttribute(O,ca),VQ.fromBufferAttribute(O,qa),z.uv=Xp.getUV(UZ,XA,YA,ZA,TQ,UQ,VQ,new We)),U&&(TQ.fromBufferAttribute(U,V),
UQ.fromBufferAttribute(U,ca),VQ.fromBufferAttribute(U,qa),z.uv2=Xp.getUV(UZ,XA,YA,ZA,TQ,UQ,VQ,new We)),O={a:V,b:ca,c:qa,normal:new cc,materialIndex:0},Xp.getNormal(XA,YA,ZA,O.normal),z.face=O);return z}function fc(z){var D={},t;for(t in z){D[t]={};for(var u in z[t]){var B=z[t][u];B&&(B.isColor||B.isMatrix3||B.isMatrix4||B.isVector2||B.isVector3||B.isVector4||B.isTexture||B.isQuaternion)?D[t][u]=B.clone():Array.isArray(B)?D[t][u]=B.slice():D[t][u]=B}}return D}function Ob(z){for(var D={},t=0;t<z.length;t++){var u=
fc(z[t]),B;for(B in u)D[B]=u[B]}return D}function Zb(z){Y.call(this||q);(this||q).type="ShaderMaterial";(this||q).defines={};(this||q).uniforms={};(this||q).vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}";(this||q).fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}";(this||q).linewidth=1;(this||q).wireframe=!1;(this||q).wireframeLinewidth=1;(this||q).fog=!1;(this||q).lights=!1;(this||q).clipping=!1;(this||q).skinning=
!1;(this||q).morphTargets=!1;(this||q).morphNormals=!1;(this||q).extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1};(this||q).defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]};(this||q).index0AttributeName=void 0;(this||q).uniformsNeedUpdate=!1;(this||q).glslVersion=null;void 0!==z&&(void 0!==z.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(z))}function Hc(){N.call(this||q);(this||
q).type="Camera";(this||q).matrixWorldInverse=new Ug;(this||q).projectionMatrix=new Ug;(this||q).projectionMatrixInverse=new Ug}function Gb(z,D,t,u){void 0===z&&(z=50);void 0===D&&(D=1);void 0===t&&(t=.1);void 0===u&&(u=2E3);Hc.call(this||q);(this||q).type="PerspectiveCamera";(this||q).fov=z;(this||q).zoom=1;(this||q).near=t;(this||q).far=u;(this||q).focus=10;(this||q).aspect=D;(this||q).view=null;(this||q).filmGauge=35;(this||q).filmOffset=0;this.updateProjectionMatrix()}function dd(){function z(G,
K){u(G,K);B=D.requestAnimationFrame(z)}var D=null,t=!1,u=null,B=null;return{start:function(){!0!==t&&null!==u&&(B=D.requestAnimationFrame(z),t=!0)},stop:function(){D.cancelAnimationFrame(B);t=!1},setAnimationLoop:function(G){u=G},setContext:function(G){D=G}}}function Gd(z,D){function t(G,K){var O=G.array,U=G.usage,V=z.createBuffer();z.bindBuffer(K,V);z.bufferData(K,O,U);G.onUploadCallback();K=5126;O instanceof Float32Array?K=5126:O instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):
O instanceof Uint16Array?G.isFloat16BufferAttribute?u?K=5131:console.warn("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2."):K=5123:O instanceof Int16Array?K=5122:O instanceof Uint32Array?K=5125:O instanceof Int32Array?K=5124:O instanceof Int8Array?K=5120:O instanceof Uint8Array&&(K=5121);return{buffer:V,type:K,bytesPerElement:O.BYTES_PER_ELEMENT,version:G.version}}var u=D.isWebGL2,B=new WeakMap;return{get:function(G){G.isInterleavedBufferAttribute&&(G=G.data);return B.get(G)},
remove:function(G){G.isInterleavedBufferAttribute&&(G=G.data);var K=B.get(G);K&&(z.deleteBuffer(K.buffer),B.delete(G))},update:function(G,K){if(G.isGLBufferAttribute)K=B.get(G),(!K||K.version<G.version)&&B.set(G,{buffer:G.buffer,type:G.type,bytesPerElement:G.elementSize,version:G.version});else{G.isInterleavedBufferAttribute&&(G=G.data);var O=B.get(G);if(void 0===O)B.set(G,t(G,K));else if(O.version<G.version){var U=G.array,V=G.updateRange;z.bindBuffer(K,O.buffer);-1===V.count?z.bufferSubData(K,0,
U):(u?z.bufferSubData(K,V.offset*U.BYTES_PER_ELEMENT,U,V.offset,V.count):z.bufferSubData(K,V.offset*U.BYTES_PER_ELEMENT,U.subarray(V.offset,V.offset+V.count)),V.count=-1);O.version=G.version}}}}}function ma(z,D,t,u,B){function G(Ra,Ua){t.buffers.color.setClear(Ra.r,Ra.g,Ra.b,Ua,B)}var K=new jg(0),O=0,U,V,ca=null,qa=0,Ea=null;return{getClearColor:function(){return K},setClearColor:function(Ra,Ua){void 0===Ua&&(Ua=1);K.set(Ra);O=Ua;G(K,O)},getClearAlpha:function(){return O},setClearAlpha:function(Ra){O=
Ra;G(K,O)},render:function(Ra,Ua,ub,nb){(Ua=!0===Ua.isScene?Ua.background:null)&&Ua.isTexture&&(Ua=D.get(Ua));ub=z.xr;(ub=ub.getSession&&ub.getSession())&&"additive"===ub.environmentBlendMode&&(Ua=null);null===Ua?G(K,O):Ua&&Ua.isColor&&(G(Ua,1),nb=!0);(z.autoClear||nb)&&z.clear(z.autoClearColor,z.autoClearDepth,z.autoClearStencil);if(Ua&&(Ua.isCubeTexture||Ua.isWebGLCubeRenderTarget||306===Ua.mapping)){void 0===V&&(V=new La(new yD(1,1,1),new Zb({name:"BackgroundCubeMaterial",uniforms:fc(fv.cube.uniforms),
vertexShader:fv.cube.vertexShader,fragmentShader:fv.cube.fragmentShader,side:1,depthTest:!1,depthWrite:!1,fog:!1})),V.geometry.deleteAttribute("normal"),V.geometry.deleteAttribute("uv"),V.onBeforeRender=function(ec,gc,Ac){(this||q).matrixWorld.copyPosition(Ac.matrixWorld)},Object.defineProperty(V.material,"envMap",{get:function(){return(this||q).uniforms.envMap.value}}),u.update(V));Ua.isWebGLCubeRenderTarget&&(Ua=Ua.texture);V.material.uniforms.envMap.value=Ua;V.material.uniforms.flipEnvMap.value=
Ua.isCubeTexture&&Ua._needsFlipEnvMap?-1:1;if(ca!==Ua||qa!==Ua.version||Ea!==z.toneMapping)V.material.needsUpdate=!0,ca=Ua,qa=Ua.version,Ea=z.toneMapping;Ra.unshift(V,V.geometry,V.material,0,0,null)}else if(Ua&&Ua.isTexture){void 0===U&&(U=new La(new UJ(2,2),new Zb({name:"BackgroundMaterial",uniforms:fc(fv.background.uniforms),vertexShader:fv.background.vertexShader,fragmentShader:fv.background.fragmentShader,side:0,depthTest:!1,depthWrite:!1,fog:!1})),U.geometry.deleteAttribute("normal"),Object.defineProperty(U.material,
"map",{get:function(){return(this||q).uniforms.t2D.value}}),u.update(U));U.material.uniforms.t2D.value=Ua;!0===Ua.matrixAutoUpdate&&Ua.updateMatrix();U.material.uniforms.uvTransform.value.copy(Ua.matrix);if(ca!==Ua||qa!==Ua.version||Ea!==z.toneMapping)U.material.needsUpdate=!0,ca=Ua,qa=Ua.version,Ea=z.toneMapping;Ra.unshift(U,U.geometry,U.material,0,0,null)}}}}function Ga(z,D,t,u){function B(Ac){return u.isWebGL2?z.bindVertexArray(Ac):Ua.bindVertexArrayOES(Ac)}function G(Ac){return u.isWebGL2?z.deleteVertexArray(Ac):
Ua.deleteVertexArrayOES(Ac)}function K(Ac){for(var Lc=[],ld=[],cd=[],Nc=0;Nc<Ra;Nc++)Lc[Nc]=0,ld[Nc]=0,cd[Nc]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:Lc,enabledAttributes:ld,attributeDivisors:cd,object:Ac,attributes:{},index:null}}function O(){for(var Ac=gc.newAttributes,Lc=0,ld=Ac.length;Lc<ld;Lc++)Ac[Lc]=0}function U(Ac){V(Ac,0)}function V(Ac,Lc){var ld=gc.enabledAttributes,cd=gc.attributeDivisors;gc.newAttributes[Ac]=1;0===ld[Ac]&&(z.enableVertexAttribArray(Ac),ld[Ac]=1);
cd[Ac]!==Lc&&((u.isWebGL2?z:D.get("ANGLE_instanced_arrays"))[u.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](Ac,Lc),cd[Ac]=Lc)}function ca(){for(var Ac=gc.newAttributes,Lc=gc.enabledAttributes,ld=0,cd=Lc.length;ld<cd;ld++)Lc[ld]!==Ac[ld]&&(z.disableVertexAttribArray(ld),Lc[ld]=0)}function qa(){Ea();gc!==ec&&(gc=ec,B(gc.object))}function Ea(){ec.geometry=null;ec.program=null;ec.wireframe=!1}var Ra=z.getParameter(34921),Ua=u.isWebGL2?null:D.get("OES_vertex_array_object"),ub=u.isWebGL2||
null!==Ua,nb={},ec=K(null),gc=ec;return{setup:function(Ac,Lc,ld,cd,Nc){var Oc=!1;if(ub){Oc=!0===Lc.wireframe;var jd=nb[cd.id];void 0===jd&&(jd={},nb[cd.id]=jd);var Ed=jd[ld.id];void 0===Ed&&(Ed={},jd[ld.id]=Ed);jd=Ed[Oc];void 0===jd&&(jd=K(u.isWebGL2?z.createVertexArray():Ua.createVertexArrayOES()),Ed[Oc]=jd);Oc=jd;gc!==Oc&&(gc=Oc,B(gc.object));a:{Oc=gc.attributes;Ed=cd.attributes;jd=0;for(var Ad in Ed){var de=Oc[Ad],rf=Ed[Ad];if(void 0===de||de.attribute!==rf||de.data!==rf.data){Oc=!0;break a}jd++}Oc=
gc.attributesNum!==jd||gc.index!==Nc?!0:!1}if(Oc){Ad={};Ed=cd.attributes;jd=0;for(var md in Ed)de=Ed[md],rf={},rf.attribute=de,de.data&&(rf.data=de.data),Ad[md]=rf,jd++;gc.attributes=Ad;gc.attributesNum=jd;gc.index=Nc}}else if(md=!0===Lc.wireframe,gc.geometry!==cd.id||gc.program!==ld.id||gc.wireframe!==md)gc.geometry=cd.id,gc.program=ld.id,gc.wireframe=md,Oc=!0;!0===Ac.isInstancedMesh&&(Oc=!0);null!==Nc&&t.update(Nc,34963);if(Oc){if(!1!==u.isWebGL2||!Ac.isInstancedMesh&&!cd.isInstancedBufferGeometry||
null!==D.get("ANGLE_instanced_arrays")){O();md=cd.attributes;ld=ld.getAttributes();Lc=Lc.defaultAttributeValues;for(var qd in ld)if(Oc=ld[qd],0<=Oc){var Pd=md[qd];if(void 0!==Pd){if(Ad=Pd.normalized,de=Pd.itemSize,jd=t.get(Pd),void 0!==jd){var kg=jd.buffer;Ed=jd.type;jd=jd.bytesPerElement;if(Pd.isInterleavedBufferAttribute){var Me=Pd.data;rf=Me.stride;Pd=Pd.offset;Me&&Me.isInstancedInterleavedBuffer?(V(Oc,Me.meshPerAttribute),void 0===cd._maxInstanceCount&&(cd._maxInstanceCount=Me.meshPerAttribute*
Me.count)):U(Oc);z.bindBuffer(34962,kg);rf*=jd;jd*=Pd;!0!==u.isWebGL2||5124!==Ed&&5125!==Ed?z.vertexAttribPointer(Oc,de,Ed,Ad,rf,jd):z.vertexAttribIPointer(Oc,de,Ed,rf,jd)}else Pd.isInstancedBufferAttribute?(V(Oc,Pd.meshPerAttribute),void 0===cd._maxInstanceCount&&(cd._maxInstanceCount=Pd.meshPerAttribute*Pd.count)):U(Oc),z.bindBuffer(34962,kg),jd=de,!0!==u.isWebGL2||5124!==Ed&&5125!==Ed?z.vertexAttribPointer(Oc,jd,Ed,Ad,0,0):z.vertexAttribIPointer(Oc,jd,Ed,0,0)}}else if("instanceMatrix"===qd)Ed=
t.get(Ac.instanceMatrix),void 0!==Ed&&(Ad=Ed.buffer,Ed=Ed.type,V(Oc+0,1),V(Oc+1,1),V(Oc+2,1),V(Oc+3,1),z.bindBuffer(34962,Ad),z.vertexAttribPointer(Oc+0,4,Ed,!1,64,0),z.vertexAttribPointer(Oc+1,4,Ed,!1,64,16),z.vertexAttribPointer(Oc+2,4,Ed,!1,64,32),z.vertexAttribPointer(Oc+3,4,Ed,!1,64,48));else if("instanceColor"===qd)Ed=t.get(Ac.instanceColor),void 0!==Ed&&(Ad=Ed.buffer,Ed=Ed.type,V(Oc,1),z.bindBuffer(34962,Ad),z.vertexAttribPointer(Oc,3,Ed,!1,12,0));else if(void 0!==Lc&&(Ad=Lc[qd],void 0!==Ad))switch(Ad.length){case 2:z.vertexAttrib2fv(Oc,
Ad);break;case 3:z.vertexAttrib3fv(Oc,Ad);break;case 4:z.vertexAttrib4fv(Oc,Ad);break;default:z.vertexAttrib1fv(Oc,Ad)}}ca()}null!==Nc&&z.bindBuffer(34963,t.get(Nc).buffer)}},reset:qa,resetDefaultState:Ea,dispose:function(){qa();for(var Ac in nb){var Lc=nb[Ac],ld;for(ld in Lc){var cd=Lc[ld],Nc;for(Nc in cd)G(cd[Nc].object),delete cd[Nc];delete Lc[ld]}delete nb[Ac]}},releaseStatesOfGeometry:function(Ac){if(void 0!==nb[Ac.id]){var Lc=nb[Ac.id],ld;for(ld in Lc){var cd=Lc[ld],Nc;for(Nc in cd)G(cd[Nc].object),
delete cd[Nc];delete Lc[ld]}delete nb[Ac.id]}},releaseStatesOfProgram:function(Ac){for(var Lc in nb){var ld=nb[Lc];if(void 0!==ld[Ac.id]){var cd=ld[Ac.id],Nc;for(Nc in cd)G(cd[Nc].object),delete cd[Nc];delete ld[Ac.id]}}},initAttributes:O,enableAttribute:U,disableUnusedAttributes:ca}}function Ja(z,D,t,u){var B=u.isWebGL2,G;(this||q).setMode=function(K){G=K};(this||q).render=function(K,O){z.drawArrays(G,K,O);t.update(O,G,1)};(this||q).renderInstances=function(K,O,U){if(0!==U){if(B){var V=z;var ca=
"drawArraysInstanced"}else if(V=D.get("ANGLE_instanced_arrays"),ca="drawArraysInstancedANGLE",null===V){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}V[ca](G,K,O,U);t.update(O,G,U)}}}function vb(z,D,t){function u(Ac){if("highp"===Ac){if(0<z.getShaderPrecisionFormat(35633,36338).precision&&0<z.getShaderPrecisionFormat(35632,36338).precision)return"highp";Ac="mediump"}return"mediump"===Ac&&0<z.getShaderPrecisionFormat(35633,
36337).precision&&0<z.getShaderPrecisionFormat(35632,36337).precision?"mediump":"lowp"}var B,G="undefined"!==typeof WebGL2RenderingContext&&z instanceof WebGL2RenderingContext||"undefined"!==typeof WebGL2ComputeRenderingContext&&z instanceof WebGL2ComputeRenderingContext,K=void 0!==t.precision?t.precision:"highp",O=u(K);O!==K&&(console.warn("THREE.WebGLRenderer:",K,"not supported, using",O,"instead."),K=O);t=!0===t.logarithmicDepthBuffer;O=z.getParameter(34930);var U=z.getParameter(35660),V=z.getParameter(3379),
ca=z.getParameter(34076),qa=z.getParameter(34921),Ea=z.getParameter(36347),Ra=z.getParameter(36348),Ua=z.getParameter(36349),ub=0<U,nb=G||D.has("OES_texture_float"),ec=ub&&nb,gc=G?z.getParameter(36183):0;return{isWebGL2:G,getMaxAnisotropy:function(){if(void 0!==B)return B;if(!0===D.has("EXT_texture_filter_anisotropic")){var Ac=D.get("EXT_texture_filter_anisotropic");B=z.getParameter(Ac.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else B=0;return B},getMaxPrecision:u,precision:K,logarithmicDepthBuffer:t,maxTextures:O,
maxVertexTextures:U,maxTextureSize:V,maxCubemapSize:ca,maxAttributes:qa,maxVertexUniforms:Ea,maxVaryings:Ra,maxFragmentUniforms:Ua,vertexTextures:ub,floatFragmentTextures:nb,floatVertexTextures:ec,maxSamples:gc}}function Vb(z){function D(){ca.value!==B&&(ca.value=B,ca.needsUpdate=0<G);u.numPlanes=G;u.numIntersection=0}function t(qa,Ea,Ra,Ua){var ub=null!==qa?qa.length:0,nb=null;if(0!==ub){nb=ca.value;if(!0!==Ua||null===nb){Ua=Ra+4*ub;Ea=Ea.matrixWorldInverse;V.getNormalMatrix(Ea);if(null===nb||nb.length<
Ua)nb=new Float32Array(Ua);for(Ua=0;Ua!==ub;++Ua,Ra+=4)U.copy(qa[Ua]).applyMatrix4(Ea,V),U.normal.toArray(nb,Ra),nb[Ra+3]=U.constant}ca.value=nb;ca.needsUpdate=!0}u.numPlanes=ub;u.numIntersection=0;return nb}var u=this||q,B=null,G=0,K=!1,O=!1,U=new gv,V=new Cn,ca={value:null,needsUpdate:!1};(this||q).uniform=ca;(this||q).numPlanes=0;(this||q).numIntersection=0;(this||q).init=function(qa,Ea,Ra){var Ua=0!==qa.length||Ea||0!==G||K;K=Ea;B=t(qa,Ra,0);G=qa.length;return Ua};(this||q).beginShadows=function(){O=
!0;t(null)};(this||q).endShadows=function(){O=!1;D()};(this||q).setState=function(qa,Ea,Ra){var Ua=qa.clippingPlanes,ub=qa.clipIntersection,nb=qa.clipShadows;qa=z.get(qa);if(!K||null===Ua||0===Ua.length||O&&!nb)O?t(null):D();else{nb=O?0:G;var ec=4*nb,gc=qa.clippingState||null;ca.value=gc;gc=t(Ua,Ea,ec,Ra);for(Ea=0;Ea!==ec;++Ea)gc[Ea]=B[Ea];qa.clippingState=gc;(this||q).numIntersection=ub?(this||q).numPlanes:0;(this||q).numPlanes+=nb}}}function vd(z){function D(B,G){303===G?B.mapping=301:304===G&&
(B.mapping=302);return B}function t(B){B=B.target;B.removeEventListener("dispose",t);var G=u.get(B);void 0!==G&&(u.delete(B),G.dispose())}var u=new WeakMap;return{get:function(B){if(B&&B.isTexture){var G=B.mapping;if(303===G||304===G){if(u.has(B))return G=u.get(B).texture,D(G,B.mapping);var K=B.image;return K&&0<K.height?(G=z.getRenderTarget(),K=new WQ(K.height/2),K.fromEquirectangularTexture(z,B),u.set(B,K),z.setRenderTarget(G),B.addEventListener("dispose",t),D(K.texture,B.mapping)):null}}return B},
dispose:function(){u=new WeakMap}}}function ud(z){function D(u){if(void 0!==t[u])return t[u];switch(u){case "WEBGL_depth_texture":var B=z.getExtension("WEBGL_depth_texture")||z.getExtension("MOZ_WEBGL_depth_texture")||z.getExtension("WEBKIT_WEBGL_depth_texture");break;case "EXT_texture_filter_anisotropic":B=z.getExtension("EXT_texture_filter_anisotropic")||z.getExtension("MOZ_EXT_texture_filter_anisotropic")||z.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case "WEBGL_compressed_texture_s3tc":B=
z.getExtension("WEBGL_compressed_texture_s3tc")||z.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||z.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case "WEBGL_compressed_texture_pvrtc":B=z.getExtension("WEBGL_compressed_texture_pvrtc")||z.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:B=z.getExtension(u)}return t[u]=B}var t={};return{has:function(u){return null!==D(u)},init:function(u){u.isWebGL2?D("EXT_color_buffer_float"):(D("WEBGL_depth_texture"),D("OES_texture_float"),
D("OES_texture_half_float"),D("OES_texture_half_float_linear"),D("OES_standard_derivatives"),D("OES_element_index_uint"),D("OES_vertex_array_object"),D("ANGLE_instanced_arrays"));D("OES_texture_float_linear");D("EXT_color_buffer_half_float")},get:function(u){var B=D(u);null===B&&console.warn("THREE.WebGLRenderer: "+u+" extension not supported.");return B}}}function Jc(z,D,t,u){function B(U){U=U.target;null!==U.index&&D.remove(U.index);for(var V in U.attributes)D.remove(U.attributes[V]);U.removeEventListener("dispose",
B);delete K[U.id];if(V=O.get(U))D.remove(V),O.delete(U);u.releaseStatesOfGeometry(U);!0===U.isInstancedBufferGeometry&&delete U._maxInstanceCount;t.memory.geometries--}function G(U){var V=[],ca=U.index,qa=U.attributes.position;if(null!==ca){qa=ca.array;ca=ca.version;for(var Ea=0,Ra=qa.length;Ea<Ra;Ea+=3){var Ua=qa[Ea+0],ub=qa[Ea+1],nb=qa[Ea+2];V.push(Ua,ub,ub,nb,nb,Ua)}}else for(Ea=qa.array,ca=qa.version,qa=0,Ea=Ea.length/3-1;qa<Ea;qa+=3)Ra=qa+0,Ua=qa+1,ub=qa+2,V.push(Ra,Ua,Ua,ub,ub,Ra);V=new (65535<
na(V)?ua:ja)(V,1);V.version=ca;(ca=O.get(U))&&D.remove(ca);O.set(U,V)}var K={},O=new WeakMap;return{get:function(U,V){if(!0===K[V.id])return V;V.addEventListener("dispose",B);K[V.id]=!0;t.memory.geometries++;return V},update:function(U){var V=U.attributes;for(qa in V)D.update(V[qa],34962);U=U.morphAttributes;for(var ca in U){V=U[ca];var qa=0;for(var Ea=V.length;qa<Ea;qa++)D.update(V[qa],34962)}},getWireframeAttribute:function(U){var V=O.get(U);if(V){var ca=U.index;null!==ca&&V.version<ca.version&&
G(U)}else G(U);return O.get(U)}}}function Re(z,D,t,u){var B=u.isWebGL2,G,K,O;(this||q).setMode=function(U){G=U};(this||q).setIndex=function(U){K=U.type;O=U.bytesPerElement};(this||q).render=function(U,V){z.drawElements(G,V,K,U*O);t.update(V,G,1)};(this||q).renderInstances=function(U,V,ca){if(0!==ca){if(B){var qa=z;var Ea="drawElementsInstanced"}else if(qa=D.get("ANGLE_instanced_arrays"),Ea="drawElementsInstancedANGLE",null===qa){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");
return}qa[Ea](G,V,K,U*O,ca);t.update(V,G,ca)}}}function Le(z){var D={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:D,programs:null,autoReset:!0,reset:function(){D.frame++;D.calls=0;D.triangles=0;D.points=0;D.lines=0},update:function(t,u,B){D.calls++;switch(u){case 4:D.triangles+=t/3*B;break;case 1:D.lines+=t/2*B;break;case 3:D.lines+=B*(t-1);break;case 2:D.lines+=B*t;break;case 0:D.points+=B*t;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",
u)}}}}function Uh(z,D){return z[0]-D[0]}function th(z,D){return Math.abs(D[1])-Math.abs(z[1])}function pj(z){for(var D={},t=new Float32Array(8),u=[],B=0;8>B;B++)u[B]=[B,0];return{update:function(G,K,O,U){var V=G.morphTargetInfluences;G=void 0===V?0:V.length;var ca=D[K.id];if(void 0===ca){ca=[];for(var qa=0;qa<G;qa++)ca[qa]=[qa,0];D[K.id]=ca}for(qa=0;qa<G;qa++){var Ea=ca[qa];Ea[0]=qa;Ea[1]=V[qa]}ca.sort(th);for(V=0;8>V;V++)V<G&&ca[V][1]?(u[V][0]=ca[V][0],u[V][1]=ca[V][1]):(u[V][0]=Number.MAX_SAFE_INTEGER,
u[V][1]=0);u.sort(Uh);G=O.morphTargets&&K.morphAttributes.position;O=O.morphNormals&&K.morphAttributes.normal;for(V=ca=0;8>V;V++)Ea=u[V],qa=Ea[0],Ea=Ea[1],qa!==Number.MAX_SAFE_INTEGER&&Ea?(G&&K.getAttribute("morphTarget"+V)!==G[qa]&&K.setAttribute("morphTarget"+V,G[qa]),O&&K.getAttribute("morphNormal"+V)!==O[qa]&&K.setAttribute("morphNormal"+V,O[qa]),t[V]=Ea,ca+=Ea):(G&&!0===K.hasAttribute("morphTarget"+V)&&K.deleteAttribute("morphTarget"+V),O&&!0===K.hasAttribute("morphNormal"+V)&&K.deleteAttribute("morphNormal"+
V),t[V]=0);K=K.morphTargetsRelative?1:1-ca;U.getUniforms().setValue(z,"morphTargetBaseInfluence",K);U.getUniforms().setValue(z,"morphTargetInfluences",t)}}}function hj(z,D,t,u){function B(K){K=K.target;K.removeEventListener("dispose",B);t.remove(K.instanceMatrix);null!==K.instanceColor&&t.remove(K.instanceColor)}var G=new WeakMap;return{update:function(K){var O=u.render.frame,U=D.get(K,K.geometry);G.get(U)!==O&&(D.update(U),G.set(U,O));K.isInstancedMesh&&(!1===K.hasEventListener("dispose",B)&&K.addEventListener("dispose",
B),t.update(K.instanceMatrix,34962),null!==K.instanceColor&&t.update(K.instanceColor,34962));return U},dispose:function(){G=new WeakMap}}}function qj(z,D,t){var u=z[0];if(0>=u||0<u)return z;var B=D*t,G=Vda[B];void 0===G&&(G=new Float32Array(B),Vda[B]=G);if(0!==D)for(u.toArray(G,0),u=1,B=0;u!==D;++u)B+=t,z[u].toArray(G,B);return G}function Qi(z,D){if(z.length!==D.length)return!1;for(var t=0,u=z.length;t<u;t++)if(z[t]!==D[t])return!1;return!0}function Ri(z,D){for(var t=0,u=D.length;t<u;t++)z[t]=D[t]}
function xk(z,D){var t=Wda[D];void 0===t&&(t=new Int32Array(D),Wda[D]=t);for(var u=0;u!==D;++u)t[u]=z.allocateTextureUnit();return t}function bj(z,D){var t=(this||q).cache;t[0]!==D&&(z.uniform1f((this||q).addr,D),t[0]=D)}function fk(z,D){var t=(this||q).cache;if(void 0!==D.x){if(t[0]!==D.x||t[1]!==D.y)z.uniform2f((this||q).addr,D.x,D.y),t[0]=D.x,t[1]=D.y}else Qi(t,D)||(z.uniform2fv((this||q).addr,D),Ri(t,D))}function Qk(z,D){var t=(this||q).cache;if(void 0!==D.x){if(t[0]!==D.x||t[1]!==D.y||t[2]!==
D.z)z.uniform3f((this||q).addr,D.x,D.y,D.z),t[0]=D.x,t[1]=D.y,t[2]=D.z}else if(void 0!==D.r){if(t[0]!==D.r||t[1]!==D.g||t[2]!==D.b)z.uniform3f((this||q).addr,D.r,D.g,D.b),t[0]=D.r,t[1]=D.g,t[2]=D.b}else Qi(t,D)||(z.uniform3fv((this||q).addr,D),Ri(t,D))}function gk(z,D){var t=(this||q).cache;if(void 0!==D.x){if(t[0]!==D.x||t[1]!==D.y||t[2]!==D.z||t[3]!==D.w)z.uniform4f((this||q).addr,D.x,D.y,D.z,D.w),t[0]=D.x,t[1]=D.y,t[2]=D.z,t[3]=D.w}else Qi(t,D)||(z.uniform4fv((this||q).addr,D),Ri(t,D))}function Rk(z,
D){var t=(this||q).cache,u=D.elements;void 0===u?Qi(t,D)||(z.uniformMatrix2fv((this||q).addr,!1,D),Ri(t,D)):Qi(t,u)||(Xda.set(u),z.uniformMatrix2fv((this||q).addr,!1,Xda),Ri(t,u))}function CA(z,D){var t=(this||q).cache,u=D.elements;void 0===u?Qi(t,D)||(z.uniformMatrix3fv((this||q).addr,!1,D),Ri(t,D)):Qi(t,u)||(Yda.set(u),z.uniformMatrix3fv((this||q).addr,!1,Yda),Ri(t,u))}function Bd(z,D){var t=(this||q).cache,u=D.elements;void 0===u?Qi(t,D)||(z.uniformMatrix4fv((this||q).addr,!1,D),Ri(t,D)):Qi(t,
u)||(Zda.set(u),z.uniformMatrix4fv((this||q).addr,!1,Zda),Ri(t,u))}function Cd(z,D,t){var u=(this||q).cache,B=t.allocateTextureUnit();u[0]!==B&&(z.uniform1i((this||q).addr,B),u[0]=B);t.safeSetTexture2D(D||$da,B)}function AA(z,D,t){var u=(this||q).cache,B=t.allocateTextureUnit();u[0]!==B&&(z.uniform1i((this||q).addr,B),u[0]=B);t.setTexture2DArray(D||lya,B)}function Ay(z,D,t){var u=(this||q).cache,B=t.allocateTextureUnit();u[0]!==B&&(z.uniform1i((this||q).addr,B),u[0]=B);t.setTexture3D(D||mya,B)}function Kw(z,
D,t){var u=(this||q).cache,B=t.allocateTextureUnit();u[0]!==B&&(z.uniform1i((this||q).addr,B),u[0]=B);t.safeSetTextureCube(D||aea,B)}function MC(z,D){var t=(this||q).cache;t[0]!==D&&(z.uniform1i((this||q).addr,D),t[0]=D)}function QC(z,D){var t=(this||q).cache;Qi(t,D)||(z.uniform2iv((this||q).addr,D),Ri(t,D))}function RC(z,D){var t=(this||q).cache;Qi(t,D)||(z.uniform3iv((this||q).addr,D),Ri(t,D))}function SC(z,D){var t=(this||q).cache;Qi(t,D)||(z.uniform4iv((this||q).addr,D),Ri(t,D))}function TC(z,
D){var t=(this||q).cache;t[0]!==D&&(z.uniform1ui((this||q).addr,D),t[0]=D)}function NC(z){switch(z){case 5126:return bj;case 35664:return fk;case 35665:return Qk;case 35666:return gk;case 35674:return Rk;case 35675:return CA;case 35676:return Bd;case 5124:case 35670:return MC;case 35667:case 35671:return QC;case 35668:case 35672:return RC;case 35669:case 35673:return SC;case 5125:return TC;case 35678:case 36198:case 36298:case 36306:case 35682:return Cd;case 35679:case 36299:case 36307:return Ay;
case 35680:case 36300:case 36308:case 36293:return Kw;case 36289:case 36303:case 36311:case 36292:return AA}}function zX(z,D){z.uniform1fv((this||q).addr,D)}function VO(z,D){z.uniform1iv((this||q).addr,D)}function PO(z,D){z.uniform2iv((this||q).addr,D)}function XI(z,D){z.uniform3iv((this||q).addr,D)}function AX(z,D){z.uniform4iv((this||q).addr,D)}function CX(z,D){D=qj(D,(this||q).size,2);z.uniform2fv((this||q).addr,D)}function BX(z,D){D=qj(D,(this||q).size,3);z.uniform3fv((this||q).addr,D)}function Qr(z,
D){D=qj(D,(this||q).size,4);z.uniform4fv((this||q).addr,D)}function tX(z,D){D=qj(D,(this||q).size,4);z.uniformMatrix2fv((this||q).addr,!1,D)}function uX(z,D){D=qj(D,(this||q).size,9);z.uniformMatrix3fv((this||q).addr,!1,D)}function sX(z,D){D=qj(D,(this||q).size,16);z.uniformMatrix4fv((this||q).addr,!1,D)}function OC(z,D,t){var u=D.length,B=xk(t,u);z.uniform1iv((this||q).addr,B);for(z=0;z!==u;++z)t.safeSetTexture2D(D[z]||$da,B[z])}function vX(z,D,t){var u=D.length,B=xk(t,u);z.uniform1iv((this||q).addr,
B);for(z=0;z!==u;++z)t.safeSetTextureCube(D[z]||aea,B[z])}function WO(z){switch(z){case 5126:return zX;case 35664:return CX;case 35665:return BX;case 35666:return Qr;case 35674:return tX;case 35675:return uX;case 35676:return sX;case 5124:case 35670:return VO;case 35667:case 35671:return PO;case 35668:case 35672:return XI;case 35669:case 35673:return AX;case 35678:case 36198:case 36298:case 36306:case 35682:return OC;case 35680:case 36300:case 36308:case 36293:return vX}}function Pu(z,D,t){(this||
q).id=z;(this||q).addr=t;(this||q).cache=[];(this||q).setValue=NC(D.type)}function QO(z,D,t){(this||q).id=z;(this||q).addr=t;(this||q).cache=[];(this||q).size=D.size;(this||q).setValue=WO(D.type)}function GF(z){(this||q).id=z;(this||q).seq=[];(this||q).map={}}function Lw(z,D){(this||q).seq=[];(this||q).map={};for(var t=z.getProgramParameter(D,35718),u=0;u<t;++u){var B=z.getActiveUniform(D,u),G=z.getUniformLocation(D,B.name),K=this||q,O=B.name,U=O.length;for(VZ.lastIndex=0;;){var V=VZ.exec(O),ca=VZ.lastIndex,
qa=V[1],Ea=V[3];"]"===V[2]&&(qa|=0);if(void 0===Ea||"["===Ea&&ca+2===U){O=K;B=void 0===Ea?new Pu(qa,B,G):new QO(qa,B,G);O.seq.push(B);O.map[B.id]=B;break}else Ea=K.map[qa],void 0===Ea&&(Ea=new GF(qa),qa=K,K=Ea,qa.seq.push(K),qa.map[K.id]=K),K=Ea}}}function TO(z,D,t){D=z.createShader(D);z.shaderSource(D,t);z.compileShader(D);return D}function XO(z){switch(z){case 3E3:return["Linear","( value )"];case 3001:return["sRGB","( value )"];case 3002:return["RGBE","( value )"];case 3004:return["RGBM","( value, 7.0 )"];
case 3005:return["RGBM","( value, 16.0 )"];case 3006:return["RGBD","( value, 256.0 )"];case 3007:return["Gamma","( value, float( GAMMA_FACTOR ) )"];case 3003:return["LogLuv","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",z),["Linear","( value )"]}}function SO(z,D,t){var u=z.getShaderParameter(D,35713),B=z.getShaderInfoLog(D).trim();if(u&&""===B)return"";z=z.getShaderSource(D).split("\n");for(D=0;D<z.length;D++)z[D]=D+1+": "+z[D];z=z.join("\n");return"THREE.WebGLShader: gl.getShaderInfoLog() "+
t+"\n"+B+z}function PC(z,D){D=XO(D);return"vec4 "+z+"( vec4 value ) { return "+D[0]+"ToLinear"+D[1]+"; }"}function xX(z,D){D=XO(D);return"vec4 "+z+"( vec4 value ) { return LinearTo"+D[0]+D[1]+"; }"}function YO(z,D){switch(D){case 1:D="Linear";break;case 2:D="Reinhard";break;case 3:D="OptimizedCineon";break;case 4:D="ACESFilmic";break;case 5:D="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",D),D="Linear"}return"vec3 "+z+"( vec3 color ) { return "+D+"ToneMapping( color ); }"}
function yX(z){var D=[],t;for(t in z){var u=z[t];!1!==u&&D.push("#define "+t+" "+u)}return D.join("\n")}function BA(z){return""!==z}function VI(z,D){return z.replace(/NUM_DIR_LIGHTS/g,D.numDirLights).replace(/NUM_SPOT_LIGHTS/g,D.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,D.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,D.numPointLights).replace(/NUM_HEMI_LIGHTS/g,D.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,D.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,D.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,
D.numPointLightShadows)}function UO(z,D){return z.replace(/NUM_CLIPPING_PLANES/g,D.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,D.numClippingPlanes-D.numClipIntersection)}function WI(z,D){z=jj[D];if(void 0===z)throw Error("Can not resolve #include <"+D+">");return z.replace(WZ,WI)}function oa(z,D,t,u){console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead.");return Na(z,D,t,u)}function Na(z,D,t,u){z="";for(D=parseInt(D);D<
parseInt(t);D++)z+=u.replace(/\[\s*i\s*\]/g,"[ "+D+" ]").replace(/UNROLLED_LOOP_INDEX/g,D);return z}function Ia(z){var D="precision "+z.precision+" float;\nprecision "+z.precision+" int;";"highp"===z.precision?D+="\n#define HIGH_PRECISION":"mediump"===z.precision?D+="\n#define MEDIUM_PRECISION":"lowp"===z.precision&&(D+="\n#define LOW_PRECISION");return D}function Za(z){var D="SHADOWMAP_TYPE_BASIC";1===z.shadowMapType?D="SHADOWMAP_TYPE_PCF":2===z.shadowMapType?D="SHADOWMAP_TYPE_PCF_SOFT":3===z.shadowMapType&&
(D="SHADOWMAP_TYPE_VSM");return D}function jb(z){var D="ENVMAP_TYPE_CUBE";if(z.envMap)switch(z.envMapMode){case 301:case 302:D="ENVMAP_TYPE_CUBE";break;case 306:case 307:D="ENVMAP_TYPE_CUBE_UV"}return D}function Ub(z){var D="ENVMAP_MODE_REFLECTION";if(z.envMap)switch(z.envMapMode){case 302:case 307:D="ENVMAP_MODE_REFRACTION"}return D}function ab(z){var D="ENVMAP_BLENDING_NONE";if(z.envMap)switch(z.combine){case 0:D="ENVMAP_BLENDING_MULTIPLY";break;case 1:D="ENVMAP_BLENDING_MIX";break;case 2:D="ENVMAP_BLENDING_ADD"}return D}
function Mb(z,D,t,u){var B=z.getContext(),G=t.defines,K=t.vertexShader,O=t.fragmentShader,U=Za(t),V=jb(t),ca=Ub(t),qa=ab(t),Ea=0<z.gammaFactor?z.gammaFactor:1,Ra=t.isWebGL2?"":[t.extensionDerivatives||t.envMapCubeUV||t.bumpMap||t.tangentSpaceNormalMap||t.clearcoatNormalMap||t.flatShading||"physical"===t.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(t.extensionFragDepth||t.logarithmicDepthBuffer)&&t.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",t.extensionDrawBuffers&&
t.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(t.extensionShaderTextureLOD||t.envMap)&&t.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(BA).join("\n"),Ua=yX(G),ub=B.createProgram(),nb=t.glslVersion?"#version "+t.glslVersion+"\n":"";t.isRawShaderMaterial?(G=[Ua].filter(BA).join("\n"),0<G.length&&(G+="\n"),U=[Ra,Ua].filter(BA).join("\n"),0<U.length&&(U+="\n")):(G=[Ia(t),"#define SHADER_NAME "+t.shaderName,Ua,t.instancing?"#define USE_INSTANCING":
"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+Ea,"#define MAX_BONES "+t.maxBones,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+ca:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":
"",t.normalMap&&t.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",t.normalMap&&t.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.displacementMap&&t.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":
"",t.alphaMap?"#define USE_ALPHAMAP":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexUvs?"#define USE_UV":"",t.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.useVertexTexture?"#define BONE_TEXTURE":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&!1===t.flatShading?"#define USE_MORPHNORMALS":"",t.doubleSided?"#define DOUBLE_SIDED":
"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+U:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",
"#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#ifdef USE_COLOR","\tattribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS",
"\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(BA).join("\n"),U=[Ra,Ia(t),"#define SHADER_NAME "+t.shaderName,Ua,t.alphaTest?"#define ALPHATEST "+
t.alphaTest+(t.alphaTest%1?"":".0"):"","#define GAMMA_FACTOR "+Ea,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+V:"",t.envMap?"#define "+ca:"",t.envMap?"#define "+qa:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMap&&
t.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",t.normalMap&&t.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.sheen?"#define USE_SHEEN":"",t.transmissionMap?
"#define USE_TRANSMISSIONMAP":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor?"#define USE_COLOR":"",t.vertexUvs?"#define USE_UV":"",t.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+U:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",
t.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"",(t.extensionShaderTextureLOD||t.envMap)&&t.rendererExtensionShaderTextureLod?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",0!==t.toneMapping?"#define TONE_MAPPING":"",0!==t.toneMapping?jj.tonemapping_pars_fragment:"",0!==t.toneMapping?
YO("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",jj.encodings_pars_fragment,t.map?PC("mapTexelToLinear",t.mapEncoding):"",t.matcap?PC("matcapTexelToLinear",t.matcapEncoding):"",t.envMap?PC("envMapTexelToLinear",t.envMapEncoding):"",t.emissiveMap?PC("emissiveMapTexelToLinear",t.emissiveMapEncoding):"",t.lightMap?PC("lightMapTexelToLinear",t.lightMapEncoding):"",xX("linearToOutputTexel",t.outputEncoding),t.depthPacking?"#define DEPTH_PACKING "+t.depthPacking:"","\n"].filter(BA).join("\n"));
K=K.replace(WZ,WI);K=VI(K,t);K=UO(K,t);O=O.replace(WZ,WI);O=VI(O,t);O=UO(O,t);K=K.replace(bea,Na).replace(cea,oa);O=O.replace(bea,Na).replace(cea,oa);t.isWebGL2&&!0!==t.isRawShaderMaterial&&(nb="#version 300 es\n",G="#define attribute in\n#define varying out\n#define texture2D texture\n"+G,U=["#define varying in","300 es"===t.glslVersion?"":"out highp vec4 pc_fragColor;","300 es"===t.glslVersion?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth\n#define texture2D texture\n#define textureCube texture\n#define texture2DProj textureProj\n#define texture2DLodEXT textureLod\n#define texture2DProjLodEXT textureProjLod\n#define textureCubeLodEXT textureLod\n#define texture2DGradEXT textureGrad\n#define texture2DProjGradEXT textureProjGrad\n#define textureCubeGradEXT textureGrad"].join("\n")+
"\n"+U);O=nb+U+O;K=TO(B,35633,nb+G+K);O=TO(B,35632,O);B.attachShader(ub,K);B.attachShader(ub,O);void 0!==t.index0AttributeName?B.bindAttribLocation(ub,0,t.index0AttributeName):!0===t.morphTargets&&B.bindAttribLocation(ub,0,"position");B.linkProgram(ub);if(z.debug.checkShaderErrors){z=B.getProgramInfoLog(ub).trim();nb=B.getShaderInfoLog(K).trim();V=B.getShaderInfoLog(O).trim();qa=ca=!0;if(!1===B.getProgramParameter(ub,35714))ca=!1,Ea=SO(B,K,"vertex"),Ra=SO(B,O,"fragment"),console.error("THREE.WebGLProgram: shader error: ",
B.getError(),"35715",B.getProgramParameter(ub,35715),"gl.getProgramInfoLog",z,Ea,Ra);else if(""!==z)console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",z);else if(""===nb||""===V)qa=!1;qa&&((this||q).diagnostics={runnable:ca,programLog:z,vertexShader:{log:nb,prefix:G},fragmentShader:{log:V,prefix:U}})}B.deleteShader(K);B.deleteShader(O);var ec;(this||q).getUniforms=function(){void 0===ec&&(ec=new Lw(B,ub));return ec};var gc;(this||q).getAttributes=function(){if(void 0===gc){for(var Ac={},Lc=
B.getProgramParameter(ub,35721),ld=0;ld<Lc;ld++){var cd=B.getActiveAttrib(ub,ld).name;Ac[cd]=B.getAttribLocation(ub,cd)}gc=Ac}return gc};(this||q).destroy=function(){u.releaseStatesOfProgram(this||q);B.deleteProgram(ub);(this||q).program=void 0};(this||q).name=t.shaderName;(this||q).id=nya++;(this||q).cacheKey=D;(this||q).usedTimes=1;(this||q).program=ub;(this||q).vertexShader=K;(this||q).fragmentShader=O;return this||q}function Db(z,D,t,u,B,G){function K(nb){nb&&nb.isTexture?nb=nb.encoding:nb&&nb.isWebGLRenderTarget?
(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),nb=nb.texture.encoding):nb=3E3;return nb}var O=[],U=u.isWebGL2,V=u.logarithmicDepthBuffer,ca=u.floatVertexTextures,qa=u.maxVertexUniforms,Ea=u.vertexTextures,Ra=u.precision,Ua={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",
MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"},ub="precision isWebGL2 supportsVertexTextures outputEncoding instancing instancingColor map mapEncoding matcap matcapEncoding envMap envMapMode envMapEncoding envMapCubeUV lightMap lightMapEncoding aoMap emissiveMap emissiveMapEncoding bumpMap normalMap objectSpaceNormalMap tangentSpaceNormalMap clearcoatMap clearcoatRoughnessMap clearcoatNormalMap displacementMap specularMap roughnessMap metalnessMap gradientMap alphaMap combine vertexColors vertexTangents vertexUvs uvsVertexOnly fog useFog fogExp2 flatShading sizeAttenuation logarithmicDepthBuffer skinning maxBones useVertexTexture morphTargets morphNormals maxMorphTargets maxMorphNormals premultipliedAlpha numDirLights numPointLights numSpotLights numHemiLights numRectAreaLights numDirLightShadows numPointLightShadows numSpotLightShadows shadowMapEnabled shadowMapType toneMapping physicallyCorrectLights alphaTest doubleSided flipSided numClippingPlanes numClipIntersection depthPacking dithering sheen transmissionMap".split(" ");
return{getParameters:function(nb,ec,gc,Ac,Lc){var ld=Ac.fog;Ac=nb.isMeshStandardMaterial?Ac.environment:null;Ac=D.get(nb.envMap||Ac);var cd=Ua[nb.type];if(Lc.isSkinnedMesh){var Nc=Lc.skeleton.bones;if(ca)Nc=1024;else{var Oc=Math.min(Math.floor((qa-20)/4),Nc.length);Oc<Nc.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+Nc.length+" bones. This GPU supports "+Oc+"."),Nc=0):Nc=Oc}}else Nc=0;null!==nb.precision&&(Ra=u.getMaxPrecision(nb.precision),Ra!==nb.precision&&console.warn("THREE.WebGLProgram.getParameters:",
nb.precision,"not supported, using",Ra,"instead."));if(cd){var jd=fv[cd];Oc=jd.vertexShader;jd=jd.fragmentShader}else Oc=nb.vertexShader,jd=nb.fragmentShader;var Ed=z.getRenderTarget();return{isWebGL2:U,shaderID:cd,shaderName:nb.type,vertexShader:Oc,fragmentShader:jd,defines:nb.defines,isRawShaderMaterial:!0===nb.isRawShaderMaterial,glslVersion:nb.glslVersion,precision:Ra,instancing:!0===Lc.isInstancedMesh,instancingColor:!0===Lc.isInstancedMesh&&null!==Lc.instanceColor,supportsVertexTextures:Ea,
outputEncoding:null!==Ed?K(Ed.texture):z.outputEncoding,map:!!nb.map,mapEncoding:K(nb.map),matcap:!!nb.matcap,matcapEncoding:K(nb.matcap),envMap:!!Ac,envMapMode:Ac&&Ac.mapping,envMapEncoding:K(Ac),envMapCubeUV:!!Ac&&(306===Ac.mapping||307===Ac.mapping),lightMap:!!nb.lightMap,lightMapEncoding:K(nb.lightMap),aoMap:!!nb.aoMap,emissiveMap:!!nb.emissiveMap,emissiveMapEncoding:K(nb.emissiveMap),bumpMap:!!nb.bumpMap,normalMap:!!nb.normalMap,objectSpaceNormalMap:1===nb.normalMapType,tangentSpaceNormalMap:0===
nb.normalMapType,clearcoatMap:!!nb.clearcoatMap,clearcoatRoughnessMap:!!nb.clearcoatRoughnessMap,clearcoatNormalMap:!!nb.clearcoatNormalMap,displacementMap:!!nb.displacementMap,roughnessMap:!!nb.roughnessMap,metalnessMap:!!nb.metalnessMap,specularMap:!!nb.specularMap,alphaMap:!!nb.alphaMap,gradientMap:!!nb.gradientMap,sheen:!!nb.sheen,transmissionMap:!!nb.transmissionMap,combine:nb.combine,vertexTangents:nb.normalMap&&nb.vertexTangents,vertexColors:nb.vertexColors,vertexUvs:!!nb.map||!!nb.bumpMap||
!!nb.normalMap||!!nb.specularMap||!!nb.alphaMap||!!nb.emissiveMap||!!nb.roughnessMap||!!nb.metalnessMap||!!nb.clearcoatMap||!!nb.clearcoatRoughnessMap||!!nb.clearcoatNormalMap||!!nb.displacementMap||!!nb.transmissionMap,uvsVertexOnly:!(nb.map||nb.bumpMap||nb.normalMap||nb.specularMap||nb.alphaMap||nb.emissiveMap||nb.roughnessMap||nb.metalnessMap||nb.clearcoatNormalMap||nb.transmissionMap)&&!!nb.displacementMap,fog:!!ld,useFog:nb.fog,fogExp2:ld&&ld.isFogExp2,flatShading:!!nb.flatShading,sizeAttenuation:nb.sizeAttenuation,
logarithmicDepthBuffer:V,skinning:nb.skinning&&0<Nc,maxBones:Nc,useVertexTexture:ca,morphTargets:nb.morphTargets,morphNormals:nb.morphNormals,maxMorphTargets:z.maxMorphTargets,maxMorphNormals:z.maxMorphNormals,numDirLights:ec.directional.length,numPointLights:ec.point.length,numSpotLights:ec.spot.length,numRectAreaLights:ec.rectArea.length,numHemiLights:ec.hemi.length,numDirLightShadows:ec.directionalShadowMap.length,numPointLightShadows:ec.pointShadowMap.length,numSpotLightShadows:ec.spotShadowMap.length,
numClippingPlanes:G.numPlanes,numClipIntersection:G.numIntersection,dithering:nb.dithering,shadowMapEnabled:z.shadowMap.enabled&&0<gc.length,shadowMapType:z.shadowMap.type,toneMapping:nb.toneMapped?z.toneMapping:0,physicallyCorrectLights:z.physicallyCorrectLights,premultipliedAlpha:nb.premultipliedAlpha,alphaTest:nb.alphaTest,doubleSided:2===nb.side,flipSided:1===nb.side,depthPacking:void 0!==nb.depthPacking?nb.depthPacking:!1,index0AttributeName:nb.index0AttributeName,extensionDerivatives:nb.extensions&&
nb.extensions.derivatives,extensionFragDepth:nb.extensions&&nb.extensions.fragDepth,extensionDrawBuffers:nb.extensions&&nb.extensions.drawBuffers,extensionShaderTextureLOD:nb.extensions&&nb.extensions.shaderTextureLOD,rendererExtensionFragDepth:U||t.has("EXT_frag_depth"),rendererExtensionDrawBuffers:U||t.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:U||t.has("EXT_shader_texture_lod"),customProgramCacheKey:nb.customProgramCacheKey()}},getProgramCacheKey:function(nb){var ec=[];nb.shaderID?
ec.push(nb.shaderID):(ec.push(nb.fragmentShader),ec.push(nb.vertexShader));if(void 0!==nb.defines)for(var gc in nb.defines)ec.push(gc),ec.push(nb.defines[gc]);if(!1===nb.isRawShaderMaterial){for(gc=0;gc<ub.length;gc++)ec.push(nb[ub[gc]]);ec.push(z.outputEncoding);ec.push(z.gammaFactor)}ec.push(nb.customProgramCacheKey);return ec.join()},getUniforms:function(nb){var ec=Ua[nb.type];return ec?dea.clone(fv[ec].uniforms):nb.uniforms},acquireProgram:function(nb,ec){for(var gc,Ac=0,Lc=O.length;Ac<Lc;Ac++){var ld=
O[Ac];if(ld.cacheKey===ec){gc=ld;++gc.usedTimes;break}}void 0===gc&&(gc=new Mb(z,ec,nb,B),O.push(gc));return gc},releaseProgram:function(nb){if(0===--nb.usedTimes){var ec=O.indexOf(nb);O[ec]=O[O.length-1];O.pop();nb.destroy()}},programs:O}}function Rc(){var z=new WeakMap;return{get:function(D){var t=z.get(D);void 0===t&&(t={},z.set(D,t));return t},remove:function(D){z.delete(D)},update:function(D,t,u){z.get(D)[t]=u},dispose:function(){z=new WeakMap}}}function Ib(z,D){return z.groupOrder!==D.groupOrder?
z.groupOrder-D.groupOrder:z.renderOrder!==D.renderOrder?z.renderOrder-D.renderOrder:z.program!==D.program?z.program.id-D.program.id:z.material.id!==D.material.id?z.material.id-D.material.id:z.z!==D.z?z.z-D.z:z.id-D.id}function Ud(z,D){return z.groupOrder!==D.groupOrder?z.groupOrder-D.groupOrder:z.renderOrder!==D.renderOrder?z.renderOrder-D.renderOrder:z.z!==D.z?D.z-z.z:z.id-D.id}function ue(z){function D(O,U,V,ca,qa,Ea){var Ra=t[u],Ua=z.get(V);void 0===Ra?(Ra={id:O.id,object:O,geometry:U,material:V,
program:Ua.program||K,groupOrder:ca,renderOrder:O.renderOrder,z:qa,group:Ea},t[u]=Ra):(Ra.id=O.id,Ra.object=O,Ra.geometry=U,Ra.material=V,Ra.program=Ua.program||K,Ra.groupOrder=ca,Ra.renderOrder=O.renderOrder,Ra.z=qa,Ra.group=Ea);u++;return Ra}var t=[],u=0,B=[],G=[],K={id:-1};return{opaque:B,transparent:G,init:function(){u=0;B.length=0;G.length=0},push:function(O,U,V,ca,qa,Ea){O=D(O,U,V,ca,qa,Ea);(!0===V.transparent?G:B).push(O)},unshift:function(O,U,V,ca,qa,Ea){O=D(O,U,V,ca,qa,Ea);(!0===V.transparent?
G:B).unshift(O)},finish:function(){for(var O=u,U=t.length;O<U;O++){var V=t[O];if(null===V.id)break;V.id=null;V.object=null;V.geometry=null;V.material=null;V.program=null;V.group=null}},sort:function(O,U){1<B.length&&B.sort(O||Ib);1<G.length&&G.sort(U||Ud)}}}function Cf(z){var D=new WeakMap;return{get:function(t,u){!1===D.has(t)?(u=new ue(z),D.set(t,[u])):u>=D.get(t).length?(u=new ue(z),D.get(t).push(u)):u=D.get(t)[u];return u},dispose:function(){D=new WeakMap}}}function Df(){var z={};return{get:function(D){if(void 0!==
z[D.id])return z[D.id];switch(D.type){case "DirectionalLight":var t={direction:new cc,color:new jg};break;case "SpotLight":t={position:new cc,direction:new cc,color:new jg,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case "PointLight":t={position:new cc,color:new jg,distance:0,decay:0};break;case "HemisphereLight":t={direction:new cc,skyColor:new jg,groundColor:new jg};break;case "RectAreaLight":t={color:new jg,position:new cc,halfWidth:new cc,halfHeight:new cc}}return z[D.id]=t}}}function Oe(){var z=
{};return{get:function(D){if(void 0!==z[D.id])return z[D.id];switch(D.type){case "DirectionalLight":var t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new We};break;case "SpotLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new We};break;case "PointLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new We,shadowCameraNear:1,shadowCameraFar:1E3}}return z[D.id]=t}}}function Ef(z,D){return(D.castShadow?1:0)-(z.castShadow?1:0)}function op(z,D){for(var t=
new Df,u=Oe(),B={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]},G=0;9>G;G++)B.probe.push(new cc);
var K=new cc,O=new Ug,U=new Ug;return{setup:function(V){for(var ca=0,qa=0,Ea=0,Ra=0;9>Ra;Ra++)B.probe[Ra].set(0,0,0);var Ua=Ra=0,ub=0,nb=0,ec=0,gc=0,Ac=0,Lc=0;V.sort(Ef);for(var ld=0,cd=V.length;ld<cd;ld++){var Nc=V[ld],Oc=Nc.color,jd=Nc.intensity,Ed=Nc.distance,Ad=Nc.shadow&&Nc.shadow.map?Nc.shadow.map.texture:null;if(Nc.isAmbientLight)ca+=Oc.r*jd,qa+=Oc.g*jd,Ea+=Oc.b*jd;else if(Nc.isLightProbe)for(Ad=0;9>Ad;Ad++)B.probe[Ad].addScaledVector(Nc.sh.coefficients[Ad],jd);else if(Nc.isDirectionalLight){jd=
t.get(Nc);jd.color.copy(Nc.color).multiplyScalar(Nc.intensity);if(Nc.castShadow){var de=Nc.shadow;Oc=u.get(Nc);Oc.shadowBias=de.bias;Oc.shadowNormalBias=de.normalBias;Oc.shadowRadius=de.radius;Oc.shadowMapSize=de.mapSize;B.directionalShadow[Ra]=Oc;B.directionalShadowMap[Ra]=Ad;B.directionalShadowMatrix[Ra]=Nc.shadow.matrix;gc++}B.directional[Ra]=jd;Ra++}else Nc.isSpotLight?(de=t.get(Nc),de.position.setFromMatrixPosition(Nc.matrixWorld),de.color.copy(Oc).multiplyScalar(jd),de.distance=Ed,de.coneCos=
Math.cos(Nc.angle),de.penumbraCos=Math.cos(Nc.angle*(1-Nc.penumbra)),de.decay=Nc.decay,Nc.castShadow&&(jd=Nc.shadow,Oc=u.get(Nc),Oc.shadowBias=jd.bias,Oc.shadowNormalBias=jd.normalBias,Oc.shadowRadius=jd.radius,Oc.shadowMapSize=jd.mapSize,B.spotShadow[ub]=Oc,B.spotShadowMap[ub]=Ad,B.spotShadowMatrix[ub]=Nc.shadow.matrix,Lc++),B.spot[ub]=de,ub++):Nc.isRectAreaLight?(Ad=t.get(Nc),Ad.color.copy(Oc).multiplyScalar(jd),Ad.halfWidth.set(.5*Nc.width,0,0),Ad.halfHeight.set(0,.5*Nc.height,0),B.rectArea[nb]=
Ad,nb++):Nc.isPointLight?(jd=t.get(Nc),jd.color.copy(Nc.color).multiplyScalar(Nc.intensity),jd.distance=Nc.distance,jd.decay=Nc.decay,Nc.castShadow&&(de=Nc.shadow,Oc=u.get(Nc),Oc.shadowBias=de.bias,Oc.shadowNormalBias=de.normalBias,Oc.shadowRadius=de.radius,Oc.shadowMapSize=de.mapSize,Oc.shadowCameraNear=de.camera.near,Oc.shadowCameraFar=de.camera.far,B.pointShadow[Ua]=Oc,B.pointShadowMap[Ua]=Ad,B.pointShadowMatrix[Ua]=Nc.shadow.matrix,Ac++),B.point[Ua]=jd,Ua++):Nc.isHemisphereLight&&(Ad=t.get(Nc),
Ad.skyColor.copy(Nc.color).multiplyScalar(jd),Ad.groundColor.copy(Nc.groundColor).multiplyScalar(jd),B.hemi[ec]=Ad,ec++)}0<nb&&(D.isWebGL2?(B.rectAreaLTC1=Pf.LTC_FLOAT_1,B.rectAreaLTC2=Pf.LTC_FLOAT_2):!0===z.has("OES_texture_float_linear")?(B.rectAreaLTC1=Pf.LTC_FLOAT_1,B.rectAreaLTC2=Pf.LTC_FLOAT_2):!0===z.has("OES_texture_half_float_linear")?(B.rectAreaLTC1=Pf.LTC_HALF_1,B.rectAreaLTC2=Pf.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions."));B.ambient[0]=
ca;B.ambient[1]=qa;B.ambient[2]=Ea;V=B.hash;if(V.directionalLength!==Ra||V.pointLength!==Ua||V.spotLength!==ub||V.rectAreaLength!==nb||V.hemiLength!==ec||V.numDirectionalShadows!==gc||V.numPointShadows!==Ac||V.numSpotShadows!==Lc)B.directional.length=Ra,B.spot.length=ub,B.rectArea.length=nb,B.point.length=Ua,B.hemi.length=ec,B.directionalShadow.length=gc,B.directionalShadowMap.length=gc,B.pointShadow.length=Ac,B.pointShadowMap.length=Ac,B.spotShadow.length=Lc,B.spotShadowMap.length=Lc,B.directionalShadowMatrix.length=
gc,B.pointShadowMatrix.length=Ac,B.spotShadowMatrix.length=Lc,V.directionalLength=Ra,V.pointLength=Ua,V.spotLength=ub,V.rectAreaLength=nb,V.hemiLength=ec,V.numDirectionalShadows=gc,V.numPointShadows=Ac,V.numSpotShadows=Lc,B.version=oya++},setupView:function(V,ca){var qa=0,Ea=0,Ra=0,Ua=0,ub=0;ca=ca.matrixWorldInverse;for(var nb=0,ec=V.length;nb<ec;nb++){var gc=V[nb];if(gc.isDirectionalLight){var Ac=B.directional[qa];Ac.direction.setFromMatrixPosition(gc.matrixWorld);K.setFromMatrixPosition(gc.target.matrixWorld);
Ac.direction.sub(K);Ac.direction.transformDirection(ca);qa++}else gc.isSpotLight?(Ac=B.spot[Ra],Ac.position.setFromMatrixPosition(gc.matrixWorld),Ac.position.applyMatrix4(ca),Ac.direction.setFromMatrixPosition(gc.matrixWorld),K.setFromMatrixPosition(gc.target.matrixWorld),Ac.direction.sub(K),Ac.direction.transformDirection(ca),Ra++):gc.isRectAreaLight?(Ac=B.rectArea[Ua],Ac.position.setFromMatrixPosition(gc.matrixWorld),Ac.position.applyMatrix4(ca),U.identity(),O.copy(gc.matrixWorld),O.premultiply(ca),
U.extractRotation(O),Ac.halfWidth.set(.5*gc.width,0,0),Ac.halfHeight.set(0,.5*gc.height,0),Ac.halfWidth.applyMatrix4(U),Ac.halfHeight.applyMatrix4(U),Ua++):gc.isPointLight?(Ac=B.point[Ea],Ac.position.setFromMatrixPosition(gc.matrixWorld),Ac.position.applyMatrix4(ca),Ea++):gc.isHemisphereLight&&(Ac=B.hemi[ub],Ac.direction.setFromMatrixPosition(gc.matrixWorld),Ac.direction.transformDirection(ca),Ac.direction.normalize(),ub++)}},state:B}}function RO(z,D){var t=new op(z,D),u=[],B=[];return{init:function(){u.length=
0;B.length=0},state:{lightsArray:u,shadowsArray:B,lights:t},setupLights:function(){t.setup(u)},setupLightsView:function(G){t.setupView(u,G)},pushLight:function(G){u.push(G)},pushShadow:function(G){B.push(G)}}}function wX(z,D){var t=new WeakMap;return{get:function(u,B){void 0===B&&(B=0);!1===t.has(u)?(B=new RO(z,D),t.set(u,[B])):B>=t.get(u).length?(B=new RO(z,D),t.get(u).push(B)):B=t.get(u)[B];return B},dispose:function(){t=new WeakMap}}}function eea(z,D,t){function u(Lc,ld,cd){cd=Lc<<0|ld<<1|cd<<
2;var Nc=qa[cd];void 0===Nc&&(Nc=new XQ({depthPacking:3201,morphTargets:Lc,skinning:ld}),qa[cd]=Nc);return Nc}function B(Lc,ld,cd){cd=Lc<<0|ld<<1|cd<<2;var Nc=Ea[cd];void 0===Nc&&(Nc=new YQ({morphTargets:Lc,skinning:ld}),Ea[cd]=Nc);return Nc}function G(Lc,ld,cd,Nc,Oc,jd,Ed){var Ad=u,de=Lc.customDepthMaterial;!0===Nc.isPointLight&&(Ad=B,de=Lc.customDistanceMaterial);void 0===de?(de=!1,!0===cd.morphTargets&&(de=ld.morphAttributes&&ld.morphAttributes.position&&0<ld.morphAttributes.position.length),ld=
!1,!0===Lc.isSkinnedMesh&&(!0===cd.skinning?ld=!0:console.warn("THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:",Lc)),Lc=Ad(de,ld,!0===Lc.isInstancedMesh)):Lc=de;z.localClippingEnabled&&!0===cd.clipShadows&&0!==cd.clippingPlanes.length&&(de=Lc.uuid,Ad=cd.uuid,ld=Ra[de],void 0===ld&&(ld={},Ra[de]=ld),de=ld[Ad],void 0===de&&(de=Lc.clone(),ld[Ad]=de),Lc=de);Lc.visible=cd.visible;Lc.wireframe=cd.wireframe;Lc.side=3===Ed?null!==cd.shadowSide?cd.shadowSide:cd.side:null!==cd.shadowSide?
cd.shadowSide:Ua[cd.side];Lc.clipShadows=cd.clipShadows;Lc.clippingPlanes=cd.clippingPlanes;Lc.clipIntersection=cd.clipIntersection;Lc.wireframeLinewidth=cd.wireframeLinewidth;Lc.linewidth=cd.linewidth;!0===Nc.isPointLight&&!0===Lc.isMeshDistanceMaterial&&(Lc.referencePosition.setFromMatrixPosition(Nc.matrixWorld),Lc.nearDistance=Oc,Lc.farDistance=jd);return Lc}function K(Lc,ld,cd,Nc,Oc){if(!1!==Lc.visible){if(Lc.layers.test(ld.layers)&&(Lc.isMesh||Lc.isLine||Lc.isPoints)&&(Lc.castShadow||Lc.receiveShadow&&
3===Oc)&&(!Lc.frustumCulled||O.intersectsObject(Lc))){Lc.modelViewMatrix.multiplyMatrices(cd.matrixWorldInverse,Lc.matrixWorld);var jd=D.update(Lc),Ed=Lc.material;if(Array.isArray(Ed))for(var Ad=jd.groups,de=0,rf=Ad.length;de<rf;de++){var md=Ad[de],qd=Ed[md.materialIndex];qd&&qd.visible&&(qd=G(Lc,jd,qd,Nc,cd.near,cd.far,Oc),z.renderBufferDirect(cd,null,jd,qd,Lc,md))}else Ed.visible&&(Ed=G(Lc,jd,Ed,Nc,cd.near,cd.far,Oc),z.renderBufferDirect(cd,null,jd,Ed,Lc,null))}Lc=Lc.children;jd=0;for(Ed=Lc.length;jd<
Ed;jd++)K(Lc[jd],ld,cd,Nc,Oc)}}var O=new VJ,U=new We,V=new We,ca=new Ck,qa=[],Ea=[],Ra={},Ua={0:1,1:0,2:2},ub=new Zb({defines:{SAMPLE_RATE:.25,HALF_SAMPLE_RATE:.125},uniforms:{shadow_pass:{value:null},resolution:{value:new We},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy ) / resolution ) );\n\tfor ( float i = -1.0; i < 1.0 ; i += SAMPLE_RATE) {\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( i, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, i ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean * HALF_SAMPLE_RATE;\n\tsquared_mean = squared_mean * HALF_SAMPLE_RATE;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),
nb=ub.clone();nb.defines.HORIZONTAL_PASS=1;var ec=new pa;ec.setAttribute("position",new za(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));var gc=new La(ec,ub),Ac=this||q;(this||q).enabled=!1;(this||q).autoUpdate=!0;(this||q).needsUpdate=!1;(this||q).type=1;(this||q).render=function(Lc,ld,cd){if(!1!==Ac.enabled&&(!1!==Ac.autoUpdate||!1!==Ac.needsUpdate)&&0!==Lc.length){var Nc=z.getRenderTarget(),Oc=z.getActiveCubeFace(),jd=z.getActiveMipmapLevel(),Ed=z.state;Ed.setBlending(0);Ed.buffers.color.setClear(1,
1,1,1);Ed.buffers.depth.setTest(!0);Ed.setScissorTest(!1);for(var Ad=0,de=Lc.length;Ad<de;Ad++){var rf=Lc[Ad],md=rf.shadow;if(void 0===md)console.warn("THREE.WebGLShadowMap:",rf,"has no shadow.");else if(!1!==md.autoUpdate||!1!==md.needsUpdate){U.copy(md.mapSize);var qd=md.getFrameExtents();U.multiply(qd);V.copy(md.mapSize);if(U.x>t||U.y>t)U.x>t&&(V.x=Math.floor(t/qd.x),U.x=V.x*qd.x,md.mapSize.x=V.x),U.y>t&&(V.y=Math.floor(t/qd.y),U.y=V.y*qd.y,md.mapSize.y=V.y);null!==md.map||md.isPointLightShadow||
3!==(this||q).type||(qd={minFilter:1006,magFilter:1006,format:1023},md.map=new Oy(U.x,U.y,qd),md.map.texture.name=rf.name+".shadowMap",md.mapPass=new Oy(U.x,U.y,qd),md.camera.updateProjectionMatrix());null===md.map&&(md.map=new Oy(U.x,U.y,{minFilter:1003,magFilter:1003,format:1023}),md.map.texture.name=rf.name+".shadowMap",md.camera.updateProjectionMatrix());z.setRenderTarget(md.map);z.clear();qd=md.getViewportCount();for(var Pd=0;Pd<qd;Pd++){var kg=md.getViewport(Pd);ca.set(V.x*kg.x,V.y*kg.y,V.x*
kg.z,V.y*kg.w);Ed.viewport(ca);md.updateMatrices(rf,Pd);O=md.getFrustum();K(ld,cd,md.camera,rf,(this||q).type)}md.isPointLightShadow||3!==(this||q).type||(rf=md,qd=cd,Pd=D.update(gc),ub.uniforms.shadow_pass.value=rf.map.texture,ub.uniforms.resolution.value=rf.mapSize,ub.uniforms.radius.value=rf.radius,z.setRenderTarget(rf.mapPass),z.clear(),z.renderBufferDirect(qd,null,Pd,ub,gc,null),nb.uniforms.shadow_pass.value=rf.mapPass.texture,nb.uniforms.resolution.value=rf.mapSize,nb.uniforms.radius.value=
rf.radius,z.setRenderTarget(rf.map),z.clear(),z.renderBufferDirect(qd,null,Pd,nb,gc,null));md.needsUpdate=!1}}Ac.needsUpdate=!1;z.setRenderTarget(Nc,Oc,jd)}}}function pya(z,D,t){function u(Kc,Ne,ff){var tg=new Uint8Array(4),lf=z.createTexture();z.bindTexture(Kc,lf);z.texParameteri(Kc,10241,9728);z.texParameteri(Kc,10240,9728);for(Kc=0;Kc<ff;Kc++)z.texImage2D(Ne+Kc,0,6408,1,1,0,6408,5121,tg);return lf}function B(Kc){!0!==nb[Kc]&&(z.enable(Kc),nb[Kc]=!0)}function G(Kc){!1!==nb[Kc]&&(z.disable(Kc),nb[Kc]=
!1)}function K(Kc,Ne,ff,tg,lf,Gh,Lh,Ai){if(0===Kc)!0===gc&&(G(3042),gc=!1);else if(!1===gc&&(B(3042),gc=!0),5!==Kc){if(Kc!==Ac||Ai!==Ed){if(100!==Lc||100!==Nc)z.blendEquation(32774),Nc=Lc=100;if(Ai)switch(Kc){case 1:z.blendFuncSeparate(1,771,1,771);break;case 2:z.blendFunc(1,1);break;case 3:z.blendFuncSeparate(0,0,769,771);break;case 4:z.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",Kc)}else switch(Kc){case 1:z.blendFuncSeparate(770,771,1,771);break;
case 2:z.blendFunc(770,1);break;case 3:z.blendFunc(0,769);break;case 4:z.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",Kc)}jd=Oc=cd=ld=null;Ac=Kc;Ed=Ai}}else{lf=lf||Ne;Gh=Gh||ff;Lh=Lh||tg;if(Ne!==Lc||lf!==Nc)z.blendEquationSeparate(Sc[Ne],Sc[lf]),Lc=Ne,Nc=lf;if(ff!==ld||tg!==cd||Gh!==Oc||Lh!==jd)z.blendFuncSeparate(Td[ff],Td[tg],Td[Gh],Td[Lh]),ld=ff,cd=tg,Oc=Gh,jd=Lh;Ac=Kc;Ed=null}}function O(Kc){Ad!==Kc&&(Kc?z.frontFace(2304):z.frontFace(2305),Ad=Kc)}function U(Kc){0!==
Kc?(B(2884),Kc!==de&&(1===Kc?z.cullFace(1029):2===Kc?z.cullFace(1028):z.cullFace(1032))):G(2884);de=Kc}function V(Kc,Ne,ff){if(Kc){if(B(32823),md!==Ne||qd!==ff)z.polygonOffset(Ne,ff),md=Ne,qd=ff}else G(32823)}function ca(Kc){void 0===Kc&&(Kc=33984+Pd-1);pg!==Kc&&(z.activeTexture(Kc),pg=Kc)}var qa,Ea;t=t.isWebGL2;var Ra=new function(){var Kc=!1,Ne=new Ck,ff=null,tg=new Ck(0,0,0,0);return{setMask:function(lf){ff===lf||Kc||(z.colorMask(lf,lf,lf,lf),ff=lf)},setLocked:function(lf){Kc=lf},setClear:function(lf,
Gh,Lh,Ai,Bi){!0===Bi&&(lf*=Ai,Gh*=Ai,Lh*=Ai);Ne.set(lf,Gh,Lh,Ai);!1===tg.equals(Ne)&&(z.clearColor(lf,Gh,Lh,Ai),tg.copy(Ne))},reset:function(){Kc=!1;ff=null;tg.set(-1,0,0,0)}}},Ua=new function(){var Kc=!1,Ne=null,ff=null,tg=null;return{setTest:function(lf){lf?B(2929):G(2929)},setMask:function(lf){Ne===lf||Kc||(z.depthMask(lf),Ne=lf)},setFunc:function(lf){if(ff!==lf){if(lf)switch(lf){case 0:z.depthFunc(512);break;case 1:z.depthFunc(519);break;case 2:z.depthFunc(513);break;case 3:z.depthFunc(515);break;
case 4:z.depthFunc(514);break;case 5:z.depthFunc(518);break;case 6:z.depthFunc(516);break;case 7:z.depthFunc(517);break;default:z.depthFunc(515)}else z.depthFunc(515);ff=lf}},setLocked:function(lf){Kc=lf},setClear:function(lf){tg!==lf&&(z.clearDepth(lf),tg=lf)},reset:function(){Kc=!1;tg=ff=Ne=null}}},ub=new function(){var Kc=!1,Ne=null,ff=null,tg=null,lf=null,Gh=null,Lh=null,Ai=null,Bi=null;return{setTest:function(Ij){Kc||(Ij?B(2960):G(2960))},setMask:function(Ij){Ne===Ij||Kc||(z.stencilMask(Ij),
Ne=Ij)},setFunc:function(Ij,lh,ee){if(ff!==Ij||tg!==lh||lf!==ee)z.stencilFunc(Ij,lh,ee),ff=Ij,tg=lh,lf=ee},setOp:function(Ij,lh,ee){if(Gh!==Ij||Lh!==lh||Ai!==ee)z.stencilOp(Ij,lh,ee),Gh=Ij,Lh=lh,Ai=ee},setLocked:function(Ij){Kc=Ij},setClear:function(Ij){Bi!==Ij&&(z.clearStencil(Ij),Bi=Ij)},reset:function(){Kc=!1;Bi=Ai=Lh=Gh=lf=tg=ff=Ne=null}}},nb={},ec=null,gc=!1,Ac=null,Lc=null,ld=null,cd=null,Nc=null,Oc=null,jd=null,Ed=!1,Ad=null,de=null,rf=null,md=null,qd=null,Pd=z.getParameter(35661),kg=!1,Me=
0;Me=z.getParameter(7938);-1!==Me.indexOf("WebGL")?(Me=parseFloat(/^WebGL (\d)/.exec(Me)[1]),kg=1<=Me):-1!==Me.indexOf("OpenGL ES")&&(Me=parseFloat(/^OpenGL ES (\d)/.exec(Me)[1]),kg=2<=Me);var pg=null,Hh={},Li=new Ck,$k=new Ck,nc={};nc[3553]=u(3553,3553,1);nc[34067]=u(34067,34069,6);Ra.setClear(0,0,0,1);Ua.setClear(1);ub.setClear(0);B(2929);Ua.setFunc(3);O(!1);U(1);B(2884);K(0);var Sc=(qa={},qa[100]=32774,qa[101]=32778,qa[102]=32779,qa);t?(Sc[103]=32775,Sc[104]=32776):(D=D.get("EXT_blend_minmax"),
null!==D&&(Sc[103]=D.MIN_EXT,Sc[104]=D.MAX_EXT));var Td=(Ea={},Ea[200]=0,Ea[201]=1,Ea[202]=768,Ea[204]=770,Ea[210]=776,Ea[208]=774,Ea[206]=772,Ea[203]=769,Ea[205]=771,Ea[209]=775,Ea[207]=773,Ea);return{buffers:{color:Ra,depth:Ua,stencil:ub},enable:B,disable:G,useProgram:function(Kc){return ec!==Kc?(z.useProgram(Kc),ec=Kc,!0):!1},setBlending:K,setMaterial:function(Kc,Ne){2===Kc.side?G(2884):B(2884);var ff=1===Kc.side;Ne&&(ff=!ff);O(ff);1===Kc.blending&&!1===Kc.transparent?K(0):K(Kc.blending,Kc.blendEquation,
Kc.blendSrc,Kc.blendDst,Kc.blendEquationAlpha,Kc.blendSrcAlpha,Kc.blendDstAlpha,Kc.premultipliedAlpha);Ua.setFunc(Kc.depthFunc);Ua.setTest(Kc.depthTest);Ua.setMask(Kc.depthWrite);Ra.setMask(Kc.colorWrite);Ne=Kc.stencilWrite;ub.setTest(Ne);Ne&&(ub.setMask(Kc.stencilWriteMask),ub.setFunc(Kc.stencilFunc,Kc.stencilRef,Kc.stencilFuncMask),ub.setOp(Kc.stencilFail,Kc.stencilZFail,Kc.stencilZPass));V(Kc.polygonOffset,Kc.polygonOffsetFactor,Kc.polygonOffsetUnits)},setFlipSided:O,setCullFace:U,setLineWidth:function(Kc){Kc!==
rf&&(kg&&z.lineWidth(Kc),rf=Kc)},setPolygonOffset:V,setScissorTest:function(Kc){Kc?B(3089):G(3089)},activeTexture:ca,bindTexture:function(Kc,Ne){null===pg&&ca();var ff=Hh[pg];void 0===ff&&(ff={type:void 0,texture:void 0},Hh[pg]=ff);if(ff.type!==Kc||ff.texture!==Ne)z.bindTexture(Kc,Ne||nc[Kc]),ff.type=Kc,ff.texture=Ne},unbindTexture:function(){var Kc=Hh[pg];void 0!==Kc&&void 0!==Kc.type&&(z.bindTexture(Kc.type,null),Kc.type=void 0,Kc.texture=void 0)},compressedTexImage2D:function(){try{z.compressedTexImage2D.apply(z,
arguments)}catch(Kc){console.error("THREE.WebGLState:",Kc)}},texImage2D:function(){try{z.texImage2D.apply(z,arguments)}catch(Kc){console.error("THREE.WebGLState:",Kc)}},texImage3D:function(){try{z.texImage3D.apply(z,arguments)}catch(Kc){console.error("THREE.WebGLState:",Kc)}},scissor:function(Kc){!1===Li.equals(Kc)&&(z.scissor(Kc.x,Kc.y,Kc.z,Kc.w),Li.copy(Kc))},viewport:function(Kc){!1===$k.equals(Kc)&&(z.viewport(Kc.x,Kc.y,Kc.z,Kc.w),$k.copy(Kc))},reset:function(){z.disable(3042);z.disable(2884);
z.disable(2929);z.disable(32823);z.disable(3089);z.disable(2960);z.blendEquation(32774);z.blendFunc(1,0);z.blendFuncSeparate(1,0,1,0);z.colorMask(!0,!0,!0,!0);z.clearColor(0,0,0,0);z.depthMask(!0);z.depthFunc(513);z.clearDepth(1);z.stencilMask(4294967295);z.stencilFunc(519,0,4294967295);z.stencilOp(7680,7680,7680);z.clearStencil(0);z.cullFace(1029);z.frontFace(2305);z.polygonOffset(0,0);z.activeTexture(33984);z.useProgram(null);z.lineWidth(1);z.scissor(0,0,z.canvas.width,z.canvas.height);z.viewport(0,
0,z.canvas.width,z.canvas.height);nb={};pg=null;Hh={};ec=null;gc=!1;jd=Oc=Nc=cd=ld=Lc=Ac=null;Ed=!1;qd=md=rf=de=Ad=null;Ra.reset();Ua.reset();ub.reset()}}}function qya(z,D,t,u,B,G,K){function O(nc,Sc){return kg?new OffscreenCanvas(nc,Sc):document.createElementNS("http://www.w3.org/1999/xhtml","canvas")}function U(nc,Sc,Td,Kc){var Ne=1;if(nc.width>Kc||nc.height>Kc)Ne=Kc/Math.max(nc.width,nc.height);if(1>Ne||!0===Sc){if("undefined"!==typeof HTMLImageElement&&nc instanceof HTMLImageElement||"undefined"!==
typeof HTMLCanvasElement&&nc instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&nc instanceof ImageBitmap)return Kc=Sc?Fh.floorPowerOfTwo:Math.floor,Sc=Kc(Ne*nc.width),Ne=Kc(Ne*nc.height),void 0===Pd&&(Pd=O(Sc,Ne)),Td=Td?O(Sc,Ne):Pd,Td.width=Sc,Td.height=Ne,Td.getContext("2d").drawImage(nc,0,0,Sc,Ne),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+nc.width+"x"+nc.height+") to ("+Sc+"x"+Ne+")."),Td;"data"in nc&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+
nc.width+"x"+nc.height+").")}return nc}function V(nc){return Fh.isPowerOfTwo(nc.width)&&Fh.isPowerOfTwo(nc.height)}function ca(nc,Sc){return nc.generateMipmaps&&Sc&&1003!==nc.minFilter&&1006!==nc.minFilter}function qa(nc,Sc,Td,Kc){z.generateMipmap(nc);u.get(Sc).__maxMipLevel=Math.log2(Math.max(Td,Kc))}function Ea(nc,Sc,Td){if(!1===Ed)return Sc;if(null!==nc){if(void 0!==z[nc])return z[nc];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+nc+"'")}nc=Sc;6403===Sc&&
(5126===Td&&(nc=33326),5131===Td&&(nc=33325),5121===Td&&(nc=33321));6407===Sc&&(5126===Td&&(nc=34837),5131===Td&&(nc=34843),5121===Td&&(nc=32849));6408===Sc&&(5126===Td&&(nc=34836),5131===Td&&(nc=34842),5121===Td&&(nc=32856));33325!==nc&&33326!==nc&&34842!==nc&&34836!==nc||D.get("EXT_color_buffer_float");return nc}function Ra(nc){return 1003===nc||1004===nc||1005===nc?9728:9729}function Ua(nc){nc=nc.target;nc.removeEventListener("dispose",Ua);var Sc=u.get(nc);void 0!==Sc.__webglInit&&(z.deleteTexture(Sc.__webglTexture),
u.remove(nc));nc.isVideoTexture&&qd.delete(nc);K.memory.textures--}function ub(nc){nc=nc.target;nc.removeEventListener("dispose",ub);var Sc=nc.texture,Td=u.get(nc),Kc=u.get(Sc);if(nc){void 0!==Kc.__webglTexture&&z.deleteTexture(Kc.__webglTexture);nc.depthTexture&&nc.depthTexture.dispose();if(nc.isWebGLCubeRenderTarget)for(Kc=0;6>Kc;Kc++)z.deleteFramebuffer(Td.__webglFramebuffer[Kc]),Td.__webglDepthbuffer&&z.deleteRenderbuffer(Td.__webglDepthbuffer[Kc]);else z.deleteFramebuffer(Td.__webglFramebuffer),
Td.__webglDepthbuffer&&z.deleteRenderbuffer(Td.__webglDepthbuffer),Td.__webglMultisampledFramebuffer&&z.deleteFramebuffer(Td.__webglMultisampledFramebuffer),Td.__webglColorRenderbuffer&&z.deleteRenderbuffer(Td.__webglColorRenderbuffer),Td.__webglDepthRenderbuffer&&z.deleteRenderbuffer(Td.__webglDepthRenderbuffer);u.remove(Sc);u.remove(nc)}K.memory.textures--}function nb(nc,Sc){var Td=u.get(nc);if(nc.isVideoTexture){var Kc=K.render.frame;qd.get(nc)!==Kc&&(qd.set(nc,Kc),nc.update())}if(0<nc.version&&
Td.__version!==nc.version)if(Kc=nc.image,void 0===Kc)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");else if(!1===Kc.complete)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{Lc(Td,nc,Sc);return}t.activeTexture(33984+Sc);t.bindTexture(3553,Td.__webglTexture)}function ec(nc,Sc){var Td=u.get(nc);if(0<nc.version&&Td.__version!==nc.version){if(6===nc.image.length){Ac(Td,nc);t.activeTexture(33984+Sc);t.bindTexture(34067,Td.__webglTexture);
z.pixelStorei(37440,nc.flipY);z.pixelStorei(37441,nc.premultiplyAlpha);z.pixelStorei(3317,nc.unpackAlignment);z.pixelStorei(37443,0);var Kc=nc&&(nc.isCompressedTexture||nc.image[0].isCompressedTexture),Ne=nc.image[0]&&nc.image[0].isDataTexture;Sc=[];for(var ff=0;6>ff;ff++)Sc[ff]=Kc||Ne?Ne?nc.image[ff].image:nc.image[ff]:U(nc.image[ff],!1,!0,de);ff=Sc[0];var tg=V(ff)||Ed,lf=G.convert(nc.format),Gh=G.convert(nc.type),Lh=Ea(nc.internalFormat,lf,Gh);gc(34067,nc,tg);if(Kc){for(Ne=0;6>Ne;Ne++){var Ai=Sc[Ne].mipmaps;
for(Kc=0;Kc<Ai.length;Kc++){var Bi=Ai[Kc];1023!==nc.format&&1022!==nc.format?null!==lf?t.compressedTexImage2D(34069+Ne,Kc,Lh,Bi.width,Bi.height,0,Bi.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):t.texImage2D(34069+Ne,Kc,Lh,Bi.width,Bi.height,0,lf,Gh,Bi.data)}}Td.__maxMipLevel=Ai.length-1}else{Ai=nc.mipmaps;for(Kc=0;6>Kc;Kc++)if(Ne)for(t.texImage2D(34069+Kc,0,Lh,Sc[Kc].width,Sc[Kc].height,0,lf,Gh,Sc[Kc].data),Bi=0;Bi<Ai.length;Bi++){var Ij=
Ai[Bi].image[Kc].image;t.texImage2D(34069+Kc,Bi+1,Lh,Ij.width,Ij.height,0,lf,Gh,Ij.data)}else for(t.texImage2D(34069+Kc,0,Lh,lf,Gh,Sc[Kc]),Bi=0;Bi<Ai.length;Bi++)t.texImage2D(34069+Kc,Bi+1,Lh,lf,Gh,Ai[Bi].image[Kc]);Td.__maxMipLevel=Ai.length}ca(nc,tg)&&qa(34067,nc,ff.width,ff.height);Td.__version=nc.version;if(nc.onUpdate)nc.onUpdate(nc)}}else t.activeTexture(33984+Sc),t.bindTexture(34067,Td.__webglTexture)}function gc(nc,Sc,Td){Td?(z.texParameteri(nc,10242,pg[Sc.wrapS]),z.texParameteri(nc,10243,
pg[Sc.wrapT]),32879!==nc&&35866!==nc||z.texParameteri(nc,32882,pg[Sc.wrapR]),z.texParameteri(nc,10240,Hh[Sc.magFilter]),z.texParameteri(nc,10241,Hh[Sc.minFilter])):(z.texParameteri(nc,10242,33071),z.texParameteri(nc,10243,33071),32879!==nc&&35866!==nc||z.texParameteri(nc,32882,33071),1001===Sc.wrapS&&1001===Sc.wrapT||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),z.texParameteri(nc,10240,Ra(Sc.magFilter)),
z.texParameteri(nc,10241,Ra(Sc.minFilter)),1003!==Sc.minFilter&&1006!==Sc.minFilter&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter."));!0===D.has("EXT_texture_filter_anisotropic")&&(Td=D.get("EXT_texture_filter_anisotropic"),1015===Sc.type&&!1===D.has("OES_texture_float_linear")||!1===Ed&&1016===Sc.type&&!1===D.has("OES_texture_half_float_linear")||!(1<Sc.anisotropy||u.get(Sc).__currentAnisotropy)||(z.texParameterf(nc,
Td.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(Sc.anisotropy,B.getMaxAnisotropy())),u.get(Sc).__currentAnisotropy=Sc.anisotropy))}function Ac(nc,Sc){void 0===nc.__webglInit&&(nc.__webglInit=!0,Sc.addEventListener("dispose",Ua),nc.__webglTexture=z.createTexture(),K.memory.textures++)}function Lc(nc,Sc,Td){var Kc=3553;Sc.isDataTexture2DArray&&(Kc=35866);Sc.isDataTexture3D&&(Kc=32879);Ac(nc,Sc);t.activeTexture(33984+Td);t.bindTexture(Kc,nc.__webglTexture);z.pixelStorei(37440,Sc.flipY);z.pixelStorei(37441,Sc.premultiplyAlpha);
z.pixelStorei(3317,Sc.unpackAlignment);z.pixelStorei(37443,0);Td=Ed?!1:1001!==Sc.wrapS||1001!==Sc.wrapT||1003!==Sc.minFilter&&1006!==Sc.minFilter;Td=Td&&!1===V(Sc.image);Td=U(Sc.image,Td,!1,rf);var Ne=V(Td)||Ed,ff=G.convert(Sc.format),tg=G.convert(Sc.type),lf=Ea(Sc.internalFormat,ff,tg);gc(Kc,Sc,Ne);var Gh=Sc.mipmaps;if(Sc.isDepthTexture)lf=6402,Ed?lf=1015===Sc.type?36012:1014===Sc.type?33190:1020===Sc.type?35056:33189:1015===Sc.type&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),
1026===Sc.format&&6402===lf&&1012!==Sc.type&&1014!==Sc.type&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),Sc.type=1012,tg=G.convert(Sc.type)),1027===Sc.format&&6402===lf&&(lf=34041,1020!==Sc.type&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),Sc.type=1020,tg=G.convert(Sc.type))),t.texImage2D(3553,0,lf,Td.width,Td.height,0,ff,tg,null);else if(Sc.isDataTexture)if(0<Gh.length&&Ne){for(var Lh=
0,Ai=Gh.length;Lh<Ai;Lh++){var Bi=Gh[Lh];t.texImage2D(3553,Lh,lf,Bi.width,Bi.height,0,ff,tg,Bi.data)}Sc.generateMipmaps=!1;nc.__maxMipLevel=Gh.length-1}else t.texImage2D(3553,0,lf,Td.width,Td.height,0,ff,tg,Td.data),nc.__maxMipLevel=0;else if(Sc.isCompressedTexture){Lh=0;for(Ai=Gh.length;Lh<Ai;Lh++)Bi=Gh[Lh],1023!==Sc.format&&1022!==Sc.format?null!==ff?t.compressedTexImage2D(3553,Lh,lf,Bi.width,Bi.height,0,Bi.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):
t.texImage2D(3553,Lh,lf,Bi.width,Bi.height,0,ff,tg,Bi.data);nc.__maxMipLevel=Gh.length-1}else if(Sc.isDataTexture2DArray)t.texImage3D(35866,0,lf,Td.width,Td.height,Td.depth,0,ff,tg,Td.data),nc.__maxMipLevel=0;else if(Sc.isDataTexture3D)t.texImage3D(32879,0,lf,Td.width,Td.height,Td.depth,0,ff,tg,Td.data),nc.__maxMipLevel=0;else if(0<Gh.length&&Ne){Lh=0;for(Ai=Gh.length;Lh<Ai;Lh++)Bi=Gh[Lh],t.texImage2D(3553,Lh,lf,ff,tg,Bi);Sc.generateMipmaps=!1;nc.__maxMipLevel=Gh.length-1}else t.texImage2D(3553,0,
lf,ff,tg,Td),nc.__maxMipLevel=0;ca(Sc,Ne)&&qa(Kc,Sc,Td.width,Td.height);nc.__version=Sc.version;if(Sc.onUpdate)Sc.onUpdate(Sc)}function ld(nc,Sc,Td,Kc){var Ne=Sc.texture,ff=G.convert(Ne.format),tg=G.convert(Ne.type),lf=Ea(Ne.internalFormat,ff,tg);32879===Kc||35866===Kc?t.texImage3D(Kc,0,lf,Sc.width,Sc.height,Sc.depth,0,ff,tg,null):t.texImage2D(Kc,0,lf,Sc.width,Sc.height,0,ff,tg,null);z.bindFramebuffer(36160,nc);z.framebufferTexture2D(36160,Td,Kc,u.get(Ne).__webglTexture,0);z.bindFramebuffer(36160,
null)}function cd(nc,Sc,Td){z.bindRenderbuffer(36161,nc);if(Sc.depthBuffer&&!Sc.stencilBuffer){var Kc=33189;Td?((Td=Sc.depthTexture)&&Td.isDepthTexture&&(1015===Td.type?Kc=36012:1014===Td.type&&(Kc=33190)),Td=Nc(Sc),z.renderbufferStorageMultisample(36161,Td,Kc,Sc.width,Sc.height)):z.renderbufferStorage(36161,Kc,Sc.width,Sc.height);z.framebufferRenderbuffer(36160,36096,36161,nc)}else if(Sc.depthBuffer&&Sc.stencilBuffer)Td?(Td=Nc(Sc),z.renderbufferStorageMultisample(36161,Td,35056,Sc.width,Sc.height)):
z.renderbufferStorage(36161,34041,Sc.width,Sc.height),z.framebufferRenderbuffer(36160,33306,36161,nc);else{nc=Sc.texture;Kc=G.convert(nc.format);var Ne=G.convert(nc.type);nc=Ea(nc.internalFormat,Kc,Ne);Td?(Td=Nc(Sc),z.renderbufferStorageMultisample(36161,Td,nc,Sc.width,Sc.height)):z.renderbufferStorage(36161,nc,Sc.width,Sc.height)}z.bindRenderbuffer(36161,null)}function Nc(nc){return Ed&&nc.isWebGLMultisampleRenderTarget?Math.min(md,nc.samples):0}var Oc,jd,Ed=B.isWebGL2,Ad=B.maxTextures,de=B.maxCubemapSize,
rf=B.maxTextureSize,md=B.maxSamples,qd=new WeakMap,Pd,kg=!1;try{kg="undefined"!==typeof OffscreenCanvas&&null!==(new OffscreenCanvas(1,1)).getContext("2d")}catch(nc){}var Me=0,pg=(Oc={},Oc[1E3]=10497,Oc[1001]=33071,Oc[1002]=33648,Oc),Hh=(jd={},jd[1003]=9728,jd[1004]=9984,jd[1005]=9986,jd[1006]=9729,jd[1007]=9985,jd[1008]=9987,jd),Li=!1,$k=!1;(this||q).allocateTextureUnit=function(){var nc=Me;nc>=Ad&&console.warn("THREE.WebGLTextures: Trying to use "+nc+" texture units while this GPU supports only "+
Ad);Me+=1;return nc};(this||q).resetTextureUnits=function(){Me=0};(this||q).setTexture2D=nb;(this||q).setTexture2DArray=function(nc,Sc){var Td=u.get(nc);0<nc.version&&Td.__version!==nc.version?Lc(Td,nc,Sc):(t.activeTexture(33984+Sc),t.bindTexture(35866,Td.__webglTexture))};(this||q).setTexture3D=function(nc,Sc){var Td=u.get(nc);0<nc.version&&Td.__version!==nc.version?Lc(Td,nc,Sc):(t.activeTexture(33984+Sc),t.bindTexture(32879,Td.__webglTexture))};(this||q).setTextureCube=ec;(this||q).setupRenderTarget=
function(nc){var Sc=nc.texture,Td=u.get(nc),Kc=u.get(Sc);nc.addEventListener("dispose",ub);Kc.__webglTexture=z.createTexture();K.memory.textures++;var Ne=!0===nc.isWebGLCubeRenderTarget,ff=!0===nc.isWebGLMultisampleRenderTarget,tg=Sc.isDataTexture3D||Sc.isDataTexture2DArray,lf=V(nc)||Ed;!Ed||1022!==Sc.format||1015!==Sc.type&&1016!==Sc.type||(Sc.format=1023,console.warn("THREE.WebGLRenderer: Rendering to textures with RGB format is not supported. Using RGBA format instead."));if(Ne)for(Td.__webglFramebuffer=
[],ff=0;6>ff;ff++)Td.__webglFramebuffer[ff]=z.createFramebuffer();else if(Td.__webglFramebuffer=z.createFramebuffer(),ff)if(Ed){Td.__webglMultisampledFramebuffer=z.createFramebuffer();Td.__webglColorRenderbuffer=z.createRenderbuffer();z.bindRenderbuffer(36161,Td.__webglColorRenderbuffer);ff=G.convert(Sc.format);var Gh=G.convert(Sc.type);ff=Ea(Sc.internalFormat,ff,Gh);Gh=Nc(nc);z.renderbufferStorageMultisample(36161,Gh,ff,nc.width,nc.height);z.bindFramebuffer(36160,Td.__webglMultisampledFramebuffer);
z.framebufferRenderbuffer(36160,36064,36161,Td.__webglColorRenderbuffer);z.bindRenderbuffer(36161,null);nc.depthBuffer&&(Td.__webglDepthRenderbuffer=z.createRenderbuffer(),cd(Td.__webglDepthRenderbuffer,nc,!0));z.bindFramebuffer(36160,null)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.");if(Ne){t.bindTexture(34067,Kc.__webglTexture);gc(34067,Sc,lf);for(Kc=0;6>Kc;Kc++)ld(Td.__webglFramebuffer[Kc],nc,36064,34069+Kc);ca(Sc,lf)&&qa(34067,Sc,nc.width,
nc.height);t.bindTexture(34067,null)}else Ne=3553,tg&&(Ed?Ne=Sc.isDataTexture3D?32879:35866:console.warn("THREE.DataTexture3D and THREE.DataTexture2DArray only supported with WebGL2.")),t.bindTexture(Ne,Kc.__webglTexture),gc(Ne,Sc,lf),ld(Td.__webglFramebuffer,nc,36064,Ne),ca(Sc,lf)&&qa(3553,Sc,nc.width,nc.height),t.bindTexture(3553,null);if(nc.depthBuffer){Sc=u.get(nc);Td=!0===nc.isWebGLCubeRenderTarget;if(nc.depthTexture){if(Td)throw Error("target.depthTexture not supported in Cube render targets");
if(nc&&nc.isWebGLCubeRenderTarget)throw Error("Depth Texture with cube render targets is not supported");z.bindFramebuffer(36160,Sc.__webglFramebuffer);if(!nc.depthTexture||!nc.depthTexture.isDepthTexture)throw Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");u.get(nc.depthTexture).__webglTexture&&nc.depthTexture.image.width===nc.width&&nc.depthTexture.image.height===nc.height||(nc.depthTexture.image.width=nc.width,nc.depthTexture.image.height=nc.height,nc.depthTexture.needsUpdate=
!0);nb(nc.depthTexture,0);Sc=u.get(nc.depthTexture).__webglTexture;if(1026===nc.depthTexture.format)z.framebufferTexture2D(36160,36096,3553,Sc,0);else if(1027===nc.depthTexture.format)z.framebufferTexture2D(36160,33306,3553,Sc,0);else throw Error("Unknown depthTexture format");}else if(Td)for(Sc.__webglDepthbuffer=[],Td=0;6>Td;Td++)z.bindFramebuffer(36160,Sc.__webglFramebuffer[Td]),Sc.__webglDepthbuffer[Td]=z.createRenderbuffer(),cd(Sc.__webglDepthbuffer[Td],nc,!1);else z.bindFramebuffer(36160,Sc.__webglFramebuffer),
Sc.__webglDepthbuffer=z.createRenderbuffer(),cd(Sc.__webglDepthbuffer,nc,!1);z.bindFramebuffer(36160,null)}};(this||q).updateRenderTargetMipmap=function(nc){var Sc=nc.texture,Td=V(nc)||Ed;if(ca(Sc,Td)){Td=nc.isWebGLCubeRenderTarget?34067:3553;var Kc=u.get(Sc).__webglTexture;t.bindTexture(Td,Kc);qa(Td,Sc,nc.width,nc.height);t.bindTexture(Td,null)}};(this||q).updateMultisampleRenderTarget=function(nc){if(nc.isWebGLMultisampleRenderTarget)if(Ed){var Sc=u.get(nc);z.bindFramebuffer(36008,Sc.__webglMultisampledFramebuffer);
z.bindFramebuffer(36009,Sc.__webglFramebuffer);var Td=nc.width,Kc=nc.height,Ne=16384;nc.depthBuffer&&(Ne|=256);nc.stencilBuffer&&(Ne|=1024);z.blitFramebuffer(0,0,Td,Kc,0,0,Td,Kc,Ne,9728);z.bindFramebuffer(36160,Sc.__webglMultisampledFramebuffer)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.")};(this||q).safeSetTexture2D=function(nc,Sc){nc&&nc.isWebGLRenderTarget&&(!1===Li&&(console.warn("THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead."),
Li=!0),nc=nc.texture);nb(nc,Sc)};(this||q).safeSetTextureCube=function(nc,Sc){nc&&nc.isWebGLCubeRenderTarget&&(!1===$k&&(console.warn("THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead."),$k=!0),nc=nc.texture);ec(nc,Sc)}}function fea(z,D,t){var u=t.isWebGL2;return{convert:function(B){if(1009===B)return 5121;if(1017===B)return 32819;if(1018===B)return 32820;if(1019===B)return 33635;if(1010===B)return 5120;if(1011===B)return 5122;
if(1012===B)return 5123;if(1013===B)return 5124;if(1014===B)return 5125;if(1015===B)return 5126;if(1016===B){if(u)return 5131;var G=D.get("OES_texture_half_float");return null!==G?G.HALF_FLOAT_OES:null}if(1021===B)return 6406;if(1022===B)return 6407;if(1023===B)return 6408;if(1024===B)return 6409;if(1025===B)return 6410;if(1026===B)return 6402;if(1027===B)return 34041;if(1028===B)return 6403;if(1029===B)return 36244;if(1030===B)return 33319;if(1031===B)return 33320;if(1032===B)return 36248;if(1033===
B)return 36249;if(33776===B||33777===B||33778===B||33779===B)if(G=D.get("WEBGL_compressed_texture_s3tc"),null!==G){if(33776===B)return G.COMPRESSED_RGB_S3TC_DXT1_EXT;if(33777===B)return G.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(33778===B)return G.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(33779===B)return G.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(35840===B||35841===B||35842===B||35843===B)if(G=D.get("WEBGL_compressed_texture_pvrtc"),null!==G){if(35840===B)return G.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(35841===
B)return G.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(35842===B)return G.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(35843===B)return G.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(36196===B)return G=D.get("WEBGL_compressed_texture_etc1"),null!==G?G.COMPRESSED_RGB_ETC1_WEBGL:null;if(37492===B||37496===B)if(G=D.get("WEBGL_compressed_texture_etc"),null!==G){if(37492===B)return G.COMPRESSED_RGB8_ETC2;if(37496===B)return G.COMPRESSED_RGBA8_ETC2_EAC}if(37808===B||37809===B||37810===B||37811===B||37812===B||37813===
B||37814===B||37815===B||37816===B||37817===B||37818===B||37819===B||37820===B||37821===B||37840===B||37841===B||37842===B||37843===B||37844===B||37845===B||37846===B||37847===B||37848===B||37849===B||37850===B||37851===B||37852===B||37853===B)return G=D.get("WEBGL_compressed_texture_astc"),null!==G?B:null;if(36492===B)return G=D.get("EXT_texture_compression_bptc"),null!==G?B:null;if(1020===B){if(u)return 34042;G=D.get("WEBGL_depth_texture");return null!==G?G.UNSIGNED_INT_24_8_WEBGL:null}}}}function ZQ(z){void 0===
z&&(z=[]);Gb.call(this||q);(this||q).cameras=z}function WJ(){(this||q)._targetRay=null;(this||q)._grip=null;(this||q)._hand=null}function gea(z,D){function t(Oc){var jd=Ra.get(Oc.inputSource);jd&&jd.dispatchEvent({type:Oc.type,data:Oc.inputSource})}function u(){Ra.forEach(function(Oc,jd){Oc.disconnect(jd)});Ra.clear();Ac=gc=null;z.setFramebuffer(null);z.setRenderTarget(z.getRenderTarget());Nc.stop();K.isPresenting=!1;K.dispatchEvent({type:"sessionend"})}function B(Oc){for(var jd=O.inputSources,Ed=
0;Ed<Ea.length;Ed++)Ra.set(jd[Ed],Ea[Ed]);for(jd=0;jd<Oc.removed.length;jd++){Ed=Oc.removed[jd];var Ad=Ra.get(Ed);Ad&&(Ad.dispatchEvent({type:"disconnected",data:Ed}),Ra.delete(Ed))}for(jd=0;jd<Oc.added.length;jd++)Ed=Oc.added[jd],(Ad=Ra.get(Ed))&&Ad.dispatchEvent({type:"connected",data:Ed})}function G(Oc,jd){null===jd?Oc.matrixWorld.copy(Oc.matrix):Oc.matrixWorld.multiplyMatrices(jd.matrixWorld,Oc.matrix);Oc.matrixWorldInverse.copy(Oc.matrixWorld).invert()}var K=this||q,O=null,U=1,V=null,ca="local-floor",
qa=null,Ea=[],Ra=new Map,Ua=new Gb;Ua.layers.enable(1);Ua.viewport=new Ck;var ub=new Gb;ub.layers.enable(2);ub.viewport=new Ck;var nb=[Ua,ub],ec=new ZQ;ec.layers.enable(1);ec.layers.enable(2);var gc=null,Ac=null;(this||q).enabled=!1;(this||q).isPresenting=!1;(this||q).getController=function(Oc){var jd=Ea[Oc];void 0===jd&&(jd=new WJ,Ea[Oc]=jd);return jd.getTargetRaySpace()};(this||q).getControllerGrip=function(Oc){var jd=Ea[Oc];void 0===jd&&(jd=new WJ,Ea[Oc]=jd);return jd.getGripSpace()};(this||q).getHand=
function(Oc){var jd=Ea[Oc];void 0===jd&&(jd=new WJ,Ea[Oc]=jd);return jd.getHandSpace()};(this||q).setFramebufferScaleFactor=function(Oc){U=Oc;!0===K.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")};(this||q).setReferenceSpaceType=function(Oc){ca=Oc;!0===K.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")};(this||q).getReferenceSpace=function(){return V};(this||q).getSession=function(){return O};
(this||q).setSession=function(){var Oc=a(b.mark(function Ad(Ed){var de,rf,md;return b.wrap(function(qd){for(;;)switch(qd.prev=qd.next){case 0:O=Ed;if(null===O){qd.next=24;break}O.addEventListener("select",t);O.addEventListener("selectstart",t);O.addEventListener("selectend",t);O.addEventListener("squeeze",t);O.addEventListener("squeezestart",t);O.addEventListener("squeezeend",t);O.addEventListener("end",u);O.addEventListener("inputsourceschange",B);de=D.getContextAttributes();if(!0===de.xrCompatible){qd.next=
14;break}qd.next=14;return D.makeXRCompatible();case 14:return rf={antialias:de.antialias,alpha:de.alpha,depth:de.depth,stencil:de.stencil,framebufferScaleFactor:U},md=new XRWebGLLayer(O,D,rf),O.updateRenderState({baseLayer:md}),qd.next=19,O.requestReferenceSpace(ca);case 19:V=qd.sent,Nc.setContext(O),Nc.start(),K.isPresenting=!0,K.dispatchEvent({type:"sessionstart"});case 24:case "end":return qd.stop()}},Ad)}));return function(Ed){return Oc.apply(this||q,arguments)}}();var Lc=new cc,ld=new cc;(this||
q).getCamera=function(Oc){ec.near=ub.near=Ua.near=Oc.near;ec.far=ub.far=Ua.far=Oc.far;if(gc!==ec.near||Ac!==ec.far)O.updateRenderState({depthNear:ec.near,depthFar:ec.far}),gc=ec.near,Ac=ec.far;var jd=Oc.parent,Ed=ec.cameras;G(ec,jd);for(var Ad=0;Ad<Ed.length;Ad++)G(Ed[Ad],jd);Oc.matrixWorld.copy(ec.matrixWorld);Oc.matrix.copy(ec.matrix);Oc.matrix.decompose(Oc.position,Oc.quaternion,Oc.scale);Oc=Oc.children;jd=0;for(Ad=Oc.length;jd<Ad;jd++)Oc[jd].updateMatrixWorld(!0);if(2===Ed.length){Lc.setFromMatrixPosition(Ua.matrixWorld);
ld.setFromMatrixPosition(ub.matrixWorld);Ed=Lc.distanceTo(ld);var de=Ua.projectionMatrix.elements,rf=ub.projectionMatrix.elements,md=de[14]/(de[10]-1);Oc=de[14]/(de[10]+1);jd=(de[9]+1)/de[5];Ad=(de[9]-1)/de[5];var qd=(de[8]-1)/de[0],Pd=(rf[8]+1)/rf[0];rf=md*qd;de=md*Pd;Pd=Ed/(-qd+Pd);qd=Pd*-qd;Ua.matrixWorld.decompose(ec.position,ec.quaternion,ec.scale);ec.translateX(qd);ec.translateZ(Pd);ec.matrixWorld.compose(ec.position,ec.quaternion,ec.scale);ec.matrixWorldInverse.copy(ec.matrixWorld).invert();
md+=Pd;Pd=Oc+Pd;ec.projectionMatrix.makePerspective(rf-qd,de+(Ed-qd),jd*Oc/Pd*md,Ad*Oc/Pd*md,md,Pd)}else ec.projectionMatrix.copy(Ua.projectionMatrix);return ec};var cd=null,Nc=new dd;Nc.setAnimationLoop(function(Oc,jd){qa=jd.getViewerPose(V);if(null!==qa){var Ed=qa.views,Ad=O.renderState.baseLayer;z.setFramebuffer(Ad.framebuffer);var de=!1;Ed.length!==ec.cameras.length&&(ec.cameras.length=0,de=!0);for(var rf=0;rf<Ed.length;rf++){var md=Ed[rf],qd=Ad.getViewport(md),Pd=nb[rf];Pd.matrix.fromArray(md.transform.matrix);
Pd.projectionMatrix.fromArray(md.projectionMatrix);Pd.viewport.set(qd.x,qd.y,qd.width,qd.height);0===rf&&ec.matrix.copy(Pd.matrix);!0===de&&ec.cameras.push(Pd)}}Ed=O.inputSources;for(Ad=0;Ad<Ea.length;Ad++)Ea[Ad].update(Ed[Ad],jd,V);cd&&cd(Oc,jd)});(this||q).setAnimationLoop=function(Oc){cd=Oc};(this||q).dispose=function(){}}function rya(z){function D(u,B){u.opacity.value=B.opacity;B.color&&u.diffuse.value.copy(B.color);B.emissive&&u.emissive.value.copy(B.emissive).multiplyScalar(B.emissiveIntensity);
B.map&&(u.map.value=B.map);B.alphaMap&&(u.alphaMap.value=B.alphaMap);B.specularMap&&(u.specularMap.value=B.specularMap);var G=z.get(B).envMap;G&&(u.envMap.value=G,u.flipEnvMap.value=G.isCubeTexture&&G._needsFlipEnvMap?-1:1,u.reflectivity.value=B.reflectivity,u.refractionRatio.value=B.refractionRatio,G=z.get(G).__maxMipLevel,void 0!==G&&(u.maxMipLevel.value=G));B.lightMap&&(u.lightMap.value=B.lightMap,u.lightMapIntensity.value=B.lightMapIntensity);B.aoMap&&(u.aoMap.value=B.aoMap,u.aoMapIntensity.value=
B.aoMapIntensity);if(B.map)var K=B.map;else B.specularMap?K=B.specularMap:B.displacementMap?K=B.displacementMap:B.normalMap?K=B.normalMap:B.bumpMap?K=B.bumpMap:B.roughnessMap?K=B.roughnessMap:B.metalnessMap?K=B.metalnessMap:B.alphaMap?K=B.alphaMap:B.emissiveMap?K=B.emissiveMap:B.clearcoatMap?K=B.clearcoatMap:B.clearcoatNormalMap?K=B.clearcoatNormalMap:B.clearcoatRoughnessMap&&(K=B.clearcoatRoughnessMap);void 0!==K&&(K.isWebGLRenderTarget&&(K=K.texture),!0===K.matrixAutoUpdate&&K.updateMatrix(),u.uvTransform.value.copy(K.matrix));
if(B.aoMap)var O=B.aoMap;else B.lightMap&&(O=B.lightMap);void 0!==O&&(O.isWebGLRenderTarget&&(O=O.texture),!0===O.matrixAutoUpdate&&O.updateMatrix(),u.uv2Transform.value.copy(O.matrix))}function t(u,B){u.roughness.value=B.roughness;u.metalness.value=B.metalness;B.roughnessMap&&(u.roughnessMap.value=B.roughnessMap);B.metalnessMap&&(u.metalnessMap.value=B.metalnessMap);B.emissiveMap&&(u.emissiveMap.value=B.emissiveMap);B.bumpMap&&(u.bumpMap.value=B.bumpMap,u.bumpScale.value=B.bumpScale,1===B.side&&
(u.bumpScale.value*=-1));B.normalMap&&(u.normalMap.value=B.normalMap,u.normalScale.value.copy(B.normalScale),1===B.side&&u.normalScale.value.negate());B.displacementMap&&(u.displacementMap.value=B.displacementMap,u.displacementScale.value=B.displacementScale,u.displacementBias.value=B.displacementBias);z.get(B).envMap&&(u.envMapIntensity.value=B.envMapIntensity)}return{refreshFogUniforms:function(u,B){u.fogColor.value.copy(B.color);B.isFog?(u.fogNear.value=B.near,u.fogFar.value=B.far):B.isFogExp2&&
(u.fogDensity.value=B.density)},refreshMaterialUniforms:function(u,B,G,K){if(B.isMeshBasicMaterial)D(u,B);else if(B.isMeshLambertMaterial)D(u,B),B.emissiveMap&&(u.emissiveMap.value=B.emissiveMap);else if(B.isMeshToonMaterial)D(u,B),B.gradientMap&&(u.gradientMap.value=B.gradientMap),B.emissiveMap&&(u.emissiveMap.value=B.emissiveMap),B.bumpMap&&(u.bumpMap.value=B.bumpMap,u.bumpScale.value=B.bumpScale,1===B.side&&(u.bumpScale.value*=-1)),B.normalMap&&(u.normalMap.value=B.normalMap,u.normalScale.value.copy(B.normalScale),
1===B.side&&u.normalScale.value.negate()),B.displacementMap&&(u.displacementMap.value=B.displacementMap,u.displacementScale.value=B.displacementScale,u.displacementBias.value=B.displacementBias);else if(B.isMeshPhongMaterial)D(u,B),u.specular.value.copy(B.specular),u.shininess.value=Math.max(B.shininess,1E-4),B.emissiveMap&&(u.emissiveMap.value=B.emissiveMap),B.bumpMap&&(u.bumpMap.value=B.bumpMap,u.bumpScale.value=B.bumpScale,1===B.side&&(u.bumpScale.value*=-1)),B.normalMap&&(u.normalMap.value=B.normalMap,
u.normalScale.value.copy(B.normalScale),1===B.side&&u.normalScale.value.negate()),B.displacementMap&&(u.displacementMap.value=B.displacementMap,u.displacementScale.value=B.displacementScale,u.displacementBias.value=B.displacementBias);else if(B.isMeshStandardMaterial)D(u,B),B.isMeshPhysicalMaterial?(t(u,B),u.reflectivity.value=B.reflectivity,u.clearcoat.value=B.clearcoat,u.clearcoatRoughness.value=B.clearcoatRoughness,B.sheen&&u.sheen.value.copy(B.sheen),B.clearcoatMap&&(u.clearcoatMap.value=B.clearcoatMap),
B.clearcoatRoughnessMap&&(u.clearcoatRoughnessMap.value=B.clearcoatRoughnessMap),B.clearcoatNormalMap&&(u.clearcoatNormalScale.value.copy(B.clearcoatNormalScale),u.clearcoatNormalMap.value=B.clearcoatNormalMap,1===B.side&&u.clearcoatNormalScale.value.negate()),u.transmission.value=B.transmission,B.transmissionMap&&(u.transmissionMap.value=B.transmissionMap)):t(u,B);else if(B.isMeshMatcapMaterial)D(u,B),B.matcap&&(u.matcap.value=B.matcap),B.bumpMap&&(u.bumpMap.value=B.bumpMap,u.bumpScale.value=B.bumpScale,
1===B.side&&(u.bumpScale.value*=-1)),B.normalMap&&(u.normalMap.value=B.normalMap,u.normalScale.value.copy(B.normalScale),1===B.side&&u.normalScale.value.negate()),B.displacementMap&&(u.displacementMap.value=B.displacementMap,u.displacementScale.value=B.displacementScale,u.displacementBias.value=B.displacementBias);else if(B.isMeshDepthMaterial)D(u,B),B.displacementMap&&(u.displacementMap.value=B.displacementMap,u.displacementScale.value=B.displacementScale,u.displacementBias.value=B.displacementBias);
else if(B.isMeshDistanceMaterial)D(u,B),B.displacementMap&&(u.displacementMap.value=B.displacementMap,u.displacementScale.value=B.displacementScale,u.displacementBias.value=B.displacementBias),u.referencePosition.value.copy(B.referencePosition),u.nearDistance.value=B.nearDistance,u.farDistance.value=B.farDistance;else if(B.isMeshNormalMaterial)D(u,B),B.bumpMap&&(u.bumpMap.value=B.bumpMap,u.bumpScale.value=B.bumpScale,1===B.side&&(u.bumpScale.value*=-1)),B.normalMap&&(u.normalMap.value=B.normalMap,
u.normalScale.value.copy(B.normalScale),1===B.side&&u.normalScale.value.negate()),B.displacementMap&&(u.displacementMap.value=B.displacementMap,u.displacementScale.value=B.displacementScale,u.displacementBias.value=B.displacementBias);else if(B.isLineBasicMaterial)u.diffuse.value.copy(B.color),u.opacity.value=B.opacity,B.isLineDashedMaterial&&(u.dashSize.value=B.dashSize,u.totalSize.value=B.dashSize+B.gapSize,u.scale.value=B.scale);else if(B.isPointsMaterial){u.diffuse.value.copy(B.color);u.opacity.value=
B.opacity;u.size.value=B.size*G;u.scale.value=.5*K;B.map&&(u.map.value=B.map);B.alphaMap&&(u.alphaMap.value=B.alphaMap);if(B.map)var O=B.map;else B.alphaMap&&(O=B.alphaMap);void 0!==O&&(!0===O.matrixAutoUpdate&&O.updateMatrix(),u.uvTransform.value.copy(O.matrix))}else if(B.isSpriteMaterial){u.diffuse.value.copy(B.color);u.opacity.value=B.opacity;u.rotation.value=B.rotation;B.map&&(u.map.value=B.map);B.alphaMap&&(u.alphaMap.value=B.alphaMap);if(B.map)var U=B.map;else B.alphaMap&&(U=B.alphaMap);void 0!==
U&&(!0===U.matrixAutoUpdate&&U.updateMatrix(),u.uvTransform.value.copy(U.matrix))}else B.isShadowMaterial?(u.color.value.copy(B.color),u.opacity.value=B.opacity):B.isShaderMaterial&&(B.uniformsNeedUpdate=!1)}}}function sya(){var z=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");z.style.display="block";return z}function al(z){function D(Xb,ce){for(var Wd=0;Wd<Xb.length;Wd++){var se=Ra.getContext(Xb[Wd],ce);if(null!==se)return se}return null}function t(){mh=new ud(ee);fi=new vb(ee,
mh,z);mh.init(fi);hv=new fea(ee,mh,fi);nh=new pya(ee,mh,fi);nh.scissor(Li.copy(tg).multiplyScalar(Td).floor());nh.viewport(Hh.copy(ff).multiplyScalar(Td).floor());pk=new Le(ee);qk=new Rc;Jj=new qya(ee,mh,nh,qk,fi,hv,pk);Yp=new vd(Ad);iv=new Gd(ee,fi);Rq=new Ga(ee,mh,iv,fi);XJ=new Jc(ee,iv,pk,Rq);hG=new hj(ee,XJ,iv,pk);hea=new pj(ee);jv=new Vb(qk);zD=new Db(Ad,Yp,mh,fi,Rq,jv);XZ=new rya(qk);$Q=new Cf(qk);aR=new wX(mh,fi);$A=new ma(Ad,Yp,nh,hG,Ac);iea=new Ja(ee,mh,pk,fi);jea=new Re(ee,mh,pk,fi);pk.programs=
zD.programs;Ad.capabilities=fi;Ad.extensions=mh;Ad.properties=qk;Ad.renderLists=$Q;Ad.state=nh;Ad.info=pk}function u(Xb){Xb.preventDefault();console.log("THREE.WebGLRenderer: Context Lost.");de=!0}function B(){console.log("THREE.WebGLRenderer: Context Restored.");de=!1;t()}function G(Xb){Xb=Xb.target;Xb.removeEventListener("dispose",G);K(Xb);qk.remove(Xb)}function K(Xb){Xb=qk.get(Xb).program;void 0!==Xb&&zD.releaseProgram(Xb)}function O(Xb,ce){Xb.render(function(Wd){Ad.renderBufferImmediate(Wd,ce)})}
function U(Xb,ce,Wd,se){if(!1!==Xb.visible){if(Xb.layers.test(ce.layers))if(Xb.isGroup)Wd=Xb.renderOrder;else if(Xb.isLOD)!0===Xb.autoUpdate&&Xb.update(ce);else if(Xb.isLight)Oc.pushLight(Xb),Xb.castShadow&&Oc.pushShadow(Xb);else if(Xb.isSprite){if(!Xb.frustumCulled||Gh.intersectsSprite(Xb)){se&&Ij.setFromMatrixPosition(Xb.matrixWorld).applyMatrix4(Bi);var vf=hG.update(Xb),fg=Xb.material;fg.visible&&Nc.push(Xb,vf,fg,Wd,Ij.z,null)}}else if(Xb.isImmediateRenderObject)se&&Ij.setFromMatrixPosition(Xb.matrixWorld).applyMatrix4(Bi),
Nc.push(Xb,null,Xb.material,Wd,Ij.z,null);else if(Xb.isMesh||Xb.isLine||Xb.isPoints)if(Xb.isSkinnedMesh&&Xb.skeleton.frame!==pk.render.frame&&(Xb.skeleton.update(),Xb.skeleton.frame=pk.render.frame),!Xb.frustumCulled||Gh.intersectsObject(Xb))if(se&&Ij.setFromMatrixPosition(Xb.matrixWorld).applyMatrix4(Bi),vf=hG.update(Xb),fg=Xb.material,Array.isArray(fg))for(var Mg=vf.groups,uj=0,kj=Mg.length;uj<kj;uj++){var im=Mg[uj],Kj=fg[im.materialIndex];Kj&&Kj.visible&&Nc.push(Xb,vf,Kj,Wd,Ij.z,im)}else fg.visible&&
Nc.push(Xb,vf,fg,Wd,Ij.z,null);Xb=Xb.children;vf=0;for(fg=Xb.length;vf<fg;vf++)U(Xb[vf],ce,Wd,se)}}function V(Xb,ce,Wd){for(var se=!0===ce.isScene?ce.overrideMaterial:null,vf=0,fg=Xb.length;vf<fg;vf++){var Mg=Xb[vf],uj=Mg.object,kj=Mg.geometry,im=null===se?Mg.material:se;Mg=Mg.group;if(Wd.isArrayCamera)for(var Kj=Wd.cameras,kv=0,YJ=Kj.length;kv<YJ;kv++){var iG=Kj[kv];uj.layers.test(iG.layers)&&(nh.viewport(Hh.copy(iG.viewport)),Oc.setupLightsView(iG),ca(uj,ce,iG,kj,im,Mg))}else ca(uj,ce,Wd,kj,im,
Mg)}}function ca(Xb,ce,Wd,se,vf,fg){Xb.onBeforeRender(Ad,ce,Wd,se,vf,fg);Xb.modelViewMatrix.multiplyMatrices(Wd.matrixWorldInverse,Xb.matrixWorld);Xb.normalMatrix.getNormalMatrix(Xb.modelViewMatrix);if(Xb.isImmediateRenderObject){var Mg=Ea(Wd,ce,vf,Xb);nh.setMaterial(vf);Rq.reset();O(Xb,Mg)}else Ad.renderBufferDirect(Wd,ce,se,vf,Xb,fg);Xb.onAfterRender(Ad,ce,Wd,se,vf,fg)}function qa(Xb,ce,Wd){!0!==ce.isScene&&(ce=lh);var se=qk.get(Xb),vf=Oc.state.lights,fg=vf.state.version;Wd=zD.getParameters(Xb,
vf.state,Oc.state.shadowsArray,ce,Wd);var Mg=zD.getProgramCacheKey(Wd),uj=se.program,kj=!0;se.environment=Xb.isMeshStandardMaterial?ce.environment:null;se.fog=ce.fog;se.envMap=Yp.get(Xb.envMap||se.environment);if(void 0===uj)Xb.addEventListener("dispose",G);else if(uj.cacheKey!==Mg)K(Xb);else{if(se.lightsStateVersion===fg&&void 0!==Wd.shaderID)return;kj=!1}kj&&(Wd.uniforms=zD.getUniforms(Xb),Xb.onBeforeCompile(Wd,Ad),uj=zD.acquireProgram(Wd,Mg),se.program=uj,se.uniforms=Wd.uniforms,se.outputEncoding=
Wd.outputEncoding);ce=se.uniforms;if(!Xb.isShaderMaterial&&!Xb.isRawShaderMaterial||!0===Xb.clipping)se.numClippingPlanes=jv.numPlanes,se.numIntersection=jv.numIntersection,ce.clippingPlanes=jv.uniform;se.needsLights=Xb.isMeshLambertMaterial||Xb.isMeshToonMaterial||Xb.isMeshPhongMaterial||Xb.isMeshStandardMaterial||Xb.isShadowMaterial||Xb.isShaderMaterial&&!0===Xb.lights;se.lightsStateVersion=fg;se.needsLights&&(ce.ambientLightColor.value=vf.state.ambient,ce.lightProbe.value=vf.state.probe,ce.directionalLights.value=
vf.state.directional,ce.directionalLightShadows.value=vf.state.directionalShadow,ce.spotLights.value=vf.state.spot,ce.spotLightShadows.value=vf.state.spotShadow,ce.rectAreaLights.value=vf.state.rectArea,ce.ltc_1.value=vf.state.rectAreaLTC1,ce.ltc_2.value=vf.state.rectAreaLTC2,ce.pointLights.value=vf.state.point,ce.pointLightShadows.value=vf.state.pointShadow,ce.hemisphereLights.value=vf.state.hemi,ce.directionalShadowMap.value=vf.state.directionalShadowMap,ce.directionalShadowMatrix.value=vf.state.directionalShadowMatrix,
ce.spotShadowMap.value=vf.state.spotShadowMap,ce.spotShadowMatrix.value=vf.state.spotShadowMatrix,ce.pointShadowMap.value=vf.state.pointShadowMap,ce.pointShadowMatrix.value=vf.state.pointShadowMatrix);Xb=se.program.getUniforms();Xb=Lw.seqWithValue(Xb.seq,ce);se.uniformsList=Xb}function Ea(Xb,ce,Wd,se){!0!==ce.isScene&&(ce=lh);Jj.resetTextureUnits();var vf=ce.fog,fg=Wd.isMeshStandardMaterial?ce.environment:null,Mg=null===Pd?Ad.outputEncoding:Pd.texture.encoding,uj=Yp.get(Wd.envMap||fg),kj=qk.get(Wd),
im=Oc.state.lights;!0!==Lh||!0!==Ai&&Xb===pg||jv.setState(Wd,Xb,Xb===pg&&Wd.id===Me);Wd.version===kj.__version?Wd.fog&&kj.fog!==vf?qa(Wd,ce,se):kj.environment!==fg?qa(Wd,ce,se):kj.needsLights&&kj.lightsStateVersion!==im.state.version?qa(Wd,ce,se):void 0===kj.numClippingPlanes||kj.numClippingPlanes===jv.numPlanes&&kj.numIntersection===jv.numIntersection?kj.outputEncoding!==Mg?qa(Wd,ce,se):kj.envMap!==uj&&qa(Wd,ce,se):qa(Wd,ce,se):(qa(Wd,ce,se),kj.__version=Wd.version);var Kj=!1;im=uj=!1;ce=kj.program;
fg=ce.getUniforms();Mg=kj.uniforms;nh.useProgram(ce.program)&&(im=uj=Kj=!0);Wd.id!==Me&&(Me=Wd.id,uj=!0);if(Kj||pg!==Xb){fg.setValue(ee,"projectionMatrix",Xb.projectionMatrix);fi.logarithmicDepthBuffer&&fg.setValue(ee,"logDepthBufFC",2/(Math.log(Xb.far+1)/Math.LN2));pg!==Xb&&(pg=Xb,im=uj=!0);if(Wd.isShaderMaterial||Wd.isMeshPhongMaterial||Wd.isMeshToonMaterial||Wd.isMeshStandardMaterial||Wd.envMap)Kj=fg.map.cameraPosition,void 0!==Kj&&Kj.setValue(ee,Ij.setFromMatrixPosition(Xb.matrixWorld));(Wd.isMeshPhongMaterial||
Wd.isMeshToonMaterial||Wd.isMeshLambertMaterial||Wd.isMeshBasicMaterial||Wd.isMeshStandardMaterial||Wd.isShaderMaterial)&&fg.setValue(ee,"isOrthographic",!0===Xb.isOrthographicCamera);(Wd.isMeshPhongMaterial||Wd.isMeshToonMaterial||Wd.isMeshLambertMaterial||Wd.isMeshBasicMaterial||Wd.isMeshStandardMaterial||Wd.isShaderMaterial||Wd.isShadowMaterial||Wd.skinning)&&fg.setValue(ee,"viewMatrix",Xb.matrixWorldInverse)}if(Wd.skinning&&(fg.setOptional(ee,se,"bindMatrix"),fg.setOptional(ee,se,"bindMatrixInverse"),
Xb=se.skeleton))if(Kj=Xb.bones,fi.floatVertexTextures){if(null===Xb.boneTexture){Kj=Math.sqrt(4*Kj.length);Kj=Fh.ceilPowerOfTwo(Kj);Kj=Math.max(Kj,4);var kv=new Float32Array(Kj*Kj*4);kv.set(Xb.boneMatrices);var YJ=new jG(kv,Kj,Kj,1023,1015);Xb.boneMatrices=kv;Xb.boneTexture=YJ;Xb.boneTextureSize=Kj}fg.setValue(ee,"boneTexture",Xb.boneTexture,Jj);fg.setValue(ee,"boneTextureSize",Xb.boneTextureSize)}else fg.setOptional(ee,Xb,"boneMatrices");if(uj||kj.receiveShadow!==se.receiveShadow)kj.receiveShadow=
se.receiveShadow,fg.setValue(ee,"receiveShadow",se.receiveShadow);uj&&(fg.setValue(ee,"toneMappingExposure",Ad.toneMappingExposure),kj.needsLights&&(Xb=im,Mg.ambientLightColor.needsUpdate=Xb,Mg.lightProbe.needsUpdate=Xb,Mg.directionalLights.needsUpdate=Xb,Mg.directionalLightShadows.needsUpdate=Xb,Mg.pointLights.needsUpdate=Xb,Mg.pointLightShadows.needsUpdate=Xb,Mg.spotLights.needsUpdate=Xb,Mg.spotLightShadows.needsUpdate=Xb,Mg.rectAreaLights.needsUpdate=Xb,Mg.hemisphereLights.needsUpdate=Xb),vf&&
Wd.fog&&XZ.refreshFogUniforms(Mg,vf),XZ.refreshMaterialUniforms(Mg,Wd,Td,Sc),Lw.upload(ee,kj.uniformsList,Mg,Jj));Wd.isShaderMaterial&&!0===Wd.uniformsNeedUpdate&&(Lw.upload(ee,kj.uniformsList,Mg,Jj),Wd.uniformsNeedUpdate=!1);Wd.isSpriteMaterial&&fg.setValue(ee,"center",se.center);fg.setValue(ee,"modelViewMatrix",se.modelViewMatrix);fg.setValue(ee,"normalMatrix",se.normalMatrix);fg.setValue(ee,"modelMatrix",se.matrixWorld);return ce}z=z||{};var Ra=void 0!==z.canvas?z.canvas:sya(),Ua=void 0!==z.context?
z.context:null,ub=void 0!==z.alpha?z.alpha:!1,nb=void 0!==z.depth?z.depth:!0,ec=void 0!==z.stencil?z.stencil:!0,gc=void 0!==z.antialias?z.antialias:!1,Ac=void 0!==z.premultipliedAlpha?z.premultipliedAlpha:!0,Lc=void 0!==z.preserveDrawingBuffer?z.preserveDrawingBuffer:!1,ld=void 0!==z.powerPreference?z.powerPreference:"default",cd=void 0!==z.failIfMajorPerformanceCaveat?z.failIfMajorPerformanceCaveat:!1,Nc=null,Oc=null,jd=[],Ed=[];(this||q).domElement=Ra;(this||q).debug={checkShaderErrors:!0};(this||
q).autoClear=!0;(this||q).autoClearColor=!0;(this||q).autoClearDepth=!0;(this||q).autoClearStencil=!0;(this||q).sortObjects=!0;(this||q).clippingPlanes=[];(this||q).localClippingEnabled=!1;(this||q).gammaFactor=2;(this||q).outputEncoding=3E3;(this||q).physicallyCorrectLights=!1;(this||q).toneMapping=0;(this||q).toneMappingExposure=1;(this||q).maxMorphTargets=8;(this||q).maxMorphNormals=4;var Ad=this||q,de=!1,rf=null,md=0,qd=0,Pd=null,kg=null,Me=-1,pg=null,Hh=new Ck,Li=new Ck,$k=null,nc=Ra.width,Sc=
Ra.height,Td=1,Kc=null,Ne=null,ff=new Ck(0,0,nc,Sc),tg=new Ck(0,0,nc,Sc),lf=!1,Gh=new VJ,Lh=!1,Ai=!1,Bi=new Ug,Ij=new cc,lh={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0},ee=Ua;try{Ua={alpha:ub,depth:nb,stencil:ec,antialias:gc,premultipliedAlpha:Ac,preserveDrawingBuffer:Lc,powerPreference:ld,failIfMajorPerformanceCaveat:cd};Ra.addEventListener("webglcontextlost",u,!1);Ra.addEventListener("webglcontextrestored",B,!1);if(null===ee&&(ub=["webgl2","webgl","experimental-webgl"],
!0===Ad.isWebGL1Renderer&&ub.shift(),ee=D(ub,Ua),null===ee)){if(D(ub))throw Error("Error creating WebGL context with your selected attributes.");throw Error("Error creating WebGL context.");}void 0===ee.getShaderPrecisionFormat&&(ee.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(Xb){throw console.error("THREE.WebGLRenderer: "+Xb.message),Xb;}var mh,fi,nh,pk,qk,Jj,Yp,iv,XJ,hG,zD,XZ,$Q,aR,jv,$A,hea,iea,jea,hv,Rq;t();var aB=new gea(Ad,ee);(this||q).xr=aB;var kea=
new eea(Ad,hG,fi.maxTextureSize);(this||q).shadowMap=kea;(this||q).getContext=function(){return ee};(this||q).getContextAttributes=function(){return ee.getContextAttributes()};(this||q).forceContextLoss=function(){var Xb=mh.get("WEBGL_lose_context");Xb&&Xb.loseContext()};(this||q).forceContextRestore=function(){var Xb=mh.get("WEBGL_lose_context");Xb&&Xb.restoreContext()};(this||q).getPixelRatio=function(){return Td};(this||q).setPixelRatio=function(Xb){void 0!==Xb&&(Td=Xb,this.setSize(nc,Sc,!1))};
(this||q).getSize=function(Xb){void 0===Xb&&(console.warn("WebGLRenderer: .getsize() now requires a Vector2 as an argument"),Xb=new We);return Xb.set(nc,Sc)};(this||q).setSize=function(Xb,ce,Wd){aB.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(nc=Xb,Sc=ce,Ra.width=Math.floor(Xb*Td),Ra.height=Math.floor(ce*Td),!1!==Wd&&(Ra.style.width=Xb+"px",Ra.style.height=ce+"px"),this.setViewport(0,0,Xb,ce))};(this||q).getDrawingBufferSize=function(Xb){void 0===
Xb&&(console.warn("WebGLRenderer: .getdrawingBufferSize() now requires a Vector2 as an argument"),Xb=new We);return Xb.set(nc*Td,Sc*Td).floor()};(this||q).setDrawingBufferSize=function(Xb,ce,Wd){nc=Xb;Sc=ce;Td=Wd;Ra.width=Math.floor(Xb*Wd);Ra.height=Math.floor(ce*Wd);this.setViewport(0,0,Xb,ce)};(this||q).getCurrentViewport=function(Xb){void 0===Xb&&(console.warn("WebGLRenderer: .getCurrentViewport() now requires a Vector4 as an argument"),Xb=new Ck);return Xb.copy(Hh)};(this||q).getViewport=function(Xb){return Xb.copy(ff)};
(this||q).setViewport=function(Xb,ce,Wd,se){Xb.isVector4?ff.set(Xb.x,Xb.y,Xb.z,Xb.w):ff.set(Xb,ce,Wd,se);nh.viewport(Hh.copy(ff).multiplyScalar(Td).floor())};(this||q).getScissor=function(Xb){return Xb.copy(tg)};(this||q).setScissor=function(Xb,ce,Wd,se){Xb.isVector4?tg.set(Xb.x,Xb.y,Xb.z,Xb.w):tg.set(Xb,ce,Wd,se);nh.scissor(Li.copy(tg).multiplyScalar(Td).floor())};(this||q).getScissorTest=function(){return lf};(this||q).setScissorTest=function(Xb){nh.setScissorTest(lf=Xb)};(this||q).setOpaqueSort=
function(Xb){Kc=Xb};(this||q).setTransparentSort=function(Xb){Ne=Xb};(this||q).getClearColor=function(Xb){void 0===Xb&&(console.warn("WebGLRenderer: .getClearColor() now requires a Color as an argument"),Xb=new jg);return Xb.copy($A.getClearColor())};(this||q).setClearColor=function(){$A.setClearColor.apply($A,arguments)};(this||q).getClearAlpha=function(){return $A.getClearAlpha()};(this||q).setClearAlpha=function(){$A.setClearAlpha.apply($A,arguments)};(this||q).clear=function(Xb,ce,Wd){var se=
0;if(void 0===Xb||Xb)se|=16384;if(void 0===ce||ce)se|=256;if(void 0===Wd||Wd)se|=1024;ee.clear(se)};(this||q).clearColor=function(){this.clear(!0,!1,!1)};(this||q).clearDepth=function(){this.clear(!1,!0,!1)};(this||q).clearStencil=function(){this.clear(!1,!1,!0)};(this||q).dispose=function(){Ra.removeEventListener("webglcontextlost",u,!1);Ra.removeEventListener("webglcontextrestored",B,!1);$Q.dispose();aR.dispose();qk.dispose();Yp.dispose();hG.dispose();Rq.dispose();aB.dispose();ZJ.stop()};(this||
q).renderBufferImmediate=function(Xb,ce){Rq.initAttributes();var Wd=qk.get(Xb);Xb.hasPositions&&!Wd.position&&(Wd.position=ee.createBuffer());Xb.hasNormals&&!Wd.normal&&(Wd.normal=ee.createBuffer());Xb.hasUvs&&!Wd.uv&&(Wd.uv=ee.createBuffer());Xb.hasColors&&!Wd.color&&(Wd.color=ee.createBuffer());ce=ce.getAttributes();Xb.hasPositions&&(ee.bindBuffer(34962,Wd.position),ee.bufferData(34962,Xb.positionArray,35048),Rq.enableAttribute(ce.position),ee.vertexAttribPointer(ce.position,3,5126,!1,0,0));Xb.hasNormals&&
(ee.bindBuffer(34962,Wd.normal),ee.bufferData(34962,Xb.normalArray,35048),Rq.enableAttribute(ce.normal),ee.vertexAttribPointer(ce.normal,3,5126,!1,0,0));Xb.hasUvs&&(ee.bindBuffer(34962,Wd.uv),ee.bufferData(34962,Xb.uvArray,35048),Rq.enableAttribute(ce.uv),ee.vertexAttribPointer(ce.uv,2,5126,!1,0,0));Xb.hasColors&&(ee.bindBuffer(34962,Wd.color),ee.bufferData(34962,Xb.colorArray,35048),Rq.enableAttribute(ce.color),ee.vertexAttribPointer(ce.color,3,5126,!1,0,0));Rq.disableUnusedAttributes();ee.drawArrays(4,
0,Xb.count);Xb.count=0};(this||q).renderBufferDirect=function(Xb,ce,Wd,se,vf,fg){null===ce&&(ce=lh);var Mg=vf.isMesh&&0>vf.matrixWorld.determinant();Xb=Ea(Xb,ce,se,vf);nh.setMaterial(se,Mg);Mg=Wd.index;ce=Wd.attributes.position;if(null===Mg){if(void 0===ce||0===ce.count)return}else if(0===Mg.count)return;var uj=1;!0===se.wireframe&&(Mg=XJ.getWireframeAttribute(Wd),uj=2);(se.morphTargets||se.morphNormals)&&hea.update(vf,Wd,se,Xb);Rq.setup(vf,se,Xb,Wd,Mg);Xb=iea;if(null!==Mg){var kj=iv.get(Mg);Xb=jea;
Xb.setIndex(kj)}var im=Wd.drawRange.start*uj,Kj=null!==fg?fg.start*uj:0;kj=Math.max(im,Kj);fg=Math.max(0,Math.min(null!==Mg?Mg.count:ce.count,im+Wd.drawRange.count*uj,Kj+(null!==fg?fg.count*uj:Infinity))-1-kj+1);0!==fg&&(vf.isMesh?!0===se.wireframe?(nh.setLineWidth(se.wireframeLinewidth*(null===Pd?Td:1)),Xb.setMode(1)):Xb.setMode(4):vf.isLine?(se=se.linewidth,void 0===se&&(se=1),nh.setLineWidth(se*(null===Pd?Td:1)),vf.isLineSegments?Xb.setMode(1):vf.isLineLoop?Xb.setMode(2):Xb.setMode(3)):vf.isPoints?
Xb.setMode(0):vf.isSprite&&Xb.setMode(4),vf.isInstancedMesh?Xb.renderInstances(kj,fg,vf.count):Wd.isInstancedBufferGeometry?Xb.renderInstances(kj,fg,Math.min(Wd.instanceCount,Wd._maxInstanceCount)):Xb.render(kj,fg))};(this||q).compile=function(Xb,ce){Oc=aR.get(Xb);Oc.init();Xb.traverseVisible(function(se){se.isLight&&se.layers.test(ce.layers)&&(Oc.pushLight(se),se.castShadow&&Oc.pushShadow(se))});Oc.setupLights();var Wd=new WeakMap;Xb.traverse(function(se){var vf=se.material;if(vf)if(Array.isArray(vf))for(var fg=
0;fg<vf.length;fg++){var Mg=vf[fg];!1===Wd.has(Mg)&&(qa(Mg,Xb,se),Wd.set(Mg))}else!1===Wd.has(vf)&&(qa(vf,Xb,se),Wd.set(vf))})};var YZ=null,ZJ=new dd;ZJ.setAnimationLoop(function(Xb){aB.isPresenting||YZ&&YZ(Xb)});"undefined"!==typeof window&&ZJ.setContext(window);(this||q).setAnimationLoop=function(Xb){YZ=Xb;aB.setAnimationLoop(Xb);null===Xb?ZJ.stop():ZJ.start()};(this||q).render=function(Xb,ce,Wd,se){if(void 0!==Wd){console.warn("THREE.WebGLRenderer.render(): the renderTarget argument has been removed. Use .setRenderTarget() instead.");
var vf=Wd}if(void 0!==se){console.warn("THREE.WebGLRenderer.render(): the forceClear argument has been removed. Use .clear() instead.");var fg=se}if(void 0!==ce&&!0!==ce.isCamera)console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");else if(!0!==de){Rq.resetDefaultState();Me=-1;pg=null;!0===Xb.autoUpdate&&Xb.updateMatrixWorld();null===ce.parent&&ce.updateMatrixWorld();!0===aB.enabled&&!0===aB.isPresenting&&(ce=aB.getCamera(ce));if(!0===Xb.isScene)Xb.onBeforeRender(Ad,
Xb,ce,vf||Pd);Oc=aR.get(Xb,Ed.length);Oc.init();Ed.push(Oc);Bi.multiplyMatrices(ce.projectionMatrix,ce.matrixWorldInverse);Gh.setFromProjectionMatrix(Bi);Ai=(this||q).localClippingEnabled;Lh=jv.init((this||q).clippingPlanes,Ai,ce);Nc=$Q.get(Xb,jd.length);Nc.init();jd.push(Nc);U(Xb,ce,0,Ad.sortObjects);Nc.finish();!0===Ad.sortObjects&&Nc.sort(Kc,Ne);!0===Lh&&jv.beginShadows();kea.render(Oc.state.shadowsArray,Xb,ce);Oc.setupLights();Oc.setupLightsView(ce);!0===Lh&&jv.endShadows();!0===(this||q).info.autoReset&&
(this||q).info.reset();void 0!==vf&&this.setRenderTarget(vf);$A.render(Nc,Xb,ce,fg);Wd=Nc.opaque;se=Nc.transparent;0<Wd.length&&V(Wd,Xb,ce);0<se.length&&V(se,Xb,ce);if(!0===Xb.isScene)Xb.onAfterRender(Ad,Xb,ce);null!==Pd&&(Jj.updateRenderTargetMipmap(Pd),Jj.updateMultisampleRenderTarget(Pd));nh.buffers.depth.setTest(!0);nh.buffers.depth.setMask(!0);nh.buffers.color.setMask(!0);nh.setPolygonOffset(!1);Ed.pop();Oc=0<Ed.length?Ed[Ed.length-1]:null;jd.pop();Nc=0<jd.length?jd[jd.length-1]:null}};(this||
q).setFramebuffer=function(Xb){rf!==Xb&&null===Pd&&ee.bindFramebuffer(36160,Xb);rf=Xb};(this||q).getActiveCubeFace=function(){return md};(this||q).getActiveMipmapLevel=function(){return qd};(this||q).getRenderTarget=function(){return Pd};(this||q).setRenderTarget=function(Xb,ce,Wd){void 0===ce&&(ce=0);void 0===Wd&&(Wd=0);Pd=Xb;md=ce;qd=Wd;Xb&&void 0===qk.get(Xb).__webglFramebuffer&&Jj.setupRenderTarget(Xb);var se=rf,vf=!1,fg=!1;if(Xb){se=Xb.texture;if(se.isDataTexture3D||se.isDataTexture2DArray)fg=
!0;se=qk.get(Xb).__webglFramebuffer;Xb.isWebGLCubeRenderTarget?(se=se[ce],vf=!0):se=Xb.isWebGLMultisampleRenderTarget?qk.get(Xb).__webglMultisampledFramebuffer:se;Hh.copy(Xb.viewport);Li.copy(Xb.scissor);$k=Xb.scissorTest}else Hh.copy(ff).multiplyScalar(Td).floor(),Li.copy(tg).multiplyScalar(Td).floor(),$k=lf;kg!==se&&(ee.bindFramebuffer(36160,se),kg=se);nh.viewport(Hh);nh.scissor(Li);nh.setScissorTest($k);vf?(Xb=qk.get(Xb.texture),ee.framebufferTexture2D(36160,36064,34069+ce,Xb.__webglTexture,Wd)):
fg&&(Xb=qk.get(Xb.texture),ee.framebufferTextureLayer(36160,36064,Xb.__webglTexture,Wd||0,ce||0))};(this||q).readRenderTargetPixels=function(Xb,ce,Wd,se,vf,fg,Mg){if(Xb&&Xb.isWebGLRenderTarget){var uj=qk.get(Xb).__webglFramebuffer;Xb.isWebGLCubeRenderTarget&&void 0!==Mg&&(uj=uj[Mg]);if(uj){Mg=!1;uj!==kg&&(ee.bindFramebuffer(36160,uj),Mg=!0);try{var kj=Xb.texture,im=kj.format,Kj=kj.type;if(1023!==im&&hv.convert(im)!==ee.getParameter(35739))console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");
else{var kv=1016===Kj&&(mh.has("EXT_color_buffer_half_float")||fi.isWebGL2&&mh.has("EXT_color_buffer_float"));1009===Kj||hv.convert(Kj)===ee.getParameter(35738)||1015===Kj&&(fi.isWebGL2||mh.has("OES_texture_float")||mh.has("WEBGL_color_buffer_float"))||kv?36053===ee.checkFramebufferStatus(36160)?0<=ce&&ce<=Xb.width-se&&0<=Wd&&Wd<=Xb.height-vf&&ee.readPixels(ce,Wd,se,vf,hv.convert(im),hv.convert(Kj),fg):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete."):
console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.")}}finally{Mg&&ee.bindFramebuffer(36160,kg)}}}else console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.")};(this||q).copyFramebufferToTexture=function(Xb,ce,Wd){void 0===Wd&&(Wd=0);var se=Math.pow(2,-Wd),vf=Math.floor(ce.image.width*se);se=Math.floor(ce.image.height*se);var fg=hv.convert(ce.format);Jj.setTexture2D(ce,
0);ee.copyTexImage2D(3553,Wd,fg,Xb.x,Xb.y,vf,se,0);nh.unbindTexture()};(this||q).copyTextureToTexture=function(Xb,ce,Wd,se){void 0===se&&(se=0);var vf=ce.image.width,fg=ce.image.height,Mg=hv.convert(Wd.format),uj=hv.convert(Wd.type);Jj.setTexture2D(Wd,0);ee.pixelStorei(37440,Wd.flipY);ee.pixelStorei(37441,Wd.premultiplyAlpha);ee.pixelStorei(3317,Wd.unpackAlignment);ce.isDataTexture?ee.texSubImage2D(3553,se,Xb.x,Xb.y,vf,fg,Mg,uj,ce.image.data):ce.isCompressedTexture?ee.compressedTexSubImage2D(3553,
se,Xb.x,Xb.y,ce.mipmaps[0].width,ce.mipmaps[0].height,Mg,ce.mipmaps[0].data):ee.texSubImage2D(3553,se,Xb.x,Xb.y,Mg,uj,ce.image);0===se&&Wd.generateMipmaps&&ee.generateMipmap(3553);nh.unbindTexture()};(this||q).copyTextureToTexture3D=function(Xb,ce,Wd,se,vf){void 0===vf&&(vf=0);if(Ad.isWebGL1Renderer)console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");else{var fg=Wd.image;Wd=fg.width;var Mg=fg.height;fg=fg.data;var uj=hv.convert(se.format),kj=hv.convert(se.type);
if(se.isDataTexture3D){Jj.setTexture3D(se,0);var im=32879}else if(se.isDataTexture2DArray)Jj.setTexture2DArray(se,0),im=35866;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}ee.pixelStorei(37440,se.flipY);ee.pixelStorei(37441,se.premultiplyAlpha);ee.pixelStorei(3317,se.unpackAlignment);var Kj=ee.getParameter(3314),kv=ee.getParameter(32878),YJ=ee.getParameter(3316),iG=ee.getParameter(3315),tya=ee.getParameter(32877);
ee.pixelStorei(3314,Wd);ee.pixelStorei(32878,Mg);ee.pixelStorei(3316,Xb.min.x);ee.pixelStorei(3315,Xb.min.y);ee.pixelStorei(32877,Xb.min.z);ee.texSubImage3D(im,vf,ce.x,ce.y,ce.z,Xb.max.x-Xb.min.x+1,Xb.max.y-Xb.min.y+1,Xb.max.z-Xb.min.z+1,uj,kj,fg);ee.pixelStorei(3314,Kj);ee.pixelStorei(32878,kv);ee.pixelStorei(3316,YJ);ee.pixelStorei(3315,iG);ee.pixelStorei(32877,tya);0===vf&&se.generateMipmaps&&ee.generateMipmap(im);nh.unbindTexture()}};(this||q).initTexture=function(Xb){Jj.setTexture2D(Xb,0);nh.unbindTexture()};
(this||q).resetState=function(){nh.reset();Rq.reset()};"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this||q}))}function Sq(z,D){(this||q).array=z;(this||q).stride=D;(this||q).count=void 0!==z?z.length/D:0;(this||q).usage=35044;(this||q).updateRange={offset:0,count:-1};(this||q).version=0;(this||q).uuid=Fh.generateUUID()}function bB(z,D,t,u){(this||q).name="";(this||q).data=z;(this||q).itemSize=D;(this||q).offset=t;(this||q).normalized=
!0===u}function bR(z,D,t,u,B,G){kG.subVectors(z,t).addScalar(.5).multiply(u);void 0!==B?($J.x=G*kG.x-B*kG.y,$J.y=B*kG.x+G*kG.y):$J.copy(kG);z.copy(D);z.x+=$J.x;z.y+=$J.y;z.applyMatrix4(lea)}function aK(z,D){La.call(this||q,z,D);(this||q).type="SkinnedMesh";(this||q).bindMode="attached";(this||q).bindMatrix=new Ug;(this||q).bindMatrixInverse=new Ug}function bK(){N.call(this||q);(this||q).type="Bone"}function cR(z,D,t){La.call(this||q,z,D);(this||q).instanceMatrix=new za(new Float32Array(16*t),16);
(this||q).instanceColor=null;(this||q).count=t;(this||q).frustumCulled=!1}function lv(z,D){void 0===z&&(z=new pa);void 0===D&&(D=new mo);N.call(this||q);(this||q).type="Line";(this||q).geometry=z;(this||q).material=D;this.updateMorphTargets()}function Zp(z,D){lv.call(this||q,z,D);(this||q).type="LineSegments"}function lG(z,D){void 0===z&&(z=new pa);void 0===D&&(D=new AD);N.call(this||q);(this||q).type="Points";(this||q).geometry=z;(this||q).material=D;this.updateMorphTargets()}function mea(z,D,t,
u,B,G,K){var O=ZZ.distanceSqToPoint(z);O<t&&(t=new cc,ZZ.closestPointToPoint(z,t),t.applyMatrix4(u),z=B.ray.origin.distanceTo(t),z<B.near||z>B.far||G.push({distance:z,distanceToRay:Math.sqrt(O),point:t,index:D,face:null,object:K}))}function nea(z,D,t,u,B){for(var G,K=0,O=D,U=t-u;O<t;O+=u)K+=(z[U]-z[O])*(z[O+1]+z[U+1]),U=O;if(B===0<K)for(B=D;B<t;B+=u)G=oea(B,z[B],z[B+1],G);else for(B=t-u;B>=D;B-=u)G=oea(B,z[B],z[B+1],G);G&&dR(G,G.next)&&(cK(G),G=G.next);return G}function cB(z,D){if(!z)return z;D||
(D=z);do{var t=!1;if(z.steiner||!dR(z,z.next)&&0!==Pl(z.prev,z,z.next))z=z.next;else{cK(z);z=D=z.prev;if(z===z.next)break;t=!0}}while(t||z!==D);return D}function dK(z,D,t,u,B,G,K){if(z){if(!K&&G){var O=z,U=O;do null===U.z&&(U.z=$Z(U.x,U.y,u,B,G)),U.prevZ=U.prev,U=U.nextZ=U.next;while(U!==O);U.prevZ.nextZ=null;U.prevZ=null;O=U;var V,ca,qa,Ea,Ra=1;do{U=O;var Ua=O=null;for(ca=0;U;){ca++;var ub=U;for(V=qa=0;V<Ra&&(qa++,ub=ub.nextZ,ub);V++);for(Ea=Ra;0<qa||0<Ea&&ub;)0!==qa&&(0===Ea||!ub||U.z<=ub.z)?(V=
U,U=U.nextZ,qa--):(V=ub,ub=ub.nextZ,Ea--),Ua?Ua.nextZ=V:O=V,V.prevZ=Ua,Ua=V;U=ub}Ua.nextZ=null;Ra*=2}while(1<ca)}for(O=z;z.prev!==z.next;){U=z.prev;ub=z.next;if(G)Ua=uya(z,u,B,G);else a:if(Ua=z,ca=Ua.prev,qa=Ua,Ra=Ua.next,0<=Pl(ca,qa,Ra))Ua=!1;else{for(V=Ua.next.next;V!==Ua.prev;){if(mG(ca.x,ca.y,qa.x,qa.y,Ra.x,Ra.y,V.x,V.y)&&0<=Pl(V.prev,V,V.next)){Ua=!1;break a}V=V.next}Ua=!0}if(Ua)D.push(U.i/t),D.push(z.i/t),D.push(ub.i/t),cK(z),O=z=ub.next;else if(z=ub,z===O){if(!K)dK(cB(z),D,t,u,B,G,1);else if(1===
K){z=cB(z);K=D;O=t;U=z;do ub=U.prev,Ua=U.next.next,!dR(ub,Ua)&&pea(ub,U,U.next,Ua)&&eK(ub,Ua)&&eK(Ua,ub)&&(K.push(ub.i/O),K.push(U.i/O),K.push(Ua.i/O),cK(U),cK(U.next),U=z=Ua),U=U.next;while(U!==z);z=cB(U);dK(z,D,t,u,B,G,2)}else if(2===K)a:{K=z;do{for(O=K.next.next;O!==K.prev;){if(U=K.i!==O.i){U=K;ub=O;if(Ua=U.next.i!==ub.i&&U.prev.i!==ub.i){b:{Ua=U;do{if(Ua.i!==U.i&&Ua.next.i!==U.i&&Ua.i!==ub.i&&Ua.next.i!==ub.i&&pea(Ua,Ua.next,U,ub)){Ua=!0;break b}Ua=Ua.next}while(Ua!==U);Ua=!1}Ua=!Ua}if(Ua){if(Ua=
eK(U,ub)&&eK(ub,U)){Ua=U;ca=!1;qa=(U.x+ub.x)/2;Ra=(U.y+ub.y)/2;do Ua.y>Ra!==Ua.next.y>Ra&&Ua.next.y!==Ua.y&&qa<(Ua.next.x-Ua.x)*(Ra-Ua.y)/(Ua.next.y-Ua.y)+Ua.x&&(ca=!ca),Ua=Ua.next;while(Ua!==U);Ua=ca}Ua=Ua&&(Pl(U.prev,U,ub.prev)||Pl(U,ub.prev,ub))||dR(U,ub)&&0<Pl(U.prev,U,U.next)&&0<Pl(ub.prev,ub,ub.next)}U=Ua}if(U){z=qea(K,O);K=cB(K,K.next);z=cB(z,z.next);dK(K,D,t,u,B,G);dK(z,D,t,u,B,G);break a}O=O.next}K=K.next}while(K!==z)}break}}}}function uya(z,D,t,u){var B=z.prev,G=z.next;if(0<=Pl(B,z,G))return!1;
var K=B.x>z.x?B.x>G.x?B.x:G.x:z.x>G.x?z.x:G.x,O=B.y>z.y?B.y>G.y?B.y:G.y:z.y>G.y?z.y:G.y,U=$Z(B.x<z.x?B.x<G.x?B.x:G.x:z.x<G.x?z.x:G.x,B.y<z.y?B.y<G.y?B.y:G.y:z.y<G.y?z.y:G.y,D,t,u);D=$Z(K,O,D,t,u);t=z.prevZ;for(u=z.nextZ;t&&t.z>=U&&u&&u.z<=D;){if(t!==z.prev&&t!==z.next&&mG(B.x,B.y,z.x,z.y,G.x,G.y,t.x,t.y)&&0<=Pl(t.prev,t,t.next))return!1;t=t.prevZ;if(u!==z.prev&&u!==z.next&&mG(B.x,B.y,z.x,z.y,G.x,G.y,u.x,u.y)&&0<=Pl(u.prev,u,u.next))return!1;u=u.nextZ}for(;t&&t.z>=U;){if(t!==z.prev&&t!==z.next&&mG(B.x,
B.y,z.x,z.y,G.x,G.y,t.x,t.y)&&0<=Pl(t.prev,t,t.next))return!1;t=t.prevZ}for(;u&&u.z<=D;){if(u!==z.prev&&u!==z.next&&mG(B.x,B.y,z.x,z.y,G.x,G.y,u.x,u.y)&&0<=Pl(u.prev,u,u.next))return!1;u=u.nextZ}return!0}function vya(z,D){return z.x-D.x}function wya(z,D){var t=D,u=z.x,B=z.y,G=-Infinity;do{if(B<=t.y&&B>=t.next.y&&t.next.y!==t.y){var K=t.x+(B-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(K<=u&&K>G){G=K;if(K===u){if(B===t.y)return t;if(B===t.next.y)return t.next}var O=t.x<t.next.x?t:t.next}}t=t.next}while(t!==
D);if(!O)return null;if(u===G)return O;D=O;K=O.x;var U=O.y,V=Infinity;t=O;do{if(u>=t.x&&t.x>=K&&u!==t.x&&mG(B<U?u:G,B,K,U,B<U?G:u,B,t.x,t.y)){var ca=Math.abs(B-t.y)/(u-t.x);var qa;if((qa=eK(t,z))&&!(qa=ca<V)&&(qa=ca===V)&&!(qa=t.x>O.x)&&(qa=t.x===O.x)){qa=O;var Ea=t;qa=0>Pl(qa.prev,qa,Ea.prev)&&0>Pl(Ea.next,qa,qa.next)}qa&&(O=t,V=ca)}t=t.next}while(t!==D);return O}function $Z(z,D,t,u,B){z=32767*(z-t)*B;D=32767*(D-u)*B;z=(z|z<<8)&16711935;z=(z|z<<4)&252645135;z=(z|z<<2)&858993459;D=(D|D<<8)&16711935;
D=(D|D<<4)&252645135;D=(D|D<<2)&858993459;return(z|z<<1)&1431655765|((D|D<<1)&1431655765)<<1}function xya(z){var D=z,t=z;do{if(D.x<t.x||D.x===t.x&&D.y<t.y)t=D;D=D.next}while(D!==z);return t}function mG(z,D,t,u,B,G,K,O){return 0<=(B-K)*(D-O)-(z-K)*(G-O)&&0<=(z-K)*(u-O)-(t-K)*(D-O)&&0<=(t-K)*(G-O)-(B-K)*(u-O)}function Pl(z,D,t){return(D.y-z.y)*(t.x-D.x)-(D.x-z.x)*(t.y-D.y)}function dR(z,D){return z.x===D.x&&z.y===D.y}function pea(z,D,t,u){var B=eR(Pl(z,D,t)),G=eR(Pl(z,D,u)),K=eR(Pl(t,u,z)),O=eR(Pl(t,
u,D));return B!==G&&K!==O||0===B&&fR(z,t,D)||0===G&&fR(z,u,D)||0===K&&fR(t,z,u)||0===O&&fR(t,D,u)?!0:!1}function fR(z,D,t){return D.x<=Math.max(z.x,t.x)&&D.x>=Math.min(z.x,t.x)&&D.y<=Math.max(z.y,t.y)&&D.y>=Math.min(z.y,t.y)}function eR(z){return 0<z?1:0>z?-1:0}function eK(z,D){return 0>Pl(z.prev,z,z.next)?0<=Pl(z,D,z.next)&&0<=Pl(z,z.prev,D):0>Pl(z,D,z.prev)||0>Pl(z,z.next,D)}function qea(z,D){var t=new a_(z.i,z.x,z.y),u=new a_(D.i,D.x,D.y),B=z.next,G=D.prev;z.next=D;D.prev=z;t.next=B;B.prev=t;u.next=
t;t.prev=u;G.next=u;u.prev=G;return u}function oea(z,D,t,u){z=new a_(z,D,t);u?(z.next=u.next,z.prev=u,u.next.prev=z,u.next=z):(z.prev=z,z.next=z);return z}function cK(z){z.next.prev=z.prev;z.prev.next=z.next;z.prevZ&&(z.prevZ.nextZ=z.nextZ);z.nextZ&&(z.nextZ.prevZ=z.prevZ)}function a_(z,D,t){(this||q).i=z;(this||q).x=D;(this||q).y=t;(this||q).prev=null;(this||q).next=null;(this||q).z=null;(this||q).prevZ=null;(this||q).nextZ=null;(this||q).steiner=!1}function rea(z){var D=z.length;2<D&&z[D-1].equals(z[0])&&
z.pop()}function sea(z,D){for(var t=0;t<D.length;t++)z.push(D[t].x),z.push(D[t].y)}function BD(z,D,t){pa.call(this||q);(this||q).type="ParametricGeometry";(this||q).parameters={func:z,slices:D,stacks:t};var u=[],B=[],G=[],K=[],O=new cc,U=new cc,V=new cc,ca=new cc,qa=new cc;3>z.length&&console.error("THREE.ParametricGeometry: Function must now modify a Vector3 as third parameter.");for(var Ea=D+1,Ra=0;Ra<=t;Ra++)for(var Ua=Ra/t,ub=0;ub<=D;ub++){var nb=ub/D;z(nb,Ua,U);B.push(U.x,U.y,U.z);0<=nb-1E-5?
(z(nb-1E-5,Ua,V),ca.subVectors(U,V)):(z(nb+1E-5,Ua,V),ca.subVectors(V,U));0<=Ua-1E-5?(z(nb,Ua-1E-5,V),qa.subVectors(U,V)):(z(nb,Ua+1E-5,V),qa.subVectors(V,U));O.crossVectors(ca,qa).normalize();G.push(O.x,O.y,O.z);K.push(nb,Ua)}for(z=0;z<t;z++)for(O=0;O<D;O++)U=z*Ea+O+1,V=(z+1)*Ea+O+1,ca=(z+1)*Ea+O,u.push(z*Ea+O,U,ca),u.push(U,V,ca);this.setIndex(u);this.setAttribute("position",new hb(B,3));this.setAttribute("normal",new hb(G,3));this.setAttribute("uv",new hb(K,2))}function ax(z){Y.call(this||q);(this||
q).defines={STANDARD:""};(this||q).type="MeshStandardMaterial";(this||q).color=new jg(16777215);(this||q).roughness=1;(this||q).metalness=0;(this||q).map=null;(this||q).lightMap=null;(this||q).lightMapIntensity=1;(this||q).aoMap=null;(this||q).aoMapIntensity=1;(this||q).emissive=new jg(0);(this||q).emissiveIntensity=1;(this||q).emissiveMap=null;(this||q).bumpMap=null;(this||q).bumpScale=1;(this||q).normalMap=null;(this||q).normalMapType=0;(this||q).normalScale=new We(1,1);(this||q).displacementMap=
null;(this||q).displacementScale=1;(this||q).displacementBias=0;(this||q).roughnessMap=null;(this||q).metalnessMap=null;(this||q).alphaMap=null;(this||q).envMap=null;(this||q).envMapIntensity=1;(this||q).refractionRatio=.98;(this||q).wireframe=!1;(this||q).wireframeLinewidth=1;(this||q).wireframeLinecap="round";(this||q).wireframeLinejoin="round";(this||q).skinning=!1;(this||q).morphTargets=!1;(this||q).morphNormals=!1;(this||q).flatShading=!1;(this||q).vertexTangents=!1;this.setValues(z)}function dB(z){ax.call(this||
q);(this||q).defines={STANDARD:"",PHYSICAL:""};(this||q).type="MeshPhysicalMaterial";(this||q).clearcoat=0;(this||q).clearcoatMap=null;(this||q).clearcoatRoughness=0;(this||q).clearcoatRoughnessMap=null;(this||q).clearcoatNormalScale=new We(1,1);(this||q).clearcoatNormalMap=null;(this||q).reflectivity=.5;Object.defineProperty(this||q,"ior",{get:function(){return(1+.4*(this||q).reflectivity)/(1-.4*(this||q).reflectivity)},set:function(D){(this||q).reflectivity=Fh.clamp(2.5*(D-1)/(D+1),0,1)}});(this||
q).sheen=null;(this||q).transmission=0;(this||q).transmissionMap=null;this.setValues(z)}function $r(z,D,t,u){(this||q).parameterPositions=z;(this||q)._cachedIndex=0;(this||q).resultBuffer=void 0!==u?u:new D.constructor(t);(this||q).sampleValues=D;(this||q).valueSize=t}function gR(z,D,t,u){$r.call(this||q,z,D,t,u);(this||q)._weightPrev=-0;(this||q)._offsetPrev=-0;(this||q)._weightNext=-0;(this||q)._offsetNext=-0}function fK(z,D,t,u){$r.call(this||q,z,D,t,u)}function hR(z,D,t,u){$r.call(this||q,z,D,
t,u)}function iR(z,D,t,u){$r.call(this||q,z,D,t,u)}function yya(z){switch(z.toLowerCase()){case "scalar":case "double":case "float":case "number":case "integer":return gK;case "vector":case "vector2":case "vector3":case "vector4":return hK;case "color":return b_;case "quaternion":return nG;case "bool":case "boolean":return CD;case "string":return DD}throw Error("THREE.KeyframeTrack: Unsupported typeName: "+z);}function zya(z){if(void 0===z.type)throw Error("THREE.KeyframeTrack: track type undefined, can not parse");
var D=yya(z.type);if(void 0===z.times){var t=[],u=[];zl.flattenJSON(z.keys,t,u,"value");z.times=t;z.values=u}return void 0!==D.parse?D.parse(z):new D(z.name,z.times,z.values,z.interpolation)}function c_(z,D,t){var u=this||q,B=!1,G=0,K=0,O=void 0,U=[];(this||q).onStart=void 0;(this||q).onLoad=z;(this||q).onProgress=D;(this||q).onError=t;(this||q).itemStart=function(V){K++;if(!1===B&&void 0!==u.onStart)u.onStart(V,G,K);B=!0};(this||q).itemEnd=function(V){G++;if(void 0!==u.onProgress)u.onProgress(V,
G,K);if(G===K&&(B=!1,void 0!==u.onLoad))u.onLoad()};(this||q).itemError=function(V){if(void 0!==u.onError)u.onError(V)};(this||q).resolveURL=function(V){return O?O(V):V};(this||q).setURLModifier=function(V){O=V;return this||q};(this||q).addHandler=function(V,ca){U.push(V,ca);return this||q};(this||q).removeHandler=function(V){V=U.indexOf(V);-1!==V&&U.splice(V,2);return this||q};(this||q).getHandler=function(V){for(var ca=0,qa=U.length;ca<qa;ca+=2){var Ea=U[ca],Ra=U[ca+1];Ea.global&&(Ea.lastIndex=
0);if(Ea.test(V))return Ra}return null}}function jm(z){(this||q).manager=void 0!==z?z:tea;(this||q).crossOrigin="anonymous";(this||q).withCredentials=!1;(this||q).path="";(this||q).resourcePath="";(this||q).requestHeader={}}function tt(z){jm.call(this||q,z)}function d_(z){jm.call(this||q,z)}function jR(z){jm.call(this||q,z)}function kR(z){jm.call(this||q,z)}function $p(){(this||q).type="Curve";(this||q).arcLengthDivisions=200}function e_(){var z=0,D=0,t=0,u=0;return{initCatmullRom:function(B,G,K,
O,U){B=U*(K-B);O=U*(O-G);z=G;D=B;t=-3*G+3*K-2*B-O;u=2*G-2*K+B+O},initNonuniformCatmullRom:function(B,G,K,O,U,V,ca){B=((G-B)/U-(K-B)/(U+V)+(K-G)/V)*V;O=((K-G)/V-(O-G)/(V+ca)+(O-K)/ca)*V;z=G;D=B;t=-3*G+3*K-2*B-O;u=2*G-2*K+B+O},calc:function(B){var G=B*B;return z+D*B+t*G+u*G*B}}}function uea(z,D,t,u,B){D=.5*(u-D);B=.5*(B-t);var G=z*z;return(2*t-2*u+D+B)*z*G+(-3*t+3*u-2*D-B)*G+D*z+t}function iK(z,D,t,u){var B=1-z;return B*B*D+2*(1-z)*z*t+z*z*u}function jK(z,D,t,u,B){var G=1-z,K=1-z;return G*G*G*D+3*K*
K*z*t+3*(1-z)*z*z*u+z*z*z*B}function kK(){pa.call(this||q);(this||q).type="InstancedBufferGeometry";(this||q).instanceCount=Infinity}function lR(z,D,t,u){"number"===typeof t&&(u=t,t=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument."));za.call(this||q,z,D,t);(this||q).meshPerAttribute=u||1}function f_(z){"undefined"===typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported.");"undefined"===typeof fetch&&
console.warn("THREE.ImageBitmapLoader: fetch() not supported.");jm.call(this||q,z);(this||q).options={premultiplyAlpha:"none"}}function vea(){return("undefined"===typeof performance?Date:performance).now()}function wea(z,D,t){t=t||sp.parseTrackName(D);(this||q)._targetGroup=z;(this||q)._bindings=z.subscribe_(D,t)}function sp(z,D,t){(this||q).path=D;(this||q).parsedPath=t||sp.parseTrackName(D);(this||q).node=sp.findNode(z,(this||q).parsedPath.nodeName)||z;(this||q).rootNode=z}function g_(z,D,t){Sq.call(this||
q,z,D);(this||q).meshPerAttribute=t||1}function h_(z,D,t,u,B){(this||q).buffer=z;(this||q).type=D;(this||q).itemSize=t;(this||q).elementSize=u;(this||q).count=B;(this||q).version=0}function i_(z,D,t,u){void 0===t&&(t=0);void 0===u&&(u=Infinity);(this||q).ray=new eB(z,D);(this||q).near=t;(this||q).far=u;(this||q).camera=null;(this||q).layers=new QZ;(this||q).params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}};Object.defineProperties((this||q).params,{PointCloud:{get:function(){console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points.");
return(this||q).Points}}})}function xea(z,D){return z.distance-D.distance}function j_(z,D,t,u){z.layers.test(D.layers)&&z.raycast(D,t);if(!0===u){z=z.children;u=0;for(var B=z.length;u<B;u++)j_(z[u],D,t,!0)}}function lK(z){N.call(this||q);(this||q).material=z;(this||q).render=function(){};(this||q).hasPositions=!1;(this||q).hasNormals=!1;(this||q).hasColors=!1;(this||q).hasUvs=!1;(this||q).positionArray=null;(this||q).normalArray=null;(this||q).colorArray=null;(this||q).uvArray=null;(this||q).count=
0}function yea(z){var D=[];z&&z.isBone&&D.push(z);for(var t=0;t<z.children.length;t++)D.push.apply(D,yea(z.children[t]));return D}function tm(z,D,t,u,B,G,K){mR.set(B,G,K).unproject(u);z=D[z];if(void 0!==z)for(t=t.getAttribute("position"),D=0,u=z.length;D<u;D++)t.setXYZ(z[D],mR.x,mR.y,mR.z)}function zea(z){var D=Math.min(Math.max(Math.ceil(Math.log2(Math.max(z.r,z.g,z.b))),-128),127);z.multiplyScalar(Math.pow(2,-D));return(D+128)/255}function Aea(z){z=new Oy(3*bx,3*bx,z);z.texture.mapping=306;z.texture.name=
"PMREM.cubeUv";z.scissorTest=!0;return z}function nR(z,D,t,u,B){z.viewport.set(D,t,u,B);z.scissor.set(D,t,u,B)}function Bea(){var z=new We(1,1);return new oG({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null},texelSize:{value:z},inputEncoding:{value:cx[3E3]},outputEncoding:{value:cx[3E3]}},vertexShader:k_(),fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform vec2 texelSize;\n\n\t\t\t"+
l_()+"\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tvec2 f = fract( uv / texelSize - 0.5 );\n\t\t\t\tuv -= f * texelSize;\n\t\t\t\tvec3 tl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.x += texelSize.x;\n\t\t\t\tvec3 tr = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.y += texelSize.y;\n\t\t\t\tvec3 br = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.x -= texelSize.x;\n\t\t\t\tvec3 bl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\n\t\t\t\tvec3 tm = mix( tl, tr, f.x );\n\t\t\t\tvec3 bm = mix( bl, br, f.x );\n\t\t\t\tgl_FragColor.rgb = mix( tm, bm, f.y );\n\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t",
blending:0,depthTest:!1,depthWrite:!1})}function Cea(){return new oG({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},inputEncoding:{value:cx[3E3]},outputEncoding:{value:cx[3E3]}},vertexShader:k_(),fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\t"+l_()+"\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb = envMapTexelToLinear( textureCube( envMap, vec3( - vOutputDirection.x, vOutputDirection.yz ) ) ).rgb;\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t",
blending:0,depthTest:!1,depthWrite:!1})}function k_(){return"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute vec3 position;\n\t\tattribute vec2 uv;\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t"}
function l_(){return"\n\n\t\tuniform int inputEncoding;\n\t\tuniform int outputEncoding;\n\n\t\t#include <encodings_pars_fragment>\n\n\t\tvec4 inputTexelToLinear( vec4 value ) {\n\n\t\t\tif ( inputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( inputEncoding == 1 ) {\n\n\t\t\t\treturn sRGBToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 2 ) {\n\n\t\t\t\treturn RGBEToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 3 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 7.0 );\n\n\t\t\t} else if ( inputEncoding == 4 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 16.0 );\n\n\t\t\t} else if ( inputEncoding == 5 ) {\n\n\t\t\t\treturn RGBDToLinear( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn GammaToLinear( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 linearToOutputTexel( vec4 value ) {\n\n\t\t\tif ( outputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( outputEncoding == 1 ) {\n\n\t\t\t\treturn LinearTosRGB( value );\n\n\t\t\t} else if ( outputEncoding == 2 ) {\n\n\t\t\t\treturn LinearToRGBE( value );\n\n\t\t\t} else if ( outputEncoding == 3 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 7.0 );\n\n\t\t\t} else if ( outputEncoding == 4 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 16.0 );\n\n\t\t\t} else if ( outputEncoding == 5 ) {\n\n\t\t\t\treturn LinearToRGBD( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn LinearToGamma( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 envMapTexelToLinear( vec4 color ) {\n\n\t\t\treturn inputTexelToLinear( color );\n\n\t\t}\n\t"}
var Dea=function(z){function D(md,qd,Pd){Object.defineProperty(md,qd,{value:Pd,enumerable:!0,configurable:!0,writable:!0});return md[qd]}function t(md,qd,Pd,kg){qd=Object.create((qd&&qd.prototype instanceof B?qd:B).prototype);kg=new Ra(kg||[]);qd._invoke=V(md,Pd,kg);return qd}function u(md,qd,Pd){try{return{type:"normal",arg:md.call(qd,Pd)}}catch(kg){return{type:"throw",arg:kg}}}function B(){}function G(){}function K(){}function O(md){["next","throw","return"].forEach(function(qd){D(md,qd,function(Pd){return this._invoke(qd,
Pd)})})}function U(md,qd){function Pd(Me,pg,Hh,Li){Me=u(md[Me],md,pg);if("throw"===Me.type)Li(Me.arg);else{var $k=Me.arg;return(Me=$k.value)&&"object"===typeof Me&&ec.call(Me,"__await")?qd.resolve(Me.__await).then(function(nc){Pd("next",nc,Hh,Li)},function(nc){Pd("throw",nc,Hh,Li)}):qd.resolve(Me).then(function(nc){$k.value=nc;Hh($k)},function(nc){return Pd("throw",nc,Hh,Li)})}}var kg;(this||q)._invoke=function(Me,pg){function Hh(){return new qd(function(Li,$k){Pd(Me,pg,Li,$k)})}return kg=kg?kg.then(Hh,
Hh):Hh()}}function V(md,qd,Pd){var kg=Nc;return function(Me,pg){if(kg===jd)throw Error("Generator is already running");if(kg===Ed){if("throw"===Me)throw pg;return ub()}Pd.method=Me;for(Pd.arg=pg;;){if(Me=Pd.delegate)if(Me=ca(Me,Pd)){if(Me===Ad)continue;return Me}if("next"===Pd.method)Pd.sent=Pd._sent=Pd.arg;else if("throw"===Pd.method){if(kg===Nc)throw kg=Ed,Pd.arg;Pd.dispatchException(Pd.arg)}else"return"===Pd.method&&Pd.abrupt("return",Pd.arg);kg=jd;Me=u(md,qd,Pd);if("normal"===Me.type){kg=Pd.done?
Ed:Oc;if(Me.arg===Ad)continue;return{value:Me.arg,done:Pd.done}}"throw"===Me.type&&(kg=Ed,Pd.method="throw",Pd.arg=Me.arg)}}}function ca(md,qd){var Pd=md.iterator[qd.method];if(Pd===gc){qd.delegate=null;if("throw"===qd.method){if(md.iterator["return"]&&(qd.method="return",qd.arg=gc,ca(md,qd),"throw"===qd.method))return Ad;qd.method="throw";qd.arg=new TypeError("The iterator does not provide a 'throw' method")}return Ad}Pd=u(Pd,md.iterator,qd.arg);if("throw"===Pd.type)return qd.method="throw",qd.arg=
Pd.arg,qd.delegate=null,Ad;Pd=Pd.arg;if(!Pd)return qd.method="throw",qd.arg=new TypeError("iterator result is not an object"),qd.delegate=null,Ad;if(Pd.done)qd[md.resultName]=Pd.value,qd.next=md.nextLoc,"return"!==qd.method&&(qd.method="next",qd.arg=gc);else return Pd;qd.delegate=null;return Ad}function qa(md){var qd={tryLoc:md[0]};1 in md&&(qd.catchLoc=md[1]);2 in md&&(qd.finallyLoc=md[2],qd.afterLoc=md[3]);(this||q).tryEntries.push(qd)}function Ea(md){var qd=md.completion||{};qd.type="normal";delete qd.arg;
md.completion=qd}function Ra(md){(this||q).tryEntries=[{tryLoc:"root"}];md.forEach(qa,this||q);this.reset(!0)}function Ua(md){if(md){var qd=md[Lc];if(qd)return qd.call(md);if("function"===typeof md.next)return md;if(!isNaN(md.length)){var Pd=-1;qd=function Me(){for(;++Pd<md.length;)if(ec.call(md,Pd))return Me.value=md[Pd],Me.done=!1,Me;Me.value=gc;Me.done=!0;return Me};return qd.next=qd}}return{next:ub}}function ub(){return{value:gc,done:!0}}var nb=Object.prototype,ec=nb.hasOwnProperty,gc,Ac="function"===
typeof Symbol?Symbol:{},Lc=Ac.iterator||"@@iterator",ld=Ac.asyncIterator||"@@asyncIterator",cd=Ac.toStringTag||"@@toStringTag";try{D({},"")}catch(md){D=function(qd,Pd,kg){return qd[Pd]=kg}}z.wrap=t;var Nc="suspendedStart",Oc="suspendedYield",jd="executing",Ed="completed",Ad={};Ac={};Ac[Lc]=function(){return this||q};var de=Object.getPrototypeOf;(de=de&&de(de(Ua([]))))&&de!==nb&&ec.call(de,Lc)&&(Ac=de);var rf=K.prototype=B.prototype=Object.create(Ac);G.prototype=rf.constructor=K;K.constructor=G;G.displayName=
D(K,cd,"GeneratorFunction");z.isGeneratorFunction=function(md){return(md="function"===typeof md&&md.constructor)?md===G||"GeneratorFunction"===(md.displayName||md.name):!1};z.mark=function(md){Object.setPrototypeOf?Object.setPrototypeOf(md,K):(md.__proto__=K,D(md,cd,"GeneratorFunction"));md.prototype=Object.create(rf);return md};z.awrap=function(md){return{__await:md}};O(U.prototype);U.prototype[ld]=function(){return this||q};z.AsyncIterator=U;z.async=function(md,qd,Pd,kg,Me){void 0===Me&&(Me=Promise);
var pg=new U(t(md,qd,Pd,kg),Me);return z.isGeneratorFunction(qd)?pg:pg.next().then(function(Hh){return Hh.done?Hh.value:pg.next()})};O(rf);D(rf,cd,"Generator");rf[Lc]=function(){return this||q};rf.toString=function(){return"[object Generator]"};z.keys=function(md){var qd=[],Pd;for(Pd in md)qd.push(Pd);qd.reverse();return function Me(){for(;qd.length;){var pg=qd.pop();if(pg in md)return Me.value=pg,Me.done=!1,Me}Me.done=!0;return Me}};z.values=Ua;Ra.prototype={constructor:Ra,reset:function(md){(this||
q).prev=0;(this||q).next=0;(this||q).sent=(this||q)._sent=gc;(this||q).done=!1;(this||q).delegate=null;(this||q).method="next";(this||q).arg=gc;(this||q).tryEntries.forEach(Ea);if(!md)for(var qd in this||q)"t"===qd.charAt(0)&&ec.call(this||q,qd)&&!isNaN(+qd.slice(1))&&((this||q)[qd]=gc)},stop:function(){(this||q).done=!0;var md=(this||q).tryEntries[0].completion;if("throw"===md.type)throw md.arg;return(this||q).rval},dispatchException:function(md){function qd($k,nc){pg.type="throw";pg.arg=md;Pd.next=
$k;nc&&(Pd.method="next",Pd.arg=gc);return!!nc}if((this||q).done)throw md;for(var Pd=this||q,kg=(this||q).tryEntries.length-1;0<=kg;--kg){var Me=(this||q).tryEntries[kg],pg=Me.completion;if("root"===Me.tryLoc)return qd("end");if(Me.tryLoc<=(this||q).prev){var Hh=ec.call(Me,"catchLoc"),Li=ec.call(Me,"finallyLoc");if(Hh&&Li){if((this||q).prev<Me.catchLoc)return qd(Me.catchLoc,!0);if((this||q).prev<Me.finallyLoc)return qd(Me.finallyLoc)}else if(Hh){if((this||q).prev<Me.catchLoc)return qd(Me.catchLoc,
!0)}else if(Li){if((this||q).prev<Me.finallyLoc)return qd(Me.finallyLoc)}else throw Error("try statement without catch or finally");}}},abrupt:function(md,qd){for(var Pd=(this||q).tryEntries.length-1;0<=Pd;--Pd){var kg=(this||q).tryEntries[Pd];if(kg.tryLoc<=(this||q).prev&&ec.call(kg,"finallyLoc")&&(this||q).prev<kg.finallyLoc){var Me=kg;break}}Me&&("break"===md||"continue"===md)&&Me.tryLoc<=qd&&qd<=Me.finallyLoc&&(Me=null);Pd=Me?Me.completion:{};Pd.type=md;Pd.arg=qd;return Me?((this||q).method="next",
(this||q).next=Me.finallyLoc,Ad):this.complete(Pd)},complete:function(md,qd){if("throw"===md.type)throw md.arg;"break"===md.type||"continue"===md.type?(this||q).next=md.arg:"return"===md.type?((this||q).rval=(this||q).arg=md.arg,(this||q).method="return",(this||q).next="end"):"normal"===md.type&&qd&&((this||q).next=qd);return Ad},finish:function(md){for(var qd=(this||q).tryEntries.length-1;0<=qd;--qd){var Pd=(this||q).tryEntries[qd];if(Pd.finallyLoc===md)return this.complete(Pd.completion,Pd.afterLoc),
Ea(Pd),Ad}},"catch":function(md){for(var qd=(this||q).tryEntries.length-1;0<=qd;--qd){var Pd=(this||q).tryEntries[qd];if(Pd.tryLoc===md){md=Pd.completion;if("throw"===md.type){var kg=md.arg;Ea(Pd)}return kg}}throw Error("illegal catch attempt");},delegateYield:function(md,qd,Pd){(this||q).delegate={iterator:Ua(md),resultName:qd,nextLoc:Pd};"next"===(this||q).method&&((this||q).arg=gc);return Ad}};return z}(gG);try{q.regeneratorRuntime=b=Dea}catch(z){Function("r","regeneratorRuntime = r")(Dea)}Object.assign(I.prototype,
{addEventListener:function(z,D){void 0===(this||q)._listeners&&((this||q)._listeners={});var t=(this||q)._listeners;void 0===t[z]&&(t[z]=[]);-1===t[z].indexOf(D)&&t[z].push(D)},hasEventListener:function(z,D){if(void 0===(this||q)._listeners)return!1;var t=(this||q)._listeners;return void 0!==t[z]&&-1!==t[z].indexOf(D)},removeEventListener:function(z,D){void 0!==(this||q)._listeners&&(z=(this||q)._listeners[z],void 0!==z&&(D=z.indexOf(D),-1!==D&&z.splice(D,1)))},dispatchEvent:function(z){if(void 0!==
(this||q)._listeners){var D=(this||q)._listeners[z.type];if(void 0!==D){z.target=this||q;D=D.slice(0);for(var t=0,u=D.length;t<u;t++)D[t].call(this||q,z)}}}});for(var No=[],mK=0;256>mK;mK++)No[mK]=(16>mK?"0":"")+mK.toString(16);var oR=1234567,Fh={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){var z=4294967295*Math.random()|0,D=4294967295*Math.random()|0,t=4294967295*Math.random()|0,u=4294967295*Math.random()|0;return(No[z&255]+No[z>>8&255]+No[z>>16&255]+No[z>>24&255]+"-"+No[D&255]+
No[D>>8&255]+"-"+No[D>>16&15|64]+No[D>>24&255]+"-"+No[t&63|128]+No[t>>8&255]+"-"+No[t>>16&255]+No[t>>24&255]+No[u&255]+No[u>>8&255]+No[u>>16&255]+No[u>>24&255]).toUpperCase()},clamp:function(z,D,t){return Math.max(D,Math.min(t,z))},euclideanModulo:function(z,D){return(z%D+D)%D},mapLinear:function(z,D,t,u,B){return u+(z-D)*(B-u)/(t-D)},lerp:function(z,D,t){return(1-t)*z+t*D},damp:function(z,D,t,u){return Fh.lerp(z,D,1-Math.exp(-t*u))},pingpong:function(z,D){void 0===D&&(D=1);return D-Math.abs(Fh.euclideanModulo(z,
2*D)-D)},smoothstep:function(z,D,t){if(z<=D)return 0;if(z>=t)return 1;z=(z-D)/(t-D);return z*z*(3-2*z)},smootherstep:function(z,D,t){if(z<=D)return 0;if(z>=t)return 1;z=(z-D)/(t-D);return z*z*z*(z*(6*z-15)+10)},randInt:function(z,D){return z+Math.floor(Math.random()*(D-z+1))},randFloat:function(z,D){return z+Math.random()*(D-z)},randFloatSpread:function(z){return z*(.5-Math.random())},seededRandom:function(z){void 0!==z&&(oR=z%2147483647);oR=16807*oR%2147483647;return(oR-1)/2147483646},degToRad:function(z){return z*
Fh.DEG2RAD},radToDeg:function(z){return z*Fh.RAD2DEG},isPowerOfTwo:function(z){return 0===(z&z-1)&&0!==z},ceilPowerOfTwo:function(z){return Math.pow(2,Math.ceil(Math.log(z)/Math.LN2))},floorPowerOfTwo:function(z){return Math.pow(2,Math.floor(Math.log(z)/Math.LN2))},setQuaternionFromProperEuler:function(z,D,t,u,B){var G=Math.cos,K=Math.sin,O=G(t/2);t=K(t/2);var U=G((D+u)/2),V=K((D+u)/2),ca=G((D-u)/2),qa=K((D-u)/2);G=G((u-D)/2);D=K((u-D)/2);switch(B){case "XYX":z.set(O*V,t*ca,t*qa,O*U);break;case "YZY":z.set(t*
qa,O*V,t*ca,O*U);break;case "ZXZ":z.set(t*ca,t*qa,O*V,O*U);break;case "XZX":z.set(O*V,t*D,t*G,O*U);break;case "YXY":z.set(t*G,O*V,t*D,O*U);break;case "ZYZ":z.set(t*D,t*G,O*V,O*U);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+B)}}},We=function(){function z(t,u){void 0===t&&(t=0);void 0===u&&(u=0);(this||q).x=t;(this||q).y=u}var D=z.prototype;D.set=function(t,u){(this||q).x=t;(this||q).y=u;return this||q};D.setScalar=function(t){(this||
q).x=t;(this||q).y=t;return this||q};D.setX=function(t){(this||q).x=t;return this||q};D.setY=function(t){(this||q).y=t;return this||q};D.setComponent=function(t,u){switch(t){case 0:(this||q).x=u;break;case 1:(this||q).y=u;break;default:throw Error("index is out of range: "+t);}return this||q};D.getComponent=function(t){switch(t){case 0:return(this||q).x;case 1:return(this||q).y;default:throw Error("index is out of range: "+t);}};D.clone=function(){return new (this||q).constructor((this||q).x,(this||
q).y)};D.copy=function(t){(this||q).x=t.x;(this||q).y=t.y;return this||q};D.add=function(t,u){if(void 0!==u)return console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,u);(this||q).x+=t.x;(this||q).y+=t.y;return this||q};D.addScalar=function(t){(this||q).x+=t;(this||q).y+=t;return this||q};D.addVectors=function(t,u){(this||q).x=t.x+u.x;(this||q).y=t.y+u.y;return this||q};D.addScaledVector=function(t,u){(this||q).x+=t.x*u;(this||q).y+=
t.y*u;return this||q};D.sub=function(t,u){if(void 0!==u)return console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,u);(this||q).x-=t.x;(this||q).y-=t.y;return this||q};D.subScalar=function(t){(this||q).x-=t;(this||q).y-=t;return this||q};D.subVectors=function(t,u){(this||q).x=t.x-u.x;(this||q).y=t.y-u.y;return this||q};D.multiply=function(t){(this||q).x*=t.x;(this||q).y*=t.y;return this||q};D.multiplyScalar=function(t){(this||q).x*=
t;(this||q).y*=t;return this||q};D.divide=function(t){(this||q).x/=t.x;(this||q).y/=t.y;return this||q};D.divideScalar=function(t){return this.multiplyScalar(1/t)};D.applyMatrix3=function(t){var u=(this||q).x,B=(this||q).y;t=t.elements;(this||q).x=t[0]*u+t[3]*B+t[6];(this||q).y=t[1]*u+t[4]*B+t[7];return this||q};D.min=function(t){(this||q).x=Math.min((this||q).x,t.x);(this||q).y=Math.min((this||q).y,t.y);return this||q};D.max=function(t){(this||q).x=Math.max((this||q).x,t.x);(this||q).y=Math.max((this||
q).y,t.y);return this||q};D.clamp=function(t,u){(this||q).x=Math.max(t.x,Math.min(u.x,(this||q).x));(this||q).y=Math.max(t.y,Math.min(u.y,(this||q).y));return this||q};D.clampScalar=function(t,u){(this||q).x=Math.max(t,Math.min(u,(this||q).x));(this||q).y=Math.max(t,Math.min(u,(this||q).y));return this||q};D.clampLength=function(t,u){var B=this.length();return this.divideScalar(B||1).multiplyScalar(Math.max(t,Math.min(u,B)))};D.floor=function(){(this||q).x=Math.floor((this||q).x);(this||q).y=Math.floor((this||
q).y);return this||q};D.ceil=function(){(this||q).x=Math.ceil((this||q).x);(this||q).y=Math.ceil((this||q).y);return this||q};D.round=function(){(this||q).x=Math.round((this||q).x);(this||q).y=Math.round((this||q).y);return this||q};D.roundToZero=function(){(this||q).x=0>(this||q).x?Math.ceil((this||q).x):Math.floor((this||q).x);(this||q).y=0>(this||q).y?Math.ceil((this||q).y):Math.floor((this||q).y);return this||q};D.negate=function(){(this||q).x=-(this||q).x;(this||q).y=-(this||q).y;return this||
q};D.dot=function(t){return(this||q).x*t.x+(this||q).y*t.y};D.cross=function(t){return(this||q).x*t.y-(this||q).y*t.x};D.lengthSq=function(){return(this||q).x*(this||q).x+(this||q).y*(this||q).y};D.length=function(){return Math.sqrt((this||q).x*(this||q).x+(this||q).y*(this||q).y)};D.manhattanLength=function(){return Math.abs((this||q).x)+Math.abs((this||q).y)};D.normalize=function(){return this.divideScalar(this.length()||1)};D.angle=function(){return Math.atan2(-(this||q).y,-(this||q).x)+Math.PI};
D.distanceTo=function(t){return Math.sqrt(this.distanceToSquared(t))};D.distanceToSquared=function(t){var u=(this||q).x-t.x;t=(this||q).y-t.y;return u*u+t*t};D.manhattanDistanceTo=function(t){return Math.abs((this||q).x-t.x)+Math.abs((this||q).y-t.y)};D.setLength=function(t){return this.normalize().multiplyScalar(t)};D.lerp=function(t,u){(this||q).x+=(t.x-(this||q).x)*u;(this||q).y+=(t.y-(this||q).y)*u;return this||q};D.lerpVectors=function(t,u,B){(this||q).x=t.x+(u.x-t.x)*B;(this||q).y=t.y+(u.y-
t.y)*B;return this||q};D.equals=function(t){return t.x===(this||q).x&&t.y===(this||q).y};D.fromArray=function(t,u){void 0===u&&(u=0);(this||q).x=t[u];(this||q).y=t[u+1];return this||q};D.toArray=function(t,u){void 0===t&&(t=[]);void 0===u&&(u=0);t[u]=(this||q).x;t[u+1]=(this||q).y;return t};D.fromBufferAttribute=function(t,u,B){void 0!==B&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute().");(this||q).x=t.getX(u);(this||q).y=t.getY(u);return this||q};D.rotateAround=
function(t,u){var B=Math.cos(u);u=Math.sin(u);var G=(this||q).x-t.x,K=(this||q).y-t.y;(this||q).x=G*B-K*u+t.x;(this||q).y=G*u+K*B+t.y;return this||q};D.random=function(){(this||q).x=Math.random();(this||q).y=Math.random();return this||q};m(z,[{key:"width",get:function(){return(this||q).x},set:function(t){(this||q).x=t}},{key:"height",get:function(){return(this||q).y},set:function(t){(this||q).y=t}}]);return z}();We.prototype.isVector2=!0;var Cn=function(){function z(){(this||q).elements=[1,0,0,0,
1,0,0,0,1];0<arguments.length&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}var D=z.prototype;D.set=function(t,u,B,G,K,O,U,V,ca){var qa=(this||q).elements;qa[0]=t;qa[1]=G;qa[2]=U;qa[3]=u;qa[4]=K;qa[5]=V;qa[6]=B;qa[7]=O;qa[8]=ca;return this||q};D.identity=function(){this.set(1,0,0,0,1,0,0,0,1);return this||q};D.copy=function(t){var u=(this||q).elements;t=t.elements;u[0]=t[0];u[1]=t[1];u[2]=t[2];u[3]=t[3];u[4]=t[4];u[5]=t[5];u[6]=t[6];u[7]=t[7];u[8]=
t[8];return this||q};D.extractBasis=function(t,u,B){t.setFromMatrix3Column(this||q,0);u.setFromMatrix3Column(this||q,1);B.setFromMatrix3Column(this||q,2);return this||q};D.setFromMatrix4=function(t){t=t.elements;this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]);return this||q};D.multiply=function(t){return this.multiplyMatrices(this||q,t)};D.premultiply=function(t){return this.multiplyMatrices(t,this||q)};D.multiplyMatrices=function(t,u){var B=t.elements,G=u.elements;u=(this||q).elements;t=
B[0];var K=B[3],O=B[6],U=B[1],V=B[4],ca=B[7],qa=B[2],Ea=B[5];B=B[8];var Ra=G[0],Ua=G[3],ub=G[6],nb=G[1],ec=G[4],gc=G[7],Ac=G[2],Lc=G[5];G=G[8];u[0]=t*Ra+K*nb+O*Ac;u[3]=t*Ua+K*ec+O*Lc;u[6]=t*ub+K*gc+O*G;u[1]=U*Ra+V*nb+ca*Ac;u[4]=U*Ua+V*ec+ca*Lc;u[7]=U*ub+V*gc+ca*G;u[2]=qa*Ra+Ea*nb+B*Ac;u[5]=qa*Ua+Ea*ec+B*Lc;u[8]=qa*ub+Ea*gc+B*G;return this||q};D.multiplyScalar=function(t){var u=(this||q).elements;u[0]*=t;u[3]*=t;u[6]*=t;u[1]*=t;u[4]*=t;u[7]*=t;u[2]*=t;u[5]*=t;u[8]*=t;return this||q};D.determinant=
function(){var t=(this||q).elements,u=t[0],B=t[1],G=t[2],K=t[3],O=t[4],U=t[5],V=t[6],ca=t[7];t=t[8];return u*O*t-u*U*ca-B*K*t+B*U*V+G*K*ca-G*O*V};D.invert=function(){var t=(this||q).elements,u=t[0],B=t[1],G=t[2],K=t[3],O=t[4],U=t[5],V=t[6],ca=t[7],qa=t[8],Ea=qa*O-U*ca,Ra=U*V-qa*K,Ua=ca*K-O*V,ub=u*Ea+B*Ra+G*Ua;if(0===ub)return this.set(0,0,0,0,0,0,0,0,0);ub=1/ub;t[0]=Ea*ub;t[1]=(G*ca-qa*B)*ub;t[2]=(U*B-G*O)*ub;t[3]=Ra*ub;t[4]=(qa*u-G*V)*ub;t[5]=(G*K-U*u)*ub;t[6]=Ua*ub;t[7]=(B*V-ca*u)*ub;t[8]=(O*u-
B*K)*ub;return this||q};D.transpose=function(){var t=(this||q).elements;var u=t[1];t[1]=t[3];t[3]=u;u=t[2];t[2]=t[6];t[6]=u;u=t[5];t[5]=t[7];t[7]=u;return this||q};D.getNormalMatrix=function(t){return this.setFromMatrix4(t).invert().transpose()};D.transposeIntoArray=function(t){var u=(this||q).elements;t[0]=u[0];t[1]=u[3];t[2]=u[6];t[3]=u[1];t[4]=u[4];t[5]=u[7];t[6]=u[2];t[7]=u[5];t[8]=u[8];return this||q};D.setUvTransform=function(t,u,B,G,K,O,U){var V=Math.cos(K);K=Math.sin(K);this.set(B*V,B*K,-B*
(V*O+K*U)+O+t,-G*K,G*V,-G*(-K*O+V*U)+U+u,0,0,1);return this||q};D.scale=function(t,u){var B=(this||q).elements;B[0]*=t;B[3]*=t;B[6]*=t;B[1]*=u;B[4]*=u;B[7]*=u;return this||q};D.rotate=function(t){var u=Math.cos(t);t=Math.sin(t);var B=(this||q).elements,G=B[0],K=B[3],O=B[6],U=B[1],V=B[4],ca=B[7];B[0]=u*G+t*U;B[3]=u*K+t*V;B[6]=u*O+t*ca;B[1]=-t*G+u*U;B[4]=-t*K+u*V;B[7]=-t*O+u*ca;return this||q};D.translate=function(t,u){var B=(this||q).elements;B[0]+=t*B[2];B[3]+=t*B[5];B[6]+=t*B[8];B[1]+=u*B[2];B[4]+=
u*B[5];B[7]+=u*B[8];return this||q};D.equals=function(t){var u=(this||q).elements;t=t.elements;for(var B=0;9>B;B++)if(u[B]!==t[B])return!1;return!0};D.fromArray=function(t,u){void 0===u&&(u=0);for(var B=0;9>B;B++)(this||q).elements[B]=t[B+u];return this||q};D.toArray=function(t,u){void 0===t&&(t=[]);void 0===u&&(u=0);var B=(this||q).elements;t[u]=B[0];t[u+1]=B[1];t[u+2]=B[2];t[u+3]=B[3];t[u+4]=B[4];t[u+5]=B[5];t[u+6]=B[6];t[u+7]=B[7];t[u+8]=B[8];return t};D.clone=function(){return(new (this||q).constructor).fromArray((this||
q).elements)};return z}();Cn.prototype.isMatrix3=!0;var pG,wD={getDataURL:function(z){if(/^data:/i.test(z.src)||"undefined"==typeof HTMLCanvasElement)return z.src;if(!(z instanceof HTMLCanvasElement)){void 0===pG&&(pG=document.createElementNS("http://www.w3.org/1999/xhtml","canvas"));pG.width=z.width;pG.height=z.height;var D=pG.getContext("2d");z instanceof ImageData?D.putImageData(z,0,0):D.drawImage(z,0,0,z.width,z.height);z=pG}return 2048<z.width||2048<z.height?z.toDataURL("image/jpeg",.6):z.toDataURL("image/png")}},
Aya=0,tp=function(z){function D(u,B,G,K,O,U,V,ca,qa,Ea){void 0===u&&(u=D.DEFAULT_IMAGE);void 0===B&&(B=D.DEFAULT_MAPPING);void 0===G&&(G=1001);void 0===K&&(K=1001);void 0===O&&(O=1006);void 0===U&&(U=1008);void 0===V&&(V=1023);void 0===ca&&(ca=1009);void 0===qa&&(qa=1);void 0===Ea&&(Ea=3E3);var Ra=z.call(this||q)||this||q;Object.defineProperty(x(Ra),"id",{value:Aya++});Ra.uuid=Fh.generateUUID();Ra.name="";Ra.image=u;Ra.mipmaps=[];Ra.mapping=B;Ra.wrapS=G;Ra.wrapT=K;Ra.magFilter=O;Ra.minFilter=U;Ra.anisotropy=
qa;Ra.format=V;Ra.internalFormat=null;Ra.type=ca;Ra.offset=new We(0,0);Ra.repeat=new We(1,1);Ra.center=new We(0,0);Ra.rotation=0;Ra.matrixAutoUpdate=!0;Ra.matrix=new Cn;Ra.generateMipmaps=!0;Ra.premultiplyAlpha=!1;Ra.flipY=!0;Ra.unpackAlignment=4;Ra.encoding=Ea;Ra.version=0;Ra.onUpdate=null;return Ra}r(D,z);var t=D.prototype;t.updateMatrix=function(){(this||q).matrix.setUvTransform((this||q).offset.x,(this||q).offset.y,(this||q).repeat.x,(this||q).repeat.y,(this||q).rotation,(this||q).center.x,(this||
q).center.y)};t.clone=function(){return(new (this||q).constructor).copy(this||q)};t.copy=function(u){(this||q).name=u.name;(this||q).image=u.image;(this||q).mipmaps=u.mipmaps.slice(0);(this||q).mapping=u.mapping;(this||q).wrapS=u.wrapS;(this||q).wrapT=u.wrapT;(this||q).magFilter=u.magFilter;(this||q).minFilter=u.minFilter;(this||q).anisotropy=u.anisotropy;(this||q).format=u.format;(this||q).internalFormat=u.internalFormat;(this||q).type=u.type;(this||q).offset.copy(u.offset);(this||q).repeat.copy(u.repeat);
(this||q).center.copy(u.center);(this||q).rotation=u.rotation;(this||q).matrixAutoUpdate=u.matrixAutoUpdate;(this||q).matrix.copy(u.matrix);(this||q).generateMipmaps=u.generateMipmaps;(this||q).premultiplyAlpha=u.premultiplyAlpha;(this||q).flipY=u.flipY;(this||q).unpackAlignment=u.unpackAlignment;(this||q).encoding=u.encoding;return this||q};t.toJSON=function(u){var B=void 0===u||"string"===typeof u;if(!B&&void 0!==u.textures[(this||q).uuid])return u.textures[(this||q).uuid];var G={metadata:{version:4.5,
type:"Texture",generator:"Texture.toJSON"},uuid:(this||q).uuid,name:(this||q).name,mapping:(this||q).mapping,repeat:[(this||q).repeat.x,(this||q).repeat.y],offset:[(this||q).offset.x,(this||q).offset.y],center:[(this||q).center.x,(this||q).center.y],rotation:(this||q).rotation,wrap:[(this||q).wrapS,(this||q).wrapT],format:(this||q).format,type:(this||q).type,encoding:(this||q).encoding,minFilter:(this||q).minFilter,magFilter:(this||q).magFilter,anisotropy:(this||q).anisotropy,flipY:(this||q).flipY,
premultiplyAlpha:(this||q).premultiplyAlpha,unpackAlignment:(this||q).unpackAlignment};if(void 0!==(this||q).image){var K=(this||q).image;void 0===K.uuid&&(K.uuid=Fh.generateUUID());if(!B&&void 0===u.images[K.uuid]){if(Array.isArray(K)){var O=[];for(var U=0,V=K.length;U<V;U++)K[U].isDataTexture?O.push(J(K[U].image)):O.push(J(K[U]))}else O=J(K);u.images[K.uuid]={uuid:K.uuid,url:O}}G.image=K.uuid}B||(u.textures[(this||q).uuid]=G);return G};t.dispose=function(){this.dispatchEvent({type:"dispose"})};
t.transformUv=function(u){if(300!==(this||q).mapping)return u;u.applyMatrix3((this||q).matrix);if(0>u.x||1<u.x)switch((this||q).wrapS){case 1E3:u.x-=Math.floor(u.x);break;case 1001:u.x=0>u.x?0:1;break;case 1002:u.x=1===Math.abs(Math.floor(u.x)%2)?Math.ceil(u.x)-u.x:u.x-Math.floor(u.x)}if(0>u.y||1<u.y)switch((this||q).wrapT){case 1E3:u.y-=Math.floor(u.y);break;case 1001:u.y=0>u.y?0:1;break;case 1002:u.y=1===Math.abs(Math.floor(u.y)%2)?Math.ceil(u.y)-u.y:u.y-Math.floor(u.y)}(this||q).flipY&&(u.y=1-
u.y);return u};m(D,[{key:"needsUpdate",set:function(u){!0===u&&(this||q).version++}}]);return D}(I);tp.DEFAULT_IMAGE=void 0;tp.DEFAULT_MAPPING=300;tp.prototype.isTexture=!0;var Ck=function(){function z(t,u,B,G){void 0===t&&(t=0);void 0===u&&(u=0);void 0===B&&(B=0);void 0===G&&(G=1);(this||q).x=t;(this||q).y=u;(this||q).z=B;(this||q).w=G}var D=z.prototype;D.set=function(t,u,B,G){(this||q).x=t;(this||q).y=u;(this||q).z=B;(this||q).w=G;return this||q};D.setScalar=function(t){(this||q).x=t;(this||q).y=
t;(this||q).z=t;(this||q).w=t;return this||q};D.setX=function(t){(this||q).x=t;return this||q};D.setY=function(t){(this||q).y=t;return this||q};D.setZ=function(t){(this||q).z=t;return this||q};D.setW=function(t){(this||q).w=t;return this||q};D.setComponent=function(t,u){switch(t){case 0:(this||q).x=u;break;case 1:(this||q).y=u;break;case 2:(this||q).z=u;break;case 3:(this||q).w=u;break;default:throw Error("index is out of range: "+t);}return this||q};D.getComponent=function(t){switch(t){case 0:return(this||
q).x;case 1:return(this||q).y;case 2:return(this||q).z;case 3:return(this||q).w;default:throw Error("index is out of range: "+t);}};D.clone=function(){return new (this||q).constructor((this||q).x,(this||q).y,(this||q).z,(this||q).w)};D.copy=function(t){(this||q).x=t.x;(this||q).y=t.y;(this||q).z=t.z;(this||q).w=void 0!==t.w?t.w:1;return this||q};D.add=function(t,u){if(void 0!==u)return console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,
u);(this||q).x+=t.x;(this||q).y+=t.y;(this||q).z+=t.z;(this||q).w+=t.w;return this||q};D.addScalar=function(t){(this||q).x+=t;(this||q).y+=t;(this||q).z+=t;(this||q).w+=t;return this||q};D.addVectors=function(t,u){(this||q).x=t.x+u.x;(this||q).y=t.y+u.y;(this||q).z=t.z+u.z;(this||q).w=t.w+u.w;return this||q};D.addScaledVector=function(t,u){(this||q).x+=t.x*u;(this||q).y+=t.y*u;(this||q).z+=t.z*u;(this||q).w+=t.w*u;return this||q};D.sub=function(t,u){if(void 0!==u)return console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),
this.subVectors(t,u);(this||q).x-=t.x;(this||q).y-=t.y;(this||q).z-=t.z;(this||q).w-=t.w;return this||q};D.subScalar=function(t){(this||q).x-=t;(this||q).y-=t;(this||q).z-=t;(this||q).w-=t;return this||q};D.subVectors=function(t,u){(this||q).x=t.x-u.x;(this||q).y=t.y-u.y;(this||q).z=t.z-u.z;(this||q).w=t.w-u.w;return this||q};D.multiply=function(t){(this||q).x*=t.x;(this||q).y*=t.y;(this||q).z*=t.z;(this||q).w*=t.w;return this||q};D.multiplyScalar=function(t){(this||q).x*=t;(this||q).y*=t;(this||
q).z*=t;(this||q).w*=t;return this||q};D.applyMatrix4=function(t){var u=(this||q).x,B=(this||q).y,G=(this||q).z,K=(this||q).w;t=t.elements;(this||q).x=t[0]*u+t[4]*B+t[8]*G+t[12]*K;(this||q).y=t[1]*u+t[5]*B+t[9]*G+t[13]*K;(this||q).z=t[2]*u+t[6]*B+t[10]*G+t[14]*K;(this||q).w=t[3]*u+t[7]*B+t[11]*G+t[15]*K;return this||q};D.divideScalar=function(t){return this.multiplyScalar(1/t)};D.setAxisAngleFromQuaternion=function(t){(this||q).w=2*Math.acos(t.w);var u=Math.sqrt(1-t.w*t.w);1E-4>u?((this||q).x=1,(this||
q).y=0,(this||q).z=0):((this||q).x=t.x/u,(this||q).y=t.y/u,(this||q).z=t.z/u);return this||q};D.setAxisAngleFromRotationMatrix=function(t){t=t.elements;var u=t[0];var B=t[4];var G=t[8],K=t[1],O=t[5],U=t[9];var V=t[2];var ca=t[6];var qa=t[10];if(.01>Math.abs(B-K)&&.01>Math.abs(G-V)&&.01>Math.abs(U-ca)){if(.1>Math.abs(B+K)&&.1>Math.abs(G+V)&&.1>Math.abs(U+ca)&&.1>Math.abs(u+O+qa-3))return this.set(1,0,0,0),this||q;t=Math.PI;u=(u+1)/2;O=(O+1)/2;qa=(qa+1)/2;B=(B+K)/4;G=(G+V)/4;U=(U+ca)/4;u>O&&u>qa?.01>
u?(ca=0,B=V=.707106781):(ca=Math.sqrt(u),V=B/ca,B=G/ca):O>qa?.01>O?(ca=.707106781,V=0,B=.707106781):(V=Math.sqrt(O),ca=B/V,B=U/V):.01>qa?(V=ca=.707106781,B=0):(B=Math.sqrt(qa),ca=G/B,V=U/B);this.set(ca,V,B,t);return this||q}t=Math.sqrt((ca-U)*(ca-U)+(G-V)*(G-V)+(K-B)*(K-B));.001>Math.abs(t)&&(t=1);(this||q).x=(ca-U)/t;(this||q).y=(G-V)/t;(this||q).z=(K-B)/t;(this||q).w=Math.acos((u+O+qa-1)/2);return this||q};D.min=function(t){(this||q).x=Math.min((this||q).x,t.x);(this||q).y=Math.min((this||q).y,
t.y);(this||q).z=Math.min((this||q).z,t.z);(this||q).w=Math.min((this||q).w,t.w);return this||q};D.max=function(t){(this||q).x=Math.max((this||q).x,t.x);(this||q).y=Math.max((this||q).y,t.y);(this||q).z=Math.max((this||q).z,t.z);(this||q).w=Math.max((this||q).w,t.w);return this||q};D.clamp=function(t,u){(this||q).x=Math.max(t.x,Math.min(u.x,(this||q).x));(this||q).y=Math.max(t.y,Math.min(u.y,(this||q).y));(this||q).z=Math.max(t.z,Math.min(u.z,(this||q).z));(this||q).w=Math.max(t.w,Math.min(u.w,(this||
q).w));return this||q};D.clampScalar=function(t,u){(this||q).x=Math.max(t,Math.min(u,(this||q).x));(this||q).y=Math.max(t,Math.min(u,(this||q).y));(this||q).z=Math.max(t,Math.min(u,(this||q).z));(this||q).w=Math.max(t,Math.min(u,(this||q).w));return this||q};D.clampLength=function(t,u){var B=this.length();return this.divideScalar(B||1).multiplyScalar(Math.max(t,Math.min(u,B)))};D.floor=function(){(this||q).x=Math.floor((this||q).x);(this||q).y=Math.floor((this||q).y);(this||q).z=Math.floor((this||
q).z);(this||q).w=Math.floor((this||q).w);return this||q};D.ceil=function(){(this||q).x=Math.ceil((this||q).x);(this||q).y=Math.ceil((this||q).y);(this||q).z=Math.ceil((this||q).z);(this||q).w=Math.ceil((this||q).w);return this||q};D.round=function(){(this||q).x=Math.round((this||q).x);(this||q).y=Math.round((this||q).y);(this||q).z=Math.round((this||q).z);(this||q).w=Math.round((this||q).w);return this||q};D.roundToZero=function(){(this||q).x=0>(this||q).x?Math.ceil((this||q).x):Math.floor((this||
q).x);(this||q).y=0>(this||q).y?Math.ceil((this||q).y):Math.floor((this||q).y);(this||q).z=0>(this||q).z?Math.ceil((this||q).z):Math.floor((this||q).z);(this||q).w=0>(this||q).w?Math.ceil((this||q).w):Math.floor((this||q).w);return this||q};D.negate=function(){(this||q).x=-(this||q).x;(this||q).y=-(this||q).y;(this||q).z=-(this||q).z;(this||q).w=-(this||q).w;return this||q};D.dot=function(t){return(this||q).x*t.x+(this||q).y*t.y+(this||q).z*t.z+(this||q).w*t.w};D.lengthSq=function(){return(this||
q).x*(this||q).x+(this||q).y*(this||q).y+(this||q).z*(this||q).z+(this||q).w*(this||q).w};D.length=function(){return Math.sqrt((this||q).x*(this||q).x+(this||q).y*(this||q).y+(this||q).z*(this||q).z+(this||q).w*(this||q).w)};D.manhattanLength=function(){return Math.abs((this||q).x)+Math.abs((this||q).y)+Math.abs((this||q).z)+Math.abs((this||q).w)};D.normalize=function(){return this.divideScalar(this.length()||1)};D.setLength=function(t){return this.normalize().multiplyScalar(t)};D.lerp=function(t,
u){(this||q).x+=(t.x-(this||q).x)*u;(this||q).y+=(t.y-(this||q).y)*u;(this||q).z+=(t.z-(this||q).z)*u;(this||q).w+=(t.w-(this||q).w)*u;return this||q};D.lerpVectors=function(t,u,B){(this||q).x=t.x+(u.x-t.x)*B;(this||q).y=t.y+(u.y-t.y)*B;(this||q).z=t.z+(u.z-t.z)*B;(this||q).w=t.w+(u.w-t.w)*B;return this||q};D.equals=function(t){return t.x===(this||q).x&&t.y===(this||q).y&&t.z===(this||q).z&&t.w===(this||q).w};D.fromArray=function(t,u){void 0===u&&(u=0);(this||q).x=t[u];(this||q).y=t[u+1];(this||q).z=
t[u+2];(this||q).w=t[u+3];return this||q};D.toArray=function(t,u){void 0===t&&(t=[]);void 0===u&&(u=0);t[u]=(this||q).x;t[u+1]=(this||q).y;t[u+2]=(this||q).z;t[u+3]=(this||q).w;return t};D.fromBufferAttribute=function(t,u,B){void 0!==B&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute().");(this||q).x=t.getX(u);(this||q).y=t.getY(u);(this||q).z=t.getZ(u);(this||q).w=t.getW(u);return this||q};D.random=function(){(this||q).x=Math.random();(this||q).y=Math.random();(this||
q).z=Math.random();(this||q).w=Math.random();return this||q};m(z,[{key:"width",get:function(){return(this||q).z},set:function(t){(this||q).z=t}},{key:"height",get:function(){return(this||q).w},set:function(t){(this||q).w=t}}]);return z}();Ck.prototype.isVector4=!0;var Oy=function(z){function D(u,B,G){var K=z.call(this||q)||this||q;K.width=u;K.height=B;K.depth=1;K.scissor=new Ck(0,0,u,B);K.scissorTest=!1;K.viewport=new Ck(0,0,u,B);G=G||{};K.texture=new tp(void 0,G.mapping,G.wrapS,G.wrapT,G.magFilter,
G.minFilter,G.format,G.type,G.anisotropy,G.encoding);K.texture.image={};K.texture.image.width=u;K.texture.image.height=B;K.texture.image.depth=1;K.texture.generateMipmaps=void 0!==G.generateMipmaps?G.generateMipmaps:!1;K.texture.minFilter=void 0!==G.minFilter?G.minFilter:1006;K.depthBuffer=void 0!==G.depthBuffer?G.depthBuffer:!0;K.stencilBuffer=void 0!==G.stencilBuffer?G.stencilBuffer:!1;K.depthTexture=void 0!==G.depthTexture?G.depthTexture:null;return K}r(D,z);var t=D.prototype;t.setTexture=function(u){u.image=
{width:(this||q).width,height:(this||q).height,depth:(this||q).depth};(this||q).texture=u};t.setSize=function(u,B,G){void 0===G&&(G=1);if((this||q).width!==u||(this||q).height!==B||(this||q).depth!==G)(this||q).width=u,(this||q).height=B,(this||q).depth=G,(this||q).texture.image.width=u,(this||q).texture.image.height=B,(this||q).texture.image.depth=G,this.dispose();(this||q).viewport.set(0,0,u,B);(this||q).scissor.set(0,0,u,B)};t.clone=function(){return(new (this||q).constructor).copy(this||q)};t.copy=
function(u){(this||q).width=u.width;(this||q).height=u.height;(this||q).depth=u.depth;(this||q).viewport.copy(u.viewport);(this||q).texture=u.texture.clone();(this||q).depthBuffer=u.depthBuffer;(this||q).stencilBuffer=u.stencilBuffer;(this||q).depthTexture=u.depthTexture;return this||q};t.dispose=function(){this.dispatchEvent({type:"dispose"})};return D}(I);Oy.prototype.isWebGLRenderTarget=!0;var Eea=function(z){function D(t,u,B){t=z.call(this||q,t,u,B)||this||q;t.samples=4;return t}r(D,z);D.prototype.copy=
function(t){z.prototype.copy.call(this||q,t);(this||q).samples=t.samples;return this||q};return D}(Oy);Eea.prototype.isWebGLMultisampleRenderTarget=!0;var lo=function(){function z(t,u,B,G){void 0===t&&(t=0);void 0===u&&(u=0);void 0===B&&(B=0);void 0===G&&(G=1);(this||q)._x=t;(this||q)._y=u;(this||q)._z=B;(this||q)._w=G}z.slerp=function(t,u,B,G){return B.copy(t).slerp(u,G)};z.slerpFlat=function(t,u,B,G,K,O,U){var V=B[G+0],ca=B[G+1],qa=B[G+2];B=B[G+3];G=K[O+0];var Ea=K[O+1],Ra=K[O+2];K=K[O+3];if(0===
U)t[u+0]=V,t[u+1]=ca,t[u+2]=qa,t[u+3]=B;else if(1===U)t[u+0]=G,t[u+1]=Ea,t[u+2]=Ra,t[u+3]=K;else{if(B!==K||V!==G||ca!==Ea||qa!==Ra){O=1-U;var Ua=V*G+ca*Ea+qa*Ra+B*K,ub=0<=Ua?1:-1,nb=1-Ua*Ua;nb>Number.EPSILON&&(nb=Math.sqrt(nb),Ua=Math.atan2(nb,Ua*ub),O=Math.sin(O*Ua)/nb,U=Math.sin(U*Ua)/nb);ub*=U;V=V*O+G*ub;ca=ca*O+Ea*ub;qa=qa*O+Ra*ub;B=B*O+K*ub;O===1-U&&(U=1/Math.sqrt(V*V+ca*ca+qa*qa+B*B),V*=U,ca*=U,qa*=U,B*=U)}t[u]=V;t[u+1]=ca;t[u+2]=qa;t[u+3]=B}};z.multiplyQuaternionsFlat=function(t,u,B,G,K,O){var U=
B[G],V=B[G+1],ca=B[G+2];B=B[G+3];G=K[O];var qa=K[O+1],Ea=K[O+2];K=K[O+3];t[u]=U*K+B*G+V*Ea-ca*qa;t[u+1]=V*K+B*qa+ca*G-U*Ea;t[u+2]=ca*K+B*Ea+U*qa-V*G;t[u+3]=B*K-U*G-V*qa-ca*Ea;return t};var D=z.prototype;D.set=function(t,u,B,G){(this||q)._x=t;(this||q)._y=u;(this||q)._z=B;(this||q)._w=G;this._onChangeCallback();return this||q};D.clone=function(){return new (this||q).constructor((this||q)._x,(this||q)._y,(this||q)._z,(this||q)._w)};D.copy=function(t){(this||q)._x=t.x;(this||q)._y=t.y;(this||q)._z=t.z;
(this||q)._w=t.w;this._onChangeCallback();return this||q};D.setFromEuler=function(t,u){if(!t||!t.isEuler)throw Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var B=t._x,G=t._y,K=t._z;t=t._order;var O=Math.cos,U=Math.sin,V=O(B/2),ca=O(G/2);O=O(K/2);B=U(B/2);G=U(G/2);K=U(K/2);switch(t){case "XYZ":(this||q)._x=B*ca*O+V*G*K;(this||q)._y=V*G*O-B*ca*K;(this||q)._z=V*ca*K+B*G*O;(this||q)._w=V*ca*O-B*G*K;break;case "YXZ":(this||q)._x=B*ca*O+V*G*K;
(this||q)._y=V*G*O-B*ca*K;(this||q)._z=V*ca*K-B*G*O;(this||q)._w=V*ca*O+B*G*K;break;case "ZXY":(this||q)._x=B*ca*O-V*G*K;(this||q)._y=V*G*O+B*ca*K;(this||q)._z=V*ca*K+B*G*O;(this||q)._w=V*ca*O-B*G*K;break;case "ZYX":(this||q)._x=B*ca*O-V*G*K;(this||q)._y=V*G*O+B*ca*K;(this||q)._z=V*ca*K-B*G*O;(this||q)._w=V*ca*O+B*G*K;break;case "YZX":(this||q)._x=B*ca*O+V*G*K;(this||q)._y=V*G*O+B*ca*K;(this||q)._z=V*ca*K-B*G*O;(this||q)._w=V*ca*O-B*G*K;break;case "XZY":(this||q)._x=B*ca*O-V*G*K;(this||q)._y=V*G*
O-B*ca*K;(this||q)._z=V*ca*K+B*G*O;(this||q)._w=V*ca*O+B*G*K;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+t)}!1!==u&&this._onChangeCallback();return this||q};D.setFromAxisAngle=function(t,u){u/=2;var B=Math.sin(u);(this||q)._x=t.x*B;(this||q)._y=t.y*B;(this||q)._z=t.z*B;(this||q)._w=Math.cos(u);this._onChangeCallback();return this||q};D.setFromRotationMatrix=function(t){var u=t.elements,B=u[0];t=u[4];var G=u[8],K=u[1],O=u[5],U=u[9],V=u[2],ca=u[6];u=
u[10];var qa=B+O+u;0<qa?(B=.5/Math.sqrt(qa+1),(this||q)._w=.25/B,(this||q)._x=(ca-U)*B,(this||q)._y=(G-V)*B,(this||q)._z=(K-t)*B):B>O&&B>u?(B=2*Math.sqrt(1+B-O-u),(this||q)._w=(ca-U)/B,(this||q)._x=.25*B,(this||q)._y=(t+K)/B,(this||q)._z=(G+V)/B):O>u?(B=2*Math.sqrt(1+O-B-u),(this||q)._w=(G-V)/B,(this||q)._x=(t+K)/B,(this||q)._y=.25*B,(this||q)._z=(U+ca)/B):(B=2*Math.sqrt(1+u-B-O),(this||q)._w=(K-t)/B,(this||q)._x=(G+V)/B,(this||q)._y=(U+ca)/B,(this||q)._z=.25*B);this._onChangeCallback();return this||
q};D.setFromUnitVectors=function(t,u){var B=t.dot(u)+1;1E-6>B?(B=0,Math.abs(t.x)>Math.abs(t.z)?((this||q)._x=-t.y,(this||q)._y=t.x,(this||q)._z=0):((this||q)._x=0,(this||q)._y=-t.z,(this||q)._z=t.y)):((this||q)._x=t.y*u.z-t.z*u.y,(this||q)._y=t.z*u.x-t.x*u.z,(this||q)._z=t.x*u.y-t.y*u.x);(this||q)._w=B;return this.normalize()};D.angleTo=function(t){return 2*Math.acos(Math.abs(Fh.clamp(this.dot(t),-1,1)))};D.rotateTowards=function(t,u){var B=this.angleTo(t);if(0===B)return this||q;this.slerp(t,Math.min(1,
u/B));return this||q};D.identity=function(){return this.set(0,0,0,1)};D.invert=function(){return this.conjugate()};D.conjugate=function(){(this||q)._x*=-1;(this||q)._y*=-1;(this||q)._z*=-1;this._onChangeCallback();return this||q};D.dot=function(t){return(this||q)._x*t._x+(this||q)._y*t._y+(this||q)._z*t._z+(this||q)._w*t._w};D.lengthSq=function(){return(this||q)._x*(this||q)._x+(this||q)._y*(this||q)._y+(this||q)._z*(this||q)._z+(this||q)._w*(this||q)._w};D.length=function(){return Math.sqrt((this||
q)._x*(this||q)._x+(this||q)._y*(this||q)._y+(this||q)._z*(this||q)._z+(this||q)._w*(this||q)._w)};D.normalize=function(){var t=this.length();0===t?((this||q)._x=0,(this||q)._y=0,(this||q)._z=0,(this||q)._w=1):(t=1/t,(this||q)._x*=t,(this||q)._y*=t,(this||q)._z*=t,(this||q)._w*=t);this._onChangeCallback();return this||q};D.multiply=function(t,u){return void 0!==u?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(t,
u)):this.multiplyQuaternions(this||q,t)};D.premultiply=function(t){return this.multiplyQuaternions(t,this||q)};D.multiplyQuaternions=function(t,u){var B=t._x,G=t._y,K=t._z;t=t._w;var O=u._x,U=u._y,V=u._z;u=u._w;(this||q)._x=B*u+t*O+G*V-K*U;(this||q)._y=G*u+t*U+K*O-B*V;(this||q)._z=K*u+t*V+B*U-G*O;(this||q)._w=t*u-B*O-G*U-K*V;this._onChangeCallback();return this||q};D.slerp=function(t,u){if(0===u)return this||q;if(1===u)return this.copy(t);var B=(this||q)._x,G=(this||q)._y,K=(this||q)._z,O=(this||
q)._w,U=O*t._w+B*t._x+G*t._y+K*t._z;0>U?((this||q)._w=-t._w,(this||q)._x=-t._x,(this||q)._y=-t._y,(this||q)._z=-t._z,U=-U):this.copy(t);if(1<=U)return(this||q)._w=O,(this||q)._x=B,(this||q)._y=G,(this||q)._z=K,this||q;t=1-U*U;if(t<=Number.EPSILON)return U=1-u,(this||q)._w=U*O+u*(this||q)._w,(this||q)._x=U*B+u*(this||q)._x,(this||q)._y=U*G+u*(this||q)._y,(this||q)._z=U*K+u*(this||q)._z,this.normalize(),this._onChangeCallback(),this||q;t=Math.sqrt(t);var V=Math.atan2(t,U);U=Math.sin((1-u)*V)/t;u=Math.sin(u*
V)/t;(this||q)._w=O*U+(this||q)._w*u;(this||q)._x=B*U+(this||q)._x*u;(this||q)._y=G*U+(this||q)._y*u;(this||q)._z=K*U+(this||q)._z*u;this._onChangeCallback();return this||q};D.equals=function(t){return t._x===(this||q)._x&&t._y===(this||q)._y&&t._z===(this||q)._z&&t._w===(this||q)._w};D.fromArray=function(t,u){void 0===u&&(u=0);(this||q)._x=t[u];(this||q)._y=t[u+1];(this||q)._z=t[u+2];(this||q)._w=t[u+3];this._onChangeCallback();return this||q};D.toArray=function(t,u){void 0===t&&(t=[]);void 0===
u&&(u=0);t[u]=(this||q)._x;t[u+1]=(this||q)._y;t[u+2]=(this||q)._z;t[u+3]=(this||q)._w;return t};D.fromBufferAttribute=function(t,u){(this||q)._x=t.getX(u);(this||q)._y=t.getY(u);(this||q)._z=t.getZ(u);(this||q)._w=t.getW(u);return this||q};D._onChange=function(t){(this||q)._onChangeCallback=t;return this||q};D._onChangeCallback=function(){};m(z,[{key:"x",get:function(){return(this||q)._x},set:function(t){(this||q)._x=t;this._onChangeCallback()}},{key:"y",get:function(){return(this||q)._y},set:function(t){(this||
q)._y=t;this._onChangeCallback()}},{key:"z",get:function(){return(this||q)._z},set:function(t){(this||q)._z=t;this._onChangeCallback()}},{key:"w",get:function(){return(this||q)._w},set:function(t){(this||q)._w=t;this._onChangeCallback()}}]);return z}();lo.prototype.isQuaternion=!0;var cc=function(){function z(t,u,B){void 0===t&&(t=0);void 0===u&&(u=0);void 0===B&&(B=0);(this||q).x=t;(this||q).y=u;(this||q).z=B}var D=z.prototype;D.set=function(t,u,B){void 0===B&&(B=(this||q).z);(this||q).x=t;(this||
q).y=u;(this||q).z=B;return this||q};D.setScalar=function(t){(this||q).x=t;(this||q).y=t;(this||q).z=t;return this||q};D.setX=function(t){(this||q).x=t;return this||q};D.setY=function(t){(this||q).y=t;return this||q};D.setZ=function(t){(this||q).z=t;return this||q};D.setComponent=function(t,u){switch(t){case 0:(this||q).x=u;break;case 1:(this||q).y=u;break;case 2:(this||q).z=u;break;default:throw Error("index is out of range: "+t);}return this||q};D.getComponent=function(t){switch(t){case 0:return(this||
q).x;case 1:return(this||q).y;case 2:return(this||q).z;default:throw Error("index is out of range: "+t);}};D.clone=function(){return new (this||q).constructor((this||q).x,(this||q).y,(this||q).z)};D.copy=function(t){(this||q).x=t.x;(this||q).y=t.y;(this||q).z=t.z;return this||q};D.add=function(t,u){if(void 0!==u)return console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,u);(this||q).x+=t.x;(this||q).y+=t.y;(this||q).z+=t.z;return this||
q};D.addScalar=function(t){(this||q).x+=t;(this||q).y+=t;(this||q).z+=t;return this||q};D.addVectors=function(t,u){(this||q).x=t.x+u.x;(this||q).y=t.y+u.y;(this||q).z=t.z+u.z;return this||q};D.addScaledVector=function(t,u){(this||q).x+=t.x*u;(this||q).y+=t.y*u;(this||q).z+=t.z*u;return this||q};D.sub=function(t,u){if(void 0!==u)return console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,u);(this||q).x-=t.x;(this||q).y-=t.y;(this||
q).z-=t.z;return this||q};D.subScalar=function(t){(this||q).x-=t;(this||q).y-=t;(this||q).z-=t;return this||q};D.subVectors=function(t,u){(this||q).x=t.x-u.x;(this||q).y=t.y-u.y;(this||q).z=t.z-u.z;return this||q};D.multiply=function(t,u){if(void 0!==u)return console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(t,u);(this||q).x*=t.x;(this||q).y*=t.y;(this||q).z*=t.z;return this||q};D.multiplyScalar=function(t){(this||
q).x*=t;(this||q).y*=t;(this||q).z*=t;return this||q};D.multiplyVectors=function(t,u){(this||q).x=t.x*u.x;(this||q).y=t.y*u.y;(this||q).z=t.z*u.z;return this||q};D.applyEuler=function(t){t&&t.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order.");return this.applyQuaternion(Fea.setFromEuler(t))};D.applyAxisAngle=function(t,u){return this.applyQuaternion(Fea.setFromAxisAngle(t,u))};D.applyMatrix3=function(t){var u=(this||q).x,B=(this||
q).y,G=(this||q).z;t=t.elements;(this||q).x=t[0]*u+t[3]*B+t[6]*G;(this||q).y=t[1]*u+t[4]*B+t[7]*G;(this||q).z=t[2]*u+t[5]*B+t[8]*G;return this||q};D.applyNormalMatrix=function(t){return this.applyMatrix3(t).normalize()};D.applyMatrix4=function(t){var u=(this||q).x,B=(this||q).y,G=(this||q).z;t=t.elements;var K=1/(t[3]*u+t[7]*B+t[11]*G+t[15]);(this||q).x=(t[0]*u+t[4]*B+t[8]*G+t[12])*K;(this||q).y=(t[1]*u+t[5]*B+t[9]*G+t[13])*K;(this||q).z=(t[2]*u+t[6]*B+t[10]*G+t[14])*K;return this||q};D.applyQuaternion=
function(t){var u=(this||q).x,B=(this||q).y,G=(this||q).z,K=t.x,O=t.y,U=t.z;t=t.w;var V=t*u+O*G-U*B,ca=t*B+U*u-K*G,qa=t*G+K*B-O*u;u=-K*u-O*B-U*G;(this||q).x=V*t+u*-K+ca*-U-qa*-O;(this||q).y=ca*t+u*-O+qa*-K-V*-U;(this||q).z=qa*t+u*-U+V*-O-ca*-K;return this||q};D.project=function(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)};D.unproject=function(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)};D.transformDirection=function(t){var u=
(this||q).x,B=(this||q).y,G=(this||q).z;t=t.elements;(this||q).x=t[0]*u+t[4]*B+t[8]*G;(this||q).y=t[1]*u+t[5]*B+t[9]*G;(this||q).z=t[2]*u+t[6]*B+t[10]*G;return this.normalize()};D.divide=function(t){(this||q).x/=t.x;(this||q).y/=t.y;(this||q).z/=t.z;return this||q};D.divideScalar=function(t){return this.multiplyScalar(1/t)};D.min=function(t){(this||q).x=Math.min((this||q).x,t.x);(this||q).y=Math.min((this||q).y,t.y);(this||q).z=Math.min((this||q).z,t.z);return this||q};D.max=function(t){(this||q).x=
Math.max((this||q).x,t.x);(this||q).y=Math.max((this||q).y,t.y);(this||q).z=Math.max((this||q).z,t.z);return this||q};D.clamp=function(t,u){(this||q).x=Math.max(t.x,Math.min(u.x,(this||q).x));(this||q).y=Math.max(t.y,Math.min(u.y,(this||q).y));(this||q).z=Math.max(t.z,Math.min(u.z,(this||q).z));return this||q};D.clampScalar=function(t,u){(this||q).x=Math.max(t,Math.min(u,(this||q).x));(this||q).y=Math.max(t,Math.min(u,(this||q).y));(this||q).z=Math.max(t,Math.min(u,(this||q).z));return this||q};D.clampLength=
function(t,u){var B=this.length();return this.divideScalar(B||1).multiplyScalar(Math.max(t,Math.min(u,B)))};D.floor=function(){(this||q).x=Math.floor((this||q).x);(this||q).y=Math.floor((this||q).y);(this||q).z=Math.floor((this||q).z);return this||q};D.ceil=function(){(this||q).x=Math.ceil((this||q).x);(this||q).y=Math.ceil((this||q).y);(this||q).z=Math.ceil((this||q).z);return this||q};D.round=function(){(this||q).x=Math.round((this||q).x);(this||q).y=Math.round((this||q).y);(this||q).z=Math.round((this||
q).z);return this||q};D.roundToZero=function(){(this||q).x=0>(this||q).x?Math.ceil((this||q).x):Math.floor((this||q).x);(this||q).y=0>(this||q).y?Math.ceil((this||q).y):Math.floor((this||q).y);(this||q).z=0>(this||q).z?Math.ceil((this||q).z):Math.floor((this||q).z);return this||q};D.negate=function(){(this||q).x=-(this||q).x;(this||q).y=-(this||q).y;(this||q).z=-(this||q).z;return this||q};D.dot=function(t){return(this||q).x*t.x+(this||q).y*t.y+(this||q).z*t.z};D.lengthSq=function(){return(this||
q).x*(this||q).x+(this||q).y*(this||q).y+(this||q).z*(this||q).z};D.length=function(){return Math.sqrt((this||q).x*(this||q).x+(this||q).y*(this||q).y+(this||q).z*(this||q).z)};D.manhattanLength=function(){return Math.abs((this||q).x)+Math.abs((this||q).y)+Math.abs((this||q).z)};D.normalize=function(){return this.divideScalar(this.length()||1)};D.setLength=function(t){return this.normalize().multiplyScalar(t)};D.lerp=function(t,u){(this||q).x+=(t.x-(this||q).x)*u;(this||q).y+=(t.y-(this||q).y)*u;
(this||q).z+=(t.z-(this||q).z)*u;return this||q};D.lerpVectors=function(t,u,B){(this||q).x=t.x+(u.x-t.x)*B;(this||q).y=t.y+(u.y-t.y)*B;(this||q).z=t.z+(u.z-t.z)*B;return this||q};D.cross=function(t,u){return void 0!==u?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(t,u)):this.crossVectors(this||q,t)};D.crossVectors=function(t,u){var B=t.x,G=t.y;t=t.z;var K=u.x,O=u.y;u=u.z;(this||q).x=G*u-t*O;(this||q).y=t*K-B*u;(this||q).z=
B*O-G*K;return this||q};D.projectOnVector=function(t){var u=t.lengthSq();if(0===u)return this.set(0,0,0);u=t.dot(this||q)/u;return this.copy(t).multiplyScalar(u)};D.projectOnPlane=function(t){m_.copy(this||q).projectOnVector(t);return this.sub(m_)};D.reflect=function(t){return this.sub(m_.copy(t).multiplyScalar(2*this.dot(t)))};D.angleTo=function(t){var u=Math.sqrt(this.lengthSq()*t.lengthSq());if(0===u)return Math.PI/2;t=this.dot(t)/u;return Math.acos(Fh.clamp(t,-1,1))};D.distanceTo=function(t){return Math.sqrt(this.distanceToSquared(t))};
D.distanceToSquared=function(t){var u=(this||q).x-t.x,B=(this||q).y-t.y;t=(this||q).z-t.z;return u*u+B*B+t*t};D.manhattanDistanceTo=function(t){return Math.abs((this||q).x-t.x)+Math.abs((this||q).y-t.y)+Math.abs((this||q).z-t.z)};D.setFromSpherical=function(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)};D.setFromSphericalCoords=function(t,u,B){var G=Math.sin(u)*t;(this||q).x=G*Math.sin(B);(this||q).y=Math.cos(u)*t;(this||q).z=G*Math.cos(B);return this||q};D.setFromCylindrical=function(t){return this.setFromCylindricalCoords(t.radius,
t.theta,t.y)};D.setFromCylindricalCoords=function(t,u,B){(this||q).x=t*Math.sin(u);(this||q).y=B;(this||q).z=t*Math.cos(u);return this||q};D.setFromMatrixPosition=function(t){t=t.elements;(this||q).x=t[12];(this||q).y=t[13];(this||q).z=t[14];return this||q};D.setFromMatrixScale=function(t){var u=this.setFromMatrixColumn(t,0).length(),B=this.setFromMatrixColumn(t,1).length();t=this.setFromMatrixColumn(t,2).length();(this||q).x=u;(this||q).y=B;(this||q).z=t;return this||q};D.setFromMatrixColumn=function(t,
u){return this.fromArray(t.elements,4*u)};D.setFromMatrix3Column=function(t,u){return this.fromArray(t.elements,3*u)};D.equals=function(t){return t.x===(this||q).x&&t.y===(this||q).y&&t.z===(this||q).z};D.fromArray=function(t,u){void 0===u&&(u=0);(this||q).x=t[u];(this||q).y=t[u+1];(this||q).z=t[u+2];return this||q};D.toArray=function(t,u){void 0===t&&(t=[]);void 0===u&&(u=0);t[u]=(this||q).x;t[u+1]=(this||q).y;t[u+2]=(this||q).z;return t};D.fromBufferAttribute=function(t,u,B){void 0!==B&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute().");
(this||q).x=t.getX(u);(this||q).y=t.getY(u);(this||q).z=t.getZ(u);return this||q};D.random=function(){(this||q).x=Math.random();(this||q).y=Math.random();(this||q).z=Math.random();return this||q};return z}();cc.prototype.isVector3=!0;var m_=new cc,Fea=new lo,Tq=function(){function z(t,u){void 0===t&&(t=new cc(Infinity,Infinity,Infinity));void 0===u&&(u=new cc(-Infinity,-Infinity,-Infinity));(this||q).min=t;(this||q).max=u}var D=z.prototype;D.set=function(t,u){(this||q).min.copy(t);(this||q).max.copy(u);
return this||q};D.setFromArray=function(t){for(var u=Infinity,B=Infinity,G=Infinity,K=-Infinity,O=-Infinity,U=-Infinity,V=0,ca=t.length;V<ca;V+=3){var qa=t[V],Ea=t[V+1],Ra=t[V+2];qa<u&&(u=qa);Ea<B&&(B=Ea);Ra<G&&(G=Ra);qa>K&&(K=qa);Ea>O&&(O=Ea);Ra>U&&(U=Ra)}(this||q).min.set(u,B,G);(this||q).max.set(K,O,U);return this||q};D.setFromBufferAttribute=function(t){for(var u=Infinity,B=Infinity,G=Infinity,K=-Infinity,O=-Infinity,U=-Infinity,V=0,ca=t.count;V<ca;V++){var qa=t.getX(V),Ea=t.getY(V),Ra=t.getZ(V);
qa<u&&(u=qa);Ea<B&&(B=Ea);Ra<G&&(G=Ra);qa>K&&(K=qa);Ea>O&&(O=Ea);Ra>U&&(U=Ra)}(this||q).min.set(u,B,G);(this||q).max.set(K,O,U);return this||q};D.setFromPoints=function(t){this.makeEmpty();for(var u=0,B=t.length;u<B;u++)this.expandByPoint(t[u]);return this||q};D.setFromCenterAndSize=function(t,u){u=nK.copy(u).multiplyScalar(.5);(this||q).min.copy(t).sub(u);(this||q).max.copy(t).add(u);return this||q};D.setFromObject=function(t){this.makeEmpty();return this.expandByObject(t)};D.clone=function(){return(new (this||
q).constructor).copy(this||q)};D.copy=function(t){(this||q).min.copy(t.min);(this||q).max.copy(t.max);return this||q};D.makeEmpty=function(){(this||q).min.x=(this||q).min.y=(this||q).min.z=Infinity;(this||q).max.x=(this||q).max.y=(this||q).max.z=-Infinity;return this||q};D.isEmpty=function(){return(this||q).max.x<(this||q).min.x||(this||q).max.y<(this||q).min.y||(this||q).max.z<(this||q).min.z};D.getCenter=function(t){void 0===t&&(console.warn("THREE.Box3: .getCenter() target is now required"),t=
new cc);return this.isEmpty()?t.set(0,0,0):t.addVectors((this||q).min,(this||q).max).multiplyScalar(.5)};D.getSize=function(t){void 0===t&&(console.warn("THREE.Box3: .getSize() target is now required"),t=new cc);return this.isEmpty()?t.set(0,0,0):t.subVectors((this||q).max,(this||q).min)};D.expandByPoint=function(t){(this||q).min.min(t);(this||q).max.max(t);return this||q};D.expandByVector=function(t){(this||q).min.sub(t);(this||q).max.add(t);return this||q};D.expandByScalar=function(t){(this||q).min.addScalar(-t);
(this||q).max.addScalar(t);return this||q};D.expandByObject=function(t){t.updateWorldMatrix(!1,!1);var u=t.geometry;void 0!==u&&(null===u.boundingBox&&u.computeBoundingBox(),n_.copy(u.boundingBox),n_.applyMatrix4(t.matrixWorld),this.union(n_));t=t.children;u=0;for(var B=t.length;u<B;u++)this.expandByObject(t[u]);return this||q};D.containsPoint=function(t){return t.x<(this||q).min.x||t.x>(this||q).max.x||t.y<(this||q).min.y||t.y>(this||q).max.y||t.z<(this||q).min.z||t.z>(this||q).max.z?!1:!0};D.containsBox=
function(t){return(this||q).min.x<=t.min.x&&t.max.x<=(this||q).max.x&&(this||q).min.y<=t.min.y&&t.max.y<=(this||q).max.y&&(this||q).min.z<=t.min.z&&t.max.z<=(this||q).max.z};D.getParameter=function(t,u){void 0===u&&(console.warn("THREE.Box3: .getParameter() target is now required"),u=new cc);return u.set((t.x-(this||q).min.x)/((this||q).max.x-(this||q).min.x),(t.y-(this||q).min.y)/((this||q).max.y-(this||q).min.y),(t.z-(this||q).min.z)/((this||q).max.z-(this||q).min.z))};D.intersectsBox=function(t){return t.max.x<
(this||q).min.x||t.min.x>(this||q).max.x||t.max.y<(this||q).min.y||t.min.y>(this||q).max.y||t.max.z<(this||q).min.z||t.min.z>(this||q).max.z?!1:!0};D.intersectsSphere=function(t){this.clampPoint(t.center,nK);return nK.distanceToSquared(t.center)<=t.radius*t.radius};D.intersectsPlane=function(t){if(0<t.normal.x){var u=t.normal.x*(this||q).min.x;var B=t.normal.x*(this||q).max.x}else u=t.normal.x*(this||q).max.x,B=t.normal.x*(this||q).min.x;0<t.normal.y?(u+=t.normal.y*(this||q).min.y,B+=t.normal.y*(this||
q).max.y):(u+=t.normal.y*(this||q).max.y,B+=t.normal.y*(this||q).min.y);0<t.normal.z?(u+=t.normal.z*(this||q).min.z,B+=t.normal.z*(this||q).max.z):(u+=t.normal.z*(this||q).max.z,B+=t.normal.z*(this||q).min.z);return u<=-t.constant&&B>=-t.constant};D.intersectsTriangle=function(t){if(this.isEmpty())return!1;this.getCenter(oK);pR.subVectors((this||q).max,oK);qG.subVectors(t.a,oK);rG.subVectors(t.b,oK);sG.subVectors(t.c,oK);fB.subVectors(rG,qG);gB.subVectors(sG,rG);ED.subVectors(qG,sG);t=[0,-fB.z,fB.y,
0,-gB.z,gB.y,0,-ED.z,ED.y,fB.z,0,-fB.x,gB.z,0,-gB.x,ED.z,0,-ED.x,-fB.y,fB.x,0,-gB.y,gB.x,0,-ED.y,ED.x,0];if(!P(t,qG,rG,sG,pR))return!1;t=[1,0,0,0,1,0,0,0,1];if(!P(t,qG,rG,sG,pR))return!1;qR.crossVectors(fB,gB);t=[qR.x,qR.y,qR.z];return P(t,qG,rG,sG,pR)};D.clampPoint=function(t,u){void 0===u&&(console.warn("THREE.Box3: .clampPoint() target is now required"),u=new cc);return u.copy(t).clamp((this||q).min,(this||q).max)};D.distanceToPoint=function(t){return nK.copy(t).clamp((this||q).min,(this||q).max).sub(t).length()};
D.getBoundingSphere=function(t){void 0===t&&console.error("THREE.Box3: .getBoundingSphere() target is now required");this.getCenter(t.center);t.radius=.5*this.getSize(nK).length();return t};D.intersect=function(t){(this||q).min.max(t.min);(this||q).max.min(t.max);this.isEmpty()&&this.makeEmpty();return this||q};D.union=function(t){(this||q).min.min(t.min);(this||q).max.max(t.max);return this||q};D.applyMatrix4=function(t){if(this.isEmpty())return this||q;Py[0].set((this||q).min.x,(this||q).min.y,
(this||q).min.z).applyMatrix4(t);Py[1].set((this||q).min.x,(this||q).min.y,(this||q).max.z).applyMatrix4(t);Py[2].set((this||q).min.x,(this||q).max.y,(this||q).min.z).applyMatrix4(t);Py[3].set((this||q).min.x,(this||q).max.y,(this||q).max.z).applyMatrix4(t);Py[4].set((this||q).max.x,(this||q).min.y,(this||q).min.z).applyMatrix4(t);Py[5].set((this||q).max.x,(this||q).min.y,(this||q).max.z).applyMatrix4(t);Py[6].set((this||q).max.x,(this||q).max.y,(this||q).min.z).applyMatrix4(t);Py[7].set((this||q).max.x,
(this||q).max.y,(this||q).max.z).applyMatrix4(t);this.setFromPoints(Py);return this||q};D.translate=function(t){(this||q).min.add(t);(this||q).max.add(t);return this||q};D.equals=function(t){return t.min.equals((this||q).min)&&t.max.equals((this||q).max)};return z}();Tq.prototype.isBox3=!0;var Py=[new cc,new cc,new cc,new cc,new cc,new cc,new cc,new cc],nK=new cc,n_=new Tq,qG=new cc,rG=new cc,sG=new cc,fB=new cc,gB=new cc,ED=new cc,oK=new cc,pR=new cc,qR=new cc,xD=new cc,Bya=new Tq,hB=function(){function z(t,
u){void 0===t&&(t=new cc);void 0===u&&(u=-1);(this||q).center=t;(this||q).radius=u}var D=z.prototype;D.set=function(t,u){(this||q).center.copy(t);(this||q).radius=u;return this||q};D.setFromPoints=function(t,u){var B=(this||q).center;void 0!==u?B.copy(u):Bya.setFromPoints(t).getCenter(B);for(var G=u=0,K=t.length;G<K;G++)u=Math.max(u,B.distanceToSquared(t[G]));(this||q).radius=Math.sqrt(u);return this||q};D.copy=function(t){(this||q).center.copy(t.center);(this||q).radius=t.radius;return this||q};
D.isEmpty=function(){return 0>(this||q).radius};D.makeEmpty=function(){(this||q).center.set(0,0,0);(this||q).radius=-1;return this||q};D.containsPoint=function(t){return t.distanceToSquared((this||q).center)<=(this||q).radius*(this||q).radius};D.distanceToPoint=function(t){return t.distanceTo((this||q).center)-(this||q).radius};D.intersectsSphere=function(t){var u=(this||q).radius+t.radius;return t.center.distanceToSquared((this||q).center)<=u*u};D.intersectsBox=function(t){return t.intersectsSphere(this||
q)};D.intersectsPlane=function(t){return Math.abs(t.distanceToPoint((this||q).center))<=(this||q).radius};D.clampPoint=function(t,u){var B=(this||q).center.distanceToSquared(t);void 0===u&&(console.warn("THREE.Sphere: .clampPoint() target is now required"),u=new cc);u.copy(t);B>(this||q).radius*(this||q).radius&&(u.sub((this||q).center).normalize(),u.multiplyScalar((this||q).radius).add((this||q).center));return u};D.getBoundingBox=function(t){void 0===t&&(console.warn("THREE.Sphere: .getBoundingBox() target is now required"),
t=new Tq);if(this.isEmpty())return t.makeEmpty(),t;t.set((this||q).center,(this||q).center);t.expandByScalar((this||q).radius);return t};D.applyMatrix4=function(t){(this||q).center.applyMatrix4(t);(this||q).radius*=t.getMaxScaleOnAxis();return this||q};D.translate=function(t){(this||q).center.add(t);return this||q};D.equals=function(t){return t.center.equals((this||q).center)&&t.radius===(this||q).radius};D.clone=function(){return(new (this||q).constructor).copy(this||q)};return z}(),Qy=new cc,o_=
new cc,rR=new cc,iB=new cc,p_=new cc,sR=new cc,q_=new cc,eB=function(){function z(t,u){void 0===t&&(t=new cc);void 0===u&&(u=new cc(0,0,-1));(this||q).origin=t;(this||q).direction=u}var D=z.prototype;D.set=function(t,u){(this||q).origin.copy(t);(this||q).direction.copy(u);return this||q};D.copy=function(t){(this||q).origin.copy(t.origin);(this||q).direction.copy(t.direction);return this||q};D.at=function(t,u){void 0===u&&(console.warn("THREE.Ray: .at() target is now required"),u=new cc);return u.copy((this||
q).direction).multiplyScalar(t).add((this||q).origin)};D.lookAt=function(t){(this||q).direction.copy(t).sub((this||q).origin).normalize();return this||q};D.recast=function(t){(this||q).origin.copy(this.at(t,Qy));return this||q};D.closestPointToPoint=function(t,u){void 0===u&&(console.warn("THREE.Ray: .closestPointToPoint() target is now required"),u=new cc);u.subVectors(t,(this||q).origin);t=u.dot((this||q).direction);return 0>t?u.copy((this||q).origin):u.copy((this||q).direction).multiplyScalar(t).add((this||
q).origin)};D.distanceToPoint=function(t){return Math.sqrt(this.distanceSqToPoint(t))};D.distanceSqToPoint=function(t){var u=Qy.subVectors(t,(this||q).origin).dot((this||q).direction);if(0>u)return(this||q).origin.distanceToSquared(t);Qy.copy((this||q).direction).multiplyScalar(u).add((this||q).origin);return Qy.distanceToSquared(t)};D.distanceSqToSegment=function(t,u,B,G){o_.copy(t).add(u).multiplyScalar(.5);rR.copy(u).sub(t).normalize();iB.copy((this||q).origin).sub(o_);var K=.5*t.distanceTo(u),
O=-(this||q).direction.dot(rR),U=iB.dot((this||q).direction),V=-iB.dot(rR),ca=iB.lengthSq(),qa=Math.abs(1-O*O);if(0<qa){t=O*V-U;u=O*U-V;var Ea=K*qa;0<=t?u>=-Ea?u<=Ea?(K=1/qa,t*=K,u*=K,O=t*(t+O*u+2*U)+u*(O*t+u+2*V)+ca):(u=K,t=Math.max(0,-(O*u+U)),O=-t*t+u*(u+2*V)+ca):(u=-K,t=Math.max(0,-(O*u+U)),O=-t*t+u*(u+2*V)+ca):u<=-Ea?(t=Math.max(0,-(-O*K+U)),u=0<t?-K:Math.min(Math.max(-K,-V),K),O=-t*t+u*(u+2*V)+ca):u<=Ea?(t=0,u=Math.min(Math.max(-K,-V),K),O=u*(u+2*V)+ca):(t=Math.max(0,-(O*K+U)),u=0<t?K:Math.min(Math.max(-K,
-V),K),O=-t*t+u*(u+2*V)+ca)}else u=0<O?-K:K,t=Math.max(0,-(O*u+U)),O=-t*t+u*(u+2*V)+ca;B&&B.copy((this||q).direction).multiplyScalar(t).add((this||q).origin);G&&G.copy(rR).multiplyScalar(u).add(o_);return O};D.intersectSphere=function(t,u){Qy.subVectors(t.center,(this||q).origin);var B=Qy.dot((this||q).direction),G=Qy.dot(Qy)-B*B;t=t.radius*t.radius;if(G>t)return null;t=Math.sqrt(t-G);G=B-t;B+=t;return 0>G&&0>B?null:0>G?this.at(B,u):this.at(G,u)};D.intersectsSphere=function(t){return this.distanceSqToPoint(t.center)<=
t.radius*t.radius};D.distanceToPlane=function(t){var u=t.normal.dot((this||q).direction);if(0===u)return 0===t.distanceToPoint((this||q).origin)?0:null;t=-((this||q).origin.dot(t.normal)+t.constant)/u;return 0<=t?t:null};D.intersectPlane=function(t,u){t=this.distanceToPlane(t);return null===t?null:this.at(t,u)};D.intersectsPlane=function(t){var u=t.distanceToPoint((this||q).origin);return 0===u||0>t.normal.dot((this||q).direction)*u?!0:!1};D.intersectBox=function(t,u){var B=1/(this||q).direction.x;
var G=1/(this||q).direction.y;var K=1/(this||q).direction.z,O=(this||q).origin;if(0<=B){var U=(t.min.x-O.x)*B;B*=t.max.x-O.x}else U=(t.max.x-O.x)*B,B*=t.min.x-O.x;if(0<=G){var V=(t.min.y-O.y)*G;G*=t.max.y-O.y}else V=(t.max.y-O.y)*G,G*=t.min.y-O.y;if(U>G||V>B)return null;if(V>U||U!==U)U=V;if(G<B||B!==B)B=G;0<=K?(V=(t.min.z-O.z)*K,t=(t.max.z-O.z)*K):(V=(t.max.z-O.z)*K,t=(t.min.z-O.z)*K);if(U>t||V>B)return null;if(V>U||U!==U)U=V;if(t<B||B!==B)B=t;return 0>B?null:this.at(0<=U?U:B,u)};D.intersectsBox=
function(t){return null!==this.intersectBox(t,Qy)};D.intersectTriangle=function(t,u,B,G,K){p_.subVectors(u,t);sR.subVectors(B,t);q_.crossVectors(p_,sR);u=(this||q).direction.dot(q_);if(0<u){if(G)return null;G=1}else if(0>u)G=-1,u=-u;else return null;iB.subVectors((this||q).origin,t);t=G*(this||q).direction.dot(sR.crossVectors(iB,sR));if(0>t)return null;B=G*(this||q).direction.dot(p_.cross(iB));if(0>B||t+B>u)return null;t=-G*iB.dot(q_);return 0>t?null:this.at(t/u,K)};D.applyMatrix4=function(t){(this||
q).origin.applyMatrix4(t);(this||q).direction.transformDirection(t);return this||q};D.equals=function(t){return t.origin.equals((this||q).origin)&&t.direction.equals((this||q).direction)};D.clone=function(){return(new (this||q).constructor).copy(this||q)};return z}(),Ug=function(){function z(){(this||q).elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];0<arguments.length&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}var D=z.prototype;D.set=function(t,u,B,
G,K,O,U,V,ca,qa,Ea,Ra,Ua,ub,nb,ec){var gc=(this||q).elements;gc[0]=t;gc[4]=u;gc[8]=B;gc[12]=G;gc[1]=K;gc[5]=O;gc[9]=U;gc[13]=V;gc[2]=ca;gc[6]=qa;gc[10]=Ea;gc[14]=Ra;gc[3]=Ua;gc[7]=ub;gc[11]=nb;gc[15]=ec;return this||q};D.identity=function(){this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);return this||q};D.clone=function(){return(new z).fromArray((this||q).elements)};D.copy=function(t){var u=(this||q).elements;t=t.elements;u[0]=t[0];u[1]=t[1];u[2]=t[2];u[3]=t[3];u[4]=t[4];u[5]=t[5];u[6]=t[6];u[7]=t[7];u[8]=
t[8];u[9]=t[9];u[10]=t[10];u[11]=t[11];u[12]=t[12];u[13]=t[13];u[14]=t[14];u[15]=t[15];return this||q};D.copyPosition=function(t){var u=(this||q).elements;t=t.elements;u[12]=t[12];u[13]=t[13];u[14]=t[14];return this||q};D.setFromMatrix3=function(t){t=t.elements;this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1);return this||q};D.extractBasis=function(t,u,B){t.setFromMatrixColumn(this||q,0);u.setFromMatrixColumn(this||q,1);B.setFromMatrixColumn(this||q,2);return this||q};D.makeBasis=
function(t,u,B){this.set(t.x,u.x,B.x,0,t.y,u.y,B.y,0,t.z,u.z,B.z,0,0,0,0,1);return this||q};D.extractRotation=function(t){var u=(this||q).elements,B=t.elements,G=1/tG.setFromMatrixColumn(t,0).length(),K=1/tG.setFromMatrixColumn(t,1).length();t=1/tG.setFromMatrixColumn(t,2).length();u[0]=B[0]*G;u[1]=B[1]*G;u[2]=B[2]*G;u[3]=0;u[4]=B[4]*K;u[5]=B[5]*K;u[6]=B[6]*K;u[7]=0;u[8]=B[8]*t;u[9]=B[9]*t;u[10]=B[10]*t;u[11]=0;u[12]=0;u[13]=0;u[14]=0;u[15]=1;return this||q};D.makeRotationFromEuler=function(t){t&&
t.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var u=(this||q).elements,B=t.x,G=t.y,K=t.z,O=Math.cos(B);B=Math.sin(B);var U=Math.cos(G);G=Math.sin(G);var V=Math.cos(K);K=Math.sin(K);if("XYZ"===t.order){t=O*V;var ca=O*K,qa=B*V,Ea=B*K;u[0]=U*V;u[4]=-U*K;u[8]=G;u[1]=ca+qa*G;u[5]=t-Ea*G;u[9]=-B*U;u[2]=Ea-t*G;u[6]=qa+ca*G;u[10]=O*U}else"YXZ"===t.order?(t=U*V,ca=U*K,qa=G*V,Ea=G*K,u[0]=t+Ea*B,u[4]=qa*B-ca,u[8]=O*G,u[1]=O*
K,u[5]=O*V,u[9]=-B,u[2]=ca*B-qa,u[6]=Ea+t*B,u[10]=O*U):"ZXY"===t.order?(t=U*V,ca=U*K,qa=G*V,Ea=G*K,u[0]=t-Ea*B,u[4]=-O*K,u[8]=qa+ca*B,u[1]=ca+qa*B,u[5]=O*V,u[9]=Ea-t*B,u[2]=-O*G,u[6]=B,u[10]=O*U):"ZYX"===t.order?(t=O*V,ca=O*K,qa=B*V,Ea=B*K,u[0]=U*V,u[4]=qa*G-ca,u[8]=t*G+Ea,u[1]=U*K,u[5]=Ea*G+t,u[9]=ca*G-qa,u[2]=-G,u[6]=B*U,u[10]=O*U):"YZX"===t.order?(t=O*U,ca=O*G,qa=B*U,Ea=B*G,u[0]=U*V,u[4]=Ea-t*K,u[8]=qa*K+ca,u[1]=K,u[5]=O*V,u[9]=-B*V,u[2]=-G*V,u[6]=ca*K+qa,u[10]=t-Ea*K):"XZY"===t.order&&(t=O*U,
ca=O*G,qa=B*U,Ea=B*G,u[0]=U*V,u[4]=-K,u[8]=G*V,u[1]=t*K+Ea,u[5]=O*V,u[9]=ca*K-qa,u[2]=qa*K-ca,u[6]=B*V,u[10]=Ea*K+t);u[3]=0;u[7]=0;u[11]=0;u[12]=0;u[13]=0;u[14]=0;u[15]=1;return this||q};D.makeRotationFromQuaternion=function(t){return this.compose(Cya,t,Dya)};D.lookAt=function(t,u,B){var G=(this||q).elements;aq.subVectors(t,u);0===aq.lengthSq()&&(aq.z=1);aq.normalize();jB.crossVectors(B,aq);0===jB.lengthSq()&&(1===Math.abs(B.z)?aq.x+=1E-4:aq.z+=1E-4,aq.normalize(),jB.crossVectors(B,aq));jB.normalize();
tR.crossVectors(aq,jB);G[0]=jB.x;G[4]=tR.x;G[8]=aq.x;G[1]=jB.y;G[5]=tR.y;G[9]=aq.y;G[2]=jB.z;G[6]=tR.z;G[10]=aq.z;return this||q};D.multiply=function(t,u){return void 0!==u?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(t,u)):this.multiplyMatrices(this||q,t)};D.premultiply=function(t){return this.multiplyMatrices(t,this||q)};D.multiplyMatrices=function(t,u){var B=t.elements,G=u.elements;u=(this||q).elements;t=
B[0];var K=B[4],O=B[8],U=B[12],V=B[1],ca=B[5],qa=B[9],Ea=B[13],Ra=B[2],Ua=B[6],ub=B[10],nb=B[14],ec=B[3],gc=B[7],Ac=B[11];B=B[15];var Lc=G[0],ld=G[4],cd=G[8],Nc=G[12],Oc=G[1],jd=G[5],Ed=G[9],Ad=G[13],de=G[2],rf=G[6],md=G[10],qd=G[14],Pd=G[3],kg=G[7],Me=G[11];G=G[15];u[0]=t*Lc+K*Oc+O*de+U*Pd;u[4]=t*ld+K*jd+O*rf+U*kg;u[8]=t*cd+K*Ed+O*md+U*Me;u[12]=t*Nc+K*Ad+O*qd+U*G;u[1]=V*Lc+ca*Oc+qa*de+Ea*Pd;u[5]=V*ld+ca*jd+qa*rf+Ea*kg;u[9]=V*cd+ca*Ed+qa*md+Ea*Me;u[13]=V*Nc+ca*Ad+qa*qd+Ea*G;u[2]=Ra*Lc+Ua*Oc+ub*de+
nb*Pd;u[6]=Ra*ld+Ua*jd+ub*rf+nb*kg;u[10]=Ra*cd+Ua*Ed+ub*md+nb*Me;u[14]=Ra*Nc+Ua*Ad+ub*qd+nb*G;u[3]=ec*Lc+gc*Oc+Ac*de+B*Pd;u[7]=ec*ld+gc*jd+Ac*rf+B*kg;u[11]=ec*cd+gc*Ed+Ac*md+B*Me;u[15]=ec*Nc+gc*Ad+Ac*qd+B*G;return this||q};D.multiplyScalar=function(t){var u=(this||q).elements;u[0]*=t;u[4]*=t;u[8]*=t;u[12]*=t;u[1]*=t;u[5]*=t;u[9]*=t;u[13]*=t;u[2]*=t;u[6]*=t;u[10]*=t;u[14]*=t;u[3]*=t;u[7]*=t;u[11]*=t;u[15]*=t;return this||q};D.determinant=function(){var t=(this||q).elements,u=t[0],B=t[4],G=t[8],K=t[12],
O=t[1],U=t[5],V=t[9],ca=t[13],qa=t[2],Ea=t[6],Ra=t[10],Ua=t[14];return t[3]*(+K*V*Ea-G*ca*Ea-K*U*Ra+B*ca*Ra+G*U*Ua-B*V*Ua)+t[7]*(+u*V*Ua-u*ca*Ra+K*O*Ra-G*O*Ua+G*ca*qa-K*V*qa)+t[11]*(+u*ca*Ea-u*U*Ua-K*O*Ea+B*O*Ua+K*U*qa-B*ca*qa)+t[15]*(-G*U*qa-u*V*Ea+u*U*Ra+G*O*Ea-B*O*Ra+B*V*qa)};D.transpose=function(){var t=(this||q).elements;var u=t[1];t[1]=t[4];t[4]=u;u=t[2];t[2]=t[8];t[8]=u;u=t[6];t[6]=t[9];t[9]=u;u=t[3];t[3]=t[12];t[12]=u;u=t[7];t[7]=t[13];t[13]=u;u=t[11];t[11]=t[14];t[14]=u;return this||q};D.setPosition=
function(t,u,B){var G=(this||q).elements;t.isVector3?(G[12]=t.x,G[13]=t.y,G[14]=t.z):(G[12]=t,G[13]=u,G[14]=B);return this||q};D.invert=function(){var t=(this||q).elements,u=t[0],B=t[1],G=t[2],K=t[3],O=t[4],U=t[5],V=t[6],ca=t[7],qa=t[8],Ea=t[9],Ra=t[10],Ua=t[11],ub=t[12],nb=t[13],ec=t[14],gc=t[15],Ac=Ea*ec*ca-nb*Ra*ca+nb*V*Ua-U*ec*Ua-Ea*V*gc+U*Ra*gc,Lc=ub*Ra*ca-qa*ec*ca-ub*V*Ua+O*ec*Ua+qa*V*gc-O*Ra*gc,ld=qa*nb*ca-ub*Ea*ca+ub*U*Ua-O*nb*Ua-qa*U*gc+O*Ea*gc,cd=ub*Ea*V-qa*nb*V-ub*U*Ra+O*nb*Ra+qa*U*ec-
O*Ea*ec,Nc=u*Ac+B*Lc+G*ld+K*cd;if(0===Nc)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);Nc=1/Nc;t[0]=Ac*Nc;t[1]=(nb*Ra*K-Ea*ec*K-nb*G*Ua+B*ec*Ua+Ea*G*gc-B*Ra*gc)*Nc;t[2]=(U*ec*K-nb*V*K+nb*G*ca-B*ec*ca-U*G*gc+B*V*gc)*Nc;t[3]=(Ea*V*K-U*Ra*K-Ea*G*ca+B*Ra*ca+U*G*Ua-B*V*Ua)*Nc;t[4]=Lc*Nc;t[5]=(qa*ec*K-ub*Ra*K+ub*G*Ua-u*ec*Ua-qa*G*gc+u*Ra*gc)*Nc;t[6]=(ub*V*K-O*ec*K-ub*G*ca+u*ec*ca+O*G*gc-u*V*gc)*Nc;t[7]=(O*Ra*K-qa*V*K+qa*G*ca-u*Ra*ca-O*G*Ua+u*V*Ua)*Nc;t[8]=ld*Nc;t[9]=(ub*Ea*K-qa*nb*K-ub*B*Ua+u*nb*Ua+
qa*B*gc-u*Ea*gc)*Nc;t[10]=(O*nb*K-ub*U*K+ub*B*ca-u*nb*ca-O*B*gc+u*U*gc)*Nc;t[11]=(qa*U*K-O*Ea*K-qa*B*ca+u*Ea*ca+O*B*Ua-u*U*Ua)*Nc;t[12]=cd*Nc;t[13]=(qa*nb*G-ub*Ea*G+ub*B*Ra-u*nb*Ra-qa*B*ec+u*Ea*ec)*Nc;t[14]=(ub*U*G-O*nb*G-ub*B*V+u*nb*V+O*B*ec-u*U*ec)*Nc;t[15]=(O*Ea*G-qa*U*G+qa*B*V-u*Ea*V-O*B*Ra+u*U*Ra)*Nc;return this||q};D.scale=function(t){var u=(this||q).elements,B=t.x,G=t.y;t=t.z;u[0]*=B;u[4]*=G;u[8]*=t;u[1]*=B;u[5]*=G;u[9]*=t;u[2]*=B;u[6]*=G;u[10]*=t;u[3]*=B;u[7]*=G;u[11]*=t;return this||q};D.getMaxScaleOnAxis=
function(){var t=(this||q).elements;return Math.sqrt(Math.max(t[0]*t[0]+t[1]*t[1]+t[2]*t[2],t[4]*t[4]+t[5]*t[5]+t[6]*t[6],t[8]*t[8]+t[9]*t[9]+t[10]*t[10]))};D.makeTranslation=function(t,u,B){this.set(1,0,0,t,0,1,0,u,0,0,1,B,0,0,0,1);return this||q};D.makeRotationX=function(t){var u=Math.cos(t);t=Math.sin(t);this.set(1,0,0,0,0,u,-t,0,0,t,u,0,0,0,0,1);return this||q};D.makeRotationY=function(t){var u=Math.cos(t);t=Math.sin(t);this.set(u,0,t,0,0,1,0,0,-t,0,u,0,0,0,0,1);return this||q};D.makeRotationZ=
function(t){var u=Math.cos(t);t=Math.sin(t);this.set(u,-t,0,0,t,u,0,0,0,0,1,0,0,0,0,1);return this||q};D.makeRotationAxis=function(t,u){var B=Math.cos(u);u=Math.sin(u);var G=1-B,K=t.x,O=t.y;t=t.z;var U=G*K,V=G*O;this.set(U*K+B,U*O-u*t,U*t+u*O,0,U*O+u*t,V*O+B,V*t-u*K,0,U*t-u*O,V*t+u*K,G*t*t+B,0,0,0,0,1);return this||q};D.makeScale=function(t,u,B){this.set(t,0,0,0,0,u,0,0,0,0,B,0,0,0,0,1);return this||q};D.makeShear=function(t,u,B){this.set(1,u,B,0,t,1,B,0,t,u,1,0,0,0,0,1);return this||q};D.compose=
function(t,u,B){var G=(this||q).elements,K=u._x,O=u._y,U=u._z,V=u._w,ca=K+K,qa=O+O,Ea=U+U;u=K*ca;var Ra=K*qa;K*=Ea;var Ua=O*qa;O*=Ea;U*=Ea;ca*=V;qa*=V;V*=Ea;Ea=B.x;var ub=B.y;B=B.z;G[0]=(1-(Ua+U))*Ea;G[1]=(Ra+V)*Ea;G[2]=(K-qa)*Ea;G[3]=0;G[4]=(Ra-V)*ub;G[5]=(1-(u+U))*ub;G[6]=(O+ca)*ub;G[7]=0;G[8]=(K+qa)*B;G[9]=(O-ca)*B;G[10]=(1-(u+Ua))*B;G[11]=0;G[12]=t.x;G[13]=t.y;G[14]=t.z;G[15]=1;return this||q};D.decompose=function(t,u,B){var G=(this||q).elements,K=tG.set(G[0],G[1],G[2]).length(),O=tG.set(G[4],
G[5],G[6]).length(),U=tG.set(G[8],G[9],G[10]).length();0>this.determinant()&&(K=-K);t.x=G[12];t.y=G[13];t.z=G[14];an.copy(this||q);t=1/K;G=1/O;var V=1/U;an.elements[0]*=t;an.elements[1]*=t;an.elements[2]*=t;an.elements[4]*=G;an.elements[5]*=G;an.elements[6]*=G;an.elements[8]*=V;an.elements[9]*=V;an.elements[10]*=V;u.setFromRotationMatrix(an);B.x=K;B.y=O;B.z=U;return this||q};D.makePerspective=function(t,u,B,G,K,O){void 0===O&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");
var U=(this||q).elements;U[0]=2*K/(u-t);U[4]=0;U[8]=(u+t)/(u-t);U[12]=0;U[1]=0;U[5]=2*K/(B-G);U[9]=(B+G)/(B-G);U[13]=0;U[2]=0;U[6]=0;U[10]=-(O+K)/(O-K);U[14]=-2*O*K/(O-K);U[3]=0;U[7]=0;U[11]=-1;U[15]=0;return this||q};D.makeOrthographic=function(t,u,B,G,K,O){var U=(this||q).elements,V=1/(u-t),ca=1/(B-G),qa=1/(O-K);U[0]=2*V;U[4]=0;U[8]=0;U[12]=-((u+t)*V);U[1]=0;U[5]=2*ca;U[9]=0;U[13]=-((B+G)*ca);U[2]=0;U[6]=0;U[10]=-2*qa;U[14]=-((O+K)*qa);U[3]=0;U[7]=0;U[11]=0;U[15]=1;return this||q};D.equals=function(t){var u=
(this||q).elements;t=t.elements;for(var B=0;16>B;B++)if(u[B]!==t[B])return!1;return!0};D.fromArray=function(t,u){void 0===u&&(u=0);for(var B=0;16>B;B++)(this||q).elements[B]=t[B+u];return this||q};D.toArray=function(t,u){void 0===t&&(t=[]);void 0===u&&(u=0);var B=(this||q).elements;t[u]=B[0];t[u+1]=B[1];t[u+2]=B[2];t[u+3]=B[3];t[u+4]=B[4];t[u+5]=B[5];t[u+6]=B[6];t[u+7]=B[7];t[u+8]=B[8];t[u+9]=B[9];t[u+10]=B[10];t[u+11]=B[11];t[u+12]=B[12];t[u+13]=B[13];t[u+14]=B[14];t[u+15]=B[15];return t};return z}();
Ug.prototype.isMatrix4=!0;var tG=new cc,an=new Ug,Cya=new cc(0,0,0),Dya=new cc(1,1,1),jB=new cc,tR=new cc,aq=new cc,Gea=new Ug,Hea=new lo,TJ=function(){function z(t,u,B,G){void 0===t&&(t=0);void 0===u&&(u=0);void 0===B&&(B=0);void 0===G&&(G=z.DefaultOrder);(this||q)._x=t;(this||q)._y=u;(this||q)._z=B;(this||q)._order=G}var D=z.prototype;D.set=function(t,u,B,G){(this||q)._x=t;(this||q)._y=u;(this||q)._z=B;(this||q)._order=G||(this||q)._order;this._onChangeCallback();return this||q};D.clone=function(){return new (this||
q).constructor((this||q)._x,(this||q)._y,(this||q)._z,(this||q)._order)};D.copy=function(t){(this||q)._x=t._x;(this||q)._y=t._y;(this||q)._z=t._z;(this||q)._order=t._order;this._onChangeCallback();return this||q};D.setFromRotationMatrix=function(t,u,B){var G=Fh.clamp,K=t.elements;t=K[0];var O=K[4],U=K[8],V=K[1],ca=K[5],qa=K[9],Ea=K[2],Ra=K[6];K=K[10];u=u||(this||q)._order;switch(u){case "XYZ":(this||q)._y=Math.asin(G(U,-1,1));.9999999>Math.abs(U)?((this||q)._x=Math.atan2(-qa,K),(this||q)._z=Math.atan2(-O,
t)):((this||q)._x=Math.atan2(Ra,ca),(this||q)._z=0);break;case "YXZ":(this||q)._x=Math.asin(-G(qa,-1,1));.9999999>Math.abs(qa)?((this||q)._y=Math.atan2(U,K),(this||q)._z=Math.atan2(V,ca)):((this||q)._y=Math.atan2(-Ea,t),(this||q)._z=0);break;case "ZXY":(this||q)._x=Math.asin(G(Ra,-1,1));.9999999>Math.abs(Ra)?((this||q)._y=Math.atan2(-Ea,K),(this||q)._z=Math.atan2(-O,ca)):((this||q)._y=0,(this||q)._z=Math.atan2(V,t));break;case "ZYX":(this||q)._y=Math.asin(-G(Ea,-1,1));.9999999>Math.abs(Ea)?((this||
q)._x=Math.atan2(Ra,K),(this||q)._z=Math.atan2(V,t)):((this||q)._x=0,(this||q)._z=Math.atan2(-O,ca));break;case "YZX":(this||q)._z=Math.asin(G(V,-1,1));.9999999>Math.abs(V)?((this||q)._x=Math.atan2(-qa,ca),(this||q)._y=Math.atan2(-Ea,t)):((this||q)._x=0,(this||q)._y=Math.atan2(U,K));break;case "XZY":(this||q)._z=Math.asin(-G(O,-1,1));.9999999>Math.abs(O)?((this||q)._x=Math.atan2(Ra,ca),(this||q)._y=Math.atan2(U,t)):((this||q)._x=Math.atan2(-qa,K),(this||q)._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+
u)}(this||q)._order=u;!1!==B&&this._onChangeCallback();return this||q};D.setFromQuaternion=function(t,u,B){Gea.makeRotationFromQuaternion(t);return this.setFromRotationMatrix(Gea,u,B)};D.setFromVector3=function(t,u){return this.set(t.x,t.y,t.z,u||(this||q)._order)};D.reorder=function(t){Hea.setFromEuler(this||q);return this.setFromQuaternion(Hea,t)};D.equals=function(t){return t._x===(this||q)._x&&t._y===(this||q)._y&&t._z===(this||q)._z&&t._order===(this||q)._order};D.fromArray=function(t){(this||
q)._x=t[0];(this||q)._y=t[1];(this||q)._z=t[2];void 0!==t[3]&&((this||q)._order=t[3]);this._onChangeCallback();return this||q};D.toArray=function(t,u){void 0===t&&(t=[]);void 0===u&&(u=0);t[u]=(this||q)._x;t[u+1]=(this||q)._y;t[u+2]=(this||q)._z;t[u+3]=(this||q)._order;return t};D.toVector3=function(t){return t?t.set((this||q)._x,(this||q)._y,(this||q)._z):new cc((this||q)._x,(this||q)._y,(this||q)._z)};D._onChange=function(t){(this||q)._onChangeCallback=t;return this||q};D._onChangeCallback=function(){};
m(z,[{key:"x",get:function(){return(this||q)._x},set:function(t){(this||q)._x=t;this._onChangeCallback()}},{key:"y",get:function(){return(this||q)._y},set:function(t){(this||q)._y=t;this._onChangeCallback()}},{key:"z",get:function(){return(this||q)._z},set:function(t){(this||q)._z=t;this._onChangeCallback()}},{key:"order",get:function(){return(this||q)._order},set:function(t){(this||q)._order=t;this._onChangeCallback()}}]);return z}();TJ.prototype.isEuler=!0;TJ.DefaultOrder="XYZ";TJ.RotationOrders=
"XYZ YZX ZXY XZY YXZ ZYX".split(" ");var QZ=function(){function z(){(this||q).mask=1}var D=z.prototype;D.set=function(t){(this||q).mask=1<<t|0};D.enable=function(t){(this||q).mask=(this||q).mask|1<<t|0};D.enableAll=function(){(this||q).mask=-1};D.toggle=function(t){(this||q).mask^=1<<t|0};D.disable=function(t){(this||q).mask&=~(1<<t|0)};D.disableAll=function(){(this||q).mask=0};D.test=function(t){return 0!==((this||q).mask&t.mask)};return z}(),iya=0,Iea=new cc,uG=new lo,Ry=new Ug,uR=new cc,pK=new cc,
Eya=new cc,Fya=new lo,Jea=new cc(1,0,0),Kea=new cc(0,1,0),Lea=new cc(0,0,1),Gya={type:"added"},Mea={type:"removed"};N.DefaultUp=new cc(0,1,0);N.DefaultMatrixAutoUpdate=!0;N.prototype=Object.assign(Object.create(I.prototype),{constructor:N,isObject3D:!0,onBeforeRender:function(){},onAfterRender:function(){},applyMatrix4:function(z){(this||q).matrixAutoUpdate&&this.updateMatrix();(this||q).matrix.premultiply(z);(this||q).matrix.decompose((this||q).position,(this||q).quaternion,(this||q).scale)},applyQuaternion:function(z){(this||
q).quaternion.premultiply(z);return this||q},setRotationFromAxisAngle:function(z,D){(this||q).quaternion.setFromAxisAngle(z,D)},setRotationFromEuler:function(z){(this||q).quaternion.setFromEuler(z,!0)},setRotationFromMatrix:function(z){(this||q).quaternion.setFromRotationMatrix(z)},setRotationFromQuaternion:function(z){(this||q).quaternion.copy(z)},rotateOnAxis:function(z,D){uG.setFromAxisAngle(z,D);(this||q).quaternion.multiply(uG);return this||q},rotateOnWorldAxis:function(z,D){uG.setFromAxisAngle(z,
D);(this||q).quaternion.premultiply(uG);return this||q},rotateX:function(z){return this.rotateOnAxis(Jea,z)},rotateY:function(z){return this.rotateOnAxis(Kea,z)},rotateZ:function(z){return this.rotateOnAxis(Lea,z)},translateOnAxis:function(z,D){Iea.copy(z).applyQuaternion((this||q).quaternion);(this||q).position.add(Iea.multiplyScalar(D));return this||q},translateX:function(z){return this.translateOnAxis(Jea,z)},translateY:function(z){return this.translateOnAxis(Kea,z)},translateZ:function(z){return this.translateOnAxis(Lea,
z)},localToWorld:function(z){return z.applyMatrix4((this||q).matrixWorld)},worldToLocal:function(z){return z.applyMatrix4(Ry.copy((this||q).matrixWorld).invert())},lookAt:function(z,D,t){z.isVector3?uR.copy(z):uR.set(z,D,t);z=(this||q).parent;this.updateWorldMatrix(!0,!1);pK.setFromMatrixPosition((this||q).matrixWorld);(this||q).isCamera||(this||q).isLight?Ry.lookAt(pK,uR,(this||q).up):Ry.lookAt(uR,pK,(this||q).up);(this||q).quaternion.setFromRotationMatrix(Ry);z&&(Ry.extractRotation(z.matrixWorld),
uG.setFromRotationMatrix(Ry),(this||q).quaternion.premultiply(uG.invert()))},add:function(z){if(1<arguments.length){for(var D=0;D<arguments.length;D++)this.add(arguments[D]);return this||q}if(z===(this||q))return console.error("THREE.Object3D.add: object can't be added as a child of itself.",z),this||q;z&&z.isObject3D?(null!==z.parent&&z.parent.remove(z),z.parent=this||q,(this||q).children.push(z),z.dispatchEvent(Gya)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",
z);return this||q},remove:function(z){if(1<arguments.length){for(var D=0;D<arguments.length;D++)this.remove(arguments[D]);return this||q}D=(this||q).children.indexOf(z);-1!==D&&(z.parent=null,(this||q).children.splice(D,1),z.dispatchEvent(Mea));return this||q},clear:function(){for(var z=0;z<(this||q).children.length;z++){var D=(this||q).children[z];D.parent=null;D.dispatchEvent(Mea)}(this||q).children.length=0;return this||q},attach:function(z){this.updateWorldMatrix(!0,!1);Ry.copy((this||q).matrixWorld).invert();
null!==z.parent&&(z.parent.updateWorldMatrix(!0,!1),Ry.multiply(z.parent.matrixWorld));z.applyMatrix4(Ry);this.add(z);z.updateWorldMatrix(!1,!0);return this||q},getObjectById:function(z){return this.getObjectByProperty("id",z)},getObjectByName:function(z){return this.getObjectByProperty("name",z)},getObjectByProperty:function(z,D){if((this||q)[z]===D)return this||q;for(var t=0,u=(this||q).children.length;t<u;t++){var B=(this||q).children[t].getObjectByProperty(z,D);if(void 0!==B)return B}},getWorldPosition:function(z){void 0===
z&&(console.warn("THREE.Object3D: .getWorldPosition() target is now required"),z=new cc);this.updateWorldMatrix(!0,!1);return z.setFromMatrixPosition((this||q).matrixWorld)},getWorldQuaternion:function(z){void 0===z&&(console.warn("THREE.Object3D: .getWorldQuaternion() target is now required"),z=new lo);this.updateWorldMatrix(!0,!1);(this||q).matrixWorld.decompose(pK,z,Eya);return z},getWorldScale:function(z){void 0===z&&(console.warn("THREE.Object3D: .getWorldScale() target is now required"),z=new cc);
this.updateWorldMatrix(!0,!1);(this||q).matrixWorld.decompose(pK,Fya,z);return z},getWorldDirection:function(z){void 0===z&&(console.warn("THREE.Object3D: .getWorldDirection() target is now required"),z=new cc);this.updateWorldMatrix(!0,!1);var D=(this||q).matrixWorld.elements;return z.set(D[8],D[9],D[10]).normalize()},raycast:function(){},traverse:function(z){z(this||q);for(var D=(this||q).children,t=0,u=D.length;t<u;t++)D[t].traverse(z)},traverseVisible:function(z){if(!1!==(this||q).visible){z(this||
q);for(var D=(this||q).children,t=0,u=D.length;t<u;t++)D[t].traverseVisible(z)}},traverseAncestors:function(z){var D=(this||q).parent;null!==D&&(z(D),D.traverseAncestors(z))},updateMatrix:function(){(this||q).matrix.compose((this||q).position,(this||q).quaternion,(this||q).scale);(this||q).matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(z){(this||q).matrixAutoUpdate&&this.updateMatrix();if((this||q).matrixWorldNeedsUpdate||z)null===(this||q).parent?(this||q).matrixWorld.copy((this||q).matrix):
(this||q).matrixWorld.multiplyMatrices((this||q).parent.matrixWorld,(this||q).matrix),(this||q).matrixWorldNeedsUpdate=!1,z=!0;for(var D=(this||q).children,t=0,u=D.length;t<u;t++)D[t].updateMatrixWorld(z)},updateWorldMatrix:function(z,D){var t=(this||q).parent;!0===z&&null!==t&&t.updateWorldMatrix(!0,!1);(this||q).matrixAutoUpdate&&this.updateMatrix();null===(this||q).parent?(this||q).matrixWorld.copy((this||q).matrix):(this||q).matrixWorld.multiplyMatrices((this||q).parent.matrixWorld,(this||q).matrix);
if(!0===D)for(z=(this||q).children,D=0,t=z.length;D<t;D++)z[D].updateWorldMatrix(!1,!0)},toJSON:function(z){function D(Ea,Ra){void 0===Ea[Ra.uuid]&&(Ea[Ra.uuid]=Ra.toJSON(z));return Ra.uuid}function t(Ea){var Ra=[],Ua;for(Ua in Ea){var ub=Ea[Ua];delete ub.metadata;Ra.push(ub)}return Ra}var u=void 0===z||"string"===typeof z,B={};u&&(z={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{}},B.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});var G={};
G.uuid=(this||q).uuid;G.type=(this||q).type;""!==(this||q).name&&(G.name=(this||q).name);!0===(this||q).castShadow&&(G.castShadow=!0);!0===(this||q).receiveShadow&&(G.receiveShadow=!0);!1===(this||q).visible&&(G.visible=!1);!1===(this||q).frustumCulled&&(G.frustumCulled=!1);0!==(this||q).renderOrder&&(G.renderOrder=(this||q).renderOrder);"{}"!==JSON.stringify((this||q).userData)&&(G.userData=(this||q).userData);G.layers=(this||q).layers.mask;G.matrix=(this||q).matrix.toArray();!1===(this||q).matrixAutoUpdate&&
(G.matrixAutoUpdate=!1);(this||q).isInstancedMesh&&(G.type="InstancedMesh",G.count=(this||q).count,G.instanceMatrix=(this||q).instanceMatrix.toJSON());if((this||q).isMesh||(this||q).isLine||(this||q).isPoints){G.geometry=D(z.geometries,(this||q).geometry);var K=(this||q).geometry.parameters;if(void 0!==K&&void 0!==K.shapes)if(K=K.shapes,Array.isArray(K))for(var O=0,U=K.length;O<U;O++)D(z.shapes,K[O]);else D(z.shapes,K)}(this||q).isSkinnedMesh&&(G.bindMode=(this||q).bindMode,G.bindMatrix=(this||q).bindMatrix.toArray(),
void 0!==(this||q).skeleton&&(D(z.skeletons,(this||q).skeleton),G.skeleton=(this||q).skeleton.uuid));if(void 0!==(this||q).material)if(Array.isArray((this||q).material)){K=[];O=0;for(U=(this||q).material.length;O<U;O++)K.push(D(z.materials,(this||q).material[O]));G.material=K}else G.material=D(z.materials,(this||q).material);if(0<(this||q).children.length)for(G.children=[],K=0;K<(this||q).children.length;K++)G.children.push((this||q).children[K].toJSON(z).object);if(0<(this||q).animations.length)for(G.animations=
[],K=0;K<(this||q).animations.length;K++)G.animations.push(D(z.animations,(this||q).animations[K]));if(u){u=t(z.geometries);K=t(z.materials);O=t(z.textures);U=t(z.images);var V=t(z.shapes),ca=t(z.skeletons),qa=t(z.animations);0<u.length&&(B.geometries=u);0<K.length&&(B.materials=K);0<O.length&&(B.textures=O);0<U.length&&(B.images=U);0<V.length&&(B.shapes=V);0<ca.length&&(B.skeletons=ca);0<qa.length&&(B.animations=qa)}B.object=G;return B},clone:function(z){return(new (this||q).constructor).copy(this||
q,z)},copy:function(z,D){void 0===D&&(D=!0);(this||q).name=z.name;(this||q).up.copy(z.up);(this||q).position.copy(z.position);(this||q).rotation.order=z.rotation.order;(this||q).quaternion.copy(z.quaternion);(this||q).scale.copy(z.scale);(this||q).matrix.copy(z.matrix);(this||q).matrixWorld.copy(z.matrixWorld);(this||q).matrixAutoUpdate=z.matrixAutoUpdate;(this||q).matrixWorldNeedsUpdate=z.matrixWorldNeedsUpdate;(this||q).layers.mask=z.layers.mask;(this||q).visible=z.visible;(this||q).castShadow=
z.castShadow;(this||q).receiveShadow=z.receiveShadow;(this||q).frustumCulled=z.frustumCulled;(this||q).renderOrder=z.renderOrder;(this||q).userData=JSON.parse(JSON.stringify(z.userData));if(!0===D)for(D=0;D<z.children.length;D++)this.add(z.children[D].clone());return this||q}});var r_=new cc,Hya=new cc,Iya=new Cn,gv=function(){function z(t,u){void 0===t&&(t=new cc(1,0,0));void 0===u&&(u=0);(this||q).normal=t;(this||q).constant=u}var D=z.prototype;D.set=function(t,u){(this||q).normal.copy(t);(this||
q).constant=u;return this||q};D.setComponents=function(t,u,B,G){(this||q).normal.set(t,u,B);(this||q).constant=G;return this||q};D.setFromNormalAndCoplanarPoint=function(t,u){(this||q).normal.copy(t);(this||q).constant=-u.dot((this||q).normal);return this||q};D.setFromCoplanarPoints=function(t,u,B){u=r_.subVectors(B,u).cross(Hya.subVectors(t,u)).normalize();this.setFromNormalAndCoplanarPoint(u,t);return this||q};D.copy=function(t){(this||q).normal.copy(t.normal);(this||q).constant=t.constant;return this||
q};D.normalize=function(){var t=1/(this||q).normal.length();(this||q).normal.multiplyScalar(t);(this||q).constant*=t;return this||q};D.negate=function(){(this||q).constant*=-1;(this||q).normal.negate();return this||q};D.distanceToPoint=function(t){return(this||q).normal.dot(t)+(this||q).constant};D.distanceToSphere=function(t){return this.distanceToPoint(t.center)-t.radius};D.projectPoint=function(t,u){void 0===u&&(console.warn("THREE.Plane: .projectPoint() target is now required"),u=new cc);return u.copy((this||
q).normal).multiplyScalar(-this.distanceToPoint(t)).add(t)};D.intersectLine=function(t,u){void 0===u&&(console.warn("THREE.Plane: .intersectLine() target is now required"),u=new cc);var B=t.delta(r_),G=(this||q).normal.dot(B);if(0===G){if(0===this.distanceToPoint(t.start))return u.copy(t.start)}else if(G=-(t.start.dot((this||q).normal)+(this||q).constant)/G,!(0>G||1<G))return u.copy(B).multiplyScalar(G).add(t.start)};D.intersectsLine=function(t){var u=this.distanceToPoint(t.start);t=this.distanceToPoint(t.end);
return 0>u&&0<t||0>t&&0<u};D.intersectsBox=function(t){return t.intersectsPlane(this||q)};D.intersectsSphere=function(t){return t.intersectsPlane(this||q)};D.coplanarPoint=function(t){void 0===t&&(console.warn("THREE.Plane: .coplanarPoint() target is now required"),t=new cc);return t.copy((this||q).normal).multiplyScalar(-(this||q).constant)};D.applyMatrix4=function(t,u){u=u||Iya.getNormalMatrix(t);t=this.coplanarPoint(r_).applyMatrix4(t);u=(this||q).normal.applyMatrix3(u).normalize();(this||q).constant=
-t.dot(u);return this||q};D.translate=function(t){(this||q).constant-=t.dot((this||q).normal);return this||q};D.equals=function(t){return t.normal.equals((this||q).normal)&&t.constant===(this||q).constant};D.clone=function(){return(new (this||q).constructor).copy(this||q)};return z}();gv.prototype.isPlane=!0;var mv=new cc,Sy=new cc,s_=new cc,Ty=new cc,vG=new cc,wG=new cc,Nea=new cc,t_=new cc,u_=new cc,v_=new cc,Xp=function(){function z(t,u,B){void 0===t&&(t=new cc);void 0===u&&(u=new cc);void 0===
B&&(B=new cc);(this||q).a=t;(this||q).b=u;(this||q).c=B}z.getNormal=function(t,u,B,G){void 0===G&&(console.warn("THREE.Triangle: .getNormal() target is now required"),G=new cc);G.subVectors(B,u);mv.subVectors(t,u);G.cross(mv);t=G.lengthSq();return 0<t?G.multiplyScalar(1/Math.sqrt(t)):G.set(0,0,0)};z.getBarycoord=function(t,u,B,G,K){mv.subVectors(G,u);Sy.subVectors(B,u);s_.subVectors(t,u);t=mv.dot(mv);u=mv.dot(Sy);B=mv.dot(s_);var O=Sy.dot(Sy);G=Sy.dot(s_);var U=t*O-u*u;void 0===K&&(console.warn("THREE.Triangle: .getBarycoord() target is now required"),
K=new cc);if(0===U)return K.set(-2,-1,-1);U=1/U;O=(O*B-u*G)*U;t=(t*G-u*B)*U;return K.set(1-O-t,t,O)};z.containsPoint=function(t,u,B,G){this.getBarycoord(t,u,B,G,Ty);return 0<=Ty.x&&0<=Ty.y&&1>=Ty.x+Ty.y};z.getUV=function(t,u,B,G,K,O,U,V){this.getBarycoord(t,u,B,G,Ty);V.set(0,0);V.addScaledVector(K,Ty.x);V.addScaledVector(O,Ty.y);V.addScaledVector(U,Ty.z);return V};z.isFrontFacing=function(t,u,B,G){mv.subVectors(B,u);Sy.subVectors(t,u);return 0>mv.cross(Sy).dot(G)?!0:!1};var D=z.prototype;D.set=function(t,
u,B){(this||q).a.copy(t);(this||q).b.copy(u);(this||q).c.copy(B);return this||q};D.setFromPointsAndIndices=function(t,u,B,G){(this||q).a.copy(t[u]);(this||q).b.copy(t[B]);(this||q).c.copy(t[G]);return this||q};D.clone=function(){return(new (this||q).constructor).copy(this||q)};D.copy=function(t){(this||q).a.copy(t.a);(this||q).b.copy(t.b);(this||q).c.copy(t.c);return this||q};D.getArea=function(){mv.subVectors((this||q).c,(this||q).b);Sy.subVectors((this||q).a,(this||q).b);return.5*mv.cross(Sy).length()};
D.getMidpoint=function(t){void 0===t&&(console.warn("THREE.Triangle: .getMidpoint() target is now required"),t=new cc);return t.addVectors((this||q).a,(this||q).b).add((this||q).c).multiplyScalar(1/3)};D.getNormal=function(t){return z.getNormal((this||q).a,(this||q).b,(this||q).c,t)};D.getPlane=function(t){void 0===t&&(console.warn("THREE.Triangle: .getPlane() target is now required"),t=new gv);return t.setFromCoplanarPoints((this||q).a,(this||q).b,(this||q).c)};D.getBarycoord=function(t,u){return z.getBarycoord(t,
(this||q).a,(this||q).b,(this||q).c,u)};D.getUV=function(t,u,B,G,K){return z.getUV(t,(this||q).a,(this||q).b,(this||q).c,u,B,G,K)};D.containsPoint=function(t){return z.containsPoint(t,(this||q).a,(this||q).b,(this||q).c)};D.isFrontFacing=function(t){return z.isFrontFacing((this||q).a,(this||q).b,(this||q).c,t)};D.intersectsBox=function(t){return t.intersectsTriangle(this||q)};D.closestPointToPoint=function(t,u){void 0===u&&(console.warn("THREE.Triangle: .closestPointToPoint() target is now required"),
u=new cc);var B=(this||q).a,G=(this||q).b,K=(this||q).c;vG.subVectors(G,B);wG.subVectors(K,B);t_.subVectors(t,B);var O=vG.dot(t_),U=wG.dot(t_);if(0>=O&&0>=U)return u.copy(B);u_.subVectors(t,G);var V=vG.dot(u_),ca=wG.dot(u_);if(0<=V&&ca<=V)return u.copy(G);var qa=O*ca-V*U;if(0>=qa&&0<=O&&0>=V)return G=O/(O-V),u.copy(B).addScaledVector(vG,G);v_.subVectors(t,K);t=vG.dot(v_);var Ea=wG.dot(v_);if(0<=Ea&&t<=Ea)return u.copy(K);O=t*U-O*Ea;if(0>=O&&0<=U&&0>=Ea)return qa=U/(U-Ea),u.copy(B).addScaledVector(wG,
qa);U=V*Ea-t*ca;if(0>=U&&0<=ca-V&&0<=t-Ea)return Nea.subVectors(K,G),qa=(ca-V)/(ca-V+(t-Ea)),u.copy(G).addScaledVector(Nea,qa);K=1/(U+O+qa);G=O*K;qa*=K;return u.copy(B).addScaledVector(vG,G).addScaledVector(wG,qa)};D.equals=function(t){return t.a.equals((this||q).a)&&t.b.equals((this||q).b)&&t.c.equals((this||q).c)};return z}(),jya=0;Y.prototype=Object.assign(Object.create(I.prototype),{constructor:Y,isMaterial:!0,onBeforeCompile:function(){},customProgramCacheKey:function(){return(this||q).onBeforeCompile.toString()},
setValues:function(z){if(void 0!==z)for(var D in z){var t=z[D];if(void 0===t)console.warn("THREE.Material: '"+D+"' parameter is undefined.");else if("shading"===D)console.warn("THREE."+(this||q).type+": .shading has been removed. Use the boolean .flatShading instead."),(this||q).flatShading=1===t?!0:!1;else{var u=(this||q)[D];void 0===u?console.warn("THREE."+(this||q).type+": '"+D+"' is not a property of this material."):u&&u.isColor?u.set(t):u&&u.isVector3&&t&&t.isVector3?u.copy(t):(this||q)[D]=
t}}},toJSON:function(z){function D(B){var G=[],K;for(K in B){var O=B[K];delete O.metadata;G.push(O)}return G}var t=void 0===z||"string"===typeof z;t&&(z={textures:{},images:{}});var u={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};u.uuid=(this||q).uuid;u.type=(this||q).type;""!==(this||q).name&&(u.name=(this||q).name);(this||q).color&&(this||q).color.isColor&&(u.color=(this||q).color.getHex());void 0!==(this||q).roughness&&(u.roughness=(this||q).roughness);void 0!==(this||q).metalness&&
(u.metalness=(this||q).metalness);(this||q).sheen&&(this||q).sheen.isColor&&(u.sheen=(this||q).sheen.getHex());(this||q).emissive&&(this||q).emissive.isColor&&(u.emissive=(this||q).emissive.getHex());(this||q).emissiveIntensity&&1!==(this||q).emissiveIntensity&&(u.emissiveIntensity=(this||q).emissiveIntensity);(this||q).specular&&(this||q).specular.isColor&&(u.specular=(this||q).specular.getHex());void 0!==(this||q).shininess&&(u.shininess=(this||q).shininess);void 0!==(this||q).clearcoat&&(u.clearcoat=
(this||q).clearcoat);void 0!==(this||q).clearcoatRoughness&&(u.clearcoatRoughness=(this||q).clearcoatRoughness);(this||q).clearcoatMap&&(this||q).clearcoatMap.isTexture&&(u.clearcoatMap=(this||q).clearcoatMap.toJSON(z).uuid);(this||q).clearcoatRoughnessMap&&(this||q).clearcoatRoughnessMap.isTexture&&(u.clearcoatRoughnessMap=(this||q).clearcoatRoughnessMap.toJSON(z).uuid);(this||q).clearcoatNormalMap&&(this||q).clearcoatNormalMap.isTexture&&(u.clearcoatNormalMap=(this||q).clearcoatNormalMap.toJSON(z).uuid,
u.clearcoatNormalScale=(this||q).clearcoatNormalScale.toArray());(this||q).map&&(this||q).map.isTexture&&(u.map=(this||q).map.toJSON(z).uuid);(this||q).matcap&&(this||q).matcap.isTexture&&(u.matcap=(this||q).matcap.toJSON(z).uuid);(this||q).alphaMap&&(this||q).alphaMap.isTexture&&(u.alphaMap=(this||q).alphaMap.toJSON(z).uuid);(this||q).lightMap&&(this||q).lightMap.isTexture&&(u.lightMap=(this||q).lightMap.toJSON(z).uuid,u.lightMapIntensity=(this||q).lightMapIntensity);(this||q).aoMap&&(this||q).aoMap.isTexture&&
(u.aoMap=(this||q).aoMap.toJSON(z).uuid,u.aoMapIntensity=(this||q).aoMapIntensity);(this||q).bumpMap&&(this||q).bumpMap.isTexture&&(u.bumpMap=(this||q).bumpMap.toJSON(z).uuid,u.bumpScale=(this||q).bumpScale);(this||q).normalMap&&(this||q).normalMap.isTexture&&(u.normalMap=(this||q).normalMap.toJSON(z).uuid,u.normalMapType=(this||q).normalMapType,u.normalScale=(this||q).normalScale.toArray());(this||q).displacementMap&&(this||q).displacementMap.isTexture&&(u.displacementMap=(this||q).displacementMap.toJSON(z).uuid,
u.displacementScale=(this||q).displacementScale,u.displacementBias=(this||q).displacementBias);(this||q).roughnessMap&&(this||q).roughnessMap.isTexture&&(u.roughnessMap=(this||q).roughnessMap.toJSON(z).uuid);(this||q).metalnessMap&&(this||q).metalnessMap.isTexture&&(u.metalnessMap=(this||q).metalnessMap.toJSON(z).uuid);(this||q).emissiveMap&&(this||q).emissiveMap.isTexture&&(u.emissiveMap=(this||q).emissiveMap.toJSON(z).uuid);(this||q).specularMap&&(this||q).specularMap.isTexture&&(u.specularMap=
(this||q).specularMap.toJSON(z).uuid);(this||q).envMap&&(this||q).envMap.isTexture&&(u.envMap=(this||q).envMap.toJSON(z).uuid,u.reflectivity=(this||q).reflectivity,u.refractionRatio=(this||q).refractionRatio,void 0!==(this||q).combine&&(u.combine=(this||q).combine),void 0!==(this||q).envMapIntensity&&(u.envMapIntensity=(this||q).envMapIntensity));(this||q).gradientMap&&(this||q).gradientMap.isTexture&&(u.gradientMap=(this||q).gradientMap.toJSON(z).uuid);void 0!==(this||q).size&&(u.size=(this||q).size);
void 0!==(this||q).sizeAttenuation&&(u.sizeAttenuation=(this||q).sizeAttenuation);1!==(this||q).blending&&(u.blending=(this||q).blending);0!==(this||q).side&&(u.side=(this||q).side);(this||q).vertexColors&&(u.vertexColors=!0);1>(this||q).opacity&&(u.opacity=(this||q).opacity);!0===(this||q).transparent&&(u.transparent=(this||q).transparent);u.depthFunc=(this||q).depthFunc;u.depthTest=(this||q).depthTest;u.depthWrite=(this||q).depthWrite;u.stencilWrite=(this||q).stencilWrite;u.stencilWriteMask=(this||
q).stencilWriteMask;u.stencilFunc=(this||q).stencilFunc;u.stencilRef=(this||q).stencilRef;u.stencilFuncMask=(this||q).stencilFuncMask;u.stencilFail=(this||q).stencilFail;u.stencilZFail=(this||q).stencilZFail;u.stencilZPass=(this||q).stencilZPass;(this||q).rotation&&0!==(this||q).rotation&&(u.rotation=(this||q).rotation);!0===(this||q).polygonOffset&&(u.polygonOffset=!0);0!==(this||q).polygonOffsetFactor&&(u.polygonOffsetFactor=(this||q).polygonOffsetFactor);0!==(this||q).polygonOffsetUnits&&(u.polygonOffsetUnits=
(this||q).polygonOffsetUnits);(this||q).linewidth&&1!==(this||q).linewidth&&(u.linewidth=(this||q).linewidth);void 0!==(this||q).dashSize&&(u.dashSize=(this||q).dashSize);void 0!==(this||q).gapSize&&(u.gapSize=(this||q).gapSize);void 0!==(this||q).scale&&(u.scale=(this||q).scale);!0===(this||q).dithering&&(u.dithering=!0);0<(this||q).alphaTest&&(u.alphaTest=(this||q).alphaTest);!0===(this||q).premultipliedAlpha&&(u.premultipliedAlpha=(this||q).premultipliedAlpha);!0===(this||q).wireframe&&(u.wireframe=
(this||q).wireframe);1<(this||q).wireframeLinewidth&&(u.wireframeLinewidth=(this||q).wireframeLinewidth);"round"!==(this||q).wireframeLinecap&&(u.wireframeLinecap=(this||q).wireframeLinecap);"round"!==(this||q).wireframeLinejoin&&(u.wireframeLinejoin=(this||q).wireframeLinejoin);!0===(this||q).morphTargets&&(u.morphTargets=!0);!0===(this||q).morphNormals&&(u.morphNormals=!0);!0===(this||q).skinning&&(u.skinning=!0);!0===(this||q).flatShading&&(u.flatShading=(this||q).flatShading);!1===(this||q).visible&&
(u.visible=!1);!1===(this||q).toneMapped&&(u.toneMapped=!1);"{}"!==JSON.stringify((this||q).userData)&&(u.userData=(this||q).userData);t&&(t=D(z.textures),z=D(z.images),0<t.length&&(u.textures=t),0<z.length&&(u.images=z));return u},clone:function(){return(new (this||q).constructor).copy(this||q)},copy:function(z){(this||q).name=z.name;(this||q).fog=z.fog;(this||q).blending=z.blending;(this||q).side=z.side;(this||q).vertexColors=z.vertexColors;(this||q).opacity=z.opacity;(this||q).transparent=z.transparent;
(this||q).blendSrc=z.blendSrc;(this||q).blendDst=z.blendDst;(this||q).blendEquation=z.blendEquation;(this||q).blendSrcAlpha=z.blendSrcAlpha;(this||q).blendDstAlpha=z.blendDstAlpha;(this||q).blendEquationAlpha=z.blendEquationAlpha;(this||q).depthFunc=z.depthFunc;(this||q).depthTest=z.depthTest;(this||q).depthWrite=z.depthWrite;(this||q).stencilWriteMask=z.stencilWriteMask;(this||q).stencilFunc=z.stencilFunc;(this||q).stencilRef=z.stencilRef;(this||q).stencilFuncMask=z.stencilFuncMask;(this||q).stencilFail=
z.stencilFail;(this||q).stencilZFail=z.stencilZFail;(this||q).stencilZPass=z.stencilZPass;(this||q).stencilWrite=z.stencilWrite;var D=z.clippingPlanes,t=null;if(null!==D){var u=D.length;t=Array(u);for(var B=0;B!==u;++B)t[B]=D[B].clone()}(this||q).clippingPlanes=t;(this||q).clipIntersection=z.clipIntersection;(this||q).clipShadows=z.clipShadows;(this||q).shadowSide=z.shadowSide;(this||q).colorWrite=z.colorWrite;(this||q).precision=z.precision;(this||q).polygonOffset=z.polygonOffset;(this||q).polygonOffsetFactor=
z.polygonOffsetFactor;(this||q).polygonOffsetUnits=z.polygonOffsetUnits;(this||q).dithering=z.dithering;(this||q).alphaTest=z.alphaTest;(this||q).premultipliedAlpha=z.premultipliedAlpha;(this||q).visible=z.visible;(this||q).toneMapped=z.toneMapped;(this||q).userData=JSON.parse(JSON.stringify(z.userData));return this||q},dispose:function(){this.dispatchEvent({type:"dispose"})}});Object.defineProperty(Y.prototype,"needsUpdate",{set:function(z){!0===z&&(this||q).version++}});var Oea={aliceblue:15792383,
antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,
darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,
indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,
magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,
palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,
turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Uq={h:0,s:0,l:0},vR={h:0,s:0,l:0},jg=function(){function z(t,u,B){return void 0===u&&void 0===B?this.set(t):this.setRGB(t,u,B)}var D=z.prototype;D.set=function(t){t&&t.isColor?this.copy(t):"number"===typeof t?this.setHex(t):"string"===typeof t&&this.setStyle(t);return this||q};D.setScalar=function(t){(this||q).r=t;(this||q).g=t;(this||q).b=t;return this||q};D.setHex=function(t){t=
Math.floor(t);(this||q).r=(t>>16&255)/255;(this||q).g=(t>>8&255)/255;(this||q).b=(t&255)/255;return this||q};D.setRGB=function(t,u,B){(this||q).r=t;(this||q).g=u;(this||q).b=B;return this||q};D.setHSL=function(t,u,B){t=Fh.euclideanModulo(t,1);u=Fh.clamp(u,0,1);B=Fh.clamp(B,0,1);0===u?(this||q).r=(this||q).g=(this||q).b=B:(u=.5>=B?B*(1+u):B+u-B*u,B=2*B-u,(this||q).r=W(B,u,t+1/3),(this||q).g=W(B,u,t),(this||q).b=W(B,u,t-1/3));return this||q};D.setStyle=function(t){function u(U){void 0!==U&&1>parseFloat(U)&&
console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}var B;if(B=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(t)){var G=B[2];switch(B[1]){case "rgb":case "rgba":if(B=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(G))return(this||q).r=Math.min(255,parseInt(B[1],10))/255,(this||q).g=Math.min(255,parseInt(B[2],10))/255,(this||q).b=Math.min(255,parseInt(B[3],10))/255,u(B[4]),this||q;if(B=/^\s*(\d+)%\s*,\s*(\d+)%\s*,\s*(\d+)%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(G))return(this||
q).r=Math.min(100,parseInt(B[1],10))/100,(this||q).g=Math.min(100,parseInt(B[2],10))/100,(this||q).b=Math.min(100,parseInt(B[3],10))/100,u(B[4]),this||q;break;case "hsl":case "hsla":if(B=/^\s*(\d*\.?\d+)\s*,\s*(\d+)%\s*,\s*(\d+)%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(G)){G=parseFloat(B[1])/360;var K=parseInt(B[2],10)/100,O=parseInt(B[3],10)/100;u(B[4]);return this.setHSL(G,K,O)}}}else if(B=/^#([A-Fa-f\d]+)$/.exec(t)){B=B[1];G=B.length;if(3===G)return(this||q).r=parseInt(B.charAt(0)+B.charAt(0),16)/255,
(this||q).g=parseInt(B.charAt(1)+B.charAt(1),16)/255,(this||q).b=parseInt(B.charAt(2)+B.charAt(2),16)/255,this||q;if(6===G)return(this||q).r=parseInt(B.charAt(0)+B.charAt(1),16)/255,(this||q).g=parseInt(B.charAt(2)+B.charAt(3),16)/255,(this||q).b=parseInt(B.charAt(4)+B.charAt(5),16)/255,this||q}return t&&0<t.length?this.setColorName(t):this||q};D.setColorName=function(t){var u=Oea[t];void 0!==u?this.setHex(u):console.warn("THREE.Color: Unknown color "+t);return this||q};D.clone=function(){return new (this||
q).constructor((this||q).r,(this||q).g,(this||q).b)};D.copy=function(t){(this||q).r=t.r;(this||q).g=t.g;(this||q).b=t.b;return this||q};D.copyGammaToLinear=function(t,u){void 0===u&&(u=2);(this||q).r=Math.pow(t.r,u);(this||q).g=Math.pow(t.g,u);(this||q).b=Math.pow(t.b,u);return this||q};D.copyLinearToGamma=function(t,u){void 0===u&&(u=2);u=0<u?1/u:1;(this||q).r=Math.pow(t.r,u);(this||q).g=Math.pow(t.g,u);(this||q).b=Math.pow(t.b,u);return this||q};D.convertGammaToLinear=function(t){this.copyGammaToLinear(this||
q,t);return this||q};D.convertLinearToGamma=function(t){this.copyLinearToGamma(this||q,t);return this||q};D.copySRGBToLinear=function(t){(this||q).r=da(t.r);(this||q).g=da(t.g);(this||q).b=da(t.b);return this||q};D.copyLinearToSRGB=function(t){(this||q).r=va(t.r);(this||q).g=va(t.g);(this||q).b=va(t.b);return this||q};D.convertSRGBToLinear=function(){this.copySRGBToLinear(this||q);return this||q};D.convertLinearToSRGB=function(){this.copyLinearToSRGB(this||q);return this||q};D.getHex=function(){return 255*
(this||q).r<<16^255*(this||q).g<<8^255*(this||q).b<<0};D.getHexString=function(){return("000000"+this.getHex().toString(16)).slice(-6)};D.getHSL=function(t){void 0===t&&(console.warn("THREE.Color: .getHSL() target is now required"),t={h:0,s:0,l:0});var u=(this||q).r,B=(this||q).g,G=(this||q).b,K=Math.max(u,B,G),O=Math.min(u,B,G),U,V=(O+K)/2;if(O===K)O=U=0;else{var ca=K-O;O=.5>=V?ca/(K+O):ca/(2-K-O);switch(K){case u:U=(B-G)/ca+(B<G?6:0);break;case B:U=(G-u)/ca+2;break;case G:U=(u-B)/ca+4}U/=6}t.h=
U;t.s=O;t.l=V;return t};D.getStyle=function(){return"rgb("+(255*(this||q).r|0)+","+(255*(this||q).g|0)+","+(255*(this||q).b|0)+")"};D.offsetHSL=function(t,u,B){this.getHSL(Uq);Uq.h+=t;Uq.s+=u;Uq.l+=B;this.setHSL(Uq.h,Uq.s,Uq.l);return this||q};D.add=function(t){(this||q).r+=t.r;(this||q).g+=t.g;(this||q).b+=t.b;return this||q};D.addColors=function(t,u){(this||q).r=t.r+u.r;(this||q).g=t.g+u.g;(this||q).b=t.b+u.b;return this||q};D.addScalar=function(t){(this||q).r+=t;(this||q).g+=t;(this||q).b+=t;return this||
q};D.sub=function(t){(this||q).r=Math.max(0,(this||q).r-t.r);(this||q).g=Math.max(0,(this||q).g-t.g);(this||q).b=Math.max(0,(this||q).b-t.b);return this||q};D.multiply=function(t){(this||q).r*=t.r;(this||q).g*=t.g;(this||q).b*=t.b;return this||q};D.multiplyScalar=function(t){(this||q).r*=t;(this||q).g*=t;(this||q).b*=t;return this||q};D.lerp=function(t,u){(this||q).r+=(t.r-(this||q).r)*u;(this||q).g+=(t.g-(this||q).g)*u;(this||q).b+=(t.b-(this||q).b)*u;return this||q};D.lerpColors=function(t,u,B){(this||
q).r=t.r+(u.r-t.r)*B;(this||q).g=t.g+(u.g-t.g)*B;(this||q).b=t.b+(u.b-t.b)*B;return this||q};D.lerpHSL=function(t,u){this.getHSL(Uq);t.getHSL(vR);t=Fh.lerp(Uq.h,vR.h,u);var B=Fh.lerp(Uq.s,vR.s,u);u=Fh.lerp(Uq.l,vR.l,u);this.setHSL(t,B,u);return this||q};D.equals=function(t){return t.r===(this||q).r&&t.g===(this||q).g&&t.b===(this||q).b};D.fromArray=function(t,u){void 0===u&&(u=0);(this||q).r=t[u];(this||q).g=t[u+1];(this||q).b=t[u+2];return this||q};D.toArray=function(t,u){void 0===t&&(t=[]);void 0===
u&&(u=0);t[u]=(this||q).r;t[u+1]=(this||q).g;t[u+2]=(this||q).b;return t};D.fromBufferAttribute=function(t,u){(this||q).r=t.getX(u);(this||q).g=t.getY(u);(this||q).b=t.getZ(u);!0===t.normalized&&((this||q).r/=255,(this||q).g/=255,(this||q).b/=255);return this||q};D.toJSON=function(){return this.getHex()};return z}();jg.NAMES=Oea;jg.prototype.isColor=!0;jg.prototype.r=1;jg.prototype.g=1;jg.prototype.b=1;var Ny=function(z){function D(t){var u=z.call(this||q)||this||q;u.type="MeshBasicMaterial";u.color=
new jg(16777215);u.map=null;u.lightMap=null;u.lightMapIntensity=1;u.aoMap=null;u.aoMapIntensity=1;u.specularMap=null;u.alphaMap=null;u.envMap=null;u.combine=0;u.reflectivity=1;u.refractionRatio=.98;u.wireframe=!1;u.wireframeLinewidth=1;u.wireframeLinecap="round";u.wireframeLinejoin="round";u.skinning=!1;u.morphTargets=!1;u.setValues(t);return u}r(D,z);D.prototype.copy=function(t){z.prototype.copy.call(this||q,t);(this||q).color.copy(t.color);(this||q).map=t.map;(this||q).lightMap=t.lightMap;(this||
q).lightMapIntensity=t.lightMapIntensity;(this||q).aoMap=t.aoMap;(this||q).aoMapIntensity=t.aoMapIntensity;(this||q).specularMap=t.specularMap;(this||q).alphaMap=t.alphaMap;(this||q).envMap=t.envMap;(this||q).combine=t.combine;(this||q).reflectivity=t.reflectivity;(this||q).refractionRatio=t.refractionRatio;(this||q).wireframe=t.wireframe;(this||q).wireframeLinewidth=t.wireframeLinewidth;(this||q).wireframeLinecap=t.wireframeLinecap;(this||q).wireframeLinejoin=t.wireframeLinejoin;(this||q).skinning=
t.skinning;(this||q).morphTargets=t.morphTargets;return this||q};return D}(Y);Ny.prototype.isMeshBasicMaterial=!0;var rl=new cc,wR=new We;Object.defineProperty(za.prototype,"needsUpdate",{set:function(z){!0===z&&(this||q).version++}});Object.assign(za.prototype,{isBufferAttribute:!0,onUploadCallback:function(){},setUsage:function(z){(this||q).usage=z;return this||q},copy:function(z){(this||q).name=z.name;(this||q).array=new z.array.constructor(z.array);(this||q).itemSize=z.itemSize;(this||q).count=
z.count;(this||q).normalized=z.normalized;(this||q).usage=z.usage;return this||q},copyAt:function(z,D,t){z*=(this||q).itemSize;t*=D.itemSize;for(var u=0,B=(this||q).itemSize;u<B;u++)(this||q).array[z+u]=D.array[t+u];return this||q},copyArray:function(z){(this||q).array.set(z);return this||q},copyColorsArray:function(z){for(var D=(this||q).array,t=0,u=0,B=z.length;u<B;u++){var G=z[u];void 0===G&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",u),G=new jg);D[t++]=G.r;D[t++]=
G.g;D[t++]=G.b}return this||q},copyVector2sArray:function(z){for(var D=(this||q).array,t=0,u=0,B=z.length;u<B;u++){var G=z[u];void 0===G&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",u),G=new We);D[t++]=G.x;D[t++]=G.y}return this||q},copyVector3sArray:function(z){for(var D=(this||q).array,t=0,u=0,B=z.length;u<B;u++){var G=z[u];void 0===G&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",u),G=new cc);D[t++]=G.x;D[t++]=G.y;D[t++]=G.z}return this||
q},copyVector4sArray:function(z){for(var D=(this||q).array,t=0,u=0,B=z.length;u<B;u++){var G=z[u];void 0===G&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",u),G=new Ck);D[t++]=G.x;D[t++]=G.y;D[t++]=G.z;D[t++]=G.w}return this||q},applyMatrix3:function(z){if(2===(this||q).itemSize)for(var D=0,t=(this||q).count;D<t;D++)wR.fromBufferAttribute(this||q,D),wR.applyMatrix3(z),this.setXY(D,wR.x,wR.y);else if(3===(this||q).itemSize)for(D=0,t=(this||q).count;D<t;D++)rl.fromBufferAttribute(this||
q,D),rl.applyMatrix3(z),this.setXYZ(D,rl.x,rl.y,rl.z);return this||q},applyMatrix4:function(z){for(var D=0,t=(this||q).count;D<t;D++)rl.x=this.getX(D),rl.y=this.getY(D),rl.z=this.getZ(D),rl.applyMatrix4(z),this.setXYZ(D,rl.x,rl.y,rl.z);return this||q},applyNormalMatrix:function(z){for(var D=0,t=(this||q).count;D<t;D++)rl.x=this.getX(D),rl.y=this.getY(D),rl.z=this.getZ(D),rl.applyNormalMatrix(z),this.setXYZ(D,rl.x,rl.y,rl.z);return this||q},transformDirection:function(z){for(var D=0,t=(this||q).count;D<
t;D++)rl.x=this.getX(D),rl.y=this.getY(D),rl.z=this.getZ(D),rl.transformDirection(z),this.setXYZ(D,rl.x,rl.y,rl.z);return this||q},set:function(z,D){void 0===D&&(D=0);(this||q).array.set(z,D);return this||q},getX:function(z){return(this||q).array[z*(this||q).itemSize]},setX:function(z,D){(this||q).array[z*(this||q).itemSize]=D;return this||q},getY:function(z){return(this||q).array[z*(this||q).itemSize+1]},setY:function(z,D){(this||q).array[z*(this||q).itemSize+1]=D;return this||q},getZ:function(z){return(this||
q).array[z*(this||q).itemSize+2]},setZ:function(z,D){(this||q).array[z*(this||q).itemSize+2]=D;return this||q},getW:function(z){return(this||q).array[z*(this||q).itemSize+3]},setW:function(z,D){(this||q).array[z*(this||q).itemSize+3]=D;return this||q},setXY:function(z,D,t){z*=(this||q).itemSize;(this||q).array[z+0]=D;(this||q).array[z+1]=t;return this||q},setXYZ:function(z,D,t,u){z*=(this||q).itemSize;(this||q).array[z+0]=D;(this||q).array[z+1]=t;(this||q).array[z+2]=u;return this||q},setXYZW:function(z,
D,t,u,B){z*=(this||q).itemSize;(this||q).array[z+0]=D;(this||q).array[z+1]=t;(this||q).array[z+2]=u;(this||q).array[z+3]=B;return this||q},onUpload:function(z){(this||q).onUploadCallback=z;return this||q},clone:function(){return(new (this||q).constructor((this||q).array,(this||q).itemSize)).copy(this||q)},toJSON:function(){return{itemSize:(this||q).itemSize,type:(this||q).array.constructor.name,array:Array.prototype.slice.call((this||q).array),normalized:(this||q).normalized}}});L.prototype=Object.create(za.prototype);
L.prototype.constructor=L;Z.prototype=Object.create(za.prototype);Z.prototype.constructor=Z;R.prototype=Object.create(za.prototype);R.prototype.constructor=R;X.prototype=Object.create(za.prototype);X.prototype.constructor=X;ja.prototype=Object.create(za.prototype);ja.prototype.constructor=ja;fa.prototype=Object.create(za.prototype);fa.prototype.constructor=fa;ua.prototype=Object.create(za.prototype);ua.prototype.constructor=ua;gb.prototype=Object.create(za.prototype);gb.prototype.constructor=gb;gb.prototype.isFloat16BufferAttribute=
!0;hb.prototype=Object.create(za.prototype);hb.prototype.constructor=hb;ta.prototype=Object.create(za.prototype);ta.prototype.constructor=ta;var qK={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:Uint8ClampedArray,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array},kya=0,dx=new Ug,w_=new N,xG=new cc,as=new Tq,rK=new Tq,no=new cc;pa.prototype=Object.assign(Object.create(I.prototype),{constructor:pa,
isBufferGeometry:!0,getIndex:function(){return(this||q).index},setIndex:function(z){Array.isArray(z)?(this||q).index=new (65535<na(z)?ua:ja)(z,1):(this||q).index=z;return this||q},getAttribute:function(z){return(this||q).attributes[z]},setAttribute:function(z,D){(this||q).attributes[z]=D;return this||q},deleteAttribute:function(z){delete (this||q).attributes[z];return this||q},hasAttribute:function(z){return void 0!==(this||q).attributes[z]},addGroup:function(z,D,t){void 0===t&&(t=0);(this||q).groups.push({start:z,
count:D,materialIndex:t})},clearGroups:function(){(this||q).groups=[]},setDrawRange:function(z,D){(this||q).drawRange.start=z;(this||q).drawRange.count=D},applyMatrix4:function(z){var D=(this||q).attributes.position;void 0!==D&&(D.applyMatrix4(z),D.needsUpdate=!0);D=(this||q).attributes.normal;if(void 0!==D){var t=(new Cn).getNormalMatrix(z);D.applyNormalMatrix(t);D.needsUpdate=!0}D=(this||q).attributes.tangent;void 0!==D&&(D.transformDirection(z),D.needsUpdate=!0);null!==(this||q).boundingBox&&this.computeBoundingBox();
null!==(this||q).boundingSphere&&this.computeBoundingSphere();return this||q},rotateX:function(z){dx.makeRotationX(z);this.applyMatrix4(dx);return this||q},rotateY:function(z){dx.makeRotationY(z);this.applyMatrix4(dx);return this||q},rotateZ:function(z){dx.makeRotationZ(z);this.applyMatrix4(dx);return this||q},translate:function(z,D,t){dx.makeTranslation(z,D,t);this.applyMatrix4(dx);return this||q},scale:function(z,D,t){dx.makeScale(z,D,t);this.applyMatrix4(dx);return this||q},lookAt:function(z){w_.lookAt(z);
w_.updateMatrix();this.applyMatrix4(w_.matrix);return this||q},center:function(){this.computeBoundingBox();(this||q).boundingBox.getCenter(xG).negate();this.translate(xG.x,xG.y,xG.z);return this||q},setFromPoints:function(z){for(var D=[],t=0,u=z.length;t<u;t++){var B=z[t];D.push(B.x,B.y,B.z||0)}this.setAttribute("position",new hb(D,3));return this||q},computeBoundingBox:function(){null===(this||q).boundingBox&&((this||q).boundingBox=new Tq);var z=(this||q).attributes.position,D=(this||q).morphAttributes.position;
if(z&&z.isGLBufferAttribute)console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this||q),(this||q).boundingBox.set(new cc(-Infinity,-Infinity,-Infinity),new cc(Infinity,Infinity,Infinity));else{if(void 0!==z){if((this||q).boundingBox.setFromBufferAttribute(z),D){z=0;for(var t=D.length;z<t;z++)as.setFromBufferAttribute(D[z]),(this||q).morphTargetsRelative?(no.addVectors((this||q).boundingBox.min,
as.min),(this||q).boundingBox.expandByPoint(no),no.addVectors((this||q).boundingBox.max,as.max),(this||q).boundingBox.expandByPoint(no)):((this||q).boundingBox.expandByPoint(as.min),(this||q).boundingBox.expandByPoint(as.max))}}else(this||q).boundingBox.makeEmpty();(isNaN((this||q).boundingBox.min.x)||isNaN((this||q).boundingBox.min.y)||isNaN((this||q).boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',
this||q)}},computeBoundingSphere:function(){null===(this||q).boundingSphere&&((this||q).boundingSphere=new hB);var z=(this||q).attributes.position,D=(this||q).morphAttributes.position;if(z&&z.isGLBufferAttribute)console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this||q),(this||q).boundingSphere.set(new cc,Infinity);else if(z){var t=(this||q).boundingSphere.center;as.setFromBufferAttribute(z);
if(D)for(var u=0,B=D.length;u<B;u++)rK.setFromBufferAttribute(D[u]),(this||q).morphTargetsRelative?(no.addVectors(as.min,rK.min),as.expandByPoint(no),no.addVectors(as.max,rK.max),as.expandByPoint(no)):(as.expandByPoint(rK.min),as.expandByPoint(rK.max));as.getCenter(t);B=u=0;for(var G=z.count;B<G;B++)no.fromBufferAttribute(z,B),u=Math.max(u,t.distanceToSquared(no));if(D)for(B=0,G=D.length;B<G;B++)for(var K=D[B],O=(this||q).morphTargetsRelative,U=0,V=K.count;U<V;U++)no.fromBufferAttribute(K,U),O&&(xG.fromBufferAttribute(z,
U),no.add(xG)),u=Math.max(u,t.distanceToSquared(no));(this||q).boundingSphere.radius=Math.sqrt(u);isNaN((this||q).boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this||q)}},computeFaceNormals:function(){},computeTangents:function(){function z(Ad,de,rf){qa.fromArray(B,3*Ad);Ea.fromArray(B,3*de);Ra.fromArray(B,3*rf);Ua.fromArray(K,2*Ad);ub.fromArray(K,2*de);nb.fromArray(K,2*rf);Ea.sub(qa);
Ra.sub(qa);ub.sub(Ua);nb.sub(Ua);var md=1/(ub.x*nb.y-nb.x*ub.y);isFinite(md)&&(ec.copy(Ea).multiplyScalar(nb.y).addScaledVector(Ra,-ub.y).multiplyScalar(md),gc.copy(Ra).multiplyScalar(ub.x).addScaledVector(Ea,-nb.x).multiplyScalar(md),V[Ad].add(ec),V[de].add(ec),V[rf].add(ec),ca[Ad].add(gc),ca[de].add(gc),ca[rf].add(gc))}function D(Ad){jd.fromArray(G,3*Ad);Ed.copy(jd);var de=V[Ad];Nc.copy(de);Nc.sub(jd.multiplyScalar(jd.dot(de))).normalize();Oc.crossVectors(Ed,de);de=Oc.dot(ca[Ad]);U[4*Ad]=Nc.x;U[4*
Ad+1]=Nc.y;U[4*Ad+2]=Nc.z;U[4*Ad+3]=0>de?-1:1}var t=(this||q).index,u=(this||q).attributes;if(null===t||void 0===u.position||void 0===u.normal||void 0===u.uv)console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");else{t=t.array;var B=u.position.array,G=u.normal.array,K=u.uv.array,O=B.length/3;void 0===u.tangent&&this.setAttribute("tangent",new za(new Float32Array(4*O),4));var U=u.tangent.array,V=[],ca=[];for(u=0;u<O;u++)V[u]=new cc,
ca[u]=new cc;var qa=new cc,Ea=new cc,Ra=new cc,Ua=new We,ub=new We,nb=new We,ec=new cc,gc=new cc;u=(this||q).groups;0===u.length&&(u=[{start:0,count:t.length}]);O=0;for(var Ac=u.length;O<Ac;++O){var Lc=u[O],ld=Lc.start,cd=ld;for(Lc=ld+Lc.count;cd<Lc;cd+=3)z(t[cd+0],t[cd+1],t[cd+2])}var Nc=new cc,Oc=new cc,jd=new cc,Ed=new cc;O=0;for(Ac=u.length;O<Ac;++O)for(Lc=u[O],cd=ld=Lc.start,Lc=ld+Lc.count;cd<Lc;cd+=3)D(t[cd+0]),D(t[cd+1]),D(t[cd+2])}},computeVertexNormals:function(){var z=(this||q).index,D=
this.getAttribute("position");if(void 0!==D){var t=this.getAttribute("normal");if(void 0===t)t=new za(new Float32Array(3*D.count),3),this.setAttribute("normal",t);else for(var u=0,B=t.count;u<B;u++)t.setXYZ(u,0,0,0);u=new cc;B=new cc;var G=new cc,K=new cc,O=new cc,U=new cc,V=new cc,ca=new cc;if(z)for(var qa=0,Ea=z.count;qa<Ea;qa+=3){var Ra=z.getX(qa+0),Ua=z.getX(qa+1),ub=z.getX(qa+2);u.fromBufferAttribute(D,Ra);B.fromBufferAttribute(D,Ua);G.fromBufferAttribute(D,ub);V.subVectors(G,B);ca.subVectors(u,
B);V.cross(ca);K.fromBufferAttribute(t,Ra);O.fromBufferAttribute(t,Ua);U.fromBufferAttribute(t,ub);K.add(V);O.add(V);U.add(V);t.setXYZ(Ra,K.x,K.y,K.z);t.setXYZ(Ua,O.x,O.y,O.z);t.setXYZ(ub,U.x,U.y,U.z)}else for(z=0,K=D.count;z<K;z+=3)u.fromBufferAttribute(D,z+0),B.fromBufferAttribute(D,z+1),G.fromBufferAttribute(D,z+2),V.subVectors(G,B),ca.subVectors(u,B),V.cross(ca),t.setXYZ(z+0,V.x,V.y,V.z),t.setXYZ(z+1,V.x,V.y,V.z),t.setXYZ(z+2,V.x,V.y,V.z);this.normalizeNormals();t.needsUpdate=!0}},merge:function(z,
D){if(z&&z.isBufferGeometry){void 0===D&&(D=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));var t=(this||q).attributes,u;for(u in t)if(void 0!==z.attributes[u]){var B=t[u].array,G=z.attributes[u],K=G.array,O=G.itemSize*D;G=Math.min(K.length,B.length-O);for(var U=0;U<G;U++,O++)B[O]=K[U]}return this||q}console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",
z)},normalizeNormals:function(){for(var z=(this||q).attributes.normal,D=0,t=z.count;D<t;D++)no.fromBufferAttribute(z,D),no.normalize(),z.setXYZ(D,no.x,no.y,no.z)},toNonIndexed:function(){function z(ca,qa){var Ea=ca.array,Ra=ca.itemSize;ca=ca.normalized;for(var Ua=new Ea.constructor(qa.length*Ra),ub,nb=0,ec=0,gc=qa.length;ec<gc;ec++){ub=qa[ec]*Ra;for(var Ac=0;Ac<Ra;Ac++)Ua[nb++]=Ea[ub++]}return new za(Ua,Ra,ca)}if(null===(this||q).index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),
this||q;var D=new pa,t=(this||q).index.array,u=(this||q).attributes;for(K in u){var B=z(u[K],t);D.setAttribute(K,B)}u=(this||q).morphAttributes;for(var G in u){var K=[];B=u[G];for(var O=0,U=B.length;O<U;O++){var V=z(B[O],t);K.push(V)}D.morphAttributes[G]=K}D.morphTargetsRelative=(this||q).morphTargetsRelative;t=(this||q).groups;G=0;for(u=t.length;G<u;G++)K=t[G],D.addGroup(K.start,K.count,K.materialIndex);return D},toJSON:function(){var z={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};
z.uuid=(this||q).uuid;z.type=(this||q).type;""!==(this||q).name&&(z.name=(this||q).name);0<Object.keys((this||q).userData).length&&(z.userData=(this||q).userData);if(void 0!==(this||q).parameters){var D=(this||q).parameters;for(t in D)void 0!==D[t]&&(z[t]=D[t]);return z}z.data={attributes:{}};var t=(this||q).index;null!==t&&(z.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});t=(this||q).attributes;for(var u in t){var B=t[u],G=B.toJSON(z.data);""!==B.name&&(G.name=
B.name);z.data.attributes[u]=G}u={};t=!1;for(D in(this||q).morphAttributes){B=(this||q).morphAttributes[D];G=[];for(var K=0,O=B.length;K<O;K++){var U=B[K],V=U.toJSON(z.data);""!==U.name&&(V.name=U.name);G.push(V)}0<G.length&&(u[D]=G,t=!0)}t&&(z.data.morphAttributes=u,z.data.morphTargetsRelative=(this||q).morphTargetsRelative);D=(this||q).groups;0<D.length&&(z.data.groups=JSON.parse(JSON.stringify(D)));D=(this||q).boundingSphere;null!==D&&(z.data.boundingSphere={center:D.center.toArray(),radius:D.radius});
return z},clone:function(){return(new pa).copy(this||q)},copy:function(z){(this||q).index=null;(this||q).attributes={};(this||q).morphAttributes={};(this||q).groups=[];(this||q).boundingBox=null;(this||q).boundingSphere=null;var D={};(this||q).name=z.name;var t=z.index;null!==t&&this.setIndex(t.clone(D));t=z.attributes;for(var u in t)this.setAttribute(u,t[u].clone(D));u=z.morphAttributes;for(var B in u){t=[];for(var G=u[B],K=0,O=G.length;K<O;K++)t.push(G[K].clone(D));(this||q).morphAttributes[B]=
t}(this||q).morphTargetsRelative=z.morphTargetsRelative;D=z.groups;B=0;for(u=D.length;B<u;B++)t=D[B],this.addGroup(t.start,t.count,t.materialIndex);D=z.boundingBox;null!==D&&((this||q).boundingBox=D.clone());D=z.boundingSphere;null!==D&&((this||q).boundingSphere=D.clone());(this||q).drawRange.start=z.drawRange.start;(this||q).drawRange.count=z.drawRange.count;(this||q).userData=z.userData;return this||q},dispose:function(){this.dispatchEvent({type:"dispose"})}});var Pea=new Ug,yG=new eB,x_=new hB,
XA=new cc,YA=new cc,ZA=new cc,RZ=new cc,SZ=new cc,TZ=new cc,PQ=new cc,QQ=new cc,RQ=new cc,TQ=new We,UQ=new We,VQ=new We,UZ=new cc,SQ=new cc;La.prototype=Object.assign(Object.create(N.prototype),{constructor:La,isMesh:!0,copy:function(z){N.prototype.copy.call(this||q,z);void 0!==z.morphTargetInfluences&&((this||q).morphTargetInfluences=z.morphTargetInfluences.slice());void 0!==z.morphTargetDictionary&&((this||q).morphTargetDictionary=Object.assign({},z.morphTargetDictionary));(this||q).material=z.material;
(this||q).geometry=z.geometry;return this||q},updateMorphTargets:function(){var z=(this||q).geometry;if(z.isBufferGeometry){z=z.morphAttributes;var D=Object.keys(z);if(0<D.length&&(z=z[D[0]],void 0!==z)){(this||q).morphTargetInfluences=[];(this||q).morphTargetDictionary={};D=0;for(var t=z.length;D<t;D++){var u=z[D].name||String(D);(this||q).morphTargetInfluences.push(0);(this||q).morphTargetDictionary[u]=D}}}else z=z.morphTargets,void 0!==z&&0<z.length&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")},
raycast:function(z,D){var t=(this||q).geometry,u=(this||q).material,B=(this||q).matrixWorld;if(void 0!==u&&(null===t.boundingSphere&&t.computeBoundingSphere(),x_.copy(t.boundingSphere),x_.applyMatrix4(B),!1!==z.ray.intersectsSphere(x_)&&(Pea.copy(B).invert(),yG.copy(z.ray).applyMatrix4(Pea),null===t.boundingBox||!1!==yG.intersectsBox(t.boundingBox))))if(t.isBufferGeometry){var G=t.index;B=t.attributes.position;var K=t.morphAttributes.position,O=t.morphTargetsRelative,U=t.attributes.uv,V=t.attributes.uv2,
ca=t.groups;t=t.drawRange;if(null!==G)if(Array.isArray(u))for(var qa=0,Ea=ca.length;qa<Ea;qa++)for(var Ra=ca[qa],Ua=u[Ra.materialIndex],ub=Math.max(Ra.start,t.start),nb=Math.min(Ra.start+Ra.count,t.start+t.count);ub<nb;ub+=3){var ec=G.getX(ub);var gc=G.getX(ub+1),Ac=G.getX(ub+2);if(ec=Hb(this||q,Ua,z,yG,B,K,O,U,V,ec,gc,Ac))ec.faceIndex=Math.floor(ub/3),ec.face.materialIndex=Ra.materialIndex,D.push(ec)}else for(ca=Math.max(0,t.start),t=Math.min(G.count,t.start+t.count);ca<t;ca+=3){if(ec=G.getX(ca),
qa=G.getX(ca+1),Ea=G.getX(ca+2),ec=Hb(this||q,u,z,yG,B,K,O,U,V,ec,qa,Ea))ec.faceIndex=Math.floor(ca/3),D.push(ec)}else if(void 0!==B)if(Array.isArray(u))for(G=0,qa=ca.length;G<qa;G++)for(Ea=ca[G],Ra=u[Ea.materialIndex],Ua=Math.max(Ea.start,t.start),ub=Math.min(Ea.start+Ea.count,t.start+t.count);Ua<ub;Ua+=3){if(ec=Hb(this||q,Ra,z,yG,B,K,O,U,V,Ua,Ua+1,Ua+2))ec.faceIndex=Math.floor(Ua/3),ec.face.materialIndex=Ea.materialIndex,D.push(ec)}else for(ca=Math.max(0,t.start),t=Math.min(B.count,t.start+t.count);ca<
t;ca+=3)if(ec=Hb(this||q,u,z,yG,B,K,O,U,V,ca,ca+1,ca+2))ec.faceIndex=Math.floor(ca/3),D.push(ec)}else t.isGeometry&&console.error("THREE.Mesh.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}});var yD=function(z){function D(t,u,B,G,K,O){function U(ec,gc,Ac,Lc,ld,cd,Nc,Oc,jd,Ed,Ad){var de=cd/jd,rf=Nc/Ed,md=cd/2,qd=Nc/2,Pd=Oc/2;Nc=jd+1;for(var kg=Ed+1,Me=cd=0,pg=new cc,Hh=0;Hh<kg;Hh++)for(var Li=Hh*rf-qd,$k=0;$k<Nc;$k++)pg[ec]=($k*de-md)*Lc,pg[gc]=Li*ld,pg[Ac]=Pd,Ea.push(pg.x,
pg.y,pg.z),pg[ec]=0,pg[gc]=0,pg[Ac]=0<Oc?1:-1,Ra.push(pg.x,pg.y,pg.z),Ua.push($k/jd),Ua.push(1-Hh/Ed),cd+=1;for(ec=0;ec<Ed;ec++)for(gc=0;gc<jd;gc++)Ac=ub+gc+Nc*(ec+1),Lc=ub+(gc+1)+Nc*(ec+1),ld=ub+(gc+1)+Nc*ec,qa.push(ub+gc+Nc*ec,Ac,ld),qa.push(Ac,Lc,ld),Me+=6;ca.addGroup(nb,Me,Ad);nb+=Me;ub+=cd}void 0===t&&(t=1);void 0===u&&(u=1);void 0===B&&(B=1);void 0===G&&(G=1);void 0===K&&(K=1);void 0===O&&(O=1);var V=z.call(this||q)||this||q;V.type="BoxGeometry";V.parameters={width:t,height:u,depth:B,widthSegments:G,
heightSegments:K,depthSegments:O};var ca=x(V);G=Math.floor(G);K=Math.floor(K);O=Math.floor(O);var qa=[],Ea=[],Ra=[],Ua=[],ub=0,nb=0;U("z","y","x",-1,-1,B,u,t,O,K,0);U("z","y","x",1,-1,B,u,-t,O,K,1);U("x","z","y",1,1,t,B,u,G,O,2);U("x","z","y",1,-1,t,B,-u,G,O,3);U("x","y","z",1,-1,t,u,B,G,K,4);U("x","y","z",-1,-1,t,u,-B,G,K,5);V.setIndex(qa);V.setAttribute("position",new hb(Ea,3));V.setAttribute("normal",new hb(Ra,3));V.setAttribute("uv",new hb(Ua,2));return V}r(D,z);return D}(pa),dea={clone:fc,merge:Ob};
Zb.prototype=Object.create(Y.prototype);Zb.prototype.constructor=Zb;Zb.prototype.isShaderMaterial=!0;Zb.prototype.copy=function(z){Y.prototype.copy.call(this||q,z);(this||q).fragmentShader=z.fragmentShader;(this||q).vertexShader=z.vertexShader;(this||q).uniforms=fc(z.uniforms);(this||q).defines=Object.assign({},z.defines);(this||q).wireframe=z.wireframe;(this||q).wireframeLinewidth=z.wireframeLinewidth;(this||q).lights=z.lights;(this||q).clipping=z.clipping;(this||q).skinning=z.skinning;(this||q).morphTargets=
z.morphTargets;(this||q).morphNormals=z.morphNormals;(this||q).extensions=Object.assign({},z.extensions);(this||q).glslVersion=z.glslVersion;return this||q};Zb.prototype.toJSON=function(z){var D=Y.prototype.toJSON.call(this||q,z);D.glslVersion=(this||q).glslVersion;D.uniforms={};for(var t in(this||q).uniforms){var u=(this||q).uniforms[t].value;D.uniforms[t]=u&&u.isTexture?{type:"t",value:u.toJSON(z).uuid}:u&&u.isColor?{type:"c",value:u.getHex()}:u&&u.isVector2?{type:"v2",value:u.toArray()}:u&&u.isVector3?
{type:"v3",value:u.toArray()}:u&&u.isVector4?{type:"v4",value:u.toArray()}:u&&u.isMatrix3?{type:"m3",value:u.toArray()}:u&&u.isMatrix4?{type:"m4",value:u.toArray()}:{value:u}}0<Object.keys((this||q).defines).length&&(D.defines=(this||q).defines);D.vertexShader=(this||q).vertexShader;D.fragmentShader=(this||q).fragmentShader;z={};for(var B in(this||q).extensions)!0===(this||q).extensions[B]&&(z[B]=!0);0<Object.keys(z).length&&(D.extensions=z);return D};Hc.prototype=Object.assign(Object.create(N.prototype),
{constructor:Hc,isCamera:!0,copy:function(z,D){N.prototype.copy.call(this||q,z,D);(this||q).matrixWorldInverse.copy(z.matrixWorldInverse);(this||q).projectionMatrix.copy(z.projectionMatrix);(this||q).projectionMatrixInverse.copy(z.projectionMatrixInverse);return this||q},getWorldDirection:function(z){void 0===z&&(console.warn("THREE.Camera: .getWorldDirection() target is now required"),z=new cc);this.updateWorldMatrix(!0,!1);var D=(this||q).matrixWorld.elements;return z.set(-D[8],-D[9],-D[10]).normalize()},
updateMatrixWorld:function(z){N.prototype.updateMatrixWorld.call(this||q,z);(this||q).matrixWorldInverse.copy((this||q).matrixWorld).invert()},updateWorldMatrix:function(z,D){N.prototype.updateWorldMatrix.call(this||q,z,D);(this||q).matrixWorldInverse.copy((this||q).matrixWorld).invert()},clone:function(){return(new (this||q).constructor).copy(this||q)}});Gb.prototype=Object.assign(Object.create(Hc.prototype),{constructor:Gb,isPerspectiveCamera:!0,copy:function(z,D){Hc.prototype.copy.call(this||q,
z,D);(this||q).fov=z.fov;(this||q).zoom=z.zoom;(this||q).near=z.near;(this||q).far=z.far;(this||q).focus=z.focus;(this||q).aspect=z.aspect;(this||q).view=null===z.view?null:Object.assign({},z.view);(this||q).filmGauge=z.filmGauge;(this||q).filmOffset=z.filmOffset;return this||q},setFocalLength:function(z){z=.5*this.getFilmHeight()/z;(this||q).fov=2*Fh.RAD2DEG*Math.atan(z);this.updateProjectionMatrix()},getFocalLength:function(){var z=Math.tan(.5*Fh.DEG2RAD*(this||q).fov);return.5*this.getFilmHeight()/
z},getEffectiveFOV:function(){return 2*Fh.RAD2DEG*Math.atan(Math.tan(.5*Fh.DEG2RAD*(this||q).fov)/(this||q).zoom)},getFilmWidth:function(){return(this||q).filmGauge*Math.min((this||q).aspect,1)},getFilmHeight:function(){return(this||q).filmGauge/Math.max((this||q).aspect,1)},setViewOffset:function(z,D,t,u,B,G){(this||q).aspect=z/D;null===(this||q).view&&((this||q).view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1});(this||q).view.enabled=!0;(this||q).view.fullWidth=z;
(this||q).view.fullHeight=D;(this||q).view.offsetX=t;(this||q).view.offsetY=u;(this||q).view.width=B;(this||q).view.height=G;this.updateProjectionMatrix()},clearViewOffset:function(){null!==(this||q).view&&((this||q).view.enabled=!1);this.updateProjectionMatrix()},updateProjectionMatrix:function(){var z=(this||q).near,D=z*Math.tan(.5*Fh.DEG2RAD*(this||q).fov)/(this||q).zoom,t=2*D,u=(this||q).aspect*t,B=-.5*u,G=(this||q).view;if(null!==(this||q).view&&(this||q).view.enabled){var K=G.fullWidth,O=G.fullHeight;
B+=G.offsetX*u/K;D-=G.offsetY*t/O;u*=G.width/K;t*=G.height/O}G=(this||q).filmOffset;0!==G&&(B+=z*G/this.getFilmWidth());(this||q).projectionMatrix.makePerspective(B,B+u,D,D-t,z,(this||q).far);(this||q).projectionMatrixInverse.copy((this||q).projectionMatrix).invert()},toJSON:function(z){z=N.prototype.toJSON.call(this||q,z);z.object.fov=(this||q).fov;z.object.zoom=(this||q).zoom;z.object.near=(this||q).near;z.object.far=(this||q).far;z.object.focus=(this||q).focus;z.object.aspect=(this||q).aspect;
null!==(this||q).view&&(z.object.view=Object.assign({},(this||q).view));z.object.filmGauge=(this||q).filmGauge;z.object.filmOffset=(this||q).filmOffset;return z}});var xR=function(z){function D(t,u,B){var G=z.call(this||q)||this||q;G.type="CubeCamera";if(!0!==B.isWebGLCubeRenderTarget)return console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter."),x(G);G.renderTarget=B;B=new Gb(90,1,t,u);B.layers=G.layers;B.up.set(0,-1,0);B.lookAt(new cc(1,
0,0));G.add(B);B=new Gb(90,1,t,u);B.layers=G.layers;B.up.set(0,-1,0);B.lookAt(new cc(-1,0,0));G.add(B);B=new Gb(90,1,t,u);B.layers=G.layers;B.up.set(0,0,1);B.lookAt(new cc(0,1,0));G.add(B);B=new Gb(90,1,t,u);B.layers=G.layers;B.up.set(0,0,-1);B.lookAt(new cc(0,-1,0));G.add(B);B=new Gb(90,1,t,u);B.layers=G.layers;B.up.set(0,-1,0);B.lookAt(new cc(0,0,1));G.add(B);t=new Gb(90,1,t,u);t.layers=G.layers;t.up.set(0,-1,0);t.lookAt(new cc(0,0,-1));G.add(t);return G}r(D,z);D.prototype.update=function(t,u){null===
(this||q).parent&&this.updateMatrixWorld();var B=(this||q).renderTarget,G=(this||q).children,K=G[0],O=G[1],U=G[2],V=G[3],ca=G[4];G=G[5];var qa=t.xr.enabled,Ea=t.getRenderTarget();t.xr.enabled=!1;var Ra=B.texture.generateMipmaps;B.texture.generateMipmaps=!1;t.setRenderTarget(B,0);t.render(u,K);t.setRenderTarget(B,1);t.render(u,O);t.setRenderTarget(B,2);t.render(u,U);t.setRenderTarget(B,3);t.render(u,V);t.setRenderTarget(B,4);t.render(u,ca);B.texture.generateMipmaps=Ra;t.setRenderTarget(B,5);t.render(u,
G);t.setRenderTarget(Ea);t.xr.enabled=qa};return D}(N),zG=function(z){function D(t,u,B,G,K,O,U,V,ca,qa){t=void 0!==t?t:[];t=z.call(this||q,t,void 0!==u?u:301,B,G,K,O,void 0!==U?U:1022,V,ca,qa)||this||q;t._needsFlipEnvMap=!0;t.flipY=!1;return t}r(D,z);m(D,[{key:"images",get:function(){return(this||q).image},set:function(t){(this||q).image=t}}]);return D}(tp);zG.prototype.isCubeTexture=!0;var WQ=function(z){function D(u,B,G){Number.isInteger(B)&&(console.warn("THREE.WebGLCubeRenderTarget: constructor signature is now WebGLCubeRenderTarget( size, options )"),
B=G);u=z.call(this||q,u,u,B)||this||q;B=B||{};u.texture=new zG(void 0,B.mapping,B.wrapS,B.wrapT,B.magFilter,B.minFilter,B.format,B.type,B.anisotropy,B.encoding);u.texture.generateMipmaps=void 0!==B.generateMipmaps?B.generateMipmaps:!1;u.texture.minFilter=void 0!==B.minFilter?B.minFilter:1006;u.texture._needsFlipEnvMap=!1;return u}r(D,z);var t=D.prototype;t.fromEquirectangularTexture=function(u,B){(this||q).texture.type=B.type;(this||q).texture.format=1023;(this||q).texture.encoding=B.encoding;(this||
q).texture.generateMipmaps=B.generateMipmaps;(this||q).texture.minFilter=B.minFilter;(this||q).texture.magFilter=B.magFilter;var G=new yD(5,5,5),K=new Zb({name:"CubemapFromEquirect",uniforms:fc({tEquirect:{value:null}}),vertexShader:"\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",
fragmentShader:"\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t",side:1,blending:0});K.uniforms.tEquirect.value=B;G=new La(G,K);K=B.minFilter;1008===B.minFilter&&(B.minFilter=1006);(new xR(1,10,this||q)).update(u,G);
B.minFilter=K;G.geometry.dispose();G.material.dispose();return this||q};t.clear=function(u,B,G,K){for(var O=u.getRenderTarget(),U=0;6>U;U++)u.setRenderTarget(this||q,U),u.clear(B,G,K);u.setRenderTarget(O)};return D}(Oy);WQ.prototype.isWebGLCubeRenderTarget=!0;var jG=function(z){function D(t,u,B,G,K,O,U,V,ca,qa,Ea,Ra){G=z.call(this||q,null,O,U,V,ca,qa,G,K,Ea,Ra)||this||q;G.image={data:t||null,width:u||1,height:B||1};G.magFilter=void 0!==ca?ca:1003;G.minFilter=void 0!==qa?qa:1003;G.generateMipmaps=
!1;G.flipY=!1;G.unpackAlignment=1;G.needsUpdate=!0;return G}r(D,z);return D}(tp);jG.prototype.isDataTexture=!0;var AG=new hB,yR=new cc,VJ=function(){function z(t,u,B,G,K,O){void 0===t&&(t=new gv);void 0===u&&(u=new gv);void 0===B&&(B=new gv);void 0===G&&(G=new gv);void 0===K&&(K=new gv);void 0===O&&(O=new gv);(this||q).planes=[t,u,B,G,K,O]}var D=z.prototype;D.set=function(t,u,B,G,K,O){var U=(this||q).planes;U[0].copy(t);U[1].copy(u);U[2].copy(B);U[3].copy(G);U[4].copy(K);U[5].copy(O);return this||
q};D.copy=function(t){for(var u=(this||q).planes,B=0;6>B;B++)u[B].copy(t.planes[B]);return this||q};D.setFromProjectionMatrix=function(t){var u=(this||q).planes,B=t.elements;t=B[0];var G=B[1],K=B[2],O=B[3],U=B[4],V=B[5],ca=B[6],qa=B[7],Ea=B[8],Ra=B[9],Ua=B[10],ub=B[11],nb=B[12],ec=B[13],gc=B[14];B=B[15];u[0].setComponents(O-t,qa-U,ub-Ea,B-nb).normalize();u[1].setComponents(O+t,qa+U,ub+Ea,B+nb).normalize();u[2].setComponents(O+G,qa+V,ub+Ra,B+ec).normalize();u[3].setComponents(O-G,qa-V,ub-Ra,B-ec).normalize();
u[4].setComponents(O-K,qa-ca,ub-Ua,B-gc).normalize();u[5].setComponents(O+K,qa+ca,ub+Ua,B+gc).normalize();return this||q};D.intersectsObject=function(t){var u=t.geometry;null===u.boundingSphere&&u.computeBoundingSphere();AG.copy(u.boundingSphere).applyMatrix4(t.matrixWorld);return this.intersectsSphere(AG)};D.intersectsSprite=function(t){AG.center.set(0,0,0);AG.radius=.7071067811865476;AG.applyMatrix4(t.matrixWorld);return this.intersectsSphere(AG)};D.intersectsSphere=function(t){var u=(this||q).planes,
B=t.center;t=-t.radius;for(var G=0;6>G;G++)if(u[G].distanceToPoint(B)<t)return!1;return!0};D.intersectsBox=function(t){for(var u=(this||q).planes,B=0;6>B;B++){var G=u[B];yR.x=0<G.normal.x?t.max.x:t.min.x;yR.y=0<G.normal.y?t.max.y:t.min.y;yR.z=0<G.normal.z?t.max.z:t.min.z;if(0>G.distanceToPoint(yR))return!1}return!0};D.containsPoint=function(t){for(var u=(this||q).planes,B=0;6>B;B++)if(0>u[B].distanceToPoint(t))return!1;return!0};D.clone=function(){return(new (this||q).constructor).copy(this||q)};
return z}(),UJ=function(z){function D(t,u,B,G){void 0===t&&(t=1);void 0===u&&(u=1);void 0===B&&(B=1);void 0===G&&(G=1);var K=z.call(this||q)||this||q;K.type="PlaneGeometry";K.parameters={width:t,height:u,widthSegments:B,heightSegments:G};var O=t/2,U=u/2;B=Math.floor(B);G=Math.floor(G);var V=B+1,ca=G+1,qa=t/B,Ea=u/G;u=[];t=[];for(var Ra=[],Ua=[],ub=0;ub<ca;ub++)for(var nb=ub*Ea-U,ec=0;ec<V;ec++)t.push(ec*qa-O,-nb,0),Ra.push(0,0,1),Ua.push(ec/B),Ua.push(1-ub/G);for(O=0;O<G;O++)for(U=0;U<B;U++)ca=U+
V*(O+1),qa=U+1+V*(O+1),Ea=U+1+V*O,u.push(U+V*O,ca,Ea),u.push(ca,qa,Ea);K.setIndex(u);K.setAttribute("position",new hb(t,3));K.setAttribute("normal",new hb(Ra,3));K.setAttribute("uv",new hb(Ua,2));return K}r(D,z);return D}(pa),jj={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef ALPHATEST\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n#endif",
aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",
begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"vec2 integrateSpecularBRDF( const in float dotNV, const in float roughness ) {\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\treturn vec2( -1.04, 1.04 ) * a004 + r.zw;\n}\nfloat punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\tif( cutoffDistance > 0.0 ) {\n\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t}\n\treturn distanceFalloff;\n#else\n\tif( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t}\n\treturn 1.0;\n#endif\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n}\nvec3 F_Schlick_RoughnessDependent( const in vec3 F0, const in float dotNV, const in float roughness ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotNV - 6.98316 ) * dotNV );\n\tvec3 Fr = max( vec3( 1.0 - roughness ), F0 ) - F0;\n\treturn Fr * fresnel + F0;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\treturn 1.0 / ( gl * gv );\n}\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( incidentLight.direction + viewDir );\n\tfloat dotNL = saturate( dot( normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( G * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nvec3 BRDF_Specular_GGX_Environment( const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\treturn specularColor * brdf.x + brdf.y;\n}\nvoid BRDF_Specular_Multiscattering_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tvec3 F = F_Schlick_RoughnessDependent( specularColor, dotNV, roughness );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\tvec3 FssEss = F * brdf.x + brdf.y;\n\tfloat Ess = brdf.x + brdf.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie(float roughness, float NoH) {\n\tfloat invAlpha = 1.0 / roughness;\n\tfloat cos2h = NoH * NoH;\n\tfloat sin2h = max(1.0 - cos2h, 0.0078125);\treturn (2.0 + invAlpha) * pow(sin2h, invAlpha * 0.5) / (2.0 * PI);\n}\nfloat V_Neubelt(float NoV, float NoL) {\n\treturn saturate(1.0 / (4.0 * (NoL + NoV - NoL * NoV)));\n}\nvec3 BRDF_Specular_Sheen( const in float roughness, const in vec3 L, const in GeometricContext geometry, vec3 specularColor ) {\n\tvec3 N = geometry.normal;\n\tvec3 V = geometry.viewDir;\n\tvec3 H = normalize( V + L );\n\tfloat dotNH = saturate( dot( N, H ) );\n\treturn specularColor * D_Charlie( roughness, dotNH ) * V_Neubelt( dot(N, V), dot(N, L) );\n}\n#endif",
bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",
clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",
clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#ifdef USE_COLOR\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",
color_vertex:"#if defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor.xyz *= color.xyz;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat max3( vec3 v ) { return max( max( v.x, v.y ), v.z ); }\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\treturn - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}",
cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_maxMipLevel 8.0\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_maxTileSize 256.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\tfloat texelSize = 1.0 / ( 3.0 * cubeUV_maxTileSize );\n\t\tvec2 uv = getUV( direction, face ) * ( faceSize - 1.0 );\n\t\tvec2 f = fract( uv );\n\t\tuv += 0.5 - f;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tif ( mipInt < cubeUV_maxMipLevel ) {\n\t\t\tuv.y += 2.0 * cubeUV_maxTileSize;\n\t\t}\n\t\tuv.y += filterInt * 2.0 * cubeUV_minTileSize;\n\t\tuv.x += 3.0 * max( 0.0, cubeUV_maxTileSize - 2.0 * faceSize );\n\t\tuv *= texelSize;\n\t\tvec3 tl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.x += texelSize;\n\t\tvec3 tr = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.y += texelSize;\n\t\tvec3 br = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.x -= texelSize;\n\t\tvec3 bl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tvec3 tm = mix( tl, tr, f.x );\n\t\tvec3 bm = mix( bl, br, f.x );\n\t\treturn mix( tm, bm, f.y );\n\t}\n\t#define r0 1.0\n\t#define v0 0.339\n\t#define m0 - 2.0\n\t#define r1 0.8\n\t#define v1 0.276\n\t#define m1 - 1.0\n\t#define r4 0.4\n\t#define v4 0.046\n\t#define m4 2.0\n\t#define r5 0.305\n\t#define v5 0.016\n\t#define m5 3.0\n\t#define r6 0.21\n\t#define v6 0.0038\n\t#define m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= r1 ) {\n\t\t\tmip = ( r0 - roughness ) * ( m1 - m0 ) / ( r0 - r1 ) + m0;\n\t\t} else if ( roughness >= r4 ) {\n\t\t\tmip = ( r1 - roughness ) * ( m4 - m1 ) / ( r1 - r4 ) + m1;\n\t\t} else if ( roughness >= r5 ) {\n\t\t\tmip = ( r4 - roughness ) * ( m5 - m4 ) / ( r4 - r5 ) + m4;\n\t\t} else if ( roughness >= r6 ) {\n\t\t\tmip = ( r5 - roughness ) * ( m6 - m5 ) / ( r5 - r6 ) + m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), m0, cubeUV_maxMipLevel );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",
defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",
displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",
emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * value.a * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat M = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat D = max( maxRange / maxRGB, 1.0 );\n\tD = clamp( floor( D ) / 255.0, 0.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value ) {\n\tvec3 Xp_Y_XYZp = cLogLuvM * value.rgb;\n\tXp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );\n\tvec4 vResult;\n\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n\tvResult.w = fract( Le );\n\tvResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;\n\treturn vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n\tfloat Le = value.z * 255.0 + value.w;\n\tvec3 Xp_Y_XYZp;\n\tXp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );\n\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n\tvec3 vRGB = cLogLuvInverseM * Xp_Y_XYZp.rgb;\n\treturn vec4( max( vRGB, 0.0 ), 1.0 );\n}",
envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifndef ENVMAP_TYPE_CUBE_UV\n\t\tenvColor = envMapTexelToLinear( envColor );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",
envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\tuniform int maxMipLevel;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",
envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n\t#ifdef ENVMAP_MODE_REFRACTION\n\t\tuniform float refractionRatio;\n\t#endif\n\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t#else\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\t\t#endif\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t}\n\tfloat getSpecularMIPLevel( const in float roughness, const in int maxMIPLevel ) {\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\t\tfloat sigma = PI * roughness * roughness / ( 1.0 + roughness );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar + log2( sigma );\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\t}\n\tvec3 getLightProbeIndirectRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in int maxMIPLevel ) {\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( -viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( -viewDir, normal, refractionRatio );\n\t\t#endif\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( roughness, maxMIPLevel );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t#endif\n\t\treturn envMapColor.rgb * envMapIntensity;\n\t}\n#endif",
envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",
fog_vertex:"#ifdef USE_FOG\n\tfogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float fogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * fogDepth * fogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float fogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",
gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn texture2D( gradientMap, coord ).rgb;\n\t#else\n\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\treflectedLight.indirectDiffuse += PI * lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n#endif",
lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\nvIndirectFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n\tvIndirectBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\nvIndirectFront += getAmbientLightIrradiance( ambientLightColor );\nvIndirectFront += getLightProbeIrradiance( lightProbe, geometry );\n#ifdef DOUBLE_SIDED\n\tvIndirectBack += getAmbientLightIrradiance( ambientLightColor );\n\tvIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry );\n#endif\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif",
lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in GeometricContext geometry ) {\n\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treturn irradiance;\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tdirectLight.color = pointLight.color;\n\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\t\tif ( angleCos > spotLight.coneCos ) {\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tirradiance *= PI;\n\t\t#endif\n\t\treturn irradiance;\n\t}\n#endif",
lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon\n#define Material_LightProbeLOD( material )\t(0)",
lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)",
lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.specularRoughness = max( roughnessFactor, 0.0525 );material.specularRoughness += geometryRoughness;\nmaterial.specularRoughness = min( material.specularRoughness, 1.0 );\n#ifdef REFLECTIVITY\n\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n#endif\n#ifdef CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheen;\n#endif",
lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat specularRoughness;\n\tvec3 specularColor;\n#ifdef CLEARCOAT\n\tfloat clearcoat;\n\tfloat clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tvec3 sheenColor;\n#endif\n};\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\nfloat clearcoatDHRApprox( const in float roughness, const in float dotNL ) {\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.specularRoughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(\t\t0, 1,\t\t0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\t#ifdef CLEARCOAT\n\t\tfloat ccDotNL = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = ccDotNL * directLight.color;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tccIrradiance *= PI;\n\t\t#endif\n\t\tfloat clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );\n\t\treflectedLight.directSpecular += ccIrradiance * material.clearcoat * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );\n\t#else\n\t\tfloat clearcoatDHR = 0.0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\treflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_Sheen(\n\t\t\tmaterial.specularRoughness,\n\t\t\tdirectLight.direction,\n\t\t\tgeometry,\n\t\t\tmaterial.sheenColor\n\t\t);\n\t#else\n\t\treflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.normal, material.specularColor, material.specularRoughness);\n\t#endif\n\treflectedLight.directDiffuse += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef CLEARCOAT\n\t\tfloat ccDotNV = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular += clearcoatRadiance * material.clearcoat * BRDF_Specular_GGX_Environment( geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );\n\t\tfloat ccDotNL = ccDotNV;\n\t\tfloat clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );\n\t#else\n\t\tfloat clearcoatDHR = 0.0;\n\t#endif\n\tfloat clearcoatInv = 1.0 - clearcoatDHR;\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\tBRDF_Specular_Multiscattering_Environment( geometry, material.specularColor, material.specularRoughness, singleScattering, multiScattering );\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );\n\treflectedLight.indirectSpecular += clearcoatInv * radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",
lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",
lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getLightProbeIndirectIrradiance( geometry, maxMipLevel );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.normal, material.specularRoughness, maxMipLevel );\n\t#ifdef CLEARCOAT\n\t\tclearcoatRadiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness, maxMipLevel );\n\t#endif\n#endif",
lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",
logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",
map_fragment:"#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n\tvec4 mapTexel = texture2D( map, uv );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",
map_particle_pars_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",
morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifndef USE_MORPHNORMALS\n\t\tuniform float morphTargetInfluences[ 8 ];\n\t#else\n\t\tuniform float morphTargetInfluences[ 4 ];\n\t#endif\n#endif",
morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t#ifndef USE_MORPHNORMALS\n\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t#endif\n#endif",
normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * faceDirection;\n\t\t\tbitangent = bitangent * faceDirection;\n\t\t#endif\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;",
normal_fragment_maps:"#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\t#ifdef USE_TANGENT\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( -vViewPosition, normal, mapN, faceDirection );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",
normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );\n\t\treturn normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );\n\t}\n#endif",
clearcoat_normal_fragment_begin:"#ifdef CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\t#ifdef USE_TANGENT\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );\n\t#endif\n#endif",
clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ));\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w);\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",
premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",
roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t\tf.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), \n\t\t\t\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t\tf.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",
shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",
shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0\n\t\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\tvec4 shadowWorldPosition;\n\t#endif\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n#endif",
shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",
skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform highp sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif",
skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",
specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(\t1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,\t1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,\t1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",
transmissionmap_fragment:"#ifdef USE_TRANSMISSIONMAP\n\ttotalTransmission *= texture2D( transmissionMap, vUv ).r;\n#endif",transmissionmap_pars_fragment:"#ifdef USE_TRANSMISSIONMAP\n\tuniform sampler2D transmissionMap;\n#endif",uv_pars_fragment:"#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n\t#ifdef UVS_VERTEX_ONLY\n\t\tvec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif",uv_vertex:"#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",
uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\tuniform mat3 uv2Transform;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",
background_frag:"uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",cube_frag:"#include <envmap_common_pars_fragment>\nuniform float opacity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\tvec3 vReflect = vWorldDirection;\n\t#include <envmap_fragment>\n\tgl_FragColor = envColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",
cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",
depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",
distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",
distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",
equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tvec4 texColor = texture2D( tEquirect, sampleUV );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",
linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",
linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",
meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\n\t\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",
meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_ENVMAP\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",
meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\n\t#else\n\t\treflectedLight.indirectDiffuse += vIndirectFront;\n\t#endif\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",
meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",
meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t\tmatcapColor = matcapTexelToLinear( matcapColor );\n\t#else\n\t\tvec4 matcapColor = vec4( 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",
meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#ifndef FLAT_SHADED\n\t\tvNormal = normalize( transformedNormal );\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",
meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",
meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",
meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",
meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",
meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define REFLECTIVITY\n\t#define CLEARCOAT\n\t#define TRANSMISSION\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef TRANSMISSION\n\tuniform float transmission;\n#endif\n#ifdef REFLECTIVITY\n\tuniform float reflectivity;\n#endif\n#ifdef CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheen;\n#endif\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <transmissionmap_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#ifdef TRANSMISSION\n\t\tfloat totalTransmission = transmission;\n\t#endif\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <transmissionmap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#ifdef TRANSMISSION\n\t\tdiffuseColor.a *= mix( saturate( 1. - totalTransmission + linearToRelativeLuminance( reflectedLight.directSpecular + reflectedLight.indirectSpecular ) ), 1.0, metalness );\n\t#endif\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",
meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",
normal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n}",
normal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",
points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",
points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",
shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",
sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",
sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}"},
Pf={common:{diffuse:{value:new jg(15658734)},opacity:{value:1},map:{value:null},uvTransform:{value:new Cn},uv2Transform:{value:new Cn},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},
bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new We(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:2.5E-4},fogNear:{value:1},fogFar:{value:2E3},fogColor:{value:new jg(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],
properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],
properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new jg(15658734)},opacity:{value:1},
size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},uvTransform:{value:new Cn}},sprite:{diffuse:{value:new jg(15658734)},opacity:{value:1},center:{value:new We(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},uvTransform:{value:new Cn}}},fv={basic:{uniforms:Ob([Pf.common,Pf.specularmap,Pf.envmap,Pf.aomap,Pf.lightmap,Pf.fog]),vertexShader:jj.meshbasic_vert,fragmentShader:jj.meshbasic_frag},lambert:{uniforms:Ob([Pf.common,Pf.specularmap,Pf.envmap,Pf.aomap,Pf.lightmap,
Pf.emissivemap,Pf.fog,Pf.lights,{emissive:{value:new jg(0)}}]),vertexShader:jj.meshlambert_vert,fragmentShader:jj.meshlambert_frag},phong:{uniforms:Ob([Pf.common,Pf.specularmap,Pf.envmap,Pf.aomap,Pf.lightmap,Pf.emissivemap,Pf.bumpmap,Pf.normalmap,Pf.displacementmap,Pf.fog,Pf.lights,{emissive:{value:new jg(0)},specular:{value:new jg(1118481)},shininess:{value:30}}]),vertexShader:jj.meshphong_vert,fragmentShader:jj.meshphong_frag},standard:{uniforms:Ob([Pf.common,Pf.envmap,Pf.aomap,Pf.lightmap,Pf.emissivemap,
Pf.bumpmap,Pf.normalmap,Pf.displacementmap,Pf.roughnessmap,Pf.metalnessmap,Pf.fog,Pf.lights,{emissive:{value:new jg(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:jj.meshphysical_vert,fragmentShader:jj.meshphysical_frag},toon:{uniforms:Ob([Pf.common,Pf.aomap,Pf.lightmap,Pf.emissivemap,Pf.bumpmap,Pf.normalmap,Pf.displacementmap,Pf.gradientmap,Pf.fog,Pf.lights,{emissive:{value:new jg(0)}}]),vertexShader:jj.meshtoon_vert,fragmentShader:jj.meshtoon_frag},matcap:{uniforms:Ob([Pf.common,
Pf.bumpmap,Pf.normalmap,Pf.displacementmap,Pf.fog,{matcap:{value:null}}]),vertexShader:jj.meshmatcap_vert,fragmentShader:jj.meshmatcap_frag},points:{uniforms:Ob([Pf.points,Pf.fog]),vertexShader:jj.points_vert,fragmentShader:jj.points_frag},dashed:{uniforms:Ob([Pf.common,Pf.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:jj.linedashed_vert,fragmentShader:jj.linedashed_frag},depth:{uniforms:Ob([Pf.common,Pf.displacementmap]),vertexShader:jj.depth_vert,fragmentShader:jj.depth_frag},
normal:{uniforms:Ob([Pf.common,Pf.bumpmap,Pf.normalmap,Pf.displacementmap,{opacity:{value:1}}]),vertexShader:jj.normal_vert,fragmentShader:jj.normal_frag},sprite:{uniforms:Ob([Pf.sprite,Pf.fog]),vertexShader:jj.sprite_vert,fragmentShader:jj.sprite_frag},background:{uniforms:{uvTransform:{value:new Cn},t2D:{value:null}},vertexShader:jj.background_vert,fragmentShader:jj.background_frag},cube:{uniforms:Ob([Pf.envmap,{opacity:{value:1}}]),vertexShader:jj.cube_vert,fragmentShader:jj.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},
vertexShader:jj.equirect_vert,fragmentShader:jj.equirect_frag},distanceRGBA:{uniforms:Ob([Pf.common,Pf.displacementmap,{referencePosition:{value:new cc},nearDistance:{value:1},farDistance:{value:1E3}}]),vertexShader:jj.distanceRGBA_vert,fragmentShader:jj.distanceRGBA_frag},shadow:{uniforms:Ob([Pf.lights,Pf.fog,{color:{value:new jg(0)},opacity:{value:1}}]),vertexShader:jj.shadow_vert,fragmentShader:jj.shadow_frag}};fv.physical={uniforms:Ob([fv.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},
clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new We(1,1)},clearcoatNormalMap:{value:null},sheen:{value:new jg(0)},transmission:{value:0},transmissionMap:{value:null}}]),vertexShader:jj.meshphysical_vert,fragmentShader:jj.meshphysical_frag};var y_=function(z){function D(t,u,B,G){void 0===t&&(t=null);void 0===u&&(u=1);void 0===B&&(B=1);void 0===G&&(G=1);var K=z.call(this||q,null)||this||q;K.image={data:t,width:u,height:B,depth:G};K.magFilter=1003;K.minFilter=
1003;K.wrapR=1001;K.generateMipmaps=!1;K.flipY=!1;K.needsUpdate=!0;return K}r(D,z);return D}(tp);y_.prototype.isDataTexture2DArray=!0;var z_=function(z){function D(t,u,B,G){void 0===t&&(t=null);void 0===u&&(u=1);void 0===B&&(B=1);void 0===G&&(G=1);var K=z.call(this||q,null)||this||q;K.image={data:t,width:u,height:B,depth:G};K.magFilter=1003;K.minFilter=1003;K.wrapR=1001;K.generateMipmaps=!1;K.flipY=!1;K.needsUpdate=!0;return K}r(D,z);return D}(tp);z_.prototype.isDataTexture3D=!0;var $da=new tp,lya=
new y_,mya=new z_,aea=new zG,Vda=[],Wda=[],Zda=new Float32Array(16),Yda=new Float32Array(9),Xda=new Float32Array(4);QO.prototype.updateCache=function(z){var D=(this||q).cache;z instanceof Float32Array&&D.length!==z.length&&((this||q).cache=new Float32Array(z.length));Ri(D,z)};GF.prototype.setValue=function(z,D,t){for(var u=(this||q).seq,B=0,G=u.length;B!==G;++B){var K=u[B];K.setValue(z,D[K.id],t)}};var VZ=/(\w+)(\])?(\[|\.)?/g;Lw.prototype.setValue=function(z,D,t,u){D=(this||q).map[D];void 0!==D&&
D.setValue(z,t,u)};Lw.prototype.setOptional=function(z,D,t){D=D[t];void 0!==D&&this.setValue(z,t,D)};Lw.upload=function(z,D,t,u){for(var B=0,G=D.length;B!==G;++B){var K=D[B],O=t[K.id];!1!==O.needsUpdate&&K.setValue(z,O.value,u)}};Lw.seqWithValue=function(z,D){for(var t=[],u=0,B=z.length;u!==B;++u){var G=z[u];G.id in D&&t.push(G)}return t};var nya=0,WZ=/^[ \t]*#include +<([\w\d./]+)>/gm,cea=/#pragma unroll_loop[\s]+?for \( int i = (\d+); i < (\d+); i \+\+ \) \{([\s\S]+?)(?=\})\}/g,bea=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g,
oya=0,XQ=function(z){function D(t){var u=z.call(this||q)||this||q;u.type="MeshDepthMaterial";u.depthPacking=3200;u.skinning=!1;u.morphTargets=!1;u.map=null;u.alphaMap=null;u.displacementMap=null;u.displacementScale=1;u.displacementBias=0;u.wireframe=!1;u.wireframeLinewidth=1;u.fog=!1;u.setValues(t);return u}r(D,z);D.prototype.copy=function(t){z.prototype.copy.call(this||q,t);(this||q).depthPacking=t.depthPacking;(this||q).skinning=t.skinning;(this||q).morphTargets=t.morphTargets;(this||q).map=t.map;
(this||q).alphaMap=t.alphaMap;(this||q).displacementMap=t.displacementMap;(this||q).displacementScale=t.displacementScale;(this||q).displacementBias=t.displacementBias;(this||q).wireframe=t.wireframe;(this||q).wireframeLinewidth=t.wireframeLinewidth;return this||q};return D}(Y);XQ.prototype.isMeshDepthMaterial=!0;var YQ=function(z){function D(t){var u=z.call(this||q)||this||q;u.type="MeshDistanceMaterial";u.referencePosition=new cc;u.nearDistance=1;u.farDistance=1E3;u.skinning=!1;u.morphTargets=!1;
u.map=null;u.alphaMap=null;u.displacementMap=null;u.displacementScale=1;u.displacementBias=0;u.fog=!1;u.setValues(t);return u}r(D,z);D.prototype.copy=function(t){z.prototype.copy.call(this||q,t);(this||q).referencePosition.copy(t.referencePosition);(this||q).nearDistance=t.nearDistance;(this||q).farDistance=t.farDistance;(this||q).skinning=t.skinning;(this||q).morphTargets=t.morphTargets;(this||q).map=t.map;(this||q).alphaMap=t.alphaMap;(this||q).displacementMap=t.displacementMap;(this||q).displacementScale=
t.displacementScale;(this||q).displacementBias=t.displacementBias;return this||q};return D}(Y);YQ.prototype.isMeshDistanceMaterial=!0;ZQ.prototype=Object.assign(Object.create(Gb.prototype),{constructor:ZQ,isArrayCamera:!0});var FD=function(z){function D(){var t=z.call(this||q)||this||q;t.type="Group";return t}r(D,z);return D}(N);FD.prototype.isGroup=!0;Object.assign(WJ.prototype,{constructor:WJ,getHandSpace:function(){null===(this||q)._hand&&((this||q)._hand=new FD,(this||q)._hand.matrixAutoUpdate=
!1,(this||q)._hand.visible=!1,(this||q)._hand.joints={},(this||q)._hand.inputState={pinching:!1});return(this||q)._hand},getTargetRaySpace:function(){null===(this||q)._targetRay&&((this||q)._targetRay=new FD,(this||q)._targetRay.matrixAutoUpdate=!1,(this||q)._targetRay.visible=!1);return(this||q)._targetRay},getGripSpace:function(){null===(this||q)._grip&&((this||q)._grip=new FD,(this||q)._grip.matrixAutoUpdate=!1,(this||q)._grip.visible=!1);return(this||q)._grip},dispatchEvent:function(z){null!==
(this||q)._targetRay&&(this||q)._targetRay.dispatchEvent(z);null!==(this||q)._grip&&(this||q)._grip.dispatchEvent(z);null!==(this||q)._hand&&(this||q)._hand.dispatchEvent(z);return this||q},disconnect:function(z){this.dispatchEvent({type:"disconnected",data:z});null!==(this||q)._targetRay&&((this||q)._targetRay.visible=!1);null!==(this||q)._grip&&((this||q)._grip.visible=!1);null!==(this||q)._hand&&((this||q)._hand.visible=!1);return this||q},update:function(z,D,t){var u=null,B=null,G=null,K=(this||
q)._targetRay,O=(this||q)._grip,U=(this||q)._hand;if(z&&"visible-blurred"!==D.session.visibilityState)if(U&&z.hand){G=!0;for(var V=F(z.hand.values()),ca;!(ca=V()).done;){var qa=ca.value;ca=D.getJointPose(qa,t);if(void 0===U.joints[qa.jointName]){var Ea=new FD;Ea.matrixAutoUpdate=!1;Ea.visible=!1;U.joints[qa.jointName]=Ea;U.add(Ea)}qa=U.joints[qa.jointName];null!==ca&&(qa.matrix.fromArray(ca.transform.matrix),qa.matrix.decompose(qa.position,qa.rotation,qa.scale),qa.jointRadius=ca.radius);qa.visible=
null!==ca}D=U.joints["index-finger-tip"].position.distanceTo(U.joints["thumb-tip"].position);U.inputState.pinching&&.025<D?(U.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:z.handedness,target:this||q})):!U.inputState.pinching&&.015>=D&&(U.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:z.handedness,target:this||q}))}else null!==K&&(u=D.getPose(z.targetRaySpace,t),null!==u&&(K.matrix.fromArray(u.transform.matrix),K.matrix.decompose(K.position,K.rotation,
K.scale))),null!==O&&z.gripSpace&&(B=D.getPose(z.gripSpace,t),null!==B&&(O.matrix.fromArray(B.transform.matrix),O.matrix.decompose(O.position,O.rotation,O.scale)));null!==K&&(K.visible=null!==u);null!==O&&(O.visible=null!==B);null!==U&&(U.visible=null!==G);return this||q}});Object.assign(gea.prototype,I.prototype);var Qea=function(z){function D(){return z.apply(this||q,arguments)||this||q}r(D,z);return D}(al);Qea.prototype.isWebGL1Renderer=!0;var A_=function(){function z(t,u){(this||q).name="";(this||
q).color=new jg(t);(this||q).density=void 0!==u?u:2.5E-4}var D=z.prototype;D.clone=function(){return new z((this||q).color,(this||q).density)};D.toJSON=function(){return{type:"FogExp2",color:(this||q).color.getHex(),density:(this||q).density}};return z}();A_.prototype.isFogExp2=!0;var B_=function(){function z(t,u,B){(this||q).name="";(this||q).color=new jg(t);(this||q).near=void 0!==u?u:1;(this||q).far=void 0!==B?B:1E3}var D=z.prototype;D.clone=function(){return new z((this||q).color,(this||q).near,
(this||q).far)};D.toJSON=function(){return{type:"Fog",color:(this||q).color.getHex(),near:(this||q).near,far:(this||q).far}};return z}();B_.prototype.isFog=!0;var zR=function(z){function D(){var u=z.call(this||q)||this||q;u.type="Scene";u.background=null;u.environment=null;u.fog=null;u.overrideMaterial=null;u.autoUpdate=!0;"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:x(u)}));return u}r(D,z);var t=D.prototype;t.copy=function(u,B){z.prototype.copy.call(this||
q,u,B);null!==u.background&&((this||q).background=u.background.clone());null!==u.environment&&((this||q).environment=u.environment.clone());null!==u.fog&&((this||q).fog=u.fog.clone());null!==u.overrideMaterial&&((this||q).overrideMaterial=u.overrideMaterial.clone());(this||q).autoUpdate=u.autoUpdate;(this||q).matrixAutoUpdate=u.matrixAutoUpdate;return this||q};t.toJSON=function(u){var B=z.prototype.toJSON.call(this||q,u);null!==(this||q).background&&(B.object.background=(this||q).background.toJSON(u));
null!==(this||q).environment&&(B.object.environment=(this||q).environment.toJSON(u));null!==(this||q).fog&&(B.object.fog=(this||q).fog.toJSON());return B};return D}(N);zR.prototype.isScene=!0;Object.defineProperty(Sq.prototype,"needsUpdate",{set:function(z){!0===z&&(this||q).version++}});Object.assign(Sq.prototype,{isInterleavedBuffer:!0,onUploadCallback:function(){},setUsage:function(z){(this||q).usage=z;return this||q},copy:function(z){(this||q).array=new z.array.constructor(z.array);(this||q).count=
z.count;(this||q).stride=z.stride;(this||q).usage=z.usage;return this||q},copyAt:function(z,D,t){z*=(this||q).stride;t*=D.stride;for(var u=0,B=(this||q).stride;u<B;u++)(this||q).array[z+u]=D.array[t+u];return this||q},set:function(z,D){void 0===D&&(D=0);(this||q).array.set(z,D);return this||q},clone:function(z){void 0===z.arrayBuffers&&(z.arrayBuffers={});void 0===(this||q).array.buffer._uuid&&((this||q).array.buffer._uuid=Fh.generateUUID());void 0===z.arrayBuffers[(this||q).array.buffer._uuid]&&
(z.arrayBuffers[(this||q).array.buffer._uuid]=(this||q).array.slice(0).buffer);z=new (this||q).array.constructor(z.arrayBuffers[(this||q).array.buffer._uuid]);z=new Sq(z,(this||q).stride);z.setUsage((this||q).usage);return z},onUpload:function(z){(this||q).onUploadCallback=z;return this||q},toJSON:function(z){void 0===z.arrayBuffers&&(z.arrayBuffers={});void 0===(this||q).array.buffer._uuid&&((this||q).array.buffer._uuid=Fh.generateUUID());void 0===z.arrayBuffers[(this||q).array.buffer._uuid]&&(z.arrayBuffers[(this||
q).array.buffer._uuid]=Array.prototype.slice.call(new Uint32Array((this||q).array.buffer)));return{uuid:(this||q).uuid,buffer:(this||q).array.buffer._uuid,type:(this||q).array.constructor.name,stride:(this||q).stride}}});var GD=new cc;Object.defineProperties(bB.prototype,{count:{get:function(){return(this||q).data.count}},array:{get:function(){return(this||q).data.array}},needsUpdate:{set:function(z){(this||q).data.needsUpdate=z}}});Object.assign(bB.prototype,{isInterleavedBufferAttribute:!0,applyMatrix4:function(z){for(var D=
0,t=(this||q).data.count;D<t;D++)GD.x=this.getX(D),GD.y=this.getY(D),GD.z=this.getZ(D),GD.applyMatrix4(z),this.setXYZ(D,GD.x,GD.y,GD.z);return this||q},setX:function(z,D){(this||q).data.array[z*(this||q).data.stride+(this||q).offset]=D;return this||q},setY:function(z,D){(this||q).data.array[z*(this||q).data.stride+(this||q).offset+1]=D;return this||q},setZ:function(z,D){(this||q).data.array[z*(this||q).data.stride+(this||q).offset+2]=D;return this||q},setW:function(z,D){(this||q).data.array[z*(this||
q).data.stride+(this||q).offset+3]=D;return this||q},getX:function(z){return(this||q).data.array[z*(this||q).data.stride+(this||q).offset]},getY:function(z){return(this||q).data.array[z*(this||q).data.stride+(this||q).offset+1]},getZ:function(z){return(this||q).data.array[z*(this||q).data.stride+(this||q).offset+2]},getW:function(z){return(this||q).data.array[z*(this||q).data.stride+(this||q).offset+3]},setXY:function(z,D,t){z=z*(this||q).data.stride+(this||q).offset;(this||q).data.array[z+0]=D;(this||
q).data.array[z+1]=t;return this||q},setXYZ:function(z,D,t,u){z=z*(this||q).data.stride+(this||q).offset;(this||q).data.array[z+0]=D;(this||q).data.array[z+1]=t;(this||q).data.array[z+2]=u;return this||q},setXYZW:function(z,D,t,u,B){z=z*(this||q).data.stride+(this||q).offset;(this||q).data.array[z+0]=D;(this||q).data.array[z+1]=t;(this||q).data.array[z+2]=u;(this||q).data.array[z+3]=B;return this||q},clone:function(z){if(void 0===z){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interlaved buffer attribute will deinterleave buffer data.");
z=[];for(var D=0;D<(this||q).count;D++)for(var t=D*(this||q).data.stride+(this||q).offset,u=0;u<(this||q).itemSize;u++)z.push((this||q).data.array[t+u]);return new za(new (this||q).array.constructor(z),(this||q).itemSize,(this||q).normalized)}void 0===z.interleavedBuffers&&(z.interleavedBuffers={});void 0===z.interleavedBuffers[(this||q).data.uuid]&&(z.interleavedBuffers[(this||q).data.uuid]=(this||q).data.clone(z));return new bB(z.interleavedBuffers[(this||q).data.uuid],(this||q).itemSize,(this||
q).offset,(this||q).normalized)},toJSON:function(z){if(void 0===z){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interlaved buffer attribute will deinterleave buffer data.");z=[];for(var D=0;D<(this||q).count;D++)for(var t=D*(this||q).data.stride+(this||q).offset,u=0;u<(this||q).itemSize;u++)z.push((this||q).data.array[t+u]);return{itemSize:(this||q).itemSize,type:(this||q).array.constructor.name,array:z,normalized:(this||q).normalized}}void 0===z.interleavedBuffers&&(z.interleavedBuffers=
{});void 0===z.interleavedBuffers[(this||q).data.uuid]&&(z.interleavedBuffers[(this||q).data.uuid]=(this||q).data.toJSON(z));return{isInterleavedBufferAttribute:!0,itemSize:(this||q).itemSize,data:(this||q).data.uuid,offset:(this||q).offset,normalized:(this||q).normalized}}});var AR=function(z){function D(t){var u=z.call(this||q)||this||q;u.type="SpriteMaterial";u.color=new jg(16777215);u.map=null;u.alphaMap=null;u.rotation=0;u.sizeAttenuation=!0;u.transparent=!0;u.setValues(t);return u}r(D,z);D.prototype.copy=
function(t){z.prototype.copy.call(this||q,t);(this||q).color.copy(t.color);(this||q).map=t.map;(this||q).alphaMap=t.alphaMap;(this||q).rotation=t.rotation;(this||q).sizeAttenuation=t.sizeAttenuation;return this||q};return D}(Y);AR.prototype.isSpriteMaterial=!0;var BG,sK=new cc,CG=new cc,DG=new cc,kG=new We,$J=new We,lea=new Ug,BR=new cc,tK=new cc,CR=new cc,Rea=new We,C_=new We,Sea=new We,DR=function(z){function D(u){var B=z.call(this||q)||this||q;B.type="Sprite";if(void 0===BG){BG=new pa;var G=new Float32Array([-.5,
-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]);G=new Sq(G,5);BG.setIndex([0,1,2,0,2,3]);BG.setAttribute("position",new bB(G,3,0,!1));BG.setAttribute("uv",new bB(G,2,3,!1))}B.geometry=BG;B.material=void 0!==u?u:new AR;B.center=new We(.5,.5);return B}r(D,z);var t=D.prototype;t.raycast=function(u,B){null===u.camera&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.');CG.setFromMatrixScale((this||q).matrixWorld);lea.copy(u.camera.matrixWorld);(this||
q).modelViewMatrix.multiplyMatrices(u.camera.matrixWorldInverse,(this||q).matrixWorld);DG.setFromMatrixPosition((this||q).modelViewMatrix);u.camera.isPerspectiveCamera&&!1===(this||q).material.sizeAttenuation&&CG.multiplyScalar(-DG.z);var G=(this||q).material.rotation;if(0!==G){var K=Math.cos(G);var O=Math.sin(G)}G=(this||q).center;bR(BR.set(-.5,-.5,0),DG,G,CG,O,K);bR(tK.set(.5,-.5,0),DG,G,CG,O,K);bR(CR.set(.5,.5,0),DG,G,CG,O,K);Rea.set(0,0);C_.set(1,0);Sea.set(1,1);var U=u.ray.intersectTriangle(BR,
tK,CR,!1,sK);if(null===U&&(bR(tK.set(-.5,.5,0),DG,G,CG,O,K),C_.set(0,1),U=u.ray.intersectTriangle(BR,CR,tK,!1,sK),null===U))return;O=u.ray.origin.distanceTo(sK);O<u.near||O>u.far||B.push({distance:O,point:sK.clone(),uv:Xp.getUV(sK,BR,tK,CR,Rea,C_,Sea,new We),face:null,object:this||q})};t.copy=function(u){z.prototype.copy.call(this||q,u);void 0!==u.center&&(this||q).center.copy(u.center);(this||q).material=u.material;return this||q};return D}(N);DR.prototype.isSprite=!0;var ER=new cc,Tea=new cc,D_=
function(z){function D(){var u=z.call(this||q)||this||q;u._currentLevel=0;u.type="LOD";Object.defineProperties(x(u),{levels:{enumerable:!0,value:[]},isLOD:{value:!0}});u.autoUpdate=!0;return u}r(D,z);var t=D.prototype;t.copy=function(u){z.prototype.copy.call(this||q,u,!1);for(var B=u.levels,G=0,K=B.length;G<K;G++){var O=B[G];this.addLevel(O.object.clone(),O.distance)}(this||q).autoUpdate=u.autoUpdate;return this||q};t.addLevel=function(u,B){void 0===B&&(B=0);B=Math.abs(B);var G=(this||q).levels,K;
for(K=0;K<G.length&&!(B<G[K].distance);K++);G.splice(K,0,{distance:B,object:u});this.add(u);return this||q};t.getCurrentLevel=function(){return(this||q)._currentLevel};t.getObjectForDistance=function(u){var B=(this||q).levels;if(0<B.length){var G;var K=1;for(G=B.length;K<G&&!(u<B[K].distance);K++);return B[K-1].object}return null};t.raycast=function(u,B){if(0<(this||q).levels.length){ER.setFromMatrixPosition((this||q).matrixWorld);var G=u.ray.origin.distanceTo(ER);this.getObjectForDistance(G).raycast(u,
B)}};t.update=function(u){var B=(this||q).levels;if(1<B.length){ER.setFromMatrixPosition(u.matrixWorld);Tea.setFromMatrixPosition((this||q).matrixWorld);u=ER.distanceTo(Tea)/u.zoom;B[0].object.visible=!0;var G;var K=1;for(G=B.length;K<G;K++)if(u>=B[K].distance)B[K-1].object.visible=!1,B[K].object.visible=!0;else break;for((this||q)._currentLevel=K-1;K<G;K++)B[K].object.visible=!1}};t.toJSON=function(u){u=z.prototype.toJSON.call(this||q,u);!1===(this||q).autoUpdate&&(u.object.autoUpdate=!1);u.object.levels=
[];for(var B=(this||q).levels,G=0,K=B.length;G<K;G++){var O=B[G];u.object.levels.push({object:O.object.uuid,distance:O.distance})}return u};return D}(N),Uea=new cc,Vea=new Ck,Wea=new Ck,Jya=new cc,Xea=new Ug;aK.prototype=Object.assign(Object.create(La.prototype),{constructor:aK,isSkinnedMesh:!0,copy:function(z){La.prototype.copy.call(this||q,z);(this||q).bindMode=z.bindMode;(this||q).bindMatrix.copy(z.bindMatrix);(this||q).bindMatrixInverse.copy(z.bindMatrixInverse);(this||q).skeleton=z.skeleton;
return this||q},bind:function(z,D){(this||q).skeleton=z;void 0===D&&(this.updateMatrixWorld(!0),(this||q).skeleton.calculateInverses(),D=(this||q).matrixWorld);(this||q).bindMatrix.copy(D);(this||q).bindMatrixInverse.copy(D).invert()},pose:function(){(this||q).skeleton.pose()},normalizeSkinWeights:function(){for(var z=new Ck,D=(this||q).geometry.attributes.skinWeight,t=0,u=D.count;t<u;t++){z.x=D.getX(t);z.y=D.getY(t);z.z=D.getZ(t);z.w=D.getW(t);var B=1/z.manhattanLength();Infinity!==B?z.multiplyScalar(B):
z.set(1,0,0,0);D.setXYZW(t,z.x,z.y,z.z,z.w)}},updateMatrixWorld:function(z){La.prototype.updateMatrixWorld.call(this||q,z);"attached"===(this||q).bindMode?(this||q).bindMatrixInverse.copy((this||q).matrixWorld).invert():"detached"===(this||q).bindMode?(this||q).bindMatrixInverse.copy((this||q).bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+(this||q).bindMode)},boneTransform:function(z,D){var t=(this||q).skeleton,u=(this||q).geometry;Vea.fromBufferAttribute(u.attributes.skinIndex,
z);Wea.fromBufferAttribute(u.attributes.skinWeight,z);Uea.fromBufferAttribute(u.attributes.position,z).applyMatrix4((this||q).bindMatrix);D.set(0,0,0);for(z=0;4>z;z++)if(u=Wea.getComponent(z),0!==u){var B=Vea.getComponent(z);Xea.multiplyMatrices(t.bones[B].matrixWorld,t.boneInverses[B]);D.addScaledVector(Jya.copy(Uea).applyMatrix4(Xea),u)}return D.applyMatrix4((this||q).bindMatrixInverse)}});bK.prototype=Object.assign(Object.create(N.prototype),{constructor:bK,isBone:!0});var Yea=new Ug,Kya=new Ug,
E_=function(){function z(t,u){void 0===t&&(t=[]);void 0===u&&(u=[]);(this||q).uuid=Fh.generateUUID();(this||q).bones=t.slice(0);(this||q).boneInverses=u;(this||q).boneMatrices=null;(this||q).boneTexture=null;(this||q).boneTextureSize=0;(this||q).frame=-1;this.init()}var D=z.prototype;D.init=function(){var t=(this||q).bones,u=(this||q).boneInverses;(this||q).boneMatrices=new Float32Array(16*t.length);if(0===u.length)this.calculateInverses();else if(t.length!==u.length)for(console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),
(this||q).boneInverses=[],t=0,u=(this||q).bones.length;t<u;t++)(this||q).boneInverses.push(new Ug)};D.calculateInverses=function(){for(var t=(this||q).boneInverses.length=0,u=(this||q).bones.length;t<u;t++){var B=new Ug;(this||q).bones[t]&&B.copy((this||q).bones[t].matrixWorld).invert();(this||q).boneInverses.push(B)}};D.pose=function(){for(var t=0,u=(this||q).bones.length;t<u;t++){var B=(this||q).bones[t];B&&B.matrixWorld.copy((this||q).boneInverses[t]).invert()}t=0;for(u=(this||q).bones.length;t<
u;t++)if(B=(this||q).bones[t])B.parent&&B.parent.isBone?(B.matrix.copy(B.parent.matrixWorld).invert(),B.matrix.multiply(B.matrixWorld)):B.matrix.copy(B.matrixWorld),B.matrix.decompose(B.position,B.quaternion,B.scale)};D.update=function(){for(var t=(this||q).bones,u=(this||q).boneInverses,B=(this||q).boneMatrices,G=(this||q).boneTexture,K=0,O=t.length;K<O;K++)Yea.multiplyMatrices(t[K]?t[K].matrixWorld:Kya,u[K]),Yea.toArray(B,16*K);null!==G&&(G.needsUpdate=!0)};D.clone=function(){return new z((this||
q).bones,(this||q).boneInverses)};D.getBoneByName=function(t){for(var u=0,B=(this||q).bones.length;u<B;u++){var G=(this||q).bones[u];if(G.name===t)return G}};D.dispose=function(){null!==(this||q).boneTexture&&((this||q).boneTexture.dispose(),(this||q).boneTexture=null)};D.fromJSON=function(t,u){(this||q).uuid=t.uuid;for(var B=0,G=t.bones.length;B<G;B++){var K=t.bones[B],O=u[K];void 0===O&&(console.warn("THREE.Skeleton: No bone found with UUID:",K),O=new bK);(this||q).bones.push(O);(this||q).boneInverses.push((new Ug).fromArray(t.boneInverses[B]))}this.init();
return this||q};D.toJSON=function(){var t={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};t.uuid=(this||q).uuid;for(var u=(this||q).bones,B=(this||q).boneInverses,G=0,K=u.length;G<K;G++)t.bones.push(u[G].uuid),t.boneInverses.push(B[G].toArray());return t};return z}(),Zea=new Ug,$ea=new Ug,FR=[],uK=new La;cR.prototype=Object.assign(Object.create(La.prototype),{constructor:cR,isInstancedMesh:!0,copy:function(z){La.prototype.copy.call(this||q,z);(this||q).instanceMatrix.copy(z.instanceMatrix);
null!==z.instanceColor&&((this||q).instanceColor=z.instanceColor.clone());(this||q).count=z.count;return this||q},getColorAt:function(z,D){D.fromArray((this||q).instanceColor.array,3*z)},getMatrixAt:function(z,D){D.fromArray((this||q).instanceMatrix.array,16*z)},raycast:function(z,D){var t=(this||q).matrixWorld,u=(this||q).count;uK.geometry=(this||q).geometry;uK.material=(this||q).material;if(void 0!==uK.material)for(var B=0;B<u;B++){this.getMatrixAt(B,Zea);$ea.multiplyMatrices(t,Zea);uK.matrixWorld=
$ea;uK.raycast(z,FR);for(var G=0,K=FR.length;G<K;G++){var O=FR[G];O.instanceId=B;O.object=this||q;D.push(O)}FR.length=0}},setColorAt:function(z,D){null===(this||q).instanceColor&&((this||q).instanceColor=new za(new Float32Array(3*(this||q).count),3));D.toArray((this||q).instanceColor.array,3*z)},setMatrixAt:function(z,D){D.toArray((this||q).instanceMatrix.array,16*z)},updateMorphTargets:function(){},dispose:function(){this.dispatchEvent({type:"dispose"})}});var mo=function(z){function D(t){var u=
z.call(this||q)||this||q;u.type="LineBasicMaterial";u.color=new jg(16777215);u.linewidth=1;u.linecap="round";u.linejoin="round";u.morphTargets=!1;u.setValues(t);return u}r(D,z);D.prototype.copy=function(t){z.prototype.copy.call(this||q,t);(this||q).color.copy(t.color);(this||q).linewidth=t.linewidth;(this||q).linecap=t.linecap;(this||q).linejoin=t.linejoin;(this||q).morphTargets=t.morphTargets;return this||q};return D}(Y);mo.prototype.isLineBasicMaterial=!0;var afa=new cc,bfa=new cc,cfa=new Ug,F_=
new eB,vK=new hB;lv.prototype=Object.assign(Object.create(N.prototype),{constructor:lv,isLine:!0,copy:function(z){N.prototype.copy.call(this||q,z);(this||q).material=z.material;(this||q).geometry=z.geometry;return this||q},computeLineDistances:function(){var z=(this||q).geometry;if(z.isBufferGeometry)if(null===z.index){for(var D=z.attributes.position,t=[0],u=1,B=D.count;u<B;u++)afa.fromBufferAttribute(D,u-1),bfa.fromBufferAttribute(D,u),t[u]=t[u-1],t[u]+=afa.distanceTo(bfa);z.setAttribute("lineDistance",
new hb(t,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else z.isGeometry&&console.error("THREE.Line.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this||q},raycast:function(z,D){var t=(this||q).geometry,u=(this||q).matrixWorld,B=z.params.Line.threshold;null===t.boundingSphere&&t.computeBoundingSphere();vK.copy(t.boundingSphere);vK.applyMatrix4(u);vK.radius+=B;if(!1!==z.ray.intersectsSphere(vK)){cfa.copy(u).invert();
F_.copy(z.ray).applyMatrix4(cfa);u=B/(((this||q).scale.x+(this||q).scale.y+(this||q).scale.z)/3);u*=u;B=new cc;var G=new cc,K=new cc,O=new cc,U=(this||q).isLineSegments?2:1;if(t.isBufferGeometry){var V=t.index;t=t.attributes.position;if(null!==V){V=V.array;for(var ca=0,qa=V.length-1;ca<qa;ca+=U){var Ea=V[ca+1];B.fromBufferAttribute(t,V[ca]);G.fromBufferAttribute(t,Ea);F_.distanceSqToSegment(B,G,O,K)>u||(O.applyMatrix4((this||q).matrixWorld),Ea=z.ray.origin.distanceTo(O),Ea<z.near||Ea>z.far||D.push({distance:Ea,
point:K.clone().applyMatrix4((this||q).matrixWorld),index:ca,face:null,faceIndex:null,object:this||q}))}}else for(V=0,ca=t.count-1;V<ca;V+=U)B.fromBufferAttribute(t,V),G.fromBufferAttribute(t,V+1),F_.distanceSqToSegment(B,G,O,K)>u||(O.applyMatrix4((this||q).matrixWorld),qa=z.ray.origin.distanceTo(O),qa<z.near||qa>z.far||D.push({distance:qa,point:K.clone().applyMatrix4((this||q).matrixWorld),index:V,face:null,faceIndex:null,object:this||q}))}else t.isGeometry&&console.error("THREE.Line.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}},
updateMorphTargets:function(){var z=(this||q).geometry;if(z.isBufferGeometry){z=z.morphAttributes;var D=Object.keys(z);if(0<D.length&&(z=z[D[0]],void 0!==z)){(this||q).morphTargetInfluences=[];(this||q).morphTargetDictionary={};D=0;for(var t=z.length;D<t;D++){var u=z[D].name||String(D);(this||q).morphTargetInfluences.push(0);(this||q).morphTargetDictionary[u]=D}}}else z=z.morphTargets,void 0!==z&&0<z.length&&console.error("THREE.Line.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}});
var dfa=new cc,efa=new cc;Zp.prototype=Object.assign(Object.create(lv.prototype),{constructor:Zp,isLineSegments:!0,computeLineDistances:function(){var z=(this||q).geometry;if(z.isBufferGeometry)if(null===z.index){for(var D=z.attributes.position,t=[],u=0,B=D.count;u<B;u+=2)dfa.fromBufferAttribute(D,u),efa.fromBufferAttribute(D,u+1),t[u]=0===u?0:t[u-1],t[u+1]=t[u]+dfa.distanceTo(efa);z.setAttribute("lineDistance",new hb(t,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");
else z.isGeometry&&console.error("THREE.LineSegments.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this||q}});var G_=function(z){function D(t,u){t=z.call(this||q,t,u)||this||q;t.type="LineLoop";return t}r(D,z);return D}(lv);G_.prototype.isLineLoop=!0;var AD=function(z){function D(t){var u=z.call(this||q)||this||q;u.type="PointsMaterial";u.color=new jg(16777215);u.map=null;u.alphaMap=null;u.size=1;u.sizeAttenuation=!0;u.morphTargets=!1;u.setValues(t);
return u}r(D,z);D.prototype.copy=function(t){z.prototype.copy.call(this||q,t);(this||q).color.copy(t.color);(this||q).map=t.map;(this||q).alphaMap=t.alphaMap;(this||q).size=t.size;(this||q).sizeAttenuation=t.sizeAttenuation;(this||q).morphTargets=t.morphTargets;return this||q};return D}(Y);AD.prototype.isPointsMaterial=!0;var ffa=new Ug,ZZ=new eB,wK=new hB,GR=new cc;lG.prototype=Object.assign(Object.create(N.prototype),{constructor:lG,isPoints:!0,copy:function(z){N.prototype.copy.call(this||q,z);
(this||q).material=z.material;(this||q).geometry=z.geometry;return this||q},raycast:function(z,D){var t=(this||q).geometry,u=(this||q).matrixWorld,B=z.params.Points.threshold;null===t.boundingSphere&&t.computeBoundingSphere();wK.copy(t.boundingSphere);wK.applyMatrix4(u);wK.radius+=B;if(!1!==z.ray.intersectsSphere(wK))if(ffa.copy(u).invert(),ZZ.copy(z.ray).applyMatrix4(ffa),B/=((this||q).scale.x+(this||q).scale.y+(this||q).scale.z)/3,B*=B,t.isBufferGeometry){var G=t.index;t=t.attributes.position;if(null!==
G){G=G.array;for(var K=0,O=G.length;K<O;K++){var U=G[K];GR.fromBufferAttribute(t,U);mea(GR,U,B,u,z,D,this||q)}}else for(G=0,K=t.count;G<K;G++)GR.fromBufferAttribute(t,G),mea(GR,G,B,u,z,D,this||q)}else console.error("THREE.Points.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")},updateMorphTargets:function(){var z=(this||q).geometry;if(z.isBufferGeometry){z=z.morphAttributes;var D=Object.keys(z);if(0<D.length&&(z=z[D[0]],void 0!==z)){(this||q).morphTargetInfluences=
[];(this||q).morphTargetDictionary={};D=0;for(var t=z.length;D<t;D++){var u=z[D].name||String(D);(this||q).morphTargetInfluences.push(0);(this||q).morphTargetDictionary[u]=D}}}else z=z.morphTargets,void 0!==z&&0<z.length&&console.error("THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}});var gfa=function(z){function D(u,B,G,K,O,U,V,ca,qa){function Ea(){Ra.needsUpdate=!0;u.requestVideoFrameCallback(Ea)}B=z.call(this||q,u,B,G,K,O,U,V,ca,qa)||this||
q;B.format=void 0!==V?V:1022;B.minFilter=void 0!==U?U:1006;B.magFilter=void 0!==O?O:1006;B.generateMipmaps=!1;var Ra=x(B);"requestVideoFrameCallback"in u&&u.requestVideoFrameCallback(Ea);return B}r(D,z);var t=D.prototype;t.clone=function(){return(new (this||q).constructor((this||q).image)).copy(this||q)};t.update=function(){var u=(this||q).image;!1==="requestVideoFrameCallback"in u&&u.readyState>=u.HAVE_CURRENT_DATA&&((this||q).needsUpdate=!0)};return D}(tp);gfa.prototype.isVideoTexture=!0;var H_=
function(z){function D(t,u,B,G,K,O,U,V,ca,qa,Ea,Ra){G=z.call(this||q,null,O,U,V,ca,qa,G,K,Ea,Ra)||this||q;G.image={width:u,height:B};G.mipmaps=t;G.flipY=!1;G.generateMipmaps=!1;return G}r(D,z);return D}(tp);H_.prototype.isCompressedTexture=!0;var hfa=function(z){function D(t,u,B,G,K,O,U,V,ca){t=z.call(this||q,t,u,B,G,K,O,U,V,ca)||this||q;t.needsUpdate=!0;return t}r(D,z);return D}(tp);hfa.prototype.isCanvasTexture=!0;var ifa=function(z){function D(t,u,B,G,K,O,U,V,ca,qa){qa=void 0!==qa?qa:1026;if(1026!==
qa&&1027!==qa)throw Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===B&&1026===qa&&(B=1012);void 0===B&&1027===qa&&(B=1020);B=z.call(this||q,null,G,K,O,U,V,qa,B,ca)||this||q;B.image={width:t,height:u};B.magFilter=void 0!==U?U:1003;B.minFilter=void 0!==V?V:1003;B.flipY=!1;B.generateMipmaps=!1;return B}r(D,z);return D}(tp);ifa.prototype.isDepthTexture=!0;var HR=function(z){function D(t,u,B,G){void 0===t&&(t=1);void 0===u&&(u=8);void 0===B&&(B=0);void 0===
G&&(G=2*Math.PI);var K=z.call(this||q)||this||q;K.type="CircleGeometry";K.parameters={radius:t,segments:u,thetaStart:B,thetaLength:G};u=Math.max(3,u);var O=[],U=[],V=[],ca=[],qa=new cc,Ea=new We;U.push(0,0,0);V.push(0,0,1);ca.push(.5,.5);for(var Ra=0,Ua=3;Ra<=u;Ra++,Ua+=3){var ub=B+Ra/u*G;qa.x=t*Math.cos(ub);qa.y=t*Math.sin(ub);U.push(qa.x,qa.y,qa.z);V.push(0,0,1);Ea.x=(U[Ua]/t+1)/2;Ea.y=(U[Ua+1]/t+1)/2;ca.push(Ea.x,Ea.y)}for(t=1;t<=u;t++)O.push(t,t+1,0);K.setIndex(O);K.setAttribute("position",new hb(U,
3));K.setAttribute("normal",new hb(V,3));K.setAttribute("uv",new hb(ca,2));return K}r(D,z);return D}(pa),EG=function(z){function D(t,u,B,G,K,O,U,V){function ca(ld){for(var cd=ec,Nc=new We,Oc=new cc,jd=0,Ed=!0===ld?t:u,Ad=!0===ld?1:-1,de=1;de<=G;de++)Ua.push(0,Ac*Ad,0),ub.push(0,Ad,0),nb.push(.5,.5),ec++;de=ec;for(var rf=0;rf<=G;rf++){var md=rf/G*V+U,qd=Math.cos(md);md=Math.sin(md);Oc.x=Ed*md;Oc.y=Ac*Ad;Oc.z=Ed*qd;Ua.push(Oc.x,Oc.y,Oc.z);ub.push(0,Ad,0);Nc.x=.5*qd+.5;Nc.y=.5*md*Ad+.5;nb.push(Nc.x,
Nc.y);ec++}for(Nc=0;Nc<G;Nc++)Oc=cd+Nc,Ed=de+Nc,!0===ld?Ra.push(Ed,Ed+1,Oc):Ra.push(Ed+1,Ed,Oc),jd+=3;Ea.addGroup(Lc,jd,!0===ld?1:2);Lc+=jd}void 0===t&&(t=1);void 0===u&&(u=1);void 0===B&&(B=1);void 0===G&&(G=8);void 0===K&&(K=1);void 0===O&&(O=!1);void 0===U&&(U=0);void 0===V&&(V=2*Math.PI);var qa=z.call(this||q)||this||q;qa.type="CylinderGeometry";qa.parameters={radiusTop:t,radiusBottom:u,height:B,radialSegments:G,heightSegments:K,openEnded:O,thetaStart:U,thetaLength:V};var Ea=x(qa);G=Math.floor(G);
K=Math.floor(K);var Ra=[],Ua=[],ub=[],nb=[],ec=0,gc=[],Ac=B/2,Lc=0;(function(){for(var ld=new cc,cd=new cc,Nc=0,Oc=(u-t)/B,jd=0;jd<=K;jd++){for(var Ed=[],Ad=jd/K,de=Ad*(u-t)+t,rf=0;rf<=G;rf++){var md=rf/G,qd=md*V+U,Pd=Math.sin(qd);qd=Math.cos(qd);cd.x=de*Pd;cd.y=-Ad*B+Ac;cd.z=de*qd;Ua.push(cd.x,cd.y,cd.z);ld.set(Pd,Oc,qd).normalize();ub.push(ld.x,ld.y,ld.z);nb.push(md,1-Ad);Ed.push(ec++)}gc.push(Ed)}for(ld=0;ld<G;ld++)for(cd=0;cd<K;cd++)Oc=gc[cd+1][ld],jd=gc[cd+1][ld+1],Ed=gc[cd][ld+1],Ra.push(gc[cd][ld],
Oc,Ed),Ra.push(Oc,jd,Ed),Nc+=6;Ea.addGroup(Lc,Nc,0);Lc+=Nc})();!1===O&&(0<t&&ca(!0),0<u&&ca(!1));qa.setIndex(Ra);qa.setAttribute("position",new hb(Ua,3));qa.setAttribute("normal",new hb(ub,3));qa.setAttribute("uv",new hb(nb,2));return qa}r(D,z);return D}(pa),IR=function(z){function D(t,u,B,G,K,O,U){void 0===t&&(t=1);void 0===u&&(u=1);void 0===B&&(B=8);void 0===G&&(G=1);void 0===K&&(K=!1);void 0===O&&(O=0);void 0===U&&(U=2*Math.PI);var V=z.call(this||q,0,t,u,B,G,K,O,U)||this||q;V.type="ConeGeometry";
V.parameters={radius:t,height:u,radialSegments:B,heightSegments:G,openEnded:K,thetaStart:O,thetaLength:U};return V}r(D,z);return D}(EG),kB=function(z){function D(t,u,B,G){function K(Ea){ca.push(Ea.x,Ea.y,Ea.z)}function O(Ea,Ra){Ea*=3;Ra.x=t[Ea+0];Ra.y=t[Ea+1];Ra.z=t[Ea+2]}function U(Ea,Ra,Ua,ub){0>ub&&1===Ea.x&&(qa[Ra]=Ea.x-1);0===Ua.x&&0===Ua.z&&(qa[Ra]=ub/2/Math.PI+.5)}void 0===B&&(B=1);void 0===G&&(G=0);var V=z.call(this||q)||this||q;V.type="PolyhedronGeometry";V.parameters={vertices:t,indices:u,
radius:B,detail:G};var ca=[],qa=[];(function(Ea){for(var Ra=new cc,Ua=new cc,ub=new cc,nb=0;nb<u.length;nb+=3){O(u[nb+0],Ra);O(u[nb+1],Ua);O(u[nb+2],ub);for(var ec=Ra,gc=Ua,Ac=ub,Lc=Ea+1,ld=[],cd=0;cd<=Lc;cd++){ld[cd]=[];for(var Nc=ec.clone().lerp(Ac,cd/Lc),Oc=gc.clone().lerp(Ac,cd/Lc),jd=Lc-cd,Ed=0;Ed<=jd;Ed++)ld[cd][Ed]=0===Ed&&cd===Lc?Nc:Nc.clone().lerp(Oc,Ed/jd)}for(ec=0;ec<Lc;ec++)for(gc=0;gc<2*(Lc-ec)-1;gc++)Ac=Math.floor(gc/2),0===gc%2?(K(ld[ec][Ac+1]),K(ld[ec+1][Ac]),K(ld[ec][Ac])):(K(ld[ec][Ac+
1]),K(ld[ec+1][Ac+1]),K(ld[ec+1][Ac]))}})(G);(function(Ea){for(var Ra=new cc,Ua=0;Ua<ca.length;Ua+=3)Ra.x=ca[Ua+0],Ra.y=ca[Ua+1],Ra.z=ca[Ua+2],Ra.normalize().multiplyScalar(Ea),ca[Ua+0]=Ra.x,ca[Ua+1]=Ra.y,ca[Ua+2]=Ra.z})(B);(function(){for(var Ea=new cc,Ra=0;Ra<ca.length;Ra+=3)Ea.x=ca[Ra+0],Ea.y=ca[Ra+1],Ea.z=ca[Ra+2],qa.push(Math.atan2(Ea.z,-Ea.x)/2/Math.PI+.5,1-(Math.atan2(-Ea.y,Math.sqrt(Ea.x*Ea.x+Ea.z*Ea.z))/Math.PI+.5));Ea=new cc;Ra=new cc;for(var Ua=new cc,ub=new cc,nb=new We,ec=new We,gc=new We,
Ac=0,Lc=0;Ac<ca.length;Ac+=9,Lc+=6){Ea.set(ca[Ac+0],ca[Ac+1],ca[Ac+2]);Ra.set(ca[Ac+3],ca[Ac+4],ca[Ac+5]);Ua.set(ca[Ac+6],ca[Ac+7],ca[Ac+8]);nb.set(qa[Lc+0],qa[Lc+1]);ec.set(qa[Lc+2],qa[Lc+3]);gc.set(qa[Lc+4],qa[Lc+5]);ub.copy(Ea).add(Ra).add(Ua).divideScalar(3);var ld=Math.atan2(ub.z,-ub.x);U(nb,Lc+0,Ea,ld);U(ec,Lc+2,Ra,ld);U(gc,Lc+4,Ua,ld)}for(Ea=0;Ea<qa.length;Ea+=6)Ra=qa[Ea+0],Ua=qa[Ea+2],ub=qa[Ea+4],nb=Math.min(Ra,Ua,ub),.9<Math.max(Ra,Ua,ub)&&.1>nb&&(.2>Ra&&(qa[Ea+0]+=1),.2>Ua&&(qa[Ea+2]+=1),
.2>ub&&(qa[Ea+4]+=1))})();V.setAttribute("position",new hb(ca,3));V.setAttribute("normal",new hb(ca.slice(),3));V.setAttribute("uv",new hb(qa,2));0===G?V.computeVertexNormals():V.normalizeNormals();return V}r(D,z);return D}(pa),JR=function(z){function D(t,u){void 0===t&&(t=1);void 0===u&&(u=0);var B=(1+Math.sqrt(5))/2;var G=1/B;B=z.call(this||q,[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-G,-B,0,-G,B,0,G,-B,0,G,B,-G,-B,0,-G,B,0,G,-B,0,G,B,0,-B,0,-G,B,0,-G,-B,0,G,B,0,G],[3,11,7,
3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],t,u)||this||q;B.type="DodecahedronGeometry";B.parameters={radius:t,detail:u};return B}r(D,z);return D}(kB),KR=new cc,LR=new cc,I_=new cc,FG=new Xp,J_=function(z){function D(t,u){var B=z.call(this||q)||this||q;B.type="EdgesGeometry";B.parameters=
{thresholdAngle:u};u=void 0!==u?u:1;if(!0===t.isGeometry)return console.error("THREE.EdgesGeometry no longer supports THREE.Geometry. Use THREE.BufferGeometry instead."),x(B);var G=Math.pow(10,4),K=Math.cos(Fh.DEG2RAD*u),O=t.getIndex();t=t.getAttribute("position");var U=O?O.count:t.count,V=[0,0,0],ca=["a","b","c"],qa=Array(3);u={};for(var Ea=[],Ra=0;Ra<U;Ra+=3){O?(V[0]=O.getX(Ra),V[1]=O.getX(Ra+1),V[2]=O.getX(Ra+2)):(V[0]=Ra,V[1]=Ra+1,V[2]=Ra+2);var Ua=FG.a,ub=FG.b,nb=FG.c;Ua.fromBufferAttribute(t,
V[0]);ub.fromBufferAttribute(t,V[1]);nb.fromBufferAttribute(t,V[2]);FG.getNormal(I_);qa[0]=Math.round(Ua.x*G)+","+Math.round(Ua.y*G)+","+Math.round(Ua.z*G);qa[1]=Math.round(ub.x*G)+","+Math.round(ub.y*G)+","+Math.round(ub.z*G);qa[2]=Math.round(nb.x*G)+","+Math.round(nb.y*G)+","+Math.round(nb.z*G);if(qa[0]!==qa[1]&&qa[1]!==qa[2]&&qa[2]!==qa[0])for(Ua=0;3>Ua;Ua++){ub=(Ua+1)%3;var ec=qa[Ua],gc=qa[ub];nb=FG[ca[Ua]];var Ac=FG[ca[ub]],Lc=ec+"_"+gc;ec=gc+"_"+ec;ec in u&&u[ec]?(I_.dot(u[ec].normal)<=K&&(Ea.push(nb.x,
nb.y,nb.z),Ea.push(Ac.x,Ac.y,Ac.z)),u[ec]=null):Lc in u||(u[Lc]={index0:V[Ua],index1:V[ub],normal:I_.clone()})}}for(var ld in u)u[ld]&&(G=u[ld],K=G.index1,KR.fromBufferAttribute(t,G.index0),LR.fromBufferAttribute(t,K),Ea.push(KR.x,KR.y,KR.z),Ea.push(LR.x,LR.y,LR.z));B.setAttribute("position",new hb(Ea,3));return B}r(D,z);return D}(pa),Lya={triangulate:function(z,D,t){t=t||2;var u=D&&D.length,B=u?D[0]*t:z.length,G=nea(z,0,B,t,!0),K=[];if(!G||G.next===G.prev)return K;var O;if(u){var U=t;u=[];var V;
var ca=0;for(V=D.length;ca<V;ca++){var qa=D[ca]*U;var Ea=ca<V-1?D[ca+1]*U:z.length;qa=nea(z,qa,Ea,U,!1);qa===qa.next&&(qa.steiner=!0);u.push(xya(qa))}u.sort(vya);for(ca=0;ca<u.length;ca++){U=u[ca];D=G;if(D=wya(U,D))U=qea(D,U),cB(D,D.next),cB(U,U.next);G=cB(G,G.next)}}if(z.length>80*t){var Ra=O=z[0];var Ua=u=z[1];for(U=t;U<B;U+=t)ca=z[U],D=z[U+1],ca<Ra&&(Ra=ca),D<Ua&&(Ua=D),ca>O&&(O=ca),D>u&&(u=D);O=Math.max(O-Ra,u-Ua);O=0!==O?1/O:0}dK(G,K,t,Ra,Ua,O);return K}},Uy={area:function(z){for(var D=z.length,
t=0,u=D-1,B=0;B<D;u=B++)t+=z[u].x*z[B].y-z[B].x*z[u].y;return.5*t},isClockWise:function(z){return 0>Uy.area(z)},triangulateShape:function(z,D){var t=[],u=[],B=[];rea(z);sea(t,z);z=z.length;D.forEach(rea);for(var G=0;G<D.length;G++)u.push(z),z+=D[G].length,sea(t,D[G]);D=Lya.triangulate(t,u);for(t=0;t<D.length;t+=3)B.push(D.slice(t,t+3));return B}},Vy=function(z){function D(t,u){function B(qa){function Ea(lh,ee,mh){ee||console.error("THREE.ExtrudeGeometry: vec does not exist");return ee.clone().multiplyScalar(mh).add(lh)}
function Ra(lh,ee,mh){var fi=lh.x-ee.x;var nh=lh.y-ee.y;var pk=mh.x-lh.x;var qk=mh.y-lh.y,Jj=fi*fi+nh*nh;if(Math.abs(fi*qk-nh*pk)>Number.EPSILON){var Yp=Math.sqrt(Jj),iv=Math.sqrt(pk*pk+qk*qk);Jj=ee.x-nh/Yp;ee=ee.y+fi/Yp;qk=((mh.x-qk/iv-Jj)*qk-(mh.y+pk/iv-ee)*pk)/(fi*qk-nh*pk);pk=Jj+fi*qk-lh.x;fi=ee+nh*qk-lh.y;nh=pk*pk+fi*fi;if(2>=nh)return new We(pk,fi);nh=Math.sqrt(nh/2)}else lh=!1,fi>Number.EPSILON?pk>Number.EPSILON&&(lh=!0):fi<-Number.EPSILON?pk<-Number.EPSILON&&(lh=!0):Math.sign(nh)===Math.sign(qk)&&
(lh=!0),lh?(pk=-nh,nh=Math.sqrt(Jj)):(pk=fi,fi=nh,nh=Math.sqrt(Jj/2));return new We(pk/nh,fi/nh)}function Ua(lh,ee){for(var mh=lh.length;0<=--mh;){var fi=mh,nh=mh-1;0>nh&&(nh=lh.length-1);for(var pk=0,qk=ld+2*Ad;pk<qk;pk++){var Jj=Sc*pk,Yp=Sc*(pk+1),iv=ee+nh+Jj,XJ=ee+nh+Yp;Yp=ee+fi+Yp;ec(ee+fi+Jj);ec(iv);ec(Yp);ec(iv);ec(XJ);ec(Yp);Jj=O.length/3;Jj=rf.generateSideWallUV(K,O,Jj-6,Jj-3,Jj-2,Jj-1);gc(Jj[0]);gc(Jj[1]);gc(Jj[3]);gc(Jj[1]);gc(Jj[2]);gc(Jj[3])}}}function ub(lh,ee,mh){Ac.push(lh);Ac.push(ee);
Ac.push(mh)}function nb(lh,ee,mh){ec(lh);ec(ee);ec(mh);lh=O.length/3;lh=rf.generateTopUV(K,O,lh-3,lh-2,lh-1);gc(lh[0]);gc(lh[1]);gc(lh[2])}function ec(lh){O.push(Ac[3*lh]);O.push(Ac[3*lh+1]);O.push(Ac[3*lh+2])}function gc(lh){U.push(lh.x);U.push(lh.y)}var Ac=[],Lc=void 0!==u.curveSegments?u.curveSegments:12,ld=void 0!==u.steps?u.steps:1,cd=void 0!==u.depth?u.depth:100,Nc=void 0!==u.bevelEnabled?u.bevelEnabled:!0,Oc=void 0!==u.bevelThickness?u.bevelThickness:6,jd=void 0!==u.bevelSize?u.bevelSize:Oc-
2,Ed=void 0!==u.bevelOffset?u.bevelOffset:0,Ad=void 0!==u.bevelSegments?u.bevelSegments:3,de=u.extrudePath,rf=void 0!==u.UVGenerator?u.UVGenerator:Mya;void 0!==u.amount&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),cd=u.amount);var md=!1;if(de){var qd=de.getSpacedPoints(ld);md=!0;Nc=!1;var Pd=de.computeFrenetFrames(ld,!1);var kg=new cc;var Me=new cc;var pg=new cc}Nc||(Ed=jd=Oc=Ad=0);qa=qa.extractPoints(Lc);de=qa.shape;var Hh=qa.holes;if(!Uy.isClockWise(de))for(de=
de.reverse(),qa=0,Lc=Hh.length;qa<Lc;qa++){var Li=Hh[qa];Uy.isClockWise(Li)&&(Hh[qa]=Li.reverse())}var $k=Uy.triangulateShape(de,Hh),nc=de;qa=0;for(Lc=Hh.length;qa<Lc;qa++)de=de.concat(Hh[qa]);var Sc=de.length,Td=$k.length;qa=[];Lc=0;Li=nc.length;for(var Kc=Li-1,Ne=Lc+1;Lc<Li;Lc++,Kc++,Ne++)Kc===Li&&(Kc=0),Ne===Li&&(Ne=0),qa[Lc]=Ra(nc[Lc],nc[Kc],nc[Ne]);Lc=[];Li=qa.concat();Ne=0;for(var ff=Hh.length;Ne<ff;Ne++){var tg=Hh[Ne];Kc=[];for(var lf=0,Gh=tg.length,Lh=Gh-1,Ai=lf+1;lf<Gh;lf++,Lh++,Ai++)Lh===
Gh&&(Lh=0),Ai===Gh&&(Ai=0),Kc[lf]=Ra(tg[lf],tg[Lh],tg[Ai]);Lc.push(Kc);Li=Li.concat(Kc)}for(Ne=0;Ne<Ad;Ne++){Kc=Ne/Ad;ff=Oc*Math.cos(Kc*Math.PI/2);tg=jd*Math.sin(Kc*Math.PI/2)+Ed;Kc=0;for(lf=nc.length;Kc<lf;Kc++)Gh=Ea(nc[Kc],qa[Kc],tg),ub(Gh.x,Gh.y,-ff);lf=0;for(Gh=Hh.length;lf<Gh;lf++){Lh=Hh[lf];Kc=Lc[lf];Ai=0;for(var Bi=Lh.length;Ai<Bi;Ai++){var Ij=Ea(Lh[Ai],Kc[Ai],tg);ub(Ij.x,Ij.y,-ff)}}}Kc=jd+Ed;for(Ne=0;Ne<Sc;Ne++)ff=Nc?Ea(de[Ne],Li[Ne],Kc):de[Ne],md?(Me.copy(Pd.normals[0]).multiplyScalar(ff.x),
kg.copy(Pd.binormals[0]).multiplyScalar(ff.y),pg.copy(qd[0]).add(Me).add(kg),ub(pg.x,pg.y,pg.z)):ub(ff.x,ff.y,0);for(Ne=1;Ne<=ld;Ne++)for(ff=0;ff<Sc;ff++)tg=Nc?Ea(de[ff],Li[ff],Kc):de[ff],md?(Me.copy(Pd.normals[Ne]).multiplyScalar(tg.x),kg.copy(Pd.binormals[Ne]).multiplyScalar(tg.y),pg.copy(qd[Ne]).add(Me).add(kg),ub(pg.x,pg.y,pg.z)):ub(tg.x,tg.y,cd/ld*Ne);for(Pd=Ad-1;0<=Pd;Pd--){Me=Pd/Ad;kg=Oc*Math.cos(Me*Math.PI/2);Me=jd*Math.sin(Me*Math.PI/2)+Ed;pg=0;for(de=nc.length;pg<de;pg++)Li=Ea(nc[pg],qa[pg],
Me),ub(Li.x,Li.y,cd+kg);pg=0;for(de=Hh.length;pg<de;pg++)for(Li=Hh[pg],Kc=Lc[pg],Ne=0,ff=Li.length;Ne<ff;Ne++)tg=Ea(Li[Ne],Kc[Ne],Me),md?ub(tg.x,tg.y+qd[ld-1].y,qd[ld-1].x+kg):ub(tg.x,tg.y,cd+kg)}(function(){var lh=O.length/3;if(Nc){for(var ee=0*Sc,mh=0;mh<Td;mh++){var fi=$k[mh];nb(fi[2]+ee,fi[1]+ee,fi[0]+ee)}ee=Sc*(ld+2*Ad);for(mh=0;mh<Td;mh++)fi=$k[mh],nb(fi[0]+ee,fi[1]+ee,fi[2]+ee)}else{for(ee=0;ee<Td;ee++)mh=$k[ee],nb(mh[2],mh[1],mh[0]);for(ee=0;ee<Td;ee++)mh=$k[ee],nb(mh[0]+Sc*ld,mh[1]+Sc*ld,
mh[2]+Sc*ld)}K.addGroup(lh,O.length/3-lh,0)})();(function(){var lh=O.length/3,ee=0;Ua(nc,ee);ee+=nc.length;for(var mh=0,fi=Hh.length;mh<fi;mh++){var nh=Hh[mh];Ua(nh,ee);ee+=nh.length}K.addGroup(lh,O.length/3-lh,1)})()}var G=z.call(this||q)||this||q;G.type="ExtrudeGeometry";G.parameters={shapes:t,options:u};t=Array.isArray(t)?t:[t];for(var K=x(G),O=[],U=[],V=0,ca=t.length;V<ca;V++)B(t[V]);G.setAttribute("position",new hb(O,3));G.setAttribute("uv",new hb(U,2));G.computeVertexNormals();return G}r(D,
z);D.prototype.toJSON=function(){var t=pa.prototype.toJSON.call(this||q),u=(this||q).parameters.shapes,B=(this||q).parameters.options;t.shapes=[];if(Array.isArray(u))for(var G=0,K=u.length;G<K;G++)t.shapes.push(u[G].uuid);else t.shapes.push(u.uuid);void 0!==B.extrudePath&&(t.options.extrudePath=B.extrudePath.toJSON());return t};return D}(pa),Mya={generateTopUV:function(z,D,t,u,B){z=D[3*u];u=D[3*u+1];var G=D[3*B];B=D[3*B+1];return[new We(D[3*t],D[3*t+1]),new We(z,u),new We(G,B)]},generateSideWallUV:function(z,
D,t,u,B,G){z=D[3*t];var K=D[3*t+1];t=D[3*t+2];var O=D[3*u],U=D[3*u+1];u=D[3*u+2];var V=D[3*B],ca=D[3*B+1];B=D[3*B+2];var qa=D[3*G],Ea=D[3*G+1];D=D[3*G+2];return.01>Math.abs(K-U)?[new We(z,1-t),new We(O,1-u),new We(V,1-B),new We(qa,1-D)]:[new We(K,1-t),new We(U,1-u),new We(ca,1-B),new We(Ea,1-D)]}},MR=function(z){function D(t,u){void 0===t&&(t=1);void 0===u&&(u=0);var B=(1+Math.sqrt(5))/2;B=z.call(this||q,[-1,B,0,1,B,0,-1,-B,0,1,-B,0,0,-1,B,0,1,B,0,-1,-B,0,1,-B,B,0,-1,B,0,1,-B,0,-1,-B,0,1],[0,11,5,
0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],t,u)||this||q;B.type="IcosahedronGeometry";B.parameters={radius:t,detail:u};return B}r(D,z);return D}(kB),NR=function(z){function D(t,u,B,G){void 0===u&&(u=12);void 0===B&&(B=0);void 0===G&&(G=2*Math.PI);var K=z.call(this||q)||this||q;K.type="LatheGeometry";K.parameters={points:t,segments:u,phiStart:B,phiLength:G};u=Math.floor(u);G=Fh.clamp(G,0,2*Math.PI);for(var O=[],U=[],V=
[],ca=1/u,qa=new cc,Ea=new We,Ra=0;Ra<=u;Ra++){var Ua=B+Ra*ca*G,ub=Math.sin(Ua);Ua=Math.cos(Ua);for(var nb=0;nb<=t.length-1;nb++)qa.x=t[nb].x*ub,qa.y=t[nb].y,qa.z=t[nb].x*Ua,U.push(qa.x,qa.y,qa.z),Ea.x=Ra/u,Ea.y=nb/(t.length-1),V.push(Ea.x,Ea.y)}for(B=0;B<u;B++)for(ca=0;ca<t.length-1;ca++)qa=ca+B*t.length,Ea=qa+t.length,Ra=qa+t.length+1,ub=qa+1,O.push(qa,Ea,ub),O.push(Ea,Ra,ub);K.setIndex(O);K.setAttribute("position",new hb(U,3));K.setAttribute("uv",new hb(V,2));K.computeVertexNormals();if(G===2*
Math.PI)for(G=K.attributes.normal.array,O=new cc,U=new cc,V=new cc,u=u*t.length*3,ca=B=0;B<t.length;B++,ca+=3)O.x=G[ca+0],O.y=G[ca+1],O.z=G[ca+2],U.x=G[u+ca+0],U.y=G[u+ca+1],U.z=G[u+ca+2],V.addVectors(O,U).normalize(),G[ca+0]=G[u+ca+0]=V.x,G[ca+1]=G[u+ca+1]=V.y,G[ca+2]=G[u+ca+2]=V.z;return K}r(D,z);return D}(pa),xK=function(z){function D(t,u){void 0===t&&(t=1);void 0===u&&(u=0);var B=z.call(this||q,[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],t,u)||this||
q;B.type="OctahedronGeometry";B.parameters={radius:t,detail:u};return B}r(D,z);return D}(kB);BD.prototype=Object.create(pa.prototype);BD.prototype.constructor=BD;var OR=function(z){function D(t,u,B,G,K,O){void 0===t&&(t=.5);void 0===u&&(u=1);void 0===B&&(B=8);void 0===G&&(G=1);void 0===K&&(K=0);void 0===O&&(O=2*Math.PI);var U=z.call(this||q)||this||q;U.type="RingGeometry";U.parameters={innerRadius:t,outerRadius:u,thetaSegments:B,phiSegments:G,thetaStart:K,thetaLength:O};B=Math.max(3,B);G=Math.max(1,
G);var V=[],ca=[],qa=[],Ea=[],Ra=t;t=(u-t)/G;for(var Ua=new cc,ub=new We,nb=0;nb<=G;nb++){for(var ec=0;ec<=B;ec++){var gc=K+ec/B*O;Ua.x=Ra*Math.cos(gc);Ua.y=Ra*Math.sin(gc);ca.push(Ua.x,Ua.y,Ua.z);qa.push(0,0,1);ub.x=(Ua.x/u+1)/2;ub.y=(Ua.y/u+1)/2;Ea.push(ub.x,ub.y)}Ra+=t}for(u=0;u<G;u++)for(K=u*(B+1),O=0;O<B;O++)Ra=O+K,t=Ra+B+1,Ua=Ra+B+2,ub=Ra+1,V.push(Ra,t,ub),V.push(t,Ua,ub);U.setIndex(V);U.setAttribute("position",new hb(ca,3));U.setAttribute("normal",new hb(qa,3));U.setAttribute("uv",new hb(Ea,
2));return U}r(D,z);return D}(pa),yK=function(z){function D(t,u){function B(Ra){var Ua=O.length/3,ub=Ra.extractPoints(u);Ra=ub.shape;var nb=ub.holes;!1===Uy.isClockWise(Ra)&&(Ra=Ra.reverse());ub=0;for(var ec=nb.length;ub<ec;ub++){var gc=nb[ub];!0===Uy.isClockWise(gc)&&(nb[ub]=gc.reverse())}ub=Uy.triangulateShape(Ra,nb);ec=0;for(gc=nb.length;ec<gc;ec++)Ra=Ra.concat(nb[ec]);nb=0;for(ec=Ra.length;nb<ec;nb++)gc=Ra[nb],O.push(gc.x,gc.y,0),U.push(0,0,1),V.push(gc.x,gc.y);Ra=0;for(nb=ub.length;Ra<nb;Ra++)ec=
ub[Ra],K.push(ec[0]+Ua,ec[1]+Ua,ec[2]+Ua),qa+=3}void 0===u&&(u=12);var G=z.call(this||q)||this||q;G.type="ShapeGeometry";G.parameters={shapes:t,curveSegments:u};var K=[],O=[],U=[],V=[],ca=0,qa=0;if(!1===Array.isArray(t))B(t);else for(var Ea=0;Ea<t.length;Ea++)B(t[Ea]),G.addGroup(ca,qa,Ea),ca+=qa,qa=0;G.setIndex(K);G.setAttribute("position",new hb(O,3));G.setAttribute("normal",new hb(U,3));G.setAttribute("uv",new hb(V,2));return G}r(D,z);D.prototype.toJSON=function(){var t=pa.prototype.toJSON.call(this||
q),u=(this||q).parameters.shapes;t.shapes=[];if(Array.isArray(u))for(var B=0,G=u.length;B<G;B++)t.shapes.push(u[B].uuid);else t.shapes.push(u.uuid);return t};return D}(pa),zK=function(z){function D(t,u,B,G,K,O,U){void 0===t&&(t=1);void 0===u&&(u=8);void 0===B&&(B=6);void 0===G&&(G=0);void 0===K&&(K=2*Math.PI);void 0===O&&(O=0);void 0===U&&(U=Math.PI);var V=z.call(this||q)||this||q;V.type="SphereGeometry";V.parameters={radius:t,widthSegments:u,heightSegments:B,phiStart:G,phiLength:K,thetaStart:O,thetaLength:U};
u=Math.max(3,Math.floor(u));B=Math.max(2,Math.floor(B));for(var ca=Math.min(O+U,Math.PI),qa=0,Ea=[],Ra=new cc,Ua=new cc,ub=[],nb=[],ec=[],gc=[],Ac=0;Ac<=B;Ac++){var Lc=[],ld=Ac/B,cd=0;0==Ac&&0==O?cd=.5/u:Ac==B&&ca==Math.PI&&(cd=-.5/u);for(var Nc=0;Nc<=u;Nc++){var Oc=Nc/u;Ra.x=-t*Math.cos(G+Oc*K)*Math.sin(O+ld*U);Ra.y=t*Math.cos(O+ld*U);Ra.z=t*Math.sin(G+Oc*K)*Math.sin(O+ld*U);nb.push(Ra.x,Ra.y,Ra.z);Ua.copy(Ra).normalize();ec.push(Ua.x,Ua.y,Ua.z);gc.push(Oc+cd,1-ld);Lc.push(qa++)}Ea.push(Lc)}for(t=
0;t<B;t++)for(G=0;G<u;G++)K=Ea[t][G+1],U=Ea[t][G],qa=Ea[t+1][G],Ra=Ea[t+1][G+1],(0!==t||0<O)&&ub.push(K,U,Ra),(t!==B-1||ca<Math.PI)&&ub.push(U,qa,Ra);V.setIndex(ub);V.setAttribute("position",new hb(nb,3));V.setAttribute("normal",new hb(ec,3));V.setAttribute("uv",new hb(gc,2));return V}r(D,z);return D}(pa),PR=function(z){function D(t,u){void 0===t&&(t=1);void 0===u&&(u=0);var B=z.call(this||q,[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],t,u)||this||q;B.type="TetrahedronGeometry";B.parameters=
{radius:t,detail:u};return B}r(D,z);return D}(kB),QR=function(z){function D(t,u){void 0===u&&(u={});var B=u.font;if(!B||!B.isFont)return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),new pa;t=B.generateShapes(t,u.size);u.depth=void 0!==u.height?u.height:50;void 0===u.bevelThickness&&(u.bevelThickness=10);void 0===u.bevelSize&&(u.bevelSize=8);void 0===u.bevelEnabled&&(u.bevelEnabled=!1);u=z.call(this||q,t,u)||this||q;u.type="TextGeometry";return u}r(D,z);return D}(Vy),
RR=function(z){function D(t,u,B,G,K){void 0===t&&(t=1);void 0===u&&(u=.4);void 0===B&&(B=8);void 0===G&&(G=6);void 0===K&&(K=2*Math.PI);var O=z.call(this||q)||this||q;O.type="TorusGeometry";O.parameters={radius:t,tube:u,radialSegments:B,tubularSegments:G,arc:K};B=Math.floor(B);G=Math.floor(G);for(var U=[],V=[],ca=[],qa=[],Ea=new cc,Ra=new cc,Ua=new cc,ub=0;ub<=B;ub++)for(var nb=0;nb<=G;nb++){var ec=nb/G*K,gc=ub/B*Math.PI*2;Ra.x=(t+u*Math.cos(gc))*Math.cos(ec);Ra.y=(t+u*Math.cos(gc))*Math.sin(ec);
Ra.z=u*Math.sin(gc);V.push(Ra.x,Ra.y,Ra.z);Ea.x=t*Math.cos(ec);Ea.y=t*Math.sin(ec);Ua.subVectors(Ra,Ea).normalize();ca.push(Ua.x,Ua.y,Ua.z);qa.push(nb/G);qa.push(ub/B)}for(t=1;t<=B;t++)for(u=1;u<=G;u++)K=(G+1)*(t-1)+u-1,Ea=(G+1)*(t-1)+u,Ra=(G+1)*t+u,U.push((G+1)*t+u-1,K,Ra),U.push(K,Ea,Ra);O.setIndex(U);O.setAttribute("position",new hb(V,3));O.setAttribute("normal",new hb(ca,3));O.setAttribute("uv",new hb(qa,2));return O}r(D,z);return D}(pa),SR=function(z){function D(t,u,B,G,K,O){function U(jd,Ed,
Ad,de,rf){var md=Math.sin(jd);Ed=Ad/Ed*jd;Ad=Math.cos(Ed);rf.x=de*(2+Ad)*.5*Math.cos(jd);rf.y=de*(2+Ad)*md*.5;rf.z=de*Math.sin(Ed)*.5}void 0===t&&(t=1);void 0===u&&(u=.4);void 0===B&&(B=64);void 0===G&&(G=8);void 0===K&&(K=2);void 0===O&&(O=3);var V=z.call(this||q)||this||q;V.type="TorusKnotGeometry";V.parameters={radius:t,tube:u,tubularSegments:B,radialSegments:G,p:K,q:O};B=Math.floor(B);G=Math.floor(G);for(var ca=[],qa=[],Ea=[],Ra=[],Ua=new cc,ub=new cc,nb=new cc,ec=new cc,gc=new cc,Ac=new cc,Lc=
new cc,ld=0;ld<=B;++ld){var cd=ld/B*K*Math.PI*2;U(cd,K,O,t,nb);U(cd+.01,K,O,t,ec);Ac.subVectors(ec,nb);Lc.addVectors(ec,nb);gc.crossVectors(Ac,Lc);Lc.crossVectors(gc,Ac);gc.normalize();Lc.normalize();for(cd=0;cd<=G;++cd){var Nc=cd/G*Math.PI*2,Oc=-u*Math.cos(Nc);Nc=u*Math.sin(Nc);Ua.x=nb.x+(Oc*Lc.x+Nc*gc.x);Ua.y=nb.y+(Oc*Lc.y+Nc*gc.y);Ua.z=nb.z+(Oc*Lc.z+Nc*gc.z);qa.push(Ua.x,Ua.y,Ua.z);ub.subVectors(Ua,nb).normalize();Ea.push(ub.x,ub.y,ub.z);Ra.push(ld/B);Ra.push(cd/G)}}for(t=1;t<=B;t++)for(u=1;u<=
G;u++)K=(G+1)*t+(u-1),O=(G+1)*t+u,Ua=(G+1)*(t-1)+u,ca.push((G+1)*(t-1)+(u-1),K,Ua),ca.push(K,O,Ua);V.setIndex(ca);V.setAttribute("position",new hb(qa,3));V.setAttribute("normal",new hb(Ea,3));V.setAttribute("uv",new hb(Ra,2));return V}r(D,z);return D}(pa),TR=function(z){function D(t,u,B,G,K){function O(gc){Ra=t.getPointAt(gc/u,Ra);var Ac=V.normals[gc];gc=V.binormals[gc];for(var Lc=0;Lc<=G;Lc++){var ld=Lc/G*Math.PI*2,cd=Math.sin(ld);ld=-Math.cos(ld);qa.x=ld*Ac.x+cd*gc.x;qa.y=ld*Ac.y+cd*gc.y;qa.z=ld*
Ac.z+cd*gc.z;qa.normalize();ub.push(qa.x,qa.y,qa.z);ca.x=Ra.x+B*qa.x;ca.y=Ra.y+B*qa.y;ca.z=Ra.z+B*qa.z;Ua.push(ca.x,ca.y,ca.z)}}void 0===u&&(u=64);void 0===B&&(B=1);void 0===G&&(G=8);void 0===K&&(K=!1);var U=z.call(this||q)||this||q;U.type="TubeGeometry";U.parameters={path:t,tubularSegments:u,radius:B,radialSegments:G,closed:K};var V=t.computeFrenetFrames(u,K);U.tangents=V.tangents;U.normals=V.normals;U.binormals=V.binormals;var ca=new cc,qa=new cc,Ea=new We,Ra=new cc,Ua=[],ub=[],nb=[],ec=[];(function(){for(var gc=
0;gc<u;gc++)O(gc);O(!1===K?u:0);for(gc=0;gc<=u;gc++)for(var Ac=0;Ac<=G;Ac++)Ea.x=gc/u,Ea.y=Ac/G,nb.push(Ea.x,Ea.y);for(gc=1;gc<=u;gc++)for(Ac=1;Ac<=G;Ac++){var Lc=(G+1)*gc+(Ac-1),ld=(G+1)*gc+Ac,cd=(G+1)*(gc-1)+Ac;ec.push((G+1)*(gc-1)+(Ac-1),Lc,cd);ec.push(Lc,ld,cd)}})();U.setIndex(ec);U.setAttribute("position",new hb(Ua,3));U.setAttribute("normal",new hb(ub,3));U.setAttribute("uv",new hb(nb,2));return U}r(D,z);D.prototype.toJSON=function(){var t=pa.prototype.toJSON.call(this||q);t.path=(this||q).parameters.path.toJSON();
return t};return D}(pa),K_=function(z){function D(t){var u=z.call(this||q)||this||q;u.type="WireframeGeometry";if(!0===t.isGeometry)return console.error("THREE.WireframeGeometry no longer supports THREE.Geometry. Use THREE.BufferGeometry instead."),x(u);var B=[],G=[0,0],K={},O=new cc;if(null!==t.index){var U=t.attributes.position,V=t.index;t=t.groups;0===t.length&&(t=[{start:0,count:V.count,materialIndex:0}]);for(var ca=0,qa=t.length;ca<qa;++ca){var Ea=t[ca],Ra=Ea.start,Ua=Ra;for(Ea=Ra+Ea.count;Ua<
Ea;Ua+=3)for(Ra=0;3>Ra;Ra++){var ub=V.getX(Ua+Ra),nb=V.getX(Ua+(Ra+1)%3);G[0]=Math.min(ub,nb);G[1]=Math.max(ub,nb);ub=G[0]+","+G[1];void 0===K[ub]&&(K[ub]={index1:G[0],index2:G[1]})}}for(var ec in K)G=K[ec],O.fromBufferAttribute(U,G.index1),B.push(O.x,O.y,O.z),O.fromBufferAttribute(U,G.index2),B.push(O.x,O.y,O.z)}else for(K=t.attributes.position,U=0,ec=K.count/3;U<ec;U++)for(G=0;3>G;G++)O.fromBufferAttribute(K,3*U+G),B.push(O.x,O.y,O.z),O.fromBufferAttribute(K,3*U+(G+1)%3),B.push(O.x,O.y,O.z);u.setAttribute("position",
new hb(B,3));return u}r(D,z);return D}(pa),bq=Object.freeze({__proto__:null,BoxGeometry:yD,BoxBufferGeometry:yD,CircleGeometry:HR,CircleBufferGeometry:HR,ConeGeometry:IR,ConeBufferGeometry:IR,CylinderGeometry:EG,CylinderBufferGeometry:EG,DodecahedronGeometry:JR,DodecahedronBufferGeometry:JR,EdgesGeometry:J_,ExtrudeGeometry:Vy,ExtrudeBufferGeometry:Vy,IcosahedronGeometry:MR,IcosahedronBufferGeometry:MR,LatheGeometry:NR,LatheBufferGeometry:NR,OctahedronGeometry:xK,OctahedronBufferGeometry:xK,ParametricGeometry:BD,
ParametricBufferGeometry:BD,PlaneGeometry:UJ,PlaneBufferGeometry:UJ,PolyhedronGeometry:kB,PolyhedronBufferGeometry:kB,RingGeometry:OR,RingBufferGeometry:OR,ShapeGeometry:yK,ShapeBufferGeometry:yK,SphereGeometry:zK,SphereBufferGeometry:zK,TetrahedronGeometry:PR,TetrahedronBufferGeometry:PR,TextGeometry:QR,TextBufferGeometry:QR,TorusGeometry:RR,TorusBufferGeometry:RR,TorusKnotGeometry:SR,TorusKnotBufferGeometry:SR,TubeGeometry:TR,TubeBufferGeometry:TR,WireframeGeometry:K_}),L_=function(z){function D(t){var u=
z.call(this||q)||this||q;u.type="ShadowMaterial";u.color=new jg(0);u.transparent=!0;u.setValues(t);return u}r(D,z);D.prototype.copy=function(t){z.prototype.copy.call(this||q,t);(this||q).color.copy(t.color);return this||q};return D}(Y);L_.prototype.isShadowMaterial=!0;var oG=function(z){function D(t){t=z.call(this||q,t)||this||q;t.type="RawShaderMaterial";return t}r(D,z);return D}(Zb);oG.prototype.isRawShaderMaterial=!0;ax.prototype=Object.create(Y.prototype);ax.prototype.constructor=ax;ax.prototype.isMeshStandardMaterial=
!0;ax.prototype.copy=function(z){Y.prototype.copy.call(this||q,z);(this||q).defines={STANDARD:""};(this||q).color.copy(z.color);(this||q).roughness=z.roughness;(this||q).metalness=z.metalness;(this||q).map=z.map;(this||q).lightMap=z.lightMap;(this||q).lightMapIntensity=z.lightMapIntensity;(this||q).aoMap=z.aoMap;(this||q).aoMapIntensity=z.aoMapIntensity;(this||q).emissive.copy(z.emissive);(this||q).emissiveMap=z.emissiveMap;(this||q).emissiveIntensity=z.emissiveIntensity;(this||q).bumpMap=z.bumpMap;
(this||q).bumpScale=z.bumpScale;(this||q).normalMap=z.normalMap;(this||q).normalMapType=z.normalMapType;(this||q).normalScale.copy(z.normalScale);(this||q).displacementMap=z.displacementMap;(this||q).displacementScale=z.displacementScale;(this||q).displacementBias=z.displacementBias;(this||q).roughnessMap=z.roughnessMap;(this||q).metalnessMap=z.metalnessMap;(this||q).alphaMap=z.alphaMap;(this||q).envMap=z.envMap;(this||q).envMapIntensity=z.envMapIntensity;(this||q).refractionRatio=z.refractionRatio;
(this||q).wireframe=z.wireframe;(this||q).wireframeLinewidth=z.wireframeLinewidth;(this||q).wireframeLinecap=z.wireframeLinecap;(this||q).wireframeLinejoin=z.wireframeLinejoin;(this||q).skinning=z.skinning;(this||q).morphTargets=z.morphTargets;(this||q).morphNormals=z.morphNormals;(this||q).flatShading=z.flatShading;(this||q).vertexTangents=z.vertexTangents;return this||q};dB.prototype=Object.create(ax.prototype);dB.prototype.constructor=dB;dB.prototype.isMeshPhysicalMaterial=!0;dB.prototype.copy=
function(z){ax.prototype.copy.call(this||q,z);(this||q).defines={STANDARD:"",PHYSICAL:""};(this||q).clearcoat=z.clearcoat;(this||q).clearcoatMap=z.clearcoatMap;(this||q).clearcoatRoughness=z.clearcoatRoughness;(this||q).clearcoatRoughnessMap=z.clearcoatRoughnessMap;(this||q).clearcoatNormalMap=z.clearcoatNormalMap;(this||q).clearcoatNormalScale.copy(z.clearcoatNormalScale);(this||q).reflectivity=z.reflectivity;(this||q).sheen=z.sheen?((this||q).sheen||new jg).copy(z.sheen):null;(this||q).transmission=
z.transmission;(this||q).transmissionMap=z.transmissionMap;return this||q};var UR=function(z){function D(t){var u=z.call(this||q)||this||q;u.type="MeshPhongMaterial";u.color=new jg(16777215);u.specular=new jg(1118481);u.shininess=30;u.map=null;u.lightMap=null;u.lightMapIntensity=1;u.aoMap=null;u.aoMapIntensity=1;u.emissive=new jg(0);u.emissiveIntensity=1;u.emissiveMap=null;u.bumpMap=null;u.bumpScale=1;u.normalMap=null;u.normalMapType=0;u.normalScale=new We(1,1);u.displacementMap=null;u.displacementScale=
1;u.displacementBias=0;u.specularMap=null;u.alphaMap=null;u.envMap=null;u.combine=0;u.reflectivity=1;u.refractionRatio=.98;u.wireframe=!1;u.wireframeLinewidth=1;u.wireframeLinecap="round";u.wireframeLinejoin="round";u.skinning=!1;u.morphTargets=!1;u.morphNormals=!1;u.flatShading=!1;u.setValues(t);return u}r(D,z);D.prototype.copy=function(t){z.prototype.copy.call(this||q,t);(this||q).color.copy(t.color);(this||q).specular.copy(t.specular);(this||q).shininess=t.shininess;(this||q).map=t.map;(this||
q).lightMap=t.lightMap;(this||q).lightMapIntensity=t.lightMapIntensity;(this||q).aoMap=t.aoMap;(this||q).aoMapIntensity=t.aoMapIntensity;(this||q).emissive.copy(t.emissive);(this||q).emissiveMap=t.emissiveMap;(this||q).emissiveIntensity=t.emissiveIntensity;(this||q).bumpMap=t.bumpMap;(this||q).bumpScale=t.bumpScale;(this||q).normalMap=t.normalMap;(this||q).normalMapType=t.normalMapType;(this||q).normalScale.copy(t.normalScale);(this||q).displacementMap=t.displacementMap;(this||q).displacementScale=
t.displacementScale;(this||q).displacementBias=t.displacementBias;(this||q).specularMap=t.specularMap;(this||q).alphaMap=t.alphaMap;(this||q).envMap=t.envMap;(this||q).combine=t.combine;(this||q).reflectivity=t.reflectivity;(this||q).refractionRatio=t.refractionRatio;(this||q).wireframe=t.wireframe;(this||q).wireframeLinewidth=t.wireframeLinewidth;(this||q).wireframeLinecap=t.wireframeLinecap;(this||q).wireframeLinejoin=t.wireframeLinejoin;(this||q).skinning=t.skinning;(this||q).morphTargets=t.morphTargets;
(this||q).morphNormals=t.morphNormals;(this||q).flatShading=t.flatShading;return this||q};return D}(Y);UR.prototype.isMeshPhongMaterial=!0;var M_=function(z){function D(t){var u=z.call(this||q)||this||q;u.defines={TOON:""};u.type="MeshToonMaterial";u.color=new jg(16777215);u.map=null;u.gradientMap=null;u.lightMap=null;u.lightMapIntensity=1;u.aoMap=null;u.aoMapIntensity=1;u.emissive=new jg(0);u.emissiveIntensity=1;u.emissiveMap=null;u.bumpMap=null;u.bumpScale=1;u.normalMap=null;u.normalMapType=0;u.normalScale=
new We(1,1);u.displacementMap=null;u.displacementScale=1;u.displacementBias=0;u.alphaMap=null;u.wireframe=!1;u.wireframeLinewidth=1;u.wireframeLinecap="round";u.wireframeLinejoin="round";u.skinning=!1;u.morphTargets=!1;u.morphNormals=!1;u.setValues(t);return u}r(D,z);D.prototype.copy=function(t){z.prototype.copy.call(this||q,t);(this||q).color.copy(t.color);(this||q).map=t.map;(this||q).gradientMap=t.gradientMap;(this||q).lightMap=t.lightMap;(this||q).lightMapIntensity=t.lightMapIntensity;(this||
q).aoMap=t.aoMap;(this||q).aoMapIntensity=t.aoMapIntensity;(this||q).emissive.copy(t.emissive);(this||q).emissiveMap=t.emissiveMap;(this||q).emissiveIntensity=t.emissiveIntensity;(this||q).bumpMap=t.bumpMap;(this||q).bumpScale=t.bumpScale;(this||q).normalMap=t.normalMap;(this||q).normalMapType=t.normalMapType;(this||q).normalScale.copy(t.normalScale);(this||q).displacementMap=t.displacementMap;(this||q).displacementScale=t.displacementScale;(this||q).displacementBias=t.displacementBias;(this||q).alphaMap=
t.alphaMap;(this||q).wireframe=t.wireframe;(this||q).wireframeLinewidth=t.wireframeLinewidth;(this||q).wireframeLinecap=t.wireframeLinecap;(this||q).wireframeLinejoin=t.wireframeLinejoin;(this||q).skinning=t.skinning;(this||q).morphTargets=t.morphTargets;(this||q).morphNormals=t.morphNormals;return this||q};return D}(Y);M_.prototype.isMeshToonMaterial=!0;var N_=function(z){function D(t){var u=z.call(this||q)||this||q;u.type="MeshNormalMaterial";u.bumpMap=null;u.bumpScale=1;u.normalMap=null;u.normalMapType=
0;u.normalScale=new We(1,1);u.displacementMap=null;u.displacementScale=1;u.displacementBias=0;u.wireframe=!1;u.wireframeLinewidth=1;u.fog=!1;u.skinning=!1;u.morphTargets=!1;u.morphNormals=!1;u.flatShading=!1;u.setValues(t);return u}r(D,z);D.prototype.copy=function(t){z.prototype.copy.call(this||q,t);(this||q).bumpMap=t.bumpMap;(this||q).bumpScale=t.bumpScale;(this||q).normalMap=t.normalMap;(this||q).normalMapType=t.normalMapType;(this||q).normalScale.copy(t.normalScale);(this||q).displacementMap=
t.displacementMap;(this||q).displacementScale=t.displacementScale;(this||q).displacementBias=t.displacementBias;(this||q).wireframe=t.wireframe;(this||q).wireframeLinewidth=t.wireframeLinewidth;(this||q).skinning=t.skinning;(this||q).morphTargets=t.morphTargets;(this||q).morphNormals=t.morphNormals;(this||q).flatShading=t.flatShading;return this||q};return D}(Y);N_.prototype.isMeshNormalMaterial=!0;var O_=function(z){function D(t){var u=z.call(this||q)||this||q;u.type="MeshLambertMaterial";u.color=
new jg(16777215);u.map=null;u.lightMap=null;u.lightMapIntensity=1;u.aoMap=null;u.aoMapIntensity=1;u.emissive=new jg(0);u.emissiveIntensity=1;u.emissiveMap=null;u.specularMap=null;u.alphaMap=null;u.envMap=null;u.combine=0;u.reflectivity=1;u.refractionRatio=.98;u.wireframe=!1;u.wireframeLinewidth=1;u.wireframeLinecap="round";u.wireframeLinejoin="round";u.skinning=!1;u.morphTargets=!1;u.morphNormals=!1;u.setValues(t);return u}r(D,z);D.prototype.copy=function(t){z.prototype.copy.call(this||q,t);(this||
q).color.copy(t.color);(this||q).map=t.map;(this||q).lightMap=t.lightMap;(this||q).lightMapIntensity=t.lightMapIntensity;(this||q).aoMap=t.aoMap;(this||q).aoMapIntensity=t.aoMapIntensity;(this||q).emissive.copy(t.emissive);(this||q).emissiveMap=t.emissiveMap;(this||q).emissiveIntensity=t.emissiveIntensity;(this||q).specularMap=t.specularMap;(this||q).alphaMap=t.alphaMap;(this||q).envMap=t.envMap;(this||q).combine=t.combine;(this||q).reflectivity=t.reflectivity;(this||q).refractionRatio=t.refractionRatio;
(this||q).wireframe=t.wireframe;(this||q).wireframeLinewidth=t.wireframeLinewidth;(this||q).wireframeLinecap=t.wireframeLinecap;(this||q).wireframeLinejoin=t.wireframeLinejoin;(this||q).skinning=t.skinning;(this||q).morphTargets=t.morphTargets;(this||q).morphNormals=t.morphNormals;return this||q};return D}(Y);O_.prototype.isMeshLambertMaterial=!0;var P_=function(z){function D(t){var u=z.call(this||q)||this||q;u.defines={MATCAP:""};u.type="MeshMatcapMaterial";u.color=new jg(16777215);u.matcap=null;
u.map=null;u.bumpMap=null;u.bumpScale=1;u.normalMap=null;u.normalMapType=0;u.normalScale=new We(1,1);u.displacementMap=null;u.displacementScale=1;u.displacementBias=0;u.alphaMap=null;u.skinning=!1;u.morphTargets=!1;u.morphNormals=!1;u.flatShading=!1;u.setValues(t);return u}r(D,z);D.prototype.copy=function(t){z.prototype.copy.call(this||q,t);(this||q).defines={MATCAP:""};(this||q).color.copy(t.color);(this||q).matcap=t.matcap;(this||q).map=t.map;(this||q).bumpMap=t.bumpMap;(this||q).bumpScale=t.bumpScale;
(this||q).normalMap=t.normalMap;(this||q).normalMapType=t.normalMapType;(this||q).normalScale.copy(t.normalScale);(this||q).displacementMap=t.displacementMap;(this||q).displacementScale=t.displacementScale;(this||q).displacementBias=t.displacementBias;(this||q).alphaMap=t.alphaMap;(this||q).skinning=t.skinning;(this||q).morphTargets=t.morphTargets;(this||q).morphNormals=t.morphNormals;(this||q).flatShading=t.flatShading;return this||q};return D}(Y);P_.prototype.isMeshMatcapMaterial=!0;var Q_=function(z){function D(t){var u=
z.call(this||q)||this||q;u.type="LineDashedMaterial";u.scale=1;u.dashSize=3;u.gapSize=1;u.setValues(t);return u}r(D,z);D.prototype.copy=function(t){z.prototype.copy.call(this||q,t);(this||q).scale=t.scale;(this||q).dashSize=t.dashSize;(this||q).gapSize=t.gapSize;return this||q};return D}(mo);Q_.prototype.isLineDashedMaterial=!0;var Nya=Object.freeze({__proto__:null,ShadowMaterial:L_,SpriteMaterial:AR,RawShaderMaterial:oG,ShaderMaterial:Zb,PointsMaterial:AD,MeshPhysicalMaterial:dB,MeshStandardMaterial:ax,
MeshPhongMaterial:UR,MeshToonMaterial:M_,MeshNormalMaterial:N_,MeshLambertMaterial:O_,MeshDepthMaterial:XQ,MeshDistanceMaterial:YQ,MeshBasicMaterial:Ny,MeshMatcapMaterial:P_,LineDashedMaterial:Q_,LineBasicMaterial:mo,Material:Y}),zl={arraySlice:function(z,D,t){return zl.isTypedArray(z)?new z.constructor(z.subarray(D,void 0!==t?t:z.length)):z.slice(D,t)},convertArray:function(z,D,t){return!z||!t&&z.constructor===D?z:"number"===typeof D.BYTES_PER_ELEMENT?new D(z):Array.prototype.slice.call(z)},isTypedArray:function(z){return ArrayBuffer.isView(z)&&
!(z instanceof DataView)},getKeyframeOrder:function(z){for(var D=z.length,t=Array(D),u=0;u!==D;++u)t[u]=u;t.sort(function(B,G){return z[B]-z[G]});return t},sortedArray:function(z,D,t){for(var u=z.length,B=new z.constructor(u),G=0,K=0;K!==u;++G)for(var O=t[G]*D,U=0;U!==D;++U)B[K++]=z[O+U];return B},flattenJSON:function(z,D,t,u){for(var B=1,G=z[0];void 0!==G&&void 0===G[u];)G=z[B++];if(void 0!==G){var K=G[u];if(void 0!==K)if(Array.isArray(K)){do K=G[u],void 0!==K&&(D.push(G.time),t.push.apply(t,K)),
G=z[B++];while(void 0!==G)}else if(void 0!==K.toArray){do K=G[u],void 0!==K&&(D.push(G.time),K.toArray(t,t.length)),G=z[B++];while(void 0!==G)}else{do K=G[u],void 0!==K&&(D.push(G.time),t.push(K)),G=z[B++];while(void 0!==G)}}},subclip:function(z,D,t,u,B){void 0===B&&(B=30);z=z.clone();z.name=D;D=[];for(var G=0;G<z.tracks.length;++G){for(var K=z.tracks[G],O=K.getValueSize(),U=[],V=[],ca=0;ca<K.times.length;++ca){var qa=K.times[ca]*B;if(!(qa<t||qa>=u))for(U.push(K.times[ca]),qa=0;qa<O;++qa)V.push(K.values[ca*
O+qa])}0!==U.length&&(K.times=zl.convertArray(U,K.times.constructor),K.values=zl.convertArray(V,K.values.constructor),D.push(K))}z.tracks=D;t=Infinity;for(u=0;u<z.tracks.length;++u)t>z.tracks[u].times[0]&&(t=z.tracks[u].times[0]);for(u=0;u<z.tracks.length;++u)z.tracks[u].shift(-1*t);z.resetDuration();return z},makeClipAdditive:function(z,D,t,u){void 0===D&&(D=0);void 0===t&&(t=z);void 0===u&&(u=30);0>=u&&(u=30);var B=t.tracks.length,G=D/u;D=function(K){var O=t.tracks[K],U=O.ValueTypeName;if("bool"===
U||"string"===U)return"continue";K=z.tracks.find(function(ec){return ec.name===O.name&&ec.ValueTypeName===U});if(void 0===K)return"continue";var V=0,ca=O.getValueSize();O.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(V=ca/3);var qa=0,Ea=K.getValueSize();K.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(qa=Ea/3);var Ra=O.times.length-1,Ua=void 0;G<=O.times[0]?Ua=zl.arraySlice(O.values,V,ca-V):G>=O.times[Ra]?(Ua=Ra*ca+V,Ua=zl.arraySlice(O.values,Ua,Ua+ca-V)):(Ua=O.createInterpolant(),
Ra=V,V=ca-V,Ua.evaluate(G),Ua=zl.arraySlice(Ua.resultBuffer,Ra,V));"quaternion"===U&&(new lo).fromArray(Ua).normalize().conjugate().toArray(Ua);V=K.times.length;for(ca=0;ca<V;++ca)if(Ra=ca*Ea+qa,"quaternion"===U)lo.multiplyQuaternionsFlat(K.values,Ra,Ua,0,K.values,Ra);else for(var ub=Ea-2*qa,nb=0;nb<ub;++nb)K.values[Ra+nb]-=Ua[nb]};for(u=0;u<B;++u)D(u);z.blendMode=2501;return z}};Object.assign($r.prototype,{evaluate:function(z){var D=(this||q).parameterPositions,t=(this||q)._cachedIndex,u=D[t],B=
D[t-1];a:{b:{c:{d:if(!(z<u)){for(var G=t+2;;){if(void 0===u){if(z<B)break d;t=D.length;(this||q)._cachedIndex=t;return this.afterEnd_(t-1,z,B)}if(t===G)break;B=u;u=D[++t];if(z<u)break b}u=D.length;break c}if(z>=B)break a;else{G=D[1];z<G&&(t=2,B=G);for(G=t-2;;){if(void 0===B)return(this||q)._cachedIndex=0,this.beforeStart_(0,z,u);if(t===G)break;u=B;B=D[--t-1];if(z>=B)break b}u=t;t=0}}for(;t<u;)B=t+u>>>1,z<D[B]?u=B:t=B+1;u=D[t];B=D[t-1];if(void 0===B)return(this||q)._cachedIndex=0,this.beforeStart_(0,
z,u);if(void 0===u)return t=D.length,(this||q)._cachedIndex=t,this.afterEnd_(t-1,B,z)}(this||q)._cachedIndex=t;this.intervalChanged_(t,B,u)}return this.interpolate_(t,B,z,u)},settings:null,DefaultSettings_:{},getSettings_:function(){return(this||q).settings||(this||q).DefaultSettings_},copySampleValue_:function(z){var D=(this||q).resultBuffer,t=(this||q).sampleValues,u=(this||q).valueSize;z*=u;for(var B=0;B!==u;++B)D[B]=t[z+B];return D},interpolate_:function(){throw Error("call to abstract method");
},intervalChanged_:function(){}});Object.assign($r.prototype,{beforeStart_:$r.prototype.copySampleValue_,afterEnd_:$r.prototype.copySampleValue_});gR.prototype=Object.assign(Object.create($r.prototype),{constructor:gR,DefaultSettings_:{endingStart:2400,endingEnd:2400},intervalChanged_:function(z,D,t){var u=(this||q).parameterPositions,B=z-2,G=z+1,K=u[B],O=u[G];if(void 0===K)switch(this.getSettings_().endingStart){case 2401:B=z;K=2*D-t;break;case 2402:B=u.length-2;K=D+u[B]-u[B+1];break;default:B=z,
K=t}if(void 0===O)switch(this.getSettings_().endingEnd){case 2401:G=z;O=2*t-D;break;case 2402:G=1;O=t+u[1]-u[0];break;default:G=z-1,O=D}z=.5*(t-D);u=(this||q).valueSize;(this||q)._weightPrev=z/(D-K);(this||q)._weightNext=z/(O-t);(this||q)._offsetPrev=B*u;(this||q)._offsetNext=G*u},interpolate_:function(z,D,t,u){var B=(this||q).resultBuffer,G=(this||q).sampleValues,K=(this||q).valueSize;z*=K;var O=z-K,U=(this||q)._offsetPrev,V=(this||q)._offsetNext,ca=(this||q)._weightPrev,qa=(this||q)._weightNext,
Ea=(t-D)/(u-D);t=Ea*Ea;u=t*Ea;D=-ca*u+2*ca*t-ca*Ea;ca=(1+ca)*u+(-1.5-2*ca)*t+(-.5+ca)*Ea+1;Ea=(-1-qa)*u+(1.5+qa)*t+.5*Ea;qa=qa*u-qa*t;for(t=0;t!==K;++t)B[t]=D*G[U+t]+ca*G[O+t]+Ea*G[z+t]+qa*G[V+t];return B}});fK.prototype=Object.assign(Object.create($r.prototype),{constructor:fK,interpolate_:function(z,D,t,u){var B=(this||q).resultBuffer,G=(this||q).sampleValues,K=(this||q).valueSize;z*=K;var O=z-K;D=(t-D)/(u-D);t=1-D;for(u=0;u!==K;++u)B[u]=G[O+u]*t+G[z+u]*D;return B}});hR.prototype=Object.assign(Object.create($r.prototype),
{constructor:hR,interpolate_:function(z){return this.copySampleValue_(z-1)}});var nv=function(){function z(t,u,B,G){if(void 0===t)throw Error("THREE.KeyframeTrack: track name is undefined");if(void 0===u||0===u.length)throw Error("THREE.KeyframeTrack: no keyframes in track named "+t);(this||q).name=t;(this||q).times=zl.convertArray(u,(this||q).TimeBufferType);(this||q).values=zl.convertArray(B,(this||q).ValueBufferType);this.setInterpolation(G||(this||q).DefaultInterpolation)}z.toJSON=function(t){var u=
t.constructor;if(u.toJSON!==(this||q).toJSON)u=u.toJSON(t);else{u={name:t.name,times:zl.convertArray(t.times,Array),values:zl.convertArray(t.values,Array)};var B=t.getInterpolation();B!==t.DefaultInterpolation&&(u.interpolation=B)}u.type=t.ValueTypeName;return u};var D=z.prototype;D.InterpolantFactoryMethodDiscrete=function(t){return new hR((this||q).times,(this||q).values,this.getValueSize(),t)};D.InterpolantFactoryMethodLinear=function(t){return new fK((this||q).times,(this||q).values,this.getValueSize(),
t)};D.InterpolantFactoryMethodSmooth=function(t){return new gR((this||q).times,(this||q).values,this.getValueSize(),t)};D.setInterpolation=function(t){switch(t){case 2300:var u=(this||q).InterpolantFactoryMethodDiscrete;break;case 2301:u=(this||q).InterpolantFactoryMethodLinear;break;case 2302:u=(this||q).InterpolantFactoryMethodSmooth}if(void 0===u){u="unsupported interpolation for "+(this||q).ValueTypeName+" keyframe track named "+(this||q).name;if(void 0===(this||q).createInterpolant)if(t!==(this||
q).DefaultInterpolation)this.setInterpolation((this||q).DefaultInterpolation);else throw Error(u);console.warn("THREE.KeyframeTrack:",u);return this||q}(this||q).createInterpolant=u;return this||q};D.getInterpolation=function(){switch((this||q).createInterpolant){case (this||q).InterpolantFactoryMethodDiscrete:return 2300;case (this||q).InterpolantFactoryMethodLinear:return 2301;case (this||q).InterpolantFactoryMethodSmooth:return 2302}};D.getValueSize=function(){return(this||q).values.length/(this||
q).times.length};D.shift=function(t){if(0!==t)for(var u=(this||q).times,B=0,G=u.length;B!==G;++B)u[B]+=t;return this||q};D.scale=function(t){if(1!==t)for(var u=(this||q).times,B=0,G=u.length;B!==G;++B)u[B]*=t;return this||q};D.trim=function(t,u){for(var B=(this||q).times,G=B.length,K=0,O=G-1;K!==G&&B[K]<t;)++K;for(;-1!==O&&B[O]>u;)--O;++O;if(0!==K||O!==G)K>=O&&(O=Math.max(O,1),K=O-1),t=this.getValueSize(),(this||q).times=zl.arraySlice(B,K,O),(this||q).values=zl.arraySlice((this||q).values,K*t,O*t);
return this||q};D.validate=function(){var t=!0,u=this.getValueSize();0!==u-Math.floor(u)&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this||q),t=!1);var B=(this||q).times;u=(this||q).values;var G=B.length;0===G&&(console.error("THREE.KeyframeTrack: Track is empty.",this||q),t=!1);for(var K=null,O=0;O!==G;O++){var U=B[O];if("number"===typeof U&&isNaN(U)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this||q,O,U);t=!1;break}if(null!==K&&K>U){console.error("THREE.KeyframeTrack: Out of order keys.",
this||q,O,U,K);t=!1;break}K=U}if(void 0!==u&&zl.isTypedArray(u))for(B=0,G=u.length;B!==G;++B)if(K=u[B],isNaN(K)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this||q,B,K);t=!1;break}return t};D.optimize=function(){for(var t=zl.arraySlice((this||q).times),u=zl.arraySlice((this||q).values),B=this.getValueSize(),G=2302===this.getInterpolation(),K=t.length-1,O=1,U=1;U<K;++U){var V=!1,ca=t[U];if(ca!==t[U+1]&&(1!==U||ca!==t[0]))if(G)V=!0;else{ca=U*B;for(var qa=ca-B,Ea=ca+B,Ra=0;Ra!==
B;++Ra){var Ua=u[ca+Ra];if(Ua!==u[qa+Ra]||Ua!==u[Ea+Ra]){V=!0;break}}}if(V){if(U!==O)for(t[O]=t[U],V=U*B,ca=O*B,qa=0;qa!==B;++qa)u[ca+qa]=u[V+qa];++O}}if(0<K){t[O]=t[K];G=K*B;K=O*B;for(U=0;U!==B;++U)u[K+U]=u[G+U];++O}O!==t.length?((this||q).times=zl.arraySlice(t,0,O),(this||q).values=zl.arraySlice(u,0,O*B)):((this||q).times=t,(this||q).values=u);return this||q};D.clone=function(){var t=zl.arraySlice((this||q).times,0),u=zl.arraySlice((this||q).values,0);t=new (this||q).constructor((this||q).name,
t,u);t.createInterpolant=(this||q).createInterpolant;return t};return z}();nv.prototype.TimeBufferType=Float32Array;nv.prototype.ValueBufferType=Float32Array;nv.prototype.DefaultInterpolation=2301;var CD=function(z){function D(){return z.apply(this||q,arguments)||this||q}r(D,z);return D}(nv);CD.prototype.ValueTypeName="bool";CD.prototype.ValueBufferType=Array;CD.prototype.DefaultInterpolation=2300;CD.prototype.InterpolantFactoryMethodLinear=void 0;CD.prototype.InterpolantFactoryMethodSmooth=void 0;
var b_=function(z){function D(){return z.apply(this||q,arguments)||this||q}r(D,z);return D}(nv);b_.prototype.ValueTypeName="color";var gK=function(z){function D(){return z.apply(this||q,arguments)||this||q}r(D,z);return D}(nv);gK.prototype.ValueTypeName="number";iR.prototype=Object.assign(Object.create($r.prototype),{constructor:iR,interpolate_:function(z,D,t,u){var B=(this||q).resultBuffer,G=(this||q).sampleValues,K=(this||q).valueSize;D=(t-D)/(u-D);z*=K;for(t=z+K;z!==t;z+=4)lo.slerpFlat(B,0,G,z-
K,G,z,D);return B}});var nG=function(z){function D(){return z.apply(this||q,arguments)||this||q}r(D,z);D.prototype.InterpolantFactoryMethodLinear=function(t){return new iR((this||q).times,(this||q).values,this.getValueSize(),t)};return D}(nv);nG.prototype.ValueTypeName="quaternion";nG.prototype.DefaultInterpolation=2301;nG.prototype.InterpolantFactoryMethodSmooth=void 0;var DD=function(z){function D(){return z.apply(this||q,arguments)||this||q}r(D,z);return D}(nv);DD.prototype.ValueTypeName="string";
DD.prototype.ValueBufferType=Array;DD.prototype.DefaultInterpolation=2300;DD.prototype.InterpolantFactoryMethodLinear=void 0;DD.prototype.InterpolantFactoryMethodSmooth=void 0;var hK=function(z){function D(){return z.apply(this||q,arguments)||this||q}r(D,z);return D}(nv);hK.prototype.ValueTypeName="vector";var AK=function(){function z(t,u,B,G){void 0===u&&(u=-1);void 0===G&&(G=2500);(this||q).name=t;(this||q).tracks=B;(this||q).duration=u;(this||q).blendMode=G;(this||q).uuid=Fh.generateUUID();0>(this||
q).duration&&this.resetDuration()}z.parse=function(t){for(var u=[],B=t.tracks,G=1/(t.fps||1),K=0,O=B.length;K!==O;++K)u.push(zya(B[K]).scale(G));u=new (this||q)(t.name,t.duration,u,t.blendMode);u.uuid=t.uuid;return u};z.toJSON=function(t){var u=[],B=t.tracks;t={name:t.name,duration:t.duration,tracks:u,uuid:t.uuid,blendMode:t.blendMode};for(var G=0,K=B.length;G!==K;++G)u.push(nv.toJSON(B[G]));return t};z.CreateFromMorphTargetSequence=function(t,u,B,G){for(var K=u.length,O=[],U=0;U<K;U++){var V=[],
ca=[];V.push((U+K-1)%K,U,(U+1)%K);ca.push(0,1,0);var qa=zl.getKeyframeOrder(V);V=zl.sortedArray(V,1,qa);ca=zl.sortedArray(ca,1,qa);G||0!==V[0]||(V.push(K),ca.push(ca[0]));O.push((new gK(".morphTargetInfluences["+u[U].name+"]",V,ca)).scale(1/B))}return new (this||q)(t,-1,O)};z.findByName=function(t,u){var B=t;Array.isArray(t)||(B=t.geometry&&t.geometry.animations||t.animations);for(t=0;t<B.length;t++)if(B[t].name===u)return B[t];return null};z.CreateClipsFromMorphTargetSequences=function(t,u,B){for(var G=
{},K=/^([\w-]*?)([\d]+)$/,O=0,U=t.length;O<U;O++){var V=t[O],ca=V.name.match(K);if(ca&&1<ca.length){ca=ca[1];var qa=G[ca];qa||(G[ca]=qa=[]);qa.push(V)}}t=[];for(var Ea in G)t.push(this.CreateFromMorphTargetSequence(Ea,G[Ea],u,B));return t};z.parseAnimation=function(t,u){if(!t)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;var B=function(gc,Ac,Lc,ld,cd){if(0!==Lc.length){var Nc=[],Oc=[];zl.flattenJSON(Lc,Nc,Oc,ld);0!==Nc.length&&cd.push(new gc(Ac,Nc,Oc))}},G=[],
K=t.name||"default",O=t.fps||30,U=t.blendMode,V=t.length||-1;t=t.hierarchy||[];for(var ca=0;ca<t.length;ca++){var qa=t[ca].keys;if(qa&&0!==qa.length)if(qa[0].morphTargets){V={};var Ea=void 0;for(Ea=0;Ea<qa.length;Ea++)if(qa[Ea].morphTargets)for(var Ra=0;Ra<qa[Ea].morphTargets.length;Ra++)V[qa[Ea].morphTargets[Ra]]=-1;for(var Ua in V){Ra=[];for(var ub=[],nb=0;nb!==qa[Ea].morphTargets.length;++nb){var ec=qa[Ea];Ra.push(ec.time);ub.push(ec.morphTarget===Ua?1:0)}G.push(new gK(".morphTargetInfluence["+
Ua+"]",Ra,ub))}V=V.length*(O||1)}else Ea=".bones["+u[ca].name+"]",B(hK,Ea+".position",qa,"pos",G),B(nG,Ea+".quaternion",qa,"rot",G),B(hK,Ea+".scale",qa,"scl",G)}return 0===G.length?null:new (this||q)(K,V,G,U)};var D=z.prototype;D.resetDuration=function(){for(var t=0,u=0,B=(this||q).tracks.length;u!==B;++u){var G=(this||q).tracks[u];t=Math.max(t,G.times[G.times.length-1])}(this||q).duration=t;return this||q};D.trim=function(){for(var t=0;t<(this||q).tracks.length;t++)(this||q).tracks[t].trim(0,(this||
q).duration);return this||q};D.validate=function(){for(var t=!0,u=0;u<(this||q).tracks.length;u++)t=t&&(this||q).tracks[u].validate();return t};D.optimize=function(){for(var t=0;t<(this||q).tracks.length;t++)(this||q).tracks[t].optimize();return this||q};D.clone=function(){for(var t=[],u=0;u<(this||q).tracks.length;u++)t.push((this||q).tracks[u].clone());return new (this||q).constructor((this||q).name,(this||q).duration,t,(this||q).blendMode)};D.toJSON=function(){return(this||q).constructor.toJSON(this||
q)};return z}(),HD={enabled:!1,files:{},add:function(z,D){!1!==(this||q).enabled&&((this||q).files[z]=D)},get:function(z){if(!1!==(this||q).enabled)return(this||q).files[z]},remove:function(z){delete (this||q).files[z]},clear:function(){(this||q).files={}}},tea=new c_;Object.assign(jm.prototype,{load:function(){},loadAsync:function(z,D){var t=this||q;return new Promise(function(u,B){t.load(z,u,D,B)})},parse:function(){},setCrossOrigin:function(z){(this||q).crossOrigin=z;return this||q},setWithCredentials:function(z){(this||
q).withCredentials=z;return this||q},setPath:function(z){(this||q).path=z;return this||q},setResourcePath:function(z){(this||q).resourcePath=z;return this||q},setRequestHeader:function(z){(this||q).requestHeader=z;return this||q}});var ov={};tt.prototype=Object.assign(Object.create(jm.prototype),{constructor:tt,load:function(z,D,t,u){void 0===z&&(z="");void 0!==(this||q).path&&(z=(this||q).path+z);z=(this||q).manager.resolveURL(z);var B=this||q,G=HD.get(z);if(void 0!==G)return B.manager.itemStart(z),
setTimeout(function(){D&&D(G);B.manager.itemEnd(z)},0),G;if(void 0!==ov[z])ov[z].push({onLoad:D,onProgress:t,onError:u});else{var K=z.match(/^data:(.*?)(;base64)?,(.*)$/);if(K){t=K[1];var O=!!K[2];K=K[3];K=decodeURIComponent(K);O&&(K=atob(K));try{var U=((this||q).responseType||"").toLowerCase();switch(U){case "arraybuffer":case "blob":var V=new Uint8Array(K.length);for(O=0;O<K.length;O++)V[O]=K.charCodeAt(O);var ca="blob"===U?new Blob([V.buffer],{type:t}):V.buffer;break;case "document":ca=(new DOMParser).parseFromString(K,
t);break;case "json":ca=JSON.parse(K);break;default:ca=K}setTimeout(function(){D&&D(ca);B.manager.itemEnd(z)},0)}catch(Ea){setTimeout(function(){u&&u(Ea);B.manager.itemError(z);B.manager.itemEnd(z)},0)}}else{ov[z]=[];ov[z].push({onLoad:D,onProgress:t,onError:u});var qa=new XMLHttpRequest;qa.open("GET",z,!0);qa.addEventListener("load",function(Ea){var Ra=(this||q).response,Ua=ov[z];delete ov[z];if(200===(this||q).status||0===(this||q).status){0===(this||q).status&&console.warn("THREE.FileLoader: HTTP Status 0 received.");
HD.add(z,Ra);Ea=0;for(var ub=Ua.length;Ea<ub;Ea++){var nb=Ua[Ea];if(nb.onLoad)nb.onLoad(Ra)}}else{Ra=0;for(ub=Ua.length;Ra<ub;Ra++)if(nb=Ua[Ra],nb.onError)nb.onError(Ea);B.manager.itemError(z)}B.manager.itemEnd(z)},!1);qa.addEventListener("progress",function(Ea){for(var Ra=ov[z],Ua=0,ub=Ra.length;Ua<ub;Ua++){var nb=Ra[Ua];if(nb.onProgress)nb.onProgress(Ea)}},!1);qa.addEventListener("error",function(Ea){var Ra=ov[z];delete ov[z];for(var Ua=0,ub=Ra.length;Ua<ub;Ua++){var nb=Ra[Ua];if(nb.onError)nb.onError(Ea)}B.manager.itemError(z);
B.manager.itemEnd(z)},!1);qa.addEventListener("abort",function(Ea){var Ra=ov[z];delete ov[z];for(var Ua=0,ub=Ra.length;Ua<ub;Ua++){var nb=Ra[Ua];if(nb.onError)nb.onError(Ea)}B.manager.itemError(z);B.manager.itemEnd(z)},!1);void 0!==(this||q).responseType&&(qa.responseType=(this||q).responseType);void 0!==(this||q).withCredentials&&(qa.withCredentials=(this||q).withCredentials);qa.overrideMimeType&&qa.overrideMimeType(void 0!==(this||q).mimeType?(this||q).mimeType:"text/plain");for(O in(this||q).requestHeader)qa.setRequestHeader(O,
(this||q).requestHeader[O]);qa.send(null)}B.manager.itemStart(z);return qa}},setResponseType:function(z){(this||q).responseType=z;return this||q},setMimeType:function(z){(this||q).mimeType=z;return this||q}});var Oya=function(z){function D(u){return z.call(this||q,u)||this||q}r(D,z);var t=D.prototype;t.load=function(u,B,G,K){var O=this||q,U=new tt((this||q).manager);U.setPath((this||q).path);U.setRequestHeader((this||q).requestHeader);U.setWithCredentials((this||q).withCredentials);U.load(u,function(V){try{B(O.parse(JSON.parse(V)))}catch(ca){K?
K(ca):console.error(ca),O.manager.itemError(u)}},G,K)};t.parse=function(u){for(var B=[],G=0;G<u.length;G++){var K=AK.parse(u[G]);B.push(K)}return B};return D}(jm);d_.prototype=Object.assign(Object.create(jm.prototype),{constructor:d_,load:function(z,D,t,u){function B(Ea){U.load(z[Ea],function(Ra){Ra=G.parse(Ra,!0);K[Ea]={width:Ra.width,height:Ra.height,format:Ra.format,mipmaps:Ra.mipmaps};V+=1;6===V&&(1===Ra.mipmapCount&&(O.minFilter=1006),O.image=K,O.format=Ra.format,O.needsUpdate=!0,D&&D(O))},t,
u)}var G=this||q,K=[],O=new H_,U=new tt((this||q).manager);U.setPath((this||q).path);U.setResponseType("arraybuffer");U.setRequestHeader((this||q).requestHeader);U.setWithCredentials(G.withCredentials);var V=0;if(Array.isArray(z))for(var ca=0,qa=z.length;ca<qa;++ca)B(ca);else U.load(z,function(Ea){Ea=G.parse(Ea,!0);if(Ea.isCubemap){for(var Ra=Ea.mipmaps.length/Ea.mipmapCount,Ua=0;Ua<Ra;Ua++){K[Ua]={mipmaps:[]};for(var ub=0;ub<Ea.mipmapCount;ub++)K[Ua].mipmaps.push(Ea.mipmaps[Ua*Ea.mipmapCount+ub]),
K[Ua].format=Ea.format,K[Ua].width=Ea.width,K[Ua].height=Ea.height}O.image=K}else O.image.width=Ea.width,O.image.height=Ea.height,O.mipmaps=Ea.mipmaps;1===Ea.mipmapCount&&(O.minFilter=1006);O.format=Ea.format;O.needsUpdate=!0;D&&D(O)},t,u);return O}});var VR=function(z){function D(t){return z.call(this||q,t)||this||q}r(D,z);D.prototype.load=function(t,u,B,G){function K(){ca.removeEventListener("load",K,!1);ca.removeEventListener("error",O,!1);HD.add(t,this||q);u&&u(this||q);U.manager.itemEnd(t)}function O(qa){ca.removeEventListener("load",
K,!1);ca.removeEventListener("error",O,!1);G&&G(qa);U.manager.itemError(t);U.manager.itemEnd(t)}void 0!==(this||q).path&&(t=(this||q).path+t);t=(this||q).manager.resolveURL(t);var U=this||q,V=HD.get(t);if(void 0!==V)return U.manager.itemStart(t),setTimeout(function(){u&&u(V);U.manager.itemEnd(t)},0),V;var ca=document.createElementNS("http://www.w3.org/1999/xhtml","img");ca.addEventListener("load",K,!1);ca.addEventListener("error",O,!1);"data:"!==t.substr(0,5)&&void 0!==(this||q).crossOrigin&&(ca.crossOrigin=
(this||q).crossOrigin);U.manager.itemStart(t);ca.src=t;return ca};return D}(jm),jfa=function(z){function D(t){return z.call(this||q,t)||this||q}r(D,z);D.prototype.load=function(t,u,B,G){function K(ca){U.load(t[ca],function(qa){O.images[ca]=qa;V++;6===V&&(O.needsUpdate=!0,u&&u(O))},void 0,G)}var O=new zG,U=new VR((this||q).manager);U.setCrossOrigin((this||q).crossOrigin);U.setPath((this||q).path);var V=0;for(B=0;B<t.length;++B)K(B);return O};return D}(jm);jR.prototype=Object.assign(Object.create(jm.prototype),
{constructor:jR,load:function(z,D,t,u){var B=this||q,G=new jG,K=new tt((this||q).manager);K.setResponseType("arraybuffer");K.setRequestHeader((this||q).requestHeader);K.setPath((this||q).path);K.setWithCredentials(B.withCredentials);K.load(z,function(O){if(O=B.parse(O))void 0!==O.image?G.image=O.image:void 0!==O.data&&(G.image.width=O.width,G.image.height=O.height,G.image.data=O.data),G.wrapS=void 0!==O.wrapS?O.wrapS:1001,G.wrapT=void 0!==O.wrapT?O.wrapT:1001,G.magFilter=void 0!==O.magFilter?O.magFilter:
1006,G.minFilter=void 0!==O.minFilter?O.minFilter:1006,G.anisotropy=void 0!==O.anisotropy?O.anisotropy:1,void 0!==O.encoding&&(G.encoding=O.encoding),void 0!==O.flipY&&(G.flipY=O.flipY),void 0!==O.format&&(G.format=O.format),void 0!==O.type&&(G.type=O.type),void 0!==O.mipmaps&&(G.mipmaps=O.mipmaps,G.minFilter=1008),1===O.mipmapCount&&(G.minFilter=1006),G.needsUpdate=!0,D&&D(G,O)},t,u);return G}});kR.prototype=Object.assign(Object.create(jm.prototype),{constructor:kR,load:function(z,D,t,u){var B=new tp,
G=new VR((this||q).manager);G.setCrossOrigin((this||q).crossOrigin);G.setPath((this||q).path);G.load(z,function(K){B.image=K;K=0<z.search(/\.jpe?g($|\?)/i)||0===z.search(/^data:image\/jpeg/);B.format=K?1022:1023;B.needsUpdate=!0;void 0!==D&&D(B)},t,u);return B}});Object.assign($p.prototype,{getPoint:function(){console.warn("THREE.Curve: .getPoint() not implemented.");return null},getPointAt:function(z,D){z=this.getUtoTmapping(z);return this.getPoint(z,D)},getPoints:function(z){void 0===z&&(z=5);for(var D=
[],t=0;t<=z;t++)D.push(this.getPoint(t/z));return D},getSpacedPoints:function(z){void 0===z&&(z=5);for(var D=[],t=0;t<=z;t++)D.push(this.getPointAt(t/z));return D},getLength:function(){var z=this.getLengths();return z[z.length-1]},getLengths:function(z){void 0===z&&(z=(this||q).arcLengthDivisions);if((this||q).cacheArcLengths&&(this||q).cacheArcLengths.length===z+1&&!(this||q).needsUpdate)return(this||q).cacheArcLengths;(this||q).needsUpdate=!1;var D=[],t=this.getPoint(0),u=0;D.push(0);for(var B=
1;B<=z;B++){var G=this.getPoint(B/z);u+=G.distanceTo(t);D.push(u);t=G}return(this||q).cacheArcLengths=D},updateArcLengths:function(){(this||q).needsUpdate=!0;this.getLengths()},getUtoTmapping:function(z,D){var t=this.getLengths(),u=t.length;D=D?D:z*t[u-1];for(var B=0,G=u-1,K;B<=G;)if(z=Math.floor(B+(G-B)/2),K=t[z]-D,0>K)B=z+1;else if(0<K)G=z-1;else{G=z;break}z=G;if(t[z]===D)return z/(u-1);B=t[z];return(z+(D-B)/(t[z+1]-B))/(u-1)},getTangent:function(z,D){var t=z-1E-4;z+=1E-4;0>t&&(t=0);1<z&&(z=1);
t=this.getPoint(t);z=this.getPoint(z);D=D||(t.isVector2?new We:new cc);D.copy(z).sub(t).normalize();return D},getTangentAt:function(z,D){z=this.getUtoTmapping(z);return this.getTangent(z,D)},computeFrenetFrames:function(z,D){for(var t=new cc,u=[],B=[],G=[],K=new cc,O=new Ug,U=0;U<=z;U++)u[U]=this.getTangentAt(U/z,new cc),u[U].normalize();B[0]=new cc;G[0]=new cc;U=Number.MAX_VALUE;var V=Math.abs(u[0].x),ca=Math.abs(u[0].y),qa=Math.abs(u[0].z);V<=U&&(U=V,t.set(1,0,0));ca<=U&&(U=ca,t.set(0,1,0));qa<=
U&&t.set(0,0,1);K.crossVectors(u[0],t).normalize();B[0].crossVectors(u[0],K);G[0].crossVectors(u[0],B[0]);for(t=1;t<=z;t++)B[t]=B[t-1].clone(),G[t]=G[t-1].clone(),K.crossVectors(u[t-1],u[t]),K.length()>Number.EPSILON&&(K.normalize(),U=Math.acos(Fh.clamp(u[t-1].dot(u[t]),-1,1)),B[t].applyMatrix4(O.makeRotationAxis(K,U))),G[t].crossVectors(u[t],B[t]);if(!0===D)for(D=Math.acos(Fh.clamp(B[0].dot(B[z]),-1,1)),D/=z,0<u[0].dot(K.crossVectors(B[0],B[z]))&&(D=-D),K=1;K<=z;K++)B[K].applyMatrix4(O.makeRotationAxis(u[K],
D*K)),G[K].crossVectors(u[K],B[K]);return{tangents:u,normals:B,binormals:G}},clone:function(){return(new (this||q).constructor).copy(this||q)},copy:function(z){(this||q).arcLengthDivisions=z.arcLengthDivisions;return this||q},toJSON:function(){var z={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};z.arcLengthDivisions=(this||q).arcLengthDivisions;z.type=(this||q).type;return z},fromJSON:function(z){(this||q).arcLengthDivisions=z.arcLengthDivisions;return this||q}});var BK=function(z){function D(u,
B,G,K,O,U,V,ca){void 0===u&&(u=0);void 0===B&&(B=0);void 0===G&&(G=1);void 0===K&&(K=1);void 0===O&&(O=0);void 0===U&&(U=2*Math.PI);void 0===V&&(V=!1);void 0===ca&&(ca=0);var qa=z.call(this||q)||this||q;qa.type="EllipseCurve";qa.aX=u;qa.aY=B;qa.xRadius=G;qa.yRadius=K;qa.aStartAngle=O;qa.aEndAngle=U;qa.aClockwise=V;qa.aRotation=ca;return qa}r(D,z);var t=D.prototype;t.getPoint=function(u,B){B=B||new We;for(var G=2*Math.PI,K=(this||q).aEndAngle-(this||q).aStartAngle,O=Math.abs(K)<Number.EPSILON;0>K;)K+=
G;for(;K>G;)K-=G;K<Number.EPSILON&&(K=O?0:G);!0!==(this||q).aClockwise||O||(K=K===G?-G:K-G);G=(this||q).aStartAngle+u*K;u=(this||q).aX+(this||q).xRadius*Math.cos(G);var U=(this||q).aY+(this||q).yRadius*Math.sin(G);0!==(this||q).aRotation&&(G=Math.cos((this||q).aRotation),K=Math.sin((this||q).aRotation),O=u-(this||q).aX,U-=(this||q).aY,u=O*G-U*K+(this||q).aX,U=O*K+U*G+(this||q).aY);return B.set(u,U)};t.copy=function(u){z.prototype.copy.call(this||q,u);(this||q).aX=u.aX;(this||q).aY=u.aY;(this||q).xRadius=
u.xRadius;(this||q).yRadius=u.yRadius;(this||q).aStartAngle=u.aStartAngle;(this||q).aEndAngle=u.aEndAngle;(this||q).aClockwise=u.aClockwise;(this||q).aRotation=u.aRotation;return this||q};t.toJSON=function(){var u=z.prototype.toJSON.call(this||q);u.aX=(this||q).aX;u.aY=(this||q).aY;u.xRadius=(this||q).xRadius;u.yRadius=(this||q).yRadius;u.aStartAngle=(this||q).aStartAngle;u.aEndAngle=(this||q).aEndAngle;u.aClockwise=(this||q).aClockwise;u.aRotation=(this||q).aRotation;return u};t.fromJSON=function(u){z.prototype.fromJSON.call(this||
q,u);(this||q).aX=u.aX;(this||q).aY=u.aY;(this||q).xRadius=u.xRadius;(this||q).yRadius=u.yRadius;(this||q).aStartAngle=u.aStartAngle;(this||q).aEndAngle=u.aEndAngle;(this||q).aClockwise=u.aClockwise;(this||q).aRotation=u.aRotation;return this||q};return D}($p);BK.prototype.isEllipseCurve=!0;var R_=function(z){function D(t,u,B,G,K,O){t=z.call(this||q,t,u,B,B,G,K,O)||this||q;t.type="ArcCurve";return t}r(D,z);return D}(BK);R_.prototype.isArcCurve=!0;var WR=new cc,S_=new e_,T_=new e_,U_=new e_,V_=function(z){function D(u,
B,G,K){void 0===u&&(u=[]);void 0===B&&(B=!1);void 0===G&&(G="centripetal");void 0===K&&(K=.5);var O=z.call(this||q)||this||q;O.type="CatmullRomCurve3";O.points=u;O.closed=B;O.curveType=G;O.tension=K;return O}r(D,z);var t=D.prototype;t.getPoint=function(u,B){void 0===B&&(B=new cc);var G=(this||q).points,K=G.length;u*=K-((this||q).closed?0:1);var O=Math.floor(u);u-=O;(this||q).closed?O+=0<O?0:(Math.floor(Math.abs(O)/K)+1)*K:0===u&&O===K-1&&(O=K-2,u=1);if((this||q).closed||0<O)var U=G[(O-1)%K];else WR.subVectors(G[0],
G[1]).add(G[0]),U=WR;var V=G[O%K],ca=G[(O+1)%K];(this||q).closed||O+2<K?G=G[(O+2)%K]:(WR.subVectors(G[K-1],G[K-2]).add(G[K-1]),G=WR);if("centripetal"===(this||q).curveType||"chordal"===(this||q).curveType){var qa="chordal"===(this||q).curveType?.5:.25;K=Math.pow(U.distanceToSquared(V),qa);O=Math.pow(V.distanceToSquared(ca),qa);qa=Math.pow(ca.distanceToSquared(G),qa);1E-4>O&&(O=1);1E-4>K&&(K=O);1E-4>qa&&(qa=O);S_.initNonuniformCatmullRom(U.x,V.x,ca.x,G.x,K,O,qa);T_.initNonuniformCatmullRom(U.y,V.y,
ca.y,G.y,K,O,qa);U_.initNonuniformCatmullRom(U.z,V.z,ca.z,G.z,K,O,qa)}else"catmullrom"===(this||q).curveType&&(S_.initCatmullRom(U.x,V.x,ca.x,G.x,(this||q).tension),T_.initCatmullRom(U.y,V.y,ca.y,G.y,(this||q).tension),U_.initCatmullRom(U.z,V.z,ca.z,G.z,(this||q).tension));B.set(S_.calc(u),T_.calc(u),U_.calc(u));return B};t.copy=function(u){z.prototype.copy.call(this||q,u);(this||q).points=[];for(var B=0,G=u.points.length;B<G;B++)(this||q).points.push(u.points[B].clone());(this||q).closed=u.closed;
(this||q).curveType=u.curveType;(this||q).tension=u.tension;return this||q};t.toJSON=function(){var u=z.prototype.toJSON.call(this||q);u.points=[];for(var B=0,G=(this||q).points.length;B<G;B++)u.points.push((this||q).points[B].toArray());u.closed=(this||q).closed;u.curveType=(this||q).curveType;u.tension=(this||q).tension;return u};t.fromJSON=function(u){z.prototype.fromJSON.call(this||q,u);(this||q).points=[];for(var B=0,G=u.points.length;B<G;B++){var K=u.points[B];(this||q).points.push((new cc).fromArray(K))}(this||
q).closed=u.closed;(this||q).curveType=u.curveType;(this||q).tension=u.tension;return this||q};return D}($p);V_.prototype.isCatmullRomCurve3=!0;var YR=function(z){function D(u,B,G,K){void 0===u&&(u=new We);void 0===B&&(B=new We);void 0===G&&(G=new We);void 0===K&&(K=new We);var O=z.call(this||q)||this||q;O.type="CubicBezierCurve";O.v0=u;O.v1=B;O.v2=G;O.v3=K;return O}r(D,z);var t=D.prototype;t.getPoint=function(u,B){void 0===B&&(B=new We);var G=(this||q).v0,K=(this||q).v1,O=(this||q).v2,U=(this||q).v3;
B.set(jK(u,G.x,K.x,O.x,U.x),jK(u,G.y,K.y,O.y,U.y));return B};t.copy=function(u){z.prototype.copy.call(this||q,u);(this||q).v0.copy(u.v0);(this||q).v1.copy(u.v1);(this||q).v2.copy(u.v2);(this||q).v3.copy(u.v3);return this||q};t.toJSON=function(){var u=z.prototype.toJSON.call(this||q);u.v0=(this||q).v0.toArray();u.v1=(this||q).v1.toArray();u.v2=(this||q).v2.toArray();u.v3=(this||q).v3.toArray();return u};t.fromJSON=function(u){z.prototype.fromJSON.call(this||q,u);(this||q).v0.fromArray(u.v0);(this||
q).v1.fromArray(u.v1);(this||q).v2.fromArray(u.v2);(this||q).v3.fromArray(u.v3);return this||q};return D}($p);YR.prototype.isCubicBezierCurve=!0;var W_=function(z){function D(u,B,G,K){void 0===u&&(u=new cc);void 0===B&&(B=new cc);void 0===G&&(G=new cc);void 0===K&&(K=new cc);var O=z.call(this||q)||this||q;O.type="CubicBezierCurve3";O.v0=u;O.v1=B;O.v2=G;O.v3=K;return O}r(D,z);var t=D.prototype;t.getPoint=function(u,B){void 0===B&&(B=new cc);var G=(this||q).v0,K=(this||q).v1,O=(this||q).v2,U=(this||
q).v3;B.set(jK(u,G.x,K.x,O.x,U.x),jK(u,G.y,K.y,O.y,U.y),jK(u,G.z,K.z,O.z,U.z));return B};t.copy=function(u){z.prototype.copy.call(this||q,u);(this||q).v0.copy(u.v0);(this||q).v1.copy(u.v1);(this||q).v2.copy(u.v2);(this||q).v3.copy(u.v3);return this||q};t.toJSON=function(){var u=z.prototype.toJSON.call(this||q);u.v0=(this||q).v0.toArray();u.v1=(this||q).v1.toArray();u.v2=(this||q).v2.toArray();u.v3=(this||q).v3.toArray();return u};t.fromJSON=function(u){z.prototype.fromJSON.call(this||q,u);(this||
q).v0.fromArray(u.v0);(this||q).v1.fromArray(u.v1);(this||q).v2.fromArray(u.v2);(this||q).v3.fromArray(u.v3);return this||q};return D}($p);W_.prototype.isCubicBezierCurve3=!0;var CK=function(z){function D(u,B){void 0===u&&(u=new We);void 0===B&&(B=new We);var G=z.call(this||q)||this||q;G.type="LineCurve";G.v1=u;G.v2=B;return G}r(D,z);var t=D.prototype;t.getPoint=function(u,B){void 0===B&&(B=new We);1===u?B.copy((this||q).v2):(B.copy((this||q).v2).sub((this||q).v1),B.multiplyScalar(u).add((this||q).v1));
return B};t.getPointAt=function(u,B){return this.getPoint(u,B)};t.getTangent=function(u,B){u=B||new We;u.copy((this||q).v2).sub((this||q).v1).normalize();return u};t.copy=function(u){z.prototype.copy.call(this||q,u);(this||q).v1.copy(u.v1);(this||q).v2.copy(u.v2);return this||q};t.toJSON=function(){var u=z.prototype.toJSON.call(this||q);u.v1=(this||q).v1.toArray();u.v2=(this||q).v2.toArray();return u};t.fromJSON=function(u){z.prototype.fromJSON.call(this||q,u);(this||q).v1.fromArray(u.v1);(this||
q).v2.fromArray(u.v2);return this||q};return D}($p);CK.prototype.isLineCurve=!0;var kfa=function(z){function D(u,B){void 0===u&&(u=new cc);void 0===B&&(B=new cc);var G=z.call(this||q)||this||q;G.type="LineCurve3";G.isLineCurve3=!0;G.v1=u;G.v2=B;return G}r(D,z);var t=D.prototype;t.getPoint=function(u,B){void 0===B&&(B=new cc);1===u?B.copy((this||q).v2):(B.copy((this||q).v2).sub((this||q).v1),B.multiplyScalar(u).add((this||q).v1));return B};t.getPointAt=function(u,B){return this.getPoint(u,B)};t.copy=
function(u){z.prototype.copy.call(this||q,u);(this||q).v1.copy(u.v1);(this||q).v2.copy(u.v2);return this||q};t.toJSON=function(){var u=z.prototype.toJSON.call(this||q);u.v1=(this||q).v1.toArray();u.v2=(this||q).v2.toArray();return u};t.fromJSON=function(u){z.prototype.fromJSON.call(this||q,u);(this||q).v1.fromArray(u.v1);(this||q).v2.fromArray(u.v2);return this||q};return D}($p),ZR=function(z){function D(u,B,G){void 0===u&&(u=new We);void 0===B&&(B=new We);void 0===G&&(G=new We);var K=z.call(this||
q)||this||q;K.type="QuadraticBezierCurve";K.v0=u;K.v1=B;K.v2=G;return K}r(D,z);var t=D.prototype;t.getPoint=function(u,B){void 0===B&&(B=new We);var G=(this||q).v0,K=(this||q).v1,O=(this||q).v2;B.set(iK(u,G.x,K.x,O.x),iK(u,G.y,K.y,O.y));return B};t.copy=function(u){z.prototype.copy.call(this||q,u);(this||q).v0.copy(u.v0);(this||q).v1.copy(u.v1);(this||q).v2.copy(u.v2);return this||q};t.toJSON=function(){var u=z.prototype.toJSON.call(this||q);u.v0=(this||q).v0.toArray();u.v1=(this||q).v1.toArray();
u.v2=(this||q).v2.toArray();return u};t.fromJSON=function(u){z.prototype.fromJSON.call(this||q,u);(this||q).v0.fromArray(u.v0);(this||q).v1.fromArray(u.v1);(this||q).v2.fromArray(u.v2);return this||q};return D}($p);ZR.prototype.isQuadraticBezierCurve=!0;var X_=function(z){function D(u,B,G){void 0===u&&(u=new cc);void 0===B&&(B=new cc);void 0===G&&(G=new cc);var K=z.call(this||q)||this||q;K.type="QuadraticBezierCurve3";K.v0=u;K.v1=B;K.v2=G;return K}r(D,z);var t=D.prototype;t.getPoint=function(u,B){void 0===
B&&(B=new cc);var G=(this||q).v0,K=(this||q).v1,O=(this||q).v2;B.set(iK(u,G.x,K.x,O.x),iK(u,G.y,K.y,O.y),iK(u,G.z,K.z,O.z));return B};t.copy=function(u){z.prototype.copy.call(this||q,u);(this||q).v0.copy(u.v0);(this||q).v1.copy(u.v1);(this||q).v2.copy(u.v2);return this||q};t.toJSON=function(){var u=z.prototype.toJSON.call(this||q);u.v0=(this||q).v0.toArray();u.v1=(this||q).v1.toArray();u.v2=(this||q).v2.toArray();return u};t.fromJSON=function(u){z.prototype.fromJSON.call(this||q,u);(this||q).v0.fromArray(u.v0);
(this||q).v1.fromArray(u.v1);(this||q).v2.fromArray(u.v2);return this||q};return D}($p);X_.prototype.isQuadraticBezierCurve3=!0;var $R=function(z){function D(u){void 0===u&&(u=[]);var B=z.call(this||q)||this||q;B.type="SplineCurve";B.points=u;return B}r(D,z);var t=D.prototype;t.getPoint=function(u,B){void 0===B&&(B=new We);var G=(this||q).points,K=(G.length-1)*u;u=Math.floor(K);K-=u;var O=G[0===u?u:u-1],U=G[u],V=G[u>G.length-2?G.length-1:u+1];G=G[u>G.length-3?G.length-1:u+2];B.set(uea(K,O.x,U.x,V.x,
G.x),uea(K,O.y,U.y,V.y,G.y));return B};t.copy=function(u){z.prototype.copy.call(this||q,u);(this||q).points=[];for(var B=0,G=u.points.length;B<G;B++)(this||q).points.push(u.points[B].clone());return this||q};t.toJSON=function(){var u=z.prototype.toJSON.call(this||q);u.points=[];for(var B=0,G=(this||q).points.length;B<G;B++)u.points.push((this||q).points[B].toArray());return u};t.fromJSON=function(u){z.prototype.fromJSON.call(this||q,u);(this||q).points=[];for(var B=0,G=u.points.length;B<G;B++){var K=
u.points[B];(this||q).points.push((new We).fromArray(K))}return this||q};return D}($p);$R.prototype.isSplineCurve=!0;var Y_=Object.freeze({__proto__:null,ArcCurve:R_,CatmullRomCurve3:V_,CubicBezierCurve:YR,CubicBezierCurve3:W_,EllipseCurve:BK,LineCurve:CK,LineCurve3:kfa,QuadraticBezierCurve:ZR,QuadraticBezierCurve3:X_,SplineCurve:$R}),lfa=function(z){function D(){var u=z.call(this||q)||this||q;u.type="CurvePath";u.curves=[];u.autoClose=!1;return u}r(D,z);var t=D.prototype;t.add=function(u){(this||
q).curves.push(u)};t.closePath=function(){var u=(this||q).curves[0].getPoint(0),B=(this||q).curves[(this||q).curves.length-1].getPoint(1);u.equals(B)||(this||q).curves.push(new CK(B,u))};t.getPoint=function(u){var B=u*this.getLength(),G=this.getCurveLengths();for(u=0;u<G.length;){if(G[u]>=B)return B=G[u]-B,u=(this||q).curves[u],G=u.getLength(),u.getPointAt(0===G?0:1-B/G);u++}return null};t.getLength=function(){var u=this.getCurveLengths();return u[u.length-1]};t.updateArcLengths=function(){(this||
q).needsUpdate=!0;(this||q).cacheLengths=null;this.getCurveLengths()};t.getCurveLengths=function(){if((this||q).cacheLengths&&(this||q).cacheLengths.length===(this||q).curves.length)return(this||q).cacheLengths;for(var u=[],B=0,G=0,K=(this||q).curves.length;G<K;G++)B+=(this||q).curves[G].getLength(),u.push(B);return(this||q).cacheLengths=u};t.getSpacedPoints=function(u){void 0===u&&(u=40);for(var B=[],G=0;G<=u;G++)B.push(this.getPoint(G/u));(this||q).autoClose&&B.push(B[0]);return B};t.getPoints=
function(u){void 0===u&&(u=12);for(var B=[],G,K=0,O=(this||q).curves;K<O.length;K++){var U=O[K];U=U.getPoints(U&&U.isEllipseCurve?2*u:U&&(U.isLineCurve||U.isLineCurve3)?1:U&&U.isSplineCurve?u*U.points.length:u);for(var V=0;V<U.length;V++){var ca=U[V];G&&G.equals(ca)||(B.push(ca),G=ca)}}(this||q).autoClose&&1<B.length&&!B[B.length-1].equals(B[0])&&B.push(B[0]);return B};t.copy=function(u){z.prototype.copy.call(this||q,u);(this||q).curves=[];for(var B=0,G=u.curves.length;B<G;B++)(this||q).curves.push(u.curves[B].clone());
(this||q).autoClose=u.autoClose;return this||q};t.toJSON=function(){var u=z.prototype.toJSON.call(this||q);u.autoClose=(this||q).autoClose;u.curves=[];for(var B=0,G=(this||q).curves.length;B<G;B++)u.curves.push((this||q).curves[B].toJSON());return u};t.fromJSON=function(u){z.prototype.fromJSON.call(this||q,u);(this||q).autoClose=u.autoClose;(this||q).curves=[];for(var B=0,G=u.curves.length;B<G;B++){var K=u.curves[B];(this||q).curves.push((new Y_[K.type]).fromJSON(K))}return this||q};return D}($p),
DK=function(z){function D(u){var B=z.call(this||q)||this||q;B.type="Path";B.currentPoint=new We;u&&B.setFromPoints(u);return B}r(D,z);var t=D.prototype;t.setFromPoints=function(u){this.moveTo(u[0].x,u[0].y);for(var B=1,G=u.length;B<G;B++)this.lineTo(u[B].x,u[B].y);return this||q};t.moveTo=function(u,B){(this||q).currentPoint.set(u,B);return this||q};t.lineTo=function(u,B){var G=new CK((this||q).currentPoint.clone(),new We(u,B));(this||q).curves.push(G);(this||q).currentPoint.set(u,B);return this||
q};t.quadraticCurveTo=function(u,B,G,K){u=new ZR((this||q).currentPoint.clone(),new We(u,B),new We(G,K));(this||q).curves.push(u);(this||q).currentPoint.set(G,K);return this||q};t.bezierCurveTo=function(u,B,G,K,O,U){u=new YR((this||q).currentPoint.clone(),new We(u,B),new We(G,K),new We(O,U));(this||q).curves.push(u);(this||q).currentPoint.set(O,U);return this||q};t.splineThru=function(u){var B=[(this||q).currentPoint.clone()].concat(u);B=new $R(B);(this||q).curves.push(B);(this||q).currentPoint.copy(u[u.length-
1]);return this||q};t.arc=function(u,B,G,K,O,U){this.absarc(u+(this||q).currentPoint.x,B+(this||q).currentPoint.y,G,K,O,U);return this||q};t.absarc=function(u,B,G,K,O,U){this.absellipse(u,B,G,G,K,O,U);return this||q};t.ellipse=function(u,B,G,K,O,U,V,ca){this.absellipse(u+(this||q).currentPoint.x,B+(this||q).currentPoint.y,G,K,O,U,V,ca);return this||q};t.absellipse=function(u,B,G,K,O,U,V,ca){u=new BK(u,B,G,K,O,U,V,ca);0<(this||q).curves.length&&(B=u.getPoint(0),B.equals((this||q).currentPoint)||this.lineTo(B.x,
B.y));(this||q).curves.push(u);u=u.getPoint(1);(this||q).currentPoint.copy(u);return this||q};t.copy=function(u){z.prototype.copy.call(this||q,u);(this||q).currentPoint.copy(u.currentPoint);return this||q};t.toJSON=function(){var u=z.prototype.toJSON.call(this||q);u.currentPoint=(this||q).currentPoint.toArray();return u};t.fromJSON=function(u){z.prototype.fromJSON.call(this||q,u);(this||q).currentPoint.fromArray(u.currentPoint);return this||q};return D}(lfa),lB=function(z){function D(u){u=z.call(this||
q,u)||this||q;u.uuid=Fh.generateUUID();u.type="Shape";u.holes=[];return u}r(D,z);var t=D.prototype;t.getPointsHoles=function(u){for(var B=[],G=0,K=(this||q).holes.length;G<K;G++)B[G]=(this||q).holes[G].getPoints(u);return B};t.extractPoints=function(u){return{shape:this.getPoints(u),holes:this.getPointsHoles(u)}};t.copy=function(u){z.prototype.copy.call(this||q,u);(this||q).holes=[];for(var B=0,G=u.holes.length;B<G;B++)(this||q).holes.push(u.holes[B].clone());return this||q};t.toJSON=function(){var u=
z.prototype.toJSON.call(this||q);u.uuid=(this||q).uuid;u.holes=[];for(var B=0,G=(this||q).holes.length;B<G;B++)u.holes.push((this||q).holes[B].toJSON());return u};t.fromJSON=function(u){z.prototype.fromJSON.call(this||q,u);(this||q).uuid=u.uuid;(this||q).holes=[];for(var B=0,G=u.holes.length;B<G;B++){var K=u.holes[B];(this||q).holes.push((new DK).fromJSON(K))}return this||q};return D}(DK),pv=function(z){function D(u,B){void 0===B&&(B=1);var G=z.call(this||q)||this||q;G.type="Light";G.color=new jg(u);
G.intensity=B;return G}r(D,z);var t=D.prototype;t.copy=function(u){z.prototype.copy.call(this||q,u);(this||q).color.copy(u.color);(this||q).intensity=u.intensity;return this||q};t.toJSON=function(u){u=z.prototype.toJSON.call(this||q,u);u.object.color=(this||q).color.getHex();u.object.intensity=(this||q).intensity;void 0!==(this||q).groundColor&&(u.object.groundColor=(this||q).groundColor.getHex());void 0!==(this||q).distance&&(u.object.distance=(this||q).distance);void 0!==(this||q).angle&&(u.object.angle=
(this||q).angle);void 0!==(this||q).decay&&(u.object.decay=(this||q).decay);void 0!==(this||q).penumbra&&(u.object.penumbra=(this||q).penumbra);void 0!==(this||q).shadow&&(u.object.shadow=(this||q).shadow.toJSON());return u};return D}(N);pv.prototype.isLight=!0;var Z_=function(z){function D(t,u,B){t=z.call(this||q,t,B)||this||q;t.type="HemisphereLight";t.position.copy(N.DefaultUp);t.updateMatrix();t.groundColor=new jg(u);return t}r(D,z);D.prototype.copy=function(t){pv.prototype.copy.call(this||q,
t);(this||q).groundColor.copy(t.groundColor);return this||q};return D}(pv);Z_.prototype.isHemisphereLight=!0;var mfa=new Ug,nfa=new cc,ofa=new cc,$_=function(){function z(t){(this||q).camera=t;(this||q).bias=0;(this||q).normalBias=0;(this||q).radius=1;(this||q).mapSize=new We(512,512);(this||q).map=null;(this||q).mapPass=null;(this||q).matrix=new Ug;(this||q).autoUpdate=!0;(this||q).needsUpdate=!1;(this||q)._frustum=new VJ;(this||q)._frameExtents=new We(1,1);(this||q)._viewportCount=1;(this||q)._viewports=
[new Ck(0,0,1,1)]}var D=z.prototype;D.getViewportCount=function(){return(this||q)._viewportCount};D.getFrustum=function(){return(this||q)._frustum};D.updateMatrices=function(t){var u=(this||q).camera,B=(this||q).matrix;nfa.setFromMatrixPosition(t.matrixWorld);u.position.copy(nfa);ofa.setFromMatrixPosition(t.target.matrixWorld);u.lookAt(ofa);u.updateMatrixWorld();mfa.multiplyMatrices(u.projectionMatrix,u.matrixWorldInverse);(this||q)._frustum.setFromProjectionMatrix(mfa);B.set(.5,0,0,.5,0,.5,0,.5,
0,0,.5,.5,0,0,0,1);B.multiply(u.projectionMatrix);B.multiply(u.matrixWorldInverse)};D.getViewport=function(t){return(this||q)._viewports[t]};D.getFrameExtents=function(){return(this||q)._frameExtents};D.copy=function(t){(this||q).camera=t.camera.clone();(this||q).bias=t.bias;(this||q).radius=t.radius;(this||q).mapSize.copy(t.mapSize);return this||q};D.clone=function(){return(new (this||q).constructor).copy(this||q)};D.toJSON=function(){var t={};0!==(this||q).bias&&(t.bias=(this||q).bias);0!==(this||
q).normalBias&&(t.normalBias=(this||q).normalBias);1!==(this||q).radius&&(t.radius=(this||q).radius);if(512!==(this||q).mapSize.x||512!==(this||q).mapSize.y)t.mapSize=(this||q).mapSize.toArray();t.camera=(this||q).camera.toJSON(!1).object;delete t.camera.matrix;return t};return z}(),pfa=function(z){function D(){var t=z.call(this||q,new Gb(50,1,.5,500))||this||q;t.focus=1;return t}r(D,z);D.prototype.updateMatrices=function(t){var u=(this||q).camera,B=2*Fh.RAD2DEG*t.angle*(this||q).focus,G=(this||q).mapSize.width/
(this||q).mapSize.height,K=t.distance||u.far;if(B!==u.fov||G!==u.aspect||K!==u.far)u.fov=B,u.aspect=G,u.far=K,u.updateProjectionMatrix();z.prototype.updateMatrices.call(this||q,t)};return D}($_);pfa.prototype.isSpotLightShadow=!0;var a0=function(z){function D(t,u,B,G,K,O){void 0===B&&(B=0);void 0===G&&(G=Math.PI/3);void 0===K&&(K=0);void 0===O&&(O=1);t=z.call(this||q,t,u)||this||q;t.type="SpotLight";t.position.copy(N.DefaultUp);t.updateMatrix();t.target=new N;t.distance=B;t.angle=G;t.penumbra=K;t.decay=
O;t.shadow=new pfa;return t}r(D,z);D.prototype.copy=function(t){z.prototype.copy.call(this||q,t);(this||q).distance=t.distance;(this||q).angle=t.angle;(this||q).penumbra=t.penumbra;(this||q).decay=t.decay;(this||q).target=t.target.clone();(this||q).shadow=t.shadow.clone();return this||q};m(D,[{key:"power",get:function(){return(this||q).intensity*Math.PI},set:function(t){(this||q).intensity=t/Math.PI}}]);return D}(pv);a0.prototype.isSpotLight=!0;var qfa=new Ug,EK=new cc,b0=new cc,rfa=function(z){function D(){var t=
z.call(this||q,new Gb(90,1,.5,500))||this||q;t._frameExtents=new We(4,2);t._viewportCount=6;t._viewports=[new Ck(2,1,1,1),new Ck(0,1,1,1),new Ck(3,1,1,1),new Ck(1,1,1,1),new Ck(3,0,1,1),new Ck(1,0,1,1)];t._cubeDirections=[new cc(1,0,0),new cc(-1,0,0),new cc(0,0,1),new cc(0,0,-1),new cc(0,1,0),new cc(0,-1,0)];t._cubeUps=[new cc(0,1,0),new cc(0,1,0),new cc(0,1,0),new cc(0,1,0),new cc(0,0,1),new cc(0,0,-1)];return t}r(D,z);D.prototype.updateMatrices=function(t,u){void 0===u&&(u=0);var B=(this||q).camera,
G=(this||q).matrix;EK.setFromMatrixPosition(t.matrixWorld);B.position.copy(EK);b0.copy(B.position);b0.add((this||q)._cubeDirections[u]);B.up.copy((this||q)._cubeUps[u]);B.lookAt(b0);B.updateMatrixWorld();G.makeTranslation(-EK.x,-EK.y,-EK.z);qfa.multiplyMatrices(B.projectionMatrix,B.matrixWorldInverse);(this||q)._frustum.setFromProjectionMatrix(qfa)};return D}($_);rfa.prototype.isPointLightShadow=!0;var c0=function(z){function D(t,u,B,G){void 0===B&&(B=0);void 0===G&&(G=1);t=z.call(this||q,t,u)||this||
q;t.type="PointLight";t.distance=B;t.decay=G;t.shadow=new rfa;return t}r(D,z);D.prototype.copy=function(t){z.prototype.copy.call(this||q,t);(this||q).distance=t.distance;(this||q).decay=t.decay;(this||q).shadow=t.shadow.clone();return this||q};m(D,[{key:"power",get:function(){return 4*(this||q).intensity*Math.PI},set:function(t){(this||q).intensity=t/(4*Math.PI)}}]);return D}(pv);c0.prototype.isPointLight=!0;var FK=function(z){function D(u,B,G,K,O,U){void 0===u&&(u=-1);void 0===B&&(B=1);void 0===
G&&(G=1);void 0===K&&(K=-1);void 0===O&&(O=.1);void 0===U&&(U=2E3);var V=z.call(this||q)||this||q;V.type="OrthographicCamera";V.zoom=1;V.view=null;V.left=u;V.right=B;V.top=G;V.bottom=K;V.near=O;V.far=U;V.updateProjectionMatrix();return V}r(D,z);var t=D.prototype;t.copy=function(u,B){z.prototype.copy.call(this||q,u,B);(this||q).left=u.left;(this||q).right=u.right;(this||q).top=u.top;(this||q).bottom=u.bottom;(this||q).near=u.near;(this||q).far=u.far;(this||q).zoom=u.zoom;(this||q).view=null===u.view?
null:Object.assign({},u.view);return this||q};t.setViewOffset=function(u,B,G,K,O,U){null===(this||q).view&&((this||q).view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1});(this||q).view.enabled=!0;(this||q).view.fullWidth=u;(this||q).view.fullHeight=B;(this||q).view.offsetX=G;(this||q).view.offsetY=K;(this||q).view.width=O;(this||q).view.height=U;this.updateProjectionMatrix()};t.clearViewOffset=function(){null!==(this||q).view&&((this||q).view.enabled=!1);this.updateProjectionMatrix()};
t.updateProjectionMatrix=function(){var u=((this||q).right-(this||q).left)/(2*(this||q).zoom),B=((this||q).top-(this||q).bottom)/(2*(this||q).zoom),G=((this||q).right+(this||q).left)/2,K=((this||q).top+(this||q).bottom)/2,O=G-u;G+=u;u=K+B;B=K-B;null!==(this||q).view&&(this||q).view.enabled&&(K=((this||q).right-(this||q).left)/(this||q).view.fullWidth/(this||q).zoom,B=((this||q).top-(this||q).bottom)/(this||q).view.fullHeight/(this||q).zoom,O+=K*(this||q).view.offsetX,G=O+K*(this||q).view.width,u-=
B*(this||q).view.offsetY,B=u-B*(this||q).view.height);(this||q).projectionMatrix.makeOrthographic(O,G,u,B,(this||q).near,(this||q).far);(this||q).projectionMatrixInverse.copy((this||q).projectionMatrix).invert()};t.toJSON=function(u){u=N.prototype.toJSON.call(this||q,u);u.object.zoom=(this||q).zoom;u.object.left=(this||q).left;u.object.right=(this||q).right;u.object.top=(this||q).top;u.object.bottom=(this||q).bottom;u.object.near=(this||q).near;u.object.far=(this||q).far;null!==(this||q).view&&(u.object.view=
Object.assign({},(this||q).view));return u};return D}(Hc);FK.prototype.isOrthographicCamera=!0;var sfa=function(z){function D(){return z.call(this||q,new FK(-5,5,5,-5,.5,500))||this||q}r(D,z);return D}($_);sfa.prototype.isDirectionalLightShadow=!0;var d0=function(z){function D(t,u){t=z.call(this||q,t,u)||this||q;t.type="DirectionalLight";t.position.copy(N.DefaultUp);t.updateMatrix();t.target=new N;t.shadow=new sfa;return t}r(D,z);D.prototype.copy=function(t){z.prototype.copy.call(this||q,t);(this||
q).target=t.target.clone();(this||q).shadow=t.shadow.clone();return this||q};return D}(pv);d0.prototype.isDirectionalLight=!0;var e0=function(z){function D(t,u){t=z.call(this||q,t,u)||this||q;t.type="AmbientLight";return t}r(D,z);return D}(pv);e0.prototype.isAmbientLight=!0;var f0=function(z){function D(u,B,G,K){void 0===G&&(G=10);void 0===K&&(K=10);u=z.call(this||q,u,B)||this||q;u.type="RectAreaLight";u.width=G;u.height=K;return u}r(D,z);var t=D.prototype;t.copy=function(u){z.prototype.copy.call(this||
q,u);(this||q).width=u.width;(this||q).height=u.height;return this||q};t.toJSON=function(u){u=z.prototype.toJSON.call(this||q,u);u.object.width=(this||q).width;u.object.height=(this||q).height;return u};return D}(pv);f0.prototype.isRectAreaLight=!0;var g0=function(){function z(){(this||q).coefficients=[];for(var t=0;9>t;t++)(this||q).coefficients.push(new cc)}var D=z.prototype;D.set=function(t){for(var u=0;9>u;u++)(this||q).coefficients[u].copy(t[u]);return this||q};D.zero=function(){for(var t=0;9>
t;t++)(this||q).coefficients[t].set(0,0,0);return this||q};D.getAt=function(t,u){var B=t.x,G=t.y;t=t.z;var K=(this||q).coefficients;u.copy(K[0]).multiplyScalar(.282095);u.addScaledVector(K[1],.488603*G);u.addScaledVector(K[2],.488603*t);u.addScaledVector(K[3],.488603*B);u.addScaledVector(K[4],1.092548*B*G);u.addScaledVector(K[5],1.092548*G*t);u.addScaledVector(K[6],.315392*(3*t*t-1));u.addScaledVector(K[7],1.092548*B*t);u.addScaledVector(K[8],.546274*(B*B-G*G));return u};D.getIrradianceAt=function(t,
u){var B=t.x,G=t.y;t=t.z;var K=(this||q).coefficients;u.copy(K[0]).multiplyScalar(.886227);u.addScaledVector(K[1],1.023328*G);u.addScaledVector(K[2],1.023328*t);u.addScaledVector(K[3],1.023328*B);u.addScaledVector(K[4],.858086*B*G);u.addScaledVector(K[5],.858086*G*t);u.addScaledVector(K[6],.743125*t*t-.247708);u.addScaledVector(K[7],.858086*B*t);u.addScaledVector(K[8],.429043*(B*B-G*G));return u};D.add=function(t){for(var u=0;9>u;u++)(this||q).coefficients[u].add(t.coefficients[u]);return this||q};
D.addScaledSH=function(t,u){for(var B=0;9>B;B++)(this||q).coefficients[B].addScaledVector(t.coefficients[B],u);return this||q};D.scale=function(t){for(var u=0;9>u;u++)(this||q).coefficients[u].multiplyScalar(t);return this||q};D.lerp=function(t,u){for(var B=0;9>B;B++)(this||q).coefficients[B].lerp(t.coefficients[B],u);return this||q};D.equals=function(t){for(var u=0;9>u;u++)if(!(this||q).coefficients[u].equals(t.coefficients[u]))return!1;return!0};D.copy=function(t){return this.set(t.coefficients)};
D.clone=function(){return(new (this||q).constructor).copy(this||q)};D.fromArray=function(t,u){void 0===u&&(u=0);for(var B=(this||q).coefficients,G=0;9>G;G++)B[G].fromArray(t,u+3*G);return this||q};D.toArray=function(t,u){void 0===t&&(t=[]);void 0===u&&(u=0);for(var B=(this||q).coefficients,G=0;9>G;G++)B[G].toArray(t,u+3*G);return t};z.getBasisAt=function(t,u){var B=t.x,G=t.y;t=t.z;u[0]=.282095;u[1]=.488603*G;u[2]=.488603*t;u[3]=.488603*B;u[4]=1.092548*B*G;u[5]=1.092548*G*t;u[6]=.315392*(3*t*t-1);
u[7]=1.092548*B*t;u[8]=.546274*(B*B-G*G)};return z}();g0.prototype.isSphericalHarmonics3=!0;var GK=function(z){function D(u,B){void 0===u&&(u=new g0);void 0===B&&(B=1);B=z.call(this||q,void 0,B)||this||q;B.sh=u;return B}r(D,z);var t=D.prototype;t.copy=function(u){z.prototype.copy.call(this||q,u);(this||q).sh.copy(u.sh);return this||q};t.fromJSON=function(u){(this||q).intensity=u.intensity;(this||q).sh.fromArray(u.sh);return this||q};t.toJSON=function(u){u=z.prototype.toJSON.call(this||q,u);u.object.sh=
(this||q).sh.toArray();return u};return D}(pv);GK.prototype.isLightProbe=!0;var tfa=function(z){function D(u){u=z.call(this||q,u)||this||q;u.textures={};return u}r(D,z);var t=D.prototype;t.load=function(u,B,G,K){var O=this||q,U=new tt(O.manager);U.setPath(O.path);U.setRequestHeader(O.requestHeader);U.setWithCredentials(O.withCredentials);U.load(u,function(V){try{B(O.parse(JSON.parse(V)))}catch(ca){K?K(ca):console.error(ca),O.manager.itemError(u)}},G,K)};t.parse=function(u){function B(ca){void 0===
G[ca]&&console.warn("THREE.MaterialLoader: Undefined texture",ca);return G[ca]}var G=(this||q).textures,K=new Nya[u.type];void 0!==u.uuid&&(K.uuid=u.uuid);void 0!==u.name&&(K.name=u.name);void 0!==u.color&&void 0!==K.color&&K.color.setHex(u.color);void 0!==u.roughness&&(K.roughness=u.roughness);void 0!==u.metalness&&(K.metalness=u.metalness);void 0!==u.sheen&&(K.sheen=(new jg).setHex(u.sheen));void 0!==u.emissive&&void 0!==K.emissive&&K.emissive.setHex(u.emissive);void 0!==u.specular&&void 0!==K.specular&&
K.specular.setHex(u.specular);void 0!==u.shininess&&(K.shininess=u.shininess);void 0!==u.clearcoat&&(K.clearcoat=u.clearcoat);void 0!==u.clearcoatRoughness&&(K.clearcoatRoughness=u.clearcoatRoughness);void 0!==u.fog&&(K.fog=u.fog);void 0!==u.flatShading&&(K.flatShading=u.flatShading);void 0!==u.blending&&(K.blending=u.blending);void 0!==u.combine&&(K.combine=u.combine);void 0!==u.side&&(K.side=u.side);void 0!==u.opacity&&(K.opacity=u.opacity);void 0!==u.transparent&&(K.transparent=u.transparent);
void 0!==u.alphaTest&&(K.alphaTest=u.alphaTest);void 0!==u.depthTest&&(K.depthTest=u.depthTest);void 0!==u.depthWrite&&(K.depthWrite=u.depthWrite);void 0!==u.colorWrite&&(K.colorWrite=u.colorWrite);void 0!==u.stencilWrite&&(K.stencilWrite=u.stencilWrite);void 0!==u.stencilWriteMask&&(K.stencilWriteMask=u.stencilWriteMask);void 0!==u.stencilFunc&&(K.stencilFunc=u.stencilFunc);void 0!==u.stencilRef&&(K.stencilRef=u.stencilRef);void 0!==u.stencilFuncMask&&(K.stencilFuncMask=u.stencilFuncMask);void 0!==
u.stencilFail&&(K.stencilFail=u.stencilFail);void 0!==u.stencilZFail&&(K.stencilZFail=u.stencilZFail);void 0!==u.stencilZPass&&(K.stencilZPass=u.stencilZPass);void 0!==u.wireframe&&(K.wireframe=u.wireframe);void 0!==u.wireframeLinewidth&&(K.wireframeLinewidth=u.wireframeLinewidth);void 0!==u.wireframeLinecap&&(K.wireframeLinecap=u.wireframeLinecap);void 0!==u.wireframeLinejoin&&(K.wireframeLinejoin=u.wireframeLinejoin);void 0!==u.rotation&&(K.rotation=u.rotation);1!==u.linewidth&&(K.linewidth=u.linewidth);
void 0!==u.dashSize&&(K.dashSize=u.dashSize);void 0!==u.gapSize&&(K.gapSize=u.gapSize);void 0!==u.scale&&(K.scale=u.scale);void 0!==u.polygonOffset&&(K.polygonOffset=u.polygonOffset);void 0!==u.polygonOffsetFactor&&(K.polygonOffsetFactor=u.polygonOffsetFactor);void 0!==u.polygonOffsetUnits&&(K.polygonOffsetUnits=u.polygonOffsetUnits);void 0!==u.skinning&&(K.skinning=u.skinning);void 0!==u.morphTargets&&(K.morphTargets=u.morphTargets);void 0!==u.morphNormals&&(K.morphNormals=u.morphNormals);void 0!==
u.dithering&&(K.dithering=u.dithering);void 0!==u.vertexTangents&&(K.vertexTangents=u.vertexTangents);void 0!==u.visible&&(K.visible=u.visible);void 0!==u.toneMapped&&(K.toneMapped=u.toneMapped);void 0!==u.userData&&(K.userData=u.userData);void 0!==u.vertexColors&&(K.vertexColors="number"===typeof u.vertexColors?0<u.vertexColors?!0:!1:u.vertexColors);if(void 0!==u.uniforms)for(var O in u.uniforms){var U=u.uniforms[O];K.uniforms[O]={};switch(U.type){case "t":K.uniforms[O].value=B(U.value);break;case "c":K.uniforms[O].value=
(new jg).setHex(U.value);break;case "v2":K.uniforms[O].value=(new We).fromArray(U.value);break;case "v3":K.uniforms[O].value=(new cc).fromArray(U.value);break;case "v4":K.uniforms[O].value=(new Ck).fromArray(U.value);break;case "m3":K.uniforms[O].value=(new Cn).fromArray(U.value);break;case "m4":K.uniforms[O].value=(new Ug).fromArray(U.value);break;default:K.uniforms[O].value=U.value}}void 0!==u.defines&&(K.defines=u.defines);void 0!==u.vertexShader&&(K.vertexShader=u.vertexShader);void 0!==u.fragmentShader&&
(K.fragmentShader=u.fragmentShader);if(void 0!==u.extensions)for(var V in u.extensions)K.extensions[V]=u.extensions[V];void 0!==u.shading&&(K.flatShading=1===u.shading);void 0!==u.size&&(K.size=u.size);void 0!==u.sizeAttenuation&&(K.sizeAttenuation=u.sizeAttenuation);void 0!==u.map&&(K.map=B(u.map));void 0!==u.matcap&&(K.matcap=B(u.matcap));void 0!==u.alphaMap&&(K.alphaMap=B(u.alphaMap));void 0!==u.bumpMap&&(K.bumpMap=B(u.bumpMap));void 0!==u.bumpScale&&(K.bumpScale=u.bumpScale);void 0!==u.normalMap&&
(K.normalMap=B(u.normalMap));void 0!==u.normalMapType&&(K.normalMapType=u.normalMapType);void 0!==u.normalScale&&(O=u.normalScale,!1===Array.isArray(O)&&(O=[O,O]),K.normalScale=(new We).fromArray(O));void 0!==u.displacementMap&&(K.displacementMap=B(u.displacementMap));void 0!==u.displacementScale&&(K.displacementScale=u.displacementScale);void 0!==u.displacementBias&&(K.displacementBias=u.displacementBias);void 0!==u.roughnessMap&&(K.roughnessMap=B(u.roughnessMap));void 0!==u.metalnessMap&&(K.metalnessMap=
B(u.metalnessMap));void 0!==u.emissiveMap&&(K.emissiveMap=B(u.emissiveMap));void 0!==u.emissiveIntensity&&(K.emissiveIntensity=u.emissiveIntensity);void 0!==u.specularMap&&(K.specularMap=B(u.specularMap));void 0!==u.envMap&&(K.envMap=B(u.envMap));void 0!==u.envMapIntensity&&(K.envMapIntensity=u.envMapIntensity);void 0!==u.reflectivity&&(K.reflectivity=u.reflectivity);void 0!==u.refractionRatio&&(K.refractionRatio=u.refractionRatio);void 0!==u.lightMap&&(K.lightMap=B(u.lightMap));void 0!==u.lightMapIntensity&&
(K.lightMapIntensity=u.lightMapIntensity);void 0!==u.aoMap&&(K.aoMap=B(u.aoMap));void 0!==u.aoMapIntensity&&(K.aoMapIntensity=u.aoMapIntensity);void 0!==u.gradientMap&&(K.gradientMap=B(u.gradientMap));void 0!==u.clearcoatMap&&(K.clearcoatMap=B(u.clearcoatMap));void 0!==u.clearcoatRoughnessMap&&(K.clearcoatRoughnessMap=B(u.clearcoatRoughnessMap));void 0!==u.clearcoatNormalMap&&(K.clearcoatNormalMap=B(u.clearcoatNormalMap));void 0!==u.clearcoatNormalScale&&(K.clearcoatNormalScale=(new We).fromArray(u.clearcoatNormalScale));
void 0!==u.transmission&&(K.transmission=u.transmission);void 0!==u.transmissionMap&&(K.transmissionMap=B(u.transmissionMap));return K};t.setTextures=function(u){(this||q).textures=u;return this||q};return D}(jm),h0={decodeText:function(z){if("undefined"!==typeof TextDecoder)return(new TextDecoder).decode(z);for(var D="",t=0,u=z.length;t<u;t++)D+=String.fromCharCode(z[t]);try{return decodeURIComponent(escape(D))}catch(B){return D}},extractUrlBase:function(z){var D=z.lastIndexOf("/");return-1===D?
"./":z.substr(0,D+1)}};kK.prototype=Object.assign(Object.create(pa.prototype),{constructor:kK,isInstancedBufferGeometry:!0,copy:function(z){pa.prototype.copy.call(this||q,z);(this||q).instanceCount=z.instanceCount;return this||q},clone:function(){return(new (this||q).constructor).copy(this||q)},toJSON:function(){var z=pa.prototype.toJSON.call(this||q);z.instanceCount=(this||q).instanceCount;z.isInstancedBufferGeometry=!0;return z}});lR.prototype=Object.assign(Object.create(za.prototype),{constructor:lR,
isInstancedBufferAttribute:!0,copy:function(z){za.prototype.copy.call(this||q,z);(this||q).meshPerAttribute=z.meshPerAttribute;return this||q},toJSON:function(){var z=za.prototype.toJSON.call(this||q);z.meshPerAttribute=(this||q).meshPerAttribute;z.isInstancedBufferAttribute=!0;return z}});var ufa=function(z){function D(u){return z.call(this||q,u)||this||q}r(D,z);var t=D.prototype;t.load=function(u,B,G,K){var O=this||q,U=new tt(O.manager);U.setPath(O.path);U.setRequestHeader(O.requestHeader);U.setWithCredentials(O.withCredentials);
U.load(u,function(V){try{B(O.parse(JSON.parse(V)))}catch(ca){K?K(ca):console.error(ca),O.manager.itemError(u)}},G,K)};t.parse=function(u){function B(nb,ec){if(void 0!==G[ec])return G[ec];var gc=nb.interleavedBuffers[ec];var Ac=gc.buffer;void 0!==K[Ac]?Ac=K[Ac]:(nb=(new Uint32Array(nb.arrayBuffers[Ac])).buffer,Ac=K[Ac]=nb);Ac=new qK[gc.type](Ac);Ac=new Sq(Ac,gc.stride);Ac.uuid=gc.uuid;return G[ec]=Ac}var G={},K={},O=u.isInstancedBufferGeometry?new kK:new pa,U=u.data.index;void 0!==U&&(U=new qK[U.type](U.array),
O.setIndex(new za(U,1)));U=u.data.attributes;for(var V in U){var ca=U[V],qa=void 0;ca.isInterleavedBufferAttribute?(qa=B(u.data,ca.data),qa=new bB(qa,ca.itemSize,ca.offset,ca.normalized)):(qa=new qK[ca.type](ca.array),qa=new (ca.isInstancedBufferAttribute?lR:za)(qa,ca.itemSize,ca.normalized));void 0!==ca.name&&(qa.name=ca.name);O.setAttribute(V,qa)}if(V=u.data.morphAttributes)for(var Ea in V){U=V[Ea];ca=[];qa=0;for(var Ra=U.length;qa<Ra;qa++){var Ua=U[qa],ub=void 0;Ua.isInterleavedBufferAttribute?
(ub=B(u.data,Ua.data),ub=new bB(ub,Ua.itemSize,Ua.offset,Ua.normalized)):(ub=new qK[Ua.type](Ua.array),ub=new za(ub,Ua.itemSize,Ua.normalized));void 0!==Ua.name&&(ub.name=Ua.name);ca.push(ub)}O.morphAttributes[Ea]=ca}u.data.morphTargetsRelative&&(O.morphTargetsRelative=!0);Ea=u.data.groups||u.data.drawcalls||u.data.offsets;if(void 0!==Ea)for(V=0,U=Ea.length;V!==U;++V)ca=Ea[V],O.addGroup(ca.start,ca.count,ca.materialIndex);Ea=u.data.boundingSphere;void 0!==Ea&&(V=new cc,void 0!==Ea.center&&V.fromArray(Ea.center),
O.boundingSphere=new hB(V,Ea.radius));u.name&&(O.name=u.name);u.userData&&(O.userData=u.userData);return O};return D}(jm),Qya=function(z){function D(u){return z.call(this||q,u)||this||q}r(D,z);var t=D.prototype;t.load=function(u,B,G,K){var O=this||q,U=""===(this||q).path?h0.extractUrlBase(u):(this||q).path;(this||q).resourcePath=(this||q).resourcePath||U;U=new tt((this||q).manager);U.setPath((this||q).path);U.setRequestHeader((this||q).requestHeader);U.setWithCredentials((this||q).withCredentials);
U.load(u,function(V){var ca=null;try{ca=JSON.parse(V)}catch(qa){void 0!==K&&K(qa);console.error("THREE:ObjectLoader: Can't parse "+u+".",qa.message);return}V=ca.metadata;void 0===V||void 0===V.type||"geometry"===V.type.toLowerCase()?console.error("THREE.ObjectLoader: Can't load "+u):O.parse(ca,B)},G,K)};t.parse=function(u,B){var G=this.parseAnimations(u.animations),K=this.parseShapes(u.shapes),O=this.parseGeometries(u.geometries,K);K=this.parseImages(u.images,function(){void 0!==B&&B(V)});var U=this.parseTextures(u.textures,
K);U=this.parseMaterials(u.materials,U);var V=this.parseObject(u.object,O,U,G);u=this.parseSkeletons(u.skeletons,V);this.bindSkeletons(V,u);if(void 0!==B){u=!1;for(var ca in K)if(K[ca]instanceof HTMLImageElement){u=!0;break}!1===u&&B(V)}return V};t.parseShapes=function(u){var B={};if(void 0!==u)for(var G=0,K=u.length;G<K;G++){var O=(new lB).fromJSON(u[G]);B[O.uuid]=O}return B};t.parseSkeletons=function(u,B){var G={},K={};B.traverse(function(V){V.isBone&&(K[V.uuid]=V)});if(void 0!==u){B=0;for(var O=
u.length;B<O;B++){var U=(new E_).fromJSON(u[B],K);G[U.uuid]=U}}return G};t.parseGeometries=function(u,B){var G={};if(void 0!==u)for(var K=new ufa,O=0,U=u.length;O<U;O++){var V=void 0;var ca=u[O];switch(ca.type){case "PlaneGeometry":case "PlaneBufferGeometry":V=new bq[ca.type](ca.width,ca.height,ca.widthSegments,ca.heightSegments);break;case "BoxGeometry":case "BoxBufferGeometry":V=new bq[ca.type](ca.width,ca.height,ca.depth,ca.widthSegments,ca.heightSegments,ca.depthSegments);break;case "CircleGeometry":case "CircleBufferGeometry":V=
new bq[ca.type](ca.radius,ca.segments,ca.thetaStart,ca.thetaLength);break;case "CylinderGeometry":case "CylinderBufferGeometry":V=new bq[ca.type](ca.radiusTop,ca.radiusBottom,ca.height,ca.radialSegments,ca.heightSegments,ca.openEnded,ca.thetaStart,ca.thetaLength);break;case "ConeGeometry":case "ConeBufferGeometry":V=new bq[ca.type](ca.radius,ca.height,ca.radialSegments,ca.heightSegments,ca.openEnded,ca.thetaStart,ca.thetaLength);break;case "SphereGeometry":case "SphereBufferGeometry":V=new bq[ca.type](ca.radius,
ca.widthSegments,ca.heightSegments,ca.phiStart,ca.phiLength,ca.thetaStart,ca.thetaLength);break;case "DodecahedronGeometry":case "DodecahedronBufferGeometry":case "IcosahedronGeometry":case "IcosahedronBufferGeometry":case "OctahedronGeometry":case "OctahedronBufferGeometry":case "TetrahedronGeometry":case "TetrahedronBufferGeometry":V=new bq[ca.type](ca.radius,ca.detail);break;case "RingGeometry":case "RingBufferGeometry":V=new bq[ca.type](ca.innerRadius,ca.outerRadius,ca.thetaSegments,ca.phiSegments,
ca.thetaStart,ca.thetaLength);break;case "TorusGeometry":case "TorusBufferGeometry":V=new bq[ca.type](ca.radius,ca.tube,ca.radialSegments,ca.tubularSegments,ca.arc);break;case "TorusKnotGeometry":case "TorusKnotBufferGeometry":V=new bq[ca.type](ca.radius,ca.tube,ca.tubularSegments,ca.radialSegments,ca.p,ca.q);break;case "TubeGeometry":case "TubeBufferGeometry":V=new bq[ca.type]((new Y_[ca.path.type]).fromJSON(ca.path),ca.tubularSegments,ca.radius,ca.radialSegments,ca.closed);break;case "LatheGeometry":case "LatheBufferGeometry":V=
new bq[ca.type](ca.points,ca.segments,ca.phiStart,ca.phiLength);break;case "PolyhedronGeometry":case "PolyhedronBufferGeometry":V=new bq[ca.type](ca.vertices,ca.indices,ca.radius,ca.details);break;case "ShapeGeometry":case "ShapeBufferGeometry":V=[];for(var qa=0,Ea=ca.shapes.length;qa<Ea;qa++)V.push(B[ca.shapes[qa]]);V=new bq[ca.type](V,ca.curveSegments);break;case "ExtrudeGeometry":case "ExtrudeBufferGeometry":V=[];qa=0;for(Ea=ca.shapes.length;qa<Ea;qa++)V.push(B[ca.shapes[qa]]);qa=ca.options.extrudePath;
void 0!==qa&&(ca.options.extrudePath=(new Y_[qa.type]).fromJSON(qa));V=new bq[ca.type](V,ca.options);break;case "BufferGeometry":case "InstancedBufferGeometry":V=K.parse(ca);break;case "Geometry":console.error('THREE.ObjectLoader: Loading "Geometry" is not supported anymore.');break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type "'+ca.type+'"');continue}V.uuid=ca.uuid;void 0!==ca.name&&(V.name=ca.name);!0===V.isBufferGeometry&&void 0!==ca.userData&&(V.userData=ca.userData);G[ca.uuid]=
V}return G};t.parseMaterials=function(u,B){var G={},K={};if(void 0!==u){var O=new tfa;O.setTextures(B);B=0;for(var U=u.length;B<U;B++){var V=u[B];if("MultiMaterial"===V.type){for(var ca=[],qa=0;qa<V.materials.length;qa++){var Ea=V.materials[qa];void 0===G[Ea.uuid]&&(G[Ea.uuid]=O.parse(Ea));ca.push(G[Ea.uuid])}K[V.uuid]=ca}else void 0===G[V.uuid]&&(G[V.uuid]=O.parse(V)),K[V.uuid]=G[V.uuid]}}return K};t.parseAnimations=function(u){var B={};if(void 0!==u)for(var G=0;G<u.length;G++){var K=AK.parse(u[G]);
B[K.uuid]=K}return B};t.parseImages=function(u,B){function G(nb){O.manager.itemStart(nb);return V.load(nb,function(){O.manager.itemEnd(nb)},void 0,function(){O.manager.itemError(nb);O.manager.itemEnd(nb)})}function K(nb){return"string"===typeof nb?(nb=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(nb)?nb:O.resourcePath+nb,G(nb)):nb.data?{data:new qK[nb.type](nb.data),width:nb.width,height:nb.height}:null}var O=this||q,U={};if(void 0!==u&&0<u.length){B=new c_(B);var V=new VR(B);V.setCrossOrigin((this||q).crossOrigin);
B=0;for(var ca=u.length;B<ca;B++){var qa=u[B],Ea=qa.url;if(Array.isArray(Ea)){U[qa.uuid]=[];for(var Ra=0,Ua=Ea.length;Ra<Ua;Ra++){var ub=K(Ea[Ra]);null!==ub&&(ub instanceof HTMLImageElement?U[qa.uuid].push(ub):U[qa.uuid].push(new jG(ub.data,ub.width,ub.height)))}}else Ea=K(qa.url),null!==Ea&&(U[qa.uuid]=Ea)}}return U};t.parseTextures=function(u,B){function G(Ea,Ra){if("number"===typeof Ea)return Ea;console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",Ea);return Ra[Ea]}
var K={};if(void 0!==u)for(var O=0,U=u.length;O<U;O++){var V=u[O];void 0===V.image&&console.warn('THREE.ObjectLoader: No "image" specified for',V.uuid);void 0===B[V.image]&&console.warn("THREE.ObjectLoader: Undefined image",V.image);var ca=void 0,qa=B[V.image];Array.isArray(qa)?(ca=new zG(qa),6===qa.length&&(ca.needsUpdate=!0)):(ca=qa&&qa.data?new jG(qa.data,qa.width,qa.height):new tp(qa),qa&&(ca.needsUpdate=!0));ca.uuid=V.uuid;void 0!==V.name&&(ca.name=V.name);void 0!==V.mapping&&(ca.mapping=G(V.mapping,
Pya));void 0!==V.offset&&ca.offset.fromArray(V.offset);void 0!==V.repeat&&ca.repeat.fromArray(V.repeat);void 0!==V.center&&ca.center.fromArray(V.center);void 0!==V.rotation&&(ca.rotation=V.rotation);void 0!==V.wrap&&(ca.wrapS=G(V.wrap[0],vfa),ca.wrapT=G(V.wrap[1],vfa));void 0!==V.format&&(ca.format=V.format);void 0!==V.type&&(ca.type=V.type);void 0!==V.encoding&&(ca.encoding=V.encoding);void 0!==V.minFilter&&(ca.minFilter=G(V.minFilter,wfa));void 0!==V.magFilter&&(ca.magFilter=G(V.magFilter,wfa));
void 0!==V.anisotropy&&(ca.anisotropy=V.anisotropy);void 0!==V.flipY&&(ca.flipY=V.flipY);void 0!==V.premultiplyAlpha&&(ca.premultiplyAlpha=V.premultiplyAlpha);void 0!==V.unpackAlignment&&(ca.unpackAlignment=V.unpackAlignment);K[V.uuid]=ca}return K};t.parseObject=function(u,B,G,K){function O(Ea){void 0===B[Ea]&&console.warn("THREE.ObjectLoader: Undefined geometry",Ea);return B[Ea]}function U(Ea){if(void 0!==Ea){if(Array.isArray(Ea)){for(var Ra=[],Ua=0,ub=Ea.length;Ua<ub;Ua++){var nb=Ea[Ua];void 0===
G[nb]&&console.warn("THREE.ObjectLoader: Undefined material",nb);Ra.push(G[nb])}return Ra}void 0===G[Ea]&&console.warn("THREE.ObjectLoader: Undefined material",Ea);return G[Ea]}}switch(u.type){case "Scene":var V=new zR;void 0!==u.background&&Number.isInteger(u.background)&&(V.background=new jg(u.background));void 0!==u.fog&&("Fog"===u.fog.type?V.fog=new B_(u.fog.color,u.fog.near,u.fog.far):"FogExp2"===u.fog.type&&(V.fog=new A_(u.fog.color,u.fog.density)));break;case "PerspectiveCamera":V=new Gb(u.fov,
u.aspect,u.near,u.far);void 0!==u.focus&&(V.focus=u.focus);void 0!==u.zoom&&(V.zoom=u.zoom);void 0!==u.filmGauge&&(V.filmGauge=u.filmGauge);void 0!==u.filmOffset&&(V.filmOffset=u.filmOffset);void 0!==u.view&&(V.view=Object.assign({},u.view));break;case "OrthographicCamera":V=new FK(u.left,u.right,u.top,u.bottom,u.near,u.far);void 0!==u.zoom&&(V.zoom=u.zoom);void 0!==u.view&&(V.view=Object.assign({},u.view));break;case "AmbientLight":V=new e0(u.color,u.intensity);break;case "DirectionalLight":V=new d0(u.color,
u.intensity);break;case "PointLight":V=new c0(u.color,u.intensity,u.distance,u.decay);break;case "RectAreaLight":V=new f0(u.color,u.intensity,u.width,u.height);break;case "SpotLight":V=new a0(u.color,u.intensity,u.distance,u.angle,u.penumbra,u.decay);break;case "HemisphereLight":V=new Z_(u.color,u.groundColor,u.intensity);break;case "LightProbe":V=(new GK).fromJSON(u);break;case "SkinnedMesh":V=O(u.geometry);var ca=U(u.material);V=new aK(V,ca);void 0!==u.bindMode&&(V.bindMode=u.bindMode);void 0!==
u.bindMatrix&&V.bindMatrix.fromArray(u.bindMatrix);void 0!==u.skeleton&&(V.skeleton=u.skeleton);break;case "Mesh":V=O(u.geometry);ca=U(u.material);V=new La(V,ca);break;case "InstancedMesh":V=O(u.geometry);ca=U(u.material);var qa=u.instanceMatrix;V=new cR(V,ca,u.count);V.instanceMatrix=new za(new Float32Array(qa.array),16);break;case "LOD":V=new D_;break;case "Line":V=new lv(O(u.geometry),U(u.material));break;case "LineLoop":V=new G_(O(u.geometry),U(u.material));break;case "LineSegments":V=new Zp(O(u.geometry),
U(u.material));break;case "PointCloud":case "Points":V=new lG(O(u.geometry),U(u.material));break;case "Sprite":V=new DR(U(u.material));break;case "Group":V=new FD;break;case "Bone":V=new bK;break;default:V=new N}V.uuid=u.uuid;void 0!==u.name&&(V.name=u.name);void 0!==u.matrix?(V.matrix.fromArray(u.matrix),void 0!==u.matrixAutoUpdate&&(V.matrixAutoUpdate=u.matrixAutoUpdate),V.matrixAutoUpdate&&V.matrix.decompose(V.position,V.quaternion,V.scale)):(void 0!==u.position&&V.position.fromArray(u.position),
void 0!==u.rotation&&V.rotation.fromArray(u.rotation),void 0!==u.quaternion&&V.quaternion.fromArray(u.quaternion),void 0!==u.scale&&V.scale.fromArray(u.scale));void 0!==u.castShadow&&(V.castShadow=u.castShadow);void 0!==u.receiveShadow&&(V.receiveShadow=u.receiveShadow);u.shadow&&(void 0!==u.shadow.bias&&(V.shadow.bias=u.shadow.bias),void 0!==u.shadow.normalBias&&(V.shadow.normalBias=u.shadow.normalBias),void 0!==u.shadow.radius&&(V.shadow.radius=u.shadow.radius),void 0!==u.shadow.mapSize&&V.shadow.mapSize.fromArray(u.shadow.mapSize),
void 0!==u.shadow.camera&&(V.shadow.camera=this.parseObject(u.shadow.camera)));void 0!==u.visible&&(V.visible=u.visible);void 0!==u.frustumCulled&&(V.frustumCulled=u.frustumCulled);void 0!==u.renderOrder&&(V.renderOrder=u.renderOrder);void 0!==u.userData&&(V.userData=u.userData);void 0!==u.layers&&(V.layers.mask=u.layers);if(void 0!==u.children)for(qa=u.children,ca=0;ca<qa.length;ca++)V.add(this.parseObject(qa[ca],B,G,K));if(void 0!==u.animations)for(qa=u.animations,ca=0;ca<qa.length;ca++)V.animations.push(K[qa[ca]]);
if("LOD"===u.type)for(void 0!==u.autoUpdate&&(V.autoUpdate=u.autoUpdate),u=u.levels,K=0;K<u.length;K++)qa=u[K],ca=V.getObjectByProperty("uuid",qa.object),void 0!==ca&&V.addLevel(ca,qa.distance);return V};t.bindSkeletons=function(u,B){0!==Object.keys(B).length&&u.traverse(function(G){if(!0===G.isSkinnedMesh&&void 0!==G.skeleton){var K=B[G.skeleton];void 0===K?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",G.skeleton):G.bind(K,G.bindMatrix)}})};t.setTexturePath=function(u){console.warn("THREE.ObjectLoader: .setTexturePath() has been renamed to .setResourcePath().");
return this.setResourcePath(u)};return D}(jm),Pya={UVMapping:300,CubeReflectionMapping:301,CubeRefractionMapping:302,EquirectangularReflectionMapping:303,EquirectangularRefractionMapping:304,CubeUVReflectionMapping:306,CubeUVRefractionMapping:307},vfa={RepeatWrapping:1E3,ClampToEdgeWrapping:1001,MirroredRepeatWrapping:1002},wfa={NearestFilter:1003,NearestMipmapNearestFilter:1004,NearestMipmapLinearFilter:1005,LinearFilter:1006,LinearMipmapNearestFilter:1007,LinearMipmapLinearFilter:1008};f_.prototype=
Object.assign(Object.create(jm.prototype),{constructor:f_,isImageBitmapLoader:!0,setOptions:function(z){(this||q).options=z;return this||q},load:function(z,D,t,u){void 0===z&&(z="");void 0!==(this||q).path&&(z=(this||q).path+z);z=(this||q).manager.resolveURL(z);var B=this||q,G=HD.get(z);if(void 0!==G)return B.manager.itemStart(z),setTimeout(function(){D&&D(G);B.manager.itemEnd(z)},0),G;t={};t.credentials="anonymous"===(this||q).crossOrigin?"same-origin":"include";t.headers=(this||q).requestHeader;
fetch(z,t).then(function(K){return K.blob()}).then(function(K){return createImageBitmap(K,Object.assign(B.options,{colorSpaceConversion:"none"}))}).then(function(K){HD.add(z,K);D&&D(K);B.manager.itemEnd(z)}).catch(function(K){u&&u(K);B.manager.itemError(z);B.manager.itemEnd(z)});B.manager.itemStart(z)}});var xfa=function(){function z(){(this||q).type="ShapePath";(this||q).color=new jg;(this||q).subPaths=[];(this||q).currentPath=null}var D=z.prototype;D.moveTo=function(t,u){(this||q).currentPath=new DK;
(this||q).subPaths.push((this||q).currentPath);(this||q).currentPath.moveTo(t,u);return this||q};D.lineTo=function(t,u){(this||q).currentPath.lineTo(t,u);return this||q};D.quadraticCurveTo=function(t,u,B,G){(this||q).currentPath.quadraticCurveTo(t,u,B,G);return this||q};D.bezierCurveTo=function(t,u,B,G,K,O){(this||q).currentPath.bezierCurveTo(t,u,B,G,K,O);return this||q};D.splineThru=function(t){(this||q).currentPath.splineThru(t);return this||q};D.toShapes=function(t,u){function B(gc){for(var Ac=
[],Lc=0,ld=gc.length;Lc<ld;Lc++){var cd=gc[Lc],Nc=new lB;Nc.curves=cd.curves;Ac.push(Nc)}return Ac}function G(gc,Ac){for(var Lc=Ac.length,ld=!1,cd=Lc-1,Nc=0;Nc<Lc;cd=Nc++){var Oc=Ac[cd],jd=Ac[Nc],Ed=jd.x-Oc.x,Ad=jd.y-Oc.y;if(Math.abs(Ad)>Number.EPSILON){if(0>Ad&&(Oc=Ac[Nc],Ed=-Ed,jd=Ac[cd],Ad=-Ad),!(gc.y<Oc.y||gc.y>jd.y))if(gc.y===Oc.y){if(gc.x===Oc.x)return!0}else{cd=Ad*(gc.x-Oc.x)-Ed*(gc.y-Oc.y);if(0===cd)return!0;0>cd||(ld=!ld)}}else if(gc.y===Oc.y&&(jd.x<=gc.x&&gc.x<=Oc.x||Oc.x<=gc.x&&gc.x<=jd.x))return!0}return ld}
var K=Uy.isClockWise,O=(this||q).subPaths;if(0===O.length)return[];if(!0===u)return B(O);u=[];if(1===O.length){var U=O[0];var V=new lB;V.curves=U.curves;u.push(V);return u}var ca=!K(O[0].getPoints());ca=t?!ca:ca;V=[];var qa=[],Ea=[],Ra=0;qa[Ra]=void 0;Ea[Ra]=[];for(var Ua=0,ub=O.length;Ua<ub;Ua++){U=O[Ua];var nb=U.getPoints();var ec=K(nb);(ec=t?!ec:ec)?(!ca&&qa[Ra]&&Ra++,qa[Ra]={s:new lB,p:nb},qa[Ra].s.curves=U.curves,ca&&Ra++,Ea[Ra]=[]):Ea[Ra].push({h:U,p:nb[0]})}if(!qa[0])return B(O);if(1<qa.length){t=
!1;K=[];O=0;for(U=qa.length;O<U;O++)V[O]=[];O=0;for(U=qa.length;O<U;O++)for(ec=Ea[O],ca=0;ca<ec.length;ca++){Ra=ec[ca];nb=!0;for(Ua=0;Ua<qa.length;Ua++)G(Ra.p,qa[Ua].p)&&(O!==Ua&&K.push({froms:O,tos:Ua,hole:ca}),nb?(nb=!1,V[Ua].push(Ra)):t=!0);nb&&V[O].push(Ra)}0<K.length&&(t||(Ea=V))}K=0;for(O=qa.length;K<O;K++)for(V=qa[K].s,u.push(V),t=Ea[K],U=0,ec=t.length;U<ec;U++)V.holes.push(t[U].h);return u};return z}(),i0=function(){function z(D){(this||q).type="Font";(this||q).data=D}z.prototype.generateShapes=
function(D,t){void 0===t&&(t=100);var u=[],B=t;t=(this||q).data;var G=Array.from(D);B/=t.resolution;var K=(t.boundingBox.yMax-t.boundingBox.yMin+t.underlineThickness)*B;D=[];for(var O=0,U=0,V=0;V<G.length;V++){var ca=G[V];if("\n"===ca)O=0,U-=K;else{var qa=ca;ca=B;var Ea=O,Ra=U,Ua=t,ub=Ua.glyphs[qa]||Ua.glyphs["?"];if(ub){qa=new xfa;if(ub.o){Ua=ub._cachedOutline||(ub._cachedOutline=ub.o.split(" "));for(var nb=0,ec=Ua.length;nb<ec;)switch(Ua[nb++]){case "m":var gc=Ua[nb++]*ca+Ea;var Ac=Ua[nb++]*ca+
Ra;qa.moveTo(gc,Ac);break;case "l":gc=Ua[nb++]*ca+Ea;Ac=Ua[nb++]*ca+Ra;qa.lineTo(gc,Ac);break;case "q":var Lc=Ua[nb++]*ca+Ea;var ld=Ua[nb++]*ca+Ra;var cd=Ua[nb++]*ca+Ea;var Nc=Ua[nb++]*ca+Ra;qa.quadraticCurveTo(cd,Nc,Lc,ld);break;case "b":Lc=Ua[nb++]*ca+Ea,ld=Ua[nb++]*ca+Ra,cd=Ua[nb++]*ca+Ea,Nc=Ua[nb++]*ca+Ra,gc=Ua[nb++]*ca+Ea,Ac=Ua[nb++]*ca+Ra,qa.bezierCurveTo(cd,Nc,gc,Ac,Lc,ld)}}ca={offsetX:ub.ha*ca,path:qa}}else console.error('THREE.Font: character "'+qa+'" does not exists in font family '+Ua.familyName+
"."),ca=void 0;O+=ca.offsetX;D.push(ca.path)}}t=0;for(G=D.length;t<G;t++)Array.prototype.push.apply(u,D[t].toShapes());return u};return z}();i0.prototype.isFont=!0;var Rya=function(z){function D(u){return z.call(this||q,u)||this||q}r(D,z);var t=D.prototype;t.load=function(u,B,G,K){var O=this||q,U=new tt((this||q).manager);U.setPath((this||q).path);U.setRequestHeader((this||q).requestHeader);U.setWithCredentials(O.withCredentials);U.load(u,function(V){try{var ca=JSON.parse(V)}catch(qa){console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),
ca=JSON.parse(V.substring(65,V.length-2))}V=O.parse(ca);B&&B(V)},G,K)};t.parse=function(u){return new i0(u)};return D}(jm),aS,j0={getContext:function(){void 0===aS&&(aS=new (window.AudioContext||window.webkitAudioContext));return aS},setContext:function(z){aS=z}},yfa=function(z){function D(t){return z.call(this||q,t)||this||q}r(D,z);D.prototype.load=function(t,u,B,G){var K=this||q,O=new tt((this||q).manager);O.setResponseType("arraybuffer");O.setPath((this||q).path);O.setRequestHeader((this||q).requestHeader);
O.setWithCredentials((this||q).withCredentials);O.load(t,function(U){try{var V=U.slice(0);j0.getContext().decodeAudioData(V,function(ca){u(ca)})}catch(ca){G?G(ca):console.error(ca),K.manager.itemError(t)}},B,G)};return D}(jm),zfa=function(z){function D(t,u,B){void 0===B&&(B=1);B=z.call(this||q,void 0,B)||this||q;t=(new jg).set(t);var G=(new jg).set(u);u=new cc(t.r,t.g,t.b);t=new cc(G.r,G.g,G.b);G=Math.sqrt(Math.PI);var K=G*Math.sqrt(.75);B.sh.coefficients[0].copy(u).add(t).multiplyScalar(G);B.sh.coefficients[1].copy(u).sub(t).multiplyScalar(K);
return B}r(D,z);return D}(GK);zfa.prototype.isHemisphereLightProbe=!0;var Afa=function(z){function D(t,u){void 0===u&&(u=1);u=z.call(this||q,void 0,u)||this||q;t=(new jg).set(t);u.sh.coefficients[0].set(t.r,t.g,t.b).multiplyScalar(2*Math.sqrt(Math.PI));return u}r(D,z);return D}(GK);Afa.prototype.isAmbientLightProbe=!0;var Bfa=new Ug,Cfa=new Ug,Sya=function(){function z(){(this||q).type="StereoCamera";(this||q).aspect=1;(this||q).eyeSep=.064;(this||q).cameraL=new Gb;(this||q).cameraL.layers.enable(1);
(this||q).cameraL.matrixAutoUpdate=!1;(this||q).cameraR=new Gb;(this||q).cameraR.layers.enable(2);(this||q).cameraR.matrixAutoUpdate=!1;(this||q)._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}z.prototype.update=function(D){var t=(this||q)._cache;if(t.focus!==D.focus||t.fov!==D.fov||t.aspect!==D.aspect*(this||q).aspect||t.near!==D.near||t.far!==D.far||t.zoom!==D.zoom||t.eyeSep!==(this||q).eyeSep){t.focus=D.focus;t.fov=D.fov;t.aspect=D.aspect*(this||q).aspect;t.near=
D.near;t.far=D.far;t.zoom=D.zoom;t.eyeSep=(this||q).eyeSep;var u=D.projectionMatrix.clone(),B=t.eyeSep/2,G=B*t.near/t.focus,K=t.near*Math.tan(Fh.DEG2RAD*t.fov*.5)/t.zoom;Cfa.elements[12]=-B;Bfa.elements[12]=B;B=-K*t.aspect+G;var O=K*t.aspect+G;u.elements[0]=2*t.near/(O-B);u.elements[8]=(O+B)/(O-B);(this||q).cameraL.projectionMatrix.copy(u);B=-K*t.aspect-G;O=K*t.aspect-G;u.elements[0]=2*t.near/(O-B);u.elements[8]=(O+B)/(O-B);(this||q).cameraR.projectionMatrix.copy(u)}(this||q).cameraL.matrixWorld.copy(D.matrixWorld).multiply(Cfa);
(this||q).cameraR.matrixWorld.copy(D.matrixWorld).multiply(Bfa)};return z}(),Dfa=function(){function z(t){(this||q).autoStart=void 0!==t?t:!0;(this||q).startTime=0;(this||q).oldTime=0;(this||q).elapsedTime=0;(this||q).running=!1}var D=z.prototype;D.start=function(){(this||q).startTime=vea();(this||q).oldTime=(this||q).startTime;(this||q).elapsedTime=0;(this||q).running=!0};D.stop=function(){this.getElapsedTime();(this||q).running=!1;(this||q).autoStart=!1};D.getElapsedTime=function(){this.getDelta();
return(this||q).elapsedTime};D.getDelta=function(){var t=0;if((this||q).autoStart&&!(this||q).running)return this.start(),0;if((this||q).running){var u=vea();t=(u-(this||q).oldTime)/1E3;(this||q).oldTime=u;(this||q).elapsedTime+=t}return t};return z}(),ID=new cc,Efa=new lo,Tya=new cc,JD=new cc,Uya=function(z){function D(){var u=z.call(this||q)||this||q;u.type="AudioListener";u.context=j0.getContext();u.gain=u.context.createGain();u.gain.connect(u.context.destination);u.filter=null;u.timeDelta=0;u._clock=
new Dfa;return u}r(D,z);var t=D.prototype;t.getInput=function(){return(this||q).gain};t.removeFilter=function(){null!==(this||q).filter&&((this||q).gain.disconnect((this||q).filter),(this||q).filter.disconnect((this||q).context.destination),(this||q).gain.connect((this||q).context.destination),(this||q).filter=null);return this||q};t.getFilter=function(){return(this||q).filter};t.setFilter=function(u){null!==(this||q).filter?((this||q).gain.disconnect((this||q).filter),(this||q).filter.disconnect((this||
q).context.destination)):(this||q).gain.disconnect((this||q).context.destination);(this||q).filter=u;(this||q).gain.connect((this||q).filter);(this||q).filter.connect((this||q).context.destination);return this||q};t.getMasterVolume=function(){return(this||q).gain.gain.value};t.setMasterVolume=function(u){(this||q).gain.gain.setTargetAtTime(u,(this||q).context.currentTime,.01);return this||q};t.updateMatrixWorld=function(u){z.prototype.updateMatrixWorld.call(this||q,u);u=(this||q).context.listener;
var B=(this||q).up;(this||q).timeDelta=(this||q)._clock.getDelta();(this||q).matrixWorld.decompose(ID,Efa,Tya);JD.set(0,0,-1).applyQuaternion(Efa);if(u.positionX){var G=(this||q).context.currentTime+(this||q).timeDelta;u.positionX.linearRampToValueAtTime(ID.x,G);u.positionY.linearRampToValueAtTime(ID.y,G);u.positionZ.linearRampToValueAtTime(ID.z,G);u.forwardX.linearRampToValueAtTime(JD.x,G);u.forwardY.linearRampToValueAtTime(JD.y,G);u.forwardZ.linearRampToValueAtTime(JD.z,G);u.upX.linearRampToValueAtTime(B.x,
G);u.upY.linearRampToValueAtTime(B.y,G);u.upZ.linearRampToValueAtTime(B.z,G)}else u.setPosition(ID.x,ID.y,ID.z),u.setOrientation(JD.x,JD.y,JD.z,B.x,B.y,B.z)};return D}(N),k0=function(z){function D(u){var B=z.call(this||q)||this||q;B.type="Audio";B.listener=u;B.context=u.context;B.gain=B.context.createGain();B.gain.connect(u.getInput());B.autoplay=!1;B.buffer=null;B.detune=0;B.loop=!1;B.loopStart=0;B.loopEnd=0;B.offset=0;B.duration=void 0;B.playbackRate=1;B.isPlaying=!1;B.hasPlaybackControl=!0;B.source=
null;B.sourceType="empty";B._startedAt=0;B._progress=0;B._connected=!1;B.filters=[];return B}r(D,z);var t=D.prototype;t.getOutput=function(){return(this||q).gain};t.setNodeSource=function(u){(this||q).hasPlaybackControl=!1;(this||q).sourceType="audioNode";(this||q).source=u;this.connect();return this||q};t.setMediaElementSource=function(u){(this||q).hasPlaybackControl=!1;(this||q).sourceType="mediaNode";(this||q).source=(this||q).context.createMediaElementSource(u);this.connect();return this||q};
t.setMediaStreamSource=function(u){(this||q).hasPlaybackControl=!1;(this||q).sourceType="mediaStreamNode";(this||q).source=(this||q).context.createMediaStreamSource(u);this.connect();return this||q};t.setBuffer=function(u){(this||q).buffer=u;(this||q).sourceType="buffer";(this||q).autoplay&&this.play();return this||q};t.play=function(u){void 0===u&&(u=0);if(!0===(this||q).isPlaying)console.warn("THREE.Audio: Audio is already playing.");else if(!1===(this||q).hasPlaybackControl)console.warn("THREE.Audio: this Audio has no playback control.");
else return(this||q)._startedAt=(this||q).context.currentTime+u,u=(this||q).context.createBufferSource(),u.buffer=(this||q).buffer,u.loop=(this||q).loop,u.loopStart=(this||q).loopStart,u.loopEnd=(this||q).loopEnd,u.onended=(this||q).onEnded.bind(this||q),u.start((this||q)._startedAt,(this||q)._progress+(this||q).offset,(this||q).duration),(this||q).isPlaying=!0,(this||q).source=u,this.setDetune((this||q).detune),this.setPlaybackRate((this||q).playbackRate),this.connect()};t.pause=function(){if(!1===
(this||q).hasPlaybackControl)console.warn("THREE.Audio: this Audio has no playback control.");else return!0===(this||q).isPlaying&&((this||q)._progress+=Math.max((this||q).context.currentTime-(this||q)._startedAt,0)*(this||q).playbackRate,!0===(this||q).loop&&((this||q)._progress%=(this||q).duration||(this||q).buffer.duration),(this||q).source.stop(),(this||q).source.onended=null,(this||q).isPlaying=!1),this||q};t.stop=function(){if(!1===(this||q).hasPlaybackControl)console.warn("THREE.Audio: this Audio has no playback control.");
else return(this||q)._progress=0,(this||q).source.stop(),(this||q).source.onended=null,(this||q).isPlaying=!1,this||q};t.connect=function(){if(0<(this||q).filters.length){(this||q).source.connect((this||q).filters[0]);for(var u=1,B=(this||q).filters.length;u<B;u++)(this||q).filters[u-1].connect((this||q).filters[u]);(this||q).filters[(this||q).filters.length-1].connect(this.getOutput())}else(this||q).source.connect(this.getOutput());(this||q)._connected=!0;return this||q};t.disconnect=function(){if(0<
(this||q).filters.length){(this||q).source.disconnect((this||q).filters[0]);for(var u=1,B=(this||q).filters.length;u<B;u++)(this||q).filters[u-1].disconnect((this||q).filters[u]);(this||q).filters[(this||q).filters.length-1].disconnect(this.getOutput())}else(this||q).source.disconnect(this.getOutput());(this||q)._connected=!1;return this||q};t.getFilters=function(){return(this||q).filters};t.setFilters=function(u){u||(u=[]);!0===(this||q)._connected?(this.disconnect(),(this||q).filters=u.slice(),
this.connect()):(this||q).filters=u.slice();return this||q};t.setDetune=function(u){(this||q).detune=u;if(void 0!==(this||q).source.detune)return!0===(this||q).isPlaying&&(this||q).source.detune.setTargetAtTime((this||q).detune,(this||q).context.currentTime,.01),this||q};t.getDetune=function(){return(this||q).detune};t.getFilter=function(){return this.getFilters()[0]};t.setFilter=function(u){return this.setFilters(u?[u]:[])};t.setPlaybackRate=function(u){if(!1===(this||q).hasPlaybackControl)console.warn("THREE.Audio: this Audio has no playback control.");
else return(this||q).playbackRate=u,!0===(this||q).isPlaying&&(this||q).source.playbackRate.setTargetAtTime((this||q).playbackRate,(this||q).context.currentTime,.01),this||q};t.getPlaybackRate=function(){return(this||q).playbackRate};t.onEnded=function(){(this||q).isPlaying=!1};t.getLoop=function(){return!1===(this||q).hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):(this||q).loop};t.setLoop=function(u){if(!1===(this||q).hasPlaybackControl)console.warn("THREE.Audio: this Audio has no playback control.");
else return(this||q).loop=u,!0===(this||q).isPlaying&&((this||q).source.loop=(this||q).loop),this||q};t.setLoopStart=function(u){(this||q).loopStart=u;return this||q};t.setLoopEnd=function(u){(this||q).loopEnd=u;return this||q};t.getVolume=function(){return(this||q).gain.gain.value};t.setVolume=function(u){(this||q).gain.gain.setTargetAtTime(u,(this||q).context.currentTime,.01);return this||q};return D}(N),KD=new cc,Ffa=new lo,Vya=new cc,LD=new cc,Wya=function(z){function D(u){u=z.call(this||q,u)||
this||q;u.panner=u.context.createPanner();u.panner.panningModel="HRTF";u.panner.connect(u.gain);return u}r(D,z);var t=D.prototype;t.getOutput=function(){return(this||q).panner};t.getRefDistance=function(){return(this||q).panner.refDistance};t.setRefDistance=function(u){(this||q).panner.refDistance=u;return this||q};t.getRolloffFactor=function(){return(this||q).panner.rolloffFactor};t.setRolloffFactor=function(u){(this||q).panner.rolloffFactor=u;return this||q};t.getDistanceModel=function(){return(this||
q).panner.distanceModel};t.setDistanceModel=function(u){(this||q).panner.distanceModel=u;return this||q};t.getMaxDistance=function(){return(this||q).panner.maxDistance};t.setMaxDistance=function(u){(this||q).panner.maxDistance=u;return this||q};t.setDirectionalCone=function(u,B,G){(this||q).panner.coneInnerAngle=u;(this||q).panner.coneOuterAngle=B;(this||q).panner.coneOuterGain=G;return this||q};t.updateMatrixWorld=function(u){z.prototype.updateMatrixWorld.call(this||q,u);if(!0!==(this||q).hasPlaybackControl||
!1!==(this||q).isPlaying)if((this||q).matrixWorld.decompose(KD,Ffa,Vya),LD.set(0,0,1).applyQuaternion(Ffa),u=(this||q).panner,u.positionX){var B=(this||q).context.currentTime+(this||q).listener.timeDelta;u.positionX.linearRampToValueAtTime(KD.x,B);u.positionY.linearRampToValueAtTime(KD.y,B);u.positionZ.linearRampToValueAtTime(KD.z,B);u.orientationX.linearRampToValueAtTime(LD.x,B);u.orientationY.linearRampToValueAtTime(LD.y,B);u.orientationZ.linearRampToValueAtTime(LD.z,B)}else u.setPosition(KD.x,
KD.y,KD.z),u.setOrientation(LD.x,LD.y,LD.z)};return D}(k0),Gfa=function(){function z(t,u){void 0===u&&(u=2048);(this||q).analyser=t.context.createAnalyser();(this||q).analyser.fftSize=u;(this||q).data=new Uint8Array((this||q).analyser.frequencyBinCount);t.getOutput().connect((this||q).analyser)}var D=z.prototype;D.getFrequencyData=function(){(this||q).analyser.getByteFrequencyData((this||q).data);return(this||q).data};D.getAverageFrequency=function(){for(var t=0,u=this.getFrequencyData(),B=0;B<u.length;B++)t+=
u[B];return t/u.length};return z}(),Hfa=function(){function z(t,u,B){(this||q).binding=t;(this||q).valueSize=B;switch(u){case "quaternion":t=(this||q)._slerp;u=(this||q)._slerpAdditive;var G=(this||q)._setAdditiveIdentityQuaternion;(this||q).buffer=new Float64Array(6*B);(this||q)._workIndex=5;break;case "string":case "bool":t=(this||q)._select;u=(this||q)._select;G=(this||q)._setAdditiveIdentityOther;(this||q).buffer=Array(5*B);break;default:t=(this||q)._lerp,u=(this||q)._lerpAdditive,G=(this||q)._setAdditiveIdentityNumeric,
(this||q).buffer=new Float64Array(5*B)}(this||q)._mixBufferRegion=t;(this||q)._mixBufferRegionAdditive=u;(this||q)._setIdentity=G;(this||q)._origIndex=3;(this||q)._addIndex=4;(this||q).cumulativeWeight=0;(this||q).cumulativeWeightAdditive=0;(this||q).useCount=0;(this||q).referenceCount=0}var D=z.prototype;D.accumulate=function(t,u){var B=(this||q).buffer,G=(this||q).valueSize;t=t*G+G;var K=(this||q).cumulativeWeight;if(0===K){for(K=0;K!==G;++K)B[t+K]=B[K];K=u}else K+=u,this._mixBufferRegion(B,t,0,
u/K,G);(this||q).cumulativeWeight=K};D.accumulateAdditive=function(t){var u=(this||q).buffer,B=(this||q).valueSize,G=B*(this||q)._addIndex;0===(this||q).cumulativeWeightAdditive&&this._setIdentity();this._mixBufferRegionAdditive(u,G,0,t,B);(this||q).cumulativeWeightAdditive+=t};D.apply=function(t){var u=(this||q).valueSize,B=(this||q).buffer;t=t*u+u;var G=(this||q).cumulativeWeight,K=(this||q).cumulativeWeightAdditive,O=(this||q).binding;(this||q).cumulativeWeight=0;(this||q).cumulativeWeightAdditive=
0;1>G&&this._mixBufferRegion(B,t,u*(this||q)._origIndex,1-G,u);0<K&&this._mixBufferRegionAdditive(B,t,(this||q)._addIndex*u,1,u);G=u;for(K=u+u;G!==K;++G)if(B[G]!==B[G+u]){O.setValue(B,t);break}};D.saveOriginalState=function(){var t=(this||q).buffer,u=(this||q).valueSize,B=u*(this||q)._origIndex;(this||q).binding.getValue(t,B);for(var G=u;G!==B;++G)t[G]=t[B+G%u];this._setIdentity();(this||q).cumulativeWeight=0;(this||q).cumulativeWeightAdditive=0};D.restoreOriginalState=function(){(this||q).binding.setValue((this||
q).buffer,3*(this||q).valueSize)};D._setAdditiveIdentityNumeric=function(){for(var t=(this||q)._addIndex*(this||q).valueSize,u=t+(this||q).valueSize;t<u;t++)(this||q).buffer[t]=0};D._setAdditiveIdentityQuaternion=function(){this._setAdditiveIdentityNumeric();(this||q).buffer[(this||q)._addIndex*(this||q).valueSize+3]=1};D._setAdditiveIdentityOther=function(){for(var t=(this||q)._origIndex*(this||q).valueSize,u=(this||q)._addIndex*(this||q).valueSize,B=0;B<(this||q).valueSize;B++)(this||q).buffer[u+
B]=(this||q).buffer[t+B]};D._select=function(t,u,B,G,K){if(.5<=G)for(G=0;G!==K;++G)t[u+G]=t[B+G]};D._slerp=function(t,u,B,G){lo.slerpFlat(t,u,t,u,t,B,G)};D._slerpAdditive=function(t,u,B,G,K){K*=(this||q)._workIndex;lo.multiplyQuaternionsFlat(t,K,t,u,t,B);lo.slerpFlat(t,u,t,u,t,K,G)};D._lerp=function(t,u,B,G,K){for(var O=1-G,U=0;U!==K;++U){var V=u+U;t[V]=t[V]*O+t[B+U]*G}};D._lerpAdditive=function(t,u,B,G,K){for(var O=0;O!==K;++O){var U=u+O;t[U]+=t[B+O]*G}};return z}(),Xya=/[\[\]\.:\/]/g,Yya="[^"+"\\[\\]\\.:\\/".replace("\\.",
"")+"]",Zya=/((?:WC+[\/:])*)/.source.replace("WC","[^\\[\\]\\.:\\/]"),$ya=/(WCOD+)?/.source.replace("WCOD",Yya),aza=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC","[^\\[\\]\\.:\\/]"),bza=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC","[^\\[\\]\\.:\\/]"),cza=new RegExp("^"+Zya+$ya+aza+bza+"$"),dza=["material","materials","bones"];Object.assign(wea.prototype,{getValue:function(z,D){this.bind();var t=(this||q)._bindings[(this||q)._targetGroup.nCachedObjects_];void 0!==t&&t.getValue(z,D)},setValue:function(z,
D){for(var t=(this||q)._bindings,u=(this||q)._targetGroup.nCachedObjects_,B=t.length;u!==B;++u)t[u].setValue(z,D)},bind:function(){for(var z=(this||q)._bindings,D=(this||q)._targetGroup.nCachedObjects_,t=z.length;D!==t;++D)z[D].bind()},unbind:function(){for(var z=(this||q)._bindings,D=(this||q)._targetGroup.nCachedObjects_,t=z.length;D!==t;++D)z[D].unbind()}});Object.assign(sp,{Composite:wea,create:function(z,D,t){return z&&z.isAnimationObjectGroup?new sp.Composite(z,D,t):new sp(z,D,t)},sanitizeNodeName:function(z){return z.replace(/\s/g,
"_").replace(Xya,"")},parseTrackName:function(z){var D=cza.exec(z);if(!D)throw Error("PropertyBinding: Cannot parse trackName: "+z);D={nodeName:D[2],objectName:D[3],objectIndex:D[4],propertyName:D[5],propertyIndex:D[6]};var t=D.nodeName&&D.nodeName.lastIndexOf(".");if(void 0!==t&&-1!==t){var u=D.nodeName.substring(t+1);-1!==dza.indexOf(u)&&(D.nodeName=D.nodeName.substring(0,t),D.objectName=u)}if(null===D.propertyName||0===D.propertyName.length)throw Error("PropertyBinding: can not parse propertyName from trackName: "+
z);return D},findNode:function(z,D){if(!D||""===D||"."===D||-1===D||D===z.name||D===z.uuid)return z;if(z.skeleton){var t=z.skeleton.getBoneByName(D);if(void 0!==t)return t}return z.children&&(z=function G(B){for(var K=0;K<B.length;K++){var O=B[K];if(O.name===D||O.uuid===D||(O=G(O.children)))return O}return null}(z.children))?z:null}});Object.assign(sp.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},
Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(z,D){z[D]=(this||q).node[(this||q).propertyName]},function(z,D){for(var t=(this||q).resolvedProperty,u=0,B=t.length;u!==B;++u)z[D++]=t[u]},function(z,D){z[D]=(this||q).resolvedProperty[(this||q).propertyIndex]},function(z,D){(this||q).resolvedProperty.toArray(z,D)}],SetterByBindingTypeAndVersioning:[[function(z,D){(this||q).targetObject[(this||q).propertyName]=z[D]},function(z,D){(this||q).targetObject[(this||
q).propertyName]=z[D];(this||q).targetObject.needsUpdate=!0},function(z,D){(this||q).targetObject[(this||q).propertyName]=z[D];(this||q).targetObject.matrixWorldNeedsUpdate=!0}],[function(z,D){for(var t=(this||q).resolvedProperty,u=0,B=t.length;u!==B;++u)t[u]=z[D++]},function(z,D){for(var t=(this||q).resolvedProperty,u=0,B=t.length;u!==B;++u)t[u]=z[D++];(this||q).targetObject.needsUpdate=!0},function(z,D){for(var t=(this||q).resolvedProperty,u=0,B=t.length;u!==B;++u)t[u]=z[D++];(this||q).targetObject.matrixWorldNeedsUpdate=
!0}],[function(z,D){(this||q).resolvedProperty[(this||q).propertyIndex]=z[D]},function(z,D){(this||q).resolvedProperty[(this||q).propertyIndex]=z[D];(this||q).targetObject.needsUpdate=!0},function(z,D){(this||q).resolvedProperty[(this||q).propertyIndex]=z[D];(this||q).targetObject.matrixWorldNeedsUpdate=!0}],[function(z,D){(this||q).resolvedProperty.fromArray(z,D)},function(z,D){(this||q).resolvedProperty.fromArray(z,D);(this||q).targetObject.needsUpdate=!0},function(z,D){(this||q).resolvedProperty.fromArray(z,
D);(this||q).targetObject.matrixWorldNeedsUpdate=!0}]],getValue:function(z,D){this.bind();this.getValue(z,D)},setValue:function(z,D){this.bind();this.setValue(z,D)},bind:function(){var z=(this||q).node,D=(this||q).parsedPath,t=D.objectName,u=D.propertyName,B=D.propertyIndex;z||(z=sp.findNode((this||q).rootNode,D.nodeName)||(this||q).rootNode,(this||q).node=z);(this||q).getValue=(this||q)._getValue_unavailable;(this||q).setValue=(this||q)._setValue_unavailable;if(z){if(t){var G=D.objectIndex;switch(t){case "materials":if(!z.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",
this||q);return}if(!z.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this||q);return}z=z.material.materials;break;case "bones":if(!z.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this||q);return}z=z.skeleton.bones;for(t=0;t<z.length;t++)if(z[t].name===G){G=t;break}break;default:if(void 0===z[t]){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",
this||q);return}z=z[t]}if(void 0!==G){if(void 0===z[G]){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this||q,z);return}z=z[G]}}G=z[u];if(void 0===G)console.error("THREE.PropertyBinding: Trying to update property for track: "+D.nodeName+"."+u+" but it wasn't found.",z);else{D=(this||q).Versioning.None;(this||q).targetObject=z;void 0!==z.needsUpdate?D=(this||q).Versioning.NeedsUpdate:void 0!==z.matrixWorldNeedsUpdate&&(D=(this||q).Versioning.MatrixWorldNeedsUpdate);
t=(this||q).BindingType.Direct;if(void 0!==B){if("morphTargetInfluences"===u){if(!z.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this||q);return}if(z.geometry.isBufferGeometry){if(!z.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this||q);return}void 0!==z.morphTargetDictionary[B]&&(B=z.morphTargetDictionary[B])}else{console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences on THREE.Geometry. Use THREE.BufferGeometry instead.",
this||q);return}}t=(this||q).BindingType.ArrayElement;(this||q).resolvedProperty=G;(this||q).propertyIndex=B}else void 0!==G.fromArray&&void 0!==G.toArray?(t=(this||q).BindingType.HasFromToArray,(this||q).resolvedProperty=G):Array.isArray(G)?(t=(this||q).BindingType.EntireArray,(this||q).resolvedProperty=G):(this||q).propertyName=u;(this||q).getValue=(this||q).GetterByBindingType[t];(this||q).setValue=(this||q).SetterByBindingTypeAndVersioning[t][D]}}else console.error("THREE.PropertyBinding: Trying to update node for track: "+
(this||q).path+" but it wasn't found.")},unbind:function(){(this||q).node=null;(this||q).getValue=(this||q)._getValue_unbound;(this||q).setValue=(this||q)._setValue_unbound}});Object.assign(sp.prototype,{_getValue_unbound:sp.prototype.getValue,_setValue_unbound:sp.prototype.setValue});var Ifa=function(){function z(){(this||q).uuid=Fh.generateUUID();(this||q)._objects=Array.prototype.slice.call(arguments);(this||q).nCachedObjects_=0;var t={};(this||q)._indicesByUUID=t;for(var u=0,B=arguments.length;u!==
B;++u)t[arguments[u].uuid]=u;(this||q)._paths=[];(this||q)._parsedPaths=[];(this||q)._bindings=[];(this||q)._bindingsIndicesByPath={};var G=this||q;(this||q).stats={objects:{get total(){return G._objects.length},get inUse(){return(this||q).total-G.nCachedObjects_}},get bindingsPerObject(){return G._bindings.length}}}var D=z.prototype;D.add=function(){for(var t=(this||q)._objects,u=(this||q)._indicesByUUID,B=(this||q)._paths,G=(this||q)._parsedPaths,K=(this||q)._bindings,O=K.length,U=void 0,V=t.length,
ca=(this||q).nCachedObjects_,qa=0,Ea=arguments.length;qa!==Ea;++qa){var Ra=arguments[qa],Ua=Ra.uuid,ub=u[Ua];if(void 0===ub){ub=V++;u[Ua]=ub;t.push(Ra);ub=0;for(var nb=O;ub!==nb;++ub)K[ub].push(new sp(Ra,B[ub],G[ub]))}else if(ub<ca){U=t[ub];nb=--ca;var ec=t[nb];u[ec.uuid]=ub;t[ub]=ec;u[Ua]=nb;t[nb]=Ra;Ua=0;for(ec=O;Ua!==ec;++Ua){var gc=K[Ua],Ac=gc[ub];gc[ub]=gc[nb];void 0===Ac&&(Ac=new sp(Ra,B[Ua],G[Ua]));gc[nb]=Ac}}else t[ub]!==U&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}(this||
q).nCachedObjects_=ca};D.remove=function(){for(var t=(this||q)._objects,u=(this||q)._indicesByUUID,B=(this||q)._bindings,G=B.length,K=(this||q).nCachedObjects_,O=0,U=arguments.length;O!==U;++O){var V=arguments[O],ca=V.uuid,qa=u[ca];if(void 0!==qa&&qa>=K){var Ea=K++,Ra=t[Ea];u[Ra.uuid]=qa;t[qa]=Ra;u[ca]=Ea;t[Ea]=V;V=0;for(ca=G;V!==ca;++V){Ra=B[V];var Ua=Ra[qa];Ra[qa]=Ra[Ea];Ra[Ea]=Ua}}}(this||q).nCachedObjects_=K};D.uncache=function(){for(var t=(this||q)._objects,u=(this||q)._indicesByUUID,B=(this||
q)._bindings,G=B.length,K=(this||q).nCachedObjects_,O=t.length,U=0,V=arguments.length;U!==V;++U){var ca=arguments[U].uuid,qa=u[ca];if(void 0!==qa)if(delete u[ca],qa<K){ca=--K;var Ea=t[ca],Ra=--O,Ua=t[Ra];u[Ea.uuid]=qa;t[qa]=Ea;u[Ua.uuid]=ca;t[ca]=Ua;t.pop();Ea=0;for(Ua=G;Ea!==Ua;++Ea){var ub=B[Ea],nb=ub[Ra];ub[qa]=ub[ca];ub[ca]=nb;ub.pop()}}else for(ca=--O,Ra=t[ca],0<ca&&(u[Ra.uuid]=qa),t[qa]=Ra,t.pop(),Ra=0,Ea=G;Ra!==Ea;++Ra)Ua=B[Ra],Ua[qa]=Ua[ca],Ua.pop()}(this||q).nCachedObjects_=K};D.subscribe_=
function(t,u){var B=(this||q)._bindingsIndicesByPath,G=B[t],K=(this||q)._bindings;if(void 0!==G)return K[G];var O=(this||q)._paths,U=(this||q)._parsedPaths,V=(this||q)._objects,ca=(this||q).nCachedObjects_,qa=Array(V.length);G=K.length;B[t]=G;O.push(t);U.push(u);K.push(qa);B=ca;for(G=V.length;B!==G;++B)qa[B]=new sp(V[B],t,u);return qa};D.unsubscribe_=function(t){var u=(this||q)._bindingsIndicesByPath,B=u[t];if(void 0!==B){var G=(this||q)._paths,K=(this||q)._parsedPaths,O=(this||q)._bindings,U=O.length-
1,V=O[U];u[t[U]]=B;O[B]=V;O.pop();K[B]=K[U];K.pop();G[B]=G[U];G.pop()}};return z}();Ifa.prototype.isAnimationObjectGroup=!0;var eza=function(){function z(t,u,B,G){void 0===B&&(B=null);void 0===G&&(G=u.blendMode);(this||q)._mixer=t;(this||q)._clip=u;(this||q)._localRoot=B;(this||q).blendMode=G;t=u.tracks;u=t.length;B=Array(u);G={endingStart:2400,endingEnd:2400};for(var K=0;K!==u;++K){var O=t[K].createInterpolant(null);B[K]=O;O.settings=G}(this||q)._interpolantSettings=G;(this||q)._interpolants=B;(this||
q)._propertyBindings=Array(u);(this||q)._cacheIndex=null;(this||q)._byClipCacheIndex=null;(this||q)._timeScaleInterpolant=null;(this||q)._weightInterpolant=null;(this||q).loop=2201;(this||q)._loopCount=-1;(this||q)._startTime=null;(this||q).time=0;(this||q).timeScale=1;(this||q)._effectiveTimeScale=1;(this||q).weight=1;(this||q)._effectiveWeight=1;(this||q).repetitions=Infinity;(this||q).paused=!1;(this||q).enabled=!0;(this||q).clampWhenFinished=!1;(this||q).zeroSlopeAtStart=!0;(this||q).zeroSlopeAtEnd=
!0}var D=z.prototype;D.play=function(){(this||q)._mixer._activateAction(this||q);return this||q};D.stop=function(){(this||q)._mixer._deactivateAction(this||q);return this.reset()};D.reset=function(){(this||q).paused=!1;(this||q).enabled=!0;(this||q).time=0;(this||q)._loopCount=-1;(this||q)._startTime=null;return this.stopFading().stopWarping()};D.isRunning=function(){return(this||q).enabled&&!(this||q).paused&&0!==(this||q).timeScale&&null===(this||q)._startTime&&(this||q)._mixer._isActiveAction(this||
q)};D.isScheduled=function(){return(this||q)._mixer._isActiveAction(this||q)};D.startAt=function(t){(this||q)._startTime=t;return this||q};D.setLoop=function(t,u){(this||q).loop=t;(this||q).repetitions=u;return this||q};D.setEffectiveWeight=function(t){(this||q).weight=t;(this||q)._effectiveWeight=(this||q).enabled?t:0;return this.stopFading()};D.getEffectiveWeight=function(){return(this||q)._effectiveWeight};D.fadeIn=function(t){return this._scheduleFading(t,0,1)};D.fadeOut=function(t){return this._scheduleFading(t,
1,0)};D.crossFadeFrom=function(t,u,B){t.fadeOut(u);this.fadeIn(u);if(B){B=(this||q)._clip.duration;var G=t._clip.duration,K=B/G;t.warp(1,G/B,u);this.warp(K,1,u)}return this||q};D.crossFadeTo=function(t,u,B){return t.crossFadeFrom(this||q,u,B)};D.stopFading=function(){var t=(this||q)._weightInterpolant;null!==t&&((this||q)._weightInterpolant=null,(this||q)._mixer._takeBackControlInterpolant(t));return this||q};D.setEffectiveTimeScale=function(t){(this||q).timeScale=t;(this||q)._effectiveTimeScale=
(this||q).paused?0:t;return this.stopWarping()};D.getEffectiveTimeScale=function(){return(this||q)._effectiveTimeScale};D.setDuration=function(t){(this||q).timeScale=(this||q)._clip.duration/t;return this.stopWarping()};D.syncWith=function(t){(this||q).time=t.time;(this||q).timeScale=t.timeScale;return this.stopWarping()};D.halt=function(t){return this.warp((this||q)._effectiveTimeScale,0,t)};D.warp=function(t,u,B){var G=(this||q)._mixer,K=G.time,O=(this||q).timeScale,U=(this||q)._timeScaleInterpolant;
null===U&&(U=G._lendControlInterpolant(),(this||q)._timeScaleInterpolant=U);G=U.parameterPositions;U=U.sampleValues;G[0]=K;G[1]=K+B;U[0]=t/O;U[1]=u/O;return this||q};D.stopWarping=function(){var t=(this||q)._timeScaleInterpolant;null!==t&&((this||q)._timeScaleInterpolant=null,(this||q)._mixer._takeBackControlInterpolant(t));return this||q};D.getMixer=function(){return(this||q)._mixer};D.getClip=function(){return(this||q)._clip};D.getRoot=function(){return(this||q)._localRoot||(this||q)._mixer._root};
D._update=function(t,u,B,G){if((this||q).enabled){var K=(this||q)._startTime;if(null!==K){u=(t-K)*B;if(0>u||0===B)return;(this||q)._startTime=null;u*=B}u*=this._updateTimeScale(t);B=this._updateTime(u);t=this._updateWeight(t);if(0<t)switch(u=(this||q)._interpolants,K=(this||q)._propertyBindings,(this||q).blendMode){case 2501:G=0;for(var O=u.length;G!==O;++G)u[G].evaluate(B),K[G].accumulateAdditive(t);break;default:O=0;for(var U=u.length;O!==U;++O)u[O].evaluate(B),K[O].accumulate(G,t)}}else this._updateWeight(t)};
D._updateWeight=function(t){var u=0;if((this||q).enabled){u=(this||q).weight;var B=(this||q)._weightInterpolant;if(null!==B){var G=B.evaluate(t)[0];u*=G;t>B.parameterPositions[1]&&(this.stopFading(),0===G&&((this||q).enabled=!1))}}return(this||q)._effectiveWeight=u};D._updateTimeScale=function(t){var u=0;if(!(this||q).paused){u=(this||q).timeScale;var B=(this||q)._timeScaleInterpolant;if(null!==B){var G=B.evaluate(t)[0];u*=G;t>B.parameterPositions[1]&&(this.stopWarping(),0===u?(this||q).paused=!0:
(this||q).timeScale=u)}}return(this||q)._effectiveTimeScale=u};D._updateTime=function(t){var u=(this||q)._clip.duration,B=(this||q).loop,G=(this||q).time+t,K=(this||q)._loopCount,O=2202===B;if(0===t)return-1===K?G:O&&1===(K&1)?u-G:G;if(2200===B)a:{if(-1===K&&((this||q)._loopCount=0,this._setEndings(!0,!0,!1)),G>=u)G=u;else if(0>G)G=0;else{(this||q).time=G;break a}(this||q).clampWhenFinished?(this||q).paused=!0:(this||q).enabled=!1;(this||q).time=G;(this||q)._mixer.dispatchEvent({type:"finished",action:this||
q,direction:0>t?-1:1})}else{-1===K&&(0<=t?(K=0,this._setEndings(!0,0===(this||q).repetitions,O)):this._setEndings(0===(this||q).repetitions,!0,O));if(G>=u||0>G){B=Math.floor(G/u);G-=u*B;K+=Math.abs(B);var U=(this||q).repetitions-K;0>=U?((this||q).clampWhenFinished?(this||q).paused=!0:(this||q).enabled=!1,G=0<t?u:0,(this||q).time=G,(this||q)._mixer.dispatchEvent({type:"finished",action:this||q,direction:0<t?1:-1})):(1===U?(t=0>t,this._setEndings(t,!t,O)):this._setEndings(!1,!1,O),(this||q)._loopCount=
K,(this||q).time=G,(this||q)._mixer.dispatchEvent({type:"loop",action:this||q,loopDelta:B}))}else(this||q).time=G;if(O&&1===(K&1))return u-G}return G};D._setEndings=function(t,u,B){var G=(this||q)._interpolantSettings;B?(G.endingStart=2401,G.endingEnd=2401):(G.endingStart=t?(this||q).zeroSlopeAtStart?2401:2400:2402,G.endingEnd=u?(this||q).zeroSlopeAtEnd?2401:2400:2402)};D._scheduleFading=function(t,u,B){var G=(this||q)._mixer,K=G.time,O=(this||q)._weightInterpolant;null===O&&(O=G._lendControlInterpolant(),
(this||q)._weightInterpolant=O);G=O.parameterPositions;O=O.sampleValues;G[0]=K;O[0]=u;G[1]=K+t;O[1]=B;return this||q};return z}(),Jfa=function(z){function D(u){var B=z.call(this||q)||this||q;B._root=u;B._initMemoryManager();B._accuIndex=0;B.time=0;B.timeScale=1;return B}r(D,z);var t=D.prototype;t._bindAction=function(u,B){var G=u._localRoot||(this||q)._root,K=u._clip.tracks,O=K.length,U=u._propertyBindings;u=u._interpolants;var V=G.uuid,ca=(this||q)._bindingsByRootAndName,qa=ca[V];void 0===qa&&(qa=
{},ca[V]=qa);for(ca=0;ca!==O;++ca){var Ea=K[ca],Ra=Ea.name,Ua=qa[Ra];if(void 0===Ua){Ua=U[ca];if(void 0!==Ua){null===Ua._cacheIndex&&(++Ua.referenceCount,this._addInactiveBinding(Ua,V,Ra));continue}Ua=new Hfa(sp.create(G,Ra,B&&B._propertyBindings[ca].binding.parsedPath),Ea.ValueTypeName,Ea.getValueSize());++Ua.referenceCount;this._addInactiveBinding(Ua,V,Ra)}U[ca]=Ua;u[ca].resultBuffer=Ua.buffer}};t._activateAction=function(u){if(!this._isActiveAction(u)){if(null===u._cacheIndex){var B=(u._localRoot||
(this||q)._root).uuid,G=u._clip.uuid,K=(this||q)._actionsByClip[G];this._bindAction(u,K&&K.knownActions[0]);this._addInactiveAction(u,G,B)}B=u._propertyBindings;G=0;for(K=B.length;G!==K;++G){var O=B[G];0===O.useCount++&&(this._lendBinding(O),O.saveOriginalState())}this._lendAction(u)}};t._deactivateAction=function(u){if(this._isActiveAction(u)){for(var B=u._propertyBindings,G=0,K=B.length;G!==K;++G){var O=B[G];0===--O.useCount&&(O.restoreOriginalState(),this._takeBackBinding(O))}this._takeBackAction(u)}};
t._initMemoryManager=function(){(this||q)._actions=[];(this||q)._nActiveActions=0;(this||q)._actionsByClip={};(this||q)._bindings=[];(this||q)._nActiveBindings=0;(this||q)._bindingsByRootAndName={};(this||q)._controlInterpolants=[];(this||q)._nActiveControlInterpolants=0;var u=this||q;(this||q).stats={actions:{get total(){return u._actions.length},get inUse(){return u._nActiveActions}},bindings:{get total(){return u._bindings.length},get inUse(){return u._nActiveBindings}},controlInterpolants:{get total(){return u._controlInterpolants.length},
get inUse(){return u._nActiveControlInterpolants}}}};t._isActiveAction=function(u){u=u._cacheIndex;return null!==u&&u<(this||q)._nActiveActions};t._addInactiveAction=function(u,B,G){var K=(this||q)._actions,O=(this||q)._actionsByClip,U=O[B];void 0===U?(U={knownActions:[u],actionByRoot:{}},u._byClipCacheIndex=0,O[B]=U):(B=U.knownActions,u._byClipCacheIndex=B.length,B.push(u));u._cacheIndex=K.length;K.push(u);U.actionByRoot[G]=u};t._removeInactiveAction=function(u){var B=(this||q)._actions,G=B[B.length-
1],K=u._cacheIndex;G._cacheIndex=K;B[K]=G;B.pop();u._cacheIndex=null;B=u._clip.uuid;G=(this||q)._actionsByClip;K=G[B];var O=K.knownActions,U=O[O.length-1],V=u._byClipCacheIndex;U._byClipCacheIndex=V;O[V]=U;O.pop();u._byClipCacheIndex=null;delete K.actionByRoot[(u._localRoot||(this||q)._root).uuid];0===O.length&&delete G[B];this._removeInactiveBindingsForAction(u)};t._removeInactiveBindingsForAction=function(u){u=u._propertyBindings;for(var B=0,G=u.length;B!==G;++B){var K=u[B];0===--K.referenceCount&&
this._removeInactiveBinding(K)}};t._lendAction=function(u){var B=(this||q)._actions,G=u._cacheIndex,K=(this||q)._nActiveActions++,O=B[K];u._cacheIndex=K;B[K]=u;O._cacheIndex=G;B[G]=O};t._takeBackAction=function(u){var B=(this||q)._actions,G=u._cacheIndex,K=--(this||q)._nActiveActions,O=B[K];u._cacheIndex=K;B[K]=u;O._cacheIndex=G;B[G]=O};t._addInactiveBinding=function(u,B,G){var K=(this||q)._bindingsByRootAndName,O=(this||q)._bindings,U=K[B];void 0===U&&(U={},K[B]=U);U[G]=u;u._cacheIndex=O.length;
O.push(u)};t._removeInactiveBinding=function(u){var B=(this||q)._bindings,G=u.binding,K=G.rootNode.uuid;G=G.path;var O=(this||q)._bindingsByRootAndName,U=O[K],V=B[B.length-1];u=u._cacheIndex;V._cacheIndex=u;B[u]=V;B.pop();delete U[G];0===Object.keys(U).length&&delete O[K]};t._lendBinding=function(u){var B=(this||q)._bindings,G=u._cacheIndex,K=(this||q)._nActiveBindings++,O=B[K];u._cacheIndex=K;B[K]=u;O._cacheIndex=G;B[G]=O};t._takeBackBinding=function(u){var B=(this||q)._bindings,G=u._cacheIndex,
K=--(this||q)._nActiveBindings,O=B[K];u._cacheIndex=K;B[K]=u;O._cacheIndex=G;B[G]=O};t._lendControlInterpolant=function(){var u=(this||q)._controlInterpolants,B=(this||q)._nActiveControlInterpolants++,G=u[B];void 0===G&&(G=new fK(new Float32Array(2),new Float32Array(2),1,(this||q)._controlInterpolantsResultBuffer),G.__cacheIndex=B,u[B]=G);return G};t._takeBackControlInterpolant=function(u){var B=(this||q)._controlInterpolants,G=u.__cacheIndex,K=--(this||q)._nActiveControlInterpolants,O=B[K];u.__cacheIndex=
K;B[K]=u;O.__cacheIndex=G;B[G]=O};t.clipAction=function(u,B,G){var K=B||(this||q)._root,O=K.uuid;K="string"===typeof u?AK.findByName(K,u):u;u=null!==K?K.uuid:u;var U=(this||q)._actionsByClip[u],V=null;void 0===G&&(G=null!==K?K.blendMode:2500);if(void 0!==U){V=U.actionByRoot[O];if(void 0!==V&&V.blendMode===G)return V;V=U.knownActions[0];null===K&&(K=V._clip)}if(null===K)return null;B=new eza(this||q,K,B,G);this._bindAction(B,V);this._addInactiveAction(B,u,O);return B};t.existingAction=function(u,B){var G=
B||(this||q)._root;B=G.uuid;G="string"===typeof u?AK.findByName(G,u):u;u=(this||q)._actionsByClip[G?G.uuid:u];return void 0!==u?u.actionByRoot[B]||null:null};t.stopAllAction=function(){for(var u=(this||q)._actions,B=(this||q)._nActiveActions-1;0<=B;--B)u[B].stop();return this||q};t.update=function(u){u*=(this||q).timeScale;for(var B=(this||q)._actions,G=(this||q)._nActiveActions,K=(this||q).time+=u,O=Math.sign(u),U=(this||q)._accuIndex^=1,V=0;V!==G;++V)B[V]._update(K,u,O,U);u=(this||q)._bindings;
B=(this||q)._nActiveBindings;for(G=0;G!==B;++G)u[G].apply(U);return this||q};t.setTime=function(u){for(var B=(this||q).time=0;B<(this||q)._actions.length;B++)(this||q)._actions[B].time=0;return this.update(u)};t.getRoot=function(){return(this||q)._root};t.uncacheClip=function(u){var B=(this||q)._actions;u=u.uuid;var G=(this||q)._actionsByClip,K=G[u];if(void 0!==K){K=K.knownActions;for(var O=0,U=K.length;O!==U;++O){var V=K[O];this._deactivateAction(V);var ca=V._cacheIndex,qa=B[B.length-1];V._cacheIndex=
null;V._byClipCacheIndex=null;qa._cacheIndex=ca;B[ca]=qa;B.pop();this._removeInactiveBindingsForAction(V)}delete G[u]}};t.uncacheRoot=function(u){u=u.uuid;var B=(this||q)._actionsByClip;for(K in B){var G=B[K].actionByRoot[u];void 0!==G&&(this._deactivateAction(G),this._removeInactiveAction(G))}var K=(this||q)._bindingsByRootAndName[u];if(void 0!==K)for(var O in K)u=K[O],u.restoreOriginalState(),this._removeInactiveBinding(u)};t.uncacheAction=function(u,B){u=this.existingAction(u,B);null!==u&&(this._deactivateAction(u),
this._removeInactiveAction(u))};return D}(I);Jfa.prototype._controlInterpolantsResultBuffer=new Float32Array(1);var Kfa=function(){function z(D,t){"string"===typeof D&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),D=t);(this||q).value=D}z.prototype.clone=function(){return new z(void 0===(this||q).value.clone?(this||q).value:(this||q).value.clone())};return z}();g_.prototype=Object.assign(Object.create(Sq.prototype),{constructor:g_,isInstancedInterleavedBuffer:!0,copy:function(z){Sq.prototype.copy.call(this||
q,z);(this||q).meshPerAttribute=z.meshPerAttribute;return this||q},clone:function(z){z=Sq.prototype.clone.call(this||q,z);z.meshPerAttribute=(this||q).meshPerAttribute;return z},toJSON:function(z){z=Sq.prototype.toJSON.call(this||q,z);z.isInstancedInterleavedBuffer=!0;z.meshPerAttribute=(this||q).meshPerAttribute;return z}});Object.defineProperty(h_.prototype,"needsUpdate",{set:function(z){!0===z&&(this||q).version++}});Object.assign(h_.prototype,{isGLBufferAttribute:!0,setBuffer:function(z){(this||
q).buffer=z;return this||q},setType:function(z,D){(this||q).type=z;(this||q).elementSize=D;return this||q},setItemSize:function(z){(this||q).itemSize=z;return this||q},setCount:function(z){(this||q).count=z;return this||q}});Object.assign(i_.prototype,{set:function(z,D){(this||q).ray.set(z,D)},setFromCamera:function(z,D){D&&D.isPerspectiveCamera?((this||q).ray.origin.setFromMatrixPosition(D.matrixWorld),(this||q).ray.direction.set(z.x,z.y,.5).unproject(D).sub((this||q).ray.origin).normalize(),(this||
q).camera=D):D&&D.isOrthographicCamera?((this||q).ray.origin.set(z.x,z.y,(D.near+D.far)/(D.near-D.far)).unproject(D),(this||q).ray.direction.set(0,0,-1).transformDirection(D.matrixWorld),(this||q).camera=D):console.error("THREE.Raycaster: Unsupported camera type: "+D.type)},intersectObject:function(z,D,t){void 0===D&&(D=!1);void 0===t&&(t=[]);j_(z,this||q,t,D);t.sort(xea);return t},intersectObjects:function(z,D,t){void 0===D&&(D=!1);void 0===t&&(t=[]);for(var u=0,B=z.length;u<B;u++)j_(z[u],this||
q,t,D);t.sort(xea);return t}});var fza=function(){function z(t,u,B){void 0===t&&(t=1);void 0===u&&(u=0);void 0===B&&(B=0);(this||q).radius=t;(this||q).phi=u;(this||q).theta=B;return this||q}var D=z.prototype;D.set=function(t,u,B){(this||q).radius=t;(this||q).phi=u;(this||q).theta=B;return this||q};D.copy=function(t){(this||q).radius=t.radius;(this||q).phi=t.phi;(this||q).theta=t.theta;return this||q};D.makeSafe=function(){(this||q).phi=Math.max(1E-6,Math.min(Math.PI-1E-6,(this||q).phi));return this||
q};D.setFromVector3=function(t){return this.setFromCartesianCoords(t.x,t.y,t.z)};D.setFromCartesianCoords=function(t,u,B){(this||q).radius=Math.sqrt(t*t+u*u+B*B);0===(this||q).radius?((this||q).theta=0,(this||q).phi=0):((this||q).theta=Math.atan2(t,B),(this||q).phi=Math.acos(Fh.clamp(u/(this||q).radius,-1,1)));return this||q};D.clone=function(){return(new (this||q).constructor).copy(this||q)};return z}(),gza=function(){function z(t,u,B){void 0===t&&(t=1);void 0===u&&(u=0);void 0===B&&(B=0);(this||
q).radius=t;(this||q).theta=u;(this||q).y=B;return this||q}var D=z.prototype;D.set=function(t,u,B){(this||q).radius=t;(this||q).theta=u;(this||q).y=B;return this||q};D.copy=function(t){(this||q).radius=t.radius;(this||q).theta=t.theta;(this||q).y=t.y;return this||q};D.setFromVector3=function(t){return this.setFromCartesianCoords(t.x,t.y,t.z)};D.setFromCartesianCoords=function(t,u,B){(this||q).radius=Math.sqrt(t*t+B*B);(this||q).theta=Math.atan2(t,B);(this||q).y=u;return this||q};D.clone=function(){return(new (this||
q).constructor).copy(this||q)};return z}(),Lfa=new We,GG=function(){function z(t,u){void 0===t&&(t=new We(Infinity,Infinity));void 0===u&&(u=new We(-Infinity,-Infinity));(this||q).min=t;(this||q).max=u}var D=z.prototype;D.set=function(t,u){(this||q).min.copy(t);(this||q).max.copy(u);return this||q};D.setFromPoints=function(t){this.makeEmpty();for(var u=0,B=t.length;u<B;u++)this.expandByPoint(t[u]);return this||q};D.setFromCenterAndSize=function(t,u){u=Lfa.copy(u).multiplyScalar(.5);(this||q).min.copy(t).sub(u);
(this||q).max.copy(t).add(u);return this||q};D.clone=function(){return(new (this||q).constructor).copy(this||q)};D.copy=function(t){(this||q).min.copy(t.min);(this||q).max.copy(t.max);return this||q};D.makeEmpty=function(){(this||q).min.x=(this||q).min.y=Infinity;(this||q).max.x=(this||q).max.y=-Infinity;return this||q};D.isEmpty=function(){return(this||q).max.x<(this||q).min.x||(this||q).max.y<(this||q).min.y};D.getCenter=function(t){void 0===t&&(console.warn("THREE.Box2: .getCenter() target is now required"),
t=new We);return this.isEmpty()?t.set(0,0):t.addVectors((this||q).min,(this||q).max).multiplyScalar(.5)};D.getSize=function(t){void 0===t&&(console.warn("THREE.Box2: .getSize() target is now required"),t=new We);return this.isEmpty()?t.set(0,0):t.subVectors((this||q).max,(this||q).min)};D.expandByPoint=function(t){(this||q).min.min(t);(this||q).max.max(t);return this||q};D.expandByVector=function(t){(this||q).min.sub(t);(this||q).max.add(t);return this||q};D.expandByScalar=function(t){(this||q).min.addScalar(-t);
(this||q).max.addScalar(t);return this||q};D.containsPoint=function(t){return t.x<(this||q).min.x||t.x>(this||q).max.x||t.y<(this||q).min.y||t.y>(this||q).max.y?!1:!0};D.containsBox=function(t){return(this||q).min.x<=t.min.x&&t.max.x<=(this||q).max.x&&(this||q).min.y<=t.min.y&&t.max.y<=(this||q).max.y};D.getParameter=function(t,u){void 0===u&&(console.warn("THREE.Box2: .getParameter() target is now required"),u=new We);return u.set((t.x-(this||q).min.x)/((this||q).max.x-(this||q).min.x),(t.y-(this||
q).min.y)/((this||q).max.y-(this||q).min.y))};D.intersectsBox=function(t){return t.max.x<(this||q).min.x||t.min.x>(this||q).max.x||t.max.y<(this||q).min.y||t.min.y>(this||q).max.y?!1:!0};D.clampPoint=function(t,u){void 0===u&&(console.warn("THREE.Box2: .clampPoint() target is now required"),u=new We);return u.copy(t).clamp((this||q).min,(this||q).max)};D.distanceToPoint=function(t){return Lfa.copy(t).clamp((this||q).min,(this||q).max).sub(t).length()};D.intersect=function(t){(this||q).min.max(t.min);
(this||q).max.min(t.max);return this||q};D.union=function(t){(this||q).min.min(t.min);(this||q).max.max(t.max);return this||q};D.translate=function(t){(this||q).min.add(t);(this||q).max.add(t);return this||q};D.equals=function(t){return t.min.equals((this||q).min)&&t.max.equals((this||q).max)};return z}();GG.prototype.isBox2=!0;var Mfa=new cc,bS=new cc,Nfa=function(){function z(t,u){void 0===t&&(t=new cc);void 0===u&&(u=new cc);(this||q).start=t;(this||q).end=u}var D=z.prototype;D.set=function(t,
u){(this||q).start.copy(t);(this||q).end.copy(u);return this||q};D.copy=function(t){(this||q).start.copy(t.start);(this||q).end.copy(t.end);return this||q};D.getCenter=function(t){void 0===t&&(console.warn("THREE.Line3: .getCenter() target is now required"),t=new cc);return t.addVectors((this||q).start,(this||q).end).multiplyScalar(.5)};D.delta=function(t){void 0===t&&(console.warn("THREE.Line3: .delta() target is now required"),t=new cc);return t.subVectors((this||q).end,(this||q).start)};D.distanceSq=
function(){return(this||q).start.distanceToSquared((this||q).end)};D.distance=function(){return(this||q).start.distanceTo((this||q).end)};D.at=function(t,u){void 0===u&&(console.warn("THREE.Line3: .at() target is now required"),u=new cc);return this.delta(u).multiplyScalar(t).add((this||q).start)};D.closestPointToPointParameter=function(t,u){Mfa.subVectors(t,(this||q).start);bS.subVectors((this||q).end,(this||q).start);t=bS.dot(bS);t=bS.dot(Mfa)/t;u&&(t=Fh.clamp(t,0,1));return t};D.closestPointToPoint=
function(t,u,B){t=this.closestPointToPointParameter(t,u);void 0===B&&(console.warn("THREE.Line3: .closestPointToPoint() target is now required"),B=new cc);return this.delta(B).multiplyScalar(t).add((this||q).start)};D.applyMatrix4=function(t){(this||q).start.applyMatrix4(t);(this||q).end.applyMatrix4(t);return this||q};D.equals=function(t){return t.start.equals((this||q).start)&&t.end.equals((this||q).end)};D.clone=function(){return(new (this||q).constructor).copy(this||q)};return z}();lK.prototype=
Object.create(N.prototype);lK.prototype.constructor=lK;lK.prototype.isImmediateRenderObject=!0;var Ofa=new cc,hza=function(z){function D(u,B){var G=z.call(this||q)||this||q;G.light=u;G.light.updateMatrixWorld();G.matrix=u.matrixWorld;G.matrixAutoUpdate=!1;G.color=B;u=new pa;B=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(var K=0,O=1;32>K;K++,O++){var U=K/32*Math.PI*2,V=O/32*Math.PI*2;B.push(Math.cos(U),Math.sin(U),1,Math.cos(V),Math.sin(V),1)}u.setAttribute("position",new hb(B,
3));B=new mo({fog:!1,toneMapped:!1});G.cone=new Zp(u,B);G.add(G.cone);G.update();return G}r(D,z);var t=D.prototype;t.dispose=function(){(this||q).cone.geometry.dispose();(this||q).cone.material.dispose()};t.update=function(){(this||q).light.updateMatrixWorld();var u=(this||q).light.distance?(this||q).light.distance:1E3,B=u*Math.tan((this||q).light.angle);(this||q).cone.scale.set(B,B,u);Ofa.setFromMatrixPosition((this||q).light.target.matrixWorld);(this||q).cone.lookAt(Ofa);void 0!==(this||q).color?
(this||q).cone.material.color.set((this||q).color):(this||q).cone.material.color.copy((this||q).light.color)};return D}(N),mB=new cc,cS=new Ug,l0=new Ug,Pfa=function(z){function D(t){var u=yea(t);var B=new pa;for(var G=[],K=[],O=new jg(0,0,1),U=new jg(0,1,0),V=0;V<u.length;V++){var ca=u[V];ca.parent&&ca.parent.isBone&&(G.push(0,0,0),G.push(0,0,0),K.push(O.r,O.g,O.b),K.push(U.r,U.g,U.b))}B.setAttribute("position",new hb(G,3));B.setAttribute("color",new hb(K,3));G=new mo({vertexColors:!0,depthTest:!1,
depthWrite:!1,toneMapped:!1,transparent:!0});B=z.call(this||q,B,G)||this||q;B.type="SkeletonHelper";B.isSkeletonHelper=!0;B.root=t;B.bones=u;B.matrix=t.matrixWorld;B.matrixAutoUpdate=!1;return B}r(D,z);D.prototype.updateMatrixWorld=function(t){var u=(this||q).bones,B=(this||q).geometry,G=B.getAttribute("position");l0.copy((this||q).root.matrixWorld).invert();for(var K=0,O=0;K<u.length;K++){var U=u[K];U.parent&&U.parent.isBone&&(cS.multiplyMatrices(l0,U.matrixWorld),mB.setFromMatrixPosition(cS),G.setXYZ(O,
mB.x,mB.y,mB.z),cS.multiplyMatrices(l0,U.parent.matrixWorld),mB.setFromMatrixPosition(cS),G.setXYZ(O+1,mB.x,mB.y,mB.z),O+=2)}B.getAttribute("position").needsUpdate=!0;z.prototype.updateMatrixWorld.call(this||q,t)};return D}(Zp),iza=function(z){function D(u,B,G){B=new zK(B,4,2);var K=new Ny({wireframe:!0,fog:!1,toneMapped:!1});B=z.call(this||q,B,K)||this||q;B.light=u;B.light.updateMatrixWorld();B.color=G;B.type="PointLightHelper";B.matrix=B.light.matrixWorld;B.matrixAutoUpdate=!1;B.update();return B}
r(D,z);var t=D.prototype;t.dispose=function(){(this||q).geometry.dispose();(this||q).material.dispose()};t.update=function(){void 0!==(this||q).color?(this||q).material.color.set((this||q).color):(this||q).material.color.copy((this||q).light.color)};return D}(La),jza=new cc,Qfa=new jg,Rfa=new jg,kza=function(z){function D(u,B,G){var K=z.call(this||q)||this||q;K.light=u;K.light.updateMatrixWorld();K.matrix=u.matrixWorld;K.matrixAutoUpdate=!1;K.color=G;u=new xK(B);u.rotateY(.5*Math.PI);K.material=new Ny({wireframe:!0,
fog:!1,toneMapped:!1});void 0===K.color&&(K.material.vertexColors=!0);B=u.getAttribute("position");B=new Float32Array(3*B.count);u.setAttribute("color",new za(B,3));K.add(new La(u,K.material));K.update();return K}r(D,z);var t=D.prototype;t.dispose=function(){(this||q).children[0].geometry.dispose();(this||q).children[0].material.dispose()};t.update=function(){var u=(this||q).children[0];if(void 0!==(this||q).color)(this||q).material.color.set((this||q).color);else{var B=u.geometry.getAttribute("color");
Qfa.copy((this||q).light.color);Rfa.copy((this||q).light.groundColor);for(var G=0,K=B.count;G<K;G++){var O=G<K/2?Qfa:Rfa;B.setXYZ(G,O.r,O.g,O.b)}B.needsUpdate=!0}u.lookAt(jza.setFromMatrixPosition((this||q).light.matrixWorld).negate())};return D}(N),Sfa=function(z){function D(t,u,B,G){void 0===t&&(t=10);void 0===u&&(u=10);void 0===B&&(B=4473924);void 0===G&&(G=8947848);B=new jg(B);G=new jg(G);var K=u/2,O=t/u,U=t/2;t=[];for(var V=[],ca=0,qa=0,Ea=-U;ca<=u;ca++,Ea+=O){t.push(-U,0,Ea,U,0,Ea);t.push(Ea,
0,-U,Ea,0,U);var Ra=ca===K?B:G;Ra.toArray(V,qa);qa+=3;Ra.toArray(V,qa);qa+=3;Ra.toArray(V,qa);qa+=3;Ra.toArray(V,qa);qa+=3}u=new pa;u.setAttribute("position",new hb(t,3));u.setAttribute("color",new hb(V,3));B=new mo({vertexColors:!0,toneMapped:!1});u=z.call(this||q,u,B)||this||q;u.type="GridHelper";return u}r(D,z);return D}(Zp),lza=function(z){function D(t,u,B,G,K,O){void 0===t&&(t=10);void 0===u&&(u=16);void 0===B&&(B=8);void 0===G&&(G=64);void 0===K&&(K=4473924);void 0===O&&(O=8947848);K=new jg(K);
O=new jg(O);var U=[];for(var V=[],ca=0;ca<=u;ca++){var qa=ca/u*2*Math.PI,Ea=Math.sin(qa)*t;qa=Math.cos(qa)*t;U.push(0,0,0);U.push(Ea,0,qa);Ea=ca&1?K:O;V.push(Ea.r,Ea.g,Ea.b);V.push(Ea.r,Ea.g,Ea.b)}for(u=0;u<=B;u++)for(ca=u&1?K:O,Ea=t-t/B*u,qa=0;qa<G;qa++){var Ra=qa/G*2*Math.PI,Ua=Math.sin(Ra)*Ea;Ra=Math.cos(Ra)*Ea;U.push(Ua,0,Ra);V.push(ca.r,ca.g,ca.b);Ra=(qa+1)/G*2*Math.PI;Ua=Math.sin(Ra)*Ea;Ra=Math.cos(Ra)*Ea;U.push(Ua,0,Ra);V.push(ca.r,ca.g,ca.b)}t=new pa;t.setAttribute("position",new hb(U,3));
t.setAttribute("color",new hb(V,3));U=new mo({vertexColors:!0,toneMapped:!1});U=z.call(this||q,t,U)||this||q;U.type="PolarGridHelper";return U}r(D,z);return D}(Zp),Tfa=new cc,dS=new cc,Ufa=new cc,mza=function(z){function D(u,B,G){var K=z.call(this||q)||this||q;K.light=u;K.light.updateMatrixWorld();K.matrix=u.matrixWorld;K.matrixAutoUpdate=!1;K.color=G;void 0===B&&(B=1);u=new pa;u.setAttribute("position",new hb([-B,B,0,B,B,0,B,-B,0,-B,-B,0,-B,B,0],3));B=new mo({fog:!1,toneMapped:!1});K.lightPlane=
new lv(u,B);K.add(K.lightPlane);u=new pa;u.setAttribute("position",new hb([0,0,0,0,0,1],3));K.targetLine=new lv(u,B);K.add(K.targetLine);K.update();return K}r(D,z);var t=D.prototype;t.dispose=function(){(this||q).lightPlane.geometry.dispose();(this||q).lightPlane.material.dispose();(this||q).targetLine.geometry.dispose();(this||q).targetLine.material.dispose()};t.update=function(){Tfa.setFromMatrixPosition((this||q).light.matrixWorld);dS.setFromMatrixPosition((this||q).light.target.matrixWorld);Ufa.subVectors(dS,
Tfa);(this||q).lightPlane.lookAt(dS);void 0!==(this||q).color?((this||q).lightPlane.material.color.set((this||q).color),(this||q).targetLine.material.color.set((this||q).color)):((this||q).lightPlane.material.color.copy((this||q).light.color),(this||q).targetLine.material.color.copy((this||q).light.color));(this||q).targetLine.lookAt(dS);(this||q).targetLine.scale.z=Ufa.length()};return D}(N),mR=new cc,km=new Hc,nza=function(z){function D(t){function u(ub,nb,ec){B(ub,ec);B(nb,ec)}function B(ub,nb){O.push(0,
0,0);U.push(nb.r,nb.g,nb.b);void 0===V[ub]&&(V[ub]=[]);V[ub].push(O.length/3-1)}var G=new pa;var K=new mo({color:16777215,vertexColors:!0,toneMapped:!1}),O=[],U=[],V={},ca=new jg(16755200),qa=new jg(16711680),Ea=new jg(43775),Ra=new jg(16777215),Ua=new jg(3355443);u("n1","n2",ca);u("n2","n4",ca);u("n4","n3",ca);u("n3","n1",ca);u("f1","f2",ca);u("f2","f4",ca);u("f4","f3",ca);u("f3","f1",ca);u("n1","f1",ca);u("n2","f2",ca);u("n3","f3",ca);u("n4","f4",ca);u("p","n1",qa);u("p","n2",qa);u("p","n3",qa);
u("p","n4",qa);u("u1","u2",Ea);u("u2","u3",Ea);u("u3","u1",Ea);u("c","t",Ra);u("p","c",Ua);u("cn1","cn2",Ua);u("cn3","cn4",Ua);u("cf1","cf2",Ua);u("cf3","cf4",Ua);G.setAttribute("position",new hb(O,3));G.setAttribute("color",new hb(U,3));G=z.call(this||q,G,K)||this||q;G.type="CameraHelper";G.camera=t;G.camera.updateProjectionMatrix&&G.camera.updateProjectionMatrix();G.matrix=t.matrixWorld;G.matrixAutoUpdate=!1;G.pointMap=V;G.update();return G}r(D,z);D.prototype.update=function(){var t=(this||q).geometry,
u=(this||q).pointMap;km.projectionMatrixInverse.copy((this||q).camera.projectionMatrixInverse);tm("c",u,t,km,0,0,-1);tm("t",u,t,km,0,0,1);tm("n1",u,t,km,-1,-1,-1);tm("n2",u,t,km,1,-1,-1);tm("n3",u,t,km,-1,1,-1);tm("n4",u,t,km,1,1,-1);tm("f1",u,t,km,-1,-1,1);tm("f2",u,t,km,1,-1,1);tm("f3",u,t,km,-1,1,1);tm("f4",u,t,km,1,1,1);tm("u1",u,t,km,.7,1.1,-1);tm("u2",u,t,km,-.7,1.1,-1);tm("u3",u,t,km,0,2,-1);tm("cf1",u,t,km,-1,0,1);tm("cf2",u,t,km,1,0,1);tm("cf3",u,t,km,0,-1,1);tm("cf4",u,t,km,0,1,1);tm("cn1",
u,t,km,-1,0,-1);tm("cn2",u,t,km,1,0,-1);tm("cn3",u,t,km,0,-1,-1);tm("cn4",u,t,km,0,1,-1);t.getAttribute("position").needsUpdate=!0};return D}(Zp),eS=new Tq,Vfa=function(z){function D(u,B){void 0===B&&(B=16776960);var G=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),K=new Float32Array(24),O=new pa;O.setIndex(new za(G,1));O.setAttribute("position",new za(K,3));B=z.call(this||q,O,new mo({color:B,toneMapped:!1}))||this||q;B.object=u;B.type="BoxHelper";B.matrixAutoUpdate=!1;B.update();
return B}r(D,z);var t=D.prototype;t.update=function(u){void 0!==u&&console.warn("THREE.BoxHelper: .update() has no longer arguments.");void 0!==(this||q).object&&eS.setFromObject((this||q).object);if(!eS.isEmpty()){u=eS.min;var B=eS.max,G=(this||q).geometry.attributes.position,K=G.array;K[0]=B.x;K[1]=B.y;K[2]=B.z;K[3]=u.x;K[4]=B.y;K[5]=B.z;K[6]=u.x;K[7]=u.y;K[8]=B.z;K[9]=B.x;K[10]=u.y;K[11]=B.z;K[12]=B.x;K[13]=B.y;K[14]=u.z;K[15]=u.x;K[16]=B.y;K[17]=u.z;K[18]=u.x;K[19]=u.y;K[20]=u.z;K[21]=B.x;K[22]=
u.y;K[23]=u.z;G.needsUpdate=!0;(this||q).geometry.computeBoundingSphere()}};t.setFromObject=function(u){(this||q).object=u;this.update();return this||q};t.copy=function(u){Zp.prototype.copy.call(this||q,u);(this||q).object=u.object;return this||q};return D}(Zp),oza=function(z){function D(t,u){void 0===u&&(u=16776960);var B=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),G=new pa;G.setIndex(new za(B,1));G.setAttribute("position",new hb([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,
-1,-1,-1,1,-1,-1],3));u=z.call(this||q,G,new mo({color:u,toneMapped:!1}))||this||q;u.box=t;u.type="Box3Helper";u.geometry.computeBoundingSphere();return u}r(D,z);D.prototype.updateMatrixWorld=function(t){var u=(this||q).box;u.isEmpty()||(u.getCenter((this||q).position),u.getSize((this||q).scale),(this||q).scale.multiplyScalar(.5),z.prototype.updateMatrixWorld.call(this||q,t))};return D}(Zp),pza=function(z){function D(t,u,B){void 0===u&&(u=1);void 0===B&&(B=16776960);var G=new pa;G.setAttribute("position",
new hb([1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0],3));G.computeBoundingSphere();G=z.call(this||q,G,new mo({color:B,toneMapped:!1}))||this||q;G.type="PlaneHelper";G.plane=t;G.size=u;t=new pa;t.setAttribute("position",new hb([1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1],3));t.computeBoundingSphere();G.add(new La(t,new Ny({color:B,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})));return G}r(D,z);D.prototype.updateMatrixWorld=function(t){var u=-(this||q).plane.constant;
1E-8>Math.abs(u)&&(u=1E-8);(this||q).scale.set(.5*(this||q).size,.5*(this||q).size,u);(this||q).children[0].material.side=0>u?1:0;this.lookAt((this||q).plane.normal);z.prototype.updateMatrixWorld.call(this||q,t)};return D}(lv),Wfa=new cc,fS,m0,qza=function(z){function D(u,B,G,K,O,U){void 0===u&&(u=new cc(0,0,1));void 0===B&&(B=new cc(0,0,0));void 0===G&&(G=1);void 0===K&&(K=16776960);void 0===O&&(O=.2*G);void 0===U&&(U=.2*O);var V=z.call(this||q)||this||q;V.type="ArrowHelper";void 0===fS&&(fS=new pa,
fS.setAttribute("position",new hb([0,0,0,0,1,0],3)),m0=new EG(0,.5,1,5,1),m0.translate(0,-.5,0));V.position.copy(B);V.line=new lv(fS,new mo({color:K,toneMapped:!1}));V.line.matrixAutoUpdate=!1;V.add(V.line);V.cone=new La(m0,new Ny({color:K,toneMapped:!1}));V.cone.matrixAutoUpdate=!1;V.add(V.cone);V.setDirection(u);V.setLength(G,O,U);return V}r(D,z);var t=D.prototype;t.setDirection=function(u){.99999<u.y?(this||q).quaternion.set(0,0,0,1):-.99999>u.y?(this||q).quaternion.set(1,0,0,0):(Wfa.set(u.z,0,
-u.x).normalize(),(this||q).quaternion.setFromAxisAngle(Wfa,Math.acos(u.y)))};t.setLength=function(u,B,G){void 0===B&&(B=.2*u);void 0===G&&(G=.2*B);(this||q).line.scale.set(1,Math.max(1E-4,u-B),1);(this||q).line.updateMatrix();(this||q).cone.scale.set(G,B,G);(this||q).cone.position.y=u;(this||q).cone.updateMatrix()};t.setColor=function(u){(this||q).line.material.color.set(u);(this||q).cone.material.color.set(u)};t.copy=function(u){z.prototype.copy.call(this||q,u,!1);(this||q).line.copy(u.line);(this||
q).cone.copy(u.cone);return this||q};return D}(N),Xfa=function(z){function D(t){void 0===t&&(t=1);var u=[0,0,0,t,0,0,0,0,0,0,t,0,0,0,0,0,0,t];t=new pa;t.setAttribute("position",new hb(u,3));t.setAttribute("color",new hb([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3));u=new mo({vertexColors:!0,toneMapped:!1});t=z.call(this||q,t,u)||this||q;t.type="AxesHelper";return t}r(D,z);return D}(Zp),Yfa=new Float32Array(1),rza=new Int32Array(Yfa.buffer),Wy,bx=Math.pow(2,8),Zfa=[.125,.215,.35,.446,.526,.582],$fa=
5+Zfa.length,cx=(Wy={},Wy[3E3]=0,Wy[3001]=1,Wy[3002]=2,Wy[3004]=3,Wy[3005]=4,Wy[3006]=5,Wy[3007]=6,Wy),MD=new Ny({side:1,depthWrite:!1,depthTest:!1}),sza=new La(new yD,MD),n0=new FK,o0=function(){for(var z=[],D=[],t=[],u=8,B=0;B<$fa;B++){var G=Math.pow(2,u);D.push(G);var K=1/G;4<B?K=Zfa[B-8+4-1]:0==B&&(K=0);t.push(K);K=1/(G-1);G=-K/2;K=1+K/2;var O=[G,G,K,G,K,K,G,G,K,K,G,K];G=new Float32Array(108);K=new Float32Array(72);for(var U=new Float32Array(36),V=0;6>V;V++){var ca=V%3*2/3-1,qa=2<V?0:-1;G.set([ca,
qa,0,ca+2/3,qa,0,ca+2/3,qa+1,0,ca,qa,0,ca+2/3,qa+1,0,ca,qa+1,0],18*V);K.set(O,12*V);U.set([V,V,V,V,V,V],6*V)}O=new pa;O.setAttribute("position",new za(G,3));O.setAttribute("uv",new za(K,2));O.setAttribute("faceIndex",new za(U,1));z.push(O);4<u&&u--}return{_lodPlanes:z,_sizeLods:D,_sigmas:t}}(),HK=o0._lodPlanes,aga=o0._sizeLods,gS=o0._sigmas,bga=new jg,p0=null,ND=(1+Math.sqrt(5))/2,HG=1/ND,cga=[new cc(1,1,1),new cc(-1,1,1),new cc(1,1,-1),new cc(-1,1,-1),new cc(0,ND,HG),new cc(0,ND,-HG),new cc(HG,0,
ND),new cc(-HG,0,ND),new cc(ND,HG,0),new cc(-ND,HG,0)],tza=function(){function z(t){(this||q)._renderer=t;(this||q)._pingPongRenderTarget=null;t=new Float32Array(20);var u=new cc(0,1,0);t=new oG({name:"SphericalGaussianBlur",defines:{n:20},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:t},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:u},inputEncoding:{value:cx[3E3]},outputEncoding:{value:cx[3E3]}},vertexShader:k_(),fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t"+
l_()+"\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t",
blending:0,depthTest:!1,depthWrite:!1});(this||q)._blurMaterial=t;(this||q)._equirectShader=null;(this||q)._cubemapShader=null;this._compileMaterial((this||q)._blurMaterial)}var D=z.prototype;D.fromScene=function(t,u,B,G){void 0===u&&(u=0);void 0===B&&(B=.1);void 0===G&&(G=100);p0=(this||q)._renderer.getRenderTarget();var K=this._allocateTargets();this._sceneToCubeUV(t,B,G,K);0<u&&this._blur(K,0,0,u);this._applyPMREM(K);this._cleanup(K);return K};D.fromEquirectangular=function(t){return this._fromTexture(t)};
D.fromCubemap=function(t){return this._fromTexture(t)};D.compileCubemapShader=function(){null===(this||q)._cubemapShader&&((this||q)._cubemapShader=Cea(),this._compileMaterial((this||q)._cubemapShader))};D.compileEquirectangularShader=function(){null===(this||q)._equirectShader&&((this||q)._equirectShader=Bea(),this._compileMaterial((this||q)._equirectShader))};D.dispose=function(){(this||q)._blurMaterial.dispose();null!==(this||q)._cubemapShader&&(this||q)._cubemapShader.dispose();null!==(this||
q)._equirectShader&&(this||q)._equirectShader.dispose();for(var t=0;t<HK.length;t++)HK[t].dispose()};D._cleanup=function(t){(this||q)._pingPongRenderTarget.dispose();(this||q)._renderer.setRenderTarget(p0);t.scissorTest=!1;nR(t,0,0,t.width,t.height)};D._fromTexture=function(t){p0=(this||q)._renderer.getRenderTarget();var u=this._allocateTargets(t);this._textureToCubeUV(t,u);this._applyPMREM(u);this._cleanup(u);return u};D._allocateTargets=function(t){var u=void 0===t||1009!==t.type?!1:3E3===t.encoding||
3001===t.encoding||3007===t.encoding;u={magFilter:1003,minFilter:1003,generateMipmaps:!1,type:1009,format:1023,encoding:u?t.encoding:3002,depthBuffer:!1};var B=Aea(u);B.depthBuffer=t?!1:!0;(this||q)._pingPongRenderTarget=Aea(u);return B};D._compileMaterial=function(t){t=new La(HK[0],t);(this||q)._renderer.compile(t,n0)};D._sceneToCubeUV=function(t,u,B,G){u=new Gb(90,1,u,B);B=[1,-1,1,1,1,1];var K=[1,1,1,-1,-1,-1],O=(this||q)._renderer,U=O.autoClear,V=O.outputEncoding,ca=O.toneMapping;O.getClearColor(bga);
O.toneMapping=0;O.outputEncoding=3E3;var qa=O.autoClear=!1,Ea=t.background;Ea?Ea.isColor&&(MD.color.copy(Ea).convertSRGBToLinear(),t.background=null,qa=zea(MD.color),MD.opacity=qa,qa=!0):(MD.color.copy(bga).convertSRGBToLinear(),qa=zea(MD.color),MD.opacity=qa,qa=!0);for(Ea=0;6>Ea;Ea++){var Ra=Ea%3;0==Ra?(u.up.set(0,B[Ea],0),u.lookAt(K[Ea],0,0)):1==Ra?(u.up.set(0,0,B[Ea]),u.lookAt(0,K[Ea],0)):(u.up.set(0,B[Ea],0),u.lookAt(0,0,K[Ea]));nR(G,Ra*bx,2<Ea?bx:0,bx,bx);O.setRenderTarget(G);qa&&O.render(sza,
u);O.render(t,u)}O.toneMapping=ca;O.outputEncoding=V;O.autoClear=U};D._textureToCubeUV=function(t,u){var B=(this||q)._renderer;t.isCubeTexture?null==(this||q)._cubemapShader&&((this||q)._cubemapShader=Cea()):null==(this||q)._equirectShader&&((this||q)._equirectShader=Bea());var G=t.isCubeTexture?(this||q)._cubemapShader:(this||q)._equirectShader,K=new La(HK[0],G);G=G.uniforms;G.envMap.value=t;t.isCubeTexture||G.texelSize.value.set(1/t.image.width,1/t.image.height);G.inputEncoding.value=cx[t.encoding];
G.outputEncoding.value=cx[u.texture.encoding];nR(u,0,0,3*bx,2*bx);B.setRenderTarget(u);B.render(K,n0)};D._applyPMREM=function(t){var u=(this||q)._renderer,B=u.autoClear;u.autoClear=!1;for(var G=1;G<$fa;G++)this._blur(t,G-1,G,Math.sqrt(gS[G]*gS[G]-gS[G-1]*gS[G-1]),cga[(G-1)%cga.length]);u.autoClear=B};D._blur=function(t,u,B,G,K){var O=(this||q)._pingPongRenderTarget;this._halfBlur(t,O,u,B,G,"latitudinal",K);this._halfBlur(O,t,B,B,G,"longitudinal",K)};D._halfBlur=function(t,u,B,G,K,O,U){var V=(this||
q)._renderer,ca=(this||q)._blurMaterial;"latitudinal"!==O&&"longitudinal"!==O&&console.error("blur direction must be either latitudinal or longitudinal!");var qa=new La(HK[G],ca);ca=ca.uniforms;var Ea=aga[B]-1;Ea=isFinite(K)?Math.PI/(2*Ea):2*Math.PI/39;var Ra=K/Ea,Ua=isFinite(K)?1+Math.floor(3*Ra):20;20<Ua&&console.warn("sigmaRadians, "+K+", is too large and will clip, as it requested "+Ua+" samples when the maximum is set to 20");K=[];for(var ub=0,nb=0;20>nb;++nb){var ec=nb/Ra;ec=Math.exp(-ec*ec/
2);K.push(ec);0==nb?ub+=ec:nb<Ua&&(ub+=2*ec)}for(Ra=0;Ra<K.length;Ra++)K[Ra]/=ub;ca.envMap.value=t.texture;ca.samples.value=Ua;ca.weights.value=K;ca.latitudinal.value="latitudinal"===O;U&&(ca.poleAxis.value=U);ca.dTheta.value=Ea;ca.mipInt.value=8-B;ca.inputEncoding.value=cx[t.texture.encoding];ca.outputEncoding.value=cx[t.texture.encoding];t=aga[G];nR(u,3*Math.max(0,bx-2*t),(0===G?0:2*bx)+2*t*(4<G?G-8+4:0),3*t,2*t);V.setRenderTarget(u);V.render(qa,n0)};return z}();$p.create=function(z,D){console.log("THREE.Curve.create() has been deprecated");
z.prototype=Object.create($p.prototype);z.prototype.constructor=z;z.prototype.getPoint=D;return z};DK.prototype.fromPoints=function(z){console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints().");return this.setFromPoints(z)};Sfa.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")};Pfa.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")};jm.prototype.extractUrlBase=
function(z){console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead.");return h0.extractUrlBase(z)};jm.Handlers={add:function(){console.error("THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead.")},get:function(){console.error("THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead.")}};GG.prototype.center=function(z){console.warn("THREE.Box2: .center() has been renamed to .getCenter().");
return this.getCenter(z)};GG.prototype.empty=function(){console.warn("THREE.Box2: .empty() has been renamed to .isEmpty().");return this.isEmpty()};GG.prototype.isIntersectionBox=function(z){console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox().");return this.intersectsBox(z)};GG.prototype.size=function(z){console.warn("THREE.Box2: .size() has been renamed to .getSize().");return this.getSize(z)};Tq.prototype.center=function(z){console.warn("THREE.Box3: .center() has been renamed to .getCenter().");
return this.getCenter(z)};Tq.prototype.empty=function(){console.warn("THREE.Box3: .empty() has been renamed to .isEmpty().");return this.isEmpty()};Tq.prototype.isIntersectionBox=function(z){console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox().");return this.intersectsBox(z)};Tq.prototype.isIntersectionSphere=function(z){console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere().");return this.intersectsSphere(z)};Tq.prototype.size=function(z){console.warn("THREE.Box3: .size() has been renamed to .getSize().");
return this.getSize(z)};hB.prototype.empty=function(){console.warn("THREE.Sphere: .empty() has been renamed to .isEmpty().");return this.isEmpty()};VJ.prototype.setFromMatrix=function(z){console.warn("THREE.Frustum: .setFromMatrix() has been renamed to .setFromProjectionMatrix().");return this.setFromProjectionMatrix(z)};Nfa.prototype.center=function(z){console.warn("THREE.Line3: .center() has been renamed to .getCenter().");return this.getCenter(z)};Fh.random16=function(){console.warn("THREE.Math: .random16() has been deprecated. Use Math.random() instead.");
return Math.random()};Fh.nearestPowerOfTwo=function(z){console.warn("THREE.Math: .nearestPowerOfTwo() has been renamed to .floorPowerOfTwo().");return Fh.floorPowerOfTwo(z)};Fh.nextPowerOfTwo=function(z){console.warn("THREE.Math: .nextPowerOfTwo() has been renamed to .ceilPowerOfTwo().");return Fh.ceilPowerOfTwo(z)};Cn.prototype.flattenToArrayOffset=function(z,D){console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead.");return this.toArray(z,D)};Cn.prototype.multiplyVector3=
function(z){console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead.");return z.applyMatrix3(this||q)};Cn.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")};Cn.prototype.applyToBufferAttribute=function(z){console.warn("THREE.Matrix3: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix3( matrix ) instead.");return z.applyMatrix3(this||q)};Cn.prototype.applyToVector3Array=
function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")};Cn.prototype.getInverse=function(z){console.warn("THREE.Matrix3: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead.");return this.copy(z).invert()};Ug.prototype.extractPosition=function(z){console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition().");return this.copyPosition(z)};Ug.prototype.flattenToArrayOffset=function(z,D){console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead.");
return this.toArray(z,D)};Ug.prototype.getPosition=function(){console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead.");return(new cc).setFromMatrixColumn(this||q,3)};Ug.prototype.setRotationFromQuaternion=function(z){console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion().");return this.makeRotationFromQuaternion(z)};Ug.prototype.multiplyToArray=function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")};
Ug.prototype.multiplyVector3=function(z){console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead.");return z.applyMatrix4(this||q)};Ug.prototype.multiplyVector4=function(z){console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead.");return z.applyMatrix4(this||q)};Ug.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")};Ug.prototype.rotateAxis=
function(z){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead.");z.transformDirection(this||q)};Ug.prototype.crossVector=function(z){console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead.");return z.applyMatrix4(this||q)};Ug.prototype.translate=function(){console.error("THREE.Matrix4: .translate() has been removed.")};Ug.prototype.rotateX=function(){console.error("THREE.Matrix4: .rotateX() has been removed.")};
Ug.prototype.rotateY=function(){console.error("THREE.Matrix4: .rotateY() has been removed.")};Ug.prototype.rotateZ=function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")};Ug.prototype.rotateByAxis=function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")};Ug.prototype.applyToBufferAttribute=function(z){console.warn("THREE.Matrix4: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix4( matrix ) instead.");return z.applyMatrix4(this||q)};Ug.prototype.applyToVector3Array=
function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")};Ug.prototype.makeFrustum=function(z,D,t,u,B,G){console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead.");return this.makePerspective(z,D,u,t,B,G)};Ug.prototype.getInverse=function(z){console.warn("THREE.Matrix4: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead.");return this.copy(z).invert()};gv.prototype.isIntersectionLine=
function(z){console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine().");return this.intersectsLine(z)};lo.prototype.multiplyVector3=function(z){console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead.");return z.applyQuaternion(this||q)};lo.prototype.inverse=function(){console.warn("THREE.Quaternion: .inverse() has been renamed to invert().");return this.invert()};eB.prototype.isIntersectionBox=function(z){console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox().");
return this.intersectsBox(z)};eB.prototype.isIntersectionPlane=function(z){console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane().");return this.intersectsPlane(z)};eB.prototype.isIntersectionSphere=function(z){console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere().");return this.intersectsSphere(z)};Xp.prototype.area=function(){console.warn("THREE.Triangle: .area() has been renamed to .getArea().");return this.getArea()};Xp.prototype.barycoordFromPoint=
function(z,D){console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord().");return this.getBarycoord(z,D)};Xp.prototype.midpoint=function(z){console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint().");return this.getMidpoint(z)};Xp.prototypenormal=function(z){console.warn("THREE.Triangle: .normal() has been renamed to .getNormal().");return this.getNormal(z)};Xp.prototype.plane=function(z){console.warn("THREE.Triangle: .plane() has been renamed to .getPlane().");
return this.getPlane(z)};Xp.barycoordFromPoint=function(z,D,t,u,B){console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord().");return Xp.getBarycoord(z,D,t,u,B)};Xp.normal=function(z,D,t,u){console.warn("THREE.Triangle: .normal() has been renamed to .getNormal().");return Xp.getNormal(z,D,t,u)};lB.prototype.extractAllPoints=function(z){console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead.");return this.extractPoints(z)};lB.prototype.extrude=
function(z){console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead.");return new Vy(this||q,z)};lB.prototype.makeGeometry=function(z){console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead.");return new yK(this||q,z)};We.prototype.fromAttribute=function(z,D,t){console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute().");return this.fromBufferAttribute(z,D,t)};We.prototype.distanceToManhattan=function(z){console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo().");
return this.manhattanDistanceTo(z)};We.prototype.lengthManhattan=function(){console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength().");return this.manhattanLength()};cc.prototype.setEulerFromRotationMatrix=function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")};cc.prototype.setEulerFromQuaternion=function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")};
cc.prototype.getPositionFromMatrix=function(z){console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition().");return this.setFromMatrixPosition(z)};cc.prototype.getScaleFromMatrix=function(z){console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale().");return this.setFromMatrixScale(z)};cc.prototype.getColumnFromMatrix=function(z,D){console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn().");
return this.setFromMatrixColumn(D,z)};cc.prototype.applyProjection=function(z){console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead.");return this.applyMatrix4(z)};cc.prototype.fromAttribute=function(z,D,t){console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute().");return this.fromBufferAttribute(z,D,t)};cc.prototype.distanceToManhattan=function(z){console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo().");
return this.manhattanDistanceTo(z)};cc.prototype.lengthManhattan=function(){console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength().");return this.manhattanLength()};Ck.prototype.fromAttribute=function(z,D,t){console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute().");return this.fromBufferAttribute(z,D,t)};Ck.prototype.lengthManhattan=function(){console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength().");
return this.manhattanLength()};N.prototype.getChildByName=function(z){console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName().");return this.getObjectByName(z)};N.prototype.renderDepth=function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")};N.prototype.translate=function(z,D){console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead.");return this.translateOnAxis(D,z)};N.prototype.getWorldRotation=
function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")};N.prototype.applyMatrix=function(z){console.warn("THREE.Object3D: .applyMatrix() has been renamed to .applyMatrix4().");return this.applyMatrix4(z)};Object.defineProperties(N.prototype,{eulerOrder:{get:function(){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order.");return(this||q).rotation.order},set:function(z){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order.");
(this||q).rotation.order=z}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}});La.prototype.setDrawMode=function(){console.error("THREE.Mesh: .setDrawMode() has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")};
Object.defineProperties(La.prototype,{drawMode:{get:function(){console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode.");return 0},set:function(){console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}});Object.defineProperties(D_.prototype,{objects:{get:function(){console.warn("THREE.LOD: .objects has been renamed to .levels.");
return(this||q).levels}}});Object.defineProperty(E_.prototype,"useVertexTexture",{get:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")},set:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")}});aK.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")};Object.defineProperty($p.prototype,"__arcLengthDivisions",{get:function(){console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions.");
return(this||q).arcLengthDivisions},set:function(z){console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions.");(this||q).arcLengthDivisions=z}});Gb.prototype.setLens=function(z,D){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup.");void 0!==D&&((this||q).filmGauge=D);this.setFocalLength(z)};Object.defineProperties(pv.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},
shadowCameraFov:{set:function(z){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov.");(this||q).shadow.camera.fov=z}},shadowCameraLeft:{set:function(z){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left.");(this||q).shadow.camera.left=z}},shadowCameraRight:{set:function(z){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right.");(this||q).shadow.camera.right=z}},shadowCameraTop:{set:function(z){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top.");
(this||q).shadow.camera.top=z}},shadowCameraBottom:{set:function(z){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom.");(this||q).shadow.camera.bottom=z}},shadowCameraNear:{set:function(z){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near.");(this||q).shadow.camera.near=z}},shadowCameraFar:{set:function(z){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far.");(this||q).shadow.camera.far=z}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},
shadowBias:{set:function(z){console.warn("THREE.Light: .shadowBias is now .shadow.bias.");(this||q).shadow.bias=z}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(z){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width.");(this||q).shadow.mapSize.width=z}},shadowMapHeight:{set:function(z){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height.");(this||q).shadow.mapSize.height=z}}});
Object.defineProperties(za.prototype,{length:{get:function(){console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead.");return(this||q).array.length}},dynamic:{get:function(){console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead.");return 35048===(this||q).usage},set:function(){console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead.");this.setUsage(35048)}}});za.prototype.setDynamic=function(z){console.warn("THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead.");
this.setUsage(!0===z?35048:35044);return this||q};za.prototype.copyIndicesArray=function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")};za.prototype.setArray=function(){console.error("THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")};pa.prototype.addIndex=function(z){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex().");this.setIndex(z)};pa.prototype.addAttribute=
function(z,D,t){console.warn("THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute().");return D&&D.isBufferAttribute||D&&D.isInterleavedBufferAttribute?"index"===z?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(D),this||q):this.setAttribute(z,D):(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.setAttribute(z,new za(D,t)))};pa.prototype.addDrawCall=function(z,D,t){void 0!==t&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset.");
console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup().");this.addGroup(z,D)};pa.prototype.clearDrawCalls=function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups().");this.clearGroups()};pa.prototype.computeOffsets=function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")};pa.prototype.removeAttribute=function(z){console.warn("THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute().");return this.deleteAttribute(z)};
pa.prototype.applyMatrix=function(z){console.warn("THREE.BufferGeometry: .applyMatrix() has been renamed to .applyMatrix4().");return this.applyMatrix4(z)};Object.defineProperties(pa.prototype,{drawcalls:{get:function(){console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups.");return(this||q).groups}},offsets:{get:function(){console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups.");return(this||q).groups}}});Object.defineProperties(kK.prototype,{maxInstancedCount:{get:function(){console.warn("THREE.InstancedBufferGeometry: .maxInstancedCount has been renamed to .instanceCount.");
return(this||q).instanceCount},set:function(z){console.warn("THREE.InstancedBufferGeometry: .maxInstancedCount has been renamed to .instanceCount.");(this||q).instanceCount=z}}});Object.defineProperties(i_.prototype,{linePrecision:{get:function(){console.warn("THREE.Raycaster: .linePrecision has been deprecated. Use .params.Line.threshold instead.");return(this||q).params.Line.threshold},set:function(z){console.warn("THREE.Raycaster: .linePrecision has been deprecated. Use .params.Line.threshold instead.");
(this||q).params.Line.threshold=z}}});Object.defineProperties(Sq.prototype,{dynamic:{get:function(){console.warn("THREE.InterleavedBuffer: .length has been deprecated. Use .usage instead.");return 35048===(this||q).usage},set:function(z){console.warn("THREE.InterleavedBuffer: .length has been deprecated. Use .usage instead.");this.setUsage(z)}}});Sq.prototype.setDynamic=function(z){console.warn("THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead.");this.setUsage(!0===
z?35048:35044);return this||q};Sq.prototype.setArray=function(){console.error("THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")};Vy.prototype.getArrays=function(){console.error("THREE.ExtrudeGeometry: .getArrays() has been removed.")};Vy.prototype.addShapeList=function(){console.error("THREE.ExtrudeGeometry: .addShapeList() has been removed.")};Vy.prototype.addShape=function(){console.error("THREE.ExtrudeGeometry: .addShape() has been removed.")};
zR.prototype.dispose=function(){console.error("THREE.Scene: .dispose() has been removed.")};Object.defineProperties(Kfa.prototype,{dynamic:{set:function(){console.warn("THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.")}},onUpdate:{value:function(){console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead.");return this||q}}});Object.defineProperties(Y.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},
set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){console.warn("THREE.Material: .wrapRGB has been removed.");return new jg}},shading:{get:function(){console.error("THREE."+(this||q).type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(z){console.warn("THREE."+
(this||q).type+": .shading has been removed. Use the boolean .flatShading instead.");(this||q).flatShading=1===z}},stencilMask:{get:function(){console.warn("THREE."+(this||q).type+": .stencilMask has been removed. Use .stencilFuncMask instead.");return(this||q).stencilFuncMask},set:function(z){console.warn("THREE."+(this||q).type+": .stencilMask has been removed. Use .stencilFuncMask instead.");(this||q).stencilFuncMask=z}}});Object.defineProperties(UR.prototype,{metal:{get:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead.");
return!1},set:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")}}});Object.defineProperties(dB.prototype,{transparency:{get:function(){console.warn("THREE.MeshPhysicalMaterial: .transparency has been renamed to .transmission.");return(this||q).transmission},set:function(z){console.warn("THREE.MeshPhysicalMaterial: .transparency has been renamed to .transmission.");(this||q).transmission=z}}});Object.defineProperties(Zb.prototype,{derivatives:{get:function(){console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives.");
return(this||q).extensions.derivatives},set:function(z){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives.");(this||q).extensions.derivatives=z}}});al.prototype.clearTarget=function(z,D,t,u){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead.");this.setRenderTarget(z);this.clear(D,t,u)};al.prototype.animate=function(z){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop().");
this.setAnimationLoop(z)};al.prototype.getCurrentRenderTarget=function(){console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget().");return this.getRenderTarget()};al.prototype.getMaxAnisotropy=function(){console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy().");return(this||q).capabilities.getMaxAnisotropy()};al.prototype.getPrecision=function(){console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision.");
return(this||q).capabilities.precision};al.prototype.resetGLState=function(){console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset().");return(this||q).state.reset()};al.prototype.supportsFloatTextures=function(){console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' ).");return(this||q).extensions.get("OES_texture_float")};al.prototype.supportsHalfFloatTextures=function(){console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' ).");
return(this||q).extensions.get("OES_texture_half_float")};al.prototype.supportsStandardDerivatives=function(){console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' ).");return(this||q).extensions.get("OES_standard_derivatives")};al.prototype.supportsCompressedTextureS3TC=function(){console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' ).");return(this||q).extensions.get("WEBGL_compressed_texture_s3tc")};
al.prototype.supportsCompressedTexturePVRTC=function(){console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' ).");return(this||q).extensions.get("WEBGL_compressed_texture_pvrtc")};al.prototype.supportsBlendMinMax=function(){console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' ).");return(this||q).extensions.get("EXT_blend_minmax")};al.prototype.supportsVertexTextures=function(){console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures.");
return(this||q).capabilities.vertexTextures};al.prototype.supportsInstancedArrays=function(){console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' ).");return(this||q).extensions.get("ANGLE_instanced_arrays")};al.prototype.enableScissorTest=function(z){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest().");this.setScissorTest(z)};al.prototype.initMaterial=function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")};
al.prototype.addPrePlugin=function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")};al.prototype.addPostPlugin=function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")};al.prototype.updateShadowMap=function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")};al.prototype.setFaceCulling=function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")};al.prototype.allocTextureUnit=function(){console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")};
al.prototype.setTexture=function(){console.warn("THREE.WebGLRenderer: .setTexture() has been removed.")};al.prototype.setTexture2D=function(){console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.")};al.prototype.setTextureCube=function(){console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")};al.prototype.getActiveMipMapLevel=function(){console.warn("THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel().");return this.getActiveMipmapLevel()};
Object.defineProperties(al.prototype,{shadowMapEnabled:{get:function(){return(this||q).shadowMap.enabled},set:function(z){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled.");(this||q).shadowMap.enabled=z}},shadowMapType:{get:function(){return(this||q).shadowMap.type},set:function(z){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type.");(this||q).shadowMap.type=z}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},
set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}},context:{get:function(){console.warn("THREE.WebGLRenderer: .context has been removed. Use .getContext() instead.");return this.getContext()}},vr:{get:function(){console.warn("THREE.WebGLRenderer: .vr has been renamed to .xr");return(this||q).xr}},gammaInput:{get:function(){console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.");
return!1},set:function(){console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.")}},gammaOutput:{get:function(){console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead.");return!1},set:function(z){console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead.");(this||q).outputEncoding=!0===z?3001:3E3}},toneMappingWhitePoint:{get:function(){console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed.");
return 1},set:function(){console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed.")}}});Object.defineProperties(eea.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},
set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}});Object.defineProperties(Oy.prototype,{wrapS:{get:function(){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS.");
return(this||q).texture.wrapS},set:function(z){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS.");(this||q).texture.wrapS=z}},wrapT:{get:function(){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT.");return(this||q).texture.wrapT},set:function(z){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT.");(this||q).texture.wrapT=z}},magFilter:{get:function(){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter.");return(this||
q).texture.magFilter},set:function(z){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter.");(this||q).texture.magFilter=z}},minFilter:{get:function(){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter.");return(this||q).texture.minFilter},set:function(z){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter.");(this||q).texture.minFilter=z}},anisotropy:{get:function(){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy.");
return(this||q).texture.anisotropy},set:function(z){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy.");(this||q).texture.anisotropy=z}},offset:{get:function(){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset.");return(this||q).texture.offset},set:function(z){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset.");(this||q).texture.offset=z}},repeat:{get:function(){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat.");
return(this||q).texture.repeat},set:function(z){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat.");(this||q).texture.repeat=z}},format:{get:function(){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format.");return(this||q).texture.format},set:function(z){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format.");(this||q).texture.format=z}},type:{get:function(){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type.");return(this||q).texture.type},
set:function(z){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type.");(this||q).texture.type=z}},generateMipmaps:{get:function(){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps.");return(this||q).texture.generateMipmaps},set:function(z){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps.");(this||q).texture.generateMipmaps=z}}});Object.defineProperties(k0.prototype,{load:{value:function(z){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");
var D=this||q;(new yfa).load(z,function(t){D.setBuffer(t)});return this||q}},startTime:{set:function(){console.warn("THREE.Audio: .startTime is now .play( delay ).")}}});Gfa.prototype.getData=function(){console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData().");return this.getFrequencyData()};xR.prototype.updateCubeMap=function(z,D){console.warn("THREE.CubeCamera: .updateCubeMap() is now .update().");return this.update(z,D)};xR.prototype.clear=function(z,D,t,u){console.warn("THREE.CubeCamera: .clear() is now .renderTarget.clear().");
return(this||q).renderTarget.clear(z,D,t,u)};wD.crossOrigin=void 0;wD.loadTexture=function(z,D,t,u){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");var B=new kR;B.setCrossOrigin((this||q).crossOrigin);z=B.load(z,t,void 0,u);D&&(z.mapping=D);return z};wD.loadTextureCube=function(z,D,t,u){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");var B=new jfa;B.setCrossOrigin((this||q).crossOrigin);
z=B.load(z,t,void 0,u);D&&(z.mapping=D);return z};wD.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")};wD.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")};"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:"126"}}));"undefined"!==typeof window&&(window.__THREE__?
console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__="126");e.ACESFilmicToneMapping=4;e.AddEquation=100;e.AddOperation=2;e.AdditiveAnimationBlendMode=2501;e.AdditiveBlending=2;e.AlphaFormat=1021;e.AlwaysDepth=1;e.AlwaysStencilFunc=519;e.AmbientLight=e0;e.AmbientLightProbe=Afa;e.AnimationClip=AK;e.AnimationLoader=Oya;e.AnimationMixer=Jfa;e.AnimationObjectGroup=Ifa;e.AnimationUtils=zl;e.ArcCurve=R_;e.ArrayCamera=ZQ;e.ArrowHelper=qza;e.Audio=k0;e.AudioAnalyser=Gfa;
e.AudioContext=j0;e.AudioListener=Uya;e.AudioLoader=yfa;e.AxesHelper=Xfa;e.AxisHelper=function(z){console.warn("THREE.AxisHelper has been renamed to THREE.AxesHelper.");return new Xfa(z)};e.BackSide=1;e.BasicDepthPacking=3200;e.BasicShadowMap=0;e.BinaryTextureLoader=function(z){console.warn("THREE.BinaryTextureLoader has been renamed to THREE.DataTextureLoader.");return new jR(z)};e.Bone=bK;e.BooleanKeyframeTrack=CD;e.BoundingBoxHelper=function(z,D){console.warn("THREE.BoundingBoxHelper has been deprecated. Creating a THREE.BoxHelper instead.");
return new Vfa(z,D)};e.Box2=GG;e.Box3=Tq;e.Box3Helper=oza;e.BoxBufferGeometry=yD;e.BoxGeometry=yD;e.BoxHelper=Vfa;e.BufferAttribute=za;e.BufferGeometry=pa;e.BufferGeometryLoader=ufa;e.ByteType=1010;e.Cache=HD;e.Camera=Hc;e.CameraHelper=nza;e.CanvasRenderer=function(){console.error("THREE.CanvasRenderer has been removed")};e.CanvasTexture=hfa;e.CatmullRomCurve3=V_;e.CineonToneMapping=3;e.CircleBufferGeometry=HR;e.CircleGeometry=HR;e.ClampToEdgeWrapping=1001;e.Clock=Dfa;e.Color=jg;e.ColorKeyframeTrack=
b_;e.CompressedTexture=H_;e.CompressedTextureLoader=d_;e.ConeBufferGeometry=IR;e.ConeGeometry=IR;e.CubeCamera=xR;e.CubeReflectionMapping=301;e.CubeRefractionMapping=302;e.CubeTexture=zG;e.CubeTextureLoader=jfa;e.CubeUVReflectionMapping=306;e.CubeUVRefractionMapping=307;e.CubicBezierCurve=YR;e.CubicBezierCurve3=W_;e.CubicInterpolant=gR;e.CullFaceBack=1;e.CullFaceFront=2;e.CullFaceFrontBack=3;e.CullFaceNone=0;e.Curve=$p;e.CurvePath=lfa;e.CustomBlending=5;e.CustomToneMapping=5;e.CylinderBufferGeometry=
EG;e.CylinderGeometry=EG;e.Cylindrical=gza;e.DataTexture=jG;e.DataTexture2DArray=y_;e.DataTexture3D=z_;e.DataTextureLoader=jR;e.DataUtils={toHalfFloat:function(z){Yfa[0]=z;z=rza[0];var D=z>>16&32768,t=z>>12&2047,u=z>>23&255;return 103>u?D:142<u?D|31744|((255==u?0:1)&&z&8388607):113>u?(t|=2048,D|(t>>114-u)+(t>>113-u&1)):D=(D|u-112<<10|t>>1)+(t&1)}};e.DecrementStencilOp=7683;e.DecrementWrapStencilOp=34056;e.DefaultLoadingManager=tea;e.DepthFormat=1026;e.DepthStencilFormat=1027;e.DepthTexture=ifa;e.DirectionalLight=
d0;e.DirectionalLightHelper=mza;e.DiscreteInterpolant=hR;e.DodecahedronBufferGeometry=JR;e.DodecahedronGeometry=JR;e.DoubleSide=2;e.DstAlphaFactor=206;e.DstColorFactor=208;e.DynamicBufferAttribute=function(z,D){console.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setUsage( THREE.DynamicDrawUsage ) instead.");return(new za(z,D)).setUsage(35048)};e.DynamicCopyUsage=35050;e.DynamicDrawUsage=35048;e.DynamicReadUsage=35049;e.EdgesGeometry=J_;e.EdgesHelper=function(z,
D){console.warn("THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead.");return new Zp(new J_(z.geometry),new mo({color:void 0!==D?D:16777215}))};e.EllipseCurve=BK;e.EqualDepth=4;e.EqualStencilFunc=514;e.EquirectangularReflectionMapping=303;e.EquirectangularRefractionMapping=304;e.Euler=TJ;e.EventDispatcher=I;e.ExtrudeBufferGeometry=Vy;e.ExtrudeGeometry=Vy;e.FaceColors=1;e.FileLoader=tt;e.FlatShading=1;e.Float16BufferAttribute=gb;e.Float32Attribute=function(z,D){console.warn("THREE.Float32Attribute has been removed. Use new THREE.Float32BufferAttribute() instead.");
return new hb(z,D)};e.Float32BufferAttribute=hb;e.Float64Attribute=function(z,D){console.warn("THREE.Float64Attribute has been removed. Use new THREE.Float64BufferAttribute() instead.");return new ta(z,D)};e.Float64BufferAttribute=ta;e.FloatType=1015;e.Fog=B_;e.FogExp2=A_;e.Font=i0;e.FontLoader=Rya;e.FrontSide=0;e.Frustum=VJ;e.GLBufferAttribute=h_;e.GLSL1="100";e.GLSL3="300 es";e.GammaEncoding=3007;e.GreaterDepth=6;e.GreaterEqualDepth=5;e.GreaterEqualStencilFunc=518;e.GreaterStencilFunc=516;e.GridHelper=
Sfa;e.Group=FD;e.HalfFloatType=1016;e.HemisphereLight=Z_;e.HemisphereLightHelper=kza;e.HemisphereLightProbe=zfa;e.IcosahedronBufferGeometry=MR;e.IcosahedronGeometry=MR;e.ImageBitmapLoader=f_;e.ImageLoader=VR;e.ImageUtils=wD;e.ImmediateRenderObject=lK;e.IncrementStencilOp=7682;e.IncrementWrapStencilOp=34055;e.InstancedBufferAttribute=lR;e.InstancedBufferGeometry=kK;e.InstancedInterleavedBuffer=g_;e.InstancedMesh=cR;e.Int16Attribute=function(z,D){console.warn("THREE.Int16Attribute has been removed. Use new THREE.Int16BufferAttribute() instead.");
return new X(z,D)};e.Int16BufferAttribute=X;e.Int32Attribute=function(z,D){console.warn("THREE.Int32Attribute has been removed. Use new THREE.Int32BufferAttribute() instead.");return new fa(z,D)};e.Int32BufferAttribute=fa;e.Int8Attribute=function(z,D){console.warn("THREE.Int8Attribute has been removed. Use new THREE.Int8BufferAttribute() instead.");return new L(z,D)};e.Int8BufferAttribute=L;e.IntType=1013;e.InterleavedBuffer=Sq;e.InterleavedBufferAttribute=bB;e.Interpolant=$r;e.InterpolateDiscrete=
2300;e.InterpolateLinear=2301;e.InterpolateSmooth=2302;e.InvertStencilOp=5386;e.JSONLoader=function(){console.error("THREE.JSONLoader has been removed.")};e.KeepStencilOp=7680;e.KeyframeTrack=nv;e.LOD=D_;e.LatheBufferGeometry=NR;e.LatheGeometry=NR;e.Layers=QZ;e.LensFlare=function(){console.error("THREE.LensFlare has been moved to /examples/jsm/objects/Lensflare.js")};e.LessDepth=2;e.LessEqualDepth=3;e.LessEqualStencilFunc=515;e.LessStencilFunc=513;e.Light=pv;e.LightProbe=GK;e.Line=lv;e.Line3=Nfa;
e.LineBasicMaterial=mo;e.LineCurve=CK;e.LineCurve3=kfa;e.LineDashedMaterial=Q_;e.LineLoop=G_;e.LinePieces=1;e.LineSegments=Zp;e.LineStrip=0;e.LinearEncoding=3E3;e.LinearFilter=1006;e.LinearInterpolant=fK;e.LinearMipMapLinearFilter=1008;e.LinearMipMapNearestFilter=1007;e.LinearMipmapLinearFilter=1008;e.LinearMipmapNearestFilter=1007;e.LinearToneMapping=1;e.Loader=jm;e.LoaderUtils=h0;e.LoadingManager=c_;e.LogLuvEncoding=3003;e.LoopOnce=2200;e.LoopPingPong=2202;e.LoopRepeat=2201;e.LuminanceAlphaFormat=
1025;e.LuminanceFormat=1024;e.MOUSE={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2};e.Material=Y;e.MaterialLoader=tfa;e.Math=Fh;e.MathUtils=Fh;e.Matrix3=Cn;e.Matrix4=Ug;e.MaxEquation=104;e.Mesh=La;e.MeshBasicMaterial=Ny;e.MeshDepthMaterial=XQ;e.MeshDistanceMaterial=YQ;e.MeshFaceMaterial=function(z){console.warn("THREE.MeshFaceMaterial has been removed. Use an Array instead.");return z};e.MeshLambertMaterial=O_;e.MeshMatcapMaterial=P_;e.MeshNormalMaterial=N_;e.MeshPhongMaterial=UR;e.MeshPhysicalMaterial=
dB;e.MeshStandardMaterial=ax;e.MeshToonMaterial=M_;e.MinEquation=103;e.MirroredRepeatWrapping=1002;e.MixOperation=1;e.MultiMaterial=function(z){void 0===z&&(z=[]);console.warn("THREE.MultiMaterial has been removed. Use an Array instead.");z.isMultiMaterial=!0;z.materials=z;z.clone=function(){return z.slice()};return z};e.MultiplyBlending=4;e.MultiplyOperation=0;e.NearestFilter=1003;e.NearestMipMapLinearFilter=1005;e.NearestMipMapNearestFilter=1004;e.NearestMipmapLinearFilter=1005;e.NearestMipmapNearestFilter=
1004;e.NeverDepth=0;e.NeverStencilFunc=512;e.NoBlending=0;e.NoColors=0;e.NoToneMapping=0;e.NormalAnimationBlendMode=2500;e.NormalBlending=1;e.NotEqualDepth=7;e.NotEqualStencilFunc=517;e.NumberKeyframeTrack=gK;e.Object3D=N;e.ObjectLoader=Qya;e.ObjectSpaceNormalMap=1;e.OctahedronBufferGeometry=xK;e.OctahedronGeometry=xK;e.OneFactor=201;e.OneMinusDstAlphaFactor=207;e.OneMinusDstColorFactor=209;e.OneMinusSrcAlphaFactor=205;e.OneMinusSrcColorFactor=203;e.OrthographicCamera=FK;e.PCFShadowMap=1;e.PCFSoftShadowMap=
2;e.PMREMGenerator=tza;e.ParametricBufferGeometry=BD;e.ParametricGeometry=BD;e.Particle=function(z){console.warn("THREE.Particle has been renamed to THREE.Sprite.");return new DR(z)};e.ParticleBasicMaterial=function(z){console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial.");return new AD(z)};e.ParticleSystem=function(z,D){console.warn("THREE.ParticleSystem has been renamed to THREE.Points.");return new lG(z,D)};e.ParticleSystemMaterial=function(z){console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial.");
return new AD(z)};e.Path=DK;e.PerspectiveCamera=Gb;e.Plane=gv;e.PlaneBufferGeometry=UJ;e.PlaneGeometry=UJ;e.PlaneHelper=pza;e.PointCloud=function(z,D){console.warn("THREE.PointCloud has been renamed to THREE.Points.");return new lG(z,D)};e.PointCloudMaterial=function(z){console.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial.");return new AD(z)};e.PointLight=c0;e.PointLightHelper=iza;e.Points=lG;e.PointsMaterial=AD;e.PolarGridHelper=lza;e.PolyhedronBufferGeometry=kB;e.PolyhedronGeometry=
kB;e.PositionalAudio=Wya;e.PropertyBinding=sp;e.PropertyMixer=Hfa;e.QuadraticBezierCurve=ZR;e.QuadraticBezierCurve3=X_;e.Quaternion=lo;e.QuaternionKeyframeTrack=nG;e.QuaternionLinearInterpolant=iR;e.REVISION="126";e.RGBADepthPacking=3201;e.RGBAFormat=1023;e.RGBAIntegerFormat=1033;e.RGBA_ASTC_10x10_Format=37819;e.RGBA_ASTC_10x5_Format=37816;e.RGBA_ASTC_10x6_Format=37817;e.RGBA_ASTC_10x8_Format=37818;e.RGBA_ASTC_12x10_Format=37820;e.RGBA_ASTC_12x12_Format=37821;e.RGBA_ASTC_4x4_Format=37808;e.RGBA_ASTC_5x4_Format=
37809;e.RGBA_ASTC_5x5_Format=37810;e.RGBA_ASTC_6x5_Format=37811;e.RGBA_ASTC_6x6_Format=37812;e.RGBA_ASTC_8x5_Format=37813;e.RGBA_ASTC_8x6_Format=37814;e.RGBA_ASTC_8x8_Format=37815;e.RGBA_BPTC_Format=36492;e.RGBA_ETC2_EAC_Format=37496;e.RGBA_PVRTC_2BPPV1_Format=35843;e.RGBA_PVRTC_4BPPV1_Format=35842;e.RGBA_S3TC_DXT1_Format=33777;e.RGBA_S3TC_DXT3_Format=33778;e.RGBA_S3TC_DXT5_Format=33779;e.RGBDEncoding=3006;e.RGBEEncoding=3002;e.RGBEFormat=1023;e.RGBFormat=1022;e.RGBIntegerFormat=1032;e.RGBM16Encoding=
3005;e.RGBM7Encoding=3004;e.RGB_ETC1_Format=36196;e.RGB_ETC2_Format=37492;e.RGB_PVRTC_2BPPV1_Format=35841;e.RGB_PVRTC_4BPPV1_Format=35840;e.RGB_S3TC_DXT1_Format=33776;e.RGFormat=1030;e.RGIntegerFormat=1031;e.RawShaderMaterial=oG;e.Ray=eB;e.Raycaster=i_;e.RectAreaLight=f0;e.RedFormat=1028;e.RedIntegerFormat=1029;e.ReinhardToneMapping=2;e.RepeatWrapping=1E3;e.ReplaceStencilOp=7681;e.ReverseSubtractEquation=102;e.RingBufferGeometry=OR;e.RingGeometry=OR;e.SRGB8_ALPHA8_ASTC_10x10_Format=37851;e.SRGB8_ALPHA8_ASTC_10x5_Format=
37848;e.SRGB8_ALPHA8_ASTC_10x6_Format=37849;e.SRGB8_ALPHA8_ASTC_10x8_Format=37850;e.SRGB8_ALPHA8_ASTC_12x10_Format=37852;e.SRGB8_ALPHA8_ASTC_12x12_Format=37853;e.SRGB8_ALPHA8_ASTC_4x4_Format=37840;e.SRGB8_ALPHA8_ASTC_5x4_Format=37841;e.SRGB8_ALPHA8_ASTC_5x5_Format=37842;e.SRGB8_ALPHA8_ASTC_6x5_Format=37843;e.SRGB8_ALPHA8_ASTC_6x6_Format=37844;e.SRGB8_ALPHA8_ASTC_8x5_Format=37845;e.SRGB8_ALPHA8_ASTC_8x6_Format=37846;e.SRGB8_ALPHA8_ASTC_8x8_Format=37847;e.Scene=zR;e.SceneUtils={createMultiMaterialObject:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")},
detach:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")},attach:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")}};e.ShaderChunk=jj;e.ShaderLib=fv;e.ShaderMaterial=Zb;e.ShadowMaterial=L_;e.Shape=lB;e.ShapeBufferGeometry=yK;e.ShapeGeometry=yK;e.ShapePath=xfa;e.ShapeUtils=Uy;e.ShortType=1011;e.Skeleton=E_;e.SkeletonHelper=Pfa;e.SkinnedMesh=aK;e.SmoothShading=2;e.Sphere=hB;e.SphereBufferGeometry=zK;e.SphereGeometry=
zK;e.Spherical=fza;e.SphericalHarmonics3=g0;e.SplineCurve=$R;e.SpotLight=a0;e.SpotLightHelper=hza;e.Sprite=DR;e.SpriteMaterial=AR;e.SrcAlphaFactor=204;e.SrcAlphaSaturateFactor=210;e.SrcColorFactor=202;e.StaticCopyUsage=35046;e.StaticDrawUsage=35044;e.StaticReadUsage=35045;e.StereoCamera=Sya;e.StreamCopyUsage=35042;e.StreamDrawUsage=35040;e.StreamReadUsage=35041;e.StringKeyframeTrack=DD;e.SubtractEquation=101;e.SubtractiveBlending=3;e.TOUCH={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3};e.TangentSpaceNormalMap=
0;e.TetrahedronBufferGeometry=PR;e.TetrahedronGeometry=PR;e.TextBufferGeometry=QR;e.TextGeometry=QR;e.Texture=tp;e.TextureLoader=kR;e.TorusBufferGeometry=RR;e.TorusGeometry=RR;e.TorusKnotBufferGeometry=SR;e.TorusKnotGeometry=SR;e.Triangle=Xp;e.TriangleFanDrawMode=2;e.TriangleStripDrawMode=1;e.TrianglesDrawMode=0;e.TubeBufferGeometry=TR;e.TubeGeometry=TR;e.UVMapping=300;e.Uint16Attribute=function(z,D){console.warn("THREE.Uint16Attribute has been removed. Use new THREE.Uint16BufferAttribute() instead.");
return new ja(z,D)};e.Uint16BufferAttribute=ja;e.Uint32Attribute=function(z,D){console.warn("THREE.Uint32Attribute has been removed. Use new THREE.Uint32BufferAttribute() instead.");return new ua(z,D)};e.Uint32BufferAttribute=ua;e.Uint8Attribute=function(z,D){console.warn("THREE.Uint8Attribute has been removed. Use new THREE.Uint8BufferAttribute() instead.");return new Z(z,D)};e.Uint8BufferAttribute=Z;e.Uint8ClampedAttribute=function(z,D){console.warn("THREE.Uint8ClampedAttribute has been removed. Use new THREE.Uint8ClampedBufferAttribute() instead.");
return new R(z,D)};e.Uint8ClampedBufferAttribute=R;e.Uniform=Kfa;e.UniformsLib=Pf;e.UniformsUtils=dea;e.UnsignedByteType=1009;e.UnsignedInt248Type=1020;e.UnsignedIntType=1014;e.UnsignedShort4444Type=1017;e.UnsignedShort5551Type=1018;e.UnsignedShort565Type=1019;e.UnsignedShortType=1012;e.VSMShadowMap=3;e.Vector2=We;e.Vector3=cc;e.Vector4=Ck;e.VectorKeyframeTrack=hK;e.Vertex=function(z,D,t){console.warn("THREE.Vertex has been removed. Use THREE.Vector3 instead.");return new cc(z,D,t)};e.VertexColors=
2;e.VideoTexture=gfa;e.WebGL1Renderer=Qea;e.WebGLCubeRenderTarget=WQ;e.WebGLMultisampleRenderTarget=Eea;e.WebGLRenderTarget=Oy;e.WebGLRenderTargetCube=function(z,D,t){console.warn("THREE.WebGLRenderTargetCube( width, height, options ) is now WebGLCubeRenderTarget( size, options ).");return new WQ(z,t)};e.WebGLRenderer=al;e.WebGLUtils=fea;e.WireframeGeometry=K_;e.WireframeHelper=function(z,D){console.warn("THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead.");return new Zp(new K_(z.geometry),
new mo({color:void 0!==D?D:16777215}))};e.WrapAroundEnding=2402;e.XHRLoader=function(z){console.warn("THREE.XHRLoader has been renamed to THREE.FileLoader.");return new tt(z)};e.ZeroCurvatureEnding=2400;e.ZeroFactor=200;e.ZeroSlopeEnding=2401;e.ZeroStencilOp=0;e.sRGBEncoding=3001;Object.defineProperty(e,"__esModule",{value:!0})});return gG}(),Ci=lively.FreezerRuntime.recorderFor("WebGLCanvas/index.js");Ci.Canvas=SJ;Ci.THREE=uza;var up=Ci.THREE;Ci.Scene=up.Scene;Ci.SpotLight=up.SpotLight;Ci.MeshBasicMaterial=
up.MeshBasicMaterial;Ci.BackSide=up.BackSide;Ci.ImageUtils=up.ImageUtils;Ci.Color=up.Color;Ci.MeshPhongMaterial=up.MeshPhongMaterial;Ci.SphereGeometry=up.SphereGeometry;Ci.Mesh=up.Mesh;Ci.DirectionalLight=up.DirectionalLight;Ci.AmbientLight=up.AmbientLight;Ci.WebGLRenderer=up.WebGLRenderer;Ci.PerspectiveCamera=up.PerspectiveCamera;Ci.TextureLoader=up.TextureLoader;Ci.BoxGeometry=up.BoxGeometry;Ci.MeshNormalMaterial=up.MeshNormalMaterial;Ci.easings=Rr;var dga=function(b){var e=lively.FreezerRuntime.recorderFor("WebGLCanvas/index.js"),
l=e.hasOwnProperty("WebGLCanvas")&&"function"===typeof e.WebGLCanvas?e.WebGLCanvas:e.WebGLCanvas=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Pb(l,b,[{key:"context",get:function(){return navigator.webdriver?this._canvas&&this._canvas.getContext("2d"):this._canvas&&this._canvas.getContext(this.contextType,{preserveDrawingBuffer:!0})}},{key:"restoreContent",value:function(a,f){this.renderer&&a&&a!==f&&(this.owner.context.drawImage(this.renderer.getContext().canvas,
0,0),this.renderer=new Ci.WebGLRenderer({context:this.context,antialiasing:!0}),this.renderer.setSize(this.width,this.height))}},{key:"onExtentChanged",value:function(){}},{key:"relayout",value:function(){var a=this;this.renderLoop&&(setTimeout(function(){return a.owner.context.drawImage(a.renderer.getContext().canvas,0,0)}),this.renderer.setSize(this.width,this.height),this.camera.aspect=this.width/this.height,this.camera.updateProjectionMatrix())}},{key:"stopAnimation",value:function(){this.renderLoop&&
(cancelAnimationFrame(this.renderLoop),this.renderer.dispose())}},{key:"renderGlobe",value:function(){var a=this;this.stopAnimation();this.withContextDo(function(f){var m=a.width,r=a.height,v=new Ci.Scene,x=new Ci.PerspectiveCamera(45,m/r,.01,1E3);x.position.z=1;x.position.x=.4;x.position.y=.25;a.camera=x;v.add(new Ci.AmbientLight(3355443));var y=new Ci.SpotLight(16777215,1,200,Math.PI/2,1);y.position.set(1,1,0);y.castShadow=!0;y.shadow.mapSize.width=1024;y.shadow.mapSize.height=1024;y.shadow.camera.near=
10;y.shadow.camera.far=100;y.shadow.bias=.01;v.add(y);var E=function(I,J){var P=new Ci.TextureLoader;return new Ci.Mesh(new Ci.SphereGeometry(I,J,J),new Ci.MeshPhongMaterial({map:P.load("assets/globe-textures/2_no_clouds_4k.jpg"),bumpMap:P.load("assets/globe-textures/elev_bump_4k.jpg"),bumpScale:.005,shininess:5,specularMap:P.load("assets/globe-textures/water_4k.png"),specular:new Ci.Color("grey")}))}(.5,32);E.rotation.y=5.2;v.add(E);var F=function(I,J){var P=new Ci.TextureLoader;return new Ci.Mesh(new Ci.SphereGeometry(I+
.003,J,J),new Ci.MeshPhongMaterial({map:P.load("assets/globe-textures/fair_clouds_4k.png"),transparent:!0}))}(.5,32);F.rotation.y=5.2;v.add(F);y=function(I,J){var P=new Ci.TextureLoader;return new Ci.Mesh(new Ci.SphereGeometry(I,J,J),new Ci.MeshBasicMaterial({map:P.load("assets/globe-textures//galaxy_starfield.png"),side:Ci.BackSide}))}(90,64);v.add(y);a.renderer=new Ci.WebGLRenderer({context:f,antialias:!0});a.renderer.setSize(m,r);a.limitLoop(function(){if(!document.body.contains(a.renderer.getContext().canvas)){if(a.removeScheduled)return;
a.removeScheduled=setTimeout(function(){document.body.contains(a.renderer.getContext().canvas)||a.stopAnimation()},5E3)}E.rotation.y+=5E-4;F.rotation.y+=5E-4;a.renderer.render(v,x)});a.camera.position.z=1;a.camera.position.x=.4;a.camera.position.y=.25})}},{key:"limitLoop",value:function(a,f){var m=this,r=(new Date).getTime(),v=this,x;return(x=function(y){v.renderLoop=requestAnimationFrame(x);y=(new Date).getTime();var E=y-r,F=1E3/(f||m.fps);E>F&&(r=y-E%F,a(),v.firstFrameRendered=!0)})(0)}}],[{key:Symbol.for("__LivelyClassName__"),
get:function(){return"WebGLCanvas"}},{key:"properties",get:function(){return{fps:{}}}}],e,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"WebGLCanvas",version:"0.1.1-56"}}},{start:407,end:6004})}(Ci.Canvas);dga=Ci.WebGLCanvas;Ci.default=dga;var si=lively.FreezerRuntime.recorderFor("lively.components/buttons.js");si.Morph=ql;si.morph=
qc;si.Icon=Rp;si.touchInputDevice=Sr;si.Rectangle=He;si.LinearGradient=zn;si.Color=xg;si.pt=Ei;si.signal=Xl;si.connect=Dl;si.arr=Mf;si.obj=ng;si.Closure=ek;var IG=Ha("bo",function(b){var e=lively.FreezerRuntime.recorderFor("lively.components/buttons.js"),l=e.hasOwnProperty("Button")&&"function"===typeof e.Button?e.Button:e.Button=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Pb(l,b,[{key:Symbol.for("lively-instance-initialize"),
value:function(a){Pb._get(Object.getPrototypeOf(l.prototype),Symbol.for("lively-instance-initialize"),this).call(this,a)}},{key:"__additionally_serialize__",value:function(a,f,m,r){Pb._get(Object.getPrototypeOf(l.prototype),"__additionally_serialize__",this).call(this,a,f,m,r);r("fontSize",this.fontSize);this.label!=this.labelMorph.value&&r("label",this.labelMorph.value)}},{key:"isButton",get:function(){return!0}},{key:"enable",value:function(){this.deactivated=!1}},{key:"disable",value:function(){this.deactivated=
!0}},{key:"onChange",value:function(a){var f=a.prop;if(this.label)switch(f){case "extent":case "fontSize":case "fontFamily":this.relayout();break;case "padding":this.fit()}return Pb._get(Object.getPrototypeOf(l.prototype),"onChange",this).call(this,a)}},{key:"onSubmorphChange",value:function(a,f){f===this.labelMorph&&"extent"===a.prop&&this.relayout();return Pb._get(Object.getPrototypeOf(l.prototype),"onSubmorphChange",this).call(this,a,f)}},{key:"fitLabelMorph",value:function(){var a=this;this.labelMorph.whenFontLoaded().then(function(){a.labelMorph.invalidateTextLayout();
a.labelMorph.fit()})}},{key:"relayout",value:function(){var a=this.labelMorph;if(a&&!this._relayouting){this._relayouting=!0;try{var f=this.padding,m=f.top(),r=f.bottom(),v=f.left(),x=f.right(),y=a.height+m+r,E=a.width+v+x;y>this.height&&(this.height=y);E>this.width&&(this.width=E);var F=this.innerBounds().insetByRect(f);a.center=F.center().subPt(this.origin)}finally{this._relayouting=!1}}}},{key:"fit",value:function(){var a=this.padding,f=this.labelMorph;f.fit();this.extent=a.bottomLeft().addPt(a.bottomRight()).addPt(f.extent);
this.relayout();return this}},{key:"trigger",value:function(){try{si.signal(this,"fire"),"function"===typeof this.action&&this.action()}catch(f){var a=this.world();a?a.logError(f):console.error(f)}}},{key:"considerPress",value:function(a){return si.touchInputDevice?!0:this.innerBoundsContainsPoint(a.positionIn(this))}},{key:"onMouseDown",value:function(a){Pb._get(Object.getPrototypeOf(l.prototype),"onMouseDown",this).call(this,a);a.isAltDown()||this.deactivated||!this.considerPress(a)||(this.pressed=
{originalFill:this.fill})}},{key:"onMouseUp",value:function(a){Pb._get(Object.getPrototypeOf(l.prototype),"onMouseUp",this).call(this,a);a.isClickTarget(this)&&this.pressed&&(this.trigger(),this.pressed=null)}},{key:"onDragStart",value:function(a){si.touchInputDevice?(this.draggable=!0,this.pressed=null):Pb._get(Object.getPrototypeOf(l.prototype),"onDragStart",this).call(this,a)}},{key:"onDrag",value:function(a){}},{key:"onHoverOut",value:function(a){Pb._get(Object.getPrototypeOf(l.prototype),"onHoverOut",
this).call(this,a);!si.touchInputDevice&&this.pressed&&a.isClickTarget(this)&&(this.pressed=null)}},{key:"onHoverIn",value:function(a){Pb._get(Object.getPrototypeOf(l.prototype),"onHoverIn",this).call(this,a);si.touchInputDevice||this.deactivated||!a.isClickTarget(this)||(this.pressed={originalFill:this.fill})}},{key:"interactivelyChangeLabel",value:function(){var a=this,f;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){if(1==m.nextAddress)return m.yield(a.world().prompt("edit button label",
{input:a.labelMorph.textString,historyId:"lively.morphic-button-edit-label-hist"}),2);f=m.yieldResult;"string"===typeof f&&(a.label=f);m.jumpToEnd()})}},{key:"menuItems",value:function(){var a=this,f=Pb._get(Object.getPrototypeOf(l.prototype),"menuItems",this).call(this);f.unshift({isDivider:!0});f.unshift(["change label",function(){return a.interactivelyChangeLabel()}]);return f}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Button"}},{key:"properties",get:function(){return{padding:{isStyleProp:!0,
defaultValue:si.Rectangle.inset(5,2)},draggable:{defaultValue:!1},extent:{defaultValue:si.pt(100,20)},borderColor:{defaultValue:si.Color.gray},borderWidth:{defaultValue:1},borderRadius:{defaultValue:5},nativeCursor:{defaultValue:"pointer"},fill:{defaultValue:new si.LinearGradient({stops:[{offset:0,color:si.Color.white},{offset:1,color:si.Color.rgb(236,240,241)}],vector:0})},deactivated:{group:"button",defaultValue:!1,after:["labelMorph"],set:function(a){this.setProperty("deactivated",a);this.nativeCursor=
a?"not-allowed":"pointer";this.labelMorph.opacity=a?.3:1}},pressed:{group:"_internal",defaultValue:null,set:function(a){this.getProperty("pressed");this.setProperty("pressed",a)}},fontSize:{group:"button styling",derived:!0,type:"Number",min:4,isStyleProp:!0,after:["label"],set:function(a){this.labelMorph.fontSize=a},get:function(){return this.labelMorph.fontSize}},fontColor:{group:"button styling",derived:!0,isStyleProp:!0,after:["labelMorph"],set:function(a){this.labelMorph.fontColor=a},get:function(){return this.labelMorph.fontColor}},
labelMorph:{group:"_internal",after:["submorphs"],serialize:!1,initialize:function(){this.labelMorph=this.getSubmorphNamed("label")||this.addMorph({type:"label",name:"label",value:"no label yet"})},get:function(){return this.getSubmorphNamed("label")},set:function(a){var f=this.labelMorph;f&&f.remove();a.name="label";a.reactsToPointer=!1;this.addMorphAt(a,0)}},labelWithTextAttributes:{group:"_internal",after:["labelMorph"],derived:!0,get:function(){return this.labelMorph.textAndAttributes},set:function(a){this.labelMorph.textAndAttributes=
a}},label:{group:"button",after:["labelMorph"],isStyleProp:!0,type:"RichText",set:function(a){a.isMorph?(this.setProperty("label",a.value),this.labelMorph=a):(this.setProperty("label",a),this.labelMorph.value=a,this.labelMorph._parametrizedProps&&(this.labelMorph._parametrizedProps.value=a));this.fitLabelMorph()}},fire:{group:"button",derived:!0,readOnly:!0,isSignal:!0},action:{serialize:!1}}}}],e,{pathInPackage:function(){return"buttons.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:251,end:8293})}(si.Morph));si.Button=IG;si.Button=IG;si.Button=IG;var IK=function(b){var e=lively.FreezerRuntime.recorderFor("lively.components/buttons.js"),l=e.hasOwnProperty("RadioButton")&&"function"===typeof e.RadioButton?e.RadioButton:e.RadioButton=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return Pb(l,b,[{key:"getMaster",value:function(a){return a?"styleguide://SystemPrompts/prompts/buttons/selection/selected":"styleguide://SystemPrompts/prompts/buttons/selection/unselected"}},{key:"reset",value:function(){var a=this.indicator;a.borderWidth=1;a.borderColor=si.Color.gray;this.selected=!1;si.connect(a,"onMouseUp",this,"select")}},{key:"morph",get:function(){var a=this.indicator;return this.submorphs.find(function(f){return f!==a})}},{key:"morph",set:function(a){var f=this.indicator;
this.submorphs.forEach(function(m){m!==f&&m.remove()});a.position=si.pt(50,0);this.addMorph(a)}},{key:"value",get:function(){if(!this.valueFn){try{var a=JSON.parse(this.valueFunctionString)}catch(f){a=this.valueFunctionString}this.valueFn=si.Closure.fromSource(a).recreateFunc()}return this.morph?this.valueFn(this.morph):void 0}},{key:"onMouseDown",value:function(a){this.select()}},{key:"select",value:function(){this.selected=!0;this.owner.setSelection(this)}}],[{key:Symbol.for("__LivelyClassName__"),
get:function(){return"RadioButton"}},{key:"properties",get:function(){return{indicator:{get:function(){return this.getSubmorphNamed("indicator")}},master:{after:["selected"],initialize:function(){this.master={auto:this.getMaster(this.selected)}}},selectionColor:{},selectionStyle:{},selected:{after:["indicator"],defaultValue:!1,set:function(a){var f=this;this.whenRendered().then(function(m){f.master={auto:f.getMaster(a)}});this.setProperty("selected",!!a)}},valueFunctionString:{defaultValue:'"function (morph) { return morph.value; }"',
set:function(a){this.setProperty("valueFunctionString",a.toString());this.valueFn=void 0}},submorphs:{initialize:function(){this.submorphs=[{type:"ellipse",name:"indicator"}]}}}}}],e,{pathInPackage:function(){return"buttons.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:8304,end:10681})}(si.Morph);si.RadioButton=IK;si.RadioButton=
IK;si.RadioButton=IK;var JK=function(b){var e=lively.FreezerRuntime.recorderFor("lively.components/buttons.js"),l=e.hasOwnProperty("RadioButtonGroup")&&"function"===typeof e.RadioButtonGroup?e.RadioButtonGroup:e.RadioButtonGroup=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Pb(l,b,[{key:"reset",value:function(){this.submorphs.forEach(function(a){return a.reset()});this.layout.layoutableSubmorphs[0].selected=!0}},
{key:"removeAllButtons",value:function(){this.removeAllMorphs();this.height=10}},{key:"addButton",value:function(a,f){var m=new si.RadioButton;m.reset();m.morph=a;void 0!=f&&(m.internalValue=f,m.valueFunctionString="function (morph) { return morph.owner.internalValue; }");this.addMorph(m);return m}},{key:"setSelection",value:function(a){this.submorphs.forEach(function(f){f!==a&&(f.selected=!1)});a.selected=!0}},{key:"selectedButton",get:function(){return this.submorphs.find(function(a){return a.selected})}},
{key:"value",get:function(){var a=this.selectedButton;return a?a.value:null}},{key:"value",set:function(a){var f=this.submorphs.find(function(m){try{return m.value===a}catch(r){return!1}});f?f.select():this.setSelection(null)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"RadioButtonGroup"}},{key:"properties",get:function(){return{choices:{derived:!0,defaultValue:[],get:function(){return this.submorphs.map(function(a){return a.value})},set:function(a){var f=this;this.removeAllButtons();
if(si.obj.isArray(a)){if(0==a.length)return;a.forEach(function(m){f.addButton(si.morph({name:"label",type:"label",value:m,reactsToPointer:!1}))})}else{a=[].concat($jscomp.arrayFromIterable(a.entries()));if(0==a.length)return;a.forEach(function(m){var r=$jscomp.makeIterator(m);m=r.next().value;r=r.next().value;f.addButton(si.morph({name:"label",type:"label",value:m,reactsToPointer:!1}),r)})}this.submorphs[0].master.whenApplied().then(function(){return f.setSelection(f.submorphs[0])})},value:{derived:!0,
after:["submorphs"],get:function(){var a=this.selectedButton;return a?a.value:null},set:function(a){var f=this.submorphs.find(function(m){try{return m.value===a}catch(r){return!1}});f?f.select():this.setSelection(null)}}}}}}],e,{pathInPackage:function(){return"buttons.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:10690,end:13604})}(si.Morph);
si.RadioButtonGroup=JK;si.RadioButtonGroup=JK;si.RadioButtonGroup=JK;var vza=Object.freeze({__proto__:null,Button:IG,RadioButton:IK,RadioButtonGroup:JK}),zd=lively.FreezerRuntime.recorderFor("lively.components/list.js");zd.asItem=XN;zd.Morph=ql;zd.Text=dv;zd.StyleSheet=$w;zd.Label=ev;zd.Icon=Rp;zd.morph=qc;zd.touchInputDevice=Sr;zd.pt=Ei;zd.LinearGradient=zn;zd.Color=xg;zd.Rectangle=He;zd.rect=dj;zd.arr=Mf;zd.Path=Ih;zd.string=Th;zd.signal=Xl;zd.noUpdate=Jm;zd.once=cp;zd.Button=IG;zd.bowser=gt;zd.asItem=
XN;zd.asItem=XN;var hS=function(b){var e=lively.FreezerRuntime.recorderFor("lively.components/list.js"),l=e.hasOwnProperty("ListItemMorph")&&"function"===typeof e.ListItemMorph?e.ListItemMorph:e.ListItemMorph=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Pb(l,b,[{key:"displayItem",value:function(a,f,m,r,v,x,y){x=void 0===x?!1:x;var E=a.morph,F=E?"":a.label||a.string||"no item.string";a.annotation?this.valueAndAnnotation=
{value:F,annotation:a.annotation}:"string"===typeof F?this.textString=F:this.value=F;this.tooltip=a.tooltip||this.tooltip||this.textString;this.itemIndex=f;this.position=v;if(y){f=y.fontFamily;v=y.selectionColor;F=y.selectionFontColor;var I=y.nonSelectionFontColor,J=y.borderRadius,P=y.fontSize;y=y.padding;F&&this.selectionFontColor!==F&&(this.selectionFontColor=F);I&&this.nonSelectionFontColor!==I&&(this.nonSelectionFontColor=I);v&&this.selectionColor!==v&&(this.selectionColor=v);J&&J!=this.borderRadius&&
(this.borderRadius=J);P&&this.fontSize!==P&&(this.fontSize=P);f&&this.fontFamily!==f&&(this.fontFamily=f);y&&!this.padding.equals(y)&&(this.padding=y)}a.autoFit&&(E.width=m);this.extent=zd.pt(E?Math.max(E.width,m):m,r);E?(a=E.getTransform().copy(),this.submorphs=[E],E.setTransform(a),E.position=zd.pt(0,0)):this.submorphs.length&&(this.submorphs=[]);this.isSelected=x}},{key:"onDragStart",value:function(a){var f=this.owner.owner;this._dragState={sourceIsSelected:this.isSelected,source:this,itemsTouched:[]};
if(!f.multiSelect||!f.multiSelectViaDrag)f.onItemMorphDragged(a,this)}},{key:"onMouseDown",value:function(a){Pb._get(Object.getPrototypeOf(l.prototype),"onMouseDown",this).call(this,a);this.owner.owner.clickOnItem(a)}},{key:"onDrag",value:function(a){var f=this.owner.owner;if(f.multiSelect&&f.multiSelectViaDrag){a=a.hand.morphBeneath(a.position);var m=f.selectedIndexes,r=f.itemMorphs;a!==this&&r.includes(a)&&(this._dragState.sourceIsSelected&&!a.isSelected?(zd.arr.pushIfNotIncluded(m,a.itemIndex),
f.selectedIndexes=m):!this._dragState.sourceIsSelected&&a.isSelected&&(zd.arr.remove(m,a.itemIndex),f.selectedIndexes=m))}}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ListItemMorph"}},{key:"properties",get:function(){return{clipMode:{defaultValue:"hidden"},autofit:{defaultValue:!1},isSelected:{defaultValue:!1},draggable:{defaultValue:!zd.touchInputDevice},fill:{derived:!0,get:function(){return zd.touchInputDevice&&this.pressed?zd.Color.gray.withA(.5):this.isSelected?this.selectionColor:
zd.Color.transparent}},itemIndex:{defaultValue:void 0},selectionFontColor:{isStyleProp:!0,defaultValue:zd.Color.white},selectionColor:{type:"ColorGradient",isStyleProp:!0,defaultValue:zd.Color.blue},nonSelectionFontColor:{isStyleProp:!0,defaultValue:zd.Color.rgbHex("333")},fontColor:{derived:!0,get:function(){return this.isSelected?this.selectionFontColor:this.nonSelectionFontColor}}}}}],e,{pathInPackage:function(){return"list.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:924,end:5139})}(zd.Label);zd.ListItemMorph=hS;zd.ListItemMorph=hS;zd.ListItemMorph=hS;(function(b){var e=lively.FreezerRuntime.recorderFor("lively.components/list.js"),l=e.hasOwnProperty("ListScroller")&&"function"===typeof e.ListScroller?e.ListScroller:e.ListScroller=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return Pb(l,b,[{key:"onScroll",value:function(a){return this.owner.update()}},{key:"onMouseDown",value:function(a){var f=this,m=this.scroll.y;if(zd.touchInputDevice){var r=this.owner.itemForClick(a);r&&(r.pressed=!0,r.makeDirty(),setTimeout(function(){r.pressed=!1;if(0==m-f.scroll.y)return f.owner.clickOnItem(a)},300))}else return this.owner.clickOnItem(a)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ListScroller"}},{key:"properties",get:function(){return{name:{defaultValue:"scroller"},
fill:{defaultValue:zd.Color.transparent},clipMode:{defaultValue:"auto"},scrollbar:{derived:!0,readOnly:!0,after:["submorphs"],get:function(){return this.submorphs[0]}},submorphs:{initialize:function(){this.submorphs=[{name:"scrollbar"}]}}}}}],e,{pathInPackage:function(){return"list.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:5141,
end:6103})})(zd.Morph);zd.listCommands=[{name:"page up",exec:function(b){b.gotoIndex(Math.max(0,b.selectedIndex-Math.round(b.height/b.itemHeight)));return!0}},{name:"page down",exec:function(b){b.gotoIndex(Math.min(b.items.length-1,b.selectedIndex+Math.round(b.height/b.itemHeight)));return!0}},{name:"goto first item",exec:function(b){b.gotoIndex(0);return!0}},{name:"goto last item",exec:function(b){b.gotoIndex(b.items.length-1);return!0}},{name:"arrow up",exec:function(b){b.gotoIndex(b.indexUp());
return!0}},{name:"arrow down",exec:function(b){b.gotoIndex(b.indexDown());return!0}},{name:"select up",exec:function(b){var e=b.selectedIndexes;if(!b.multiSelect||!e.length)return b.execCommand("arrow up");var l=e[0];if("number"!==typeof l)b.selectedIndexes=[l];else{var a=b.indexUp(l);e.includes(l)&&e.includes(a)?b.selectedIndexes=e.filter(function(f){return f!==l}):b.selectedIndexes=[a].concat(e.filter(function(f){return f!==a}))}return!0}},{name:"select down",exec:function(b){var e=b.selectedIndexes;
if(!b.multiSelect||!e.length)return b.execCommand("arrow down");var l=e[0],a=b.indexDown(l);e.includes(l)&&e.includes(a)?b.selectedIndexes=e.filter(function(f){return f!==l}):b.selectedIndexes=[a].concat(e.filter(function(f){return f!==a}));return!0}},{name:"select all",exec:function(b){b.selectedIndexes=zd.arr.range(b.items.length-1,0);b.scrollIndexIntoView(b.selectedIndexes[0]);return!0}},{name:"select via filter",exec:function(b){var e,l,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){if(1==
f.nextAddress)return e=b.selectedIndex||0,f.yield(b.world().filterableListPrompt("Select item",b.items,{preselect:e,requester:b.getWindow()||b,itemPadding:zd.Rectangle.inset(0,2),multiSelect:!0}),2);l=f.yieldResult;a=l.selected;a.length&&(b.multiSelect?b.selections=a:b.selection=a[0],b.scrollSelectionIntoView(),b.update());return f.return(!0)})}},{name:"realign top-bottom-center",exec:function(b){if(b.selection){var e=b.padding,l=b.itemHeight,a=b.scroll,f=a.x;a=a.y;var m=zd.pt(0,b.selectedIndex*l);
e=b.height-l-e.top()-e.bottom();a=2>Math.abs(m.y-a)?m.y-e:2>Math.abs(m.y-a-.5*e)?m.y:m.y-.5*e;b.scroll=zd.pt(f,a);return!0}}},{name:"print contents in text window",exec:function(b){var e="items of "+b.name,l=b.items.map(function(a){if("string"===typeof a)return a;var f=a.string,m=a.label;a=a.annotation;var r="";m?r="string"===typeof m?r+m:r+m.map(function(v,x){return 0==x%2?v:""}).join(""):f&&(r+=f);a&&(r+=" ",r="string"===typeof a?r+a:r+a[0]);return r}).join("\n");return b.world().execCommand("open text window",
{title:e,content:l,name:e,fontFamily:"Monaco, monospace"})}}];var JG=Ha("b9",function(b){var e=lively.FreezerRuntime.recorderFor("lively.components/list.js"),l=e.hasOwnProperty("List")&&"function"===typeof e.List?e.List:e.List=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Pb(l,b,[{key:"__additionally_serialize__",value:function(a,f,m,r){var v=this;Pb._get(Object.getPrototypeOf(l.prototype),"__additionally_serialize__",
this).call(this,a,f,m,r);this.whenRendered().then(function(){return v.update()})}},{key:"onLoad",value:function(){this.scroller.visible=zd.touchInputDevice}},{key:"initializeSubmorphs",value:function(a){this.submorphs=a=a||this.submorphs||[];for(var f=0;f<a.length;f++)switch(a[f].name){case "listItemContainer":var m=a[f];continue;case "scroller":var r=a[f]}r||(r=this.addMorph(new zd.ListScroller({draggable:!1,grabbable:!1,acceptsDrops:!1,halosEnabled:!1,name:"scroller"})));m||this.addMorph({name:"listItemContainer",
fill:zd.Color.transparent,halosEnabled:!1,reactsToPointer:!1,acceptsDrops:!1,draggable:!1});(m||r)&&this.update()}},{key:"isList",get:function(){return!0}},{key:"onChange",value:function(a){"fontFamily fontColor fontSize padding selectionFontColor selectionColor nonSelectionFontColor itemPadding items".split(" ").includes(a.prop)&&this.update();return Pb._get(Object.getPrototypeOf(l.prototype),"onChange",this).call(this,a)}},{key:"itemForClick",value:function(a){a=a.positionIn(this.world()).subPt(this.scroll);
a=this.listItemContainer.morphsContainingPoint(a);return a.find(function(f){return f.isListItem})||a[0]}},{key:"clickOnItem",value:function(a){var f=this.itemForClick(a),m=a.state.clickCount;if(!(a.positionIn(this).x>this.width-this.scrollbarOffset.x))this[2===m?"onItemMorphDoubleClicked":"onItemMorphClicked"](a,f)}},{key:"connections",get:function(){return{selection:{signalOnAssignment:!1}}}},{key:"invalidateCache",value:function(){this.manualItemHeight||this.setProperty("itemHeight",null)}},{key:"find",
value:function(a){return this.items.find(function(f){return f===a||f.value===a})}},{key:"findIndex",value:function(a){return this.items.findIndex(function(f){return f===a||f.value===a})}},{key:"addItem",value:function(a){return this.addItemAt(a)}},{key:"addItemAt",value:function(a,f){var m=this;f=void 0===f?this.items.length:f;var r=this.items;f=Math.min(r.length,Math.max(0,f));r.splice(f,0,zd.asItem(a));this.addMethodCallChangeDoing({target:this,selector:"addItemAt",args:[a,f],undo:{target:this,
selector:"removeItem",args:[a]}},function(){return m.update()})}},{key:"removeItem",value:function(a){var f=this;a=this.find(a);var m=this.items,r=m.indexOf(a);-1!==r&&(m.splice(r,1),this.addMethodCallChangeDoing({target:this,selector:"removeItem",args:[a],undo:{target:this,selector:"addItemAt",args:[a,r]}},function(){return f.update()}))}},{key:"selectItemMorph",value:function(a){this.selectedIndexes=[a.itemIndex]}},{key:"gotoIndex",value:function(a){this.scrollIndexIntoView(this.selectedIndex=a)}},
{key:"indexUp",value:function(a){a="number"===typeof a?a:this.selectedIndex;return(a||this.items.length)-1}},{key:"indexDown",value:function(a){a=void 0===a?this.selectedIndex:a;return(("number"===typeof a?a:-1)+1)%this.items.length}},{key:"update",value:function(){var a=this,f=this.items;f&&this.scroller&&this.dontRecordChangesWhile(function(){var m=a.itemHeight,r=a.itemMorphs,v=a.listItemContainer,x=a.selectedIndexes,y=a.extent.y,E=a.fontSize,F=a.fontFamily,I=a.fontColor,J=a.padding,P=a.itemPadding,
N=a.selectionColor,Y=a.selectionFontColor,W=a.nonSelectionFontColor,da=a.itemBorderRadius,va=a.scrollBar,za=a.scroller,L=a.scrollable,Z=za.scroll.y;J=J||zd.Rectangle.inset(0);var R=J.top(),X=J.left(),ja=J.bottom();J=J.right();var fa=Math.max(0,Math.floor(Z/m)),ua=Math.min(f.length,fa+y/m+2);y=0;J=a.width-(X+J);r=zd.arr.sortBy(r,function(La){return La.itemIndex});var gb=$jscomp.makeIterator(zd.arr.partition(r,function(La){return La.itemIndex<fa}));r=gb.next().value;var hb=gb.next().value;hb=$jscomp.makeIterator(zd.arr.partition(hb,
function(La){return La.itemIndex>ua-1}));gb=hb.next().value;hb=hb.next().value;r=[].concat($jscomp.arrayFromIterable(gb),$jscomp.arrayFromIterable(hb),$jscomp.arrayFromIterable(r));for(gb=0;gb<ua-fa;gb++){hb=fa+gb;var ta=f[hb];if(!ta){r.slice(gb).forEach(function(La){La.remove()});break}var na={fontSize:E,fontFamily:F,fontColor:W||I,padding:P,borderRadius:da||0,selectionFontColor:Y,nonSelectionFontColor:W,selectionColor:N},pa=r[gb];pa||(pa=r[gb]=v.addMorph(new zd.ListItemMorph(na)));pa.reactsToPointer=
!L;pa.displayItem(ta,hb,J,m,zd.pt(0,m*hb),x.includes(hb),na);y=Math.max(y,pa.width)}r.slice(ua-fa).forEach(function(La){return La.remove()});m=Math.max(R+ja+m*f.length,a.height);v.setBounds(zd.pt(X,R).subXY(0,Z).extent(zd.pt(a.width,m)));za.extent=a.extent.subXY(a.borderWidthRight,a.borderWidthBottom);va.left=y/2;za.position=zd.pt(0,0);va.extent=zd.pt(1,m)})}},{key:"scrollSelectionIntoView",value:function(){this.selection&&this.scrollIndexIntoView(this.selectedIndex)}},{key:"scrollIndexIntoView",
value:function(a){var f=this.itemHeight,m=this.itemScroll;a=new zd.Rectangle(0,a*f,this.width,f);f=this.innerBounds().insetByRect(this.padding).translatedBy(m);var r=0;a.bottom()>f.bottom()&&(r=a.bottom()-f.bottom());a.top()<f.top()&&(r=a.top()-f.top());this.itemScroll=m.addXY(0,r);this.update()}},{key:"onItemMorphDoubleClicked",value:function(a,f){}},{key:"onItemMorphClicked",value:function(a,f){var m=f.itemIndex;f=this.selectedIndexes;var r=f.includes(m),v=[];if(this.multiSelect)if(a.isShiftDown())if(r)v=
f.filter(function(y){return y!=m});else{a=f[0];var x="number"===typeof a?zd.arr.range(m,a):[m];v=x.concat(f.filter(function(y){return!x.includes(y)}))}else v=this.multiSelectWithSimpleClick||a.isCommandKey()?r?f.filter(function(y){return y!=m}):[m].concat(f.filter(function(y){return y!=m})):[m];else v=[m];this.selectedIndexes=v}},{key:"onItemMorphDragged",value:function(a,f){}},{key:"onHoverIn",value:function(a){this.scrollable&&(this.scroller.visible=!0)}},{key:"onHoverOut",value:function(a){zd.touchInputDevice||
(this.scroller.visible=!1)}},{key:"onDragStart",value:function(a){}},{key:"onDrag",value:function(a){}},{key:"keybindings",get:function(){return[{keys:"Up|Ctrl-P",command:"arrow up"},{keys:"Down|Ctrl-N",command:"arrow down"},{keys:"Shift-Up",command:"select up"},{keys:"Shift-Down",command:"select down"},{keys:{win:"Ctrl-A",mac:"Meta-A"},command:"select all"},{keys:"Alt-V|PageUp",command:"page up"},{keys:"Ctrl-V|PageDown",command:"page down"},{keys:"Alt-Shift-,",command:"goto first item"},{keys:"Alt-Shift-.",
command:"goto last item"},{keys:"Alt-Space",command:"select via filter"},{keys:"Ctrl-L",command:"realign top-bottom-center"}].concat(Pb._get(Object.getPrototypeOf(l.prototype),"keybindings",this))}},{key:"commands",get:function(){return zd.listCommands}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"List"}},{key:"properties",get:function(){return{fill:{defaultValue:zd.Color.white},clipMode:{defaultValue:"hidden"},selectionFontColor:{isStyleProp:!0,defaultValue:zd.Color.white},selectionColor:{type:"ColorGradient",
isStyleProp:!0,defaultValue:zd.Color.rgb(21,101,192)},nonSelectionFontColor:{isStyleProp:!0,defaultValue:zd.Color.rgbHex("333")},fontColor:{isStyleProp:!0,defaultValue:zd.Color.rgbHex("333")},styleClasses:{defaultValue:["default"]},itemScroll:{derived:!0,after:["submorphs"],get:function(){return this.scroller?this.scroller.scroll:zd.pt(0,0)},set:function(a){this.scroller&&(this.scroller.scroll=a)}},master:{initialize:function(){this.master={auto:"styleguide://SystemWidgets/list/light"}}},extent:{defaultValue:zd.pt(400,
360),set:function(a){a.eqPt(this.extent)||(this.setProperty("extent",a),this.update())}},fontFamily:{isStyleProp:!0,defaultValue:"Helvetica Neue, Arial, sans-serif",set:function(a){this.setProperty("fontFamily",a);this.invalidateCache()}},fontSize:{isStyleProp:!0,defaultValue:12,set:function(a){this.setProperty("fontSize",a);this.invalidateCache()}},padding:{isStyleProp:!0,defaultValue:zd.Rectangle.inset(3)},itemBorderRadius:{isStyleProp:!0,defaultValue:0,set:function(a){this.setProperty("itemBorderRadius",
a);this.invalidateCache()}},itemPadding:{isStyleProp:!0,defaultValue:zd.Rectangle.inset(1),set:function(a){this.setProperty("itemPadding",a);this.invalidateCache()}},items:{group:"list",defaultValue:[],after:["submorphs"],set:function(a){this.setProperty("items",a.map(zd.asItem));this.itemScroll=zd.pt(0,0);this.update();this.attributeConnections&&zd.signal(this,"values",this.values)}},multiSelect:{defaultValue:!1},multiSelectWithSimpleClick:{description:"Does a simple click toggle selections without deselecting?",
defaultValue:!1},multiSelectViaDrag:{description:"Does dragging extend selection?",defaultValue:!0},values:{group:"list",after:["items"],readOnly:!0,get:function(){return this.items.map(function(a){return a.value})}},selectedIndex:{group:"list",defaultValue:[],after:["selectedIndexes"],get:function(){return this.selectedIndexes[0]},set:function(a){return this.selectedIndexes="number"===typeof a?[a]:[]}},selectedIndexes:{get:function(){return this.getProperty("selectedIndexes")||[]},set:function(a){var f=
this.items.length;this.setProperty("selectedIndexes",(a||[]).filter(function(m){return 0<=m&&m<f}));this.update();zd.signal(this,"selection",this.selection)}},selection:{group:"list",after:["selections"],get:function(){return this.selections[0]},set:function(a){this.selections=[a]}},selections:{group:"list",after:["selectedIndexes"],get:function(){var a=this;return this.selectedIndexes.map(function(f){return a.items[f]&&a.items[f].value})},set:function(a){var f=this;this.selectedIndexes=a.map(function(m){return f.findIndex(m)})}},
selectedItems:{after:["selectedIndexes"],readOnly:!0,get:function(){var a=this;return this.selectedIndexes.map(function(f){return a.items[f]})}},submorphs:{initialize:function(a){this.initializeSubmorphs(a)}},listItemContainer:{after:["submorphs"],readOnly:!0,get:function(){return this.getSubmorphNamed("listItemContainer")}},itemMorphs:{after:["submorphs"],readOnly:!0,get:function(){return this.listItemContainer.submorphs}},scrollBar:{after:["submorphs"],readOnly:!0,get:function(){return this.getSubmorphNamed("scrollbar")}},
scroller:{after:["submorphs"],readOnly:!0,get:function(){return this.getSubmorphNamed("scroller")}},scrollable:{derived:!0,get:function(){return this.padding.top()+this.items.length*this.itemHeight>this.height}},manualItemHeight:{type:"Boolean"},itemHeight:{isStyleProp:!0,after:["fontFamily","fontSize","itemPadding"],defaultValue:10,set:function(a){this.setProperty("itemHeight",a);this.manualItemHeight="number"===typeof a;this.update()},get:function(){var a=this.getProperty("itemHeight");if(a)return a;
a=this.env.fontMetric.defaultLineHeight({fontFamily:this.fontFamily,fontSize:this.fontSize});var f=this.itemPadding;f&&(a+=f.top()+f.bottom());this.setProperty("itemHeight",a);return a}},theme:{after:["styleClasses"],defaultValue:"default",set:function(a){this.removeStyleClass(this.theme);this.addStyleClass(a);this.setProperty("theme",a)}}}}}],e,{pathInPackage:function(){return"list.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:10507,end:27122})}(zd.Morph));zd.List=JG;zd.List=JG;zd.List=JG;zd.connect=Dl;var KK=Ha("ba",function(b){var e=lively.FreezerRuntime.recorderFor("lively.components/list.js"),l=e.hasOwnProperty("FilterableList")&&"function"===typeof e.FilterableList?e.FilterableList:e.FilterableList=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Pb(l,b,
[{key:Symbol.for("lively-instance-initialize"),value:function(a){a=void 0===a?{}:a;a.bounds||a.extent||(a.extent=zd.pt(400,360));Pb._get(Object.getPrototypeOf(l.prototype),Symbol.for("lively-instance-initialize"),this).call(this,a);zd.connect(this.inputMorph,"inputChanged",this,"updateFilter");zd.connect(this.listMorph,"selection",this,"selectionChanged");zd.connect(this.listMorph,"onItemMorphDoubleClicked",this,"acceptInput");this.updateFilter();zd.connect(this,"extent",this,"relayout")}},{key:"resetConnections",
value:function(){var a=this,f=this.attributeConnections;if(f){var m=["accepted","canceled","remove"];f.filter(function(r){return m.includes(r.sourceAttrName)&&r.targetObj!==a}).forEach(function(r){return r.disconnect()})}}},{key:"isList",get:function(){return!0}},{key:"relayout",value:function(){var a=this.listMorph,f=this.inputMorph,m=this.paddingMorph,r=this.borderWidth;f.topLeft=zd.pt(r,r);f.width=a.width=this.width-2*r;m&&(m.topLeft=f.bottomLeft);a.position=m?m.bottomLeft:f.bottomLeft;a.height=
this.height-a.top-r}},{key:"focus",value:function(){this.get("input").focus()}},{key:"selectionChanged",value:function(a){zd.signal(this,"selection",a)}},{key:"scrollSelectionIntoView",value:function(){return this.listMorph.scrollSelectionIntoView()}},{key:"parseInput",value:function(){var a=this.get("input").textString,f=Array.from(a).reduce(function(r,v){if("\\"===v&&!r.escaped)return r.escaped=!0,r;" "!==v||r.escaped?(r.spaceSeen=!1,r.current+=v):(!r.spaceSeen&&r.current&&(r.tokens.push(r.current),
r.current=""),r.spaceSeen=!0);r.escaped=!1;return r},{tokens:[],current:"",escaped:!1,spaceSeen:!1});f.current&&f.tokens.push(f.current);var m=f.tokens.map(function(r){return r.toLowerCase()});return{tokens:f.tokens,lowercasedTokens:m,input:a}}},{key:"updateFilter",value:function(){var a=this,f=this.parseInput(),m=this.filterFunction,r=this.sortFunction,v=this.items.filter(function(E){return m.call(a,f,E)});r&&(v=zd.arr.sortBy(v,function(E){return r.call(a,f,E)}));var x=this.listMorph,y=this.updateSelectionsAfterFilter?
x.selectedIndexes.map(function(E){return v.indexOf(x.items[E])}).filter(function(E){return-1!==E}):x.selectedIndexes;x.items=v;x.selectedIndexes=y.length?y:v.length?[0]:[];this.scrollSelectionIntoView();zd.signal(this,"filterChanged",{parsedInput:f,items:x.items})}},{key:"acceptInput",value:function(){var a=this.listMorph;this.get("input").acceptInput();a={filtered:this.items,selected:a.selections,action:this.selectedAction,status:"accepted"};zd.signal(this,"accepted",a);return a}},{key:"keybindings",
get:function(){return[{keys:"Up|Ctrl-P",command:"arrow up"},{keys:"Down|Ctrl-N",command:"arrow down"},{keys:"Shift-Up",command:"select up"},{keys:"Shift-Down",command:"select down"},{keys:"Alt-V|PageUp",command:"page up"},{keys:"PageDown",command:"page down"},{keys:"Alt-Shift-,",command:"goto first item"},{keys:"Alt-Shift-.",command:"goto last item"},{keys:"Enter",command:"accept input"},{keys:"Escape|Ctrl-G",command:"cancel"},{keys:"Tab",command:"choose action"}].concat($jscomp.arrayFromIterable(zd.arr.range(0,
8).map(function(a){return{keys:"Alt-"+(a+1),command:{command:"choose action and accept input",args:{actionNo:a}}}}))).concat(Pb._get(Object.getPrototypeOf(l.prototype),"keybindings",this))}},{key:"commands",get:function(){var a=this;return Pb._get(Object.getPrototypeOf(l.prototype),"commands",this).concat([{name:"accept input",exec:function(f){a.acceptInput();return!0}},{name:"cancel",exec:function(f){zd.signal(f,"canceled");return!0}},{name:"choose action and accept input",exec:function(f,m){m=void 0===
m?{}:m;f.selectedAction=(f.actions||[])[void 0===m.actionNo?0:m.actionNo];return f.execCommand("accept input")}},{name:"choose action",exec:function(f){var m,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(x){if(!f.actions)return x.return(!0);m=Object.assign({},f.style,{extent:f.extent});r=new zd.FilterableList(m);r.openInWorld(f.globalPosition);r.items=f.actions;v=f.actions.indexOf(f.selectedAction);-1===v&&(v=0);r.selectedIndex=v;zd.connect(r,"accepted",f,"selectedAction",{converter:function(y){this.targetObj.focus();
this.disconnect();this.sourceObj.remove();return y.selected[0]}});zd.connect(r,"canceled",f,"selectedAction",{converter:function(y){this.targetObj.focus();this.disconnect();this.sourceObj.remove();return this.targetObj.selectedAction}});r.focus();return x.return(!0)})}}].concat($jscomp.arrayFromIterable(zd.listCommands.map(function(f){return Object.assign({},f,{exec:function(m,r,v){return f.exec(a.listMorph,r,v)}})}))))}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"FilterableList"}},
{key:"properties",get:function(){return{fill:{defaultValue:zd.Color.transparent},borderWidth:{defaultValue:1},updateSelectionsAfterFilter:{defaultValue:!1},theme:{after:["styleClasses","listMorph"],defaultValue:"default",set:function(a){this.removeStyleClass(this.theme);this.listMorph.removeStyleClass(this.theme);this.addStyleClass(a);this.listMorph.addStyleClass(a);this.setProperty("theme",a)}},submorphs:{initialize:function(){var a=this;this.submorphs=[zd.Text.makeInputLine({name:"input",highlightWhenFocused:!1,
fixedHeight:!1,autofit:!1}),new zd.morph({name:"padding",fill:zd.Color.transparent}),new zd.List({name:"list",items:[],clipMode:"auto"})];this.get("list").whenRendered().then(function(){return a.get("list").update()})}},paddingMorph:{derived:!0,readOnly:!0,after:["submorphs"],get:function(){return this.getSubmorphNamed("padding")}},listMorph:{derived:!0,readOnly:!0,after:["submorphs"],get:function(){return this.getSubmorphNamed("list")}},inputMorph:{derived:!0,readOnly:!0,after:["submorphs"],get:function(){return this.getSubmorphNamed("input")}},
fontFamily:{isStyleProp:!0,derived:!0,after:["submorphs"],get:function(){return this.listMorph.fontFamily},set:function(a){this.listMorph.fontFamily=a;this.inputMorph.fontFamily=a}},padding:{isStyleProp:!0,derived:!0,after:["submorphs"],get:function(){return this.listMorph.padding},set:function(a){this.listMorph.padding=a;this.inputMorph.padding=a}},fontSize:{isStyleProp:!0,group:"styling",derived:!0,after:["submorphs"],get:function(){return this.listMorph.fontSize},set:function(a){this.listMorph.fontSize=
a}},itemPadding:{isStyleProp:!0,derived:!0,after:["submorphs"],get:function(){return this.listMorph.itemPadding},set:function(a){this.listMorph.itemPadding=a}},inputPadding:{isStyleProp:!0,derived:!0,after:["submorphs","padding"],get:function(){return this.inputMorph.padding},set:function(a){this.inputMorph.padding=a}},input:{derived:!0,after:["submorphs"],defaultValue:"",get:function(){return this.inputMorph.input},set:function(a){this.inputMorph.input=a}},historyId:{derived:!0,after:["submorphs"],
defaultValue:null,get:function(){return this.inputMorph.historyId},set:function(a){this.inputMorph.historyId=a}},multiSelect:{derived:!0,after:["submorphs"],get:function(){return this.listMorph.multiSelect},set:function(a){this.listMorph.multiSelect=a}},items:{after:["submorphs","fuzzy","fuzzySortFunction","fuzzyFilterFunction"],defaultValue:[],set:function(a){this.setProperty("items",a.map(zd.asItem));this.updateFilter()}},visibleItems:{derived:!0,after:["submorphs"],get:function(){return this.listMorph.items}},
selection:{derived:!0,after:["submorphs"],get:function(){return this.listMorph.selection},set:function(a){this.listMorph.selection=a}},selectedIndex:{derived:!0,after:["submorphs"],get:function(){return this.listMorph.selectedIndex},set:function(a){this.listMorph.selectedIndex=a}},selectedIndexes:{derived:!0,after:["submorphs"],get:function(){return this.listMorph.selectedIndexes},set:function(a){this.listMorph.selectedIndexes=a}},selectedItems:{derived:!0,after:["submorphs"],get:function(){return this.listMorph.selectedItems},
set:function(a){this.listMorph.selectedItems=a}},selections:{derived:!0,after:["submorphs"],get:function(){return this.listMorph.selections},set:function(a){this.listMorph.selections=a}},fuzzy:{derived:!0,after:["filterFunction","sortFunction"],set:function(a){this.setProperty("fuzzy",a);a?(this.sortFunction||(this.sortFunction=this.fuzzySortFunction),this.filterFunction==this.defaultFilterFunction&&(this.filterFunction=this.fuzzyFilterFunction)):(this.sortFunction===this.fuzzySortFunction&&(this.sortFunction=
null),this.filterFunction===this.fuzzyFilterFunction&&(this.filterFunction=this.defaultFilterFunction))}},filterFunction:{get:function(){var a=this.getProperty("filterFunction");if(!a)return this.defaultFilterFunction;"string"===typeof a&&(a=eval("("+a+")"));return a}},sortFunction:{},defaultFilterFunction:{readOnly:!0,get:function(){return this._defaultFilterFunction||(this._defaultFilterFunction=function(a,f){return a.lowercasedTokens.every(function(m){return f.string.toLowerCase().includes(m)})})}},
fuzzySortFunction:{get:function(){var a=this;return this._fuzzySortFunction||(this._fuzzySortFunction=function(f,m){var r=String(zd.Path("string"===typeof a.fuzzy?a.fuzzy:"string").get(m)).toLowerCase(),v=0;f.lowercasedTokens.forEach(function(x){r.startsWith(x)?v-=10:r.includes(x)&&(v-=5)});return zd.arr.sum(f.lowercasedTokens.map(function(x){return zd.string.levenshtein(r.toLowerCase(),x)}))+v})}},fuzzyFilterFunction:{get:function(){var a=this;return this._fuzzyFilterFunction||(this._fuzzyFilterFunction=
function(f,m){var r="string"===typeof a.fuzzy?a.fuzzy:"string";if(f.lowercasedTokens.every(function(x){return m.string.toLowerCase().includes(x)}))return!0;var v=String(zd.Path(r).get(m)).toLowerCase();return 3>=zd.arr.sum(f.lowercasedTokens.map(function(x){return zd.string.levenshtein(v,x)}))})}},selectedAction:{get:function(){return this.getProperty("selectedAction")||"default"}},actions:{}}}}],e,{pathInPackage:function(){return"list.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:27235,end:41577})}(zd.Morph));zd.FilterableList=KK;zd.FilterableList=KK;zd.FilterableList=KK;var LK=Ha("bA",function(b){var e=lively.FreezerRuntime.recorderFor("lively.components/list.js"),l=e.hasOwnProperty("DropDownList")&&"function"===typeof e.DropDownList?e.DropDownList:e.DropDownList=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return Pb(l,b,[{key:"fitLabelMorph",value:function(){}},{key:Symbol.for("lively-instance-initialize"),value:function(a){Pb._get(Object.getPrototypeOf(l.prototype),Symbol.for("lively-instance-initialize"),this).call(this,a);zd.connect(this,"fire",this,"toggleList")}},{key:"onLoad",value:function(){this.listMorph.selection||(this.listMorph.selection=this.labelMorph.value[0])}},{key:"isListVisible",value:function(){return!!this.listMorph.world()}},{key:"removeWhenFocusLost",value:function(a){var f=
this;setTimeout(function(){var m=f.listMorph,r=f.world()&&f.world().focusedMorph;r!==m&&r!==f&&m.world()&&!m.withAllSubmorphsDetect(function(v){return v==r})?m.fadeOut(200):m.world()&&(m=zd.touchInputDevice?m.scroller:m,zd.once(m,"onBlur",f,"removeWhenFocusLost"),m.focus())},100)}},{key:"adjustLableFor",value:function(a){a=a.label||[a.string,null];a=[].concat($jscomp.arrayFromIterable(a),[" ",null],$jscomp.arrayFromIterable(zd.Icon.textAttribute("caret-"+("bottom"===this.listAlign?"down":"up"))));
a[5]&&(a[5].paddingRight="0px",a[5].textStyleClasses=["fa","annotation"]);this.label=a;this.relayout()}},{key:"toggleList",value:function(){var a=this,f,m,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){if(1==v.nextAddress){f=a.listMorph;if(a.isListVisible())return zd.signal(a,"deactivated"),a.selection=f.selection,f.epiMorph=!1,f.remove(),v.jumpTo(0);zd.signal(a,"activated");a.openListInWorld?(f.openInWorld(),f.epiMorph=!0,f.hasFixedPosition=!0,f.setTransform(a.getGlobalTransform()),
m=a.globalBounds()):(m=a.innerBounds(),a.addMorph(f));r=f.items.length*f.itemHeight+f.padding.top()+f.padding.bottom();f.extent=zd.pt(a.width,Math.min(a.listHeight,r));"top"===a.listAlign?f.bottomLeft=m.topLeft():f.topLeft=m.bottomLeft();f.moveBy(a.listOffset||zd.pt(0,0));zd.once(f,"onItemMorphClicked",a,"toggleList");zd.once(zd.touchInputDevice?f.scroller:f,"onBlur",a,"removeWhenFocusLost");return v.yield(f.whenRendered(),3)}if(4!=v.nextAddress)return v.yield(f.whenRendered(),4);zd.touchInputDevice?
f.scroller.focus():f.focus();f.scrollSelectionIntoView();v.jumpToEnd()})}},{key:"commands",get:function(){var a=this;return[{name:"accept",exec:function(){a.isListVisible()&&a.toggleList();return!0}},{name:"cancel",exec:function(){a.isListVisible()&&a.listMorph.remove();return!0}}].concat(Pb._get(Object.getPrototypeOf(l.prototype),"commands",this))}},{key:"keybindings",get:function(){return Pb._get(Object.getPrototypeOf(l.prototype),"keybindings",this).concat([{keys:"Enter",command:"accept"},{keys:"Escape|Ctrl-G",
command:"cancel"}])}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"DropDownList"}},{key:"properties",get:function(){return{padding:{defaultValue:zd.Rectangle.inset(3,2)},listHeight:{defaultValue:100},listAlign:{type:"Enum",values:["bottom","top"],defaultValue:"bottom"},listOffset:{isStyleProp:!0,defaultValue:zd.pt(0,0)},openListInWorld:{defaultValue:!1},listMorph:{after:["labelMorph"],get:function(){var a=this.getProperty("listMorph");if(a)return a;a=new zd.List({name:"dropDownList"});
this.setProperty("listMorph",a);return a}},items:{derived:!0,after:["listMorph"],get:function(){return this.listMorph.items},set:function(a){var f=this,m=this.items.find(function(r){return r.value==f.selection});this.listMorph.items=a;m&&zd.noUpdate(function(){f.selection=f.items[0].value})}},selection:{after:["listMorph","items"],derived:!0,get:function(){return this.listMorph.selection},set:function(a){var f=this.listMorph;if(a){var m=f.items,r=f.find(a);r||"string"!==typeof a||(r=m.find(function(v){return v.string===
a}));if(!r)return;this.adjustLableFor(r);f.selectedIndex=m.indexOf(r)}else f.selection=null,this.label="";zd.signal(this,"selection",f.selection)}}}}}],e,{pathInPackage:function(){return"list.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:41587,end:46669})}(zd.Button));zd.DropDownList=LK;zd.DropDownList=LK;zd.DropDownList=
LK;var iS=function(b){var e=lively.FreezerRuntime.recorderFor("lively.components/list.js"),l=e.hasOwnProperty("InteractiveItem")&&"function"===typeof e.InteractiveItem?e.InteractiveItem:e.InteractiveItem=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Pb(l,b,[{key:"fit",value:function(){}},{key:"onHaloGrabover",value:function(a){this.list.showDropPreviewFor(this,a)}},{key:"onDrop",value:function(a){var f=this,m;
return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){if(1==r.nextAddress){if(!f.item.isPreview)return r.jumpTo(0);m=a.hand.grabbedMorphs[0];Pb._get(Object.getPrototypeOf(l.prototype),"onDrop",f).call(f,a);return r.yield(f.list.whenRendered(),3)}f.list.addItemAt({morph:m,isListItem:!0},f.itemIndex);f.list.clearPreviews();r.jumpToEnd()})}},{key:"select",value:function(){this.list.selectedIndex=this.itemIndex;this.item.morph.focus()}},{key:"onMouseDown",value:function(a){zd.touchInputDevice?
this._touchDown=Date.now():this.select()}},{key:"onMouseUp",value:function(a){zd.touchInputDevice&&500>Date.now()-this._touchDown&&this.select()}},{key:"displayItem",value:function(a,f,m,r,v,x,y){x=void 0===x?!1:x;Pb._get(Object.getPrototypeOf(l.prototype),"displayItem",this).call(this,a,f,m,r,v,x,y);a.morph&&(a.morph.selected=x)}},{key:"onGrab",value:function(a){var f=this.list,m=a.halo&&a.halo.target===this;m&&a.halo.detachFromTarget();var r=this.submorphs.length?this.submorphs[0]:zd.morph({type:"label",
value:this.value});a.hand.grab(r);r.position=a.hand.localize(this.globalPosition);m&&a.halo.refocus(r);f.removeItem(this.list.items[this.itemIndex]);f.itemMorphs.forEach(function(v){return v.remove()});f.update()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"InteractiveItem"}},{key:"properties",get:function(){return{draggable:{defaultValue:!zd.touchInputDevice},item:{derived:!0,get:function(){return this.list.items[this.itemIndex]}},list:{drived:!0,get:function(){return this.owner.owner}},
isListItem:{get:function(){return!0}}}}}],e,{pathInPackage:function(){return"list.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:46678,end:48927})}(zd.ListItemMorph);zd.InteractiveItem=iS;zd.InteractiveItem=iS;zd.InteractiveItem=iS;var jS=function(b){var e=lively.FreezerRuntime.recorderFor("lively.components/list.js"),l=e.hasOwnProperty("MorphList")&&
"function"===typeof e.MorphList?e.MorphList:e.MorphList=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Pb(l,b,[{key:"onLoad",value:function(){Pb._get(Object.getPrototypeOf(l.prototype),"onLoad",this).call(this);this.clipMode=this.touchInput?"auto":"hidden"}},{key:"showDropPreviewFor",value:function(a,f){a=a.itemIndex;this.items[a].isPreview&&f||(this.clearPreviews(),f&&this.addItemAt({isListItem:!0,isPreview:!0,
morph:zd.morph({reactsToPointer:!1,acceptsDrops:!1,width:this.width-5,height:this.itemHeight,fill:zd.Color.orange.withA(.5)})},a))}},{key:"clearPreviews",value:function(){var a=this;this.items.filter(function(f){return f.morph&&f.morph.owner&&!zd.Path("morph.owner.isListItem").get(f)}).map(function(f){return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){return m.return(a.removeItem(f))})});this.items.filter(function(f){return f.isPreview}).map(function(f){return a.removeItem(f)})}},{key:"update",
value:function(){var a=this,f=this.items;f&&this.listItemContainer&&(this.scroller&&(this.scroller.visible=!1),this.dontRecordChangesWhile(function(){var m=a.itemHeight,r=a.itemMorphs,v=a.listItemContainer,x=a.selectedIndexes,y=a.extent.y,E=a.fontSize,F=a.fontFamily,I=a.fontColor,J=a.padding,P=a.itemPadding,N=a.selectionColor,Y=a.selectionFontColor,W=a.nonSelectionFontColor,da=a.itemBorderRadius,va=a.scrollBar,za=a.scroll.y;J=J||zd.Rectangle.inset(0);var L=J.top(),Z=J.left(),R=J.bottom();J=J.right();
var X=Math.max(0,Math.floor(za/m)),ja=Math.min(f.length,Math.ceil((za+y)/m));y=0;za=a.width-(Z+J);r=zd.arr.sortBy(r,function(gb){return gb.itemIndex});var fa=$jscomp.makeIterator(zd.arr.partition(r,function(gb){return gb.itemIndex<X}));r=fa.next().value;var ua=fa.next().value;ua=$jscomp.makeIterator(zd.arr.partition(ua,function(gb){return gb.itemIndex>ja}));fa=ua.next().value;ua=ua.next().value;r=[].concat($jscomp.arrayFromIterable(fa),$jscomp.arrayFromIterable(ua),$jscomp.arrayFromIterable(r));E=
{fontSize:E,fontFamily:F,fontColor:W||I,padding:P,borderRadius:da||0,selectionFontColor:Y,nonSelectionFontColor:W,selectionColor:N};r.length&&ja-X>r.length&&(X!=r[0].itemIndex?zd.arr.pushAt(r,v.addMorph(new zd.InteractiveItem(E)),0):ja!=zd.arr.last(r).itemIndex&&r.push(v.addMorph(new zd.InteractiveItem(E))));for(F=0;F<ja-X;F++){I=X+F;P=f[I];if(!P){r.slice(F).forEach(function(gb){return gb.remove()});break}N=r[F];N||(N=r[F]=v.addMorph(new zd.InteractiveItem(E)),N.clipMode="visible");N.displayItem(P,
I,za,m,zd.pt(0,m*I),x.includes(I),E);y=Math.max(y,N.width)}m=Math.max(L+R+m*f.length,a.height);x=zd.pt(a.width,m).subPt(zd.pt(Z+J,0));v.setBounds(zd.pt(Z,L).extent(x));va.left=y-10;va.fill=null;va.top=0;va.extent=zd.pt(1,m)}))}},{key:"onHoverIn",value:function(a){this.clipMode="auto"}},{key:"onHoverOut",value:function(a){this.touchInput||(this.clipMode="hidden")}},{key:"onScroll",value:function(a){this.update()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"MorphList"}},{key:"properties",
get:function(){return{touchInput:{get:function(){return zd.touchInputDevice}},items:{group:"list",defaultValue:[],after:["submorphs"],set:function(a){this.setProperty("items",a.map(zd.asItem));this.itemMorphs.forEach(function(f){return f.remove()});this.update();this.attributeConnections&&zd.signal(this,"values",this.values)}}}}}],e,{pathInPackage:function(){return"list.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:48936,end:54168})}(zd.List);zd.MorphList=jS;zd.MorphList=jS;zd.MorphList=jS;var wza=Object.freeze({__proto__:null,asItem:XN,ListItemMorph:hS,List:JG,FilterableList:KK,DropDownList:LK,InteractiveItem:iS,MorphList:jS}),oh=lively.FreezerRuntime.recorderFor("lively.components/menus.js");oh.Label=ev;oh.config=em;oh.Morph=ql;oh.obj=ng;oh.promise=hg;oh.fun=vn;oh.pt=Ei;oh.Color=xg;oh.Rectangle=He;var kS=function(b){var e=lively.FreezerRuntime.recorderFor("lively.components/menus.js"),
l=e.hasOwnProperty("MenuDivider")&&"function"===typeof e.MenuDivider?e.MenuDivider:e.MenuDivider=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Pb(l,b,void 0,[{key:Symbol.for("__LivelyClassName__"),get:function(){return"MenuDivider"}},{key:"properties",get:function(){return{isMenuDevider:{defaultValue:!0},fill:{defaultValue:oh.Color.gray.lighter()},extent:{defaultValue:oh.pt(100,5)},reactsToPointer:{defaultValue:!1}}}}],
e,{pathInPackage:function(){return"menus.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:168,end:444})}(oh.Morph);oh.MenuDivider=kS;oh.MenuDivider=kS;oh.MenuDivider=kS;var lS=function(b){var e=lively.FreezerRuntime.recorderFor("lively.components/menus.js"),l=e.hasOwnProperty("MenuItem")&&"function"===typeof e.MenuItem?e.MenuItem:
e.MenuItem=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Pb(l,b,[{key:"onHoverIn",value:function(a){var f=this;this.owner.itemMorphs.forEach(function(m){return m!==f&&(m.selected=!1)});this.selected=!0;this.submenu&&this.owner.openSubMenuDelayed(a,this,this.submenu)}},{key:"onHoverOut",value:function(a){var f=this,m=a.hand;setTimeout(function(){(f.owner?f.owner.submenus:[]).some(function(r){return r.fullContainsWorldPoint(m.globalPosition)})||
(f.selected=!1)},20);this.owner.maybeRemoveSubmenu()}},{key:"onMouseDown",value:function(a){var f=this,m,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){if(1==v.nextAddress){if(f.submenu)return v.return();v.setCatchFinallyBlocks(2);f.owner.startFinish();if("function"!==typeof f.action)throw Error("Menu item "+f.textString+" has no executable action!");return v.yield(f.action(),4)}if(2!=v.nextAddress)return f.owner.completeFinish(),v.leaveTryBlock(0);m=v.enterCatchBlock();(r=f.world())?
r.logError(m):console.error(m);v.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"MenuItem"}},{key:"properties",get:function(){return{acceptsDrops:{defaultValue:!1},fixedWidth:{defaultValue:!1},fixedHeight:{defaultValue:!1},fill:{defaultValue:oh.Color.transparent},fontSize:{defaultValue:14},draggable:{defaultValue:!1},readOnly:{defaultValue:!0},nativeCursor:{defaultValue:"pointer"},selected:{defaultValue:!1,set:function(a){this.selected!==a&&(this.addValueChange("selected",
a),a?(this.fontColor=oh.Color.white,this.fill=oh.Color.rgb(21,101,192)):(this.fill=oh.Color.transparent,this.fontColor=oh.Color.black))}},isMenuItem:{derived:!0,readOnly:!0,get:function(){return!0}},label:{get:function(){return this.valueAndAnnotation.value.map(function(a,f){return 0===f%2?a:""}).join("\n")},set:function(a){this.valueAndAnnotation={value:a,annotation:this.annotation}}},annotation:{get:function(){return this.valueAndAnnotation.annotation},set:function(a){this.valueAndAnnotation={value:this.value,
annotation:a}}},action:{},submenu:{}}}}],e,{pathInPackage:function(){return"menus.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:453,end:2976})}(oh.Label);oh.MenuItem=lS;oh.MenuItem=lS;oh.MenuItem=lS;oh.invalidItem={string:"invalid item",action:function(){return $world.setStatusMessage("invalid item")}};var mS=Ha("bb",function(b){var e=
lively.FreezerRuntime.recorderFor("lively.components/menus.js"),l=e.hasOwnProperty("Menu")&&"function"===typeof e.Menu?e.Menu:e.Menu=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Pb(l,b,[{key:"startFinish",value:function(){this.ownerMenu&&this.ownerMenu.startFinish();this._waitingForFinish=!0}},{key:"completeFinish",value:function(){this.ownerMenu&&this.ownerMenu.completeFinish();this.finishedPromise.resolve(!0)}},
{key:"whenFinished",value:function(){return this.finishedPromise.promise}},{key:"onChange",value:function(a){switch(a.prop){case "itemPadding":case "fontSize":case "fontFamily":this.updateMorphs()}Pb._get(Object.getPrototypeOf(l.prototype),"onChange",this).call(this,a)}},{key:"remove",value:function(){var a=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){if(1==f.nextAddress)return f.yield(a.animate({opacity:0,duration:300}),2);a._waitingForFinish||a.completeFinish();Pb._get(Object.getPrototypeOf(l.prototype),
"remove",a).call(a);f.jumpToEnd()})}},{key:"ensureItem",value:function(a){if(!a)return oh.invalidItem;if(a.title)return this.title=a.title,null;if(a.isDivider)return a;if(a.hasOwnProperty("string")&&a.hasOwnProperty("action"))return oh.obj.select(a,["string","action","annotation"]);if(Array.isArray(a)){var f=$jscomp.makeIterator(a),m=f.next().value;f=f.next().value;return"string"===typeof m||Array.isArray(m)?f&&"function"!==typeof f?"object"===typeof f&&f.getItems?{label:m,submenu:f.getItems,annotation:[" ",
{textStyleClasses:["fa","fa-caret-right"]}]}:Array.isArray(f)?{label:m,submenu:f,annotation:[" ",{textStyleClasses:["fa","fa-caret-right"]}]}:oh.invalidItem:{label:m,action:f||function(){return $world.setStatusMessage(m)}}:oh.invalidItem}if(a.command){var r=a.command,v=a.showKeyShortcuts,x=a.target;f=a.alias;var y=a.args;a=a.tooltip;if(!r||!x)return oh.invalidItem;void 0===v&&(v=!0);v=v?"string"===typeof v?v:x.keysForCommand(r):null;return{tooltip:a,string:f||r,annotation:v?["\t"+v,{fontSize:"70%"}]:
["",{}],action:function(){return x.execCommand(r,y)}}}return oh.invalidItem}},{key:"updateMorphs",value:function(){var a=this;this.submorphs=[];var f=this.padding.left(),m=this.padding.right(),r=this.padding.top(),v=this.padding.bottom(),x=0,y=oh.pt(f,r),E={};this.fontFamily&&(E.fontFamily=this.fontFamily);this.fontSize&&(E.fontSize=this.fontSize);this.itemPadding&&(E.padding=this.itemPadding);this.title&&(r=this.addMorph(Object.assign({type:"label",value:this.title,name:"title",position:y,fontWeight:"bold"},
E)),y=r.bottomLeft,x=Math.max(r.width,x));this.items.forEach(function(F){var I=F.label,J=F.string,P=F.annotation,N=F.action,Y=F.submenu,W=F.tooltip;F=a.addMorph(F.isDivider?new oh.MenuDivider({position:y}):new oh.MenuItem(Object.assign({label:I||J,annotation:P,action:N,submenu:Y,tooltip:W,position:y},E)));y=F.bottomLeft;x=Math.max(F.width,x)});this.submorphs.forEach(function(F){F.isLabel&&(F.fit(),F.autofit=!1,F.fixedWidth=!0,F.fixedHeight=!0);F.width=x});this.extent=oh.pt(x+m+f,y.y+v)}},{key:"openSubMenuDelayed",
value:function(a,f,m){var r=this;this.openingSubMenuProcess&&clearTimeout(this.openingSubMenuProcess);this.openingSubMenuProcess=setTimeout(function(){try{r.openSubMenu(a,f,m)}catch(x){var v=r.world();v?v.logError(x):console.error(x)}},200)}},{key:"openSubMenu",value:function(a,f,m){if(f.selected){var r=this.submenu;if(r){if(r.ownerItemMorph===f||this.morphsContainingPoint(a.position).includes(r))return;this.removeSubMenu()}"function"===typeof m&&(m=m());a=this.submenu=this.addMorph(new oh.Menu({items:m,
ownerItemMorph:f,ownerMenu:this}));a.updateMorphs();a.offsetForOwnerMenu()}}},{key:"maybeRemoveSubmenu",value:function(){var a=this;oh.fun.debounceNamed(this.id+"-maybeRemoveSubmenu",300,function(){var f=a.world();if(f){var m=a.submenu,r=a.selectedItemMorph;f=f&&m&&m.fullContainsWorldPoint(f.firstHand.position);m&&m.ownerItemMorph!==r&&!m.ownerItemMorph.selected&&(f?(r&&(r.selected=!1),m.ownerItemMorph.selected=!0):a.removeSubMenu())}})();return this.removeOnMouseOut}},{key:"removeSubMenu",value:function(){if(this.submenu){var a=
this.submenu;this.submenu=a.ownerMenu=null;a.remove()}}},{key:"moveBoundsForVisibility",value:function(a,f){var m=0,r=0;a.right()>f.right()&&(m=-1*(a.right()-f.right()));var v=a.left()+m;0>v&&(m+=-v);a.bottom()>f.bottom()&&(r=-1*(a.bottom()-f.bottom()),m+=1);f=a.top()+r;0>f&&(r+=-f);return a.translatedBy(oh.pt(m,r))}},{key:"moveSubMenuBoundsForVisibility",value:function(a,f,m,r){r||(r=f.right()+a.width>m.right()?"left":"right");a=a.extent();a="left"===r?f.topLeft().addXY(-a.x,0).extent(a):f.topRight().extent(a);
a.bottom()>m.bottom()&&(f=-1*(a.bottom()-m.bottom()),a=a.translatedBy(oh.pt(0,f)));a.top()<m.top()&&(m=m.top()-a.top(),a=a.translatedBy(oh.pt(0,m)));return a}},{key:"offsetForOwnerMenu",value:function(){var a=this.ownerMenu,f=this.world().visibleBounds(),m=a.getGlobalTransform().inverse().transformRectToRect(f);a=this.clipForVisibility(this.moveSubMenuBoundsForVisibility(this.innerBounds(),a.selectedItemMorph?a.selectedItemMorph.bounds():a.innerBounds(),m),f);this.setBounds(a)}},{key:"clipForVisibility",
value:function(a,f){a=void 0===a?this.bounds():a;f=void 0===f?this.world().visibleBounds():f;var m=this.transformRectToMorph(this.world(),a.withX(0).withY(0));f.containsRect(m.insetBy(10))||(a=a.withExtent(oh.pt(5+a.width,Math.min(m.height,f.height))));return a}},{key:"offsetForWorld",value:function(a){a=this.innerBounds().translatedBy(a);if(this.owner.visibleBounds){var f=this.owner.visibleBounds();a=this.clipForVisibility(this.moveBoundsForVisibility(a,f),f)}this.setBounds(a)}},{key:"onHoverOut",
value:function(){this.removeOnMouseOut&&this.remove()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Menu"}},{key:"forItems",value:function(a,f){f=void 0===f?{title:""}:f;return new this(Object.assign({},f,{items:a}))}},{key:"openAt",value:function(a,f,m){m=void 0===m?{title:""}:m;f=this.forItems(f,m).openInWorldNear(a);f.offsetForWorld(a);return f}},{key:"openAtHand",value:function(a,f){f=void 0===f?{title:""}:f;var m=f.hand;a=this.forItems(a,oh.obj.dissoc(f,["hand"]));m=m?m.position:
oh.pt(0,0);a.titleMorph&&(m=m.addXY(0,-a.titleMorph.height));a.openInWorld(m);a.offsetForWorld(m);return a}},{key:"properties",get:function(){return{dropShadow:{initialize:function(){if(oh.config.fastShadows||!this.ownerMenu)this.dropShadow=!0,this.dropShadow.fast=!1}},submorphs:{initialize:function(){this.updateMorphs()}},epiMorph:{defaultValue:!0},acceptsDrops:{defaultValue:!1},hasFixedPosition:{defaultValue:!0},padding:{defaultValue:oh.Rectangle.inset(0,2)},itemPadding:{defaultValue:oh.Rectangle.inset(8,
4)},borderWidth:{defaultValue:1},fill:{defaultValue:oh.Color.white},borderColor:{defaultValue:oh.Color.gray.lighter()},borderRadius:{defaultValue:4},opacity:{defaultValue:.95},fontSize:{defaultValue:16},fontFamily:{defaultValue:"Helvetica Neue, Arial, sans-serif"},title:{get:function(){return this.getProperty("title")},set:function(a){this.addValueChange("title",a)}},finishedPromise:{initialize:function(){this.finishedPromise=oh.promise.deferred()}},ownerMenu:{},submenu:{},styleClasses:{defaultValue:["Halo"]},
submenus:{readOnly:!0,get:function(){return this.submenu?[this.submenu].concat(this.submenu.submenus):[]}},ownerItemMorph:{},removeOnMouseOut:{},items:{set:function(a){a=a.map(this.ensureItem.bind(this)).filter(Boolean);this.setProperty("items",a)}},selectedItemMorph:{derived:!0,readOnly:!0,get:function(){return this.itemMorphs.find(function(a){return a.selected})}},titleMorph:{derived:!0,readOnly:!0,get:function(){return this.getSubmorphNamed("title")}},itemMorphs:{derived:!0,readOnly:!0,get:function(){return this.submorphs.filter(function(a){return a.isMenuItem})}}}}}],
e,{pathInPackage:function(){return"menus.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:3089,end:16079})}(oh.Morph));oh.Menu=mS;oh.Menu=mS;oh.Menu=mS;var xza=Object.freeze({__proto__:null,MenuDivider:kS,MenuItem:lS,Menu:mS}),bl=lively.FreezerRuntime.recorderFor("lively.components/resizers.js");bl.arr=Mf;bl.pt=Ei;bl.Color=xg;
bl.Morph=ql;var nS=function(b){var e=lively.FreezerRuntime.recorderFor("lively.components/resizers.js"),l=e.hasOwnProperty("VerticalResizer")&&"function"===typeof e.VerticalResizer?e.VerticalResizer:e.VerticalResizer=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Pb(l,b,[{key:"onDrag",value:function(a){this.movedHorizontallyBy(a.position.x-a.state.lastDragPosition.x)}},{key:"divideRelativeToParent",value:function(a){if(!(!this.owner||
"number"!==typeof a||0>a||1<a)){var f=this.owner.extent.x-this.extent.x;if(!(0>f)){var m=this.getRelativeDivide();this.movedHorizontallyBy(f*(a-m))}}}},{key:"getRelativeDivide",value:function(a){var f=this.bounds();a=f.left();f=this.owner.extent.x-f.width;return 0>f?NaN:a/f}},{key:"movedHorizontallyBy",value:function(a){this.resizeIsSave(a)&&(this.fixed.concat(this.scalingRight).forEach(function(f){var m=f.position;f.position=bl.pt(m.x+a,m.y)}),this.scalingLeft.forEach(function(f){var m=f.extent;
f.extent=bl.pt(m.x+a,m.y)}),this.scalingRight.forEach(function(f){var m=f.extent;f.extent=bl.pt(m.x-a,m.y)}),this.position=this.position.addPt(bl.pt(a,0)))}},{key:"resizeIsSave",value:function(a){var f=this;return this.scalingLeft.every(function(m){return m.extent.x+a>=f.minWidth})&&this.scalingRight.every(function(m){return m.extent.x-a>=f.minWidth})}},{key:"addFixed",value:function(a){bl.arr.pushIfNotIncluded(this.fixed,a)}},{key:"addScalingLeft",value:function(a){bl.arr.pushIfNotIncluded(this.scalingLeft,
a)}},{key:"addScalingRight",value:function(a){bl.arr.pushIfNotIncluded(this.scalingRight,a)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"VerticalResizer"}},{key:"properties",get:function(){return{fill:{defaultValue:bl.Color.gray.lighter()},nativeCursor:{defaultValue:"ew-resize"},fixed:{defaultValue:[]},scalingLeft:{defaultValue:[]},scalingRight:{defualtValue:[]},minWidth:{defaultValue:20},draggable:{defaultValue:!0}}}}],e,{pathInPackage:function(){return"resizers.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:128,end:2703})}(bl.Morph);bl.VerticalResizer=nS;bl.VerticalResizer=nS;bl.VerticalResizer=nS;var oS=function(b){var e=lively.FreezerRuntime.recorderFor("lively.components/resizers.js"),l=e.hasOwnProperty("HorizontalResizer")&&"function"===typeof e.HorizontalResizer?e.HorizontalResizer:e.HorizontalResizer=function(a){a&&a[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Pb(l,b,[{key:"onDrag",value:function(a){this.movedVerticallyBy(a.position.y-a.state.lastDragPosition.y)}},{key:"divideRelativeToParent",value:function(a){if(!(!this.owner||"number"!==typeof a||0>a||1<a)){var f=this.owner.extent.y-this.extent.y;if(!(0>f)){var m=this.getRelativeDivide();this.movedVerticallyBy(f*(a-m))}}}},{key:"getRelativeDivide",value:function(a){var f=this.bounds();a=f.top();f=this.owner.extent.y-f.height;
return 0>f?NaN:a/f}},{key:"movedVerticallyBy",value:function(a){this.resizeIsSave(a)&&(this.fixed.concat(this.scalingBelow).forEach(function(f){var m=f.position;f.position=bl.pt(m.x,m.y+a)}),this.scalingAbove.forEach(function(f){var m=f.extent;f.extent=bl.pt(m.x,m.y+a)}),this.scalingBelow.forEach(function(f){var m=f.extent;f.extent=bl.pt(m.x,m.y-a)}),this.position=this.position.addPt(bl.pt(0,a)))}},{key:"resizeIsSave",value:function(a){var f=this;return this.scalingAbove.every(function(m){return m.extent.y+
a>=f.minHeight})&&this.scalingBelow.every(function(m){return m.extent.y-a>=f.minHeight})}},{key:"addFixed",value:function(a){bl.arr.pushIfNotIncluded(this.fixed,a)}},{key:"addScalingAbove",value:function(a){bl.arr.pushIfNotIncluded(this.scalingAbove,a)}},{key:"addScalingBelow",value:function(a){bl.arr.pushIfNotIncluded(this.scalingBelow,a)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"HorizontalResizer"}},{key:"properties",get:function(){return{fill:{defaultValue:bl.Color.gray.lighter()},
nativeCursor:{defaultValue:"ns-resize"},fixed:{defaultValue:[]},scalingBelow:{defaultValue:[]},scalingAbove:{defaultValue:[]},minHeight:{defaultValue:20},draggable:{defaultValue:!0}}}}],e,{pathInPackage:function(){return"resizers.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:2713,end:5319})}(bl.Morph);bl.HorizontalResizer=
oS;bl.HorizontalResizer=oS;bl.HorizontalResizer=oS;var yza=Object.freeze({__proto__:null,VerticalResizer:nS,HorizontalResizer:oS}),yg=lively.FreezerRuntime.recorderFor("lively.components/tree.js");yg.arr=Mf;yg.fun=vn;yg.obj=ng;yg.tree=ty;yg.string=Th;yg.promise=hg;yg.pt=Ei;yg.Rectangle=He;yg.Color=xg;yg.Morph=ql;yg.Text=dv;yg.config=em;yg.touchInputDevice=Sr;yg.Label=ev;yg.connect=Dl;yg.signal=Xl;yg.bowser=gt;var pS=Ha("bz",function(b){var e=lively.FreezerRuntime.recorderFor("lively.components/tree.js"),
l=e.hasOwnProperty("Tree")&&"function"===typeof e.Tree?e.Tree:e.Tree=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Pb(l,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){a=void 0===a?{}:a;if(!a.treeData)throw Error("Cannot create tree without TreeData!");Pb._get(Object.getPrototypeOf(l.prototype),Symbol.for("lively-instance-initialize"),this).call(this,a);this.resetCache();this.update()}},{key:"onChange",
value:function(a){Pb._get(Object.getPrototypeOf(l.prototype),"onChange",this).call(this,a);"fontSize fontColor selectionColor disableIndent nonSelectionFontColor selectionFontColor".split(" ").includes(a.prop)&&this.update(!0)}},{key:"resetCache",value:function(){this._lineHeightCache=null}},{key:"isTree",get:function(){return!0}},{key:"nodeStyle",get:function(){return{fontFamily:this.fontFamily,fontSize:this.fontSize,fontWeight:this.fontWeight,autofit:!this.resizeNodes}}},{key:"lineBounds",value:function(a){var f=
this.textLayout.charBoundsOfRow(this,a);a=yg.Rectangle.fromLiteral(yg.arr.first(f)).topLeft();f=yg.Rectangle.fromLiteral(yg.arr.last(f)).bottomRight();return yg.Rectangle.fromAny(a,f)}},{key:"recoverOriginalLine",value:function(a){for(var f=this.document.getTextAndAttributesOfLine(a),m=0;m<f.length;m++){var r=this._originalColor[m];r&&!yg.obj.isString(f[m])&&(f[m]?f[m].fontColor=r:f[m]={fontColor:r})}this.document.setTextAndAttributesOfLine(a,f)}},{key:"renderSelectedLine",value:function(a){var f=
this.document.getTextAndAttributesOfLine(a);this._originalColor=Array(f.length);for(var m=0;m<f.length;m++)0===m%2?f[m]&&f[m].isMorph&&(this._originalColor[m]=f[m]?f[m].fontColor||this.nonSelectionFontColor:null,f[m].fontColor=this.selectionFontColor,f[m].isSelected=!0):(this._originalColor[m]=(f[m]?f[m].fontColor:null)||this.nonSelectionFontColor,f[m]?f[m].fontColor=this.selectionFontColor:f[m]={fontColor:this.selectionFontColor});this.document.setTextAndAttributesOfLine(a,f);this.selectLine(a,!0);
this._lastSelectedIndex=this.selectedIndex}},{key:"computeTreeAttributes",value:function(a){if(!a.length)return[];for(var f=yg.arr.genN(8*(a.length-1),function(){return null}),m=1,r,v,x=this.disableIndent?0:1.3*this.fontSize;m<a.length;m++){r=8*(m-1);v=this.selectedIndex==m;a[m].node.isSelected=v;f[r]=" ";f[r+1]={fontSize:x,fontColor:yg.Color.transparent,textStyleClasses:["fas"],paddingRight:x*(a[m].depth-1)+"px"};f[r+3]={fontColor:yg.Color.transparent,textStyleClasses:["fas"],paddingTop:this.fontSize/
10+"px",paddingRight:this.fontSize/8+"px"};this.treeData.isLeaf(a[m].node)?f[r+2]=this.disableIndent?"":"    ":(f[r+2]=this.treeData.isCollapsed(a[m].node)?" \uf0da ":" \uf0d7 ",Object.assign(f[r+3],{paddingRight:this.treeData.isCollapsed(a[m].node)?this.fontSize/4+"px":"0px",paddingTop:"0px",nativeCursor:"pointer",fontColor:this.fontColor}));var y=this.treeData.safeDisplay(a[m].node);y.isMorph&&(y._capturedProps&&Object.assign(y,y._capturedProps),v&&(y._capturedProps=yg.obj.select(y,["fontColor"])),
y.fontColor=this.nonSelectionFontColor);f[r+4]=y;yg.arr.isArray(y)?f[r+5]=[]:f[r+5]={fontColor:this.fontColor};f[r+6]="\n";f[r+7]={}}f.push(" ",{fontSize:1.3*this.fontSize,textStyleClasses:["far"]});return 1<a.length?yg.arr.flatten(f):[]}},{key:"update",value:function(a){var f=this;if(!this._updating&&this.treeData&&this.nodeItemContainer){this._updating=!0;try{this.withMetaDo({isLayoutAction:!0},function(){var m=f.treeData.asListWithIndexAndDepth();f.treeData!==f.lastTreeData||f.lastNumberOfNodes!==
m.length||a?(f.replace({start:{row:0,column:0},end:f.documentEndPosition},f.computeTreeAttributes(m),!1,!1),f.invalidateTextLayout(!0,!1),f.whenRendered().then(function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){f.makeDirty();r.jumpToEnd()})})):f._lastSelectedIndex&&f.recoverOriginalLine(f._lastSelectedIndex-1);f.lastTreeData=f.treeData;f.lastNumberOfNodes=m.length;f.cursorPosition={row:0,column:0};0<f.selectedIndex&&f.renderSelectedLine(f.selectedIndex-1)})}finally{this._updating=
!1}}}},{key:"buildViewState",value:function(a){var f=this;"function"!==typeof a&&(a=function(v){return v});var m=this.selectedNode?a(this.selectedNode):null,r=new Map;yg.tree.prewalk(this.treeData.root,function(v){return r.set(a(v),f.treeData.isCollapsed(v))},function(v){return f.treeData.getChildrenIfUncollapsed(v)});return{selectionId:m,collapsedMap:r,scroll:this.scroll}}},{key:"applyViewState",value:function(a,f){var m=this,r,v,x,y,E,F,I,J;return $jscomp.asyncExecutePromiseGeneratorProgram(function(P){switch(P.nextAddress){case 1:"function"!==
typeof f&&(f=function(N){return N}),r=a,v=r.selectionId,x=r.collapsedMap,y=r.scroll,E=0,F=-1;case 2:I=m.nodes;if(E>=I.length){P.jumpTo(3);break}J=f(I[E]);v===J&&(F=E);if(!x.has(J)||x.get(J)){P.jumpTo(4);break}return P.yield(m.treeData.collapse(I[E],!1),4);case 4:E++;P.jumpTo(2);break;case 3:return m.selectedIndex=F,m.update(),m.scroll=y,m.scrollSelectionIntoView(),P.yield(yg.promise.delay(0),0)}})}},{key:"maintainViewStateWhile",value:function(a,f){var m=this,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){return 1==
v.nextAddress?(r=m.buildViewState(f),v.yield(a(),2)):v.yield(m.applyViewState(r,f),0)})}},{key:"onNodeCollapseChanged",value:function(a){var f=a.node,m=a.isCollapsed,r=this,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(x){if(1==x.nextAddress)return r.resetCache(),x.setCatchFinallyBlocks(2),x.yield(r.treeData.collapse(f,m),4);if(2!=x.nextAddress)return yg.signal(r,"nodeCollapseChanged",{node:f,isCollapsed:m}),r.update(),x.leaveTryBlock(0);v=x.enterCatchBlock();r.showError(v);x.jumpToEnd()})}},
{key:"uncollapse",value:function(a){a=void 0===a?this.selectedNode:a;var f=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){return 1==m.nextAddress?a&&f.treeData.isCollapsed(a)?m.yield(f.onNodeCollapseChanged({node:a,isCollapsed:!1}),2):m.return():m.return(a)})}},{key:"collapse",value:function(a){a=void 0===a?this.selectedNode:a;var f=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){return 1==m.nextAddress?!a||f.treeData.isCollapsed(a)?m.return():m.yield(f.onNodeCollapseChanged({node:a,
isCollapsed:!0}),2):m.return(a)})}},{key:"selectedPath",value:function(){return this.treeData.pathOf(this.selectedNode)}},{key:"selectPath",value:function(a){var f=this,m;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){return 1==r.nextAddress?(m=f,r.yield(f.treeData.followPath(a),2)):r.return(m.selectedNode=r.yieldResult)})}},{key:"gotoIndex",value:function(a){this.selectedNode=this.nodes[a];this.scrollIndexIntoView(a)}},{key:"scrollSelectionIntoView",value:function(){this.selectedNode&&
this.scrollIndexIntoView(this.selectedIndex)}},{key:"scrollIndexIntoView",value:function(a){this.scrollToIndex(a,"into view")}},{key:"centerSelection",value:function(){this.selectedNode&&this.scrollToIndex(this.selectedIndex,"center")}},{key:"scrollToIndex",value:function(a){this.scrollPositionIntoView({row:a-1,column:0})}},{key:"contextMenuForNode",value:function(a,f){yg.signal(this,"contextMenuRequested",{node:a,evt:f})}},{key:"onKeyDown",value:function(a){var f=this.world().focusedMorph;if(!f.isText||
f.readOnly)return Pb._get(Object.getPrototypeOf(l.prototype),"onKeyDown",this).call(this,a)}},{key:"onDragStart",value:function(a){Pb._get(Object.getPrototypeOf(l.prototype),"onDragStart",this).call(this,a);var f=this.textAttributeAtPoint(a.positionIn(this))||{},m=f.onDragStart,r=f.onDrag;f=f.onDragEnd;r&&(this._onDragHandler=r);f&&(this._onDragEndHandler=f);m&&m(a)}},{key:"onDrag",value:function(a){this._onDragHandler?this._onDragHandler(a):Pb._get(Object.getPrototypeOf(l.prototype),"onDrag",this).call(this,
a)}},{key:"onDragEnd",value:function(a){Pb._get(Object.getPrototypeOf(l.prototype),"onDragEnd",this).call(this,a);delete this._onDragHandler;this._onDragEndHandler&&this._onDragEndHandler(a);delete this._onDragEndHandler}},{key:"onMouseDown",value:function(a){var f=this,m,r,v,x,y,E;return $jscomp.asyncExecutePromiseGeneratorProgram(function(F){if(1==F.nextAddress)return m=f.textPositionFromPoint(a.positionIn(f)),r=m.row,v=m.column,x=f.nodes[r+1],x?!f.treeData.isLeaf(x)&&4>v?F.yield(x.isCollapsed,
3):(f.selectedIndex!=r+1&&(f.selectedIndex=r+1),F.jumpTo(2)):F.return();2!=F.nextAddress&&(F.yieldResult?f.uncollapse(x):f.collapse(x));y=f.textAttributeAt({row:r,column:v})||{};(E=y.onMouseDown)&&E(a);F.jumpToEnd()})}},{key:"onMouseUp",value:function(a){Pb._get(Object.getPrototypeOf(l.prototype),"onMouseUp",this).call(this,a);var f=(this.textAttributeAtPoint(a.positionIn(this))||{}).onMouseUp;f&&f(a)}},{key:"onHoverIn",value:function(a){Pb._get(Object.getPrototypeOf(l.prototype),"onHoverIn",this).call(this,
a);this.activateOnHover&&(this.clipMode="auto")}},{key:"onHoverOut",value:function(a){Pb._get(Object.getPrototypeOf(l.prototype),"onHoverOut",this).call(this,a);!yg.touchInputDevice&&this.activateOnHover&&(this.clipMode="hidden")}},{key:"onContextMenu",value:function(a){if(a.targetMorph===this){a.stop();var f=this.textPositionFromPoint(a.positionIn(this));(f=this.nodes[f.row+1])&&this.contextMenuForNode(f,a)}}},{key:"keybindings",get:function(){return[{keys:"Up|Ctrl-P",command:"select node above"},
{keys:"Down|Ctrl-N",command:"select node below"},{keys:"Left",command:"collapse selected node"},{keys:"Right",command:"uncollapse selected node"},{keys:"Alt-V|PageUp",command:"page up"},{keys:"Ctrl-V|PageDown",command:"page down"},{keys:"Alt-Shift-,",command:"goto first item"},{keys:"Alt-Shift-.",command:"goto last item"},{keys:"Alt-Space",command:"select via filter"},{keys:"Ctrl-L",command:"realign top-bottom-center"},{keys:{mac:"Meta-[",win:"Ctrl-["},command:{command:"collapse or uncollapse all siblings",
args:{what:"collapse"}}},{keys:{mac:"Meta-]",win:"Ctrl-]"},command:{command:"collapse or uncollapse all siblings",args:{what:"uncollapse"}}},{keys:"Alt-N",command:"goto next sibling"},{keys:"Alt-P",command:"goto prev sibling"},{keys:"Alt-U",command:"goto parent"}]}},{key:"commands",get:function(){return yg.treeCommands}},{key:"highlightChangedNodes",value:function(a){this.treeData.diff(a).forEach(function(f){f=$jscomp.makeIterator(f);var m=f.next().value;f.next();return m.renderedNode&&m.renderedNode.highlight()})}}],
[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Tree"}},{key:"properties",get:function(){return{selectionColor:{type:"ColorGradient",defaultValue:yg.Color.rgb(21,101,192)},fontFamily:{defaultValue:yg.config.codeEditor.defaultStyle.fontFamily},nativeCursor:{defaultValue:"auto"},selectable:{defaultValue:!1},acceptsDrops:{defaultValue:!1},readOnly:{defaultValue:!0},fixedWidth:{defaultValue:!0},fixedHeight:{defaultValue:!0},disableIndent:{defaultValue:!1},activateOnHover:{defaultValue:!0},
lineHeight:{defaultValue:1.5},clipMode:{defaultValue:"auto"},padding:{defaultValue:yg.Rectangle.inset(3)},master:{initialize:function(){this.master={auto:"styleguide://SystemWidgets/tree/light"}}},resizeNodes:{defaultValue:!1,set:function(a){this.setProperty("resizeNodes",a);this.resetCache();this.update()}},treeData:{after:["selection"],set:function(a){this.setProperty("treeData",a);this.resetCache();this.update()}},selectedIndex:{derived:!0,after:["selectedNode","nodes"],get:function(){return this.selectedNode?
this.nodes.indexOf(this.selectedNode):-1},set:function(a){this.selectedNode=this.nodes[a]}},nodes:{derived:!0,after:["treeData"],get:function(){return this.treeData.asList()}},defaultViewState:{get:function(){return Object.assign({},Pb._get(Object.getPrototypeOf(l),"prototype",this).defaultViewState,{fastScroll:!1})}},selectedNode:{set:function(a){this.setProperty("selectedNode",a);this.update()}},selectedNodeAndSiblings:{readOnly:!0,derived:!0,after:["selectedNode","treeData"],get:function(){return this.selectedNode?
this.treeData.nodeWithSiblings(this.selectedNode):[]}},selectionFontColor:{isStyleProp:!0,defaultValue:yg.Color.white,set:function(a){this.setProperty("selectionFontColor",a)}},nonSelectionFontColor:{isStyleProp:!0,defaultValue:yg.Color.rgbHex("333"),set:function(a){this.setProperty("nonSelectionFontColor",a)}},nodeItemContainer:{derived:!0,readOnly:!0,after:["submorphs"],get:function(){return this}},nodeMorphs:{derived:!0,readOnly:!0,after:["submorphs"],get:function(){return this.nodeItemContainer.submorphs.slice()}}}}}],
e,{pathInPackage:function(){return"tree.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:1470,end:17455})}(yg.Text));yg.Tree=pS;yg.Tree=pS;yg.Tree=pS;var qS=Ha("bx",function(b){var e=lively.FreezerRuntime.recorderFor("lively.components/tree.js"),l=e.hasOwnProperty("TreeData")&&"function"===typeof e.TreeData?e.TreeData:e.TreeData=
function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Pb(l,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){this.root=a;this.parentMap=new WeakMap}},{key:"__dont_serialize__",get:function(){return["parentMap"]}},{key:"__deserialize__",value:function(){this.parentMap=new WeakMap}},{key:"display",value:function(a){throw Error("Not yet implemented");}},{key:"isCollapsed",value:function(a){throw Error("Not yet implemented");
}},{key:"collapse",value:function(a,f){throw Error("Not yet implemented");}},{key:"getChildren",value:function(a){throw Error("Not yet implemented");}},{key:"isLeaf",value:function(a){throw Error("Not yet implemented");}},{key:"getChildrenIfUncollapsed",value:function(a){return this.isCollapsed(a)?[]:this.getChildren(a)}},{key:"safeDisplay",value:function(a){try{return this.display(a)}catch(f){return"[TreeData] Error when trying to display node: "+f}}},{key:"nodeToString",value:function(a){a=this.safeDisplay(a);
return"string"===typeof a?a:a&&Array.isArray(a)?a.map(function(f,m){return 0===m%2?f:""}).join(""):String(a)}},{key:"parentNode",value:function(a){var f=this;return this.parentMap.get(a)||yg.tree.detect(this.root,function(m){return!f.isLeaf(m)&&f.getChildrenIfUncollapsed(m).includes(a)},function(m){return f.getChildrenIfUncollapsed(m)})}},{key:"nodeWithSiblings",value:function(a){return(a=this.parentNode(a))?this.getChildrenIfUncollapsed(a):[]}},{key:"asList",value:function(){return this.asListWithIndexAndDepth().map(function(a){return a.node})}},
{key:"asListWithIndexAndDepth",value:function(a){var f=this;a=void 0===a?!1:a;var m=[];yg.tree.prewalk(this.root,function(r,v,x){return m.push({node:r,depth:x,i:v})},function(r){return f.getChildrenIfUncollapsed(r)});return a?yg.arr.filter(m,a):m}},{key:"pathOf",value:function(a){for(var f=[];a;)f.unshift(a),a=this.parentNode(a);return f}},{key:"followPath",value:function(a,f,m){m=void 0===m?this.root:m;var r=this,v,x,y,E;return $jscomp.asyncExecutePromiseGeneratorProgram(function(F){switch(F.nextAddress){case 1:f||
(f=function(I,J){return I===J});v=a.findIndex(function(I){return f(I,m)});a=a.slice(v+1);if(!a.length)return F.return(null);x=m;case 2:if(!a.length){F.jumpTo(3);break}if(!r.isCollapsed(x)){F.jumpTo(4);break}return F.yield(r.collapse(x,!1),4);case 4:y=a.shift();E=r.getChildrenIfUncollapsed(x).find(function(I){return f(y,I)});if(!E)throw Error("Cannot descend into tree, next node of "+a.join(".")+" not found at "+r.safeDisplay(x));x=E;F.jumpTo(2);break;case 3:return F.return(x)}})}},{key:"diff",value:function(a){var f=
[],m=this.asListWithIndexAndDepth();a=a.asListWithIndexAndDepth();if(m.length!=a.length)return[];m=$jscomp.makeIterator(yg.arr.zip(m,a));for(a=m.next();!a.done;a=m.next()){var r=$jscomp.makeIterator(a.value);a=r.next().value;r=r.next().value;yg.obj.equals(a.node.value,r&&r.node.value)||f.push([a.node,r.node])}return f}},{key:"patch",value:function(a){var f=this.diff(a);if(0<f.length){a=$jscomp.makeIterator(f);for(f=a.next();!f.done;f=a.next()){var m=$jscomp.makeIterator(f.value);f=m.next().value;
m=m.next().value;f.value=m.value}return this}return a}},{key:"uncollapseAll",value:function(a,f,m){f=void 0===f?0:f;var r=this,v,x;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){switch(y.nextAddress){case 1:if(m){y.jumpTo(2);break}return y.yield(r.uncollapseAll(a,f,r.root),3);case 3:return y.return(y.yieldResult);case 2:if(!a(m,f)){y.jumpTo(0);break}if(!m.isCollapsed){y.jumpTo(5);break}return y.yield(r.collapse(m,!1),6);case 6:case 5:x=y.forIn(m.children);case 7:if(null==(v=x.getNext()))y.jumpTo(0);
else return y.yield(r.uncollapseAll(a,f+1,m.children[v]),7)}})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"TreeData"}}],e,{pathInPackage:function(){return"tree.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:17465,end:22466})}(void 0));yg.TreeData=qS;yg.TreeData=qS;yg.TreeData=qS;yg.treeCommands=[{name:"select via filter",
exec:function(b){var e,l,a,f,m,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){if(1==v.nextAddress)return e=b.treeData,e.asListWithIndexAndDepth(),e.asListWithIndexAndDepth().map(function(x){return Object.assign(x,{string:e.nodeToString(x.node)})}),l=yg.string.lines(yg.string.printTree(e.root,e.nodeToString.bind(e),e.getChildrenIfUncollapsed.bind(e))),a=e.asList().map(function(x,y){return{isListItem:!0,string:l[y],value:x}}),v.yield(b.world().filterableListPrompt("Select item",a),
2);f=v.yieldResult;m=$jscomp.makeIterator(f.selected);if(r=m.next().value)b.selectedNode=r,b.scrollSelectionIntoView();return v.return(!0)})}},{name:"page up",exec:function(b){b.scrollPageUp(1);var e=b.scroll,l=b.padding.top(),a=e.y;e=b.lineHeightCache.findIndex(function(f){return a<=(l+=f)});e--;b.gotoIndex(Math.max(1,e));return!0}},{name:"page down",exec:function(b){b.scrollPageDown(1);var e=b.scroll,l=b.padding.top(),a=e.y+b.height;e=b.lineHeightCache.findIndex(function(f){return a<=(l+=f)});e--;
b.gotoIndex(Math.min(e,b.nodes.length-1));return!0}},{name:"goto first item",exec:function(b){b.gotoIndex(1);return!0}},{name:"goto last item",exec:function(b){b.gotoIndex(b.nodes.length-1);return!0}},{name:"goto next sibling",exec:function(b){var e=b.selectedNodeAndSiblings;if(e=e[e.indexOf(b.selectedNode)+1])b.selectedNode=e,b.scrollSelectionIntoView();return!0}},{name:"goto prev sibling",exec:function(b){var e=b.selectedNodeAndSiblings;if(e=e[e.indexOf(b.selectedNode)-1])b.selectedNode=e,b.scrollSelectionIntoView();
return!0}},{name:"goto parent",exec:function(b){b.selectedNode&&(b.selectedNode=b.treeData.parentNode(b.selectedNode),b.scrollSelectionIntoView());return!0}},{name:"collapse selected node",exec:function(b){var e;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){return 1==l.nextAddress?(e=b.selectedNode,e?b.treeData.isCollapsed(e)?(b.selectedNode=b.treeData.parentNode(e),b.scrollSelectionIntoView(),l.jumpTo(2)):l.yield(b.onNodeCollapseChanged({node:b.selectedNode,isCollapsed:!0}),2):l.return(!0)):
l.return(!0)})}},{name:"uncollapse selected node",exec:function(b){return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){return 1==e.nextAddress?b.selectedNode?e.yield(b.onNodeCollapseChanged({node:b.selectedNode,isCollapsed:!1}),2):e.jumpTo(2):e.return(!0)})}},{name:"collapse or uncollapse all siblings",exec:function(b,e){function l(F){return yg.arr.filter(m.getChildrenIfUncollapsed(F),function(I){return!m.isLeaf(I)})}function a(F,I){return Promise.all(F.map(function(J){return b.onNodeCollapseChanged({node:J,
isCollapsed:I})}))}e=void 0===e?{what:"collapse"}:e;var f,m,r,v,x,y,E;return $jscomp.asyncExecutePromiseGeneratorProgram(function(F){if(1==F.nextAddress){f="collapse"===e.what;m=b.treeData;if(f){if(m.isCollapsed(b.selectedNode))return F.return(!0);v=m.parentNode(b.selectedNode);x=-1;yg.tree.prewalk(v,function(I,J,P){P<x||(P>x&&(x=P,r=[]),P===x&&yg.arr.pushIfNotIncluded(r,m.parentNode(I)))},m.getChildrenIfUncollapsed.bind(m))}else for(y=yg.arr.compact([m.parentNode(b.selectedNode)]);y.length;){r=yg.arr.flatmap(y,
function(I){return l(I)});E=r.every(function(I){return m.isCollapsed(I)===f});if(!E)break;y=r}return F.yield(a(r,f),2)}b.scrollSelectionIntoView();return F.return(!0)})}},{name:"select node above",exec:function(b){var e=b.nodes,l=b.selectedIndex;1>=l&&(l=e.length);b.selectedNode=e[l-1];b.scrollSelectionIntoView();return!0}},{name:"select node below",exec:function(b){var e=b.nodes,l=b.selectedIndex;if(-1>=l||l>=e.length-1)l=0;b.selectedNode=e[l+1];b.scrollSelectionIntoView();return!0}},{name:"realign top-bottom-center",
exec:function(b){if(b.selectedNode){var e=b.scroll,l=e.x;e=e.y;var a=b.lineBounds(b.selectedIndex),f=a.topLeft();a=b.height-a.height;e=2>Math.abs(f.y-e)?f.y-a:2>Math.abs(f.y-e-.5*a)?f.y:f.y-.5*a;b.scroll=yg.pt(l,e);return!0}}},{name:"print contents in text window",exec:function(b){var e=b.treeData;e=yg.string.printTree(e.root,e.nodeToString.bind(e),e.getChildrenIfUncollapsed.bind(e));var l=b.getWindow()?"printed "+b.getWindow().title:b.name;return b.world().execCommand("open text window",{title:l,
content:e,name:l,fontFamily:yg.config.codeEditor.defaultStyle.fontFamily})}}];var zza=Object.freeze({__proto__:null,Tree:pS,TreeData:qS}),nB=lively.FreezerRuntime.recorderFor("lively.components/iframe.js");nB.promise=hg;nB.HTMLMorph=VA;var rS=function(b){var e=lively.FreezerRuntime.recorderFor("lively.components/iframe.js"),l=e.hasOwnProperty("IFrameMorph")&&"function"===typeof e.IFrameMorph?e.IFrameMorph:e.IFrameMorph=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return Pb(l,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){a.src||a.srcdoc||(a.srcdoc="<p>Empty iframe</p>");Pb._get(Object.getPrototypeOf(l.prototype),Symbol.for("lively-instance-initialize"),this).call(this,a)}},{key:"changeSrc",value:function(a,f){var m=this,r=this.iframe,v=this._loadPromise;v&&!v.loaded&&v.reject();this._loadPromise=nB.promise.deferred();this._loadPromise.loaded=!1;r.onload=function(x){m._loadPromise.loaded=!0;m._loadPromise.resolve(x)};f=a||f;
v=a?"src":"srcdoc";a=a?"srcdoc":"src";this.addValueChange(a,null);this.addValueChange(v,f);r.removeAttribute(a);r.setAttribute(v,f);this._loadPromise[v]=f}},{key:"whenLoaded",value:function(){return this._loadPromise.promise}},{key:"reload",value:function(){return this.iframe.src=this.src}},{key:"run",value:function(a){return this.innerWindow.eval("("+a+")();")}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"IFrameMorph"}},{key:"printTextMorph",value:function(a){var f,m,r,v,x;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){if(1==
y.nextAddress)return y.yield(a.whenRendered(),2);if(3!=y.nextAddress)return f=a.env.renderer.getNodeForMorph(a),m=nB.IFrameMorph.open({srcdoc:f.outerHTML}),y.yield(m.whenLoaded(),3);r=m.innerWindow.document;r.body.style.whiteSpace="normal";r.body.style.margin="0.5cm";r.querySelector(".Text").style.width="100%";r.querySelector(".Text").style.overflow="visible";r.querySelectorAll(".marker-layer-part").forEach(function(E){return E.parentNode.removeChild(E)});v=r.querySelector(".text-layer");v.style.whiteSpace=
"pre-wrap";x=Array.from(v.querySelectorAll("div"));x.forEach(function(E){E.childNodes[0]&&(Array.from(E.childNodes).forEach(function(F){return v.insertBefore(F,E)}),v.insertBefore(r.createElement("br"),E),v.removeChild(E))});m.innerWindow.print();m.getWindow().remove();y.jumpToEnd()})}},{key:"open",value:function(a){a=void 0===a?{}:a;return(new this(a)).openInWindow({title:a.title||"iframe"}).targetMorph}},{key:"properties",get:function(){return{iframe:{after:["domNode"],readOnly:!0,get:function(){return this.domNode}},
innerWindow:{after:["iframe"],readOnly:!0,get:function(){return this.iframe.contentWindow}},innerWorld:{after:["innerWindow"],readOnly:!0,get:function(){return this.innerWindow.$world}},src:{after:["domNode"],set:function(a){this.changeSrc(a,null)}},srcdoc:{after:["domNode"],set:function(a){this.changeSrc(null,a)}},domNode:{get:function(){this._domNode||(this._domNode=this.document.createElement("iframe"),this._domNode.setAttribute("style","position: absolute; width: 100%; height: 100%;"),this._domNode.setAttribute("allowfullscreen",
!0));return this._domNode},set:function(a){return this._domNode=a}}}}}],e,{pathInPackage:function(){return"iframe.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:622,end:6160})}(nB.HTMLMorph);nB.IFrameMorph=rS;nB.IFrameMorph=rS;nB.IFrameMorph=rS;var Aza=Object.freeze({__proto__:null,IFrameMorph:rS}),sf=lively.FreezerRuntime.recorderFor("lively.components/window.js");
sf.arr=Mf;sf.promise=hg;sf.pt=Ei;sf.LinearGradient=zn;sf.Color=xg;sf.Rectangle=He;sf.Label=ev;sf.morph=qc;sf.Morph=ql;sf.HorizontalLayout=bv;sf.StyleSheet=$w;sf.connect=Dl;sf.signal=Xl;sf.easings=Rr;var q0=function(b){var e=lively.FreezerRuntime.recorderFor("lively.components/window.js"),l=e.hasOwnProperty("Window")&&"function"===typeof e.Window?e.Window:e.Window=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Pb(l,
b,[{key:"build",value:function(){this.submorphs=[this.buildHeader(),this.buildResizer()]}},{key:"openWindowMenu",value:function(){var a=this,f,m,r,v,x,y,E;return $jscomp.asyncExecutePromiseGeneratorProgram(function(F){return 1==F.nextAddress?(f=a.world()||a.env.world,m=a.targetMorph.world(),r=m.openMenu,v=[["Change Window Title",function(){var I;return $jscomp.asyncExecutePromiseGeneratorProgram(function(J){if(1==J.nextAddress)return J.yield(f.prompt("Enter New Name",{input:a.title}),2);if(I=J.yieldResult)a.title=
I;J.jumpToEnd()})}],["Align and resize",[{alias:"full",target:f,command:"resize active window",args:{window:a,how:"full"}},{alias:"left",target:f,command:"resize active window",args:{window:a,how:"left"}},{alias:"center",target:f,command:"resize active window",args:{window:a,how:"center"}},{alias:"right",target:f,command:"resize active window",args:{window:a,how:"right"}},{alias:"top",target:f,command:"resize active window",args:{window:a,how:"top"}},{alias:"bottom",target:f,command:"resize active window",
args:{window:a,how:"bottom"}},{alias:"reset",target:f,command:"resize active window",args:{window:a,how:"reset"}}]],["Window Management",[{alias:"minimize all except this",target:f,command:"toggle minimize all except active window"},{alias:"close all except this",target:f,command:"close all except active window"},{isDivider:!0},{alias:"minimize all",target:f,command:"toggle minimize all windows"},{alias:"close all",target:f,command:"close all windows"}]],{isDivider:!0}],x=v.concat,y=$jscomp,E=y.arrayFromIterable,
F.yield(a.targetMorph.menuItems(),2)):F.return(r.call(m,x.call(v,E.call(y,F.yieldResult))))})}},{key:"toggleFader",value:function(a){var f=this,m,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){switch(v.nextAddress){case 1:m=f.getSubmorphNamed("fader")||f.addMorph({name:"fader",fill:sf.Color.black.withA(.5),opacity:0,extent:f.extent});if(a){r=f.world().visibleBoundsExcludingTopBar().translateForInclusion(f.bounds());f._originalBounds=f.bounds();f.animate({bounds:r,duration:300});
f.borderColor=sf.Color.gray.darker();f._faderTriggered=!0;m.opacity=1;v.jumpTo(0);break}f._originalBounds&&(f.animate({bounds:f._originalBounds,duration:300}),f._originalBounds=null);f._faderTriggered=!1;return v.yield(f.whenRendered(),3);case 3:return v.yield(sf.promise.delay(100),4);case 4:return f.borderColor=sf.Color.gray,f._faderTriggered?v.return():v.yield(m.animate({opacity:0,duration:300}),5);case 5:m.remove(),v.jumpToEnd()}})}},{key:"isWindow",get:function(){return!0}},{key:"targetMorphBounds",
value:function(){return new sf.Rectangle(0,25,this.width,this.height-25)}},{key:"relayoutWindowControls",value:function(){try{var a=this.innerBounds(),f=this.ui.windowTitle,m=this.ui.resizer,r=a.withHeight(25),v=this.ui.header,x=this.ui.windowControls.bounds().right()+3,y=r.withLeftCenter(sf.pt(x,r.height/2));m.bottomRight=a.bottomRight();!this.minimized&&this.targetMorph&&this.targetMorph.isLayoutable&&this.targetMorph.setBounds(this.targetMorphBounds());f.textBounds().width<r.width-2*x?f.center=
r.center():f.leftCenter=y.leftCenter();v.width=this.width}catch(E){}}},{key:"ensureNotOverTheTop",value:function(){var a=this,f=this.world();if(f){var m=this.globalBounds();f.withTopBarDo(function(r){m.top()<r.height&&a.moveBy(sf.pt(0,r.height-m.top()))})}}},{key:"buildHeader",value:function(){return sf.morph({name:"header",extent:sf.pt(this.width,50),submorphs:[sf.morph({name:"window controls",styleClasses:["buttonGroup"],submorphs:this.buildButtons()}),this.buildTitleLabel()]})}},{key:"buildButtons",
value:function(){var a=this.getSubmorphNamed("close")||sf.morph({name:"close",styleClasses:["windowButton","closeButton"],tooltip:"close window",submorphs:[sf.Label.icon("times",{name:"label",styleClasses:["defaultLabelStyle","default"]})]});sf.connect(a,"onMouseDown",this,"close");var f=this.getSubmorphNamed("minimize")||sf.morph({name:"minimize",styleClasses:["windowButton","minimizeButton"],tooltip:"collapse window",submorphs:[sf.Label.icon("minus",{name:"label",styleClasses:["defaultLabelStyle",
"default"]})]});sf.connect(f,"onMouseDown",this,"minimized",{updater:function(r){r(!this.targetObj.minimized)}});if(this.resizable){var m=this.getSubmorphNamed("menu")||sf.morph({name:"menu",styleClasses:["windowButton","windowMenuButton"],tooltip:"Open Window Menu",submorphs:[sf.Label.icon("chevron-down",{name:"label",styleClasses:["defaultLabelStyle","default"]})]});sf.connect(m,"onMouseDown",this,"openWindowMenu")}return sf.arr.compact([a,f,m])}},{key:"buildTitleLabel",value:function(){var a=sf.morph({padding:sf.Rectangle.inset(0,
2,0,0),styleClasses:["windowTitleLabel"],type:"label",name:"window title",tooltip:"double click to maximize/reset",reactsToPointer:!0,value:""});sf.connect(a,"onDoubleMouseDown",this,"toggleMaximize");return this.addMorph(a)}},{key:"resizeBy",value:function(a){Pb._get(Object.getPrototypeOf(l.prototype),"resizeBy",this).call(this,a);this.relayoutWindowControls()}},{key:"resizeAt",value:function(a){a=$jscomp.makeIterator(a);var f=a.next().value;a=a.next().value;var m=this.bounds();switch(f){case "right":this.resizeBy(a.withY(0));
break;case "bottom right":this.resizeBy(a);break;case "bottom":this.resizeBy(a.withX(0));break;case "left":f=this.right;this.resizeBy(a.withY(0).negated());this.right=f;break;case "bottom left":f=this.right;this.resizeBy(a.scaleByPt(sf.pt(-1,1)));this.right=f;break;case "top":f=m.x;var r=m.y+a.y;var v=m.width;a=m.height-a.y;this.setBounds(new sf.Rectangle(f,r,v,a));break;case "top left":f=m.x+a.x;r=m.y+a.y;v=m.width-a.x;a=m.height-a.y;this.setBounds(new sf.Rectangle(f,r,v,a));break;case "top right":f=
m.x,r=m.y+a.y,v=m.width+a.x,a=m.height-a.y,this.setBounds(new sf.Rectangle(f,r,v,a))}this.relayoutResizer()}},{key:"relayoutResizer",value:function(){var a=this.getSubmorphNamed("resizer"),f=$jscomp.makeIterator(a.submorphs),m=f.next().value,r=f.next().value,v=f.next().value,x=f.next().value,y=f.next().value,E=f.next().value,F=f.next().value;f=f.next().value;m.height=this.height-10;m.bottomRight=this.extent.subXY(0,10);r.bottomRight=this.extent;v.height=this.height-10;v.bottomLeft=sf.pt(0,this.height-
10);x.bottomLeft=sf.pt(0,this.height);y.width=this.width-20;y.bottomLeft=sf.pt(10,this.height);E.width=this.width-20;E.bottomLeft=sf.pt(10,2.5);F.topLeft=sf.pt(0,0);f.topRight=sf.pt(this.width,0);a.position=sf.pt(0,0)}},{key:"buildResizer",value:function(){var a,f,m,r,v,x,y;var E=sf.Color.transparent;var F=sf.morph({name:"resizer",fill:sf.Color.transparent,position:sf.pt(0,0),submorphs:[a=sf.morph({name:"right resizer",fill:E,width:10,draggable:!0,nativeCursor:"ew-resize"}),f=sf.morph({name:"bottom right resizer",
fill:E,extent:sf.pt(10,10),draggable:!0,nativeCursor:"nwse-resize"}),m=sf.morph({name:"left resizer",fill:E,width:10,draggable:!0,nativeCursor:"ew-resize"}),r=sf.morph({name:"bottom left resizer",draggable:!0,fill:E,extent:sf.pt(10,10),nativeCursor:"nesw-resize"}),v=sf.morph({name:"bottom resizer",draggable:!0,fill:E,height:10,nativeCursor:"ns-resize"}),x=sf.morph({name:"top resizer",draggable:!0,fill:E,height:2.5,nativeCursor:"ns-resize"}),y=sf.morph({name:"top left resizer",draggable:!0,fill:E,
extent:sf.pt(10,10),nativeCursor:"nwse-resize"}),E=sf.morph({name:"top rigth resizer",draggable:!0,fill:E,extent:sf.pt(10,10),nativeCursor:"nesw-resize"})]});sf.connect(x,"onDrag",this,"resizeAt",{converter:function(I){return["top",I.state.dragDelta]}});sf.connect(E,"onDrag",this,"resizeAt",{converter:function(I){return["top right",I.state.dragDelta]}});sf.connect(y,"onDrag",this,"resizeAt",{converter:function(I){return["top left",I.state.dragDelta]}});sf.connect(f,"onDrag",this,"resizeAt",{converter:function(I){return["bottom right",
I.state.dragDelta]}});sf.connect(a,"onDrag",this,"resizeAt",{converter:function(I){return["right",I.state.dragDelta]}});sf.connect(v,"onDrag",this,"resizeAt",{converter:function(I){return["bottom",I.state.dragDelta]}});sf.connect(m,"onDrag",this,"resizeAt",{converter:function(I){return["left",I.state.dragDelta]}});sf.connect(r,"onDrag",this,"resizeAt",{converter:function(I){return["bottom left",I.state.dragDelta]}});this.addMorph(F);this.relayoutResizer();return F}},{key:"toggleMaximize",value:function(){this.minized||
(this.maximized=!this.maximized)}},{key:"applyMaximize",value:function(){this.maximized?$world.execCommand("resize active window",{window:this,how:"full"}):$world.execCommand("resize active window",{window:this,how:"reset"})}},{key:"toggleMinimize",value:function(){var a=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){a.minimized=!a.minimized;f.jumpToEnd()})}},{key:"applyMinimize",value:function(){var a=this,f,m,r,v,x,y,E,F,I,J,P,N,Y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(W){if(1==
W.nextAddress){if(!a.targetMorph)return W.return();f=a;m=f.nonMinizedBounds;r=f.minimized;v=f.width;x=a.ui;y=x.windowTitle;E=x.resizer;F=a.bounds();I=a.getSubmorphNamed("minimize");J=sf.easings.outQuad;if(!r)return a.minimizedBounds=F,a.withMetaDo({metaInteraction:!0},function(){a.targetMorph&&(a.targetMorph.visible=!0)}),m=a.world().visibleBoundsExcludingTopBar().translateForInclusion(m||F),a.animate({bounds:m,styleClasses:["neutral","active"].concat($jscomp.arrayFromIterable(sf.arr.without(a.styleClasses,
"minimzed"))),duration:100,easing:J}),I.tooltip="collapse window",W.jumpTo(2);a.nonMinizedBounds=F;P=(a.minimizedBounds||F).withExtent(sf.pt(v,28));N=y.textBounds();Y=a.get("window controls").bounds().right()+3;N.width+2*Y<P.width&&(P=P.withWidth(N.width+Y+5));a.minimizedBounds=P;I.tooltip="uncollapse window";return W.yield(a.animate({styleClasses:["minimized","active"].concat($jscomp.arrayFromIterable(sf.arr.without(a.styleClasses,"neutral"))),bounds:P,duration:100,easing:J}),3)}2!=W.nextAddress&&
a.targetMorph&&(a.targetMorph.isComponent?a.targetMorph.top=a.height:a.targetMorph.visible=!1);y.reactsToPointer=!a.minimized;E.visible=!a.minimized;a.relayoutWindowControls();W.jumpToEnd()})}},{key:"setBounds",value:function(a){Pb._get(Object.getPrototypeOf(l.prototype),"setBounds",this).call(this,a);this.relayoutResizer();this.relayoutWindowControls()}},{key:"setBounds",value:function(a){Pb._get(Object.getPrototypeOf(l.prototype),"setBounds",this).call(this,a);this.relayoutResizer();this.relayoutWindowControls()}},
{key:"close",value:function(){var a=this,f,m,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){if(1==v.nextAddress)return a.targetMorph&&"function"===typeof a.targetMorph.onWindowClose?v.yield(a.targetMorph.onWindowClose(),3):v.jumpTo(2);2!=v.nextAddress&&(f=v.yieldResult);if(!1===f)return v.return();m=a.world();a.deactivate();a.remove();(r=m.activeWindow()||sf.arr.last(m.getWindows()))&&r.activate();sf.signal(a,"windowClosed",a);v.jumpToEnd()})}},{key:"onMouseUp",value:function(a){Pb._get(Object.getPrototypeOf(l.prototype),
"onMouseUp",this).call(this,a);this.minimized||(this.ui.resizer.visible=!0)}},{key:"onMouseDown",value:function(a){Pb._get(Object.getPrototypeOf(l.prototype),"onMouseDown",this).call(this,a);this.activate(a);this.minimized||this.ui.resizer.submorphs.includes(a.targetMorph)||(this.ui.resizer.visible=!1)}},{key:"onDragStart",value:function(a){var f=this;Pb._get(Object.getPrototypeOf(l.prototype),"onDragStart",this).call(this,a);this.targetMorph&&(a.state.origReactsToPointer=this.targetMorph.reactsToPointer,
this.withMetaDo({metaInteraction:!0},function(){f.targetMorph.reactsToPointer=!1}))}},{key:"onDragEnd",value:function(a){var f=this;Pb._get(Object.getPrototypeOf(l.prototype),"onDragEnd",this).call(this,a);this.targetMorph&&this.withMetaDo({metaInteraction:!0},function(){f.targetMorph.reactsToPointer=a.state.origReactsToPointer});this.minimized||(this.ui.resizer.visible=!0)}},{key:"onDrag",value:function(a){Pb._get(Object.getPrototypeOf(l.prototype),"onDrag",this).call(this,a);this.ensureNotOverTheTop()}},
{key:"focus",value:function(){var a=this.world(),f=this.targetMorph;a&&f&&(!a.focusedMorph||a.focusedMorph!==f&&!f.isAncestorOf(a.focusedMorph))&&f.focus()}},{key:"isActive",value:function(){var a=this.world();return a&&"bold"==this.ui.windowTitle.fontWeight?sf.arr.last(a.getWindows())===this:!1}},{key:"activate",value:function(a){var f=this;if(this.isActive())return this.bringToFront(),this.focus(a),this.renderOnGPU=!0,this.relayoutWindowControls(),this;this.master.whenApplied().then(function(){f.master=
{auto:"styleguide://System/window/light/active"}});this.world()?this.bringToFront():this.openInWorldNearHand();var m=this.world()||this.env.world;sf.arr.without(m.getWindows(),this).forEach(function(r){return r.deactivate()});this.focus(a);sf.signal(this,"windowActivated",this);Promise.resolve(this.master.applyIfNeeded(!0)).then(function(){return f.relayoutWindowControls()});return this}},{key:"deactivate",value:function(){var a=this;this.master&&"styleguide://System/window/light/inactive"==this.master.auto||
(this.master.whenApplied().then(function(){a.master={auto:"styleguide://System/window/light/inactive"}}),this.relayoutWindowControls(),this.renderOnGPU=!1)}},{key:"keybindings",get:function(){return Pb._get(Object.getPrototypeOf(l.prototype),"keybindings",this).concat([{keys:{mac:"Meta-Shift-L R E N",win:"Ctrl-Shift-L R E N"},command:"[window] change title"}])}},{key:"commands",get:function(){return Pb._get(Object.getPrototypeOf(l.prototype),"commands",this).concat([{name:"[window] change title",
exec:function(a,f){f=void 0===f?{}:f;var m,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){if(1==v.nextAddress)return(m=f.title)?v.jumpTo(2):v.yield(a.world().prompt("Enter new title",{input:a.title,historyId:"lively.morphic-window-title-hist"}),3);2!=v.nextAddress&&(m=v.yieldResult);if(r=m)a.title=r;return v.return(!0)})}}])}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Window"}},{key:"properties",get:function(){return{submorphs:{initialize:function(){this.build()}},
ui:{derived:!0,get:function(){return{header:this.get("header"),resizer:this.get("resizer"),windowControls:this.get("window controls"),windowTitle:this.get("window title")}}},master:{initialize:function(){this.master={auto:"styleguide://System/window/light/active"}}},styleClasses:{defaultValue:["active"]},clipMode:{defaultValue:"hidden"},resizable:{defaultValue:!0},title:{after:["submorphs"],derived:!0,get:function(){return this.ui.windowTitle.textString},set:function(a){var f=this,m,r,v,x,y,E;return $jscomp.asyncExecutePromiseGeneratorProgram(function(F){if(1==
F.nextAddress){m="string"===typeof a?[a,{}]:a;r=[];for(v=0;v<m.length;v+=2)x=m[v],y=m[v+1],x=x.replace(/\n/g,""),E=x.length+0-100,0<E&&(x=x.slice(0,-E)),r.push(x,y||{});f.ui.windowTitle.value=r;return F.yield(f.whenRendered(),2)}f.relayoutWindowControls();F.jumpToEnd()})}},targetMorph:{after:["submorphs"],derived:!0,get:function(){return sf.arr.withoutAll(this.submorphs,[this.get("header"),this.get("resizer")])[0]},set:function(a){var f=[this.get("header"),this.get("resizer")];sf.arr.withoutAll(this.submorphs,
f).forEach(function(m){return m.remove()});a&&this.addMorph(a,this.resizable?this.get("resizer"):!1);this.relayoutWindowControls()}},minimizedBounds:{serialize:!1},nonMinizedBounds:{},nonMaximizedBounds:{},minimized:{set:function(a){this.setProperty("minimized",a);this.applyMinimize()}},maximized:{set:function(a){this.setProperty("maximized",a);this.applyMaximize()}}}}}],e,{pathInPackage:function(){return"window.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:343,end:20831})}(sf.Morph);q0=sf.Window;var r0=Ha("aT",q0);sf.default=q0;var Pe=lively.FreezerRuntime.recorderFor("lively.components/prompts.js");Pe.Rectangle=He;Pe.rect=dj;Pe.Color=xg;Pe.pt=Ei;Pe.morph=qc;Pe.VerticalLayout=SA;Pe.Morph=ql;Pe.StyleSheet=$w;Pe.Text=dv;Pe.GridLayout=TA;Pe.Icon=Rp;Pe.HorizontalLayout=bv;Pe.InputLine=RJ;Pe.PasswordInputLine=WA;Pe.arr=Mf;Pe.obj=ng;Pe.promise=hg;Pe.connect=Dl;Pe.List=JG;Pe.FilterableList=
KK;Pe.RadioButtonGroup=JK;Pe.RadioButton=IK;var sS=function(b){var e=lively.FreezerRuntime.recorderFor("lively.components/prompts.js"),l=e.hasOwnProperty("AbstractPrompt")&&"function"===typeof e.AbstractPrompt?e.AbstractPrompt:e.AbstractPrompt=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Pb(l,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){a=void 0===a?{}:a;Pb._get(Object.getPrototypeOf(l.prototype),
Symbol.for("lively-instance-initialize"),this).call(this,Pe.obj.dissoc(a,["label","commands","keybindings"]));this.build(a);a.commands&&this.addCommands(a.commands);a.keybindings&&this.addKeyBindings(a.keybindings)}},{key:"isPrompt",get:function(){return!0}},{key:"resolve",value:function(a){return this.answer.resolve(a)}},{key:"reject",value:function(a){return this.answer.resolve(a)}},{key:"activate",value:function(){var a=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){a.focus();
a.answer=Pe.promise.deferred();a._isActive=!0;Pe.promise.finally(a.answer.promise,function(){return a._isActive=!1});a.autoRemove&&Pe.promise.finally(a.answer.promise,function(){return a.fadeOut(200)});return f.return(a.answer.promise)})}},{key:"isActive",value:function(){return!!this.world()&&this._isActive}},{key:"build",value:function(){throw Error("Not yet implemented");}},{key:"applyLayout",value:function(){throw Error("Not yet implemented");}},{key:"keybindings",get:function(){return Pb._get(Object.getPrototypeOf(l.prototype),
"keybindings",this).concat([{keys:"Enter",command:"resolve"},{keys:"Escape",command:"reject"},{keys:{mac:"Meta-."},command:"reject"}])}},{key:"commands",get:function(){var a=this;return Pb._get(Object.getPrototypeOf(l.prototype),"commands",this).concat([{name:"resolve",exec:function(f,m){a.resolve(m);return!0}},{name:"reject",exec:function(f,m){a.reject(m);return!0}}])}},{key:"transitionTo",value:function(a,f){f=void 0===f?300:f;var m=this,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(x){r=
Pe.morph({fill:m.fill,borderRadius:m.borderRadius});v=Pe.morph({fill:null,origin:Pe.pt(5,5)});a.opacity=0;a.fill=Pe.Color.transparent;a.openInWorld();m.fill=Pe.Color.transparent;$world.addMorph(r,m);r.setBounds(m.bounds());v.openInWorld();v.addMorph(a);a.center=v.origin;v.center=r.center=m.center;v.scale=a.width/m.width;r.whenRendered().then(function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){if(1==y.nextAddress)return m.animate({scale:m.width/a.width,opacity:0,duration:f}),
a.animate({opacity:1,duration:f}),v.animate({scale:1,duration:f}),y.yield(r.animate({bounds:v.bounds(),duration:f}),2);a.fill=r.fill;$world.addMorph(a);r.remove();m.remove();v.remove();y.jumpToEnd()})});x.jumpToEnd()})}},{key:"addNamed",value:function(a,f){var m=this.getSubmorphNamed(a)||this.addMorph(f.isMorph?f:Pe.morph(Object.assign({},f,{name:a})));f.label&&(m.label=f.label);f.isMorph&&(m.name=a);return m}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"AbstractPrompt"}},{key:"properties",
get:function(){return{fill:{defaultValue:Pe.Color.black.withA(.6)},extent:{defaultValue:Pe.pt(300,80)},borderRadius:{defaultValue:5},dropShadow:{initialize:function(){this.dopShadow=!0}},clipMode:{defaultValue:"hidden"},_isActive:{defaultValue:!1},autoRemove:{defaultValue:!0},epiMorph:{defaultValue:!0},answer:{defaultValue:null,derived:!0},label:{derived:!0,after:["submorphs"],get:function(){return this.getSubmorphNamed("promptTitle").value},set:function(a){this.getSubmorphNamed("promptTitle").value=
a}}}}}],e,{pathInPackage:function(){return"prompts.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:446,end:3935})}(Pe.Morph);Pe.AbstractPrompt=sS;Pe.AbstractPrompt=sS;Pe.AbstractPrompt=sS;var tS=Ha("b1",function(b){var e=lively.FreezerRuntime.recorderFor("lively.components/prompts.js"),l=e.hasOwnProperty("InformPrompt")&&"function"===
typeof e.InformPrompt?e.InformPrompt:e.InformPrompt=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Pb(l,b,[{key:"build",value:function(a){var f=this,m=a=void 0===a?{}:a,r=m.label,v=this.addNamed("promptTitle",{type:"text",lineWrapping:m.lineWrapping});m=this.addNamed("ok button",{type:"button",label:"OK",width:100});this.addNamed("button wrapper",{submorphs:[m]});v.textString=r;Pe.connect(m,"fire",this,"resolve");
a.lineWrapping||(this.opacity=0,this.whenRendered().then(function(){if(v.document){var x=f.center;f.width=Math.max(f.width,v.document.width+100);f.align(f.center,x)}f.opacity=1}))}},{key:"keybindings",get:function(){return Pb._get(Object.getPrototypeOf(l.prototype),"keybindings",this).concat([{keys:"Escape",command:"resolve"}])}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"InformPrompt"}},{key:"example",value:function(){$world.inform("Computer says no.")}},{key:"properties",get:function(){return{lineWrapping:{defaultValue:!0},
master:{initialize:function(){this.master={auto:"styleguide://SystemPrompts/prompts/inform"}}}}}}],e,{pathInPackage:function(){return"prompts.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:3944,end:5259})}(Pe.AbstractPrompt));Pe.InformPrompt=tS;Pe.InformPrompt=tS;Pe.InformPrompt=tS;var uS=Ha("b2",function(b){var e=lively.FreezerRuntime.recorderFor("lively.components/prompts.js"),
l=e.hasOwnProperty("ConfirmPrompt")&&"function"===typeof e.ConfirmPrompt?e.ConfirmPrompt:e.ConfirmPrompt=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Pb(l,b,[{key:"build",value:function(a){var f=this,m=this.addNamed("promptTitle",{type:"text"});m.value=a.label;a=this.addNamed("ok button",{type:"button",label:this.confirmLabel});var r=this.addNamed("cancel button",{type:"button",label:this.rejectLabel});this.addNamed("button wrapper",
{submorphs:[a,r]});Pe.connect(a,"fire",this,"resolve");Pe.connect(r,"fire",this,"reject");m.lineWrapping=this.lineWrapping;this.lineWrapping||(this.opacity=0,this.whenRendered().then(function(){m.lineWrapping=f.lineWrapping;var v=f.center;f.width=Math.max(f.width,m.document.width+100);f.center=v;f.opacity=1}))}},{key:"resolve",value:function(){Pb._get(Object.getPrototypeOf(l.prototype),"resolve",this).call(this,!0)}},{key:"reject",value:function(){Pb._get(Object.getPrototypeOf(l.prototype),"resolve",
this).call(this,!1)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ConfirmPrompt"}},{key:"example",value:function(){$world.confirm("Isn't this a nice prompt.")}},{key:"properties",get:function(){return{lineWrapping:{defaultValue:!0},confirmLabel:{defaultValue:"OK"},rejectLabel:{defaultValue:"CANCEL"},master:{initialize:function(){this.master={auto:"styleguide://SystemPrompts/prompts/confirm"}}}}}}],e,{pathInPackage:function(){return"prompts.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:5306,end:6757})}(Pe.AbstractPrompt));Pe.ConfirmPrompt=uS;Pe.ConfirmPrompt=uS;Pe.ConfirmPrompt=uS;var vS=Ha("b3",function(b){var e=lively.FreezerRuntime.recorderFor("lively.components/prompts.js"),l=e.hasOwnProperty("MultipleChoicePrompt")&&"function"===typeof e.MultipleChoicePrompt?e.MultipleChoicePrompt:e.MultipleChoicePrompt=function(a){a&&a[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Pb(l,b,[{key:"resolve",value:function(a){Pb._get(Object.getPrototypeOf(l.prototype),"resolve",this).call(this,a||this.getSubmorphNamed("choices").value)}},{key:"build",value:function(a){var f=a=void 0===a?{choices:["No choice"]}:a;a=f.label;var m=f.choices;f=this.addNamed("ok button",{type:"button"});var r=this.addNamed("cancel button",{type:"button"});a&&(this.addNamed("promptTitle",{type:"text"}).value=a);var v=this.addNamed("choices",
{name:"choices",type:Pe.RadioButtonGroup});this.addNamed("button wrapper",{submorphs:[f,r]});f&&Pe.connect(f,"fire",this,"resolve");r&&Pe.connect(r,"fire",this,"reject");this.whenRendered().then(function(){v.choices=m})}},{key:"onKeyDown",value:function(a){if(/^[0-9]$/.test(a.keyCombo)){var f=this.getSubmorphNamed("button "+(Number(a.keyCombo)-1));if(f)return f.trigger(),a.stop()}return Pb._get(Object.getPrototypeOf(l.prototype),"onKeyDown",this).call(this,a)}}],[{key:Symbol.for("__LivelyClassName__"),
get:function(){return"MultipleChoicePrompt"}},{key:"example",value:function(){$world.multipleChoicePrompt("Choose wisely:",{choices:[1,2,3]})}},{key:"properties",get:function(){return{title:{derived:!0,after:["submorphs"],set:function(a){this.getSubmorphNamed("title").value=a}},choices:{after:["submorphs"],derived:!0,set:function(a){var f;if(f=this.getSubmorphNamed("choices"))f.choices=a}},master:{initialize:function(){this.master={auto:"styleguide://SystemPrompts/prompts/multiple choice"}}}}}}],
e,{pathInPackage:function(){return"prompts.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:6846,end:8787})}(Pe.AbstractPrompt));Pe.MultipleChoicePrompt=vS;Pe.MultipleChoicePrompt=vS;Pe.MultipleChoicePrompt=vS;var wS=Ha("b4",function(b){var e=lively.FreezerRuntime.recorderFor("lively.components/prompts.js"),l=e.hasOwnProperty("TextPrompt")&&
"function"===typeof e.TextPrompt?e.TextPrompt:e.TextPrompt=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Pb(l,b,[{key:"maxWidth",get:function(){return this.env.world.visibleBounds().width-20}},{key:"resolve",value:function(){var a=this.getSubmorphNamed("input");this.validate(a.input)?Pb._get(Object.getPrototypeOf(l.prototype),"resolve",this).call(this,a.acceptInput()):a.indicateError(this.errorMessage)}},{key:"build",
value:function(a){var f=this,m=a.label,r=a.input,v=a.historyId;a=a.useLastInput;var x=this.addNamed("promptTitle",{type:"text"});x.value=m;m=this.addNamed("input",Pe.Text.makeInputLine({historyId:v,highlightWhenFocused:!1}));m.viewState.fastScroll=!1;m.textString=r||"";v&&a&&(r=Pe.arr.last(m.inputHistory.items))&&(m.textString=r);this.lineWrapping||(this.width=Math.max(this.width,x.textBounds().width+50));r=this.addNamed("ok button",{type:"button",label:this.confirmLabel});v=this.addNamed("cancel button",
{type:"button",label:this.rejectLabel});this.addNamed("button wrapper",{submorphs:[r,v]});Pe.connect(r,"fire",this,"resolve");Pe.connect(v,"fire",this,"reject");x.lineWrapping=this.lineWrapping;this.lineWrapping||(this.opacity=0,this.whenRendered().then(function(){var y=f.center;f.width=Math.max(350,x.document.width+100);f.opacity=1;f.center=y}));m.gotoDocumentEnd();m.scrollCursorIntoView()}},{key:"initLayout",value:function(){var a=this;if(!this.layout){var f=this.getSubmorphNamed("promptTitle"),
m=this.getSubmorphNamed("input");f.fit();this.whenRendered().then(function(){var r=Math.max(m.textBounds().width,f.textBounds().width)+20;a.width=Math.min(a.maxWidth,r);a.opacity=1});this.layout=new Pe.GridLayout({columns:[0,{paddingLeft:5},1,{paddingLeft:5,paddingRight:2.5,fixed:100},2,{paddingRight:5,paddingLeft:2.5,fixed:100},3,{paddingRight:5}],rows:[0,{fixed:f.textBounds().height+5,paddingBottom:5},1,{fixed:m.height},2,{fixed:35,paddingTop:5,paddingBottom:5}],grid:[["promptTitle","promptTitle",
"promptTitle","promptTitle"],["input","input","input","input"],[null,"ok button","cancel button",null]]})}}},{key:"focus",value:function(){this.getSubmorphNamed("input").focus()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"TextPrompt"}},{key:"example",value:function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){return 1==a.nextAddress?a.yield($world.prompt("enter",{input:"a little longer text"}),2):a.yield($world.prompt("enter\nsomething",{input:"???"}),0)})}},
{key:"properties",get:function(){return{lineWrapping:{defaultValue:!0},errorMessage:{defaultValue:"Invalid Input"},confirmLabel:{defaultValue:"OK"},rejectLabel:{defaultValue:"CANCEL"},validate:{serialize:!1,initialize:function(){this.validate=function(){return!0}}},master:{initialize:function(){this.master={auto:"styleguide://SystemPrompts/prompts/text"}}}}}}],e,{pathInPackage:function(){return"prompts.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:8796,end:12333})}(Pe.AbstractPrompt));Pe.TextPrompt=wS;Pe.TextPrompt=wS;Pe.TextPrompt=wS;var xS=Ha("b5",function(b){var e=lively.FreezerRuntime.recorderFor("lively.components/prompts.js"),l=e.hasOwnProperty("EditPrompt")&&"function"===typeof e.EditPrompt?e.EditPrompt:e.EditPrompt=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Pb(l,b,[{key:"maxWidth",
get:function(){return this.env.world.visibleBounds().width-20}},{key:"build",value:function(a){var f=a.input,m=a.mode,r=a.textStyle,v=a.evalEnvironment,x=void 0===a.resolveTextAttributes?!1:a.resolveTextAttributes;this.addNamed("promptTitle",{type:"text",value:a.label});this.resolveTextAttributes=x;r||(r={});m&&!r.fontFamily&&(r.fontFamily="Monaco, monospace");var y=this.addNamed("editor",{type:"text"});y.value=f||"";Object.assign(y,r);y.changeEditorMode(m).then(function(){v&&y.editorPlugin&&Object.assign(y.editorPlugin.evalEnvironment,
v)});a=y.textBounds().width+50;a>this.width-25&&(this.width=Math.min(this.maxWidth,a+125));a=this.addNamed("ok button",{type:"button"});f=this.addNamed("cancel button",{type:"button"});this.addNamed("button wrapper",{submorphs:[a,f]});Pe.connect(a,"fire",this,"resolve");Pe.connect(f,"fire",this,"reject");y.gotoDocumentEnd();y.scrollCursorIntoView()}},{key:"resolve",value:function(a){if(this.resolveTextAttributes)return Pb._get(Object.getPrototypeOf(l.prototype),"resolve",this).call(this,this.getSubmorphNamed("editor").textAndAttributes);
var f=this.getSubmorphNamed("editor").textString.trim();if(this.historyId){a=Pe.InputLine.getHistory(this.historyId);a.items=a.items.filter(function(m){return m!==f});for(a.items.push(f);a.items.length>a.items.max;)a.items.shift();a.index=a.items.length;Pe.InputLine.setHistory(this.historyId,a)}return Pb._get(Object.getPrototypeOf(l.prototype),"resolve",this).call(this,f)}},{key:"keybindings",get:function(){return[{keys:{mac:"Meta-Enter|Meta-S",win:"Ctrl-Enter|Ctrl-S"},command:"resolve"},{keys:"Escape",
command:"reject"},{keys:"Alt-P|Alt-Up",command:"history back"},{keys:"Alt-N|Alt-Down",command:"history forward"},{keys:"Alt-H",command:"browse history"}]}},{key:"commands",get:function(){var a=this;return Pb._get(Object.getPrototypeOf(l.prototype),"commands",this).concat([{name:"history back",exec:function(f,m){if(a.historyId){f=Pe.InputLine.getHistory(a.historyId);m=f.items;var r=f.index;f.index=--r;0>r&&(f.index=r=m.length-1);a.get("editor").undoManager.group();a.get("editor").textString=m[r];a.get("editor").undoManager.group()}return!0}},
{name:"browse history",exec:function(f,m){var r,v,x,y,E,F;return $jscomp.asyncExecutePromiseGeneratorProgram(function(I){if(1==I.nextAddress){if(!a.historyId)return I.jumpTo(2);r=Pe.InputLine.getHistory(a.historyId);return I.yield(a.world().editListPrompt("input history "+a.historyId,r.items,{requester:a}),3)}2!=I.nextAddress&&(v=I.yieldResult,x=v.status,y=v.list,E=$jscomp.makeIterator(v.selections),F=E.next().value,"canceled"!==x&&(r.items=y,Pe.InputLine.setHistory(a.historyId,r),F&&(r.index=r.items.indexOf(F),
a.get("editor").textString=F)));return I.return(!0)})}},{name:"history forward",exec:function(f,m){if(a.historyId){f=Pe.InputLine.getHistory(a.historyId);m=f.items;var r=f.index;f.index=++r;r>=m.length&&(f.index=r=0);a.get("editor").undoManager.group();a.get("editor").textString=m[r];a.get("editor").undoManager.group()}return!0}}])}},{key:"focus",value:function(){this.getSubmorphNamed("editor").focus()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"EditPrompt"}},{key:"example",value:function(){var a=
this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){if(1==f.nextAddress)return f.yield($world.editPrompt("enter",{input:"$world.show()",mode:"js",evalEnvironment:{context:23}}),2);a.editorPlugin.evalEnvironment;f.jumpToEnd()})}},{key:"properties",get:function(){return{extent:{defaultValue:Pe.pt(500,300)},master:{initialize:function(){this.master={auto:"styleguide://SystemPrompts/prompts/edit"}}}}}}],e,{pathInPackage:function(){return"prompts.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:12342,end:17054})}(Pe.AbstractPrompt));Pe.EditPrompt=xS;Pe.EditPrompt=xS;Pe.EditPrompt=xS;var yS=Ha("b6",function(b){var e=lively.FreezerRuntime.recorderFor("lively.components/prompts.js"),l=e.hasOwnProperty("PasswordPrompt")&&"function"===typeof e.PasswordPrompt?e.PasswordPrompt:e.PasswordPrompt=function(a){a&&a[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Pb(l,b,[{key:"build",value:function(a){var f=a.placeholder;this.addNamed("promptTitle",{type:"text",value:a.label,fixedHeight:!0});this.addNamed("input",{type:Pe.PasswordInputLine,name:"input",placeholder:f||""});a=this.addNamed("ok button",{type:"button",label:"OK"});f=this.addNamed("cancel button",{type:"button",label:"CANCEL"});Pe.connect(a,"fire",this,"resolve");Pe.connect(f,"fire",this,"reject");this.addNamed("button wrapper",
{submorphs:[a,f]})}},{key:"resolve",value:function(){Pb._get(Object.getPrototypeOf(l.prototype),"resolve",this).call(this,this.get("input").acceptInput())}},{key:"focus",value:function(){var a=this.get("input");a.whenRendered().then(function(){return a.focus()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"PasswordPrompt"}},{key:"example",value:function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){return a.yield($world.passwordPrompt("Enter your secret password:"),
0)})}},{key:"properties",get:function(){return{maxWidth:{readOnly:!0,get:function(){return 800}},master:{initialize:function(){this.master={auto:"styleguide://SystemPrompts/prompts/password"}}}}}}],e,{pathInPackage:function(){return"prompts.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:17063,end:18408})}(Pe.AbstractPrompt));
Pe.PasswordPrompt=yS;Pe.PasswordPrompt=yS;Pe.PasswordPrompt=yS;var zS=Ha("b7",function(b){var e=lively.FreezerRuntime.recorderFor("lively.components/prompts.js"),l=e.hasOwnProperty("ListPrompt")&&"function"===typeof e.ListPrompt?e.ListPrompt:e.ListPrompt=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Pb(l,b,[{key:"onChange",value:function(a){Pb._get(Object.getPrototypeOf(l.prototype),"onChange",this).call(this,
a);"extent"==a.prop&&this.layout&&!this.layout.active&&(a=a.value.subPt(a.prevValue),this.getSubmorphNamed("prompt list").height+=a.y)}},{key:"getMaster",value:function(){return this.filterable?"styleguide://SystemPrompts/prompts/list":"styleguide://SystemPrompts/prompts/edit list"}},{key:"reset",value:function(){this.items=[]}},{key:"build",value:function(a){var f=a.label,m=a.filterable,r=a.multiSelect,v=a.historyId,x=a.useLastInput,y=a.fuzzy,E=a.filterFunction,F=a.sortFunction,I=a.actions,J=a.selectedAction,
P=a.items,N=a.onSelection,Y=a.onFilter;this.extent=a.extent||Pe.pt(500,400);this.addNamed("promptTitle",{type:"text"}).value=f;var W=this.addNamed("prompt list",{type:m?Pe.FilterableList:Pe.List,multiSelect:r,historyId:v,useLastInput:x});m?this.get("list").master=!1:this.get("prompt list").master=!1;W.items=P;m&&y&&(W.fuzzy=y);m&&"function"===typeof E&&(W.filterFunction=E);m&&"function"===typeof F&&(W.sortFunction=F);N&&"function"===typeof N&&(this.onSelection=N);m&&I&&(W.actions=I);m&&J&&(W.selectedAction=
J);a=this.addNamed("ok button",{type:"button"});f=this.addNamed("cancel button",{type:"button"});this.addNamed("button wrapper",{submorphs:[a,f]});Pe.connect(a,"fire",this,"resolve");Pe.connect(f,"fire",this,"reject");m&&(Pe.connect(W,"accepted",this,"resolve"),Pe.connect(W,"canceled",this,"reject"),Y&&Pe.connect(W,"updateFilter",function(){return Y(W)}),W.whenRendered().then(function(){return W.relayout()}))}},{key:"resolve",value:function(a){var f=this.getSubmorphNamed("prompt list");a=a||f instanceof
Pe.FilterableList?f.acceptInput():{selected:f.selections,status:"accepted",actions:"default"};return this.answer.resolve(a)}},{key:"reject",value:function(){return this.answer.resolve({prompt:this,selected:[],filtered:[],status:"canceled"})}},{key:"focus",value:function(){this.getSubmorphNamed("prompt list").focus()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ListPrompt"}},{key:"example",value:function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){return a.yield($world.listPrompt("hello",
[1,2,3,4],{multiSelect:!0}),0)})}},{key:"properties",get:function(){return{items:{derived:!0,after:["submorphs"],set:function(a){0<this.submorphs.length&&(this.getSubmorphNamed("prompt list").items=a||[])}},filterable:{},master:{after:["filterable"],initialize:function(){this.master={auto:this.getMaster()}}},preselect:{derived:!0,after:["items"],set:function(a){var f=this.getSubmorphNamed("prompt list");f&&(f.selectedIndex=a,f.scrollSelectionIntoView)}},onSelection:{derived:!0,after:["preselect",
"submorphs"],set:function(a){var f=this,m=this.getSubmorphNamed("prompt list");m&&Pe.connect(m,"selection",function(r){return a(r,f)})}}}}}],e,{pathInPackage:function(){return"prompts.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:18506,end:22715})}(Pe.AbstractPrompt));Pe.ListPrompt=zS;Pe.ListPrompt=zS;Pe.ListPrompt=zS;var AS=
Ha("b8",function(b){var e=lively.FreezerRuntime.recorderFor("lively.components/prompts.js"),l=e.hasOwnProperty("EditListPrompt")&&"function"===typeof e.EditListPrompt?e.EditListPrompt:e.EditListPrompt=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Pb(l,b,[{key:"build",value:function(a){Pb._get(Object.getPrototypeOf(l.prototype),"build",this).call(this,a);this.getSubmorphNamed("prompt list").items=a.items;a=this.addNamed("add item button",
{type:"button",label:Pe.Icon.makeLabel("plus")});var f=this.addNamed("remove item button",{type:"button",label:Pe.Icon.makeLabel("minus")});this.getSubmorphNamed("button wrapper").addMorph(a);this.getSubmorphNamed("button wrapper").addMorph(f);Pe.connect(a,"fire",this,"addItemToList");Pe.connect(f,"fire",this,"removeSelectedItemsFromList")}},{key:"removeSelectedItemsFromList",value:function(){var a=this,f,m;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){f=a.get("prompt list");m=1!=
f.selectedItems.length?-1:0===f.selectedIndex?0:f.selectedIndex-1;f.items=Pe.arr.withoutAll(f.items,f.selectedItems);0>m?f.selection=null:f.selectedIndex=m;f.focus();r.jumpToEnd()})}},{key:"addItemToList",value:function(){var a=this,f,m,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(x){if(1==x.nextAddress)return f=a.get("prompt list"),m=f.selection?f.items[f.selectedIndex].string:"",x.yield(a.world().prompt("Input to add to the list",{historyId:a.historyId||"EditListPrompt-input-history",
input:m}),2);r=x.yieldResult;if(!r)return x.return();f=a.get("list");v=f.selection?f.selectedIndex+1:f.items.length;f.addItemAt(r,v);f.focus();f.selectedIndex=v;x.jumpToEnd()})}},{key:"keybindings",get:function(){return Pb._get(Object.getPrototypeOf(l.prototype),"keybindings",this).concat([{keys:{mac:"Meta-Enter",win:"Ctrl-Enter"},command:"resolve"},{keys:"Ctrl-G",command:"deselect"},{keys:"Shift-=|+",command:"add item to list"},{keys:"Delete|-|Backspace",command:"remove item from list"}])}},{key:"commands",
get:function(){var a=this;return Pb._get(Object.getPrototypeOf(l.prototype),"commands",this).concat([{name:"deselect",exec:function(){a.get("list").selection=null;return!0}},{name:"add item to list",exec:function(){a.addItemToList();return!0}},{name:"remove item from list",exec:function(){a.removeSelectedItemsFromList();return!0}}])}},{key:"resolve",value:function(){var a=this.get("prompt list");return this.answer.resolve({list:a.values,selections:a.selections})}},{key:"reject",value:function(){return this.answer.resolve({list:[],
selections:[],status:"canceled"})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"EditListPrompt"}},{key:"example",value:function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){return a.yield($world.editListPrompt("hello",[1,2,3,4],{multiSelect:!0}),0)})}},{key:"properties",get:function(){return{master:{initialize:function(){this.master={auto:"styleguide://SystemPrompts/prompts/edit list"}}}}}}],e,{pathInPackage:function(){return"prompts.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:22724,end:25612})}(Pe.ListPrompt));Pe.EditListPrompt=AS;Pe.EditListPrompt=AS;Pe.EditListPrompt=AS;var s0=Object.freeze({__proto__:null,AbstractPrompt:sS,InformPrompt:tS,ConfirmPrompt:uS,MultipleChoicePrompt:vS,TextPrompt:wS,EditPrompt:xS,PasswordPrompt:yS,ListPrompt:zS,EditListPrompt:AS}),nd=lively.FreezerRuntime.recorderFor("lively.components/widgets.js");
nd.obj=ng;nd.PropertyPath=Ih;nd.string=Th;nd.num=Um;nd.arr=Mf;nd.properties=Kr;nd.pt=Ei;nd.Color=xg;nd.Rectangle=He;nd.rect=dj;nd.signal=Xl;nd.connect=Dl;nd.disconnect=mg;nd.Morph=ql;nd.ShadowObject=it;nd.morph=qc;nd.Text=dv;nd.GridLayout=TA;nd.HorizontalLayout=bv;nd.Path=pD;nd.Ellipse=oD;nd.Label=ev;nd.Tooltip=qD;nd.Icon=Rp;nd.kld=ac;var ega=nd.kld;nd.Shapes=ega.Shapes;nd.Intersection=ega.Intersection;(function(b){var e=lively.FreezerRuntime.recorderFor("lively.components/widgets.js"),l=e.hasOwnProperty("LeashEndpoint")&&
"function"===typeof e.LeashEndpoint?e.LeashEndpoint:e.LeashEndpoint=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Pb(l,b,[{key:"dragTriggerDistance",get:function(){return this.connectedMorph?20:0}},{key:"onDragStart",value:function(a){var f=a.state;a.state.dragDelta=f.lastDragPosition.subPt(f.clickedOnPosition);a.state.endpoint=this;this.leash.onEndpointDrag(a)}},{key:"canConnectTo",value:function(a){return!a.isWorld&&
!a.isHaloItem&&this.leash.canConnectTo(a)&&!a.isHighlighter&&!a.ownerChain().some(function(f){return f.isHaloItem})}},{key:"onDrag",value:function(a){var f=this;if(this.connectedMorph)this.clearConnection();else{var m=a.hand.findDropTarget(a.hand.globalPosition,[this.leash,this.leash.endPoint,this.leash.startPoint],function(r){return f.canConnectTo(r)});this.possibleTarget!=m&&this.highlighter&&this.highlighter.deactivate();if(this.possibleTarget=m)this.closestSide=this.possibleTarget.globalBounds().partNameNearest(nd.obj.keys(nd.Leash.connectionPoints),
this.globalPosition),this.highlighter=$world.highlightMorph($world,this.possibleTarget,!1,[this.closestSide]),this.highlighter.show(),this.highlighter.get("name tag").value=this.leash.getLabelFor(this.possibleTarget)}a.state.endpoint=this;this.leash.onEndpointDrag(a)}},{key:"onDragEnd",value:function(){$world.removeHighlighters();this.possibleTarget&&this.closestSide&&this.attachTo(this.possibleTarget,this.closestSide)}},{key:"getConnectionPoint",value:function(){var a=this.connectedMorph,f=a.isPath,
m=a.isPolygon,r=a.vertices,v=a.origin;a=this.connectedMorph.globalBounds();if((f||m)&&"center"!=this.attachedSide){f=r.map(function(y){return nd.pt(y.x,y.y).addPt(v)});m=nd.Rectangle.unionPts(f);var x=m[this.attachedSide]();m=m.center().addPt(m.center().subPt(x));m=nd.Shapes.line(x.x,x.y,m.x,m.y);f=nd.Shapes.polyline(nd.arr.flatten(f.map(function(y){return[y.x,y.y]})));f=nd.arr.min(nd.Intersection.intersect(f,m).points,function(y){return nd.pt(y.x,y.y).dist(x)});return nd.pt(f.x,f.y).addPt(a.topLeft())}return a[this.attachedSide]()}},
{key:"update",value:function(a){a&&!["position","extent","rotation","scale"].includes(a.prop)&&a.target!=this.connectedMorph||!this.connectedMorph||(a=this.getConnectionPoint(),a=this.leash.localize(a),this.vertex.position=a,this.relayout())}},{key:"clearConnection",value:function(){this.connectedMorph&&(nd.disconnect(this.connectedMorph,"onChange",this,"update"),this.connectedMorph=null)}},{key:"relayout",value:function(a){var f=this.vertex.position,m=f.x;f=f.y;var r=this.leash.borderWidth;a&&a.meta&&
a.meta.animation?this.animate({center:nd.pt(m+r,f+r),duration:a.duration}):this.center=nd.pt(m+r,f+r)}},{key:"attachTo",value:function(a,f){this.clearConnection();this.leash.world()||this.leash.openInWorld(a.globalPosition);this.connectedMorph=a;this.attachedSide=f;this.vertex.controlPoints=this.leash.controlPointsFor(f,this);this.update();nd.connect(this.connectedMorph,"onChange",this,"update")}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"LeashEndpoint"}},{key:"properties",get:function(){return{index:{},
leash:{},nativeCursor:{defaultValue:"-webkit-grab"},attachedSide:{},connectedMorph:{},draggable:{defaultValue:!0},vertex:{after:["leash"],get:function(){return this.leash.vertices[this.index]},set:function(a){this.leash.vertices[this.index]=a;this.leash.vertices=this.leash.vertices}}}}}],e,{pathInPackage:function(){return"widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",
version:"0.1.0"}}},{start:444,end:4551})})(nd.Ellipse);var BS=Ha("bR",function(b){var e=lively.FreezerRuntime.recorderFor("lively.components/widgets.js"),l=e.hasOwnProperty("Leash")&&"function"===typeof e.Leash?e.Leash:e.Leash=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Pb(l,b,[{key:"onMouseDown",value:function(a){this.updateEndpointStyles()}},{key:"updateEndpointStyles",value:function(){Object.assign(this.startPoint,
this.getEndpointStyle(0));Object.assign(this.endPoint,this.getEndpointStyle(1));this.relayout()}},{key:"remove",value:function(){Pb._get(Object.getPrototypeOf(l.prototype),"remove",this).call(this);this.startPoint.clearConnection();this.endPoint.clearConnection()}},{key:"onEndpointDrag",value:function(a){a.state.endpoint.vertex.position=a.state.endpoint.vertex.position.addPt(a.state.dragDelta);this.relayout()}},{key:"getEndpointStyle",value:function(a){return Object.assign({},this.endpointStyle,{},
0==a?this.endpointStyle.start:this.endpointStyle.end)}},{key:"endpoint",value:function(a){var f=this.vertices[a];return new nd.LeashEndpoint({index:a,leash:this,position:nd.pt(f.x,f.y)})}},{key:"controlPointsFor",value:function(a,f){a=nd.Leash.connectionPoints[a];a=f==this.startPoint?a.negated():a;return{previous:a.scaleBy(100),next:a.negated().scaleBy(100)}}},{key:"relayout",value:function(a){if(!a||["vertices","position"].includes(a.prop))this.startPoint.relayout(a),this.endPoint.relayout(a)}}],
[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Leash"}},{key:"connectionPoints",get:function(){return{topCenter:nd.pt(0,-1),topLeft:nd.pt(-1,-1),rightCenter:nd.pt(1,0),bottomRight:nd.pt(1,1),bottomCenter:nd.pt(0,1),bottomLeft:nd.pt(-1,1),leftCenter:nd.pt(-1,0),topRight:nd.pt(1,-1),center:nd.pt(0,0)}}},{key:"properties",get:function(){return{start:{defaultValue:nd.pt(0,0)},end:{defaultValue:nd.pt(0,0)},canConnectTo:{defaultValue:function(a){return!0}},getLabelFor:{defaultValue:function(a){return a.name}},
reactsToPointer:{defaultValue:!1},acceptsDroppedMorphs:{defaultValue:!1},direction:{type:"Enum",values:["unidirectional","outward","inward"],defaultValue:"unidirectional"},endpointStyle:{isStyleProp:!0,defaultValue:{fill:nd.Color.black,origin:nd.pt(3.5,3.5),extent:nd.pt(10,10),nativeCursor:"-webkit-grab"}},borderWidth:{defaultValue:2},borderColor:{defaultValue:nd.Color.black},fill:{defaultValue:nd.Color.transparent},vertices:{after:["start","end","borderWidth"],initialize:function(){this.vertices=
[this.start,this.end]}},submorphs:{initialize:function(){this.submorphs=[this.startPoint=this.endpoint(0),this.endPoint=this.endpoint(1)];nd.connect(this,"onChange",this,"relayout");this.updateEndpointStyles()}}}}}],e,{pathInPackage:function(){return"widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:4560,end:7399})}(nd.Path));
nd.Leash=BS;nd.Leash=BS;nd.Leash=BS;var CS=Ha("aE",function(b){var e=lively.FreezerRuntime.recorderFor("lively.components/widgets.js"),l=e.hasOwnProperty("Slider")&&"function"===typeof e.Slider?e.Slider:e.Slider=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Pb(l,b,[{key:"normalize",value:function(a){return Math.abs(a/(this.max-this.min))}},{key:"update",value:function(a){a=void 0===a?this.value:a;a=(this.width-
15)*this.normalize(a);this.getSubmorphNamed("slideHandle").center=nd.pt(a+7.5,10)}},{key:"onSlide",value:function(a,f){a=nd.num.roundTo(this.value+f.x/this.width,.01);this.value=a=Math.max(this.min,Math.min(this.max,a));this.update(a)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Slider"}},{key:"properties",get:function(){return{value:{},min:{},max:{},height:{defaultValue:20},fill:{defaultValue:nd.Color.transparent},draggable:{defaultValue:!1},submorphs:{after:["value","max","min"],
initialize:function(){var a=new nd.SliderHandle({slider:this,name:"slideHandle"});this.submorphs=[new nd.Path({borderColor:nd.Color.gray.darker(),borderWidth:2,vertices:[nd.pt(0,0),nd.pt(this.width,0)],position:nd.pt(0,this.height/2)}),a];nd.connect(this,"extent",this,"update");this.update()}}}}}],e,{pathInPackage:function(){return"widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",
version:"0.1.0"}}},{start:7408,end:8693})}(nd.Morph));nd.Slider=CS;nd.Slider=CS;nd.Slider=CS;(function(b){var e=lively.FreezerRuntime.recorderFor("lively.components/widgets.js"),l=e.hasOwnProperty("SliderHandle")&&"function"===typeof e.SliderHandle?e.SliderHandle:e.SliderHandle=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Pb(l,b,[{key:"onDragStart",value:function(a){this.valueView=(new nd.Tooltip({description:""})).openInWorld(a.hand.position.addXY(10,
10))}},{key:"onDrag",value:function(a){this.slider.onSlide(this,a.state.dragDelta);this.valueView.description=this.slider.value;this.valueView.position=a.hand.position.addXY(10,10)}},{key:"onDragEnd",value:function(a){this.valueView.remove()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"SliderHandle"}},{key:"properties",get:function(){return{slider:{},fill:{defaultValue:nd.Color.gray},borderColor:{defaultValue:nd.Color.gray.darker()},borderWidth:{defaultValue:1},dropShadow:{defaultValue:new nd.ShadowObject({blur:5})},
extent:{defaultValue:nd.pt(15,15)},nativeCursor:{defaultValue:"-webkit-grab"},draggable:{defaultValue:!0}}}}],e,{pathInPackage:function(){return"widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:8695,end:9551})})(nd.Ellipse);var DS=Ha("bm",function(b){var e=lively.FreezerRuntime.recorderFor("lively.components/widgets.js"),
l=e.hasOwnProperty("ValueScrubber")&&"function"===typeof e.ValueScrubber?e.ValueScrubber:e.ValueScrubber=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Pb(l,b,[{key:"relayout",value:function(){this.scaleToBounds&&(this.scale=Math.min(1,this.width/(this.textBounds().width+0)))}},{key:"onKeyDown",value:function(a){Pb._get(Object.getPrototypeOf(l.prototype),"onKeyDown",this).call(this,a);if("Enter"==a.keyCombo){var f=
$jscomp.makeIterator(this.textString.replace("\n","").split(" ")),m=f.next().value;f.next();"string"===typeof m&&(this.value=parseFloat(m),this.scrub(this.scrubbedValue));a.stop()}}},{key:"scrub",value:function(a){this.field.update(a)}},{key:"onDragStart",value:function(a){this.execCommand("toggle active mark");this.initPos=a.position;this.factorLabel=(new nd.Tooltip({description:"1x"})).openInWorld(a.hand.position.addXY(10,10));a.hand.extent=nd.pt(30,30);a.hand.nativeCursor="ew-resize";a.hand.fill=
nd.Color.transparent;a.hand.reactsToPointer=!0}},{key:"getScaleAndOffset",value:function(a){var f=a.position.subPt(this.initPos);a=f.x;f=nd.num.roundTo(Math.exp(-f.y/$world.height*4),.01)*this.baseFactor;return{offset:a,scale:f}}},{key:"onDrag",value:function(a){var f=this.getScaleAndOffset(a),m=f.scale;f=this.getCurrentValue(f.offset,m);this.scrub(f);f=this.floatingPoint?f.toFixed(3):nd.obj.safeToString(f);this.unit&&(f+=" "+this.unit);this.replace(this.documentRange,f,!1,this.scaleToBounds,!1,!1);
this.factorLabel.description=m.toFixed(3)+"x";this.factorLabel.position=a.hand.position.addXY(10,10);a.hand.moveBy(nd.pt(-5,-5));this.relayout()}},{key:"getCurrentValue",value:function(a,f){return Math.max(this.min,Math.min(this.max,this.scrubbedValue+(this.floatingPoint?a*f:Math.round(a*f))))}},{key:"onDragEnd",value:function(a){var f=this.getScaleAndOffset(a);this.value=this.getCurrentValue(f.offset,f.scale);this.factorLabel.softRemove();a.hand.extent=nd.pt(1,1);a.hand.fill=nd.Color.orange;a.hand.reactsToPointer=
!1}},{key:"value",set:function(a){this.scrubbedValue=a=Math.max(this.min,Math.min(this.max,a));a=this.floatingPoint?a.toFixed(3):nd.obj.safeToString(a);a=this.unit?a+(" "+this.unit):a+"";this.replace(this.documentRange,a,!1,!0);this.relayout()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ValueScrubber"}},{key:"properties",get:function(){return{scaleToBounds:{defaultValue:!1,set:function(a){this.fixedWidth=!0;this.setProperty("scaleToBounds",a)}},field:{derived:!0,get:function(){return this.owner}},
value:{defaultValue:0},fill:{defaultValue:nd.Color.transparent},draggable:{defaultValue:!0},min:{defaultValue:-Infinity},max:{defaultValue:Infinity},baseFactor:{defaultValue:1},floatingPoint:{defaultValue:!1}}}}],e,{pathInPackage:function(){return"widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:9560,end:12723})}(nd.Text));
nd.ValueScrubber=DS;nd.ValueScrubber=DS;nd.ValueScrubber=DS;var MK=Ha("aQ",function(b){var e=lively.FreezerRuntime.recorderFor("lively.components/widgets.js"),l=e.hasOwnProperty("CheckBox")&&"function"===typeof e.CheckBox?e.CheckBox:e.CheckBox=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Pb(l,b,[{key:"trigger",value:function(){try{this.checked=!this.checked,nd.signal(this,"toggle",this.checked)}catch(f){var a=
this.world();a?a.logError(f):console.error(f)}}},{key:"onMouseDown",value:function(a){this.active&&this.trigger()}},{key:"render",value:function(a){return a.renderCheckBox(this)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"CheckBox"}},{key:"properties",get:function(){return{draggable:{defaultValue:!1},extent:{defaultValue:nd.pt(15,15)},borderWidth:{defaultValue:0},active:{defaultValue:!0},checked:{defaultValue:!1},fill:{defaultValue:nd.Color.transparent},nativeCursor:{defaultValue:"pointer"}}}}],
e,{pathInPackage:function(){return"widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:12733,end:13459})}(nd.Morph));nd.CheckBox=MK;nd.CheckBox=MK;nd.CheckBox=MK;var ES=Ha("bn",function(b){var e=lively.FreezerRuntime.recorderFor("lively.components/widgets.js"),l=e.hasOwnProperty("LabeledCheckBox")&&"function"===typeof e.LabeledCheckBox?
e.LabeledCheckBox:e.LabeledCheckBox=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Pb(l,b,[{key:"disable",value:function(){this.active=!1;this.labelMorph.opacity=.5}},{key:"enable",value:function(){this.active=!0;this.labelMorph.opacity=1}},{key:"trigger",value:function(){this.checkboxMorph.trigger()}},{key:"onMouseDown",value:function(a){this.active&&this.trigger();a.stop()}}],[{key:Symbol.for("__LivelyClassName__"),
get:function(){return"LabeledCheckBox"}},{key:"example",value:function(){(new nd.LabeledCheckBox({label:"foo"})).openInWorld()}},{key:"properties",get:function(){return{name:{defaultValue:"LabeledCheckBox"},alignCheckBox:{defaultValue:"left",type:"Enum",values:["left","right"],set:function(a){this.layout=new nd.HorizontalLayout({direction:"left"==a?"leftToRight":"rightToLeft"});this.setProperty("alignCheckBox",a)}},layout:{initialize:function(){this.layout=new nd.HorizontalLayout({direction:"left"==
this.alignCheckBox?"leftToRight":"rightToLeft"})}},label:{defaultValue:"label",after:["submorphs"],derived:!0,get:function(){return this.labelMorph.value},set:function(a){this.labelMorph.value=a}},checked:{after:["submorphs"],derived:!0,get:function(){return this.checkboxMorph.checked},set:function(a){this.checkboxMorph.checked=a;nd.signal(this,"checked",a)}},active:{after:["submorphs"],derived:!0,get:function(){return this.checkboxMorph.active},set:function(a){this.checkboxMorph.active=a}},labelMorph:{derived:!0,
readOnly:!0,get:function(){return this.getSubmorphNamed("label")}},checkboxMorph:{derived:!0,readOnly:!0,get:function(){return this.getSubmorphNamed("checkbox")}},submorphs:{initialize:function(){this.submorphs=[new nd.CheckBox({name:"checkbox"}),new nd.Label({nativeCursor:"pointer",name:"label",padding:nd.Rectangle.inset(5,3)})];nd.connect(this,"alignCheckBox",this,"extent");nd.connect(this.checkboxMorph,"checked",this,"checked")}}}}}],e,{pathInPackage:function(){return"widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:13468,end:16001})}(nd.Morph));nd.LabeledCheckBox=ES;nd.LabeledCheckBox=ES;nd.LabeledCheckBox=ES;var FS=Ha("aD",function(b){var e=lively.FreezerRuntime.recorderFor("lively.components/widgets.js"),l=e.hasOwnProperty("ModeSelector")&&"function"===typeof e.ModeSelector?e.ModeSelector:e.ModeSelector=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return Pb(l,b,[{key:"createLabels",value:function(a,f,m){var r=this;m=void 0===m?{}:m;return nd.arr.zip(a,f).map(function(v){v=$jscomp.makeIterator(v);var x=v.next().value,y=v.next().value;v=m[x];v=nd.morph(Object.assign({name:x+"Label",master:"styleguide://SystemWidgets/mode label",type:"label",value:x},v&&{tooltip:v}));nd.connect(v,"onMouseDown",r,"update",{updater:function(E){E(x,y)},varMapping:{name:x,value:y}});return v})}},{key:"relayout",value:function(a){a=void 0===a?!0:a;var f=
this,m,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){if(1==v.nextAddress)return f.layout.forceLayout(),m=f.get("typeMarker"),r=f.currentLabel.bounds(),a?v.yield(m.animate({bounds:r,duration:200}),3):(m.setBounds(r),v.jumpTo(2));v.jumpToEnd()})}},{key:"animateFontColor",value:function(a,f,m){var r=a.fontColor;a.animate({customTween:function(v){return a.fontColor=r.interpolate(v,f)},duration:m})}},{key:"update",value:function(a,f,m){m=void 0===m?!1:m;var r=this,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(x){v=
r.get(a+"Label");if(v==r.currentLabel)return x.return();r.getSubmorphsByStyleClassName("Label").forEach(function(y){y!=v&&r.animateFontColor(y,r.fontColor,200)});r.currentLabel=v;!m&&nd.signal(r,a,f);!m&&nd.signal(r,"switchLabel",f);r.relayout(!m);return x.yield(r.animateFontColor(v,r.selectionFontColor,200),0)})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ModeSelector"}},{key:"example",value:function(){(new nd.ModeSelector({items:{foo:{},trottel:{},babbel:{}}})).openInWorld()}},
{key:"properties",get:function(){return{items:{derived:!0,set:function(a){nd.obj.isArray(a)?this.keys=this.values=a:(this.keys=nd.obj.keys(a),this.values=nd.obj.values(a))}},height:{defaultValue:30},init:{},keys:{before:["layout"]},values:{before:["layout"]},tooltips:{},fontColor:{defaultValue:nd.Color.black},selectionFontColor:{defaultValue:nd.Color.white},master:{initialize:function(){this.master={auto:"styleguide://SystemWidgets/mode selector"}}},layout:{after:["items","keys","values"],initialize:function(){this.keys&&
(this.layout=new nd.GridLayout({rows:[0,{paddingBottom:10}],columns:[0,{fixed:5},this.keys.length+2,{fixed:5}],grid:[[null].concat($jscomp.arrayFromIterable(nd.arr.interpose(this.keys.map(function(a){return a+"Label"}),null)),[null])],autoAssign:!1,fitToCell:!1}))}},submorphs:{after:["items","keys","values","fontColor"],initialize:function(){this.keys&&(this.submorphs=[{name:"typeMarker",isLayoutable:!1}].concat($jscomp.arrayFromIterable(this.createLabels(this.keys,this.values,this.tooltips))),nd.connect(this,
"extent",this,"relayout"),this.update(this.init?this.init:this.keys[0],this.values[this.keys.includes(this.init)?this.keys.indexOf(this.init):0],!0))}}}}}],e,{pathInPackage:function(){return"widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:16010,end:19527})}(nd.Morph));nd.ModeSelector=FS;nd.ModeSelector=FS;nd.ModeSelector=
FS;var GS=Ha("aC",function(b){var e=lively.FreezerRuntime.recorderFor("lively.components/widgets.js"),l=e.hasOwnProperty("DropDownSelector")&&"function"===typeof e.DropDownSelector?e.DropDownSelector:e.DropDownSelector=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Pb(l,b,[{key:"build",value:function(){this.dropDownLabel=nd.Icon.makeLabel("chevron-circle-down",{opacity:0,name:"dropDownIcon"});this.submorphs=[{type:"label",
name:"currentValue"},this.dropDownLabel]}},{key:"getMenuEntries",value:function(){var a=this,f=this.getNameFor(this.selectedValue);return[].concat($jscomp.arrayFromIterable(void 0!=this.selectedValue?[{command:f,target:this}]:[]),$jscomp.arrayFromIterable(nd.arr.compact(this.commands.map(function(m){return m.name!=f&&{command:m.name,target:a}}))))}},{key:"commands",get:function(){var a=this;return nd.obj.isArray(this.values)?this.values.map(function(f){return{name:String(f),exec:function(){nd.signal(a,
"update",f);a.selectedValue=f}}}):nd.properties.forEachOwn(this.values,function(f,m){return{name:f,exec:function(){nd.signal(a,"update",m);a.selectedValue=m}}})}},{key:"getNameFor",value:function(a){return this.getCurrentValue?this.getCurrentValue():nd.obj.isArray(this.values)?nd.obj.safeToString(a):nd.obj.safeToString(nd.properties.nameFor(this.values,a))}},{key:"relayout",value:function(){var a=this.getNameFor(this.selectedValue),f=this.get("currentValue");"undefined"==a?(f.value="Not set",f.fontColor=
nd.Color.gray):(f.value=a,f.fontColor=nd.Color.black)}},{key:"onHoverIn",value:function(){this.dropDownLabel.animate({opacity:1,duration:300})}},{key:"onHoverOut",value:function(){this.dropDownLabel.animate({opacity:0,duration:200})}},{key:"onMouseDown",value:function(a){this.menu=this.world().openWorldMenu(a,this.getMenuEntries());this.menu.hasFixedPosition=!0;this.menu.topLeft=this.globalPosition}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"DropDownSelector"}},{key:"properties",
get:function(){return{values:{defaultValue:[]},getCurrentValue:{defaultValue:void 0},selectedValue:{after:["submorphs","values","getCurrentValue"],set:function(a){this.setProperty("selectedValue",a);this.relayout()}},fontColor:{isStyleProp:!0,defaultValue:nd.Color.black},fontSize:{isStyleProp:!0,defaultValue:12},fontFamily:{isStyleProp:!0,defaultValue:"Sans-Serif"},border:{defaultValue:{radius:3,color:nd.Color.gray.darker(),style:"solid"}},padding:{defaultValue:1},isSelected:{defaultValue:"false",
set:function(a){this.setProperty("isSelected",a);this.fontColor=a?nd.Color.white:nd.Color.black}},layout:{initialize:function(){this.layout=new nd.HorizontalLayout({spacing:this.padding})}},submorphs:{initialize:function(){this.build()}}}}}],e,{pathInPackage:function(){return"widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},
{start:19537,end:22774})}(nd.Morph));nd.DropDownSelector=GS;nd.DropDownSelector=GS;nd.DropDownSelector=GS;var HS=Ha("aP",function(b){var e=lively.FreezerRuntime.recorderFor("lively.components/widgets.js"),l=e.hasOwnProperty("SearchField")&&"function"===typeof e.SearchField?e.SearchField:e.SearchField=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Pb(l,b,[{key:"parseInput",value:function(){var a=Array.from(this.textString).reduce(function(m,
r){if("\\"===r&&!m.escaped)return m.escaped=!0,m;" "!==r||m.escaped?(m.spaceSeen=!1,m.current+=r):(!m.spaceSeen&&m.current&&(m.tokens.push(m.current),m.current=""),m.spaceSeen=!0);m.escaped=!1;return m},{tokens:[],current:"",escaped:!1,spaceSeen:!1});a.current&&a.tokens.push(a.current);var f=a.tokens.map(function(m){return m.toLowerCase()});return{tokens:a.tokens,lowercasedTokens:f}}},{key:"clearInput",value:function(){this.textString="";nd.signal(this,"searchInput",this.parseInput());this.onBlur()}},
{key:"matches",value:function(a){return this.textString?this.filterFunction.call(this,this.parseInput(),{string:a}):!0}},{key:"onChange",value:function(a){Pb._get(Object.getPrototypeOf(l.prototype),"onChange",this).call(this,a);a="replace"===a.selector;this.isFocused();this.get("placeholder icon")&&(this.get("placeholder icon").visible=!!this.textString);this.textString.includes("\n")&&(this.textString=this.textString.replace("\n",""),this.owner.focus());this.active&&a&&nd.signal(this,"searchInput",
this.parseInput())}},{key:"onBlur",value:function(a){Pb._get(Object.getPrototypeOf(l.prototype),"onBlur",this).call(this,a);this.active=!1;this.get("placeholder").visible=!this.textString;this.animate({styleClasses:["idle"],duration:300})}},{key:"onFocus",value:function(a){Pb._get(Object.getPrototypeOf(l.prototype),"onFocus",this).call(this,a);this.animate({styleClasses:["selected"],duration:300});this.get("placeholder").visible=!1;this.active=!0}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"SearchField"}},
{key:"properties",get:function(){return{fixedWidth:{defaultValue:!0},master:{initialize:function(){this.master={auto:"styleguide://SystemWidgets/search field"}}},selectedFontColor:{isStyleProp:!0,defaultValue:nd.Color.black},idleFontColor:{isStyleProp:!0,defaultValue:nd.Color.gray},borderColor:{defaultValue:nd.Color.gray},layout:{initialize:function(){this.layout=new nd.HorizontalLayout({autoResize:!1,direction:"rightToLeft"})}},fuzzy:{derived:!0,after:["filterFunction","sortFunction"],set:function(a){this.setProperty("fuzzy",
a);a?(this.sortFunction||(this.sortFunction=this.fuzzySortFunction),this.filterFunction==this.defaultFilterFunction&&(this.filterFunction=this.fuzzyFilterFunction)):(this.sortFunction===this.fuzzySortFunction&&(this.sortFunction=null),this.filterFunction===this.fuzzyFilterFunction&&(this.filterFunction=this.defaultFilterFunction))}},filterFunction:{get:function(){var a=this.getProperty("filterFunction");if(!a)return this.defaultFilterFunction;"string"===typeof a&&(a=eval("("+a+")"));return a}},sortFunction:{},
defaultFilterFunction:{readOnly:!0,get:function(){return this._defaultFilterFunction||(this._defaultFilterFunction=function(a,f){return a.lowercasedTokens.every(function(m){return f.string.toLowerCase().includes(m)})})}},fuzzySortFunction:{get:function(){var a=this;return this._fuzzySortFunction||(this._fuzzySortFunction=function(f,m){var r=String(nd.PropertyPath("string"===typeof a.fuzzy?a.fuzzy:"string").get(m)).toLowerCase(),v=0;f.lowercasedTokens.forEach(function(x){r.startsWith(x)?v-=10:r.includes(x)&&
(v-=5)});return nd.arr.sum(f.lowercasedTokens.map(function(x){return nd.string.levenshtein(r.toLowerCase(),x)}))+v})}},fuzzyFilterFunction:{get:function(){var a=this;return this._fuzzyFilterFunction||(this._fuzzyFilterFunction=function(f,m){var r="string"===typeof a.fuzzy?a.fuzzy:"string";if(f.lowercasedTokens.every(function(x){return m.string.toLowerCase().includes(x)}))return!0;var v=String(nd.PropertyPath(r).get(m)).toLowerCase();return 3>=nd.arr.sum(f.lowercasedTokens.map(function(x){return nd.string.levenshtein(v,
x)}))})}},placeHolder:{defaultValue:"Search"},submorphs:{after:["placeHolder"],initialize:function(){this.submorphs=[{type:"label",name:"placeholder",isLayoutable:!1,value:this.placeHolder,reactsToPointer:!1},nd.Icon.makeLabel("times-circle",{padding:nd.rect(2,4,3,0),fontSize:14,visible:!1,fixedHeight:!0,autofit:!1,extent:nd.pt(20,22),name:"placeholder icon",fontColor:nd.Color.gray,nativeCursor:"pointer"})];nd.connect(this.get("placeholder icon"),"onMouseDown",this,"clearInput")}}}}}],e,{pathInPackage:function(){return"widgets.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:22817,end:29404})}(nd.Text));nd.SearchField=HS;nd.SearchField=HS;nd.SearchField=HS;var t0=Object.freeze({__proto__:null,Leash:BS,Slider:CS,ValueScrubber:DS,CheckBox:MK,LabeledCheckBox:ES,ModeSelector:FS,DropDownSelector:GS,SearchField:HS}),Tk=lively.FreezerRuntime.recorderFor("lively.components/index.js");
Object.assign(Tk,wza);Object.assign(Tk,vza);Object.assign(Tk,xza);Object.assign(Tk,yza);Object.assign(Tk,zza);Object.assign(Tk,Aza);Tk.Window=r0;Tk.prompts=s0;Tk.widgets=t0;Tk.LoadingIndicator=fG;Tk.addClassMappings=Tb;Tk.List=JG;Tk.DropDownList=LK;Tk.Button=IG;Tk.CheckBox=MK;Tk.addClassMappings({list:Tk.List,dropdownlist:Tk.DropDownList,button:Tk.Button,checkbox:Tk.CheckBox,labeledcheckbox:Tk.widgets.LabeledCheckBox});Tk.Window=r0;Tk.Window=r0;Tk.LoadingIndicator=fG;Tk.LoadingIndicator=fG;Tk.prompts=
s0;Tk.prompts=s0;Tk.widgets=t0;Tk.widgets=t0;var cq=lively.FreezerRuntime.recorderFor("PartialFreezing/loading-page.js");cq.Morph=ql;cq.MorphicDB=Xw;cq.LoadingIndicator=fG;cq.resource=A;var KG=function(b){var e=lively.FreezerRuntime.recorderFor("PartialFreezing/loading-page.js"),l=e.hasOwnProperty("WorldLoadingScreen")&&"function"===typeof e.WorldLoadingScreen?e.WorldLoadingScreen:e.WorldLoadingScreen=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return Pb(l,b,[{key:"commands",get:function(){var a=this;return[{name:"resize on client",exec:function(){$world._cachedWindowBounds=null;a.setBounds($world.windowBounds());a.get("json target indicator").topRight=a.innerBounds().insetBy(25).topRight()}}]}},{key:"__head_html__",get:function(){return'\n<script> window.AUTH_SERVER_URL; \x3c/script>\n<style type="text/css">@import url("https://fonts.googleapis.com/css?family=Nunito:200,200i,300,300i,400,400i,600,600i,700,700i,800,800i,900,900i&display=swap");</style>'}},
{key:"onLoad",value:function(){var a=this,f,m,r,v,x;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){if(1==y.nextAddress){if(!lively.FreezerRuntime)return y.jumpTo(0);f=a.get("package loading indicator");m=a.get("css loading screen");r=a.getWorldName();v=a.getFilePath();(x=a.getSnapshot())?(f.isLayoutable=f.visible=!1,m.isLayoutable=m.visible=!0):(f.startStepping("updateProgressBar"),document.body.style.backgroundColor="black");v&&a.get("json target indicator").animate({opacity:1,duration:300});
return y.yield(a.transitionToLivelyWorld({worldName:r,filePath:v,snapshot:x},f),3)}f.stopStepping();y.jumpToEnd()})}},{key:"transitionToLivelyWorld",value:function(a,f){var m=a.worldName,r=a.filePath,v=a.snapshot,x=this,y,E,F,I,J,P,N;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Y){switch(Y.nextAddress){case 1:return y=cq.resource(window.SYSTEM_BASE_URL||document.location.origin).join("objectdb/").url,E=x.get("package loading indicator"),Y.yield(Promise.resolve().then(function(){return fga}),
2);case 2:F=Y.yieldResult;I=F.bootstrap;if(!(J=m&&"__newWorld__"!=m)){Y.jumpTo(3);break}return Y.yield(cq.MorphicDB.named("lively.morphic/objectdb/morphicdb",{serverURL:y}).exists("world",m),4);case 4:J=!Y.yieldResult.exists;case 3:if(J)return Y.return(x.indicateMissingWorld(!0));if(!(P=r)){Y.jumpTo(5);break}return Y.yield(cq.resource(document.location.origin).join(r).exists(),6);case 6:P=!Y.yieldResult;case 5:if(P)return Y.return(x.indicateMissingWorld(!0));N=cq.LoadingIndicator.open("...starting bootstrap process...",
{animated:!0,delay:1E3});v&&(N.visible=!1);f.opacity=1;return Y.yield(I({worldName:m,filePath:r,loadingIndicator:N,progress:E,snapshot:v}),0)}})}},{key:"getWorldName",value:function(){return document.location.href.endsWith("worlds/new")?"__newWorld__":cq.resource(document.location.href).query().name||window.WORLD_NAME||!1}},{key:"getFilePath",value:function(){return cq.resource(document.location.href).query().file||!1}},{key:"getSnapshot",value:function(){return cq.resource(document.location.href).query().snapshot||
window.SNAPSHOT_PATH||!1}},{key:"indicateMissingWorld",value:function(a){this.get("package loading indicator").visible=!a;this.get("broken heart").visible=this.get("broken heart").isLayoutable=a}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"WorldLoadingScreen"}},{key:"properties",get:function(){return{title:{derived:!0,get:function(){return"lively.next ("+document.location.hostname+")"}}}}}],e,{pathInPackage:function(){return"loading-page.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"PartialFreezing",version:"0.1.1-119"}}},{start:158,end:3675})}(cq.Morph);cq.WorldLoadingScreen=KG;cq.WorldLoadingScreen=KG;cq.WorldLoadingScreen=KG;var dh=lively.FreezerRuntime.recorderFor("PartialFreezing/landing-page.js");dh.Morph=ql;dh.MorphicDB=Xw;dh.World=ry;dh.easings=Rr;dh.morph=qc;dh.promise=hg;dh.string=Th;dh.date=Cw;dh.Color=xg;dh.pt=Ei;dh.LoadingIndicator=fG;dh.resource=A;dh.missingSVG=
'data:image/svg+xml;utf8,\n<svg aria-hidden="true" focusable="false" data-prefix="far" data-icon="question-circle" class="svg-inline--fa fa-question-circle fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="lightgray" d="M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 448c-110.532 0-200-89.431-200-200 0-110.495 89.472-200 200-200 110.491 0 200 89.471 200 200 0 110.53-89.431 200-200 200zm107.244-255.2c0 67.052-72.421 68.084-72.421 92.863V300c0 6.627-5.373 12-12 12h-45.647c-6.627 0-12-5.373-12-12v-8.659c0-35.745 27.1-50.034 47.579-61.516 17.561-9.845 28.324-16.541 28.324-29.579 0-17.246-21.999-28.693-39.784-28.693-23.189 0-33.894 10.977-48.942 29.969-4.057 5.12-11.46 6.071-16.666 2.124l-27.824-21.098c-5.107-3.872-6.251-11.066-2.644-16.363C184.846 131.491 214.94 112 261.794 112c49.071 0 101.45 38.304 101.45 88.8zM298 368c0 23.159-18.841 42-42 42s-42-18.841-42-42 18.841-42 42-42 42 18.841 42 42z"></path></svg>\n';
var u0=function(b){var e=lively.FreezerRuntime.recorderFor("PartialFreezing/landing-page.js"),l=e.hasOwnProperty("TitleWrapper")&&"function"===typeof e.TitleWrapper?e.TitleWrapper:e.TitleWrapper=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Pb(l,b,[{key:"startMovingRight",value:function(){var a=this;this.animate({customTween:function(f){a._hoverDelta=f}})}},{key:"stopMovingRight",value:function(){var a=this;this.animate({customTween:function(f){a._hoverDelta=
1-f}})}},{key:"startMovingLeft",value:function(){var a=this;this.animate({customTween:function(f){a._hoverDelta=-f}})}},{key:"stopMovingLeft",value:function(){var a=this;this.animate({customTween:function(f){a._hoverDelta=-1+f}})}},{key:"startOnce",value:function(a){var f=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){if(1==m.nextAddress){if(f._fn)return m.return();f._fn=a;return m.yield(a(),2)}f._fn=null;m.jumpToEnd()})}},{key:"updateTitle",value:function(){var a=this;if(this.title){var f=
$jscomp.makeIterator(this.submorphs).next().value;f.left+=this._hoverDelta;f.right<this.width-20&&-1==this._hoverDelta?this.startOnce(function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){return 1==m.nextAddress?m.yield(a.stopMovingLeft(),2):m.yield(a.startMovingRight(),0)})}):20<f.left&&1==this._hoverDelta&&this.startOnce(function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){return 1==m.nextAddress?m.yield(a.stopMovingRight(),2):m.yield(a.startMovingLeft(),
0)})})}}},{key:"startShowingFullTitle",value:function(){var a=this,f,m;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){if(1==r.nextAddress){if(!a.title)return r.return();f=$jscomp.makeIterator(a.submorphs);m=f.next().value;m.textString=a.title;return r.yield(m.whenRendered(),2)}a._hoverDelta=0;a.startStepping("updateTitle");m.right>a.width&&a.startMovingLeft();r.jumpToEnd()})}},{key:"stopShowingFullTitle",value:function(){if(this.title){var a=this.submorphs[0];a.textString=dh.string.truncate(this.title,
18,"...");this.stopStepping("updateTitle");this._hoverDelta=0;a.left=0}}},{key:"onHoverIn",value:function(a){Pb._get(Object.getPrototypeOf(l.prototype),"onHoverIn",this).call(this,a);this.startShowingFullTitle()}},{key:"onHoverOut",value:function(a){Pb._get(Object.getPrototypeOf(l.prototype),"onHoverOut",this).call(this,a);this.stopShowingFullTitle()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"TitleWrapper"}},{key:"properties",get:function(){return{title:{derived:!0,set:function(a){this.setProperty("title",
a);a&&(this.submorphs[0].textString=dh.string.truncate(a,18,"..."))}}}}}],e,{pathInPackage:function(){return"landing-page.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"PartialFreezing",version:"0.1.1-119"}}},{start:350,end:2487})}(dh.Morph);dh.TitleWrapper=u0;dh.TitleWrapper=u0;dh.TitleWrapper=u0;var LG=function(b){var e=lively.FreezerRuntime.recorderFor("PartialFreezing/landing-page.js"),
l=e.hasOwnProperty("WorldPreview")&&"function"===typeof e.WorldPreview?e.WorldPreview:e.WorldPreview=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Pb(l,b,[{key:"relayout",value:function(){this.setBounds(this.world().visibleBounds())}},{key:"onLoad",value:function(){this.ui.spinner.visible=!1}},{key:"displayPreview",value:function(){var a=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){return f.yield(a.initWithCommit(a._commit),
0)})}},{key:"initWithCommit",value:function(a){var f=this,m,r,v,x,y,E,F,I;return $jscomp.asyncExecutePromiseGeneratorProgram(function(J){if(1==J.nextAddress)return m=f.ui,r=m.preview,v=m.timestamp,x=m.title,y=m.description,E=m.previewContainer,f.opacity=.5,E.opacity=0,J.yield(f.whenRendered(),2);if(3!=J.nextAddress)return f._commit=a,r.imageUrl=a.preview||dh.missingSVG,F=a.author,I=F.name,I=I.startsWith("guest-")?"guest":I,v.value=[I,{fontSize:13,fontWeight:"bold",paddingTop:"1px"},dh.date.format(a.timestamp,
" - d.m.yy HH:MM"),{fontWeight:"bold",fontSize:12,paddingTop:"2px"}],x.title=a.name,y.value=a.description,J.yield(f.whenRendered(),3);E.opacity=1;f.animate({opacity:1,duration:300});J.jumpToEnd()})}},{key:"openAnimated",value:function(a){a=void 0===a?$world.visibleBounds():a;var f=this,m;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){switch(r.nextAddress){case 1:return m=dh.morph(Object.assign({},f.spec(),{reactsToPointer:!1,renderOnGPU:!0,submorphs:[f.ui.spinner.spec()]})).openInWorld(),
m.hasFixedPosition=!0,m.globalPosition=f.globalPosition,m.opacity=0,r.yield(m.whenRendered(),2);case 2:return r.yield(m.animate({opacity:1,duration:300}),3);case 3:return m.dropShadow=!1,m.animate({bounds:a,borderRadius:0,duration:500,easing:dh.easings.inOutQuint}),m.respondsToVisibleWindow=!0,r.yield(m.ui.spinner.animate({center:m.innerBounds().center(),duration:500,easing:dh.easings.inOutQuint}),4);case 4:return r.yield(dh.promise.delay(1E3),5);case 5:return r.return(m)}})}},{key:"openWorld",value:function(){var a=
this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){if(1==f.nextAddress)return f.yield(a.openAnimated(),2);a.loadWorld();f.jumpToEnd()})}},{key:"loadWorld",value:function(){var a=this,f,m,r,v,x;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){if(1==y.nextAddress){f=a._commit;m=f._id;r=f.name;if(lively.FreezerRuntime)return v=dh.LoadingIndicator.open("...starting bootstrap process...",{animated:!0,delay:1E3}),a.transitionToLivelyWorld(document.location.origin,a._commit,
v),y.jumpTo(0);x=dh.LoadingIndicator.open("loading "+r);return y.yield(dh.World.loadFromCommit(m,void 0,{morphicDB:dh.MorphicDB.default}),3)}x.remove();y.jumpToEnd()})}},{key:"transitionToLivelyWorld",value:function(a,f,m){var r,v,x,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(E){switch(E.nextAddress){case 1:return E.yield(tb.import("./package loading progress indicator-165c8138.js"),3);case 3:if(!(r=E.yieldResult)){E.jumpTo(4);break}return E.yield(dh.resource("part://partial freezing/package loading progress indicator"),
5);case 5:r=E.yieldResult;case 4:return E.yield(r.read(),2);case 2:return v=E.yieldResult,E.yield(Promise.resolve().then(function(){return fga}),6);case 6:return x=E.yieldResult,y=x.bootstrap,E.yield(y({commit:f,loadingIndicator:m,progress:v}),0)}})}},{key:"showVersions",value:function(){var a=this,f,m,r,v,x,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(E){switch(E.nextAddress){case 1:return f=200,m=dh.easings.inOutExpo,r=a.ui,v=r.previewContainer,E.yield(tb.import("./version container-ecf4694b.js"),
3);case 3:if(!(x=E.yieldResult)){E.jumpTo(4);break}return E.yield(dh.resource("part://partial freezing/version container"),5);case 5:x=E.yieldResult;case 4:return E.yield(x.read(),2);case 2:return y=E.yieldResult,y.name="version container",y.position=dh.pt(0,0),a.addMorph(y),y.reactsToPointer=y.visible=!0,y.initializeFromStartCommit(a._commit),a.animate({width:515,duration:f,easing:m}),v.animate({opacity:0,duration:f}),E.yield(y.animate({opacity:1,duration:f}),6);case 6:v.reactsToPointer=v.visible=
!1,E.jumpToEnd()}})}},{key:"hideVersions",value:function(){var a=this,f,m,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(x){if(1==x.nextAddress)return f=dh.easings.inOutExpo,m=a.ui,r=m.previewContainer,v=m.versionContainer,r.reactsToPointer=r.visible=!0,a.animate({width:245,duration:200,easing:f}),r.animate({opacity:1,duration:200}),x.yield(v.animate({opacity:0,duration:200}),2);v.reset();v.remove();x.jumpToEnd()})}},{key:"toggleDeleteButton",value:function(a){this.ui.deleteButton.visible=
a}},{key:"onHoverIn",value:function(a){this.toggleDeleteButton(!0)}},{key:"onHoverOut",value:function(a){this.toggleDeleteButton(!1)}},{key:"tryToDelete",value:function(){var a=this,f,m,r,v,x;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){switch(y.nextAddress){case 1:return f=300,m=a.ui,r=m.previewContainer,y.yield(tb.import("./delete world prompt-b49a7003.js"),3);case 3:if(!(v=y.yieldResult)){y.jumpTo(4);break}return y.yield(dh.resource("part://partial freezing/delete world prompt"),
5);case 5:v=y.yieldResult;case 4:return y.yield(v.read(),2);case 2:return x=y.yieldResult,Object.assign(x,{name:"delete world prompt",position:dh.pt(0,0),opacity:0}),a.addMorph(x),x.visible=!0,y.yield(a.withAnimationDo(function(){x.opacity=1;a.dropShadow=a.dropShadow.with({color:dh.Color.black.withA(.5),blur:50});r.opacity=.3;r.blur=1},{duration:f}),0)}})}},{key:"confirmDelete",value:function(){var a=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){if(1==f.nextAddress)return f.yield(dh.MorphicDB.default.commit(Object.assign({},
a._commit,{content:void 0,snapshot:null})),2);a.isComponent||a.owner.isWorld||a.owner.remove();f.jumpToEnd()})}},{key:"cancelDelete",value:function(){var a=this,f,m,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){if(1==v.nextAddress)return f=a.ui,m=f.previewContainer,r=f.deleteWorldPrompt,v.yield(a.withAnimationDo(function(){Object.assign(m,{opacity:1,blur:0});a.dropShadow=a.dropShadow.with({color:dh.Color.rgba(0,0,0,.11)});r.opacity=0},{duration:300}),2);r.remove();v.jumpToEnd()})}},
{key:"onMouseUp",value:function(a){var f=this.ui,m=f.openButton,r=f.versionButton,v=f.deleteButton,x=f.closeVersionsButton,y=f.cancelDeleteButton;f=f.confirmDeleteButton;switch(a.targetMorph){case m:this.openWorld();break;case r:this.showVersions();break;case v:this.tryToDelete();break;case x:this.hideVersions();break;case f:this.confirmDelete();break;case y:this.cancelDelete()}}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"WorldPreview"}},{key:"properties",get:function(){return{ui:{readOnly:!0,
get:function(){return{previewContainer:this.getSubmorphNamed("preview container"),versionContainer:this.getSubmorphNamed("version container"),preview:this.getSubmorphNamed("preview"),timestamp:this.getSubmorphNamed("timestamp"),title:this.getSubmorphNamed("title wrapper"),description:this.getSubmorphNamed("description"),openButton:this.getSubmorphNamed("open button"),versionButton:this.getSubmorphNamed("version button"),spinner:this.getSubmorphNamed("spinner"),deleteButton:this.getSubmorphNamed("delete button"),
closeVersionsButton:this.getSubmorphNamed("close versions button"),versionList:this.getSubmorphNamed("version list"),deleteWorldPrompt:this.getSubmorphNamed("delete world prompt"),cancelDeleteButton:this.getSubmorphNamed("cancel delete button"),confirmDeleteButton:this.getSubmorphNamed("confirm delete button")}}}}}}],e,{pathInPackage:function(){return"landing-page.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"PartialFreezing",version:"0.1.1-119"}}},{start:2500,end:10462})}(dh.Morph);dh.WorldPreview=LG;dh.WorldPreview=LG;dh.WorldPreview=LG;var MG=function(b){var e=lively.FreezerRuntime.recorderFor("PartialFreezing/landing-page.js"),l=e.hasOwnProperty("WorldLandingPage")&&"function"===typeof e.WorldLandingPage?e.WorldLandingPage:e.WorldLandingPage=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};
return Pb(l,b,[{key:"__loading_html__",get:function(){return"\n      <style>\n        "+this.loadingScreen.cssDeclaration+"\n      </style>\n      "+this.loadingScreen.html+"\n    "}},{key:"__head_html__",get:function(){return'\n<script> window.AUTH_SERVER_URL; \x3c/script>\n<link type="text/css" rel="stylesheet" id="lively-font-awesome" href="/lively.morphic/assets/font-awesome/css/font-awesome.css">\n<link type="text/css" rel="stylesheet" id="lively-font-inconsolata" href="/lively.morphic/assets/inconsolata/inconsolata.css">\n<style type="text/css" id="WorldLandingPage_7068CDA9_749E_4EC1_9BC4_50DF06EAA2BA-Nunito">@import url("https://fonts.googleapis.com/css?family=Nunito:200,200i,300,300i,400,400i,600,600i,700,700i,800,800i,900,900i&display=swap");</style>'}},
{key:"commands",get:function(){var a=this;return[{name:"resize on client",exec:function(){$world._cachedWindowBounds=null;document.body.style.overflowY="hidden";a.setBounds($world.windowBounds());a.getSubmorphNamed("globe").extent=a.extent;a.ensureUserFlap();var f=a.getSubmorphNamed("a project browser");f&&(f.center=a.extent.scaleBy(.5))}}]}},{key:"ensureUserFlap",value:function(){var a,f;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){switch(m.nextAddress){case 1:return $world.get("user flap")?
m.return():m.yield(tb.import("./dark-56695fb8.js"),3);case 3:if(!(a=m.yieldResult)){m.jumpTo(4);break}return m.yield(dh.resource("part://SystemIDE/user flap master/dark"),5);case 5:a=m.yieldResult;case 4:return m.yield(a.read(),2);case 2:return f=m.yieldResult,f.name="user flap",f.showMorphControls=!1,f.hasFixedPosition=!0,f.openInWorld(),f.opacity=0,f.alignInWorld(),f.get("fast load toggler").refresh(),m.yield(dh.promise.delay(1E3),6);case 6:f.animate({opacity:1}),m.jumpToEnd()}})}},{key:"beforePublish",
value:function(){var a=this.getSubmorphNamed("a project browser");a&&a.remove()}},{key:"onLoad",value:function(){var a=this,f;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){if(1==m.nextAddress)return m.yield(a.whenRendered(),2);if(!lively.FreezerRuntime)return m.return();$world.fill=dh.Color.black;document.documentElement.style.background=dh.Color.black;a.showWorldList().then(function(){return document.getElementById("loading-screen").remove()});a.getSubmorphNamed("globe").fullyLoaded();
(f=document.getElementById("loading screen"))&&f.remove();m.jumpToEnd()})}},{key:"showWorldList",value:function(){var a=this,f,m,r,v,x,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(E){switch(E.nextAddress){case 1:if(f=a.getSubmorphNamed("a poject browser")){E.jumpTo(2);break}m=a;r=m.addMorph;v=m;return E.yield(tb.import("./project browser-9720b68e.js"),4);case 4:if(!(x=E.yieldResult)){E.jumpTo(5);break}return E.yield(dh.resource("part://partial freezing/project browser"),6);case 6:x=
E.yieldResult;case 5:return E.yield(x.read(),3);case 3:f=r.call(v,E.yieldResult);case 2:y=f,y.name="a project browser",a.reset(),y.showCloseButton=!1,y.extent=dh.pt(1110,800).minPt(a.extent.subPt(dh.pt(50,150))),y.center=a.innerBounds().center(),y.animate({opacity:1,duration:300}),y.displayWorlds(),y.hasFixedPosition=!1,E.jumpToEnd()}})}},{key:"reset",value:function(){var a=this.getSubmorphNamed("a project browser");a.opacity=0;a.center=this.innerBounds().center()}}],[{key:Symbol.for("__LivelyClassName__"),
get:function(){return"WorldLandingPage"}},{key:"properties",get:function(){return{title:{derived:!0,get:function(){return"lively.next ("+document.location.hostname+")"}},loadingScreen:{}}}}],e,{pathInPackage:function(){return"landing-page.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"PartialFreezing",version:"0.1.1-119"}}},{start:10473,end:13850})}(dh.Morph);dh.WorldLandingPage=
MG;dh.WorldLandingPage=MG;dh.WorldLandingPage=MG;var Xy=lively.FreezerRuntime.recorderFor("PartialFreezing/index.js");Xy.WorldLoadingScreen=KG;Xy.WorldLandingPage=MG;Xy.WorldPreview=LG;Xy.WorldLoadingScreen=KG;Xy.WorldLoadingScreen=KG;Xy.WorldLandingPage=MG;Xy.WorldLandingPage=MG;Xy.WorldPreview=LG;Xy.WorldPreview=LG;var Ge=lively.FreezerRuntime.recorderFor("PartialFreezing/bootstrap.js");Ge.bootstrap=YN;Ge.fastPrepLivelySystem=function(b){return Promise.resolve().then(function(){b.status="starting fast system preparation..."}).then(function(){return Ge.resource(System.baseURL).join("package-registry.json").readJson()}).then(function(e){System["__lively.modules__packageRegistry"]=
lively.modules.PackageRegistry.fromJSON(System,e);return System}).then(function(){return Ge.loadViaScript(Ge.resource(System.baseURL).join("/lively.user/dist/lively.user-client.js").url)})};Ge.installFetchHook=function(b){function e(l,a){Ge.loads++;b.status="loading "+Ge.string.truncateLeft(a.name.replace(window.System.baseURL,""),25,"...");b.progress=Ge.loads/(800-4*Object.keys(Ge.extractedModules).length);b.center=$world.innerBounds().center();return l(a)}window.__logFetch=e;lively.modules.installHook("fetch",
e)};Ge.extractModules=function(b){Object.keys(lively.FreezerRuntime.registry).filter(function(e){return e.startsWith(b)}).forEach(function(e){Ge.extractedModules[Ge.resource(System.baseURL).join(e).url]=Object.assign({},lively.FreezerRuntime.registry[e].exports)})};Ge.loadComponents=function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){switch(b.nextAddress){case 1:return b.yield(tb.import("./world-edf3c374.js").then(function(e){return e.w}),2);case 2:return b.yield(tb.import("./editor-plugin-c26fc353.js").then(function(e){return e.e}),
3);case 3:return b.yield(tb.import("./editor-plugin-5bde6f0b.js"),4);case 4:return b.yield(tb.import("./index-a98bf65c.js"),5);case 5:return b.yield(Promise.resolve().then(function(){return Axa}),6);case 6:return b.yield(Promise.resolve().then(function(){return Bxa}),7);case 7:return b.yield(Promise.resolve().then(function(){return $pa}),8);case 8:Ge.extractModules("lively.bindings"),Ge.extractModules("lively.shell"),Ge.extractModules("lively.ide"),Ge.extractModules("lively.components"),b.jumpToEnd()}})};
Ge.bootstrapLivelySystem=function(b,e,l){return Promise.resolve().then(function(){b.status="starting bootstrap process..."}).then(function(){var a,f,m,r,v,x;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){switch(y.nextAddress){case 1:return y.yield(e.whenRendered(),2);case 2:if("frozen"!=l["lively.lang"]&&!Ge.fastLoad){y.jumpTo(3);break}return y.yield(Promise.resolve().then(function(){return m9}),4);case 4:a=y.yieldResult,Ge.extractModules("lively.lang"),e.finishPackage({packageName:"lively.lang",
frozen:!0}),delete a._prevLivelyGlobal;case 3:if("frozen"!=l["lively.ast"]&&!Ge.fastLoad){y.jumpTo(5);break}f=lively;return y.yield(Promise.resolve().then(function(){return qO}),6);case 6:f.ast=y.yieldResult,Ge.extractModules("lively.ast"),e.finishPackage({packageName:"lively.ast",frozen:!0});case 5:if("frozen"!=l["lively.source-transform"]&&!Ge.fastLoad){y.jumpTo(7);break}m=lively;return y.yield(Promise.resolve().then(function(){return Tpa}),8);case 8:m.sourceTransform=y.yieldResult,Ge.extractModules("lively.source-transform"),
e.finishPackage({packageName:"lively.source-transform",frozen:!0});case 7:if("frozen"!=l["lively.classes"]&&!Ge.fastLoad){y.jumpTo(9);break}return y.yield(tb.import("./object-classes-0ee5761e.js"),10);case 10:return r=lively,y.yield(Promise.resolve().then(function(){return kra}),11);case 11:r.classes=y.yieldResult,Ge.extractModules("lively.class"),e.finishPackage({packageName:"lively.classes",frozen:!0});case 9:if("frozen"!=l["lively.vm"]&&!Ge.fastLoad){y.jumpTo(12);break}v=lively;return y.yield(Promise.resolve().then(function(){return x$}),
13);case 13:v.vm=y.yieldResult,Ge.extractModules("lively.vm"),e.finishPackage({packageName:"lively.vm",frozen:!0});case 12:if("frozen"!=l["lively.modules"]&&!Ge.fastLoad){y.jumpTo(14);break}return y.yield(Promise.resolve().then(function(){return tP}),15);case 15:Ge.extractModules("lively.modules"),e.finishPackage({packageName:"lively.modules",frozen:!0});case 14:if("frozen"!=l["lively.user"]&&!Ge.fastLoad){y.jumpTo(16);break}return y.yield(Promise.resolve().then(function(){return Cxa}),17);case 17:return y.yield(tb.import("./user-ui-983ba0be.js"),
18);case 18:Ge.extractModules("lively.user"),e.finishPackage({packageName:"lively.user",frozen:!0});case 16:if("frozen"!=l["lively.storage"]&&!Ge.fastLoad){y.jumpTo(19);break}return y.yield(Promise.resolve().then(function(){return Awa}),20);case 20:Ge.extractModules("lively.storage"),e.finishPackage({packageName:"lively.storage",frozen:!0});case 19:if("frozen"!=l["lively.morphic"]&&!Ge.fastLoad){y.jumpTo(0);break}return y.yield(Promise.resolve().then(function(){return cra}),22);case 22:return Ge.extractModules("lively.resources"),
y.yield(Promise.resolve().then(function(){return uda}),23);case 23:return y.yield(tb.import("./index-792c91c7.js"),24);case 24:return Ge.extractModules("lively.2lively"),y.yield(Promise.resolve().then(function(){return fqa}),25);case 25:return Ge.extractModules("lively.serializer2"),y.yield(Ge.loadComponents(),26);case 26:return y.yield(tb.import("./index-96ee3fea.js").then(function(E){return E.i}),27);case 27:return Ge.extractModules("lively.halos"),y.yield(tb.import("./index-6e65d49f.js"),28);case 28:return Ge.extractModules("lively-system-interface"),
y.yield(Promise.resolve().then(function(){return Ypa}),29);case 29:return Ge.extractModules("lively.graphics"),x=lively,y.yield(Promise.resolve().then(function(){return hya}),30);case 30:x.morphic=y.yieldResult,Ge.extractModules("lively.morphic"),e.finishPackage({packageName:"lively.morphic",frozen:!0}),y.jumpToEnd()}})}).then(function(){var a,f,m,r,v,x,y,E;return $jscomp.asyncExecutePromiseGeneratorProgram(function(F){switch(F.nextAddress){case 1:return a=window.SYSTEM_BASE_URL||document.location.origin,
f=window.System,m=f.baseURL,m.endsWith("/")&&(m=m.slice(0,-1)),F.yield(Ge.resource(a).join("package-registry.json").readJson(),2);case 2:return r=F.yieldResult,F.yield(Ge.loadViaScript(Ge.resource(a).join("/lively.next-node_modules/babel-standalone/babel.js").url),3);case 3:return F.yield(Ge.loadViaScript(Ge.resource(a).join("/lively.next-node_modules/systemjs/dist/system.src.js").url),4);case 4:return F.yield(Ge.loadViaScript(Ge.resource(a).join("/lively.modules/systemjs-init.js").url),5);case 5:v=
lively.modules.getSystem("bootstrapped",{baseURL:a});lively.modules.changeSystem(v,!0);v["__lively.modules__packageRegistry"]=lively.modules.PackageRegistry.fromJSON(v,r);for(x in Ge.extractedModules)y=x.replace(m,a),v.set(y,v.newModule(Ge.extractedModules[x])),E=lively.modules.module(y),E._recorder=Ge.extractedModules[x],E._frozenModule=!0;f.config({baseURL:a});Ge.installFetchHook(b);F.jumpToEnd()}})}).then(function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){if("dynamic"==l["lively.lang"]&&
!Ge.fastLoad)return a.return(Ge.importPackageAndDo("lively.lang",function(f){e.finishPackage({packageName:"lively.lang",loaded:!0});delete f._prevLivelyGlobal},b));a.jumpToEnd()})}).then(function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){e.animate({opacity:1,easing:Ge.easings.outExpo,duration:300});if("dynamic"==l["lively.ast"]&&!Ge.fastLoad)return a.return(Ge.importPackageAndDo("lively.ast",function(f){e.finishPackage({packageName:"lively.ast",loaded:!0});lively.ast=f},b));
a.jumpToEnd()})}).then(function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){if("dynamic"==l["lively.source-transform"]&&!Ge.fastLoad)return a.return(Ge.importPackageAndDo("lively.source-transform",function(f){e.finishPackage({packageName:"lively.source-transform",loaded:!0});lively.sourceTransform=f},b));a.jumpToEnd()})}).then(function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){if("dynamic"==l["lively.classes"]&&!Ge.fastLoad)return a.return(Ge.importPackageAndDo("lively.classes",
function(f){e.finishPackage({packageName:"lively.classes",loaded:!0});lively.classes=f},b));a.jumpToEnd()})}).then(function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){if("dynamic"==l["lively.vm"]&&!Ge.fastLoad)return a.return(Ge.importPackageAndDo("lively.vm",function(f){e.finishPackage({packageName:"lively.vm",loaded:!0});lively.vm=f},b));a.jumpToEnd()})}).then(function(){function a(f){lively.modules=f;lively.modules.unwrapModuleLoad();lively.modules.unwrapModuleResolution();
lively.modules.wrapModuleLoad();lively.modules.wrapModuleResolution();Ge.installFetchHook(b);var m=System["__lively.modules__packageRegistry"];delete System["__lively.modules__packageRegistry"];f=System["__lively.modules__packageRegistry"]=f.PackageRegistry.ofSystem(System);Object.assign(f,Ge.obj.select(m,["packageMap","individualPackageDirs","devPackageDirs","packageBaseDirs"]));f.resetByURL();m=f.allPackages();var r=lively.modules.module("lively.modules/src/packages/package.js").recorder.Package;
m.filter(function(x){return!x.constructor[Symbol.for("lively-module-meta")]}).forEach(function(x){Ge.adoptObject(x,r)});m=Object.values(System["__lively.modules__loadedModules"]);var v=lively.modules.module("lively.modules/src/module.js").recorder.ModuleInterface;m.filter(function(x){return!x.constructor[Symbol.for("lively-module-meta")]}).forEach(function(x){Ge.adoptObject(x,v)})}return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){if(1==f.nextAddress)return"frozen"==l["lively.modules"]||
Ge.fastLoad?(System._scripting=lively.modules.scripting,f.jumpTo(2)):f.yield(Ge.importPackageAndDo("lively.modules",a,b),2);e.finishPackage({packageName:"lively.modules",loaded:!0});f.jumpToEnd()})}).then(function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){if("dynamic"==l["lively.user"]&&!Ge.fastLoad)return a.return(Ge.importPackageAndDo("lively.user",function(f){e.finishPackage({packageName:"lively.user",loaded:!0});lively.user=f},b));a.jumpToEnd()})}).then(function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){if("dynamic"==
l["lively.storage"]&&!Ge.fastLoad)return a.return(Ge.importPackageAndDo("lively.storage",function(f){e.finishPackage({packageName:"lively.storage",loaded:!0});lively.storage=f},b));a.jumpToEnd()})})};Ge.importPackageAndDo=function(b,e,l){var a=b.split("/").slice(-1)[0];l.label="loading "+a;return lively.modules.importPackage(b).then(e||function(){})};Ge.polyfills=function(){var b=[];"PointerEvent"in window||b.push(Ge.loadViaScript(Ge.resource(System.baseURL).join("/lively.next-node_modules/pepjs/dist/pep.js").url));
"fetch"in window||b.push(Ge.loadViaScript("//cdnjs.cloudflare.com/ajax/libs/fetch/1.0.0/fetch.js"));return Promise.all(b)};Ge.resource=A;Ge.loadViaScript=Ka;Ge.promise=hg;Ge.string=Th;Ge.obj=ng;Ge.modulePackage=tP;Ge.easings=Rr;Ge.adoptObject=du;Ge.Color=xg;lively.modules=Ge.modulePackage;Ge.loginDone=!0;Ge.doBootstrap=!0;Ge.askBeforeQuit=!0;Ge.worldLoaded=!1;Ge.loc=document.location;Ge.query=Ge.resource(Ge.loc.href).query();Ge.fastLoad=1==Ge.query.fastLoad||window.FORCE_FAST_LOAD;Ge.bootstrap=YN;
Ge.bootstrap=YN;Ge.loads=0;Ge.extractedModules={};var fga=Object.freeze({__proto__:null,bootstrap:YN});em.users.authServerURL="https://auth.typeshift.io";em.css.fontAwesome="https://admin.typeshift.io/lively.morphic/assets/fontawesome-free-5.12.1/css/all.css";em.css.inconsolata="https://admin.typeshift.io/lively.morphic/assets/inconsolata/inconsolata.css";var l9=JSON.parse('{"id":"WorldLandingPage_E793AD1E_97A9_4133_867A_759BFEBC5C28","snapshot":{"WorldLandingPage_E793AD1E_97A9_4133_867A_759BFEBC5C28":{"rev":3752154,"props":{"name":{"value":"world landing page"},"draggable":{"value":true},"grabbable":{"value":true},"reactsToPointer":{"value":false},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(65.60078124999927,36.453125)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(1003.0232101304723,594.571136205233)"},"fill":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(0,0,0)"},"submorphs":{"value":[{"__ref__":true,"id":"Globe_7EEF9F5B_9CAE_4CB6_A6C2_14420AD05845","rev":2695}]},"clipMode":{"value":"hidden"},"styleClasses":{"value":["WorldLandingPage","Morph","morph"]},"installedFonts":{"value":{"__ref__":true,"id":"50255DEB-8E10-4182-A228-A64F4174AFA7","rev":0}},"metadata":{"value":{"__ref__":true,"id":"3E1B8DBD-5E6D-417C-B72D-85E7013E6A19","rev":0}},"loadingScreen":{"value":{"__ref__":true,"id":"HTMLMorph_FC98BEAD_210B_4BC1_BA95_AEF824FE2DC2","rev":2638}}},"lively.serializer-class-info":{"className":"WorldLandingPage","module":{"package":{"name":"PartialFreezing","version":"0.1.1-117"},"pathInPackage":"landing-page.js"}}},"Globe_7EEF9F5B_9CAE_4CB6_A6C2_14420AD05845":{"rev":2695,"props":{"attributeConnections":{"value":[{"__ref__":true,"id":"A7019D2F-9990-4EC8-B22B-C90E204EC722","rev":0}]},"name":{"value":"globe"},"reactsToPointer":{"value":false},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(-1.2699218750001364,0.14453125)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(1508.8984375,971.6171875)"},"fill":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(0,0,0)"},"submorphs":{"value":[{"__ref__":true,"id":"WebGLCanvas_6627C00E_B234_470B_8892_A8EDCDE4CF97","rev":2679},{"__ref__":true,"id":"Morph_58E1F47D_735D_48B4_83FE_964771854449","rev":2693}]},"styleClasses":{"value":["Globe","Canvas","Morph","morph"]},"borderColor":{"key":"borderColor","verbatim":true,"value":{"top":[0,0,0,1],"right":[0,0,0,1],"bottom":[0,0,0,1],"left":[0,0,0,1]}},"metadata":{"value":{"__ref__":true,"id":"723A53EA-C555-4E11-A886-060133E73D12","rev":0}},"canvasExtent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(1508,971)"},"_serializedContents":{"value":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAABeQAAAPLCAYAAAA+EomxAAAgAElEQVR4XuzYMQ0AAAgEMfBvGhXcVAx80jDdjiNAgAABAgQIECBAgAABAgQIECBAgAABAgTeBfZ9wQABAgQIECBAgAABAgQIECBAgAABAgQIECAwgrwnIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBG+p6dkAACAASURBVAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwf8D/nSQAAIABJREFUIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIHDt2DEJAAAAwzD/ruuiVxQMwq4SIECAAAECBAgQIECAwCAgyA/IJggQIECAAAECBAgQIECAAAECBAgQIECAgCDvAwQIECBAgAABAgQIECBAgAABAgQIECBAYBAQ5AdkEwQIECBAgAABAgQIECBAgAABAgQIECBAQJD3AQIECBAgQIAAAQIECBAgQIAAAQIECBAgMAgI8gOyCQIECBAgQIAAAQIECBAgQIAAAQIECBAgIMj7AAECBAgQIECAAAECBAgQIECAAAECBAgQGAQE+QHZBAECBAgQIECAAAECBAgQIECAAAECBAgQEOR9gAABAgQIECBAgAABAgQIECBAgAABAgQIDAKC/IBsggABAgQIECBAgAABAgQIECBAgAABAgQICPI+QIAAAQIECBAgQIAAAQIECBAgQIAAAQIEBgFBfkA2QYAAAQIECBAgQIAAAQIECBAgQIAAAQIEBHkfIECAAAECBAgQIECAAAECBAgQIECAAAECg4AgPyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwPECBAgAABAgQIECBAgAABAgQIECBAgACBQUCQH5BNECBAgAABAgQIECBAgAABAgQIECBAgAABQd4HCBAgQIAAAQIECBAgQIAAAQIECBAgQIDAICDID8gmCBAgQIAAAQIECBAgQIAAAQIECBAgQICAIO8DBAgQIECAAAECBAgQIECAAAECBAgQIEBgEBDkB2QTBAgQIECAAAECBAgQIECAAAECBAgQIEBAkPcBAgQIECBAgAABAgQIECBAgAABAgQIECAwCAjyA7IJAgQIECBAgAABAgQIECBAgAABAgQIECAgyPsAAQIECBAgQIAAAQIECBAgQIAAAQIECBAYBAT5AdkEAQIECBAgQIAAAQIECBAgQIAAAQIECBAQ5H2AAAECBAgQIECAAAECBAgQIECAAAECBAgMAoL8gGyCAAECBAgQIECAAAECBAgQIECAAAECBAgI8j5AgAABAgQIECBAgAABAgQIECBAgAABAgQGAUF+QDZBgAABAgQIECBAgAABAgQIECBAgAABAgQEeR8gQIAAAQIECBAgQIAAAQIECBAgQIAAAQKDgCA/IJsgQIAAAQIECBAgQIAAAQIECBAgQIAAAQKCvA8QIECAAAECBAgQIECAAAECBAgQIECAAIFBQJAfkE0QIECAAAECBAgQIECAAAECBAgQIECAAAFB3gcIECBAgAABAgQIECBAgAABAgQIECBAgMAgIMgPyCYIECBAgAABAgQIECBAgAABAgQIECBAgIAg7wMECBAgQIAAAQIECBAgQIAAAQIECBAgQGAQEOQHZBMECBAgQIAAAQIECBAgQIAAAQIECBAgQECQ9wECBAgQIECAAAECBAgQIECAAAECBAgQIDAICPIDsgkCBAgQIECAAAECBAgQIECAAAECBAgQICDI+wABAgQIECBAgAABAgQIECBAgAABAgQIEBgEBPkB2QQBAgQIECBAgAABAgQIECBAgAABAgQIEBDkfYAAAQIECBAgQIAAAQIECBAgQIAAAQIECAwCgvyAbIIAAQIECBAgQIAAAQIECBAgQIAAAQIECAjyPkCAAAECBAgQIECAAAECBAgQIECAAAECBAYBQX5ANkGAAAECBAgQIECAAAECBAgQIECAAAECBAR5HyBAgAABAgQIECBAgAABAgQIECBAgAABAoOAID8gmyBAgAABAgQIECBAgAABAgQIECBAgAABAoK8DxAgQIAAAQIECBAgQIAAAQIECBAgQIAAgUFAkB+QTRAgQIAAAQIECBAgQIAAAQIECBAgQIAAAUHeBwgQIECAAAECBAgQIECAAAECBAgQIECAwCAgyA/IJggQIECAAAECBAgQIECAAAECBAgQIECAgCDvAwQIECBAgAABAgQIECBAgAABAgQIECBAYBAQ5AdkEwQIECBAgAABAgQIECBAgAABAgQIECBAQJD3AQIECBAgQIAAAQIECBAgQIAAAQIECBAgMAgI8gOyCQIECBAgQIAAAQIECBAgQIAAAQIECBAgIMj7AAECBAgQIECAAAECBAgQIECAAAECBAgQGAQE+QHZBAECBAgQIECAAAECBAgQIECAAAECBAgQEOR9gAABAgQIECBAgAABAgQIECBAgAABAgQIDAKC/IBsggABAgQIECBAgAABAgQIECBAgAABAgQICPI+QIAAAQIECBAgQIAAAQIECBAgQIAAAQIEBgFBfkA2QYAAAQIECBAgQIAAAQIECBAgQIAAAQIEBHkfIECAAAECBAgQIECAAAECBAgQIECAAAECg4AgPyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwPECBAgAABAgQIECBAgAABAgQIECBAgACBQUCQH5BNECBAgAABAgQIECBAgAABAgQIECBAgAABQd4HCBAgQIAAAQIECBAgQIAAAQIECBAgQIDAICDID8gmCBAgQIAAAQIECBAgQIAAAQIECBAgQICAIO8DBAgQIECAAAECBAgQIECAAAECBAgQIEBgEBDkB2QTBAgQIECAAAECBAgQIECAAAECBAgQIEBAkPcBAgQIECBAgAABAgQIECBAgAABAgQIECAwCAjyA7IJAgQIECBAgAABAgQIECBAgAABAgQIECAgyPsAAQIECBAgQIAAAQIECBAgQIAAAQIECBAYBAT5AdkEAQIECBAgQIAAAQIECBAgQIAAAQIECBAQ5H2AAAECBAgQIECAAAECBAgQIECAAAECBAgMAoL8gGyCAAECBAgQIECAAAECBAgQIECAAAECBAgI8j5AgAABAgQIECBAgAABAgQIECBAgAABAgQGAUF+QDZBgAABAgQIECBAgAABAgQIECBAgAABAgQEeR8gQIAAAQIECBAgQIAAAQIECBAgQIAAAQKDgCA/IJsgQIAAAQIECBAgQIAAAQIECBAgQIAAAQKCvA8QIECAAAECBAgQIECAAAECBAgQIECAAIFBQJAfkE0QIECAAAECBAgQIECAAAECBAgQIECAAAFB3gcIECBAgAABAgQIECBAgAABAgQIECBAgMAgIMgPyCYIECBAgAABAgQIECBAgAABAgQIECBAgIAg7wMECBAgQIAAAQIECBAgQIAAAQIECBAgQGAQEOQHZBMECBAgQIAAAQIECBAgQIAAAQIECBAgQECQ9wECBAgQIECAAAECBAgQIECAAAECBAgQIDAICPIDsgkCBAgQIECAAAECBAgQIECAAAECBAgQICDI+wABAgQIECBAgAABAgQIECBAgAABAgQIEBgEBPkB2QQBAgQIECBAgAABAgQIECBAgAABAgQIEBDkfYAAAQIECBAgQIAAAQIECBAgQIAAAQIECAwCgvyAbIIAAQIECBAgQIAAAQIECBAgQIAAAQIECAjyPkCAAAECBAgQIECAAAECBAgQIECAAAECBAYBQX5ANkGAAAECBAgQIECAAAECBAgQIECAAAECBAR5HyBAgAABAgQIECBAgAABAgQIECBAgAABAoOAID8gmyBAgAABAgQIECBAgAABAgQIECBAgAABAoK8DxAgQIAAAQIECBAgQIAAAQIECBAgQIAAgUFAkB+QTRAgQIAAAQIECBAgQIAAAQIECBAgQIAAAUHeBwgQIECAAAECBAgQIECAAAECBAgQIECAwCAgyA/IJggQIECAAAECBAgQIECAAAECBAgQIECAgCDvAwQIECBAgAABAgQIECBAgAABAgQIECBAYBAQ5AdkEwQIECBAgAABAgQIECBAgAABAgQIECBAQJD3AQIECBAgQIAAAQIECBAgQIAAAQIECBAgMAgI8gOyCQIECBAgQIAAAQIECBAgQIAAAQIECBAgIMj7AAECBAgQIECAAAECBAgQIECAAAECBAgQGAQE+QHZBAECBAgQIECAAAECBAgQIECAAAECBAgQEOR9gAABAgQIECBAgAABAgQIECBAgAABAgQIDAKC/IBsggABAgQIECBAgAABAgQIECBAgAABAgQICPI+QIAAAQIECBAgQIAAAQIECBAgQIAAAQIEBgFBfkA2QYAAAQIECBAgQIAAAQIECBAgQIAAAQIEBHkfIECAAAECBAgQIECAAAECBAgQIECAAAECg4AgPyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwPECBAgAABAgQIECBAgAABAgQIECBAgACBQUCQH5BNECBAgAABAgQIECBAgAABAgQIECBAgAABQd4HCBAgQIAAAQIECBAgQIAAAQIECBAgQIDAICDID8gmCBAgQIAAAQIECBAgQIAAAQIECBAgQICAIO8DBAgQIECAAAECBAgQIECAAAECBAgQIEBgEBDkB2QTBAgQIECAAAECBAgQIECAAAECBAgQIEBAkPcBAgQIECBAgAABAgQIECBAgAABAgQIECAwCAjyA7IJAgQIECBAgAABAgQIECBAgAABAgQIECAgyPsAAQIECBAgQIAAAQIECBAgQIAAAQIECBAYBAT5AdkEAQIECBAgQIAAAQIECBAgQIAAAQIECBAQ5H2AAAECBAgQIECAAAECBAgQIECAAAECBAgMAoL8gGyCAAECBAgQIECAAAECBAgQIECAAAECBAgI8j5AgAABAgQIECBAgAABAgQIECBAgAABAgQGAUF+QDZBgAABAgQIECBAgAABAgQIECBAgAABAgQEeR8gQIAAAQIECBAgQIAAAQIECBAgQIAAAQKDgCA/IJsgQIAAAQIECBAgQIAAAQIECBAgQIAAAQKCvA8QIECAAAECBAgQIECAAAECBAgQIECAAIFBQJAfkE0QIECAAAECBAgQIECAAAECBAgQIECAAAFB3gcIECBAgAABAgQIECBAgAABAgQIECBAgMAgIMgPyCYIECBAgAABAgQIECBAgAABAgQIECBAgIAg7wMECBAgQIAAAQIECBAgQIAAAQIECBAgQGAQEOQHZBMECBAgQIAAAQIECBAgQIAAAQIECBAgQECQ9wECBAgQIECAAAECBAgQIECAAAECBAgQIDAICPIDsgkCBAgQIECAAAECBAgQIECAAAECBAgQICDI+wABAgQIECBAgAABAgQIECBAgAABAgQIEBgEBPkB2QQBAgQIECBAgAABAgQIECBAgAABAgQIEBDkfYAAAQIECBAgQIAAAQIECBAgQIAAAQIECAwCgvyAbIIAAQIECBAgQIAAAQIECBAgQIAAAQIECAjyPkCAAAECBAgQIECAAAECBAgQIECAAAECBAYBQX5ANkGAAAECBAgQIECAAAECBAgQIECAAAECBAR5HyBAgAABAgQIECBAgAABAgQIECBAgAABAoOAID8gmyBAgAABAgQIECBAgAABAgQIECBAgAABAoK8DxAgQIAAAQIECBAgQIAAAQIECBAgQIAAgUFAkB+QTRAgQIAAAQIECBAgQIAAAQIECBAgQIAAAUHeBwgQIECAAAECBAgQIECAAAECBAgQIECAwCAgyA/IJggQIECAAAECBAgQIECAAAECBAgQIECAgCDvAwQIECBAgAABAgQIECBAgAABAgQIECBAYBAQ5AdkEwQIECBAgAABAgQIECBAgAABAgQIECBAQJD3AQIECBAgQIAAAQIECBAgQIAAAQIECBAgMAgI8gOyCQIECBAgQIAAAQIECBAgQIAAAQIECBAgIMj7AAECBAgQIECAAAECBAgQIECAAAECBAgQGAQE+QHZBAECBAgQIECAAAECBAgQIECAAAECBAgQEOR9gAABAgQIECBAgAABAgQIECBAgAABAgQIDAKC/IBsggABAgQIECBAgAABAgQIECBAgAABAgQICPI+QIAAAQIECBAgQIAAAQIECBAgQIAAAQIEBgFBfkA2QYAAAQIECBAgQIAAAQIECBAgQIAAAQIEBHkfIECAAAECBAgQIECAAAECBAgQIECAAAECg4AgPyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwPECBAgAABAgQIECBAgAABAgQIECBAgACBQUCQH5BNECBAgAABAgQIECBAgAABAgQIECBAgAABQd4HCBAgQIAAAQIECBAgQIAAAQIECBAgQIDAICDID8gmCBAgQIAAAQIECBAgQIAAAQIECBAgQICAIO8DBAgQIECAAAECBAgQIECAAAECBAgQIEBgEBDkB2QTBAgQIECAAAECBAgQIECAAAECBAgQIEBAkPcBAgQIECBAgAABAgQIECBAgAABAgQIECAwCAjyA7IJAgQIECBAgAABAgQIECBAgAABAgQIECAgyPsAAQIECBAgQIAAAQIECBAgQIAAAQIECBAYBAT5AdkEAQIECBAgQIAAAQIECBAgQIAAAQIECBAQ5H2AAAECBAgQIECAAAECBAgQIECAAAECBAgMAoL8gGyCAAECBAgQIECAAAECBAgQIECAAAECBAgI8j5AgAABAgQIECBAgAABAgQIECBAgAABAgQGAUF+QDZBgAABAgQIECBAgAABAgQIECBAgAABAgQEeR8gQIAAAQIECBAgQIAAAQIECBAgQIAAAQKDgCA/IJsgQIAAAQIECBAgQIAAAQIECBAgQIAAAQKCvA8QIECAAAECBAgQIECAAAECBAgQIECAAIFBQJAfkE0QIECAAAECBAgQIECAAAECBAgQIECAAAFB3gcIECBAgAABAgQIECBAgAABAgQIECBAgMAgIMgPyCYIECBAgAABAgQIECBAgAABAgQIECBAgIAg7wMECBAgQIAAAQIECBAgQIAAAQIECBAgQGAQEOQHZBMECBBYNmpRAAAMNUlEQVQgQIAAAQIECBAgQIAAAQIECBAgQECQ9wECBAgQIECAAAECBAgQIECAAAECBAgQIDAICPIDsgkCBAgQIECAAAECBAgQIECAAAECBAgQICDI+wABAgQIECBAgAABAgQIECBAgAABAgQIEBgEBPkB2QQBAgQIECBAgAABAgQIECBAgAABAgQIEBDkfYAAAQIECBAgQIAAAQIECBAgQIAAAQIECAwCgvyAbIIAAQIECBAgQIAAAQIECBAgQIAAAQIECAjyPkCAAAECBAgQIECAAAECBAgQIECAAAECBAYBQX5ANkGAAAECBAgQIECAAAECBAgQIECAAAECBAR5HyBAgAABAgQIECBAgAABAgQIECBAgAABAoOAID8gmyBAgAABAgQIECBAgAABAgQIECBAgAABAoK8DxAgQIAAAQIECBAgQIAAAQIECBAgQIAAgUFAkB+QTRAgQIAAAQIECBAgQIAAAQIECBAgQIAAAUHeBwgQIECAAAECBAgQIECAAAECBAgQIECAwCAgyA/IJggQIECAAAECBAgQIECAAAECBAgQIECAgCDvAwQIECBAgAABAgQIECBAgAABAgQIECBAYBAQ5AdkEwQIECBAgAABAgQIECBAgAABAgQIECBAQJD3AQIECBAgQIAAAQIECBAgQIAAAQIECBAgMAgI8gOyCQIECBAgQIAAAQIECBAgQIAAAQIECBAgIMj7AAECBAgQIECAAAECBAgQIECAAAECBAgQGAQE+QHZBAECBAgQIECAAAECBAgQIECAAAECBAgQEOR9gAABAgQIECBAgAABAgQIECBAgAABAgQIDAKC/IBsggABAgQIECBAgAABAgQIECBAgAABAgQICPI+QIAAAQIECBAgQIAAAQIECBAgQIAAAQIEBgFBfkA2QYAAAQIECBAgQIAAAQIECBAgQIAAAQIEBHkfIECAAAECBAgQIECAAAECBAgQIECAAAECg4AgPyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwPECBAgAABAgQIECBAgAABAgQIECBAgACBQUCQH5BNECBAgAABAgQIECBAgAABAgQIECBAgAABQd4HCBAgQIAAAQIECBAgQIAAAQIECBAgQIDAICDID8gmCBAgQIAAAQIECBAgQIAAAQIECBAgQICAIO8DBAgQIECAAAECBAgQIECAAAECBAgQIEBgEBDkB2QTBAgQIECAAAECBAgQIECAAAECBAgQIEBAkPcBAgQIECBAgAABAgQIECBAgAABAgQIECAwCAjyA7IJAgQIECBAgAABAgQIECBAgAABAgQIECAgyPsAAQIECBAgQIAAAQIECBAgQIAAAQIECBAYBAT5AdkEAQIECBAgQIAAAQIECBAgQIAAAQIECBAQ5H2AAAECBAgQIECAAAECBAgQIECAAAECBAgMAoL8gGyCAAECBAgQIECAAAECBAgQIECAAAECBAgI8j5AgAABAgQIECBAgAABAgQIECBAgAABAgQGAUF+QDZBgAABAgQIECBAgAABAgQIECBAgAABAgQEeR8gQIAAAQIECBAgQIAAAQIECBAgQIAAAQKDgCA/IJsgQIAAAQIECBAgQIAAAQIECBAgQIAAAQKCvA8QIECAAAECBAgQIECAAAECBAgQIECAAIFBQJAfkE0QIECAAAECBAgQIECAAAECBAgQIECAAAFB3gcIECBAgAABAgQIECBAgAABAgQIECBAgMAgIMgPyCYIECBAgAABAgQIECBAgAABAgQIECBAgIAg7wMECBAgQIAAAQIECBAgQIAAAQIECBAgQGAQEOQHZBMECBAgQIAAAQIECBAgQIAAAQIECBAgQECQ9wECBAgQIECAAAECBAgQIECAAAECBAgQIDAICPIDsgkCBAgQIECAAAECBAgQIECAAAECBAgQICDI+wABAgQIECBAgAABAgQIECBAgAABAgQIEBgEBPkB2QQBAgQIECBAgAABAgQIECBAgAABAgQIEBDkfYAAAQIECBAgQIAAAQIECBAgQIAAAQIECAwCgvyAbIIAAQIECBAgQIAAAQIECBAgQIAAAQIECAjyPkCAAAECBAgQIECAAAECBAgQIECAAAECBAYBQX5ANkGAAAECBAgQIECAAAECBAgQIECAAAECBAR5HyBAgAABAgQIECBAgAABAgQIECBAgAABAoOAID8gmyBAgAABAgQIECBAgAABAgQIECBAgAABAoK8DxAgQIAAAQIECBAgQIAAAQIECBAgQIAAgUFAkB+QTRAgQIAAAQIECBAgQIAAAQIECBAgQIAAAUHeBwgQIECAAAECBAgQIECAAAECBAgQIECAwCAgyA/IJggQIECAAAECBAgQIECAAAECBAgQIECAgCDvAwQIECBAgAABAgQIECBAgAABAgQIECBAYBAQ5AdkEwQIECBAgAABAgQIECBAgAABAgQIECBAQJD3AQIECBAgQIAAAQIECBAgQIAAAQIECBAgMAgI8gOyCQIECBAgQIAAAQIECBAgQIAAAQIECBAgIMj7AAECBAgQIECAAAECBAgQIECAAAECBAgQGAQE+QHZBAECBAgQIECAAAECBAgQIECAAAECBAgQEOR9gAABAgQIECBAgAABAgQIECBAgAABAgQIDAKC/IBsggABAgQIECBAgAABAgQIECBAgAABAgQICPI+QIAAAQIECBAgQIAAAQIECBAgQIAAAQIEBgFBfkA2QYAAAQIECBAgQIAAAQIECBAgQIAAAQIEBHkfIECAAAECBAgQIECAAAECBAgQIECAAAECg4AgPyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwPECBAgAABAgQIECBAgAABAgQIECBAgACBQUCQH5BNECBAgAABAgQIECBAgAABAgQIECBAgAABQd4HCBAgQIAAAQIECBAgQIAAAQIECBAgQIDAICDID8gmCBAgQIAAAQIECBAgQIAAAQIECBAgQICAIO8DBAgQIECAAAECBAgQIECAAAECBAgQIEBgEBDkB2QTBAgQIECAAAECBAgQIECAAAECBAgQIEBAkPcBAgQIECBAgAABAgQIECBAgAABAgQIECAwCAjyA7IJAgQIECBAgAABAgQIECBAgAABAgQIECAgyPsAAQIECBAgQIAAAQIECBAgQIAAAQIECBAYBAT5AdkEAQIECBAgQIAAAQIECBAgQIAAAQIECBAQ5H2AAAECBAgQIECAAAECBAgQIECAAAECBAgMAoL8gGyCAAECBAgQIECAAAECBAgQIECAAAECBAgI8j5AgAABAgQIECBAgAABAgQIECBAgAABAgQGAUF+QDZBgAABAgQIECBAgAABAgQIECBAgAABAgQEeR8gQIAAAQIECBAgQIAAAQIECBAgQIAAAQKDgCA/IJsgQIAAAQIECBAgQIAAAQIECBAgQIAAAQKCvA8QIECAAAECBAgQIECAAAECBAgQIECAAIFBQJAfkE0QIECAAAECBAgQIECAAAECBAgQIECAAAFB3gcIECBAgAABAgQIECBAgAABAgQIECBAgMAgIMgPyCYIECBAgAABAgQIECBAgAABAgQIECBAgIAg7wMECBAgQIAAAQIECBAgQIAAAQIECBAgQGAQEOQHZBMECBAgQIAAAQIECBAgQIAAAQIECBAgQECQ9wECBAgQIECAAAECBAgQIECAAAECBAgQIDAICPIDsgkCBAgQIECAAAECBAgQIECAAAECBAgQICDI+wABAgQIECBAgAABAgQIECBAgAABAgQIEBgEBPkB2QQBAgQIECBAgAABAgQIECBAgAABAgQIEBDkfYAAAQIECBAgQIAAAQIECBAgQIAAAQIECAwCgvyAbIIAAQIECBAgQIAAAQIECBAgQIAAAQIECAjyPkCAAAECBAgQIECAAAECBAgQIECAAAECBAYBQX5ANkGAAAECBAgQIECAAAECBAgQIECAAAECBAR5HyBAgAABAgQIECBAgAABAgQIECBAgAABAoOAID8gmyBAgAABAgQIECBAgAABAgQIECBAgAABAoK8DxAgQIAAAQIECBAgQIAAAQIECBAgQIAAgUFAkB+QTRAgQIAAAQIECBAgQIAAAQIECBAgQIAAAUHeBwgQIECAAAECBAgQIECAAAECBAgQIECAwCAQQrgDzJoZi3wAAAAASUVORK5CYII="}},"lively.serializer-class-info":{"className":"Globe","module":{"package":{"name":"Globe","version":"0.1.1-26"},"pathInPackage":"index.js"}}},"A7019D2F-9990-4EC8-B22B-C90E204EC722":{"rev":0,"props":{"_rev":{"value":0},"doNotSerialize":{"value":["isActive","converter","updater"]},"sourceObj":{"value":{"__ref__":true,"id":"Globe_7EEF9F5B_9CAE_4CB6_A6C2_14420AD05845","rev":2695}},"sourceAttrName":{"value":"extent"},"targetObj":{"value":{"__ref__":true,"id":"Globe_7EEF9F5B_9CAE_4CB6_A6C2_14420AD05845","rev":2695}},"targetMethodName":{"value":"onExtentChanged"},"garbageCollect":{"value":true},"signalOnAssignment":{"value":true}},"lively.serializer-class-info":{"className":"AttributeConnection","module":{"package":{"name":"lively.bindings","version":"0.1.2"},"pathInPackage":"index.js"}}},"WebGLCanvas_6627C00E_B234_470B_8892_A8EDCDE4CF97":{"rev":2679,"props":{"attributeConnections":{"value":[{"__ref__":true,"id":"3B4F261D-8A23-4B6E-87D4-5A6BBFC2BCB0","rev":0}]},"name":{"value":"webgl canvas"},"reactsToPointer":{"value":false},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(1508.8984375,971.6171875)"},"styleClasses":{"value":["WebGLCanvas","Canvas","Morph","morph"]},"borderColor":{"key":"borderColor","verbatim":true,"value":{"top":[0.9058823529411765,0.2980392156862745,0.23529411764705882,1],"right":[0.9058823529411765,0.2980392156862745,0.23529411764705882,1],"bottom":[0.9058823529411765,0.2980392156862745,0.23529411764705882,1],"left":[0.9058823529411765,0.2980392156862745,0.23529411764705882,1]}},"metadata":{"value":{"__ref__":true,"id":"AA7E470A-96E0-4515-8874-31D755BD6C76","rev":0}},"contextType":{"value":"webgl"},"canvasExtent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(1508,971)"},"_serializedContents":{"value":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAABeQAAAPLCAYAAAA+EomxAAAgAElEQVR4XuzYMQ0AAAgEMfBvGhXcVAx80jDdjiNAgAABAgQIECBAgAABAgQIECBAgAABAgTeBfZ9wQABAgQIECBAgAABAgQIECBAgAABAgQIECAwgrwnIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBG+p6dkAACAASURBVAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwf8D/nSQAAIABJREFUIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIHDt2DEJAAAAwzD/ruuiVxQMwq4SIECAAAECBAgQIECAwCAgyA/IJggQIECAAAECBAgQIECAAAECBAgQIECAgCDvAwQIECBAgAABAgQIECBAgAABAgQIECBAYBAQ5AdkEwQIECBAgAABAgQIECBAgAABAgQIECBAQJD3AQIECBAgQIAAAQIECBAgQIAAAQIECBAgMAgI8gOyCQIECBAgQIAAAQIECBAgQIAAAQIECBAgIMj7AAECBAgQIECAAAECBAgQIECAAAECBAgQGAQE+QHZBAECBAgQIECAAAECBAgQIECAAAECBAgQEOR9gAABAgQIECBAgAABAgQIECBAgAABAgQIDAKC/IBsggABAgQIECBAgAABAgQIECBAgAABAgQICPI+QIAAAQIECBAgQIAAAQIECBAgQIAAAQIEBgFBfkA2QYAAAQIECBAgQIAAAQIECBAgQIAAAQIEBHkfIECAAAECBAgQIECAAAECBAgQIECAAAECg4AgPyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwPECBAgAABAgQIECBAgAABAgQIECBAgACBQUCQH5BNECBAgAABAgQIECBAgAABAgQIECBAgAABQd4HCBAgQIAAAQIECBAgQIAAAQIECBAgQIDAICDID8gmCBAgQIAAAQIECBAgQIAAAQIECBAgQICAIO8DBAgQIECAAAECBAgQIECAAAECBAgQIEBgEBDkB2QTBAgQIECAAAECBAgQIECAAAECBAgQIEBAkPcBAgQIECBAgAABAgQIECBAgAABAgQIECAwCAjyA7IJAgQIECBAgAABAgQIECBAgAABAgQIECAgyPsAAQIECBAgQIAAAQIECBAgQIAAAQIECBAYBAT5AdkEAQIECBAgQIAAAQIECBAgQIAAAQIECBAQ5H2AAAECBAgQIECAAAECBAgQIECAAAECBAgMAoL8gGyCAAECBAgQIECAAAECBAgQIECAAAECBAgI8j5AgAABAgQIECBAgAABAgQIECBAgAABAgQGAUF+QDZBgAABAgQIECBAgAABAgQIECBAgAABAgQEeR8gQIAAAQIECBAgQIAAAQIECBAgQIAAAQKDgCA/IJsgQIAAAQIECBAgQIAAAQIECBAgQIAAAQKCvA8QIECAAAECBAgQIECAAAECBAgQIECAAIFBQJAfkE0QIECAAAECBAgQIECAAAECBAgQIECAAAFB3gcIECBAgAABAgQIECBAgAABAgQIECBAgMAgIMgPyCYIECBAgAABAgQIECBAgAABAgQIECBAgIAg7wMECBAgQIAAAQIECBAgQIAAAQIECBAgQGAQEOQHZBMECBAgQIAAAQIECBAgQIAAAQIECBAgQECQ9wECBAgQIECAAAECBAgQIECAAAECBAgQIDAICPIDsgkCBAgQIECAAAECBAgQIECAAAECBAgQICDI+wABAgQIECBAgAABAgQIECBAgAABAgQIEBgEBPkB2QQBAgQIECBAgAABAgQIECBAgAABAgQIEBDkfYAAAQIECBAgQIAAAQIECBAgQIAAAQIECAwCgvyAbIIAAQIECBAgQIAAAQIECBAgQIAAAQIECAjyPkCAAAECBAgQIECAAAECBAgQIECAAAECBAYBQX5ANkGAAAECBAgQIECAAAECBAgQIECAAAECBAR5HyBAgAABAgQIECBAgAABAgQIECBAgAABAoOAID8gmyBAgAABAgQIECBAgAABAgQIECBAgAABAoK8DxAgQIAAAQIECBAgQIAAAQIECBAgQIAAgUFAkB+QTRAgQIAAAQIECBAgQIAAAQIECBAgQIAAAUHeBwgQIECAAAECBAgQIECAAAECBAgQIECAwCAgyA/IJggQIECAAAECBAgQIECAAAECBAgQIECAgCDvAwQIECBAgAABAgQIECBAgAABAgQIECBAYBAQ5AdkEwQIECBAgAABAgQIECBAgAABAgQIECBAQJD3AQIECBAgQIAAAQIECBAgQIAAAQIECBAgMAgI8gOyCQIECBAgQIAAAQIECBAgQIAAAQIECBAgIMj7AAECBAgQIECAAAECBAgQIECAAAECBAgQGAQE+QHZBAECBAgQIECAAAECBAgQIECAAAECBAgQEOR9gAABAgQIECBAgAABAgQIECBAgAABAgQIDAKC/IBsggABAgQIECBAgAABAgQIECBAgAABAgQICPI+QIAAAQIECBAgQIAAAQIECBAgQIAAAQIEBgFBfkA2QYAAAQIECBAgQIAAAQIECBAgQIAAAQIEBHkfIECAAAECBAgQIECAAAECBAgQIECAAAECg4AgPyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwPECBAgAABAgQIECBAgAABAgQIECBAgACBQUCQH5BNECBAgAABAgQIECBAgAABAgQIECBAgAABQd4HCBAgQIAAAQIECBAgQIAAAQIECBAgQIDAICDID8gmCBAgQIAAAQIECBAgQIAAAQIECBAgQICAIO8DBAgQIECAAAECBAgQIECAAAECBAgQIEBgEBDkB2QTBAgQIECAAAECBAgQIECAAAECBAgQIEBAkPcBAgQIECBAgAABAgQIECBAgAABAgQIECAwCAjyA7IJAgQIECBAgAABAgQIECBAgAABAgQIECAgyPsAAQIECBAgQIAAAQIECBAgQIAAAQIECBAYBAT5AdkEAQIECBAgQIAAAQIECBAgQIAAAQIECBAQ5H2AAAECBAgQIECAAAECBAgQIECAAAECBAgMAoL8gGyCAAECBAgQIECAAAECBAgQIECAAAECBAgI8j5AgAABAgQIECBAgAABAgQIECBAgAABAgQGAUF+QDZBgAABAgQIECBAgAABAgQIECBAgAABAgQEeR8gQIAAAQIECBAgQIAAAQIECBAgQIAAAQKDgCA/IJsgQIAAAQIECBAgQIAAAQIECBAgQIAAAQKCvA8QIECAAAECBAgQIECAAAECBAgQIECAAIFBQJAfkE0QIECAAAECBAgQIECAAAECBAgQIECAAAFB3gcIECBAgAABAgQIECBAgAABAgQIECBAgMAgIMgPyCYIECBAgAABAgQIECBAgAABAgQIECBAgIAg7wMECBAgQIAAAQIECBAgQIAAAQIECBAgQGAQEOQHZBMECBAgQIAAAQIECBAgQIAAAQIECBAgQECQ9wECBAgQIECAAAECBAgQIECAAAECBAgQIDAICPIDsgkCBAgQIECAAAECBAgQIECAAAECBAgQICDI+wABAgQIECBAgAABAgQIECBAgAABAgQIEBgEBPkB2QQBAgQIECBAgAABAgQIECBAgAABAgQIEBDkfYAAAQIECBAgQIAAAQIECBAgQIAAAQIECAwCgvyAbIIAAQIECBAgQIAAAQIECBAgQIAAAQIECAjyPkCAAAECBAgQIECAAAECBAgQIECAAAECBAYBQX5ANkGAAAECBAgQIECAAAECBAgQIECAAAECBAR5HyBAgAABAgQIECBAgAABAgQIECBAgAABAoOAID8gmyBAgAABAgQIECBAgAABAgQIECBAgAABAoK8DxAgQIAAAQIECBAgQIAAAQIECBAgQIAAgUFAkB+QTRAgQIAAAQIECBAgQIAAAQIECBAgQIAAAUHeBwgQIECAAAECBAgQIECAAAECBAgQIECAwCAgyA/IJggQIECAAAECBAgQIECAAAECBAgQIECAgCDvAwQIECBAgAABAgQIECBAgAABAgQIECBAYBAQ5AdkEwQIECBAgAABAgQIECBAgAABAgQIECBAQJD3AQIECBAgQIAAAQIECBAgQIAAAQIECBAgMAgI8gOyCQIECBAgQIAAAQIECBAgQIAAAQIECBAgIMj7AAECBAgQIECAAAECBAgQIECAAAECBAgQGAQE+QHZBAECBAgQIECAAAECBAgQIECAAAECBAgQEOR9gAABAgQIECBAgAABAgQIECBAgAABAgQIDAKC/IBsggABAgQIECBAgAABAgQIECBAgAABAgQICPI+QIAAAQIECBAgQIAAAQIECBAgQIAAAQIEBgFBfkA2QYAAAQIECBAgQIAAAQIECBAgQIAAAQIEBHkfIECAAAECBAgQIECAAAECBAgQIECAAAECg4AgPyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwPECBAgAABAgQIECBAgAABAgQIECBAgACBQUCQH5BNECBAgAABAgQIECBAgAABAgQIECBAgAABQd4HCBAgQIAAAQIECBAgQIAAAQIECBAgQIDAICDID8gmCBAgQIAAAQIECBAgQIAAAQIECBAgQICAIO8DBAgQIECAAAECBAgQIECAAAECBAgQIEBgEBDkB2QTBAgQIECAAAECBAgQIECAAAECBAgQIEBAkPcBAgQIECBAgAABAgQIECBAgAABAgQIECAwCAjyA7IJAgQIECBAgAABAgQIECBAgAABAgQIECAgyPsAAQIECBAgQIAAAQIECBAgQIAAAQIECBAYBAT5AdkEAQIECBAgQIAAAQIECBAgQIAAAQIECBAQ5H2AAAECBAgQIECAAAECBAgQIECAAAECBAgMAoL8gGyCAAECBAgQIECAAAECBAgQIECAAAECBAgI8j5AgAABAgQIECBAgAABAgQIECBAgAABAgQGAUF+QDZBgAABAgQIECBAgAABAgQIECBAgAABAgQEeR8gQIAAAQIECBAgQIAAAQIECBAgQIAAAQKDgCA/IJsgQIAAAQIECBAgQIAAAQIECBAgQIAAAQKCvA8QIECAAAECBAgQIECAAAECBAgQIECAAIFBQJAfkE0QIECAAAECBAgQIECAAAECBAgQIECAAAFB3gcIECBAgAABAgQIECBAgAABAgQIECBAgMAgIMgPyCYIECBAgAABAgQIECBAgAABAgQIECBAgIAg7wMECBAgQIAAAQIECBAgQIAAAQIECBAgQGAQEOQHZBMECBAgQIAAAQIECBAgQIAAAQIECBAgQECQ9wECBAgQIECAAAECBAgQIECAAAECBAgQIDAICPIDsgkCBAgQIECAAAECBAgQIECAAAECBAgQICDI+wABAgQIECBAgAABAgQIECBAgAABAgQIEBgEBPkB2QQBAgQIECBAgAABAgQIECBAgAABAgQIEBDkfYAAAQIECBAgQIAAAQIECBAgQIAAAQIECAwCgvyAbIIAAQIECBAgQIAAAQIECBAgQIAAAQIECAjyPkCAAAECBAgQIECAAAECBAgQIECAAAECBAYBQX5ANkGAAAECBAgQIECAAAECBAgQIECAAAECBAR5HyBAgAABAgQIECBAgAABAgQIECBAgAABAoOAID8gmyBAgAABAgQIECBAgAABAgQIECBAgAABAoK8DxAgQIAAAQIECBAgQIAAAQIECBAgQIAAgUFAkB+QTRAgQIAAAQIECBAgQIAAAQIECBAgQIAAAUHeBwgQIECAAAECBAgQIECAAAECBAgQIECAwCAgyA/IJggQIECAAAECBAgQIECAAAECBAgQIECAgCDvAwQIECBAgAABAgQIECBAgAABAgQIECBAYBAQ5AdkEwQIECBAgAABAgQIECBAgAABAgQIECBAQJD3AQIECBAgQIAAAQIECBAgQIAAAQIECBAgMAgI8gOyCQIECBAgQIAAAQIECBAgQIAAAQIECBAgIMj7AAECBAgQIECAAAECBAgQIECAAAECBAgQGAQE+QHZBAECBAgQIECAAAECBAgQIECAAAECBAgQEOR9gAABAgQIECBAgAABAgQIECBAgAABAgQIDAKC/IBsggABAgQIECBAgAABAgQIECBAgAABAgQICPI+QIAAAQIECBAgQIAAAQIECBAgQIAAAQIEBgFBfkA2QYAAAQIECBAgQIAAAQIECBAgQIAAAQIEBHkfIECAAAECBAgQIECAAAECBAgQIECAAAECg4AgPyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwPECBAgAABAgQIECBAgAABAgQIECBAgACBQUCQH5BNECBAgAABAgQIECBAgAABAgQIECBAgAABQd4HCBAgQIAAAQIECBAgQIAAAQIECBAgQIDAICDID8gmCBAgQIAAAQIECBAgQIAAAQIECBAgQICAIO8DBAgQIECAAAECBAgQIECAAAECBAgQIEBgEBDkB2QTBAgQIECAAAECBAgQIECAAAECBAgQIEBAkPcBAgQIECBAgAABAgQIECBAgAABAgQIECAwCAjyA7IJAgQIECBAgAABAgQIECBAgAABAgQIECAgyPsAAQIECBAgQIAAAQIECBAgQIAAAQIECBAYBAT5AdkEAQIECBAgQIAAAQIECBAgQIAAAQIECBAQ5H2AAAECBAgQIECAAAECBAgQIECAAAECBAgMAoL8gGyCAAECBAgQIECAAAECBAgQIECAAAECBAgI8j5AgAABAgQIECBAgAABAgQIECBAgAABAgQGAUF+QDZBgAABAgQIECBAgAABAgQIECBAgAABAgQEeR8gQIAAAQIECBAgQIAAAQIECBAgQIAAAQKDgCA/IJsgQIAAAQIECBAgQIAAAQIECBAgQIAAAQKCvA8QIECAAAECBAgQIECAAAECBAgQIECAAIFBQJAfkE0QIECAAAECBAgQIECAAAECBAgQIECAAAFB3gcIECBAgAABAgQIECBAgAABAgQIECBAgMAgIMgPyCYIECBAgAABAgQIECBAgAABAgQIECBAgIAg7wMECBAgQIAAAQIECBAgQIAAAQIECBAgQGAQEOQHZBMECBBYNmpRAAAMNUlEQVQgQIAAAQIECBAgQIAAAQIECBAgQECQ9wECBAgQIECAAAECBAgQIECAAAECBAgQIDAICPIDsgkCBAgQIECAAAECBAgQIECAAAECBAgQICDI+wABAgQIECBAgAABAgQIECBAgAABAgQIEBgEBPkB2QQBAgQIECBAgAABAgQIECBAgAABAgQIEBDkfYAAAQIECBAgQIAAAQIECBAgQIAAAQIECAwCgvyAbIIAAQIECBAgQIAAAQIECBAgQIAAAQIECAjyPkCAAAECBAgQIECAAAECBAgQIECAAAECBAYBQX5ANkGAAAECBAgQIECAAAECBAgQIECAAAECBAR5HyBAgAABAgQIECBAgAABAgQIECBAgAABAoOAID8gmyBAgAABAgQIECBAgAABAgQIECBAgAABAoK8DxAgQIAAAQIECBAgQIAAAQIECBAgQIAAgUFAkB+QTRAgQIAAAQIECBAgQIAAAQIECBAgQIAAAUHeBwgQIECAAAECBAgQIECAAAECBAgQIECAwCAgyA/IJggQIECAAAECBAgQIECAAAECBAgQIECAgCDvAwQIECBAgAABAgQIECBAgAABAgQIECBAYBAQ5AdkEwQIECBAgAABAgQIECBAgAABAgQIECBAQJD3AQIECBAgQIAAAQIECBAgQIAAAQIECBAgMAgI8gOyCQIECBAgQIAAAQIECBAgQIAAAQIECBAgIMj7AAECBAgQIECAAAECBAgQIECAAAECBAgQGAQE+QHZBAECBAgQIECAAAECBAgQIECAAAECBAgQEOR9gAABAgQIECBAgAABAgQIECBAgAABAgQIDAKC/IBsggABAgQIECBAgAABAgQIECBAgAABAgQICPI+QIAAAQIECBAgQIAAAQIECBAgQIAAAQIEBgFBfkA2QYAAAQIECBAgQIAAAQIECBAgQIAAAQIEBHkfIECAAAECBAgQIECAAAECBAgQIECAAAECg4AgPyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwPECBAgAABAgQIECBAgAABAgQIECBAgACBQUCQH5BNECBAgAABAgQIECBAgAABAgQIECBAgAABQd4HCBAgQIAAAQIECBAgQIAAAQIECBAgQIDAICDID8gmCBAgQIAAAQIECBAgQIAAAQIECBAgQICAIO8DBAgQIECAAAECBAgQIECAAAECBAgQIEBgEBDkB2QTBAgQIECAAAECBAgQIECAAAECBAgQIEBAkPcBAgQIECBAgAABAgQIECBAgAABAgQIECAwCAjyA7IJAgQIECBAgAABAgQIECBAgAABAgQIECAgyPsAAQIECBAgQIAAAQIECBAgQIAAAQIECBAYBAT5AdkEAQIECBAgQIAAAQIECBAgQIAAAQIECBAQ5H2AAAECBAgQIECAAAECBAgQIECAAAECBAgMAoL8gGyCAAECBAgQIECAAAECBAgQIECAAAECBAgI8j5AgAABAgQIECBAgAABAgQIECBAgAABAgQGAUF+QDZBgAABAgQIECBAgAABAgQIECBAgAABAgQEeR8gQIAAAQIECBAgQIAAAQIECBAgQIAAAQKDgCA/IJsgQIAAAQIECBAgQIAAAQIECBAgQIAAAQKCvA8QIECAAAECBAgQIECAAAECBAgQIECAAIFBQJAfkE0QIECAAAECBAgQIECAAAECBAgQIECAAAFB3gcIECBAgAABAgQIECBAgAABAgQIECBAgMAgIMgPyCYIECBAgAABAgQIECBAgAABAgQIECBAgIAg7wMECBAgQIAAAQIECBAgQIAAAQIECBAgQGAQEOQHZBMECBAgQIAAAQIECBAgQIAAAQIECBAgQECQ9wECBAgQIECAAAECBAgQIECAAAECBAgQIDAICPIDsgkCBAgQIECAAAECBAgQIECAAAECBAgQICDI+wABAgQIECBAgAABAgQIECBAgAABAgQIEBgEBPkB2QQBAgQIECBAgAABAgQIECBAgAABAgQIEBDkfYAAAQIECBAgQIAAAQIECBAgQIAAAQIECAwCgvyAbIIAAQIECBAgQIAAAQIECBAgQIAAAQIECAjyPkCAAAECBAgQIECAAAECBAgQIECAAAECBAYBQX5ANkGAAAECBAgQIECAAAECBAgQIECAAAECBAR5HyBAgAABAgQIECBAgAABAgQIECBAgAABAoOAID8gmyBAgAABAgQIECBAgAABAgQIECBAgAABAoK8DxAgQIAAAQIECBAgQIAAAQIECBAgQIAAgUFAkB+QTRAgQIAAAQIECBAgQIAAAQIECBAgQIAAAUHeBwgQIECAAAECBAgQIECAAAECBAgQIECAwCAgyA/IJggQIECAAAECBAgQIECAAAECBAgQIECAgCDvAwQIECBAgAABAgQIECBAgAABAgQIECBAYBAQ5AdkEwQIECBAgAABAgQIECBAgAABAgQIECBAQJD3AQIECBAgQIAAAQIECBAgQIAAAQIECBAgMAgI8gOyCQIECBAgQIAAAQIECBAgQIAAAQIECBAgIMj7AAECBAgQIECAAAECBAgQIECAAAECBAgQGAQE+QHZBAECBAgQIECAAAECBAgQIECAAAECBAgQEOR9gAABAgQIECBAgAABAgQIECBAgAABAgQIDAKC/IBsggABAgQIECBAgAABAgQIECBAgAABAgQICPI+QIAAAQIECBAgQIAAAQIECBAgQIAAAQIEBgFBfkA2QYAAAQIECBAgQIAAAQIECBAgQIAAAQIEBHkfIECAAAECBAgQIECAAAECBAgQIECAAAECg4AgPyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwPECBAgAABAgQIECBAgAABAgQIECBAgACBQUCQH5BNECBAgAABAgQIECBAgAABAgQIECBAgAABQd4HCBAgQIAAAQIECBAgQIAAAQIECBAgQIDAICDID8gmCBAgQIAAAQIECBAgQIAAAQIECBAgQICAIO8DBAgQIECAAAECBAgQIECAAAECBAgQIEBgEBDkB2QTBAgQIECAAAECBAgQIECAAAECBAgQIEBAkPcBAgQIECBAgAABAgQIECBAgAABAgQIECAwCAjyA7IJAgQIECBAgAABAgQIECBAgAABAgQIECAgyPsAAQIECBAgQIAAAQIECBAgQIAAAQIECBAYBAT5AdkEAQIECBAgQIAAAQIECBAgQIAAAQIECBAQ5H2AAAECBAgQIECAAAECBAgQIECAAAECBAgMAoL8gGyCAAECBAgQIECAAAECBAgQIECAAAECBAgI8j5AgAABAgQIECBAgAABAgQIECBAgAABAgQGAUF+QDZBgAABAgQIECBAgAABAgQIECBAgAABAgQEeR8gQIAAAQIECBAgQIAAAQIECBAgQIAAAQKDgCA/IJsgQIAAAQIECBAgQIAAAQIECBAgQIAAAQKCvA8QIECAAAECBAgQIECAAAECBAgQIECAAIFBQJAfkE0QIECAAAECBAgQIECAAAECBAgQIECAAAFB3gcIECBAgAABAgQIECBAgAABAgQIECBAgMAgIMgPyCYIECBAgAABAgQIECBAgAABAgQIECBAgIAg7wMECBAgQIAAAQIECBAgQIAAAQIECBAgQGAQEOQHZBMECBAgQIAAAQIECBAgQIAAAQIECBAgQECQ9wECBAgQIECAAAECBAgQIECAAAECBAgQIDAICPIDsgkCBAgQIECAAAECBAgQIECAAAECBAgQICDI+wABAgQIECBAgAABAgQIECBAgAABAgQIEBgEBPkB2QQBAgQIECBAgAABAgQIECBAgAABAgQIEBDkfYAAAQIECBAgQIAAAQIECBAgQIAAAQIECAwCgvyAbIIAAQIECBAgQIAAAQIECBAgQIAAAQIECAjyPkCAAAECBAgQIECAAAECBAgQIECAAAECBAYBQX5ANkGAAAECBAgQIECAAAECBAgQIECAAAECBAR5HyBAgAABAgQIECBAgAABAgQIECBAgAABAoOAID8gmyBAgAABAgQIECBAgAABAgQIECBAgAABAoK8DxAgQIAAAQIECBAgQIAAAQIECBAgQIAAgUFAkB+QTRAgQIAAAQIECBAgQIAAAQIECBAgQIAAAUHeBwgQIECAAAECBAgQIECAAAECBAgQIECAwCAQQrgDzJoZi3wAAAAASUVORK5CYII="},"fps":{"value":15}},"lively.serializer-class-info":{"className":"WebGLCanvas","module":{"package":{"name":"WebGLCanvas","version":"0.1.1-56"},"pathInPackage":"index.js"}}},"3B4F261D-8A23-4B6E-87D4-5A6BBFC2BCB0":{"rev":0,"props":{"_rev":{"value":0},"doNotSerialize":{"value":["isActive","converter","updater"]},"sourceObj":{"value":{"__ref__":true,"id":"WebGLCanvas_6627C00E_B234_470B_8892_A8EDCDE4CF97","rev":2679}},"sourceAttrName":{"value":"extent"},"targetObj":{"value":{"__ref__":true,"id":"WebGLCanvas_6627C00E_B234_470B_8892_A8EDCDE4CF97","rev":2679}},"targetMethodName":{"value":"relayout"},"garbageCollect":{"value":true},"signalOnAssignment":{"value":true}},"lively.serializer-class-info":{"className":"AttributeConnection","module":{"package":{"name":"lively.bindings","version":"0.1.2"},"pathInPackage":"index.js"}}},"AA7E470A-96E0-4515-8874-31D755BD6C76":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"globe\\", _id: \\"5543f15ce9adfccb56c979db92d7b0d38398d6a8\\"})"}}},"Morph_58E1F47D_735D_48B4_83FE_964771854449":{"rev":2693,"props":{"name":{"value":"cover"},"draggable":{"value":true},"grabbable":{"value":true},"reactsToPointer":{"value":false},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(1508.8984375,971.6171875)"},"fill":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(0,0,0)"},"styleClasses":{"value":["Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"B562DD68-87DD-4E1C-A597-22B322E34D87","rev":0}}},"lively.serializer-class-info":{"className":"Morph","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"morph.js"}}},"B562DD68-87DD-4E1C-A597-22B322E34D87":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"rectangle\\", _id: \\"44c59c7e6812baaed95b7a3660abcb246296e490\\"})"}}},"723A53EA-C555-4E11-A886-060133E73D12":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"globe\\", _id: \\"f71e0d7aa02c9c874eba979fe444380bf583f9f2\\"})"}}},"50255DEB-8E10-4182-A228-A64F4174AFA7":{"rev":0,"props":{"_rev":{"value":0},"Nunito":{"value":"https://fonts.googleapis.com/css?family=Nunito:200,200i,300,300i,400,400i,600,600i,700,700i,800,800i,900,900i&display=swap"}}},"3E1B8DBD-5E6D-417C-B72D-85E7013E6A19":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"world landing page\\", _id: \\"32298ca0ee3f234f9baca22b5b5759595d486064\\"})"},"publishedAlias":{"value":"dashboard"},"excludedPackages":{"value":["kld-intersections","lively.collab"]},"publishedLocation":{"value":"/lively.freezer/dashboard/"}}},"HTMLMorph_FC98BEAD_210B_4BC1_BA95_AEF824FE2DC2":{"rev":2638,"props":{"name":{"value":"loading screen"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(0,25)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(485.34375,274.29296875)"},"styleClasses":{"value":["HTMLMorph","Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"A0078FC5-7C58-47DF-B92A-BE4DA07C55A8","rev":0}},"html":{"value":"<div style=\\"position: fixed; z-index: 1; height: 100%; width: 100%; background-color: black\\">\\n  <div id=\\"loading-bar\\">\\n     <div id=\\"progress\\" style=\\"width: 100%;\\">\\n  </div>\\n</div></div>"},"cssDeclaration":{"value":"#loading-bar {\\n  height: 20px;\\n  width: 400px;\\n  color: gray;\\n  border-style: solid;\\n  border-color: gray;\\n  border-width: 2px;\\n  border-radius: 10px;\\n  position: absolute;\\n  top: 50%;\\n  left: 50%;\\n  overflow: hidden;\\n  margin: 0px 0 0 -202px;\\n}\\n\\n#progress {\\n  background-color: gray;\\n  height: 100%;\\n  animation: load 5s;\\n}\\n\\n@keyframes load {\\n  from { width: 0% }\\n  to { width: 100% }\\n}"}},"lively.serializer-class-info":{"className":"HTMLMorph","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"html-morph.js"}}},"A0078FC5-7C58-47DF-B92A-BE4DA07C55A8":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"html-morph\\", _id: \\"3695da8ba64dd32d8645b4c1937b5d361e002bbc\\"})"}}}},"requiredVersion":">=0.1","packagesToRegister":[],"packageDepMap":{"local://lively-object-modules/PartialFreezing":["local://lively-object-modules/WorldVersionViewer"],"local://lively-object-modules/WorldVersionViewer":[],"local://lively-object-modules/Globe":[],"local://lively-object-modules/WebGLCanvas":[]}}');
lively.resources={resource:A,loadViaScript:Ka};lively.morphic={loadMorphFromSnapshot:vw};Ha({aj:void 0,bV:void 0})}}});