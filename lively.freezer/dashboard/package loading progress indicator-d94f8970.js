System.register(["./__root_module__-cddb8267.js","kld-intersections"],function(){var Ea,Cb,Kb,lc,$b,Qd,Zc,Rd,ad;return{setters:[function(Nc){Ea=Nc.an;Cb=Nc.bO;Kb=Nc.aa;lc=Nc.a3;$b=Nc.at;Qd=Nc.P;Zc=Nc.$;Rd=Nc.ax;ad=Nc.aw},function(){}],execute:function(){var Nc=lively.FreezerRuntime.recorderFor("ModuleProgress/index.js");Nc.Morph=Ea;Nc.stringToEasing=Cb;Nc.easings=Kb;Nc.pt=lc;Nc.num=$b;Nc.Path=Qd;Nc.promise=Zc;Nc.fun=Rd;var nd=function(he){var af=lively.FreezerRuntime.recorderFor("ModuleProgress/index.js"),
Af=af.hasOwnProperty("ModuleProgress")&&"function"===typeof af.ModuleProgress?af.ModuleProgress:af.ModuleProgress=function(rd){rd&&rd[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ad(Af,he,[{key:"relayout",value:function(){!this.isComponent&&Nc.Path("owner.isWorld").get(this)&&(this.bottomCenter=$world.visibleBounds().center().subXY(0,100))}},{key:"reset",value:function(){var rd=this.getAllNamed(/stage/);this.stages=new Map(rd.map(function(cc){return[cc,
"not loaded"]}));this.updateProgressVisualization();this.getAllNamed(/label/).map(function(cc){cc._cachedTextBounds=null;cc.fit()})}},{key:"updateProgressBar",value:function(){if(this._lastWidth){this.relayout();var rd=this.get("progress path"),cc=Nc.stringToEasing(Nc.easings.inOutExpo)(Nc.num.clamp(Date.now()-this._timeStamp,0,1E3)/1E3);rd.width=Nc.num.interpolate(cc,this._lastWidth,this._currentProgress)}}},{key:"fastLoadTest",value:function(){var rd=this,cc,Ic,Kd,Kc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Bd){1==
Bd.nextAddress&&(rd.reset(),cc="lively.lang lively.ast lively.source-transform lively.classes lively.vm lively.modules lively.user lively.storage lively.morphic".split(" "),Ic=$jscomp.makeIterator(cc),Kd=Ic.next());if(3!=Bd.nextAddress){if(Kd.done)return Bd.jumpTo(0);Kc=Kd.value;rd.finishPackage({packageName:Kc,loaded:!0});return Bd.yield(Nc.promise.delay(200),3)}Kd=Ic.next();return Bd.jumpTo(2)})}},{key:"finishPackage",value:function(rd){var cc=this,Ic=rd.frozen,Kd=rd.loaded;rd="stage "+rd.packageName.replace("lively.",
"");rd=this.get(rd);Ic&&this.stages.set(rd,"frozen");Kd&&this.stages.set(rd,"loaded");Nc.fun.debounceNamed("update progress",200,function(){cc.updateProgressVisualization()})()}},{key:"updateProgressVisualization",value:function(){var rd=this,cc=this.getSubmorphNamed("progress path"),Ic=this.getAllNamed(/stage/),Kd=Ic[0];Ic.forEach(function(Kc){var Bd=Kc.get("checkmark"),be=Kc.get("frozen indicator"),yc=Kc.get("icon");Kc=rd.stages.get(Kc);if("not loaded"!=Kc){Kd=Bd;if("loaded"==Kc){if(Bd.visible)return;
Bd.animate({duration:300,visible:!0})}if("frozen"==Kc){if(be.visible)return;be.animate({duration:300,visible:!0})}yc.opacity=1}else Bd.visible=!1,be.visible=!1,yc.opacity=.2});Ic=this.localizePointFrom(Nc.pt(-20,0),Kd).x;Ic=Math.max(20,Ic-cc.left);cc.visible=20==Ic?!1:!0;this._lastWidth=cc.width;this._timeStamp=Date.now();this._currentProgress=Ic}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ModuleProgress"}},{key:"properties",get:function(){return{stages:{serialize:!1,after:["submorphs"],
initialize:function(){var rd=this;this.whenRendered().then(function(){rd.reset()})}}}}}],af,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"ModuleProgress",version:"0.1.1-108"}}},{start:192,end:3478})}(Nc.Morph);nd=Nc.ModuleProgress;Nc.default=nd}}});