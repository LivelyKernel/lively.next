System.register("./__root_module__-6d2e743c.js kld-intersections ./index-ecae4ac2.js ./index-9d4f3df2.js ./editor-plugin-6888753a.js ./editor-plugin-0fb6aad7.js ./index-64e9ba4b.js ./index-22a2433b.js ./index-9e043a78.js".split(" "),function(){var Ma,rb,Db,hc,Kb,id,Zc,yd,Kc,sc,bd,hd,se,xe,ne,Rc,Pd,Hb,Gc,ud,Vc,Id,ie,Fb,Ac,$c,Bc,vd,pb,lb,Zb,Mb;return{setters:[function(ub){Ma=ub.i;rb=ub.M;Db=ub.t;hc=ub.e;Kb=ub.p;id=ub.f;Zc=ub.d;yd=ub.o;Kc=ub.C;sc=ub.a2;bd=ub.b;hd=ub.m;se=ub.bI;xe=ub.N;ne=ub.bF;
Rc=ub.bD;Pd=ub.I;Hb=ub.ah;Gc=ub.R;ud=ub.bJ;Vc=ub.a1;Id=ub.az;ie=ub.n;Fb=ub.a3;Ac=ub.a;$c=ub.a0;Bc=ub.g;vd=ub.bK},function(){},function(ub){pb=ub.e;lb=ub.s;Zb=ub.I},function(){},function(ub){Mb=ub.I},function(){},function(){},function(){},function(){}],execute:function(){function ub(ha){var Fa=ha.sourceObj,Ja=ha.targetObj;Fa.isMorph&&Ja.isMorph?(Fa.show(),Ja.show(),Ga.showConnector&&Ga.showConnector(Fa,Ja)):Ga.show(String(ha))}function rc(ha){var Fa=ha.sourceObj,Ja=ha.sourceAttrName,Ca=ha.targetObj,
ra=ha.targetMethodName,tb=ha.getConverter();ha=ha.getUpdater();return Ga.printConnectionElements(Fa,Ja,Ca,ra,tb,ha)}function Ua(ha,Fa,Ja,Ca,ra,tb){ha="/* global connect, source, target */\nconnect(source, '"+Fa+"', target, '"+Ca+"'";if(ra||tb)ha+=", {\n";ra&&(ha+="  converter: "+ra);ra&&tb&&(ha+=",");ra&&(ha+="\n");tb&&(ha+="  updater: "+tb+"\n");if(ra||tb)ha+="}";return ha+");"}function Lb(ha,Fa){var Ja;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ca){if(1==Ca.nextAddress)return Ca.yield(Ga.InteractiveMorphSelector.selectMorph(),
2);Ja=Ca.yieldResult;return Ca.return(Ja?Ga.interactiveConnectGivenSourceAndTarget(ha,Fa,Ja):null)})}function mb(ha,Fa,Ja,Ca){var ra,tb,Na,lc,kd;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Tb){switch(Tb.nextAddress){case 1:ra=Ja&&Ja.world().targetDataBindings(Ja);tb=ha.world();if(!ra||!ra.length)return tb.setStatusMessage("connect canceled"),Tb.return();if(Fa){Tb.jumpTo(2);break}Na=[{isListItem:!0,string:"[Enter custom attribute..]",value:{custom:!0}}].concat($jscomp.arrayFromIterable(Ga.arr.flatten(ha.world().targetDataBindings(ha)).map(function(md){return{isListItem:!0,
string:md.signature||md.name,value:md}})));return Tb.yield(tb.listPrompt(["Select Source Attribute\n",{},"Choose the attribute of the morph that is supposed to invoke the connection. This can be a method, property or a custom signal that is invoked upon the morph.",{paddingTop:"10px",fontSize:14,textAlign:"left",fontWeight:"normal"}],Na,{filterable:!0}),3);case 3:Fa=Tb.yieldResult;if("canceled"==Fa.status)return Tb.return();Fa=Fa.selected[0];Fa=Fa.custom?"sourceAttribute":Fa.name;case 2:return lc=
[{isListItem:!0,string:"[Enter custom attribute...]",value:{custom:!0}}].concat($jscomp.arrayFromIterable(Ga.arr.flatten(ra).map(function(md){return{isListItem:!0,value:md,string:md.signature||md.name}}))),Tb.yield(tb.listPrompt(["Select Target Attribute\n",{},"Choose the attribute of the morph that is supposed to invoked once the connection is triggered. This can be either a method or a property of the morph. When selecting a property, keep in mind that the value of the source attribute will be assigned to the property or passed to the method as an argument.",
{fontSize:14,textAlign:"left",fontWeight:"normal",paddingTop:"10px"}],lc,{filterable:!0}),4);case 4:kd=Tb.yieldResult;if("canceled"==kd.status)return Tb.return();kd=kd.selected[0];return Tb.yield(Ga.interactivelyEvaluateConnection({sourceObj:ha,sourceAttr:Fa,targetObj:Ja,targetAttr:kd.custom?"targetAttribute":kd.name,onConnect:Ca,prompt:"Edit and confirm connection:"}),0)}})}function Gb(ha,Fa,Ja,Ca){Fa=void 0===Fa?"confirm connection":Fa;var ra,tb,Na,lc,kd,Tb,md;return $jscomp.asyncExecutePromiseGeneratorProgram(function(wb){ra=
ha;tb=ra.sourceObj;Na=ra.sourceAttrName;lc=ra.targetObj;kd=ra.targetMethodName;Tb=ha.getConverter();md=ha.getUpdater();return wb.return(Ga.interactivelyEvaluateConnection({sourceObj:tb,sourceAttr:Na,targetObj:lc,targetAttr:kd,converter:Tb,updater:md,prompt:Fa,highlight:Ja,onConnect:Ca}))})}function vc(ha,Fa,Ja,Ca,ra){Ca=void 0===Ca?{}:Ca;ra=Ga.rect(0).sides.concat(Ga.rect(0).corners);Ja=Ja||new Ga.Leash(Object.assign({isSmooth:!0,styleClasses:["Halo"],borderColor:Ga.Color.orange,epiMorph:!0,endpointStyle:{start:{fill:Ga.Color.transparent,
nativeCursor:"auto"},end:{fill:Ga.Color.orange}}},Ca,{hasFixedPosition:!0}));Ja.startPoint.attachTo(ha,"rightCenter");Fa.isMorph?(Ca=Fa.globalBounds().partNameNearest(ra,ha.globalPosition),ha.globalPosition.equals(Fa.globalBounds().partNamed(Ca))&&Fa.globalBounds().partNameNearest(Ga.arr.without(ra,Ca),ha.globalPosition),Ja.endPoint.attachTo(Fa,"leftCenter")):(ra=ha.globalBounds().topRight().addPt(Ga.pt(100,0)),Fa=Ga.morph({type:"label",value:Fa.toString(),styleClasses:["Tooltip"],padding:Ga.rect(8,
4)}).openInWorld(ra),Fa.position=ha.world().bounds().translateForInclusion(Fa.bounds()).topLeft(),Ga.once(Ja,"remove",Fa,"remove"),Ja.endPoint.attachTo(Fa,"leftCenter"));return Ja}function Lc(ha){var Fa,Ja,Ca,ra,tb,Na,lc,kd,Tb,md,wb,je,bf,Wc,xb,ze,yb,nb,Ha,R;return $jscomp.asyncExecutePromiseGeneratorProgram(function(xa){switch(xa.nextAddress){case 1:Fa=ha;Ja=Fa.sourceObj;Ca=Fa.sourceAttr;ra=Fa.targetObj;tb=Fa.targetAttr;Na=Fa.converter;lc=Fa.updater;kd=Fa.prompt;Tb=void 0===Fa.highlight?!0:Fa.highlight;
md=Fa.onConnect;wb="lively://lively.bindings-interactive-connect/x"+Ja.id;je={context:window,format:"esm",targetModule:wb,classTransform:Ga.classToFunctionTransform};bf=Ga.printConnectionElements(Ja,Ca,ra,tb,Na,lc);ra.isMorph&&Ja.isMorph&&(Wc=ra.propertiesAndPropertySettings().properties[tb]||{type:typeof ra[tb]},xb=Wc.type,ze=Ja.propertiesAndPropertySettings().properties[Ca]||{type:typeof Ja[Ca]},yb=ze.type,yb!==xb&&(kd=["Edit and confirm connection:\n",{},"Source: ",{fontSize:14,fontWeight:"normal"},
Ja.toString(),{fontSize:14,fontWeight:"normal",fontStyle:"italic"},"\nTarget: ",{fontSize:14,fontWeight:"normal"},ra.toString(),{fontSize:14,fontWeight:"normal",fontStyle:"italic"}]));nb={};Object.assign(lively.modules.module(wb).recorder,(nb.source=Ja,nb.target=ra,nb.connect=Ga.connect,nb.once=Ga.once,nb[Ca]=Ja[Ca],nb));if(!kd){Ha=bf;xa.jumpTo(2);break}return xa.yield($world.editPrompt(kd,{input:bf,historyId:"lively.bindings-interactive-morph-connect",mode:"js",requester:$world,evalEnvironment:je,
animated:!1}),3);case 3:if(Ha=xa.yieldResult,!Ha)return $world.setStatusMessage("connect canceled"),xa.return();case 2:return xa.yield(lively.vm.runEval(Ha,je),4);case 4:R=xa.yieldResult;if(R.isError)return $world.logError(R.value),xa.return(Lc({sourceObj:Ja,sourceAttr:Ca,targetObj:ra,targetAttr:tb,converter:Na,updater:lc,prompt:"confirm connection",highlight:Tb,onConnect:md}));Tb&&($world.setStatusMessage("connected!",Ga.Color.green),Ga.interactivelyShowConnection(R.value));"function"===typeof md&&
md(R);xa.jumpToEnd()}})}var cc=lively.FreezerRuntime.recorderFor("ProtoInspector/index.js");cc.Inspector=Mb;var Vb=function(ha){var Fa=lively.FreezerRuntime.recorderFor("ProtoInspector/index.js"),Ja=Fa.hasOwnProperty("ProtoInspector")&&"function"===typeof Fa.ProtoInspector?Fa.ProtoInspector:Fa.ProtoInspector=function(Ca){Ca&&Ca[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Ma(Ja,ha,void 0,[{key:Symbol.for("__LivelyClassName__"),
get:function(){return"ProtoInspector"}},{key:"properties",get:function(){return{master:{initialize:function(){}}}}}],Fa,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"ProtoInspector",version:"0.1.1-0"}}},{start:68,end:210})}(cc.Inspector);Vb=cc.ProtoInspector;cc.default=Vb;var Ub=lively.FreezerRuntime.recorderFor("MorphicSideBar/index.js");
Ub.Morph=rb;Ub.touchInputDevice=Db;Ub.easings=hc;Ub.pt=Kb;Ub.fun=id;Ub.connect=Zc;cc=function(ha){var Fa=lively.FreezerRuntime.recorderFor("MorphicSideBar/index.js"),Ja=Fa.hasOwnProperty("MorphicSideBar")&&"function"===typeof Fa.MorphicSideBar?Fa.MorphicSideBar:Fa.MorphicSideBar=function(Ca){Ca&&Ca[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Ma(Ja,ha,[{key:"relayout",value:function(){this.onWorldResize()}},{key:"onWorldResize",
value:function(Ca){Ca=void 0===Ca?!0:Ca;if(this.respondsToVisibleWindow){var ra=$world.visibleBounds(),tb=navigator.standalone&&Ub.touchInputDevice?25:0;this.height=ra.height-tb;this.top=tb+ra.top();tb=this.get("horizontal resizer");tb.height=this.height;tb.top=0;Ca&&(this.visible?this.topLeft=ra.topLeft():this.topRight=ra.topLeft())}}},{key:"switchMode",value:function(Ca){"inspector"==Ca&&this.showInspector();"connections"==Ca&&this.showConnections()}},{key:"showInspector",value:function(){this.get("inspector").visible=
!0;this.get("connections tree").visible=!1}},{key:"showConnections",value:function(){this.get("inspector").visible=!1;this.get("connections tree").visible=!0}},{key:"toggle",value:function(Ca){var ra=this,tb,Na;return $jscomp.asyncExecutePromiseGeneratorProgram(function(lc){switch(lc.nextAddress){case 1:tb=$world.visibleBounds();Na=navigator.standalone&&Ub.touchInputDevice?25:0;ra.height=tb.height-Na;ra.top=Na+tb.top();if(Ca)return $world.addMorph(ra,$world.get("lively top bar")),ra.topRight=tb.topLeft(),
ra.attachToWorld($world),ra.visible=!0,lc.yield(ra.whenRendered(),5);ra.detachFromWorld($world);return lc.yield(ra.animate({opacity:0,topRight:tb.topLeft(),duration:300}),4);case 4:ra.visible=!1;ra.remove();lc.jumpTo(0);break;case 5:return ra.onWorldResize(!1),ra.get("scene graph").adjustProportions(),lc.yield(ra.animate({opacity:1,easing:Ub.easings.outCirc,topLeft:tb.topLeft(),duration:300}),6);case 6:ra.get("scene graph").refresh(),lc.jumpToEnd()}})}},{key:"attachToWorld",value:function(Ca){Ub.connect(Ca,
"onChange",this,"onHierarchyChange",{garbageCollect:!0});Ub.connect(Ca,"onSubmorphChange",this,"onHierarchyChange",{garbageCollect:!0});Ub.connect(Ca,"showHaloFor",this,"selectNode",{garbageCollect:!0})}},{key:"detachFromWorld",value:function(Ca){var ra=this;Ca.attributeConnections.forEach(function(tb){tb.targetObj===ra&&tb.disconnect()})}},{key:"selectNode",value:function(Ca){this.getSubmorphNamed("scene graph").selectMorphInTarget(Ca);this.getSubmorphNamed("connections tree").inspectConnectionsOf(Ca)}},
{key:"onHierarchyChange",value:function(Ca){var ra=this,tb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Na){if("addMorphAt"===Ca.selector||"removeMorph"===Ca.selector||"name"===Ca.prop){tb=ra._sceneGraph||(ra._sceneGraph=ra.getSubmorphNamed("scene graph"));if(!tb||!tb.owner.visible||Ca.target&&Ca.target.isHand||Ca.target&&tb.ignoreMorph(Ca.target)||Ca.args&&!Ca.args[0].isHalo&&tb.ignoreMorph(Ca.args[0])||Ca.target.ownerChain().find(function(lc){return tb.ignoreMorph(lc)}))return Na.return();
Ub.fun.debounceNamed("scene-graph-update",50,function(){return tb.refresh()})()}Na.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"MorphicSideBar"}},{key:"properties",get:function(){return{isHaloItem:{get:function(){return!1}}}}}],Fa,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"MorphicSideBar",version:"0.1.1-76"}}},
{start:226,end:3668})}(Ub.Morph);cc=Ub.MorphicSideBar;Ub.default=cc;var Ga=lively.FreezerRuntime.recorderFor("lively.ide/fabrik.js");Ga.interactivelyShowConnection=ub;Ga.printConnection=rc;Ga.printConnectionElements=Ua;Ga.interactiveConnectGivenSource=Lb;Ga.interactiveConnectGivenSourceAndTarget=mb;Ga.interactivelyReEvaluateConnection=Gb;Ga.visualizeConnection=vc;Ga.interactivelyEvaluateConnection=Lc;Ga.connect=Zc;Ga.once=yd;Ga.Color=Kc;Ga.rect=sc;Ga.pt=Kb;Ga.arr=bd;Ga.morph=hd;Ga.Leash=se;Ga.showConnector=
pb;Ga.show=lb;Ga.InteractiveMorphSelector=Zb;Ga.classToFunctionTransform=xe;Ga.interactivelyShowConnection=ub;Ga.interactivelyShowConnection=ub;Ga.printConnection=rc;Ga.printConnection=rc;Ga.printConnectionElements=Ua;Ga.printConnectionElements=Ua;Ga.interactiveConnectGivenSource=Lb;Ga.interactiveConnectGivenSource=Lb;Ga.interactiveConnectGivenSourceAndTarget=mb;Ga.interactiveConnectGivenSourceAndTarget=mb;Ga.interactivelyReEvaluateConnection=Gb;Ga.interactivelyReEvaluateConnection=Gb;Ga.visualizeConnection=
vc;Ga.visualizeConnection=vc;Ga.interactivelyEvaluateConnection=Lc;Ga.interactivelyEvaluateConnection=Lc;var jb=lively.FreezerRuntime.recorderFor("InteractiveTree/index.js");jb.Tree=ne;jb.TreeData=Rc;jb.morph=hd;jb.Icon=Pd;jb.HorizontalLayout=Hb;jb.easings=hc;jb.Morph=rb;jb.Color=Kc;jb.Rectangle=Gc;jb.rect=sc;jb.pt=Kb;jb.connect=Zc;jb.noUpdate=ud;jb.disconnect=Vc;jb.disconnectAll=Id;jb.once=yd;jb.arr=bd;jb.num=ie;jb.fun=id;jb.tree=Fb;jb.promise=Ac;jb.ConnectionHalo=_missingExportShim;jb.getClassName=
$c;cc=function(ha){var Fa=lively.FreezerRuntime.recorderFor("InteractiveTree/index.js"),Ja=Fa.hasOwnProperty("InteractiveTreeContainer")&&"function"===typeof Fa.InteractiveTreeContainer?Fa.InteractiveTreeContainer:Fa.InteractiveTreeContainer=function(Ca){Ca&&Ca[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Ma(Ja,ha,[{key:"onChildRemoved",value:function(Ca){}},{key:"onChildAdded",value:function(Ca){}},{key:"toggleSelected",value:function(Ca){if(this.tree){var ra=
this.tree,tb=ra.selectionFontColor,Na=ra.nonSelectionFontColor;this.submorphs.filter(function(lc){return!lc._isControlElement&&lc.styleClasses.includes("Label")}).forEach(function(lc){lc.fontColor=Ca?tb:Na})}}},{key:"onGrab",value:function(Ca){var ra=this.tree,tb=this.node;this.fill=jb.Color.gray.withA(.5);this.fontColor=ra.selectionFontColor;this.opacity=.8;Ma._get(Object.getPrototypeOf(Ja.prototype),"onGrab",this).call(this,Ca);tb&&(this.toggleSelected(!1),ra.collapse(tb),ra.treeData.parentNode(tb).container.onChildRemoved(this),
this._data=ra.treeData.remove(tb),tb.container.target.remove(),ra.update(!0))}},{key:"wantsToBeDroppedOn",value:function(Ca){this.showPreviewOn(Ca);return!0}},{key:"showPreviewOn",value:function(Ca){if(Ca.isContainer)var ra=Ca.tree;Ca.isTree&&(ra=Ca);ra&&ra.showDropPreviewFor&&ra.showDropPreviewFor(this)}},{key:"insertAsChild",value:function(Ca){var ra=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(tb){if(1==tb.nextAddress)return ra.tree.treeData.add(Ca._data,ra.node,ra.node.children[0]),
ra.tree.uncollapse(ra.node),ra.tree.treeData.remove(ra.tree._previewNode),tb.yield(ra.tree.whenRendered(),2);ra.tree.update(!0);ra.onChildAdded(Ca);tb.jumpToEnd()})}},{key:"onBeingDroppedOn",value:function(Ca,ra){var tb=this;debugger;this.tree._dropInProgress=!0;Ma._get(Object.getPrototypeOf(Ja.prototype),"onBeingDroppedOn",this).call(this,Ca,ra);Ca=function(){tb.fill=jb.Color.gray.withA(.5);tb.opacity=1;tb.tree._dropInProgress=!1;tb.tree.refresh()};ra.isTree?ra.insertAtPlaceholder(this).then(Ca):
ra.isContainer?ra.insertAsChild(this).then(Ca):Ca()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"InteractiveTreeContainer"}},{key:"properties",get:function(){return{fill:{defaultValue:jb.Color.transparent},isContainer:{get:function(){return!0}},tree:{},node:{readOnly:!0,get:function(){var Ca=this,ra=this.tree.treeData;return ra&&ra.asList().find(function(tb){return tb.container===Ca})}}}}}],Fa,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"InteractiveTree",version:"0.1.1-1105"}}},{start:498,end:2975})}(jb.Morph);jb.InteractiveTreeContainer=cc;jb.InteractiveTreeContainer=cc;jb.InteractiveTreeContainer=cc;cc=function(ha){var Fa=lively.FreezerRuntime.recorderFor("InteractiveTree/index.js"),Ja=Fa.hasOwnProperty("InteractiveTreeData")&&"function"===typeof Fa.InteractiveTreeData?Fa.InteractiveTreeData:Fa.InteractiveTreeData=function(Ca){Ca&&
Ca[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Ma(Ja,ha,[{key:"display",value:function(Ca){return[Ca.container||"<NO CONTAINER>",{}]}},{key:"isCollapsed",value:function(Ca){return Ca.isCollapsed}},{key:"collapse",value:function(Ca,ra){Ca.isCollapsed=ra}},{key:"getChildren",value:function(Ca){var ra=this;return Ca.isLeaf?null:Ca.children.filter(function(tb){return tb&&(ra.filterActive?tb.visible:!0)})}},{key:"isLeaf",value:function(Ca){var ra=
this;return!Ca.children||0==Ca.children.filter(function(tb){return tb&&(ra.filterActive?tb.visible:!0)}).length}},{key:"add",value:function(Ca,ra,tb){ra=void 0===ra?this.root:ra;ra.children||(ra.children=[]);tb?jb.arr.pushAt(ra.children,Ca,ra.children.indexOf(tb)):ra.children.push(Ca);ra.isLeaf=!1}},{key:"replace",value:function(Ca,ra){var tb=this.parentNode(Ca);Ca=tb.children.indexOf(Ca);tb.children[Ca]=ra}},{key:"next",value:function(Ca){var ra=this.parentNode(Ca);return ra&&ra.children[ra.children.indexOf(Ca)+
1]}},{key:"isBefore",value:function(Ca,ra){this.next(Ca)===ra}},{key:"isAfter",value:function(Ca,ra){this.next(ra)===Ca}},{key:"addBefore",value:function(Ca,ra){this.add(Ca,this.parentNode(ra),ra)}},{key:"addAfter",value:function(Ca,ra){var tb=this.parentNode(ra);ra=tb.children.indexOf(ra)+1;this.add(Ca,tb,tb.children[ra])}},{key:"remove",value:function(Ca){var ra=this.parentNode(Ca);if(ra)return jb.arr.remove(ra.children,Ca),ra.children==[]&&(ra.children=null),Ca}},{key:"filter",value:function(Ca,
ra){ra=void 0===ra?1:ra;var tb=this,Na;return $jscomp.asyncExecutePromiseGeneratorProgram(function(lc){if(1==lc.nextAddress)return lc.yield(tb.uncollapseAll(function(kd,Tb){return Tb<ra+1}),2);Na=tb.filterActive;tb.filterActive=!1;tb.asListWithIndexAndDepth(!1).reverse().forEach(function(kd){var Tb=kd.node;if(0==kd.depth)return Tb.visible=!0;Tb.visible=Ca(Tb);Tb.visible||Tb.isCollapsed||!Tb.children.find(function(md){return md.visible})?Tb.container.opacity=1:(Tb.visible=!0,Tb.container.opacity=.5);
return Tb.visible});tb.filterActive=Na;lc.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"InteractiveTreeData"}}],Fa,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"InteractiveTree",version:"0.1.1-1105"}}},{start:2984,end:5447})}(jb.TreeData);jb.InteractiveTreeData=cc;jb.InteractiveTreeData=cc;jb.InteractiveTreeData=
cc;cc=function(ha){var Fa=lively.FreezerRuntime.recorderFor("InteractiveTree/index.js"),Ja=Fa.hasOwnProperty("InteractiveTree")&&"function"===typeof Fa.InteractiveTree?Fa.InteractiveTree:Fa.InteractiveTree=function(Ca){Ca&&Ca[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Ma(Ja,ha,[{key:"update",value:function(Ca){var ra=this;Ma._get(Object.getPrototypeOf(Ja.prototype),"update",this).call(this,Ca);this.treeData&&this.relayoutContainers();
Ca&&this.embeddedMorphs.forEach(function(tb){tb.isContainer&&(tb.fill=jb.Color.transparent,tb.fontFamily=ra.fontFamily,tb.fontSize=ra.fontSize)})}},{key:"onDrop",value:function(Ca){Ma._get(Object.getPrototypeOf(Ja.prototype),"onDrop",this).call(this,Ca);this.treeData.remove(this._previewNode);this.update(!0)}},{key:"onDropHoverIn",value:function(Ca){}},{key:"onDropHoverUpdate",value:function(Ca){}},{key:"onDropHoverOut",value:function(Ca){}},{key:"onHoverOut",value:function(Ca){var ra=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(tb){Ma._get(Object.getPrototypeOf(Ja.prototype),
"onHoverOut",ra).call(ra,Ca);ra._previewNode&&ra._previewNode.container.world()&&ra.treeData.remove(ra._previewNode);ra.resetContainerSelection();ra.update(!0);tb.jumpToEnd()})}},{key:"insertAtPlaceholder",value:function(Ca){var ra=this,tb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Na){if(1==Na.nextAddress)return tb=ra.treeData.parentNode(ra._previewNode),ra.treeData.replace(ra._previewNode,Ca._data),ra.treeData.remove(ra._previewNode),Na.yield(ra.whenRendered(),2);ra.update(!0);
tb.container.onChildAdded(Ca);Na.jumpToEnd()})}},{key:"scrollUpSlowly",value:function(){var Ca=this;if(!this._scrollingUp){this._scrollingUp=!0;var ra=function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(tb){if(1==tb.nextAddress)return Ca._scrollingUp&&0<Ca.scroll.y?tb.yield(Ca.animate({scroll:Ca.scroll.subXY(0,30),duration:300,easing:jb.easings.linear}),3):(Ca._scrollingUp=!1,tb.jumpTo(0));ra();tb.jumpToEnd()})};ra()}}},{key:"scrollDownSlowly",value:function(){var Ca=this;if(!this._scrollingDown){this._scrollingDown=
!0;var ra=function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(tb){if(1==tb.nextAddress)return Ca._scrollingDown&&Ca.scroll.y<Ca.scrollExtent.y-Ca.height?tb.yield(Ca.animate({scroll:Ca.scroll.addXY(0,30),duration:300,easing:jb.easings.linear}),3):(Ca._scrollingDown=!1,tb.jumpTo(0));ra();tb.jumpToEnd()})};ra()}}},{key:"stopScrollingSlowly",value:function(){this._scrollingUp=this._scrollingDown=!1}},{key:"resetContainerSelection",value:function(){this.embeddedMorphs.forEach(function(Ca){Ca.isContainer&&
(Ca.fill=jb.Color.transparent)})}},{key:"showDropPreviewFor",value:function(Ca){var ra=this;Ca=this.localize(Ca.globalBounds().center());var tb=this.textPositionFromPoint(Ca),Na=this.treeData.asListWithIndexAndDepth(function(je){je=je.node;return je!=ra._previewNode&&je.container.world()}),lc=(Na.find(function(je){return je.i-1===tb.row})||{}).node,kd=lc&&lc.container,Tb=this.ensurePlaceholder(),md=!!Tb.container.world(),wb=Ca.subPt(this.scroll).subPt(this.scrollbarOffset);10>wb.y?this.scrollUpSlowly():
wb.y>this.height-50?this.scrollDownSlowly():this.stopScrollingSlowly();this.resetContainerSelection();if(!kd){if(Na.length>tb.row||jb.arr.last(this.treeData.root.children)===Tb)return;this.treeData.remove(Tb);this.treeData.add(Tb);this.update(!0)}if(kd){Na=this.textLayout.boundsFor(this,tb);if(4>Math.abs(Na.top()-Ca.y)){if(this.treeData.isBefore(Tb,lc))return;this.treeData.remove(Tb);this.treeData.addBefore(Tb,lc)}else if(4>Math.abs(Na.bottom()-Ca.y)&&(lc.isCollapsed||this.treeData.isLeaf(lc))){if(this.treeData.isAfter(Tb,
lc))return;this.treeData.remove(Tb);this.treeData.addAfter(Tb,lc)}else{kd.fill=jb.Color.gray;if(!md)return;this.treeData.remove(Tb)}this.update(!0)}}},{key:"ensurePlaceholder",value:function(){var Ca=jb.pt(this.width-100,this.document.getLine(0).height);this._previewNode||(this._previewNode={container:jb.morph({acceptsDrops:!1,reactsToPointer:!1,fill:jb.Color.gray,borderRadius:5}),isCollapsed:!0,isLeaf:!0});this._previewNode.container.extent=Ca;return this._previewNode}},{key:"relayoutContainers",
value:function(){var Ca=this;this.charBoundsFromTextPosition({row:0,column:6});this.textLayout.charBoundsOfRow(this,0).map(function(ra){return ra.height});this.treeData.asListWithIndexAndDepth().forEach(function(ra){var tb=ra.node;ra=ra.i;tb.container.nativeCursor="grab";tb.container.width=Ca.width-25-tb.container.left;tb.container.toggleSelected&&tb.container.toggleSelected(ra==Ca.selectedIndex)});this.anchors.forEach(function(ra){return ra.position=ra.position})}}],[{key:Symbol.for("__LivelyClassName__"),
get:function(){return"InteractiveTree"}}],Fa,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"InteractiveTree",version:"0.1.1-1105"}}},{start:5456,end:10830})}(jb.Tree);jb.InteractiveTree=cc;jb.InteractiveTree=cc;jb.InteractiveTree=cc;cc=function(ha){var Fa=lively.FreezerRuntime.recorderFor("InteractiveTree/index.js"),Ja=Fa.hasOwnProperty("SceneGraphTree")&&
"function"===typeof Fa.SceneGraphTree?Fa.SceneGraphTree:Fa.SceneGraphTree=function(Ca){Ca&&Ca[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Ma(Ja,ha,[{key:"beforePublish",value:function(){this.submorphs=[];this.reset()}},{key:"selectMorphInTarget",value:function(Ca){var ra=this.treeData.asList().find(function(tb){return tb.container.target===Ca});ra&&this.selectedNode!=ra&&this.selectPath(this.treeData.pathOf(ra))}},{key:"onLoad",
value:function(){var Ca=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ra){if(1==ra.nextAddress)return ra.yield(Ca.whenRendered(),2);if(3!=ra.nextAddress){if(Ca.ownerChain().find(function(tb){return tb.isComponent}))return ra.return();Ca.submorphs=[];return ra.yield(Ca.whenRendered(),3)}Ca.get("inspector").makeEditorVisible(!0);Ca.get("inspector").makeEditorVisible(!1);Ca.setTarget($world);ra.jumpToEnd()})}},{key:"adjustProportions",value:function(Ca){Ca=(Ca?Ca.state.dragDelta:{y:0}).y;
var ra=this.get("inspector"),tb=this.get("scene graph resizer"),Na=this.get("mode selector"),lc=this.get("connections tree");this.height+=Ca;ra.height-=Ca;lc.height-=Ca;tb.top=this.bottom;tb.left=0;Na.top=tb.bottom;lc.top=ra.top=Na.bottom+5}},{key:"reset",value:function(){var Ca=this;this.treeData=new jb.InteractiveTreeData({children:[],container:jb.morph()});this.get("inspector").targetObject={};this.selectedNode=null;this.anchors.filter(function(ra){return null==ra.id}).forEach(function(ra){return Ca.removeAnchor(ra)})}},
{key:"setTarget",value:function(Ca){this.target=Ca;this.treeData=this.getTreeFromSubmorphHierarchy(Ca);this.uncollapse(this.treeData.root)}},{key:"isNodeOutOfSync",value:function(Ca){var ra=this;if(Ca===this._previewNode)return!1;if(Ca.container.nameNeedsUpdate)return!0;var tb=Ca.container.target.submorphs.filter(function(Na){return!ra.ignoreMorph(Na)});return tb.length!=Ca.children.length||tb.map(function(Na){return Na.name}).join("")!=Ca.children.map(function(Na){return Na.target?Na.target.name:
""}).join("")?!0:!1}},{key:"getNewChildren",value:function(Ca){var ra=this,tb=Ca.container.target.submorphs.map(function(md){return md.__scene_graph_target__?md.__scene_graph_target__():md}).filter(function(md){return!ra.ignoreMorph(md)}),Na=[],lc={},kd;for(kd in tb){lc.$jscomp$loop$prop$m$2763=tb[kd];var Tb=jb.arr.without(Ca.children,this._previewNode).find(function(md){return function(wb){return wb.container.target.id==md.$jscomp$loop$prop$m$2763.id}}(lc));Na[kd]=Tb?Tb:this.readMorphHierarchy(lc.$jscomp$loop$prop$m$2763);
lc={$jscomp$loop$prop$m$2763:lc.$jscomp$loop$prop$m$2763}}return Na}},{key:"refresh",value:function(){var Ca=this;if(!this._updating&&!this._dropInProgress){var ra=!1;jb.tree.prewalk(this.treeData.root,function(tb){Ca.isNodeOutOfSync(tb)&&(ra=!0,tb.name=tb.container.target.name,tb.container.refresh(),tb.children=Ca.getNewChildren(tb))},function(tb){return tb.children});this.update(ra)}}},{key:"ignoreMorph",value:function(Ca){return Ca.isMorph?Ca.isContainer||Ca.isWindow||Ca.getWindow()||Ca.isEpiMorph||
Ca.isHand||["lively.halos"].includes(Ca.constructor[Symbol.for("lively-module-meta")].package.name)||["MorphicSideBar","SideBarToggler","UserFlap","Menu","CommentIndicator"].includes(Ca.constructor.name):!1}},{key:"onDropHoverOut",value:function(Ca){var ra=Ca.hand.grabbedMorphs[0];Ca=Ca.hand.findDropTarget();if(!(Ca===this||Ca&&Ca.ownerChain().includes(this))&&ra&&ra.isContainer)ra.onDragOutside()}},{key:"onDropHoverIn",value:function(Ca){var ra=Ca.hand.grabbedMorphs[0];ra&&!ra.isContainer&&($world.halos().forEach(function(tb){return tb.remove()}),
ra.remove(),Object.assign(ra,Ca.hand._grabbedMorphProperties.get(ra).pointerAndShadow),ra=this.renderContainerFor(ra,!1),Ca.hand.grab(ra),ra.leftCenter=jb.pt(-20,0))}},{key:"getTreeFromSubmorphHierarchy",value:function(Ca){return new jb.InteractiveTreeData(this.readMorphHierarchy(Ca))}},{key:"readMorphHierarchy",value:function(Ca){var ra=this;return jb.tree.mapTree(Ca,function(tb,Na){return{name:tb.name,isCollapsed:!0,container:ra.renderContainerFor(tb),visible:!0,children:Na}},function(tb){return tb.submorphs.filter(function(Na){return tb.isWorld?
!ra.ignoreMorph(Na):!0})})}},{key:"renderContainerFor",value:function(Ca,ra){Ca=void 0===Ca?jb.morph({name:"root"}):Ca;ra=void 0===ra?!0:ra;var tb=new jb.MorphContainer({tree:this,fill:ra?jb.Color.transparent:jb.Color.gray.withA(.5),fontColor:this.nonSelectionFontColor,fontFamily:this.fontFamily,target:Ca,opacity:Ca.visible?1:.5});ra||(tb.layout=new jb.HorizontalLayout({spacing:2,align:"center"}));Ca._data?(tb._data=Ca._data,Ca._data.container=tb):tb._data={name:Ca.name,isCollapsed:!0,container:tb,
children:[]};return tb}},{key:"collapseAll",value:function(){var Ca=this;this.treeData.asList().forEach(function(ra){return ra!=Ca.treeData.root?ra.isCollapsed=!0:ra.isCollapsed=!1})}},{key:"filterMorphs",value:function(Ca){var ra=this,tb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Na){if(1==Na.nextAddress)return tb=Ca.tokens[0],ra.treeData.filterActive||(ra._collapseState=new WeakMap(ra.treeData.asList().map(function(lc){return[lc,lc.isCollapsed]}))),ra.treeData.filterActive=!!tb,
Na.yield(ra.treeData.filter(function(lc){var kd=!tb||lc.container.target.name.includes(tb);lc.container.highlightTerm(tb);return kd},3),2);ra.treeData.filterActive||ra.treeData.asList().forEach(function(lc){return lc.isCollapsed=ra._collapseState.has(lc)?ra._collapseState.get(lc):!0});ra.refresh();Na.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"SceneGraphTree"}},{key:"properties",get:function(){return{target:{serialize:!1}}}}],Fa,{pathInPackage:function(){return"index.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"InteractiveTree",version:"0.1.1-1105"}}},{start:10839,end:17488})}(jb.InteractiveTree);jb.SceneGraphTree=cc;jb.SceneGraphTree=cc;jb.SceneGraphTree=cc;cc=function(ha){var Fa=lively.FreezerRuntime.recorderFor("InteractiveTree/index.js"),Ja=Fa.hasOwnProperty("MorphContainer")&&"function"===typeof Fa.MorphContainer?Fa.MorphContainer:
Fa.MorphContainer=function(Ca){Ca&&Ca[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Ma(Ja,ha,[{key:"refresh",value:function(){var Ca=this,ra,tb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Na){ra=Ca.target;if(!ra)return Na.return();Ca.reactsToPointer=!0;Ca.dropShadow=!1;Ca.submorphs=[Ca.getLabel(),0<ra.comments.length&&Ca.getCommentControls(),ra.layout&&Ca.getLayoutControls(),Ca.getConnectionControls()].filter(Boolean).map(function(lc,
kd){lc.fitIfNeeded();lc.left=tb?tb.right+5:0;lc.top=2;return tb=lc});Ca.height=20;Ca.opacity=ra.visible?1:.5;Na.jumpToEnd()})}},{key:"getLabel",value:function(){var Ca=this.getSubmorphNamed("name label")||jb.morph({type:"label",name:"name label",reactsToPointer:!1,padding:jb.rect(0,0,0,0),acceptsDrops:!1,fontSize:this.tree.fontSize}),ra=Ca.textString.slice(2,-1);ra&&ra==this.target.name||(Ca.value=[].concat($jscomp.arrayFromIterable(this.getIcon(this.target)),[" "+this.target.name+" "]));return Ca}},
{key:"getIcon",value:function(Ca){return jb.Icon.textAttribute({Morph:"square",Ellipse:"circle",Text:"font",Label:"tag",Polygon:"draw-polygon",Path:"bezier-curve",Image:"image",Canvas:"chess-board",HTMLMorph:"code"}[jb.getClassName(Ca)]||"codepen",{paddingTop:"4px",fontSize:this.tree.fontSize-2,opacity:.6})}},{key:"getLayoutControls",value:function(){var Ca=this.getSubmorphNamed("layout label")||jb.morph({type:"label",name:"layout label",borderRadius:3,acceptsDrops:!1,padding:jb.Rectangle.inset(4,
2,4,2),fill:jb.Color.orange,fontColor:jb.Color.white});Ca._isControlElement=!0;Ca.textString!=this.target.layout.name()&&(Ca.value=this.target.layout.name());return Ca}},{key:"getCommentControls",value:function(){var Ca=this.getSubmorphNamed("comment label")||jb.morph({type:"label",name:"comment label",tooltip:"Open comment browser to browse all comments",borderRadius:3,acceptsDrops:!1,padding:jb.Rectangle.inset(4,2,4,2),fill:jb.Color.rgb(241,196,15),fontColor:jb.Color.black});Ca._isControlElement=
!0;var ra=this.target.comments.length+" comment"+(1==this.target.comments.length?"":"s");Ca.textString!=ra&&(Ca.value=ra);return Ca}},{key:"getConnectionControls",value:function(){this.connectionCount=this.target.attributeConnections?this.target.attributeConnections.filter(function(tb){return!tb.targetObj.isHalo}).length:0;var Ca=this.getSubmorphNamed("connections label")||jb.morph({acceptsDrops:!1,borderRadius:3,type:"label",name:"connections label",padding:jb.Rectangle.inset(4,2,4,2),nativeCursor:"pointer",
fill:jb.Color.red,fontColor:jb.Color.white});Ca._isControlElement=!0;Ca.visible=!this.connectionHalo&&!!this.connectionCount;var ra=this.connectionCount?this.connectionCount+" connection"+(1<this.connectionCount?"s":""):"Manage Connections";Ca.textString!=ra&&(Ca.value=ra);return Ca}},{key:"highlightTerm",value:function(Ca){var ra=this.submorphs[0],tb=ra.textAndAttributes.slice(0,2),Na=ra.textString.slice(1).split(Ca);ra.textAndAttributes=1===Na.length?[].concat($jscomp.arrayFromIterable(tb),[Na[0]]):
[].concat($jscomp.arrayFromIterable(tb),$jscomp.arrayFromIterable(jb.arr.flatten(jb.arr.interpose(Na.map(function(lc){return[lc,{}]}),[Ca,{fontWeight:"900"}]))))}},{key:"getClassControls",value:function(){}},{key:"wantsToBeDroppedOn",value:function(Ca){var ra=Ma._get(Object.getPrototypeOf(Ja.prototype),"wantsToBeDroppedOn",this).call(this,Ca);if(![Ca].concat($jscomp.arrayFromIterable(Ca.ownerChain())).includes(this.tree))this.onDragOutside();return ra}},{key:"onGrab",value:function(Ca){var ra=this,
tb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Na){if(1==Na.nextAddress)return ra.tree._dropInProgress=!0,tb=ra.target.globalPosition,Ma._get(Object.getPrototypeOf(Ja.prototype),"onGrab",ra).call(ra,Ca),ra._data.globalTargetPosition=tb,Na.yield(ra.whenRendered(),2);if(ra.tree.fullContainsWorldPoint(ra.globalPosition))ra.leftCenter=jb.pt(-20,0);else ra.onDragOutside();ra.tree._dropInProgress=!1;Na.jumpToEnd()})}},{key:"onDragOutside",value:function(){this._draggedOutside||(this._draggedOutside=
!0,this.queue||(this.queue=jb.fun.createQueue("container-hover-queue",function(Ca,ra){var tb,Na,lc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(kd){if(1==kd.nextAddress)return tb=Ca.target,Na=tb.opacity,lc=tb.scale,Ca.target.opacity=0,Ca.target.scale=.5,$world.halos().forEach(function(Tb){return Tb.remove()}),$world.firstHand.grab(Ca.target),Ca.target._data=Ca._data,Ca.remove(),Ca.target.position=jb.pt(0,0),kd.yield(Ca.target.animate({opacity:Na,scale:lc,duration:200}),2);ra();kd.jumpToEnd()})})),
this.queue.push(this))}},{key:"onChildAdded",value:function(Ca){var ra=this.node.children.indexOf(Ca.node||Ca._data)+1;ra=this.node.children[ra];Ca.target.remove();ra?(ra=this.target.submorphs.indexOf(ra.container.target),this.target.addMorphAt(Ca.target,ra)):this.target.addMorph(Ca.target);Ca._data.globalTargetPosition&&(Ca.target.position=this.target.localize(Ca._data.globalTargetPosition))}},{key:"onChildRemoved",value:function(Ca){}},{key:"toggleConnectionControl",value:function(Ca){this.getSubmorphNamed("connections label").visible=
Ca}},{key:"toggleSelected",value:function(Ca){var ra=this,tb,Na,lc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(kd){if(1==kd.nextAddress)return Ma._get(Object.getPrototypeOf(Ja.prototype),"toggleSelected",ra).call(ra,Ca),ra._active===Ca?kd.return():(ra._active=Ca)&&ra.target&&ra.target.isMorph&&ra.world()?kd.yield(ra.target.whenRendered(),3):kd.jumpTo(0);ra.get("inspector").targetObject=ra.target;ra.get("connections tree").inspectConnectionsOf(ra.target);if(ra.connectionHalo)return kd.return();
tb=$jscomp.makeIterator(ra.world().halos());for(Na=tb.next();!Na.done;Na=tb.next()){lc=Na.value;if(lc.target===ra.target)return kd.return();lc.remove()}jb.noUpdate({sourceObj:ra.world(),targetObj:ra.sideBar,sourceAttribute:"showHaloFor",targetAttribute:"selectNode"},function(){return ra.world().showHaloFor(ra.target)});kd.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"MorphContainer"}},{key:"properties",get:function(){return{fontFamily:{after:["submorphs"],derived:!0,
set:function(Ca){this.submorphs[0].fontFamily=Ca}},fontColor:{after:["submorphs"],derived:!0,set:function(Ca){this.submorphs[0].fontColor=Ca}},fontSize:{derived:!0,set:function(Ca){this.submorphs[0].fontSize=Ca}},target:{serialize:!1},dragTriggerDistance:{defaultValue:15},borderRadius:{defaultValue:4},nameNeedsUpdate:{derived:!0,get:function(){return!this.target||this.submorphs[0].textString.slice(2,-1)==this.target.name&&this.connectionCount==(this.target.attributeConnections||[]).length?!1:!0}},
grabbable:{defaultValue:!0},draggable:{defaultValue:!0},submorphs:{after:["target","tree"],initialize:function(){this.refresh()}},sideBar:{derived:!0,get:function(){return this.owner.owner}}}}}],Fa,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"InteractiveTree",version:"0.1.1-1105"}}},{start:17498,end:25916})}(jb.InteractiveTreeContainer);
jb.MorphContainer=cc;jb.MorphContainer=cc;jb.MorphContainer=cc;var X=lively.FreezerRuntime.recorderFor("ConnectionsTree/index.js");X.visualizeConnection=function(ha,Fa,Ja,Ca,ra){Ca=void 0===Ca?{}:Ca;ra=X.rect(0).sides.concat(X.rect(0).corners);Ja=Ja||new X.Leash(Object.assign({isSmooth:!0,styleClasses:["Halo"],borderColor:X.Color.orange,epiMorph:!0,endpointStyle:{start:{fill:X.Color.transparent,nativeCursor:"auto"},end:{fill:X.Color.orange}}},Ca,{hasFixedPosition:!0}));Ja.startPoint.attachTo(ha,"rightCenter");
Fa.isMorph?(Ca=Fa.globalBounds().partNameNearest(ra,ha.globalPosition),ha.globalPosition.equals(Fa.globalBounds().partNamed(Ca))&&Fa.globalBounds().partNameNearest(X.arr.without(ra,Ca),ha.globalPosition),Ja.endPoint.attachTo(Fa,"leftCenter")):(ra=ha.globalBounds().topRight().addPt(X.pt(100,0)),Fa=X.morph({type:"label",value:Fa.toString(),styleClasses:["Tooltip"],padding:X.rect(8,4)}).openInWorld(ra),Fa.position=ha.world().bounds().translateForInclusion(Fa.bounds()).topLeft(),X.once(Ja,"remove",Fa,
"remove"),Ja.endPoint.attachTo(Fa,"leftCenter"));return Ja};X.startConnecting=function(ha,Fa){ha.animate({opacity:.8,duration:300});ha.startPoint.attachTo(Fa,"center");ha.vertices[0].position=X.pt(2,2)};X.stopConnecting=function(ha,Fa,Ja,Ca){function ra(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(kd){if(1==kd.nextAddress)return kd.yield(ha.animate({opacity:0,duration:300}),2);ha.startPoint.clearConnection();ha.endPoint.clearConnection();ha.remove();kd.jumpToEnd()})}Ca=void 0===Ca?
!1:Ca;var tb,Na,lc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(kd){return 1==kd.nextAddress?(tb=ha,Na=tb.endPoint,(lc=Na.connectedMorph)&&"MorphContainer"==X.getClassName(lc)&&(lc=lc.target),lc?kd.yield(X.interactiveConnectGivenSourceAndTarget(Ja,Ca,lc),2):kd.jumpTo(2)):kd.yield(ra(),0)})};X.editConnection=function(ha){var Fa=ha.connection,Ja=ha.connectionPoint,Ca;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ra){if(1==ra.nextAddress)return Ca=X.visualizeConnection(Ja,
Fa.targetObj,!1,{borderColor:X.Color.gray.darker(),endpointStyle:{start:{fill:X.Color.transparent,nativeCursor:"auto"},end:{fill:X.Color.gray.darker()}}}),ra.yield(X.interactivelyReEvaluateConnection(Fa,"Edit Connection",!1),2);Ca.remove();ra.jumpToEnd()})};X.Tree=ne;X.TreeData=Rc;X.Icon=Pd;X.morph=hd;X.pt=Kb;X.Rectangle=Gc;X.rect=sc;X.Color=Kc;X.arr=bd;X.connect=Zc;X.signal=Bc;X.Leash=se;X.once=vd;X.interactivelyReEvaluateConnection=Gb;X.interactiveConnectGivenSource=Lb;X.interactiveConnectGivenSourceAndTarget=
mb;X.getClassName=$c;(function(ha){var Fa=lively.FreezerRuntime.recorderFor("ConnectionsTree/index.js"),Ja=Fa.hasOwnProperty("ConnectionsTreeData")&&"function"===typeof Fa.ConnectionsTreeData?Fa.ConnectionsTreeData:Fa.ConnectionsTreeData=function(Ca){Ca&&Ca[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Ma(Ja,ha,[{key:"parseMorphConnections",value:function(Ca){for(var ra={},tb=$jscomp.makeIterator(void 0===Ca.attributeConnections?
[]:Ca.attributeConnections),Na=tb.next();!Na.done;Na=tb.next())Na=Na.value,Na.targetObj.isHalo||(ra[Na.sourceAttrName]=ra[Na.sourceAttrName]||[{name:["      New Connection  ",{fontColor:X.Color.white.withA(.5),fontStyle:"italic"},this.renderPin(Ca,Na.sourceAttrName),{}]}],X.arr.pushAt(ra[Na.sourceAttrName],{name:[].concat($jscomp.arrayFromIterable(this.renderExistingConnection(Na)))},0));return{children:Object.entries(ra).map(function(lc){var kd=$jscomp.makeIterator(lc);lc=kd.next().value;kd=kd.next().value;
return{name:[lc,{fontWeight:"bold"}," ",{},X.morph({fill:X.Color.white,opacity:.7,value:""+(kd.length-1),borderRadius:15,fontWeight:"bold",padding:X.Rectangle.inset(5,0,5,0),type:"label"}),{paddingTop:"4px"}],children:kd}}).concat([{name:["New Connection  ",{fontColor:X.Color.white.withA(.5),fontStyle:"italic"},this.renderPin(Ca),{}]}])}}},{key:"renderExistingConnection",value:function(Ca){var ra=this,tb=X.morph({type:"label",fontColor:X.Color.gray,fontSize:16,nativeCursor:"pointer",value:[].concat($jscomp.arrayFromIterable(X.Icon.textAttribute("long-arrow-alt-right",
{paddingTop:"4px"})),["  ",{},Ca.targetMethodName,{}])}),Na=this.renderDeadPin(),lc=Na.submorphs[0];X.connect(tb,"onHoverIn",function(){tb.fontColor=X.Color.orange;tb._leash=X.visualizeConnection(lc,Ca.targetObj,tb._leash);lc.fill=X.Color.orange;lc.border={color:X.Color.orange,width:3}});X.connect(tb,"onMouseDown",function(kd){return $jscomp.asyncExecutePromiseGeneratorProgram(function(Tb){if(1==Tb.nextAddress)return kd.stop(),Tb.yield(X.interactivelyReEvaluateConnection(Ca),2);X.signal(ra,"refresh");
Tb.jumpToEnd()})});X.connect(tb,"onHoverOut",function(){tb.fontColor=X.Color.gray;lc.fill=X.Color.gray;lc.border={color:X.Color.white,width:1};tb._leash.remove();tb._leash=void 0});return[tb,{},"  ",{}].concat($jscomp.arrayFromIterable(X.Icon.textAttribute("times",{nativeCursor:"pointer ",onMouseDown:function(){Ca.disconnect();X.signal(ra,"refresh")}})),["  ",{},Na,{}])}},{key:"renderDeadPin",value:function(){var Ca=X.morph({type:"ellipse",fill:X.Color.gray,extent:X.pt(10,10),center:X.pt(8,12),borderWidth:1});
return X.morph({extent:X.pt(20,20),fill:X.Color.transparent,reactsToPointer:!1,submorphs:[Ca]})}},{key:"renderPin",value:function(Ca,ra){var tb=this,Na=X.morph({type:"ellipse",fill:X.Color.gray.withA(.5),extent:X.pt(10,10),center:X.pt(8,12),draggable:!1,borderWidth:1}),lc=new X.Leash({opacity:0,styleClasses:["Halo"],isSmooth:!0,epiMorph:!0,hasFixedPosition:!0,borderColor:X.Color.gray.darker(),endpointStyle:{fill:X.Color.gray.darker()},position:X.pt(1,1),vertices:[X.pt(0,0),X.pt(0,0)],getLabelFor:function(kd){return"MorphContainer"==
X.getClassName(kd)?kd.target.name:kd.name},canConnectTo:function(kd){return"MorphContainer"==X.getClassName(kd)||2>X.arr.intersect([kd].concat($jscomp.arrayFromIterable(kd.ownerChain())),[Na].concat($jscomp.arrayFromIterable(Na.ownerChain()))).length}});Na.addMorph(lc);X.connect(lc.endPoint,"onDragStart",function(){X.startConnecting(lc,Na)});X.connect(lc.endPoint,"onDragEnd",function(kd){return $jscomp.asyncExecutePromiseGeneratorProgram(function(Tb){if(1==Tb.nextAddress)return Na.center=X.pt(8,12),
Tb.yield(X.stopConnecting(lc,Na,Ca,ra),2);X.signal(tb,"refresh");Tb.jumpToEnd()})});return X.morph({extent:X.pt(20,20),fill:X.Color.transparent,reactsToPointer:!1,submorphs:[Na]})}},{key:"display",value:function(Ca){return Ca.name}},{key:"collapse",value:function(Ca,ra){Ca.isCollapsed=ra}},{key:"isCollapsed",value:function(Ca){return Ca.isCollapsed}},{key:"isLeaf",value:function(Ca){return!Ca.children}},{key:"getChildren",value:function(Ca){return Ca.children}}],[{key:Symbol.for("__LivelyClassName__"),
get:function(){return"ConnectionsTreeData"}},{key:"for",value:function(Ca){var ra=new this;ra.root=ra.parseMorphConnections(Ca);return ra}}],Fa,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"ConnectionsTree",version:"0.1.1-16"}}},{start:3542,end:8259})})(X.TreeData);cc=function(ha){var Fa=lively.FreezerRuntime.recorderFor("ConnectionsTree/index.js"),
Ja=Fa.hasOwnProperty("ConnectionsTree")&&"function"===typeof Fa.ConnectionsTree?Fa.ConnectionsTree:Fa.ConnectionsTree=function(Ca){Ca&&Ca[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Ma(Ja,ha,[{key:"inspectConnectionsOf",value:function(Ca){if(this.targetMorph=Ca)this.treeData=X.ConnectionsTreeData.for(Ca),X.connect(this.treeData,"refresh",this,"refresh")}},{key:"refresh",value:function(){this.targetMorph&&(this.treeData=X.ConnectionsTreeData.for(this.targetMorph),
X.connect(this.treeData,"refresh",this,"refresh"))}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ConnectionsTree"}},{key:"properties",get:function(){return{}}}],Fa,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"ConnectionsTree",version:"0.1.1-16"}}},{start:8276,end:8829})}(X.Tree);cc=X.ConnectionsTree;X.default=
cc}}});