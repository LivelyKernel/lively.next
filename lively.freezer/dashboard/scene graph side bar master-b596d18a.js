System.register("./__root_module__-fd8ea0c8.js kld-intersections ./index-0b494524.js ./index-b8f51b00.js ./index-f52d5423.js ./color-picker-a5cfd845.js ./editor-plugin-9c75ae1d.js ./index-385d8bf3.js ./editor-plugin-316ed8ad.js ./index-96a3d730.js".split(" "),function(){var Ca,Bb,Kb,lc,bc,Td,Xc,Wd,$c,Pc,md,ge,Qe,kf,ke,cc,Hc,Nd,ec,$d,le,Dc,Ic,Vb,Lc,dd,Hd,Ld,wc,rb,Gb,Oa,ab,Qa,Ja,eb,Rb,zc,sb,Ab,vb,ha;return{setters:[function(Ha){Ca=Ha.aw;Bb=Ha.an;Kb=Ha.aC;lc=Ha.aa;bc=Ha.a3;Td=Ha.ax;Xc=Ha.au;Wd=
Ha.aj;$c=Ha.C;Pc=Ha.a2;md=Ha.a6;ge=Ha.$;Qe=Ha.a$;kf=Ha.P;ke=Ha.a8;cc=Ha.aD;Hc=Ha.ap;Nd=Ha.a_;ec=Ha.as;$d=Ha.aq;le=Ha.ab;Dc=Ha.bq;Ic=Ha.bs;Vb=Ha.bQ;Lc=Ha.b5;dd=Ha.bl;Hd=Ha.aP;Ld=Ha.l;wc=Ha.a1;rb=Ha.bR;Gb=Ha.aZ;Oa=Ha.b0;ab=Ha.at;Qa=Ha.a4;Ja=Ha.aV;eb=Ha.av;Rb=Ha.bS},function(){},function(){},function(){},function(Ha){zc=Ha.d;sb=Ha.s;Ab=Ha.I;vb=Ha.M},function(){},function(Ha){ha=Ha.I},function(){},function(){},function(){}],execute:function(){function Ha(ub){var cd=ub.sourceObj,Vc=ub.targetObj;cd.isMorph&&
Vc.isMorph?(cd.show(),Vc.show(),kb.showConnector&&kb.showConnector(cd,Vc)):kb.show(String(ub))}function W(ub){var cd=ub.sourceObj,Vc=ub.sourceAttrName,ib=ub.targetObj,Ra=ub.targetMethodName,pb=ub.getConverter();ub=ub.getUpdater();return kb.printConnectionElements(cd,Vc,ib,Ra,pb,ub)}function ra(ub,cd,Vc,ib,Ra,pb){ub="/* global connect, source, target */\nconnect(source, '"+cd+"', target, '"+ib+"'";if(Ra||pb)ub+=", {\n";Ra&&(ub+="  converter: "+Ra);Ra&&pb&&(ub+=",");Ra&&(ub+="\n");pb&&(ub+="  updater: "+
pb+"\n");if(Ra||pb)ub+="}";return ub+");"}function Za(ub,cd){var Vc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ib){if(1==ib.nextAddress)return ib.yield(kb.InteractiveMorphSelector.selectMorph(),2);Vc=ib.yieldResult;return ib.return(Vc?kb.interactiveConnectGivenSourceAndTarget(ub,cd,Vc):null)})}function qb(ub,cd,Vc,ib){var Ra,pb,bb,Oc,ma;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Aa){switch(Aa.nextAddress){case 1:Ra=Vc&&Vc.world().targetDataBindings(Vc);pb=ub.world();
if(!Ra||!Ra.length)return pb.setStatusMessage("connect canceled"),Aa.return();if(cd){Aa.jumpTo(2);break}bb=[{isListItem:!0,string:"[Enter custom attribute..]",value:{custom:!0}}].concat($jscomp.arrayFromIterable(kb.arr.flatten(ub.world().targetDataBindings(ub)).map(function(xb){return{isListItem:!0,string:xb.signature||xb.name,value:xb}})));return Aa.yield(pb.listPrompt(["Select Source Attribute\n",{},"Choose the attribute of the morph that is supposed to invoke the connection. This can be a method, property or a custom signal that is invoked upon the morph.",
{paddingTop:"10px",fontSize:14,textAlign:"left",fontWeight:"normal"}],bb,{filterable:!0}),3);case 3:cd=Aa.yieldResult;if("canceled"==cd.status)return Aa.return();cd=cd.selected[0];cd=cd.custom?"sourceAttribute":cd.name;case 2:return Oc=[{isListItem:!0,string:"[Enter custom attribute...]",value:{custom:!0}}].concat($jscomp.arrayFromIterable(kb.arr.flatten(Ra).map(function(xb){return{isListItem:!0,value:xb,string:xb.signature||xb.name}}))),Aa.yield(pb.listPrompt(["Select Target Attribute\n",{},"Choose the attribute of the morph that is supposed to invoked once the connection is triggered. This can be either a method or a property of the morph. When selecting a property, keep in mind that the value of the source attribute will be assigned to the property or passed to the method as an argument.",
{fontSize:14,textAlign:"left",fontWeight:"normal",paddingTop:"10px"}],Oc,{filterable:!0}),4);case 4:ma=Aa.yieldResult;if("canceled"==ma.status)return Aa.return();ma=ma.selected[0];return Aa.yield(kb.interactivelyEvaluateConnection({sourceObj:ub,sourceAttr:cd,targetObj:Vc,targetAttr:ma.custom?"targetAttribute":ma.name,onConnect:ib,prompt:"Edit and confirm connection:"}),0)}})}function sc(ub,cd,Vc,ib){cd=void 0===cd?"confirm connection":cd;var Ra,pb,bb,Oc,ma,Aa,xb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(P){Ra=
ub;pb=Ra.sourceObj;bb=Ra.sourceAttrName;Oc=Ra.targetObj;ma=Ra.targetMethodName;Aa=ub.getConverter();xb=ub.getUpdater();return P.return(kb.interactivelyEvaluateConnection({sourceObj:pb,sourceAttr:bb,targetObj:Oc,targetAttr:ma,converter:Aa,updater:xb,prompt:cd,highlight:Vc,onConnect:ib}))})}function wd(ub,cd,Vc,ib,Ra){ib=void 0===ib?{}:ib;Ra=kb.rect(0).sides.concat(kb.rect(0).corners);Vc=Vc||new kb.Leash(Object.assign({isSmooth:!0,styleClasses:["Halo"],borderColor:kb.Color.orange,epiMorph:!0,endpointStyle:{start:{fill:kb.Color.transparent,
nativeCursor:"auto"},end:{fill:kb.Color.orange}}},ib,{hasFixedPosition:!0}));Vc.startPoint.attachTo(ub,"rightCenter");cd.isMorph?(ib=cd.globalBounds().partNameNearest(Ra,ub.globalPosition),ub.globalPosition.equals(cd.globalBounds().partNamed(ib))&&cd.globalBounds().partNameNearest(kb.arr.without(Ra,ib),ub.globalPosition),Vc.endPoint.attachTo(cd,"leftCenter")):(Ra=ub.globalBounds().topRight().addPt(kb.pt(100,0)),cd=kb.morph({type:"label",value:cd.toString(),styleClasses:["Tooltip"],padding:kb.rect(8,
4)}).openInWorld(Ra),cd.position=ub.world().bounds().translateForInclusion(cd.bounds()).topLeft(),kb.once(Vc,"remove",cd,"remove"),Vc.endPoint.attachTo(cd,"leftCenter"));return Vc}function nc(ub){var cd,Vc,ib,Ra,pb,bb,Oc,ma,Aa,xb,P,wa,Xa,Db,mc,Sb,Tc,gd,se,Cf;return $jscomp.asyncExecutePromiseGeneratorProgram(function(me){switch(me.nextAddress){case 1:cd=ub;Vc=cd.sourceObj;ib=cd.sourceAttr;Ra=cd.targetObj;pb=cd.targetAttr;bb=cd.converter;Oc=cd.updater;ma=cd.prompt;Aa=void 0===cd.highlight?!0:cd.highlight;
xb=cd.onConnect;P="lively://lively.bindings-interactive-connect/x"+Vc.id;wa={context:window,format:"esm",targetModule:P,classTransform:kb.classToFunctionTransform};Xa=kb.printConnectionElements(Vc,ib,Ra,pb,bb,Oc);Ra.isMorph&&Vc.isMorph&&(Db=Ra.propertiesAndPropertySettings().properties[pb]||{type:typeof Ra[pb]},mc=Db.type,Sb=Vc.propertiesAndPropertySettings().properties[ib]||{type:typeof Vc[ib]},Tc=Sb.type,Tc!==mc&&(ma=["Edit and confirm connection:\n",{},"Source: ",{fontSize:14,fontWeight:"normal"},
Vc.toString(),{fontSize:14,fontWeight:"normal",fontStyle:"italic"},"\nTarget: ",{fontSize:14,fontWeight:"normal"},Ra.toString(),{fontSize:14,fontWeight:"normal",fontStyle:"italic"}]));gd={};Object.assign(lively.modules.module(P).recorder,(gd.source=Vc,gd.target=Ra,gd.connect=kb.connect,gd.once=kb.once,gd[ib]=Vc[ib],gd));if(!ma){se=Xa;me.jumpTo(2);break}return me.yield($world.editPrompt(ma,{input:Xa,historyId:"lively.bindings-interactive-morph-connect",mode:"js",requester:$world,evalEnvironment:wa,
animated:!1}),3);case 3:if(se=me.yieldResult,!se)return $world.setStatusMessage("connect canceled"),me.return();case 2:return me.yield(lively.vm.runEval(se,wa),4);case 4:Cf=me.yieldResult;if(Cf.isError)return $world.logError(Cf.value),me.return(nc({sourceObj:Vc,sourceAttr:ib,targetObj:Ra,targetAttr:pb,converter:bb,updater:Oc,prompt:"confirm connection",highlight:Aa,onConnect:xb}));Aa&&($world.setStatusMessage("connected!",kb.Color.green),kb.interactivelyShowConnection(Cf.value));"function"===typeof xb&&
xb(Cf);me.jumpToEnd()}})}var Ob=lively.FreezerRuntime.recorderFor("ProtoInspector/index.js");Ob.Inspector=ha;var Zd=function(ub){var cd=lively.FreezerRuntime.recorderFor("ProtoInspector/index.js"),Vc=cd.hasOwnProperty("ProtoInspector")&&"function"===typeof cd.ProtoInspector?cd.ProtoInspector:cd.ProtoInspector=function(ib){ib&&ib[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Ca(Vc,ub,void 0,[{key:Symbol.for("__LivelyClassName__"),
get:function(){return"ProtoInspector"}},{key:"properties",get:function(){return{master:{initialize:function(){}}}}}],cd,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"ProtoInspector",version:"0.1.1-0"}}},{start:68,end:210})}(Ob.Inspector);Zd=Ob.ProtoInspector;Ob.default=Zd;var Id=lively.FreezerRuntime.recorderFor("MorphicSideBar/index.js");
Id.Morph=Bb;Id.touchInputDevice=Kb;Id.easings=lc;Id.pt=bc;Id.fun=Td;Id.connect=Xc;Ob=function(ub){var cd=lively.FreezerRuntime.recorderFor("MorphicSideBar/index.js"),Vc=cd.hasOwnProperty("MorphicSideBar")&&"function"===typeof cd.MorphicSideBar?cd.MorphicSideBar:cd.MorphicSideBar=function(ib){ib&&ib[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Ca(Vc,ub,[{key:"relayout",value:function(){this.onWorldResize()}},{key:"onWorldResize",
value:function(ib){ib=void 0===ib?!0:ib;if(this.respondsToVisibleWindow){var Ra=$world.visibleBounds(),pb=navigator.standalone&&Id.touchInputDevice?25:0;this.height=Ra.height-pb;this.top=pb+Ra.top();pb=this.get("horizontal resizer");pb.height=this.height;pb.top=0;ib&&(this.visible?this.topLeft=Ra.topLeft():this.topRight=Ra.topLeft())}}},{key:"switchMode",value:function(ib){"inspector"==ib&&this.showInspector();"connections"==ib&&this.showConnections()}},{key:"showInspector",value:function(){this.get("inspector").visible=
!0;this.get("connections tree").visible=!1}},{key:"showConnections",value:function(){this.get("inspector").visible=!1;this.get("connections tree").visible=!0}},{key:"toggle",value:function(ib){var Ra=this,pb,bb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Oc){switch(Oc.nextAddress){case 1:pb=$world.visibleBounds();bb=navigator.standalone&&Id.touchInputDevice?25:0;Ra.height=pb.height-bb;Ra.top=bb+pb.top();if(ib)return $world.addMorph(Ra,$world.get("lively top bar")),Ra.topRight=pb.topLeft(),
Ra.attachToWorld($world),Ra.visible=!0,Oc.yield(Ra.whenRendered(),5);Ra.detachFromWorld($world);return Oc.yield(Ra.animate({opacity:0,topRight:pb.topLeft(),duration:300}),4);case 4:Ra.visible=!1;Ra.remove();Oc.jumpTo(0);break;case 5:return Ra.onWorldResize(!1),Ra.get("scene graph").adjustProportions(),Oc.yield(Ra.animate({opacity:1,easing:Id.easings.outCirc,topLeft:pb.topLeft(),duration:300}),6);case 6:Ra.get("scene graph").refresh(),Oc.jumpToEnd()}})}},{key:"attachToWorld",value:function(ib){Id.connect(ib,
"onChange",this,"onHierarchyChange",{garbageCollect:!0});Id.connect(ib,"onSubmorphChange",this,"onHierarchyChange",{garbageCollect:!0});Id.connect(ib,"showHaloFor",this,"selectNode",{garbageCollect:!0})}},{key:"detachFromWorld",value:function(ib){var Ra=this;ib.attributeConnections.forEach(function(pb){pb.targetObj===Ra&&pb.disconnect()})}},{key:"selectNode",value:function(ib){this.getSubmorphNamed("scene graph").selectMorphInTarget(ib);this.getSubmorphNamed("connections tree").inspectConnectionsOf(ib)}},
{key:"onHierarchyChange",value:function(ib){var Ra=this,pb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(bb){if("addMorphAt"===ib.selector||"removeMorph"===ib.selector||"name"===ib.prop){pb=Ra._sceneGraph||(Ra._sceneGraph=Ra.getSubmorphNamed("scene graph"));if(!pb||!pb.owner.visible||ib.target&&ib.target.isHand||ib.target&&pb.ignoreMorph(ib.target)||ib.args&&!ib.args[0].isHalo&&pb.ignoreMorph(ib.args[0])||ib.target.ownerChain().find(function(Oc){return pb.ignoreMorph(Oc)}))return bb.return();
Id.fun.debounceNamed("scene-graph-update",50,function(){return pb.refresh()})()}bb.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"MorphicSideBar"}},{key:"properties",get:function(){return{isHaloItem:{get:function(){return!1}}}}}],cd,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"MorphicSideBar",version:"0.1.1-76"}}},
{start:226,end:3668})}(Id.Morph);Ob=Id.MorphicSideBar;Id.default=Ob;var kb=lively.FreezerRuntime.recorderFor("lively.ide/fabrik.js");kb.interactivelyShowConnection=Ha;kb.printConnection=W;kb.printConnectionElements=ra;kb.interactiveConnectGivenSource=Za;kb.interactiveConnectGivenSourceAndTarget=qb;kb.interactivelyReEvaluateConnection=sc;kb.visualizeConnection=wd;kb.interactivelyEvaluateConnection=nc;kb.connect=Xc;kb.once=Wd;kb.Color=$c;kb.rect=Pc;kb.pt=bc;kb.arr=md;kb.promise=ge;kb.properties=Qe;
kb.Path=kf;kb.obj=ke;kb.HorizontalLayout=cc;kb.Morph=Bb;kb.VerticalLayout=Hc;kb.StyleSheet=Nd;kb.Icon=ec;kb.GridLayout=$d;kb.morph=le;kb.TreeData=Dc;kb.Tree=Ic;kb.Leash=Vb;kb.LabeledCheckBox=Lc;kb.SearchField=dd;kb.showConnector=zc;kb.show=sb;kb.InteractiveMorphSelector=Ab;kb.MorphHighlighter=vb;kb.Window=Hd;kb.classToFunctionTransform=Ld;kb.interactivelyShowConnection=Ha;kb.interactivelyShowConnection=Ha;kb.printConnection=W;kb.printConnection=W;kb.printConnectionElements=ra;kb.printConnectionElements=
ra;kb.interactiveConnectGivenSource=Za;kb.interactiveConnectGivenSource=Za;kb.interactiveConnectGivenSourceAndTarget=qb;kb.interactiveConnectGivenSourceAndTarget=qb;kb.interactivelyReEvaluateConnection=sc;kb.interactivelyReEvaluateConnection=sc;kb.visualizeConnection=wd;kb.visualizeConnection=wd;kb.interactivelyEvaluateConnection=nc;kb.interactivelyEvaluateConnection=nc;var Eb=lively.FreezerRuntime.recorderFor("InteractiveTree/index.js");Eb.Tree=Ic;Eb.TreeData=Dc;Eb.morph=le;Eb.Icon=ec;Eb.HorizontalLayout=
cc;Eb.easings=lc;Eb.Morph=Bb;Eb.Color=$c;Eb.Rectangle=wc;Eb.rect=Pc;Eb.pt=bc;Eb.connect=Xc;Eb.noUpdate=rb;Eb.disconnect=Gb;Eb.disconnectAll=Oa;Eb.once=Wd;Eb.arr=md;Eb.num=ab;Eb.fun=Td;Eb.tree=Qa;Eb.promise=ge;Eb.ConnectionHalo=_missingExportShim;Eb.getClassName=Ja;Ob=function(ub){var cd=lively.FreezerRuntime.recorderFor("InteractiveTree/index.js"),Vc=cd.hasOwnProperty("InteractiveTreeContainer")&&"function"===typeof cd.InteractiveTreeContainer?cd.InteractiveTreeContainer:cd.InteractiveTreeContainer=
function(ib){ib&&ib[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Ca(Vc,ub,[{key:"onChildRemoved",value:function(ib){}},{key:"onChildAdded",value:function(ib){}},{key:"toggleSelected",value:function(ib){if(this.tree){var Ra=this.tree,pb=Ra.selectionFontColor,bb=Ra.nonSelectionFontColor;this.submorphs.filter(function(Oc){return!Oc._isControlElement&&Oc.styleClasses.includes("Label")}).forEach(function(Oc){Oc.fontColor=ib?pb:bb})}}},
{key:"onGrab",value:function(ib){var Ra=this.tree,pb=this.node;this.fill=Eb.Color.gray.withA(.5);this.fontColor=Ra.selectionFontColor;this.opacity=.8;Ca._get(Object.getPrototypeOf(Vc.prototype),"onGrab",this).call(this,ib);pb&&(this.toggleSelected(!1),Ra.collapse(pb),Ra.treeData.parentNode(pb).container.onChildRemoved(this),this._data=Ra.treeData.remove(pb),pb.container.target.remove(),Ra.update(!0))}},{key:"wantsToBeDroppedOn",value:function(ib){this.showPreviewOn(ib);return!0}},{key:"showPreviewOn",
value:function(ib){if(ib.isContainer)var Ra=ib.tree;ib.isTree&&(Ra=ib);Ra&&Ra.showDropPreviewFor&&Ra.showDropPreviewFor(this)}},{key:"insertAsChild",value:function(ib){var Ra=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(pb){if(1==pb.nextAddress)return Ra.tree.treeData.add(ib._data,Ra.node,Ra.node.children[0]),Ra.tree.uncollapse(Ra.node),Ra.tree.treeData.remove(Ra.tree._previewNode),pb.yield(Ra.tree.whenRendered(),2);Ra.tree.update(!0);Ra.onChildAdded(ib);pb.jumpToEnd()})}},{key:"onBeingDroppedOn",
value:function(ib,Ra){var pb=this;debugger;this.tree._dropInProgress=!0;Ca._get(Object.getPrototypeOf(Vc.prototype),"onBeingDroppedOn",this).call(this,ib,Ra);ib=function(){pb.fill=Eb.Color.gray.withA(.5);pb.opacity=1;pb.tree._dropInProgress=!1;pb.tree.refresh()};Ra.isTree?Ra.insertAtPlaceholder(this).then(ib):Ra.isContainer?Ra.insertAsChild(this).then(ib):ib()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"InteractiveTreeContainer"}},{key:"properties",get:function(){return{fill:{defaultValue:Eb.Color.transparent},
isContainer:{get:function(){return!0}},tree:{},node:{readOnly:!0,get:function(){var ib=this,Ra=this.tree.treeData;return Ra&&Ra.asList().find(function(pb){return pb.container===ib})}}}}}],cd,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"InteractiveTree",version:"0.1.1-1104"}}},{start:498,end:2975})}(Eb.Morph);Eb.InteractiveTreeContainer=
Ob;Eb.InteractiveTreeContainer=Ob;Eb.InteractiveTreeContainer=Ob;Ob=function(ub){var cd=lively.FreezerRuntime.recorderFor("InteractiveTree/index.js"),Vc=cd.hasOwnProperty("InteractiveTreeData")&&"function"===typeof cd.InteractiveTreeData?cd.InteractiveTreeData:cd.InteractiveTreeData=function(ib){ib&&ib[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Ca(Vc,ub,[{key:"display",value:function(ib){return[ib.container||"<NO CONTAINER>",
{}]}},{key:"isCollapsed",value:function(ib){return ib.isCollapsed}},{key:"collapse",value:function(ib,Ra){ib.isCollapsed=Ra}},{key:"getChildren",value:function(ib){var Ra=this;return ib.isLeaf?null:ib.children.filter(function(pb){return pb&&(Ra.filterActive?pb.visible:!0)})}},{key:"isLeaf",value:function(ib){var Ra=this;return!ib.children||0==ib.children.filter(function(pb){return pb&&(Ra.filterActive?pb.visible:!0)}).length}},{key:"add",value:function(ib,Ra,pb){Ra=void 0===Ra?this.root:Ra;Ra.children||
(Ra.children=[]);pb?Eb.arr.pushAt(Ra.children,ib,Ra.children.indexOf(pb)):Ra.children.push(ib);Ra.isLeaf=!1}},{key:"replace",value:function(ib,Ra){var pb=this.parentNode(ib);ib=pb.children.indexOf(ib);pb.children[ib]=Ra}},{key:"next",value:function(ib){var Ra=this.parentNode(ib);return Ra&&Ra.children[Ra.children.indexOf(ib)+1]}},{key:"isBefore",value:function(ib,Ra){this.next(ib)===Ra}},{key:"isAfter",value:function(ib,Ra){this.next(Ra)===ib}},{key:"addBefore",value:function(ib,Ra){this.add(ib,this.parentNode(Ra),
Ra)}},{key:"addAfter",value:function(ib,Ra){var pb=this.parentNode(Ra);Ra=pb.children.indexOf(Ra)+1;this.add(ib,pb,pb.children[Ra])}},{key:"remove",value:function(ib){var Ra=this.parentNode(ib);if(Ra)return Eb.arr.remove(Ra.children,ib),Ra.children==[]&&(Ra.children=null),ib}},{key:"filter",value:function(ib,Ra){Ra=void 0===Ra?1:Ra;var pb=this,bb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Oc){if(1==Oc.nextAddress)return Oc.yield(pb.uncollapseAll(function(ma,Aa){return Aa<Ra+1}),2);
bb=pb.filterActive;pb.filterActive=!1;pb.asListWithIndexAndDepth(!1).reverse().forEach(function(ma){var Aa=ma.node;if(0==ma.depth)return Aa.visible=!0;Aa.visible=ib(Aa);Aa.visible||Aa.isCollapsed||!Aa.children.find(function(xb){return xb.visible})?Aa.container.opacity=1:(Aa.visible=!0,Aa.container.opacity=.5);return Aa.visible});pb.filterActive=bb;Oc.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"InteractiveTreeData"}}],cd,{pathInPackage:function(){return"index.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"InteractiveTree",version:"0.1.1-1104"}}},{start:2984,end:5441})}(Eb.TreeData);Eb.InteractiveTreeData=Ob;Eb.InteractiveTreeData=Ob;Eb.InteractiveTreeData=Ob;Ob=function(ub){var cd=lively.FreezerRuntime.recorderFor("InteractiveTree/index.js"),Vc=cd.hasOwnProperty("InteractiveTree")&&"function"===typeof cd.InteractiveTree?cd.InteractiveTree:
cd.InteractiveTree=function(ib){ib&&ib[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Ca(Vc,ub,[{key:"update",value:function(ib){var Ra=this;Ca._get(Object.getPrototypeOf(Vc.prototype),"update",this).call(this,ib);this.treeData&&this.relayoutContainers();ib&&this.embeddedMorphs.forEach(function(pb){pb.isContainer&&(pb.fill=Eb.Color.transparent,pb.fontFamily=Ra.fontFamily,pb.fontSize=Ra.fontSize)})}},{key:"onDrop",value:function(ib){Ca._get(Object.getPrototypeOf(Vc.prototype),
"onDrop",this).call(this,ib);this.treeData.remove(this._previewNode);this.update(!0)}},{key:"onDropHoverIn",value:function(ib){}},{key:"onDropHoverUpdate",value:function(ib){}},{key:"onDropHoverOut",value:function(ib){}},{key:"onHoverOut",value:function(ib){var Ra=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(pb){Ca._get(Object.getPrototypeOf(Vc.prototype),"onHoverOut",Ra).call(Ra,ib);Ra._previewNode&&Ra._previewNode.container.world()&&Ra.treeData.remove(Ra._previewNode);Ra.resetContainerSelection();
Ra.update(!0);pb.jumpToEnd()})}},{key:"insertAtPlaceholder",value:function(ib){var Ra=this,pb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(bb){if(1==bb.nextAddress)return pb=Ra.treeData.parentNode(Ra._previewNode),Ra.treeData.replace(Ra._previewNode,ib._data),Ra.treeData.remove(Ra._previewNode),bb.yield(Ra.whenRendered(),2);Ra.update(!0);pb.container.onChildAdded(ib);bb.jumpToEnd()})}},{key:"scrollUpSlowly",value:function(){var ib=this;if(!this._scrollingUp){this._scrollingUp=!0;var Ra=
function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(pb){if(1==pb.nextAddress)return ib._scrollingUp&&0<ib.scroll.y?pb.yield(ib.animate({scroll:ib.scroll.subXY(0,30),duration:300,easing:Eb.easings.linear}),3):(ib._scrollingUp=!1,pb.jumpTo(0));Ra();pb.jumpToEnd()})};Ra()}}},{key:"scrollDownSlowly",value:function(){var ib=this;if(!this._scrollingDown){this._scrollingDown=!0;var Ra=function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(pb){if(1==pb.nextAddress)return ib._scrollingDown&&
ib.scroll.y<ib.scrollExtent.y-ib.height?pb.yield(ib.animate({scroll:ib.scroll.addXY(0,30),duration:300,easing:Eb.easings.linear}),3):(ib._scrollingDown=!1,pb.jumpTo(0));Ra();pb.jumpToEnd()})};Ra()}}},{key:"stopScrollingSlowly",value:function(){this._scrollingUp=this._scrollingDown=!1}},{key:"resetContainerSelection",value:function(){this.embeddedMorphs.forEach(function(ib){ib.isContainer&&(ib.fill=Eb.Color.transparent)})}},{key:"showDropPreviewFor",value:function(ib){var Ra=this;ib=this.localize(ib.globalBounds().center());
var pb=this.textPositionFromPoint(ib),bb=this.treeData.asListWithIndexAndDepth(function(wa){wa=wa.node;return wa!=Ra._previewNode&&wa.container.world()}),Oc=(bb.find(function(wa){return wa.i-1===pb.row})||{}).node,ma=Oc&&Oc.container,Aa=this.ensurePlaceholder(),xb=!!Aa.container.world(),P=ib.subPt(this.scroll).subPt(this.scrollbarOffset);10>P.y?this.scrollUpSlowly():P.y>this.height-50?this.scrollDownSlowly():this.stopScrollingSlowly();this.resetContainerSelection();if(!ma){if(bb.length>pb.row||Eb.arr.last(this.treeData.root.children)===
Aa)return;this.treeData.remove(Aa);this.treeData.add(Aa);this.update(!0)}if(ma){bb=this.textLayout.boundsFor(this,pb);if(4>Math.abs(bb.top()-ib.y)){if(this.treeData.isBefore(Aa,Oc))return;this.treeData.remove(Aa);this.treeData.addBefore(Aa,Oc)}else if(4>Math.abs(bb.bottom()-ib.y)&&(Oc.isCollapsed||this.treeData.isLeaf(Oc))){if(this.treeData.isAfter(Aa,Oc))return;this.treeData.remove(Aa);this.treeData.addAfter(Aa,Oc)}else{ma.fill=Eb.Color.gray;if(!xb)return;this.treeData.remove(Aa)}this.update(!0)}}},
{key:"ensurePlaceholder",value:function(){var ib=Eb.pt(this.width-100,this.document.getLine(0).height);this._previewNode||(this._previewNode={container:Eb.morph({acceptsDrops:!1,reactsToPointer:!1,fill:Eb.Color.gray,borderRadius:5}),isCollapsed:!0,isLeaf:!0});this._previewNode.container.extent=ib;return this._previewNode}},{key:"relayoutContainers",value:function(){var ib=this;this.charBoundsFromTextPosition({row:0,column:6});this.textLayout.charBoundsOfRow(this,0).map(function(Ra){return Ra.height});
this.treeData.asListWithIndexAndDepth().forEach(function(Ra){var pb=Ra.node;Ra=Ra.i;pb.container.nativeCursor="grab";pb.container.width=ib.width-25-pb.container.left;pb.container.toggleSelected&&pb.container.toggleSelected(Ra==ib.selectedIndex)});this.anchors.forEach(function(Ra){return Ra.position=Ra.position})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"InteractiveTree"}}],cd,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"InteractiveTree",version:"0.1.1-1104"}}},{start:5450,end:10824})}(Eb.Tree);Eb.InteractiveTree=Ob;Eb.InteractiveTree=Ob;Eb.InteractiveTree=Ob;Ob=function(ub){var cd=lively.FreezerRuntime.recorderFor("InteractiveTree/index.js"),Vc=cd.hasOwnProperty("SceneGraphTree")&&"function"===typeof cd.SceneGraphTree?cd.SceneGraphTree:cd.SceneGraphTree=function(ib){ib&&ib[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Ca(Vc,ub,[{key:"beforePublish",value:function(){this.submorphs=[];this.reset()}},{key:"selectMorphInTarget",value:function(ib){var Ra=this.treeData.asList().find(function(pb){return pb.container.target===ib});Ra&&this.selectedNode!=Ra&&this.selectPath(this.treeData.pathOf(Ra))}},{key:"onLoad",value:function(){var ib=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ra){if(1==Ra.nextAddress)return Ra.yield(ib.whenRendered(),
2);if(3!=Ra.nextAddress){if(ib.ownerChain().find(function(pb){return pb.isComponent}))return Ra.return();ib.submorphs=[];return Ra.yield(ib.whenRendered(),3)}ib.get("inspector").makeEditorVisible(!0);ib.get("inspector").makeEditorVisible(!1);ib.setTarget($world);Ra.jumpToEnd()})}},{key:"adjustProportions",value:function(ib){ib=(ib?ib.state.dragDelta:{y:0}).y;var Ra=this.get("inspector"),pb=this.get("scene graph resizer"),bb=this.get("mode selector"),Oc=this.get("connections tree");this.height+=ib;
Ra.height-=ib;Oc.height-=ib;pb.top=this.bottom;pb.left=0;bb.top=pb.bottom;Oc.top=Ra.top=bb.bottom+5}},{key:"reset",value:function(){var ib=this;this.treeData=new Eb.InteractiveTreeData({children:[],container:Eb.morph()});this.get("inspector").targetObject={};this.selectedNode=null;this.anchors.filter(function(Ra){return null==Ra.id}).forEach(function(Ra){return ib.removeAnchor(Ra)})}},{key:"setTarget",value:function(ib){this.target=ib;this.treeData=this.getTreeFromSubmorphHierarchy(ib);this.uncollapse(this.treeData.root)}},
{key:"isNodeOutOfSync",value:function(ib){var Ra=this;if(ib===this._previewNode)return!1;if(ib.container.nameNeedsUpdate)return!0;var pb=ib.container.target.submorphs.filter(function(bb){return!Ra.ignoreMorph(bb)});return pb.length!=ib.children.length||pb.map(function(bb){return bb.name}).join("")!=ib.children.map(function(bb){return bb.target?bb.target.name:""}).join("")?!0:!1}},{key:"getNewChildren",value:function(ib){var Ra=this,pb=ib.container.target.submorphs.map(function(xb){return xb.__scene_graph_target__?
xb.__scene_graph_target__():xb}).filter(function(xb){return!Ra.ignoreMorph(xb)}),bb=[],Oc={},ma;for(ma in pb){Oc.$jscomp$loop$prop$m$2589=pb[ma];var Aa=Eb.arr.without(ib.children,this._previewNode).find(function(xb){return function(P){return P.container.target.id==xb.$jscomp$loop$prop$m$2589.id}}(Oc));bb[ma]=Aa?Aa:this.readMorphHierarchy(Oc.$jscomp$loop$prop$m$2589);Oc={$jscomp$loop$prop$m$2589:Oc.$jscomp$loop$prop$m$2589}}return bb}},{key:"refresh",value:function(){var ib=this;if(!this._updating&&
!this._dropInProgress){var Ra=!1;Eb.tree.prewalk(this.treeData.root,function(pb){ib.isNodeOutOfSync(pb)&&(Ra=!0,pb.name=pb.container.target.name,pb.container.refresh(),pb.children=ib.getNewChildren(pb))},function(pb){return pb.children});this.update(Ra)}}},{key:"ignoreMorph",value:function(ib){return ib.isMorph?ib.isContainer||ib.isWindow||ib.getWindow()||ib.isEpiMorph||ib.isHand||["lively.halos"].includes(ib.constructor[Symbol.for("lively-module-meta")].package.name)||["MorphicSideBar","SideBarToggler",
"UserFlap","Menu"].includes(ib.constructor.name):!1}},{key:"onDropHoverOut",value:function(ib){var Ra=ib.hand.grabbedMorphs[0];ib=ib.hand.findDropTarget();if(!(ib===this||ib&&ib.ownerChain().includes(this))&&Ra&&Ra.isContainer)Ra.onDragOutside()}},{key:"onDropHoverIn",value:function(ib){var Ra=ib.hand.grabbedMorphs[0];Ra&&!Ra.isContainer&&($world.halos().forEach(function(pb){return pb.remove()}),Ra.remove(),Object.assign(Ra,ib.hand._grabbedMorphProperties.get(Ra).pointerAndShadow),Ra=this.renderContainerFor(Ra,
!1),ib.hand.grab(Ra),Ra.leftCenter=Eb.pt(-20,0))}},{key:"getTreeFromSubmorphHierarchy",value:function(ib){return new Eb.InteractiveTreeData(this.readMorphHierarchy(ib))}},{key:"readMorphHierarchy",value:function(ib){var Ra=this;return Eb.tree.mapTree(ib,function(pb,bb){return{name:pb.name,isCollapsed:!0,container:Ra.renderContainerFor(pb),visible:!0,children:bb}},function(pb){return pb.submorphs.filter(function(bb){return pb.isWorld?!Ra.ignoreMorph(bb):!0})})}},{key:"renderContainerFor",value:function(ib,
Ra){ib=void 0===ib?Eb.morph({name:"root"}):ib;Ra=new Eb.MorphContainer({tree:this,fill:void 0===Ra||Ra?Eb.Color.transparent:Eb.Color.gray.withA(.5),fontColor:this.nonSelectionFontColor,fontFamily:this.fontFamily,target:ib,opacity:ib.visible?1:.5});ib._data?(Ra._data=ib._data,ib._data.container=Ra):Ra._data={name:ib.name,isCollapsed:!0,container:Ra,children:[]};return Ra}},{key:"collapseAll",value:function(){var ib=this;this.treeData.asList().forEach(function(Ra){return Ra!=ib.treeData.root?Ra.isCollapsed=
!0:Ra.isCollapsed=!1})}},{key:"filterMorphs",value:function(ib){var Ra=this,pb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(bb){if(1==bb.nextAddress)return pb=ib.tokens[0],Ra.treeData.filterActive||(Ra._collapseState=new WeakMap(Ra.treeData.asList().map(function(Oc){return[Oc,Oc.isCollapsed]}))),Ra.treeData.filterActive=!!pb,bb.yield(Ra.treeData.filter(function(Oc){var ma=!pb||Oc.container.target.name.includes(pb);Oc.container.highlightTerm(pb);return ma},3),2);Ra.treeData.filterActive||
Ra.treeData.asList().forEach(function(Oc){return Oc.isCollapsed=Ra._collapseState.has(Oc)?Ra._collapseState.get(Oc):!0});Ra.refresh();bb.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"SceneGraphTree"}},{key:"properties",get:function(){return{target:{serialize:!1}}}}],cd,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"InteractiveTree",
version:"0.1.1-1104"}}},{start:10833,end:17441})}(Eb.InteractiveTree);Eb.SceneGraphTree=Ob;Eb.SceneGraphTree=Ob;Eb.SceneGraphTree=Ob;Ob=function(ub){var cd=lively.FreezerRuntime.recorderFor("InteractiveTree/index.js"),Vc=cd.hasOwnProperty("MorphContainer")&&"function"===typeof cd.MorphContainer?cd.MorphContainer:cd.MorphContainer=function(ib){ib&&ib[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Ca(Vc,ub,[{key:"refresh",value:function(){var ib=
this,Ra,pb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(bb){Ra=ib.target;if(!Ra)return bb.return();ib.reactsToPointer=!0;ib.dropShadow=!1;ib.submorphs=[ib.getLabel(),Ra.layout&&ib.getLayoutControls(),ib.getConnectionControls()].filter(Boolean).map(function(Oc,ma){Oc.fitIfNeeded();Oc.left=pb?pb.right+5:0;Oc.top=2;return pb=Oc});ib.height=20;ib.opacity=Ra.visible?1:.5;bb.jumpToEnd()})}},{key:"getLabel",value:function(){var ib=this.getSubmorphNamed("name label")||Eb.morph({type:"label",
name:"name label",reactsToPointer:!1,padding:Eb.rect(0,0,0,0),acceptsDrops:!1,fontSize:this.tree.fontSize}),Ra=ib.textString.slice(2,-1);Ra&&Ra==this.target.name||(ib.value=[].concat($jscomp.arrayFromIterable(this.getIcon(this.target)),[" "+this.target.name+" "]));return ib}},{key:"getIcon",value:function(ib){return Eb.Icon.textAttribute({Morph:"square",Ellipse:"circle",Text:"font",Label:"tag",Polygon:"draw-polygon",Path:"bezier-curve",Image:"image",Canvas:"chess-board",HTMLMorph:"code"}[Eb.getClassName(ib)]||
"codepen",{paddingTop:"4px",fontSize:this.tree.fontSize-2,opacity:.6})}},{key:"getLayoutControls",value:function(){var ib=this.getSubmorphNamed("layout label")||Eb.morph({type:"label",name:"layout label",borderRadius:3,acceptsDrops:!1,padding:Eb.Rectangle.inset(4,2,4,2),fill:Eb.Color.orange,fontColor:Eb.Color.white});ib._isControlElement=!0;ib.textString!=this.target.layout.name()&&(ib.value=this.target.layout.name());return ib}},{key:"getConnectionControls",value:function(){this.connectionCount=
this.target.attributeConnections?this.target.attributeConnections.filter(function(pb){return!pb.targetObj.isHalo}).length:0;var ib=this.getSubmorphNamed("connections label")||Eb.morph({acceptsDrops:!1,borderRadius:3,type:"label",name:"connections label",padding:Eb.Rectangle.inset(4,2,4,2),nativeCursor:"pointer",fill:Eb.Color.red,fontColor:Eb.Color.white});ib._isControlElement=!0;ib.visible=!this.connectionHalo&&!!this.connectionCount;var Ra=this.connectionCount?this.connectionCount+" connection"+
(1<this.connectionCount?"s":""):"Manage Connections";ib.textString!=Ra&&(ib.value=Ra);return ib}},{key:"highlightTerm",value:function(ib){var Ra=this.submorphs[0],pb=Ra.textAndAttributes.slice(0,2),bb=Ra.textString.slice(1).split(ib);Ra.textAndAttributes=1===bb.length?[].concat($jscomp.arrayFromIterable(pb),[bb[0]]):[].concat($jscomp.arrayFromIterable(pb),$jscomp.arrayFromIterable(Eb.arr.flatten(Eb.arr.interpose(bb.map(function(Oc){return[Oc,{}]}),[ib,{fontWeight:"900"}]))))}},{key:"getClassControls",
value:function(){}},{key:"wantsToBeDroppedOn",value:function(ib){var Ra=Ca._get(Object.getPrototypeOf(Vc.prototype),"wantsToBeDroppedOn",this).call(this,ib);if(![ib].concat($jscomp.arrayFromIterable(ib.ownerChain())).includes(this.tree))this.onDragOutside();return Ra}},{key:"onGrab",value:function(ib){var Ra=this,pb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(bb){if(1==bb.nextAddress)return Ra.tree._dropInProgress=!0,pb=Ra.target.globalPosition,Ca._get(Object.getPrototypeOf(Vc.prototype),
"onGrab",Ra).call(Ra,ib),Ra._data.globalTargetPosition=pb,bb.yield(Ra.whenRendered(),2);if(Ra.tree.fullContainsWorldPoint(Ra.globalPosition))Ra.leftCenter=Eb.pt(-20,0);else Ra.onDragOutside();Ra.tree._dropInProgress=!1;bb.jumpToEnd()})}},{key:"onDragOutside",value:function(){this._draggedOutside||(this._draggedOutside=!0,this.queue||(this.queue=Eb.fun.createQueue("container-hover-queue",function(ib,Ra){var pb,bb,Oc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ma){if(1==ma.nextAddress)return pb=
ib.target,bb=pb.opacity,Oc=pb.scale,ib.target.opacity=0,ib.target.scale=.5,$world.halos().forEach(function(Aa){return Aa.remove()}),$world.firstHand.grab(ib.target),ib.target._data=ib._data,ib.remove(),ib.target.position=Eb.pt(0,0),ma.yield(ib.target.animate({opacity:bb,scale:Oc,duration:200}),2);Ra();ma.jumpToEnd()})})),this.queue.push(this))}},{key:"onChildAdded",value:function(ib){var Ra=this.node.children.indexOf(ib.node||ib._data)+1;Ra=this.node.children[Ra];ib.target.remove();Ra?(Ra=this.target.submorphs.indexOf(Ra.container.target),
this.target.addMorphAt(ib.target,Ra)):this.target.addMorph(ib.target);ib._data.globalTargetPosition&&(ib.target.position=this.target.localize(ib._data.globalTargetPosition))}},{key:"onChildRemoved",value:function(ib){}},{key:"toggleConnectionControl",value:function(ib){this.getSubmorphNamed("connections label").visible=ib}},{key:"toggleSelected",value:function(ib){var Ra=this,pb,bb,Oc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ma){if(1==ma.nextAddress)return Ca._get(Object.getPrototypeOf(Vc.prototype),
"toggleSelected",Ra).call(Ra,ib),Ra._active===ib?ma.return():(Ra._active=ib)&&Ra.target&&Ra.target.isMorph&&Ra.world()?ma.yield(Ra.target.whenRendered(),3):ma.jumpTo(0);Ra.get("inspector").targetObject=Ra.target;Ra.get("connections tree").inspectConnectionsOf(Ra.target);if(Ra.connectionHalo)return ma.return();pb=$jscomp.makeIterator(Ra.world().halos());for(bb=pb.next();!bb.done;bb=pb.next()){Oc=bb.value;if(Oc.target===Ra.target)return ma.return();Oc.remove()}Eb.noUpdate({sourceObj:Ra.world(),targetObj:Ra.sideBar,
sourceAttribute:"showHaloFor",targetAttribute:"selectNode"},function(){return Ra.world().showHaloFor(Ra.target)});ma.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"MorphContainer"}},{key:"properties",get:function(){return{fontFamily:{after:["submorphs"],derived:!0,set:function(ib){this.submorphs[0].fontFamily=ib}},fontColor:{after:["submorphs"],derived:!0,set:function(ib){this.submorphs[0].fontColor=ib}},fontSize:{derived:!0,set:function(ib){this.submorphs[0].fontSize=
ib}},target:{serialize:!1},dragTriggerDistance:{defaultValue:15},borderRadius:{defaultValue:4},nameNeedsUpdate:{derived:!0,get:function(){return!this.target||this.submorphs[0].textString.slice(2,-1)==this.target.name&&this.connectionCount==(this.target.attributeConnections||[]).length?!1:!0}},grabbable:{defaultValue:!0},draggable:{defaultValue:!0},submorphs:{after:["target","tree"],initialize:function(){this.refresh()}},sideBar:{derived:!0,get:function(){return this.owner.owner}}}}}],cd,{pathInPackage:function(){return"index.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"InteractiveTree",version:"0.1.1-1104"}}},{start:17452,end:25124})}(Eb.InteractiveTreeContainer);Eb.MorphContainer=Ob;Eb.MorphContainer=Ob;Eb.MorphContainer=Ob;var ad=lively.FreezerRuntime.recorderFor("ConnectionsTree/index.js");ad.visualizeConnection=function(ub,cd,Vc,ib,Ra){ib=void 0===ib?{}:ib;Ra=ad.rect(0).sides.concat(ad.rect(0).corners);
Vc=Vc||new ad.Leash(Object.assign({isSmooth:!0,styleClasses:["Halo"],borderColor:ad.Color.orange,epiMorph:!0,endpointStyle:{start:{fill:ad.Color.transparent,nativeCursor:"auto"},end:{fill:ad.Color.orange}}},ib,{hasFixedPosition:!0}));Vc.startPoint.attachTo(ub,"rightCenter");cd.isMorph?(ib=cd.globalBounds().partNameNearest(Ra,ub.globalPosition),ub.globalPosition.equals(cd.globalBounds().partNamed(ib))&&cd.globalBounds().partNameNearest(ad.arr.without(Ra,ib),ub.globalPosition),Vc.endPoint.attachTo(cd,
"leftCenter")):(Ra=ub.globalBounds().topRight().addPt(ad.pt(100,0)),cd=ad.morph({type:"label",value:cd.toString(),styleClasses:["Tooltip"],padding:ad.rect(8,4)}).openInWorld(Ra),cd.position=ub.world().bounds().translateForInclusion(cd.bounds()).topLeft(),ad.once(Vc,"remove",cd,"remove"),Vc.endPoint.attachTo(cd,"leftCenter"));return Vc};ad.startConnecting=function(ub,cd){ub.animate({opacity:.8,duration:300});ub.startPoint.attachTo(cd,"center");ub.vertices[0].position=ad.pt(2,2)};ad.stopConnecting=
function(ub,cd,Vc,ib){function Ra(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(ma){if(1==ma.nextAddress)return ma.yield(ub.animate({opacity:0,duration:300}),2);ub.startPoint.clearConnection();ub.endPoint.clearConnection();ub.remove();ma.jumpToEnd()})}ib=void 0===ib?!1:ib;var pb,bb,Oc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ma){return 1==ma.nextAddress?(pb=ub,bb=pb.endPoint,(Oc=bb.connectedMorph)&&"MorphContainer"==ad.getClassName(Oc)&&(Oc=Oc.target),Oc?ma.yield(ad.interactiveConnectGivenSourceAndTarget(Vc,
ib,Oc),2):ma.jumpTo(2)):ma.yield(Ra(),0)})};ad.editConnection=function(ub){var cd=ub.connection,Vc=ub.connectionPoint,ib;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ra){if(1==Ra.nextAddress)return ib=ad.visualizeConnection(Vc,cd.targetObj,!1,{borderColor:ad.Color.gray.darker(),endpointStyle:{start:{fill:ad.Color.transparent,nativeCursor:"auto"},end:{fill:ad.Color.gray.darker()}}}),Ra.yield(ad.interactivelyReEvaluateConnection(cd,"Edit Connection",!1),2);ib.remove();Ra.jumpToEnd()})};
ad.Tree=Ic;ad.TreeData=Dc;ad.Icon=ec;ad.morph=le;ad.pt=bc;ad.Rectangle=wc;ad.rect=Pc;ad.Color=$c;ad.arr=md;ad.connect=Xc;ad.signal=eb;ad.Leash=Vb;ad.once=Rb;ad.interactivelyReEvaluateConnection=sc;ad.interactiveConnectGivenSource=Za;ad.interactiveConnectGivenSourceAndTarget=qb;ad.getClassName=Ja;(function(ub){var cd=lively.FreezerRuntime.recorderFor("ConnectionsTree/index.js"),Vc=cd.hasOwnProperty("ConnectionsTreeData")&&"function"===typeof cd.ConnectionsTreeData?cd.ConnectionsTreeData:cd.ConnectionsTreeData=
function(ib){ib&&ib[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Ca(Vc,ub,[{key:"parseMorphConnections",value:function(ib){for(var Ra={},pb=$jscomp.makeIterator(void 0===ib.attributeConnections?[]:ib.attributeConnections),bb=pb.next();!bb.done;bb=pb.next())bb=bb.value,bb.targetObj.isHalo||(Ra[bb.sourceAttrName]=Ra[bb.sourceAttrName]||[{name:["      New Connection  ",{fontColor:ad.Color.white.withA(.5),fontStyle:"italic"},this.renderPin(ib,
bb.sourceAttrName),{}]}],ad.arr.pushAt(Ra[bb.sourceAttrName],{name:[].concat($jscomp.arrayFromIterable(this.renderExistingConnection(bb)))},0));return{children:Object.entries(Ra).map(function(Oc){var ma=$jscomp.makeIterator(Oc);Oc=ma.next().value;ma=ma.next().value;return{name:[Oc,{fontWeight:"bold"}," ",{},ad.morph({fill:ad.Color.white,opacity:.7,value:""+(ma.length-1),borderRadius:15,fontWeight:"bold",padding:ad.Rectangle.inset(5,0,5,0),type:"label"}),{paddingTop:"4px"}],children:ma}}).concat([{name:["New Connection  ",
{fontColor:ad.Color.white.withA(.5),fontStyle:"italic"},this.renderPin(ib),{}]}])}}},{key:"renderExistingConnection",value:function(ib){var Ra=this,pb=ad.morph({type:"label",fontColor:ad.Color.gray,fontSize:16,nativeCursor:"pointer",value:[].concat($jscomp.arrayFromIterable(ad.Icon.textAttribute("long-arrow-alt-right",{paddingTop:"4px"})),["  ",{},ib.targetMethodName,{}])}),bb=this.renderDeadPin(),Oc=bb.submorphs[0];ad.connect(pb,"onHoverIn",function(){pb.fontColor=ad.Color.orange;pb._leash=ad.visualizeConnection(Oc,
ib.targetObj,pb._leash);Oc.fill=ad.Color.orange;Oc.border={color:ad.Color.orange,width:3}});ad.connect(pb,"onMouseDown",function(ma){return $jscomp.asyncExecutePromiseGeneratorProgram(function(Aa){if(1==Aa.nextAddress)return ma.stop(),Aa.yield(ad.interactivelyReEvaluateConnection(ib),2);ad.signal(Ra,"refresh");Aa.jumpToEnd()})});ad.connect(pb,"onHoverOut",function(){pb.fontColor=ad.Color.gray;Oc.fill=ad.Color.gray;Oc.border={color:ad.Color.white,width:1};pb._leash.remove();pb._leash=void 0});return[pb,
{},"  ",{}].concat($jscomp.arrayFromIterable(ad.Icon.textAttribute("times",{nativeCursor:"pointer ",onMouseDown:function(){ib.disconnect();ad.signal(Ra,"refresh")}})),["  ",{},bb,{}])}},{key:"renderDeadPin",value:function(){var ib=ad.morph({type:"ellipse",fill:ad.Color.gray,extent:ad.pt(10,10),center:ad.pt(8,12),borderWidth:1});return ad.morph({extent:ad.pt(20,20),fill:ad.Color.transparent,reactsToPointer:!1,submorphs:[ib]})}},{key:"renderPin",value:function(ib,Ra){var pb=this,bb=ad.morph({type:"ellipse",
fill:ad.Color.gray.withA(.5),extent:ad.pt(10,10),center:ad.pt(8,12),draggable:!1,borderWidth:1}),Oc=new ad.Leash({opacity:0,styleClasses:["Halo"],isSmooth:!0,epiMorph:!0,hasFixedPosition:!0,borderColor:ad.Color.gray.darker(),endpointStyle:{fill:ad.Color.gray.darker()},position:ad.pt(1,1),vertices:[ad.pt(0,0),ad.pt(0,0)],canConnectTo:function(ma){return"MorphContainer"==ad.getClassName(ma)||2>ad.arr.intersect([ma].concat($jscomp.arrayFromIterable(ma.ownerChain())),[bb].concat($jscomp.arrayFromIterable(bb.ownerChain()))).length}});
bb.addMorph(Oc);ad.connect(Oc.endPoint,"onDragStart",function(){ad.startConnecting(Oc,bb)});ad.connect(Oc.endPoint,"onDragEnd",function(ma){return $jscomp.asyncExecutePromiseGeneratorProgram(function(Aa){if(1==Aa.nextAddress)return bb.center=ad.pt(8,12),Aa.yield(ad.stopConnecting(Oc,bb,ib,Ra),2);ad.signal(pb,"refresh");Aa.jumpToEnd()})});return ad.morph({extent:ad.pt(20,20),fill:ad.Color.transparent,reactsToPointer:!1,submorphs:[bb]})}},{key:"display",value:function(ib){return ib.name}},{key:"collapse",
value:function(ib,Ra){ib.isCollapsed=Ra}},{key:"isCollapsed",value:function(ib){return ib.isCollapsed}},{key:"isLeaf",value:function(ib){return!ib.children}},{key:"getChildren",value:function(ib){return ib.children}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ConnectionsTreeData"}},{key:"for",value:function(ib){var Ra=new this;Ra.root=Ra.parseMorphConnections(ib);return Ra}}],cd,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"ConnectionsTree",version:"0.1.1-16"}}},{start:3542,end:8147})})(ad.TreeData);Ob=function(ub){var cd=lively.FreezerRuntime.recorderFor("ConnectionsTree/index.js"),Vc=cd.hasOwnProperty("ConnectionsTree")&&"function"===typeof cd.ConnectionsTree?cd.ConnectionsTree:cd.ConnectionsTree=function(ib){ib&&ib[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};
return Ca(Vc,ub,[{key:"inspectConnectionsOf",value:function(ib){if(this.targetMorph=ib)this.treeData=ad.ConnectionsTreeData.for(ib),ad.connect(this.treeData,"refresh",this,"refresh")}},{key:"refresh",value:function(){this.targetMorph&&(this.treeData=ad.ConnectionsTreeData.for(this.targetMorph),ad.connect(this.treeData,"refresh",this,"refresh"))}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ConnectionsTree"}},{key:"properties",get:function(){return{}}}],cd,{pathInPackage:function(){return"index.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"ConnectionsTree",version:"0.1.1-16"}}},{start:8164,end:8717})}(ad.Tree);Ob=ad.ConnectionsTree;ad.default=Ob}}});